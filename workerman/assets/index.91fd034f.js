function Pj(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();function lk(e,t){const r=Object.create(null),n=e.split(",");for(let i=0;i<n.length;i++)r[n[i]]=!0;return t?i=>!!r[i.toLowerCase()]:i=>!!r[i]}const Ej="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Cj=lk(Ej);function mD(e){return!!e||e===""}function jl(e){if(zt(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],i=mr(n)?xj(n):jl(n);if(i)for(const o in i)t[o]=i[o]}return t}else{if(mr(e))return e;if(nr(e))return e}}const Aj=/;(?![^(]*\))/g,Mj=/:(.+)/;function xj(e){const t={};return e.split(Aj).forEach(r=>{if(r){const n=r.split(Mj);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function gr(e){let t="";if(mr(e))t=e;else if(zt(e))for(let r=0;r<e.length;r++){const n=gr(e[r]);n&&(t+=n+" ")}else if(nr(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}function Lj(e,t){if(e.length!==t.length)return!1;let r=!0;for(let n=0;r&&n<e.length;n++)r=ru(e[n],t[n]);return r}function ru(e,t){if(e===t)return!0;let r=VC(e),n=VC(t);if(r||n)return r&&n?e.getTime()===t.getTime():!1;if(r=Xd(e),n=Xd(t),r||n)return e===t;if(r=zt(e),n=zt(t),r||n)return r&&n?Lj(e,t):!1;if(r=nr(e),n=nr(t),r||n){if(!r||!n)return!1;const i=Object.keys(e).length,o=Object.keys(t).length;if(i!==o)return!1;for(const s in e){const a=e.hasOwnProperty(s),l=t.hasOwnProperty(s);if(a&&!l||!a&&l||!ru(e[s],t[s]))return!1}}return String(e)===String(t)}function uk(e,t){return e.findIndex(r=>ru(r,t))}const E=e=>mr(e)?e:e==null?"":zt(e)||nr(e)&&(e.toString===bD||!Ht(e.toString))?JSON.stringify(e,_D,2):String(e),_D=(e,t)=>t&&t.__v_isRef?_D(e,t.value):Uc(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[n,i])=>(r[`${n} =>`]=i,r),{})}:yf(t)?{[`Set(${t.size})`]:[...t.values()]}:nr(t)&&!zt(t)&&!wD(t)?String(t):t,Ie={},Vc=[],Di=()=>{},Ij=()=>!1,Oj=/^on[^a-z]/,L1=e=>Oj.test(e),ck=e=>e.startsWith("onUpdate:"),sn=Object.assign,fk=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},Rj=Object.prototype.hasOwnProperty,fe=(e,t)=>Rj.call(e,t),zt=Array.isArray,Uc=e=>Fp(e)==="[object Map]",yf=e=>Fp(e)==="[object Set]",VC=e=>Fp(e)==="[object Date]",Ht=e=>typeof e=="function",mr=e=>typeof e=="string",Xd=e=>typeof e=="symbol",nr=e=>e!==null&&typeof e=="object",yD=e=>nr(e)&&Ht(e.then)&&Ht(e.catch),bD=Object.prototype.toString,Fp=e=>bD.call(e),Dj=e=>Fp(e).slice(8,-1),wD=e=>Fp(e)==="[object Object]",hk=e=>mr(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Lg=lk(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),I1=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},Nj=/-(\w)/g,Lo=I1(e=>e.replace(Nj,(t,r)=>r?r.toUpperCase():"")),Fj=/\B([A-Z])/g,bf=I1(e=>e.replace(Fj,"-$1").toLowerCase()),O1=I1(e=>e.charAt(0).toUpperCase()+e.slice(1)),Sy=I1(e=>e?`on${O1(e)}`:""),Yd=(e,t)=>!Object.is(e,t),Ig=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},ym=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},bm=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let UC;const zj=()=>UC||(UC=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let go;class SD{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&go&&(this.parent=go,this.index=(go.scopes||(go.scopes=[])).push(this)-1)}run(t){if(this.active){const r=go;try{return go=this,t()}finally{go=r}}}on(){go=this}off(){go=this.parent}stop(t){if(this.active){let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.scopes)for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);if(this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.active=!1}}}function TD(e){return new SD(e)}function Bj(e,t=go){t&&t.active&&t.effects.push(e)}const dk=e=>{const t=new Set(e);return t.w=0,t.n=0,t},kD=e=>(e.w&Ca)>0,PD=e=>(e.n&Ca)>0,$j=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Ca},Vj=e=>{const{deps:t}=e;if(t.length){let r=0;for(let n=0;n<t.length;n++){const i=t[n];kD(i)&&!PD(i)?i.delete(e):t[r++]=i,i.w&=~Ca,i.n&=~Ca}t.length=r}},oS=new WeakMap;let rd=0,Ca=1;const sS=30;let Ai;const Gl=Symbol(""),aS=Symbol("");class pk{constructor(t,r=null,n){this.fn=t,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,Bj(this,n)}run(){if(!this.active)return this.fn();let t=Ai,r=ba;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Ai,Ai=this,ba=!0,Ca=1<<++rd,rd<=sS?$j(this):WC(this),this.fn()}finally{rd<=sS&&Vj(this),Ca=1<<--rd,Ai=this.parent,ba=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Ai===this?this.deferStop=!0:this.active&&(WC(this),this.onStop&&this.onStop(),this.active=!1)}}function WC(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}let ba=!0;const ED=[];function wf(){ED.push(ba),ba=!1}function Sf(){const e=ED.pop();ba=e===void 0?!0:e}function Dn(e,t,r){if(ba&&Ai){let n=oS.get(e);n||oS.set(e,n=new Map);let i=n.get(r);i||n.set(r,i=dk()),CD(i)}}function CD(e,t){let r=!1;rd<=sS?PD(e)||(e.n|=Ca,r=!kD(e)):r=!e.has(Ai),r&&(e.add(Ai),Ai.deps.push(e))}function gs(e,t,r,n,i,o){const s=oS.get(e);if(!s)return;let a=[];if(t==="clear")a=[...s.values()];else if(r==="length"&&zt(e))s.forEach((l,u)=>{(u==="length"||u>=n)&&a.push(l)});else switch(r!==void 0&&a.push(s.get(r)),t){case"add":zt(e)?hk(r)&&a.push(s.get("length")):(a.push(s.get(Gl)),Uc(e)&&a.push(s.get(aS)));break;case"delete":zt(e)||(a.push(s.get(Gl)),Uc(e)&&a.push(s.get(aS)));break;case"set":Uc(e)&&a.push(s.get(Gl));break}if(a.length===1)a[0]&&lS(a[0]);else{const l=[];for(const u of a)u&&l.push(...u);lS(dk(l))}}function lS(e,t){const r=zt(e)?e:[...e];for(const n of r)n.computed&&jC(n);for(const n of r)n.computed||jC(n)}function jC(e,t){(e!==Ai||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const Uj=lk("__proto__,__v_isRef,__isVue"),AD=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Xd)),Wj=vk(),jj=vk(!1,!0),Gj=vk(!0),GC=Hj();function Hj(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const n=de(this);for(let o=0,s=this.length;o<s;o++)Dn(n,"get",o+"");const i=n[t](...r);return i===-1||i===!1?n[t](...r.map(de)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){wf();const n=de(this)[t].apply(this,r);return Sf(),n}}),e}function vk(e=!1,t=!1){return function(n,i,o){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&o===(e?t?lG:OD:t?ID:LD).get(n))return n;const s=zt(n);if(!e&&s&&fe(GC,i))return Reflect.get(GC,i,o);const a=Reflect.get(n,i,o);return(Xd(i)?AD.has(i):Uj(i))||(e||Dn(n,"get",i),t)?a:Ze(a)?s&&hk(i)?a:a.value:nr(a)?e?RD(a):Tf(a):a}}const Xj=MD(),Yj=MD(!0);function MD(e=!1){return function(r,n,i,o){let s=r[n];if(qd(s)&&Ze(s)&&!Ze(i))return!1;if(!e&&!qd(i)&&(uS(i)||(i=de(i),s=de(s)),!zt(r)&&Ze(s)&&!Ze(i)))return s.value=i,!0;const a=zt(r)&&hk(n)?Number(n)<r.length:fe(r,n),l=Reflect.set(r,n,i,o);return r===de(o)&&(a?Yd(i,s)&&gs(r,"set",n,i):gs(r,"add",n,i)),l}}function qj(e,t){const r=fe(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&r&&gs(e,"delete",t,void 0),n}function Zj(e,t){const r=Reflect.has(e,t);return(!Xd(t)||!AD.has(t))&&Dn(e,"has",t),r}function Kj(e){return Dn(e,"iterate",zt(e)?"length":Gl),Reflect.ownKeys(e)}const xD={get:Wj,set:Xj,deleteProperty:qj,has:Zj,ownKeys:Kj},Jj={get:Gj,set(e,t){return!0},deleteProperty(e,t){return!0}},Qj=sn({},xD,{get:jj,set:Yj}),gk=e=>e,R1=e=>Reflect.getPrototypeOf(e);function w0(e,t,r=!1,n=!1){e=e.__v_raw;const i=de(e),o=de(t);r||(t!==o&&Dn(i,"get",t),Dn(i,"get",o));const{has:s}=R1(i),a=n?gk:r?yk:Zd;if(s.call(i,t))return a(e.get(t));if(s.call(i,o))return a(e.get(o));e!==i&&e.get(t)}function S0(e,t=!1){const r=this.__v_raw,n=de(r),i=de(e);return t||(e!==i&&Dn(n,"has",e),Dn(n,"has",i)),e===i?r.has(e):r.has(e)||r.has(i)}function T0(e,t=!1){return e=e.__v_raw,!t&&Dn(de(e),"iterate",Gl),Reflect.get(e,"size",e)}function HC(e){e=de(e);const t=de(this);return R1(t).has.call(t,e)||(t.add(e),gs(t,"add",e,e)),this}function XC(e,t){t=de(t);const r=de(this),{has:n,get:i}=R1(r);let o=n.call(r,e);o||(e=de(e),o=n.call(r,e));const s=i.call(r,e);return r.set(e,t),o?Yd(t,s)&&gs(r,"set",e,t):gs(r,"add",e,t),this}function YC(e){const t=de(this),{has:r,get:n}=R1(t);let i=r.call(t,e);i||(e=de(e),i=r.call(t,e)),n&&n.call(t,e);const o=t.delete(e);return i&&gs(t,"delete",e,void 0),o}function qC(){const e=de(this),t=e.size!==0,r=e.clear();return t&&gs(e,"clear",void 0,void 0),r}function k0(e,t){return function(n,i){const o=this,s=o.__v_raw,a=de(s),l=t?gk:e?yk:Zd;return!e&&Dn(a,"iterate",Gl),s.forEach((u,c)=>n.call(i,l(u),l(c),o))}}function P0(e,t,r){return function(...n){const i=this.__v_raw,o=de(i),s=Uc(o),a=e==="entries"||e===Symbol.iterator&&s,l=e==="keys"&&s,u=i[e](...n),c=r?gk:t?yk:Zd;return!t&&Dn(o,"iterate",l?aS:Gl),{next(){const{value:f,done:h}=u.next();return h?{value:f,done:h}:{value:a?[c(f[0]),c(f[1])]:c(f),done:h}},[Symbol.iterator](){return this}}}}function Ds(e){return function(...t){return e==="delete"?!1:this}}function tG(){const e={get(o){return w0(this,o)},get size(){return T0(this)},has:S0,add:HC,set:XC,delete:YC,clear:qC,forEach:k0(!1,!1)},t={get(o){return w0(this,o,!1,!0)},get size(){return T0(this)},has:S0,add:HC,set:XC,delete:YC,clear:qC,forEach:k0(!1,!0)},r={get(o){return w0(this,o,!0)},get size(){return T0(this,!0)},has(o){return S0.call(this,o,!0)},add:Ds("add"),set:Ds("set"),delete:Ds("delete"),clear:Ds("clear"),forEach:k0(!0,!1)},n={get(o){return w0(this,o,!0,!0)},get size(){return T0(this,!0)},has(o){return S0.call(this,o,!0)},add:Ds("add"),set:Ds("set"),delete:Ds("delete"),clear:Ds("clear"),forEach:k0(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{e[o]=P0(o,!1,!1),r[o]=P0(o,!0,!1),t[o]=P0(o,!1,!0),n[o]=P0(o,!0,!0)}),[e,r,t,n]}const[eG,rG,nG,iG]=tG();function mk(e,t){const r=t?e?iG:nG:e?rG:eG;return(n,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(fe(r,i)&&i in n?r:n,i,o)}const oG={get:mk(!1,!1)},sG={get:mk(!1,!0)},aG={get:mk(!0,!1)},LD=new WeakMap,ID=new WeakMap,OD=new WeakMap,lG=new WeakMap;function uG(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function cG(e){return e.__v_skip||!Object.isExtensible(e)?0:uG(Dj(e))}function Tf(e){return qd(e)?e:_k(e,!1,xD,oG,LD)}function fG(e){return _k(e,!1,Qj,sG,ID)}function RD(e){return _k(e,!0,Jj,aG,OD)}function _k(e,t,r,n,i){if(!nr(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=i.get(e);if(o)return o;const s=cG(e);if(s===0)return e;const a=new Proxy(e,s===2?n:r);return i.set(e,a),a}function hs(e){return qd(e)?hs(e.__v_raw):!!(e&&e.__v_isReactive)}function qd(e){return!!(e&&e.__v_isReadonly)}function uS(e){return!!(e&&e.__v_isShallow)}function DD(e){return hs(e)||qd(e)}function de(e){const t=e&&e.__v_raw;return t?de(t):e}function Ei(e){return ym(e,"__v_skip",!0),e}const Zd=e=>nr(e)?Tf(e):e,yk=e=>nr(e)?RD(e):e;function ND(e){ba&&Ai&&(e=de(e),CD(e.dep||(e.dep=dk())))}function FD(e,t){e=de(e),e.dep&&lS(e.dep)}function Ze(e){return!!(e&&e.__v_isRef===!0)}function D1(e){return zD(e,!1)}function Og(e){return zD(e,!0)}function zD(e,t){return Ze(e)?e:new hG(e,t)}class hG{constructor(t,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?t:de(t),this._value=r?t:Zd(t)}get value(){return ND(this),this._value}set value(t){t=this.__v_isShallow?t:de(t),Yd(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:Zd(t),FD(this))}}function Er(e){return Ze(e)?e.value:e}const dG={get:(e,t,r)=>Er(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const i=e[t];return Ze(i)&&!Ze(r)?(i.value=r,!0):Reflect.set(e,t,r,n)}};function BD(e){return hs(e)?e:new Proxy(e,dG)}function cS(e){const t=zt(e)?new Array(e.length):{};for(const r in e)t[r]=Rg(e,r);return t}class pG{constructor(t,r,n){this._object=t,this._key=r,this._defaultValue=n,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function Rg(e,t,r){const n=e[t];return Ze(n)?n:new pG(e,t,r)}class vG{constructor(t,r,n,i){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new pk(t,()=>{this._dirty||(this._dirty=!0,FD(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const t=de(this);return ND(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function gG(e,t,r=!1){let n,i;const o=Ht(e);return o?(n=e,i=Di):(n=e.get,i=e.set),new vG(n,i,o||!i,r)}function wa(e,t,r,n){let i;try{i=n?e(...n):e()}catch(o){N1(o,t,r)}return i}function Ni(e,t,r,n){if(Ht(e)){const o=wa(e,t,r,n);return o&&yD(o)&&o.catch(s=>{N1(s,t,r)}),o}const i=[];for(let o=0;o<e.length;o++)i.push(Ni(e[o],t,r,n));return i}function N1(e,t,r,n=!0){const i=t?t.vnode:null;if(t){let o=t.parent;const s=t.proxy,a=r;for(;o;){const u=o.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](e,s,a)===!1)return}o=o.parent}const l=t.appContext.config.errorHandler;if(l){wa(l,null,10,[e,s,a]);return}}mG(e,r,i,n)}function mG(e,t,r,n=!0){console.error(e)}let wm=!1,fS=!1;const xn=[];let ss=0;const _d=[];let nd=null,Sc=0;const yd=[];let aa=null,Tc=0;const $D=Promise.resolve();let bk=null,hS=null;function nu(e){const t=bk||$D;return e?t.then(this?e.bind(this):e):t}function _G(e){let t=ss+1,r=xn.length;for(;t<r;){const n=t+r>>>1;Kd(xn[n])<e?t=n+1:r=n}return t}function VD(e){(!xn.length||!xn.includes(e,wm&&e.allowRecurse?ss+1:ss))&&e!==hS&&(e.id==null?xn.push(e):xn.splice(_G(e.id),0,e),UD())}function UD(){!wm&&!fS&&(fS=!0,bk=$D.then(GD))}function yG(e){const t=xn.indexOf(e);t>ss&&xn.splice(t,1)}function WD(e,t,r,n){zt(e)?r.push(...e):(!t||!t.includes(e,e.allowRecurse?n+1:n))&&r.push(e),UD()}function bG(e){WD(e,nd,_d,Sc)}function wG(e){WD(e,aa,yd,Tc)}function F1(e,t=null){if(_d.length){for(hS=t,nd=[...new Set(_d)],_d.length=0,Sc=0;Sc<nd.length;Sc++)nd[Sc]();nd=null,Sc=0,hS=null,F1(e,t)}}function jD(e){if(F1(),yd.length){const t=[...new Set(yd)];if(yd.length=0,aa){aa.push(...t);return}for(aa=t,aa.sort((r,n)=>Kd(r)-Kd(n)),Tc=0;Tc<aa.length;Tc++)aa[Tc]();aa=null,Tc=0}}const Kd=e=>e.id==null?1/0:e.id;function GD(e){fS=!1,wm=!0,F1(e),xn.sort((r,n)=>Kd(r)-Kd(n));const t=Di;try{for(ss=0;ss<xn.length;ss++){const r=xn[ss];r&&r.active!==!1&&wa(r,null,14)}}finally{ss=0,xn.length=0,jD(),wm=!1,bk=null,(xn.length||_d.length||yd.length)&&GD(e)}}function SG(e,t,...r){if(e.isUnmounted)return;const n=e.vnode.props||Ie;let i=r;const o=t.startsWith("update:"),s=o&&t.slice(7);if(s&&s in n){const c=`${s==="modelValue"?"model":s}Modifiers`,{number:f,trim:h}=n[c]||Ie;h&&(i=r.map(d=>d.trim())),f&&(i=r.map(bm))}let a,l=n[a=Sy(t)]||n[a=Sy(Lo(t))];!l&&o&&(l=n[a=Sy(bf(t))]),l&&Ni(l,e,6,i);const u=n[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Ni(u,e,6,i)}}function HD(e,t,r=!1){const n=t.emitsCache,i=n.get(e);if(i!==void 0)return i;const o=e.emits;let s={},a=!1;if(!Ht(e)){const l=u=>{const c=HD(u,t,!0);c&&(a=!0,sn(s,c))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!o&&!a?(n.set(e,null),null):(zt(o)?o.forEach(l=>s[l]=null):sn(s,o),n.set(e,s),s)}function z1(e,t){return!e||!L1(t)?!1:(t=t.slice(2).replace(/Once$/,""),fe(e,t[0].toLowerCase()+t.slice(1))||fe(e,bf(t))||fe(e,t))}let Gr=null,B1=null;function Sm(e){const t=Gr;return Gr=e,B1=e&&e.type.__scopeId||null,t}function Ve(e){B1=e}function Ue(){B1=null}function we(e,t=Gr,r){if(!t||e._n)return e;const n=(...i)=>{n._d&&sA(-1);const o=Sm(t),s=e(...i);return Sm(o),n._d&&sA(1),s};return n._n=!0,n._c=!0,n._d=!0,n}function Ty(e){const{type:t,vnode:r,proxy:n,withProxy:i,props:o,propsOptions:[s],slots:a,attrs:l,emit:u,render:c,renderCache:f,data:h,setupState:d,ctx:p,inheritAttrs:v}=e;let m,g;const _=Sm(e);try{if(r.shapeFlag&4){const w=i||n;m=bo(c.call(w,w,f,o,d,h,p)),g=l}else{const w=t;m=bo(w.length>1?w(o,{attrs:l,slots:a,emit:u}):w(o,null)),g=t.props?l:TG(l)}}catch(w){wd.length=0,N1(w,e,1),m=bt(Aa)}let b=m;if(g&&v!==!1){const w=Object.keys(g),{shapeFlag:T}=b;w.length&&T&7&&(s&&w.some(ck)&&(g=kG(g,s)),b=ef(b,g))}return r.dirs&&(b=ef(b),b.dirs=b.dirs?b.dirs.concat(r.dirs):r.dirs),r.transition&&(b.transition=r.transition),m=b,Sm(_),m}const TG=e=>{let t;for(const r in e)(r==="class"||r==="style"||L1(r))&&((t||(t={}))[r]=e[r]);return t},kG=(e,t)=>{const r={};for(const n in e)(!ck(n)||!(n.slice(9)in t))&&(r[n]=e[n]);return r};function PG(e,t,r){const{props:n,children:i,component:o}=e,{props:s,children:a,patchFlag:l}=t,u=o.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?ZC(n,s,u):!!s;if(l&8){const c=t.dynamicProps;for(let f=0;f<c.length;f++){const h=c[f];if(s[h]!==n[h]&&!z1(u,h))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:n===s?!1:n?s?ZC(n,s,u):!0:!!s;return!1}function ZC(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const o=n[i];if(t[o]!==e[o]&&!z1(r,o))return!0}return!1}function EG({vnode:e,parent:t},r){for(;t&&t.subTree===e;)(e=t.vnode).el=r,t=t.parent}const CG=e=>e.__isSuspense;function AG(e,t){t&&t.pendingBranch?zt(e)?t.effects.push(...e):t.effects.push(e):wG(e)}function Dg(e,t){if(vr){let r=vr.provides;const n=vr.parent&&vr.parent.provides;n===r&&(r=vr.provides=Object.create(n)),r[e]=t}}function In(e,t,r=!1){const n=vr||Gr;if(n){const i=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return r&&Ht(t)?t.call(n.proxy):t}}function KC(e,t){return wk(e,null,t)}const JC={};function ko(e,t,r){return wk(e,t,r)}function wk(e,t,{immediate:r,deep:n,flush:i,onTrack:o,onTrigger:s}=Ie){const a=vr;let l,u=!1,c=!1;if(Ze(e)?(l=()=>e.value,u=uS(e)):hs(e)?(l=()=>e,n=!0):zt(e)?(c=!0,u=e.some(g=>hs(g)||uS(g)),l=()=>e.map(g=>{if(Ze(g))return g.value;if(hs(g))return Fl(g);if(Ht(g))return wa(g,a,2)})):Ht(e)?t?l=()=>wa(e,a,2):l=()=>{if(!(a&&a.isUnmounted))return f&&f(),Ni(e,a,3,[h])}:l=Di,t&&n){const g=l;l=()=>Fl(g())}let f,h=g=>{f=m.onStop=()=>{wa(g,a,4)}};if(Qd)return h=Di,t?r&&Ni(t,a,3,[l(),c?[]:void 0,h]):l(),Di;let d=c?[]:JC;const p=()=>{if(!!m.active)if(t){const g=m.run();(n||u||(c?g.some((_,b)=>Yd(_,d[b])):Yd(g,d)))&&(f&&f(),Ni(t,a,3,[g,d===JC?void 0:d,h]),d=g)}else m.run()};p.allowRecurse=!!t;let v;i==="sync"?v=p:i==="post"?v=()=>dn(p,a&&a.suspense):v=()=>bG(p);const m=new pk(l,v);return t?r?p():d=m.run():i==="post"?dn(m.run.bind(m),a&&a.suspense):m.run(),()=>{m.stop(),a&&a.scope&&fk(a.scope.effects,m)}}function MG(e,t,r){const n=this.proxy,i=mr(e)?e.includes(".")?XD(n,e):()=>n[e]:e.bind(n,n);let o;Ht(t)?o=t:(o=t.handler,r=t);const s=vr;rf(this);const a=wk(i,o.bind(n),r);return s?rf(s):Hl(),a}function XD(e,t){const r=t.split(".");return()=>{let n=e;for(let i=0;i<r.length&&n;i++)n=n[r[i]];return n}}function Fl(e,t){if(!nr(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),Ze(e))Fl(e.value,t);else if(zt(e))for(let r=0;r<e.length;r++)Fl(e[r],t);else if(yf(e)||Uc(e))e.forEach(r=>{Fl(r,t)});else if(wD(e))for(const r in e)Fl(e[r],t);return e}function Sk(e){return Ht(e)?{setup:e,name:e.name}:e}const bd=e=>!!e.type.__asyncLoader,YD=e=>e.type.__isKeepAlive;function xG(e,t){qD(e,"a",t)}function LG(e,t){qD(e,"da",t)}function qD(e,t,r=vr){const n=e.__wdc||(e.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if($1(t,n,r),r){let i=r.parent;for(;i&&i.parent;)YD(i.parent.vnode)&&IG(n,t,r,i),i=i.parent}}function IG(e,t,r,n){const i=$1(t,e,n,!0);V1(()=>{fk(n[t],i)},r)}function $1(e,t,r=vr,n=!1){if(r){const i=r[e]||(r[e]=[]),o=t.__weh||(t.__weh=(...s)=>{if(r.isUnmounted)return;wf(),rf(r);const a=Ni(t,r,e,s);return Hl(),Sf(),a});return n?i.unshift(o):i.push(o),o}}const Es=e=>(t,r=vr)=>(!Qd||e==="sp")&&$1(e,t,r),OG=Es("bm"),ZD=Es("m"),RG=Es("bu"),DG=Es("u"),NG=Es("bum"),V1=Es("um"),FG=Es("sp"),zG=Es("rtg"),BG=Es("rtc");function $G(e,t=vr){$1("ec",e,t)}function ot(e,t){const r=Gr;if(r===null)return e;const n=j1(r)||r.proxy,i=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[s,a,l,u=Ie]=t[o];Ht(s)&&(s={mounted:s,updated:s}),s.deep&&Fl(a),i.push({dir:s,instance:n,value:a,oldValue:void 0,arg:l,modifiers:u})}return e}function Qa(e,t,r,n){const i=e.dirs,o=t&&t.dirs;for(let s=0;s<i.length;s++){const a=i[s];o&&(a.oldValue=o[s].value);let l=a.dir[n];l&&(wf(),Ni(l,r,8,[e.el,a,e,t]),Sf())}}const KD="components";function Ut(e,t){return UG(KD,e,!0,t)||e}const VG=Symbol();function UG(e,t,r=!0,n=!1){const i=Gr||vr;if(i){const o=i.type;if(e===KD){const a=_H(o,!1);if(a&&(a===t||a===Lo(t)||a===O1(Lo(t))))return o}const s=QC(i[e]||o[e],t)||QC(i.appContext[e],t);return!s&&n?o:s}}function QC(e,t){return e&&(e[t]||e[Lo(t)]||e[O1(Lo(t))])}function wt(e,t,r,n){let i;const o=r&&r[n];if(zt(e)||mr(e)){i=new Array(e.length);for(let s=0,a=e.length;s<a;s++)i[s]=t(e[s],s,void 0,o&&o[s])}else if(typeof e=="number"){i=new Array(e);for(let s=0;s<e;s++)i[s]=t(s+1,s,void 0,o&&o[s])}else if(nr(e))if(e[Symbol.iterator])i=Array.from(e,(s,a)=>t(s,a,void 0,o&&o[a]));else{const s=Object.keys(e);i=new Array(s.length);for(let a=0,l=s.length;a<l;a++){const u=s[a];i[a]=t(e[u],u,a,o&&o[a])}}else i=[];return r&&(r[n]=i),i}function WG(e,t,r={},n,i){if(Gr.isCE||Gr.parent&&bd(Gr.parent)&&Gr.parent.isCE)return bt("slot",t==="default"?null:{name:t},n&&n());let o=e[t];o&&o._c&&(o._d=!1),M();const s=o&&JD(o(r)),a=li(j,{key:r.key||`_${t}`},s||(n?n():[]),s&&e._===1?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),o&&o._c&&(o._d=!0),a}function JD(e){return e.some(t=>Pm(t)?!(t.type===Aa||t.type===j&&!JD(t.children)):!0)?e:null}const dS=e=>e?c9(e)?j1(e)||e.proxy:dS(e.parent):null,Tm=sn(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>dS(e.parent),$root:e=>dS(e.root),$emit:e=>e.emit,$options:e=>t9(e),$forceUpdate:e=>e.f||(e.f=()=>VD(e.update)),$nextTick:e=>e.n||(e.n=nu.bind(e.proxy)),$watch:e=>MG.bind(e)}),jG={get({_:e},t){const{ctx:r,setupState:n,data:i,props:o,accessCache:s,type:a,appContext:l}=e;let u;if(t[0]!=="$"){const d=s[t];if(d!==void 0)switch(d){case 1:return n[t];case 2:return i[t];case 4:return r[t];case 3:return o[t]}else{if(n!==Ie&&fe(n,t))return s[t]=1,n[t];if(i!==Ie&&fe(i,t))return s[t]=2,i[t];if((u=e.propsOptions[0])&&fe(u,t))return s[t]=3,o[t];if(r!==Ie&&fe(r,t))return s[t]=4,r[t];pS&&(s[t]=0)}}const c=Tm[t];let f,h;if(c)return t==="$attrs"&&Dn(e,"get",t),c(e);if((f=a.__cssModules)&&(f=f[t]))return f;if(r!==Ie&&fe(r,t))return s[t]=4,r[t];if(h=l.config.globalProperties,fe(h,t))return h[t]},set({_:e},t,r){const{data:n,setupState:i,ctx:o}=e;return i!==Ie&&fe(i,t)?(i[t]=r,!0):n!==Ie&&fe(n,t)?(n[t]=r,!0):fe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:n,appContext:i,propsOptions:o}},s){let a;return!!r[s]||e!==Ie&&fe(e,s)||t!==Ie&&fe(t,s)||(a=o[0])&&fe(a,s)||fe(n,s)||fe(Tm,s)||fe(i.config.globalProperties,s)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:fe(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};let pS=!0;function GG(e){const t=t9(e),r=e.proxy,n=e.ctx;pS=!1,t.beforeCreate&&tA(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:s,watch:a,provide:l,inject:u,created:c,beforeMount:f,mounted:h,beforeUpdate:d,updated:p,activated:v,deactivated:m,beforeDestroy:g,beforeUnmount:_,destroyed:b,unmounted:w,render:T,renderTracked:S,renderTriggered:k,errorCaptured:A,serverPrefetch:C,expose:x,inheritAttrs:I,components:N,directives:B,filters:V}=t;if(u&&HG(u,n,null,e.appContext.config.unwrapInjectedRef),s)for(const Z in s){const q=s[Z];Ht(q)&&(n[Z]=q.bind(r))}if(i){const Z=i.call(r,r);nr(Z)&&(e.data=Tf(Z))}if(pS=!0,o)for(const Z in o){const q=o[Z],et=Ht(q)?q.bind(r,r):Ht(q.get)?q.get.bind(r,r):Di,At=!Ht(q)&&Ht(q.set)?q.set.bind(r):Di,Dt=Xe({get:et,set:At});Object.defineProperty(n,Z,{enumerable:!0,configurable:!0,get:()=>Dt.value,set:Pt=>Dt.value=Pt})}if(a)for(const Z in a)QD(a[Z],n,r,Z);if(l){const Z=Ht(l)?l.call(r):l;Reflect.ownKeys(Z).forEach(q=>{Dg(q,Z[q])})}c&&tA(c,e,"c");function G(Z,q){zt(q)?q.forEach(et=>Z(et.bind(r))):q&&Z(q.bind(r))}if(G(OG,f),G(ZD,h),G(RG,d),G(DG,p),G(xG,v),G(LG,m),G($G,A),G(BG,S),G(zG,k),G(NG,_),G(V1,w),G(FG,C),zt(x))if(x.length){const Z=e.exposed||(e.exposed={});x.forEach(q=>{Object.defineProperty(Z,q,{get:()=>r[q],set:et=>r[q]=et})})}else e.exposed||(e.exposed={});T&&e.render===Di&&(e.render=T),I!=null&&(e.inheritAttrs=I),N&&(e.components=N),B&&(e.directives=B)}function HG(e,t,r=Di,n=!1){zt(e)&&(e=vS(e));for(const i in e){const o=e[i];let s;nr(o)?"default"in o?s=In(o.from||i,o.default,!0):s=In(o.from||i):s=In(o),Ze(s)&&n?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):t[i]=s}}function tA(e,t,r){Ni(zt(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,r)}function QD(e,t,r,n){const i=n.includes(".")?XD(r,n):()=>r[n];if(mr(e)){const o=t[e];Ht(o)&&ko(i,o)}else if(Ht(e))ko(i,e.bind(r));else if(nr(e))if(zt(e))e.forEach(o=>QD(o,t,r,n));else{const o=Ht(e.handler)?e.handler.bind(r):t[e.handler];Ht(o)&&ko(i,o,e)}}function t9(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:s}}=e.appContext,a=o.get(t);let l;return a?l=a:!i.length&&!r&&!n?l=t:(l={},i.length&&i.forEach(u=>km(l,u,s,!0)),km(l,t,s)),o.set(t,l),l}function km(e,t,r,n=!1){const{mixins:i,extends:o}=t;o&&km(e,o,r,!0),i&&i.forEach(s=>km(e,s,r,!0));for(const s in t)if(!(n&&s==="expose")){const a=XG[s]||r&&r[s];e[s]=a?a(e[s],t[s]):t[s]}return e}const XG={data:eA,props:Ml,emits:Ml,methods:Ml,computed:Ml,beforeCreate:Qr,created:Qr,beforeMount:Qr,mounted:Qr,beforeUpdate:Qr,updated:Qr,beforeDestroy:Qr,beforeUnmount:Qr,destroyed:Qr,unmounted:Qr,activated:Qr,deactivated:Qr,errorCaptured:Qr,serverPrefetch:Qr,components:Ml,directives:Ml,watch:qG,provide:eA,inject:YG};function eA(e,t){return t?e?function(){return sn(Ht(e)?e.call(this,this):e,Ht(t)?t.call(this,this):t)}:t:e}function YG(e,t){return Ml(vS(e),vS(t))}function vS(e){if(zt(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function Qr(e,t){return e?[...new Set([].concat(e,t))]:t}function Ml(e,t){return e?sn(sn(Object.create(null),e),t):t}function qG(e,t){if(!e)return t;if(!t)return e;const r=sn(Object.create(null),e);for(const n in t)r[n]=Qr(e[n],t[n]);return r}function ZG(e,t,r,n=!1){const i={},o={};ym(o,U1,1),e.propsDefaults=Object.create(null),e9(e,t,i,o);for(const s in e.propsOptions[0])s in i||(i[s]=void 0);r?e.props=n?i:fG(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function KG(e,t,r,n){const{props:i,attrs:o,vnode:{patchFlag:s}}=e,a=de(i),[l]=e.propsOptions;let u=!1;if((n||s>0)&&!(s&16)){if(s&8){const c=e.vnode.dynamicProps;for(let f=0;f<c.length;f++){let h=c[f];if(z1(e.emitsOptions,h))continue;const d=t[h];if(l)if(fe(o,h))d!==o[h]&&(o[h]=d,u=!0);else{const p=Lo(h);i[p]=gS(l,a,p,d,e,!1)}else d!==o[h]&&(o[h]=d,u=!0)}}}else{e9(e,t,i,o)&&(u=!0);let c;for(const f in a)(!t||!fe(t,f)&&((c=bf(f))===f||!fe(t,c)))&&(l?r&&(r[f]!==void 0||r[c]!==void 0)&&(i[f]=gS(l,a,f,void 0,e,!0)):delete i[f]);if(o!==a)for(const f in o)(!t||!fe(t,f)&&!0)&&(delete o[f],u=!0)}u&&gs(e,"set","$attrs")}function e9(e,t,r,n){const[i,o]=e.propsOptions;let s=!1,a;if(t)for(let l in t){if(Lg(l))continue;const u=t[l];let c;i&&fe(i,c=Lo(l))?!o||!o.includes(c)?r[c]=u:(a||(a={}))[c]=u:z1(e.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,s=!0)}if(o){const l=de(r),u=a||Ie;for(let c=0;c<o.length;c++){const f=o[c];r[f]=gS(i,l,f,u[f],e,!fe(u,f))}}return s}function gS(e,t,r,n,i,o){const s=e[r];if(s!=null){const a=fe(s,"default");if(a&&n===void 0){const l=s.default;if(s.type!==Function&&Ht(l)){const{propsDefaults:u}=i;r in u?n=u[r]:(rf(i),n=u[r]=l.call(null,t),Hl())}else n=l}s[0]&&(o&&!a?n=!1:s[1]&&(n===""||n===bf(r))&&(n=!0))}return n}function r9(e,t,r=!1){const n=t.propsCache,i=n.get(e);if(i)return i;const o=e.props,s={},a=[];let l=!1;if(!Ht(e)){const c=f=>{l=!0;const[h,d]=r9(f,t,!0);sn(s,h),d&&a.push(...d)};!r&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!o&&!l)return n.set(e,Vc),Vc;if(zt(o))for(let c=0;c<o.length;c++){const f=Lo(o[c]);rA(f)&&(s[f]=Ie)}else if(o)for(const c in o){const f=Lo(c);if(rA(f)){const h=o[c],d=s[f]=zt(h)||Ht(h)?{type:h}:h;if(d){const p=oA(Boolean,d.type),v=oA(String,d.type);d[0]=p>-1,d[1]=v<0||p<v,(p>-1||fe(d,"default"))&&a.push(f)}}}const u=[s,a];return n.set(e,u),u}function rA(e){return e[0]!=="$"}function nA(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function iA(e,t){return nA(e)===nA(t)}function oA(e,t){return zt(t)?t.findIndex(r=>iA(r,e)):Ht(t)&&iA(t,e)?0:-1}const n9=e=>e[0]==="_"||e==="$stable",Tk=e=>zt(e)?e.map(bo):[bo(e)],JG=(e,t,r)=>{if(t._n)return t;const n=we((...i)=>Tk(t(...i)),r);return n._c=!1,n},i9=(e,t,r)=>{const n=e._ctx;for(const i in e){if(n9(i))continue;const o=e[i];if(Ht(o))t[i]=JG(i,o,n);else if(o!=null){const s=Tk(o);t[i]=()=>s}}},o9=(e,t)=>{const r=Tk(t);e.slots.default=()=>r},QG=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=de(t),ym(t,"_",r)):i9(t,e.slots={})}else e.slots={},t&&o9(e,t);ym(e.slots,U1,1)},tH=(e,t,r)=>{const{vnode:n,slots:i}=e;let o=!0,s=Ie;if(n.shapeFlag&32){const a=t._;a?r&&a===1?o=!1:(sn(i,t),!r&&a===1&&delete i._):(o=!t.$stable,i9(t,i)),s=t}else t&&(o9(e,t),s={default:1});if(o)for(const a in i)!n9(a)&&!(a in s)&&delete i[a]};function s9(){return{app:null,config:{isNativeTag:Ij,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let eH=0;function rH(e,t){return function(n,i=null){Ht(n)||(n=Object.assign({},n)),i!=null&&!nr(i)&&(i=null);const o=s9(),s=new Set;let a=!1;const l=o.app={_uid:eH++,_component:n,_props:i,_container:null,_context:o,_instance:null,version:bH,get config(){return o.config},set config(u){},use(u,...c){return s.has(u)||(u&&Ht(u.install)?(s.add(u),u.install(l,...c)):Ht(u)&&(s.add(u),u(l,...c))),l},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),l},component(u,c){return c?(o.components[u]=c,l):o.components[u]},directive(u,c){return c?(o.directives[u]=c,l):o.directives[u]},mount(u,c,f){if(!a){const h=bt(n,i);return h.appContext=o,c&&t?t(h,u):e(h,u,f),a=!0,l._container=u,u.__vue_app__=l,j1(h.component)||h.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(u,c){return o.provides[u]=c,l}};return l}}function mS(e,t,r,n,i=!1){if(zt(e)){e.forEach((h,d)=>mS(h,t&&(zt(t)?t[d]:t),r,n,i));return}if(bd(n)&&!i)return;const o=n.shapeFlag&4?j1(n.component)||n.component.proxy:n.el,s=i?null:o,{i:a,r:l}=e,u=t&&t.r,c=a.refs===Ie?a.refs={}:a.refs,f=a.setupState;if(u!=null&&u!==l&&(mr(u)?(c[u]=null,fe(f,u)&&(f[u]=null)):Ze(u)&&(u.value=null)),Ht(l))wa(l,a,12,[s,c]);else{const h=mr(l),d=Ze(l);if(h||d){const p=()=>{if(e.f){const v=h?c[l]:l.value;i?zt(v)&&fk(v,o):zt(v)?v.includes(o)||v.push(o):h?(c[l]=[o],fe(f,l)&&(f[l]=c[l])):(l.value=[o],e.k&&(c[e.k]=l.value))}else h?(c[l]=s,fe(f,l)&&(f[l]=s)):d&&(l.value=s,e.k&&(c[e.k]=s))};s?(p.id=-1,dn(p,r)):p()}}}const dn=AG;function nH(e){return iH(e)}function iH(e,t){const r=zj();r.__VUE__=!0;const{insert:n,remove:i,patchProp:o,createElement:s,createText:a,createComment:l,setText:u,setElementText:c,parentNode:f,nextSibling:h,setScopeId:d=Di,cloneNode:p,insertStaticContent:v}=e,m=($,W,X,J=null,tt=null,ft=null,mt=!1,lt=null,st=!!W.dynamicChildren)=>{if($===W)return;$&&!ih($,W)&&(J=gt($),Et($,tt,ft,!0),$=null),W.patchFlag===-2&&(st=!1,W.dynamicChildren=null);const{type:nt,ref:Nt,shapeFlag:It}=W;switch(nt){case kk:g($,W,X,J);break;case Aa:_($,W,X,J);break;case Ng:$==null&&b(W,X,J,mt);break;case j:B($,W,X,J,tt,ft,mt,lt,st);break;default:It&1?S($,W,X,J,tt,ft,mt,lt,st):It&6?V($,W,X,J,tt,ft,mt,lt,st):(It&64||It&128)&&nt.process($,W,X,J,tt,ft,mt,lt,st,xt)}Nt!=null&&tt&&mS(Nt,$&&$.ref,ft,W||$,!W)},g=($,W,X,J)=>{if($==null)n(W.el=a(W.children),X,J);else{const tt=W.el=$.el;W.children!==$.children&&u(tt,W.children)}},_=($,W,X,J)=>{$==null?n(W.el=l(W.children||""),X,J):W.el=$.el},b=($,W,X,J)=>{[$.el,$.anchor]=v($.children,W,X,J,$.el,$.anchor)},w=({el:$,anchor:W},X,J)=>{let tt;for(;$&&$!==W;)tt=h($),n($,X,J),$=tt;n(W,X,J)},T=({el:$,anchor:W})=>{let X;for(;$&&$!==W;)X=h($),i($),$=X;i(W)},S=($,W,X,J,tt,ft,mt,lt,st)=>{mt=mt||W.type==="svg",$==null?k(W,X,J,tt,ft,mt,lt,st):x($,W,tt,ft,mt,lt,st)},k=($,W,X,J,tt,ft,mt,lt)=>{let st,nt;const{type:Nt,props:It,shapeFlag:Ft,transition:Bt,patchFlag:te,dirs:me}=$;if($.el&&p!==void 0&&te===-1)st=$.el=p($.el);else{if(st=$.el=s($.type,ft,It&&It.is,It),Ft&8?c(st,$.children):Ft&16&&C($.children,st,null,J,tt,ft&&Nt!=="foreignObject",mt,lt),me&&Qa($,null,J,"created"),It){for(const Pe in It)Pe!=="value"&&!Lg(Pe)&&o(st,Pe,null,It[Pe],ft,$.children,J,tt,K);"value"in It&&o(st,"value",null,It.value),(nt=It.onVnodeBeforeMount)&&eo(nt,J,$)}A(st,$,$.scopeId,mt,J)}me&&Qa($,null,J,"beforeMount");const _e=(!tt||tt&&!tt.pendingBranch)&&Bt&&!Bt.persisted;_e&&Bt.beforeEnter(st),n(st,W,X),((nt=It&&It.onVnodeMounted)||_e||me)&&dn(()=>{nt&&eo(nt,J,$),_e&&Bt.enter(st),me&&Qa($,null,J,"mounted")},tt)},A=($,W,X,J,tt)=>{if(X&&d($,X),J)for(let ft=0;ft<J.length;ft++)d($,J[ft]);if(tt){let ft=tt.subTree;if(W===ft){const mt=tt.vnode;A($,mt,mt.scopeId,mt.slotScopeIds,tt.parent)}}},C=($,W,X,J,tt,ft,mt,lt,st=0)=>{for(let nt=st;nt<$.length;nt++){const Nt=$[nt]=lt?ca($[nt]):bo($[nt]);m(null,Nt,W,X,J,tt,ft,mt,lt)}},x=($,W,X,J,tt,ft,mt)=>{const lt=W.el=$.el;let{patchFlag:st,dynamicChildren:nt,dirs:Nt}=W;st|=$.patchFlag&16;const It=$.props||Ie,Ft=W.props||Ie;let Bt;X&&tl(X,!1),(Bt=Ft.onVnodeBeforeUpdate)&&eo(Bt,X,W,$),Nt&&Qa(W,$,X,"beforeUpdate"),X&&tl(X,!0);const te=tt&&W.type!=="foreignObject";if(nt?I($.dynamicChildren,nt,lt,X,J,te,ft):mt||et($,W,lt,null,X,J,te,ft,!1),st>0){if(st&16)N(lt,W,It,Ft,X,J,tt);else if(st&2&&It.class!==Ft.class&&o(lt,"class",null,Ft.class,tt),st&4&&o(lt,"style",It.style,Ft.style,tt),st&8){const me=W.dynamicProps;for(let _e=0;_e<me.length;_e++){const Pe=me[_e],Dr=It[Pe],Ji=Ft[Pe];(Ji!==Dr||Pe==="value")&&o(lt,Pe,Dr,Ji,tt,$.children,X,J,K)}}st&1&&$.children!==W.children&&c(lt,W.children)}else!mt&&nt==null&&N(lt,W,It,Ft,X,J,tt);((Bt=Ft.onVnodeUpdated)||Nt)&&dn(()=>{Bt&&eo(Bt,X,W,$),Nt&&Qa(W,$,X,"updated")},J)},I=($,W,X,J,tt,ft,mt)=>{for(let lt=0;lt<W.length;lt++){const st=$[lt],nt=W[lt],Nt=st.el&&(st.type===j||!ih(st,nt)||st.shapeFlag&70)?f(st.el):X;m(st,nt,Nt,null,J,tt,ft,mt,!0)}},N=($,W,X,J,tt,ft,mt)=>{if(X!==J){for(const lt in J){if(Lg(lt))continue;const st=J[lt],nt=X[lt];st!==nt&&lt!=="value"&&o($,lt,nt,st,mt,W.children,tt,ft,K)}if(X!==Ie)for(const lt in X)!Lg(lt)&&!(lt in J)&&o($,lt,X[lt],null,mt,W.children,tt,ft,K);"value"in J&&o($,"value",X.value,J.value)}},B=($,W,X,J,tt,ft,mt,lt,st)=>{const nt=W.el=$?$.el:a(""),Nt=W.anchor=$?$.anchor:a("");let{patchFlag:It,dynamicChildren:Ft,slotScopeIds:Bt}=W;Bt&&(lt=lt?lt.concat(Bt):Bt),$==null?(n(nt,X,J),n(Nt,X,J),C(W.children,X,Nt,tt,ft,mt,lt,st)):It>0&&It&64&&Ft&&$.dynamicChildren?(I($.dynamicChildren,Ft,X,tt,ft,mt,lt),(W.key!=null||tt&&W===tt.subTree)&&a9($,W,!0)):et($,W,X,Nt,tt,ft,mt,lt,st)},V=($,W,X,J,tt,ft,mt,lt,st)=>{W.slotScopeIds=lt,$==null?W.shapeFlag&512?tt.ctx.activate(W,X,J,mt,st):F(W,X,J,tt,ft,mt,st):G($,W,st)},F=($,W,X,J,tt,ft,mt)=>{const lt=$.component=dH($,J,tt);if(YD($)&&(lt.ctx.renderer=xt),pH(lt),lt.asyncDep){if(tt&&tt.registerDep(lt,Z),!$.el){const st=lt.subTree=bt(Aa);_(null,st,W,X)}return}Z(lt,$,W,X,tt,ft,mt)},G=($,W,X)=>{const J=W.component=$.component;if(PG($,W,X))if(J.asyncDep&&!J.asyncResolved){q(J,W,X);return}else J.next=W,yG(J.update),J.update();else W.el=$.el,J.vnode=W},Z=($,W,X,J,tt,ft,mt)=>{const lt=()=>{if($.isMounted){let{next:Nt,bu:It,u:Ft,parent:Bt,vnode:te}=$,me=Nt,_e;tl($,!1),Nt?(Nt.el=te.el,q($,Nt,mt)):Nt=te,It&&Ig(It),(_e=Nt.props&&Nt.props.onVnodeBeforeUpdate)&&eo(_e,Bt,Nt,te),tl($,!0);const Pe=Ty($),Dr=$.subTree;$.subTree=Pe,m(Dr,Pe,f(Dr.el),gt(Dr),$,tt,ft),Nt.el=Pe.el,me===null&&EG($,Pe.el),Ft&&dn(Ft,tt),(_e=Nt.props&&Nt.props.onVnodeUpdated)&&dn(()=>eo(_e,Bt,Nt,te),tt)}else{let Nt;const{el:It,props:Ft}=W,{bm:Bt,m:te,parent:me}=$,_e=bd(W);if(tl($,!1),Bt&&Ig(Bt),!_e&&(Nt=Ft&&Ft.onVnodeBeforeMount)&&eo(Nt,me,W),tl($,!0),It&&dt){const Pe=()=>{$.subTree=Ty($),dt(It,$.subTree,$,tt,null)};_e?W.type.__asyncLoader().then(()=>!$.isUnmounted&&Pe()):Pe()}else{const Pe=$.subTree=Ty($);m(null,Pe,X,J,$,tt,ft),W.el=Pe.el}if(te&&dn(te,tt),!_e&&(Nt=Ft&&Ft.onVnodeMounted)){const Pe=W;dn(()=>eo(Nt,me,Pe),tt)}(W.shapeFlag&256||me&&bd(me.vnode)&&me.vnode.shapeFlag&256)&&$.a&&dn($.a,tt),$.isMounted=!0,W=X=J=null}},st=$.effect=new pk(lt,()=>VD(nt),$.scope),nt=$.update=()=>st.run();nt.id=$.uid,tl($,!0),nt()},q=($,W,X)=>{W.component=$;const J=$.vnode.props;$.vnode=W,$.next=null,KG($,W.props,J,X),tH($,W.children,X),wf(),F1(void 0,$.update),Sf()},et=($,W,X,J,tt,ft,mt,lt,st=!1)=>{const nt=$&&$.children,Nt=$?$.shapeFlag:0,It=W.children,{patchFlag:Ft,shapeFlag:Bt}=W;if(Ft>0){if(Ft&128){Dt(nt,It,X,J,tt,ft,mt,lt,st);return}else if(Ft&256){At(nt,It,X,J,tt,ft,mt,lt,st);return}}Bt&8?(Nt&16&&K(nt,tt,ft),It!==nt&&c(X,It)):Nt&16?Bt&16?Dt(nt,It,X,J,tt,ft,mt,lt,st):K(nt,tt,ft,!0):(Nt&8&&c(X,""),Bt&16&&C(It,X,J,tt,ft,mt,lt,st))},At=($,W,X,J,tt,ft,mt,lt,st)=>{$=$||Vc,W=W||Vc;const nt=$.length,Nt=W.length,It=Math.min(nt,Nt);let Ft;for(Ft=0;Ft<It;Ft++){const Bt=W[Ft]=st?ca(W[Ft]):bo(W[Ft]);m($[Ft],Bt,X,null,tt,ft,mt,lt,st)}nt>Nt?K($,tt,ft,!0,!1,It):C(W,X,J,tt,ft,mt,lt,st,It)},Dt=($,W,X,J,tt,ft,mt,lt,st)=>{let nt=0;const Nt=W.length;let It=$.length-1,Ft=Nt-1;for(;nt<=It&&nt<=Ft;){const Bt=$[nt],te=W[nt]=st?ca(W[nt]):bo(W[nt]);if(ih(Bt,te))m(Bt,te,X,null,tt,ft,mt,lt,st);else break;nt++}for(;nt<=It&&nt<=Ft;){const Bt=$[It],te=W[Ft]=st?ca(W[Ft]):bo(W[Ft]);if(ih(Bt,te))m(Bt,te,X,null,tt,ft,mt,lt,st);else break;It--,Ft--}if(nt>It){if(nt<=Ft){const Bt=Ft+1,te=Bt<Nt?W[Bt].el:J;for(;nt<=Ft;)m(null,W[nt]=st?ca(W[nt]):bo(W[nt]),X,te,tt,ft,mt,lt,st),nt++}}else if(nt>Ft)for(;nt<=It;)Et($[nt],tt,ft,!0),nt++;else{const Bt=nt,te=nt,me=new Map;for(nt=te;nt<=Ft;nt++){const Kr=W[nt]=st?ca(W[nt]):bo(W[nt]);Kr.key!=null&&me.set(Kr.key,nt)}let _e,Pe=0;const Dr=Ft-te+1;let Ji=!1,d0=0;const Za=new Array(Dr);for(nt=0;nt<Dr;nt++)Za[nt]=0;for(nt=Bt;nt<=It;nt++){const Kr=$[nt];if(Pe>=Dr){Et(Kr,tt,ft,!0);continue}let $n;if(Kr.key!=null)$n=me.get(Kr.key);else for(_e=te;_e<=Ft;_e++)if(Za[_e-te]===0&&ih(Kr,W[_e])){$n=_e;break}$n===void 0?Et(Kr,tt,ft,!0):(Za[$n-te]=nt+1,$n>=d0?d0=$n:Ji=!0,m(Kr,W[$n],X,null,tt,ft,mt,lt,st),Pe++)}const p0=Ji?oH(Za):Vc;for(_e=p0.length-1,nt=Dr-1;nt>=0;nt--){const Kr=te+nt,$n=W[Kr],Ka=Kr+1<Nt?W[Kr+1].el:J;Za[nt]===0?m(null,$n,X,Ka,tt,ft,mt,lt,st):Ji&&(_e<0||nt!==p0[_e]?Pt($n,X,Ka,2):_e--)}}},Pt=($,W,X,J,tt=null)=>{const{el:ft,type:mt,transition:lt,children:st,shapeFlag:nt}=$;if(nt&6){Pt($.component.subTree,W,X,J);return}if(nt&128){$.suspense.move(W,X,J);return}if(nt&64){mt.move($,W,X,xt);return}if(mt===j){n(ft,W,X);for(let It=0;It<st.length;It++)Pt(st[It],W,X,J);n($.anchor,W,X);return}if(mt===Ng){w($,W,X);return}if(J!==2&&nt&1&&lt)if(J===0)lt.beforeEnter(ft),n(ft,W,X),dn(()=>lt.enter(ft),tt);else{const{leave:It,delayLeave:Ft,afterLeave:Bt}=lt,te=()=>n(ft,W,X),me=()=>{It(ft,()=>{te(),Bt&&Bt()})};Ft?Ft(ft,te,me):me()}else n(ft,W,X)},Et=($,W,X,J=!1,tt=!1)=>{const{type:ft,props:mt,ref:lt,children:st,dynamicChildren:nt,shapeFlag:Nt,patchFlag:It,dirs:Ft}=$;if(lt!=null&&mS(lt,null,X,$,!0),Nt&256){W.ctx.deactivate($);return}const Bt=Nt&1&&Ft,te=!bd($);let me;if(te&&(me=mt&&mt.onVnodeBeforeUnmount)&&eo(me,W,$),Nt&6)it($.component,X,J);else{if(Nt&128){$.suspense.unmount(X,J);return}Bt&&Qa($,null,W,"beforeUnmount"),Nt&64?$.type.remove($,W,X,tt,xt,J):nt&&(ft!==j||It>0&&It&64)?K(nt,W,X,!1,!0):(ft===j&&It&384||!tt&&Nt&16)&&K(st,W,X),J&&qt($)}(te&&(me=mt&&mt.onVnodeUnmounted)||Bt)&&dn(()=>{me&&eo(me,W,$),Bt&&Qa($,null,W,"unmounted")},X)},qt=$=>{const{type:W,el:X,anchor:J,transition:tt}=$;if(W===j){Y(X,J);return}if(W===Ng){T($);return}const ft=()=>{i(X),tt&&!tt.persisted&&tt.afterLeave&&tt.afterLeave()};if($.shapeFlag&1&&tt&&!tt.persisted){const{leave:mt,delayLeave:lt}=tt,st=()=>mt(X,ft);lt?lt($.el,ft,st):st()}else ft()},Y=($,W)=>{let X;for(;$!==W;)X=h($),i($),$=X;i(W)},it=($,W,X)=>{const{bum:J,scope:tt,update:ft,subTree:mt,um:lt}=$;J&&Ig(J),tt.stop(),ft&&(ft.active=!1,Et(mt,$,W,X)),lt&&dn(lt,W),dn(()=>{$.isUnmounted=!0},W),W&&W.pendingBranch&&!W.isUnmounted&&$.asyncDep&&!$.asyncResolved&&$.suspenseId===W.pendingId&&(W.deps--,W.deps===0&&W.resolve())},K=($,W,X,J=!1,tt=!1,ft=0)=>{for(let mt=ft;mt<$.length;mt++)Et($[mt],W,X,J,tt)},gt=$=>$.shapeFlag&6?gt($.component.subTree):$.shapeFlag&128?$.suspense.next():h($.anchor||$.el),Ct=($,W,X)=>{$==null?W._vnode&&Et(W._vnode,null,null,!0):m(W._vnode||null,$,W,null,null,null,X),jD(),W._vnode=$},xt={p:m,um:Et,m:Pt,r:qt,mt:F,mc:C,pc:et,pbc:I,n:gt,o:e};let ct,dt;return t&&([ct,dt]=t(xt)),{render:Ct,hydrate:ct,createApp:rH(Ct,ct)}}function tl({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function a9(e,t,r=!1){const n=e.children,i=t.children;if(zt(n)&&zt(i))for(let o=0;o<n.length;o++){const s=n[o];let a=i[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[o]=ca(i[o]),a.el=s.el),r||a9(s,a))}}function oH(e){const t=e.slice(),r=[0];let n,i,o,s,a;const l=e.length;for(n=0;n<l;n++){const u=e[n];if(u!==0){if(i=r[r.length-1],e[i]<u){t[n]=i,r.push(n);continue}for(o=0,s=r.length-1;o<s;)a=o+s>>1,e[r[a]]<u?o=a+1:s=a;u<e[r[o]]&&(o>0&&(t[n]=r[o-1]),r[o]=n)}}for(o=r.length,s=r[o-1];o-- >0;)r[o]=s,s=t[s];return r}const sH=e=>e.__isTeleport,j=Symbol(void 0),kk=Symbol(void 0),Aa=Symbol(void 0),Ng=Symbol(void 0),wd=[];let Mi=null;function M(e=!1){wd.push(Mi=e?null:[])}function aH(){wd.pop(),Mi=wd[wd.length-1]||null}let Jd=1;function sA(e){Jd+=e}function l9(e){return e.dynamicChildren=Jd>0?Mi||Vc:null,aH(),Jd>0&&Mi&&Mi.push(e),e}function L(e,t,r,n,i,o){return l9(y(e,t,r,n,i,o,!0))}function li(e,t,r,n,i){return l9(bt(e,t,r,n,i,!0))}function Pm(e){return e?e.__v_isVNode===!0:!1}function ih(e,t){return e.type===t.type&&e.key===t.key}const U1="__vInternal",u9=({key:e})=>e!=null?e:null,Fg=({ref:e,ref_key:t,ref_for:r})=>e!=null?mr(e)||Ze(e)||Ht(e)?{i:Gr,r:e,k:t,f:!!r}:e:null;function y(e,t=null,r=null,n=0,i=null,o=e===j?0:1,s=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&u9(t),ref:t&&Fg(t),scopeId:B1,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null};return a?(Pk(l,r),o&128&&e.normalize(l)):r&&(l.shapeFlag|=mr(r)?8:16),Jd>0&&!s&&Mi&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&Mi.push(l),l}const bt=lH;function lH(e,t=null,r=null,n=0,i=null,o=!1){if((!e||e===VG)&&(e=Aa),Pm(e)){const a=ef(e,t,!0);return r&&Pk(a,r),Jd>0&&!o&&Mi&&(a.shapeFlag&6?Mi[Mi.indexOf(e)]=a:Mi.push(a)),a.patchFlag|=-2,a}if(yH(e)&&(e=e.__vccOpts),t){t=uH(t);let{class:a,style:l}=t;a&&!mr(a)&&(t.class=gr(a)),nr(l)&&(DD(l)&&!zt(l)&&(l=sn({},l)),t.style=jl(l))}const s=mr(e)?1:CG(e)?128:sH(e)?64:nr(e)?4:Ht(e)?2:0;return y(e,t,r,n,i,s,o,!0)}function uH(e){return e?DD(e)||U1 in e?sn({},e):e:null}function ef(e,t,r=!1){const{props:n,ref:i,patchFlag:o,children:s}=e,a=t?cH(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&u9(a),ref:t&&t.ref?r&&i?zt(i)?i.concat(Fg(t)):[i,Fg(t)]:Fg(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==j?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ef(e.ssContent),ssFallback:e.ssFallback&&ef(e.ssFallback),el:e.el,anchor:e.anchor}}function R(e=" ",t=0){return bt(kk,null,e,t)}function W1(e,t){const r=bt(Ng,null,e);return r.staticCount=t,r}function Q(e="",t=!1){return t?(M(),li(Aa,null,e)):bt(Aa,null,e)}function bo(e){return e==null||typeof e=="boolean"?bt(Aa):zt(e)?bt(j,null,e.slice()):typeof e=="object"?ca(e):bt(kk,null,String(e))}function ca(e){return e.el===null||e.memo?e:ef(e)}function Pk(e,t){let r=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(zt(t))r=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),Pk(e,i()),i._c&&(i._d=!0));return}else{r=32;const i=t._;!i&&!(U1 in t)?t._ctx=Gr:i===3&&Gr&&(Gr.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ht(t)?(t={default:t,_ctx:Gr},r=32):(t=String(t),n&64?(r=16,t=[R(t)]):r=8);e.children=t,e.shapeFlag|=r}function cH(...e){const t={};for(let r=0;r<e.length;r++){const n=e[r];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=gr([t.class,n.class]));else if(i==="style")t.style=jl([t.style,n.style]);else if(L1(i)){const o=t[i],s=n[i];s&&o!==s&&!(zt(o)&&o.includes(s))&&(t[i]=o?[].concat(o,s):s)}else i!==""&&(t[i]=n[i])}return t}function eo(e,t,r,n=null){Ni(e,t,7,[r,n])}const fH=s9();let hH=0;function dH(e,t,r){const n=e.type,i=(t?t.appContext:e.appContext)||fH,o={uid:hH++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new SD(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:r9(n,i),emitsOptions:HD(n,i),emit:null,emitted:null,propsDefaults:Ie,inheritAttrs:n.inheritAttrs,ctx:Ie,data:Ie,props:Ie,attrs:Ie,slots:Ie,refs:Ie,setupState:Ie,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=SG.bind(null,o),e.ce&&e.ce(o),o}let vr=null;const Ek=()=>vr||Gr,rf=e=>{vr=e,e.scope.on()},Hl=()=>{vr&&vr.scope.off(),vr=null};function c9(e){return e.vnode.shapeFlag&4}let Qd=!1;function pH(e,t=!1){Qd=t;const{props:r,children:n}=e.vnode,i=c9(e);ZG(e,r,i,t),QG(e,n);const o=i?vH(e,t):void 0;return Qd=!1,o}function vH(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=Ei(new Proxy(e.ctx,jG));const{setup:n}=r;if(n){const i=e.setupContext=n.length>1?mH(e):null;rf(e),wf();const o=wa(n,e,0,[e.props,i]);if(Sf(),Hl(),yD(o)){if(o.then(Hl,Hl),t)return o.then(s=>{aA(e,s,t)}).catch(s=>{N1(s,e,0)});e.asyncDep=o}else aA(e,o,t)}else f9(e,t)}function aA(e,t,r){Ht(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:nr(t)&&(e.setupState=BD(t)),f9(e,r)}let lA;function f9(e,t,r){const n=e.type;if(!e.render){if(!t&&lA&&!n.render){const i=n.template;if(i){const{isCustomElement:o,compilerOptions:s}=e.appContext.config,{delimiters:a,compilerOptions:l}=n,u=sn(sn({isCustomElement:o,delimiters:a},s),l);n.render=lA(i,u)}}e.render=n.render||Di}rf(e),wf(),GG(e),Sf(),Hl()}function gH(e){return new Proxy(e.attrs,{get(t,r){return Dn(e,"get","$attrs"),t[r]}})}function mH(e){const t=n=>{e.exposed=n||{}};let r;return{get attrs(){return r||(r=gH(e))},slots:e.slots,emit:e.emit,expose:t}}function j1(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(BD(Ei(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in Tm)return Tm[r](e)}}))}function _H(e,t=!0){return Ht(e)?e.displayName||e.name:e.name||t&&e.__name}function yH(e){return Ht(e)&&"__vccOpts"in e}const Xe=(e,t)=>gG(e,t,Qd);function Ck(e,t,r){const n=arguments.length;return n===2?nr(t)&&!zt(t)?Pm(t)?bt(e,null,[t]):bt(e,t):bt(e,null,t):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&Pm(r)&&(r=[r]),bt(e,t,r))}const bH="3.2.37",wH="http://www.w3.org/2000/svg",Rl=typeof document<"u"?document:null,uA=Rl&&Rl.createElement("template"),SH={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const i=t?Rl.createElementNS(wH,e):Rl.createElement(e,r?{is:r}:void 0);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>Rl.createTextNode(e),createComment:e=>Rl.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Rl.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,r,n,i,o){const s=r?r.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),r),!(i===o||!(i=i.nextSibling)););else{uA.innerHTML=n?`<svg>${e}</svg>`:e;const a=uA.content;if(n){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,r)}return[s?s.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}};function TH(e,t,r){const n=e._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}function kH(e,t,r){const n=e.style,i=mr(r);if(r&&!i){for(const o in r)_S(n,o,r[o]);if(t&&!mr(t))for(const o in t)r[o]==null&&_S(n,o,"")}else{const o=n.display;i?t!==r&&(n.cssText=r):t&&e.removeAttribute("style"),"_vod"in e&&(n.display=o)}}const cA=/\s*!important$/;function _S(e,t,r){if(zt(r))r.forEach(n=>_S(e,t,n));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const n=PH(e,t);cA.test(r)?e.setProperty(bf(n),r.replace(cA,""),"important"):e[n]=r}}const fA=["Webkit","Moz","ms"],ky={};function PH(e,t){const r=ky[t];if(r)return r;let n=Lo(t);if(n!=="filter"&&n in e)return ky[t]=n;n=O1(n);for(let i=0;i<fA.length;i++){const o=fA[i]+n;if(o in e)return ky[t]=o}return t}const hA="http://www.w3.org/1999/xlink";function EH(e,t,r,n,i){if(n&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(hA,t.slice(6,t.length)):e.setAttributeNS(hA,t,r);else{const o=Cj(t);r==null||o&&!mD(r)?e.removeAttribute(t):e.setAttribute(t,o?"":r)}}function CH(e,t,r,n,i,o,s){if(t==="innerHTML"||t==="textContent"){n&&s(n,i,o),e[t]=r==null?"":r;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=r;const l=r==null?"":r;(e.value!==l||e.tagName==="OPTION")&&(e.value=l),r==null&&e.removeAttribute(t);return}let a=!1;if(r===""||r==null){const l=typeof e[t];l==="boolean"?r=mD(r):r==null&&l==="string"?(r="",a=!0):l==="number"&&(r=0,a=!0)}try{e[t]=r}catch{}a&&e.removeAttribute(t)}const[h9,AH]=(()=>{let e=Date.now,t=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const r=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(r&&Number(r[1])<=53)}return[e,t]})();let yS=0;const MH=Promise.resolve(),xH=()=>{yS=0},LH=()=>yS||(MH.then(xH),yS=h9());function as(e,t,r,n){e.addEventListener(t,r,n)}function IH(e,t,r,n){e.removeEventListener(t,r,n)}function OH(e,t,r,n,i=null){const o=e._vei||(e._vei={}),s=o[t];if(n&&s)s.value=n;else{const[a,l]=RH(t);if(n){const u=o[t]=DH(n,i);as(e,a,u,l)}else s&&(IH(e,a,s,l),o[t]=void 0)}}const dA=/(?:Once|Passive|Capture)$/;function RH(e){let t;if(dA.test(e)){t={};let r;for(;r=e.match(dA);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[bf(e.slice(2)),t]}function DH(e,t){const r=n=>{const i=n.timeStamp||h9();(AH||i>=r.attached-1)&&Ni(NH(n,r.value),t,5,[n])};return r.value=e,r.attached=LH(),r}function NH(e,t){if(zt(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const pA=/^on[a-z]/,FH=(e,t,r,n,i=!1,o,s,a,l)=>{t==="class"?TH(e,n,i):t==="style"?kH(e,r,n):L1(t)?ck(t)||OH(e,t,r,n,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):zH(e,t,n,i))?CH(e,t,n,o,s,a,l):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),EH(e,t,n,i))};function zH(e,t,r,n){return n?!!(t==="innerHTML"||t==="textContent"||t in e&&pA.test(t)&&Ht(r)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||pA.test(t)&&mr(r)?!1:t in e}const Ma=e=>{const t=e.props["onUpdate:modelValue"]||!1;return zt(t)?r=>Ig(t,r):t};function BH(e){e.target.composing=!0}function vA(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Gt={created(e,{modifiers:{lazy:t,trim:r,number:n}},i){e._assign=Ma(i);const o=n||i.props&&i.props.type==="number";as(e,t?"change":"input",s=>{if(s.target.composing)return;let a=e.value;r&&(a=a.trim()),o&&(a=bm(a)),e._assign(a)}),r&&as(e,"change",()=>{e.value=e.value.trim()}),t||(as(e,"compositionstart",BH),as(e,"compositionend",vA),as(e,"change",vA))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:r,trim:n,number:i}},o){if(e._assign=Ma(o),e.composing||document.activeElement===e&&e.type!=="range"&&(r||n&&e.value.trim()===t||(i||e.type==="number")&&bm(e.value)===t))return;const s=t==null?"":t;e.value!==s&&(e.value=s)}},Ke={deep:!0,created(e,t,r){e._assign=Ma(r),as(e,"change",()=>{const n=e._modelValue,i=nf(e),o=e.checked,s=e._assign;if(zt(n)){const a=uk(n,i),l=a!==-1;if(o&&!l)s(n.concat(i));else if(!o&&l){const u=[...n];u.splice(a,1),s(u)}}else if(yf(n)){const a=new Set(n);o?a.add(i):a.delete(i),s(a)}else s(d9(e,o))})},mounted:gA,beforeUpdate(e,t,r){e._assign=Ma(r),gA(e,t,r)}};function gA(e,{value:t,oldValue:r},n){e._modelValue=t,zt(t)?e.checked=uk(t,n.props.value)>-1:yf(t)?e.checked=t.has(n.props.value):t!==r&&(e.checked=ru(t,d9(e,!0)))}const Sd={created(e,{value:t},r){e.checked=ru(t,r.props.value),e._assign=Ma(r),as(e,"change",()=>{e._assign(nf(e))})},beforeUpdate(e,{value:t,oldValue:r},n){e._assign=Ma(n),t!==r&&(e.checked=ru(t,n.props.value))}},qe={deep:!0,created(e,{value:t,modifiers:{number:r}},n){const i=yf(t);as(e,"change",()=>{const o=Array.prototype.filter.call(e.options,s=>s.selected).map(s=>r?bm(nf(s)):nf(s));e._assign(e.multiple?i?new Set(o):o:o[0])}),e._assign=Ma(n)},mounted(e,{value:t}){mA(e,t)},beforeUpdate(e,t,r){e._assign=Ma(r)},updated(e,{value:t}){mA(e,t)}};function mA(e,t){const r=e.multiple;if(!(r&&!zt(t)&&!yf(t))){for(let n=0,i=e.options.length;n<i;n++){const o=e.options[n],s=nf(o);if(r)zt(t)?o.selected=uk(t,s)>-1:o.selected=t.has(s);else if(ru(nf(o),t)){e.selectedIndex!==n&&(e.selectedIndex=n);return}}!r&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function nf(e){return"_value"in e?e._value:e.value}function d9(e,t){const r=t?"_trueValue":"_falseValue";return r in e?e[r]:t}const $H=["ctrl","shift","alt","meta"],VH={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>$H.some(r=>e[`${r}Key`]&&!t.includes(r))},tp=(e,t)=>(r,...n)=>{for(let i=0;i<t.length;i++){const o=VH[t[i]];if(o&&o(r,t))return}return e(r,...n)},UH={beforeMount(e,{value:t},{transition:r}){e._vod=e.style.display==="none"?"":e.style.display,r&&t?r.beforeEnter(e):oh(e,t)},mounted(e,{value:t},{transition:r}){r&&t&&r.enter(e)},updated(e,{value:t,oldValue:r},{transition:n}){!t!=!r&&(n?t?(n.beforeEnter(e),oh(e,!0),n.enter(e)):n.leave(e,()=>{oh(e,!1)}):oh(e,t))},beforeUnmount(e,{value:t}){oh(e,t)}};function oh(e,t){e.style.display=t?e._vod:"none"}const WH=sn({patchProp:FH},SH);let _A;function jH(){return _A||(_A=nH(WH))}const GH=(...e)=>{const t=jH().createApp(...e),{mount:r}=t;return t.mount=n=>{const i=HH(n);if(!i)return;const o=t._component;!Ht(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.innerHTML="";const s=r(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),s},t};function HH(e){return mr(e)?document.querySelector(e):e}var XH=!1;function E0(e,t,r){return Array.isArray(e)?(e.length=Math.max(e.length,t),e.splice(t,1,r),r):(e[t]=r,r)}function Py(e,t){if(Array.isArray(e)){e.splice(t,1);return}delete e[t]}function YH(){return p9().__VUE_DEVTOOLS_GLOBAL_HOOK__}function p9(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const qH=typeof Proxy=="function",ZH="devtools-plugin:setup",KH="plugin:settings:set";let Uu,bS;function JH(){var e;return Uu!==void 0||(typeof window<"u"&&window.performance?(Uu=!0,bS=window.performance):typeof global<"u"&&((e=global.perf_hooks)===null||e===void 0?void 0:e.performance)?(Uu=!0,bS=global.perf_hooks.performance):Uu=!1),Uu}function QH(){return JH()?bS.now():Date.now()}class tX{constructor(t,r){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=r;const n={};if(t.settings)for(const s in t.settings){const a=t.settings[s];n[s]=a.defaultValue}const i=`__vue-devtools-plugin-settings__${t.id}`;let o=Object.assign({},n);try{const s=localStorage.getItem(i),a=JSON.parse(s);Object.assign(o,a)}catch{}this.fallbacks={getSettings(){return o},setSettings(s){try{localStorage.setItem(i,JSON.stringify(s))}catch{}o=s},now(){return QH()}},r&&r.on(KH,(s,a)=>{s===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(s,a)=>this.target?this.target.on[a]:(...l)=>{this.onQueue.push({method:a,args:l})}}),this.proxiedTarget=new Proxy({},{get:(s,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...l)=>(this.targetQueue.push({method:a,args:l,resolve:()=>{}}),this.fallbacks[a](...l)):(...l)=>new Promise(u=>{this.targetQueue.push({method:a,args:l,resolve:u})})})}async setRealTarget(t){this.target=t;for(const r of this.onQueue)this.target.on[r.method](...r.args);for(const r of this.targetQueue)r.resolve(await this.target[r.method](...r.args))}}function v9(e,t){const r=e,n=p9(),i=YH(),o=qH&&r.enableEarlyProxy;if(i&&(n.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!o))i.emit(ZH,e,t);else{const s=o?new tX(r,i):null;(n.__VUE_DEVTOOLS_PLUGINS__=n.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:r,setupFn:t,proxy:s}),s&&t(s.proxiedTarget)}}/*!
  * pinia v2.0.18
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let wS;const ep=e=>wS=e,g9=Symbol("pinia");function iu(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Ao;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Ao||(Ao={}));const ha=typeof window<"u",yA=(()=>typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:typeof globalThis=="object"?globalThis:{HTMLElement:null})();function eX(e,{autoBom:t=!1}={}){return t&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}function Ak(e,t,r){const n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){y9(n.response,t,r)},n.onerror=function(){console.error("could not download file")},n.send()}function m9(e){const t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function zg(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{const r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(r)}}const Bg=typeof navigator=="object"?navigator:{userAgent:""},_9=(()=>/Macintosh/.test(Bg.userAgent)&&/AppleWebKit/.test(Bg.userAgent)&&!/Safari/.test(Bg.userAgent))(),y9=ha?typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype&&!_9?rX:"msSaveOrOpenBlob"in Bg?nX:iX:()=>{};function rX(e,t="download",r){const n=document.createElement("a");n.download=t,n.rel="noopener",typeof e=="string"?(n.href=e,n.origin!==location.origin?m9(n.href)?Ak(e,t,r):(n.target="_blank",zg(n)):zg(n)):(n.href=URL.createObjectURL(e),setTimeout(function(){URL.revokeObjectURL(n.href)},4e4),setTimeout(function(){zg(n)},0))}function nX(e,t="download",r){if(typeof e=="string")if(m9(e))Ak(e,t,r);else{const n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){zg(n)})}else navigator.msSaveOrOpenBlob(eX(e,r),t)}function iX(e,t,r,n){if(n=n||open("","_blank"),n&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return Ak(e,t,r);const i=e.type==="application/octet-stream",o=/constructor/i.test(String(yA.HTMLElement))||"safari"in yA,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&o||_9)&&typeof FileReader<"u"){const a=new FileReader;a.onloadend=function(){let l=a.result;if(typeof l!="string")throw n=null,new Error("Wrong reader.result type");l=s?l:l.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=l:location.assign(l),n=null},a.readAsDataURL(e)}else{const a=URL.createObjectURL(e);n?n.location.assign(a):location.href=a,n=null,setTimeout(function(){URL.revokeObjectURL(a)},4e4)}}function dr(e,t){const r="\u{1F34D} "+e;typeof __VUE_DEVTOOLS_TOAST__=="function"?__VUE_DEVTOOLS_TOAST__(r,t):t==="error"?console.error(r):t==="warn"?console.warn(r):console.log(r)}function Mk(e){return"_a"in e&&"install"in e}function b9(){if(!("clipboard"in navigator))return dr("Your browser doesn't support the Clipboard API","error"),!0}function w9(e){return e instanceof Error&&e.message.toLowerCase().includes("document is not focused")?(dr('You need to activate the "Emulate a focused page" setting in the "Rendering" panel of devtools.',"warn"),!0):!1}async function oX(e){if(!b9())try{await navigator.clipboard.writeText(JSON.stringify(e.state.value)),dr("Global state copied to clipboard.")}catch(t){if(w9(t))return;dr("Failed to serialize the state. Check the console for more details.","error"),console.error(t)}}async function sX(e){if(!b9())try{e.state.value=JSON.parse(await navigator.clipboard.readText()),dr("Global state pasted from clipboard.")}catch(t){if(w9(t))return;dr("Failed to deserialize the state from clipboard. Check the console for more details.","error"),console.error(t)}}async function aX(e){try{y9(new Blob([JSON.stringify(e.state.value)],{type:"text/plain;charset=utf-8"}),"pinia-state.json")}catch(t){dr("Failed to export the state as JSON. Check the console for more details.","error"),console.error(t)}}let Go;function lX(){Go||(Go=document.createElement("input"),Go.type="file",Go.accept=".json");function e(){return new Promise((t,r)=>{Go.onchange=async()=>{const n=Go.files;if(!n)return t(null);const i=n.item(0);return t(i?{text:await i.text(),file:i}:null)},Go.oncancel=()=>t(null),Go.onerror=r,Go.click()})}return e}async function uX(e){try{const r=await(await lX())();if(!r)return;const{text:n,file:i}=r;e.state.value=JSON.parse(n),dr(`Global state imported from "${i.name}".`)}catch(t){dr("Failed to export the state as JSON. Check the console for more details.","error"),console.error(t)}}function Si(e){return{_custom:{display:e}}}const S9="\u{1F34D} Pinia (root)",SS="_root";function cX(e){return Mk(e)?{id:SS,label:S9}:{id:e.$id,label:e.$id}}function fX(e){if(Mk(e)){const r=Array.from(e._s.keys()),n=e._s;return{state:r.map(o=>({editable:!0,key:o,value:e.state.value[o]})),getters:r.filter(o=>n.get(o)._getters).map(o=>{const s=n.get(o);return{editable:!1,key:o,value:s._getters.reduce((a,l)=>(a[l]=s[l],a),{})}})}}const t={state:Object.keys(e.$state).map(r=>({editable:!0,key:r,value:e.$state[r]}))};return e._getters&&e._getters.length&&(t.getters=e._getters.map(r=>({editable:!1,key:r,value:e[r]}))),e._customProperties.size&&(t.customProperties=Array.from(e._customProperties).map(r=>({editable:!0,key:r,value:e[r]}))),t}function hX(e){return e?Array.isArray(e)?e.reduce((t,r)=>(t.keys.push(r.key),t.operations.push(r.type),t.oldValue[r.key]=r.oldValue,t.newValue[r.key]=r.newValue,t),{oldValue:{},keys:[],operations:[],newValue:{}}):{operation:Si(e.type),key:Si(e.key),oldValue:e.oldValue,newValue:e.newValue}:{}}function dX(e){switch(e){case Ao.direct:return"mutation";case Ao.patchFunction:return"$patch";case Ao.patchObject:return"$patch";default:return"unknown"}}let Mc=!0;const $g=[],xl="pinia:mutations",Br="pinia",Em=e=>"\u{1F34D} "+e;function pX(e,t){v9({id:"dev.esm.pinia",label:"Pinia \u{1F34D}",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:$g,app:e},r=>{typeof r.now!="function"&&dr("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),r.addTimelineLayer({id:xl,label:"Pinia \u{1F34D}",color:15064968}),r.addInspector({id:Br,label:"Pinia \u{1F34D}",icon:"storage",treeFilterPlaceholder:"Search stores",actions:[{icon:"content_copy",action:()=>{oX(t)},tooltip:"Serialize and copy the state"},{icon:"content_paste",action:async()=>{await sX(t),r.sendInspectorTree(Br),r.sendInspectorState(Br)},tooltip:"Replace the state with the content of your clipboard"},{icon:"save",action:()=>{aX(t)},tooltip:"Save the state as a JSON file"},{icon:"folder_open",action:async()=>{await uX(t),r.sendInspectorTree(Br),r.sendInspectorState(Br)},tooltip:"Import the state from a JSON file"}],nodeActions:[{icon:"restore",tooltip:"Reset the state (option store only)",action:n=>{const i=t._s.get(n);i?i._isOptionsAPI?(i.$reset(),dr(`Store "${n}" reset.`)):dr(`Cannot reset "${n}" store because it's a setup store.`,"warn"):dr(`Cannot reset "${n}" store because it wasn't found.`,"warn")}}]}),r.on.inspectComponent((n,i)=>{const o=n.componentInstance&&n.componentInstance.proxy;if(o&&o._pStores){const s=n.componentInstance.proxy._pStores;Object.values(s).forEach(a=>{n.instanceData.state.push({type:Em(a.$id),key:"state",editable:!0,value:a._isOptionsAPI?{_custom:{value:de(a.$state),actions:[{icon:"restore",tooltip:"Reset the state of this store",action:()=>a.$reset()}]}}:Object.keys(a.$state).reduce((l,u)=>(l[u]=a.$state[u],l),{})}),a._getters&&a._getters.length&&n.instanceData.state.push({type:Em(a.$id),key:"getters",editable:!1,value:a._getters.reduce((l,u)=>{try{l[u]=a[u]}catch(c){l[u]=c}return l},{})})})}}),r.on.getInspectorTree(n=>{if(n.app===e&&n.inspectorId===Br){let i=[t];i=i.concat(Array.from(t._s.values())),n.rootNodes=(n.filter?i.filter(o=>"$id"in o?o.$id.toLowerCase().includes(n.filter.toLowerCase()):S9.toLowerCase().includes(n.filter.toLowerCase())):i).map(cX)}}),r.on.getInspectorState(n=>{if(n.app===e&&n.inspectorId===Br){const i=n.nodeId===SS?t:t._s.get(n.nodeId);if(!i)return;i&&(n.state=fX(i))}}),r.on.editInspectorState((n,i)=>{if(n.app===e&&n.inspectorId===Br){const o=n.nodeId===SS?t:t._s.get(n.nodeId);if(!o)return dr(`store "${n.nodeId}" not found`,"error");const{path:s}=n;Mk(o)?s.unshift("state"):(s.length!==1||!o._customProperties.has(s[0])||s[0]in o.$state)&&s.unshift("$state"),Mc=!1,n.set(o,s,n.state.value),Mc=!0}}),r.on.editComponentState(n=>{if(n.type.startsWith("\u{1F34D}")){const i=n.type.replace(/^\s*/,""),o=t._s.get(i);if(!o)return dr(`store "${i}" not found`,"error");const{path:s}=n;if(s[0]!=="state")return dr(`Invalid path for store "${i}":
${s}
Only state can be modified.`);s[0]="$state",Mc=!1,n.set(o,s,n.state.value),Mc=!0}})})}function vX(e,t){$g.includes(Em(t.$id))||$g.push(Em(t.$id)),v9({id:"dev.esm.pinia",label:"Pinia \u{1F34D}",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:$g,app:e,settings:{logStoreChanges:{label:"Notify about new/deleted stores",type:"boolean",defaultValue:!0}}},r=>{const n=typeof r.now=="function"?r.now.bind(r):Date.now;t.$onAction(({after:s,onError:a,name:l,args:u})=>{const c=T9++;r.addTimelineEvent({layerId:xl,event:{time:n(),title:"\u{1F6EB} "+l,subtitle:"start",data:{store:Si(t.$id),action:Si(l),args:u},groupId:c}}),s(f=>{Dl=void 0,r.addTimelineEvent({layerId:xl,event:{time:n(),title:"\u{1F6EC} "+l,subtitle:"end",data:{store:Si(t.$id),action:Si(l),args:u,result:f},groupId:c}})}),a(f=>{Dl=void 0,r.addTimelineEvent({layerId:xl,event:{time:n(),logType:"error",title:"\u{1F4A5} "+l,subtitle:"end",data:{store:Si(t.$id),action:Si(l),args:u,error:f},groupId:c}})})},!0),t._customProperties.forEach(s=>{ko(()=>Er(t[s]),(a,l)=>{r.notifyComponentUpdate(),r.sendInspectorState(Br),Mc&&r.addTimelineEvent({layerId:xl,event:{time:n(),title:"Change",subtitle:s,data:{newValue:a,oldValue:l},groupId:Dl}})},{deep:!0})}),t.$subscribe(({events:s,type:a},l)=>{if(r.notifyComponentUpdate(),r.sendInspectorState(Br),!Mc)return;const u={time:n(),title:dX(a),data:{store:Si(t.$id),...hX(s)},groupId:Dl};Dl=void 0,a===Ao.patchFunction?u.subtitle="\u2935\uFE0F":a===Ao.patchObject?u.subtitle="\u{1F9E9}":s&&!Array.isArray(s)&&(u.subtitle=s.type),s&&(u.data["rawEvent(s)"]={_custom:{display:"DebuggerEvent",type:"object",tooltip:"raw DebuggerEvent[]",value:s}}),r.addTimelineEvent({layerId:xl,event:u})},{detached:!0,flush:"sync"});const i=t._hotUpdate;t._hotUpdate=Ei(s=>{i(s),r.addTimelineEvent({layerId:xl,event:{time:n(),title:"\u{1F525} "+t.$id,subtitle:"HMR update",data:{store:Si(t.$id),info:Si("HMR update")}}}),r.notifyComponentUpdate(),r.sendInspectorTree(Br),r.sendInspectorState(Br)});const{$dispose:o}=t;t.$dispose=()=>{o(),r.notifyComponentUpdate(),r.sendInspectorTree(Br),r.sendInspectorState(Br),r.getSettings().logStoreChanges&&dr(`Disposed "${t.$id}" store \u{1F5D1}`)},r.notifyComponentUpdate(),r.sendInspectorTree(Br),r.sendInspectorState(Br),r.getSettings().logStoreChanges&&dr(`"${t.$id}" store installed \u{1F195}`)})}let T9=0,Dl;function bA(e,t){const r=t.reduce((n,i)=>(n[i]=de(e)[i],n),{});for(const n in r)e[n]=function(){const i=T9,o=new Proxy(e,{get(...s){return Dl=i,Reflect.get(...s)},set(...s){return Dl=i,Reflect.set(...s)}});return r[n].apply(o,arguments)}}function gX({app:e,store:t,options:r}){if(!t.$id.startsWith("__hot:")){if(r.state&&(t._isOptionsAPI=!0),typeof r.state=="function"){bA(t,Object.keys(r.actions));const n=t._hotUpdate;de(t)._hotUpdate=function(i){n.apply(this,arguments),bA(t,Object.keys(i._hmrPayload.actions))}}vX(e,t)}}function mX(){const e=TD(!0),t=e.run(()=>D1({}));let r=[],n=[];const i=Ei({install(o){ep(i),i._a=o,o.provide(g9,i),o.config.globalProperties.$pinia=i,ha&&pX(o,i),n.forEach(s=>r.push(s)),n=[]},use(o){return!this._a&&!XH?n.push(o):r.push(o),this},_p:r,_a:null,_e:e,_s:new Map,state:t});return ha&&!0&&typeof Proxy<"u"&&i.use(gX),i}function k9(e,t){for(const r in t){const n=t[r];if(!(r in e))continue;const i=e[r];iu(i)&&iu(n)&&!Ze(n)&&!hs(n)?e[r]=k9(i,n):e[r]=n}return e}const _X=()=>{};function wA(e,t,r,n=_X){e.push(t);const i=()=>{const o=e.indexOf(t);o>-1&&(e.splice(o,1),n())};return!r&&Ek()&&V1(i),i}function Wu(e,...t){e.slice().forEach(r=>{r(...t)})}function TS(e,t){for(const r in t){if(!t.hasOwnProperty(r))continue;const n=t[r],i=e[r];iu(i)&&iu(n)&&e.hasOwnProperty(r)&&!Ze(n)&&!hs(n)?e[r]=TS(i,n):e[r]=n}return e}const yX=Symbol("pinia:skipHydration");function bX(e){return!iu(e)||!e.hasOwnProperty(yX)}const{assign:Pi}=Object;function SA(e){return!!(Ze(e)&&e.effect)}function TA(e,t,r,n){const{state:i,actions:o,getters:s}=t,a=r.state.value[e];let l;function u(){!a&&!n&&(r.state.value[e]=i?i():{});const c=cS(n?D1(i?i():{}).value:r.state.value[e]);return Pi(c,o,Object.keys(s||{}).reduce((f,h)=>(h in c&&console.warn(`[\u{1F34D}]: A getter cannot have the same name as another state property. Rename one of them. Found with "${h}" in store "${e}".`),f[h]=Ei(Xe(()=>{ep(r);const d=r._s.get(e);return s[h].call(d,d)})),f),{}))}return l=kS(e,u,t,r,n,!0),l.$reset=function(){const f=i?i():{};this.$patch(h=>{Pi(h,f)})},l}function kS(e,t,r={},n,i,o){let s;const a=Pi({actions:{}},r);if(!n._e.active)throw new Error("Pinia destroyed");const l={deep:!0};l.onTrigger=C=>{u?d=C:u==!1&&!k._hotUpdating&&(Array.isArray(d)?d.push(C):console.error("\u{1F34D} debuggerEvents should be an array. This is most likely an internal Pinia bug."))};let u,c,f=Ei([]),h=Ei([]),d;const p=n.state.value[e];!o&&!p&&!i&&(n.state.value[e]={});const v=D1({});let m;function g(C){let x;u=c=!1,d=[],typeof C=="function"?(C(n.state.value[e]),x={type:Ao.patchFunction,storeId:e,events:d}):(TS(n.state.value[e],C),x={type:Ao.patchObject,payload:C,storeId:e,events:d});const I=m=Symbol();nu().then(()=>{m===I&&(u=!0)}),c=!0,Wu(f,x,n.state.value[e])}const _=()=>{throw new Error(`\u{1F34D}: Store "${e}" is built using the setup syntax and does not implement $reset().`)};function b(){s.stop(),f=[],h=[],n._s.delete(e)}function w(C,x){return function(){ep(n);const I=Array.from(arguments),N=[],B=[];function V(Z){N.push(Z)}function F(Z){B.push(Z)}Wu(h,{args:I,name:C,store:k,after:V,onError:F});let G;try{G=x.apply(this&&this.$id===e?this:k,I)}catch(Z){throw Wu(B,Z),Z}return G instanceof Promise?G.then(Z=>(Wu(N,Z),Z)).catch(Z=>(Wu(B,Z),Promise.reject(Z))):(Wu(N,G),G)}}const T=Ei({actions:{},getters:{},state:[],hotState:v}),S={_p:n,$id:e,$onAction:wA.bind(null,h),$patch:g,$reset:_,$subscribe(C,x={}){const I=wA(f,C,x.detached,()=>N()),N=s.run(()=>ko(()=>n.state.value[e],B=>{(x.flush==="sync"?c:u)&&C({storeId:e,type:Ao.direct,events:d},B)},Pi({},l,x)));return I},$dispose:b},k=Tf(Pi(ha?{_customProperties:Ei(new Set),_hmrPayload:T}:{},S));n._s.set(e,k);const A=n._e.run(()=>(s=TD(),s.run(()=>t())));for(const C in A){const x=A[C];if(Ze(x)&&!SA(x)||hs(x))i?E0(v.value,C,Rg(A,C)):o||(p&&bX(x)&&(Ze(x)?x.value=p[C]:TS(x,p[C])),n.state.value[e][C]=x),T.state.push(C);else if(typeof x=="function"){const I=i?x:w(C,x);A[C]=I,T.actions[C]=x,a.actions[C]=x}else SA(x)&&(T.getters[C]=o?r.getters[C]:x,ha&&(A._getters||(A._getters=Ei([]))).push(C))}Pi(k,A),Pi(de(k),A),Object.defineProperty(k,"$state",{get:()=>i?v.value:n.state.value[e],set:C=>{if(i)throw new Error("cannot set hotState");g(x=>{Pi(x,C)})}});{k._hotUpdate=Ei(x=>{k._hotUpdating=!0,x._hmrPayload.state.forEach(I=>{if(I in k.$state){const N=x.$state[I],B=k.$state[I];typeof N=="object"&&iu(N)&&iu(B)?k9(N,B):x.$state[I]=B}E0(k,I,Rg(x.$state,I))}),Object.keys(k.$state).forEach(I=>{I in x.$state||Py(k,I)}),u=!1,c=!1,n.state.value[e]=Rg(x._hmrPayload,"hotState"),c=!0,nu().then(()=>{u=!0});for(const I in x._hmrPayload.actions){const N=x[I];E0(k,I,w(I,N))}for(const I in x._hmrPayload.getters){const N=x._hmrPayload.getters[I],B=o?Xe(()=>(ep(n),N.call(k,k))):N;E0(k,I,B)}Object.keys(k._hmrPayload.getters).forEach(I=>{I in x._hmrPayload.getters||Py(k,I)}),Object.keys(k._hmrPayload.actions).forEach(I=>{I in x._hmrPayload.actions||Py(k,I)}),k._hmrPayload=x._hmrPayload,k._getters=x._getters,k._hotUpdating=!1});const C={writable:!0,configurable:!0,enumerable:!1};ha&&["_p","_hmrPayload","_getters","_customProperties"].forEach(x=>{Object.defineProperty(k,x,{value:k[x],...C})})}return n._p.forEach(C=>{if(ha){const x=s.run(()=>C({store:k,app:n._a,pinia:n,options:a}));Object.keys(x||{}).forEach(I=>k._customProperties.add(I)),Pi(k,x)}else Pi(k,s.run(()=>C({store:k,app:n._a,pinia:n,options:a})))}),k.$state&&typeof k.$state=="object"&&typeof k.$state.constructor=="function"&&!k.$state.constructor.toString().includes("[native code]")&&console.warn(`[\u{1F34D}]: The "state" must be a plain object. It cannot be
	state: () => new MyClass()
Found in store "${k.$id}".`),p&&o&&r.hydrate&&r.hydrate(k.$state,p),u=!0,c=!0,k}function zp(e,t,r){let n,i;const o=typeof t=="function";typeof e=="string"?(n=e,i=o?r:t):(i=e,n=e.id);function s(a,l){const u=Ek();if(a=a||u&&In(g9),a&&ep(a),!wS)throw new Error(`[\u{1F34D}]: getActivePinia was called with no active Pinia. Did you forget to install pinia?
	const pinia = createPinia()
	app.use(pinia)
This will fail in production.`);a=wS,a._s.has(n)||(o?kS(n,t,i,a):TA(n,i,a),s._pinia=a);const c=a._s.get(n);if(l){const f="__hot:"+n,h=o?kS(f,t,i,a,!0):TA(f,Pi({},i),a,!0);l._hotUpdate(h),delete a.state.value[f],a._s.delete(f)}if(ha&&u&&u.proxy&&!l){const f=u.proxy,h="_pStores"in f?f._pStores:f._pStores={};h[n]=c}return c}return s.$id=n,s}/*!
  * vue-router v4.1.3
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const kc=typeof window<"u";function wX(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const Ae=Object.assign;function Ey(e,t){const r={};for(const n in t){const i=t[n];r[n]=$i(i)?i.map(e):e(i)}return r}const Td=()=>{},$i=Array.isArray,SX=/\/$/,TX=e=>e.replace(SX,"");function Cy(e,t,r="/"){let n,i={},o="",s="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(n=t.slice(0,l),o=t.slice(l+1,a>-1?a:t.length),i=e(o)),a>-1&&(n=n||t.slice(0,a),s=t.slice(a,t.length)),n=CX(n!=null?n:t,r),{fullPath:n+(o&&"?")+o+s,path:n,query:i,hash:s}}function kX(e,t){const r=t.query?e(t.query):"";return t.path+(r&&"?")+r+(t.hash||"")}function kA(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function PX(e,t,r){const n=t.matched.length-1,i=r.matched.length-1;return n>-1&&n===i&&of(t.matched[n],r.matched[i])&&P9(t.params,r.params)&&e(t.query)===e(r.query)&&t.hash===r.hash}function of(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function P9(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!EX(e[r],t[r]))return!1;return!0}function EX(e,t){return $i(e)?PA(e,t):$i(t)?PA(t,e):e===t}function PA(e,t){return $i(t)?e.length===t.length&&e.every((r,n)=>r===t[n]):e.length===1&&e[0]===t}function CX(e,t){if(e.startsWith("/"))return e;if(!e)return t;const r=t.split("/"),n=e.split("/");let i=r.length-1,o,s;for(o=0;o<n.length;o++)if(s=n[o],s!==".")if(s==="..")i>1&&i--;else break;return r.slice(0,i).join("/")+"/"+n.slice(o-(o===n.length?1:0)).join("/")}var rp;(function(e){e.pop="pop",e.push="push"})(rp||(rp={}));var kd;(function(e){e.back="back",e.forward="forward",e.unknown=""})(kd||(kd={}));function AX(e){if(!e)if(kc){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),TX(e)}const MX=/^[^#]+#/;function xX(e,t){return e.replace(MX,"#")+t}function LX(e,t){const r=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-r.left-(t.left||0),top:n.top-r.top-(t.top||0)}}const G1=()=>({left:window.pageXOffset,top:window.pageYOffset});function IX(e){let t;if("el"in e){const r=e.el,n=typeof r=="string"&&r.startsWith("#"),i=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!i)return;t=LX(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function EA(e,t){return(history.state?history.state.position-t:-1)+e}const PS=new Map;function OX(e,t){PS.set(e,t)}function RX(e){const t=PS.get(e);return PS.delete(e),t}let DX=()=>location.protocol+"//"+location.host;function E9(e,t){const{pathname:r,search:n,hash:i}=t,o=e.indexOf("#");if(o>-1){let a=i.includes(e.slice(o))?e.slice(o).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),kA(l,"")}return kA(r,e)+n+i}function NX(e,t,r,n){let i=[],o=[],s=null;const a=({state:h})=>{const d=E9(e,location),p=r.value,v=t.value;let m=0;if(h){if(r.value=d,t.value=h,s&&s===p){s=null;return}m=v?h.position-v.position:0}else n(d);i.forEach(g=>{g(r.value,p,{delta:m,type:rp.pop,direction:m?m>0?kd.forward:kd.back:kd.unknown})})};function l(){s=r.value}function u(h){i.push(h);const d=()=>{const p=i.indexOf(h);p>-1&&i.splice(p,1)};return o.push(d),d}function c(){const{history:h}=window;!h.state||h.replaceState(Ae({},h.state,{scroll:G1()}),"")}function f(){for(const h of o)h();o=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",c),{pauseListeners:l,listen:u,destroy:f}}function CA(e,t,r,n=!1,i=!1){return{back:e,current:t,forward:r,replaced:n,position:window.history.length,scroll:i?G1():null}}function FX(e){const{history:t,location:r}=window,n={value:E9(e,r)},i={value:t.state};i.value||o(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(l,u,c){const f=e.indexOf("#"),h=f>-1?(r.host&&document.querySelector("base")?e:e.slice(f))+l:DX()+e+l;try{t[c?"replaceState":"pushState"](u,"",h),i.value=u}catch(d){console.error(d),r[c?"replace":"assign"](h)}}function s(l,u){const c=Ae({},t.state,CA(i.value.back,l,i.value.forward,!0),u,{position:i.value.position});o(l,c,!0),n.value=l}function a(l,u){const c=Ae({},i.value,t.state,{forward:l,scroll:G1()});o(c.current,c,!0);const f=Ae({},CA(n.value,l,null),{position:c.position+1},u);o(l,f,!1),n.value=l}return{location:n,state:i,push:a,replace:s}}function zX(e){e=AX(e);const t=FX(e),r=NX(e,t.state,t.location,t.replace);function n(o,s=!0){s||r.pauseListeners(),history.go(o)}const i=Ae({location:"",base:e,go:n,createHref:xX.bind(null,e)},t,r);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function BX(e){return typeof e=="string"||e&&typeof e=="object"}function C9(e){return typeof e=="string"||typeof e=="symbol"}const Ns={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},A9=Symbol("");var AA;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(AA||(AA={}));function sf(e,t){return Ae(new Error,{type:e,[A9]:!0},t)}function Ho(e,t){return e instanceof Error&&A9 in e&&(t==null||!!(e.type&t))}const MA="[^/]+?",$X={sensitive:!1,strict:!1,start:!0,end:!0},VX=/[.+*?^${}()[\]/\\]/g;function UX(e,t){const r=Ae({},$X,t),n=[];let i=r.start?"^":"";const o=[];for(const u of e){const c=u.length?[]:[90];r.strict&&!u.length&&(i+="/");for(let f=0;f<u.length;f++){const h=u[f];let d=40+(r.sensitive?.25:0);if(h.type===0)f||(i+="/"),i+=h.value.replace(VX,"\\$&"),d+=40;else if(h.type===1){const{value:p,repeatable:v,optional:m,regexp:g}=h;o.push({name:p,repeatable:v,optional:m});const _=g||MA;if(_!==MA){d+=10;try{new RegExp(`(${_})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${p}" (${_}): `+w.message)}}let b=v?`((?:${_})(?:/(?:${_}))*)`:`(${_})`;f||(b=m&&u.length<2?`(?:/${b})`:"/"+b),m&&(b+="?"),i+=b,d+=20,m&&(d+=-8),v&&(d+=-20),_===".*"&&(d+=-50)}c.push(d)}n.push(c)}if(r.strict&&r.end){const u=n.length-1;n[u][n[u].length-1]+=.7000000000000001}r.strict||(i+="/?"),r.end?i+="$":r.strict&&(i+="(?:/|$)");const s=new RegExp(i,r.sensitive?"":"i");function a(u){const c=u.match(s),f={};if(!c)return null;for(let h=1;h<c.length;h++){const d=c[h]||"",p=o[h-1];f[p.name]=d&&p.repeatable?d.split("/"):d}return f}function l(u){let c="",f=!1;for(const h of e){(!f||!c.endsWith("/"))&&(c+="/"),f=!1;for(const d of h)if(d.type===0)c+=d.value;else if(d.type===1){const{value:p,repeatable:v,optional:m}=d,g=p in u?u[p]:"";if($i(g)&&!v)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const _=$i(g)?g.join("/"):g;if(!_)if(m)h.length<2&&(c.endsWith("/")?c=c.slice(0,-1):f=!0);else throw new Error(`Missing required param "${p}"`);c+=_}}return c||"/"}return{re:s,score:n,keys:o,parse:a,stringify:l}}function WX(e,t){let r=0;for(;r<e.length&&r<t.length;){const n=t[r]-e[r];if(n)return n;r++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function jX(e,t){let r=0;const n=e.score,i=t.score;for(;r<n.length&&r<i.length;){const o=WX(n[r],i[r]);if(o)return o;r++}if(Math.abs(i.length-n.length)===1){if(xA(n))return 1;if(xA(i))return-1}return i.length-n.length}function xA(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const GX={type:0,value:""},HX=/[a-zA-Z0-9_]/;function XX(e){if(!e)return[[]];if(e==="/")return[[GX]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(d){throw new Error(`ERR (${r})/"${u}": ${d}`)}let r=0,n=r;const i=[];let o;function s(){o&&i.push(o),o=[]}let a=0,l,u="",c="";function f(){!u||(r===0?o.push({type:0,value:u}):r===1||r===2||r===3?(o.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function h(){u+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:l==="/"?(u&&f(),s()):l===":"?(f(),r=1):h();break;case 4:h(),r=n;break;case 1:l==="("?r=2:HX.test(l)?h():(f(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:r=3:c+=l;break;case 3:f(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,c="";break;default:t("Unknown state");break}}return r===2&&t(`Unfinished custom RegExp for param "${u}"`),f(),s(),i}function YX(e,t,r){const n=UX(XX(e.path),r),i=Ae(n,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function qX(e,t){const r=[],n=new Map;t=IA({strict:!1,end:!0,sensitive:!1},t);function i(c){return n.get(c)}function o(c,f,h){const d=!h,p=KX(c);p.aliasOf=h&&h.record;const v=IA(t,c),m=[p];if("alias"in c){const b=typeof c.alias=="string"?[c.alias]:c.alias;for(const w of b)m.push(Ae({},p,{components:h?h.record.components:p.components,path:w,aliasOf:h?h.record:p}))}let g,_;for(const b of m){const{path:w}=b;if(f&&w[0]!=="/"){const T=f.record.path,S=T[T.length-1]==="/"?"":"/";b.path=f.record.path+(w&&S+w)}if(g=YX(b,f,v),h?h.alias.push(g):(_=_||g,_!==g&&_.alias.push(g),d&&c.name&&!LA(g)&&s(c.name)),p.children){const T=p.children;for(let S=0;S<T.length;S++)o(T[S],g,h&&h.children[S])}h=h||g,l(g)}return _?()=>{s(_)}:Td}function s(c){if(C9(c)){const f=n.get(c);f&&(n.delete(c),r.splice(r.indexOf(f),1),f.children.forEach(s),f.alias.forEach(s))}else{const f=r.indexOf(c);f>-1&&(r.splice(f,1),c.record.name&&n.delete(c.record.name),c.children.forEach(s),c.alias.forEach(s))}}function a(){return r}function l(c){let f=0;for(;f<r.length&&jX(c,r[f])>=0&&(c.record.path!==r[f].record.path||!M9(c,r[f]));)f++;r.splice(f,0,c),c.record.name&&!LA(c)&&n.set(c.record.name,c)}function u(c,f){let h,d={},p,v;if("name"in c&&c.name){if(h=n.get(c.name),!h)throw sf(1,{location:c});v=h.record.name,d=Ae(ZX(f.params,h.keys.filter(_=>!_.optional).map(_=>_.name)),c.params),p=h.stringify(d)}else if("path"in c)p=c.path,h=r.find(_=>_.re.test(p)),h&&(d=h.parse(p),v=h.record.name);else{if(h=f.name?n.get(f.name):r.find(_=>_.re.test(f.path)),!h)throw sf(1,{location:c,currentLocation:f});v=h.record.name,d=Ae({},f.params,c.params),p=h.stringify(d)}const m=[];let g=h;for(;g;)m.unshift(g.record),g=g.parent;return{name:v,path:p,params:d,matched:m,meta:QX(m)}}return e.forEach(c=>o(c)),{addRoute:o,resolve:u,removeRoute:s,getRoutes:a,getRecordMatcher:i}}function ZX(e,t){const r={};for(const n of t)n in e&&(r[n]=e[n]);return r}function KX(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:JX(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function JX(e){const t={},r=e.props||!1;if("component"in e)t.default=r;else for(const n in e.components)t[n]=typeof r=="boolean"?r:r[n];return t}function LA(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function QX(e){return e.reduce((t,r)=>Ae(t,r.meta),{})}function IA(e,t){const r={};for(const n in e)r[n]=n in t?t[n]:e[n];return r}function M9(e,t){return t.children.some(r=>r===e||M9(e,r))}const x9=/#/g,tY=/&/g,eY=/\//g,rY=/=/g,nY=/\?/g,L9=/\+/g,iY=/%5B/g,oY=/%5D/g,I9=/%5E/g,sY=/%60/g,O9=/%7B/g,aY=/%7C/g,R9=/%7D/g,lY=/%20/g;function xk(e){return encodeURI(""+e).replace(aY,"|").replace(iY,"[").replace(oY,"]")}function uY(e){return xk(e).replace(O9,"{").replace(R9,"}").replace(I9,"^")}function ES(e){return xk(e).replace(L9,"%2B").replace(lY,"+").replace(x9,"%23").replace(tY,"%26").replace(sY,"`").replace(O9,"{").replace(R9,"}").replace(I9,"^")}function cY(e){return ES(e).replace(rY,"%3D")}function fY(e){return xk(e).replace(x9,"%23").replace(nY,"%3F")}function hY(e){return e==null?"":fY(e).replace(eY,"%2F")}function Cm(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function dY(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<n.length;++i){const o=n[i].replace(L9," "),s=o.indexOf("="),a=Cm(s<0?o:o.slice(0,s)),l=s<0?null:Cm(o.slice(s+1));if(a in t){let u=t[a];$i(u)||(u=t[a]=[u]),u.push(l)}else t[a]=l}return t}function OA(e){let t="";for(let r in e){const n=e[r];if(r=cY(r),n==null){n!==void 0&&(t+=(t.length?"&":"")+r);continue}($i(n)?n.map(o=>o&&ES(o)):[n&&ES(n)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+r,o!=null&&(t+="="+o))})}return t}function pY(e){const t={};for(const r in e){const n=e[r];n!==void 0&&(t[r]=$i(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return t}const vY=Symbol(""),RA=Symbol(""),Lk=Symbol(""),D9=Symbol(""),CS=Symbol("");function sh(){let e=[];function t(n){return e.push(n),()=>{const i=e.indexOf(n);i>-1&&e.splice(i,1)}}function r(){e=[]}return{add:t,list:()=>e,reset:r}}function fa(e,t,r,n,i){const o=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((s,a)=>{const l=f=>{f===!1?a(sf(4,{from:r,to:t})):f instanceof Error?a(f):BX(f)?a(sf(2,{from:t,to:f})):(o&&n.enterCallbacks[i]===o&&typeof f=="function"&&o.push(f),s())},u=e.call(n&&n.instances[i],t,r,l);let c=Promise.resolve(u);e.length<3&&(c=c.then(l)),c.catch(f=>a(f))})}function Ay(e,t,r,n){const i=[];for(const o of e)for(const s in o.components){let a=o.components[s];if(!(t!=="beforeRouteEnter"&&!o.instances[s]))if(gY(a)){const u=(a.__vccOpts||a)[t];u&&i.push(fa(u,r,n,o,s))}else{let l=a();i.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${s}" at "${o.path}"`));const c=wX(u)?u.default:u;o.components[s]=c;const h=(c.__vccOpts||c)[t];return h&&fa(h,r,n,o,s)()}))}}return i}function gY(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function DA(e){const t=In(Lk),r=In(D9),n=Xe(()=>t.resolve(Er(e.to))),i=Xe(()=>{const{matched:l}=n.value,{length:u}=l,c=l[u-1],f=r.matched;if(!c||!f.length)return-1;const h=f.findIndex(of.bind(null,c));if(h>-1)return h;const d=NA(l[u-2]);return u>1&&NA(c)===d&&f[f.length-1].path!==d?f.findIndex(of.bind(null,l[u-2])):h}),o=Xe(()=>i.value>-1&&yY(r.params,n.value.params)),s=Xe(()=>i.value>-1&&i.value===r.matched.length-1&&P9(r.params,n.value.params));function a(l={}){return _Y(l)?t[Er(e.replace)?"replace":"push"](Er(e.to)).catch(Td):Promise.resolve()}return{route:n,href:Xe(()=>n.value.href),isActive:o,isExactActive:s,navigate:a}}const mY=Sk({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:DA,setup(e,{slots:t}){const r=Tf(DA(e)),{options:n}=In(Lk),i=Xe(()=>({[FA(e.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[FA(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const o=t.default&&t.default(r);return e.custom?o:Ck("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:i.value},o)}}}),Pc=mY;function _Y(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function yY(e,t){for(const r in t){const n=t[r],i=e[r];if(typeof n=="string"){if(n!==i)return!1}else if(!$i(i)||i.length!==n.length||n.some((o,s)=>o!==i[s]))return!1}return!0}function NA(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const FA=(e,t,r)=>e!=null?e:t!=null?t:r,bY=Sk({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:r}){const n=In(CS),i=Xe(()=>e.route||n.value),o=In(RA,0),s=Xe(()=>{let u=Er(o);const{matched:c}=i.value;let f;for(;(f=c[u])&&!f.components;)u++;return u}),a=Xe(()=>i.value.matched[s.value]);Dg(RA,Xe(()=>s.value+1)),Dg(vY,a),Dg(CS,i);const l=D1();return ko(()=>[l.value,a.value,e.name],([u,c,f],[h,d,p])=>{c&&(c.instances[f]=u,d&&d!==c&&u&&u===h&&(c.leaveGuards.size||(c.leaveGuards=d.leaveGuards),c.updateGuards.size||(c.updateGuards=d.updateGuards))),u&&c&&(!d||!of(c,d)||!h)&&(c.enterCallbacks[f]||[]).forEach(v=>v(u))},{flush:"post"}),()=>{const u=i.value,c=e.name,f=a.value,h=f&&f.components[c];if(!h)return zA(r.default,{Component:h,route:u});const d=f.props[c],p=d?d===!0?u.params:typeof d=="function"?d(u):d:null,m=Ck(h,Ae({},p,t,{onVnodeUnmounted:g=>{g.component.isUnmounted&&(f.instances[c]=null)},ref:l}));return zA(r.default,{Component:m,route:u})||m}}});function zA(e,t){if(!e)return null;const r=e(t);return r.length===1?r[0]:r}const N9=bY;function wY(e){const t=qX(e.routes,e),r=e.parseQuery||dY,n=e.stringifyQuery||OA,i=e.history,o=sh(),s=sh(),a=sh(),l=Og(Ns);let u=Ns;kc&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=Ey.bind(null,Y=>""+Y),f=Ey.bind(null,hY),h=Ey.bind(null,Cm);function d(Y,it){let K,gt;return C9(Y)?(K=t.getRecordMatcher(Y),gt=it):gt=Y,t.addRoute(gt,K)}function p(Y){const it=t.getRecordMatcher(Y);it&&t.removeRoute(it)}function v(){return t.getRoutes().map(Y=>Y.record)}function m(Y){return!!t.getRecordMatcher(Y)}function g(Y,it){if(it=Ae({},it||l.value),typeof Y=="string"){const dt=Cy(r,Y,it.path),$=t.resolve({path:dt.path},it),W=i.createHref(dt.fullPath);return Ae(dt,$,{params:h($.params),hash:Cm(dt.hash),redirectedFrom:void 0,href:W})}let K;if("path"in Y)K=Ae({},Y,{path:Cy(r,Y.path,it.path).path});else{const dt=Ae({},Y.params);for(const $ in dt)dt[$]==null&&delete dt[$];K=Ae({},Y,{params:f(Y.params)}),it.params=f(it.params)}const gt=t.resolve(K,it),Ct=Y.hash||"";gt.params=c(h(gt.params));const xt=kX(n,Ae({},Y,{hash:uY(Ct),path:gt.path})),ct=i.createHref(xt);return Ae({fullPath:xt,hash:Ct,query:n===OA?pY(Y.query):Y.query||{}},gt,{redirectedFrom:void 0,href:ct})}function _(Y){return typeof Y=="string"?Cy(r,Y,l.value.path):Ae({},Y)}function b(Y,it){if(u!==Y)return sf(8,{from:it,to:Y})}function w(Y){return k(Y)}function T(Y){return w(Ae(_(Y),{replace:!0}))}function S(Y){const it=Y.matched[Y.matched.length-1];if(it&&it.redirect){const{redirect:K}=it;let gt=typeof K=="function"?K(Y):K;return typeof gt=="string"&&(gt=gt.includes("?")||gt.includes("#")?gt=_(gt):{path:gt},gt.params={}),Ae({query:Y.query,hash:Y.hash,params:"path"in gt?{}:Y.params},gt)}}function k(Y,it){const K=u=g(Y),gt=l.value,Ct=Y.state,xt=Y.force,ct=Y.replace===!0,dt=S(K);if(dt)return k(Ae(_(dt),{state:Ct,force:xt,replace:ct}),it||K);const $=K;$.redirectedFrom=it;let W;return!xt&&PX(n,gt,K)&&(W=sf(16,{to:$,from:gt}),At(gt,gt,!0,!1)),(W?Promise.resolve(W):C($,gt)).catch(X=>Ho(X)?Ho(X,2)?X:et(X):Z(X,$,gt)).then(X=>{if(X){if(Ho(X,2))return k(Ae({replace:ct},_(X.to),{state:Ct,force:xt}),it||$)}else X=I($,gt,!0,ct,Ct);return x($,gt,X),X})}function A(Y,it){const K=b(Y,it);return K?Promise.reject(K):Promise.resolve()}function C(Y,it){let K;const[gt,Ct,xt]=SY(Y,it);K=Ay(gt.reverse(),"beforeRouteLeave",Y,it);for(const dt of gt)dt.leaveGuards.forEach($=>{K.push(fa($,Y,it))});const ct=A.bind(null,Y,it);return K.push(ct),ju(K).then(()=>{K=[];for(const dt of o.list())K.push(fa(dt,Y,it));return K.push(ct),ju(K)}).then(()=>{K=Ay(Ct,"beforeRouteUpdate",Y,it);for(const dt of Ct)dt.updateGuards.forEach($=>{K.push(fa($,Y,it))});return K.push(ct),ju(K)}).then(()=>{K=[];for(const dt of Y.matched)if(dt.beforeEnter&&!it.matched.includes(dt))if($i(dt.beforeEnter))for(const $ of dt.beforeEnter)K.push(fa($,Y,it));else K.push(fa(dt.beforeEnter,Y,it));return K.push(ct),ju(K)}).then(()=>(Y.matched.forEach(dt=>dt.enterCallbacks={}),K=Ay(xt,"beforeRouteEnter",Y,it),K.push(ct),ju(K))).then(()=>{K=[];for(const dt of s.list())K.push(fa(dt,Y,it));return K.push(ct),ju(K)}).catch(dt=>Ho(dt,8)?dt:Promise.reject(dt))}function x(Y,it,K){for(const gt of a.list())gt(Y,it,K)}function I(Y,it,K,gt,Ct){const xt=b(Y,it);if(xt)return xt;const ct=it===Ns,dt=kc?history.state:{};K&&(gt||ct?i.replace(Y.fullPath,Ae({scroll:ct&&dt&&dt.scroll},Ct)):i.push(Y.fullPath,Ct)),l.value=Y,At(Y,it,K,ct),et()}let N;function B(){N||(N=i.listen((Y,it,K)=>{if(!qt.listening)return;const gt=g(Y),Ct=S(gt);if(Ct){k(Ae(Ct,{replace:!0}),gt).catch(Td);return}u=gt;const xt=l.value;kc&&OX(EA(xt.fullPath,K.delta),G1()),C(gt,xt).catch(ct=>Ho(ct,12)?ct:Ho(ct,2)?(k(ct.to,gt).then(dt=>{Ho(dt,20)&&!K.delta&&K.type===rp.pop&&i.go(-1,!1)}).catch(Td),Promise.reject()):(K.delta&&i.go(-K.delta,!1),Z(ct,gt,xt))).then(ct=>{ct=ct||I(gt,xt,!1),ct&&(K.delta&&!Ho(ct,8)?i.go(-K.delta,!1):K.type===rp.pop&&Ho(ct,20)&&i.go(-1,!1)),x(gt,xt,ct)}).catch(Td)}))}let V=sh(),F=sh(),G;function Z(Y,it,K){et(Y);const gt=F.list();return gt.length?gt.forEach(Ct=>Ct(Y,it,K)):console.error(Y),Promise.reject(Y)}function q(){return G&&l.value!==Ns?Promise.resolve():new Promise((Y,it)=>{V.add([Y,it])})}function et(Y){return G||(G=!Y,B(),V.list().forEach(([it,K])=>Y?K(Y):it()),V.reset()),Y}function At(Y,it,K,gt){const{scrollBehavior:Ct}=e;if(!kc||!Ct)return Promise.resolve();const xt=!K&&RX(EA(Y.fullPath,0))||(gt||!K)&&history.state&&history.state.scroll||null;return nu().then(()=>Ct(Y,it,xt)).then(ct=>ct&&IX(ct)).catch(ct=>Z(ct,Y,it))}const Dt=Y=>i.go(Y);let Pt;const Et=new Set,qt={currentRoute:l,listening:!0,addRoute:d,removeRoute:p,hasRoute:m,getRoutes:v,resolve:g,options:e,push:w,replace:T,go:Dt,back:()=>Dt(-1),forward:()=>Dt(1),beforeEach:o.add,beforeResolve:s.add,afterEach:a.add,onError:F.add,isReady:q,install(Y){const it=this;Y.component("RouterLink",Pc),Y.component("RouterView",N9),Y.config.globalProperties.$router=it,Object.defineProperty(Y.config.globalProperties,"$route",{enumerable:!0,get:()=>Er(l)}),kc&&!Pt&&l.value===Ns&&(Pt=!0,w(i.location).catch(Ct=>{}));const K={};for(const Ct in Ns)K[Ct]=Xe(()=>l.value[Ct]);Y.provide(Lk,it),Y.provide(D9,Tf(K)),Y.provide(CS,l);const gt=Y.unmount;Et.add(Y),Y.unmount=function(){Et.delete(Y),Et.size<1&&(u=Ns,N&&N(),N=null,l.value=Ns,Pt=!1,G=!1),gt()}}};return qt}function ju(e){return e.reduce((t,r)=>t.then(()=>r()),Promise.resolve())}function SY(e,t){const r=[],n=[],i=[],o=Math.max(t.matched.length,e.matched.length);for(let s=0;s<o;s++){const a=t.matched[s];a&&(e.matched.find(u=>of(u,a))?n.push(a):r.push(a));const l=e.matched[s];l&&(t.matched.find(u=>of(u,l))||i.push(l))}return[r,n,i]}function qr(e){return`data/icons/item/${e}.webp`}function TY(e){return`<img src="${qr(e)}" class="iconitem" />`}function vt(e,t,r){if(!e&&e!==0)return"?";const n=parseFloat(e),i=n.toFixed(t);return r?n>=0?"+"+i:i:i=="Infinity"?"\u221E":i}function da(e,t){return e+(t-e)*Math.random()}function gn(e){return!isNaN(e)&&isFinite(e)}function kY(e,t){let r=0;if(t<e[r])return-1;let n=e.length-1;if(e[n]<t)return n+1;for(;r<=n;){let i=Math.floor((r+n)/2);if(e[i]<=t&&t<=e[i+1])return i;t<e[i]?n=i-1:r=i+1}return-1}function PY(e,t){let r=0,n=e.length-1,i=null;for(;r<=n;){let o=Math.floor((r+n)/2);t(e[o])?(i=e[o],n=o-1):r=o+1}return i}function EY(e,t,r,n=.5,i=120,o=0){var s=1,a=r-t;return a!=0&&(s=(e-t)/a),`hsla(${s*(i-o)+o}, 100%, 50%, ${n})`}function CY(e,t){return e.length<=t?e:e.slice(0,t-1)+"\u2026"}function BA(e){const t=/\d+/g;return e.match(t).join("-")}function H1(e){if(e>=10**12)return e;if(e>=10**9)return e/10**9+"G";if(e>=10**6)return e/10**6+"M";if(e>=10**3)return e/10**3+"K";if(e>0){if(e<10**-1)return e/10**-3+"m";if(e<10**-4)return e/10**-6+"u";if(e<10**-7)return e/10**-9+"n";if(e<10**-10)return e}return e}function Pd(e,t,r){if(r==t.level)return;const n=Math.min(r,40),i=e.workerStatic[t.charkey];let o=t.mspdSheet/(i.mspd/100)-1;for(let s=t.level+1;s<=n;s++)t.level=s,t.wspdSheet+=da(i.wspd_lo,i.wspd_hi)/1e6,o+=da(i.mspd_lo,i.mspd_hi)/1e6,t.luckSheet+=da(i.luck_lo,i.luck_hi)/1e4,s%5==0&&t.skills.push(e.randomSkill(t.skills));t.mspdSheet=i.mspd/100*(1+o)}const Wt=zp({id:"user",state:()=>({selectedLang:"en",selectedRegion:"RU",selectedTax:.65,customPrices:{},keepItems:{},regionResources:{},allowFloating:!1,useFloatingResources:{},regionResources2:{},lodgingP2W:{},storageP2W:{},storageVP:!1,storagePersonal:{},lodgingTaken:{},activateAncado:!1,houseTaken:{},userWorkers:[],useDefaultWorker:!1,defaultWorker:{tnk:0,charkey:7572,label:"default",level:30,wspdSheet:140,mspdSheet:7.5,luckSheet:6,skills:["1012","1301","1302","1303","1601","1602","1603"],job:null},farmingEnable:!1,farmingBareProfit:0,farmingProfit:0,farmingP2WShare:0,displayWorkerNames:!0,displayWorkerStatsRank:!1,displayWorkerStatsForPz:!0,displayProfitPerCp:!1,grindTakenList:[],userWorkshops:{},defaultUserWorkshop:{industry:"unknown",label:"",manualCycleIncome:0,manualWorkload:300,manualCp:0},mapHideInactive:0,palaceEnable:!1,palaceProfit:0}),actions:{migrate(e){if(!e)return;const t=JSON.parse(e);let r=!1;if("counter"in t&&(delete t.counter,r=!0),"connectionOrder"in t&&(delete t.connectionOrder,r=!0),"townSlotsP2W"in t&&(t.lodgingP2W=t.townSlotsP2W,delete t.townSlotsP2W,r=!0),"grindTaken"in t&&(t.grindTakenList=Object.entries(t.grindTaken).filter(([n,i])=>i===!0).map(([n,i])=>Number(n)),delete t.grindTaken,r=!0),"userWorkers"in t&&t.userWorkers.forEach(n=>{n.job==1049&&(n.job=null,r=!0)}),"grindTakenList"in t){const n=new Set([133,134,612,805,806,807,801,961,962,963,1643,1644]),i=t.grindTakenList.filter(o=>!n.has(o));t.grindTakenList.length>i.length&&(t.grindTakenList=i,r=!0)}"userWorkers"in t&&t.userWorkers.forEach(n=>{var i;if(typeof n.job=="number"){const o=n.job;n.job={kind:"plantzone",pzk:o,storage:n.tnk},r=!0}else((i=n==null?void 0:n.job)==null?void 0:i.kind)==="plantzone"&&("storage"in n.job||(n.job.storage=n.tnk,r=!0));Array.isArray(n.job)&&(n.job={kind:"custom",profit:n.job[1],cp:n.job[2],label:n.job[3]})}),"farmingP2W"in t&&(t.farmingP2WShare=t.farmingP2W?80:0,delete t.farmingP2W,r=!0),"regionModifiers"in t&&(t.regionResources=t.regionModifiers,delete t.regionModifiers),"useFloatingModifiers"in t&&(t.useFloatingResources=t.useFloatingModifiers,delete t.useFloatingModifiers),"regionModifiers2"in t&&(t.regionResources2=t.regionModifiers2,delete t.regionModifiers2),r&&(localStorage.setItem("user",JSON.stringify(t)),console.log("userStore updated to new version")),this.$patch(t)},removeNodeTaken(e){const t=_t(),r=new Set;return this.workingWorkers.forEach(n=>{t.dijTakenOnlyPath(tnk,n.job).forEach(o=>r.add(o))}),r.has(e)?(console.log("can't remove required node"),!1):(this.nodesTaken[e]=!1,console.log("removed"),!0)},assignWorker(e,t){if(console.log("assigning",e.label,"to",e.job),(t==null?void 0:t.kind)=="plantzone"&&t.storage==null)throw Error("storage undefined");var r=this.userWorkers.indexOf(e);this.userWorkers.splice(r,1),this.userWorkers.push(e),e.job=t},chanceAtResource(e,t){if(t==0)return 100;if(!_t().ready)return 0;if(this.modTimes[e].hasOwnProperty(t))return this.modTimes[e][t];this.modSorteds[e]===void 0&&console.log("undefined resource% at rgk",e);const n=kY(this.modSorteds[e],t),i=n+1;if(n===-1)return 100;const o=this.modSorteds[e].length;if(n===o)return 0;const s=this.modSorteds[e][n],a=this.modTimes[e][s];if(n==i)return a;const l=this.modSorteds[e][i],u=this.modTimes[e][l],c=(t-s)/(l-s);return a+c*(u-a)},tierResources(e,t,r){const n=[];let i=0;const o=t,s=2*o,a=Math.ceil(o/r),l=Math.ceil(s/r);for(let u=a;u<=l;u++){const c=Math.max(2-r*u/o,0),f=Math.floor(o*(2-c)/100)*100,h=this.chanceAtResource(e,c*100);h!=0&&(n.push({wld:f,mod:c,tier:u,time:h-i}),i=h)}return n},calcWalkMinutes(e,t){return 2*e/t/60},calcCyclesDaily(e,t,r,n,i){let o=0;const s=this.calcWalkMinutes(n,i);if(this.allowFloating&&this.useFloatingResources[t])for(const a of this.tierResources(t,e,r)){const l=Math.ceil(a.wld/r),u=10*l+s;o+=24*60*a.time/100/u}else{const a=e*(2-this.productivity(t)),l=Math.ceil(a/r),u=10*l+s;o=24*60/u}return o},modifyGrindTakens(e,t){e.target.checked?this.grindTakenSet.add(t):this.grindTakenSet.delete(t),this.grindTakenList=[...this.grindTakenSet]},workerLabel(e){let t=this.displayWorkerNames?e.label:"";const r=_t();return r&&r.ready&&(t+=r.speciesIcons[r.workerStatic[e.charkey].species]),t+=e.level,t}},getters:{grindTakenSet(e){const t=new Set(e.grindTakenList);return console.log("grindTakenSet getter",t),t},marketUrl:e=>`https://apiv2.bdolytics.com/${e.selectedLang}/${e.selectedRegion}/market/central-market-data`,codexNodeUrl:e=>`https://bdolytics.com/${e.selectedLang}/${e.selectedRegion}/db/node/`,itemUrl:e=>`https://bdolytics.com/${e.selectedLang}/${e.selectedRegion}/db/item/`,floatingRegionGroups(){const e=_t();return Object.keys(e.regionGroups).filter(r=>this.useFloatingResources.hasOwnProperty(r)&&this.useFloatingResources[r])},modHists(){const e={},t=_t();for(const r of Object.keys(t.regionGroups))this.regionResources.hasOwnProperty(r)?e[r]=[this.regionResources[r]]:e[r]=[0];for(const r of this.floatingRegionGroups){this.regionResources2.hasOwnProperty(r)||(this.regionResources2[r]=[0]);const n=this.regionResources2[r].map(Number).filter(i=>!isNaN(i)).sort((i,o)=>o-i);e[r]=n}return e},medianResources(){const e={};for(const[t,r]of Object.entries(this.modHists)){let n=0;const i=r.length;if(i%2)n=r[(i-1)/2];else{const o=r[(i-1-1)/2],s=r[(i-1+1)/2];n=(o+s)/2}e[t]=n}return e},medianWorkloads(){const e={},t=_t();for(const[r,n]of Object.entries(t.plantzones)){const i=n.regiongroup;e[r]=n.workload*(2-this.medianResources[i]/100)}return e},modTimes(){const e=n=>n.reduce((i,o)=>i+o,0)/n.length,t={},r=_t();for(const n of Object.keys(r.regionGroups)){const i=this.modHists[n].length,o={},s=this.modHists[n][0],a=this.modHists[n][i-1];if(s==a)o[s]=(i-1)/2;else{const u={};for(let c=0;c<i;c++){const f=this.modHists[n][c];if(f==s){o[f]=100*c/(i-1);continue}if(f==a){o[f]=100*c/(i-1);break}f in u?u[f].push(c):u[f]=[c]}for(const[c,f]of Object.entries(u)){const h=e(f);o[c]=100*h/(i-1)}}t[n]=o}return t},modSorteds(){const e={},t=_t();for(const r of Object.keys(t.regionGroups)){const n=Object.keys(this.modTimes[r]).map(Number).sort((i,o)=>i-o);e[r]=n}return e},productivity:e=>t=>(t in e.regionResources?e.regionResources[t]:0)/100,nodeCostInfinityUntaken:e=>t=>e.autotakenNodes.has(t)?0:1/0,haveLodging(e){const t=_t();let r={slots:{perTown:{},total:0},cp:{perTown:{},total:0}};for(const[n,i]of Object.entries(t.lodgingPerTown)){if(r.slots.perTown[n]=1,r.cp.perTown[n]=0,n==619&&!e.activateAncado){r.slots.perTown[n]=0;continue}i.houses.forEach(o=>{e.lodgingTaken[o.key]&&(r.slots.perTown[n]+=o.lodgingSpaces,r.cp.perTown[n]+=o.CP)}),e.lodgingP2W[n]&&(r.slots.perTown[n]+=e.lodgingP2W[n]),r.slots.total+=r.slots.perTown[n],r.cp.total+=r.cp.perTown[n]}return console.log("haveLodging getter"),r},townFreeLodgingCount:e=>t=>{const r=_t(),n=e.haveLodging.slots.perTown[t],i=e.userWorkers.filter(o=>r.tnk2tk(o.tnk)==t).length;return n-i},countWorkers(e){return e.userWorkers.length},workingWorkers(e){return e.userWorkers.filter(t=>t.job&&t.job!=null)},townWorkers:e=>t=>{const r=_t();return e.userWorkers.filter(i=>r.tnk2tk(i.tnk)==t)},townWorkingWorkers:e=>t=>{const r=_t();return e.workingWorkers.filter(i=>r.tnk2tk(i.tnk)==t)},getFreeWorkers:e=>t=>{const r=_t();return e.userWorkers.filter(n=>r.tnk2tk(n.tnk)==t&&!n.job)},workerStatsForDisplay:e=>t=>{if(e.displayWorkerStatsRank){const n=_t().workerStatRank(t);return{wspd:n.wspd_rank*100,mspd:n.mspd_rank*100,luck:n.luck_rank*100}}else return e.displayWorkerStatsForPz?_t().workerStatsOnCurrentJob(t):{wspd:t.wspdSheet,mspd:t.mspdSheet,luck:t.luckSheet}},workersMinMaxStats(e){console.log("workersMinMaxStats");const t={wspd:{lo:142,hi:143},mspd:{lo:7.4,hi:7.6},luck:{lo:10,hi:11}};return e.userWorkers.forEach(r=>{if(r.charkey==7572){const n=e.workerStatsForDisplay(r);t.wspd.lo=Math.min(n.wspd,t.wspd.lo),t.mspd.lo=Math.min(n.mspd,t.mspd.lo),t.luck.lo=Math.min(n.luck,t.luck.lo),t.wspd.hi=Math.max(n.wspd,t.wspd.hi),t.mspd.hi=Math.max(n.mspd,t.mspd.hi),t.luck.hi=Math.max(n.luck,t.luck.hi)}}),t},grindTakenDesc(e){let t="";const r=_t();return r.ready&&e.grindTakenList.forEach(n=>{t+=r.uloc.node[n]+`
`}),t},autotakenGrindNodes(e){const t=new Set,r=_t();return r.ready&&e.grindTakenList.forEach(n=>{const o=r.dijkstraNearestTowns(Number(n),4,t,!1,!0).sort((u,c)=>u[1]-c[1]),[s,a,l]=o[0];l.forEach(u=>t.add(u))}),t},pzWsJobs(e){const t={pz:{},ws:[],map:[],nodeUsedbyJob:{}},r=_t();if(!r.ready)return t;const n=[];this.workingWorkers.forEach(o=>{const s={source:o.tnk};if(r.jobIsPz(o.job)){const a=o.job.pzk;s.target=a}else if(r.jobIsWorkshop(o.job)){const a=o.job.hk,l=r.houseInfo[a].affTown,u=r.tk2tnk(l);s.target=u}else return;n.push(s)});const i=r.route(e.autotakenGrindNodes,n).routeInfos;return this.workingWorkers.forEach(o=>{if(r.jobIsPz(o.job)){const s=o.job.pzk;if(!s)return;const a=r.workerStatsOnPlantzone(o),l=r.profitPzTownStats(s,o.tnk,a.wspd,a.mspd,a.luck,r.isGiant(o.charkey)),u=i[o.tnk][s],c={pzk:s,worker:o,profit:l,...u};t.pz[s]=c,t.map.push(c)}else if(r.jobIsWorkshop(o.job)){const s=o.job.hk,a=this.userWorkshops[s],l=r.houseInfo[s].affTown,u=r.tk2tnk(l),c=r.profitWorkshopWorker(s,a,o),f=i[o.tnk][u],h={hk:s,worker:o,profit:c,...f};t.ws.push(h),t.map.push(h)}}),t},pzJobs(e){return e.pzWsJobs.pz},wsJobs(e){return e.pzWsJobs.ws},mapJobs(e){return e.pzWsJobs.map},currentNodesJobs(e){const t={};for(const r of e.mapJobs)r.usedPath&&r.usedPath.forEach(n=>n in t?t[n].push(r):t[n]=[r]);return t},currentNodesCashflow(e){const t={};for(const r of e.mapJobs)r.usedPath&&r.usedPath.forEach(n=>n in t?t[n]+=r.profit.priceDaily:t[n]=r.profit.priceDaily);return t},pzjobsSharedConnectionCP(e){const t={},r=_t();for(const[n,i]of Object.entries(e.pzJobs))t[n]={value:0,tooltip:""},i.usedPath&&i.usedPath.forEach(function(o){if(e.autotakenGrindNodes.has(o))return t;const s=i.profit.priceDaily/e.currentNodesCashflow[o],a=r.nodes[o].CP*s;t[n].value+=a,t[n].tooltip+=`${vt(a,3)} ${r.nodeName(o)}
`});return t},pzjobsSharedEfficiency(e){const t={};for(const[r,n]of Object.entries(e.pzJobs))n.usedPath&&(t[r]=n.profit.priceDaily/e.pzjobsSharedConnectionCP[r]);return t},pzjobsSortedSharedEfficiency(e){return Object.entries(e.pzjobsSharedEfficiency).sort(([,t],[,r])=>r-t)},farmingProfitPerWorker(e){return(e.farmingProfit-e.farmingBareProfit)/10},newWorkerName:e=>t=>{const n=_t().uloc.town[t].replace("\u0413\u043E\u0440\u043E\u0434 ","").replace("\u0414\u0435\u0440\u0435\u0432\u043D\u044F ","").substring(0,3),i=e.townWorkers(t).length+1;return n+i},workerBringsItemkeys:e=>t=>{const r=_t();if(r.jobIsIdle(t.job))return[];if(r.jobIsPz(t.job))return r.plantzones[t.job].itemkeys;if(r.jobIsFarming(t.job))return[];if(r.jobIsCustom(t.job))return[];if(r.jobIsWorkshop(t.job))return[]},townsStoreItemkeys(e){const t={},r=_t();return r.ready&&(r.townsWithRedirectableStorage.forEach(n=>t[r.tnk2tk(n)]=new Set([])),e.workingWorkers.forEach(n=>{if(r.jobIsPz(n.job)){const i=r.tnk2tk(n.job.storage);t[i]=new Set([...t[i],...r.plantzones[n.job.pzk].itemkeys])}})),t},baseStorage(e){let t=16;return e.selectedRegion=="RU"&&(t=8),e.selectedRegion=="SEA"&&(t=8),e.selectedRegion=="MENA"&&(t=8),t+(e.storageVP?16:0)},townInfra:e=>(t,r,n)=>{const i=_t();t in e.lodgingP2W||(e.lodgingP2W[t]=0),t in e.storageP2W||(e.storageP2W[t]=0),t in e.storagePersonal||(e.storagePersonal[t]=0);const o=r-e.lodgingP2W[t]-1,s=n+(n>0?1:0)+e.storagePersonal[t]-e.storageP2W[t]-e.baseStorage;return i.lsLookup(t,o,s)},townInfraAddCost:e=>(t,r,n,i)=>{if(i&&t==i){const o=t,s=e.townsInfra[o],a=new Set([...e.townsStoreItemkeys[o],...n]).size,l=e.townInfra(o,e.townWorkingWorkers(o).length+r,a),c=_t().uloc.town[o]+` housing:
old: ${Math.max(0,s.wantLodging)}\u{1F6CF}\uFE0F + ${Math.max(0,s.wantStorage)}\u{1F4E6} = ${vt(s.cost)} CP
new: ${Math.max(0,l.wantLodging)}\u{1F6CF}\uFE0F + ${Math.max(0,l.wantStorage)}\u{1F4E6} = ${vt(l.cost)} CP`;return{cost:l.cost-s.cost,tooltip:c,storageTk:i}}else{const o=e.townsInfra[t],s=e.townsStoreItemkeys[t].size,a=e.townInfra(t,e.townWorkingWorkers(t).length+r,s),l=[],u=[],c={};if(i)u.push(i);else{c.sameTown=e.townInfraAddCost(t,r,n,t);for(const _ of Object.keys(e.townsInfra))_!=t&&u.push(_)}for(const _ of u){const b=e.townsInfra[_],w=new Set([...e.townsStoreItemkeys[_],...n]).size,T=e.townInfra(_,e.townWorkingWorkers(_).length+r,w);if(T.errL||T.errS)continue;const S=isNaN(T.cost)?Number.POSITIVE_INFINITY:T.cost-b.cost;if(l.push({storTk:_,storageOldInfra:b,storageNewInfra:T,storageCostDelta:S}),S==0)break}l.sort((_,b)=>_.storageCostDelta-b.storageCostDelta);const{storTk:f,storageOldInfra:h,storageNewInfra:d,storageCostDelta:p}=l[0],v=p+a.cost-o.cost,m=_t();if(c.sameTown&&c.sameTown.cost<=v)return c.sameTown;const g=m.uloc.town[t]+` lodging:
old: ${Math.max(0,o.wantLodging)}\u{1F6CF}\uFE0F + ${Math.max(0,o.wantStorage)}\u{1F4E6} = ${vt(o.cost)} CP
new: ${Math.max(0,a.wantLodging)}\u{1F6CF}\uFE0F + ${Math.max(0,a.wantStorage)}\u{1F4E6} = ${vt(a.cost)} CP
`+m.uloc.town[f]+` storage:
old: ${Math.max(0,h.wantLodging)}\u{1F6CF}\uFE0F + ${Math.max(0,h.wantStorage)}\u{1F4E6} = ${vt(h.cost)} CP
new: ${Math.max(0,d.wantLodging)}\u{1F6CF}\uFE0F + ${Math.max(0,d.wantStorage)}\u{1F4E6} = ${vt(d.cost)} CP`;return{cost:p+a.cost-o.cost,tooltip:g,storageTk:f}}},townsInfra(e){const t={},r=_t();return r.ready&&r.townsWithRedirectableStorage.forEach(n=>{const i=r.tnk2tk(n);t[i]=this.townInfra(i,e.townWorkingWorkers(i).length,e.townsStoreItemkeys[i]?e.townsStoreItemkeys[i].size:0)}),t},lodgage(e){return Object.values(this.townsInfra).reduce((t,r)=>t+r.cost,0)},townsTopIncomeWorkers(e){const t={},r=_t();if(!r.ready)return t;r.townsWithLodging.forEach(n=>t[r.tnk2tk(n)]=[]);for(const[n,i]of Object.entries(e.workingWorkers)){const o=r.tnk2tk(i.tnk);t[o].push(i)}for(const[n,i]of Object.entries(t))i.sort((o,s)=>e.workerIncome(s)-e.workerIncome(o));return console.log("townsTopIncomeWorkers",t),t},townsSteppedInfra(e){const t=Date.now(),r={},n=_t();if(!n.ready)return r;const i=[];n.townsWithRedirectableStorage.forEach(l=>{const u=n.tnk2tk(l);i[u]=[],r[u]=[]});for(const[l,u]of Object.entries(e.workingWorkers))i[n.tnk2tk(u.tnk)].push(u);for(const[l,u]of Object.entries(i)){let c=0,f=new Set([]),h=0;const d=e.townInfra(l,c,f.size),p=d.success?d.cost:NaN;for(;u.length>0;){let v=-1/0,m=null;var o,s,a;for(const g of u){const _=e.workerIncome(g),b=e.workerBringsItemkeys(g),w=new Set([...f,...b]),T=e.townInfra(l,c+1,w.size);if(!T.success)throw Error(`townsSteppedInfra: failed to provide infrastructure for ${l}, ${c+1}, ${w.size}`);const S=(h+_)/(T.cost-p);(S>v||!(S<v)&&_>s)&&(v=S,m=g,o=w,s=_,a=T.cost)}if(!m)throw Error("townsSteppedInfra: efficiency -Inf");c+=1,f=o,h+=s,r[l].push({w:m,curL:c,curS:f.size,addI:s,curI:h,cost:a,eff:v}),u.splice(u.indexOf(m),1)}for(let v=0;v<r[l].length;v++){const m=r[l][v];let g=v-1;for(;g>=0&&r[l][g].cost==m.cost;)g--;const _=g>=0?r[l][g]:{curI:0,cost:p};m.delta_eff=(m.curI-_.curI)/(m.cost-_.cost)}}return console.log("townsSteppedInfra took",Date.now()-t,"ms"),r},workerIncome:e=>t=>{const r=_t();if(r.jobIsIdle(t.job))return 0;if(r.jobIsPz(t.job)){if(e.pzJobs[t.job.pzk]==null)throw Error(`pzjob ${t.job.pzk} is undefined`);return e.pzJobs[t.job.pzk].profit.priceDaily}if(r.jobIsFarming(t.job))return e.farmingProfitPerWorker;if(r.jobIsCustom(t.job))return t.job.profit;if(r.jobIsWorkshop(t.job)){const n=t.job.hk;n in e.userWorkshops||(e.userWorkshops[n]={...e.defaultUserWorkshop});const i=e.userWorkshops[n];return r.profitWorkshopWorker(n,i,t).priceDaily}},workerSharedConnectionCP:e=>t=>{let r;const n=_t();if(n.jobIsPz(t.job)&&(r=e.pzjobsSharedConnectionCP[t.job.pzk].value),n.jobIsFarming(t.job)&&(r=0),n.jobIsCustom(t.job)&&(r=t.job.cp),n.jobIsWorkshop(t.job)){const i=e.workersWorkshop.filter(o=>o.job.hk==t.job.hk).length;r=e.userWorkshops[t.job.hk].manualCp/i}return r},workerSharedLodgageCP:e=>t=>{const r={value:void 0,tooltip:"?"},n=_t();if(!n.ready)return r;const i=e.workerIncome(t),o=n.tnk2tk(t.tnk),s=e.townsInfra[o].cost,a=e.userWorkers.filter(u=>n.tnk2tk(u.tnk)==o).length,l=e.townsTotalIncome[o].income;return e.townsTotalIncome[o].hasNegativeJob||l==0?(r.value=s/a,r.tooltip=`= total lodgage costs of hometown shared equally between all active jobs from that town:
${s}CP / ${a}`):a==1?(r.value=s,r.tooltip=`= all costs of ${n.nodeName(t.tnk)} lodgage`):(r.value=s*(i/l),r.tooltip=`= total lodgage costs of hometown shared proportionally between all active jobs from that town:
${s}CP * (${vt(i,3)} / ${vt(l,3)})`),r},workerIncomePerCp:e=>t=>{const r=e.workerIncome(t),n=e.workerSharedConnectionCP(t),i=e.workerSharedLodgageCP(t).value,o=r/(n+i);return isNaN(o)&&console.log(`workerIncomePerCp: ${vt(r,2)} / (${vt(n,2)} + ${vt(i,2)}) = ${vt(o,2)} for worker ${t.label}`),o},workersSortedByIncomePerCp(e){const t=[];return e.workingWorkers.forEach(r=>{t.push({w:r,i:e.workerIncome(r),ipc:e.workerIncomePerCp(r)})}),t.sort((r,n)=>isNaN(r.ipc)?-1:isNaN(n.ipc)||!isFinite(r.ipc)?1:isFinite(n.ipc)?r.ipc-n.ipc:-1),t},townsTotalIncome(e){const t={},r=_t();if(!r.ready)return t;r.townsWithLodging.forEach(n=>{const i=r.tnk2tk(n);t[i]={income:0,mapCp:0,hasNegativeJob:!1}});for(const[n,i]of Object.entries(e.workingWorkers)){const o=r.tnk2tk(i.tnk),s=e.workerIncome(i);t[o].income+=s,t[o].mapCp+=e.workerSharedConnectionCP(i),s<0&&(t[o].hasNegativeJob=!0)}for(const[n,i]of Object.entries(t)){const o=e.townsInfra[n].cost;i.eff=i.income/(i.mapCp+o),i.income==0&&i.mapCp+o==0&&(i.eff=0)}return t},workedPlantzones(e){const t=Object.keys(e.pzJobs);return new Set(t)},autotakenGrindNodesCP(e){const t=_t(),r=[...e.autotakenGrindNodes].reduce((n,i)=>n+t.nodes[i].CP,0);return console.log("autotakenGrindNodesCP",r),r},autotakenNodes(e){const t=Date.now(),r=new Set([...e.autotakenGrindNodes]);for(const i of e.mapJobs)i.usedPath&&i.usedPath.forEach(o=>r.add(o));const n=_t();if(n.ready&&e.activateAncado){const o=n.dijkstraNearestTowns(1343,4,r,!1,!0).sort((u,c)=>u[1]-c[1]),[s,a,l]=o[0];l.forEach(u=>r.add(u))}return console.log("autotakenNodes getter took ",Date.now()-t,"ms",r),r},autotakenNodesCP(e){const t=_t();return[...e.autotakenNodes].reduce((n,i)=>n+t.nodes[i].CP,0)-e.autotakenGrindNodesCP},pzJobsTotalDailyProfit(e){let t=0;for(const[r,n]of Object.entries(e.pzJobs))t+=n.profit.priceDaily;return t},pzJobsTotalLodgingCost(e){let t=0;for(const[r,n]of Object.entries(e.pzJobs))t+=e.workerSharedLodgageCP(n.worker).value;return t},pzJobsDailyProfitPerCp(e){return this.pzJobsTotalDailyProfit/(e.autotakenNodesCP+e.pzJobsTotalLodgingCost)},workersFarming(e){return e.userWorkers.filter(t=>t.job=="farming")},workersFarmingCount(e){return e.workersFarming.length},farmingCP(e){return e.farmingEnable?80-e.farmingP2WShare:0},farmingTotalProfit(e){return e.farmingEnable?e.farmingBareProfit+(e.farmingProfit-e.farmingBareProfit)/10*e.workersFarmingCount:0},farmingJobsTotalLodgingCost(e){let t=0;return e.workersFarming.forEach(r=>{t+=e.workerSharedLodgageCP(r).value}),t},farmingJobsDailyProfitPerCp(e){return e.farmingTotalProfit/(80+e.farmingJobsTotalLodgingCost)},workersWorkshop(e){const t=_t();return e.userWorkers.filter(r=>r.job&&t.jobIsWorkshop(r.job))},workersWorkshopCount(e){return e.workersWorkshop.length},workshopTotalProfit(e){let t=0;return e.workersWorkshop.forEach(r=>t+=e.workerIncome(r)),t},occupiedWorkshops(e){let t=new Set;return e.workersWorkshop.forEach(r=>t.add(r.job.hk)),console.log("occupiedWorkshops",t),t},workshopTotalCP(e){let t=0;return e.occupiedWorkshops.forEach(r=>t+=e.userWorkshops[r].manualCp),t},workshopJobsTotalLodgingCost(e){let t=0;return e.workersWorkshop.forEach(r=>{t+=e.workerSharedLodgageCP(r).value}),t},workshopJobsDailyProfitPerCp(e){return e.workshopTotalProfit/(e.workshopTotalCP+e.workshopJobsTotalLodgingCost)},workersCustom(e){const t=_t();return e.userWorkers.filter(r=>r.job&&t.jobIsCustom(r.job))},workersCustomCount(e){return e.workersCustom.length},customTotalProfit(e){let t=0;return e.workersCustom.forEach(r=>t+=r.job.profit),t},customTotalCP(e){let t=0;return e.workersCustom.forEach(r=>t+=r.job.cp),t},customJobsTotalLodgingCost(e){let t=0;return e.workersCustom.forEach(r=>{t+=e.workerSharedLodgageCP(r).value}),t},customJobsDailyProfitPerCp(e){return e.customTotalProfit/(e.customTotalCP+e.customJobsTotalLodgingCost)},totalCP(e){return e.autotakenNodesCP+e.farmingCP+e.lodgage+e.workshopTotalCP+e.customTotalCP},workersIdleCount(e){return e.countWorkers-e.workedPlantzones.size-e.workersFarmingCount-e.workersWorkshopCount-e.workersCustomCount},allJobsTotalDailyProfit(e){return e.pzJobsTotalDailyProfit+e.farmingTotalProfit+e.workshopTotalProfit+e.customTotalProfit},allJobsDailyProfitPerCp(e){return this.allJobsTotalDailyProfit/e.totalCP},workerPzStats(e){const t=_t(),r=[];return e.userWorkers.forEach(n=>{r.push(t.workerStatsOnPlantzone(n))}),console.log("workerPzStats"),r},allJobsProfitsBefore(e){const t=e.allJobsTotalDailyProfit,r=e.totalCP,n=e.allJobsDailyProfitPerCp;return{daily:t,cp:r,dailyPerCp:n}},jobEfficiencyDelta:e=>(t,r)=>{const n=e.allJobsProfitsBefore;return(n.daily+t)/(n.cp+r)-n.dailyPerCp},jobsTally(e){const t={},r=_t();if(!r.ready)return t;for(const[n,i]of Object.entries(e.pzJobs)){const o=r.plantzones[n],s=r.workerStatsOnPlantzone(i.worker).luck;if(o.lucky)for(const[l,u]of Object.entries(o.lucky))l in t||(t[l]=0),t[l]+=s/100*u*i.profit.cyclesDaily;if(r.isGiant(i.worker.charkey))for(const[l,u]of Object.entries(o.unlucky_gi))l in t||(t[l]=0),t[l]+=u*i.profit.cyclesDaily;else for(const[l,u]of Object.entries(o.unlucky))l in t||(t[l]=0),t[l]+=u*i.profit.cyclesDaily}return t},cyclesTally(e){let t={pz:0,workshop:0,chicken:0};const r=_t();return r.ready&&(this.workingWorkers.forEach(n=>{if(!!n){if(r.jobIsPz(n.job)){const i=e.pzJobs[n.job.pzk];t.pz+=i.profit.cyclesDaily}if(r.jobIsWorkshop(n.job)){const i=n.job.hk;i in e.userWorkshops||(e.userWorkshops[i]={...e.defaultUserWorkshop});const o=e.userWorkshops[i];t.workshop+=r.cyclesWorkshopWorker(i,o,n).cyclesDaily}}}),t.chicken=(t.pz+t.workshop)/3),t},lodgingCostsPerTownPerJobtype(e){const t={};e.userWorkers.filter(r=>gameStore.tnk2tk(r.tnk)==tk);for(const[r,n]of Object.entries(e.haveLodging.slots.perTown))e.haveLodging.cp.perTown[r],e.townWorkers(r);return t}}}),Nn=zp({id:"market",state:()=>({ready:!1,apiPrices:[],apiAlive:!1,calculatedPrices:{},apiDatetime:0}),actions:{async fetchData(){const e=Date.now(),t=Wt(),n=`https://apiv2.bdolytics.com/${t.selectedLang=="jp"?"ja":t.selectedLang}/${t.selectedRegion}/market/central-market-data`,i=await(await fetch(n)).json(),o=_t(),s=new Set(o.itemKeys);console.log("uset",s);const a={};i.data.forEach(l=>{s.has(l.item_id)&&(a[l.item_id]=l.price)});for(const l of Object.keys(o.vendorPrices))t.keepItems[l]=!0;this.calculatedPrices=await(await fetch("data/manual/calculated_prices.json")).json(),4202 in a&&(this.apiPrices=a,this.apiDatetime=Date.now(),this.apiAlive=!0,this.ready=!0,localStorage.setItem("market",JSON.stringify(this.$state))),console.log("fetchMarket took",Date.now()-e,"ms")},itemPriceUrl(e){return e in this.apiPrices?`https://bdolytics.com/market/central-market/item/${e}`:Wt().itemUrl+e},priceBunch(e){if(e===null||typeof e>"u")return null;let t=0;for(const[r,n]of Object.entries(e))t+=this.prices[r]*n;return t},pricePzd(e,t){const r=this.priceBunch(e.unlucky);if(e.lucky){const n=this.priceBunch(e.lucky);return t/100*n+(1-t/100)*r}return r},priceLerp(e,t,r){return e===null?t:r/100*e+(1-r/100)*t}},getters:{prices(){const e=Date.now(),t=Wt(),r=_t();let n={};for(const[i,o]of Object.entries(this.apiPrices))n[i]=o;for(const[i,o]of Object.entries(r.vendorPrices))n[i]=o;for(const i of Object.keys(n))i in t.customPrices&&t.customPrices[i]!==""&&(n[i]=t.customPrices[i]),!(i in t.keepItems&&t.keepItems[i])&&(i in r.vendorPrices||(n[i]*=t.selectedTax));for(const[i,o]of Object.entries(this.calculatedPrices))if(!(i in t.customPrices&&t.customPrices[i]!=="")){n[i]=0;for(const[s,a]of Object.entries(o))n[i]+=n[s]*a}return console.log("prices getter took",Date.now()-e,"ms"),n}}});var AS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function AY(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var F9={exports:{}},z9={exports:{}};(function(e,t){(function(){var r,n,i,o,s,a,l,u,c,f,h,d,p,v,m;i=Math.floor,f=Math.min,n=function(g,_){return g<_?-1:g>_?1:0},c=function(g,_,b,w,T){var S;if(b==null&&(b=0),T==null&&(T=n),b<0)throw new Error("lo must be non-negative");for(w==null&&(w=g.length);b<w;)S=i((b+w)/2),T(_,g[S])<0?w=S:b=S+1;return[].splice.apply(g,[b,b-b].concat(_)),_},a=function(g,_,b){return b==null&&(b=n),g.push(_),v(g,0,g.length-1,b)},s=function(g,_){var b,w;return _==null&&(_=n),b=g.pop(),g.length?(w=g[0],g[0]=b,m(g,0,_)):w=b,w},u=function(g,_,b){var w;return b==null&&(b=n),w=g[0],g[0]=_,m(g,0,b),w},l=function(g,_,b){var w;return b==null&&(b=n),g.length&&b(g[0],_)<0&&(w=[g[0],_],_=w[0],g[0]=w[1],m(g,0,b)),_},o=function(g,_){var b,w,T,S,k,A;for(_==null&&(_=n),S=function(){A=[];for(var C=0,x=i(g.length/2);0<=x?C<x:C>x;0<=x?C++:C--)A.push(C);return A}.apply(this).reverse(),k=[],w=0,T=S.length;w<T;w++)b=S[w],k.push(m(g,b,_));return k},p=function(g,_,b){var w;if(b==null&&(b=n),w=g.indexOf(_),w!==-1)return v(g,0,w,b),m(g,w,b)},h=function(g,_,b){var w,T,S,k,A;if(b==null&&(b=n),T=g.slice(0,_),!T.length)return T;for(o(T,b),A=g.slice(_),S=0,k=A.length;S<k;S++)w=A[S],l(T,w,b);return T.sort(b).reverse()},d=function(g,_,b){var w,T,S,k,A,C,x,I,N;if(b==null&&(b=n),_*10<=g.length){if(S=g.slice(0,_).sort(b),!S.length)return S;for(T=S[S.length-1],x=g.slice(_),k=0,C=x.length;k<C;k++)w=x[k],b(w,T)<0&&(c(S,w,0,null,b),S.pop(),T=S[S.length-1]);return S}for(o(g,b),N=[],A=0,I=f(_,g.length);0<=I?A<I:A>I;0<=I?++A:--A)N.push(s(g,b));return N},v=function(g,_,b,w){var T,S,k;for(w==null&&(w=n),T=g[b];b>_;){if(k=b-1>>1,S=g[k],w(T,S)<0){g[b]=S,b=k;continue}break}return g[b]=T},m=function(g,_,b){var w,T,S,k,A;for(b==null&&(b=n),T=g.length,A=_,S=g[_],w=2*_+1;w<T;)k=w+1,k<T&&!(b(g[w],g[k])<0)&&(w=k),g[_]=g[w],_=w,w=2*_+1;return g[_]=S,v(g,A,_,b)},r=function(){g.push=a,g.pop=s,g.replace=u,g.pushpop=l,g.heapify=o,g.updateItem=p,g.nlargest=h,g.nsmallest=d;function g(_){this.cmp=_!=null?_:n,this.nodes=[]}return g.prototype.push=function(_){return a(this.nodes,_,this.cmp)},g.prototype.pop=function(){return s(this.nodes,this.cmp)},g.prototype.peek=function(){return this.nodes[0]},g.prototype.contains=function(_){return this.nodes.indexOf(_)!==-1},g.prototype.replace=function(_){return u(this.nodes,_,this.cmp)},g.prototype.pushpop=function(_){return l(this.nodes,_,this.cmp)},g.prototype.heapify=function(){return o(this.nodes,this.cmp)},g.prototype.updateItem=function(_){return p(this.nodes,_,this.cmp)},g.prototype.clear=function(){return this.nodes=[]},g.prototype.empty=function(){return this.nodes.length===0},g.prototype.size=function(){return this.nodes.length},g.prototype.clone=function(){var _;return _=new g,_.nodes=this.nodes.slice(0),_},g.prototype.toArray=function(){return this.nodes.slice(0)},g.prototype.insert=g.prototype.push,g.prototype.top=g.prototype.peek,g.prototype.front=g.prototype.peek,g.prototype.has=g.prototype.contains,g.prototype.copy=g.prototype.clone,g}(),function(g,_){return e.exports=_()}(this,function(){return r})}).call(AS)})(z9);(function(e){e.exports=z9.exports})(F9);const Vg=AY(F9.exports),_t=zp({id:"game",state:()=>({ready:!1,plantzoneDrops:{},pzdSet:null,plantzoneStatic:{},itemKeys:[],nodes:{},distPerTown:{},distToTown:{},lodgingPerTown:{},houseInfo:{},regionInfo:{},townsConnectionRoots:new Set,townsWithLodging:[],townsWithRentableStorage:[],townsWithRedirectableStorage:[],townNames:{},regionGroups:{},loc:{},links:{},icons:{},workerStatic:{},skillData:{},vendorPrices:{},_tk2tnk:{},_tnk2tk:{}}),actions:{availableSkillPool(e,t){const r=new Set(e);return t&&r.delete(t),this.skillKeys.filter(i=>!r.has(i))},randomSkill(e){const t=this.availableSkillPool(e);return t[Math.floor(Math.random()*t.length)]},wspdBonusOnPlantzone(e){let t=0;return this.ready&&e.skills.forEach(r=>{const n=this.skillData[r];n!==void 0&&("wspd"in n&&(t+=n.wspd),"wspd_farm"in n&&(t+=n.wspd_farm))}),t},wspdBonus(e,t){let r=0;return this.ready&&e.skills.forEach(n=>{const i=this.skillData[n];i!==void 0&&("wspd"in i&&(r+=i.wspd),"wspd_"+t in i&&(r+=i["wspd_"+t]),"wspd_refine"in i&&t.startsWith("pack_")&&(r+=i.wspd_refine))}),r},mspdBonus(e){let t=0;return this.ready&&e.skills.forEach(r=>{const n=this.skillData[r];n!==void 0&&"mspd"in n&&(t+=n.mspd)}),t},luckBonus(e){let t=0;return this.ready&&e.skills.forEach(r=>{const n=this.skillData[r];n!==void 0&&"luck"in n&&(t+=n.luck)}),t},workerStatsOnPlantzone(e){return this.ready?{wspd:e.wspdSheet+this.wspdBonusOnPlantzone(e),mspd:this.workerStatic[e.charkey].mspd/100*(e.mspdSheet/(this.workerStatic[e.charkey].mspd/100)+this.mspdBonus(e)/100),luck:e.luckSheet+this.luckBonus(e)}:{wspd:0,mspd:0,luck:0}},workerStatsOnIndustry(e,t){return this.ready?{wspd:e.wspdSheet+this.wspdBonus(e,t),mspd:this.workerStatic[e.charkey].mspd/100*(e.mspdSheet/(this.workerStatic[e.charkey].mspd/100)+this.mspdBonus(e)/100),luck:e.luckSheet+this.luckBonus(e)}:{wspd:0,mspd:0,luck:0}},workerStatsOnCurrentJob(e){var t="farm";if(this.jobIsWorkshop(e.job)){const r=Wt(),n=e.job.hk;n in r.userWorkshops||(r.userWorkshops[n]={...r.defaultUserWorkshop}),t=r.userWorkshops[n].industry}return{wspd:e.wspdSheet+this.wspdBonus(e,t),mspd:this.workerStatic[e.charkey].mspd/100*(e.mspdSheet/(this.workerStatic[e.charkey].mspd/100)+this.mspdBonus(e)/100),luck:e.luckSheet+this.luckBonus(e)}},workerStatRank(e){const t=e.level-1,r=this.workerStatic[e.charkey],n=r.wspd_lo*t,o=r.wspd_hi*t-n,a=(e.wspdSheet*1e6-r.wspd-n)/o||0,l=r.mspd_lo*t,u=r.mspd_hi*t,f=((e.mspdSheet/(r.mspd/100)-1)*1e6-l)/(u-l)||0,h=r.luck_lo*t,d=r.luck_hi*t,v=(e.luckSheet*1e4-r.luck-h)/(d-h)||0;return{wspd_rank:a,mspd_rank:f,luck_rank:v}},houseLodging(e){var n;const t=(n=this.houseInfo[e].CraftList[1])!=null?n:0;return{0:0,1:1,2:2,3:4,4:6,5:8}[t]},houseStorage(e){var n;const t=(n=this.houseInfo[e].CraftList[2])!=null?n:0;return{0:0,1:3,2:5,3:8,4:12,5:16}[t]},houseCost(e){var r;return(r=this.houseInfo[e]&&this.houseInfo[e].CP)!=null?r:NaN},async fetchData(){const e=Date.now();this.plantzoneDrops=await(await fetch("data/manual/plantzone_drops.json")).json(),this.pzdSet=new Set(Object.keys(this.plantzoneDrops).map(r=>+r)),this.plantzoneStatic=await(await fetch("data/plantzone.json")).json(),console.log("plantzoneStatic",this.plantzoneStatic[1879]),this.itemInfo=await(await fetch("data/manual/item_info.json")).json(),this.itemKeys=await(await fetch("data/manual/plantzone_uniques.json")).json(),this.nodes=await(await fetch("data/exploration.json")).json(),this.tk2pzk=await(await fetch("data/distances_tk2pzk.json")).json(),this.pzk2tk=await(await fetch("data/distances_pzk2tk.json")).json(),this.tk2hk=await(await fetch("data/distances_tk2hk.json")).json(),this.regionInfo=await(await fetch("data/regioninfo.json")).json(),Object.values(this.regionInfo).forEach(({key:r,waypoint:n})=>{n!==0&&(this._tk2tnk[r]=n,this._tnk2tk[n]=r)}),this.townsConnectionRoots=new Set(Object.keys(this.nodes).filter(r=>this.nodes[r].kind>0&&this.nodes[r].kind<3&&this.nodes[r].CP===0).map(r=>this.nodes[r].key)),this.townsWithLodging=[1,61,301,302,601,602,604,608,1002,1101,1141,1301,1314,1319,1343,1380,1604,1623,1649,1691,1750,1781,1785,1795,1853,1857,1858,1834,1843],this.lodgingPerTown=await(await fetch("data/lodging_per_town.json")).json(),this.townsWithRentableStorage=[1,61,301,302,601,602,604,608,1002,1101,1141,1301,1314,1319,1343,1380,1604,1623,1649,1691,1727,1750,1781,1785,1795,1853,1857,1834,1843],this.townsWithRedirectableStorage=[1,61,301,302,601,602,604,608,1002,1101,1141,1301,1314,1319,1343,1380,1604,1623,1649,1691,1727,1750,1781,1785,1795,1834,1843,1850,1853,1857,1858],this.houseInfo=await(await fetch("data/houseinfo.json")).json(),this.vendorPrices=await(await fetch("data/manual/vendor_prices.json")).json(),this.industries={unk:"unknown",jewelry:"jewelry",mass:"mass production",weap:"weapon",tool:"tool",furn:"furniture",costume:"costume",refine:"refine",siege:"siege",mount:"mount",exclus:"exclusive",pack_produce:"pack_produce",pack_herb:"pack_herb",pack_mushr:"pack_mushr",pack_fish:"pack_fish",pack_timber:"pack_timber",pack_ore:"pack_ore"};const t={};for(const[r,n]of Object.entries(this.plantzoneStatic))if(r in this.plantzoneDrops){const i=n.regiongroup;i in t?t[i].push(r):t[i]=[r]}this.regionGroups=t,this.skillData=await(await fetch("data/manual/skills.json")).json(),this.workerStatic=await(await fetch("data/worker_static.json")).json(),this.loc=await(await fetch("data/loc.json")).json(),this.links=await(await fetch("data/links.json")).json(),this.ls_lookup=await(await fetch("data/all_lodging_storage.json")).json(),this.ls_lodgings_sorted={};for(const[r,n]of Object.entries(this.ls_lookup))this.ls_lodgings_sorted[r]=Object.keys(n).sort((i,o)=>i-o);this.giantSpecies=new Set([2,4,8]),this.speciesIcons={0:"\u{1F47A}",1:"\u{1F468}",2:"\u{1F422}",3:"\u{1F47A}",4:"\u{1F422}",5:"\u{1F47A}",6:"\u{1F47A}",7:"\u{1F468}",8:"\u{1F422}"},this.craftItems=await(await fetch("data/house_craft_outputs.json")).json(),this.ready=!0,console.log("fetchGame took",Date.now()-e,"ms")},isGiant(e){if(this.ready)return this.giantSpecies.has(this.workerStatic[e].species)},tk2tnk(e){if(this.ready){if(e in this._tk2tnk)return this._tk2tnk[e];console.log("unknown tk",e)}},tnk2tk(e){if(this.ready)return this._tnk2tk[e]},dijDiscountedNearestPlantzones(e,t){if(!this.ready)return;const r=Wt();let n=new Set;const i={[e]:r.autotakenNodes.has(e)?0:this.nodes[e].CP},o={[e]:null},s=new Vg((u,c)=>i[u]-i[c]);s.push(e);for(var a;s.size()&&(a=s.pop(),!(this.pzdSet.has(a)&&!r.autotakenNodes.has(a)&&(n.add(a),n.size==t)));)this.links[a].forEach(u=>{const c=r.autotakenNodes.has(u)?0:this.nodes[u].CP,f=i[a]+c;u in i?f<i[u]&&(i[u]=f,o[u]=a):(i[u]=f,o[u]=a,s.push(u))});const l=[];return n.forEach(u=>{const c=[u];let f=u;for(;o[f]!==null;)c.push(o[f]),f=o[f];l.push([u,i[u],c.reverse()])}),l},dijkstraPath(e,t,r){if(!this.ready)return[null,0];const n={[e]:null},i={[e]:r&&r.has(e)?0:this.nodes[e].CP},o=new Vg((u,c)=>i[u]-i[c]);o.push(e);for(var s;o.size()&&(s=o.pop(),s!=t);)this.links[s].forEach(u=>{this.nodes[u]==null&&console.log("dijkstraPath: no exploration node",u);const c=r&&r.has(u)?0:this.nodes[u].CP,f=i[s]+c;u in i?f<i[u]&&(i[u]=f,n[u]=s):(i[u]=f,n[u]=s,o.push(u))});const a=[t];let l=t;for(;n[l]!==null;)a.push(n[l]),l=n[l];return[a.reverse(),i[t]]},dijkstraNearestTowns(e,t,r,n,i,o){if(!this.ready)return;let s=new Set;const a={[e]:null},l={[e]:r&&r.has(e)?0:this.nodes[e].CP},u=new Vg((h,d)=>l[h]-l[d]);u.push(e);for(var c;u.size()&&(c=u.pop(),!(this.townsConnectionRoots.has(c)&&(!n||this.townsWithLodgingSet.has(c))&&(c!=1343||!i)&&(s.add(c),s.size==t)));)this.links[c].forEach(h=>{if(this.nodes[h]==null)throw Error(`dijkstraNearestTowns: unknown exploration node ${h}`);if(o&&(c==1727&&h==1800||c==1800&&h==1727))return;const d=r&&r.has(h)?0:this.nodes[h].CP,p=l[c]+d;h in l?p<l[h]&&(l[h]=p,a[h]=c):(l[h]=p,a[h]=c,u.push(h))});const f=[];return s.forEach(h=>{const d=[h];let p=h;for(;a[p]!==null;)d.push(a[p]),p=a[p];f.push([h,l[h],d])}),f},pzSelectionEntry(e,t,r,n,i,o,s,a){const l=Wt(),u=this.profitPzTownStats(e,r,s.wspd,s.mspd,s.luck,this.isGiant(o.charkey)),c=l.townInfraAddCost(t,1,this.plantzones[e].itemkeys,a),f={pz:this.plantzones[e],tnk:r,mapCp:n,path:i,townCp:c.cost,infraTooltip:c.tooltip,cp:n+c.cost,profit:u,w:o,statsOnPz:s,storageTnk:this.tk2tnk(c.storageTk)};return f.dailyPerCp=f.profit.priceDaily/(n+c.cost),f.effDelta=l.jobEfficiencyDelta(f.profit.priceDaily,n+c.cost),f},workshopSelectionEntry(e,t,r,n,i,o,s){const a=Wt(),l=a.userWorkshops[e],u=this.profitWorkshopWorker(e,l,i),c=a.townInfraAddCost(t,1,[]),f=o+s+c.cost,h={hk:e,tnk:r,mapCp:o,houseCp:s,path:n,townCp:c.cost,infraTooltip:c.tooltip,cp:f,profit:u,w:i,workshop:l};return h.dailyPerCp=h.profit.priceDaily/f,h.effDelta=a.jobEfficiencyDelta(h.profit.priceDaily,f),h},addBedInfo(e){return Wt().townInfraAddCost(e,1,[])},farmSelectionEntry(e){const t=Wt(),r=this.addBedInfo(e),n=t.farmingProfitPerWorker;return{income:n,infraCp:r.cost,infraTooltip:r.tooltip,dailyPerCp:n/r.cost,effDelta:t.jobEfficiencyDelta(n,r.cost)}},profitPzTownStats(e,t,r,n,i,o){if(!(e in this.plantzones))return{cycleValue:0,cycleMinutes:NaN,cyclesDaily:NaN,priceDaily:0};const s=Wt(),a=Nn(),l=this.plantzones[e];let u={dist:this.pzDistance(t,e),cycleValue:a.priceLerp(o?l.luckyValue_gi:l.luckyValue,o?l.unluckyValue_gi:l.unluckyValue,i)};return u.cyclesDaily=s.calcCyclesDaily(l.workload,l.regiongroup,r,u.dist,n),u.priceDaily=u.cyclesDaily*u.cycleValue/1e6,u},profitPzTownArtisans(e,t,r){const n=this.plantzones[e];let i=this.medianGoblin(t),o=this.profitPzTownStats(e,t,i.wspd+5,i.mspd,i.luck,!1);if(o.dist>1e6)return{connected:!1};o.charkey=i.charkey,o.wspd=i.wspd;const s={...n,tnk:t,...o,cp:r,dailyPerCp:o.priceDaily/r,isGiant:!1,kind:"goblin"};i=this.medianGiant(t),o=this.profitPzTownStats(e,t,i.wspd+5,i.mspd,i.luck,!0),o.charkey=i.charkey,o.wspd=i.wspd;const a={...n,tnk:t,...o,cp:r,dailyPerCp:o.priceDaily/r,isGiant:!0,kind:"giant"},l=a&&a.dailyPerCp>s.dailyPerCp?a:s,u=this.medianHuman(t);o=this.profitPzTownStats(e,t,u.wspd+5,u.mspd,u.luck,!1),o.charkey=u.charkey,o.wspd=u.wspd;const c={...n,tnk:t,...o,cp:r,dailyPerCp:o.priceDaily/r,isGiant:!0,kind:"human"},f=c&&c.dailyPerCp>l.dailyPerCp?c:l,h={[a.charkey]:a.priceDaily,[c.charkey]:c.priceDaily,[s.charkey]:s.priceDaily},d=Object.entries(h).map(([p,v])=>({charkey:p,priceDaily:v}));return d.sort((p,v)=>p&&v&&v.priceDaily-p.priceDaily),f.alt_workers_dict=h,f.alt_workers=d,f.connected=!0,f.cycleValue_gob=s.cycleValue,f.cycleValue_gi=a.cycleValue,f},makeMedianChar(e){const t={level:40},r=this.workerStatic[e];let n=r.wspd,i=0,o=r.luck;for(let a=2;a<=40;a++)n+=(r.wspd_lo+r.wspd_hi)/2,i+=(r.mspd_lo+r.mspd_hi)/2,o+=(r.luck_lo+r.luck_hi)/2;let s=r.mspd*(1+i/1e6);return t.wspd=Math.round(n/1e6*100)/100,t.mspd=Math.round(s)/100,t.luck=Math.round(o/1e4*100)/100,t.charkey=e,t.isGiant=this.isGiant(e),t},medianGoblin(e){return e==1623?this.makeMedianChar(8003):e==1604?this.makeMedianChar(8003):e==1691?this.makeMedianChar(8023):e==1750?this.makeMedianChar(8035):e==1781?this.makeMedianChar(8050):e==1785?this.makeMedianChar(8050):e==1795?this.makeMedianChar(8050):e==1857?this.makeMedianChar(8050):e==1858?this.makeMedianChar(8050):e==1853?this.makeMedianChar(8050):this.makeMedianChar(7572)},medianGiant(e){return e==1623?this.makeMedianChar(8006):e==1604?this.makeMedianChar(8006):e==1691?this.makeMedianChar(8027):e==1750?this.makeMedianChar(8039):e==1781?this.makeMedianChar(8058):e==1785?this.makeMedianChar(8058):e==1795?this.makeMedianChar(8058):e==1857?this.makeMedianChar(8058):e==1858?this.makeMedianChar(8058):e==1853?this.makeMedianChar(8058):this.makeMedianChar(7571)},medianHuman(e){return e==1623?this.makeMedianChar(8009):e==1604?this.makeMedianChar(8009):e==1691?this.makeMedianChar(8031):e==1750?this.makeMedianChar(8043):e==1781?this.makeMedianChar(8054):e==1785?this.makeMedianChar(8054):e==1795?this.makeMedianChar(8054):e==1857?this.makeMedianChar(8054):e==1858?this.makeMedianChar(8054):e==1853?this.makeMedianChar(8054):this.makeMedianChar(7573)},cyclesWorkshopWorker(e,t,r){const n=Wt(),i=this.workerStatsOnIndustry(r,t.industry),o=this.houseDistance(r.tnk,e),s=n.calcWalkMinutes(o,i.mspd),a=Math.ceil(t.manualWorkload/i.wspd),l=5*a+s,u=24*60/l;return{statsOnWs:i,distance:o,cyclesDaily:u}},repeatsWorkshopWorker(e,t){let r=1;return this.ready&&e.skills.forEach(n=>{const i=this.skillData[n];i!==void 0&&t in i&&(r+=i[t])}),r},profitWorkshopWorker(e,t,r){const{statsOnWs:n,distance:i,cyclesDaily:o}=this.cyclesWorkshopWorker(e,t,r),a=this.repeatsWorkshopWorker(r,t.industry)*o*t.manualCycleIncome/1e6;return{statsOnWs:n,distance:i,cyclesDaily:o,priceDaily:a}},isLodgingTown(e){return typeof e=="string"&&(e=Number(e)),this.tnk2tk(e)in this.lodgingPerTown},isPlantzone(e){return e in this.plantzoneDrops},isConnectionNode(e){return!this.isLodgingTown(e)&&!this.isPlantzone(e)},itemName(e){if(!this.ready)return e;const t=Wt();return e in this.loc[t.selectedLang].item?this.loc[t.selectedLang].item[e]:e},nodeName(e){if(!this.ready)return e;const t=Wt();return this.loc[t.selectedLang].node[e]},parentNodeName(e){if(this.ready&&e in this.plantzoneStatic){const t=this.plantzoneStatic[e].parent;return this.nodeName(t)}else return e},plantzoneName(e){if(this.ready&&e in this.plantzoneStatic){const t=this.plantzoneStatic[e].node.key;return this.parentNodeName(e)+" "+this.nodeName(t)}else return""},pzDistance(e,t){if(t in this.pzk2tk){const r=this.pzk2tk[t],n=this._tnk2tk[e];for(let i=0;i<r.length;i++)if(r[i][0]==n)return r[i][1]}else throw new Error(`no distances for pzk ${t}`);return NaN},houseDistance(e,t){if(!this.ready)return 0;const r=this._tnk2tk[e];return this.tk2hk[r][t]},isWorkable(e){return[4,6,7,8,9,14,15].some(r=>r==this.nodes[e].kind)},jobIsIdle(e){return e===null},jobIsPz(e){return e&&typeof e=="object"&&"kind"in e&&e.kind=="plantzone"||typeof e=="number"},jobIsFarming(e){return e=="farming"},jobIsCustom(e){return(e==null?void 0:e.kind)=="custom"},jobIsWorkshop(e){return e&&typeof e=="object"&&"kind"in e&&e.kind=="workshop"},jobIcon(e){return this.jobIsFarming(e)?"\u{1F33B}":this.jobIsCustom(e)?"\u270D\uFE0F":this.jobIsWorkshop(e)?"\u{1F3ED}":""},lsLookup(e,t,r){if(!this.ready)return null;const n=this.ls_lookup[e];let i={wantLodging:t,wantStorage:r,storage:NaN,cost:NaN,lodging:NaN,success:!1};for(let u in n){const c=Number(u);if(c>=t){const f=n[c],h=PY(f,d=>d.storage>=r);if(h){if(!i.success){i={wantLodging:t,wantStorage:r,...h,lodging:c,success:!0};continue}if(i.success&&h.cost<i.cost){i={wantLodging:t,wantStorage:r,...h,lodging:c,success:!0};break}}}}const o=t==this.townUpperLimits[e].lodging,s=t>this.townUpperLimits[e].lodging,a=r==this.townUpperLimits[e].storage,l=r>this.townUpperLimits[e].storage;return i={...i,warnL:o,errL:s,warnS:a,errS:l},i},route(e,t){const r={routeInfos:{},totalCost:0},n=new Set([...e]);t.forEach(i=>{const[o,s]=this.dijkstraPath(i.target,i.source,n);if(!o)return;o.forEach(l=>n.add(l));const a={usedPath:o,usedPathCost:s};i.source in r.routeInfos||(r.routeInfos[i.source]={}),r.routeInfos[i.source][i.target]=a});for(const i of n)r.totalCost+=this.nodes[i].CP;return r}},getters:{uloc(){const e=Wt();return this.ready?this.loc[e.selectedLang]:{town:{},housetype:{},char:{},item:{},node:{},skill:{},skilldesc:{}}},townsWithLodgingSet(){return new Set(this.townsWithLodging)},townsWithRentableStorageSet(){return new Set(this.townsWithRentableStorage)},townsWithRedirectableStorageSet(){return new Set(this.townsWithRedirectableStorage)},nearestTown:e=>t=>{const r=e.pzk2tk[t];return r&&r[0]?{tk:r[0][0],dist:r[0][1]}:{tk:0,dist:NaN}},skillKeys(){return Object.keys(this.skillData).map(Number)},housesPerTown(){const e={};this.townsWithRedirectableStorage.forEach(t=>e[this.tnk2tk(t)]=[]);for(const[t,r]of Object.entries(this.houseInfo)){const n=r.affTown;n in e||(e[n]=[]),e[n].push(Number(t))}return e},townUpperLimits(){const e={};for(const[t,r]of Object.entries(this.housesPerTown)){const n={cp:0,storage:0,lodging:0};for(const i of r)n.cp+=this.houseCost(i),n.storage+=this.houseStorage(i),n.lodging+=this.houseLodging(i);e[t]=n}return e},plantzones(){if(!this.ready)return{};const e=Date.now(),t=Nn(),r=Wt();let n={};for(const[i,o]of Object.entries(this.plantzoneDrops)){const s={...o,...this.plantzoneStatic[i]};s.name=this.plantzoneName(i);const a=t.priceBunch(s.lucky);s.unluckyValue=t.priceBunch(s.unlucky),s.luckyValue=s.unluckyValue+a,s.unluckyValue_gi=t.priceBunch(s.unlucky_gi),s.luckyValue_gi=s.unluckyValue_gi+a,s.activeWorkload=s.workload*(2-r.productivity(s.regiongroup)),s.itemkeys=new Set([...Object.keys(s.unlucky),...Object.keys(s.lucky)]),n[i]=s}return console.log("plantzones getter took",Date.now()-e,"ms"),n},itemkeyPlantzones(){const e={};if(!this.ready)return e;for(const[t,r]of Object.entries(this.plantzones))r.itemkeys.forEach(n=>{n in e||(e[n]=new Set([])),e[n].add(Number(t))});return e}}}),Bp=zp({id:"map",state:()=>({target:[0,0],zoom:-8})});const ce=(e,t)=>{const r=e.__vccOpts||e;for(const[n,i]of t)r[n]=i;return r},MY={class:"wrapper"},xY=R("Home"),LY=R("Plantzones"),IY=R("Resources"),OY=R("Settings"),RY=R("About"),DY={async beforeCreate(){_t().fetchData();const t=Wt(),r=localStorage.getItem("user");t.migrate(r);const n=Nn(),i=localStorage.getItem("market");i&&n.$patch(JSON.parse(i));const o=3600*1e3;n.apiDatetime+o<Date.now()&&n.fetchData();const s=Bp(),a=localStorage.getItem("map");s.$patch(JSON.parse(a))}},NY=Object.assign(DY,{__name:"App",setup(e){return(t,r)=>(M(),L(j,null,[y("header",null,[y("div",MY,[y("nav",null,[bt(Er(Pc),{to:"/"},{default:we(()=>[xY]),_:1}),bt(Er(Pc),{to:"/plantzones"},{default:we(()=>[LY]),_:1}),bt(Er(Pc),{to:"/resources"},{default:we(()=>[IY]),_:1}),bt(Er(Pc),{to:"/settings"},{default:we(()=>[OY]),_:1}),bt(Er(Pc),{to:"/about"},{default:we(()=>[RY]),_:1})])])]),bt(Er(N9))],64))}}),FY=ce(NY,[["__scopeId","data-v-3ac39e11"]]),zY="modulepreload",BY=function(e){return"/workerman/"+e},$A={},$Y=function(t,r,n){return!r||r.length===0?t():Promise.all(r.map(i=>{if(i=BY(i),i in $A)return;$A[i]=!0;const o=i.endsWith(".css"),s=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${s}`))return;const a=document.createElement("link");if(a.rel=o?"stylesheet":zY,o||(a.as="script",a.crossOrigin=""),a.href=i,document.head.appendChild(a),o)return new Promise((l,u)=>{a.addEventListener("load",l),a.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t())},VY={setup(){const e=Wt();return{gameStore:_t(),userStore:e}},props:{w:Object},methods:{formatFixed:vt,extractNumbers:BA,makeIconSrc:qr,workshop_text(e){const t=e.tnk,r=this.gameStore.uloc.char[e.job.hk];let n=BA(r);if(t){const i=this.gameStore.houseInfo[e.job.hk].affTown,o=this.gameStore.tk2tnk(i);t!=o&&(n=this.gameStore.nodeName(o)+" "+n)}return`${n} ${this.userStore.userWorkshops[e.job.hk].label}`}}},UY=R(" idle "),WY=["href"],jY=["src","data-key"],GY=R(" UNKNOWN_JOBTYPE ");function HY(e,t,r,n,i,o){return n.gameStore.jobIsIdle(r.w.job)?(M(),L(j,{key:0},[UY],64)):n.gameStore.jobIsPz(r.w.job)?(M(),L(j,{key:1},[R(E(n.gameStore.uloc.node[r.w.job.pzk]),1)],64)):n.gameStore.jobIsFarming(r.w.job)?(M(),L(j,{key:2},[R(" ["+E(n.gameStore.jobIcon(r.w.job))+"] ",1)],64)):n.gameStore.jobIsCustom(r.w.job)?(M(),L(j,{key:3},[R(" ["+E(n.gameStore.jobIcon(r.w.job))+"] "+E(r.w.job.label),1)],64)):n.gameStore.jobIsWorkshop(r.w.job)?(M(),L(j,{key:4},[r.w.job.recipe&&n.gameStore.craftItems[r.w.job.recipe]?(M(),L("a",{key:0,href:n.userStore.itemUrl+n.gameStore.craftItems[r.w.job.recipe]},[y("img",{src:o.makeIconSrc(n.gameStore.craftItems[r.w.job.recipe]),class:"iconitem","data-key":n.gameStore.craftItems[r.w.job.recipe]},null,8,jY)],8,WY)):(M(),L(j,{key:1},[R(" ["+E(n.gameStore.jobIcon(r.w.job))+"] ",1)],64)),R(" "+E(o.workshop_text(r.w)),1)],64)):(M(),L(j,{key:5},[GY],64))}const X1=ce(VY,[["render",HY]]);const XY={setup(){const e=_t(),t=Wt();return{gameStore:e,userStore:t}},props:{w:Object,homeless:Boolean,unsendable:Boolean},emits:["panToPaPos","send","edit"],components:{WorkerJobDescription:X1},data:()=>({}),methods:{formatFixed:vt,percentageToColor:EY}},YY=e=>(Ve("data-v-df4b03fd"),e=e(),Ue(),e),qY={key:0,class:"fss"},ZY={key:1},KY={key:0,class:"fss"},JY={key:1},QY={key:0,class:"fss"},tq={key:1},eq={class:"center"},rq=R(" @ "),nq=R(" idle "),iq={class:"center"},oq={key:0},sq=YY(()=>y("button",{title:"Ancado is not activated, can't house workers",disabled:"true"},"send",-1)),aq=[sq];function lq(e,t,r,n,i,o){const s=Ut("WorkerJobDescription");return M(),L("tr",null,[y("td",null,[y("button",{onClick:t[0]||(t[0]=a=>e.$emit("fire"))},"fire")]),y("td",null,E(n.userStore.workerLabel(r.w)),1),y("td",{style:jl(this.userStore.prerelease_colorGoblins&&r.w.charkey==7572&&{backgroundColor:o.percentageToColor(this.userStore.workerStatsForDisplay(r.w).wspd,this.userStore.workersMinMaxStats.wspd.lo,this.userStore.workersMinMaxStats.wspd.hi,.2)})},[this.userStore.displayWorkerStatsRank?(M(),L("span",qY,E(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).wspd,1))+"% ",1)):(M(),L("span",ZY,E(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).wspd,2)),1))],4),y("td",{style:jl(this.userStore.prerelease_colorGoblins&&r.w.charkey==7572&&{backgroundColor:o.percentageToColor(this.userStore.workerStatsForDisplay(r.w).mspd,this.userStore.workersMinMaxStats.mspd.lo,this.userStore.workersMinMaxStats.mspd.hi,.2)})},[this.userStore.displayWorkerStatsRank?(M(),L("span",KY,E(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).mspd,1))+"% ",1)):(M(),L("span",JY,E(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).mspd,2)),1))],4),y("td",{style:jl(this.userStore.prerelease_colorGoblins&&r.w.charkey==7572&&{backgroundColor:o.percentageToColor(this.userStore.workerStatsForDisplay(r.w).luck,this.userStore.workersMinMaxStats.luck.lo,this.userStore.workersMinMaxStats.luck.hi,.2)})},[this.userStore.displayWorkerStatsRank?(M(),L("span",QY,E(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).luck,1))+"% ",1)):(M(),L("span",tq,E(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).luck,2)),1))],4),y("td",eq,[y("button",{onClick:t[1]||(t[1]=a=>e.$emit("edit"))},"edit")]),y("td",null,[r.w.job?(M(),L(j,{key:0},[n.gameStore.jobIsPz(r.w.job)?(M(),L("span",{key:0,onClick:t[2]||(t[2]=a=>e.$emit("panToPaPos",this.gameStore.nodes[r.w.job.pzk].pos)),class:"clickable"},[bt(s,{w:r.w},null,8,["w"])])):(M(),li(s,{key:1,w:r.w},null,8,["w"])),rq,n.userStore.displayProfitPerCp?(M(),L(j,{key:2},[R(E(o.formatFixed(n.userStore.workerIncomePerCp(r.w),2))+" M$/day/CP ",1)],64)):(M(),L(j,{key:3},[R(E(o.formatFixed(n.userStore.workerIncome(r.w),2))+" M$/day ",1)],64))],64)):(M(),L(j,{key:1},[nq],64))]),y("td",iq,[r.w.job?(M(),L("button",{key:0,onClick:t[3]||(t[3]=a=>r.w.job=null)},"stop")):(M(),L(j,{key:1},[r.unsendable?(M(),L("div",oq,aq)):(M(),L("button",{key:1,onClick:t[4]||(t[4]=a=>e.$emit("send"))},"send"))],64))])])}const Ik=ce(XY,[["render",lq],["__scopeId","data-v-df4b03fd"]]);const uq={setup(){const e=_t(),t=Wt();return{gameStore:e,userStore:t}},props:{o:Object,tk:Number},emits:["selectLodging","selectHouses","hireWorker","editWorker","sendWorker","panToPaPos"],components:{Worker:Ik},data:()=>({}),computed:{infra(){if(this.tk in this.userStore.townsInfra)return this.userStore.townsInfra[this.tk];throw console.log(this.userStore.townsInfra),new Error(`no infra for town: ${this.tk}`)}},methods:{formatFixed:vt,fireWorker(e){this.userStore.userWorkers=this.userStore.userWorkers.filter(t=>t!=e)}}},Ok=e=>(Ve("data-v-77f30fa9"),e=e(),Ue(),e),cq={colspan:"2"},fq=R(" worker "),hq=R(" workers not hireable "),dq=Ok(()=>y("td",{class:"center"},"\u{1F528}",-1)),pq=Ok(()=>y("td",{class:"center"},"\u{1F9B6}",-1)),vq=Ok(()=>y("td",{class:"center"},"\u{1F340}",-1)),gq=R(" \xA0 ");function mq(e,t,r,n,i,o){const s=Ut("Worker");return M(),L(j,null,[y("tr",null,[y("td",cq,[r.o?(M(),L(j,{key:0},[fq,y("button",{onClick:t[0]||(t[0]=a=>this.$emit("hireWorker",r.tk))}," hire ")],64)):(M(),L(j,{key:1},[hq],64))]),dq,pq,vq,y("td",{colspan:"3",class:gr({unresolved:n.gameStore.ready&&o.infra.success==!1})},[y("span",{onClick:t[1]||(t[1]=a=>e.$emit("panToPaPos",this.gameStore.nodes[this.gameStore.tk2tnk(r.tk)].pos)),class:"bold clickable"},E(n.gameStore.nodeName(n.gameStore.tk2tnk(r.tk))),1),R(" "+E()+" ",1),n.userStore.displayProfitPerCp?(M(),L(j,{key:0},[R(E(o.formatFixed(n.userStore.townsTotalIncome[r.tk]&&n.userStore.townsTotalIncome[r.tk].eff,2))+" M$/day/CP ",1)],64)):(M(),L(j,{key:1},[R(E(o.formatFixed(n.userStore.townsTotalIncome[r.tk]&&n.userStore.townsTotalIncome[r.tk].income,1))+" M$/day ",1)],64)),gq,y("span",null,[R(E(n.userStore.townWorkingWorkers(r.tk).length)+" \u{1F6CF}\uFE0F ",1),y("span",null,E(n.userStore.townsStoreItemkeys[r.tk]&&n.userStore.townsStoreItemkeys[r.tk].size),1),R(" \u{1F4E6} "+E(n.gameStore.ready&&n.userStore.townsInfra[r.tk].cost)+" CP ",1),y("button",{onClick:t[2]||(t[2]=a=>this.$emit("selectHouses",r.tk)),class:gr({unresolved:n.gameStore.ready&&n.userStore.townsInfra[r.tk].success==!1})}," config ",2)])],2)]),(M(!0),L(j,null,wt(n.userStore.userWorkers.filter(a=>n.gameStore.tnk2tk(a.tnk)==r.tk),(a,l)=>(M(),li(s,{w:a,homeless:!0,class:gr({homeless:0}),unsendable:r.tk==619&&!n.userStore.activateAncado,onFire:u=>o.fireWorker(a),onEdit:u=>this.$emit("editWorker",a),onSend:u=>this.$emit("sendWorker",a),onPanToPaPos:t[3]||(t[3]=u=>this.$emit("panToPaPos",u))},null,8,["w","class","unsendable","onFire","onEdit","onSend"]))),256))],64)}const B9=ce(uq,[["render",mq],["__scopeId","data-v-77f30fa9"]]);const _q={setup(){const e=_t(),t=Wt();return{gameStore:e,userStore:t}},props:{pzk:Number,redirect:Number},emits:[],data:()=>({homeTnk:1,workerKind:"gob",selectedWorkerIndices:{},selectedWorkerPZSEs:{}}),methods:{formatFixed:vt,workerStats(e,t){return e=="gia"?this.gameStore.medianGiant(t):e=="hum"?this.gameStore.medianHuman(t):this.gameStore.medianGoblin(t)},profitTownStats(e,t){return this.gameStore.profitPzTownStats(this.pzk,e,t.wspd+5,t.mspd,t.luck,t.isGiant)},assignWorker(e){if(!e.storageTnk)throw Error("no storage");const t=JSON.parse(JSON.stringify(e.w));this.userStore.userWorkers.push(t),this.userStore.assignWorker(t,{kind:"plantzone",pzk:e.pz.key,storage:e.storageTnk})}},computed:{workerKinds(){const e=[];for(const t of["gia","hum","gob"]){const r={kind:t,stats:this.workerStats(t,this.homeTnk)};r.profit=this.profitTownStats(this.homeTnk,r.stats),e.push(r)}return e.sort((t,r)=>r.profit.priceDaily-t.profit.priceDaily),e},selectedWorkerStats(){return this.workerStats(this.workerKind,this.homeTnk)},nearestTowns(){const t=[];return this.gameStore.dijkstraNearestTowns(this.pzk,5,this.userStore.autotakenNodes,!0).forEach(([n,i,o])=>{const s=[],a=this.gameStore._tnk2tk[n],l=this.redirect==-1?a:this.gameStore.tnk2tk(this.redirect),u=this.userStore.townInfraAddCost(a,1,this.gameStore.plantzones[this.pzk].itemkeys,l);for(const c of["gia","hum","gob"]){const f=this.workerStats(c,n),h={tk:a,tnk:n,charkey:f.charkey,label:this.userStore.newWorkerName(a),level:f.level,wspdSheet:f.wspd,mspdSheet:f.mspd,luckSheet:f.luck,skills:[],job:null};h.skills.push(1011);const d=this.gameStore.workerStatsOnPlantzone(h),p=this.gameStore.profitPzTownStats(this.pzk,n,d.wspd,d.mspd,d.luck,this.gameStore.isGiant(h.charkey));if(p.dist>1e6)return;const v={pz:this.gameStore.plantzones[this.pzk],tnk:n,mapCp:i,path:o,townCp:u.cost,infraTooltip:u.tooltip,cp:i+u.cost,profit:p,w:h,statsOnPz:d,storageTnk:this.gameStore.tk2tnk(u.storageTk)};v.dailyPerCp=v.profit.priceDaily/(i+u.cost),v.effDelta=this.userStore.jobEfficiencyDelta(v.profit.priceDaily,i+u.cost);const m={kind:c,stats:f,PZSE:v};s.push(m)}s.length!=0&&(s.sort((c,f)=>f.PZSE.profit.priceDaily-c.PZSE.profit.priceDaily),this.selectedWorkerIndices[n]=0,t.push({tnk:n,workerKinds:s}))}),t.sort((n,i)=>i.workerKinds[0].PZSE.dailyPerCp-n.workerKinds[0].PZSE.dailyPerCp),t}}},$9=e=>(Ve("data-v-45b5b74e"),e=e(),Ue(),e),yq=$9(()=>y("h4",null,"Nearest towns with hireable workers:",-1)),bq={key:0},wq=$9(()=>y("tr",null,[y("th",null,"\u{1F6CF}\uFE0Ftown"),y("th",null,"walk"),y("th",null,[R("make new level 40 artisan "),y("abbr",{class:"tooltip",title:"with median stats and a single +5\u{1F528} skill"},"\u2139")]),y("th",null,[R("+CP "),y("abbr",{class:"tooltip",title:"node connection + town housing = total"},"\u2139")]),y("th",null,"M$/day/CP"),y("th",null,"action")],-1)),Sq={class:"center"},Tq=["onUpdate:modelValue"],kq=["value"],Pq={class:"center"},Eq=["title"],Cq=R("+"),Aq=["title"],Mq={class:"center"},xq={key:0,title:"plantzone already occupied",disabled:"true"},Lq={key:1,title:"Can't find housing, try P2W",disabled:"true"},Iq={key:2,title:"No walk path",disabled:"true"},Oq={key:3,title:"Ancado is not activated, can't house workers",disabled:"true"},Rq=["onClick"],Dq={key:1};function Nq(e,t,r,n,i,o){return M(),L("div",null,[yq,this.nearestTowns?(M(),L("table",bq,[wq,(M(!0),L(j,null,wt(this.nearestTowns,s=>(M(),L("tr",null,[y("td",null,E(n.gameStore.uloc.node[s.tnk]),1),y("td",Sq,E(o.formatFixed(s.workerKinds[e.selectedWorkerIndices[s.tnk]].PZSE.profit.dist)),1),y("td",null,[ot(y("select",{"onUpdate:modelValue":a=>e.selectedWorkerIndices[s.tnk]=a},[(M(!0),L(j,null,wt(s.workerKinds,(a,l)=>(M(),L("option",{value:l},E(n.gameStore.uloc.char[a.stats.charkey])+" ("+E(o.formatFixed(a.PZSE.profit.priceDaily,2))+" M$/day) ",9,kq))),256))],8,Tq),[[qe,e.selectedWorkerIndices[s.tnk]]])]),y("td",Pq,[y("abbr",{class:"tooltip",title:Array.from(s.workerKinds[e.selectedWorkerIndices[s.tnk]].PZSE.path,a=>`${n.userStore.autotakenNodes.has(a)?0:n.gameStore.nodes[a].CP} ${n.gameStore.uloc.node[a]}`).join(`
`)},E(s.workerKinds[e.selectedWorkerIndices[s.tnk]].PZSE.mapCp),9,Eq),Cq,y("abbr",{class:"tooltip",title:s.workerKinds[e.selectedWorkerIndices[s.tnk]].PZSE.infraTooltip},E(o.formatFixed(s.workerKinds[e.selectedWorkerIndices[s.tnk]].PZSE.townCp)),9,Aq),R("="+E(o.formatFixed(s.workerKinds[e.selectedWorkerIndices[s.tnk]].PZSE.cp)),1)]),y("td",Mq,E(o.formatFixed(s.workerKinds[e.selectedWorkerIndices[s.tnk]].PZSE.dailyPerCp,3)),1),y("td",null,[n.userStore.workedPlantzones.has(r.pzk.toString())?(M(),L("button",xq,"hire+assign")):isNaN(s.workerKinds[e.selectedWorkerIndices[s.tnk]].PZSE.townCp)?(M(),L("button",Lq,"hire+assign")):isNaN(s.workerKinds[e.selectedWorkerIndices[s.tnk]].PZSE.profit.dist)?(M(),L("button",Iq,"hire+assign")):n.gameStore.tnk2tk(s.tnk)&&n.gameStore.tnk2tk(s.tnk)==619&&!n.userStore.activateAncado?(M(),L("button",Oq,"hire+assign")):(M(),L("button",{key:4,onClick:a=>o.assignWorker(s.workerKinds[e.selectedWorkerIndices[s.tnk]].PZSE)}," hire+assign ",8,Rq))])]))),256))])):(M(),L("span",Dq," None "))])}const Fq=ce(_q,[["render",Nq],["__scopeId","data-v-45b5b74e"]]);const zq={setup(){const e=_t(),t=Wt(),r=Nn();return{gameStore:e,userStore:t,marketStore:r}},props:{pzk:Number},emits:["showResourceDialog","editWorker"],components:{MakeAWorker:Fq},data:()=>({selectedRedirect:-1}),methods:{formatFixed:vt,makeIconSrc:qr,plantzoneNearestTownsFreeWorkersProfits(e,t){const r=[];return this.gameStore.dijkstraNearestTowns(e,t,this.userStore.autotakenNodes,!0).forEach(([i,o,s])=>{const a=this.gameStore._tnk2tk[i];this.userStore.getFreeWorkers(a).forEach(u=>{const c=this.gameStore.workerStatsOnPlantzone(u),f=this.selectedRedirect==-1?a:this.gameStore.tnk2tk(this.selectedRedirect),h=this.gameStore.pzSelectionEntry(e,a,i,o,s,u,c,f);r.push(h)})}),r.sort((i,o)=>o.dailyPerCp-i.dailyPerCp),r}},computed:{freeWorkers(){return this.plantzoneNearestTownsFreeWorkersProfits(this.pzk,99).filter(n=>n.profit.dist<1e6).filter((n,i,o)=>i===o.findIndex(s=>s.tnk===n.tnk&&JSON.stringify(s.statsOnPz)===JSON.stringify(n.statsOnPz)))}}},za=e=>(Ve("data-v-b6b4f475"),e=e(),Ue(),e),Bq={key:0},$q=["title"],Vq=["src"],Uq=za(()=>y("abbr",{class:"tooltip",title:"how much more $ a lucky cycle brings vs unlucky"},"x",-1)),Wq=R("] "),jq=R(" workload: "),Gq=R("% resource "),Hq={id:"plantzoneWorkerInfo"},Xq=za(()=>y("br",null,null,-1)),Yq=["title"],qq=za(()=>y("br",null,null,-1)),Zq=["title"],Kq=za(()=>y("br",null,null,-1)),Jq=za(()=>y("abbr",{class:"tooltip",title:"income / (connectionCost + lodgageCost)"},"\u2139",-1)),Qq=R(" worker: none "),tZ={class:"spaced-columns"},eZ=R("Nearest towns with idle workers: "),rZ=R("None"),nZ={style:{"margin-right":"6px"}},iZ=R("stash at: "),oZ=za(()=>y("option",{value:"-1"},"worker hometown",-1)),sZ=za(()=>y("option",{value:"0"},"cheapest storage \u{1F9CA}",-1)),aZ=["value"],lZ={key:0},uZ=za(()=>y("tr",null,[y("th",null,"town"),y("th",null,"walk"),y("th",null,[R("worker "),y("abbr",{class:"tooltip",title:"same town&stat workers are hidden in this view"},"\u2139")]),y("th",null,"+M$/day"),y("th",null,[R("+CP "),y("abbr",{class:"tooltip",title:"node connection + town housing = total"},"\u2139")]),y("th",null,"M$/day/CP"),y("th",null,"action")],-1)),cZ={class:"fsxs"},fZ={class:"center"},hZ=["title"],dZ=R("+"),pZ=["title"],vZ={class:"center"},gZ={key:0,title:"plantzone already occupied",disabled:"true"},mZ={key:1,title:"Can't resolve housing",disabled:"true"},_Z={key:2,title:"Ancado is not activated, can't house workers",disabled:"true"},yZ=["onClick"];function bZ(e,t,r,n,i,o){const s=Ut("RouterLink"),a=Ut("MakeAWorker");return M(),L(j,null,[y("div",null,[bt(s,{tag:"a",to:{path:"./plantzones",hash:"#drops"+r.pzk}},{default:we(()=>[R(E(n.gameStore.plantzoneName(r.pzk)),1)]),_:1},8,["to"]),R(" "+E(this.gameStore.nodes[r.pzk].CP)+"CP ",1),r.pzk in this.gameStore.plantzones?(M(),L("span",Bq,[(M(!0),L(j,null,wt(this.gameStore.plantzones[r.pzk].itemkeys,l=>(M(),li(s,{tag:"a",to:{path:"./settings",hash:"#item"+l}},{default:we(()=>[y("abbr",{title:n.gameStore.itemName(l)+" "+o.formatFixed(n.marketStore.prices[l])+"$"},[y("img",{src:o.makeIconSrc(l),class:"iconitem"},null,8,Vq)],8,$q)]),_:2},1032,["to"]))),256)),R(" [\u{1F340}"+E(o.formatFixed(this.gameStore.plantzones[r.pzk].lucky?this.gameStore.plantzones[r.pzk].luckyValue/this.gameStore.plantzones[r.pzk].unluckyValue:1,2)),1),Uq,Wq])):Q("",!0)]),y("div",null,[jq,n.gameStore.ready&&n.gameStore.plantzones[r.pzk].regiongroup&&n.userStore.allowFloating&&n.userStore.useFloatingResources[n.gameStore.plantzones[r.pzk].regiongroup]?(M(),L(j,{key:0},[R(" ~"+E(o.formatFixed(n.userStore.medianWorkloads[r.pzk],2))+" ",1),y("button",{onClick:t[0]||(t[0]=l=>e.$emit("showResourceDialog",r.pzk))},"review")],64)):(M(),L(j,{key:1},[R(E(o.formatFixed(n.gameStore.plantzones[r.pzk].activeWorkload,2))+" \u2190 ",1),ot(y("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=l=>n.userStore.regionResources[n.gameStore.plantzones[r.pzk].regiongroup]=l),min:"0",max:"100",step:"0.1",class:"w42em"},null,512),[[Gt,n.userStore.regionResources[n.gameStore.plantzones[r.pzk].regiongroup],void 0,{number:!0}]]),Gq],64))]),y("div",Hq,[n.userStore.workedPlantzones.has(r.pzk.toString())?(M(),L(j,{key:0},[R(" worker: "+E(n.userStore.pzJobs[r.pzk].worker.label)+" @ "+E(o.formatFixed(n.userStore.pzJobs[r.pzk].profit.priceDaily,3))+" M$/day ",1),n.userStore.workedPlantzones.has(r.pzk.toString())?(M(),L(j,{key:0},[y("button",{onClick:t[2]||(t[2]=l=>e.$emit("editWorker",n.userStore.pzJobs[r.pzk].worker))}," edit "),y("button",{onClick:t[3]||(t[3]=l=>n.userStore.pzJobs[r.pzk].worker.job=null)}," stop ")],64)):Q("",!0),Xq,R(" connection cost: "+E(o.formatFixed(n.userStore.pzjobsSharedConnectionCP[r.pzk].value,3))+" CP ",1),y("abbr",{class:"tooltip",title:`full cost of this node + \u03A3 of connection nodes costs shared proportionally between all active jobs using them
`+n.userStore.pzjobsSharedConnectionCP[r.pzk].tooltip},"\u2139",8,Yq),qq,R(" lodgage cost: "+E(o.formatFixed(n.userStore.workerSharedLodgageCP(n.userStore.pzJobs[r.pzk].worker).value,3))+" CP ",1),y("abbr",{class:"tooltip",title:n.userStore.workerSharedLodgageCP(n.userStore.pzJobs[r.pzk].worker).tooltip},"\u2139",8,Zq),Kq,R(" efficiency: "+E(o.formatFixed(n.userStore.workerIncomePerCp(n.userStore.pzJobs[r.pzk].worker),3))+" M$/day/CP ",1),Jq],64)):(M(),L(j,{key:1},[Qq],64))]),y("div",null,[y("div",tZ,[y("div",null,[y("h4",null,[eZ,o.freeWorkers.length==0?(M(),L(j,{key:0},[rZ],64)):Q("",!0)])]),y("div",nZ,[iZ,ot(y("select",{"onUpdate:modelValue":t[4]||(t[4]=l=>e.selectedRedirect=l)},[oZ,sZ,(M(!0),L(j,null,wt(n.gameStore.townsWithRedirectableStorage,l=>(M(),L("option",{value:l},E(n.gameStore.uloc.node[l]),9,aZ))),256))],512),[[qe,e.selectedRedirect]])])]),o.freeWorkers.length>0?(M(),L("table",lZ,[uZ,(M(!0),L(j,null,wt(o.freeWorkers,l=>(M(),L("tr",null,[y("td",null,E(n.gameStore.nodeName(l.tnk)),1),y("td",null,E(o.formatFixed(l.profit.dist)),1),y("td",null,[R(E(l.w.label)+" ",1),y("span",cZ,E(o.formatFixed(l.statsOnPz.wspd,2))+"\u{1F528} "+E(o.formatFixed(l.statsOnPz.mspd,2))+"\u{1F9B6} "+E(o.formatFixed(l.statsOnPz.luck,2))+"\u{1F340} ",1)]),y("td",fZ,E(o.formatFixed(l.profit.priceDaily,2)),1),y("td",null,[y("abbr",{class:"tooltip",title:Array.from(l.path,u=>`${n.userStore.autotakenNodes.has(u)?0:n.gameStore.nodes[u].CP} ${n.gameStore.uloc.node[u]}`).join(`
`)},E(l.mapCp),9,hZ),dZ,y("abbr",{class:"tooltip",title:l.infraTooltip},E(o.formatFixed(l.townCp)),9,pZ),R("="+E(o.formatFixed(l.cp)),1)]),y("td",vZ,E(o.formatFixed(l.dailyPerCp,3)),1),y("td",null,[n.userStore.workedPlantzones.has(r.pzk.toString())?(M(),L("button",gZ,"assign")):isNaN(l.townCp)?(M(),L("button",mZ,"assign")):n.gameStore.tnk2tk(l.w.tnk)&&n.gameStore.tnk2tk(l.w.tnk)==619&&!n.userStore.activateAncado?(M(),L("button",_Z,"assign")):(M(),L("button",{key:3,onClick:u=>n.userStore.assignWorker(l.w,{kind:"plantzone",pzk:l.pz.key,storage:l.storageTnk})}," assign ",8,yZ))])]))),256))])):Q("",!0),bt(a,{pzk:r.pzk,redirect:Number(e.selectedRedirect)},null,8,["pzk","redirect"])])],64)}const V9=ce(zq,[["render",bZ],["__scopeId","data-v-b6b4f475"]]);const wZ={name:"modalDialog",props:{show:{type:Boolean,default:!1}},methods:{}};function SZ(e,t,r,n,i,o){return ot((M(),L("div",{onClick:t[1]||(t[1]=tp(s=>this.$emit("update:show",!1),["stop"])),class:"dialog"},[y("div",{onClick:t[0]||(t[0]=tp(()=>{},["stop"])),class:"dialog_content"},[WG(e.$slots,"default",{},void 0,!0)])],512)),[[UH,r.show]])}const Rk=ce(wZ,[["render",SZ],["__scopeId","data-v-dea74574"]]);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var MS=function(e,t){return MS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},MS(e,t)};function St(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");MS(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var TZ=function(){function e(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return e}(),kZ=function(){function e(){this.browser=new TZ,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return e}(),Ll=new kZ;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(Ll.wxa=!0,Ll.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?Ll.worker=!0:typeof navigator>"u"?(Ll.node=!0,Ll.svgSupported=!0):PZ(navigator.userAgent,Ll);function PZ(e,t){var r=t.browser,n=e.match(/Firefox\/([\d.]+)/),i=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/),o=e.match(/Edge?\/([\d.]+)/),s=/micromessenger/i.test(e);n&&(r.firefox=!0,r.version=n[1]),i&&(r.ie=!0,r.version=i[1]),o&&(r.edge=!0,r.version=o[1],r.newEdge=+o[1].split(".")[0]>18),s&&(r.weChat=!0),t.svgSupported=typeof SVGRect<"u",t.touchEventsSupported="ontouchstart"in window&&!r.ie&&!r.edge,t.pointerEventsSupported="onpointerdown"in window&&(r.edge||r.ie&&+r.version>=11),t.domSupported=typeof document<"u";var a=document.documentElement.style;t.transform3dSupported=(r.ie&&"transition"in a||r.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in a)&&!("OTransition"in a),t.transformSupported=t.transform3dSupported||r.ie&&+r.version>=9}const Zt=Ll;var Dk=12,EZ="sans-serif",ou=Dk+"px "+EZ,CZ=20,AZ=100,MZ="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function xZ(e){var t={};if(typeof JSON>"u")return t;for(var r=0;r<e.length;r++){var n=String.fromCharCode(r+32),i=(e.charCodeAt(r)-CZ)/AZ;t[n]=i}return t}var LZ=xZ(MZ),bu={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var e,t;return function(r,n){if(!e){var i=bu.createCanvas();e=i&&i.getContext("2d")}if(e)return t!==n&&(t=e.font=n||ou),e.measureText(r);r=r||"",n=n||ou;var o=/^([0-9]*?)px$/.exec(n),s=+(o&&o[1])||Dk,a=0;if(n.indexOf("mono")>=0)a=s*r.length;else for(var l=0;l<r.length;l++){var u=LZ[r[l]];a+=u==null?s:u*s}return{width:a}}}(),loadImage:function(e,t,r){var n=new Image;return n.onload=t,n.onerror=r,n.src=e,n}},U9=wu(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(e,t){return e["[object "+t+"]"]=!0,e},{}),W9=wu(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(e,t){return e["[object "+t+"Array]"]=!0,e},{}),kf=Object.prototype.toString,Y1=Array.prototype,IZ=Y1.forEach,OZ=Y1.filter,Nk=Y1.slice,RZ=Y1.map,VA=function(){}.constructor,C0=VA?VA.prototype:null,Fk="__proto__",DZ=2311;function j9(){return DZ++}function zk(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];typeof console<"u"&&console.error.apply(console,e)}function $t(e){if(e==null||typeof e!="object")return e;var t=e,r=kf.call(e);if(r==="[object Array]"){if(!Cd(e)){t=[];for(var n=0,i=e.length;n<i;n++)t[n]=$t(e[n])}}else if(W9[r]){if(!Cd(e)){var o=e.constructor;if(o.from)t=o.from(e);else{t=new o(e.length);for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}}}else if(!U9[r]&&!Cd(e)&&!Am(e)){t={};for(var s in e)e.hasOwnProperty(s)&&s!==Fk&&(t[s]=$t(e[s]))}return t}function le(e,t,r){if(!Rt(t)||!Rt(e))return r?$t(t):e;for(var n in t)if(t.hasOwnProperty(n)&&n!==Fk){var i=e[n],o=t[n];Rt(o)&&Rt(i)&&!ht(o)&&!ht(i)&&!Am(o)&&!Am(i)&&!UA(o)&&!UA(i)&&!Cd(o)&&!Cd(i)?le(i,o,r):(r||!(n in e))&&(e[n]=$t(t[n]))}return e}function NZ(e,t){for(var r=e[0],n=1,i=e.length;n<i;n++)r=le(r,e[n],t);return r}function at(e,t){if(Object.assign)Object.assign(e,t);else for(var r in t)t.hasOwnProperty(r)&&r!==Fk&&(e[r]=t[r]);return e}function ne(e,t,r){for(var n=ge(t),i=0;i<n.length;i++){var o=n[i];(r?t[o]!=null:e[o]==null)&&(e[o]=t[o])}return e}bu.createCanvas;function he(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r}return-1}function FZ(e,t){var r=e.prototype;function n(){}n.prototype=t.prototype,e.prototype=new n;for(var i in r)r.hasOwnProperty(i)&&(e.prototype[i]=r[i]);e.prototype.constructor=e,e.superClass=t}function Gi(e,t,r){if(e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames)for(var n=Object.getOwnPropertyNames(t),i=0;i<n.length;i++){var o=n[i];o!=="constructor"&&(r?t[o]!=null:e[o]==null)&&(e[o]=t[o])}else ne(e,t,r)}function Yr(e){return!e||typeof e=="string"?!1:typeof e.length=="number"}function z(e,t,r){if(!!(e&&t))if(e.forEach&&e.forEach===IZ)e.forEach(t,r);else if(e.length===+e.length)for(var n=0,i=e.length;n<i;n++)t.call(r,e[n],n,e);else for(var o in e)e.hasOwnProperty(o)&&t.call(r,e[o],o,e)}function Lt(e,t,r){if(!e)return[];if(!t)return Bk(e);if(e.map&&e.map===RZ)return e.map(t,r);for(var n=[],i=0,o=e.length;i<o;i++)n.push(t.call(r,e[i],i,e));return n}function wu(e,t,r,n){if(!!(e&&t)){for(var i=0,o=e.length;i<o;i++)r=t.call(n,r,e[i],i,e);return r}}function Cr(e,t,r){if(!e)return[];if(!t)return Bk(e);if(e.filter&&e.filter===OZ)return e.filter(t,r);for(var n=[],i=0,o=e.length;i<o;i++)t.call(r,e[i],i,e)&&n.push(e[i]);return n}function ge(e){if(!e)return[];if(Object.keys)return Object.keys(e);var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}function zZ(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return function(){return e.apply(t,r.concat(Nk.call(arguments)))}}var Vt=C0&&jt(C0.bind)?C0.call.bind(C0.bind):zZ;function be(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(){return e.apply(this,t.concat(Nk.call(arguments)))}}function ht(e){return Array.isArray?Array.isArray(e):kf.call(e)==="[object Array]"}function jt(e){return typeof e=="function"}function Mt(e){return typeof e=="string"}function xS(e){return kf.call(e)==="[object String]"}function Se(e){return typeof e=="number"}function Rt(e){var t=typeof e;return t==="function"||!!e&&t==="object"}function UA(e){return!!U9[kf.call(e)]}function Fn(e){return!!W9[kf.call(e)]}function Am(e){return typeof e=="object"&&typeof e.nodeType=="number"&&typeof e.ownerDocument=="object"}function q1(e){return e.colorStops!=null}function BZ(e){return e.image!=null}function $Z(e){return kf.call(e)==="[object RegExp]"}function Mm(e){return e!==e}function xi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0,n=e.length;r<n;r++)if(e[r]!=null)return e[r]}function Jt(e,t){return e!=null?e:t}function Ed(e,t,r){return e!=null?e:t!=null?t:r}function Bk(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return Nk.apply(e,t)}function G9(e){if(typeof e=="number")return[e,e,e,e];var t=e.length;return t===2?[e[0],e[1],e[0],e[1]]:t===3?[e[0],e[1],e[2],e[1]]:e}function Vi(e,t){if(!e)throw new Error(t)}function Po(e){return e==null?null:typeof e.trim=="function"?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var H9="__ec_primitive__";function xm(e){e[H9]=!0}function Cd(e){return e[H9]}var VZ=function(){function e(t){this.data={};var r=ht(t);this.data={};var n=this;t instanceof e?t.each(i):t&&z(t,i);function i(o,s){r?n.set(o,s):n.set(s,o)}}return e.prototype.get=function(t){return this.data.hasOwnProperty(t)?this.data[t]:null},e.prototype.set=function(t,r){return this.data[t]=r},e.prototype.each=function(t,r){for(var n in this.data)this.data.hasOwnProperty(n)&&t.call(r,this.data[n],n)},e.prototype.keys=function(){return ge(this.data)},e.prototype.removeKey=function(t){delete this.data[t]},e}();function Xt(e){return new VZ(e)}function X9(e,t){for(var r=new e.constructor(e.length+t.length),n=0;n<e.length;n++)r[n]=e[n];for(var i=e.length,n=0;n<t.length;n++)r[n+i]=t[n];return r}function Z1(e,t){var r;if(Object.create)r=Object.create(e);else{var n=function(){};n.prototype=e,r=new n}return t&&at(r,t),r}function Y9(e){var t=e.style;t.webkitUserSelect="none",t.userSelect="none",t.webkitTapHighlightColor="rgba(0,0,0,0)",t["-webkit-touch-callout"]="none"}function pt(e,t){return e.hasOwnProperty(t)}function Hr(){}var UZ=180/Math.PI;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var LS=function(e,t){return LS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},LS(e,t)};function Ce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");LS(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function Pf(e,t){return e==null&&(e=0),t==null&&(t=0),[e,t]}function WZ(e,t){return e[0]=t[0],e[1]=t[1],e}function jZ(e){return[e[0],e[1]]}function WA(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function q9(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function GZ(e){return Math.sqrt(HZ(e))}function HZ(e){return e[0]*e[0]+e[1]*e[1]}function My(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function $k(e,t){var r=GZ(t);return r===0?(e[0]=0,e[1]=0):(e[0]=t[0]/r,e[1]=t[1]/r),e}function IS(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var XZ=IS;function YZ(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}var Wc=YZ;function on(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i+r[4],e[1]=r[1]*n+r[3]*i+r[5],e}function xc(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function Lc(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}var Gu=function(){function e(t,r){this.target=t,this.topTarget=r&&r.topTarget}return e}(),qZ=function(){function e(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return e.prototype._dragStart=function(t){for(var r=t.target;r&&!r.draggable;)r=r.parent||r.__hostTarget;r&&(this._draggingTarget=r,r.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new Gu(r,t),"dragstart",t.event))},e.prototype._drag=function(t){var r=this._draggingTarget;if(r){var n=t.offsetX,i=t.offsetY,o=n-this._x,s=i-this._y;this._x=n,this._y=i,r.drift(o,s,t),this.handler.dispatchToElement(new Gu(r,t),"drag",t.event);var a=this.handler.findHover(n,i,r).target,l=this._dropTarget;this._dropTarget=a,r!==a&&(l&&a!==l&&this.handler.dispatchToElement(new Gu(l,t),"dragleave",t.event),a&&a!==l&&this.handler.dispatchToElement(new Gu(a,t),"dragenter",t.event))}},e.prototype._dragEnd=function(t){var r=this._draggingTarget;r&&(r.dragging=!1),this.handler.dispatchToElement(new Gu(r,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new Gu(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},e}();const ZZ=qZ;var KZ=function(){function e(t){t&&(this._$eventProcessor=t)}return e.prototype.on=function(t,r,n,i){this._$handlers||(this._$handlers={});var o=this._$handlers;if(typeof r=="function"&&(i=n,n=r,r=null),!n||!t)return this;var s=this._$eventProcessor;r!=null&&s&&s.normalizeQuery&&(r=s.normalizeQuery(r)),o[t]||(o[t]=[]);for(var a=0;a<o[t].length;a++)if(o[t][a].h===n)return this;var l={h:n,query:r,ctx:i||this,callAtLast:n.zrEventfulCallAtLast},u=o[t].length-1,c=o[t][u];return c&&c.callAtLast?o[t].splice(u,0,l):o[t].push(l),this},e.prototype.isSilent=function(t){var r=this._$handlers;return!r||!r[t]||!r[t].length},e.prototype.off=function(t,r){var n=this._$handlers;if(!n)return this;if(!t)return this._$handlers={},this;if(r){if(n[t]){for(var i=[],o=0,s=n[t].length;o<s;o++)n[t][o].h!==r&&i.push(n[t][o]);n[t]=i}n[t]&&n[t].length===0&&delete n[t]}else delete n[t];return this},e.prototype.trigger=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[t],o=this._$eventProcessor;if(i)for(var s=r.length,a=i.length,l=0;l<a;l++){var u=i[l];if(!(o&&o.filter&&u.query!=null&&!o.filter(t,u.query)))switch(s){case 0:u.h.call(u.ctx);break;case 1:u.h.call(u.ctx,r[0]);break;case 2:u.h.call(u.ctx,r[0],r[1]);break;default:u.h.apply(u.ctx,r);break}}return o&&o.afterTrigger&&o.afterTrigger(t),this},e.prototype.triggerWithContext=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[t],o=this._$eventProcessor;if(i)for(var s=r.length,a=r[s-1],l=i.length,u=0;u<l;u++){var c=i[u];if(!(o&&o.filter&&c.query!=null&&!o.filter(t,c.query)))switch(s){case 0:c.h.call(a);break;case 1:c.h.call(a,r[0]);break;case 2:c.h.call(a,r[0],r[1]);break;default:c.h.apply(a,r.slice(1,s-1));break}}return o&&o.afterTrigger&&o.afterTrigger(t),this},e}();const Hi=KZ;var JZ=Math.log(2);function OS(e,t,r,n,i,o){var s=n+"-"+i,a=e.length;if(o.hasOwnProperty(s))return o[s];if(t===1){var l=Math.round(Math.log((1<<a)-1&~i)/JZ);return e[r][l]}for(var u=n|1<<r,c=r+1;n&1<<c;)c++;for(var f=0,h=0,d=0;h<a;h++){var p=1<<h;p&i||(f+=(d%2?-1:1)*e[r][h]*OS(e,t-1,c,u,i|p,o),d++)}return o[s]=f,f}function jA(e,t){var r=[[e[0],e[1],1,0,0,0,-t[0]*e[0],-t[0]*e[1]],[0,0,0,e[0],e[1],1,-t[1]*e[0],-t[1]*e[1]],[e[2],e[3],1,0,0,0,-t[2]*e[2],-t[2]*e[3]],[0,0,0,e[2],e[3],1,-t[3]*e[2],-t[3]*e[3]],[e[4],e[5],1,0,0,0,-t[4]*e[4],-t[4]*e[5]],[0,0,0,e[4],e[5],1,-t[5]*e[4],-t[5]*e[5]],[e[6],e[7],1,0,0,0,-t[6]*e[6],-t[6]*e[7]],[0,0,0,e[6],e[7],1,-t[7]*e[6],-t[7]*e[7]]],n={},i=OS(r,8,0,0,0,n);if(i!==0){for(var o=[],s=0;s<8;s++)for(var a=0;a<8;a++)o[a]==null&&(o[a]=0),o[a]+=((s+a)%2?-1:1)*OS(r,7,s===0?1:0,1<<s,1<<a,n)/i*t[s];return function(l,u,c){var f=u*o[6]+c*o[7]+1;l[0]=(u*o[0]+c*o[1]+o[2])/f,l[1]=(u*o[3]+c*o[4]+o[5])/f}}}var GA="___zrEVENTSAVED",xy=[];function QZ(e,t,r,n,i){return RS(xy,t,n,i,!0)&&RS(e,r,xy[0],xy[1])}function RS(e,t,r,n,i){if(t.getBoundingClientRect&&Zt.domSupported&&!Z9(t)){var o=t[GA]||(t[GA]={}),s=tK(t,o),a=eK(s,o,i);if(a)return a(e,r,n),!0}return!1}function tK(e,t){var r=t.markers;if(r)return r;r=t.markers=[];for(var n=["left","right"],i=["top","bottom"],o=0;o<4;o++){var s=document.createElement("div"),a=s.style,l=o%2,u=(o>>1)%2;a.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",n[l]+":0",i[u]+":0",n[1-l]+":auto",i[1-u]+":auto",""].join("!important;"),e.appendChild(s),r.push(s)}return r}function eK(e,t,r){for(var n=r?"invTrans":"trans",i=t[n],o=t.srcCoords,s=[],a=[],l=!0,u=0;u<4;u++){var c=e[u].getBoundingClientRect(),f=2*u,h=c.left,d=c.top;s.push(h,d),l=l&&o&&h===o[f]&&d===o[f+1],a.push(e[u].offsetLeft,e[u].offsetTop)}return l&&i?i:(t.srcCoords=s,t[n]=r?jA(a,s):jA(s,a))}function Z9(e){return e.nodeName.toUpperCase()==="CANVAS"}var rK=/([&<>"'])/g,nK={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function ti(e){return e==null?"":(e+"").replace(rK,function(t,r){return nK[r]})}var iK=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ly=[],oK=Zt.browser.firefox&&+Zt.browser.version.split(".")[0]<39;function DS(e,t,r,n){return r=r||{},n?HA(e,t,r):oK&&t.layerX!=null&&t.layerX!==t.offsetX?(r.zrX=t.layerX,r.zrY=t.layerY):t.offsetX!=null?(r.zrX=t.offsetX,r.zrY=t.offsetY):HA(e,t,r),r}function HA(e,t,r){if(Zt.domSupported&&e.getBoundingClientRect){var n=t.clientX,i=t.clientY;if(Z9(e)){var o=e.getBoundingClientRect();r.zrX=n-o.left,r.zrY=i-o.top;return}else if(RS(Ly,e,n,i)){r.zrX=Ly[0],r.zrY=Ly[1];return}}r.zrX=r.zrY=0}function Vk(e){return e||window.event}function Zn(e,t,r){if(t=Vk(t),t.zrX!=null)return t;var n=t.type,i=n&&n.indexOf("touch")>=0;if(i){var s=n!=="touchend"?t.targetTouches[0]:t.changedTouches[0];s&&DS(e,s,t,r)}else{DS(e,t,t,r);var o=sK(t);t.zrDelta=o?o/120:-(t.detail||0)/3}var a=t.button;return t.which==null&&a!==void 0&&iK.test(t.type)&&(t.which=a&1?1:a&2?3:a&4?2:0),t}function sK(e){var t=e.wheelDelta;if(t)return t;var r=e.deltaX,n=e.deltaY;if(r==null||n==null)return t;var i=Math.abs(n!==0?n:r),o=n>0?-1:n<0?1:r>0?-1:1;return 3*i*o}function aK(e,t,r,n){e.addEventListener(t,r,n)}function lK(e,t,r,n){e.removeEventListener(t,r,n)}var su=function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0};function XA(e){return e.which===2||e.which===3}var uK=function(){function e(){this._track=[]}return e.prototype.recognize=function(t,r,n){return this._doTrack(t,r,n),this._recognize(t)},e.prototype.clear=function(){return this._track.length=0,this},e.prototype._doTrack=function(t,r,n){var i=t.touches;if(!!i){for(var o={points:[],touches:[],target:r,event:t},s=0,a=i.length;s<a;s++){var l=i[s],u=DS(n,l,{});o.points.push([u.zrX,u.zrY]),o.touches.push(l)}this._track.push(o)}},e.prototype._recognize=function(t){for(var r in Iy)if(Iy.hasOwnProperty(r)){var n=Iy[r](this._track,t);if(n)return n}},e}();function YA(e){var t=e[1][0]-e[0][0],r=e[1][1]-e[0][1];return Math.sqrt(t*t+r*r)}function cK(e){return[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]}var Iy={pinch:function(e,t){var r=e.length;if(!!r){var n=(e[r-1]||{}).points,i=(e[r-2]||{}).points||n;if(i&&i.length>1&&n&&n.length>1){var o=YA(n)/YA(i);!isFinite(o)&&(o=1),t.pinchScale=o;var s=cK(n);return t.pinchX=s[0],t.pinchY=s[1],{type:"pinch",target:e[0].target,event:t}}}}};function af(){return[1,0,0,1,0,0]}function Uk(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function K9(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function jc(e,t,r){var n=t[0]*r[0]+t[2]*r[1],i=t[1]*r[0]+t[3]*r[1],o=t[0]*r[2]+t[2]*r[3],s=t[1]*r[2]+t[3]*r[3],a=t[0]*r[4]+t[2]*r[5]+t[4],l=t[1]*r[4]+t[3]*r[5]+t[5];return e[0]=n,e[1]=i,e[2]=o,e[3]=s,e[4]=a,e[5]=l,e}function NS(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+r[0],e[5]=t[5]+r[1],e}function Wk(e,t,r){var n=t[0],i=t[2],o=t[4],s=t[1],a=t[3],l=t[5],u=Math.sin(r),c=Math.cos(r);return e[0]=n*c+s*u,e[1]=-n*u+s*c,e[2]=i*c+a*u,e[3]=-i*u+c*a,e[4]=c*o+u*l,e[5]=c*l-u*o,e}function fK(e,t,r){var n=r[0],i=r[1];return e[0]=t[0]*n,e[1]=t[1]*i,e[2]=t[2]*n,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*i,e}function K1(e,t){var r=t[0],n=t[2],i=t[4],o=t[1],s=t[3],a=t[5],l=r*s-o*n;return l?(l=1/l,e[0]=s*l,e[1]=-o*l,e[2]=-n*l,e[3]=r*l,e[4]=(n*a-s*i)*l,e[5]=(o*i-r*a)*l,e):null}var hK=function(){function e(t,r){this.x=t||0,this.y=r||0}return e.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.set=function(t,r){return this.x=t,this.y=r,this},e.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},e.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},e.prototype.scale=function(t){this.x*=t,this.y*=t},e.prototype.scaleAndAdd=function(t,r){this.x+=t.x*r,this.y+=t.y*r},e.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},e.prototype.dot=function(t){return this.x*t.x+this.y*t.y},e.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},e.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},e.prototype.distance=function(t){var r=this.x-t.x,n=this.y-t.y;return Math.sqrt(r*r+n*n)},e.prototype.distanceSquare=function(t){var r=this.x-t.x,n=this.y-t.y;return r*r+n*n},e.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},e.prototype.transform=function(t){if(!!t){var r=this.x,n=this.y;return this.x=t[0]*r+t[2]*n+t[4],this.y=t[1]*r+t[3]*n+t[5],this}},e.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},e.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},e.set=function(t,r,n){t.x=r,t.y=n},e.copy=function(t,r){t.x=r.x,t.y=r.y},e.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},e.lenSquare=function(t){return t.x*t.x+t.y*t.y},e.dot=function(t,r){return t.x*r.x+t.y*r.y},e.add=function(t,r,n){t.x=r.x+n.x,t.y=r.y+n.y},e.sub=function(t,r,n){t.x=r.x-n.x,t.y=r.y-n.y},e.scale=function(t,r,n){t.x=r.x*n,t.y=r.y*n},e.scaleAndAdd=function(t,r,n,i){t.x=r.x+n.x*i,t.y=r.y+n.y*i},e.lerp=function(t,r,n,i){var o=1-i;t.x=o*r.x+i*n.x,t.y=o*r.y+i*n.y},e}();const Le=hK;var A0=Math.min,M0=Math.max,el=new Le,rl=new Le,nl=new Le,il=new Le,ah=new Le,lh=new Le,dK=function(){function e(t,r,n,i){n<0&&(t=t+n,n=-n),i<0&&(r=r+i,i=-i),this.x=t,this.y=r,this.width=n,this.height=i}return e.prototype.union=function(t){var r=A0(t.x,this.x),n=A0(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=M0(t.x+t.width,this.x+this.width)-r:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=M0(t.y+t.height,this.y+this.height)-n:this.height=t.height,this.x=r,this.y=n},e.prototype.applyTransform=function(t){e.applyTransform(this,this,t)},e.prototype.calculateTransform=function(t){var r=this,n=t.width/r.width,i=t.height/r.height,o=af();return NS(o,o,[-r.x,-r.y]),fK(o,o,[n,i]),NS(o,o,[t.x,t.y]),o},e.prototype.intersect=function(t,r){if(!t)return!1;t instanceof e||(t=e.create(t));var n=this,i=n.x,o=n.x+n.width,s=n.y,a=n.y+n.height,l=t.x,u=t.x+t.width,c=t.y,f=t.y+t.height,h=!(o<l||u<i||a<c||f<s);if(r){var d=1/0,p=0,v=Math.abs(o-l),m=Math.abs(u-i),g=Math.abs(a-c),_=Math.abs(f-s),b=Math.min(v,m),w=Math.min(g,_);o<l||u<i?b>p&&(p=b,v<m?Le.set(lh,-v,0):Le.set(lh,m,0)):b<d&&(d=b,v<m?Le.set(ah,v,0):Le.set(ah,-m,0)),a<c||f<s?w>p&&(p=w,g<_?Le.set(lh,0,-g):Le.set(lh,0,_)):b<d&&(d=b,g<_?Le.set(ah,0,g):Le.set(ah,0,-_))}return r&&Le.copy(r,h?ah:lh),h},e.prototype.contain=function(t,r){var n=this;return t>=n.x&&t<=n.x+n.width&&r>=n.y&&r<=n.y+n.height},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copy=function(t){e.copy(this,t)},e.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},e.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},e.prototype.isZero=function(){return this.width===0||this.height===0},e.create=function(t){return new e(t.x,t.y,t.width,t.height)},e.copy=function(t,r){t.x=r.x,t.y=r.y,t.width=r.width,t.height=r.height},e.applyTransform=function(t,r,n){if(!n){t!==r&&e.copy(t,r);return}if(n[1]<1e-5&&n[1]>-1e-5&&n[2]<1e-5&&n[2]>-1e-5){var i=n[0],o=n[3],s=n[4],a=n[5];t.x=r.x*i+s,t.y=r.y*o+a,t.width=r.width*i,t.height=r.height*o,t.width<0&&(t.x+=t.width,t.width=-t.width),t.height<0&&(t.y+=t.height,t.height=-t.height);return}el.x=nl.x=r.x,el.y=il.y=r.y,rl.x=il.x=r.x+r.width,rl.y=nl.y=r.y+r.height,el.transform(n),il.transform(n),rl.transform(n),nl.transform(n),t.x=A0(el.x,rl.x,nl.x,il.x),t.y=A0(el.y,rl.y,nl.y,il.y);var l=M0(el.x,rl.x,nl.x,il.x),u=M0(el.y,rl.y,nl.y,il.y);t.width=l-t.x,t.height=u-t.y},e}();const ue=dK;var J9="silent";function pK(e,t,r){return{type:e,event:r,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:r.zrX,offsetY:r.zrY,gestureEvent:r.gestureEvent,pinchX:r.pinchX,pinchY:r.pinchY,pinchScale:r.pinchScale,wheelDelta:r.zrDelta,zrByTouch:r.zrByTouch,which:r.which,stop:vK}}function vK(){su(this.event)}var gK=function(e){Ce(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.handler=null,r}return t.prototype.dispose=function(){},t.prototype.setCursor=function(){},t}(Hi),uh=function(){function e(t,r){this.x=t,this.y=r}return e}(),mK=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],Oy=new ue(0,0,0,0),Q9=function(e){Ce(t,e);function t(r,n,i,o,s){var a=e.call(this)||this;return a._hovered=new uh(0,0),a.storage=r,a.painter=n,a.painterRoot=o,a._pointerSize=s,i=i||new gK,a.proxy=null,a.setHandlerProxy(i),a._draggingMgr=new ZZ(a),a}return t.prototype.setHandlerProxy=function(r){this.proxy&&this.proxy.dispose(),r&&(z(mK,function(n){r.on&&r.on(n,this[n],this)},this),r.handler=this),this.proxy=r},t.prototype.mousemove=function(r){var n=r.zrX,i=r.zrY,o=t7(this,n,i),s=this._hovered,a=s.target;a&&!a.__zr&&(s=this.findHover(s.x,s.y),a=s.target);var l=this._hovered=o?new uh(n,i):this.findHover(n,i),u=l.target,c=this.proxy;c.setCursor&&c.setCursor(u?u.cursor:"default"),a&&u!==a&&this.dispatchToElement(s,"mouseout",r),this.dispatchToElement(l,"mousemove",r),u&&u!==a&&this.dispatchToElement(l,"mouseover",r)},t.prototype.mouseout=function(r){var n=r.zrEventControl;n!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",r),n!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:r})},t.prototype.resize=function(){this._hovered=new uh(0,0)},t.prototype.dispatch=function(r,n){var i=this[r];i&&i.call(this,n)},t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},t.prototype.setCursorStyle=function(r){var n=this.proxy;n.setCursor&&n.setCursor(r)},t.prototype.dispatchToElement=function(r,n,i){r=r||{};var o=r.target;if(!(o&&o.silent)){for(var s="on"+n,a=pK(n,r,i);o&&(o[s]&&(a.cancelBubble=!!o[s].call(o,a)),o.trigger(n,a),o=o.__hostTarget?o.__hostTarget:o.parent,!a.cancelBubble););a.cancelBubble||(this.trigger(n,a),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[s]=="function"&&l[s].call(l,a),l.trigger&&l.trigger(n,a)}))}},t.prototype.findHover=function(r,n,i){var o=this.storage.getDisplayList(),s=new uh(r,n);if(qA(o,s,r,n,i),this._pointerSize&&!s.target){for(var a=[],l=this._pointerSize,u=l/2,c=new ue(r-u,n-u,l,l),f=o.length-1;f>=0;f--){var h=o[f];h!==i&&!h.ignore&&!h.ignoreCoarsePointer&&(!h.parent||!h.parent.ignoreCoarsePointer)&&(Oy.copy(h.getBoundingRect()),h.transform&&Oy.applyTransform(h.transform),Oy.intersect(c)&&a.push(h))}if(a.length)for(var d=4,p=Math.PI/12,v=Math.PI*2,m=0;m<u;m+=d)for(var g=0;g<v;g+=p){var _=r+m*Math.cos(g),b=n+m*Math.sin(g);if(qA(a,s,_,b,i),s.target)return s}}return s},t.prototype.processGesture=function(r,n){this._gestureMgr||(this._gestureMgr=new uK);var i=this._gestureMgr;n==="start"&&i.clear();var o=i.recognize(r,this.findHover(r.zrX,r.zrY,null).target,this.proxy.dom);if(n==="end"&&i.clear(),o){var s=o.type;r.gestureEvent=s;var a=new uh;a.target=o.target,this.dispatchToElement(a,s,o.event)}},t}(Hi);z(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){Q9.prototype[e]=function(t){var r=t.zrX,n=t.zrY,i=t7(this,r,n),o,s;if((e!=="mouseup"||!i)&&(o=this.findHover(r,n),s=o.target),e==="mousedown")this._downEl=s,this._downPoint=[t.zrX,t.zrY],this._upEl=s;else if(e==="mouseup")this._upEl=s;else if(e==="click"){if(this._downEl!==this._upEl||!this._downPoint||XZ(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(o,e,t)}});function _K(e,t,r){if(e[e.rectHover?"rectContain":"contain"](t,r)){for(var n=e,i=void 0,o=!1;n;){if(n.ignoreClip&&(o=!0),!o){var s=n.getClipPath();if(s&&!s.contain(t,r))return!1;n.silent&&(i=!0)}var a=n.__hostTarget;n=a||n.parent}return i?J9:!0}return!1}function qA(e,t,r,n,i){for(var o=e.length-1;o>=0;o--){var s=e[o],a=void 0;if(s!==i&&!s.ignore&&(a=_K(s,r,n))&&(!t.topTarget&&(t.topTarget=s),a!==J9)){t.target=s;break}}}function t7(e,t,r){var n=e.painter;return t<0||t>n.getWidth()||r<0||r>n.getHeight()}const yK=Q9;var e7=32,ch=7;function bK(e){for(var t=0;e>=e7;)t|=e&1,e>>=1;return e+t}function ZA(e,t,r,n){var i=t+1;if(i===r)return 1;if(n(e[i++],e[t])<0){for(;i<r&&n(e[i],e[i-1])<0;)i++;wK(e,t,i)}else for(;i<r&&n(e[i],e[i-1])>=0;)i++;return i-t}function wK(e,t,r){for(r--;t<r;){var n=e[t];e[t++]=e[r],e[r--]=n}}function KA(e,t,r,n,i){for(n===t&&n++;n<r;n++){for(var o=e[n],s=t,a=n,l;s<a;)l=s+a>>>1,i(o,e[l])<0?a=l:s=l+1;var u=n-s;switch(u){case 3:e[s+3]=e[s+2];case 2:e[s+2]=e[s+1];case 1:e[s+1]=e[s];break;default:for(;u>0;)e[s+u]=e[s+u-1],u--}e[s]=o}}function Ry(e,t,r,n,i,o){var s=0,a=0,l=1;if(o(e,t[r+i])>0){for(a=n-i;l<a&&o(e,t[r+i+l])>0;)s=l,l=(l<<1)+1,l<=0&&(l=a);l>a&&(l=a),s+=i,l+=i}else{for(a=i+1;l<a&&o(e,t[r+i-l])<=0;)s=l,l=(l<<1)+1,l<=0&&(l=a);l>a&&(l=a);var u=s;s=i-l,l=i-u}for(s++;s<l;){var c=s+(l-s>>>1);o(e,t[r+c])>0?s=c+1:l=c}return l}function Dy(e,t,r,n,i,o){var s=0,a=0,l=1;if(o(e,t[r+i])<0){for(a=i+1;l<a&&o(e,t[r+i-l])<0;)s=l,l=(l<<1)+1,l<=0&&(l=a);l>a&&(l=a);var u=s;s=i-l,l=i-u}else{for(a=n-i;l<a&&o(e,t[r+i+l])>=0;)s=l,l=(l<<1)+1,l<=0&&(l=a);l>a&&(l=a),s+=i,l+=i}for(s++;s<l;){var c=s+(l-s>>>1);o(e,t[r+c])<0?l=c:s=c+1}return l}function SK(e,t){var r=ch,n,i,o=0;e.length;var s=[];n=[],i=[];function a(d,p){n[o]=d,i[o]=p,o+=1}function l(){for(;o>1;){var d=o-2;if(d>=1&&i[d-1]<=i[d]+i[d+1]||d>=2&&i[d-2]<=i[d]+i[d-1])i[d-1]<i[d+1]&&d--;else if(i[d]>i[d+1])break;c(d)}}function u(){for(;o>1;){var d=o-2;d>0&&i[d-1]<i[d+1]&&d--,c(d)}}function c(d){var p=n[d],v=i[d],m=n[d+1],g=i[d+1];i[d]=v+g,d===o-3&&(n[d+1]=n[d+2],i[d+1]=i[d+2]),o--;var _=Dy(e[m],e,p,v,0,t);p+=_,v-=_,v!==0&&(g=Ry(e[p+v-1],e,m,g,g-1,t),g!==0&&(v<=g?f(p,v,m,g):h(p,v,m,g)))}function f(d,p,v,m){var g=0;for(g=0;g<p;g++)s[g]=e[d+g];var _=0,b=v,w=d;if(e[w++]=e[b++],--m===0){for(g=0;g<p;g++)e[w+g]=s[_+g];return}if(p===1){for(g=0;g<m;g++)e[w+g]=e[b+g];e[w+m]=s[_];return}for(var T=r,S,k,A;;){S=0,k=0,A=!1;do if(t(e[b],s[_])<0){if(e[w++]=e[b++],k++,S=0,--m===0){A=!0;break}}else if(e[w++]=s[_++],S++,k=0,--p===1){A=!0;break}while((S|k)<T);if(A)break;do{if(S=Dy(e[b],s,_,p,0,t),S!==0){for(g=0;g<S;g++)e[w+g]=s[_+g];if(w+=S,_+=S,p-=S,p<=1){A=!0;break}}if(e[w++]=e[b++],--m===0){A=!0;break}if(k=Ry(s[_],e,b,m,0,t),k!==0){for(g=0;g<k;g++)e[w+g]=e[b+g];if(w+=k,b+=k,m-=k,m===0){A=!0;break}}if(e[w++]=s[_++],--p===1){A=!0;break}T--}while(S>=ch||k>=ch);if(A)break;T<0&&(T=0),T+=2}if(r=T,r<1&&(r=1),p===1){for(g=0;g<m;g++)e[w+g]=e[b+g];e[w+m]=s[_]}else{if(p===0)throw new Error;for(g=0;g<p;g++)e[w+g]=s[_+g]}}function h(d,p,v,m){var g=0;for(g=0;g<m;g++)s[g]=e[v+g];var _=d+p-1,b=m-1,w=v+m-1,T=0,S=0;if(e[w--]=e[_--],--p===0){for(T=w-(m-1),g=0;g<m;g++)e[T+g]=s[g];return}if(m===1){for(w-=p,_-=p,S=w+1,T=_+1,g=p-1;g>=0;g--)e[S+g]=e[T+g];e[w]=s[b];return}for(var k=r;;){var A=0,C=0,x=!1;do if(t(s[b],e[_])<0){if(e[w--]=e[_--],A++,C=0,--p===0){x=!0;break}}else if(e[w--]=s[b--],C++,A=0,--m===1){x=!0;break}while((A|C)<k);if(x)break;do{if(A=p-Dy(s[b],e,d,p,p-1,t),A!==0){for(w-=A,_-=A,p-=A,S=w+1,T=_+1,g=A-1;g>=0;g--)e[S+g]=e[T+g];if(p===0){x=!0;break}}if(e[w--]=s[b--],--m===1){x=!0;break}if(C=m-Ry(e[_],s,0,m,m-1,t),C!==0){for(w-=C,b-=C,m-=C,S=w+1,T=b+1,g=0;g<C;g++)e[S+g]=s[T+g];if(m<=1){x=!0;break}}if(e[w--]=e[_--],--p===0){x=!0;break}k--}while(A>=ch||C>=ch);if(x)break;k<0&&(k=0),k+=2}if(r=k,r<1&&(r=1),m===1){for(w-=p,_-=p,S=w+1,T=_+1,g=p-1;g>=0;g--)e[S+g]=e[T+g];e[w]=s[b]}else{if(m===0)throw new Error;for(T=w-(m-1),g=0;g<m;g++)e[T+g]=s[g]}}return{mergeRuns:l,forceMergeRuns:u,pushRun:a}}function Ug(e,t,r,n){r||(r=0),n||(n=e.length);var i=n-r;if(!(i<2)){var o=0;if(i<e7){o=ZA(e,r,n,t),KA(e,r,n,r+o,t);return}var s=SK(e,t),a=bK(i);do{if(o=ZA(e,r,n,t),o<a){var l=i;l>a&&(l=a),KA(e,r,r+l,r+o,t),o=l}s.pushRun(r,o),s.mergeRuns(),i-=o,r+=o}while(i!==0);s.forceMergeRuns()}}var Ln=1,id=2,Ec=4,JA=!1;function Ny(){JA||(JA=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function QA(e,t){return e.zlevel===t.zlevel?e.z===t.z?e.z2-t.z2:e.z-t.z:e.zlevel-t.zlevel}var TK=function(){function e(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=QA}return e.prototype.traverse=function(t,r){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(t,r)},e.prototype.getDisplayList=function(t,r){r=r||!1;var n=this._displayList;return(t||!n.length)&&this.updateDisplayList(r),n},e.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var r=this._roots,n=this._displayList,i=0,o=r.length;i<o;i++)this._updateAndAddDisplayable(r[i],null,t);n.length=this._displayListLen,Ug(n,QA)},e.prototype._updateAndAddDisplayable=function(t,r,n){if(!(t.ignore&&!n)){t.beforeUpdate(),t.update(),t.afterUpdate();var i=t.getClipPath();if(t.ignoreClip)r=null;else if(i){r?r=r.slice():r=[];for(var o=i,s=t;o;)o.parent=s,o.updateTransform(),r.push(o),s=o,o=o.getClipPath()}if(t.childrenRef){for(var a=t.childrenRef(),l=0;l<a.length;l++){var u=a[l];t.__dirty&&(u.__dirty|=Ln),this._updateAndAddDisplayable(u,r,n)}t.__dirty=0}else{var c=t;r&&r.length?c.__clipPaths=r:c.__clipPaths&&c.__clipPaths.length>0&&(c.__clipPaths=[]),isNaN(c.z)&&(Ny(),c.z=0),isNaN(c.z2)&&(Ny(),c.z2=0),isNaN(c.zlevel)&&(Ny(),c.zlevel=0),this._displayList[this._displayListLen++]=c}var f=t.getDecalElement&&t.getDecalElement();f&&this._updateAndAddDisplayable(f,r,n);var h=t.getTextGuideLine();h&&this._updateAndAddDisplayable(h,r,n);var d=t.getTextContent();d&&this._updateAndAddDisplayable(d,r,n)}},e.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},e.prototype.delRoot=function(t){if(t instanceof Array){for(var r=0,n=t.length;r<n;r++)this.delRoot(t[r]);return}var i=he(this._roots,t);i>=0&&this._roots.splice(i,1)},e.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},e.prototype.getRoots=function(){return this._roots},e.prototype.dispose=function(){this._displayList=null,this._roots=null},e}();const kK=TK;var r7;r7=Zt.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){return setTimeout(e,16)};const FS=r7;var Wg={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quarticIn:function(e){return e*e*e*e},quarticOut:function(e){return 1- --e*e*e*e},quarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quinticIn:function(e){return e*e*e*e*e},quinticOut:function(e){return--e*e*e*e*e+1},quinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return .5*(1-Math.cos(Math.PI*e))},exponentialIn:function(e){return e===0?0:Math.pow(1024,e-1)},exponentialOut:function(e){return e===1?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),-(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)))},elasticOut:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/n)+1)},elasticInOut:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),(e*=2)<1?-.5*(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)):r*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*.5+1)},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},backInOut:function(e){var t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)},bounceIn:function(e){return 1-Wg.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(e){return e<.5?Wg.bounceIn(e*2)*.5:Wg.bounceOut(e*2-1)*.5+.5}};const n7=Wg;var x0=Math.pow,Sa=Math.sqrt,Lm=1e-8,i7=1e-4,t4=Sa(3),L0=1/3,wo=Pf(),ei=Pf(),Gc=Pf();function pa(e){return e>-Lm&&e<Lm}function o7(e){return e>Lm||e<-Lm}function ur(e,t,r,n,i){var o=1-i;return o*o*(o*e+3*i*t)+i*i*(i*n+3*o*r)}function e4(e,t,r,n,i){var o=1-i;return 3*(((t-e)*o+2*(r-t)*i)*o+(n-r)*i*i)}function Im(e,t,r,n,i,o){var s=n+3*(t-r)-e,a=3*(r-t*2+e),l=3*(t-e),u=e-i,c=a*a-3*s*l,f=a*l-9*s*u,h=l*l-3*a*u,d=0;if(pa(c)&&pa(f))if(pa(a))o[0]=0;else{var p=-l/a;p>=0&&p<=1&&(o[d++]=p)}else{var v=f*f-4*c*h;if(pa(v)){var m=f/c,p=-a/s+m,g=-m/2;p>=0&&p<=1&&(o[d++]=p),g>=0&&g<=1&&(o[d++]=g)}else if(v>0){var _=Sa(v),b=c*a+1.5*s*(-f+_),w=c*a+1.5*s*(-f-_);b<0?b=-x0(-b,L0):b=x0(b,L0),w<0?w=-x0(-w,L0):w=x0(w,L0);var p=(-a-(b+w))/(3*s);p>=0&&p<=1&&(o[d++]=p)}else{var T=(2*c*a-3*s*f)/(2*Sa(c*c*c)),S=Math.acos(T)/3,k=Sa(c),A=Math.cos(S),p=(-a-2*k*A)/(3*s),g=(-a+k*(A+t4*Math.sin(S)))/(3*s),C=(-a+k*(A-t4*Math.sin(S)))/(3*s);p>=0&&p<=1&&(o[d++]=p),g>=0&&g<=1&&(o[d++]=g),C>=0&&C<=1&&(o[d++]=C)}}return d}function s7(e,t,r,n,i){var o=6*r-12*t+6*e,s=9*t+3*n-3*e-9*r,a=3*t-3*e,l=0;if(pa(s)){if(o7(o)){var u=-a/o;u>=0&&u<=1&&(i[l++]=u)}}else{var c=o*o-4*s*a;if(pa(c))i[0]=-o/(2*s);else if(c>0){var f=Sa(c),u=(-o+f)/(2*s),h=(-o-f)/(2*s);u>=0&&u<=1&&(i[l++]=u),h>=0&&h<=1&&(i[l++]=h)}}return l}function Om(e,t,r,n,i,o){var s=(t-e)*i+e,a=(r-t)*i+t,l=(n-r)*i+r,u=(a-s)*i+s,c=(l-a)*i+a,f=(c-u)*i+u;o[0]=e,o[1]=s,o[2]=u,o[3]=f,o[4]=f,o[5]=c,o[6]=l,o[7]=n}function PK(e,t,r,n,i,o,s,a,l,u,c){var f,h=.005,d=1/0,p,v,m,g;wo[0]=l,wo[1]=u;for(var _=0;_<1;_+=.05)ei[0]=ur(e,r,i,s,_),ei[1]=ur(t,n,o,a,_),m=Wc(wo,ei),m<d&&(f=_,d=m);d=1/0;for(var b=0;b<32&&!(h<i7);b++)p=f-h,v=f+h,ei[0]=ur(e,r,i,s,p),ei[1]=ur(t,n,o,a,p),m=Wc(ei,wo),p>=0&&m<d?(f=p,d=m):(Gc[0]=ur(e,r,i,s,v),Gc[1]=ur(t,n,o,a,v),g=Wc(Gc,wo),v<=1&&g<d?(f=v,d=g):h*=.5);return c&&(c[0]=ur(e,r,i,s,f),c[1]=ur(t,n,o,a,f)),Sa(d)}function EK(e,t,r,n,i,o,s,a,l){for(var u=e,c=t,f=0,h=1/l,d=1;d<=l;d++){var p=d*h,v=ur(e,r,i,s,p),m=ur(t,n,o,a,p),g=v-u,_=m-c;f+=Math.sqrt(g*g+_*_),u=v,c=m}return f}function $r(e,t,r,n){var i=1-n;return i*(i*e+2*n*t)+n*n*r}function r4(e,t,r,n){return 2*((1-n)*(t-e)+n*(r-t))}function CK(e,t,r,n,i){var o=e-2*t+r,s=2*(t-e),a=e-n,l=0;if(pa(o)){if(o7(s)){var u=-a/s;u>=0&&u<=1&&(i[l++]=u)}}else{var c=s*s-4*o*a;if(pa(c)){var u=-s/(2*o);u>=0&&u<=1&&(i[l++]=u)}else if(c>0){var f=Sa(c),u=(-s+f)/(2*o),h=(-s-f)/(2*o);u>=0&&u<=1&&(i[l++]=u),h>=0&&h<=1&&(i[l++]=h)}}return l}function a7(e,t,r){var n=e+r-2*t;return n===0?.5:(e-t)/n}function Rm(e,t,r,n,i){var o=(t-e)*n+e,s=(r-t)*n+t,a=(s-o)*n+o;i[0]=e,i[1]=o,i[2]=a,i[3]=a,i[4]=s,i[5]=r}function AK(e,t,r,n,i,o,s,a,l){var u,c=.005,f=1/0;wo[0]=s,wo[1]=a;for(var h=0;h<1;h+=.05){ei[0]=$r(e,r,i,h),ei[1]=$r(t,n,o,h);var d=Wc(wo,ei);d<f&&(u=h,f=d)}f=1/0;for(var p=0;p<32&&!(c<i7);p++){var v=u-c,m=u+c;ei[0]=$r(e,r,i,v),ei[1]=$r(t,n,o,v);var d=Wc(ei,wo);if(v>=0&&d<f)u=v,f=d;else{Gc[0]=$r(e,r,i,m),Gc[1]=$r(t,n,o,m);var g=Wc(Gc,wo);m<=1&&g<f?(u=m,f=g):c*=.5}}return l&&(l[0]=$r(e,r,i,u),l[1]=$r(t,n,o,u)),Sa(f)}function MK(e,t,r,n,i,o,s){for(var a=e,l=t,u=0,c=1/s,f=1;f<=s;f++){var h=f*c,d=$r(e,r,i,h),p=$r(t,n,o,h),v=d-a,m=p-l;u+=Math.sqrt(v*v+m*m),a=d,l=p}return u}var xK=/cubic-bezier\(([0-9,\.e ]+)\)/;function l7(e){var t=e&&xK.exec(e);if(t){var r=t[1].split(","),n=+Po(r[0]),i=+Po(r[1]),o=+Po(r[2]),s=+Po(r[3]);if(isNaN(n+i+o+s))return;var a=[];return function(l){return l<=0?0:l>=1?1:Im(0,n,o,1,l,a)&&ur(0,i,s,1,a[0])}}}var LK=function(){function e(t){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=t.loop||!1,this.onframe=t.onframe||Hr,this.ondestroy=t.ondestroy||Hr,this.onrestart=t.onrestart||Hr,t.easing&&this.setEasing(t.easing)}return e.prototype.step=function(t,r){if(this._inited||(this._startTime=t+this._delay,this._inited=!0),this._paused){this._pausedTime+=r;return}var n=this._life,i=t-this._startTime-this._pausedTime,o=i/n;o<0&&(o=0),o=Math.min(o,1);var s=this.easingFunc,a=s?s(o):o;if(this.onframe(a),o===1)if(this.loop){var l=i%n;this._startTime=t-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){this._paused=!1},e.prototype.setEasing=function(t){this.easing=t,this.easingFunc=jt(t)?t:n7[t]||l7(t)},e}();const IK=LK;var u7=function(){function e(t){this.value=t}return e}(),OK=function(){function e(){this._len=0}return e.prototype.insert=function(t){var r=new u7(t);return this.insertEntry(r),r},e.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},e.prototype.remove=function(t){var r=t.prev,n=t.next;r?r.next=n:this.head=n,n?n.prev=r:this.tail=r,t.next=t.prev=null,this._len--},e.prototype.len=function(){return this._len},e.prototype.clear=function(){this.head=this.tail=null,this._len=0},e}(),RK=function(){function e(t){this._list=new OK,this._maxSize=10,this._map={},this._maxSize=t}return e.prototype.put=function(t,r){var n=this._list,i=this._map,o=null;if(i[t]==null){var s=n.len(),a=this._lastRemovedEntry;if(s>=this._maxSize&&s>0){var l=n.head;n.remove(l),delete i[l.key],o=l.value,this._lastRemovedEntry=l}a?a.value=r:a=new u7(r),a.key=t,n.insertEntry(a),i[t]=a}return o},e.prototype.get=function(t){var r=this._map[t],n=this._list;if(r!=null)return r!==n.tail&&(n.remove(r),n.insertEntry(r)),r.value},e.prototype.clear=function(){this._list.clear(),this._map={}},e.prototype.len=function(){return this._list.len()},e}();const $p=RK;var n4={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Fi(e){return e=Math.round(e),e<0?0:e>255?255:e}function DK(e){return e=Math.round(e),e<0?0:e>360?360:e}function np(e){return e<0?0:e>1?1:e}function Fy(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?Fi(parseFloat(t)/100*255):Fi(parseInt(t,10))}function Xl(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?np(parseFloat(t)/100):np(parseFloat(t))}function zy(e,t,r){return r<0?r+=1:r>1&&(r-=1),r*6<1?e+(t-e)*r*6:r*2<1?t:r*3<2?e+(t-e)*(2/3-r)*6:e}function va(e,t,r){return e+(t-e)*r}function qn(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}function zS(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}var c7=new $p(20),I0=null;function Hu(e,t){I0&&zS(I0,t),I0=c7.put(e,I0||t.slice())}function ni(e,t){if(!!e){t=t||[];var r=c7.get(e);if(r)return zS(t,r);e=e+"";var n=e.replace(/ /g,"").toLowerCase();if(n in n4)return zS(t,n4[n]),Hu(e,t),t;var i=n.length;if(n.charAt(0)==="#"){if(i===4||i===5){var o=parseInt(n.slice(1,4),16);if(!(o>=0&&o<=4095)){qn(t,0,0,0,1);return}return qn(t,(o&3840)>>4|(o&3840)>>8,o&240|(o&240)>>4,o&15|(o&15)<<4,i===5?parseInt(n.slice(4),16)/15:1),Hu(e,t),t}else if(i===7||i===9){var o=parseInt(n.slice(1,7),16);if(!(o>=0&&o<=16777215)){qn(t,0,0,0,1);return}return qn(t,(o&16711680)>>16,(o&65280)>>8,o&255,i===9?parseInt(n.slice(7),16)/255:1),Hu(e,t),t}return}var s=n.indexOf("("),a=n.indexOf(")");if(s!==-1&&a+1===i){var l=n.substr(0,s),u=n.substr(s+1,a-(s+1)).split(","),c=1;switch(l){case"rgba":if(u.length!==4)return u.length===3?qn(t,+u[0],+u[1],+u[2],1):qn(t,0,0,0,1);c=Xl(u.pop());case"rgb":if(u.length>=3)return qn(t,Fy(u[0]),Fy(u[1]),Fy(u[2]),u.length===3?c:Xl(u[3])),Hu(e,t),t;qn(t,0,0,0,1);return;case"hsla":if(u.length!==4){qn(t,0,0,0,1);return}return u[3]=Xl(u[3]),BS(u,t),Hu(e,t),t;case"hsl":if(u.length!==3){qn(t,0,0,0,1);return}return BS(u,t),Hu(e,t),t;default:return}}qn(t,0,0,0,1)}}function BS(e,t){var r=(parseFloat(e[0])%360+360)%360/360,n=Xl(e[1]),i=Xl(e[2]),o=i<=.5?i*(n+1):i+n-i*n,s=i*2-o;return t=t||[],qn(t,Fi(zy(s,o,r+1/3)*255),Fi(zy(s,o,r)*255),Fi(zy(s,o,r-1/3)*255),1),e.length===4&&(t[3]=e[3]),t}function NK(e){if(!!e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.min(t,r,n),o=Math.max(t,r,n),s=o-i,a=(o+i)/2,l,u;if(s===0)l=0,u=0;else{a<.5?u=s/(o+i):u=s/(2-o-i);var c=((o-t)/6+s/2)/s,f=((o-r)/6+s/2)/s,h=((o-n)/6+s/2)/s;t===o?l=h-f:r===o?l=1/3+c-h:n===o&&(l=2/3+f-c),l<0&&(l+=1),l>1&&(l-=1)}var d=[l*360,u,a];return e[3]!=null&&d.push(e[3]),d}}function i4(e,t){var r=ni(e);if(r){for(var n=0;n<3;n++)t<0?r[n]=r[n]*(1-t)|0:r[n]=(255-r[n])*t+r[n]|0,r[n]>255?r[n]=255:r[n]<0&&(r[n]=0);return ds(r,r.length===4?"rgba":"rgb")}}function By(e,t,r){if(!(!(t&&t.length)||!(e>=0&&e<=1))){r=r||[];var n=e*(t.length-1),i=Math.floor(n),o=Math.ceil(n),s=t[i],a=t[o],l=n-i;return r[0]=Fi(va(s[0],a[0],l)),r[1]=Fi(va(s[1],a[1],l)),r[2]=Fi(va(s[2],a[2],l)),r[3]=np(va(s[3],a[3],l)),r}}function FK(e,t,r){if(!(!(t&&t.length)||!(e>=0&&e<=1))){var n=e*(t.length-1),i=Math.floor(n),o=Math.ceil(n),s=ni(t[i]),a=ni(t[o]),l=n-i,u=ds([Fi(va(s[0],a[0],l)),Fi(va(s[1],a[1],l)),Fi(va(s[2],a[2],l)),np(va(s[3],a[3],l))],"rgba");return r?{color:u,leftIndex:i,rightIndex:o,value:n}:u}}function $y(e,t,r,n){var i=ni(e);if(e)return i=NK(i),t!=null&&(i[0]=DK(t)),r!=null&&(i[1]=Xl(r)),n!=null&&(i[2]=Xl(n)),ds(BS(i),"rgba")}function $S(e,t){var r=ni(e);if(r&&t!=null)return r[3]=np(t),ds(r,"rgba")}function ds(e,t){if(!(!e||!e.length)){var r=e[0]+","+e[1]+","+e[2];return(t==="rgba"||t==="hsva"||t==="hsla")&&(r+=","+e[3]),t+"("+r+")"}}function Dm(e,t){var r=ni(e);return r?(.299*r[0]+.587*r[1]+.114*r[2])*r[3]/255+(1-r[3])*t:0}function zK(e){return e.type==="linear"}function BK(e){return e.type==="radial"}(function(){return Zt.hasGlobalWindow&&jt(window.btoa)?function(e){return window.btoa(unescape(e))}:typeof Buffer<"u"?function(e){return Buffer.from(e).toString("base64")}:function(e){return null}})();var VS=Array.prototype.slice;function rs(e,t,r){return(t-e)*r+e}function Vy(e,t,r,n){for(var i=t.length,o=0;o<i;o++)e[o]=rs(t[o],r[o],n);return e}function $K(e,t,r,n){for(var i=t.length,o=i&&t[0].length,s=0;s<i;s++){e[s]||(e[s]=[]);for(var a=0;a<o;a++)e[s][a]=rs(t[s][a],r[s][a],n)}return e}function O0(e,t,r,n){for(var i=t.length,o=0;o<i;o++)e[o]=t[o]+r[o]*n;return e}function o4(e,t,r,n){for(var i=t.length,o=i&&t[0].length,s=0;s<i;s++){e[s]||(e[s]=[]);for(var a=0;a<o;a++)e[s][a]=t[s][a]+r[s][a]*n}return e}function VK(e,t){for(var r=e.length,n=t.length,i=r>n?t:e,o=Math.min(r,n),s=i[o-1]||{color:[0,0,0,0],offset:0},a=o;a<Math.max(r,n);a++)i.push({offset:s.offset,color:s.color.slice()})}function UK(e,t,r){var n=e,i=t;if(!(!n.push||!i.push)){var o=n.length,s=i.length;if(o!==s){var a=o>s;if(a)n.length=s;else for(var l=o;l<s;l++)n.push(r===1?i[l]:VS.call(i[l]))}for(var u=n[0]&&n[0].length,l=0;l<n.length;l++)if(r===1)isNaN(n[l])&&(n[l]=i[l]);else for(var c=0;c<u;c++)isNaN(n[l][c])&&(n[l][c]=i[l][c])}}function Ad(e){if(Yr(e)){var t=e.length;if(Yr(e[0])){for(var r=[],n=0;n<t;n++)r.push(VS.call(e[n]));return r}return VS.call(e)}return e}function jg(e){return e[0]=Math.floor(e[0])||0,e[1]=Math.floor(e[1])||0,e[2]=Math.floor(e[2])||0,e[3]=e[3]==null?1:e[3],"rgba("+e.join(",")+")"}function WK(e){return Yr(e&&e[0])?2:1}var R0=0,Gg=1,f7=2,od=3,US=4,WS=5,s4=6;function a4(e){return e===US||e===WS}function D0(e){return e===Gg||e===f7}var fh=[0,0,0,0],jK=function(){function e(t){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=t}return e.prototype.isFinished=function(){return this._finished},e.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},e.prototype.needsAnimate=function(){return this.keyframes.length>=1},e.prototype.getAdditiveTrack=function(){return this._additiveTrack},e.prototype.addKeyframe=function(t,r,n){this._needsSort=!0;var i=this.keyframes,o=i.length,s=!1,a=s4,l=r;if(Yr(r)){var u=WK(r);a=u,(u===1&&!Se(r[0])||u===2&&!Se(r[0][0]))&&(s=!0)}else if(Se(r)&&!Mm(r))a=R0;else if(Mt(r))if(!isNaN(+r))a=R0;else{var c=ni(r);c&&(l=c,a=od)}else if(q1(r)){var f=at({},l);f.colorStops=Lt(r.colorStops,function(d){return{offset:d.offset,color:ni(d.color)}}),zK(r)?a=US:BK(r)&&(a=WS),l=f}o===0?this.valType=a:(a!==this.valType||a===s4)&&(s=!0),this.discrete=this.discrete||s;var h={time:t,value:l,rawValue:r,percent:0};return n&&(h.easing=n,h.easingFunc=jt(n)?n:n7[n]||l7(n)),i.push(h),h},e.prototype.prepare=function(t,r){var n=this.keyframes;this._needsSort&&n.sort(function(v,m){return v.time-m.time});for(var i=this.valType,o=n.length,s=n[o-1],a=this.discrete,l=D0(i),u=a4(i),c=0;c<o;c++){var f=n[c],h=f.value,d=s.value;f.percent=f.time/t,a||(l&&c!==o-1?UK(h,d,i):u&&VK(h.colorStops,d.colorStops))}if(!a&&i!==WS&&r&&this.needsAnimate()&&r.needsAnimate()&&i===r.valType&&!r._finished){this._additiveTrack=r;for(var p=n[0].value,c=0;c<o;c++)i===R0?n[c].additiveValue=n[c].value-p:i===od?n[c].additiveValue=O0([],n[c].value,p,-1):D0(i)&&(n[c].additiveValue=i===Gg?O0([],n[c].value,p,-1):o4([],n[c].value,p,-1))}},e.prototype.step=function(t,r){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var n=this._additiveTrack!=null,i=n?"additiveValue":"value",o=this.valType,s=this.keyframes,a=s.length,l=this.propName,u=o===od,c,f=this._lastFr,h=Math.min,d,p;if(a===1)d=p=s[0];else{if(r<0)c=0;else if(r<this._lastFrP){var v=h(f+1,a-1);for(c=v;c>=0&&!(s[c].percent<=r);c--);c=h(c,a-2)}else{for(c=f;c<a&&!(s[c].percent>r);c++);c=h(c-1,a-2)}p=s[c+1],d=s[c]}if(!!(d&&p)){this._lastFr=c,this._lastFrP=r;var m=p.percent-d.percent,g=m===0?1:h((r-d.percent)/m,1);p.easingFunc&&(g=p.easingFunc(g));var _=n?this._additiveValue:u?fh:t[l];if((D0(o)||u)&&!_&&(_=this._additiveValue=[]),this.discrete)t[l]=g<1?d.rawValue:p.rawValue;else if(D0(o))o===Gg?Vy(_,d[i],p[i],g):$K(_,d[i],p[i],g);else if(a4(o)){var b=d[i],w=p[i],T=o===US;t[l]={type:T?"linear":"radial",x:rs(b.x,w.x,g),y:rs(b.y,w.y,g),colorStops:Lt(b.colorStops,function(k,A){var C=w.colorStops[A];return{offset:rs(k.offset,C.offset,g),color:jg(Vy([],k.color,C.color,g))}}),global:w.global},T?(t[l].x2=rs(b.x2,w.x2,g),t[l].y2=rs(b.y2,w.y2,g)):t[l].r=rs(b.r,w.r,g)}else if(u)Vy(_,d[i],p[i],g),n||(t[l]=jg(_));else{var S=rs(d[i],p[i],g);n?this._additiveValue=S:t[l]=S}n&&this._addToTarget(t)}}},e.prototype._addToTarget=function(t){var r=this.valType,n=this.propName,i=this._additiveValue;r===R0?t[n]=t[n]+i:r===od?(ni(t[n],fh),O0(fh,fh,i,1),t[n]=jg(fh)):r===Gg?O0(t[n],t[n],i,1):r===f7&&o4(t[n],t[n],i,1)},e}(),GK=function(){function e(t,r,n,i){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=t,this._loop=r,r&&i){zk("Can' use additive animation on looped animation.");return}this._additiveAnimators=i,this._allowDiscrete=n}return e.prototype.getMaxTime=function(){return this._maxTime},e.prototype.getDelay=function(){return this._delay},e.prototype.getLoop=function(){return this._loop},e.prototype.getTarget=function(){return this._target},e.prototype.changeTarget=function(t){this._target=t},e.prototype.when=function(t,r,n){return this.whenWithKeys(t,r,ge(r),n)},e.prototype.whenWithKeys=function(t,r,n,i){for(var o=this._tracks,s=0;s<n.length;s++){var a=n[s],l=o[a];if(!l){l=o[a]=new jK(a);var u=void 0,c=this._getAdditiveTrack(a);if(c){var f=c.keyframes,h=f[f.length-1];u=h&&h.value,c.valType===od&&u&&(u=jg(u))}else u=this._target[a];if(u==null)continue;t>0&&l.addKeyframe(0,Ad(u),i),this._trackKeys.push(a)}l.addKeyframe(t,Ad(r[a]),i)}return this._maxTime=Math.max(this._maxTime,t),this},e.prototype.pause=function(){this._clip.pause(),this._paused=!0},e.prototype.resume=function(){this._clip.resume(),this._paused=!1},e.prototype.isPaused=function(){return!!this._paused},e.prototype.duration=function(t){return this._maxTime=t,this._force=!0,this},e.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var r=t.length,n=0;n<r;n++)t[n].call(this)},e.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,r=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,r)for(var n=0;n<r.length;n++)r[n].call(this)},e.prototype._setTracksFinished=function(){for(var t=this._tracks,r=this._trackKeys,n=0;n<r.length;n++)t[r[n]].setFinished()},e.prototype._getAdditiveTrack=function(t){var r,n=this._additiveAnimators;if(n)for(var i=0;i<n.length;i++){var o=n[i].getTrack(t);o&&(r=o)}return r},e.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var r=this,n=[],i=this._maxTime||0,o=0;o<this._trackKeys.length;o++){var s=this._trackKeys[o],a=this._tracks[s],l=this._getAdditiveTrack(s),u=a.keyframes,c=u.length;if(a.prepare(i,l),a.needsAnimate())if(!this._allowDiscrete&&a.discrete){var f=u[c-1];f&&(r._target[a.propName]=f.rawValue),a.setFinished()}else n.push(a)}if(n.length||this._force){var h=new IK({life:i,loop:this._loop,delay:this._delay||0,onframe:function(d){r._started=2;var p=r._additiveAnimators;if(p){for(var v=!1,m=0;m<p.length;m++)if(p[m]._clip){v=!0;break}v||(r._additiveAnimators=null)}for(var m=0;m<n.length;m++)n[m].step(r._target,d);var g=r._onframeCbs;if(g)for(var m=0;m<g.length;m++)g[m](r._target,d)},ondestroy:function(){r._doneCallback()}});this._clip=h,this.animation&&this.animation.addClip(h),t&&h.setEasing(t)}else this._doneCallback();return this}},e.prototype.stop=function(t){if(!!this._clip){var r=this._clip;t&&r.onframe(1),this._abortedCallback()}},e.prototype.delay=function(t){return this._delay=t,this},e.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},e.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},e.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},e.prototype.getClip=function(){return this._clip},e.prototype.getTrack=function(t){return this._tracks[t]},e.prototype.getTracks=function(){var t=this;return Lt(this._trackKeys,function(r){return t._tracks[r]})},e.prototype.stopTracks=function(t,r){if(!t.length||!this._clip)return!0;for(var n=this._tracks,i=this._trackKeys,o=0;o<t.length;o++){var s=n[t[o]];s&&!s.isFinished()&&(r?s.step(this._target,1):this._started===1&&s.step(this._target,0),s.setFinished())}for(var a=!0,o=0;o<i.length;o++)if(!n[i[o]].isFinished()){a=!1;break}return a&&this._abortedCallback(),a},e.prototype.saveTo=function(t,r,n){if(!!t){r=r||this._trackKeys;for(var i=0;i<r.length;i++){var o=r[i],s=this._tracks[o];if(!(!s||s.isFinished())){var a=s.keyframes,l=a[n?0:a.length-1];l&&(t[o]=Ad(l.rawValue))}}}},e.prototype.__changeFinalValue=function(t,r){r=r||ge(t);for(var n=0;n<r.length;n++){var i=r[n],o=this._tracks[i];if(!!o){var s=o.keyframes;if(s.length>1){var a=s.pop();o.addKeyframe(a.time,t[i]),o.prepare(this._maxTime,o.getAdditiveTrack())}}}},e}();const jk=GK;function Ic(){return new Date().getTime()}var HK=function(e){Ce(t,e);function t(r){var n=e.call(this)||this;return n._running=!1,n._time=0,n._pausedTime=0,n._pauseStart=0,n._paused=!1,r=r||{},n.stage=r.stage||{},n}return t.prototype.addClip=function(r){r.animation&&this.removeClip(r),this._head?(this._tail.next=r,r.prev=this._tail,r.next=null,this._tail=r):this._head=this._tail=r,r.animation=this},t.prototype.addAnimator=function(r){r.animation=this;var n=r.getClip();n&&this.addClip(n)},t.prototype.removeClip=function(r){if(!!r.animation){var n=r.prev,i=r.next;n?n.next=i:this._head=i,i?i.prev=n:this._tail=n,r.next=r.prev=r.animation=null}},t.prototype.removeAnimator=function(r){var n=r.getClip();n&&this.removeClip(n),r.animation=null},t.prototype.update=function(r){for(var n=Ic()-this._pausedTime,i=n-this._time,o=this._head;o;){var s=o.next,a=o.step(n,i);a&&(o.ondestroy(),this.removeClip(o)),o=s}this._time=n,r||(this.trigger("frame",i),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var r=this;this._running=!0;function n(){r._running&&(FS(n),!r._paused&&r.update())}FS(n)},t.prototype.start=function(){this._running||(this._time=Ic(),this._pausedTime=0,this._startLoop())},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){this._paused||(this._pauseStart=Ic(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=Ic()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var r=this._head;r;){var n=r.next;r.prev=r.next=r.animation=null,r=n}this._head=this._tail=null},t.prototype.isFinished=function(){return this._head==null},t.prototype.animate=function(r,n){n=n||{},this.start();var i=new jk(r,n.loop);return this.addAnimator(i),i},t}(Hi);const XK=HK;var YK=300,Uy=Zt.domSupported,Wy=function(){var e=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],t=["touchstart","touchend","touchmove"],r={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},n=Lt(e,function(i){var o=i.replace("mouse","pointer");return r.hasOwnProperty(o)?o:i});return{mouse:e,touch:t,pointer:n}}(),l4={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},u4=!1;function jS(e){var t=e.pointerType;return t==="pen"||t==="touch"}function qK(e){e.touching=!0,e.touchTimer!=null&&(clearTimeout(e.touchTimer),e.touchTimer=null),e.touchTimer=setTimeout(function(){e.touching=!1,e.touchTimer=null},700)}function jy(e){e&&(e.zrByTouch=!0)}function ZK(e,t){return Zn(e.dom,new KK(e,t),!0)}function h7(e,t){for(var r=t,n=!1;r&&r.nodeType!==9&&!(n=r.domBelongToZr||r!==t&&r===e.painterRoot);)r=r.parentNode;return n}var KK=function(){function e(t,r){this.stopPropagation=Hr,this.stopImmediatePropagation=Hr,this.preventDefault=Hr,this.type=r.type,this.target=this.currentTarget=t.dom,this.pointerType=r.pointerType,this.clientX=r.clientX,this.clientY=r.clientY}return e}(),Ti={mousedown:function(e){e=Zn(this.dom,e),this.__mayPointerCapture=[e.zrX,e.zrY],this.trigger("mousedown",e)},mousemove:function(e){e=Zn(this.dom,e);var t=this.__mayPointerCapture;t&&(e.zrX!==t[0]||e.zrY!==t[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",e)},mouseup:function(e){e=Zn(this.dom,e),this.__togglePointerCapture(!1),this.trigger("mouseup",e)},mouseout:function(e){e=Zn(this.dom,e);var t=e.toElement||e.relatedTarget;h7(this,t)||(this.__pointerCapturing&&(e.zrEventControl="no_globalout"),this.trigger("mouseout",e))},wheel:function(e){u4=!0,e=Zn(this.dom,e),this.trigger("mousewheel",e)},mousewheel:function(e){u4||(e=Zn(this.dom,e),this.trigger("mousewheel",e))},touchstart:function(e){e=Zn(this.dom,e),jy(e),this.__lastTouchMoment=new Date,this.handler.processGesture(e,"start"),Ti.mousemove.call(this,e),Ti.mousedown.call(this,e)},touchmove:function(e){e=Zn(this.dom,e),jy(e),this.handler.processGesture(e,"change"),Ti.mousemove.call(this,e)},touchend:function(e){e=Zn(this.dom,e),jy(e),this.handler.processGesture(e,"end"),Ti.mouseup.call(this,e),+new Date-+this.__lastTouchMoment<YK&&Ti.click.call(this,e)},pointerdown:function(e){Ti.mousedown.call(this,e)},pointermove:function(e){jS(e)||Ti.mousemove.call(this,e)},pointerup:function(e){Ti.mouseup.call(this,e)},pointerout:function(e){jS(e)||Ti.mouseout.call(this,e)}};z(["click","dblclick","contextmenu"],function(e){Ti[e]=function(t){t=Zn(this.dom,t),this.trigger(e,t)}});var GS={pointermove:function(e){jS(e)||GS.mousemove.call(this,e)},pointerup:function(e){GS.mouseup.call(this,e)},mousemove:function(e){this.trigger("mousemove",e)},mouseup:function(e){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",e),t&&(e.zrEventControl="only_globalout",this.trigger("mouseout",e))}};function JK(e,t){var r=t.domHandlers;Zt.pointerEventsSupported?z(Wy.pointer,function(n){Hg(t,n,function(i){r[n].call(e,i)})}):(Zt.touchEventsSupported&&z(Wy.touch,function(n){Hg(t,n,function(i){r[n].call(e,i),qK(t)})}),z(Wy.mouse,function(n){Hg(t,n,function(i){i=Vk(i),t.touching||r[n].call(e,i)})}))}function QK(e,t){Zt.pointerEventsSupported?z(l4.pointer,r):Zt.touchEventsSupported||z(l4.mouse,r);function r(n){function i(o){o=Vk(o),h7(e,o.target)||(o=ZK(e,o),t.domHandlers[n].call(e,o))}Hg(t,n,i,{capture:!0})}}function Hg(e,t,r,n){e.mounted[t]=r,e.listenerOpts[t]=n,aK(e.domTarget,t,r,n)}function Gy(e){var t=e.mounted;for(var r in t)t.hasOwnProperty(r)&&lK(e.domTarget,r,t[r],e.listenerOpts[r]);e.mounted={}}var c4=function(){function e(t,r){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=r}return e}(),tJ=function(e){Ce(t,e);function t(r,n){var i=e.call(this)||this;return i.__pointerCapturing=!1,i.dom=r,i.painterRoot=n,i._localHandlerScope=new c4(r,Ti),Uy&&(i._globalHandlerScope=new c4(document,GS)),JK(i,i._localHandlerScope),i}return t.prototype.dispose=function(){Gy(this._localHandlerScope),Uy&&Gy(this._globalHandlerScope)},t.prototype.setCursor=function(r){this.dom.style&&(this.dom.style.cursor=r||"default")},t.prototype.__togglePointerCapture=function(r){if(this.__mayPointerCapture=null,Uy&&+this.__pointerCapturing^+r){this.__pointerCapturing=r;var n=this._globalHandlerScope;r?QK(this,n):Gy(n)}},t}(Hi);const eJ=tJ;var d7=1;Zt.hasGlobalWindow&&(d7=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var Nm=d7,HS=.4,XS="#333",YS="#ccc",rJ="#eee",f4=Uk,h4=5e-5;function ol(e){return e>h4||e<-h4}var sl=[],Xu=[],Hy=af(),Xy=Math.abs,zl=function(){function e(){}return e.prototype.getLocalTransform=function(t){return e.getLocalTransform(this,t)},e.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},e.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},e.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},e.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},e.prototype.needLocalTransform=function(){return ol(this.rotation)||ol(this.x)||ol(this.y)||ol(this.scaleX-1)||ol(this.scaleY-1)||ol(this.skewX)||ol(this.skewY)},e.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,r=this.needLocalTransform(),n=this.transform;if(!(r||t)){n&&f4(n);return}n=n||af(),r?this.getLocalTransform(n):f4(n),t&&(r?jc(n,t,n):K9(n,t)),this.transform=n,this._resolveGlobalScaleRatio(n)},e.prototype._resolveGlobalScaleRatio=function(t){var r=this.globalScaleRatio;if(r!=null&&r!==1){this.getGlobalScale(sl);var n=sl[0]<0?-1:1,i=sl[1]<0?-1:1,o=((sl[0]-n)*r+n)/sl[0]||0,s=((sl[1]-i)*r+i)/sl[1]||0;t[0]*=o,t[1]*=o,t[2]*=s,t[3]*=s}this.invTransform=this.invTransform||af(),K1(this.invTransform,t)},e.prototype.getComputedTransform=function(){for(var t=this,r=[];t;)r.push(t),t=t.parent;for(;t=r.pop();)t.updateTransform();return this.transform},e.prototype.setLocalTransform=function(t){if(!!t){var r=t[0]*t[0]+t[1]*t[1],n=t[2]*t[2]+t[3]*t[3],i=Math.atan2(t[1],t[0]),o=Math.PI/2+i-Math.atan2(t[3],t[2]);n=Math.sqrt(n)*Math.cos(o),r=Math.sqrt(r),this.skewX=o,this.skewY=0,this.rotation=-i,this.x=+t[4],this.y=+t[5],this.scaleX=r,this.scaleY=n,this.originX=0,this.originY=0}},e.prototype.decomposeTransform=function(){if(!!this.transform){var t=this.parent,r=this.transform;t&&t.transform&&(jc(Xu,t.invTransform,r),r=Xu);var n=this.originX,i=this.originY;(n||i)&&(Hy[4]=n,Hy[5]=i,jc(Xu,r,Hy),Xu[4]-=n,Xu[5]-=i,r=Xu),this.setLocalTransform(r)}},e.prototype.getGlobalScale=function(t){var r=this.transform;return t=t||[],r?(t[0]=Math.sqrt(r[0]*r[0]+r[1]*r[1]),t[1]=Math.sqrt(r[2]*r[2]+r[3]*r[3]),r[0]<0&&(t[0]=-t[0]),r[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},e.prototype.transformCoordToLocal=function(t,r){var n=[t,r],i=this.invTransform;return i&&on(n,n,i),n},e.prototype.transformCoordToGlobal=function(t,r){var n=[t,r],i=this.transform;return i&&on(n,n,i),n},e.prototype.getLineScale=function(){var t=this.transform;return t&&Xy(t[0]-1)>1e-10&&Xy(t[3]-1)>1e-10?Math.sqrt(Xy(t[0]*t[3]-t[2]*t[1])):1},e.prototype.copyTransform=function(t){nJ(this,t)},e.getLocalTransform=function(t,r){r=r||[];var n=t.originX||0,i=t.originY||0,o=t.scaleX,s=t.scaleY,a=t.anchorX,l=t.anchorY,u=t.rotation||0,c=t.x,f=t.y,h=t.skewX?Math.tan(t.skewX):0,d=t.skewY?Math.tan(-t.skewY):0;if(n||i||a||l){var p=n+a,v=i+l;r[4]=-p*o-h*v*s,r[5]=-v*s-d*p*o}else r[4]=r[5]=0;return r[0]=o,r[3]=s,r[1]=d*o,r[2]=h*s,u&&Wk(r,r,u),r[4]+=n+c,r[5]+=i+f,r},e.initDefaultProps=function(){var t=e.prototype;t.scaleX=t.scaleY=t.globalScaleRatio=1,t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0}(),e}(),Io=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function nJ(e,t){for(var r=0;r<Io.length;r++){var n=Io[r];e[n]=t[n]}}var d4={};function On(e,t){t=t||ou;var r=d4[t];r||(r=d4[t]=new $p(500));var n=r.get(e);return n==null&&(n=bu.measureText(e,t).width,r.put(e,n)),n}function p4(e,t,r,n){var i=On(e,t),o=Hk(t),s=sd(0,i,r),a=Cc(0,o,n),l=new ue(s,a,i,o);return l}function Gk(e,t,r,n){var i=((e||"")+"").split(`
`),o=i.length;if(o===1)return p4(i[0],t,r,n);for(var s=new ue(0,0,0,0),a=0;a<i.length;a++){var l=p4(i[a],t,r,n);a===0?s.copy(l):s.union(l)}return s}function sd(e,t,r){return r==="right"?e-=t:r==="center"&&(e-=t/2),e}function Cc(e,t,r){return r==="middle"?e-=t/2:r==="bottom"&&(e-=t),e}function Hk(e){return On("\u56FD",e)}function ms(e,t){return typeof e=="string"?e.lastIndexOf("%")>=0?parseFloat(e)/100*t:parseFloat(e):e}function Fm(e,t,r){var n=t.position||"inside",i=t.distance!=null?t.distance:5,o=r.height,s=r.width,a=o/2,l=r.x,u=r.y,c="left",f="top";if(n instanceof Array)l+=ms(n[0],r.width),u+=ms(n[1],r.height),c=null,f=null;else switch(n){case"left":l-=i,u+=a,c="right",f="middle";break;case"right":l+=i+s,u+=a,f="middle";break;case"top":l+=s/2,u-=i,c="center",f="bottom";break;case"bottom":l+=s/2,u+=o+i,c="center";break;case"inside":l+=s/2,u+=a,c="center",f="middle";break;case"insideLeft":l+=i,u+=a,f="middle";break;case"insideRight":l+=s-i,u+=a,c="right",f="middle";break;case"insideTop":l+=s/2,u+=i,c="center";break;case"insideBottom":l+=s/2,u+=o-i,c="center",f="bottom";break;case"insideTopLeft":l+=i,u+=i;break;case"insideTopRight":l+=s-i,u+=i,c="right";break;case"insideBottomLeft":l+=i,u+=o-i,f="bottom";break;case"insideBottomRight":l+=s-i,u+=o-i,c="right",f="bottom";break}return e=e||{},e.x=l,e.y=u,e.align=c,e.verticalAlign=f,e}var Yy="__zr_normal__",qy=Io.concat(["ignore"]),iJ=wu(Io,function(e,t){return e[t]=!0,e},{ignore:!1}),Yu={},oJ=new ue(0,0,0,0),Xk=function(){function e(t){this.id=j9(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return e.prototype._init=function(t){this.attr(t)},e.prototype.drift=function(t,r,n){switch(this.draggable){case"horizontal":r=0;break;case"vertical":t=0;break}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=t,i[5]+=r,this.decomposeTransform(),this.markRedraw()},e.prototype.beforeUpdate=function(){},e.prototype.afterUpdate=function(){},e.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},e.prototype.updateInnerText=function(t){var r=this._textContent;if(r&&(!r.ignore||t)){this.textConfig||(this.textConfig={});var n=this.textConfig,i=n.local,o=r.innerTransformable,s=void 0,a=void 0,l=!1;o.parent=i?this:null;var u=!1;if(o.copyTransform(r),n.position!=null){var c=oJ;n.layoutRect?c.copy(n.layoutRect):c.copy(this.getBoundingRect()),i||c.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(Yu,n,c):Fm(Yu,n,c),o.x=Yu.x,o.y=Yu.y,s=Yu.align,a=Yu.verticalAlign;var f=n.origin;if(f&&n.rotation!=null){var h=void 0,d=void 0;f==="center"?(h=c.width*.5,d=c.height*.5):(h=ms(f[0],c.width),d=ms(f[1],c.height)),u=!0,o.originX=-o.x+h+(i?0:c.x),o.originY=-o.y+d+(i?0:c.y)}}n.rotation!=null&&(o.rotation=n.rotation);var p=n.offset;p&&(o.x+=p[0],o.y+=p[1],u||(o.originX=-p[0],o.originY=-p[1]));var v=n.inside==null?typeof n.position=="string"&&n.position.indexOf("inside")>=0:n.inside,m=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),g=void 0,_=void 0,b=void 0;v&&this.canBeInsideText()?(g=n.insideFill,_=n.insideStroke,(g==null||g==="auto")&&(g=this.getInsideTextFill()),(_==null||_==="auto")&&(_=this.getInsideTextStroke(g),b=!0)):(g=n.outsideFill,_=n.outsideStroke,(g==null||g==="auto")&&(g=this.getOutsideFill()),(_==null||_==="auto")&&(_=this.getOutsideStroke(g),b=!0)),g=g||"#000",(g!==m.fill||_!==m.stroke||b!==m.autoStroke||s!==m.align||a!==m.verticalAlign)&&(l=!0,m.fill=g,m.stroke=_,m.autoStroke=b,m.align=s,m.verticalAlign=a,r.setDefaultTextStyle(m)),r.__dirty|=Ln,l&&r.dirtyStyle(!0)}},e.prototype.canBeInsideText=function(){return!0},e.prototype.getInsideTextFill=function(){return"#fff"},e.prototype.getInsideTextStroke=function(t){return"#000"},e.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?YS:XS},e.prototype.getOutsideStroke=function(t){var r=this.__zr&&this.__zr.getBackgroundColor(),n=typeof r=="string"&&ni(r);n||(n=[255,255,255,1]);for(var i=n[3],o=this.__zr.isDarkMode(),s=0;s<3;s++)n[s]=n[s]*i+(o?0:255)*(1-i);return n[3]=1,ds(n,"rgba")},e.prototype.traverse=function(t,r){},e.prototype.attrKV=function(t,r){t==="textConfig"?this.setTextConfig(r):t==="textContent"?this.setTextContent(r):t==="clipPath"?this.setClipPath(r):t==="extra"?(this.extra=this.extra||{},at(this.extra,r)):this[t]=r},e.prototype.hide=function(){this.ignore=!0,this.markRedraw()},e.prototype.show=function(){this.ignore=!1,this.markRedraw()},e.prototype.attr=function(t,r){if(typeof t=="string")this.attrKV(t,r);else if(Rt(t))for(var n=t,i=ge(n),o=0;o<i.length;o++){var s=i[o];this.attrKV(s,t[s])}return this.markRedraw(),this},e.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var r=this._normalState,n=0;n<this.animators.length;n++){var i=this.animators[n],o=i.__fromStateTransition;if(!(i.getLoop()||o&&o!==Yy)){var s=i.targetName,a=s?r[s]:r;i.saveTo(a)}}},e.prototype._innerSaveToNormal=function(t){var r=this._normalState;r||(r=this._normalState={}),t.textConfig&&!r.textConfig&&(r.textConfig=this.textConfig),this._savePrimaryToNormal(t,r,qy)},e.prototype._savePrimaryToNormal=function(t,r,n){for(var i=0;i<n.length;i++){var o=n[i];t[o]!=null&&!(o in r)&&(r[o]=this[o])}},e.prototype.hasState=function(){return this.currentStates.length>0},e.prototype.getState=function(t){return this.states[t]},e.prototype.ensureState=function(t){var r=this.states;return r[t]||(r[t]={}),r[t]},e.prototype.clearStates=function(t){this.useState(Yy,!1,t)},e.prototype.useState=function(t,r,n,i){var o=t===Yy,s=this.hasState();if(!(!s&&o)){var a=this.currentStates,l=this.stateTransition;if(!(he(a,t)>=0&&(r||a.length===1))){var u;if(this.stateProxy&&!o&&(u=this.stateProxy(t)),u||(u=this.states&&this.states[t]),!u&&!o){zk("State "+t+" not exists.");return}o||this.saveCurrentToNormalState(u);var c=!!(u&&u.hoverLayer||i);c&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,u,this._normalState,r,!n&&!this.__inHover&&l&&l.duration>0,l);var f=this._textContent,h=this._textGuide;return f&&f.useState(t,r,n,c),h&&h.useState(t,r,n,c),o?(this.currentStates=[],this._normalState={}):r?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!c&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Ln),u}}},e.prototype.useStates=function(t,r,n){if(!t.length)this.clearStates();else{var i=[],o=this.currentStates,s=t.length,a=s===o.length;if(a){for(var l=0;l<s;l++)if(t[l]!==o[l]){a=!1;break}}if(a)return;for(var l=0;l<s;l++){var u=t[l],c=void 0;this.stateProxy&&(c=this.stateProxy(u,t)),c||(c=this.states[u]),c&&i.push(c)}var f=i[s-1],h=!!(f&&f.hoverLayer||n);h&&this._toggleHoverLayerFlag(!0);var d=this._mergeStates(i),p=this.stateTransition;this.saveCurrentToNormalState(d),this._applyStateObj(t.join(","),d,this._normalState,!1,!r&&!this.__inHover&&p&&p.duration>0,p);var v=this._textContent,m=this._textGuide;v&&v.useStates(t,r,h),m&&m.useStates(t,r,h),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!h&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Ln)}},e.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var r=this.animators[t];r.targetName&&r.changeTarget(this[r.targetName])}},e.prototype.removeState=function(t){var r=he(this.currentStates,t);if(r>=0){var n=this.currentStates.slice();n.splice(r,1),this.useStates(n)}},e.prototype.replaceState=function(t,r,n){var i=this.currentStates.slice(),o=he(i,t),s=he(i,r)>=0;o>=0?s?i.splice(o,1):i[o]=r:n&&!s&&i.push(r),this.useStates(i)},e.prototype.toggleState=function(t,r){r?this.useState(t,!0):this.removeState(t)},e.prototype._mergeStates=function(t){for(var r={},n,i=0;i<t.length;i++){var o=t[i];at(r,o),o.textConfig&&(n=n||{},at(n,o.textConfig))}return n&&(r.textConfig=n),r},e.prototype._applyStateObj=function(t,r,n,i,o,s){var a=!(r&&i);r&&r.textConfig?(this.textConfig=at({},i?this.textConfig:n.textConfig),at(this.textConfig,r.textConfig)):a&&n.textConfig&&(this.textConfig=n.textConfig);for(var l={},u=!1,c=0;c<qy.length;c++){var f=qy[c],h=o&&iJ[f];r&&r[f]!=null?h?(u=!0,l[f]=r[f]):this[f]=r[f]:a&&n[f]!=null&&(h?(u=!0,l[f]=n[f]):this[f]=n[f])}if(!o)for(var c=0;c<this.animators.length;c++){var d=this.animators[c],p=d.targetName;d.getLoop()||d.__changeFinalValue(p?(r||n)[p]:r||n)}u&&this._transitionState(t,l,s)},e.prototype._attachComponent=function(t){if(!(t.__zr&&!t.__hostTarget)&&t!==this){var r=this.__zr;r&&t.addSelfToZr(r),t.__zr=r,t.__hostTarget=this}},e.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},e.prototype.getClipPath=function(){return this._clipPath},e.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},e.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},e.prototype.getTextContent=function(){return this._textContent},e.prototype.setTextContent=function(t){var r=this._textContent;r!==t&&(r&&r!==t&&this.removeTextContent(),t.innerTransformable=new zl,this._attachComponent(t),this._textContent=t,this.markRedraw())},e.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),at(this.textConfig,t),this.markRedraw()},e.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},e.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},e.prototype.getTextGuideLine=function(){return this._textGuide},e.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},e.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},e.prototype.markRedraw=function(){this.__dirty|=Ln;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},e.prototype.dirty=function(){this.markRedraw()},e.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var r=this._textContent,n=this._textGuide;r&&(r.__inHover=t),n&&(n.__inHover=t)},e.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var r=this.animators;if(r)for(var n=0;n<r.length;n++)t.animation.addAnimator(r[n]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){if(!!this.__zr){this.__zr=null;var r=this.animators;if(r)for(var n=0;n<r.length;n++)t.animation.removeAnimator(r[n]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},e.prototype.animate=function(t,r,n){var i=t?this[t]:this,o=new jk(i,r,n);return t&&(o.targetName=t),this.addAnimator(o,t),o},e.prototype.addAnimator=function(t,r){var n=this.__zr,i=this;t.during(function(){i.updateDuringAnimation(r)}).done(function(){var o=i.animators,s=he(o,t);s>=0&&o.splice(s,1)}),this.animators.push(t),n&&n.animation.addAnimator(t),n&&n.wakeUp()},e.prototype.updateDuringAnimation=function(t){this.markRedraw()},e.prototype.stopAnimation=function(t,r){for(var n=this.animators,i=n.length,o=[],s=0;s<i;s++){var a=n[s];!t||t===a.scope?a.stop(r):o.push(a)}return this.animators=o,this},e.prototype.animateTo=function(t,r,n){Zy(this,t,r,n)},e.prototype.animateFrom=function(t,r,n){Zy(this,t,r,n,!0)},e.prototype._transitionState=function(t,r,n,i){for(var o=Zy(this,r,n,i),s=0;s<o.length;s++)o[s].__fromStateTransition=t},e.prototype.getBoundingRect=function(){return null},e.prototype.getPaintRect=function(){return null},e.initDefaultProps=function(){var t=e.prototype;t.type="element",t.name="",t.ignore=t.silent=t.isGroup=t.draggable=t.dragging=t.ignoreClip=t.__inHover=!1,t.__dirty=Ln;function r(n,i,o,s){Object.defineProperty(t,n,{get:function(){if(!this[i]){var l=this[i]=[];a(this,l)}return this[i]},set:function(l){this[o]=l[0],this[s]=l[1],this[i]=l,a(this,l)}});function a(l,u){Object.defineProperty(u,0,{get:function(){return l[o]},set:function(c){l[o]=c}}),Object.defineProperty(u,1,{get:function(){return l[s]},set:function(c){l[s]=c}})}}Object.defineProperty&&(r("position","_legacyPos","x","y"),r("scale","_legacyScale","scaleX","scaleY"),r("origin","_legacyOrigin","originX","originY"))}(),e}();Gi(Xk,Hi);Gi(Xk,zl);function Zy(e,t,r,n,i){r=r||{};var o=[];p7(e,"",e,t,r,n,o,i);var s=o.length,a=!1,l=r.done,u=r.aborted,c=function(){a=!0,s--,s<=0&&(a?l&&l():u&&u())},f=function(){s--,s<=0&&(a?l&&l():u&&u())};s||l&&l(),o.length>0&&r.during&&o[0].during(function(p,v){r.during(v)});for(var h=0;h<o.length;h++){var d=o[h];c&&d.done(c),f&&d.aborted(f),r.force&&d.duration(r.duration),d.start(r.easing)}return o}function Ky(e,t,r){for(var n=0;n<r;n++)e[n]=t[n]}function sJ(e){return Yr(e[0])}function aJ(e,t,r){if(Yr(t[r]))if(Yr(e[r])||(e[r]=[]),Fn(t[r])){var n=t[r].length;e[r].length!==n&&(e[r]=new t[r].constructor(n),Ky(e[r],t[r],n))}else{var i=t[r],o=e[r],s=i.length;if(sJ(i))for(var a=i[0].length,l=0;l<s;l++)o[l]?Ky(o[l],i[l],a):o[l]=Array.prototype.slice.call(i[l]);else Ky(o,i,s);o.length=i.length}else e[r]=t[r]}function lJ(e,t){return e===t||Yr(e)&&Yr(t)&&uJ(e,t)}function uJ(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function p7(e,t,r,n,i,o,s,a){for(var l=ge(n),u=i.duration,c=i.delay,f=i.additive,h=i.setToFinal,d=!Rt(o),p=e.animators,v=[],m=0;m<l.length;m++){var g=l[m],_=n[g];if(_!=null&&r[g]!=null&&(d||o[g]))if(Rt(_)&&!Yr(_)&&!q1(_)){if(t){a||(r[g]=_,e.updateDuringAnimation(t));continue}p7(e,g,r[g],_,i,o&&o[g],s,a)}else v.push(g);else a||(r[g]=_,e.updateDuringAnimation(t),v.push(g))}var b=v.length;if(!f&&b)for(var w=0;w<p.length;w++){var T=p[w];if(T.targetName===t){var S=T.stopTracks(v);if(S){var k=he(p,T);p.splice(k,1)}}}if(i.force||(v=Cr(v,function(I){return!lJ(n[I],r[I])}),b=v.length),b>0||i.force&&!s.length){var A=void 0,C=void 0,x=void 0;if(a){C={},h&&(A={});for(var w=0;w<b;w++){var g=v[w];C[g]=r[g],h?A[g]=n[g]:r[g]=n[g]}}else if(h){x={};for(var w=0;w<b;w++){var g=v[w];x[g]=Ad(r[g]),aJ(r,n,g)}}var T=new jk(r,!1,!1,f?Cr(p,function(N){return N.targetName===t}):null);T.targetName=t,i.scope&&(T.scope=i.scope),h&&A&&T.whenWithKeys(0,A,v),x&&T.whenWithKeys(0,x,v),T.whenWithKeys(u==null?500:u,a?C:n,v).delay(c||0),e.addAnimator(T,t),s.push(T)}}const v7=Xk;var g7=function(e){Ce(t,e);function t(r){var n=e.call(this)||this;return n.isGroup=!0,n._children=[],n.attr(r),n}return t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(r){return this._children[r]},t.prototype.childOfName=function(r){for(var n=this._children,i=0;i<n.length;i++)if(n[i].name===r)return n[i]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(r){return r&&r!==this&&r.parent!==this&&(this._children.push(r),this._doAdd(r)),this},t.prototype.addBefore=function(r,n){if(r&&r!==this&&r.parent!==this&&n&&n.parent===this){var i=this._children,o=i.indexOf(n);o>=0&&(i.splice(o,0,r),this._doAdd(r))}return this},t.prototype.replace=function(r,n){var i=he(this._children,r);return i>=0&&this.replaceAt(n,i),this},t.prototype.replaceAt=function(r,n){var i=this._children,o=i[n];if(r&&r!==this&&r.parent!==this&&r!==o){i[n]=r,o.parent=null;var s=this.__zr;s&&o.removeSelfFromZr(s),this._doAdd(r)}return this},t.prototype._doAdd=function(r){r.parent&&r.parent.remove(r),r.parent=this;var n=this.__zr;n&&n!==r.__zr&&r.addSelfToZr(n),n&&n.refresh()},t.prototype.remove=function(r){var n=this.__zr,i=this._children,o=he(i,r);return o<0?this:(i.splice(o,1),r.parent=null,n&&r.removeSelfFromZr(n),n&&n.refresh(),this)},t.prototype.removeAll=function(){for(var r=this._children,n=this.__zr,i=0;i<r.length;i++){var o=r[i];n&&o.removeSelfFromZr(n),o.parent=null}return r.length=0,this},t.prototype.eachChild=function(r,n){for(var i=this._children,o=0;o<i.length;o++){var s=i[o];r.call(n,s,o)}return this},t.prototype.traverse=function(r,n){for(var i=0;i<this._children.length;i++){var o=this._children[i],s=r.call(n,o);o.isGroup&&!s&&o.traverse(r,n)}return this},t.prototype.addSelfToZr=function(r){e.prototype.addSelfToZr.call(this,r);for(var n=0;n<this._children.length;n++){var i=this._children[n];i.addSelfToZr(r)}},t.prototype.removeSelfFromZr=function(r){e.prototype.removeSelfFromZr.call(this,r);for(var n=0;n<this._children.length;n++){var i=this._children[n];i.removeSelfFromZr(r)}},t.prototype.getBoundingRect=function(r){for(var n=new ue(0,0,0,0),i=r||this._children,o=[],s=null,a=0;a<i.length;a++){var l=i[a];if(!(l.ignore||l.invisible)){var u=l.getBoundingRect(),c=l.getLocalTransform(o);c?(ue.applyTransform(n,u,c),s=s||n.clone(),s.union(n)):(s=s||u.clone(),s.union(u))}}return s||n},t}(v7);g7.prototype.type="group";const Ne=g7;/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var Xg={},m7={};function cJ(e){delete m7[e]}function fJ(e){if(!e)return!1;if(typeof e=="string")return Dm(e,1)<HS;if(e.colorStops){for(var t=e.colorStops,r=0,n=t.length,i=0;i<n;i++)r+=Dm(t[i].color,1);return r/=n,r<HS}return!1}var hJ=function(){function e(t,r,n){var i=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,n=n||{},this.dom=r,this.id=t;var o=new kK,s=n.renderer||"canvas";Xg[s]||(s=ge(Xg)[0]),n.useDirtyRect=n.useDirtyRect==null?!1:n.useDirtyRect;var a=new Xg[s](r,o,n,t),l=n.ssr||a.ssrOnly;this.storage=o,this.painter=a;var u=!Zt.node&&!Zt.worker&&!l?new eJ(a.getViewportRoot(),a.root):null,c=n.useCoarsePointer,f=c==null||c==="auto"?Zt.touchEventsSupported:!!c,h=44,d;f&&(d=Jt(n.pointerSize,h)),this.handler=new yK(o,a,u,a.root,d),this.animation=new XK({stage:{update:l?null:function(){return i._flush(!0)}}}),l||this.animation.start()}return e.prototype.add=function(t){!t||(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},e.prototype.remove=function(t){!t||(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},e.prototype.configLayer=function(t,r){this.painter.configLayer&&this.painter.configLayer(t,r),this.refresh()},e.prototype.setBackgroundColor=function(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=fJ(t)},e.prototype.getBackgroundColor=function(){return this._backgroundColor},e.prototype.setDarkMode=function(t){this._darkMode=t},e.prototype.isDarkMode=function(){return this._darkMode},e.prototype.refreshImmediately=function(t){t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},e.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},e.prototype.flush=function(){this._flush(!1)},e.prototype._flush=function(t){var r,n=Ic();this._needsRefresh&&(r=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(r=!0,this.refreshHoverImmediately());var i=Ic();r?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:i-n})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},e.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},e.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},e.prototype.refreshHover=function(){this._needsRefreshHover=!0},e.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover()},e.prototype.resize=function(t){t=t||{},this.painter.resize(t.width,t.height),this.handler.resize()},e.prototype.clearAnimation=function(){this.animation.clear()},e.prototype.getWidth=function(){return this.painter.getWidth()},e.prototype.getHeight=function(){return this.painter.getHeight()},e.prototype.setCursorStyle=function(t){this.handler.setCursorStyle(t)},e.prototype.findHover=function(t,r){return this.handler.findHover(t,r)},e.prototype.on=function(t,r,n){return this.handler.on(t,r,n),this},e.prototype.off=function(t,r){this.handler.off(t,r)},e.prototype.trigger=function(t,r){this.handler.trigger(t,r)},e.prototype.clear=function(){for(var t=this.storage.getRoots(),r=0;r<t.length;r++)t[r]instanceof Ne&&t[r].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},e.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,cJ(this.id)},e}();function v4(e,t){var r=new hJ(j9(),e,t);return m7[r.id]=r,r}function dJ(e,t){Xg[e]=t}var g4=1e-4,_7=20;function pJ(e){return e.replace(/^\s+|\s+$/g,"")}function _s(e,t,r,n){var i=t[0],o=t[1],s=r[0],a=r[1],l=o-i,u=a-s;if(l===0)return u===0?s:(s+a)/2;if(n)if(l>0){if(e<=i)return s;if(e>=o)return a}else{if(e>=i)return s;if(e<=o)return a}else{if(e===i)return s;if(e===o)return a}return(e-i)/l*u+s}function Ye(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%";break}return Mt(e)?pJ(e).match(/%$/)?parseFloat(e)/100*t:parseFloat(e):e==null?NaN:+e}function Qe(e,t,r){return t==null&&(t=10),t=Math.min(Math.max(0,t),_7),e=(+e).toFixed(t),r?e:+e}function zm(e){return e.sort(function(t,r){return t-r}),e}function Eo(e){if(e=+e,isNaN(e))return 0;if(e>1e-14){for(var t=1,r=0;r<15;r++,t*=10)if(Math.round(e*t)/t===e)return r}return vJ(e)}function vJ(e){var t=e.toString().toLowerCase(),r=t.indexOf("e"),n=r>0?+t.slice(r+1):0,i=r>0?r:t.length,o=t.indexOf("."),s=o<0?0:i-1-o;return Math.max(0,s-n)}function gJ(e,t){var r=Math.log,n=Math.LN10,i=Math.floor(r(e[1]-e[0])/n),o=Math.round(r(Math.abs(t[1]-t[0]))/n),s=Math.min(Math.max(-i+o,0),20);return isFinite(s)?s:20}function mJ(e,t){var r=Math.max(Eo(e),Eo(t)),n=e+t;return r>_7?n:Qe(n,r)}function y7(e){var t=Math.PI*2;return(e%t+t)%t}function Bm(e){return e>-g4&&e<g4}var _J=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function ys(e){if(e instanceof Date)return e;if(Mt(e)){var t=_J.exec(e);if(!t)return new Date(NaN);if(t[8]){var r=+t[4]||0;return t[8].toUpperCase()!=="Z"&&(r-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,r,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0))}else return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0)}else if(e==null)return new Date(NaN);return new Date(Math.round(e))}function yJ(e){return Math.pow(10,Yk(e))}function Yk(e){if(e===0)return 0;var t=Math.floor(Math.log(e)/Math.LN10);return e/Math.pow(10,t)>=10&&t++,t}function b7(e,t){var r=Yk(e),n=Math.pow(10,r),i=e/n,o;return t?i<1.5?o=1:i<2.5?o=2:i<4?o=3:i<7?o=5:o=10:i<1?o=1:i<2?o=2:i<3?o=3:i<5?o=5:o=10,e=o*n,r>=-20?+e.toFixed(r<0?-r:0):e}function m4(e){e.sort(function(l,u){return a(l,u,0)?-1:1});for(var t=-1/0,r=1,n=0;n<e.length;){for(var i=e[n].interval,o=e[n].close,s=0;s<2;s++)i[s]<=t&&(i[s]=t,o[s]=s?1:1-r),t=i[s],r=o[s];i[0]===i[1]&&o[0]*o[1]!==1?e.splice(n,1):n++}return e;function a(l,u,c){return l.interval[c]<u.interval[c]||l.interval[c]===u.interval[c]&&(l.close[c]-u.close[c]===(c?-1:1)||!c&&a(l,u,1))}}function xa(e){var t=parseFloat(e);return t==e&&(t!==0||!Mt(e)||e.indexOf("x")<=0)?t:NaN}function bJ(e){return!isNaN(xa(e))}function w7(){return Math.round(Math.random()*9)}function S7(e,t){return t===0?e:S7(t,e%t)}function _4(e,t){return e==null?t:t==null?e:e*t/S7(e,t)}function oe(e){throw new Error(e)}function y4(e,t,r){return(t-e)*r+e}var T7="series\0",wJ="\0_ec_\0";function tr(e){return e instanceof Array?e:e==null?[]:[e]}function qS(e,t,r){if(e){e[t]=e[t]||{},e.emphasis=e.emphasis||{},e.emphasis[t]=e.emphasis[t]||{};for(var n=0,i=r.length;n<i;n++){var o=r[n];!e.emphasis[t].hasOwnProperty(o)&&e[t].hasOwnProperty(o)&&(e.emphasis[t][o]=e[t][o])}}}var b4=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function Vp(e){return Rt(e)&&!ht(e)&&!(e instanceof Date)?e.value:e}function SJ(e){return Rt(e)&&!(e instanceof Array)}function TJ(e,t,r){var n=r==="normalMerge",i=r==="replaceMerge",o=r==="replaceAll";e=e||[],t=(t||[]).slice();var s=Xt();z(t,function(l,u){if(!Rt(l)){t[u]=null;return}});var a=kJ(e,s,r);return(n||i)&&PJ(a,e,s,t),n&&EJ(a,t),n||i?CJ(a,t,i):o&&AJ(a,t),MJ(a),a}function kJ(e,t,r){var n=[];if(r==="replaceAll")return n;for(var i=0;i<e.length;i++){var o=e[i];o&&o.id!=null&&t.set(o.id,i),n.push({existing:r==="replaceMerge"||ip(o)?null:o,newOption:null,keyInfo:null,brandNew:null})}return n}function PJ(e,t,r,n){z(n,function(i,o){if(!(!i||i.id==null)){var s=Md(i.id),a=r.get(s);if(a!=null){var l=e[a];Vi(!l.newOption,'Duplicated option on id "'+s+'".'),l.newOption=i,l.existing=t[a],n[o]=null}}})}function EJ(e,t){z(t,function(r,n){if(!(!r||r.name==null))for(var i=0;i<e.length;i++){var o=e[i].existing;if(!e[i].newOption&&o&&(o.id==null||r.id==null)&&!ip(r)&&!ip(o)&&k7("name",o,r)){e[i].newOption=r,t[n]=null;return}}})}function CJ(e,t,r){z(t,function(n){if(!!n){for(var i,o=0;(i=e[o])&&(i.newOption||ip(i.existing)||i.existing&&n.id!=null&&!k7("id",n,i.existing));)o++;i?(i.newOption=n,i.brandNew=r):e.push({newOption:n,brandNew:r,existing:null,keyInfo:null}),o++}})}function AJ(e,t){z(t,function(r){e.push({newOption:r,brandNew:!0,existing:null,keyInfo:null})})}function MJ(e){var t=Xt();z(e,function(r){var n=r.existing;n&&t.set(n.id,r)}),z(e,function(r){var n=r.newOption;Vi(!n||n.id==null||!t.get(n.id)||t.get(n.id)===r,"id duplicates: "+(n&&n.id)),n&&n.id!=null&&t.set(n.id,r),!r.keyInfo&&(r.keyInfo={})}),z(e,function(r,n){var i=r.existing,o=r.newOption,s=r.keyInfo;if(!!Rt(o)){if(s.name=o.name!=null?Md(o.name):i?i.name:T7+n,i)s.id=Md(i.id);else if(o.id!=null)s.id=Md(o.id);else{var a=0;do s.id="\0"+s.name+"\0"+a++;while(t.get(s.id))}t.set(s.id,r)}})}function k7(e,t,r){var n=ii(t[e],null),i=ii(r[e],null);return n!=null&&i!=null&&n===i}function Md(e){return ii(e,"")}function ii(e,t){return e==null?t:Mt(e)?e:Se(e)||xS(e)?e+"":t}function qk(e){var t=e.name;return!!(t&&t.indexOf(T7))}function ip(e){return e&&e.id!=null&&Md(e.id).indexOf(wJ)===0}function xJ(e,t,r){z(e,function(n){var i=n.newOption;Rt(i)&&(n.keyInfo.mainType=t,n.keyInfo.subType=LJ(t,i,n.existing,r))})}function LJ(e,t,r,n){var i=t.type?t.type:r?r.subType:n.determineSubType(e,t);return i}function IJ(e,t){var r={},n={};return i(e||[],r),i(t||[],n,r),[o(r),o(n)];function i(s,a,l){for(var u=0,c=s.length;u<c;u++){var f=ii(s[u].seriesId,null);if(f==null)return;for(var h=tr(s[u].dataIndex),d=l&&l[f],p=0,v=h.length;p<v;p++){var m=h[p];d&&d[m]?d[m]=null:(a[f]||(a[f]={}))[m]=1}}}function o(s,a){var l=[];for(var u in s)if(s.hasOwnProperty(u)&&s[u]!=null)if(a)l.push(+u);else{var c=o(s[u],!0);c.length&&l.push({seriesId:u,dataIndex:c})}return l}}function au(e,t){if(t.dataIndexInside!=null)return t.dataIndexInside;if(t.dataIndex!=null)return ht(t.dataIndex)?Lt(t.dataIndex,function(r){return e.indexOfRawIndex(r)}):e.indexOfRawIndex(t.dataIndex);if(t.name!=null)return ht(t.name)?Lt(t.name,function(r){return e.indexOfName(r)}):e.indexOfName(t.name)}function Re(){var e="__ec_inner_"+OJ++;return function(t){return t[e]||(t[e]={})}}var OJ=w7();function Jy(e,t,r){var n=Zk(t,r),i=n.mainTypeSpecified,o=n.queryOptionMap,s=n.others,a=s,l=r?r.defaultMainType:null;return!i&&l&&o.set(l,{}),o.each(function(u,c){var f=Up(e,c,u,{useDefault:l===c,enableAll:r&&r.enableAll!=null?r.enableAll:!0,enableNone:r&&r.enableNone!=null?r.enableNone:!0});a[c+"Models"]=f.models,a[c+"Model"]=f.models[0]}),a}function Zk(e,t){var r;if(Mt(e)){var n={};n[e+"Index"]=0,r=n}else r=e;var i=Xt(),o={},s=!1;return z(r,function(a,l){if(l==="dataIndex"||l==="dataIndexInside"){o[l]=a;return}var u=l.match(/^(\w+)(Index|Id|Name)$/)||[],c=u[1],f=(u[2]||"").toLowerCase();if(!(!c||!f||t&&t.includeMainTypes&&he(t.includeMainTypes,c)<0)){s=s||!!c;var h=i.get(c)||i.set(c,{});h[f]=a}}),{mainTypeSpecified:s,queryOptionMap:i,others:o}}var Li={useDefault:!0,enableAll:!1,enableNone:!1};function Up(e,t,r,n){n=n||Li;var i=r.index,o=r.id,s=r.name,a={models:null,specified:i!=null||o!=null||s!=null};if(!a.specified){var l=void 0;return a.models=n.useDefault&&(l=e.getComponent(t))?[l]:[],a}return i==="none"||i===!1?(Vi(n.enableNone,'`"none"` or `false` is not a valid value on index option.'),a.models=[],a):(i==="all"&&(Vi(n.enableAll,'`"all"` is not a valid value on index option.'),i=o=s=null),a.models=e.queryComponents({mainType:t,index:i,id:o,name:s}),a)}function P7(e,t,r){e.setAttribute?e.setAttribute(t,r):e[t]=r}function RJ(e,t){return e.getAttribute?e.getAttribute(t):e[t]}function DJ(e){return e==="auto"?Zt.domSupported?"html":"richText":e||"html"}function NJ(e,t,r,n,i){var o=t==null||t==="auto";if(n==null)return n;if(Se(n)){var s=y4(r||0,n,i);return Qe(s,o?Math.max(Eo(r||0),Eo(n)):t)}else{if(Mt(n))return i<1?r:n;for(var a=[],l=r,u=n,c=Math.max(l?l.length:0,u.length),f=0;f<c;++f){var h=e.getDimensionInfo(f);if(h&&h.type==="ordinal")a[f]=(i<1&&l?l:u)[f];else{var d=l&&l[f]?l[f]:0,p=u[f],s=y4(d,p,i);a[f]=Qe(s,o?Math.max(Eo(d),Eo(p)):t)}}return a}}var FJ=".",al="___EC__COMPONENT__CONTAINER___",E7="___EC__EXTENDED_CLASS___";function Co(e){var t={main:"",sub:""};if(e){var r=e.split(FJ);t.main=r[0]||"",t.sub=r[1]||""}return t}function zJ(e){Vi(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(e),'componentType "'+e+'" illegal')}function BJ(e){return!!(e&&e[E7])}function Kk(e,t){e.$constructor=e,e.extend=function(r){var n=this,i;return $J(n)?i=function(o){St(s,o);function s(){return o.apply(this,arguments)||this}return s}(n):(i=function(){(r.$constructor||n).apply(this,arguments)},FZ(i,this)),at(i.prototype,r),i[E7]=!0,i.extend=this.extend,i.superCall=WJ,i.superApply=jJ,i.superClass=n,i}}function $J(e){return jt(e)&&/^class\s/.test(Function.prototype.toString.call(e))}function C7(e,t){e.extend=t.extend}var VJ=Math.round(Math.random()*10);function UJ(e){var t=["__\0is_clz",VJ++].join("_");e.prototype[t]=!0,e.isInstance=function(r){return!!(r&&r[t])}}function WJ(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return this.superClass.prototype[t].apply(e,r)}function jJ(e,t,r){return this.superClass.prototype[t].apply(e,r)}function J1(e){var t={};e.registerClass=function(n){var i=n.type||n.prototype.type;if(i){zJ(i),n.prototype.type=i;var o=Co(i);if(!o.sub)t[o.main]=n;else if(o.sub!==al){var s=r(o);s[o.sub]=n}}return n},e.getClass=function(n,i,o){var s=t[n];if(s&&s[al]&&(s=i?s[i]:null),o&&!s)throw new Error(i?"Component "+n+"."+(i||"")+" is used but not imported.":n+".type should be specified.");return s},e.getClassesByMainType=function(n){var i=Co(n),o=[],s=t[i.main];return s&&s[al]?z(s,function(a,l){l!==al&&o.push(a)}):o.push(s),o},e.hasClass=function(n){var i=Co(n);return!!t[i.main]},e.getAllClassMainTypes=function(){var n=[];return z(t,function(i,o){n.push(o)}),n},e.hasSubTypes=function(n){var i=Co(n),o=t[i.main];return o&&o[al]};function r(n){var i=t[n.main];return(!i||!i[al])&&(i=t[n.main]={},i[al]=!0),i}}function op(e,t){for(var r=0;r<e.length;r++)e[r][1]||(e[r][1]=e[r][0]);return t=t||!1,function(n,i,o){for(var s={},a=0;a<e.length;a++){var l=e[a][1];if(!(i&&he(i,l)>=0||o&&he(o,l)<0)){var u=n.getShallow(l,t);u!=null&&(s[e[a][0]]=u)}}return s}}var GJ=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],HJ=op(GJ),XJ=function(){function e(){}return e.prototype.getAreaStyle=function(t,r){return HJ(this,t,r)},e}(),ZS=new $p(50);function YJ(e){if(typeof e=="string"){var t=ZS.get(e);return t&&t.image}else return e}function A7(e,t,r,n,i){if(e)if(typeof e=="string"){if(t&&t.__zrImageSrc===e||!r)return t;var o=ZS.get(e),s={hostEl:r,cb:n,cbPayload:i};return o?(t=o.image,!Q1(t)&&o.pending.push(s)):(t=bu.loadImage(e,w4,w4),t.__zrImageSrc=e,ZS.put(e,t.__cachedImgObj={image:t,pending:[s]})),t}else return e;else return t}function w4(){var e=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<e.pending.length;t++){var r=e.pending[t],n=r.cb;n&&n(this,r.cbPayload),r.hostEl.dirty()}e.pending.length=0}function Q1(e){return e&&e.width&&e.height}var Qy=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function qJ(e,t,r,n,i){if(!t)return"";var o=(e+"").split(`
`);i=M7(t,r,n,i);for(var s=0,a=o.length;s<a;s++)o[s]=x7(o[s],i);return o.join(`
`)}function M7(e,t,r,n){n=n||{};var i=at({},n);i.font=t,r=Jt(r,"..."),i.maxIterations=Jt(n.maxIterations,2);var o=i.minChar=Jt(n.minChar,0);i.cnCharWidth=On("\u56FD",t);var s=i.ascCharWidth=On("a",t);i.placeholder=Jt(n.placeholder,"");for(var a=e=Math.max(0,e-1),l=0;l<o&&a>=s;l++)a-=s;var u=On(r,t);return u>a&&(r="",u=0),a=e-u,i.ellipsis=r,i.ellipsisWidth=u,i.contentWidth=a,i.containerWidth=e,i}function x7(e,t){var r=t.containerWidth,n=t.font,i=t.contentWidth;if(!r)return"";var o=On(e,n);if(o<=r)return e;for(var s=0;;s++){if(o<=i||s>=t.maxIterations){e+=t.ellipsis;break}var a=s===0?ZJ(e,i,t.ascCharWidth,t.cnCharWidth):o>0?Math.floor(e.length*i/o):0;e=e.substr(0,a),o=On(e,n)}return e===""&&(e=t.placeholder),e}function ZJ(e,t,r,n){for(var i=0,o=0,s=e.length;o<s&&i<t;o++){var a=e.charCodeAt(o);i+=0<=a&&a<=127?r:n}return o}function KJ(e,t){e!=null&&(e+="");var r=t.overflow,n=t.padding,i=t.font,o=r==="truncate",s=Hk(i),a=Jt(t.lineHeight,s),l=!!t.backgroundColor,u=t.lineOverflow==="truncate",c=t.width,f;c!=null&&(r==="break"||r==="breakAll")?f=e?L7(e,t.font,c,r==="breakAll",0).lines:[]:f=e?e.split(`
`):[];var h=f.length*a,d=Jt(t.height,h);if(h>d&&u){var p=Math.floor(d/a);f=f.slice(0,p)}if(e&&o&&c!=null)for(var v=M7(c,i,t.ellipsis,{minChar:t.truncateMinChar,placeholder:t.placeholder}),m=0;m<f.length;m++)f[m]=x7(f[m],v);for(var g=d,_=0,m=0;m<f.length;m++)_=Math.max(On(f[m],i),_);c==null&&(c=_);var b=_;return n&&(g+=n[0]+n[2],b+=n[1]+n[3],c+=n[1]+n[3]),l&&(b=c),{lines:f,height:d,outerWidth:b,outerHeight:g,lineHeight:a,calculatedLineHeight:s,contentWidth:_,contentHeight:h,width:c}}var JJ=function(){function e(){}return e}(),S4=function(){function e(t){this.tokens=[],t&&(this.tokens=t)}return e}(),QJ=function(){function e(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return e}();function tQ(e,t){var r=new QJ;if(e!=null&&(e+=""),!e)return r;for(var n=t.width,i=t.height,o=t.overflow,s=(o==="break"||o==="breakAll")&&n!=null?{width:n,accumWidth:0,breakAll:o==="breakAll"}:null,a=Qy.lastIndex=0,l;(l=Qy.exec(e))!=null;){var u=l.index;u>a&&t2(r,e.substring(a,u),t,s),t2(r,l[2],t,s,l[1]),a=Qy.lastIndex}a<e.length&&t2(r,e.substring(a,e.length),t,s);var c=[],f=0,h=0,d=t.padding,p=o==="truncate",v=t.lineOverflow==="truncate";function m(q,et,At){q.width=et,q.lineHeight=At,f+=At,h=Math.max(h,et)}t:for(var g=0;g<r.lines.length;g++){for(var _=r.lines[g],b=0,w=0,T=0;T<_.tokens.length;T++){var S=_.tokens[T],k=S.styleName&&t.rich[S.styleName]||{},A=S.textPadding=k.padding,C=A?A[1]+A[3]:0,x=S.font=k.font||t.font;S.contentHeight=Hk(x);var I=Jt(k.height,S.contentHeight);if(S.innerHeight=I,A&&(I+=A[0]+A[2]),S.height=I,S.lineHeight=Ed(k.lineHeight,t.lineHeight,I),S.align=k&&k.align||t.align,S.verticalAlign=k&&k.verticalAlign||"middle",v&&i!=null&&f+S.lineHeight>i){T>0?(_.tokens=_.tokens.slice(0,T),m(_,w,b),r.lines=r.lines.slice(0,g+1)):r.lines=r.lines.slice(0,g);break t}var N=k.width,B=N==null||N==="auto";if(typeof N=="string"&&N.charAt(N.length-1)==="%")S.percentWidth=N,c.push(S),S.contentWidth=On(S.text,x);else{if(B){var V=k.backgroundColor,F=V&&V.image;F&&(F=YJ(F),Q1(F)&&(S.width=Math.max(S.width,F.width*I/F.height)))}var G=p&&n!=null?n-w:null;G!=null&&G<S.width?!B||G<C?(S.text="",S.width=S.contentWidth=0):(S.text=qJ(S.text,G-C,x,t.ellipsis,{minChar:t.truncateMinChar}),S.width=S.contentWidth=On(S.text,x)):S.contentWidth=On(S.text,x)}S.width+=C,w+=S.width,k&&(b=Math.max(b,S.lineHeight))}m(_,w,b)}r.outerWidth=r.width=Jt(n,h),r.outerHeight=r.height=Jt(i,f),r.contentHeight=f,r.contentWidth=h,d&&(r.outerWidth+=d[1]+d[3],r.outerHeight+=d[0]+d[2]);for(var g=0;g<c.length;g++){var S=c[g],Z=S.percentWidth;S.width=parseInt(Z,10)/100*r.width}return r}function t2(e,t,r,n,i){var o=t==="",s=i&&r.rich[i]||{},a=e.lines,l=s.font||r.font,u=!1,c,f;if(n){var h=s.padding,d=h?h[1]+h[3]:0;if(s.width!=null&&s.width!=="auto"){var p=ms(s.width,n.width)+d;a.length>0&&p+n.accumWidth>n.width&&(c=t.split(`
`),u=!0),n.accumWidth=p}else{var v=L7(t,l,n.width,n.breakAll,n.accumWidth);n.accumWidth=v.accumWidth+d,f=v.linesWidths,c=v.lines}}else c=t.split(`
`);for(var m=0;m<c.length;m++){var g=c[m],_=new JJ;if(_.styleName=i,_.text=g,_.isLineHolder=!g&&!o,typeof s.width=="number"?_.width=s.width:_.width=f?f[m]:On(g,l),!m&&!u){var b=(a[a.length-1]||(a[0]=new S4)).tokens,w=b.length;w===1&&b[0].isLineHolder?b[0]=_:(g||!w||o)&&b.push(_)}else a.push(new S4([_]))}}function eQ(e){var t=e.charCodeAt(0);return t>=33&&t<=383}var rQ=wu(",&?/;] ".split(""),function(e,t){return e[t]=!0,e},{});function nQ(e){return eQ(e)?!!rQ[e]:!0}function L7(e,t,r,n,i){for(var o=[],s=[],a="",l="",u=0,c=0,f=0;f<e.length;f++){var h=e.charAt(f);if(h===`
`){l&&(a+=l,c+=u),o.push(a),s.push(c),a="",l="",u=0,c=0;continue}var d=On(h,t),p=n?!1:!nQ(h);if(o.length?c+d>r:i+c+d>r){c?(a||l)&&(p?(a||(a=l,l="",u=0,c=u),o.push(a),s.push(c-u),l+=h,u+=d,a="",c=u):(l&&(a+=l,l="",u=0),o.push(a),s.push(c),a=h,c=d)):p?(o.push(l),s.push(u),l=h,u=d):(o.push(h),s.push(d));continue}c+=d,p?(l+=h,u+=d):(l&&(a+=l,l="",u=0),a+=h)}return!o.length&&!a&&(a=e,l="",u=0),l&&(a+=l),a&&(o.push(a),s.push(c)),o.length===1&&(c+=i),{accumWidth:c,lines:o,linesWidths:s}}var KS="__zr_style_"+Math.round(Math.random()*10),Yl={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},t_={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};Yl[KS]=!0;var T4=["z","z2","invisible"],iQ=["invisible"],oQ=function(e){Ce(t,e);function t(r){return e.call(this,r)||this}return t.prototype._init=function(r){for(var n=ge(r),i=0;i<n.length;i++){var o=n[i];o==="style"?this.useStyle(r[o]):e.prototype.attrKV.call(this,o,r[o])}this.style||this.useStyle({})},t.prototype.beforeBrush=function(){},t.prototype.afterBrush=function(){},t.prototype.innerBeforeBrush=function(){},t.prototype.innerAfterBrush=function(){},t.prototype.shouldBePainted=function(r,n,i,o){var s=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&sQ(this,r,n)||s&&!s[0]&&!s[3])return!1;if(i&&this.__clipPaths){for(var a=0;a<this.__clipPaths.length;++a)if(this.__clipPaths[a].isZeroArea())return!1}if(o&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},t.prototype.contain=function(r,n){return this.rectContain(r,n)},t.prototype.traverse=function(r,n){r.call(n,this)},t.prototype.rectContain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect();return o.contain(i[0],i[1])},t.prototype.getPaintRect=function(){var r=this._paintRect;if(!this._paintRect||this.__dirty){var n=this.transform,i=this.getBoundingRect(),o=this.style,s=o.shadowBlur||0,a=o.shadowOffsetX||0,l=o.shadowOffsetY||0;r=this._paintRect||(this._paintRect=new ue(0,0,0,0)),n?ue.applyTransform(r,i,n):r.copy(i),(s||a||l)&&(r.width+=s*2+Math.abs(a),r.height+=s*2+Math.abs(l),r.x=Math.min(r.x,r.x+a-s),r.y=Math.min(r.y,r.y+l-s));var u=this.dirtyRectTolerance;r.isZero()||(r.x=Math.floor(r.x-u),r.y=Math.floor(r.y-u),r.width=Math.ceil(r.width+1+u*2),r.height=Math.ceil(r.height+1+u*2))}return r},t.prototype.setPrevPaintRect=function(r){r?(this._prevPaintRect=this._prevPaintRect||new ue(0,0,0,0),this._prevPaintRect.copy(r)):this._prevPaintRect=null},t.prototype.getPrevPaintRect=function(){return this._prevPaintRect},t.prototype.animateStyle=function(r){return this.animate("style",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():this.markRedraw()},t.prototype.attrKV=function(r,n){r!=="style"?e.prototype.attrKV.call(this,r,n):this.style?this.setStyle(n):this.useStyle(n)},t.prototype.setStyle=function(r,n){return typeof r=="string"?this.style[r]=n:at(this.style,r),this.dirtyStyle(),this},t.prototype.dirtyStyle=function(r){r||this.markRedraw(),this.__dirty|=id,this._rect&&(this._rect=null)},t.prototype.dirty=function(){this.dirtyStyle()},t.prototype.styleChanged=function(){return!!(this.__dirty&id)},t.prototype.styleUpdated=function(){this.__dirty&=~id},t.prototype.createStyle=function(r){return Z1(Yl,r)},t.prototype.useStyle=function(r){r[KS]||(r=this.createStyle(r)),this.__inHover?this.__hoverStyle=r:this.style=r,this.dirtyStyle()},t.prototype.isStyleObject=function(r){return r[KS]},t.prototype._innerSaveToNormal=function(r){e.prototype._innerSaveToNormal.call(this,r);var n=this._normalState;r.style&&!n.style&&(n.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(r,n,T4)},t.prototype._applyStateObj=function(r,n,i,o,s,a){e.prototype._applyStateObj.call(this,r,n,i,o,s,a);var l=!(n&&o),u;if(n&&n.style?s?o?u=n.style:(u=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(u,n.style)):(u=this._mergeStyle(this.createStyle(),o?this.style:i.style),this._mergeStyle(u,n.style)):l&&(u=i.style),u)if(s){var c=this.style;if(this.style=this.createStyle(l?{}:c),l)for(var f=ge(c),h=0;h<f.length;h++){var d=f[h];d in u&&(u[d]=u[d],this.style[d]=c[d])}for(var p=ge(u),h=0;h<p.length;h++){var d=p[h];this.style[d]=this.style[d]}this._transitionState(r,{style:u},a,this.getAnimationStyleProps())}else this.useStyle(u);for(var v=this.__inHover?iQ:T4,h=0;h<v.length;h++){var d=v[h];n&&n[d]!=null?this[d]=n[d]:l&&i[d]!=null&&(this[d]=i[d])}},t.prototype._mergeStates=function(r){for(var n=e.prototype._mergeStates.call(this,r),i,o=0;o<r.length;o++){var s=r[o];s.style&&(i=i||{},this._mergeStyle(i,s.style))}return i&&(n.style=i),n},t.prototype._mergeStyle=function(r,n){return at(r,n),r},t.prototype.getAnimationStyleProps=function(){return t_},t.initDefaultProps=function(){var r=t.prototype;r.type="displayable",r.invisible=!1,r.z=0,r.z2=0,r.zlevel=0,r.culling=!1,r.cursor="pointer",r.rectHover=!1,r.incremental=!1,r._rect=null,r.dirtyRectTolerance=0,r.__dirty=Ln|id}(),t}(v7),e2=new ue(0,0,0,0),r2=new ue(0,0,0,0);function sQ(e,t,r){return e2.copy(e.getBoundingRect()),e.transform&&e2.applyTransform(e.transform),r2.width=t,r2.height=r,!e2.intersect(r2)}const Su=oQ;var pn=Math.min,vn=Math.max,n2=Math.sin,i2=Math.cos,ll=Math.PI*2,N0=Pf(),F0=Pf(),z0=Pf();function aQ(e,t,r){if(e.length!==0){for(var n=e[0],i=n[0],o=n[0],s=n[1],a=n[1],l=1;l<e.length;l++)n=e[l],i=pn(i,n[0]),o=vn(o,n[0]),s=pn(s,n[1]),a=vn(a,n[1]);t[0]=i,t[1]=s,r[0]=o,r[1]=a}}function k4(e,t,r,n,i,o){i[0]=pn(e,r),i[1]=pn(t,n),o[0]=vn(e,r),o[1]=vn(t,n)}var P4=[],E4=[];function lQ(e,t,r,n,i,o,s,a,l,u){var c=s7,f=ur,h=c(e,r,i,s,P4);l[0]=1/0,l[1]=1/0,u[0]=-1/0,u[1]=-1/0;for(var d=0;d<h;d++){var p=f(e,r,i,s,P4[d]);l[0]=pn(p,l[0]),u[0]=vn(p,u[0])}h=c(t,n,o,a,E4);for(var d=0;d<h;d++){var v=f(t,n,o,a,E4[d]);l[1]=pn(v,l[1]),u[1]=vn(v,u[1])}l[0]=pn(e,l[0]),u[0]=vn(e,u[0]),l[0]=pn(s,l[0]),u[0]=vn(s,u[0]),l[1]=pn(t,l[1]),u[1]=vn(t,u[1]),l[1]=pn(a,l[1]),u[1]=vn(a,u[1])}function uQ(e,t,r,n,i,o,s,a){var l=a7,u=$r,c=vn(pn(l(e,r,i),1),0),f=vn(pn(l(t,n,o),1),0),h=u(e,r,i,c),d=u(t,n,o,f);s[0]=pn(e,i,h),s[1]=pn(t,o,d),a[0]=vn(e,i,h),a[1]=vn(t,o,d)}function cQ(e,t,r,n,i,o,s,a,l){var u=xc,c=Lc,f=Math.abs(i-o);if(f%ll<1e-4&&f>1e-4){a[0]=e-r,a[1]=t-n,l[0]=e+r,l[1]=t+n;return}if(N0[0]=i2(i)*r+e,N0[1]=n2(i)*n+t,F0[0]=i2(o)*r+e,F0[1]=n2(o)*n+t,u(a,N0,F0),c(l,N0,F0),i=i%ll,i<0&&(i=i+ll),o=o%ll,o<0&&(o=o+ll),i>o&&!s?o+=ll:i<o&&s&&(i+=ll),s){var h=o;o=i,i=h}for(var d=0;d<o;d+=Math.PI/2)d>i&&(z0[0]=i2(d)*r+e,z0[1]=n2(d)*n+t,u(a,z0,a),c(l,z0,l))}var ye={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},ul=[],cl=[],ro=[],Fs=[],no=[],io=[],o2=Math.min,s2=Math.max,fl=Math.cos,hl=Math.sin,Xo=Math.abs,JS=Math.PI,la=JS*2,a2=typeof Float32Array<"u",hh=[];function l2(e){var t=Math.round(e/JS*1e8)/1e8;return t%2*JS}function fQ(e,t){var r=l2(e[0]);r<0&&(r+=la);var n=r-e[0],i=e[1];i+=n,!t&&i-r>=la?i=r+la:t&&r-i>=la?i=r-la:!t&&r>i?i=r+(la-l2(r-i)):t&&r<i&&(i=r-(la-l2(i-r))),e[0]=r,e[1]=i}var hQ=function(){function e(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return e.prototype.increaseVersion=function(){this._version++},e.prototype.getVersion=function(){return this._version},e.prototype.setScale=function(t,r,n){n=n||0,n>0&&(this._ux=Xo(n/Nm/t)||0,this._uy=Xo(n/Nm/r)||0)},e.prototype.setDPR=function(t){this.dpr=t},e.prototype.setContext=function(t){this._ctx=t},e.prototype.getContext=function(){return this._ctx},e.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},e.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},e.prototype.moveTo=function(t,r){return this._drawPendingPt(),this.addData(ye.M,t,r),this._ctx&&this._ctx.moveTo(t,r),this._x0=t,this._y0=r,this._xi=t,this._yi=r,this},e.prototype.lineTo=function(t,r){var n=Xo(t-this._xi),i=Xo(r-this._yi),o=n>this._ux||i>this._uy;if(this.addData(ye.L,t,r),this._ctx&&o&&this._ctx.lineTo(t,r),o)this._xi=t,this._yi=r,this._pendingPtDist=0;else{var s=n*n+i*i;s>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=r,this._pendingPtDist=s)}return this},e.prototype.bezierCurveTo=function(t,r,n,i,o,s){return this._drawPendingPt(),this.addData(ye.C,t,r,n,i,o,s),this._ctx&&this._ctx.bezierCurveTo(t,r,n,i,o,s),this._xi=o,this._yi=s,this},e.prototype.quadraticCurveTo=function(t,r,n,i){return this._drawPendingPt(),this.addData(ye.Q,t,r,n,i),this._ctx&&this._ctx.quadraticCurveTo(t,r,n,i),this._xi=n,this._yi=i,this},e.prototype.arc=function(t,r,n,i,o,s){this._drawPendingPt(),hh[0]=i,hh[1]=o,fQ(hh,s),i=hh[0],o=hh[1];var a=o-i;return this.addData(ye.A,t,r,n,n,i,a,0,s?0:1),this._ctx&&this._ctx.arc(t,r,n,i,o,s),this._xi=fl(o)*n+t,this._yi=hl(o)*n+r,this},e.prototype.arcTo=function(t,r,n,i,o){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,r,n,i,o),this},e.prototype.rect=function(t,r,n,i){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,r,n,i),this.addData(ye.R,t,r,n,i),this},e.prototype.closePath=function(){this._drawPendingPt(),this.addData(ye.Z);var t=this._ctx,r=this._x0,n=this._y0;return t&&t.closePath(),this._xi=r,this._yi=n,this},e.prototype.fill=function(t){t&&t.fill(),this.toStatic()},e.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},e.prototype.len=function(){return this._len},e.prototype.setData=function(t){var r=t.length;!(this.data&&this.data.length===r)&&a2&&(this.data=new Float32Array(r));for(var n=0;n<r;n++)this.data[n]=t[n];this._len=r},e.prototype.appendPath=function(t){t instanceof Array||(t=[t]);for(var r=t.length,n=0,i=this._len,o=0;o<r;o++)n+=t[o].len();a2&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+n));for(var o=0;o<r;o++)for(var s=t[o].data,a=0;a<s.length;a++)this.data[i++]=s[a];this._len=i},e.prototype.addData=function(t,r,n,i,o,s,a,l,u){if(!!this._saveData){var c=this.data;this._len+arguments.length>c.length&&(this._expandData(),c=this.data);for(var f=0;f<arguments.length;f++)c[this._len++]=arguments[f]}},e.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},e.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],r=0;r<this._len;r++)t[r]=this.data[r];this.data=t}},e.prototype.toStatic=function(){if(!!this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,a2&&this._len>11&&(this.data=new Float32Array(t)))}},e.prototype.getBoundingRect=function(){ro[0]=ro[1]=no[0]=no[1]=Number.MAX_VALUE,Fs[0]=Fs[1]=io[0]=io[1]=-Number.MAX_VALUE;var t=this.data,r=0,n=0,i=0,o=0,s;for(s=0;s<this._len;){var a=t[s++],l=s===1;switch(l&&(r=t[s],n=t[s+1],i=r,o=n),a){case ye.M:r=i=t[s++],n=o=t[s++],no[0]=i,no[1]=o,io[0]=i,io[1]=o;break;case ye.L:k4(r,n,t[s],t[s+1],no,io),r=t[s++],n=t[s++];break;case ye.C:lQ(r,n,t[s++],t[s++],t[s++],t[s++],t[s],t[s+1],no,io),r=t[s++],n=t[s++];break;case ye.Q:uQ(r,n,t[s++],t[s++],t[s],t[s+1],no,io),r=t[s++],n=t[s++];break;case ye.A:var u=t[s++],c=t[s++],f=t[s++],h=t[s++],d=t[s++],p=t[s++]+d;s+=1;var v=!t[s++];l&&(i=fl(d)*f+u,o=hl(d)*h+c),cQ(u,c,f,h,d,p,v,no,io),r=fl(p)*f+u,n=hl(p)*h+c;break;case ye.R:i=r=t[s++],o=n=t[s++];var m=t[s++],g=t[s++];k4(i,o,i+m,o+g,no,io);break;case ye.Z:r=i,n=o;break}xc(ro,ro,no),Lc(Fs,Fs,io)}return s===0&&(ro[0]=ro[1]=Fs[0]=Fs[1]=0),new ue(ro[0],ro[1],Fs[0]-ro[0],Fs[1]-ro[1])},e.prototype._calculateLength=function(){var t=this.data,r=this._len,n=this._ux,i=this._uy,o=0,s=0,a=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var u=this._pathSegLen,c=0,f=0,h=0;h<r;){var d=t[h++],p=h===1;p&&(o=t[h],s=t[h+1],a=o,l=s);var v=-1;switch(d){case ye.M:o=a=t[h++],s=l=t[h++];break;case ye.L:{var m=t[h++],g=t[h++],_=m-o,b=g-s;(Xo(_)>n||Xo(b)>i||h===r-1)&&(v=Math.sqrt(_*_+b*b),o=m,s=g);break}case ye.C:{var w=t[h++],T=t[h++],m=t[h++],g=t[h++],S=t[h++],k=t[h++];v=EK(o,s,w,T,m,g,S,k,10),o=S,s=k;break}case ye.Q:{var w=t[h++],T=t[h++],m=t[h++],g=t[h++];v=MK(o,s,w,T,m,g,10),o=m,s=g;break}case ye.A:var A=t[h++],C=t[h++],x=t[h++],I=t[h++],N=t[h++],B=t[h++],V=B+N;h+=1,t[h++],p&&(a=fl(N)*x+A,l=hl(N)*I+C),v=s2(x,I)*o2(la,Math.abs(B)),o=fl(V)*x+A,s=hl(V)*I+C;break;case ye.R:{a=o=t[h++],l=s=t[h++];var F=t[h++],G=t[h++];v=F*2+G*2;break}case ye.Z:{var _=a-o,b=l-s;v=Math.sqrt(_*_+b*b),o=a,s=l;break}}v>=0&&(u[f++]=v,c+=v)}return this._pathLen=c,c},e.prototype.rebuildPath=function(t,r){var n=this.data,i=this._ux,o=this._uy,s=this._len,a,l,u,c,f,h,d=r<1,p,v,m=0,g=0,_,b=0,w,T;if(d&&(this._pathSegLen||this._calculateLength(),p=this._pathSegLen,v=this._pathLen,_=r*v,!_))return;t:for(var S=0;S<s;){var k=n[S++],A=S===1;switch(A&&(u=n[S],c=n[S+1],a=u,l=c),k!==ye.L&&b>0&&(t.lineTo(w,T),b=0),k){case ye.M:a=u=n[S++],l=c=n[S++],t.moveTo(u,c);break;case ye.L:{f=n[S++],h=n[S++];var C=Xo(f-u),x=Xo(h-c);if(C>i||x>o){if(d){var I=p[g++];if(m+I>_){var N=(_-m)/I;t.lineTo(u*(1-N)+f*N,c*(1-N)+h*N);break t}m+=I}t.lineTo(f,h),u=f,c=h,b=0}else{var B=C*C+x*x;B>b&&(w=f,T=h,b=B)}break}case ye.C:{var V=n[S++],F=n[S++],G=n[S++],Z=n[S++],q=n[S++],et=n[S++];if(d){var I=p[g++];if(m+I>_){var N=(_-m)/I;Om(u,V,G,q,N,ul),Om(c,F,Z,et,N,cl),t.bezierCurveTo(ul[1],cl[1],ul[2],cl[2],ul[3],cl[3]);break t}m+=I}t.bezierCurveTo(V,F,G,Z,q,et),u=q,c=et;break}case ye.Q:{var V=n[S++],F=n[S++],G=n[S++],Z=n[S++];if(d){var I=p[g++];if(m+I>_){var N=(_-m)/I;Rm(u,V,G,N,ul),Rm(c,F,Z,N,cl),t.quadraticCurveTo(ul[1],cl[1],ul[2],cl[2]);break t}m+=I}t.quadraticCurveTo(V,F,G,Z),u=G,c=Z;break}case ye.A:var At=n[S++],Dt=n[S++],Pt=n[S++],Et=n[S++],qt=n[S++],Y=n[S++],it=n[S++],K=!n[S++],gt=Pt>Et?Pt:Et,Ct=Xo(Pt-Et)>.001,xt=qt+Y,ct=!1;if(d){var I=p[g++];m+I>_&&(xt=qt+Y*(_-m)/I,ct=!0),m+=I}if(Ct&&t.ellipse?t.ellipse(At,Dt,Pt,Et,it,qt,xt,K):t.arc(At,Dt,gt,qt,xt,K),ct)break t;A&&(a=fl(qt)*Pt+At,l=hl(qt)*Et+Dt),u=fl(xt)*Pt+At,c=hl(xt)*Et+Dt;break;case ye.R:a=u=n[S],l=c=n[S+1],f=n[S++],h=n[S++];var dt=n[S++],$=n[S++];if(d){var I=p[g++];if(m+I>_){var W=_-m;t.moveTo(f,h),t.lineTo(f+o2(W,dt),h),W-=dt,W>0&&t.lineTo(f+dt,h+o2(W,$)),W-=$,W>0&&t.lineTo(f+s2(dt-W,0),h+$),W-=dt,W>0&&t.lineTo(f,h+s2($-W,0));break t}m+=I}t.rect(f,h,dt,$);break;case ye.Z:if(d){var I=p[g++];if(m+I>_){var N=(_-m)/I;t.lineTo(u*(1-N)+a*N,c*(1-N)+l*N);break t}m+=I}t.closePath(),u=a,c=l}}},e.prototype.clone=function(){var t=new e,r=this.data;return t.data=r.slice?r.slice():Array.prototype.slice.call(r),t._len=this._len,t},e.CMD=ye,e.initDefaultProps=function(){var t=e.prototype;t._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,t._version=0}(),e}();const lu=hQ;function qu(e,t,r,n,i,o,s){if(i===0)return!1;var a=i,l=0,u=e;if(s>t+a&&s>n+a||s<t-a&&s<n-a||o>e+a&&o>r+a||o<e-a&&o<r-a)return!1;if(e!==r)l=(t-n)/(e-r),u=(e*n-r*t)/(e-r);else return Math.abs(o-e)<=a/2;var c=l*o-s+u,f=c*c/(l*l+1);return f<=a/2*a/2}function dQ(e,t,r,n,i,o,s,a,l,u,c){if(l===0)return!1;var f=l;if(c>t+f&&c>n+f&&c>o+f&&c>a+f||c<t-f&&c<n-f&&c<o-f&&c<a-f||u>e+f&&u>r+f&&u>i+f&&u>s+f||u<e-f&&u<r-f&&u<i-f&&u<s-f)return!1;var h=PK(e,t,r,n,i,o,s,a,u,c,null);return h<=f/2}function pQ(e,t,r,n,i,o,s,a,l){if(s===0)return!1;var u=s;if(l>t+u&&l>n+u&&l>o+u||l<t-u&&l<n-u&&l<o-u||a>e+u&&a>r+u&&a>i+u||a<e-u&&a<r-u&&a<i-u)return!1;var c=AK(e,t,r,n,i,o,a,l,null);return c<=u/2}var C4=Math.PI*2;function B0(e){return e%=C4,e<0&&(e+=C4),e}var dh=Math.PI*2;function vQ(e,t,r,n,i,o,s,a,l){if(s===0)return!1;var u=s;a-=e,l-=t;var c=Math.sqrt(a*a+l*l);if(c-u>r||c+u<r)return!1;if(Math.abs(n-i)%dh<1e-4)return!0;if(o){var f=n;n=B0(i),i=B0(f)}else n=B0(n),i=B0(i);n>i&&(i+=dh);var h=Math.atan2(l,a);return h<0&&(h+=dh),h>=n&&h<=i||h+dh>=n&&h+dh<=i}function dl(e,t,r,n,i,o){if(o>t&&o>n||o<t&&o<n||n===t)return 0;var s=(o-t)/(n-t),a=n<t?1:-1;(s===1||s===0)&&(a=n<t?.5:-.5);var l=s*(r-e)+e;return l===i?1/0:l>i?a:0}var zs=lu.CMD,pl=Math.PI*2,gQ=1e-4;function mQ(e,t){return Math.abs(e-t)<gQ}var en=[-1,-1,-1],Jn=[-1,-1];function _Q(){var e=Jn[0];Jn[0]=Jn[1],Jn[1]=e}function yQ(e,t,r,n,i,o,s,a,l,u){if(u>t&&u>n&&u>o&&u>a||u<t&&u<n&&u<o&&u<a)return 0;var c=Im(t,n,o,a,u,en);if(c===0)return 0;for(var f=0,h=-1,d=void 0,p=void 0,v=0;v<c;v++){var m=en[v],g=m===0||m===1?.5:1,_=ur(e,r,i,s,m);_<l||(h<0&&(h=s7(t,n,o,a,Jn),Jn[1]<Jn[0]&&h>1&&_Q(),d=ur(t,n,o,a,Jn[0]),h>1&&(p=ur(t,n,o,a,Jn[1]))),h===2?m<Jn[0]?f+=d<t?g:-g:m<Jn[1]?f+=p<d?g:-g:f+=a<p?g:-g:m<Jn[0]?f+=d<t?g:-g:f+=a<d?g:-g)}return f}function bQ(e,t,r,n,i,o,s,a){if(a>t&&a>n&&a>o||a<t&&a<n&&a<o)return 0;var l=CK(t,n,o,a,en);if(l===0)return 0;var u=a7(t,n,o);if(u>=0&&u<=1){for(var c=0,f=$r(t,n,o,u),h=0;h<l;h++){var d=en[h]===0||en[h]===1?.5:1,p=$r(e,r,i,en[h]);p<s||(en[h]<u?c+=f<t?d:-d:c+=o<f?d:-d)}return c}else{var d=en[0]===0||en[0]===1?.5:1,p=$r(e,r,i,en[0]);return p<s?0:o<t?d:-d}}function wQ(e,t,r,n,i,o,s,a){if(a-=t,a>r||a<-r)return 0;var l=Math.sqrt(r*r-a*a);en[0]=-l,en[1]=l;var u=Math.abs(n-i);if(u<1e-4)return 0;if(u>=pl-1e-4){n=0,i=pl;var c=o?1:-1;return s>=en[0]+e&&s<=en[1]+e?c:0}if(n>i){var f=n;n=i,i=f}n<0&&(n+=pl,i+=pl);for(var h=0,d=0;d<2;d++){var p=en[d];if(p+e>s){var v=Math.atan2(a,p),c=o?1:-1;v<0&&(v=pl+v),(v>=n&&v<=i||v+pl>=n&&v+pl<=i)&&(v>Math.PI/2&&v<Math.PI*1.5&&(c=-c),h+=c)}}return h}function I7(e,t,r,n,i){for(var o=e.data,s=e.len(),a=0,l=0,u=0,c=0,f=0,h,d,p=0;p<s;){var v=o[p++],m=p===1;switch(v===zs.M&&p>1&&(r||(a+=dl(l,u,c,f,n,i))),m&&(l=o[p],u=o[p+1],c=l,f=u),v){case zs.M:c=o[p++],f=o[p++],l=c,u=f;break;case zs.L:if(r){if(qu(l,u,o[p],o[p+1],t,n,i))return!0}else a+=dl(l,u,o[p],o[p+1],n,i)||0;l=o[p++],u=o[p++];break;case zs.C:if(r){if(dQ(l,u,o[p++],o[p++],o[p++],o[p++],o[p],o[p+1],t,n,i))return!0}else a+=yQ(l,u,o[p++],o[p++],o[p++],o[p++],o[p],o[p+1],n,i)||0;l=o[p++],u=o[p++];break;case zs.Q:if(r){if(pQ(l,u,o[p++],o[p++],o[p],o[p+1],t,n,i))return!0}else a+=bQ(l,u,o[p++],o[p++],o[p],o[p+1],n,i)||0;l=o[p++],u=o[p++];break;case zs.A:var g=o[p++],_=o[p++],b=o[p++],w=o[p++],T=o[p++],S=o[p++];p+=1;var k=!!(1-o[p++]);h=Math.cos(T)*b+g,d=Math.sin(T)*w+_,m?(c=h,f=d):a+=dl(l,u,h,d,n,i);var A=(n-g)*w/b+g;if(r){if(vQ(g,_,w,T,T+S,k,t,A,i))return!0}else a+=wQ(g,_,w,T,T+S,k,A,i);l=Math.cos(T+S)*b+g,u=Math.sin(T+S)*w+_;break;case zs.R:c=l=o[p++],f=u=o[p++];var C=o[p++],x=o[p++];if(h=c+C,d=f+x,r){if(qu(c,f,h,f,t,n,i)||qu(h,f,h,d,t,n,i)||qu(h,d,c,d,t,n,i)||qu(c,d,c,f,t,n,i))return!0}else a+=dl(h,f,h,d,n,i),a+=dl(c,d,c,f,n,i);break;case zs.Z:if(r){if(qu(l,u,c,f,t,n,i))return!0}else a+=dl(l,u,c,f,n,i);l=c,u=f;break}}return!r&&!mQ(u,f)&&(a+=dl(l,u,c,f,n,i)||0),a!==0}function SQ(e,t,r){return I7(e,0,!1,t,r)}function TQ(e,t,r,n){return I7(e,t,!0,r,n)}var O7=ne({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},Yl),kQ={style:ne({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},t_.style)},u2=Io.concat(["invisible","culling","z","z2","zlevel","parent"]),PQ=function(e){Ce(t,e);function t(r){return e.call(this,r)||this}return t.prototype.update=function(){var r=this;e.prototype.update.call(this);var n=this.style;if(n.decal){var i=this._decalEl=this._decalEl||new t;i.buildPath===t.prototype.buildPath&&(i.buildPath=function(l){r.buildPath(l,r.shape)}),i.silent=!0;var o=i.style;for(var s in n)o[s]!==n[s]&&(o[s]=n[s]);o.fill=n.fill?n.decal:null,o.decal=null,o.shadowColor=null,n.strokeFirst&&(o.stroke=null);for(var a=0;a<u2.length;++a)i[u2[a]]=this[u2[a]];i.__dirty|=Ln}else this._decalEl&&(this._decalEl=null)},t.prototype.getDecalElement=function(){return this._decalEl},t.prototype._init=function(r){var n=ge(r);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var o=0;o<n.length;o++){var s=n[o],a=r[s];s==="style"?this.style?at(this.style,a):this.useStyle(a):s==="shape"?at(this.shape,a):e.prototype.attrKV.call(this,s,a)}this.style||this.useStyle({})},t.prototype.getDefaultStyle=function(){return null},t.prototype.getDefaultShape=function(){return{}},t.prototype.canBeInsideText=function(){return this.hasFill()},t.prototype.getInsideTextFill=function(){var r=this.style.fill;if(r!=="none"){if(Mt(r)){var n=Dm(r,0);return n>.5?XS:n>.2?rJ:YS}else if(r)return YS}return XS},t.prototype.getInsideTextStroke=function(r){var n=this.style.fill;if(Mt(n)){var i=this.__zr,o=!!(i&&i.isDarkMode()),s=Dm(r,0)<HS;if(o===s)return n}},t.prototype.buildPath=function(r,n,i){},t.prototype.pathUpdated=function(){this.__dirty&=~Ec},t.prototype.getUpdatedPathProxy=function(r){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,r),this.path},t.prototype.createPathProxy=function(){this.path=new lu(!1)},t.prototype.hasStroke=function(){var r=this.style,n=r.stroke;return!(n==null||n==="none"||!(r.lineWidth>0))},t.prototype.hasFill=function(){var r=this.style,n=r.fill;return n!=null&&n!=="none"},t.prototype.getBoundingRect=function(){var r=this._rect,n=this.style,i=!r;if(i){var o=!1;this.path||(o=!0,this.createPathProxy());var s=this.path;(o||this.__dirty&Ec)&&(s.beginPath(),this.buildPath(s,this.shape,!1),this.pathUpdated()),r=s.getBoundingRect()}if(this._rect=r,this.hasStroke()&&this.path&&this.path.len()>0){var a=this._rectStroke||(this._rectStroke=r.clone());if(this.__dirty||i){a.copy(r);var l=n.strokeNoScale?this.getLineScale():1,u=n.lineWidth;if(!this.hasFill()){var c=this.strokeContainThreshold;u=Math.max(u,c==null?4:c)}l>1e-10&&(a.width+=u/l,a.height+=u/l,a.x-=u/l/2,a.y-=u/l/2)}return a}return r},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect(),s=this.style;if(r=i[0],n=i[1],o.contain(r,n)){var a=this.path;if(this.hasStroke()){var l=s.lineWidth,u=s.strokeNoScale?this.getLineScale():1;if(u>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),TQ(a,l/u,r,n)))return!0}if(this.hasFill())return SQ(a,r,n)}return!1},t.prototype.dirtyShape=function(){this.__dirty|=Ec,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},t.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},t.prototype.animateShape=function(r){return this.animate("shape",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():r==="shape"?this.dirtyShape():this.markRedraw()},t.prototype.attrKV=function(r,n){r==="shape"?this.setShape(n):e.prototype.attrKV.call(this,r,n)},t.prototype.setShape=function(r,n){var i=this.shape;return i||(i=this.shape={}),typeof r=="string"?i[r]=n:at(i,r),this.dirtyShape(),this},t.prototype.shapeChanged=function(){return!!(this.__dirty&Ec)},t.prototype.createStyle=function(r){return Z1(O7,r)},t.prototype._innerSaveToNormal=function(r){e.prototype._innerSaveToNormal.call(this,r);var n=this._normalState;r.shape&&!n.shape&&(n.shape=at({},this.shape))},t.prototype._applyStateObj=function(r,n,i,o,s,a){e.prototype._applyStateObj.call(this,r,n,i,o,s,a);var l=!(n&&o),u;if(n&&n.shape?s?o?u=n.shape:(u=at({},i.shape),at(u,n.shape)):(u=at({},o?this.shape:i.shape),at(u,n.shape)):l&&(u=i.shape),u)if(s){this.shape=at({},this.shape);for(var c={},f=ge(u),h=0;h<f.length;h++){var d=f[h];typeof u[d]=="object"?this.shape[d]=u[d]:c[d]=u[d]}this._transitionState(r,{shape:c},a)}else this.shape=u,this.dirtyShape()},t.prototype._mergeStates=function(r){for(var n=e.prototype._mergeStates.call(this,r),i,o=0;o<r.length;o++){var s=r[o];s.shape&&(i=i||{},this._mergeStyle(i,s.shape))}return i&&(n.shape=i),n},t.prototype.getAnimationStyleProps=function(){return kQ},t.prototype.isZeroArea=function(){return!1},t.extend=function(r){var n=function(o){Ce(s,o);function s(a){var l=o.call(this,a)||this;return r.init&&r.init.call(l,a),l}return s.prototype.getDefaultStyle=function(){return $t(r.style)},s.prototype.getDefaultShape=function(){return $t(r.shape)},s}(t);for(var i in r)typeof r[i]=="function"&&(n.prototype[i]=r[i]);return n},t.initDefaultProps=function(){var r=t.prototype;r.type="path",r.strokeContainThreshold=5,r.segmentIgnoreThreshold=0,r.subPixelOptimize=!1,r.autoBatch=!1,r.__dirty=Ln|id|Ec}(),t}(Su);const pe=PQ;var EQ=ne({strokeFirst:!0,font:ou,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},O7),R7=function(e){Ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.hasStroke=function(){var r=this.style,n=r.stroke;return n!=null&&n!=="none"&&r.lineWidth>0},t.prototype.hasFill=function(){var r=this.style,n=r.fill;return n!=null&&n!=="none"},t.prototype.createStyle=function(r){return Z1(EQ,r)},t.prototype.setBoundingRect=function(r){this._rect=r},t.prototype.getBoundingRect=function(){var r=this.style;if(!this._rect){var n=r.text;n!=null?n+="":n="";var i=Gk(n,r.font,r.textAlign,r.textBaseline);if(i.x+=r.x||0,i.y+=r.y||0,this.hasStroke()){var o=r.lineWidth;i.x-=o/2,i.y-=o/2,i.width+=o,i.height+=o}this._rect=i}return this._rect},t.initDefaultProps=function(){var r=t.prototype;r.dirtyRectTolerance=10}(),t}(Su);R7.prototype.type="tspan";const QS=R7;var CQ=ne({x:0,y:0},Yl),AQ={style:ne({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},t_.style)};function MQ(e){return!!(e&&typeof e!="string"&&e.width&&e.height)}var D7=function(e){Ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createStyle=function(r){return Z1(CQ,r)},t.prototype._getSize=function(r){var n=this.style,i=n[r];if(i!=null)return i;var o=MQ(n.image)?n.image:this.__image;if(!o)return 0;var s=r==="width"?"height":"width",a=n[s];return a==null?o[r]:o[r]/o[s]*a},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return AQ},t.prototype.getBoundingRect=function(){var r=this.style;return this._rect||(this._rect=new ue(r.x||0,r.y||0,this.getWidth(),this.getHeight())),this._rect},t}(Su);D7.prototype.type="image";const Cs=D7;function xQ(e,t){var r=t.x,n=t.y,i=t.width,o=t.height,s=t.r,a,l,u,c;i<0&&(r=r+i,i=-i),o<0&&(n=n+o,o=-o),typeof s=="number"?a=l=u=c=s:s instanceof Array?s.length===1?a=l=u=c=s[0]:s.length===2?(a=u=s[0],l=c=s[1]):s.length===3?(a=s[0],l=c=s[1],u=s[2]):(a=s[0],l=s[1],u=s[2],c=s[3]):a=l=u=c=0;var f;a+l>i&&(f=a+l,a*=i/f,l*=i/f),u+c>i&&(f=u+c,u*=i/f,c*=i/f),l+u>o&&(f=l+u,l*=o/f,u*=o/f),a+c>o&&(f=a+c,a*=o/f,c*=o/f),e.moveTo(r+a,n),e.lineTo(r+i-l,n),l!==0&&e.arc(r+i-l,n+l,l,-Math.PI/2,0),e.lineTo(r+i,n+o-u),u!==0&&e.arc(r+i-u,n+o-u,u,0,Math.PI/2),e.lineTo(r+c,n+o),c!==0&&e.arc(r+c,n+o-c,c,Math.PI/2,Math.PI),e.lineTo(r,n+a),a!==0&&e.arc(r+a,n+a,a,Math.PI,Math.PI*1.5)}var Oc=Math.round;function N7(e,t,r){if(!!t){var n=t.x1,i=t.x2,o=t.y1,s=t.y2;e.x1=n,e.x2=i,e.y1=o,e.y2=s;var a=r&&r.lineWidth;return a&&(Oc(n*2)===Oc(i*2)&&(e.x1=e.x2=Bl(n,a,!0)),Oc(o*2)===Oc(s*2)&&(e.y1=e.y2=Bl(o,a,!0))),e}}function F7(e,t,r){if(!!t){var n=t.x,i=t.y,o=t.width,s=t.height;e.x=n,e.y=i,e.width=o,e.height=s;var a=r&&r.lineWidth;return a&&(e.x=Bl(n,a,!0),e.y=Bl(i,a,!0),e.width=Math.max(Bl(n+o,a,!1)-e.x,o===0?0:1),e.height=Math.max(Bl(i+s,a,!1)-e.y,s===0?0:1)),e}}function Bl(e,t,r){if(!t)return e;var n=Oc(e*2);return(n+Oc(t))%2===0?n/2:(n+(r?1:-1))/2}var LQ=function(){function e(){this.x=0,this.y=0,this.width=0,this.height=0}return e}(),IQ={},z7=function(e){Ce(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new LQ},t.prototype.buildPath=function(r,n){var i,o,s,a;if(this.subPixelOptimize){var l=F7(IQ,n,this.style);i=l.x,o=l.y,s=l.width,a=l.height,l.r=n.r,n=l}else i=n.x,o=n.y,s=n.width,a=n.height;n.r?xQ(r,n):r.rect(i,o,s,a)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t}(pe);z7.prototype.type="rect";const er=z7;var A4={fill:"#000"},M4=2,OQ={style:ne({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},t_.style)},B7=function(e){Ce(t,e);function t(r){var n=e.call(this)||this;return n.type="text",n._children=[],n._defaultStyle=A4,n.attr(r),n}return t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){e.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var r=0;r<this._children.length;r++){var n=this._children[r];n.zlevel=this.zlevel,n.z=this.z,n.z2=this.z2,n.culling=this.culling,n.cursor=this.cursor,n.invisible=this.invisible}},t.prototype.updateTransform=function(){var r=this.innerTransformable;r?(r.updateTransform(),r.transform&&(this.transform=r.transform)):e.prototype.updateTransform.call(this)},t.prototype.getLocalTransform=function(r){var n=this.innerTransformable;return n?n.getLocalTransform(r):e.prototype.getLocalTransform.call(this,r)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),e.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){this._childCursor=0,zQ(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(r){e.prototype.addSelfToZr.call(this,r);for(var n=0;n<this._children.length;n++)this._children[n].__zr=r},t.prototype.removeSelfFromZr=function(r){e.prototype.removeSelfFromZr.call(this,r);for(var n=0;n<this._children.length;n++)this._children[n].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var r=new ue(0,0,0,0),n=this._children,i=[],o=null,s=0;s<n.length;s++){var a=n[s],l=a.getBoundingRect(),u=a.getLocalTransform(i);u?(r.copy(l),r.applyTransform(u),o=o||r.clone(),o.union(r)):(o=o||l.clone(),o.union(l))}this._rect=o||r}return this._rect},t.prototype.setDefaultTextStyle=function(r){this._defaultStyle=r||A4},t.prototype.setTextContent=function(r){},t.prototype._mergeStyle=function(r,n){if(!n)return r;var i=n.rich,o=r.rich||i&&{};return at(r,n),i&&o?(this._mergeRich(o,i),r.rich=o):o&&(r.rich=o),r},t.prototype._mergeRich=function(r,n){for(var i=ge(n),o=0;o<i.length;o++){var s=i[o];r[s]=r[s]||{},at(r[s],n[s])}},t.prototype.getAnimationStyleProps=function(){return OQ},t.prototype._getOrCreateChild=function(r){var n=this._children[this._childCursor];return(!n||!(n instanceof r))&&(n=new r),this._children[this._childCursor++]=n,n.__zr=this.__zr,n.parent=this,n},t.prototype._updatePlainTexts=function(){var r=this.style,n=r.font||ou,i=r.padding,o=N4(r),s=KJ(o,r),a=c2(r),l=!!r.backgroundColor,u=s.outerHeight,c=s.outerWidth,f=s.contentWidth,h=s.lines,d=s.lineHeight,p=this._defaultStyle,v=r.x||0,m=r.y||0,g=r.align||p.align||"left",_=r.verticalAlign||p.verticalAlign||"top",b=v,w=Cc(m,s.contentHeight,_);if(a||i){var T=sd(v,c,g),S=Cc(m,u,_);a&&this._renderBackground(r,r,T,S,c,u)}w+=d/2,i&&(b=D4(v,g,i),_==="top"?w+=i[0]:_==="bottom"&&(w-=i[2]));for(var k=0,A=!1,C=R4("fill"in r?r.fill:(A=!0,p.fill)),x=O4("stroke"in r?r.stroke:!l&&(!p.autoStroke||A)?(k=M4,p.stroke):null),I=r.textShadowBlur>0,N=r.width!=null&&(r.overflow==="truncate"||r.overflow==="break"||r.overflow==="breakAll"),B=s.calculatedLineHeight,V=0;V<h.length;V++){var F=this._getOrCreateChild(QS),G=F.createStyle();F.useStyle(G),G.text=h[V],G.x=b,G.y=w,g&&(G.textAlign=g),G.textBaseline="middle",G.opacity=r.opacity,G.strokeFirst=!0,I&&(G.shadowBlur=r.textShadowBlur||0,G.shadowColor=r.textShadowColor||"transparent",G.shadowOffsetX=r.textShadowOffsetX||0,G.shadowOffsetY=r.textShadowOffsetY||0),G.stroke=x,G.fill=C,x&&(G.lineWidth=r.lineWidth||k,G.lineDash=r.lineDash,G.lineDashOffset=r.lineDashOffset||0),G.font=n,L4(G,r),w+=d,N&&F.setBoundingRect(new ue(sd(G.x,r.width,G.textAlign),Cc(G.y,B,G.textBaseline),f,B))}},t.prototype._updateRichTexts=function(){var r=this.style,n=N4(r),i=tQ(n,r),o=i.width,s=i.outerWidth,a=i.outerHeight,l=r.padding,u=r.x||0,c=r.y||0,f=this._defaultStyle,h=r.align||f.align,d=r.verticalAlign||f.verticalAlign,p=sd(u,s,h),v=Cc(c,a,d),m=p,g=v;l&&(m+=l[3],g+=l[0]);var _=m+o;c2(r)&&this._renderBackground(r,r,p,v,s,a);for(var b=!!r.backgroundColor,w=0;w<i.lines.length;w++){for(var T=i.lines[w],S=T.tokens,k=S.length,A=T.lineHeight,C=T.width,x=0,I=m,N=_,B=k-1,V=void 0;x<k&&(V=S[x],!V.align||V.align==="left");)this._placeToken(V,r,A,g,I,"left",b),C-=V.width,I+=V.width,x++;for(;B>=0&&(V=S[B],V.align==="right");)this._placeToken(V,r,A,g,N,"right",b),C-=V.width,N-=V.width,B--;for(I+=(o-(I-m)-(_-N)-C)/2;x<=B;)V=S[x],this._placeToken(V,r,A,g,I+V.width/2,"center",b),I+=V.width,x++;g+=A}},t.prototype._placeToken=function(r,n,i,o,s,a,l){var u=n.rich[r.styleName]||{};u.text=r.text;var c=r.verticalAlign,f=o+i/2;c==="top"?f=o+r.height/2:c==="bottom"&&(f=o+i-r.height/2);var h=!r.isLineHolder&&c2(u);h&&this._renderBackground(u,n,a==="right"?s-r.width:a==="center"?s-r.width/2:s,f-r.height/2,r.width,r.height);var d=!!u.backgroundColor,p=r.textPadding;p&&(s=D4(s,a,p),f-=r.height/2-p[0]-r.innerHeight/2);var v=this._getOrCreateChild(QS),m=v.createStyle();v.useStyle(m);var g=this._defaultStyle,_=!1,b=0,w=R4("fill"in u?u.fill:"fill"in n?n.fill:(_=!0,g.fill)),T=O4("stroke"in u?u.stroke:"stroke"in n?n.stroke:!d&&!l&&(!g.autoStroke||_)?(b=M4,g.stroke):null),S=u.textShadowBlur>0||n.textShadowBlur>0;m.text=r.text,m.x=s,m.y=f,S&&(m.shadowBlur=u.textShadowBlur||n.textShadowBlur||0,m.shadowColor=u.textShadowColor||n.textShadowColor||"transparent",m.shadowOffsetX=u.textShadowOffsetX||n.textShadowOffsetX||0,m.shadowOffsetY=u.textShadowOffsetY||n.textShadowOffsetY||0),m.textAlign=a,m.textBaseline="middle",m.font=r.font||ou,m.opacity=Ed(u.opacity,n.opacity,1),L4(m,u),T&&(m.lineWidth=Ed(u.lineWidth,n.lineWidth,b),m.lineDash=Jt(u.lineDash,n.lineDash),m.lineDashOffset=n.lineDashOffset||0,m.stroke=T),w&&(m.fill=w);var k=r.contentWidth,A=r.contentHeight;v.setBoundingRect(new ue(sd(m.x,k,m.textAlign),Cc(m.y,A,m.textBaseline),k,A))},t.prototype._renderBackground=function(r,n,i,o,s,a){var l=r.backgroundColor,u=r.borderWidth,c=r.borderColor,f=l&&l.image,h=l&&!f,d=r.borderRadius,p=this,v,m;if(h||r.lineHeight||u&&c){v=this._getOrCreateChild(er),v.useStyle(v.createStyle()),v.style.fill=null;var g=v.shape;g.x=i,g.y=o,g.width=s,g.height=a,g.r=d,v.dirtyShape()}if(h){var _=v.style;_.fill=l||null,_.fillOpacity=Jt(r.fillOpacity,1)}else if(f){m=this._getOrCreateChild(Cs),m.onload=function(){p.dirtyStyle()};var b=m.style;b.image=l.image,b.x=i,b.y=o,b.width=s,b.height=a}if(u&&c){var _=v.style;_.lineWidth=u,_.stroke=c,_.strokeOpacity=Jt(r.strokeOpacity,1),_.lineDash=r.borderDash,_.lineDashOffset=r.borderDashOffset||0,v.strokeContainThreshold=0,v.hasFill()&&v.hasStroke()&&(_.strokeFirst=!0,_.lineWidth*=2)}var w=(v||m).style;w.shadowBlur=r.shadowBlur||0,w.shadowColor=r.shadowColor||"transparent",w.shadowOffsetX=r.shadowOffsetX||0,w.shadowOffsetY=r.shadowOffsetY||0,w.opacity=Ed(r.opacity,n.opacity,1)},t.makeFont=function(r){var n="";return FQ(r)&&(n=[r.fontStyle,r.fontWeight,NQ(r.fontSize),r.fontFamily||"sans-serif"].join(" ")),n&&Po(n)||r.textFont||r.font},t}(Su),RQ={left:!0,right:1,center:1},DQ={top:1,bottom:1,middle:1},x4=["fontStyle","fontWeight","fontSize","fontFamily"];function NQ(e){return typeof e=="string"&&(e.indexOf("px")!==-1||e.indexOf("rem")!==-1||e.indexOf("em")!==-1)?e:isNaN(+e)?Dk+"px":e+"px"}function L4(e,t){for(var r=0;r<x4.length;r++){var n=x4[r],i=t[n];i!=null&&(e[n]=i)}}function FQ(e){return e.fontSize!=null||e.fontFamily||e.fontWeight}function zQ(e){return I4(e),z(e.rich,I4),e}function I4(e){if(e){e.font=B7.makeFont(e);var t=e.align;t==="middle"&&(t="center"),e.align=t==null||RQ[t]?t:"left";var r=e.verticalAlign;r==="center"&&(r="middle"),e.verticalAlign=r==null||DQ[r]?r:"top";var n=e.padding;n&&(e.padding=G9(e.padding))}}function O4(e,t){return e==null||t<=0||e==="transparent"||e==="none"?null:e.image||e.colorStops?"#000":e}function R4(e){return e==null||e==="none"?null:e.image||e.colorStops?"#000":e}function D4(e,t,r){return t==="right"?e-r[1]:t==="center"?e+r[3]/2-r[1]/2:e+r[3]}function N4(e){var t=e.text;return t!=null&&(t+=""),t}function c2(e){return!!(e.backgroundColor||e.lineHeight||e.borderWidth&&e.borderColor)}const rr=B7;var ae=Re(),BQ=function(e,t,r,n){if(n){var i=ae(n);i.dataIndex=r,i.dataType=t,i.seriesIndex=e,n.type==="group"&&n.traverse(function(o){var s=ae(o);s.seriesIndex=e,s.dataIndex=r,s.dataType=t})}},F4=1,z4={},$7=Re(),Jk=Re(),Qk=0,Wp=1,e_=2,ui=["emphasis","blur","select"],B4=["normal","emphasis","blur","select"],$Q=10,VQ=9,ql="highlight",Yg="downplay",xd="select",qg="unselect",Ld="toggleSelect";function Zu(e){return e!=null&&e!=="none"}var $4=new $p(100);function V4(e){if(Mt(e)){var t=$4.get(e);return t||(t=i4(e,-.1),$4.put(e,t)),t}else if(q1(e)){var r=at({},e);return r.colorStops=Lt(e.colorStops,function(n){return{offset:n.offset,color:i4(n.color,-.1)}}),r}return e}function r_(e,t,r){e.onHoverStateChange&&(e.hoverState||0)!==r&&e.onHoverStateChange(t),e.hoverState=r}function V7(e){r_(e,"emphasis",e_)}function U7(e){e.hoverState===e_&&r_(e,"normal",Qk)}function tP(e){r_(e,"blur",Wp)}function W7(e){e.hoverState===Wp&&r_(e,"normal",Qk)}function UQ(e){e.selected=!0}function WQ(e){e.selected=!1}function U4(e,t,r){t(e,r)}function As(e,t,r){U4(e,t,r),e.isGroup&&e.traverse(function(n){U4(n,t,r)})}function t3(e,t){switch(t){case"emphasis":e.hoverState=e_;break;case"normal":e.hoverState=Qk;break;case"blur":e.hoverState=Wp;break;case"select":e.selected=!0}}function jQ(e,t,r,n){for(var i=e.style,o={},s=0;s<t.length;s++){var a=t[s],l=i[a];o[a]=l==null?n&&n[a]:l}for(var s=0;s<e.animators.length;s++){var u=e.animators[s];u.__fromStateTransition&&u.__fromStateTransition.indexOf(r)<0&&u.targetName==="style"&&u.saveTo(o,t)}return o}function GQ(e,t,r,n){var i=r&&he(r,"select")>=0,o=!1;if(e instanceof pe){var s=$7(e),a=i&&s.selectFill||s.normalFill,l=i&&s.selectStroke||s.normalStroke;if(Zu(a)||Zu(l)){n=n||{};var u=n.style||{};u.fill==="inherit"?(o=!0,n=at({},n),u=at({},u),u.fill=a):!Zu(u.fill)&&Zu(a)?(o=!0,n=at({},n),u=at({},u),u.fill=V4(a)):!Zu(u.stroke)&&Zu(l)&&(o||(n=at({},n),u=at({},u)),u.stroke=V4(l)),n.style=u}}if(n&&n.z2==null){o||(n=at({},n));var c=e.z2EmphasisLift;n.z2=e.z2+(c!=null?c:$Q)}return n}function HQ(e,t,r){if(r&&r.z2==null){r=at({},r);var n=e.z2SelectLift;r.z2=e.z2+(n!=null?n:VQ)}return r}function XQ(e,t,r){var n=he(e.currentStates,t)>=0,i=e.style.opacity,o=n?null:jQ(e,["opacity"],t,{opacity:1});r=r||{};var s=r.style||{};return s.opacity==null&&(r=at({},r),s=at({opacity:n?i:o.opacity*.1},s),r.style=s),r}function f2(e,t){var r=this.states[e];if(this.style){if(e==="emphasis")return GQ(this,e,t,r);if(e==="blur")return XQ(this,e,r);if(e==="select")return HQ(this,e,r)}return r}function eP(e){e.stateProxy=f2;var t=e.getTextContent(),r=e.getTextGuideLine();t&&(t.stateProxy=f2),r&&(r.stateProxy=f2)}function W4(e,t){!X7(e,t)&&!e.__highByOuter&&As(e,V7)}function j4(e,t){!X7(e,t)&&!e.__highByOuter&&As(e,U7)}function sp(e,t){e.__highByOuter|=1<<(t||0),As(e,V7)}function ap(e,t){!(e.__highByOuter&=~(1<<(t||0)))&&As(e,U7)}function j7(e){As(e,tP)}function rP(e){As(e,W7)}function G7(e){As(e,UQ)}function H7(e){As(e,WQ)}function X7(e,t){return e.__highDownSilentOnTouch&&t.zrByTouch}function Y7(e){var t=e.getModel(),r=[],n=[];t.eachComponent(function(i,o){var s=Jk(o),a=i==="series",l=a?e.getViewOfSeriesModel(o):e.getViewOfComponentModel(o);!a&&n.push(l),s.isBlured&&(l.group.traverse(function(u){W7(u)}),a&&r.push(o)),s.isBlured=!1}),z(n,function(i){i&&i.toggleBlurSeries&&i.toggleBlurSeries(r,!1,t)})}function e3(e,t,r,n){var i=n.getModel();r=r||"coordinateSystem";function o(u,c){for(var f=0;f<c.length;f++){var h=u.getItemGraphicEl(c[f]);h&&rP(h)}}if(e!=null&&!(!t||t==="none")){var s=i.getSeriesByIndex(e),a=s.coordinateSystem;a&&a.master&&(a=a.master);var l=[];i.eachSeries(function(u){var c=s===u,f=u.coordinateSystem;f&&f.master&&(f=f.master);var h=f&&a?f===a:c;if(!(r==="series"&&!c||r==="coordinateSystem"&&!h||t==="series"&&c)){var d=n.getViewOfSeriesModel(u);if(d.group.traverse(function(m){tP(m)}),Yr(t))o(u.getData(),t);else if(Rt(t))for(var p=ge(t),v=0;v<p.length;v++)o(u.getData(p[v]),t[p[v]]);l.push(u),Jk(u).isBlured=!0}}),i.eachComponent(function(u,c){if(u!=="series"){var f=n.getViewOfComponentModel(c);f&&f.toggleBlurSeries&&f.toggleBlurSeries(l,!0,i)}})}}function r3(e,t,r){if(!(e==null||t==null)){var n=r.getModel().getComponent(e,t);if(!!n){Jk(n).isBlured=!0;var i=r.getViewOfComponentModel(n);!i||!i.focusBlurEnabled||i.group.traverse(function(o){tP(o)})}}}function YQ(e,t,r){var n=e.seriesIndex,i=e.getData(t.dataType);if(!!i){var o=au(i,t);o=(ht(o)?o[0]:o)||0;var s=i.getItemGraphicEl(o);if(!s)for(var a=i.count(),l=0;!s&&l<a;)s=i.getItemGraphicEl(l++);if(s){var u=ae(s);e3(n,u.focus,u.blurScope,r)}else{var c=e.get(["emphasis","focus"]),f=e.get(["emphasis","blurScope"]);c!=null&&e3(n,c,f,r)}}}function nP(e,t,r,n){var i={focusSelf:!1,dispatchers:null};if(e==null||e==="series"||t==null||r==null)return i;var o=n.getModel().getComponent(e,t);if(!o)return i;var s=n.getViewOfComponentModel(o);if(!s||!s.findHighDownDispatchers)return i;for(var a=s.findHighDownDispatchers(r),l,u=0;u<a.length;u++)if(ae(a[u]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:a}}function qQ(e,t,r){var n=ae(e),i=nP(n.componentMainType,n.componentIndex,n.componentHighDownName,r),o=i.dispatchers,s=i.focusSelf;o?(s&&r3(n.componentMainType,n.componentIndex,r),z(o,function(a){return W4(a,t)})):(e3(n.seriesIndex,n.focus,n.blurScope,r),n.focus==="self"&&r3(n.componentMainType,n.componentIndex,r),W4(e,t))}function ZQ(e,t,r){Y7(r);var n=ae(e),i=nP(n.componentMainType,n.componentIndex,n.componentHighDownName,r).dispatchers;i?z(i,function(o){return j4(o,t)}):j4(e,t)}function KQ(e,t,r){if(!!o3(t)){var n=t.dataType,i=e.getData(n),o=au(i,t);ht(o)||(o=[o]),e[t.type===Ld?"toggleSelect":t.type===xd?"select":"unselect"](o,n)}}function G4(e){var t=e.getAllData();z(t,function(r){var n=r.data,i=r.type;n.eachItemGraphicEl(function(o,s){e.isSelected(s,i)?G7(o):H7(o)})})}function JQ(e){var t=[];return e.eachSeries(function(r){var n=r.getAllData();z(n,function(i){i.data;var o=i.type,s=r.getSelectedDataIndices();if(s.length>0){var a={dataIndex:s,seriesIndex:r.seriesIndex};o!=null&&(a.dataType=o),t.push(a)}})}),t}function n3(e,t,r){iP(e,!0),As(e,eP),ttt(e,t,r)}function QQ(e){iP(e,!1)}function uu(e,t,r,n){n?QQ(e):n3(e,t,r)}function ttt(e,t,r){var n=ae(e);t!=null?(n.focus=t,n.blurScope=r):n.focus&&(n.focus=null)}var H4=["emphasis","blur","select"],ett={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function lp(e,t,r,n){r=r||"itemStyle";for(var i=0;i<H4.length;i++){var o=H4[i],s=t.getModel([o,r]),a=e.ensureState(o);a.style=n?n(s):s[ett[r]]()}}function iP(e,t){var r=t===!1,n=e;e.highDownSilentOnTouch&&(n.__highDownSilentOnTouch=e.highDownSilentOnTouch),(!r||n.__highDownDispatcher)&&(n.__highByOuter=n.__highByOuter||0,n.__highDownDispatcher=!r)}function i3(e){return!!(e&&e.__highDownDispatcher)}function rtt(e){var t=z4[e];return t==null&&F4<=32&&(t=z4[e]=F4++),t}function o3(e){var t=e.type;return t===xd||t===qg||t===Ld}function X4(e){var t=e.type;return t===ql||t===Yg}function ntt(e){var t=$7(e);t.normalFill=e.style.fill,t.normalStroke=e.style.stroke;var r=e.states.select||{};t.selectFill=r.style&&r.style.fill||null,t.selectStroke=r.style&&r.style.stroke||null}var Ku=lu.CMD,itt=[[],[],[]],Y4=Math.sqrt,ott=Math.atan2;function stt(e,t){if(!!t){var r=e.data,n=e.len(),i,o,s,a,l,u,c=Ku.M,f=Ku.C,h=Ku.L,d=Ku.R,p=Ku.A,v=Ku.Q;for(s=0,a=0;s<n;){switch(i=r[s++],a=s,o=0,i){case c:o=1;break;case h:o=1;break;case f:o=3;break;case v:o=2;break;case p:var m=t[4],g=t[5],_=Y4(t[0]*t[0]+t[1]*t[1]),b=Y4(t[2]*t[2]+t[3]*t[3]),w=ott(-t[1]/b,t[0]/_);r[s]*=_,r[s++]+=m,r[s]*=b,r[s++]+=g,r[s++]*=_,r[s++]*=b,r[s++]+=w,r[s++]+=w,s+=2,a=s;break;case d:u[0]=r[s++],u[1]=r[s++],on(u,u,t),r[a++]=u[0],r[a++]=u[1],u[0]+=r[s++],u[1]+=r[s++],on(u,u,t),r[a++]=u[0],r[a++]=u[1]}for(l=0;l<o;l++){var T=itt[l];T[0]=r[s++],T[1]=r[s++],on(T,T,t),r[a++]=T[0],r[a++]=T[1]}}e.increaseVersion()}}var h2=Math.sqrt,$0=Math.sin,V0=Math.cos,ph=Math.PI;function q4(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function s3(e,t){return(e[0]*t[0]+e[1]*t[1])/(q4(e)*q4(t))}function Z4(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(s3(e,t))}function K4(e,t,r,n,i,o,s,a,l,u,c){var f=l*(ph/180),h=V0(f)*(e-r)/2+$0(f)*(t-n)/2,d=-1*$0(f)*(e-r)/2+V0(f)*(t-n)/2,p=h*h/(s*s)+d*d/(a*a);p>1&&(s*=h2(p),a*=h2(p));var v=(i===o?-1:1)*h2((s*s*(a*a)-s*s*(d*d)-a*a*(h*h))/(s*s*(d*d)+a*a*(h*h)))||0,m=v*s*d/a,g=v*-a*h/s,_=(e+r)/2+V0(f)*m-$0(f)*g,b=(t+n)/2+$0(f)*m+V0(f)*g,w=Z4([1,0],[(h-m)/s,(d-g)/a]),T=[(h-m)/s,(d-g)/a],S=[(-1*h-m)/s,(-1*d-g)/a],k=Z4(T,S);if(s3(T,S)<=-1&&(k=ph),s3(T,S)>=1&&(k=0),k<0){var A=Math.round(k/ph*1e6)/1e6;k=ph*2+A%2*ph}c.addData(u,_,b,s,a,w,k,f,o)}var att=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,ltt=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function utt(e){var t=new lu;if(!e)return t;var r=0,n=0,i=r,o=n,s,a=lu.CMD,l=e.match(att);if(!l)return t;for(var u=0;u<l.length;u++){for(var c=l[u],f=c.charAt(0),h=void 0,d=c.match(ltt)||[],p=d.length,v=0;v<p;v++)d[v]=parseFloat(d[v]);for(var m=0;m<p;){var g=void 0,_=void 0,b=void 0,w=void 0,T=void 0,S=void 0,k=void 0,A=r,C=n,x=void 0,I=void 0;switch(f){case"l":r+=d[m++],n+=d[m++],h=a.L,t.addData(h,r,n);break;case"L":r=d[m++],n=d[m++],h=a.L,t.addData(h,r,n);break;case"m":r+=d[m++],n+=d[m++],h=a.M,t.addData(h,r,n),i=r,o=n,f="l";break;case"M":r=d[m++],n=d[m++],h=a.M,t.addData(h,r,n),i=r,o=n,f="L";break;case"h":r+=d[m++],h=a.L,t.addData(h,r,n);break;case"H":r=d[m++],h=a.L,t.addData(h,r,n);break;case"v":n+=d[m++],h=a.L,t.addData(h,r,n);break;case"V":n=d[m++],h=a.L,t.addData(h,r,n);break;case"C":h=a.C,t.addData(h,d[m++],d[m++],d[m++],d[m++],d[m++],d[m++]),r=d[m-2],n=d[m-1];break;case"c":h=a.C,t.addData(h,d[m++]+r,d[m++]+n,d[m++]+r,d[m++]+n,d[m++]+r,d[m++]+n),r+=d[m-2],n+=d[m-1];break;case"S":g=r,_=n,x=t.len(),I=t.data,s===a.C&&(g+=r-I[x-4],_+=n-I[x-3]),h=a.C,A=d[m++],C=d[m++],r=d[m++],n=d[m++],t.addData(h,g,_,A,C,r,n);break;case"s":g=r,_=n,x=t.len(),I=t.data,s===a.C&&(g+=r-I[x-4],_+=n-I[x-3]),h=a.C,A=r+d[m++],C=n+d[m++],r+=d[m++],n+=d[m++],t.addData(h,g,_,A,C,r,n);break;case"Q":A=d[m++],C=d[m++],r=d[m++],n=d[m++],h=a.Q,t.addData(h,A,C,r,n);break;case"q":A=d[m++]+r,C=d[m++]+n,r+=d[m++],n+=d[m++],h=a.Q,t.addData(h,A,C,r,n);break;case"T":g=r,_=n,x=t.len(),I=t.data,s===a.Q&&(g+=r-I[x-4],_+=n-I[x-3]),r=d[m++],n=d[m++],h=a.Q,t.addData(h,g,_,r,n);break;case"t":g=r,_=n,x=t.len(),I=t.data,s===a.Q&&(g+=r-I[x-4],_+=n-I[x-3]),r+=d[m++],n+=d[m++],h=a.Q,t.addData(h,g,_,r,n);break;case"A":b=d[m++],w=d[m++],T=d[m++],S=d[m++],k=d[m++],A=r,C=n,r=d[m++],n=d[m++],h=a.A,K4(A,C,r,n,S,k,b,w,T,h,t);break;case"a":b=d[m++],w=d[m++],T=d[m++],S=d[m++],k=d[m++],A=r,C=n,r+=d[m++],n+=d[m++],h=a.A,K4(A,C,r,n,S,k,b,w,T,h,t);break}}(f==="z"||f==="Z")&&(h=a.Z,t.addData(h),r=i,n=o),s=h}return t.toStatic(),t}var q7=function(e){Ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.applyTransform=function(r){},t}(pe);function Z7(e){return e.setData!=null}function K7(e,t){var r=utt(e),n=at({},t);return n.buildPath=function(i){if(Z7(i)){i.setData(r.data);var o=i.getContext();o&&i.rebuildPath(o,1)}else{var o=i;r.rebuildPath(o,1)}},n.applyTransform=function(i){stt(r,i),this.dirtyShape()},n}function ctt(e,t){return new q7(K7(e,t))}function ftt(e,t){var r=K7(e,t),n=function(i){Ce(o,i);function o(s){var a=i.call(this,s)||this;return a.applyTransform=r.applyTransform,a.buildPath=r.buildPath,a}return o}(q7);return n}function htt(e,t){for(var r=[],n=e.length,i=0;i<n;i++){var o=e[i];r.push(o.getUpdatedPathProxy(!0))}var s=new pe(t);return s.createPathProxy(),s.buildPath=function(a){if(Z7(a)){a.appendPath(r);var l=a.getContext();l&&a.rebuildPath(l,1)}},s}var dtt=function(){function e(){this.cx=0,this.cy=0,this.r=0}return e}(),J7=function(e){Ce(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new dtt},t.prototype.buildPath=function(r,n){r.moveTo(n.cx+n.r,n.cy),r.arc(n.cx,n.cy,n.r,0,Math.PI*2)},t}(pe);J7.prototype.type="circle";const oP=J7;var ptt=function(){function e(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return e}(),Q7=function(e){Ce(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new ptt},t.prototype.buildPath=function(r,n){var i=.5522848,o=n.cx,s=n.cy,a=n.rx,l=n.ry,u=a*i,c=l*i;r.moveTo(o-a,s),r.bezierCurveTo(o-a,s-c,o-u,s-l,o,s-l),r.bezierCurveTo(o+u,s-l,o+a,s-c,o+a,s),r.bezierCurveTo(o+a,s+c,o+u,s+l,o,s+l),r.bezierCurveTo(o-u,s+l,o-a,s+c,o-a,s),r.closePath()},t}(pe);Q7.prototype.type="ellipse";const tN=Q7;var eN=Math.PI,d2=eN*2,vl=Math.sin,Ju=Math.cos,vtt=Math.acos,Nr=Math.atan2,J4=Math.abs,Id=Math.sqrt,ad=Math.max,oo=Math.min,wi=1e-4;function gtt(e,t,r,n,i,o,s,a){var l=r-e,u=n-t,c=s-i,f=a-o,h=f*l-c*u;if(!(h*h<wi))return h=(c*(t-o)-f*(e-i))/h,[e+h*l,t+h*u]}function U0(e,t,r,n,i,o,s){var a=e-r,l=t-n,u=(s?o:-o)/Id(a*a+l*l),c=u*l,f=-u*a,h=e+c,d=t+f,p=r+c,v=n+f,m=(h+p)/2,g=(d+v)/2,_=p-h,b=v-d,w=_*_+b*b,T=i-o,S=h*v-p*d,k=(b<0?-1:1)*Id(ad(0,T*T*w-S*S)),A=(S*b-_*k)/w,C=(-S*_-b*k)/w,x=(S*b+_*k)/w,I=(-S*_+b*k)/w,N=A-m,B=C-g,V=x-m,F=I-g;return N*N+B*B>V*V+F*F&&(A=x,C=I),{cx:A,cy:C,x0:-c,y0:-f,x1:A*(i/T-1),y1:C*(i/T-1)}}function mtt(e){var t;if(ht(e)){var r=e.length;if(!r)return e;r===1?t=[e[0],e[0],0,0]:r===2?t=[e[0],e[0],e[1],e[1]]:r===3?t=e.concat(e[2]):t=e}else t=[e,e,e,e];return t}function _tt(e,t){var r,n=ad(t.r,0),i=ad(t.r0||0,0),o=n>0,s=i>0;if(!(!o&&!s)){if(o||(n=i,i=0),i>n){var a=n;n=i,i=a}var l=t.startAngle,u=t.endAngle;if(!(isNaN(l)||isNaN(u))){var c=t.cx,f=t.cy,h=!!t.clockwise,d=J4(u-l),p=d>d2&&d%d2;if(p>wi&&(d=p),!(n>wi))e.moveTo(c,f);else if(d>d2-wi)e.moveTo(c+n*Ju(l),f+n*vl(l)),e.arc(c,f,n,l,u,!h),i>wi&&(e.moveTo(c+i*Ju(u),f+i*vl(u)),e.arc(c,f,i,u,l,h));else{var v=void 0,m=void 0,g=void 0,_=void 0,b=void 0,w=void 0,T=void 0,S=void 0,k=void 0,A=void 0,C=void 0,x=void 0,I=void 0,N=void 0,B=void 0,V=void 0,F=n*Ju(l),G=n*vl(l),Z=i*Ju(u),q=i*vl(u),et=d>wi;if(et){var At=t.cornerRadius;At&&(r=mtt(At),v=r[0],m=r[1],g=r[2],_=r[3]);var Dt=J4(n-i)/2;if(b=oo(Dt,g),w=oo(Dt,_),T=oo(Dt,v),S=oo(Dt,m),C=k=ad(b,w),x=A=ad(T,S),(k>wi||A>wi)&&(I=n*Ju(u),N=n*vl(u),B=i*Ju(l),V=i*vl(l),d<eN)){var Pt=gtt(F,G,B,V,I,N,Z,q);if(Pt){var Et=F-Pt[0],qt=G-Pt[1],Y=I-Pt[0],it=N-Pt[1],K=1/vl(vtt((Et*Y+qt*it)/(Id(Et*Et+qt*qt)*Id(Y*Y+it*it)))/2),gt=Id(Pt[0]*Pt[0]+Pt[1]*Pt[1]);C=oo(k,(n-gt)/(K+1)),x=oo(A,(i-gt)/(K-1))}}}if(!et)e.moveTo(c+F,f+G);else if(C>wi){var Ct=oo(g,C),xt=oo(_,C),ct=U0(B,V,F,G,n,Ct,h),dt=U0(I,N,Z,q,n,xt,h);e.moveTo(c+ct.cx+ct.x0,f+ct.cy+ct.y0),C<k&&Ct===xt?e.arc(c+ct.cx,f+ct.cy,C,Nr(ct.y0,ct.x0),Nr(dt.y0,dt.x0),!h):(Ct>0&&e.arc(c+ct.cx,f+ct.cy,Ct,Nr(ct.y0,ct.x0),Nr(ct.y1,ct.x1),!h),e.arc(c,f,n,Nr(ct.cy+ct.y1,ct.cx+ct.x1),Nr(dt.cy+dt.y1,dt.cx+dt.x1),!h),xt>0&&e.arc(c+dt.cx,f+dt.cy,xt,Nr(dt.y1,dt.x1),Nr(dt.y0,dt.x0),!h))}else e.moveTo(c+F,f+G),e.arc(c,f,n,l,u,!h);if(!(i>wi)||!et)e.lineTo(c+Z,f+q);else if(x>wi){var Ct=oo(v,x),xt=oo(m,x),ct=U0(Z,q,I,N,i,-xt,h),dt=U0(F,G,B,V,i,-Ct,h);e.lineTo(c+ct.cx+ct.x0,f+ct.cy+ct.y0),x<A&&Ct===xt?e.arc(c+ct.cx,f+ct.cy,x,Nr(ct.y0,ct.x0),Nr(dt.y0,dt.x0),!h):(xt>0&&e.arc(c+ct.cx,f+ct.cy,xt,Nr(ct.y0,ct.x0),Nr(ct.y1,ct.x1),!h),e.arc(c,f,i,Nr(ct.cy+ct.y1,ct.cx+ct.x1),Nr(dt.cy+dt.y1,dt.cx+dt.x1),h),Ct>0&&e.arc(c+dt.cx,f+dt.cy,Ct,Nr(dt.y1,dt.x1),Nr(dt.y0,dt.x0),!h))}else e.lineTo(c+Z,f+q),e.arc(c,f,i,u,l,h)}e.closePath()}}}var ytt=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return e}(),rN=function(e){Ce(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new ytt},t.prototype.buildPath=function(r,n){_tt(r,n)},t.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},t}(pe);rN.prototype.type="sector";const jp=rN;var btt=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return e}(),nN=function(e){Ce(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new btt},t.prototype.buildPath=function(r,n){var i=n.cx,o=n.cy,s=Math.PI*2;r.moveTo(i+n.r,o),r.arc(i,o,n.r,0,s,!1),r.moveTo(i+n.r0,o),r.arc(i,o,n.r0,0,s,!0)},t}(pe);nN.prototype.type="ring";const iN=nN;function wtt(e,t,r,n){var i=[],o=[],s=[],a=[],l,u,c,f;if(n){c=[1/0,1/0],f=[-1/0,-1/0];for(var h=0,d=e.length;h<d;h++)xc(c,c,e[h]),Lc(f,f,e[h]);xc(c,c,n[0]),Lc(f,f,n[1])}for(var h=0,d=e.length;h<d;h++){var p=e[h];if(r)l=e[h?h-1:d-1],u=e[(h+1)%d];else if(h===0||h===d-1){i.push(jZ(e[h]));continue}else l=e[h-1],u=e[h+1];q9(o,u,l),My(o,o,t);var v=IS(p,l),m=IS(p,u),g=v+m;g!==0&&(v/=g,m/=g),My(s,o,-v),My(a,o,m);var _=WA([],p,s),b=WA([],p,a);n&&(Lc(_,_,c),xc(_,_,f),Lc(b,b,c),xc(b,b,f)),i.push(_),i.push(b)}return r&&i.push(i.shift()),i}function oN(e,t,r){var n=t.smooth,i=t.points;if(i&&i.length>=2){if(n){var o=wtt(i,n,r,t.smoothConstraint);e.moveTo(i[0][0],i[0][1]);for(var s=i.length,a=0;a<(r?s:s-1);a++){var l=o[a*2],u=o[a*2+1],c=i[(a+1)%s];e.bezierCurveTo(l[0],l[1],u[0],u[1],c[0],c[1])}}else{e.moveTo(i[0][0],i[0][1]);for(var a=1,f=i.length;a<f;a++)e.lineTo(i[a][0],i[a][1])}r&&e.closePath()}}var Stt=function(){function e(){this.points=null,this.smooth=0,this.smoothConstraint=null}return e}(),sN=function(e){Ce(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new Stt},t.prototype.buildPath=function(r,n){oN(r,n,!0)},t}(pe);sN.prototype.type="polygon";const up=sN;var Ttt=function(){function e(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return e}(),aN=function(e){Ce(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Ttt},t.prototype.buildPath=function(r,n){oN(r,n,!1)},t}(pe);aN.prototype.type="polyline";const lN=aN;var ktt={},Ptt=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}(),uN=function(e){Ce(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Ptt},t.prototype.buildPath=function(r,n){var i,o,s,a;if(this.subPixelOptimize){var l=N7(ktt,n,this.style);i=l.x1,o=l.y1,s=l.x2,a=l.y2}else i=n.x1,o=n.y1,s=n.x2,a=n.y2;var u=n.percent;u!==0&&(r.moveTo(i,o),u<1&&(s=i*(1-u)+s*u,a=o*(1-u)+a*u),r.lineTo(s,a))},t.prototype.pointAt=function(r){var n=this.shape;return[n.x1*(1-r)+n.x2*r,n.y1*(1-r)+n.y2*r]},t}(pe);uN.prototype.type="line";const La=uN;var fn=[],Ett=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return e}();function Q4(e,t,r){var n=e.cpx2,i=e.cpy2;return n!=null||i!=null?[(r?e4:ur)(e.x1,e.cpx1,e.cpx2,e.x2,t),(r?e4:ur)(e.y1,e.cpy1,e.cpy2,e.y2,t)]:[(r?r4:$r)(e.x1,e.cpx1,e.x2,t),(r?r4:$r)(e.y1,e.cpy1,e.y2,t)]}var cN=function(e){Ce(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Ett},t.prototype.buildPath=function(r,n){var i=n.x1,o=n.y1,s=n.x2,a=n.y2,l=n.cpx1,u=n.cpy1,c=n.cpx2,f=n.cpy2,h=n.percent;h!==0&&(r.moveTo(i,o),c==null||f==null?(h<1&&(Rm(i,l,s,h,fn),l=fn[1],s=fn[2],Rm(o,u,a,h,fn),u=fn[1],a=fn[2]),r.quadraticCurveTo(l,u,s,a)):(h<1&&(Om(i,l,c,s,h,fn),l=fn[1],c=fn[2],s=fn[3],Om(o,u,f,a,h,fn),u=fn[1],f=fn[2],a=fn[3]),r.bezierCurveTo(l,u,c,f,s,a)))},t.prototype.pointAt=function(r){return Q4(this.shape,r,!1)},t.prototype.tangentAt=function(r){var n=Q4(this.shape,r,!0);return $k(n,n)},t}(pe);cN.prototype.type="bezier-curve";const n_=cN;var Ctt=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),fN=function(e){Ce(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Ctt},t.prototype.buildPath=function(r,n){var i=n.cx,o=n.cy,s=Math.max(n.r,0),a=n.startAngle,l=n.endAngle,u=n.clockwise,c=Math.cos(a),f=Math.sin(a);r.moveTo(c*s+i,f*s+o),r.arc(i,o,s,a,l,!u)},t}(pe);fN.prototype.type="arc";const sP=fN;var Att=function(e){Ce(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="compound",r}return t.prototype._updatePathDirty=function(){for(var r=this.shape.paths,n=this.shapeChanged(),i=0;i<r.length;i++)n=n||r[i].shapeChanged();n&&this.dirtyShape()},t.prototype.beforeBrush=function(){this._updatePathDirty();for(var r=this.shape.paths||[],n=this.getGlobalScale(),i=0;i<r.length;i++)r[i].path||r[i].createPathProxy(),r[i].path.setScale(n[0],n[1],r[i].segmentIgnoreThreshold)},t.prototype.buildPath=function(r,n){for(var i=n.paths||[],o=0;o<i.length;o++)i[o].buildPath(r,i[o].shape,!0)},t.prototype.afterBrush=function(){for(var r=this.shape.paths||[],n=0;n<r.length;n++)r[n].pathUpdated()},t.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),pe.prototype.getBoundingRect.call(this)},t}(pe);const Mtt=Att;var xtt=function(){function e(t){this.colorStops=t||[]}return e.prototype.addColorStop=function(t,r){this.colorStops.push({offset:t,color:r})},e}();const hN=xtt;var Ltt=function(e){Ce(t,e);function t(r,n,i,o,s,a){var l=e.call(this,s)||this;return l.x=r==null?0:r,l.y=n==null?0:n,l.x2=i==null?1:i,l.y2=o==null?0:o,l.type="linear",l.global=a||!1,l}return t}(hN);const aP=Ltt;var Itt=function(e){Ce(t,e);function t(r,n,i,o,s){var a=e.call(this,o)||this;return a.x=r==null?.5:r,a.y=n==null?.5:n,a.r=i==null?.5:i,a.type="radial",a.global=s||!1,a}return t}(hN);const Ott=Itt;var gl=[0,0],ml=[0,0],W0=new Le,j0=new Le,Rtt=function(){function e(t,r){this._corners=[],this._axes=[],this._origin=[0,0];for(var n=0;n<4;n++)this._corners[n]=new Le;for(var n=0;n<2;n++)this._axes[n]=new Le;t&&this.fromBoundingRect(t,r)}return e.prototype.fromBoundingRect=function(t,r){var n=this._corners,i=this._axes,o=t.x,s=t.y,a=o+t.width,l=s+t.height;if(n[0].set(o,s),n[1].set(a,s),n[2].set(a,l),n[3].set(o,l),r)for(var u=0;u<4;u++)n[u].transform(r);Le.sub(i[0],n[1],n[0]),Le.sub(i[1],n[3],n[0]),i[0].normalize(),i[1].normalize();for(var u=0;u<2;u++)this._origin[u]=i[u].dot(n[0])},e.prototype.intersect=function(t,r){var n=!0,i=!r;return W0.set(1/0,1/0),j0.set(0,0),!this._intersectCheckOneSide(this,t,W0,j0,i,1)&&(n=!1,i)||!this._intersectCheckOneSide(t,this,W0,j0,i,-1)&&(n=!1,i)||i||Le.copy(r,n?W0:j0),n},e.prototype._intersectCheckOneSide=function(t,r,n,i,o,s){for(var a=!0,l=0;l<2;l++){var u=this._axes[l];if(this._getProjMinMaxOnAxis(l,t._corners,gl),this._getProjMinMaxOnAxis(l,r._corners,ml),gl[1]<ml[0]||gl[0]>ml[1]){if(a=!1,o)return a;var c=Math.abs(ml[0]-gl[1]),f=Math.abs(gl[0]-ml[1]);Math.min(c,f)>i.len()&&(c<f?Le.scale(i,u,-c*s):Le.scale(i,u,f*s))}else if(n){var c=Math.abs(ml[0]-gl[1]),f=Math.abs(gl[0]-ml[1]);Math.min(c,f)<n.len()&&(c<f?Le.scale(n,u,c*s):Le.scale(n,u,-f*s))}}return a},e.prototype._getProjMinMaxOnAxis=function(t,r,n){for(var i=this._axes[t],o=this._origin,s=r[0].dot(i)+o[t],a=s,l=s,u=1;u<r.length;u++){var c=r[u].dot(i)+o[t];a=Math.min(c,a),l=Math.max(c,l)}n[0]=a,n[1]=l},e}();const $m=Rtt;var Dtt=[],Ntt=function(e){Ce(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.notClear=!0,r.incremental=!0,r._displayables=[],r._temporaryDisplayables=[],r._cursor=0,r}return t.prototype.traverse=function(r,n){r.call(n,this)},t.prototype.useStyle=function(){this.style={}},t.prototype.getCursor=function(){return this._cursor},t.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},t.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},t.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},t.prototype.addDisplayable=function(r,n){n?this._temporaryDisplayables.push(r):this._displayables.push(r),this.markRedraw()},t.prototype.addDisplayables=function(r,n){n=n||!1;for(var i=0;i<r.length;i++)this.addDisplayable(r[i],n)},t.prototype.getDisplayables=function(){return this._displayables},t.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},t.prototype.eachPendingDisplayable=function(r){for(var n=this._cursor;n<this._displayables.length;n++)r&&r(this._displayables[n]);for(var n=0;n<this._temporaryDisplayables.length;n++)r&&r(this._temporaryDisplayables[n])},t.prototype.update=function(){this.updateTransform();for(var r=this._cursor;r<this._displayables.length;r++){var n=this._displayables[r];n.parent=this,n.update(),n.parent=null}for(var r=0;r<this._temporaryDisplayables.length;r++){var n=this._temporaryDisplayables[r];n.parent=this,n.update(),n.parent=null}},t.prototype.getBoundingRect=function(){if(!this._rect){for(var r=new ue(1/0,1/0,-1/0,-1/0),n=0;n<this._displayables.length;n++){var i=this._displayables[n],o=i.getBoundingRect().clone();i.needLocalTransform()&&o.applyTransform(i.getLocalTransform(Dtt)),r.union(o)}this._rect=r}return this._rect},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect();if(o.contain(i[0],i[1]))for(var s=0;s<this._displayables.length;s++){var a=this._displayables[s];if(a.contain(r,n))return!0}return!1},t}(Su);const Ftt=Ntt;var ztt=Re();function lP(e,t,r,n,i){var o;if(t&&t.ecModel){var s=t.ecModel.getUpdatePayload();o=s&&s.animation}var a=t&&t.isAnimationEnabled(),l=e==="update";if(a){var u=void 0,c=void 0,f=void 0;n?(u=Jt(n.duration,200),c=Jt(n.easing,"cubicOut"),f=0):(u=t.getShallow(l?"animationDurationUpdate":"animationDuration"),c=t.getShallow(l?"animationEasingUpdate":"animationEasing"),f=t.getShallow(l?"animationDelayUpdate":"animationDelay")),o&&(o.duration!=null&&(u=o.duration),o.easing!=null&&(c=o.easing),o.delay!=null&&(f=o.delay)),jt(f)&&(f=f(r,i)),jt(u)&&(u=u(r));var h={duration:u||0,delay:f,easing:c};return h}else return null}function uP(e,t,r,n,i,o,s){var a=!1,l;jt(i)?(s=o,o=i,i=null):Rt(i)&&(o=i.cb,s=i.during,a=i.isFrom,l=i.removeOpt,i=i.dataIndex);var u=e==="leave";u||t.stopAnimation("leave");var c=lP(e,n,i,u?l||{}:null,n&&n.getAnimationDelayParams?n.getAnimationDelayParams(t,i):null);if(c&&c.duration>0){var f=c.duration,h=c.delay,d=c.easing,p={duration:f,delay:h||0,easing:d,done:o,force:!!o||!!s,setToFinal:!u,scope:e,during:s};a?t.animateFrom(r,p):t.animateTo(r,p)}else t.stopAnimation(),!a&&t.attr(r),s&&s(1),o&&o()}function _r(e,t,r,n,i,o){uP("update",e,t,r,n,i,o)}function Oo(e,t,r,n,i,o){uP("enter",e,t,r,n,i,o)}function Od(e){if(!e.__zr)return!0;for(var t=0;t<e.animators.length;t++){var r=e.animators[t];if(r.scope==="leave")return!0}return!1}function cu(e,t,r,n,i,o){Od(e)||uP("leave",e,t,r,n,i,o)}function tM(e,t,r,n){e.removeTextContent(),e.removeTextGuideLine(),cu(e,{style:{opacity:0}},t,r,n)}function a3(e,t,r){function n(){e.parent&&e.parent.remove(e)}e.isGroup?e.traverse(function(i){i.isGroup||tM(i,t,r,n)}):tM(e,t,r,n)}function dN(e){ztt(e).oldStyle=e.style}var Vm=Math.max,Um=Math.min,l3={};function Btt(e){return pe.extend(e)}var $tt=ftt;function Vtt(e,t){return $tt(e,t)}function Xi(e,t){l3[e]=t}function pN(e){if(l3.hasOwnProperty(e))return l3[e]}function i_(e,t,r,n){var i=ctt(e,t);return r&&(n==="center"&&(r=gN(r,i.getBoundingRect())),mN(i,r)),i}function vN(e,t,r){var n=new Cs({style:{image:e,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(i){if(r==="center"){var o={width:i.width,height:i.height};n.setStyle(gN(t,o))}}});return n}function gN(e,t){var r=t.width/t.height,n=e.height*r,i;n<=e.width?i=e.height:(n=e.width,i=n/r);var o=e.x+e.width/2,s=e.y+e.height/2;return{x:o-n/2,y:s-i/2,width:n,height:i}}var Utt=htt;function mN(e,t){if(!!e.applyTransform){var r=e.getBoundingRect(),n=r.calculateTransform(t);e.applyTransform(n)}}function cp(e,t){return N7(e,e,{lineWidth:t}),e}function Wtt(e){return F7(e.shape,e.shape,e.style),e}var jtt=Bl;function Zg(e,t){for(var r=Uk([]);e&&e!==t;)jc(r,e.getLocalTransform(),r),e=e.parent;return r}function Hc(e,t,r){return t&&!Yr(t)&&(t=zl.getLocalTransform(t)),r&&(t=K1([],t)),on([],e,t)}function _N(e,t,r){var n=t[4]===0||t[5]===0||t[0]===0?1:Math.abs(2*t[4]/t[0]),i=t[4]===0||t[5]===0||t[2]===0?1:Math.abs(2*t[4]/t[2]),o=[e==="left"?-n:e==="right"?n:0,e==="top"?-i:e==="bottom"?i:0];return o=Hc(o,t,r),Math.abs(o[0])>Math.abs(o[1])?o[0]>0?"right":"left":o[1]>0?"bottom":"top"}function eM(e){return!e.isGroup}function Gtt(e){return e.shape!=null}function yN(e,t,r){if(!e||!t)return;function n(s){var a={};return s.traverse(function(l){eM(l)&&l.anid&&(a[l.anid]=l)}),a}function i(s){var a={x:s.x,y:s.y,rotation:s.rotation};return Gtt(s)&&(a.shape=at({},s.shape)),a}var o=n(e);t.traverse(function(s){if(eM(s)&&s.anid){var a=o[s.anid];if(a){var l=i(s);s.attr(i(a)),_r(s,l,r,ae(s).dataIndex)}}})}function Htt(e,t){return Lt(e,function(r){var n=r[0];n=Vm(n,t.x),n=Um(n,t.x+t.width);var i=r[1];return i=Vm(i,t.y),i=Um(i,t.y+t.height),[n,i]})}function Xtt(e,t){var r=Vm(e.x,t.x),n=Um(e.x+e.width,t.x+t.width),i=Vm(e.y,t.y),o=Um(e.y+e.height,t.y+t.height);if(n>=r&&o>=i)return{x:r,y:i,width:n-r,height:o-i}}function cP(e,t,r){var n=at({rectHover:!0},t),i=n.style={strokeNoScale:!0};if(r=r||{x:-1,y:-1,width:2,height:2},e)return e.indexOf("image://")===0?(i.image=e.slice(8),ne(i,r),new Cs(n)):i_(e.replace("path://",""),n,r,"center")}function Ytt(e,t,r,n,i){for(var o=0,s=i[i.length-1];o<i.length;o++){var a=i[o];if(bN(e,t,r,n,a[0],a[1],s[0],s[1]))return!0;s=a}}function bN(e,t,r,n,i,o,s,a){var l=r-e,u=n-t,c=s-i,f=a-o,h=p2(c,f,l,u);if(qtt(h))return!1;var d=e-i,p=t-o,v=p2(d,p,l,u)/h;if(v<0||v>1)return!1;var m=p2(d,p,c,f)/h;return!(m<0||m>1)}function p2(e,t,r,n){return e*n-r*t}function qtt(e){return e<=1e-6&&e>=-1e-6}function fP(e){var t=e.itemTooltipOption,r=e.componentModel,n=e.itemName,i=Mt(t)?{formatter:t}:t,o=r.mainType,s=r.componentIndex,a={componentType:o,name:n,$vars:["name"]};a[o+"Index"]=s;var l=e.formatterParamsExtra;l&&z(ge(l),function(c){pt(a,c)||(a[c]=l[c],a.$vars.push(c))});var u=ae(e.el);u.componentMainType=o,u.componentIndex=s,u.tooltipConfig={name:n,option:ne({content:n,formatterParams:a},i)}}function rM(e,t){var r;e.isGroup&&(r=t(e)),r||e.traverse(t)}function Ef(e,t){if(e)if(ht(e))for(var r=0;r<e.length;r++)rM(e[r],t);else rM(e,t)}Xi("circle",oP);Xi("ellipse",tN);Xi("sector",jp);Xi("ring",iN);Xi("polygon",up);Xi("polyline",lN);Xi("rect",er);Xi("line",La);Xi("bezierCurve",n_);Xi("arc",sP);const Ztt=Object.freeze(Object.defineProperty({__proto__:null,updateProps:_r,initProps:Oo,removeElement:cu,removeElementWithFadeOut:a3,isElementRemoved:Od,extendShape:Btt,extendPath:Vtt,registerShape:Xi,getShapeClass:pN,makePath:i_,makeImage:vN,mergePath:Utt,resizePath:mN,subPixelOptimizeLine:cp,subPixelOptimizeRect:Wtt,subPixelOptimize:jtt,getTransform:Zg,applyTransform:Hc,transformDirection:_N,groupTransition:yN,clipPointsByRect:Htt,clipRectByRect:Xtt,createIcon:cP,linePolygonIntersect:Ytt,lineLineIntersect:bN,setTooltipConfig:fP,traverseElements:Ef,Group:Ne,Image:Cs,Text:rr,Circle:oP,Ellipse:tN,Sector:jp,Ring:iN,Polygon:up,Polyline:lN,Rect:er,Line:La,BezierCurve:n_,Arc:sP,IncrementalDisplayable:Ftt,CompoundPath:Mtt,LinearGradient:aP,RadialGradient:Ott,BoundingRect:ue,OrientedBoundingRect:$m,Point:Le,Path:pe},Symbol.toStringTag,{value:"Module"}));var o_={};function Ktt(e,t){for(var r=0;r<ui.length;r++){var n=ui[r],i=t[n],o=e.ensureState(n);o.style=o.style||{},o.style.text=i}var s=e.currentStates.slice();e.clearStates(!0),e.setStyle({text:t.normal}),e.useStates(s,!0)}function nM(e,t,r){var n=e.labelFetcher,i=e.labelDataIndex,o=e.labelDimIndex,s=t.normal,a;n&&(a=n.getFormattedLabel(i,"normal",null,o,s&&s.get("formatter"),r!=null?{interpolatedValue:r}:null)),a==null&&(a=jt(e.defaultText)?e.defaultText(i,e,r):e.defaultText);for(var l={normal:a},u=0;u<ui.length;u++){var c=ui[u],f=t[c];l[c]=Jt(n?n.getFormattedLabel(i,c,null,o,f&&f.get("formatter")):null,a)}return l}function Cf(e,t,r,n){r=r||o_;for(var i=e instanceof rr,o=!1,s=0;s<B4.length;s++){var a=t[B4[s]];if(a&&a.getShallow("show")){o=!0;break}}var l=i?e:e.getTextContent();if(o){i||(l||(l=new rr,e.setTextContent(l)),e.stateProxy&&(l.stateProxy=e.stateProxy));var u=nM(r,t),c=t.normal,f=!!c.getShallow("show"),h=yn(c,n&&n.normal,r,!1,!i);h.text=u.normal,i||e.setTextConfig(Wm(c,r,!1));for(var s=0;s<ui.length;s++){var d=ui[s],a=t[d];if(a){var p=l.ensureState(d),v=!!Jt(a.getShallow("show"),f);if(v!==f&&(p.ignore=!v),p.style=yn(a,n&&n[d],r,!0,!i),p.style.text=u[d],!i){var m=e.ensureState(d);m.textConfig=Wm(a,r,!0)}}}l.silent=!!c.getShallow("silent"),l.style.x!=null&&(h.x=l.style.x),l.style.y!=null&&(h.y=l.style.y),l.ignore=!f,l.useStyle(h),l.dirty(),r.enableTextSetter&&(s_(l).setLabelText=function(g){var _=nM(r,t,g);Ktt(l,_)})}else l&&(l.ignore=!0);e.dirty()}function Tu(e,t){t=t||"label";for(var r={normal:e.getModel(t)},n=0;n<ui.length;n++){var i=ui[n];r[i]=e.getModel([i,t])}return r}function yn(e,t,r,n,i){var o={};return Jtt(o,e,r,n,i),t&&at(o,t),o}function Wm(e,t,r){t=t||{};var n={},i,o=e.getShallow("rotate"),s=Jt(e.getShallow("distance"),r?null:5),a=e.getShallow("offset");return i=e.getShallow("position")||(r?null:"inside"),i==="outside"&&(i=t.defaultOutsidePosition||"top"),i!=null&&(n.position=i),a!=null&&(n.offset=a),o!=null&&(o*=Math.PI/180,n.rotation=o),s!=null&&(n.distance=s),n.outsideFill=e.get("color")==="inherit"?t.inheritColor||null:"auto",n}function Jtt(e,t,r,n,i){r=r||o_;var o=t.ecModel,s=o&&o.option.textStyle,a=Qtt(t),l;if(a){l={};for(var u in a)if(a.hasOwnProperty(u)){var c=t.getModel(["rich",u]);aM(l[u]={},c,s,r,n,i,!1,!0)}}l&&(e.rich=l);var f=t.get("overflow");f&&(e.overflow=f);var h=t.get("minMargin");h!=null&&(e.margin=h),aM(e,t,s,r,n,i,!0,!1)}function Qtt(e){for(var t;e&&e!==e.ecModel;){var r=(e.option||o_).rich;if(r){t=t||{};for(var n=ge(r),i=0;i<n.length;i++){var o=n[i];t[o]=1}}e=e.parentModel}return t}var iM=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],oM=["align","lineHeight","width","height","tag","verticalAlign"],sM=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function aM(e,t,r,n,i,o,s,a){r=!i&&r||o_;var l=n&&n.inheritColor,u=t.getShallow("color"),c=t.getShallow("textBorderColor"),f=Jt(t.getShallow("opacity"),r.opacity);(u==="inherit"||u==="auto")&&(l?u=l:u=null),(c==="inherit"||c==="auto")&&(l?c=l:c=null),o||(u=u||r.color,c=c||r.textBorderColor),u!=null&&(e.fill=u),c!=null&&(e.stroke=c);var h=Jt(t.getShallow("textBorderWidth"),r.textBorderWidth);h!=null&&(e.lineWidth=h);var d=Jt(t.getShallow("textBorderType"),r.textBorderType);d!=null&&(e.lineDash=d);var p=Jt(t.getShallow("textBorderDashOffset"),r.textBorderDashOffset);p!=null&&(e.lineDashOffset=p),!i&&f==null&&!a&&(f=n&&n.defaultOpacity),f!=null&&(e.opacity=f),!i&&!o&&e.fill==null&&n.inheritColor&&(e.fill=n.inheritColor);for(var v=0;v<iM.length;v++){var m=iM[v],g=Jt(t.getShallow(m),r[m]);g!=null&&(e[m]=g)}for(var v=0;v<oM.length;v++){var m=oM[v],g=t.getShallow(m);g!=null&&(e[m]=g)}if(e.verticalAlign==null){var _=t.getShallow("baseline");_!=null&&(e.verticalAlign=_)}if(!s||!n.disableBox){for(var v=0;v<sM.length;v++){var m=sM[v],g=t.getShallow(m);g!=null&&(e[m]=g)}var b=t.getShallow("borderType");b!=null&&(e.borderDash=b),(e.backgroundColor==="auto"||e.backgroundColor==="inherit")&&l&&(e.backgroundColor=l),(e.borderColor==="auto"||e.borderColor==="inherit")&&l&&(e.borderColor=l)}}function wN(e,t){var r=t&&t.getModel("textStyle");return Po([e.fontStyle||r&&r.getShallow("fontStyle")||"",e.fontWeight||r&&r.getShallow("fontWeight")||"",(e.fontSize||r&&r.getShallow("fontSize")||12)+"px",e.fontFamily||r&&r.getShallow("fontFamily")||"sans-serif"].join(" "))}var s_=Re();function tet(e,t,r,n){if(!!e){var i=s_(e);i.prevValue=i.value,i.value=r;var o=t.normal;i.valueAnimation=o.get("valueAnimation"),i.valueAnimation&&(i.precision=o.get("precision"),i.defaultInterpolatedText=n,i.statesModels=t)}}var eet=["textStyle","color"],v2=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],g2=new rr,ret=function(){function e(){}return e.prototype.getTextColor=function(t){var r=this.ecModel;return this.getShallow("color")||(!t&&r?r.get(eet):null)},e.prototype.getFont=function(){return wN({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},e.prototype.getTextRect=function(t){for(var r={text:t,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},n=0;n<v2.length;n++)r[v2[n]]=this.getShallow(v2[n]);return g2.useStyle(r),g2.update(),g2.getBoundingRect()},e}();const net=ret;var SN=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],iet=op(SN),oet=function(){function e(){}return e.prototype.getLineStyle=function(t){return iet(this,t)},e}(),TN=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],set=op(TN),aet=function(){function e(){}return e.prototype.getItemStyle=function(t,r){return set(this,t,r)},e}(),ku=function(){function e(t,r,n){this.parentModel=r,this.ecModel=n,this.option=t}return e.prototype.init=function(t,r,n){},e.prototype.mergeOption=function(t,r){le(this.option,t,!0)},e.prototype.get=function(t,r){return t==null?this.option:this._doGet(this.parsePath(t),!r&&this.parentModel)},e.prototype.getShallow=function(t,r){var n=this.option,i=n==null?n:n[t];if(i==null&&!r){var o=this.parentModel;o&&(i=o.getShallow(t))}return i},e.prototype.getModel=function(t,r){var n=t!=null,i=n?this.parsePath(t):null,o=n?this._doGet(i):this.option;return r=r||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(i)),new e(o,r,this.ecModel)},e.prototype.isEmpty=function(){return this.option==null},e.prototype.restoreData=function(){},e.prototype.clone=function(){var t=this.constructor;return new t($t(this.option))},e.prototype.parsePath=function(t){return typeof t=="string"?t.split("."):t},e.prototype.resolveParentPath=function(t){return t},e.prototype.isAnimationEnabled=function(){if(!Zt.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},e.prototype._doGet=function(t,r){var n=this.option;if(!t)return n;for(var i=0;i<t.length&&!(!!t[i]&&(n=n&&typeof n=="object"?n[t[i]]:null,n==null));i++);return n==null&&r&&(n=r._doGet(this.resolveParentPath(t),r.parentModel)),n},e}();Kk(ku);UJ(ku);Gi(ku,oet);Gi(ku,aet);Gi(ku,XJ);Gi(ku,net);const Mr=ku;var uet=Math.round(Math.random()*10);function a_(e){return[e||"",uet++].join("_")}function cet(e){var t={};e.registerSubTypeDefaulter=function(r,n){var i=Co(r);t[i.main]=n},e.determineSubType=function(r,n){var i=n.type;if(!i){var o=Co(r).main;e.hasSubTypes(r)&&t[o]&&(i=t[o](n))}return i}}function fet(e,t){e.topologicalTravel=function(o,s,a,l){if(!o.length)return;var u=r(s),c=u.graph,f=u.noEntryList,h={};for(z(o,function(_){h[_]=!0});f.length;){var d=f.pop(),p=c[d],v=!!h[d];v&&(a.call(l,d,p.originalDeps.slice()),delete h[d]),z(p.successor,v?g:m)}z(h,function(){var _="";throw new Error(_)});function m(_){c[_].entryCount--,c[_].entryCount===0&&f.push(_)}function g(_){h[_]=!0,m(_)}};function r(o){var s={},a=[];return z(o,function(l){var u=n(s,l),c=u.originalDeps=t(l),f=i(c,o);u.entryCount=f.length,u.entryCount===0&&a.push(l),z(f,function(h){he(u.predecessor,h)<0&&u.predecessor.push(h);var d=n(s,h);he(d.successor,h)<0&&d.successor.push(l)})}),{graph:s,noEntryList:a}}function n(o,s){return o[s]||(o[s]={predecessor:[],successor:[]}),o[s]}function i(o,s){var a=[];return z(o,function(l){he(s,l)>=0&&a.push(l)}),a}}function l_(e,t){return le(le({},e,!0),t,!0)}const het={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},det={time:{month:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"],monthAbbr:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],dayOfWeek:["\u661F\u671F\u65E5","\u661F\u671F\u4E00","\u661F\u671F\u4E8C","\u661F\u671F\u4E09","\u661F\u671F\u56DB","\u661F\u671F\u4E94","\u661F\u671F\u516D"],dayOfWeekAbbr:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"]},legend:{selector:{all:"\u5168\u9009",inverse:"\u53CD\u9009"}},toolbox:{brush:{title:{rect:"\u77E9\u5F62\u9009\u62E9",polygon:"\u5708\u9009",lineX:"\u6A2A\u5411\u9009\u62E9",lineY:"\u7EB5\u5411\u9009\u62E9",keep:"\u4FDD\u6301\u9009\u62E9",clear:"\u6E05\u9664\u9009\u62E9"}},dataView:{title:"\u6570\u636E\u89C6\u56FE",lang:["\u6570\u636E\u89C6\u56FE","\u5173\u95ED","\u5237\u65B0"]},dataZoom:{title:{zoom:"\u533A\u57DF\u7F29\u653E",back:"\u533A\u57DF\u7F29\u653E\u8FD8\u539F"}},magicType:{title:{line:"\u5207\u6362\u4E3A\u6298\u7EBF\u56FE",bar:"\u5207\u6362\u4E3A\u67F1\u72B6\u56FE",stack:"\u5207\u6362\u4E3A\u5806\u53E0",tiled:"\u5207\u6362\u4E3A\u5E73\u94FA"}},restore:{title:"\u8FD8\u539F"},saveAsImage:{title:"\u4FDD\u5B58\u4E3A\u56FE\u7247",lang:["\u53F3\u952E\u53E6\u5B58\u4E3A\u56FE\u7247"]}},series:{typeNames:{pie:"\u997C\u56FE",bar:"\u67F1\u72B6\u56FE",line:"\u6298\u7EBF\u56FE",scatter:"\u6563\u70B9\u56FE",effectScatter:"\u6D9F\u6F2A\u6563\u70B9\u56FE",radar:"\u96F7\u8FBE\u56FE",tree:"\u6811\u56FE",treemap:"\u77E9\u5F62\u6811\u56FE",boxplot:"\u7BB1\u578B\u56FE",candlestick:"K\u7EBF\u56FE",k:"K\u7EBF\u56FE",heatmap:"\u70ED\u529B\u56FE",map:"\u5730\u56FE",parallel:"\u5E73\u884C\u5750\u6807\u56FE",lines:"\u7EBF\u56FE",graph:"\u5173\u7CFB\u56FE",sankey:"\u6851\u57FA\u56FE",funnel:"\u6F0F\u6597\u56FE",gauge:"\u4EEA\u8868\u76D8\u56FE",pictorialBar:"\u8C61\u5F62\u67F1\u56FE",themeRiver:"\u4E3B\u9898\u6CB3\u6D41\u56FE",sunburst:"\u65ED\u65E5\u56FE"}},aria:{general:{withTitle:"\u8FD9\u662F\u4E00\u4E2A\u5173\u4E8E\u201C{title}\u201D\u7684\u56FE\u8868\u3002",withoutTitle:"\u8FD9\u662F\u4E00\u4E2A\u56FE\u8868\uFF0C"},series:{single:{prefix:"",withName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\uFF0C\u8868\u793A{seriesName}\u3002",withoutName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\u3002"},multiple:{prefix:"\u5B83\u7531{seriesCount}\u4E2A\u56FE\u8868\u7CFB\u5217\u7EC4\u6210\u3002",withName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A\u8868\u793A{seriesName}\u7684{seriesType}\uFF0C",withoutName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A{seriesType}\uFF0C",separator:{middle:"\uFF1B",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636E\u662F\u2014\u2014",partialData:"\u5176\u4E2D\uFF0C\u524D{displayCnt}\u9879\u662F\u2014\u2014",withName:"{name}\u7684\u6570\u636E\u662F{value}",withoutName:"{value}",separator:{middle:"\uFF0C",end:""}}}};var jm="ZH",hP="EN",fp=hP,Kg={},dP={},kN=Zt.domSupported?function(){var e=(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase();return e.indexOf(jm)>-1?jm:fp}():fp;function PN(e,t){e=e.toUpperCase(),dP[e]=new Mr(t),Kg[e]=t}function pet(e){if(Mt(e)){var t=Kg[e.toUpperCase()]||{};return e===jm||e===hP?$t(t):le($t(t),$t(Kg[fp]),!1)}else return le($t(e),$t(Kg[fp]),!1)}function vet(e){return dP[e]}function get(){return dP[fp]}PN(hP,het);PN(jm,det);var pP=1e3,vP=pP*60,Rd=vP*60,ri=Rd*24,lM=ri*365,ld={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},G0="{yyyy}-{MM}-{dd}",uM={year:"{yyyy}",month:"{yyyy}-{MM}",day:G0,hour:G0+" "+ld.hour,minute:G0+" "+ld.minute,second:G0+" "+ld.second,millisecond:ld.none},m2=["year","month","day","hour","minute","second","millisecond"],EN=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function _l(e,t){return e+="","0000".substr(0,t-e.length)+e}function Xc(e){switch(e){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return e}}function met(e){return e===Xc(e)}function _et(e){switch(e){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function u_(e,t,r,n){var i=ys(e),o=i[gP(r)](),s=i[Yc(r)]()+1,a=Math.floor((s-1)/3)+1,l=i[c_(r)](),u=i["get"+(r?"UTC":"")+"Day"](),c=i[hp(r)](),f=(c-1)%12+1,h=i[f_(r)](),d=i[h_(r)](),p=i[d_(r)](),v=n instanceof Mr?n:vet(n||kN)||get(),m=v.getModel("time"),g=m.get("month"),_=m.get("monthAbbr"),b=m.get("dayOfWeek"),w=m.get("dayOfWeekAbbr");return(t||"").replace(/{yyyy}/g,o+"").replace(/{yy}/g,o%100+"").replace(/{Q}/g,a+"").replace(/{MMMM}/g,g[s-1]).replace(/{MMM}/g,_[s-1]).replace(/{MM}/g,_l(s,2)).replace(/{M}/g,s+"").replace(/{dd}/g,_l(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,b[u]).replace(/{ee}/g,w[u]).replace(/{e}/g,u+"").replace(/{HH}/g,_l(c,2)).replace(/{H}/g,c+"").replace(/{hh}/g,_l(f+"",2)).replace(/{h}/g,f+"").replace(/{mm}/g,_l(h,2)).replace(/{m}/g,h+"").replace(/{ss}/g,_l(d,2)).replace(/{s}/g,d+"").replace(/{SSS}/g,_l(p,3)).replace(/{S}/g,p+"")}function yet(e,t,r,n,i){var o=null;if(Mt(r))o=r;else if(jt(r))o=r(e.value,t,{level:e.level});else{var s=at({},ld);if(e.level>0)for(var a=0;a<m2.length;++a)s[m2[a]]="{primary|"+s[m2[a]]+"}";var l=r?r.inherit===!1?r:ne(r,s):s,u=CN(e.value,i);if(l[u])o=l[u];else if(l.inherit){for(var c=EN.indexOf(u),a=c-1;a>=0;--a)if(l[u]){o=l[u];break}o=o||s.none}if(ht(o)){var f=e.level==null?0:e.level>=0?e.level:o.length+e.level;f=Math.min(f,o.length-1),o=o[f]}}return u_(new Date(e.value),o,i,n)}function CN(e,t){var r=ys(e),n=r[Yc(t)]()+1,i=r[c_(t)](),o=r[hp(t)](),s=r[f_(t)](),a=r[h_(t)](),l=r[d_(t)](),u=l===0,c=u&&a===0,f=c&&s===0,h=f&&o===0,d=h&&i===1,p=d&&n===1;return p?"year":d?"month":h?"day":f?"hour":c?"minute":u?"second":"millisecond"}function cM(e,t,r){var n=Se(e)?ys(e):e;switch(t=t||CN(e,r),t){case"year":return n[gP(r)]();case"half-year":return n[Yc(r)]()>=6?1:0;case"quarter":return Math.floor((n[Yc(r)]()+1)/4);case"month":return n[Yc(r)]();case"day":return n[c_(r)]();case"half-day":return n[hp(r)]()/24;case"hour":return n[hp(r)]();case"minute":return n[f_(r)]();case"second":return n[h_(r)]();case"millisecond":return n[d_(r)]()}}function gP(e){return e?"getUTCFullYear":"getFullYear"}function Yc(e){return e?"getUTCMonth":"getMonth"}function c_(e){return e?"getUTCDate":"getDate"}function hp(e){return e?"getUTCHours":"getHours"}function f_(e){return e?"getUTCMinutes":"getMinutes"}function h_(e){return e?"getUTCSeconds":"getSeconds"}function d_(e){return e?"getUTCMilliseconds":"getMilliseconds"}function bet(e){return e?"setUTCFullYear":"setFullYear"}function AN(e){return e?"setUTCMonth":"setMonth"}function MN(e){return e?"setUTCDate":"setDate"}function xN(e){return e?"setUTCHours":"setHours"}function LN(e){return e?"setUTCMinutes":"setMinutes"}function IN(e){return e?"setUTCSeconds":"setSeconds"}function ON(e){return e?"setUTCMilliseconds":"setMilliseconds"}function RN(e){if(!bJ(e))return Mt(e)?e:"-";var t=(e+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function DN(e,t){return e=(e||"").toLowerCase().replace(/-(.)/g,function(r,n){return n.toUpperCase()}),t&&e&&(e=e.charAt(0).toUpperCase()+e.slice(1)),e}var Gp=G9;function u3(e,t,r){var n="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function i(c){return c&&Po(c)?c:"-"}function o(c){return!!(c!=null&&!isNaN(c)&&isFinite(c))}var s=t==="time",a=e instanceof Date;if(s||a){var l=s?ys(e):e;if(isNaN(+l)){if(a)return"-"}else return u_(l,n,r)}if(t==="ordinal")return xS(e)?i(e):Se(e)&&o(e)?e+"":"-";var u=xa(e);return o(u)?RN(u):xS(e)?i(e):typeof e=="boolean"?e+"":"-"}var fM=["a","b","c","d","e","f","g"],_2=function(e,t){return"{"+e+(t==null?"":t)+"}"};function NN(e,t,r){ht(t)||(t=[t]);var n=t.length;if(!n)return"";for(var i=t[0].$vars||[],o=0;o<i.length;o++){var s=fM[o];e=e.replace(_2(s),_2(s,0))}for(var a=0;a<n;a++)for(var l=0;l<i.length;l++){var u=t[a][i[l]];e=e.replace(_2(fM[l],a),r?ti(u):u)}return e}function wet(e,t){var r=Mt(e)?{color:e,extraCssText:t}:e||{},n=r.color,i=r.type;t=r.extraCssText;var o=r.renderMode||"html";if(!n)return"";if(o==="html")return i==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+ti(n)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+ti(n)+";"+(t||"")+'"></span>';var s=r.markerId||"markerX";return{renderMode:o,content:"{"+s+"|}  ",style:i==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:n}:{width:10,height:10,borderRadius:5,backgroundColor:n}}}function fu(e,t){return t=t||"transparent",Mt(e)?e:Rt(e)&&e.colorStops&&(e.colorStops[0]||{}).color||t}function hM(e,t){if(t==="_blank"||t==="blank"){var r=window.open();r.opener=null,r.location.href=e}else window.open(e,t)}var Jg=z,Tet=["left","right","top","bottom","width","height"],H0=[["width","left","right"],["height","top","bottom"]];function mP(e,t,r,n,i){var o=0,s=0;n==null&&(n=1/0),i==null&&(i=1/0);var a=0;t.eachChild(function(l,u){var c=l.getBoundingRect(),f=t.childAt(u+1),h=f&&f.getBoundingRect(),d,p;if(e==="horizontal"){var v=c.width+(h?-h.x+c.x:0);d=o+v,d>n||l.newline?(o=0,d=v,s+=a+r,a=c.height):a=Math.max(a,c.height)}else{var m=c.height+(h?-h.y+c.y:0);p=s+m,p>i||l.newline?(o+=a+r,s=0,p=m,a=c.width):a=Math.max(a,c.width)}l.newline||(l.x=o,l.y=s,l.markRedraw(),e==="horizontal"?o=d+r:s=p+r)})}var qc=mP;be(mP,"vertical");be(mP,"horizontal");function Ia(e,t,r){r=Gp(r||0);var n=t.width,i=t.height,o=Ye(e.left,n),s=Ye(e.top,i),a=Ye(e.right,n),l=Ye(e.bottom,i),u=Ye(e.width,n),c=Ye(e.height,i),f=r[2]+r[0],h=r[1]+r[3],d=e.aspect;switch(isNaN(u)&&(u=n-a-h-o),isNaN(c)&&(c=i-l-f-s),d!=null&&(isNaN(u)&&isNaN(c)&&(d>n/i?u=n*.8:c=i*.8),isNaN(u)&&(u=d*c),isNaN(c)&&(c=u/d)),isNaN(o)&&(o=n-a-u-h),isNaN(s)&&(s=i-l-c-f),e.left||e.right){case"center":o=n/2-u/2-r[3];break;case"right":o=n-u-h;break}switch(e.top||e.bottom){case"middle":case"center":s=i/2-c/2-r[0];break;case"bottom":s=i-c-f;break}o=o||0,s=s||0,isNaN(u)&&(u=n-h-o-(a||0)),isNaN(c)&&(c=i-f-s-(l||0));var p=new ue(o+r[3],s+r[0],u,c);return p.margin=r,p}function ket(e,t,r,n,i,o){var s=!i||!i.hv||i.hv[0],a=!i||!i.hv||i.hv[1],l=i&&i.boundingMode||"all";if(o=o||e,o.x=e.x,o.y=e.y,!s&&!a)return!1;var u;if(l==="raw")u=e.type==="group"?new ue(0,0,+t.width||0,+t.height||0):e.getBoundingRect();else if(u=e.getBoundingRect(),e.needLocalTransform()){var c=e.getLocalTransform();u=u.clone(),u.applyTransform(c)}var f=Ia(ne({width:u.width,height:u.height},t),r,n),h=s?f.x-u.x:0,d=a?f.y-u.y:0;return l==="raw"?(o.x=h,o.y=d):(o.x+=h,o.y+=d),o===e&&e.markRedraw(),!0}function dp(e){var t=e.layoutMode||e.constructor.layoutMode;return Rt(t)?t:t?{type:t}:null}function lf(e,t,r){var n=r&&r.ignoreSize;!ht(n)&&(n=[n,n]);var i=s(H0[0],0),o=s(H0[1],1);u(H0[0],e,i),u(H0[1],e,o);function s(c,f){var h={},d=0,p={},v=0,m=2;if(Jg(c,function(b){p[b]=e[b]}),Jg(c,function(b){a(t,b)&&(h[b]=p[b]=t[b]),l(h,b)&&d++,l(p,b)&&v++}),n[f])return l(t,c[1])?p[c[2]]=null:l(t,c[2])&&(p[c[1]]=null),p;if(v===m||!d)return p;if(d>=m)return h;for(var g=0;g<c.length;g++){var _=c[g];if(!a(h,_)&&a(e,_)){h[_]=e[_];break}}return h}function a(c,f){return c.hasOwnProperty(f)}function l(c,f){return c[f]!=null&&c[f]!=="auto"}function u(c,f,h){Jg(c,function(d){f[d]=h[d]})}}function p_(e){return Pet({},e)}function Pet(e,t){return t&&e&&Jg(Tet,function(r){t.hasOwnProperty(r)&&(e[r]=t[r])}),e}var Eet=Re(),Af=function(e){St(t,e);function t(r,n,i){var o=e.call(this,r,n,i)||this;return o.uid=a_("ec_cpt_model"),o}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i)},t.prototype.mergeDefaultAndTheme=function(r,n){var i=dp(this),o=i?p_(r):{},s=n.getTheme();le(r,s.get(this.mainType)),le(r,this.getDefaultOption()),i&&lf(r,o,i)},t.prototype.mergeOption=function(r,n){le(this.option,r,!0);var i=dp(this);i&&lf(this.option,r,i)},t.prototype.optionUpdated=function(r,n){},t.prototype.getDefaultOption=function(){var r=this.constructor;if(!BJ(r))return r.defaultOption;var n=Eet(this);if(!n.defaultOption){for(var i=[],o=r;o;){var s=o.prototype.defaultOption;s&&i.push(s),o=o.superClass}for(var a={},l=i.length-1;l>=0;l--)a=le(a,i[l],!0);n.defaultOption=a}return n.defaultOption},t.prototype.getReferringComponents=function(r,n){var i=r+"Index",o=r+"Id";return Up(this.ecModel,r,{index:this.get(i,!0),id:this.get(o,!0)},n)},t.prototype.getBoxLayoutParams=function(){var r=this;return{left:r.get("left"),top:r.get("top"),right:r.get("right"),bottom:r.get("bottom"),width:r.get("width"),height:r.get("height")}},t.prototype.getZLevelKey=function(){return""},t.prototype.setZLevel=function(r){this.option.zlevel=r},t.protoInitialize=function(){var r=t.prototype;r.type="component",r.id="",r.name="",r.mainType="",r.subType="",r.componentIndex=0}(),t}(Mr);C7(Af,Mr);J1(Af);cet(Af);fet(Af,Cet);function Cet(e){var t=[];return z(Af.getClassesByMainType(e),function(r){t=t.concat(r.dependencies||r.prototype.dependencies||[])}),t=Lt(t,function(r){return Co(r).main}),e!=="dataset"&&he(t,"dataset")<=0&&t.unshift("dataset"),t}const Me=Af;var FN="";typeof navigator<"u"&&(FN=navigator.platform||"");var Qu="rgba(0, 0, 0, 0.2)";const Aet={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:Qu,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:Qu,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:Qu,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:Qu,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:Qu,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:Qu,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:FN.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var zN=Xt(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),hi="original",an="arrayRows",Yi="objectRows",Ms="keyedColumns",Ta="typedArray",BN="unknown",Mo="column",Mf="row",Cn={Must:1,Might:2,Not:3},$N=Re();function Met(e){$N(e).datasetMap=Xt()}function xet(e,t,r){var n={},i=VN(t);if(!i||!e)return n;var o=[],s=[],a=t.ecModel,l=$N(a).datasetMap,u=i.uid+"_"+r.seriesLayoutBy,c,f;e=e.slice(),z(e,function(v,m){var g=Rt(v)?v:e[m]={name:v};g.type==="ordinal"&&c==null&&(c=m,f=p(g)),n[g.name]=[]});var h=l.get(u)||l.set(u,{categoryWayDim:f,valueWayDim:0});z(e,function(v,m){var g=v.name,_=p(v);if(c==null){var b=h.valueWayDim;d(n[g],b,_),d(s,b,_),h.valueWayDim+=_}else if(c===m)d(n[g],0,_),d(o,0,_);else{var b=h.categoryWayDim;d(n[g],b,_),d(s,b,_),h.categoryWayDim+=_}});function d(v,m,g){for(var _=0;_<g;_++)v.push(m+_)}function p(v){var m=v.dimsDef;return m?m.length:1}return o.length&&(n.itemName=o),s.length&&(n.seriesName=s),n}function VN(e){var t=e.get("data",!0);if(!t)return Up(e.ecModel,"dataset",{index:e.get("datasetIndex",!0),id:e.get("datasetId",!0)},Li).models[0]}function Let(e){return!e.get("transform",!0)&&!e.get("fromTransformResult",!0)?[]:Up(e.ecModel,"dataset",{index:e.get("fromDatasetIndex",!0),id:e.get("fromDatasetId",!0)},Li).models}function UN(e,t){return Iet(e.data,e.sourceFormat,e.seriesLayoutBy,e.dimensionsDefine,e.startIndex,t)}function Iet(e,t,r,n,i,o){var s,a=5;if(Fn(e))return Cn.Not;var l,u;if(n){var c=n[o];Rt(c)?(l=c.name,u=c.type):Mt(c)&&(l=c)}if(u!=null)return u==="ordinal"?Cn.Must:Cn.Not;if(t===an){var f=e;if(r===Mf){for(var h=f[o],d=0;d<(h||[]).length&&d<a;d++)if((s=w(h[i+d]))!=null)return s}else for(var d=0;d<f.length&&d<a;d++){var p=f[i+d];if(p&&(s=w(p[o]))!=null)return s}}else if(t===Yi){var v=e;if(!l)return Cn.Not;for(var d=0;d<v.length&&d<a;d++){var m=v[d];if(m&&(s=w(m[l]))!=null)return s}}else if(t===Ms){var g=e;if(!l)return Cn.Not;var h=g[l];if(!h||Fn(h))return Cn.Not;for(var d=0;d<h.length&&d<a;d++)if((s=w(h[d]))!=null)return s}else if(t===hi)for(var _=e,d=0;d<_.length&&d<a;d++){var m=_[d],b=Vp(m);if(!ht(b))return Cn.Not;if((s=w(b[o]))!=null)return s}function w(T){var S=Mt(T);if(T!=null&&isFinite(T)&&T!=="")return S?Cn.Might:Cn.Not;if(S&&T!=="-")return Cn.Must}return Cn.Not}var Oet=Xt();function Ret(e,t,r){var n=Oet.get(t);if(!n)return r;var i=n(e);return i?r.concat(i):r}var dM=Re();Re();var _P=function(){function e(){}return e.prototype.getColorFromPalette=function(t,r,n){var i=tr(this.get("color",!0)),o=this.get("colorLayer",!0);return Net(this,dM,i,o,t,r,n)},e.prototype.clearColorPalette=function(){Fet(this,dM)},e}();function Det(e,t){for(var r=e.length,n=0;n<r;n++)if(e[n].length>t)return e[n];return e[r-1]}function Net(e,t,r,n,i,o,s){o=o||e;var a=t(o),l=a.paletteIdx||0,u=a.paletteNameMap=a.paletteNameMap||{};if(u.hasOwnProperty(i))return u[i];var c=s==null||!n?r:Det(n,s);if(c=c||r,!(!c||!c.length)){var f=c[l];return i&&(u[i]=f),a.paletteIdx=(l+1)%c.length,f}}function Fet(e,t){t(e).paletteIdx=0,t(e).paletteNameMap={}}var X0,vh,pM,vM="\0_ec_inner",zet=1,WN=function(e){St(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(r,n,i,o,s,a){o=o||{},this.option=null,this._theme=new Mr(o),this._locale=new Mr(s),this._optionManager=a},t.prototype.setOption=function(r,n,i){var o=_M(n);this._optionManager.setOption(r,i,o),this._resetOption(null,o)},t.prototype.resetOption=function(r,n){return this._resetOption(r,_M(n))},t.prototype._resetOption=function(r,n){var i=!1,o=this._optionManager;if(!r||r==="recreate"){var s=o.mountOption(r==="recreate");!this.option||r==="recreate"?pM(this,s):(this.restoreData(),this._mergeOption(s,n)),i=!0}if((r==="timeline"||r==="media")&&this.restoreData(),!r||r==="recreate"||r==="timeline"){var a=o.getTimelineOption(this);a&&(i=!0,this._mergeOption(a,n))}if(!r||r==="recreate"||r==="media"){var l=o.getMediaOption(this);l.length&&z(l,function(u){i=!0,this._mergeOption(u,n)},this)}return i},t.prototype.mergeOption=function(r){this._mergeOption(r,null)},t.prototype._mergeOption=function(r,n){var i=this.option,o=this._componentsMap,s=this._componentsCount,a=[],l=Xt(),u=n&&n.replaceMergeMainTypeMap;Met(this),z(r,function(f,h){f!=null&&(Me.hasClass(h)?h&&(a.push(h),l.set(h,!0)):i[h]=i[h]==null?$t(f):le(i[h],f,!0))}),u&&u.each(function(f,h){Me.hasClass(h)&&!l.get(h)&&(a.push(h),l.set(h,!0))}),Me.topologicalTravel(a,Me.getAllClassMainTypes(),c,this);function c(f){var h=Ret(this,f,tr(r[f])),d=o.get(f),p=d?u&&u.get(f)?"replaceMerge":"normalMerge":"replaceAll",v=TJ(d,h,p);xJ(v,f,Me),i[f]=null,o.set(f,null),s.set(f,0);var m=[],g=[],_=0,b;z(v,function(w,T){var S=w.existing,k=w.newOption;if(!k)S&&(S.mergeOption({},this),S.optionUpdated({},!1));else{var A=f==="series",C=Me.getClass(f,w.keyInfo.subType,!A);if(!C)return;if(f==="tooltip"){if(b)return;b=!0}if(S&&S.constructor===C)S.name=w.keyInfo.name,S.mergeOption(k,this),S.optionUpdated(k,!1);else{var x=at({componentIndex:T},w.keyInfo);S=new C(k,this,this,x),at(S,x),w.brandNew&&(S.__requireNewView=!0),S.init(k,this,this),S.optionUpdated(null,!0)}}S?(m.push(S.option),g.push(S),_++):(m.push(void 0),g.push(void 0))},this),i[f]=m,o.set(f,g),s.set(f,_),f==="series"&&X0(this)}this._seriesIndices||X0(this)},t.prototype.getOption=function(){var r=$t(this.option);return z(r,function(n,i){if(Me.hasClass(i)){for(var o=tr(n),s=o.length,a=!1,l=s-1;l>=0;l--)o[l]&&!ip(o[l])?a=!0:(o[l]=null,!a&&s--);o.length=s,r[i]=o}}),delete r[vM],r},t.prototype.getTheme=function(){return this._theme},t.prototype.getLocaleModel=function(){return this._locale},t.prototype.setUpdatePayload=function(r){this._payload=r},t.prototype.getUpdatePayload=function(){return this._payload},t.prototype.getComponent=function(r,n){var i=this._componentsMap.get(r);if(i){var o=i[n||0];if(o)return o;if(n==null){for(var s=0;s<i.length;s++)if(i[s])return i[s]}}},t.prototype.queryComponents=function(r){var n=r.mainType;if(!n)return[];var i=r.index,o=r.id,s=r.name,a=this._componentsMap.get(n);if(!a||!a.length)return[];var l;return i!=null?(l=[],z(tr(i),function(u){a[u]&&l.push(a[u])})):o!=null?l=gM("id",o,a):s!=null?l=gM("name",s,a):l=Cr(a,function(u){return!!u}),mM(l,r)},t.prototype.findComponents=function(r){var n=r.query,i=r.mainType,o=a(n),s=o?this.queryComponents(o):Cr(this._componentsMap.get(i),function(u){return!!u});return l(mM(s,r));function a(u){var c=i+"Index",f=i+"Id",h=i+"Name";return u&&(u[c]!=null||u[f]!=null||u[h]!=null)?{mainType:i,index:u[c],id:u[f],name:u[h]}:null}function l(u){return r.filter?Cr(u,r.filter):u}},t.prototype.eachComponent=function(r,n,i){var o=this._componentsMap;if(jt(r)){var s=n,a=r;o.each(function(f,h){for(var d=0;f&&d<f.length;d++){var p=f[d];p&&a.call(s,h,p,p.componentIndex)}})}else for(var l=Mt(r)?o.get(r):Rt(r)?this.findComponents(r):null,u=0;l&&u<l.length;u++){var c=l[u];c&&n.call(i,c,c.componentIndex)}},t.prototype.getSeriesByName=function(r){var n=ii(r,null);return Cr(this._componentsMap.get("series"),function(i){return!!i&&n!=null&&i.name===n})},t.prototype.getSeriesByIndex=function(r){return this._componentsMap.get("series")[r]},t.prototype.getSeriesByType=function(r){return Cr(this._componentsMap.get("series"),function(n){return!!n&&n.subType===r})},t.prototype.getSeries=function(){return Cr(this._componentsMap.get("series"),function(r){return!!r})},t.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},t.prototype.eachSeries=function(r,n){vh(this),z(this._seriesIndices,function(i){var o=this._componentsMap.get("series")[i];r.call(n,o,i)},this)},t.prototype.eachRawSeries=function(r,n){z(this._componentsMap.get("series"),function(i){i&&r.call(n,i,i.componentIndex)})},t.prototype.eachSeriesByType=function(r,n,i){vh(this),z(this._seriesIndices,function(o){var s=this._componentsMap.get("series")[o];s.subType===r&&n.call(i,s,o)},this)},t.prototype.eachRawSeriesByType=function(r,n,i){return z(this.getSeriesByType(r),n,i)},t.prototype.isSeriesFiltered=function(r){return vh(this),this._seriesIndicesMap.get(r.componentIndex)==null},t.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},t.prototype.filterSeries=function(r,n){vh(this);var i=[];z(this._seriesIndices,function(o){var s=this._componentsMap.get("series")[o];r.call(n,s,o)&&i.push(o)},this),this._seriesIndices=i,this._seriesIndicesMap=Xt(i)},t.prototype.restoreData=function(r){X0(this);var n=this._componentsMap,i=[];n.each(function(o,s){Me.hasClass(s)&&i.push(s)}),Me.topologicalTravel(i,Me.getAllClassMainTypes(),function(o){z(n.get(o),function(s){s&&(o!=="series"||!Bet(s,r))&&s.restoreData()})})},t.internalField=function(){X0=function(r){var n=r._seriesIndices=[];z(r._componentsMap.get("series"),function(i){i&&n.push(i.componentIndex)}),r._seriesIndicesMap=Xt(n)},vh=function(r){},pM=function(r,n){r.option={},r.option[vM]=zet,r._componentsMap=Xt({series:[]}),r._componentsCount=Xt();var i=n.aria;Rt(i)&&i.enabled==null&&(i.enabled=!0),$et(n,r._theme.option),le(n,Aet,!1),r._mergeOption(n,null)}}(),t}(Mr);function Bet(e,t){if(t){var r=t.seriesIndex,n=t.seriesId,i=t.seriesName;return r!=null&&e.componentIndex!==r||n!=null&&e.id!==n||i!=null&&e.name!==i}}function $et(e,t){var r=e.color&&!e.colorLayer;z(t,function(n,i){i==="colorLayer"&&r||Me.hasClass(i)||(typeof n=="object"?e[i]=e[i]?le(e[i],n,!1):$t(n):e[i]==null&&(e[i]=n))})}function gM(e,t,r){if(ht(t)){var n=Xt();return z(t,function(o){if(o!=null){var s=ii(o,null);s!=null&&n.set(o,!0)}}),Cr(r,function(o){return o&&n.get(o[e])})}else{var i=ii(t,null);return Cr(r,function(o){return o&&i!=null&&o[e]===i})}}function mM(e,t){return t.hasOwnProperty("subType")?Cr(e,function(r){return r&&r.subType===t.subType}):e}function _M(e){var t=Xt();return e&&z(tr(e.replaceMerge),function(r){t.set(r,!0)}),{replaceMergeMainTypeMap:t}}Gi(WN,_P);const jN=WN;var Vet=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],Uet=function(){function e(t){z(Vet,function(r){this[r]=Vt(t[r],t)},this)}return e}();const GN=Uet;var y2={},Wet=function(){function e(){this._coordinateSystems=[]}return e.prototype.create=function(t,r){var n=[];z(y2,function(i,o){var s=i.create(t,r);n=n.concat(s||[])}),this._coordinateSystems=n},e.prototype.update=function(t,r){z(this._coordinateSystems,function(n){n.update&&n.update(t,r)})},e.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},e.register=function(t,r){y2[t]=r},e.get=function(t){return y2[t]},e}();const yP=Wet;var jet=/^(min|max)?(.+)$/,Get=function(){function e(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return e.prototype.setOption=function(t,r,n){t&&(z(tr(t.series),function(s){s&&s.data&&Fn(s.data)&&xm(s.data)}),z(tr(t.dataset),function(s){s&&s.source&&Fn(s.source)&&xm(s.source)})),t=$t(t);var i=this._optionBackup,o=Het(t,r,!i);this._newBaseOption=o.baseOption,i?(o.timelineOptions.length&&(i.timelineOptions=o.timelineOptions),o.mediaList.length&&(i.mediaList=o.mediaList),o.mediaDefault&&(i.mediaDefault=o.mediaDefault)):this._optionBackup=o},e.prototype.mountOption=function(t){var r=this._optionBackup;return this._timelineOptions=r.timelineOptions,this._mediaList=r.mediaList,this._mediaDefault=r.mediaDefault,this._currentMediaIndices=[],$t(t?r.baseOption:this._newBaseOption)},e.prototype.getTimelineOption=function(t){var r,n=this._timelineOptions;if(n.length){var i=t.getComponent("timeline");i&&(r=$t(n[i.getCurrentIndex()]))}return r},e.prototype.getMediaOption=function(t){var r=this._api.getWidth(),n=this._api.getHeight(),i=this._mediaList,o=this._mediaDefault,s=[],a=[];if(!i.length&&!o)return a;for(var l=0,u=i.length;l<u;l++)Xet(i[l].query,r,n)&&s.push(l);return!s.length&&o&&(s=[-1]),s.length&&!qet(s,this._currentMediaIndices)&&(a=Lt(s,function(c){return $t(c===-1?o.option:i[c].option)})),this._currentMediaIndices=s,a},e}();function Het(e,t,r){var n=[],i,o,s=e.baseOption,a=e.timeline,l=e.options,u=e.media,c=!!e.media,f=!!(l||a||s&&s.timeline);s?(o=s,o.timeline||(o.timeline=a)):((f||c)&&(e.options=e.media=null),o=e),c&&ht(u)&&z(u,function(d){d&&d.option&&(d.query?n.push(d):i||(i=d))}),h(o),z(l,function(d){return h(d)}),z(n,function(d){return h(d.option)});function h(d){z(t,function(p){p(d,r)})}return{baseOption:o,timelineOptions:l||[],mediaDefault:i,mediaList:n}}function Xet(e,t,r){var n={width:t,height:r,aspectratio:t/r},i=!0;return z(e,function(o,s){var a=s.match(jet);if(!(!a||!a[1]||!a[2])){var l=a[1],u=a[2].toLowerCase();Yet(n[u],o,l)||(i=!1)}}),i}function Yet(e,t,r){return r==="min"?e>=t:r==="max"?e<=t:e===t}function qet(e,t){return e.join(",")===t.join(",")}const Zet=Get;var gi=z,pp=Rt,yM=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function b2(e){var t=e&&e.itemStyle;if(!!t)for(var r=0,n=yM.length;r<n;r++){var i=yM[r],o=t.normal,s=t.emphasis;o&&o[i]&&(e[i]=e[i]||{},e[i].normal?le(e[i].normal,o[i]):e[i].normal=o[i],o[i]=null),s&&s[i]&&(e[i]=e[i]||{},e[i].emphasis?le(e[i].emphasis,s[i]):e[i].emphasis=s[i],s[i]=null)}}function Vr(e,t,r){if(e&&e[t]&&(e[t].normal||e[t].emphasis)){var n=e[t].normal,i=e[t].emphasis;n&&(r?(e[t].normal=e[t].emphasis=null,ne(e[t],n)):e[t]=n),i&&(e.emphasis=e.emphasis||{},e.emphasis[t]=i,i.focus&&(e.emphasis.focus=i.focus),i.blurScope&&(e.emphasis.blurScope=i.blurScope))}}function ud(e){Vr(e,"itemStyle"),Vr(e,"lineStyle"),Vr(e,"areaStyle"),Vr(e,"label"),Vr(e,"labelLine"),Vr(e,"upperLabel"),Vr(e,"edgeLabel")}function Je(e,t){var r=pp(e)&&e[t],n=pp(r)&&r.textStyle;if(n)for(var i=0,o=b4.length;i<o;i++){var s=b4[i];n.hasOwnProperty(s)&&(r[s]=n[s])}}function Kn(e){e&&(ud(e),Je(e,"label"),e.emphasis&&Je(e.emphasis,"label"))}function Ket(e){if(!!pp(e)){b2(e),ud(e),Je(e,"label"),Je(e,"upperLabel"),Je(e,"edgeLabel"),e.emphasis&&(Je(e.emphasis,"label"),Je(e.emphasis,"upperLabel"),Je(e.emphasis,"edgeLabel"));var t=e.markPoint;t&&(b2(t),Kn(t));var r=e.markLine;r&&(b2(r),Kn(r));var n=e.markArea;n&&Kn(n);var i=e.data;if(e.type==="graph"){i=i||e.nodes;var o=e.links||e.edges;if(o&&!Fn(o))for(var s=0;s<o.length;s++)Kn(o[s]);z(e.categories,function(u){ud(u)})}if(i&&!Fn(i))for(var s=0;s<i.length;s++)Kn(i[s]);if(t=e.markPoint,t&&t.data)for(var a=t.data,s=0;s<a.length;s++)Kn(a[s]);if(r=e.markLine,r&&r.data)for(var l=r.data,s=0;s<l.length;s++)ht(l[s])?(Kn(l[s][0]),Kn(l[s][1])):Kn(l[s]);e.type==="gauge"?(Je(e,"axisLabel"),Je(e,"title"),Je(e,"detail")):e.type==="treemap"?(Vr(e.breadcrumb,"itemStyle"),z(e.levels,function(u){ud(u)})):e.type==="tree"&&ud(e.leaves)}}function Yo(e){return ht(e)?e:e?[e]:[]}function bM(e){return(ht(e)?e[0]:e)||{}}function Jet(e,t){gi(Yo(e.series),function(n){pp(n)&&Ket(n)});var r=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&r.push("valueAxis","categoryAxis","logAxis","timeAxis"),gi(r,function(n){gi(Yo(e[n]),function(i){i&&(Je(i,"axisLabel"),Je(i.axisPointer,"label"))})}),gi(Yo(e.parallel),function(n){var i=n&&n.parallelAxisDefault;Je(i,"axisLabel"),Je(i&&i.axisPointer,"label")}),gi(Yo(e.calendar),function(n){Vr(n,"itemStyle"),Je(n,"dayLabel"),Je(n,"monthLabel"),Je(n,"yearLabel")}),gi(Yo(e.radar),function(n){Je(n,"name"),n.name&&n.axisName==null&&(n.axisName=n.name,delete n.name),n.nameGap!=null&&n.axisNameGap==null&&(n.axisNameGap=n.nameGap,delete n.nameGap)}),gi(Yo(e.geo),function(n){pp(n)&&(Kn(n),gi(Yo(n.regions),function(i){Kn(i)}))}),gi(Yo(e.timeline),function(n){Kn(n),Vr(n,"label"),Vr(n,"itemStyle"),Vr(n,"controlStyle",!0);var i=n.data;ht(i)&&z(i,function(o){Rt(o)&&(Vr(o,"label"),Vr(o,"itemStyle"))})}),gi(Yo(e.toolbox),function(n){Vr(n,"iconStyle"),gi(n.feature,function(i){Vr(i,"iconStyle")})}),Je(bM(e.axisPointer),"label"),Je(bM(e.tooltip).axisPointer,"label")}function Qet(e,t){for(var r=t.split(","),n=e,i=0;i<r.length&&(n=n&&n[r[i]],n!=null);i++);return n}function trt(e,t,r,n){for(var i=t.split(","),o=e,s,a=0;a<i.length-1;a++)s=i[a],o[s]==null&&(o[s]={}),o=o[s];(n||o[i[a]]==null)&&(o[i[a]]=r)}function wM(e){e&&z(ert,function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])})}var ert=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],rrt=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],w2=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function gh(e){var t=e&&e.itemStyle;if(t)for(var r=0;r<w2.length;r++){var n=w2[r][1],i=w2[r][0];t[n]!=null&&(t[i]=t[n])}}function SM(e){!e||e.alignTo==="edge"&&e.margin!=null&&e.edgeDistance==null&&(e.edgeDistance=e.margin)}function TM(e){!e||e.downplay&&!e.blur&&(e.blur=e.downplay)}function nrt(e){!e||e.focusNodeAdjacency!=null&&(e.emphasis=e.emphasis||{},e.emphasis.focus==null&&(e.emphasis.focus="adjacency"))}function HN(e,t){if(e)for(var r=0;r<e.length;r++)t(e[r]),e[r]&&HN(e[r].children,t)}function XN(e,t){Jet(e,t),e.series=tr(e.series),z(e.series,function(r){if(!!Rt(r)){var n=r.type;if(n==="line")r.clipOverflow!=null&&(r.clip=r.clipOverflow);else if(n==="pie"||n==="gauge"){r.clockWise!=null&&(r.clockwise=r.clockWise),SM(r.label);var i=r.data;if(i&&!Fn(i))for(var o=0;o<i.length;o++)SM(i[o]);r.hoverOffset!=null&&(r.emphasis=r.emphasis||{},(r.emphasis.scaleSize=null)&&(r.emphasis.scaleSize=r.hoverOffset))}else if(n==="gauge"){var s=Qet(r,"pointer.color");s!=null&&trt(r,"itemStyle.color",s)}else if(n==="bar"){gh(r),gh(r.backgroundStyle),gh(r.emphasis);var i=r.data;if(i&&!Fn(i))for(var o=0;o<i.length;o++)typeof i[o]=="object"&&(gh(i[o]),gh(i[o]&&i[o].emphasis))}else if(n==="sunburst"){var a=r.highlightPolicy;a&&(r.emphasis=r.emphasis||{},r.emphasis.focus||(r.emphasis.focus=a)),TM(r),HN(r.data,TM)}else n==="graph"||n==="sankey"?nrt(r):n==="map"&&(r.mapType&&!r.map&&(r.map=r.mapType),r.mapLocation&&ne(r,r.mapLocation));r.hoverAnimation!=null&&(r.emphasis=r.emphasis||{},r.emphasis&&r.emphasis.scale==null&&(r.emphasis.scale=r.hoverAnimation)),wM(r)}}),e.dataRange&&(e.visualMap=e.dataRange),z(rrt,function(r){var n=e[r];n&&(ht(n)||(n=[n]),z(n,function(i){wM(i)}))})}function irt(e){var t=Xt();e.eachSeries(function(r){var n=r.get("stack");if(n){var i=t.get(n)||t.set(n,[]),o=r.getData(),s={stackResultDimension:o.getCalculationInfo("stackResultDimension"),stackedOverDimension:o.getCalculationInfo("stackedOverDimension"),stackedDimension:o.getCalculationInfo("stackedDimension"),stackedByDimension:o.getCalculationInfo("stackedByDimension"),isStackedByIndex:o.getCalculationInfo("isStackedByIndex"),data:o,seriesModel:r};if(!s.stackedDimension||!(s.isStackedByIndex||s.stackedByDimension))return;i.length&&o.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(s)}}),t.each(ort)}function ort(e){z(e,function(t,r){var n=[],i=[NaN,NaN],o=[t.stackResultDimension,t.stackedOverDimension],s=t.data,a=t.isStackedByIndex,l=t.seriesModel.get("stackStrategy")||"samesign";s.modify(o,function(u,c,f){var h=s.get(t.stackedDimension,f);if(isNaN(h))return i;var d,p;a?p=s.getRawIndex(f):d=s.get(t.stackedByDimension,f);for(var v=NaN,m=r-1;m>=0;m--){var g=e[m];if(a||(p=g.data.rawIndexOf(g.stackedByDimension,d)),p>=0){var _=g.data.getByRawIndex(g.stackResultDimension,p);if(l==="all"||l==="positive"&&_>0||l==="negative"&&_<0||l==="samesign"&&h>=0&&_>0||l==="samesign"&&h<=0&&_<0){h=mJ(h,_),v=_;break}}}return n[0]=h,n[1]=v,n})})}var v_=function(){function e(t){this.data=t.data||(t.sourceFormat===Ms?{}:[]),this.sourceFormat=t.sourceFormat||BN,this.seriesLayoutBy=t.seriesLayoutBy||Mo,this.startIndex=t.startIndex||0,this.dimensionsDetectedCount=t.dimensionsDetectedCount,this.metaRawOption=t.metaRawOption;var r=this.dimensionsDefine=t.dimensionsDefine;if(r)for(var n=0;n<r.length;n++){var i=r[n];i.type==null&&UN(this,n)===Cn.Must&&(i.type="ordinal")}}return e}();function bP(e){return e instanceof v_}function c3(e,t,r){r=r||YN(e);var n=t.seriesLayoutBy,i=art(e,r,n,t.sourceHeader,t.dimensions),o=new v_({data:e,sourceFormat:r,seriesLayoutBy:n,dimensionsDefine:i.dimensionsDefine,startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount,metaRawOption:$t(t)});return o}function wP(e){return new v_({data:e,sourceFormat:Fn(e)?Ta:hi})}function srt(e){return new v_({data:e.data,sourceFormat:e.sourceFormat,seriesLayoutBy:e.seriesLayoutBy,dimensionsDefine:$t(e.dimensionsDefine),startIndex:e.startIndex,dimensionsDetectedCount:e.dimensionsDetectedCount})}function YN(e){var t=BN;if(Fn(e))t=Ta;else if(ht(e)){e.length===0&&(t=an);for(var r=0,n=e.length;r<n;r++){var i=e[r];if(i!=null){if(ht(i)){t=an;break}else if(Rt(i)){t=Yi;break}}}}else if(Rt(e)){for(var o in e)if(pt(e,o)&&Yr(e[o])){t=Ms;break}}return t}function art(e,t,r,n,i){var o,s;if(!e)return{dimensionsDefine:kM(i),startIndex:s,dimensionsDetectedCount:o};if(t===an){var a=e;n==="auto"||n==null?PM(function(u){u!=null&&u!=="-"&&(Mt(u)?s==null&&(s=1):s=0)},r,a,10):s=Se(n)?n:n?1:0,!i&&s===1&&(i=[],PM(function(u,c){i[c]=u!=null?u+"":""},r,a,1/0)),o=i?i.length:r===Mf?a.length:a[0]?a[0].length:null}else if(t===Yi)i||(i=lrt(e));else if(t===Ms)i||(i=[],z(e,function(u,c){i.push(c)}));else if(t===hi){var l=Vp(e[0]);o=ht(l)&&l.length||1}return{startIndex:s,dimensionsDefine:kM(i),dimensionsDetectedCount:o}}function lrt(e){for(var t=0,r;t<e.length&&!(r=e[t++]););if(r){var n=[];return z(r,function(i,o){n.push(o)}),n}}function kM(e){if(!!e){var t=Xt();return Lt(e,function(r,n){r=Rt(r)?r:{name:r};var i={name:r.name,displayName:r.displayName,type:r.type};if(i.name==null)return i;i.name+="",i.displayName==null&&(i.displayName=i.name);var o=t.get(i.name);return o?i.name+="-"+o.count++:t.set(i.name,{count:1}),i})}}function PM(e,t,r,n){if(t===Mf)for(var i=0;i<r.length&&i<n;i++)e(r[i]?r[i][0]:null,i);else for(var o=r[0]||[],i=0;i<o.length&&i<n;i++)e(o[i],i)}function qN(e){var t=e.sourceFormat;return t===Yi||t===Ms}var yl,bl,wl,EM,CM,ZN=function(){function e(t,r){var n=bP(t)?t:wP(t);this._source=n;var i=this._data=n.data;n.sourceFormat===Ta&&(this._offset=0,this._dimSize=r,this._data=i),CM(this,i,n)}return e.prototype.getSource=function(){return this._source},e.prototype.count=function(){return 0},e.prototype.getItem=function(t,r){},e.prototype.appendData=function(t){},e.prototype.clean=function(){},e.protoInitialize=function(){var t=e.prototype;t.pure=!1,t.persistent=!0}(),e.internalField=function(){var t;CM=function(s,a,l){var u=l.sourceFormat,c=l.seriesLayoutBy,f=l.startIndex,h=l.dimensionsDefine,d=EM[SP(u,c)];if(at(s,d),u===Ta)s.getItem=r,s.count=i,s.fillStorage=n;else{var p=KN(u,c);s.getItem=Vt(p,null,a,f,h);var v=JN(u,c);s.count=Vt(v,null,a,f,h)}};var r=function(s,a){s=s-this._offset,a=a||[];for(var l=this._data,u=this._dimSize,c=u*s,f=0;f<u;f++)a[f]=l[c+f];return a},n=function(s,a,l,u){for(var c=this._data,f=this._dimSize,h=0;h<f;h++){for(var d=u[h],p=d[0]==null?1/0:d[0],v=d[1]==null?-1/0:d[1],m=a-s,g=l[h],_=0;_<m;_++){var b=c[_*f+h];g[s+_]=b,b<p&&(p=b),b>v&&(v=b)}d[0]=p,d[1]=v}},i=function(){return this._data?this._data.length/this._dimSize:0};EM=(t={},t[an+"_"+Mo]={pure:!0,appendData:o},t[an+"_"+Mf]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},t[Yi]={pure:!0,appendData:o},t[Ms]={pure:!0,appendData:function(s){var a=this._data;z(s,function(l,u){for(var c=a[u]||(a[u]=[]),f=0;f<(l||[]).length;f++)c.push(l[f])})}},t[hi]={appendData:o},t[Ta]={persistent:!1,pure:!0,appendData:function(s){this._data=s},clean:function(){this._offset+=this.count(),this._data=null}},t);function o(s){for(var a=0;a<s.length;a++)this._data.push(s[a])}}(),e}(),AM=function(e,t,r,n){return e[n]},urt=(yl={},yl[an+"_"+Mo]=function(e,t,r,n){return e[n+t]},yl[an+"_"+Mf]=function(e,t,r,n,i){n+=t;for(var o=i||[],s=e,a=0;a<s.length;a++){var l=s[a];o[a]=l?l[n]:null}return o},yl[Yi]=AM,yl[Ms]=function(e,t,r,n,i){for(var o=i||[],s=0;s<r.length;s++){var a=r[s].name,l=e[a];o[s]=l?l[n]:null}return o},yl[hi]=AM,yl);function KN(e,t){var r=urt[SP(e,t)];return r}var MM=function(e,t,r){return e.length},crt=(bl={},bl[an+"_"+Mo]=function(e,t,r){return Math.max(0,e.length-t)},bl[an+"_"+Mf]=function(e,t,r){var n=e[0];return n?Math.max(0,n.length-t):0},bl[Yi]=MM,bl[Ms]=function(e,t,r){var n=r[0].name,i=e[n];return i?i.length:0},bl[hi]=MM,bl);function JN(e,t){var r=crt[SP(e,t)];return r}var S2=function(e,t,r){return e[t]},frt=(wl={},wl[an]=S2,wl[Yi]=function(e,t,r){return e[r]},wl[Ms]=S2,wl[hi]=function(e,t,r){var n=Vp(e);return n instanceof Array?n[t]:n},wl[Ta]=S2,wl);function QN(e){var t=frt[e];return t}function SP(e,t){return e===an?e+"_"+t:e}function uf(e,t,r){if(!!e){var n=e.getRawDataItem(t);if(n!=null){var i=e.getStore(),o=i.getSource().sourceFormat;if(r!=null){var s=e.getDimensionIndex(r),a=i.getDimensionProperty(s);return QN(o)(n,s,a)}else{var l=n;return o===hi&&(l=Vp(n)),l}}}}var hrt=/\{@(.+?)\}/g,tF=function(){function e(){}return e.prototype.getDataParams=function(t,r){var n=this.getData(r),i=this.getRawValue(t,r),o=n.getRawIndex(t),s=n.getName(t),a=n.getRawDataItem(t),l=n.getItemVisual(t,"style"),u=l&&l[n.getItemVisual(t,"drawType")||"fill"],c=l&&l.stroke,f=this.mainType,h=f==="series",d=n.userOutput&&n.userOutput.get();return{componentType:f,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:h?this.subType:null,seriesIndex:this.seriesIndex,seriesId:h?this.id:null,seriesName:h?this.name:null,name:s,dataIndex:o,data:a,dataType:r,value:i,color:u,borderColor:c,dimensionNames:d?d.fullDimensions:null,encode:d?d.encode:null,$vars:["seriesName","name","value"]}},e.prototype.getFormattedLabel=function(t,r,n,i,o,s){r=r||"normal";var a=this.getData(n),l=this.getDataParams(t,n);if(s&&(l.value=s.interpolatedValue),i!=null&&ht(l.value)&&(l.value=l.value[i]),!o){var u=a.getItemModel(t);o=u.get(r==="normal"?["label","formatter"]:[r,"label","formatter"])}if(jt(o))return l.status=r,l.dimensionIndex=i,o(l);if(Mt(o)){var c=NN(o,l);return c.replace(hrt,function(f,h){var d=h.length,p=h;p.charAt(0)==="["&&p.charAt(d-1)==="]"&&(p=+p.slice(1,d-1));var v=uf(a,t,p);if(s&&ht(s.interpolatedValue)){var m=a.getDimensionIndex(p);m>=0&&(v=s.interpolatedValue[m])}return v!=null?v+"":""})}},e.prototype.getRawValue=function(t,r){return uf(this.getData(r),t)},e.prototype.formatTooltip=function(t,r,n){},e}();function xM(e){var t,r;return Rt(e)?e.type&&(r=e):t=e,{text:t,frag:r}}function Dd(e){return new drt(e)}var drt=function(){function e(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return e.prototype.perform=function(t){var r=this._upstream,n=t&&t.skip;if(this._dirty&&r){var i=this.context;i.data=i.outputData=r.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var o;this._plan&&!n&&(o=this._plan(this.context));var s=c(this._modBy),a=this._modDataCount||0,l=c(t&&t.modBy),u=t&&t.modDataCount||0;(s!==l||a!==u)&&(o="reset");function c(_){return!(_>=1)&&(_=1),_}var f;(this._dirty||o==="reset")&&(this._dirty=!1,f=this._doReset(n)),this._modBy=l,this._modDataCount=u;var h=t&&t.step;if(r?this._dueEnd=r._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var d=this._dueIndex,p=Math.min(h!=null?this._dueIndex+h:1/0,this._dueEnd);if(!n&&(f||d<p)){var v=this._progress;if(ht(v))for(var m=0;m<v.length;m++)this._doProgress(v[m],d,p,l,u);else this._doProgress(v,d,p,l,u)}this._dueIndex=p;var g=this._settedOutputEnd!=null?this._settedOutputEnd:p;this._outputDueEnd=g}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},e.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},e.prototype._doProgress=function(t,r,n,i,o){LM.reset(r,n,i,o),this._callingProgress=t,this._callingProgress({start:r,end:n,count:n-r,next:LM.next},this.context)},e.prototype._doReset=function(t){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var r,n;!t&&this._reset&&(r=this._reset(this.context),r&&r.progress&&(n=r.forceFirstProgress,r=r.progress),ht(r)&&!r.length&&(r=null)),this._progress=r,this._modBy=this._modDataCount=null;var i=this._downstream;return i&&i.dirty(),n},e.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},e.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},e.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},e.prototype.getUpstream=function(){return this._upstream},e.prototype.getDownstream=function(){return this._downstream},e.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},e}(),LM=function(){var e,t,r,n,i,o={reset:function(l,u,c,f){t=l,e=u,r=c,n=f,i=Math.ceil(n/r),o.next=r>1&&n>0?a:s}};return o;function s(){return t<e?t++:null}function a(){var l=t%i*r+Math.ceil(t/i),u=t>=e?null:l<n?l:t;return t++,u}}();function ka(e,t){var r=t&&t.type;return r==="ordinal"?e:(r==="time"&&!Se(e)&&e!=null&&e!=="-"&&(e=+ys(e)),e==null||e===""?NaN:+e)}var prt=Xt({number:function(e){return parseFloat(e)},time:function(e){return+ys(e)},trim:function(e){return Mt(e)?Po(e):e}});function eF(e){return prt.get(e)}var rF={lt:function(e,t){return e<t},lte:function(e,t){return e<=t},gt:function(e,t){return e>t},gte:function(e,t){return e>=t}},vrt=function(){function e(t,r){if(!Se(r)){var n="";oe(n)}this._opFn=rF[t],this._rvalFloat=xa(r)}return e.prototype.evaluate=function(t){return Se(t)?this._opFn(t,this._rvalFloat):this._opFn(xa(t),this._rvalFloat)},e}(),nF=function(){function e(t,r){var n=t==="desc";this._resultLT=n?1:-1,r==null&&(r=n?"min":"max"),this._incomparable=r==="min"?-1/0:1/0}return e.prototype.evaluate=function(t,r){var n=Se(t)?t:xa(t),i=Se(r)?r:xa(r),o=isNaN(n),s=isNaN(i);if(o&&(n=this._incomparable),s&&(i=this._incomparable),o&&s){var a=Mt(t),l=Mt(r);a&&(n=l?t:0),l&&(i=a?r:0)}return n<i?this._resultLT:n>i?-this._resultLT:0},e}(),grt=function(){function e(t,r){this._rval=r,this._isEQ=t,this._rvalTypeof=typeof r,this._rvalFloat=xa(r)}return e.prototype.evaluate=function(t){var r=t===this._rval;if(!r){var n=typeof t;n!==this._rvalTypeof&&(n==="number"||this._rvalTypeof==="number")&&(r=xa(t)===this._rvalFloat)}return this._isEQ?r:!r},e}();function mrt(e,t){return e==="eq"||e==="ne"?new grt(e==="eq",t):pt(rF,e)?new vrt(e,t):null}var _rt=function(){function e(){}return e.prototype.getRawData=function(){throw new Error("not supported")},e.prototype.getRawDataItem=function(t){throw new Error("not supported")},e.prototype.cloneRawData=function(){},e.prototype.getDimensionInfo=function(t){},e.prototype.cloneAllDimensionInfo=function(){},e.prototype.count=function(){},e.prototype.retrieveValue=function(t,r){},e.prototype.retrieveValueFromItem=function(t,r){},e.prototype.convertValue=function(t,r){return ka(t,r)},e}();function yrt(e,t){var r=new _rt,n=e.data,i=r.sourceFormat=e.sourceFormat,o=e.startIndex,s="";e.seriesLayoutBy!==Mo&&oe(s);var a=[],l={},u=e.dimensionsDefine;if(u)z(u,function(v,m){var g=v.name,_={index:m,name:g,displayName:v.displayName};if(a.push(_),g!=null){var b="";pt(l,g)&&oe(b),l[g]=_}});else for(var c=0;c<e.dimensionsDetectedCount;c++)a.push({index:c});var f=KN(i,Mo);t.__isBuiltIn&&(r.getRawDataItem=function(v){return f(n,o,a,v)},r.getRawData=Vt(brt,null,e)),r.cloneRawData=Vt(wrt,null,e);var h=JN(i,Mo);r.count=Vt(h,null,n,o,a);var d=QN(i);r.retrieveValue=function(v,m){var g=f(n,o,a,v);return p(g,m)};var p=r.retrieveValueFromItem=function(v,m){if(v!=null){var g=a[m];if(g)return d(v,m,g.name)}};return r.getDimensionInfo=Vt(Srt,null,a,l),r.cloneAllDimensionInfo=Vt(Trt,null,a),r}function brt(e){var t=e.sourceFormat;if(!TP(t)){var r="";oe(r)}return e.data}function wrt(e){var t=e.sourceFormat,r=e.data;if(!TP(t)){var n="";oe(n)}if(t===an){for(var i=[],o=0,s=r.length;o<s;o++)i.push(r[o].slice());return i}else if(t===Yi){for(var i=[],o=0,s=r.length;o<s;o++)i.push(at({},r[o]));return i}}function Srt(e,t,r){if(r!=null){if(Se(r)||!isNaN(r)&&!pt(t,r))return e[r];if(pt(t,r))return t[r]}}function Trt(e){return $t(e)}var iF=Xt();function krt(e){e=$t(e);var t=e.type,r="";t||oe(r);var n=t.split(":");n.length!==2&&oe(r);var i=!1;n[0]==="echarts"&&(t=n[1],i=!0),e.__isBuiltIn=i,iF.set(t,e)}function Prt(e,t,r){var n=tr(e),i=n.length,o="";i||oe(o);for(var s=0,a=i;s<a;s++){var l=n[s];t=Ert(l,t),s!==a-1&&(t.length=Math.max(t.length,1))}return t}function Ert(e,t,r,n){var i="";t.length||oe(i),Rt(e)||oe(i);var o=e.type,s=iF.get(o);s||oe(i);var a=Lt(t,function(u){return yrt(u,s)}),l=tr(s.transform({upstream:a[0],upstreamList:a,config:$t(e.config)}));return Lt(l,function(u,c){var f="";Rt(u)||oe(f),u.data||oe(f);var h=YN(u.data);TP(h)||oe(f);var d,p=t[0];if(p&&c===0&&!u.dimensions){var v=p.startIndex;v&&(u.data=p.data.slice(0,v).concat(u.data)),d={seriesLayoutBy:Mo,sourceHeader:v,dimensions:p.metaRawOption.dimensions}}else d={seriesLayoutBy:Mo,sourceHeader:0,dimensions:u.dimensions};return c3(u.data,d,null)})}function TP(e){return e===an||e===Yi}var g_="undefined",Crt=typeof Uint32Array===g_?Array:Uint32Array,Art=typeof Uint16Array===g_?Array:Uint16Array,oF=typeof Int32Array===g_?Array:Int32Array,IM=typeof Float64Array===g_?Array:Float64Array,sF={float:IM,int:oF,ordinal:Array,number:Array,time:IM},T2;function mh(e){return e>65535?Crt:Art}function tc(){return[1/0,-1/0]}function Mrt(e){var t=e.constructor;return t===Array?e.slice():new t(e)}function OM(e,t,r,n,i){var o=sF[r||"float"];if(i){var s=e[t],a=s&&s.length;if(a!==n){for(var l=new o(n),u=0;u<a;u++)l[u]=s[u];e[t]=l}}else e[t]=new o(n)}var xrt=function(){function e(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=Xt()}return e.prototype.initData=function(t,r,n){this._provider=t,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var i=t.getSource(),o=this.defaultDimValueGetter=T2[i.sourceFormat];this._dimValueGetter=n||o,this._rawExtent=[],qN(i),this._dimensions=Lt(r,function(s){return{type:s.type,property:s.property}}),this._initDataFromProvider(0,t.count())},e.prototype.getProvider=function(){return this._provider},e.prototype.getSource=function(){return this._provider.getSource()},e.prototype.ensureCalculationDimension=function(t,r){var n=this._calcDimNameToIdx,i=this._dimensions,o=n.get(t);if(o!=null){if(i[o].type===r)return o}else o=i.length;return i[o]={type:r},n.set(t,o),this._chunks[o]=new sF[r||"float"](this._rawCount),this._rawExtent[o]=tc(),o},e.prototype.collectOrdinalMeta=function(t,r){var n=this._chunks[t],i=this._dimensions[t],o=this._rawExtent,s=i.ordinalOffset||0,a=n.length;s===0&&(o[t]=tc());for(var l=o[t],u=s;u<a;u++){var c=n[u]=r.parseAndCollect(n[u]);isNaN(c)||(l[0]=Math.min(c,l[0]),l[1]=Math.max(c,l[1]))}i.ordinalMeta=r,i.ordinalOffset=a,i.type="ordinal"},e.prototype.getOrdinalMeta=function(t){var r=this._dimensions[t],n=r.ordinalMeta;return n},e.prototype.getDimensionProperty=function(t){var r=this._dimensions[t];return r&&r.property},e.prototype.appendData=function(t){var r=this._provider,n=this.count();r.appendData(t);var i=r.count();return r.persistent||(i+=n),n<i&&this._initDataFromProvider(n,i,!0),[n,i]},e.prototype.appendValues=function(t,r){for(var n=this._chunks,i=this._dimensions,o=i.length,s=this._rawExtent,a=this.count(),l=a+Math.max(t.length,r||0),u=0;u<o;u++){var c=i[u];OM(n,u,c.type,l,!0)}for(var f=[],h=a;h<l;h++)for(var d=h-a,p=0;p<o;p++){var c=i[p],v=T2.arrayRows.call(this,t[d]||f,c.property,d,p);n[p][h]=v;var m=s[p];v<m[0]&&(m[0]=v),v>m[1]&&(m[1]=v)}return this._rawCount=this._count=l,{start:a,end:l}},e.prototype._initDataFromProvider=function(t,r,n){for(var i=this._provider,o=this._chunks,s=this._dimensions,a=s.length,l=this._rawExtent,u=Lt(s,function(_){return _.property}),c=0;c<a;c++){var f=s[c];l[c]||(l[c]=tc()),OM(o,c,f.type,r,n)}if(i.fillStorage)i.fillStorage(t,r,o,l);else for(var h=[],d=t;d<r;d++){h=i.getItem(d,h);for(var p=0;p<a;p++){var v=o[p],m=this._dimValueGetter(h,u[p],d,p);v[d]=m;var g=l[p];m<g[0]&&(g[0]=m),m>g[1]&&(g[1]=m)}}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=r,this._extent=[]},e.prototype.count=function(){return this._count},e.prototype.get=function(t,r){if(!(r>=0&&r<this._count))return NaN;var n=this._chunks[t];return n?n[this.getRawIndex(r)]:NaN},e.prototype.getValues=function(t,r){var n=[],i=[];if(r==null){r=t,t=[];for(var o=0;o<this._dimensions.length;o++)i.push(o)}else i=t;for(var o=0,s=i.length;o<s;o++)n.push(this.get(i[o],r));return n},e.prototype.getByRawIndex=function(t,r){if(!(r>=0&&r<this._rawCount))return NaN;var n=this._chunks[t];return n?n[r]:NaN},e.prototype.getSum=function(t){var r=this._chunks[t],n=0;if(r)for(var i=0,o=this.count();i<o;i++){var s=this.get(t,i);isNaN(s)||(n+=s)}return n},e.prototype.getMedian=function(t){var r=[];this.each([t],function(o){isNaN(o)||r.push(o)});var n=r.sort(function(o,s){return o-s}),i=this.count();return i===0?0:i%2===1?n[(i-1)/2]:(n[i/2]+n[i/2-1])/2},e.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var r=this._indices,n=r[t];if(n!=null&&n<this._count&&n===t)return t;for(var i=0,o=this._count-1;i<=o;){var s=(i+o)/2|0;if(r[s]<t)i=s+1;else if(r[s]>t)o=s-1;else return s}return-1},e.prototype.indicesOfNearest=function(t,r,n){var i=this._chunks,o=i[t],s=[];if(!o)return s;n==null&&(n=1/0);for(var a=1/0,l=-1,u=0,c=0,f=this.count();c<f;c++){var h=this.getRawIndex(c),d=r-o[h],p=Math.abs(d);p<=n&&((p<a||p===a&&d>=0&&l<0)&&(a=p,l=d,u=0),d===l&&(s[u++]=c))}return s.length=u,s},e.prototype.getIndices=function(){var t,r=this._indices;if(r){var n=r.constructor,i=this._count;if(n===Array){t=new n(i);for(var o=0;o<i;o++)t[o]=r[o]}else t=new n(r.buffer,0,i)}else{var n=mh(this._rawCount);t=new n(this.count());for(var o=0;o<t.length;o++)t[o]=o}return t},e.prototype.filter=function(t,r){if(!this._count)return this;for(var n=this.clone(),i=n.count(),o=mh(n._rawCount),s=new o(i),a=[],l=t.length,u=0,c=t[0],f=n._chunks,h=0;h<i;h++){var d=void 0,p=n.getRawIndex(h);if(l===0)d=r(h);else if(l===1){var v=f[c][p];d=r(v,h)}else{for(var m=0;m<l;m++)a[m]=f[t[m]][p];a[m]=h,d=r.apply(null,a)}d&&(s[u++]=p)}return u<i&&(n._indices=s),n._count=u,n._extent=[],n._updateGetRawIdx(),n},e.prototype.selectRange=function(t){var r=this.clone(),n=r._count;if(!n)return this;var i=ge(t),o=i.length;if(!o)return this;var s=r.count(),a=mh(r._rawCount),l=new a(s),u=0,c=i[0],f=t[c][0],h=t[c][1],d=r._chunks,p=!1;if(!r._indices){var v=0;if(o===1){for(var m=d[i[0]],g=0;g<n;g++){var _=m[g];(_>=f&&_<=h||isNaN(_))&&(l[u++]=v),v++}p=!0}else if(o===2){for(var m=d[i[0]],b=d[i[1]],w=t[i[1]][0],T=t[i[1]][1],g=0;g<n;g++){var _=m[g],S=b[g];(_>=f&&_<=h||isNaN(_))&&(S>=w&&S<=T||isNaN(S))&&(l[u++]=v),v++}p=!0}}if(!p)if(o===1)for(var g=0;g<s;g++){var k=r.getRawIndex(g),_=d[i[0]][k];(_>=f&&_<=h||isNaN(_))&&(l[u++]=k)}else for(var g=0;g<s;g++){for(var A=!0,k=r.getRawIndex(g),C=0;C<o;C++){var x=i[C],_=d[x][k];(_<t[x][0]||_>t[x][1])&&(A=!1)}A&&(l[u++]=r.getRawIndex(g))}return u<s&&(r._indices=l),r._count=u,r._extent=[],r._updateGetRawIdx(),r},e.prototype.map=function(t,r){var n=this.clone(t);return this._updateDims(n,t,r),n},e.prototype.modify=function(t,r){this._updateDims(this,t,r)},e.prototype._updateDims=function(t,r,n){for(var i=t._chunks,o=[],s=r.length,a=t.count(),l=[],u=t._rawExtent,c=0;c<r.length;c++)u[r[c]]=tc();for(var f=0;f<a;f++){for(var h=t.getRawIndex(f),d=0;d<s;d++)l[d]=i[r[d]][h];l[s]=f;var p=n&&n.apply(null,l);if(p!=null){typeof p!="object"&&(o[0]=p,p=o);for(var c=0;c<p.length;c++){var v=r[c],m=p[c],g=u[v],_=i[v];_&&(_[h]=m),m<g[0]&&(g[0]=m),m>g[1]&&(g[1]=m)}}}},e.prototype.lttbDownSample=function(t,r){var n=this.clone([t],!0),i=n._chunks,o=i[t],s=this.count(),a=0,l=Math.floor(1/r),u=this.getRawIndex(0),c,f,h,d=new(mh(this._rawCount))(Math.min((Math.ceil(s/l)+2)*2,s));d[a++]=u;for(var p=1;p<s-1;p+=l){for(var v=Math.min(p+l,s-1),m=Math.min(p+l*2,s),g=(m+v)/2,_=0,b=v;b<m;b++){var w=this.getRawIndex(b),T=o[w];isNaN(T)||(_+=T)}_/=m-v;var S=p,k=Math.min(p+l,s),A=p-1,C=o[u];c=-1,h=S;for(var x=-1,I=0,b=S;b<k;b++){var w=this.getRawIndex(b),T=o[w];if(isNaN(T)){I++,x<0&&(x=w);continue}f=Math.abs((A-g)*(T-C)-(A-b)*(_-C)),f>c&&(c=f,h=w)}I>0&&I<k-S&&(d[a++]=Math.min(x,h),h=Math.max(x,h)),d[a++]=h,u=h}return d[a++]=this.getRawIndex(s-1),n._count=a,n._indices=d,n.getRawIndex=this._getRawIdx,n},e.prototype.downSample=function(t,r,n,i){for(var o=this.clone([t],!0),s=o._chunks,a=[],l=Math.floor(1/r),u=s[t],c=this.count(),f=o._rawExtent[t]=tc(),h=new(mh(this._rawCount))(Math.ceil(c/l)),d=0,p=0;p<c;p+=l){l>c-p&&(l=c-p,a.length=l);for(var v=0;v<l;v++){var m=this.getRawIndex(p+v);a[v]=u[m]}var g=n(a),_=this.getRawIndex(Math.min(p+i(a,g)||0,c-1));u[_]=g,g<f[0]&&(f[0]=g),g>f[1]&&(f[1]=g),h[d++]=_}return o._count=d,o._indices=h,o._updateGetRawIdx(),o},e.prototype.each=function(t,r){if(!!this._count)for(var n=t.length,i=this._chunks,o=0,s=this.count();o<s;o++){var a=this.getRawIndex(o);switch(n){case 0:r(o);break;case 1:r(i[t[0]][a],o);break;case 2:r(i[t[0]][a],i[t[1]][a],o);break;default:for(var l=0,u=[];l<n;l++)u[l]=i[t[l]][a];u[l]=o,r.apply(null,u)}}},e.prototype.getDataExtent=function(t){var r=this._chunks[t],n=tc();if(!r)return n;var i=this.count(),o=!this._indices,s;if(o)return this._rawExtent[t].slice();if(s=this._extent[t],s)return s.slice();s=n;for(var a=s[0],l=s[1],u=0;u<i;u++){var c=this.getRawIndex(u),f=r[c];f<a&&(a=f),f>l&&(l=f)}return s=[a,l],this._extent[t]=s,s},e.prototype.getRawDataItem=function(t){var r=this.getRawIndex(t);if(this._provider.persistent)return this._provider.getItem(r);for(var n=[],i=this._chunks,o=0;o<i.length;o++)n.push(i[o][r]);return n},e.prototype.clone=function(t,r){var n=new e,i=this._chunks,o=t&&wu(t,function(a,l){return a[l]=!0,a},{});if(o)for(var s=0;s<i.length;s++)n._chunks[s]=o[s]?Mrt(i[s]):i[s];else n._chunks=i;return this._copyCommonProps(n),r||(n._indices=this._cloneIndices()),n._updateGetRawIdx(),n},e.prototype._copyCommonProps=function(t){t._count=this._count,t._rawCount=this._rawCount,t._provider=this._provider,t._dimensions=this._dimensions,t._extent=$t(this._extent),t._rawExtent=$t(this._rawExtent)},e.prototype._cloneIndices=function(){if(this._indices){var t=this._indices.constructor,r=void 0;if(t===Array){var n=this._indices.length;r=new t(n);for(var i=0;i<n;i++)r[i]=this._indices[i]}else r=new t(this._indices);return r}return null},e.prototype._getRawIdxIdentity=function(t){return t},e.prototype._getRawIdx=function(t){return t<this._count&&t>=0?this._indices[t]:-1},e.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},e.internalField=function(){function t(r,n,i,o){return ka(r[o],this._dimensions[o])}T2={arrayRows:t,objectRows:function(r,n,i,o){return ka(r[n],this._dimensions[o])},keyedColumns:t,original:function(r,n,i,o){var s=r&&(r.value==null?r:r.value);return ka(s instanceof Array?s[o]:s,this._dimensions[o])},typedArray:function(r,n,i,o){return r[o]}}}(),e}();const f3=xrt;var aF=function(){function e(t){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=t}return e.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},e.prototype._setLocalSource=function(t,r){this._sourceList=t,this._upstreamSignList=r,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},e.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},e.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},e.prototype._createSource=function(){this._setLocalSource([],[]);var t=this._sourceHost,r=this._getUpstreamSourceManagers(),n=!!r.length,i,o;if(Y0(t)){var s=t,a=void 0,l=void 0,u=void 0;if(n){var c=r[0];c.prepareSource(),u=c.getSource(),a=u.data,l=u.sourceFormat,o=[c._getVersionSign()]}else a=s.get("data",!0),l=Fn(a)?Ta:hi,o=[];var f=this._getSourceMetaRawOption()||{},h=u&&u.metaRawOption||{},d=Jt(f.seriesLayoutBy,h.seriesLayoutBy)||null,p=Jt(f.sourceHeader,h.sourceHeader),v=Jt(f.dimensions,h.dimensions),m=d!==h.seriesLayoutBy||!!p!=!!h.sourceHeader||v;i=m?[c3(a,{seriesLayoutBy:d,sourceHeader:p,dimensions:v},l)]:[]}else{var g=t;if(n){var _=this._applyTransform(r);i=_.sourceList,o=_.upstreamSignList}else{var b=g.get("source",!0);i=[c3(b,this._getSourceMetaRawOption(),null)],o=[]}}this._setLocalSource(i,o)},e.prototype._applyTransform=function(t){var r=this._sourceHost,n=r.get("transform",!0),i=r.get("fromTransformResult",!0);if(i!=null){var o="";t.length!==1&&DM(o)}var s,a=[],l=[];return z(t,function(u){u.prepareSource();var c=u.getSource(i||0),f="";i!=null&&!c&&DM(f),a.push(c),l.push(u._getVersionSign())}),n?s=Prt(n,a,{datasetIndex:r.componentIndex}):i!=null&&(s=[srt(a[0])]),{sourceList:s,upstreamSignList:l}},e.prototype._isDirty=function(){if(this._dirty)return!0;for(var t=this._getUpstreamSourceManagers(),r=0;r<t.length;r++){var n=t[r];if(n._isDirty()||this._upstreamSignList[r]!==n._getVersionSign())return!0}},e.prototype.getSource=function(t){t=t||0;var r=this._sourceList[t];if(!r){var n=this._getUpstreamSourceManagers();return n[0]&&n[0].getSource(t)}return r},e.prototype.getSharedDataStore=function(t){var r=t.makeStoreSchema();return this._innerGetDataStore(r.dimensions,t.source,r.hash)},e.prototype._innerGetDataStore=function(t,r,n){var i=0,o=this._storeList,s=o[i];s||(s=o[i]={});var a=s[n];if(!a){var l=this._getUpstreamSourceManagers()[0];Y0(this._sourceHost)&&l?a=l._innerGetDataStore(t,r,n):(a=new f3,a.initData(new ZN(r,t.length),t)),s[n]=a}return a},e.prototype._getUpstreamSourceManagers=function(){var t=this._sourceHost;if(Y0(t)){var r=VN(t);return r?[r.getSourceManager()]:[]}else return Lt(Let(t),function(n){return n.getSourceManager()})},e.prototype._getSourceMetaRawOption=function(){var t=this._sourceHost,r,n,i;if(Y0(t))r=t.get("seriesLayoutBy",!0),n=t.get("sourceHeader",!0),i=t.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var o=t;r=o.get("seriesLayoutBy",!0),n=o.get("sourceHeader",!0),i=o.get("dimensions",!0)}return{seriesLayoutBy:r,sourceHeader:n,dimensions:i}},e}();function RM(e){var t=e.option.transform;t&&xm(e.option.transform)}function Y0(e){return e.mainType==="series"}function DM(e){throw new Error(e)}var lF="line-height:1";function uF(e,t){var r=e.color||"#6e7079",n=e.fontSize||12,i=e.fontWeight||"400",o=e.color||"#464646",s=e.fontSize||14,a=e.fontWeight||"900";return t==="html"?{nameStyle:"font-size:"+ti(n+"")+"px;color:"+ti(r)+";font-weight:"+ti(i+""),valueStyle:"font-size:"+ti(s+"")+"px;color:"+ti(o)+";font-weight:"+ti(a+"")}:{nameStyle:{fontSize:n,fill:r,fontWeight:i},valueStyle:{fontSize:s,fill:o,fontWeight:a}}}var Lrt=[0,10,20,30],Irt=["",`
`,`

`,`


`];function Oa(e,t){return t.type=e,t}function h3(e){return e.type==="section"}function cF(e){return h3(e)?Ort:Rrt}function fF(e){if(h3(e)){var t=0,r=e.blocks.length,n=r>1||r>0&&!e.noHeader;return z(e.blocks,function(i){var o=fF(i);o>=t&&(t=o+ +(n&&(!o||h3(i)&&!i.noHeader)))}),t}return 0}function Ort(e,t,r,n){var i=t.noHeader,o=Drt(fF(t)),s=[],a=t.blocks||[];Vi(!a||ht(a)),a=a||[];var l=e.orderMode;if(t.sortBlocks&&l){a=a.slice();var u={valueAsc:"asc",valueDesc:"desc"};if(pt(u,l)){var c=new nF(u[l],null);a.sort(function(p,v){return c.evaluate(p.sortParam,v.sortParam)})}else l==="seriesDesc"&&a.reverse()}z(a,function(p,v){var m=t.valueFormatter,g=cF(p)(m?at(at({},e),{valueFormatter:m}):e,p,v>0?o.html:0,n);g!=null&&s.push(g)});var f=e.renderMode==="richText"?s.join(o.richText):d3(s.join(""),i?r:o.html);if(i)return f;var h=u3(t.header,"ordinal",e.useUTC),d=uF(n,e.renderMode).nameStyle;return e.renderMode==="richText"?hF(e,h,d)+o.richText+f:d3('<div style="'+d+";"+lF+';">'+ti(h)+"</div>"+f,r)}function Rrt(e,t,r,n){var i=e.renderMode,o=t.noName,s=t.noValue,a=!t.markerType,l=t.name,u=e.useUTC,c=t.valueFormatter||e.valueFormatter||function(w){return w=ht(w)?w:[w],Lt(w,function(T,S){return u3(T,ht(d)?d[S]:d,u)})};if(!(o&&s)){var f=a?"":e.markupStyleCreator.makeTooltipMarker(t.markerType,t.markerColor||"#333",i),h=o?"":u3(l,"ordinal",u),d=t.valueType,p=s?[]:c(t.value),v=!a||!o,m=!a&&o,g=uF(n,i),_=g.nameStyle,b=g.valueStyle;return i==="richText"?(a?"":f)+(o?"":hF(e,h,_))+(s?"":zrt(e,p,v,m,b)):d3((a?"":f)+(o?"":Nrt(h,!a,_))+(s?"":Frt(p,v,m,b)),r)}}function NM(e,t,r,n,i,o){if(!!e){var s=cF(e),a={useUTC:i,renderMode:r,orderMode:n,markupStyleCreator:t,valueFormatter:e.valueFormatter};return s(a,e,0,o)}}function Drt(e){return{html:Lrt[e],richText:Irt[e]}}function d3(e,t){var r='<div style="clear:both"></div>',n="margin: "+t+"px 0 0";return'<div style="'+n+";"+lF+';">'+e+r+"</div>"}function Nrt(e,t,r){var n=t?"margin-left:2px":"";return'<span style="'+r+";"+n+'">'+ti(e)+"</span>"}function Frt(e,t,r,n){var i=r?"10px":"20px",o=t?"float:right;margin-left:"+i:"";return e=ht(e)?e:[e],'<span style="'+o+";"+n+'">'+Lt(e,function(s){return ti(s)}).join("&nbsp;&nbsp;")+"</span>"}function hF(e,t,r){return e.markupStyleCreator.wrapRichTextStyle(t,r)}function zrt(e,t,r,n,i){var o=[i],s=n?10:20;return r&&o.push({padding:[0,0,0,s],align:"right"}),e.markupStyleCreator.wrapRichTextStyle(ht(t)?t.join("  "):t,o)}function Brt(e,t){var r=e.getData().getItemVisual(t,"style"),n=r[e.visualDrawType];return fu(n)}function dF(e,t){var r=e.get("padding");return r!=null?r:t==="richText"?[8,10]:10}var k2=function(){function e(){this.richTextStyles={},this._nextStyleNameId=w7()}return e.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},e.prototype.makeTooltipMarker=function(t,r,n){var i=n==="richText"?this._generateStyleName():null,o=wet({color:r,type:t,renderMode:n,markerId:i});return Mt(o)?o:(this.richTextStyles[i]=o.style,o.content)},e.prototype.wrapRichTextStyle=function(t,r){var n={};ht(r)?z(r,function(o){return at(n,o)}):at(n,r);var i=this._generateStyleName();return this.richTextStyles[i]=n,"{"+i+"|"+t+"}"},e}();function $rt(e){var t=e.series,r=e.dataIndex,n=e.multipleSeries,i=t.getData(),o=i.mapDimensionsAll("defaultedTooltip"),s=o.length,a=t.getRawValue(r),l=ht(a),u=Brt(t,r),c,f,h,d;if(s>1||l&&!s){var p=Vrt(a,t,r,o,u);c=p.inlineValues,f=p.inlineValueTypes,h=p.blocks,d=p.inlineValues[0]}else if(s){var v=i.getDimensionInfo(o[0]);d=c=uf(i,r,o[0]),f=v.type}else d=c=l?a[0]:a;var m=qk(t),g=m&&t.name||"",_=i.getName(r),b=n?g:_;return Oa("section",{header:g,noHeader:n||!m,sortParam:d,blocks:[Oa("nameValue",{markerType:"item",markerColor:u,name:b,noName:!Po(b),value:c,valueType:f})].concat(h||[])})}function Vrt(e,t,r,n,i){var o=t.getData(),s=wu(e,function(f,h,d){var p=o.getDimensionInfo(d);return f=f||p&&p.tooltip!==!1&&p.displayName!=null},!1),a=[],l=[],u=[];n.length?z(n,function(f){c(uf(o,r,f),f)}):z(e,c);function c(f,h){var d=o.getDimensionInfo(h);!d||d.otherDims.tooltip===!1||(s?u.push(Oa("nameValue",{markerType:"subItem",markerColor:i,name:d.displayName,value:f,valueType:d.type})):(a.push(f),l.push(d.type)))}return{inlineValues:a,inlineValueTypes:l,blocks:u}}var Bs=Re();function q0(e,t){return e.getName(t)||e.getId(t)}var Urt="__universalTransitionEnabled",m_=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._selectedDataIndicesMap={},r}return t.prototype.init=function(r,n,i){this.seriesIndex=this.componentIndex,this.dataTask=Dd({count:jrt,reset:Grt}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(r,i);var o=Bs(this).sourceManager=new aF(this);o.prepareSource();var s=this.getInitialData(r,i);zM(s,this),this.dataTask.context.data=s,Bs(this).dataBeforeProcessed=s,FM(this),this._initSelectedMapFromData(s)},t.prototype.mergeDefaultAndTheme=function(r,n){var i=dp(this),o=i?p_(r):{},s=this.subType;Me.hasClass(s)&&(s+="Series"),le(r,n.getTheme().get(this.subType)),le(r,this.getDefaultOption()),qS(r,"label",["show"]),this.fillDataTextStyle(r.data),i&&lf(r,o,i)},t.prototype.mergeOption=function(r,n){r=le(this.option,r,!0),this.fillDataTextStyle(r.data);var i=dp(this);i&&lf(this.option,r,i);var o=Bs(this).sourceManager;o.dirty(),o.prepareSource();var s=this.getInitialData(r,n);zM(s,this),this.dataTask.dirty(),this.dataTask.context.data=s,Bs(this).dataBeforeProcessed=s,FM(this),this._initSelectedMapFromData(s)},t.prototype.fillDataTextStyle=function(r){if(r&&!Fn(r))for(var n=["show"],i=0;i<r.length;i++)r[i]&&r[i].label&&qS(r[i],"label",n)},t.prototype.getInitialData=function(r,n){},t.prototype.appendData=function(r){var n=this.getRawData();n.appendData(r.data)},t.prototype.getData=function(r){var n=p3(this);if(n){var i=n.context.data;return r==null?i:i.getLinkedData(r)}else return Bs(this).data},t.prototype.getAllData=function(){var r=this.getData();return r&&r.getLinkedDataAll?r.getLinkedDataAll():[{data:r}]},t.prototype.setData=function(r){var n=p3(this);if(n){var i=n.context;i.outputData=r,n!==this.dataTask&&(i.data=r)}Bs(this).data=r},t.prototype.getEncode=function(){var r=this.get("encode",!0);if(r)return Xt(r)},t.prototype.getSourceManager=function(){return Bs(this).sourceManager},t.prototype.getSource=function(){return this.getSourceManager().getSource()},t.prototype.getRawData=function(){return Bs(this).dataBeforeProcessed},t.prototype.getColorBy=function(){var r=this.get("colorBy");return r||"series"},t.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},t.prototype.getBaseAxis=function(){var r=this.coordinateSystem;return r&&r.getBaseAxis&&r.getBaseAxis()},t.prototype.formatTooltip=function(r,n,i){return $rt({series:this,dataIndex:r,multipleSeries:n})},t.prototype.isAnimationEnabled=function(){var r=this.ecModel;if(Zt.node&&!(r&&r.ssr))return!1;var n=this.getShallow("animation");return n&&this.getData().count()>this.getShallow("animationThreshold")&&(n=!1),!!n},t.prototype.restoreData=function(){this.dataTask.dirty()},t.prototype.getColorFromPalette=function(r,n,i){var o=this.ecModel,s=_P.prototype.getColorFromPalette.call(this,r,n,i);return s||(s=o.getColorFromPalette(r,n,i)),s},t.prototype.coordDimToDataDim=function(r){return this.getRawData().mapDimensionsAll(r)},t.prototype.getProgressive=function(){return this.get("progressive")},t.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},t.prototype.select=function(r,n){this._innerSelect(this.getData(n),r)},t.prototype.unselect=function(r,n){var i=this.option.selectedMap;if(!!i){var o=this.option.selectedMode,s=this.getData(n);if(o==="series"||i==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var a=0;a<r.length;a++){var l=r[a],u=q0(s,l);i[u]=!1,this._selectedDataIndicesMap[u]=-1}}},t.prototype.toggleSelect=function(r,n){for(var i=[],o=0;o<r.length;o++)i[0]=r[o],this.isSelected(r[o],n)?this.unselect(i,n):this.select(i,n)},t.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var r=this._selectedDataIndicesMap,n=ge(r),i=[],o=0;o<n.length;o++){var s=r[n[o]];s>=0&&i.push(s)}return i},t.prototype.isSelected=function(r,n){var i=this.option.selectedMap;if(!i)return!1;var o=this.getData(n);return(i==="all"||i[q0(o,r)])&&!o.getItemModel(r).get(["select","disabled"])},t.prototype.isUniversalTransitionEnabled=function(){if(this[Urt])return!0;var r=this.option.universalTransition;return r?r===!0?!0:r&&r.enabled:!1},t.prototype._innerSelect=function(r,n){var i,o,s=this.option,a=s.selectedMode,l=n.length;if(!(!a||!l)){if(a==="series")s.selectedMap="all";else if(a==="multiple"){Rt(s.selectedMap)||(s.selectedMap={});for(var u=s.selectedMap,c=0;c<l;c++){var f=n[c],h=q0(r,f);u[h]=!0,this._selectedDataIndicesMap[h]=r.getRawIndex(f)}}else if(a==="single"||a===!0){var d=n[l-1],h=q0(r,d);s.selectedMap=(i={},i[h]=!0,i),this._selectedDataIndicesMap=(o={},o[h]=r.getRawIndex(d),o)}}},t.prototype._initSelectedMapFromData=function(r){if(!this.option.selectedMap){var n=[];r.hasItemOption&&r.each(function(i){var o=r.getRawDataItem(i);o&&o.selected&&n.push(i)}),n.length>0&&this._innerSelect(r,n)}},t.registerClass=function(r){return Me.registerClass(r)},t.protoInitialize=function(){var r=t.prototype;r.type="series.__base__",r.seriesIndex=0,r.ignoreStyleOnData=!1,r.hasSymbolVisual=!1,r.defaultSymbol="circle",r.visualStyleAccessPath="itemStyle",r.visualDrawType="fill"}(),t}(Me);Gi(m_,tF);Gi(m_,_P);C7(m_,Me);function FM(e){var t=e.name;qk(e)||(e.name=Wrt(e)||t)}function Wrt(e){var t=e.getRawData(),r=t.mapDimensionsAll("seriesName"),n=[];return z(r,function(i){var o=t.getDimensionInfo(i);o.displayName&&n.push(o.displayName)}),n.join(" ")}function jrt(e){return e.model.getRawData().count()}function Grt(e){var t=e.model;return t.setData(t.getRawData().cloneShallow()),Hrt}function Hrt(e,t){t.outputData&&e.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function zM(e,t){z(X9(e.CHANGABLE_METHODS,e.DOWNSAMPLE_METHODS),function(r){e.wrapMethod(r,be(Xrt,t))})}function Xrt(e,t){var r=p3(e);return r&&r.setOutputEnd((t||this).count()),t}function p3(e){var t=(e.ecModel||{}).scheduler,r=t&&t.getPipeline(e.uid);if(r){var n=r.currentTask;if(n){var i=n.agentStubMap;i&&(n=i.get(e.uid))}return n}}const Ro=m_;var kP=function(){function e(){this.group=new Ne,this.uid=a_("viewComponent")}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,n,i){},e.prototype.dispose=function(t,r){},e.prototype.updateView=function(t,r,n,i){},e.prototype.updateLayout=function(t,r,n,i){},e.prototype.updateVisual=function(t,r,n,i){},e.prototype.toggleBlurSeries=function(t,r,n){},e.prototype.eachRendered=function(t){var r=this.group;r&&r.traverse(t)},e}();Kk(kP);J1(kP);const ci=kP;function PP(){var e=Re();return function(t){var r=e(t),n=t.pipelineContext,i=!!r.large,o=!!r.progressiveRender,s=r.large=!!(n&&n.large),a=r.progressiveRender=!!(n&&n.progressiveRender);return(i!==s||o!==a)&&"reset"}}var pF=Re(),Yrt=PP(),EP=function(){function e(){this.group=new Ne,this.uid=a_("viewChart"),this.renderTask=Dd({plan:qrt,reset:Zrt}),this.renderTask.context={view:this}}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,n,i){},e.prototype.highlight=function(t,r,n,i){var o=t.getData(i&&i.dataType);!o||$M(o,i,"emphasis")},e.prototype.downplay=function(t,r,n,i){var o=t.getData(i&&i.dataType);!o||$M(o,i,"normal")},e.prototype.remove=function(t,r){this.group.removeAll()},e.prototype.dispose=function(t,r){},e.prototype.updateView=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.updateLayout=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.updateVisual=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.eachRendered=function(t){Ef(this.group,t)},e.markUpdateMethod=function(t,r){pF(t).updateMethod=r},e.protoInitialize=function(){var t=e.prototype;t.type="chart"}(),e}();function BM(e,t,r){e&&i3(e)&&(t==="emphasis"?sp:ap)(e,r)}function $M(e,t,r){var n=au(e,t),i=t&&t.highlightKey!=null?rtt(t.highlightKey):null;n!=null?z(tr(n),function(o){BM(e.getItemGraphicEl(o),r,i)}):e.eachItemGraphicEl(function(o){BM(o,r,i)})}Kk(EP);J1(EP);function qrt(e){return Yrt(e.model)}function Zrt(e){var t=e.model,r=e.ecModel,n=e.api,i=e.payload,o=t.pipelineContext.progressiveRender,s=e.view,a=i&&pF(i).updateMethod,l=o?"incrementalPrepareRender":a&&s[a]?a:"render";return l!=="render"&&s[l](t,r,n,i),Krt[l]}var Krt={incrementalPrepareRender:{progress:function(e,t){t.view.incrementalRender(e,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(e,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}};const oi=EP;var Gm="\0__throttleOriginMethod",VM="\0__throttleRate",UM="\0__throttleType";function __(e,t,r){var n,i=0,o=0,s=null,a,l,u,c;t=t||0;function f(){o=new Date().getTime(),s=null,e.apply(l,u||[])}var h=function(){for(var d=[],p=0;p<arguments.length;p++)d[p]=arguments[p];n=new Date().getTime(),l=this,u=d;var v=c||t,m=c||r;c=null,a=n-(m?i:o)-v,clearTimeout(s),m?s=setTimeout(f,v):a>=0?f():s=setTimeout(f,-a),i=n};return h.clear=function(){s&&(clearTimeout(s),s=null)},h.debounceNextCall=function(d){c=d},h}function vF(e,t,r,n){var i=e[t];if(!!i){var o=i[Gm]||i,s=i[UM],a=i[VM];if(a!==r||s!==n){if(r==null||!n)return e[t]=o;i=e[t]=__(o,r,n==="debounce"),i[Gm]=o,i[UM]=n,i[VM]=r}return i}}function v3(e,t){var r=e[t];r&&r[Gm]&&(r.clear&&r.clear(),e[t]=r[Gm])}var WM=Re(),jM={itemStyle:op(TN,!0),lineStyle:op(SN,!0)},Jrt={lineStyle:"stroke",itemStyle:"fill"};function gF(e,t){var r=e.visualStyleMapper||jM[t];return r||(console.warn("Unkown style type '"+t+"'."),jM.itemStyle)}function mF(e,t){var r=e.visualDrawType||Jrt[t];return r||(console.warn("Unkown style type '"+t+"'."),"fill")}var Qrt={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData(),n=e.visualStyleAccessPath||"itemStyle",i=e.getModel(n),o=gF(e,n),s=o(i),a=i.getShallow("decal");a&&(r.setVisual("decal",a),a.dirty=!0);var l=mF(e,n),u=s[l],c=jt(u)?u:null,f=s.fill==="auto"||s.stroke==="auto";if(!s[l]||c||f){var h=e.getColorFromPalette(e.name,null,t.getSeriesCount());s[l]||(s[l]=h,r.setVisual("colorFromPalette",!0)),s.fill=s.fill==="auto"||jt(s.fill)?h:s.fill,s.stroke=s.stroke==="auto"||jt(s.stroke)?h:s.stroke}if(r.setVisual("style",s),r.setVisual("drawType",l),!t.isSeriesFiltered(e)&&c)return r.setVisual("colorFromPalette",!1),{dataEach:function(d,p){var v=e.getDataParams(p),m=at({},s);m[l]=c(v),d.setItemVisual(p,"style",m)}}}},_h=new Mr,tnt={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!(e.ignoreStyleOnData||t.isSeriesFiltered(e))){var r=e.getData(),n=e.visualStyleAccessPath||"itemStyle",i=gF(e,n),o=r.getVisual("drawType");return{dataEach:r.hasItemOption?function(s,a){var l=s.getRawDataItem(a);if(l&&l[n]){_h.option=l[n];var u=i(_h),c=s.ensureUniqueItemVisual(a,"style");at(c,u),_h.option.decal&&(s.setItemVisual(a,"decal",_h.option.decal),_h.option.decal.dirty=!0),o in u&&s.setItemVisual(a,"colorFromPalette",!1)}}:null}}}},ent={performRawSeries:!0,overallReset:function(e){var t=Xt();e.eachSeries(function(r){var n=r.getColorBy();if(!r.isColorBySeries()){var i=r.type+"-"+n,o=t.get(i);o||(o={},t.set(i,o)),WM(r).scope=o}}),e.eachSeries(function(r){if(!(r.isColorBySeries()||e.isSeriesFiltered(r))){var n=r.getRawData(),i={},o=r.getData(),s=WM(r).scope,a=r.visualStyleAccessPath||"itemStyle",l=mF(r,a);o.each(function(u){var c=o.getRawIndex(u);i[c]=u}),n.each(function(u){var c=i[u],f=o.getItemVisual(c,"colorFromPalette");if(f){var h=o.ensureUniqueItemVisual(c,"style"),d=n.getName(u)||u+"",p=n.count();h[l]=r.getColorFromPalette(d,s,p)}})}})}},Z0=Math.PI;function rnt(e,t){t=t||{},ne(t,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var r=new Ne,n=new er({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});r.add(n);var i=new rr({style:{text:t.text,fill:t.textColor,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily},zlevel:t.zlevel,z:10001}),o=new er({style:{fill:"none"},textContent:i,textConfig:{position:"right",distance:10},zlevel:t.zlevel,z:10001});r.add(o);var s;return t.showSpinner&&(s=new sP({shape:{startAngle:-Z0/2,endAngle:-Z0/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001}),s.animateShape(!0).when(1e3,{endAngle:Z0*3/2}).start("circularInOut"),s.animateShape(!0).when(1e3,{startAngle:Z0*3/2}).delay(300).start("circularInOut"),r.add(s)),r.resize=function(){var a=i.getBoundingRect().width,l=t.showSpinner?t.spinnerRadius:0,u=(e.getWidth()-l*2-(t.showSpinner&&a?10:0)-a)/2-(t.showSpinner&&a?0:5+a/2)+(t.showSpinner?0:a/2)+(a?0:l),c=e.getHeight()/2;t.showSpinner&&s.setShape({cx:u,cy:c}),o.setShape({x:u-l,y:c-l,width:l*2,height:l*2}),n.setShape({x:0,y:0,width:e.getWidth(),height:e.getHeight()})},r.resize(),r}var nnt=function(){function e(t,r,n,i){this._stageTaskMap=Xt(),this.ecInstance=t,this.api=r,n=this._dataProcessorHandlers=n.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=n.concat(i)}return e.prototype.restoreData=function(t,r){t.restoreData(r),this._stageTaskMap.each(function(n){var i=n.overallTask;i&&i.dirty()})},e.prototype.getPerformArgs=function(t,r){if(!!t.__pipeline){var n=this._pipelineMap.get(t.__pipeline.id),i=n.context,o=!r&&n.progressiveEnabled&&(!i||i.progressiveRender)&&t.__idxInPipeline>n.blockIndex,s=o?n.step:null,a=i&&i.modDataCount,l=a!=null?Math.ceil(a/s):null;return{step:s,modBy:l,modDataCount:a}}},e.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},e.prototype.updateStreamModes=function(t,r){var n=this._pipelineMap.get(t.uid),i=t.getData(),o=i.count(),s=n.progressiveEnabled&&r.incrementalPrepareRender&&o>=n.threshold,a=t.get("large")&&o>=t.get("largeThreshold"),l=t.get("progressiveChunkMode")==="mod"?o:null;t.pipelineContext=n.context={progressiveRender:s,modDataCount:l,large:a}},e.prototype.restorePipelines=function(t){var r=this,n=r._pipelineMap=Xt();t.eachSeries(function(i){var o=i.getProgressive(),s=i.uid;n.set(s,{id:s,head:null,tail:null,threshold:i.getProgressiveThreshold(),progressiveEnabled:o&&!(i.preventIncremental&&i.preventIncremental()),blockIndex:-1,step:Math.round(o||700),count:0}),r._pipe(i,i.dataTask)})},e.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,r=this.api.getModel(),n=this.api;z(this._allHandlers,function(i){var o=t.get(i.uid)||t.set(i.uid,{}),s="";Vi(!(i.reset&&i.overallReset),s),i.reset&&this._createSeriesStageTask(i,o,r,n),i.overallReset&&this._createOverallStageTask(i,o,r,n)},this)},e.prototype.prepareView=function(t,r,n,i){var o=t.renderTask,s=o.context;s.model=r,s.ecModel=n,s.api=i,o.__block=!t.incrementalPrepareRender,this._pipe(r,o)},e.prototype.performDataProcessorTasks=function(t,r){this._performStageTasks(this._dataProcessorHandlers,t,r,{block:!0})},e.prototype.performVisualTasks=function(t,r,n){this._performStageTasks(this._visualHandlers,t,r,n)},e.prototype._performStageTasks=function(t,r,n,i){i=i||{};var o=!1,s=this;z(t,function(l,u){if(!(i.visualType&&i.visualType!==l.visualType)){var c=s._stageTaskMap.get(l.uid),f=c.seriesTaskMap,h=c.overallTask;if(h){var d,p=h.agentStubMap;p.each(function(m){a(i,m)&&(m.dirty(),d=!0)}),d&&h.dirty(),s.updatePayload(h,n);var v=s.getPerformArgs(h,i.block);p.each(function(m){m.perform(v)}),h.perform(v)&&(o=!0)}else f&&f.each(function(m,g){a(i,m)&&m.dirty();var _=s.getPerformArgs(m,i.block);_.skip=!l.performRawSeries&&r.isSeriesFiltered(m.context.model),s.updatePayload(m,n),m.perform(_)&&(o=!0)})}});function a(l,u){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(u.__pipeline.id))}this.unfinished=o||this.unfinished},e.prototype.performSeriesTasks=function(t){var r;t.eachSeries(function(n){r=n.dataTask.perform()||r}),this.unfinished=r||this.unfinished},e.prototype.plan=function(){this._pipelineMap.each(function(t){var r=t.tail;do{if(r.__block){t.blockIndex=r.__idxInPipeline;break}r=r.getUpstream()}while(r)})},e.prototype.updatePayload=function(t,r){r!=="remain"&&(t.context.payload=r)},e.prototype._createSeriesStageTask=function(t,r,n,i){var o=this,s=r.seriesTaskMap,a=r.seriesTaskMap=Xt(),l=t.seriesType,u=t.getTargetSeries;t.createOnAllSeries?n.eachRawSeries(c):l?n.eachRawSeriesByType(l,c):u&&u(n,i).each(c);function c(f){var h=f.uid,d=a.set(h,s&&s.get(h)||Dd({plan:lnt,reset:unt,count:fnt}));d.context={model:f,ecModel:n,api:i,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:o},o._pipe(f,d)}},e.prototype._createOverallStageTask=function(t,r,n,i){var o=this,s=r.overallTask=r.overallTask||Dd({reset:int});s.context={ecModel:n,api:i,overallReset:t.overallReset,scheduler:o};var a=s.agentStubMap,l=s.agentStubMap=Xt(),u=t.seriesType,c=t.getTargetSeries,f=!0,h=!1,d="";Vi(!t.createOnAllSeries,d),u?n.eachRawSeriesByType(u,p):c?c(n,i).each(p):(f=!1,z(n.getSeries(),p));function p(v){var m=v.uid,g=l.set(m,a&&a.get(m)||(h=!0,Dd({reset:ont,onDirty:ant})));g.context={model:v,overallProgress:f},g.agent=s,g.__block=f,o._pipe(v,g)}h&&s.dirty()},e.prototype._pipe=function(t,r){var n=t.uid,i=this._pipelineMap.get(n);!i.head&&(i.head=r),i.tail&&i.tail.pipe(r),i.tail=r,r.__idxInPipeline=i.count++,r.__pipeline=i},e.wrapStageHandler=function(t,r){return jt(t)&&(t={overallReset:t,seriesType:hnt(t)}),t.uid=a_("stageHandler"),r&&(t.visualType=r),t},e}();function int(e){e.overallReset(e.ecModel,e.api,e.payload)}function ont(e){return e.overallProgress&&snt}function snt(){this.agent.dirty(),this.getDownstream().dirty()}function ant(){this.agent&&this.agent.dirty()}function lnt(e){return e.plan?e.plan(e.model,e.ecModel,e.api,e.payload):null}function unt(e){e.useClearVisual&&e.data.clearAllVisual();var t=e.resetDefines=tr(e.reset(e.model,e.ecModel,e.api,e.payload));return t.length>1?Lt(t,function(r,n){return _F(n)}):cnt}var cnt=_F(0);function _F(e){return function(t,r){var n=r.data,i=r.resetDefines[e];if(i&&i.dataEach)for(var o=t.start;o<t.end;o++)i.dataEach(n,o);else i&&i.progress&&i.progress(t,n)}}function fnt(e){return e.data.count()}function hnt(e){Hm=null;try{e(vp,yF)}catch{}return Hm}var vp={},yF={},Hm;bF(vp,jN);bF(yF,GN);vp.eachSeriesByType=vp.eachRawSeriesByType=function(e){Hm=e};vp.eachComponent=function(e){e.mainType==="series"&&e.subType&&(Hm=e.subType)};function bF(e,t){for(var r in t.prototype)e[r]=Hr}const wF=nnt;var GM=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const dnt={color:GM,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],GM]};var tn="#B9B8CE",HM="#100C2A",K0=function(){return{axisLine:{lineStyle:{color:tn}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},XM=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],SF={darkMode:!0,color:XM,backgroundColor:HM,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:tn}},textStyle:{color:tn},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:tn}},dataZoom:{borderColor:"#71708A",textStyle:{color:tn},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:tn}},timeline:{lineStyle:{color:tn},label:{color:tn},controlStyle:{color:tn,borderColor:tn}},calendar:{itemStyle:{color:HM},dayLabel:{color:tn},monthLabel:{color:tn},yearLabel:{color:tn}},timeAxis:K0(),logAxis:K0(),valueAxis:K0(),categoryAxis:K0(),line:{symbol:"circle"},graph:{color:XM},gauge:{title:{color:tn},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:tn},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};SF.categoryAxis.splitLine.show=!1;const pnt=SF;var vnt=function(){function e(){}return e.prototype.normalizeQuery=function(t){var r={},n={},i={};if(Mt(t)){var o=Co(t);r.mainType=o.main||null,r.subType=o.sub||null}else{var s=["Index","Name","Id"],a={name:1,dataIndex:1,dataType:1};z(t,function(l,u){for(var c=!1,f=0;f<s.length;f++){var h=s[f],d=u.lastIndexOf(h);if(d>0&&d===u.length-h.length){var p=u.slice(0,d);p!=="data"&&(r.mainType=p,r[h.toLowerCase()]=l,c=!0)}}a.hasOwnProperty(u)&&(n[u]=l,c=!0),c||(i[u]=l)})}return{cptQuery:r,dataQuery:n,otherQuery:i}},e.prototype.filter=function(t,r){var n=this.eventInfo;if(!n)return!0;var i=n.targetEl,o=n.packedEvent,s=n.model,a=n.view;if(!s||!a)return!0;var l=r.cptQuery,u=r.dataQuery;return c(l,s,"mainType")&&c(l,s,"subType")&&c(l,s,"index","componentIndex")&&c(l,s,"name")&&c(l,s,"id")&&c(u,o,"name")&&c(u,o,"dataIndex")&&c(u,o,"dataType")&&(!a.filterForExposedEvent||a.filterForExposedEvent(t,r.otherQuery,i,o));function c(f,h,d,p){return f[d]==null||h[p||d]===f[d]}},e.prototype.afterTrigger=function(){this.eventInfo=null},e}(),g3=["symbol","symbolSize","symbolRotate","symbolOffset"],YM=g3.concat(["symbolKeepAspect"]),gnt={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData();if(e.legendIcon&&r.setVisual("legendIcon",e.legendIcon),!e.hasSymbolVisual)return;for(var n={},i={},o=!1,s=0;s<g3.length;s++){var a=g3[s],l=e.get(a);jt(l)?(o=!0,i[a]=l):n[a]=l}if(n.symbol=n.symbol||e.defaultSymbol,r.setVisual(at({legendIcon:e.legendIcon||n.symbol,symbolKeepAspect:e.get("symbolKeepAspect")},n)),t.isSeriesFiltered(e))return;var u=ge(i);function c(f,h){for(var d=e.getRawValue(h),p=e.getDataParams(h),v=0;v<u.length;v++){var m=u[v];f.setItemVisual(h,m,i[m](d,p))}}return{dataEach:o?c:null}}},mnt={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!e.hasSymbolVisual||t.isSeriesFiltered(e))return;var r=e.getData();function n(i,o){for(var s=i.getItemModel(o),a=0;a<YM.length;a++){var l=YM[a],u=s.getShallow(l,!0);u!=null&&i.setItemVisual(o,l,u)}}return{dataEach:r.hasItemOption?n:null}}};function TF(e,t,r){switch(r){case"color":var n=e.getItemVisual(t,"style");return n[e.getVisual("drawType")];case"opacity":return e.getItemVisual(t,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getItemVisual(t,r)}}function y_(e,t){switch(t){case"color":var r=e.getVisual("style");return r[e.getVisual("drawType")];case"opacity":return e.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getVisual(t)}}function _nt(e,t,r,n){switch(r){case"color":var i=e.ensureUniqueItemVisual(t,"style");i[e.getVisual("drawType")]=n,e.setItemVisual(t,"colorFromPalette",!1);break;case"opacity":e.ensureUniqueItemVisual(t,"style").opacity=n;break;case"symbol":case"symbolSize":case"liftZ":e.setItemVisual(t,r,n);break}}function ec(e,t,r,n,i){var o=e+t;r.isSilent(o)||n.eachComponent({mainType:"series",subType:"pie"},function(s){for(var a=s.seriesIndex,l=s.option.selectedMap,u=i.selected,c=0;c<u.length;c++)if(u[c].seriesIndex===a){var f=s.getData(),h=au(f,i.fromActionPayload);r.trigger(o,{type:o,seriesId:s.id,name:ht(h)?f.getName(h[0]):f.getName(h),selected:Mt(l)?l:at({},l)})}})}function ynt(e,t,r){e.on("selectchanged",function(n){var i=r.getModel();n.isFromClick?(ec("map","selectchanged",t,i,n),ec("pie","selectchanged",t,i,n)):n.fromAction==="select"?(ec("map","selected",t,i,n),ec("pie","selected",t,i,n)):n.fromAction==="unselect"&&(ec("map","unselected",t,i,n),ec("pie","unselected",t,i,n))})}function Rc(e,t,r){for(var n;e&&!(t(e)&&(n=e,r));)e=e.__hostTarget||e.parent;return n}var bnt=Math.round(Math.random()*9),wnt=typeof Object.defineProperty=="function",Snt=function(){function e(){this._id="__ec_inner_"+bnt++}return e.prototype.get=function(t){return this._guard(t)[this._id]},e.prototype.set=function(t,r){var n=this._guard(t);return wnt?Object.defineProperty(n,this._id,{value:r,enumerable:!1,configurable:!0}):n[this._id]=r,this},e.prototype.delete=function(t){return this.has(t)?(delete this._guard(t)[this._id],!0):!1},e.prototype.has=function(t){return!!this._guard(t)[this._id]},e.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},e}();const Tnt=Snt;var knt=pe.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,n=t.cy,i=t.width/2,o=t.height/2;e.moveTo(r,n-o),e.lineTo(r+i,n+o),e.lineTo(r-i,n+o),e.closePath()}}),Pnt=pe.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,n=t.cy,i=t.width/2,o=t.height/2;e.moveTo(r,n-o),e.lineTo(r+i,n),e.lineTo(r,n+o),e.lineTo(r-i,n),e.closePath()}}),Ent=pe.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.x,n=t.y,i=t.width/5*3,o=Math.max(i,t.height),s=i/2,a=s*s/(o-s),l=n-o+s+a,u=Math.asin(a/s),c=Math.cos(u)*s,f=Math.sin(u),h=Math.cos(u),d=s*.6,p=s*.7;e.moveTo(r-c,l+a),e.arc(r,l,s,Math.PI-u,Math.PI*2+u),e.bezierCurveTo(r+c-f*d,l+a+h*d,r,n-p,r,n),e.bezierCurveTo(r,n-p,r-c+f*d,l+a+h*d,r-c,l+a),e.closePath()}}),Cnt=pe.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.height,n=t.width,i=t.x,o=t.y,s=n/3*2;e.moveTo(i,o),e.lineTo(i+s,o+r),e.lineTo(i,o+r/4*3),e.lineTo(i-s,o+r),e.lineTo(i,o),e.closePath()}}),Ant={line:La,rect:er,roundRect:er,square:er,circle:oP,diamond:Pnt,pin:Ent,arrow:Cnt,triangle:knt},Mnt={line:function(e,t,r,n,i){i.x1=e,i.y1=t+n/2,i.x2=e+r,i.y2=t+n/2},rect:function(e,t,r,n,i){i.x=e,i.y=t,i.width=r,i.height=n},roundRect:function(e,t,r,n,i){i.x=e,i.y=t,i.width=r,i.height=n,i.r=Math.min(r,n)/4},square:function(e,t,r,n,i){var o=Math.min(r,n);i.x=e,i.y=t,i.width=o,i.height=o},circle:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.r=Math.min(r,n)/2},diamond:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.width=r,i.height=n},pin:function(e,t,r,n,i){i.x=e+r/2,i.y=t+n/2,i.width=r,i.height=n},arrow:function(e,t,r,n,i){i.x=e+r/2,i.y=t+n/2,i.width=r,i.height=n},triangle:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.width=r,i.height=n}},m3={};z(Ant,function(e,t){m3[t]=new e});var xnt=pe.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(e,t,r){var n=Fm(e,t,r),i=this.shape;return i&&i.symbolType==="pin"&&t.position==="inside"&&(n.y=r.y+r.height*.4),n},buildPath:function(e,t,r){var n=t.symbolType;if(n!=="none"){var i=m3[n];i||(n="rect",i=m3[n]),Mnt[n](t.x,t.y,t.width,t.height,i.shape),i.buildPath(e,i.shape,r)}}});function Lnt(e,t){if(this.type!=="image"){var r=this.style;this.__isEmptyBrush?(r.stroke=e,r.fill=t||"#fff",r.lineWidth=2):this.shape.symbolType==="line"?r.stroke=e:r.fill=e,this.markRedraw()}}function Ui(e,t,r,n,i,o,s){var a=e.indexOf("empty")===0;a&&(e=e.substr(5,1).toLowerCase()+e.substr(6));var l;return e.indexOf("image://")===0?l=vN(e.slice(8),new ue(t,r,n,i),s?"center":"cover"):e.indexOf("path://")===0?l=i_(e.slice(7),{},new ue(t,r,n,i),s?"center":"cover"):l=new xnt({shape:{symbolType:e,x:t,y:r,width:n,height:i}}),l.__isEmptyBrush=a,l.setColor=Lnt,o&&l.setColor(o),l}function kF(e){return ht(e)||(e=[+e,+e]),[e[0]||0,e[1]||0]}function CP(e,t){if(e!=null)return ht(e)||(e=[e,e]),[Ye(e[0],t[0])||0,Ye(Jt(e[1],e[0]),t[1])||0]}function $l(e){return isFinite(e)}function Int(e,t,r){var n=t.x==null?0:t.x,i=t.x2==null?1:t.x2,o=t.y==null?0:t.y,s=t.y2==null?0:t.y2;t.global||(n=n*r.width+r.x,i=i*r.width+r.x,o=o*r.height+r.y,s=s*r.height+r.y),n=$l(n)?n:0,i=$l(i)?i:1,o=$l(o)?o:0,s=$l(s)?s:0;var a=e.createLinearGradient(n,o,i,s);return a}function Ont(e,t,r){var n=r.width,i=r.height,o=Math.min(n,i),s=t.x==null?.5:t.x,a=t.y==null?.5:t.y,l=t.r==null?.5:t.r;t.global||(s=s*n+r.x,a=a*i+r.y,l=l*o),s=$l(s)?s:.5,a=$l(a)?a:.5,l=l>=0&&$l(l)?l:.5;var u=e.createRadialGradient(s,a,0,s,a,l);return u}function _3(e,t,r){for(var n=t.type==="radial"?Ont(e,t,r):Int(e,t,r),i=t.colorStops,o=0;o<i.length;o++)n.addColorStop(i[o].offset,i[o].color);return n}function Rnt(e,t){if(e===t||!e&&!t)return!1;if(!e||!t||e.length!==t.length)return!0;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!0;return!1}function J0(e){return parseInt(e,10)}function Q0(e,t,r){var n=["width","height"][t],i=["clientWidth","clientHeight"][t],o=["paddingLeft","paddingTop"][t],s=["paddingRight","paddingBottom"][t];if(r[n]!=null&&r[n]!=="auto")return parseFloat(r[n]);var a=document.defaultView.getComputedStyle(e);return(e[i]||J0(a[n])||J0(e.style[n]))-(J0(a[o])||0)-(J0(a[s])||0)|0}function Dnt(e,t){return!e||e==="solid"||!(t>0)?null:e==="dashed"?[4*t,2*t]:e==="dotted"?[t]:Se(e)?[e]:ht(e)?e:null}function PF(e){var t=e.style,r=t.lineDash&&t.lineWidth>0&&Dnt(t.lineDash,t.lineWidth),n=t.lineDashOffset;if(r){var i=t.strokeNoScale&&e.getLineScale?e.getLineScale():1;i&&i!==1&&(r=Lt(r,function(o){return o/i}),n/=i)}return[r,n]}var Nnt=new lu(!0);function Xm(e){var t=e.stroke;return!(t==null||t==="none"||!(e.lineWidth>0))}function qM(e){return typeof e=="string"&&e!=="none"}function Ym(e){var t=e.fill;return t!=null&&t!=="none"}function ZM(e,t){if(t.fillOpacity!=null&&t.fillOpacity!==1){var r=e.globalAlpha;e.globalAlpha=t.fillOpacity*t.opacity,e.fill(),e.globalAlpha=r}else e.fill()}function KM(e,t){if(t.strokeOpacity!=null&&t.strokeOpacity!==1){var r=e.globalAlpha;e.globalAlpha=t.strokeOpacity*t.opacity,e.stroke(),e.globalAlpha=r}else e.stroke()}function y3(e,t,r){var n=A7(t.image,t.__image,r);if(Q1(n)){var i=e.createPattern(n,t.repeat||"repeat");if(typeof DOMMatrix=="function"&&i&&i.setTransform){var o=new DOMMatrix;o.translateSelf(t.x||0,t.y||0),o.rotateSelf(0,0,(t.rotation||0)*UZ),o.scaleSelf(t.scaleX||1,t.scaleY||1),i.setTransform(o)}return i}}function Fnt(e,t,r,n){var i,o=Xm(r),s=Ym(r),a=r.strokePercent,l=a<1,u=!t.path;(!t.silent||l)&&u&&t.createPathProxy();var c=t.path||Nnt,f=t.__dirty;if(!n){var h=r.fill,d=r.stroke,p=s&&!!h.colorStops,v=o&&!!d.colorStops,m=s&&!!h.image,g=o&&!!d.image,_=void 0,b=void 0,w=void 0,T=void 0,S=void 0;(p||v)&&(S=t.getBoundingRect()),p&&(_=f?_3(e,h,S):t.__canvasFillGradient,t.__canvasFillGradient=_),v&&(b=f?_3(e,d,S):t.__canvasStrokeGradient,t.__canvasStrokeGradient=b),m&&(w=f||!t.__canvasFillPattern?y3(e,h,t):t.__canvasFillPattern,t.__canvasFillPattern=w),g&&(T=f||!t.__canvasStrokePattern?y3(e,d,t):t.__canvasStrokePattern,t.__canvasStrokePattern=w),p?e.fillStyle=_:m&&(w?e.fillStyle=w:s=!1),v?e.strokeStyle=b:g&&(T?e.strokeStyle=T:o=!1)}var k=t.getGlobalScale();c.setScale(k[0],k[1],t.segmentIgnoreThreshold);var A,C;e.setLineDash&&r.lineDash&&(i=PF(t),A=i[0],C=i[1]);var x=!0;(u||f&Ec)&&(c.setDPR(e.dpr),l?c.setContext(null):(c.setContext(e),x=!1),c.reset(),t.buildPath(c,t.shape,n),c.toStatic(),t.pathUpdated()),x&&c.rebuildPath(e,l?a:1),A&&(e.setLineDash(A),e.lineDashOffset=C),n||(r.strokeFirst?(o&&KM(e,r),s&&ZM(e,r)):(s&&ZM(e,r),o&&KM(e,r))),A&&e.setLineDash([])}function znt(e,t,r){var n=t.__image=A7(r.image,t.__image,t,t.onload);if(!(!n||!Q1(n))){var i=r.x||0,o=r.y||0,s=t.getWidth(),a=t.getHeight(),l=n.width/n.height;if(s==null&&a!=null?s=a*l:a==null&&s!=null?a=s/l:s==null&&a==null&&(s=n.width,a=n.height),r.sWidth&&r.sHeight){var u=r.sx||0,c=r.sy||0;e.drawImage(n,u,c,r.sWidth,r.sHeight,i,o,s,a)}else if(r.sx&&r.sy){var u=r.sx,c=r.sy,f=s-u,h=a-c;e.drawImage(n,u,c,f,h,i,o,s,a)}else e.drawImage(n,i,o,s,a)}}function Bnt(e,t,r){var n,i=r.text;if(i!=null&&(i+=""),i){e.font=r.font||ou,e.textAlign=r.textAlign,e.textBaseline=r.textBaseline;var o=void 0,s=void 0;e.setLineDash&&r.lineDash&&(n=PF(t),o=n[0],s=n[1]),o&&(e.setLineDash(o),e.lineDashOffset=s),r.strokeFirst?(Xm(r)&&e.strokeText(i,r.x,r.y),Ym(r)&&e.fillText(i,r.x,r.y)):(Ym(r)&&e.fillText(i,r.x,r.y),Xm(r)&&e.strokeText(i,r.x,r.y)),o&&e.setLineDash([])}}var JM=["shadowBlur","shadowOffsetX","shadowOffsetY"],QM=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function EF(e,t,r,n,i){var o=!1;if(!n&&(r=r||{},t===r))return!1;if(n||t.opacity!==r.opacity){mn(e,i),o=!0;var s=Math.max(Math.min(t.opacity,1),0);e.globalAlpha=isNaN(s)?Yl.opacity:s}(n||t.blend!==r.blend)&&(o||(mn(e,i),o=!0),e.globalCompositeOperation=t.blend||Yl.blend);for(var a=0;a<JM.length;a++){var l=JM[a];(n||t[l]!==r[l])&&(o||(mn(e,i),o=!0),e[l]=e.dpr*(t[l]||0))}return(n||t.shadowColor!==r.shadowColor)&&(o||(mn(e,i),o=!0),e.shadowColor=t.shadowColor||Yl.shadowColor),o}function t5(e,t,r,n,i){var o=gp(t,i.inHover),s=n?null:r&&gp(r,i.inHover)||{};if(o===s)return!1;var a=EF(e,o,s,n,i);if((n||o.fill!==s.fill)&&(a||(mn(e,i),a=!0),qM(o.fill)&&(e.fillStyle=o.fill)),(n||o.stroke!==s.stroke)&&(a||(mn(e,i),a=!0),qM(o.stroke)&&(e.strokeStyle=o.stroke)),(n||o.opacity!==s.opacity)&&(a||(mn(e,i),a=!0),e.globalAlpha=o.opacity==null?1:o.opacity),t.hasStroke()){var l=o.lineWidth,u=l/(o.strokeNoScale&&t.getLineScale?t.getLineScale():1);e.lineWidth!==u&&(a||(mn(e,i),a=!0),e.lineWidth=u)}for(var c=0;c<QM.length;c++){var f=QM[c],h=f[0];(n||o[h]!==s[h])&&(a||(mn(e,i),a=!0),e[h]=o[h]||f[1])}return a}function $nt(e,t,r,n,i){return EF(e,gp(t,i.inHover),r&&gp(r,i.inHover),n,i)}function CF(e,t){var r=t.transform,n=e.dpr||1;r?e.setTransform(n*r[0],n*r[1],n*r[2],n*r[3],n*r[4],n*r[5]):e.setTransform(n,0,0,n,0,0)}function Vnt(e,t,r){for(var n=!1,i=0;i<e.length;i++){var o=e[i];n=n||o.isZeroArea(),CF(t,o),t.beginPath(),o.buildPath(t,o.shape),t.clip()}r.allClipped=n}function Unt(e,t){return e&&t?e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||e[4]!==t[4]||e[5]!==t[5]:!(!e&&!t)}var e5=1,r5=2,n5=3,i5=4;function Wnt(e){var t=Ym(e),r=Xm(e);return!(e.lineDash||!(+t^+r)||t&&typeof e.fill!="string"||r&&typeof e.stroke!="string"||e.strokePercent<1||e.strokeOpacity<1||e.fillOpacity<1)}function mn(e,t){t.batchFill&&e.fill(),t.batchStroke&&e.stroke(),t.batchFill="",t.batchStroke=""}function gp(e,t){return t&&e.__hoverStyle||e.style}function AF(e,t){Vl(e,t,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function Vl(e,t,r,n){var i=t.transform;if(!t.shouldBePainted(r.viewWidth,r.viewHeight,!1,!1)){t.__dirty&=~Ln,t.__isRendered=!1;return}var o=t.__clipPaths,s=r.prevElClipPaths,a=!1,l=!1;if((!s||Rnt(o,s))&&(s&&s.length&&(mn(e,r),e.restore(),l=a=!0,r.prevElClipPaths=null,r.allClipped=!1,r.prevEl=null),o&&o.length&&(mn(e,r),e.save(),Vnt(o,e,r),a=!0),r.prevElClipPaths=o),r.allClipped){t.__isRendered=!1;return}t.beforeBrush&&t.beforeBrush(),t.innerBeforeBrush();var u=r.prevEl;u||(l=a=!0);var c=t instanceof pe&&t.autoBatch&&Wnt(t.style);a||Unt(i,u.transform)?(mn(e,r),CF(e,t)):c||mn(e,r);var f=gp(t,r.inHover);t instanceof pe?(r.lastDrawType!==e5&&(l=!0,r.lastDrawType=e5),t5(e,t,u,l,r),(!c||!r.batchFill&&!r.batchStroke)&&e.beginPath(),Fnt(e,t,f,c),c&&(r.batchFill=f.fill||"",r.batchStroke=f.stroke||"")):t instanceof QS?(r.lastDrawType!==n5&&(l=!0,r.lastDrawType=n5),t5(e,t,u,l,r),Bnt(e,t,f)):t instanceof Cs?(r.lastDrawType!==r5&&(l=!0,r.lastDrawType=r5),$nt(e,t,u,l,r),znt(e,t,f)):t.getTemporalDisplayables&&(r.lastDrawType!==i5&&(l=!0,r.lastDrawType=i5),jnt(e,t,r)),c&&n&&mn(e,r),t.innerAfterBrush(),t.afterBrush&&t.afterBrush(),r.prevEl=t,t.__dirty=0,t.__isRendered=!0}function jnt(e,t,r){var n=t.getDisplayables(),i=t.getTemporalDisplayables();e.save();var o={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:r.viewWidth,viewHeight:r.viewHeight,inHover:r.inHover},s,a;for(s=t.getCursor(),a=n.length;s<a;s++){var l=n[s];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),Vl(e,l,o,s===a-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),o.prevEl=l}for(var u=0,c=i.length;u<c;u++){var l=i[u];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),Vl(e,l,o,u===c-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),o.prevEl=l}t.clearTemporalDisplayables(),t.notClear=!0,e.restore()}var P2=new Tnt,o5=new $p(100),s5=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function qm(e,t){if(e==="none")return null;var r=t.getDevicePixelRatio(),n=t.getZr(),i=n.painter.type==="svg";e.dirty&&P2.delete(e);var o=P2.get(e);if(o)return o;var s=ne(e,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});s.backgroundColor==="none"&&(s.backgroundColor=null);var a={repeat:"repeat"};return l(a),a.rotation=s.rotation,a.scaleX=a.scaleY=i?1:1/r,P2.set(e,a),e.dirty=!1,a;function l(u){for(var c=[r],f=!0,h=0;h<s5.length;++h){var d=s[s5[h]];if(d!=null&&!ht(d)&&!Mt(d)&&!Se(d)&&typeof d!="boolean"){f=!1;break}c.push(d)}var p;if(f){p=c.join(",")+(i?"-svg":"");var v=o5.get(p);v&&(i?u.svgElement=v:u.image=v)}var m=xF(s.dashArrayX),g=Gnt(s.dashArrayY),_=MF(s.symbol),b=Hnt(m),w=LF(g),T=!i&&bu.createCanvas(),S=i&&{tag:"g",attrs:{},key:"dcl",children:[]},k=C(),A;T&&(T.width=k.width*r,T.height=k.height*r,A=T.getContext("2d")),x(),f&&o5.put(p,T||S),u.image=T,u.svgElement=S,u.svgWidth=k.width,u.svgHeight=k.height;function C(){for(var I=1,N=0,B=b.length;N<B;++N)I=_4(I,b[N]);for(var V=1,N=0,B=_.length;N<B;++N)V=_4(V,_[N].length);I*=V;var F=w*b.length*_.length;return{width:Math.max(1,Math.min(I,s.maxTileWidth)),height:Math.max(1,Math.min(F,s.maxTileHeight))}}function x(){A&&(A.clearRect(0,0,T.width,T.height),s.backgroundColor&&(A.fillStyle=s.backgroundColor,A.fillRect(0,0,T.width,T.height)));for(var I=0,N=0;N<g.length;++N)I+=g[N];if(I<=0)return;for(var B=-w,V=0,F=0,G=0;B<k.height;){if(V%2===0){for(var Z=F/2%_.length,q=0,et=0,At=0;q<k.width*2;){for(var Dt=0,N=0;N<m[G].length;++N)Dt+=m[G][N];if(Dt<=0)break;if(et%2===0){var Pt=(1-s.symbolSize)*.5,Et=q+m[G][et]*Pt,qt=B+g[V]*Pt,Y=m[G][et]*s.symbolSize,it=g[V]*s.symbolSize,K=At/2%_[Z].length;gt(Et,qt,Y,it,_[Z][K])}q+=m[G][et],++At,++et,et===m[G].length&&(et=0)}++G,G===m.length&&(G=0)}B+=g[V],++F,++V,V===g.length&&(V=0)}function gt(Ct,xt,ct,dt,$){var W=i?1:r,X=Ui($,Ct*W,xt*W,ct*W,dt*W,s.color,s.symbolKeepAspect);if(i){var J=n.painter.renderOneToVNode(X);J&&S.children.push(J)}else AF(A,X)}}}}function MF(e){if(!e||e.length===0)return[["rect"]];if(Mt(e))return[[e]];for(var t=!0,r=0;r<e.length;++r)if(!Mt(e[r])){t=!1;break}if(t)return MF([e]);for(var n=[],r=0;r<e.length;++r)Mt(e[r])?n.push([e[r]]):n.push(e[r]);return n}function xF(e){if(!e||e.length===0)return[[0,0]];if(Se(e)){var t=Math.ceil(e);return[[t,t]]}for(var r=!0,n=0;n<e.length;++n)if(!Se(e[n])){r=!1;break}if(r)return xF([e]);for(var i=[],n=0;n<e.length;++n)if(Se(e[n])){var t=Math.ceil(e[n]);i.push([t,t])}else{var t=Lt(e[n],function(a){return Math.ceil(a)});t.length%2===1?i.push(t.concat(t)):i.push(t)}return i}function Gnt(e){if(!e||typeof e=="object"&&e.length===0)return[0,0];if(Se(e)){var t=Math.ceil(e);return[t,t]}var r=Lt(e,function(n){return Math.ceil(n)});return e.length%2?r.concat(r):r}function Hnt(e){return Lt(e,function(t){return LF(t)})}function LF(e){for(var t=0,r=0;r<e.length;++r)t+=e[r];return e.length%2===1?t*2:t}function Xnt(e,t){e.eachRawSeries(function(r){if(!e.isSeriesFiltered(r)){var n=r.getData();n.hasItemVisual()&&n.each(function(s){var a=n.getItemVisual(s,"decal");if(a){var l=n.ensureUniqueItemVisual(s,"style");l.decal=qm(a,t)}});var i=n.getVisual("decal");if(i){var o=n.getVisual("style");o.decal=qm(i,t)}}})}var Ynt=new Hi;const ki=Ynt;var IF={};function qnt(e,t){IF[e]=t}function Znt(e){return IF[e]}var Knt=typeof window<"u",Jnt=1,Qnt=800,tit=900,eit=1e3,rit=2e3,nit=5e3,OF=1e3,iit=1100,AP=2e3,RF=3e3,oit=4e3,b_=4500,sit=4600,ait=5e3,lit=6e3,DF=7e3,uit={PROCESSOR:{FILTER:eit,SERIES_FILTER:Qnt,STATISTIC:nit},VISUAL:{LAYOUT:OF,PROGRESSIVE_LAYOUT:iit,GLOBAL:AP,CHART:RF,POST_CHART_LAYOUT:sit,COMPONENT:oit,BRUSH:ait,CHART_ITEM:b_,ARIA:lit,DECAL:DF}},Fr="__flagInMainProcess",hn="__pendingUpdate",E2="__needsUpdateStatus",a5=/^[a-zA-Z0-9_]+$/,C2="__connectUpdateStatus",l5=0,cit=1,fit=2;function NF(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(this.isDisposed()){this.id;return}return zF(this,e,t)}}function FF(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return zF(this,e,t)}}function zF(e,t,r){return r[0]=r[0]&&r[0].toLowerCase(),Hi.prototype[t].apply(e,r)}var BF=function(e){St(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Hi),$F=BF.prototype;$F.on=FF("on");$F.off=FF("off");var rc,A2,tv,$s,M2,x2,L2,yh,bh,u5,c5,I2,f5,ev,h5,VF,Un,d5,UF=function(e){St(t,e);function t(r,n,i){var o=e.call(this,new vnt)||this;o._chartsViews=[],o._chartsMap={},o._componentsViews=[],o._componentsMap={},o._pendingActions=[],i=i||{},Mt(n)&&(n=WF[n]),o._dom=r;var s="canvas",a="auto",l=!1,u=o._zr=v4(r,{renderer:i.renderer||s,devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height,ssr:i.ssr,useDirtyRect:Jt(i.useDirtyRect,l),useCoarsePointer:Jt(i.useCoarsePointer,a),pointerSize:i.pointerSize});o._ssr=i.ssr,o._throttledZrFlush=__(Vt(u.flush,u),17),n=$t(n),n&&XN(n,!0),o._theme=n,o._locale=pet(i.locale||kN),o._coordSysMgr=new yP;var c=o._api=h5(o);function f(h,d){return h.__prio-d.__prio}return Ug(Km,f),Ug(b3,f),o._scheduler=new wF(o,c,b3,Km),o._messageCenter=new BF,o._initEvents(),o.resize=Vt(o.resize,o),u.animation.on("frame",o._onframe,o),u5(u,o),c5(u,o),xm(o),o}return t.prototype._onframe=function(){if(!this._disposed){d5(this);var r=this._scheduler;if(this[hn]){var n=this[hn].silent;this[Fr]=!0;try{rc(this),$s.update.call(this,null,this[hn].updateParams)}catch(l){throw this[Fr]=!1,this[hn]=null,l}this._zr.flush(),this[Fr]=!1,this[hn]=null,yh.call(this,n),bh.call(this,n)}else if(r.unfinished){var i=Jnt,o=this._model,s=this._api;r.unfinished=!1;do{var a=+new Date;r.performSeriesTasks(o),r.performDataProcessorTasks(o),x2(this,o),r.performVisualTasks(o),ev(this,this._model,s,"remain",{}),i-=+new Date-a}while(i>0&&r.unfinished);r.unfinished||this._zr.flush()}}},t.prototype.getDom=function(){return this._dom},t.prototype.getId=function(){return this.id},t.prototype.getZr=function(){return this._zr},t.prototype.isSSR=function(){return this._ssr},t.prototype.setOption=function(r,n,i){if(!this[Fr]){if(this._disposed){this.id;return}var o,s,a;if(Rt(n)&&(i=n.lazyUpdate,o=n.silent,s=n.replaceMerge,a=n.transition,n=n.notMerge),this[Fr]=!0,!this._model||n){var l=new Zet(this._api),u=this._theme,c=this._model=new jN;c.scheduler=this._scheduler,c.ssr=this._ssr,c.init(null,null,null,u,this._locale,l)}this._model.setOption(r,{replaceMerge:s},w3);var f={seriesTransition:a,optionChanged:!0};if(i)this[hn]={silent:o,updateParams:f},this[Fr]=!1,this.getZr().wakeUp();else{try{rc(this),$s.update.call(this,null,f)}catch(h){throw this[hn]=null,this[Fr]=!1,h}this._ssr||this._zr.flush(),this[hn]=null,this[Fr]=!1,yh.call(this,o),bh.call(this,o)}}},t.prototype.setTheme=function(){},t.prototype.getModel=function(){return this._model},t.prototype.getOption=function(){return this._model&&this._model.getOption()},t.prototype.getWidth=function(){return this._zr.getWidth()},t.prototype.getHeight=function(){return this._zr.getHeight()},t.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||Knt&&window.devicePixelRatio||1},t.prototype.getRenderedCanvas=function(r){return this.renderToCanvas(r)},t.prototype.renderToCanvas=function(r){r=r||{};var n=this._zr.painter;return n.getRenderedCanvas({backgroundColor:r.backgroundColor||this._model.get("backgroundColor"),pixelRatio:r.pixelRatio||this.getDevicePixelRatio()})},t.prototype.renderToSVGString=function(r){r=r||{};var n=this._zr.painter;return n.renderToString({useViewBox:r.useViewBox})},t.prototype.getSvgDataURL=function(){if(!!Zt.svgSupported){var r=this._zr,n=r.storage.getDisplayList();return z(n,function(i){i.stopAnimation(null,!0)}),r.painter.toDataURL()}},t.prototype.getDataURL=function(r){if(this._disposed){this.id;return}r=r||{};var n=r.excludeComponents,i=this._model,o=[],s=this;z(n,function(l){i.eachComponent({mainType:l},function(u){var c=s._componentsMap[u.__viewId];c.group.ignore||(o.push(c),c.group.ignore=!0)})});var a=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(r).toDataURL("image/"+(r&&r.type||"png"));return z(o,function(l){l.group.ignore=!1}),a},t.prototype.getConnectedDataURL=function(r){if(this._disposed){this.id;return}var n=r.type==="svg",i=this.group,o=Math.min,s=Math.max,a=1/0;if(p5[i]){var l=a,u=a,c=-a,f=-a,h=[],d=r&&r.pixelRatio||this.getDevicePixelRatio();z(Fd,function(b,w){if(b.group===i){var T=n?b.getZr().painter.getSvgDom().innerHTML:b.renderToCanvas($t(r)),S=b.getDom().getBoundingClientRect();l=o(S.left,l),u=o(S.top,u),c=s(S.right,c),f=s(S.bottom,f),h.push({dom:T,left:S.left,top:S.top})}}),l*=d,u*=d,c*=d,f*=d;var p=c-l,v=f-u,m=bu.createCanvas(),g=v4(m,{renderer:n?"svg":"canvas"});if(g.resize({width:p,height:v}),n){var _="";return z(h,function(b){var w=b.left-l,T=b.top-u;_+='<g transform="translate('+w+","+T+')">'+b.dom+"</g>"}),g.painter.getSvgRoot().innerHTML=_,r.connectedBackgroundColor&&g.painter.setBackgroundColor(r.connectedBackgroundColor),g.refreshImmediately(),g.painter.toDataURL()}else return r.connectedBackgroundColor&&g.add(new er({shape:{x:0,y:0,width:p,height:v},style:{fill:r.connectedBackgroundColor}})),z(h,function(b){var w=new Cs({style:{x:b.left*d-l,y:b.top*d-u,image:b.dom}});g.add(w)}),g.refreshImmediately(),m.toDataURL("image/"+(r&&r.type||"png"))}else return this.getDataURL(r)},t.prototype.convertToPixel=function(r,n){return M2(this,"convertToPixel",r,n)},t.prototype.convertFromPixel=function(r,n){return M2(this,"convertFromPixel",r,n)},t.prototype.containPixel=function(r,n){if(this._disposed){this.id;return}var i=this._model,o,s=Jy(i,r);return z(s,function(a,l){l.indexOf("Models")>=0&&z(a,function(u){var c=u.coordinateSystem;if(c&&c.containPoint)o=o||!!c.containPoint(n);else if(l==="seriesModels"){var f=this._chartsMap[u.__viewId];f&&f.containPoint&&(o=o||f.containPoint(n,u))}},this)},this),!!o},t.prototype.getVisual=function(r,n){var i=this._model,o=Jy(i,r,{defaultMainType:"series"}),s=o.seriesModel,a=s.getData(),l=o.hasOwnProperty("dataIndexInside")?o.dataIndexInside:o.hasOwnProperty("dataIndex")?a.indexOfRawIndex(o.dataIndex):null;return l!=null?TF(a,l,n):y_(a,n)},t.prototype.getViewOfComponentModel=function(r){return this._componentsMap[r.__viewId]},t.prototype.getViewOfSeriesModel=function(r){return this._chartsMap[r.__viewId]},t.prototype._initEvents=function(){var r=this;z(hit,function(n){var i=function(o){var s=r.getModel(),a=o.target,l,u=n==="globalout";if(u?l={}:a&&Rc(a,function(p){var v=ae(p);if(v&&v.dataIndex!=null){var m=v.dataModel||s.getSeriesByIndex(v.seriesIndex);return l=m&&m.getDataParams(v.dataIndex,v.dataType)||{},!0}else if(v.eventData)return l=at({},v.eventData),!0},!0),l){var c=l.componentType,f=l.componentIndex;(c==="markLine"||c==="markPoint"||c==="markArea")&&(c="series",f=l.seriesIndex);var h=c&&f!=null&&s.getComponent(c,f),d=h&&r[h.mainType==="series"?"_chartsMap":"_componentsMap"][h.__viewId];l.event=o,l.type=n,r._$eventProcessor.eventInfo={targetEl:a,packedEvent:l,model:h,view:d},r.trigger(n,l)}};i.zrEventfulCallAtLast=!0,r._zr.on(n,i,r)}),z(Nd,function(n,i){r._messageCenter.on(i,function(o){this.trigger(i,o)},r)}),z(["selectchanged"],function(n){r._messageCenter.on(n,function(i){this.trigger(n,i)},r)}),ynt(this._messageCenter,this,this._api)},t.prototype.isDisposed=function(){return this._disposed},t.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},t.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var r=this.getDom();r&&P7(this.getDom(),xP,"");var n=this,i=n._api,o=n._model;z(n._componentsViews,function(s){s.dispose(o,i)}),z(n._chartsViews,function(s){s.dispose(o,i)}),n._zr.dispose(),n._dom=n._model=n._chartsMap=n._componentsMap=n._chartsViews=n._componentsViews=n._scheduler=n._api=n._zr=n._throttledZrFlush=n._theme=n._coordSysMgr=n._messageCenter=null,delete Fd[n.id]},t.prototype.resize=function(r){if(!this[Fr]){if(this._disposed){this.id;return}this._zr.resize(r);var n=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!n){var i=n.resetOption("media"),o=r&&r.silent;this[hn]&&(o==null&&(o=this[hn].silent),i=!0,this[hn]=null),this[Fr]=!0;try{i&&rc(this),$s.update.call(this,{type:"resize",animation:at({duration:0},r&&r.animation)})}catch(s){throw this[Fr]=!1,s}this[Fr]=!1,yh.call(this,o),bh.call(this,o)}}},t.prototype.showLoading=function(r,n){if(this._disposed){this.id;return}if(Rt(r)&&(n=r,r=""),r=r||"default",this.hideLoading(),!!S3[r]){var i=S3[r](this._api,n),o=this._zr;this._loadingFX=i,o.add(i)}},t.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},t.prototype.makeActionFromEvent=function(r){var n=at({},r);return n.type=Nd[r.type],n},t.prototype.dispatchAction=function(r,n){if(this._disposed){this.id;return}if(Rt(n)||(n={silent:!!n}),!!Zm[r.type]&&!!this._model){if(this[Fr]){this._pendingActions.push(r);return}var i=n.silent;L2.call(this,r,i);var o=n.flush;o?this._zr.flush():o!==!1&&Zt.browser.weChat&&this._throttledZrFlush(),yh.call(this,i),bh.call(this,i)}},t.prototype.updateLabelLayout=function(){ki.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},t.prototype.appendData=function(r){if(this._disposed){this.id;return}var n=r.seriesIndex,i=this.getModel(),o=i.getSeriesByIndex(n);o.appendData(r),this._scheduler.unfinished=!0,this.getZr().wakeUp()},t.internalField=function(){rc=function(f){var h=f._scheduler;h.restorePipelines(f._model),h.prepareStageTasks(),A2(f,!0),A2(f,!1),h.plan()},A2=function(f,h){for(var d=f._model,p=f._scheduler,v=h?f._componentsViews:f._chartsViews,m=h?f._componentsMap:f._chartsMap,g=f._zr,_=f._api,b=0;b<v.length;b++)v[b].__alive=!1;h?d.eachComponent(function(S,k){S!=="series"&&w(k)}):d.eachSeries(w);function w(S){var k=S.__requireNewView;S.__requireNewView=!1;var A="_ec_"+S.id+"_"+S.type,C=!k&&m[A];if(!C){var x=Co(S.type),I=h?ci.getClass(x.main,x.sub):oi.getClass(x.sub);C=new I,C.init(d,_),m[A]=C,v.push(C),g.add(C.group)}S.__viewId=C.__id=A,C.__alive=!0,C.__model=S,C.group.__ecComponentInfo={mainType:S.mainType,index:S.componentIndex},!h&&p.prepareView(C,S,d,_)}for(var b=0;b<v.length;){var T=v[b];T.__alive?b++:(!h&&T.renderTask.dispose(),g.remove(T.group),T.dispose(d,_),v.splice(b,1),m[T.__id]===T&&delete m[T.__id],T.__id=T.group.__ecComponentInfo=null)}},tv=function(f,h,d,p,v){var m=f._model;if(m.setUpdatePayload(d),!p){z([].concat(f._componentsViews).concat(f._chartsViews),T);return}var g={};g[p+"Id"]=d[p+"Id"],g[p+"Index"]=d[p+"Index"],g[p+"Name"]=d[p+"Name"];var _={mainType:p,query:g};v&&(_.subType=v);var b=d.excludeSeriesId,w;b!=null&&(w=Xt(),z(tr(b),function(S){var k=ii(S,null);k!=null&&w.set(k,!0)})),m&&m.eachComponent(_,function(S){var k=w&&w.get(S.id)!==null;if(!k)if(X4(d))if(S instanceof Ro)d.type===ql&&!d.notBlur&&!S.get(["emphasis","disabled"])&&YQ(S,d,f._api);else{var A=nP(S.mainType,S.componentIndex,d.name,f._api),C=A.focusSelf,x=A.dispatchers;d.type===ql&&C&&!d.notBlur&&r3(S.mainType,S.componentIndex,f._api),x&&z(x,function(I){d.type===ql?sp(I):ap(I)})}else o3(d)&&S instanceof Ro&&(KQ(S,d,f._api),G4(S),Un(f))},f),m&&m.eachComponent(_,function(S){var k=w&&w.get(S.id)!==null;k||T(f[p==="series"?"_chartsMap":"_componentsMap"][S.__viewId])},f);function T(S){S&&S.__alive&&S[h]&&S[h](S.__model,m,f._api,d)}},$s={prepareAndUpdate:function(f){rc(this),$s.update.call(this,f,{optionChanged:f.newOption!=null})},update:function(f,h){var d=this._model,p=this._api,v=this._zr,m=this._coordSysMgr,g=this._scheduler;if(!!d){d.setUpdatePayload(f),g.restoreData(d,f),g.performSeriesTasks(d),m.create(d,p),g.performDataProcessorTasks(d,f),x2(this,d),m.update(d,p),r(d),g.performVisualTasks(d,f),I2(this,d,p,f,h);var _=d.get("backgroundColor")||"transparent",b=d.get("darkMode");v.setBackgroundColor(_),b!=null&&b!=="auto"&&v.setDarkMode(b),ki.trigger("afterupdate",d,p)}},updateTransform:function(f){var h=this,d=this._model,p=this._api;if(!!d){d.setUpdatePayload(f);var v=[];d.eachComponent(function(g,_){if(g!=="series"){var b=h.getViewOfComponentModel(_);if(b&&b.__alive)if(b.updateTransform){var w=b.updateTransform(_,d,p,f);w&&w.update&&v.push(b)}else v.push(b)}});var m=Xt();d.eachSeries(function(g){var _=h._chartsMap[g.__viewId];if(_.updateTransform){var b=_.updateTransform(g,d,p,f);b&&b.update&&m.set(g.uid,1)}else m.set(g.uid,1)}),r(d),this._scheduler.performVisualTasks(d,f,{setDirty:!0,dirtyMap:m}),ev(this,d,p,f,{},m),ki.trigger("afterupdate",d,p)}},updateView:function(f){var h=this._model;!h||(h.setUpdatePayload(f),oi.markUpdateMethod(f,"updateView"),r(h),this._scheduler.performVisualTasks(h,f,{setDirty:!0}),I2(this,h,this._api,f,{}),ki.trigger("afterupdate",h,this._api))},updateVisual:function(f){var h=this,d=this._model;!d||(d.setUpdatePayload(f),d.eachSeries(function(p){p.getData().clearAllVisual()}),oi.markUpdateMethod(f,"updateVisual"),r(d),this._scheduler.performVisualTasks(d,f,{visualType:"visual",setDirty:!0}),d.eachComponent(function(p,v){if(p!=="series"){var m=h.getViewOfComponentModel(v);m&&m.__alive&&m.updateVisual(v,d,h._api,f)}}),d.eachSeries(function(p){var v=h._chartsMap[p.__viewId];v.updateVisual(p,d,h._api,f)}),ki.trigger("afterupdate",d,this._api))},updateLayout:function(f){$s.update.call(this,f)}},M2=function(f,h,d,p){if(f._disposed){f.id;return}for(var v=f._model,m=f._coordSysMgr.getCoordinateSystems(),g,_=Jy(v,d),b=0;b<m.length;b++){var w=m[b];if(w[h]&&(g=w[h](v,_,p))!=null)return g}},x2=function(f,h){var d=f._chartsMap,p=f._scheduler;h.eachSeries(function(v){p.updateStreamModes(v,d[v.__viewId])})},L2=function(f,h){var d=this,p=this.getModel(),v=f.type,m=f.escapeConnect,g=Zm[v],_=g.actionInfo,b=(_.update||"update").split(":"),w=b.pop(),T=b[0]!=null&&Co(b[0]);this[Fr]=!0;var S=[f],k=!1;f.batch&&(k=!0,S=Lt(f.batch,function(V){return V=ne(at({},V),f),V.batch=null,V}));var A=[],C,x=o3(f),I=X4(f);if(I&&Y7(this._api),z(S,function(V){if(C=g.action(V,d._model,d._api),C=C||at({},V),C.type=_.event||C.type,A.push(C),I){var F=Zk(f),G=F.queryOptionMap,Z=F.mainTypeSpecified,q=Z?G.keys()[0]:"series";tv(d,w,V,q),Un(d)}else x?(tv(d,w,V,"series"),Un(d)):T&&tv(d,w,V,T.main,T.sub)}),w!=="none"&&!I&&!x&&!T)try{this[hn]?(rc(this),$s.update.call(this,f),this[hn]=null):$s[w].call(this,f)}catch(V){throw this[Fr]=!1,V}if(k?C={type:_.event||v,escapeConnect:m,batch:A}:C=A[0],this[Fr]=!1,!h){var N=this._messageCenter;if(N.trigger(C.type,C),x){var B={type:"selectchanged",escapeConnect:m,selected:JQ(p),isFromClick:f.isFromClick||!1,fromAction:f.type,fromActionPayload:f};N.trigger(B.type,B)}}},yh=function(f){for(var h=this._pendingActions;h.length;){var d=h.shift();L2.call(this,d,f)}},bh=function(f){!f&&this.trigger("updated")},u5=function(f,h){f.on("rendered",function(d){h.trigger("rendered",d),f.animation.isFinished()&&!h[hn]&&!h._scheduler.unfinished&&!h._pendingActions.length&&h.trigger("finished")})},c5=function(f,h){f.on("mouseover",function(d){var p=d.target,v=Rc(p,i3);v&&(qQ(v,d,h._api),Un(h))}).on("mouseout",function(d){var p=d.target,v=Rc(p,i3);v&&(ZQ(v,d,h._api),Un(h))}).on("click",function(d){var p=d.target,v=Rc(p,function(_){return ae(_).dataIndex!=null},!0);if(v){var m=v.selected?"unselect":"select",g=ae(v);h._api.dispatchAction({type:m,dataType:g.dataType,dataIndexInside:g.dataIndex,seriesIndex:g.seriesIndex,isFromClick:!0})}})};function r(f){f.clearColorPalette(),f.eachSeries(function(h){h.clearColorPalette()})}function n(f){var h=[],d=[],p=!1;if(f.eachComponent(function(_,b){var w=b.get("zlevel")||0,T=b.get("z")||0,S=b.getZLevelKey();p=p||!!S,(_==="series"?d:h).push({zlevel:w,z:T,idx:b.componentIndex,type:_,key:S})}),p){var v=h.concat(d),m,g;Ug(v,function(_,b){return _.zlevel===b.zlevel?_.z-b.z:_.zlevel-b.zlevel}),z(v,function(_){var b=f.getComponent(_.type,_.idx),w=_.zlevel,T=_.key;m!=null&&(w=Math.max(m,w)),T?(w===m&&T!==g&&w++,g=T):g&&(w===m&&w++,g=""),m=w,b.setZLevel(w)})}}I2=function(f,h,d,p,v){n(h),f5(f,h,d,p,v),z(f._chartsViews,function(m){m.__alive=!1}),ev(f,h,d,p,v),z(f._chartsViews,function(m){m.__alive||m.remove(h,d)})},f5=function(f,h,d,p,v,m){z(m||f._componentsViews,function(g){var _=g.__model;u(_,g),g.render(_,h,d,p),a(_,g),c(_,g)})},ev=function(f,h,d,p,v,m){var g=f._scheduler;v=at(v||{},{updatedSeries:h.getSeries()}),ki.trigger("series:beforeupdate",h,d,v);var _=!1;h.eachSeries(function(b){var w=f._chartsMap[b.__viewId];w.__alive=!0;var T=w.renderTask;g.updatePayload(T,p),u(b,w),m&&m.get(b.uid)&&T.dirty(),T.perform(g.getPerformArgs(T))&&(_=!0),w.group.silent=!!b.get("silent"),s(b,w),G4(b)}),g.unfinished=_||g.unfinished,ki.trigger("series:layoutlabels",h,d,v),ki.trigger("series:transition",h,d,v),h.eachSeries(function(b){var w=f._chartsMap[b.__viewId];a(b,w),c(b,w)}),o(f,h),ki.trigger("series:afterupdate",h,d,v)},Un=function(f){f[E2]=!0,f.getZr().wakeUp()},d5=function(f){!f[E2]||(f.getZr().storage.traverse(function(h){Od(h)||i(h)}),f[E2]=!1)};function i(f){for(var h=[],d=f.currentStates,p=0;p<d.length;p++){var v=d[p];v==="emphasis"||v==="blur"||v==="select"||h.push(v)}f.selected&&f.states.select&&h.push("select"),f.hoverState===e_&&f.states.emphasis?h.push("emphasis"):f.hoverState===Wp&&f.states.blur&&h.push("blur"),f.useStates(h)}function o(f,h){var d=f._zr,p=d.storage,v=0;p.traverse(function(m){m.isGroup||v++}),v>h.get("hoverLayerThreshold")&&!Zt.node&&!Zt.worker&&h.eachSeries(function(m){if(!m.preventUsingHoverLayer){var g=f._chartsMap[m.__viewId];g.__alive&&g.eachRendered(function(_){_.states.emphasis&&(_.states.emphasis.hoverLayer=!0)})}})}function s(f,h){var d=f.get("blendMode")||null;h.eachRendered(function(p){p.isGroup||(p.style.blend=d)})}function a(f,h){if(!f.preventAutoZ){var d=f.get("z")||0,p=f.get("zlevel")||0;h.eachRendered(function(v){return l(v,d,p,-1/0),!0})}}function l(f,h,d,p){var v=f.getTextContent(),m=f.getTextGuideLine(),g=f.isGroup;if(g)for(var _=f.childrenRef(),b=0;b<_.length;b++)p=Math.max(l(_[b],h,d,p),p);else f.z=h,f.zlevel=d,p=Math.max(f.z2,p);if(v&&(v.z=h,v.zlevel=d,isFinite(p)&&(v.z2=p+2)),m){var w=f.textGuideLineConfig;m.z=h,m.zlevel=d,isFinite(p)&&(m.z2=p+(w&&w.showAbove?1:-1))}return p}function u(f,h){h.eachRendered(function(d){if(!Od(d)){var p=d.getTextContent(),v=d.getTextGuideLine();d.stateTransition&&(d.stateTransition=null),p&&p.stateTransition&&(p.stateTransition=null),v&&v.stateTransition&&(v.stateTransition=null),d.hasState()?(d.prevStates=d.currentStates,d.clearStates()):d.prevStates&&(d.prevStates=null)}})}function c(f,h){var d=f.getModel("stateAnimation"),p=f.isAnimationEnabled(),v=d.get("duration"),m=v>0?{duration:v,delay:d.get("delay"),easing:d.get("easing")}:null;h.eachRendered(function(g){if(g.states&&g.states.emphasis){if(Od(g))return;if(g instanceof pe&&ntt(g),g.__dirty){var _=g.prevStates;_&&g.useStates(_)}if(p){g.stateTransition=m;var b=g.getTextContent(),w=g.getTextGuideLine();b&&(b.stateTransition=m),w&&(w.stateTransition=m)}g.__dirty&&i(g)}})}h5=function(f){return new(function(h){St(d,h);function d(){return h!==null&&h.apply(this,arguments)||this}return d.prototype.getCoordinateSystems=function(){return f._coordSysMgr.getCoordinateSystems()},d.prototype.getComponentByElement=function(p){for(;p;){var v=p.__ecComponentInfo;if(v!=null)return f._model.getComponent(v.mainType,v.index);p=p.parent}},d.prototype.enterEmphasis=function(p,v){sp(p,v),Un(f)},d.prototype.leaveEmphasis=function(p,v){ap(p,v),Un(f)},d.prototype.enterBlur=function(p){j7(p),Un(f)},d.prototype.leaveBlur=function(p){rP(p),Un(f)},d.prototype.enterSelect=function(p){G7(p),Un(f)},d.prototype.leaveSelect=function(p){H7(p),Un(f)},d.prototype.getModel=function(){return f.getModel()},d.prototype.getViewOfComponentModel=function(p){return f.getViewOfComponentModel(p)},d.prototype.getViewOfSeriesModel=function(p){return f.getViewOfSeriesModel(p)},d}(GN))(f)},VF=function(f){function h(d,p){for(var v=0;v<d.length;v++){var m=d[v];m[C2]=p}}z(Nd,function(d,p){f._messageCenter.on(p,function(v){if(p5[f.group]&&f[C2]!==l5){if(v&&v.escapeConnect)return;var m=f.makeActionFromEvent(v),g=[];z(Fd,function(_){_!==f&&_.group===f.group&&g.push(_)}),h(g,l5),z(g,function(_){_[C2]!==cit&&_.dispatchAction(m)}),h(g,fit)}})})}}(),t}(Hi),MP=UF.prototype;MP.on=NF("on");MP.off=NF("off");MP.one=function(e,t,r){var n=this;function i(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];t&&t.apply&&t.apply(this,o),n.off(e,i)}this.on.call(this,e,i,r)};var hit=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var Zm={},Nd={},b3=[],w3=[],Km=[],WF={},S3={},Fd={},p5={},dit=+new Date-0,xP="_echarts_instance_";function pit(e,t,r){var n=!(r&&r.ssr);if(n){var i=vit(e);if(i)return i}var o=new UF(e,t,r);return o.id="ec_"+dit++,Fd[o.id]=o,n&&P7(e,xP,o.id),VF(o),ki.trigger("afterinit",o),o}function vit(e){return Fd[RJ(e,xP)]}function jF(e,t){WF[e]=t}function GF(e){he(w3,e)<0&&w3.push(e)}function HF(e,t){IP(b3,e,t,rit)}function git(e){LP("afterinit",e)}function mit(e){LP("afterupdate",e)}function LP(e,t){ki.on(e,t)}function Pu(e,t,r){jt(t)&&(r=t,t="");var n=Rt(e)?e.type:[e,e={event:t}][0];e.event=(e.event||n).toLowerCase(),t=e.event,!Nd[t]&&(Vi(a5.test(n)&&a5.test(t)),Zm[n]||(Zm[n]={action:r,actionInfo:e}),Nd[t]=n)}function _it(e,t){yP.register(e,t)}function yit(e,t){IP(Km,e,t,OF,"layout")}function Eu(e,t){IP(Km,e,t,RF,"visual")}var v5=[];function IP(e,t,r,n,i){if((jt(t)||Rt(t))&&(r=t,t=n),!(he(v5,r)>=0)){v5.push(r);var o=wF.wrapStageHandler(r,i);o.__prio=t,o.__raw=r,e.push(o)}}function XF(e,t){S3[e]=t}function bit(e,t,r){var n=Znt("registerMap");n&&n(e,t,r)}var wit=krt;Eu(AP,Qrt);Eu(b_,tnt);Eu(b_,ent);Eu(AP,gnt);Eu(b_,mnt);Eu(DF,Xnt);GF(XN);HF(tit,irt);XF("default",rnt);Pu({type:ql,event:ql,update:ql},Hr);Pu({type:Yg,event:Yg,update:Yg},Hr);Pu({type:xd,event:xd,update:xd},Hr);Pu({type:qg,event:qg,update:qg},Hr);Pu({type:Ld,event:Ld,update:Ld},Hr);jF("light",dnt);jF("dark",pnt);function wh(e){return e==null?0:e.length||1}function g5(e){return e}var Sit=function(){function e(t,r,n,i,o,s){this._old=t,this._new=r,this._oldKeyGetter=n||g5,this._newKeyGetter=i||g5,this.context=o,this._diffModeMultiple=s==="multiple"}return e.prototype.add=function(t){return this._add=t,this},e.prototype.update=function(t){return this._update=t,this},e.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},e.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},e.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},e.prototype.remove=function(t){return this._remove=t,this},e.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},e.prototype._executeOneToOne=function(){var t=this._old,r=this._new,n={},i=new Array(t.length),o=new Array(r.length);this._initIndexMap(t,null,i,"_oldKeyGetter"),this._initIndexMap(r,n,o,"_newKeyGetter");for(var s=0;s<t.length;s++){var a=i[s],l=n[a],u=wh(l);if(u>1){var c=l.shift();l.length===1&&(n[a]=l[0]),this._update&&this._update(c,s)}else u===1?(n[a]=null,this._update&&this._update(l,s)):this._remove&&this._remove(s)}this._performRestAdd(o,n)},e.prototype._executeMultiple=function(){var t=this._old,r=this._new,n={},i={},o=[],s=[];this._initIndexMap(t,n,o,"_oldKeyGetter"),this._initIndexMap(r,i,s,"_newKeyGetter");for(var a=0;a<o.length;a++){var l=o[a],u=n[l],c=i[l],f=wh(u),h=wh(c);if(f>1&&h===1)this._updateManyToOne&&this._updateManyToOne(c,u),i[l]=null;else if(f===1&&h>1)this._updateOneToMany&&this._updateOneToMany(c,u),i[l]=null;else if(f===1&&h===1)this._update&&this._update(c,u),i[l]=null;else if(f>1&&h>1)this._updateManyToMany&&this._updateManyToMany(c,u),i[l]=null;else if(f>1)for(var d=0;d<f;d++)this._remove&&this._remove(u[d]);else this._remove&&this._remove(u)}this._performRestAdd(s,i)},e.prototype._performRestAdd=function(t,r){for(var n=0;n<t.length;n++){var i=t[n],o=r[i],s=wh(o);if(s>1)for(var a=0;a<s;a++)this._add&&this._add(o[a]);else s===1&&this._add&&this._add(o);r[i]=null}},e.prototype._initIndexMap=function(t,r,n,i){for(var o=this._diffModeMultiple,s=0;s<t.length;s++){var a="_ec_"+this[i](t[s],s);if(o||(n[s]=a),!!r){var l=r[a],u=wh(l);u===0?(r[a]=s,o&&n.push(a)):u===1?r[a]=[l,s]:l.push(s)}}},e}();const YF=Sit;var Tit=function(){function e(t,r){this._encode=t,this._schema=r}return e.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},e.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},e}();function kit(e,t){var r={},n=r.encode={},i=Xt(),o=[],s=[],a={};z(e.dimensions,function(h){var d=e.getDimensionInfo(h),p=d.coordDim;if(p){var v=d.coordDimIndex;O2(n,p)[v]=h,d.isExtraCoord||(i.set(p,1),Eit(d.type)&&(o[0]=h),O2(a,p)[v]=e.getDimensionIndex(d.name)),d.defaultTooltip&&s.push(h)}zN.each(function(m,g){var _=O2(n,g),b=d.otherDims[g];b!=null&&b!==!1&&(_[b]=d.name)})});var l=[],u={};i.each(function(h,d){var p=n[d];u[d]=p[0],l=l.concat(p)}),r.dataDimsOnCoord=l,r.dataDimIndicesOnCoord=Lt(l,function(h){return e.getDimensionInfo(h).storeDimIndex}),r.encodeFirstDimNotExtra=u;var c=n.label;c&&c.length&&(o=c.slice());var f=n.tooltip;return f&&f.length?s=f.slice():s.length||(s=o.slice()),n.defaultedLabel=o,n.defaultedTooltip=s,r.userOutput=new Tit(a,t),r}function O2(e,t){return e.hasOwnProperty(t)||(e[t]=[]),e[t]}function Pit(e){return e==="category"?"ordinal":e==="time"?"time":"float"}function Eit(e){return!(e==="ordinal"||e==="time")}var Cit=function(){function e(t){this.otherDims={},t!=null&&at(this,t)}return e}();const Qg=Cit;var Ait=Re(),Mit={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},qF=function(){function e(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return e.prototype.isDimensionOmitted=function(){return this._dimOmitted},e.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=JF(this.source)))},e.prototype.getSourceDimensionIndex=function(t){return Jt(this._dimNameMap.get(t),-1)},e.prototype.getSourceDimension=function(t){var r=this.source.dimensionsDefine;if(r)return r[t]},e.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,r=qN(this.source),n=!QF(t),i="",o=[],s=0,a=0;s<t;s++){var l=void 0,u=void 0,c=void 0,f=this.dimensions[a];if(f&&f.storeDimIndex===s)l=r?f.name:null,u=f.type,c=f.ordinalMeta,a++;else{var h=this.getSourceDimension(s);h&&(l=r?h.name:null,u=h.type)}o.push({property:l,type:u,ordinalMeta:c}),r&&l!=null&&(!f||!f.isCalculationCoord)&&(i+=n?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),i+="$",i+=Mit[u]||"f",c&&(i+=c.uid),i+="$"}var d=this.source,p=[d.seriesLayoutBy,d.startIndex,i].join("$$");return{dimensions:o,hash:p}},e.prototype.makeOutputDimensionNames=function(){for(var t=[],r=0,n=0;r<this._fullDimCount;r++){var i=void 0,o=this.dimensions[n];if(o&&o.storeDimIndex===r)o.isCalculationCoord||(i=o.name),n++;else{var s=this.getSourceDimension(r);s&&(i=s.name)}t.push(i)}return t},e.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},e}();function ZF(e){return e instanceof qF}function KF(e){for(var t=Xt(),r=0;r<(e||[]).length;r++){var n=e[r],i=Rt(n)?n.name:n;i!=null&&t.get(i)==null&&t.set(i,r)}return t}function JF(e){var t=Ait(e);return t.dimNameMap||(t.dimNameMap=KF(e.dimensionsDefine))}function QF(e){return e>30}var Sh=Rt,Vs=Lt,xit=typeof Int32Array>"u"?Array:Int32Array,Lit="e\0\0",m5=-1,Iit=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],Oit=["_approximateExtent"],_5,rv,Th,kh,R2,nv,D2,Rit=function(){function e(t,r){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var n,i=!1;ZF(t)?(n=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(i=!0,n=t),n=n||["x","y"];for(var o={},s=[],a={},l=!1,u={},c=0;c<n.length;c++){var f=n[c],h=Mt(f)?new Qg({name:f}):f instanceof Qg?f:new Qg(f),d=h.name;h.type=h.type||"float",h.coordDim||(h.coordDim=d,h.coordDimIndex=0);var p=h.otherDims=h.otherDims||{};s.push(d),o[d]=h,u[d]!=null&&(l=!0),h.createInvertedIndices&&(a[d]=[]),p.itemName===0&&(this._nameDimIdx=c),p.itemId===0&&(this._idDimIdx=c),i&&(h.storeDimIndex=c)}if(this.dimensions=s,this._dimInfos=o,this._initGetDimensionInfo(l),this.hostModel=r,this._invertedIndicesMap=a,this._dimOmitted){var v=this._dimIdxToName=Xt();z(s,function(m){v.set(o[m].storeDimIndex,m)})}}return e.prototype.getDimension=function(t){var r=this._recognizeDimIndex(t);if(r==null)return t;if(r=t,!this._dimOmitted)return this.dimensions[r];var n=this._dimIdxToName.get(r);if(n!=null)return n;var i=this._schema.getSourceDimension(r);if(i)return i.name},e.prototype.getDimensionIndex=function(t){var r=this._recognizeDimIndex(t);if(r!=null)return r;if(t==null)return-1;var n=this._getDimInfo(t);return n?n.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},e.prototype._recognizeDimIndex=function(t){if(Se(t)||t!=null&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},e.prototype._getStoreDimIndex=function(t){var r=this.getDimensionIndex(t);return r},e.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},e.prototype._initGetDimensionInfo=function(t){var r=this._dimInfos;this._getDimInfo=t?function(n){return r.hasOwnProperty(n)?r[n]:void 0}:function(n){return r[n]}},e.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},e.prototype.mapDimension=function(t,r){var n=this._dimSummary;if(r==null)return n.encodeFirstDimNotExtra[t];var i=n.encode[t];return i?i[r]:null},e.prototype.mapDimensionsAll=function(t){var r=this._dimSummary,n=r.encode[t];return(n||[]).slice()},e.prototype.getStore=function(){return this._store},e.prototype.initData=function(t,r,n){var i=this,o;if(t instanceof f3&&(o=t),!o){var s=this.dimensions,a=bP(t)||Yr(t)?new ZN(t,s.length):t;o=new f3;var l=Vs(s,function(u){return{type:i._dimInfos[u].type,property:u}});o.initData(a,l,n)}this._store=o,this._nameList=(r||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,o.count()),this._dimSummary=kit(this,this._schema),this.userOutput=this._dimSummary.userOutput},e.prototype.appendData=function(t){var r=this._store.appendData(t);this._doInit(r[0],r[1])},e.prototype.appendValues=function(t,r){var n=this._store.appendValues(t,r.length),i=n.start,o=n.end,s=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),r)for(var a=i;a<o;a++){var l=a-i;this._nameList[a]=r[l],s&&D2(this,a)}},e.prototype._updateOrdinalMeta=function(){for(var t=this._store,r=this.dimensions,n=0;n<r.length;n++){var i=this._dimInfos[r[n]];i.ordinalMeta&&t.collectOrdinalMeta(i.storeDimIndex,i.ordinalMeta)}},e.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return this._idDimIdx==null&&t.getSource().sourceFormat!==Ta&&!t.fillStorage},e.prototype._doInit=function(t,r){if(!(t>=r)){var n=this._store,i=n.getProvider();this._updateOrdinalMeta();var o=this._nameList,s=this._idList,a=i.getSource().sourceFormat,l=a===hi;if(l&&!i.pure)for(var u=[],c=t;c<r;c++){var f=i.getItem(c,u);if(!this.hasItemOption&&SJ(f)&&(this.hasItemOption=!0),f){var h=f.name;o[c]==null&&h!=null&&(o[c]=ii(h,null));var d=f.id;s[c]==null&&d!=null&&(s[c]=ii(d,null))}}if(this._shouldMakeIdFromName())for(var c=t;c<r;c++)D2(this,c);_5(this)}},e.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.setApproximateExtent=function(t,r){r=this.getDimension(r),this._approximateExtent[r]=t.slice()},e.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},e.prototype.setCalculationInfo=function(t,r){Sh(t)?at(this._calculationInfo,t):this._calculationInfo[t]=r},e.prototype.getName=function(t){var r=this.getRawIndex(t),n=this._nameList[r];return n==null&&this._nameDimIdx!=null&&(n=Th(this,this._nameDimIdx,r)),n==null&&(n=""),n},e.prototype._getCategory=function(t,r){var n=this._store.get(t,r),i=this._store.getOrdinalMeta(t);return i?i.categories[n]:n},e.prototype.getId=function(t){return rv(this,this.getRawIndex(t))},e.prototype.count=function(){return this._store.count()},e.prototype.get=function(t,r){var n=this._store,i=this._dimInfos[t];if(i)return n.get(i.storeDimIndex,r)},e.prototype.getByRawIndex=function(t,r){var n=this._store,i=this._dimInfos[t];if(i)return n.getByRawIndex(i.storeDimIndex,r)},e.prototype.getIndices=function(){return this._store.getIndices()},e.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},e.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},e.prototype.getValues=function(t,r){var n=this,i=this._store;return ht(t)?i.getValues(Vs(t,function(o){return n._getStoreDimIndex(o)}),r):i.getValues(t)},e.prototype.hasValue=function(t){for(var r=this._dimSummary.dataDimIndicesOnCoord,n=0,i=r.length;n<i;n++)if(isNaN(this._store.get(r[n],t)))return!1;return!0},e.prototype.indexOfName=function(t){for(var r=0,n=this._store.count();r<n;r++)if(this.getName(r)===t)return r;return-1},e.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},e.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},e.prototype.rawIndexOf=function(t,r){var n=t&&this._invertedIndicesMap[t],i=n[r];return i==null||isNaN(i)?m5:i},e.prototype.indicesOfNearest=function(t,r,n){return this._store.indicesOfNearest(this._getStoreDimIndex(t),r,n)},e.prototype.each=function(t,r,n){jt(t)&&(n=r,r=t,t=[]);var i=n||this,o=Vs(kh(t),this._getStoreDimIndex,this);this._store.each(o,i?Vt(r,i):r)},e.prototype.filterSelf=function(t,r,n){jt(t)&&(n=r,r=t,t=[]);var i=n||this,o=Vs(kh(t),this._getStoreDimIndex,this);return this._store=this._store.filter(o,i?Vt(r,i):r),this},e.prototype.selectRange=function(t){var r=this,n={},i=ge(t);return z(i,function(o){var s=r._getStoreDimIndex(o);n[s]=t[o]}),this._store=this._store.selectRange(n),this},e.prototype.mapArray=function(t,r,n){jt(t)&&(n=r,r=t,t=[]),n=n||this;var i=[];return this.each(t,function(){i.push(r&&r.apply(this,arguments))},n),i},e.prototype.map=function(t,r,n,i){var o=n||i||this,s=Vs(kh(t),this._getStoreDimIndex,this),a=nv(this);return a._store=this._store.map(s,o?Vt(r,o):r),a},e.prototype.modify=function(t,r,n,i){var o=n||i||this,s=Vs(kh(t),this._getStoreDimIndex,this);this._store.modify(s,o?Vt(r,o):r)},e.prototype.downSample=function(t,r,n,i){var o=nv(this);return o._store=this._store.downSample(this._getStoreDimIndex(t),r,n,i),o},e.prototype.lttbDownSample=function(t,r){var n=nv(this);return n._store=this._store.lttbDownSample(this._getStoreDimIndex(t),r),n},e.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},e.prototype.getItemModel=function(t){var r=this.hostModel,n=this.getRawDataItem(t);return new Mr(n,r,r&&r.ecModel)},e.prototype.diff=function(t){var r=this;return new YF(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(n){return rv(t,n)},function(n){return rv(r,n)})},e.prototype.getVisual=function(t){var r=this._visual;return r&&r[t]},e.prototype.setVisual=function(t,r){this._visual=this._visual||{},Sh(t)?at(this._visual,t):this._visual[t]=r},e.prototype.getItemVisual=function(t,r){var n=this._itemVisuals[t],i=n&&n[r];return i==null?this.getVisual(r):i},e.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},e.prototype.ensureUniqueItemVisual=function(t,r){var n=this._itemVisuals,i=n[t];i||(i=n[t]={});var o=i[r];return o==null&&(o=this.getVisual(r),ht(o)?o=o.slice():Sh(o)&&(o=at({},o)),i[r]=o),o},e.prototype.setItemVisual=function(t,r,n){var i=this._itemVisuals[t]||{};this._itemVisuals[t]=i,Sh(r)?at(i,r):i[r]=n},e.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},e.prototype.setLayout=function(t,r){Sh(t)?at(this._layout,t):this._layout[t]=r},e.prototype.getLayout=function(t){return this._layout[t]},e.prototype.getItemLayout=function(t){return this._itemLayouts[t]},e.prototype.setItemLayout=function(t,r,n){this._itemLayouts[t]=n?at(this._itemLayouts[t]||{},r):r},e.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},e.prototype.setItemGraphicEl=function(t,r){var n=this.hostModel&&this.hostModel.seriesIndex;BQ(n,this.dataType,t,r),this._graphicEls[t]=r},e.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},e.prototype.eachItemGraphicEl=function(t,r){z(this._graphicEls,function(n,i){n&&t&&t.call(r,n,i)})},e.prototype.cloneShallow=function(t){return t||(t=new e(this._schema?this._schema:Vs(this.dimensions,this._getDimInfo,this),this.hostModel)),R2(t,this),t._store=this._store,t},e.prototype.wrapMethod=function(t,r){var n=this[t];!jt(n)||(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var i=n.apply(this,arguments);return r.apply(this,[i].concat(Bk(arguments)))})},e.internalField=function(){_5=function(t){var r=t._invertedIndicesMap;z(r,function(n,i){var o=t._dimInfos[i],s=o.ordinalMeta,a=t._store;if(s){n=r[i]=new xit(s.categories.length);for(var l=0;l<n.length;l++)n[l]=m5;for(var l=0;l<a.count();l++)n[a.get(o.storeDimIndex,l)]=l}})},Th=function(t,r,n){return ii(t._getCategory(r,n),null)},rv=function(t,r){var n=t._idList[r];return n==null&&t._idDimIdx!=null&&(n=Th(t,t._idDimIdx,r)),n==null&&(n=Lit+r),n},kh=function(t){return ht(t)||(t=t!=null?[t]:[]),t},nv=function(t){var r=new e(t._schema?t._schema:Vs(t.dimensions,t._getDimInfo,t),t.hostModel);return R2(r,t),r},R2=function(t,r){z(Iit.concat(r.__wrappedMethods||[]),function(n){r.hasOwnProperty(n)&&(t[n]=r[n])}),t.__wrappedMethods=r.__wrappedMethods,z(Oit,function(n){t[n]=$t(r[n])}),t._calculationInfo=at({},r._calculationInfo)},D2=function(t,r){var n=t._nameList,i=t._idList,o=t._nameDimIdx,s=t._idDimIdx,a=n[r],l=i[r];if(a==null&&o!=null&&(n[r]=a=Th(t,o,r)),l==null&&s!=null&&(i[r]=l=Th(t,s,r)),l==null&&a!=null){var u=t._nameRepeatCount,c=u[a]=(u[a]||0)+1;l=a,c>1&&(l+="__ec__"+c),i[r]=l}}}(),e}();const Zl=Rit;function tz(e,t){bP(e)||(e=wP(e)),t=t||{};var r=t.coordDimensions||[],n=t.dimensionsDefine||e.dimensionsDefine||[],i=Xt(),o=[],s=Nit(e,r,n,t.dimensionsCount),a=t.canOmitUnusedDimensions&&QF(s),l=n===e.dimensionsDefine,u=l?JF(e):KF(n),c=t.encodeDefine;!c&&t.encodeDefaulter&&(c=t.encodeDefaulter(e,s));for(var f=Xt(c),h=new oF(s),d=0;d<h.length;d++)h[d]=-1;function p(C){var x=h[C];if(x<0){var I=n[C],N=Rt(I)?I:{name:I},B=new Qg,V=N.name;V!=null&&u.get(V)!=null&&(B.name=B.displayName=V),N.type!=null&&(B.type=N.type),N.displayName!=null&&(B.displayName=N.displayName);var F=o.length;return h[C]=F,B.storeDimIndex=C,o.push(B),B}return o[x]}if(!a)for(var d=0;d<s;d++)p(d);f.each(function(C,x){var I=tr(C).slice();if(I.length===1&&!Mt(I[0])&&I[0]<0){f.set(x,!1);return}var N=f.set(x,[]);z(I,function(B,V){var F=Mt(B)?u.get(B):B;F!=null&&F<s&&(N[V]=F,m(p(F),x,V))})});var v=0;z(r,function(C){var x,I,N,B;if(Mt(C))x=C,B={};else{B=C,x=B.name;var V=B.ordinalMeta;B.ordinalMeta=null,B=at({},B),B.ordinalMeta=V,I=B.dimsDef,N=B.otherDims,B.name=B.coordDim=B.coordDimIndex=B.dimsDef=B.otherDims=null}var F=f.get(x);if(F!==!1){if(F=tr(F),!F.length)for(var G=0;G<(I&&I.length||1);G++){for(;v<s&&p(v).coordDim!=null;)v++;v<s&&F.push(v++)}z(F,function(Z,q){var et=p(Z);if(l&&B.type!=null&&(et.type=B.type),m(ne(et,B),x,q),et.name==null&&I){var At=I[q];!Rt(At)&&(At={name:At}),et.name=et.displayName=At.name,et.defaultTooltip=At.defaultTooltip}N&&ne(et.otherDims,N)})}});function m(C,x,I){zN.get(x)!=null?C.otherDims[x]=I:(C.coordDim=x,C.coordDimIndex=I,i.set(x,!0))}var g=t.generateCoord,_=t.generateCoordCount,b=_!=null;_=g?_||1:0;var w=g||"value";function T(C){C.name==null&&(C.name=C.coordDim)}if(a)z(o,function(C){T(C)}),o.sort(function(C,x){return C.storeDimIndex-x.storeDimIndex});else for(var S=0;S<s;S++){var k=p(S),A=k.coordDim;A==null&&(k.coordDim=Fit(w,i,b),k.coordDimIndex=0,(!g||_<=0)&&(k.isExtraCoord=!0),_--),T(k),k.type==null&&(UN(e,S)===Cn.Must||k.isExtraCoord&&(k.otherDims.itemName!=null||k.otherDims.seriesName!=null))&&(k.type="ordinal")}return Dit(o),new qF({source:e,dimensions:o,fullDimensionCount:s,dimensionOmitted:a})}function Dit(e){for(var t=Xt(),r=0;r<e.length;r++){var n=e[r],i=n.name,o=t.get(i)||0;o>0&&(n.name=i+(o-1)),o++,t.set(i,o)}}function Nit(e,t,r,n){var i=Math.max(e.dimensionsDetectedCount||1,t.length,r.length,n||0);return z(t,function(o){var s;Rt(o)&&(s=o.dimsDef)&&(i=Math.max(i,s.length))}),i}function Fit(e,t,r){var n=t.data;if(r||n.hasOwnProperty(e)){for(var i=0;n.hasOwnProperty(e+i);)i++;e+=i}return t.set(e,!0),e}var zit=function(){function e(t){this.coordSysDims=[],this.axisMap=Xt(),this.categoryAxisMap=Xt(),this.coordSysName=t}return e}();function Bit(e){var t=e.get("coordinateSystem"),r=new zit(t),n=$it[t];if(n)return n(e,r,r.axisMap,r.categoryAxisMap),r}var $it={cartesian2d:function(e,t,r,n){var i=e.getReferringComponents("xAxis",Li).models[0],o=e.getReferringComponents("yAxis",Li).models[0];t.coordSysDims=["x","y"],r.set("x",i),r.set("y",o),nc(i)&&(n.set("x",i),t.firstCategoryDimIndex=0),nc(o)&&(n.set("y",o),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},singleAxis:function(e,t,r,n){var i=e.getReferringComponents("singleAxis",Li).models[0];t.coordSysDims=["single"],r.set("single",i),nc(i)&&(n.set("single",i),t.firstCategoryDimIndex=0)},polar:function(e,t,r,n){var i=e.getReferringComponents("polar",Li).models[0],o=i.findAxisModel("radiusAxis"),s=i.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],r.set("radius",o),r.set("angle",s),nc(o)&&(n.set("radius",o),t.firstCategoryDimIndex=0),nc(s)&&(n.set("angle",s),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},geo:function(e,t,r,n){t.coordSysDims=["lng","lat"]},parallel:function(e,t,r,n){var i=e.ecModel,o=i.getComponent("parallel",e.get("parallelIndex")),s=t.coordSysDims=o.dimensions.slice();z(o.parallelAxisIndex,function(a,l){var u=i.getComponent("parallelAxis",a),c=s[l];r.set(c,u),nc(u)&&(n.set(c,u),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=l))})}};function nc(e){return e.get("type")==="category"}function Vit(e,t,r){r=r||{};var n=r.byIndex,i=r.stackedCoordDimension,o,s,a;Uit(t)?o=t:(s=t.schema,o=s.dimensions,a=t.store);var l=!!(e&&e.get("stack")),u,c,f,h;if(z(o,function(_,b){Mt(_)&&(o[b]=_={name:_}),l&&!_.isExtraCoord&&(!n&&!u&&_.ordinalMeta&&(u=_),!c&&_.type!=="ordinal"&&_.type!=="time"&&(!i||i===_.coordDim)&&(c=_))}),c&&!n&&!u&&(n=!0),c){f="__\0ecstackresult_"+e.id,h="__\0ecstackedover_"+e.id,u&&(u.createInvertedIndices=!0);var d=c.coordDim,p=c.type,v=0;z(o,function(_){_.coordDim===d&&v++});var m={name:f,coordDim:d,coordDimIndex:v,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:o.length},g={name:h,coordDim:h,coordDimIndex:v+1,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:o.length+1};s?(a&&(m.storeDimIndex=a.ensureCalculationDimension(h,p),g.storeDimIndex=a.ensureCalculationDimension(f,p)),s.appendCalculationDimension(m),s.appendCalculationDimension(g)):(o.push(m),o.push(g))}return{stackedDimension:c&&c.name,stackedByDimension:u&&u.name,isStackedByIndex:n,stackedOverDimension:h,stackResultDimension:f}}function Uit(e){return!ZF(e.schema)}function hu(e,t){return!!t&&t===e.getCalculationInfo("stackedDimension")}function ez(e,t){return hu(e,t)?e.getCalculationInfo("stackResultDimension"):t}function Wit(e,t){var r=e.get("coordinateSystem"),n=yP.get(r),i;return t&&t.coordSysDims&&(i=Lt(t.coordSysDims,function(o){var s={name:o},a=t.axisMap.get(o);if(a){var l=a.get("type");s.type=Pit(l)}return s})),i||(i=n&&(n.getDimensionsInfo?n.getDimensionsInfo():n.dimensions.slice())||["x","y"]),i}function jit(e,t,r){var n,i;return r&&z(e,function(o,s){var a=o.coordDim,l=r.categoryAxisMap.get(a);l&&(n==null&&(n=s),o.ordinalMeta=l.getOrdinalMeta(),t&&(o.createInvertedIndices=!0)),o.otherDims.itemName!=null&&(i=!0)}),!i&&n!=null&&(e[n].otherDims.itemName=0),n}function Hp(e,t,r){r=r||{};var n=t.getSourceManager(),i,o=!1;e?(o=!0,i=wP(e)):(i=n.getSource(),o=i.sourceFormat===hi);var s=Bit(t),a=Wit(t,s),l=r.useEncodeDefaulter,u=jt(l)?l:l?be(xet,a,t):null,c={coordDimensions:a,generateCoord:r.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:u,canOmitUnusedDimensions:!o},f=tz(i,c),h=jit(f.dimensions,r.createInvertedIndices,s),d=o?null:n.getSharedDataStore(f),p=Vit(t,{schema:f,store:d}),v=new Zl(f,t);v.setCalculationInfo(p);var m=h!=null&&Git(i)?function(g,_,b,w){return w===h?b:this.defaultDimValueGetter(g,_,b,w)}:null;return v.hasItemOption=!1,v.initData(o?i:d,null,m),v}function Git(e){if(e.sourceFormat===hi){var t=Hit(e.data||[]);return!ht(Vp(t))}}function Hit(e){for(var t=0;t<e.length&&e[t]==null;)t++;return e[t]}var rz=function(){function e(t){this._setting=t||{},this._extent=[1/0,-1/0]}return e.prototype.getSetting=function(t){return this._setting[t]},e.prototype.unionExtent=function(t){var r=this._extent;t[0]<r[0]&&(r[0]=t[0]),t[1]>r[1]&&(r[1]=t[1])},e.prototype.unionExtentFromData=function(t,r){this.unionExtent(t.getApproximateExtent(r))},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.setExtent=function(t,r){var n=this._extent;isNaN(t)||(n[0]=t),isNaN(r)||(n[1]=r)},e.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},e.prototype.isBlank=function(){return this._isBlank},e.prototype.setBlank=function(t){this._isBlank=t},e}();J1(rz);const xs=rz;var Xit=0,Yit=function(){function e(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++Xit}return e.createByAxisModel=function(t){var r=t.option,n=r.data,i=n&&Lt(n,qit);return new e({categories:i,needCollect:!i,deduplication:r.dedplication!==!1})},e.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},e.prototype.parseAndCollect=function(t){var r,n=this._needCollect;if(!Mt(t)&&!n)return t;if(n&&!this._deduplication)return r=this.categories.length,this.categories[r]=t,r;var i=this._getOrCreateMap();return r=i.get(t),r==null&&(n?(r=this.categories.length,this.categories[r]=t,i.set(t,r)):r=NaN),r},e.prototype._getOrCreateMap=function(){return this._map||(this._map=Xt(this.categories))},e}();function qit(e){return Rt(e)&&e.value!=null?e.value:e+""}const T3=Yit;function k3(e){return e.type==="interval"||e.type==="log"}function Zit(e,t,r,n){var i={},o=e[1]-e[0],s=i.interval=b7(o/t,!0);r!=null&&s<r&&(s=i.interval=r),n!=null&&s>n&&(s=i.interval=n);var a=i.intervalPrecision=nz(s),l=i.niceTickExtent=[Qe(Math.ceil(e[0]/s)*s,a),Qe(Math.floor(e[1]/s)*s,a)];return Kit(l,e),i}function N2(e){var t=Math.pow(10,Yk(e)),r=e/t;return r?r===2?r=3:r===3?r=5:r*=2:r=1,Qe(r*t)}function nz(e){return Eo(e)+2}function y5(e,t,r){e[t]=Math.max(Math.min(e[t],r[1]),r[0])}function Kit(e,t){!isFinite(e[0])&&(e[0]=t[0]),!isFinite(e[1])&&(e[1]=t[1]),y5(e,0,t),y5(e,1,t),e[0]>e[1]&&(e[0]=e[1])}function w_(e,t){return e>=t[0]&&e<=t[1]}function S_(e,t){return t[1]===t[0]?.5:(e-t[0])/(t[1]-t[0])}function T_(e,t){return e*(t[1]-t[0])+t[0]}var iz=function(e){St(t,e);function t(r){var n=e.call(this,r)||this;n.type="ordinal";var i=n.getSetting("ordinalMeta");return i||(i=new T3({})),ht(i)&&(i=new T3({categories:Lt(i,function(o){return Rt(o)?o.value:o})})),n._ordinalMeta=i,n._extent=n.getSetting("extent")||[0,i.categories.length-1],n}return t.prototype.parse=function(r){return r==null?NaN:Mt(r)?this._ordinalMeta.getOrdinal(r):Math.round(r)},t.prototype.contain=function(r){return r=this.parse(r),w_(r,this._extent)&&this._ordinalMeta.categories[r]!=null},t.prototype.normalize=function(r){return r=this._getTickNumber(this.parse(r)),S_(r,this._extent)},t.prototype.scale=function(r){return r=Math.round(T_(r,this._extent)),this.getRawOrdinalNumber(r)},t.prototype.getTicks=function(){for(var r=[],n=this._extent,i=n[0];i<=n[1];)r.push({value:i}),i++;return r},t.prototype.getMinorTicks=function(r){},t.prototype.setSortInfo=function(r){if(r==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var n=r.ordinalNumbers,i=this._ordinalNumbersByTick=[],o=this._ticksByOrdinalNumber=[],s=0,a=this._ordinalMeta.categories.length,l=Math.min(a,n.length);s<l;++s){var u=n[s];i[s]=u,o[u]=s}for(var c=0;s<a;++s){for(;o[c]!=null;)c++;i.push(c),o[c]=s}},t.prototype._getTickNumber=function(r){var n=this._ticksByOrdinalNumber;return n&&r>=0&&r<n.length?n[r]:r},t.prototype.getRawOrdinalNumber=function(r){var n=this._ordinalNumbersByTick;return n&&r>=0&&r<n.length?n[r]:r},t.prototype.getLabel=function(r){if(!this.isBlank()){var n=this.getRawOrdinalNumber(r.value),i=this._ordinalMeta.categories[n];return i==null?"":i+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.unionExtentFromData=function(r,n){this.unionExtent(r.getApproximateExtent(n))},t.prototype.isInExtentRange=function(r){return r=this._getTickNumber(r),this._extent[0]<=r&&this._extent[1]>=r},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t}(xs);xs.registerClass(iz);const oz=iz;var Sl=Qe,sz=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="interval",r._interval=0,r._intervalPrecision=2,r}return t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return w_(r,this._extent)},t.prototype.normalize=function(r){return S_(r,this._extent)},t.prototype.scale=function(r){return T_(r,this._extent)},t.prototype.setExtent=function(r,n){var i=this._extent;isNaN(r)||(i[0]=parseFloat(r)),isNaN(n)||(i[1]=parseFloat(n))},t.prototype.unionExtent=function(r){var n=this._extent;r[0]<n[0]&&(n[0]=r[0]),r[1]>n[1]&&(n[1]=r[1]),this.setExtent(n[0],n[1])},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(r){this._interval=r,this._niceExtent=this._extent.slice(),this._intervalPrecision=nz(r)},t.prototype.getTicks=function(r){var n=this._interval,i=this._extent,o=this._niceExtent,s=this._intervalPrecision,a=[];if(!n)return a;var l=1e4;i[0]<o[0]&&(r?a.push({value:Sl(o[0]-n,s)}):a.push({value:i[0]}));for(var u=o[0];u<=o[1]&&(a.push({value:u}),u=Sl(u+n,s),u!==a[a.length-1].value);)if(a.length>l)return[];var c=a.length?a[a.length-1].value:o[1];return i[1]>c&&(r?a.push({value:Sl(c+n,s)}):a.push({value:i[1]})),a},t.prototype.getMinorTicks=function(r){for(var n=this.getTicks(!0),i=[],o=this.getExtent(),s=1;s<n.length;s++){for(var a=n[s],l=n[s-1],u=0,c=[],f=a.value-l.value,h=f/r;u<r-1;){var d=Sl(l.value+(u+1)*h);d>o[0]&&d<o[1]&&c.push(d),u++}i.push(c)}return i},t.prototype.getLabel=function(r,n){if(r==null)return"";var i=n&&n.precision;i==null?i=Eo(r.value)||0:i==="auto"&&(i=this._intervalPrecision);var o=Sl(r.value,i,!0);return RN(o)},t.prototype.calcNiceTicks=function(r,n,i){r=r||5;var o=this._extent,s=o[1]-o[0];if(!!isFinite(s)){s<0&&(s=-s,o.reverse());var a=Zit(o,r,n,i);this._intervalPrecision=a.intervalPrecision,this._interval=a.interval,this._niceExtent=a.niceTickExtent}},t.prototype.calcNiceExtent=function(r){var n=this._extent;if(n[0]===n[1])if(n[0]!==0){var i=Math.abs(n[0]);r.fixMax||(n[1]+=i/2),n[0]-=i/2}else n[1]=1;var o=n[1]-n[0];isFinite(o)||(n[0]=0,n[1]=1),this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval);var s=this._interval;r.fixMin||(n[0]=Sl(Math.floor(n[0]/s)*s)),r.fixMax||(n[1]=Sl(Math.ceil(n[1]/s)*s))},t.prototype.setNiceExtent=function(r,n){this._niceExtent=[r,n]},t.type="interval",t}(xs);xs.registerClass(sz);const Xp=sz;var az=typeof Float32Array<"u",Jit=az?Float32Array:Array;function us(e){return ht(e)?az?new Float32Array(e):e:new Jit(e)}var P3="__ec_stack_";function OP(e){return e.get("stack")||P3+e.seriesIndex}function RP(e){return e.dim+e.index}function Qit(e){var t=[],r=e.axis,n="axis0";if(r.type==="category"){for(var i=r.getBandWidth(),o=0;o<e.count;o++)t.push(ne({bandWidth:i,axisKey:n,stackId:P3+o},e));for(var s=cz(t),a=[],o=0;o<e.count;o++){var l=s[n][P3+o];l.offsetCenter=l.offset+l.width/2,a.push(l)}return a}}function lz(e,t){var r=[];return t.eachSeriesByType(e,function(n){fz(n)&&r.push(n)}),r}function tot(e){var t={};z(e,function(l){var u=l.coordinateSystem,c=u.getBaseAxis();if(!(c.type!=="time"&&c.type!=="value"))for(var f=l.getData(),h=c.dim+"_"+c.index,d=f.getDimensionIndex(f.mapDimension(c.dim)),p=f.getStore(),v=0,m=p.count();v<m;++v){var g=p.get(d,v);t[h]?t[h].push(g):t[h]=[g]}});var r={};for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];if(i){i.sort(function(l,u){return l-u});for(var o=null,s=1;s<i.length;++s){var a=i[s]-i[s-1];a>0&&(o=o===null?a:Math.min(o,a))}r[n]=o}}return r}function uz(e){var t=tot(e),r=[];return z(e,function(n){var i=n.coordinateSystem,o=i.getBaseAxis(),s=o.getExtent(),a;if(o.type==="category")a=o.getBandWidth();else if(o.type==="value"||o.type==="time"){var l=o.dim+"_"+o.index,u=t[l],c=Math.abs(s[1]-s[0]),f=o.scale.getExtent(),h=Math.abs(f[1]-f[0]);a=u?c/h*u:c}else{var d=n.getData();a=Math.abs(s[1]-s[0])/d.count()}var p=Ye(n.get("barWidth"),a),v=Ye(n.get("barMaxWidth"),a),m=Ye(n.get("barMinWidth")||(hz(n)?.5:1),a),g=n.get("barGap"),_=n.get("barCategoryGap");r.push({bandWidth:a,barWidth:p,barMaxWidth:v,barMinWidth:m,barGap:g,barCategoryGap:_,axisKey:RP(o),stackId:OP(n)})}),cz(r)}function cz(e){var t={};z(e,function(n,i){var o=n.axisKey,s=n.bandWidth,a=t[o]||{bandWidth:s,remainedWidth:s,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},l=a.stacks;t[o]=a;var u=n.stackId;l[u]||a.autoWidthCount++,l[u]=l[u]||{width:0,maxWidth:0};var c=n.barWidth;c&&!l[u].width&&(l[u].width=c,c=Math.min(a.remainedWidth,c),a.remainedWidth-=c);var f=n.barMaxWidth;f&&(l[u].maxWidth=f);var h=n.barMinWidth;h&&(l[u].minWidth=h);var d=n.barGap;d!=null&&(a.gap=d);var p=n.barCategoryGap;p!=null&&(a.categoryGap=p)});var r={};return z(t,function(n,i){r[i]={};var o=n.stacks,s=n.bandWidth,a=n.categoryGap;if(a==null){var l=ge(o).length;a=Math.max(35-l*4,15)+"%"}var u=Ye(a,s),c=Ye(n.gap,1),f=n.remainedWidth,h=n.autoWidthCount,d=(f-u)/(h+(h-1)*c);d=Math.max(d,0),z(o,function(g){var _=g.maxWidth,b=g.minWidth;if(g.width){var w=g.width;_&&(w=Math.min(w,_)),b&&(w=Math.max(w,b)),g.width=w,f-=w+c*w,h--}else{var w=d;_&&_<w&&(w=Math.min(_,f)),b&&b>w&&(w=b),w!==d&&(g.width=w,f-=w+c*w,h--)}}),d=(f-u)/(h+(h-1)*c),d=Math.max(d,0);var p=0,v;z(o,function(g,_){g.width||(g.width=d),v=g,p+=g.width*(1+c)}),v&&(p-=v.width*c);var m=-p/2;z(o,function(g,_){r[i][_]=r[i][_]||{bandWidth:s,offset:m,width:g.width},m+=g.width*(1+c)})}),r}function eot(e,t,r){if(e&&t){var n=e[RP(t)];return n!=null&&r!=null?n[OP(r)]:n}}function rot(e,t){var r=lz(e,t),n=uz(r);z(r,function(i){var o=i.getData(),s=i.coordinateSystem,a=s.getBaseAxis(),l=OP(i),u=n[RP(a)][l],c=u.offset,f=u.width;o.setLayout({bandWidth:u.bandWidth,offset:c,size:f})})}function not(e){return{seriesType:e,plan:PP(),reset:function(t){if(!!fz(t)){var r=t.getData(),n=t.coordinateSystem,i=n.getBaseAxis(),o=n.getOtherAxis(i),s=r.getDimensionIndex(r.mapDimension(o.dim)),a=r.getDimensionIndex(r.mapDimension(i.dim)),l=t.get("showBackground",!0),u=r.mapDimension(o.dim),c=r.getCalculationInfo("stackResultDimension"),f=hu(r,u)&&!!r.getCalculationInfo("stackedOnSeries"),h=o.isHorizontal(),d=iot(i,o),p=hz(t),v=t.get("barMinHeight")||0,m=c&&r.getDimensionIndex(c),g=r.getLayout("size"),_=r.getLayout("offset");return{progress:function(b,w){for(var T=b.count,S=p&&us(T*3),k=p&&l&&us(T*3),A=p&&us(T),C=n.master.getRect(),x=h?C.width:C.height,I,N=w.getStore(),B=0;(I=b.next())!=null;){var V=N.get(f?m:s,I),F=N.get(a,I),G=d,Z=void 0;f&&(Z=+V-N.get(s,I));var q=void 0,et=void 0,At=void 0,Dt=void 0;if(h){var Pt=n.dataToPoint([V,F]);if(f){var Et=n.dataToPoint([Z,F]);G=Et[0]}q=G,et=Pt[1]+_,At=Pt[0]-G,Dt=g,Math.abs(At)<v&&(At=(At<0?-1:1)*v)}else{var Pt=n.dataToPoint([F,V]);if(f){var Et=n.dataToPoint([F,Z]);G=Et[1]}q=Pt[0]+_,et=G,At=g,Dt=Pt[1]-G,Math.abs(Dt)<v&&(Dt=(Dt<=0?-1:1)*v)}p?(S[B]=q,S[B+1]=et,S[B+2]=h?At:Dt,k&&(k[B]=h?C.x:q,k[B+1]=h?et:C.y,k[B+2]=x),A[I]=I):w.setItemLayout(I,{x:q,y:et,width:At,height:Dt}),B+=3}p&&w.setLayout({largePoints:S,largeDataIndices:A,largeBackgroundPoints:k,valueAxisHorizontal:h})}}}}}}function fz(e){return e.coordinateSystem&&e.coordinateSystem.type==="cartesian2d"}function hz(e){return e.pipelineContext&&e.pipelineContext.large}function iot(e,t){return t.toGlobalCoord(t.dataToCoord(t.type==="log"?1:0))}var oot=function(e,t,r,n){for(;r<n;){var i=r+n>>>1;e[i][1]<t?r=i+1:n=i}return r},dz=function(e){St(t,e);function t(r){var n=e.call(this,r)||this;return n.type="time",n}return t.prototype.getLabel=function(r){var n=this.getSetting("useUTC");return u_(r.value,uM[_et(Xc(this._minLevelUnit))]||uM.second,n,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(r,n,i){var o=this.getSetting("useUTC"),s=this.getSetting("locale");return yet(r,n,i,s,o)},t.prototype.getTicks=function(){var r=this._interval,n=this._extent,i=[];if(!r)return i;i.push({value:n[0],level:0});var o=this.getSetting("useUTC"),s=hot(this._minLevelUnit,this._approxInterval,o,n);return i=i.concat(s),i.push({value:n[1],level:0}),i},t.prototype.calcNiceExtent=function(r){var n=this._extent;if(n[0]===n[1]&&(n[0]-=ri,n[1]+=ri),n[1]===-1/0&&n[0]===1/0){var i=new Date;n[1]=+new Date(i.getFullYear(),i.getMonth(),i.getDate()),n[0]=n[1]-ri}this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval)},t.prototype.calcNiceTicks=function(r,n,i){r=r||10;var o=this._extent,s=o[1]-o[0];this._approxInterval=s/r,n!=null&&this._approxInterval<n&&(this._approxInterval=n),i!=null&&this._approxInterval>i&&(this._approxInterval=i);var a=iv.length,l=Math.min(oot(iv,this._approxInterval,0,a),a-1);this._interval=iv[l][1],this._minLevelUnit=iv[Math.max(l-1,0)][0]},t.prototype.parse=function(r){return Se(r)?r:+ys(r)},t.prototype.contain=function(r){return w_(this.parse(r),this._extent)},t.prototype.normalize=function(r){return S_(this.parse(r),this._extent)},t.prototype.scale=function(r){return T_(r,this._extent)},t.type="time",t}(Xp),iv=[["second",pP],["minute",vP],["hour",Rd],["quarter-day",Rd*6],["half-day",Rd*12],["day",ri*1.2],["half-week",ri*3.5],["week",ri*7],["month",ri*31],["quarter",ri*95],["half-year",lM/2],["year",lM]];function sot(e,t,r,n){var i=ys(t),o=ys(r),s=function(p){return cM(i,p,n)===cM(o,p,n)},a=function(){return s("year")},l=function(){return a()&&s("month")},u=function(){return l()&&s("day")},c=function(){return u()&&s("hour")},f=function(){return c()&&s("minute")},h=function(){return f()&&s("second")},d=function(){return h()&&s("millisecond")};switch(e){case"year":return a();case"month":return l();case"day":return u();case"hour":return c();case"minute":return f();case"second":return h();case"millisecond":return d()}}function aot(e,t){return e/=ri,e>16?16:e>7.5?7:e>3.5?4:e>1.5?2:1}function lot(e){var t=30*ri;return e/=t,e>6?6:e>3?3:e>2?2:1}function uot(e){return e/=Rd,e>12?12:e>6?6:e>3.5?4:e>2?2:1}function b5(e,t){return e/=t?vP:pP,e>30?30:e>20?20:e>15?15:e>10?10:e>5?5:e>2?2:1}function cot(e){return b7(e,!0)}function fot(e,t,r){var n=new Date(e);switch(Xc(t)){case"year":case"month":n[AN(r)](0);case"day":n[MN(r)](1);case"hour":n[xN(r)](0);case"minute":n[LN(r)](0);case"second":n[IN(r)](0),n[ON(r)](0)}return n.getTime()}function hot(e,t,r,n){var i=1e4,o=EN,s=0;function a(x,I,N,B,V,F,G){for(var Z=new Date(I),q=I,et=Z[B]();q<N&&q<=n[1];)G.push({value:q}),et+=x,Z[V](et),q=Z.getTime();G.push({value:q,notAdd:!0})}function l(x,I,N){var B=[],V=!I.length;if(!sot(Xc(x),n[0],n[1],r)){V&&(I=[{value:fot(new Date(n[0]),x,r)},{value:n[1]}]);for(var F=0;F<I.length-1;F++){var G=I[F].value,Z=I[F+1].value;if(G!==Z){var q=void 0,et=void 0,At=void 0,Dt=!1;switch(x){case"year":q=Math.max(1,Math.round(t/ri/365)),et=gP(r),At=bet(r);break;case"half-year":case"quarter":case"month":q=lot(t),et=Yc(r),At=AN(r);break;case"week":case"half-week":case"day":q=aot(t),et=c_(r),At=MN(r),Dt=!0;break;case"half-day":case"quarter-day":case"hour":q=uot(t),et=hp(r),At=xN(r);break;case"minute":q=b5(t,!0),et=f_(r),At=LN(r);break;case"second":q=b5(t,!1),et=h_(r),At=IN(r);break;case"millisecond":q=cot(t),et=d_(r),At=ON(r);break}a(q,G,Z,et,At,Dt,B),x==="year"&&N.length>1&&F===0&&N.unshift({value:N[0].value-q})}}for(var F=0;F<B.length;F++)N.push(B[F]);return B}}for(var u=[],c=[],f=0,h=0,d=0;d<o.length&&s++<i;++d){var p=Xc(o[d]);if(!!met(o[d])){l(o[d],u[u.length-1]||[],c);var v=o[d+1]?Xc(o[d+1]):null;if(p!==v){if(c.length){h=f,c.sort(function(x,I){return x.value-I.value});for(var m=[],g=0;g<c.length;++g){var _=c[g].value;(g===0||c[g-1].value!==_)&&(m.push(c[g]),_>=n[0]&&_<=n[1]&&f++)}var b=(n[1]-n[0])/t;if(f>b*1.5&&h>b/1.5||(u.push(m),f>b||e===o[d]))break}c=[]}}}for(var w=Cr(Lt(u,function(x){return Cr(x,function(I){return I.value>=n[0]&&I.value<=n[1]&&!I.notAdd})}),function(x){return x.length>0}),T=[],S=w.length-1,d=0;d<w.length;++d)for(var k=w[d],A=0;A<k.length;++A)T.push({value:k[A].value,level:S-d});T.sort(function(x,I){return x.value-I.value});for(var C=[],d=0;d<T.length;++d)(d===0||T[d].value!==T[d-1].value)&&C.push(T[d]);return C}xs.registerClass(dz);const dot=dz;var w5=xs.prototype,zd=Xp.prototype,pot=Qe,vot=Math.floor,got=Math.ceil,ov=Math.pow,mi=Math.log,DP=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="log",r.base=10,r._originalScale=new Xp,r._interval=0,r}return t.prototype.getTicks=function(r){var n=this._originalScale,i=this._extent,o=n.getExtent(),s=zd.getTicks.call(this,r);return Lt(s,function(a){var l=a.value,u=Qe(ov(this.base,l));return u=l===i[0]&&this._fixMin?sv(u,o[0]):u,u=l===i[1]&&this._fixMax?sv(u,o[1]):u,{value:u}},this)},t.prototype.setExtent=function(r,n){var i=mi(this.base);r=mi(Math.max(0,r))/i,n=mi(Math.max(0,n))/i,zd.setExtent.call(this,r,n)},t.prototype.getExtent=function(){var r=this.base,n=w5.getExtent.call(this);n[0]=ov(r,n[0]),n[1]=ov(r,n[1]);var i=this._originalScale,o=i.getExtent();return this._fixMin&&(n[0]=sv(n[0],o[0])),this._fixMax&&(n[1]=sv(n[1],o[1])),n},t.prototype.unionExtent=function(r){this._originalScale.unionExtent(r);var n=this.base;r[0]=mi(r[0])/mi(n),r[1]=mi(r[1])/mi(n),w5.unionExtent.call(this,r)},t.prototype.unionExtentFromData=function(r,n){this.unionExtent(r.getApproximateExtent(n))},t.prototype.calcNiceTicks=function(r){r=r||10;var n=this._extent,i=n[1]-n[0];if(!(i===1/0||i<=0)){var o=yJ(i),s=r/i*o;for(s<=.5&&(o*=10);!isNaN(o)&&Math.abs(o)<1&&Math.abs(o)>0;)o*=10;var a=[Qe(got(n[0]/o)*o),Qe(vot(n[1]/o)*o)];this._interval=o,this._niceExtent=a}},t.prototype.calcNiceExtent=function(r){zd.calcNiceExtent.call(this,r),this._fixMin=r.fixMin,this._fixMax=r.fixMax},t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return r=mi(r)/mi(this.base),w_(r,this._extent)},t.prototype.normalize=function(r){return r=mi(r)/mi(this.base),S_(r,this._extent)},t.prototype.scale=function(r){return r=T_(r,this._extent),ov(this.base,r)},t.type="log",t}(xs),pz=DP.prototype;pz.getMinorTicks=zd.getMinorTicks;pz.getLabel=zd.getLabel;function sv(e,t){return pot(e,Eo(t))}xs.registerClass(DP);const mot=DP;var _ot=function(){function e(t,r,n){this._prepareParams(t,r,n)}return e.prototype._prepareParams=function(t,r,n){n[1]<n[0]&&(n=[NaN,NaN]),this._dataMin=n[0],this._dataMax=n[1];var i=this._isOrdinal=t.type==="ordinal";this._needCrossZero=t.type==="interval"&&r.getNeedCrossZero&&r.getNeedCrossZero();var o=this._modelMinRaw=r.get("min",!0);jt(o)?this._modelMinNum=av(t,o({min:n[0],max:n[1]})):o!=="dataMin"&&(this._modelMinNum=av(t,o));var s=this._modelMaxRaw=r.get("max",!0);if(jt(s)?this._modelMaxNum=av(t,s({min:n[0],max:n[1]})):s!=="dataMax"&&(this._modelMaxNum=av(t,s)),i)this._axisDataLen=r.getCategories().length;else{var a=r.get("boundaryGap"),l=ht(a)?a:[a||0,a||0];typeof l[0]=="boolean"||typeof l[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[ms(l[0],1),ms(l[1],1)]}},e.prototype.calculate=function(){var t=this._isOrdinal,r=this._dataMin,n=this._dataMax,i=this._axisDataLen,o=this._boundaryGapInner,s=t?null:n-r||Math.abs(r),a=this._modelMinRaw==="dataMin"?r:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?n:this._modelMaxNum,u=a!=null,c=l!=null;a==null&&(a=t?i?0:NaN:r-o[0]*s),l==null&&(l=t?i?i-1:NaN:n+o[1]*s),(a==null||!isFinite(a))&&(a=NaN),(l==null||!isFinite(l))&&(l=NaN);var f=Mm(a)||Mm(l)||t&&!i;this._needCrossZero&&(a>0&&l>0&&!u&&(a=0),a<0&&l<0&&!c&&(l=0));var h=this._determinedMin,d=this._determinedMax;return h!=null&&(a=h,u=!0),d!=null&&(l=d,c=!0),{min:a,max:l,minFixed:u,maxFixed:c,isBlank:f}},e.prototype.modifyDataMinMax=function(t,r){this[bot[t]]=r},e.prototype.setDeterminedMinMax=function(t,r){var n=yot[t];this[n]=r},e.prototype.freeze=function(){this.frozen=!0},e}(),yot={min:"_determinedMin",max:"_determinedMax"},bot={min:"_dataMin",max:"_dataMax"};function wot(e,t,r){var n=e.rawExtentInfo;return n||(n=new _ot(e,t,r),e.rawExtentInfo=n,n)}function av(e,t){return t==null?null:Mm(t)?NaN:e.parse(t)}function vz(e,t){var r=e.type,n=wot(e,t,e.getExtent()).calculate();e.setBlank(n.isBlank);var i=n.min,o=n.max,s=t.ecModel;if(s&&r==="time"){var a=lz("bar",s),l=!1;if(z(a,function(f){l=l||f.getBaseAxis()===t.axis}),l){var u=uz(a),c=Sot(i,o,t,u);i=c.min,o=c.max}}return{extent:[i,o],fixMin:n.minFixed,fixMax:n.maxFixed}}function Sot(e,t,r,n){var i=r.axis.getExtent(),o=i[1]-i[0],s=eot(n,r.axis);if(s===void 0)return{min:e,max:t};var a=1/0;z(s,function(d){a=Math.min(d.offset,a)});var l=-1/0;z(s,function(d){l=Math.max(d.offset+d.width,l)}),a=Math.abs(a),l=Math.abs(l);var u=a+l,c=t-e,f=1-(a+l)/o,h=c/f-c;return t+=h*(l/u),e-=h*(a/u),{min:e,max:t}}function S5(e,t){var r=t,n=vz(e,r),i=n.extent,o=r.get("splitNumber");e instanceof mot&&(e.base=r.get("logBase"));var s=e.type,a=r.get("interval"),l=s==="interval"||s==="time";e.setExtent(i[0],i[1]),e.calcNiceExtent({splitNumber:o,fixMin:n.fixMin,fixMax:n.fixMax,minInterval:l?r.get("minInterval"):null,maxInterval:l?r.get("maxInterval"):null}),a!=null&&e.setInterval&&e.setInterval(a)}function Tot(e,t){if(t=t||e.get("type"),t)switch(t){case"category":return new oz({ordinalMeta:e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),extent:[1/0,-1/0]});case"time":return new dot({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new(xs.getClass(t)||Xp)}}function kot(e){var t=e.scale.getExtent(),r=t[0],n=t[1];return!(r>0&&n>0||r<0&&n<0)}function Yp(e){var t=e.getLabelModel().get("formatter"),r=e.type==="category"?e.scale.getExtent()[0]:null;return e.scale.type==="time"?function(n){return function(i,o){return e.scale.getFormattedLabel(i,o,n)}}(t):Mt(t)?function(n){return function(i){var o=e.scale.getLabel(i),s=n.replace("{value}",o!=null?o:"");return s}}(t):jt(t)?function(n){return function(i,o){return r!=null&&(o=i.value-r),n(NP(e,i),o,i.level!=null?{level:i.level}:null)}}(t):function(n){return e.scale.getLabel(n)}}function NP(e,t){return e.type==="category"?e.scale.getLabel(t):t.value}function Pot(e){var t=e.model,r=e.scale;if(!(!t.get(["axisLabel","show"])||r.isBlank())){var n,i,o=r.getExtent();r instanceof oz?i=r.count():(n=r.getTicks(),i=n.length);var s=e.getLabelModel(),a=Yp(e),l,u=1;i>40&&(u=Math.ceil(i/40));for(var c=0;c<i;c+=u){var f=n?n[c]:{value:o[0]+c},h=a(f,c),d=s.getTextRect(h),p=Eot(d,s.get("rotate")||0);l?l.union(p):l=p}return l}}function Eot(e,t){var r=t*Math.PI/180,n=e.width,i=e.height,o=n*Math.abs(Math.cos(r))+Math.abs(i*Math.sin(r)),s=n*Math.abs(Math.sin(r))+Math.abs(i*Math.cos(r)),a=new ue(e.x,e.y,o,s);return a}function FP(e){var t=e.get("interval");return t==null?"auto":t}function gz(e){return e.type==="category"&&FP(e.getLabelModel())===0}function Cot(e,t){var r={};return z(e.mapDimensionsAll(t),function(n){r[ez(e,n)]=!0}),ge(r)}var Aot=function(){function e(){}return e.prototype.getNeedCrossZero=function(){var t=this.option;return!t.scale},e.prototype.getCoordSysModel=function(){},e}(),T5=[],Mot={registerPreprocessor:GF,registerProcessor:HF,registerPostInit:git,registerPostUpdate:mit,registerUpdateLifecycle:LP,registerAction:Pu,registerCoordinateSystem:_it,registerLayout:yit,registerVisual:Eu,registerTransform:wit,registerLoading:XF,registerMap:bit,registerImpl:qnt,PRIORITY:uit,ComponentModel:Me,ComponentView:ci,SeriesModel:Ro,ChartView:oi,registerComponentModel:function(e){Me.registerClass(e)},registerComponentView:function(e){ci.registerClass(e)},registerSeriesModel:function(e){Ro.registerClass(e)},registerChartView:function(e){oi.registerClass(e)},registerSubTypeDefaulter:function(e,t){Me.registerSubTypeDefaulter(e,t)},registerPainter:function(e,t){dJ(e,t)}};function yr(e){if(ht(e)){z(e,function(t){yr(t)});return}he(T5,e)>=0||(T5.push(e),jt(e)&&(e={install:e}),e.install(Mot))}var mp=Re();function xot(e){return e.type==="category"?Iot(e):Rot(e)}function Lot(e,t){return e.type==="category"?Oot(e,t):{ticks:Lt(e.scale.getTicks(),function(r){return r.value})}}function Iot(e){var t=e.getLabelModel(),r=mz(e,t);return!t.get("show")||e.scale.isBlank()?{labels:[],labelCategoryInterval:r.labelCategoryInterval}:r}function mz(e,t){var r=_z(e,"labels"),n=FP(t),i=yz(r,n);if(i)return i;var o,s;return jt(n)?o=Sz(e,n):(s=n==="auto"?Dot(e):n,o=wz(e,s)),bz(r,n,{labels:o,labelCategoryInterval:s})}function Oot(e,t){var r=_z(e,"ticks"),n=FP(t),i=yz(r,n);if(i)return i;var o,s;if((!t.get("show")||e.scale.isBlank())&&(o=[]),jt(n))o=Sz(e,n,!0);else if(n==="auto"){var a=mz(e,e.getLabelModel());s=a.labelCategoryInterval,o=Lt(a.labels,function(l){return l.tickValue})}else s=n,o=wz(e,s,!0);return bz(r,n,{ticks:o,tickCategoryInterval:s})}function Rot(e){var t=e.scale.getTicks(),r=Yp(e);return{labels:Lt(t,function(n,i){return{level:n.level,formattedLabel:r(n,i),rawLabel:e.scale.getLabel(n),tickValue:n.value}})}}function _z(e,t){return mp(e)[t]||(mp(e)[t]=[])}function yz(e,t){for(var r=0;r<e.length;r++)if(e[r].key===t)return e[r].value}function bz(e,t,r){return e.push({key:t,value:r}),r}function Dot(e){var t=mp(e).autoInterval;return t!=null?t:mp(e).autoInterval=e.calculateCategoryInterval()}function Not(e){var t=Fot(e),r=Yp(e),n=(t.axisRotate-t.labelRotate)/180*Math.PI,i=e.scale,o=i.getExtent(),s=i.count();if(o[1]-o[0]<1)return 0;var a=1;s>40&&(a=Math.max(1,Math.floor(s/40)));for(var l=o[0],u=e.dataToCoord(l+1)-e.dataToCoord(l),c=Math.abs(u*Math.cos(n)),f=Math.abs(u*Math.sin(n)),h=0,d=0;l<=o[1];l+=a){var p=0,v=0,m=Gk(r({value:l}),t.font,"center","top");p=m.width*1.3,v=m.height*1.3,h=Math.max(h,p,7),d=Math.max(d,v,7)}var g=h/c,_=d/f;isNaN(g)&&(g=1/0),isNaN(_)&&(_=1/0);var b=Math.max(0,Math.floor(Math.min(g,_))),w=mp(e.model),T=e.getExtent(),S=w.lastAutoInterval,k=w.lastTickCount;return S!=null&&k!=null&&Math.abs(S-b)<=1&&Math.abs(k-s)<=1&&S>b&&w.axisExtent0===T[0]&&w.axisExtent1===T[1]?b=S:(w.lastTickCount=s,w.lastAutoInterval=b,w.axisExtent0=T[0],w.axisExtent1=T[1]),b}function Fot(e){var t=e.getLabelModel();return{axisRotate:e.getRotate?e.getRotate():e.isHorizontal&&!e.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}function wz(e,t,r){var n=Yp(e),i=e.scale,o=i.getExtent(),s=e.getLabelModel(),a=[],l=Math.max((t||0)+1,1),u=o[0],c=i.count();u!==0&&l>1&&c/l>2&&(u=Math.round(Math.ceil(u/l)*l));var f=gz(e),h=s.get("showMinLabel")||f,d=s.get("showMaxLabel")||f;h&&u!==o[0]&&v(o[0]);for(var p=u;p<=o[1];p+=l)v(p);d&&p-l!==o[1]&&v(o[1]);function v(m){var g={value:m};a.push(r?m:{formattedLabel:n(g),rawLabel:i.getLabel(g),tickValue:m})}return a}function Sz(e,t,r){var n=e.scale,i=Yp(e),o=[];return z(n.getTicks(),function(s){var a=n.getLabel(s),l=s.value;t(s.value,a)&&o.push(r?l:{formattedLabel:i(s),rawLabel:a,tickValue:l})}),o}var k5=[0,1],zot=function(){function e(t,r,n){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=r,this._extent=n||[0,0]}return e.prototype.contain=function(t){var r=this._extent,n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return t>=n&&t<=i},e.prototype.containData=function(t){return this.scale.contain(t)},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.getPixelPrecision=function(t){return gJ(t||this.scale.getExtent(),this._extent)},e.prototype.setExtent=function(t,r){var n=this._extent;n[0]=t,n[1]=r},e.prototype.dataToCoord=function(t,r){var n=this._extent,i=this.scale;return t=i.normalize(t),this.onBand&&i.type==="ordinal"&&(n=n.slice(),P5(n,i.count())),_s(t,k5,n,r)},e.prototype.coordToData=function(t,r){var n=this._extent,i=this.scale;this.onBand&&i.type==="ordinal"&&(n=n.slice(),P5(n,i.count()));var o=_s(t,n,k5,r);return this.scale.scale(o)},e.prototype.pointToData=function(t,r){},e.prototype.getTicksCoords=function(t){t=t||{};var r=t.tickModel||this.getTickModel(),n=Lot(this,r),i=n.ticks,o=Lt(i,function(a){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(a):a),tickValue:a}},this),s=r.get("alignWithLabel");return Bot(this,o,s,t.clamp),o},e.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var t=this.model.getModel("minorTick"),r=t.get("splitNumber");r>0&&r<100||(r=5);var n=this.scale.getMinorTicks(r),i=Lt(n,function(o){return Lt(o,function(s){return{coord:this.dataToCoord(s),tickValue:s}},this)},this);return i},e.prototype.getViewLabels=function(){return xot(this).labels},e.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},e.prototype.getTickModel=function(){return this.model.getModel("axisTick")},e.prototype.getBandWidth=function(){var t=this._extent,r=this.scale.getExtent(),n=r[1]-r[0]+(this.onBand?1:0);n===0&&(n=1);var i=Math.abs(t[1]-t[0]);return Math.abs(i)/n},e.prototype.calculateCategoryInterval=function(){return Not(this)},e}();function P5(e,t){var r=e[1]-e[0],n=t,i=r/n/2;e[0]+=i,e[1]-=i}function Bot(e,t,r,n){var i=t.length;if(!e.onBand||r||!i)return;var o=e.getExtent(),s,a;if(i===1)t[0].coord=o[0],s=t[1]={coord:o[0]};else{var l=t[i-1].tickValue-t[0].tickValue,u=(t[i-1].coord-t[0].coord)/l;z(t,function(d){d.coord-=u/2});var c=e.scale.getExtent();a=1+c[1]-t[i-1].tickValue,s={coord:t[i-1].coord+u*a},t.push(s)}var f=o[0]>o[1];h(t[0].coord,o[0])&&(n?t[0].coord=o[0]:t.shift()),n&&h(o[0],t[0].coord)&&t.unshift({coord:o[0]}),h(o[1],s.coord)&&(n?s.coord=o[1]:t.pop()),n&&h(s.coord,o[1])&&t.push({coord:o[1]});function h(d,p){return d=Qe(d),p=Qe(p),f?d>p:d<p}}const $ot=zot;function Vot(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(!n.defaultAttr.ignore){var i=n.label,o=i.getComputedTransform(),s=i.getBoundingRect(),a=!o||o[1]<1e-5&&o[2]<1e-5,l=i.style.margin||0,u=s.clone();u.applyTransform(o),u.x-=l/2,u.y-=l/2,u.width+=l,u.height+=l;var c=a?new $m(s,o):null;t.push({label:i,labelLine:n.labelLine,rect:u,localRect:s,obb:c,priority:n.priority,defaultAttr:n.defaultAttr,layoutOption:n.computedLayoutOption,axisAligned:a,transform:o})}}return t}function Uot(e){var t=[];e.sort(function(v,m){return m.priority-v.priority});var r=new ue(0,0,0,0);function n(v){if(!v.ignore){var m=v.ensureState("emphasis");m.ignore==null&&(m.ignore=!1)}v.ignore=!0}for(var i=0;i<e.length;i++){var o=e[i],s=o.axisAligned,a=o.localRect,l=o.transform,u=o.label,c=o.labelLine;r.copy(o.rect),r.width-=.1,r.height-=.1,r.x+=.05,r.y+=.05;for(var f=o.obb,h=!1,d=0;d<t.length;d++){var p=t[d];if(!!r.intersect(p.rect)){if(s&&p.axisAligned){h=!0;break}if(p.obb||(p.obb=new $m(p.localRect,p.transform)),f||(f=new $m(a,l)),f.intersect(p.obb)){h=!0;break}}}h?(n(u),c&&n(c)):(u.attr("ignore",o.defaultAttr.ignore),c&&c.attr("ignore",o.defaultAttr.labelGuideIgnore),t.push(o))}}function E5(e,t,r){var n=bu.createCanvas(),i=t.getWidth(),o=t.getHeight(),s=n.style;return s&&(s.position="absolute",s.left="0",s.top="0",s.width=i+"px",s.height=o+"px",n.setAttribute("data-zr-dom-id",e)),n.width=i*r,n.height=o*r,n}var Wot=function(e){Ce(t,e);function t(r,n,i){var o=e.call(this)||this;o.motionBlur=!1,o.lastFrameAlpha=.7,o.dpr=1,o.virtual=!1,o.config={},o.incremental=!1,o.zlevel=0,o.maxRepaintRectCount=5,o.__dirty=!0,o.__firstTimePaint=!0,o.__used=!1,o.__drawIndex=0,o.__startIndex=0,o.__endIndex=0,o.__prevStartIndex=null,o.__prevEndIndex=null;var s;i=i||Nm,typeof r=="string"?s=E5(r,n,i):Rt(r)&&(s=r,r=s.id),o.id=r,o.dom=s;var a=s.style;return a&&(Y9(s),s.onselectstart=function(){return!1},a.padding="0",a.margin="0",a.borderWidth="0"),o.painter=n,o.dpr=i,o}return t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var r=this.dpr;this.domBack=E5("back-"+this.id,this.painter,r),this.ctxBack=this.domBack.getContext("2d"),r!==1&&this.ctxBack.scale(r,r)},t.prototype.createRepaintRects=function(r,n,i,o){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var s=[],a=this.maxRepaintRectCount,l=!1,u=new ue(0,0,0,0);function c(_){if(!(!_.isFinite()||_.isZero()))if(s.length===0){var b=new ue(0,0,0,0);b.copy(_),s.push(b)}else{for(var w=!1,T=1/0,S=0,k=0;k<s.length;++k){var A=s[k];if(A.intersect(_)){var C=new ue(0,0,0,0);C.copy(A),C.union(_),s[k]=C,w=!0;break}else if(l){u.copy(_),u.union(A);var x=_.width*_.height,I=A.width*A.height,N=u.width*u.height,B=N-x-I;B<T&&(T=B,S=k)}}if(l&&(s[S].union(_),w=!0),!w){var b=new ue(0,0,0,0);b.copy(_),s.push(b)}l||(l=s.length>=a)}}for(var f=this.__startIndex;f<this.__endIndex;++f){var h=r[f];if(h){var d=h.shouldBePainted(i,o,!0,!0),p=h.__isRendered&&(h.__dirty&Ln||!d)?h.getPrevPaintRect():null;p&&c(p);var v=d&&(h.__dirty&Ln||!h.__isRendered)?h.getPaintRect():null;v&&c(v)}}for(var f=this.__prevStartIndex;f<this.__prevEndIndex;++f){var h=n[f],d=h.shouldBePainted(i,o,!0,!0);if(h&&(!d||!h.__zr)&&h.__isRendered){var p=h.getPrevPaintRect();p&&c(p)}}var m;do{m=!1;for(var f=0;f<s.length;){if(s[f].isZero()){s.splice(f,1);continue}for(var g=f+1;g<s.length;)s[f].intersect(s[g])?(m=!0,s[f].union(s[g]),s.splice(g,1)):g++;f++}}while(m);return this._paintRects=s,s},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(r,n){var i=this.dpr,o=this.dom,s=o.style,a=this.domBack;s&&(s.width=r+"px",s.height=n+"px"),o.width=r*i,o.height=n*i,a&&(a.width=r*i,a.height=n*i,i!==1&&this.ctxBack.scale(i,i))},t.prototype.clear=function(r,n,i){var o=this.dom,s=this.ctx,a=o.width,l=o.height;n=n||this.clearColor;var u=this.motionBlur&&!r,c=this.lastFrameAlpha,f=this.dpr,h=this;u&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(o,0,0,a/f,l/f));var d=this.domBack;function p(v,m,g,_){if(s.clearRect(v,m,g,_),n&&n!=="transparent"){var b=void 0;q1(n)?(b=n.__canvasGradient||_3(s,n,{x:0,y:0,width:g,height:_}),n.__canvasGradient=b):BZ(n)&&(n.scaleX=n.scaleX||f,n.scaleY=n.scaleY||f,b=y3(s,n,{dirty:function(){h.setUnpainted(),h.__painter.refresh()}})),s.save(),s.fillStyle=b||n,s.fillRect(v,m,g,_),s.restore()}u&&(s.save(),s.globalAlpha=c,s.drawImage(d,v,m,g,_),s.restore())}!i||u?p(0,0,a,l):i.length&&z(i,function(v){p(v.x*f,v.y*f,v.width*f,v.height*f)})},t}(Hi);const F2=Wot;var C5=1e5,Tl=314159,lv=.01,jot=.001;function Got(e){return e?e.__builtin__?!0:!(typeof e.resize!="function"||typeof e.refresh!="function"):!1}function Hot(e,t){var r=document.createElement("div");return r.style.cssText=["position:relative","width:"+e+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",r}var Xot=function(){function e(t,r,n,i){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var o=!t.nodeName||t.nodeName.toUpperCase()==="CANVAS";this._opts=n=at({},n||{}),this.dpr=n.devicePixelRatio||Nm,this._singleCanvas=o,this.root=t;var s=t.style;s&&(Y9(t),t.innerHTML=""),this.storage=r;var a=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(o){var c=t,f=c.width,h=c.height;n.width!=null&&(f=n.width),n.height!=null&&(h=n.height),this.dpr=n.devicePixelRatio||1,c.width=f*this.dpr,c.height=h*this.dpr,this._width=f,this._height=h;var d=new F2(c,this,this.dpr);d.__builtin__=!0,d.initContext(),l[Tl]=d,d.zlevel=Tl,a.push(Tl),this._domRoot=t}else{this._width=Q0(t,0,n),this._height=Q0(t,1,n);var u=this._domRoot=Hot(this._width,this._height);t.appendChild(u)}}return e.prototype.getType=function(){return"canvas"},e.prototype.isSingleCanvas=function(){return this._singleCanvas},e.prototype.getViewportRoot=function(){return this._domRoot},e.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},e.prototype.refresh=function(t){var r=this.storage.getDisplayList(!0),n=this._prevDisplayList,i=this._zlevelList;this._redrawId=Math.random(),this._paintList(r,n,t,this._redrawId);for(var o=0;o<i.length;o++){var s=i[o],a=this._layers[s];if(!a.__builtin__&&a.refresh){var l=o===0?this._backgroundColor:null;a.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=r.slice()),this},e.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},e.prototype._paintHoverList=function(t){var r=t.length,n=this._hoverlayer;if(n&&n.clear(),!!r){for(var i={inHover:!0,viewWidth:this._width,viewHeight:this._height},o,s=0;s<r;s++){var a=t[s];a.__inHover&&(n||(n=this._hoverlayer=this.getLayer(C5)),o||(o=n.ctx,o.save()),Vl(o,a,i,s===r-1))}o&&o.restore()}},e.prototype.getHoverLayer=function(){return this.getLayer(C5)},e.prototype.paintOne=function(t,r){AF(t,r)},e.prototype._paintList=function(t,r,n,i){if(this._redrawId===i){n=n||!1,this._updateLayerStatus(t);var o=this._doPaintList(t,r,n),s=o.finished,a=o.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),a&&this._paintHoverList(t),s)this.eachLayer(function(u){u.afterBrush&&u.afterBrush()});else{var l=this;FS(function(){l._paintList(t,r,n,i)})}}},e.prototype._compositeManually=function(){var t=this.getLayer(Tl).ctx,r=this._domRoot.width,n=this._domRoot.height;t.clearRect(0,0,r,n),this.eachBuiltinLayer(function(i){i.virtual&&t.drawImage(i.dom,0,0,r,n)})},e.prototype._doPaintList=function(t,r,n){for(var i=this,o=[],s=this._opts.useDirtyRect,a=0;a<this._zlevelList.length;a++){var l=this._zlevelList[a],u=this._layers[l];u.__builtin__&&u!==this._hoverlayer&&(u.__dirty||n)&&o.push(u)}for(var c=!0,f=!1,h=function(v){var m=o[v],g=m.ctx,_=s&&m.createRepaintRects(t,r,d._width,d._height),b=n?m.__startIndex:m.__drawIndex,w=!n&&m.incremental&&Date.now,T=w&&Date.now(),S=m.zlevel===d._zlevelList[0]?d._backgroundColor:null;if(m.__startIndex===m.__endIndex)m.clear(!1,S,_);else if(b===m.__startIndex){var k=t[b];(!k.incremental||!k.notClear||n)&&m.clear(!1,S,_)}b===-1&&(console.error("For some unknown reason. drawIndex is -1"),b=m.__startIndex);var A,C=function(B){var V={inHover:!1,allClipped:!1,prevEl:null,viewWidth:i._width,viewHeight:i._height};for(A=b;A<m.__endIndex;A++){var F=t[A];if(F.__inHover&&(f=!0),i._doPaintEl(F,m,s,B,V,A===m.__endIndex-1),w){var G=Date.now()-T;if(G>15)break}}V.prevElClipPaths&&g.restore()};if(_)if(_.length===0)A=m.__endIndex;else for(var x=d.dpr,I=0;I<_.length;++I){var N=_[I];g.save(),g.beginPath(),g.rect(N.x*x,N.y*x,N.width*x,N.height*x),g.clip(),C(N),g.restore()}else g.save(),C(),g.restore();m.__drawIndex=A,m.__drawIndex<m.__endIndex&&(c=!1)},d=this,p=0;p<o.length;p++)h(p);return Zt.wxa&&z(this._layers,function(v){v&&v.ctx&&v.ctx.draw&&v.ctx.draw()}),{finished:c,needsRefreshHover:f}},e.prototype._doPaintEl=function(t,r,n,i,o,s){var a=r.ctx;if(n){var l=t.getPaintRect();(!i||l&&l.intersect(i))&&(Vl(a,t,o,s),t.setPrevPaintRect(l))}else Vl(a,t,o,s)},e.prototype.getLayer=function(t,r){this._singleCanvas&&!this._needsManuallyCompositing&&(t=Tl);var n=this._layers[t];return n||(n=new F2("zr_"+t,this,this.dpr),n.zlevel=t,n.__builtin__=!0,this._layerConfig[t]?le(n,this._layerConfig[t],!0):this._layerConfig[t-lv]&&le(n,this._layerConfig[t-lv],!0),r&&(n.virtual=r),this.insertLayer(t,n),n.initContext()),n},e.prototype.insertLayer=function(t,r){var n=this._layers,i=this._zlevelList,o=i.length,s=this._domRoot,a=null,l=-1;if(!n[t]&&!!Got(r)){if(o>0&&t>i[0]){for(l=0;l<o-1&&!(i[l]<t&&i[l+1]>t);l++);a=n[i[l]]}if(i.splice(l+1,0,t),n[t]=r,!r.virtual)if(a){var u=a.dom;u.nextSibling?s.insertBefore(r.dom,u.nextSibling):s.appendChild(r.dom)}else s.firstChild?s.insertBefore(r.dom,s.firstChild):s.appendChild(r.dom);r.__painter=this}},e.prototype.eachLayer=function(t,r){for(var n=this._zlevelList,i=0;i<n.length;i++){var o=n[i];t.call(r,this._layers[o],o)}},e.prototype.eachBuiltinLayer=function(t,r){for(var n=this._zlevelList,i=0;i<n.length;i++){var o=n[i],s=this._layers[o];s.__builtin__&&t.call(r,s,o)}},e.prototype.eachOtherLayer=function(t,r){for(var n=this._zlevelList,i=0;i<n.length;i++){var o=n[i],s=this._layers[o];s.__builtin__||t.call(r,s,o)}},e.prototype.getLayers=function(){return this._layers},e.prototype._updateLayerStatus=function(t){this.eachBuiltinLayer(function(f,h){f.__dirty=f.__used=!1});function r(f){o&&(o.__endIndex!==f&&(o.__dirty=!0),o.__endIndex=f)}if(this._singleCanvas)for(var n=1;n<t.length;n++){var i=t[n];if(i.zlevel!==t[n-1].zlevel||i.incremental){this._needsManuallyCompositing=!0;break}}var o=null,s=0,a,l;for(l=0;l<t.length;l++){var i=t[l],u=i.zlevel,c=void 0;a!==u&&(a=u,s=0),i.incremental?(c=this.getLayer(u+jot,this._needsManuallyCompositing),c.incremental=!0,s=1):c=this.getLayer(u+(s>0?lv:0),this._needsManuallyCompositing),c.__builtin__||zk("ZLevel "+u+" has been used by unkown layer "+c.id),c!==o&&(c.__used=!0,c.__startIndex!==l&&(c.__dirty=!0),c.__startIndex=l,c.incremental?c.__drawIndex=-1:c.__drawIndex=l,r(l),o=c),i.__dirty&Ln&&!i.__inHover&&(c.__dirty=!0,c.incremental&&c.__drawIndex<0&&(c.__drawIndex=l))}r(l),this.eachBuiltinLayer(function(f,h){!f.__used&&f.getElementCount()>0&&(f.__dirty=!0,f.__startIndex=f.__endIndex=f.__drawIndex=0),f.__dirty&&f.__drawIndex<0&&(f.__drawIndex=f.__startIndex)})},e.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},e.prototype._clearLayer=function(t){t.clear()},e.prototype.setBackgroundColor=function(t){this._backgroundColor=t,z(this._layers,function(r){r.setUnpainted()})},e.prototype.configLayer=function(t,r){if(r){var n=this._layerConfig;n[t]?le(n[t],r,!0):n[t]=r;for(var i=0;i<this._zlevelList.length;i++){var o=this._zlevelList[i];if(o===t||o===t+lv){var s=this._layers[o];le(s,n[t],!0)}}}},e.prototype.delLayer=function(t){var r=this._layers,n=this._zlevelList,i=r[t];!i||(i.dom.parentNode.removeChild(i.dom),delete r[t],n.splice(he(n,t),1))},e.prototype.resize=function(t,r){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var i=this._opts,o=this.root;if(t!=null&&(i.width=t),r!=null&&(i.height=r),t=Q0(o,0,i),r=Q0(o,1,i),n.style.display="",this._width!==t||r!==this._height){n.style.width=t+"px",n.style.height=r+"px";for(var s in this._layers)this._layers.hasOwnProperty(s)&&this._layers[s].resize(t,r);this.refresh(!0)}this._width=t,this._height=r}else{if(t==null||r==null)return;this._width=t,this._height=r,this.getLayer(Tl).resize(t,r)}return this},e.prototype.clearLayer=function(t){var r=this._layers[t];r&&r.clear()},e.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},e.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[Tl].dom;var r=new F2("image",this,t.pixelRatio||this.dpr);r.initContext(),r.clear(!1,t.backgroundColor||this._backgroundColor);var n=r.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var i=r.dom.width,o=r.dom.height;this.eachLayer(function(f){f.__builtin__?n.drawImage(f.dom,0,0,i,o):f.renderToCanvas&&(n.save(),f.renderToCanvas(n),n.restore())})}else for(var s={inHover:!1,viewWidth:this._width,viewHeight:this._height},a=this.storage.getDisplayList(!0),l=0,u=a.length;l<u;l++){var c=a[l];Vl(n,c,s,l===u-1)}return r.dom},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e}();const Yot=Xot;function Ba(e){e.registerPainter("canvas",Yot)}var qot=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r){return Hp(null,this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(r){var n=new Ne,i=Ui("line",0,r.itemHeight/2,r.itemWidth,0,r.lineStyle.stroke,!1);n.add(i),i.setStyle(r.lineStyle);var o=this.getData().getVisual("symbol"),s=this.getData().getVisual("symbolRotate"),a=o==="none"?"circle":o,l=r.itemHeight*.8,u=Ui(a,(r.itemWidth-l)/2,(r.itemHeight-l)/2,l,l,r.itemStyle.fill);n.add(u),u.setStyle(r.itemStyle);var c=r.iconRotate==="inherit"?s:r.iconRotate||0;return u.rotation=c*Math.PI/180,u.setOrigin([r.itemWidth/2,r.itemHeight/2]),a.indexOf("empty")>-1&&(u.style.stroke=u.style.fill,u.style.fill="#fff",u.style.lineWidth=2),n},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},t}(Ro);const Zot=qot;function _p(e,t){var r=e.mapDimensionsAll("defaultedLabel"),n=r.length;if(n===1){var i=uf(e,t,r[0]);return i!=null?i+"":null}else if(n){for(var o=[],s=0;s<r.length;s++)o.push(uf(e,t,r[s]));return o.join(" ")}}function Tz(e,t){var r=e.mapDimensionsAll("defaultedLabel");if(!ht(t))return t+"";for(var n=[],i=0;i<r.length;i++){var o=e.getDimensionIndex(r[i]);o>=0&&n.push(t[o])}return n.join(" ")}var Kot=function(e){St(t,e);function t(r,n,i,o){var s=e.call(this)||this;return s.updateData(r,n,i,o),s}return t.prototype._createSymbol=function(r,n,i,o,s){this.removeAll();var a=Ui(r,-1,-1,2,2,null,s);a.attr({z2:100,culling:!0,scaleX:o[0]/2,scaleY:o[1]/2}),a.drift=Jot,this._symbolType=r,this.add(a)},t.prototype.stopSymbolAnimation=function(r){this.childAt(0).stopAnimation(null,r)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){sp(this.childAt(0))},t.prototype.downplay=function(){ap(this.childAt(0))},t.prototype.setZ=function(r,n){var i=this.childAt(0);i.zlevel=r,i.z=n},t.prototype.setDraggable=function(r,n){var i=this.childAt(0);i.draggable=r,i.cursor=!n&&r?"move":i.cursor},t.prototype.updateData=function(r,n,i,o){this.silent=!1;var s=r.getItemVisual(n,"symbol")||"circle",a=r.hostModel,l=t.getSymbolSize(r,n),u=s!==this._symbolType,c=o&&o.disableAnimation;if(u){var f=r.getItemVisual(n,"symbolKeepAspect");this._createSymbol(s,r,n,l,f)}else{var h=this.childAt(0);h.silent=!1;var d={scaleX:l[0]/2,scaleY:l[1]/2};c?h.attr(d):_r(h,d,a,n),dN(h)}if(this._updateCommon(r,n,l,i,o),u){var h=this.childAt(0);if(!c){var d={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:h.style.opacity}};h.scaleX=h.scaleY=0,h.style.opacity=0,Oo(h,d,a,n)}}c&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(r,n,i,o,s){var a=this.childAt(0),l=r.hostModel,u,c,f,h,d,p,v,m,g;if(o&&(u=o.emphasisItemStyle,c=o.blurItemStyle,f=o.selectItemStyle,h=o.focus,d=o.blurScope,v=o.labelStatesModels,m=o.hoverScale,g=o.cursorStyle,p=o.emphasisDisabled),!o||r.hasItemOption){var _=o&&o.itemModel?o.itemModel:r.getItemModel(n),b=_.getModel("emphasis");u=b.getModel("itemStyle").getItemStyle(),f=_.getModel(["select","itemStyle"]).getItemStyle(),c=_.getModel(["blur","itemStyle"]).getItemStyle(),h=b.get("focus"),d=b.get("blurScope"),p=b.get("disabled"),v=Tu(_),m=b.getShallow("scale"),g=_.getShallow("cursor")}var w=r.getItemVisual(n,"symbolRotate");a.attr("rotation",(w||0)*Math.PI/180||0);var T=CP(r.getItemVisual(n,"symbolOffset"),i);T&&(a.x=T[0],a.y=T[1]),g&&a.attr("cursor",g);var S=r.getItemVisual(n,"style"),k=S.fill;if(a instanceof Cs){var A=a.style;a.useStyle(at({image:A.image,x:A.x,y:A.y,width:A.width,height:A.height},S))}else a.__isEmptyBrush?a.useStyle(at({},S)):a.useStyle(S),a.style.decal=null,a.setColor(k,s&&s.symbolInnerColor),a.style.strokeNoScale=!0;var C=r.getItemVisual(n,"liftZ"),x=this._z2;C!=null?x==null&&(this._z2=a.z2,a.z2+=C):x!=null&&(a.z2=x,this._z2=null);var I=s&&s.useNameLabel;Cf(a,v,{labelFetcher:l,labelDataIndex:n,defaultText:N,inheritColor:k,defaultOpacity:S.opacity});function N(F){return I?r.getName(F):_p(r,F)}this._sizeX=i[0]/2,this._sizeY=i[1]/2;var B=a.ensureState("emphasis");B.style=u,a.ensureState("select").style=f,a.ensureState("blur").style=c;var V=m==null||m===!0?Math.max(1.1,3/this._sizeY):isFinite(m)&&m>0?+m:1;B.scaleX=this._sizeX*V,B.scaleY=this._sizeY*V,this.setSymbolScale(1),uu(this,h,d,p)},t.prototype.setSymbolScale=function(r){this.scaleX=this.scaleY=r},t.prototype.fadeOut=function(r,n,i){var o=this.childAt(0),s=ae(this).dataIndex,a=i&&i.animation;if(this.silent=o.silent=!0,i&&i.fadeLabel){var l=o.getTextContent();l&&cu(l,{style:{opacity:0}},n,{dataIndex:s,removeOpt:a,cb:function(){o.removeTextContent()}})}else o.removeTextContent();cu(o,{style:{opacity:0},scaleX:0,scaleY:0},n,{dataIndex:s,cb:r,removeOpt:a})},t.getSymbolSize=function(r,n){return kF(r.getItemVisual(n,"symbolSize"))},t}(Ne);function Jot(e,t){this.parent.drift(e,t)}const k_=Kot;function z2(e,t,r,n){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(n.isIgnore&&n.isIgnore(r))&&!(n.clipShape&&!n.clipShape.contain(t[0],t[1]))&&e.getItemVisual(r,"symbol")!=="none"}function A5(e){return e!=null&&!Rt(e)&&(e={isIgnore:e}),e||{}}function M5(e){var t=e.hostModel,r=t.getModel("emphasis");return{emphasisItemStyle:r.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:r.get("focus"),blurScope:r.get("blurScope"),emphasisDisabled:r.get("disabled"),hoverScale:r.get("scale"),labelStatesModels:Tu(t),cursorStyle:t.get("cursor")}}var Qot=function(){function e(t){this.group=new Ne,this._SymbolCtor=t||k_}return e.prototype.updateData=function(t,r){this._progressiveEls=null,r=A5(r);var n=this.group,i=t.hostModel,o=this._data,s=this._SymbolCtor,a=r.disableAnimation,l=M5(t),u={disableAnimation:a},c=r.getSymbolPoint||function(f){return t.getItemLayout(f)};o||n.removeAll(),t.diff(o).add(function(f){var h=c(f);if(z2(t,h,f,r)){var d=new s(t,f,l,u);d.setPosition(h),t.setItemGraphicEl(f,d),n.add(d)}}).update(function(f,h){var d=o.getItemGraphicEl(h),p=c(f);if(!z2(t,p,f,r)){n.remove(d);return}var v=t.getItemVisual(f,"symbol")||"circle",m=d&&d.getSymbolType&&d.getSymbolType();if(!d||m&&m!==v)n.remove(d),d=new s(t,f,l,u),d.setPosition(p);else{d.updateData(t,f,l,u);var g={x:p[0],y:p[1]};a?d.attr(g):_r(d,g,i)}n.add(d),t.setItemGraphicEl(f,d)}).remove(function(f){var h=o.getItemGraphicEl(f);h&&h.fadeOut(function(){n.remove(h)},i)}).execute(),this._getSymbolPoint=c,this._data=t},e.prototype.updateLayout=function(){var t=this,r=this._data;r&&r.eachItemGraphicEl(function(n,i){var o=t._getSymbolPoint(i);n.setPosition(o),n.markRedraw()})},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=M5(t),this._data=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,r,n){this._progressiveEls=[],n=A5(n);function i(l){l.isGroup||(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var o=t.start;o<t.end;o++){var s=r.getItemLayout(o);if(z2(r,s,o,n)){var a=new this._SymbolCtor(r,o,this._seriesScope);a.traverse(i),a.setPosition(s),this.group.add(a),r.setItemGraphicEl(o,a),this._progressiveEls.push(a)}}},e.prototype.eachRendered=function(t){Ef(this._progressiveEls||this.group,t)},e.prototype.remove=function(t){var r=this.group,n=this._data;n&&t?n.eachItemGraphicEl(function(i){i.fadeOut(function(){r.remove(i)},n.hostModel)}):r.removeAll()},e}();const kz=Qot;function Pz(e,t,r){var n=e.getBaseAxis(),i=e.getOtherAxis(n),o=tst(i,r),s=n.dim,a=i.dim,l=t.mapDimension(a),u=t.mapDimension(s),c=a==="x"||a==="radius"?1:0,f=Lt(e.dimensions,function(p){return t.mapDimension(p)}),h=!1,d=t.getCalculationInfo("stackResultDimension");return hu(t,f[0])&&(h=!0,f[0]=d),hu(t,f[1])&&(h=!0,f[1]=d),{dataDimsForPoint:f,valueStart:o,valueAxisDim:a,baseAxisDim:s,stacked:!!h,valueDim:l,baseDim:u,baseDataOffset:c,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function tst(e,t){var r=0,n=e.scale.getExtent();return t==="start"?r=n[0]:t==="end"?r=n[1]:Se(t)&&!isNaN(t)?r=t:n[0]>0?r=n[0]:n[1]<0&&(r=n[1]),r}function Ez(e,t,r,n){var i=NaN;e.stacked&&(i=r.get(r.getCalculationInfo("stackedOverDimension"),n)),isNaN(i)&&(i=e.valueStart);var o=e.baseDataOffset,s=[];return s[o]=r.get(e.baseDim,n),s[1-o]=i,t.dataToPoint(s)}function est(e,t){var r=[];return t.diff(e).add(function(n){r.push({cmd:"+",idx:n})}).update(function(n,i){r.push({cmd:"=",idx:i,idx1:n})}).remove(function(n){r.push({cmd:"-",idx:n})}).execute(),r}function rst(e,t,r,n,i,o,s,a){for(var l=est(e,t),u=[],c=[],f=[],h=[],d=[],p=[],v=[],m=Pz(i,t,s),g=e.getLayout("points")||[],_=t.getLayout("points")||[],b=0;b<l.length;b++){var w=l[b],T=!0,S=void 0,k=void 0;switch(w.cmd){case"=":S=w.idx*2,k=w.idx1*2;var A=g[S],C=g[S+1],x=_[k],I=_[k+1];(isNaN(A)||isNaN(C))&&(A=x,C=I),u.push(A,C),c.push(x,I),f.push(r[S],r[S+1]),h.push(n[k],n[k+1]),v.push(t.getRawIndex(w.idx1));break;case"+":var N=w.idx,B=m.dataDimsForPoint,V=i.dataToPoint([t.get(B[0],N),t.get(B[1],N)]);k=N*2,u.push(V[0],V[1]),c.push(_[k],_[k+1]);var F=Ez(m,i,t,N);f.push(F[0],F[1]),h.push(n[k],n[k+1]),v.push(t.getRawIndex(N));break;case"-":T=!1}T&&(d.push(w),p.push(p.length))}p.sort(function(Y,it){return v[Y]-v[it]});for(var G=u.length,Z=us(G),q=us(G),et=us(G),At=us(G),Dt=[],b=0;b<p.length;b++){var Pt=p[b],Et=b*2,qt=Pt*2;Z[Et]=u[qt],Z[Et+1]=u[qt+1],q[Et]=c[qt],q[Et+1]=c[qt+1],et[Et]=f[qt],et[Et+1]=f[qt+1],At[Et]=h[qt],At[Et+1]=h[qt+1],Dt[b]=d[Pt]}return{current:Z,next:q,stackedOnCurrent:et,stackedOnNext:At,status:Dt}}var Us=Math.min,Ws=Math.max;function Kl(e,t){return isNaN(e)||isNaN(t)}function E3(e,t,r,n,i,o,s,a,l){for(var u,c,f,h,d,p,v=r,m=0;m<n;m++){var g=t[v*2],_=t[v*2+1];if(v>=i||v<0)break;if(Kl(g,_)){if(l){v+=o;continue}break}if(v===r)e[o>0?"moveTo":"lineTo"](g,_),f=g,h=_;else{var b=g-u,w=_-c;if(b*b+w*w<.5){v+=o;continue}if(s>0){for(var T=v+o,S=t[T*2],k=t[T*2+1];S===g&&k===_&&m<n;)m++,T+=o,v+=o,S=t[T*2],k=t[T*2+1],g=t[v*2],_=t[v*2+1],b=g-u,w=_-c;var A=m+1;if(l)for(;Kl(S,k)&&A<n;)A++,T+=o,S=t[T*2],k=t[T*2+1];var C=.5,x=0,I=0,N=void 0,B=void 0;if(A>=n||Kl(S,k))d=g,p=_;else{x=S-u,I=k-c;var V=g-u,F=S-g,G=_-c,Z=k-_,q=void 0,et=void 0;if(a==="x"){q=Math.abs(V),et=Math.abs(F);var At=x>0?1:-1;d=g-At*q*s,p=_,N=g+At*et*s,B=_}else if(a==="y"){q=Math.abs(G),et=Math.abs(Z);var Dt=I>0?1:-1;d=g,p=_-Dt*q*s,N=g,B=_+Dt*et*s}else q=Math.sqrt(V*V+G*G),et=Math.sqrt(F*F+Z*Z),C=et/(et+q),d=g-x*s*(1-C),p=_-I*s*(1-C),N=g+x*s*C,B=_+I*s*C,N=Us(N,Ws(S,g)),B=Us(B,Ws(k,_)),N=Ws(N,Us(S,g)),B=Ws(B,Us(k,_)),x=N-g,I=B-_,d=g-x*q/et,p=_-I*q/et,d=Us(d,Ws(u,g)),p=Us(p,Ws(c,_)),d=Ws(d,Us(u,g)),p=Ws(p,Us(c,_)),x=g-d,I=_-p,N=g+x*et/q,B=_+I*et/q}e.bezierCurveTo(f,h,d,p,g,_),f=N,h=B}else e.lineTo(g,_)}u=g,c=_,v+=o}return m}var Cz=function(){function e(){this.smooth=0,this.smoothConstraint=!0}return e}(),nst=function(e){St(t,e);function t(r){var n=e.call(this,r)||this;return n.type="ec-polyline",n}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Cz},t.prototype.buildPath=function(r,n){var i=n.points,o=0,s=i.length/2;if(n.connectNulls){for(;s>0&&Kl(i[s*2-2],i[s*2-1]);s--);for(;o<s&&Kl(i[o*2],i[o*2+1]);o++);}for(;o<s;)o+=E3(r,i,o,s,s,1,n.smooth,n.smoothMonotone,n.connectNulls)+1},t.prototype.getPointOn=function(r,n){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var i=this.path,o=i.data,s=lu.CMD,a,l,u=n==="x",c=[],f=0;f<o.length;){var h=o[f++],d=void 0,p=void 0,v=void 0,m=void 0,g=void 0,_=void 0,b=void 0;switch(h){case s.M:a=o[f++],l=o[f++];break;case s.L:if(d=o[f++],p=o[f++],b=u?(r-a)/(d-a):(r-l)/(p-l),b<=1&&b>=0){var w=u?(p-l)*b+l:(d-a)*b+a;return u?[r,w]:[w,r]}a=d,l=p;break;case s.C:d=o[f++],p=o[f++],v=o[f++],m=o[f++],g=o[f++],_=o[f++];var T=u?Im(a,d,v,g,r,c):Im(l,p,m,_,r,c);if(T>0)for(var S=0;S<T;S++){var k=c[S];if(k<=1&&k>=0){var w=u?ur(l,p,m,_,k):ur(a,d,v,g,k);return u?[r,w]:[w,r]}}a=g,l=_;break}}},t}(pe),ist=function(e){St(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Cz),ost=function(e){St(t,e);function t(r){var n=e.call(this,r)||this;return n.type="ec-polygon",n}return t.prototype.getDefaultShape=function(){return new ist},t.prototype.buildPath=function(r,n){var i=n.points,o=n.stackedOnPoints,s=0,a=i.length/2,l=n.smoothMonotone;if(n.connectNulls){for(;a>0&&Kl(i[a*2-2],i[a*2-1]);a--);for(;s<a&&Kl(i[s*2],i[s*2+1]);s++);}for(;s<a;){var u=E3(r,i,s,a,a,1,n.smooth,l,n.connectNulls);E3(r,o,s+u-1,u,a,-1,n.stackedOnSmooth,l,n.connectNulls),s+=u+1,r.closePath()}},t}(pe);function Az(e,t,r,n,i){var o=e.getArea(),s=o.x,a=o.y,l=o.width,u=o.height,c=r.get(["lineStyle","width"])||2;s-=c/2,a-=c/2,l+=c,u+=c,s=Math.floor(s),l=Math.round(l);var f=new er({shape:{x:s,y:a,width:l,height:u}});if(t){var h=e.getBaseAxis(),d=h.isHorizontal(),p=h.inverse;d?(p&&(f.shape.x+=l),f.shape.width=0):(p||(f.shape.y+=u),f.shape.height=0);var v=jt(i)?function(m){i(m,f)}:null;Oo(f,{shape:{width:l,height:u,x:s,y:a}},r,null,n,v)}return f}function Mz(e,t,r){var n=e.getArea(),i=Qe(n.r0,1),o=Qe(n.r,1),s=new jp({shape:{cx:Qe(e.cx,1),cy:Qe(e.cy,1),r0:i,r:o,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}});if(t){var a=e.getBaseAxis().dim==="angle";a?s.shape.endAngle=n.startAngle:s.shape.r=i,Oo(s,{shape:{endAngle:n.endAngle,r:o}},r)}return s}function xz(e,t,r,n,i){if(e){if(e.type==="polar")return Mz(e,t,r);if(e.type==="cartesian2d")return Az(e,t,r,n,i)}else return null;return null}function xf(e,t){return e.type===t}function x5(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return;return!0}}function L5(e){for(var t=1/0,r=1/0,n=-1/0,i=-1/0,o=0;o<e.length;){var s=e[o++],a=e[o++];isNaN(s)||(t=Math.min(s,t),n=Math.max(s,n)),isNaN(a)||(r=Math.min(a,r),i=Math.max(a,i))}return[[t,r],[n,i]]}function I5(e,t){var r=L5(e),n=r[0],i=r[1],o=L5(t),s=o[0],a=o[1];return Math.max(Math.abs(n[0]-s[0]),Math.abs(n[1]-s[1]),Math.abs(i[0]-a[0]),Math.abs(i[1]-a[1]))}function O5(e){return Se(e)?e:e?.5:0}function sst(e,t,r){if(!r.valueDim)return[];for(var n=t.count(),i=us(n*2),o=0;o<n;o++){var s=Ez(r,e,t,o);i[o*2]=s[0],i[o*2+1]=s[1]}return i}function js(e,t,r,n){var i=t.getBaseAxis(),o=i.dim==="x"||i.dim==="radius"?0:1,s=[],a=0,l=[],u=[],c=[],f=[];if(n){for(a=0;a<e.length;a+=2)!isNaN(e[a])&&!isNaN(e[a+1])&&f.push(e[a],e[a+1]);e=f}for(a=0;a<e.length-2;a+=2)switch(c[0]=e[a+2],c[1]=e[a+3],u[0]=e[a],u[1]=e[a+1],s.push(u[0],u[1]),r){case"end":l[o]=c[o],l[1-o]=u[1-o],s.push(l[0],l[1]);break;case"middle":var h=(u[o]+c[o])/2,d=[];l[o]=d[o]=h,l[1-o]=u[1-o],d[1-o]=c[1-o],s.push(l[0],l[1]),s.push(d[0],d[1]);break;default:l[o]=u[o],l[1-o]=c[1-o],s.push(l[0],l[1])}return s.push(e[a++],e[a++]),s}function ast(e,t){var r=[],n=e.length,i,o;function s(c,f,h){var d=c.coord,p=(h-d)/(f.coord-d),v=FK(p,[c.color,f.color]);return{coord:h,color:v}}for(var a=0;a<n;a++){var l=e[a],u=l.coord;if(u<0)i=l;else if(u>t){o?r.push(s(o,l,t)):i&&r.push(s(i,l,0),s(i,l,t));break}else i&&(r.push(s(i,l,0)),i=null),r.push(l),o=l}return r}function lst(e,t,r){var n=e.getVisual("visualMeta");if(!(!n||!n.length||!e.count())&&t.type==="cartesian2d"){for(var i,o,s=n.length-1;s>=0;s--){var a=e.getDimensionInfo(n[s].dimension);if(i=a&&a.coordDim,i==="x"||i==="y"){o=n[s];break}}if(!!o){var l=t.getAxis(i),u=Lt(o.stops,function(b){return{coord:l.toGlobalCoord(l.dataToCoord(b.value)),color:b.color}}),c=u.length,f=o.outerColors.slice();c&&u[0].coord>u[c-1].coord&&(u.reverse(),f.reverse());var h=ast(u,i==="x"?r.getWidth():r.getHeight()),d=h.length;if(!d&&c)return u[0].coord<0?f[1]?f[1]:u[c-1].color:f[0]?f[0]:u[0].color;var p=10,v=h[0].coord-p,m=h[d-1].coord+p,g=m-v;if(g<.001)return"transparent";z(h,function(b){b.offset=(b.coord-v)/g}),h.push({offset:d?h[d-1].offset:.5,color:f[1]||"transparent"}),h.unshift({offset:d?h[0].offset:.5,color:f[0]||"transparent"});var _=new aP(0,0,0,0,h,!0);return _[i]=v,_[i+"2"]=m,_}}}function ust(e,t,r){var n=e.get("showAllSymbol"),i=n==="auto";if(!(n&&!i)){var o=r.getAxesByScale("ordinal")[0];if(!!o&&!(i&&cst(o,t))){var s=t.mapDimension(o.dim),a={};return z(o.getViewLabels(),function(l){var u=o.scale.getRawOrdinalNumber(l.tickValue);a[u]=1}),function(l){return!a.hasOwnProperty(t.get(s,l))}}}}function cst(e,t){var r=e.getExtent(),n=Math.abs(r[1]-r[0])/e.scale.count();isNaN(n)&&(n=0);for(var i=t.count(),o=Math.max(1,Math.round(i/5)),s=0;s<i;s+=o)if(k_.getSymbolSize(t,s)[e.isHorizontal()?1:0]*1.5>n)return!1;return!0}function fst(e,t){return isNaN(e)||isNaN(t)}function hst(e){for(var t=e.length/2;t>0&&fst(e[t*2-2],e[t*2-1]);t--);return t-1}function R5(e,t){return[e[t*2],e[t*2+1]]}function dst(e,t,r){for(var n=e.length/2,i=r==="x"?0:1,o,s,a=0,l=-1,u=0;u<n;u++)if(s=e[u*2+i],!(isNaN(s)||isNaN(e[u*2+1-i]))){if(u===0){o=s;continue}if(o<=t&&s>=t||o>=t&&s<=t){l=u;break}a=u,o=s}return{range:[a,l],t:(t-o)/(s-o)}}function Lz(e){if(e.get(["endLabel","show"]))return!0;for(var t=0;t<ui.length;t++)if(e.get([ui[t],"endLabel","show"]))return!0;return!1}function B2(e,t,r,n){if(xf(t,"cartesian2d")){var i=n.getModel("endLabel"),o=i.get("valueAnimation"),s=n.getData(),a={lastFrameIndex:0},l=Lz(n)?function(d,p){e._endLabelOnDuring(d,p,s,a,o,i,t)}:null,u=t.getBaseAxis().isHorizontal(),c=Az(t,r,n,function(){var d=e._endLabel;d&&r&&a.originalX!=null&&d.attr({x:a.originalX,y:a.originalY})},l);if(!n.get("clip",!0)){var f=c.shape,h=Math.max(f.width,f.height);u?(f.y-=h,f.height+=h*2):(f.x-=h,f.width+=h*2)}return l&&l(1,c),c}else return Mz(t,r,n)}function pst(e,t){var r=t.getBaseAxis(),n=r.isHorizontal(),i=r.inverse,o=n?i?"right":"left":"center",s=n?"middle":i?"top":"bottom";return{normal:{align:e.get("align")||o,verticalAlign:e.get("verticalAlign")||s}}}var vst=function(e){St(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(){var r=new Ne,n=new kz;this.group.add(n.group),this._symbolDraw=n,this._lineGroup=r},t.prototype.render=function(r,n,i){var o=this,s=r.coordinateSystem,a=this.group,l=r.getData(),u=r.getModel("lineStyle"),c=r.getModel("areaStyle"),f=l.getLayout("points")||[],h=s.type==="polar",d=this._coordSys,p=this._symbolDraw,v=this._polyline,m=this._polygon,g=this._lineGroup,_=r.get("animation"),b=!c.isEmpty(),w=c.get("origin"),T=Pz(s,l,w),S=b&&sst(s,l,T),k=r.get("showSymbol"),A=r.get("connectNulls"),C=k&&!h&&ust(r,l,s),x=this._data;x&&x.eachItemGraphicEl(function(it,K){it.__temp&&(a.remove(it),x.setItemGraphicEl(K,null))}),k||p.remove(),a.add(g);var I=h?!1:r.get("step"),N;s&&s.getArea&&r.get("clip",!0)&&(N=s.getArea(),N.width!=null?(N.x-=.1,N.y-=.1,N.width+=.2,N.height+=.2):N.r0&&(N.r0-=.5,N.r+=.5)),this._clipShapeForSymbol=N;var B=lst(l,s,i)||l.getVisual("style")[l.getVisual("drawType")];if(!(v&&d.type===s.type&&I===this._step))k&&p.updateData(l,{isIgnore:C,clipShape:N,disableAnimation:!0,getSymbolPoint:function(it){return[f[it*2],f[it*2+1]]}}),_&&this._initSymbolLabelAnimation(l,s,N),I&&(f=js(f,s,I,A),S&&(S=js(S,s,I,A))),v=this._newPolyline(f),b?m=this._newPolygon(f,S):m&&(g.remove(m),m=this._polygon=null),h||this._initOrUpdateEndLabel(r,s,fu(B)),g.setClipPath(B2(this,s,!0,r));else{b&&!m?m=this._newPolygon(f,S):m&&!b&&(g.remove(m),m=this._polygon=null),h||this._initOrUpdateEndLabel(r,s,fu(B));var V=g.getClipPath();if(V){var F=B2(this,s,!1,r);Oo(V,{shape:F.shape},r)}else g.setClipPath(B2(this,s,!0,r));k&&p.updateData(l,{isIgnore:C,clipShape:N,disableAnimation:!0,getSymbolPoint:function(it){return[f[it*2],f[it*2+1]]}}),(!x5(this._stackedOnPoints,S)||!x5(this._points,f))&&(_?this._doUpdateAnimation(l,S,s,i,I,w,A):(I&&(f=js(f,s,I,A),S&&(S=js(S,s,I,A))),v.setShape({points:f}),m&&m.setShape({points:f,stackedOnPoints:S})))}var G=r.getModel("emphasis"),Z=G.get("focus"),q=G.get("blurScope"),et=G.get("disabled");if(v.useStyle(ne(u.getLineStyle(),{fill:"none",stroke:B,lineJoin:"bevel"})),lp(v,r,"lineStyle"),v.style.lineWidth>0&&r.get(["emphasis","lineStyle","width"])==="bolder"){var At=v.getState("emphasis").style;At.lineWidth=+v.style.lineWidth+1}ae(v).seriesIndex=r.seriesIndex,uu(v,Z,q,et);var Dt=O5(r.get("smooth")),Pt=r.get("smoothMonotone");if(v.setShape({smooth:Dt,smoothMonotone:Pt,connectNulls:A}),m){var Et=l.getCalculationInfo("stackedOnSeries"),qt=0;m.useStyle(ne(c.getAreaStyle(),{fill:B,opacity:.7,lineJoin:"bevel",decal:l.getVisual("style").decal})),Et&&(qt=O5(Et.get("smooth"))),m.setShape({smooth:Dt,stackedOnSmooth:qt,smoothMonotone:Pt,connectNulls:A}),lp(m,r,"areaStyle"),ae(m).seriesIndex=r.seriesIndex,uu(m,Z,q,et)}var Y=function(it){o._changePolyState(it)};l.eachItemGraphicEl(function(it){it&&(it.onHoverStateChange=Y)}),this._polyline.onHoverStateChange=Y,this._data=l,this._coordSys=s,this._stackedOnPoints=S,this._points=f,this._step=I,this._valueOrigin=w,r.get("triggerLineEvent")&&(this.packEventData(r,v),m&&this.packEventData(r,m))},t.prototype.packEventData=function(r,n){ae(n).eventData={componentType:"series",componentSubType:"line",componentIndex:r.componentIndex,seriesIndex:r.seriesIndex,seriesName:r.name,seriesType:"line"}},t.prototype.highlight=function(r,n,i,o){var s=r.getData(),a=au(s,o);if(this._changePolyState("emphasis"),!(a instanceof Array)&&a!=null&&a>=0){var l=s.getLayout("points"),u=s.getItemGraphicEl(a);if(!u){var c=l[a*2],f=l[a*2+1];if(isNaN(c)||isNaN(f)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(c,f))return;var h=r.get("zlevel")||0,d=r.get("z")||0;u=new k_(s,a),u.x=c,u.y=f,u.setZ(h,d);var p=u.getSymbolPath().getTextContent();p&&(p.zlevel=h,p.z=d,p.z2=this._polyline.z2+1),u.__temp=!0,s.setItemGraphicEl(a,u),u.stopSymbolAnimation(!0),this.group.add(u)}u.highlight()}else oi.prototype.highlight.call(this,r,n,i,o)},t.prototype.downplay=function(r,n,i,o){var s=r.getData(),a=au(s,o);if(this._changePolyState("normal"),a!=null&&a>=0){var l=s.getItemGraphicEl(a);l&&(l.__temp?(s.setItemGraphicEl(a,null),this.group.remove(l)):l.downplay())}else oi.prototype.downplay.call(this,r,n,i,o)},t.prototype._changePolyState=function(r){var n=this._polygon;t3(this._polyline,r),n&&t3(n,r)},t.prototype._newPolyline=function(r){var n=this._polyline;return n&&this._lineGroup.remove(n),n=new nst({shape:{points:r},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(n),this._polyline=n,n},t.prototype._newPolygon=function(r,n){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new ost({shape:{points:r,stackedOnPoints:n},segmentIgnoreThreshold:2}),this._lineGroup.add(i),this._polygon=i,i},t.prototype._initSymbolLabelAnimation=function(r,n,i){var o,s,a=n.getBaseAxis(),l=a.inverse;n.type==="cartesian2d"?(o=a.isHorizontal(),s=!1):n.type==="polar"&&(o=a.dim==="angle",s=!0);var u=r.hostModel,c=u.get("animationDuration");jt(c)&&(c=c(null));var f=u.get("animationDelay")||0,h=jt(f)?f(null):f;r.eachItemGraphicEl(function(d,p){var v=d;if(v){var m=[d.x,d.y],g=void 0,_=void 0,b=void 0;if(i)if(s){var w=i,T=n.pointToCoord(m);o?(g=w.startAngle,_=w.endAngle,b=-T[1]/180*Math.PI):(g=w.r0,_=w.r,b=T[0])}else{var S=i;o?(g=S.x,_=S.x+S.width,b=d.x):(g=S.y+S.height,_=S.y,b=d.y)}var k=_===g?0:(b-g)/(_-g);l&&(k=1-k);var A=jt(f)?f(p):c*k+h,C=v.getSymbolPath(),x=C.getTextContent();v.attr({scaleX:0,scaleY:0}),v.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:A}),x&&x.animateFrom({style:{opacity:0}},{duration:300,delay:A}),C.disableLabelAnimation=!0}})},t.prototype._initOrUpdateEndLabel=function(r,n,i){var o=r.getModel("endLabel");if(Lz(r)){var s=r.getData(),a=this._polyline,l=s.getLayout("points");if(!l){a.removeTextContent(),this._endLabel=null;return}var u=this._endLabel;u||(u=this._endLabel=new rr({z2:200}),u.ignoreClip=!0,a.setTextContent(this._endLabel),a.disableLabelAnimation=!0);var c=hst(l);c>=0&&(Cf(a,Tu(r,"endLabel"),{inheritColor:i,labelFetcher:r,labelDataIndex:c,defaultText:function(f,h,d){return d!=null?Tz(s,d):_p(s,f)},enableTextSetter:!0},pst(o,n)),a.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(r,n,i,o,s,a,l){var u=this._endLabel,c=this._polyline;if(u){r<1&&o.originalX==null&&(o.originalX=u.x,o.originalY=u.y);var f=i.getLayout("points"),h=i.hostModel,d=h.get("connectNulls"),p=a.get("precision"),v=a.get("distance")||0,m=l.getBaseAxis(),g=m.isHorizontal(),_=m.inverse,b=n.shape,w=_?g?b.x:b.y+b.height:g?b.x+b.width:b.y,T=(g?v:0)*(_?-1:1),S=(g?0:-v)*(_?-1:1),k=g?"x":"y",A=dst(f,w,k),C=A.range,x=C[1]-C[0],I=void 0;if(x>=1){if(x>1&&!d){var N=R5(f,C[0]);u.attr({x:N[0]+T,y:N[1]+S}),s&&(I=h.getRawValue(C[0]))}else{var N=c.getPointOn(w,k);N&&u.attr({x:N[0]+T,y:N[1]+S});var B=h.getRawValue(C[0]),V=h.getRawValue(C[1]);s&&(I=NJ(i,p,B,V,A.t))}o.lastFrameIndex=C[0]}else{var F=r===1||o.lastFrameIndex>0?C[0]:0,N=R5(f,F);s&&(I=h.getRawValue(F)),u.attr({x:N[0]+T,y:N[1]+S})}s&&s_(u).setLabelText(I)}},t.prototype._doUpdateAnimation=function(r,n,i,o,s,a,l){var u=this._polyline,c=this._polygon,f=r.hostModel,h=rst(this._data,r,this._stackedOnPoints,n,this._coordSys,i,this._valueOrigin),d=h.current,p=h.stackedOnCurrent,v=h.next,m=h.stackedOnNext;if(s&&(d=js(h.current,i,s,l),p=js(h.stackedOnCurrent,i,s,l),v=js(h.next,i,s,l),m=js(h.stackedOnNext,i,s,l)),I5(d,v)>3e3||c&&I5(p,m)>3e3){u.stopAnimation(),u.setShape({points:v}),c&&(c.stopAnimation(),c.setShape({points:v,stackedOnPoints:m}));return}u.shape.__points=h.current,u.shape.points=d;var g={shape:{points:v}};h.current!==d&&(g.shape.__points=h.next),u.stopAnimation(),_r(u,g,f),c&&(c.setShape({points:d,stackedOnPoints:p}),c.stopAnimation(),_r(c,{shape:{stackedOnPoints:m}},f),u.shape.points!==c.shape.points&&(c.shape.points=u.shape.points));for(var _=[],b=h.status,w=0;w<b.length;w++){var T=b[w].cmd;if(T==="="){var S=r.getItemGraphicEl(b[w].idx1);S&&_.push({el:S,ptIdx:w})}}u.animators&&u.animators.length&&u.animators[0].during(function(){c&&c.dirtyShape();for(var k=u.shape.__points,A=0;A<_.length;A++){var C=_[A].el,x=_[A].ptIdx*2;C.x=k[x],C.y=k[x+1],C.markRedraw()}})},t.prototype.remove=function(r){var n=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl(function(o,s){o.__temp&&(n.remove(o),i.setItemGraphicEl(s,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t}(oi);const gst=vst;function zP(e,t){return{seriesType:e,plan:PP(),reset:function(r){var n=r.getData(),i=r.coordinateSystem,o=r.pipelineContext,s=t||o.large;if(!!i){var a=Lt(i.dimensions,function(d){return n.mapDimension(d)}).slice(0,2),l=a.length,u=n.getCalculationInfo("stackResultDimension");hu(n,a[0])&&(a[0]=u),hu(n,a[1])&&(a[1]=u);var c=n.getStore(),f=n.getDimensionIndex(a[0]),h=n.getDimensionIndex(a[1]);return l&&{progress:function(d,p){for(var v=d.end-d.start,m=s&&us(v*l),g=[],_=[],b=d.start,w=0;b<d.end;b++){var T=void 0;if(l===1){var S=c.get(f,b);T=i.dataToPoint(S,null,_)}else g[0]=c.get(f,b),g[1]=c.get(h,b),T=i.dataToPoint(g,null,_);s?(m[w++]=T[0],m[w++]=T[1]):p.setItemLayout(b,T.slice())}s&&p.setLayout("points",m)}}}}}}var mst={average:function(e){for(var t=0,r=0,n=0;n<e.length;n++)isNaN(e[n])||(t+=e[n],r++);return r===0?NaN:t/r},sum:function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r]||0;return t},max:function(e){for(var t=-1/0,r=0;r<e.length;r++)e[r]>t&&(t=e[r]);return isFinite(t)?t:NaN},min:function(e){for(var t=1/0,r=0;r<e.length;r++)e[r]<t&&(t=e[r]);return isFinite(t)?t:NaN},nearest:function(e){return e[0]}},_st=function(e){return Math.round(e.length/2)};function Iz(e){return{seriesType:e,reset:function(t,r,n){var i=t.getData(),o=t.get("sampling"),s=t.coordinateSystem,a=i.count();if(a>10&&s.type==="cartesian2d"&&o){var l=s.getBaseAxis(),u=s.getOtherAxis(l),c=l.getExtent(),f=n.getDevicePixelRatio(),h=Math.abs(c[1]-c[0])*(f||1),d=Math.round(a/h);if(isFinite(d)&&d>1){o==="lttb"&&t.setData(i.lttbDownSample(i.mapDimension(u.dim),1/d));var p=void 0;Mt(o)?p=mst[o]:jt(o)&&(p=o),p&&t.setData(i.downSample(i.mapDimension(u.dim),1/d,p,_st))}}}}}function Cu(e){e.registerChartView(gst),e.registerSeriesModel(Zot),e.registerLayout(zP("line",!0)),e.registerVisual({seriesType:"line",reset:function(t){var r=t.getData(),n=t.getModel("lineStyle").getLineStyle();n&&!n.stroke&&(n.stroke=r.getVisual("style").fill),r.setVisual("legendLineStyle",n)}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,Iz("line"))}var Oz=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(r,n){return Hp(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(r){var n=this.coordinateSystem;if(n&&n.clampData){var i=n.dataToPoint(n.clampData(r)),o=this.getData(),s=o.getLayout("offset"),a=o.getLayout("size"),l=n.getBaseAxis().isHorizontal()?0:1;return i[l]+=s+a/2,i}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(Ro);Ro.registerClass(Oz);const D5=Oz;var yst=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(){return Hp(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},t.prototype.getProgressiveThreshold=function(){var r=this.get("progressiveThreshold"),n=this.get("largeThreshold");return n>r&&(r=n),r},t.prototype.brushSelector=function(r,n,i){return i.rect(n.getItemLayout(r))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=l_(D5.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(D5);const bst=yst;var wst=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),Sst=function(e){St(t,e);function t(r){var n=e.call(this,r)||this;return n.type="sausage",n}return t.prototype.getDefaultShape=function(){return new wst},t.prototype.buildPath=function(r,n){var i=n.cx,o=n.cy,s=Math.max(n.r0||0,0),a=Math.max(n.r,0),l=(a-s)*.5,u=s+l,c=n.startAngle,f=n.endAngle,h=n.clockwise,d=Math.PI*2,p=h?f-c<d:c-f<d;p||(c=f-(h?d:-d));var v=Math.cos(c),m=Math.sin(c),g=Math.cos(f),_=Math.sin(f);p?(r.moveTo(v*s+i,m*s+o),r.arc(v*u+i,m*u+o,l,-Math.PI+c,c,!h)):r.moveTo(v*a+i,m*a+o),r.arc(i,o,a,c,f,!h),r.arc(g*u+i,_*u+o,l,f-Math.PI*2,f-Math.PI,!h),s!==0&&r.arc(i,o,s,f,c,h)},t}(pe);const N5=Sst;function Tst(e,t){t=t||{};var r=t.isRoundCap;return function(n,i,o){var s=i.position;if(!s||s instanceof Array)return Fm(n,i,o);var a=e(s),l=i.distance!=null?i.distance:5,u=this.shape,c=u.cx,f=u.cy,h=u.r,d=u.r0,p=(h+d)/2,v=u.startAngle,m=u.endAngle,g=(v+m)/2,_=r?Math.abs(h-d)/2:0,b=Math.cos,w=Math.sin,T=c+h*b(v),S=f+h*w(v),k="left",A="top";switch(a){case"startArc":T=c+(d-l)*b(g),S=f+(d-l)*w(g),k="center",A="top";break;case"insideStartArc":T=c+(d+l)*b(g),S=f+(d+l)*w(g),k="center",A="bottom";break;case"startAngle":T=c+p*b(v)+uv(v,l+_,!1),S=f+p*w(v)+cv(v,l+_,!1),k="right",A="middle";break;case"insideStartAngle":T=c+p*b(v)+uv(v,-l+_,!1),S=f+p*w(v)+cv(v,-l+_,!1),k="left",A="middle";break;case"middle":T=c+p*b(g),S=f+p*w(g),k="center",A="middle";break;case"endArc":T=c+(h+l)*b(g),S=f+(h+l)*w(g),k="center",A="bottom";break;case"insideEndArc":T=c+(h-l)*b(g),S=f+(h-l)*w(g),k="center",A="top";break;case"endAngle":T=c+p*b(m)+uv(m,l+_,!0),S=f+p*w(m)+cv(m,l+_,!0),k="left",A="middle";break;case"insideEndAngle":T=c+p*b(m)+uv(m,-l+_,!0),S=f+p*w(m)+cv(m,-l+_,!0),k="right",A="middle";break;default:return Fm(n,i,o)}return n=n||{},n.x=T,n.y=S,n.align=k,n.verticalAlign=A,n}}function kst(e,t,r,n){if(Se(n)){e.setTextConfig({rotation:n});return}else if(ht(t)){e.setTextConfig({rotation:0});return}var i=e.shape,o=i.clockwise?i.startAngle:i.endAngle,s=i.clockwise?i.endAngle:i.startAngle,a=(o+s)/2,l,u=r(t);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=a;break;case"startAngle":case"insideStartAngle":l=o;break;case"endAngle":case"insideEndAngle":l=s;break;default:e.setTextConfig({rotation:0});return}var c=Math.PI*1.5-l;u==="middle"&&c>Math.PI/2&&c<Math.PI*1.5&&(c-=Math.PI),e.setTextConfig({rotation:c})}function uv(e,t,r){return t*Math.sin(e)*(r?-1:1)}function cv(e,t,r){return t*Math.cos(e)*(r?1:-1)}var $2=Math.max,V2=Math.min;function Pst(e,t){var r=e.getArea&&e.getArea();if(xf(e,"cartesian2d")){var n=e.getBaseAxis();if(n.type!=="category"||!n.onBand){var i=t.getLayout("bandWidth");n.isHorizontal()?(r.x-=i,r.width+=i*2):(r.y-=i,r.height+=i*2)}}return r}var Est=function(e){St(t,e);function t(){var r=e.call(this)||this;return r.type=t.type,r._isFirstFrame=!0,r}return t.prototype.render=function(r,n,i,o){this._model=r,this._removeOnRenderedListener(i),this._updateDrawMode(r);var s=r.get("coordinateSystem");(s==="cartesian2d"||s==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(r,n,i):this._renderNormal(r,n,i,o))},t.prototype.incrementalPrepareRender=function(r){this._clear(),this._updateDrawMode(r),this._updateLargeClip(r)},t.prototype.incrementalRender=function(r,n){this._progressiveEls=[],this._incrementalRenderLarge(r,n)},t.prototype.eachRendered=function(r){Ef(this._progressiveEls||this.group,r)},t.prototype._updateDrawMode=function(r){var n=r.pipelineContext.large;(this._isLargeDraw==null||n!==this._isLargeDraw)&&(this._isLargeDraw=n,this._clear())},t.prototype._renderNormal=function(r,n,i,o){var s=this.group,a=r.getData(),l=this._data,u=r.coordinateSystem,c=u.getBaseAxis(),f;u.type==="cartesian2d"?f=c.isHorizontal():u.type==="polar"&&(f=c.dim==="angle");var h=r.isAnimationEnabled()?r:null,d=Cst(r,u);d&&this._enableRealtimeSort(d,a,i);var p=r.get("clip",!0)||d,v=Pst(u,a);s.removeClipPath();var m=r.get("roundCap",!0),g=r.get("showBackground",!0),_=r.getModel("backgroundStyle"),b=_.get("borderRadius")||0,w=[],T=this._backgroundEls,S=o&&o.isInitSort,k=o&&o.type==="changeAxisOrder";function A(I){var N=fv[u.type](a,I),B=Rst(u,f,N);return B.useStyle(_.getItemStyle()),u.type==="cartesian2d"&&B.setShape("r",b),w[I]=B,B}a.diff(l).add(function(I){var N=a.getItemModel(I),B=fv[u.type](a,I,N);if(g&&A(I),!(!a.hasValue(I)||!V5[u.type](B))){var V=!1;p&&(V=F5[u.type](v,B));var F=z5[u.type](r,a,I,B,f,h,c.model,!1,m);d&&(F.forceLabelAnimation=!0),U5(F,a,I,N,B,r,f,u.type==="polar"),S?F.attr({shape:B}):d?B5(d,h,F,B,I,f,!1,!1):Oo(F,{shape:B},r,I),a.setItemGraphicEl(I,F),s.add(F),F.ignore=V}}).update(function(I,N){var B=a.getItemModel(I),V=fv[u.type](a,I,B);if(g){var F=void 0;T.length===0?F=A(N):(F=T[N],F.useStyle(_.getItemStyle()),u.type==="cartesian2d"&&F.setShape("r",b),w[I]=F);var G=fv[u.type](a,I),Z=Dz(f,G,u);_r(F,{shape:Z},h,I)}var q=l.getItemGraphicEl(N);if(!a.hasValue(I)||!V5[u.type](V)){s.remove(q);return}var et=!1;if(p&&(et=F5[u.type](v,V),et&&s.remove(q)),q?dN(q):q=z5[u.type](r,a,I,V,f,h,c.model,!!q,m),d&&(q.forceLabelAnimation=!0),k){var At=q.getTextContent();if(At){var Dt=s_(At);Dt.prevValue!=null&&(Dt.prevValue=Dt.value)}}else U5(q,a,I,B,V,r,f,u.type==="polar");S?q.attr({shape:V}):d?B5(d,h,q,V,I,f,!0,k):_r(q,{shape:V},r,I,null),a.setItemGraphicEl(I,q),q.ignore=et,s.add(q)}).remove(function(I){var N=l.getItemGraphicEl(I);N&&a3(N,r,I)}).execute();var C=this._backgroundGroup||(this._backgroundGroup=new Ne);C.removeAll();for(var x=0;x<w.length;++x)C.add(w[x]);s.add(C),this._backgroundEls=w,this._data=a},t.prototype._renderLarge=function(r,n,i){this._clear(),j5(r,this.group),this._updateLargeClip(r)},t.prototype._incrementalRenderLarge=function(r,n){this._removeBackground(),j5(n,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(r){var n=r.get("clip",!0)&&xz(r.coordinateSystem,!1,r),i=this.group;n?i.setClipPath(n):i.removeClipPath()},t.prototype._enableRealtimeSort=function(r,n,i){var o=this;if(!!n.count()){var s=r.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(n,r,i),this._isFirstFrame=!1;else{var a=function(l){var u=n.getItemGraphicEl(l),c=u&&u.shape;return c&&Math.abs(s.isHorizontal()?c.height:c.width)||0};this._onRendered=function(){o._updateSortWithinSameData(n,a,s,i)},i.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(r,n,i){var o=[];return r.each(r.mapDimension(n.dim),function(s,a){var l=i(a);l=l==null?NaN:l,o.push({dataIndex:a,mappedValue:l,ordinalNumber:s})}),o.sort(function(s,a){return a.mappedValue-s.mappedValue}),{ordinalNumbers:Lt(o,function(s){return s.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(r,n,i){for(var o=i.scale,s=r.mapDimension(i.dim),a=Number.MAX_VALUE,l=0,u=o.getOrdinalMeta().categories.length;l<u;++l){var c=r.rawIndexOf(s,o.getRawOrdinalNumber(l)),f=c<0?Number.MIN_VALUE:n(r.indexOfRawIndex(c));if(f>a)return!0;a=f}return!1},t.prototype._isOrderDifferentInView=function(r,n){for(var i=n.scale,o=i.getExtent(),s=Math.max(0,o[0]),a=Math.min(o[1],i.getOrdinalMeta().categories.length-1);s<=a;++s)if(r.ordinalNumbers[s]!==i.getRawOrdinalNumber(s))return!0},t.prototype._updateSortWithinSameData=function(r,n,i,o){if(!!this._isOrderChangedWithinSameData(r,n,i)){var s=this._dataSort(r,i,n);this._isOrderDifferentInView(s,i)&&(this._removeOnRenderedListener(o),o.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",axisId:i.index,sortInfo:s}))}},t.prototype._dispatchInitSort=function(r,n,i){var o=n.baseAxis,s=this._dataSort(r,o,function(a){return r.get(r.mapDimension(n.otherAxis.dim),a)});i.dispatchAction({type:"changeAxisOrder",componentType:o.dim+"Axis",isInitSort:!0,axisId:o.index,sortInfo:s})},t.prototype.remove=function(r,n){this._clear(this._model),this._removeOnRenderedListener(n)},t.prototype.dispose=function(r,n){this._removeOnRenderedListener(n)},t.prototype._removeOnRenderedListener=function(r){this._onRendered&&(r.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(r){var n=this.group,i=this._data;r&&r.isAnimationEnabled()&&i&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],i.eachItemGraphicEl(function(o){a3(o,r,ae(o).dataIndex)})):n.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(oi),F5={cartesian2d:function(e,t){var r=t.width<0?-1:1,n=t.height<0?-1:1;r<0&&(t.x+=t.width,t.width=-t.width),n<0&&(t.y+=t.height,t.height=-t.height);var i=e.x+e.width,o=e.y+e.height,s=$2(t.x,e.x),a=V2(t.x+t.width,i),l=$2(t.y,e.y),u=V2(t.y+t.height,o),c=a<s,f=u<l;return t.x=c&&s>i?a:s,t.y=f&&l>o?u:l,t.width=c?0:a-s,t.height=f?0:u-l,r<0&&(t.x+=t.width,t.width=-t.width),n<0&&(t.y+=t.height,t.height=-t.height),c||f},polar:function(e,t){var r=t.r0<=t.r?1:-1;if(r<0){var n=t.r;t.r=t.r0,t.r0=n}var i=V2(t.r,e.r),o=$2(t.r0,e.r0);t.r=i,t.r0=o;var s=i-o<0;if(r<0){var n=t.r;t.r=t.r0,t.r0=n}return s}},z5={cartesian2d:function(e,t,r,n,i,o,s,a,l){var u=new er({shape:at({},n),z2:1});if(u.__dataIndex=r,u.name="item",o){var c=u.shape,f=i?"height":"width";c[f]=0}return u},polar:function(e,t,r,n,i,o,s,a,l){var u=!i&&l?N5:jp,c=new u({shape:n,z2:1});c.name="item";var f=Rz(i);if(c.calculateTextPosition=Tst(f,{isRoundCap:u===N5}),o){var h=c.shape,d=i?"r":"endAngle",p={};h[d]=i?0:n.startAngle,p[d]=n[d],(a?_r:Oo)(c,{shape:p},o)}return c}};function Cst(e,t){var r=e.get("realtimeSort",!0),n=t.getBaseAxis();if(r&&n.type==="category"&&t.type==="cartesian2d")return{baseAxis:n,otherAxis:t.getOtherAxis(n)}}function B5(e,t,r,n,i,o,s,a){var l,u;o?(u={x:n.x,width:n.width},l={y:n.y,height:n.height}):(u={y:n.y,height:n.height},l={x:n.x,width:n.width}),a||(s?_r:Oo)(r,{shape:l},t,i,null);var c=t?e.baseAxis.model:null;(s?_r:Oo)(r,{shape:u},c,i)}function $5(e,t){for(var r=0;r<t.length;r++)if(!isFinite(e[t[r]]))return!0;return!1}var Ast=["x","y","width","height"],Mst=["cx","cy","r","startAngle","endAngle"],V5={cartesian2d:function(e){return!$5(e,Ast)},polar:function(e){return!$5(e,Mst)}},fv={cartesian2d:function(e,t,r){var n=e.getItemLayout(t),i=r?Lst(r,n):0,o=n.width>0?1:-1,s=n.height>0?1:-1;return{x:n.x+o*i/2,y:n.y+s*i/2,width:n.width-o*i,height:n.height-s*i}},polar:function(e,t,r){var n=e.getItemLayout(t);return{cx:n.cx,cy:n.cy,r0:n.r0,r:n.r,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}}};function xst(e){return e.startAngle!=null&&e.endAngle!=null&&e.startAngle===e.endAngle}function Rz(e){return function(t){var r=t?"Arc":"Angle";return function(n){switch(n){case"start":case"insideStart":case"end":case"insideEnd":return n+r;default:return n}}}(e)}function U5(e,t,r,n,i,o,s,a){var l=t.getItemVisual(r,"style");a||e.setShape("r",n.get(["itemStyle","borderRadius"])||0),e.useStyle(l);var u=n.getShallow("cursor");u&&e.attr("cursor",u);var c=a?s?i.r>=i.r0?"endArc":"startArc":i.endAngle>=i.startAngle?"endAngle":"startAngle":s?i.height>=0?"bottom":"top":i.width>=0?"right":"left",f=Tu(n);Cf(e,f,{labelFetcher:o,labelDataIndex:r,defaultText:_p(o.getData(),r),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:c});var h=e.getTextContent();if(a&&h){var d=n.get(["label","position"]);e.textConfig.inside=d==="middle"?!0:null,kst(e,d==="outside"?c:d,Rz(s),n.get(["label","rotate"]))}tet(h,f,o.getRawValue(r),function(v){return Tz(t,v)});var p=n.getModel(["emphasis"]);uu(e,p.get("focus"),p.get("blurScope"),p.get("disabled")),lp(e,n),xst(i)&&(e.style.fill="none",e.style.stroke="none",z(e.states,function(v){v.style&&(v.style.fill=v.style.stroke="none")}))}function Lst(e,t){var r=e.get(["itemStyle","borderColor"]);if(!r||r==="none")return 0;var n=e.get(["itemStyle","borderWidth"])||0,i=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),o=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(n,i,o)}var Ist=function(){function e(){}return e}(),W5=function(e){St(t,e);function t(r){var n=e.call(this,r)||this;return n.type="largeBar",n}return t.prototype.getDefaultShape=function(){return new Ist},t.prototype.buildPath=function(r,n){for(var i=n.points,o=this.baseDimIdx,s=1-this.baseDimIdx,a=[],l=[],u=this.barWidth,c=0;c<i.length;c+=3)l[o]=u,l[s]=i[c+2],a[o]=i[c+o],a[s]=i[c+s],r.rect(a[0],a[1],l[0],l[1])},t}(pe);function j5(e,t,r,n){var i=e.getData(),o=i.getLayout("valueAxisHorizontal")?1:0,s=i.getLayout("largeDataIndices"),a=i.getLayout("size"),l=e.getModel("backgroundStyle"),u=i.getLayout("largeBackgroundPoints");if(u){var c=new W5({shape:{points:u},incremental:!!n,silent:!0,z2:0});c.baseDimIdx=o,c.largeDataIndices=s,c.barWidth=a,c.useStyle(l.getItemStyle()),t.add(c),r&&r.push(c)}var f=new W5({shape:{points:i.getLayout("largePoints")},incremental:!!n,ignoreCoarsePointer:!0,z2:1});f.baseDimIdx=o,f.largeDataIndices=s,f.barWidth=a,t.add(f),f.useStyle(i.getVisual("style")),ae(f).seriesIndex=e.seriesIndex,e.get("silent")||(f.on("mousedown",G5),f.on("mousemove",G5)),r&&r.push(f)}var G5=__(function(e){var t=this,r=Ost(t,e.offsetX,e.offsetY);ae(t).dataIndex=r>=0?r:null},30,!1);function Ost(e,t,r){for(var n=e.baseDimIdx,i=1-n,o=e.shape.points,s=e.largeDataIndices,a=[],l=[],u=e.barWidth,c=0,f=o.length/3;c<f;c++){var h=c*3;if(l[n]=u,l[i]=o[h+2],a[n]=o[h+n],a[i]=o[h+i],l[i]<0&&(a[i]+=l[i],l[i]=-l[i]),t>=a[0]&&t<=a[0]+l[0]&&r>=a[1]&&r<=a[1]+l[1])return s[c]}return-1}function Dz(e,t,r){if(xf(r,"cartesian2d")){var n=t,i=r.getArea();return{x:e?n.x:i.x,y:e?i.y:n.y,width:e?n.width:i.width,height:e?i.height:n.height}}else{var i=r.getArea(),o=t;return{cx:i.cx,cy:i.cy,r0:e?i.r0:o.r0,r:e?i.r:o.r,startAngle:e?o.startAngle:0,endAngle:e?o.endAngle:Math.PI*2}}}function Rst(e,t,r){var n=e.type==="polar"?jp:er;return new n({shape:Dz(t,r,e),silent:!0,z2:0})}const Dst=Est;function Lf(e){e.registerChartView(Dst),e.registerSeriesModel(bst),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,be(rot,"bar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,not("bar")),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,Iz("bar")),e.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,r){var n=t.componentType||"series";r.eachComponent({mainType:n,query:t},function(i){t.sortInfo&&i.axis.setCategorySortInfo(t.sortInfo)})})}var Nst=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r,n){return Hp(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var r=this.option.progressive;return r==null?this.option.large?5e3:this.get("progressive"):r},t.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r==null?this.option.large?1e4:this.get("progressiveThreshold"):r},t.prototype.brushSelector=function(r,n,i){return i.point(n.getItemLayout(r))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(Ro);const Fst=Nst;var Nz=4,zst=function(){function e(){}return e}(),Bst=function(e){St(t,e);function t(r){var n=e.call(this,r)||this;return n._off=0,n.hoverDataIdx=-1,n}return t.prototype.getDefaultShape=function(){return new zst},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(r,n){var i=n.points,o=n.size,s=this.symbolProxy,a=s.shape,l=r.getContext?r.getContext():r,u=l&&o[0]<Nz,c=this.softClipShape,f;if(u){this._ctx=l;return}for(this._ctx=null,f=this._off;f<i.length;){var h=i[f++],d=i[f++];isNaN(h)||isNaN(d)||c&&!c.contain(h,d)||(a.x=h-o[0]/2,a.y=d-o[1]/2,a.width=o[0],a.height=o[1],s.buildPath(r,a,!0))}this.incremental&&(this._off=f,this.notClear=!0)},t.prototype.afterBrush=function(){var r=this.shape,n=r.points,i=r.size,o=this._ctx,s=this.softClipShape,a;if(!!o){for(a=this._off;a<n.length;){var l=n[a++],u=n[a++];isNaN(l)||isNaN(u)||s&&!s.contain(l,u)||o.fillRect(l-i[0]/2,u-i[1]/2,i[0],i[1])}this.incremental&&(this._off=a,this.notClear=!0)}},t.prototype.findDataIndex=function(r,n){for(var i=this.shape,o=i.points,s=i.size,a=Math.max(s[0],4),l=Math.max(s[1],4),u=o.length/2-1;u>=0;u--){var c=u*2,f=o[c]-a/2,h=o[c+1]-l/2;if(r>=f&&n>=h&&r<=f+a&&n<=h+l)return u}return-1},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect();if(r=i[0],n=i[1],o.contain(r,n)){var s=this.hoverDataIdx=this.findDataIndex(r,n);return s>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var n=this.shape,i=n.points,o=n.size,s=o[0],a=o[1],l=1/0,u=1/0,c=-1/0,f=-1/0,h=0;h<i.length;){var d=i[h++],p=i[h++];l=Math.min(d,l),c=Math.max(d,c),u=Math.min(p,u),f=Math.max(p,f)}r=this._rect=new ue(l-s/2,u-a/2,c-l+s,f-u+a)}return r},t}(pe),$st=function(){function e(){this.group=new Ne}return e.prototype.updateData=function(t,r){this._clear();var n=this._create();n.setShape({points:t.getLayout("points")}),this._setCommon(n,t,r)},e.prototype.updateLayout=function(t){var r=t.getLayout("points");this.group.eachChild(function(n){if(n.startIndex!=null){var i=(n.endIndex-n.startIndex)*2,o=n.startIndex*4*2;r=new Float32Array(r.buffer,o,i)}n.setShape("points",r),n.reset()})},e.prototype.incrementalPrepareUpdate=function(t){this._clear()},e.prototype.incrementalUpdate=function(t,r,n){var i=this._newAdded[0],o=r.getLayout("points"),s=i&&i.shape.points;if(s&&s.length<2e4){var a=s.length,l=new Float32Array(a+o.length);l.set(s),l.set(o,a),i.endIndex=t.end,i.setShape({points:l})}else{this._newAdded=[];var u=this._create();u.startIndex=t.start,u.endIndex=t.end,u.incremental=!0,u.setShape({points:o}),this._setCommon(u,r,n)}},e.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},e.prototype._create=function(){var t=new Bst({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},e.prototype._setCommon=function(t,r,n){var i=r.hostModel;n=n||{};var o=r.getVisual("symbolSize");t.setShape("size",o instanceof Array?o:[o,o]),t.softClipShape=n.clipShape||null,t.symbolProxy=Ui(r.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var s=t.shape.size[0]<Nz;t.useStyle(i.getModel("itemStyle").getItemStyle(s?["color","shadowBlur","shadowColor"]:["color"]));var a=r.getVisual("style"),l=a&&a.fill;l&&t.setColor(l);var u=ae(t);u.seriesIndex=i.seriesIndex,t.on("mousemove",function(c){u.dataIndex=null;var f=t.hoverDataIdx;f>=0&&(u.dataIndex=f+(t.startIndex||0))})},e.prototype.remove=function(){this._clear()},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}();const Vst=$st;var Ust=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){var o=r.getData(),s=this._updateSymbolDraw(o,r);s.updateData(o,{clipShape:this._getClipShape(r)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(r,n,i){var o=r.getData(),s=this._updateSymbolDraw(o,r);s.incrementalPrepareUpdate(o),this._finished=!1},t.prototype.incrementalRender=function(r,n,i){this._symbolDraw.incrementalUpdate(r,n.getData(),{clipShape:this._getClipShape(n)}),this._finished=r.end===n.getData().count()},t.prototype.updateTransform=function(r,n,i){var o=r.getData();if(this.group.dirty(),!this._finished||o.count()>1e4)return{update:!0};var s=zP("").reset(r,n,i);s.progress&&s.progress({start:0,end:o.count(),count:o.count()},o),this._symbolDraw.updateLayout(o)},t.prototype.eachRendered=function(r){this._symbolDraw&&this._symbolDraw.eachRendered(r)},t.prototype._getClipShape=function(r){var n=r.coordinateSystem,i=n&&n.getArea&&n.getArea();return r.get("clip",!0)?i:null},t.prototype._updateSymbolDraw=function(r,n){var i=this._symbolDraw,o=n.pipelineContext,s=o.large;return(!i||s!==this._isLargeDraw)&&(i&&i.remove(),i=this._symbolDraw=s?new Vst:new kz,this._isLargeDraw=s,this.group.removeAll()),this.group.add(i.group),i},t.prototype.remove=function(r,n){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(oi);const Wst=Ust;var jst=function(e){St(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t}(Me);const Gst=jst;var C3=function(e){St(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",Li).models[0]},t.type="cartesian2dAxis",t}(Me);Gi(C3,Aot);var Fz={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},Hst=le({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},Fz),BP=le({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},Fz),Xst=le({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},BP),Yst=ne({logBase:10},BP);const qst={category:Hst,value:BP,time:Xst,log:Yst};var Zst={value:1,category:1,time:1,log:1};function H5(e,t,r,n){z(Zst,function(i,o){var s=le(le({},qst[o],!0),n,!0),a=function(l){St(u,l);function u(){var c=l!==null&&l.apply(this,arguments)||this;return c.type=t+"Axis."+o,c}return u.prototype.mergeDefaultAndTheme=function(c,f){var h=dp(this),d=h?p_(c):{},p=f.getTheme();le(c,p.get(o+"Axis")),le(c,this.getDefaultOption()),c.type=X5(c),h&&lf(c,d,h)},u.prototype.optionUpdated=function(){var c=this.option;c.type==="category"&&(this.__ordinalMeta=T3.createByAxisModel(this))},u.prototype.getCategories=function(c){var f=this.option;if(f.type==="category")return c?f.data:this.__ordinalMeta.categories},u.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},u.type=t+"Axis."+o,u.defaultOption=s,u}(r);e.registerComponentModel(a)}),e.registerSubTypeDefaulter(t+"Axis",X5)}function X5(e){return e.type||(e.data?"category":"value")}var Kst=function(){function e(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return e.prototype.getAxis=function(t){return this._axes[t]},e.prototype.getAxes=function(){return Lt(this._dimList,function(t){return this._axes[t]},this)},e.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),Cr(this.getAxes(),function(r){return r.scale.type===t})},e.prototype.addAxis=function(t){var r=t.dim;this._axes[r]=t,this._dimList.push(r)},e}();const Jst=Kst;var A3=["x","y"];function Y5(e){return e.type==="interval"||e.type==="time"}var Qst=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="cartesian2d",r.dimensions=A3,r}return t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var r=this.getAxis("x").scale,n=this.getAxis("y").scale;if(!(!Y5(r)||!Y5(n))){var i=r.getExtent(),o=n.getExtent(),s=this.dataToPoint([i[0],o[0]]),a=this.dataToPoint([i[1],o[1]]),l=i[1]-i[0],u=o[1]-o[0];if(!(!l||!u)){var c=(a[0]-s[0])/l,f=(a[1]-s[1])/u,h=s[0]-i[0]*c,d=s[1]-o[0]*f,p=this._transform=[c,0,0,f,h,d];this._invTransform=K1([],p)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(r){var n=this.getAxis("x"),i=this.getAxis("y");return n.contain(n.toLocalCoord(r[0]))&&i.contain(i.toLocalCoord(r[1]))},t.prototype.containData=function(r){return this.getAxis("x").containData(r[0])&&this.getAxis("y").containData(r[1])},t.prototype.containZone=function(r,n){var i=this.dataToPoint(r),o=this.dataToPoint(n),s=this.getArea(),a=new ue(i[0],i[1],o[0]-i[0],o[1]-i[1]);return s.intersect(a)},t.prototype.dataToPoint=function(r,n,i){i=i||[];var o=r[0],s=r[1];if(this._transform&&o!=null&&isFinite(o)&&s!=null&&isFinite(s))return on(i,r,this._transform);var a=this.getAxis("x"),l=this.getAxis("y");return i[0]=a.toGlobalCoord(a.dataToCoord(o,n)),i[1]=l.toGlobalCoord(l.dataToCoord(s,n)),i},t.prototype.clampData=function(r,n){var i=this.getAxis("x").scale,o=this.getAxis("y").scale,s=i.getExtent(),a=o.getExtent(),l=i.parse(r[0]),u=o.parse(r[1]);return n=n||[],n[0]=Math.min(Math.max(Math.min(s[0],s[1]),l),Math.max(s[0],s[1])),n[1]=Math.min(Math.max(Math.min(a[0],a[1]),u),Math.max(a[0],a[1])),n},t.prototype.pointToData=function(r,n){var i=[];if(this._invTransform)return on(i,r,this._invTransform);var o=this.getAxis("x"),s=this.getAxis("y");return i[0]=o.coordToData(o.toLocalCoord(r[0]),n),i[1]=s.coordToData(s.toLocalCoord(r[1]),n),i},t.prototype.getOtherAxis=function(r){return this.getAxis(r.dim==="x"?"y":"x")},t.prototype.getArea=function(){var r=this.getAxis("x").getGlobalExtent(),n=this.getAxis("y").getGlobalExtent(),i=Math.min(r[0],r[1]),o=Math.min(n[0],n[1]),s=Math.max(r[0],r[1])-i,a=Math.max(n[0],n[1])-o;return new ue(i,o,s,a)},t}(Jst),tat=function(e){St(t,e);function t(r,n,i,o,s){var a=e.call(this,r,n,i)||this;return a.index=0,a.type=o||"value",a.position=s||"bottom",a}return t.prototype.isHorizontal=function(){var r=this.position;return r==="top"||r==="bottom"},t.prototype.getGlobalExtent=function(r){var n=this.getExtent();return n[0]=this.toGlobalCoord(n[0]),n[1]=this.toGlobalCoord(n[1]),r&&n[0]>n[1]&&n.reverse(),n},t.prototype.pointToData=function(r,n){return this.coordToData(this.toLocalCoord(r[this.dim==="x"?0:1]),n)},t.prototype.setCategorySortInfo=function(r){if(this.type!=="category")return!1;this.model.option.categorySortInfo=r,this.scale.setSortInfo(r)},t}($ot);const eat=tat;function M3(e,t,r){r=r||{};var n=e.coordinateSystem,i=t.axis,o={},s=i.getAxesOnZeroOf()[0],a=i.position,l=s?"onZero":a,u=i.dim,c=n.getRect(),f=[c.x,c.x+c.width,c.y,c.y+c.height],h={left:0,right:1,top:0,bottom:1,onZero:2},d=t.get("offset")||0,p=u==="x"?[f[2]-d,f[3]+d]:[f[0]-d,f[1]+d];if(s){var v=s.toGlobalCoord(s.dataToCoord(0));p[h.onZero]=Math.max(Math.min(v,p[1]),p[0])}o.position=[u==="y"?p[h[l]]:f[0],u==="x"?p[h[l]]:f[3]],o.rotation=Math.PI/2*(u==="x"?0:1);var m={top:-1,bottom:1,left:-1,right:1};o.labelDirection=o.tickDirection=o.nameDirection=m[a],o.labelOffset=s?p[h[a]]-p[h.onZero]:0,t.get(["axisTick","inside"])&&(o.tickDirection=-o.tickDirection),xi(r.labelInside,t.get(["axisLabel","inside"]))&&(o.labelDirection=-o.labelDirection);var g=t.get(["axisLabel","rotate"]);return o.labelRotate=l==="top"?-g:g,o.z2=1,o}function q5(e){return e.get("coordinateSystem")==="cartesian2d"}function Z5(e){var t={xAxisModel:null,yAxisModel:null};return z(t,function(r,n){var i=n.replace(/Model$/,""),o=e.getReferringComponents(i,Li).models[0];t[n]=o}),t}var U2=Math.log;function rat(e,t,r){var n=Xp.prototype,i=n.getTicks.call(r),o=n.getTicks.call(r,!0),s=i.length-1,a=n.getInterval.call(r),l=vz(e,t),u=l.extent,c=l.fixMin,f=l.fixMax;if(e.type==="log"){var h=U2(e.base);u=[U2(u[0])/h,U2(u[1])/h]}e.setExtent(u[0],u[1]),e.calcNiceExtent({splitNumber:s,fixMin:c,fixMax:f});var d=n.getExtent.call(e);c&&(u[0]=d[0]),f&&(u[1]=d[1]);var p=n.getInterval.call(e),v=u[0],m=u[1];if(c&&f)p=(m-v)/s;else if(c)for(m=u[0]+p*s;m<u[1]&&isFinite(m)&&isFinite(u[1]);)p=N2(p),m=u[0]+p*s;else if(f)for(v=u[1]-p*s;v>u[0]&&isFinite(v)&&isFinite(u[0]);)p=N2(p),v=u[1]-p*s;else{var g=e.getTicks().length-1;g>s&&(p=N2(p));var _=p*s;m=Math.ceil(u[1]/p)*p,v=Qe(m-_),v<0&&u[0]>=0?(v=0,m=Qe(_)):m>0&&u[1]<=0&&(m=0,v=-Qe(_))}var b=(i[0].value-o[0].value)/a,w=(i[s].value-o[s].value)/a;n.setExtent.call(e,v+p*b,m+p*w),n.setInterval.call(e,p),(b||w)&&n.setNiceExtent.call(e,v+p,m-p)}var nat=function(){function e(t,r,n){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=A3,this._initCartesian(t,r,n),this.model=t}return e.prototype.getRect=function(){return this._rect},e.prototype.update=function(t,r){var n=this._axesMap;this._updateScale(t,this.model);function i(s){var a,l=ge(s),u=l.length;if(!!u){for(var c=[],f=u-1;f>=0;f--){var h=+l[f],d=s[h],p=d.model,v=d.scale;k3(v)&&p.get("alignTicks")&&p.get("interval")==null?c.push(d):(S5(v,p),k3(v)&&(a=d))}c.length&&(a||(a=c.pop(),S5(a.scale,a.model)),z(c,function(m){rat(m.scale,m.model,a.scale)}))}}i(n.x),i(n.y);var o={};z(n.x,function(s){K5(n,"y",s,o)}),z(n.y,function(s){K5(n,"x",s,o)}),this.resize(this.model,r)},e.prototype.resize=function(t,r,n){var i=t.getBoxLayoutParams(),o=!n&&t.get("containLabel"),s=Ia(i,{width:r.getWidth(),height:r.getHeight()});this._rect=s;var a=this._axesList;l(),o&&(z(a,function(u){if(!u.model.get(["axisLabel","inside"])){var c=Pot(u);if(c){var f=u.isHorizontal()?"height":"width",h=u.model.get(["axisLabel","margin"]);s[f]-=c[f]+h,u.position==="top"?s.y+=c.height+h:u.position==="left"&&(s.x+=c.width+h)}}}),l()),z(this._coordsList,function(u){u.calcAffineTransform()});function l(){z(a,function(u){var c=u.isHorizontal(),f=c?[0,s.width]:[0,s.height],h=u.inverse?1:0;u.setExtent(f[h],f[1-h]),iat(u,c?s.x:s.y)})}},e.prototype.getAxis=function(t,r){var n=this._axesMap[t];if(n!=null)return n[r||0]},e.prototype.getAxes=function(){return this._axesList.slice()},e.prototype.getCartesian=function(t,r){if(t!=null&&r!=null){var n="x"+t+"y"+r;return this._coordsMap[n]}Rt(t)&&(r=t.yAxisIndex,t=t.xAxisIndex);for(var i=0,o=this._coordsList;i<o.length;i++)if(o[i].getAxis("x").index===t||o[i].getAxis("y").index===r)return o[i]},e.prototype.getCartesians=function(){return this._coordsList.slice()},e.prototype.convertToPixel=function(t,r,n){var i=this._findConvertTarget(r);return i.cartesian?i.cartesian.dataToPoint(n):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(n)):null},e.prototype.convertFromPixel=function(t,r,n){var i=this._findConvertTarget(r);return i.cartesian?i.cartesian.pointToData(n):i.axis?i.axis.coordToData(i.axis.toLocalCoord(n)):null},e.prototype._findConvertTarget=function(t){var r=t.seriesModel,n=t.xAxisModel||r&&r.getReferringComponents("xAxis",Li).models[0],i=t.yAxisModel||r&&r.getReferringComponents("yAxis",Li).models[0],o=t.gridModel,s=this._coordsList,a,l;if(r)a=r.coordinateSystem,he(s,a)<0&&(a=null);else if(n&&i)a=this.getCartesian(n.componentIndex,i.componentIndex);else if(n)l=this.getAxis("x",n.componentIndex);else if(i)l=this.getAxis("y",i.componentIndex);else if(o){var u=o.coordinateSystem;u===this&&(a=this._coordsList[0])}return{cartesian:a,axis:l}},e.prototype.containPoint=function(t){var r=this._coordsList[0];if(r)return r.containPoint(t)},e.prototype._initCartesian=function(t,r,n){var i=this,o=this,s={left:!1,right:!1,top:!1,bottom:!1},a={x:{},y:{}},l={x:0,y:0};if(r.eachComponent("xAxis",u("x"),this),r.eachComponent("yAxis",u("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=a,z(a.x,function(c,f){z(a.y,function(h,d){var p="x"+f+"y"+d,v=new Qst(p);v.master=i,v.model=t,i._coordsMap[p]=v,i._coordsList.push(v),v.addAxis(c),v.addAxis(h)})});function u(c){return function(f,h){if(!!W2(f,t)){var d=f.get("position");c==="x"?d!=="top"&&d!=="bottom"&&(d=s.bottom?"top":"bottom"):d!=="left"&&d!=="right"&&(d=s.left?"right":"left"),s[d]=!0;var p=new eat(c,Tot(f),[0,0],f.get("type"),d),v=p.type==="category";p.onBand=v&&f.get("boundaryGap"),p.inverse=f.get("inverse"),f.axis=p,p.model=f,p.grid=o,p.index=h,o._axesList.push(p),a[c][h]=p,l[c]++}}}},e.prototype._updateScale=function(t,r){z(this._axesList,function(i){if(i.scale.setExtent(1/0,-1/0),i.type==="category"){var o=i.model.get("categorySortInfo");i.scale.setSortInfo(o)}}),t.eachSeries(function(i){if(q5(i)){var o=Z5(i),s=o.xAxisModel,a=o.yAxisModel;if(!W2(s,r)||!W2(a,r))return;var l=this.getCartesian(s.componentIndex,a.componentIndex),u=i.getData(),c=l.getAxis("x"),f=l.getAxis("y");n(u,c),n(u,f)}},this);function n(i,o){z(Cot(i,o.dim),function(s){o.scale.unionExtentFromData(i,s)})}},e.prototype.getTooltipAxes=function(t){var r=[],n=[];return z(this.getCartesians(),function(i){var o=t!=null&&t!=="auto"?i.getAxis(t):i.getBaseAxis(),s=i.getOtherAxis(o);he(r,o)<0&&r.push(o),he(n,s)<0&&n.push(s)}),{baseAxes:r,otherAxes:n}},e.create=function(t,r){var n=[];return t.eachComponent("grid",function(i,o){var s=new e(i,t,r);s.name="grid_"+o,s.resize(i,r,!0),i.coordinateSystem=s,n.push(s)}),t.eachSeries(function(i){if(!!q5(i)){var o=Z5(i),s=o.xAxisModel,a=o.yAxisModel,l=s.getCoordSysModel(),u=l.coordinateSystem;i.coordinateSystem=u.getCartesian(s.componentIndex,a.componentIndex)}}),n},e.dimensions=A3,e}();function W2(e,t){return e.getCoordSysModel()===t}function K5(e,t,r,n){r.getAxesOnZeroOf=function(){return o?[o]:[]};var i=e[t],o,s=r.model,a=s.get(["axisLine","onZero"]),l=s.get(["axisLine","onZeroAxisIndex"]);if(!a)return;if(l!=null)J5(i[l])&&(o=i[l]);else for(var u in i)if(i.hasOwnProperty(u)&&J5(i[u])&&!n[c(i[u])]){o=i[u];break}o&&(n[c(o)]=!0);function c(f){return f.dim+"_"+f.index}}function J5(e){return e&&e.type!=="category"&&e.type!=="time"&&kot(e)}function iat(e,t){var r=e.getExtent(),n=r[0]+r[1];e.toGlobalCoord=e.dim==="x"?function(i){return i+t}:function(i){return n-i+t},e.toLocalCoord=e.dim==="x"?function(i){return i-t}:function(i){return n-i+t}}const oat=nat;var ga=Math.PI,Jl=function(){function e(t,r){this.group=new Ne,this.opt=r,this.axisModel=t,ne(r,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var n=new Ne({x:r.position[0],y:r.position[1],rotation:r.rotation});n.updateTransform(),this._transformGroup=n}return e.prototype.hasBuilder=function(t){return!!Q5[t]},e.prototype.add=function(t){Q5[t](this.opt,this.axisModel,this.group,this._transformGroup)},e.prototype.getGroup=function(){return this.group},e.innerTextLayout=function(t,r,n){var i=y7(r-t),o,s;return Bm(i)?(s=n>0?"top":"bottom",o="center"):Bm(i-ga)?(s=n>0?"bottom":"top",o="center"):(s="middle",i>0&&i<ga?o=n>0?"right":"left":o=n>0?"left":"right"),{rotation:i,textAlign:o,textVerticalAlign:s}},e.makeAxisEventDataBase=function(t){var r={componentType:t.mainType,componentIndex:t.componentIndex};return r[t.mainType+"Index"]=t.componentIndex,r},e.isLabelSilent=function(t){var r=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||r&&r.show)},e}(),Q5={axisLine:function(e,t,r,n){var i=t.get(["axisLine","show"]);if(i==="auto"&&e.handleAutoShown&&(i=e.handleAutoShown("axisLine")),!!i){var o=t.axis.getExtent(),s=n.transform,a=[o[0],0],l=[o[1],0],u=a[0]>l[0];s&&(on(a,a,s),on(l,l,s));var c=at({lineCap:"round"},t.getModel(["axisLine","lineStyle"]).getLineStyle()),f=new La({shape:{x1:a[0],y1:a[1],x2:l[0],y2:l[1]},style:c,strokeContainThreshold:e.strokeContainThreshold||5,silent:!0,z2:1});cp(f.shape,f.style.lineWidth),f.anid="line",r.add(f);var h=t.get(["axisLine","symbol"]);if(h!=null){var d=t.get(["axisLine","symbolSize"]);Mt(h)&&(h=[h,h]),(Mt(d)||Se(d))&&(d=[d,d]);var p=CP(t.get(["axisLine","symbolOffset"])||0,d),v=d[0],m=d[1];z([{rotate:e.rotation+Math.PI/2,offset:p[0],r:0},{rotate:e.rotation-Math.PI/2,offset:p[1],r:Math.sqrt((a[0]-l[0])*(a[0]-l[0])+(a[1]-l[1])*(a[1]-l[1]))}],function(g,_){if(h[_]!=="none"&&h[_]!=null){var b=Ui(h[_],-v/2,-m/2,v,m,c.stroke,!0),w=g.r+g.offset,T=u?l:a;b.attr({rotation:g.rotate,x:T[0]+w*Math.cos(e.rotation),y:T[1]-w*Math.sin(e.rotation),silent:!0,z2:11}),r.add(b)}})}}},axisTickLabel:function(e,t,r,n){var i=lat(r,n,t,e),o=cat(r,n,t,e);if(aat(t,o,i),uat(r,n,t,e.tickDirection),t.get(["axisLabel","hideOverlap"])){var s=Vot(Lt(o,function(a){return{label:a,priority:a.z2,defaultAttr:{ignore:a.ignore}}}));Uot(s)}},axisName:function(e,t,r,n){var i=xi(e.axisName,t.get("name"));if(!!i){var o=t.get("nameLocation"),s=e.nameDirection,a=t.getModel("nameTextStyle"),l=t.get("nameGap")||0,u=t.axis.getExtent(),c=u[0]>u[1]?-1:1,f=[o==="start"?u[0]-c*l:o==="end"?u[1]+c*l:(u[0]+u[1])/2,e6(o)?e.labelOffset+s*l:0],h,d=t.get("nameRotate");d!=null&&(d=d*ga/180);var p;e6(o)?h=Jl.innerTextLayout(e.rotation,d!=null?d:e.rotation,s):(h=sat(e.rotation,o,d||0,u),p=e.axisNameAvailableWidth,p!=null&&(p=Math.abs(p/Math.sin(h.rotation)),!isFinite(p)&&(p=null)));var v=a.getFont(),m=t.get("nameTruncate",!0)||{},g=m.ellipsis,_=xi(e.nameTruncateMaxWidth,m.maxWidth,p),b=new rr({x:f[0],y:f[1],rotation:h.rotation,silent:Jl.isLabelSilent(t),style:yn(a,{text:i,font:v,overflow:"truncate",width:_,ellipsis:g,fill:a.getTextColor()||t.get(["axisLine","lineStyle","color"]),align:a.get("align")||h.textAlign,verticalAlign:a.get("verticalAlign")||h.textVerticalAlign}),z2:1});if(fP({el:b,componentModel:t,itemName:i}),b.__fullText=i,b.anid="name",t.get("triggerEvent")){var w=Jl.makeAxisEventDataBase(t);w.targetType="axisName",w.name=i,ae(b).eventData=w}n.add(b),b.updateTransform(),r.add(b),b.decomposeTransform()}}};function sat(e,t,r,n){var i=y7(r-e),o,s,a=n[0]>n[1],l=t==="start"&&!a||t!=="start"&&a;return Bm(i-ga/2)?(s=l?"bottom":"top",o="center"):Bm(i-ga*1.5)?(s=l?"top":"bottom",o="center"):(s="middle",i<ga*1.5&&i>ga/2?o=l?"left":"right":o=l?"right":"left"),{rotation:i,textAlign:o,textVerticalAlign:s}}function aat(e,t,r){if(!gz(e.axis)){var n=e.get(["axisLabel","showMinLabel"]),i=e.get(["axisLabel","showMaxLabel"]);t=t||[],r=r||[];var o=t[0],s=t[1],a=t[t.length-1],l=t[t.length-2],u=r[0],c=r[1],f=r[r.length-1],h=r[r.length-2];n===!1?(Wn(o),Wn(u)):t6(o,s)&&(n?(Wn(s),Wn(c)):(Wn(o),Wn(u))),i===!1?(Wn(a),Wn(f)):t6(l,a)&&(i?(Wn(l),Wn(h)):(Wn(a),Wn(f)))}}function Wn(e){e&&(e.ignore=!0)}function t6(e,t){var r=e&&e.getBoundingRect().clone(),n=t&&t.getBoundingRect().clone();if(!(!r||!n)){var i=Uk([]);return Wk(i,i,-e.rotation),r.applyTransform(jc([],i,e.getLocalTransform())),n.applyTransform(jc([],i,t.getLocalTransform())),r.intersect(n)}}function e6(e){return e==="middle"||e==="center"}function zz(e,t,r,n,i){for(var o=[],s=[],a=[],l=0;l<e.length;l++){var u=e[l].coord;s[0]=u,s[1]=0,a[0]=u,a[1]=r,t&&(on(s,s,t),on(a,a,t));var c=new La({shape:{x1:s[0],y1:s[1],x2:a[0],y2:a[1]},style:n,z2:2,autoBatch:!0,silent:!0});cp(c.shape,c.style.lineWidth),c.anid=i+"_"+e[l].tickValue,o.push(c)}return o}function lat(e,t,r,n){var i=r.axis,o=r.getModel("axisTick"),s=o.get("show");if(s==="auto"&&n.handleAutoShown&&(s=n.handleAutoShown("axisTick")),!(!s||i.scale.isBlank())){for(var a=o.getModel("lineStyle"),l=n.tickDirection*o.get("length"),u=i.getTicksCoords(),c=zz(u,t.transform,l,ne(a.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}),"ticks"),f=0;f<c.length;f++)e.add(c[f]);return c}}function uat(e,t,r,n){var i=r.axis,o=r.getModel("minorTick");if(!(!o.get("show")||i.scale.isBlank())){var s=i.getMinorTicksCoords();if(!!s.length)for(var a=o.getModel("lineStyle"),l=n*o.get("length"),u=ne(a.getLineStyle(),ne(r.getModel("axisTick").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})),c=0;c<s.length;c++)for(var f=zz(s[c],t.transform,l,u,"minorticks_"+c),h=0;h<f.length;h++)e.add(f[h])}}function cat(e,t,r,n){var i=r.axis,o=xi(n.axisLabelShow,r.get(["axisLabel","show"]));if(!(!o||i.scale.isBlank())){var s=r.getModel("axisLabel"),a=s.get("margin"),l=i.getViewLabels(),u=(xi(n.labelRotate,s.get("rotate"))||0)*ga/180,c=Jl.innerTextLayout(n.rotation,u,n.labelDirection),f=r.getCategories&&r.getCategories(!0),h=[],d=Jl.isLabelSilent(r),p=r.get("triggerEvent");return z(l,function(v,m){var g=i.scale.type==="ordinal"?i.scale.getRawOrdinalNumber(v.tickValue):v.tickValue,_=v.formattedLabel,b=v.rawLabel,w=s;if(f&&f[g]){var T=f[g];Rt(T)&&T.textStyle&&(w=new Mr(T.textStyle,s,r.ecModel))}var S=w.getTextColor()||r.get(["axisLine","lineStyle","color"]),k=i.dataToCoord(g),A=new rr({x:k,y:n.labelOffset+n.labelDirection*a,rotation:c.rotation,silent:d,z2:10+(v.level||0),style:yn(w,{text:_,align:w.getShallow("align",!0)||c.textAlign,verticalAlign:w.getShallow("verticalAlign",!0)||w.getShallow("baseline",!0)||c.textVerticalAlign,fill:jt(S)?S(i.type==="category"?b:i.type==="value"?g+"":g,m):S})});if(A.anid="label_"+g,p){var C=Jl.makeAxisEventDataBase(r);C.targetType="axisLabel",C.value=b,C.tickIndex=m,i.type==="category"&&(C.dataIndex=g),ae(A).eventData=C}t.add(A),A.updateTransform(),h.push(A),e.add(A),A.decomposeTransform()}),h}}const Bz=Jl;function fat(e,t){var r={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return hat(r,e,t),r.seriesInvolved&&pat(r,e),r}function hat(e,t,r){var n=t.getComponent("tooltip"),i=t.getComponent("axisPointer"),o=i.get("link",!0)||[],s=[];z(r.getCoordinateSystems(),function(a){if(!a.axisPointerEnabled)return;var l=yp(a.model),u=e.coordSysAxesInfo[l]={};e.coordSysMap[l]=a;var c=a.model,f=c.getModel("tooltip",n);if(z(a.getAxes(),be(v,!1,null)),a.getTooltipAxes&&n&&f.get("show")){var h=f.get("trigger")==="axis",d=f.get(["axisPointer","type"])==="cross",p=a.getTooltipAxes(f.get(["axisPointer","axis"]));(h||d)&&z(p.baseAxes,be(v,d?"cross":!0,h)),d&&z(p.otherAxes,be(v,"cross",!1))}function v(m,g,_){var b=_.model.getModel("axisPointer",i),w=b.get("show");if(!(!w||w==="auto"&&!m&&!x3(b))){g==null&&(g=b.get("triggerTooltip")),b=m?dat(_,f,i,t,m,g):b;var T=b.get("snap"),S=yp(_.model),k=g||T||_.type==="category",A=e.axesInfo[S]={key:S,axis:_,coordSys:a,axisPointerModel:b,triggerTooltip:g,involveSeries:k,snap:T,useHandle:x3(b),seriesModels:[],linkGroup:null};u[S]=A,e.seriesInvolved=e.seriesInvolved||k;var C=vat(o,_);if(C!=null){var x=s[C]||(s[C]={axesInfo:{}});x.axesInfo[S]=A,x.mapper=o[C].mapper,A.linkGroup=x}}}})}function dat(e,t,r,n,i,o){var s=t.getModel("axisPointer"),a=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};z(a,function(h){l[h]=$t(s.get(h))}),l.snap=e.type!=="category"&&!!o,s.get("type")==="cross"&&(l.type="line");var u=l.label||(l.label={});if(u.show==null&&(u.show=!1),i==="cross"){var c=s.get(["label","show"]);if(u.show=c!=null?c:!0,!o){var f=l.lineStyle=s.get("crossStyle");f&&ne(u,f.textStyle)}}return e.model.getModel("axisPointer",new Mr(l,r,n))}function pat(e,t){t.eachSeries(function(r){var n=r.coordinateSystem,i=r.get(["tooltip","trigger"],!0),o=r.get(["tooltip","show"],!0);!n||i==="none"||i===!1||i==="item"||o===!1||r.get(["axisPointer","show"],!0)===!1||z(e.coordSysAxesInfo[yp(n.model)],function(s){var a=s.axis;n.getAxis(a.dim)===a&&(s.seriesModels.push(r),s.seriesDataCount==null&&(s.seriesDataCount=0),s.seriesDataCount+=r.getData().count())})})}function vat(e,t){for(var r=t.model,n=t.dim,i=0;i<e.length;i++){var o=e[i]||{};if(j2(o[n+"AxisId"],r.id)||j2(o[n+"AxisIndex"],r.componentIndex)||j2(o[n+"AxisName"],r.name))return i}}function j2(e,t){return e==="all"||ht(e)&&he(e,t)>=0||e===t}function gat(e){var t=$P(e);if(!!t){var r=t.axisPointerModel,n=t.axis.scale,i=r.option,o=r.get("status"),s=r.get("value");s!=null&&(s=n.parse(s));var a=x3(r);o==null&&(i.status=a?"show":"hide");var l=n.getExtent().slice();l[0]>l[1]&&l.reverse(),(s==null||s>l[1])&&(s=l[1]),s<l[0]&&(s=l[0]),i.value=s,a&&(i.status=t.axis.scale.isBlank()?"hide":"show")}}function $P(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[yp(e)]}function mat(e){var t=$P(e);return t&&t.axisPointerModel}function x3(e){return!!e.get(["handle","show"])}function yp(e){return e.type+"||"+e.id}var r6={},_at=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i,o){this.axisPointerClass&&gat(r),e.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(r,i,!0)},t.prototype.updateAxisPointer=function(r,n,i,o){this._doUpdateAxisPointerClass(r,i,!1)},t.prototype.remove=function(r,n){var i=this._axisPointer;i&&i.remove(n)},t.prototype.dispose=function(r,n){this._disposeAxisPointer(n),e.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(r,n,i){var o=t.getAxisPointerClass(this.axisPointerClass);if(!!o){var s=mat(r);s?(this._axisPointer||(this._axisPointer=new o)).render(r,s,n,i):this._disposeAxisPointer(n)}},t.prototype._disposeAxisPointer=function(r){this._axisPointer&&this._axisPointer.dispose(r),this._axisPointer=null},t.registerAxisPointerClass=function(r,n){r6[r]=n},t.getAxisPointerClass=function(r){return r&&r6[r]},t.type="axis",t}(ci);const $z=_at;var L3=Re();function yat(e,t,r,n){var i=r.axis;if(!i.scale.isBlank()){var o=r.getModel("splitArea"),s=o.getModel("areaStyle"),a=s.get("color"),l=n.coordinateSystem.getRect(),u=i.getTicksCoords({tickModel:o,clamp:!0});if(!!u.length){var c=a.length,f=L3(e).splitAreaColors,h=Xt(),d=0;if(f)for(var p=0;p<u.length;p++){var v=f.get(u[p].tickValue);if(v!=null){d=(v+(c-1)*p)%c;break}}var m=i.toGlobalCoord(u[0].coord),g=s.getAreaStyle();a=ht(a)?a:[a];for(var p=1;p<u.length;p++){var _=i.toGlobalCoord(u[p].coord),b=void 0,w=void 0,T=void 0,S=void 0;i.isHorizontal()?(b=m,w=l.y,T=_-b,S=l.height,m=b+T):(b=l.x,w=m,T=l.width,S=_-w,m=w+S);var k=u[p-1].tickValue;k!=null&&h.set(k,d),t.add(new er({anid:k!=null?"area_"+k:null,shape:{x:b,y:w,width:T,height:S},style:ne({fill:a[d]},g),autoBatch:!0,silent:!0})),d=(d+1)%c}L3(e).splitAreaColors=h}}}function bat(e){L3(e).splitAreaColors=null}var wat=["axisLine","axisTickLabel","axisName"],Sat=["splitArea","splitLine","minorSplitLine"],Vz=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="CartesianAxisPointer",r}return t.prototype.render=function(r,n,i,o){this.group.removeAll();var s=this._axisGroup;if(this._axisGroup=new Ne,this.group.add(this._axisGroup),!!r.get("show")){var a=r.getCoordSysModel(),l=M3(a,r),u=new Bz(r,at({handleAutoShown:function(f){for(var h=a.coordinateSystem.getCartesians(),d=0;d<h.length;d++)if(k3(h[d].getOtherAxis(r.axis).scale))return!0;return!1}},l));z(wat,u.add,u),this._axisGroup.add(u.getGroup()),z(Sat,function(f){r.get([f,"show"])&&Tat[f](this,this._axisGroup,r,a)},this);var c=o&&o.type==="changeAxisOrder"&&o.isInitSort;c||yN(s,this._axisGroup,r),e.prototype.render.call(this,r,n,i,o)}},t.prototype.remove=function(){bat(this)},t.type="cartesianAxis",t}($z),Tat={splitLine:function(e,t,r,n){var i=r.axis;if(!i.scale.isBlank()){var o=r.getModel("splitLine"),s=o.getModel("lineStyle"),a=s.get("color");a=ht(a)?a:[a];for(var l=n.coordinateSystem.getRect(),u=i.isHorizontal(),c=0,f=i.getTicksCoords({tickModel:o}),h=[],d=[],p=s.getLineStyle(),v=0;v<f.length;v++){var m=i.toGlobalCoord(f[v].coord);u?(h[0]=m,h[1]=l.y,d[0]=m,d[1]=l.y+l.height):(h[0]=l.x,h[1]=m,d[0]=l.x+l.width,d[1]=m);var g=c++%a.length,_=f[v].tickValue,b=new La({anid:_!=null?"line_"+f[v].tickValue:null,autoBatch:!0,shape:{x1:h[0],y1:h[1],x2:d[0],y2:d[1]},style:ne({stroke:a[g]},p),silent:!0});cp(b.shape,p.lineWidth),t.add(b)}}},minorSplitLine:function(e,t,r,n){var i=r.axis,o=r.getModel("minorSplitLine"),s=o.getModel("lineStyle"),a=n.coordinateSystem.getRect(),l=i.isHorizontal(),u=i.getMinorTicksCoords();if(!!u.length)for(var c=[],f=[],h=s.getLineStyle(),d=0;d<u.length;d++)for(var p=0;p<u[d].length;p++){var v=i.toGlobalCoord(u[d][p].coord);l?(c[0]=v,c[1]=a.y,f[0]=v,f[1]=a.y+a.height):(c[0]=a.x,c[1]=v,f[0]=a.x+a.width,f[1]=v);var m=new La({anid:"minor_line_"+u[d][p].tickValue,autoBatch:!0,shape:{x1:c[0],y1:c[1],x2:f[0],y2:f[1]},style:h,silent:!0});cp(m.shape,h.lineWidth),t.add(m)}},splitArea:function(e,t,r,n){yat(e,t,r,n)}},Uz=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="xAxis",t}(Vz),kat=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=Uz.type,r}return t.type="yAxis",t}(Vz),Pat=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="grid",r}return t.prototype.render=function(r,n){this.group.removeAll(),r.get("show")&&this.group.add(new er({shape:r.coordinateSystem.getRect(),style:ne({fill:r.get("backgroundColor")},r.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(ci),n6={offset:0};function Wz(e){e.registerComponentView(Pat),e.registerComponentModel(Gst),e.registerCoordinateSystem("cartesian2d",oat),H5(e,"x",C3,n6),H5(e,"y",C3,n6),e.registerComponentView(Uz),e.registerComponentView(kat),e.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}function Au(e){yr(Wz),e.registerSeriesModel(Fst),e.registerChartView(Wst),e.registerLayout(zP("scatter"))}var i6="\0_ec_interaction_mutex";function o6(e,t){return!!Eat(e)[t]}function Eat(e){return e[i6]||(e[i6]={})}Pu({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},Hr);var Cat=function(e){St(t,e);function t(r){var n=e.call(this)||this;n._zr=r;var i=Vt(n._mousedownHandler,n),o=Vt(n._mousemoveHandler,n),s=Vt(n._mouseupHandler,n),a=Vt(n._mousewheelHandler,n),l=Vt(n._pinchHandler,n);return n.enable=function(u,c){this.disable(),this._opt=ne($t(c)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),u==null&&(u=!0),(u===!0||u==="move"||u==="pan")&&(r.on("mousedown",i),r.on("mousemove",o),r.on("mouseup",s)),(u===!0||u==="scale"||u==="zoom")&&(r.on("mousewheel",a),r.on("pinch",l))},n.disable=function(){r.off("mousedown",i),r.off("mousemove",o),r.off("mouseup",s),r.off("mousewheel",a),r.off("pinch",l)},n}return t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(r){this.pointerChecker=r},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(r){if(!XA(r)){for(var n=r.target;n;){if(n.draggable)return;n=n.__hostTarget||n.parent}var i=r.offsetX,o=r.offsetY;this.pointerChecker&&this.pointerChecker(r,i,o)&&(this._x=i,this._y=o,this._dragging=!0)}},t.prototype._mousemoveHandler=function(r){if(!(!this._dragging||!tm("moveOnMouseMove",r,this._opt)||r.gestureEvent==="pinch"||o6(this._zr,"globalPan"))){var n=r.offsetX,i=r.offsetY,o=this._x,s=this._y,a=n-o,l=i-s;this._x=n,this._y=i,this._opt.preventDefaultMouseMove&&su(r.event),jz(this,"pan","moveOnMouseMove",r,{dx:a,dy:l,oldX:o,oldY:s,newX:n,newY:i,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(r){XA(r)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(r){var n=tm("zoomOnMouseWheel",r,this._opt),i=tm("moveOnMouseWheel",r,this._opt),o=r.wheelDelta,s=Math.abs(o),a=r.offsetX,l=r.offsetY;if(!(o===0||!n&&!i)){if(n){var u=s>3?1.4:s>1?1.2:1.1,c=o>0?u:1/u;G2(this,"zoom","zoomOnMouseWheel",r,{scale:c,originX:a,originY:l,isAvailableBehavior:null})}if(i){var f=Math.abs(o),h=(o>0?1:-1)*(f>3?.4:f>1?.15:.05);G2(this,"scrollMove","moveOnMouseWheel",r,{scrollDelta:h,originX:a,originY:l,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(r){if(!o6(this._zr,"globalPan")){var n=r.pinchScale>1?1.1:1/1.1;G2(this,"zoom",null,r,{scale:n,originX:r.pinchX,originY:r.pinchY,isAvailableBehavior:null})}},t}(Hi);function G2(e,t,r,n,i){e.pointerChecker&&e.pointerChecker(n,i.originX,i.originY)&&(su(n.event),jz(e,t,r,n,i))}function jz(e,t,r,n,i){i.isAvailableBehavior=Vt(tm,null,r,n),e.trigger(t,i)}function tm(e,t,r){var n=r[e];return!e||n&&(!Mt(n)||t.event[n+"Key"])}const Aat=Cat;function Mat(e,t,r){var n=e.target;n.x+=t,n.y+=r,n.dirty()}function xat(e,t,r,n){var i=e.target,o=e.zoomLimit,s=e.zoom=e.zoom||1;if(s*=t,o){var a=o.min||0,l=o.max||1/0;s=Math.max(Math.min(l,s),a)}var u=s/e.zoom;e.zoom=s,i.x-=(r-i.x)*(u-1),i.y-=(n-i.y)*(u-1),i.scaleX*=u,i.scaleY*=u,i.dirty()}var Lat={axisPointer:1,tooltip:1,brush:1};function Iat(e,t,r){var n=t.getComponentByElement(e.topTarget),i=n&&n.coordinateSystem;return n&&n!==r&&!Lat.hasOwnProperty(n.mainType)&&i&&i.model!==r}var s6=on,Oat=function(e){St(t,e);function t(r){var n=e.call(this)||this;return n.type="view",n.dimensions=["x","y"],n._roamTransformable=new zl,n._rawTransformable=new zl,n.name=r,n}return t.prototype.setBoundingRect=function(r,n,i,o){return this._rect=new ue(r,n,i,o),this._rect},t.prototype.getBoundingRect=function(){return this._rect},t.prototype.setViewRect=function(r,n,i,o){this._transformTo(r,n,i,o),this._viewRect=new ue(r,n,i,o)},t.prototype._transformTo=function(r,n,i,o){var s=this.getBoundingRect(),a=this._rawTransformable;a.transform=s.calculateTransform(new ue(r,n,i,o));var l=a.parent;a.parent=null,a.decomposeTransform(),a.parent=l,this._updateTransform()},t.prototype.setCenter=function(r,n){!r||(this._center=[Ye(r[0],n.getWidth()),Ye(r[1],n.getHeight())],this._updateCenterAndZoom())},t.prototype.setZoom=function(r){r=r||1;var n=this.zoomLimit;n&&(n.max!=null&&(r=Math.min(n.max,r)),n.min!=null&&(r=Math.max(n.min,r))),this._zoom=r,this._updateCenterAndZoom()},t.prototype.getDefaultCenter=function(){var r=this.getBoundingRect(),n=r.x+r.width/2,i=r.y+r.height/2;return[n,i]},t.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},t.prototype.getZoom=function(){return this._zoom||1},t.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},t.prototype._updateCenterAndZoom=function(){var r=this._rawTransformable.getLocalTransform(),n=this._roamTransformable,i=this.getDefaultCenter(),o=this.getCenter(),s=this.getZoom();o=on([],o,r),i=on([],i,r),n.originX=o[0],n.originY=o[1],n.x=i[0]-o[0],n.y=i[1]-o[1],n.scaleX=n.scaleY=s,this._updateTransform()},t.prototype._updateTransform=function(){var r=this._roamTransformable,n=this._rawTransformable;n.parent=r,r.updateTransform(),n.updateTransform(),K9(this.transform||(this.transform=[]),n.transform||af()),this._rawTransform=n.getLocalTransform(),this.invTransform=this.invTransform||[],K1(this.invTransform,this.transform),this.decomposeTransform()},t.prototype.getTransformInfo=function(){var r=this._rawTransformable,n=this._roamTransformable,i=new zl;return i.transform=n.transform,i.decomposeTransform(),{roam:{x:i.x,y:i.y,scaleX:i.scaleX,scaleY:i.scaleY},raw:{x:r.x,y:r.y,scaleX:r.scaleX,scaleY:r.scaleY}}},t.prototype.getViewRect=function(){return this._viewRect},t.prototype.getViewRectAfterRoam=function(){var r=this.getBoundingRect().clone();return r.applyTransform(this.transform),r},t.prototype.dataToPoint=function(r,n,i){var o=n?this._rawTransform:this.transform;return i=i||[],o?s6(i,r,o):WZ(i,r)},t.prototype.pointToData=function(r){var n=this.invTransform;return n?s6([],r,n):[r[0],r[1]]},t.prototype.convertToPixel=function(r,n,i){var o=a6(n);return o===this?o.dataToPoint(i):null},t.prototype.convertFromPixel=function(r,n,i){var o=a6(n);return o===this?o.pointToData(i):null},t.prototype.containPoint=function(r){return this.getViewRectAfterRoam().contain(r[0],r[1])},t.dimensions=["x","y"],t}(zl);function a6(e){var t=e.seriesModel;return t?t.coordinateSystem:null}const Rat=Oat;function l6(e,t){return e.pointToProjected?e.pointToProjected(t):e.pointToData(t)}function Dat(e,t,r,n){var i=e.getZoom(),o=e.getCenter(),s=t.zoom,a=e.projectedToPoint?e.projectedToPoint(o):e.dataToPoint(o);if(t.dx!=null&&t.dy!=null&&(a[0]-=t.dx,a[1]-=t.dy,e.setCenter(l6(e,a),n)),s!=null){if(r){var l=r.min||0,u=r.max||1/0;s=Math.max(Math.min(i*s,u),l)/i}e.scaleX*=s,e.scaleY*=s;var c=(t.originX-e.x)*(s-1),f=(t.originY-e.y)*(s-1);e.x-=c,e.y-=f,e.updateTransform(),e.setCenter(l6(e,a),n),e.setZoom(s*i)}return{center:e.getCenter(),zoom:e.getZoom()}}function Nat(e){var t=e;t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var r=[t],n,i;n=r.pop();)if(i=n.children,n.isExpand&&i.length)for(var o=i.length,s=o-1;s>=0;s--){var a=i[s];a.hierNode={defaultAncestor:null,ancestor:a,prelim:0,modifier:0,change:0,shift:0,i:s,thread:null},r.push(a)}}function Fat(e,t){var r=e.isExpand?e.children:[],n=e.parentNode.children,i=e.hierNode.i?n[e.hierNode.i-1]:null;if(r.length){$at(e);var o=(r[0].hierNode.prelim+r[r.length-1].hierNode.prelim)/2;i?(e.hierNode.prelim=i.hierNode.prelim+t(e,i),e.hierNode.modifier=e.hierNode.prelim-o):e.hierNode.prelim=o}else i&&(e.hierNode.prelim=i.hierNode.prelim+t(e,i));e.parentNode.hierNode.defaultAncestor=Vat(e,i,e.parentNode.hierNode.defaultAncestor||n[0],t)}function zat(e){var t=e.hierNode.prelim+e.parentNode.hierNode.modifier;e.setLayout({x:t},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier}function u6(e){return arguments.length?e:jat}function cd(e,t){return e-=Math.PI/2,{x:t*Math.cos(e),y:t*Math.sin(e)}}function Bat(e,t){return Ia(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function $at(e){for(var t=e.children,r=t.length,n=0,i=0;--r>=0;){var o=t[r];o.hierNode.prelim+=n,o.hierNode.modifier+=n,i+=o.hierNode.change,n+=o.hierNode.shift+i}}function Vat(e,t,r,n){if(t){for(var i=e,o=e,s=o.parentNode.children[0],a=t,l=i.hierNode.modifier,u=o.hierNode.modifier,c=s.hierNode.modifier,f=a.hierNode.modifier;a=H2(a),o=X2(o),a&&o;){i=H2(i),s=X2(s),i.hierNode.ancestor=e;var h=a.hierNode.prelim+f-o.hierNode.prelim-u+n(a,o);h>0&&(Wat(Uat(a,e,r),e,h),u+=h,l+=h),f+=a.hierNode.modifier,u+=o.hierNode.modifier,l+=i.hierNode.modifier,c+=s.hierNode.modifier}a&&!H2(i)&&(i.hierNode.thread=a,i.hierNode.modifier+=f-l),o&&!X2(s)&&(s.hierNode.thread=o,s.hierNode.modifier+=u-c,r=e)}return r}function H2(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function X2(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function Uat(e,t,r){return e.hierNode.ancestor.parentNode===t.parentNode?e.hierNode.ancestor:r}function Wat(e,t,r){var n=r/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=n,t.hierNode.shift+=r,t.hierNode.modifier+=r,t.hierNode.prelim+=r,e.hierNode.change+=n}function jat(e,t){return e.parentNode===t.parentNode?1:2}var Gat=function(){function e(){this.parentPoint=[],this.childPoints=[]}return e}(),Hat=function(e){St(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Gat},t.prototype.buildPath=function(r,n){var i=n.childPoints,o=i.length,s=n.parentPoint,a=i[0],l=i[o-1];if(o===1){r.moveTo(s[0],s[1]),r.lineTo(a[0],a[1]);return}var u=n.orient,c=u==="TB"||u==="BT"?0:1,f=1-c,h=Ye(n.forkPosition,1),d=[];d[c]=s[c],d[f]=s[f]+(l[f]-s[f])*h,r.moveTo(s[0],s[1]),r.lineTo(d[0],d[1]),r.moveTo(a[0],a[1]),d[c]=a[c],r.lineTo(d[0],d[1]),d[c]=l[c],r.lineTo(d[0],d[1]),r.lineTo(l[0],l[1]);for(var p=1;p<o-1;p++){var v=i[p];r.moveTo(v[0],v[1]),d[c]=v[c],r.lineTo(d[0],d[1])}},t}(pe),Xat=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._mainGroup=new Ne,r}return t.prototype.init=function(r,n){this._controller=new Aat(n.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(r,n,i){var o=r.getData(),s=r.layoutInfo,a=this._mainGroup,l=r.get("layout");l==="radial"?(a.x=s.x+s.width/2,a.y=s.y+s.height/2):(a.x=s.x,a.y=s.y),this._updateViewCoordSys(r,i),this._updateController(r,n,i);var u=this._data;o.diff(u).add(function(c){c6(o,c)&&f6(o,c,null,a,r)}).update(function(c,f){var h=u.getItemGraphicEl(f);if(!c6(o,c)){h&&d6(u,f,h,a,r);return}f6(o,c,h,a,r)}).remove(function(c){var f=u.getItemGraphicEl(c);f&&d6(u,c,f,a,r)}).execute(),this._nodeScaleRatio=r.get("nodeScaleRatio"),this._updateNodeAndLinkScale(r),r.get("expandAndCollapse")===!0&&o.eachItemGraphicEl(function(c,f){c.off("click").on("click",function(){i.dispatchAction({type:"treeExpandAndCollapse",seriesId:r.id,dataIndex:f})})}),this._data=o},t.prototype._updateViewCoordSys=function(r,n){var i=r.getData(),o=[];i.each(function(f){var h=i.getItemLayout(f);h&&!isNaN(h.x)&&!isNaN(h.y)&&o.push([+h.x,+h.y])});var s=[],a=[];aQ(o,s,a);var l=this._min,u=this._max;a[0]-s[0]===0&&(s[0]=l?l[0]:s[0]-1,a[0]=u?u[0]:a[0]+1),a[1]-s[1]===0&&(s[1]=l?l[1]:s[1]-1,a[1]=u?u[1]:a[1]+1);var c=r.coordinateSystem=new Rat;c.zoomLimit=r.get("scaleLimit"),c.setBoundingRect(s[0],s[1],a[0]-s[0],a[1]-s[1]),c.setCenter(r.get("center"),n),c.setZoom(r.get("zoom")),this.group.attr({x:c.x,y:c.y,scaleX:c.scaleX,scaleY:c.scaleY}),this._min=s,this._max=a},t.prototype._updateController=function(r,n,i){var o=this,s=this._controller,a=this._controllerHost,l=this.group;s.setPointerChecker(function(u,c,f){var h=l.getBoundingRect();return h.applyTransform(l.transform),h.contain(c,f)&&!Iat(u,i,r)}),s.enable(r.get("roam")),a.zoomLimit=r.get("scaleLimit"),a.zoom=r.coordinateSystem.getZoom(),s.off("pan").off("zoom").on("pan",function(u){Mat(a,u.dx,u.dy),i.dispatchAction({seriesId:r.id,type:"treeRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){xat(a,u.scale,u.originX,u.originY),i.dispatchAction({seriesId:r.id,type:"treeRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),o._updateNodeAndLinkScale(r),i.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(r){var n=r.getData(),i=this._getNodeGlobalScale(r);n.eachItemGraphicEl(function(o,s){o.setSymbolScale(i)})},t.prototype._getNodeGlobalScale=function(r){var n=r.coordinateSystem;if(n.type!=="view")return 1;var i=this._nodeScaleRatio,o=n.scaleX||1,s=n.getZoom(),a=(s-1)*i+1;return a/o},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t}(oi);function c6(e,t){var r=e.getItemLayout(t);return r&&!isNaN(r.x)&&!isNaN(r.y)}function f6(e,t,r,n,i){var o=!r,s=e.tree.getNodeByDataIndex(t),a=s.getModel(),l=s.getVisual("style").fill,u=s.isExpand===!1&&s.children.length!==0?l:"#fff",c=e.tree.root,f=s.parentNode===c?s:s.parentNode||s,h=e.getItemGraphicEl(f.dataIndex),d=f.getLayout(),p=h?{x:h.__oldX,y:h.__oldY,rawX:h.__radialOldRawX,rawY:h.__radialOldRawY}:d,v=s.getLayout();o?(r=new k_(e,t,null,{symbolInnerColor:u,useNameLabel:!0}),r.x=p.x,r.y=p.y):r.updateData(e,t,null,{symbolInnerColor:u,useNameLabel:!0}),r.__radialOldRawX=r.__radialRawX,r.__radialOldRawY=r.__radialRawY,r.__radialRawX=v.rawX,r.__radialRawY=v.rawY,n.add(r),e.setItemGraphicEl(t,r),r.__oldX=r.x,r.__oldY=r.y,_r(r,{x:v.x,y:v.y},i);var m=r.getSymbolPath();if(i.get("layout")==="radial"){var g=c.children[0],_=g.getLayout(),b=g.children.length,w=void 0,T=void 0;if(v.x===_.x&&s.isExpand===!0&&g.children.length){var S={x:(g.children[0].getLayout().x+g.children[b-1].getLayout().x)/2,y:(g.children[0].getLayout().y+g.children[b-1].getLayout().y)/2};w=Math.atan2(S.y-_.y,S.x-_.x),w<0&&(w=Math.PI*2+w),T=S.x<_.x,T&&(w=w-Math.PI)}else w=Math.atan2(v.y-_.y,v.x-_.x),w<0&&(w=Math.PI*2+w),s.children.length===0||s.children.length!==0&&s.isExpand===!1?(T=v.x<_.x,T&&(w=w-Math.PI)):(T=v.x>_.x,T||(w=w-Math.PI));var k=T?"left":"right",A=a.getModel("label"),C=A.get("rotate"),x=C*(Math.PI/180),I=m.getTextContent();I&&(m.setTextConfig({position:A.get("position")||k,rotation:C==null?-w:x,origin:"center"}),I.setStyle("verticalAlign","middle"))}var N=a.get(["emphasis","focus"]),B=N==="relative"?X9(s.getAncestorsIndices(),s.getDescendantIndices()):N==="ancestor"?s.getAncestorsIndices():N==="descendant"?s.getDescendantIndices():null;B&&(ae(r).focus=B),Yat(i,s,c,r,p,d,v,n),r.__edge&&(r.onHoverStateChange=function(V){if(V!=="blur"){var F=s.parentNode&&e.getItemGraphicEl(s.parentNode.dataIndex);F&&F.hoverState===Wp||t3(r.__edge,V)}})}function Yat(e,t,r,n,i,o,s,a){var l=t.getModel(),u=e.get("edgeShape"),c=e.get("layout"),f=e.getOrient(),h=e.get(["lineStyle","curveness"]),d=e.get("edgeForkPosition"),p=l.getModel("lineStyle").getLineStyle(),v=n.__edge;if(u==="curve")t.parentNode&&t.parentNode!==r&&(v||(v=n.__edge=new n_({shape:I3(c,f,h,i,i)})),_r(v,{shape:I3(c,f,h,o,s)},e));else if(u==="polyline"&&c==="orthogonal"&&t!==r&&t.children&&t.children.length!==0&&t.isExpand===!0){for(var m=t.children,g=[],_=0;_<m.length;_++){var b=m[_].getLayout();g.push([b.x,b.y])}v||(v=n.__edge=new Hat({shape:{parentPoint:[s.x,s.y],childPoints:[[s.x,s.y]],orient:f,forkPosition:d}})),_r(v,{shape:{parentPoint:[s.x,s.y],childPoints:g}},e)}v&&!(u==="polyline"&&!t.isExpand)&&(v.useStyle(ne({strokeNoScale:!0,fill:null},p)),lp(v,l,"lineStyle"),eP(v),a.add(v))}function h6(e,t,r,n,i){var o=t.tree.root,s=Gz(o,e),a=s.source,l=s.sourceLayout,u=t.getItemGraphicEl(e.dataIndex);if(!!u){var c=t.getItemGraphicEl(a.dataIndex),f=c.__edge,h=u.__edge||(a.isExpand===!1||a.children.length===1?f:void 0),d=n.get("edgeShape"),p=n.get("layout"),v=n.get("orient"),m=n.get(["lineStyle","curveness"]);h&&(d==="curve"?cu(h,{shape:I3(p,v,m,l,l),style:{opacity:0}},n,{cb:function(){r.remove(h)},removeOpt:i}):d==="polyline"&&n.get("layout")==="orthogonal"&&cu(h,{shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]]},style:{opacity:0}},n,{cb:function(){r.remove(h)},removeOpt:i}))}}function Gz(e,t){for(var r=t.parentNode===e?t:t.parentNode||t,n;n=r.getLayout(),n==null;)r=r.parentNode===e?r:r.parentNode||r;return{source:r,sourceLayout:n}}function d6(e,t,r,n,i){var o=e.tree.getNodeByDataIndex(t),s=e.tree.root,a=Gz(s,o).sourceLayout,l={duration:i.get("animationDurationUpdate"),easing:i.get("animationEasingUpdate")};cu(r,{x:a.x+1,y:a.y+1},i,{cb:function(){n.remove(r),e.setItemGraphicEl(t,null)},removeOpt:l}),r.fadeOut(null,e.hostModel,{fadeLabel:!0,animation:l}),o.children.forEach(function(u){h6(u,e,n,i,l)}),h6(o,e,n,i,l)}function I3(e,t,r,n,i){var o,s,a,l,u,c,f,h;if(e==="radial"){u=n.rawX,f=n.rawY,c=i.rawX,h=i.rawY;var d=cd(u,f),p=cd(u,f+(h-f)*r),v=cd(c,h+(f-h)*r),m=cd(c,h);return{x1:d.x||0,y1:d.y||0,x2:m.x||0,y2:m.y||0,cpx1:p.x||0,cpy1:p.y||0,cpx2:v.x||0,cpy2:v.y||0}}else u=n.x,f=n.y,c=i.x,h=i.y,(t==="LR"||t==="RL")&&(o=u+(c-u)*r,s=f,a=c+(u-c)*r,l=h),(t==="TB"||t==="BT")&&(o=u,s=f+(h-f)*r,a=c,l=h+(f-h)*r);return{x1:u,y1:f,x2:c,y2:h,cpx1:o,cpy1:s,cpx2:a,cpy2:l}}const qat=Xat;var si=Re();function Zat(e){var t=e.mainData,r=e.datas;r||(r={main:t},e.datasAttr={main:"data"}),e.datas=e.mainData=null,Hz(t,r,e),z(r,function(n){z(t.TRANSFERABLE_METHODS,function(i){n.wrapMethod(i,be(Kat,e))})}),t.wrapMethod("cloneShallow",be(Qat,e)),z(t.CHANGABLE_METHODS,function(n){t.wrapMethod(n,be(Jat,e))}),Vi(r[t.dataType]===t)}function Kat(e,t){if(rlt(this)){var r=at({},si(this).datas);r[this.dataType]=t,Hz(t,r,e)}else VP(t,this.dataType,si(this).mainData,e);return t}function Jat(e,t){return e.struct&&e.struct.update(),t}function Qat(e,t){return z(si(t).datas,function(r,n){r!==t&&VP(r.cloneShallow(),n,t,e)}),t}function tlt(e){var t=si(this).mainData;return e==null||t==null?t:si(t).datas[e]}function elt(){var e=si(this).mainData;return e==null?[{data:e}]:Lt(ge(si(e).datas),function(t){return{type:t,data:si(e).datas[t]}})}function rlt(e){return si(e).mainData===e}function Hz(e,t,r){si(e).datas={},z(t,function(n,i){VP(n,i,e,r)})}function VP(e,t,r,n){si(r).datas[t]=e,si(e).mainData=r,e.dataType=t,n.struct&&(e[n.structAttr]=n.struct,n.struct[n.datasAttr[t]]=e),e.getLinkedData=tlt,e.getLinkedDataAll=elt}var nlt=function(){function e(t,r){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=r}return e.prototype.isRemoved=function(){return this.dataIndex<0},e.prototype.eachNode=function(t,r,n){jt(t)&&(n=r,r=t,t=null),t=t||{},Mt(t)&&(t={order:t});var i=t.order||"preorder",o=this[t.attr||"children"],s;i==="preorder"&&(s=r.call(n,this));for(var a=0;!s&&a<o.length;a++)o[a].eachNode(t,r,n);i==="postorder"&&r.call(n,this)},e.prototype.updateDepthAndHeight=function(t){var r=0;this.depth=t;for(var n=0;n<this.children.length;n++){var i=this.children[n];i.updateDepthAndHeight(t+1),i.height>r&&(r=i.height)}this.height=r+1},e.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var r=0,n=this.children,i=n.length;r<i;r++){var o=n[r].getNodeById(t);if(o)return o}},e.prototype.contains=function(t){if(t===this)return!0;for(var r=0,n=this.children,i=n.length;r<i;r++){var o=n[r].contains(t);if(o)return o}},e.prototype.getAncestors=function(t){for(var r=[],n=t?this:this.parentNode;n;)r.push(n),n=n.parentNode;return r.reverse(),r},e.prototype.getAncestorsIndices=function(){for(var t=[],r=this;r;)t.push(r.dataIndex),r=r.parentNode;return t.reverse(),t},e.prototype.getDescendantIndices=function(){var t=[];return this.eachNode(function(r){t.push(r.dataIndex)}),t},e.prototype.getValue=function(t){var r=this.hostTree.data;return r.getStore().get(r.getDimensionIndex(t||"value"),this.dataIndex)},e.prototype.setLayout=function(t,r){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,r)},e.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},e.prototype.getModel=function(t){if(!(this.dataIndex<0)){var r=this.hostTree,n=r.data.getItemModel(this.dataIndex);return n.getModel(t)}},e.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},e.prototype.setVisual=function(t,r){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,r)},e.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},e.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},e.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},e.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,r=0;r<t.length;++r)if(t[r]===this)return r;return-1}return-1},e.prototype.isAncestorOf=function(t){for(var r=t.parentNode;r;){if(r===this)return!0;r=r.parentNode}return!1},e.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},e}(),ilt=function(){function e(t){this.type="tree",this._nodes=[],this.hostModel=t}return e.prototype.eachNode=function(t,r,n){this.root.eachNode(t,r,n)},e.prototype.getNodeByDataIndex=function(t){var r=this.data.getRawIndex(t);return this._nodes[r]},e.prototype.getNodeById=function(t){return this.root.getNodeById(t)},e.prototype.update=function(){for(var t=this.data,r=this._nodes,n=0,i=r.length;n<i;n++)r[n].dataIndex=-1;for(var n=0,i=t.count();n<i;n++)r[t.getRawIndex(n)].dataIndex=n},e.prototype.clearLayouts=function(){this.data.clearItemLayouts()},e.createTree=function(t,r,n){var i=new e(r),o=[],s=1;a(t);function a(c,f){var h=c.value;s=Math.max(s,ht(h)?h.length:1),o.push(c);var d=new nlt(ii(c.name,""),i);f?olt(d,f):i.root=d,i._nodes.push(d);var p=c.children;if(p)for(var v=0;v<p.length;v++)a(p[v],d)}i.root.updateDepthAndHeight(0);var l=tz(o,{coordDimensions:["value"],dimensionsCount:s}).dimensions,u=new Zl(l,r);return u.initData(o),n&&n(u),Zat({mainData:u,struct:i,structAttr:"tree"}),i.update(),i},e}();function olt(e,t){var r=t.children;e.parentNode!==t&&(r.push(e),e.parentNode=t)}const slt=ilt;function alt(e,t){for(var r=[];e;){var n=e.dataIndex;r.push({name:e.name,dataIndex:n,value:t.getRawValue(n)}),e=e.parentNode}return r.reverse(),r}var llt=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.hasSymbolVisual=!0,r.ignoreStyleOnData=!0,r}return t.prototype.getInitialData=function(r){var n={name:r.name,children:r.data},i=r.leaves||{},o=new Mr(i,this,this.ecModel),s=slt.createTree(n,this,a);function a(f){f.wrapMethod("getItemModel",function(h,d){var p=s.getNodeByDataIndex(d);return p&&p.children.length&&p.isExpand||(h.parentModel=o),h})}var l=0;s.eachNode("preorder",function(f){f.depth>l&&(l=f.depth)});var u=r.expandAndCollapse,c=u&&r.initialTreeDepth>=0?r.initialTreeDepth:l;return s.root.eachNode("preorder",function(f){var h=f.hostTree.data.getRawDataItem(f.dataIndex);f.isExpand=h&&h.collapsed!=null?!h.collapsed:f.depth<=c}),s.data},t.prototype.getOrient=function(){var r=this.get("orient");return r==="horizontal"?r="LR":r==="vertical"&&(r="TB"),r},t.prototype.setZoom=function(r){this.option.zoom=r},t.prototype.setCenter=function(r){this.option.center=r},t.prototype.formatTooltip=function(r,n,i){for(var o=this.getData().tree,s=o.root.children[0],a=o.getNodeByDataIndex(r),l=a.getValue(),u=a.name;a&&a!==s;)u=a.parentNode.name+"."+u,a=a.parentNode;return Oa("nameValue",{name:u,value:l,noValue:isNaN(l)||l==null})},t.prototype.getDataParams=function(r){var n=e.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(r);return n.treeAncestors=alt(i,this),n.collapsed=!i.isExpand,n},t.type="series.tree",t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t}(Ro);const ult=llt;function clt(e,t,r){for(var n=[e],i=[],o;o=n.pop();)if(i.push(o),o.isExpand){var s=o.children;if(s.length)for(var a=0;a<s.length;a++)n.push(s[a])}for(;o=i.pop();)t(o,r)}function Ph(e,t){for(var r=[e],n;n=r.pop();)if(t(n),n.isExpand){var i=n.children;if(i.length)for(var o=i.length-1;o>=0;o--)r.push(i[o])}}function flt(e,t){e.eachSeriesByType("tree",function(r){hlt(r,t)})}function hlt(e,t){var r=Bat(e,t);e.layoutInfo=r;var n=e.get("layout"),i=0,o=0,s=null;n==="radial"?(i=2*Math.PI,o=Math.min(r.height,r.width)/2,s=u6(function(b,w){return(b.parentNode===w.parentNode?1:2)/b.depth})):(i=r.width,o=r.height,s=u6());var a=e.getData().tree.root,l=a.children[0];if(l){Nat(a),clt(l,Fat,s),a.hierNode.modifier=-l.hierNode.prelim,Ph(l,zat);var u=l,c=l,f=l;Ph(l,function(b){var w=b.getLayout().x;w<u.getLayout().x&&(u=b),w>c.getLayout().x&&(c=b),b.depth>f.depth&&(f=b)});var h=u===c?1:s(u,c)/2,d=h-u.getLayout().x,p=0,v=0,m=0,g=0;if(n==="radial")p=i/(c.getLayout().x+h+d),v=o/(f.depth-1||1),Ph(l,function(b){m=(b.getLayout().x+d)*p,g=(b.depth-1)*v;var w=cd(m,g);b.setLayout({x:w.x,y:w.y,rawX:m,rawY:g},!0)});else{var _=e.getOrient();_==="RL"||_==="LR"?(v=o/(c.getLayout().x+h+d),p=i/(f.depth-1||1),Ph(l,function(b){g=(b.getLayout().x+d)*v,m=_==="LR"?(b.depth-1)*p:i-(b.depth-1)*p,b.setLayout({x:m,y:g},!0)})):(_==="TB"||_==="BT")&&(p=i/(c.getLayout().x+h+d),v=o/(f.depth-1||1),Ph(l,function(b){m=(b.getLayout().x+d)*p,g=_==="TB"?(b.depth-1)*v:o-(b.depth-1)*v,b.setLayout({x:m,y:g},!0)}))}}}function dlt(e){e.eachSeriesByType("tree",function(t){var r=t.getData(),n=r.tree;n.eachNode(function(i){var o=i.getModel(),s=o.getModel("itemStyle").getItemStyle(),a=r.ensureUniqueItemVisual(i.dataIndex,"style");at(a,s)})})}function plt(e){e.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,r){r.eachComponent({mainType:"series",subType:"tree",query:t},function(n){var i=t.dataIndex,o=n.getData().tree,s=o.getNodeByDataIndex(i);s.isExpand=!s.isExpand})}),e.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(t,r,n){r.eachComponent({mainType:"series",subType:"tree",query:t},function(i){var o=i.coordinateSystem,s=Dat(o,t,void 0,n);i.setCenter&&i.setCenter(s.center),i.setZoom&&i.setZoom(s.zoom)})})}function vlt(e){e.registerChartView(qat),e.registerSeriesModel(ult),e.registerLayout(flt),e.registerVisual(dlt),plt(e)}var bp=z,glt=Rt,Jm=-1,UP=function(){function e(t){var r=t.mappingMethod,n=t.type,i=this.option=$t(t);this.type=n,this.mappingMethod=r,this._normalizeData=ylt[r];var o=e.visualHandlers[n];this.applyVisual=o.applyVisual,this.getColorMapper=o.getColorMapper,this._normalizedToVisual=o._normalizedToVisual[r],r==="piecewise"?(Y2(i),mlt(i)):r==="category"?i.categories?_lt(i):Y2(i,!0):(Vi(r!=="linear"||i.dataExtent),Y2(i))}return e.prototype.mapValueToVisual=function(t){var r=this._normalizeData(t);return this._normalizedToVisual(r,t)},e.prototype.getNormalizer=function(){return Vt(this._normalizeData,this)},e.listVisualTypes=function(){return ge(e.visualHandlers)},e.isValidType=function(t){return e.visualHandlers.hasOwnProperty(t)},e.eachVisual=function(t,r,n){Rt(t)?z(t,r,n):r.call(n,t)},e.mapVisual=function(t,r,n){var i,o=ht(t)?[]:Rt(t)?{}:(i=!0,null);return e.eachVisual(t,function(s,a){var l=r.call(n,s,a);i?o=l:o[a]=l}),o},e.retrieveVisuals=function(t){var r={},n;return t&&bp(e.visualHandlers,function(i,o){t.hasOwnProperty(o)&&(r[o]=t[o],n=!0)}),n?r:null},e.prepareVisualTypes=function(t){if(ht(t))t=t.slice();else if(glt(t)){var r=[];bp(t,function(n,i){r.push(i)}),t=r}else return[];return t.sort(function(n,i){return i==="color"&&n!=="color"&&n.indexOf("color")===0?1:-1}),t},e.dependsOn=function(t,r){return r==="color"?!!(t&&t.indexOf(r)===0):t===r},e.findPieceIndex=function(t,r,n){for(var i,o=1/0,s=0,a=r.length;s<a;s++){var l=r[s].value;if(l!=null){if(l===t||Mt(l)&&l===t+"")return s;n&&h(l,s)}}for(var s=0,a=r.length;s<a;s++){var u=r[s],c=u.interval,f=u.close;if(c){if(c[0]===-1/0){if(dv(f[1],t,c[1]))return s}else if(c[1]===1/0){if(dv(f[0],c[0],t))return s}else if(dv(f[0],c[0],t)&&dv(f[1],t,c[1]))return s;n&&h(c[0],s),n&&h(c[1],s)}}if(n)return t===1/0?r.length-1:t===-1/0?0:i;function h(d,p){var v=Math.abs(d-t);v<o&&(o=v,i=p)}},e.visualHandlers={color:{applyVisual:Eh("color"),getColorMapper:function(){var t=this.option;return Vt(t.mappingMethod==="category"?function(r,n){return!n&&(r=this._normalizeData(r)),fd.call(this,r)}:function(r,n,i){var o=!!i;return!n&&(r=this._normalizeData(r)),i=By(r,t.parsedVisual,i),o?i:ds(i,"rgba")},this)},_normalizedToVisual:{linear:function(t){return ds(By(t,this.option.parsedVisual),"rgba")},category:fd,piecewise:function(t,r){var n=R3.call(this,r);return n==null&&(n=ds(By(t,this.option.parsedVisual),"rgba")),n},fixed:Il}},colorHue:hv(function(t,r){return $y(t,r)}),colorSaturation:hv(function(t,r){return $y(t,null,r)}),colorLightness:hv(function(t,r){return $y(t,null,null,r)}),colorAlpha:hv(function(t,r){return $S(t,r)}),decal:{applyVisual:Eh("decal"),_normalizedToVisual:{linear:null,category:fd,piecewise:null,fixed:null}},opacity:{applyVisual:Eh("opacity"),_normalizedToVisual:O3([0,1])},liftZ:{applyVisual:Eh("liftZ"),_normalizedToVisual:{linear:Il,category:Il,piecewise:Il,fixed:Il}},symbol:{applyVisual:function(t,r,n){var i=this.mapValueToVisual(t);n("symbol",i)},_normalizedToVisual:{linear:p6,category:fd,piecewise:function(t,r){var n=R3.call(this,r);return n==null&&(n=p6.call(this,t)),n},fixed:Il}},symbolSize:{applyVisual:Eh("symbolSize"),_normalizedToVisual:O3([0,1])}},e}();function mlt(e){var t=e.pieceList;e.hasSpecialVisual=!1,z(t,function(r,n){r.originIndex=n,r.visual!=null&&(e.hasSpecialVisual=!0)})}function _lt(e){var t=e.categories,r=e.categoryMap={},n=e.visual;if(bp(t,function(s,a){r[s]=a}),!ht(n)){var i=[];Rt(n)?bp(n,function(s,a){var l=r[a];i[l!=null?l:Jm]=s}):i[Jm]=n,n=Xz(e,i)}for(var o=t.length-1;o>=0;o--)n[o]==null&&(delete r[t[o]],t.pop())}function Y2(e,t){var r=e.visual,n=[];Rt(r)?bp(r,function(o){n.push(o)}):r!=null&&n.push(r);var i={color:1,symbol:1};!t&&n.length===1&&!i.hasOwnProperty(e.type)&&(n[1]=n[0]),Xz(e,n)}function hv(e){return{applyVisual:function(t,r,n){var i=this.mapValueToVisual(t);n("color",e(r("color"),i))},_normalizedToVisual:O3([0,1])}}function p6(e){var t=this.option.visual;return t[Math.round(_s(e,[0,1],[0,t.length-1],!0))]||{}}function Eh(e){return function(t,r,n){n(e,this.mapValueToVisual(t))}}function fd(e){var t=this.option.visual;return t[this.option.loop&&e!==Jm?e%t.length:e]}function Il(){return this.option.visual[0]}function O3(e){return{linear:function(t){return _s(t,e,this.option.visual,!0)},category:fd,piecewise:function(t,r){var n=R3.call(this,r);return n==null&&(n=_s(t,e,this.option.visual,!0)),n},fixed:Il}}function R3(e){var t=this.option,r=t.pieceList;if(t.hasSpecialVisual){var n=UP.findPieceIndex(e,r),i=r[n];if(i&&i.visual)return i.visual[this.type]}}function Xz(e,t){return e.visual=t,e.type==="color"&&(e.parsedVisual=Lt(t,function(r){var n=ni(r);return n||[0,0,0,1]})),t}var ylt={linear:function(e){return _s(e,this.option.dataExtent,[0,1],!0)},piecewise:function(e){var t=this.option.pieceList,r=UP.findPieceIndex(e,t,!0);if(r!=null)return _s(r,[0,t.length-1],[0,1],!0)},category:function(e){var t=this.option.categories?this.option.categoryMap[e]:e;return t==null?Jm:t},fixed:Hr};function dv(e,t,r){return e?t<=r:t<r}const bn=UP;var v6=La.prototype,q2=n_.prototype,Yz=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}();(function(e){St(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(Yz);function Z2(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var blt=function(e){St(t,e);function t(r){var n=e.call(this,r)||this;return n.type="ec-line",n}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Yz},t.prototype.buildPath=function(r,n){Z2(n)?v6.buildPath.call(this,r,n):q2.buildPath.call(this,r,n)},t.prototype.pointAt=function(r){return Z2(this.shape)?v6.pointAt.call(this,r):q2.pointAt.call(this,r)},t.prototype.tangentAt=function(r){var n=this.shape,i=Z2(n)?[n.x2-n.x1,n.y2-n.y1]:q2.tangentAt.call(this,r);return $k(i,i)},t}(pe);const wlt=blt;var K2=["fromSymbol","toSymbol"];function g6(e){return"_"+e+"Type"}function m6(e,t,r){var n=t.getItemVisual(r,e);if(!(!n||n==="none")){var i=t.getItemVisual(r,e+"Size"),o=t.getItemVisual(r,e+"Rotate"),s=t.getItemVisual(r,e+"Offset"),a=t.getItemVisual(r,e+"KeepAspect"),l=kF(i),u=CP(s||0,l),c=Ui(n,-l[0]/2+u[0],-l[1]/2+u[1],l[0],l[1],null,a);return c.__specifiedRotation=o==null||isNaN(o)?void 0:+o*Math.PI/180||0,c.name=e,c}}function Slt(e){var t=new wlt({name:"line",subPixelOptimize:!0});return D3(t.shape,e),t}function D3(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var r=t[2];r?(e.cpx1=r[0],e.cpy1=r[1]):(e.cpx1=NaN,e.cpy1=NaN)}var Tlt=function(e){St(t,e);function t(r,n,i){var o=e.call(this)||this;return o._createLine(r,n,i),o}return t.prototype._createLine=function(r,n,i){var o=r.hostModel,s=r.getItemLayout(n),a=Slt(s);a.shape.percent=0,Oo(a,{shape:{percent:1}},o,n),this.add(a),z(K2,function(l){var u=m6(l,r,n);this.add(u),this[g6(l)]=r.getItemVisual(n,l)},this),this._updateCommonStl(r,n,i)},t.prototype.updateData=function(r,n,i){var o=r.hostModel,s=this.childOfName("line"),a=r.getItemLayout(n),l={shape:{}};D3(l.shape,a),_r(s,l,o,n),z(K2,function(u){var c=r.getItemVisual(n,u),f=g6(u);if(this[f]!==c){this.remove(this.childOfName(u));var h=m6(u,r,n);this.add(h)}this[f]=c},this),this._updateCommonStl(r,n,i)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(r,n,i){var o=r.hostModel,s=this.childOfName("line"),a=i&&i.emphasisLineStyle,l=i&&i.blurLineStyle,u=i&&i.selectLineStyle,c=i&&i.labelStatesModels,f=i&&i.emphasisDisabled,h=i&&i.focus,d=i&&i.blurScope;if(!i||r.hasItemOption){var p=r.getItemModel(n),v=p.getModel("emphasis");a=v.getModel("lineStyle").getLineStyle(),l=p.getModel(["blur","lineStyle"]).getLineStyle(),u=p.getModel(["select","lineStyle"]).getLineStyle(),f=v.get("disabled"),h=v.get("focus"),d=v.get("blurScope"),c=Tu(p)}var m=r.getItemVisual(n,"style"),g=m.stroke;s.useStyle(m),s.style.fill=null,s.style.strokeNoScale=!0,s.ensureState("emphasis").style=a,s.ensureState("blur").style=l,s.ensureState("select").style=u,z(K2,function(S){var k=this.childOfName(S);if(k){k.setColor(g),k.style.opacity=m.opacity;for(var A=0;A<ui.length;A++){var C=ui[A],x=s.getState(C);if(x){var I=x.style||{},N=k.ensureState(C),B=N.style||(N.style={});I.stroke!=null&&(B[k.__isEmptyBrush?"stroke":"fill"]=I.stroke),I.opacity!=null&&(B.opacity=I.opacity)}}k.markRedraw()}},this);var _=o.getRawValue(n);Cf(this,c,{labelDataIndex:n,labelFetcher:{getFormattedLabel:function(S,k){return o.getFormattedLabel(S,k,r.dataType)}},inheritColor:g||"#000",defaultOpacity:m.opacity,defaultText:(_==null?r.getName(n):isFinite(_)?Qe(_):_)+""});var b=this.getTextContent();if(b){var w=c.normal;b.__align=b.style.align,b.__verticalAlign=b.style.verticalAlign,b.__position=w.get("position")||"middle";var T=w.get("distance");ht(T)||(T=[T,T]),b.__labelDistance=T}this.setTextConfig({position:null,local:!0,inside:!1}),uu(this,h,d,f)},t.prototype.highlight=function(){sp(this)},t.prototype.downplay=function(){ap(this)},t.prototype.updateLayout=function(r,n){this.setLinePoints(r.getItemLayout(n))},t.prototype.setLinePoints=function(r){var n=this.childOfName("line");D3(n.shape,r),n.dirty()},t.prototype.beforeUpdate=function(){var r=this,n=r.childOfName("fromSymbol"),i=r.childOfName("toSymbol"),o=r.getTextContent();if(!n&&!i&&(!o||o.ignore))return;for(var s=1,a=this.parent;a;)a.scaleX&&(s/=a.scaleX),a=a.parent;var l=r.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var u=l.shape.percent,c=l.pointAt(0),f=l.pointAt(u),h=q9([],f,c);$k(h,h);function d(x,I){var N=x.__specifiedRotation;if(N==null){var B=l.tangentAt(I);x.attr("rotation",(I===1?-1:1)*Math.PI/2-Math.atan2(B[1],B[0]))}else x.attr("rotation",N)}if(n&&(n.setPosition(c),d(n,0),n.scaleX=n.scaleY=s*u,n.markRedraw()),i&&(i.setPosition(f),d(i,1),i.scaleX=i.scaleY=s*u,i.markRedraw()),o&&!o.ignore){o.x=o.y=0,o.originX=o.originY=0;var p=void 0,v=void 0,m=o.__labelDistance,g=m[0]*s,_=m[1]*s,b=u/2,w=l.tangentAt(b),T=[w[1],-w[0]],S=l.pointAt(b);T[1]>0&&(T[0]=-T[0],T[1]=-T[1]);var k=w[0]<0?-1:1;if(o.__position!=="start"&&o.__position!=="end"){var A=-Math.atan2(w[1],w[0]);f[0]<c[0]&&(A=Math.PI+A),o.rotation=A}var C=void 0;switch(o.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":C=-_,v="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":C=_,v="top";break;default:C=0,v="middle"}switch(o.__position){case"end":o.x=h[0]*g+f[0],o.y=h[1]*_+f[1],p=h[0]>.8?"left":h[0]<-.8?"right":"center",v=h[1]>.8?"top":h[1]<-.8?"bottom":"middle";break;case"start":o.x=-h[0]*g+c[0],o.y=-h[1]*_+c[1],p=h[0]>.8?"right":h[0]<-.8?"left":"center",v=h[1]>.8?"bottom":h[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":o.x=g*k+c[0],o.y=c[1]+C,p=w[0]<0?"right":"left",o.originX=-g*k,o.originY=-C;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":o.x=S[0],o.y=S[1]+C,p="center",o.originY=-C;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":o.x=-g*k+f[0],o.y=f[1]+C,p=w[0]>=0?"right":"left",o.originX=g*k,o.originY=-C;break}o.scaleX=o.scaleY=s,o.setStyle({verticalAlign:o.__verticalAlign||v,align:o.__align||p})}},t}(Ne);const klt=Tlt;var Plt=function(){function e(t){this.group=new Ne,this._LineCtor=t||klt}return e.prototype.updateData=function(t){var r=this;this._progressiveEls=null;var n=this,i=n.group,o=n._lineData;n._lineData=t,o||i.removeAll();var s=_6(t);t.diff(o).add(function(a){r._doAdd(t,a,s)}).update(function(a,l){r._doUpdate(o,t,l,a,s)}).remove(function(a){i.remove(o.getItemGraphicEl(a))}).execute()},e.prototype.updateLayout=function(){var t=this._lineData;!t||t.eachItemGraphicEl(function(r,n){r.updateLayout(t,n)},this)},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=_6(t),this._lineData=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,r){this._progressiveEls=[];function n(a){!a.isGroup&&!Elt(a)&&(a.incremental=!0,a.ensureState("emphasis").hoverLayer=!0)}for(var i=t.start;i<t.end;i++){var o=r.getItemLayout(i);if(J2(o)){var s=new this._LineCtor(r,i,this._seriesScope);s.traverse(n),this.group.add(s),r.setItemGraphicEl(i,s),this._progressiveEls.push(s)}}},e.prototype.remove=function(){this.group.removeAll()},e.prototype.eachRendered=function(t){Ef(this._progressiveEls||this.group,t)},e.prototype._doAdd=function(t,r,n){var i=t.getItemLayout(r);if(!!J2(i)){var o=new this._LineCtor(t,r,n);t.setItemGraphicEl(r,o),this.group.add(o)}},e.prototype._doUpdate=function(t,r,n,i,o){var s=t.getItemGraphicEl(n);if(!J2(r.getItemLayout(i))){this.group.remove(s);return}s?s.updateData(r,i,o):s=new this._LineCtor(r,i,o),r.setItemGraphicEl(i,s),this.group.add(s)},e}();function Elt(e){return e.animators&&e.animators.length>0}function _6(e){var t=e.hostModel,r=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:r.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:r.get("disabled"),blurScope:r.get("blurScope"),focus:r.get("focus"),labelStatesModels:Tu(t)}}function y6(e){return isNaN(e[0])||isNaN(e[1])}function J2(e){return e&&!y6(e[0])&&!y6(e[1])}const Clt=Plt;function Alt(e,t,r,n,i,o){e=e||0;var s=r[1]-r[0];if(i!=null&&(i=ic(i,[0,s])),o!=null&&(o=Math.max(o,i!=null?i:0)),n==="all"){var a=Math.abs(t[1]-t[0]);a=ic(a,[0,s]),i=o=ic(a,[i,o]),n=0}t[0]=ic(t[0],r),t[1]=ic(t[1],r);var l=Q2(t,n);t[n]+=e;var u=i||0,c=r.slice();l.sign<0?c[0]+=u:c[1]-=u,t[n]=ic(t[n],c);var f;return f=Q2(t,n),i!=null&&(f.sign!==l.sign||f.span<i)&&(t[1-n]=t[n]+l.sign*i),f=Q2(t,n),o!=null&&f.span>o&&(t[1-n]=t[n]+f.sign*o),t}function Q2(e,t){var r=e[t]-e[1-t];return{span:Math.abs(r),sign:r>0?-1:r<0?1:t?-1:1}}function ic(e,t){return Math.min(t[1]!=null?t[1]:1/0,Math.max(t[0]!=null?t[0]:-1/0,e))}var b6={color:"fill",borderColor:"stroke"},Mlt={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},ps=Re(),xlt=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},t.prototype.getInitialData=function(r,n){return Hp(null,this)},t.prototype.getDataParams=function(r,n,i){var o=e.prototype.getDataParams.call(this,r,n);return i&&(o.info=ps(i).info),o},t.type="series.custom",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},t}(Ro);const Llt=xlt;function Ilt(e,t){return t=t||[0,0],Lt(["x","y"],function(r,n){var i=this.getAxis(r),o=t[n],s=e[n]/2;return i.type==="category"?i.getBandWidth():Math.abs(i.dataToCoord(o-s)-i.dataToCoord(o+s))},this)}function Olt(e){var t=e.master.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(r){return e.dataToPoint(r)},size:Vt(Ilt,e)}}}function Rlt(e,t){return t=t||[0,0],Lt([0,1],function(r){var n=t[r],i=e[r]/2,o=[],s=[];return o[r]=n-i,s[r]=n+i,o[1-r]=s[1-r]=t[1-r],Math.abs(this.dataToPoint(o)[r]-this.dataToPoint(s)[r])},this)}function Dlt(e){var t=e.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:e.getZoom()},api:{coord:function(r){return e.dataToPoint(r)},size:Vt(Rlt,e)}}}function Nlt(e,t){var r=this.getAxis(),n=t instanceof Array?t[0]:t,i=(e instanceof Array?e[0]:e)/2;return r.type==="category"?r.getBandWidth():Math.abs(r.dataToCoord(n-i)-r.dataToCoord(n+i))}function Flt(e){var t=e.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(r){return e.dataToPoint(r)},size:Vt(Nlt,e)}}}function zlt(e,t){return t=t||[0,0],Lt(["Radius","Angle"],function(r,n){var i="get"+r+"Axis",o=this[i](),s=t[n],a=e[n]/2,l=o.type==="category"?o.getBandWidth():Math.abs(o.dataToCoord(s-a)-o.dataToCoord(s+a));return r==="Angle"&&(l=l*Math.PI/180),l},this)}function Blt(e){var t=e.getRadiusAxis(),r=e.getAngleAxis(),n=t.getExtent();return n[0]>n[1]&&n.reverse(),{coordSys:{type:"polar",cx:e.cx,cy:e.cy,r:n[1],r0:n[0]},api:{coord:function(i){var o=t.dataToRadius(i[0]),s=r.dataToAngle(i[1]),a=e.coordToPoint([o,s]);return a.push(o,s*Math.PI/180),a},size:Vt(zlt,e)}}}function $lt(e){var t=e.getRect(),r=e.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:e.getCellWidth(),cellHeight:e.getCellHeight(),rangeInfo:{start:r.start,end:r.end,weeks:r.weeks,dayCount:r.allDay}},api:{coord:function(n,i){return e.dataToPoint(n,i)}}}}function Vlt(e,t,r,n){return e&&(e.legacy||e.legacy!==!1&&!r&&!n&&t!=="tspan"&&(t==="text"||pt(e,"text")))}function Ult(e,t,r){var n=e,i,o,s;if(t==="text")s=n;else{s={},pt(n,"text")&&(s.text=n.text),pt(n,"rich")&&(s.rich=n.rich),pt(n,"textFill")&&(s.fill=n.textFill),pt(n,"textStroke")&&(s.stroke=n.textStroke),pt(n,"fontFamily")&&(s.fontFamily=n.fontFamily),pt(n,"fontSize")&&(s.fontSize=n.fontSize),pt(n,"fontStyle")&&(s.fontStyle=n.fontStyle),pt(n,"fontWeight")&&(s.fontWeight=n.fontWeight),o={type:"text",style:s,silent:!0},i={};var a=pt(n,"textPosition");r?i.position=a?n.textPosition:"inside":a&&(i.position=n.textPosition),pt(n,"textPosition")&&(i.position=n.textPosition),pt(n,"textOffset")&&(i.offset=n.textOffset),pt(n,"textRotation")&&(i.rotation=n.textRotation),pt(n,"textDistance")&&(i.distance=n.textDistance)}return w6(s,e),z(s.rich,function(l){w6(l,l)}),{textConfig:i,textContent:o}}function w6(e,t){!t||(t.font=t.textFont||t.font,pt(t,"textStrokeWidth")&&(e.lineWidth=t.textStrokeWidth),pt(t,"textAlign")&&(e.align=t.textAlign),pt(t,"textVerticalAlign")&&(e.verticalAlign=t.textVerticalAlign),pt(t,"textLineHeight")&&(e.lineHeight=t.textLineHeight),pt(t,"textWidth")&&(e.width=t.textWidth),pt(t,"textHeight")&&(e.height=t.textHeight),pt(t,"textBackgroundColor")&&(e.backgroundColor=t.textBackgroundColor),pt(t,"textPadding")&&(e.padding=t.textPadding),pt(t,"textBorderColor")&&(e.borderColor=t.textBorderColor),pt(t,"textBorderWidth")&&(e.borderWidth=t.textBorderWidth),pt(t,"textBorderRadius")&&(e.borderRadius=t.textBorderRadius),pt(t,"textBoxShadowColor")&&(e.shadowColor=t.textBoxShadowColor),pt(t,"textBoxShadowBlur")&&(e.shadowBlur=t.textBoxShadowBlur),pt(t,"textBoxShadowOffsetX")&&(e.shadowOffsetX=t.textBoxShadowOffsetX),pt(t,"textBoxShadowOffsetY")&&(e.shadowOffsetY=t.textBoxShadowOffsetY))}function S6(e,t,r){var n=e;n.textPosition=n.textPosition||r.position||"inside",r.offset!=null&&(n.textOffset=r.offset),r.rotation!=null&&(n.textRotation=r.rotation),r.distance!=null&&(n.textDistance=r.distance);var i=n.textPosition.indexOf("inside")>=0,o=e.fill||"#000";T6(n,t);var s=n.textFill==null;return i?s&&(n.textFill=r.insideFill||"#fff",!n.textStroke&&r.insideStroke&&(n.textStroke=r.insideStroke),!n.textStroke&&(n.textStroke=o),n.textStrokeWidth==null&&(n.textStrokeWidth=2)):(s&&(n.textFill=e.fill||r.outsideFill||"#000"),!n.textStroke&&r.outsideStroke&&(n.textStroke=r.outsideStroke)),n.text=t.text,n.rich=t.rich,z(t.rich,function(a){T6(a,a)}),n}function T6(e,t){!t||(pt(t,"fill")&&(e.textFill=t.fill),pt(t,"stroke")&&(e.textStroke=t.fill),pt(t,"lineWidth")&&(e.textStrokeWidth=t.lineWidth),pt(t,"font")&&(e.font=t.font),pt(t,"fontStyle")&&(e.fontStyle=t.fontStyle),pt(t,"fontWeight")&&(e.fontWeight=t.fontWeight),pt(t,"fontSize")&&(e.fontSize=t.fontSize),pt(t,"fontFamily")&&(e.fontFamily=t.fontFamily),pt(t,"align")&&(e.textAlign=t.align),pt(t,"verticalAlign")&&(e.textVerticalAlign=t.verticalAlign),pt(t,"lineHeight")&&(e.textLineHeight=t.lineHeight),pt(t,"width")&&(e.textWidth=t.width),pt(t,"height")&&(e.textHeight=t.height),pt(t,"backgroundColor")&&(e.textBackgroundColor=t.backgroundColor),pt(t,"padding")&&(e.textPadding=t.padding),pt(t,"borderColor")&&(e.textBorderColor=t.borderColor),pt(t,"borderWidth")&&(e.textBorderWidth=t.borderWidth),pt(t,"borderRadius")&&(e.textBorderRadius=t.borderRadius),pt(t,"shadowColor")&&(e.textBoxShadowColor=t.shadowColor),pt(t,"shadowBlur")&&(e.textBoxShadowBlur=t.shadowBlur),pt(t,"shadowOffsetX")&&(e.textBoxShadowOffsetX=t.shadowOffsetX),pt(t,"shadowOffsetY")&&(e.textBoxShadowOffsetY=t.shadowOffsetY),pt(t,"textShadowColor")&&(e.textShadowColor=t.textShadowColor),pt(t,"textShadowBlur")&&(e.textShadowBlur=t.textShadowBlur),pt(t,"textShadowOffsetX")&&(e.textShadowOffsetX=t.textShadowOffsetX),pt(t,"textShadowOffsetY")&&(e.textShadowOffsetY=t.textShadowOffsetY))}var qz={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},k6=ge(qz);wu(Io,function(e,t){return e[t]=1,e},{});Io.join(", ");var Qm=["","style","shape","extra"],cf=Re();function WP(e,t,r,n,i){var o=e+"Animation",s=lP(e,n,i)||{},a=cf(t).userDuring;return s.duration>0&&(s.during=a?Vt(qlt,{el:t,userDuring:a}):null,s.setToFinal=!0,s.scope=e),at(s,r[o]),s}function Wlt(e,t,r,n){n=n||{};var i=n.dataIndex,o=n.isInit,s=n.clearStyle,a=r.isAnimationEnabled(),l=cf(e),u=t.style;l.userDuring=t.during;var c={},f={};if(Klt(e,t,f),E6("shape",t,f),E6("extra",t,f),!o&&a&&(Zlt(e,t,c),P6("shape",e,t,c),P6("extra",e,t,c),Jlt(e,t,u,c)),f.style=u,Glt(e,f,s),Xlt(e,t),a)if(o){var h={};z(Qm,function(p){var v=p?t[p]:t;v&&v.enterFrom&&(p&&(h[p]=h[p]||{}),at(p?h[p]:h,v.enterFrom))});var d=WP("enter",e,t,r,i);d.duration>0&&e.animateFrom(h,d)}else Hlt(e,t,i||0,r,c);jlt(e,t),u?e.dirty():e.markRedraw()}function jlt(e,t){for(var r=cf(e).leaveToProps,n=0;n<Qm.length;n++){var i=Qm[n],o=i?t[i]:t;o&&o.leaveTo&&(r||(r=cf(e).leaveToProps={}),i&&(r[i]=r[i]||{}),at(i?r[i]:r,o.leaveTo))}}function jP(e,t,r,n){if(e){var i=e.parent,o=cf(e).leaveToProps;if(o){var s=WP("update",e,t,r,0);s.done=function(){i.remove(e),n&&n()},e.animateTo(o,s)}else i.remove(e),n&&n()}}function Zc(e){return e==="all"}function Glt(e,t,r){var n=t.style;if(!e.isGroup&&n){if(r){e.useStyle({});for(var i=e.animators,o=0;o<i.length;o++){var s=i[o];s.targetName==="style"&&s.changeTarget(e.style)}}e.setStyle(n)}t&&(t.style=null,t&&e.attr(t),t.style=n)}function Hlt(e,t,r,n,i){if(i){var o=WP("update",e,t,n,r);o.duration>0&&e.animateFrom(i,o)}}function Xlt(e,t){pt(t,"silent")&&(e.silent=t.silent),pt(t,"ignore")&&(e.ignore=t.ignore),e instanceof Su&&pt(t,"invisible")&&(e.invisible=t.invisible),e instanceof pe&&pt(t,"autoBatch")&&(e.autoBatch=t.autoBatch)}var mo={},Ylt={setTransform:function(e,t){return mo.el[e]=t,this},getTransform:function(e){return mo.el[e]},setShape:function(e,t){var r=mo.el,n=r.shape||(r.shape={});return n[e]=t,r.dirtyShape&&r.dirtyShape(),this},getShape:function(e){var t=mo.el.shape;if(t)return t[e]},setStyle:function(e,t){var r=mo.el,n=r.style;return n&&(n[e]=t,r.dirtyStyle&&r.dirtyStyle()),this},getStyle:function(e){var t=mo.el.style;if(t)return t[e]},setExtra:function(e,t){var r=mo.el.extra||(mo.el.extra={});return r[e]=t,this},getExtra:function(e){var t=mo.el.extra;if(t)return t[e]}};function qlt(){var e=this,t=e.el;if(!!t){var r=cf(t).userDuring,n=e.userDuring;if(r!==n){e.el=e.userDuring=null;return}mo.el=t,n(Ylt)}}function P6(e,t,r,n){var i=r[e];if(!!i){var o=t[e],s;if(o){var a=r.transition,l=i.transition;if(l)if(!s&&(s=n[e]={}),Zc(l))at(s,o);else for(var u=tr(l),c=0;c<u.length;c++){var f=u[c],h=o[f];s[f]=h}else if(Zc(a)||he(a,e)>=0){!s&&(s=n[e]={});for(var d=ge(o),c=0;c<d.length;c++){var f=d[c],h=o[f];Qlt(i[f],h)&&(s[f]=h)}}}}}function E6(e,t,r){var n=t[e];if(!!n)for(var i=r[e]={},o=ge(n),s=0;s<o.length;s++){var a=o[s];i[a]=Ad(n[a])}}function Zlt(e,t,r){for(var n=t.transition,i=Zc(n)?Io:tr(n||[]),o=0;o<i.length;o++){var s=i[o];if(!(s==="style"||s==="shape"||s==="extra")){var a=e[s];r[s]=a}}}function Klt(e,t,r){for(var n=0;n<k6.length;n++){var i=k6[n],o=qz[i],s=t[i];s&&(r[o[0]]=s[0],r[o[1]]=s[1])}for(var n=0;n<Io.length;n++){var a=Io[n];t[a]!=null&&(r[a]=t[a])}}function Jlt(e,t,r,n){if(!!r){var i=e.style,o;if(i){var s=r.transition,a=t.transition;if(s&&!Zc(s)){var l=tr(s);!o&&(o=n.style={});for(var u=0;u<l.length;u++){var c=l[u],f=i[c];o[c]=f}}else if(e.getAnimationStyleProps&&(Zc(a)||Zc(s)||he(a,"style")>=0)){var h=e.getAnimationStyleProps(),d=h?h.style:null;if(d){!o&&(o=n.style={});for(var p=ge(r),u=0;u<p.length;u++){var c=p[u];if(d[c]){var f=i[c];o[c]=f}}}}}}}function Qlt(e,t){return Yr(e)?e!==t:e!=null&&isFinite(e)}var Zz=Re(),tut=["percent","easing","shape","style","extra"];function eut(e){e.stopAnimation("keyframe"),e.attr(Zz(e))}function Kz(e,t,r){if(!(!r.isAnimationEnabled()||!t)){if(ht(t)){z(t,function(a){Kz(e,a,r)});return}var n=t.keyframes,i=t.duration;if(r&&i==null){var o=lP("enter",r,0);i=o&&o.duration}if(!(!n||!i)){var s=Zz(e);z(Qm,function(a){if(!(a&&!e[a])){var l;n.sort(function(u,c){return u.percent-c.percent}),z(n,function(u){var c=e.animators,f=a?u[a]:u;if(!!f){var h=ge(f);if(a||(h=Cr(h,function(v){return he(tut,v)<0})),!!h.length){l||(l=e.animate(a,t.loop,!0),l.scope="keyframe");for(var d=0;d<c.length;d++)c[d]!==l&&c[d].targetName===l.targetName&&c[d].stopTracks(h);a&&(s[a]=s[a]||{});var p=a?s[a]:s;z(h,function(v){p[v]=((a?e[a]:e)||{})[v]}),l.whenWithKeys(i*u.percent,f,h,u.easing)}}}),l&&l.delay(t.delay||0).duration(i).start(t.easing)}})}}}var vs="emphasis",ma="normal",GP="blur",HP="select",Ra=[ma,vs,GP,HP],tb={normal:["itemStyle"],emphasis:[vs,"itemStyle"],blur:[GP,"itemStyle"],select:[HP,"itemStyle"]},eb={normal:["label"],emphasis:[vs,"label"],blur:[GP,"label"],select:[HP,"label"]},rut=["x","y"],nut="e\0\0",jn={normal:{},emphasis:{},blur:{},select:{}},iut={cartesian2d:Olt,geo:Dlt,single:Flt,polar:Blt,calendar:$lt};function N3(e){return e instanceof pe}function F3(e){return e instanceof Su}function out(e,t){t.copyTransform(e),F3(t)&&F3(e)&&(t.setStyle(e.style),t.z=e.z,t.z2=e.z2,t.zlevel=e.zlevel,t.invisible=e.invisible,t.ignore=e.ignore,N3(t)&&N3(e)&&t.setShape(e.shape))}var sut=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i,o){this._progressiveEls=null;var s=this._data,a=r.getData(),l=this.group,u=C6(r,a,n,i);s||l.removeAll(),a.diff(s).add(function(f){rb(i,null,f,u(f,o),r,l,a)}).remove(function(f){var h=s.getItemGraphicEl(f);h&&jP(h,ps(h).option,r)}).update(function(f,h){var d=s.getItemGraphicEl(h);rb(i,d,f,u(f,o),r,l,a)}).execute();var c=r.get("clip",!0)?xz(r.coordinateSystem,!1,r):null;c?l.setClipPath(c):l.removeClipPath(),this._data=a},t.prototype.incrementalPrepareRender=function(r,n,i){this.group.removeAll(),this._data=null},t.prototype.incrementalRender=function(r,n,i,o,s){var a=n.getData(),l=C6(n,a,i,o),u=this._progressiveEls=[];function c(d){d.isGroup||(d.incremental=!0,d.ensureState("emphasis").hoverLayer=!0)}for(var f=r.start;f<r.end;f++){var h=rb(null,null,f,l(f,s),n,this.group,a);h&&(h.traverse(c),u.push(h))}},t.prototype.eachRendered=function(r){Ef(this._progressiveEls||this.group,r)},t.prototype.filterForExposedEvent=function(r,n,i,o){var s=n.element;if(s==null||i.name===s)return!0;for(;(i=i.__hostTarget||i.parent)&&i!==this.group;)if(i.name===s)return!0;return!1},t.type="custom",t}(oi);const aut=sut;function XP(e){var t=e.type,r;if(t==="path"){var n=e.shape,i=n.width!=null&&n.height!=null?{x:n.x||0,y:n.y||0,width:n.width,height:n.height}:null,o=tB(n);r=i_(o,null,i,n.layout||"center"),ps(r).customPathData=o}else if(t==="image")r=new Cs({}),ps(r).customImagePath=e.style.image;else if(t==="text")r=new rr({});else if(t==="group")r=new Ne;else{if(t==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var s=pN(t);if(!s){var a="";oe(a)}r=new s}return ps(r).customGraphicType=t,r.name=e.name,r.z2EmphasisLift=1,r.z2SelectLift=1,r}function YP(e,t,r,n,i,o,s){eut(t);var a=i&&i.normal.cfg;a&&t.setTextConfig(a),n&&n.transition==null&&(n.transition=rut);var l=n&&n.style;if(l){if(t.type==="text"){var u=l;pt(u,"textFill")&&(u.fill=u.textFill),pt(u,"textStroke")&&(u.stroke=u.textStroke)}var c=void 0,f=N3(t)?l.decal:null;e&&f&&(f.dirty=!0,c=qm(f,e)),l.__decalPattern=c}if(F3(t)&&l){var c=l.__decalPattern;c&&(l.decal=c)}Wlt(t,n,o,{dataIndex:r,isInit:s,clearStyle:!0}),Kz(t,n.keyframeAnimation,o)}function Jz(e,t,r,n,i){var o=t.isGroup?null:t,s=i&&i[e].cfg;if(o){var a=o.ensureState(e);if(n===!1){var l=o.getState(e);l&&(l.style=null)}else a.style=n||null;s&&(a.textConfig=s),eP(o)}}function lut(e,t,r){if(!e.isGroup){var n=e,i=r.currentZ,o=r.currentZLevel;n.z=i,n.zlevel=o;var s=t.z2;s!=null&&(n.z2=s||0);for(var a=0;a<Ra.length;a++)uut(n,t,Ra[a])}}function uut(e,t,r){var n=r===ma,i=n?t:t1(t,r),o=i?i.z2:null,s;o!=null&&(s=n?e:e.ensureState(r),s.z2=o||0)}function C6(e,t,r,n){var i=e.get("renderItem"),o=e.coordinateSystem,s={};o&&(s=o.prepareCustoms?o.prepareCustoms(o):iut[o.type](o));for(var a=ne({getWidth:n.getWidth,getHeight:n.getHeight,getZr:n.getZr,getDevicePixelRatio:n.getDevicePixelRatio,value:w,style:S,ordinalRawValue:T,styleEmphasis:k,visual:x,barLayout:I,currentSeriesIndices:N,font:B},s.api||{}),l={context:{},seriesId:e.id,seriesName:e.name,seriesIndex:e.seriesIndex,coordSys:s.coordSys,dataInsideLength:t.count(),encode:cut(e.getData())},u,c,f={},h={},d={},p={},v=0;v<Ra.length;v++){var m=Ra[v];d[m]=e.getModel(tb[m]),p[m]=e.getModel(eb[m])}function g(V){return V===u?c||(c=t.getItemModel(V)):t.getItemModel(V)}function _(V,F){return t.hasItemOption?V===u?f[F]||(f[F]=g(V).getModel(tb[F])):g(V).getModel(tb[F]):d[F]}function b(V,F){return t.hasItemOption?V===u?h[F]||(h[F]=g(V).getModel(eb[F])):g(V).getModel(eb[F]):p[F]}return function(V,F){return u=V,c=null,f={},h={},i&&i(ne({dataIndexInside:V,dataIndex:t.getRawIndex(V),actionType:F?F.type:null},l),a)};function w(V,F){return F==null&&(F=u),t.getStore().get(t.getDimensionIndex(V||0),F)}function T(V,F){F==null&&(F=u),V=V||0;var G=t.getDimensionInfo(V);if(!G){var Z=t.getDimensionIndex(V);return Z>=0?t.getStore().get(Z,F):void 0}var q=t.get(G.name,F),et=G&&G.ordinalMeta;return et?et.categories[q]:q}function S(V,F){F==null&&(F=u);var G=t.getItemVisual(F,"style"),Z=G&&G.fill,q=G&&G.opacity,et=_(F,ma).getItemStyle();Z!=null&&(et.fill=Z),q!=null&&(et.opacity=q);var At={inheritColor:Mt(Z)?Z:"#000"},Dt=b(F,ma),Pt=yn(Dt,null,At,!1,!0);Pt.text=Dt.getShallow("show")?Jt(e.getFormattedLabel(F,ma),_p(t,F)):null;var Et=Wm(Dt,At,!1);return C(V,et),et=S6(et,Pt,Et),V&&A(et,V),et.legacy=!0,et}function k(V,F){F==null&&(F=u);var G=_(F,vs).getItemStyle(),Z=b(F,vs),q=yn(Z,null,null,!0,!0);q.text=Z.getShallow("show")?Ed(e.getFormattedLabel(F,vs),e.getFormattedLabel(F,ma),_p(t,F)):null;var et=Wm(Z,null,!0);return C(V,G),G=S6(G,q,et),V&&A(G,V),G.legacy=!0,G}function A(V,F){for(var G in F)pt(F,G)&&(V[G]=F[G])}function C(V,F){V&&(V.textFill&&(F.textFill=V.textFill),V.textPosition&&(F.textPosition=V.textPosition))}function x(V,F){if(F==null&&(F=u),pt(b6,V)){var G=t.getItemVisual(F,"style");return G?G[b6[V]]:null}if(pt(Mlt,V))return t.getItemVisual(F,V)}function I(V){if(o.type==="cartesian2d"){var F=o.getBaseAxis();return Qit(ne({axis:F},V))}}function N(){return r.getCurrentSeriesIndices()}function B(V){return wN(V,r)}}function cut(e){var t={};return z(e.dimensions,function(r){var n=e.getDimensionInfo(r);if(!n.isExtraCoord){var i=n.coordDim,o=t[i]=t[i]||[];o[n.coordDimIndex]=e.getDimensionIndex(r)}}),t}function rb(e,t,r,n,i,o,s){if(!n){o.remove(t);return}var a=qP(e,t,r,n,i,o);return a&&s.setItemGraphicEl(r,a),a&&uu(a,n.focus,n.blurScope,n.emphasisDisabled),a}function qP(e,t,r,n,i,o){var s=-1,a=t;t&&Qz(t,n,i)&&(s=he(o.childrenRef(),t),t=null);var l=!t,u=t;u?u.clearStates():(u=XP(n),a&&out(a,u)),n.morph===!1?u.disableMorphing=!0:u.disableMorphing&&(u.disableMorphing=!1),jn.normal.cfg=jn.normal.conOpt=jn.emphasis.cfg=jn.emphasis.conOpt=jn.blur.cfg=jn.blur.conOpt=jn.select.cfg=jn.select.conOpt=null,jn.isLegacy=!1,hut(u,r,n,i,l,jn),fut(u,r,n,i,l),YP(e,u,r,n,jn,i,l),pt(n,"info")&&(ps(u).info=n.info);for(var c=0;c<Ra.length;c++){var f=Ra[c];if(f!==ma){var h=t1(n,f),d=ZP(n,h,f);Jz(f,u,h,d,jn)}}return lut(u,n,i),n.type==="group"&&dut(e,u,r,n,i),s>=0?o.replaceAt(u,s):o.add(u),u}function Qz(e,t,r){var n=ps(e),i=t.type,o=t.shape,s=t.style;return r.isUniversalTransitionEnabled()||i!=null&&i!==n.customGraphicType||i==="path"&&mut(o)&&tB(o)!==n.customPathData||i==="image"&&pt(s,"image")&&s.image!==n.customImagePath}function fut(e,t,r,n,i){var o=r.clipPath;if(o===!1)e&&e.getClipPath()&&e.removeClipPath();else if(o){var s=e.getClipPath();s&&Qz(s,o,n)&&(s=null),s||(s=XP(o),e.setClipPath(s)),YP(null,s,t,o,null,n,i)}}function hut(e,t,r,n,i,o){if(!e.isGroup){A6(r,null,o),A6(r,vs,o);var s=o.normal.conOpt,a=o.emphasis.conOpt,l=o.blur.conOpt,u=o.select.conOpt;if(s!=null||a!=null||u!=null||l!=null){var c=e.getTextContent();if(s===!1)c&&e.removeTextContent();else{s=o.normal.conOpt=s||{type:"text"},c?c.clearStates():(c=XP(s),e.setTextContent(c)),YP(null,c,t,s,null,n,i);for(var f=s&&s.style,h=0;h<Ra.length;h++){var d=Ra[h];if(d!==ma){var p=o[d].conOpt;Jz(d,c,p,ZP(s,p,d),null)}}f?c.dirty():c.markRedraw()}}}}function A6(e,t,r){var n=t?t1(e,t):e,i=t?ZP(e,n,vs):e.style,o=e.type,s=n?n.textConfig:null,a=e.textContent,l=a?t?t1(a,t):a:null;if(i&&(r.isLegacy||Vlt(i,o,!!s,!!l))){r.isLegacy=!0;var u=Ult(i,o,!t);!s&&u.textConfig&&(s=u.textConfig),!l&&u.textContent&&(l=u.textContent)}if(!t&&l){var c=l;!c.type&&(c.type="text")}var f=t?r[t]:r.normal;f.cfg=s,f.conOpt=l}function t1(e,t){return t?e?e[t]:null:e}function ZP(e,t,r){var n=t&&t.style;return n==null&&r===vs&&e&&(n=e.styleEmphasis),n}function dut(e,t,r,n,i){var o=n.children,s=o?o.length:0,a=n.$mergeChildren,l=a==="byName"||n.diffChildrenByName,u=a===!1;if(!(!s&&!l&&!u)){if(l){vut({api:e,oldChildren:t.children()||[],newChildren:o||[],dataIndex:r,seriesModel:i,group:t});return}u&&t.removeAll();for(var c=0;c<s;c++){var f=o[c],h=t.childAt(c);f?(f.ignore==null&&(f.ignore=!1),qP(e,h,r,f,i,t)):h.ignore=!0}for(var d=t.childCount()-1;d>=c;d--){var p=t.childAt(d);put(t,p,i)}}}function put(e,t,r){t&&jP(t,ps(e).option,r)}function vut(e){new YF(e.oldChildren,e.newChildren,M6,M6,e).add(x6).update(x6).remove(gut).execute()}function M6(e,t){var r=e&&e.name;return r!=null?r:nut+t}function x6(e,t){var r=this.context,n=e!=null?r.newChildren[e]:null,i=t!=null?r.oldChildren[t]:null;qP(r.api,i,r.dataIndex,n,r.seriesModel,r.group)}function gut(e){var t=this.context,r=t.oldChildren[e];r&&jP(r,ps(r).option,t.seriesModel)}function tB(e){return e&&(e.pathData||e.d)}function mut(e){return e&&(pt(e,"pathData")||pt(e,"d"))}function _ut(e){e.registerChartView(aut),e.registerSeriesModel(Llt)}var Nl=Re(),L6=$t,nb=Vt,yut=function(){function e(){this._dragging=!1,this.animationThreshold=15}return e.prototype.render=function(t,r,n,i){var o=r.get("value"),s=r.get("status");if(this._axisModel=t,this._axisPointerModel=r,this._api=n,!(!i&&this._lastValue===o&&this._lastStatus===s)){this._lastValue=o,this._lastStatus=s;var a=this._group,l=this._handle;if(!s||s==="hide"){a&&a.hide(),l&&l.hide();return}a&&a.show(),l&&l.show();var u={};this.makeElOption(u,o,t,r,n);var c=u.graphicKey;c!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=c;var f=this._moveAnimation=this.determineAnimation(t,r);if(!a)a=this._group=new Ne,this.createPointerEl(a,u,t,r),this.createLabelEl(a,u,t,r),n.getZr().add(a);else{var h=be(I6,r,f);this.updatePointerEl(a,u,h),this.updateLabelEl(a,u,h,r)}R6(a,r,!0),this._renderHandle(o)}},e.prototype.remove=function(t){this.clear(t)},e.prototype.dispose=function(t){this.clear(t)},e.prototype.determineAnimation=function(t,r){var n=r.get("animation"),i=t.axis,o=i.type==="category",s=r.get("snap");if(!s&&!o)return!1;if(n==="auto"||n==null){var a=this.animationThreshold;if(o&&i.getBandWidth()>a)return!0;if(s){var l=$P(t).seriesDataCount,u=i.getExtent();return Math.abs(u[0]-u[1])/l>a}return!1}return n===!0},e.prototype.makeElOption=function(t,r,n,i,o){},e.prototype.createPointerEl=function(t,r,n,i){var o=r.pointer;if(o){var s=Nl(t).pointerEl=new Ztt[o.type](L6(r.pointer));t.add(s)}},e.prototype.createLabelEl=function(t,r,n,i){if(r.label){var o=Nl(t).labelEl=new rr(L6(r.label));t.add(o),O6(o,i)}},e.prototype.updatePointerEl=function(t,r,n){var i=Nl(t).pointerEl;i&&r.pointer&&(i.setStyle(r.pointer.style),n(i,{shape:r.pointer.shape}))},e.prototype.updateLabelEl=function(t,r,n,i){var o=Nl(t).labelEl;o&&(o.setStyle(r.label.style),n(o,{x:r.label.x,y:r.label.y}),O6(o,i))},e.prototype._renderHandle=function(t){if(!(this._dragging||!this.updateHandleTransform)){var r=this._axisPointerModel,n=this._api.getZr(),i=this._handle,o=r.getModel("handle"),s=r.get("status");if(!o.get("show")||!s||s==="hide"){i&&n.remove(i),this._handle=null;return}var a;this._handle||(a=!0,i=this._handle=cP(o.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(u){su(u.event)},onmousedown:nb(this._onHandleDragMove,this,0,0),drift:nb(this._onHandleDragMove,this),ondragend:nb(this._onHandleDragEnd,this)}),n.add(i)),R6(i,r,!1),i.setStyle(o.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=o.get("size");ht(l)||(l=[l,l]),i.scaleX=l[0]/2,i.scaleY=l[1]/2,vF(this,"_doDispatchAxisPointer",o.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,a)}},e.prototype._moveHandleToValue=function(t,r){I6(this._axisPointerModel,!r&&this._moveAnimation,this._handle,ib(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},e.prototype._onHandleDragMove=function(t,r){var n=this._handle;if(!!n){this._dragging=!0;var i=this.updateHandleTransform(ib(n),[t,r],this._axisModel,this._axisPointerModel);this._payloadInfo=i,n.stopAnimation(),n.attr(ib(i)),Nl(n).lastProp=null,this._doDispatchAxisPointer()}},e.prototype._doDispatchAxisPointer=function(){var t=this._handle;if(!!t){var r=this._payloadInfo,n=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:r.cursorPoint[0],y:r.cursorPoint[1],tooltipOption:r.tooltipOption,axesInfo:[{axisDim:n.axis.dim,axisIndex:n.componentIndex}]})}},e.prototype._onHandleDragEnd=function(){this._dragging=!1;var t=this._handle;if(!!t){var r=this._axisPointerModel.get("value");this._moveHandleToValue(r),this._api.dispatchAction({type:"hideTip"})}},e.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var r=t.getZr(),n=this._group,i=this._handle;r&&n&&(this._lastGraphicKey=null,n&&r.remove(n),i&&r.remove(i),this._group=null,this._handle=null,this._payloadInfo=null),v3(this,"_doDispatchAxisPointer")},e.prototype.doClear=function(){},e.prototype.buildLabel=function(t,r,n){return n=n||0,{x:t[n],y:t[1-n],width:r[n],height:r[1-n]}},e}();function I6(e,t,r,n){eB(Nl(r).lastProp,n)||(Nl(r).lastProp=n,t?_r(r,n,e):(r.stopAnimation(),r.attr(n)))}function eB(e,t){if(Rt(e)&&Rt(t)){var r=!0;return z(t,function(n,i){r=r&&eB(e[i],n)}),!!r}else return e===t}function O6(e,t){e[t.get(["label","show"])?"show":"hide"]()}function ib(e){return{x:e.x||0,y:e.y||0,rotation:e.rotation||0}}function R6(e,t,r){var n=t.get("z"),i=t.get("zlevel");e&&e.traverse(function(o){o.type!=="group"&&(n!=null&&(o.z=n),i!=null&&(o.zlevel=i),o.silent=r)})}const but=yut;function wut(e){var t=e.get("type"),r=e.getModel(t+"Style"),n;return t==="line"?(n=r.getLineStyle(),n.fill=null):t==="shadow"&&(n=r.getAreaStyle(),n.stroke=null),n}function Sut(e,t,r,n,i){var o=r.get("value"),s=rB(o,t.axis,t.ecModel,r.get("seriesDataIndices"),{precision:r.get(["label","precision"]),formatter:r.get(["label","formatter"])}),a=r.getModel("label"),l=Gp(a.get("padding")||0),u=a.getFont(),c=Gk(s,u),f=i.position,h=c.width+l[1]+l[3],d=c.height+l[0]+l[2],p=i.align;p==="right"&&(f[0]-=h),p==="center"&&(f[0]-=h/2);var v=i.verticalAlign;v==="bottom"&&(f[1]-=d),v==="middle"&&(f[1]-=d/2),Tut(f,h,d,n);var m=a.get("backgroundColor");(!m||m==="auto")&&(m=t.get(["axisLine","lineStyle","color"])),e.label={x:f[0],y:f[1],style:yn(a,{text:s,font:u,fill:a.getTextColor(),padding:l,backgroundColor:m}),z2:10}}function Tut(e,t,r,n){var i=n.getWidth(),o=n.getHeight();e[0]=Math.min(e[0]+t,i)-t,e[1]=Math.min(e[1]+r,o)-r,e[0]=Math.max(e[0],0),e[1]=Math.max(e[1],0)}function rB(e,t,r,n,i){e=t.scale.parse(e);var o=t.scale.getLabel({value:e},{precision:i.precision}),s=i.formatter;if(s){var a={value:NP(t,{value:e}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};z(n,function(l){var u=r.getSeriesByIndex(l.seriesIndex),c=l.dataIndexInside,f=u&&u.getDataParams(c);f&&a.seriesData.push(f)}),Mt(s)?o=s.replace("{value}",o):jt(s)&&(o=s(a))}return o}function nB(e,t,r){var n=af();return Wk(n,n,r.rotation),NS(n,n,r.position),Hc([e.dataToCoord(t),(r.labelOffset||0)+(r.labelDirection||1)*(r.labelMargin||0)],n)}function kut(e,t,r,n,i,o){var s=Bz.innerTextLayout(r.rotation,0,r.labelDirection);r.labelMargin=i.get(["label","margin"]),Sut(t,n,i,o,{position:nB(n.axis,e,r),align:s.textAlign,verticalAlign:s.textVerticalAlign})}function Put(e,t,r){return r=r||0,{x1:e[r],y1:e[1-r],x2:t[r],y2:t[1-r]}}function Eut(e,t,r){return r=r||0,{x:e[r],y:e[1-r],width:t[r],height:t[1-r]}}var Cut=function(e){St(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeElOption=function(r,n,i,o,s){var a=i.axis,l=a.grid,u=o.get("type"),c=D6(l,a).getOtherAxis(a).getGlobalExtent(),f=a.toGlobalCoord(a.dataToCoord(n,!0));if(u&&u!=="none"){var h=wut(o),d=Aut[u](a,f,c);d.style=h,r.graphicKey=d.type,r.pointer=d}var p=M3(l.model,i);kut(n,r,p,i,o,s)},t.prototype.getHandleTransform=function(r,n,i){var o=M3(n.axis.grid.model,n,{labelInside:!1});o.labelMargin=i.get(["handle","margin"]);var s=nB(n.axis,r,o);return{x:s[0],y:s[1],rotation:o.rotation+(o.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(r,n,i,o){var s=i.axis,a=s.grid,l=s.getGlobalExtent(!0),u=D6(a,s).getOtherAxis(s).getGlobalExtent(),c=s.dim==="x"?0:1,f=[r.x,r.y];f[c]+=n[c],f[c]=Math.min(l[1],f[c]),f[c]=Math.max(l[0],f[c]);var h=(u[1]+u[0])/2,d=[h,h];d[c]=f[c];var p=[{verticalAlign:"middle"},{align:"center"}];return{x:f[0],y:f[1],rotation:r.rotation,cursorPoint:d,tooltipOption:p[c]}},t}(but);function D6(e,t){var r={};return r[t.dim+"AxisIndex"]=t.index,e.getCartesian(r)}var Aut={line:function(e,t,r){var n=Put([t,r[0]],[t,r[1]],N6(e));return{type:"Line",subPixelOptimize:!0,shape:n}},shadow:function(e,t,r){var n=Math.max(1,e.getBandWidth()),i=r[1]-r[0];return{type:"Rect",shape:Eut([t-n/2,r[0]],[n,i],N6(e))}}};function N6(e){return e.dim==="x"?0:1}const Mut=Cut;var xut=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(Me);const Lut=xut;var cs=Re(),Iut=z;function iB(e,t,r){if(!Zt.node){var n=t.getZr();cs(n).records||(cs(n).records={}),Out(n,t);var i=cs(n).records[e]||(cs(n).records[e]={});i.handler=r}}function Out(e,t){if(cs(e).initialized)return;cs(e).initialized=!0,r("click",be(F6,"click")),r("mousemove",be(F6,"mousemove")),r("globalout",Dut);function r(n,i){e.on(n,function(o){var s=Nut(t);Iut(cs(e).records,function(a){a&&i(a,o,s.dispatchAction)}),Rut(s.pendings,t)})}}function Rut(e,t){var r=e.showTip.length,n=e.hideTip.length,i;r?i=e.showTip[r-1]:n&&(i=e.hideTip[n-1]),i&&(i.dispatchAction=null,t.dispatchAction(i))}function Dut(e,t,r){e.handler("leave",null,r)}function F6(e,t,r,n){t.handler(e,r,n)}function Nut(e){var t={showTip:[],hideTip:[]},r=function(n){var i=t[n.type];i?i.push(n):(n.dispatchAction=r,e.dispatchAction(n))};return{dispatchAction:r,pendings:t}}function z3(e,t){if(!Zt.node){var r=t.getZr(),n=(cs(r).records||{})[e];n&&(cs(r).records[e]=null)}}var Fut=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){var o=n.getComponent("tooltip"),s=r.get("triggerOn")||o&&o.get("triggerOn")||"mousemove|click";iB("axisPointer",i,function(a,l,u){s!=="none"&&(a==="leave"||s.indexOf(a)>=0)&&u({type:"updateAxisPointer",currTrigger:a,x:l&&l.offsetX,y:l&&l.offsetY})})},t.prototype.remove=function(r,n){z3("axisPointer",n)},t.prototype.dispose=function(r,n){z3("axisPointer",n)},t.type="axisPointer",t}(ci);const zut=Fut;function oB(e,t){var r=[],n=e.seriesIndex,i;if(n==null||!(i=t.getSeriesByIndex(n)))return{point:[]};var o=i.getData(),s=au(o,e);if(s==null||s<0||ht(s))return{point:[]};var a=o.getItemGraphicEl(s),l=i.coordinateSystem;if(i.getTooltipPosition)r=i.getTooltipPosition(s)||[];else if(l&&l.dataToPoint)if(e.isStacked){var u=l.getBaseAxis(),c=l.getOtherAxis(u),f=c.dim,h=u.dim,d=f==="x"||f==="radius"?1:0,p=o.mapDimension(h),v=[];v[d]=o.get(p,s),v[1-d]=o.get(o.getCalculationInfo("stackResultDimension"),s),r=l.dataToPoint(v)||[]}else r=l.dataToPoint(o.getValues(Lt(l.dimensions,function(g){return o.mapDimension(g)}),s))||[];else if(a){var m=a.getBoundingRect().clone();m.applyTransform(a.transform),r=[m.x+m.width/2,m.y+m.height/2]}return{point:r,el:a}}var z6=Re();function But(e,t,r){var n=e.currTrigger,i=[e.x,e.y],o=e,s=e.dispatchAction||Vt(r.dispatchAction,r),a=t.getComponent("axisPointer").coordSysAxesInfo;if(!!a){em(i)&&(i=oB({seriesIndex:o.seriesIndex,dataIndex:o.dataIndex},t).point);var l=em(i),u=o.axesInfo,c=a.axesInfo,f=n==="leave"||em(i),h={},d={},p={list:[],map:{}},v={showPointer:be(Vut,d),showTooltip:be(Uut,p)};z(a.coordSysMap,function(g,_){var b=l||g.containPoint(i);z(a.coordSysAxesInfo[_],function(w,T){var S=w.axis,k=Hut(u,w);if(!f&&b&&(!u||k)){var A=k&&k.value;A==null&&!l&&(A=S.pointToData(i)),A!=null&&B6(w,A,v,!1,h)}})});var m={};return z(c,function(g,_){var b=g.linkGroup;b&&!d[_]&&z(b.axesInfo,function(w,T){var S=d[T];if(w!==g&&S){var k=S.value;b.mapper&&(k=g.axis.scale.parse(b.mapper(k,$6(w),$6(g)))),m[g.key]=k}})}),z(m,function(g,_){B6(c[_],g,v,!0,h)}),Wut(d,c,h),jut(p,i,e,s),Gut(c,s,r),h}}function B6(e,t,r,n,i){var o=e.axis;if(!(o.scale.isBlank()||!o.containData(t))){if(!e.involveSeries){r.showPointer(e,t);return}var s=$ut(t,e),a=s.payloadBatch,l=s.snapToValue;a[0]&&i.seriesIndex==null&&at(i,a[0]),!n&&e.snap&&o.containData(l)&&l!=null&&(t=l),r.showPointer(e,t,a),r.showTooltip(e,s,l)}}function $ut(e,t){var r=t.axis,n=r.dim,i=e,o=[],s=Number.MAX_VALUE,a=-1;return z(t.seriesModels,function(l,u){var c=l.getData().mapDimensionsAll(n),f,h;if(l.getAxisTooltipData){var d=l.getAxisTooltipData(c,e,r);h=d.dataIndices,f=d.nestestValue}else{if(h=l.getData().indicesOfNearest(c[0],e,r.type==="category"?.5:null),!h.length)return;f=l.getData().get(c[0],h[0])}if(!(f==null||!isFinite(f))){var p=e-f,v=Math.abs(p);v<=s&&((v<s||p>=0&&a<0)&&(s=v,a=p,i=f,o.length=0),z(h,function(m){o.push({seriesIndex:l.seriesIndex,dataIndexInside:m,dataIndex:l.getData().getRawIndex(m)})}))}}),{payloadBatch:o,snapToValue:i}}function Vut(e,t,r,n){e[t.key]={value:r,payloadBatch:n}}function Uut(e,t,r,n){var i=r.payloadBatch,o=t.axis,s=o.model,a=t.axisPointerModel;if(!(!t.triggerTooltip||!i.length)){var l=t.coordSys.model,u=yp(l),c=e.map[u];c||(c=e.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},e.list.push(c)),c.dataByAxis.push({axisDim:o.dim,axisIndex:s.componentIndex,axisType:s.type,axisId:s.id,value:n,valueLabelOpt:{precision:a.get(["label","precision"]),formatter:a.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function Wut(e,t,r){var n=r.axesInfo=[];z(t,function(i,o){var s=i.axisPointerModel.option,a=e[o];a?(!i.useHandle&&(s.status="show"),s.value=a.value,s.seriesDataIndices=(a.payloadBatch||[]).slice()):!i.useHandle&&(s.status="hide"),s.status==="show"&&n.push({axisDim:i.axis.dim,axisIndex:i.axis.model.componentIndex,value:s.value})})}function jut(e,t,r,n){if(em(t)||!e.list.length){n({type:"hideTip"});return}var i=((e.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};n({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:r.tooltipOption,position:r.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:e.list})}function Gut(e,t,r){var n=r.getZr(),i="axisPointerLastHighlights",o=z6(n)[i]||{},s=z6(n)[i]={};z(e,function(u,c){var f=u.axisPointerModel.option;f.status==="show"&&z(f.seriesDataIndices,function(h){var d=h.seriesIndex+" | "+h.dataIndex;s[d]=h})});var a=[],l=[];z(o,function(u,c){!s[c]&&l.push(u)}),z(s,function(u,c){!o[c]&&a.push(u)}),l.length&&r.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),a.length&&r.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:a})}function Hut(e,t){for(var r=0;r<(e||[]).length;r++){var n=e[r];if(t.axis.dim===n.axisDim&&t.axis.model.componentIndex===n.axisIndex)return n}}function $6(e){var t=e.axis.model,r={},n=r.axisDim=e.axis.dim;return r.axisIndex=r[n+"AxisIndex"]=t.componentIndex,r.axisName=r[n+"AxisName"]=t.name,r.axisId=r[n+"AxisId"]=t.id,r}function em(e){return!e||e[0]==null||isNaN(e[0])||e[1]==null||isNaN(e[1])}function sB(e){$z.registerAxisPointerClass("CartesianAxisPointer",Mut),e.registerComponentModel(Lut),e.registerComponentView(zut),e.registerPreprocessor(function(t){if(t){(!t.axisPointer||t.axisPointer.length===0)&&(t.axisPointer={});var r=t.axisPointer.link;r&&!ht(r)&&(t.axisPointer.link=[r])}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,function(t,r){t.getComponent("axisPointer").coordSysAxesInfo=fat(t,r)}),e.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},But)}function Mu(e){yr(Wz),yr(sB)}function Xut(e,t){var r=Gp(t.get("padding")),n=t.getItemStyle(["color","opacity"]);return n.fill=t.get("backgroundColor"),e=new er({shape:{x:e.x-r[3],y:e.y-r[0],width:e.width+r[1]+r[3],height:e.height+r[0]+r[2],r:t.get("borderRadius")},style:n,silent:!0,z2:-1}),e}var Yut=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(Me);const qut=Yut;function aB(e){var t=e.get("confine");return t!=null?!!t:e.get("renderMode")==="richText"}function lB(e){if(!!Zt.domSupported){for(var t=document.documentElement.style,r=0,n=e.length;r<n;r++)if(e[r]in t)return e[r]}}var uB=lB(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Zut=lB(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function cB(e,t){if(!e)return t;t=DN(t,!0);var r=e.indexOf(t);return e=r===-1?t:"-"+e.slice(0,r)+"-"+t,e.toLowerCase()}function Kut(e,t){var r=e.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(e);return r?t?r[t]:r:null}var Jut=cB(Zut,"transition"),KP=cB(uB,"transform"),Qut="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(Zt.transform3dSupported?"will-change:transform;":"");function tct(e){return e=e==="left"?"right":e==="right"?"left":e==="top"?"bottom":"top",e}function ect(e,t,r){if(!Mt(r)||r==="inside")return"";var n=e.get("backgroundColor"),i=e.get("borderWidth");t=fu(t);var o=tct(r),s=Math.max(Math.round(i)*1.5,6),a="",l=KP+":",u;he(["left","right"],o)>-1?(a+="top:50%",l+="translateY(-50%) rotate("+(u=o==="left"?-225:-45)+"deg)"):(a+="left:50%",l+="translateX(-50%) rotate("+(u=o==="top"?225:45)+"deg)");var c=u*Math.PI/180,f=s+i,h=f*Math.abs(Math.cos(c))+f*Math.abs(Math.sin(c)),d=Math.round(((h-Math.SQRT2*i)/2+Math.SQRT2*i-(h-f)/2)*100)/100;a+=";"+o+":-"+d+"px";var p=t+" solid "+i+"px;",v=["position:absolute;width:"+s+"px;height:"+s+"px;",a+";"+l+";","border-bottom:"+p,"border-right:"+p,"background-color:"+n+";"];return'<div style="'+v.join("")+'"></div>'}function rct(e,t){var r="cubic-bezier(0.23,1,0.32,1)",n=" "+e/2+"s "+r,i="opacity"+n+",visibility"+n;return t||(n=" "+e+"s "+r,i+=Zt.transformSupported?","+KP+n:",left"+n+",top"+n),Jut+":"+i}function V6(e,t,r){var n=e.toFixed(0)+"px",i=t.toFixed(0)+"px";if(!Zt.transformSupported)return r?"top:"+i+";left:"+n+";":[["top",i],["left",n]];var o=Zt.transform3dSupported,s="translate"+(o?"3d":"")+"("+n+","+i+(o?",0":"")+")";return r?"top:0;left:0;"+KP+":"+s+";":[["top",0],["left",0],[uB,s]]}function nct(e){var t=[],r=e.get("fontSize"),n=e.getTextColor();n&&t.push("color:"+n),t.push("font:"+e.getFont()),r&&t.push("line-height:"+Math.round(r*3/2)+"px");var i=e.get("textShadowColor"),o=e.get("textShadowBlur")||0,s=e.get("textShadowOffsetX")||0,a=e.get("textShadowOffsetY")||0;return i&&o&&t.push("text-shadow:"+s+"px "+a+"px "+o+"px "+i),z(["decoration","align"],function(l){var u=e.get(l);u&&t.push("text-"+l+":"+u)}),t.join(";")}function ict(e,t,r){var n=[],i=e.get("transitionDuration"),o=e.get("backgroundColor"),s=e.get("shadowBlur"),a=e.get("shadowColor"),l=e.get("shadowOffsetX"),u=e.get("shadowOffsetY"),c=e.getModel("textStyle"),f=dF(e,"html"),h=l+"px "+u+"px "+s+"px "+a;return n.push("box-shadow:"+h),t&&i&&n.push(rct(i,r)),o&&n.push("background-color:"+o),z(["width","color","radius"],function(d){var p="border-"+d,v=DN(p),m=e.get(v);m!=null&&n.push(p+":"+m+(d==="color"?"":"px"))}),n.push(nct(c)),f!=null&&n.push("padding:"+Gp(f).join("px ")+"px"),n.join(";")+";"}function U6(e,t,r,n,i){var o=t&&t.painter;if(r){var s=o&&o.getViewportRoot();s&&QZ(e,s,document.body,n,i)}else{e[0]=n,e[1]=i;var a=o&&o.getViewportRootOffset();a&&(e[0]+=a.offsetLeft,e[1]+=a.offsetTop)}e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var oct=function(){function e(t,r,n){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._firstShow=!0,this._longHide=!0,Zt.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var o=this._zr=r.getZr(),s=this._appendToBody=n&&n.appendToBody;U6(this._styleCoord,o,s,r.getWidth()/2,r.getHeight()/2),s?document.body.appendChild(i):t.appendChild(i),this._container=t;var a=this;i.onmouseenter=function(){a._enterable&&(clearTimeout(a._hideTimeout),a._show=!0),a._inContent=!0},i.onmousemove=function(l){if(l=l||window.event,!a._enterable){var u=o.handler,c=o.painter.getViewportRoot();Zn(c,l,!0),u.dispatch("mousemove",l)}},i.onmouseleave=function(){a._inContent=!1,a._enterable&&a._show&&a.hideLater(a._hideDelay)}}return e.prototype.update=function(t){var r=this._container,n=Kut(r,"position"),i=r.style;i.position!=="absolute"&&n!=="absolute"&&(i.position="relative");var o=t.get("alwaysShowContent");o&&this._moveIfResized(),this.el.className=t.get("className")||""},e.prototype.show=function(t,r){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el,i=n.style,o=this._styleCoord;n.innerHTML?i.cssText=Qut+ict(t,!this._firstShow,this._longHide)+V6(o[0],o[1],!0)+("border-color:"+fu(r)+";")+(t.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},e.prototype.setContent=function(t,r,n,i,o){var s=this.el;if(t==null){s.innerHTML="";return}var a="";if(Mt(o)&&n.get("trigger")==="item"&&!aB(n)&&(a=ect(n,i,o)),Mt(t))s.innerHTML=t+a;else if(t){s.innerHTML="",ht(t)||(t=[t]);for(var l=0;l<t.length;l++)Am(t[l])&&t[l].parentNode!==s&&s.appendChild(t[l]);if(a&&s.childNodes.length){var u=document.createElement("div");u.innerHTML=a,s.appendChild(u)}}},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},e.prototype.moveTo=function(t,r){var n=this._styleCoord;if(U6(n,this._zr,this._appendToBody,t,r),n[0]!=null&&n[1]!=null){var i=this.el.style,o=V6(n[0],n[1]);z(o,function(s){i[s[0]]=s[1]})}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},e.prototype.hide=function(){var t=this,r=this.el.style;r.visibility="hidden",r.opacity="0",Zt.transform3dSupported&&(r.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(Vt(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},e}();const sct=oct;var act=function(){function e(t){this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._zr=t.getZr(),j6(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return e.prototype.update=function(t){var r=t.get("alwaysShowContent");r&&this._moveIfResized()},e.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},e.prototype.setContent=function(t,r,n,i,o){var s=this;Rt(t)&&oe(""),this.el&&this._zr.remove(this.el);var a=n.getModel("textStyle");this.el=new rr({style:{rich:r.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:a.get("textShadowColor"),fill:n.get(["textStyle","color"]),padding:dF(n,"richText"),verticalAlign:"top",align:"left"},z:n.get("z")}),z(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(u){s.el.style[u]=n.get(u)}),z(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(u){s.el.style[u]=a.get(u)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el,r=this.el.getBoundingRect(),n=W6(t.style);return[r.width+n.left+n.right,r.height+n.top+n.bottom]},e.prototype.moveTo=function(t,r){var n=this.el;if(n){var i=this._styleCoord;j6(i,this._zr,t,r),t=i[0],r=i[1];var o=n.style,s=ua(o.borderWidth||0),a=W6(o);n.x=t+s+a.left,n.y=r+s+a.top,n.markRedraw()}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},e.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(Vt(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this._zr.remove(this.el)},e}();function ua(e){return Math.max(0,e)}function W6(e){var t=ua(e.shadowBlur||0),r=ua(e.shadowOffsetX||0),n=ua(e.shadowOffsetY||0);return{left:ua(t-r),right:ua(t+r),top:ua(t-n),bottom:ua(t+n)}}function j6(e,t,r,n){e[0]=r,e[1]=n,e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}const lct=act;var uct=new er({shape:{x:-1,y:-1,width:2,height:2}}),cct=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,n){if(!(Zt.node||!n.getDom())){var i=r.getComponent("tooltip"),o=this._renderMode=DJ(i.get("renderMode"));this._tooltipContent=o==="richText"?new lct(n):new sct(n.getDom(),n,{appendToBody:i.get("appendToBody",!0)})}},t.prototype.render=function(r,n,i){if(!(Zt.node||!i.getDom())){this.group.removeAll(),this._tooltipModel=r,this._ecModel=n,this._api=i,this._alwaysShowContent=r.get("alwaysShowContent");var o=this._tooltipContent;o.update(r),o.setEnterable(r.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&r.get("transitionDuration")?vF(this,"_updatePosition",50,"fixRate"):v3(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var r=this._tooltipModel,n=r.get("triggerOn");iB("itemTooltip",this._api,Vt(function(i,o,s){n!=="none"&&(n.indexOf(i)>=0?this._tryShow(o,s):i==="leave"&&this._hide(s))},this))},t.prototype._keepShow=function(){var r=this._tooltipModel,n=this._ecModel,i=this._api,o=r.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&o!=="none"&&o!=="click"){var s=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!i.isDisposed()&&s.manuallyShowTip(r,n,i,{x:s._lastX,y:s._lastY,dataByCoordSys:s._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(r,n,i,o){if(!(o.from===this.uid||Zt.node||!i.getDom())){var s=G6(o,i);this._ticket="";var a=o.dataByCoordSys,l=pct(o,n,i);if(l){var u=l.el.getBoundingRect().clone();u.applyTransform(l.el.transform),this._tryShow({offsetX:u.x+u.width/2,offsetY:u.y+u.height/2,target:l.el,position:o.position,positionDefault:"bottom"},s)}else if(o.tooltip&&o.x!=null&&o.y!=null){var c=uct;c.x=o.x,c.y=o.y,c.update(),ae(c).tooltipConfig={name:null,option:o.tooltip},this._tryShow({offsetX:o.x,offsetY:o.y,target:c},s)}else if(a)this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,dataByCoordSys:a,tooltipOption:o.tooltipOption},s);else if(o.seriesIndex!=null){if(this._manuallyAxisShowTip(r,n,i,o))return;var f=oB(o,n),h=f.point[0],d=f.point[1];h!=null&&d!=null&&this._tryShow({offsetX:h,offsetY:d,target:f.el,position:o.position,positionDefault:"bottom"},s)}else o.x!=null&&o.y!=null&&(i.dispatchAction({type:"updateAxisPointer",x:o.x,y:o.y}),this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,target:i.getZr().findHover(o.x,o.y).target},s))}},t.prototype.manuallyHideTip=function(r,n,i,o){var s=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&s.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,o.from!==this.uid&&this._hide(G6(o,i))},t.prototype._manuallyAxisShowTip=function(r,n,i,o){var s=o.seriesIndex,a=o.dataIndex,l=n.getComponent("axisPointer").coordSysAxesInfo;if(!(s==null||a==null||l==null)){var u=n.getSeriesByIndex(s);if(!!u){var c=u.getData(),f=Ch([c.getItemModel(a),u,(u.coordinateSystem||{}).model],this._tooltipModel);if(f.get("trigger")==="axis")return i.dispatchAction({type:"updateAxisPointer",seriesIndex:s,dataIndex:a,position:o.position}),!0}}},t.prototype._tryShow=function(r,n){var i=r.target,o=this._tooltipModel;if(!!o){this._lastX=r.offsetX,this._lastY=r.offsetY;var s=r.dataByCoordSys;if(s&&s.length)this._showAxisTooltip(s,r);else if(i){this._lastDataByCoordSys=null;var a,l;Rc(i,function(u){if(ae(u).dataIndex!=null)return a=u,!0;if(ae(u).tooltipConfig!=null)return l=u,!0},!0),a?this._showSeriesItemTooltip(r,a,n):l?this._showComponentItemTooltip(r,l,n):this._hide(n)}else this._lastDataByCoordSys=null,this._hide(n)}},t.prototype._showOrMove=function(r,n){var i=r.get("showDelay");n=Vt(n,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(n,i):n()},t.prototype._showAxisTooltip=function(r,n){var i=this._ecModel,o=this._tooltipModel,s=[n.offsetX,n.offsetY],a=Ch([n.tooltipOption],o),l=this._renderMode,u=[],c=Oa("section",{blocks:[],noHeader:!0}),f=[],h=new k2;z(r,function(_){z(_.dataByAxis,function(b){var w=i.getComponent(b.axisDim+"Axis",b.axisIndex),T=b.value;if(!(!w||T==null)){var S=rB(T,w.axis,i,b.seriesDataIndices,b.valueLabelOpt),k=Oa("section",{header:S,noHeader:!Po(S),sortBlocks:!0,blocks:[]});c.blocks.push(k),z(b.seriesDataIndices,function(A){var C=i.getSeriesByIndex(A.seriesIndex),x=A.dataIndexInside,I=C.getDataParams(x);if(!(I.dataIndex<0)){I.axisDim=b.axisDim,I.axisIndex=b.axisIndex,I.axisType=b.axisType,I.axisId=b.axisId,I.axisValue=NP(w.axis,{value:T}),I.axisValueLabel=S,I.marker=h.makeTooltipMarker("item",fu(I.color),l);var N=xM(C.formatTooltip(x,!0,null)),B=N.frag;if(B){var V=Ch([C],o).get("valueFormatter");k.blocks.push(V?at({valueFormatter:V},B):B)}N.text&&f.push(N.text),u.push(I)}})}})}),c.blocks.reverse(),f.reverse();var d=n.position,p=a.get("order"),v=NM(c,h,l,p,i.get("useUTC"),a.get("textStyle"));v&&f.unshift(v);var m=l==="richText"?`

`:"<br/>",g=f.join(m);this._showOrMove(a,function(){this._updateContentNotChangedOnAxis(r,u)?this._updatePosition(a,d,s[0],s[1],this._tooltipContent,u):this._showTooltipContent(a,g,u,Math.random()+"",s[0],s[1],d,null,h)})},t.prototype._showSeriesItemTooltip=function(r,n,i){var o=this._ecModel,s=ae(n),a=s.seriesIndex,l=o.getSeriesByIndex(a),u=s.dataModel||l,c=s.dataIndex,f=s.dataType,h=u.getData(f),d=this._renderMode,p=r.positionDefault,v=Ch([h.getItemModel(c),u,l&&(l.coordinateSystem||{}).model],this._tooltipModel,p?{position:p}:null),m=v.get("trigger");if(!(m!=null&&m!=="item")){var g=u.getDataParams(c,f),_=new k2;g.marker=_.makeTooltipMarker("item",fu(g.color),d);var b=xM(u.formatTooltip(c,!1,f)),w=v.get("order"),T=v.get("valueFormatter"),S=b.frag,k=S?NM(T?at({valueFormatter:T},S):S,_,d,w,o.get("useUTC"),v.get("textStyle")):b.text,A="item_"+u.name+"_"+c;this._showOrMove(v,function(){this._showTooltipContent(v,k,g,A,r.offsetX,r.offsetY,r.position,r.target,_)}),i({type:"showTip",dataIndexInside:c,dataIndex:h.getRawIndex(c),seriesIndex:a,from:this.uid})}},t.prototype._showComponentItemTooltip=function(r,n,i){var o=ae(n),s=o.tooltipConfig,a=s.option||{};if(Mt(a)){var l=a;a={content:l,formatter:l}}var u=[a],c=this._ecModel.getComponent(o.componentMainType,o.componentIndex);c&&u.push(c),u.push({formatter:a.content});var f=r.positionDefault,h=Ch(u,this._tooltipModel,f?{position:f}:null),d=h.get("content"),p=Math.random()+"",v=new k2;this._showOrMove(h,function(){var m=$t(h.get("formatterParams")||{});this._showTooltipContent(h,d,m,p,r.offsetX,r.offsetY,r.position,n,v)}),i({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(r,n,i,o,s,a,l,u,c){if(this._ticket="",!(!r.get("showContent")||!r.get("show"))){var f=this._tooltipContent;f.setEnterable(r.get("enterable"));var h=r.get("formatter");l=l||r.get("position");var d=n,p=this._getNearestPoint([s,a],i,r.get("trigger"),r.get("borderColor")),v=p.color;if(h)if(Mt(h)){var m=r.ecModel.get("useUTC"),g=ht(i)?i[0]:i,_=g&&g.axisType&&g.axisType.indexOf("time")>=0;d=h,_&&(d=u_(g.axisValue,d,m)),d=NN(d,i,!0)}else if(jt(h)){var b=Vt(function(w,T){w===this._ticket&&(f.setContent(T,c,r,v,l),this._updatePosition(r,l,s,a,f,i,u))},this);this._ticket=o,d=h(i,o,b)}else d=h;f.setContent(d,c,r,v,l),f.show(r,v),this._updatePosition(r,l,s,a,f,i,u)}},t.prototype._getNearestPoint=function(r,n,i,o){if(i==="axis"||ht(n))return{color:o||(this._renderMode==="html"?"#fff":"none")};if(!ht(n))return{color:o||n.color||n.borderColor}},t.prototype._updatePosition=function(r,n,i,o,s,a,l){var u=this._api.getWidth(),c=this._api.getHeight();n=n||r.get("position");var f=s.getSize(),h=r.get("align"),d=r.get("verticalAlign"),p=l&&l.getBoundingRect().clone();if(l&&p.applyTransform(l.transform),jt(n)&&(n=n([i,o],a,s.el,p,{viewSize:[u,c],contentSize:f.slice()})),ht(n))i=Ye(n[0],u),o=Ye(n[1],c);else if(Rt(n)){var v=n;v.width=f[0],v.height=f[1];var m=Ia(v,{width:u,height:c});i=m.x,o=m.y,h=null,d=null}else if(Mt(n)&&l){var g=dct(n,p,f,r.get("borderWidth"));i=g[0],o=g[1]}else{var g=fct(i,o,s,u,c,h?null:20,d?null:20);i=g[0],o=g[1]}if(h&&(i-=H6(h)?f[0]/2:h==="right"?f[0]:0),d&&(o-=H6(d)?f[1]/2:d==="bottom"?f[1]:0),aB(r)){var g=hct(i,o,s,u,c);i=g[0],o=g[1]}s.moveTo(i,o)},t.prototype._updateContentNotChangedOnAxis=function(r,n){var i=this._lastDataByCoordSys,o=this._cbParamsList,s=!!i&&i.length===r.length;return s&&z(i,function(a,l){var u=a.dataByAxis||[],c=r[l]||{},f=c.dataByAxis||[];s=s&&u.length===f.length,s&&z(u,function(h,d){var p=f[d]||{},v=h.seriesDataIndices||[],m=p.seriesDataIndices||[];s=s&&h.value===p.value&&h.axisType===p.axisType&&h.axisId===p.axisId&&v.length===m.length,s&&z(v,function(g,_){var b=m[_];s=s&&g.seriesIndex===b.seriesIndex&&g.dataIndex===b.dataIndex}),o&&z(h.seriesDataIndices,function(g){var _=g.seriesIndex,b=n[_],w=o[_];b&&w&&w.data!==b.data&&(s=!1)})})}),this._lastDataByCoordSys=r,this._cbParamsList=n,!!s},t.prototype._hide=function(r){this._lastDataByCoordSys=null,r({type:"hideTip",from:this.uid})},t.prototype.dispose=function(r,n){Zt.node||!n.getDom()||(v3(this,"_updatePosition"),this._tooltipContent.dispose(),z3("itemTooltip",n))},t.type="tooltip",t}(ci);function Ch(e,t,r){var n=t.ecModel,i;r?(i=new Mr(r,n,n),i=new Mr(t.option,i,n)):i=t;for(var o=e.length-1;o>=0;o--){var s=e[o];s&&(s instanceof Mr&&(s=s.get("tooltip",!0)),Mt(s)&&(s={formatter:s}),s&&(i=new Mr(s,i,n)))}return i}function G6(e,t){return e.dispatchAction||Vt(t.dispatchAction,t)}function fct(e,t,r,n,i,o,s){var a=r.getSize(),l=a[0],u=a[1];return o!=null&&(e+l+o+2>n?e-=l+o:e+=o),s!=null&&(t+u+s>i?t-=u+s:t+=s),[e,t]}function hct(e,t,r,n,i){var o=r.getSize(),s=o[0],a=o[1];return e=Math.min(e+s,n)-s,t=Math.min(t+a,i)-a,e=Math.max(e,0),t=Math.max(t,0),[e,t]}function dct(e,t,r,n){var i=r[0],o=r[1],s=Math.ceil(Math.SQRT2*n)+8,a=0,l=0,u=t.width,c=t.height;switch(e){case"inside":a=t.x+u/2-i/2,l=t.y+c/2-o/2;break;case"top":a=t.x+u/2-i/2,l=t.y-o-s;break;case"bottom":a=t.x+u/2-i/2,l=t.y+c+s;break;case"left":a=t.x-i-s,l=t.y+c/2-o/2;break;case"right":a=t.x+u+s,l=t.y+c/2-o/2}return[a,l]}function H6(e){return e==="center"||e==="middle"}function pct(e,t,r){var n=Zk(e).queryOptionMap,i=n.keys()[0];if(!(!i||i==="series")){var o=Up(t,i,n.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),s=o.models[0];if(!!s){var a=r.getViewOfComponentModel(s),l;if(a.group.traverse(function(u){var c=ae(u).tooltipConfig;if(c&&c.name===e.name)return l=u,!0}),l)return{componentMainType:i,componentIndex:s.componentIndex,el:l}}}}const vct=cct;function $a(e){yr(sB),e.registerComponentModel(qut),e.registerComponentView(vct),e.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},Hr),e.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},Hr)}var X6=z;function Y6(e){if(e){for(var t in e)if(e.hasOwnProperty(t))return!0}}function q6(e,t,r){var n={};return X6(t,function(o){var s=n[o]=i();X6(e[o],function(a,l){if(!!bn.isValidType(l)){var u={type:l,visual:a};r&&r(u,o),s[l]=new bn(u),l==="opacity"&&(u=$t(u),u.type="colorAlpha",s.__hidden.__alphaForOpacity=new bn(u))}})}),n;function i(){var o=function(){};o.prototype.__hidden=o.prototype;var s=new o;return s}}function gct(e,t,r){var n;z(r,function(i){t.hasOwnProperty(i)&&Y6(t[i])&&(n=!0)}),n&&z(r,function(i){t.hasOwnProperty(i)&&Y6(t[i])?e[i]=$t(t[i]):delete e[i]})}function mct(e,t,r,n){var i={};return z(e,function(o){var s=bn.prepareVisualTypes(t[o]);i[o]=s}),{progress:function(s,a){var l;n!=null&&(l=a.getDimensionIndex(n));function u(T){return TF(a,f,T)}function c(T,S){_nt(a,f,T,S)}for(var f,h=a.getStore();(f=s.next())!=null;){var d=a.getRawDataItem(f);if(!(d&&d.visualMap===!1))for(var p=n!=null?h.get(l,f):f,v=r(p),m=t[v],g=i[v],_=0,b=g.length;_<b;_++){var w=g[_];m[w]&&m[w].applyVisual(p,u,c)}}}}}var _ct=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(Me),yct=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){if(this.group.removeAll(),!!r.get("show")){var o=this.group,s=r.getModel("textStyle"),a=r.getModel("subtextStyle"),l=r.get("textAlign"),u=Jt(r.get("textBaseline"),r.get("textVerticalAlign")),c=new rr({style:yn(s,{text:r.get("text"),fill:s.getTextColor()},{disableBox:!0}),z2:10}),f=c.getBoundingRect(),h=r.get("subtext"),d=new rr({style:yn(a,{text:h,fill:a.getTextColor(),y:f.height+r.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),p=r.get("link"),v=r.get("sublink"),m=r.get("triggerEvent",!0);c.silent=!p&&!m,d.silent=!v&&!m,p&&c.on("click",function(){hM(p,"_"+r.get("target"))}),v&&d.on("click",function(){hM(v,"_"+r.get("subtarget"))}),ae(c).eventData=ae(d).eventData=m?{componentType:"title",componentIndex:r.componentIndex}:null,o.add(c),h&&o.add(d);var g=o.getBoundingRect(),_=r.getBoxLayoutParams();_.width=g.width,_.height=g.height;var b=Ia(_,{width:i.getWidth(),height:i.getHeight()},r.get("padding"));l||(l=r.get("left")||r.get("right"),l==="middle"&&(l="center"),l==="right"?b.x+=b.width:l==="center"&&(b.x+=b.width/2)),u||(u=r.get("top")||r.get("bottom"),u==="center"&&(u="middle"),u==="bottom"?b.y+=b.height:u==="middle"&&(b.y+=b.height/2),u=u||"top"),o.x=b.x,o.y=b.y,o.markRedraw();var w={align:l,verticalAlign:u};c.setStyle(w),d.setStyle(w),g=o.getBoundingRect();var T=b.margin,S=r.getItemStyle(["color","opacity"]);S.fill=r.get("backgroundColor");var k=new er({shape:{x:g.x-T[3],y:g.y-T[0],width:g.width+T[1]+T[3],height:g.height+T[0]+T[2],r:r.get("borderRadius")},style:S,subPixelOptimize:!0,silent:!0});o.add(k)}},t.type="title",t}(ci);function Va(e){e.registerComponentModel(_ct),e.registerComponentView(yct)}function fB(e,t){if(!e)return!1;for(var r=ht(e)?e:[e],n=0;n<r.length;n++)if(r[n]&&r[n][t])return!0;return!1}function pv(e){qS(e,"label",["show"])}var vv=Re(),hB=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.createdBySelf=!1,r}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i),this._mergeOption(r,i,!1,!0)},t.prototype.isAnimationEnabled=function(){if(Zt.node)return!1;var r=this.__hostSeries;return this.getShallow("animation")&&r&&r.isAnimationEnabled()},t.prototype.mergeOption=function(r,n){this._mergeOption(r,n,!1,!1)},t.prototype._mergeOption=function(r,n,i,o){var s=this.mainType;i||n.eachSeries(function(a){var l=a.get(this.mainType,!0),u=vv(a)[s];if(!l||!l.data){vv(a)[s]=null;return}u?u._mergeOption(l,n,!0):(o&&pv(l),z(l.data,function(c){c instanceof Array?(pv(c[0]),pv(c[1])):pv(c)}),u=this.createMarkerModelFromSeries(l,this,n),at(u,{mainType:this.mainType,seriesIndex:a.seriesIndex,name:a.name,createdBySelf:!0}),u.__hostSeries=a),vv(a)[s]=u},this)},t.prototype.formatTooltip=function(r,n,i){var o=this.getData(),s=this.getRawValue(r),a=o.getName(r);return Oa("section",{header:this.name,blocks:[Oa("nameValue",{name:a,value:s,noName:!a,noValue:s==null})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(r){this._data=r},t.getMarkerModelFromSeries=function(r,n){return vv(r)[n]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(Me);Gi(hB,tF.prototype);const ff=hB;function B3(e){return!(isNaN(parseFloat(e.x))&&isNaN(parseFloat(e.y)))}function bct(e){return!isNaN(parseFloat(e.x))&&!isNaN(parseFloat(e.y))}function gv(e,t,r,n,i,o){var s=[],a=hu(t,n),l=a?t.getCalculationInfo("stackResultDimension"):n,u=JP(t,l,e),c=t.indicesOfNearest(l,u)[0];s[i]=t.get(r,c),s[o]=t.get(l,c);var f=t.get(n,c),h=Eo(t.get(n,c));return h=Math.min(h,20),h>=0&&(s[o]=+s[o].toFixed(h)),[s,f]}var ob={min:be(gv,"min"),max:be(gv,"max"),average:be(gv,"average"),median:be(gv,"median")};function e1(e,t){var r=e.getData(),n=e.coordinateSystem;if(t&&!bct(t)&&!ht(t.coord)&&n){var i=n.dimensions,o=dB(t,r,n,e);if(t=$t(t),t.type&&ob[t.type]&&o.baseAxis&&o.valueAxis){var s=he(i,o.baseAxis.dim),a=he(i,o.valueAxis.dim),l=ob[t.type](r,o.baseDataDim,o.valueDataDim,s,a);t.coord=l[0],t.value=l[1]}else{for(var u=[t.xAxis!=null?t.xAxis:t.radiusAxis,t.yAxis!=null?t.yAxis:t.angleAxis],c=0;c<2;c++)ob[u[c]]&&(u[c]=JP(r,r.mapDimension(i[c]),u[c]));t.coord=u}}return t}function dB(e,t,r,n){var i={};return e.valueIndex!=null||e.valueDim!=null?(i.valueDataDim=e.valueIndex!=null?t.getDimension(e.valueIndex):e.valueDim,i.valueAxis=r.getAxis(wct(n,i.valueDataDim)),i.baseAxis=r.getOtherAxis(i.valueAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim)):(i.baseAxis=n.getBaseAxis(),i.valueAxis=r.getOtherAxis(i.baseAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim),i.valueDataDim=t.mapDimension(i.valueAxis.dim)),i}function wct(e,t){var r=e.getData().getDimensionInfo(t);return r&&r.coordDim}function r1(e,t){return e&&e.containData&&t.coord&&!B3(t)?e.containData(t.coord):!0}function Sct(e,t,r){return e&&e.containZone&&t.coord&&r.coord&&!B3(t)&&!B3(r)?e.containZone(t.coord,r.coord):!0}function Tct(e,t){return e?function(r,n,i,o){var s=o<2?r.coord&&r.coord[o]:r.value;return ka(s,t[o])}:function(r,n,i,o){return ka(r.value,t[o])}}function JP(e,t,r){if(r==="average"){var n=0,i=0;return e.each(t,function(o,s){isNaN(o)||(n+=o,i++)}),n/i}else return r==="median"?e.getMedian(t):e.getDataExtent(t)[r==="max"?1:0]}var sb=Re(),kct=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(){this.markerGroupMap=Xt()},t.prototype.render=function(r,n,i){var o=this,s=this.markerGroupMap;s.each(function(a){sb(a).keep=!1}),n.eachSeries(function(a){var l=ff.getMarkerModelFromSeries(a,o.type);l&&o.renderSeries(a,l,n,i)}),s.each(function(a){!sb(a).keep&&o.group.remove(a.group)})},t.prototype.markKeep=function(r){sb(r).keep=!0},t.prototype.toggleBlurSeries=function(r,n){var i=this;z(r,function(o){var s=ff.getMarkerModelFromSeries(o,i.type);if(s){var a=s.getData();a.eachItemGraphicEl(function(l){l&&(n?j7(l):rP(l))})}})},t.type="marker",t}(ci);const pB=kct;var Pct=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,n,i){return new t(r,n,i)},t.type="markLine",t.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},t}(ff);const Ect=Pct;var mv=Re(),Cct=function(e,t,r,n){var i=e.getData(),o;if(ht(n))o=n;else{var s=n.type;if(s==="min"||s==="max"||s==="average"||s==="median"||n.xAxis!=null||n.yAxis!=null){var a=void 0,l=void 0;if(n.yAxis!=null||n.xAxis!=null)a=t.getAxis(n.yAxis!=null?"y":"x"),l=xi(n.yAxis,n.xAxis);else{var u=dB(n,i,t,e);a=u.valueAxis;var c=ez(i,u.valueDataDim);l=JP(i,c,s)}var f=a.dim==="x"?0:1,h=1-f,d=$t(n),p={coord:[]};d.type=null,d.coord=[],d.coord[h]=-1/0,p.coord[h]=1/0;var v=r.get("precision");v>=0&&Se(l)&&(l=+l.toFixed(Math.min(v,20))),d.coord[f]=p.coord[f]=l,o=[d,p,{type:s,valueIndex:n.valueIndex,value:l}]}else o=[]}var m=[e1(e,o[0]),e1(e,o[1]),at({},o[2])];return m[2].type=m[2].type||null,le(m[2],m[0]),le(m[2],m[1]),m};function n1(e){return!isNaN(e)&&!isFinite(e)}function Z6(e,t,r,n){var i=1-e,o=n.dimensions[e];return n1(t[i])&&n1(r[i])&&t[e]===r[e]&&n.getAxis(o).containData(t[e])}function Act(e,t){if(e.type==="cartesian2d"){var r=t[0].coord,n=t[1].coord;if(r&&n&&(Z6(1,r,n,e)||Z6(0,r,n,e)))return!0}return r1(e,t[0])&&r1(e,t[1])}function ab(e,t,r,n,i){var o=n.coordinateSystem,s=e.getItemModel(t),a,l=Ye(s.get("x"),i.getWidth()),u=Ye(s.get("y"),i.getHeight());if(!isNaN(l)&&!isNaN(u))a=[l,u];else{if(n.getMarkerPosition)a=n.getMarkerPosition(e.getValues(e.dimensions,t));else{var c=o.dimensions,f=e.get(c[0],t),h=e.get(c[1],t);a=o.dataToPoint([f,h])}if(xf(o,"cartesian2d")){var d=o.getAxis("x"),p=o.getAxis("y"),c=o.dimensions;n1(e.get(c[0],t))?a[0]=d.toGlobalCoord(d.getExtent()[r?0:1]):n1(e.get(c[1],t))&&(a[1]=p.toGlobalCoord(p.getExtent()[r?0:1]))}isNaN(l)||(a[0]=l),isNaN(u)||(a[1]=u)}e.setItemLayout(t,a)}var Mct=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,n,i){n.eachSeries(function(o){var s=ff.getMarkerModelFromSeries(o,"markLine");if(s){var a=s.getData(),l=mv(s).from,u=mv(s).to;l.each(function(c){ab(l,c,!0,o,i),ab(u,c,!1,o,i)}),a.each(function(c){a.setItemLayout(c,[l.getItemLayout(c),u.getItemLayout(c)])}),this.markerGroupMap.get(o.id).updateLayout()}},this)},t.prototype.renderSeries=function(r,n,i,o){var s=r.coordinateSystem,a=r.id,l=r.getData(),u=this.markerGroupMap,c=u.get(a)||u.set(a,new Clt);this.group.add(c.group);var f=xct(s,r,n),h=f.from,d=f.to,p=f.line;mv(n).from=h,mv(n).to=d,n.setData(p);var v=n.get("symbol"),m=n.get("symbolSize"),g=n.get("symbolRotate"),_=n.get("symbolOffset");ht(v)||(v=[v,v]),ht(m)||(m=[m,m]),ht(g)||(g=[g,g]),ht(_)||(_=[_,_]),f.from.each(function(w){b(h,w,!0),b(d,w,!1)}),p.each(function(w){var T=p.getItemModel(w).getModel("lineStyle").getLineStyle();p.setItemLayout(w,[h.getItemLayout(w),d.getItemLayout(w)]),T.stroke==null&&(T.stroke=h.getItemVisual(w,"style").fill),p.setItemVisual(w,{fromSymbolKeepAspect:h.getItemVisual(w,"symbolKeepAspect"),fromSymbolOffset:h.getItemVisual(w,"symbolOffset"),fromSymbolRotate:h.getItemVisual(w,"symbolRotate"),fromSymbolSize:h.getItemVisual(w,"symbolSize"),fromSymbol:h.getItemVisual(w,"symbol"),toSymbolKeepAspect:d.getItemVisual(w,"symbolKeepAspect"),toSymbolOffset:d.getItemVisual(w,"symbolOffset"),toSymbolRotate:d.getItemVisual(w,"symbolRotate"),toSymbolSize:d.getItemVisual(w,"symbolSize"),toSymbol:d.getItemVisual(w,"symbol"),style:T})}),c.updateData(p),f.line.eachItemGraphicEl(function(w){ae(w).dataModel=n,w.traverse(function(T){ae(T).dataModel=n})});function b(w,T,S){var k=w.getItemModel(T);ab(w,T,S,r,o);var A=k.getModel("itemStyle").getItemStyle();A.fill==null&&(A.fill=y_(l,"color")),w.setItemVisual(T,{symbolKeepAspect:k.get("symbolKeepAspect"),symbolOffset:Jt(k.get("symbolOffset",!0),_[S?0:1]),symbolRotate:Jt(k.get("symbolRotate",!0),g[S?0:1]),symbolSize:Jt(k.get("symbolSize"),m[S?0:1]),symbol:Jt(k.get("symbol",!0),v[S?0:1]),style:A})}this.markKeep(c),c.group.silent=n.get("silent")||r.get("silent")},t.type="markLine",t}(pB);function xct(e,t,r){var n;e?n=Lt(e&&e.dimensions,function(u){var c=t.getData().getDimensionInfo(t.getData().mapDimension(u))||{};return at(at({},c),{name:u,ordinalMeta:null})}):n=[{name:"value",type:"float"}];var i=new Zl(n,r),o=new Zl(n,r),s=new Zl([],r),a=Lt(r.get("data"),be(Cct,t,e,r));e&&(a=Cr(a,be(Act,e)));var l=Tct(!!e,n);return i.initData(Lt(a,function(u){return u[0]}),null,l),o.initData(Lt(a,function(u){return u[1]}),null,l),s.initData(Lt(a,function(u){return u[2]})),s.hasItemOption=!0,{from:i,to:o,line:s}}const Lct=Mct;function If(e){e.registerComponentModel(Ect),e.registerComponentView(Lct),e.registerPreprocessor(function(t){fB(t.series,"markLine")&&(t.markLine=t.markLine||{})})}var Ict=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,n,i){return new t(r,n,i)},t.type="markArea",t.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},t}(ff);const Oct=Ict;var _v=Re(),Rct=function(e,t,r,n){var i=e1(e,n[0]),o=e1(e,n[1]),s=i.coord,a=o.coord;s[0]=xi(s[0],-1/0),s[1]=xi(s[1],-1/0),a[0]=xi(a[0],1/0),a[1]=xi(a[1],1/0);var l=NZ([{},i,o]);return l.coord=[i.coord,o.coord],l.x0=i.x,l.y0=i.y,l.x1=o.x,l.y1=o.y,l};function i1(e){return!isNaN(e)&&!isFinite(e)}function K6(e,t,r,n){var i=1-e;return i1(t[i])&&i1(r[i])}function Dct(e,t){var r=t.coord[0],n=t.coord[1],i={coord:r,x:t.x0,y:t.y0},o={coord:n,x:t.x1,y:t.y1};return xf(e,"cartesian2d")?r&&n&&(K6(1,r,n)||K6(0,r,n))?!0:Sct(e,i,o):r1(e,i)||r1(e,o)}function J6(e,t,r,n,i){var o=n.coordinateSystem,s=e.getItemModel(t),a,l=Ye(s.get(r[0]),i.getWidth()),u=Ye(s.get(r[1]),i.getHeight());if(!isNaN(l)&&!isNaN(u))a=[l,u];else{if(n.getMarkerPosition)a=n.getMarkerPosition(e.getValues(r,t));else{var c=e.get(r[0],t),f=e.get(r[1],t),h=[c,f];o.clampData&&o.clampData(h,h),a=o.dataToPoint(h,!0)}if(xf(o,"cartesian2d")){var d=o.getAxis("x"),p=o.getAxis("y"),c=e.get(r[0],t),f=e.get(r[1],t);i1(c)?a[0]=d.toGlobalCoord(d.getExtent()[r[0]==="x0"?0:1]):i1(f)&&(a[1]=p.toGlobalCoord(p.getExtent()[r[1]==="y0"?0:1]))}isNaN(l)||(a[0]=l),isNaN(u)||(a[1]=u)}return a}var Q6=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],Nct=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,n,i){n.eachSeries(function(o){var s=ff.getMarkerModelFromSeries(o,"markArea");if(s){var a=s.getData();a.each(function(l){var u=Lt(Q6,function(f){return J6(a,l,f,o,i)});a.setItemLayout(l,u);var c=a.getItemGraphicEl(l);c.setShape("points",u)})}},this)},t.prototype.renderSeries=function(r,n,i,o){var s=r.coordinateSystem,a=r.id,l=r.getData(),u=this.markerGroupMap,c=u.get(a)||u.set(a,{group:new Ne});this.group.add(c.group),this.markKeep(c);var f=Fct(s,r,n);n.setData(f),f.each(function(h){var d=Lt(Q6,function(A){return J6(f,h,A,r,o)}),p=s.getAxis("x").scale,v=s.getAxis("y").scale,m=p.getExtent(),g=v.getExtent(),_=[p.parse(f.get("x0",h)),p.parse(f.get("x1",h))],b=[v.parse(f.get("y0",h)),v.parse(f.get("y1",h))];zm(_),zm(b);var w=!(m[0]>_[1]||m[1]<_[0]||g[0]>b[1]||g[1]<b[0]),T=!w;f.setItemLayout(h,{points:d,allClipped:T});var S=f.getItemModel(h).getModel("itemStyle").getItemStyle(),k=y_(l,"color");S.fill||(S.fill=k,Mt(S.fill)&&(S.fill=$S(S.fill,.4))),S.stroke||(S.stroke=k),f.setItemVisual(h,"style",S)}),f.diff(_v(c).data).add(function(h){var d=f.getItemLayout(h);if(!d.allClipped){var p=new up({shape:{points:d.points}});f.setItemGraphicEl(h,p),c.group.add(p)}}).update(function(h,d){var p=_v(c).data.getItemGraphicEl(d),v=f.getItemLayout(h);v.allClipped?p&&c.group.remove(p):(p?_r(p,{shape:{points:v.points}},n,h):p=new up({shape:{points:v.points}}),f.setItemGraphicEl(h,p),c.group.add(p))}).remove(function(h){var d=_v(c).data.getItemGraphicEl(h);c.group.remove(d)}).execute(),f.eachItemGraphicEl(function(h,d){var p=f.getItemModel(d),v=f.getItemVisual(d,"style");h.useStyle(f.getItemVisual(d,"style")),Cf(h,Tu(p),{labelFetcher:n,labelDataIndex:d,defaultText:f.getName(d)||"",inheritColor:Mt(v.fill)?$S(v.fill,1):"#000"}),lp(h,p),uu(h,null,null,p.get(["emphasis","disabled"])),ae(h).dataModel=n}),_v(c).data=f,c.group.silent=n.get("silent")||r.get("silent")},t.type="markArea",t}(pB);function Fct(e,t,r){var n,i,o=["x0","y0","x1","y1"];if(e){var s=Lt(e&&e.dimensions,function(u){var c=t.getData(),f=c.getDimensionInfo(c.mapDimension(u))||{};return at(at({},f),{name:u,ordinalMeta:null})});i=Lt(o,function(u,c){return{name:u,type:s[c%2].type}}),n=new Zl(i,r)}else i=[{name:"value",type:"float"}],n=new Zl(i,r);var a=Lt(r.get("data"),be(Rct,t,e,r));e&&(a=Cr(a,be(Dct,e)));var l=e?function(u,c,f,h){var d=u.coord[Math.floor(h/2)][h%2];return ka(d,i[h])}:function(u,c,f,h){return ka(u.value,i[h])};return n.initData(a,null,l),n.hasItemOption=!0,n}const zct=Nct;function xu(e){e.registerComponentModel(Oct),e.registerComponentView(zct),e.registerPreprocessor(function(t){fB(t.series,"markArea")&&(t.markArea=t.markArea||{})})}var Bct=function(e,t){if(t==="all")return{type:"all",title:e.getLocaleModel().get(["legend","selector","all"])};if(t==="inverse")return{type:"inverse",title:e.getLocaleModel().get(["legend","selector","inverse"])}},$ct=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i),r.selected=r.selected||{},this._updateSelector(r)},t.prototype.mergeOption=function(r,n){e.prototype.mergeOption.call(this,r,n),this._updateSelector(r)},t.prototype._updateSelector=function(r){var n=r.selector,i=this.ecModel;n===!0&&(n=r.selector=["all","inverse"]),ht(n)&&z(n,function(o,s){Mt(o)&&(o={type:o}),n[s]=le(o,Bct(i,o.type))})},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var r=this._data;if(r[0]&&this.get("selectedMode")==="single"){for(var n=!1,i=0;i<r.length;i++){var o=r[i].get("name");if(this.isSelected(o)){this.select(o),n=!0;break}}!n&&this.select(r[0].get("name"))}},t.prototype._updateData=function(r){var n=[],i=[];r.eachRawSeries(function(a){var l=a.name;i.push(l);var u;if(a.legendVisualProvider){var c=a.legendVisualProvider,f=c.getAllNames();r.isSeriesFiltered(a)||(i=i.concat(f)),f.length?n=n.concat(f):u=!0}else u=!0;u&&qk(a)&&n.push(a.name)}),this._availableNames=i;var o=this.get("data")||n,s=Lt(o,function(a){return(Mt(a)||Se(a))&&(a={name:a}),new Mr(a,this,this.ecModel)},this);this._data=s},t.prototype.getData=function(){return this._data},t.prototype.select=function(r){var n=this.option.selected,i=this.get("selectedMode");if(i==="single"){var o=this._data;z(o,function(s){n[s.get("name")]=!1})}n[r]=!0},t.prototype.unSelect=function(r){this.get("selectedMode")!=="single"&&(this.option.selected[r]=!1)},t.prototype.toggleSelected=function(r){var n=this.option.selected;n.hasOwnProperty(r)||(n[r]=!0),this[n[r]?"unSelect":"select"](r)},t.prototype.allSelect=function(){var r=this._data,n=this.option.selected;z(r,function(i){n[i.get("name",!0)]=!0})},t.prototype.inverseSelect=function(){var r=this._data,n=this.option.selected;z(r,function(i){var o=i.get("name",!0);n.hasOwnProperty(o)||(n[o]=!0),n[o]=!n[o]})},t.prototype.isSelected=function(r){var n=this.option.selected;return!(n.hasOwnProperty(r)&&!n[r])&&he(this._availableNames,r)>=0},t.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(Me);const $3=$ct;var oc=be,V3=z,yv=Ne,Vct=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.newlineDisabled=!1,r}return t.prototype.init=function(){this.group.add(this._contentGroup=new yv),this.group.add(this._selectorGroup=new yv),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(r,n,i){var o=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!r.get("show",!0)){var s=r.get("align"),a=r.get("orient");(!s||s==="auto")&&(s=r.get("left")==="right"&&a==="vertical"?"right":"left");var l=r.get("selector",!0),u=r.get("selectorPosition",!0);l&&(!u||u==="auto")&&(u=a==="horizontal"?"end":"start"),this.renderInner(s,r,n,i,l,a,u);var c=r.getBoxLayoutParams(),f={width:i.getWidth(),height:i.getHeight()},h=r.get("padding"),d=Ia(c,f,h),p=this.layoutInner(r,s,d,o,l,u),v=Ia(ne({width:p.width,height:p.height},c),f,h);this.group.x=v.x-p.x,this.group.y=v.y-p.y,this.group.markRedraw(),this.group.add(this._backgroundEl=Xut(p,r))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(r,n,i,o,s,a,l){var u=this.getContentGroup(),c=Xt(),f=n.get("selectedMode"),h=[];i.eachRawSeries(function(d){!d.get("legendHoverLink")&&h.push(d.id)}),V3(n.getData(),function(d,p){var v=d.get("name");if(!this.newlineDisabled&&(v===""||v===`
`)){var m=new yv;m.newline=!0,u.add(m);return}var g=i.getSeriesByName(v)[0];if(!c.get(v))if(g){var _=g.getData(),b=_.getVisual("legendLineStyle")||{},w=_.getVisual("legendIcon"),T=_.getVisual("style"),S=this._createItem(g,v,p,d,n,r,b,T,w,f,o);S.on("click",oc(tx,v,null,o,h)).on("mouseover",oc(U3,g.name,null,o,h)).on("mouseout",oc(W3,g.name,null,o,h)),c.set(v,!0)}else i.eachRawSeries(function(k){if(!c.get(v)&&k.legendVisualProvider){var A=k.legendVisualProvider;if(!A.containName(v))return;var C=A.indexOfName(v),x=A.getItemVisual(C,"style"),I=A.getItemVisual(C,"legendIcon"),N=ni(x.fill);N&&N[3]===0&&(N[3]=.2,x=at(at({},x),{fill:ds(N,"rgba")}));var B=this._createItem(k,v,p,d,n,r,{},x,I,f,o);B.on("click",oc(tx,null,v,o,h)).on("mouseover",oc(U3,null,v,o,h)).on("mouseout",oc(W3,null,v,o,h)),c.set(v,!0)}},this)},this),s&&this._createSelector(s,n,o,a,l)},t.prototype._createSelector=function(r,n,i,o,s){var a=this.getSelectorGroup();V3(r,function(u){var c=u.type,f=new rr({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:c==="all"?"legendAllSelect":"legendInverseSelect"})}});a.add(f);var h=n.getModel("selectorLabel"),d=n.getModel(["emphasis","selectorLabel"]);Cf(f,{normal:h,emphasis:d},{defaultText:u.title}),n3(f)})},t.prototype._createItem=function(r,n,i,o,s,a,l,u,c,f,h){var d=r.visualDrawType,p=s.get("itemWidth"),v=s.get("itemHeight"),m=s.isSelected(n),g=o.get("symbolRotate"),_=o.get("symbolKeepAspect"),b=o.get("icon");c=b||c||"roundRect";var w=Uct(c,o,l,u,d,m,h),T=new yv,S=o.getModel("textStyle");if(jt(r.getLegendIcon)&&(!b||b==="inherit"))T.add(r.getLegendIcon({itemWidth:p,itemHeight:v,icon:c,iconRotate:g,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:_}));else{var k=b==="inherit"&&r.getData().getVisual("symbol")?g==="inherit"?r.getData().getVisual("symbolRotate"):g:0;T.add(Wct({itemWidth:p,itemHeight:v,icon:c,iconRotate:k,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:_}))}var A=a==="left"?p+5:-5,C=a,x=s.get("formatter"),I=n;Mt(x)&&x?I=x.replace("{name}",n!=null?n:""):jt(x)&&(I=x(n));var N=o.get("inactiveColor");T.add(new rr({style:yn(S,{text:I,x:A,y:v/2,fill:m?S.getTextColor():N,align:C,verticalAlign:"middle"})}));var B=new er({shape:T.getBoundingRect(),invisible:!0}),V=o.getModel("tooltip");return V.get("show")&&fP({el:B,componentModel:s,itemName:n,itemTooltipOption:V.option}),T.add(B),T.eachChild(function(F){F.silent=!0}),B.silent=!f,this.getContentGroup().add(T),n3(T),T.__legendDataIndex=i,T},t.prototype.layoutInner=function(r,n,i,o,s,a){var l=this.getContentGroup(),u=this.getSelectorGroup();qc(r.get("orient"),l,r.get("itemGap"),i.width,i.height);var c=l.getBoundingRect(),f=[-c.x,-c.y];if(u.markRedraw(),l.markRedraw(),s){qc("horizontal",u,r.get("selectorItemGap",!0));var h=u.getBoundingRect(),d=[-h.x,-h.y],p=r.get("selectorButtonGap",!0),v=r.getOrient().index,m=v===0?"width":"height",g=v===0?"height":"width",_=v===0?"y":"x";a==="end"?d[v]+=c[m]+p:f[v]+=h[m]+p,d[1-v]+=c[g]/2-h[g]/2,u.x=d[0],u.y=d[1],l.x=f[0],l.y=f[1];var b={x:0,y:0};return b[m]=c[m]+p+h[m],b[g]=Math.max(c[g],h[g]),b[_]=Math.min(0,h[_]+d[1-v]),b}else return l.x=f[0],l.y=f[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(ci);function Uct(e,t,r,n,i,o,s){function a(m,g){m.lineWidth==="auto"&&(m.lineWidth=g.lineWidth>0?2:0),V3(m,function(_,b){m[b]==="inherit"&&(m[b]=g[b])})}var l=t.getModel("itemStyle"),u=l.getItemStyle(),c=e.lastIndexOf("empty",0)===0?"fill":"stroke",f=l.getShallow("decal");u.decal=!f||f==="inherit"?n.decal:qm(f,s),u.fill==="inherit"&&(u.fill=n[i]),u.stroke==="inherit"&&(u.stroke=n[c]),u.opacity==="inherit"&&(u.opacity=(i==="fill"?n:r).opacity),a(u,n);var h=t.getModel("lineStyle"),d=h.getLineStyle();if(a(d,r),u.fill==="auto"&&(u.fill=n.fill),u.stroke==="auto"&&(u.stroke=n.fill),d.stroke==="auto"&&(d.stroke=n.fill),!o){var p=t.get("inactiveBorderWidth"),v=u[c];u.lineWidth=p==="auto"?n.lineWidth>0&&v?2:0:u.lineWidth,u.fill=t.get("inactiveColor"),u.stroke=t.get("inactiveBorderColor"),d.stroke=h.get("inactiveColor"),d.lineWidth=h.get("inactiveWidth")}return{itemStyle:u,lineStyle:d}}function Wct(e){var t=e.icon||"roundRect",r=Ui(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill,e.symbolKeepAspect);return r.setStyle(e.itemStyle),r.rotation=(e.iconRotate||0)*Math.PI/180,r.setOrigin([e.itemWidth/2,e.itemHeight/2]),t.indexOf("empty")>-1&&(r.style.stroke=r.style.fill,r.style.fill="#fff",r.style.lineWidth=2),r}function tx(e,t,r,n){W3(e,t,r,n),r.dispatchAction({type:"legendToggleSelect",name:e!=null?e:t}),U3(e,t,r,n)}function vB(e){for(var t=e.getZr().storage.getDisplayList(),r,n=0,i=t.length;n<i&&!(r=t[n].states.emphasis);)n++;return r&&r.hoverLayer}function U3(e,t,r,n){vB(r)||r.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:n})}function W3(e,t,r,n){vB(r)||r.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:n})}const gB=Vct;function jct(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries(function(r){for(var n=0;n<t.length;n++)if(!t[n].isSelected(r.name))return!1;return!0})}function Ah(e,t,r){var n={},i=e==="toggleSelected",o;return r.eachComponent("legend",function(s){i&&o!=null?s[o?"select":"unSelect"](t.name):e==="allSelect"||e==="inverseSelect"?s[e]():(s[e](t.name),o=s.isSelected(t.name));var a=s.getData();z(a,function(l){var u=l.get("name");if(!(u===`
`||u==="")){var c=s.isSelected(u);n.hasOwnProperty(u)?n[u]=n[u]&&c:n[u]=c}})}),e==="allSelect"||e==="inverseSelect"?{selected:n}:{name:t.name,selected:n}}function Gct(e){e.registerAction("legendToggleSelect","legendselectchanged",be(Ah,"toggleSelected")),e.registerAction("legendAllSelect","legendselectall",be(Ah,"allSelect")),e.registerAction("legendInverseSelect","legendinverseselect",be(Ah,"inverseSelect")),e.registerAction("legendSelect","legendselected",be(Ah,"select")),e.registerAction("legendUnSelect","legendunselected",be(Ah,"unSelect"))}function mB(e){e.registerComponentModel($3),e.registerComponentView(gB),e.registerProcessor(e.PRIORITY.PROCESSOR.SERIES_FILTER,jct),e.registerSubTypeDefaulter("legend",function(){return"plain"}),Gct(e)}var Hct=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.setScrollDataIndex=function(r){this.option.scrollDataIndex=r},t.prototype.init=function(r,n,i){var o=p_(r);e.prototype.init.call(this,r,n,i),ex(this,r,o)},t.prototype.mergeOption=function(r,n){e.prototype.mergeOption.call(this,r,n),ex(this,this.option,r)},t.type="legend.scroll",t.defaultOption=l_($3.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}($3);function ex(e,t,r){var n=e.getOrient(),i=[1,1];i[n.index]=0,lf(t,r,{type:"box",ignoreSize:!!i})}const Xct=Hct;var rx=Ne,lb=["width","height"],ub=["x","y"],Yct=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.newlineDisabled=!0,r._currentIndex=0,r}return t.prototype.init=function(){e.prototype.init.call(this),this.group.add(this._containerGroup=new rx),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new rx)},t.prototype.resetInner=function(){e.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(r,n,i,o,s,a,l){var u=this;e.prototype.renderInner.call(this,r,n,i,o,s,a,l);var c=this._controllerGroup,f=n.get("pageIconSize",!0),h=ht(f)?f:[f,f];p("pagePrev",0);var d=n.getModel("pageTextStyle");c.add(new rr({name:"pageText",style:{text:"xx/xx",fill:d.getTextColor(),font:d.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1);function p(v,m){var g=v+"DataIndex",_=cP(n.get("pageIcons",!0)[n.getOrient().name][m],{onclick:Vt(u._pageGo,u,g,n,o)},{x:-h[0]/2,y:-h[1]/2,width:h[0],height:h[1]});_.name=v,c.add(_)}},t.prototype.layoutInner=function(r,n,i,o,s,a){var l=this.getSelectorGroup(),u=r.getOrient().index,c=lb[u],f=ub[u],h=lb[1-u],d=ub[1-u];s&&qc("horizontal",l,r.get("selectorItemGap",!0));var p=r.get("selectorButtonGap",!0),v=l.getBoundingRect(),m=[-v.x,-v.y],g=$t(i);s&&(g[c]=i[c]-v[c]-p);var _=this._layoutContentAndController(r,o,g,u,c,h,d,f);if(s){if(a==="end")m[u]+=_[c]+p;else{var b=v[c]+p;m[u]-=b,_[f]-=b}_[c]+=v[c]+p,m[1-u]+=_[d]+_[h]/2-v[h]/2,_[h]=Math.max(_[h],v[h]),_[d]=Math.min(_[d],v[d]+m[1-u]),l.x=m[0],l.y=m[1],l.markRedraw()}return _},t.prototype._layoutContentAndController=function(r,n,i,o,s,a,l,u){var c=this.getContentGroup(),f=this._containerGroup,h=this._controllerGroup;qc(r.get("orient"),c,r.get("itemGap"),o?i.width:null,o?null:i.height),qc("horizontal",h,r.get("pageButtonItemGap",!0));var d=c.getBoundingRect(),p=h.getBoundingRect(),v=this._showController=d[s]>i[s],m=[-d.x,-d.y];n||(m[o]=c[u]);var g=[0,0],_=[-p.x,-p.y],b=Jt(r.get("pageButtonGap",!0),r.get("itemGap",!0));if(v){var w=r.get("pageButtonPosition",!0);w==="end"?_[o]+=i[s]-p[s]:g[o]+=p[s]+b}_[1-o]+=d[a]/2-p[a]/2,c.setPosition(m),f.setPosition(g),h.setPosition(_);var T={x:0,y:0};if(T[s]=v?i[s]:d[s],T[a]=Math.max(d[a],p[a]),T[l]=Math.min(0,p[l]+_[1-o]),f.__rectSize=i[s],v){var S={x:0,y:0};S[s]=Math.max(i[s]-p[s]-b,0),S[a]=T[a],f.setClipPath(new er({shape:S})),f.__rectSize=S[s]}else h.eachChild(function(A){A.attr({invisible:!0,silent:!0})});var k=this._getPageInfo(r);return k.pageIndex!=null&&_r(c,{x:k.contentPosition[0],y:k.contentPosition[1]},v?r:null),this._updatePageInfoView(r,k),T},t.prototype._pageGo=function(r,n,i){var o=this._getPageInfo(n)[r];o!=null&&i.dispatchAction({type:"legendScroll",scrollDataIndex:o,legendId:n.id})},t.prototype._updatePageInfoView=function(r,n){var i=this._controllerGroup;z(["pagePrev","pageNext"],function(c){var f=c+"DataIndex",h=n[f]!=null,d=i.childOfName(c);d&&(d.setStyle("fill",h?r.get("pageIconColor",!0):r.get("pageIconInactiveColor",!0)),d.cursor=h?"pointer":"default")});var o=i.childOfName("pageText"),s=r.get("pageFormatter"),a=n.pageIndex,l=a!=null?a+1:0,u=n.pageCount;o&&s&&o.setStyle("text",Mt(s)?s.replace("{current}",l==null?"":l+"").replace("{total}",u==null?"":u+""):s({current:l,total:u}))},t.prototype._getPageInfo=function(r){var n=r.get("scrollDataIndex",!0),i=this.getContentGroup(),o=this._containerGroup.__rectSize,s=r.getOrient().index,a=lb[s],l=ub[s],u=this._findTargetItemIndex(n),c=i.children(),f=c[u],h=c.length,d=h?1:0,p={contentPosition:[i.x,i.y],pageCount:d,pageIndex:d-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!f)return p;var v=w(f);p.contentPosition[s]=-v.s;for(var m=u+1,g=v,_=v,b=null;m<=h;++m)b=w(c[m]),(!b&&_.e>g.s+o||b&&!T(b,g.s))&&(_.i>g.i?g=_:g=b,g&&(p.pageNextDataIndex==null&&(p.pageNextDataIndex=g.i),++p.pageCount)),_=b;for(var m=u-1,g=v,_=v,b=null;m>=-1;--m)b=w(c[m]),(!b||!T(_,b.s))&&g.i<_.i&&(_=g,p.pagePrevDataIndex==null&&(p.pagePrevDataIndex=g.i),++p.pageCount,++p.pageIndex),g=b;return p;function w(S){if(S){var k=S.getBoundingRect(),A=k[l]+S[l];return{s:A,e:A+k[a],i:S.__legendDataIndex}}}function T(S,k){return S.e>=k&&S.s<=k+o}},t.prototype._findTargetItemIndex=function(r){if(!this._showController)return 0;var n,i=this.getContentGroup(),o;return i.eachChild(function(s,a){var l=s.__legendDataIndex;o==null&&l!=null&&(o=a),l===r&&(n=a)}),n!=null?n:o},t.type="legend.scroll",t}(gB);const qct=Yct;function Zct(e){e.registerAction("legendScroll","legendscroll",function(t,r){var n=t.scrollDataIndex;n!=null&&r.eachComponent({mainType:"legend",subType:"scroll",query:t},function(i){i.setScrollDataIndex(n)})})}function Kct(e){yr(mB),e.registerComponentModel(Xct),e.registerComponentView(qct),Zct(e)}function Ua(e){yr(mB),yr(Kct)}var Jct={get:function(e,t,r){var n=$t((Qct[e]||{})[t]);return r&&ht(n)?n[n.length-1]:n}},Qct={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}};const _B=Jct;var nx=bn.mapVisual,tft=bn.eachVisual,eft=ht,ix=z,rft=zm,nft=_s,ift=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.stateList=["inRange","outOfRange"],r.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],r.layoutMode={type:"box",ignoreSize:!0},r.dataBound=[-1/0,1/0],r.targetVisuals={},r.controllerVisuals={},r}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i)},t.prototype.optionUpdated=function(r,n){var i=this.option;!n&&gct(i,r,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},t.prototype.resetVisual=function(r){var n=this.stateList;r=Vt(r,this),this.controllerVisuals=q6(this.option.controller,n,r),this.targetVisuals=q6(this.option.target,n,r)},t.prototype.getItemSymbol=function(){return null},t.prototype.getTargetSeriesIndices=function(){var r=this.option.seriesIndex,n=[];return r==null||r==="all"?this.ecModel.eachSeries(function(i,o){n.push(o)}):n=tr(r),n},t.prototype.eachTargetSeries=function(r,n){z(this.getTargetSeriesIndices(),function(i){var o=this.ecModel.getSeriesByIndex(i);o&&r.call(n,o)},this)},t.prototype.isTargetSeries=function(r){var n=!1;return this.eachTargetSeries(function(i){i===r&&(n=!0)}),n},t.prototype.formatValueText=function(r,n,i){var o=this.option,s=o.precision,a=this.dataBound,l=o.formatter,u;i=i||["<",">"],ht(r)&&(r=r.slice(),u=!0);var c=n?r:u?[f(r[0]),f(r[1])]:f(r);if(Mt(l))return l.replace("{value}",u?c[0]:c).replace("{value2}",u?c[1]:c);if(jt(l))return u?l(r[0],r[1]):l(r);if(u)return r[0]===a[0]?i[0]+" "+c[1]:r[1]===a[1]?i[1]+" "+c[0]:c[0]+" - "+c[1];return c;function f(h){return h===a[0]?"min":h===a[1]?"max":(+h).toFixed(Math.min(s,20))}},t.prototype.resetExtent=function(){var r=this.option,n=rft([r.min,r.max]);this._dataExtent=n},t.prototype.getDataDimensionIndex=function(r){var n=this.option.dimension;if(n!=null)return r.getDimensionIndex(n);for(var i=r.dimensions,o=i.length-1;o>=0;o--){var s=i[o],a=r.getDimensionInfo(s);if(!a.isCalculationCoord)return a.storeDimIndex}},t.prototype.getExtent=function(){return this._dataExtent.slice()},t.prototype.completeVisualOption=function(){var r=this.ecModel,n=this.option,i={inRange:n.inRange,outOfRange:n.outOfRange},o=n.target||(n.target={}),s=n.controller||(n.controller={});le(o,i),le(s,i);var a=this.isCategory();l.call(this,o),l.call(this,s),u.call(this,o,"inRange","outOfRange"),c.call(this,s);function l(f){eft(n.color)&&!f.inRange&&(f.inRange={color:n.color.slice().reverse()}),f.inRange=f.inRange||{color:r.get("gradientColor")}}function u(f,h,d){var p=f[h],v=f[d];p&&!v&&(v=f[d]={},ix(p,function(m,g){if(!!bn.isValidType(g)){var _=_B.get(g,"inactive",a);_!=null&&(v[g]=_,g==="color"&&!v.hasOwnProperty("opacity")&&!v.hasOwnProperty("colorAlpha")&&(v.opacity=[0,0]))}}))}function c(f){var h=(f.inRange||{}).symbol||(f.outOfRange||{}).symbol,d=(f.inRange||{}).symbolSize||(f.outOfRange||{}).symbolSize,p=this.get("inactiveColor"),v=this.getItemSymbol(),m=v||"roundRect";ix(this.stateList,function(g){var _=this.itemSize,b=f[g];b||(b=f[g]={color:a?p:[p]}),b.symbol==null&&(b.symbol=h&&$t(h)||(a?m:[m])),b.symbolSize==null&&(b.symbolSize=d&&$t(d)||(a?_[0]:[_[0],_[0]])),b.symbol=nx(b.symbol,function(S){return S==="none"?m:S});var w=b.symbolSize;if(w!=null){var T=-1/0;tft(w,function(S){S>T&&(T=S)}),b.symbolSize=nx(w,function(S){return nft(S,[0,T],[0,_[0]],!0)})}},this)}},t.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},t.prototype.isCategory=function(){return!!this.option.categories},t.prototype.setSelected=function(r){},t.prototype.getSelected=function(){return null},t.prototype.getValueState=function(r){return null},t.prototype.getVisualMeta=function(r){return null},t.type="visualMap",t.dependencies=["series"],t.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},t}(Me);const o1=ift;var ox=[20,140],oft=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(r,n){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(i){i.mappingMethod="linear",i.dataExtent=this.getExtent()}),this._resetRange()},t.prototype.resetItemSize=function(){e.prototype.resetItemSize.apply(this,arguments);var r=this.itemSize;(r[0]==null||isNaN(r[0]))&&(r[0]=ox[0]),(r[1]==null||isNaN(r[1]))&&(r[1]=ox[1])},t.prototype._resetRange=function(){var r=this.getExtent(),n=this.option.range;!n||n.auto?(r.auto=1,this.option.range=r):ht(n)&&(n[0]>n[1]&&n.reverse(),n[0]=Math.max(n[0],r[0]),n[1]=Math.min(n[1],r[1]))},t.prototype.completeVisualOption=function(){e.prototype.completeVisualOption.apply(this,arguments),z(this.stateList,function(r){var n=this.option.controller[r].symbolSize;n&&n[0]!==n[1]&&(n[0]=n[1]/3)},this)},t.prototype.setSelected=function(r){this.option.range=r.slice(),this._resetRange()},t.prototype.getSelected=function(){var r=this.getExtent(),n=zm((this.get("range")||[]).slice());return n[0]>r[1]&&(n[0]=r[1]),n[1]>r[1]&&(n[1]=r[1]),n[0]<r[0]&&(n[0]=r[0]),n[1]<r[0]&&(n[1]=r[0]),n},t.prototype.getValueState=function(r){var n=this.option.range,i=this.getExtent();return(n[0]<=i[0]||n[0]<=r)&&(n[1]>=i[1]||r<=n[1])?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(r){var n=[];return this.eachTargetSeries(function(i){var o=[],s=i.getData();s.each(this.getDataDimensionIndex(s),function(a,l){r[0]<=a&&a<=r[1]&&o.push(l)},this),n.push({seriesId:i.id,dataIndex:o})},this),n},t.prototype.getVisualMeta=function(r){var n=sx(this,"outOfRange",this.getExtent()),i=sx(this,"inRange",this.option.range.slice()),o=[];function s(d,p){o.push({value:d,color:r(d,p)})}for(var a=0,l=0,u=i.length,c=n.length;l<c&&(!i.length||n[l]<=i[0]);l++)n[l]<i[a]&&s(n[l],"outOfRange");for(var f=1;a<u;a++,f=0)f&&o.length&&s(i[a],"outOfRange"),s(i[a],"inRange");for(var f=1;l<c;l++)(!i.length||i[i.length-1]<n[l])&&(f&&(o.length&&s(o[o.length-1].value,"outOfRange"),f=0),s(n[l],"outOfRange"));var h=o.length;return{stops:o,outerColors:[h?o[0].color:"transparent",h?o[h-1].color:"transparent"]}},t.type="visualMap.continuous",t.defaultOption=l_(o1.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),t}(o1);function sx(e,t,r){if(r[0]===r[1])return r.slice();for(var n=200,i=(r[1]-r[0])/n,o=r[0],s=[],a=0;a<=n&&o<r[1];a++)s.push(o),o+=i;return s.push(r[1]),s}const sft=oft;var aft=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.autoPositionValues={left:1,right:1,top:1,bottom:1},r}return t.prototype.init=function(r,n){this.ecModel=r,this.api=n},t.prototype.render=function(r,n,i,o){if(this.visualMapModel=r,r.get("show")===!1){this.group.removeAll();return}this.doRender(r,n,i,o)},t.prototype.renderBackground=function(r){var n=this.visualMapModel,i=Gp(n.get("padding")||0),o=r.getBoundingRect();r.add(new er({z2:-1,silent:!0,shape:{x:o.x-i[3],y:o.y-i[0],width:o.width+i[3]+i[1],height:o.height+i[0]+i[2]},style:{fill:n.get("backgroundColor"),stroke:n.get("borderColor"),lineWidth:n.get("borderWidth")}}))},t.prototype.getControllerVisual=function(r,n,i){i=i||{};var o=i.forceState,s=this.visualMapModel,a={};if(n==="color"){var l=s.get("contentColor");a.color=l}function u(d){return a[d]}function c(d,p){a[d]=p}var f=s.controllerVisuals[o||s.getValueState(r)],h=bn.prepareVisualTypes(f);return z(h,function(d){var p=f[d];i.convertOpacityToAlpha&&d==="opacity"&&(d="colorAlpha",p=f.__alphaForOpacity),bn.dependsOn(d,n)&&p&&p.applyVisual(r,u,c)}),a[n]},t.prototype.positionGroup=function(r){var n=this.visualMapModel,i=this.api;ket(r,n.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()})},t.prototype.doRender=function(r,n,i,o){},t.type="visualMap",t}(ci);const yB=aft;var ax=[["left","right","width"],["top","bottom","height"]];function bB(e,t,r){var n=e.option,i=n.align;if(i!=null&&i!=="auto")return i;for(var o={width:t.getWidth(),height:t.getHeight()},s=n.orient==="horizontal"?1:0,a=ax[s],l=[0,null,10],u={},c=0;c<3;c++)u[ax[1-s][c]]=l[c],u[a[c]]=c===2?r[0]:n[a[c]];var f=[["x","width",3],["y","height",0]][s],h=Ia(u,o,n.padding);return a[(h.margin[f[2]]||0)+h[f[0]]+h[f[1]]*.5<o[f[1]]*.5?0:1]}function rm(e,t){return z(e||[],function(r){r.dataIndex!=null&&(r.dataIndexInside=r.dataIndex,r.dataIndex=null),r.highlightKey="visualMap"+(t?t.componentIndex:"")}),e}var _o=_s,lft=z,lx=Math.min,cb=Math.max,uft=12,cft=6,fft=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._shapes={},r._dataInterval=[],r._handleEnds=[],r._hoverLinkDataIndices=[],r}return t.prototype.doRender=function(r,n,i,o){this._api=i,(!o||o.type!=="selectDataRange"||o.from!==this.uid)&&this._buildView()},t.prototype._buildView=function(){this.group.removeAll();var r=this.visualMapModel,n=this.group;this._orient=r.get("orient"),this._useHandle=r.get("calculable"),this._resetInterval(),this._renderBar(n);var i=r.get("text");this._renderEndsText(n,i,0),this._renderEndsText(n,i,1),this._updateView(!0),this.renderBackground(n),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(n)},t.prototype._renderEndsText=function(r,n,i){if(!!n){var o=n[1-i];o=o!=null?o+"":"";var s=this.visualMapModel,a=s.get("textGap"),l=s.itemSize,u=this._shapes.mainGroup,c=this._applyTransform([l[0]/2,i===0?-a:l[1]+a],u),f=this._applyTransform(i===0?"bottom":"top",u),h=this._orient,d=this.visualMapModel.textStyleModel;this.group.add(new rr({style:yn(d,{x:c[0],y:c[1],verticalAlign:h==="horizontal"?"middle":f,align:h==="horizontal"?f:"center",text:o})}))}},t.prototype._renderBar=function(r){var n=this.visualMapModel,i=this._shapes,o=n.itemSize,s=this._orient,a=this._useHandle,l=bB(n,this.api,o),u=i.mainGroup=this._createBarGroup(l),c=new Ne;u.add(c),c.add(i.outOfRange=ux()),c.add(i.inRange=ux(null,a?fx(this._orient):null,Vt(this._dragHandle,this,"all",!1),Vt(this._dragHandle,this,"all",!0))),c.setClipPath(new er({shape:{x:0,y:0,width:o[0],height:o[1],r:3}}));var f=n.textStyleModel.getTextRect("\u56FD"),h=cb(f.width,f.height);a&&(i.handleThumbs=[],i.handleLabels=[],i.handleLabelPoints=[],this._createHandle(n,u,0,o,h,s),this._createHandle(n,u,1,o,h,s)),this._createIndicator(n,u,o,h,s),r.add(u)},t.prototype._createHandle=function(r,n,i,o,s,a){var l=Vt(this._dragHandle,this,i,!1),u=Vt(this._dragHandle,this,i,!0),c=ms(r.get("handleSize"),o[0]),f=Ui(r.get("handleIcon"),-c/2,-c/2,c,c,null,!0),h=fx(this._orient);f.attr({cursor:h,draggable:!0,drift:l,ondragend:u,onmousemove:function(g){su(g.event)}}),f.x=o[0]/2,f.useStyle(r.getModel("handleStyle").getItemStyle()),f.setStyle({strokeNoScale:!0,strokeFirst:!0}),f.style.lineWidth*=2,f.ensureState("emphasis").style=r.getModel(["emphasis","handleStyle"]).getItemStyle(),iP(f,!0),n.add(f);var d=this.visualMapModel.textStyleModel,p=new rr({cursor:h,draggable:!0,drift:l,onmousemove:function(g){su(g.event)},ondragend:u,style:yn(d,{x:0,y:0,text:""})});p.ensureState("blur").style={opacity:.1},p.stateTransition={duration:200},this.group.add(p);var v=[c,0],m=this._shapes;m.handleThumbs[i]=f,m.handleLabelPoints[i]=v,m.handleLabels[i]=p},t.prototype._createIndicator=function(r,n,i,o,s){var a=ms(r.get("indicatorSize"),i[0]),l=Ui(r.get("indicatorIcon"),-a/2,-a/2,a,a,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:i[0]/2});var u=r.getModel("indicatorStyle").getItemStyle();if(l instanceof Cs){var c=l.style;l.useStyle(at({image:c.image,x:c.x,y:c.y,width:c.width,height:c.height},u))}else l.useStyle(u);n.add(l);var f=this.visualMapModel.textStyleModel,h=new rr({silent:!0,invisible:!0,style:yn(f,{x:0,y:0,text:""})});this.group.add(h);var d=[(s==="horizontal"?o/2:cft)+i[0]/2,0],p=this._shapes;p.indicator=l,p.indicatorLabel=h,p.indicatorLabelPoint=d,this._firstShowIndicator=!0},t.prototype._dragHandle=function(r,n,i,o){if(!!this._useHandle){if(this._dragging=!n,!n){var s=this._applyTransform([i,o],this._shapes.mainGroup,!0);this._updateInterval(r,s[1]),this._hideIndicator(),this._updateView()}n===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),n?!this._hovering&&this._clearHoverLinkToSeries():cx(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[r],!1)}},t.prototype._resetInterval=function(){var r=this.visualMapModel,n=this._dataInterval=r.getSelected(),i=r.getExtent(),o=[0,r.itemSize[1]];this._handleEnds=[_o(n[0],i,o,!0),_o(n[1],i,o,!0)]},t.prototype._updateInterval=function(r,n){n=n||0;var i=this.visualMapModel,o=this._handleEnds,s=[0,i.itemSize[1]];Alt(n,o,s,r,0);var a=i.getExtent();this._dataInterval=[_o(o[0],s,a,!0),_o(o[1],s,a,!0)]},t.prototype._updateView=function(r){var n=this.visualMapModel,i=n.getExtent(),o=this._shapes,s=[0,n.itemSize[1]],a=r?s:this._handleEnds,l=this._createBarVisual(this._dataInterval,i,a,"inRange"),u=this._createBarVisual(i,i,s,"outOfRange");o.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),o.outOfRange.setStyle({fill:u.barColor}).setShape("points",u.barPoints),this._updateHandle(a,l)},t.prototype._createBarVisual=function(r,n,i,o){var s={forceState:o,convertOpacityToAlpha:!0},a=this._makeColorGradient(r,s),l=[this.getControllerVisual(r[0],"symbolSize",s),this.getControllerVisual(r[1],"symbolSize",s)],u=this._createBarPoints(i,l);return{barColor:new aP(0,0,0,1,a),barPoints:u,handlesColor:[a[0].color,a[a.length-1].color]}},t.prototype._makeColorGradient=function(r,n){var i=100,o=[],s=(r[1]-r[0])/i;o.push({color:this.getControllerVisual(r[0],"color",n),offset:0});for(var a=1;a<i;a++){var l=r[0]+s*a;if(l>r[1])break;o.push({color:this.getControllerVisual(l,"color",n),offset:a/i})}return o.push({color:this.getControllerVisual(r[1],"color",n),offset:1}),o},t.prototype._createBarPoints=function(r,n){var i=this.visualMapModel.itemSize;return[[i[0]-n[0],r[0]],[i[0],r[0]],[i[0],r[1]],[i[0]-n[1],r[1]]]},t.prototype._createBarGroup=function(r){var n=this._orient,i=this.visualMapModel.get("inverse");return new Ne(n==="horizontal"&&!i?{scaleX:r==="bottom"?1:-1,rotation:Math.PI/2}:n==="horizontal"&&i?{scaleX:r==="bottom"?-1:1,rotation:-Math.PI/2}:n==="vertical"&&!i?{scaleX:r==="left"?1:-1,scaleY:-1}:{scaleX:r==="left"?1:-1})},t.prototype._updateHandle=function(r,n){if(!!this._useHandle){var i=this._shapes,o=this.visualMapModel,s=i.handleThumbs,a=i.handleLabels,l=o.itemSize,u=o.getExtent();lft([0,1],function(c){var f=s[c];f.setStyle("fill",n.handlesColor[c]),f.y=r[c];var h=_o(r[c],[0,l[1]],u,!0),d=this.getControllerVisual(h,"symbolSize");f.scaleX=f.scaleY=d/l[0],f.x=l[0]-d/2;var p=Hc(i.handleLabelPoints[c],Zg(f,this.group));a[c].setStyle({x:p[0],y:p[1],text:o.formatValueText(this._dataInterval[c]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",i.mainGroup):"center"})},this)}},t.prototype._showIndicator=function(r,n,i,o){var s=this.visualMapModel,a=s.getExtent(),l=s.itemSize,u=[0,l[1]],c=this._shapes,f=c.indicator;if(!!f){f.attr("invisible",!1);var h={convertOpacityToAlpha:!0},d=this.getControllerVisual(r,"color",h),p=this.getControllerVisual(r,"symbolSize"),v=_o(r,a,u,!0),m=l[0]-p/2,g={x:f.x,y:f.y};f.y=v,f.x=m;var _=Hc(c.indicatorLabelPoint,Zg(f,this.group)),b=c.indicatorLabel;b.attr("invisible",!1);var w=this._applyTransform("left",c.mainGroup),T=this._orient,S=T==="horizontal";b.setStyle({text:(i||"")+s.formatValueText(n),verticalAlign:S?w:"middle",align:S?"center":w});var k={x:m,y:v,style:{fill:d}},A={style:{x:_[0],y:_[1]}};if(s.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var C={duration:100,easing:"cubicInOut",additive:!0};f.x=g.x,f.y=g.y,f.animateTo(k,C),b.animateTo(A,C)}else f.attr(k),b.attr(A);this._firstShowIndicator=!1;var x=this._shapes.handleLabels;if(x)for(var I=0;I<x.length;I++)this._api.enterBlur(x[I])}},t.prototype._enableHoverLinkToSeries=function(){var r=this;this._shapes.mainGroup.on("mousemove",function(n){if(r._hovering=!0,!r._dragging){var i=r.visualMapModel.itemSize,o=r._applyTransform([n.offsetX,n.offsetY],r._shapes.mainGroup,!0,!0);o[1]=lx(cb(0,o[1]),i[1]),r._doHoverLinkToSeries(o[1],0<=o[0]&&o[0]<=i[0])}}).on("mouseout",function(){r._hovering=!1,!r._dragging&&r._clearHoverLinkToSeries()})},t.prototype._enableHoverLinkFromSeries=function(){var r=this.api.getZr();this.visualMapModel.option.hoverLink?(r.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),r.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},t.prototype._doHoverLinkToSeries=function(r,n){var i=this.visualMapModel,o=i.itemSize;if(!!i.option.hoverLink){var s=[0,o[1]],a=i.getExtent();r=lx(cb(s[0],r),s[1]);var l=hft(i,a,s),u=[r-l,r+l],c=_o(r,s,a,!0),f=[_o(u[0],s,a,!0),_o(u[1],s,a,!0)];u[0]<s[0]&&(f[0]=-1/0),u[1]>s[1]&&(f[1]=1/0),n&&(f[0]===-1/0?this._showIndicator(c,f[1],"< ",l):f[1]===1/0?this._showIndicator(c,f[0],"> ",l):this._showIndicator(c,c,"\u2248 ",l));var h=this._hoverLinkDataIndices,d=[];(n||cx(i))&&(d=this._hoverLinkDataIndices=i.findTargetDataIndices(f));var p=IJ(h,d);this._dispatchHighDown("downplay",rm(p[0],i)),this._dispatchHighDown("highlight",rm(p[1],i))}},t.prototype._hoverLinkFromSeriesMouseOver=function(r){var n;if(Rc(r.target,function(l){var u=ae(l);if(u.dataIndex!=null)return n=u,!0},!0),!!n){var i=this.ecModel.getSeriesByIndex(n.seriesIndex),o=this.visualMapModel;if(!!o.isTargetSeries(i)){var s=i.getData(n.dataType),a=s.getStore().get(o.getDataDimensionIndex(s),n.dataIndex);isNaN(a)||this._showIndicator(a,a)}}},t.prototype._hideIndicator=function(){var r=this._shapes;r.indicator&&r.indicator.attr("invisible",!0),r.indicatorLabel&&r.indicatorLabel.attr("invisible",!0);var n=this._shapes.handleLabels;if(n)for(var i=0;i<n.length;i++)this._api.leaveBlur(n[i])},t.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var r=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",rm(r,this.visualMapModel)),r.length=0},t.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var r=this.api.getZr();r.off("mouseover",this._hoverLinkFromSeriesMouseOver),r.off("mouseout",this._hideIndicator)},t.prototype._applyTransform=function(r,n,i,o){var s=Zg(n,o?null:this.group);return ht(r)?Hc(r,s,i):_N(r,s,i)},t.prototype._dispatchHighDown=function(r,n){n&&n.length&&this.api.dispatchAction({type:r,batch:n})},t.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.prototype.remove=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.type="visualMap.continuous",t}(yB);function ux(e,t,r,n){return new up({shape:{points:e},draggable:!!r,cursor:t,drift:r,onmousemove:function(i){su(i.event)},ondragend:n})}function hft(e,t,r){var n=uft/2,i=e.get("hoverLinkDataSize");return i&&(n=_o(i,t,r,!0)/2),n}function cx(e){var t=e.get("hoverLinkOnHandle");return!!(t==null?e.get("realtime"):t)}function fx(e){return e==="vertical"?"ns-resize":"ew-resize"}const dft=fft;var pft={type:"selectDataRange",event:"dataRangeSelected",update:"update"},vft=function(e,t){t.eachComponent({mainType:"visualMap",query:e},function(r){r.setSelected(e.selected)})},gft=[{createOnAllSeries:!0,reset:function(e,t){var r=[];return t.eachComponent("visualMap",function(n){var i=e.pipelineContext;!n.isTargetSeries(e)||i&&i.large||r.push(mct(n.stateList,n.targetVisuals,Vt(n.getValueState,n),n.getDataDimensionIndex(e.getData())))}),r}},{createOnAllSeries:!0,reset:function(e,t){var r=e.getData(),n=[];t.eachComponent("visualMap",function(i){if(i.isTargetSeries(e)){var o=i.getVisualMeta(Vt(mft,null,e,i))||{stops:[],outerColors:[]},s=i.getDataDimensionIndex(r);s>=0&&(o.dimension=s,n.push(o))}}),e.getData().setVisual("visualMeta",n)}}];function mft(e,t,r,n){for(var i=t.targetVisuals[n],o=bn.prepareVisualTypes(i),s={color:y_(e.getData(),"color")},a=0,l=o.length;a<l;a++){var u=o[a],c=i[u==="opacity"?"__alphaForOpacity":u];c&&c.applyVisual(r,f,h)}return s.color;function f(d){return s[d]}function h(d,p){s[d]=p}}var hx=z;function _ft(e){var t=e&&e.visualMap;ht(t)||(t=t?[t]:[]),hx(t,function(r){if(!!r){sc(r,"splitList")&&!sc(r,"pieces")&&(r.pieces=r.splitList,delete r.splitList);var n=r.pieces;n&&ht(n)&&hx(n,function(i){Rt(i)&&(sc(i,"start")&&!sc(i,"min")&&(i.min=i.start),sc(i,"end")&&!sc(i,"max")&&(i.max=i.end))})}})}function sc(e,t){return e&&e.hasOwnProperty&&e.hasOwnProperty(t)}var dx=!1;function wB(e){dx||(dx=!0,e.registerSubTypeDefaulter("visualMap",function(t){return!t.categories&&(!(t.pieces?t.pieces.length>0:t.splitNumber>0)||t.calculable)?"continuous":"piecewise"}),e.registerAction(pft,vft),z(gft,function(t){e.registerVisual(e.PRIORITY.VISUAL.COMPONENT,t)}),e.registerPreprocessor(_ft))}function yft(e){e.registerComponentModel(sft),e.registerComponentView(dft),wB(e)}var bft=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._pieceList=[],r}return t.prototype.optionUpdated=function(r,n){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var i=this._mode=this._determineMode();this._pieceList=[],wft[this._mode].call(this,this._pieceList),this._resetSelected(r,n);var o=this.option.categories;this.resetVisual(function(s,a){i==="categories"?(s.mappingMethod="category",s.categories=$t(o)):(s.dataExtent=this.getExtent(),s.mappingMethod="piecewise",s.pieceList=Lt(this._pieceList,function(l){return l=$t(l),a!=="inRange"&&(l.visual=null),l}))})},t.prototype.completeVisualOption=function(){var r=this.option,n={},i=bn.listVisualTypes(),o=this.isCategory();z(r.pieces,function(a){z(i,function(l){a.hasOwnProperty(l)&&(n[l]=1)})}),z(n,function(a,l){var u=!1;z(this.stateList,function(c){u=u||s(r,c,l)||s(r.target,c,l)},this),!u&&z(this.stateList,function(c){(r[c]||(r[c]={}))[l]=_B.get(l,c==="inRange"?"active":"inactive",o)})},this);function s(a,l,u){return a&&a[l]&&a[l].hasOwnProperty(u)}e.prototype.completeVisualOption.apply(this,arguments)},t.prototype._resetSelected=function(r,n){var i=this.option,o=this._pieceList,s=(n?i:r).selected||{};if(i.selected=s,z(o,function(l,u){var c=this.getSelectedMapKey(l);s.hasOwnProperty(c)||(s[c]=!0)},this),i.selectedMode==="single"){var a=!1;z(o,function(l,u){var c=this.getSelectedMapKey(l);s[c]&&(a?s[c]=!1:a=!0)},this)}},t.prototype.getItemSymbol=function(){return this.get("itemSymbol")},t.prototype.getSelectedMapKey=function(r){return this._mode==="categories"?r.value+"":r.index+""},t.prototype.getPieceList=function(){return this._pieceList},t.prototype._determineMode=function(){var r=this.option;return r.pieces&&r.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},t.prototype.setSelected=function(r){this.option.selected=$t(r)},t.prototype.getValueState=function(r){var n=bn.findPieceIndex(r,this._pieceList);return n!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[n])]?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(r){var n=[],i=this._pieceList;return this.eachTargetSeries(function(o){var s=[],a=o.getData();a.each(this.getDataDimensionIndex(a),function(l,u){var c=bn.findPieceIndex(l,i);c===r&&s.push(u)},this),n.push({seriesId:o.id,dataIndex:s})},this),n},t.prototype.getRepresentValue=function(r){var n;if(this.isCategory())n=r.value;else if(r.value!=null)n=r.value;else{var i=r.interval||[];n=i[0]===-1/0&&i[1]===1/0?0:(i[0]+i[1])/2}return n},t.prototype.getVisualMeta=function(r){if(this.isCategory())return;var n=[],i=["",""],o=this;function s(c,f){var h=o.getRepresentValue({interval:c});f||(f=o.getValueState(h));var d=r(h,f);c[0]===-1/0?i[0]=d:c[1]===1/0?i[1]=d:n.push({value:c[0],color:d},{value:c[1],color:d})}var a=this._pieceList.slice();if(!a.length)a.push({interval:[-1/0,1/0]});else{var l=a[0].interval[0];l!==-1/0&&a.unshift({interval:[-1/0,l]}),l=a[a.length-1].interval[1],l!==1/0&&a.push({interval:[l,1/0]})}var u=-1/0;return z(a,function(c){var f=c.interval;f&&(f[0]>u&&s([u,f[0]],"outOfRange"),s(f.slice()),u=f[1])},this),{stops:n,outerColors:i}},t.type="visualMap.piecewise",t.defaultOption=l_(o1.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),t}(o1),wft={splitNumber:function(e){var t=this.option,r=Math.min(t.precision,20),n=this.getExtent(),i=t.splitNumber;i=Math.max(parseInt(i,10),1),t.splitNumber=i;for(var o=(n[1]-n[0])/i;+o.toFixed(r)!==o&&r<5;)r++;t.precision=r,o=+o.toFixed(r),t.minOpen&&e.push({interval:[-1/0,n[0]],close:[0,0]});for(var s=0,a=n[0];s<i;a+=o,s++){var l=s===i-1?n[1]:a+o;e.push({interval:[a,l],close:[1,1]})}t.maxOpen&&e.push({interval:[n[1],1/0],close:[0,0]}),m4(e),z(e,function(u,c){u.index=c,u.text=this.formatValueText(u.interval)},this)},categories:function(e){var t=this.option;z(t.categories,function(r){e.push({text:this.formatValueText(r,!0),value:r})},this),px(t,e)},pieces:function(e){var t=this.option;z(t.pieces,function(r,n){Rt(r)||(r={value:r});var i={text:"",index:n};if(r.label!=null&&(i.text=r.label),r.hasOwnProperty("value")){var o=i.value=r.value;i.interval=[o,o],i.close=[1,1]}else{for(var s=i.interval=[],a=i.close=[0,0],l=[1,0,1],u=[-1/0,1/0],c=[],f=0;f<2;f++){for(var h=[["gte","gt","min"],["lte","lt","max"]][f],d=0;d<3&&s[f]==null;d++)s[f]=r[h[d]],a[f]=l[d],c[f]=d===2;s[f]==null&&(s[f]=u[f])}c[0]&&s[1]===1/0&&(a[0]=0),c[1]&&s[0]===-1/0&&(a[1]=0),s[0]===s[1]&&a[0]&&a[1]&&(i.value=s[0])}i.visual=bn.retrieveVisuals(r),e.push(i)},this),px(t,e),m4(e),z(e,function(r){var n=r.close,i=[["<","\u2264"][n[1]],[">","\u2265"][n[0]]];r.text=r.text||this.formatValueText(r.value!=null?r.value:r.interval,!1,i)},this)}};function px(e,t){var r=e.inverse;(e.orient==="vertical"?!r:r)&&t.reverse()}const Sft=bft;var Tft=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.doRender=function(){var r=this.group;r.removeAll();var n=this.visualMapModel,i=n.get("textGap"),o=n.textStyleModel,s=o.getFont(),a=o.getTextColor(),l=this._getItemAlign(),u=n.itemSize,c=this._getViewData(),f=c.endsText,h=xi(n.get("showLabel",!0),!f);f&&this._renderEndsText(r,f[0],u,h,l),z(c.viewPieceList,function(d){var p=d.piece,v=new Ne;v.onclick=Vt(this._onItemClick,this,p),this._enableHoverLink(v,d.indexInModelPieceList);var m=n.getRepresentValue(p);if(this._createItemSymbol(v,m,[0,0,u[0],u[1]]),h){var g=this.visualMapModel.getValueState(m);v.add(new rr({style:{x:l==="right"?-i:u[0]+i,y:u[1]/2,text:p.text,verticalAlign:"middle",align:l,font:s,fill:a,opacity:g==="outOfRange"?.5:1}}))}r.add(v)},this),f&&this._renderEndsText(r,f[1],u,h,l),qc(n.get("orient"),r,n.get("itemGap")),this.renderBackground(r),this.positionGroup(r)},t.prototype._enableHoverLink=function(r,n){var i=this;r.on("mouseover",function(){return o("highlight")}).on("mouseout",function(){return o("downplay")});var o=function(s){var a=i.visualMapModel;a.option.hoverLink&&i.api.dispatchAction({type:s,batch:rm(a.findTargetDataIndices(n),a)})}},t.prototype._getItemAlign=function(){var r=this.visualMapModel,n=r.option;if(n.orient==="vertical")return bB(r,this.api,r.itemSize);var i=n.align;return(!i||i==="auto")&&(i="left"),i},t.prototype._renderEndsText=function(r,n,i,o,s){if(!!n){var a=new Ne,l=this.visualMapModel.textStyleModel;a.add(new rr({style:yn(l,{x:o?s==="right"?i[0]:0:i[0]/2,y:i[1]/2,verticalAlign:"middle",align:o?s:"center",text:n})})),r.add(a)}},t.prototype._getViewData=function(){var r=this.visualMapModel,n=Lt(r.getPieceList(),function(a,l){return{piece:a,indexInModelPieceList:l}}),i=r.get("text"),o=r.get("orient"),s=r.get("inverse");return(o==="horizontal"?s:!s)?n.reverse():i&&(i=i.slice().reverse()),{viewPieceList:n,endsText:i}},t.prototype._createItemSymbol=function(r,n,i){r.add(Ui(this.getControllerVisual(n,"symbol"),i[0],i[1],i[2],i[3],this.getControllerVisual(n,"color")))},t.prototype._onItemClick=function(r){var n=this.visualMapModel,i=n.option,o=i.selectedMode;if(!!o){var s=$t(i.selected),a=n.getSelectedMapKey(r);o==="single"||o===!0?(s[a]=!0,z(s,function(l,u){s[u]=u===a})):s[a]=!s[a],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:s})}},t.type="visualMap.piecewise",t}(yB);const kft=Tft;function Pft(e){e.registerComponentModel(Sft),e.registerComponentView(kft),wB(e)}function Eft(e){yr(yft),yr(Pft)}var vx={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},Cft=function(){function e(t){var r=this._condVal=Mt(t)?new RegExp(t):$Z(t)?t:null;if(r==null){var n="";oe(n)}}return e.prototype.evaluate=function(t){var r=typeof t;return Mt(r)?this._condVal.test(t):Se(r)?this._condVal.test(t+""):!1},e}(),Aft=function(){function e(){}return e.prototype.evaluate=function(){return this.value},e}(),Mft=function(){function e(){}return e.prototype.evaluate=function(){for(var t=this.children,r=0;r<t.length;r++)if(!t[r].evaluate())return!1;return!0},e}(),xft=function(){function e(){}return e.prototype.evaluate=function(){for(var t=this.children,r=0;r<t.length;r++)if(t[r].evaluate())return!0;return!1},e}(),Lft=function(){function e(){}return e.prototype.evaluate=function(){return!this.child.evaluate()},e}(),Ift=function(){function e(){}return e.prototype.evaluate=function(){for(var t=!!this.valueParser,r=this.getValue,n=r(this.valueGetterParam),i=t?this.valueParser(n):null,o=0;o<this.subCondList.length;o++)if(!this.subCondList[o].evaluate(t?i:n))return!1;return!0},e}();function QP(e,t){if(e===!0||e===!1){var r=new Aft;return r.value=e,r}var n="";return SB(e)||oe(n),e.and?gx("and",e,t):e.or?gx("or",e,t):e.not?Oft(e,t):Rft(e,t)}function gx(e,t,r){var n=t[e],i="";ht(n)||oe(i),n.length||oe(i);var o=e==="and"?new Mft:new xft;return o.children=Lt(n,function(s){return QP(s,r)}),o.children.length||oe(i),o}function Oft(e,t){var r=e.not,n="";SB(r)||oe(n);var i=new Lft;return i.child=QP(r,t),i.child||oe(n),i}function Rft(e,t){for(var r="",n=t.prepareGetValue(e),i=[],o=ge(e),s=e.parser,a=s?eF(s):null,l=0;l<o.length;l++){var u=o[l];if(!(u==="parser"||t.valueGetterAttrMap.get(u))){var c=pt(vx,u)?vx[u]:u,f=e[u],h=a?a(f):f,d=mrt(c,h)||c==="reg"&&new Cft(h);d||oe(r),i.push(d)}}i.length||oe(r);var p=new Ift;return p.valueGetterParam=n,p.valueParser=a,p.getValue=t.getValue,p.subCondList=i,p}function SB(e){return Rt(e)&&!Yr(e)}var Dft=function(){function e(t,r){this._cond=QP(t,r)}return e.prototype.evaluate=function(){return this._cond.evaluate()},e}();function Nft(e,t){return new Dft(e,t)}var Fft={type:"echarts:filter",transform:function(e){for(var t=e.upstream,r,n=Nft(e.config,{valueGetterAttrMap:Xt({dimension:!0}),prepareGetValue:function(a){var l="",u=a.dimension;pt(a,"dimension")||oe(l);var c=t.getDimensionInfo(u);return c||oe(l),{dimIdx:c.index}},getValue:function(a){return t.retrieveValueFromItem(r,a.dimIdx)}}),i=[],o=0,s=t.count();o<s;o++)r=t.getRawDataItem(o),n.evaluate()&&i.push(r);return{data:i}}},zft={type:"echarts:sort",transform:function(e){var t=e.upstream,r=e.config,n="",i=tr(r);i.length||oe(n);var o=[];z(i,function(c){var f=c.dimension,h=c.order,d=c.parser,p=c.incomparable;if(f==null&&oe(n),h!=="asc"&&h!=="desc"&&oe(n),p&&p!=="min"&&p!=="max"){var v="";oe(v)}if(h!=="asc"&&h!=="desc"){var m="";oe(m)}var g=t.getDimensionInfo(f);g||oe(n);var _=d?eF(d):null;d&&!_&&oe(n),o.push({dimIdx:g.index,parser:_,comparator:new nF(h,p)})});var s=t.sourceFormat;s!==an&&s!==Yi&&oe(n);for(var a=[],l=0,u=t.count();l<u;l++)a.push(t.getRawDataItem(l));return a.sort(function(c,f){for(var h=0;h<o.length;h++){var d=o[h],p=t.retrieveValueFromItem(c,d.dimIdx),v=t.retrieveValueFromItem(f,d.dimIdx);d.parser&&(p=d.parser(p),v=d.parser(v));var m=d.comparator.evaluate(p,v);if(m!==0)return m}return 0}),{data:a}}};function Of(e){e.registerTransform(Fft),e.registerTransform(zft)}var Bft=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="dataset",r}return t.prototype.init=function(r,n,i){e.prototype.init.call(this,r,n,i),this._sourceManager=new aF(this),RM(this)},t.prototype.mergeOption=function(r,n){e.prototype.mergeOption.call(this,r,n),RM(this)},t.prototype.optionUpdated=function(){this._sourceManager.dirty()},t.prototype.getSourceManager=function(){return this._sourceManager},t.type="dataset",t.defaultOption={seriesLayoutBy:Mo},t}(Me),$ft=function(e){St(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="dataset",r}return t.type="dataset",t}(ci);function Rf(e){e.registerComponentModel(Bft),e.registerComponentView($ft)}var fb=null;function Vft(e){return fb||(fb=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){return setTimeout(t,16)}).bind(window)),fb(e)}var hb=null;function Uft(e){hb||(hb=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){clearTimeout(t)}).bind(window)),hb(e)}function Wft(e){var t=document.createElement("style");return t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),(document.querySelector("head")||document.body).appendChild(t),t}function bv(e,t){t===void 0&&(t={});var r=document.createElement(e);return Object.keys(t).forEach(function(n){r[n]=t[n]}),r}function TB(e,t,r){var n=window.getComputedStyle(e,r||null)||{display:"none"};return n[t]}function j3(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};for(var t=e;t!==document;){if(TB(t,"display")==="none")return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}var jft='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',G3=0,nm=null;function Gft(e,t){e.__resize_mutation_handler__||(e.__resize_mutation_handler__=Yft.bind(e));var r=e.__resize_listeners__;if(!r){if(e.__resize_listeners__=[],window.ResizeObserver){var n=e.offsetWidth,i=e.offsetHeight,o=new ResizeObserver(function(){!e.__resize_observer_triggered__&&(e.__resize_observer_triggered__=!0,e.offsetWidth===n&&e.offsetHeight===i)||s1(e)}),s=j3(e),a=s.detached,l=s.rendered;e.__resize_observer_triggered__=a===!1&&l===!1,e.__resize_observer__=o,o.observe(e)}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){s1(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if(G3||(nm=Wft(jft)),qft(e),e.__resize_rendered__=j3(e).rendered,window.MutationObserver){var u=new MutationObserver(e.__resize_mutation_handler__);u.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=u}}e.__resize_listeners__.push(t),G3++}function Hft(e,t){var r=e.__resize_listeners__;if(!!r){if(t&&r.splice(r.indexOf(t),1),!r.length||!t){if(e.detachEvent&&e.removeEventListener){e.detachEvent("onresize",e.__resize_legacy_resize_handler__),document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);return}e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__.disconnect(),e.__resize_observer__=null):(e.__resize_mutation_observer__&&(e.__resize_mutation_observer__.disconnect(),e.__resize_mutation_observer__=null),e.removeEventListener("scroll",tE),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null),e.__resize_listeners__=null}!--G3&&nm&&nm.parentNode.removeChild(nm)}}function Xft(e){var t=e.__resize_last__,r=t.width,n=t.height,i=e.offsetWidth,o=e.offsetHeight;return i!==r||o!==n?{width:i,height:o}:null}function Yft(){var e=j3(this),t=e.rendered,r=e.detached;t!==this.__resize_rendered__&&(!r&&this.__resize_triggers__&&(eE(this),this.addEventListener("scroll",tE,!0)),this.__resize_rendered__=t,s1(this))}function tE(){var e=this;eE(this),this.__resize_raf__&&Uft(this.__resize_raf__),this.__resize_raf__=Vft(function(){var t=Xft(e);t&&(e.__resize_last__=t,s1(e))})}function s1(e){!e||!e.__resize_listeners__||e.__resize_listeners__.forEach(function(t){t.call(e,e)})}function qft(e){var t=TB(e,"position");(!t||t==="static")&&(e.style.position="relative"),e.__resize_old_position__=t,e.__resize_last__={};var r=bv("div",{className:"resize-triggers"}),n=bv("div",{className:"resize-expand-trigger"}),i=bv("div"),o=bv("div",{className:"resize-contract-trigger"});n.appendChild(i),r.appendChild(n),r.appendChild(o),e.appendChild(r),e.__resize_triggers__={triggers:r,expand:n,expandChild:i,contract:o},eE(e),e.addEventListener("scroll",tE,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}function eE(e){var t=e.__resize_triggers__,r=t.expand,n=t.expandChild,i=t.contract,o=i.scrollWidth,s=i.scrollHeight,a=r.offsetWidth,l=r.offsetHeight,u=r.scrollWidth,c=r.scrollHeight;i.scrollLeft=o,i.scrollTop=s,n.style.width=a+1+"px",n.style.height=l+1+"px",r.scrollLeft=u,r.scrollTop=c}var ns=function(){return ns=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ns.apply(this,arguments)},Zft=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function Kft(e){return t=Object.create(null),Zft.forEach(function(r){t[r]=function(n){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(!e.value)throw new Error("ECharts is not initialized yet.");return e.value[n].apply(e.value,i)}}(r)}),t;var t}var Jft={autoresize:Boolean},Qft={loading:Boolean,loadingOptions:Object},tht=/^on[^a-z]/,eht=function(e){return tht.test(e)},mx=[],Mh=[];(function(e,t){if(e&&typeof document<"u"){var r,n=t.prepend===!0?"prepend":"append",i=t.singleTag===!0,o=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var s=mx.indexOf(o);s===-1&&(s=mx.push(o)-1,Mh[s]={}),r=Mh[s]&&Mh[s][n]?Mh[s][n]:Mh[s][n]=a()}else r=a();e.charCodeAt(0)===65279&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function a(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),t.attributes)for(var u=Object.keys(t.attributes),c=0;c<u.length;c++)l.setAttribute(u[c],t.attributes[u[c]]);var f=n==="prepend"?"afterbegin":"beforeend";return o.insertAdjacentElement(f,l),l}})("x-vue-echarts{display:block;width:100%;height:100%}",{});var kB="ecTheme",Wa=Sk({name:"echarts",props:ns(ns({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},Jft),Qft),inheritAttrs:!1,setup:function(e,t){var r=t.attrs,n=Og(),i=Og(),o=Og(),s=In("ecTheme",null),a=In("ecInitOptions",null),l=In("ecUpdateOptions",null),u=cS(e),c=u.autoresize,f=u.manualUpdate,h=u.loading,d=u.loadingOptions,p=Xe(function(){return o.value||e.option||null}),v=Xe(function(){return e.theme||Er(s)||{}}),m=Xe(function(){return e.initOptions||Er(a)||{}}),g=Xe(function(){return e.updateOptions||Er(l)||{}}),_=Xe(function(){return function(A){var C={};for(var x in A)eht(x)||(C[x]=A[x]);return C}(r)}),b=Ek().proxy.$listeners;function w(A){if(n.value){var C=i.value=pit(n.value,v.value,m.value);e.group&&(C.group=e.group);var x=b;x||(x={},Object.keys(r).filter(function(N){return N.indexOf("on")===0&&N.length>2}).forEach(function(N){var B=N.charAt(2).toLowerCase()+N.slice(3);B.substring(B.length-4)==="Once"&&(B="~".concat(B.substring(0,B.length-4))),x[B]=r[N]})),Object.keys(x).forEach(function(N){var B=x[N];if(B){var V=N.toLowerCase();V.charAt(0)==="~"&&(V=V.substring(1),B.__once__=!0);var F=C;if(V.indexOf("zr:")===0&&(F=C.getZr(),V=V.substring(3)),B.__once__){delete B.__once__;var G=B;B=function(){for(var Z=[],q=0;q<arguments.length;q++)Z[q]=arguments[q];G.apply(void 0,Z),F.off(V,B)}}F.on(V,B)}}),c.value?nu(function(){C&&!C.isDisposed()&&C.resize(),I()}):I()}function I(){var N=A||p.value;N&&C.setOption(N,g.value)}}function T(){i.value&&(i.value.dispose(),i.value=void 0)}var S=null;ko(f,function(A){typeof S=="function"&&(S(),S=null),A||(S=ko(function(){return e.option},function(C,x){C&&(i.value?i.value.setOption(C,ns({notMerge:C.value!==(x==null?void 0:x.value)},g.value)):w())},{deep:!0}))},{immediate:!0}),ko([v,m],function(){T(),w()},{deep:!0}),KC(function(){e.group&&i.value&&(i.value.group=e.group)});var k=Kft(i);return function(A,C,x){var I=In("ecLoadingOptions",{}),N=Xe(function(){return ns(ns({},Er(I)),x==null?void 0:x.value)});KC(function(){var B=A.value;B&&(C.value?B.showLoading(N.value):B.hideLoading())})}(i,h,d),function(A,C,x){var I=null;ko([x,A,C],function(N,B,V){var F=N[0],G=N[1],Z=N[2];F&&G&&Z&&(I=__(function(){G.resize()},100),Gft(F,I)),V(function(){I&&F&&Hft(F,I)})})}(i,c,n),ZD(function(){w()}),V1(T),ns({chart:i,root:n,setOption:function(A,C){e.manualUpdate&&(o.value=A),i.value?i.value.setOption(A,C||{}):w(A)},nonEventAttrs:_},k)},render:function(){var e=ns({},this.nonEventAttrs);return e.ref="root",e.class=e.class?["echarts"].concat(e.class):"echarts",Ck("x-vue-echarts",e)}});yr([Ba,Cu,Au,Va,$a,Ua,Mu,Eft,xu]);const rht={setup(){const e=Wt();return{gameStore:_t(),userStore:e}},components:{VChart:Wa},props:{rgk:Number,workload:Number,wspd:Number,show:{type:Boolean,default:!1}},data:()=>({}),computed:{modHist(){return this.userStore.regionResources2.hasOwnProperty(this.rgk)||(this.userStore.regionResources2[this.rgk]=[0]),this.userStore.regionResources2[this.rgk].map(Number).filter(t=>!isNaN(t)).sort((t,r)=>r-t)},modTimes(){const e=this.modHist.length,t={};for(let r=0;r<this.modHist.length;r++){const n=this.modHist[r];t[n]=100*(r+1)/e}return t},modSorted(){return Object.keys(this.modTimes).map(Number).sort((t,r)=>t-r)},medianResource(){let e=0;const t=this.modHist.length;if(t%2)e=modHist[(t-1)/2];else{const r=this.modHist[(t-1-1)/2],n=this.modHist[(t-1+1)/2];e=(r+n)/2}return console.log("medianResource",t,e),this.workload*(2-e/100)},tierResources(){const e=[];let t=0;const r=this.workload,n=2*r,i=Math.ceil(r/this.wspd),o=Math.ceil(n/this.wspd);for(let s=i;s<=o;s++){const a=Math.max(2-this.wspd*s/r,0),l=r*(2-a),u=this.userStore.chanceAtResource(this.rgk,a*100),c=u-t;e.push({wld:l,mod:a,tier:s,time:c}),t=u}return e},chartDataLine(){const e=[];for(let t=0;t<1001;t++){const r=t/10,n=this.workload*(2-r/100),i=this.userStore.chanceAtResource(this.rgk,r),o=n/this.wspd;e.push([r,n,i,o])}return e},chartDataPoints(){const e=[];if(this.userStore.modHists[this.rgk]==null)return e;const t=this.userStore.modHists[this.rgk].length;for(let r=0;r<t;r++){const n=this.userStore.modHists[this.rgk][r],i=100*r/(t-1);e.push([i,n])}return e},chartColorRanges(){const e=[];let t=100;for(const r of this.tierResources){const n=r.mod*100;e.push({lte:t,gt:n}),t=n}return e},chartColorRangesWorkload(){const e=[];let t=this.workload;for(const r of this.tierResources){const n=r.wld;e.push({gt:t,lte:n}),t=n}return e},chartBands(){const e=[];let t=100;for(const r of this.tierResources){const n=r.mod*100;e.push([{name:r.tier,xAxis:t},{xAxis:n}]),t=n}return console.log("chartBands",e),e},chartOptionRotated(){return{grid:{left:30,top:30,right:30,bottom:40},xAxis:[{name:"workload",nameGap:22,min:"dataMin",max:"dataMax",nameLocation:"center",splitLine:{show:!1},boundaryGap:["10%","10%"]}],yAxis:{name:"chance",nameGap:10,type:"value",axisLine:{onZero:!1},axisLabel:{},splitLine:{show:!1},axisPointer:{snap:!0}},legend:{show:!0},series:[{data:this.chartDataLine,encode:{y:2,x:0,tooltip:[0,1,2]},type:"line",showSymbol:!1},{data:this.chartDataPoints,encode:{y:0,x:1},type:"scatter",symbolSize:5,color:"gray"}],visualMap:{show:!1,seriesIndex:0,dimension:0,pieces:this.chartColorRanges,color:["#cc3","#c22"]},tooltip:{trigger:"axis",axisPointer:{},formatter:function(e){const t=e[0].value[0],r=e[0].value[1],n=e[0].value[2];return`${e[0].value[3]*10} minute tier<br/>workload \u2264 ${r.toFixed(1)}<br/>resource \u2265 ${t.toFixed(1)}<br/>chance ${n.toFixed(1)}%`}},legend:{show:!1}}},chartOption(){return{grid:{left:30,top:30,right:30,bottom:40},xAxis:{name:"chance %",nameLocation:"center",nameGap:22,type:"value",min:0,max:100,axisLine:{onZero:!1},axisLabel:{},splitLine:{show:!1},axisPointer:{snap:!0}},yAxis:[{name:"resource",nameGap:10,min:"dataMin",max:"dataMax",splitLine:{show:!1}}],legend:{},series:[{data:this.chartDataLine,encode:{x:2,y:0,tooltip:[0,1,2]},type:"line",showSymbol:!1},{data:this.chartDataPoints,encode:{x:0,y:1},type:"scatter",symbolSize:5,color:"gray",tooltip:{show:!1}}],visualMap:{show:!1,seriesIndex:0,dimension:0,pieces:this.chartColorRanges,color:["#cc3","#c22"]},tooltip:{trigger:"axis",axisPointer:{axis:"x"},formatter:function(e){const t=e[0].value[0],r=e[0].value[1],n=e[0].value[2],i=e[0].value[3];return`${vt(n,1)}% chance to get<br/>${vt(t,1)} or more resource, or<br/>${vt(r,1)} or less workload, or<br/>${vt(i*10,1)} min \u2192 ${Math.ceil(i)*10} min cycle`},textStyle:{fontSize:11}},legend:{show:!1}}}},methods:{formatFixed:vt,updStore(e){this.userStore.regionResources2[this.rgk]=e.split(",")},spaceSep(e,t){return vt(e*1e6,0,t).replace(/\B(?=(\d{3})+(?!\d))/g," ")}}},Lu=e=>(Ve("data-v-fe3685b8"),e=e(),Ue(),e),nht=R(" Observations: "),iht=Lu(()=>y("abbr",{class:"tooltip",title:"Enter comma-separated resource values (0..100 range) observed evenly across all worker-active time.\nThe order does not matter, but repeat occurence of same value does.\nYou can sneak in newlines and comments like `evening,0,0.1,2, morning,3,22,0` - text will be stored, but ignored in calculations."},"\u2139",-1)),oht=Lu(()=>y("br",null,null,-1)),sht=["value"],aht=Lu(()=>y("span",{style:{"line-height":"200%"}},"Breakpoints:",-1)),lht={class:"fsxs tar"},uht=Lu(()=>y("th",null,"work time",-1)),cht=Lu(()=>y("th",null,"workload \u2264",-1)),fht=Lu(()=>y("th",null,"resource \u2265",-1)),hht=Lu(()=>y("th",null,"chance",-1));function dht(e,t,r,n,i,o){const s=Ut("v-chart");return M(),L(j,null,[nht,iht,oht,y("textarea",{value:this.userStore.regionResources2[this.rgk],onInput:t[0]||(t[0]=a=>o.updStore(a.target.value)),class:"multiline"},`
  `,40,sht),y("div",null,[bt(s,{class:"chart hmid",option:o.chartOption},null,8,["option"])]),aht,y("table",lht,[y("tr",null,[uht,(M(!0),L(j,null,wt(o.tierResources.filter(a=>a.time),a=>(M(),L("td",null,E(10*a.tier)+" min",1))),256))]),y("tr",null,[cht,(M(!0),L(j,null,wt(o.tierResources.filter(a=>a.time),a=>(M(),L("td",null,E(o.formatFixed(a.wld,2)),1))),256))]),y("tr",null,[fht,(M(!0),L(j,null,wt(o.tierResources.filter(a=>a.time),a=>(M(),L("td",null,E(o.formatFixed(100*a.mod,2)),1))),256))]),y("tr",null,[hht,(M(!0),L(j,null,wt(o.tierResources.filter(a=>a.time),a=>(M(),L("td",null,E(o.formatFixed(a.time,2))+"%",1))),256))])])],64)}const rE=ce(rht,[["render",dht],["__scopeId","data-v-fe3685b8"]]);const pht={setup(){const e=Wt();return{gameStore:_t(),userStore:e}},components:{FloatingResourceEdit:rE,WorkerJobDescription:X1},props:{workerEditing:Object,workerInitial:Object,show:{type:Boolean,default:!1}},computed:{newProfit(){return this.profit(this.workerEditing),this.profit(this.workerEditing)},initialProfit(){return this.profit(this.workerInitial)},currentWspdBonus(){var e="farm";if(this.gameStore.jobIsWorkshop(this.workerEditing.job)){const r=this.workerEditing.job.hk;e=this.userStore.userWorkshops[r].industry}return this.gameStore.wspdBonus(this.workerEditing,e)},statRank(){return this.gameStore.workerStatRank(this.workerEditing)}},data:()=>({wasChanged:!1,showChartPane:!1,prerelease_charkind:!0,prerelease_skillicon:!1}),watch:{workerEditing:{handler(e,t){this.wasChanged=JSON.stringify(e)!==JSON.stringify(this.workerInitial)},deep:!0},workerInitial:{handler(e,t){this.wasChanged=JSON.stringify(e)!==JSON.stringify(this.workerEditing)},deep:!0}},methods:{makeIconSrc:qr,formatFixed:vt,randBetween:da,levelup:Pd,spaceSep(e,t){return vt(e*1e6,0,t).replace(/\B(?=(\d{3})+(?!\d))/g," ")},revert(){for(const[e,t]of Object.entries(this.workerInitial))typeof t=="object"?this.workerEditing[e]=JSON.parse(JSON.stringify(t)):this.workerEditing[e]=t},profit(e){if(this.gameStore.jobIsPz(e.job)){const t=this.gameStore.workerStatsOnPlantzone(e);return this.gameStore.profitPzTownStats(e.job.pzk,e.tnk,t.wspd,t.mspd,t.luck,this.gameStore.isGiant(e.charkey)).priceDaily}if(this.gameStore.jobIsWorkshop(e.job)){const t=e.job.hk,r=this.userStore.userWorkshops[t];return this.gameStore.profitWorkshopWorker(t,r,e).priceDaily}},maxSkillsAtLevel(e){return 1+Math.floor(e/5)},suggestBestSkills(e,t){const r=this.maxSkillsAtLevel(e),n={0:{skills:[]}},i=["wspd"];t&&i.push("wspd_farm");const o=[];for(const[c,f]of Object.entries(this.gameStore.skillData))i.some(h=>f.hasOwnProperty(h)&&o.push({key:c,amount:f[h],mspd:f.hasOwnProperty("mspd")?f.mspd:0}));o.sort(function(c,f){return f.amount!=c.amount?f.amount-c.amount:f.mspd-c.mspd});for(let c=1;c<=r;c++){const f=o.slice(0,c).map(({key:d})=>d),h=this.profit({...this.workerEditing,skills:f});if(n[c]={skills:f,profit:h},f.every(d=>!this.gameStore.skillData[d].hasOwnProperty("mspd"))){const d=[...f],p=o.filter(v=>v.mspd>0);if(p.length>0){d[d.length-1]=p[0];const v=this.profit({...this.workerEditing,skills:d});v>h&&(n[c]={skills:d,profit:v},console.log("using wmSkill"))}}}console.log("wBonuses",n);const s=["mspd","luck"],a=new Set;for(const[c,f]of Object.entries(this.gameStore.skillData))s.some(d=>f.hasOwnProperty(d))&&a.add(c);console.log("mlSkills",a);const l=[n[r]],u=[];for(let c=1;c<=r;c++){const f=[...n[r-c].skills,...u],h=[];for(const d of a){if(n[r-c].skills.some(m=>m==d))continue;const p=[...f,d],v=this.profit({...this.workerEditing,skills:p});h.push({sk:d,profit:v})}if(h.length>0){h.sort((v,m)=>m.profit-v.profit);const d=h[0].sk,p=[...f,d];l[c]={skills:p,profit:h[0].profit},u.push(d),a.delete(d)}else u.push(0)}if(l.sort((c,f)=>f.profit-c.profit),l.length>0){const c=new Set(l[0].skills);console.log(c);const f=new Array(c.size);for(let d=0;d<r;d++){const p=String(this.workerEditing.skills[d]);c.has(p)&&(f[d]=Number(p),c.delete(p))}console.log(this.workerEditing.skills,c);const h=[...c];for(let d=0;d<r;d++)f[d]==null&&(f[d]=Number(h.shift()),document.querySelector("#skill"+d).classList.add("anim"),setTimeout(()=>{document.querySelector("#skill"+d).classList.remove("anim")},500));this.workerEditing.skills=f}else console.log("worker skills optimization failed")},recalcStats(e,t){if(this.workerEditing.level>1){const r=t-1,n=this.gameStore.workerStatic[this.workerEditing.charkey],i=this.gameStore.workerStatic[e],o=this.workerEditing.wspdSheet*1e6-n.wspd,s=i.wspd_lo*r,a=i.wspd_hi*r,l=s+(a-s)*this.statRank.wspd_rank,u=i.mspd_lo*r,c=i.mspd_hi*r,f=u+(c-u)*this.statRank.mspd_rank,h=this.workerEditing.luckSheet*1e4-n.luck,d=i.luck_lo*r,p=i.luck_hi*r,v=d+(p-d)*this.statRank.luck_rank;console.log(`recalculating levelups: 
        ${i.wspd/1e6}+${r}*[${i.wspd_lo/1e6}\u2026${i.wspd_hi/1e6}]*${Math.round(this.statRank.wspd_rank*1e3)/10}%\u{1F528} 
        ${i.mspd/100}+${r}*[${i.mspd_lo/1e6}\u2026${i.mspd_hi/1e6}]*${Math.round(this.statRank.wspd_rank*1e3)/10}%\u{1F9B6} 
        ${i.luck/1e4}+${r}*[${i.luck_lo/1e4}\u2026${i.luck_hi/1e4}]*${Math.round(this.statRank.luck_rank*1e3)/10}%\u{1F340}`),this.workerEditing.wspdSheet+=(i.wspd-n.wspd+l-o)/1e6,this.workerEditing.mspdSheet=i.mspd/100*(1+f/1e6),this.workerEditing.luckSheet+=(i.luck-n.luck+v-h)/1e4}else this.workerEditing.wspdSheet+=(stat_new.wspd-stat_old.wspd)/1e6,this.workerEditing.mspdSheet=stat_new.mspd*(this.workerEditing.mspdSheet/stat_old.mspd),this.workerEditing.luckSheet+=(stat_new.luck-stat_old.luck)/1e4,Pd(this.gameStore,this.workerEditing,t);this.workerEditing.wspdSheet=Math.round(this.workerEditing.wspdSheet*100)/100,this.workerEditing.mspdSheet=Math.round(this.workerEditing.mspdSheet*100)/100,this.workerEditing.luckSheet=Math.round(this.workerEditing.luckSheet*100)/100,this.workerEditing.charkey=e,this.workerEditing.level=t,this.limitSkillCount()},limitSkillCount(){const e=1+Math.floor(this.workerEditing.level/5);this.workerEditing.skills.length>e&&this.workerEditing.skills.splice(e)},levelupMe(e){this.limitSkillCount(),Pd(this.gameStore,this.workerEditing,e),this.workerEditing.wspdSheet=Math.floor(this.workerEditing.wspdSheet*100)/100,this.workerEditing.mspdSheet=Math.floor(this.workerEditing.mspdSheet*100)/100,this.workerEditing.luckSheet=Math.floor(this.workerEditing.luckSheet*100)/100},setStatsRandom(){const e=this.workerEditing,t=this.gameStore.workerStatic[e.charkey];let r=t.wspd,n=0,i=t.luck;for(let s=2;s<=e.level;s++)r+=da(t.wspd_lo,t.wspd_hi),n+=da(t.mspd_lo,t.mspd_hi),i+=da(t.luck_lo,t.luck_hi);let o=t.mspd*(1+n/1e6);e.wspdSheet=Math.round(r/1e6*100)/100,e.mspdSheet=Math.round(o)/100,e.luckSheet=Math.round(i/1e4*100)/100},setStatsMedian(){const e=this.workerEditing,t=this.gameStore.workerStatic[e.charkey];let r=t.wspd,n=0,i=t.luck;for(let s=2;s<=e.level;s++)r+=(t.wspd_lo+t.wspd_hi)/2,n+=(t.mspd_lo+t.mspd_hi)/2,i+=(t.luck_lo+t.luck_hi)/2;let o=t.mspd*(1+n/1e6);e.wspdSheet=Math.round(r/1e6*100)/100,e.mspdSheet=Math.round(o)/100,e.luckSheet=Math.round(i/1e4*100)/100}}},br=e=>(Ve("data-v-ec9f3a1c"),e=e(),Ue(),e),vht={key:0,id:"columns"},ght={id:"worker"},mht={class:"borderless"},_ht=br(()=>y("td",null,"name:",-1)),yht={style:{float:"right"}},bht=br(()=>y("td",null,"type:",-1)),wht=["value"],Sht=["value"],Tht={key:0},kht=br(()=>y("td",null,"stash:",-1)),Pht=["value"],Eht=br(()=>y("td",null,"job:",-1)),Cht=R(" idle "),Aht={key:0},Mht={key:1},xht=R(" \u270D\uFE0F "),Lht=R(" @ "),Iht=R("M$/day "),Oht=R("CP "),Rht=R(" [\u{1F33B}] "),Dht=["value"],Nht=br(()=>y("abbr",{class:"tooltip",title:"see Settings > \u{1F3ED}Workshops"},"\u2139",-1)),Fht={class:"fsxs"},zht=R(" \u270D\uFE0F "),Bht=R(" @ "),$ht=R("M$/day "),Vht=R("CP "),Uht=R(" UNKNOWN_JOBTYPE "),Wht={key:1},jht=br(()=>y("td",null,"$/day:",-1)),Ght={key:0},Hht={key:0},Xht={colspan:"2"},Yht={key:0,class:"borderless"},qht=br(()=>y("tr",null,[y("th",null,"stats:"),y("th",{class:"fsxs"},"rank"),y("th",null,"sheet"),y("th",null,"+"),y("th",null,"skill"),y("th",null,"="),y("th",null,"final"),y("th")],-1)),Zht={class:"center"},Kht={rowspan:"3"},Jht=br(()=>y("br",null,null,-1)),Qht={class:"fsxs"},tdt=br(()=>y("td",null,null,-1)),edt=br(()=>y("td",null,null,-1)),rdt=br(()=>y("td",null,"\u{1F528}",-1)),ndt={class:"center"},idt={class:"fsxs"},odt=br(()=>y("td",null,null,-1)),sdt=br(()=>y("td",null,null,-1)),adt=br(()=>y("td",null,"\u{1F9B6}",-1)),ldt={class:"center"},udt={class:"fsxs"},cdt=br(()=>y("td",null,null,-1)),fdt=br(()=>y("td",null,null,-1)),hdt=br(()=>y("td",null,"\u{1F340}",-1)),ddt={class:"center"},pdt=br(()=>y("td",null,"skills:",-1)),vdt={style:{float:"right"}},gdt=["disabled"],mdt={colspan:"2",s:""},_dt=["id","onUpdate:modelValue"],ydt=["value"],bdt=["src"],wdt=R(" use floating resource for this regionGroup "),Sdt={key:0,id:"chartPane"};function Tdt(e,t,r,n,i,o){const s=Ut("WorkerJobDescription"),a=Ut("FloatingResourceEdit");return r.workerEditing?(M(),L("div",vht,[y("div",ght,[y("table",mht,[y("tr",null,[_ht,y("td",null,[ot(y("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>r.workerEditing.label=l),style:{width:"10em"}},null,512),[[Gt,r.workerEditing.label]]),R(" lvl."+E(r.workerEditing.level)+" ",1),y("button",{onClick:t[1]||(t[1]=l=>o.levelupMe(r.workerEditing.level+1))},"\u{1F815}"),y("button",{onClick:t[2]||(t[2]=l=>o.recalcStats(r.workerEditing.charkey,r.workerEditing.level-1))},"\u{1F817}"),Q("",!0),y("div",yht,[e.wasChanged&&r.workerInitial?(M(),L("button",{key:0,onClick:t[4]||(t[4]=l=>o.revert())},"revert")):Q("",!0)])])]),y("tr",null,[bht,y("td",null,[e.prerelease_charkind?(M(),L("select",{key:0,onChange:t[5]||(t[5]=l=>o.recalcStats(l.target.value,r.workerEditing.level)),value:r.workerEditing.charkey},[(M(!0),L(j,null,wt(n.gameStore.workerStatic,(l,u)=>(M(),L("option",{value:u},E(u)+" "+E(n.gameStore.uloc.char[u])+" "+E(l.wspd/1e6)+" / "+E(l.mspd/100)+" / "+E(l.luck/1e4),9,Sht))),256))],40,wht)):(M(),L(j,{key:1},[R(E(n.gameStore.uloc.char[r.workerEditing.charkey]),1)],64))])]),r.workerEditing.job&&n.gameStore.jobIsPz(r.workerEditing.job)?(M(),L("tr",Tht,[kht,y("td",null,[ot(y("select",{"onUpdate:modelValue":t[6]||(t[6]=l=>r.workerEditing.job.storage=l)},[(M(!0),L(j,null,wt(n.gameStore.townsWithRedirectableStorage,l=>(M(),L("option",{value:l},E(n.gameStore.uloc.node[l]),9,Pht))),256))],512),[[qe,r.workerEditing.job.storage]])])])):Q("",!0),y("tr",null,[Eht,y("td",null,[n.gameStore.jobIsIdle(r.workerEditing.job)?(M(),L(j,{key:0},[Cht],64)):n.gameStore.jobIsPz(r.workerEditing.job)?(M(),L(j,{key:1},[R(E(n.gameStore.plantzoneName(r.workerEditing.job.pzk))+" / ",1),n.gameStore.ready&&r.workerEditing.job&&r.workerEditing.job.pzk&&n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup&&n.userStore.allowFloating&&n.userStore.useFloatingResources[n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup]?(M(),L("span",Aht,[R(" ~"+E(o.formatFixed(n.userStore.medianWorkloads[r.workerEditing.job.pzk],2))+" ",1),y("span",{onClick:t[7]||(t[7]=l=>e.showChartPane=!e.showChartPane)},E(e.showChartPane?"\u25C0":"\u25B6"),1)])):(M(),L("span",Mht,E(o.formatFixed(n.gameStore.plantzones[r.workerEditing.job.pzk].activeWorkload,2)),1))],64)):n.gameStore.jobIsCustom(r.workerEditing.job)?(M(),L(j,{key:2},[xht,ot(y("input",{class:"workshop-label-input","onUpdate:modelValue":t[8]||(t[8]=l=>r.workerEditing.job.label=l)},null,512),[[Gt,r.workerEditing.job.label]]),Lht,ot(y("input",{type:"number",class:"float4",step:"0.1","onUpdate:modelValue":t[9]||(t[9]=l=>r.workerEditing.job.profit=l)},null,512),[[Gt,r.workerEditing.job.profit,void 0,{number:!0}]]),Iht,ot(y("input",{type:"number",class:"float4","onUpdate:modelValue":t[10]||(t[10]=l=>r.workerEditing.job.cp=l)},null,512),[[Gt,r.workerEditing.job.cp,void 0,{number:!0}]]),Oht],64)):n.gameStore.jobIsFarming(r.workerEditing.job)?(M(),L(j,{key:3},[Rht],64)):n.gameStore.jobIsWorkshop(r.workerEditing.job)?(M(),L(j,{key:4},[ot(y("select",{"onUpdate:modelValue":t[11]||(t[11]=l=>r.workerEditing.job.recipe=l),style:{width:"13em"}},[(M(!0),L(j,null,wt(n.gameStore.craftItems,(l,u)=>(M(),L("option",{value:u},E(n.gameStore.uloc.item[l[0]]),9,Dht))),256))],512),[[qe,r.workerEditing.job.recipe]]),bt(s,{w:r.workerEditing},null,8,["w"]),R(" / "+E(n.userStore.userWorkshops[r.workerEditing.job.hk].manualWorkload)+" ",1),Nht,y("span",Fht," [type: "+E(n.userStore.userWorkshops[r.workerEditing.job.hk].industry)+"] ",1)],64)):n.gameStore.jobIsCustom(r.workerEditing.job)?(M(),L(j,{key:5},[zht,ot(y("input",{class:"workshop-label-input","onUpdate:modelValue":t[12]||(t[12]=l=>r.workerEditing.job.label=l)},null,512),[[Gt,r.workerEditing.job.label]]),Bht,ot(y("input",{type:"number",class:"float4",step:"0.1","onUpdate:modelValue":t[13]||(t[13]=l=>r.workerEditing.job.profit=l)},null,512),[[Gt,r.workerEditing.job.profit,void 0,{number:!0}]]),$ht,ot(y("input",{type:"number",class:"float4","onUpdate:modelValue":t[14]||(t[14]=l=>r.workerEditing.job.cp=l)},null,512),[[Gt,r.workerEditing.job.cp,void 0,{number:!0}]]),Vht],64)):(M(),L(j,{key:6},[Uht],64))])]),r.workerEditing.job?(M(),L("tr",Wht,[jht,y("td",null,[n.gameStore.jobIsPz(r.workerEditing.job)?(M(),L(j,{key:0},[R(E(o.spaceSep(o.initialProfit))+" ",1),o.newProfit!=o.initialProfit?(M(),L("span",Ght,[R(" \u2192 "+E(o.spaceSep(o.newProfit))+" ",1),y("span",{class:gr({greenText:o.newProfit>o.initialProfit,redText:o.newProfit<o.initialProfit,fsxs:1})},E(o.formatFixed(100*(o.newProfit-o.initialProfit)/o.initialProfit,2,!0))+"% ",3)])):Q("",!0)],64)):n.gameStore.jobIsFarming(r.workerEditing.job)?(M(),L(j,{key:1},[R(E(o.spaceSep(n.userStore.workerIncome(r.workerEditing))),1)],64)):n.gameStore.jobIsWorkshop(r.workerEditing.job)?(M(),L(j,{key:2},[R(E(o.spaceSep(o.initialProfit))+" ",1),o.newProfit!=o.initialProfit?(M(),L("span",Hht,[R(" \u2192 "+E(o.spaceSep(o.newProfit))+" ",1),y("span",{class:gr({greenText:o.newProfit>o.initialProfit,redText:o.newProfit<o.initialProfit,fsxs:1})},E(o.formatFixed(100*(o.newProfit-o.initialProfit)/o.initialProfit,2,!0))+"% ",3)])):Q("",!0)],64)):Q("",!0)])])):Q("",!0),y("tr",null,[y("td",Xht,[n.gameStore.ready?(M(),L("table",Yht,[qht,y("tr",Zht,[y("td",Kht,[y("button",{onClick:t[15]||(t[15]=l=>o.setStatsMedian()),class:"fsxxs"},"median"),Jht,y("button",{onClick:t[16]||(t[16]=l=>o.setStatsRandom()),class:"fsxxs"},"random")]),y("td",Qht,E(o.formatFixed(o.statRank.wspd_rank*100,1))+"% ",1),y("td",null,[ot(y("input",{type:"number","onUpdate:modelValue":t[17]||(t[17]=l=>r.workerEditing.wspdSheet=l),step:"0.01",class:"w5em right"},null,512),[[Gt,r.workerEditing.wspdSheet]])]),tdt,y("td",null,E(o.formatFixed(o.currentWspdBonus,2)),1),edt,y("td",null,E(o.formatFixed(r.workerEditing.wspdSheet+o.currentWspdBonus,2)),1),rdt]),y("tr",ndt,[y("td",idt,E(o.formatFixed(o.statRank.mspd_rank*100,1))+"% ",1),y("td",null,[ot(y("input",{type:"number","onUpdate:modelValue":t[18]||(t[18]=l=>r.workerEditing.mspdSheet=l),step:"0.01",class:"w5em right"},null,512),[[Gt,r.workerEditing.mspdSheet]])]),odt,y("td",null,E(o.formatFixed(n.gameStore.mspdBonus(r.workerEditing),1))+"%",1),sdt,y("td",null,E(o.formatFixed(n.gameStore.workerStatic[r.workerEditing.charkey].mspd/100*(r.workerEditing.mspdSheet/(n.gameStore.workerStatic[r.workerEditing.charkey].mspd/100)+n.gameStore.mspdBonus(r.workerEditing)/100),2)),1),adt]),y("tr",ldt,[y("td",udt,E(o.formatFixed(o.statRank.luck_rank*100,1))+"% ",1),y("td",null,[ot(y("input",{type:"number","onUpdate:modelValue":t[19]||(t[19]=l=>r.workerEditing.luckSheet=l),step:"0.01",class:"w5em right"},null,512),[[Gt,r.workerEditing.luckSheet]])]),cdt,y("td",null,E(o.formatFixed(n.gameStore.luckBonus(r.workerEditing),2)),1),fdt,y("td",null,E(o.formatFixed(r.workerEditing.luckSheet+n.gameStore.luckBonus(r.workerEditing),2)),1),hdt])])):Q("",!0)])]),y("tr",ddt,[pdt,y("td",null,[y("div",vdt,[y("button",{disabled:!(r.workerEditing.job&&r.workerEditing.job.pzk in n.userStore.pzJobs),onClick:t[20]||(t[20]=l=>o.suggestBestSkills(r.workerEditing.level,!0))}," optimize ",8,gdt)])])]),(M(),L(j,null,wt(9,l=>y("tr",null,[y("td",mdt,[ot(y("select",{id:"skill"+(l-1),"onUpdate:modelValue":u=>r.workerEditing.skills[l-1]=u,class:"w30em animable",style:{width:"30em"}},[(M(!0),L(j,null,wt(n.gameStore.availableSkillPool(r.workerEditing.skills,r.workerEditing.skills[l-1]),u=>(M(),L("option",{value:u},E(n.gameStore.uloc.skill[u]+" / "+n.gameStore.uloc.skilldesc[u]),9,ydt))),256))],8,_dt),[[qe,r.workerEditing.skills[l-1]]]),e.prerelease_skillicon?(M(),L("img",{key:0,src:`data/icons/skill/${r.workerEditing.skills[l-1]}.png`,width:"22",height:"22"},null,8,bdt)):Q("",!0)])])),64))]),n.gameStore.ready&&r.workerEditing.job&&n.gameStore.jobIsPz(r.workerEditing.job)&&r.workerEditing.job.pzk in n.gameStore.plantzones&&n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup&&n.userStore.allowFloating?(M(),L(j,{key:0},[ot(y("input",{type:"checkbox","onUpdate:modelValue":t[21]||(t[21]=l=>n.userStore.useFloatingResources[n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup]=l)},null,512),[[Ke,n.userStore.useFloatingResources[n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup]]]),wdt],64)):Q("",!0)]),e.showChartPane&&n.gameStore.ready&&r.workerEditing.job&&r.workerEditing.job.pzk&&r.workerEditing.job.pzk in n.gameStore.plantzones&&n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup&&n.userStore.useFloatingResources[n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup]?(M(),L("div",Sdt,[bt(a,{rgk:n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup,wspd:r.workerEditing.wspdSheet+o.currentWspdBonus,workload:n.gameStore.plantzones[r.workerEditing.job.pzk].workload,show:!0},null,8,["rgk","wspd","workload"])])):Q("",!0)])):Q("",!0)}const PB=ce(pht,[["render",Tdt],["__scopeId","data-v-ec9f3a1c"]]);const kdt={setup(){const e=Wt();return{gameStore:_t(),userStore:e}},props:{w:Object,defaultRedirect:Number,show:{type:Boolean,default:!1}},data:()=>({customProfit:0,customCP:0,customLabel:"",selectedRedirect:1}),watch:{show:function(e){e&&(this.selectedRedirect=this.w.tnk)}},methods:{makeIconSrc:qr,formatFixed:vt,assignWorkerPz(e,t){console.log("assigning to",this.selectedRedirect),this.userStore.assignWorker(e,{kind:"plantzone",pzk:t,storage:this.selectedRedirect}),this.$emit("update:show",!1)},assignWorkerFm(e){this.userStore.assignWorker(e,"farming"),this.$emit("update:show",!1)},assignWorkerCustom(e){this.userStore.assignWorker(e,["workshop",this.customProfit,this.customCP,this.customLabel]),this.$emit("update:show",!1)},assignWorkerWorkshop(e,t){this.userStore.assignWorker(e,{kind:"workshop",hk:t,recipe:void 0}),this.$emit("update:show",!1)},workshopBusy(e){return this.userStore.userWorkers.some(t=>t.job&&t.job.kind=="workshop"&&t.job.hk==e)}},computed:{thisFarmSelectionEntry(){return this.gameStore.farmSelectionEntry(this.gameStore.tnk2tk(this.w.tnk))},addBedHereInfo(){return this.gameStore.addBedInfo(this.gameStore.tnk2tk(this.w.tnk))},workerNearestCpPlantzonesProfit(){const e=[];if(!this.w)return e;const t=Date.now(),r=16,n=this.gameStore.workerStatsOnPlantzone(this.w),i=this.gameStore.tnk2tk(this.w.tnk),o=this.gameStore.tnk2tk(this.selectedRedirect);return this.gameStore.dijDiscountedNearestPlantzones(this.w.tnk,80).forEach(([a,l,u])=>{if(this.userStore.workedPlantzones.has(a.toString()))return;const c=this.gameStore.pzSelectionEntry(a,i,this.w.tnk,l,u,this.w,n,o);c.profit.dist>1e6||e.push(c)}),e.sort((a,l)=>l.dailyPerCp-a.dailyPerCp),console.log("cpt: workerNearestCpPlantzonesProfit took",Date.now()-t,"ms"),e.slice(0,r)},workerWorkshopsProfit(){const e=[];if(!this.w)return e;const t=this.gameStore.tnk2tk(this.w.tnk),r=Date.now(),n=16,i=new Set([...this.userStore.autotakenNodes]);for(const[o,s]of Object.entries(this.userStore.userWorkshops)){const a=Number(o);if(this.workshopBusy(a)&&s.industry!="mass"||this.gameStore.houseDistance(this.w.tnk,a)>1e6)continue;const l=this.gameStore.houseInfo[a].affTown,u=this.gameStore.tk2tnk(l),c=this.userStore.occupiedWorkshops.has(Number(a))?0:s.manualCp,[f,h]=this.gameStore.dijkstraPath(u,this.w.tnk,i),d=this.gameStore.workshopSelectionEntry(a,t,this.w.tnk,f,this.w,h,c);e.push(d)}return e.sort((o,s)=>s.dailyPerCp-o.dailyPerCp),console.log("cpt: workerWorkshopsProfit took",Date.now()-r,"ms"),console.log("workerWorkshopsProfit",e),e.slice(0,n)}}},cn=e=>(Ve("data-v-9349e46d"),e=e(),Ue(),e),Pdt={class:"spaced-columns"},Edt=R(" ) where?"),Cdt=cn(()=>y("br",null,null,-1)),Adt=R(" stash: "),Mdt=["value"],xdt=cn(()=>y("th",null,"node",-1)),Ldt=cn(()=>y("th",null,"workload",-1)),Idt=cn(()=>y("th",null,"walk",-1)),Odt=cn(()=>y("th",null,"+M$/day",-1)),Rdt=cn(()=>y("th",null,"+CP",-1)),Ddt=cn(()=>y("th",null,"M$/day/CP",-1)),Ndt=cn(()=>y("th",null,"action",-1)),Fdt=["href"],zdt=R(E(" ")+" "),Bdt=["src"],$dt={class:"tac"},Vdt={class:"tac"},Udt={class:"tac"},Wdt={class:"tac"},jdt=["title"],Gdt=R("+"),Hdt=["title"],Xdt={class:"tac"},Ydt=["onClick"],qdt=cn(()=>y("tr",null,[y("td",{colspan:"7",class:"center"},"Special jobs (not node based)")],-1)),Zdt={key:0},Kdt=cn(()=>y("td",null,[R(" \u{1F33B} Farm "),y("abbr",{title:"see Settings page: singleWorkerProfit = (fullWorkersProfit - noWorkersProfit) / 10",class:"tooltip"},"\u2139")],-1)),Jdt=cn(()=>y("td",{class:"tac"},"x",-1)),Qdt=cn(()=>y("td",{class:"tac"},"x",-1)),tpt={class:"tac"},ept={class:"tac"},rpt=["title"],npt={class:"tac"},ipt={class:"tac"},opt={class:"tac"},spt={class:"tac"},apt={class:"tac"},lpt=["title"],upt=R("+"),cpt={class:"tooltip",title:`cost of operating the workshop
(see Settings > \u{1F3ED}Workshops)`},fpt=R("+"),hpt=["title"],dpt={class:"tac"},ppt=["onClick"],vpt=R(" \u270D\uFE0F Custom job "),gpt=cn(()=>y("abbr",{title:"enter daily profit and CP cost for this specific job PER ONE WORKER",class:"tooltip"},"\u2139",-1)),mpt={style:{float:"right"}},_pt=R(" \xA0label: "),ypt=cn(()=>y("td",{class:"tac"},"x",-1)),bpt=cn(()=>y("td",{class:"tac"},"x",-1)),wpt={class:"tac"},Spt={class:"tac"},Tpt=R("+"),kpt=["title"],Ppt={class:"tac"};function Ept(e,t,r,n,i,o){const s=Ut("RouterLink");return r.w?(M(),L(j,{key:0},[y("div",Pdt,[y("div",null,[R(" Send "+E(r.w.label)+" ( ",1),n.userStore.displayWorkerStatsForPz?(M(),L(j,{key:0},[R(E(o.formatFixed(n.gameStore.workerStatsOnPlantzone(r.w).wspd,2))+"\u{1F528} "+E(o.formatFixed(n.gameStore.workerStatsOnPlantzone(r.w).mspd,2))+"\u{1F9B6} "+E(o.formatFixed(n.gameStore.workerStatsOnPlantzone(r.w).luck,2))+"\u{1F340} ",1)],64)):(M(),L(j,{key:1},[R(E(o.formatFixed(r.w.wspdSheet,2))+"\u{1F528} "+E(o.formatFixed(r.w.mspdSheet,2))+"\u{1F9B6} "+E(o.formatFixed(r.w.luckSheet,2))+"\u{1F340} ",1)],64)),Edt,Cdt,R(" "+E(o.workerNearestCpPlantzonesProfit.length)+" top untaken nodes near "+E(n.gameStore.uloc.node[r.w.tnk])+": ",1)]),y("div",null,[Adt,ot(y("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>e.selectedRedirect=a)},[(M(!0),L(j,null,wt(n.gameStore.townsWithRedirectableStorageSet,a=>(M(),L("option",{value:a},E(n.gameStore.uloc.node[a]),9,Mdt))),256))],512),[[qe,e.selectedRedirect]])])]),y("table",null,[y("tr",null,[xdt,Ldt,Idt,Odt,Rdt,Ddt,Q("",!0),Ndt]),(M(!0),L(j,null,wt(o.workerNearestCpPlantzonesProfit,a=>(M(),L("tr",null,[y("td",null,[y("a",{href:this.userStore.codexNodeUrl+a.pz.key},E(a.pz.name),9,Fdt),(M(!0),L(j,null,wt(this.gameStore.plantzones[a.pz.key].itemkeys,l=>(M(),L(j,null,[zdt,bt(s,{tag:"a",to:{path:"./settings",hash:"#item"+l}},{default:we(()=>[y("img",{src:o.makeIconSrc(l),class:"iconitem"},null,8,Bdt)]),_:2},1032,["to"])],64))),256))]),y("td",$dt,E(n.userStore.useFloatingResources[a.pz.regiongroup]?"~":"")+E(o.formatFixed(n.userStore.medianWorkloads[a.pz.key],2)),1),y("td",Vdt,E(o.formatFixed(a.profit.dist,0)),1),y("td",Udt,E(o.formatFixed(a.profit.priceDaily,2)),1),y("td",Wdt,[y("abbr",{title:Array.from(a.path,l=>`${n.userStore.autotakenNodes.has(l)?0:n.gameStore.nodes[l].CP} ${n.gameStore.uloc.node[l]}`).join(`
`),class:"tooltip"},E(a.mapCp),9,jdt),Gdt,y("abbr",{title:a.infraTooltip,class:"tooltip"},E(o.formatFixed(a.townCp)),9,Hdt),R("="+E(o.formatFixed(a.cp)),1)]),y("td",Xdt,E(o.formatFixed(a.dailyPerCp,2)),1),Q("",!0),y("td",null,[y("button",{onClick:l=>o.assignWorkerPz(r.w,a.pz.key)},"assign",8,Ydt)])]))),256)),qdt,n.userStore.farmingEnable&&n.userStore.workersFarmingCount<10?(M(),L("tr",Zdt,[Kdt,Jdt,Qdt,y("td",tpt,E(o.formatFixed(o.thisFarmSelectionEntry.income,2)),1),y("td",ept,[y("abbr",{title:o.thisFarmSelectionEntry.infraTooltip,class:"tooltip"},E(o.formatFixed(o.thisFarmSelectionEntry.infraCp)),9,rpt)]),y("td",npt,E(o.formatFixed(o.thisFarmSelectionEntry.dailyPerCp,2)),1),Q("",!0),y("td",null,[y("button",{onClick:t[1]||(t[1]=a=>o.assignWorkerFm(r.w))},"assign")])])):Q("",!0),(M(!0),L(j,null,wt(o.workerWorkshopsProfit,a=>(M(),L("tr",null,[y("td",null," \u{1F3ED} "+E(n.gameStore.uloc.char[a.hk])+" "+E(a.workshop.label),1),y("td",ipt,E(a.workshop.manualWorkload),1),y("td",opt,E(o.formatFixed(a.profit.distance,0)),1),y("td",spt,E(o.formatFixed(a.profit.priceDaily,2)),1),y("td",apt,[y("abbr",{class:"tooltip",title:`connection cost:
`+Array.from(a.path,l=>`${n.userStore.autotakenNodes.has(l)?0:n.gameStore.nodes[l].CP} ${n.gameStore.uloc.node[l]}`).join(`
`)},E(a.mapCp),9,lpt),upt,y("abbr",cpt,E(a.houseCp),1),fpt,y("abbr",{title:a.infraTooltip,class:"tooltip"},E(a.townCp),9,hpt),R("="+E(a.cp),1)]),y("td",dpt,E(o.formatFixed(a.dailyPerCp,2)),1),Q("",!0),y("td",null,[y("button",{onClick:l=>o.assignWorkerWorkshop(r.w,a.hk)},"assign",8,ppt)])]))),256)),y("tr",null,[y("td",null,[vpt,gpt,y("div",mpt,[_pt,ot(y("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>e.customLabel=a),class:"workshop-label-input"},null,512),[[Gt,e.customLabel]])])]),ypt,bpt,y("td",wpt,[ot(y("input",{type:"number",class:"float4",step:"0.1","onUpdate:modelValue":t[3]||(t[3]=a=>e.customProfit=a)},null,512),[[Gt,e.customProfit,void 0,{number:!0}]])]),y("td",Spt,[ot(y("input",{type:"number",class:"float3","onUpdate:modelValue":t[4]||(t[4]=a=>e.customCP=a)},null,512),[[Gt,e.customCP,void 0,{number:!0}]]),Tpt,y("abbr",{title:o.addBedHereInfo.tooltip,class:"tooltip"},E(o.formatFixed(o.addBedHereInfo.cost)),9,kpt),R("="+E(o.formatFixed(e.customCP+o.addBedHereInfo.cost)),1)]),y("td",Ppt,E(o.formatFixed(e.customProfit/(e.customCP+o.addBedHereInfo.cost),2)),1),Q("",!0),y("td",null,[y("button",{onClick:t[5]||(t[5]=a=>o.assignWorkerCustom(r.w))},"assign")])])])],64)):Q("",!0)}const Cpt=ce(kdt,[["render",Ept],["__scopeId","data-v-9349e46d"]]),Apt={setup(){const e=Wt();return{gameStore:_t(),userStore:e}},props:{tk:String,o:Object,show:{type:Boolean,default:!1}},methods:{formatFixed:vt}},Mpt=R(" Connect to nearest town "),xpt=y("tr",null,[y("th",null,"House"),y("th",null,"\u{1F6CF}\uFE0F"),y("th",null,"CP")],-1),Lpt=["disabled","onUpdate:modelValue"],Ipt=R(" "+E(" ")+" "),Opt=["href"],Rpt=["disabled"],Dpt=R(" P2W slots \u2192 Total: ");function Npt(e,t,r,n,i,o){return r.o?(M(),L(j,{key:0},[y("h3",null,E(n.gameStore.uloc.town[r.tk])+" lodging config",1),r.tk==619?(M(),L(j,{key:0},[ot(y("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=s=>n.userStore.activateAncado=s)},null,512),[[Ke,n.userStore.activateAncado]]),Mpt],64)):Q("",!0),y("table",null,[xpt,(M(!0),L(j,null,wt(r.o.houses,s=>(M(),L("tr",null,[y("td",null,[ot(y("input",{type:"checkbox",disabled:r.tk==619&&!n.userStore.activateAncado,"onUpdate:modelValue":a=>n.userStore.lodgingTaken[s.key]=a},null,8,Lpt),[[Ke,n.userStore.lodgingTaken[s.key]]]),Ipt,y("a",{href:"https://bdocodex.com/us/npc/"+s.key},E(n.gameStore.uloc.char[s.key]),9,Opt)]),y("td",null,E(s.lodgingSpaces),1),y("td",null,E(s.CP),1)]))),256)),y("tr",null,[y("td",null,[ot(y("input",{type:"number",disabled:r.tk==619&&!n.userStore.activateAncado,"onUpdate:modelValue":t[1]||(t[1]=s=>n.userStore.lodgingP2W[r.tk]=s),class:"short"},null,8,Rpt),[[Gt,n.userStore.lodgingP2W[r.tk],void 0,{number:!0}]]),Dpt]),y("td",null,E(n.userStore.haveLodging.slots.perTown[r.tk]),1),y("td",null,E(n.userStore.haveLodging.cp.perTown[r.tk]),1)])])],64)):Q("",!0)}const Fpt=ce(Apt,[["render",Npt]]);const zpt={setup(){const e=Wt();return{gameStore:_t(),userStore:e}},props:{tk:Number,show:{type:Boolean,default:!1}},components:{WorkerJobDescription:X1},data:()=>({}),computed:{wantLodging(){this.tk in this.userStore.lodgingP2W||(this.userStore.lodgingP2W[this.tk]=0);const e=this.userStore.townWorkers(this.tk).length-this.userStore.lodgingP2W[this.tk]-1;return e>0?e:0},wantStorage(){if(!this.userStore.townsStoreItemkeys[this.tk].size)return 0;this.tk in this.userStore.storageP2W||(this.userStore.storageP2W[this.tk]=0),this.tk in this.userStore.storagePersonal||(this.userStore.storagePersonal[this.tk]=0);const e=this.userStore.townsStoreItemkeys[this.tk].size+this.userStore.storagePersonal[this.tk]-this.userStore.storageP2W[this.tk]-this.userStore.baseStorage;return e>0?e:0},bestLookup(){return this.gameStore.lsLookup(this.tk,this.wantLodging,this.wantStorage)},storageViewCount(){const e=this.userStore.baseStorage+this.userStore.storageP2W[this.tk]+this.userStore.townsInfra[this.tk].storage;return isNaN(e)?0:e},ingameSortedItems(){const e=[...this.userStore.townsStoreItemkeys[this.tk]];e.sort((n,i)=>{var o=this.gameStore.itemInfo[i].typePriority-this.gameStore.itemInfo[n].typePriority;if(o)return o;var o=this.gameStore.itemInfo[i].grade-this.gameStore.itemInfo[n].grade;return o||i-n});const t=Array(this.userStore.storagePersonal[this.tk]).fill("P"),r=e.concat(t);return e.length&&r.push("F"),r}},methods:{formatFixed:vt,makeIconSrc:qr,houseCraftPickedTooltip(e){const t=[];return this.userStore.townsInfra[e].indices.forEach((r,n)=>{if(this.userStore.townsInfra[e].states[n]==0)return;const i=this.userStore.townsInfra[e].states[n]==1?"\u{1F4E6}":"\u{1F6CF}\uFE0F";t.push(i+this.gameStore.uloc.char[r])}),t.join(`
`)},itemTooltip(e,t){const r=t+" "+this.gameStore.uloc.item[t];let n="";return this.userStore.workingWorkers.forEach(i=>{if(this.gameStore.jobIsPz(i.job)){const o=this.gameStore.tnk2tk(i.job.storage),s=this.gameStore.plantzones[i.job.pzk].itemkeys;if(o==e&&s.has(t)){const a=i.job.pzk;n.length==0&&(n+=` from:
`),n+=`${this.gameStore.parentNodeName(a)}
`}}}),r+n}}},Zr=e=>(Ve("data-v-7673a343"),e=e(),Ue(),e),Bpt={style:{"font-size":"x-large"}},$pt=R(" housing config"),Vpt=R(" Connect to nearest town "),Upt={key:2,class:"section"},Wpt=Zr(()=>y("h3",null,"\u{1F6CF}\uFE0F lodging",-1)),jpt=Zr(()=>y("br",null,null,-1)),Gpt=R(" - 1 initial"),Hpt=Zr(()=>y("br",null,null,-1)),Xpt=R(" - "),Ypt=["disabled"],qpt=R(" from P2W"),Zpt=Zr(()=>y("br",null,null,-1)),Kpt={key:0},Jpt={key:1,class:"red"},Qpt=Zr(()=>y("br",null,null,-1)),t0t={class:"section"},e0t={id:"storageParent"},r0t={id:"storageLeft"},n0t=Zr(()=>y("h3",null,"\u{1F4E6} storage",-1)),i0t=Zr(()=>y("br",null,null,-1)),o0t=R(" + 1 Free slot"),s0t=Zr(()=>y("br",null,null,-1)),a0t=R(" + "),l0t=R(" Personal items"),u0t=Zr(()=>y("br",null,null,-1)),c0t=Zr(()=>y("span",{class:"markInnate underline"},"initial",-1)),f0t=Zr(()=>y("br",null,null,-1)),h0t=R(" - "),d0t=R(" "+E(" ")),p0t=Zr(()=>y("span",{class:"markP2W underline"},"from P2W",-1)),v0t=Zr(()=>y("br",null,null,-1)),g0t=Zr(()=>y("span",{class:"markProvided underline"},"required",-1)),m0t={key:1},_0t={key:2,class:"red"},y0t=Zr(()=>y("br",null,null,-1)),b0t=Zr(()=>y("span",{class:"markExtra underline"},"extra",-1)),w0t={id:"storageItemList"},S0t={key:0},T0t={key:0,class:"textItem"},k0t={key:1,class:"textItem"},P0t=["title"],E0t=["src"],C0t={class:"fsxs"};function A0t(e,t,r,n,i,o){return Ut("WorkerJobDescription"),r.tk>0?(M(),L(j,{key:0},[Q("",!0),y("p",null,[y("span",Bpt,E(n.gameStore.uloc.town[r.tk]),1),$pt]),r.tk==619?(M(),L(j,{key:1},[ot(y("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=s=>n.userStore.activateAncado=s)},null,512),[[Ke,n.userStore.activateAncado]]),Vpt],64)):Q("",!0),r.tk in n.gameStore.lodgingPerTown?(M(),L("div",Upt,[Wpt,R(" "+E(n.userStore.townWorkingWorkers(r.tk).length)+" used by workers",1),jpt,Gpt,Hpt,Xpt,ot(y("input",{type:"number",class:"w3em",min:"0",max:"20",disabled:r.tk==619&&!n.userStore.activateAncado,"onUpdate:modelValue":t[1]||(t[1]=s=>n.userStore.lodgingP2W[r.tk]=s)},null,8,Ypt),[[Gt,n.userStore.lodgingP2W[r.tk],void 0,{number:!0}]]),qpt,Zpt,R(" = "+E(n.userStore.townsInfra[r.tk].wantLodging)+" required ",1),n.userStore.townsInfra[r.tk].warnL?(M(),L("span",Kpt,"\u2190 max possible")):Q("",!0),n.userStore.townsInfra[r.tk].errL?(M(),L("span",Jpt,"\u2190 too much!")):Q("",!0),Qpt,y("strong",null,E(n.userStore.townsInfra[r.tk].lodging)+" found ",1)])):Q("",!0),y("div",t0t,[y("div",e0t,[y("div",r0t,[n0t,R(" "+E(n.userStore.townsStoreItemkeys[r.tk]&&n.userStore.townsStoreItemkeys[r.tk].size)+" worker items",1),i0t,n.userStore.townsStoreItemkeys[r.tk]&&n.userStore.townsStoreItemkeys[r.tk].size>0?(M(),L(j,{key:0},[o0t,s0t],64)):Q("",!0),a0t,ot(y("input",{type:"number",class:"w42em",min:"0",max:"192","onUpdate:modelValue":t[2]||(t[2]=s=>n.userStore.storagePersonal[r.tk]=s)},null,512),[[Gt,n.userStore.storagePersonal[r.tk],void 0,{number:!0}]]),l0t,u0t,R(" - "+E(n.userStore.baseStorage)+" ",1),c0t,f0t,h0t,ot(y("input",{type:"number",class:"w42em",min:"0",max:"192","onUpdate:modelValue":t[3]||(t[3]=s=>n.userStore.storageP2W[r.tk]=s)},null,512),[[Gt,n.userStore.storageP2W[r.tk],void 0,{number:!0}]]),d0t,p0t,v0t,R(" = "+E(n.userStore.townsInfra[r.tk].wantStorage)+" ",1),g0t,n.userStore.townsInfra[r.tk].warnS?(M(),L("span",m0t,"\u2190 max possible")):Q("",!0),n.userStore.townsInfra[r.tk].errS?(M(),L("span",_0t,"\u2190 too much!")):Q("",!0),y0t,y("strong",null,E(n.userStore.townsInfra[r.tk].storage)+" found",1),R(" "+E(n.userStore.townsInfra[r.tk].storage-n.userStore.townsInfra[r.tk].wantStorage)+" ",1),b0t]),y("div",w0t,[(M(!0),L(j,null,wt(o.storageViewCount,s=>(M(),L(j,null,[s>1&&(s-1)%9==0?(M(),L("br",S0t)):Q("",!0),y("div",{class:gr(["storageCell",{markInnate:0<=s&&s<=n.userStore.baseStorage,markP2W:n.userStore.baseStorage<s&&s<=n.userStore.baseStorage+n.userStore.storageP2W[r.tk],markProvided:n.userStore.baseStorage+n.userStore.storageP2W[r.tk]<s&&s<=n.userStore.baseStorage+n.userStore.storageP2W[r.tk]+n.userStore.townsInfra[r.tk].wantStorage,markExtra:n.userStore.baseStorage+n.userStore.storageP2W[r.tk]+n.userStore.townsInfra[r.tk].wantStorage<s&&s<=n.userStore.baseStorage+n.userStore.storageP2W[r.tk]+n.userStore.townsInfra[r.tk].storage}])},[s-1>o.ingameSortedItems.length?(M(),L("span",T0t)):isNaN(o.ingameSortedItems[s-1])?(M(),L("span",k0t,E(o.ingameSortedItems[s-1]),1)):(M(),L("abbr",{key:2,title:o.itemTooltip(r.tk,o.ingameSortedItems[s-1])},[y("img",{src:o.makeIconSrc(o.ingameSortedItems[s-1]),class:"iconitem"},null,8,E0t)],8,P0t))],2)],64))),256))])])]),y("details",null,[y("summary",null,"Found cost: "+E(n.userStore.townsInfra[r.tk].cost)+" CP",1),y("pre",C0t,E(n.userStore.townsInfra[r.tk].success?o.houseCraftPickedTooltip(r.tk):"FAILED"),1)])],64)):Q("",!0)}const M0t=ce(zpt,[["render",A0t],["__scopeId","data-v-7673a343"]]);function a1(e,t){if(!e)throw new Error(t||"loader assertion failed.")}const nE=Boolean(typeof process!="object"||String(process)!=="[object process]"||process.browser),_x=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);_x&&parseFloat(_x[1]);const x0t="3.2.7";function bs(e,t){if(!e)throw new Error(t||"loaders.gl assertion failed.")}const H3=typeof process!="object"||String(process)!=="[object process]"||process.browser,L0t=typeof window<"u"&&typeof window.orientation<"u",yx=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);yx&&parseFloat(yx[1]);function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class I0t{constructor(t,r){P(this,"name",void 0),P(this,"workerThread",void 0),P(this,"isRunning",!0),P(this,"result",void 0),P(this,"_resolve",()=>{}),P(this,"_reject",()=>{}),this.name=t,this.workerThread=r,this.result=new Promise((n,i)=>{this._resolve=n,this._reject=i})}postMessage(t,r){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:r})}done(t){bs(this.isRunning),this.isRunning=!1,this._resolve(t)}error(t){bs(this.isRunning),this.isRunning=!1,this._reject(t)}}class db{}const pb=new Map;function O0t(e){bs(e.source&&!e.url||!e.source&&e.url);let t=pb.get(e.source||e.url);return t||(e.url&&(t=R0t(e.url),pb.set(e.url,t)),e.source&&(t=EB(e.source),pb.set(e.source,t))),bs(t),t}function R0t(e){if(!e.startsWith("http"))return e;const t=D0t(e);return EB(t)}function EB(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function D0t(e){return`try {
  importScripts('`.concat(e,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}function CB(e,t=!0,r){const n=r||new Set;if(e){if(bx(e))n.add(e);else if(bx(e.buffer))n.add(e.buffer);else if(!ArrayBuffer.isView(e)){if(t&&typeof e=="object")for(const i in e)CB(e[i],t,n)}}return r===void 0?Array.from(n):[]}function bx(e){return e?e instanceof ArrayBuffer||typeof MessagePort<"u"&&e instanceof MessagePort||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas:!1}const vb=()=>{};class X3{static isSupported(){return typeof Worker<"u"&&H3||typeof db!==void 0}constructor(t){P(this,"name",void 0),P(this,"source",void 0),P(this,"url",void 0),P(this,"terminated",!1),P(this,"worker",void 0),P(this,"onMessage",void 0),P(this,"onError",void 0),P(this,"_loadableURL","");const{name:r,source:n,url:i}=t;bs(n||i),this.name=r,this.source=n,this.url=i,this.onMessage=vb,this.onError=o=>console.log(o),this.worker=H3?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=vb,this.onError=vb,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(t,r){r=r||CB(t),this.worker.postMessage(t,r)}_getErrorFromErrorEvent(t){let r="Failed to load ";return r+="worker ".concat(this.name," from ").concat(this.url,". "),t.message&&(r+="".concat(t.message," in ")),t.lineno&&(r+=":".concat(t.lineno,":").concat(t.colno)),new Error(r)}_createBrowserWorker(){this._loadableURL=O0t({source:this.source,url:this.url});const t=new Worker(this._loadableURL,{name:this.name});return t.onmessage=r=>{r.data?this.onMessage(r.data):this.onError(new Error("No data received"))},t.onerror=r=>{this.onError(this._getErrorFromErrorEvent(r)),this.terminated=!0},t.onmessageerror=r=>console.error(r),t}_createNodeWorker(){let t;if(this.url){const n=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);t=new db(n,{eval:!1})}else if(this.source)t=new db(this.source,{eval:!0});else throw new Error("no worker");return t.on("message",r=>{this.onMessage(r)}),t.on("error",r=>{this.onError(r)}),t.on("exit",r=>{}),t}}class N0t{static isSupported(){return X3.isSupported()}constructor(t){P(this,"name","unnamed"),P(this,"source",void 0),P(this,"url",void 0),P(this,"maxConcurrency",1),P(this,"maxMobileConcurrency",1),P(this,"onDebug",()=>{}),P(this,"reuseWorkers",!0),P(this,"props",{}),P(this,"jobQueue",[]),P(this,"idleQueue",[]),P(this,"count",0),P(this,"isDestroyed",!1),this.source=t.source,this.url=t.url,this.setProps(t)}destroy(){this.idleQueue.forEach(t=>t.destroy()),this.isDestroyed=!0}setProps(t){this.props={...this.props,...t},t.name!==void 0&&(this.name=t.name),t.maxConcurrency!==void 0&&(this.maxConcurrency=t.maxConcurrency),t.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=t.maxMobileConcurrency),t.reuseWorkers!==void 0&&(this.reuseWorkers=t.reuseWorkers),t.onDebug!==void 0&&(this.onDebug=t.onDebug)}async startJob(t,r=(i,o,s)=>i.done(s),n=(i,o)=>i.error(o)){const i=new Promise(o=>(this.jobQueue.push({name:t,onMessage:r,onError:n,onStart:o}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const t=this._getAvailableWorker();if(!t)return;const r=this.jobQueue.shift();if(r){this.onDebug({message:"Starting job",name:r.name,workerThread:t,backlog:this.jobQueue.length});const n=new I0t(r.name,t);t.onMessage=i=>r.onMessage(n,i.type,i.payload),t.onError=i=>r.onError(n,i),r.onStart(n);try{await n.result}finally{this.returnWorkerToQueue(t)}}}returnWorkerToQueue(t){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const t="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new X3({name:t,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return L0t?this.maxMobileConcurrency:this.maxConcurrency}}const F0t={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class ls{static isSupported(){return X3.isSupported()}static getWorkerFarm(t={}){return ls._workerFarm=ls._workerFarm||new ls({}),ls._workerFarm.setProps(t),ls._workerFarm}constructor(t){P(this,"props",void 0),P(this,"workerPools",new Map),this.props={...F0t},this.setProps(t),this.workerPools=new Map}destroy(){for(const t of this.workerPools.values())t.destroy();this.workerPools=new Map}setProps(t){this.props={...this.props,...t};for(const r of this.workerPools.values())r.setProps(this._getWorkerPoolProps())}getWorkerPool(t){const{name:r,source:n,url:i}=t;let o=this.workerPools.get(r);return o||(o=new N0t({name:r,source:n,url:i}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(r,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}P(ls,"_workerFarm",void 0);const z0t="latest";function B0t(e,t={}){const r=t[e.id]||{},n="".concat(e.id,"-worker.js");let i=r.workerUrl;if(!i&&e.id==="compression"&&(i=t.workerUrl),t._workerType==="test"&&(i="modules/".concat(e.module,"/dist/").concat(n)),!i){let o=e.version;o==="latest"&&(o=z0t);const s=o?"@".concat(o):"";i="https://unpkg.com/@loaders.gl/".concat(e.module).concat(s,"/dist/").concat(n)}return bs(i),i}function $0t(e,t=x0t){bs(e,"no worker provided");const r=e.version;return!(!t||!r)}function V0t(e,t){return!ls.isSupported()||!H3&&!(t!=null&&t._nodeWorkers)?!1:e.worker&&(t==null?void 0:t.worker)}async function U0t(e,t,r,n,i){const o=e.id,s=B0t(e,r),l=ls.getWorkerFarm(r).getWorkerPool({name:o,url:s});r=JSON.parse(JSON.stringify(r)),n=JSON.parse(JSON.stringify(n||{}));const u=await l.startJob("process-on-worker",W0t.bind(null,i));return u.postMessage("process",{input:t,options:r,context:n}),await(await u.result).result}async function W0t(e,t,r,n){switch(r){case"done":t.done(n);break;case"error":t.error(new Error(n.error));break;case"process":const{id:i,input:o,options:s}=n;try{const a=await e(o,s);t.postMessage("done",{id:i,result:a})}catch(a){const l=a instanceof Error?a.message:"unknown error";t.postMessage("error",{id:i,error:l})}break;default:console.warn("parse-with-worker unknown message ".concat(r))}}function AB(e){return e&&typeof e=="object"&&e.isBuffer}function j0t(e){return AB(e)?new Uint8Array(e.buffer,e.byteOffset,e.length).slice().buffer:e}function MB(e){if(AB(e))return j0t(e);if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if(typeof e=="string"){const t=e;return new TextEncoder().encode(t).buffer}if(e&&typeof e=="object"&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")}function G0t(e,t,r){if(r=r||e.byteLength,e.byteLength<r||t.byteLength<r)return!1;const n=new Uint8Array(e),i=new Uint8Array(t);for(let o=0;o<n.length;++o)if(n[o]!==i[o])return!1;return!0}function H0t(...e){const t=e.map(o=>o instanceof ArrayBuffer?new Uint8Array(o):o),r=t.reduce((o,s)=>o+s.byteLength,0),n=new Uint8Array(r);let i=0;for(const o of t)n.set(o,i),i+=o.byteLength;return n.buffer}async function X0t(e){const t=[];for await(const r of e)t.push(r);return H0t(...t)}function Sx(){let e;if(typeof window<"u"&&window.performance)e=window.performance.now();else if(typeof process<"u"&&process.hrtime){const t=process.hrtime();e=t[0]*1e3+t[1]/1e6}else e=Date.now();return e}class Tx{constructor(t,r){P(this,"name",void 0),P(this,"type",void 0),P(this,"sampleSize",1),P(this,"time",void 0),P(this,"count",void 0),P(this,"samples",void 0),P(this,"lastTiming",void 0),P(this,"lastSampleTime",void 0),P(this,"lastSampleCount",void 0),P(this,"_count",0),P(this,"_time",0),P(this,"_samples",0),P(this,"_startTime",0),P(this,"_timerPending",!1),this.name=t,this.type=r,this.reset()}setSampleSize(t){return this.sampleSize=t,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(t){return this._count+=t,this._samples++,this._checkSampling(),this}subtractCount(t){return this._count-=t,this._samples++,this._checkSampling(),this}addTime(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=Sx(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(Sx()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class P_{constructor(t){P(this,"id",void 0),P(this,"stats",{}),this.id=t.id,this.stats={},this._initializeStats(t.stats),Object.seal(this)}get(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:t,type:r})}get size(){return Object.keys(this.stats).length}reset(){for(const t in this.stats)this.stats[t].reset();return this}forEach(t){for(const r in this.stats)t(this.stats[r])}getTable(){const t={};return this.forEach(r=>{t[r.name]={time:r.time||0,count:r.count||0,average:r.getAverageTime()||0,hz:r.getHz()||0}}),t}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(r=>this._getOrCreate(r))}_getOrCreate(t){if(!t||!t.name)return null;const{name:r,type:n}=t;return this.stats[r]||(t instanceof Tx?this.stats[r]=t:this.stats[r]=new Tx(r,n)),this.stats[r]}}const Y0t="Queued Requests",q0t="Active Requests",Z0t="Cancelled Requests",K0t="Queued Requests Ever",J0t="Active Requests Ever",Q0t={id:"request-scheduler",throttleRequests:!0,maxRequests:6};class tvt{constructor(t={}){P(this,"props",void 0),P(this,"stats",void 0),P(this,"activeRequestCount",0),P(this,"requestQueue",[]),P(this,"requestMap",new Map),P(this,"deferredUpdate",null),this.props={...Q0t,...t},this.stats=new P_({id:this.props.id}),this.stats.get(Y0t),this.stats.get(q0t),this.stats.get(Z0t),this.stats.get(K0t),this.stats.get(J0t)}scheduleRequest(t,r=()=>0){if(!this.props.throttleRequests)return Promise.resolve({done:()=>{}});if(this.requestMap.has(t))return this.requestMap.get(t);const n={handle:t,priority:0,getPriority:r},i=new Promise(o=>(n.resolve=o,n));return this.requestQueue.push(n),this.requestMap.set(t,i),this._issueNewRequests(),i}_issueRequest(t){const{handle:r,resolve:n}=t;let i=!1;const o=()=>{i||(i=!0,this.requestMap.delete(r),this.activeRequestCount--,this._issueNewRequests())};return this.activeRequestCount++,n?n({done:o}):Promise.resolve({done:o})}_issueNewRequests(){this.deferredUpdate||(this.deferredUpdate=setTimeout(()=>this._issueNewRequestsAsync(),0))}_issueNewRequestsAsync(){this.deferredUpdate=null;const t=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(t!==0){this._updateAllRequests();for(let r=0;r<t;++r){const n=this.requestQueue.shift();n&&this._issueRequest(n)}}}_updateAllRequests(){const t=this.requestQueue;for(let r=0;r<t.length;++r){const n=t[r];this._updateRequest(n)||(t.splice(r,1),this.requestMap.delete(n.handle),r--)}t.sort((r,n)=>r.priority-n.priority)}_updateRequest(t){return t.priority=t.getPriority(t.handle),t.priority<0?(t.resolve(null),!1):!0}}let evt="";const kx={};function rvt(e){for(const t in kx)if(e.startsWith(t)){const r=kx[t];e=e.replace(t,r)}return!e.startsWith("http://")&&!e.startsWith("https://")&&(e="".concat(evt).concat(e)),e}function nvt(e){const t=e&&e.lastIndexOf("/");return t>=0?e.substr(t+1):""}const ivt=e=>typeof e=="boolean",Bd=e=>typeof e=="function",qp=e=>e!==null&&typeof e=="object",Px=e=>qp(e)&&e.constructor==={}.constructor,ovt=e=>e&&typeof e[Symbol.iterator]=="function",svt=e=>e&&typeof e[Symbol.asyncIterator]=="function",Df=e=>typeof Response<"u"&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json,Nf=e=>typeof Blob<"u"&&e instanceof Blob,avt=e=>e&&typeof e=="object"&&e.isBuffer,lvt=e=>typeof ReadableStream<"u"&&e instanceof ReadableStream||qp(e)&&Bd(e.tee)&&Bd(e.cancel)&&Bd(e.getReader),uvt=e=>qp(e)&&Bd(e.read)&&Bd(e.pipe)&&ivt(e.readable),xB=e=>lvt(e)||uvt(e),cvt=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,fvt=/^([-\w.]+\/[-\w.+]+)/;function hvt(e){const t=fvt.exec(e);return t?t[1]:e}function Ex(e){const t=cvt.exec(e);return t?t[1]:""}const dvt=/\?.*/;function E_(e){if(Df(e)){const t=gb(e.url||""),r=e.headers.get("content-type")||"";return{url:t,type:hvt(r)||Ex(t)}}return Nf(e)?{url:gb(e.name||""),type:e.type||""}:typeof e=="string"?{url:gb(e),type:Ex(e)}:{url:"",type:""}}function pvt(e){return Df(e)?e.headers["content-length"]||-1:Nf(e)?e.size:typeof e=="string"?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}function gb(e){return e.replace(dvt,"")}async function LB(e){if(Df(e))return e;const t={},r=pvt(e);r>=0&&(t["content-length"]=String(r));const{url:n,type:i}=E_(e);i&&(t["content-type"]=i);const o=await mvt(e);o&&(t["x-first-bytes"]=o),typeof e=="string"&&(e=new TextEncoder().encode(e));const s=new Response(e,{headers:t});return Object.defineProperty(s,"url",{value:n}),s}async function vvt(e){if(!e.ok){const t=await gvt(e);throw new Error(t)}}async function gvt(e){let t="Failed to fetch resource ".concat(e.url," (").concat(e.status,"): ");try{const r=e.headers.get("Content-Type");let n=e.statusText;r.includes("application/json")&&(n+=" ".concat(await e.text())),t+=n,t=t.length>60?"".concat(t.slice(0,60),"..."):t}catch{}return t}async function mvt(e){if(typeof e=="string")return"data:,".concat(e.slice(0,5));if(e instanceof Blob){const r=e.slice(0,5);return await new Promise(n=>{const i=new FileReader;i.onload=o=>{var s;return n(o==null||(s=o.target)===null||s===void 0?void 0:s.result)},i.readAsDataURL(r)})}if(e instanceof ArrayBuffer){const r=e.slice(0,5),n=_vt(r);return"data:base64,".concat(n)}return null}function _vt(e){let t="";const r=new Uint8Array(e);for(let n=0;n<r.byteLength;n++)t+=String.fromCharCode(r[n]);return btoa(t)}async function Cx(e,t){if(typeof e=="string"){e=rvt(e);let r=t;return t!=null&&t.fetch&&typeof(t==null?void 0:t.fetch)!="function"&&(r=t.fetch),await fetch(e,r)}return await LB(e)}function IB(e){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&Boolean(process.versions.electron))return!0;const t=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,r=e||t;return!!(r&&r.indexOf("Electron")>=0)}function Ls(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||IB()}const im={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:typeof process=="object"&&process},wv=im.window||im.self||im.global,xh=im.process||{},OB=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";Ls();const mb=globalThis;function RB(e){if(!e&&!Ls())return"Node";if(IB(e))return"Electron";const r=e||(typeof navigator<"u"?navigator:{}).userAgent||"";if(r.indexOf("Edge")>-1)return"Edge";const n=r.indexOf("MSIE ")!==-1,i=r.indexOf("Trident/")!==-1;return n||i?"IE":mb.chrome?"Chrome":mb.safari?"Safari":mb.mozInnerScreenX?"Firefox":"Unknown"}function yvt(e){try{const t=window[e],r="__storage_test__";return t.setItem(r,r),t.removeItem(r),t}catch{return null}}class bvt{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";P(this,"storage",void 0),P(this,"id",void 0),P(this,"config",{}),this.storage=yvt(n),this.id=t,this.config={},Object.assign(this.config,r),this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){return this.config={},this.updateConfiguration(t)}updateConfiguration(t){if(Object.assign(this.config,t),this.storage){const r=JSON.stringify(this.config);this.storage.setItem(this.id,r)}return this}_loadConfiguration(){let t={};if(this.storage){const r=this.storage.getItem(this.id);t=r?JSON.parse(r):{}}return Object.assign(this.config,t),this}}function wvt(e){let t;return e<10?t="".concat(e.toFixed(2),"ms"):e<100?t="".concat(e.toFixed(1),"ms"):e<1e3?t="".concat(e.toFixed(0),"ms"):t="".concat((e/1e3).toFixed(2),"s"),t}function Svt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const r=Math.max(t-e.length,0);return"".concat(" ".repeat(r)).concat(e)}function _b(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=e.src.replace(/\(/g,"%28").replace(/\)/g,"%29");e.width>n&&(r=Math.min(r,n/e.width));const o=e.width*r,s=e.height*r,a=["font-size:1px;","padding:".concat(Math.floor(s/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(s,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(s,"px;"),"color:transparent;"].join("");return["".concat(t," %c+"),a]}let l1;(function(e){e[e.BLACK=30]="BLACK",e[e.RED=31]="RED",e[e.GREEN=32]="GREEN",e[e.YELLOW=33]="YELLOW",e[e.BLUE=34]="BLUE",e[e.MAGENTA=35]="MAGENTA",e[e.CYAN=36]="CYAN",e[e.WHITE=37]="WHITE",e[e.BRIGHT_BLACK=90]="BRIGHT_BLACK",e[e.BRIGHT_RED=91]="BRIGHT_RED",e[e.BRIGHT_GREEN=92]="BRIGHT_GREEN",e[e.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",e[e.BRIGHT_BLUE=94]="BRIGHT_BLUE",e[e.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",e[e.BRIGHT_CYAN=96]="BRIGHT_CYAN",e[e.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(l1||(l1={}));function Ax(e){return typeof e=="string"?l1[e.toUpperCase()]||l1.WHITE:e}function Tvt(e,t,r){return!Ls&&typeof e=="string"&&(t&&(t=Ax(t),e="\x1B[".concat(t,"m").concat(e,"\x1B[39m")),r&&(t=Ax(r),e="\x1B[".concat(r+10,"m").concat(e,"\x1B[49m"))),e}function kvt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const r=Object.getPrototypeOf(e),n=Object.getOwnPropertyNames(r);for(const i of n)typeof e[i]=="function"&&(t.find(o=>i===o)||(e[i]=e[i].bind(e)))}function u1(e,t){if(!e)throw new Error(t||"Assertion failed")}function ac(){let e;if(Ls&&"performance"in wv){var t,r;e=wv==null||(t=wv.performance)===null||t===void 0||(r=t.now)===null||r===void 0?void 0:r.call(t)}else if("hrtime"in xh){var n;const i=xh==null||(n=xh.hrtime)===null||n===void 0?void 0:n.call(xh);e=i[0]*1e3+i[1]/1e6}else e=Date.now();return e}const lc={debug:Ls&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Pvt={enabled:!0,level:0};function Qn(){}const Mx={},xx={once:!0};class Zp{constructor(){let{id:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};P(this,"id",void 0),P(this,"VERSION",OB),P(this,"_startTs",ac()),P(this,"_deltaTs",ac()),P(this,"_storage",void 0),P(this,"userData",{}),P(this,"LOG_THROTTLE_TIMEOUT",0),this.id=t,this._storage=new bvt("__probe-".concat(this.id,"__"),Pvt),this.userData={},this.timeStamp("".concat(this.id," started")),kvt(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((ac()-this._startTs).toPrecision(10))}getDelta(){return Number((ac()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.updateConfiguration({enabled:t}),this}setLevel(t){return this._storage.updateConfiguration({level:t}),this}get(t){return this._storage.config[t]}set(t,r){this._storage.updateConfiguration({[t]:r})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(t,r){u1(t,r)}warn(t){return this._getLogFunction(0,t,lc.warn,arguments,xx)}error(t){return this._getLogFunction(0,t,lc.error,arguments)}deprecated(t,r){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(r,"` instead"))}removed(t,r){return this.error("`".concat(t,"` has been removed. Use `").concat(r,"` instead"))}probe(t,r){return this._getLogFunction(t,r,lc.log,arguments,{time:!0,once:!0})}log(t,r){return this._getLogFunction(t,r,lc.debug,arguments)}info(t,r){return this._getLogFunction(t,r,console.info,arguments)}once(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];return this._getLogFunction(t,r,lc.debug||lc.info,arguments,xx)}table(t,r,n){return r?this._getLogFunction(t,r,console.table||Qn,n&&[n],{tag:Mvt(r)}):Qn}image(t){let{logLevel:r,priority:n,image:i,message:o="",scale:s=1}=t;return this._shouldLog(r||n)?Ls?Avt({image:i,message:o,scale:s}):Cvt({image:i,message:o,scale:s}):Qn}time(t,r){return this._getLogFunction(t,r,console.time?console.time:console.info)}timeEnd(t,r){return this._getLogFunction(t,r,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,r){return this._getLogFunction(t,r,console.timeStamp||Qn)}group(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=Lx({logLevel:t,message:r,opts:n}),{collapsed:o}=n;return i.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(t,r,Object.assign({},n,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||Qn)}withGroup(t,r,n){this.group(t,r)();try{n()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=DB(t)}_getLogFunction(t,r,n,i,o){if(this._shouldLog(t)){o=Lx({logLevel:t,message:r,args:i,opts:o}),n=n||o.method,u1(n),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=ac();const s=o.tag||o.message;if(o.once)if(!Mx[s])Mx[s]=ac();else return Qn;return r=Evt(this.id,o.message,o),n.bind(console,r,...o.args)}return Qn}}P(Zp,"VERSION",OB);function DB(e){if(!e)return 0;let t;switch(typeof e){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return u1(Number.isFinite(t)&&t>=0),t}function Lx(e){const{logLevel:t,message:r}=e;e.logLevel=DB(t);const n=e.args?Array.from(e.args):[];for(;n.length&&n.shift()!==r;);switch(typeof t){case"string":case"function":r!==void 0&&n.unshift(r),e.message=t;break;case"object":Object.assign(e,t);break}typeof e.message=="function"&&(e.message=e.message());const i=typeof e.message;return u1(i==="string"||i==="object"),Object.assign(e,{args:n},e.opts)}function Evt(e,t,r){if(typeof t=="string"){const n=r.time?Svt(wvt(r.total)):"";t=r.time?"".concat(e,": ").concat(n,"  ").concat(t):"".concat(e,": ").concat(t),t=Tvt(t,r.color,r.background)}return t}function Cvt(e){let{image:t,message:r="",scale:n=1}=e;return(void 0)({image:t,message:r,scale:n}),Qn}function Avt(e){let{image:t,message:r="",scale:n=1}=e;if(typeof t=="string"){const o=new Image;return o.onload=()=>{const s=_b(o,r,n);console.log(...s)},o.src=t,Qn}const i=t.nodeName||"";if(i.toLowerCase()==="img")return console.log(..._b(t,r,n)),Qn;if(i.toLowerCase()==="canvas"){const o=new Image;return o.onload=()=>console.log(..._b(o,r,n)),o.src=t.toDataURL(),Qn}return Qn}function Mvt(e){for(const t in e)for(const r in e[t])return r||"untitled";return"empty"}const Ix=new Zp({id:"loaders.gl"});class xvt{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class Lvt{constructor(){P(this,"console",void 0),this.console=console}log(...t){return this.console.log.bind(this.console,...t)}info(...t){return this.console.info.bind(this.console,...t)}warn(...t){return this.console.warn.bind(this.console,...t)}error(...t){return this.console.error.bind(this.console,...t)}}const NB={fetch:null,mimeType:void 0,nothrow:!1,log:new Lvt,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:nE,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},Ivt={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function FB(){globalThis.loaders=globalThis.loaders||{};const{loaders:e}=globalThis;return e._state=e._state||{},e._state}const zB=()=>{const e=FB();return e.globalOptions=e.globalOptions||{...NB},e.globalOptions};function Ovt(e,t,r,n){return r=r||[],r=Array.isArray(r)?r:[r],Rvt(e,r),Nvt(t,e,n)}function BB(e,t){const r=zB(),n=e||r;return typeof n.fetch=="function"?n.fetch:qp(n.fetch)?i=>Cx(i,n):t!=null&&t.fetch?t==null?void 0:t.fetch:Cx}function Rvt(e,t){Ox(e,null,NB,Ivt,t);for(const r of t){const n=e&&e[r.id]||{},i=r.options&&r.options[r.id]||{},o=r.deprecatedOptions&&r.deprecatedOptions[r.id]||{};Ox(n,r.id,i,o,t)}}function Ox(e,t,r,n,i){const o=t||"Top level",s=t?"".concat(t,"."):"";for(const a in e){const l=!t&&qp(e[a]),u=a==="baseUri"&&!t,c=a==="workerUrl"&&t;if(!(a in r)&&!u&&!c){if(a in n)Ix.warn("".concat(o," loader option '").concat(s).concat(a,"' no longer supported, use '").concat(n[a],"'"))();else if(!l){const f=Dvt(a,i);Ix.warn("".concat(o," loader option '").concat(s).concat(a,"' not recognized. ").concat(f))()}}}}function Dvt(e,t){const r=e.toLowerCase();let n="";for(const i of t)for(const o in i.options){if(e===o)return"Did you mean '".concat(i.id,".").concat(o,"'?");const s=o.toLowerCase();(r.startsWith(s)||s.startsWith(r))&&(n=n||"Did you mean '".concat(i.id,".").concat(o,"'?"))}return n}function Nvt(e,t,r){const i={...e.options||{}};return Fvt(i,r),i.log===null&&(i.log=new xvt),Rx(i,zB()),Rx(i,t),i}function Rx(e,t){for(const r in t)if(r in t){const n=t[r];Px(n)&&Px(e[r])?e[r]={...e[r],...t[r]}:e[r]=t[r]}}function Fvt(e,t){t&&!("baseUri"in e)&&(e.baseUri=t)}function iE(e){var t;return e?(Array.isArray(e)&&(e=e[0]),Array.isArray((t=e)===null||t===void 0?void 0:t.extensions)):!1}function oE(e){var t,r;a1(e,"null loader"),a1(iE(e),"invalid loader");let n;return Array.isArray(e)&&(n=e[1],e=e[0],e={...e,options:{...e.options,...n}}),((t=e)!==null&&t!==void 0&&t.parseTextSync||(r=e)!==null&&r!==void 0&&r.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}const $B=()=>{const e=FB();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};function zvt(e){const t=$B();e=Array.isArray(e)?e:[e];for(const r of e){const n=oE(r);t.find(i=>n===i)||t.unshift(n)}}function Bvt(){return $B()}const $vt=new Zp({id:"loaders.gl"}),Vvt=/\.([^.]+)$/;async function Uvt(e,t=[],r,n){if(!VB(e))return null;let i=Dx(e,t,{...r,nothrow:!0},n);if(i)return i;if(Nf(e)&&(e=await e.slice(0,10).arrayBuffer(),i=Dx(e,t,r,n)),!i&&!(r!=null&&r.nothrow))throw new Error(UB(e));return i}function Dx(e,t=[],r,n){if(!VB(e))return null;if(t&&!Array.isArray(t))return oE(t);let i=[];t&&(i=i.concat(t)),r!=null&&r.ignoreRegisteredLoaders||i.push(...Bvt()),jvt(i);const o=Wvt(e,i,r,n);if(!o&&!(r!=null&&r.nothrow))throw new Error(UB(e));return o}function Wvt(e,t,r,n){const{url:i,type:o}=E_(e),s=i||(n==null?void 0:n.url);let a=null,l="";if(r!=null&&r.mimeType&&(a=yb(t,r==null?void 0:r.mimeType),l="match forced by supplied MIME type ".concat(r==null?void 0:r.mimeType)),a=a||Gvt(t,s),l=l||(a?"matched url ".concat(s):""),a=a||yb(t,o),l=l||(a?"matched MIME type ".concat(o):""),a=a||Xvt(t,e),l=l||(a?"matched initial data ".concat(WB(e)):""),a=a||yb(t,r==null?void 0:r.fallbackMimeType),l=l||(a?"matched fallback MIME type ".concat(o):""),l){var u;$vt.log(1,"selectLoader selected ".concat((u=a)===null||u===void 0?void 0:u.name,": ").concat(l,"."))}return a}function VB(e){return!(e instanceof Response&&e.status===204)}function UB(e){const{url:t,type:r}=E_(e);let n="No valid loader found (";n+=t?"".concat(nvt(t),", "):"no url provided, ",n+="MIME type: ".concat(r?'"'.concat(r,'"'):"not provided",", ");const i=e?WB(e):"";return n+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",n+=")",n}function jvt(e){for(const t of e)oE(t)}function Gvt(e,t){const r=t&&Vvt.exec(t),n=r&&r[1];return n?Hvt(e,n):null}function Hvt(e,t){t=t.toLowerCase();for(const r of e)for(const n of r.extensions)if(n.toLowerCase()===t)return r;return null}function yb(e,t){for(const r of e)if(r.mimeTypes&&r.mimeTypes.includes(t)||t==="application/x.".concat(r.id))return r;return null}function Xvt(e,t){if(!t)return null;for(const r of e)if(typeof t=="string"){if(Yvt(t,r))return r}else if(ArrayBuffer.isView(t)){if(Nx(t.buffer,t.byteOffset,r))return r}else if(t instanceof ArrayBuffer&&Nx(t,0,r))return r;return null}function Yvt(e,t){return t.testText?t.testText(e):(Array.isArray(t.tests)?t.tests:[t.tests]).some(n=>e.startsWith(n))}function Nx(e,t,r){return(Array.isArray(r.tests)?r.tests:[r.tests]).some(i=>qvt(e,t,r,i))}function qvt(e,t,r,n){if(n instanceof ArrayBuffer)return G0t(n,e,n.byteLength);switch(typeof n){case"function":return n(e,r);case"string":const i=Y3(e,t,n.length);return n===i;default:return!1}}function WB(e,t=5){return typeof e=="string"?e.slice(0,t):ArrayBuffer.isView(e)?Y3(e.buffer,e.byteOffset,t):e instanceof ArrayBuffer?Y3(e,0,t):""}function Y3(e,t,r){if(e.byteLength<t+r)return"";const n=new DataView(e);let i="";for(let o=0;o<r;o++)i+=String.fromCharCode(n.getUint8(t+o));return i}const Zvt=256*1024;function*Kvt(e,t){const r=(t==null?void 0:t.chunkSize)||Zvt;let n=0;const i=new TextEncoder;for(;n<e.length;){const o=Math.min(e.length-n,r),s=e.slice(n,n+o);n+=o,yield i.encode(s)}}const Jvt=256*1024;function*Qvt(e,t={}){const{chunkSize:r=Jvt}=t;let n=0;for(;n<e.byteLength;){const i=Math.min(e.byteLength-n,r),o=new ArrayBuffer(i),s=new Uint8Array(e,n,i);new Uint8Array(o).set(s),n+=i,yield o}}const tgt=1024*1024;async function*egt(e,t){const r=(t==null?void 0:t.chunkSize)||tgt;let n=0;for(;n<e.size;){const i=n+r,o=await e.slice(n,i).arrayBuffer();n=i,yield o}}function Fx(e,t){return nE?rgt(e,t):ngt(e)}async function*rgt(e,t){const r=e.getReader();let n;try{for(;;){const i=n||r.read();t!=null&&t._streamReadAhead&&(n=r.read());const{done:o,value:s}=await i;if(o)return;yield MB(s)}}catch{r.releaseLock()}}async function*ngt(e,t){for await(const r of e)yield MB(r)}function igt(e,t){if(typeof e=="string")return Kvt(e,t);if(e instanceof ArrayBuffer)return Qvt(e,t);if(Nf(e))return egt(e,t);if(xB(e))return Fx(e,t);if(Df(e))return Fx(e.body,t);throw new Error("makeIterator")}const jB="Cannot convert supplied data type";function ogt(e,t,r){if(t.text&&typeof e=="string")return e;if(avt(e)&&(e=e.buffer),e instanceof ArrayBuffer){const n=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(e)){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);let n=e.buffer;const i=e.byteLength||e.length;return(e.byteOffset!==0||i!==n.byteLength)&&(n=n.slice(e.byteOffset,e.byteOffset+i)),n}throw new Error(jB)}async function sgt(e,t,r){const n=e instanceof ArrayBuffer||ArrayBuffer.isView(e);if(typeof e=="string"||n)return ogt(e,t);if(Nf(e)&&(e=await LB(e)),Df(e)){const i=e;return await vvt(i),t.binary?await i.arrayBuffer():await i.text()}if(xB(e)&&(e=igt(e,r)),ovt(e)||svt(e))return X0t(e);throw new Error(jB)}function agt(e,t,r=null){if(r)return r;const n={fetch:BB(t,e),...e};return Array.isArray(n.loaders)||(n.loaders=null),n}function lgt(e,t){if(!t&&e&&!Array.isArray(e))return e;let r;if(e&&(r=Array.isArray(e)?e:[e]),t&&t.loaders){const n=Array.isArray(t.loaders)?t.loaders:[t.loaders];r=r?[...r,...n]:n}return r&&r.length?r:null}async function sE(e,t,r,n){bs(!n||typeof n=="object"),t&&!Array.isArray(t)&&!iE(t)&&(n=void 0,r=t,t=void 0),e=await e,r=r||{};const{url:i}=E_(e),s=lgt(t,n),a=await Uvt(e,s,r);return a?(r=Ovt(r,a,s,i),n=agt({url:i,parse:sE,loaders:s},r,n),await ugt(a,e,r,n)):null}async function ugt(e,t,r,n){if($0t(e),Df(t)){const i=t,{ok:o,redirected:s,status:a,statusText:l,type:u,url:c}=i,f=Object.fromEntries(i.headers.entries());n.response={headers:f,ok:o,redirected:s,status:a,statusText:l,type:u,url:c}}if(t=await sgt(t,e,r),e.parseTextSync&&typeof t=="string")return r.dataType="text",e.parseTextSync(t,r,n,e);if(V0t(e,r))return await U0t(e,t,r,n,sE);if(e.parseText&&typeof t=="string")return await e.parseText(t,r,n,e);if(e.parse)return await e.parse(t,r,n,e);throw bs(!e.parseSync),new Error("".concat(e.id," loader - no parser found and worker is disabled"))}async function c1(e,t,r,n){!Array.isArray(t)&&!iE(t)&&(r=t,t=void 0);const i=BB(r);let o=e;return typeof e=="string"&&(o=await i(e)),Nf(e)&&(o=await i(e)),await sE(o,t,r)}const cgt="3.2.7",{_parseImageNode:fgt}=globalThis,q3=typeof Image<"u",Z3=typeof ImageBitmap<"u",hgt=Boolean(fgt),K3=nE?!0:hgt;function dgt(e){switch(e){case"auto":return Z3||q3||K3;case"imagebitmap":return Z3;case"image":return q3;case"data":return K3;default:throw new Error("@loaders.gl/images: image ".concat(e," not supported in this environment"))}}function pgt(){if(Z3)return"imagebitmap";if(q3)return"image";if(K3)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function vgt(e){const t=mgt(e);if(!t)throw new Error("Not an image");return t}function ggt(e){switch(vgt(e)){case"data":return e;case"image":case"imagebitmap":const t=document.createElement("canvas"),r=t.getContext("2d");if(!r)throw new Error("getImageData");return t.width=e.width,t.height=e.height,r.drawImage(e,0,0),r.getImageData(0,0,e.width,e.height);default:throw new Error("getImageData")}}function mgt(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&e instanceof Image?"image":e&&typeof e=="object"&&e.data&&e.width&&e.height?"data":null}const _gt=/^data:image\/svg\+xml/,ygt=/\.svg((\?|#).*)?$/;function aE(e){return e&&(_gt.test(e)||ygt.test(e))}function bgt(e,t){if(aE(t)){let n=new TextDecoder().decode(e);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(n=unescape(encodeURIComponent(n)))}catch(o){throw new Error(o.message)}return"data:image/svg+xml;base64,".concat(btoa(n))}return GB(e,t)}function GB(e,t){if(aE(t))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(e)])}async function HB(e,t,r){const n=bgt(e,r),i=self.URL||self.webkitURL,o=typeof n!="string"&&i.createObjectURL(n);try{return await wgt(o||n,t)}finally{o&&i.revokeObjectURL(o)}}async function wgt(e,t){const r=new Image;return r.src=e,t.image&&t.image.decode&&r.decode?(await r.decode(),r):await new Promise((n,i)=>{try{r.onload=()=>n(r),r.onerror=o=>i(new Error("Could not load image ".concat(e,": ").concat(o)))}catch(o){i(o)}})}const Sgt={};let zx=!0;async function Tgt(e,t,r){let n;aE(r)?n=await HB(e,t,r):n=GB(e,r);const i=t&&t.imagebitmap;return await kgt(n,i)}async function kgt(e,t=null){if((Pgt(t)||!zx)&&(t=null),t)try{return await createImageBitmap(e,t)}catch(r){console.warn(r),zx=!1}return await createImageBitmap(e)}function Pgt(e){for(const t in e||Sgt)return!1;return!0}const So=!1,$d=!0;function XB(e){const t=Kp(e);return Egt(t)||Mgt(t)||Cgt(t)||Agt(t)}function Egt(e){const t=Kp(e);return t.byteLength>=24&&t.getUint32(0,So)===2303741511?{mimeType:"image/png",width:t.getUint32(16,So),height:t.getUint32(20,So)}:null}function Cgt(e){const t=Kp(e);return t.byteLength>=10&&t.getUint32(0,So)===1195984440?{mimeType:"image/gif",width:t.getUint16(6,$d),height:t.getUint16(8,$d)}:null}function Agt(e){const t=Kp(e);return t.byteLength>=14&&t.getUint16(0,So)===16973&&t.getUint32(2,$d)===t.byteLength?{mimeType:"image/bmp",width:t.getUint32(18,$d),height:t.getUint32(22,$d)}:null}function Mgt(e){const t=Kp(e);if(!(t.byteLength>=3&&t.getUint16(0,So)===65496&&t.getUint8(2)===255))return null;const{tableMarkers:n,sofMarkers:i}=xgt();let o=2;for(;o+9<t.byteLength;){const s=t.getUint16(o,So);if(i.has(s))return{mimeType:"image/jpeg",height:t.getUint16(o+5,So),width:t.getUint16(o+7,So)};if(!n.has(s))return null;o+=2,o+=t.getUint16(o,So)}return null}function xgt(){const e=new Set([65499,65476,65484,65501,65534]);for(let r=65504;r<65520;++r)e.add(r);return{tableMarkers:e,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function Kp(e){if(e instanceof DataView)return e;if(ArrayBuffer.isView(e))return new DataView(e.buffer);if(e instanceof ArrayBuffer)return new DataView(e);throw new Error("toDataView")}async function Lgt(e,t){const{mimeType:r}=XB(e)||{},n=globalThis._parseImageNode;return a1(n),await n(e,r)}async function Igt(e,t,r){t=t||{};const i=(t.image||{}).type||"auto",{url:o}=r||{},s=Ogt(i);let a;switch(s){case"imagebitmap":a=await Tgt(e,t,o);break;case"image":a=await HB(e,t,o);break;case"data":a=await Lgt(e);break;default:a1(!1)}return i==="data"&&(a=ggt(a)),a}function Ogt(e){switch(e){case"auto":case"data":return pgt();default:return dgt(e),e}}const Rgt=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],Dgt=["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],Ngt={image:{type:"auto",decode:!0}},YB={id:"image",module:"images",name:"Images",version:cgt,mimeTypes:Dgt,extensions:Rgt,parse:Igt,tests:[e=>Boolean(XB(new DataView(e)))],options:Ngt},Yt=new Zp({id:"deck"});let J3={};function Fgt(e){J3=e}function Ur(e,t,r,n){Yt.level>0&&J3[e]&&J3[e].call(null,t,r,n)}function zgt(e){const t=e[0],r=e[e.length-1];return t==="{"&&r==="}"||t==="["&&r==="]"}const Bgt={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:zgt,parseTextSync:JSON.parse},Vd="8.8.8",om=globalThis.deck&&globalThis.deck.VERSION;if(om&&om!==Vd)throw new Error("deck.gl - multiple versions detected: ".concat(om," vs ").concat(Vd));om||(Yt.log(1,"deck.gl ".concat(Vd))(),globalThis.deck={...globalThis.deck,VERSION:Vd,version:Vd,log:Yt,_registerLoggers:Fgt},zvt([Bgt,[YB,{imagebitmap:{premultiplyAlpha:"none"}}]]));const $gt=globalThis.deck,Ot=new Zp({id:"luma.gl"});function rn(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}const Vgt="Invalid WebGLRenderingContext",Ugt="Requires WebGL2";function C_(e){return typeof WebGLRenderingContext<"u"&&e instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:Boolean(e&&Number.isFinite(e._version))}function re(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:Boolean(e&&e._version===2)}function Wgt(e){return re(e)?e:null}function A_(e){return rn(C_(e),Vgt),e}function jr(e){return rn(re(e),Ugt),e}const hd={};function jgt(e){globalThis.console&&globalThis.console.error&&globalThis.console.error(e)}function Ggt(e){globalThis.console&&globalThis.console.log&&globalThis.console.log(e)}function Hgt(e,t){hd[e]=!0,t!==void 0&&jgt(t)}function Xgt(e){const t=e.getError;e.getError=function(){let n;do n=t.apply(e),n!==0&&(hd[n]=!0);while(n!==0);for(n in hd)if(hd[n])return delete hd[n],parseInt(n,10);return 0}}const Jp=function e(t){const r=t.gl;this.ext=t,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(t.maxVertexAttribs);for(let n=0;n<this.attribs.length;n++){const i=new e.VertexAttrib(r);this.attribs[n]=i}this.maxAttrib=0};Jp.VertexAttrib=function(t){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};Jp.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const Iu=function(t){const r=this;this.gl=t,Xgt(t);const n=this.original={getParameter:t.getParameter,enableVertexAttribArray:t.enableVertexAttribArray,disableVertexAttribArray:t.disableVertexAttribArray,bindBuffer:t.bindBuffer,getVertexAttrib:t.getVertexAttrib,vertexAttribPointer:t.vertexAttribPointer};t.getParameter=function(o){return o===r.VERTEX_ARRAY_BINDING_OES?r.currentVertexArrayObject===r.defaultVertexArrayObject?null:r.currentVertexArrayObject:n.getParameter.apply(this,arguments)},t.enableVertexAttribArray=function(o){const s=r.currentVertexArrayObject;s.maxAttrib=Math.max(s.maxAttrib,o);const a=s.attribs[o];return a.enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},t.disableVertexAttribArray=function(o){const s=r.currentVertexArrayObject;s.maxAttrib=Math.max(s.maxAttrib,o);const a=s.attribs[o];return a.enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},t.bindBuffer=function(o,s){switch(o){case 34962:r.currentArrayBuffer=s;break;case 34963:r.currentVertexArrayObject.elementArrayBuffer=s;break}return n.bindBuffer.apply(this,arguments)},t.getVertexAttrib=function(o,s){const l=r.currentVertexArrayObject.attribs[o];switch(s){case 34975:return l.buffer;case 34338:return l.enabled;case 34339:return l.size;case 34340:return l.stride;case 34341:return l.type;case 34922:return l.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},t.vertexAttribPointer=function(o,s,a,l,u,c){const f=r.currentVertexArrayObject;f.maxAttrib=Math.max(f.maxAttrib,o);const h=f.attribs[o];return h.buffer=r.currentArrayBuffer,h.size=s,h.type=a,h.normalized=l,h.stride=u,h.offset=c,h.recache(),n.vertexAttribPointer.apply(this,arguments)},t.instrumentExtension&&t.instrumentExtension(this,"OES_vertex_array_object"),t.canvas&&t.canvas.addEventListener("webglcontextrestored",()=>{Ggt("OESVertexArrayObject emulation library context restored"),r.reset_()},!0),this.reset_()};Iu.prototype.VERTEX_ARRAY_BINDING_OES=34229;Iu.prototype.reset_=function(){if(this.vertexArrayObjects!==void 0)for(let n=0;n<this.vertexArrayObjects.length;++n)this.vertexArrayObjects.isAlive=!1;const r=this.gl;this.maxVertexAttribs=r.getParameter(34921),this.defaultVertexArrayObject=new Jp(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};Iu.prototype.createVertexArrayOES=function(){const t=new Jp(this);return this.vertexArrayObjects.push(t),t};Iu.prototype.deleteVertexArrayOES=function(t){t.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(t),1),this.currentVertexArrayObject===t&&this.bindVertexArrayOES(null)};Iu.prototype.isVertexArrayOES=function(t){return!!(t&&t instanceof Jp&&t.hasBeenBound&&t.ext===this)};Iu.prototype.bindVertexArrayOES=function(t){const r=this.gl;if(t&&!t.isAlive){Hgt(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}const n=this.original,i=this.currentVertexArrayObject;this.currentVertexArrayObject=t||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const o=this.currentVertexArrayObject;if(i===o)return;(!i||o.elementArrayBuffer!==i.elementArrayBuffer)&&n.bindBuffer.call(r,34963,o.elementArrayBuffer);let s=this.currentArrayBuffer;const a=Math.max(i?i.maxAttrib:0,o.maxAttrib);for(let l=0;l<=a;l++){const u=o.attribs[l],c=i?i.attribs[l]:null;if((!i||u.enabled!==c.enabled)&&(u.enabled?n.enableVertexAttribArray.call(r,l):n.disableVertexAttribArray.call(r,l)),u.enabled){let f=!1;(!i||u.buffer!==c.buffer)&&(s!==u.buffer&&(n.bindBuffer.call(r,34962,u.buffer),s=u.buffer),f=!0),(f||u.cached!==c.cached)&&n.vertexAttribPointer.call(r,l,u.size,u.type,u.normalized,u.stride,u.offset)}}this.currentArrayBuffer!==s&&n.bindBuffer.call(r,34962,this.currentArrayBuffer)};function Ygt(e){if(typeof e.createVertexArray=="function")return;const t=e.getSupportedExtensions;e.getSupportedExtensions=function(){const i=t.call(this)||[];return i.indexOf("OES_vertex_array_object")<0&&i.push("OES_vertex_array_object"),i};const r=e.getExtension;e.getExtension=function(i){const o=r.call(this,i);return o||(i!=="OES_vertex_array_object"?null:(e.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Iu(this)),this.__OESVertexArrayObject))}}const Bx="OES_element_index",$x="WEBGL_draw_buffers",qgt="EXT_disjoint_timer_query",Zgt="EXT_disjoint_timer_query_webgl2",Kgt="EXT_texture_filter_anisotropic",Vx="WEBGL_debug_renderer_info",Jgt=35723,Qgt=4352,tmt=36795,emt=34047,rmt=37445,nmt=37446,De=e=>re(e)?void 0:0,imt={[3074]:e=>re(e)?void 0:36064,[Jgt]:e=>re(e)?void 0:Qgt,[35977]:De,[32937]:De,[tmt]:(e,t)=>{const r=re(e)?e.getExtension(Zgt):e.getExtension(qgt);return r&&r.GPU_DISJOINT_EXT?t(r.GPU_DISJOINT_EXT):0},[rmt]:(e,t)=>{const r=e.getExtension(Vx);return t(r&&r.UNMASKED_VENDOR_WEBGL||7936)},[nmt]:(e,t)=>{const r=e.getExtension(Vx);return t(r&&r.UNMASKED_RENDERER_WEBGL||7937)},[emt]:(e,t)=>{const r=e.luma.extensions[Kgt];return r?t(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},[32883]:De,[35071]:De,[37447]:De,[36063]:(e,t)=>{if(!re(e)){const r=e.getExtension($x);return r?t(r.MAX_COLOR_ATTACHMENTS_WEBGL):0}},[35379]:De,[35374]:De,[35377]:De,[34852]:e=>{if(!re(e)){const t=e.getExtension($x);return t?t.MAX_DRAW_BUFFERS_WEBGL:0}},[36203]:e=>e.getExtension(Bx)?2147483647:65535,[33001]:e=>e.getExtension(Bx)?16777216:65535,[33e3]:e=>16777216,[37157]:De,[35373]:De,[35657]:De,[36183]:De,[37137]:De,[34045]:De,[35978]:De,[35979]:De,[35968]:De,[35376]:De,[35375]:De,[35659]:De,[37154]:De,[35371]:De,[35658]:De,[35076]:De,[35077]:De,[35380]:De};function omt(e,t,r){const n=imt[r],i=typeof n=="function"?n(e,t,r):n;return i!==void 0?i:t(r)}const smt="OES_vertex_array_object",qB="ANGLE_instanced_arrays",amt="WEBGL_draw_buffers",lmt="EXT_disjoint_timer_query",umt="EXT_texture_filter_anisotropic",cmt="VertexArray requires WebGL2 or OES_vertex_array_object extension";function fmt(e,t){return{webgl2:re(e),ext:e.getExtension(t)}}const ZB={[smt]:{meta:{suffix:"OES"},createVertexArray:()=>{rn(!1,cmt)},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[qB]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(e,t){rn(t===0,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[amt]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{rn(!1)}},[lmt]:{meta:{suffix:"EXT"},createQuery:()=>{rn(!1)},deleteQuery:()=>{rn(!1)},beginQuery:()=>{rn(!1)},endQuery:()=>{},getQuery(e,t){return this.getQueryObject(e,t)},getQueryParameter(e,t){return this.getQueryObject(e,t)},getQueryObject:()=>{}}},bb={readBuffer:(e,t,r)=>{re(e)&&t(r)},getVertexAttrib:(e,t,r,n)=>{const{webgl2:i,ext:o}=fmt(e,qB);let s;switch(n){case 35069:s=i?void 0:!1;break;case 35070:s=!i&&!o?0:void 0;break}return s!==void 0?s:t(r,n)},getProgramParameter:(e,t,r,n)=>{if(!re(e))switch(n){case 35967:return 35981;case 35971:return 0;case 35382:return 0}return t(r,n)},getInternalformatParameter:(e,t,r,n,i)=>{if(!re(e))switch(i){case 32937:return new Int32Array([0])}return e.getInternalformatParameter(r,n,i)},getTexParameter(e,t,r,n){switch(n){case 34046:const{extensions:i}=e.luma,o=i[umt];n=o&&o.TEXTURE_MAX_ANISOTROPY_EXT||34046;break}return t(r,n)},getParameter:omt,hint(e,t,r,n){return t(r,n)}};function hmt(e){e.luma=e.luma||{};const{luma:t}=e;return t.polyfilled||(Ygt(e),dmt(e),vmt(e,ZB),pmt(e,{target:t,target2:e}),t.polyfilled=!0),e}globalThis.polyfillContext=hmt;function dmt(e){e.luma.extensions={};const t=e.getSupportedExtensions()||[];for(const r of t)e.luma[r]=e.getExtension(r)}function pmt(e,t){let{target:r,target2:n}=t;Object.keys(bb).forEach(i=>{if(typeof bb[i]=="function"){const o=e[i]?e[i].bind(e):()=>{},s=bb[i].bind(null,e,o);r[i]=s,n[i]=s}})}function vmt(e,t){for(const r of Object.getOwnPropertyNames(t))r!=="overrides"&&gmt(e,{extension:r,target:e.luma,target2:e})}function gmt(e,t){let{extension:r,target:n,target2:i}=t;const o=ZB[r];rn(o);const{meta:s={}}=o,{suffix:a=""}=s,l=e.getExtension(r);for(const u of Object.keys(o)){const c="".concat(u).concat(a);let f=null;u==="meta"||typeof e[u]=="function"||(l&&typeof l[c]=="function"?f=function(){return l[c](...arguments)}:typeof o[u]=="function"&&(f=o[u].bind(n))),f&&(n[u]=f,i[u]=f)}}const lE={[3042]:!1,[32773]:new Float32Array([0,0,0,0]),[32777]:32774,[34877]:32774,[32969]:1,[32968]:0,[32971]:1,[32970]:0,[3106]:new Float32Array([0,0,0,0]),[3107]:[!0,!0,!0,!0],[2884]:!1,[2885]:1029,[2929]:!1,[2931]:1,[2932]:513,[2928]:new Float32Array([0,1]),[2930]:!0,[3024]:!0,[36006]:null,[2886]:2305,[33170]:4352,[2849]:1,[32823]:!1,[32824]:0,[10752]:0,[32938]:1,[32939]:!1,[3089]:!1,[3088]:new Int32Array([0,0,1024,1024]),[2960]:!1,[2961]:0,[2968]:4294967295,[36005]:4294967295,[2962]:519,[2967]:0,[2963]:4294967295,[34816]:519,[36003]:0,[36004]:4294967295,[2964]:7680,[2965]:7680,[2966]:7680,[34817]:7680,[34818]:7680,[34819]:7680,[2978]:[0,0,1024,1024],[3333]:4,[3317]:4,[37440]:!1,[37441]:!1,[37443]:37444,[35723]:4352,[36010]:null,[35977]:!1,[3330]:0,[3332]:0,[3331]:0,[3314]:0,[32878]:0,[3316]:0,[3315]:0,[32877]:0},Gs=(e,t,r)=>t?e.enable(r):e.disable(r),Ux=(e,t,r)=>e.hint(r,t),Pn=(e,t,r)=>e.pixelStorei(r,t),mmt=(e,t)=>{const r=re(e)?36009:36160;return e.bindFramebuffer(r,t)},_mt=(e,t)=>e.bindFramebuffer(36008,t);function Lh(e){return Array.isArray(e)||ArrayBuffer.isView(e)}const ymt={[3042]:Gs,[32773]:(e,t)=>e.blendColor(...t),[32777]:"blendEquation",[34877]:"blendEquation",[32969]:"blendFunc",[32968]:"blendFunc",[32971]:"blendFunc",[32970]:"blendFunc",[3106]:(e,t)=>e.clearColor(...t),[3107]:(e,t)=>e.colorMask(...t),[2884]:Gs,[2885]:(e,t)=>e.cullFace(t),[2929]:Gs,[2931]:(e,t)=>e.clearDepth(t),[2932]:(e,t)=>e.depthFunc(t),[2928]:(e,t)=>e.depthRange(...t),[2930]:(e,t)=>e.depthMask(t),[3024]:Gs,[35723]:Ux,[36006]:mmt,[2886]:(e,t)=>e.frontFace(t),[33170]:Ux,[2849]:(e,t)=>e.lineWidth(t),[32823]:Gs,[32824]:"polygonOffset",[10752]:"polygonOffset",[35977]:Gs,[32938]:"sampleCoverage",[32939]:"sampleCoverage",[3089]:Gs,[3088]:(e,t)=>e.scissor(...t),[2960]:Gs,[2961]:(e,t)=>e.clearStencil(t),[2968]:(e,t)=>e.stencilMaskSeparate(1028,t),[36005]:(e,t)=>e.stencilMaskSeparate(1029,t),[2962]:"stencilFuncFront",[2967]:"stencilFuncFront",[2963]:"stencilFuncFront",[34816]:"stencilFuncBack",[36003]:"stencilFuncBack",[36004]:"stencilFuncBack",[2964]:"stencilOpFront",[2965]:"stencilOpFront",[2966]:"stencilOpFront",[34817]:"stencilOpBack",[34818]:"stencilOpBack",[34819]:"stencilOpBack",[2978]:(e,t)=>e.viewport(...t),[3333]:Pn,[3317]:Pn,[37440]:Pn,[37441]:Pn,[37443]:Pn,[3330]:Pn,[3332]:Pn,[3331]:Pn,[36010]:_mt,[3314]:Pn,[32878]:Pn,[3316]:Pn,[3315]:Pn,[32877]:Pn,framebuffer:(e,t)=>{const r=t&&"handle"in t?t.handle:t;return e.bindFramebuffer(36160,r)},blend:(e,t)=>t?e.enable(3042):e.disable(3042),blendColor:(e,t)=>e.blendColor(...t),blendEquation:(e,t)=>{t=Lh(t)?t:[t,t],e.blendEquationSeparate(...t)},blendFunc:(e,t)=>{t=Lh(t)&&t.length===2?[...t,...t]:t,e.blendFuncSeparate(...t)},clearColor:(e,t)=>e.clearColor(...t),clearDepth:(e,t)=>e.clearDepth(t),clearStencil:(e,t)=>e.clearStencil(t),colorMask:(e,t)=>e.colorMask(...t),cull:(e,t)=>t?e.enable(2884):e.disable(2884),cullFace:(e,t)=>e.cullFace(t),depthTest:(e,t)=>t?e.enable(2929):e.disable(2929),depthFunc:(e,t)=>e.depthFunc(t),depthMask:(e,t)=>e.depthMask(t),depthRange:(e,t)=>e.depthRange(...t),dither:(e,t)=>t?e.enable(3024):e.disable(3024),derivativeHint:(e,t)=>{e.hint(35723,t)},frontFace:(e,t)=>e.frontFace(t),mipmapHint:(e,t)=>e.hint(33170,t),lineWidth:(e,t)=>e.lineWidth(t),polygonOffsetFill:(e,t)=>t?e.enable(32823):e.disable(32823),polygonOffset:(e,t)=>e.polygonOffset(...t),sampleCoverage:(e,t)=>e.sampleCoverage(...t),scissorTest:(e,t)=>t?e.enable(3089):e.disable(3089),scissor:(e,t)=>e.scissor(...t),stencilTest:(e,t)=>t?e.enable(2960):e.disable(2960),stencilMask:(e,t)=>{t=Lh(t)?t:[t,t];const[r,n]=t;e.stencilMaskSeparate(1028,r),e.stencilMaskSeparate(1029,n)},stencilFunc:(e,t)=>{t=Lh(t)&&t.length===3?[...t,...t]:t;const[r,n,i,o,s,a]=t;e.stencilFuncSeparate(1028,r,n,i),e.stencilFuncSeparate(1029,o,s,a)},stencilOp:(e,t)=>{t=Lh(t)&&t.length===3?[...t,...t]:t;const[r,n,i,o,s,a]=t;e.stencilOpSeparate(1028,r,n,i),e.stencilOpSeparate(1029,o,s,a)},viewport:(e,t)=>e.viewport(...t)};function He(e,t,r){return t[e]!==void 0?t[e]:r[e]}const bmt={blendEquation:(e,t,r)=>e.blendEquationSeparate(He(32777,t,r),He(34877,t,r)),blendFunc:(e,t,r)=>e.blendFuncSeparate(He(32969,t,r),He(32968,t,r),He(32971,t,r),He(32970,t,r)),polygonOffset:(e,t,r)=>e.polygonOffset(He(32824,t,r),He(10752,t,r)),sampleCoverage:(e,t,r)=>e.sampleCoverage(He(32938,t,r),He(32939,t,r)),stencilFuncFront:(e,t,r)=>e.stencilFuncSeparate(1028,He(2962,t,r),He(2967,t,r),He(2963,t,r)),stencilFuncBack:(e,t,r)=>e.stencilFuncSeparate(1029,He(34816,t,r),He(36003,t,r),He(36004,t,r)),stencilOpFront:(e,t,r)=>e.stencilOpSeparate(1028,He(2964,t,r),He(2965,t,r),He(2966,t,r)),stencilOpBack:(e,t,r)=>e.stencilOpSeparate(1029,He(34817,t,r),He(34818,t,r),He(34819,t,r))},Wx={enable:(e,t)=>e({[t]:!0}),disable:(e,t)=>e({[t]:!1}),pixelStorei:(e,t,r)=>e({[t]:r}),hint:(e,t,r)=>e({[t]:r}),bindFramebuffer:(e,t,r)=>{switch(t){case 36160:return e({[36006]:r,[36010]:r});case 36009:return e({[36006]:r});case 36008:return e({[36010]:r});default:return null}},blendColor:(e,t,r,n,i)=>e({[32773]:new Float32Array([t,r,n,i])}),blendEquation:(e,t)=>e({[32777]:t,[34877]:t}),blendEquationSeparate:(e,t,r)=>e({[32777]:t,[34877]:r}),blendFunc:(e,t,r)=>e({[32969]:t,[32968]:r,[32971]:t,[32970]:r}),blendFuncSeparate:(e,t,r,n,i)=>e({[32969]:t,[32968]:r,[32971]:n,[32970]:i}),clearColor:(e,t,r,n,i)=>e({[3106]:new Float32Array([t,r,n,i])}),clearDepth:(e,t)=>e({[2931]:t}),clearStencil:(e,t)=>e({[2961]:t}),colorMask:(e,t,r,n,i)=>e({[3107]:[t,r,n,i]}),cullFace:(e,t)=>e({[2885]:t}),depthFunc:(e,t)=>e({[2932]:t}),depthRange:(e,t,r)=>e({[2928]:new Float32Array([t,r])}),depthMask:(e,t)=>e({[2930]:t}),frontFace:(e,t)=>e({[2886]:t}),lineWidth:(e,t)=>e({[2849]:t}),polygonOffset:(e,t,r)=>e({[32824]:t,[10752]:r}),sampleCoverage:(e,t,r)=>e({[32938]:t,[32939]:r}),scissor:(e,t,r,n,i)=>e({[3088]:new Int32Array([t,r,n,i])}),stencilMask:(e,t)=>e({[2968]:t,[36005]:t}),stencilMaskSeparate:(e,t,r)=>e({[t===1028?2968:36005]:r}),stencilFunc:(e,t,r,n)=>e({[2962]:t,[2967]:r,[2963]:n,[34816]:t,[36003]:r,[36004]:n}),stencilFuncSeparate:(e,t,r,n,i)=>e({[t===1028?2962:34816]:r,[t===1028?2967:36003]:n,[t===1028?2963:36004]:i}),stencilOp:(e,t,r,n)=>e({[2964]:t,[2965]:r,[2966]:n,[34817]:t,[34818]:r,[34819]:n}),stencilOpSeparate:(e,t,r,n,i)=>e({[t===1028?2964:34817]:r,[t===1028?2965:34818]:n,[t===1028?2966:34819]:i}),viewport:(e,t,r,n,i)=>e({[2978]:[t,r,n,i]})},so=(e,t)=>e.isEnabled(t),jx={[3042]:so,[2884]:so,[2929]:so,[3024]:so,[32823]:so,[32926]:so,[32928]:so,[3089]:so,[2960]:so,[35977]:so};function KB(e){for(const t in e)return!1;return!0}function wmt(e,t){if(e===t)return!0;const r=Array.isArray(e)||ArrayBuffer.isView(e),n=Array.isArray(t)||ArrayBuffer.isView(t);if(r&&n&&e.length===t.length){for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}return!1}function Gx(e,t){const r=e[t].bind(e);e[t]=function(){const i=arguments.length<=0?void 0:arguments[0];return i in e.state.cache?e.state.enable?e.state.cache[i]:r(...arguments):r(...arguments)},Object.defineProperty(e[t],"name",{value:"".concat(t,"-from-cache"),configurable:!1})}function Smt(e,t,r){const n=e[t].bind(e);e[t]=function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];const{valueChanged:l,oldValue:u}=r(e.state._updateCache,...s);return l&&n(...s),u},Object.defineProperty(e[t],"name",{value:"".concat(t,"-to-cache"),configurable:!1})}function Tmt(e){const t=e.useProgram.bind(e);e.useProgram=function(n){e.state.program!==n&&(t(n),e.state.program=n)}}class kmt{constructor(t){let{copyState:r=!1,log:n=()=>{}}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.program=null,this.stateStack=[],this.enable=!0,this.cache=r?Emt(t):Object.assign({},lE),this.log=n,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){rn(this.stateStack.length>0);const t=this.stateStack[this.stateStack.length-1];ws(this.gl,t),this.stateStack.pop()}_updateCache(t){let r=!1,n;const i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const o in t){rn(o!==void 0);const s=t[o],a=this.cache[o];wmt(s,a)||(r=!0,n=a,i&&!(o in i)&&(i[o]=a),this.cache[o]=s)}return{valueChanged:r,oldValue:n}}}function JB(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{enable:r=!0,copyState:n}=t;if(rn(n!==void 0),!e.state){const{polyfillContext:i}=globalThis;i&&i(e),e.state=new kmt(e,{copyState:n}),Tmt(e);for(const o in Wx){const s=Wx[o];Smt(e,o,s)}Gx(e,"getParameter"),Gx(e,"isEnabled")}return e.state.enable=r,e}function Pmt(e){e.state||JB(e,{copyState:!1}),e.state.push()}function Hx(e){rn(e.state),e.state.pop()}function ws(e,t){if(rn(C_(e),"setParameters requires a WebGL context"),KB(t))return;const r={};for(const i in t){const o=Number(i),s=ymt[i];s&&(typeof s=="string"?r[s]=!0:s(e,t[i],o))}const n=e.state&&e.state.cache;if(n)for(const i in r){const o=bmt[i];o(e,t,n)}}function Emt(e,t){if(t=t||lE,typeof t=="number"){const i=t,o=jx[i];return o?o(e,i):e.getParameter(i)}const r=Array.isArray(t)?t:Object.keys(t),n={};for(const i of r){const o=jx[i];n[i]=o?o(e,Number(i)):e.getParameter(Number(i))}return n}function Cmt(e){ws(e,lE)}function ai(e,t,r){if(KB(t))return r(e);const{nocatch:n=!0}=t;Pmt(e),ws(e,t);let i;if(n)i=r(e),Hx(e);else try{i=r(e)}finally{Hx(e)}return i}function hf(e){const{luma:t}=e;if(e.canvas&&t){const{clientWidth:r}=t.canvasSizeInfo;return r?e.drawingBufferWidth/r:1}return 1}function wb(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const n=hf(e),i=e.drawingBufferWidth,o=e.drawingBufferHeight;return Mmt(t,n,i,o,r)}function Amt(e){const t=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(e)?e<=0?1:e:e?t:1}function Mmt(e,t,r,n,i){const o=Xx(e[0],t,r);let s=Yx(e[1],t,n,i),a=Xx(e[0]+1,t,r);const l=a===r-1?a:a-1;a=Yx(e[1]+1,t,n,i);let u;return i?(a=a===0?a:a+1,u=s,s=a):u=a===n-1?a:a-1,{x:o,y:s,width:Math.max(l-o+1,1),height:Math.max(u-s+1,1)}}function Xx(e,t,r){return Math.min(Math.round(e*t),r-1)}function Yx(e,t,r,n){return n?Math.max(0,r-1-Math.round(e*t)):Math.min(Math.round(e*t),r-1)}const uE=Ls(),xmt=uE&&typeof document<"u",QB={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function t$(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};rn(uE,`createGLContext only available in the browser.
Create your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils`),e=Object.assign({},QB,e);const{width:t,height:r}=e;function n(a){if(e.throwOnError)throw new Error(a);return console.error(a),null}e.onError=n;let i;const{canvas:o}=e,s=Rmt({canvas:o,width:t,height:r,onError:n});return i=Omt(s,e),i?(i=cE(i,e),Dmt(i),i):null}function cE(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e||e._instrumented)return e;e._version=e._version||Nmt(e),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{},t=Object.assign({},QB,t);const{manageState:r,debug:n}=t;return r&&JB(e,{copyState:!1,log:function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return Ot.log(1,...o)()}}),uE&&n&&(globalThis.makeDebugContext?(e=globalThis.makeDebugContext(e,t),Ot.level=Math.max(Ot.level,1)):Ot.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),e._instrumented=!0,e}function Lmt(e){const t=e.getParameter(7936),r=e.getParameter(7937),n=e.getExtension("WEBGL_debug_renderer_info"),i=n&&e.getParameter(n.UNMASKED_VENDOR_WEBGL||7936),o=n&&e.getParameter(n.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||t,renderer:o||r,vendorMasked:t,rendererMasked:r,version:e.getParameter(7938),shadingLanguageVersion:e.getParameter(35724)}}function Imt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e.canvas){const n=Amt(t.useDevicePixels);Fmt(e,n,t);return}const r=e.getExtension("STACKGL_resize_drawingbuffer");r&&"width"in t&&"height"in t&&r.resize(t.width,t.height)}function Omt(e,t){const{onError:r}=t;let n=null;const i=l=>n=l.statusMessage||n;e.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:o=!0,webgl2:s=!0}=t;let a=null;return s&&(a=a||e.getContext("webgl2",t),a=a||e.getContext("experimental-webgl2",t)),o&&(a=a||e.getContext("webgl",t),a=a||e.getContext("experimental-webgl",t)),e.removeEventListener("webglcontextcreationerror",i,!1),a?(t.onContextLost&&e.addEventListener("webglcontextlost",t.onContextLost,!1),t.onContextRestored&&e.addEventListener("webglcontextrestored",t.onContextRestored,!1),a):r("Failed to create ".concat(s&&!o?"WebGL2":"WebGL"," context: ").concat(n||"Unknown error"))}function Rmt(e){let{canvas:t,width:r=800,height:n=600,onError:i}=e,o;return typeof t=="string"?(xmt&&document.readyState==="complete"||i("createGLContext called on canvas '".concat(t,"' before page was loaded")),o=document.getElementById(t)):t?o=t:(o=document.createElement("canvas"),o.id="lumagl-canvas",o.style.width=Number.isFinite(r)?"".concat(r,"px"):"100%",o.style.height=Number.isFinite(n)?"".concat(n,"px"):"100%",document.body.insertBefore(o,document.body.firstChild)),o}function Dmt(e){const t=re(e)?"WebGL2":"WebGL1",r=Lmt(e),n=r?"(".concat(r.vendor,",").concat(r.renderer,")"):"",i=e.debug?" debug":"";Ot.info(1,"".concat(t).concat(i," context ").concat(n))()}function Nmt(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?2:1}function Fmt(e,t,r){let n="width"in r?r.width:e.canvas.clientWidth,i="height"in r?r.height:e.canvas.clientHeight;(!n||!i)&&(Ot.log(1,"Canvas clientWidth/clientHeight is 0")(),t=1,n=e.canvas.width||1,i=e.canvas.height||1),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{};const o=e.luma.canvasSizeInfo;if(o.clientWidth!==n||o.clientHeight!==i||o.devicePixelRatio!==t){let s=t;const a=Math.floor(n*s),l=Math.floor(i*s);e.canvas.width=a,e.canvas.height=l,(e.drawingBufferWidth!==a||e.drawingBufferHeight!==l)&&(Ot.warn("Device pixel ratio clamped")(),s=Math.min(e.drawingBufferWidth/n,e.drawingBufferHeight/i),e.canvas.width=Math.floor(n*s),e.canvas.height=Math.floor(i*s)),Object.assign(e.luma.canvasSizeInfo,{clientWidth:n,clientHeight:i,devicePixelRatio:t})}}const Ud="8.5.16",zmt="set luma.log.level=1 (or higher) to trace rendering";class e${constructor(){this.stats=new Map}get(t){return this.stats.has(t)||this.stats.set(t,new P_({id:t})),this.stats.get(t)}}const Ul=new e$;if(globalThis.luma&&globalThis.luma.VERSION!==Ud)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(Ud));globalThis.luma||(Ls()&&Ot.log(1,"luma.gl ".concat(Ud," - ").concat(zmt))(),globalThis.luma=globalThis.luma||{VERSION:Ud,version:Ud,log:Ot,stats:Ul,globals:{modules:{},nodeIO:{}}});function Bmt(e){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60)}function $mt(e){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e)}function yt(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}function Sb(e,t){if(typeof t!="string")return t;const r=Number(t);if(!isNaN(r))return r;t=t.replace(/^.*\./,"");const n=e[t];return yt(n!==void 0,"Accessing undefined constant GL.".concat(t)),n}function Pa(e,t){t=Number(t);for(const r in e)if(e[r]===t)return"GL.".concat(r);return String(t)}const Tb={};function Da(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"id";Tb[e]=Tb[e]||1;const t=Tb[e]++;return"".concat(e,"-").concat(t)}function qx(e){return yt(typeof e=="number","Input must be a number"),e&&(e&e-1)===0}function df(e){let t=!0;for(const r in e){t=!1;break}return t}function r$(e,t,r,n){const i="See luma.gl ".concat(r," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(e);n.forEach(s=>{o.methodName||(o[s]=()=>{throw Ot.removed("Calling removed method ".concat(t,".").concat(s,": "),i)(),new Error(s)})})}const uc="Resource subclass must define virtual methods";class Is{get[Symbol.toStringTag](){return"Resource"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};A_(t);const{id:n,userData:i={}}=r;this.gl=t,this.gl2=t,this.id=n||Da(this[Symbol.toStringTag]),this.userData=i,this._bound=!1,this._handle=r.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._initStats(),this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,r&&t&&r.filter(Boolean).forEach(n=>n.delete()),this}bind(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.handle;if(typeof t!="function")return this._bindHandle(t),this;let r;return this._bound?r=t():(this._bindHandle(this.handle),this._bound=!0,r=t(),this._bound=!1,this._bindHandle(null)),r}unbind(){this.bind(null)}getParameter(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t=Sb(this.gl,t),yt(t);const i=(this.constructor.PARAMETERS||{})[t];if(i){const o=re(this.gl);if(!((!("webgl2"in i)||o)&&(!("extension"in i)||this.gl.getExtension(i.extension)))){const a=i.webgl1,l="webgl2"in i?i.webgl2:i.webgl1;return o?l:a}}return this._getParameter(t,r)}getParameters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{parameters:r,keys:n}=t,i=this.constructor.PARAMETERS||{},o=re(this.gl),s={},a=r||Object.keys(i);for(const l of a){const u=i[l];if(u&&(!("webgl2"in u)||o)&&(!("extension"in u)||this.gl.getExtension(u.extension))){const f=n?Pa(this.gl,l):l;s[f]=this.getParameter(l,t),n&&u.type==="GLenum"&&(s[f]=Pa(this.gl,s[f]))}}return s}setParameter(t,r){t=Sb(this.gl,t),yt(t);const i=(this.constructor.PARAMETERS||{})[t];if(i){const o=re(this.gl);if(!((!("webgl2"in i)||o)&&(!("extension"in i)||this.gl.getExtension(i.extension))))throw new Error("Parameter not available on this platform");i.type==="GLenum"&&(r=Sb(r))}return this._setParameter(t,r),this}setParameters(t){for(const r in t)this.setParameter(r,t[r]);return this}stubRemovedMethods(t,r,n){return r$(this,t,r,n)}initialize(t){}_createHandle(){throw new Error(uc)}_deleteHandle(){throw new Error(uc)}_bindHandle(t){throw new Error(uc)}_getOptsFromHandle(){throw new Error(uc)}_getParameter(t,r){throw new Error(uc)}_setParameter(t,r){throw new Error(uc)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_initStats(){this.gl.stats=this.gl.stats||new e$}_addStats(){const t=this[Symbol.toStringTag],r=Ul.get("Resource Counts");r.get("Resources Created").incrementCount(),r.get("".concat(t,"s Created")).incrementCount(),r.get("".concat(t,"s Active")).incrementCount()}_removeStats(){const t=this[Symbol.toStringTag];Ul.get("Resource Counts").get("".concat(t,"s Active")).decrementCount()}_trackAllocatedMemory(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag];this._doTrackAllocatedMemory(t,r),this._doTrackAllocatedMemory(t,r,this.gl.stats.get("Memory Usage"))}_doTrackAllocatedMemory(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ul.get("Memory Usage");n.get("GPU Memory").addCount(t),n.get("".concat(r," Memory")).addCount(t),this.byteLength=t}_trackDeallocatedMemory(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag];this._doTrackDeallocatedMemory(t),this._doTrackDeallocatedMemory(t,this.gl.stats.get("Memory Usage"))}_doTrackDeallocatedMemory(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ul.get("Memory Usage");r.get("GPU Memory").subtractCount(this.byteLength),r.get("".concat(t," Memory")).subtractCount(this.byteLength),this.byteLength=0}}const Vmt="Failed to deduce GL constant from typed array";function Q3(e){switch(ArrayBuffer.isView(e)?e.constructor:e){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(Vmt)}}function wp(e){let{clamped:t=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(e){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return t?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function Umt(e){let{data:t,width:r,height:n,bytesPerPixel:i=4,temp:o}=e;const s=r*i;o=o||new Uint8Array(s);for(let a=0;a<n/2;++a){const l=a*s,u=(n-a-1)*s;o.set(t.subarray(l,l+s)),t.copyWithin(l,u,u+s),t.set(o,u)}}function Wmt(e){let{data:t,width:r,height:n}=e;const i=Math.round(r/2),o=Math.round(n/2),s=new Uint8Array(i*o*4);for(let a=0;a<o;a++)for(let l=0;l<i;l++)for(let u=0;u<4;u++)s[(a*i+l)*4+u]=t[(a*2*r+l*2)*4+u];return{data:s,width:i,height:o}}function tT(e,t,r){const{removedProps:n={},deprecatedProps:i={},replacedProps:o={}}=r;for(const a in n)if(a in t){const u=n[a]?"".concat(e,".").concat(n[a]):"N/A";Ot.removed("".concat(e,".").concat(a),u)()}for(const a in i)if(a in t){const l=i[a];Ot.deprecated("".concat(e,".").concat(a),"".concat(e,".").concat(l))()}let s=null;for(const a in o)if(a in t){const l=o[a];Ot.deprecated("".concat(e,".").concat(a),"".concat(e,".").concat(l))(),s=s||Object.assign({},t),s[l]=t[a],delete s[a]}return s||t}const jmt={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},Gmt={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class Mn{static getBytesPerElement(t){return wp(t.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(t){return yt(t.size),wp(t.type||5126).BYTES_PER_ELEMENT*t.size}static resolve(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return new Mn(jmt,...r)}constructor(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];r.forEach(i=>this._assign(i)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return Mn.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return Mn.getBytesPerVertex(this)}_assign(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t=tT("Accessor",t,Gmt),t.type!==void 0&&(this.type=t.type,(t.type===5124||t.type===5125)&&(this.integer=!0)),t.size!==void 0&&(this.size=t.size),t.offset!==void 0&&(this.offset=t.offset),t.stride!==void 0&&(this.stride=t.stride),t.normalized!==void 0&&(this.normalized=t.normalized),t.integer!==void 0&&(this.integer=t.integer),t.divisor!==void 0&&(this.divisor=t.divisor),t.buffer!==void 0&&(this.buffer=t.buffer),t.index!==void 0&&(typeof t.index=="boolean"?this.index=t.index?1:0:this.index=t.index),t.instanced!==void 0&&(this.divisor=t.instanced?1:0),t.isInstanced!==void 0&&(this.divisor=t.isInstanced?1:0),this}}const Zx=10,n$={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},Hmt={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:n$},Xmt={removedProps:n$};class Ee extends Is{get[Symbol.toStringTag](){return"Buffer"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=r.target||(this.gl.webgl2?36662:34962),this.initialize(r),Object.seal(this)}getElementCount(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/Mn.getBytesPerElement(t))}getVertexCount(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/Mn.getBytesPerVertex(t))}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ArrayBuffer.isView(t)&&(t={data:t}),Number.isFinite(t)&&(t={byteLength:t}),t=tT("Buffer",t,Hmt),this.usage=t.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},t,t.accessor)),t.data?this._setData(t.data,t.offset,t.byteLength):this._setByteLength(t.byteLength||0),this}setProps(t){return t=tT("Buffer",t,Xmt),"accessor"in t&&this.setAccessor(t.accessor),this}setAccessor(t){return t=Object.assign({},t),delete t.buffer,this.accessor=new Mn(t),this}reallocate(t){return t>this.byteLength?(this._setByteLength(t),!0):(this.bytesUsed=t,!1)}setData(t){return this.initialize(t)}subData(t){ArrayBuffer.isView(t)&&(t={data:t});const{data:r,offset:n=0,srcOffset:i=0}=t,o=t.byteLength||t.length;yt(r);const s=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(s,this.handle),i!==0||o!==void 0?(jr(this.gl),this.gl.bufferSubData(this.target,n,r,i,o)):this.gl.bufferSubData(s,n,r),this.gl.bindBuffer(s,null),this.debugData=null,this._inferType(r),this}copyData(t){let{sourceBuffer:r,readOffset:n=0,writeOffset:i=0,size:o}=t;const{gl:s}=this;return jr(s),s.bindBuffer(36662,r.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,n,i,o),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:t=null,srcByteOffset:r=0,dstOffset:n=0,length:i=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};jr(this.gl);const o=wp(this.accessor.type||5126,{clamped:!1}),s=this._getAvailableElementCount(r),a=n;let l,u;t?(u=t.length,l=u-a):(l=Math.min(s,i||s),u=a+l);const c=Math.min(s,l);return i=i||c,yt(i<=c),t=t||new o(u),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,r,t,n,i),this.gl.bindBuffer(36662,null),t}bind(){let{target:t=this.target,index:r=this.accessor&&this.accessor.index,offset:n=0,size:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t===35345||t===35982?i!==void 0?this.gl.bindBufferRange(t,r,this.handle,n,i):(yt(n===0),this.gl.bindBufferBase(t,r,this.handle)):this.gl.bindBuffer(t,this.handle),this}unbind(){let{target:t=this.target,index:r=this.accessor&&this.accessor.index}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t===35345||t===35982?this.gl.bindBufferBase(t,r,null):this.gl.bindBuffer(t,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(Zx,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.byteLength+r;yt(ArrayBuffer.isView(t)),this._trackDeallocatedMemory();const i=this._getTarget();this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,n,this.usage),this.gl.bufferSubData(i,r,t),this.gl.bindBuffer(i,null),this.debugData=t.slice(0,Zx),this.bytesUsed=n,this._trackAllocatedMemory(n);const o=Q3(t);return yt(o),this.setAccessor(new Mn(this.accessor,{type:o})),this}_setByteLength(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.usage;yt(t>=0),this._trackDeallocatedMemory();let n=t;t===0&&(n=new Float32Array(0));const i=this._getTarget();return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,n,r),this.gl.bindBuffer(i,null),this.usage=r,this.debugData=null,this.bytesUsed=t,this._trackAllocatedMemory(t),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(t){const r=wp(this.accessor.type||5126,{clamped:!1}),n=t/r.BYTES_PER_ELEMENT;return this.getElementCount()-n}_inferType(t){this.accessor.type||this.setAccessor(new Mn(this.accessor,{type:Q3(t)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(t){this.gl.bindBuffer(this.target,this.handle);const r=this.gl.getBufferParameter(this.target,t);return this.gl.bindBuffer(this.target,null),r}get type(){return Ot.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return Ot.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(t){return Ot.deprecated("setByteLength","reallocate")(),this.reallocate(t)}updateAccessor(t){return Ot.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new Mn(this.accessor,t),this}}const fE={[6407]:{dataFormat:6407,types:[5121,33635]},[6408]:{dataFormat:6408,types:[5121,32819,32820]},[6406]:{dataFormat:6406,types:[5121]},[6409]:{dataFormat:6409,types:[5121]},[6410]:{dataFormat:6410,types:[5121]},[33326]:{dataFormat:6403,types:[5126],gl2:!0},[33328]:{dataFormat:33319,types:[5126],gl2:!0},[34837]:{dataFormat:6407,types:[5126],gl2:!0},[34836]:{dataFormat:6408,types:[5126],gl2:!0}},i$={[6403]:1,[36244]:1,[33319]:2,[33320]:2,[6407]:3,[36248]:3,[6408]:4,[36249]:4,[6402]:1,[34041]:1,[6406]:1,[6409]:1,[6410]:2},o$={[5126]:4,[5125]:4,[5124]:4,[5123]:2,[5122]:2,[5131]:2,[5120]:1,[5121]:1};function Ymt(e,t){const r=fE[t];if(!r)return!1;if(r.gl1===void 0&&r.gl2===void 0)return!0;const n=re(e)&&r.gl2||r.gl1;return typeof n=="string"?e.getExtension(n):n}function qmt(e,t){const r=fE[t];switch(r&&r.types[0]){case 5126:return e.getExtension("OES_texture_float_linear");case 5131:return e.getExtension("OES_texture_half_float_linear");default:return!0}}const Zmt=[9729,9728],Kx=globalThis.WebGLBuffer||function(){};class du extends Is{get[Symbol.toStringTag](){return"Texture"}static isSupported(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{format:n,linearFiltering:i}=r;let o=!0;return n&&(o=o&&Ymt(t,n),o=o&&(!i||qmt(t,n))),o}constructor(t,r){const{id:n=Da("texture"),handle:i,target:o}=r;super(t,{id:n,handle:i}),this.target=o,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.data;if(r instanceof Promise)return r.then(_=>this.initialize(Object.assign({},t,{pixels:_,data:_}))),this;const n=typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement;if(n&&r.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,r.addEventListener("loadeddata",()=>this.initialize(t)),this;const{pixels:i=null,format:o=6408,border:s=0,recreate:a=!1,parameters:l={},pixelStore:u={},textureUnit:c=void 0}=t;r||(r=i);let{width:f,height:h,dataFormat:d,type:p,compressed:v=!1,mipmaps:m=!0}=t;const{depth:g=0}=t;return{width:f,height:h,compressed:v,dataFormat:d,type:p}=this._deduceParameters({format:o,type:p,dataFormat:d,compressed:v,data:r,width:f,height:h}),this.width=f,this.height=h,this.depth=g,this.format=o,this.type=p,this.dataFormat=d,this.border=s,this.textureUnit=c,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),m&&this._isNPOT()&&(Ot.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),m=!1,this._updateForNPOT(l)),this.mipmaps=m,this.setImageData({data:r,width:f,height:h,depth:g,format:o,type:p,dataFormat:d,border:s,mipmaps:m,parameters:u,compressed:v}),m&&this.generateMipmap(),this.setParameters(l),a&&(this.data=r),n&&(this._video={video:r,parameters:l,lastTime:r.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?r.currentTime:-1}),this}update(){if(this._video){const{video:t,parameters:r,lastTime:n}=this._video;if(n===t.currentTime||t.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:t,parameters:r}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=t.currentTime}}resize(t){let{height:r,width:n,mipmaps:i=!1}=t;return n!==this.width||r!==this.height?this.initialize({width:n,height:r,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}generateMipmap(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isNPOT()?(Ot.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),ai(this.gl,t,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(t){this._trackDeallocatedMemory("Texture");const{target:r=this.target,pixels:n=null,level:i=0,format:o=this.format,border:s=this.border,offset:a=0,parameters:l={}}=t;let{data:u=null,type:c=this.type,width:f=this.width,height:h=this.height,dataFormat:d=this.dataFormat,compressed:p=!1}=t;u||(u=n),{type:c,dataFormat:d,compressed:p,width:f,height:h}=this._deduceParameters({format:o,type:c,dataFormat:d,compressed:p,data:u,width:f,height:h});const{gl:v}=this;v.bindTexture(this.target,this.handle);let m=null;({data:u,dataType:m}=this._getDataType({data:u,compressed:p}));let g,_=0;if(ai(this.gl,l,()=>{switch(m){case"null":v.texImage2D(r,i,o,f,h,s,d,c,u);break;case"typed-array":v.texImage2D(r,i,o,f,h,s,d,c,u,a);break;case"buffer":g=jr(v),g.bindBuffer(35052,u.handle||u),g.texImage2D(r,i,o,f,h,s,d,c,a),g.bindBuffer(35052,null);break;case"browser-object":re(v)?v.texImage2D(r,i,o,f,h,s,d,c,u):v.texImage2D(r,i,o,d,c,u);break;case"compressed":for(const[b,w]of u.entries())v.compressedTexImage2D(r,b,w.format,w.width,w.height,s,w.data),_+=w.levelSize;break;default:yt(!1,"Unknown image data type")}}),m==="compressed")this._trackAllocatedMemory(_,"Texture");else if(u&&u.byteLength)this._trackAllocatedMemory(u.byteLength,"Texture");else{const b=i$[this.dataFormat]||4,w=o$[this.type]||1;this._trackAllocatedMemory(this.width*this.height*b*w,"Texture")}return this.loaded=!0,this}setSubImageData(t){let{target:r=this.target,pixels:n=null,data:i=null,x:o=0,y:s=0,width:a=this.width,height:l=this.height,level:u=0,format:c=this.format,type:f=this.type,dataFormat:h=this.dataFormat,compressed:d=!1,offset:p=0,border:v=this.border,parameters:m={}}=t;if({type:f,dataFormat:h,compressed:d,width:a,height:l}=this._deduceParameters({format:c,type:f,dataFormat:h,compressed:d,data:i,width:a,height:l}),yt(this.depth===0,"texSubImage not supported for 3D textures"),i||(i=n),i&&i.data){const g=i;i=g.data,a=g.shape[0],l=g.shape[1]}i instanceof Ee&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),ai(this.gl,m,()=>{if(d)this.gl.compressedTexSubImage2D(r,u,o,s,a,l,c,i);else if(i===null)this.gl.texSubImage2D(r,u,o,s,a,l,h,f,null);else if(ArrayBuffer.isView(i))this.gl.texSubImage2D(r,u,o,s,a,l,h,f,i,p);else if(i instanceof Kx){const g=jr(this.gl);g.bindBuffer(35052,i),g.texSubImage2D(r,u,o,s,a,l,h,f,p),g.bindBuffer(35052,null)}else re(this.gl)?jr(this.gl).texSubImage2D(r,u,o,s,a,l,h,f,i):this.gl.texSubImage2D(r,u,o,s,h,f,i)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return Ot.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:r}=this;return t!==void 0&&(this.textureUnit=t,r.activeTexture(33984+t)),r.bindTexture(this.target,this.handle),t}unbind(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:r}=this;return t!==void 0&&(this.textureUnit=t,r.activeTexture(33984+t)),r.bindTexture(this.target,null),t}_getDataType(t){let{data:r,compressed:n=!1}=t;return n?{data:r,dataType:"compressed"}:r===null?{data:r,dataType:"null"}:ArrayBuffer.isView(r)?{data:r,dataType:"typed-array"}:r instanceof Ee?{data:r.handle,dataType:"buffer"}:r instanceof Kx?{data:r,dataType:"buffer"}:{data:r,dataType:"browser-object"}}_deduceParameters(t){const{format:r,data:n}=t;let{width:i,height:o,dataFormat:s,type:a,compressed:l}=t;const u=fE[r];return s=s||u&&u.dataFormat,a=a||u&&u.types[0],l=l||u&&u.compressed,{width:i,height:o}=this._deduceImageSize(n,i,o),{dataFormat:s,type:a,compressed:l,width:i,height:o,format:r,data:n}}_deduceImageSize(t,r,n){let i;return typeof ImageData<"u"&&t instanceof ImageData?i={width:t.width,height:t.height}:typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement?i={width:t.naturalWidth,height:t.naturalHeight}:typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement?i={width:t.width,height:t.height}:typeof ImageBitmap<"u"&&t instanceof ImageBitmap?i={width:t.width,height:t.height}:typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?i={width:t.videoWidth,height:t.videoHeight}:t?i={width:r,height:n}:i={width:r>=0?r:1,height:n>=0?n:1},yt(i,"Could not deduced texture size"),yt(r===void 0||i.width===r,"Deduced texture width does not match supplied width"),yt(n===void 0||i.height===n,"Deduced texture height does not match supplied height"),i}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(t){switch(t){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const r=this.gl.getTexParameter(this.target,t);return this.gl.bindTexture(this.target,null),r}}_setParameter(t,r){switch(this.gl.bindTexture(this.target,this.handle),r=this._getNPOTParam(t,r),t){case 33082:case 33083:this.gl.texParameterf(this.handle,t,r);break;case 4096:case 4097:yt(!1);break;default:this.gl.texParameteri(this.target,t,r);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return re(this.gl)||!this.width||!this.height?!1:!qx(this.width)||!qx(this.height)}_updateForNPOT(t){t[this.gl.TEXTURE_MIN_FILTER]===void 0&&(t[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),t[this.gl.TEXTURE_WRAP_S]===void 0&&(t[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),t[this.gl.TEXTURE_WRAP_T]===void 0&&(t[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(t,r){if(this._isNPOT())switch(t){case 10241:Zmt.indexOf(r)===-1&&(r=9729);break;case 10242:case 10243:r!==33071&&(r=33071);break}return r}}let Kmt="";function Jmt(e,t){return yt(typeof e=="string"),e=Kmt+e,new Promise((r,n)=>{try{const i=new Image;i.onload=()=>r(i),i.onerror=()=>n(new Error("Could not load image ".concat(e,"."))),i.crossOrigin=t&&t.crossOrigin||"anonymous",i.src=e}catch(i){n(i)}})}class wn extends du{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(t,r){return du.isSupported(t,r)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};A_(t),(r instanceof Promise||typeof r=="string")&&(r={data:r}),typeof r.data=="string"&&(r=Object.assign({},r,{data:Jmt(r.data)})),super(t,Object.assign({},r,{target:3553})),this.initialize(r),Object.seal(this)}}const eT=[34069,34070,34071,34072,34073,34074];class s$ extends du{get[Symbol.toStringTag](){return"TextureCube"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};A_(t),super(t,Object.assign({},r,{target:34067})),this.initialize(r),Object.seal(this)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{mipmaps:r=!0,parameters:n={}}=t;return this.opts=t,this.setCubeMapImageData(t).then(()=>{this.loaded=!0,r&&this.generateMipmap(t),this.setParameters(n)}),this}subImage(t){let{face:r,data:n,x:i=0,y:o=0,mipmapLevel:s=0}=t;return this._subImage({target:r,data:n,x:i,y:o,mipmapLevel:s})}async setCubeMapImageData(t){let{width:r,height:n,pixels:i,data:o,border:s=0,format:a=6408,type:l=5121}=t;const{gl:u}=this,c=i||o,f=await Promise.all(eT.map(h=>{const d=c[h];return Promise.all(Array.isArray(d)?d:[d])}));this.bind(),eT.forEach((h,d)=>{f[d].length>1&&this.opts.mipmaps!==!1&&Ot.warn("".concat(this.id," has mipmap and multiple LODs."))(),f[d].forEach((p,v)=>{r&&n?u.texImage2D(h,v,a,r,n,s,a,l,p):u.texImage2D(h,v,a,a,l,p)})}),this.unbind()}setImageDataForFace(t){const{face:r,width:n,height:i,pixels:o,data:s,border:a=0,format:l=6408,type:u=5121}=t,{gl:c}=this,f=o||s;return this.bind(),f instanceof Promise?f.then(h=>this.setImageDataForFace(Object.assign({},t,{face:r,data:h,pixels:h}))):this.width||this.height?c.texImage2D(r,0,l,n,i,a,l,u,f):c.texImage2D(r,0,l,l,u,f),this}}s$.FACES=eT;class Qmt extends du{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(t){return re(t)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};jr(t),r=Object.assign({depth:1},r,{target:32879,unpackFlipY:!1}),super(t,r),this.initialize(r),Object.seal(this)}setImageData(t){let{level:r=0,dataFormat:n=6408,width:i,height:o,depth:s=1,border:a=0,format:l,type:u=5121,offset:c=0,data:f,parameters:h={}}=t;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),ai(this.gl,h,()=>{ArrayBuffer.isView(f)&&this.gl.texImage3D(this.target,r,n,i,o,s,a,l,u,f),f instanceof Ee&&(this.gl.bindBuffer(35052,f.handle),this.gl.texImage3D(this.target,r,n,i,o,s,a,l,u,c))}),f&&f.byteLength)this._trackAllocatedMemory(f.byteLength,"Texture");else{const d=i$[this.dataFormat]||4,p=o$[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*d*p,"Texture")}return this.loaded=!0,this}}const kl="EXT_color_buffer_float",Jx={[33189]:{bpp:2},[33190]:{gl2:!0,bpp:3},[36012]:{gl2:!0,bpp:4},[36168]:{bpp:1},[34041]:{bpp:4},[35056]:{gl2:!0,bpp:4},[36013]:{gl2:!0,bpp:5},[32854]:{bpp:2},[36194]:{bpp:2},[32855]:{bpp:2},[33321]:{gl2:!0,bpp:1},[33330]:{gl2:!0,bpp:1},[33329]:{gl2:!0,bpp:1},[33332]:{gl2:!0,bpp:2},[33331]:{gl2:!0,bpp:2},[33334]:{gl2:!0,bpp:4},[33333]:{gl2:!0,bpp:4},[33323]:{gl2:!0,bpp:2},[33336]:{gl2:!0,bpp:2},[33335]:{gl2:!0,bpp:2},[33338]:{gl2:!0,bpp:4},[33337]:{gl2:!0,bpp:4},[33340]:{gl2:!0,bpp:8},[33339]:{gl2:!0,bpp:8},[32849]:{gl2:!0,bpp:3},[32856]:{gl2:!0,bpp:4},[32857]:{gl2:!0,bpp:4},[36220]:{gl2:!0,bpp:4},[36238]:{gl2:!0,bpp:4},[36975]:{gl2:!0,bpp:4},[36214]:{gl2:!0,bpp:8},[36232]:{gl2:!0,bpp:8},[36226]:{gl2:!0,bpp:16},[36208]:{gl2:!0,bpp:16},[33325]:{gl2:kl,bpp:2},[33327]:{gl2:kl,bpp:4},[34842]:{gl2:kl,bpp:8},[33326]:{gl2:kl,bpp:4},[33328]:{gl2:kl,bpp:8},[34836]:{gl2:kl,bpp:16},[35898]:{gl2:kl,bpp:4}};function t1t(e,t,r){const n=r[t];if(!n)return!1;const i=re(e)&&n.gl2||n.gl1;return typeof i=="string"?e.getExtension(i):i}class Dc extends Is{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(t){let{format:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{format:null};return!r||t1t(t,r,Jx)}static getSamplesForFormat(t,r){let{format:n}=r;return t.getInternalformatParameter(36161,n,32937)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.initialize(r),Object.seal(this)}initialize(t){let{format:r,width:n=1,height:i=1,samples:o=0}=t;return yt(r,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),o!==0&&re(this.gl)?this.gl.renderbufferStorageMultisample(36161,o,r,n,i):this.gl.renderbufferStorage(36161,r,n,i),this.format=r,this.width=n,this.height=i,this.samples=o,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*Jx[this.format].bpp),this}resize(t){let{width:r,height:n}=t;return r!==this.width||n!==this.height?this.initialize({width:r,height:n,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(t){this.gl.bindRenderbuffer(36161,t)}_syncHandle(t){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(t){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,t)}}const e1t=256,r1t=1024,n1t=16384,Qx=6144,tL=6145,eL=6146,rL=34041,a$="clear: bad arguments";function hE(e){let{framebuffer:t=null,color:r=null,depth:n=null,stencil:i=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o={};t&&(o.framebuffer=t);let s=0;r&&(s|=n1t,r!==!0&&(o.clearColor=r)),n&&(s|=e1t,n!==!0&&(o.clearDepth=n)),i&&(s|=r1t,n!==!0&&(o.clearStencil=n)),yt(s!==0,a$),ai(e,o,()=>{e.clear(s)})}function i1t(e){let{framebuffer:t=null,buffer:r=Qx,drawBuffer:n=0,value:i=[0,0,0,0]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};jr(e),ai(e,{framebuffer:t},()=>{switch(r){case Qx:switch(i.constructor){case Int32Array:e.clearBufferiv(r,n,i);break;case Uint32Array:e.clearBufferuiv(r,n,i);break;case Float32Array:default:e.clearBufferfv(r,n,i)}break;case tL:e.clearBufferfv(tL,0,[i]);break;case eL:e.clearBufferiv(eL,0,[i]);break;case rL:const[o,s]=i;e.clearBufferfi(rL,0,o,s);break;default:yt(!1,a$)}})}function o1t(e){switch(e){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return yt(!1),0}}function M_(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{sourceX:r=0,sourceY:n=0,sourceFormat:i=6408}=t;let{sourceAttachment:o=36064,target:s=null,sourceWidth:a,sourceHeight:l,sourceType:u}=t;const{framebuffer:c,deleteFramebuffer:f}=l$(e);yt(c);const{gl:h,handle:d,attachments:p}=c;a=a||c.width,l=l||c.height,o===36064&&d===null&&(o=1028),yt(p[o]),u=u||p[o].type,s=a1t(s,u,i,a,l),u=u||Q3(s);const v=h.bindFramebuffer(36160,d);return h.readPixels(r,n,a,l,i,u,s),h.bindFramebuffer(36160,v||null),f&&c.delete(),s}function nL(e){let{sourceAttachment:t=36064,targetMaxHeight:r=Number.MAX_SAFE_INTEGER}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=M_(e,{sourceAttachment:t}),{width:i,height:o}=e;for(;o>r;)({data:n,width:i,height:o}=Wmt({data:n,width:i,height:o}));Umt({data:n,width:i,height:o});const s=document.createElement("canvas");s.width=i,s.height=o;const a=s.getContext("2d"),l=a.createImageData(i,o);return l.data.set(n),a.putImageData(l,0,0),s.toDataURL()}function s1t(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{sourceX:n=0,sourceY:i=0,targetMipmaplevel:o=0,targetInternalFormat:s=6408}=r;let{targetX:a,targetY:l,targetZ:u,width:c,height:f}=r;const{framebuffer:h,deleteFramebuffer:d}=l$(e);yt(h);const{gl:p,handle:v}=h,m=typeof a<"u"||typeof l<"u"||typeof u<"u";a=a||0,l=l||0,u=u||0;const g=p.bindFramebuffer(36160,v);yt(t);let _=null;if(t instanceof du&&(_=t,c=Number.isFinite(c)?c:_.width,f=Number.isFinite(f)?f:_.height,_.bind(0),t=_.target),!m)p.copyTexImage2D(t,o,s,n,i,c,f,0);else switch(t){case 3553:case 34067:p.copyTexSubImage2D(t,o,a,l,n,i,c,f);break;case 35866:case 32879:jr(p).copyTexSubImage3D(t,o,a,l,u,n,i,c,f);break}return _&&_.unbind(),p.bindFramebuffer(36160,g||null),d&&h.delete(),_}function l$(e){return e instanceof ar?{framebuffer:e,deleteFramebuffer:!1}:{framebuffer:g1t(e),deleteFramebuffer:!0}}function a1t(e,t,r,n,i){if(e)return e;t=t||5121;const o=wp(t,{clamped:!1}),s=o1t(r);return new o(n*i*s)}const Be={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function l1t(e){const t=new wn(e,{format:6408,type:5126,dataFormat:6408}),r=new ar(e,{id:"test-framebuffer",check:!1,attachments:{[36064]:t}}),n=r.getStatus();return t.delete(),r.delete(),n===36053}const u$={[Be.WEBGL2]:[!1,!0],[Be.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[Be.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[Be.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[Be.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[Be.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[Be.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[Be.FLOAT_BLEND]:["EXT_float_blend"],[Be.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[Be.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[Be.TEXTURE_FLOAT]:["OES_texture_float",!0],[Be.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[Be.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[Be.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[Be.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[Be.COLOR_ATTACHMENT_RGBA32F]:[l1t,"EXT_color_buffer_float"],[Be.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[Be.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[Be.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[Be.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[Be.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[Be.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]},u1t=2;function c1t(e,t){return dE(e,t)}function dE(e,t){return t=Array.isArray(t)?t:[t],t.every(r=>c$(e,r))}function f1t(e){e.luma=e.luma||{},e.luma.caps=e.luma.caps||{};for(const t in u$)e.luma.caps[t]===void 0&&(e.luma.caps[t]=c$(e,t));return e.luma.caps}function c$(e,t){return e.luma=e.luma||{},e.luma.caps=e.luma.caps||{},e.luma.caps[t]===void 0&&(e.luma.caps[t]=h1t(e,t)),e.luma.caps[t]||Ot.log(u1t,"Feature: ".concat(t," not supported"))(),e.luma.caps[t]}function h1t(e,t){const r=u$[t];yt(r,t);let n;const i=re(e)&&r[1]||r[0];if(typeof i=="function")n=i(e);else if(Array.isArray(i)){n=!0;for(const o of i)n=n&&Boolean(e.getExtension(o))}else typeof i=="string"?n=Boolean(e.getExtension(i)):typeof i=="boolean"?n=i:yt(!1);return n}const iL="Multiple render targets not supported";class ar extends Is{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{colorBufferFloat:n,colorBufferHalfFloat:i}=r;let o=!0;return n&&(o=Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("WEBGL_color_buffer_float")||t.getExtension("OES_texture_float"))),i&&(o=o&&Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("EXT_color_buffer_half_float"))),o}static getDefaultFramebuffer(t){return t.luma=t.luma||{},t.luma.defaultFramebuffer=t.luma.defaultFramebuffer||new ar(t,{id:"default-framebuffer",handle:null,attachments:{}}),t.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const t=jr(this.gl);return t.getParameter(t.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const t=jr(this.gl);return t.getParameter(t.MAX_DRAW_BUFFERS)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(r),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(t){let{width:r=1,height:n=1,attachments:i=null,color:o=!0,depth:s=!0,stencil:a=!1,check:l=!0,readBuffer:u=void 0,drawBuffers:c=void 0}=t;if(yt(r>=0&&n>=0,"Width and height need to be integers"),this.width=r,this.height=n,i)for(const f in i){const h=i[f];(Array.isArray(h)?h[0]:h).resize({width:r,height:n})}else i=this._createDefaultAttachments(o,s,a,r,n);this.update({clearAttachments:!0,attachments:i,readBuffer:u,drawBuffers:c}),i&&l&&this.checkStatus()}delete(){for(const t of this.ownResources)t.delete();return super.delete(),this}update(t){let{attachments:r={},readBuffer:n,drawBuffers:i,clearAttachments:o=!1,resizeAttachments:s=!0}=t;this.attach(r,{clearAttachments:o,resizeAttachments:s});const{gl:a}=this,l=a.bindFramebuffer(36160,this.handle);return n&&this._setReadBuffer(n),i&&this._setDrawBuffers(i),a.bindFramebuffer(36160,l||null),this}resize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{width:r,height:n}=t;if(this.handle===null)return yt(r===void 0&&n===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;r===void 0&&(r=this.gl.drawingBufferWidth),n===void 0&&(n=this.gl.drawingBufferHeight),r!==this.width&&n!==this.height&&Ot.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(r,"x").concat(n))();for(const i in this.attachments)this.attachments[i].resize({width:r,height:n});return this.width=r,this.height=n,this}attach(t){let{clearAttachments:r=!1,resizeAttachments:n=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i={};r&&Object.keys(this.attachments).forEach(s=>{i[s]=null}),Object.assign(i,t);const o=this.gl.bindFramebuffer(36160,this.handle);for(const s in i){yt(s!==void 0,"Misspelled framebuffer binding point?");const a=Number(s),l=i[a];let u=l;if(!u)this._unattach(a);else if(u instanceof Dc)this._attachRenderbuffer({attachment:a,renderbuffer:u});else if(Array.isArray(l)){const[c,f=0,h=0]=l;u=c,this._attachTexture({attachment:a,texture:c,layer:f,level:h})}else this._attachTexture({attachment:a,texture:u,layer:0,level:0});n&&u&&u.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,o||null),Object.assign(this.attachments,t),Object.keys(this.attachments).filter(s=>!this.attachments[s]).forEach(s=>{delete this.attachments[s]})}checkStatus(){const t=this.getStatus();if(t!==36053)throw new Error(p1t(t));return this}getStatus(){const{gl:t}=this,r=t.bindFramebuffer(36160,this.handle),n=t.checkFramebufferStatus(36160);return t.bindFramebuffer(36160,r||null),n}clear(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{color:r,depth:n,stencil:i,drawBuffers:o=[]}=t,s=this.gl.bindFramebuffer(36160,this.handle);return(r||n||i)&&hE(this.gl,{color:r,depth:n,stencil:i}),o.forEach((a,l)=>{i1t(this.gl,{drawBuffer:l,value:a})}),this.gl.bindFramebuffer(36160,s||null),this}readPixels(){return Ot.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return Ot.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return Ot.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return Ot.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return Ot.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return Ot.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(t){let{attachments:r=[],x:n=0,y:i=0,width:o,height:s}=t;const a=jr(this.gl),l=a.bindFramebuffer(36008,this.handle);return n===0&&i===0&&o===void 0&&s===void 0?a.invalidateFramebuffer(36008,r):a.invalidateFramebuffer(36008,r,n,i,o,s),a.bindFramebuffer(36008,l),this}getAttachmentParameter(t,r,n){let i=this._getAttachmentParameterFallback(r);return i===null&&(this.gl.bindFramebuffer(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,t,r),this.gl.bindFramebuffer(36160,null)),n&&i>1e3&&(i=Pa(this.gl,i)),i}getAttachmentParameters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:36064,r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const i={};for(const o of n){const s=r?Pa(this.gl,o):o;i[s]=this.getAttachmentParameter(t,o,r)}return i}getParameters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const r=Object.keys(this.attachments),n={};for(const i of r){const o=Number(i),s=t?Pa(this.gl,o):o;n[s]=this.getAttachmentParameters(o,t)}return n}show(){return typeof window<"u"&&window.open(nL(this),"luma-debug-texture"),this}log(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(t>Ot.level||typeof window>"u")return this;r=r||"Framebuffer ".concat(this.id);const n=nL(this,{targetMaxHeight:100});return Ot.image({logLevel:t,message:r,image:n},r)(),this}bind(){let{target:t=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(t,this.handle),this}unbind(){let{target:t=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(t,null),this}_createDefaultAttachments(t,r,n,i,o){let s=null;return t&&(s=s||{},s[36064]=new wn(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:i,height:o,mipmaps:!1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.ownResources.push(s[36064])),r&&n?(s=s||{},s[33306]=new Dc(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:i,height:111}),this.ownResources.push(s[33306])):r?(s=s||{},s[36096]=new Dc(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:i,height:o}),this.ownResources.push(s[36096])):n&&yt(!1),s}_unattach(t){const r=this.attachments[t];!r||(r instanceof Dc?this.gl.framebufferRenderbuffer(36160,t,36161,null):this.gl.framebufferTexture2D(36160,t,3553,null,0),delete this.attachments[t])}_attachRenderbuffer(t){let{attachment:r=36064,renderbuffer:n}=t;const{gl:i}=this;i.framebufferRenderbuffer(36160,r,36161,n.handle),this.attachments[r]=n}_attachTexture(t){let{attachment:r=36064,texture:n,layer:i,level:o}=t;const{gl:s}=this;switch(s.bindTexture(n.target,n.handle),n.target){case 35866:case 32879:jr(s).framebufferTextureLayer(36160,r,n.target,o,i);break;case 34067:const l=d1t(i);s.framebufferTexture2D(36160,r,l,n.handle,o);break;case 3553:s.framebufferTexture2D(36160,r,3553,n.handle,o);break;default:yt(!1,"Illegal texture type")}s.bindTexture(n.target,null),this.attachments[r]=n}_setReadBuffer(t){const r=Wgt(this.gl);r?r.readBuffer(t):yt(t===36064||t===1029,iL),this.readBuffer=t}_setDrawBuffers(t){const{gl:r}=this,n=jr(r);if(n)n.drawBuffers(t);else{const i=r.getExtension("WEBGL_draw_buffers");i?i.drawBuffersWEBGL(t):yt(t.length===1&&(t[0]===36064||t[0]===1029),iL)}this.drawBuffers=t}_getAttachmentParameterFallback(t){const r=f1t(this.gl);switch(t){case 36052:return r.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return r.WEBGL2?null:8;case 33297:return r.WEBGL2?null:5125;case 33296:return!r.WEBGL2&&!r.EXT_sRGB?9729:null;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(t){return this.gl.bindFramebuffer(36160,t)}}function d1t(e){return e<34069?e+34069:e}function p1t(e){return(ar.STATUS||{})[e]||"Framebuffer error ".concat(e)}const v1t=[36049,36048,33296,33298,33299,33300,33301,33302,33303];ar.ATTACHMENT_PARAMETERS=v1t;function f$(e,t){yt(e instanceof wn||e instanceof s$||e instanceof Qmt);const r=e.constructor,{gl:n,width:i,height:o,format:s,type:a,dataFormat:l,border:u,mipmaps:c}=e,f=Object.assign({width:i,height:o,format:s,type:a,dataFormat:l,border:u,mipmaps:c},t);return new r(n,f)}function g1t(e,t){const{gl:r,width:n,height:i,id:o}=e;return new ar(r,Object.assign({},t,{id:"framebuffer-for-".concat(o),width:n,height:i,attachments:{[36064]:e}}))}function sm(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"unnamed";const r=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,n=e.match(r);return n?n[1]:t}const m1t=35632,_1t=35633;function y1t(e){switch(e){case m1t:return"fragment";case _1t:return"vertex";default:return"unknown type"}}function b1t(e,t,r,n){const i=e.split(/\r?\n/),o={},s={},a=n||sm(t)||"(unnamed)",l="".concat(y1t(r)," shader ").concat(a);for(let c=0;c<i.length;c++){const f=i[c];if(f.length<=1)continue;const h=f.split(":"),d=h[0],p=parseInt(h[2],10);if(isNaN(p))throw new Error("GLSL compilation error in ".concat(l,": ").concat(e));d!=="WARNING"?o[p]=f:s[p]=f}const u=w1t(t);return{shaderName:l,errors:oL(o,u),warnings:oL(s,u)}}function oL(e,t){let r="";for(let n=0;n<t.length;n++){const i=t[n];if(!(!e[n+3]&&!e[n+2]&&!e[n+1])&&(r+="".concat(i,`
`),e[n+1])){const o=e[n+1],s=o.split(":",3),a=s[0],l=parseInt(s[1],10)||0,u=o.substring(s.join(":").length+1).trim();r+=h$("^^^ ".concat(a,": ").concat(u,`

`),l)}}return r}function w1t(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:": ";const n=e.split(/\r?\n/),i=String(n.length+t-1).length;return n.map((o,s)=>{const a=String(s+t),l=a.length;return h$(a,i-l)+r+o})}function h$(e,t){let r="";for(let n=0;n<t;++n)r+=" ";return"".concat(r).concat(e)}function d$(e){let t=100;const r=e.match(/[^\s]+/g);if(r.length>=2&&r[0]==="#version"){const n=parseInt(r[1],10);Number.isFinite(n)&&(t=n)}return t}const S1t="Shader: GLSL source code must be a JavaScript string";class Sp extends Is{get[Symbol.toStringTag](){return"Shader"}static getTypeName(t){switch(t){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return yt(!1),"unknown"}}constructor(t,r){A_(t),yt(typeof r.source=="string",S1t);const n=sm(r.source,null)||r.id||Da("unnamed ".concat(Sp.getTypeName(r.shaderType)));super(t,{id:n}),this.shaderType=r.shaderType,this.source=r.source,this.initialize(r)}initialize(t){let{source:r}=t;const n=sm(r,null);n&&(this.id=Da(n)),this._compile(r)}getParameter(t){return this.gl.getShaderParameter(this.handle,t)}toString(){return"".concat(Sp.getTypeName(this.shaderType),":").concat(this.id)}getName(){return sm(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const t=this.gl.getExtension("WEBGL_debug_shaders");return t?t.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.source;if(t.startsWith("#version ")||(t=`#version 100
`.concat(t)),this.source=t,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const n=this.gl.getShaderInfoLog(this.handle),{shaderName:i,errors:o,warnings:s}=b1t(n,this.source,this.shaderType,this.id);throw Ot.error("GLSL compilation errors in ".concat(i,`
`).concat(o))(),Ot.warn("GLSL compilation warnings in ".concat(i,`
`).concat(s))(),new Error("GLSL compilation errors in ".concat(i))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class kb extends Sp{get[Symbol.toStringTag](){return"VertexShader"}constructor(t,r){typeof r=="string"&&(r={source:r}),super(t,Object.assign({},r,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class Pb extends Sp{get[Symbol.toStringTag](){return"FragmentShader"}constructor(t,r){typeof r=="string"&&(r={source:r}),super(t,Object.assign({},r,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const T1t={[5126]:ze.bind(null,"uniform1fv",En,1,zr),[35664]:ze.bind(null,"uniform2fv",En,2,zr),[35665]:ze.bind(null,"uniform3fv",En,3,zr),[35666]:ze.bind(null,"uniform4fv",En,4,zr),[5124]:ze.bind(null,"uniform1iv",Hs,1,zr),[35667]:ze.bind(null,"uniform2iv",Hs,2,zr),[35668]:ze.bind(null,"uniform3iv",Hs,3,zr),[35669]:ze.bind(null,"uniform4iv",Hs,4,zr),[35670]:ze.bind(null,"uniform1iv",Hs,1,zr),[35671]:ze.bind(null,"uniform2iv",Hs,2,zr),[35672]:ze.bind(null,"uniform3iv",Hs,3,zr),[35673]:ze.bind(null,"uniform4iv",Hs,4,zr),[35674]:ze.bind(null,"uniformMatrix2fv",En,4,qo),[35675]:ze.bind(null,"uniformMatrix3fv",En,9,qo),[35676]:ze.bind(null,"uniformMatrix4fv",En,16,qo),[35678]:kr,[35680]:kr,[5125]:ze.bind(null,"uniform1uiv",Sv,1,zr),[36294]:ze.bind(null,"uniform2uiv",Sv,2,zr),[36295]:ze.bind(null,"uniform3uiv",Sv,3,zr),[36296]:ze.bind(null,"uniform4uiv",Sv,4,zr),[35685]:ze.bind(null,"uniformMatrix2x3fv",En,6,qo),[35686]:ze.bind(null,"uniformMatrix2x4fv",En,8,qo),[35687]:ze.bind(null,"uniformMatrix3x2fv",En,6,qo),[35688]:ze.bind(null,"uniformMatrix3x4fv",En,12,qo),[35689]:ze.bind(null,"uniformMatrix4x2fv",En,8,qo),[35690]:ze.bind(null,"uniformMatrix4x3fv",En,12,qo),[35678]:kr,[35680]:kr,[35679]:kr,[35682]:kr,[36289]:kr,[36292]:kr,[36293]:kr,[36298]:kr,[36299]:kr,[36300]:kr,[36303]:kr,[36306]:kr,[36307]:kr,[36308]:kr,[36311]:kr},k1t={},P1t={},E1t={},sL=[0];function pE(e,t,r,n){t===1&&typeof e=="boolean"&&(e=e?1:0),Number.isFinite(e)&&(sL[0]=e,e=sL);const i=e.length;if(i%t&&Ot.warn("Uniform size should be multiples of ".concat(t),e)(),e instanceof r)return e;let o=n[i];o||(o=new r(i),n[i]=o);for(let s=0;s<i;s++)o[s]=e[s];return o}function En(e,t){return pE(e,t,Float32Array,k1t)}function Hs(e,t){return pE(e,t,Int32Array,P1t)}function Sv(e,t){return pE(e,t,Uint32Array,E1t)}function aL(e,t,r){const n=T1t[r.type];if(!n)throw new Error("Unknown GLSL uniform type ".concat(r.type));return n().bind(null,e,t)}function C1t(e){if(e[e.length-1]!=="]")return{name:e,length:1,isArray:!1};const t=/([^[]*)(\[[0-9]+\])?/,r=e.match(t);if(!r||r.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(e));return{name:r[1],length:r[2]||1,isArray:Boolean(r[2])}}function A1t(e,t,r){for(const n in e){const i=e[n];if((!r||Boolean(r[n]))&&!M1t(i))throw t=t?"".concat(t," "):"",console.error("".concat(t," Bad uniform ").concat(n),i),new Error("".concat(t," Bad uniform ").concat(n))}return!0}function M1t(e){return Array.isArray(e)||ArrayBuffer.isView(e)?L1t(e):isFinite(e)||e===!0||e===!1||e instanceof du||e instanceof Dc?!0:e instanceof ar?Boolean(e.texture):!1}function x1t(e,t,r){if(Array.isArray(r)||ArrayBuffer.isView(r))if(e[t]){const n=e[t];for(let i=0,o=r.length;i<o;++i)n[i]=r[i]}else e[t]=r.slice();else e[t]=r}function L1t(e){if(e.length===0)return!1;const t=Math.min(e.length,16);for(let r=0;r<t;++r)if(!Number.isFinite(e[r]))return!1;return!0}function kr(){let e=null;return(t,r,n)=>{const i=e!==n;return i&&(t.uniform1i(r,n),e=n),i}}function ze(e,t,r,n){let i=null,o=null;return(s,a,l)=>{const u=t(l,r),c=u.length;let f=!1;if(i===null)i=new Float32Array(c),o=c,f=!0;else{yt(o===c,"Uniform length cannot change.");for(let h=0;h<c;++h)if(u[h]!==i[h]){f=!0;break}}return f&&(n(s,e,a,u),i.set(u)),f}}function zr(e,t,r,n){e[t](r,n)}function qo(e,t,r,n){e[t](r,!1,n)}const I1t=5120,O1t=5121,R1t=5122,D1t=5123,lL=0,Tv=1,N1t=2,F1t=3,kv=4,z1t=5,B1t=6,lr=5126,$1t=35664,V1t=35665,U1t=35666,Ih=5124,W1t=35667,j1t=35668,G1t=35669,Oh=5125,H1t=36294,X1t=36295,Y1t=36296,q1t=35670,Z1t=35671,K1t=35672,J1t=35673,Q1t=35674,t_t=35675,e_t=35676,r_t=35685,n_t=35686,i_t=35687,o_t=35688,s_t=35689,a_t=35690,rT={[lr]:[lr,1,"float"],[$1t]:[lr,2,"vec2"],[V1t]:[lr,3,"vec3"],[U1t]:[lr,4,"vec4"],[Ih]:[Ih,1,"int"],[W1t]:[Ih,2,"ivec2"],[j1t]:[Ih,3,"ivec3"],[G1t]:[Ih,4,"ivec4"],[Oh]:[Oh,1,"uint"],[H1t]:[Oh,2,"uvec2"],[X1t]:[Oh,3,"uvec3"],[Y1t]:[Oh,4,"uvec4"],[q1t]:[lr,1,"bool"],[Z1t]:[lr,2,"bvec2"],[K1t]:[lr,3,"bvec3"],[J1t]:[lr,4,"bvec4"],[Q1t]:[lr,8,"mat2"],[r_t]:[lr,8,"mat2x3"],[n_t]:[lr,8,"mat2x4"],[t_t]:[lr,12,"mat3"],[i_t]:[lr,12,"mat3x2"],[o_t]:[lr,12,"mat3x4"],[e_t]:[lr,16,"mat4"],[s_t]:[lr,16,"mat4x2"],[a_t]:[lr,16,"mat4x3"]};function l_t(e){switch(e){case lL:return lL;case Tv:return Tv;case F1t:return Tv;case N1t:return Tv;case kv:return kv;case z1t:return kv;case B1t:return kv;default:return yt(!1),0}}function uL(e){const t=rT[e];if(!t)return null;const[r,n]=t;return{type:r,components:n}}function p$(e,t){switch(e){case I1t:case O1t:case R1t:case D1t:e=lr;break}for(const r in rT){const[n,i,o]=rT[r];if(n===e&&i===t)return{glType:r,name:o}}return null}class u_t{constructor(t){this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}getAttributeInfo(t){const r=Number(t);return Number.isFinite(r)?this.attributeInfosByLocation[r]:this.attributeInfosByName[t]||null}getAttributeLocation(t){const r=this.getAttributeInfo(t);return r?r.location:-1}getAttributeAccessor(t){const r=this.getAttributeInfo(t);return r?r.accessor:null}getVaryingInfo(t){const r=Number(t);return Number.isFinite(r)?this.varyingInfos[r]:this.varyingInfosByName[t]||null}getVaryingIndex(t){const r=this.getVaryingInfo();return r?r.location:-1}getVaryingAccessor(t){const r=this.getVaryingInfo();return r?r.accessor:null}_readAttributesFromProgram(t){const{gl:r}=t,n=r.getProgramParameter(t.handle,35721);for(let i=0;i<n;i++){const{name:o,type:s,size:a}=r.getActiveAttrib(t.handle,i),l=r.getAttribLocation(t.handle,o);l>=0&&this._addAttribute(l,o,s,a)}this.attributeInfos.sort((i,o)=>i.location-o.location)}_readVaryingsFromProgram(t){const{gl:r}=t;if(!re(r))return;const n=r.getProgramParameter(t.handle,35971);for(let i=0;i<n;i++){const{name:o,type:s,size:a}=r.getTransformFeedbackVarying(t.handle,i);this._addVarying(i,o,s,a)}this.varyingInfos.sort((i,o)=>i.location-o.location)}_addAttribute(t,r,n,i){const{type:o,components:s}=uL(n),a={type:o,size:i*s};this._inferProperties(t,r,a);const l={location:t,name:r,accessor:new Mn(a)};this.attributeInfos.push(l),this.attributeInfosByLocation[t]=l,this.attributeInfosByName[l.name]=l}_inferProperties(t,r,n){/instance/i.test(r)&&(n.divisor=1)}_addVarying(t,r,n,i){const{type:o,components:s}=uL(n),a=new Mn({type:o,size:i*s}),l={location:t,name:r,accessor:a};this.varyingInfos.push(l),this.varyingInfosByName[l.name]=l}}const cL=4,c_t=35981,f_t=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class v$ extends Is{get[Symbol.toStringTag](){return"Program"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.stubRemovedMethods("Program","v6.0",f_t),this._isCached=!1,this.initialize(r),Object.seal(this),this._setId(r.id)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{hash:r,vs:n,fs:i,varyings:o,bufferMode:s=c_t}=t;return this.hash=r||"",this.vs=typeof n=="string"?new kb(this.gl,{id:"".concat(t.id,"-vs"),source:n}):n,this.fs=typeof i=="string"?new Pb(this.gl,{id:"".concat(t.id,"-fs"),source:i}):i,yt(this.vs instanceof kb),yt(this.fs instanceof Pb),this.uniforms={},this._textureUniforms={},o&&o.length>0&&(jr(this.gl),this.varyings=o,this.gl2.transformFeedbackVaryings(this.handle,o,s)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new u_t(this),this.setProps(t)}delete(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isCached?this:super.delete(t)}setProps(t){return"uniforms"in t&&this.setUniforms(t.uniforms),this}draw(t){let{logPriority:r,drawMode:n=4,vertexCount:i,offset:o=0,start:s,end:a,isIndexed:l=!1,indexType:u=5123,instanceCount:c=0,isInstanced:f=c>0,vertexArray:h=null,transformFeedback:d,framebuffer:p,parameters:v={},uniforms:m,samplers:g}=t;if((m||g)&&(Ot.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(m||{})),Ot.priority>=r){const _=p?p.id:"default",b="mode=".concat(Pa(this.gl,n)," verts=").concat(i," ")+"instances=".concat(c," indexType=").concat(Pa(this.gl,u)," ")+"isInstanced=".concat(f," isIndexed=").concat(l," ")+"Framebuffer=".concat(_);Ot.log(r,b)()}return yt(h),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||i===0||f&&c===0?!1:(h.bindForDraw(i,c,()=>{if(p!==void 0&&(v=Object.assign({},v,{framebuffer:p})),d){const _=l_t(n);d.begin(_)}this._bindTextures(),ai(this.gl,v,()=>{l&&f?this.gl2.drawElementsInstanced(n,i,u,o,c):l&&re(this.gl)&&!isNaN(s)&&!isNaN(a)?this.gl2.drawRangeElements(n,s,a,i,u,o):l?this.gl.drawElements(n,i,u,o):f?this.gl2.drawArraysInstanced(n,o,i,c):this.gl.drawArrays(n,o,i)}),d&&d.end()}),!0)}setUniforms(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ot.priority>=2&&A1t(t,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const r in t){const n=t[r],i=this._uniformSetters[r];if(i){let o=n,s=!1;if(o instanceof ar&&(o=o.texture),o instanceof du)if(s=this.uniforms[r]!==n,s){i.textureIndex===void 0&&(i.textureIndex=this._textureIndexCounter++);const a=o,{textureIndex:l}=i;a.bind(l),o=l,this._textureUniforms[r]=a}else o=i.textureIndex;else this._textureUniforms[r]&&delete this._textureUniforms[r];(i(o)||s)&&x1t(this.uniforms,r,n)}}return this}_areTexturesRenderable(){let t=!0;for(const r in this._textureUniforms){const n=this._textureUniforms[r];n.update(),t=t&&n.loaded}return t}_bindTextures(){for(const t in this._textureUniforms){const r=this._uniformSetters[t].textureIndex;this._textureUniforms[t].bind(r)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(t){const r=this.gl.getAttachedShaders(t),n={};for(const i of r)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new kb({handle:i});break;case 35632:n.fs=new Pb({handle:i});break}return n}_getParameter(t){return this.gl.getProgramParameter(this.handle,t)}_setId(t){if(!t){const r=this._getName();this.id=Da(r)}}_getName(){let t=this.vs.getName()||this.fs.getName();return t=t.replace(/shader/i,""),t=t?"".concat(t,"-program"):"program",t}_compileAndLink(){const{gl:t}=this;if(t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),Ot.time(cL,"linkProgram for ".concat(this._getName()))(),t.linkProgram(this.handle),Ot.timeEnd(cL,"linkProgram for ".concat(this._getName()))(),t.debug||Ot.level>0){if(!t.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(t.getProgramInfoLog(this.handle)));if(t.validateProgram(this.handle),!t.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(t.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:t}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let r=0;r<this._uniformCount;r++){const n=this.gl.getActiveUniform(this.handle,r),{name:i}=C1t(n.name);let o=t.getUniformLocation(this.handle,i);if(this._uniformSetters[i]=aL(t,o,n),n.size>1)for(let s=0;s<n.size;s++)o=t.getUniformLocation(this.handle,"".concat(i,"[").concat(s,"]")),this._uniformSetters["".concat(i,"[").concat(s,"]")]=aL(t,o,n)}this._textureIndexCounter=0}getActiveUniforms(t,r){return this.gl2.getActiveUniforms(this.handle,t,r)}getUniformBlockIndex(t){return this.gl2.getUniformBlockIndex(this.handle,t)}getActiveUniformBlockParameter(t,r){return this.gl2.getActiveUniformBlockParameter(this.handle,t,r)}uniformBlockBinding(t,r){this.gl2.uniformBlockBinding(this.handle,t,r)}}const h_t=34918,d_t=34919,p_t=35007,v_t=36795,g_t=35976,m_t=35887,__t=36202;class f1 extends Is{get[Symbol.toStringTag](){return"Query"}static isSupported(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const n=re(t),i=dE(t,Be.TIMER_QUERY);let o=n||i;for(const s of r)switch(s){case"queries":o=o&&n;break;case"timers":o=o&&i;break;default:yt(!1)}return o}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(p_t)}beginOcclusionQuery(){let{conservative:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.begin(t?__t:m_t)}beginTransformFeedbackQuery(){return this.begin(g_t)}begin(t){return this._queryPending?this:(this.target=t,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;const t=this.gl2.getQueryParameter(this.handle,d_t);return t&&(this._queryPending=!1),t}isTimerDisjoint(){return this.gl2.getParameter(v_t)}getResult(){return this.gl2.getQueryParameter(this.handle,h_t)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let r=0;return this._pollingPromise=new Promise((n,i)=>{const o=()=>{this.isResultAvailable()?(n(this.getResult()),this._pollingPromise=null):r++>t?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(o)};requestAnimationFrame(o)}),this._pollingPromise}_createHandle(){return f1.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}class g$ extends Is{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(t){return re(t)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};jr(t),super(t,r),this.initialize(r),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,df(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(t),this}setProps(t){"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"bindOnUse"in t&&(t=t.bindOnUse),"buffers"in t&&this.setBuffers(t.buffers)}setBuffers(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.bind(()=>{for(const r in t)this.setBuffer(r,t[r])}),this}setBuffer(t,r){const n=this._getVaryingIndex(t),{buffer:i,byteSize:o,byteOffset:s}=this._getBufferParams(r);return n<0?(this.unused[t]=i,Ot.warn("".concat(this.id," unused varying buffer ").concat(t))(),this):(this.buffers[n]=r,this.bindOnUse||this._bindBuffer(n,i,s,o),this)}begin(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(t),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(t){let r,n,i;return t instanceof Ee?i=t:(i=t.buffer,n=t.byteSize,r=t.byteOffset),(r!==void 0||n!==void 0)&&(r=r||0,n=n||i.byteLength-r),{buffer:i,byteOffset:r,byteSize:n}}_getVaryingInfo(t){return this.configuration&&this.configuration.getVaryingInfo(t)}_getVaryingIndex(t){if(this.configuration)return this.configuration.getVaryingInfo(t).location;const r=Number(t);return Number.isFinite(r)?r:-1}_bindBuffers(){if(this.bindOnUse)for(const t in this.buffers){const{buffer:r,byteSize:n,byteOffset:i}=this._getBufferParams(this.buffers[t]);this._bindBuffer(t,r,i,n)}}_unbindBuffers(){if(this.bindOnUse)for(const t in this.buffers)this._bindBuffer(t,null)}_bindBuffer(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;const o=r&&r.handle;return!o||i===void 0?this.gl.bindBufferBase(35982,t,o):this.gl.bindBufferRange(35982,t,o,n,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(t){this.gl.bindTransformFeedback(36386,this.handle)}}let Pv=null;function y_t(e){return(!Pv||Pv.byteLength<e)&&(Pv=new ArrayBuffer(e)),Pv}function b_t(e,t){const r=y_t(e.BYTES_PER_ELEMENT*t);return new e(r,0,t)}function w_t(e){let{target:t,source:r,start:n=0,count:i=1}=e;const o=r.length,s=i*o;let a=0;for(let l=n;a<o;a++)t[l++]=r[a];for(;a<s;)a<s-a?(t.copyWithin(n+a,n,n+a),a*=2):(t.copyWithin(n+a,n,n+s-a),a=s);return t}const S_t="elements must be GL.ELEMENT_ARRAY_BUFFER";class An extends Is{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(t){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).constantAttributeZero?re(t)||RB()==="Chrome":!0}static getDefaultArray(t){return t.luma=t.luma||{},t.luma.defaultVertexArray||(t.luma.defaultVertexArray=new An(t,{handle:null,isDefaultArray:!0})),t.luma.defaultVertexArray}static getMaxAttributes(t){return An.MAX_ATTRIBUTES=An.MAX_ATTRIBUTES||t.getParameter(34921),An.MAX_ATTRIBUTES}static setConstant(t,r,n){switch(n.constructor){case Float32Array:An._setConstantFloatArray(t,r,n);break;case Int32Array:An._setConstantIntArray(t,r,n);break;case Uint32Array:An._setConstantUintArray(t,r,n);break;default:yt(!1)}}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=r.id||r.program&&r.program.id;super(t,Object.assign({},r,{id:n})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=r.isDefaultArray||!1,this.gl2=t,this.initialize(r),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return An.getMaxAttributes(this.gl)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.setProps(t)}setProps(t){return this}setElementBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return yt(!t||t.target===34963,S_t),this.bind(()=>{this.gl.bindBuffer(34963,t?t.handle:null)}),this}setBuffer(t,r,n){if(r.target===34963)return this.setElementBuffer(r,n);const{size:i,type:o,stride:s,offset:a,normalized:l,integer:u,divisor:c}=n,{gl:f,gl2:h}=this;return t=Number(t),this.bind(()=>{f.bindBuffer(34962,r.handle),u?(yt(re(f)),h.vertexAttribIPointer(t,i,o,s,a)):f.vertexAttribPointer(t,i,o,l,s,a),f.enableVertexAttribArray(t),h.vertexAttribDivisor(t,c||0)}),this}enable(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return!r&&t===0&&!An.isSupported(this.gl,{constantAttributeZero:!0})||(t=Number(t),this.bind(()=>r?this.gl.enableVertexAttribArray(t):this.gl.disableVertexAttribArray(t))),this}getConstantBuffer(t,r){const n=this._normalizeConstantArrayValue(r),i=n.byteLength*t,o=n.length*t;let s=!this.buffer;if(this.buffer=this.buffer||new Ee(this.gl,i),s=s||this.buffer.reallocate(i),s=s||!this._compareConstantArrayValues(n,this.bufferValue),s){const a=b_t(r.constructor,o);w_t({target:a,source:n,start:0,count:o}),this.buffer.subData(a),this.bufferValue=r}return this.buffer}_normalizeConstantArrayValue(t){return Array.isArray(t)?new Float32Array(t):t}_compareConstantArrayValues(t,r){if(!t||!r||t.length!==r.length||t.constructor!==r.constructor)return!1;for(let n=0;n<t.length;++n)if(t[n]!==r[n])return!1;return!0}static _setConstantFloatArray(t,r,n){switch(n.length){case 1:t.vertexAttrib1fv(r,n);break;case 2:t.vertexAttrib2fv(r,n);break;case 3:t.vertexAttrib3fv(r,n);break;case 4:t.vertexAttrib4fv(r,n);break;default:yt(!1)}}static _setConstantIntArray(t,r,n){switch(yt(re(t)),n.length){case 1:t.vertexAttribI1iv(r,n);break;case 2:t.vertexAttribI2iv(r,n);break;case 3:t.vertexAttribI3iv(r,n);break;case 4:t.vertexAttribI4iv(r,n);break;default:yt(!1)}}static _setConstantUintArray(t,r,n){switch(yt(re(t)),n.length){case 1:t.vertexAttribI1uiv(r,n);break;case 2:t.vertexAttribI2uiv(r,n);break;case 3:t.vertexAttribI3uiv(r,n);break;case 4:t.vertexAttribI4uiv(r,n);break;default:yt(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(t){return this.gl2.deleteVertexArray(t),[this.elements]}_bindHandle(t){this.gl2.bindVertexArray(t)}_getParameter(t,r){let{location:n}=r;return yt(Number.isFinite(n)),this.bind(()=>{switch(t){case 34373:return this.gl.getVertexAttribOffset(n,t);default:return this.gl.getVertexAttrib(n,t)}})}}const T_t="VertexArray: attributes must be Buffers or constants (i.e. typed array)",k_t=/^(.+)__LOCATION_([0-9]+)$/,P_t=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class E_t{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=r.id||r.program&&r.program.id;this.id=n,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new An(t),r$(this,"VertexArray","v6.0",P_t),this.initialize(r),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(t)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:t}=this.vertexArrayObject;return this.values=new Array(t).fill(null),this.accessors=new Array(t).fill(null),this.unused={},this.drawParams=null,this}setProps(t){return"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"attributes"in t&&this.setAttributes(t.attributes),"elements"in t&&this.setElementBuffer(t.elements),"bindOnUse"in t&&(t=t.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(t){return Object.assign(this.attributes,t),this.vertexArrayObject.bind(()=>{for(const r in t){const n=t[r];this._setAttribute(r,n)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.elements=t,this.elementsAccessor=r,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(t,r),this}setBuffer(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(r.target===34963)return this.setElementBuffer(r,n);const{location:i,accessor:o}=this._resolveLocationAndAccessor(t,r,r.accessor,n);return i>=0&&(this.values[i]=r,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,r,o)),this}setConstant(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{location:i,accessor:o}=this._resolveLocationAndAccessor(t,r,Object.assign({size:r.length},n));return i>=0&&(r=this.vertexArrayObject._normalizeConstantArrayValue(r),this.values[i]=r,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Ee(this.gl,{accessor:{size:4}});for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this.values[t]instanceof Ee&&(this.gl.disableVertexAttribArray(t),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(t,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++){const r=this.values[t];r instanceof Ee&&this.setBuffer(t,r)}}),this}bindForDraw(t,r,n){let i;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(t,r),i=n()}),i}_resolveLocationAndAccessor(t,r,n,i){const o={location:-1,accessor:null},{location:s,name:a}=this._getAttributeIndex(t);if(!Number.isFinite(s)||s<0)return this.unused[t]=r,Ot.once(3,()=>"unused value ".concat(t," in ").concat(this.id))(),o;const l=this._getAttributeInfo(a||s);if(!l)return o;const u=this.accessors[s]||{},c=Mn.resolve(l.accessor,u,n,i),{size:f,type:h}=c;return yt(Number.isFinite(f)&&Number.isFinite(h)),{location:s,accessor:c}}_getAttributeInfo(t){return this.configuration&&this.configuration.getAttributeInfo(t)}_getAttributeIndex(t){const r=Number(t);if(Number.isFinite(r))return{location:r};const n=k_t.exec(t),i=n?n[1]:t,o=n?Number(n[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(i)+o,name:i}:{location:-1}}_setAttribute(t,r){if(r instanceof Ee)this.setBuffer(t,r);else if(Array.isArray(r)&&r.length&&r[0]instanceof Ee){const n=r[0],i=r[1];this.setBuffer(t,n,i)}else if(ArrayBuffer.isView(r)||Array.isArray(r)){const n=r;this.setConstant(t,n)}else if(r.buffer instanceof Ee){const n=r;this.setBuffer(t,n.buffer,n)}else throw new Error(T_t)}_setConstantAttributes(t,r){const n=Math.max(t|0,r|0);let i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,n);for(let o=1;o<this.vertexArrayObject.MAX_ATTRIBUTES;o++)i=this.values[o],ArrayBuffer.isView(i)&&this._setConstantAttribute(o,i)}_setConstantAttributeZero(t,r){if(An.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,t);return}const n=this.vertexArrayObject.getConstantBuffer(r,t);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}_setConstantAttribute(t,r){An.setConstant(this.gl,t,r)}_updateDrawParams(){const t={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let r=0;r<this.vertexArrayObject.MAX_ATTRIBUTES;r++)this._updateDrawParamsForLocation(t,r);return this.elements&&(t.elementCount=this.elements.getElementCount(this.elements.accessor),t.isIndexed=!0,t.indexType=this.elementsAccessor.type||this.elements.accessor.type,t.indexOffset=this.elementsAccessor.offset||0),t.indexCount===1/0&&(t.indexCount=0),t.vertexCount===1/0&&(t.vertexCount=0),t.instanceCount===1/0&&(t.instanceCount=0),t}_updateDrawParamsForLocation(t,r){const n=this.values[r],i=this.accessors[r];if(!n)return;const{divisor:o}=i,s=o>0;if(t.isInstanced=t.isInstanced||s,n instanceof Ee){const a=n;if(s){const l=a.getVertexCount(i);t.instanceCount=Math.min(t.instanceCount,l)}else{const l=a.getVertexCount(i);t.vertexCount=Math.min(t.vertexCount,l)}}}setElements(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ot.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(t,r)}}function C_t(e,t){const{maxElts:r=16,size:n=1}=t;let i="[";for(let s=0;s<e.length&&s<r;++s)s>0&&(i+=",".concat(s%n===0?" ":"")),i+=Tp(e[s],t);const o=e.length>r?"...":"]";return"".concat(i).concat(o)}function Tp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=1e-16,{isInteger:n=!1}=t;if(Array.isArray(e)||ArrayBuffer.isView(e))return C_t(e,t);if(!Number.isFinite(e))return String(e);if(Math.abs(e)<r)return n?"0":"0.";if(n||Math.abs(e)>100&&Math.abs(e)<1e4)return e.toFixed(0);const i=e.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function fL(e){let{header:t="Uniforms",program:r,uniforms:n,undefinedOnly:i=!1}=e;yt(r);const o=".*_.*",s=".*Matrix",a=r._uniformSetters,l={},u=Object.keys(a).sort();let c=0;for(const d of u)!d.match(o)&&!d.match(s)&&Eb({table:l,header:t,uniforms:n,uniformName:d,undefinedOnly:i})&&c++;for(const d of u)d.match(s)&&Eb({table:l,header:t,uniforms:n,uniformName:d,undefinedOnly:i})&&c++;for(const d of u)l[d]||Eb({table:l,header:t,uniforms:n,uniformName:d,undefinedOnly:i})&&c++;let f=0;const h={};if(!i)for(const d in n){const p=n[d];l[d]||(f++,h[d]={Type:"NOT USED: ".concat(p),[t]:Tp(p)})}return{table:l,count:c,unusedTable:h,unusedCount:f}}function Eb(e){let{table:t,header:r,uniforms:n,uniformName:i,undefinedOnly:o}=e;const s=n[i],a=A_t(s);return!o||!a?(t[i]={[r]:a?Tp(s):"N/A","Uniform Type":a?s:"NOT PROVIDED"},!0):!1}function A_t(e){return e!=null}function M_t(e){let{vertexArray:t,header:r="Attributes"}=e;if(!t.configuration)return{};const n={};t.elements&&(n.ELEMENT_ARRAY_BUFFER=hL(t,t.elements,null,r));const i=t.values;for(const o in i){const s=t._getAttributeInfo(o);if(s){let a="".concat(o,": ").concat(s.name);const l=t.accessors[s.location];l&&(a="".concat(o,": ").concat(x_t(s.name,l))),n[a]=hL(t,i[o],l,r)}}return n}function hL(e,t,r,n){const{gl:i}=e;if(!t)return{[n]:"null","Format ":"N/A"};let o="NOT PROVIDED",s=1,a=0,l=0,u,c,f;if(r&&(o=r.type,s=r.size,o=String(o).replace("Array",""),u=o.indexOf("nt")!==-1),t instanceof Ee){const h=t,{data:d,changed:p}=h.getDebugData();c=p?"*":"",f=d,l=h.byteLength,a=l/d.BYTES_PER_ELEMENT/s;let v;if(r){const m=r.divisor>0;v="".concat(m?"I ":"P "," ").concat(a," (x").concat(s,"=").concat(l," bytes ").concat(Pa(i,o),")")}else u=!0,v="".concat(l," bytes");return{[n]:"".concat(c).concat(Tp(f,{size:s,isInteger:u})),"Format ":v}}return f=t,s=t.length,o=String(t.constructor.name).replace("Array",""),u=o.indexOf("nt")!==-1,{[n]:"".concat(Tp(f,{size:s,isInteger:u})," (constant)"),"Format ":"".concat(s,"x").concat(o," (constant)")}}function x_t(e,t){const{type:r,size:n}=t,i=p$(r,n);return i?"".concat(e," (").concat(i.name,")"):e}function L_t(e){const t={},r="Accessors for ".concat(e.id);for(const n of e.attributeInfos)if(n){const i=dL(n);t["in ".concat(i)]={[r]:JSON.stringify(n.accessor)}}for(const n of e.varyingInfos)if(n){const i=dL(n);t["out ".concat(i)]={[r]:JSON.stringify(n.accessor)}}return t}function dL(e){const{type:t,size:r}=e.accessor,n=p$(t,r);return n?"".concat(n.name," ").concat(e.name):e.name}const pL=Ls()&&typeof document<"u";let I_t=0;class O_t{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{onCreateContext:r=m=>t$(m),onAddHTML:n=null,onInitialize:i=()=>{},onRender:o=()=>{},onFinalize:s=()=>{},onError:a,gl:l=null,glOptions:u={},debug:c=!1,createFramebuffer:f=!1,autoResizeViewport:h=!0,autoResizeDrawingBuffer:d=!0,stats:p=Ul.get("animation-loop-".concat(I_t++))}=t;let{useDevicePixels:v=!0}=t;"useDevicePixelRatio"in t&&(Ot.deprecated("useDevicePixelRatio","useDevicePixels")(),v=t.useDevicePixelRatio),this.props={onCreateContext:r,onAddHTML:n,onInitialize:i,onRender:o,onFinalize:s,onError:a,gl:l,glOptions:u,debug:c,createFramebuffer:f},this.gl=l,this.needsRedraw=null,this.timeline=null,this.stats=p,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:h,autoResizeDrawingBuffer:d,useDevicePixels:v}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(t){return yt(typeof t=="string"),this.needsRedraw=this.needsRedraw||t,this}setProps(t){return"autoResizeViewport"in t&&(this.autoResizeViewport=t.autoResizeViewport),"autoResizeDrawingBuffer"in t&&(this.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer),"useDevicePixels"in t&&(this.useDevicePixels=t.useDevicePixels),this}start(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._running)return this;this._running=!0;const r=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(t),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=f1.isSupported(this.gl,["timers"])?new f1(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(n=>{this._running&&(this._addCallbackData(n||{}),n!==!1&&this._startLoop())});return this.props.onError&&r.catch(this.props.onError),this}redraw(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(t){return this.timeline=t,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(t=>{this._resolveNextFrame=t})),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const n=document.getElementById(t);return n?Number(n.value):r}setViewParameters(){return Ot.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const t=()=>{!this._running||(this.redraw(),this._animationFrameId=this._requestAnimationFrame(t))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(t)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=pL?new Promise((t,r)=>{if(pL&&document.readyState==="complete"){t(document);return}window.addEventListener("load",()=>{t(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(t){this.display&&(this.display.delete(),this.display.animationLoop=null),t&&(t.animationLoop=this),this.display=t}_cancelAnimationFrame(t){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(t):$mt(t)}_requestAnimationFrame(t){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(t):Bmt(t)}_renderFrame(){if(this.display){this.display._renderFrame(...arguments);return}this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:t,height:r,aspect:n}=this._getSizeAndAspect();(t!==this.animationProps.width||r!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=r,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(t){typeof t=="object"&&t!==null&&(this.animationProps=Object.assign({},this.animationProps,t))}_createWebGLContext(t){if(this.offScreen=t.canvas&&typeof OffscreenCanvas<"u"&&t.canvas instanceof OffscreenCanvas,t=Object.assign({},t,this.props.glOptions),this.gl=this.props.gl?cE(this.props.gl,t):this.onCreateContext(t),!C_(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");Cmt(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const t=document.createElement("div");document.body.appendChild(t),t.style.position="relative";const r=document.createElement("div");r.style.position="absolute",r.style.left="10px",r.style.bottom="10px",r.style.width="300px",r.style.background="white",t.appendChild(this.gl.canvas),t.appendChild(r);const n=this.props.onAddHTML(r);n&&(r.innerHTML=n)}}_getSizeAndAspect(){const t=this.gl.drawingBufferWidth,r=this.gl.drawingBufferHeight;let n=1;const{canvas:i}=this.gl;return i&&i.clientHeight?n=i.clientWidth/i.clientHeight:t>0&&r>0&&(n=t/r),{width:t,height:r,aspect:n}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&Imt(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new ar(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:t}=this.gl;t&&(t.addEventListener("mousemove",this._onMousemove),t.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(t){this.animationProps._mousePosition=[t.offsetX,t.offsetY]}_onMouseleave(t){this.animationProps._mousePosition=null}}const Qp="vs",vE="fs";function Rn(e,t){if(!e)throw new Error(t||"shadertools: assertion failed.")}const Cb={number:{validate(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},array:{validate(e,t){return Array.isArray(e)||ArrayBuffer.isView(e)}}};function R_t(e){const t={};for(const r in e){const n=e[r],i=D_t(n);t[r]=i}return t}function D_t(e){let t=vL(e);return t==="object"?e?"type"in e?Object.assign({},e,Cb[e.type]):"value"in e?(t=vL(e.value),Object.assign({type:t},e,Cb[t])):{type:"object",value:e}:{type:"object",value:null}:Object.assign({type:t,value:e},Cb[t])}function vL(e){return Array.isArray(e)||ArrayBuffer.isView(e)?"array":typeof e}const N_t="vs",F_t="fs";class gL{constructor(t){let{name:r,vs:n,fs:i,dependencies:o=[],uniforms:s,getUniforms:a,deprecations:l=[],defines:u={},inject:c={},vertexShader:f,fragmentShader:h}=t;Rn(typeof r=="string"),this.name=r,this.vs=n||f,this.fs=i||h,this.getModuleUniforms=a,this.dependencies=o,this.deprecations=this._parseDeprecationDefinitions(l),this.defines=u,this.injections=z_t(c),s&&(this.uniforms=R_t(s))}getModuleSource(t){let r;switch(t){case N_t:r=this.vs||"";break;case F_t:r=this.fs||"";break;default:Rn(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),`
`).concat(r,"// END MODULE_").concat(this.name,`

`)}getUniforms(t,r){return this.getModuleUniforms?this.getModuleUniforms(t,r):this.uniforms?this._defaultGetUniforms(t):{}}getDefines(){return this.defines}checkDeprecations(t,r){this.deprecations.forEach(n=>{n.regex.test(t)&&(n.deprecated?r.deprecated(n.old,n.new)():r.removed(n.old,n.new)())})}_parseDeprecationDefinitions(t){return t.forEach(r=>{switch(r.type){case"function":r.regex=new RegExp("\\b".concat(r.old,"\\("));break;default:r.regex=new RegExp("".concat(r.type," ").concat(r.old,";"))}}),t}_defaultGetUniforms(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r={},n=this.uniforms;for(const i in n){const o=n[i];i in t&&!o.private?(o.validate&&Rn(o.validate(t[i],o),"".concat(this.name,": invalid ").concat(i)),r[i]=t[i]):r[i]=o.value}return r}}function z_t(e){const t={vs:{},fs:{}};for(const r in e){let n=e[r];const i=r.slice(0,2);typeof n=="string"&&(n={order:0,injection:n}),t[i][r]=n}return t}function B_t(e){return $_t(_$(e))}function $_t(e){const t={},r={};return m$({modules:e,level:0,moduleMap:t,moduleDepth:r}),Object.keys(r).sort((n,i)=>r[i]-r[n]).map(n=>t[n])}function m$(e){let{modules:t,level:r,moduleMap:n,moduleDepth:i}=e;if(r>=5)throw new Error("Possible loop in shader dependency graph");for(const o of t)n[o.name]=o,(i[o.name]===void 0||i[o.name]<r)&&(i[o.name]=r);for(const o of t)o.dependencies&&m$({modules:o.dependencies,level:r+1,moduleMap:n,moduleDepth:i})}function _$(e,t){return e.map(r=>(r instanceof gL||(Rn(typeof r!="string","Shader module use by name is deprecated. Import shader module '".concat(r,"' and use it directly.")),Rn(r.name,"shader module has no name"),r=new gL(r),r.dependencies=_$(r.dependencies)),r))}function V_t(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=typeof window<"u"?window.navigator||{}:{},r=e.userAgent||t.userAgent||"",n=r.indexOf("MSIE ")!==-1,i=r.indexOf("Trident/")!==-1;return n||i}const U_t=7936,W_t=7937,j_t=7938,G_t=35724,gE={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Ol={};Object.keys(gE).forEach(e=>{Ol[e]=e});function H_t(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:Boolean(e&&e._version===2)}function X_t(e){const t=e.getExtension("WEBGL_debug_renderer_info"),r=e.getParameter(t&&t.UNMASKED_VENDOR_WEBGL||U_t),n=e.getParameter(t&&t.UNMASKED_RENDERER_WEBGL||W_t);return{gpuVendor:Y_t(r,n),vendor:r,renderer:n,version:e.getParameter(j_t),shadingLanguageVersion:e.getParameter(G_t)}}function Y_t(e,t){return e.match(/NVIDIA/i)||t.match(/NVIDIA/i)?"NVIDIA":e.match(/INTEL/i)||t.match(/INTEL/i)?"INTEL":e.match(/AMD/i)||t.match(/AMD/i)||e.match(/ATI/i)||t.match(/ATI/i)?"AMD":"UNKNOWN GPU"}const Ab={};function mL(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=gE[t];if(Rn(n,t),!V_t(r))return!0;if(t in Ab)return Ab[t];const i=n[0],o=r.behavior||"enable",s="#extension GL_".concat(i," : ").concat(o,`
void main(void) {}`),a=e.createShader(35633);e.shaderSource(a,s),e.compileShader(a);const l=e.getShaderParameter(a,35713);return e.deleteShader(a),Ab[t]=l,l}function q_t(e,t){const r=gE[t];Rn(r,t);const n=H_t(e)&&r[1]||r[0],i=typeof n=="string"?Boolean(e.getExtension(n)):n;return Rn(i===!1||i===!0),i}function Ev(e,t){return t=Array.isArray(t)?t:[t],t.every(r=>q_t(e,r))}function Z_t(e){switch(X_t(e).gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function K_t(e,t,r){let n=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return Ev(e,Ol.GLSL_FRAG_DEPTH)&&(n+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),Ev(e,Ol.GLSL_DERIVATIVES)&&mL(e,Ol.GLSL_DERIVATIVES)&&(n+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),Ev(e,Ol.GLSL_FRAG_DATA)&&mL(e,Ol.GLSL_FRAG_DATA,{behavior:"require"})&&(n+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),Ev(e,Ol.GLSL_TEXTURE_LOD)&&(n+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),n}const J_t=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,Q_t=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,tyt={[Qp]:J_t,[vE]:Q_t},am="__LUMA_INJECT_DECLARATIONS__",_L=/void\s+main\s*\([^)]*\)\s*\{\n?/,yL=/}\n?[^{}]*$/,Mb=[];function bL(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=t===Qp;for(const o in r){const s=r[o];s.sort((l,u)=>l.order-u.order),Mb.length=s.length;for(let l=0,u=s.length;l<u;++l)Mb[l]=s[l].injection;const a="".concat(Mb.join(`
`),`
`);switch(o){case"vs:#decl":i&&(e=e.replace(am,a));break;case"vs:#main-start":i&&(e=e.replace(_L,l=>l+a));break;case"vs:#main-end":i&&(e=e.replace(yL,l=>a+l));break;case"fs:#decl":i||(e=e.replace(am,a));break;case"fs:#main-start":i||(e=e.replace(_L,l=>l+a));break;case"fs:#main-end":i||(e=e.replace(yL,l=>a+l));break;default:e=e.replace(o,l=>l+a)}}return e=e.replace(am,""),n&&(e=e.replace(/\}\s*$/,o=>o+tyt[t])),e}function nT(e){const t={};return Rn(Array.isArray(e)&&e.length>1),e.forEach(r=>{for(const n in r)t[n]=t[n]?"".concat(t[n],`
`).concat(r[n]):r[n]}),t}function pf(e){return new RegExp("\\b".concat(e,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const y$=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],eyt=[...y$,[pf("attribute"),"in $1"],[pf("varying"),"out $1"]],ryt=[...y$,[pf("varying"),"in $1"]],b$=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],nyt=[...b$,[pf("in"),"attribute $1"],[pf("out"),"varying $1"]],iyt=[...b$,[pf("in"),"varying $1"]],iT="gl_FragColor",oT=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,oyt=/void\s+main\s*\([^)]*\)\s*\{\n?/;function syt(e,t,r){switch(t){case 300:return r?h1(e,eyt):ayt(e);case 100:return r?h1(e,nyt):lyt(e);default:throw new Error("unknown GLSL version ".concat(t))}}function h1(e,t){for(const[r,n]of t)e=e.replace(r,n);return e}function ayt(e){e=h1(e,ryt);const t=e.match(oT);if(t){const r=t[1];e=e.replace(new RegExp("\\b".concat(iT,"\\b"),"g"),r)}else{const r="fragmentColor";e=e.replace(oyt,n=>"out vec4 ".concat(r,`;
`).concat(n)).replace(new RegExp("\\b".concat(iT,"\\b"),"g"),r)}return e}function lyt(e){e=h1(e,iyt);const t=e.match(oT);if(t){const r=t[1];e=e.replace(oT,"").replace(new RegExp("\\b".concat(r,"\\b"),"g"),iT)}return e}const uyt=`

`.concat(am,`

`),w$={[Qp]:"vertex",[vE]:"fragment"},cyt=`precision highp float;

`;function fyt(e,t){const{vs:r,fs:n}=t,i=B_t(t.modules||[]);return{gl:e,vs:wL(e,Object.assign({},t,{source:r,type:Qp,modules:i})),fs:wL(e,Object.assign({},t,{source:n,type:vE,modules:i})),getUniforms:hyt(i)}}function wL(e,t){let{id:r,source:n,type:i,modules:o,defines:s={},hookFunctions:a=[],inject:l={},transpileToGLSL100:u=!1,prologue:c=!0,log:f}=t;Rn(typeof n=="string","shader source must be a string");const h=i===Qp,d=n.split(`
`);let p=100,v="",m=n;d[0].indexOf("#version ")===0?(p=300,v=d[0],m=d.slice(1).join(`
`)):v="#version ".concat(p);const g={};o.forEach(k=>{Object.assign(g,k.getDefines())}),Object.assign(g,s);let _=c?"".concat(v,`
`).concat(pyt({id:r,source:n,type:i}),`
`).concat(dyt({type:i}),`
`).concat(Z_t(e),`
`).concat(K_t(e),`
`).concat(vyt(g),`
`).concat(h?"":cyt,`
`):"".concat(v,`
`);const b=myt(a),w={},T={},S={};for(const k in l){const A=typeof l[k]=="string"?{injection:l[k],order:0}:l[k],C=k.match(/^(v|f)s:(#)?([\w-]+)$/);if(C){const x=C[2],I=C[3];x?I==="decl"?T[k]=[A]:S[k]=[A]:w[k]=[A]}else S[k]=[A]}for(const k of o){f&&k.checkDeprecations(m,f),_+=k.getModuleSource(i,p);const C=k.injections[i];for(const x in C){const I=x.match(/^(v|f)s:#([\w-]+)$/);if(I){const B=I[2]==="decl"?T:S;B[x]=B[x]||[],B[x].push(C[x])}else w[x]=w[x]||[],w[x].push(C[x])}}return _+=uyt,_=bL(_,i,T),_+=gyt(b[i],w),_+=m,_=bL(_,i,S),_=syt(_,u?100:p,h),_}function hyt(e){return function(r){const n={};for(const i of e){const o=i.getUniforms(r,n);Object.assign(n,o)}return n}}function dyt(e){let{type:t}=e;return`
#define SHADER_TYPE_`.concat(w$[t].toUpperCase(),`
`)}function pyt(e){let{id:t,source:r,type:n}=e;return t&&typeof t=="string"&&r.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME `.concat(t,"_").concat(w$[n],`

`):""}function vyt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=0,r="";for(const n in e){t===0&&(r+=`
// APPLICATION DEFINES
`),t++;const i=e[n];(i||Number.isFinite(i))&&(r+="#define ".concat(n.toUpperCase()," ").concat(e[n],`
`))}return t===0&&(r+=`
`),r}function gyt(e,t){let r="";for(const n in e){const i=e[n];if(r+="void ".concat(i.signature,` {
`),i.header&&(r+="  ".concat(i.header)),t[n]){const o=t[n];o.sort((s,a)=>s.order-a.order);for(const s of o)r+="  ".concat(s.injection,`
`)}i.footer&&(r+="  ".concat(i.footer)),r+=`}
`}return r}function myt(e){const t={vs:{},fs:{}};return e.forEach(r=>{let n;typeof r!="string"?(n=r,r=n.hook):n={},r=r.trim();const[i,o]=r.split(":"),s=r.replace(/\(.+/,"");t[i][s]=Object.assign(n,{signature:o})}),t}const _yt="void main() {gl_FragColor = vec4(0);}",S$=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,yyt=`#version 300 es
`.concat(S$);function T$(e,t){t=Array.isArray(t)?t:[t];const r=e.replace(/^\s+/,"").split(/\s+/),[n,i,o]=r;if(!t.includes(n)||!i||!o)return null;const s=o.split(";")[0];return{qualifier:n,type:i,name:s}}function k$(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{version:t=100,input:r,inputType:n,output:i}=e;if(!r)return t===300?yyt:t>300?"#version ".concat(t,`
`).concat(S$):_yt;const o=Syt(r,n);return t>=300?"#version ".concat(t," ").concat(t===300?"es":"",`
in `).concat(n," ").concat(r,`;
out vec4 `).concat(i,`;
void main() {
  `).concat(i," = ").concat(o,`;
}`):"varying ".concat(n," ").concat(r,`;
void main() {
  gl_FragColor = `).concat(o,`;
}`)}function byt(e){switch(e){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Rn(!1),null}}function wyt(e){switch(e){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Rn(!1),null}}function Syt(e,t){switch(t){case"float":return"vec4(".concat(e,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(e,", 0.0, 1.0)");case"vec3":return"vec4(".concat(e,", 1.0)");case"vec4":return e;default:return Rn(!1),null}}const Tyt=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,kyt={name:"fp32",vs:Tyt,fs:null};function kp(e,t){if(!e)throw new Error("math.gl assertion ".concat(t))}const nn={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function Pyt(e,{precision:t=nn.precision}={}){return e=Eyt(e),"".concat(parseFloat(e.toPrecision(t)))}function pu(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Ar(e,t,r){return Ayt(e,n=>Math.max(t,Math.min(r,n)))}function Ql(e,t,r){return pu(e)?e.map((n,i)=>Ql(n,t[i],r)):r*t+(1-r)*e}function xo(e,t,r){const n=nn.EPSILON;r&&(nn.EPSILON=r);try{if(e===t)return!0;if(pu(e)&&pu(t)){if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(!xo(e[i],t[i]))return!1;return!0}return e&&e.equals?e.equals(t):t&&t.equals?t.equals(e):typeof e=="number"&&typeof t=="number"?Math.abs(e-t)<=nn.EPSILON*Math.max(1,Math.abs(e),Math.abs(t)):!1}finally{nn.EPSILON=n}}function Eyt(e){return Math.round(e/nn.EPSILON)*nn.EPSILON}function Cyt(e){return e.clone?e.clone():new Array(e.length)}function Ayt(e,t,r){if(pu(e)){const n=e;r=r||Cyt(n);for(let i=0;i<r.length&&i<n.length;++i)r[i]=t(e[i],i,r);return r}return t(e)}function Myt(e){function t(){var r=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(r,Object.getPrototypeOf(this)),r}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}class mE extends Myt(Array){clone(){return new this.constructor().copy(this)}fromArray(t,r=0){for(let n=0;n<this.ELEMENTS;++n)this[n]=t[n+r];return this.check()}toArray(t=[],r=0){for(let n=0;n<this.ELEMENTS;++n)t[r+n]=this[n];return t}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}to(t){return t===this?this:pu(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(nn)}formatString(t){let r="";for(let n=0;n<this.ELEMENTS;++n)r+=(n>0?", ":"")+Pyt(this[n],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(r,"]")}equals(t){if(!t||this.length!==t.length)return!1;for(let r=0;r<this.ELEMENTS;++r)if(!xo(this[r],t[r]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let r=0;r<this.ELEMENTS;++r)if(this[r]!==t[r])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,r,n){if(n===void 0)return this.lerp(this,t,r);for(let i=0;i<this.ELEMENTS;++i){const o=t[i];this[i]=o+n*(r[i]-o)}return this.check()}min(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(t[r],this[r]);return this.check()}max(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.max(t[r],this[r]);return this.check()}clamp(t,r){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t[n]),r[n]);return this.check()}add(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]+=r[n];return this.check()}subtract(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]-=r[n];return this.check()}scale(t){if(typeof t=="number")for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;else for(let r=0;r<this.ELEMENTS&&r<t.length;++r)this[r]*=t[r];return this.check()}multiplyByScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;return this.check()}check(){if(nn.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let t=this.length===this.ELEMENTS;for(let r=0;r<this.ELEMENTS;++r)t=t&&Number.isFinite(this[r]);return t}sub(t){return this.subtract(t)}setScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=t;return this.check()}addScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;return this.check()}divideScalar(t){return this.multiplyByScalar(1/t)}clampScalar(t,r){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t),r);return this.check()}get elements(){return this}}function xyt(e,t){if(e.length!==t)return!1;for(let r=0;r<e.length;++r)if(!Number.isFinite(e[r]))return!1;return!0}function xe(e){if(!Number.isFinite(e))throw new Error("Invalid number ".concat(e));return e}function Wd(e,t,r=""){if(nn.debug&&!xyt(e,t))throw new Error("math.gl: ".concat(r," some fields set to invalid numbers'"));return e}class P$ extends mE{get x(){return this[0]}set x(t){this[0]=xe(t)}get y(){return this[1]}set y(t){this[1]=xe(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let r=0;r<this.ELEMENTS;++r)t+=this[r]*this[r];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let r=0;for(let n=0;n<this.ELEMENTS;++n){const i=this[n]-t[n];r+=i*i}return xe(r)}dot(t){let r=0;for(let n=0;n<this.ELEMENTS;++n)r+=this[n]*t[n];return xe(r)}normalize(){const t=this.magnitude();if(t!==0)for(let r=0;r<this.ELEMENTS;++r)this[r]/=t;return this.check()}multiply(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]*=r[n];return this.check()}divide(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]/=r[n];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return kp(t>=0&&t<this.ELEMENTS,"index is out of range"),xe(this[t])}setComponent(t,r){return kp(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=r,this.check()}addVectors(t,r){return this.copy(t).add(r)}subVectors(t,r){return this.copy(t).subtract(r)}multiplyVectors(t,r){return this.copy(t).multiply(r)}addScaledVector(t,r){return this.add(new this.constructor(t).multiplyScalar(r))}}var jd=1e-6,Wi=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function Lyt(){var e=new Wi(2);return Wi!=Float32Array&&(e[0]=0,e[1]=0),e}function d1(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function E$(e,t){return e[0]=-t[0],e[1]=-t[1],e}function C$(e,t,r,n){var i=t[0],o=t[1];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e}function Iyt(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[3]*i+r[6],e[1]=r[1]*n+r[4]*i+r[7],e}function Oyt(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e}(function(){var e=Lyt();return function(t,r,n,i,o,s){var a,l;for(r||(r=2),n||(n=0),i?l=Math.min(i*r+n,t.length):l=t.length,a=n;a<l;a+=r)e[0]=t[a],e[1]=t[a+1],o(e,e,s),t[a]=e[0],t[a+1]=e[1];return t}})();function Ryt(e,t,r){const n=t[0],i=t[1],o=r[3]*n+r[7]*i||1;return e[0]=(r[0]*n+r[4]*i)/o,e[1]=(r[1]*n+r[5]*i)/o,e}function A$(e,t,r){const n=t[0],i=t[1],o=t[2],s=r[3]*n+r[7]*i+r[11]*o||1;return e[0]=(r[0]*n+r[4]*i+r[8]*o)/s,e[1]=(r[1]*n+r[5]*i+r[9]*o)/s,e[2]=(r[2]*n+r[6]*i+r[10]*o)/s,e}function Dyt(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e[2]=t[2],e}function Nyt(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e[2]=t[2],e[3]=t[3],e}function M$(e,t,r){const n=t[0],i=t[1],o=t[2];return e[0]=r[0]*n+r[3]*i+r[6]*o,e[1]=r[1]*n+r[4]*i+r[7]*o,e[2]=r[2]*n+r[5]*i+r[8]*o,e[3]=t[3],e}function x$(){var e=new Wi(3);return Wi!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Fyt(e){var t=e[0],r=e[1],n=e[2];return Math.hypot(t,r,n)}function SL(e,t,r){var n=new Wi(3);return n[0]=e,n[1]=t,n[2]=r,n}function zyt(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function Byt(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n}function $yt(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function Vyt(e,t){var r=t[0],n=t[1],i=t[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function L$(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function lm(e,t,r){var n=t[0],i=t[1],o=t[2],s=r[0],a=r[1],l=r[2];return e[0]=i*l-o*a,e[1]=o*s-n*l,e[2]=n*a-i*s,e}function Uyt(e,t,r,n){var i=t[0],o=t[1],s=t[2];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e[2]=s+n*(r[2]-s),e}function _E(e,t,r){var n=t[0],i=t[1],o=t[2],s=r[3]*n+r[7]*i+r[11]*o+r[15];return s=s||1,e[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/s,e[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/s,e[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/s,e}function I$(e,t,r){var n=t[0],i=t[1],o=t[2];return e[0]=n*r[0]+i*r[3]+o*r[6],e[1]=n*r[1]+i*r[4]+o*r[7],e[2]=n*r[2]+i*r[5]+o*r[8],e}function O$(e,t,r){var n=r[0],i=r[1],o=r[2],s=r[3],a=t[0],l=t[1],u=t[2],c=i*u-o*l,f=o*a-n*u,h=n*l-i*a,d=i*h-o*f,p=o*c-n*h,v=n*f-i*c,m=s*2;return c*=m,f*=m,h*=m,d*=2,p*=2,v*=2,e[0]=a+c+d,e[1]=l+f+p,e[2]=u+h+v,e}function Wyt(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function jyt(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function Gyt(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function Hyt(e,t){var r=e[0],n=e[1],i=e[2],o=t[0],s=t[1],a=t[2],l=Math.sqrt(r*r+n*n+i*i),u=Math.sqrt(o*o+s*s+a*a),c=l*u,f=c&&L$(e,t)/c;return Math.acos(Math.min(Math.max(f,-1),1))}var R$=zyt,D$=Fyt,xb=Byt;(function(){var e=x$();return function(t,r,n,i,o,s){var a,l;for(r||(r=3),n||(n=0),i?l=Math.min(i*r+n,t.length):l=t.length,a=n;a<l;a+=r)e[0]=t[a],e[1]=t[a+1],e[2]=t[a+2],o(e,e,s),t[a]=e[0],t[a+1]=e[1],t[a+2]=e[2];return t}})();const Lb=[0,0,0];let Cv;class kt extends P${static get ZERO(){return Cv||(Cv=new kt(0,0,0),Object.freeze(Cv)),Cv}constructor(t=0,r=0,n=0){super(-0,-0,-0),arguments.length===1&&pu(t)?this.copy(t):(nn.debug&&(xe(t),xe(r),xe(n)),this[0]=t,this[1]=r,this[2]=n)}set(t,r,n){return this[0]=t,this[1]=r,this[2]=n,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}fromObject(t){return nn.debug&&(xe(t.x),xe(t.y),xe(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}get ELEMENTS(){return 3}get z(){return this[2]}set z(t){this[2]=xe(t)}angle(t){return Hyt(this,t)}cross(t){return lm(this,this,t),this.check()}rotateX({radians:t,origin:r=Lb}){return Wyt(this,this,r,t),this.check()}rotateY({radians:t,origin:r=Lb}){return jyt(this,this,r,t),this.check()}rotateZ({radians:t,origin:r=Lb}){return Gyt(this,this,r,t),this.check()}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return _E(this,this,t),this.check()}transformAsVector(t){return A$(this,this,t),this.check()}transformByMatrix3(t){return I$(this,this,t),this.check()}transformByMatrix2(t){return Dyt(this,this,t),this.check()}transformByQuaternion(t){return O$(this,this,t),this.check()}}let Av;class yE extends P${static get ZERO(){return Av||(Av=new yE(0,0,0,0),Object.freeze(Av)),Av}constructor(t=0,r=0,n=0,i=0){super(-0,-0,-0,-0),pu(t)&&arguments.length===1?this.copy(t):(nn.debug&&(xe(t),xe(r),xe(n),xe(i)),this[0]=t,this[1]=r,this[2]=n,this[3]=i)}set(t,r,n,i){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}fromObject(t){return nn.debug&&(xe(t.x),xe(t.y),xe(t.z),xe(t.w)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t.w=this[3],t}get ELEMENTS(){return 4}get z(){return this[2]}set z(t){this[2]=xe(t)}get w(){return this[3]}set w(t){this[3]=xe(t)}transform(t){return _E(this,this,t),this.check()}transformByMatrix3(t){return M$(this,this,t),this.check()}transformByMatrix2(t){return Nyt(this,this,t),this.check()}transformByQuaternion(t){return O$(this,this,t),this.check()}applyMatrix4(t){return t.transform(this,this),this}}class N$ extends mE{toString(){let t="[";if(nn.printRowMajor){t+="row-major:";for(let r=0;r<this.RANK;++r)for(let n=0;n<this.RANK;++n)t+=" ".concat(this[n*this.RANK+r])}else{t+="column-major:";for(let r=0;r<this.ELEMENTS;++r)t+=" ".concat(this[r])}return t+="]",t}getElementIndex(t,r){return r*this.RANK+t}getElement(t,r){return this[r*this.RANK+t]}setElement(t,r,n){return this[r*this.RANK+t]=xe(n),this}getColumn(t,r=new Array(this.RANK).fill(-0)){const n=t*this.RANK;for(let i=0;i<this.RANK;++i)r[i]=this[n+i];return r}setColumn(t,r){const n=t*this.RANK;for(let i=0;i<this.RANK;++i)this[n+i]=r[i];return this}}function Xyt(){var e=new Wi(9);return Wi!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function Yyt(e,t){if(e===t){var r=t[1],n=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=n,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function qyt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],s=t[4],a=t[5],l=t[6],u=t[7],c=t[8],f=c*s-a*u,h=-c*o+a*l,d=u*o-s*l,p=r*f+n*h+i*d;return p?(p=1/p,e[0]=f*p,e[1]=(-c*n+i*u)*p,e[2]=(a*n-i*s)*p,e[3]=h*p,e[4]=(c*r-i*l)*p,e[5]=(-a*r+i*o)*p,e[6]=d*p,e[7]=(-u*r+n*l)*p,e[8]=(s*r-n*o)*p,e):null}function Zyt(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],s=e[5],a=e[6],l=e[7],u=e[8];return t*(u*o-s*l)+r*(-u*i+s*a)+n*(l*i-o*a)}function TL(e,t,r){var n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=r[0],d=r[1],p=r[2],v=r[3],m=r[4],g=r[5],_=r[6],b=r[7],w=r[8];return e[0]=h*n+d*s+p*u,e[1]=h*i+d*a+p*c,e[2]=h*o+d*l+p*f,e[3]=v*n+m*s+g*u,e[4]=v*i+m*a+g*c,e[5]=v*o+m*l+g*f,e[6]=_*n+b*s+w*u,e[7]=_*i+b*a+w*c,e[8]=_*o+b*l+w*f,e}function Kyt(e,t,r){var n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=r[0],d=r[1];return e[0]=n,e[1]=i,e[2]=o,e[3]=s,e[4]=a,e[5]=l,e[6]=h*n+d*s+u,e[7]=h*i+d*a+c,e[8]=h*o+d*l+f,e}function Jyt(e,t,r){var n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=Math.sin(r),d=Math.cos(r);return e[0]=d*n+h*s,e[1]=d*i+h*a,e[2]=d*o+h*l,e[3]=d*s-h*n,e[4]=d*a-h*i,e[5]=d*l-h*o,e[6]=u,e[7]=c,e[8]=f,e}function kL(e,t,r){var n=r[0],i=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Qyt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],s=r+r,a=n+n,l=i+i,u=r*s,c=n*s,f=n*a,h=i*s,d=i*a,p=i*l,v=o*s,m=o*a,g=o*l;return e[0]=1-f-p,e[3]=c-g,e[6]=h+m,e[1]=c+g,e[4]=1-u-p,e[7]=d-v,e[2]=h-m,e[5]=d+v,e[8]=1-u-f,e}var sT;(function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL1ROW0=3]="COL1ROW0",e[e.COL1ROW1=4]="COL1ROW1",e[e.COL1ROW2=5]="COL1ROW2",e[e.COL2ROW0=6]="COL2ROW0",e[e.COL2ROW1=7]="COL2ROW1",e[e.COL2ROW2=8]="COL2ROW2"})(sT||(sT={}));const t2t=Object.freeze([1,0,0,0,1,0,0,0,1]);class xr extends N${static get IDENTITY(){return r2t()}static get ZERO(){return e2t()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return sT}constructor(t,...r){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(t)?this.copy(t):r.length>0?this.copy([t,...r]):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this.check()}identity(){return this.copy(t2t)}fromObject(t){return this.check()}fromQuaternion(t){return Qyt(this,t),this.check()}set(t,r,n,i,o,s,a,l,u){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this[4]=o,this[5]=s,this[6]=a,this[7]=l,this[8]=u,this.check()}setRowMajor(t,r,n,i,o,s,a,l,u){return this[0]=t,this[1]=i,this[2]=a,this[3]=r,this[4]=o,this[5]=l,this[6]=n,this[7]=s,this[8]=u,this.check()}determinant(){return Zyt(this)}transpose(){return Yyt(this,this),this.check()}invert(){return qyt(this,this),this.check()}multiplyLeft(t){return TL(this,t,this),this.check()}multiplyRight(t){return TL(this,this,t),this.check()}rotate(t){return Jyt(this,this,t),this.check()}scale(t){return Array.isArray(t)?kL(this,this,t):kL(this,this,[t,t]),this.check()}translate(t){return Kyt(this,this,t),this.check()}transform(t,r){let n;switch(t.length){case 2:n=Iyt(r||[-0,-0],t,this);break;case 3:n=I$(r||[-0,-0,-0],t,this);break;case 4:n=M$(r||[-0,-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Wd(n,t.length),n}transformVector(t,r){return this.transform(t,r)}transformVector2(t,r){return this.transform(t,r)}transformVector3(t,r){return this.transform(t,r)}}let Mv,xv;function e2t(){return Mv||(Mv=new xr([0,0,0,0,0,0,0,0,0]),Object.freeze(Mv)),Mv}function r2t(){return xv||(xv=new xr,Object.freeze(xv)),xv}function n2t(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function i2t(e,t){if(e===t){var r=t[1],n=t[2],i=t[3],o=t[6],s=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=o,e[11]=t[14],e[12]=i,e[13]=s,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function aT(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],s=t[4],a=t[5],l=t[6],u=t[7],c=t[8],f=t[9],h=t[10],d=t[11],p=t[12],v=t[13],m=t[14],g=t[15],_=r*a-n*s,b=r*l-i*s,w=r*u-o*s,T=n*l-i*a,S=n*u-o*a,k=i*u-o*l,A=c*v-f*p,C=c*m-h*p,x=c*g-d*p,I=f*m-h*v,N=f*g-d*v,B=h*g-d*m,V=_*B-b*N+w*I+T*x-S*C+k*A;return V?(V=1/V,e[0]=(a*B-l*N+u*I)*V,e[1]=(i*N-n*B-o*I)*V,e[2]=(v*k-m*S+g*T)*V,e[3]=(h*S-f*k-d*T)*V,e[4]=(l*x-s*B-u*C)*V,e[5]=(r*B-i*x+o*C)*V,e[6]=(m*w-p*k-g*b)*V,e[7]=(c*k-h*w+d*b)*V,e[8]=(s*N-a*x+u*A)*V,e[9]=(n*x-r*N-o*A)*V,e[10]=(p*S-v*w+g*_)*V,e[11]=(f*w-c*S-d*_)*V,e[12]=(a*C-s*I-l*A)*V,e[13]=(r*I-n*C+i*A)*V,e[14]=(v*b-p*T-m*_)*V,e[15]=(c*T-f*b+h*_)*V,e):null}function o2t(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],s=e[5],a=e[6],l=e[7],u=e[8],c=e[9],f=e[10],h=e[11],d=e[12],p=e[13],v=e[14],m=e[15],g=t*s-r*o,_=t*a-n*o,b=t*l-i*o,w=r*a-n*s,T=r*l-i*s,S=n*l-i*a,k=u*p-c*d,A=u*v-f*d,C=u*m-h*d,x=c*v-f*p,I=c*m-h*p,N=f*m-h*v;return g*N-_*I+b*x+w*C-T*A+S*k}function tu(e,t,r){var n=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=t[9],d=t[10],p=t[11],v=t[12],m=t[13],g=t[14],_=t[15],b=r[0],w=r[1],T=r[2],S=r[3];return e[0]=b*n+w*a+T*f+S*v,e[1]=b*i+w*l+T*h+S*m,e[2]=b*o+w*u+T*d+S*g,e[3]=b*s+w*c+T*p+S*_,b=r[4],w=r[5],T=r[6],S=r[7],e[4]=b*n+w*a+T*f+S*v,e[5]=b*i+w*l+T*h+S*m,e[6]=b*o+w*u+T*d+S*g,e[7]=b*s+w*c+T*p+S*_,b=r[8],w=r[9],T=r[10],S=r[11],e[8]=b*n+w*a+T*f+S*v,e[9]=b*i+w*l+T*h+S*m,e[10]=b*o+w*u+T*d+S*g,e[11]=b*s+w*c+T*p+S*_,b=r[12],w=r[13],T=r[14],S=r[15],e[12]=b*n+w*a+T*f+S*v,e[13]=b*i+w*l+T*h+S*m,e[14]=b*o+w*u+T*d+S*g,e[15]=b*s+w*c+T*p+S*_,e}function p1(e,t,r){var n=r[0],i=r[1],o=r[2],s,a,l,u,c,f,h,d,p,v,m,g;return t===e?(e[12]=t[0]*n+t[4]*i+t[8]*o+t[12],e[13]=t[1]*n+t[5]*i+t[9]*o+t[13],e[14]=t[2]*n+t[6]*i+t[10]*o+t[14],e[15]=t[3]*n+t[7]*i+t[11]*o+t[15]):(s=t[0],a=t[1],l=t[2],u=t[3],c=t[4],f=t[5],h=t[6],d=t[7],p=t[8],v=t[9],m=t[10],g=t[11],e[0]=s,e[1]=a,e[2]=l,e[3]=u,e[4]=c,e[5]=f,e[6]=h,e[7]=d,e[8]=p,e[9]=v,e[10]=m,e[11]=g,e[12]=s*n+c*i+p*o+t[12],e[13]=a*n+f*i+v*o+t[13],e[14]=l*n+h*i+m*o+t[14],e[15]=u*n+d*i+g*o+t[15]),e}function bE(e,t,r){var n=r[0],i=r[1],o=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function s2t(e,t,r,n){var i=n[0],o=n[1],s=n[2],a=Math.hypot(i,o,s),l,u,c,f,h,d,p,v,m,g,_,b,w,T,S,k,A,C,x,I,N,B,V,F;return a<jd?null:(a=1/a,i*=a,o*=a,s*=a,l=Math.sin(r),u=Math.cos(r),c=1-u,f=t[0],h=t[1],d=t[2],p=t[3],v=t[4],m=t[5],g=t[6],_=t[7],b=t[8],w=t[9],T=t[10],S=t[11],k=i*i*c+u,A=o*i*c+s*l,C=s*i*c-o*l,x=i*o*c-s*l,I=o*o*c+u,N=s*o*c+i*l,B=i*s*c+o*l,V=o*s*c-i*l,F=s*s*c+u,e[0]=f*k+v*A+b*C,e[1]=h*k+m*A+w*C,e[2]=d*k+g*A+T*C,e[3]=p*k+_*A+S*C,e[4]=f*x+v*I+b*N,e[5]=h*x+m*I+w*N,e[6]=d*x+g*I+T*N,e[7]=p*x+_*I+S*N,e[8]=f*B+v*V+b*F,e[9]=h*B+m*V+w*F,e[10]=d*B+g*V+T*F,e[11]=p*B+_*V+S*F,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function F$(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[4],s=t[5],a=t[6],l=t[7],u=t[8],c=t[9],f=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+u*n,e[5]=s*i+c*n,e[6]=a*i+f*n,e[7]=l*i+h*n,e[8]=u*i-o*n,e[9]=c*i-s*n,e[10]=f*i-a*n,e[11]=h*i-l*n,e}function a2t(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],s=t[1],a=t[2],l=t[3],u=t[8],c=t[9],f=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-u*n,e[1]=s*i-c*n,e[2]=a*i-f*n,e[3]=l*i-h*n,e[8]=o*n+u*i,e[9]=s*n+c*i,e[10]=a*n+f*i,e[11]=l*n+h*i,e}function z$(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],s=t[1],a=t[2],l=t[3],u=t[4],c=t[5],f=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+u*n,e[1]=s*i+c*n,e[2]=a*i+f*n,e[3]=l*i+h*n,e[4]=u*i-o*n,e[5]=c*i-s*n,e[6]=f*i-a*n,e[7]=h*i-l*n,e}function l2t(e,t){var r=t[0],n=t[1],i=t[2],o=t[4],s=t[5],a=t[6],l=t[8],u=t[9],c=t[10];return e[0]=Math.hypot(r,n,i),e[1]=Math.hypot(o,s,a),e[2]=Math.hypot(l,u,c),e}function u2t(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],s=r+r,a=n+n,l=i+i,u=r*s,c=n*s,f=n*a,h=i*s,d=i*a,p=i*l,v=o*s,m=o*a,g=o*l;return e[0]=1-f-p,e[1]=c+g,e[2]=h-m,e[3]=0,e[4]=c-g,e[5]=1-u-p,e[6]=d+v,e[7]=0,e[8]=h+m,e[9]=d-v,e[10]=1-u-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function c2t(e,t,r,n,i,o,s){var a=1/(r-t),l=1/(i-n),u=1/(o-s);return e[0]=o*2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o*2*l,e[6]=0,e[7]=0,e[8]=(r+t)*a,e[9]=(i+n)*l,e[10]=(s+o)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=s*o*2*u,e[15]=0,e}function f2t(e,t,r,n,i){var o=1/Math.tan(t/2),s;return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0?(s=1/(n-i),e[10]=(i+n)*s,e[14]=2*i*n*s):(e[10]=-1,e[14]=-2*n),e}var h2t=f2t;function d2t(e,t,r,n,i,o,s){var a=1/(t-r),l=1/(n-i),u=1/(o-s);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+r)*a,e[13]=(i+n)*l,e[14]=(s+o)*u,e[15]=1,e}var p2t=d2t;function v2t(e,t,r,n){var i,o,s,a,l,u,c,f,h,d,p=t[0],v=t[1],m=t[2],g=n[0],_=n[1],b=n[2],w=r[0],T=r[1],S=r[2];return Math.abs(p-w)<jd&&Math.abs(v-T)<jd&&Math.abs(m-S)<jd?n2t(e):(c=p-w,f=v-T,h=m-S,d=1/Math.hypot(c,f,h),c*=d,f*=d,h*=d,i=_*h-b*f,o=b*c-g*h,s=g*f-_*c,d=Math.hypot(i,o,s),d?(d=1/d,i*=d,o*=d,s*=d):(i=0,o=0,s=0),a=f*s-h*o,l=h*i-c*s,u=c*o-f*i,d=Math.hypot(a,l,u),d?(d=1/d,a*=d,l*=d,u*=d):(a=0,l=0,u=0),e[0]=i,e[1]=a,e[2]=c,e[3]=0,e[4]=o,e[5]=l,e[6]=f,e[7]=0,e[8]=s,e[9]=u,e[10]=h,e[11]=0,e[12]=-(i*p+o*v+s*m),e[13]=-(a*p+l*v+u*m),e[14]=-(c*p+f*v+h*m),e[15]=1,e)}function g2t(){var e=new Wi(4);return Wi!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function m2t(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function wE(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function _2t(e){var t=e[0],r=e[1],n=e[2],i=e[3];return Math.hypot(t,r,n,i)}function y2t(e){var t=e[0],r=e[1],n=e[2],i=e[3];return t*t+r*r+n*n+i*i}function b2t(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],s=r*r+n*n+i*i+o*o;return s>0&&(s=1/Math.sqrt(s)),e[0]=r*s,e[1]=n*s,e[2]=i*s,e[3]=o*s,e}function w2t(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function S2t(e,t,r,n){var i=t[0],o=t[1],s=t[2],a=t[3];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e[2]=s+n*(r[2]-s),e[3]=a+n*(r[3]-a),e}function Ff(e,t,r){var n=t[0],i=t[1],o=t[2],s=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*s,e[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*s,e[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*s,e[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*s,e}function T2t(e,t,r){var n=t[0],i=t[1],o=t[2],s=r[0],a=r[1],l=r[2],u=r[3],c=u*n+a*o-l*i,f=u*i+l*n-s*o,h=u*o+s*i-a*n,d=-s*n-a*i-l*o;return e[0]=c*u+d*-s+f*-l-h*-a,e[1]=f*u+d*-a+h*-s-c*-l,e[2]=h*u+d*-l+c*-a-f*-s,e[3]=t[3],e}(function(){var e=g2t();return function(t,r,n,i,o,s){var a,l;for(r||(r=4),n||(n=0),i?l=Math.min(i*r+n,t.length):l=t.length,a=n;a<l;a+=r)e[0]=t[a],e[1]=t[a+1],e[2]=t[a+2],e[3]=t[a+3],o(e,e,s),t[a]=e[0],t[a+1]=e[1],t[a+2]=e[2],t[a+3]=e[3];return t}})();var lT;(function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL0ROW3=3]="COL0ROW3",e[e.COL1ROW0=4]="COL1ROW0",e[e.COL1ROW1=5]="COL1ROW1",e[e.COL1ROW2=6]="COL1ROW2",e[e.COL1ROW3=7]="COL1ROW3",e[e.COL2ROW0=8]="COL2ROW0",e[e.COL2ROW1=9]="COL2ROW1",e[e.COL2ROW2=10]="COL2ROW2",e[e.COL2ROW3=11]="COL2ROW3",e[e.COL3ROW0=12]="COL3ROW0",e[e.COL3ROW1=13]="COL3ROW1",e[e.COL3ROW2=14]="COL3ROW2",e[e.COL3ROW3=15]="COL3ROW3"})(lT||(lT={}));const k2t=45*Math.PI/180,P2t=1,Ib=.1,Ob=500,E2t=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Xr extends N${static get IDENTITY(){return A2t()}static get ZERO(){return C2t()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return lT}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,r,n,i,o,s,a,l,u,c,f,h,d,p,v,m){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this[4]=o,this[5]=s,this[6]=a,this[7]=l,this[8]=u,this[9]=c,this[10]=f,this[11]=h,this[12]=d,this[13]=p,this[14]=v,this[15]=m,this.check()}setRowMajor(t,r,n,i,o,s,a,l,u,c,f,h,d,p,v,m){return this[0]=t,this[1]=o,this[2]=u,this[3]=d,this[4]=r,this[5]=s,this[6]=c,this[7]=p,this[8]=n,this[9]=a,this[10]=f,this[11]=v,this[12]=i,this[13]=l,this[14]=h,this[15]=m,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(E2t)}fromObject(t){return this.check()}fromQuaternion(t){return u2t(this,t),this.check()}frustum(t){const{left:r,right:n,bottom:i,top:o,near:s=Ib,far:a=Ob}=t;return a===1/0?M2t(this,r,n,i,o,s):c2t(this,r,n,i,o,s,a),this.check()}lookAt(t){const{eye:r,center:n=[0,0,0],up:i=[0,1,0]}=t;return v2t(this,r,n,i),this.check()}ortho(t){const{left:r,right:n,bottom:i,top:o,near:s=Ib,far:a=Ob}=t;return p2t(this,r,n,i,o,s,a),this.check()}orthographic(t){const{fovy:r=k2t,aspect:n=P2t,focalDistance:i=1,near:o=Ib,far:s=Ob}=t;PL(r);const a=r/2,l=i*Math.tan(a),u=l*n;return this.ortho({left:-u,right:u,bottom:-l,top:l,near:o,far:s})}perspective(t){const{fovy:r=45*Math.PI/180,aspect:n=1,near:i=.1,far:o=500}=t;return PL(r),h2t(this,r,n,i,o),this.check()}determinant(){return o2t(this)}getScale(t=[-0,-0,-0]){return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(t=[-0,-0,-0]){return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t,r){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],r=r||[-0,-0,-0];const n=this.getScale(r),i=1/n[0],o=1/n[1],s=1/n[2];return t[0]=this[0]*i,t[1]=this[1]*o,t[2]=this[2]*s,t[3]=0,t[4]=this[4]*i,t[5]=this[5]*o,t[6]=this[6]*s,t[7]=0,t[8]=this[8]*i,t[9]=this[9]*o,t[10]=this[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t,r){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0],r=r||[-0,-0,-0];const n=this.getScale(r),i=1/n[0],o=1/n[1],s=1/n[2];return t[0]=this[0]*i,t[1]=this[1]*o,t[2]=this[2]*s,t[3]=this[4]*i,t[4]=this[5]*o,t[5]=this[6]*s,t[6]=this[8]*i,t[7]=this[9]*o,t[8]=this[10]*s,t}transpose(){return i2t(this,this),this.check()}invert(){return aT(this,this),this.check()}multiplyLeft(t){return tu(this,t,this),this.check()}multiplyRight(t){return tu(this,this,t),this.check()}rotateX(t){return F$(this,this,t),this.check()}rotateY(t){return a2t(this,this,t),this.check()}rotateZ(t){return z$(this,this,t),this.check()}rotateXYZ(t){return this.rotateX(t[0]).rotateY(t[1]).rotateZ(t[2])}rotateAxis(t,r){return s2t(this,this,t,r),this.check()}scale(t){return bE(this,this,Array.isArray(t)?t:[t,t,t]),this.check()}translate(t){return p1(this,this,t),this.check()}transform(t,r){return t.length===4?(r=Ff(r||[-0,-0,-0,-0],t,this),Wd(r,4),r):this.transformAsPoint(t,r)}transformAsPoint(t,r){const{length:n}=t;let i;switch(n){case 2:i=Oyt(r||[-0,-0],t,this);break;case 3:i=_E(r||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Wd(i,t.length),i}transformAsVector(t,r){let n;switch(t.length){case 2:n=Ryt(r||[-0,-0],t,this);break;case 3:n=A$(r||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Wd(n,t.length),n}transformPoint(t,r){return this.transformAsPoint(t,r)}transformVector(t,r){return this.transformAsPoint(t,r)}transformDirection(t,r){return this.transformAsVector(t,r)}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,r,n){return this.identity().translate([t,r,n])}}let Lv,Iv;function C2t(){return Lv||(Lv=new Xr([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(Lv)),Lv}function A2t(){return Iv||(Iv=new Xr,Object.freeze(Iv)),Iv}function PL(e){if(e>Math.PI*2)throw Error("expected radians")}function M2t(e,t,r,n,i,o){const s=2*o/(r-t),a=2*o/(i-n),l=(r+t)/(r-t),u=(i+n)/(i-n),c=-1,f=-1,h=-2*o;return e[0]=s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=l,e[9]=u,e[10]=c,e[11]=f,e[12]=0,e[13]=0,e[14]=h,e[15]=0,e}function EL(){var e=new Wi(4);return Wi!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function x2t(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function B$(e,t,r){r=r*.5;var n=Math.sin(r);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(r),e}function CL(e,t,r){var n=t[0],i=t[1],o=t[2],s=t[3],a=r[0],l=r[1],u=r[2],c=r[3];return e[0]=n*c+s*a+i*u-o*l,e[1]=i*c+s*l+o*a-n*u,e[2]=o*c+s*u+n*l-i*a,e[3]=s*c-n*a-i*l-o*u,e}function L2t(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],s=t[3],a=Math.sin(r),l=Math.cos(r);return e[0]=n*l+s*a,e[1]=i*l+o*a,e[2]=o*l-i*a,e[3]=s*l-n*a,e}function I2t(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],s=t[3],a=Math.sin(r),l=Math.cos(r);return e[0]=n*l-o*a,e[1]=i*l+s*a,e[2]=o*l+n*a,e[3]=s*l-i*a,e}function O2t(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],s=t[3],a=Math.sin(r),l=Math.cos(r);return e[0]=n*l+i*a,e[1]=i*l-n*a,e[2]=o*l+s*a,e[3]=s*l-o*a,e}function R2t(e,t){var r=t[0],n=t[1],i=t[2];return e[0]=r,e[1]=n,e[2]=i,e[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),e}function um(e,t,r,n){var i=t[0],o=t[1],s=t[2],a=t[3],l=r[0],u=r[1],c=r[2],f=r[3],h,d,p,v,m;return d=i*l+o*u+s*c+a*f,d<0&&(d=-d,l=-l,u=-u,c=-c,f=-f),1-d>jd?(h=Math.acos(d),p=Math.sin(h),v=Math.sin((1-n)*h)/p,m=Math.sin(n*h)/p):(v=1-n,m=n),e[0]=v*i+m*l,e[1]=v*o+m*u,e[2]=v*s+m*c,e[3]=v*a+m*f,e}function D2t(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],s=r*r+n*n+i*i+o*o,a=s?1/s:0;return e[0]=-r*a,e[1]=-n*a,e[2]=-i*a,e[3]=o*a,e}function N2t(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function $$(e,t){var r=t[0]+t[4]+t[8],n;if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[i*3+i]&&(i=2);var o=(i+1)%3,s=(i+2)%3;n=Math.sqrt(t[i*3+i]-t[o*3+o]-t[s*3+s]+1),e[i]=.5*n,n=.5/n,e[3]=(t[o*3+s]-t[s*3+o])*n,e[o]=(t[o*3+i]+t[i*3+o])*n,e[s]=(t[s*3+i]+t[i*3+s])*n}return e}var F2t=m2t,z2t=wE,B2t=w2t,$2t=S2t,V2t=_2t,U2t=y2t,V$=b2t,W2t=function(){var e=x$(),t=SL(1,0,0),r=SL(0,1,0);return function(n,i,o){var s=L$(i,o);return s<-.999999?(lm(e,t,i),D$(e)<1e-6&&lm(e,r,i),Vyt(e,e),B$(n,e,Math.PI),n):s>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(lm(e,i,o),n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=1+s,V$(n,n))}}();(function(){var e=EL(),t=EL();return function(r,n,i,o,s,a){return um(e,n,s,a),um(t,i,o,a),um(r,e,t,2*a*(1-a)),r}})();(function(){var e=Xyt();return function(t,r,n,i){return e[0]=n[0],e[3]=n[1],e[6]=n[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-r[0],e[5]=-r[1],e[8]=-r[2],V$(t,$$(t,e))}})();const j2t=[0,0,0,1];class AL extends mE{constructor(t=0,r=0,n=0,i=1){super(-0,-0,-0,-0),Array.isArray(t)&&arguments.length===1?this.copy(t):this.set(t,r,n,i)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}set(t,r,n,i){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this.check()}fromObject(t){return this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this.check()}fromMatrix3(t){return $$(this,t),this.check()}fromAxisRotation(t,r){return B$(this,t,r),this.check()}identity(){return x2t(this),this.check()}setAxisAngle(t,r){return this.fromAxisRotation(t,r)}get ELEMENTS(){return 4}get x(){return this[0]}set x(t){this[0]=xe(t)}get y(){return this[1]}set y(t){this[1]=xe(t)}get z(){return this[2]}set z(t){this[2]=xe(t)}get w(){return this[3]}set w(t){this[3]=xe(t)}len(){return V2t(this)}lengthSquared(){return U2t(this)}dot(t){return B2t(this,t)}rotationTo(t,r){return W2t(this,t,r),this.check()}add(t){return F2t(this,this,t),this.check()}calculateW(){return R2t(this,this),this.check()}conjugate(){return N2t(this,this),this.check()}invert(){return D2t(this,this),this.check()}lerp(t,r,n){return n===void 0?this.lerp(this,t,r):($2t(this,t,r,n),this.check())}multiplyRight(t){return CL(this,this,t),this.check()}multiplyLeft(t){return CL(this,t,this),this.check()}normalize(){const t=this.len(),r=t>0?1/t:0;return this[0]=this[0]*r,this[1]=this[1]*r,this[2]=this[2]*r,this[3]=this[3]*r,t===0&&(this[3]=1),this.check()}rotateX(t){return L2t(this,this,t),this.check()}rotateY(t){return I2t(this,this,t),this.check()}rotateZ(t){return O2t(this,this,t),this.check()}scale(t){return z2t(this,this,t),this.check()}slerp(t,r,n){let i,o,s;switch(arguments.length){case 1:({start:i=j2t,target:o,ratio:s}=t);break;case 2:i=this,o=t,s=r;break;default:i=t,o=r,s=n}return um(this,i,o,s),this.check()}transformVector4(t,r=new yE){return T2t(r,t,this),Wd(r,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(t,r){return this.setAxisAngle(t,r)}premultiply(t){return this.multiplyLeft(t)}multiply(t){return this.multiplyRight(t)}}const U$={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:Math.PI*2},ML=`#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))

struct AmbientLight {
 vec3 color;
};

struct PointLight {
 vec3 color;
 vec3 position;
 vec3 attenuation;
};

struct DirectionalLight {
  vec3 color;
  vec3 direction;
};

uniform AmbientLight lighting_uAmbientLight;
uniform PointLight lighting_uPointLight[MAX_LIGHTS];
uniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];
uniform int lighting_uPointLightCount;
uniform int lighting_uDirectionalLightCount;

uniform bool lighting_uEnabled;

float getPointLightAttenuation(PointLight pointLight, float distance) {
  return pointLight.attenuation.x
       + pointLight.attenuation.y * distance
       + pointLight.attenuation.z * distance * distance;
}

#endif
`,G2t={lightSources:{}};function Rb(){let{color:e=[0,0,0],intensity:t=1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.map(r=>r*t/255)}function H2t(e){let{ambientLight:t,pointLights:r=[],directionalLights:n=[]}=e;const i={};return t?i["lighting_uAmbientLight.color"]=Rb(t):i["lighting_uAmbientLight.color"]=[0,0,0],r.forEach((o,s)=>{i["lighting_uPointLight[".concat(s,"].color")]=Rb(o),i["lighting_uPointLight[".concat(s,"].position")]=o.position,i["lighting_uPointLight[".concat(s,"].attenuation")]=o.attenuation||[1,0,0]}),i.lighting_uPointLightCount=r.length,n.forEach((o,s)=>{i["lighting_uDirectionalLight[".concat(s,"].color")]=Rb(o),i["lighting_uDirectionalLight[".concat(s,"].direction")]=o.direction}),i.lighting_uDirectionalLightCount=n.length,i}function W$(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:G2t;if("lightSources"in e){const{ambientLight:t,pointLights:r,directionalLights:n}=e.lightSources||{};return t||r&&r.length>0||n&&n.length>0?Object.assign({},H2t({ambientLight:t,pointLights:r,directionalLights:n}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in e){const t={pointLights:[],directionalLights:[]};for(const r of e.lights||[])switch(r.type){case"ambient":t.ambientLight=r;break;case"directional":t.directionalLights.push(r);break;case"point":t.pointLights.push(r);break}return W$({lightSources:t})}return{}}const X2t={name:"lights",vs:ML,fs:ML,getUniforms:W$,defines:{MAX_LIGHTS:3}},Y2t=new Uint8Array([0,255,255,255]),q2t={pickingSelectedColor:null,pickingHighlightColor:Y2t,pickingActive:!1,pickingAttribute:!1};function Z2t(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:q2t;const t={};if(e.pickingSelectedColor!==void 0)if(!e.pickingSelectedColor)t.picking_uSelectedColorValid=0;else{const r=e.pickingSelectedColor.slice(0,3);t.picking_uSelectedColorValid=1,t.picking_uSelectedColor=r}if(e.pickingHighlightColor){const r=Array.from(e.pickingHighlightColor,n=>n/255);Number.isFinite(r[3])||(r[3]=1),t.picking_uHighlightColor=r}return e.pickingActive!==void 0&&(t.picking_uActive=Boolean(e.pickingActive),t.picking_uAttribute=Boolean(e.pickingAttribute)),t}const K2t=`uniform bool picking_uActive;
uniform bool picking_uAttribute;
uniform vec3 picking_uSelectedColor;
uniform bool picking_uSelectedColorValid;

out vec4 picking_vRGBcolor_Avalid;

const float COLOR_SCALE = 1. / 255.;

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.001;
}

bool isVertexPicked(vec3 vertexColor) {
  return
    picking_uSelectedColorValid &&
    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));
}

void picking_setPickingColor(vec3 pickingColor) {
  if (picking_uActive) {
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!picking_uAttribute) {
      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;
    }
  } else {
    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.r = value;
  }
}
void picking_setPickingAttribute(vec2 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}
void picking_setPickingAttribute(vec3 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,J2t=`uniform bool picking_uActive;
uniform vec3 picking_uSelectedColor;
uniform vec4 picking_uHighlightColor;

in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
  if (picking_uActive) {
    return color;
  }
  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    float highLightAlpha = picking_uHighlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}
vec4 picking_filterPickingColor(vec4 color) {
  if (picking_uActive) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}
vec4 picking_filterColor(vec4 color) {
  vec4 highightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highightColor);
}

`,Q2t={name:"picking",vs:K2t,fs:J2t,getUniforms:Z2t},tbt=`
uniform float lighting_uAmbient;
uniform float lighting_uDiffuse;
uniform float lighting_uShininess;
uniform vec3  lighting_uSpecularColor;

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {
    vec3 halfway_direction = normalize(light_direction + view_direction);
    float lambertian = dot(light_direction, normal_worldspace);
    float specular = 0.0;
    if (lambertian > 0.0) {
      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);
      specular = pow(specular_angle, lighting_uShininess);
    }
    lambertian = max(lambertian, 0.0);
    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;
}

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = surfaceColor;

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);
    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}

vec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = vec3(0, 0, 0);
  vec3 surfaceColor = vec3(0, 0, 0);

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}
`,ebt={};function rbt(e){const{ambient:t=.35,diffuse:r=.6,shininess:n=32,specularColor:i=[30,30,30]}=e;return{lighting_uAmbient:t,lighting_uDiffuse:r,lighting_uShininess:n,lighting_uSpecularColor:i.map(o=>o/255)}}function nbt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ebt;if(!("material"in e))return{};const{material:t}=e;return t?rbt(t):{lighting_uEnabled:!1}}const ibt={name:"gouraud-lighting",dependencies:[X2t],vs:tbt,defines:{LIGHTING_VERTEX:1},getUniforms:nbt},obt=`attribute float transform_elementID;
vec2 transform_getPixelSizeHalf(vec2 size) {
  return vec2(1.) / (2. * size);
}

vec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {
  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);
  float xIndex = transform_elementID - (yIndex * texSize[0]);
  return vec2(xIndex, yIndex);
}
vec2 transform_getTexCoord(vec2 size) {
  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);
  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);
  vec2 coord = indices / size + pixelSizeHalf;
  return coord;
}
vec2 transform_getPos(vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);
  return pos;
}
vec4 transform_getInput(sampler2D texSampler, vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec4 textureColor = texture2D(texSampler, texCoord);
  return textureColor;
}
`,sbt={name:"transform",vs:obt,fs:null};class t0{static getDefaultProgramManager(t){return t.luma=t.luma||{},t.luma.defaultProgramManager=t.luma.defaultProgramManager||new t0(t),t.luma.defaultProgramManager}constructor(t){this.gl=t,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(t){this._defaultModules.find(r=>r.name===t.name)||this._defaultModules.push(t),this.stateHash++}removeDefaultModule(t){const r=typeof t=="string"?t:t.name;this._defaultModules=this._defaultModules.filter(n=>n.name!==r),this.stateHash++}addShaderHook(t,r){r&&(t=Object.assign(r,{hook:t})),this._hookFunctions.push(t),this.stateHash++}get(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{vs:r="",fs:n="",defines:i={},inject:o={},varyings:s=[],bufferMode:a=35981,transpileToGLSL100:l=!1}=t,u=this._getModuleList(t.modules),c=this._getHash(r),f=this._getHash(n),h=u.map(b=>this._getHash(b.name)).sort(),d=s.map(b=>this._getHash(b)),p=Object.keys(i).sort(),v=Object.keys(o).sort(),m=[],g=[];for(const b of p)m.push(this._getHash(b)),m.push(this._getHash(i[b]));for(const b of v)g.push(this._getHash(b)),g.push(this._getHash(o[b]));const _="".concat(c,"/").concat(f,"D").concat(m.join("/"),"M").concat(h.join("/"),"I").concat(g.join("/"),"V").concat(d.join("/"),"H").concat(this.stateHash,"B").concat(a).concat(l?"T":"");if(!this._programCache[_]){const b=fyt(this.gl,{vs:r,fs:n,modules:u,inject:o,defines:i,hookFunctions:this._hookFunctions,transpileToGLSL100:l});this._programCache[_]=new v$(this.gl,{hash:_,vs:b.vs,fs:b.fs,varyings:s,bufferMode:a}),this._getUniforms[_]=b.getUniforms||(w=>{}),this._useCounts[_]=0}return this._useCounts[_]++,this._programCache[_]}getUniforms(t){return this._getUniforms[t.hash]||null}release(t){const r=t.hash;this._useCounts[r]--,this._useCounts[r]===0&&(this._programCache[r].delete(),delete this._programCache[r],delete this._getUniforms[r],delete this._useCounts[r])}_getHash(t){return this._hashes[t]===void 0&&(this._hashes[t]=this._hashCounter++),this._hashes[t]}_getModuleList(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const r=new Array(this._defaultModules.length+t.length),n={};let i=0;for(let o=0,s=this._defaultModules.length;o<s;++o){const a=this._defaultModules[o],l=a.name;r[i++]=a,n[l]=!0}for(let o=0,s=t.length;o<s;++o){const a=t[o],l=a.name;n[l]||(r[i++]=a,n[l]=!0)}return r.length=i,r}}const abt={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function lbt(e,t,r){const n={};let i=t.indices;for(const o in t.attributes){const s=t.attributes[o],a=ubt(o,r);if(o==="indices")i=s;else if(s.constant)n[a]=s.value;else{const l=s.value,u={...s};delete u.value,n[a]=[new Ee(e,l),u],cbt(o,u)}}if(i){const o=i.value||i;yt(o instanceof Uint16Array||o instanceof Uint32Array,'attribute array for "indices" must be of integer type');const s={size:1,isIndexed:i.isIndexed===void 0?!0:i.isIndexed};n.indices=[new Ee(e,{data:o,target:34963}),s]}return n}function ubt(e,t){const{attributeMap:r=abt}=t||{};return r&&r[e]||e}function cbt(e,t){let r;switch(e){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":r="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":r="vectors";break}switch(r){case"vectors":t.size=t.size||3;break;case"uvs":t.size=t.size||2;break}yt(Number.isFinite(t.size),"attribute ".concat(e," needs size"))}const cc=2,fbt=1e4,hbt="Model needs drawMode and vertexCount",xL=()=>{},dbt={};class Ss{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{id:n=Da("model")}=r;yt(C_(t)),this.id=n,this.gl=t,this.id=r.id||Da("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(r)}initialize(t){this.props={},this.programManager=t.programManager||t0.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:r=null,vs:n,fs:i,modules:o,defines:s,inject:a,varyings:l,bufferMode:u,transpileToGLSL100:c}=t;this.programProps={program:r,vs:n,fs:i,modules:o,defines:s,inject:a,varyings:l,bufferMode:u,transpileToGLSL100:c},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(t.moduleSettings))),this.drawMode=t.drawMode!==void 0?t.drawMode:4,this.vertexCount=t.vertexCount||0,this.geometryBuffers={},this.isInstanced=t.isInstanced||t.instanced||t.instanceCount>0,this._setModelProps(t),this.geometry={},yt(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),hbt)}setProps(t){this._setModelProps(t)}delete(){for(const t in this._attributes)this._attributes[t]!==this.attributes[t]&&this._attributes[t].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(t){const{program:r,vs:n,fs:i,modules:o,defines:s,inject:a,varyings:l,bufferMode:u,transpileToGLSL100:c}=t;this.programProps={program:r,vs:n,fs:i,modules:o,defines:s,inject:a,varyings:l,bufferMode:u,transpileToGLSL100:c},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(t){return this.drawMode=t,this}setVertexCount(t){return yt(Number.isFinite(t)),this.vertexCount=t,this}setInstanceCount(t){return yt(Number.isFinite(t)),this.instanceCount=t,this}setGeometry(t){return this.drawMode=t.drawMode,this.vertexCount=t.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=lbt(this.gl,t),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(df(t))return this;const r={};for(const n in t){const i=t[n];r[n]=i.getValue?i.getValue():i}return this.vertexArray.setAttributes(r),this}setUniforms(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.assign(this.uniforms,t),this}getModuleUniforms(t){this._checkProgram();const r=this.programManager.getUniforms(this.program);return r?r(t):{}}updateModuleSettings(t){const r=this.getModuleUniforms(t||{});return this.setUniforms(r)}clear(t){return hE(this.program.gl,t),this}draw(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._checkProgram();const{moduleSettings:r=null,framebuffer:n,uniforms:i={},attributes:o={},transformFeedback:s=this.transformFeedback,parameters:a={},vertexArray:l=this.vertexArray}=t;this.setAttributes(o),this.updateModuleSettings(r),this.setUniforms(i);let u;Ot.priority>=cc&&(u=this._logDrawCallStart(cc));const c=this.vertexArray.getDrawParams(),{isIndexed:f=c.isIndexed,indexType:h=c.indexType,indexOffset:d=c.indexOffset,vertexArrayInstanced:p=c.isInstanced}=this.props;p&&!this.isInstanced&&Ot.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:v,instanceCount:m}=this,{onBeforeRender:g=xL,onAfterRender:_=xL}=this.props;g(),this.program.setUniforms(this.uniforms);const b=this.program.draw(Object.assign(dbt,t,{logPriority:u,uniforms:null,framebuffer:n,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:l,transformFeedback:s,isIndexed:f,indexType:h,isInstanced:v,instanceCount:m,offset:f?d:0}));return _(),Ot.priority>=cc&&this._logDrawCallEnd(u,l,n),b}transform(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{discard:r=!0,feedbackBuffers:n,unbindModels:i=[]}=t;let{parameters:o}=t;n&&this._setFeedbackBuffers(n),r&&(o=Object.assign({},o,{[35977]:r})),i.forEach(s=>s.vertexArray.unbindBuffers());try{this.draw(Object.assign({},t,{parameters:o}))}finally{i.forEach(s=>s.vertexArray.bindBuffers())}return this}render(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ot.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(t).draw()}_setModelProps(t){Object.assign(this.props,t),"uniforms"in t&&this.setUniforms(t.uniforms),"pickable"in t&&(this.pickable=t.pickable),"instanceCount"in t&&(this.instanceCount=t.instanceCount),"geometry"in t&&this.setGeometry(t.geometry),"attributes"in t&&this.setAttributes(t.attributes),"_feedbackBuffers"in t&&this._setFeedbackBuffers(t._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:r}=this.programProps;if(r)this._managedProgram=!1;else{const{vs:n,fs:i,modules:o,inject:s,defines:a,varyings:l,bufferMode:u,transpileToGLSL100:c}=this.programProps;r=this.programManager.get({vs:n,fs:i,modules:o,inject:s,defines:a,varyings:l,bufferMode:u,transpileToGLSL100:c}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}yt(r instanceof v$,"Model needs a program"),this._programDirty=!1,r!==this.program&&(this.program=r,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new E_t(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const t in this.geometryBuffers){const r=this.geometryBuffers[t][0]||this.geometryBuffers[t];r instanceof Ee&&r.delete()}}_setAnimationProps(t){this.animated&&yt(t,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(df(t))return this;const{gl:r}=this.program;return this.transformFeedback=this.transformFeedback||new g$(r,{program:this.program}),this.transformFeedback.setBuffers(t),this}_logDrawCallStart(t){const r=t>3?0:fbt;if(!(Date.now()-this.lastLogTime<r))return this.lastLogTime=Date.now(),Ot.group(cc,">>> DRAWING MODEL ".concat(this.id),{collapsed:Ot.level<=2})(),t}_logDrawCallEnd(t,r,n,i){if(t===void 0)return;const o=M_t({vertexArray:r,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:s,unusedTable:a,unusedCount:l}=fL({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),{table:u,count:c}=fL({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0});c>0&&Ot.log("MISSING UNIFORMS",Object.keys(u))(),l>0&&Ot.log("UNUSED UNIFORMS",Object.keys(a))();const f=L_t(this.vertexArray.configuration);Ot.table(t,o)(),Ot.table(t,s)(),Ot.table(t+1,f)(),i&&i.log({logLevel:cc,message:"Rendered to ".concat(i.id)}),Ot.groupEnd(cc)()}}class pbt{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(r),Object.seal(this)}setupResources(t){for(const r of this.bindings)this._setupTransformFeedback(r,t)}updateModelProps(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyings:r}=this;return r.length>0&&(t=Object.assign({},t,{varyings:r})),t}getDrawOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this.bindings[this.currentIndex],{sourceBuffers:n,transformFeedback:i}=r;return{attributes:Object.assign({},n,t.attributes),transformFeedback:i}}swap(){return this.feedbackMap?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(t)}getBuffer(t){const{feedbackBuffers:r}=this.bindings[this.currentIndex],n=t?r[t]:null;return n?n instanceof Ee?n:n.buffer:null}getData(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyingName:r}=t,n=this.getBuffer(r);return n?n.getData():null}delete(){for(const t in this.resources)this.resources[t].delete()}_initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(t),this.varyings=t.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&yt(re(this.gl))}_getFeedbackBuffers(t){const{sourceBuffers:r={}}=t,n={};if(this.bindings[this.currentIndex]&&Object.assign(n,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const i in this.feedbackMap){const o=this.feedbackMap[i];i in r&&(n[o]=i)}Object.assign(n,t.feedbackBuffers);for(const i in n){const o=n[i];if(typeof o=="string"){const s=r[o],{byteLength:a,usage:l,accessor:u}=s;n[i]=this._createNewBuffer(i,{byteLength:a,usage:l,accessor:u})}}return n}_setupBuffers(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:r=null}=t;Object.assign(this.feedbackMap,t.feedbackMap);const n=this._getFeedbackBuffers(t);this._updateBindings({sourceBuffers:r,feedbackBuffers:n})}_setupTransformFeedback(t,r){let{model:n}=r;const{program:i}=n;t.transformFeedback=new g$(this.gl,{program:i,buffers:t.feedbackBuffers})}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this.feedbackMap){const{sourceBuffers:r,feedbackBuffers:n}=this._swapBuffers(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:r,feedbackBuffers:n})}}_updateBinding(t,r){return t?(Object.assign(t.sourceBuffers,r.sourceBuffers),Object.assign(t.feedbackBuffers,r.feedbackBuffers),t.transformFeedback&&t.transformFeedback.setBuffers(t.feedbackBuffers),t):{sourceBuffers:Object.assign({},r.sourceBuffers),feedbackBuffers:Object.assign({},r.feedbackBuffers)}}_swapBuffers(t){if(!this.feedbackMap)return null;const r=Object.assign({},t.sourceBuffers),n=Object.assign({},t.feedbackBuffers);for(const i in this.feedbackMap){const o=this.feedbackMap[i];r[i]=t.feedbackBuffers[o],n[o]=t.sourceBuffers[i],yt(n[o]instanceof Ee)}return{sourceBuffers:r,feedbackBuffers:n}}_createNewBuffer(t,r){const n=new Ee(this.gl,r);return this.resources[t]&&this.resources[t].delete(),this.resources[t]=n,n}_getNextIndex(){return(this.currentIndex+1)%2}}const vbt="transform_uSampler_",v1="transform_uSize_",LL="transform_position";function gbt(e){let{vs:t,sourceTextureMap:r,targetTextureVarying:n,targetTexture:i}=e,s=Object.keys(r).length,a=null;const l={};let u=t,c={};if(s>0||n){const f=u.split(`
`),h=f.slice();if(f.forEach((d,p,v)=>{if(s>0){const m=wbt(d,r);if(m){const{updatedLine:g,inject:_}=m;h[p]=g,c=nT([c,_]),Object.assign(l,m.samplerTextureMap),s--}}n&&!a&&(a=bbt(d,n))}),n){yt(i);const d="".concat(v1).concat(n),p="uniform vec2 ".concat(d,`;
`),v="     vec2 ".concat(LL," = transform_getPos(").concat(d,`);
     gl_Position = vec4(`).concat(LL,`, 0, 1.);
`);c=nT([c,{"vs:#decl":p,"vs:#main-start":v}])}u=h.join(`
`)}return{vs:u,targetTextureType:a,inject:c,samplerTextureMap:l}}function mbt(e){let{sourceTextureMap:t,targetTextureVarying:r,targetTexture:n}=e;const i={};let o,s;r&&({width:o,height:s}=n,i["".concat(v1).concat(r)]=[o,s]);for(const a in t)({width:o,height:s}=t[a]),i["".concat(v1).concat(a)]=[o,s];return i}function _bt(e){return T$(e,["attribute","in"])}function ybt(e){const t="".concat(vbt).concat(e),r="".concat(v1).concat(e),n="  uniform sampler2D ".concat(t,`;
  uniform vec2 `).concat(r,";");return{samplerName:t,sizeName:r,uniformDeclerations:n}}function bbt(e,t){const r=T$(e,["varying","out"]);return r&&r.name===t?r.type:null}function wbt(e,t){const r={},n=_bt(e);if(!n)return null;const{type:i,name:o}=n;if(o&&t[o]){const s="// ".concat(e," => Replaced by Transform with a sampler"),{samplerName:a,sizeName:l,uniformDeclerations:u}=ybt(o),c=byt(i),f="  ".concat(i," ").concat(o," = transform_getInput(").concat(a,", ").concat(l,").").concat(c,`;
`);return r[a]=o,{updatedLine:s,inject:{"vs:#decl":u,"vs:#main-start":f},samplerTextureMap:r}}return null}const Sbt={[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},Tbt="transform_output";class kbt{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(r),Object.seal(this)}updateModelProps(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this._processVertexShader(t);return Object.assign({},t,r)}getDrawOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:r,sourceTextures:n,framebuffer:i,targetTexture:o}=this.bindings[this.currentIndex],s=Object.assign({},r,t.attributes),a=Object.assign({},t.uniforms),l=Object.assign({},t.parameters);let u=t.discard;if(this.hasSourceTextures||this.hasTargetTexture){s.transform_elementID=this.elementIDBuffer;for(const f in this.samplerTextureMap){const h=this.samplerTextureMap[f];a[f]=n[h]}this._setSourceTextureParameters();const c=mbt({sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:o});Object.assign(a,c)}return this.hasTargetTexture&&(u=!1,l.viewport=[0,0,i.width,i.height]),{attributes:s,framebuffer:i,uniforms:a,discard:u,parameters:l}}swap(){return this._swapTexture?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupTextures(t)}getTargetTexture(){const{targetTexture:t}=this.bindings[this.currentIndex];return t}getData(){let{packed:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{framebuffer:r}=this.bindings[this.currentIndex],n=M_(r);if(!t)return n;const i=n.constructor,o=wyt(this.targetTextureType),s=new i(n.length*o/4);let a=0;for(let l=0;l<n.length;l+=4)for(let u=0;u<o;u++)s[a++]=n[l+u];return s}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{_targetTextureVarying:r,_swapTexture:n}=t;this._swapTexture=n,this.targetTextureVarying=r,this.hasTargetTexture=r,this._setupTextures(t)}_createTargetTexture(t){const{sourceTextures:r,textureOrReference:n}=t;if(n instanceof wn)return n;const i=r[n];return i?(this._targetRefTexName=n,this._createNewTexture(i)):null}_setupTextures(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:r,_sourceTextures:n={},_targetTexture:i}=t,o=this._createTargetTexture({sourceTextures:n,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||n&&Object.keys(n).length>0,this._updateBindings({sourceBuffers:r,sourceTextures:n,targetTexture:o}),"elementCount"in t&&this._updateElementIDBuffer(t.elementCount)}_updateElementIDBuffer(t){if(typeof t!="number"||this.elementCount>=t)return;const r=new Float32Array(t);r.forEach((n,i,o)=>{o[i]=i}),this.elementIDBuffer?this.elementIDBuffer.setData({data:r}):this.elementIDBuffer=new Ee(this.gl,{data:r,accessor:{size:1}}),this.elementCount=t}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this._swapTexture){const{sourceTextures:r,targetTexture:n}=this._swapTextures(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:r,targetTexture:n})}}_updateBinding(t,r){const{sourceBuffers:n,sourceTextures:i,targetTexture:o}=r;if(t||(t={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(t.sourceTextures,i),Object.assign(t.sourceBuffers,n),o){t.targetTexture=o;const{width:s,height:a}=o,{framebuffer:l}=t;l?(l.update({attachments:{[36064]:o},resizeAttachments:!1}),l.resize({width:s,height:a})):t.framebuffer=new ar(this.gl,{id:"transform-framebuffer",width:s,height:a,attachments:{[36064]:o}})}return t}_setSourceTextureParameters(){const t=this.currentIndex,{sourceTextures:r}=this.bindings[t];for(const n in r)r[n].setParameters(Sbt)}_swapTextures(t){if(!this._swapTexture)return null;const r=Object.assign({},t.sourceTextures);r[this._swapTexture]=t.targetTexture;const n=t.sourceTextures[this._swapTexture];return{sourceTextures:r,targetTexture:n}}_createNewTexture(t){const r=f$(t,{parameters:{[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},pixelStore:{[37440]:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=r,r}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceTextures:r,targetTexture:n}=this.bindings[this.currentIndex],{vs:i,uniforms:o,targetTextureType:s,inject:a,samplerTextureMap:l}=gbt({vs:t.vs,sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:n}),u=nT([t.inject||{},a]);this.targetTextureType=s,this.samplerTextureMap=l;const c=t._fs||k$({version:d$(i),input:this.targetTextureVarying,inputType:s,output:Tbt}),f=this.hasSourceTextures||this.targetTextureVarying?[sbt].concat(t.modules||[]):t.modules;return{vs:i,fs:c,modules:f,uniforms:o,inject:u}}}class SE{static isSupported(t){return re(t)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(r),Object.seal(this)}delete(){const{model:t,bufferTransform:r,textureTransform:n}=this;t&&t.delete(),r&&r.delete(),n&&n.delete()}run(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{clearRenderTarget:r=!0}=t,n=this._updateDrawOptions(t);r&&n.framebuffer&&n.framebuffer.clear({color:!0}),this.model.transform(n)}swap(){let t=!1;const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of r)t=t||n.swap();yt(t,"Nothing to swap")}getBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(t)}getData(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of r){const i=n.getData(t);if(i)return i}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};"elementCount"in t&&this.model.setVertexCount(t.elementCount);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of r)n.update(t)}_initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{gl:r}=this;this._buildResourceTransforms(r,t),t=this._updateModelProps(t),this.model=new Ss(r,Object.assign({},t,{fs:t.fs||k$({version:d$(t.vs)}),id:t.id||"transform-model",drawMode:t.drawMode||0,vertexCount:t.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(t){let r=Object.assign({},t);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)r=i.updateModelProps(r);return r}_buildResourceTransforms(t,r){Pbt(r)&&(this.bufferTransform=new pbt(t,r)),Ebt(r)&&(this.textureTransform=new kbt(t,r)),yt(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(t){let r=Object.assign({},t);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)r=Object.assign(r,i.getDrawOptions(r));return r}}function Pbt(e){return!!(!df(e.feedbackBuffers)||!df(e.feedbackMap)||e.varyings&&e.varyings.length>0)}function Ebt(e){return!!(!df(e._sourceTextures)||e._targetTexture||e._targetTextureVarying)}const IL={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class Ou{static get DRAW_MODE(){return IL}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:r=Da("geometry"),drawMode:n=IL.TRIANGLES,attributes:i={},indices:o=null,vertexCount:s=null}=t;this.id=r,this.drawMode=n|0,this.attributes={},this.userData={},this._setAttributes(i,o),this.vertexCount=s||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(t){return"Geometry ".concat(this.id," attribute ").concat(t)}_setAttributes(t,r){r&&(this.indices=ArrayBuffer.isView(r)?{value:r,size:1}:r);for(const n in t){let i=t[n];i=ArrayBuffer.isView(i)?{value:i}:i,yt(ArrayBuffer.isView(i.value),"".concat(this._print(n),": must be typed array or object with value as typed array")),(n==="POSITION"||n==="positions")&&!i.size&&(i.size=3),n==="indices"?(yt(!this.indices),this.indices=i):this.attributes[n]=i}return this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(t,r){if(r)return r.value.length;let n=1/0;for(const i in t){const o=t[i],{value:s,size:a,constant:l}=o;!l&&s&&a>=1&&(n=Math.min(n,s.length/a))}return yt(Number.isFinite(n)),n}}let Cbt=1,Abt=1;class j${constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(t){const{delay:r=0,duration:n=Number.POSITIVE_INFINITY,rate:i=1,repeat:o=1}=t,s=Cbt++,a={time:0,delay:r,duration:n,rate:i,repeat:o};return this._setChannelTime(a,this.time),this.channels.set(s,a),s}removeChannel(t){this.channels.delete(t);for(const[r,n]of this.animations)n.channel===t&&this.detachAnimation(r)}isFinished(t){const r=this.channels.get(t);return r===void 0?!1:this.time>=r.delay+r.duration*r.repeat}getTime(t){if(t===void 0)return this.time;const r=this.channels.get(t);return r===void 0?-1:r.time}setTime(t){this.time=Math.max(0,t);const r=this.channels.values();for(const i of r)this._setChannelTime(i,this.time);const n=this.animations.values();for(const i of n){const{animation:o,channel:s}=i;o.setTime(this.getTime(s))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(t,r){const n=Abt++;return this.animations.set(n,{animation:t,channel:r}),t.setTime(this.getTime(r)),n}detachAnimation(t){this.animations.delete(t)}update(t){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=t),this.setTime(this.time+(t-this.lastEngineTime)),this.lastEngineTime=t)}_setChannelTime(t,r){const n=r-t.delay,i=t.duration*t.repeat;n>=i?t.time=t.duration*t.rate:(t.time=Math.max(0,n)%t.duration,t.time*=t.rate)}}const G$="#define SMOOTH_EDGE_RADIUS 0.5",Mbt=`
`.concat(G$,`

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`),xbt=`
`.concat(G$,`

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`),Lbt={name:"geometry",vs:Mbt,fs:xbt},se={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(se,"IDENTITY",{get:()=>(Yt.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const Ii={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Na={common:0,meters:1,pixels:2},OL={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},e0={DRAW:"draw",MASK:"mask"},Ibt=Object.keys(se).map(e=>"const int COORDINATE_SYSTEM_".concat(e," = ").concat(se[e],";")).join(""),Obt=Object.keys(Ii).map(e=>"const int PROJECTION_MODE_".concat(e," = ").concat(Ii[e],";")).join(""),Rbt=Object.keys(Na).map(e=>"const int UNIT_".concat(e.toUpperCase()," = ").concat(Na[e],";")).join(""),Dbt="".concat(Ibt,`
`).concat(Obt,`
`).concat(Rbt,`

uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;

const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0; // meters
const float GLOBE_RADIUS = 256.0;

// returns an adjustment factor for uCommonUnitsPerMeter
float project_size() {
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
    project_uPseudoMeters == false) {

    // uCommonUnitsPerMeter in low-zoom Web Mercator is non-linear
    // Adjust by 1 / cos(latitude)
    // If geometry.position (vertex in common space) is populated, use it
    // Otherwise use geometry.worldPosition (anchor in world space)
    
    if (geometry.position.w == 0.0) {
      float y = clamp(geometry.worldPosition.y, -89.9, 89.9);
      return 1.0 / cos(radians(y));
    }

    // latitude from common y: 2.0 * (atan(exp(y / TILE_SIZE * 2.0 * PI - PI)) - PI / 4.0)
    // Taylor series of 1 / cos(latitude)
    // Max error < 0.003
  
    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    float y2 = y * y;
    float y4 = y2 * y2;
    float y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}
//
// Scaling offsets - scales meters to "world distance"
// Note the scalar version of project_size is for scaling the z component only
//
float project_size(float meters) {
  return meters * project_uCommonUnitsPerMeter.z * project_size();
}

vec2 project_size(vec2 meters) {
  return meters * project_uCommonUnitsPerMeter.xy * project_size();
}

vec3 project_size(vec3 meters) {
  return meters * project_uCommonUnitsPerMeter * project_size();
}

vec4 project_size(vec4 meters) {
  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}

// Get rotation matrix that aligns the z axis with the given up vector
// Find 3 unit vectors ux, uy, uz that are perpendicular to each other and uz == up
mat3 project_get_orientation_matrix(vec3 up) {
  vec3 uz = normalize(up);
  // Tangent on XY plane
  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
  vec3 uy = cross(uz, ux);
  return mat3(ux, uy, uz);
}

bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    transform = project_get_orientation_matrix(commonPosition);
    return true;
  }
  return false;
}

//
// Projecting normal - transform deltas from current coordinate system to
// normals in the worldspace
//
vec3 project_normal(vec3 vector) {
  // Apply model matrix
  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
  mat3 rotation;
  if (project_needs_rotation(geometry.position.xyz, rotation)) {
    n = rotation * n;
  }
  return n;
}

vec4 project_offset_(vec4 offset) {
  float dy = offset.y;
  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}

//
// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]
//
vec2 project_mercator_(vec2 lnglat) {
  float x = lnglat.x;
  if (project_uWrapLongitude) {
    x = mod(x + 180., 360.0) - 180.;
  }
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

vec3 project_globe_(vec3 lnglatz) {
  float lambda = radians(lnglatz.x);
  float phi = radians(lnglatz.y);
  float cosPhi = cos(phi);
  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;

  return vec3(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}

//
// Projects positions (defined by project_uCoordinateSystem) to common space (defined by project_uProjectionMode)
//
vec4 project_position(vec4 position, vec3 position64Low) {
  vec4 position_world = project_uModelMatrix * position;

  // Work around for a Mac+NVIDIA bug https://github.com/visgl/deck.gl/issues/4145
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_mercator_(position_world.xy),
        project_size(position_world.z),
        position_world.w
      );
    }
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world.xyz += project_uCoordinateOrigin;
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
        // Too far from the projection center for offset mode to be accurate
        // Only use high parts
        return vec4(
          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
          project_size(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    // Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.
    position_world.xyz -= project_uCoordinateOrigin;
  }

  // Translation is already added to the high parts
  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_LOW);
}

vec3 project_position(vec3 position, vec3 position64Low) {
  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
  return projected_position.xyz;
}

vec3 project_position(vec3 position) {
  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

vec2 project_position(vec2 position) {
  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  return viewProjectionMatrix * position + center;
}

//
// Projects from common space coordinates to clip space.
// Uses project_uViewProjectionMatrix
//
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}

// Returns a clip space offset that corresponds to a given number of screen pixels
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
  return offset * project_uFocalDistance;
}

float project_size_to_pixel(float meters) {
  return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
  if (unit == UNIT_METERS) return project_size_to_pixel(size);
  if (unit == UNIT_COMMON) return size * project_uScale;
  // UNIT_PIXELS
  return size;
}
float project_pixel_size(float pixels) {
  return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
  return pixels / project_uScale;
}
`);function Nbt(e,t){if(e===t)return!0;if(Array.isArray(e)){const r=e.length;if(!t||t.length!==r)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}return!1}function r0(e){let t={},r;return n=>{for(const i in n)if(!Nbt(n[i],t[i])){r=e(n),t=n;break}return r}}const RL=[0,0,0,0],Fbt=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],H$=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],zbt=[0,0,0],X$=[0,0,0],Bbt=r0(Ubt);function Y$(e,t,r=X$){r.length<3&&(r=[r[0],r[1],0]);let n=r,i,o=!0;switch(t===se.LNGLAT_OFFSETS||t===se.METER_OFFSETS?i=r:i=e.isGeospatial?[Math.fround(e.longitude),Math.fround(e.latitude),0]:null,e.projectionMode){case Ii.WEB_MERCATOR:(t===se.LNGLAT||t===se.CARTESIAN)&&(i=[0,0,0],o=!1);break;case Ii.WEB_MERCATOR_AUTO_OFFSET:t===se.LNGLAT?n=i:t===se.CARTESIAN&&(n=[Math.fround(e.center[0]),Math.fround(e.center[1]),0],i=e.unprojectPosition(n),n[0]-=r[0],n[1]-=r[1],n[2]-=r[2]);break;case Ii.IDENTITY:n=e.position.map(Math.fround),n[2]=n[2]||0;break;case Ii.GLOBE:o=!1,i=null;break;default:o=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:n,offsetMode:o}}function $bt(e,t,r){const{viewMatrixUncentered:n,projectionMatrix:i}=e;let{viewMatrix:o,viewProjectionMatrix:s}=e,a=RL,l=RL,u=e.cameraPosition;const{geospatialOrigin:c,shaderCoordinateOrigin:f,offsetMode:h}=Y$(e,t,r);return h&&(l=e.projectPosition(c||f),u=[u[0]-l[0],u[1]-l[1],u[2]-l[2]],l[3]=1,a=Ff([],l,s),o=n||o,s=tu([],i,o),s=tu([],s,Fbt)),{viewMatrix:o,viewProjectionMatrix:s,projectionCenter:a,originCommon:l,cameraPosCommon:u,shaderCoordinateOrigin:f,geospatialOrigin:c}}function Vbt({viewport:e,devicePixelRatio:t=1,modelMatrix:r=null,coordinateSystem:n=se.DEFAULT,coordinateOrigin:i=X$,autoWrapLongitude:o=!1}){n===se.DEFAULT&&(n=e.isGeospatial?se.LNGLAT:se.CARTESIAN);const s=Bbt({viewport:e,devicePixelRatio:t,coordinateSystem:n,coordinateOrigin:i});return s.project_uWrapLongitude=o,s.project_uModelMatrix=r||H$,s}function Ubt({viewport:e,devicePixelRatio:t,coordinateSystem:r,coordinateOrigin:n}){const{projectionCenter:i,viewProjectionMatrix:o,originCommon:s,cameraPosCommon:a,shaderCoordinateOrigin:l,geospatialOrigin:u}=$bt(e,r,n),c=e.getDistanceScales(),f=[e.width*t,e.height*t],h=Ff([],[0,0,-e.focalDistance,1],e.projectionMatrix)[3]||1,d={project_uCoordinateSystem:r,project_uProjectionMode:e.projectionMode,project_uCoordinateOrigin:l,project_uCommonOrigin:s.slice(0,3),project_uCenter:i,project_uPseudoMeters:Boolean(e._pseudoMeters),project_uViewportSize:f,project_uDevicePixelRatio:t,project_uFocalDistance:h,project_uCommonUnitsPerMeter:c.unitsPerMeter,project_uCommonUnitsPerWorldUnit:c.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:zbt,project_uScale:e.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:o,project_uModelMatrix:H$,project_uCameraPosition:a};if(u){const p=e.getDistanceScales(u);switch(r){case se.METER_OFFSETS:d.project_uCommonUnitsPerWorldUnit=p.unitsPerMeter,d.project_uCommonUnitsPerWorldUnit2=p.unitsPerMeter2;break;case se.LNGLAT:case se.LNGLAT_OFFSETS:e._pseudoMeters||(d.project_uCommonUnitsPerMeter=p.unitsPerMeter),d.project_uCommonUnitsPerWorldUnit=p.unitsPerDegree,d.project_uCommonUnitsPerWorldUnit2=p.unitsPerDegree2;break;case se.CARTESIAN:d.project_uCommonUnitsPerWorldUnit=[1,1,p.unitsPerMeter[2]],d.project_uCommonUnitsPerWorldUnit2=[0,0,p.unitsPerMeter2[2]];break}}return d}const Wbt={};function jbt(e=Wbt){return"viewport"in e?Vbt(e):{}}const TE={name:"project",dependencies:[kyt,Lbt],vs:Dbt,getUniforms:jbt},Gbt=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,Ru={name:"project32",dependencies:[TE],vs:Gbt};function Hbt(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Kc(e,t){const r=Ff([],t,e);return wE(r,r,1/r[3]),r}function DL(e,t){const r=e%t;return r<0?t+r:r}function uT(e,t,r){return e<t?t:e>r?r:e}function Xbt(e){return Math.log(e)*Math.LOG2E}const kE=Math.log2||Xbt;function Ts(e,t){if(!e)throw new Error(t||"@math.gl/web-mercator: assertion failed.")}const Oi=Math.PI,q$=Oi/4,zi=Oi/180,cT=180/Oi,Pp=512,fT=4003e4,Ov=85.051129,Ybt=1.5;function qbt(e){return kE(e)}function Fa(e){const[t,r]=e;Ts(Number.isFinite(t)),Ts(Number.isFinite(r)&&r>=-90&&r<=90,"invalid latitude");const n=t*zi,i=r*zi,o=Pp*(n+Oi)/(2*Oi),s=Pp*(Oi+Math.log(Math.tan(q$+i*.5)))/(2*Oi);return[o,s]}function vf(e){const[t,r]=e,n=t/Pp*(2*Oi)-Oi,i=2*(Math.atan(Math.exp(r/Pp*(2*Oi)-Oi))-q$);return[n*cT,i*cT]}function Zbt(e){const{latitude:t}=e;Ts(Number.isFinite(t));const r=Math.cos(t*zi);return qbt(fT*r)-9}function hT(e){const{latitude:t,longitude:r,highPrecision:n=!1}=e;Ts(Number.isFinite(t)&&Number.isFinite(r));const i=Pp,o=Math.cos(t*zi),s=i/360,a=s/o,l=i/fT/o,u={unitsPerMeter:[l,l,l],metersPerUnit:[1/l,1/l,1/l],unitsPerDegree:[s,a,l],degreesPerUnit:[1/s,1/a,1/l]};if(n){const c=zi*Math.tan(t*zi)/o,f=s*c/2,h=i/fT*c,d=h/a*l;u.unitsPerDegree2=[0,f,h],u.unitsPerMeter2=[d,0,d]}return u}function Z$(e,t){const[r,n,i]=e,[o,s,a]=t,{unitsPerMeter:l,unitsPerMeter2:u}=hT({longitude:r,latitude:n,highPrecision:!0}),c=Fa(e);c[0]+=o*(l[0]+u[0]*s),c[1]+=s*(l[1]+u[1]*s);const f=vf(c),h=(i||0)+(a||0);return Number.isFinite(i)||Number.isFinite(a)?[f[0],f[1],h]:f}function Kbt(e){const{height:t,pitch:r,bearing:n,altitude:i,scale:o,center:s}=e,a=Hbt();p1(a,a,[0,0,-i]),F$(a,a,-r*zi),z$(a,a,n*zi);const l=o/t;return bE(a,a,[l,l,l]),s&&p1(a,a,$yt([],s)),a}function Jbt(e){const{width:t,height:r,altitude:n,pitch:i=0,offset:o,center:s,scale:a,nearZMultiplier:l=1,farZMultiplier:u=1}=e;let{fovy:c=g1(Ybt)}=e;n!==void 0&&(c=g1(n));const f=c*zi,h=i*zi,d=K$(c);let p=d;s&&(p+=s[2]*a/Math.cos(h)/r);const v=f*(.5+(o?o[1]:0)/r),m=Math.sin(v)*p/Math.sin(uT(Math.PI/2-h-v,.01,Math.PI-.01)),g=Math.sin(h)*m+p,_=p*10,b=Math.min(g*u,_);return{fov:f,aspect:t/r,focalDistance:d,near:l,far:b}}function g1(e){return 2*Math.atan(.5/e)*cT}function K$(e){return .5/Math.tan(.5*e*zi)}function J$(e,t){const[r,n,i=0]=e;return Ts(Number.isFinite(r)&&Number.isFinite(n)&&Number.isFinite(i)),Kc(t,[r,n,i,1])}function x_(e,t,r=0){const[n,i,o]=e;if(Ts(Number.isFinite(n)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(o))return Kc(t,[n,i,o,1]);const s=Kc(t,[n,i,0,1]),a=Kc(t,[n,i,1,1]),l=s[2],u=a[2],c=l===u?0:((r||0)-l)/(u-l);return C$([],s,a,c)}function Q$(e){const{width:t,height:r,bounds:n,minExtent:i=0,maxZoom:o=24,offset:s=[0,0]}=e,[[a,l],[u,c]]=n,f=Qbt(e.padding),h=Fa([a,uT(c,-Ov,Ov)]),d=Fa([u,uT(l,-Ov,Ov)]),p=[Math.max(Math.abs(d[0]-h[0]),i),Math.max(Math.abs(d[1]-h[1]),i)],v=[t-f.left-f.right-Math.abs(s[0])*2,r-f.top-f.bottom-Math.abs(s[1])*2];Ts(v[0]>0&&v[1]>0);const m=v[0]/p[0],g=v[1]/p[1],_=(f.right-f.left)/2/m,b=(f.top-f.bottom)/2/g,w=[(d[0]+h[0])/2+_,(d[1]+h[1])/2+b],T=vf(w),S=Math.min(o,kE(Math.abs(Math.min(m,g))));return Ts(Number.isFinite(S)),{longitude:T[0],latitude:T[1],zoom:S}}function Qbt(e=0){return typeof e=="number"?{top:e,bottom:e,left:e,right:e}:(Ts(Number.isFinite(e.top)&&Number.isFinite(e.bottom)&&Number.isFinite(e.left)&&Number.isFinite(e.right)),e)}const NL=Math.PI/180;function twt(e,t=0){const{width:r,height:n,unproject:i}=e,o={targetZ:t},s=i([0,n],o),a=i([r,n],o);let l,u;const c=e.fovy?.5*e.fovy*NL:Math.atan(.5/e.altitude),f=(90-e.pitch)*NL;return c>f-.01?(l=FL(e,0,t),u=FL(e,r,t)):(l=i([0,0],o),u=i([r,0],o)),[s,a,u,l]}function FL(e,t,r){const{pixelUnprojectionMatrix:n}=e,i=Kc(n,[t,0,1,1]),o=Kc(n,[t,e.height,1,1]),a=(r*e.distanceScales.unitsPerMeter[2]-i[2])/(o[2]-i[2]),l=C$([],i,o,a),u=vf(l);return u.push(r),u}const zL=512;function ewt(e){const{width:t,height:r,pitch:n=0}=e;let{longitude:i,latitude:o,zoom:s,bearing:a=0}=e;(i<-180||i>180)&&(i=DL(i+180,360)-180),(a<-180||a>180)&&(a=DL(a+180,360)-180);const l=kE(r/zL);if(s<=l)s=l,o=0;else{const u=r/2/Math.pow(2,s),c=vf([0,u])[1];if(o<c)o=c;else{const f=vf([0,zL-u])[1];o>f&&(o=f)}}return{width:t,height:r,longitude:i,latitude:o,zoom:s,pitch:n,bearing:a}}const rwt=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,nwt=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture2D(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,iwt=r0(uwt),owt=r0(cwt),swt=[0,0,0,1],awt=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function lwt(e,t){const[r,n,i]=e,o=x_([r,n,i],t);return Number.isFinite(i)?o:[o[0],o[1],0]}function uwt({viewport:e,center:t}){return new Xr(e.viewProjectionMatrix).invert().transform(t)}function cwt({viewport:e,shadowMatrices:t}){const r=[],n=e.pixelUnprojectionMatrix,i=e.isGeospatial?void 0:1,o=[[0,0,i],[e.width,0,i],[0,e.height,i],[e.width,e.height,i],[0,0,-1],[e.width,0,-1],[0,e.height,-1],[e.width,e.height,-1]].map(s=>lwt(s,n));for(const s of t){const a=s.clone().translate(new kt(e.center).negate()),l=o.map(c=>a.transform(c)),u=new Xr().ortho({left:Math.min(...l.map(c=>c[0])),right:Math.max(...l.map(c=>c[0])),bottom:Math.min(...l.map(c=>c[1])),top:Math.max(...l.map(c=>c[1])),near:Math.min(...l.map(c=>-c[2])),far:Math.max(...l.map(c=>-c[2]))});r.push(u.multiplyRight(s))}return r}function fwt(e,t){const{shadowEnabled:r=!0}=e;if(!r||!e.shadowMatrices||!e.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const n={shadow_uDrawShadowMap:Boolean(e.drawToShadowMap),shadow_uUseShadowMap:e.shadowMaps?e.shadowMaps.length>0:!1,shadow_uColor:e.shadowColor||swt,shadow_uLightId:e.shadowLightId||0,shadow_uLightCount:e.shadowMatrices.length},i=iwt({viewport:e.viewport,center:t.project_uCenter}),o=[],s=owt({shadowMatrices:e.shadowMatrices,viewport:e.viewport}).slice();for(let a=0;a<e.shadowMatrices.length;a++){const l=s[a],u=l.clone().translate(new kt(e.viewport.center).negate());t.project_uCoordinateSystem===se.LNGLAT&&t.project_uProjectionMode===Ii.WEB_MERCATOR?(s[a]=u,o[a]=i):(s[a]=l.clone().multiplyRight(awt),o[a]=u.transform(i))}for(let a=0;a<s.length;a++)n["shadow_uViewProjectionMatrices[".concat(a,"]")]=s[a],n["shadow_uProjectCenters[".concat(a,"]")]=o[a],e.shadowMaps&&e.shadowMaps.length>0?n["shadow_uShadowMap".concat(a)]=e.shadowMaps[a]:n["shadow_uShadowMap".concat(a)]=e.dummyShadowMap;return n}const Db={name:"shadow",dependencies:[TE],vs:rwt,fs:nwt,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(e={},t={})=>"viewport"in e&&(e.drawToShadowMap||e.shadowMaps&&e.shadowMaps.length>0)?fwt(e,t):{}},Du={inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}},...Q2t},hwt=[TE],dwt=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function pwt(e){const t=t0.getDefaultProgramManager(e);for(const r of hwt)t.addDefaultModule(r);for(const r of dwt)t.addShaderHook(r);return t}const vwt=[255,255,255],gwt=1;let mwt=0;class _wt{constructor(t={}){P(this,"id",void 0),P(this,"color",void 0),P(this,"intensity",void 0),P(this,"type","ambient");const{color:r=vwt}=t,{intensity:n=gwt}=t;this.id=t.id||"ambient-".concat(mwt++),this.color=r,this.intensity=n}}const ywt=[255,255,255],bwt=1,wwt=[0,0,-1];let Swt=0;class BL{constructor(t={}){P(this,"id",void 0),P(this,"color",void 0),P(this,"intensity",void 0),P(this,"type","directional"),P(this,"direction",void 0),P(this,"shadow",void 0);const{color:r=ywt}=t,{intensity:n=bwt}=t,{direction:i=wwt}=t,{_shadow:o=!1}=t;this.id=t.id||"directional-".concat(Swt++),this.color=r,this.intensity=n,this.type="directional",this.direction=new kt(i).normalize().toArray(),this.shadow=o}getProjectedLight(t){return this}}class Twt{constructor(t,r={id:"pass"}){P(this,"id",void 0),P(this,"gl",void 0),P(this,"props",void 0);const{id:n}=r;this.id=n,this.gl=t,this.props={...r}}setProps(t){Object.assign(this.props,t)}render(t){}cleanup(){}}class L_ extends Twt{constructor(...t){super(...t),P(this,"_lastRenderIndex",-1)}render(t){const r=this.gl;return ws(r,{framebuffer:t.target}),this._drawLayers(t)}_drawLayers(t){const{target:r,moduleParameters:n,viewports:i,views:o,onViewportActive:s,clearStack:a=!0,clearCanvas:l=!0}=t;t.pass=t.pass||"unknown";const u=this.gl;l&&Pwt(u),a&&(this._lastRenderIndex=-1);const c=[];for(const f of i){const h=o&&o[f.id];s(f);const d=this._getDrawLayerParams(f,t),p=f.subViewports||[f];for(const v of p){const m=this._drawLayersInViewport(u,{target:r,moduleParameters:n,viewport:v,view:h,pass:t.pass,layers:t.layers},d);c.push(m)}}return c}_getDrawLayerParams(t,{layers:r,pass:n,layerFilter:i,cullRect:o,effects:s,moduleParameters:a}){const l=[],u=tV(this._lastRenderIndex+1),c={layer:r[0],viewport:t,isPicking:n.startsWith("picking"),renderPass:n,cullRect:o},f={};for(let h=0;h<r.length;h++){const d=r[h],p=this._shouldDrawLayer(d,c,i,f),v={shouldDrawLayer:p};p&&(v.layerRenderIndex=u(d,p),v.moduleParameters=this._getModuleParameters(d,s,n,a),v.layerParameters=this.getLayerParameters(d,h,t)),l[h]=v}return l}_drawLayersInViewport(t,{layers:r,moduleParameters:n,pass:i,target:o,viewport:s,view:a},l){const u=kwt(t,{moduleParameters:n,target:o,viewport:s});if(a&&a.props.clear){const f=a.props.clear===!0?{color:!0,depth:!0}:a.props.clear;ai(t,{scissorTest:!0,scissor:u},()=>hE(t,f))}const c={totalCount:r.length,visibleCount:0,compositeCount:0,pickableCount:0};ws(t,{viewport:u});for(let f=0;f<r.length;f++){const h=r[f],{shouldDrawLayer:d,layerRenderIndex:p,moduleParameters:v,layerParameters:m}=l[f];if(d&&h.props.pickable&&c.pickableCount++,h.isComposite)c.compositeCount++;else if(d){c.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,p),v.viewport=s;try{h._drawLayer({moduleParameters:v,uniforms:{layerIndex:p},parameters:m})}catch(g){h.raiseError(g,"drawing ".concat(h," to ").concat(i))}}}return c}shouldDrawLayer(t){return!0}getModuleParameters(t,r){return null}getLayerParameters(t,r,n){return t.props.parameters}_shouldDrawLayer(t,r,n,i){if(!(t.props.visible&&this.shouldDrawLayer(t)))return!1;r.layer=t;let s=t.parent;for(;s;){if(!s.props.visible||!s.filterSubLayer(r))return!1;r.layer=s,s=s.parent}if(n){const a=r.layer.id;if(a in i||(i[a]=n(r)),!i[a])return!1}return t.activateViewport(r.viewport),!0}_getModuleParameters(t,r,n,i){var o;const s=Object.assign(Object.create(((o=t.internalState)===null||o===void 0?void 0:o.propsInTransition)||t.props),{autoWrapLongitude:t.wrapLongitude,viewport:t.context.viewport,mousePosition:t.context.mousePosition,pickingActive:0,devicePixelRatio:hf(this.gl)});if(r)for(const l of r){var a;Object.assign(s,(a=l.getModuleParameters)===null||a===void 0?void 0:a.call(l,t))}return Object.assign(s,this.getModuleParameters(t,r),i)}}function tV(e=0,t={}){const r={},n=(i,o)=>{const s=i.props._offset,a=i.id,l=i.parent&&i.parent.id;let u;if(l&&!(l in t)&&n(i.parent,!1),l in r){const c=r[l]=r[l]||tV(t[l],t);u=c(i,o),r[a]=c}else Number.isFinite(s)?(u=s+(t[l]||0),r[a]=null):u=e;return o&&u>=e&&(e=u+1),t[a]=u,u};return n}function kwt(e,{moduleParameters:t,target:r,viewport:n}){const i=r&&r.id!=="default-framebuffer",o=t&&t.devicePixelRatio||hf(e),s=i?r.height:e.drawingBufferHeight,a=n;return[a.x*o,s-(a.y+a.height)*o,a.width*o,a.height*o]}function Pwt(e){const t=e.drawingBufferWidth,r=e.drawingBufferHeight;ws(e,{viewport:[0,0,t,r]}),e.clear(16640)}class Ewt extends L_{constructor(t,r){super(t,r),P(this,"shadowMap",void 0),P(this,"depthBuffer",void 0),P(this,"fbo",void 0),this.shadowMap=new wn(t,{width:1,height:1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.depthBuffer=new Dc(t,{format:33189,width:1,height:1}),this.fbo=new ar(t,{id:"shadowmap",width:1,height:1,attachments:{[36064]:this.shadowMap,[36096]:this.depthBuffer}})}render(t){const r=this.fbo;ai(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const n=t.viewports[0],i=hf(this.gl),o=n.width*i,s=n.height*i;(o!==r.width||s!==r.height)&&r.resize({width:o,height:s}),super.render({...t,target:r,pass:"shadow"})})}shouldDrawLayer(t){return t.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const Cwt={color:[255,255,255],intensity:1},$L=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],Awt=[0,0,0,200/255];class eV{constructor(t={}){P(this,"id","lighting-effect"),P(this,"props",null),P(this,"shadowColor",Awt),P(this,"shadow",void 0),P(this,"ambientLight",null),P(this,"directionalLights",[]),P(this,"pointLights",[]),P(this,"shadowPasses",[]),P(this,"shadowMaps",[]),P(this,"dummyShadowMap",null),P(this,"programManager",void 0),P(this,"shadowMatrices",void 0);for(const r in t){const n=t[r];switch(n.type){case"ambient":this.ambientLight=n;break;case"directional":this.directionalLights.push(n);break;case"point":this.pointLights.push(n);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(r=>r.shadow)}preRender(t,{layers:r,layerFilter:n,viewports:i,onViewportActive:o,views:s}){if(!!this.shadow){this.shadowMatrices=this._calculateMatrices(),this.shadowPasses.length===0&&this._createShadowPasses(t),this.programManager||(this.programManager=t0.getDefaultProgramManager(t),Db&&this.programManager.addDefaultModule(Db)),this.dummyShadowMap||(this.dummyShadowMap=new wn(t,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:r,layerFilter:n,viewports:i,onViewportActive:o,views:s,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(t){const r=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return r.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(n=>n.getProjectedLight({layer:t})),pointLights:this.pointLights.map(n=>n.getProjectedLight({layer:t}))},r}cleanup(){for(const t of this.shadowPasses)t.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(Db),this.programManager=null)}_calculateMatrices(){const t=[];for(const r of this.directionalLights){const n=new Xr().lookAt({eye:new kt(r.direction).negate()});t.push(n)}return t}_createShadowPasses(t){for(let r=0;r<this.directionalLights.length;r++){const n=new Ewt(t);this.shadowPasses[r]=n,this.shadowMaps[r]=n.shadowMap}}_applyDefaultLights(){const{ambientLight:t,pointLights:r,directionalLights:n}=this;!t&&r.length===0&&n.length===0&&(this.ambientLight=new _wt(Cwt),this.directionalLights.push(new BL($L[0]),new BL($L[1])))}}class Mwt{constructor(t={}){P(this,"_pool",[]),P(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(t)}setOptions(t){Object.assign(this.opts,t)}allocate(t,r,{size:n=1,type:i,padding:o=0,copy:s=!1,initialize:a=!1,maxCount:l}){const u=i||t&&t.constructor||Float32Array,c=r*n+o;if(ArrayBuffer.isView(t)){if(c<=t.length)return t;if(c*t.BYTES_PER_ELEMENT<=t.buffer.byteLength)return new u(t.buffer,0,c)}let f=1/0;l&&(f=l*n+o);const h=this._allocate(u,c,a,f);return t&&s?h.set(t):a||h.fill(0,0,4),this._release(t),h}release(t){this._release(t)}_allocate(t,r,n,i){let o=Math.max(Math.ceil(r*this.opts.overAlloc),1);o>i&&(o=i);const s=this._pool,a=t.BYTES_PER_ELEMENT*o,l=s.findIndex(u=>u.byteLength>=a);if(l>=0){const u=new t(s.splice(l,1)[0],0,o);return n&&u.fill(0),u}return new t(o)}_release(t){if(!ArrayBuffer.isView(t))return;const r=this._pool,{buffer:n}=t,{byteLength:i}=n,o=r.findIndex(s=>s.byteLength>=i);o<0?r.push(n):(o>0||r.length<this.opts.poolSize)&&r.splice(o,0,n),r.length>this.opts.poolSize&&r.shift()}}const gf=new Mwt;function dd(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function xwt(e,t){const r=e%t;return r<0?t+r:r}function Lwt(e){return[e[12],e[13],e[14]]}function Iwt(e){return{left:fc(e[3]+e[0],e[7]+e[4],e[11]+e[8],e[15]+e[12]),right:fc(e[3]-e[0],e[7]-e[4],e[11]-e[8],e[15]-e[12]),bottom:fc(e[3]+e[1],e[7]+e[5],e[11]+e[9],e[15]+e[13]),top:fc(e[3]-e[1],e[7]-e[5],e[11]-e[9],e[15]-e[13]),near:fc(e[3]+e[2],e[7]+e[6],e[11]+e[10],e[15]+e[14]),far:fc(e[3]-e[2],e[7]-e[6],e[11]-e[10],e[15]-e[14])}}const VL=new kt;function fc(e,t,r,n){VL.set(e,t,r);const i=VL.len();return{distance:n/i,normal:new kt(-e/i,-t/i,-r/i)}}function Owt(e){return e-Math.fround(e)}let Rh;function Nb(e,t){const{size:r=1,startIndex:n=0}=t,i=t.endIndex!==void 0?t.endIndex:e.length,o=(i-n)/r;Rh=gf.allocate(Rh,o,{type:Float32Array,size:r*2});let s=n,a=0;for(;s<i;){for(let l=0;l<r;l++){const u=e[s++];Rh[a+l]=u,Rh[a+l+r]=Owt(u)}a+=r*2}return Rh.subarray(0,o*r*2)}const Rwt=Math.PI/180,Dwt=dd(),UL=[0,0,0],Nwt={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function Fwt({width:e,height:t,orthographic:r,fovyRadians:n,focalDistance:i,padding:o,near:s,far:a}){const l=e/t,u=r?new Xr().orthographic({fovy:n,aspect:l,focalDistance:i,near:s,far:a}):new Xr().perspective({fovy:n,aspect:l,near:s,far:a});if(o){const{left:c=0,right:f=0,top:h=0,bottom:d=0}=o,p=Ar((c+e-f)/2,0,e)-e/2,v=Ar((h+t-d)/2,0,t)-t/2;u[8]-=p*2/e,u[9]+=v*2/t}return u}class ja{constructor(t={}){P(this,"id",void 0),P(this,"x",void 0),P(this,"y",void 0),P(this,"width",void 0),P(this,"height",void 0),P(this,"isGeospatial",void 0),P(this,"zoom",void 0),P(this,"focalDistance",void 0),P(this,"position",void 0),P(this,"modelMatrix",void 0),P(this,"distanceScales",void 0),P(this,"scale",void 0),P(this,"center",void 0),P(this,"cameraPosition",void 0),P(this,"projectionMatrix",void 0),P(this,"viewMatrix",void 0),P(this,"viewMatrixUncentered",void 0),P(this,"viewMatrixInverse",void 0),P(this,"viewProjectionMatrix",void 0),P(this,"pixelProjectionMatrix",void 0),P(this,"pixelUnprojectionMatrix",void 0),P(this,"resolution",void 0),P(this,"_frustumPlanes",{}),this.id=t.id||this.constructor.displayName||"viewport",this.x=t.x||0,this.y=t.y||0,this.width=t.width||1,this.height=t.height||1,this.zoom=t.zoom||0,this.distanceScales=t.distanceScales||Nwt,this.focalDistance=t.focalDistance||1,this.position=t.position||UL,this.modelMatrix=t.modelMatrix||null;const{longitude:r,latitude:n}=t;this.isGeospatial=Number.isFinite(n)&&Number.isFinite(r),this._initProps(t),this._initMatrices(t),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Ii.WEB_MERCATOR:Ii.WEB_MERCATOR_AUTO_OFFSET:Ii.IDENTITY}equals(t){return t instanceof ja?this===t?!0:t.width===this.width&&t.height===this.height&&t.scale===this.scale&&xo(t.projectionMatrix,this.projectionMatrix)&&xo(t.viewMatrix,this.viewMatrix):!1}project(t,{topLeft:r=!0}={}){const n=this.projectPosition(t),i=J$(n,this.pixelProjectionMatrix),[o,s]=i,a=r?s:this.height-s;return t.length===2?[o,a]:[o,a,i[2]]}unproject(t,{topLeft:r=!0,targetZ:n}={}){const[i,o,s]=t,a=r?o:this.height-o,l=n&&n*this.distanceScales.unitsPerMeter[2],u=x_([i,a,s],this.pixelUnprojectionMatrix,l),[c,f,h]=this.unprojectPosition(u);return Number.isFinite(s)?[c,f,h]:Number.isFinite(n)?[c,f,n]:[c,f]}projectPosition(t){const[r,n]=this.projectFlat(t),i=(t[2]||0)*this.distanceScales.unitsPerMeter[2];return[r,n,i]}unprojectPosition(t){const[r,n]=this.unprojectFlat(t),i=(t[2]||0)*this.distanceScales.metersPerUnit[2];return[r,n,i]}projectFlat(t){if(this.isGeospatial){const r=Fa(t);return r[1]=Ar(r[1],-318,830),r}return t}unprojectFlat(t){return this.isGeospatial?vf(t):t}getBounds(t={}){const r={targetZ:t.z||0},n=this.unproject([0,0],r),i=this.unproject([this.width,0],r),o=this.unproject([0,this.height],r),s=this.unproject([this.width,this.height],r);return[Math.min(n[0],i[0],o[0],s[0]),Math.min(n[1],i[1],o[1],s[1]),Math.max(n[0],i[0],o[0],s[0]),Math.max(n[1],i[1],o[1],s[1])]}getDistanceScales(t){return t?hT({longitude:t[0],latitude:t[1],highPrecision:!0}):this.distanceScales}containsPixel({x:t,y:r,width:n=1,height:i=1}){return t<this.x+this.width&&this.x<t+n&&r<this.y+this.height&&this.y<r+i}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,Iwt(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(t,r){return null}_initProps(t){const r=t.longitude,n=t.latitude;this.isGeospatial&&(Number.isFinite(t.zoom)||(this.zoom=Zbt({latitude:n})+Math.log2(this.focalDistance)),this.distanceScales=t.distanceScales||hT({latitude:n,longitude:r}));const i=Math.pow(2,this.zoom);this.scale=i;const{position:o,modelMatrix:s}=t;let a=UL;if(o&&(a=s?new Xr(s).transformAsVector(o,[]):o),this.isGeospatial){const l=this.projectPosition([r,n,0]);this.center=new kt(a).scale(this.distanceScales.unitsPerMeter).add(l)}else this.center=this.projectPosition(a)}_initMatrices(t){const{viewMatrix:r=Dwt,projectionMatrix:n=null,orthographic:i=!1,fovyRadians:o,fovy:s=75,near:a=.1,far:l=1e3,padding:u=null,focalDistance:c=1}=t;this.viewMatrixUncentered=r,this.viewMatrix=new Xr().multiplyRight(r).translate(new kt(this.center).negate()),this.projectionMatrix=n||Fwt({width:this.width,height:this.height,orthographic:i,fovyRadians:o||s*Rwt,focalDistance:c,padding:u,near:a,far:l});const f=dd();tu(f,f,this.projectionMatrix),tu(f,f,this.viewMatrix),this.viewProjectionMatrix=f,this.viewMatrixInverse=aT([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=Lwt(this.viewMatrixInverse);const h=dd(),d=dd();bE(h,h,[this.width/2,-this.height/2,1]),p1(h,h,[1,-1,0]),tu(d,h,this.viewProjectionMatrix),this.pixelProjectionMatrix=d,this.pixelUnprojectionMatrix=aT(dd(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||Yt.warn("Pixel project matrix not invertible")()}}P(ja,"displayName","Viewport");const zwt=512,Bwt=4003e4,$wt=Math.PI/180;function WL(e){const t=Math.cos(e*$wt);return zwt/Bwt/t}class Do extends ja{constructor(t={}){const{latitude:r=0,longitude:n=0,zoom:i=0,pitch:o=0,bearing:s=0,nearZMultiplier:a=.1,farZMultiplier:l=1.01,orthographic:u=!1,projectionMatrix:c,repeat:f=!1,worldOffset:h=0,legacyMeterSizes:d=!1}=t;let{width:p,height:v,altitude:m=1.5}=t;const g=Math.pow(2,i);p=p||1,v=v||1;let _,b=null;c?(m=c[5]/2,_=g1(m)):(t.fovy?(_=t.fovy,m=K$(_)):_=g1(m),b=Jbt({width:p,height:v,pitch:o,fovy:_,nearZMultiplier:a,farZMultiplier:l}));let w=Kbt({height:v,pitch:o,bearing:s,scale:g,altitude:m});h&&(w=new Xr().translate([512*h,0,0]).multiplyLeft(w)),super({...t,width:p,height:v,viewMatrix:w,longitude:n,latitude:r,zoom:i,...b,fovy:_,focalDistance:m}),P(this,"longitude",void 0),P(this,"latitude",void 0),P(this,"pitch",void 0),P(this,"bearing",void 0),P(this,"altitude",void 0),P(this,"fovy",void 0),P(this,"orthographic",void 0),P(this,"_subViewports",void 0),P(this,"_pseudoMeters",void 0),this.latitude=r,this.longitude=n,this.zoom=i,this.pitch=o,this.bearing=s,this.altitude=m,this.fovy=_,this.orthographic=u,this._subViewports=f?[]:null,this._pseudoMeters=d,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const t=this.getBounds(),r=Math.floor((t[0]+180)/360),n=Math.ceil((t[2]-180)/360);for(let i=r;i<=n;i++){const o=i?new Do({...this,worldOffset:i}):this;this._subViewports.push(o)}}return this._subViewports}projectPosition(t){if(this._pseudoMeters)return super.projectPosition(t);const[r,n]=this.projectFlat(t),i=(t[2]||0)*WL(t[1]);return[r,n,i]}unprojectPosition(t){if(this._pseudoMeters)return super.unprojectPosition(t);const[r,n]=this.unprojectFlat(t),i=(t[2]||0)/WL(n);return[r,n,i]}addMetersToLngLat(t,r){return Z$(t,r)}panByPosition(t,r){const n=x_(r,this.pixelUnprojectionMatrix),i=this.projectFlat(t),o=d1([],i,E$([],n)),s=d1([],this.center,o),[a,l]=this.unprojectFlat(s);return{longitude:a,latitude:l}}getBounds(t={}){const r=twt(this,t.z||0);return[Math.min(r[0][0],r[1][0],r[2][0],r[3][0]),Math.min(r[0][1],r[1][1],r[2][1],r[3][1]),Math.max(r[0][0],r[1][0],r[2][0],r[3][0]),Math.max(r[0][1],r[1][1],r[2][1],r[3][1])]}fitBounds(t,r={}){const{width:n,height:i}=this,{longitude:o,latitude:s,zoom:a}=Q$({width:n,height:i,bounds:t,...r});return new Do({width:n,height:i,longitude:o,latitude:s,zoom:a})}}P(Do,"displayName","WebMercatorViewport");function Fb(e,t,r=!1){const n=t.projectPosition(e);if(r&&t instanceof Do){const[i,o,s=0]=e,a=t.getDistanceScales([i,o]);n[2]=s*a.unitsPerMeter[2]}return n}function Vwt(e){const{viewport:t,modelMatrix:r,coordinateOrigin:n}=e;let{coordinateSystem:i,fromCoordinateSystem:o,fromCoordinateOrigin:s}=e;return i===se.DEFAULT&&(i=t.isGeospatial?se.LNGLAT:se.CARTESIAN),o===void 0&&(o=i),s===void 0&&(s=n),{viewport:t,coordinateSystem:i,coordinateOrigin:n,modelMatrix:r,fromCoordinateSystem:o,fromCoordinateOrigin:s}}function rV(e,{viewport:t,modelMatrix:r,coordinateSystem:n,coordinateOrigin:i,offsetMode:o}){let[s,a,l=0]=e;switch(r&&([s,a,l]=Ff([],[s,a,l,1],r)),n){case se.LNGLAT:return Fb([s,a,l],t,o);case se.LNGLAT_OFFSETS:return Fb([s+i[0],a+i[1],l+(i[2]||0)],t,o);case se.METER_OFFSETS:return Fb(Z$(i,[s,a,l]),t,o);case se.CARTESIAN:default:return t.isGeospatial?[s+i[0],a+i[1],l+i[2]]:t.projectPosition([s,a,l])}}function Uwt(e,t){const{viewport:r,coordinateSystem:n,coordinateOrigin:i,modelMatrix:o,fromCoordinateSystem:s,fromCoordinateOrigin:a}=Vwt(t),{geospatialOrigin:l,shaderCoordinateOrigin:u,offsetMode:c}=Y$(r,n,i),f=rV(e,{viewport:r,modelMatrix:o,coordinateSystem:s,coordinateOrigin:a,offsetMode:c});if(c){const h=r.projectPosition(l||u);R$(f,f,h)}return f}const Ac={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},m1=Symbol.for("component"),Jc=Symbol.for("asyncPropDefaults"),vu=Symbol.for("asyncPropOriginal"),_a=Symbol.for("asyncPropResolved");function I_(e,t=()=>!0){return Array.isArray(e)?nV(e,t,[]):t(e)?[e]:[]}function nV(e,t,r){let n=-1;for(;++n<e.length;){const i=e[n];Array.isArray(i)?nV(i,t,r):t(i)&&r.push(i)}return r}function Wwt({target:e,source:t,start:r=0,count:n=1}){const i=t.length,o=n*i;let s=0;for(let a=r;s<i;s++)e[a++]=t[s];for(;s<o;)s<o-s?(e.copyWithin(r+s,r,r+s),s*=2):(e.copyWithin(r+s,r,r+o-s),s=o);return e}class jwt{constructor(t,r,n){P(this,"id",void 0),P(this,"context",void 0),P(this,"isLoaded",void 0),P(this,"persistent",void 0),P(this,"_loadCount",0),P(this,"_subscribers",new Set),P(this,"_data",void 0),P(this,"_loader",void 0),P(this,"_error",void 0),P(this,"_content",void 0),this.id=t,this.context=n,this.setData(r)}subscribe(t){this._subscribers.add(t)}unsubscribe(t){this._subscribers.delete(t)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(t,r){if(t===this._data&&!r)return;this._data=t;const n=++this._loadCount;let i=t;typeof t=="string"&&(i=c1(t)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(o=>{this._loadCount===n&&(this.isLoaded=!0,this._error=void 0,this._content=o)}).catch(o=>{this._loadCount===n&&(this.isLoaded=!0,this._error=o||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=t);for(const o of this._subscribers)o.onChange(this.getData())}}class Gwt{constructor({gl:t,protocol:r}){P(this,"protocol",void 0),P(this,"_context",void 0),P(this,"_resources",void 0),P(this,"_consumers",void 0),P(this,"_pruneRequest",void 0),this.protocol=r||"resource://",this._context={gl:t,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(t){return t.startsWith(this.protocol)?!0:t in this._resources}add({resourceId:t,data:r,forceUpdate:n=!1,persistent:i=!0}){let o=this._resources[t];o?o.setData(r,n):(o=new jwt(t,r,this._context),this._resources[t]=o),o.persistent=i}remove(t){const r=this._resources[t];r&&(r.delete(),delete this._resources[t])}unsubscribe({consumerId:t}){const r=this._consumers[t];if(r){for(const n in r){const i=r[n],o=this._resources[i.resourceId];o&&o.unsubscribe(i)}delete this._consumers[t],this.prune()}}subscribe({resourceId:t,onChange:r,consumerId:n,requestId:i="default"}){const{_resources:o,protocol:s}=this;t.startsWith(s)&&(t=t.replace(s,""),o[t]||this.add({resourceId:t,data:null,persistent:!1}));const a=o[t];if(this._track(n,i,a,r),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const t in this._resources)this._resources[t].delete()}_track(t,r,n,i){const o=this._consumers,s=o[t]=o[t]||{},a=s[r]||{},l=a.resourceId&&this._resources[a.resourceId];l&&(l.unsubscribe(a),this.prune()),n&&(s[r]=a,a.onChange=i,a.resourceId=n.id,n.subscribe(a))}_prune(){this._pruneRequest=null;for(const t of Object.keys(this._resources)){const r=this._resources[t];!r.persistent&&!r.inUse()&&(r.delete(),delete this._resources[t])}}}const Hwt="layerManager.setLayers",Xwt="layerManager.activateViewport";class Ywt{constructor(t,{deck:r,stats:n,viewport:i,timeline:o}={}){P(this,"layers",void 0),P(this,"context",void 0),P(this,"resourceManager",void 0),P(this,"_lastRenderedLayers",[]),P(this,"_needsRedraw",!1),P(this,"_needsUpdate",!1),P(this,"_nextLayers",null),P(this,"_debug",!1),P(this,"activateViewport",s=>{Ur(Xwt,this,s),s&&(this.context.viewport=s)}),this.layers=[],this.resourceManager=new Gwt({gl:t,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:t,deck:r,programManager:t&&pwt(t),stats:n||new P_({id:"deck.gl"}),viewport:i||new ja({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:o||new j$,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const t of this.layers)this._finalizeLayer(t)}needsRedraw(t={clearRedrawFlags:!1}){let r=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);for(const n of this.layers){const i=n.getNeedsRedraw(t);r=r||i}return r}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(t){this._needsRedraw=this._needsRedraw||t}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t}getLayers({layerIds:t}={}){return t?this.layers.filter(r=>t.find(n=>r.id.indexOf(n)===0)):this.layers}setProps(t){"debug"in t&&(this._debug=t.debug),"userData"in t&&(this.context.userData=t.userData),"layers"in t&&(this._nextLayers=t.layers),"onError"in t&&(this.context.onError=t.onError)}setLayers(t,r){Ur(Hwt,this,r,t),this._lastRenderedLayers=t;const n=I_(t,Boolean);for(const i of n)i.context=this.context;this._updateLayers(this.layers,n)}updateLayers(){const t=this.needsUpdate();t&&(this.setNeedsRedraw("updating layers: ".concat(t)),this.setLayers(this._nextLayers||this._lastRenderedLayers,t)),this._nextLayers=null}_handleError(t,r,n){n.raiseError(r,"".concat(t," of ").concat(n))}_updateLayers(t,r){const n={};for(const s of t)n[s.id]?Yt.warn("Multiple old layers with same id ".concat(s.id))():n[s.id]=s;const i=[];this._updateSublayersRecursively(r,n,i),this._finalizeOldLayers(n);let o=!1;for(const s of i)if(s.hasUniformTransition()){o="Uniform transition in ".concat(s);break}this._needsUpdate=o,this.layers=i}_updateSublayersRecursively(t,r,n){for(const i of t){i.context=this.context;const o=r[i.id];o===null&&Yt.warn("Multiple new layers with same id ".concat(i.id))(),r[i.id]=null;let s=null;try{this._debug&&o!==i&&i.validateProps(),o?(this._transferLayerState(o,i),this._updateLayer(i)):this._initializeLayer(i),n.push(i),s=i.isComposite?i.getSubLayers():null}catch(a){this._handleError("matching",a,i)}s&&this._updateSublayersRecursively(s,r,n)}}_finalizeOldLayers(t){for(const r in t){const n=t[r];n&&this._finalizeLayer(n)}}_initializeLayer(t){try{t._initialize(),t.lifecycle=Ac.INITIALIZED}catch(r){this._handleError("initialization",r,t)}}_transferLayerState(t,r){r._transferState(t),r.lifecycle=Ac.MATCHED,r!==t&&(t.lifecycle=Ac.AWAITING_GC)}_updateLayer(t){try{t._update()}catch(r){this._handleError("update",r,t)}}_finalizeLayer(t){this._needsRedraw=this._needsRedraw||"finalized ".concat(t),t.lifecycle=Ac.AWAITING_FINALIZATION;try{t._finalize(),t.lifecycle=Ac.FINALIZED}catch(r){this._handleError("finalization",r,t)}}}function zf(e,t){if(e===t)return!0;if(!e||!t)return!1;for(const r in e){const n=e[r],i=t[r];if(!(n===i||Array.isArray(n)&&Array.isArray(i)&&zf(n,i)))return!1}return!0}class qwt{constructor(t){P(this,"width",void 0),P(this,"height",void 0),P(this,"views",void 0),P(this,"viewState",void 0),P(this,"controllers",void 0),P(this,"timeline",void 0),P(this,"_viewports",void 0),P(this,"_viewportMap",void 0),P(this,"_isUpdating",void 0),P(this,"_needsRedraw",void 0),P(this,"_needsUpdate",void 0),P(this,"_eventManager",void 0),P(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=t.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=t.eventManager,this._eventCallbacks={onViewStateChange:t.onViewStateChange,onInteractionStateChange:t.onInteractionStateChange},Object.seal(this),this.setProps(t)}finalize(){for(const t in this.controllers){const r=this.controllers[t];r&&r.finalize()}this.controllers={}}needsRedraw(t={clearRedrawFlags:!1}){const r=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),r}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t,this._needsRedraw=this._needsRedraw||t}updateViewStates(){for(const t in this.controllers){const r=this.controllers[t];r&&r.updateTransition()}}getViewports(t){return t?this._viewports.filter(r=>r.containsPixel(t)):this._viewports}getViews(){const t={};return this.views.forEach(r=>{t[r.id]=r}),t}getView(t){return this.views.find(r=>r.id===t)}getViewState(t){const r=typeof t=="string"?this.getView(t):t,n=r&&this.viewState[r.getViewStateId()]||this.viewState;return r?r.filterViewState(n):n}getViewport(t){return this._viewportMap[t]}unproject(t,r){const n=this.getViewports(),i={x:t[0],y:t[1]};for(let o=n.length-1;o>=0;--o){const s=n[o];if(s.containsPixel(i)){const a=t.slice();return a[0]-=s.x,a[1]-=s.y,s.unproject(a,r)}}return null}setProps(t){t.views&&this._setViews(t.views),t.viewState&&this._setViewState(t.viewState),("width"in t||"height"in t)&&this._setSize(t.width,t.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(t,r){(t!==this.width||r!==this.height)&&(this.width=t,this.height=r,this.setNeedsUpdate("Size changed"))}_setViews(t){t=I_(t,Boolean),this._diffViews(t,this.views)&&this.setNeedsUpdate("views changed"),this.views=t}_setViewState(t){t?(!zf(t,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=t):Yt.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(t,r){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...r,viewId:t})}_createController(t,r){const n=r.type;return new n({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,r.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:o=>t.makeViewport({viewState:o,width:this.width,height:this.height})})}_updateController(t,r,n,i){const o=t.controller;if(o){const s={...r,...o,id:t.id,x:n.x,y:n.y,width:n.width,height:n.height};return i||(i=this._createController(t,s)),i&&i.setProps(s),i}return null}_rebuildViewports(){const{views:t}=this,r=this.controllers;this._viewports=[],this.controllers={};let n=!1;for(let i=t.length;i--;){const o=t[i],s=this.getViewState(o),a=o.makeViewport({viewState:s,width:this.width,height:this.height});let l=r[o.id];const u=Boolean(o.controller);u&&!l&&(n=!0),(n||!u)&&l&&(l.finalize(),l=null),this.controllers[o.id]=this._updateController(o,s,a,l),this._viewports.unshift(a)}for(const i in r){const o=r[i];o&&!this.controllers[i]&&o.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(t=>{t.id&&(this._viewportMap[t.id]=this._viewportMap[t.id]||t)})}_diffViews(t,r){return t.length!==r.length?!0:t.some((n,i)=>!t[i].equals(r[i]))}}const Zwt=/([0-9]+\.?[0-9]*)(%|px)/;function Xs(e){switch(typeof e){case"number":return{position:e,relative:!1};case"string":const t=Zwt.exec(e);if(t&&t.length>=3){const r=t[2]==="%",n=parseFloat(t[1]);return{position:r?n/100:n,relative:r}}default:throw new Error("Could not parse position string ".concat(e))}}function Ys(e,t){return e.relative?Math.round(e.position*t):e.position}function pr(e,t){if(!e)throw new Error(t||"deck.gl: assertion failed.")}class iV{constructor(t){P(this,"id",void 0),P(this,"viewportInstance",void 0),P(this,"_x",void 0),P(this,"_y",void 0),P(this,"_width",void 0),P(this,"_height",void 0),P(this,"_padding",void 0),P(this,"props",void 0);const{id:r,x:n=0,y:i=0,width:o="100%",height:s="100%",padding:a=null,viewportInstance:l}=t||{};pr(!l||l instanceof ja),this.viewportInstance=l,this.id=r||this.constructor.displayName||"view",this.props={...t,id:this.id},this._x=Xs(n),this._y=Xs(i),this._width=Xs(o),this._height=Xs(s),this._padding=a&&{left:Xs(a.left||0),right:Xs(a.right||0),top:Xs(a.top||0),bottom:Xs(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(t){return this===t?!0:this.viewportInstance?t.viewportInstance?this.viewportInstance.equals(t.viewportInstance):!1:this.ViewportType===t.ViewportType&&zf(this.props,t.props)}makeViewport({width:t,height:r,viewState:n}){if(this.viewportInstance)return this.viewportInstance;n=this.filterViewState(n);const i=this.getDimensions({width:t,height:r});return new this.ViewportType({...n,...this.props,...i})}getViewStateId(){const{viewState:t}=this.props;return typeof t=="string"?t:(t==null?void 0:t.id)||this.id}filterViewState(t){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const r={...t};for(const n in this.props.viewState)n!=="id"&&(r[n]=this.props.viewState[n]);return r}return t}getDimensions({width:t,height:r}){const n={x:Ys(this._x,t),y:Ys(this._y,r),width:Ys(this._width,t),height:Ys(this._height,r)};return this._padding&&(n.padding={left:Ys(this._padding.left,t),top:Ys(this._padding.top,r),right:Ys(this._padding.right,t),bottom:Ys(this._padding.bottom,r)}),n}get controller(){const t=this.props.controller;return t?t===!0?{type:this.ControllerType}:typeof t=="function"?{type:t}:{type:this.ControllerType,...t}:null}}class n0{constructor(t){P(this,"_inProgress",void 0),P(this,"_handle",void 0),P(this,"_timeline",void 0),P(this,"time",void 0),P(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=t,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(t){var r,n;this.cancel(),this.settings=t,this._inProgress=!0,(r=(n=this.settings).onStart)===null||r===void 0||r.call(n,this)}end(){if(this._inProgress){var t,r;this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(t=(r=this.settings).onEnd)===null||t===void 0||t.call(r,this)}}cancel(){if(this._inProgress){var t,r;(t=(r=this.settings).onInterrupt)===null||t===void 0||t.call(r,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1}}update(){var t,r;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:n,settings:i}=this;this._handle=n.addChannel({delay:n.getTime(),duration:i.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(t=(r=this.settings).onUpdate)===null||t===void 0||t.call(r,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const jL=()=>{},dT={BREAK:1,SNAP_TO_END:2,IGNORE:3},Kwt=e=>e,Jwt=dT.BREAK;class Qwt{constructor(t){P(this,"getControllerState",void 0),P(this,"props",void 0),P(this,"propsInTransition",void 0),P(this,"transition",void 0),P(this,"onViewStateChange",void 0),P(this,"onStateChange",void 0),P(this,"_onTransitionUpdate",r=>{const{time:n,settings:{interpolator:i,startProps:o,endProps:s,duration:a,easing:l}}=r,u=l(n/a),c=i.interpolateProps(o,s,u);this.propsInTransition=this.getControllerState({...this.props,...c}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=t.getControllerState,this.propsInTransition=null,this.transition=new n0(t.timeline),this.onViewStateChange=t.onViewStateChange||jL,this.onStateChange=t.onStateChange||jL}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(t){let r=!1;const n=this.props;if(this.props=t,!n||this._shouldIgnoreViewportChange(n,t))return!1;if(this._isTransitionEnabled(t)){let i=n;if(this.transition.inProgress){const{interruption:o,endProps:s}=this.transition.settings;i={...n,...o===dT.SNAP_TO_END?s:this.propsInTransition||n}}this._triggerTransition(i,t),r=!0}else this.transition.cancel();return r}updateTransition(){this.transition.update()}_isTransitionEnabled(t){const{transitionDuration:r,transitionInterpolator:n}=t;return(r>0||r==="auto")&&Boolean(n)}_isUpdateDueToCurrentTransition(t){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(t,this.propsInTransition):!1}_shouldIgnoreViewportChange(t,r){return this.transition.inProgress?this.transition.settings.interruption===dT.IGNORE||this._isUpdateDueToCurrentTransition(r):this._isTransitionEnabled(r)?r.transitionInterpolator.arePropsEqual(t,r):!0}_triggerTransition(t,r){const n=this.getControllerState(t),i=this.getControllerState(r).shortestPathFrom(n),o=r.transitionInterpolator,s=o.getDuration?o.getDuration(t,r):r.transitionDuration;if(s===0)return;const a=o.initializeProps(t,i);this.propsInTransition={};const l={duration:s,easing:r.transitionEasing||Kwt,interpolator:o,interruption:r.transitionInterruption||Jwt,startProps:a.start,endProps:a.end,onStart:r.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(r.onTransitionInterrupt),onEnd:this._onTransitionEnd(r.onTransitionEnd)};this.transition.start(l),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(t){return r=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),t==null||t(r)}}}class tSt{constructor(t){P(this,"_propsToCompare",void 0),P(this,"_propsToExtract",void 0),P(this,"_requiredProps",void 0);const{compare:r,extract:n,required:i}=t;this._propsToCompare=r,this._propsToExtract=n||r,this._requiredProps=i}arePropsEqual(t,r){for(const n of this._propsToCompare)if(!(n in t)||!(n in r)||!xo(t[n],r[n]))return!1;return!0}initializeProps(t,r){const n={},i={};for(const o of this._propsToExtract)(o in t||o in r)&&(n[o]=t[o],i[o]=r[o]);return this._checkRequiredProps(n),this._checkRequiredProps(i),{start:n,end:i}}getDuration(t,r){return r.transitionDuration}_checkRequiredProps(t){!this._requiredProps||this._requiredProps.forEach(r=>{const n=t[r];pr(Number.isFinite(n)||Array.isArray(n),"".concat(r," is required for transition"))})}}const eSt=["longitude","latitude","zoom","bearing","pitch"],rSt=["longitude","latitude","zoom"];class O_ extends tSt{constructor(t={}){const r=Array.isArray(t)?t:t.transitionProps,n=Array.isArray(t)?{}:t;n.transitionProps=Array.isArray(r)?{compare:r,required:r}:r||{compare:eSt,required:rSt},super(n.transitionProps),P(this,"opts",void 0),this.opts=n}initializeProps(t,r){const n=super.initializeProps(t,r),{makeViewport:i,around:o}=this.opts;if(i&&o){const s=i(t),a=i(r),l=s.unproject(o);n.start.around=o,Object.assign(n.end,{around:a.project(l),aroundPosition:l,width:r.width,height:r.height})}return n}interpolateProps(t,r,n){const i={};for(const o of this._propsToExtract)i[o]=Ql(t[o]||0,r[o]||0,n);if(r.aroundPosition&&this.opts.makeViewport){const o=this.opts.makeViewport({...r,...i});Object.assign(i,o.panByPosition(r.aroundPosition,Ql(t.around,r.around,n)))}return i}}const qs={transitionDuration:0},nSt=300,Rv=e=>1-(1-e)*(1-e),hc={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},Pl={};class oV{constructor(t){P(this,"props",void 0),P(this,"state",{}),P(this,"transitionManager",void 0),P(this,"eventManager",void 0),P(this,"onViewStateChange",void 0),P(this,"onStateChange",void 0),P(this,"makeViewport",void 0),P(this,"_controllerState",void 0),P(this,"_events",{}),P(this,"_interactionState",{isDragging:!1}),P(this,"_customEvents",[]),P(this,"_eventStartBlocked",null),P(this,"_panMove",!1),P(this,"invertPan",!1),P(this,"dragMode","rotate"),P(this,"inertia",0),P(this,"scrollZoom",!0),P(this,"dragPan",!0),P(this,"dragRotate",!0),P(this,"doubleClickZoom",!0),P(this,"touchZoom",!0),P(this,"touchRotate",!1),P(this,"keyboard",!0),this.transitionManager=new Qwt({...t,getControllerState:r=>new this.ControllerState(r),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=t.eventManager,this.onViewStateChange=t.onViewStateChange||(()=>{}),this.onStateChange=t.onStateChange||(()=>{}),this.makeViewport=t.makeViewport}set events(t){this.toggleEvents(this._customEvents,!1),this.toggleEvents(t,!0),this._customEvents=t,this.props&&this.setProps(this.props)}finalize(){for(const r in this._events)if(this._events[r]){var t;(t=this.eventManager)===null||t===void 0||t.off(r,this.handleEvent)}this.transitionManager.finalize()}handleEvent(t){this._controllerState=void 0;const r=this._eventStartBlocked;switch(t.type){case"panstart":return r?!1:this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return r?!1:this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"tripanstart":return r?!1:this._onTriplePanStart(t);case"tripanmove":return this._onTriplePan(t);case"tripanend":return this._onTriplePanEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(t){const{x:r,y:n}=this.props,{offsetCenter:i}=t;return[i.x-r,i.y-n]}isPointInBounds(t,r){const{width:n,height:i}=this.props;if(r&&r.handled)return!1;const o=t[0]>=0&&t[0]<=n&&t[1]>=0&&t[1]<=i;return o&&r&&r.stopPropagation(),o}isFunctionKeyPressed(t){const{srcEvent:r}=t;return Boolean(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(t){const r=setTimeout(()=>{this._eventStartBlocked===r&&(this._eventStartBlocked=null)},t);this._eventStartBlocked=r}setProps(t){t.dragMode&&(this.dragMode=t.dragMode),this.props=t,"transitionInterpolator"in t||(t.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(t);const{inertia:r}=t;this.inertia=Number.isFinite(r)?r:r===!0?nSt:0;const{scrollZoom:n=!0,dragPan:i=!0,dragRotate:o=!0,doubleClickZoom:s=!0,touchZoom:a=!0,touchRotate:l=!1,keyboard:u=!0}=t,c=Boolean(this.onViewStateChange);this.toggleEvents(hc.WHEEL,c&&n),this.toggleEvents(hc.PAN,c&&(i||o)),this.toggleEvents(hc.PINCH,c&&(a||l)),this.toggleEvents(hc.TRIPLE_PAN,c&&l),this.toggleEvents(hc.DOUBLE_TAP,c&&s),this.toggleEvents(hc.KEYBOARD,c&&u),this.scrollZoom=n,this.dragPan=i,this.dragRotate=o,this.doubleClickZoom=s,this.touchZoom=a,this.touchRotate=l,this.keyboard=u}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(t,r){this.eventManager&&t.forEach(n=>{this._events[n]!==r&&(this._events[n]=r,r?this.eventManager.on(n,this.handleEvent):this.eventManager.off(n,this.handleEvent))})}updateViewport(t,r=null,n={}){const i={...t.getViewportProps(),...r},o=this.controllerState!==t;if(this.state=t.getState(),this._setInteractionState(n),o){const s=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:s})}}_onTransition(t){this.onViewStateChange({...t,interactionState:this._interactionState})}_setInteractionState(t){Object.assign(this._interactionState,t),this.onStateChange(this._interactionState)}_onPanStart(t){const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;let n=this.isFunctionKeyPressed(t)||t.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(n=!n);const i=this.controllerState[n?"panStart":"rotateStart"]({pos:r});return this._panMove=n,this.updateViewport(i,qs,{isDragging:!0}),!0}_onPan(t){return this.isDragging()?this._panMove?this._onPanMove(t):this._onPanRotate(t):!1}_onPanEnd(t){return this.isDragging()?this._panMove?this._onPanMoveEnd(t):this._onPanRotateEnd(t):!1}_onPanMove(t){if(!this.dragPan)return!1;const r=this.getCenter(t),n=this.controllerState.pan({pos:r});return this.updateViewport(n,qs,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(t){const{inertia:r}=this;if(this.dragPan&&r&&t.velocity){const n=this.getCenter(t),i=[n[0]+t.velocityX*r/2,n[1]+t.velocityY*r/2],o=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Rv},{isDragging:!1,isPanning:!0})}else{const n=this.controllerState.panEnd();this.updateViewport(n,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(t){if(!this.dragRotate)return!1;const r=this.getCenter(t),n=this.controllerState.rotate({pos:r});return this.updateViewport(n,qs,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(t){const{inertia:r}=this;if(this.dragRotate&&r&&t.velocity){const n=this.getCenter(t),i=[n[0]+t.velocityX*r/2,n[1]+t.velocityY*r/2],o=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Rv},{isDragging:!1,isRotating:!0})}else{const n=this.controllerState.rotateEnd();this.updateViewport(n,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(t){if(!this.scrollZoom)return!1;t.srcEvent.preventDefault();const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const{speed:n=.01,smooth:i=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:o}=t;let s=2/(1+Math.exp(-Math.abs(o*n)));o<0&&s!==0&&(s=1/s);const a=this.controllerState.zoom({pos:r,scale:s});return this.updateViewport(a,{...this._getTransitionProps({around:r}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(t){const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const n=this.controllerState.rotateStart({pos:r});return this.updateViewport(n,qs,{isDragging:!0}),!0}_onTriplePan(t){if(!this.touchRotate||!this.isDragging())return!1;const r=this.getCenter(t);r[0]-=t.deltaX;const n=this.controllerState.rotate({pos:r});return this.updateViewport(n,qs,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(t){if(!this.isDragging())return!1;const{inertia:r}=this;if(this.touchRotate&&r&&t.velocityY){const n=this.getCenter(t),i=[n[0],n[1]+=t.velocityY*r/2],o=this.controllerState.rotate({pos:i});this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Rv},{isDragging:!1,isRotating:!0}),this.blockEvents(r)}else{const n=this.controllerState.rotateEnd();this.updateViewport(n,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(t){const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const n=this.controllerState.zoomStart({pos:r}).rotateStart({pos:r});return Pl._startPinchRotation=t.rotation,Pl._lastPinchEvent=t,this.updateViewport(n,qs,{isDragging:!0}),!0}_onPinch(t){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let r=this.controllerState;if(this.touchZoom){const{scale:n}=t,i=this.getCenter(t);r=r.zoom({pos:i,scale:n})}if(this.touchRotate){const{rotation:n}=t;r=r.rotate({deltaAngleX:Pl._startPinchRotation-n})}return this.updateViewport(r,qs,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),Pl._lastPinchEvent=t,!0}_onPinchEnd(t){if(!this.isDragging())return!1;const{inertia:r}=this,{_lastPinchEvent:n}=Pl;if(this.touchZoom&&r&&n&&t.scale!==n.scale){const i=this.getCenter(t);let o=this.controllerState.rotateEnd();const s=Math.log2(t.scale),a=(s-Math.log2(n.scale))/(t.deltaTime-n.deltaTime),l=Math.pow(2,s+a*r/2);o=o.zoom({pos:i,scale:l}).zoomEnd(),this.updateViewport(o,{...this._getTransitionProps({around:i}),transitionDuration:r,transitionEasing:Rv},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(r)}else{const i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return Pl._startPinchRotation=null,Pl._lastPinchEvent=null,!0}_onDoubleTap(t){if(!this.doubleClickZoom)return!1;const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const n=this.isFunctionKeyPressed(t),i=this.controllerState.zoom({pos:r,scale:n?.5:2});return this.updateViewport(i,this._getTransitionProps({around:r}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(t){if(!this.keyboard)return!1;const r=this.isFunctionKeyPressed(t),{zoomSpeed:n,moveSpeed:i,rotateSpeedX:o,rotateSpeedY:s}=this.keyboard===!0?{}:this.keyboard,{controllerState:a}=this;let l;const u={};switch(t.srcEvent.code){case"Minus":l=r?a.zoomOut(n).zoomOut(n):a.zoomOut(n),u.isZooming=!0;break;case"Equal":l=r?a.zoomIn(n).zoomIn(n):a.zoomIn(n),u.isZooming=!0;break;case"ArrowLeft":r?(l=a.rotateLeft(o),u.isRotating=!0):(l=a.moveLeft(i),u.isPanning=!0);break;case"ArrowRight":r?(l=a.rotateRight(o),u.isRotating=!0):(l=a.moveRight(i),u.isPanning=!0);break;case"ArrowUp":r?(l=a.rotateUp(s),u.isRotating=!0):(l=a.moveUp(i),u.isPanning=!0);break;case"ArrowDown":r?(l=a.rotateDown(s),u.isRotating=!0):(l=a.moveDown(i),u.isPanning=!0);break;default:return!1}return this.updateViewport(l,this._getTransitionProps(),u),!0}_getTransitionProps(t){const{transition:r}=this;return!r||!r.transitionInterpolator?qs:t?{...r,transitionInterpolator:new O_({...t,...r.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:r}}class sV{constructor(t,r){P(this,"_viewportProps",void 0),P(this,"_state",void 0),this._viewportProps=this.applyConstraints(t),this._state=r}getViewportProps(){return this._viewportProps}getState(){return this._state}}const GL=5,iSt=1.2;class oSt extends sV{constructor(t){const{width:r,height:n,latitude:i,longitude:o,zoom:s,bearing:a=0,pitch:l=0,altitude:u=1.5,position:c=[0,0,0],maxZoom:f=20,minZoom:h=0,maxPitch:d=60,minPitch:p=0,startPanLngLat:v,startZoomLngLat:m,startRotatePos:g,startBearing:_,startPitch:b,startZoom:w,normalize:T=!0}=t;pr(Number.isFinite(o)),pr(Number.isFinite(i)),pr(Number.isFinite(s)),super({width:r,height:n,latitude:i,longitude:o,zoom:s,bearing:a,pitch:l,altitude:u,maxZoom:f,minZoom:h,maxPitch:d,minPitch:p,normalize:T,position:c},{startPanLngLat:v,startZoomLngLat:m,startRotatePos:g,startBearing:_,startPitch:b,startZoom:w}),P(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart({pos:t}){return this._getUpdatedState({startPanLngLat:this._unproject(t)})}pan({pos:t,startPos:r}){const n=this.getState().startPanLngLat||this._unproject(r);if(!n)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(n,t);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:t,deltaAngleX:r=0,deltaAngleY:n=0}){const{startRotatePos:i,startBearing:o,startPitch:s}=this.getState();if(!i||o===void 0||s===void 0)return this;let a;return t?a=this._getNewRotation(t,i,s,o):a={bearing:o+r,pitch:s+n},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:t}){return this._getUpdatedState({startZoomLngLat:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom({pos:t,startPos:r,scale:n}){let{startZoom:i,startZoomLngLat:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(r)||this._unproject(t)),!o)return this;const{maxZoom:s,minZoom:a}=this.getViewportProps();let l=i+Math.log2(n);l=Ar(l,a,s);const u=this.makeViewport({...this.getViewportProps(),zoom:l});return this._getUpdatedState({zoom:l,...u.panByPosition(o,t)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(t=2){return this._zoomFromCenter(t)}zoomOut(t=2){return this._zoomFromCenter(1/t)}moveLeft(t=100){return this._panFromCenter([t,0])}moveRight(t=100){return this._panFromCenter([-t,0])}moveUp(t=100){return this._panFromCenter([0,t])}moveDown(t=100){return this._panFromCenter([0,-t])}rotateLeft(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-t})}rotateRight(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+t})}rotateUp(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+t})}rotateDown(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-t})}shortestPathFrom(t){const r=t.getViewportProps(),n={...this.getViewportProps()},{bearing:i,longitude:o}=n;return Math.abs(i-r.bearing)>180&&(n.bearing=i<0?i+360:i-360),Math.abs(o-r.longitude)>180&&(n.longitude=o<0?o+360:o-360),n}applyConstraints(t){const{maxZoom:r,minZoom:n,zoom:i}=t;t.zoom=Ar(i,n,r);const{maxPitch:o,minPitch:s,pitch:a}=t;t.pitch=Ar(a,s,o);const{normalize:l=!0}=t;return l&&Object.assign(t,ewt(t)),t}_zoomFromCenter(t){const{width:r,height:n}=this.getViewportProps();return this.zoom({pos:[r/2,n/2],scale:t})}_panFromCenter(t){const{width:r,height:n}=this.getViewportProps();return this.pan({startPos:[r/2,n/2],pos:[r/2+t[0],n/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}_unproject(t){const r=this.makeViewport(this.getViewportProps());return t&&r.unproject(t)}_getNewRotation(t,r,n,i){const o=t[0]-r[0],s=t[1]-r[1],a=t[1],l=r[1],{width:u,height:c}=this.getViewportProps(),f=o/u;let h=0;s>0?Math.abs(c-l)>GL&&(h=s/(l-c)*iSt):s<0&&l>GL&&(h=1-a/l),h=Ar(h,-1,1);const{minPitch:d,maxPitch:p}=this.getViewportProps(),v=i+180*f;let m=n;return h>0?m=n+h*(p-n):h<0&&(m=n-h*(d-n)),{pitch:m,bearing:v}}}class sSt extends oV{constructor(...t){super(...t),P(this,"ControllerState",oSt),P(this,"transition",{transitionDuration:300,transitionInterpolator:new O_({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),P(this,"dragMode","pan")}setProps(t){t.position=t.position||[0,0,0];const r=this.props;super.setProps(t),(!r||r.height!==t.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...t,...this.state}))}}class aV extends iV{get ViewportType(){return Do}get ControllerType(){return sSt}}P(aV,"displayName","MapView");class aSt extends L_{constructor(t,r){super(t,r),P(this,"maskMap",void 0),P(this,"fbo",void 0);const{mapSize:n=2048}=r;this.maskMap=new wn(t,{width:n,height:n,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.fbo=new ar(t,{id:"maskmap",width:n,height:n,attachments:{[36064]:this.maskMap}})}render(t){const r=this.gl,n=[!1,!1,!1,!1];return n[t.channel]=!0,ai(r,{clearColor:[255,255,255,255],blend:!0,blendFunc:[0,1],blendEquation:32778,colorMask:n,depthTest:!1},()=>super.render({...t,target:this.fbo,pass:"mask"}))}shouldDrawLayer(t){return t.props.operation===e0.MASK}delete(){this.fbo.delete(),this.maskMap.delete()}}const lSt=new Xr().lookAt({eye:[0,0,1]});function uSt({width:e,height:t,near:r,far:n,padding:i}){let o=-e/2,s=e/2,a=-t/2,l=t/2;if(i){const{left:u=0,right:c=0,top:f=0,bottom:h=0}=i,d=Ar((u+e-c)/2,0,e)-e/2,p=Ar((f+t-h)/2,0,t)-t/2;o-=d,s-=d,a+=p,l+=p}return new Xr().ortho({left:o,right:s,bottom:a,top:l,near:r,far:n})}class cSt extends ja{constructor(t){const{width:r,height:n,near:i=.1,far:o=1e3,zoom:s=0,target:a=[0,0,0],padding:l=null,flipY:u=!0}=t,c=Array.isArray(s)?s[0]:s,f=Array.isArray(s)?s[1]:s,h=Math.min(c,f),d=Math.pow(2,h);let p;if(c!==f){const v=Math.pow(2,c),m=Math.pow(2,f);p={unitsPerMeter:[v/d,m/d,1],metersPerUnit:[d/v,d/m,1]}}super({...t,longitude:void 0,position:a,viewMatrix:lSt.clone().scale([d,d*(u?-1:1),d]),projectionMatrix:uSt({width:r||1,height:n||1,padding:l,near:i,far:o}),zoom:h,distanceScales:p})}projectFlat([t,r]){const{unitsPerMeter:n}=this.distanceScales;return[t*n[0],r*n[1]]}unprojectFlat([t,r]){const{metersPerUnit:n}=this.distanceScales;return[t*n[0],r*n[1]]}panByPosition(t,r){const n=x_(r,this.pixelUnprojectionMatrix),i=this.projectFlat(t),o=d1([],i,E$([],n)),s=d1([],this.center,o);return{target:this.unprojectFlat(s)}}}class fSt extends sV{constructor(t){const{width:r,height:n,rotationX:i=0,rotationOrbit:o=0,target:s=[0,0,0],zoom:a=0,minRotationX:l=-90,maxRotationX:u=90,minZoom:c=-1/0,maxZoom:f=1/0,startPanPosition:h,startRotatePos:d,startRotationX:p,startRotationOrbit:v,startZoomPosition:m,startZoom:g}=t;super({width:r,height:n,rotationX:i,rotationOrbit:o,target:s,zoom:a,minRotationX:l,maxRotationX:u,minZoom:c,maxZoom:f},{startPanPosition:h,startRotatePos:d,startRotationX:p,startRotationOrbit:v,startZoomPosition:m,startZoom:g}),P(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart({pos:t}){return this._getUpdatedState({startPanPosition:this._unproject(t)})}pan({pos:t,startPosition:r}){const n=this.getState().startPanPosition||r;if(!n)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(n,t);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:t,deltaAngleX:r=0,deltaAngleY:n=0}){const{startRotatePos:i,startRotationX:o,startRotationOrbit:s}=this.getState(),{width:a,height:l}=this.getViewportProps();if(!i||o===void 0||s===void 0)return this;let u;if(t){let c=(t[0]-i[0])/a;const f=(t[1]-i[1])/l;(o<-90||o>90)&&(c*=-1),u={rotationX:o+f*180,rotationOrbit:s+c*180}}else u={rotationX:o+n,rotationOrbit:s+r};return this._getUpdatedState(u)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(t){const r=t.getViewportProps(),n={...this.getViewportProps()},{rotationOrbit:i}=n;return Math.abs(i-r.rotationOrbit)>180&&(n.rotationOrbit=i<0?i+360:i-360),n}zoomStart({pos:t}){return this._getUpdatedState({startZoomPosition:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom({pos:t,startPos:r,scale:n}){let{startZoom:i,startZoomPosition:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(r)||this._unproject(t)),!o)return this;const s=this._calculateNewZoom({scale:n,startZoom:i}),a=this.makeViewport({...this.getViewportProps(),zoom:s});return this._getUpdatedState({zoom:s,...a.panByPosition(o,t)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(t=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:t})})}zoomOut(t=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/t})})}moveLeft(t=50){return this._panFromCenter([-t,0])}moveRight(t=50){return this._panFromCenter([t,0])}moveUp(t=50){return this._panFromCenter([0,-t])}moveDown(t=50){return this._panFromCenter([0,t])}rotateLeft(t=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-t})}rotateRight(t=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+t})}rotateUp(t=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-t})}rotateDown(t=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+t})}_unproject(t){const r=this.makeViewport(this.getViewportProps());return t&&r.unproject(t)}_calculateNewZoom({scale:t,startZoom:r}){const{maxZoom:n,minZoom:i}=this.getViewportProps();r===void 0&&(r=this.getViewportProps().zoom);const o=r+Math.log2(t);return Ar(o,i,n)}_panFromCenter(t){const{width:r,height:n,target:i}=this.getViewportProps();return this.pan({startPosition:i,pos:[r/2+t[0],n/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}applyConstraints(t){const{maxZoom:r,minZoom:n,zoom:i,maxRotationX:o,minRotationX:s,rotationOrbit:a}=t;return t.zoom=Array.isArray(i)?[Ar(i[0],n,r),Ar(i[1],n,r)]:Ar(i,n,r),t.rotationX=Ar(t.rotationX,s,o),(a<-180||a>180)&&(t.rotationOrbit=xwt(a+180,360)-180),t}}class hSt extends fSt{constructor(t){super(t),P(this,"zoomAxis",void 0),this.zoomAxis=t.zoomAxis||"all"}_calculateNewZoom({scale:t,startZoom:r}){const{maxZoom:n,minZoom:i}=this.getViewportProps();r===void 0&&(r=this.getViewportProps().zoom);let o=Math.log2(t);if(Array.isArray(r)){let[s,a]=r;switch(this.zoomAxis){case"X":s=Ar(s+o,i,n);break;case"Y":a=Ar(a+o,i,n);break;default:let l=Math.min(s+o,a+o);l<i&&(o+=i-l),l=Math.max(s+o,a+o),l>n&&(o+=n-l),s+=o,a+=o}return[s,a]}return Ar(r+o,i,n)}}class dSt extends oV{constructor(...t){super(...t),P(this,"ControllerState",hSt),P(this,"transition",{transitionDuration:300,transitionInterpolator:new O_(["target","zoom"])}),P(this,"dragMode","pan")}_onPanRotate(){return!1}}class R_ extends iV{get ViewportType(){return cSt}get ControllerType(){return dSt}}P(R_,"displayName","OrthographicView");function pSt({layers:e,viewport:t}){let r=null;for(const o of e){const s=o.getBounds();s&&(r?(r[0]=Math.min(r[0],s[0][0]),r[1]=Math.min(r[1],s[0][1]),r[2]=Math.max(r[2],s[1][0]),r[3]=Math.max(r[3],s[1][1])):r=[s[0][0],s[0][1],s[1][0],s[1][1]])}const n=t.getBounds();if(!r)return n;const i=gSt(n);return r[2]-r[0]<i[2]-i[0]||r[3]-r[1]<i[3]-i[1]||(r[0]=Math.max(r[0],i[0]),r[1]=Math.max(r[1],i[1]),r[2]=Math.min(r[2],i[2]),r[3]=Math.min(r[3],i[3])),r}function vSt({bounds:e,viewport:t,width:r,height:n}){if(e[2]<=e[0]||e[3]<=e[1])return null;const i=1;if(r-=i*2,n-=i*2,t instanceof Do){const{longitude:a,latitude:l,zoom:u}=Q$({width:r,height:n,bounds:[[e[0],e[1]],[e[2],e[3]]],maxZoom:20});return new Do({longitude:a,latitude:l,zoom:u,x:i,y:i,width:r,height:n})}const o=[(e[0]+e[2])/2,(e[1]+e[3])/2,0],s=Math.min(20,r/(e[2]-e[0]),n/(e[3]-e[1]));return new R_({x:i,y:i}).makeViewport({width:r,height:n,viewState:{target:o,zoom:Math.log2(s)}})}function gSt(e){const t={x:e[2]-e[0],y:e[3]-e[1]},r={x:e[0]+.5*t.x,y:e[1]+.5*t.y};return[r.x-t.x,r.y-t.y,r.x+t.x,r.y+t.y]}class mSt{constructor(){P(this,"id","mask-effect"),P(this,"props",null),P(this,"useInPicking",!0),P(this,"dummyMaskMap",void 0),P(this,"channels",[]),P(this,"masks",null),P(this,"maskPass",void 0),P(this,"maskMap",void 0),P(this,"lastViewport",void 0)}preRender(t,{layers:r,layerFilter:n,viewports:i,onViewportActive:o,views:s}){this.dummyMaskMap||(this.dummyMaskMap=new wn(t,{width:1,height:1}));const a=r.filter(f=>f.props.visible&&f.props.operation===e0.MASK);if(a.length===0){this.masks=null,this.channels.length=0;return}this.masks={},this.maskPass||(this.maskPass=new aSt(t,{id:"default-mask"}),this.maskMap=this.maskPass.maskMap);const l=this._sortMaskChannels(a),u=i[0],c=!this.lastViewport||!this.lastViewport.equals(u);for(const f in l)this._renderChannel(l[f],{layerFilter:n,onViewportActive:o,views:s,viewport:u,viewportChanged:c})}_renderChannel(t,{layerFilter:r,onViewportActive:n,views:i,viewport:o,viewportChanged:s}){const a=this.channels[t.index];if(!a)return;const l=t===a||a.layers.length!==t.layers.length||t.layerBounds.some((u,c)=>u!==a.layerBounds[c]);if(t.bounds=a.bounds,t.maskBounds=a.maskBounds,this.channels[t.index]=t,(l||s)&&(this.lastViewport=o,t.bounds=pSt({layers:t.layers,viewport:o}),l||!xo(t.bounds,a.bounds))){const{maskPass:u,maskMap:c}=this,f=vSt({bounds:t.bounds,viewport:o,width:c.width,height:c.height});t.maskBounds=f?f.getBounds():[0,0,1,1],u.render({pass:"mask",channel:t.index,layers:t.layers,layerFilter:r,viewports:f?[f]:[],onViewportActive:n,views:i,moduleParameters:{devicePixelRatio:1}})}this.masks[t.id]={index:t.index,bounds:t.maskBounds,coordinateOrigin:t.coordinateOrigin,coordinateSystem:t.coordinateSystem}}_sortMaskChannels(t){const r={};let n=0;for(const i of t){const{id:o}=i.root;let s=r[o];if(!s){if(++n>4){Yt.warn("Too many mask layers. The max supported is 4")();continue}s={id:o,index:this.channels.findIndex(a=>(a==null?void 0:a.id)===o),layers:[],layerBounds:[],coordinateOrigin:i.root.props.coordinateOrigin,coordinateSystem:i.root.props.coordinateSystem},r[o]=s}s.layers.push(i),s.layerBounds.push(i.getBounds())}for(let i=0;i<4;i++){const o=this.channels[i];(!o||!(o.id in r))&&(this.channels[i]=null)}for(const i in r){const o=r[i];o.index<0&&(o.index=this.channels.findIndex(s=>!s),this.channels[o.index]=o)}return r}getModuleParameters(){return{maskMap:this.masks?this.maskMap:this.dummyMaskMap,maskChannels:this.masks}}cleanup(){this.dummyMaskMap&&(this.dummyMaskMap.delete(),this.dummyMaskMap=void 0),this.maskPass&&(this.maskPass.delete(),this.maskPass=void 0,this.maskMap=void 0),this.lastViewport=void 0,this.masks=null,this.channels.length=0}}const _St=new eV;class ySt{constructor(){P(this,"effects",void 0),P(this,"_internalEffects",void 0),P(this,"_needsRedraw",void 0),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(t){"effects"in t&&(t.effects.length!==this.effects.length||!zf(t.effects,this.effects))&&(this.setEffects(t.effects),this._needsRedraw="effects changed")}needsRedraw(t={clearRedrawFlags:!1}){const r=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),r}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(t=[]){this.cleanup(),this.effects=t,this._internalEffects=t.slice(),this._internalEffects.push(new mSt),t.some(r=>r instanceof eV)||this._internalEffects.push(_St)}cleanup(){for(const t of this.effects)t.cleanup();for(const t of this._internalEffects)t.cleanup();this.effects.length=0,this._internalEffects.length=0}}class bSt extends L_{shouldDrawLayer(t){return t.props.operation===e0.DRAW}}const HL={blendFunc:[1,0,32771,0],blendEquation:32774};class lV extends L_{constructor(...t){super(...t),P(this,"pickZ",void 0),P(this,"_colors",null)}render(t){return t.pickingFBO?this._drawPickingBuffer(t):super.render(t)}_drawPickingBuffer({layers:t,layerFilter:r,views:n,viewports:i,onViewportActive:o,pickingFBO:s,deviceRect:{x:a,y:l,width:u,height:c},cullRect:f,effects:h,pass:d="picking",pickZ:p}){const v=this.gl;this.pickZ=p;const m=p?null:{byLayer:new Map,byAlpha:[]};this._colors=m;const g=ai(v,{scissorTest:!0,scissor:[a,l,u,c],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...HL,blend:!p},()=>super.render({target:s,layers:t,layerFilter:r,views:n,viewports:i,onViewportActive:o,cullRect:f,effects:h==null?void 0:h.filter(b=>b.useInPicking),pass:d}));return this._colors=null,{decodePickingColor:m&&SSt.bind(null,m),stats:g}}shouldDrawLayer(t){return t.props.pickable&&t.props.operation===e0.DRAW}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(t,r,n){const i={...t.props.parameters};return this._colors?(Object.assign(i,HL),i.blend=!0,i.blendColor=wSt(this._colors,t,n)):i.blend=!1,i}}function wSt(e,t,r){const{byLayer:n,byAlpha:i}=e;let o,s=n.get(t);return s?(s.viewports.push(r),o=s.a):(o=n.size+1,o<=255?(s={a:o,layer:t,viewports:[r]},n.set(t,s),i[o]=s):(Yt.warn("Too many pickable layers, only picking the first 255")(),o=0)),[0,0,0,o/255]}function SSt(e,t){const r=e.byAlpha[t[3]];return r&&{pickedLayer:r.layer,pickedViewports:r.viewports,pickedObjectIndex:r.layer.decodePickingColor(t)}}const TSt="deckRenderer.renderLayers";class kSt{constructor(t){this.gl=t,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new bSt(t),this.pickLayersPass=new lV(t),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(t){"layerFilter"in t&&this.layerFilter!==t.layerFilter&&(this.layerFilter=t.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in t&&this.drawPickingColors!==t.drawPickingColors&&(this.drawPickingColors=t.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(t){const r=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;t.layerFilter=t.layerFilter||this.layerFilter,t.effects=t.effects||[],t.target=t.target||ar.getDefaultFramebuffer(this.gl),this._preRender(t.effects,t);const n=this.lastPostProcessEffect?this.renderBuffers[0]:t.target,i=r.render({...t,target:n});this._postRender(t.effects,t),this.renderCount++,Ur(TSt,this,i,t)}needsRedraw(t={clearRedrawFlags:!1}){const r=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),r}finalize(){const{renderBuffers:t}=this;for(const r of t)r.delete();t.length=0}_preRender(t,r){let n=null;for(const i of t)i.preRender(this.gl,r),i.postRender&&(n=i);n&&this._resizeRenderBuffers(),this.lastPostProcessEffect=n}_resizeRenderBuffers(){const{renderBuffers:t}=this;t.length===0&&t.push(new ar(this.gl),new ar(this.gl));for(const r of t)r.resize()}_postRender(t,r){const{renderBuffers:n}=this,i={inputBuffer:n[0],swapBuffer:n[1],target:null};for(const o of t)if(o.postRender){if(o===this.lastPostProcessEffect){i.target=r.target,o.postRender(this.gl,i);break}const s=o.postRender(this.gl,i);i.inputBuffer=s,i.swapBuffer=s===n[0]?n[1]:n[0]}}}const PSt={pickedColor:null,pickedObjectIndex:-1};function ESt({pickedColors:e,decodePickingColor:t,deviceX:r,deviceY:n,deviceRadius:i,deviceRect:o}){const{x:s,y:a,width:l,height:u}=o;let c=i*i,f=-1,h=0;for(let d=0;d<u;d++){const p=d+a-n,v=p*p;if(v>c)h+=4*l;else for(let m=0;m<l;m++){if(e[h+3]-1>=0){const _=m+s-r,b=_*_+v;b<=c&&(c=b,f=h)}h+=4}}if(f>=0){const d=e.slice(f,f+4),p=t(d);if(p){const v=Math.floor(f/4/l),m=f/4-v*l;return{...p,pickedColor:d,pickedX:s+m,pickedY:a+v}}Yt.error("Picked non-existent layer. Is picking buffer corrupt?")()}return PSt}function CSt({pickedColors:e,decodePickingColor:t}){const r=new Map;if(e){for(let n=0;n<e.length;n+=4)if(e[n+3]-1>=0){const o=e.slice(n,n+4),s=o.join(",");if(!r.has(s)){const a=t(o);a?r.set(s,{...a,color:o}):Yt.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(r.values())}function uV({pickInfo:e,viewports:t,pixelRatio:r,x:n,y:i,z:o}){let s=t[0];t.length>1&&(s=MSt((e==null?void 0:e.pickedViewports)||t,{x:n,y:i}));let a;if(s){const l=[n-s.x,i-s.y];o!==void 0&&(l[2]=o),a=s.unproject(l)}return{color:null,layer:null,viewport:s,index:-1,picked:!1,x:n,y:i,pixel:[n,i],coordinate:a,devicePixel:e&&"pickedX"in e?[e.pickedX,e.pickedY]:void 0,pixelRatio:r}}function ASt(e){const{pickInfo:t,lastPickedInfo:r,mode:n,layers:i}=e,{pickedColor:o,pickedLayer:s,pickedObjectIndex:a}=t,l=s?[s]:[];if(n==="hover"){const f=r.index,h=r.layerId,d=s?s.props.id:null;if(d!==h||a!==f){if(d!==h){const p=i.find(v=>v.props.id===h);p&&l.unshift(p)}r.layerId=d,r.index=a,r.info=null}}const u=uV(e),c=new Map;return c.set(null,u),l.forEach(f=>{let h={...u};f===s&&(h.color=o,h.index=a,h.picked=!0),h=cV({layer:f,info:h,mode:n});const d=h.layer;f===s&&n==="hover"&&(r.info=h),c.set(d.id,h),n==="hover"&&d.updateAutoHighlight(h)}),c}function cV({layer:e,info:t,mode:r}){for(;e&&t;){const n=t.layer||null;t.sourceLayer=n,t.layer=e,t=e.getPickingInfo({info:t,mode:r,sourceLayer:n}),e=e.parent}return t}function MSt(e,t){for(let r=e.length-1;r>=0;r--){const n=e[r];if(n.containsPixel(t))return n}return e[0]}class xSt{constructor(t){P(this,"gl",void 0),P(this,"pickingFBO",void 0),P(this,"depthFBO",void 0),P(this,"pickLayersPass",void 0),P(this,"layerFilter",void 0),P(this,"lastPickedInfo",void 0),P(this,"_pickable",!0),this.gl=t,this.pickLayersPass=new lV(t),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(t){"layerFilter"in t&&(this.layerFilter=t.layerFilter),"_pickable"in t&&(this._pickable=t._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(t){return this._pickClosestObject(t)}pickObjects(t){return this._pickVisibleObjects(t)}getLastPickedObject({x:t,y:r,layers:n,viewports:i},o=this.lastPickedInfo.info){const s=o&&o.layer&&o.layer.id,a=o&&o.viewport&&o.viewport.id,l=s?n.find(h=>h.id===s):null,u=a&&i.find(h=>h.id===a)||i[0],c=u&&u.unproject([t-u.x,r-u.y]);return{...o,...{x:t,y:r,viewport:u,coordinate:c,layer:l}}}_resizeBuffer(){var t,r;const{gl:n}=this;if(!this.pickingFBO&&(this.pickingFBO=new ar(n),ar.isSupported(n,{colorBufferFloat:!0}))){const i=new ar(n);i.attach({[36064]:new wn(n,{format:re(n)?34836:6408,type:5126})}),this.depthFBO=i}(t=this.pickingFBO)===null||t===void 0||t.resize({width:n.canvas.width,height:n.canvas.height}),(r=this.depthFBO)===null||r===void 0||r.resize({width:n.canvas.width,height:n.canvas.height})}_getPickable(t){if(this._pickable===!1)return null;const r=t.filter(n=>n.isPickable()&&!n.isComposite);return r.length?r:null}_pickClosestObject({layers:t,views:r,viewports:n,x:i,y:o,radius:s=0,depth:a=1,mode:l="query",unproject3D:u,onViewportActive:c,effects:f}){const h=this._getPickable(t),d=hf(this.gl);if(!h)return{result:[],emptyInfo:uV({viewports:n,x:i,y:o,pixelRatio:d})};this._resizeBuffer();const p=wb(this.gl,[i,o],!0),v=[p.x+Math.floor(p.width/2),p.y+Math.floor(p.height/2)],m=Math.round(s*d),{width:g,height:_}=this.pickingFBO,b=this._getPickingRect({deviceX:v[0],deviceY:v[1],deviceRadius:m,deviceWidth:g,deviceHeight:_}),w={x:i-s,y:o-s,width:s*2+1,height:s*2+1};let T;const S=[],k=new Set;for(let A=0;A<a;A++){let C;if(b){const I=this._drawAndSample({layers:h,views:r,viewports:n,onViewportActive:c,deviceRect:b,cullRect:w,effects:f,pass:"picking:".concat(l)});C=ESt({...I,deviceX:v[0],deviceY:v[1],deviceRadius:m,deviceRect:b})}else C={pickedColor:null,pickedObjectIndex:-1};let x;C.pickedLayer&&u&&this.depthFBO&&(x=this._drawAndSample({layers:[C.pickedLayer],views:r,viewports:n,onViewportActive:c,deviceRect:{x:C.pickedX,y:C.pickedY,width:1,height:1},cullRect:w,effects:f,pass:"picking:".concat(l,":z")},!0).pickedColors[0]),C.pickedLayer&&A+1<a&&(k.add(C.pickedLayer),C.pickedLayer.disablePickingIndex(C.pickedObjectIndex)),T=ASt({pickInfo:C,lastPickedInfo:this.lastPickedInfo,mode:l,layers:h,viewports:n,x:i,y:o,z:x,pixelRatio:d});for(const I of T.values())I.layer&&S.push(I);if(!C.pickedColor)break}for(const A of k)A.restorePickingColors();return{result:S,emptyInfo:T.get(null)}}_pickVisibleObjects({layers:t,views:r,viewports:n,x:i,y:o,width:s=1,height:a=1,mode:l="query",maxObjects:u=null,onViewportActive:c,effects:f}){const h=this._getPickable(t);if(!h)return[];this._resizeBuffer();const d=hf(this.gl),p=wb(this.gl,[i,o],!0),v=p.x,m=p.y+p.height,g=wb(this.gl,[i+s,o+a],!0),_=g.x+g.width,b=g.y,w={x:v,y:b,width:_-v,height:m-b},T=this._drawAndSample({layers:h,views:r,viewports:n,onViewportActive:c,deviceRect:w,cullRect:{x:i,y:o,width:s,height:a},effects:f,pass:"picking:".concat(l)}),S=CSt(T),k=new Map,A=Number.isFinite(u);for(let C=0;C<S.length&&!(A&&u&&k.size>=u);C++){const x=S[C];let I={color:x.pickedColor,layer:null,index:x.pickedObjectIndex,picked:!0,x:i,y:o,pixelRatio:d};I=cV({layer:x.pickedLayer,info:I,mode:l}),k.has(I.object)||k.set(I.object,I)}return Array.from(k.values())}_drawAndSample({layers:t,views:r,viewports:n,onViewportActive:i,deviceRect:o,cullRect:s,effects:a,pass:l},u=!1){const c=u?this.depthFBO:this.pickingFBO,{decodePickingColor:f}=this.pickLayersPass.render({layers:t,layerFilter:this.layerFilter,views:r,viewports:n,onViewportActive:i,pickingFBO:c,deviceRect:o,cullRect:s,effects:a,pass:l,pickZ:u}),{x:h,y:d,width:p,height:v}=o,m=new(u?Float32Array:Uint8Array)(p*v*4);return M_(c,{sourceX:h,sourceY:d,sourceWidth:p,sourceHeight:v,target:m}),{pickedColors:m,decodePickingColor:f}}_getPickingRect({deviceX:t,deviceY:r,deviceRadius:n,deviceWidth:i,deviceHeight:o}){const s=Math.max(0,t-n),a=Math.max(0,r-n),l=Math.min(i,t+n+1)-s,u=Math.min(o,r+n+1)-a;return l<=0||u<=0?null:{x:s,y:a,width:l,height:u}}}const LSt={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class ISt{constructor(t){P(this,"el",null),P(this,"isVisible",!1);const r=t.parentElement;r&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,LSt),r.appendChild(this.el))}setTooltip(t,r,n){const i=this.el;if(!!i){if(typeof t=="string")i.innerText=t;else if(t)t.text&&(i.innerText=t.text),t.html&&(i.innerHTML=t.html),t.className&&(i.className=t.className),Object.assign(i.style,t.style);else{this.isVisible=!1,i.style.display="none";return}this.isVisible=!0,i.style.display="block",i.style.transform="translate(".concat(r,"px, ").concat(n,"px)")}}remove(){this.el&&(this.el.remove(),this.el=null)}}var Bf={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(e){(function(t,r,n,i){var o=["","webkit","Moz","MS","ms","o"],s=r.createElement("div"),a="function",l=Math.round,u=Math.abs,c=Date.now;function f(O,D,U){return setTimeout(b(O,U),D)}function h(O,D,U){return Array.isArray(O)?(d(O,U[D],U),!0):!1}function d(O,D,U){var H;if(!!O)if(O.forEach)O.forEach(D,U);else if(O.length!==i)for(H=0;H<O.length;)D.call(U,O[H],H,O),H++;else for(H in O)O.hasOwnProperty(H)&&D.call(U,O[H],H,O)}function p(O,D,U){var H="DEPRECATED METHOD: "+D+`
`+U+` AT 
`;return function(){var rt=new Error("get-stack-trace"),Tt=rt&&rt.stack?rt.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Kt=t.console&&(t.console.warn||t.console.log);return Kt&&Kt.call(t.console,H,Tt),O.apply(this,arguments)}}var v;typeof Object.assign!="function"?v=function(D){if(D===i||D===null)throw new TypeError("Cannot convert undefined or null to object");for(var U=Object(D),H=1;H<arguments.length;H++){var rt=arguments[H];if(rt!==i&&rt!==null)for(var Tt in rt)rt.hasOwnProperty(Tt)&&(U[Tt]=rt[Tt])}return U}:v=Object.assign;var m=p(function(D,U,H){for(var rt=Object.keys(U),Tt=0;Tt<rt.length;)(!H||H&&D[rt[Tt]]===i)&&(D[rt[Tt]]=U[rt[Tt]]),Tt++;return D},"extend","Use `assign`."),g=p(function(D,U){return m(D,U,!0)},"merge","Use `assign`.");function _(O,D,U){var H=D.prototype,rt;rt=O.prototype=Object.create(H),rt.constructor=O,rt._super=H,U&&v(rt,U)}function b(O,D){return function(){return O.apply(D,arguments)}}function w(O,D){return typeof O==a?O.apply(D&&D[0]||i,D):O}function T(O,D){return O===i?D:O}function S(O,D,U){d(x(D),function(H){O.addEventListener(H,U,!1)})}function k(O,D,U){d(x(D),function(H){O.removeEventListener(H,U,!1)})}function A(O,D){for(;O;){if(O==D)return!0;O=O.parentNode}return!1}function C(O,D){return O.indexOf(D)>-1}function x(O){return O.trim().split(/\s+/g)}function I(O,D,U){if(O.indexOf&&!U)return O.indexOf(D);for(var H=0;H<O.length;){if(U&&O[H][U]==D||!U&&O[H]===D)return H;H++}return-1}function N(O){return Array.prototype.slice.call(O,0)}function B(O,D,U){for(var H=[],rt=[],Tt=0;Tt<O.length;){var Kt=D?O[Tt][D]:O[Tt];I(rt,Kt)<0&&H.push(O[Tt]),rt[Tt]=Kt,Tt++}return U&&(D?H=H.sort(function(Tr,Jr){return Tr[D]>Jr[D]}):H=H.sort()),H}function V(O,D){for(var U,H,rt=D[0].toUpperCase()+D.slice(1),Tt=0;Tt<o.length;){if(U=o[Tt],H=U?U+rt:D,H in O)return H;Tt++}return i}var F=1;function G(){return F++}function Z(O){var D=O.ownerDocument||O;return D.defaultView||D.parentWindow||t}var q=/mobile|tablet|ip(ad|hone|od)|android/i,et="ontouchstart"in t,At=V(t,"PointerEvent")!==i,Dt=et&&q.test(navigator.userAgent),Pt="touch",Et="pen",qt="mouse",Y="kinect",it=25,K=1,gt=2,Ct=4,xt=8,ct=1,dt=2,$=4,W=8,X=16,J=dt|$,tt=W|X,ft=J|tt,mt=["x","y"],lt=["clientX","clientY"];function st(O,D){var U=this;this.manager=O,this.callback=D,this.element=O.element,this.target=O.options.inputTarget,this.domHandler=function(H){w(O.options.enable,[O])&&U.handler(H)},this.init()}st.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(Z(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&k(this.element,this.evEl,this.domHandler),this.evTarget&&k(this.target,this.evTarget,this.domHandler),this.evWin&&k(Z(this.element),this.evWin,this.domHandler)}};function nt(O){var D,U=O.options.inputClass;return U?D=U:At?D=dy:Dt?D=v0:et?D=py:D=Ka,new D(O,Nt)}function Nt(O,D,U){var H=U.pointers.length,rt=U.changedPointers.length,Tt=D&K&&H-rt===0,Kt=D&(Ct|xt)&&H-rt===0;U.isFirst=!!Tt,U.isFinal=!!Kt,Tt&&(O.session={}),U.eventType=D,It(O,U),O.emit("hammer.input",U),O.recognize(U),O.session.prevInput=U}function It(O,D){var U=O.session,H=D.pointers,rt=H.length;U.firstInput||(U.firstInput=te(D)),rt>1&&!U.firstMultiple?U.firstMultiple=te(D):rt===1&&(U.firstMultiple=!1);var Tt=U.firstInput,Kt=U.firstMultiple,hr=Kt?Kt.center:Tt.center,Tr=D.center=me(H);D.timeStamp=c(),D.deltaTime=D.timeStamp-Tt.timeStamp,D.angle=Ji(hr,Tr),D.distance=Dr(hr,Tr),Ft(U,D),D.offsetDirection=Pe(D.deltaX,D.deltaY);var Jr=_e(D.deltaTime,D.deltaX,D.deltaY);D.overallVelocityX=Jr.x,D.overallVelocityY=Jr.y,D.overallVelocity=u(Jr.x)>u(Jr.y)?Jr.x:Jr.y,D.scale=Kt?Za(Kt.pointers,H):1,D.rotation=Kt?d0(Kt.pointers,H):0,D.maxPointers=U.prevInput?D.pointers.length>U.prevInput.maxPointers?D.pointers.length:U.prevInput.maxPointers:D.pointers.length,Bt(U,D);var to=O.element;A(D.srcEvent.target,to)&&(to=D.srcEvent.target),D.target=to}function Ft(O,D){var U=D.center,H=O.offsetDelta||{},rt=O.prevDelta||{},Tt=O.prevInput||{};(D.eventType===K||Tt.eventType===Ct)&&(rt=O.prevDelta={x:Tt.deltaX||0,y:Tt.deltaY||0},H=O.offsetDelta={x:U.x,y:U.y}),D.deltaX=rt.x+(U.x-H.x),D.deltaY=rt.y+(U.y-H.y)}function Bt(O,D){var U=O.lastInterval||D,H=D.timeStamp-U.timeStamp,rt,Tt,Kt,hr;if(D.eventType!=xt&&(H>it||U.velocity===i)){var Tr=D.deltaX-U.deltaX,Jr=D.deltaY-U.deltaY,to=_e(H,Tr,Jr);Tt=to.x,Kt=to.y,rt=u(to.x)>u(to.y)?to.x:to.y,hr=Pe(Tr,Jr),O.lastInterval=D}else rt=U.velocity,Tt=U.velocityX,Kt=U.velocityY,hr=U.direction;D.velocity=rt,D.velocityX=Tt,D.velocityY=Kt,D.direction=hr}function te(O){for(var D=[],U=0;U<O.pointers.length;)D[U]={clientX:l(O.pointers[U].clientX),clientY:l(O.pointers[U].clientY)},U++;return{timeStamp:c(),pointers:D,center:me(D),deltaX:O.deltaX,deltaY:O.deltaY}}function me(O){var D=O.length;if(D===1)return{x:l(O[0].clientX),y:l(O[0].clientY)};for(var U=0,H=0,rt=0;rt<D;)U+=O[rt].clientX,H+=O[rt].clientY,rt++;return{x:l(U/D),y:l(H/D)}}function _e(O,D,U){return{x:D/O||0,y:U/O||0}}function Pe(O,D){return O===D?ct:u(O)>=u(D)?O<0?dt:$:D<0?W:X}function Dr(O,D,U){U||(U=mt);var H=D[U[0]]-O[U[0]],rt=D[U[1]]-O[U[1]];return Math.sqrt(H*H+rt*rt)}function Ji(O,D,U){U||(U=mt);var H=D[U[0]]-O[U[0]],rt=D[U[1]]-O[U[1]];return Math.atan2(rt,H)*180/Math.PI}function d0(O,D){return Ji(D[1],D[0],lt)+Ji(O[1],O[0],lt)}function Za(O,D){return Dr(D[0],D[1],lt)/Dr(O[0],O[1],lt)}var p0={mousedown:K,mousemove:gt,mouseup:Ct},Kr="mousedown",$n="mousemove mouseup";function Ka(){this.evEl=Kr,this.evWin=$n,this.pressed=!1,st.apply(this,arguments)}_(Ka,st,{handler:function(D){var U=p0[D.type];U&K&&D.button===0&&(this.pressed=!0),U&gt&&D.which!==1&&(U=Ct),this.pressed&&(U&Ct&&(this.pressed=!1),this.callback(this.manager,U,{pointers:[D],changedPointers:[D],pointerType:qt,srcEvent:D}))}});var lj={pointerdown:K,pointermove:gt,pointerup:Ct,pointercancel:xt,pointerout:xt},uj={2:Pt,3:Et,4:qt,5:Y},AC="pointerdown",MC="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(AC="MSPointerDown",MC="MSPointerMove MSPointerUp MSPointerCancel");function dy(){this.evEl=AC,this.evWin=MC,st.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}_(dy,st,{handler:function(D){var U=this.store,H=!1,rt=D.type.toLowerCase().replace("ms",""),Tt=lj[rt],Kt=uj[D.pointerType]||D.pointerType,hr=Kt==Pt,Tr=I(U,D.pointerId,"pointerId");Tt&K&&(D.button===0||hr)?Tr<0&&(U.push(D),Tr=U.length-1):Tt&(Ct|xt)&&(H=!0),!(Tr<0)&&(U[Tr]=D,this.callback(this.manager,Tt,{pointers:U,changedPointers:[D],pointerType:Kt,srcEvent:D}),H&&U.splice(Tr,1))}});var cj={touchstart:K,touchmove:gt,touchend:Ct,touchcancel:xt},fj="touchstart",hj="touchstart touchmove touchend touchcancel";function xC(){this.evTarget=fj,this.evWin=hj,this.started=!1,st.apply(this,arguments)}_(xC,st,{handler:function(D){var U=cj[D.type];if(U===K&&(this.started=!0),!!this.started){var H=dj.call(this,D,U);U&(Ct|xt)&&H[0].length-H[1].length===0&&(this.started=!1),this.callback(this.manager,U,{pointers:H[0],changedPointers:H[1],pointerType:Pt,srcEvent:D})}}});function dj(O,D){var U=N(O.touches),H=N(O.changedTouches);return D&(Ct|xt)&&(U=B(U.concat(H),"identifier",!0)),[U,H]}var pj={touchstart:K,touchmove:gt,touchend:Ct,touchcancel:xt},vj="touchstart touchmove touchend touchcancel";function v0(){this.evTarget=vj,this.targetIds={},st.apply(this,arguments)}_(v0,st,{handler:function(D){var U=pj[D.type],H=gj.call(this,D,U);!H||this.callback(this.manager,U,{pointers:H[0],changedPointers:H[1],pointerType:Pt,srcEvent:D})}});function gj(O,D){var U=N(O.touches),H=this.targetIds;if(D&(K|gt)&&U.length===1)return H[U[0].identifier]=!0,[U,U];var rt,Tt,Kt=N(O.changedTouches),hr=[],Tr=this.target;if(Tt=U.filter(function(Jr){return A(Jr.target,Tr)}),D===K)for(rt=0;rt<Tt.length;)H[Tt[rt].identifier]=!0,rt++;for(rt=0;rt<Kt.length;)H[Kt[rt].identifier]&&hr.push(Kt[rt]),D&(Ct|xt)&&delete H[Kt[rt].identifier],rt++;if(!!hr.length)return[B(Tt.concat(hr),"identifier",!0),hr]}var mj=2500,LC=25;function py(){st.apply(this,arguments);var O=b(this.handler,this);this.touch=new v0(this.manager,O),this.mouse=new Ka(this.manager,O),this.primaryTouch=null,this.lastTouches=[]}_(py,st,{handler:function(D,U,H){var rt=H.pointerType==Pt,Tt=H.pointerType==qt;if(!(Tt&&H.sourceCapabilities&&H.sourceCapabilities.firesTouchEvents)){if(rt)_j.call(this,U,H);else if(Tt&&yj.call(this,H))return;this.callback(D,U,H)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function _j(O,D){O&K?(this.primaryTouch=D.changedPointers[0].identifier,IC.call(this,D)):O&(Ct|xt)&&IC.call(this,D)}function IC(O){var D=O.changedPointers[0];if(D.identifier===this.primaryTouch){var U={x:D.clientX,y:D.clientY};this.lastTouches.push(U);var H=this.lastTouches,rt=function(){var Tt=H.indexOf(U);Tt>-1&&H.splice(Tt,1)};setTimeout(rt,mj)}}function yj(O){for(var D=O.srcEvent.clientX,U=O.srcEvent.clientY,H=0;H<this.lastTouches.length;H++){var rt=this.lastTouches[H],Tt=Math.abs(D-rt.x),Kt=Math.abs(U-rt.y);if(Tt<=LC&&Kt<=LC)return!0}return!1}var OC=V(s.style,"touchAction"),RC=OC!==i,DC="compute",NC="auto",vy="manipulation",Ja="none",eh="pan-x",rh="pan-y",g0=wj();function gy(O,D){this.manager=O,this.set(D)}gy.prototype={set:function(O){O==DC&&(O=this.compute()),RC&&this.manager.element.style&&g0[O]&&(this.manager.element.style[OC]=O),this.actions=O.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var O=[];return d(this.manager.recognizers,function(D){w(D.options.enable,[D])&&(O=O.concat(D.getTouchAction()))}),bj(O.join(" "))},preventDefaults:function(O){var D=O.srcEvent,U=O.offsetDirection;if(this.manager.session.prevented){D.preventDefault();return}var H=this.actions,rt=C(H,Ja)&&!g0[Ja],Tt=C(H,rh)&&!g0[rh],Kt=C(H,eh)&&!g0[eh];if(rt){var hr=O.pointers.length===1,Tr=O.distance<2,Jr=O.deltaTime<250;if(hr&&Tr&&Jr)return}if(!(Kt&&Tt)&&(rt||Tt&&U&J||Kt&&U&tt))return this.preventSrc(D)},preventSrc:function(O){this.manager.session.prevented=!0,O.preventDefault()}};function bj(O){if(C(O,Ja))return Ja;var D=C(O,eh),U=C(O,rh);return D&&U?Ja:D||U?D?eh:rh:C(O,vy)?vy:NC}function wj(){if(!RC)return!1;var O={},D=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(U){O[U]=D?t.CSS.supports("touch-action",U):!0}),O}var m0=1,Vn=2,Vu=4,Rs=8,Uo=Rs,nh=16,Qi=32;function Wo(O){this.options=v({},this.defaults,O||{}),this.id=G(),this.manager=null,this.options.enable=T(this.options.enable,!0),this.state=m0,this.simultaneous={},this.requireFail=[]}Wo.prototype={defaults:{},set:function(O){return v(this.options,O),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(O){if(h(O,"recognizeWith",this))return this;var D=this.simultaneous;return O=_0(O,this),D[O.id]||(D[O.id]=O,O.recognizeWith(this)),this},dropRecognizeWith:function(O){return h(O,"dropRecognizeWith",this)?this:(O=_0(O,this),delete this.simultaneous[O.id],this)},requireFailure:function(O){if(h(O,"requireFailure",this))return this;var D=this.requireFail;return O=_0(O,this),I(D,O)===-1&&(D.push(O),O.requireFailure(this)),this},dropRequireFailure:function(O){if(h(O,"dropRequireFailure",this))return this;O=_0(O,this);var D=I(this.requireFail,O);return D>-1&&this.requireFail.splice(D,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(O){return!!this.simultaneous[O.id]},emit:function(O){var D=this,U=this.state;function H(rt){D.manager.emit(rt,O)}U<Rs&&H(D.options.event+FC(U)),H(D.options.event),O.additionalEvent&&H(O.additionalEvent),U>=Rs&&H(D.options.event+FC(U))},tryEmit:function(O){if(this.canEmit())return this.emit(O);this.state=Qi},canEmit:function(){for(var O=0;O<this.requireFail.length;){if(!(this.requireFail[O].state&(Qi|m0)))return!1;O++}return!0},recognize:function(O){var D=v({},O);if(!w(this.options.enable,[this,D])){this.reset(),this.state=Qi;return}this.state&(Uo|nh|Qi)&&(this.state=m0),this.state=this.process(D),this.state&(Vn|Vu|Rs|nh)&&this.tryEmit(D)},process:function(O){},getTouchAction:function(){},reset:function(){}};function FC(O){return O&nh?"cancel":O&Rs?"end":O&Vu?"move":O&Vn?"start":""}function zC(O){return O==X?"down":O==W?"up":O==dt?"left":O==$?"right":""}function _0(O,D){var U=D.manager;return U?U.get(O):O}function vi(){Wo.apply(this,arguments)}_(vi,Wo,{defaults:{pointers:1},attrTest:function(O){var D=this.options.pointers;return D===0||O.pointers.length===D},process:function(O){var D=this.state,U=O.eventType,H=D&(Vn|Vu),rt=this.attrTest(O);return H&&(U&xt||!rt)?D|nh:H||rt?U&Ct?D|Rs:D&Vn?D|Vu:Vn:Qi}});function y0(){vi.apply(this,arguments),this.pX=null,this.pY=null}_(y0,vi,{defaults:{event:"pan",threshold:10,pointers:1,direction:ft},getTouchAction:function(){var O=this.options.direction,D=[];return O&J&&D.push(rh),O&tt&&D.push(eh),D},directionTest:function(O){var D=this.options,U=!0,H=O.distance,rt=O.direction,Tt=O.deltaX,Kt=O.deltaY;return rt&D.direction||(D.direction&J?(rt=Tt===0?ct:Tt<0?dt:$,U=Tt!=this.pX,H=Math.abs(O.deltaX)):(rt=Kt===0?ct:Kt<0?W:X,U=Kt!=this.pY,H=Math.abs(O.deltaY))),O.direction=rt,U&&H>D.threshold&&rt&D.direction},attrTest:function(O){return vi.prototype.attrTest.call(this,O)&&(this.state&Vn||!(this.state&Vn)&&this.directionTest(O))},emit:function(O){this.pX=O.deltaX,this.pY=O.deltaY;var D=zC(O.direction);D&&(O.additionalEvent=this.options.event+D),this._super.emit.call(this,O)}});function my(){vi.apply(this,arguments)}_(my,vi,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ja]},attrTest:function(O){return this._super.attrTest.call(this,O)&&(Math.abs(O.scale-1)>this.options.threshold||this.state&Vn)},emit:function(O){if(O.scale!==1){var D=O.scale<1?"in":"out";O.additionalEvent=this.options.event+D}this._super.emit.call(this,O)}});function _y(){Wo.apply(this,arguments),this._timer=null,this._input=null}_(_y,Wo,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[NC]},process:function(O){var D=this.options,U=O.pointers.length===D.pointers,H=O.distance<D.threshold,rt=O.deltaTime>D.time;if(this._input=O,!H||!U||O.eventType&(Ct|xt)&&!rt)this.reset();else if(O.eventType&K)this.reset(),this._timer=f(function(){this.state=Uo,this.tryEmit()},D.time,this);else if(O.eventType&Ct)return Uo;return Qi},reset:function(){clearTimeout(this._timer)},emit:function(O){this.state===Uo&&(O&&O.eventType&Ct?this.manager.emit(this.options.event+"up",O):(this._input.timeStamp=c(),this.manager.emit(this.options.event,this._input)))}});function yy(){vi.apply(this,arguments)}_(yy,vi,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ja]},attrTest:function(O){return this._super.attrTest.call(this,O)&&(Math.abs(O.rotation)>this.options.threshold||this.state&Vn)}});function by(){vi.apply(this,arguments)}_(by,vi,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:J|tt,pointers:1},getTouchAction:function(){return y0.prototype.getTouchAction.call(this)},attrTest:function(O){var D=this.options.direction,U;return D&(J|tt)?U=O.overallVelocity:D&J?U=O.overallVelocityX:D&tt&&(U=O.overallVelocityY),this._super.attrTest.call(this,O)&&D&O.offsetDirection&&O.distance>this.options.threshold&&O.maxPointers==this.options.pointers&&u(U)>this.options.velocity&&O.eventType&Ct},emit:function(O){var D=zC(O.offsetDirection);D&&this.manager.emit(this.options.event+D,O),this.manager.emit(this.options.event,O)}});function b0(){Wo.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}_(b0,Wo,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[vy]},process:function(O){var D=this.options,U=O.pointers.length===D.pointers,H=O.distance<D.threshold,rt=O.deltaTime<D.time;if(this.reset(),O.eventType&K&&this.count===0)return this.failTimeout();if(H&&rt&&U){if(O.eventType!=Ct)return this.failTimeout();var Tt=this.pTime?O.timeStamp-this.pTime<D.interval:!0,Kt=!this.pCenter||Dr(this.pCenter,O.center)<D.posThreshold;this.pTime=O.timeStamp,this.pCenter=O.center,!Kt||!Tt?this.count=1:this.count+=1,this._input=O;var hr=this.count%D.taps;if(hr===0)return this.hasRequireFailures()?(this._timer=f(function(){this.state=Uo,this.tryEmit()},D.interval,this),Vn):Uo}return Qi},failTimeout:function(){return this._timer=f(function(){this.state=Qi},this.options.interval,this),Qi},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Uo&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function jo(O,D){return D=D||{},D.recognizers=T(D.recognizers,jo.defaults.preset),new wy(O,D)}jo.VERSION="2.0.7",jo.defaults={domEvents:!1,touchAction:DC,enable:!0,inputTarget:null,inputClass:null,preset:[[yy,{enable:!1}],[my,{enable:!1},["rotate"]],[by,{direction:J}],[y0,{direction:J},["swipe"]],[b0],[b0,{event:"doubletap",taps:2},["tap"]],[_y]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Sj=1,BC=2;function wy(O,D){this.options=v({},jo.defaults,D||{}),this.options.inputTarget=this.options.inputTarget||O,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=O,this.input=nt(this),this.touchAction=new gy(this,this.options.touchAction),$C(this,!0),d(this.options.recognizers,function(U){var H=this.add(new U[0](U[1]));U[2]&&H.recognizeWith(U[2]),U[3]&&H.requireFailure(U[3])},this)}wy.prototype={set:function(O){return v(this.options,O),O.touchAction&&this.touchAction.update(),O.inputTarget&&(this.input.destroy(),this.input.target=O.inputTarget,this.input.init()),this},stop:function(O){this.session.stopped=O?BC:Sj},recognize:function(O){var D=this.session;if(!D.stopped){this.touchAction.preventDefaults(O);var U,H=this.recognizers,rt=D.curRecognizer;(!rt||rt&&rt.state&Uo)&&(rt=D.curRecognizer=null);for(var Tt=0;Tt<H.length;)U=H[Tt],D.stopped!==BC&&(!rt||U==rt||U.canRecognizeWith(rt))?U.recognize(O):U.reset(),!rt&&U.state&(Vn|Vu|Rs)&&(rt=D.curRecognizer=U),Tt++}},get:function(O){if(O instanceof Wo)return O;for(var D=this.recognizers,U=0;U<D.length;U++)if(D[U].options.event==O)return D[U];return null},add:function(O){if(h(O,"add",this))return this;var D=this.get(O.options.event);return D&&this.remove(D),this.recognizers.push(O),O.manager=this,this.touchAction.update(),O},remove:function(O){if(h(O,"remove",this))return this;if(O=this.get(O),O){var D=this.recognizers,U=I(D,O);U!==-1&&(D.splice(U,1),this.touchAction.update())}return this},on:function(O,D){if(O!==i&&D!==i){var U=this.handlers;return d(x(O),function(H){U[H]=U[H]||[],U[H].push(D)}),this}},off:function(O,D){if(O!==i){var U=this.handlers;return d(x(O),function(H){D?U[H]&&U[H].splice(I(U[H],D),1):delete U[H]}),this}},emit:function(O,D){this.options.domEvents&&Tj(O,D);var U=this.handlers[O]&&this.handlers[O].slice();if(!(!U||!U.length)){D.type=O,D.preventDefault=function(){D.srcEvent.preventDefault()};for(var H=0;H<U.length;)U[H](D),H++}},destroy:function(){this.element&&$C(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function $C(O,D){var U=O.element;if(!!U.style){var H;d(O.options.cssProps,function(rt,Tt){H=V(U.style,Tt),D?(O.oldCssProps[H]=U.style[H],U.style[H]=rt):U.style[H]=O.oldCssProps[H]||""}),D||(O.oldCssProps={})}}function Tj(O,D){var U=r.createEvent("Event");U.initEvent(O,!0,!0),U.gesture=D,D.target.dispatchEvent(U)}v(jo,{INPUT_START:K,INPUT_MOVE:gt,INPUT_END:Ct,INPUT_CANCEL:xt,STATE_POSSIBLE:m0,STATE_BEGAN:Vn,STATE_CHANGED:Vu,STATE_ENDED:Rs,STATE_RECOGNIZED:Uo,STATE_CANCELLED:nh,STATE_FAILED:Qi,DIRECTION_NONE:ct,DIRECTION_LEFT:dt,DIRECTION_RIGHT:$,DIRECTION_UP:W,DIRECTION_DOWN:X,DIRECTION_HORIZONTAL:J,DIRECTION_VERTICAL:tt,DIRECTION_ALL:ft,Manager:wy,Input:st,TouchAction:gy,TouchInput:v0,MouseInput:Ka,PointerEventInput:dy,TouchMouseInput:py,SingleTouchInput:xC,Recognizer:Wo,AttrRecognizer:vi,Tap:b0,Pan:y0,Swipe:by,Pinch:my,Rotate:yy,Press:_y,on:S,off:k,each:d,merge:g,extend:m,assign:v,inherit:_,bindFn:b,prefixed:V});var kj=typeof t<"u"?t:typeof self<"u"?self:{};kj.Hammer=jo,typeof i=="function"&&i.amd?i(function(){return jo}):e.exports?e.exports=jo:t[n]=jo})(window,document,"Hammer")})(Bf);const OSt=Bf.exports,ao=Pj({__proto__:null,default:OSt},[Bf.exports]),fV=1,hV=2,pT=4,RSt={mousedown:fV,mousemove:hV,mouseup:pT};function DSt(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return!0;return!1}function NSt(e){const t=e.prototype.handler;e.prototype.handler=function(n){const i=this.store;n.button>0&&n.type==="pointerdown"&&(DSt(i,o=>o.pointerId===n.pointerId)||i.push(n)),t.call(this,n)}}function FSt(e){e.prototype.handler=function(r){let n=RSt[r.type];n&fV&&r.button>=0&&(this.pressed=!0),n&hV&&r.which===0&&(n=pT),this.pressed&&(n&pT&&(this.pressed=!1),this.callback(this.manager,n,{pointers:[r],changedPointers:[r],pointerType:"mouse",srcEvent:r}))}}NSt(Bf.exports.PointerEventInput);FSt(Bf.exports.MouseInput);const zSt=Bf.exports.Manager;class D_{constructor(t,r,n){this.element=t,this.callback=r,this.options={enable:!0,...n}}}const BSt=ao?[[ao.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[ao.Rotate,{enable:!1}],[ao.Pinch,{enable:!1}],[ao.Swipe,{enable:!1}],[ao.Pan,{threshold:0,enable:!1}],[ao.Press,{enable:!1}],[ao.Tap,{event:"doubletap",taps:2,enable:!1}],[ao.Tap,{event:"anytap",enable:!1}],[ao.Tap,{enable:!1}]]:null,XL={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},$St={doubletap:["tap"]},VSt={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},PE={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},USt={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},YL={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},WSt=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",Nc=typeof window<"u"?window:global;let vT=!1;try{const e={get passive(){return vT=!0,!0}};Nc.addEventListener("test",null,e),Nc.removeEventListener("test",null)}catch{vT=!1}const jSt=WSt.indexOf("firefox")!==-1,{WHEEL_EVENTS:GSt}=PE,qL="wheel",ZL=4.000244140625,HSt=40,XSt=.25;class YSt extends D_{constructor(t,r,n){super(t,r,n),this.handleEvent=i=>{if(!this.options.enable)return;let o=i.deltaY;Nc.WheelEvent&&(jSt&&i.deltaMode===Nc.WheelEvent.DOM_DELTA_PIXEL&&(o/=Nc.devicePixelRatio),i.deltaMode===Nc.WheelEvent.DOM_DELTA_LINE&&(o*=HSt)),o!==0&&o%ZL===0&&(o=Math.floor(o/ZL)),i.shiftKey&&o&&(o=o*XSt),this.callback({type:qL,center:{x:i.clientX,y:i.clientY},delta:-o,srcEvent:i,pointerType:"mouse",target:i.target})},this.events=(this.options.events||[]).concat(GSt),this.events.forEach(i=>t.addEventListener(i,this.handleEvent,vT?{passive:!1}:!1))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,r){t===qL&&(this.options.enable=r)}}const{MOUSE_EVENTS:qSt}=PE,KL="pointermove",JL="pointerover",QL="pointerout",tI="pointerenter",eI="pointerleave";class ZSt extends D_{constructor(t,r,n){super(t,r,n),this.handleEvent=o=>{this.handleOverEvent(o),this.handleOutEvent(o),this.handleEnterEvent(o),this.handleLeaveEvent(o),this.handleMoveEvent(o)},this.pressed=!1;const{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,this.events=(this.options.events||[]).concat(qSt),this.events.forEach(o=>t.addEventListener(o,this.handleEvent))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,r){t===KL&&(this.enableMoveEvent=r),t===JL&&(this.enableOverEvent=r),t===QL&&(this.enableOutEvent=r),t===tI&&(this.enableEnterEvent=r),t===eI&&(this.enableLeaveEvent=r)}handleOverEvent(t){this.enableOverEvent&&t.type==="mouseover"&&this._emit(JL,t)}handleOutEvent(t){this.enableOutEvent&&t.type==="mouseout"&&this._emit(QL,t)}handleEnterEvent(t){this.enableEnterEvent&&t.type==="mouseenter"&&this._emit(tI,t)}handleLeaveEvent(t){this.enableLeaveEvent&&t.type==="mouseleave"&&this._emit(eI,t)}handleMoveEvent(t){if(this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":t.which===0&&(this.pressed=!1),this.pressed||this._emit(KL,t);break;case"mouseup":this.pressed=!1;break}}_emit(t,r){this.callback({type:t,center:{x:r.clientX,y:r.clientY},srcEvent:r,pointerType:"mouse",target:r.target})}}const{KEY_EVENTS:KSt}=PE,rI="keydown",nI="keyup";class JSt extends D_{constructor(t,r,n){super(t,r,n),this.handleEvent=i=>{const o=i.target||i.srcElement;o.tagName==="INPUT"&&o.type==="text"||o.tagName==="TEXTAREA"||(this.enableDownEvent&&i.type==="keydown"&&this.callback({type:rI,srcEvent:i,key:i.key,target:i.target}),this.enableUpEvent&&i.type==="keyup"&&this.callback({type:nI,srcEvent:i,key:i.key,target:i.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(KSt),t.tabIndex=this.options.tabIndex||0,t.style.outline="none",this.events.forEach(i=>t.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,r){t===rI&&(this.enableDownEvent=r),t===nI&&(this.enableUpEvent=r)}}const iI="contextmenu";class QSt extends D_{constructor(t,r,n){super(t,r,n),this.handleEvent=i=>{!this.options.enable||this.callback({type:iI,center:{x:i.clientX,y:i.clientY},srcEvent:i,pointerType:"mouse",target:i.target})},t.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(t,r){t===iI&&(this.options.enable=r)}}const gT=1,_1=2,mT=4,t3t={pointerdown:gT,pointermove:_1,pointerup:mT,mousedown:gT,mousemove:_1,mouseup:mT},e3t=1,r3t=2,n3t=3,i3t=0,o3t=1,s3t=2,a3t=1,l3t=2,u3t=4;function c3t(e){const t=t3t[e.srcEvent.type];if(!t)return null;const{buttons:r,button:n,which:i}=e.srcEvent;let o=!1,s=!1,a=!1;return t===mT||t===_1&&!Number.isFinite(r)?(o=i===e3t,s=i===r3t,a=i===n3t):t===_1?(o=Boolean(r&a3t),s=Boolean(r&u3t),a=Boolean(r&l3t)):t===gT&&(o=n===i3t,s=n===o3t,a=n===s3t),{leftButton:o,middleButton:s,rightButton:a}}function f3t(e,t){const r=e.center;if(!r)return null;const n=t.getBoundingClientRect(),i=n.width/t.offsetWidth||1,o=n.height/t.offsetHeight||1,s={x:(r.x-n.left-t.clientLeft)/i,y:(r.y-n.top-t.clientTop)/o};return{center:r,offsetCenter:s}}const zb={srcElement:"root",priority:0};class h3t{constructor(t){this.handleEvent=r=>{if(this.isEmpty())return;const n=this._normalizeEvent(r);let i=r.srcEvent.target;for(;i&&i!==n.rootElement;){if(this._emit(n,i),n.handled)return;i=i.parentNode}this._emit(n,"root")},this.eventManager=t,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(t,r,n,i=!1,o=!1){const{handlers:s,handlersByElement:a}=this;let l=zb;typeof n=="string"||n&&n.addEventListener?l={...zb,srcElement:n}:n&&(l={...zb,...n});let u=a.get(l.srcElement);u||(u=[],a.set(l.srcElement,u));const c={type:t,handler:r,srcElement:l.srcElement,priority:l.priority};i&&(c.once=!0),o&&(c.passive=!0),s.push(c),this._active=this._active||!c.passive;let f=u.length-1;for(;f>=0&&!(u[f].priority>=c.priority);)f--;u.splice(f+1,0,c)}remove(t,r){const{handlers:n,handlersByElement:i}=this;for(let o=n.length-1;o>=0;o--){const s=n[o];if(s.type===t&&s.handler===r){n.splice(o,1);const a=i.get(s.srcElement);a.splice(a.indexOf(s),1),a.length===0&&i.delete(s.srcElement)}}this._active=n.some(o=>!o.passive)}_emit(t,r){const n=this.handlersByElement.get(r);if(n){let i=!1;const o=()=>{t.handled=!0},s=()=>{t.handled=!0,i=!0},a=[];for(let l=0;l<n.length;l++){const{type:u,handler:c,once:f}=n[l];if(c({...t,type:u,stopPropagation:o,stopImmediatePropagation:s}),f&&a.push(n[l]),i)break}for(let l=0;l<a.length;l++){const{type:u,handler:c}=a[l];this.remove(u,c)}}}_normalizeEvent(t){const r=this.eventManager.getElement();return{...t,...c3t(t),...f3t(t,r),preventDefault:()=>{t.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:r}}}const d3t={events:null,recognizers:null,recognizerOptions:{},Manager:zSt,touchAction:"none",tabIndex:0};class p3t{constructor(t=null,r){this._onBasicInput=i=>{const{srcEvent:o}=i,s=VSt[o.type];s&&this.manager.emit(s,i)},this._onOtherEvent=i=>{this.manager.emit(i.type,i)},this.options={...d3t,...r},this.events=new Map,this.setElement(t);const{events:n}=this.options;n&&this.on(n)}getElement(){return this.element}setElement(t){if(this.element&&this.destroy(),this.element=t,!t)return;const{options:r}=this,n=r.Manager;this.manager=new n(t,{touchAction:r.touchAction,recognizers:r.recognizers||BSt}).on("hammer.input",this._onBasicInput),r.recognizers||Object.keys(XL).forEach(i=>{const o=this.manager.get(i);o&&XL[i].forEach(s=>{o.recognizeWith(s)})});for(const i in r.recognizerOptions){const o=this.manager.get(i);if(o){const s=r.recognizerOptions[i];delete s.enable,o.set(s)}}this.wheelInput=new YSt(t,this._onOtherEvent,{enable:!1}),this.moveInput=new ZSt(t,this._onOtherEvent,{enable:!1}),this.keyInput=new JSt(t,this._onOtherEvent,{enable:!1,tabIndex:r.tabIndex}),this.contextmenuInput=new QSt(t,this._onOtherEvent,{enable:!1});for(const[i,o]of this.events)o.isEmpty()||(this._toggleRecognizer(o.recognizerName,!0),this.manager.on(i,o.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(t,r,n){this._addEventHandler(t,r,n,!1)}once(t,r,n){this._addEventHandler(t,r,n,!0)}watch(t,r,n){this._addEventHandler(t,r,n,!1,!0)}off(t,r){this._removeEventHandler(t,r)}_toggleRecognizer(t,r){const{manager:n}=this;if(!n)return;const i=n.get(t);if(i&&i.options.enable!==r){i.set({enable:r});const o=$St[t];o&&!this.options.recognizers&&o.forEach(s=>{const a=n.get(s);r?(a.requireFailure(t),i.dropRequireFailure(s)):a.dropRequireFailure(t)})}this.wheelInput.enableEventType(t,r),this.moveInput.enableEventType(t,r),this.keyInput.enableEventType(t,r),this.contextmenuInput.enableEventType(t,r)}_addEventHandler(t,r,n,i,o){if(typeof t!="string"){n=r;for(const c in t)this._addEventHandler(c,t[c],n,i,o);return}const{manager:s,events:a}=this,l=YL[t]||t;let u=a.get(l);u||(u=new h3t(this),a.set(l,u),u.recognizerName=USt[l]||l,s&&s.on(l,u.handleEvent)),u.add(t,r,n,i,o),u.isEmpty()||this._toggleRecognizer(u.recognizerName,!0)}_removeEventHandler(t,r){if(typeof t!="string"){for(const s in t)this._removeEventHandler(s,t[s]);return}const{events:n}=this,i=YL[t]||t,o=n.get(i);if(!!o&&(o.remove(t,r),o.isEmpty())){const{recognizerName:s}=o;let a=!1;for(const l of n.values())if(l.recognizerName===s&&!l.isEmpty()){a=!0;break}a||this._toggleRecognizer(s,!1)}}}function El(){}const v3t=({isDragging:e})=>e?"grabbing":"grab",dV={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:El,onResize:El,onViewStateChange:El,onInteractionStateChange:El,onBeforeRender:El,onAfterRender:El,onLoad:El,onError:e=>Yt.error(e.message)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:v3t,getTooltip:null,debug:!1,drawPickingColors:!1};class N_{constructor(t){P(this,"props",void 0),P(this,"width",0),P(this,"height",0),P(this,"userData",{}),P(this,"canvas",null),P(this,"viewManager",null),P(this,"layerManager",null),P(this,"effectManager",null),P(this,"deckRenderer",null),P(this,"deckPicker",null),P(this,"eventManager",null),P(this,"tooltip",null),P(this,"metrics",void 0),P(this,"animationLoop",void 0),P(this,"stats",void 0),P(this,"viewState",void 0),P(this,"cursorState",void 0),P(this,"_needsRedraw",void 0),P(this,"_pickRequest",void 0),P(this,"_lastPointerDownInfo",null),P(this,"_metricsCounter",void 0),P(this,"_onPointerMove",r=>{const{_pickRequest:n}=this;if(r.type==="pointerleave")n.x=-1,n.y=-1,n.radius=0;else{if(r.leftButton||r.rightButton)return;{const i=r.offsetCenter;if(!i)return;n.x=i.x,n.y=i.y,n.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:n.x,y:n.y}),n.event=r}),P(this,"_onEvent",r=>{const n=OL[r.type],i=r.offsetCenter;if(!n||!i||!this.layerManager)return;const o=this.layerManager.getLayers(),s=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:o,viewports:this.getViewports(i)},this._lastPointerDownInfo),{layer:a}=s,l=a&&(a[n.handler]||a.props[n.handler]),u=this.props[n.handler];let c=!1;l&&(c=l.call(a,s,r)),!c&&u&&u(s,r)}),P(this,"_onPointerDown",r=>{const n=r.offsetCenter,i=this._pick("pickObject","pickObject Time",{x:n.x,y:n.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=i.result[0]||i.emptyInfo}),this.props={...dV,...t},t=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},t.viewState&&t.initialViewState&&Yt.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),RB()==="IE"&&Yt.warn("IE 11 is not supported")(),this.viewState=t.initialViewState,t.gl||typeof document<"u"&&(this.canvas=this._createCanvas(t)),this.animationLoop=this._createAnimationLoop(t),this.stats=new P_({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(t),t._typedArrayManagerProps&&gf.setOptions(t._typedArrayManagerProps),this.animationLoop.start()}finalize(){var t,r,n,i,o,s,a;if(this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,(t=this.layerManager)===null||t===void 0||t.finalize(),this.layerManager=null,(r=this.viewManager)===null||r===void 0||r.finalize(),this.viewManager=null,(n=this.effectManager)===null||n===void 0||n.finalize(),this.effectManager=null,(i=this.deckRenderer)===null||i===void 0||i.finalize(),this.deckRenderer=null,(o=this.deckPicker)===null||o===void 0||o.finalize(),this.deckPicker=null,(s=this.eventManager)===null||s===void 0||s.destroy(),this.eventManager=null,(a=this.tooltip)===null||a===void 0||a.remove(),this.tooltip=null,!this.props.canvas&&!this.props.gl&&this.canvas){var l;(l=this.canvas.parentElement)===null||l===void 0||l.removeChild(this.canvas),this.canvas=null}}setProps(t){this.stats.get("setProps Time").timeStart(),"onLayerHover"in t&&Yt.removed("onLayerHover","onHover")(),"onLayerClick"in t&&Yt.removed("onLayerClick","onClick")(),t.initialViewState&&!zf(this.props.initialViewState,t.initialViewState)&&(this.viewState=t.initialViewState),Object.assign(this.props,t),this._setCanvasSize(this.props);const r=Object.create(this.props);Object.assign(r,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(r),this.layerManager&&(this.viewManager.setProps(r),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(r),this.effectManager.setProps(r),this.deckRenderer.setProps(r),this.deckPicker.setProps(r)),this.stats.get("setProps Time").timeEnd()}needsRedraw(t={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let r=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);const n=this.viewManager.needsRedraw(t),i=this.layerManager.needsRedraw(t),o=this.effectManager.needsRedraw(t),s=this.deckRenderer.needsRedraw(t);return r=r||n||i||o||s,r}redraw(t){if(!this.layerManager)return;let r=this.needsRedraw({clearRedrawFlags:!0});r=t||r,r&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(r):this._drawLayers(r))}get isInitialized(){return this.viewManager!==null}getViews(){return pr(this.viewManager),this.viewManager.views}getViewports(t){return pr(this.viewManager),this.viewManager.getViewports(t)}pickObject(t){const r=this._pick("pickObject","pickObject Time",t).result;return r.length?r[0]:null}pickMultipleObjects(t){return t.depth=t.depth||10,this._pick("pickObject","pickMultipleObjects Time",t).result}pickObjects(t){return this._pick("pickObjects","pickObjects Time",t)}_addResources(t,r=!1){for(const n in t)this.layerManager.resourceManager.add({resourceId:n,data:t[n],forceUpdate:r})}_removeResources(t){for(const r of t)this.layerManager.resourceManager.remove(r)}_pick(t,r,n){pr(this.deckPicker);const{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(r).timeStart();const o=this.deckPicker[t]({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...n});return i.get(r).timeEnd(),o}_createCanvas(t){let r=t.canvas;return typeof r=="string"&&(r=document.getElementById(r),pr(r)),r||(r=document.createElement("canvas"),r.id=t.id||"deckgl-overlay",(t.parent||document.body).appendChild(r)),Object.assign(r.style,t.style),r}_setCanvasSize(t){if(!this.canvas)return;const{width:r,height:n}=t;if(r||r===0){const o=Number.isFinite(r)?"".concat(r,"px"):r;this.canvas.style.width=o}if(n||n===0){var i;const o=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.position=((i=t.style)===null||i===void 0?void 0:i.position)||"absolute",this.canvas.style.height=o}}_updateCanvasSize(){const{canvas:t}=this;if(!t)return;const r=t.clientWidth||t.width,n=t.clientHeight||t.height;if(r!==this.width||n!==this.height){var i;this.width=r,this.height=n,(i=this.viewManager)===null||i===void 0||i.setProps({width:r,height:n}),this.props.onResize({width:r,height:n})}}_createAnimationLoop(t){const{width:r,height:n,gl:i,glOptions:o,debug:s,onError:a,onBeforeRender:l,onAfterRender:u,useDevicePixels:c}=t;return new O_t({width:r,height:n,useDevicePixels:c,autoResizeViewport:!1,gl:i,onCreateContext:f=>t$({...o,...f,canvas:this.canvas,debug:s,onContextLost:()=>this._onContextLost()}),onInitialize:f=>this._setGLContext(f.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:l,onAfterRender:u,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let t=this.props.views||[new aV({id:"default-view"})];return t=Array.isArray(t)?t:[t],t.length&&this.props.controller&&(t[0].props.controller=this.props.controller),t}_onContextLost(){const{onError:t}=this.props;this.animationLoop&&t&&t(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:t}=this;if(t.event){const{result:n,emptyInfo:i}=this._pick("pickObject","pickObject Time",t);this.cursorState.isHovering=n.length>0;let o=i,s=!1;for(const a of n){var r;o=a,s=((r=a.layer)===null||r===void 0?void 0:r.onHover(a,t.event))||s}if(!s&&this.props.onHover&&this.props.onHover(o,t.event),this.props.getTooltip&&this.tooltip){const a=this.props.getTooltip(o);this.tooltip.setTooltip(a,o.x,o.y)}t.event=null}}_updateCursor(){const t=this.props.parent||this.canvas;t&&(t.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(t){if(this.layerManager)return;this.canvas||(this.canvas=t.canvas,cE(t,{enable:!0,copyState:!0})),this.tooltip=new ISt(this.canvas),ws(t,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(t);const r=new j$;r.play(),this.animationLoop.attachTimeline(r),this.eventManager=new p3t(this.props.parent||t.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const i in OL)this.eventManager.on(i,this._onEvent);this.viewManager=new qwt({timeline:r,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const n=this.viewManager.getViewports()[0];this.layerManager=new Ywt(t,{deck:this,stats:this.stats,viewport:n,timeline:r}),this.effectManager=new ySt,this.deckRenderer=new kSt(t),this.deckPicker=new xSt(t),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(t,r){const{gl:n}=this.layerManager.context;ws(n,this.props.parameters),this.props.onBeforeRender({gl:n}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:t,effects:this.effectManager.getEffects(),...r}),this.props.onAfterRender({gl:n})}_onRenderFrame(t){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),Yt.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(t){const r=this.props.onViewStateChange(t)||t.viewState;this.viewState&&(this.viewState={...this.viewState,[t.viewId]:r},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(t){this.cursorState.isDragging=t.isDragging||!1,this.props.onInteractionStateChange(t)}_getFrameStats(){const{stats:t}=this;t.get("frameRate").timeEnd(),t.get("frameRate").timeStart();const r=this.animationLoop.stats;t.get("GPU Time").addTime(r.get("GPU Time").lastTiming),t.get("CPU Time").addTime(r.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:t,stats:r}=this;t.fps=r.get("frameRate").getHz(),t.setPropsTime=r.get("setProps Time").time,t.updateAttributesTime=r.get("Update Attributes").time,t.framesRedrawn=r.get("Redraw Count").count,t.pickTime=r.get("pickObject Time").time+r.get("pickMultipleObjects Time").time+r.get("pickObjects Time").time,t.pickCount=r.get("Pick Count").count,t.gpuTime=r.get("GPU Time").time,t.cpuTime=r.get("CPU Time").time,t.gpuTimePerFrame=r.get("GPU Time").getAverageTime(),t.cpuTimePerFrame=r.get("CPU Time").getAverageTime();const n=Ul.get("Memory Usage");t.bufferMemory=n.get("Buffer Memory").count,t.textureMemory=n.get("Texture Memory").count,t.renderbufferMemory=n.get("Renderbuffer Memory").count,t.gpuMemory=n.get("GPU Memory").count}}P(N_,"defaultProps",dV);P(N_,"VERSION",$gt.VERSION);class Bb{constructor(t,r){P(this,"opts",void 0),P(this,"source",void 0),this.opts=r,this.source=t}get value(){return this.source.value}getValue(){const t=this.source.getBuffer(),r=this.getAccessor();if(t)return[t,r];const{value:n}=this.source,{size:i}=r;let o=n;if(n&&n.length!==i){o=new Float32Array(i);const s=r.elementOffset||0;for(let a=0;a<i;++a)o[a]=n[s+a]}return o}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function g3t(e){switch(e){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}function cm(e){return e.stride||e.size*e.bytesPerElement}function pV(e,t){t.offset&&Yt.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const r=cm(e),n=t.vertexOffset!==void 0?t.vertexOffset:e.vertexOffset||0,i=t.elementOffset||0,o=n*r+i*e.bytesPerElement+(e.offset||0);return{...t,offset:o,stride:r}}function m3t(e,t){const r=pV(e,t);return{high:r,low:{...r,offset:r.offset+e.size*4}}}class _3t{constructor(t,r,n){P(this,"gl",void 0),P(this,"id",void 0),P(this,"size",void 0),P(this,"settings",void 0),P(this,"value",void 0),P(this,"doublePrecision",void 0),P(this,"_buffer",void 0),P(this,"state",void 0),this.gl=t,this.id=r.id||"",this.size=r.size||1;const i=r.logicalType||r.type,o=i===5130;let{defaultValue:s}=r;s=Number.isFinite(s)?[s]:s||new Array(this.size).fill(0);let a;o?a=5126:!i&&r.isIndexed?a=t&&c1t(t,Be.ELEMENT_INDEX_UINT32)?5125:5123:a=i||5126;let l=g3t(i||a||5126);this.doublePrecision=o,o&&r.fp64===!1&&(l=Float32Array),this.value=null,this.settings={...r,defaultType:l,defaultValue:s,logicalType:i,type:a,size:this.size,bytesPerElement:l.BYTES_PER_ELEMENT},this.state={...n,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:t,type:r}=this.settings;this._buffer=new Ee(this.gl,{id:this.id,target:t?34963:34962,accessor:{type:r}})}return this._buffer}get byteOffset(){const t=this.getAccessor();return t.vertexOffset?t.vertexOffset*cm(t):0}get numInstances(){return this.state.numInstances}set numInstances(t){this.state.numInstances=t}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),gf.release(this.state.allocatedValue)}getShaderAttributes(t,r){if(this.doublePrecision){const n={},i=this.value instanceof Float64Array,o=m3t(this.getAccessor(),r||{});return n[t]=new Bb(this,o.high),n["".concat(t,"64Low")]=i?new Bb(this,o.low):new Float32Array(this.size),n}if(r){const n=pV(this.getAccessor(),r);return{[t]:new Bb(this,n)}}return{[t]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let t=null;if(this.state.constant&&this.value){const r=Array.from(this.value);t=[r,r]}else{const{value:r,numInstances:n,size:i}=this,o=n*i;if(r&&o&&r.length>=o){const s=new Array(i).fill(1/0),a=new Array(i).fill(-1/0);for(let l=0;l<o;)for(let u=0;u<i;u++){const c=r[l++];c<s[u]&&(s[u]=c),c>a[u]&&(a[u]=c)}t=[s,a]}}return this.state.bounds=t,t}setData(t){const{state:r}=this;let n;ArrayBuffer.isView(t)?n={value:t}:t instanceof Ee?n={buffer:t}:n=t;const i={...this.settings,...n};if(r.bufferAccessor=i,r.bounds=null,n.constant){let o=n.value;if(o=this._normalizeValue(o,[],0),this.settings.normalized&&(o=this.normalizeConstant(o)),!(!r.constant||!this._areValuesEqual(o,this.value)))return!1;r.externalBuffer=null,r.constant=!0,this.value=o}else if(n.buffer){const o=n.buffer;r.externalBuffer=o,r.constant=!1,this.value=n.value||null;const s=n.value instanceof Float64Array;i.type=n.type||o.accessor.type,i.bytesPerElement=o.accessor.BYTES_PER_ELEMENT*(s?2:1),i.stride=cm(i)}else if(n.value){this._checkExternalBuffer(n);let o=n.value;r.externalBuffer=null,r.constant=!1,this.value=o,i.bytesPerElement=o.BYTES_PER_ELEMENT,i.stride=cm(i);const{buffer:s,byteOffset:a}=this;this.doublePrecision&&o instanceof Float64Array&&(o=Nb(o,i));const l=o.byteLength+a+i.stride*2;s.byteLength<l&&s.reallocate(l),s.setAccessor(null),s.subData({data:o,offset:a}),i.type=n.type||s.accessor.type}return!0}updateSubBuffer(t={}){this.state.bounds=null;const r=this.value,{startOffset:n=0,endOffset:i}=t;this.buffer.subData({data:this.doublePrecision&&r instanceof Float64Array?Nb(r,{size:this.size,startIndex:n,endIndex:i}):r.subarray(n,i),offset:n*r.BYTES_PER_ELEMENT+this.byteOffset})}allocate(t,r=!1){const{state:n}=this,i=n.allocatedValue,o=gf.allocate(i,t+1,{size:this.size,type:this.settings.defaultType,copy:r});this.value=o;const{buffer:s,byteOffset:a}=this;return s.byteLength<o.byteLength+a&&(s.reallocate(o.byteLength+a),r&&i&&s.subData({data:i instanceof Float64Array?Nb(i,this):i,offset:a})),n.allocatedValue=o,n.constant=!1,n.externalBuffer=null,n.bufferAccessor=this.settings,!0}_checkExternalBuffer(t){const{value:r}=t;if(!ArrayBuffer.isView(r))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const n=this.settings.defaultType;let i=!1;if(this.doublePrecision&&(i=r.BYTES_PER_ELEMENT<4),i)throw new Error("Attribute ".concat(this.id," does not support ").concat(r.constructor.name));!(r instanceof n)&&this.settings.normalized&&!("normalized"in t)&&Yt.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(t){switch(this.settings.type){case 5120:return new Float32Array(t).map(r=>(r+128)/255*2-1);case 5122:return new Float32Array(t).map(r=>(r+32768)/65535*2-1);case 5121:return new Float32Array(t).map(r=>r/255);case 5123:return new Float32Array(t).map(r=>r/65535);default:return t}}_normalizeValue(t,r,n){const{defaultValue:i,size:o}=this.settings;if(Number.isFinite(t))return r[n]=t,r;if(!t)return r[n]=i[0],r;switch(o){case 4:r[n+3]=Number.isFinite(t[3])?t[3]:i[3];case 3:r[n+2]=Number.isFinite(t[2])?t[2]:i[2];case 2:r[n+1]=Number.isFinite(t[1])?t[1]:i[1];case 1:r[n+0]=Number.isFinite(t[0])?t[0]:i[0];break;default:let s=o;for(;--s>=0;)r[n+s]=Number.isFinite(t[s])?t[s]:i[s]}return r}_areValuesEqual(t,r){if(!t||!r)return!1;const{size:n}=this;for(let i=0;i<n;i++)if(t[i]!==r[i])return!1;return!0}}const oI=[],sI=[];function F_(e,t=0,r=1/0){let n=oI;const i={index:-1,data:e,target:[]};return e?typeof e[Symbol.iterator]=="function"?n=e:e.length>0&&(sI.length=e.length,n=sI):n=oI,(t>0||Number.isFinite(r))&&(n=(Array.isArray(n)?n:Array.from(n)).slice(t,r),i.index=t-1),{iterable:n,objectInfo:i}}function vV(e){return e&&e[Symbol.asyncIterator]}function gV(e,t){const{size:r,stride:n,offset:i,startIndices:o,nested:s}=t,a=e.BYTES_PER_ELEMENT,l=n?n/a:r,u=i?i/a:0,c=Math.floor((e.length-u)/l);return(f,{index:h,target:d})=>{if(!o){const g=h*l+u;for(let _=0;_<r;_++)d[_]=e[g+_];return d}const p=o[h],v=o[h+1]||c;let m;if(s){m=new Array(v-p);for(let g=p;g<v;g++){const _=g*l+u;d=new Array(r);for(let b=0;b<r;b++)d[b]=e[_+b];m[g-p]=d}}else if(l===r)m=e.subarray(p*r+u,v*r+u);else{m=new e.constructor((v-p)*r);let g=0;for(let _=p;_<v;_++){const b=_*l+u;for(let w=0;w<r;w++)m[g++]=e[b+w]}}return m}}const y3t=[],fm=[[0,1/0]];function b3t(e,t){if(e===fm||(t[0]<0&&(t[0]=0),t[0]>=t[1]))return e;const r=[],n=e.length;let i=0;for(let o=0;o<n;o++){const s=e[o];s[1]<t[0]?(r.push(s),i=o+1):s[0]>t[1]?r.push(s):t=[Math.min(s[0],t[0]),Math.max(s[1],t[1])]}return r.splice(i,0,t),r}function $b(e){const{source:t,target:r,start:n=0,size:i,getData:o}=e,s=e.end||r.length,a=t.length,l=s-n;if(a>l){r.set(t.subarray(0,l),n);return}if(r.set(t,n),!o)return;let u=a;for(;u<l;){const c=o(u,t);for(let f=0;f<i;f++)r[n+u]=c[f]||0,u++}}function w3t({source:e,target:t,size:r,getData:n,sourceStartIndices:i,targetStartIndices:o}){if(!Array.isArray(o))return $b({source:e,target:t,size:r,getData:n}),t;let s=0,a=0;const l=n&&((c,f)=>n(c+a,f)),u=Math.min(i.length,o.length);for(let c=1;c<u;c++){const f=i[c]*r,h=o[c]*r;$b({source:e.subarray(s,f),target:t,start:a,end:h,size:r,getData:l}),s=f,a=h}return a<t.length&&$b({source:[],target:t,start:a,size:r,getData:l}),t}const S3t={interpolation:{duration:0,easing:e=>e},spring:{stiffness:.05,damping:.5}};function mV(e,t){if(!e)return null;Number.isFinite(e)&&(e={type:"interpolation",duration:e});const r=e.type||"interpolation";return{...S3t[r],...t,...e,type:r}}function _V(e,t){const r=t.getBuffer();return r?[r,{divisor:0,size:t.size,normalized:t.settings.normalized}]:t.value}function yV(e){switch(e){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(e,'"'))}}function bV(e){e.push(e.shift())}function EE(e,t){const{doublePrecision:r,settings:n,value:i,size:o}=e,s=r&&i instanceof Float64Array?2:1;return(n.noAlloc?i.length:t*o)*s}function wV({buffer:e,numInstances:t,attribute:r,fromLength:n,fromStartIndices:i,getData:o=s=>s}){const s=r.doublePrecision&&r.value instanceof Float64Array?2:1,a=r.size*s,l=r.byteOffset,u=r.startIndices,c=i&&u,f=EE(r,t),h=r.isConstant;if(!c&&n>=f)return;const d=h?r.value:r.getBuffer().getData({srcByteOffset:l});if(r.settings.normalized&&!h){const g=o;o=(_,b)=>r.normalizeConstant(g(_,b))}const p=h?(g,_)=>o(d,_):(g,_)=>o(d.subarray(g,g+a),_),v=e.getData({length:n}),m=new Float32Array(f);w3t({source:v,target:m,sourceStartIndices:i,targetStartIndices:u,size:a,getData:p}),e.byteLength<m.byteLength+l&&e.reallocate(m.byteLength+l),e.subData({data:m,offset:l})}class CE extends _3t{constructor(t,r){super(t,r,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:fm}),P(this,"constant",!1),this.settings.update=r.update||(r.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(t){this.state.startIndices=t}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:t=!1}={}){const r=this.state.needsRedraw;return this.state.needsRedraw=r&&!t,r}getUpdateTriggers(){const{accessor:t}=this.settings;return[this.id].concat(typeof t!="function"&&t||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(t){if(!t||!this.supportsTransition())return null;const{accessor:r}=this.settings,n=this.settings.transition,i=Array.isArray(r)?t[r.find(o=>t[o])]:t[r];return mV(i,n)}setNeedsUpdate(t=this.id,r){if(this.state.needsUpdate=this.state.needsUpdate||t,this.setNeedsRedraw(t),r){const{startRow:n=0,endRow:i=1/0}=r;this.state.updateRanges=b3t(this.state.updateRanges,[n,i])}else this.state.updateRanges=fm}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=y3t}setNeedsRedraw(t=this.id){this.state.needsRedraw=this.state.needsRedraw||t}allocate(t){const{state:r,settings:n}=this;return n.noAlloc?!1:n.update?(super.allocate(t,r.updateRanges!==fm),!0):!1}updateBuffer({numInstances:t,data:r,props:n,context:i}){if(!this.needsUpdate())return!1;const{state:{updateRanges:o},settings:{update:s,noAlloc:a}}=this;let l=!0;if(s){for(const[u,c]of o)s.call(i,this,{data:r,startRow:u,endRow:c,props:n,numInstances:t});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[u,c]of o){const f=Number.isFinite(u)?this.getVertexOffset(u):0,h=Number.isFinite(c)?this.getVertexOffset(c):a||!Number.isFinite(t)?this.value.length:t*this.size;super.updateSubBuffer({startOffset:f,endOffset:h})}this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(t){return t===void 0||typeof t=="function"?!1:(this.setData({constant:!0,value:t})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(t){const{state:r}=this;return t?(this.clearNeedsUpdate(),r.lastExternalBuffer===t||(r.lastExternalBuffer=t,this.setNeedsRedraw(),this.setData(t)),!0):(r.lastExternalBuffer=null,!1)}setBinaryValue(t,r=null){const{state:n,settings:i}=this;if(!t)return n.binaryValue=null,n.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(n.binaryValue===t)return this.clearNeedsUpdate(),!0;if(n.binaryValue=t,this.setNeedsRedraw(),i.transform||r!==this.startIndices){ArrayBuffer.isView(t)&&(t={value:t});const s=t;pr(ArrayBuffer.isView(s.value),"invalid ".concat(i.accessor));const a=Boolean(s.size)&&s.size!==this.size;return n.binaryAccessor=gV(s.value,{size:s.size||this.size,stride:s.stride,offset:s.offset,startIndices:r,nested:a}),!1}return this.clearNeedsUpdate(),this.setData(t),!0}getVertexOffset(t){const{startIndices:r}=this;return(r?r[t]:t)*this.size}getShaderAttributes(){const t=this.settings.shaderAttributes||{[this.id]:null},r={};for(const n in t)Object.assign(r,super.getShaderAttributes(n,t[n]));return r}_autoUpdater(t,{data:r,startRow:n,endRow:i,props:o,numInstances:s}){if(t.constant)return;const{settings:a,state:l,value:u,size:c,startIndices:f}=t,{accessor:h,transform:d}=a,p=l.binaryAccessor||(typeof h=="function"?h:o[h]);pr(typeof p=="function",'accessor "'.concat(h,'" is not a function'));let v=t.getVertexOffset(n);const{iterable:m,objectInfo:g}=F_(r,n,i);for(const _ of m){g.index++;let b=p(_,g);if(d&&(b=d.call(this,b)),f){const w=(g.index<f.length-1?f[g.index+1]:s)-f[g.index];if(b&&Array.isArray(b[0])){let T=v;for(const S of b)t._normalizeValue(S,u,T),T+=c}else b&&b.length>c?u.set(b,v):(t._normalizeValue(b,g.target,0),Wwt({target:u,source:g.target,start:v,count:w}));v+=w*c}else t._normalizeValue(b,u,v),v+=c}}_validateAttributeUpdaters(){const{settings:t}=this;if(!(t.noAlloc||typeof t.update=="function"))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:t}=this,r=Math.min(4,this.size);if(t&&t.length>=r){let n=!0;switch(r){case 4:n=n&&Number.isFinite(t[3]);case 3:n=n&&Number.isFinite(t[2]);case 2:n=n&&Number.isFinite(t[1]);case 1:n=n&&Number.isFinite(t[0]);break;default:n=!1}if(!n)throw new Error("Illegal attribute generated for ".concat(this.id))}}}class T3t{constructor({gl:t,attribute:r,timeline:n}){P(this,"gl",void 0),P(this,"type","interpolation"),P(this,"attributeInTransition",void 0),P(this,"settings",void 0),P(this,"attribute",void 0),P(this,"transition",void 0),P(this,"currentStartIndices",void 0),P(this,"currentLength",void 0),P(this,"transform",void 0),P(this,"buffers",void 0),this.gl=t,this.transition=new n0(n),this.attribute=r,this.attributeInTransition=new CE(t,r.settings),this.currentStartIndices=r.startIndices,this.currentLength=0,this.transform=P3t(t,r);const i={byteLength:0,usage:35050};this.buffers=[new Ee(t,i),new Ee(t,i)]}get inProgress(){return this.transition.inProgress}start(t,r){if(t.duration<=0){this.transition.cancel();return}this.settings=t;const{gl:n,buffers:i,attribute:o}=this;bV(i);const s={numInstances:r,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const a of i)wV({buffer:a,...s});this.currentStartIndices=o.startIndices,this.currentLength=EE(o,r),this.attributeInTransition.setData({buffer:i[1],value:o.value}),this.transition.start(t),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aFrom:i[0],aTo:_V(n,o)},feedbackBuffers:{vCurrent:i[1]}})}update(){const t=this.transition.update();if(t){const{duration:r,easing:n}=this.settings,{time:i}=this.transition;let o=i/r;n&&(o=n(o)),this.transform.run({uniforms:{time:o}})}return t}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0}}const k3t=`
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
attribute ATTRIBUTE_TYPE aFrom;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`;function P3t(e,t){const r=yV(t.size);return new SE(e,{vs:k3t,defines:{ATTRIBUTE_TYPE:r},varyings:["vCurrent"]})}class E3t{constructor({gl:t,attribute:r,timeline:n}){P(this,"gl",void 0),P(this,"type","spring"),P(this,"attributeInTransition",void 0),P(this,"settings",void 0),P(this,"attribute",void 0),P(this,"transition",void 0),P(this,"currentStartIndices",void 0),P(this,"currentLength",void 0),P(this,"texture",void 0),P(this,"framebuffer",void 0),P(this,"transform",void 0),P(this,"buffers",void 0),this.gl=t,this.type="spring",this.transition=new n0(n),this.attribute=r,this.attributeInTransition=new CE(t,{...r.settings,normalized:!1}),this.currentStartIndices=r.startIndices,this.currentLength=0,this.texture=A3t(t),this.framebuffer=M3t(t,this.texture),this.transform=C3t(t,r,this.framebuffer);const i={byteLength:0,usage:35050};this.buffers=[new Ee(t,i),new Ee(t,i),new Ee(t,i)]}get inProgress(){return this.transition.inProgress}start(t,r){const{gl:n,buffers:i,attribute:o}=this,s={numInstances:r,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const a of i)wV({buffer:a,...s});this.settings=t,this.currentStartIndices=o.startIndices,this.currentLength=EE(o,r),this.attributeInTransition.setData({buffer:i[1],value:o.value}),this.transition.start({...t,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aTo:_V(n,o)}})}update(){const{buffers:t,transform:r,framebuffer:n,transition:i}=this;if(!i.update())return!1;const s=this.settings;return r.update({sourceBuffers:{aPrev:t[0],aCur:t[1]},feedbackBuffers:{vNext:t[2]}}),r.run({framebuffer:n,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:s.stiffness,damping:s.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),bV(t),this.attributeInTransition.setData({buffer:t[1],value:this.attribute.value}),M_(n)[0]>0||i.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}function C3t(e,t,r){const n=yV(t.size);return new SE(e,{framebuffer:r,vs:`
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
attribute ATTRIBUTE_TYPE aPrev;
attribute ATTRIBUTE_TYPE aCur;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vNext;
varying float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs:`
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

varying float vIsTransitioningFlag;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  gl_FragColor = vec4(1.0);
}`,defines:{ATTRIBUTE_TYPE:n},varyings:["vNext"]})}function A3t(e){return new wn(e,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function M3t(e,t){return new ar(e,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{[36064]:t}})}const x3t={interpolation:T3t,spring:E3t};class L3t{constructor(t,{id:r,timeline:n}){P(this,"id",void 0),P(this,"isSupported",void 0),P(this,"gl",void 0),P(this,"timeline",void 0),P(this,"transitions",void 0),P(this,"needsRedraw",void 0),P(this,"numInstances",void 0),this.id=r,this.gl=t,this.timeline=n,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=SE.isSupported(t)}finalize(){for(const t in this.transitions)this._removeTransition(t)}update({attributes:t,transitions:r,numInstances:n}){this.numInstances=n||1;for(const i in t){const o=t[i],s=o.getTransitionSetting(r);!s||this._updateAttribute(i,o,s)}for(const i in this.transitions){const o=t[i];(!o||!o.getTransitionSetting(r))&&this._removeTransition(i)}}hasAttribute(t){const r=this.transitions[t];return r&&r.inProgress}getAttributes(){const t={};for(const r in this.transitions){const n=this.transitions[r];n.inProgress&&(t[r]=n.attributeInTransition)}return t}run(){if(!this.isSupported||this.numInstances===0)return!1;for(const r in this.transitions)this.transitions[r].update()&&(this.needsRedraw=!0);const t=this.needsRedraw;return this.needsRedraw=!1,t}_removeTransition(t){this.transitions[t].cancel(),delete this.transitions[t]}_updateAttribute(t,r,n){const i=this.transitions[t];let o=!i||i.type!==n.type;if(o){if(!this.isSupported){Yt.warn("WebGL2 not supported by this browser. Transition for ".concat(t," is disabled."))();return}i&&this._removeTransition(t);const s=x3t[n.type];s?this.transitions[t]=new s({attribute:r,timeline:this.timeline,gl:this.gl}):(Yt.error("unsupported transition type '".concat(n.type,"'"))(),o=!1)}(o||r.needsRedraw())&&(this.needsRedraw=!0,this.transitions[t].start(n,this.numInstances))}}const aI="attributeManager.invalidate",I3t="attributeManager.updateStart",O3t="attributeManager.updateEnd",R3t="attribute.updateStart",D3t="attribute.allocate",N3t="attribute.updateEnd";class F3t{constructor(t,{id:r="attribute-manager",stats:n,timeline:i}={}){P(this,"id",void 0),P(this,"gl",void 0),P(this,"attributes",void 0),P(this,"updateTriggers",void 0),P(this,"needsRedraw",void 0),P(this,"userData",void 0),P(this,"stats",void 0),P(this,"attributeTransitionManager",void 0),this.id=r,this.gl=t,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=n,this.attributeTransitionManager=new L3t(t,{id:"".concat(r,"-transitions"),timeline:i}),Object.seal(this)}finalize(){for(const t in this.attributes)this.attributes[t].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(t={clearRedrawFlags:!1}){const r=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!t.clearRedrawFlags,r&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(t){this._add(t)}addInstanced(t){this._add(t,{instanced:1})}remove(t){for(const r of t)this.attributes[r]!==void 0&&(this.attributes[r].delete(),delete this.attributes[r])}invalidate(t,r){const n=this._invalidateTrigger(t,r);Ur(aI,this,t,n)}invalidateAll(t){for(const r in this.attributes)this.attributes[r].setNeedsUpdate(r,t);Ur(aI,this,"all")}update({data:t,numInstances:r,startIndices:n=null,transitions:i,props:o={},buffers:s={},context:a={}}){let l=!1;Ur(I3t,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const u in this.attributes){const c=this.attributes[u],f=c.settings.accessor;c.startIndices=n,c.numInstances=r,o[u]&&Yt.removed("props.".concat(u),"data.attributes.".concat(u))(),c.setExternalBuffer(s[u])||c.setBinaryValue(typeof f=="string"?s[f]:void 0,t.startIndices)||typeof f=="string"&&!s[f]&&c.setConstantValue(o[f])||c.needsUpdate()&&(l=!0,this._updateAttribute({attribute:c,numInstances:r,data:t,props:o,context:a})),this.needsRedraw=this.needsRedraw||c.needsRedraw()}l&&Ur(O3t,this,r),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:r,transitions:i})}updateTransition(){const{attributeTransitionManager:t}=this,r=t.run();return this.needsRedraw=this.needsRedraw||r,r}getAttributes(){return this.attributes}getChangedAttributes(t={clearChangedFlags:!1}){const{attributes:r,attributeTransitionManager:n}=this,i={...n.getAttributes()};for(const o in r){const s=r[o];s.needsRedraw(t)&&!n.hasAttribute(o)&&(i[o]=s)}return i}getShaderAttributes(t,r={}){t||(t=this.getAttributes());const n={};for(const i in t)r[i]||Object.assign(n,t[i].getShaderAttributes());return n}_add(t,r={}){for(const n in t){const i=t[n];this.attributes[n]=this._createAttribute(n,i,r)}this._mapUpdateTriggersToAttributes()}_createAttribute(t,r,n){const i={...r,id:t,size:r.isIndexed&&1||r.size||1,divisor:n.instanced?1:r.divisor||0};return new CE(this.gl,i)}_mapUpdateTriggersToAttributes(){const t={};for(const r in this.attributes)this.attributes[r].getUpdateTriggers().forEach(i=>{t[i]||(t[i]=[]),t[i].push(r)});this.updateTriggers=t}_invalidateTrigger(t,r){const{attributes:n,updateTriggers:i}=this,o=i[t];return o&&o.forEach(s=>{const a=n[s];a&&a.setNeedsUpdate(a.id,r)}),o}_updateAttribute(t){const{attribute:r,numInstances:n}=t;if(Ur(R3t,r),r.constant){r.setConstantValue(r.value);return}r.allocate(n)&&Ur(D3t,r,n),r.updateBuffer(t)&&(this.needsRedraw=!0,Ur(N3t,r,n))}}class z3t extends n0{get value(){return this._value}_onUpdate(){const{time:t,settings:{fromValue:r,toValue:n,duration:i,easing:o}}=this,s=o(t/i);this._value=Ql(r,n,s)}}const lI=1e-5;function uI(e,t,r,n,i){const o=t-e,a=(r-t)*i,l=-o*n;return a+l+o+t}function B3t(e,t,r,n,i){if(Array.isArray(r)){const o=[];for(let s=0;s<r.length;s++)o[s]=uI(e[s],t[s],r[s],n,i);return o}return uI(e,t,r,n,i)}function cI(e,t){if(Array.isArray(e)){let r=0;for(let n=0;n<e.length;n++){const i=e[n]-t[n];r+=i*i}return Math.sqrt(r)}return Math.abs(e-t)}class $3t extends n0{get value(){return this._currValue}_onUpdate(){const{fromValue:t,toValue:r,damping:n,stiffness:i}=this.settings,{_prevValue:o=t,_currValue:s=t}=this;let a=B3t(o,s,r,n,i);const l=cI(a,r),u=cI(a,s);l<lI&&u<lI&&(a=r,this.end()),this._prevValue=s,this._currValue=a}}const V3t={interpolation:z3t,spring:$3t};class U3t{constructor(t){this.transitions=new Map,this.timeline=t}get active(){return this.transitions.size>0}add(t,r,n,i){const{transitions:o}=this;if(o.has(t)){const l=o.get(t),{value:u=l.settings.fromValue}=l;r=u,this.remove(t)}if(i=mV(i),!i)return;const s=V3t[i.type];if(!s){Yt.error("unsupported transition type '".concat(i.type,"'"))();return}const a=new s(this.timeline);a.start({...i,fromValue:r,toValue:n}),o.set(t,a)}remove(t){const{transitions:r}=this;r.has(t)&&(r.get(t).cancel(),r.delete(t))}update(){const t={};for(const[r,n]of this.transitions)n.update(),t[r]=n.value,n.inProgress||this.remove(r);return t}clear(){for(const t of this.transitions.keys())this.remove(t)}}function W3t(e){const t=AE(e);for(const r in t){const n=t[r],{validate:i}=n;if(i&&!i(e[r],n))throw new Error("Invalid prop ".concat(r,": ").concat(e[r]))}}function j3t(e,t){const r=SV({newProps:e,oldProps:t,propTypes:AE(e),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),n=H3t(e,t);let i=!1;return n||(i=X3t(e,t)),{dataChanged:n,propsChanged:r,updateTriggersChanged:i,extensionsChanged:Y3t(e,t),transitionsChanged:G3t(e,t)}}function G3t(e,t){if(!e.transitions)return!1;const r={},n=AE(e);let i=!1;for(const o in e.transitions){const s=n[o],a=s&&s.type;(a==="number"||a==="color"||a==="array")&&_T(e[o],t[o],s)&&(r[o]=!0,i=!0)}return i?r:!1}function SV({newProps:e,oldProps:t,ignoreProps:r={},propTypes:n={},triggerName:i="props"}){if(t===e)return!1;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return"".concat(i," changed shallowly");for(const o of Object.keys(e))if(!(o in r)){if(!(o in t))return"".concat(i,".").concat(o," added");const s=_T(e[o],t[o],n[o]);if(s)return"".concat(i,".").concat(o," ").concat(s)}for(const o of Object.keys(t))if(!(o in r)){if(!(o in e))return"".concat(i,".").concat(o," dropped");if(!Object.hasOwnProperty.call(e,o)){const s=_T(e[o],t[o],n[o]);if(s)return"".concat(i,".").concat(o," ").concat(s)}}return!1}function _T(e,t,r){let n=r&&r.equal;return n&&!n(e,t,r)||!n&&(n=e&&t&&e.equals,n&&!n.call(e,t))?"changed deeply":!n&&t!==e?"changed shallowly":null}function H3t(e,t){if(t===null)return"oldProps is null, initial diff";let r=!1;const{dataComparator:n,_dataDiff:i}=e;return n?n(e.data,t.data)||(r="Data comparator detected a change"):e.data!==t.data&&(r="A new data container was supplied"),r&&i&&(r=i(e.data,t.data)||r),r}function X3t(e,t){if(t===null)return{all:!0};if("all"in e.updateTriggers&&fI(e,t,"all"))return{all:!0};const r={};let n=!1;for(const i in e.updateTriggers)i!=="all"&&fI(e,t,i)&&(r[i]=!0,n=!0);return n?r:!1}function Y3t(e,t){if(t===null)return!0;const r=t.extensions,{extensions:n}=e;if(n===r)return!1;if(!r||!n||n.length!==r.length)return!0;for(let i=0;i<n.length;i++)if(!n[i].equals(r[i]))return!0;return!1}function fI(e,t,r){let n=e.updateTriggers[r];n=n==null?{}:n;let i=t.updateTriggers[r];return i=i==null?{}:i,SV({oldProps:i,newProps:n,triggerName:r})}function AE(e){const t=e[m1],r=t&&t.constructor;return r?r._propTypes:{}}const q3t="count(): argument not an object",Z3t="count(): argument not a container";function K3t(e){if(!Q3t(e))throw new Error(q3t);if(typeof e.count=="function")return e.count();if(Number.isFinite(e.size))return e.size;if(Number.isFinite(e.length))return e.length;if(J3t(e))return Object.keys(e).length;throw new Error(Z3t)}function J3t(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function Q3t(e){return e!==null&&typeof e=="object"}function tTt(e,t){if(!t)return e;const r={...e,...t};if("defines"in t&&(r.defines={...e.defines,...t.defines}),"modules"in t&&(r.modules=(e.modules||[]).concat(t.modules),t.modules.some(n=>n.name==="project64"))){const n=r.modules.findIndex(i=>i.name==="project32");n>=0&&r.modules.splice(n,1)}if("inject"in t)if(!e.inject)r.inject=t.inject;else{const n={...e.inject};for(const i in t.inject)n[i]=(n[i]||"")+t.inject[i];r.inject=n}return r}const eTt={[10241]:9987,[10240]:9729,[10242]:33071,[10243]:33071},yT={};function rTt(e,t){const r=e.context&&e.context.gl;if(!r||!t)return null;if(t instanceof wn)return t;t.constructor&&t.constructor.name!=="Object"&&(t={data:t});let n=null;t.compressed&&(n={[10241]:t.data.length>1?9985:9729});const i=new wn(r,{...t,parameters:{...eTt,...n,...e.props.textureParameters}});return yT[i.id]=!0,i}function nTt(e){!e||!(e instanceof wn)||yT[e.id]&&(e.delete(),delete yT[e.id])}const iTt={boolean:{validate(e,t){return!0},equal(e,t,r){return Boolean(e)===Boolean(t)}},number:{validate(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},color:{validate(e,t){return t.optional&&!e||Ep(e)&&(e.length===3||e.length===4)},equal(e,t,r){return Vb(e,t)}},accessor:{validate(e,t){const r=y1(e);return r==="function"||r===y1(t.value)},equal(e,t,r){return typeof t=="function"?!0:Vb(e,t)}},array:{validate(e,t){return t.optional&&!e||Ep(e)},equal(e,t,r){return r.compare?Vb(e,t):e===t}},object:{equal(e,t,r){return r.compare?zf(e,t):e===t}},function:{validate(e,t){return t.optional&&!e||typeof e=="function"},equal(e,t,r){return!r.compare||e===t}},data:{transform:(e,t,r)=>{const{dataTransform:n}=r.props;return n&&e?n(e):e}},image:{transform:(e,t,r)=>rTt(r,e),release:e=>{nTt(e)}}};function Vb(e,t){if(e===t)return!0;if(!Ep(e)||!Ep(t))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function oTt(e){const t={},r={},n={};for(const[i,o]of Object.entries(e)){const s=o==null?void 0:o.deprecatedFor;if(s)n[i]=Array.isArray(s)?s:[s];else{const a=sTt(i,o);t[i]=a,r[i]=a.value}}return{propTypes:t,defaultProps:r,deprecatedProps:n}}function sTt(e,t){switch(y1(t)){case"object":return Dh(e,t);case"array":return Dh(e,{type:"array",value:t,compare:!1});case"boolean":return Dh(e,{type:"boolean",value:t});case"number":return Dh(e,{type:"number",value:t});case"function":return Dh(e,{type:"function",value:t,compare:!0});default:return{name:e,type:"unknown",value:t}}}function Dh(e,t){return"type"in t?{name:e,...iTt[t.type],...t}:"value"in t?{name:e,type:y1(t.value),...t}:{name:e,type:"object",value:t}}function Ep(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function y1(e){return Ep(e)?"array":e===null?"null":typeof e}function aTt(e,t){const r=TV(e.constructor),n=Object.create(r);n[m1]=e,n[vu]={},n[_a]={};for(let i=0;i<t.length;++i){const o=t[i];for(const s in o)n[s]=o[s]}return Object.freeze(n),n}function TV(e){const t=b1(e,"_mergedDefaultProps");return t||(lTt(e),e._mergedDefaultProps)}function lTt(e){if(!e.prototype)return;const r=Object.getPrototypeOf(e),n=TV(r),i=b1(e,"defaultProps")||{},o=oTt(i),s=uTt(o.defaultProps,n,e),a={...r._propTypes,...o.propTypes};fTt(s,a);const l={...r._deprecatedProps,...o.deprecatedProps};cTt(s,l),e._mergedDefaultProps=s,e._propTypes=a,e._deprecatedProps=l}function uTt(e,t,r){const n=Object.create(null);Object.assign(n,t,e);const i=dTt(r);return delete e.id,Object.defineProperties(n,{id:{writable:!0,value:i}}),n}function cTt(e,t){for(const r in t)Object.defineProperty(e,r,{enumerable:!1,set(n){const i="".concat(this.id,": ").concat(r);for(const o of t[r])kV(this,o)||(this[o]=n);Yt.deprecated(i,t[r].join("/"))()}})}function fTt(e,t){const r={},n={};for(const i in t){const o=t[i],{name:s,value:a}=o;o.async&&(r[s]=a,n[s]=hTt(s))}e[Jc]=r,e[vu]={},Object.defineProperties(e,n)}function hTt(e){return{enumerable:!0,set(t){typeof t=="string"||t instanceof Promise||vV(t)?this[vu][e]=t:this[_a][e]=t},get(){if(this[_a]){if(e in this[_a])return this[_a][e]||this[Jc][e];if(e in this[vu]){const t=this[m1]&&this[m1].internalState;if(t&&t.hasAsyncProp(e))return t.getAsyncProp(e)||this[Jc][e]}}return this[Jc][e]}}}function kV(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function b1(e,t){return kV(e,t)&&e[t]}function dTt(e){const t=b1(e,"layerName")||b1(e,"componentName");return t||Yt.once(0,"".concat(e.name,".componentName not specified"))(),t||e.name}let pTt=0;class ME{constructor(...t){P(this,"id",void 0),P(this,"props",void 0),P(this,"count",void 0),this.props=aTt(this,t),this.id=this.props.id,this.count=pTt++}clone(t){const{props:r}=this,n={};for(const i in r[Jc])i in r[_a]?n[i]=r[_a][i]:i in r[vu]&&(n[i]=r[vu][i]);return new this.constructor({...r,...n,...t})}}P(ME,"componentName","Component");P(ME,"defaultProps",{});const vTt=Object.freeze({});class gTt{constructor(t){P(this,"component",void 0),P(this,"onAsyncPropUpdated",void 0),P(this,"asyncProps",void 0),P(this,"oldProps",void 0),P(this,"oldAsyncProps",void 0),this.component=t,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const t in this.asyncProps){const r=this.asyncProps[t];r&&r.type&&r.type.release&&r.type.release(r.resolvedValue,r.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps||vTt}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}hasAsyncProp(t){return t in this.asyncProps}getAsyncProp(t){const r=this.asyncProps[t];return r&&r.resolvedValue}isAsyncPropLoading(t){if(t){const r=this.asyncProps[t];return Boolean(r&&r.pendingLoadCount>0&&r.pendingLoadCount!==r.resolvedLoadCount)}for(const r in this.asyncProps)if(this.isAsyncPropLoading(r))return!0;return!1}reloadAsyncProp(t,r){this._watchPromise(t,Promise.resolve(r))}setAsyncProps(t){const r=t[_a]||{},n=t[vu]||t,i=t[Jc]||{};for(const o in r){const s=r[o];this._createAsyncPropData(o,i[o]),this._updateAsyncProp(o,s),r[o]=this.getAsyncProp(o)}for(const o in n){const s=n[o];this._createAsyncPropData(o,i[o]),this._updateAsyncProp(o,s)}}_fetch(t,r){return null}_onResolve(t,r){}_onError(t,r){}_updateAsyncProp(t,r){if(!!this._didAsyncInputValueChange(t,r)){if(typeof r=="string"&&(r=this._fetch(t,r)),r instanceof Promise){this._watchPromise(t,r);return}if(vV(r)){this._resolveAsyncIterable(t,r);return}this._setPropValue(t,r)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const t in this.asyncProps)Object.defineProperty(this.oldAsyncProps,t,{enumerable:!0,value:this.oldProps[t]})}}_didAsyncInputValueChange(t,r){const n=this.asyncProps[t];return r===n.resolvedValue||r===n.lastValue?!1:(n.lastValue=r,!0)}_setPropValue(t,r){this._freezeAsyncOldProps();const n=this.asyncProps[t];n&&(r=this._postProcessValue(n,r),n.resolvedValue=r,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount)}_setAsyncPropValue(t,r,n){const i=this.asyncProps[t];i&&n>=i.resolvedLoadCount&&r!==void 0&&(this._freezeAsyncOldProps(),i.resolvedValue=r,i.resolvedLoadCount=n,this.onAsyncPropUpdated(t,r))}_watchPromise(t,r){const n=this.asyncProps[t];if(n){n.pendingLoadCount++;const i=n.pendingLoadCount;r.then(o=>{o=this._postProcessValue(n,o),this._setAsyncPropValue(t,o,i),this._onResolve(t,o)}).catch(o=>{this._onError(t,o)})}}async _resolveAsyncIterable(t,r){if(t!=="data"){this._setPropValue(t,r);return}const n=this.asyncProps[t];if(!n)return;n.pendingLoadCount++;const i=n.pendingLoadCount;let o=[],s=0;for await(const a of r){const{dataTransform:l}=this.component.props;l?o=l(a,o):o=o.concat(a),Object.defineProperty(o,"__diff",{enumerable:!1,value:[{startRow:s,endRow:o.length}]}),s=o.length,this._setAsyncPropValue(t,o,i)}this._onResolve(t,o)}_postProcessValue(t,r){const n=t.type;return n&&(n.release&&n.release(t.resolvedValue,n,this.component),n.transform)?n.transform(r,n,this.component):r}_createAsyncPropData(t,r){if(!this.asyncProps[t]){const i=this.component&&this.component.constructor._propTypes;this.asyncProps[t]={type:i&&i[t],lastValue:null,resolvedValue:r,pendingLoadCount:0,resolvedLoadCount:0}}}}class mTt extends gTt{constructor({attributeManager:t,layer:r}){super(r),P(this,"attributeManager",void 0),P(this,"needsRedraw",void 0),P(this,"needsUpdate",void 0),P(this,"subLayers",void 0),P(this,"usesPickingColorCache",void 0),P(this,"changeFlags",void 0),P(this,"viewport",void 0),P(this,"uniformTransitions",void 0),P(this,"propsInTransition",void 0),this.attributeManager=t,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(t){this.component=t}_fetch(t,r){const n=this.component.props.fetch;return n?n(r,{propName:t,layer:this.layer}):super._fetch(t,r)}_onResolve(t,r){const n=this.component.props.onDataLoad;t==="data"&&n&&n(r,{propName:t,layer:this.layer})}_onError(t,r){this.layer.raiseError(r,"loading ".concat(t," of ").concat(this.layer))}}const _Tt="layer.changeFlag",yTt="layer.initialize",bTt="layer.update",wTt="layer.finalize",STt="layer.matched",hI=2**24-1,TTt=Object.freeze([]),kTt=r0(({oldViewport:e,viewport:t})=>e.equals(t));let lo=new Uint8ClampedArray(0);const PTt={data:{type:"data",value:TTt,async:!0},dataComparator:{type:"function",value:null,compare:!1,optional:!0},_dataDiff:{type:"function",value:e=>e&&e.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(e,{propName:t,layer:r,loaders:n,loadOptions:i,signal:o})=>{const{resourceManager:s}=r.context;if(i=i||r.getLoadOptions(),n=n||r.props.loaders,o){var a;i={...i,fetch:{...(a=i)===null||a===void 0?void 0:a.fetch,signal:o}}}let l=s.contains(e);return!l&&!i&&(s.add({resourceId:e,data:c1(e,n),persistent:!1}),l=!0),l?s.subscribe({resourceId:e,onChange:u=>{var c;return(c=r.internalState)===null||c===void 0?void 0:c.reloadAsyncProp(t,u)},consumerId:r.id,requestId:t}):c1(e,n,i)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:e0.DRAW,onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:se.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:e})=>[0,-e*100],compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Bo extends ME{constructor(...t){super(...t),P(this,"internalState",null),P(this,"lifecycle",Ac.NO_STATE),P(this,"context",void 0),P(this,"state",void 0),P(this,"parent",null)}get root(){let t=this;for(;t.parent;)t=t.parent;return t}toString(){const t=this.constructor.layerName||this.constructor.name;return"".concat(t,"({id: '").concat(this.props.id,"'})")}project(t){pr(this.internalState);const r=this.internalState.viewport||this.context.viewport,n=rV(t,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,o,s]=J$(n,r.pixelProjectionMatrix);return t.length===2?[i,o]:[i,o,s]}unproject(t){return pr(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(t)}projectPosition(t,r){pr(this.internalState);const n=this.internalState.viewport||this.context.viewport;return Uwt(t,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...r})}get isComposite(){return!1}setState(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(t){for(const r of this.getModels())r.updateModuleSettings(t)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:t}=this.props;return t===se.DEFAULT||t===se.LNGLAT||t===se.CARTESIAN}onHover(t,r){return this.props.onHover&&this.props.onHover(t,r)||!1}onClick(t,r){return this.props.onClick&&this.props.onClick(t,r)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(t,r=[]){return r[0]=t+1&255,r[1]=t+1>>8&255,r[2]=t+1>>8>>8&255,r}decodePickingColor(t){pr(t instanceof Uint8Array);const[r,n,i]=t;return r+n*256+i*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:K3t(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var t;const r=this.getAttributeManager();if(!r)return null;const{positions:n,instancePositions:i}=r.attributes;return(t=n||i)===null||t===void 0?void 0:t.getBounds()}getShaders(t){for(const r of this.props.extensions)t=tTt(t,r.getShaders.call(this,r));return t}shouldUpdateState(t){return t.changeFlags.propsOrDataChanged}updateState(t){const r=this.getAttributeManager(),{dataChanged:n}=t.changeFlags;if(n&&r)if(Array.isArray(n))for(const l of n)r.invalidateAll(l);else r.invalidateAll();const{props:i,oldProps:o}=t,s=Number.isInteger(o.highlightedObjectIndex)||o.pickable,a=Number.isInteger(i.highlightedObjectIndex)||i.pickable;if(s!==a&&r){const{pickingColors:l,instancePickingColors:u}=r.attributes,c=l||u;c&&(a&&c.constant&&(c.constant=!1,r.invalidate(c.id)),!c.value&&!a&&(c.constant=!0,c.value=[0,0,0]))}}finalizeState(t){for(const n of this.getModels())n.delete();const r=this.getAttributeManager();r&&r.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(t){for(const r of this.getModels())r.draw(t)}getPickingInfo({info:t,mode:r,sourceLayer:n}){const{index:i}=t;return i>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[i]),t}raiseError(t,r){var n,i;if(r&&(t.message="".concat(r,": ").concat(t.message)),!((n=(i=this.props).onError)!==null&&n!==void 0&&n.call(i,t))){var o,s;(o=this.context)===null||o===void 0||(s=o.onError)===null||s===void 0||s.call(o,t,this)}}getNeedsRedraw(t={clearRedrawFlags:!1}){return this._getNeedsRedraw(t)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var t;return((t=this.internalState)===null||t===void 0?void 0:t.uniformTransitions.active)||!1}activateViewport(t){if(!this.internalState)return;const r=this.internalState.viewport;this.internalState.viewport=t,(!r||!kTt({oldViewport:r,viewport:t}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(t="all"){const r=this.getAttributeManager();!r||(t==="all"?r.invalidateAll():r.invalidate(t))}updateAttributes(t){for(const r of this.getModels())this._setModelAttributes(r,t)}_updateAttributes(){const t=this.getAttributeManager();if(!t)return;const r=this.props,n=this.getNumInstances(),i=this.getStartIndices();t.update({data:r.data,numInstances:n,startIndices:i,props:r,transitions:r.transitions,buffers:r.data.attributes,context:this});const o=t.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(o)}_updateAttributeTransition(){const t=this.getAttributeManager();t&&t.updateTransition()}_updateUniformTransition(){const{uniformTransitions:t}=this.internalState;if(t.active){const r=t.update(),n=Object.create(this.props);for(const i in r)Object.defineProperty(n,i,{value:r[i]});return n}return this.props}calculateInstancePickingColors(t,{numInstances:r}){if(t.constant)return;const n=Math.floor(lo.length/3);if(this.internalState.usesPickingColorCache=!0,n<r){r>hI&&Yt.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),lo=gf.allocate(lo,r,{size:3,copy:!0,maxCount:Math.max(r,hI)});const i=Math.floor(lo.length/3),o=[];for(let s=n;s<i;s++)this.encodePickingColor(s,o),lo[s*3+0]=o[0],lo[s*3+1]=o[1],lo[s*3+2]=o[2]}t.value=lo.subarray(0,r*3)}_setModelAttributes(t,r){const n=this.getAttributeManager(),i=t.userData.excludeAttributes||{},o=n.getShaderAttributes(r,i);t.setAttributes(o)}disablePickingIndex(t){this._disablePickingIndex(t)}_disablePickingIndex(t){const{pickingColors:r,instancePickingColors:n}=this.getAttributeManager().attributes,i=r||n;if(!i)return;const o=i.getVertexOffset(t),s=i.getVertexOffset(t+1);i.buffer.subData({data:new Uint8Array(s-o),offset:o})}restorePickingColors(){const{pickingColors:t,instancePickingColors:r}=this.getAttributeManager().attributes,n=t||r;!n||(this.internalState.usesPickingColorCache&&n.value.buffer!==lo.buffer&&(n.value=lo.subarray(0,n.value.length)),n.updateSubBuffer({startOffset:0}))}_initialize(){pr(!this.internalState),pr(Number.isFinite(this.props.coordinateSystem)),Ur(yTt,this);const t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new mTt({attributeManager:t,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(Yt.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),t)}),this.internalState.layer=this,this.internalState.uniformTransitions=new U3t(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const r of this.props.extensions)r.initializeState.call(this,this.context,r);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(t){Ur(STt,this,this===t);const{state:r,internalState:n}=t;this!==t&&(this.internalState=n,this.internalState.layer=this,this.state=r,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const t=this.needsUpdate();if(Ur(bTt,this,t),!t)return;const r=this.props,n=this.context,i=this.internalState,o=n.viewport,s=this._updateUniformTransition();i.propsInTransition=s,n.viewport=i.viewport||o,this.props=s;try{const a=this._getUpdateParams(),l=this.getModels();if(n.gl)this.updateState(a);else try{this.updateState(a)}catch{}for(const c of this.props.extensions)c.updateState.call(this,a,c);const u=this.getModels()[0]!==l[0];this._postUpdate(a,u)}finally{n.viewport=o,this.props=r,this._clearChangeFlags(),i.needsUpdate=!1,i.resetOldProps()}}_finalize(){Ur(wTt,this),this.finalizeState(this.context);for(const t of this.props.extensions)t.finalizeState.call(this,t)}_drawLayer({moduleParameters:t=null,uniforms:r={},parameters:n={}}){this._updateAttributeTransition();const i=this.props,o=this.context;this.props=this.internalState.propsInTransition||i;const s=this.props.opacity;r.opacity=Math.pow(s,1/2.2);try{t&&this.setModuleParameters(t);const{getPolygonOffset:a}=this.props,l=a&&a(r)||[0,0];ws(o.gl,{polygonOffset:l}),ai(o.gl,n,()=>{const u={moduleParameters:t,uniforms:r,parameters:n,context:o};for(const c of this.props.extensions)c.draw.call(this,u,c);this.draw(u)})}finally{this.props=i}}getChangeFlags(){var t;return(t=this.internalState)===null||t===void 0?void 0:t.changeFlags}setChangeFlags(t){if(!this.internalState)return;const{changeFlags:r}=this.internalState;for(const i in t)if(t[i]){let o=!1;switch(i){case"dataChanged":const s=t[i],a=r[i];s&&Array.isArray(a)&&(r.dataChanged=Array.isArray(s)?a.concat(s):s,o=!0);default:r[i]||(r[i]=t[i],o=!0)}o&&Ur(_Tt,this,i,t)}const n=Boolean(r.dataChanged||r.updateTriggersChanged||r.propsChanged||r.extensionsChanged);r.propsOrDataChanged=n,r.somethingChanged=n||r.viewportChanged||r.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(t,r){const n=j3t(t,r);if(n.updateTriggersChanged)for(const o in n.updateTriggersChanged)n.updateTriggersChanged[o]&&this.invalidateAttribute(o);if(n.transitionsChanged)for(const o in n.transitionsChanged){var i;this.internalState.uniformTransitions.add(o,r[o],t[o],(i=t.transitions)===null||i===void 0?void 0:i[o])}return this.setChangeFlags(n)}validateProps(){W3t(this.props)}updateAutoHighlight(t){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(t)}_updateAutoHighlight(t){const r={pickingSelectedColor:t.picked?t.color:null},{highlightColor:n}=this.props;t.picked&&typeof n=="function"&&(r.pickingHighlightColor=n(t)),this.setModuleParameters(r),this.setNeedsRedraw()}_getAttributeManager(){const t=this.context;return new F3t(t.gl,{id:this.props.id,stats:t.stats,timeline:t.timeline})}_postUpdate(t,r){const{props:n,oldProps:i}=t;this.setNeedsRedraw(),this._updateAttributes();const{model:o}=this.state;o==null||o.setInstanceCount(this.getNumInstances());const{autoHighlight:s,highlightedObjectIndex:a,highlightColor:l}=n;if(r||i.autoHighlight!==s||i.highlightedObjectIndex!==a||i.highlightColor!==l){const u={};s||(u.pickingSelectedColor=null),Array.isArray(l)&&(u.pickingHighlightColor=l),Number.isInteger(a)&&(u.pickingSelectedColor=Number.isFinite(a)&&a>=0?this.encodePickingColor(a):null),this.setModuleParameters(u)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(t){if(!this.internalState)return!1;let r=!1;r=r||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!t.clearRedrawFlags;const n=this.getAttributeManager(),i=n?n.getNeedsRedraw(t):!1;return r=r||i,r}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}P(Bo,"defaultProps",PTt);P(Bo,"layerName","Layer");const ETt="compositeLayer.renderLayers";class z_ extends Bo{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(t=>t.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(t){}setState(t){super.setState(t),this.setNeedsUpdate()}getPickingInfo({info:t}){const{object:r}=t;return r&&r.__source&&r.__source.parent&&r.__source.parent.id===this.id&&(t.object=r.__source.object,t.index=r.__source.index),t}filterSubLayer(t){return!0}shouldRenderSubLayer(t,r){return r&&r.length}getSubLayerClass(t,r){const{_subLayerProps:n}=this.props;return n&&n[t]&&n[t].type||r}getSubLayerRow(t,r,n){return t.__source={parent:this,object:r,index:n},t}getSubLayerAccessor(t){if(typeof t=="function"){const r={index:-1,data:this.props.data,target:[]};return(n,i)=>n&&n.__source?(r.index=n.__source.index,t(n.__source.object,r)):t(n,i)}return t}getSubLayerProps(t={}){var r;const{opacity:n,pickable:i,visible:o,parameters:s,getPolygonOffset:a,highlightedObjectIndex:l,autoHighlight:u,highlightColor:c,coordinateSystem:f,coordinateOrigin:h,wrapLongitude:d,positionFormat:p,modelMatrix:v,extensions:m,fetch:g,operation:_,_subLayerProps:b}=this.props,w={id:"",updateTriggers:{},opacity:n,pickable:i,visible:o,parameters:s,getPolygonOffset:a,highlightedObjectIndex:l,autoHighlight:u,highlightColor:c,coordinateSystem:f,coordinateOrigin:h,wrapLongitude:d,positionFormat:p,modelMatrix:v,extensions:m,fetch:g,operation:_},T=b&&t.id&&b[t.id],S=T&&T.updateTriggers,k=t.id||"sublayer";if(T){const A=this.constructor._propTypes,C=t.type?t.type._propTypes:{};for(const x in T){const I=C[x]||A[x];I&&I.type==="accessor"&&(T[x]=this.getSubLayerAccessor(T[x]))}}Object.assign(w,t,T),w.id="".concat(this.props.id,"-").concat(k),w.updateTriggers={all:(r=this.props.updateTriggers)===null||r===void 0?void 0:r.all,...t.updateTriggers,...S};for(const A of m){const C=A.getSubLayerProps.call(this,A);C&&Object.assign(w,C,{updateTriggers:Object.assign(w.updateTriggers,C.updateTriggers)})}return w}_updateAutoHighlight(t){for(const r of this.getSubLayers())r.updateAutoHighlight(t)}_getAttributeManager(){return null}_postUpdate(t,r){let n=this.internalState.subLayers;const i=!n||this.needsUpdate();if(i){const o=this.renderLayers();n=I_(o,Boolean),this.internalState.subLayers=n}Ur(ETt,this,i,n);for(const o of n)o.parent=this}}P(z_,"layerName","CompositeLayer");const Dv=Math.PI/180,dI=180/Math.PI,hm=6370972,Fc=256;function CTt(){const e=Fc/hm,t=Math.PI/180*Fc;return{unitsPerMeter:[e,e,e],unitsPerMeter2:[0,0,0],metersPerUnit:[1/e,1/e,1/e],unitsPerDegree:[t,t,e],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/t,1/t,1/e]}}class ATt extends ja{constructor(t={}){const{latitude:r=0,longitude:n=0,zoom:i=0,nearZMultiplier:o=.1,farZMultiplier:s=2,resolution:a=10}=t;let{height:l,altitude:u=1.5}=t;l=l||1,u=Math.max(.75,u);const c=new Xr().lookAt({eye:[0,-u,0],up:[0,0,1]}),f=Math.pow(2,i);c.rotateX(r*Dv),c.rotateZ(-n*Dv),c.scale(f/l);const h=Math.atan(.5/u),d=Fc*2*f/l;super({...t,height:l,viewMatrix:c,longitude:n,latitude:r,zoom:i,distanceScales:CTt(),fovyRadians:h*2,focalDistance:u,near:o,far:Math.min(2,1/d+1)*u*s}),P(this,"longitude",void 0),P(this,"latitude",void 0),P(this,"resolution",void 0),this.latitude=r,this.longitude=n,this.resolution=a}get projectionMode(){return Ii.GLOBE}getDistanceScales(){return this.distanceScales}getBounds(t={}){const r={targetZ:t.z||0},n=this.unproject([0,this.height/2],r),i=this.unproject([this.width/2,0],r),o=this.unproject([this.width,this.height/2],r),s=this.unproject([this.width/2,this.height],r);return o[0]<this.longitude&&(o[0]+=360),n[0]>this.longitude&&(n[0]-=360),[Math.min(n[0],o[0],i[0],s[0]),Math.min(n[1],o[1],i[1],s[1]),Math.max(n[0],o[0],i[0],s[0]),Math.max(n[1],o[1],i[1],s[1])]}unproject(t,{topLeft:r=!0,targetZ:n}={}){const[i,o,s]=t,a=r?o:this.height-o,{pixelUnprojectionMatrix:l}=this;let u;if(Number.isFinite(s))u=Ub(l,[i,a,s,1]);else{const d=Ub(l,[i,a,-1,1]),p=Ub(l,[i,a,1,1]),v=((n||0)/hm+1)*Fc,m=xb(R$([],d,p)),g=xb(d),_=xb(p),b=(4*g*_-(m-g-_)**2)/16,w=4*b/m,T=Math.sqrt(g-w),S=Math.sqrt(Math.max(0,v*v-w)),k=(T-S)/Math.sqrt(m);u=Uyt([],d,p,k)}const[c,f,h]=this.unprojectPosition(u);return Number.isFinite(s)?[c,f,h]:Number.isFinite(n)?[c,f,n]:[c,f]}projectPosition(t){const[r,n,i=0]=t,o=r*Dv,s=n*Dv,a=Math.cos(s),l=(i/hm+1)*Fc;return[Math.sin(o)*a*l,-Math.cos(o)*a*l,Math.sin(s)*l]}unprojectPosition(t){const[r,n,i]=t,o=D$(t),s=Math.asin(i/o),l=Math.atan2(r,-n)*dI,u=s*dI,c=(o/Fc-1)*hm;return[l,u,c]}projectFlat(t){return t}unprojectFlat(t){return t}panByPosition(t,r){const n=this.unproject(r);return{longitude:t[0]-n[0]+this.longitude,latitude:t[1]-n[1]+this.latitude}}}function Ub(e,t){const r=Ff([],t,e);return wE(r,r,1/r[3]),r}class PV{constructor(t){P(this,"opts",void 0),P(this,"typedArrayManager",void 0),P(this,"indexStarts",[0]),P(this,"vertexStarts",[0]),P(this,"vertexCount",0),P(this,"instanceCount",0),P(this,"attributes",void 0),P(this,"_attributeDefs",void 0),P(this,"data",void 0),P(this,"getGeometry",void 0),P(this,"geometryBuffer",void 0),P(this,"buffers",void 0),P(this,"positionSize",void 0),P(this,"normalize",void 0);const{attributes:r={}}=t;this.typedArrayManager=gf,this.attributes={},this._attributeDefs=r,this.opts=t,this.updateGeometry(t)}updateGeometry(t){Object.assign(this.opts,t);const{data:r,buffers:n={},getGeometry:i,geometryBuffer:o,positionFormat:s,dataChanged:a,normalize:l=!0}=this.opts;if(this.data=r,this.getGeometry=i,this.positionSize=o&&o.size||(s==="XY"?2:3),this.buffers=n,this.normalize=l,o&&(pr(r.startIndices),this.getGeometry=this.getGeometryFromBuffer(o),l||(n.positions=o)),this.geometryBuffer=n.positions,Array.isArray(a))for(const u of a)this._rebuildGeometry(u);else this._rebuildGeometry()}updatePartialGeometry({startRow:t,endRow:r}){this._rebuildGeometry({startRow:t,endRow:r})}getGeometryFromBuffer(t){const r=t.value||t;return ArrayBuffer.isView(r)?gV(r,{size:this.positionSize,offset:t.offset,stride:t.stride,startIndices:this.data.startIndices}):null}_allocate(t,r){const{attributes:n,buffers:i,_attributeDefs:o,typedArrayManager:s}=this;for(const a in o)if(a in i)s.release(n[a]),n[a]=null;else{const l=o[a];l.copy=r,n[a]=s.allocate(n[a],t,l)}}_forEachGeometry(t,r,n){const{data:i,getGeometry:o}=this,{iterable:s,objectInfo:a}=F_(i,r,n);for(const l of s){a.index++;const u=o?o(l,a):null;t(u,a.index)}}_rebuildGeometry(t){if(!this.data)return;let{indexStarts:r,vertexStarts:n,instanceCount:i}=this;const{data:o,geometryBuffer:s}=this,{startRow:a=0,endRow:l=1/0}=t||{},u={};if(t||(r=[0],n=[0]),this.normalize||!s)this._forEachGeometry((f,h)=>{const d=f&&this.normalizeGeometry(f);u[h]=d,n[h+1]=n[h]+(d?this.getGeometrySize(d):0)},a,l),i=n[n.length-1];else if(n=o.startIndices,i=n[o.length]||0,ArrayBuffer.isView(s))i=i||s.length/this.positionSize;else if(s instanceof Ee){const f=s.accessor.stride||this.positionSize*4;i=i||s.byteLength/f}else if(s.buffer){const f=s.stride||this.positionSize*4;i=i||s.buffer.byteLength/f}else if(s.value){const f=s.value,h=s.stride/f.BYTES_PER_ELEMENT||this.positionSize;i=i||f.length/h}this._allocate(i,Boolean(t)),this.indexStarts=r,this.vertexStarts=n,this.instanceCount=i;const c={};this._forEachGeometry((f,h)=>{const d=u[h]||f;c.vertexStart=n[h],c.indexStart=r[h];const p=h<n.length-1?n[h+1]:i;c.geometrySize=p-n[h],c.geometryIndex=h,this.updateGeometryAttributes(d,c)},a,l),this.vertexCount=r[r.length-1]}}const MTt=new Uint16Array([0,2,1,0,3,2]),xTt=new Float32Array([0,1,0,0,1,0,1,1]);function LTt(e,t){if(!t)return ITt(e);const r=Math.max(Math.abs(e[0][0]-e[3][0]),Math.abs(e[1][0]-e[2][0])),n=Math.max(Math.abs(e[1][1]-e[0][1]),Math.abs(e[2][1]-e[3][1])),i=Math.ceil(r/t)+1,o=Math.ceil(n/t)+1,s=(i-1)*(o-1)*6,a=new Uint32Array(s),l=new Float32Array(i*o*2),u=new Float64Array(i*o*3);let c=0,f=0;for(let h=0;h<i;h++){const d=h/(i-1);for(let p=0;p<o;p++){const v=p/(o-1),m=OTt(e,d,v);u[c*3+0]=m[0],u[c*3+1]=m[1],u[c*3+2]=m[2]||0,l[c*2+0]=d,l[c*2+1]=1-v,h>0&&p>0&&(a[f++]=c-o,a[f++]=c-o-1,a[f++]=c-1,a[f++]=c-o,a[f++]=c-1,a[f++]=c),c++}}return{vertexCount:s,positions:u,indices:a,texCoords:l}}function ITt(e){const t=new Float64Array(12);for(let r=0;r<e.length;r++)t[r*3+0]=e[r][0],t[r*3+1]=e[r][1],t[r*3+2]=e[r][2]||0;return{vertexCount:6,positions:t,indices:MTt,texCoords:xTt}}function OTt(e,t,r){return Ql(Ql(e[0],e[1],r),Ql(e[3],e[2],r),t)}const RTt=`
#define SHADER_NAME bitmap-layer-vertex-shader

attribute vec2 texCoords;
attribute vec3 positions;
attribute vec3 positions64Low;

varying vec2 vTexCoord;
varying vec2 vTexPos;

uniform float coordinateConversion;

const vec3 pickingColor = vec3(1.0, 0.0, 0.0);

void main(void) {
  geometry.worldPosition = positions;
  geometry.uv = texCoords;
  geometry.pickingColor = pickingColor;

  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTexCoord = texCoords;

  if (coordinateConversion < -0.5) {
    vTexPos = geometry.position.xy + project_uCommonOrigin.xy;
  } else if (coordinateConversion > 0.5) {
    vTexPos = geometry.worldPosition.xy;
  }

  vec4 color = vec4(0.0);
  DECKGL_FILTER_COLOR(color, geometry);
}
`,DTt=`
vec3 packUVsIntoRGB(vec2 uv) {
  // Extract the top 8 bits. We want values to be truncated down so we can add a fraction
  vec2 uv8bit = floor(uv * 256.);

  // Calculate the normalized remainders of u and v parts that do not fit into 8 bits
  // Scale and clamp to 0-1 range
  vec2 uvFraction = fract(uv * 256.);
  vec2 uvFraction4bit = floor(uvFraction * 16.);

  // Remainder can be encoded in blue channel, encode as 4 bits for pixel coordinates
  float fractions = uvFraction4bit.x + uvFraction4bit.y * 16.;

  return vec3(uv8bit, fractions) / 255.;
}
`,NTt=`
#define SHADER_NAME bitmap-layer-fragment-shader

#ifdef GL_ES
precision highp float;
#endif

uniform sampler2D bitmapTexture;

varying vec2 vTexCoord;
varying vec2 vTexPos;

uniform float desaturate;
uniform vec4 transparentColor;
uniform vec3 tintColor;
uniform float opacity;

uniform float coordinateConversion;
uniform vec4 bounds;

/* projection utils */
const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / PI / 2.0;

// from degrees to Web Mercator
vec2 lnglat_to_mercator(vec2 lnglat) {
  float x = lnglat.x;
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

// from Web Mercator to degrees
vec2 mercator_to_lnglat(vec2 xy) {
  xy /= WORLD_SCALE;
  return degrees(vec2(
    xy.x - PI,
    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5
  ));
}
/* End projection utils */

// apply desaturation
vec3 color_desaturate(vec3 color) {
  float luminance = (color.r + color.g + color.b) * 0.333333333;
  return mix(color, vec3(luminance), desaturate);
}

// apply tint
vec3 color_tint(vec3 color) {
  return color * tintColor;
}

// blend with background color
vec4 apply_opacity(vec3 color, float alpha) {
  return mix(transparentColor, vec4(color, 1.0), alpha);
}

vec2 getUV(vec2 pos) {
  return vec2(
    (pos.x - bounds[0]) / (bounds[2] - bounds[0]),
    (pos.y - bounds[3]) / (bounds[1] - bounds[3])
  );
}

`.concat(DTt,`

void main(void) {
  vec2 uv = vTexCoord;
  if (coordinateConversion < -0.5) {
    vec2 lnglat = mercator_to_lnglat(vTexPos);
    uv = getUV(lnglat);
  } else if (coordinateConversion > 0.5) {
    vec2 commonPos = lnglat_to_mercator(vTexPos);
    uv = getUV(commonPos);
  }
  vec4 bitmapColor = texture2D(bitmapTexture, uv);

  gl_FragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * opacity);

  geometry.uv = uv;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);

  if (picking_uActive) {
    // Since instance information is not used, we can use picking color for pixel index
    gl_FragColor.rgb = packUVsIntoRGB(uv);
  }
}
`),FTt={image:{type:"image",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},_imageCoordinateSystem:se.DEFAULT,desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]}};class B_ extends Bo{constructor(...t){super(...t),P(this,"state",void 0)}getShaders(){return super.getShaders({vs:RTt,fs:NTt,modules:[Ru,Du]})}initializeState(){const t=this.getAttributeManager();t.remove(["instancePickingColors"]);const r=!0;t.add({indices:{size:1,isIndexed:!0,update:n=>n.value=this.state.mesh.indices,noAlloc:r},positions:{size:3,type:5130,fp64:this.use64bitPositions(),update:n=>n.value=this.state.mesh.positions,noAlloc:r},texCoords:{size:2,update:n=>n.value=this.state.mesh.texCoords,noAlloc:r}})}updateState({props:t,oldProps:r,changeFlags:n}){const i=this.getAttributeManager();if(n.extensionsChanged){var o;const{gl:s}=this.context;(o=this.state.model)===null||o===void 0||o.delete(),this.state.model=this._getModel(s),i.invalidateAll()}if(t.bounds!==r.bounds){const s=this.state.mesh,a=this._createMesh();this.state.model.setVertexCount(a.vertexCount);for(const l in a)s&&s[l]!==a[l]&&i.invalidate(l);this.setState({mesh:a,...this._getCoordinateUniforms()})}else t._imageCoordinateSystem!==r._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}getPickingInfo(t){const{image:r}=this.props,n=t.info;if(!n.color||!r)return n.bitmap=null,n;const{width:i,height:o}=r;n.index=0;const s=zTt(n.color),a=[Math.floor(s[0]*i),Math.floor(s[1]*o)];return n.bitmap={size:{width:i,height:o},uv:s,pixel:a},n}disablePickingIndex(){this.setState({disablePicking:!0})}restorePickingColors(){this.setState({disablePicking:!1})}_updateAutoHighlight(t){super._updateAutoHighlight({...t,color:this.encodePickingColor(0)})}_createMesh(){const{bounds:t}=this.props;let r=t;return pI(t)&&(r=[[t[0],t[1]],[t[0],t[3]],[t[2],t[3]],[t[2],t[1]]]),LTt(r,this.context.viewport.resolution)}_getModel(t){return t?new Ss(t,{...this.getShaders(),id:this.props.id,geometry:new Ou({drawMode:4,vertexCount:6}),isInstanced:!1}):null}draw(t){const{uniforms:r,moduleParameters:n}=t,{model:i,coordinateConversion:o,bounds:s,disablePicking:a}=this.state,{image:l,desaturate:u,transparentColor:c,tintColor:f}=this.props;n.pickingActive&&a||l&&i&&i.setUniforms(r).setUniforms({bitmapTexture:l,desaturate:u,transparentColor:c.map(h=>h/255),tintColor:f.slice(0,3).map(h=>h/255),coordinateConversion:o,bounds:s}).draw()}_getCoordinateUniforms(){const{LNGLAT:t,CARTESIAN:r,DEFAULT:n}=se;let{_imageCoordinateSystem:i}=this.props;if(i!==n){const{bounds:o}=this.props;if(!pI(o))throw new Error("_imageCoordinateSystem only supports rectangular bounds");const s=this.context.viewport.resolution?t:r;if(i=i===t?t:r,i===t&&s===r)return{coordinateConversion:-1,bounds:o};if(i===r&&s===t){const a=Fa([o[0],o[1]]),l=Fa([o[2],o[3]]);return{coordinateConversion:1,bounds:[a[0],a[1],l[0],l[1]]}}}return{coordinateConversion:0,bounds:[0,0,0,0]}}}P(B_,"layerName","BitmapLayer");P(B_,"defaultProps",FTt);function zTt(e){const[t,r,n]=e,i=(n&240)/256,o=(n&15)/16;return[(t+o)/256,(r+i)/256]}function pI(e){return Number.isFinite(e[0])}const BTt=`#define SHADER_NAME icon-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute vec4 instanceIconFrames;
attribute float instanceColorModes;
attribute vec2 instanceOffsets;
attribute vec2 instancePixelOffset;

uniform float sizeScale;
uniform vec2 iconsTextureDim;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform bool billboard;
uniform int sizeUnits;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = angle * PI / 180.0;
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;

  vec2 iconSize = instanceIconFrames.zw;
  // convert size in meters to pixels, then scaled and clamp
 
  // project meters to pixels and clamp to limits 
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), 
    sizeMinPixels, sizeMaxPixels
  );

  // scale icon height to match instanceSize
  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;

  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace
  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
  pixelOffset += instancePixelOffset;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);

  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); 
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTextureCoords = mix(
    instanceIconFrames.xy,
    instanceIconFrames.xy + iconSize,
    (positions.xy + 1.0) / 2.0
  ) / iconsTextureDim;

  vColor = instanceColors;
  DECKGL_FILTER_COLOR(vColor, geometry);

  vColorMode = instanceColorModes;
}
`,$Tt=`#define SHADER_NAME icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float alphaCutoff;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  vec4 texColor = texture2D(iconsTexture, vTextureCoords);

  // if colorMode == 0, use pixel color from the texture
  // if colorMode == 1 or rendering picking buffer, use texture as transparency mask
  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
  // Take the global opacity and the alpha from vColor into account for the alpha component
  float a = texColor.a * opacity * vColor.a;

  if (a < alphaCutoff) {
    discard;
  }

  gl_FragColor = vec4(color, a);
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,VTt=1024,UTt=4,vI=()=>{},WTt={[10241]:9987,[10240]:9729,[10242]:33071,[10243]:33071};function jTt(e){return Math.pow(2,Math.ceil(Math.log2(e)))}function GTt(e,t,r,n){return r===t.width&&n===t.height?t:(e.canvas.height=n,e.canvas.width=r,e.clearRect(0,0,e.canvas.width,e.canvas.height),e.drawImage(t,0,0,t.width,t.height,0,0,r,n),e.canvas)}function Cp(e){return e&&(e.id||e.url)}function HTt(e,t,r){const n=e.width,i=e.height,o=f$(e,{width:t,height:r});return s1t(e,o,{targetY:0,width:n,height:i}),e.delete(),o}function gI(e,t,r){for(let n=0;n<t.length;n++){const{icon:i,xOffset:o}=t[n],s=Cp(i);e[s]={...i,x:o,y:r}}}function XTt({icons:e,buffer:t,mapping:r={},xOffset:n=0,yOffset:i=0,rowHeight:o=0,canvasWidth:s}){let a=[];for(let l=0;l<e.length;l++){const u=e[l],c=Cp(u);if(!r[c]){const{height:f,width:h}=u;n+h+t>s&&(gI(r,a,i),n=0,i=o+i+t,o=0,a=[]),a.push({icon:u,xOffset:n}),n=n+h+t,o=Math.max(o,f)}}return a.length>0&&gI(r,a,i),{mapping:r,rowHeight:o,xOffset:n,yOffset:i,canvasWidth:s,canvasHeight:jTt(o+i+t)}}function YTt(e,t,r){if(!e||!t)return null;r=r||{};const n={},{iterable:i,objectInfo:o}=F_(e);for(const s of i){o.index++;const a=t(s,o),l=Cp(a);if(!a)throw new Error("Icon is missing.");if(!a.url)throw new Error("Icon url is missing.");!n[l]&&(!r[l]||a.url!==r[l].url)&&(n[l]={...a,source:s,sourceIndex:o.index})}return n}class qTt{constructor(t,{onUpdate:r=vI,onError:n=vI}){P(this,"gl",void 0),P(this,"onUpdate",void 0),P(this,"onError",void 0),P(this,"_loadOptions",null),P(this,"_texture",null),P(this,"_externalTexture",null),P(this,"_mapping",{}),P(this,"_textureParameters",null),P(this,"_pendingCount",0),P(this,"_autoPacking",!1),P(this,"_xOffset",0),P(this,"_yOffset",0),P(this,"_rowHeight",0),P(this,"_buffer",UTt),P(this,"_canvasWidth",VTt),P(this,"_canvasHeight",0),P(this,"_canvas",null),this.gl=t,this.onUpdate=r,this.onError=n}finalize(){var t;(t=this._texture)===null||t===void 0||t.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(t){const r=this._autoPacking?Cp(t):t;return this._mapping[r]||{}}setProps({loadOptions:t,autoPacking:r,iconAtlas:n,iconMapping:i,textureParameters:o}){if(t&&(this._loadOptions=t),r!==void 0&&(this._autoPacking=r),i&&(this._mapping=i),n){var s;(s=this._texture)===null||s===void 0||s.delete(),this._texture=null,this._externalTexture=n}o&&(this._textureParameters=o)}get isLoaded(){return this._pendingCount===0}packIcons(t,r){if(!this._autoPacking||typeof document>"u")return;const n=Object.values(YTt(t,r,this._mapping)||{});if(n.length>0){const{mapping:i,xOffset:o,yOffset:s,rowHeight:a,canvasHeight:l}=XTt({icons:n,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=a,this._mapping=i,this._xOffset=o,this._yOffset=s,this._canvasHeight=l,this._texture||(this._texture=new wn(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||WTt})),this._texture.height!==this._canvasHeight&&(this._texture=HTt(this._texture,this._canvasWidth,this._canvasHeight)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(n)}}_loadIcons(t){const r=this._canvas.getContext("2d");for(const n of t)this._pendingCount++,c1(n.url,YB,this._loadOptions).then(i=>{const o=Cp(n),{x:s,y:a,width:l,height:u}=this._mapping[o],c=GTt(r,i,l,u);this._texture.setSubImageData({data:c,x:s,y:a,width:l,height:u}),this._texture.generateMipmap(),this.onUpdate()}).catch(i=>{this.onError({url:n.url,source:n.source,sourceIndex:n.sourceIndex,loadOptions:this._loadOptions,error:i})}).finally(()=>{this._pendingCount--})}}const EV=[0,0,0,255],ZTt={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:e=>e.position},getIcon:{type:"accessor",value:e=>e.icon},getColor:{type:"accessor",value:EV},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}};class gu extends Bo{constructor(...t){super(...t),P(this,"state",void 0)}getShaders(){return super.getShaders({vs:BTt,fs:$Tt,modules:[Ru,Du]})}initializeState(){this.state={iconManager:new qTt(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:EV},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(t){super.updateState(t);const{props:r,oldProps:n,changeFlags:i}=t,o=this.getAttributeManager(),{iconAtlas:s,iconMapping:a,data:l,getIcon:u,textureParameters:c}=r,{iconManager:f}=this.state,h=s||this.internalState.isAsyncPropLoading("iconAtlas");if(f.setProps({loadOptions:r.loadOptions,autoPacking:!h,iconAtlas:s,iconMapping:h?a:null,textureParameters:c}),h?n.iconMapping!==r.iconMapping&&o.invalidate("getIcon"):(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getIcon))&&f.packIcons(l,u),i.extensionsChanged){var d;const{gl:p}=this.context;(d=this.state.model)===null||d===void 0||d.delete(),this.state.model=this._getModel(p),o.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(t){super.finalizeState(t),this.state.iconManager.finalize()}draw({uniforms:t}){const{sizeScale:r,sizeMinPixels:n,sizeMaxPixels:i,sizeUnits:o,billboard:s,alphaCutoff:a}=this.props,{iconManager:l}=this.state,u=l.getTexture();u&&this.state.model.setUniforms(t).setUniforms({iconsTexture:u,iconsTextureDim:[u.width,u.height],sizeUnits:Na[o],sizeScale:r,sizeMinPixels:n,sizeMaxPixels:i,billboard:s,alphaCutoff:a}).draw()}_getModel(t){const r=[-1,-1,-1,1,1,1,1,-1];return new Ss(t,{...this.getShaders(),id:this.props.id,geometry:new Ou({drawMode:6,attributes:{positions:{size:2,value:new Float32Array(r)}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(t){var r;const n=(r=this.getCurrentLayer())===null||r===void 0?void 0:r.props.onIconError;n?n(t):Yt.error(t.error.message)()}getInstanceOffset(t){const{width:r,height:n,anchorX:i=r/2,anchorY:o=n/2}=this.state.iconManager.getIconMapping(t);return[r/2-i,n/2-o]}getInstanceColorMode(t){return this.state.iconManager.getIconMapping(t).mask?1:0}getInstanceIconFrame(t){const{x:r,y:n,width:i,height:o}=this.state.iconManager.getIconMapping(t);return[r,n,i,o]}}P(gu,"defaultProps",ZTt);P(gu,"layerName","IconLayer");const KTt=`#define SHADER_NAME line-layer-vertex-shader

attribute vec3 positions;
attribute vec3 instanceSourcePositions;
attribute vec3 instanceTargetPositions;
attribute vec3 instanceSourcePositions64Low;
attribute vec3 instanceTargetPositions64Low;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute float instanceWidths;

uniform float opacity;
uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float useShortestPath;
uniform int widthUnits;

varying vec4 vColor;
varying vec2 uv;

// offset vector by strokeWidth pixels
// offset_direction is -1 (left) or 1 (right)
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  return dir_screenspace * offset_direction * width / 2.0;
}

vec3 splitLine(vec3 a, vec3 b, float x) {
  float t = (x - a.x) / (b.x - a.x);
  return vec3(x, mix(a.yz, b.yz, t));
}

void main(void) {
  geometry.worldPosition = instanceSourcePositions;
  geometry.worldPositionAlt = instanceTargetPositions;

  vec3 source_world = instanceSourcePositions;
  vec3 target_world = instanceTargetPositions;
  vec3 source_world_64low = instanceSourcePositions64Low;
  vec3 target_world_64low = instanceTargetPositions64Low;

  if (useShortestPath > 0.5 || useShortestPath < -0.5) {
    source_world.x = mod(source_world.x + 180., 360.0) - 180.;
    target_world.x = mod(target_world.x + 180., 360.0) - 180.;
    float deltaLng = target_world.x - source_world.x;

    if (deltaLng * useShortestPath > 180.) {
      source_world.x += 360. * useShortestPath;
      source_world = splitLine(source_world, target_world, 180. * useShortestPath);
      source_world_64low = vec3(0.0);
    } else if (deltaLng * useShortestPath < -180.) {
      target_world.x += 360. * useShortestPath;
      target_world = splitLine(source_world, target_world, 180. * useShortestPath);
      target_world_64low = vec3(0.0);
    } else if (useShortestPath < 0.) {
      // Line is not split, abort
      gl_Position = vec4(0.);
      return;
    }
  }

  // Position
  vec4 source_commonspace;
  vec4 target_commonspace;
  vec4 source = project_position_to_clipspace(source_world, source_world_64low, vec3(0.), source_commonspace);
  vec4 target = project_position_to_clipspace(target_world, target_world_64low, vec3(0.), target_commonspace);
  
  // linear interpolation of source & target to pick right coord
  float segmentIndex = positions.x;
  vec4 p = mix(source, target, segmentIndex);
  geometry.position = mix(source_commonspace, target_commonspace, segmentIndex);
  uv = positions.xy;
  geometry.uv = uv;
  geometry.pickingColor = instancePickingColors;

  // Multiply out width and clamp to limits
  float widthPixels = clamp(
    project_size_to_pixel(instanceWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels
  );

  // extrude
  vec3 offset = vec3(
    getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels),
    0.0);
  DECKGL_FILTER_SIZE(offset, geometry);
  gl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Color
  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,JTt=`#define SHADER_NAME line-layer-fragment-shader

precision highp float;

varying vec4 vColor;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,QTt=[0,0,0,255],tkt={getSourcePosition:{type:"accessor",value:e=>e.sourcePosition},getTargetPosition:{type:"accessor",value:e=>e.targetPosition},getColor:{type:"accessor",value:QTt},getWidth:{type:"accessor",value:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}};class xE extends Bo{getShaders(){return super.getShaders({vs:KTt,fs:JTt,modules:[Ru,Du]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1}})}updateState(t){if(super.updateState(t),t.changeFlags.extensionsChanged){var r;const{gl:n}=this.context;(r=this.state.model)===null||r===void 0||r.delete(),this.state.model=this._getModel(n),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{widthUnits:r,widthScale:n,widthMinPixels:i,widthMaxPixels:o,wrapLongitude:s}=this.props;this.state.model.setUniforms(t).setUniforms({widthUnits:Na[r],widthScale:n,widthMinPixels:i,widthMaxPixels:o,useShortestPath:s?1:0}).draw(),s&&this.state.model.setUniforms({useShortestPath:-1}).draw()}_getModel(t){const r=[0,-1,0,0,1,0,1,-1,0,1,1,0];return new Ss(t,{...this.getShaders(),id:this.props.id,geometry:new Ou({drawMode:5,attributes:{positions:new Float32Array(r)}}),isInstanced:!0})}}P(xE,"layerName","LineLayer");P(xE,"defaultProps",tkt);const ekt=`#define SHADER_NAME scatterplot-layer-vertex-shader

attribute vec3 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceRadius;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform float radiusScale;
uniform float radiusMinPixels;
uniform float radiusMaxPixels;
uniform float lineWidthScale;
uniform float lineWidthMinPixels;
uniform float lineWidthMaxPixels;
uniform float stroked;
uniform bool filled;
uniform bool antialiasing;
uniform bool billboard;
uniform int radiusUnits;
uniform int lineWidthUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;


void main(void) {
  geometry.worldPosition = instancePositions;

  // Multiply out radius and clamp to limits
  outerRadiusPixels = clamp(
    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),
    radiusMinPixels, radiusMaxPixels
  );
  
  // Multiply out line width and clamp to limits
  float lineWidthPixels = clamp(
    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),
    lineWidthMinPixels, lineWidthMaxPixels
  );

  // outer radius needs to offset by half stroke width
  outerRadiusPixels += stroked * lineWidthPixels / 2.0;

  // Expand geometry to accomodate edge smoothing
  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;

  // position on the containing square in [-1, 1] space
  unitPosition = edgePadding * positions.xy;
  geometry.uv = unitPosition;
  geometry.pickingColor = instancePickingColors;

  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;
  
  if (billboard) {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = edgePadding * positions * outerRadiusPixels;
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
  }

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Apply opacity to instance color, or return instance picking color
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,rkt=`#define SHADER_NAME scatterplot-layer-fragment-shader

precision highp float;

uniform bool filled;
uniform float stroked;
uniform bool antialiasing;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;

void main(void) {
  geometry.uv = unitPosition;

  float distToCenter = length(unitPosition) * outerRadiusPixels;
  float inCircle = antialiasing ? 
    smoothedge(distToCenter, outerRadiusPixels) : 
    step(distToCenter, outerRadiusPixels);

  if (inCircle == 0.0) {
    discard;
  }

  if (stroked > 0.5) {
    float isLine = antialiasing ? 
      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
      step(innerUnitRadius * outerRadiusPixels, distToCenter);

    if (filled) {
      gl_FragColor = mix(vFillColor, vLineColor, isLine);
    } else {
      if (isLine == 0.0) {
        discard;
      }
      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
    }
  } else if (filled) {
    gl_FragColor = vFillColor;
  } else {
    discard;
  }

  gl_FragColor.a *= inCircle;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,mI=[0,0,0,255],nkt={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:e=>e.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:mI},getLineColor:{type:"accessor",value:mI},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class LE extends Bo{getShaders(){return super.getShaders({vs:ekt,fs:rkt,modules:[Ru,Du]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){if(super.updateState(t),t.changeFlags.extensionsChanged){var r;const{gl:n}=this.context;(r=this.state.model)===null||r===void 0||r.delete(),this.state.model=this._getModel(n),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{radiusUnits:r,radiusScale:n,radiusMinPixels:i,radiusMaxPixels:o,stroked:s,filled:a,billboard:l,antialiasing:u,lineWidthUnits:c,lineWidthScale:f,lineWidthMinPixels:h,lineWidthMaxPixels:d}=this.props;this.state.model.setUniforms(t).setUniforms({stroked:s?1:0,filled:a,billboard:l,antialiasing:u,radiusUnits:Na[r],radiusScale:n,radiusMinPixels:i,radiusMaxPixels:o,lineWidthUnits:Na[c],lineWidthScale:f,lineWidthMinPixels:h,lineWidthMaxPixels:d}).draw()}_getModel(t){const r=[-1,-1,0,1,-1,0,1,1,0,-1,1,0];return new Ss(t,{...this.getShaders(),id:this.props.id,geometry:new Ou({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array(r)}}}),isInstanced:!0})}}P(LE,"defaultProps",nkt);P(LE,"layerName","ScatterplotLayer");const CV={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function AV(e,t,r={}){return ikt(e,r)!==t?(skt(e,r),!0):!1}function ikt(e,t={}){return Math.sign(okt(e,t))}function okt(e,t={}){const{start:r=0,end:n=e.length}=t,i=t.size||2;let o=0;for(let s=r,a=n-i;s<n;s+=i)o+=(e[s]-e[a])*(e[s+1]+e[a+1]),a=s;return o/2}function skt(e,t){const{start:r=0,end:n=e.length,size:i=2}=t,o=(n-r)/i,s=Math.floor(o/2);for(let a=0;a<s;++a){const l=r+a*i,u=r+(o-1-a)*i;for(let c=0;c<i;++c){const f=e[l+c];e[l+c]=e[u+c],e[u+c]=f}}}function Ri(e,t){const r=t.length,n=e.length;if(n>0){let i=!0;for(let o=0;o<r;o++)if(e[n-r+o]!==t[o]){i=!1;break}if(i)return!1}for(let i=0;i<r;i++)e[n+i]=t[i];return!0}function bT(e,t){const r=t.length;for(let n=0;n<r;n++)e[n]=t[n]}function Ap(e,t,r,n,i=[]){const o=n+t*r;for(let s=0;s<r;s++)i[s]=e[o+s];return i}function wT(e,t,r,n,i=[]){let o,s;if(r&8)o=(n[3]-e[1])/(t[1]-e[1]),s=3;else if(r&4)o=(n[1]-e[1])/(t[1]-e[1]),s=1;else if(r&2)o=(n[2]-e[0])/(t[0]-e[0]),s=2;else if(r&1)o=(n[0]-e[0])/(t[0]-e[0]),s=0;else return null;for(let a=0;a<e.length;a++)i[a]=(s&1)===a?n[s]:o*(t[a]-e[a])+e[a];return i}function dm(e,t){let r=0;return e[0]<t[0]?r|=1:e[0]>t[2]&&(r|=2),e[1]<t[1]?r|=4:e[1]>t[3]&&(r|=8),r}function MV(e,t){const{size:r=2,broken:n=!1,gridResolution:i=10,gridOffset:o=[0,0],startIndex:s=0,endIndex:a=e.length}=t||{},l=(a-s)/r;let u=[];const c=[u],f=Ap(e,0,r,s);let h,d;const p=LV(f,i,o,[]),v=[];Ri(u,f);for(let m=1;m<l;m++){for(h=Ap(e,m,r,s,h),d=dm(h,p);d;){wT(f,h,d,p,v);const g=dm(v,p);g&&(wT(f,v,g,p,v),d=g),Ri(u,v),bT(f,v),lkt(p,i,d),n&&u.length>r&&(u=[],c.push(u),Ri(u,f)),d=dm(h,p)}Ri(u,h),bT(f,h)}return n?c:c[0]}const _I=0,akt=1;function Nv(e,t){for(let r=0;r<t.length;r++)e.push(t[r]);return e}function xV(e,t=null,r){if(!e.length)return[];const{size:n=2,gridResolution:i=10,gridOffset:o=[0,0],edgeTypes:s=!1}=r||{},a=[],l=[{pos:e,types:s?new Array(e.length/n).fill(akt):null,holes:t||[]}],u=[[],[]];let c=[];for(;l.length;){const{pos:f,types:h,holes:d}=l.shift();ukt(f,n,d[0]||f.length,u),c=LV(u[0],i,o,c);const p=dm(u[1],c);if(p){let v=yI(f,h,n,0,d[0]||f.length,c,p);const m={pos:v[0].pos,types:v[0].types,holes:[]},g={pos:v[1].pos,types:v[1].types,holes:[]};l.push(m,g);for(let _=0;_<d.length;_++)v=yI(f,h,n,d[_],d[_+1]||f.length,c,p),v[0]&&(m.holes.push(m.pos.length),m.pos=Nv(m.pos,v[0].pos),s&&(m.types=Nv(m.types,v[0].types))),v[1]&&(g.holes.push(g.pos.length),g.pos=Nv(g.pos,v[1].pos),s&&(g.types=Nv(g.types,v[1].types)))}else{const v={positions:f};s&&(v.edgeTypes=h),d.length&&(v.holeIndices=d),a.push(v)}}return a}function yI(e,t,r,n,i,o,s){const a=(i-n)/r,l=[],u=[],c=[],f=[],h=[];let d,p,v;const m=Ap(e,a-1,r,n);let g=Math.sign(s&8?m[1]-o[3]:m[0]-o[2]),_=t&&t[a-1],b=0,w=0;for(let T=0;T<a;T++)d=Ap(e,T,r,n,d),p=Math.sign(s&8?d[1]-o[3]:d[0]-o[2]),v=t&&t[n/r+T],p&&g&&g!==p&&(wT(m,d,s,o,h),Ri(l,h)&&c.push(_),Ri(u,h)&&f.push(_)),p<=0?(Ri(l,d)&&c.push(v),b-=p):c.length&&(c[c.length-1]=_I),p>=0?(Ri(u,d)&&f.push(v),w+=p):f.length&&(f[f.length-1]=_I),bT(m,d),g=p,_=v;return[b?{pos:l,types:t&&c}:null,w?{pos:u,types:t&&f}:null]}function LV(e,t,r,n){const i=Math.floor((e[0]-r[0])/t)*t+r[0],o=Math.floor((e[1]-r[1])/t)*t+r[1];return n[0]=i,n[1]=o,n[2]=i+t,n[3]=o+t,n}function lkt(e,t,r){r&8?(e[1]+=t,e[3]+=t):r&4?(e[1]-=t,e[3]-=t):r&2?(e[0]+=t,e[2]+=t):r&1&&(e[0]-=t,e[2]-=t)}function ukt(e,t,r,n){let i=1/0,o=-1/0,s=1/0,a=-1/0;for(let l=0;l<r;l+=t){const u=e[l],c=e[l+1];i=u<i?u:i,o=u>o?u:o,s=c<s?c:s,a=c>a?c:a}return n[0][0]=i,n[0][1]=s,n[1][0]=o,n[1][1]=a,n}const ckt=85.051129;function fkt(e,t){const{size:r=2,startIndex:n=0,endIndex:i=e.length,normalize:o=!0}=t||{},s=e.slice(n,i);IV(s,r,0,i-n);const a=MV(s,{size:r,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(o)for(const l of a)OV(l,r);return a}function hkt(e,t=null,r){const{size:n=2,normalize:i=!0,edgeTypes:o=!1}=r||{};t=t||[];const s=[],a=[];let l=0,u=0;for(let f=0;f<=t.length;f++){const h=t[f]||e.length,d=u,p=dkt(e,n,l,h);for(let v=p;v<h;v++)s[u++]=e[v];for(let v=l;v<p;v++)s[u++]=e[v];IV(s,n,d,u),pkt(s,n,d,u,r==null?void 0:r.maxLatitude),l=h,a[f]=u}a.pop();const c=xV(s,a,{size:n,gridResolution:360,gridOffset:[-180,-180],edgeTypes:o});if(i)for(const f of c)OV(f.positions,n);return c}function dkt(e,t,r,n){let i=-1,o=-1;for(let s=r+1;s<n;s+=t){const a=Math.abs(e[s]);a>i&&(i=a,o=s-1)}return o}function pkt(e,t,r,n,i=ckt){const o=e[r],s=e[n-t];if(Math.abs(o-s)>180){const a=Ap(e,0,t,r);a[0]+=Math.round((s-o)/360)*360,Ri(e,a),a[1]=Math.sign(a[1])*i,Ri(e,a),a[0]=o,Ri(e,a)}}function IV(e,t,r,n){let i=e[0],o;for(let s=r;s<n;s+=t){o=e[s];const a=o-i;(a>180||a<-180)&&(o-=Math.round(a/360)*360),e[s]=i=o}}function OV(e,t){let r;const n=e.length/t;for(let o=0;o<n&&(r=e[o*t],(r+180)%360===0);o++);const i=-Math.round(r/360)*360;if(i!==0)for(let o=0;o<n;o++)e[o*t]+=i}function vkt(e,t,r,n){let i;if(Array.isArray(e[0])){const o=e.length*t;i=new Array(o);for(let s=0;s<e.length;s++)for(let a=0;a<t;a++)i[s*t+a]=e[s][a]||0}else i=e;return r?MV(i,{size:t,gridResolution:r}):n?fkt(i,{size:t}):i}const gkt=1,mkt=2,Wb=4;class _kt extends PV{constructor(t){super({...t,attributes:{positions:{size:3,padding:18,initialize:!0,type:t.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(t){return this.attributes[t]}getGeometryFromBuffer(t){return this.normalize?super.getGeometryFromBuffer(t):null}normalizeGeometry(t){return this.normalize?vkt(t,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):t}getGeometrySize(t){if(bI(t)){let n=0;for(const i of t)n+=this.getGeometrySize(i);return n}const r=this.getPathLength(t);return r<2?0:this.isClosed(t)?r<3?0:r+2:r}updateGeometryAttributes(t,r){if(r.geometrySize!==0)if(t&&bI(t))for(const n of t){const i=this.getGeometrySize(n);r.geometrySize=i,this.updateGeometryAttributes(n,r),r.vertexStart+=i}else this._updateSegmentTypes(t,r),this._updatePositions(t,r)}_updateSegmentTypes(t,r){const n=this.attributes.segmentTypes,i=t?this.isClosed(t):!1,{vertexStart:o,geometrySize:s}=r;n.fill(0,o,o+s),i?(n[o]=Wb,n[o+s-2]=Wb):(n[o]+=gkt,n[o+s-2]+=mkt),n[o+s-1]=Wb}_updatePositions(t,r){const{positions:n}=this.attributes;if(!n||!t)return;const{vertexStart:i,geometrySize:o}=r,s=new Array(3);for(let a=i,l=0;l<o;a++,l++)this.getPointOnPath(t,l,s),n[a*3]=s[0],n[a*3+1]=s[1],n[a*3+2]=s[2]}getPathLength(t){return t.length/this.positionSize}getPointOnPath(t,r,n=[]){const{positionSize:i}=this;r*i>=t.length&&(r+=1-t.length/i);const o=r*i;return n[0]=t[o],n[1]=t[o+1],n[2]=i===3&&t[o+2]||0,n}isClosed(t){if(!this.normalize)return Boolean(this.opts.loop);const{positionSize:r}=this,n=t.length-r;return t[0]===t[n]&&t[1]===t[n+1]&&(r===2||t[2]===t[n+2])}}function bI(e){return Array.isArray(e[0])}const ykt=`#define SHADER_NAME path-layer-vertex-shader

attribute vec2 positions;

attribute float instanceTypes;
attribute vec3 instanceStartPositions;
attribute vec3 instanceEndPositions;
attribute vec3 instanceLeftPositions;
attribute vec3 instanceRightPositions;
attribute vec3 instanceLeftPositions64Low;
attribute vec3 instanceStartPositions64Low;
attribute vec3 instanceEndPositions64Low;
attribute vec3 instanceRightPositions64Low;
attribute float instanceStrokeWidths;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;

uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float jointType;
uniform float capType;
uniform float miterLimit;
uniform bool billboard;
uniform int widthUnits;

uniform float opacity;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

const float EPSILON = 0.001;
const vec3 ZERO_OFFSET = vec3(0.0);

float flipIfTrue(bool flag) {
  return -(float(flag) * 2. - 1.);
}

// calculate line join positions
vec3 lineJoin(
  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,
  vec2 width
) {
  bool isEnd = positions.x > 0.0;
  // side of the segment - -1: left, 0: center, 1: right
  float sideOfPath = positions.y;
  float isJoint = float(sideOfPath == 0.0);

  vec3 deltaA3 = (currPoint - prevPoint);
  vec3 deltaB3 = (nextPoint - currPoint);

  mat3 rotationMatrix;
  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);
  if (needsRotation) {
    deltaA3 = deltaA3 * rotationMatrix;
    deltaB3 = deltaB3 * rotationMatrix;
  }
  vec2 deltaA = deltaA3.xy / width;
  vec2 deltaB = deltaB3.xy / width;

  float lenA = length(deltaA);
  float lenB = length(deltaB);

  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);
  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);

  vec2 perpA = vec2(-dirA.y, dirA.x);
  vec2 perpB = vec2(-dirB.y, dirB.x);

  // tangent of the corner
  vec2 tangent = dirA + dirB;
  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;
  // direction of the corner
  vec2 miterVec = vec2(-tangent.y, tangent.x);
  // direction of the segment
  vec2 dir = isEnd ? dirA : dirB;
  // direction of the extrusion
  vec2 perp = isEnd ? perpA : perpB;
  // length of the segment
  float L = isEnd ? lenA : lenB;

  // A = angle of the corner
  float sinHalfA = abs(dot(miterVec, perp));
  float cosHalfA = abs(dot(dirA, miterVec));

  // -1: right, 1: left
  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);

  // relative position to the corner:
  // -1: inside (smaller side of the angle)
  // 0: center
  // 1: outside (bigger side of the angle)
  float cornerPosition = sideOfPath * turnDirection;

  float miterSize = 1.0 / max(sinHalfA, EPSILON);
  // trim if inside corner extends further than the line segment
  miterSize = mix(
    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),
    miterSize,
    step(0.0, cornerPosition)
  );

  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))
    * (sideOfPath + isJoint * turnDirection);

  // special treatment for start cap and end cap
  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));
  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));
  bool isCap = isStartCap || isEndCap;

  // extend out a triangle to envelope the round cap
  if (isCap) {
    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);
    vJointType = capType;
  } else {
    vJointType = jointType;
  }

  // Generate variables for fragment shader
  vPathLength = L;
  vCornerOffset = offsetVec;
  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);
  vMiterLength = isCap ? isJoint : vMiterLength;

  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);
  vPathPosition = vec2(
    dot(offsetFromStartOfPath, perp),
    dot(offsetFromStartOfPath, dir)
  );
  geometry.uv = vPathPosition;

  float isValid = step(instanceTypes, 3.5);
  vec3 offset = vec3(offsetVec * width * isValid, 0.0);

  if (needsRotation) {
    offset = rotationMatrix * offset;
  }
  return currPoint + offset;
}

// In clipspace extrusion, if a line extends behind the camera, clip it to avoid visual artifacts
void clipLine(inout vec4 position, vec4 refPosition) {
  if (position.w < EPSILON) {
    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);
    position = refPosition + (position - refPosition) * r;
  }
}

void main() {
  geometry.pickingColor = instancePickingColors;

  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);

  float isEnd = positions.x;

  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);
  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);

  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);
  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);

  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);
  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);

  geometry.worldPosition = currPosition;
  vec2 widthPixels = vec2(clamp(
    project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels) / 2.0);
  vec3 width;

  if (billboard) {
    // Extrude in clipspace
    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);
    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);
    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);

    clipLine(prevPositionScreen, currPositionScreen);
    clipLine(nextPositionScreen, currPositionScreen);
    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));

    width = vec3(widthPixels, 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec3 pos = lineJoin(
      prevPositionScreen.xyz / prevPositionScreen.w,
      currPositionScreen.xyz / currPositionScreen.w,
      nextPositionScreen.xyz / nextPositionScreen.w,
      project_pixel_size_to_clipspace(width.xy)
    );

    gl_Position = vec4(pos * currPositionScreen.w, currPositionScreen.w);
  } else {
    // Extrude in commonspace
    prevPosition = project_position(prevPosition, prevPosition64Low);
    currPosition = project_position(currPosition, currPosition64Low);
    nextPosition = project_position(nextPosition, nextPosition64Low);

    width = vec3(project_pixel_size(widthPixels), 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec4 pos = vec4(
      lineJoin(prevPosition, currPosition, nextPosition, width.xy),
      1.0);
    geometry.position = pos;
    gl_Position = project_common_position_to_clipspace(pos);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,bkt=`#define SHADER_NAME path-layer-fragment-shader

precision highp float;

uniform float miterLimit;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
/*
 * vPathPosition represents the relative coordinates of the current fragment on the path segment.
 * vPathPosition.x - position along the width of the path, between [-1, 1]. 0 is the center line.
 * vPathPosition.y - position along the length of the path, between [0, L / width].
 */
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

void main(void) {
  geometry.uv = vPathPosition;

  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {
    // if joint is rounded, test distance from the corner
    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {
      discard;
    }
    // trim miter
    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {
      discard;
    }
  }
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,RV=[0,0,0,255],wkt={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:e=>e.path},getColor:{type:"accessor",value:RV},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},jb={enter:(e,t)=>t.length?t.subarray(t.length-e.length):e};class IE extends Bo{constructor(...t){super(...t),P(this,"state",void 0)}getShaders(){return super.getShaders({vs:ykt,fs:bkt,modules:[Ru,Du]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:jb,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:jb,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:jb,defaultValue:RV},instancePickingColors:{size:3,type:5121,accessor:(n,{index:i,target:o})=>this.encodePickingColor(n&&n.__source?n.__source.index:i,o)}}),this.setState({pathTesselator:new _kt({fp64:this.use64bitPositions()})})}updateState(t){super.updateState(t);const{props:r,changeFlags:n}=t,i=this.getAttributeManager();if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPath)){const{pathTesselator:a}=this.state,l=r.data.attributes||{};a.updateGeometry({data:r.data,geometryBuffer:l.getPath,buffers:l,normalize:!r._pathType,loop:r._pathType==="loop",getGeometry:r.getPath,positionFormat:r.positionFormat,wrapLongitude:r.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:n.dataChanged}),this.setState({numInstances:a.instanceCount,startIndices:a.vertexStarts}),n.dataChanged||i.invalidateAll()}if(n.extensionsChanged){var s;const{gl:a}=this.context;(s=this.state.model)===null||s===void 0||s.delete(),this.state.model=this._getModel(a),i.invalidateAll()}}getPickingInfo(t){const r=super.getPickingInfo(t),{index:n}=r,{data:i}=this.props;return i[0]&&i[0].__source&&(r.object=i.find(o=>o.__source.index===n)),r}disablePickingIndex(t){const{data:r}=this.props;if(r[0]&&r[0].__source)for(let n=0;n<r.length;n++)r[n].__source.index===t&&this._disablePickingIndex(n);else this._disablePickingIndex(t)}draw({uniforms:t}){const{jointRounded:r,capRounded:n,billboard:i,miterLimit:o,widthUnits:s,widthScale:a,widthMinPixels:l,widthMaxPixels:u}=this.props;this.state.model.setUniforms(t).setUniforms({jointType:Number(r),capType:Number(n),billboard:i,widthUnits:Na[s],widthScale:a,miterLimit:o,widthMinPixels:l,widthMaxPixels:u}).draw()}_getModel(t){const r=[0,1,2,1,4,2,1,3,4,3,5,4],n=[0,0,0,-1,0,1,1,-1,1,1,1,0];return new Ss(t,{...this.getShaders(),id:this.props.id,geometry:new Ou({drawMode:4,attributes:{indices:new Uint16Array(r),positions:{value:new Float32Array(n),size:2}}}),isInstanced:!0})}calculatePositions(t){const{pathTesselator:r}=this.state;t.startIndices=r.vertexStarts,t.value=r.get("positions")}calculateSegmentTypes(t){const{pathTesselator:r}=this.state;t.startIndices=r.vertexStarts,t.value=r.get("segmentTypes")}}P(IE,"defaultProps",wkt);P(IE,"layerName","PathLayer");var OE={exports:{}};OE.exports=$_;OE.exports.default=$_;function $_(e,t,r){r=r||2;var n=t&&t.length,i=n?t[0]*r:e.length,o=DV(e,0,i,r,!0),s=[];if(!o||o.next===o.prev)return s;var a,l,u,c,f,h,d;if(n&&(o=Ekt(e,t,o,r)),e.length>80*r){a=u=e[0],l=c=e[1];for(var p=r;p<i;p+=r)f=e[p],h=e[p+1],f<a&&(a=f),h<l&&(l=h),f>u&&(u=f),h>c&&(c=h);d=Math.max(u-a,c-l),d=d!==0?32767/d:0}return Mp(o,s,r,a,l,d,0),s}function DV(e,t,r,n,i){var o,s;if(i===kT(e,t,r,n)>0)for(o=t;o<r;o+=n)s=wI(o,e[o],e[o+1],s);else for(o=r-n;o>=t;o-=n)s=wI(o,e[o],e[o+1],s);return s&&V_(s,s.next)&&(Lp(s),s=s.next),s}function mu(e,t){if(!e)return e;t||(t=e);var r=e,n;do if(n=!1,!r.steiner&&(V_(r,r.next)||je(r.prev,r,r.next)===0)){if(Lp(r),r=t=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==t);return t}function Mp(e,t,r,n,i,o,s){if(!!e){!s&&o&&Lkt(e,n,i,o);for(var a=e,l,u;e.prev!==e.next;){if(l=e.prev,u=e.next,o?Tkt(e,n,i,o):Skt(e)){t.push(l.i/r|0),t.push(e.i/r|0),t.push(u.i/r|0),Lp(e),e=u.next,a=u.next;continue}if(e=u,e===a){s?s===1?(e=kkt(mu(e),t,r),Mp(e,t,r,n,i,o,2)):s===2&&Pkt(e,t,r,n,i,o):Mp(mu(e),t,r,n,i,o,1);break}}}}function Skt(e){var t=e.prev,r=e,n=e.next;if(je(t,r,n)>=0)return!1;for(var i=t.x,o=r.x,s=n.x,a=t.y,l=r.y,u=n.y,c=i<o?i<s?i:s:o<s?o:s,f=a<l?a<u?a:u:l<u?l:u,h=i>o?i>s?i:s:o>s?o:s,d=a>l?a>u?a:u:l>u?l:u,p=n.next;p!==t;){if(p.x>=c&&p.x<=h&&p.y>=f&&p.y<=d&&zc(i,a,o,l,s,u,p.x,p.y)&&je(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Tkt(e,t,r,n){var i=e.prev,o=e,s=e.next;if(je(i,o,s)>=0)return!1;for(var a=i.x,l=o.x,u=s.x,c=i.y,f=o.y,h=s.y,d=a<l?a<u?a:u:l<u?l:u,p=c<f?c<h?c:h:f<h?f:h,v=a>l?a>u?a:u:l>u?l:u,m=c>f?c>h?c:h:f>h?f:h,g=ST(d,p,t,r,n),_=ST(v,m,t,r,n),b=e.prevZ,w=e.nextZ;b&&b.z>=g&&w&&w.z<=_;){if(b.x>=d&&b.x<=v&&b.y>=p&&b.y<=m&&b!==i&&b!==s&&zc(a,c,l,f,u,h,b.x,b.y)&&je(b.prev,b,b.next)>=0||(b=b.prevZ,w.x>=d&&w.x<=v&&w.y>=p&&w.y<=m&&w!==i&&w!==s&&zc(a,c,l,f,u,h,w.x,w.y)&&je(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;b&&b.z>=g;){if(b.x>=d&&b.x<=v&&b.y>=p&&b.y<=m&&b!==i&&b!==s&&zc(a,c,l,f,u,h,b.x,b.y)&&je(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;w&&w.z<=_;){if(w.x>=d&&w.x<=v&&w.y>=p&&w.y<=m&&w!==i&&w!==s&&zc(a,c,l,f,u,h,w.x,w.y)&&je(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function kkt(e,t,r){var n=e;do{var i=n.prev,o=n.next.next;!V_(i,o)&&NV(i,n,n.next,o)&&xp(i,o)&&xp(o,i)&&(t.push(i.i/r|0),t.push(n.i/r|0),t.push(o.i/r|0),Lp(n),Lp(n.next),n=e=o),n=n.next}while(n!==e);return mu(n)}function Pkt(e,t,r,n,i,o){var s=e;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&Rkt(s,a)){var l=FV(s,a);s=mu(s,s.next),l=mu(l,l.next),Mp(s,t,r,n,i,o,0),Mp(l,t,r,n,i,o,0);return}a=a.next}s=s.next}while(s!==e)}function Ekt(e,t,r,n){var i=[],o,s,a,l,u;for(o=0,s=t.length;o<s;o++)a=t[o]*n,l=o<s-1?t[o+1]*n:e.length,u=DV(e,a,l,n,!1),u===u.next&&(u.steiner=!0),i.push(Okt(u));for(i.sort(Ckt),o=0;o<i.length;o++)r=Akt(i[o],r);return r}function Ckt(e,t){return e.x-t.x}function Akt(e,t){var r=Mkt(e,t);if(!r)return t;var n=FV(r,e);return mu(n,n.next),mu(r,r.next)}function Mkt(e,t){var r=t,n=e.x,i=e.y,o=-1/0,s;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var a=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&a>o&&(o=a,s=r.x<r.next.x?r:r.next,a===n))return s}r=r.next}while(r!==t);if(!s)return null;var l=s,u=s.x,c=s.y,f=1/0,h;r=s;do n>=r.x&&r.x>=u&&n!==r.x&&zc(i<c?n:o,i,u,c,i<c?o:n,i,r.x,r.y)&&(h=Math.abs(i-r.y)/(n-r.x),xp(r,e)&&(h<f||h===f&&(r.x>s.x||r.x===s.x&&xkt(s,r)))&&(s=r,f=h)),r=r.next;while(r!==l);return s}function xkt(e,t){return je(e.prev,e,t.prev)<0&&je(t.next,e,e.next)<0}function Lkt(e,t,r,n){var i=e;do i.z===0&&(i.z=ST(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,Ikt(i)}function Ikt(e){var t,r,n,i,o,s,a,l,u=1;do{for(r=e,e=null,o=null,s=0;r;){for(s++,n=r,a=0,t=0;t<u&&(a++,n=n.nextZ,!!n);t++);for(l=u;a>0||l>0&&n;)a!==0&&(l===0||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,u*=2}while(s>1);return e}function ST(e,t,r,n,i){return e=(e-r)*i|0,t=(t-n)*i|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function Okt(e){var t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function zc(e,t,r,n,i,o,s,a){return(i-s)*(t-a)>=(e-s)*(o-a)&&(e-s)*(n-a)>=(r-s)*(t-a)&&(r-s)*(o-a)>=(i-s)*(n-a)}function Rkt(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!Dkt(e,t)&&(xp(e,t)&&xp(t,e)&&Nkt(e,t)&&(je(e.prev,e,t.prev)||je(e,t.prev,t))||V_(e,t)&&je(e.prev,e,e.next)>0&&je(t.prev,t,t.next)>0)}function je(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function V_(e,t){return e.x===t.x&&e.y===t.y}function NV(e,t,r,n){var i=zv(je(e,t,r)),o=zv(je(e,t,n)),s=zv(je(r,n,e)),a=zv(je(r,n,t));return!!(i!==o&&s!==a||i===0&&Fv(e,r,t)||o===0&&Fv(e,n,t)||s===0&&Fv(r,e,n)||a===0&&Fv(r,t,n))}function Fv(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function zv(e){return e>0?1:e<0?-1:0}function Dkt(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&NV(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function xp(e,t){return je(e.prev,e,e.next)<0?je(e,t,e.next)>=0&&je(e,e.prev,t)>=0:je(e,t,e.prev)<0||je(e,e.next,t)<0}function Nkt(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==e);return n}function FV(e,t){var r=new TT(e.i,e.x,e.y),n=new TT(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function wI(e,t,r,n){var i=new TT(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Lp(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function TT(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}$_.deviation=function(e,t,r,n){var i=t&&t.length,o=i?t[0]*r:e.length,s=Math.abs(kT(e,0,o,r));if(i)for(var a=0,l=t.length;a<l;a++){var u=t[a]*r,c=a<l-1?t[a+1]*r:e.length;s-=Math.abs(kT(e,u,c,r))}var f=0;for(a=0;a<n.length;a+=3){var h=n[a]*r,d=n[a+1]*r,p=n[a+2]*r;f+=Math.abs((e[h]-e[p])*(e[d+1]-e[h+1])-(e[h]-e[d])*(e[p+1]-e[h+1]))}return s===0&&f===0?0:Math.abs((f-s)/s)};function kT(e,t,r,n){for(var i=0,o=t,s=r-n;o<r;o+=n)i+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return i}$_.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var s=0;s<t;s++)r.vertices.push(e[i][o][s]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r};const Bv=CV.CLOCKWISE,SI=CV.COUNTER_CLOCKWISE,ya={isClosed:!0};function Fkt(e){if(e=e&&e.positions||e,!Array.isArray(e)&&!ArrayBuffer.isView(e))throw new Error("invalid polygon")}function pd(e){return"positions"in e?e.positions:e}function pm(e){return"holeIndices"in e?e.holeIndices:null}function zkt(e){return Array.isArray(e[0])}function Bkt(e){return e.length>=1&&e[0].length>=2&&Number.isFinite(e[0][0])}function $kt(e){const t=e[0],r=e[e.length-1];return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]}function Vkt(e,t,r,n){for(let i=0;i<t;i++)if(e[r+i]!==e[n-t+i])return!1;return!0}function TI(e,t,r,n,i){let o=t;const s=r.length;for(let a=0;a<s;a++)for(let l=0;l<n;l++)e[o++]=r[a][l]||0;if(!$kt(r))for(let a=0;a<n;a++)e[o++]=r[0][a]||0;return ya.start=t,ya.end=o,ya.size=n,AV(e,i,ya),o}function kI(e,t,r,n,i=0,o,s){o=o||r.length;const a=o-i;if(a<=0)return t;let l=t;for(let u=0;u<a;u++)e[l++]=r[i+u];if(!Vkt(r,n,i,o))for(let u=0;u<n;u++)e[l++]=r[i+u];return ya.start=t,ya.end=l,ya.size=n,AV(e,s,ya),l}function Ukt(e,t){Fkt(e);const r=[],n=[];if("positions"in e){const{positions:i,holeIndices:o}=e;if(o){let s=0;for(let a=0;a<=o.length;a++)s=kI(r,s,i,t,o[a-1],o[a],a===0?Bv:SI),n.push(s);return n.pop(),{positions:r,holeIndices:n}}e=i}if(!zkt(e))return kI(r,0,e,t,0,r.length,Bv),r;if(!Bkt(e)){let i=0;for(const[o,s]of e.entries())i=TI(r,i,s,t,o===0?Bv:SI),n.push(i);return n.pop(),{positions:r,holeIndices:n}}return TI(r,0,e,t,Bv),r}function Wkt(e,t,r){let n=pm(e);n&&(n=n.map(o=>o/t));let i=pd(e);if(r){const o=i.length;i=i.slice();const s=[];for(let a=0;a<o;a+=t){s[0]=i[a],s[1]=i[a+1];const l=r(s);i[a]=l[0],i[a+1]=l[1]}}return OE.exports(i,n,t)}class jkt extends PV{constructor(t){const{fp64:r,IndexType:n=Uint32Array}=t;super({...t,attributes:{positions:{size:3,type:r?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:n,size:1}}})}get(t){const{attributes:r}=this;return t==="indices"?r.indices&&r.indices.subarray(0,this.vertexCount):r[t]}updateGeometry(t){super.updateGeometry(t);const r=this.buffers.indices;if(r)this.vertexCount=(r.value||r).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(t){if(this.normalize){const r=Ukt(t,this.positionSize);return this.opts.resolution?xV(pd(r),pm(r),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?hkt(pd(r),pm(r),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):r}return t}getGeometrySize(t){if(PI(t)){let r=0;for(const n of t)r+=this.getGeometrySize(n);return r}return pd(t).length/this.positionSize}getGeometryFromBuffer(t){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(t):null}updateGeometryAttributes(t,r){if(t&&PI(t))for(const n of t){const i=this.getGeometrySize(n);r.geometrySize=i,this.updateGeometryAttributes(n,r),r.vertexStart+=i,r.indexStart=this.indexStarts[r.geometryIndex+1]}else this._updateIndices(t,r),this._updatePositions(t,r),this._updateVertexValid(t,r)}_updateIndices(t,{geometryIndex:r,vertexStart:n,indexStart:i}){const{attributes:o,indexStarts:s,typedArrayManager:a}=this;let l=o.indices;if(!l||!t)return;let u=i;const c=Wkt(t,this.positionSize,this.opts.preproject);l=a.allocate(l,i+c.length,{copy:!0});for(let f=0;f<c.length;f++)l[u++]=c[f]+n;s[r+1]=i+c.length,o.indices=l}_updatePositions(t,{vertexStart:r,geometrySize:n}){const{attributes:{positions:i},positionSize:o}=this;if(!i||!t)return;const s=pd(t);for(let a=r,l=0;l<n;a++,l++){const u=s[l*o],c=s[l*o+1],f=o>2?s[l*o+2]:0;i[a*3]=u,i[a*3+1]=c,i[a*3+2]=f}}_updateVertexValid(t,{vertexStart:r,geometrySize:n}){const{positionSize:i}=this,o=this.attributes.vertexValid,s=t&&pm(t);if(t&&t.edgeTypes?o.set(t.edgeTypes,r):o.fill(1,r,r+n),s)for(let a=0;a<s.length;a++)o[r+s[a]/i-1]=0;o[r+n-1]=0}}function PI(e){return Array.isArray(e)&&e.length>0&&!Number.isFinite(e[0])}const zV=`
attribute vec2 vertexPositions;
attribute float vertexValid;

uniform bool extruded;
uniform bool isWireframe;
uniform float elevationScale;
uniform float opacity;

varying vec4 vColor;

struct PolygonProps {
  vec4 fillColors;
  vec4 lineColors;
  vec3 positions;
  vec3 nextPositions;
  vec3 pickingColors;
  vec3 positions64Low;
  vec3 nextPositions64Low;
  float elevations;
};

vec3 project_offset_normal(vec3 vector) {
  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * project_uCommonUnitsPerWorldUnit);
  }
  return project_normal(vector);
}

void calculatePosition(PolygonProps props) {
#ifdef IS_SIDE_VERTEX
  if(vertexValid < 0.5){
    gl_Position = vec4(0.);
    return;
  }
#endif

  vec3 pos;
  vec3 pos64Low;
  vec3 normal;
  vec4 colors = isWireframe ? props.lineColors : props.fillColors;

  geometry.worldPosition = props.positions;
  geometry.worldPositionAlt = props.nextPositions;
  geometry.pickingColor = props.pickingColors;

#ifdef IS_SIDE_VERTEX
  pos = mix(props.positions, props.nextPositions, vertexPositions.x);
  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);
#else
  pos = props.positions;
  pos64Low = props.positions64Low;
#endif

  if (extruded) {
    pos.z += props.elevations * vertexPositions.y * elevationScale;
  }
  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  if (extruded) {
  #ifdef IS_SIDE_VERTEX
    normal = vec3(
      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),
      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),
      0.0);
    normal = project_offset_normal(normal);
  #else
    normal = project_normal(vec3(0.0, 0.0, 1.0));
  #endif
    geometry.normal = normal;
    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);
    vColor = vec4(lightColor, colors.a * opacity);
  } else {
    vColor = vec4(colors.rgb, colors.a * opacity);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,Gkt=`#define SHADER_NAME solid-polygon-layer-vertex-shader

attribute vec3 positions;
attribute vec3 positions64Low;
attribute float elevations;
attribute vec4 fillColors;
attribute vec4 lineColors;
attribute vec3 pickingColors;

`.concat(zV,`

void main(void) {
  PolygonProps props;

  props.positions = positions;
  props.positions64Low = positions64Low;
  props.elevations = elevations;
  props.fillColors = fillColors;
  props.lineColors = lineColors;
  props.pickingColors = pickingColors;

  calculatePosition(props);
}
`),Hkt=`#define SHADER_NAME solid-polygon-layer-vertex-shader-side
#define IS_SIDE_VERTEX


attribute vec3 instancePositions;
attribute vec3 nextPositions;
attribute vec3 instancePositions64Low;
attribute vec3 nextPositions64Low;
attribute float instanceElevations;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

`.concat(zV,`

void main(void) {
  PolygonProps props;

  #if RING_WINDING_ORDER_CW == 1
    props.positions = instancePositions;
    props.positions64Low = instancePositions64Low;
    props.nextPositions = nextPositions;
    props.nextPositions64Low = nextPositions64Low;
  #else
    props.positions = nextPositions;
    props.positions64Low = nextPositions64Low;
    props.nextPositions = instancePositions;
    props.nextPositions64Low = instancePositions64Low;
  #endif
  props.elevations = instanceElevations;
  props.fillColors = instanceFillColors;
  props.lineColors = instanceLineColors;
  props.pickingColors = instancePickingColors;

  calculatePosition(props);
}
`),Xkt=`#define SHADER_NAME solid-polygon-layer-fragment-shader

precision highp float;

varying vec4 vColor;

void main(void) {
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,w1=[0,0,0,255],Ykt={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:e=>e.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:w1},getLineColor:{type:"accessor",value:w1},material:!0},$v={enter:(e,t)=>t.length?t.subarray(t.length-e.length):e};class RE extends Bo{constructor(...t){super(...t),P(this,"state",void 0)}getShaders(t){return super.getShaders({vs:t==="top"?Gkt:Hkt,fs:Xkt,defines:{RING_WINDING_ORDER_CW:!this.props._normalize&&this.props._windingOrder==="CCW"?0:1},modules:[Ru,ibt,Du]})}get wrapLongitude(){return!1}initializeState(){const{gl:t,viewport:r}=this.context;let{coordinateSystem:n}=this.props;r.isGeospatial&&n===se.DEFAULT&&(n=se.LNGLAT),this.setState({numInstances:0,polygonTesselator:new jkt({preproject:n===se.LNGLAT&&r.projectFlat.bind(r),fp64:this.use64bitPositions(),IndexType:!t||dE(t,Be.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});const i=this.getAttributeManager(),o=!0;i.remove(["instancePickingColors"]),i.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:o},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:$v,accessor:"getPolygon",update:this.calculatePositions,noAlloc:o,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:o},elevations:{size:1,transition:$v,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:$v,accessor:"getFillColor",defaultValue:w1,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:$v,accessor:"getLineColor",defaultValue:w1,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:(s,{index:a,target:l})=>this.encodePickingColor(s&&s.__source?s.__source.index:a,l),shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}getPickingInfo(t){const r=super.getPickingInfo(t),{index:n}=r,{data:i}=this.props;return i[0]&&i[0].__source&&(r.object=i.find(o=>o.__source.index===n)),r}disablePickingIndex(t){const{data:r}=this.props;if(r[0]&&r[0].__source)for(let n=0;n<r.length;n++)r[n].__source.index===t&&this._disablePickingIndex(n);else this._disablePickingIndex(t)}draw({uniforms:t}){const{extruded:r,filled:n,wireframe:i,elevationScale:o}=this.props,{topModel:s,sideModel:a,polygonTesselator:l}=this.state,u={...t,extruded:Boolean(r),elevationScale:o};a&&(a.setInstanceCount(l.instanceCount-1),a.setUniforms(u),i&&(a.setDrawMode(3),a.setUniforms({isWireframe:!0}).draw()),n&&(a.setDrawMode(6),a.setUniforms({isWireframe:!1}).draw())),s&&(s.setVertexCount(l.vertexCount),s.setUniforms(u).draw())}updateState(t){super.updateState(t),this.updateGeometry(t);const{props:r,oldProps:n,changeFlags:i}=t,o=this.getAttributeManager();if(i.extensionsChanged||r.filled!==n.filled||r.extruded!==n.extruded){var a;(a=this.state.models)===null||a===void 0||a.forEach(l=>l.delete()),this.setState(this._getModels(this.context.gl)),o.invalidateAll()}}updateGeometry({props:t,oldProps:r,changeFlags:n}){if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon)){const{polygonTesselator:o}=this.state,s=t.data.attributes||{};o.updateGeometry({data:t.data,normalize:t._normalize,geometryBuffer:s.getPolygon,buffers:s,getGeometry:t.getPolygon,positionFormat:t.positionFormat,wrapLongitude:t.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:n.dataChanged}),this.setState({numInstances:o.instanceCount,startIndices:o.vertexStarts}),n.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(t){const{id:r,filled:n,extruded:i}=this.props;let o,s;if(n){const a=this.getShaders("top");a.defines.NON_INSTANCED_MODEL=1,o=new Ss(t,{...a,id:"".concat(r,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0})}return i&&(s=new Ss(t,{...this.getShaders("side"),id:"".concat(r,"-side"),geometry:new Ou({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}),s.userData.excludeAttributes={indices:!0}),{models:[s,o].filter(Boolean),topModel:o,sideModel:s}}calculateIndices(t){const{polygonTesselator:r}=this.state;t.startIndices=r.indexStarts,t.value=r.get("indices")}calculatePositions(t){const{polygonTesselator:r}=this.state;t.startIndices=r.vertexStarts,t.value=r.get("positions")}calculateVertexValid(t){t.value=this.state.polygonTesselator.get("vertexValid")}}P(RE,"defaultProps",Ykt);P(RE,"layerName","SolidPolygonLayer");function qkt({data:e,getIndex:t,dataRange:r,replace:n}){const{startRow:i=0,endRow:o=1/0}=r,s=e.length;let a=s,l=s;for(let h=0;h<s;h++){const d=t(e[h]);if(a>h&&d>=i&&(a=h),d>=o){l=h;break}}let u=a;const f=l-a!==n.length?e.slice(l):void 0;for(let h=0;h<n.length;h++)e[u++]=n[h];if(f){for(let h=0;h<f.length;h++)e[u++]=f[h];e.length=u}return{startRow:a,endRow:a+n.length}}function Zkt(e,t){if(!e)return null;const r="startIndices"in e?e.startIndices[t]:t,n=e.featureIds.value[r];return r!==-1?Kkt(e,n,r):null}function Kkt(e,t,r){const n={properties:{...e.properties[t]}};for(const i in e.numericProps)n.properties[i]=e.numericProps[i].value[r];return n}function Jkt(e,t){const r={points:null,lines:null,polygons:null};for(const n in r){const i=e[n].globalFeatureIds.value;r[n]=new Uint8ClampedArray(i.length*3);const o=[];for(let s=0;s<i.length;s++)t(i[s],o),r[n][s*3+0]=o[0],r[n][s*3+1]=o[1],r[n][s*3+2]=o[2]}return r}const Qkt=`#define SHADER_NAME multi-icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float gamma;
uniform bool sdf;
uniform float alphaCutoff;
uniform float buffer;
uniform float outlineBuffer;
uniform vec4 outlineColor;

varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  if (!picking_uActive) {
    float alpha = texture2D(iconsTexture, vTextureCoords).a;
    vec4 color = vColor;

    // if enable sdf (signed distance fields)
    if (sdf) {
      float distance = alpha;
      alpha = smoothstep(buffer - gamma, buffer + gamma, distance);

      if (outlineBuffer > 0.0) {
        float inFill = alpha;
        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);
        color = mix(outlineColor, vColor, inFill);
        alpha = inBorder;
      }
    }

    // Take the global opacity and the alpha from color into account for the alpha component
    float a = alpha * color.a;
    
    if (a < alphaCutoff) {
      discard;
    }

    gl_FragColor = vec4(color.rgb, a * opacity);
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,EI=192/256,CI=[],tPt={getIconOffsets:{type:"accessor",value:e=>e.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}};class DE extends gu{constructor(...t){super(...t),P(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:Qkt}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(r,{index:n,target:i})=>this.encodePickingColor(n,i)}})}updateState(t){super.updateState(t);const{props:r,oldProps:n}=t;let{outlineColor:i}=r;i!==n.outlineColor&&(i=i.map(o=>o/255),i[3]=Number.isFinite(i[3])?i[3]:1,this.setState({outlineColor:i})),!r.sdf&&r.outlineWidth&&Yt.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(t){const{sdf:r,smoothing:n,outlineWidth:i}=this.props,{outlineColor:o}=this.state;t.uniforms={...t.uniforms,buffer:EI,outlineBuffer:i?Math.max(n,EI*(1-i)):-1,gamma:n,sdf:Boolean(r),outlineColor:o},super.draw(t)}getInstanceOffset(t){return t?Array.from(t).flatMap(r=>super.getInstanceOffset(r)):CI}getInstanceColorMode(t){return 1}getInstanceIconFrame(t){return t?Array.from(t).flatMap(r=>super.getInstanceIconFrame(r)):CI}}P(DE,"defaultProps",tPt);P(DE,"layerName","MultiIconLayer");var NE={exports:{}};NE.exports=i0;NE.exports.default=i0;var Qc=1e20;function i0(e,t,r,n,i,o){this.fontSize=e||24,this.buffer=t===void 0?3:t,this.cutoff=n||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=r||8;var s=this.size=this.fontSize+this.buffer*2,a=s+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=s,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Uint16Array(a),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(s/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function ePt(e,t,r,n,i,o,s){o.fill(Qc,0,t*r),s.fill(0,0,t*r);for(var a=(t-n)/2,l=0;l<i;l++)for(var u=0;u<n;u++){var c=(l+a)*t+u+a,f=e.data[4*(l*n+u)+3]/255;if(f===1)o[c]=0,s[c]=Qc;else if(f===0)o[c]=Qc,s[c]=0;else{var h=Math.max(0,.5-f),d=Math.max(0,f-.5);o[c]=h*h,s[c]=d*d}}}function rPt(e,t,r,n,i,o,s){for(var a=0;a<t*r;a++){var l=Math.sqrt(n[a])-Math.sqrt(i[a]);e[a]=Math.round(255-255*(l/o+s))}}i0.prototype._draw=function(e,t){var r=this.ctx.measureText(e),n=r.width,i=2*this.buffer,o,s,a,l,u,c,f,h;t&&this.useMetrics?(u=Math.floor(r.actualBoundingBoxAscent),h=this.buffer+Math.ceil(r.actualBoundingBoxAscent),c=this.buffer,f=this.buffer,s=Math.min(this.size,Math.ceil(r.actualBoundingBoxRight-r.actualBoundingBoxLeft)),l=Math.min(this.size-c,Math.ceil(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)),o=s+i,a=l+i,this.ctx.textBaseline="alphabetic"):(o=s=this.size,a=l=this.size,u=19*this.fontSize/24,c=f=0,h=this.middle,this.ctx.textBaseline="middle");var d;s&&l&&(this.ctx.clearRect(f,c,s,l),this.ctx.fillText(e,this.buffer,h),d=this.ctx.getImageData(f,c,s,l));var p=new Uint8ClampedArray(o*a);return ePt(d,o,a,s,l,this.gridOuter,this.gridInner),AI(this.gridOuter,o,a,this.f,this.v,this.z),AI(this.gridInner,o,a,this.f,this.v,this.z),rPt(p,o,a,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:p,metrics:{width:s,height:l,sdfWidth:o,sdfHeight:a,top:u,left:0,advance:n}}};i0.prototype.draw=function(e){return this._draw(e,!1).data};i0.prototype.drawWithMetrics=function(e){return this._draw(e,!0)};function AI(e,t,r,n,i,o){for(var s=0;s<t;s++)MI(e,s,t,r,n,i,o);for(var a=0;a<r;a++)MI(e,a*t,1,t,n,i,o)}function MI(e,t,r,n,i,o,s){var a,l,u,c;for(o[0]=0,s[0]=-Qc,s[1]=Qc,a=0;a<n;a++)i[a]=e[t+a*r];for(a=1,l=0,u=0;a<n;a++){do c=o[l],u=(i[a]-i[c]+a*a-c*c)/(a-c)/2;while(u<=s[l]&&--l>-1);l++,o[l]=a,s[l]=u,s[l+1]=Qc}for(a=0,l=0;a<n;a++){for(;s[l+1]<a;)l++;c=o[l],e[t+a*r]=i[c]+(a-c)*(a-c)}}const nPt=32,iPt=[];function oPt(e){return Math.pow(2,Math.ceil(Math.log2(e)))}function sPt({characterSet:e,getFontWidth:t,fontHeight:r,buffer:n,maxCanvasWidth:i,mapping:o={},xOffset:s=0,yOffset:a=0}){let l=0,u=s;for(const f of e)if(!o[f]){const h=t(f);u+h+n*2>i&&(u=0,l++),o[f]={x:u+n,y:a+l*(r+n*2)+n,width:h,height:r},u+=h+n*2}const c=r+n*2;return{mapping:o,xOffset:u,yOffset:a+l*c,canvasHeight:oPt(a+(l+1)*c)}}function BV(e,t,r,n){let i=0;for(let s=t;s<r;s++){var o;const a=e[s];i+=((o=n[a])===null||o===void 0?void 0:o.width)||0}return i}function $V(e,t,r,n,i,o){let s=t,a=0;for(let l=t;l<r;l++){const u=BV(e,l,l+1,i);a+u>n&&(s<l&&o.push(l),s=l,a=0),a+=u}return a}function aPt(e,t,r,n,i,o){let s=t,a=t,l=t,u=0;for(let c=t;c<r;c++)if((e[c]===" "||e[c+1]===" "||c+1===r)&&(l=c+1),l>a){let f=BV(e,a,l,i);u+f>n&&(s<a&&(o.push(a),s=a,u=0),f>n&&(f=$V(e,a,l,n,i,o),s=o[o.length-1])),a=l,u+=f}return u}function lPt(e,t,r,n,i=0,o){o===void 0&&(o=e.length);const s=[];return t==="break-all"?$V(e,i,o,r,n,s):aPt(e,i,o,r,n,s),s}function uPt(e,t,r,n,i,o){let s=0,a=0;for(let l=t;l<r;l++){const u=e[l],c=n[u];c?(a||(a=c.height),i[l]=s+c.width/2,s+=c.width):(Yt.warn("Missing character: ".concat(u," (").concat(u.codePointAt(0),")"))(),i[l]=s,s+=nPt)}o[0]=s,o[1]=a}function xI(e,t,r,n,i){const o=Array.from(e),s=o.length,a=new Array(s),l=new Array(s),u=new Array(s),c=(r==="break-word"||r==="break-all")&&isFinite(n)&&n>0,f=[0,0],h=[0,0];let d=0,p=0,v=0;for(let m=0;m<=s;m++){const g=o[m];if((g===`
`||m===s)&&(v=m),v>p){const _=c?lPt(o,r,n,i,p,v):iPt;for(let b=0;b<=_.length;b++){const w=b===0?p:_[b-1],T=b<_.length?_[b]:v;uPt(o,w,T,i,a,h);for(let S=w;S<T;S++)l[S]=d+h[1]/2,u[S]=h[0];d=d+h[1]*t,f[0]=Math.max(f[0],h[0])}p=v}g===`
`&&(a[p]=0,l[p]=0,u[p]=0,p++)}return f[1]=d,{x:a,y:l,rowWidth:u,size:f}}function cPt({value:e,length:t,stride:r,offset:n,startIndices:i,characterSet:o}){const s=e.BYTES_PER_ELEMENT,a=r?r/s:1,l=n?n/s:0,u=i[t]||Math.ceil((e.length-l)/a),c=o&&new Set,f=new Array(t);let h=e;if(a>1||l>0){const d=e.constructor;h=new d(u);for(let p=0;p<u;p++)h[p]=e[p*a+l]}for(let d=0;d<t;d++){const p=i[d],v=i[d+1]||u,m=h.subarray(p,v);f[d]=String.fromCodePoint.apply(null,m),c&&m.forEach(c.add,c)}if(c)for(const d of c)o.add(String.fromCodePoint(d));return{texts:f,characterCount:u}}class VV{constructor(t=5){P(this,"limit",void 0),P(this,"_cache",{}),P(this,"_order",[]),this.limit=t}get(t){const r=this._cache[t];return r&&(this._deleteOrder(t),this._appendOrder(t)),r}set(t,r){this._cache[t]?(this.delete(t),this._cache[t]=r,this._appendOrder(t)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[t]=r,this._appendOrder(t))}delete(t){this._cache[t]&&(delete this._cache[t],this._deleteOrder(t))}_deleteOrder(t){const r=this._order.indexOf(t);r>=0&&this._order.splice(r,1)}_appendOrder(t){this._order.push(t)}}function fPt(){const e=[];for(let t=32;t<128;t++)e.push(String.fromCharCode(t));return e}const Gd={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:fPt(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1},LI=1024,hPt=.9,II=1.2,UV=3;let S1=new VV(UV);function dPt(e,t){let r;typeof t=="string"?r=new Set(Array.from(t)):r=new Set(t);const n=S1.get(e);if(!n)return r;for(const i in n.mapping)r.has(i)&&r.delete(i);return r}function pPt(e,t){for(let r=0;r<e.length;r++)t.data[4*r+3]=e[r]}function OI(e,t,r,n){e.font="".concat(n," ").concat(r,"px ").concat(t),e.fillStyle="#000",e.textBaseline="alphabetic",e.textAlign="left"}function vPt(e){Yt.assert(Number.isFinite(e)&&e>=UV,"Invalid cache limit"),S1=new VV(e)}class gPt{constructor(){P(this,"props",{...Gd}),P(this,"_key",void 0),P(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){return II}setProps(t={}){Object.assign(this.props,t);const r=this._key;this._key=this._getKey();const n=dPt(this._key,this.props.characterSet),i=S1.get(this._key);if(i&&n.size===0){this._key!==r&&(this._atlas=i);return}const o=this._generateFontAtlas(this._key,n,i);this._atlas=o,S1.set(this._key,o)}_generateFontAtlas(t,r,n){const{fontFamily:i,fontWeight:o,fontSize:s,buffer:a,sdf:l,radius:u,cutoff:c}=this.props;let f=n&&n.data;f||(f=document.createElement("canvas"),f.width=LI);const h=f.getContext("2d");OI(h,i,s,o);const{mapping:d,canvasHeight:p,xOffset:v,yOffset:m}=sPt({getFontWidth:g=>h.measureText(g).width,fontHeight:s*II,buffer:a,characterSet:r,maxCanvasWidth:LI,...n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset}});if(f.height!==p){const g=h.getImageData(0,0,f.width,f.height);f.height=p,h.putImageData(g,0,0)}if(OI(h,i,s,o),l){const g=new NE.exports(s,a,u,c,i,o),_=h.getImageData(0,0,g.size,g.size);for(const b of r)pPt(g.draw(b),_),h.putImageData(_,d[b].x-a,d[b].y+a)}else for(const g of r)h.fillText(g,d[g].x,d[g].y+s*hPt);return{xOffset:v,yOffset:m,mapping:d,data:f,width:f.width,height:f.height}}_getKey(){const{fontFamily:t,fontWeight:r,fontSize:n,buffer:i,sdf:o,radius:s,cutoff:a}=this.props;return o?"".concat(t," ").concat(r," ").concat(n," ").concat(i," ").concat(s," ").concat(a):"".concat(t," ").concat(r," ").concat(n," ").concat(i)}}const mPt=`#define SHADER_NAME text-background-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute vec4 instanceRects;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec2 instancePixelOffsets;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform bool billboard;
uniform float opacity;
uniform float sizeScale;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform vec4 padding;
uniform int sizeUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = radians(angle);
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;
  vLineWidth = instanceLineWidths;

  // convert size in meters to pixels, then scaled and clamp

  // project meters to pixels and clamp to limits
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),
    sizeMinPixels, sizeMaxPixels
  );

  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;

  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);
  pixelOffset += instancePixelOffsets;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Apply opacity to instance color, or return instance picking color
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,_Pt=`#define SHADER_NAME text-background-layer-fragment-shader

precision highp float;

uniform bool stroked;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

void main(void) {
  geometry.uv = uv;

  vec2 pixelPosition = uv * dimensions;
  if (stroked) {
    float distToEdge = min(
      min(pixelPosition.x, dimensions.x - pixelPosition.x),
      min(pixelPosition.y, dimensions.y - pixelPosition.y)
    );
    float isBorder = smoothedge(distToEdge, vLineWidth);
    gl_FragColor = mix(vFillColor, vLineColor, isBorder);
  } else {
    gl_FragColor = vFillColor;
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,yPt={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:e=>e.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class FE extends Bo{constructor(...t){super(...t),P(this,"state",void 0)}getShaders(){return super.getShaders({vs:mPt,fs:_Pt,modules:[Ru,Du]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){super.updateState(t);const{changeFlags:r}=t;if(r.extensionsChanged){var n;const{gl:i}=this.context;(n=this.state.model)===null||n===void 0||n.delete(),this.state.model=this._getModel(i),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{billboard:r,sizeScale:n,sizeUnits:i,sizeMinPixels:o,sizeMaxPixels:s,getLineWidth:a}=this.props;let{padding:l}=this.props;l.length<4&&(l=[l[0],l[1],l[0],l[1]]),this.state.model.setUniforms(t).setUniforms({billboard:r,stroked:Boolean(a),padding:l,sizeUnits:Na[i],sizeScale:n,sizeMinPixels:o,sizeMaxPixels:s}).draw()}_getModel(t){const r=[0,0,1,0,1,1,0,1];return new Ss(t,{...this.getShaders(),id:this.props.id,geometry:new Ou({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array(r)}}}),isInstanced:!0})}}P(FE,"defaultProps",yPt);P(FE,"layerName","TextBackgroundLayer");const RI={start:1,middle:0,end:-1},DI={top:1,center:0,bottom:-1},Gb=[0,0,0,255],bPt=1,wPt={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:Gb},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:Gd.characterSet},fontFamily:Gd.fontFamily,fontWeight:Gd.fontWeight,lineHeight:bPt,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:Gb},fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:e=>e.text},getPosition:{type:"accessor",value:e=>e.position},getColor:{type:"accessor",value:Gb},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class zE extends z_{constructor(...t){super(...t),P(this,"state",void 0),P(this,"getBoundingRect",(r,n)=>{const i=this.state.fontAtlasManager.mapping,o=this.state.getText,{wordBreak:s,maxWidth:a,lineHeight:l,getTextAnchor:u,getAlignmentBaseline:c}=this.props,f=o(r,n)||"",{size:[h,d]}=xI(f,l,s,a,i),p=RI[typeof u=="function"?u(r,n):u],v=DI[typeof c=="function"?c(r,n):c];return[(p-1)*h/2,(v-1)*d/2,h,d]}),P(this,"getIconOffsets",(r,n)=>{const i=this.state.fontAtlasManager.mapping,o=this.state.getText,{wordBreak:s,maxWidth:a,lineHeight:l,getTextAnchor:u,getAlignmentBaseline:c}=this.props,f=o(r,n)||"",{x:h,y:d,rowWidth:p,size:[v,m]}=xI(f,l,s,a,i),g=RI[typeof u=="function"?u(r,n):u],_=DI[typeof c=="function"?c(r,n):c],b=h.length,w=new Array(b*2);let T=0;for(let S=0;S<b;S++){const k=(1-g)*(v-p[S])/2;w[T++]=(g-1)*v/2+k+h[S],w[T++]=(_-1)*m/2+d[S]}return w})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new gPt}}updateState(t){const{props:r,oldProps:n,changeFlags:i}=t;(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||r.lineHeight!==n.lineHeight||r.wordBreak!==n.wordBreak||r.maxWidth!==n.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:t}){return t.object=t.index>=0?this.props.data[t.index]:null,t}_updateFontAtlas(){const{fontSettings:t,fontFamily:r,fontWeight:n}=this.props,{fontAtlasManager:i,characterSet:o}=this.state,s={...t,characterSet:o,fontFamily:r,fontWeight:n};if(!i.mapping)return i.setProps(s),!0;for(const a in s)if(s[a]!==i.props[a])return i.setProps(s),!0;return!1}_updateText(){var t;const{data:r,characterSet:n}=this.props,i=(t=r.attributes)===null||t===void 0?void 0:t.getText;let{getText:o}=this.props,s=r.startIndices,a;const l=n==="auto"&&new Set;if(i&&s){const{texts:u,characterCount:c}=cPt({...ArrayBuffer.isView(i)?{value:i}:i,length:r.length,startIndices:s,characterSet:l});a=c,o=(f,{index:h})=>u[h]}else{const{iterable:u,objectInfo:c}=F_(r);s=[0],a=0;for(const f of u){c.index++;const h=Array.from(o(f,c)||"");l&&h.forEach(l.add,l),a+=h.length,s.push(a)}}this.setState({getText:o,startIndices:s,numInstances:a,characterSet:l||n})}renderLayers(){const{startIndices:t,numInstances:r,getText:n,fontAtlasManager:{scale:i,texture:o,mapping:s},styleVersion:a}=this.state,{data:l,_dataDiff:u,getPosition:c,getColor:f,getSize:h,getAngle:d,getPixelOffset:p,getBackgroundColor:v,getBorderColor:m,getBorderWidth:g,backgroundPadding:_,background:b,billboard:w,fontSettings:T,outlineWidth:S,outlineColor:k,sizeScale:A,sizeUnits:C,sizeMinPixels:x,sizeMaxPixels:I,transitions:N,updateTriggers:B}=this.props,V=this.getSubLayerClass("characters",DE),F=this.getSubLayerClass("background",FE);return[b&&new F({getFillColor:v,getLineColor:m,getLineWidth:g,padding:_,getPosition:c,getSize:h,getAngle:d,getPixelOffset:p,billboard:w,sizeScale:A/this.state.fontAtlasManager.props.fontSize,sizeUnits:C,sizeMinPixels:x,sizeMaxPixels:I,transitions:N&&{getPosition:N.getPosition,getAngle:N.getAngle,getSize:N.getSize,getFillColor:N.getBackgroundColor,getLineColor:N.getBorderColor,getLineWidth:N.getBorderWidth,getPixelOffset:N.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:B.getPosition,getAngle:B.getAngle,getSize:B.getSize,getFillColor:B.getBackgroundColor,getLineColor:B.getBorderColor,getLineWidth:B.getBorderWidth,getPixelOffset:B.getPixelOffset,getBoundingRect:{getText:B.getText,getTextAnchor:B.getTextAnchor,getAlignmentBaseline:B.getAlignmentBaseline,styleVersion:a}}}),{data:l.attributes&&l.attributes.background?{length:l.length,attributes:l.attributes.background}:l,_dataDiff:u,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new V({sdf:T.sdf,smoothing:Number.isFinite(T.smoothing)?T.smoothing:Gd.smoothing,outlineWidth:S,outlineColor:k,iconAtlas:o,iconMapping:s,getPosition:c,getColor:f,getSize:h,getAngle:d,getPixelOffset:p,billboard:w,sizeScale:A*i,sizeUnits:C,sizeMinPixels:x*i,sizeMaxPixels:I*i,transitions:N&&{getPosition:N.getPosition,getAngle:N.getAngle,getColor:N.getColor,getSize:N.getSize,getPixelOffset:N.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:B.getText,getPosition:B.getPosition,getAngle:B.getAngle,getColor:B.getColor,getSize:B.getSize,getPixelOffset:B.getPixelOffset,getIconOffsets:{getText:B.getText,getTextAnchor:B.getTextAnchor,getAlignmentBaseline:B.getAlignmentBaseline,styleVersion:a}}}),{data:l,_dataDiff:u,startIndices:t,numInstances:r,getIconOffsets:this.getIconOffsets,getIcon:n})]}static set fontAtlasCacheLimit(t){vPt(t)}}P(zE,"defaultProps",wPt);P(zE,"layerName","TextLayer");const vm={circle:{type:LE,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:gu,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:zE,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},gm={type:IE,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},PT={type:RE,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function Nh({type:e,props:t}){const r={};for(const n in t)r[n]=e.defaultProps[t[n]];return r}function Hb(e,t){const{transitions:r,updateTriggers:n}=e.props,i={updateTriggers:{},transitions:r&&{getPosition:r.geometry}};for(const o in t){const s=t[o];let a=e.props[o];o.startsWith("get")&&(a=e.getSubLayerAccessor(a),i.updateTriggers[s]=n[o],r&&(i.transitions[s]=r[o])),i[s]=a}return i}function SPt(e){if(Array.isArray(e))return e;switch(Yt.assert(e.type,"GeoJSON does not have type"),e.type){case"Feature":return[e];case"FeatureCollection":return Yt.assert(Array.isArray(e.features),"GeoJSON does not have features array"),e.features;default:return[{geometry:e}]}}function NI(e,t,r={}){const n={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:i=0,endRow:o=e.length}=r;for(let s=i;s<o;s++){const a=e[s];Yt.assert(a&&a.geometry,"GeoJSON does not have geometry");const{geometry:l}=a;if(l.type==="GeometryCollection"){Yt.assert(Array.isArray(l.geometries),"GeoJSON does not have geometries array");const{geometries:u}=l;for(let c=0;c<u.length;c++){const f=u[c];FI(f,n,t,a,s)}}else FI(l,n,t,a,s)}return n}function FI(e,t,r,n,i){const{type:o,coordinates:s}=e,{pointFeatures:a,lineFeatures:l,polygonFeatures:u,polygonOutlineFeatures:c}=t;if(!kPt(o,s)){Yt.warn("".concat(o," coordinates are malformed"))();return}switch(o){case"Point":a.push(r({geometry:e},n,i));break;case"MultiPoint":s.forEach(f=>{a.push(r({geometry:{type:"Point",coordinates:f}},n,i))});break;case"LineString":l.push(r({geometry:e},n,i));break;case"MultiLineString":s.forEach(f=>{l.push(r({geometry:{type:"LineString",coordinates:f}},n,i))});break;case"Polygon":u.push(r({geometry:e},n,i)),s.forEach(f=>{c.push(r({geometry:{type:"LineString",coordinates:f}},n,i))});break;case"MultiPolygon":s.forEach(f=>{u.push(r({geometry:{type:"Polygon",coordinates:f}},n,i)),f.forEach(h=>{c.push(r({geometry:{type:"LineString",coordinates:h}},n,i))})});break}}const TPt={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function kPt(e,t){let r=TPt[e];for(Yt.assert(r,"Unknown GeoJSON type ".concat(e));t&&--r>0;)t=t[0];return t&&Number.isFinite(t[0])}function WV(){return{points:{},lines:{},polygons:{},polygonsOutline:{}}}function Vv(e){return e.geometry.coordinates}function PPt(e,t){const r=WV(),{pointFeatures:n,lineFeatures:i,polygonFeatures:o,polygonOutlineFeatures:s}=e;return r.points.data=n,r.points._dataDiff=t.pointFeatures&&(()=>t.pointFeatures),r.points.getPosition=Vv,r.lines.data=i,r.lines._dataDiff=t.lineFeatures&&(()=>t.lineFeatures),r.lines.getPath=Vv,r.polygons.data=o,r.polygons._dataDiff=t.polygonFeatures&&(()=>t.polygonFeatures),r.polygons.getPolygon=Vv,r.polygonsOutline.data=s,r.polygonsOutline._dataDiff=t.polygonOutlineFeatures&&(()=>t.polygonOutlineFeatures),r.polygonsOutline.getPath=Vv,r}function EPt(e,t){const r=WV(),{points:n,lines:i,polygons:o}=e,s=Jkt(e,t);return r.points.data={length:n.positions.value.length/n.positions.size,attributes:{...n.attributes,getPosition:n.positions,instancePickingColors:{size:3,value:s.points}},properties:n.properties,numericProps:n.numericProps,featureIds:n.featureIds},r.lines.data={length:i.pathIndices.value.length-1,startIndices:i.pathIndices.value,attributes:{...i.attributes,getPath:i.positions,instancePickingColors:{size:3,value:s.lines}},properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},r.lines._pathType="open",r.polygons.data={length:o.polygonIndices.value.length-1,startIndices:o.polygonIndices.value,attributes:{...o.attributes,getPolygon:o.positions,pickingColors:{size:3,value:s.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},r.polygons._normalize=!1,o.triangles&&(r.polygons.data.attributes.indices=o.triangles.value),r.polygonsOutline.data={length:o.primitivePolygonIndices.value.length-1,startIndices:o.primitivePolygonIndices.value,attributes:{...o.attributes,getPath:o.positions,instancePickingColors:{size:3,value:s.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},r.polygonsOutline._pathType="open",r}const CPt=["points","linestrings","polygons"],APt={...Nh(vm.circle),...Nh(vm.icon),...Nh(vm.text),...Nh(gm),...Nh(PT),stroked:!0,filled:!0,extruded:!1,wireframe:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:e=>e.properties.icon},getText:{type:"accessor",value:e=>e.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class U_ extends z_{initializeState(){this.state={layerProps:{},features:{}}}updateState({props:t,changeFlags:r}){if(!r.dataChanged)return;const{data:n}=this.props,i=n&&"points"in n&&"polygons"in n&&"lines"in n;this.setState({binary:i}),i?this._updateStateBinary({props:t,changeFlags:r}):this._updateStateJSON({props:t,changeFlags:r})}_updateStateBinary({props:t,changeFlags:r}){const n=EPt(t.data,this.encodePickingColor);this.setState({layerProps:n})}_updateStateJSON({props:t,changeFlags:r}){const n=SPt(t.data),i=this.getSubLayerRow.bind(this);let o={};const s={};if(Array.isArray(r.dataChanged)){const l=this.state.features;for(const u in l)o[u]=l[u].slice(),s[u]=[];for(const u of r.dataChanged){const c=NI(n,i,u);for(const f in l)s[f].push(qkt({data:o[f],getIndex:h=>h.__source.index,dataRange:u,replace:c[f]}))}}else o=NI(n,i);const a=PPt(o,s);this.setState({features:o,featuresDiff:s,layerProps:a})}getPickingInfo(t){const r=super.getPickingInfo(t),{index:n,sourceLayer:i}=r;return r.featureType=CPt.find(o=>i.id.startsWith("".concat(this.id,"-").concat(o,"-"))),n>=0&&i.id.startsWith("".concat(this.id,"-points-text"))&&this.state.binary&&(r.index=this.props.data.points.globalFeatureIds.value[n]),r}_updateAutoHighlight(t){const r="".concat(this.id,"-points-"),n=t.featureType==="points";for(const i of this.getSubLayers())i.id.startsWith(r)===n&&i.updateAutoHighlight(t)}_renderPolygonLayer(){const{extruded:t,wireframe:r}=this.props,{layerProps:n}=this.state,i="polygons-fill",o=this.shouldRenderSubLayer(i,n.polygons.data)&&this.getSubLayerClass(i,PT.type);if(o){const s=Hb(this,PT.props),a=t&&r;return a||delete s.getLineColor,s.updateTriggers.lineColors=a,new o(s,this.getSubLayerProps({id:i,updateTriggers:s.updateTriggers}),n.polygons)}return null}_renderLineLayers(){const{extruded:t,stroked:r}=this.props,{layerProps:n}=this.state,i="polygons-stroke",o="linestrings",s=!t&&r&&this.shouldRenderSubLayer(i,n.polygonsOutline.data)&&this.getSubLayerClass(i,gm.type),a=this.shouldRenderSubLayer(o,n.lines.data)&&this.getSubLayerClass(o,gm.type);if(s||a){const l=Hb(this,gm.props);return[s&&new s(l,this.getSubLayerProps({id:i,updateTriggers:l.updateTriggers}),n.polygonsOutline),a&&new a(l,this.getSubLayerProps({id:o,updateTriggers:l.updateTriggers}),n.lines)]}return null}_renderPointLayers(){const{pointType:t}=this.props,{layerProps:r,binary:n}=this.state;let{highlightedObjectIndex:i}=this.props;!n&&Number.isFinite(i)&&(i=r.points.data.findIndex(a=>a.__source.index===i));const o=new Set(t.split("+")),s=[];for(const a of o){const l="points-".concat(a),u=vm[a],c=u&&this.shouldRenderSubLayer(l,r.points.data)&&this.getSubLayerClass(l,u.type);if(c){const f=Hb(this,u.props);let h=r.points;if(a==="text"&&n){const{instancePickingColors:d,...p}=h.data.attributes;h={...h,data:{...h.data,attributes:p}}}s.push(new c(f,this.getSubLayerProps({id:l,updateTriggers:f.updateTriggers,highlightedObjectIndex:i}),h))}}return s}renderLayers(){const{extruded:t}=this.props,r=this._renderPolygonLayer(),n=this._renderLineLayers(),i=this._renderPointLayers();return[!t&&r,n,i,t&&r]}getSubLayerAccessor(t){const{binary:r}=this.state;return!r||typeof t!="function"?super.getSubLayerAccessor(t):(n,i)=>{const{data:o,index:s}=i,a=Zkt(o,s);return t(a,i)}}}P(U_,"layerName","GeoJsonLayer");P(U_,"defaultProps",APt);class MPt{constructor(t){P(this,"index",void 0),P(this,"isVisible",void 0),P(this,"isSelected",void 0),P(this,"parent",void 0),P(this,"children",void 0),P(this,"content",void 0),P(this,"state",void 0),P(this,"layers",void 0),P(this,"id",void 0),P(this,"bbox",void 0),P(this,"zoom",void 0),P(this,"userData",void 0),P(this,"_abortController",void 0),P(this,"_loader",void 0),P(this,"_loaderId",void 0),P(this,"_isLoaded",void 0),P(this,"_isCancelled",void 0),P(this,"_needsReload",void 0),this.index=t,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._loader=void 0,this._abortController=null,this._loaderId=0,this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1}get data(){return this.isLoading&&this._loader?this._loader.then(()=>this.data):this.content}get isLoaded(){return this._isLoaded&&!this._needsReload}get isLoading(){return Boolean(this._loader)&&!this._isCancelled}get needsReload(){return this._needsReload||this._isCancelled}get byteLength(){const t=this.content?this.content.byteLength:0;return Number.isFinite(t)||Yt.error("byteLength not defined in tile data")(),t}async _loadData({getData:t,requestScheduler:r,onLoad:n,onError:i}){const{index:o,id:s,bbox:a,userData:l,zoom:u}=this,c=this._loaderId;this._abortController=new AbortController;const{signal:f}=this._abortController,h=await r.scheduleRequest(this,v=>v.isSelected?1:-1);if(!h){this._isCancelled=!0;return}if(this._isCancelled){h.done();return}let d=null,p;try{d=await t({index:o,id:s,bbox:a,userData:l,zoom:u,signal:f})}catch(v){p=v||!0}finally{h.done()}if(c===this._loaderId){if(this._loader=void 0,this.content=d,this._isCancelled&&!d){this._isLoaded=!1;return}this._isLoaded=!0,this._isCancelled=!1,p?i(p,this):n(this)}}loadData(t){return this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1,this._loaderId++,this._loader=this._loadData(t),this._loader}setNeedsReload(){this.isLoading&&(this.abort(),this._loader=void 0),this._needsReload=!0}abort(){var t;this.isLoaded||(this._isCancelled=!0,(t=this._abortController)===null||t===void 0||t.abort())}}const Wr={OUTSIDE:-1,INTERSECTING:0,INSIDE:1},zI=new kt,xPt=new kt;class BE{constructor(t=[0,0,0],r=[0,0,0],n){P(this,"center",void 0),P(this,"halfDiagonal",void 0),P(this,"minimum",void 0),P(this,"maximum",void 0),n=n||zI.copy(t).add(r).scale(.5),this.center=new kt(n),this.halfDiagonal=new kt(r).subtract(this.center),this.minimum=new kt(t),this.maximum=new kt(r)}clone(){return new BE(this.minimum,this.maximum,this.center)}equals(t){return this===t||Boolean(t)&&this.minimum.equals(t.minimum)&&this.maximum.equals(t.maximum)}transform(t){return this.center.transformAsPoint(t),this.halfDiagonal.transform(t),this.minimum.transform(t),this.maximum.transform(t),this}intersectPlane(t){const{halfDiagonal:r}=this,n=xPt.from(t.normal),i=r.x*Math.abs(n.x)+r.y*Math.abs(n.y)+r.z*Math.abs(n.z),o=this.center.dot(n)+t.distance;return o-i>0?Wr.INSIDE:o+i<0?Wr.OUTSIDE:Wr.INTERSECTING}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const r=zI.from(t).subtract(this.center),{halfDiagonal:n}=this;let i=0,o;return o=Math.abs(r.x)-n.x,o>0&&(i+=o*o),o=Math.abs(r.y)-n.y,o>0&&(i+=o*o),o=Math.abs(r.z)-n.z,o>0&&(i+=o*o),i}}const Fh=new kt,BI=new kt;class $E{constructor(t=[0,0,0],r=0){P(this,"center",void 0),P(this,"radius",void 0),this.radius=-0,this.center=new kt,this.fromCenterRadius(t,r)}fromCenterRadius(t,r){return this.center.from(t),this.radius=r,this}fromCornerPoints(t,r){return r=Fh.from(r),this.center=new kt().from(t).add(r).scale(.5),this.radius=this.center.distance(r),this}equals(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.radius===t.radius}clone(){return new $E(this.center,this.radius)}union(t){const r=this.center,n=this.radius,i=t.center,o=t.radius,s=Fh.copy(i).subtract(r),a=s.magnitude();if(n>=a+o)return this.clone();if(o>=a+n)return t.clone();const l=(n+a+o)*.5;return BI.copy(s).scale((-n+l)/a).add(r),this.center.copy(BI),this.radius=l,this}expand(t){const n=Fh.from(t).subtract(this.center).magnitude();return n>this.radius&&(this.radius=n),this}transform(t){this.center.transform(t);const r=l2t(Fh,t);return this.radius=Math.max(r[0],Math.max(r[1],r[2]))*this.radius,this}distanceSquaredTo(t){const r=this.distanceTo(t);return r*r}distanceTo(t){const n=Fh.from(t).subtract(this.center);return Math.max(0,n.len()-this.radius)}intersectPlane(t){const r=this.center,n=this.radius,o=t.normal.dot(r)+t.distance;return o<-n?Wr.OUTSIDE:o<n?Wr.INTERSECTING:Wr.INSIDE}}const LPt=new kt,IPt=new kt,Uv=new kt,Wv=new kt,jv=new kt,OPt=new kt,RPt=new kt,Zo={COLUMN0ROW0:0,COLUMN0ROW1:1,COLUMN0ROW2:2,COLUMN1ROW0:3,COLUMN1ROW1:4,COLUMN1ROW2:5,COLUMN2ROW0:6,COLUMN2ROW1:7,COLUMN2ROW2:8};class VE{constructor(t=[0,0,0],r=[0,0,0,0,0,0,0,0,0]){P(this,"center",void 0),P(this,"halfAxes",void 0),this.center=new kt().from(t),this.halfAxes=new xr(r)}get halfSize(){const t=this.halfAxes.getColumn(0),r=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2);return[new kt(t).len(),new kt(r).len(),new kt(n).len()]}get quaternion(){const t=this.halfAxes.getColumn(0),r=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2),i=new kt(t).normalize(),o=new kt(r).normalize(),s=new kt(n).normalize();return new AL().fromMatrix3(new xr([...i,...o,...s]))}fromCenterHalfSizeQuaternion(t,r,n){const i=new AL(n),o=new xr().fromQuaternion(i);return o[0]=o[0]*r[0],o[1]=o[1]*r[0],o[2]=o[2]*r[0],o[3]=o[3]*r[1],o[4]=o[4]*r[1],o[5]=o[5]*r[1],o[6]=o[6]*r[2],o[7]=o[7]*r[2],o[8]=o[8]*r[2],this.center=new kt().from(t),this.halfAxes=o,this}clone(){return new VE(this.center,this.halfAxes)}equals(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.halfAxes.equals(t.halfAxes)}getBoundingSphere(t=new $E){const r=this.halfAxes,n=r.getColumn(0,Uv),i=r.getColumn(1,Wv),o=r.getColumn(2,jv),s=LPt.copy(n).add(i).add(o);return t.center.copy(this.center),t.radius=s.magnitude(),t}intersectPlane(t){const r=this.center,n=t.normal,i=this.halfAxes,o=n.x,s=n.y,a=n.z,l=Math.abs(o*i[Zo.COLUMN0ROW0]+s*i[Zo.COLUMN0ROW1]+a*i[Zo.COLUMN0ROW2])+Math.abs(o*i[Zo.COLUMN1ROW0]+s*i[Zo.COLUMN1ROW1]+a*i[Zo.COLUMN1ROW2])+Math.abs(o*i[Zo.COLUMN2ROW0]+s*i[Zo.COLUMN2ROW1]+a*i[Zo.COLUMN2ROW2]),u=n.dot(r)+t.distance;return u<=-l?Wr.OUTSIDE:u>=l?Wr.INSIDE:Wr.INTERSECTING}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const r=IPt.from(t).subtract(this.center),n=this.halfAxes,i=n.getColumn(0,Uv),o=n.getColumn(1,Wv),s=n.getColumn(2,jv),a=i.magnitude(),l=o.magnitude(),u=s.magnitude();i.normalize(),o.normalize(),s.normalize();let c=0,f;return f=Math.abs(r.dot(i))-a,f>0&&(c+=f*f),f=Math.abs(r.dot(o))-l,f>0&&(c+=f*f),f=Math.abs(r.dot(s))-u,f>0&&(c+=f*f),c}computePlaneDistances(t,r,n=[-0,-0]){let i=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;const s=this.center,a=this.halfAxes,l=a.getColumn(0,Uv),u=a.getColumn(1,Wv),c=a.getColumn(2,jv),f=OPt.copy(l).add(u).add(c).add(s),h=RPt.copy(f).subtract(t);let d=r.dot(h);return i=Math.min(d,i),o=Math.max(d,o),f.copy(s).add(l).add(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),f.copy(s).add(l).subtract(u).add(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),f.copy(s).add(l).subtract(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),s.copy(f).subtract(l).add(u).add(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),s.copy(f).subtract(l).add(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),s.copy(f).subtract(l).subtract(u).add(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),s.copy(f).subtract(l).subtract(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),n[0]=i,n[1]=o,n}transform(t){this.center.transformAsPoint(t);const r=this.halfAxes.getColumn(0,Uv);r.transformAsPoint(t);const n=this.halfAxes.getColumn(1,Wv);n.transformAsPoint(t);const i=this.halfAxes.getColumn(2,jv);return i.transformAsPoint(t),this.halfAxes=new xr([...r,...n,...i]),this}getTransform(){throw new Error("not implemented")}}const $I=new kt,VI=new kt;class mf{constructor(t=[0,0,1],r=0){P(this,"normal",void 0),P(this,"distance",void 0),this.normal=new kt,this.distance=-0,this.fromNormalDistance(t,r)}fromNormalDistance(t,r){return kp(Number.isFinite(r)),this.normal.from(t).normalize(),this.distance=r,this}fromPointNormal(t,r){t=$I.from(t),this.normal.from(r).normalize();const n=-this.normal.dot(t);return this.distance=n,this}fromCoefficients(t,r,n,i){return this.normal.set(t,r,n),kp(xo(this.normal.len(),1)),this.distance=i,this}clone(){return new mf(this.normal,this.distance)}equals(t){return xo(this.distance,t.distance)&&xo(this.normal,t.normal)}getPointDistance(t){return this.normal.dot(t)+this.distance}transform(t){const r=VI.copy(this.normal).transformAsVector(t).normalize(),n=this.normal.scale(-this.distance).transform(t);return this.fromPointNormal(n,r)}projectPointOntoPlane(t,r=[0,0,0]){t=$I.from(t);const n=this.getPointDistance(t),i=VI.copy(this.normal).scale(n);return t.subtract(i).to(r)}}const UI=[new kt([1,0,0]),new kt([0,1,0]),new kt([0,0,1])],WI=new kt,DPt=new kt;new mf(new kt(1,0,0),0);class fs{constructor(t=[]){P(this,"planes",void 0),this.planes=t}fromBoundingSphere(t){this.planes.length=2*UI.length;const r=t.center,n=t.radius;let i=0;for(const o of UI){let s=this.planes[i],a=this.planes[i+1];s||(s=this.planes[i]=new mf),a||(a=this.planes[i+1]=new mf);const l=WI.copy(o).scale(-n).add(r);-o.dot(l),s.fromPointNormal(l,o);const u=WI.copy(o).scale(n).add(r),c=DPt.copy(o).negate();-c.dot(u),a.fromPointNormal(u,c),i+=2}return this}computeVisibility(t){let r=Wr.INSIDE;for(const n of this.planes)switch(t.intersectPlane(n)){case Wr.OUTSIDE:return Wr.OUTSIDE;case Wr.INTERSECTING:r=Wr.INTERSECTING;break}return r}computeVisibilityWithPlaneMask(t,r){if(kp(Number.isFinite(r),"parentPlaneMask is required."),r===fs.MASK_OUTSIDE||r===fs.MASK_INSIDE)return r;let n=fs.MASK_INSIDE;const i=this.planes;for(let o=0;o<this.planes.length;++o){const s=o<31?1<<o:0;if(o<31&&(r&s)===0)continue;const a=i[o],l=t.intersectPlane(a);if(l===Wr.OUTSIDE)return fs.MASK_OUTSIDE;l===Wr.INTERSECTING&&(n|=s)}return n}}P(fs,"MASK_OUTSIDE",4294967295);P(fs,"MASK_INSIDE",0);P(fs,"MASK_INDETERMINATE",2147483647);new kt;new kt;new kt;new kt;new kt;new kt;new kt;new kt;new kt;new kt;new kt;new kt;new kt;new kt;new kt;new kt;new kt;const yo=new xr,NPt=new xr,FPt=new xr,Gv=new xr,jI=new xr;function zPt(e,t={}){const r=U$.EPSILON20,n=10;let i=0,o=0;const s=NPt,a=FPt;s.identity(),a.copy(e);const l=r*BPt(a);for(;o<n&&$Pt(a)>l;)VPt(a,Gv),jI.copy(Gv).transpose(),a.multiplyRight(Gv),a.multiplyLeft(jI),s.multiplyRight(Gv),++i>2&&(++o,i=0);return t.unitary=s.toTarget(t.unitary),t.diagonal=a.toTarget(t.diagonal),t}function BPt(e){let t=0;for(let r=0;r<9;++r){const n=e[r];t+=n*n}return Math.sqrt(t)}const ET=[1,0,0],CT=[2,2,1];function $Pt(e){let t=0;for(let r=0;r<3;++r){const n=e[yo.getElementIndex(CT[r],ET[r])];t+=2*n*n}return Math.sqrt(t)}function VPt(e,t){const r=U$.EPSILON15;let n=0,i=1;for(let u=0;u<3;++u){const c=Math.abs(e[yo.getElementIndex(CT[u],ET[u])]);c>n&&(i=u,n=c)}const o=ET[i],s=CT[i];let a=1,l=0;if(Math.abs(e[yo.getElementIndex(s,o)])>r){const u=e[yo.getElementIndex(s,s)],c=e[yo.getElementIndex(o,o)],f=e[yo.getElementIndex(s,o)],h=(u-c)/2/f;let d;h<0?d=-1/(-h+Math.sqrt(1+h*h)):d=1/(h+Math.sqrt(1+h*h)),a=1/Math.sqrt(1+d*d),l=d*a}return xr.IDENTITY.to(t),t[yo.getElementIndex(o,o)]=t[yo.getElementIndex(s,s)]=a,t[yo.getElementIndex(s,o)]=l,t[yo.getElementIndex(o,s)]=-l,t}const Zs=new kt,UPt=new kt,WPt=new kt,jPt=new kt,GPt=new kt,HPt=new xr,XPt={diagonal:new xr,unitary:new xr};function YPt(e,t=new VE){if(!e||e.length===0)return t.halfAxes=new xr([0,0,0,0,0,0,0,0,0]),t.center=new kt,t;const r=e.length,n=new kt(0,0,0);for(const C of e)n.add(C);const i=1/r;n.multiplyByScalar(i);let o=0,s=0,a=0,l=0,u=0,c=0;for(const C of e){const x=Zs.copy(C).subtract(n);o+=x.x*x.x,s+=x.x*x.y,a+=x.x*x.z,l+=x.y*x.y,u+=x.y*x.z,c+=x.z*x.z}o*=i,s*=i,a*=i,l*=i,u*=i,c*=i;const f=HPt;f[0]=o,f[1]=s,f[2]=a,f[3]=s,f[4]=l,f[5]=u,f[6]=a,f[7]=u,f[8]=c;const{unitary:h}=zPt(f,XPt),d=t.halfAxes.copy(h);let p=d.getColumn(0,WPt),v=d.getColumn(1,jPt),m=d.getColumn(2,GPt),g=-Number.MAX_VALUE,_=-Number.MAX_VALUE,b=-Number.MAX_VALUE,w=Number.MAX_VALUE,T=Number.MAX_VALUE,S=Number.MAX_VALUE;for(const C of e)Zs.copy(C),g=Math.max(Zs.dot(p),g),_=Math.max(Zs.dot(v),_),b=Math.max(Zs.dot(m),b),w=Math.min(Zs.dot(p),w),T=Math.min(Zs.dot(v),T),S=Math.min(Zs.dot(m),S);p=p.multiplyByScalar(.5*(w+g)),v=v.multiplyByScalar(.5*(T+_)),m=m.multiplyByScalar(.5*(S+b)),t.center.copy(p).add(v).add(m);const k=UPt.set(g-w,_-T,b-S).multiplyByScalar(.5),A=new xr([k[0],0,0,0,k[1],0,0,0,k[2]]);return t.halfAxes.multiplyRight(A),t}const Bc=512,GI=3,jV=[[.5,.5],[0,0],[0,1],[1,0],[1,1]],GV=jV.concat([[0,.5],[.5,0],[1,.5],[.5,1]]),qPt=GV.concat([[.25,.5],[.75,.5]]);class $c{constructor(t,r,n){P(this,"x",void 0),P(this,"y",void 0),P(this,"z",void 0),P(this,"childVisible",void 0),P(this,"selected",void 0),P(this,"_children",void 0),this.x=t,this.y=r,this.z=n}get children(){if(!this._children){const t=this.x*2,r=this.y*2,n=this.z+1;this._children=[new $c(t,r,n),new $c(t,r+1,n),new $c(t+1,r,n),new $c(t+1,r+1,n)]}return this._children}update(t){const{viewport:r,cullingVolume:n,elevationBounds:i,minZ:o,maxZ:s,bounds:a,offset:l,project:u}=t,c=this.getBoundingVolume(i,l,u);if(a&&!this.insideBounds(a)||n.computeVisibility(c)<0)return!1;if(!this.childVisible){let{z:h}=this;if(h<s&&h>=o){const d=c.distanceTo(r.cameraPosition)*r.scale/r.height;h+=Math.floor(Math.log2(d))}if(h>=s)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;for(const h of this.children)h.update(t);return!0}getSelected(t=[]){if(this.selected&&t.push(this),this._children)for(const r of this._children)r.getSelected(t);return t}insideBounds([t,r,n,i]){const o=Math.pow(2,this.z),s=Bc/o;return this.x*s<n&&this.y*s<i&&(this.x+1)*s>t&&(this.y+1)*s>r}getBoundingVolume(t,r,n){if(n){const l=this.z<1?qPt:this.z<2?GV:jV,u=[];for(const c of l){const f=AT(this.x+c[0],this.y+c[1],this.z);f[2]=t[0],u.push(n(f)),t[0]!==t[1]&&(f[2]=t[1],u.push(n(f)))}return YPt(u)}const i=Math.pow(2,this.z),o=Bc/i,s=this.x*o+r*Bc,a=Bc-(this.y+1)*o;return new BE([s,a,t[0]],[s+o,a+o,t[1]])}}function ZPt(e,t,r,n){const i=e instanceof ATt&&e.resolution?e.projectPosition:null,o=Object.values(e.getFrustumPlanes()).map(({normal:d,distance:p})=>new mf(d.clone().negate(),p)),s=new fs(o),a=e.distanceScales.unitsPerMeter[2],l=r&&r[0]*a||0,u=r&&r[1]*a||0,c=e instanceof Do&&e.pitch<=60?t:0;if(n){const[d,p,v,m]=n,g=Fa([d,m]),_=Fa([v,p]);n=[g[0],Bc-g[1],_[0],Bc-_[1]]}const f=new $c(0,0,0),h={viewport:e,project:i,cullingVolume:s,elevationBounds:[l,u],minZ:c,maxZ:t,bounds:n,offset:0};if(f.update(h),e instanceof Do&&e.subViewports&&e.subViewports.length>1){for(h.offset=-1;f.update(h)&&!(--h.offset<-GI););for(h.offset=1;f.update(h)&&!(++h.offset>GI););}return f.getSelected()}const ks=512,KPt=[-1/0,-1/0,1/0,1/0],JPt={type:"url",value:null,validate:(e,t)=>t.optional&&e===null||typeof e=="string"||Array.isArray(e)&&e.every(r=>typeof r=="string"),equals:(e,t)=>{if(e===t)return!0;if(!Array.isArray(e)||!Array.isArray(t))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}};function HV(e,t){const r=[t.transformAsPoint([e[0],e[1]]),t.transformAsPoint([e[2],e[1]]),t.transformAsPoint([e[0],e[3]]),t.transformAsPoint([e[2],e[3]])];return[Math.min(...r.map(i=>i[0])),Math.min(...r.map(i=>i[1])),Math.max(...r.map(i=>i[0])),Math.max(...r.map(i=>i[1]))]}function QPt(e){return Math.abs(e.split("").reduce((t,r)=>(t<<5)-t+r.charCodeAt(0)|0,0))}function tEt(e,t){if(!e||!e.length)return null;const{index:r,id:n}=t;if(Array.isArray(e)){const o=QPt(n)%e.length;e=e[o]}let i=e;for(const o of Object.keys(r)){const s=new RegExp("{".concat(o,"}"),"g");i=i.replace(s,String(r[o]))}return Number.isInteger(r.y)&&Number.isInteger(r.z)&&(i=i.replace(/\{-y\}/g,String(Math.pow(2,r.z)-r.y-1))),i}function eEt(e,t,r){let n;if(t&&t.length===2){const[i,o]=t,s=e.getBounds({z:i}),a=e.getBounds({z:o});n=[Math.min(s[0],a[0]),Math.min(s[1],a[1]),Math.max(s[2],a[2]),Math.max(s[3],a[3])]}else n=e.getBounds();return e.isGeospatial?[Math.max(n[0],r[0]),Math.max(n[1],r[1]),Math.min(n[2],r[2]),Math.min(n[3],r[3])]:[Math.max(Math.min(n[0],r[2]),r[0]),Math.max(Math.min(n[1],r[3]),r[1]),Math.min(Math.max(n[2],r[0]),r[2]),Math.min(Math.max(n[3],r[1]),r[3])]}function T1({viewport:e,z:t,cullRect:r}){const n=r.x-e.x,i=r.y-e.y,{width:o,height:s}=r;if(!Array.isArray(t)){const u={targetZ:t||0},c=e.unproject([n,i],u),f=e.unproject([n+o,i],u),h=e.unproject([n,i+s],u),d=e.unproject([n+o,i+s],u);return[Math.min(c[0],f[0],h[0],d[0]),Math.min(c[1],f[1],h[1],d[1]),Math.max(c[0],f[0],h[0],d[0]),Math.max(c[1],f[1],h[1],d[1])]}const a=T1({viewport:e,z:t[0],cullRect:r}),l=T1({viewport:e,z:t[1],cullRect:r});return[Math.min(a[0],l[0]),Math.min(a[1],l[1]),Math.max(a[2],l[2]),Math.max(a[3],l[3])]}function rEt(e,t,r){return r?HV(e,r).map(i=>i*t/ks):e.map(n=>n*t/ks)}function UE(e,t){return Math.pow(2,e)*ks/t}function AT(e,t,r){const n=UE(r,ks),i=e/n*360-180,o=Math.PI-2*Math.PI*t/n,s=180/Math.PI*Math.atan(.5*(Math.exp(o)-Math.exp(-o)));return[i,s]}function HI(e,t,r,n){const i=UE(r,n);return[e/i*ks,t/i*ks]}function nEt(e,t,r,n,i=ks){if(e.isGeospatial){const[u,c]=AT(t,r,n),[f,h]=AT(t+1,r+1,n);return{west:u,north:c,east:f,south:h}}const[o,s]=HI(t,r,n,i),[a,l]=HI(t+1,r+1,n,i);return{left:o,top:s,right:a,bottom:l}}function iEt(e,t,r,n,i){const o=eEt(e,null,n),s=UE(t,r),[a,l,u,c]=rEt(o,s,i),f=[];for(let h=Math.floor(a);h<u;h++)for(let d=Math.floor(l);d<c;d++)f.push({x:h,y:d,z:t});return f}function oEt({viewport:e,maxZoom:t,minZoom:r,zRange:n,extent:i,tileSize:o=ks,modelMatrix:s,modelMatrixInverse:a,zoomOffset:l=0}){let u=e.isGeospatial?Math.round(e.zoom+Math.log2(ks/o))+l:Math.ceil(e.zoom)+l;if(typeof r=="number"&&Number.isFinite(r)&&u<r){if(!i)return[];u=r}typeof t=="number"&&Number.isFinite(t)&&u>t&&(u=t);let c=i;return s&&a&&i&&!e.isGeospatial&&(c=HV(i,s)),e.isGeospatial?ZPt(e,u,n,i):iEt(e,u,o,c||KPt,a)}const XI=1,W_=2,sEt="never",aEt="no-overlap",WE="best-available",lEt=5,uEt={[WE]:fEt,[aEt]:hEt,[sEt]:()=>{}};class cEt{constructor(t){P(this,"opts",void 0),P(this,"_requestScheduler",void 0),P(this,"_cache",void 0),P(this,"_dirty",void 0),P(this,"_tiles",void 0),P(this,"_cacheByteSize",void 0),P(this,"_viewport",void 0),P(this,"_zRange",void 0),P(this,"_selectedTiles",void 0),P(this,"_frameNumber",void 0),P(this,"_modelMatrix",void 0),P(this,"_modelMatrixInverse",void 0),P(this,"_maxZoom",void 0),P(this,"_minZoom",void 0),P(this,"onTileLoad",void 0),P(this,"_getCullBounds",r0(T1)),this.opts=t,this.onTileLoad=r=>{this.opts.onTileLoad(r),this.opts.maxCacheByteSize&&(this._cacheByteSize+=r.byteLength,this._resizeCache())},this._requestScheduler=new tvt({maxRequests:t.maxRequests,throttleRequests:t.maxRequests>0}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._selectedTiles=null,this._frameNumber=0,this._modelMatrix=new Xr,this._modelMatrixInverse=new Xr,this.setOptions(t)}get tiles(){return this._tiles}get selectedTiles(){return this._selectedTiles}get isLoaded(){return this._selectedTiles!==null&&this._selectedTiles.every(t=>t.isLoaded)}get needsReload(){return this._selectedTiles!==null&&this._selectedTiles.some(t=>t.needsReload)}setOptions(t){Object.assign(this.opts,t),Number.isFinite(t.maxZoom)&&(this._maxZoom=Math.floor(t.maxZoom)),Number.isFinite(t.minZoom)&&(this._minZoom=Math.ceil(t.minZoom))}finalize(){for(const t of this._cache.values())t.isLoading&&t.abort();this._cache.clear(),this._tiles=[],this._selectedTiles=null}reloadAll(){for(const t of this._cache.keys()){const r=this._cache.get(t);!this._selectedTiles||!this._selectedTiles.includes(r)?this._cache.delete(t):r.setNeedsReload()}}update(t,{zRange:r,modelMatrix:n}={}){const i=new Xr(n),o=!i.equals(this._modelMatrix);if(!this._viewport||!t.equals(this._viewport)||!xo(this._zRange,r)||o){o&&(this._modelMatrixInverse=i.clone().invert(),this._modelMatrix=i),this._viewport=t,this._zRange=r;const a=this.getTileIndices({viewport:t,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:r,modelMatrix:this._modelMatrix,modelMatrixInverse:this._modelMatrixInverse});this._selectedTiles=a.map(l=>this._getTile(l,!0)),this._dirty&&this._rebuildTree()}else this.needsReload&&(this._selectedTiles=this._selectedTiles.map(a=>this._getTile(a.index,!0)));const s=this.updateTileStates();return this._pruneRequests(),this._dirty&&this._resizeCache(),s&&this._frameNumber++,this._frameNumber}isTileVisible(t,r){if(!t.isVisible)return!1;if(r&&this._viewport){const[n,i,o,s]=T1({viewport:this._viewport,z:this._zRange,cullRect:r}),{bbox:a}=t;if("west"in a)return a.west<o&&a.east>n&&a.south<s&&a.north>i;const l=Math.min(a.top,a.bottom),u=Math.max(a.top,a.bottom);return a.left<o&&a.right>n&&l<s&&u>i}return!0}getTileIndices({viewport:t,maxZoom:r,minZoom:n,zRange:i,modelMatrix:o,modelMatrixInverse:s}){const{tileSize:a,extent:l,zoomOffset:u}=this.opts;return oEt({viewport:t,maxZoom:r,minZoom:n,zRange:i,tileSize:a,extent:l,modelMatrix:o,modelMatrixInverse:s,zoomOffset:u})}getTileId(t){return"".concat(t.x,"-").concat(t.y,"-").concat(t.z)}getTileZoom(t){return t.z}getTileMetadata(t){const{tileSize:r}=this.opts;return{bbox:nEt(this._viewport,t.x,t.y,t.z,r)}}getParentIndex(t){const r=Math.floor(t.x/2),n=Math.floor(t.y/2),i=t.z-1;return{x:r,y:n,z:i}}updateTileStates(){const t=this.opts.refinementStrategy||WE,r=new Array(this._cache.size);let n=0;for(const i of this._cache.values())r[n++]=i.isVisible,i.isSelected=!1,i.isVisible=!1;for(const i of this._selectedTiles)i.isSelected=!0,i.isVisible=!0;(typeof t=="function"?t:uEt[t])(Array.from(this._cache.values())),n=0;for(const i of this._cache.values())if(r[n++]!==i.isVisible)return!0;return!1}_pruneRequests(){const{maxRequests:t}=this.opts,r=[];let n=0;for(const i of this._cache.values())i.isLoading&&(n++,!i.isSelected&&!i.isVisible&&r.push(i));for(;t>0&&n>t&&r.length>0;)r.shift().abort(),n--}_rebuildTree(){const{_cache:t}=this;for(const r of t.values())r.parent=null,r.children&&(r.children.length=0);for(const r of t.values()){const n=this._getNearestAncestor(r);r.parent=n,n!=null&&n.children&&n.children.push(r)}}_resizeCache(){const{_cache:t,opts:r}=this,n=r.maxCacheSize||(r.maxCacheByteSize?1/0:lEt*this.selectedTiles.length),i=r.maxCacheByteSize||1/0;if(t.size>n||this._cacheByteSize>i){for(const[s,a]of t)if(a.isVisible||(this._cacheByteSize-=r.maxCacheByteSize?a.byteLength:0,t.delete(s),this.opts.onTileUnload(a)),t.size<=n&&this._cacheByteSize<=i)break;this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort((s,a)=>s.zoom-a.zoom),this._dirty=!1)}_getTile(t,r){const n=this.getTileId(t);let i=this._cache.get(n),o=!1;return!i&&r?(i=new MPt(t),Object.assign(i,this.getTileMetadata(i.index)),Object.assign(i,{id:n,zoom:this.getTileZoom(i.index)}),o=!0,this._cache.set(n,i),this._dirty=!0):i&&i.needsReload&&(o=!0),i&&o&&i.loadData({getData:this.opts.getTileData,requestScheduler:this._requestScheduler,onLoad:this.onTileLoad,onError:this.opts.onTileError}),i}_getNearestAncestor(t){const{_minZoom:r=0}=this;let n=t.index;for(;this.getTileZoom(n)>r;){n=this.getParentIndex(n);const i=this._getTile(n);if(i)return i}return null}}function fEt(e){for(const t of e)t.state=0;for(const t of e)t.isSelected&&!XV(t)&&jE(t);for(const t of e)t.isVisible=Boolean(t.state&W_)}function hEt(e){for(const r of e)r.state=0;for(const r of e)r.isSelected&&XV(r);const t=Array.from(e).sort((r,n)=>r.zoom-n.zoom);for(const r of t)if(r.isVisible=Boolean(r.state&W_),r.children&&(r.isVisible||r.state&XI))for(const n of r.children)n.state=XI;else r.isSelected&&jE(r)}function XV(e){let t=e;for(;t;){if(t.isLoaded||t.content)return t.state|=W_,!0;t=t.parent}return!1}function jE(e){for(const t of e.children)t.isLoaded||t.content?t.state|=W_:jE(t)}const dEt={TilesetClass:cEt,data:{type:"data",value:[]},dataComparator:JPt.equals,renderSubLayers:{type:"function",value:e=>new U_(e),compare:!1},getTileData:{type:"function",optional:!0,value:null,compare:!1},onViewportLoad:{type:"function",optional:!0,value:null,compare:!1},onTileLoad:{type:"function",value:e=>{},compare:!1},onTileUnload:{type:"function",value:e=>{},compare:!1},onTileError:{type:"function",value:e=>console.error(e),compare:!1},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:WE,zRange:null,maxRequests:6,zoomOffset:0};class j_ extends z_{initializeState(){this.state={tileset:null,isLoaded:!1}}finalizeState(){var t,r;(t=this.state)===null||t===void 0||(r=t.tileset)===null||r===void 0||r.finalize()}get isLoaded(){var t,r;return(t=this.state)===null||t===void 0||(r=t.tileset)===null||r===void 0?void 0:r.selectedTiles.every(n=>n.isLoaded&&n.layers&&n.layers.every(i=>i.isLoaded))}shouldUpdateState({changeFlags:t}){return t.somethingChanged}updateState({changeFlags:t}){let{tileset:r}=this.state;const n=t.propsOrDataChanged||t.updateTriggersChanged,i=t.dataChanged||t.updateTriggersChanged&&(t.updateTriggersChanged.all||t.updateTriggersChanged.getTileData);r?n&&(r.setOptions(this._getTilesetOptions()),i?r.reloadAll():this.state.tileset.tiles.forEach(o=>{o.layers=null})):(r=new this.props.TilesetClass(this._getTilesetOptions()),this.setState({tileset:r})),this._updateTileset()}_getTilesetOptions(){const{tileSize:t,maxCacheSize:r,maxCacheByteSize:n,refinementStrategy:i,extent:o,maxZoom:s,minZoom:a,maxRequests:l,zoomOffset:u}=this.props;return{maxCacheSize:r,maxCacheByteSize:n,maxZoom:s,minZoom:a,tileSize:t,refinementStrategy:i,extent:o,maxRequests:l,zoomOffset:u,getTileData:this.getTileData.bind(this),onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),onTileUnload:this._onTileUnload.bind(this)}}_updateTileset(){const{tileset:t}=this.state,{zRange:r,modelMatrix:n}=this.props,i=t.update(this.context.viewport,{zRange:r,modelMatrix:n}),{isLoaded:o}=t,s=this.state.isLoaded!==o,a=this.state.frameNumber!==i;o&&(s||a)&&this._onViewportLoad(),a&&this.setState({frameNumber:i}),this.state.isLoaded=o}_onViewportLoad(){const{tileset:t}=this.state,{onViewportLoad:r}=this.props;r&&r(t.selectedTiles)}_onTileLoad(t){this.props.onTileLoad(t),t.layers=null,this.setNeedsUpdate()}_onTileError(t,r){this.props.onTileError(t),r.layers=null,this.setNeedsUpdate()}_onTileUnload(t){this.props.onTileUnload(t)}getTileData(t){const{data:r,getTileData:n,fetch:i}=this.props,{signal:o}=t;return t.url=typeof r=="string"||Array.isArray(r)?tEt(r,t):null,n?n(t):i&&t.url?i(t.url,{propName:"data",layer:this,signal:o}):null}renderSubLayers(t){return this.props.renderSubLayers(t)}getSubLayerPropsByTile(t){return null}getPickingInfo({info:t,sourceLayer:r}){return t.tile=r.props.tile,t}_updateAutoHighlight(t){t.sourceLayer&&t.sourceLayer.updateAutoHighlight(t)}renderLayers(){return this.state.tileset.tiles.map(t=>{const r=this.getSubLayerPropsByTile(t);if(!(!t.isLoaded&&!t.content))if(t.layers)r&&t.layers[0]&&Object.keys(r).some(n=>t.layers[0].props[n]!==r[n])&&(t.layers=t.layers.map(n=>n.clone(r)));else{const n=this.renderSubLayers({...this.props,id:"".concat(this.id,"-").concat(t.id),data:t.content,_offset:0,tile:t});t.layers=I_(n,Boolean).map(i=>i.clone({tile:t,...r}))}return t.layers})}filterSubLayer({layer:t,cullRect:r}){const{tile:n}=t.props;return this.state.tileset.isTileVisible(n,r)}}P(j_,"defaultProps",dEt);P(j_,"layerName","TileLayer");const pEt={setup(){const e=_t(),t=Wt(),r=Nn(),n=Bp();return t.$subscribe((i,o)=>{const s=Date.now();localStorage.setItem("user",JSON.stringify(o)),console.log("userStore subscription took",Date.now()-s,"ms")}),n.$subscribe((i,o)=>{localStorage.setItem("map",JSON.stringify(o))}),{gameStore:e,userStore:t,marketStore:r,mapStore:n}},props:{clickedObj:Object,hoverInfo:Object,panToPzk:String,panPaPos:Object,panBbox:Object,highlightNodes:Set},emits:["update:hoverInfo","update:clickedObj","update:panToPzk","update:panPaPos","panAnywhere"],data:()=>({deck:null,tileLayer:null,iconData:[],iconPositions:{},iconLayer:null,highlightedIconLayer:null,lineData:[],lineLayer:null,clickedObject:null,scores:{needTakes:{},pathCosts:{}},pzkSelectedTown:{},initialViewState:{target:[0,0],zoom:-8,minZoom:-12,maxZoom:-5},mapStateSavedTimestamp:0,hiddenNodesCount:0}),created(){},async mounted(){function e(t){const r=n=>{t()?n():setTimeout(i=>r(n),100)};return new Promise(r)}if(console.log("NodeMap mounted, sleeping"),await e(t=>this.gameStore.ready==!0&&this.iconsCalc),console.log("resuming"),this.iconData=await(await fetch("data/deck_icons.json")).json(),this.iconPositions=await(await fetch("data/deck_icon_positions.json")).json(),this.lineData=await(await fetch("data/deck_links.json")).json(),this.panToPzk in this.gameStore.nodes){console.log("panning to node",this.panToPzk);const t=this.gameStore.nodes[this.panToPzk].pos;this.mapStore.target=[t.x,-t.z],this.mapStore.zoom=-7}this.initialViewState.target=[...this.mapStore.target],this.initialViewState.zoom=this.mapStore.zoom,this.deck=this.initializeDeck(),this.scores=this.dijkstraScoreAll(),this.updateDeck()},watch:{"userStore.autotakenNodes"(e){this.updateLayers()},"userStore.mapHideInactive"(e){this.updateLayers()},linesCalc(e){this.updateLayers()},highlightNodes(e){},panPaPos(e){e&&this.deck&&this.panTo(e.x,e.z,-7)}},computed:{iconsCalc(){const e=[];if(this.hiddenNodesCount=0,!this.iconData)return e;const t=[];return this.iconData.forEach(([r,n])=>{if(r in this.scores.pathCosts){this.userStore.mapHideInactive&&this.userStore.autotakenNodes.has(r)==!1&&(this.hiddenNodesCount+=1);const i=this.highlightNodes&&this.highlightNodes.has(r),o={key:r,kind:n,pos:this.iconPositions[r],taken:this.userStore.autotakenNodes.has(r),isHighlighted:i,thisCpCost:this.gameStore.ready?this.gameStore.nodes[r].CP:0};e.push({...o,hidden:this.userStore.mapHideInactive&&!o.taken||i}),t.push({...o,hidden:!i})}}),console.log("iconsCalc",this.hiddenNodesCount,"hidden"),{normal:e,highlighted:t}},linesCalc(){let e=[];if(this.lineData.forEach(([t,r])=>{const n=this.userStore.autotakenNodes.has(t)&&this.userStore.autotakenNodes.has(r),i=this.userStore.autotakenGrindNodes.has(t)&&this.userStore.autotakenGrindNodes.has(r);e.push({start:this.iconPositions[t],end:this.iconPositions[r],color:n?i?[255,109,0,255]:[255,179,0,255]:[172,172,172,255]})}),this.clickedObject){if(this.clickedObject.key in this.userStore.pzJobs){const t=this.userStore.pzJobs[this.clickedObject.key];let r;for(const n of t.usedPath)r&&e.push({start:this.iconPositions[r],end:this.iconPositions[n],color:[64,255,0,255]}),r=n}if(this.gameStore.isLodgingTown(this.clickedObject.key)){const t=this.gameStore.tnk2tk(this.clickedObject.key);this.userStore.townWorkers(t).forEach(r=>{if(this.gameStore.jobIsPz(r.job)){const n=this.userStore.pzJobs[r.job.pzk];let i;for(const o of n.usedPath)i&&e.push({start:this.iconPositions[i],end:this.iconPositions[o],color:[64,255,0,255]}),i=o}if(this.gameStore.jobIsWorkshop(r.job)){const n=this.userStore.wsJobs.find(o=>o.worker.tnk==this.clickedObject.key&&o.hk==r.job.hk);let i;for(const o of n.usedPath)i&&e.push({start:this.iconPositions[i],end:this.iconPositions[o],color:[64,255,128,255]}),i=o}})}}return e}},methods:{makeIconImg:TY,formatFixed:vt,onMoveEvent(e){const t=Date.now();t-this.mapStateSavedTimestamp>100&&(this.mapStore.target=[...e.viewState.target],this.mapStore.zoom=e.viewState.zoom,this.mapStateSavedTimestamp=t),this.$emit("panAnywhere")},dijkstraScoreAll(){const e=Date.now(),t=this.gameStore.nodes,r=this.gameStore.links,n=0;r[n]=this.gameStore.townsWithLodging;let i=new Vg((l,u)=>o[l]-o[u]);i.push(n);let o={[n]:0},s={[n]:[]};for(var a;i.size();)a=i.pop(),r[a].forEach(l=>{if(!(l in t))return;const u=o[a]+t[l].CP;l in o?u<o[l]&&(o[l]=u,s[l]=[...s[a],l]):(i.push(l),o[l]=u,s[l]=[...s[a],l])});return console.log("scoreAll took",Date.now()-e,"ms"),{needTakes:s,pathCosts:o}},dijkstraScoreAllProfitPerCp(){const e=Date.now(),t=this.gameStore.nodes,r=this.gameStore.links,n=0;r[n]=[1,301,302,601,61,602,604,608,1002,1101,1141,1301,1314,1319,1343,1380,1623,1649,1691,1750];let i=new Set(Object.keys(t)),o={0:[]},s={0:0},a={0:0};for(const u of Object.keys(t))s[u]=1/0,a[u]=0,o[u]=[];let l=n;for(;r[l].forEach(f=>{const h=s[l]+t[f].CP,d=this.gameStore.profitData(f,o[l][0],150,10,10),p=h==0?0:-d.priceDaily/h;console.log(l,f,h,d.priceDaily,p),p<a[f]&&(s[f]=h,a[f]=p,o[f]=[...o[l],f])}),i.delete(l),i.length!=0;){let u=[];i.forEach(f=>{u.push([f,s[f]])}),u.sort((f,h)=>f[1]-h[1]);let c=-1;if([l,c]=u[0],c==1/0)break}return console.log("scoreAll took",Date.now()-e,"ms"),{needTakes:o,pathCosts:s}},makeIconsLayer(){return new gu({data:this.iconsCalc.normal,onClick:(e,t)=>this.objectClicked(e.object),onHover:e=>this.$emit("update:hoverInfo",e),getPosition:e=>e.pos,getColor:e=>[66,66,66,e.hidden?0:255],getIcon:function(e){return{url:"data/icons/node/"+(e.isHighlighted?"highlighted/":"")+(e.taken?"":"gray/")+`${e.kind}.png`,width:256,height:256,anchorX:128,anchorY:128}},updateTriggers:{},transitions:{getColor:400},modelMatrix:[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],getSize:e=>e.isHighlighted?50:30,autoHighlight:!0,pickable:!0})},makeHighlightedIconsLayer(){return new gu({id:"highlighted",data:this.iconsCalc.highlighted,onClick:(e,t)=>this.objectClicked(e.object),onHover:e=>this.$emit("update:hoverInfo",e),getPosition:e=>e.pos,getColor:e=>[66,66,66,e.hidden?0:255],getIcon:function(e){return{url:"data/icons/node/"+(e.isHighlighted?"highlighted/":"")+(e.taken?"":"gray/")+`${e.kind}.png`,width:256,height:256,anchorX:128,anchorY:128}},updateTriggers:{},transitions:{getColor:800},modelMatrix:[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],getSize:e=>e.isHighlighted?50:30,autoHighlight:!0,pickable:!0})},makeLineLayer(){return new xE({data:this.linesCalc,getSourcePosition:e=>e.start,getTargetPosition:e=>e.end,getColor:e=>e.color,modelMatrix:[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1]})},initializeDeck(){return console.log("initializeDeck",this.initialViewState,this.mapStore.target),this.tileLayer=new j_({data:"https://shrddr.github.io/maptiles/{z}/{x}_{y}.webp",minZoom:0,maxZoom:7,tileSize:256*12800,zoomOffset:14,extent:[-67*2*12800,-71*2*12800,58*2*12800,35*2*12800],renderSubLayers:e=>{const{bbox:{left:t,bottom:r,right:n,top:i}}=e.tile;return new B_(e,{data:null,image:e.data,bounds:[t,r,n,i]})}}),this.lineLayer=this.makeLineLayer(),this.iconLayer=this.makeIconsLayer(),this.highlightedIconLayer=this.makeHighlightedIconsLayer(),new N_({canvas:"deck-canvas",mapbox:!1,onViewStateChange:this.onMoveEvent,initialViewState:this.initialViewState,layers:[this.tileLayer,this.lineLayer,this.iconLayer,this.highlightedIconLayer],controller:{doubleClickZoom:!1},views:[new R_({controller:!0})]})},updateLayers(){!this.deck||(console.log("updateLayers"),this.lineLayer=this.makeLineLayer(),this.highlightedIconLayer=this.makeHighlightedIconsLayer(),this.iconLayer=this.makeIconsLayer(),this.deck.setProps({layers:[this.tileLayer,this.lineLayer,this.iconLayer,this.highlightedIconLayer]}))},updateDeck(){!this.deck||(console.log("updateDeck"),this.lineLayer=this.makeLineLayer(),this.highlightedIconLayer=this.makeHighlightedIconsLayer(),this.iconLayer=this.makeIconsLayer(),this.deck.setProps({layers:[this.tileLayer,this.lineLayer,this.iconLayer,this.highlightedIconLayer],initialViewState:this.initialViewState}))},objectClicked(e){this.clickedObject=e,this.$emit("update:clickedObj",e)},move(e){this.initialViewState.target=[e,0],console.log("trying to move to",e),console.log(this.deck.viewState)},panToBbox(e,t,r,n){const i=(e+t)/2,o=(r+n)/2,s=t-e,a=n-r;if(s==0&&a==0){this.panTo(i,o,-9);return}let l=6;for(;l>=0;l--){const u=2**(l-14),c=s*u,f=a*u;if(c<this.deck.viewManager.width&&f<this.deck.viewManager.height)break}this.panTo(i,o,l-14)},panTo(e,t,r){const n={...this.initialViewState};n.target=[e,-t],n.zoom=r,n.transitionDuration=100,n.transitionInterpolator=new O_({transitionProps:["target","zoom"]}),this.deck.setProps({initialViewState:n})}}},vEt={id:"deck-canvas",ref:"canvas"},gEt={id:"hack"},mEt={key:0,id:"topcenter"},_Et=R(") ");function yEt(e,t,r,n,i,o){return M(),L(j,null,[y("canvas",vEt,null,512),y("div",gEt,E(o.iconsCalc.length)+" icons",1),n.userStore.mapHideInactive?(M(),L("div",mEt,[R(E(e.hiddenNodesCount)+" inactive nodes hidden (",1),y("a",{href:"#",onClick:t[0]||(t[0]=s=>n.userStore.mapHideInactive=!1)},"show"),_Et])):Q("",!0)],64)}const bEt=ce(pEt,[["render",yEt],["__scopeId","data-v-34a3d2b5"]]);const wEt={setup(){const e=_t(),t=Wt();return{gameStore:e,userStore:t}},props:{tk:Number},emits:["selectWorker","editWorker"],components:{},data:()=>({}),computed:{filteredHouses(){const e={};for(const[t,r]of Object.entries(this.userStore.userWorkshops)){const n=this.gameStore.houseInfo[t];if(!n)throw Error(`unknown house ${t}`);n.affTown==this.tk&&(r.industry in e?e[r.industry][t]=r:e[r.industry]={[t]:r})}return e},filteredWorkers(){return this.userStore.userWorkers.filter(e=>e.job&&this.gameStore.jobIsWorkshop(e.job)&&e.job.hk in this.gameStore.houseInfo&&this.gameStore.houseInfo[e.job.hk].affTown==this.tk)}},methods:{formatFixed:vt}},YV=e=>(Ve("data-v-57c9d4e8"),e=e(),Ue(),e),SEt={key:0},TEt=YV(()=>y("summary",null,"Workshops",-1)),kEt={class:"vscroll40"},PEt=YV(()=>y("tr",null,[y("td",null,"house"),y("td",null,"type"),y("td",null,"workload"),y("td",null,"$/cycle"),y("td",null,"CP"),y("td",{colspan:"3"},"worker")],-1)),EEt=["onUpdate:modelValue"],CEt=["value"],AEt=["onUpdate:modelValue"],MEt=["onUpdate:modelValue"],xEt=["onUpdate:modelValue"],LEt=["onClick"],IEt=["onClick"],OEt={key:0},REt=["onClick"],DEt={key:1},NEt=["onClick"];function FEt(e,t,r,n,i,o){return Object.keys(o.filteredHouses).length?(M(),L("details",SEt,[TEt,y("div",kEt,[y("table",null,[PEt,(M(!0),L(j,null,wt(o.filteredHouses,(s,a)=>(M(),L(j,null,[(M(!0),L(j,null,wt(s,(l,u)=>(M(),L("tr",null,[y("td",null,E(n.gameStore.uloc.char[u])+" "+E(l.label),1),y("td",null,[ot(y("select",{"onUpdate:modelValue":c=>l.industry=c},[(M(!0),L(j,null,wt(n.gameStore.industries,(c,f)=>(M(),L("option",{value:f},E(c),9,CEt))),256))],8,EEt),[[qe,l.industry]])]),y("td",null,[ot(y("input",{type:"number",class:"w5em","onUpdate:modelValue":c=>l.manualWorkload=c},null,8,AEt),[[Gt,l.manualWorkload,void 0,{number:!0}]])]),y("td",null,[ot(y("input",{type:"number",class:"w5em","onUpdate:modelValue":c=>l.manualCycleIncome=c},null,8,MEt),[[Gt,l.manualCycleIncome,void 0,{number:!0}]])]),y("td",null,[ot(y("input",{type:"number",class:"float4","onUpdate:modelValue":c=>l.manualCp=c},null,8,xEt),[[Gt,l.manualCp,void 0,{number:!0}]])]),y("td",null,[(M(!0),L(j,null,wt(o.filteredWorkers.filter(c=>c.job.hk==u),c=>(M(),L("div",null,[y("button",{onClick:f=>this.$emit("editWorker",c)},"edit",8,LEt),R(" "+E(n.userStore.workerLabel(c))+" @ ",1),n.userStore.displayProfitPerCp?(M(),L(j,{key:0},[R(E(o.formatFixed(n.userStore.workerIncomePerCp(c),2))+" M$/day/CP ",1)],64)):(M(),L(j,{key:1},[R(E(o.formatFixed(n.userStore.workerIncome(c),2))+" M$/day ",1)],64)),y("button",{onClick:f=>c.job=null},"stop",8,IEt)]))),256)),l.industry=="mass"?(M(),L("div",OEt,[y("button",{onClick:c=>this.$emit("selectWorker",Number(u))},"add",8,REt)])):o.filteredWorkers.filter(c=>c.job.hk==u).length==0?(M(),L("div",DEt,[y("button",{onClick:c=>this.$emit("selectWorker",Number(u))},"send",8,NEt)])):Q("",!0)])]))),256))],64))),256))])])])):Q("",!0)}const zEt=ce(wEt,[["render",FEt],["__scopeId","data-v-57c9d4e8"]]);const BEt={setup(){const e=Wt(),t=_t(),r=Nn(),n=Bp();return n.$subscribe((i,o)=>{localStorage.setItem("map",JSON.stringify(o))}),e.$subscribe((i,o)=>{const s=Date.now();localStorage.setItem("user",JSON.stringify(o)),console.log("userStore subscription took",Date.now()-s,"ms")}),{marketStore:r,userStore:e,gameStore:t,mapStore:n}},components:{Worker:Ik,TownWorkers:B9,TownWorkshops:zEt,Plantzone:V9},props:{clickedNode:Object},emits:["selectLodging","selectHouses","hireWorker","editWorker","sendWorker","panToPaPos","showResourceDialog","setClickedNode","selectWorker"],data:()=>({}),methods:{makeIconSrc:qr,formatFixed:vt,jobCashFlowPercent(e){return e.profit.priceDaily/this.userStore.currentNodesCashflow[this.clickedNode.key]},selectLodging(e){this.$emit("selectLodging",e)},selectHouses(e){this.$emit("selectHouses",e)},hireWorker(e){this.$emit("hireWorker",e)},editWorker(e){this.$emit("editWorker",e)},sendWorker(e){this.$emit("sendWorker",e)},panToPaPos(e){this.$emit("panToPaPos",e)},showResourceDialog(e){this.$emit("showResourceDialog",e)},setClickedNode(e){this.$emit("setClickedNode",e)},selectWorker(e){this.$emit("selectWorker",e)}},computed:{activeNodeJobs_sorted(){const e=this.userStore.currentNodesJobs[this.clickedNode.key];return e.sort((t,r)=>this.jobCashFlowPercent(r)-this.jobCashFlowPercent(t)),e}},mounted(){},updated(){}},qV=e=>(Ve("data-v-74067c2a"),e=e(),Ue(),e),$Et={key:0,id:"mapObjDetail"},VEt=qV(()=>y("div",null,"\u02C5",-1)),UEt=[VEt],WEt={key:0,id:"clickedTownInfo",class:"vscrollable"},jEt={class:"vscroll40"},GEt={key:1,id:"clickedTownInfo",class:"vscrollable"},HEt={key:2,id:"clickedNodeName"},XEt=R(),YEt=qV(()=>y("abbr",{class:"tooltip",title:"is involved in a zero-cost path"},"\u2139",-1)),qEt={key:0,class:"fsxs"},ZEt=R(" shared by active nodejobs: "),KEt=["onClick"],JEt={key:1},QEt=["checked"],tCt=R(" zero-cost connection to nearest town (invested for droprate) "),eCt={key:3,id:"clickedPlantzoneInfo"};function rCt(e,t,r,n,i,o){const s=Ut("TownWorkers"),a=Ut("TownWorkshops"),l=Ut("Plantzone");return r.clickedNode?(M(),L("div",$Et,[y("div",{class:"rolldown",onClick:t[0]||(t[0]=u=>o.setClickedNode(null))},UEt),n.gameStore.isLodgingTown(r.clickedNode.key)?(M(),L("div",WEt,[y("div",jEt,[y("table",null,[bt(s,{o:n.gameStore.lodgingPerTown[n.gameStore.tnk2tk(r.clickedNode.key)],tk:n.gameStore.tnk2tk(r.clickedNode.key),onSelectLodging:o.selectLodging,onSelectHouses:o.selectHouses,onHireWorker:o.hireWorker,onEditWorker:o.editWorker,onSendWorker:o.sendWorker,onPanToPaPos:o.panToPaPos},null,8,["o","tk","onSelectLodging","onSelectHouses","onHireWorker","onEditWorker","onSendWorker","onPanToPaPos"])])]),n.userStore.userWorkshops?(M(),li(a,{key:0,tk:n.gameStore.tnk2tk(r.clickedNode.key),onSelectWorker:o.selectWorker,onEditWorker:o.editWorker},null,8,["tk","onSelectWorker","onEditWorker"])):Q("",!0)])):n.gameStore.townsWithRentableStorageSet.has(r.clickedNode.key)?(M(),L("div",GEt,[y("button",{onClick:t[1]||(t[1]=u=>this.$emit("selectHouses",n.gameStore.tnk2tk(r.clickedNode.key))),class:gr({unresolved:n.gameStore.ready&&n.userStore.townsInfra[n.gameStore.tnk2tk(r.clickedNode.key)].success==!1})}," config ",2)])):Q("",!0),n.gameStore.isConnectionNode(r.clickedNode.key)?(M(),L("div",HEt,[y("p",null,[R(E(n.gameStore.uloc.node[r.clickedNode.key])+" ",1),n.userStore.autotakenGrindNodes.has(r.clickedNode.key)?(M(),L(j,{key:0},[y("s",null,E(r.clickedNode.thisCpCost)+"CP",1),XEt,YEt],64)):(M(),L(j,{key:1},[R(E(r.clickedNode.thisCpCost)+"CP ",1)],64))]),r.clickedNode.key in n.userStore.currentNodesJobs?(M(),L("p",qEt,[ZEt,(M(!0),L(j,null,wt(o.activeNodeJobs_sorted,u=>(M(),L("p",null,[R(E(o.formatFixed(o.jobCashFlowPercent(u)*100))+"% - ",1),this.gameStore.jobIsPz(u.worker.job)?(M(),L("span",{key:0,onClick:c=>e.$emit("panToPaPos",this.gameStore.nodes[u.pzk].pos),class:"clickable"},E(n.gameStore.plantzoneName(u.pzk)),9,KEt)):(M(),L("span",JEt,E(n.gameStore.uloc.char[u.worker.job.hk])+" "+E(n.userStore.userWorkshops[u.worker.job.hk].label),1)),R(" @ "+E(o.formatFixed(u.profit.priceDaily,2))+" M$/day ",1)]))),256))])):Q("",!0),y("input",{type:"checkbox",onChange:t[2]||(t[2]=u=>n.userStore.modifyGrindTakens(u,r.clickedNode.key)),checked:n.userStore.grindTakenSet.has(r.clickedNode.key)},null,40,QEt),tCt])):Q("",!0),n.gameStore.isPlantzone(r.clickedNode.key)?(M(),L("div",eCt,[bt(l,{pzk:r.clickedNode.key,onShowResourceDialog:o.showResourceDialog,onEditWorker:o.editWorker},null,8,["pzk","onShowResourceDialog","onEditWorker"])])):Q("",!0)])):Q("",!0)}const nCt=ce(BEt,[["render",rCt],["__scopeId","data-v-74067c2a"]]);const iCt={setup(){const e=Wt(),t=_t(),r=Nn();return{gameStore:t,userStore:e,marketStore:r}},emits:["panToPaPos"],components:{WorkerJobDescription:X1},data:()=>({activeTab:"daily",selectedRedirect:-1}),methods:{makeIconSrc:qr,formatFixed:vt,strShortenLeft:CY},computed:{untakenPlantzonesNearestCpTownProfit(){const e=Date.now(),t=Wt(),r=_t();let n=[];this.gameStore.townsWithLodging.forEach(o=>{const s=this.gameStore.dijDiscountedNearestPlantzones(o,12);n[o]=s});let i=[];for(const[o,s]of Object.entries(n))s.forEach(([a,l,u])=>{if(this.userStore.workedPlantzones.has(a.toString()))return;const c=r.profitPzTownArtisans(a,o,l);if(!c.connected)return;c.path=u;const f=r.tnk2tk(o),h=this.selectedRedirect<0?f:r.tnk2tk(this.selectedRedirect),d=this.selectedRedirect==-2?new Set:r.plantzones[a].itemkeys,p=t.townInfraAddCost(f,1,d,h);c.townCp=p.cost,c.townCpTooltip=p.tooltip,c.dailyPerCp=c.priceDaily/(c.cp+c.townCp),!isNaN(c.dailyPerCp)&&i.push(c)});return i.sort((o,s)=>s.dailyPerCp-o.dailyPerCp),console.log("cpt: untakenPlantzonesNearestCpTownProfit took",Date.now()-e,"ms"),i}}},Ir=e=>(Ve("data-v-f9664521"),e=e(),Ue(),e),oCt={style:{"margin-top":"0.5rem","margin-bottom":"0.5rem"}},sCt={key:0},aCt=Ir(()=>y("tr",null,[y("th",null,"Item"),y("th",null,"Qty"),y("th",null,"M$")],-1)),lCt=["href"],uCt=["src","data-key"],cCt={class:"right"},fCt={class:"right"},hCt=R(" Cycles total:"),dCt=Ir(()=>y("br",null,null,-1)),pCt=Ir(()=>y("br",null,null,-1)),vCt=Ir(()=>y("br",null,null,-1)),gCt=R(" \u{1F33B}farming: "),mCt=Ir(()=>y("abbr",{class:"tooltip",title:"no idea, depends on weather"},"0",-1)),_Ct=Ir(()=>y("br",null,null,-1)),yCt={key:1},bCt=Ir(()=>y("tr",null,[y("th",{rowspan:"2"},"town"),y("th",{rowspan:"2"},"job"),y("th",{rowspan:"2"},"M$/day"),y("th",{colspan:"2"},"CP"),y("th",{rowspan:"2"},"M$/day/CP")],-1)),wCt=Ir(()=>y("tr",null,[y("th",null,[R(" \xA0job "),y("abbr",{class:"tooltip",title:"cost of the node (for plantzones) OR cost of the house (for workshops)"},"\u2139")]),y("th",null,[R(" town "),y("abbr",{class:"tooltip",title:"worker lodging + material storage"},"\u2139")])],-1)),SCt=["onClick"],TCt={class:""},kCt={class:"hlim parent"},PCt=["onClick"],ECt={class:"hlim right"},CCt=["src"],ACt={key:1,class:"hlim left"},MCt={class:"tac"},xCt={class:"tac"},LCt={class:"tac"},ICt={class:"tac"},OCt={class:"fsxs"},RCt=R(" Compares 12 nearest (by CP) untaken nodes of each town. Uses stats of median 40lvl artisans. Stash at: "),DCt=Ir(()=>y("option",{value:"-2"},"ignore storage cost",-1)),NCt=Ir(()=>y("option",{value:"-1"},"worker hometown",-1)),FCt=Ir(()=>y("option",{value:"0"},"cheapest storage \u{1F9CA}",-1)),zCt=["value"],BCt=Ir(()=>y("th",null,"\u{1F6CF}\uFE0Ftown",-1)),$Ct=Ir(()=>y("th",null,"job",-1)),VCt=Ir(()=>y("th",null,"worker",-1)),UCt=Ir(()=>y("th",null,"+M$/day",-1)),WCt=Ir(()=>y("th",null,"+CP",-1)),jCt=Ir(()=>y("th",null,"M$/day/CP",-1)),GCt=["onClick"],HCt={class:"hlim parent"},XCt=["onClick"],YCt={class:"hlim right"},qCt=["src"],ZCt={class:"tac"},KCt=["title"],JCt={class:"tac"},QCt={class:"tac"},tAt=["title"],eAt=R("+"),rAt=["title"],nAt={class:"tac"};function iAt(e,t,r,n,i,o){const s=Ut("RouterLink"),a=Ut("WorkerJobDescription");return M(),L(j,null,[y("nav",oCt,[y("span",{onClick:t[0]||(t[0]=l=>e.activeTab="daily"),class:gr({tab:1,green:e.activeTab!="daily"})},"Daily Yields",2),y("span",{onClick:t[1]||(t[1]=l=>e.activeTab="worst"),class:gr({tab:1,green:e.activeTab!="worst"})},"Worst Taken",2),y("span",{onClick:t[2]||(t[2]=l=>e.activeTab="best"),class:gr({tab:1,green:e.activeTab!="best"})},"Best Untaken",2)]),e.activeTab=="daily"?(M(),L("div",sCt,[y("table",null,[aCt,(M(!0),L(j,null,wt(n.userStore.jobsTally,(l,u)=>(M(),L("tr",null,[y("td",null,[y("a",{href:this.userStore.itemUrl+u},[y("img",{src:o.makeIconSrc(u),class:"iconitem","data-key":u},null,8,uCt),R(" "+E(n.gameStore.uloc.item[u]),1)],8,lCt)]),y("td",cCt,E(o.formatFixed(l,l<1?2:l<10?1:0)),1),y("td",fCt,E(o.formatFixed(this.marketStore.priceBunch({[u]:l})/1e6,2)),1)]))),256))]),hCt,dCt,R(" \u{1F5FA}\uFE0Fplantzones: "+E(o.formatFixed(n.userStore.cyclesTally.pz)),1),pCt,n.userStore.cyclesTally.workshop>0?(M(),L(j,{key:0},[R(" \u{1F3ED}workshops: "+E(o.formatFixed(n.userStore.cyclesTally.workshop)),1),vCt],64)):Q("",!0),gCt,mCt,_Ct,R(" = "+E(o.formatFixed(n.userStore.cyclesTally.chicken))+" chicken/day ",1)])):Q("",!0),e.activeTab=="worst"?(M(),L("table",yCt,[bCt,wCt,(M(!0),L(j,null,wt(n.userStore.workersSortedByIncomePerCp,({w:l,i:u,ipc:c})=>(M(),L("tr",null,[y("td",null,[y("span",{onClick:f=>e.$emit("panToPaPos",this.gameStore.nodes[l.tnk].pos,-7),class:"clickable"},E(n.gameStore.uloc.town[n.gameStore.tnk2tk(l.tnk)]),9,SCt)]),y("td",TCt,[y("div",kCt,[this.gameStore.jobIsPz(l.job)?(M(),L(j,{key:0},[y("span",{class:"hlim left clickable",onClick:f=>e.$emit("panToPaPos",this.gameStore.nodes[l.job.pzk].pos)},E(n.gameStore.parentNodeName(l.job.pzk)),9,PCt),y("span",ECt,[(M(!0),L(j,null,wt(n.gameStore.plantzones[l.job.pzk].itemkeys,f=>(M(),li(s,{tag:"a",to:{path:"./settings",hash:"#item"+f}},{default:we(()=>[y("img",{src:o.makeIconSrc(f),class:"iconitem"},null,8,CCt)]),_:2},1032,["to"]))),256))])],64)):(M(),L("span",ACt,[bt(a,{w:l},null,8,["w"])]))])]),y("td",MCt,E(o.formatFixed(u,2)),1),y("td",xCt,E(o.formatFixed(n.userStore.workerSharedConnectionCP(l),2)),1),y("td",LCt,E(o.formatFixed(n.userStore.workerSharedLodgageCP(l).value,2)),1),y("td",ICt,E(o.formatFixed(c,2)),1)]))),256))])):Q("",!0),e.activeTab=="best"?(M(),L(j,{key:2},[y("span",OCt,[RCt,ot(y("select",{"onUpdate:modelValue":t[3]||(t[3]=l=>e.selectedRedirect=l),class:"fsxs"},[DCt,NCt,FCt,(M(!0),L(j,null,wt(n.gameStore.townsWithRedirectableStorage,l=>(M(),L("option",{value:l},E(n.gameStore.uloc.node[l]),9,zCt))),256))],512),[[qe,e.selectedRedirect]])]),y("table",null,[y("tr",null,[BCt,$Ct,VCt,UCt,WCt,jCt,Q("",!0)]),(M(!0),L(j,null,wt(o.untakenPlantzonesNearestCpTownProfit,l=>(M(),L("tr",null,[y("td",null,[y("span",{onClick:u=>e.$emit("panToPaPos",this.gameStore.nodes[l.tnk].pos),class:"clickable"},E(n.gameStore.nodeName(l.tnk)),9,GCt)]),y("td",null,[y("div",HCt,[y("span",{onClick:u=>e.$emit("panToPaPos",this.gameStore.nodes[l.key].pos),class:"hlim left clickable"},E(n.gameStore.parentNodeName(l.key)),9,XCt),y("span",YCt,[(M(!0),L(j,null,wt(l.itemkeys,u=>(M(),li(s,{tag:"a",to:{path:"./settings",hash:"#item"+u}},{default:we(()=>[y("img",{src:o.makeIconSrc(u),class:"iconitem"},null,8,qCt)]),_:2},1032,["to"]))),256))])])]),y("td",ZCt,[l.alt_workers?(M(),L("abbr",{key:0,class:"tooltip nound",title:l.alt_workers.map(u=>`${n.gameStore.uloc.char[u.charkey]}: ${o.formatFixed(u.priceDaily,2)} M$/day = ${o.formatFixed(100*u.priceDaily/l.priceDaily)}%`).join(`
`)},E({goblin:"\u{1F47A}",giant:"\u{1F422}",human:"\u{1F468}"}[l.kind]),9,KCt)):Q("",!0)]),y("td",JCt,E(o.formatFixed(l.priceDaily,2)),1),y("td",QCt,[y("abbr",{title:Array.from(l.path,u=>`${n.userStore.autotakenNodes.has(u)?0:n.gameStore.nodes[u].CP} ${n.gameStore.uloc.node[u]}`).join(`
`),class:"tooltip"},E(o.formatFixed(l.cp)),9,tAt),eAt,y("abbr",{title:l.townCpTooltip,class:"tooltip"},E(o.formatFixed(l.townCp)),9,rAt),R("="+E(o.formatFixed(l.cp+l.townCp)),1)]),y("td",nAt,E(o.formatFixed(l.dailyPerCp,2)),1),Q("",!0)]))),256))])],64)):Q("",!0)],64)}const oAt=ce(iCt,[["render",iAt],["__scopeId","data-v-f9664521"]]);const sAt={setup(){const e=Wt();return{gameStore:_t(),userStore:e}},props:{tk:Number,hk:Number,show:{type:Boolean,default:!1}},data:()=>({}),watch:{},methods:{makeIconSrc:qr,formatFixed:vt,workshopNearestTownsFreeWorkersProfits(e){const t=this.gameStore.houseInfo[this.hk].affTown,r=this.gameStore.tk2tnk(t),n=this.userStore.userWorkshops[this.hk].manualCp,i=[];return this.gameStore.dijkstraNearestTowns(r,e,this.userStore.autotakenNodes,!0).forEach(([s,a,l])=>{const u=this.gameStore._tnk2tk[s];this.userStore.getFreeWorkers(u).forEach(f=>{i.push(this.gameStore.workshopSelectionEntry(this.hk,u,s,l,f,a,n))})}),i.sort((s,a)=>a.dailyPerCp-s.dailyPerCp),i},assign(e,t){this.userStore.assignWorker(e,{kind:"workshop",hk:Number(t),recipe:void 0}),this.$emit("update:show",!1)}},computed:{freeWorkers(){return this.workshopNearestTownsFreeWorkersProfits(99)},workshop(){return this.userStore.userWorkshops[this.hk]}}},ZV=e=>(Ve("data-v-8d9b5356"),e=e(),Ue(),e),aAt=ZV(()=>y("abbr",{class:"tooltip",title:"see Settings > \u{1F3ED}Workshops"},"\u2139",-1)),lAt=R("): "),uAt=R(" None "),cAt={key:0},fAt=ZV(()=>y("tr",null,[y("th",null,"town"),y("th",null,"worker"),y("th",null,"walk"),y("th",null,"cycles/day"),y("th",null,"+M$/day"),y("th",null,"+CP"),y("th",null,"M$/day/CP"),y("th",null,"action")],-1)),hAt={key:0},dAt={class:"fsxs"},pAt={class:"center"},vAt=["title"],gAt=R("+"),mAt={class:"tooltip",title:"see Settings > \u{1F3ED}Workshops"},_At=R("+"),yAt=["title"],bAt={class:"center"},wAt=["onClick"];function SAt(e,t,r,n,i,o){return r.hk?(M(),L(j,{key:0},[y("div",null,[R("Nearest idle workers for "+E(n.gameStore.uloc.char[r.hk])+" "+E(o.workshop.label?'"'+o.workshop.label+'"':"")+" ("+E(o.workshop.manualWorkload)+" workload, "+E(o.workshop.manualCycleIncome)+" $/cycle, type: "+E(o.workshop.industry)+" ",1),aAt,lAt,o.freeWorkers.length==0?(M(),L(j,{key:0},[uAt],64)):Q("",!0)]),o.freeWorkers.length?(M(),L("table",cAt,[fAt,(M(!0),L(j,null,wt(o.freeWorkers,s=>(M(),L(j,null,[s.profit.distance<1e6?(M(),L("tr",hAt,[y("td",null,E(n.gameStore.nodeName(s.tnk)),1),y("td",null,[R(E(s.w.label)+" ",1),y("span",dAt,E(o.formatFixed(s.profit.statsOnWs.wspd,2))+"\u{1F528} "+E(o.formatFixed(s.profit.statsOnWs.mspd,2))+"\u{1F9B6} "+E(o.formatFixed(s.profit.statsOnWs.luck,2))+"\u{1F340} ",1)]),y("td",null,E(o.formatFixed(s.profit.distance)),1),y("td",null,E(o.formatFixed(s.profit.cyclesDaily,1)),1),y("td",pAt,E(o.formatFixed(s.profit.priceDaily,2)),1),y("td",null,[y("abbr",{class:"tooltip",title:`connection cost:
`+Array.from(s.path,a=>`${n.userStore.autotakenNodes.has(a)?0:n.gameStore.nodes[a].CP} ${n.gameStore.uloc.node[a]}`).join(`
`)},E(s.mapCp),9,vAt),gAt,y("abbr",mAt,E(s.houseCp),1),_At,y("abbr",{class:"tooltip",title:s.infraTooltip},E(s.townCp),9,yAt),R("="+E(s.cp),1)]),y("td",bAt,E(o.formatFixed(s.dailyPerCp,3)),1),y("td",null,[y("button",{onClick:a=>o.assign(s.w,r.hk)}," assign ",8,wAt)])])):Q("",!0)],64))),256))])):Q("",!0)],64)):Q("",!0)}const TAt=ce(sAt,[["render",SAt],["__scopeId","data-v-8d9b5356"]]);const kAt={setup(){const e=Wt();return{gameStore:_t(),userStore:e}},props:{visible:Boolean},emits:["close","select"],data(){return{searchQuery:"",searchResults:[],emptySet:new Set([])}},computed:{itemNamesKeys(){const e={};return this.gameStore.ready&&Object.keys(this.gameStore.itemkeyPlantzones).forEach(t=>{const r=this.gameStore.uloc.item[t];e[r]=Number(t)}),e}},watch:{searchQuery(e){this.searchResults={};let t=0;for(const[r,n]of Object.entries(this.itemNamesKeys))if(r.toLowerCase().includes(e.toLowerCase())&&(this.searchResults[r]={hlSet:n in this.gameStore.itemkeyPlantzones?this.gameStore.itemkeyPlantzones[n]:new Set([]),type:"dropsItem",itemKey:n},t++,t>=10))break;t=0;for(const[r,n]of Object.entries(this.gameStore.uloc.node)){if(n.toLowerCase().includes(e.toLowerCase())&&(n in this.searchResults||(this.searchResults[n]={type:"name",hlSet:new Set([])}),this.searchResults[n].hlSet.add(Number(r)),t++,t>=10))break;const i=`${r}`;if(i.toLowerCase().includes(e.toLowerCase())&&(i in this.searchResults||(this.searchResults[i]={type:"key",hlSet:new Set([])}),this.searchResults[i].hlSet.add(Number(r)),t++,t>=10))break}}},methods:{makeIconSrc:qr,onInput(){this.searchQuery===""&&(this.searchResults={})},selectItem(e){this.$emit("select",e),this.$emit("close")},focusInput(){var e;(e=this.$refs.searchInput)==null||e.focus()}}},PAt={key:0,class:"search-bar"},EAt={key:0},CAt=["onClick"],AAt=["src"];function MAt(e,t,r,n,i,o){return r.visible?(M(),L("div",PAt,[ot(y("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>i.searchQuery=s),onInput:t[1]||(t[1]=(...s)=>o.onInput&&o.onInput(...s)),ref:"searchInput",placeholder:"Search..."},null,544),[[Gt,i.searchQuery]]),y("button",{onClick:t[2]||(t[2]=s=>o.selectItem(i.emptySet))},"reset"),i.searchResults?(M(),L("ul",EAt,[(M(!0),L(j,null,wt(i.searchResults,(s,a)=>(M(),L("li",{onClick:l=>o.selectItem(s.hlSet)},[s.type=="dropsItem"?(M(),L(j,{key:0},[y("img",{src:o.makeIconSrc(s.itemKey),class:"iconitem"},null,8,AAt),R(" "+E(a)+" ("+E(s.hlSet.size)+" nodes) ",1)],64)):s.type=="name"?(M(),L(j,{key:1},[R(" \u{1F5FA}\uFE0F "+E(a),1)],64)):s.type=="key"?(M(),L(j,{key:2},[R(" \u{1F5FA}\uFE0F "+E(a)+" - "+E(n.gameStore.uloc.node[a]),1)],64)):Q("",!0)],8,CAt))),256))])):Q("",!0)])):Q("",!0)}const xAt=ce(kAt,[["render",MAt]]);const LAt={setup(){const e=_t(),t=Wt(),r=Nn(),n=Bp();return{gameStore:e,userStore:t,marketStore:r,mapStore:n}},components:{Worker:Ik,TownWorkers:B9,Plantzone:V9,ModalDialog:Rk,WorkerEdit:PB,WorkerSendSelection:Cpt,LodgingSelection:Fpt,HousesSelection:M0t,NodeMap:bEt,MapSelectedInfo:nCt,EmpireOverview:oAt,FloatingResourceEdit:rE,WorkerSelection:TAt,SearchBar:xAt},data:()=>({workerEditing:null,workerEditingInitial:null,workerEditingInitialProfit:0,workerDialogVisible:!1,sendDialogWorker:null,sendDialogVisible:!1,lodgingDialogTown:"0",lodgingDialogData:null,lodgingDialogVisible:!1,housesDialogTown:0,housesDialogVisible:!1,importDialogVisible:!1,clickedNode:null,hoverInfo:null,resourceDialogWspd:150,resourceDialogRgroup:1,resourceDialogWkld:400,resourceDialogVisible:!1,panToPzk:null,panPaPos:null,selectWorkerDialogVisible:!1,selectWorkerHouseKey:0,importData:null,importSkipSections:{},prerelease_zerocost:!0,prerelease_colorGoblins:!1,showSearchBar:!1,highlightNodes:new Set([])}),created(){console.log("addEventListener"),window.addEventListener("keydown",this.onKeydown)},watch:{},computed:{},mounted(){},beforeUnmount(){window.removeEventListener("keydown",this.onKeydown)},methods:{makeIconSrc:qr,formatFixed:vt,randBetween:da,levelup:Pd,onKeydown(e){e.ctrlKey&&e.code==="KeyF"&&(e.preventDefault(),this.showSearchBar=!0,nu(()=>this.$refs.searchBar.focusInput())),e.key==="Escape"&&(this.showSearchBar?this.showSearchBar=!1:this.handleSearchSelection(new Set([])))},handleSearchSelection(e){this.highlightNodes=e,nu(()=>{if(this.$refs.nodeMap.updateLayers(),e.size>0){let t=1e99,r=1e99,n=-1e99,i=-1e99;e.forEach(o=>{t=Math.min(t,this.gameStore.nodes[o].pos.x),r=Math.min(r,this.gameStore.nodes[o].pos.z),n=Math.max(n,this.gameStore.nodes[o].pos.x),i=Math.max(i,this.gameStore.nodes[o].pos.z)}),this.$refs.nodeMap.panToBbox(t,n,r,i)}}),this.showSearchBar=!1},hireWorker(e){const t=this.userStore.useDefaultWorker?{...this.userStore.defaultWorker,tnk:this.gameStore.tk2tnk(e)}:this.hireRandomArtGob(e);console.log("w",t),this.userStore.userWorkers.push(t)},hireRandomArtGob(e){const t=this.userStore.newWorkerName(e),r=7572;let n={tk:e,tnk:this.gameStore.tk2tnk(e),charkey:r,label:t,level:1,wspdSheet:this.gameStore.workerStatic[r].wspd/1e6,mspdSheet:this.gameStore.workerStatic[r].mspd/100,luckSheet:this.gameStore.workerStatic[r].luck/1e4,skills:[],job:null};return n.skills.push(this.gameStore.randomSkill(n.skills)),Pd(this.gameStore,n,40),n.wspdSheet=Math.round(n.wspdSheet*100)/100,n.mspdSheet=Math.round(n.mspdSheet*100)/100,n.luckSheet=Math.round(n.luckSheet*100)/100,n},fireWorker(e){this.userStore.userWorkers=this.userStore.userWorkers.filter(t=>t!=e)},sendWorker(e){this.gameStore.workerStatsOnPlantzone(e),this.sendDialogWorker=e,this.sendDialogVisible=!0},unsendWorker(e){e.job=null},editWorker(e){this.workerEditing=e,this.workerEditingInitial=JSON.parse(JSON.stringify(e)),this.workerEditingInitialProfit=e&&e.job&&typeof e.job=="number"?this.userStore.pzJobs[this.workerEditing.job].profit.priceDaily:0,this.workerDialogVisible=!0},hireAll(){for(const e of Object.keys(this.gameStore.lodgingPerTown)){const t=this.userStore.townFreeLodgingCount(e);for(let r=0;r<t;r++)this.hireWorker(e)}},fireAll(){this.userStore.userWorkers=[]},selectLodging(e){this.lodgingDialogTown=e,this.lodgingDialogData=this.gameStore.lodgingPerTown[e],this.lodgingDialogVisible=!0},selectHouses(e){this.housesDialogTown=e,this.housesDialogVisible=!0,console.log("housesDialogVisible")},selectWorker(e){this.selectWorkerHouseKey=e,this.selectWorkerDialogVisible=!0,console.log("selectWorkerDialogVisible")},fileImport(e){if(!e)return;const t=e.target[0].files;if(t.length<1)return;const r=t[0];console.log("fileImport",r);const n=new FileReader;n.onload=this.fileParse,n.readAsText(r)},fileParse(e){let t=e.target.result,r=JSON.parse(t);for(let n=r.userWorkers.length-1;n>=0;n--){const i=r.userWorkers[n].charkey;i in this.gameStore.workerStatic||(console.log(`unknown charkey ${i} - discarded`),r.userWorkers.splice(n,1))}r.userWorkers.forEach(n=>{delete n.tk;const i=this.gameStore.workerStatic[n.charkey];if("wspdLvlup"in n){const o=(i.wspd+n.wspdLvlup)/1e6;n.wspdSheet=Math.round(o*100)/100,delete n.wspdLvlup}if("mspdLvlup"in n){const o=i.mspd/100*(1+n.mspdLvlup/1e6);n.mspdSheet=Math.round(o*100)/100,delete n.mspdLvlup}if("mspdBase"in n&&delete n.mspdBase,"luckLvlup"in n){const o=(i.luck+n.luckLvlup)/1e4;n.luckSheet=Math.round(o*100)/100,delete n.luckLvlup}if(this.gameStore.jobIsWorkshop(n.job)&&(n.job.hk in this.userStore.userWorkshops||(this.userStore.userWorkshops[n.job.hk]={...this.userStore.defaultUserWorkshop},console.log(`userWorkshop #${n.job.hk} not set, using default`))),typeof n.job=="number"){const o=n.job;n.job={kind:"plantzone",pzk:o,storage:n.tnk}}this.gameStore.jobIsPz(n.job)&&!(n.job.pzk in this.gameStore.plantzones)&&(console.log(`removing plantzone job of worker ${n.label}: unknown pzk`,n.job),n.job=null),Array.isArray(n.job)&&(n.job={kind:"custom",profit:n.job[1],cp:n.job[2],label:n.job[3]})}),console.log("import parsed"),this.userStore.$patch(r),r.lodgingTaken&&Object.keys(r.lodgingTaken).length>0?(console.log("overwriting lodgingTaken"),this.userStore.lodgingTaken=r.lodgingTaken):console.log("keeping lodgingTaken"),r.lodgingP2W&&Object.keys(r.lodgingP2W).length>0?(console.log("overwriting lodgingP2W"),this.userStore.lodgingP2W=r.lodgingP2W):console.log("keeping lodgingP2W"),console.log("import done"),this.importDialogVisible=!1},fileExport(){var e=document.createElement("a");let t={activateAncado:this.userStore.activateAncado,lodgingP2W:this.userStore.lodgingP2W,lodgingTaken:this.userStore.lodgingTaken,userWorkers:this.userStore.userWorkers,farmingEnable:this.userStore.farmingEnable,farmingProfit:this.userStore.farmingProfit,farmingBareProfit:this.userStore.farmingBareProfit,grindTakenList:this.userStore.grindTakenList};const r=JSON.stringify(t);var n=new Blob([r],{type:"text/plain"});e.href=URL.createObjectURL(n),e.download="user.json",e.click()},log(e){console.log(e)},showResourceDialog(e){this.resourceDialogVisible=!0,this.resourceDialogRgroup=this.gameStore.plantzoneStatic[e].regiongroup,this.resourceDialogWkld=this.gameStore.plantzones[e].peg.time,this.resourceDialogWspd=this.userStore.workedPlantzones.has(String(e))?this.userStore.pzJobs[e].worker.wspdSheet+this.gameStore.wspdBonus(this.userStore.pzJobs[e].worker,"farm"):150},panToHash(){this.$route.hash&&(this.panToPzk=this.$route.hash.replace("#node",""))},panToPaPos(e){this.panPaPos=e},setClickedNode(e){this.clickedNode=e}},mounted(){this.panToHash()}},Te=e=>(Ve("data-v-a5a4a4ea"),e=e(),Ue(),e),IAt=Te(()=>y("button",null,"import",-1)),OAt=Te(()=>y("br",null,null,-1)),RAt={style:{width:"24em"}},DAt=R("Test with workspeed: "),NAt={id:"canvas-limiter"},FAt={key:0},zAt=["src"],BAt={key:1},$At=Te(()=>y("br",null,null,-1)),VAt=Te(()=>y("br",null,null,-1)),UAt={id:"topleft"},WAt=Te(()=>y("summary",null,"Empire",-1)),jAt={id:"leftside"},GAt={id:"rightside"},HAt={id:"totals"},XAt={class:"fsxs"},YAt=Te(()=>y("br",null,null,-1)),qAt={key:0,title:"CP not allocated for fences, enable Farming on Settings page"},ZAt={key:1,title:"not all fences being worked, for best results either send 10 workers or none at all"},KAt=Te(()=>y("br",null,null,-1)),JAt=Te(()=>y("br",null,null,-1)),QAt=Te(()=>y("br",null,null,-1)),t4t={class:"fsxs"},e4t=R(" invested for droprate: "),r4t=["title"],n4t=Te(()=>y("br",null,null,-1)),i4t=Te(()=>y("br",null,null,-1)),o4t=Te(()=>y("br",null,null,-1)),s4t=Te(()=>y("br",null,null,-1)),a4t=Te(()=>y("br",null,null,-1)),l4t=Te(()=>y("br",null,null,-1)),u4t={class:"fsxs"},c4t=Te(()=>y("br",null,null,-1)),f4t=Te(()=>y("br",null,null,-1)),h4t=Te(()=>y("br",null,null,-1)),d4t=Te(()=>y("br",null,null,-1)),p4t=R(" (M$/day/CP) "),v4t={class:"fsxs"},g4t=Te(()=>y("br",null,null,-1)),m4t=Te(()=>y("br",null,null,-1)),_4t=Te(()=>y("br",null,null,-1)),y4t=Te(()=>y("br",null,null,-1)),b4t=Te(()=>y("div",{style:{clear:"both"}},null,-1)),w4t={id:"workerlist"},S4t=Te(()=>y("summary",null,"All towns/workers list",-1)),T4t=R(" show: "),k4t={class:"switch mauto"},P4t=Te(()=>y("span",{class:"slider"},null,-1)),E4t=R(" names "),C4t={class:"switch mauto"},A4t=["disabled"],M4t=Te(()=>y("span",{class:"slider"},null,-1)),x4t=R(" stat ranks "),L4t={class:"switch mauto"},I4t=["disabled"],O4t=Te(()=>y("span",{class:"slider"},null,-1)),R4t=R(" stats after skills "),D4t={class:"switch mauto"},N4t=Te(()=>y("span",{class:"slider"},null,-1)),F4t=R(" efficiency ");function z4t(e,t,r,n,i,o){const s=Ut("WorkerEdit"),a=Ut("ModalDialog"),l=Ut("WorkerSendSelection"),u=Ut("LodgingSelection"),c=Ut("HousesSelection"),f=Ut("WorkerSelection"),h=Ut("FloatingResourceEdit"),d=Ut("NodeMap"),p=Ut("EmpireOverview"),v=Ut("MapSelectedInfo"),m=Ut("search-bar"),g=Ut("TownWorkers");return M(),L(j,null,[bt(a,{show:e.workerDialogVisible,"onUpdate:show":t[1]||(t[1]=_=>e.workerDialogVisible=_)},{default:we(()=>[bt(s,{workerEditing:e.workerEditing,workerInitial:e.workerEditingInitial,initialProfit:e.workerEditingInitialProfit,show:e.workerDialogVisible,"onUpdate:show":t[0]||(t[0]=_=>e.workerDialogVisible=_)},null,8,["workerEditing","workerInitial","initialProfit","show"])]),_:1},8,["show"]),bt(a,{show:e.sendDialogVisible,"onUpdate:show":t[3]||(t[3]=_=>e.sendDialogVisible=_)},{default:we(()=>[bt(l,{w:e.sendDialogWorker,show:e.sendDialogVisible,"onUpdate:show":t[2]||(t[2]=_=>e.sendDialogVisible=_)},null,8,["w","show"])]),_:1},8,["show"]),bt(a,{show:e.lodgingDialogVisible,"onUpdate:show":t[5]||(t[5]=_=>e.lodgingDialogVisible=_)},{default:we(()=>[bt(u,{tk:e.lodgingDialogTown,o:e.lodgingDialogData,show:e.lodgingDialogVisible,"onUpdate:show":t[4]||(t[4]=_=>e.lodgingDialogVisible=_)},null,8,["tk","o","show"])]),_:1},8,["show"]),bt(a,{show:e.housesDialogVisible,"onUpdate:show":t[7]||(t[7]=_=>e.housesDialogVisible=_)},{default:we(()=>[bt(c,{tk:e.housesDialogTown,show:e.housesDialogVisible,"onUpdate:show":t[6]||(t[6]=_=>e.housesDialogVisible=_)},null,8,["tk","show"])]),_:1},8,["show"]),bt(a,{show:e.selectWorkerDialogVisible,"onUpdate:show":t[9]||(t[9]=_=>e.selectWorkerDialogVisible=_)},{default:we(()=>[bt(f,{hk:e.selectWorkerHouseKey,show:e.selectWorkerDialogVisible,"onUpdate:show":t[8]||(t[8]=_=>e.selectWorkerDialogVisible=_)},null,8,["hk","show"])]),_:1},8,["show"]),bt(a,{show:e.importDialogVisible,"onUpdate:show":t[12]||(t[12]=_=>e.importDialogVisible=_)},{default:we(()=>[y("form",{onSubmit:t[11]||(t[11]=tp(_=>o.fileImport(_),["prevent"]))},[y("input",{type:"file",accept:".json",onClick:t[10]||(t[10]=_=>o.fileImport())}),IAt,OAt],32)]),_:1},8,["show"]),bt(a,{show:e.resourceDialogVisible,"onUpdate:show":t[15]||(t[15]=_=>e.resourceDialogVisible=_)},{default:we(()=>[bt(h,{rgk:e.resourceDialogRgroup,wspd:e.resourceDialogWspd,workload:e.resourceDialogWkld,show:e.resourceDialogVisible,"onUpdate:show":t[13]||(t[13]=_=>e.resourceDialogVisible=_)},null,8,["rgk","wspd","workload","show"]),y("div",RAt,[DAt,ot(y("input",{type:"range",class:"vmid","onUpdate:modelValue":t[14]||(t[14]=_=>e.resourceDialogWspd=_),min:"40",max:"200",step:"0.01"},null,512),[[Gt,e.resourceDialogWspd,void 0,{number:!0}]]),R(" "+E(e.resourceDialogWspd),1)])]),_:1},8,["show"]),y("main",null,[y("div",NAt,[bt(d,{ref:"nodeMap",clickedObj:e.clickedNode,"onUpdate:clickedObj":t[16]||(t[16]=_=>e.clickedNode=_),hoverInfo:e.hoverInfo,"onUpdate:hoverInfo":t[17]||(t[17]=_=>e.hoverInfo=_),panToPzk:e.panToPzk,"onUpdate:panToPzk":t[18]||(t[18]=_=>e.panToPzk=_),panPaPos:e.panPaPos,"onUpdate:panPaPos":t[19]||(t[19]=_=>e.panPaPos=_),onPanAnywhere:t[20]||(t[20]=_=>e.panPaPos=null),highlightNodes:e.highlightNodes},null,8,["clickedObj","hoverInfo","panToPzk","panPaPos","highlightNodes"]),e.hoverInfo&&e.hoverInfo.object?(M(),L("div",{key:0,id:"tooltip",style:jl({left:e.hoverInfo.x+"px",top:e.hoverInfo.y+"px"})},[R(E(e.hoverInfo.object.key)+" "+E(n.gameStore.uloc.node[e.hoverInfo.object.key])+" "+E(e.hoverInfo.object.thisCpCost)+"CP ",1),e.hoverInfo.object.key in this.gameStore.plantzones?(M(),L("span",FAt,[(M(!0),L(j,null,wt(this.gameStore.plantzones[e.hoverInfo.object.key].itemkeys,_=>(M(),L("img",{src:o.makeIconSrc(_),class:"iconitem"},null,8,zAt))),256))])):Q("",!0),this.gameStore.townsConnectionRoots.has(e.hoverInfo.object.key)?(M(),L("span",BAt,[$At,R("[town "+E(this.gameStore._tnk2tk[e.hoverInfo.object.key])+"] ",1)])):Q("",!0),VAt],4)):Q("",!0),y("div",UAt,[y("details",null,[WAt,bt(p,{onPanToPaPos:o.panToPaPos},null,8,["onPanToPaPos"])])]),y("div",jAt,[bt(v,{clickedNode:e.clickedNode,onSelectLodging:o.selectLodging,onSelectHouses:o.selectHouses,onHireWorker:o.hireWorker,onEditWorker:o.editWorker,onSendWorker:o.sendWorker,onPanToPaPos:o.panToPaPos,onShowResourceDialog:o.showResourceDialog,onSetClickedNode:o.setClickedNode,onSelectWorker:o.selectWorker},null,8,["clickedNode","onSelectLodging","onSelectHouses","onHireWorker","onEditWorker","onSendWorker","onPanToPaPos","onShowResourceDialog","onSetClickedNode","onSelectWorker"])]),y("div",GAt,[bt(m,{ref:"searchBar",visible:e.showSearchBar,onClose:t[21]||(t[21]=_=>e.showSearchBar=!1),onSelect:o.handleSearchSelection},null,8,["visible","onSelect"]),y("div",HAt,[y("details",null,[y("summary",null,"Total workers: "+E(n.userStore.countWorkers),1),y("p",XAt,[R(" nodes: "+E(n.userStore.workedPlantzones.size)+" ",1),YAt,n.userStore.workersFarmingCount?(M(),L(j,{key:0},[n.userStore.farmingEnable?n.userStore.workersFarmingCount&&n.userStore.workersFarmingCount<10?(M(),L("abbr",ZAt,"\u26A0\uFE0F")):Q("",!0):(M(),L("abbr",qAt,"\u26A0\uFE0F")),R(" farming: "+E(n.userStore.workersFarmingCount)+" ",1),KAt],64)):Q("",!0),n.userStore.workersWorkshopCount?(M(),L(j,{key:1},[R(" workshops: "+E(n.userStore.workersWorkshopCount)+" ",1),JAt],64)):Q("",!0),n.userStore.workersCustomCount?(M(),L(j,{key:2},[R(" custom: "+E(n.userStore.workersCustomCount)+" ",1),QAt],64)):Q("",!0),n.userStore.workersIdleCount?(M(),L(j,{key:3},[R(" \u26A0\uFE0F idle: "+E(n.userStore.workersIdleCount),1)],64)):Q("",!0)])]),y("details",null,[y("summary",null,"Total CP: "+E(o.formatFixed(n.userStore.totalCP+n.userStore.autotakenGrindNodesCP)),1),y("p",t4t,[n.userStore.autotakenGrindNodesCP?(M(),L(j,{key:0},[e4t,y("abbr",{class:"tooltip",title:n.userStore.grindTakenDesc},E(n.userStore.autotakenGrindNodesCP),9,r4t),n4t],64)):Q("",!0),R(" nodes: "+E(n.userStore.autotakenNodesCP)+" ",1),i4t,R(" lodging/storage: "+E(n.userStore.lodgage)+" ",1),o4t,n.userStore.farmingEnable?(M(),L(j,{key:1},[R(" farming: "+E(n.userStore.farmingCP)+" ",1),s4t],64)):Q("",!0),n.userStore.workersWorkshopCount?(M(),L(j,{key:2},[R(" workshops: "+E(o.formatFixed(n.userStore.workshopTotalCP))+" ",1),a4t],64)):Q("",!0),n.userStore.workersCustomCount?(M(),L(j,{key:3},[R(" custom: "+E(o.formatFixed(n.userStore.customTotalCP))+" ",1),l4t],64)):Q("",!0)])]),y("details",null,[y("summary",null,"Total M$/day: "+E(o.formatFixed(n.userStore.allJobsTotalDailyProfit,2)),1),y("p",u4t,[R(" nodes: "+E(o.formatFixed(n.userStore.pzJobsTotalDailyProfit,2))+" ",1),c4t,n.userStore.workersFarmingCount?(M(),L(j,{key:0},[R(" farming: "+E(o.formatFixed(n.userStore.farmingTotalProfit,2))+" ",1),f4t],64)):Q("",!0),n.userStore.workersWorkshopCount?(M(),L(j,{key:1},[R(" workshops: "+E(o.formatFixed(n.userStore.workshopTotalProfit,2))+" ",1),h4t],64)):Q("",!0),n.userStore.workersCustomCount?(M(),L(j,{key:2},[R(" custom: "+E(o.formatFixed(n.userStore.customTotalProfit,2))+" ",1),d4t],64)):Q("",!0)])]),y("details",null,[y("summary",null,"Total efficiency: "+E(o.formatFixed(n.userStore.allJobsDailyProfitPerCp,3)),1),p4t,y("p",v4t,[R(" nodes: "+E(o.formatFixed(n.userStore.pzJobsDailyProfitPerCp,3))+" ",1),g4t,n.userStore.farmingEnable?(M(),L(j,{key:0},[R(" farming: "+E(o.formatFixed(n.userStore.farmingJobsDailyProfitPerCp,3))+" ",1),m4t],64)):Q("",!0),n.userStore.workersWorkshopCount?(M(),L(j,{key:1},[R(" workshops: "+E(o.formatFixed(n.userStore.workshopJobsDailyProfitPerCp,3))+" ",1),_4t],64)):Q("",!0),n.userStore.workersCustomCount?(M(),L(j,{key:2},[R(" custom: "+E(o.formatFixed(n.userStore.customJobsDailyProfitPerCp,3))+" ",1),y4t],64)):Q("",!0)])])]),b4t,y("div",w4t,[y("details",null,[S4t,T4t,y("label",k4t,[ot(y("input",{type:"checkbox","onUpdate:modelValue":t[22]||(t[22]=_=>n.userStore.displayWorkerNames=_)},null,512),[[Ke,n.userStore.displayWorkerNames]]),P4t,E4t]),y("label",C4t,[ot(y("input",{type:"checkbox","onUpdate:modelValue":t[23]||(t[23]=_=>n.userStore.displayWorkerStatsRank=_),disabled:n.userStore.displayWorkerStatsForPz},null,8,A4t),[[Ke,n.userStore.displayWorkerStatsRank]]),M4t,x4t]),y("label",L4t,[ot(y("input",{type:"checkbox","onUpdate:modelValue":t[24]||(t[24]=_=>n.userStore.displayWorkerStatsForPz=_),disabled:n.userStore.displayWorkerStatsRank},null,8,I4t),[[Ke,n.userStore.displayWorkerStatsForPz]]),O4t,R4t]),y("label",D4t,[ot(y("input",{type:"checkbox","onUpdate:modelValue":t[25]||(t[25]=_=>n.userStore.displayProfitPerCp=_)},null,512),[[Ke,n.userStore.displayProfitPerCp]]),N4t,F4t]),y("button",{onClick:t[26]||(t[26]=_=>e.importDialogVisible=!0)},"import"),y("button",{onClick:t[27]||(t[27]=_=>o.fileExport())},"export"),Q("",!0),y("button",{onClick:t[29]||(t[29]=_=>o.fireAll())},"fire all"),y("table",null,[(M(!0),L(j,null,wt(n.gameStore.lodgingPerTown,(_,b)=>(M(),li(g,{o:_,tk:Number(b),onSelectLodging:o.selectLodging,onSelectHouses:o.selectHouses,onHireWorker:o.hireWorker,onEditWorker:o.editWorker,onSendWorker:o.sendWorker,onPanToPaPos:o.panToPaPos},null,8,["o","tk","onSelectLodging","onSelectHouses","onHireWorker","onEditWorker","onSendWorker","onPanToPaPos"]))),256))])])])])])])],64)}const B4t=ce(LAt,[["render",z4t],["__scopeId","data-v-a5a4a4ea"]]);const $4t={setup(){const e=Wt(),t=_t(),r=Nn(),n=Bp();return n.$subscribe((i,o)=>{localStorage.setItem("map",JSON.stringify(o))}),e.$subscribe((i,o)=>{const s=Date.now();localStorage.setItem("user",JSON.stringify(o)),console.log("userStore subscription took",Date.now()-s,"ms")}),{marketStore:r,userStore:e,gameStore:t,mapStore:n}},data:()=>({wspd:150,mspd:10,luck:10,showGiantValues:!1,mediahNodes:new Set([1210,1212,1215,1216,1219,1217,1213,1220,1205,1218]),towns:[-1],filterTown:-1,hideTaken:!1}),methods:{makeIconSrc:qr,formatFixed:vt,formatDropQty(e){return e<.1?vt(e,3):vt(e,2)},highlightHash(){if(this.$route.hash){const e=document.querySelector(this.$route.hash);e&&(e.scrollIntoView(),e.classList.add("anim"))}},setMedianChar(e){if(!e)return;const t=this.gameStore.workerStatic[e];let r=t.wspd,n=0,i=t.luck;for(let s=2;s<=40;s++)r+=(t.wspd_lo+t.wspd_hi)/2,n+=(t.mspd_lo+t.mspd_hi)/2,i+=(t.luck_lo+t.luck_hi)/2;let o=t.mspd*(1+n/1e6);this.wspd=Math.round(r/1e6*100)/100,this.mspd=Math.round(o)/100,this.luck=Math.round(i/1e4*100)/100,this.isGiant=this.gameStore.isGiant(e)}},computed:{allPlantzonesNearestCpTownProfit(){const e=Date.now(),t=[];for(const r of Object.values(this.gameStore.plantzones)){const n=r.key,i=this.mediahNodes.has(n)?3:2;let o=this.gameStore.dijkstraNearestTowns(n,i,void 0,!0,void 0,!0);o.sort((u,c)=>u[1]-c[1]);let s={},a={};for(let u=0;u<o.length;u++){const[c,f]=o[u],h=this.gameStore.profitPzTownArtisans(n,c,f);if(c!=1343&&h.connected){if(a[h.tnk]=h.dailyPerCp,!("priceDaily"in s)){s=h;continue}h.dailyPerCp>s.dailyPerCp&&(s=h)}}if(!("alt_workers"in s))throw new Error(`Failed to calc alt_workers for pzk=${n}`);const l=Object.entries(a).map(([u,c])=>({tnk:u,dailyPerCp:c}));l.sort((u,c)=>c.dailyPerCp-u.dailyPerCp),s.alt_towns_dict=a,s.alt_towns=l,t.push(s)}return console.log("cpt: plantzonesNearestCpTownProfit took",Date.now()-e,"ms"),t},allPlantzonesNearestCpTownProfit_sorted(){const e=this.allPlantzonesNearestCpTownProfit.filter(t=>!(this.filterTown!=-1&&t.tnk!=this.filterTown||this.hideTaken&&this.userStore.workedPlantzones.has(t.key.toString())));return e.sort((t,r)=>isFinite(r.dailyPerCp-t.dailyPerCp)?r.dailyPerCp-t.dailyPerCp:isFinite(t.dailyPerCp)?-1:1),e},townsFilter(){return this.gameStore.townsWithLodging.map(e=>e==1343?-1:e)}},mounted(){this.highlightHash()},updated(){this.$nextTick(()=>this.highlightHash())}},qi=e=>(Ve("data-v-4eca35e0"),e=e(),Ue(),e),V4t={id:"toptext"},U4t=qi(()=>y("p",null," Profits here are calculated using average level 40 stats for artisan workers at corresponding town (papu/dokkebi/etc), with only one skill - Farm Knowledge (+5\u{1F528}). Home page has more tiers, levels, and skills. ",-1)),W4t=qi(()=>y("p",null," Note that CP costs shown here are independent for each node. In practice however, multiple resource nodes can reuse the same town connection, resulting in higher combined $/CP. ",-1)),j4t=qi(()=>y("p",null," For example, taking both Shakatu Fig nodes is not 3+3 but 3+1 CP. Use worker management on Home page to take this (and also lodging/storage costs) into account. ",-1)),G4t=qi(()=>y("p",null," Don't forget to set up your server and prices on Settings page and maybe take a look at Resources as well. \u{1F47A}=goblin, \u{1F468}=human, \u{1F422}=giant, hover for more info ",-1)),H4t=R(" Only show entries with best town = "),X4t=["value"],Y4t=R(" hide taken "),q4t={class:"scroll"},Z4t=qi(()=>y("th",{rowspan:"2"},"Node",-1)),K4t={colspan:"3"},J4t=R("cycle drops "),Q4t={class:"fss"},tMt=R("["),eMt=R(" as giant]"),rMt=qi(()=>y("th",{colspan:"3"},"best town",-1)),nMt=qi(()=>y("th",{colspan:"2"},"best worker",-1)),iMt=qi(()=>y("th",{rowspan:"2"},"workload",-1)),oMt=qi(()=>y("th",{colspan:"3"},"daily",-1)),sMt={key:0,rowspan:"2"},aMt=qi(()=>y("abbr",{class:"tooltip nound",title:"assigned on Home page?"},"\u{1F3E0}",-1)),lMt=[aMt],uMt=qi(()=>y("tr",null,[y("th",null,"unlucky"),y("th",null,[R(" lucky "),y("abbr",{title:`you always get unlucky items;
these are in addition to those,
only on cycles when \u{1F340} procs`,class:"tooltip"},"\u2139")]),y("th",null,"$ value"),y("th",null,"name"),y("th",null,"walk"),y("th",null,"CP"),y("th",null,"type"),y("th",null,"wspd"),y("th",null,"cycles"),y("th",null,"M$"),y("th",null,"M$/CP")],-1)),cMt=["id"],fMt=["src"],hMt={key:0,class:"fss"},dMt={class:"tac"},pMt=["src"],vMt={class:"tac"},gMt={key:0},mMt={class:"fss"},_Mt={key:1},yMt={class:"tac"},bMt=["title"],wMt={class:"tac"},SMt={class:"tac"},TMt={class:"tac"},kMt=["title"],PMt={class:"tac"},EMt={class:"tac"},CMt={class:"tac"},AMt={class:"tac"},MMt={class:"tac"},xMt={key:0,class:"tac"},LMt={key:0,class:"tooltip nound",title:"all good"},IMt=["title"],OMt=R(" \u26A0\uFE0F "),RMt=R(" \u2714\uFE0F "),DMt=["title"],NMt={key:1,class:"tooltip nound",title:"not assigned"};function FMt(e,t,r,n,i,o){const s=Ut("RouterLink");return M(),L("main",null,[y("div",V4t,[U4t,W4t,j4t,G4t,H4t,ot(y("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>e.filterTown=a)},[(M(!0),L(j,null,wt(o.townsFilter,a=>(M(),L("option",{value:a},E(a>=0?n.gameStore.nodeName(a):"any"),9,X4t))),256))],512),[[qe,e.filterTown]]),Y4t,ot(y("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=a=>e.hideTaken=a)},null,512),[[Ke,e.hideTaken]])]),y("div",q4t,[y("table",null,[y("tr",null,[Z4t,y("th",K4t,[J4t,y("span",Q4t,[tMt,ot(y("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=a=>e.showGiantValues=a)},null,512),[[Ke,e.showGiantValues]]),eMt])]),rMt,nMt,iMt,oMt,n.userStore.workedPlantzones.size?(M(),L("th",sMt,lMt)):Q("",!0)]),uMt,(M(!0),L(j,null,wt(o.allPlantzonesNearestCpTownProfit_sorted,a=>(M(),L("tr",{id:"drops"+a.key},[y("td",null,[bt(s,{tag:"a",to:{path:"./",hash:"#node"+a.key}},{default:we(()=>[R(E(n.gameStore.plantzoneName(a.key)),1)]),_:2},1032,["to"])]),y("td",null,[(M(!0),L(j,null,wt(a.unlucky,(l,u)=>(M(),L("div",null,[bt(s,{tag:"a",to:{path:"./settings",hash:"#item"+u}},{default:we(()=>[y("span",null,[R(E(o.formatDropQty(l))+" ",1),y("img",{src:o.makeIconSrc(u),class:"iconitem"},null,8,fMt),R(" "+E(n.gameStore.uloc.item[u]),1)])]),_:2},1032,["to"]),e.showGiantValues?(M(),L("span",hMt," ["+E(o.formatDropQty(a.unlucky_gi[u]))+"] ",1)):Q("",!0)]))),256))]),y("td",dMt,[(M(!0),L(j,null,wt(a.lucky,(l,u)=>(M(),L("div",null,[bt(s,{tag:"a",to:{path:"./settings",hash:"#item"+u}},{default:we(()=>[R(E(o.formatDropQty(l))+"\xA0",1),y("img",{src:o.makeIconSrc(u),class:"iconitem"},null,8,pMt)]),_:2},1032,["to"])]))),256))]),y("td",vMt,[e.showGiantValues?(M(),L("div",gMt,[R(E(o.formatFixed(a.cycleValue_gob,0))+" ",1),y("span",mMt,"["+E(o.formatFixed(a.cycleValue_gi,0))+"]",1)])):(M(),L("div",_Mt,E(o.formatFixed(a.cycleValue,0)),1))]),y("td",yMt,[y("abbr",{class:"tooltip nound",title:a.alt_towns.map(l=>`${n.gameStore.nodeName(l.tnk)}: ${o.formatFixed(l.dailyPerCp,2)} M$/day/CP \u2192 ${o.formatFixed(100*l.dailyPerCp/a.dailyPerCp)}%`).join(`
`)},E(n.gameStore.nodeName(a.tnk)),9,bMt)]),y("td",wMt,E(o.formatFixed(a.dist,0)),1),y("td",SMt,E(a.cp),1),y("td",TMt,[y("abbr",{class:"tooltip nound",title:a.alt_workers.map(l=>`${n.gameStore.uloc.char[l.charkey]}: ${o.formatFixed(l.priceDaily,2)} M$/day \u2192 ${o.formatFixed(100*l.priceDaily/a.priceDaily)}%`).join(`
`)},E({goblin:"\u{1F47A}",giant:"\u{1F422}",human:"\u{1F468}"}[a.kind]),9,kMt)]),y("td",PMt,E(o.formatFixed(a.wspd+5,1)),1),y("td",EMt,[n.userStore.allowFloating&&n.userStore.useFloatingResources[a.regiongroup]?(M(),L(j,{key:0},[R(" ~"+E(o.formatFixed(n.userStore.medianWorkloads[a.key],2)),1)],64)):(M(),L(j,{key:1},[R(E(o.formatFixed(a.activeWorkload,2)),1)],64))]),y("td",CMt,E(o.formatFixed(a.cyclesDaily,1)),1),y("td",AMt,E(o.formatFixed(a.priceDaily,2)),1),y("td",MMt,E(o.formatFixed(a.dailyPerCp,3)),1),n.userStore.workedPlantzones.size?(M(),L("td",xMt,[n.userStore.workedPlantzones.has(a.key.toString())?(M(),L(j,{key:0},[n.userStore.pzJobs[a.key].worker.tnk==a.tnk?(M(),L(j,{key:0},[n.userStore.pzJobs[a.key].worker.charkey==a.charkey?(M(),L("abbr",LMt,"\u2714\uFE0F")):(M(),L("abbr",{key:1,class:"tooltip nound",title:`worker used: ${n.gameStore.uloc.char[n.userStore.pzJobs[a.key].worker.charkey]}
suggested: ${n.gameStore.uloc.char[a.charkey]}`+(n.userStore.pzJobs[a.key].worker.charkey in a.alt_workers_dict?` (${o.formatFixed(a.priceDaily/a.alt_workers_dict[n.userStore.pzJobs[a.key].worker.charkey]*100-100)}% better)`:"")},[n.userStore.pzJobs[a.key].worker.charkey in a.alt_workers_dict&&a.priceDaily/a.alt_workers_dict[n.userStore.pzJobs[a.key].worker.charkey]>1.1?(M(),L(j,{key:0},[OMt],64)):(M(),L(j,{key:1},[RMt],64))],8,IMt))],64)):(M(),L("abbr",{key:1,class:"tooltip nound",title:`town used: ${n.gameStore.nodeName(n.userStore.pzJobs[a.key].worker.tnk)}
suggested: ${n.gameStore.nodeName(a.tnk)}`+(n.userStore.pzJobs[a.key].worker.tnk in a.alt_towns_dict?` (${o.formatFixed(a.dailyPerCp/a.alt_towns_dict[n.userStore.pzJobs[a.key].worker.tnk]*100-100)}% better)`:"")}," \u26A0\uFE0F ",8,DMt))],64)):(M(),L("abbr",NMt,"\u274C"))])):Q("",!0)],8,cMt))),256))])])])}const zMt=ce($4t,[["render",FMt],["__scopeId","data-v-4eca35e0"]]),BMt={setup(){const e=_t(),t=Wt(),r=Nn();return t.$subscribe((n,i)=>{const o=Date.now();localStorage.setItem("user",JSON.stringify(i)),console.log("userStore subscription took",Date.now()-o,"ms")}),{gameStore:e,userStore:t,marketStore:r}},data:()=>({}),created(){},mounted(){},watch:{},methods:{}},$Mt=y("br",null,null,-1),VMt=y("br",null,null,-1),UMt=y("tr",null,[y("th"),y("th",null,"Town / House"),y("th",null,"Lodging"),y("th",null,"CP")],-1),WMt=y("td",null,null,-1),jMt={class:"header"},GMt=R(" P2W: "),HMt=["onUpdate:modelValue"],XMt=["onUpdate:modelValue"],YMt=["href"];function qMt(e,t,r,n,i,o){return M(),L("main",null,[R(" Total lodging slots: "+E(n.userStore.haveLodging.slots.total),1),$Mt,R(" Total CP spent: "+E(n.userStore.haveLodging.cp.total),1),VMt,y("table",null,[UMt,(M(!0),L(j,null,wt(n.gameStore.lodgingPerTown,(s,a)=>(M(),L(j,null,[y("tr",null,[WMt,y("td",null,[y("span",jMt,E(n.gameStore.uloc.town[a]),1),GMt,ot(y("input",{type:"number","onUpdate:modelValue":l=>n.userStore.lodgingP2W[a]=l,class:"short"},null,8,HMt),[[Gt,n.userStore.lodgingP2W[a],void 0,{number:!0}]])]),y("td",null,E(n.userStore.haveLodging.slots.perTown[a]),1),y("td",null,E(n.userStore.haveLodging.cp.perTown[a]),1)]),(M(!0),L(j,null,wt(s.houses,l=>(M(),L("tr",null,[y("td",null,[ot(y("input",{type:"checkbox","onUpdate:modelValue":u=>n.userStore.lodgingTaken[l.key]=u},null,8,XMt),[[Ke,n.userStore.lodgingTaken[l.key]]])]),y("td",null,[y("a",{href:"https://bdocodex.com/us/npc/"+l.key},E(n.gameStore.uloc.char[l.key]),9,YMt)]),y("td",null,E(l.lodgingSpaces),1),y("td",null,E(l.CP),1)]))),256))],64))),256))])])}const ZMt=ce(BMt,[["render",qMt]]);const KMt={setup(){const e=_t(),t=Wt(),r=Nn();return t.$subscribe((n,i)=>{const o=Date.now();localStorage.setItem("user",JSON.stringify(i)),console.log("userStore subscription took",Date.now()-o,"ms")}),{gameStore:e,userStore:t,marketStore:r}},components:{ModalDialog:Rk,FloatingResourceEdit:rE},data:()=>({floatingDialogWspd:150,floatingDialogRgroup:1,floatingDialogWkld:400,floatingDialogVisible:!1,importDialogVisible:!1}),watch:{"userStore.useFloatingResources":{handler(e,t){},deep:!0}},methods:{formatFixed:vt,fileParse(e){let t=e.target.result,r=JSON.parse(t);"regionModifiers"in r&&(r.regionResources=r.regionModifiers,delete r.regionModifiers),"regionModifiers2"in r&&(r.regionResources2=r.regionModifiers2,delete r.regionModifiers2),this.userStore.$patch(r),this.setAllFloating(!0),this.importDialogVisible=!1},fileImport(e){if(!e)return;const t=e.target[0].files;if(t.length<1)return;const r=t[0];console.log("fileImport",r);let n=new FileReader;n.onload=this.fileParse,n.readAsText(r)},showDialog(e){this.floatingDialogVisible=!0,this.floatingDialogRgroup=Number(e);for(let t of this.gameStore.regionGroups[e]){this.floatingDialogWkld=this.gameStore.plantzones[t].peg.time;break}},fileExport(){var e=document.createElement("a");let t={regionResources:this.userStore.regionResources,regionResources2:this.userStore.regionResources2};const r=JSON.stringify(t);var n=new Blob([r],{type:"text/plain"});e.href=URL.createObjectURL(n),e.download="resources.json",e.click()},clear(){this.userStore.regionResources={},this.userStore.regionResources2={}},setAllFloating(e){const t={};for(const r of Object.keys(this.gameStore.regionGroups))t[r]=e;this.userStore.useFloatingResources=t}}},di=e=>(Ve("data-v-da799680"),e=e(),Ue(),e),JMt=di(()=>y("button",null,"import",-1)),QMt=di(()=>y("br",null,null,-1)),t5t=R(" Test on node: "),e5t=["value"],r5t=di(()=>y("br",null,null,-1)),n5t=R(" With workspeed: "),i5t={id:"toptext"},o5t=di(()=>y("p",null,"These values are shown ingame as green bars at world map > resource view.",-1)),s5t=di(()=>y("p",null,"However, some green bars are hidden/misplaced, for those you can check the current workload in worker assignment panel ingame.",-1)),a5t=di(()=>y("p",null,"Low (exhausted) resource means workloads of relevant nodes are increased (up to 2x of base) so each job takes longer to complete.",-1)),l5t=di(()=>y("p",null,"If unspecified here, 0% resource will be used (= max workload = longest cycle = min cycles per day = min profit)",-1)),u5t=di(()=>y("summary",null,"Advanced",-1)),c5t=R("allow floating resources "),f5t={key:0},h5t=di(()=>y("tr",null,[y("th",null,"RG"),y("th",null,"Resource %"),y("th",null,"Contains nodes with workload (base \u2192 current)")],-1)),d5t={class:"center"},p5t={class:"center"},v5t={key:0,class:"switch mauto"},g5t=["onUpdate:modelValue"],m5t=di(()=>y("span",{class:"slider"},null,-1)),_5t=R(" floating"),y5t=di(()=>y("br",null,null,-1)),b5t=["onClick"],w5t=R(" constant"),S5t=di(()=>y("br",null,null,-1)),T5t=["onUpdate:modelValue"];function k5t(e,t,r,n,i,o){const s=Ut("ModalDialog"),a=Ut("FloatingResourceEdit"),l=Ut("RouterLink");return M(),L(j,null,[bt(s,{show:e.importDialogVisible,"onUpdate:show":t[2]||(t[2]=u=>e.importDialogVisible=u)},{default:we(()=>[y("form",{onSubmit:t[1]||(t[1]=tp(u=>o.fileImport(u),["prevent"]))},[y("input",{type:"file",accept:".json",onClick:t[0]||(t[0]=u=>o.fileImport())}),JMt],32)]),_:1},8,["show"]),bt(s,{show:e.floatingDialogVisible,"onUpdate:show":t[6]||(t[6]=u=>e.floatingDialogVisible=u)},{default:we(()=>[bt(a,{rgk:e.floatingDialogRgroup,wspd:e.floatingDialogWspd,workload:e.floatingDialogWkld,show:e.floatingDialogVisible,"onUpdate:show":t[3]||(t[3]=u=>e.floatingDialogVisible=u)},null,8,["rgk","wspd","workload","show"]),QMt,t5t,ot(y("select",{"onUpdate:modelValue":t[4]||(t[4]=u=>e.floatingDialogWkld=u)},[(M(!0),L(j,null,wt(n.gameStore.regionGroups[e.floatingDialogRgroup],u=>(M(),L("option",{value:n.gameStore.plantzones[u]&&n.gameStore.plantzones[u].peg.time},E(n.gameStore.plantzoneName(u))+" ("+E(n.gameStore.plantzones[u]&&n.gameStore.plantzones[u].peg.time)+" base) ",9,e5t))),256))],512),[[qe,e.floatingDialogWkld]]),r5t,n5t,ot(y("input",{type:"range",class:"vmid","onUpdate:modelValue":t[5]||(t[5]=u=>e.floatingDialogWspd=u),min:"40",max:"200",step:"0.01"},null,512),[[Gt,e.floatingDialogWspd,void 0,{number:!0}]]),R(" "+E(e.floatingDialogWspd),1)]),_:1},8,["show"]),y("div",i5t,[o5t,s5t,a5t,l5t,y("details",null,[u5t,y("button",{onClick:t[7]||(t[7]=u=>e.importDialogVisible=!0)},"import"),y("button",{onClick:t[8]||(t[8]=u=>o.fileExport())},"export"),y("button",{onClick:t[9]||(t[9]=u=>o.clear())},"clear"),y("label",null,[ot(y("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=u=>n.userStore.allowFloating=u)},null,512),[[Ke,n.userStore.allowFloating]]),c5t]),n.userStore.allowFloating?(M(),L("span",f5t,[y("button",{onClick:t[11]||(t[11]=u=>o.setAllFloating(!0))},"all floating"),y("button",{onClick:t[12]||(t[12]=u=>o.setAllFloating(!1))},"all constant")])):Q("",!0)])]),y("table",null,[h5t,(M(!0),L(j,null,wt(n.gameStore.regionGroups,(u,c)=>(M(),L("tr",null,[y("td",d5t,E(c),1),y("td",p5t,[n.userStore.allowFloating?(M(),L("label",v5t,[ot(y("input",{type:"checkbox","onUpdate:modelValue":f=>n.userStore.useFloatingResources[c]=f},null,8,g5t),[[Ke,n.userStore.useFloatingResources[c]]]),m5t])):Q("",!0),n.userStore.allowFloating&&n.userStore.useFloatingResources[c]?(M(),L(j,{key:1},[_5t,y5t,R(" ~"+E(o.formatFixed(n.userStore.medianResources[c],2))+" ",1),y("button",{onClick:f=>o.showDialog(c)},"edit",8,b5t)],64)):(M(),L(j,{key:2},[w5t,S5t,ot(y("input",{type:"number","onUpdate:modelValue":f=>n.userStore.regionResources[c]=f,min:"0",max:"100",step:"0.01",class:"w42em"},null,8,T5t),[[Gt,n.userStore.regionResources[c],void 0,{number:!0}]])],64))]),y("td",null,[(M(!0),L(j,null,wt(u,f=>(M(),L("div",null,[bt(l,{tag:"a",to:{path:"./",hash:"#node"+f}},{default:we(()=>[R(E(n.gameStore.plantzoneName(f)),1)]),_:2},1032,["to"]),R(" "+E(n.gameStore.ready&&n.gameStore.plantzones[f].peg.time)+" ",1),n.userStore.allowFloating&&n.userStore.useFloatingResources[c]?(M(),L(j,{key:0},[R(" \u2933 "+E(o.formatFixed(n.userStore.medianWorkloads[f],2)),1)],64)):(M(),L(j,{key:1},[R(" \u2192 "+E(n.gameStore.ready?o.formatFixed(n.gameStore.plantzones[f].activeWorkload,2):""),1)],64))]))),256))])]))),256))])],64)}const P5t=ce(KMt,[["render",k5t],["__scopeId","data-v-da799680"]]);const E5t={setup(){const e=Wt();return{gameStore:_t(),userStore:e}},props:{show:{type:Boolean,default:!1}},created(){this.fetchData()},data:()=>({houses:{},towns:[-1],usages:[-1],levels:[-1],filterTown:-1,filterUsage:-1,filterLevel:-1,selectedHouse:-1}),computed:{filteredTowns(){const e=new Set([-1]);for(const[t,r]of Object.entries(this.houses))(this.filterUsage==-1||this.filterUsage in r.CraftList)&&(this.filterLevel==-1||this.filterLevel<=r.CraftList[this.filterUsage])&&r.affTown!=694&&e.add(r.affTown);return[...e].sort((t,r)=>t-r)},filteredUsages(){const e=new Set([-1]);for(const[t,r]of Object.entries(this.houses))if(this.filterTown==-1||r.affTown==this.filterTown)for(const[n,i]of Object.entries(r.CraftList))n>10&&e.add(n);return[...e].sort((t,r)=>t-r)},filteredLevels(){const e=new Set([-1]);if(this.filterUsage!=-1)for(const[t,r]of Object.entries(this.houses))(this.filterTown==-1||r.affTown==this.filterTown)&&this.filterUsage in r.CraftList&&e.add(r.CraftList[this.filterUsage]);return[...e].sort((t,r)=>t-r)},filteredHouses(){const e=[];for(const[t,r]of Object.entries(this.houses))(this.filterTown==-1||r.affTown==this.filterTown)&&(this.filterUsage==-1||this.filterUsage in r.CraftList)&&(this.filterLevel==-1||this.filterLevel<=r.CraftList[this.filterUsage])&&e.push(Number(t));return e}},methods:{formatFixed:vt,async fetchData(){this.houses=await(await fetch("data/houseinfo.json")).json();const e=new Set([-1]),t=new Set([-1]);for(const[r,n]of Object.entries(this.houses)){e.add(n.affTown);for(const[o,s]of Object.entries(n.CraftList))o>10&&t.add(o);this.houses[r].CPfull=this.houses[r].CP;let i=n.needHouseKey;for(;i;)this.houses[r].CPfull+=this.houses[i].CP,i=this.houses[i].needHouseKey}this.towns=e,this.usages=[...t].sort((r,n)=>r-n)},addWorkshop(e){this.userStore.userWorkshops[e]={...this.userStore.defaultUserWorkshop}},deleteWorkshop(e){delete this.userStore.userWorkshops[e]}}},Ga=e=>(Ve("data-v-f5f2ab1e"),e=e(),Ue(),e),C5t=Ga(()=>y("h3",null,"\u{1F3ED}Workshops config",-1)),A5t={class:"sa"},M5t=Ga(()=>y("tr",null,[y("th",null,"House"),y("th",null,[R(" label "),y("abbr",{class:"tooltip",title:"for display only"},"\u2139")]),y("th",null,[R(" worktype "),y("abbr",{class:"tooltip",title:`used to factor in some worker skills.
also, only Mass Production can employ multiple workers at once.`},"\u2139")]),y("th",null," workload "),y("th",null,[R(" $/cycle "),y("abbr",{title:`use Sho's Workshop Profitability Calculator & gpw Trading/Crates Calculator to find out.
For crates, enter profit per 1 crate - if a worker with +1/+3 packing skill occupies this workshop it will be taken into account.`,class:"tooltip"},"\u2139")]),y("th",null,[R(" CP "),y("abbr",{title:`Full cost of operating the workshop, including:
1) the workshop itself;
2) house chain to connect the workshop (*after* autoassigned houses shown in Home > town config > Found cost spoiler);
3) storage for input/output mats, if not provided by (2).
The only thing to not include here is lodging for the worker who is going to occupy the workshop.
However, if your workshop house chain does provide lodging, reduce (2) accordingly. 
The house chain can potentially provide storage and lodging not only for this workshop, but for other workshops of this town. 
In this case, use average CP value (sum up all workshop-related CP costs and divide by active workshop count).`,class:"tooltip"},"\u2139")]),y("th",null,"action")],-1)),x5t=["onUpdate:modelValue"],L5t=["onUpdate:modelValue"],I5t=W1('<option value="unk" data-v-f5f2ab1e>unknown</option><option value="jewelry" data-v-f5f2ab1e>jewelry</option><option value="mass" data-v-f5f2ab1e>mass</option><option value="weap" data-v-f5f2ab1e>weapon</option><option value="tool" data-v-f5f2ab1e>tool</option><option value="furn" data-v-f5f2ab1e>furniture</option><option value="costume" data-v-f5f2ab1e>costume</option><option value="refine" data-v-f5f2ab1e>refine</option><option value="siege" data-v-f5f2ab1e>siege</option><option value="mount" data-v-f5f2ab1e>mount</option><option value="exclus" data-v-f5f2ab1e>exclusive</option><option value="pack_produce" data-v-f5f2ab1e>pack_produce</option><option value="pack_herb" data-v-f5f2ab1e>pack_herb</option><option value="pack_mushr" data-v-f5f2ab1e>pack_mushr</option><option value="pack_fish" data-v-f5f2ab1e>pack_fish</option><option value="pack_timber" data-v-f5f2ab1e>pack_timber</option><option value="pack_ore" data-v-f5f2ab1e>pack_ore</option>',17),O5t=[I5t],R5t=["onUpdate:modelValue"],D5t=["onUpdate:modelValue"],N5t=["onUpdate:modelValue"],F5t=["onClick"],z5t=R(" new entry:"),B5t=Ga(()=>y("br",null,null,-1)),$5t={class:"borderless"},V5t=Ga(()=>y("td",null,"town",-1)),U5t=["value"],W5t=Ga(()=>y("td",null,"usage",-1)),j5t=["value"],G5t=Ga(()=>y("td",null,"level",-1)),H5t=["value"],X5t=Ga(()=>y("td",null,"house",-1)),Y5t=["value"],q5t={key:0,class:"fsxs"},Z5t=["disabled"],K5t=Ga(()=>y("abbr",{class:"tooltip",title:`Note that assigning house as workshop does not prevent it from being used for autolodging/autostorage on Home page.
You need to manually work around this.`},"\u2139",-1));function J5t(e,t,r,n,i,o){return M(),L(j,null,[C5t,y("table",A5t,[M5t,(M(!0),L(j,null,wt(n.userStore.userWorkshops,(s,a)=>(M(),L("tr",null,[y("td",null,E(n.gameStore.uloc.char[a]),1),y("td",null,[ot(y("input",{class:"w5em","onUpdate:modelValue":l=>s.label=l},null,8,x5t),[[Gt,s.label,void 0,{number:!0}]])]),y("td",null,[ot(y("select",{"onUpdate:modelValue":l=>s.industry=l},O5t,8,L5t),[[qe,s.industry]])]),y("td",null,[ot(y("input",{type:"number",class:"w5em","onUpdate:modelValue":l=>s.manualWorkload=l},null,8,R5t),[[Gt,s.manualWorkload,void 0,{number:!0}]])]),y("td",null,[ot(y("input",{type:"number",class:"w5em","onUpdate:modelValue":l=>s.manualCycleIncome=l},null,8,D5t),[[Gt,s.manualCycleIncome,void 0,{number:!0}]])]),y("td",null,[ot(y("input",{type:"number",class:"float4","onUpdate:modelValue":l=>s.manualCp=l},null,8,N5t),[[Gt,s.manualCp,void 0,{number:!0}]])]),y("td",null,[y("button",{onClick:l=>o.deleteWorkshop(a)},"delete",8,F5t)])]))),256))]),z5t,B5t,y("table",$5t,[y("tr",null,[V5t,y("td",null,[ot(y("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>e.filterTown=s)},[(M(!0),L(j,null,wt(o.filteredTowns,s=>(M(),L("option",{value:s},E(s>=0?n.gameStore.uloc.town[s]:"any"),9,U5t))),256))],512),[[qe,e.filterTown]])])]),y("tr",null,[W5t,y("td",null,[ot(y("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>e.filterUsage=s)},[(M(!0),L(j,null,wt(o.filteredUsages,s=>(M(),L("option",{value:s},E(s>=0?n.gameStore.uloc.housetype[s]+" "+s:"any"),9,j5t))),256))],512),[[qe,e.filterUsage]])])]),y("tr",null,[G5t,y("td",null,[ot(y("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>e.filterLevel=s)},[(M(!0),L(j,null,wt(o.filteredLevels,s=>(M(),L("option",{value:s},E(s>=0?s+"+":"any"),9,H5t))),256))],512),[[qe,e.filterLevel]])])]),y("tr",null,[X5t,y("td",null,[ot(y("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>e.selectedHouse=s)},[(M(!0),L(j,null,wt(o.filteredHouses,s=>(M(),L("option",{value:s},E(s)+" "+E(n.gameStore.uloc.char[s])+" "+E(s in n.userStore.userWorkshops?"\u2714\uFE0F":""),9,Y5t))),256))],512),[[qe,e.selectedHouse]]),e.selectedHouse in n.userStore.userWorkshops?(M(),L("span",q5t," already in list! ")):Q("",!0)])])]),y("button",{disabled:e.selectedHouse==-1||e.selectedHouse in n.userStore.userWorkshops,onClick:t[4]||(t[4]=s=>o.addWorkshop(e.selectedHouse))}," add to my workshops ",8,Z5t),R(" "+E()+" ",1),K5t],64)}const Q5t=ce(E5t,[["render",J5t],["__scopeId","data-v-f5f2ab1e"]]);const t6t={setup(){const e=_t(),t=Wt(),r=Nn();return t.$subscribe((n,i)=>{const o=Date.now();localStorage.setItem("user",JSON.stringify(i)),console.log("userStore subscription took",Date.now()-o,"ms")}),{gameStore:e,userStore:t,marketStore:r}},components:{ModalDialog:Rk,WorkerEdit:PB,WorkshopsConfig:Q5t},data:()=>({workerDialogVisible:!1,workshopsConfigVisible:!1,highlightPending:!1,importDialogVisible:!1}),watch:{"userStore.marketUrl":{handler(e,t){this.marketStore.fetchData()}}},methods:{makeIconSrc:qr,formatFixed:vt,reload(){this.marketStore.ready=!1,this.marketStore.fetchData()},highlightHash(){if(!!this.highlightPending&&(console.log("highlighting",this.$route.hash,this.highlightPending),this.$route.hash)){const e=document.querySelector(this.$route.hash);e&&(this.highlightPending=!1,e.scrollIntoView(),e.classList.add("anim"))}},fileParse(e){let t=e.target.result,r=JSON.parse(t);"effectivePrices"in r&&delete r.effectivePrices,this.userStore.$patch(r),this.importDialogVisible=!1},fileImport(e){if(!e)return;const t=e.target[0].files;if(t.length<1)return;const r=t[0];console.log("fileImport",r);let n=new FileReader;n.onload=this.fileParse,n.readAsText(r)},fileExport(){var e=document.createElement("a");let t={customPrices:this.userStore.customPrices,keepItems:this.userStore.keepItems,effectivePrices:this.marketStore.prices};const r=JSON.stringify(t);var n=new Blob([r],{type:"text/plain"});e.href=URL.createObjectURL(n),e.download="custom_prices.json",e.click()},clearCustomPrices(){this.userStore.customPrices={},this.userStore.keepItems={}}},mounted(){this.highlightPending=!0,this.highlightHash()},updated(){this.$nextTick(()=>{this.highlightHash()})}},fr=e=>(Ve("data-v-2ff9709c"),e=e(),Ue(),e),e6t=fr(()=>y("button",null,"import",-1)),r6t={id:"toptext"},n6t={class:"settings-tiles"},i6t={class:"settings-tile"},o6t=R(" Server: "),s6t=W1("<option data-v-2ff9709c>NA</option><option data-v-2ff9709c>EU</option><option data-v-2ff9709c>RU</option><option data-v-2ff9709c>KR</option><option data-v-2ff9709c>JP</option><option data-v-2ff9709c>TH</option><option data-v-2ff9709c>TW</option><option data-v-2ff9709c>SA</option><option data-v-2ff9709c>SEA</option><option data-v-2ff9709c>MENA</option><option data-v-2ff9709c>CEU</option><option data-v-2ff9709c>CNA</option>",12),a6t=[s6t],l6t=fr(()=>y("br",null,null,-1)),u6t=fr(()=>y("label",{for:"vp_t"},"VP always on",-1)),c6t=R(") "),f6t=R(" Tax: "),h6t=W1('<option value="0.65" data-v-2ff9709c>0.65 (0)</option><option value="0.65325" data-v-2ff9709c>0.65325 (1000)</option><option value="0.6565" data-v-2ff9709c>0.6565 (4000)</option><option value="0.65975" data-v-2ff9709c>0.65975 (7000)</option><option value="0.65975" data-v-2ff9709c>0.69225 (7000 + ring)</option><option value="0.845" data-v-2ff9709c>0.845 (0 + VP)</option><option value="0.84825" data-v-2ff9709c>0.84825 (1000 + VP)</option><option value="0.8515" data-v-2ff9709c>0.8515 (4000 + VP)</option><option value="0.85475" data-v-2ff9709c>0.85475 (7000 + VP)</option><option value="0.88725" data-v-2ff9709c>0.88725 (7000 + ring + VP)</option><option value="1" data-v-2ff9709c>1 (just hoarding)</option>',11),d6t=[h6t],p6t=R(" Language: "),v6t=fr(()=>y("option",null,"en",-1)),g6t=fr(()=>y("option",null,"ru",-1)),m6t=fr(()=>y("option",null,"ko",-1)),_6t=fr(()=>y("option",null,"jp",-1)),y6t=fr(()=>y("option",null,"tw",-1)),b6t=[v6t,g6t,m6t,_6t,y6t],w6t={class:"settings-tile"},S6t=fr(()=>y("div",null,"Default worker for hire:",-1)),T6t=fr(()=>y("label",{for:"dw_f"},"Random Artisan Goblin",-1)),k6t={for:"dw_t"},P6t={class:"settings-tile"},E6t=R(" \u{1F33B}Farming "),C6t=fr(()=>y("label",{for:"fe_t"},"enable",-1)),A6t={key:0},M6t={class:"slider-container"},x6t=fr(()=>y("span",null,"F2P",-1)),L6t=fr(()=>y("span",null,"P2W",-1)),I6t={style:{display:"flex"}},O6t=R(" Total profit from 10 large fences (use "),R6t=fr(()=>y("a",{href:"https://bit.ly/MagicalFarmingProfit"},"MFP",-1)),D6t=R(" to estimate):"),N6t=fr(()=>y("br",null,null,-1)),F6t=R(" M$/day with 10 workers "),z6t=fr(()=>y("br",null,null,-1)),B6t=R(" M$/day with 0 workers (half growth speed) "),$6t={class:"settings-tile"},V6t=R(" \u{1F3ED}Workshops "),U6t={class:"settings-tile"},W6t=R(" \u{1F5FA}\uFE0F Map "),j6t=R(" hide inactive "),G6t=fr(()=>y("div",{class:"spacer"},null,-1)),H6t=R(" Market API status: "),X6t={key:0},Y6t={key:1},q6t=R(" \xA0"),Z6t=fr(()=>y("p",null,"By default everything marketable is supposed to be sold on Central Market (with tax).",-1)),K6t=R("If the item is for self use, select Keep (=untax) and/or enter Custom price: "),J6t={class:"scrollable"},Q6t=fr(()=>y("tr",null,[y("th",null,"Item"),y("th",null,"Market"),y("th",null,"Custom"),y("th",null,"Keep"),y("th",null,"Effective")],-1)),txt=["id"],ext=["href"],rxt=["src","data-key"],nxt=R(" "+E(" ")+" "),ixt={key:0},oxt=["title"],sxt={class:"right"},axt=["href"],lxt=["onUpdate:modelValue"],uxt={class:"center"},cxt=["disabled","onUpdate:modelValue"],fxt={class:"right"};function hxt(e,t,r,n,i,o){const s=Ut("ModalDialog"),a=Ut("WorkerEdit"),l=Ut("WorkshopsConfig");return M(),L(j,null,[bt(s,{show:e.importDialogVisible,"onUpdate:show":t[2]||(t[2]=u=>e.importDialogVisible=u)},{default:we(()=>[y("form",{onSubmit:t[1]||(t[1]=tp(u=>o.fileImport(u),["prevent"]))},[y("input",{type:"file",accept:".json",onClick:t[0]||(t[0]=u=>o.fileImport())}),e6t],32)]),_:1},8,["show"]),bt(s,{show:e.workerDialogVisible,"onUpdate:show":t[4]||(t[4]=u=>e.workerDialogVisible=u)},{default:we(()=>[bt(a,{workerEditing:n.userStore.defaultWorker,initialProfit:0,show:e.workerDialogVisible,"onUpdate:show":t[3]||(t[3]=u=>e.workerDialogVisible=u)},null,8,["workerEditing","show"])]),_:1},8,["show"]),bt(s,{show:e.workshopsConfigVisible,"onUpdate:show":t[5]||(t[5]=u=>e.workshopsConfigVisible=u)},{default:we(()=>[bt(l)]),_:1},8,["show"]),y("main",null,[y("div",r6t,[y("div",n6t,[y("div",i6t,[y("div",null,[o6t,ot(y("select",{"onUpdate:modelValue":t[6]||(t[6]=u=>n.userStore.selectedRegion=u),onChange:t[7]||(t[7]=(...u)=>e.fetchMarket&&e.fetchMarket(...u))},a6t,544),[[qe,n.userStore.selectedRegion]]),l6t,R(" \u2937 base storage: "+E(n.userStore.baseStorage)+" (",1),ot(y("input",{type:"checkbox",id:"vp_t","onUpdate:modelValue":t[8]||(t[8]=u=>n.userStore.storageVP=u)},null,512),[[Ke,n.userStore.storageVP]]),u6t,c6t]),y("div",null,[f6t,ot(y("select",{"onUpdate:modelValue":t[9]||(t[9]=u=>n.userStore.selectedTax=u)},d6t,512),[[qe,n.userStore.selectedTax]])]),y("div",null,[p6t,ot(y("select",{"onUpdate:modelValue":t[10]||(t[10]=u=>n.userStore.selectedLang=u),onChange:t[11]||(t[11]=(...u)=>e.fetchMarket&&e.fetchMarket(...u))},b6t,544),[[qe,n.userStore.selectedLang]])])]),y("div",w6t,[S6t,y("div",null,[ot(y("input",{type:"radio",name:"dw",id:"dw_f",value:!1,"onUpdate:modelValue":t[12]||(t[12]=u=>n.userStore.useDefaultWorker=u)},null,512),[[Sd,n.userStore.useDefaultWorker]]),T6t]),y("div",null,[ot(y("input",{type:"radio",name:"dw",id:"dw_t",value:!0,"onUpdate:modelValue":t[13]||(t[13]=u=>n.userStore.useDefaultWorker=u)},null,512),[[Sd,n.userStore.useDefaultWorker]]),y("label",k6t,[R("Custom ("+E(o.formatFixed(n.gameStore.workerStatsOnPlantzone(n.userStore.defaultWorker).wspd,2))+"\u{1F528} "+E(o.formatFixed(n.gameStore.workerStatsOnPlantzone(n.userStore.defaultWorker).mspd,2))+"\u{1F9B6} "+E(o.formatFixed(n.gameStore.workerStatsOnPlantzone(n.userStore.defaultWorker).luck,2))+"\u{1F340}) ",1),y("button",{onClick:t[14]||(t[14]=u=>e.workerDialogVisible=!0)},"edit")])])]),y("div",P6t,[E6t,ot(y("input",{type:"checkbox",id:"fe_t","onUpdate:modelValue":t[15]||(t[15]=u=>n.userStore.farmingEnable=u)},null,512),[[Ke,n.userStore.farmingEnable]]),C6t,n.userStore.farmingEnable?(M(),L("span",A6t,[y("div",M6t,[x6t,ot(y("input",{type:"range",style:{width:"4em"},"onUpdate:modelValue":t[16]||(t[16]=u=>n.userStore.farmingP2WShare=u),min:"0",max:"80",step:"10"},null,512),[[Gt,n.userStore.farmingP2WShare,void 0,{number:!0}]]),L6t]),R(" (using "+E(80-n.userStore.farmingP2WShare)+"CP) ",1),y("div",I6t,[y("div",null,[O6t,R6t,D6t,N6t,ot(y("input",{type:"number",class:"float4","onUpdate:modelValue":t[17]||(t[17]=u=>n.userStore.farmingProfit=u)},null,512),[[Gt,n.userStore.farmingProfit,void 0,{number:!0}]]),F6t,z6t,ot(y("input",{type:"number",class:"float4","onUpdate:modelValue":t[18]||(t[18]=u=>n.userStore.farmingBareProfit=u)},null,512),[[Gt,n.userStore.farmingBareProfit,void 0,{number:!0}]]),B6t])])])):Q("",!0)]),y("div",$6t,[V6t,y("div",null,[y("button",{onClick:t[19]||(t[19]=u=>e.workshopsConfigVisible=!0)},"config")])]),Q("",!0),y("div",U6t,[W6t,y("div",null,[ot(y("input",{type:"checkbox",id:"vi_hie","onUpdate:modelValue":t[22]||(t[22]=u=>n.userStore.mapHideInactive=u)},null,512),[[Ke,n.userStore.mapHideInactive]]),j6t])])]),G6t,H6t,n.marketStore.apiAlive?(M(),L("span",X6t,"\u2713")):(M(),L("span",Y6t,"\u274C")),q6t,y("button",{onClick:t[23]||(t[23]=u=>o.reload())},"reload"),Z6t,y("p",null,[K6t,y("button",{onClick:t[24]||(t[24]=u=>e.importDialogVisible=!0)},"import"),y("button",{onClick:t[25]||(t[25]=u=>o.fileExport())},"export"),y("button",{onClick:t[26]||(t[26]=u=>o.clearCustomPrices())},"clear")])]),y("div",J6t,[y("table",null,[Q6t,(M(!0),L(j,null,wt(n.gameStore.itemKeys,u=>(M(),L("tr",{id:"item"+u},[y("td",null,[y("a",{href:this.userStore.itemUrl+u},[y("img",{src:o.makeIconSrc(u),class:"iconitem","data-key":u},null,8,rxt),R(" "+E(n.gameStore.uloc.item[u]),1)],8,ext),nxt,u in n.marketStore.calculatedPrices?(M(),L("span",ixt,[y("abbr",{class:"tooltip",title:`contains:
`+Object.entries(n.marketStore.calculatedPrices[u]).map(([c,f])=>o.formatFixed(f,3)+" "+n.gameStore.uloc.item[c]).join(`
`)},"\u2139",8,oxt)])):Q("",!0)]),y("td",sxt,[u in n.marketStore.apiPrices?(M(),L("a",{key:0,href:this.marketStore.itemPriceUrl(u)},E(o.formatFixed(n.marketStore.apiPrices[u])),9,axt)):(M(),L(j,{key:1},[R(E(o.formatFixed(n.gameStore.vendorPrices[u])),1)],64))]),y("td",null,[ot(y("input",{type:"number",class:"price right","onUpdate:modelValue":c=>n.userStore.customPrices[u]=c},null,8,lxt),[[Gt,n.userStore.customPrices[u],void 0,{number:!0}]])]),y("td",uxt,[ot(y("input",{type:"checkbox",disabled:u in n.gameStore.vendorPrices,"onUpdate:modelValue":c=>n.userStore.keepItems[u]=c},null,8,cxt),[[Ke,n.userStore.keepItems[u]]])]),y("td",fxt,E(o.formatFixed(n.marketStore.prices[u])),1)],8,txt))),256))])])])],64)}const dxt=ce(t6t,[["render",hxt],["__scopeId","data-v-2ff9709c"]]);const pxt={setup(){const e=_t(),t=Wt(),r=Nn();return{gameStore:e,userStore:t,marketStore:r}},data:()=>({}),watch:{},methods:{formatFixed:vt},computed:{plantzonesNearestCpTownsProfits150(){const e=Date.now();let t={};for(const r of Object.keys(this.gameStore.plantzones))t[r]=this.gameStore.plantzoneNearestCpTownsProfits150(r,3);return console.log("cpt: plantzonesNearestCpTownsProfits took",Date.now()-e,"ms"),t}}},vxt=y("div",{id:"toptext"},[y("p",null,"Using 150/10/10 worker")],-1),gxt=y("tr",null,[y("th",null,"Node/Town"),y("th",null,"connect"),y("th",null,"distance"),y("th",null,"M$/day"),y("th",null,"M$/day/CP")],-1),mxt={colspan:"5"};function _xt(e,t,r,n,i,o){return M(),L(j,null,[vxt,y("table",null,[gxt,(M(!0),L(j,null,wt(n.gameStore.plantzones,(s,a)=>(M(),L(j,null,[y("tr",null,[y("td",mxt,[y("h3",null,E(a)+" "+E(s.name),1)])]),(M(!0),L(j,null,wt(o.plantzonesNearestCpTownsProfits150[a],l=>(M(),L("tr",null,[y("td",null,E(n.gameStore.nodeName(l.tnk)),1),y("td",null,E(l.cp)+"CP ",1),y("td",null,E(o.formatFixed(l.dist,0)),1),y("td",null,E(o.formatFixed(l.priceDaily,2)),1),y("td",null,E(o.formatFixed(l.dailyPerCp,3)),1)]))),256))],64))),256))])],64)}const yxt=ce(pxt,[["render",_xt]]),bxt={setup(){const e=_t(),t=Wt();return{gameStore:e,userStore:t}},data:()=>({houses:{},houseCrafts:{},towns:new Set([-1]),usages:[-1],filterTown:-1,filterUsage:-1}),created(){this.fetchData()},mounted(){},watch:{},methods:{makeIconSrc:qr,async fetchData(){this.houseCrafts=await(await fetch("data/houseinforeceipe.json")).json(),this.houses=await(await fetch("data/houseinfo.json")).json();const e=new Set([-1]),t=new Set([-1]);for(const[r,n]of Object.entries(this.houses)){e.add(n.affTown);for(const[o,s]of Object.entries(n.CraftList))t.add(o);this.houses[r].CPfull=this.houses[r].CP;let i=n.needHouseKey;for(;i;)this.houses[r].CPfull+=this.houses[i].CP,i=this.houses[i].needHouseKey}this.towns=e,this.usages=[...t].sort((r,n)=>r-n)}}},wxt={id:"toptext"},Sxt=R(" Town: "),Txt=["value"],kxt=R(" Usage: "),Pxt=["value"],Ext={key:0},Cxt=y("summary",null,"Craftables",-1),Axt=["href"],Mxt=["src","data-key"],xxt=y("tr",null,[y("th",null,"town"),y("th",null,"node"),y("th",null,"name"),y("th",null,"CP"),y("th",null,"usage/level")],-1),Lxt={key:0},Ixt=["href"],Oxt=R(E(" "));function Rxt(e,t,r,n,i,o){return M(),L("main",null,[y("div",wxt,[Sxt,ot(y("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>e.filterTown=s)},[(M(!0),L(j,null,wt(e.towns,s=>(M(),L("option",{value:s},E(s>=0?n.gameStore.uloc.town[s]:"any"),9,Txt))),256))],512),[[qe,e.filterTown]]),kxt,ot(y("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>e.filterUsage=s)},[(M(!0),L(j,null,wt(e.usages,s=>(M(),L("option",{value:s},E(s>=0?n.gameStore.uloc.housetype[s]+" "+s:"any"),9,Pxt))),256))],512),[[qe,e.filterUsage]]),e.filterUsage!=-1?(M(),L("details",Ext,[Cxt,(M(!0),L(j,null,wt(this.houseCrafts[e.filterUsage].groups,(s,a)=>(M(),L("div",null,[R(" level "+E(a+1)+": ",1),y("table",null,[(M(!0),L(j,null,wt(s,l=>(M(),L("tr",null,[(M(!0),L(j,null,wt(this.gameStore.craftItems[l],u=>(M(),L("a",{href:this.userStore.itemUrl+u},[y("img",{src:o.makeIconSrc(u),class:"iconitem","data-key":u},null,8,Mxt),R(" "+E(n.gameStore.uloc.item[u]),1)],8,Axt))),256))]))),256))])]))),256))])):Q("",!0)]),y("table",null,[xxt,(M(!0),L(j,null,wt(e.houses,(s,a)=>(M(),L(j,null,[(e.filterTown==-1||s.affTown==e.filterTown)&&(e.filterUsage==-1||e.filterUsage in s.CraftList)?(M(),L("tr",Lxt,[y("td",null,E(s.affTown),1),y("td",null,E(s.parentNode),1),y("td",null,[y("a",{href:"https://bdocodex.com/us/npc/"+s.key},E(n.gameStore.uloc.char[s.key]),9,Ixt)]),y("td",null,E(s.CP)+" ("+E(s.CPfull)+")",1),y("td",null,[(M(!0),L(j,null,wt(s.CraftList,(l,u)=>(M(),L("span",null,[R(E(n.gameStore.uloc.housetype[u]),1),y("sup",null,E(l),1),Oxt]))),256))])])):Q("",!0)],64))),256))])])}const Dxt=ce(bxt,[["render",Rxt]]);yr([Ba,vlt,Va,$a,Ua]);const Nxt={setup(){const e=Wt();return{gameStore:_t(),userStore:e}},components:{VChart:Wa},props:{show:{type:Boolean,default:!1}},data:()=>({tk:5,wantLodging:0,wantStorage:0}),computed:{townsWithHouses(){const e=[];if(!this.gameStore.ready)return e;for(const t of this.gameStore.townsWithLodging){const r=this.gameStore.tnk2tk(t);r in this.gameStore.uloc.town&&e.push(r)}return e},bestLookup(){return this.gameStore.lsLookup(this.tk,this.wantLodging,this.wantStorage)},sortedResult(){const e=[],t=this.bestLookup;if(t&&t.success){for(let r=0;r<t.indices.length;r++){const n=t.indices[r],i=this.gameStore.uloc.char[n],o=t.states[r];e.push({hk:n,name:i,state:o})}e.sort((r,n)=>(""+r.name).localeCompare(n.name))}return e},storageCost(){let e=0;for(const t of this.sortedResult)t.state==1&&(e+=this.gameStore.houseCost(t.hk));return e},lodgingCost(){let e=0;for(const t of this.sortedResult)t.state==2&&(e+=this.gameStore.houseCost(t.hk));return e},townChains(){const e={};for(const t of this.gameStore.housesPerTown[this.tk]){e[t]=[];let r=Number(t);for(;r!=0;)e[t].unshift(r),r=this.gameStore.houseInfo[r].needHouseKey}return e},townTree(){const e={name:"",value:this.gameStore.uloc.town[this.tk],children:[]};if(!this.gameStore.ready)return e;if(!this.bestLookup.success)return console.log("bestlookup failed for tk",this.tk),e;for(const t of this.gameStore.housesPerTown[this.tk]){let r=e;for(const n of this.townChains[t]){const i=r.children.findIndex(o=>o.name==n);if(i>=0)r=r.children[i];else{let o=0;if(this.bestLookup){const a=this.bestLookup.indices.indexOf(n);a!==-1&&(o=this.bestLookup.states[a])}const s={name:n,value:{label:this.gameStore.uloc.char[n],lodging:this.gameStore.houseLodging(n),storage:this.gameStore.houseStorage(n),cp:this.gameStore.houseCost(n)},lineStyle:r.name==0?{color:"transparent"}:o>0?o==2?{color:"#fe6"}:{color:"#a5f"}:{},itemStyle:o>0?o==2?{color:"#fe6"}:{color:"#a5f"}:{},children:[]};r.children.push(s),r=s}}}return e},chartOption(){return{tooltip:{trigger:"item",triggerOn:"mousemove",formatter:function(e){const t=e.value;return e.name==0?t:`${e.name} ${t.label}<br/>${t.lodging}\u{1F6CF}\uFE0F ${t.storage}\u{1F4E6} ${t.cp}CP`}},series:[{type:"tree",layout:"radial",roam:!0,data:[this.townTree],top:"1%",left:"1%",bottom:"1%",right:"1%",symbolSize:6,initialTreeDepth:9,label:{fontSize:9,color:"gray",position:"top",formatter:function(e){const t=e.value;return e.name==0?"":`{r|${t.lodging}} {o|${t.storage}} ${t.cp}`},rich:{r:{fontSize:9},o:{fontSize:9}}},leaves:{label:{}},emphasis:{focus:"descendant"}}]}}},methods:{formatFixed:vt}},o0=e=>(Ve("data-v-8b0096ac"),e=e(),Ue(),e),Fxt={class:"limit"},zxt={id:"controls"},Bxt=o0(()=>y("p",null,[R("data from "),y("a",{href:"https://github.com/Thell/bdo-housecraft"},"Thell/bdo-housecraft")],-1)),$xt={id:"fluid"},Vxt={id:"sliders"},Uxt={key:0},Wxt=o0(()=>y("tr",null,[y("th"),y("th",null,"wanted"),y("th",null,"found"),y("th",null,"cost"),y("th",null,"per CP")],-1)),jxt=o0(()=>y("th",{class:"lodging"},"lodging ",-1)),Gxt=["max"],Hxt=o0(()=>y("th",{class:"storage"},"storage",-1)),Xxt=["max"],Yxt={colspan:"3"},qxt=R(" town "),Zxt=["value"],Kxt={colspan:"2"},Jxt=o0(()=>y("div",{style:{clear:"both"}},null,-1)),Qxt={key:0,id:"houselist"};function tLt(e,t,r,n,i,o){const s=Ut("v-chart");return M(),L("main",null,[y("div",Fxt,[y("div",zxt,[Bxt,y("div",$xt,[y("div",Vxt,[this.gameStore.ready?(M(),L("table",Uxt,[Wxt,y("tr",null,[jxt,y("th",null,[ot(y("input",{type:"range",class:"wlong","onUpdate:modelValue":t[0]||(t[0]=a=>e.wantLodging=a),min:"0",max:Math.min(n.gameStore.ready?n.gameStore.townUpperLimits[e.tk].lodging:999,100)},null,8,Gxt),[[Gt,e.wantLodging,void 0,{number:!0}]]),R(E(e.wantLodging),1)]),y("th",null,E(o.bestLookup?o.bestLookup.lodging:"?"),1),y("th",null,E(o.lodgingCost)+" CP",1),y("th",null,E(o.bestLookup?o.formatFixed(o.bestLookup.lodging/o.lodgingCost,3):"?"),1)]),y("tr",null,[Hxt,y("th",null,[ot(y("input",{type:"range",class:"wlong","onUpdate:modelValue":t[1]||(t[1]=a=>e.wantStorage=a),min:"0",max:Math.min(n.gameStore.ready?n.gameStore.townUpperLimits[e.tk].storage:999,192-8)},null,8,Xxt),[[Gt,e.wantStorage,void 0,{number:!0}]]),R(E(e.wantStorage),1)]),y("th",null,E(o.bestLookup?o.bestLookup.storage:"?"),1),y("th",null,E(o.storageCost)+" CP",1),y("th",null,E(o.bestLookup?o.formatFixed(o.bestLookup.storage/o.storageCost,3):"?"),1)]),y("tr",null,[y("th",Yxt,[qxt,ot(y("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>e.tk=a)},[(M(!0),L(j,null,wt(this.townsWithHouses,a=>(M(),L("option",{value:a},E(n.gameStore.uloc.town[a]),9,Zxt))),256))],512),[[qe,e.tk]])]),y("th",Kxt,E(o.bestLookup?o.bestLookup.cost:"?")+" CP total",1)])])):Q("",!0)])])]),Jxt,o.bestLookup?(M(),L("div",Qxt,[(M(!0),L(j,null,wt(o.sortedResult,a=>(M(),L(j,null,[a.state>0?(M(),L("p",{key:0,class:gr({storage:a.state==1,lodging:a.state==2})},E(a.name),3)):Q("",!0)],64))),256))])):Q("",!0),bt(s,{class:"chart",option:o.chartOption},null,8,["option"])])])}const eLt=ce(Nxt,[["render",tLt],["__scopeId","data-v-8b0096ac"]]);/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rLt=typeof Object.defineProperty=="function"?Object.defineProperty:null,nLt=rLt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iLt=nLt;function oLt(){try{return iLt({},"x",{}),!0}catch{return!1}}var sLt=oLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aLt=Object.defineProperty,lLt=aLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $f=Object.prototype,YI=$f.toString,qI=$f.__defineGetter__,ZI=$f.__defineSetter__,uLt=$f.__lookupGetter__,cLt=$f.__lookupSetter__;function fLt(e,t,r){var n,i,o,s;if(typeof e!="object"||e===null||YI.call(e)==="[object Array]")throw new TypeError("invalid argument. First argument must be an object. Value: `"+e+"`.");if(typeof r!="object"||r===null||YI.call(r)==="[object Array]")throw new TypeError("invalid argument. Property descriptor must be an object. Value: `"+r+"`.");if(i="value"in r,i&&(uLt.call(e,t)||cLt.call(e,t)?(n=e.__proto__,e.__proto__=$f,delete e[t],e[t]=r.value,e.__proto__=n):e[t]=r.value),o="get"in r,s="set"in r,i&&(o||s))throw new Error("invalid argument. Cannot specify one or more accessors and a value or writable attribute in the property descriptor.");return o&&qI&&qI.call(e,t,r.get),s&&ZI&&ZI.call(e,t,r.set),e}var hLt=fLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dLt=sLt,pLt=lLt,vLt=hLt,MT;dLt()?MT=pLt:MT=vLt;var KV=MT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gLt=KV;function mLt(e,t,r){gLt(e,t,{configurable:!1,enumerable:!0,writable:!1,value:r})}var _Lt=mLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yLt=_Lt,bLt=yLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wLt=KV;function SLt(e,t,r){wLt(e,t,{configurable:!1,enumerable:!1,writable:!1,value:r})}var TLt=SLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kLt=TLt,wr=kLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PLt=Math.floor,ELt=PLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var CLt=ELt,zn=CLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ALt=zn;function MLt(e){return ALt(e)===e}var xLt=MLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var LLt=xLt,Ha=LLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ILt=4294967295>>>0,OLt=ILt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var RLt=Ha,DLt=OLt;function NLt(e){return e!=null&&typeof e!="function"&&typeof e.length=="number"&&RLt(e.length)&&e.length>=0&&e.length<=DLt}var FLt=NLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zLt=FLt,BLt=zLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $Lt=BLt;function VLt(e){if(typeof e!="function")throw new TypeError("invalid argument. Must provide a function. Value: `"+e+"`.");return t;function t(r){var n,i;if(!$Lt(r)||(n=r.length,n===0))return!1;for(i=0;i<n;i++)if(e(r[i])===!1)return!1;return!0}}var ULt=VLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var WLt=ULt,jLt=WLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function GLt(e){return typeof e=="number"}var JV=GLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function HLt(){return typeof Symbol=="function"&&typeof Symbol("foo")=="symbol"}var XLt=HLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var YLt=XLt,qLt=YLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZLt=qLt,KLt=ZLt();function JLt(){return KLt&&typeof Symbol.toStringTag=="symbol"}var QLt=JLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tIt=QLt,G_=tIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eIt=Object.prototype.toString,QV=eIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rIt=QV;function nIt(e){return rIt.call(e)}var iIt=nIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oIt=Object.prototype.hasOwnProperty;function sIt(e,t){return e==null?!1:oIt.call(e,t)}var aIt=sIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var lIt=aIt,H_=lIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uIt=typeof Symbol=="function"?Symbol.toStringTag:"",cIt=uIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fIt=H_,zh=cIt,Xb=QV;function hIt(e){var t,r,n;if(e==null)return Xb.call(e);r=e[zh],t=fIt(e,zh);try{e[zh]=void 0}catch{return Xb.call(e)}return n=Xb.call(e),t?e[zh]=r:delete e[zh],n}var dIt=hIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pIt=G_,vIt=iIt,gIt=dIt,xT;pIt()?xT=gIt:xT=vIt;var Zi=xT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mIt=Number;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _It=mIt,GE=_It;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yIt=GE,bIt=yIt.prototype.toString,wIt=bIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SIt=wIt;function TIt(e){try{return SIt.call(e),!0}catch{return!1}}var kIt=TIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PIt=G_,EIt=Zi,CIt=GE,AIt=kIt,MIt=PIt();function xIt(e){return typeof e=="object"?e instanceof CIt?!0:MIt?AIt(e):EIt(e)==="[object Number]":!1}var tU=xIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var LIt=JV,IIt=tU;function OIt(e){return LIt(e)||IIt(e)}var RIt=OIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eU=wr,HE=RIt,DIt=JV,NIt=tU;eU(HE,"isPrimitive",DIt);eU(HE,"isObject",NIt);var Vf=HE;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rU=wr,XE=jLt,YE=Vf,FIt=XE(YE.isPrimitive),zIt=XE(YE.isObject),qE=XE(YE);rU(qE,"primitives",FIt);rU(qE,"objects",zIt);var BIt=qE;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $It=Number.POSITIVE_INFINITY,Fe=$It;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var VIt=GE,UIt=VIt.NEGATIVE_INFINITY,Or=UIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var WIt=Fe,jIt=Or,GIt=Ha;function HIt(e){return e<WIt&&e>jIt&&GIt(e)}var nU=HIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XIt=Vf.isPrimitive,YIt=nU;function qIt(e){return XIt(e)&&YIt(e)}var iU=qIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZIt=Vf.isObject,KIt=nU;function JIt(e){return ZIt(e)&&KIt(e.valueOf())}var oU=JIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var QIt=iU,tOt=oU;function eOt(e){return QIt(e)||tOt(e)}var rOt=eOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sU=wr,ZE=rOt,nOt=iU,iOt=oU;sU(ZE,"isPrimitive",nOt);sU(ZE,"isObject",iOt);var X_=ZE;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oOt=X_.isPrimitive;function sOt(e){return oOt(e)&&e>=0}var aU=sOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aOt=X_.isObject;function lOt(e){return aOt(e)&&e.valueOf()>=0}var lU=lOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uOt=aU,cOt=lU;function fOt(e){return uOt(e)||cOt(e)}var hOt=fOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uU=wr,KE=hOt,dOt=aU,pOt=lU;uU(KE,"isPrimitive",dOt);uU(KE,"isObject",pOt);var vOt=KE;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function gOt(e){return e!==e}var mOt=gOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _Ot=mOt,Qt=_Ot;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function yOt(e,t){var r,n;if(n=e.length,n<2||t===0)return n===0?0:e[0];for(n-=1,r=e[n]*t+e[n-1],n-=2;n>=0;)r=r*t+e[n],n-=1;return r}var cU=yOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bOt=cU;function wOt(e){var t,r,n,i;if(e.length>500)return o;if(t="return function evalpoly(x){",r=e.length,r===0)t+="return 0.0;";else if(r===1)t+="return "+e[0]+";";else{for(t+="if(x===0.0){return "+e[0]+";}",t+="return "+e[0],n=r-1,i=1;i<r;i++)t+="+x*",i<n&&(t+="("),t+=e[i];for(i=0;i<n-1;i++)t+=")";t+=";"}return t+="}",t+="//# sourceURL=evalpoly.factory.js",new Function(t)();function o(s){return bOt(e,s)}}var SOt=wOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var TOt=wr,fU=cU,kOt=SOt;TOt(fU,"factory",kOt);var Xa=fU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var POt=Zi,EOt=typeof Uint32Array=="function";function COt(e){return EOt&&e instanceof Uint32Array||POt(e)==="[object Uint32Array]"}var AOt=COt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var MOt=AOt,xOt=MOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var LOt=4294967295,IOt=LOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var OOt=typeof Uint32Array=="function"?Uint32Array:null,ROt=OOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var DOt=xOt,Yb=IOt,KI=ROt;function NOt(){var e,t;if(typeof KI!="function")return!1;try{t=[1,3.14,-3.14,Yb+1,Yb+2],t=new KI(t),e=DOt(t)&&t[0]===1&&t[1]===3&&t[2]===Yb-2&&t[3]===0&&t[4]===1}catch{e=!1}return e}var FOt=NOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zOt=FOt,BOt=zOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $Ot=typeof Uint32Array=="function"?Uint32Array:void 0,VOt=$Ot;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function UOt(){throw new Error("not implemented")}var WOt=UOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jOt=BOt,GOt=VOt,HOt=WOt,LT;jOt()?LT=GOt:LT=HOt;var Uf=LT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XOt=Zi,YOt=typeof Float64Array=="function";function qOt(e){return YOt&&e instanceof Float64Array||XOt(e)==="[object Float64Array]"}var ZOt=qOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var KOt=ZOt,JOt=KOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var QOt=typeof Float64Array=="function"?Float64Array:null,tRt=QOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eRt=JOt,JI=tRt;function rRt(){var e,t;if(typeof JI!="function")return!1;try{t=new JI([1,3.14,-3.14,NaN]),e=eRt(t)&&t[0]===1&&t[1]===3.14&&t[2]===-3.14&&t[3]!==t[3]}catch{e=!1}return e}var nRt=rRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iRt=nRt,oRt=iRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sRt=typeof Float64Array=="function"?Float64Array:void 0,aRt=sRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function lRt(){throw new Error("not implemented")}var uRt=lRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cRt=oRt,fRt=aRt,hRt=uRt,IT;cRt()?IT=fRt:IT=hRt;var Wf=IT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dRt=Zi,pRt=typeof Uint8Array=="function";function vRt(e){return pRt&&e instanceof Uint8Array||dRt(e)==="[object Uint8Array]"}var gRt=vRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mRt=gRt,_Rt=mRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yRt=255,bRt=yRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wRt=typeof Uint8Array=="function"?Uint8Array:null,SRt=wRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var TRt=_Rt,qb=bRt,QI=SRt;function kRt(){var e,t;if(typeof QI!="function")return!1;try{t=[1,3.14,-3.14,qb+1,qb+2],t=new QI(t),e=TRt(t)&&t[0]===1&&t[1]===3&&t[2]===qb-2&&t[3]===0&&t[4]===1}catch{e=!1}return e}var PRt=kRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ERt=PRt,CRt=ERt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ARt=typeof Uint8Array=="function"?Uint8Array:void 0,MRt=ARt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function xRt(){throw new Error("not implemented")}var LRt=xRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var IRt=CRt,ORt=MRt,RRt=LRt,OT;IRt()?OT=ORt:OT=RRt;var DRt=OT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NRt=Zi,FRt=typeof Uint16Array=="function";function zRt(e){return FRt&&e instanceof Uint16Array||NRt(e)==="[object Uint16Array]"}var BRt=zRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $Rt=BRt,VRt=$Rt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var URt=65535,WRt=URt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jRt=typeof Uint16Array=="function"?Uint16Array:null,GRt=jRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var HRt=VRt,Zb=WRt,tO=GRt;function XRt(){var e,t;if(typeof tO!="function")return!1;try{t=[1,3.14,-3.14,Zb+1,Zb+2],t=new tO(t),e=HRt(t)&&t[0]===1&&t[1]===3&&t[2]===Zb-2&&t[3]===0&&t[4]===1}catch{e=!1}return e}var YRt=XRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qRt=YRt,ZRt=qRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var KRt=typeof Uint16Array=="function"?Uint16Array:void 0,JRt=KRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function QRt(){throw new Error("not implemented")}var t8t=QRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e8t=ZRt,r8t=JRt,n8t=t8t,RT;e8t()?RT=r8t:RT=n8t;var i8t=RT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var o8t=DRt,s8t=i8t,a8t={uint16:s8t,uint8:o8t},l8t=a8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eO=l8t,hU;function u8t(){var e,t;return e=new eO.uint16(1),e[0]=4660,t=new eO.uint8(e.buffer),t[0]===52}hU=u8t();var c8t=hU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var f8t=c8t,jf=f8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var h8t=jf,DT;h8t===!0?DT=1:DT=0;var d8t=DT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var p8t=Uf,v8t=Wf,g8t=d8t,dU=new v8t(1),m8t=new p8t(dU.buffer);function _8t(e){return dU[0]=e,m8t[g8t]}var y8t=_8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var b8t=y8t,pi=b8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var w8t=jf,NT;w8t===!0?NT=1:NT=0;var S8t=NT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var T8t=Uf,k8t=Wf,P8t=S8t,FT=new k8t(1),E8t=new T8t(FT.buffer);function C8t(e,t){return FT[0]=e,E8t[P8t]=t>>>0,FT[0]}var A8t=C8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var M8t=A8t,s0=M8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var x8t=1023,Nu=x8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var L8t=.34657359027997264,I8t=L8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function O8t(e){return e===0?-.03333333333333313:-.03333333333333313+e*(.0015873015872548146+e*(-793650757867488e-19+e*(4008217827329362e-21+e*-20109921818362437e-23)))}var R8t=O8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FDLIBM]{@link http://www.netlib.org/fdlibm/s_expm1.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var D8t=Qt,Kb=pi,Hv=s0,rO=Fe,N8t=Or,F8t=Nu,z8t=I8t,B8t=R8t,$8t=709.782712893384,Jb=.6931471803691238,Qb=19082149292705877e-26,nO=1.4426950408889634,V8t=38.816242111356935,U8t=1.0397207708399179;function W8t(e){var t,r,n,i,o,s,a,l,u,c,f,h;if(e===rO||D8t(e))return e;if(e===N8t)return-1;if(e===0)return e;if(e<0?(r=!0,a=-e):(r=!1,a=e),a>=V8t){if(r)return-1;if(a>=$8t)return rO}if(o=Kb(a)|0,a>z8t)a<U8t?r?(n=e+Jb,i=-Qb,h=-1):(n=e-Jb,i=Qb,h=1):(r?h=nO*e-.5:h=nO*e+.5,h|=0,c=h,n=e-c*Jb,i=c*Qb),e=n-i,u=n-e-i;else{if(o<1016070144)return e;h=0}return t=.5*e,l=e*t,s=1+l*B8t(l),c=3-s*t,f=l*((s-c)/(6-e*c)),h===0?e-(e*f-l):(f=e*(f-u)-u,f-=l,h===-1?.5*(e-f)-.5:h===1?e<-.25?-2*(f-(e+.5)):1+2*(e-f):h<=-2||h>56?(a=1-(f-e),n=Kb(a)+(h<<20)|0,a=Hv(a,n),a-1):(c=1,h<20?(n=1072693248-(2097152>>h)|0,c=Hv(c,n),a=c-(f-e)):(n=F8t-h<<20|0,c=Hv(c,n),a=e-(f+c),a+=1),n=Kb(a)+(h<<20)|0,Hv(a,n)))}var j8t=W8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var G8t=j8t,Gf=G8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function H8t(e){return e===0?.6666666666666735:.6666666666666735+e*(.3999999999940942+e*(.2857142874366239+e*(.22222198432149784+e*(.1818357216161805+e*(.15313837699209373+e*.14798198605116586)))))}var X8t=H8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FDLIBM]{@link http://www.netlib.org/fdlibm/s_log1p.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var Y8t=Qt,iO=pi,oO=s0,q8t=Fe,Z8t=Or,sO=Nu,K8t=X8t,tw=.6931471803691238,ew=19082149292705877e-26,J8t=.41421356237309503,Q8t=-.2928932188134525,tDt=1862645149230957e-24,eDt=5551115123125783e-32,rDt=9007199254740992,nDt=.6666666666666666;function iDt(e){var t,r,n,i,o,s,a,l,u,c;if(e<-1||Y8t(e))return NaN;if(e===-1)return Z8t;if(e===q8t||e===0)return e;if(e<0?n=-e:n=e,c=1,n<J8t){if(n<tDt)return n<eDt?e:e-e*e*.5;e>Q8t&&(c=0,i=e,r=1)}return c!==0&&(n<rDt?(u=1+e,r=iO(u),c=(r>>20)-sO,c>0?o=1-(u-e):o=e-(u-1),o/=u):(u=e,r=iO(u),c=(r>>20)-sO,o=0),r&=1048575,r<434334?u=oO(u,r|1072693248):(c+=1,u=oO(u,r|1071644672),r=1048576-r>>2),i=u-1),t=.5*i*i,r===0?i===0?(o+=c*ew,c*tw+o):(l=t*(1-nDt*i),c*tw-(l-(c*ew+o)-i)):(s=i/(2+i),a=s*s,l=a*K8t(a),c===0?i-(t-s*(t+l)):c*tw-(t-(s*(t+l)+(c*ew+o))-i))}var oDt=iDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sDt=oDt,Bn=sDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aDt=Math.sqrt,lDt=aDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uDt=lDt,ir=uDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cDt=.7853981633974483,pU=cDt;/**
* @license Apache-2.0
*
* Copyright (c) 2020 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function fDt(e){var t,r,n;return e===0?.16666666666666713:(e<0?t=-e:t=e,t<=1?(r=-8.198089802484825+e*(19.562619833175948+e*(-16.262479672107002+e*(5.444622390564711+e*(-.6019598008014124+e*.004253011369004428)))),n=-49.18853881490881+e*(139.51056146574857+e*(-147.1791292232726+e*(70.49610280856842+e*(-14.740913729888538+e*1))))):(e=1/e,r=.004253011369004428+e*(-.6019598008014124+e*(5.444622390564711+e*(-16.262479672107002+e*(19.562619833175948+e*-8.198089802484825)))),n=1+e*(-14.740913729888538+e*(70.49610280856842+e*(-147.1791292232726+e*(139.51056146574857+e*-49.18853881490881))))),r/n)}var hDt=fDt;/**
* @license Apache-2.0
*
* Copyright (c) 2020 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function dDt(e){var t,r,n;return e===0?.08333333333333809:(e<0?t=-e:t=e,t<=1?(r=28.536655482610616+e*(-25.56901049652825+e*(6.968710824104713+e*(-.5634242780008963+e*.002967721961301243))),n=342.43986579130785+e*(-383.8770957603691+e*(147.0656354026815+e*(-21.947795316429207+e*1)))):(e=1/e,r=.002967721961301243+e*(-.5634242780008963+e*(6.968710824104713+e*(-25.56901049652825+e*28.536655482610616))),n=1+e*(-21.947795316429207+e*(147.0656354026815+e*(-383.8770957603691+e*342.43986579130785)))),r/n)}var pDt=dDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, long comment, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1995, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var vDt=Qt,gDt=ir,aO=pU,mDt=hDt,_Dt=pDt,yDt=6123233995736766e-32;function bDt(e){var t,r,n,i,o;if(vDt(e))return NaN;if(e>0?n=e:(t=!0,n=-e),n>1)return NaN;if(n>.625)r=1-n,i=r*_Dt(r),r=gDt(r+r),o=aO-r,r=r*i-yDt,o-=r,o+=aO;else{if(n<1e-8)return e;r=n*n,o=r*mDt(r),o=n*o+n}return t?-o:o}var wDt=bDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SDt=wDt,JE=SDt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function TDt(e){return Math.abs(e)}var kDt=TDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PDt=kDt,ve=PDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var EDt=Math.ceil,CDt=EDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ADt=CDt,vU=ADt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var MDt=zn,xDt=vU;function LDt(e){return e<0?xDt(e):MDt(e)}var IDt=LDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ODt=IDt,QE=ODt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var RDt=1023,DDt=RDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NDt=-1023,FDt=NDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zDt=-1074,BDt=zDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $Dt=Fe,VDt=Or;function UDt(e){return e===$Dt||e===VDt}var WDt=UDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jDt=WDt,Hf=jDt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GDt=2147483648>>>0,HDt=GDt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XDt=2147483647>>>0,Y_=XDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var YDt=jf,gU,zT,BT;YDt===!0?(zT=1,BT=0):(zT=0,BT=1);gU={HIGH:zT,LOW:BT};var qDt=gU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZDt=Uf,KDt=Wf,mU=qDt,_U=new KDt(1),lO=new ZDt(_U.buffer),JDt=mU.HIGH,QDt=mU.LOW;function t9t(e,t,r,n){return _U[0]=e,t[n]=lO[JDt],t[n+r]=lO[QDt],t}var yU=t9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e9t=yU;function r9t(e){return e9t(e,[0>>>0,0>>>0],1,0)}var n9t=r9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var i9t=wr,bU=n9t,o9t=yU;i9t(bU,"assign",o9t);var tC=bU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var s9t=jf,wU,$T,VT;s9t===!0?($T=1,VT=0):($T=0,VT=1);wU={HIGH:$T,LOW:VT};var a9t=wU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var l9t=Uf,u9t=Wf,SU=a9t,TU=new u9t(1),uO=new l9t(TU.buffer),c9t=SU.HIGH,f9t=SU.LOW;function h9t(e,t){return uO[c9t]=e,uO[f9t]=t,TU[0]}var d9t=h9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var p9t=d9t,eC=p9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var v9t=HDt,g9t=Y_,m9t=tC,_9t=pi,y9t=eC,rw=[0,0];function b9t(e,t){var r,n;return m9t.assign(e,rw,1,0),r=rw[0],r&=g9t,n=_9t(t),n&=v9t,r|=n,y9t(r,rw[1])}var w9t=b9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var S9t=w9t,rC=S9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var T9t=22250738585072014e-324,Fu=T9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var k9t=Fu,P9t=Hf,E9t=Qt,C9t=ve,A9t=4503599627370496;function M9t(e,t,r,n){return E9t(e)||P9t(e)?(t[n]=e,t[n+r]=0,t):e!==0&&C9t(e)<k9t?(t[n]=e*A9t,t[n+r]=-52,t):(t[n]=e,t[n+r]=0,t)}var kU=M9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var x9t=kU;function L9t(e){return x9t(e,[0,0],1,0)}var I9t=L9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var O9t=wr,PU=I9t,R9t=kU;O9t(PU,"assign",R9t);var D9t=PU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var N9t=2146435072,F9t=N9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var z9t=pi,B9t=F9t,$9t=Nu;function V9t(e){var t=z9t(e);return t=(t&B9t)>>>20,t-$9t|0}var U9t=V9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var W9t=U9t,j9t=W9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var G9t=Fe,H9t=Or,X9t=Nu,Y9t=DDt,q9t=FDt,Z9t=BDt,K9t=Qt,J9t=Hf,Q9t=rC,t7t=D9t.assign,e7t=j9t,r7t=tC,n7t=eC,i7t=2220446049250313e-31,o7t=2148532223>>>0,nw=[0,0],iw=[0,0];function s7t(e,t){var r,n;return t===0||e===0||K9t(e)||J9t(e)?e:(t7t(e,nw,1,0),e=nw[0],t+=nw[1],t+=e7t(e),t<Z9t?Q9t(0,e):t>Y9t?e<0?H9t:G9t:(t<=q9t?(t+=52,n=i7t):n=1,r7t.assign(e,iw,1,0),r=iw[0],r&=o7t,r|=t+X9t<<20,n*n7t(r,iw[1])))}var a7t=s7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var l7t=a7t,Xf=l7t;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function u7t(e){return e===0?.16666666666666602:.16666666666666602+e*(-.0027777777777015593+e*(6613756321437934e-20+e*(-16533902205465252e-22+e*41381367970572385e-24)))}var c7t=u7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_exp.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var f7t=Xf,h7t=c7t;function d7t(e,t,r){var n,i,o,s;return n=e-t,i=n*n,o=n-i*h7t(i),s=1-(t-n*o/(2-o)-e),f7t(s,r)}var p7t=d7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_exp.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var v7t=Qt,cO=QE,g7t=Or,fO=Fe,m7t=p7t,_7t=.6931471803691238,y7t=19082149292705877e-26,hO=1.4426950408889634,b7t=709.782712893384,w7t=-745.1332191019411,EU=1/(1<<28),S7t=-EU;function T7t(e){var t,r,n;return v7t(e)||e===fO?e:e===g7t?0:e>b7t?fO:e<w7t?0:e>S7t&&e<EU?1+e:(e<0?n=cO(hO*e-.5):n=cO(hO*e+.5),t=e-n*_7t,r=n*y7t,m7t(t,r,n))}var k7t=T7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var P7t=k7t,We=P7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var E7t=Ha;function C7t(e){return E7t(e/2)}var A7t=C7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var M7t=A7t,x7t=M7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dO=x7t;function L7t(e){return e>0?dO(e-1):dO(e+1)}var I7t=L7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var O7t=I7t,nC=O7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var R7t=jf,UT;R7t===!0?UT=0:UT=1;var D7t=UT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var N7t=Uf,F7t=Wf,z7t=D7t,WT=new F7t(1),B7t=new N7t(WT.buffer);function $7t(e,t){return WT[0]=e,B7t[z7t]=t>>>0,WT[0]}var V7t=$7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var U7t=V7t,a0=U7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function W7t(e){return e|0}var j7t=W7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var G7t=j7t,CU=G7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var pO=nC,H7t=rC,X7t=Or,Xv=Fe;function Y7t(e,t){return t===X7t?Xv:t===Xv?0:t>0?pO(t)?e:0:pO(t)?H7t(Xv,e):Xv}var q7t=Y7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var Z7t=Y_,K7t=pi,J7t=1072693247,Yv=1e300,qv=1e-300;function Q7t(e,t){var r,n;return n=K7t(e),r=n&Z7t,r<=J7t?t<0?Yv*Yv:qv*qv:t>0?Yv*Yv:qv*qv}var tNt=Q7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eNt=ve,vO=Fe;function rNt(e,t){return e===-1?(e-e)/(e-e):e===1?1:eNt(e)<1==(t===vO)?0:vO}var nNt=rNt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function iNt(e){return e===0?.5999999999999946:.5999999999999946+e*(.4285714285785502+e*(.33333332981837743+e*(.272728123808534+e*(.23066074577556175+e*.20697501780033842))))}var oNt=iNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var sNt=pi,Zv=a0,gO=s0,aNt=Nu,lNt=oNt,uNt=1048575,mO=1048576,cNt=1072693248,fNt=536870912,hNt=524288,dNt=20,pNt=9007199254740992,vNt=.9617966939259756,gNt=.9617967009544373,mNt=-7028461650952758e-24,_Nt=[1,1.5],yNt=[0,.5849624872207642],bNt=[0,1350039202129749e-23];function wNt(e,t,r){var n,i,o,s,a,l,u,c,f,h,d,p,v,m,g,_,b,w,T,S,k,A;return S=0,r<mO&&(t*=pNt,S-=53,r=sNt(t)),S+=(r>>dNt)-aNt|0,k=r&uNt|0,r=k|cNt|0,k<=235662?A=0:k<767610?A=1:(A=0,S+=1,r-=mO),t=gO(t,r),c=_Nt[A],w=t-c,T=1/(t+c),i=w*T,s=Zv(i,0),n=(r>>1|fNt)+hNt,n+=A<<18,l=gO(0,n),u=t-(l-c),a=T*(w-s*l-s*u),o=i*i,b=o*o*lNt(o),b+=a*(s+i),o=s*s,l=3+o+b,l=Zv(l,0),u=b-(l-3-o),w=s*l,T=a*l+u*i,h=w+T,h=Zv(h,0),d=T-(h-w),p=gNt*h,v=mNt*h+d*vNt+bNt[A],f=yNt[A],_=S,m=p+v+f+_,m=Zv(m,0),g=v-(m-_-f-p),e[0]=m,e[1]=g,e}var SNt=wNt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function TNt(e){return e===0?.5:.5+e*(-.3333333333333333+e*.25)}var kNt=TNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var PNt=a0,ENt=kNt,CNt=1.4426950408889634,ANt=1.4426950216293335,MNt=19259629911266175e-24;function xNt(e,t){var r,n,i,o,s,a;return i=t-1,o=i*i*ENt(i),s=ANt*i,a=i*MNt-o*CNt,n=s+a,n=PNt(n,0),r=a-(n-s),e[0]=n,e[1]=r,e}var LNt=xNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var INt=.6931471805599453,ONt=INt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var RNt=1048575,DNt=RNt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function NNt(e){return e===0?.16666666666666602:.16666666666666602+e*(-.0027777777777015593+e*(6613756321437934e-20+e*(-16533902205465252e-22+e*41381367970572385e-24)))}var FNt=NNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var zNt=pi,_O=s0,BNt=a0,$Nt=CU,VNt=Xf,UNt=ONt,yO=Nu,bO=Y_,wO=DNt,WNt=FNt,SO=1048576,jNt=1071644672,Bh=20,GNt=.6931471824645996,HNt=-1904654299957768e-24;function XNt(e,t,r){var n,i,o,s,a,l,u,c,f,h,d;return h=e&bO|0,d=(h>>Bh)-yO|0,f=0,h>jNt&&(f=e+(SO>>d+1)>>>0,d=((f&bO)>>Bh)-yO|0,n=(f&~(wO>>d))>>>0,o=_O(0,n),f=(f&wO|SO)>>Bh-d>>>0,e<0&&(f=-f),t-=o),o=r+t,o=BNt(o,0),a=o*GNt,l=(r-(o-t))*UNt+o*HNt,c=a+l,u=l-(c-a),o=c*c,i=c-o*WNt(o),s=c*i/(i-2)-(u+c*u),c=1-(s-c),e=zNt(c),e=$Nt(e),e+=f<<Bh>>>0,e>>Bh<=0?c=VNt(c,f):c=_O(c,e),c}var YNt=XNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var TO=Qt,kO=nC,PO=Hf,qNt=Ha,EO=ir,ZNt=ve,ow=tC,KNt=a0,CO=CU,JNt=Or,QNt=Fe,sw=Y_,tFt=q7t,eFt=tNt,rFt=nNt,nFt=SNt,iFt=LNt,oFt=YNt,sFt=1072693247,aFt=1105199104,lFt=1139802112,AO=1083179008,uFt=1072693248,cFt=1083231232,fFt=3230714880>>>0,MO=31,Ks=1e300,Js=1e-300,hFt=8008566259537294e-32,Ko=[0,0],xO=[0,0];function AU(e,t){var r,n,i,o,s,a,l,u,c,f,h,d,p,v,m,g;if(TO(e)||TO(t))return NaN;if(ow.assign(t,Ko,1,0),a=Ko[0],l=Ko[1],l===0){if(t===0)return 1;if(t===1)return e;if(t===-1)return 1/e;if(t===.5)return EO(e);if(t===-.5)return 1/EO(e);if(t===2)return e*e;if(t===3)return e*e*e;if(t===4)return e*=e,e*e;if(PO(t))return rFt(e,t)}if(ow.assign(e,Ko,1,0),o=Ko[0],s=Ko[1],s===0){if(o===0)return tFt(e,t);if(e===1)return 1;if(e===-1&&kO(t))return-1;if(PO(e))return e===JNt?AU(-0,-t):t<0?0:QNt}if(e<0&&qNt(t)===!1)return(e-e)/(e-e);if(i=ZNt(e),r=o&sw|0,n=a&sw|0,u=o>>>MO|0,c=a>>>MO|0,u&&kO(t)?u=-1:u=1,n>aFt){if(n>lFt)return eFt(e,t);if(r<sFt)return c===1?u*Ks*Ks:u*Js*Js;if(r>uFt)return c===0?u*Ks*Ks:u*Js*Js;p=iFt(xO,i)}else p=nFt(xO,i,r);if(f=KNt(t,0),d=(t-f)*p[0]+t*p[1],h=f*p[0],v=d+h,ow.assign(v,Ko,1,0),m=CO(Ko[0]),g=CO(Ko[1]),m>=AO){if((m-AO|g)!==0||d+hFt>v-h)return u*Ks*Ks}else if((m&sw)>=cFt&&((m-fFt|g)!==0||d<=v-h))return u*Js*Js;return v=oFt(m,h,d),u*v}var dFt=AU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pFt=dFt,or=pFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vFt=2.718281828459045,Yf=vFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gFt=2220446049250313e-31,Os=gFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function mFt(e){var t,r,n;return e===0?1/0:(e<0?t=-e:t=e,t<=1?(r=709811.662581658+e*(679979.8474157227+e*(293136.7857211597+e*(74887.54032914672+e*(12555.290582413863+e*(1443.4299244417066+e*(115.24194596137347+e*(6.309239205732627+e*(.22668404630224365+e*(.004826466289237662+e*4624429436045379e-20))))))))),n=0+e*(362880+e*(1026576+e*(1172700+e*(723680+e*(269325+e*(63273+e*(9450+e*(870+e*(45+e*1)))))))))):(e=1/e,r=4624429436045379e-20+e*(.004826466289237662+e*(.22668404630224365+e*(6.309239205732627+e*(115.24194596137347+e*(1443.4299244417066+e*(12555.290582413863+e*(74887.54032914672+e*(293136.7857211597+e*(679979.8474157227+e*709811.662581658))))))))),n=1+e*(45+e*(870+e*(9450+e*(63273+e*(269325+e*(723680+e*(1172700+e*(1026576+e*(362880+e*0)))))))))),r/n)}var _Ft=mFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var LO=Qt,yFt=Bn,bFt=ir,wFt=ve,SFt=We,aw=or,TFt=Yf,lw=Os,uw=_Ft,cw=10.900511;function kFt(e,t){var r,n,i,o,s,a,l;return LO(e)||LO(t)?NaN:e<0||t<0?NaN:t===1?1/e:e===1?1/t:(l=e+t,l<lw?(s=l/e,s/=t,s):l===e&&t<lw?1/t:l===t&&e<lw?1/e:(e<t&&(a=t,t=e,e=a),n=e+cw-.5,i=t+cw-.5,o=l+cw-.5,s=uw(e)*(uw(t)/uw(l)),r=e-.5-t,wFt(t*r)<o*100&&e>100?s*=SFt(r*yFt(-t/o)):s*=aw(n/o,r),o>1e10?s*=aw(n/o*(i/o),t):s*=aw(n*i/(o*o),t),s*=bFt(TFt/i),s))}var PFt=kFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var EFt=PFt,MU=EFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var CFt=Fe;function AFt(e){return e===0&&1/e===CFt}var MFt=AFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xFt=MFt,LFt=xFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var IO=LFt,fw=Qt,IFt=Or,Kv=Fe;function OFt(e,t){var r,n,i,o;if(r=arguments.length,r===2)return fw(e)||fw(t)?NaN:e===Kv||t===Kv?Kv:e===t&&e===0?IO(e)?e:t:e>t?e:t;for(n=IFt,o=0;o<r;o++){if(i=arguments[o],fw(i)||i===Kv)return i;(i>n||i===n&&i===0&&IO(i))&&(n=i)}return n}var RFt=OFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var DFt=RFt,zu=DFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NFt=Or;function FFt(e){return e===0&&1/e===NFt}var zFt=FFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var BFt=zFt,xU=BFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var OO=xU,hw=Qt,Jv=Or,$Ft=Fe;function VFt(e,t){var r,n,i,o;if(r=arguments.length,r===2)return hw(e)||hw(t)?NaN:e===Jv||t===Jv?Jv:e===t&&e===0?OO(e)?e:t:e<t?e:t;for(n=$Ft,o=0;o<r;o++){if(i=arguments[o],hw(i)||i===Jv)return i;(i<n||i===n&&i===0&&OO(i))&&(n=i)}return n}var UFt=VFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var WFt=UFt,Ya=WFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jFt=17976931348623157e292,qf=jFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GFt=2147483647,HFt=GFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XFt=1.5707963267948966,iC=XFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var YFt=3.141592653589793,qa=YFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qFt(e){return e===0?.0416666666666666:.0416666666666666+e*(-.001388888888887411+e*2480158728947673e-20)}var ZFt=qFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function KFt(e){return e===0?-27557314351390663e-23:-27557314351390663e-23+e*(2087572321298175e-24+e*-11359647557788195e-27)}var JFt=KFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_cos.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var QFt=ZFt,tzt=JFt;function ezt(e,t){var r,n,i,o;return o=e*e,i=o*o,n=o*QFt(o),n+=i*i*tzt(o),r=.5*o,i=1-r,i+(1-i-r+(o*n-e*t))}var rzt=ezt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nzt=rzt,LU=nzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_sin.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var RO=-.16666666666666632,izt=.00833333333332249,ozt=-.0001984126982985795,szt=27557313707070068e-22,azt=-25050760253406863e-24,lzt=158969099521155e-24;function uzt(e,t){var r,n,i,o;return o=e*e,i=o*o,r=izt+o*(ozt+o*szt)+o*i*(azt+o*lzt),n=o*e,t===0?e+n*(RO+o*r):e-(o*(.5*t-n*r)-t-n*RO)}var czt=uzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fzt=czt,IU=fzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hzt=jf,jT;hzt===!0?jT=0:jT=1;var dzt=jT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pzt=Uf,vzt=Wf,gzt=dzt,OU=new vzt(1),mzt=new pzt(OU.buffer);function _zt(e){return OU[0]=e,mzt[gzt]}var yzt=_zt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bzt=yzt,wzt=bzt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Szt(e,t){var r,n;for(r=[],n=0;n<t;n++)r.push(e);return r}var Tzt=Szt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kzt=Tzt,Pzt=kzt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ezt=Pzt;function Czt(e){return Ezt(0,e)}var Azt=Czt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Mzt=Azt,xzt=Mzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_rem_pio2.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var Lzt=zn,Qv=Xf,q_=xzt,RU=[10680707,7228996,1387004,2578385,16069853,12639074,9804092,4427841,16666979,11263675,12935607,2387514,4345298,14681673,3074569,13734428,16653803,1880361,10960616,8533493,3062596,8710556,7349940,6258241,3772886,3769171,3798172,8675211,12450088,3874808,9961438,366607,15675153,9132554,7151469,3571407,2607881,12013382,4155038,6285869,7677882,13102053,15825725,473591,9065106,15363067,6271263,9264392,5636912,4652155,7056368,13614112,10155062,1944035,9527646,15080200,6658437,6231200,6832269,16767104,5075751,3212806,1398474,7579849,6349435,12618859],Izt=[1.570796251296997,7549789415861596e-23,5390302529957765e-30,3282003415807913e-37,1270655753080676e-44,12293330898111133e-52,27337005381646456e-60,21674168387780482e-67],dw=16777216,pw=5960464477539063e-23,tg=q_(20),DO=q_(20),eg=q_(20),Pr=q_(20);function DU(e,t,r,n,i,o,s,a,l){var u,c,f,h,d,p,v,m,g;for(h=o,g=n[r],m=r,d=0;m>0;d++)c=pw*g|0,Pr[d]=g-dw*c|0,g=n[m-1]+c,m-=1;if(g=Qv(g,i),g-=8*Lzt(g*.125),v=g|0,g-=v,f=0,i>0?(d=Pr[r-1]>>24-i,v+=d,Pr[r-1]-=d<<24-i,f=Pr[r-1]>>23-i):i===0?f=Pr[r-1]>>23:g>=.5&&(f=2),f>0){for(v+=1,u=0,d=0;d<r;d++)m=Pr[d],u===0?m!==0&&(u=1,Pr[d]=16777216-m):Pr[d]=16777215-m;if(i>0)switch(i){case 1:Pr[r-1]&=8388607;break;case 2:Pr[r-1]&=4194303;break}f===2&&(g=1-g,u!==0&&(g-=Qv(1,i)))}if(g===0){for(m=0,d=r-1;d>=o;d--)m|=Pr[d];if(m===0){for(p=1;Pr[o-p]===0;p++);for(d=r+1;d<=r+p;d++){for(l[a+d]=RU[s+d],c=0,m=0;m<=a;m++)c+=e[m]*l[a+(d-m)];n[d]=c}return r+=p,DU(e,t,r,n,i,o,s,a,l)}}if(g===0)for(r-=1,i-=24;Pr[r]===0;)r-=1,i-=24;else g=Qv(g,-i),g>=dw?(c=pw*g|0,Pr[r]=g-dw*c|0,r+=1,i+=24,Pr[r]=c):Pr[r]=g|0;for(c=Qv(1,i),d=r;d>=0;d--)n[d]=c*Pr[d],c*=pw;for(d=r;d>=0;d--){for(c=0,p=0;p<=h&&p<=r-d;p++)c+=Izt[p]*n[d+p];eg[r-d]=c}for(c=0,d=r;d>=0;d--)c+=eg[d];for(f===0?t[0]=c:t[0]=-c,c=eg[0]-c,d=1;d<=r;d++)c+=eg[d];return f===0?t[1]=c:t[1]=-c,v&7}function Ozt(e,t,r,n){var i,o,s,a,l,u,c,f,h;for(o=4,a=n-1,s=(r-3)/24|0,s<0&&(s=0),u=r-24*(s+1),f=s-a,h=a+o,c=0;c<=h;c++)f<0?tg[c]=0:tg[c]=RU[f],f+=1;for(c=0;c<=o;c++){for(i=0,f=0;f<=a;f++)i+=e[f]*tg[a+(c-f)];DO[c]=i}return l=o,DU(e,t,l,DO,u,o,s,a,tg)}var Rzt=Ozt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Dzt=Math.round,Nzt=Dzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Fzt=Nzt,Z_=Fzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_rem_pio2.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var zzt=Z_,NO=pi,Bzt=.6366197723675814,$zt=1.5707963267341256,Vzt=6077100506506192e-26,Uzt=6077100506303966e-26,Wzt=20222662487959506e-37,jzt=20222662487111665e-37,Gzt=84784276603689e-45,FO=2047;function Hzt(e,t,r){var n,i,o,s,a,l,u;return i=zzt(e*Bzt),s=e-i*$zt,a=i*Vzt,u=t>>20|0,r[0]=s-a,n=NO(r[0]),l=u-(n>>20&FO),l>16&&(o=s,a=i*Uzt,s=o-a,a=i*Wzt-(o-s-a),r[0]=s-a,n=NO(r[0]),l=u-(n>>20&FO),l>49&&(o=s,a=i*jzt,s=o-a,a=i*Gzt-(o-s-a),r[0]=s-a)),r[1]=s-r[0]-a,i}var Xzt=Hzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_rem_pio2.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
*
* Optimized by Bruce D. Evans.
* ```
*/var Yzt=pi,qzt=wzt,Zzt=eC,Kzt=Rzt,rg=Xzt,Jzt=0,Qzt=16777216,Qs=1.5707963267341256,Wl=6077100506506192e-26,ng=2*Wl,ig=3*Wl,og=4*Wl,tBt=2147483647,eBt=2146435072,rBt=1048575,nBt=598523,iBt=1072243195,oBt=1073928572,sBt=1074752122,aBt=1074977148,lBt=1075183036,uBt=1075388923,cBt=1075594811,fBt=1094263291,$h=[0,0,0],Vh=[0,0];function hBt(e,t){var r,n,i,o,s,a,l,u;if(i=Yzt(e),o=i&tBt|0,o<=iBt)return t[0]=e,t[1]=0,0;if(o<=sBt)return(o&rBt)===nBt?rg(e,o,t):o<=oBt?e>0?(u=e-Qs,t[0]=u-Wl,t[1]=u-t[0]-Wl,1):(u=e+Qs,t[0]=u+Wl,t[1]=u-t[0]+Wl,-1):e>0?(u=e-2*Qs,t[0]=u-ng,t[1]=u-t[0]-ng,2):(u=e+2*Qs,t[0]=u+ng,t[1]=u-t[0]+ng,-2);if(o<=cBt)return o<=lBt?o===aBt?rg(e,o,t):e>0?(u=e-3*Qs,t[0]=u-ig,t[1]=u-t[0]-ig,3):(u=e+3*Qs,t[0]=u+ig,t[1]=u-t[0]+ig,-3):o===uBt?rg(e,o,t):e>0?(u=e-4*Qs,t[0]=u-og,t[1]=u-t[0]-og,4):(u=e+4*Qs,t[0]=u+og,t[1]=u-t[0]+og,-4);if(o<fBt)return rg(e,o,t);if(o>=eBt)return t[0]=NaN,t[1]=NaN,0;for(r=qzt(e),n=(o>>20)-1046,u=Zzt(o-(n<<20|0),r),a=0;a<2;a++)$h[a]=u|0,u=(u-$h[a])*Qzt;for($h[2]=u,s=3;$h[s-1]===Jzt;)s-=1;return l=Kzt($h,Vh,n,s),e<0?(t[0]=-Vh[0],t[1]=-Vh[1],-l):(t[0]=Vh[0],t[1]=Vh[1],l)}var dBt=hBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pBt=dBt,NU=pBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_sin.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var vBt=pi,zO=LU,vw=IU,gBt=NU,mBt=2147483647,_Bt=2146435072,yBt=1072243195,bBt=1045430272,Jo=[0,0];function wBt(e){var t,r;if(t=vBt(e),t&=mBt,t<=yBt)return t<bBt?e:vw(e,0);if(t>=_Bt)return NaN;switch(r=gBt(e,Jo),r&3){case 0:return vw(Jo[0],Jo[1]);case 1:return zO(Jo[0],Jo[1]);case 2:return-vw(Jo[0],Jo[1]);default:return-zO(Jo[0],Jo[1])}}var SBt=wBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var TBt=SBt,l0=TBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kBt=2.5066282746310007,K_=kBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function PBt(e){return e===0?.08333333333334822:.08333333333334822+e*(.0034722222160545866+e*(-.0026813261780578124+e*(-.00022954996161337813+e*.0007873113957930937)))}var EBt=PBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var CBt=K_,BO=or,ABt=We,MBt=EBt,xBt=143.01608;function LBt(e){var t,r,n;return t=1/e,t=1+t*MBt(t),r=ABt(e),e>xBt?(n=BO(e,.5*e-.25),r=n*(n/r)):r=BO(e,e-.5)/r,CBt*r*t}var IBt=LBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var OBt=.5772156649015329,RBt=OBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var DBt=RBt;function NBt(e,t){return t/((1+DBt*e)*e)}var FBt=NBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zBt(e){var t,r,n;return e===0?1:(e<0?t=-e:t=e,t<=1?(r=1+e*(.4942148268014971+e*(.20744822764843598+e*(.04763678004571372+e*(.010421379756176158+e*(.0011913514700658638+e*(.00016011952247675185+e*0)))))),n=1+e*(.0714304917030273+e*(-.23459179571824335+e*(.035823639860549865+e*(.011813978522206043+e*(-.004456419138517973+e*(.0005396055804933034+e*-23158187332412014e-21))))))):(e=1/e,r=0+e*(.00016011952247675185+e*(.0011913514700658638+e*(.010421379756176158+e*(.04763678004571372+e*(.20744822764843598+e*(.4942148268014971+e*1)))))),n=-23158187332412014e-21+e*(.0005396055804933034+e*(-.004456419138517973+e*(.011813978522206043+e*(.035823639860549865+e*(-.23459179571824335+e*(.0714304917030273+e*1))))))),r/n)}var BBt=zBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, long comment, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var $Bt=Qt,VBt=Ha,UBt=xU,$O=ve,WBt=zn,jBt=l0,VO=Fe,UO=Or,WO=qa,jO=IBt,GO=FBt,GBt=BBt;function HBt(e){var t,r,n,i;if(VBt(e)&&e<0||e===UO||$Bt(e))return NaN;if(e===0)return UBt(e)?UO:VO;if(e>171.61447887182297)return VO;if(e<-170.5674972726612)return 0;if(r=$O(e),r>33)return e>=0?jO(e):(n=WBt(r),(n&1)===0?t=-1:t=1,i=r-n,i>.5&&(n+=1,i=r-n),i=r*jBt(WO*i),t*WO/($O(i)*jO(r)));for(i=1;e>=3;)e-=1,i*=e;for(;e<0;){if(e>-1e-9)return GO(e,i);i/=e,e+=1}for(;e<2;){if(e<1e-9)return GO(e,i);i/=e,e+=1}return e===2?i:(e-=2,i*GBt(e))}var XBt=HBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var YBt=XBt,$o=YBt;const qBt=[1,1,2,6,24,120,720,5040,40320,362880,3628800,39916800,479001600,6227020800,87178291200,1307674368e3,20922789888e3,355687428096e3,6402373705728e3,121645100408832e3,243290200817664e4,5109094217170944e4,11240007277776077e5,2585201673888498e7,6204484017332394e8,15511210043330986e9,40329146112660565e10,10888869450418352e12,30488834461171387e13,8841761993739702e15,26525285981219107e16,8222838654177922e18,2631308369336935e20,8683317618811886e21,29523279903960416e22,10333147966386145e24,37199332678990125e25,13763753091226346e27,5230226174666011e29,20397882081197444e30,8159152832478977e32,3345252661316381e34,140500611775288e37,6041526306337383e37,2658271574788449e39,11962222086548019e40,5502622159812089e42,25862324151116818e43,12413915592536073e45,6082818640342675e47,30414093201713376e48,15511187532873822e50,8065817517094388e52,42748832840600255e53,2308436973392414e56,12696403353658276e57,7109985878048635e59,40526919504877214e60,23505613312828785e62,13868311854568984e64,832098711274139e67,5075802138772248e68,3146997326038794e70,198260831540444e73,12688693218588417e73,8247650592082472e75,5443449390774431e77,3647111091818868e79,24800355424368305e80,1711224524281413e83,11978571669969892e84,8504785885678623e86,61234458376886085e87,44701154615126844e89,3307885441519386e92,248091408113954e95,18854947016660504e95,14518309202828587e97,11324281178206297e99,8946182130782976e101,7156945704626381e103,5797126020747368e105,4753643337012842e107,3945523969720659e109,3314240134565353e111,281710411438055e114,24227095383672734e114,2107757298379528e117,18548264225739844e118,1650795516090846e121,14857159644817615e122,1352001527678403e125,12438414054641308e126,11567725070816416e128,1087366156656743e131,1032997848823906e133,9916779348709496e134,9619275968248212e136,9426890448883248e138,9332621544394415e140,9332621544394415e142,942594775983836e145,9614466715035127e146,990290071648618e149,10299016745145628e150,1081396758240291e153,11462805637347084e154,1226520203196138e157,1324641819451829e159,14438595832024937e160,1588245541522743e163,17629525510902446e164,1974506857221074e167,22311927486598138e168,25435597334721877e170,2925093693493016e173,3393108684451898e175,3969937160808721e177,4684525849754291e179,5574585761207606e181,6689502913449127e183,8094298525273444e185,9875044200833601e187,1214630436702533e190,1506141741511141e192,1882677176888926e194,2372173242880047e196,30126600184576594e197,3856204823625804e200,4974504222477287e202,6466855489220474e204,847158069087882e207,11182486511960043e208,14872707060906857e210,19929427461615188e212,26904727073180504e214,3659042881952549e217,5012888748274992e219,6917786472619489e221,9615723196941089e223,13462012475717526e225,1898143759076171e228,2695364137888163e230,3854370717180073e232,55502938327393044e233,8047926057471992e236,11749972043909107e238,1727245890454639e241,25563239178728654e242,380892263763057e246,5713383956445855e247,862720977423324e250,13113358856834524e251,20063439050956823e253,30897696138473508e255,4789142901463394e258,7471062926282894e260,11729568794264145e262,1853271869493735e265,29467022724950384e266,47147236359920616e268,7590705053947219e271,12296942187394494e273,20044015765453026e275,3287218585534296e278,5423910666131589e280,9003691705778438e282,1503616514864999e285,25260757449731984e286,4269068009004705e289,7257415615307999e291];/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZBt=Qt,KBt=Ha,JBt=$o,QBt=Fe,t$t=qBt,e$t=170;function r$t(e){return ZBt(e)?NaN:KBt(e)?e<0?NaN:e<=e$t?t$t[e]:QBt:JBt(e+1)}var n$t=r$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var i$t=n$t,FU=i$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function o$t(e){var t,r,n;return e===0?1/0:(e<0?t=-e:t=e,t<=1?(r=3847467039331777e-5+e*(3685766504351951e-5+e*(1588920245372942e-5+e*(4059208354298835e-6+e*(6805476611834733e-7+e*(7823975500312005e-8+e*(6246580776401795e-9+e*(341986.3488721347+e*(12287.194511824551+e*(261.61404416416684+e*2.5066282746310007))))))))),n=0+e*(362880+e*(1026576+e*(1172700+e*(723680+e*(269325+e*(63273+e*(9450+e*(870+e*(45+e*1)))))))))):(e=1/e,r=2.5066282746310007+e*(261.61404416416684+e*(12287.194511824551+e*(341986.3488721347+e*(6246580776401795e-9+e*(7823975500312005e-8+e*(6805476611834733e-7+e*(4059208354298835e-6+e*(1588920245372942e-5+e*(3685766504351951e-5+e*3847467039331777e-5))))))))),n=1+e*(45+e*(870+e*(9450+e*(63273+e*(269325+e*(723680+e*(1172700+e*(1026576+e*(362880+e*0)))))))))),r/n)}var s$t=o$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/lanczos.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var a$t=s$t,l$t=a$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var u$t=l$t,c$t=u$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var f$t=10.900511,u0=f$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var HO=c$t,h$t=$o,XO=Bn,YO=ve,qO=We,ZO=or,d$t=Os,p$t=Yf,v$t=u0,KO=170,g$t=4269068009004705e289;function zU(e,t){var r,n,i;return e<d$t?t>KO?(n=zU(t,KO-t),n*=e,n*=g$t,1/n):1/(e*h$t(e+t)):(i=e+v$t-.5,e+t===e?YO(t)<10?r=qO((.5-e)*XO(t/i)):r=1:(YO(t)<10?r=qO((.5-e)*XO(t/i)):r=ZO(i/(i+t),e-.5),r*=HO(e)/HO(e+t)),r*=ZO(p$t/(i+t),t),r)}var m$t=zU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var _$t=ve,JO=zn,QO=$o,tR=FU,y$t=m$t,eR=170;function b$t(e,t){var r,n,i;if(e<=0||e+t<=0)return QO(e)/QO(e+t);if(n=JO(t),n===t){if(i=JO(e),i===e&&e<=eR&&e+t<=eR)return tR(i-1)/tR(n+i-1);if(_$t(t)<20){if(t===0)return 1;if(t<0){for(e-=1,r=e,t+=1;t!==0;)e-=1,r*=e,t+=1;return r}for(r=1/e,t-=1;t!==0;)e+=1,r/=e,t-=1;return r}}return y$t(e,t)}var w$t=b$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var S$t=w$t,oC=S$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function T$t(e){return e===0?.3999999999940942:.3999999999940942+e*(.22222198432149784+e*.15313837699209373)}var k$t=T$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function P$t(e){return e===0?.6666666666666735:.6666666666666735+e*(.2857142874366239+e*(.1818357216161805+e*.14798198605116586))}var E$t=P$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_log.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var rR=pi,C$t=s0,A$t=Qt,M$t=Nu,x$t=Or,L$t=k$t,I$t=E$t,sg=.6931471803691238,ag=19082149292705877e-26,O$t=0x40000000000000,R$t=.3333333333333333,nR=1048575,D$t=2146435072,N$t=1048576,F$t=1072693248;function z$t(e){var t,r,n,i,o,s,a,l,u,c,f,h;return e===0?x$t:A$t(e)||e<0?NaN:(r=rR(e),o=0,r<N$t&&(o-=54,e*=O$t,r=rR(e)),r>=D$t?e+e:(o+=(r>>20)-M$t|0,r&=nR,l=r+614244&1048576|0,e=C$t(e,r|l^F$t),o+=l>>20|0,a=e-1,(nR&2+r)<3?a===0?o===0?0:o*sg+o*ag:(s=a*a*(.5-R$t*a),o===0?a-s:o*sg-(s-o*ag-a)):(c=a/(2+a),h=c*c,l=r-398458|0,f=h*h,u=440401-r|0,i=f*L$t(f),n=h*I$t(f),l|=u,s=n+i,l>0?(t=.5*a*a,o===0?a-(t-c*(t+s)):o*sg-(t-(c*(t+s)+o*ag)-a)):o===0?a-c*(a-s):o*sg-(c*(a-s)-o*ag-a))))}var B$t=z$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $$t=B$t,ke=$$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_cos.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var V$t=pi,gw=LU,iR=IU,U$t=NU,Qo=[0,0],W$t=2147483647,j$t=1072243195,G$t=1044381696,H$t=2146435072;function X$t(e){var t,r;if(t=V$t(e),t&=W$t,t<=j$t)return t<G$t?1:gw(e,0);if(t>=H$t)return NaN;switch(r=U$t(e,Qo),r&3){case 0:return gw(Qo[0],Qo[1]);case 1:return-iR(Qo[0],Qo[1]);case 2:return-gw(Qo[0],Qo[1]);default:return iR(Qo[0],Qo[1])}}var Y$t=X$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var q$t=Y$t,sC=q$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Z$t=Qt,K$t=Hf,oR=sC,mw=l0,J$t=ve,Uh=rC,Wh=qa;function Q$t(e){var t,r;return Z$t(e)?NaN:K$t(e)?NaN:(r=e%2,t=J$t(r),t===0||t===1?Uh(0,r):t<.25?mw(Wh*r):t<.75?(t=.5-t,Uh(oR(Wh*t),r)):t<1.25?(r=Uh(1,r)-r,mw(Wh*r)):t<1.75?(t-=1.5,-Uh(oR(Wh*t),r)):(r-=Uh(2,r),mw(Wh*r)))}var tVt=Q$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eVt=tVt,rVt=eVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function nVt(e){return e===0?.06735230105312927:.06735230105312927+e*(.007385550860814029+e*(.0011927076318336207+e*(.00022086279071390839+e*25214456545125733e-21)))}var iVt=nVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function oVt(e){return e===0?.020580808432516733:.020580808432516733+e*(.0028905138367341563+e*(.0005100697921535113+e*(.00010801156724758394+e*44864094961891516e-21)))}var sVt=oVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function aVt(e){return e===0?1.3920053346762105:1.3920053346762105+e*(.7219355475671381+e*(.17193386563280308+e*(.01864591917156529+e*(.0007779424963818936+e*7326684307446256e-21))))}var lVt=aVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function uVt(e){return e===0?.21498241596060885:.21498241596060885+e*(.325778796408931+e*(.14635047265246445+e*(.02664227030336386+e*(.0018402845140733772+e*3194753265841009e-20))))}var cVt=uVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function fVt(e){return e===0?-.032788541075985965:-.032788541075985965+e*(.006100538702462913+e*(-.0014034646998923284+e*.00031563207090362595))}var hVt=fVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function dVt(e){return e===0?.01797067508118204:.01797067508118204+e*(-.0036845201678113826+e*(.000881081882437654+e*-.00031275416837512086))}var pVt=dVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function vVt(e){return e===0?-.010314224129834144:-.010314224129834144+e*(.0022596478090061247+e*(-.0005385953053567405+e*.0003355291926355191))}var gVt=vVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function mVt(e){return e===0?.6328270640250934:.6328270640250934+e*(1.4549225013723477+e*(.9777175279633727+e*(.22896372806469245+e*.013381091853678766)))}var _Vt=mVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function yVt(e){return e===0?2.4559779371304113:2.4559779371304113+e*(2.128489763798934+e*(.7692851504566728+e*(.10422264559336913+e*.003217092422824239)))}var bVt=yVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function wVt(e){return e===0?.08333333333333297:.08333333333333297+e*(-.0027777777772877554+e*(.0007936505586430196+e*(-.00059518755745034+e*(.0008363399189962821+e*-.0016309293409657527))))}var SVt=wVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_lgamma_r.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var TVt=Qt,kVt=Hf,PVt=ve,dc=ke,EVt=QE,CVt=rVt,AVt=qa,_w=Fe,MVt=iVt,xVt=sVt,LVt=lVt,IVt=cVt,OVt=hVt,RVt=pVt,DVt=gVt,NVt=_Vt,FVt=bVt,zVt=SVt,BVt=.07721566490153287,$Vt=.3224670334241136,VVt=1,UVt=-.07721566490153287,WVt=.48383612272381005,jVt=-.1475877229945939,GVt=.06462494023913339,HVt=-.07721566490153287,XVt=1,YVt=.4189385332046727,lg=1.4616321449683622,qVt=4503599627370496,ZVt=0x400000000000000,KVt=8470329472543003e-37,sR=1.4616321449683622,JVt=-.12148629053584961,QVt=-3638676997039505e-33;function tUt(e){var t,r,n,i,o,s,a,l,u,c,f,h,d;if(TVt(e)||kVt(e))return e;if(e===0)return _w;if(e<0?(t=!0,e=-e):t=!1,e<KVt)return-dc(e);if(t){if(e>=qVt||(u=CVt(e),u===0))return _w;r=dc(AVt/PVt(u*e))}if(e===1||e===2)return 0;if(e<2)switch(e<=.9?(d=-dc(e),e>=lg-1+.27?(f=1-e,n=0):e>=lg-1-.27?(f=e-(sR-1),n=1):(f=e,n=2)):(d=0,e>=lg+.27?(f=2-e,n=0):e>=lg-.27?(f=e-sR,n=1):(f=e-1,n=2)),n){case 0:h=f*f,s=BVt+h*MVt(h),o=h*($Vt+h*xVt(h)),a=f*s+o,d+=a-.5*f;break;case 1:h=f*f,c=h*f,s=WVt+c*OVt(c),o=jVt+c*RVt(c),i=GVt+c*DVt(c),a=h*s-(QVt-c*(o+f*i)),d+=JVt+a;break;case 2:s=f*(HVt+f*NVt(f)),o=XVt+f*FVt(f),d+=-.5*f+s/o;break}else if(e<8)switch(n=EVt(e),f=e-n,a=f*(UVt+f*IVt(f)),l=VVt+f*LVt(f),d=.5*f+a/l,h=1,n){case 7:h*=f+6;case 6:h*=f+5;case 5:h*=f+4;case 4:h*=f+3;case 3:h*=f+2,d+=dc(h)}else e<ZVt?(u=dc(e),h=1/e,f=h*h,c=YVt+h*zVt(f),d=(e-.5)*(u-1)+c):d=e*(dc(e)-1);return t&&(d=r-d),d}var eUt=tUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rUt=eUt,Zf=rUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nUt=14901161193847656e-24,iUt=nUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oUt=709.782712893384,Bu=oUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var sUt=We;function aUt(e,t){var r,n,i,o;if(i=sUt(-t),n=i,n!==0)for(r=n,o=1;o<e;++o)r/=o,r*=t,n+=r;return n}var lUt=aUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function uUt(e){return e===0?-.3250421072470015:-.3250421072470015+e*(-.02848174957559851+e*(-.005770270296489442+e*-23763016656650163e-21))}var cUt=uUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function fUt(e){return e===0?.39791722395915535:.39791722395915535+e*(.0650222499887673+e*(.005081306281875766+e*(.00013249473800432164+e*-3960228278775368e-21)))}var hUt=fUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function dUt(e){return e===0?.41485611868374833:.41485611868374833+e*(-.3722078760357013+e*(.31834661990116175+e*(-.11089469428239668+e*(.035478304325618236+e*-.002166375594868791))))}var pUt=dUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function vUt(e){return e===0?.10642088040084423:.10642088040084423+e*(.540397917702171+e*(.07182865441419627+e*(.12617121980876164+e*(.01363708391202905+e*.011984499846799107))))}var gUt=vUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function mUt(e){return e===0?-.6938585727071818:-.6938585727071818+e*(-10.558626225323291+e*(-62.375332450326006+e*(-162.39666946257347+e*(-184.60509290671104+e*(-81.2874355063066+e*-9.814329344169145)))))}var _Ut=mUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function yUt(e){return e===0?19.651271667439257:19.651271667439257+e*(137.65775414351904+e*(434.56587747522923+e*(645.3872717332679+e*(429.00814002756783+e*(108.63500554177944+e*(6.570249770319282+e*-.0604244152148581))))))}var bUt=yUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function wUt(e){return e===0?-.799283237680523:-.799283237680523+e*(-17.757954917754752+e*(-160.63638485582192+e*(-637.5664433683896+e*(-1025.0951316110772+e*-483.5191916086514))))}var SUt=wUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function TUt(e){return e===0?30.33806074348246:30.33806074348246+e*(325.7925129965739+e*(1536.729586084437+e*(3199.8582195085955+e*(2553.0504064331644+e*(474.52854120695537+e*-22.44095244658582)))))}var kUt=TUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_erf.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var PUt=Qt,aR=We,EUt=a0,CUt=Fe,AUt=Or,MUt=cUt,xUt=hUt,LUt=pUt,IUt=gUt,OUt=_Ut,RUt=bUt,DUt=SUt,NUt=kUt,ug=1e-300,FUt=13877787807814457e-33,lR=.8450629115104675,zUt=.12837916709551256,BUt=1,$Ut=-.0023621185607526594,VUt=1,UUt=-.009864944034847148,WUt=1,jUt=-.0098649429247001,GUt=1;function HUt(e){var t,r,n,i,o,s,a,l;if(PUt(e))return NaN;if(e===CUt)return 0;if(e===AUt)return 2;if(e===0)return 1;if(e<0?(t=!0,r=-e):(t=!1,r=e),r<.84375)return r<FUt?1-e:(n=e*e,i=zUt+n*MUt(n),o=BUt+n*xUt(n),s=i/o,e<.25?1-(e+e*s):(i=e*s,i+=e-.5,.5-i));if(r<1.25)return o=r-1,a=$Ut+o*LUt(o),l=VUt+o*IUt(o),t?1+lR+a/l:1-lR-a/l;if(r<28){if(o=1/(r*r),r<2.857142857142857)i=UUt+o*OUt(o),o=WUt+o*RUt(o);else{if(e<-6)return 2-ug;i=jUt+o*DUt(o),o=GUt+o*NUt(o)}return n=EUt(r,0),i=aR(-(n*n)-.5625)*aR((n-r)*(n+r)+i/o),t?2-i/r:i/r}return t?2-ug:ug*ug}var XUt=HUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var YUt=XUt,BU=YUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var qUt=BU,uR=ir,ZUt=We,KUt=qa;function JUt(e,t){var r,n,i,o,s;if(o=qUt(uR(t)),o!==0&&e>1){for(n=ZUt(-t)/uR(KUt*t),n*=t,r=.5,n/=r,i=n,s=2;s<e;++s)n/=s-r,n*=t,i+=n;o+=i}return o}var QUt=JUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tWt=-708.3964185322641,Kf=tWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var pc=We,cg=or,eWt=ke,cR=Bu,fR=Kf;function rWt(e,t){var r,n;return n=e*eWt(t),t>=1?n<cR&&-t>fR?r=cg(t,e)*pc(-t):e>=1?r=cg(t/pc(t/e),e):r=pc(n-t):n>fR?r=cg(t,e)*pc(-t):t/e<cR?r=cg(t/pc(t/e),e):r=pc(n-t),r}var nWt=rWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iWt=6.283185307179586,$U=iWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function oWt(e){return e===0?-.3333333333333333:-.3333333333333333+e*(.08333333333333333+e*(-.014814814814814815+e*(.0011574074074074073+e*(.0003527336860670194+e*(-.0001787551440329218+e*(3919263178522438e-20+e*(-21854485106799924e-22+e*(-185406221071516e-20+e*(8296711340953087e-22+e*(-17665952736826078e-23+e*(6707853543401498e-24+e*(10261809784240309e-24+e*(-4382036018453353e-24+e*914769958223679e-24)))))))))))))}var sWt=oWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function aWt(e){return e===0?-.001851851851851852:-.001851851851851852+e*(-.003472222222222222+e*(.0026455026455026454+e*(-.0009902263374485596+e*(.00020576131687242798+e*(-4018775720164609e-22+e*(-18098550334489977e-21+e*(764916091608111e-20+e*(-16120900894563446e-22+e*(4647127802807434e-24+e*(1378633446915721e-22+e*(-5752545603517705e-23+e*11951628599778148e-24)))))))))))}var lWt=aWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function uWt(e){return e===0?.004133597883597883:.004133597883597883+e*(-.0026813271604938273+e*(.0007716049382716049+e*(20093878600823047e-22+e*(-.00010736653226365161+e*(52923448829120125e-21+e*(-12760635188618728e-21+e*(3423578734096138e-23+e*(13721957309062932e-22+e*(-6298992138380055e-22+e*14280614206064242e-23)))))))))}var cWt=uWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function fWt(e){return e===0?.0006494341563786008:.0006494341563786008+e*(.00022947209362139917+e*(-.0004691894943952557+e*(.00026772063206283885+e*(-7561801671883977e-20+e*(-2396505113867297e-22+e*(11082654115347302e-21+e*(-56749528269915965e-22+e*14230900732435883e-22)))))))}var hWt=fWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function dWt(e){return e===0?-.0008618882909167117:-.0008618882909167117+e*(.0007840392217200666+e*(-.0002990724803031902+e*(-14638452578843418e-22+e*(6641498215465122e-20+e*(-3968365047179435e-20+e*11375726970678419e-21)))))}var pWt=dWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function vWt(e){return e===0?-.00033679855336635813:-.00033679855336635813+e*(-6972813758365858e-20+e*(.0002772753244959392+e*(-.00019932570516188847+e*(6797780477937208e-20+e*(1419062920643967e-22+e*(-13594048189768693e-21+e*(8018470256334202e-21+e*-2291481176508095e-21)))))))}var gWt=vWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function mWt(e){return e===0?.0005313079364639922:.0005313079364639922+e*(-.0005921664373536939+e*(.0002708782096718045+e*(7902353232660328e-22+e*(-8153969367561969e-20+e*(561168275310625e-19+e*-18329116582843375e-21)))))}var _Wt=mWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function yWt(e){return e===0?.00034436760689237765:.00034436760689237765+e*(5171790908260592e-20+e*(-.00033493161081142234+e*(.0002812695154763237+e*-.00010976582244684731)))}var bWt=yWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function wWt(e){return e===0?-.0006526239185953094:-.0006526239185953094+e*(.0008394987206720873+e*-.000438297098541721)}var SWt=wWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var TWt=Xa,kWt=BU,yw=ir,PWt=We,EWt=ke,CWt=$U,AWt=sWt,MWt=lWt,xWt=cWt,LWt=hWt,IWt=pWt,OWt=gWt,RWt=_Wt,DWt=bWt,NWt=SWt,_i=[0,0,0,0,0,0,0,0,0,0];function FWt(e,t){var r,n,i,o,s;return n=(t-e)/e,i=-EWt(1+n)+n,o=e*i,s=yw(2*i),t<e&&(s=-s),_i[0]=AWt(s),_i[1]=MWt(s),_i[2]=xWt(s),_i[3]=LWt(s),_i[4]=IWt(s),_i[5]=OWt(s),_i[6]=RWt(s),_i[7]=DWt(s),_i[8]=NWt(s),_i[9]=-.0005967612901927463,r=TWt(_i,1/e),r*=PWt(-o)/yw(CWt*e),t<e&&(r=-r),r+=kWt(yw(o))/2,r}var zWt=FWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var BWt=eval,$Wt=BWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var VWt=$Wt;function UWt(){var e;try{VWt('"use strict"; (function* () {})'),e=!0}catch{e=!1}return e}var WWt=UWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jWt=WWt,VU=jWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fg=ve,GWt=Os,HWt=1e6;function XWt(e,t){var r,n,i,o,s,a;if(a={},arguments.length>1&&(a=t),n=a.tolerance||GWt,o=a.maxTerms||HWt,s=a.initialValue||0,r=typeof e.next=="function",r===!0){for(i of e)if(s+=i,fg(n*s)>=fg(i)||--o===0)break}else do i=e(),s+=i;while(fg(n*s)<fg(i)&&--o);return s}var YWt=XWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hR=ve,qWt=Os,ZWt=1e6;function KWt(e,t){var r,n,i,o,s;s={},arguments.length>1&&(s=t),r=s.tolerance||qWt,i=s.maxTerms||ZWt,o=s.initialValue||0;do n=e(),o+=n;while(hR(r*o)<hR(n)&&--i);return o}var JWt=KWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var QWt=VU,tjt=YWt,ejt=JWt,GT;QWt()?GT=tjt:GT=ejt;var aC=GT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function rjt(e,t){var r=1,n=e,i=t;return o;function o(){var s=r;return n+=1,r*=i/n,s}}var njt=rjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var ijt=aC,ojt=njt;function sjt(e,t,r){var n,i;return r=r||0,i=ojt(e,t),n=ijt(i,{initialValue:r}),n}var ajt=sjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ljt(e){var t,r,n;return e===0?1/0:(e<0?t=-e:t=e,t<=1?(r=709811.662581658+e*(679979.8474157227+e*(293136.7857211597+e*(74887.54032914672+e*(12555.290582413863+e*(1443.4299244417066+e*(115.24194596137347+e*(6.309239205732627+e*(.22668404630224365+e*(.004826466289237662+e*4624429436045379e-20))))))))),n=0+e*(362880+e*(1026576+e*(1172700+e*(723680+e*(269325+e*(63273+e*(9450+e*(870+e*(45+e*1)))))))))):(e=1/e,r=4624429436045379e-20+e*(.004826466289237662+e*(.22668404630224365+e*(6.309239205732627+e*(115.24194596137347+e*(1443.4299244417066+e*(12555.290582413863+e*(74887.54032914672+e*(293136.7857211597+e*(679979.8474157227+e*709811.662581658))))))))),n=1+e*(45+e*(870+e*(9450+e*(63273+e*(269325+e*(723680+e*(1172700+e*(1026576+e*(362880+e*0)))))))))),r/n)}var ujt=ljt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/lanczos.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var cjt=ujt,fjt=cjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hjt=fjt,J_=hjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var djt=J_,pjt=Zf,vjt=$o,gjt=Bn,mjt=ir,_jt=ve,ta=We,jh=or,bw=zu,ww=Ya,dR=ke,hg=Bu,Gh=Kf,Sw=u0,yjt=Yf;function bjt(e,t){var r,n,i,o,s,a,l;return i=e+Sw-.5,l=(t-e-Sw+.5)/i,e<1?t<=Gh?ta(e*dR(t)-t-pjt(e)):jh(t,e)*ta(-t)/vjt(e):(_jt(l*l*e)<=100&&e>150?(r=e*(gjt(l)-l)+t*(.5-Sw)/i,r=ta(r)):(o=e*dR(t/i),s=e-t,ww(o,s)<=Gh||bw(o,s)>=hg?(n=s/e,ww(o,s)/2>Gh&&bw(o,s)/2<hg?(a=jh(t/i,e/2)*ta(s/2),r=a*a):ww(o,s)/4>Gh&&bw(o,s)/4<hg&&t>e?(a=jh(t/i,e/4)*ta(s/4),r=a*a,r*=r):n>Gh&&n<hg?r=jh(t*ta(n)/i,e):r=ta(o+s)):r=jh(t/i,e)*ta(s)),r*=mjt(i/yjt)/djt(e),r)}var wjt=bjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_60_0/boost/math/special_functions/powm1.hpp}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var pR=Qt,vR=ve,Sjt=Gf,Tjt=ke,kjt=or,Pjt=QE;function Ejt(e,t){var r;if(pR(e)||pR(t))return NaN;if(t===0)return 0;if(e===0)return-1;if(e<0&&t%2===0&&(e=-e),e>0){if((vR(t*(e-1))<.5||vR(t)<.2)&&(r=Tjt(e)*t,r<.5))return Sjt(r)}else if(Pjt(t)!==t)return NaN;return kjt(e,t)-1}var Cjt=Ejt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ajt=Cjt,Mjt=Ajt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function xjt(e){var t,r,n;return e===0?-.01803556856784494:(e<0?t=-e:t=e,t<=1?(r=-.01803556856784494+e*(.02512664961998968+e*(.049410315156753225+e*(.0172491608709614+e*(-.0002594535632054381+e*(-.0005410098692152044+e*(-3245886498259485e-20+e*0)))))),n=1+e*(1.962029871977952+e*(1.4801966942423133+e*(.5413914320717209+e*(.09885042511280101+e*(.008213096746488934+e*(.00022493629192211576+e*-22335276320861708e-23))))))):(e=1/e,r=0+e*(-3245886498259485e-20+e*(-.0005410098692152044+e*(-.0002594535632054381+e*(.0172491608709614+e*(.049410315156753225+e*(.02512664961998968+e*-.01803556856784494)))))),n=-22335276320861708e-23+e*(.00022493629192211576+e*(.008213096746488934+e*(.09885042511280101+e*(.5413914320717209+e*(1.4801966942423133+e*(1.962029871977952+e*1))))))),r/n)}var Ljt=xjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ijt(e){var t,r,n;return e===0?.04906224540690395:(e<0?t=-e:t=e,t<=1?(r=.04906224540690395+e*(-.09691175301595212+e*(-.4149833583594954+e*(-.4065671242119384+e*(-.1584135863906922+e*(-.024014982064857155+e*-.0010034668769627955))))),n=1+e*(3.0234982984646304+e*(3.4873958536072385+e*(1.9141558827442668+e*(.5071377386143635+e*(.05770397226904519+e*.001957681026011072)))))):(e=1/e,r=-.0010034668769627955+e*(-.024014982064857155+e*(-.1584135863906922+e*(-.4065671242119384+e*(-.4149833583594954+e*(-.09691175301595212+e*.04906224540690395))))),n=.001957681026011072+e*(.05770397226904519+e*(.5071377386143635+e*(1.9141558827442668+e*(3.4873958536072385+e*(3.0234982984646304+e*1)))))),r/n)}var Ojt=Ijt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Rjt(e){var t,r,n;return e===0?-.029232972183027003:(e<0?t=-e:t=e,t<=1?(r=-.029232972183027003+e*(.14421626775719232+e*(-.14244039073863127+e*(.05428096940550536+e*(-.008505359768683364+e*(.0004311713426792973+e*0))))),n=1+e*(-1.5016935605448505+e*(.846973248876495+e*(-.22009515181499575+e*(.02558279715597587+e*(-.0010066679553914337+e*-8271935218912905e-22)))))):(e=1/e,r=0+e*(.0004311713426792973+e*(-.008505359768683364+e*(.05428096940550536+e*(-.14244039073863127+e*(.14421626775719232+e*-.029232972183027003))))),n=-8271935218912905e-22+e*(-.0010066679553914337+e*(.02558279715597587+e*(-.22009515181499575+e*(.846973248876495+e*(-1.5016935605448505+e*1)))))),r/n)}var Djt=Rjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/lgamma_small.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006-7, 2013-14.
* (C) Copyright Paul A. Bristow 2007, 2013-14.
* (C) Copyright Nikhar Agrawal 2013-14.
* (C) Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Tw=ke,Njt=Os,Fjt=Ljt,zjt=Ojt,Bjt=Djt,$jt=.15896368026733398,Vjt=.5281534194946289,Ujt=.45201730728149414;function Wjt(e,t,r){var n,i,o,s;if(e<Njt)return-Tw(e);if(t===0||r===0)return 0;if(i=0,e>2){if(e>=3){do e-=1,r-=1,i+=Tw(e);while(e>=3);r=e-2}return o=r*(e+1),s=Fjt(r),i+=o*$jt+o*s,i}return e<1&&(i+=-Tw(e),r=t,t=e,e+=1),e<=1.5?(o=zjt(t),n=t*r,i+=n*Vjt+n*o,i):(o=r*t,s=Bjt(-r),i+=o*Ujt+o*s,i)}var jjt=Wjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006-7, 2013-14.
* (C) Copyright Paul A. Bristow 2007, 2013-14.
* (C) Copyright Nikhar Agrawal 2013-14.
* (C) Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var gR=$o,mR=Gf,Gjt=Bn,Hjt=Qt,_R=jjt;function Xjt(e){return Hjt(e)?NaN:e<0?e<-.5?gR(1+e)-1:mR(-Gjt(e)+_R(e+2,e+1,e)):e<2?mR(_R(e+1,e,e-1)):gR(1+e)-1}var Yjt=Xjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qjt=Yjt,Zjt=qjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function Kjt(e,t){var r,n,i,o;return r=-t,t=-t,n=e+1,i=1,s;function s(){return o=r/n,r*=t,i+=1,r/=i,n+=1,o}}var Jjt=Kjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Qjt=Mjt,tGt=aC,eGt=Zjt,rGt=Jjt;function nGt(e,t,r){var n,i,o,s,a;return i=eGt(e),o=(i+1)/e,s=Qjt(t,e),i-=s,i/=e,a=rGt(e,t),s+=1,n=r?o:0,i=-s*tGt(a,{initialValue:(n-i)/s}),r&&(i=-i),[i,o]}var iGt=nGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oGt=11754943508222875e-54,Q_=oGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var k1=ve,To=Q_,sGt=Os,aGt=1e6;function lGt(e,t,r){var n,i,o,s,a,l,u;if(n=typeof e.next=="function",u=n?e.next().value:e(),s=u[1],o=u[0],s===0&&(s=To),a=s,l=0,n===!0)do u=e.next().value,u&&(l=u[1]+u[0]*l,l===0&&(l=To),a=u[1]+u[0]/a,a===0&&(a=To),l=1/l,i=a*l,s*=i);while(k1(i-1)>t&&--r);else do u=e(),u&&(l=u[1]+u[0]*l,l===0&&(l=To),a=u[1]+u[0]/a,a===0&&(a=To),l=1/l,i=a*l,s*=i);while(u&&k1(i-1)>t&&--r);return o/s}function uGt(e,t,r){var n,i,o,s,a,l;if(n=typeof e.next=="function",l=n?e.next().value:e(),o=l[1],o===0&&(o=To),s=o,a=0,n===!0)do l=e.next().value,l&&(a=l[1]+l[0]*a,a===0&&(a=To),s=l[1]+l[0]/s,s===0&&(s=To),a=1/a,i=s*a,o*=i);while(l&&k1(i-1)>t&&--r);else do l=e(),l&&(a=l[1]+l[0]*a,a===0&&(a=To),s=l[1]+l[0]/s,s===0&&(s=To),a=1/a,i=s*a,o*=i);while(l&&k1(i-1)>t&&--r);return o}function cGt(e,t){var r,n,i;return n={},arguments.length>1&&(n=t),r=n.maxIter||aGt,i=n.tolerance||sGt,n.keep?uGt(e,i,r):lGt(e,i,r)}var fGt=cGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var UU=ve,hGt=Os,tf=Q_,dGt=1e6;function pGt(e,t,r){var n,i,o,s,a,l;l=e(),a=l[1],i=l[0],a===0&&(a=tf),o=a,s=0;do l=e(),l&&(s=l[1]+l[0]*s,s===0&&(s=tf),o=l[1]+l[0]/o,o===0&&(o=tf),s=1/s,n=o*s,a*=n);while(l&&UU(n-1)>t&&--r);return i/a}function vGt(e,t,r){var n,i,o,s,a;a=e(),s=a[1],s===0&&(s=tf),i=s,o=0;do a=e(),a&&(o=a[1]+a[0]*o,o===0&&(o=tf),i=a[1]+a[0]/i,i===0&&(i=tf),o=1/o,n=i*o,s*=n);while(a&&UU(n-1)>t&&--r);return s}function gGt(e,t){var r,n,i;return n={},arguments.length>1&&(n=t),i=n.tolerance||hGt,r=n.maxIter||dGt,n.keep?vGt(e,i,r):pGt(e,i,r)}var mGt=gGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _Gt=VU,yGt=fGt,bGt=mGt,HT;_Gt()?HT=yGt:HT=bGt;var WU=HT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function wGt(e,t){var r=t-e+1,n=e,i=0;return o;function o(){return i+=1,r+=2,[i*(n-i),r]}}var SGt=wGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var TGt=WU,kGt=SGt;function PGt(e,t){var r=kGt(e,t);return 1/(t-e+1+TGt(r))}var EGt=PGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006-7, 2013-14.
* (C) Copyright Paul A. Bristow 2007, 2013-14.
* (C) Copyright Nikhar Agrawal 2013-14.
* (C) Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var CGt=Zf,AGt=zn,Hh=$o,yR=ve,MGt=We,bR=or,yi=ke,xGt=iUt,wR=qf,LGt=K_,SR=Bu,IGt=Fe,OGt=lUt,RGt=QUt,TR=nWt,DGt=zWt,kw=ajt,kR=wjt,NGt=iGt,PR=EGt,FGt=170;function jU(e,t,r,n){var i,o,s,a,l,u,c,f,h,d,p,v,m,g,_;if(e<0||t<=0)return NaN;if(o=r===void 0?!0:r,f=n,h=0,t>=FGt&&!o)return f&&t*4<e?(h=t*yi(e)-e,h+=yi(PR(t,e))):!f&&t>4*e?(h=t*yi(e)-e,a=0,h+=yi(kw(t,e,a)/t)):(h=jU(t,e,!0,f),h===0?f?(h=1+1/(12*t)+1/(288*t*t),h=yi(h)-t+(t-.5)*yi(t),h+=yi(LGt)):(h=t*yi(e)-e,a=0,h+=yi(kw(t,e,a)/t)):h=yi(h)+CGt(t)),h>SR?IGt:MGt(h);switch(c=t<30&&t<=e+1&&e<SR,c?(g=AGt(t),d=g===t,l=d?!1:yR(g-t)===.5):d=l=!1,d&&e>.6?(f=!f,s=0):l&&e>.2?(f=!f,s=1):e<xGt&&t>1?s=6:e<.5?-.4/yi(e)<t?s=2:s=3:e<1.1?e*.75<t?s=2:s=3:(u=!1,o&&t>20&&(p=yR((e-t)/t),t>200?20/t>p*p&&(u=!0):p<.4&&(u=!0)),u?s=5:e-1/(3*e)<t?s=2:(s=4,f=!f)),s){case 0:h=OGt(t,e),o===!1&&(h*=Hh(t));break;case 1:h=RGt(t,e),o===!1&&(h*=Hh(t));break;case 2:h=o?kR(t,e):TR(t,e),h!==0&&(a=0,i=!1,f&&(a=o?1:Hh(t),o||h>=1||wR*h>a?(a/=h,o||t<1||wR/t>a?(a*=-t,i=!0):a=0):a=0)),h*=kw(t,e,a)/t,i&&(f=!1,h=-h);break;case 3:f=!f,m=NGt(t,e,f),h=m[0],_=m[1],f=!1,o&&(h/=_);break;case 4:h=o?kR(t,e):TR(t,e),h!==0&&(h*=PR(t,e));break;case 5:h=DGt(t,e),e>=t&&(f=!f);break;case 6:h=o?bR(e,t)/Hh(t+1):bR(e,t)/t,h*=1-t*e/(t+1);break}return o&&h>1&&(h=1),f&&(v=o?1:Hh(t),h=v-h),h}var zGt=jU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var BGt=zGt,GU=BGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var vc=We,dg=or,$Gt=ke,ER=Bu,CR=Kf;function VGt(e,t){var r,n;return n=e*$Gt(t),t>=1?n<ER&&-t>CR?r=dg(t,e)*vc(-t):e>=1?r=dg(t/vc(t/e),e):r=vc(n-t):n>CR?r=dg(t,e)*vc(-t):t/e<ER?r=dg(t/vc(t/e),e):r=vc(n-t),r}var UGt=VGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var WGt=J_,jGt=Zf,GGt=$o,HGt=Bn,XGt=ir,YGt=ve,ea=We,Xh=or,Pw=zu,Ew=Ya,AR=ke,pg=Bu,Yh=Kf,Cw=u0,qGt=Yf;function ZGt(e,t){var r,n,i,o,s,a,l;return i=e+Cw-.5,l=(t-e-Cw+.5)/i,e<1?t<=Yh?ea(e*AR(t)-t-jGt(e)):Xh(t,e)*ea(-t)/GGt(e):(YGt(l*l*e)<=100&&e>150?(r=e*(HGt(l)-l)+t*(.5-Cw)/i,r=ea(r)):(o=e*AR(t/i),s=e-t,Ew(o,s)<=Yh||Pw(o,s)>=pg?(n=s/e,Ew(o,s)/2>Yh&&Pw(o,s)/2<pg?(a=Xh(t/i,e/2)*ea(s/2),r=a*a):Ew(o,s)/4>Yh&&Pw(o,s)/4<pg&&t>e?(a=Xh(t/i,e/4)*ea(s/4),r=a*a,r*=r):n>Yh&&n<pg?r=Xh(t*ea(n)/i,e):r=ea(o+s)):r=Xh(t/i,e)*ea(s)),r*=XGt(i/qGt)/WGt(e),r)}var KGt=ZGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var JGt=oC,MR=FU,QGt=GU,tHt=Bn,vg=ve,xR=or,eHt=ke,rHt=Fu,LR=Os,nHt=UGt,iHt=KGt,ra=new Array(30);function oHt(e,t,r,n,i,o,s){var a,l,u,c,f,h,d,p,v,m,g,_,b,w,T,S,k,A;if(h=t-1,k=e+h/2,n<.35?m=tHt(-n):m=eHt(r),A=-k*m,_=iHt(t,A),_<=rHt)return i;for(s?(a=_/JGt(e,t),a/=xR(k,t)):a=nHt(t,A)/xR(k,t),a*=o,ra[0]=1,b=QGt(A,t,!0,!0),b/=_,c=i+a*b,u=1,d=m/2,d*=d,p=1,g=4*k*k,f=t,T=1;T<ra.length;++T){for(u+=2,ra[T]=0,v=t-T,l=3,w=1;w<T;++w)v=w*t-T,ra[T]+=v*ra[T-w]/MR(l),l+=2;if(ra[T]/=T,ra[T]+=h/MR(u),b=(f*(f+1)*b+(A+f+1)*p)/g,p*=d,f+=2,S=a*ra[T]*b,c+=S,S>1){if(vg(S)<vg(LR*c))break}else if(vg(S/LR)<vg(c))break}return c}var sHt=oHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function aHt(e,t,r){var n,i;if(r===0)return 1;for(n=1,i=0;i<r;i++)n*=(e+i)/(t+i);return n}var lHt=aHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Aw=ve,IR=zu,uHt=Fe;function cHt(e,t){var r,n,i;if(r=arguments.length,r===0)return uHt;if(r===2)return IR(Aw(e),Aw(t));for(n=[],i=0;i<r;i++)n.push(Aw(arguments[i]));return IR.apply(null,n)}var fHt=cHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hHt=fHt,dHt=hHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Mw=ve,OR=Ya,pHt=Fe;function vHt(e,t){var r,n,i;if(r=arguments.length,r===0)return pHt;if(r===2)return OR(Mw(e),Mw(t));for(n=[],i=0;i<r;i++)n.push(Mw(arguments[i]));return OR.apply(null,n)}var gHt=vHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mHt=gHt,_Ht=mHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var xw=J_,yHt=dHt,bHt=_Ht,RR=Gf,na=Bn,DR=ir,gg=ve,uo=We,co=or,wHt=Ya,Gn=ke,fo=Bu,gc=Kf,Lw=u0,SHt=Yf;function THt(e,t,r,n,i){var o,s,a,l,u,c,f,h,d,p,v,m,g,_;if(!i)return co(r,e)*co(n,t);if(g=e+t,l=e+Lw-.5,u=t+Lw-.5,c=g+Lw-.5,o=xw(g),o/=xw(e)*xw(t),o*=DR(u/SHt),o*=DR(l/c),f=(r*t-n*l)/l,h=(n*e-r*u)/u,bHt(f,h)<.2)if(f*h>0||wHt(e,t)<1)gg(f)<.1?o*=uo(e*na(f)):o*=co(r*c/l,e),gg(h)<.1?o*=uo(t*na(h)):o*=co(n*c/u,t);else if(yHt(f,h)<.5)s=e<t,a=t/e,s&&a*h<.1||!s&&f/a>.1?(d=RR(a*na(h)),d=f+d+d*f,d=e*na(d),o*=uo(d)):(d=RR(na(f)/a),d=h+d+d*h,d=t*na(d),o*=uo(d));else if(gg(f)<gg(h))if(_=e*na(f)+t*Gn(n*c/u),_<=gc||_>=fo){if(_+=Gn(o),_>=fo)return NaN;o=uo(_)}else o*=uo(_);else if(_=t*na(h)+e*Gn(r*c/l),_<=gc||_>=fo){if(_+=Gn(o),_>=fo)return NaN;o=uo(_)}else o*=uo(_);else if(v=r*c/l,m=n*c/u,f=e*Gn(v),h=t*Gn(m),f>=fo||f<=gc||h>=fo||h<=gc)if(e<t)if(p=co(m,t/e),d=e*(Gn(v)+Gn(p)),d<fo&&d>gc)o*=co(p*v,e);else{if(h+=f+Gn(o),h>=fo)return NaN;o=uo(h)}else if(p=co(v,e/t),d=(Gn(p)+Gn(m))*t,d<fo&&d>gc)o*=co(p*m,t);else{if(h+=f+Gn(o),h>=fo)return NaN;o=uo(h)}else o*=co(v,e)*co(m,t);return o}var lC=THt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var kHt=WU,PHt=lC,EHt={keep:!0,maxIter:1e3};function CHt(e,t,r,n){var i=0;return o;function o(){var s,a,l;return a=(e+i-1)*(e+t+i-1)*i*(t-i)*r*r,s=e+2*i-1,a/=s*s,l=i,l+=i*(t-i)*r/(e+2*i-1),l+=(e+i)*(e*n-t*r+1+i*(2-r))/(e+2*i+1),i+=1,[a,l]}}function AHt(e,t,r,n,i,o){var s,a,l;return s=PHt(e,t,r,n,i),o&&(o[1]=s),s===0?s:(l=CHt(e,t,r,n),a=kHt(l,EHt),s/a)}var MHt=AHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Iw=Ha,NR=Qt,xHt=nC,LHt=Z_;function HU(e,t){var r,n;if(NR(e)||NR(t))return NaN;if(!Iw(e)||!Iw(t))return NaN;if(t<0)return 0;if(e<0)return r=HU(-e+t-1,t),xHt(t)&&(r=-r),r;if(t>e)return 0;if(t===0||t===e)return 1;if(t===1||t===e-1)return e;for(e-t<t&&(t=e-t),r=e,n=2;n<=t;n++)r*=(e-n+1)/n;return Iw(r)?r:LHt(r)}var IHt=HU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var OHt=IHt,RHt=OHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var FR=RHt,Cl=zn,qh=or,DHt=Fu;function NHt(e,t,r,n){var i,o,s,a,l;if(o=qh(r,e),o>DHt)for(a=o,l=Cl(e-1);l>t;l--)a*=(l+1)*n/((e-l)*r),o+=a;else if(s=Cl(e*r),s<=t+1&&(s=Cl(t+2)),o=qh(r,s)*qh(n,e-s),o*=FR(Cl(e),Cl(s)),o===0)for(l=s-1;l>t;l--)o+=qh(r,l)*qh(n,e-l),o*=FR(Cl(e),Cl(l));else{for(a=o,i=o,l=s-1;l>t;l--)a*=(l+1)*n/((e-l)*r),o+=a;for(a=i,l=s+1;l<=e;l++)a*=(e-l+1)*r/(l*n),o+=a}return o}var FHt=NHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var zHt=lC;function BHt(e,t,r,n,i,o,s){var a,l,u,c;if(a=zHt(e,t,r,n,o),s&&(s[1]=a),a/=e,a===0)return a;for(u=1,l=1,c=0;c<i-1;++c)l*=(e+t+c)*r/(e+c+1),u+=l;return a*=u,a}var $Ht=BHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Ow=J_,VHt=aC,UHt=Bn,WHt=ir,Rw=We,mg=or,Zh=ke,jHt=Fu,zR=Bu,BR=Kf,Dw=u0,GHt=Yf,$R={maxTerms:100};function HHt(e,t,r,n){var i=1-t,o=1;return s;function s(){var a=n/e;return e+=1,n*=i*r/o,o+=1,i+=1,a}}function XHt(e,t,r,n,i,o,s){var a,l,u,c,f,h,d,p;return i?(d=e+t,l=e+Dw-.5,u=t+Dw-.5,c=d+Dw-.5,a=Ow(d)/(Ow(e)*Ow(t)),f=Zh(c/u)*(t-.5),h=Zh(r*c/l)*e,f>BR&&f<zR&&h>BR&&h<zR?(e*t<u*10?a*=Rw((t-.5)*UHt(e/u)):a*=mg(c/u,t-.5),a*=mg(r*c/l,e),a*=WHt(l/GHt),o&&(o[1]=a*mg(s,t))):(a=Zh(a)+f+h+(Zh(l)-1)/2,o&&(o[1]=Rw(a+t*Zh(s))),a=Rw(a))):a=mg(r,e),a<jHt?n:(p=HHt(e,t,r,a),$R.initialValue=n,VHt(p,$R))}var YHt=XHt,qHt=Qt,ZHt=Gf,_g=zn,VR=Bn,UR=JE,Hn=MU,Nw=ir,KHt=We,Kh=or,JHt=zu,WR=Ya,yg=qf,jR=Fu,QHt=HFt,tXt=iC,XU=qa,ia=sHt,Fw=lHt,eXt=lC,GR=MHt,rXt=FHt,Jh=$Ht,ho=YHt,nXt=1/XU;function iXt(e,t,r,n,i,o,s,a){var l,u,c,f,h,d,p,v,m,g,_,b;if(b=1-e,p=a,v=a+s,o[v]=-1,qHt(e)||e<0||e>1)return o[p]=NaN,o[v]=NaN,o;if(n){if(t<0||r<0)return o[p]=NaN,o[v]=NaN,o;if(t===0){if(r===0)return o[p]=NaN,o[v]=NaN,o;if(r>0)return o[p]=i?0:1,o}else if(r===0&&t>0)return o[p]=i?1:0,o}else if(t<=0||r<=0)return o[p]=NaN,o[v]=NaN,o;return e===0?(t===1?o[v]=1:o[v]=t<1?yg/2:jR*2,i?(o[p]=n?1:Hn(t,r),o):(o[p]=0,o)):e===1?(r===1?o[v]=1:o[v]=r<1?yg/2:jR*2,i?o[p]=0:o[p]=n?1:Hn(t,r),o):t===.5&&r===.5?(o[v]=nXt*Nw(b*e),_=UR(Nw(i?b:e)),_/=tXt,n||(_*=XU),o[p]=_,o):(t===1&&(d=r,r=t,t=d,d=b,b=e,e=d,i=!i),r===1?t===1?(o[p]=i?b:e,o[v]=1,o):(o[v]=t*Kh(e,t-1),b<.5?_=i?-ZHt(t*VR(-b)):KHt(t*VR(-b)):_=i?-(Kh(e,t)-1):Kh(e,t),n||(_/=t),o[p]=_,o):(WR(t,r)<=1?(e>.5&&(d=r,r=t,t=d,d=b,b=e,e=d,i=!i),JHt(t,r)<=1?t>=WR(.2,r)||Kh(e,t)<=.9?i?(c=-(n?1:Hn(t,r)),i=!1,c=-ho(t,r,e,c,n,o,b)):c=ho(t,r,e,0,n,o,b):(d=r,r=t,t=d,d=b,b=e,e=d,i=!i,b>=.3?i?(c=-(n?1:Hn(t,r)),i=!1,c=-ho(t,r,e,c,n,o,b)):c=ho(t,r,e,0,n,o,b):(n?u=1:u=Fw(t+r,t,20),c=Jh(t,r,e,b,20,n,o),i?(c-=n?1:Hn(t,r),i=!1,c=-ia(t+20,r,e,b,c,u,n)):c=ia(t+20,r,e,b,c,u,n))):r<=1||e<.1&&Kh(r*e,t)<=.7?i?(c=-(n?1:Hn(t,r)),i=!1,c=-ho(t,r,e,c,n,o,b)):c=ho(t,r,e,0,n,o,b):(d=r,r=t,t=d,d=b,b=e,e=d,i=!i,b>=.3?i?(c=-(n?1:Hn(t,r)),i=!1,c=-ho(t,r,e,c,n,o,b)):c=ho(t,r,e,0,n,o,b):t>=15?i?(c=-(n?1:Hn(t,r)),i=!1,c=-ia(t,r,e,b,c,1,n)):c=ia(t,r,e,b,0,1,n):(n?u=1:u=Fw(t+r,t,20),c=Jh(t,r,e,b,20,n,o),i?(c-=n?1:Hn(t,r),i=!1,c=-ia(t+20,r,e,b,c,u,n)):c=ia(t+20,r,e,b,c,u,n)))):(t<r?l=t-(t+r)*e:l=(t+r)*b-r,l<0&&(d=r,r=t,t=d,d=b,b=e,e=d,i=!i),r<40?_g(t)===t&&_g(r)===r&&t<QHt-100?(m=t-1,g=r+m,c=rXt(g,m,e,b),n||(c*=Hn(t,r))):r*e<=.7?i?(c=-(n?1:Hn(t,r)),i=!1,c=-ho(t,r,e,c,n,o,b)):c=ho(t,r,e,0,n,o,b):t>15?(g=_g(r),g===r&&(g-=1),f=r-g,n?u=1:u=Fw(t+f,f,g),c=Jh(f,t,b,e,g,n),c=ia(t,f,e,b,c,1,n),c/=u):n?(g=_g(r),f=r-g,f<=0&&(g-=1,f+=1),c=Jh(f,t,b,e,g,n),c+=Jh(t,f,e,b,20,n),i&&(c-=1),c=ia(t+20,f,e,b,c,1,n),i&&(c=-c,i=!1)):c=GR(t,r,e,b,n,o):c=GR(t,r,e,b,n,o)),o[v]<0&&(o[v]=eXt(t,r,e,b,!0)),h=b*e,o[v]!==0&&(yg*h<o[v]?o[v]=yg/2:o[v]/=h),o[p]=i?(n?1:Hn(t,r))-c:c,o))}var YU=iXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oXt=YU;function sXt(e,t,r,n,i){return oXt(e,t,r,n,i,[0,0],1,0)}var aXt=sXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var lXt=wr,qU=aXt,uXt=YU;lXt(qU,"assign",uXt);var ZU=qU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cXt=ZU.assign;function fXt(e,t,r,n,i){var o=[0,0];return n=n!==!1,i=i===!0,cXt(e,t,r,n,i,o,1,0),o[0]}var hXt=fXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dXt=hXt,uC=dXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function pXt(e){var t,r,n;return e===0?-.0005087819496582806:(e<0?t=-e:t=e,t<=1?(r=-.0005087819496582806+e*(-.008368748197417368+e*(.03348066254097446+e*(-.012692614766297404+e*(-.03656379714117627+e*(.02198786811111689+e*(.008226878746769157+e*(-.005387729650712429+e*(0+e*0)))))))),n=1+e*(-.9700050433032906+e*(-1.5657455823417585+e*(1.5622155839842302+e*(.662328840472003+e*(-.7122890234154284+e*(-.05273963823400997+e*(.07952836873415717+e*(-.0023339375937419+e*.0008862163904564247))))))))):(e=1/e,r=0+e*(0+e*(-.005387729650712429+e*(.008226878746769157+e*(.02198786811111689+e*(-.03656379714117627+e*(-.012692614766297404+e*(.03348066254097446+e*(-.008368748197417368+e*-.0005087819496582806)))))))),n=.0008862163904564247+e*(-.0023339375937419+e*(.07952836873415717+e*(-.05273963823400997+e*(-.7122890234154284+e*(.662328840472003+e*(1.5622155839842302+e*(-1.5657455823417585+e*(-.9700050433032906+e*1))))))))),r/n)}var vXt=pXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function gXt(e){var t,r,n;return e===0?-.20243350835593876:(e<0?t=-e:t=e,t<=1?(r=-.20243350835593876+e*(.10526468069939171+e*(8.3705032834312+e*(17.644729840837403+e*(-18.851064805871424+e*(-44.6382324441787+e*(17.445385985570866+e*(21.12946554483405+e*-3.6719225470772936))))))),n=1+e*(6.242641248542475+e*(3.971343795334387+e*(-28.66081804998+e*(-20.14326346804852+e*(48.560921310873994+e*(10.826866735546016+e*(-22.643693341313973+e*1.7211476576120028)))))))):(e=1/e,r=-3.6719225470772936+e*(21.12946554483405+e*(17.445385985570866+e*(-44.6382324441787+e*(-18.851064805871424+e*(17.644729840837403+e*(8.3705032834312+e*(.10526468069939171+e*-.20243350835593876))))))),n=1.7211476576120028+e*(-22.643693341313973+e*(10.826866735546016+e*(48.560921310873994+e*(-20.14326346804852+e*(-28.66081804998+e*(3.971343795334387+e*(6.242641248542475+e*1)))))))),r/n)}var mXt=gXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _Xt(e){var t,r,n;return e===0?-.1311027816799519:(e<0?t=-e:t=e,t<=1?(r=-.1311027816799519+e*(-.16379404719331705+e*(.11703015634199525+e*(.38707973897260434+e*(.3377855389120359+e*(.14286953440815717+e*(.029015791000532906+e*(.0021455899538880526+e*(-6794655751811263e-22+e*(28522533178221704e-24+e*-681149956853777e-24))))))))),n=1+e*(3.4662540724256723+e*(5.381683457070069+e*(4.778465929458438+e*(2.5930192162362027+e*(.848854343457902+e*(.15226433829533179+e*(.011059242293464892+e*(0+e*(0+e*0)))))))))):(e=1/e,r=-681149956853777e-24+e*(28522533178221704e-24+e*(-6794655751811263e-22+e*(.0021455899538880526+e*(.029015791000532906+e*(.14286953440815717+e*(.3377855389120359+e*(.38707973897260434+e*(.11703015634199525+e*(-.16379404719331705+e*-.1311027816799519))))))))),n=0+e*(0+e*(0+e*(.011059242293464892+e*(.15226433829533179+e*(.848854343457902+e*(2.5930192162362027+e*(4.778465929458438+e*(5.381683457070069+e*(3.4662540724256723+e*1)))))))))),r/n)}var yXt=_Xt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function bXt(e){var t,r,n;return e===0?-.0350353787183178:(e<0?t=-e:t=e,t<=1?(r=-.0350353787183178+e*(-.0022242652921344794+e*(.018557330651423107+e*(.009508047013259196+e*(.0018712349281955923+e*(.00015754461742496055+e*(460469890584318e-20+e*(-2304047769118826e-25+e*26633922742578204e-28))))))),n=1+e*(1.3653349817554064+e*(.7620591645536234+e*(.22009110576413124+e*(.03415891436709477+e*(.00263861676657016+e*(7646752923027944e-20+e*(0+e*0)))))))):(e=1/e,r=26633922742578204e-28+e*(-2304047769118826e-25+e*(460469890584318e-20+e*(.00015754461742496055+e*(.0018712349281955923+e*(.009508047013259196+e*(.018557330651423107+e*(-.0022242652921344794+e*-.0350353787183178))))))),n=0+e*(0+e*(7646752923027944e-20+e*(.00263861676657016+e*(.03415891436709477+e*(.22009110576413124+e*(.7620591645536234+e*(1.3653349817554064+e*1)))))))),r/n)}var wXt=bXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function SXt(e){var t,r,n;return e===0?-.016743100507663373:(e<0?t=-e:t=e,t<=1?(r=-.016743100507663373+e*(-.0011295143874558028+e*(.001056288621524929+e*(.00020938631748758808+e*(14962478375834237e-21+e*(44969678992770644e-23+e*(4625961635228786e-24+e*(-2811287356288318e-29+e*9905570997331033e-32))))))),n=1+e*(.5914293448864175+e*(.1381518657490833+e*(.016074608709367652+e*(.0009640118070051656+e*(27533547476472603e-21+e*(282243172016108e-21+e*(0+e*0)))))))):(e=1/e,r=9905570997331033e-32+e*(-2811287356288318e-29+e*(4625961635228786e-24+e*(44969678992770644e-23+e*(14962478375834237e-21+e*(.00020938631748758808+e*(.001056288621524929+e*(-.0011295143874558028+e*-.016743100507663373))))))),n=0+e*(0+e*(282243172016108e-21+e*(27533547476472603e-21+e*(.0009640118070051656+e*(.016074608709367652+e*(.1381518657490833+e*(.5914293448864175+e*1)))))))),r/n)}var TXt=SXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_48_0/boost/math/special_functions/detail/erf_inv.hpp}. This implementation follows the original, but has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var kXt=Qt,HR=ir,XR=ke,PXt=Fe,EXt=Or,CXt=vXt,AXt=mXt,MXt=yXt,xXt=wXt,LXt=TXt,IXt=.08913147449493408,OXt=2.249481201171875,RXt=.807220458984375,DXt=.9399557113647461,NXt=.9836282730102539;function FXt(e){var t,r,n,i,o;return kXt(e)?NaN:e===0?PXt:e===2?EXt:e===1?0:e>2||e<0?NaN:(e>1?(t=-1,n=2-e):(t=1,n=e),e=1-n,e<=.5?(i=e*(e+10),o=CXt(e),t*(i*IXt+i*o)):n>=.25?(i=HR(-2*XR(n)),n-=.25,o=AXt(n),t*(i/(OXt+o))):(n=HR(-XR(n)),n<3?(r=n-1.125,o=MXt(r),t*(RXt*n+o*n)):n<6?(r=n-3,o=xXt(r),t*(DXt*n+o*n)):(r=n-6,o=LXt(r),t*(NXt*n+o*n))))}var zXt=FXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var BXt=zXt,c0=BXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, long comment, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1995, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var $Xt=Qt,YR=JE,VXt=ir,qR=pU,UXt=6123233995736766e-32;function WXt(e){var t;return $Xt(e)?NaN:e<-1||e>1?NaN:e>.5?2*YR(VXt(.5-.5*e)):(t=qR-YR(e),t+=UXt,t+=qR,t)}var jXt=WXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GXt=jXt,HXt=GXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XXt=1.4142135623730951,cC=XXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function YXt(e){return e===0?.16666666666666666:.16666666666666666+e*.16666666666666666}var qXt=YXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ZXt(e){return e===0?.058333333333333334:.058333333333333334+e*(.06666666666666667+e*.008333333333333333)}var KXt=ZXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function JXt(e){return e===0?.0251984126984127:.0251984126984127+e*(.026785714285714284+e*(.0017857142857142857+e*.0001984126984126984))}var QXt=JXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tYt(e){return e===0?.012039792768959435:.012039792768959435+e*(.010559964726631394+e*(-.0011078042328042327+e*(.0003747795414462081+e*27557319223985893e-22)))}var eYt=tYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function rYt(e){return e===0?.003837005972422639:.003837005972422639+e*(.00610392115600449+e*(-.0016095979637646305+e*(.0005945867404200738+e*(-6270542728876062e-20+e*2505210838544172e-23))))}var nYt=rYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function iYt(e){return e===0?.0032177478835464946:.0032177478835464946+e*(.0010898206731540065+e*(-.0012579159844784845+e*(.0006908420797309686+e*(-.00016376804137220805+e*(154012654012654e-19+e*16059043836821613e-26)))))}var oYt=iYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function sYt(e){return e===0?.001743826229834001:.001743826229834001+e*(3353097688001788e-20+e*(-.0007624513544032393+e*(.0006451304695145635+e*(-.000249472580470431+e*(49255746366361444e-21+e*(-39851014346715405e-22+e*7647163731819816e-28))))))}var aYt=sYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function lYt(e){return e===0?.0009647274732138864:.0009647274732138864+e*(-.0003110108632631878+e*(-.00036307660358786886+e*(.0005140660578834113+e*(-.00029133414466938067+e*(9086710793521991e-20+e*(-15303004486655377e-21+e*(10914179173496788e-22+e*28114572543455206e-31)))))))}var uYt=lYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function cYt(e){return e===0?.0005422926281312969:.0005422926281312969+e*(-.0003694266780000966+e*(-.00010230378073700413+e*(.00035764655430568635+e*(-.00028690924218514614+e*(.00012645437628698076+e*(-33202652391372056e-21+e*(4890304529197534e-21+e*(-3123956959982987e-22+e*822063524662433e-32))))))))}var fYt=cYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var hYt=oC,dYt=Xa,pYt=ir,vYt=qa,gYt=qXt,mYt=KXt,_Yt=QXt,yYt=eYt,bYt=nYt,wYt=oYt,SYt=aYt,TYt=uYt,kYt=fYt,PYt=0,po=[1,0,0,0,0,0,0,0,0,0];function EYt(e,t){var r,n;return n=hYt(e/2,.5)*pYt(e*vYt)*(t-.5),r=1/e,po[1]=gYt(r),po[2]=mYt(r),po[3]=_Yt(r),po[4]=yYt(r),po[5]=bYt(r),po[6]=wYt(r),po[7]=SYt(r),po[8]=TYt(r),po[9]=kYt(r),PYt+n*dYt(po,n*n)}var CYt=EYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var AYt=oC,MYt=Xa,ZR=ir,xYt=or,LYt=qa,oa=[0,0,0,0,0,0,0];function IYt(e,t){var r,n,i,o,s,a,l,u;return u=AYt(e/2,.5)*ZR(e*LYt)*t,o=e+2,s=e+4,a=e+6,oa[0]=1,oa[1]=-(e+1)/(2*o),o*=e+2,oa[2]=-e*(e+1)*(e+3)/(8*o*s),o*=e+2,oa[3]=-e*(e+1)*(e+5)*((3*e+7)*e-2)/(48*o*s*a),o*=e+2,s*=e+4,oa[4]=-e*(e+1)*(e+7)*(((((15*e+154)*e+465)*e+286)*e-336)*e+64)/(384*o*s*a*(e+8)),o*=e+2,oa[5]=-e*(e+1)*(e+3)*(e+9)*((((((35*e+452)*e+1573)*e+600)*e-2020)*e+928)*e-128)/(1280*o*s*a*(e+8)*(e+10)),o*=e+2,s*=e+4,a*=e+6,oa[6]=-e*(e+1)*(e+11)*(((((((((((945*e+31506)*e+425858)*e+2980236)*e+11266745)*e+20675018)*e+7747124)*e-22574632)*e-8565600)*e+18108416)*e-7099392)*e+884736)/(46080*o*s*a*(e+8)*(e+10)*(e+12)),l=ZR(e),i=xYt(l*u,1/e),n=i*i,r=MYt(oa,n),r*=l,r/=i,-r}var OYt=IYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var KR=c0,RYt=Gf,JR=ir,DYt=or,NYt=iC,QR=cC;function FYt(e,t){var r,n,i,o,s,a,l;return e>1e20?-KR(2*t)*QR:(r=1/(e-.5),n=48/(r*r),i=((20700*r/n-98)*r-16)*r+96.36,o=((94.5/(n+i)-3)/n+1)*JR(r*NYt)*e,l=DYt(o*2*t,2/e),l>.05+r?(a=-KR(2*t)*QR,l=a*a,e<5&&(i+=.3*(e-4.5)*(a+.6)),i+=(((.05*o*a-5)*a-7)*a-2)*a+n,l=(((((.4*l+6.3)*l+36)*l+94.5)/i-l-3)/n+1)*a,l=RYt(r*l*l)):l=((1/(((e+6)/(e*l)-.089*o-.822)*(e+2)*3)+.5/(e+4))*l-1)*(e+1)/(e+2)+1/l,s=JR(e*l),-s)}var zYt=FYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var t8=c0,e8=zn,zw=Xf,r8=Z_,BYt=HXt,bg=ir,$Yt=ve,n8=sC,VYt=or,UYt=l0,i8=cC,o8=qa,s8=CYt,wg=OYt,Bw=zYt,a8=268435456,WYt=1/3,jYt=2*53/3,GYt=.8549879733383485;function HYt(e,t,r){var n,i,o,s,a,l,u,c,f,h,d,p,v,m,g,_;if(a=0,t>r?(u=r,r=t,t=u,s=!0):s=!1,e8(e)===e&&e<20)switch(i=zw(1,jYt),e8(e)){case 1:t===.5?a=0:a=-n8(o8*t)/UYt(o8*t);break;case 2:a=(2*t-1)/bg(2*t*r);break;case 4:l=4*t*r,o=bg(l),v=4*n8(BYt(o)/3)/o,m=bg(v-4),a=t-.5<0?-m:m;break;case 6:if(t<1e-150)return(s?-1:1)*Bw(e,t);g=4*(t-t*t),_=VYt(g,WYt),p=6*(1+GYt*(1/_-1));do f=p*p,h=f*f,d=p*h,c=p,p=2*(8*g*d-270*f+2187)/(5*(4*g*h-216*p-243));while($Yt((p-c)/p)>i);p=bg(p-e),a=t-.5<0?-p:p;break;default:e>a8?a=t8(2*t)*i8:e<3?(n=.2742-e*.0242143,t>n?a=s8(e,t):a=wg(e,t)):(n=zw(1,r8(e/-.654)),t>n?a=Bw(e,t):a=wg(e,t))}else e>a8?a=-t8(2*t)*i8:e<3?(n=.2742-e*.0242143,t>n?a=s8(e,t):a=wg(e,t)):(n=zw(1,r8(e/-.654)),t>n?a=Bw(e,t):a=wg(e,t));return s?-a:a}var XYt=HYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var YYt=XYt;function qYt(e,t,r){var n,i,o,s;return i=t/2,o=1-i,n=e*2,s=YYt(n,i,o),r&&(r.value=s*s/(n+s*s)),n/(n+s*s)}var ZYt=qYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Sg=Xa,KYt=c0,l8=ir,JYt=We,ts=cC,$e=[0,0,0,0,0,0,0],Qh=[0,0,0,0];function QYt(e,t,r){var n,i,o,s,a,l,u;return n=KYt(2*r),n/=-l8(e/2),Qh[0]=n,l=t-e,s=l*l,a=s*l,$e[0]=-l*ts/2,$e[1]=(1-2*l)/8,$e[2]=-(l*ts/48),$e[3]=-1/192,$e[4]=-l*ts/3840,$e[5]=0,$e[6]=0,Qh[1]=Sg($e,n),$e[0]=l*ts*(3*l-2)/12,$e[1]=(20*s-12*l+1)/128,$e[2]=l*ts*(20*l-1)/960,$e[3]=(16*s+30*l-15)/4608,$e[4]=l*ts*(21*l+32)/53760,$e[5]=(-(32*s)+63)/368640,$e[6]=-l*ts*(120*l+17)/25804480,Qh[2]=Sg($e,n),$e[0]=l*ts*(-75*s+80*l-16)/480,$e[1]=(-1080*a+868*s-90*l-45)/9216,$e[2]=l*ts*(-1190*s+84*l+373)/53760,$e[3]=(-2240*a-2508*s+2100*l-165)/368640,$e[4]=0,$e[5]=0,$e[6]=0,Qh[3]=Sg($e,n),o=Sg(Qh,1/e),i=o*o,u=-JYt(-i/2),i===0?.5:(1+o*l8((1+u)/i))/2}var tqt=QYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var u8=ke,eqt=qf,Tg=eqt/4;function rqt(e,t){return r;function r(n){var i,o,s;return s=1-n,s===0?[-Tg,-Tg]:n===0?[-Tg,-Tg]:(o=u8(n)+t*u8(s)+e,i=1/n-t/s,[o,i])}}var KU=rqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nqt=Qt;function iqt(e){return e===0||nqt(e)?e:e<0?-1:1}var oqt=iqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sqt=oqt,JU=sqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/tools/roots.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var c8=JU,kg=ve,aqt=Xf,$w=qf;function lqt(e,t,r,n,i,o){var s,a,l,u,c,f,h,d,p,v;p=0,s=0,c=t,u=aqt(1,1-i),h=$w,a=$w,l=$w,f=o;do{if(s=p,l=a,a=h,d=e(c),p=d[0],v=d[1],f-=1,p===0)break;if(v===0?(s===0&&(c===r?t=n:t=r,s=e(t),h=t-c),c8(s)*c8(p)<0?h<0?h=(c-r)/2:h=(c-n)/2:h<0?h=(c-n)/2:h=(c-r)/2):h=p/v,kg(h*2)>kg(l)&&(h=h>0?(c-r)/2:(c-n)/2),t=c,c-=h,c<=r){if(h=.5*(t-r),c=t-h,c===r||c===n)break}else if(c>=n&&(h=.5*(t-n),c=t-h,c===r||c===n))break;h>0?n=t:r=t}while(f&&kg(c*u)<kg(h));return c}var QU=lqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function uqt(e){return e===0?-1:-1+e*(-5+e*5)}var cqt=uqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function fqt(e){return e===0?1:1+e*(21+e*(-69+e*46))}var hqt=fqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function dqt(e){return e===0?7:7+e*(-2+e*(33+e*(-62+e*31)))}var pqt=dqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function vqt(e){return e===0?25:25+e*(-52+e*(-17+e*(88+e*(-115+e*46))))}var gqt=vqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function mqt(e){return e===0?7:7+e*(12+e*(-78+e*52))}var _qt=mqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function yqt(e){return e===0?-7:-7+e*(2+e*(183+e*(-370+e*185)))}var bqt=yqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function wqt(e){return e===0?-533:-533+e*(776+e*(-1835+e*(10240+e*(-13525+e*5410))))}var Sqt=wqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Tqt(e){return e===0?-1579:-1579+e*(3747+e*(-3372+e*(-15821+e*(45588+e*(-45213+e*15071)))))}var kqt=Tqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Pqt(e){return e===0?449:449+e*(-1259+e*(-769+e*(6686+e*(-9260+e*3704))))}var Eqt=Pqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Cqt(e){return e===0?63149:63149+e*(-151557+e*(140052+e*(-727469+e*(2239932+e*(-2251437+e*750479)))))}var Aqt=Cqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Mqt(e){return e===0?29233:29233+e*(-78755+e*(105222+e*(146879+e*(-1602610+e*(3195183+e*(-2554139+e*729754))))))}var xqt=Mqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Lqt(e){return e===0?1:1+e*(-13+e*13)}var Iqt=Lqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Oqt(e){return e===0?1:1+e*(21+e*(-69+e*46))}var Rqt=Oqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var mc=Xa,Dqt=c0,Nqt=ve,Fqt=We,f8=ke,zqt=ir,Bqt=l0,$qt=sC,Vqt=KU,Uqt=QU,Wqt=cqt,jqt=hqt,Gqt=pqt,Hqt=gqt,Xqt=_qt,Yqt=bqt,qqt=Sqt,Zqt=kqt,Kqt=Eqt,Jqt=Aqt,Qqt=xqt,tZt=Iqt,eZt=Rqt,ie=[0,0,0,0,0,0],td=[0,0,0,0];function rZt(e,t,r){var n,i,o,s,a,l,u,c,f,h,d,p,v,m,g,_,b,w,T,S;return a=Dqt(2*e)/-zqt(t/2),w=Bqt(r),b=$qt(r),td[0]=a,g=w*w,_=b*b,v=w*b,p=v*v,d=p*v,h=p*p,f=p*d,c=d*d,u=h*d,ie[0]=(2*g-1)/(3*v),ie[1]=-Wqt(g)/(36*p),ie[2]=jqt(g)/(1620*d),ie[3]=Gqt(g)/(6480*h),ie[4]=Hqt(g)/(90720*f),ie[5]=0,td[1]=mc(ie,a),ie[0]=-Xqt(g)/(405*d),ie[1]=Yqt(g)/(2592*h),ie[2]=-qqt(g)/(204120*f),ie[3]=-Zqt(g)/(2099520*c),ie[4]=0,ie[5]=0,td[2]=mc(ie,a),ie[0]=Kqt(g)/(102060*f),ie[1]=-Jqt(g)/(20995200*c),ie[2]=Qqt(g)/(36741600*u),ie[3]=0,ie[4]=0,ie[5]=0,td[3]=mc(ie,a),l=mc(td,1/t),o=b/w,o*=o,m=-(l*l)/(2*g)+f8(g)+_*f8(_)/g,Nqt(l)<.7?(ie[0]=g,ie[1]=v,ie[2]=(1-2*g)/3,ie[3]=tZt(g)/(36*v),ie[4]=eZt(g)/(270*p),ie[5]=0,S=mc(ie,l)):(T=Fqt(m),ie[0]=T,ie[1]=o,ie[2]=0,ie[3]=3*o*(3*o+1)/6,ie[4]=4*o*(4*o+1)*(4*o+2)/24,ie[5]=5*o*(5*o+1)*(5*o+2)*(5*o+3)/120,S=mc(ie,T),(S-g)*l<0&&(S=1-S)),l<0?(i=0,n=g):(i=g,n=1),(S<i||S>n)&&(S=(i+n)/2),s=Vqt(-m,o),S=Uqt(s,S,i,n,32,100),S}var nZt=rZt,P1={exports:{}},XT={exports:{}},Ip=1e3,Op=Ip*60,Rp=Op*60,Dp=Rp*24,iZt=Dp*365.25,oZt=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return sZt(e);if(r==="number"&&isNaN(e)===!1)return t.long?lZt(e):aZt(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function sZt(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!!t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*iZt;case"days":case"day":case"d":return r*Dp;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Rp;case"minutes":case"minute":case"mins":case"min":case"m":return r*Op;case"seconds":case"second":case"secs":case"sec":case"s":return r*Ip;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function aZt(e){return e>=Dp?Math.round(e/Dp)+"d":e>=Rp?Math.round(e/Rp)+"h":e>=Op?Math.round(e/Op)+"m":e>=Ip?Math.round(e/Ip)+"s":e+"ms"}function lZt(e){return Pg(e,Dp,"day")||Pg(e,Rp,"hour")||Pg(e,Op,"minute")||Pg(e,Ip,"second")||e+" ms"}function Pg(e,t,r){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}(function(e,t){t=e.exports=i.debug=i.default=i,t.coerce=l,t.disable=s,t.enable=o,t.enabled=a,t.humanize=oZt,t.names=[],t.skips=[],t.formatters={};var r;function n(u){var c=0,f;for(f in u)c=(c<<5)-c+u.charCodeAt(f),c|=0;return t.colors[Math.abs(c)%t.colors.length]}function i(u){function c(){if(!!c.enabled){var f=c,h=+new Date,d=h-(r||h);f.diff=d,f.prev=r,f.curr=h,r=h;for(var p=new Array(arguments.length),v=0;v<p.length;v++)p[v]=arguments[v];p[0]=t.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");var m=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,function(_,b){if(_==="%%")return _;m++;var w=t.formatters[b];if(typeof w=="function"){var T=p[m];_=w.call(f,T),p.splice(m,1),m--}return _}),t.formatArgs.call(f,p);var g=c.log||t.log||console.log.bind(console);g.apply(f,p)}}return c.namespace=u,c.enabled=t.enabled(u),c.useColors=t.useColors(),c.color=n(u),typeof t.init=="function"&&t.init(c),c}function o(u){t.save(u),t.names=[],t.skips=[];for(var c=(typeof u=="string"?u:"").split(/[\s,]+/),f=c.length,h=0;h<f;h++)!c[h]||(u=c[h].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.substr(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function s(){t.enable("")}function a(u){var c,f;for(c=0,f=t.skips.length;c<f;c++)if(t.skips[c].test(u))return!1;for(c=0,f=t.names.length;c<f;c++)if(t.names[c].test(u))return!0;return!1}function l(u){return u instanceof Error?u.stack||u.message:u}})(XT,XT.exports);(function(e,t){t=e.exports=XT.exports,t.log=i,t.formatArgs=n,t.save=o,t.load=s,t.useColors=r,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:a(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function r(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(l){try{return JSON.stringify(l)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}};function n(l){var u=this.useColors;if(l[0]=(u?"%c":"")+this.namespace+(u?" %c":" ")+l[0]+(u?"%c ":" ")+"+"+t.humanize(this.diff),!!u){var c="color: "+this.color;l.splice(1,0,c,"color: inherit");var f=0,h=0;l[0].replace(/%[a-zA-Z%]/g,function(d){d!=="%%"&&(f++,d==="%c"&&(h=f))}),l.splice(h,0,c)}}function i(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(l){try{l==null?t.storage.removeItem("debug"):t.storage.debug=l}catch{}}function s(){var l;try{l=t.storage.debug}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=process.env.DEBUG),l}t.enable(s());function a(){try{return window.localStorage}catch{}}})(P1,P1.exports);/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uZt=34028234663852886e22,ty=uZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cZt=P1.exports,h8=GU,fZt=ve,hZt=We,d8=ke,dZt=ty,p8=cZt("gammaincinv:higher_newton");function pZt(e,t,r,n,i,o,s,a){var l,u,c,f,h,d,p,v,m,g,_,b,w,T;T=e,_=1,b=1,d=t*t,u=e;do{if(T=e,p=T*T,r===0){if(l=(1-t)*d8(T)+T+o,l>d8(dZt))return p8("Warning: overflow problems in one or more steps of the computation. The initial approximation to the root is returned."),u;w=hZt(l)}else w=-s*T;a?(v=h8(T,t,!0,!1),c=-w*(v-n)):(m=h8(T,t,!0,!0),c=w*(m-i)),w=c,n>1e-120||b>1?(f=.5*(T-t+1)/T,h=(2*p-4*T*t+4*T+2*d-3*t+1)/p,h/=6,e=T+w*(1+w*(f+w*h))):e=T+w,_=fZt(T/e-1),b+=1,T=e,T<0&&(T=u,b=100)}while(_>2e-14&&b<35);return(_>2e-14||b>99)&&p8("Warning: the number of iterations in the Newton method reached the upper limit N=35. The last value obtained for the root is given as output."),g=T||0,g}var vZt=pZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function gZt(e){return e===0?0:0+e*(1+e*(1+e*(1.5+e*(2.6666666666666665+e*(5.208333333333333+e*10.8)))))}var mZt=gZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _Zt(e){return e===0?1:1+e*(1+e*(.3333333333333333+e*(.027777777777777776+e*(-.003703703703703704+e*(.0002314814814814815+e*5878894767783657e-20)))))}var yZt=_Zt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bZt=ve,wZt=We,v8=ke,SZt=Xa,TZt=mZt,kZt=yZt,PZt=1e-8,EZt=.08333333333333333,CZt=.008333333333333333,_c=[1,0,0,0,0,0];function AZt(e){var t,r,n,i,o,s,a,l,u;if(u=e*e*.5,e===0?o=0:e<-1?(l=wZt(-1-u),o=TZt(l)):e<1?(l=e,o=kZt(l)):(l=11+u,s=v8(l),o=l+s,l=1/l,t=s*s,r=t*s,n=r*s,i=n*s,_c[1]=(2-s)*.5,_c[2]=(-9*s+6+2*t)/6,_c[3]=-(3*r+36*s-22*t-12)*EZt,_c[4]=(60+350*t-300*s-125*r+12*n)/60,_c[5]=-(-120-274*n+900*s-1700*t+1125*r+20*i)*CZt,o+=s*l*SZt(_c,l)),l=1,e>-3.5&&e<-.03||e>.03&&e<40){l=1,a=o;do o=a*(u+v8(a))/(a-1),l=bZt(a/o-1),a=o;while(l>PZt)}return o}var tW=AZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var MZt=.9189385332046728,eW=MZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xZt=[1.9963790515900766,-.0017971032528832887,13129285796384672e-21,-2340875228178749e-22,72291210671127e-22,-3280997607821e-22,19875070901e-21,-1509214183e-21,1375340084e-22,-145728923e-22,17532367e-22,-2351465e-22,346551e-22,-55471e-22,9548e-22,-1748e-22,332e-22,-58e-22];function LZt(e,t){var r,n,i,o,s;n=0,i=0,r=t+t,s=e;do o=i,i=n,n=r*i-o+xZt[s],s-=1;while(s>=0);return(n-o)/2}var IZt=LZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function OZt(e){return e===0?.025721014990011306:.025721014990011306+e*(.08247596616699963+e*(-.0025328157302663564+e*(.0006099292666946337+e*(-.00033543297638406+e*.000250505279903))))}var RZt=OZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function DZt(e){return e===0?.08333333333333333:.08333333333333333+e*(-.002777777777777778+e*(.0007936507936507937+e*-.0005952380952380953))}var NZt=DZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Vw=Zf,Eg=ke,Uw=eW,FZt=Q_,zZt=ty,BZt=IZt,$Zt=RZt,VZt=NZt,UZt=.30865217988013566;function WZt(e){var t;return e<FZt?zZt:e<1?Vw(e+1)-(e+.5)*Eg(e)+e-Uw:e<2?Vw(e)-(e-.5)*Eg(e)+e-Uw:e<3?Vw(e-1)-(e-.5)*Eg(e)+e-Uw+Eg(e-1):e<12?(t=18/(e*e)-1,BZt(17,t)/(12*e)):(t=1/(e*e),e<1e3?$Zt(t)/(UZt+t)/e:VZt(t)/e)}var jZt=WZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var g8=We,GZt=$o,HZt=ke,XZt=ty,YZt=K_,qZt=jZt;function ZZt(e){return e>=3?g8(qZt(e)):e>0?GZt(e)/(g8(-e+(e-.5)*HZt(e))*YZt):XZt}var KZt=ZZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function JZt(e){var t,r,n;return e===0?-.3333333333438:(e<0?t=-e:t=e,t<=1?(r=-.3333333333438+e*(-.2070740359969+e*(-.05041806657154+e*(-.004923635739372+e*-4293658292782e-17))),n=1+e*(.7045554412463+e*(.2118190062224+e*(.03048648397436+e*.001605037988091)))):(e=1/e,r=-4293658292782e-17+e*(-.004923635739372+e*(-.05041806657154+e*(-.2070740359969+e*-.3333333333438))),n=.001605037988091+e*(.03048648397436+e*(.2118190062224+e*(.7045554412463+e*1)))),r/n)}var QZt=JZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tKt=ve,eKt=ke,rKt=tW,nKt=QZt;function iKt(e){var t;return tKt(e)<1?nKt(e):(t=rKt(e),eKt(e/(t-1))/e)}var oKt=iKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function sKt(e){var t,r,n;return e===0?-.0172847633523:(e<0?t=-e:t=e,t<=1?(r=-.0172847633523+e*(-.0159372646475+e*(-.00464910887221+e*(-.00060683488776+e*-614830384279e-17))),n=1+e*(.764050615669+e*(.297143406325+e*(.0579490176079+e*.00574558524851)))):(e=1/e,r=-614830384279e-17+e*(-.00060683488776+e*(-.00464910887221+e*(-.0159372646475+e*-.0172847633523))),n=.00574558524851+e*(.0579490176079+e*(.297143406325+e*(.764050615669+e*1)))),r/n)}var aKt=sKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function lKt(e){var t,r,n;return e===0?-.0172839517431:(e<0?t=-e:t=e,t<=1?(r=-.0172839517431+e*(-.0146362417966+e*(-.00357406772616+e*(-.000391032032692+e*249634036069e-17))),n=1+e*(.690560400696+e*(.249962384741+e*(.0443843438769+e*.00424073217211)))):(e=1/e,r=249634036069e-17+e*(-.000391032032692+e*(-.00357406772616+e*(-.0146362417966+e*-.0172839517431))),n=.00424073217211+e*(.0443843438769+e*(.249962384741+e*(.690560400696+e*1)))),r/n)}var uKt=lKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function cKt(e){var t,r,n;return e===0?.99994466948:(e<0?t=-e:t=e,t<=1?(r=.99994466948+e*(104.649839762+e*(857.204033806+e*(731.901559577+e*45.5174411671))),n=1+e*(104.526456943+e*(823.313447808+e*(3119.93802124+e*3970.03311219)))):(e=1/e,r=45.5174411671+e*(731.901559577+e*(857.204033806+e*(104.649839762+e*.99994466948))),n=3970.03311219+e*(3119.93802124+e*(823.313447808+e*(104.526456943+e*1)))),r/n)}var fKt=cKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hKt=ke,dKt=aKt,pKt=uKt,vKt=fKt;function gKt(e){var t,r;return e<-5?(r=e*e,t=hKt(-e),(12-r-6*(t*t))/(12*r*e)):e<-2?dKt(e):e<2?pKt(e):e<1e3?(r=1/e,vKt(e)/(-12*e)):-1/(12*e)}var mKt=gKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _Kt(e){var t,r,n;return e===0?.0495346498136:(e<0?t=-e:t=e,t<=1?(r=.0495346498136+e*(.0299521337141+e*(.00688296911516+e*(.000512634846317+e*-201411722031e-16))),n=1+e*(.759803615283+e*(.261547111595+e*(.0464854522477+e*.00403751193496)))):(e=1/e,r=-201411722031e-16+e*(.000512634846317+e*(.00688296911516+e*(.0299521337141+e*.0495346498136))),n=.00403751193496+e*(.0464854522477+e*(.261547111595+e*(.759803615283+e*1)))),r/n)}var yKt=_Kt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function bKt(e){var t,r,n;return e===0?.00452313583942:(e<0?t=-e:t=e,t<=1?(r=.00452313583942+e*(.00120744920113+e*(-789724156582e-16+e*(-504476066942e-16+e*-535770949796e-17))),n=1+e*(.912203410349+e*(.405368773071+e*(.0901638932349+e*.00948935714996)))):(e=1/e,r=-535770949796e-17+e*(-504476066942e-16+e*(-789724156582e-16+e*(.00120744920113+e*.00452313583942))),n=.00948935714996+e*(.0901638932349+e*(.405368773071+e*(.912203410349+e*1)))),r/n)}var wKt=bKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function SKt(e){var t,r,n;return e===0?.00439937562904:(e<0?t=-e:t=e,t<=1?(r=.00439937562904+e*(.000487225670639+e*(-.000128470657374+e*(529110969589e-17+e*15716677175e-17))),n=1+e*(.794435257415+e*(.333094721709+e*(.0703527806143+e*.00806110846078)))):(e=1/e,r=15716677175e-17+e*(529110969589e-17+e*(-.000128470657374+e*(.000487225670639+e*.00439937562904))),n=.00806110846078+e*(.0703527806143+e*(.333094721709+e*(.794435257415+e*1)))),r/n)}var TKt=SKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function kKt(e){var t,r,n;return e===0?-.0011481191232:(e<0?t=-e:t=e,t<=1?(r=-.0011481191232+e*(-.112850923276+e*(1.51623048511+e*(-.218472031183+e*.0730002451555))),n=1+e*(14.2482206905+e*(69.7360396285+e*(218.938950816+e*277.067027185)))):(e=1/e,r=.0730002451555+e*(-.218472031183+e*(1.51623048511+e*(-.112850923276+e*-.0011481191232))),n=277.067027185+e*(218.938950816+e*(69.7360396285+e*(14.2482206905+e*1)))),r/n)}var PKt=kKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function EKt(e){var t,r,n;return e===0?-.000145727889667:(e<0?t=-e:t=e,t<=1?(r=-.000145727889667+e*(-.290806748131+e*(-13.308504545+e*(199.722374056+e*-11.4311378756))),n=1+e*(139.612587808+e*(2189.01116348+e*(7115.24019009+e*45574.6081453)))):(e=1/e,r=-11.4311378756+e*(199.722374056+e*(-13.308504545+e*(-.290806748131+e*-.000145727889667))),n=45574.6081453+e*(7115.24019009+e*(2189.01116348+e*(139.612587808+e*1)))),r/n)}var CKt=EKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var m8=ke,AKt=yKt,MKt=wKt,xKt=TKt,LKt=PKt,IKt=CKt;function OKt(e){var t,r;return e<-8?(t=e*e,r=m8(-e)/e,(-30+e*r*(6*t*r*r-12+t))/(12*e*t*t)):e<-4?AKt(e)/(e*e):e<-2?MKt(e):e<2?xKt(e):e<10?(t=1/e,LKt(t)/(e*e)):e<100?(t=1/e,IKt(t)/(e*e)):-m8(e)/(12*e*e*e)}var RKt=OKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var DKt=P1.exports,_8=Xa,bi=Zf,NKt=c0,y8=$o,Cg=ir,b8=ve,yc=We,FKt=Ya,zKt=or,Xn=ke,BKt=K_,$Kt=ty,VKt=$U,UKt=vZt,w8=tW,S8=KZt,WKt=oKt,jKt=mKt,GKt=RKt,HKt=DKt("gammaincinv:compute"),sa=.5,Ww=.3333333333333333,XKt=.25,T8=.2,k8=.16666666666666666,YKt=.08333333333333333,qKt=.041666666666666664,Yn=[0,0,0,0,0];function ZKt(e,t,r){var n,i,o,s,a,l,u,c,f,h,d,p,v,m,g,_,b,w,T,S,k,A,C,x,I,N,B,V,F,G,Z,q,et,At,Dt,Pt,Et,qt,Y,it,K,gt,Ct,xt;if(t<sa?(s=!0,a=t,gt=-1):(s=!1,a=r,gt=1),Y=0,b8(e-1)<1e-4&&(it=0,s?t<.001?(q=t*t,V=q*t,Z=V*t,S=Z*t,T=S*t,k=t+q*sa+V*Ww+Z*XKt+S*T8+T*k8):k=-Xn(1-t):k=-Xn(r),e===1?(Y=2,At=k):(o=bi(e),Y=1)),r<1e-30&&e<sa&&(it=0,k=-Xn(r*y8(e))+(e-1)*Xn(-Xn(r*y8(e))),Y=1,o=bi(e)),e>1&&e<500&&t<1e-80){for(it=0,l=1/e,n=1/(e+1),k=(bi(e+1)+Xn(t))*l,k=yc(k),m=k,qt=0;qt<10;qt++)k=m*yc(k*l)*zKt(1-k*n,l);Y=1,o=bi(e)}if(u=1/e*(Xn(t)+bi(e+1)),u<Xn(T8*(1+e))&&Y===0&&(K=yc(u),it=0,A=e*e,et=A*e,F=et*e,g=e+1,d=g*g,h=g*d,f=d*d,_=e+2,c=_*_,b=e+3,Yn[0]=1,Yn[1]=1/g,Yn[2]=sa*(3*e+5)/(d*_),Yn[3]=Ww*(31+8*A+33*e)/(h*_*b),Yn[4]=qKt*(2888+1179*et+125*F+3971*A+5661*e)/(f*c*b*(e+4)),k=K*_8(Yn,K),o=bi(e),Y=1),e<10&&Y===0&&(p=Cg(e)/(S8(e)*BKt),v=FKt(.02,p),r<v&&(it=0,Pt=1-e,N=Pt*Pt,B=N*Pt,w=Cg(-2/e*Xn(r/p)),k=e*w8(w),Et=Xn(k),k>5?(C=Et*Et,x=C*Et,I=x*Et,K=1/k,Yn[0]=Et-1,Yn[1]=(3*Pt-2*Pt*Et+C-2*Et+2)*sa,Yn[2]=(24*Pt*Et-11*N-24*Pt-6*C+12*Et-12-9*Pt*C+6*N*Et+2*x)*k8,Yn[3]=(-12*B*Et+8.04*Pt*C-114*N*Et+(72+36*C)+(3*I-72*Et+162)*(Pt-168*Pt*Et)-(12*x+25*B)-(22*Pt*x+36*N*C+120*N))*YKt,Yn[4]=0,k=k-Et+Pt*K*_8(Yn,K)):(K=1/k,C=Et*Et,Dt=Et-1,Ct=Et-Pt*K*Dt,Ct<k&&(k-=Ct)),o=bi(e),Y=1)),b8(a-sa)<1e-5&&Y===0&&(it=0,l=1/e,k=e-Ww+(.019753086419753086+.007211444248481286*l)*l,o=bi(e),Y=1),e<1&&Y===0&&(it=0,s?k=yc(1/e*(Xn(a)+bi(e+1))):k=yc(1/e*(Xn(1-a)+bi(e+1))),o=bi(e),Y=1),Y===0)if(it=1,l=1/e,K=NKt(2*a),w=gt*K/Cg(e*sa),K<$Kt)w+=(WKt(w)+(jKt(w)+GKt(w)*l)*l)*l,k=e*w8(w),xt=w,G=-Cg(e/VKt)*yc(-sa*e*xt*xt)/S8(e),i=1/G;else return HKt("Warning: Overflow problems in one or more steps of the computation."),NaN;return Y<2&&(At=UKt(k,e,it,t,r,o,i,s)),At}var KKt=ZKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var P8=Qt,JKt=Q_,E8=Fe,C8=KKt;function QKt(e,t,r){return P8(e)||P8(t)?NaN:t<JKt?NaN:e>1||e<0?NaN:r===!0?e===0?E8:e===1?0:C8(t,1-e,e):e===0?0:e===1?E8:C8(t,e,1-e)}var tJt=QKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eJt=tJt,rJt=eJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nJt=5e-324,iJt=nJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var A8=rJt,M8=ke,oJt=ir,sJt=iJt,aJt=KU,lJt=QU;function uJt(e,t,r,n){var i,o,s,a,l,u,c,f,h,d,p,v,m,g,_,b,w,T,S,k,A,C,x,I,N,B,V,F,G,Z;return r<n?l=A8(r,t,!0):l=A8(n,t,!1),l/=e,g=t/e,F=oJt(1+g),T=F*F,S=T*F,k=T*T,A=S*T,C=S*S,x=k*S,I=k*k,N=A*k,c=A*A,V=l-g,_=V*V,b=_*V,w=_*_,B=F+1,f=B*B,h=B*f,d=f*f,p=(F+2)*(F-1)/(3*F),p+=(S+9*T+21*F+5)*V/(36*T*B),p-=(k-13*S+69*T+167*F+46)*_/(1620*f*S),p-=(7*A+21*k+70*S+26*T-93*F-31)*b/(6480*h*k),p-=(75*C+202*A+188*k-888*S-1345*T+118*F+138)*w/(272160*d*A),v=(28*k+131*S+402*T+581*F+208)*(F-1)/(1620*B*S),v-=(35*C-154*A-623*k-1636*S-3983*T-3514*F-925)*V/(12960*f*k),v-=(2132*x+7915*C+16821*A+35066*k+87490*S+141183*T+95993*F+21640)*_/(816480*A*h),v-=(11053*I+53308*x+117010*C+163924*A+116188*k-258428*S-677042*T-481940*F-105497)*b/(14696640*d*C),m=-((3592*x+8375*C-1323*A-29198*k-89578*S-154413*T-116063*F-29632)*(F-1))/(816480*A*f),m-=(442043*N+2054169*I+3803094*x+3470754*C+2141568*A-2393568*k-19904934*S-34714674*T-23128299*F-5253353)*V/(146966400*C*h),m-=(116932*c+819281*N+2378172*I+4341330*x+6806004*C+10622748*A+18739500*k+30651894*S+30869976*T+15431867*F+2919016)*_/(146966400*d*x),u=l+p/e+v/(e*e)+m/(e*e*e),u<=0&&(u=sJt),G=u-g*M8(u)+(1+g)*M8(1+g)-g,i=1/(1+g),s=u<g?i:0,a=u<g?1:i,Z=(s+a)/2,o=aJt(G,g),lJt(o,Z,s,a,32,100)}var cJt=uJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/tools/roots.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var sr=ve,fJt=Xf,jw=JU,hJt=zu,Gw=qf;function dJt(e,t,r,n,i,o){var s,a,l,u,c,f,h,d,p,v,m,g,_,b,w,T;b=0,a=!1,f=t,c=fJt(1,1-i),p=hJt(1e7*t,1e7),h=0,l=p,u=p,d=o;do{if(h=b,u=l,l=p,_=e(f),b=_[0],w=_[1],T=_[2],d-=1,b===0)break;if(w===0?(h===0&&(f===r?t=n:t=r,h=e(t),p=t-f),jw(h)*jw(b)<0?p<0?p=(f-r)/2:p=(f-n)/2:p<0?p=(f-n)/2:p=(f-r)/2):T===0?p=b/w:(v=2*b,g=2*w-b*(T/w),sr(g)<1&&sr(v)>=sr(g)*Gw?p=b/w:p=v/g,p*w/b<0&&(p=b/w,sr(p)>2*sr(t)&&(p=(p<0?-1:1)*2*sr(t)))),s=sr(p/u),s>.8&&s<2&&(p=p>0?(f-r)/2:(f-n)/2,sr(p)>f&&(p=jw(p)*f),u=p*3),t=f,f-=p,f<r){if(sr(r)<1&&sr(f)>1&&Gw/sr(f)<sr(r)?m=1e3:m=f/r,sr(m)<1&&(m=1/m),!a&&m>0&&m<3)p=.99*(t-r),f=t-p,a=!0;else if(p=(t-r)/2,f=t-p,f===r||f===n)break}else if(f>n){if(sr(n)<1&&sr(f)>1&&Gw/sr(f)<sr(n)?m=1e3:m=f/n,sr(m)<1&&(m=1/m),!a&&m>0&&m<3)p=.99*(t-n),f=t-p,a=!0;else if(p=(t-n)/2,f=t-p,f===r||f===n)break}p>0?n=t:r=t}while(d&&sr(f*c)<sr(p));return f}var pJt=dJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var vJt=ZU.assign,gJt=ve,mJt=qf,Hw=Fu;function _Jt(e,t,r,n){return i;function i(o){var s,a,l,u,c;return c=1-o,s=[0,0],vJt(o,e,t,!0,n,s,1,0),u=s[0]-r,a=s[1],n&&(a=-a),c===0&&(c=Hw*64),o===0&&(o=Hw*64),l=a*(-(c*e)+(t-2)*o+1),gJt(l)<c*o*mJt&&(l/=c*o),n&&(l=-l),a===0&&(a=(n?-1:1)*Hw*64),[u,a,l]}}var yJt=_Jt,bJt=Xa,x8=uC,Xw=Gf,L8=Bn,wJt=JE,bc=MU,I8=ir,SJt=ve,O8=We,vo=or,R8=l0,TJt=zu,kJt=Ya,D8=ke,Yw=Fu,N8=iC,F8=Os,PJt=ZYt,EJt=tqt,CJt=nZt,AJt=cJt,MJt=pJt,xJt=yJt,LJt=32,IJt=1e3,Al=[0,0,0,0,0];function OJt(e,t,r,n){var i,o,s,a,l,u,c,f,h,d,p,v,m,g,_,b,w,T,S,k,A,C,x,I,N,B,V,F,G;if(o=!1,n===0)return[1,0];if(r===0)return[0,1];if(e===1){if(t===1)return[r,1-r];v=t,t=e,e=v,v=n,n=r,r=v,o=!0}if(F=0,a=0,u=1,e===.5){if(t===.5)return F=R8(r*N8),F*=F,G=R8(n*N8),G*=G,[F,G];t>.5&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o)}if(t===.5&&e>=.5&&r!==1)A={},F=PJt(e,r,A),G=A.value;else{if(t===1)return r<n?e>1?(F=vo(r,1/e),G=-Xw(D8(r)/e)):(F=vo(r,1/e),G=1-F):(F=O8(L8(-n)/e),G=-Xw(L8(-n)/e)),o&&(v=G,G=F,F=v),[F,G];if(e+t>5)r>.5&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o),h=kJt(e,t),f=TJt(e,t),I8(h)>f-h&&h>5?(F=EJt(e,t,r),G=1-F):(N=e+t,l=wJt(I8(e/N)),s=h/N,s>=.2&&s<=.8&&N>=10?(p=vo(r,1/e),p<.0025&&e+t<200?F=p*vo(e*bc(e,t),1/e):F=CJt(r,N,l),G=1-F):(e<t&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o),d=0,t<2&&(d=bc(e,t)),d===0?G=1:(G=vo(t*n*d,1/t),F=1-G)),G>1e-5&&(F=AJt(e,t,r,n),G=1-F));else if(e<1&&t<1){if(k=(1-e)/(2-e-t),b=x8(k,e,t)-r,SJt(b)/r<F8*3)return o?[1-k,k]:[k,1-k];b<0&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o,k=1-k),S=vo(e*r*bc(e,t),1/e),F=S/(1+S),G=1/(1+S),F>k&&(F=k),u=k}else e>1&&t>1?(k=(e-1)/(e+t-2),m=(t-1)/(e+t-2),T=x8(k,e,t)-r,T<0&&(v=t,t=e,e=v,v=n,n=r,r=v,v=m,m=k,k=v,o=!o),w=D8(r*e*bc(e,t))/e,F=O8(w),G=F<.9?1-F:-Xw(w),t<e&&F<.2&&(g=e-1,_=t-1,C=e*e,x=e*C,I=t*t,Al[0]=0,Al[1]=1,Al[2]=_/g,g*=g,Al[3]=_*(3*e*t+5*t+C-e-4)/(2*(e+2)*g),g*=e+1,Al[4]=_*(33*e*I+31*I+8*C*I-30*e*t-47*t+11*C*t+6*x*t+18+4*e-x+C*C-10*C),Al[4]/=3*(e+3)*(e+2)*g,F=bJt(Al,F)),F>k&&(F=k),u=k):(t<e&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o),vo(r,1/e)<.5?(F=vo(r*e*bc(e,t),1/e),F===0&&(F=Yw),G=1-F):(G=vo(1-vo(r,t*bc(e,t)),1/t),G===0&&(G=Yw),F=1-G))}return F>.5&&(v=t,t=e,e=v,v=n,n=r,r=v,v=G,G=F,F=v,o=!o,B=1-u,V=1-a,a=B,u=V),a===0&&(o?(a=F8,F<a&&(F=a)):a=Yw,F<a&&(F=a)),i=LJt,F<1e-50&&(e<1||t<1)&&(i*=3,i/=2),c=xJt(e,t,r<n?r:n,r>=n),F=MJt(c,F,a,u,i,IJt),F===a&&(F=0),o?[1-F,F]:[F,1-F]}var RJt=OJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var DJt=RJt,NJt=DJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qw=Qt,z8=NJt;function FJt(e,t,r,n){return qw(e)||qw(t)||qw(r)?NaN:t<=0||r<=0?NaN:e<0||e>1?NaN:n?z8(t,r,1-e,e)[0]:z8(t,r,e,1-e)[0]}var zJt=FJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var BJt=zJt,rW=BJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $Jt=rW,Zw=Qt;function VJt(e,t,r){return Zw(e)||Zw(t)||Zw(r)||t<=0||r<=0||e<0||e>1?NaN:$Jt(e,t,r)}var UJt=VJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function WJt(e){return t;function t(){return e}}var jJt=WJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GJt=jJt,ey=GJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var HJt=ey,XJt=rW,Kw=Qt;function YJt(e,t){if(Kw(e)||Kw(t)||e<=0||t<=0)return HJt(NaN);return r;function r(n){return Kw(n)||n<0||n>1?NaN:XJt(n,e,t)}}var qJt=YJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZJt=wr,nW=UJt,KJt=qJt;ZJt(nW,"factory",KJt);var JJt=nW;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var QJt=zn;function tQt(e){return QJt(e)===e&&e>=0}var eQt=tQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rQt=eQt,ry=rQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nQt=ry,iQt=uC,Jw=Qt,oQt=zn,sQt=Fe;function aQt(e,t,r){return Jw(e)||Jw(t)||Jw(r)||r<0||r>1||!nQt(t)||t===sQt?NaN:e<0?0:e>=t?1:(e=oQt(e+1e-7),iQt(r,e+1,t-e,!0,!0))}var lQt=aQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uQt=ry,cQt=ey,fQt=uC,Qw=Qt,hQt=zn,dQt=Fe;function pQt(e,t){if(Qw(e)||Qw(t)||t<0||t>1||!uQt(e)||e===dQt)return cQt(NaN);return r;function r(n){return Qw(n)?NaN:n<0?0:n>=e?1:(n=hQt(n+1e-7),fQt(t,n+1,e-n,!0,!0))}}var vQt=pQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gQt=wr,iW=lQt,mQt=vQt;gQt(iW,"factory",mQt);var _Qt=iW;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The code is adapted from the Fortran routine from the FNLIB library of the [SLATEC Common Mathematical Library]{@link http://www.netlib.no/netlib/slatec/fnlib/}.
*
* The original code was developed by W. Fullerton of Los Alamos Scientific Laboratory, a governmental institution, and is therefore public domain.
*/var oW=[1276642195630063e-46,-3401102254316749e-45,1025680058010471e-43,-35475981581010704e-43,14292273559424982e-41,-6831888753985767e-39,39628370610464347e-38,-2868042435334643e-35,2683181998482699e-33,-3399615005417722e-31,6221098041892606e-29,-1809129475572494e-26,981082564692473e-23,-1384948176067564e-20,.16663894804518634],yQt=oW.length;function bQt(e){var t,r,n,i,o;if(e<-1.1||e>1.1)return NaN;for(n=0,i=0,t=2*e,o=0;o<yQt;o++)r=n,n=i,i=t*n-r+oW[o];return(i-r)*.5}var wQt=bQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The code is adapted from the Fortran routine from the FNLIB library of the [SLATEC Common Mathematical Library]{@link http://www.netlib.no/netlib/fn/d9lgmc.f}.
*
* The original code was developed by W. Fullerton of Los Alamos Scientific Laboratory, a governmental institution, and is therefore public domain.
*/var SQt=or,TQt=wQt,kQt=9490626562425156e-8,PQt=3745194030963158e291;function EQt(e){return e<10?NaN:e>=PQt?0:e<kQt?TQt(2*SQt(10/e,2)-1)/e:1/(e*12)}var CQt=EQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The code is adapted from the Fortran routine from the FNLIB library of the [SLATEC Common Mathematical Library]{@link http://www.netlib.no/netlib/slatec/fnlib/albeta.f}.
*
* The original code was developed by W. Fullerton of Los Alamos Scientific Laboratory, a governmental institution, and is therefore public domain.
*/var AQt=Zf,B8=Bn,tS=$o,MQt=zu,xQt=Ya,Ag=ke,LQt=eW,IQt=Or,$8=Fe,ed=CQt;function OQt(e,t){var r,n,i;return n=xQt(e,t),i=MQt(e,t),n<0?NaN:n===0?$8:i===$8?IQt:n>=10?(r=ed(n)+ed(i)-ed(n+i),-.5*Ag(i)+LQt+r+(n-.5)*Ag(n/(n+i))+i*B8(-n/(n+i))):i>=10?(r=ed(i)-ed(n+i),AQt(n)+r+n-n*Ag(n+i)+(i-.5)*B8(-n/(n+i))):Ag(tS(n)*(tS(i)/tS(n+i)))}var RQt=OQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var DQt=RQt,NQt=DQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var V8=Ha,U8=Qt,FQt=NQt,zQt=ve,W8=ke,j8=Or;function YT(e,t){return U8(e)||U8(t)?NaN:!V8(e)||!V8(t)?NaN:e<0?YT(-e+t-1,t):t<0?j8:t===0?0:t===1?W8(zQt(e)):e<t?j8:e-t<2?YT(e,e-t):-W8(e+1)-FQt(e-t+1,t+1)}var BQt=YT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $Qt=BQt,sW=$Qt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var G8=ry,VQt=sW,eS=Qt,UQt=Bn,WQt=We,jQt=ke,GQt=Fe;function HQt(e,t,r){var n;return eS(e)||eS(t)||eS(r)||r<0||r>1||!G8(t)||t===GQt?NaN:G8(e)?e>t?0:r===0?e===0?1:0:r===1?e===t?1:0:(n=VQt(t,e),n+=e*jQt(r)+(t-e)*UQt(-r),WQt(n)):0}var XQt=HQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var H8=Qt;function YQt(e,t){return H8(e)||H8(t)?NaN:e===t?1:0}var qQt=YQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZQt=ey,X8=Qt;function KQt(e){if(X8(e))return ZQt(NaN);return t;function t(r){return X8(r)?NaN:r===e?1:0}}var JQt=KQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var QQt=wr,aW=qQt,tte=JQt;QQt(aW,"factory",tte);var ete=aW;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Y8=ry,rte=ey,nte=sW,q8=ete.factory,rS=Qt,ite=Bn,ote=We,ste=ke,ate=Fe;function lte(e,t){if(rS(e)||rS(t)||!Y8(e)||e===ate||t<0||t>1)return rte(NaN);if(t===0||e===0)return q8(0);if(t===1)return q8(e);return r;function r(n){var i;return rS(n)?NaN:Y8(n)?n>e?0:(i=nte(e,n),i+=n*ste(t)+(e-n)*ite(-t),ote(i)):0}}var ute=lte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cte=wr,lW=XQt,fte=ute;cte(lW,"factory",fte);var hte=lW;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dte=Zi,qT;function pte(e){return dte(e)==="[object Array]"}Array.isArray?qT=Array.isArray:qT=pte;var vte=qT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gte=vte,uW=gte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mte=uW;function _te(e){return typeof e=="object"&&e!==null&&!mte(e)}var yte=_te;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bte=yte,wte=bte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ste=/./,Tte=Ste;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function kte(e){return typeof e=="boolean"}var cW=kte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Pte=Boolean.prototype.toString,Ete=Pte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Cte=Ete;function Ate(e){try{return Cte.call(e),!0}catch{return!1}}var Mte=Ate;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xte=G_,Lte=Zi,Ite=Mte,Ote=xte();function Rte(e){return typeof e=="object"?e instanceof Boolean?!0:Ote?Ite(e):Lte(e)==="[object Boolean]":!1}var fW=Rte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Dte=cW,Nte=fW;function Fte(e){return Dte(e)||Nte(e)}var zte=Fte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hW=wr,fC=zte,Bte=cW,$te=fW;hW(fC,"isPrimitive",Bte);hW(fC,"isObject",$te);var dW=fC;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Vte(){return new Function("return this;")()}var Ute=Vte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Wte=typeof self=="object"?self:null,jte=Wte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Gte=typeof window=="object"?window:null,Hte=Gte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Xte=typeof AS=="object"?AS:null,Yte=Xte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qte=dW.isPrimitive,Zte=Ute,Z8=jte,K8=Hte,J8=Yte;function Kte(e){if(arguments.length){if(!qte(e))throw new TypeError("invalid argument. Must provide a boolean primitive. Value: `"+e+"`.");if(e)return Zte()}if(Z8)return Z8;if(K8)return K8;if(J8)return J8;throw new Error("unexpected error. Unable to resolve global object.")}var Jte=Kte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Qte=Jte,tee=Qte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eee=tee,Q8=eee(),ree=Q8.document&&Q8.document.childNodes,nee=ree;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iee=Int8Array,oee=iee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var see=Tte,aee=nee,lee=oee;function uee(){return typeof see=="function"||typeof lee=="object"||typeof aee=="function"}var cee=uee;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function fee(){return/^\s*function\s*([^(]*)/i}var pW=fee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hee=pW,dee=hee(),pee=dee;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vee=wr,vW=pW,gee=pee;vee(vW,"REGEXP",gee);var mee=vW;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _ee=uW;function yee(e){if(typeof e!="function")throw new TypeError("invalid argument. Must provide a function. Value: `"+e+"`.");return t;function t(r){var n,i;if(!_ee(r)||(n=r.length,n===0))return!1;for(i=0;i<n;i++)if(e(r[i])===!1)return!1;return!0}}var bee=yee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wee=bee,See=wee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Tee(e){return e!==null&&typeof e=="object"}var kee=Tee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Pee=wr,Eee=See,hC=kee,Cee=Eee(hC);Pee(hC,"isObjectLikeArray",Cee);var Aee=hC;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Mee=Aee;function xee(e){return Mee(e)&&(e._isBuffer||e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e))}var Lee=xee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Iee=Lee,Oee=Iee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ree=Zi,Dee=mee.REGEXP,Nee=Oee;function Fee(e){var t,r,n;if(r=Ree(e).slice(8,-1),(r==="Object"||r==="Error")&&e.constructor){if(n=e.constructor,typeof n.name=="string")return n.name;if(t=Dee.exec(n.toString()),t)return t[1]}return Nee(e)?"Buffer":r}var zee=Fee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Bee=zee,gW=Bee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $ee=gW;function Vee(e){var t;return e===null?"null":(t=typeof e,t==="object"?$ee(e).toLowerCase():t)}var Uee=Vee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Wee=gW;function jee(e){return Wee(e).toLowerCase()}var Gee=jee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Hee=cee,Xee=Uee,Yee=Gee,qee=Hee()?Yee:Xee,Zee=qee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Kee=Zee;function Jee(e){return Kee(e)==="function"}var Qee=Jee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tre=Qee,mW=tre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ere=Object.getPrototypeOf,rre=ere;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function nre(e){return e.__proto__}var ire=nre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ore=Zi,sre=ire;function are(e){var t=sre(e);return t||t===null?t:ore(e.constructor)==="[object Function]"?e.constructor.prototype:e instanceof Object?Object.prototype:null}var lre=are;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ure=mW,cre=rre,fre=lre,ZT;ure(Object.getPrototypeOf)?ZT=cre:ZT=fre;var hre=ZT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dre=hre;function pre(e){return e==null?null:(e=Object(e),dre(e))}var vre=pre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gre=vre,mre=gre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _re=wte,tD=mW,yre=mre,mm=H_,bre=Zi,wre=Object.prototype;function Sre(e){var t;for(t in e)if(!mm(e,t))return!1;return!0}function Tre(e){var t;return _re(e)?(t=yre(e),t?!mm(e,"constructor")&&mm(t,"constructor")&&tD(t.constructor)&&bre(t.constructor)==="[object Function]"&&mm(t,"isPrototypeOf")&&tD(t.isPrototypeOf)&&(t===wre||Sre(e)):!0):!1}var kre=Tre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Pre=kre,_W=Pre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ere(e){return typeof e=="string"}var yW=Ere;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Cre=String.prototype.valueOf,Are=Cre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Mre=Are;function xre(e){try{return Mre.call(e),!0}catch{return!1}}var Lre=xre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ire=G_,Ore=Zi,Rre=Lre,Dre=Ire();function Nre(e){return typeof e=="object"?e instanceof String?!0:Dre?Rre(e):Ore(e)==="[object String]":!1}var bW=Nre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Fre=yW,zre=bW;function Bre(e){return Fre(e)||zre(e)}var $re=Bre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wW=wr,dC=$re,Vre=yW,Ure=bW;wW(dC,"isPrimitive",Vre);wW(dC,"isObject",Ure);var Wre=dC;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jre=Vf.isPrimitive,Gre=Qt;function Hre(e){return jre(e)&&Gre(e)}var SW=Hre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Xre=Vf.isObject,Yre=Qt;function qre(e){return Xre(e)&&Yre(e.valueOf())}var TW=qre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Zre=SW,Kre=TW;function Jre(e){return Zre(e)||Kre(e)}var Qre=Jre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kW=wr,pC=Qre,tne=SW,ene=TW;kW(pC,"isPrimitive",tne);kW(pC,"isObject",ene);var rne=pC;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eD=Vf.isPrimitive,nne=_W,ine=Wre.isPrimitive,rD=rne,nS=H_;function one(e,t){return nne(t)?nS(t,"alpha")&&(e.alpha=t.alpha,!eD(e.alpha)||rD(e.alpha))?new TypeError("invalid option. `alpha` option must be a number primitive. Option: `"+e.alpha+"`."):nS(t,"alternative")&&(e.alternative=t.alternative,!ine(e.alternative))?new TypeError("invalid option. `alternative` option must be a string primitive. Option: `"+e.alternative+"`."):nS(t,"p")&&(e.p=t.p,!eD(e.p)||rD(e.p))?new TypeError("invalid option. `p` option must be a number primitive. Option: `"+e.p+"`."):null:new TypeError("invalid argument. Options argument must be an object. Value: `"+t+"`.")}var sne=one;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ane=X_.isPrimitive;function lne(e){return ane(e)&&e>0}var PW=lne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var une=X_.isObject;function cne(e){return une(e)&&e.valueOf()>0}var EW=cne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fne=PW,hne=EW;function dne(e){return fne(e)||hne(e)}var pne=dne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var CW=wr,vC=pne,vne=PW,gne=EW;CW(vC,"isPrimitive",vne);CW(vC,"isObject",gne);var mne=vC;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _ne=9007199254740991,yne=_ne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bne=308,wne=bne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Sne=-308,Tne=Sne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kne=-324,Pne=kne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nD=Qt,Mg=Hf,iD=or,Ene=ve,oD=Z_,Cne=yne,sD=wne,Ane=Tne,Mne=Pne,xne=Cne+1,aD=1e308;function Lne(e,t){var r,n;return nD(e)||nD(t)||Mg(t)?NaN:Mg(e)||e===0||t<Mne||Ene(e)>xne&&t<=0?e:t>sD?0*e:t<Ane?(r=iD(10,-(t+sD)),n=e*aD*r,Mg(n)?e:oD(n)/aD/r):(r=iD(10,-t),n=e*r,Mg(n)?e:oD(n)/r)}var Ine=Lne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var One=Ine,Rne=One;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Dne=mne,Nne=_W,Fne=dW.isPrimitive,lD=H_,xg=Rne;function zne(e){var t,r,n;if(r=4,t=!0,arguments.length>0){if(!Nne(e))throw new TypeError("invalid argument. First argument must be an options object. Value: `"+e+"`.");if(lD(e,"digits")){if(!Dne(e.digits))throw new TypeError("invalid option. `digits` option must be a positive integer. Option: `"+e.digits+"`.");r=e.digits}if(lD(e,"decision")){if(!Fne(e.decision))throw new TypeError("invalid option. `decision` option must be a boolean primitive. Option: `"+e.decision+"`.");t=e.decision}}switch(n="",n+=this.method,n+=`

`,n+="Alternative hypothesis: ",n+="True correlation coefficient is ",this.alternative){case"less":n+="less than ";break;case"greater":n+="greater than ";break;case"two-sided":default:n+="not equal to ";break}return n+=this.nullValue,n+=`

`,n+="    pValue: "+xg(this.pValue,-r)+`
`,n+="    statistic: "+xg(this.statistic,-r)+`
`,n+="    "+(1-this.alpha)*100+"% confidence interval: ["+xg(this.ci[0],-r)+","+xg(this.ci[1],-r)+"]",n+=`

`,t&&(n+="Test Decision: ",this.rejected?n+="Reject null in favor of alternative at "+this.alpha*100+"% significance level":n+="Fail to reject null in favor of alternative at "+this.alpha*100+"% significance level",n+=`
`),n}var Bne=zne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var es=bLt,$ne=BIt,uD=vOt,AW=JJt,Vne=zn,Une=vU,wc=_Qt,iS=hte,cD=sne,Wne=Bne,fD=1+1e-7;function hD(e,t,r){return e===0?0:AW(r,e,t-e+1)}function dD(e,t,r){return e===t?1:AW(1-r,e+1,t-e)}function jne(){var e,t,r,n,i,o,s,a,l,u,c,f,h,d,p;if(t={},$ne(arguments[0])){if(h=arguments[0],h.length!==2)throw new Error("invalid argument. If provided an array, it must have two elements. Value: `"+h+"`.");c=h[1]+h[0],h=h[0],arguments[1]&&(s=cD(t,arguments[1]))}else{if(h=arguments[0],c=arguments[1],!uD(h))throw new TypeError("invalid argument. Must provide a nonnegative integer or a two-element array. Value: `"+h+"`.");if(!uD(c))throw new TypeError("invalid argument. Must provide a nonnegative integer. Value: `"+c+"`.");if(h>c)throw new TypeError("invalid arguments. `x` cannot be larger than `n`. `x:"+h+", n:"+c+"`.");arguments[2]&&(s=cD(t,arguments[2]))}if(s)throw s;if(t.alpha===void 0?e=.05:e=t.alpha,e<0||e>1)throw new RangeError("invalid argument. Option `alpha` must be a number in the range 0 to 1. Value: `"+e+"`.");if(t.p===void 0?f=.5:f=t.p,f<0||f>1)throw new RangeError("invalid argument. Option `p` must be a probability. Value: `"+f+"`.");switch(o=t.alternative||"two-sided",i=h/c,o){case"less":n=wc(h,c,f),r=[0,dD(h,c,e)];break;case"greater":n=1-wc(h-1,c,f),r=[hD(h,c,e),1];break;case"two-sided":if(l=iS(h,c,f),u=c*f,h===u)n=1;else if(h<u){for(d=0,p=Une(u);p<=c;p++)iS(p,c,f)<=l*fD&&(d+=1);n=wc(h,c,f)+(1-wc(c-d,c,f))}else{for(d=0,p=0;p<=Vne(u);p++)iS(p,c,f)<=l*fD&&(d+=1);n=wc(d-1,c,f)+(1-wc(h-1,c,f))}r=[hD(h,c,e/2),dD(h,c,e/2)];break;default:throw new Error("Invalid option. `alternative` must be either `two-sided`, `less` or `greater`. Value: `"+o+"`")}return a={},es(a,"rejected",n<=e),es(a,"alpha",e),es(a,"pValue",n),es(a,"statistic",i),es(a,"ci",r),es(a,"nullValue",f),es(a,"alternative",o),es(a,"method","Exact binomial test"),es(a,"print",Wne),a}var Gne=jne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Hne=Gne,ny=Hne;const Xne=zp({id:"droprates",state:()=>({selected_pzk:"",selected_ik:"",selected_specie:"",selected_model:"a",usePooling:!1,plotChiSquared:!1})}),Yne=Array.prototype.concat,MW=Object.prototype.toString;function xW(e,t){var r=e>t?e:t;return Math.pow(10,17-~~(Math.log(r>0?r:-r)*Math.LOG10E))}const No=Array.isArray||function(t){return MW.call(t)==="[object Array]"};function Np(e){return MW.call(e)==="[object Function]"}function Lr(e){return typeof e=="number"?e-e===0:!1}function qne(e){return Yne.apply([],e)}const LW={calcRdx:xW,isArray:No,isFunction:Np,isNumber:Lr,toVector:qne};let fi=Math.random;function IW(e){if(typeof e!="function")throw new TypeError("fn is not a function");fi=e}function iy(e){return e.length||1}function OW(e){return e[0].length||1}function Zne(e){return{rows:iy(e),cols:OW(e)}}function gC(e,t){return No(t)?t.map(r=>gC(e,r)):e[t]}function RW(e,t){return gC(e,t)}function E1(e,t){if(No(t)){const n=Oe(e.length).map(()=>new Array(t.length));return t.forEach(function(i,o){Oe(e.length).forEach(function(s){n[s][o]=e[s][i]})}),n}const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=[e[n][t]];return r}function DW(e,t){return E1(e,t).map(r=>r[0])}function Kne(e){const t=iy(e),r=new Array(t);for(let n=0;n<t;n++)r[n]=[e[n][n]];return r}function Jne(e){for(var t=iy(e)-1,r=new Array(t),n=0;t>=0;t--,n++)r[n]=[e[n][t]];return r}function Ea(e){var t=[],r,n,i,o,s;for(No(e[0])||(e=[e]),n=e.length,i=e[0].length,s=0;s<i;s++){for(r=new Array(n),o=0;o<n;o++)r[o]=e[o][s];t.push(r)}return t.length===1?t[0]:t}function ln(e,t,r){var n,i,o,s,a;for(No(e[0])||(e=[e]),i=e.length,o=e[0].length,s=r?e:new Array(i),n=0;n<i;n++)for(s[n]||(s[n]=new Array(o)),a=0;a<o;a++)s[n][a]=t(e[n][a],n,a);return s.length===1?s[0]:s}function oy(e,t,r){var n,i,o,s,a;for(No(e[0])||(e=[e]),i=e.length,o=e[0].length,s=r?e:new Array(i),n=0;n<i;n++)for(s[n]||(s[n]=new Array(o)),o>0&&(s[n][0]=e[n][0]),a=1;a<o;a++)s[n][a]=t(s[n][a-1],e[n][a]);return s.length===1?s[0]:s}function mC(e,t){return ln(e,t,!0)}function Jf(e,t,r){var n=new Array(e),i,o;for(Np(t)&&(r=t,t=e),i=0;i<e;i++)for(n[i]=new Array(t),o=0;o<t;o++)n[i][o]=r(i,o);return n}function NW(){return 0}function Qne(){return 1}function tie(e,t){return e===t?1:0}function Vo(e,t){return Lr(t)||(t=e),Jf(e,t,NW)}function eie(e,t){return Lr(t)||(t=e),Jf(e,t,Qne)}function rie(e,t){return Lr(t)||(t=e),Jf(e,t,fi)}function _u(e,t){return Lr(t)||(t=e),Jf(e,t,tie)}function nie(e){var t=e.length,r,n;if(e.length!==e[0].length)return!1;for(r=0;r<t;r++)for(n=0;n<t;n++)if(e[n][r]!==e[r][n])return!1;return!0}function iie(e){return mC(e,NW)}function FW(e,t,r,n){Np(n)||(n=!1);var i=[],o=xW(e,t),s=(t*o-e*o)/((r-1)*o),a=e,l;for(l=0;a<=t&&l<r;l++,a=(e*o+s*o*l)/o)i.push(n?n(a,l):a);return i}function Oe(e,t,r){var n=[],i;if(r=r||1,t===void 0&&(t=e,e=0),e===t||r===0)return[];if(e<t&&r<0)return[];if(e>t&&r>0)return[];if(r>0)for(i=e;i<t;i+=r)n.push(i);else for(i=e;i>t;i+=r)n.push(i);return n}function is(e,t){function r(l,u,c,f){var h,d=[],p=l.length;if(u===void 0&&c===void 0&&f===void 0)return sy(l);if(u=u||0,c=c||l.length,u=u>=0?u:p+u,c=c>=0?c:p+c,f=f||1,u===c||f===0)return[];if(u<c&&f<0)return[];if(u>c&&f>0)return[];if(f>0)for(h=u;h<c;h+=f)d.push(l[h]);else for(h=u;h>c;h+=f)d.push(l[h]);return d}var n,i;if(t=t||{},Lr(t.row)){if(Lr(t.col))return e[t.row][t.col];var o=RW(e,t.row);return n=t.col||{},r(o,n.start,n.end,n.step)}if(Lr(t.col)){var s=DW(e,t.col);return i=t.row||{},r(s,i.start,i.end,i.step)}i=t.row||{},n=t.col||{};var a=r(e,i.start,i.end,i.step);return a.map(function(l){return r(l,n.start,n.end,n.step)})}function vd(e,t,r){var n,i;if(Lr(t.row)){if(Lr(t.col))return e[t.row][t.col]=r;t.col=t.col||{},t.col.start=t.col.start||0,t.col.end=t.col.end||e[0].length,t.col.step=t.col.step||1,n=Oe(t.col.start,Math.min(e.length,t.col.end),t.col.step);var o=t.row;return n.forEach(function(a,l){e[o][a]=r[l]}),e}if(Lr(t.col)){t.row=t.row||{},t.row.start=t.row.start||0,t.row.end=t.row.end||e.length,t.row.step=t.row.step||1,i=Oe(t.row.start,Math.min(e[0].length,t.row.end),t.row.step);var s=t.col;return i.forEach(function(a,l){e[a][s]=r[l]}),e}return r[0].length===void 0&&(r=[r]),t.row.start=t.row.start||0,t.row.end=t.row.end||e.length,t.row.step=t.row.step||1,t.col.start=t.col.start||0,t.col.end=t.col.end||e[0].length,t.col.step=t.col.step||1,i=Oe(t.row.start,Math.min(e.length,t.row.end),t.row.step),n=Oe(t.col.start,Math.min(e[0].length,t.col.end),t.col.step),i.forEach(function(a,l){n.forEach(function(u,c){e[a][u]=r[l][c]})}),e}function oie(e){var t=Vo(e.length,e.length);return e.forEach(function(r,n){t[n][n]=r}),t}function sy(e){return e.map(function(t){return Lr(t)?t:t.map(function(r){return r})})}const sie=Object.freeze(Object.defineProperty({__proto__:null,utils:LW,get random_fn(){return fi},setRandom:IW,rows:iy,cols:OW,dimensions:Zne,row:gC,rowa:RW,col:E1,cola:DW,diag:Kne,antidiag:Jne,transpose:Ea,map:ln,cumreduce:oy,alter:mC,create:Jf,zeros:Vo,ones:eie,rand:rie,identity:_u,symmetric:nie,clear:iie,seq:FW,arange:Oe,slice:is,sliceAssign:vd,diagonal:oie,copy:sy},Symbol.toStringTag,{value:"Module"}));function Qf(e,t){return e-t}function pD(e,t,r){return Math.max(t,Math.min(e,r))}function un(e){for(var t=0,r=e.length;--r>=0;)t+=e[r];return t}function aie(e){for(var t=0,r=e.length;--r>=0;)t+=e[r]*e[r];return t}function ay(e){for(var t=cr(e),r=0,n=e.length,i;--n>=0;)i=e[n]-t,r+=i*i;return r}function lie(e){for(var t=0,r=e.length;--r>=0;)t+=e[r];return t}function zW(e){for(var t=1,r=e.length;--r>=0;)t*=e[r];return t}function _C(e){for(var t=e[0],r=0;++r<e.length;)e[r]<t&&(t=e[r]);return t}function yC(e){for(var t=e[0],r=0;++r<e.length;)e[r]>t&&(t=e[r]);return t}function uie(e){for(var t={},r=[],n=0;n<e.length;n++)t[e[n]]||(t[e[n]]=!0,r.push(e[n]));return r}function cr(e){return un(e)/e.length}function cie(e){return ay(e)/e.length}function fie(e){return Math.pow(zW(e),1/e.length)}function KT(e){var t=e.length,r=e.slice().sort(Qf);return t&1?r[t/2|0]:(r[t/2-1]+r[t/2])/2}function hie(e){return oy(e,function(t,r){return t+r})}function die(e){return oy(e,function(t,r){return t*r})}function pie(e){var t=[],r=e.length,n;for(n=1;n<r;n++)t.push(e[n]-e[n-1]);return t}function JT(e){var t,r=[],n={};for(t=0;t<e.length;t++){var i=e[t];n[i]?n[i]++:(n[i]=1,r.push(i))}var o=r.sort(Qf),s={},a=1;for(t=0;t<o.length;t++){var i=o[t],l=n[i],u=a,c=a+l-1,f=(u+c)/2;s[i]=f,a+=l}return e.map(function(h){return s[h]})}function vie(e){var t=e.length,r=e.slice().sort(Qf),n=1,i=0,o=0,s=[],a;for(a=0;a<t;a++)r[a]===r[a+1]?n++:(n>i?(s=[r[a]],i=n,o=0):n===i&&(s.push(r[a]),o++),n=1);return o===0?s[0]:s}function gie(e){return yC(e)-_C(e)}function BW(e,t){return ay(e)/(e.length-(t?1:0))}function $W(e){var t=e.reduce(function(n,i){return n+ay(i)},0),r=e.reduce(function(n,i){return n+i.length},0);return t/(r-e.length)}function mie(e){for(var t=cr(e),r=e.length,n=new Array(r),i=0;i<r;i++)n[i]=e[i]-t;return n}function Ps(e,t){return Math.sqrt(BW(e,t))}function VW(e){return Math.sqrt($W(e))}function _ie(e){for(var t=cr(e),r=[],n=e.length-1;n>=0;n--)r.push(Math.abs(e[n]-t));return cr(r)}function yie(e){for(var t=KT(e),r=[],n=e.length-1;n>=0;n--)r.push(Math.abs(e[n]-t));return KT(r)}function bie(e){return Ps(e)/cr(e)}function wie(e){var t=e.length,r=e.slice().sort(Qf);return[r[Math.round(t/4)-1],r[Math.round(t/2)-1],r[Math.round(t*3/4)-1]]}function Sie(e,t,r,n){var i=e.slice().sort(Qf),o=[t.length],s=e.length,a,l,u,c,f,h;for(typeof r>"u"&&(r=3/8),typeof n>"u"&&(n=3/8),a=0;a<t.length;a++)l=t[a],u=r+l*(1-r-n),c=s*l+u,f=Math.floor(pD(c,1,s-1)),h=pD(c-f,0,1),o[a]=(1-h)*i[f-1]+h*i[f];return o}function Tie(e,t,r){var n=e.slice().sort(Qf),i=t*(n.length+(r?1:-1))+(r?0:1),o=parseInt(i),s=i-o;return o+1<n.length?n[o-1]+s*(n[o]-n[o-1]):n[o-1]}function kie(e,t,r){var n=0,i=e.length,o=!1,s,a;for(r==="strict"&&(o=!0),a=0;a<i;a++)s=e[a],(o&&s<t||!o&&s<=t)&&n++;return n/i}function Pie(e,t){t=t||4;var r=_C(e),n=(yC(e)-r)/t,i=e.length,o=[],s;for(s=0;s<t;s++)o[s]=0;for(s=0;s<i;s++)o[Math.min(Math.floor((e[s]-r)/n),t-1)]+=1;return o}function UW(e,t){var r=cr(e),n=cr(t),i=e.length,o=new Array(i),s;for(s=0;s<i;s++)o[s]=(e[s]-r)*(t[s]-n);return un(o)/(i-1)}function WW(e,t){return UW(e,t)/Ps(e,1)/Ps(t,1)}function Eie(e,t){return e=JT(e),t=JT(t),WW(e,t)}function bC(e,t){for(var r=cr(e),n=Ps(e),i=e.length,o=0,s=0;s<i;s++)o+=Math.pow((e[s]-r)/n,t);return o/e.length}function Cie(e){return bC(e,3)}function Aie(e){return bC(e,4)-3}const Mie=Object.freeze(Object.defineProperty({__proto__:null,sum:un,sumsqrd:aie,sumsqerr:ay,sumrow:lie,product:zW,min:_C,max:yC,unique:uie,mean:cr,meansqerr:cie,geomean:fie,median:KT,cumsum:hie,cumprod:die,diff:pie,rank:JT,mode:vie,range:gie,variance:BW,pooledvariance:$W,deviation:mie,stdev:Ps,pooledstdev:VW,meandev:_ie,meddev:yie,coeffvar:bie,quartiles:wie,quantiles:Sie,percentile:Tie,percentileOfScore:kie,histogram:Pie,covariance:UW,corrcoeff:WW,spearmancoeff:Eie,stanMoment:bC,skewness:Cie,kurtosis:Aie},Symbol.toStringTag,{value:"Module"}));function xie(e,t,r){return e<t||e>r?0:1/(r-t)}function Lie(e,t,r){return e<t?0:e<r?(e-t)/(r-t):1}function Iie(e,t,r){return t+e*(r-t)}function Oie(e,t){return .5*(e+t)}function Rie(e,t){return cr(e)}function Die(){throw new Error("mode is not yet implemented")}function jW(e,t){return e/2+t/2+(t/2-e/2)*(2*fi()-1)}function Nie(e,t){return Math.pow(t-e,2)/12}const Fie=Object.freeze(Object.defineProperty({__proto__:null,pdf:xie,cdf:Lie,inv:Iie,mean:Oie,median:Rie,mode:Die,sample:jW,variance:Nie},Symbol.toStringTag,{value:"Module"}));function zie(e,t,r){return r<=t?NaN:e<=t||e>=r?0:2/Math.PI*Math.pow(Math.pow(r-t,2)-Math.pow(2*e-t-r,2),-.5)}function Bie(e,t,r){return e<t?0:e<r?2/Math.PI*Math.asin(Math.sqrt((e-t)/(r-t))):1}function $ie(e,t,r){return t+(.5-.5*Math.cos(Math.PI*e))*(r-t)}function Vie(e,t){return t<=e?NaN:(e+t)/2}function Uie(e,t){return t<=e?NaN:(e+t)/2}function Wie(){throw new Error("mode is not yet implemented")}function jie(e,t){return(e+t)/2+(t-e)/2*Math.sin(2*Math.PI*jW(0,1))}function Gie(e,t){return t<=e?NaN:Math.pow(t-e,2)/8}const Hie=Object.freeze(Object.defineProperty({__proto__:null,pdf:zie,cdf:Bie,inv:$ie,mean:Vie,median:Uie,mode:Wie,sample:jie,variance:Gie},Symbol.toStringTag,{value:"Module"}));function Ge(e){var t=0,r=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],n=1.000000000190015,i,o,s;for(s=(o=i=e)+5.5,s-=(i+.5)*Math.log(s);t<6;t++)n+=r[t]/++o;return Math.log(2.5066282746310007*n/i)-s}function GW(e){var t,r,n,i,o,s,a,l=[.08333333333333333,-.002777777777777778,.0007936507936507937,-.0005952380952380952,.0008417508417508418,-.001917526917526918,.00641025641025641,-.02955065359477124,.1796443723688307,-1.3924322169059];if(t=e,a=0,e==1||e==2)return 0;for(e<=7&&(a=Math.floor(7-e),t=e+a),r=1/(t*t),n=2*Math.PI,o=l[9],s=8;s>=0;s--)o*=r,o+=l[s];if(i=o/t+.5*Math.log(n)+(t-.5)*Math.log(t)-t,e<=7)for(s=1;s<=a;s++)i-=Math.log(t-1),t-=1;return i}function Bi(e){var t=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],r=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],n=!1,i=0,o=0,s=0,a=e,l,u,c,f;if(e>171.6243769536076)return 1/0;if(a<=0)if(f=a%1+36e-17,f)n=(a&1?-1:1)*Math.PI/Math.sin(Math.PI*f),a=1-a;else return 1/0;for(c=a,a<1?u=a++:u=(a-=i=(a|0)-1)-1,l=0;l<8;++l)s=(s+t[l])*u,o=o*u+r[l];if(f=s/o+1,c<a)f/=c;else if(c>a)for(l=0;l<i;++l)f*=a,a++;return n&&(f=n/f),f}function Xie(e,t){return th(e,t)*Bi(e)}function th(e,t){var r=Ge(e),n=e,i=1/e,o=i,s=t+1-e,a=1/1e-30,l=1/s,u=l,c=1,f=-~(Math.log(e>=1?e:1/e)*8.5+e*.4+17),h;if(t<0||e<=0)return NaN;if(t<e+1){for(;c<=f;c++)i+=o*=t/++n;return i*Math.exp(-t+e*Math.log(t)-r)}for(;c<=f;c++)h=-c*(c-e),s+=2,l=h*l+s,a=s+h/a,l=1/l,u*=l*a;return 1-u*Math.exp(-t+e*Math.log(t)-r)}function _m(e){return e<0?NaN:Ge(e+1)}function eu(e){return e<0?NaN:Bi(e+1)}function wC(e,t){return e>170||t>170?Math.exp(HW(e,t)):eu(e)/eu(t)/eu(e-t)}function HW(e,t){return _m(e)-_m(t)-_m(e-t)}function Yie(e,t){return eu(e)/eu(e-t)}function ly(e,t){if(!(e<=0||t<=0))return e+t>170?Math.exp(SC(e,t)):Bi(e)*Bi(t)/Bi(e+t)}function SC(e,t){return Ge(e)+Ge(t)-Ge(e+t)}function QT(e,t,r){var n=1e-30,i=1,o=t+r,s=t+1,a=t-1,l=1,u=1-o*e/s,c,f,h,d;for(Math.abs(u)<n&&(u=n),u=1/u,d=u;i<=100&&(c=2*i,f=i*(r-i)*e/((a+c)*(t+c)),u=1+f*u,Math.abs(u)<n&&(u=n),l=1+f/l,Math.abs(l)<n&&(l=n),u=1/u,d*=u*l,f=-(t+i)*(o+i)*e/((t+c)*(s+c)),u=1+f*u,Math.abs(u)<n&&(u=n),l=1+f/l,Math.abs(l)<n&&(l=n),u=1/u,h=u*l,d*=h,!(Math.abs(h-1)<3e-7));i++);return d}function uy(e,t){var r=0,n=t-1,i=1e-8,o=Ge(t),s,a,l,u,c,f,h;if(e>=1)return Math.max(100,t+100*Math.sqrt(t));if(e<=0)return 0;for(t>1?(f=Math.log(n),h=Math.exp(n*(f-1)-o),c=e<.5?e:1-e,l=Math.sqrt(-2*Math.log(c)),s=(2.30753+l*.27061)/(1+l*(.99229+l*.04481))-l,e<.5&&(s=-s),s=Math.max(.001,t*Math.pow(1-1/(9*t)-s/(3*Math.sqrt(t)),3))):(l=1-t*(.253+t*.12),e<l?s=Math.pow(e/l,1/t):s=1-Math.log(1-(e-l)/(1-l)));r<12;r++){if(s<=0)return 0;if(a=th(t,s)-e,t>1?l=h*Math.exp(-(s-n)+n*(Math.log(s)-f)):l=Math.exp(-s+n*Math.log(s)-o),u=a/l,s-=l=u/(1-.5*Math.min(1,u*((t-1)/s-1))),s<=0&&(s=.5*(s+l)),Math.abs(l)<i*s)break}return s}function cy(e){var t=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,15626441722e-18,-85238095915e-18,6529054439e-18,5059343495e-18,-991364156e-18,-227365122e-18,96467911e-18,2394038e-18,-6886027e-18,894487e-18,313092e-18,-112708e-18,381e-18,7106e-18,-1523e-18,-94e-18,121e-18,-28e-18],r=t.length-1,n=!1,i=0,o=0,s,a,l,u;for(e<0&&(e=-e,n=!0),s=2/(2+e),a=4*s-2;r>0;r--)l=i,i=a*i-o+t[r],o=l;return u=s*Math.exp(-e*e+.5*(t[0]+a*i)-o),n?u-1:1-u}function XW(e){return 1-cy(e)}function TC(e){var t=0,r,n,i,o;if(e>=2)return-100;if(e<=0)return 100;for(o=e<1?e:2-e,i=Math.sqrt(-2*Math.log(o/2)),r=-.70711*((2.30753+i*.27061)/(1+i*(.99229+i*.04481))-i);t<2;t++)n=XW(r)-o,r+=n/(1.1283791670955126*Math.exp(-r*r)-r*n);return e<1?r:-r}function f0(e,t,r){var n=1e-8,i=t-1,o=r-1,s=0,a,l,u,c,f,h,d,p,v,m,g;if(e<=0)return 0;if(e>=1)return 1;for(t>=1&&r>=1?(u=e<.5?e:1-e,c=Math.sqrt(-2*Math.log(u)),d=(2.30753+c*.27061)/(1+c*(.99229+c*.04481))-c,e<.5&&(d=-d),p=(d*d-3)/6,v=2/(1/(2*t-1)+1/(2*r-1)),m=d*Math.sqrt(p+v)/v-(1/(2*r-1)-1/(2*t-1))*(p+5/6-2/(3*v)),d=t/(t+r*Math.exp(2*m))):(a=Math.log(t/(t+r)),l=Math.log(r/(t+r)),c=Math.exp(t*a)/t,f=Math.exp(r*l)/r,m=c+f,e<c/m?d=Math.pow(t*m*e,1/t):d=1-Math.pow(r*m*(1-e),1/r)),g=-Ge(t)-Ge(r)+Ge(t+r);s<10;s++){if(d===0||d===1)return d;if(h=h0(d,t,r)-e,c=Math.exp(i*Math.log(d)+o*Math.log(1-d)+g),f=h/c,d-=c=f/(1-.5*Math.min(1,f*(i/d-o/(1-d)))),d<=0&&(d=.5*(d+c)),d>=1&&(d=.5*(d+c+1)),Math.abs(c)<n*d&&s>0)break}return d}function h0(e,t,r){var n=e===0||e===1?0:Math.exp(Ge(t+r)-Ge(t)-Ge(r)+t*Math.log(e)+r*Math.log(1-e));return e<0||e>1?!1:e<(t+1)/(t+r+2)?n*QT(e,t,r)/t:1-n*QT(1-e,r,t)/r}function $u(e,t){var r,n,i,o,s;if(t||(t=e),e)return Jf(e,t,function(){return $u()});do r=fi(),n=1.7156*(fi()-.5),i=r-.449871,o=Math.abs(n)+.386595,s=i*i+o*(.196*o-.25472*i);while(s>.27597&&(s>.27846||n*n>-4*Math.log(r)*r*r));return n/r}function Fo(e,t,r){var n=e,i,o,s,a,l,u;if(r||(r=t),e||(e=1),t)return u=Vo(t,r),u.alter(function(){return Fo(e)}),u;e<1&&(e+=1),i=e-1/3,o=1/Math.sqrt(9*i);do{do l=$u(),a=1+o*l;while(a<=0);a=a*a*a,s=fi()}while(s>1-.331*Math.pow(l,4)&&Math.log(s)>.5*l*l+i*(1-a+Math.log(a)));if(e==n)return i*a;do s=fi();while(s===0);return Math.pow(s,1/n)*i*a}const qie=Object.freeze(Object.defineProperty({__proto__:null,gammaln:Ge,loggam:GW,gammafn:Bi,gammap:Xie,lowRegGamma:th,factorialln:_m,factorial:eu,combination:wC,combinationln:HW,permutation:Yie,betafn:ly,betaln:SC,betacf:QT,gammapinv:uy,erf:cy,erfc:XW,erfcinv:TC,ibetainv:f0,ibeta:h0,randn:$u,randg:Fo},Symbol.toStringTag,{value:"Module"}));function Zie(e,t,r){return e>1||e<0?0:t==1&&r==1?1:t<512&&r<512?Math.pow(e,t-1)*Math.pow(1-e,r-1)/ly(t,r):Math.exp((t-1)*Math.log(e)+(r-1)*Math.log(1-e)-SC(t,r))}function C1(e,t,r){return e>1||e<0?(e>1)*1:h0(e,t,r)}function Kie(e,t,r){return f0(e,t,r)}function Jie(e,t){return e/(e+t)}function Qie(e,t){return f0(.5,e,t)}function toe(e,t){return(e-1)/(e+t-2)}function eoe(e,t){var r=Fo(e);return r/(r+Fo(t))}function roe(e,t){return e*t/(Math.pow(e+t,2)*(e+t+1))}const noe=Object.freeze(Object.defineProperty({__proto__:null,pdf:Zie,cdf:C1,inv:Kie,mean:Jie,median:Qie,mode:toe,sample:eoe,variance:roe},Symbol.toStringTag,{value:"Module"}));function vD(e,t,r,n){for(var i=0,o=1,s=1,a=1,l=0,u=0,c;Math.abs((s-u)/s)>n;)u=s,c=-(t+l)*(t+r+l)*e/(t+2*l)/(t+2*l+1),i=s+c*i,o=a+c*o,l=l+1,c=l*(r-l)*e/(t+2*l-1)/(t+2*l),s=i+c*s,a=o+c*a,i=i/a,o=o/a,s=s/a,a=1;return s/t}function YW(e,t,r){return r===0||r===1?t*r===e?1:0:wC(t,e)*Math.pow(r,e)*Math.pow(1-r,t-e)}function ioe(e,t,r){var n,i=1e-10;if(e<0)return 0;if(e>=t)return 1;if(r<0||r>1||t<=0)return NaN;e=Math.floor(e);var o=r,s=e+1,a=t-e,l=s+a,u=Math.exp(Ge(l)-Ge(a)-Ge(s)+s*Math.log(o)+a*Math.log(1-o));return o<(s+1)/(l+2)?n=u*vD(o,s,a,i):n=1-u*vD(1-o,a,s,i),Math.round((1-n)*(1/i))/(1/i)}const ooe=Object.freeze(Object.defineProperty({__proto__:null,pdf:YW,cdf:ioe},Symbol.toStringTag,{value:"Module"}));function soe(e,t,r){return r<0?0:r/(Math.pow(e-t,2)+Math.pow(r,2))/Math.PI}function aoe(e,t,r){return Math.atan((e-t)/r)/Math.PI+.5}function loe(e,t,r){return t+r*Math.tan(Math.PI*(e-.5))}function uoe(e){return e}function coe(e){return e}function foe(e,t){return $u()*Math.sqrt(1/(2*randg(.5)))*t+e}const hoe=Object.freeze(Object.defineProperty({__proto__:null,pdf:soe,cdf:aoe,inv:loe,median:uoe,mode:coe,sample:foe},Symbol.toStringTag,{value:"Module"}));function doe(e,t,r){var n,i,o;return e<0?0:t<=2?e===0&&t<2?1/0:e===0&&t===2?1:1/ly(t/2,r/2)*Math.pow(t/r,t/2)*Math.pow(e,t/2-1)*Math.pow(1+t/r*e,-(t+r)/2):(n=t*e/(r+e*t),i=r/(r+e*t),o=t*i/2,o*YW((t-2)/2,(t+r-2)/2,n))}function A1(e,t,r){return e<0?0:h0(t*e/(t*e+r),t/2,r/2)}function poe(e,t,r){return r/(t*(1/f0(e,t/2,r/2)-1))}function voe(e,t){return t>2?t/(t-2):void 0}function goe(e,t){return e>2?t*(e-2)/(e*(t+2)):void 0}function moe(e,t){var r=Fo(e/2)*2,n=Fo(t/2)*2;return r/e/(n/t)}function _oe(e,t){if(!(t<=4))return 2*t*t*(e+t-2)/(e*(t-2)*(t-2)*(t-4))}const yoe=Object.freeze(Object.defineProperty({__proto__:null,pdf:doe,cdf:A1,inv:poe,mean:voe,mode:goe,sample:moe,variance:_oe},Symbol.toStringTag,{value:"Module"}));function boe(e,t){return e<0?0:e===0&&t===2?.5:Math.exp((t/2-1)*Math.log(e)-e/2-t/2*Math.log(2)-Ge(t/2))}function woe(e,t){return e<0?0:th(t/2,e/2)}function Soe(e,t){return 2*uy(e,.5*t)}function Toe(e){return e}function koe(e){return e*Math.pow(1-2/(9*e),3)}function Poe(e){return e-2>0?e-2:0}function Eoe(e){return Fo(e/2)*2}function Coe(e){return 2*e}const Aoe=Object.freeze(Object.defineProperty({__proto__:null,pdf:boe,cdf:woe,inv:Soe,mean:Toe,median:koe,mode:Poe,sample:Eoe,variance:Coe},Symbol.toStringTag,{value:"Module"}));function Moe(e,t){return e<0?0:t*Math.exp(-t*e)}function xoe(e,t){return e<0?0:1-Math.exp(-t*e)}function Loe(e,t){return-Math.log(1-e)/t}function Ioe(e){return 1/e}function Ooe(e){return 1/e*Math.log(2)}function Roe(){return 0}function Doe(e){return-1/e*Math.log(fi())}function Noe(e){return Math.pow(e,-2)}const Foe=Object.freeze(Object.defineProperty({__proto__:null,pdf:Moe,cdf:xoe,inv:Loe,mean:Ioe,median:Ooe,mode:Roe,sample:Doe,variance:Noe},Symbol.toStringTag,{value:"Module"}));function zoe(e,t,r){return e<0?0:e===0&&t===1?1/r:Math.exp((t-1)*Math.log(e)-e/r-Ge(t)-t*Math.log(r))}function Boe(e,t,r){return e<0?0:th(t,e/r)}function $oe(e,t,r){return uy(e,t)*r}function Voe(e,t){return e*t}function Uoe(e,t){if(e>1)return(e-1)*t}function Woe(e,t){return Fo(e)*t}function joe(e,t){return e*t*t}const Goe=Object.freeze(Object.defineProperty({__proto__:null,pdf:zoe,cdf:Boe,inv:$oe,mean:Voe,mode:Uoe,sample:Woe,variance:joe},Symbol.toStringTag,{value:"Module"}));function gd(e,t,r,n){if(e!==e|0)return!1;if(e<0||e<r-(t-n))return 0;if(e>n||e>r)return 0;if(r*2>t)return n*2>t?gd(t-r-n+e,t,t-r,t-n):gd(n-e,t,t-r,n);if(n*2>t)return gd(r-e,t,r,t-n);if(r<n)return gd(e,t,n,r);for(var i=1,o=0,s=0;s<e;s++){for(;i>1&&o<n;)i*=1-r/(t-o),o++;i*=(n-s)*(r-s)/((s+1)*(t-r-n+s+1))}for(;o<n;o++)i*=1-r/(t-o);return Math.min(1,Math.max(0,i))}function md(e,t,r,n){if(e<0||e<r-(t-n))return 0;if(e>=n||e>=r)return 1;if(r*2>t)return n*2>t?md(t-r-n+e,t,t-r,t-n):1-md(n-e-1,t,t-r,n);if(n*2>t)return 1-md(r-e-1,t,r,t-n);if(r<n)return md(e,t,n,r);for(var i=1,o=1,s=0,a=0;a<e;a++){for(;i>1&&s<n;){var l=1-r/(t-s);o*=l,i*=l,s++}o*=(n-a)*(r-a)/((a+1)*(t-r-n+a+1)),i+=o}for(;s<n;s++)i*=1-r/(t-s);return Math.min(1,Math.max(0,i))}const Hoe=Object.freeze(Object.defineProperty({__proto__:null,pdf:gd,cdf:md},Symbol.toStringTag,{value:"Module"}));function Xoe(e,t,r){return e<=0?0:Math.exp(-(t+1)*Math.log(e)-r/e-Ge(t)+t*Math.log(r))}function Yoe(e,t,r){return e<=0?0:1-th(t,r/e)}function qoe(e,t,r){return r/uy(1-e,t)}function Zoe(e,t){return e>1?t/(e-1):void 0}function Koe(e,t){return t/(e+1)}function Joe(e,t){return t/Fo(e)}function Qoe(e,t){if(!(e<=2))return t*t/((e-1)*(e-1)*(e-2))}const tse=Object.freeze(Object.defineProperty({__proto__:null,pdf:Xoe,cdf:Yoe,inv:qoe,mean:Zoe,mode:Koe,sample:Joe,variance:Qoe},Symbol.toStringTag,{value:"Module"}));function ese(e,t,r){return e===0&&t===1?r:e===1&&r===1?t:Math.exp(Math.log(t)+Math.log(r)+(t-1)*Math.log(e)+(r-1)*Math.log(1-Math.pow(e,t)))}function rse(e,t,r){return e<0?0:e>1?1:1-Math.pow(1-Math.pow(e,t),r)}function nse(e,t,r){return Math.pow(1-Math.pow(1-e,1/r),1/t)}function ise(e,t){return t*Bi(1+1/e)*Bi(t)/Bi(1+1/e+t)}function ose(e,t){return Math.pow(1-Math.pow(2,-1/t),1/e)}function sse(e,t){if(e>=1&&t>=1&&e!==1&&t!==1)return Math.pow((e-1)/(e*t-1),1/e)}function ase(){throw new Error("variance not yet implemented")}const lse=Object.freeze(Object.defineProperty({__proto__:null,pdf:ese,cdf:rse,inv:nse,mean:ise,median:ose,mode:sse,variance:ase},Symbol.toStringTag,{value:"Module"}));function use(e){return e/Math.abs(e)}function cse(e,t,r){return r<=0?0:Math.exp(-Math.abs(e-t)/r)/(2*r)}function fse(e,t,r){return r<=0?0:e<t?.5*Math.exp((e-t)/r):1-.5*Math.exp(-(e-t)/r)}function hse(e){return e}function dse(e){return e}function pse(e){return e}function vse(e,t){return 2*t*t}function gse(e,t){var r=fi()-.5;return e-t*use(r)*Math.log(1-2*Math.abs(r))}const mse=Object.freeze(Object.defineProperty({__proto__:null,pdf:cse,cdf:fse,mean:hse,median:dse,mode:pse,variance:vse,sample:gse},Symbol.toStringTag,{value:"Module"}));function _se(e,t,r){return e<=0?0:Math.exp(-Math.log(e)-.5*Math.log(2*Math.PI)-Math.log(r)-Math.pow(Math.log(e)-t,2)/(2*r*r))}function yse(e,t,r){return e<0?0:.5+.5*cy((Math.log(e)-t)/Math.sqrt(2*r*r))}function bse(e,t,r){return Math.exp(-1.4142135623730951*r*TC(2*e)+t)}function wse(e,t){return Math.exp(e+t*t/2)}function Sse(e){return Math.exp(e)}function Tse(e,t){return Math.exp(e-t*t)}function kse(e,t){return Math.exp($u()*t+e)}function Pse(e,t){return(Math.exp(t*t)-1)*Math.exp(2*e+t*t)}const Ese=Object.freeze(Object.defineProperty({__proto__:null,pdf:_se,cdf:yse,inv:bse,mean:wse,median:Sse,mode:Tse,sample:kse,variance:Pse},Symbol.toStringTag,{value:"Module"}));function qW(e,t,r){return e!==e>>>0?!1:e<0?0:wC(e+t-1,t-1)*Math.pow(1-r,e)*Math.pow(r,t)}function Cse(e,t,r){var n=0,i=0;if(e<0)return 0;for(;i<=e;i++)n+=qW(i,t,r);return n}const Ase=Object.freeze(Object.defineProperty({__proto__:null,pdf:qW,cdf:Cse},Symbol.toStringTag,{value:"Module"}));function ZW(e,t){return t=t>1e100?1e100:t,1/(Math.sqrt(t)*ly(.5,t/2))*Math.pow(1+e*e/t,-((t+1)/2))}function os(e,t){var r=t/2;return h0((e+Math.sqrt(e*e+t))/(2*Math.sqrt(e*e+t)),r,r)}function M1(e,t){var r=f0(2*Math.min(e,1-e),.5*t,.5);return r=Math.sqrt(t*(1-r)/r),e>.5?r:-r}function Mse(e){return e>1?0:void 0}function xse(){return 0}function Lse(){return 0}function Ise(e){return $u()*Math.sqrt(e/(2*Fo(e/2)))}function Ose(e){return e>2?e/(e-2):e>1?1/0:void 0}const Rse=Object.freeze(Object.defineProperty({__proto__:null,pdf:ZW,cdf:os,inv:M1,mean:Mse,median:xse,mode:Lse,sample:Ise,variance:Ose},Symbol.toStringTag,{value:"Module"}));function Dse(e,t,r){return Math.exp(-.5*Math.log(2*Math.PI)-Math.log(r)-Math.pow(e-t,2)/(2*r*r))}function Ci(e,t,r){return .5*(1+cy((e-t)/Math.sqrt(2*r*r)))}function ek(e,t,r){return-1.4142135623730951*r*TC(2*e)+t}function Nse(e){return e}function Fse(e){return e}function zse(e){return e}function Bse(e,t){return $u()*t+e}function $se(e,t){return t*t}const Vse=Object.freeze(Object.defineProperty({__proto__:null,pdf:Dse,cdf:Ci,inv:ek,mean:Nse,median:Fse,mode:zse,sample:Bse,variance:$se},Symbol.toStringTag,{value:"Module"}));function Use(e,t,r){var n=1e-14;return Math.abs(r)<n?ZW(e,t):Math.abs(e)<n?Math.exp(Ge((t+1)/2)-r*r/2-.5*Math.log(Math.PI*t)-Ge(t/2)):t/e*(rk(e*Math.sqrt(1+2/t),t+2,r)-rk(e,t,r))}function rk(e,t,r){var n=1e-14,i=200;if(Math.abs(r)<n)return os(e,t);var o=!1;e<0&&(o=!0,r=-r);for(var s=Ci(-r,0,1),a=n+1,l=a,u=e*e/(e*e+t),c=0,f=Math.exp(-r*r/2),h=Math.exp(-r*r/2-.5*Math.log(2)-Ge(3/2))*r;c<i||l>n||a>n;)l=a,c>0&&(f*=r*r/(2*c),h*=r*r/(2*(c+1/2))),a=f*C1(u,c+.5,t/2)+h*C1(u,c+1,t/2),s+=.5*a,c++;return o?1-s:s}const Wse=Object.freeze(Object.defineProperty({__proto__:null,pdf:Use,cdf:rk},Symbol.toStringTag,{value:"Module"}));function jse(e,t,r){return e<t?0:r*Math.pow(t,r)/Math.pow(e,r+1)}function Gse(e,t,r){return e<t?0:1-Math.pow(t/e,r)}function Hse(e,t,r){return t/Math.pow(1-e,1/r)}function Xse(e,t){if(!(t<=1))return t*Math.pow(e,t)/(t-1)}function Yse(e,t){return e*(t*Math.SQRT2)}function qse(e){return e}function Zse(e,t){if(!(t<=2))return e*e*t/(Math.pow(t-1,2)*(t-2))}const Kse=Object.freeze(Object.defineProperty({__proto__:null,pdf:jse,cdf:Gse,inv:Hse,mean:Xse,median:Yse,mode:qse,variance:Zse},Symbol.toStringTag,{value:"Module"}));function ut(...e){return new ut._init(...e)}ut._init=function(...e){if(No(e[0]))if(No(e[0][0])){Np(e[1])&&(e[0]=ln(e[0],e[1]));for(let t=0;t<e[0].length;t++)this[t]=e[0][t];this.length=e[0].length}else this[0]=Np(e[1])?ln(e[0],e[1]):e[0],this.length=1;else if(Lr(e[0]))this[0]=FW.apply(null,e),this.length=1;else{if(e[0]instanceof ut)return ut(e[0].toArray());this[0]=[],this.length=1}return this};ut._init.prototype=ut.prototype;ut._init.constructor=ut;ut.setRandom=IW;const Sn=ut.prototype;Sn.length=0;Sn.push=Array.prototype.push;Sn.sort=Array.prototype.sort;Sn.splice=Array.prototype.splice;Sn.slice=Array.prototype.slice;Sn.toArray=function(){return this.length>1?this.slice():this.slice()[0]};Sn.map=function(e,t){return ut(ln(this,e,t))};Sn.cumreduce=function(e,t){return ut(oy(this,e,t))};Sn.alter=function(e){return mC(this,e),this};"transpose clear symmetric rows cols dimensions diag antidiag".split(" ").forEach(e=>{Sn[e]=function(t){if(t)return t.call(this,Sn[e].call(this)),this;const r=ut[e](this);return Array.isArray(r)?ut(r):r}});"row col".split(" ").forEach(e=>{Sn[e]=function(t,r){return r?(r.call(this,Sn[e].call(this,t)),this):ut(ut[e](this,t))}});"create zeros ones rand identity".split(" ").forEach(e=>{Sn[e]=function(...t){return ut(ut[e](...t))}});function KW(e,t){return t<0||e%1!==0||e<0?0:Math.pow(t,e)*Math.exp(-t)/eu(e)}function Jse(e,t){var r=[],n=0;if(e<0)return 0;for(;n<=e;n++)r.push(KW(n,t));return un(r)}function Qse(e){return e}function tae(e){return e}function eae(e){var t=1,r=0,n=Math.exp(-e);do r++,t*=ut._random_fn();while(t>n);return r-1}function rae(e){var t=e,r,n,i,o,s,a,l,u,c,f;for(o=Math.sqrt(t),s=Math.log(t),l=.931+2.53*o,a=-.059+.02483*l,u=1.1239+1.1328/(l-3.4),c=.9277-3.6224/(l-2);;){if(n=Math.random()-.5,i=Math.random(),f=.5-Math.abs(n),r=Math.floor((2*a/f+l)*n+t+.43),f>=.07&&i<=c)return r;if(!(r<0||f<.013&&i>f)&&Math.log(i)+Math.log(u)-Math.log(a/(f*f)+l)<=-t+r*s-GW(r+1))return r}}function nae(e){return e<10?eae(e):rae(e)}const iae=Object.freeze(Object.defineProperty({__proto__:null,pdf:KW,cdf:Jse,mean:Qse,variance:tae,sample:nae},Symbol.toStringTag,{value:"Module"}));function oae(e,t,r,n){return r<=t||n<t||n>r?NaN:e<t||e>r?0:e<n?2*(e-t)/((r-t)*(n-t)):e===n?2/(r-t):2*(r-e)/((r-t)*(r-n))}function sae(e,t,r,n){return r<=t||n<t||n>r?NaN:e<=t?0:e>=r?1:e<=n?Math.pow(e-t,2)/((r-t)*(n-t)):1-Math.pow(r-e,2)/((r-t)*(r-n))}function aae(e,t,r,n){return r<=t||n<t||n>r?NaN:e<=(n-t)/(r-t)?t+(r-t)*Math.sqrt(e*((n-t)/(r-t))):t+(r-t)*(1-Math.sqrt((1-e)*(1-(n-t)/(r-t))))}function lae(e,t,r){return(e+t+r)/3}function uae(e,t,r){if(r<=(e+t)/2)return t-Math.sqrt((t-e)*(t-r))/Math.sqrt(2);if(r>(e+t)/2)return e+Math.sqrt((t-e)*(r-e))/Math.sqrt(2)}function cae(e,t,r){return r}function fae(e,t,r){var n=fi();return n<(r-e)/(t-e)?e+Math.sqrt(n*(t-e)*(r-e)):t-Math.sqrt((1-n)*(t-e)*(t-r))}function hae(e,t,r){return(e*e+t*t+r*r-e*t-e*r-t*r)/18}const dae=Object.freeze(Object.defineProperty({__proto__:null,pdf:oae,cdf:sae,inv:aae,mean:lae,median:uae,mode:cae,sample:fae,variance:hae},Symbol.toStringTag,{value:"Module"}));function gD(e,t,r){var n=12,i=6,o=-30,s=-50,a=60,l=8,u=3,c=2,f=3,h=[.9815606342467192,.9041172563704749,.7699026741943047,.5873179542866175,.3678314989981802,.1252334085114689],d=[.04717533638651183,.10693932599531843,.16007832854334622,.20316742672306592,.2334925365383548,.24914704581340277],p=e*.5;if(p>=l)return 1;var v=2*Ci(p,0,1)-1;v>=Math.exp(s/r)?v=Math.pow(v,r):v=0;var m;e>u?m=c:m=f;for(var g=p,_=(l-p)/m,b=g+_,w=0,T=r-1,S=1;S<=m;S++){for(var k=0,A=.5*(b+g),C=.5*(b-g),x=1;x<=n;x++){var I,N;i<x?(I=n-x+1,N=h[I-1]):(I=x,N=-h[I-1]);var B=C*N,V=A+B,F=V*V;if(F>a)break;var G=2*Ci(V,0,1),Z=2*Ci(V,e,1),q=G*.5-Z*.5;q>=Math.exp(o/T)&&(q=d[I-1]*Math.exp(-(.5*F))*Math.pow(q,T),k+=q)}k*=2*C*r/Math.sqrt(2*Math.PI),w+=k,g=b,b+=_}return v+=w,v<=Math.exp(o/t)?0:(v=Math.pow(v,t),v>=1?1:v)}function pae(e,t,r){var n=.322232421088,i=.099348462606,o=-1,s=.588581570495,a=-.342242088547,l=.531103462366,u=-.204231210125,c=.10353775285,f=-453642210148e-16,h=.0038560700634,d=.8832,p=.2368,v=1.214,m=1.208,g=1.4142,_=120,b=.5-.5*e,w=Math.sqrt(Math.log(1/(b*b))),T=w+((((w*f+u)*w+a)*w+o)*w+n)/((((w*h+c)*w+l)*w+s)*w+i);r<_&&(T+=(T*T*T+T)/r/4);var S=d-p*T;return r<_&&(S+=-v/r+m*T/r),T*(S*Math.log(t-1)+g)}function Hd(e,t,r){var n=1,i=t,o=16,s=8,a=-30,l=1e-14,u=100,c=800,f=5e3,h=25e3,d=1,p=.5,v=.25,m=.125,g=[.9894009349916499,.9445750230732326,.8656312023878318,.755404408355003,.6178762444026438,.45801677765722737,.2816035507792589,.09501250983763744],_=[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685];if(e<=0)return 0;if(r<2||n<1||i<2)return NaN;if(!Number.isFinite(e))return 1;if(r>h)return gD(e,n,i);var b=r*.5,w=b*Math.log(r)-r*Math.log(2)-Ge(b),T=b-1,S=r*.25,k;r<=u?k=d:r<=c?k=p:r<=f?k=v:k=m,w+=Math.log(k);for(var A=0,C=1;C<=50;C++){for(var x=0,I=(2*C-1)*k,N=1;N<=o;N++){var B,V;s<N?(B=N-s-1,V=w+T*Math.log(I+g[B]*k)-(g[B]*k+I)*S):(B=N-1,V=w+T*Math.log(I-g[B]*k)+(g[B]*k-I)*S);var F;if(V>=a){s<N?F=e*Math.sqrt((g[B]*k+I)*.5):F=e*Math.sqrt((-(g[B]*k)+I)*.5);var G=gD(F,n,i),Z=G*_[B]*Math.exp(V);x+=Z}}if(C*k>=1&&x<=l)break;A+=x}if(x>l)throw new Error("tukey.cdf failed to converge");return A>1&&(A=1),A}function vae(e,t,r){var n=1,i=t,o=1e-4,s=50;if(r<2||n<1||i<2)return NaN;if(e<0||e>1)return NaN;if(e===0)return 0;if(e===1)return 1/0;var a=pae(e,i,r),l=Hd(a,t,r)-e,u;l>0?u=Math.max(0,a-1):u=a+1;for(var c=Hd(u,t,r)-e,f,h=1;h<s;h++){f=u-c*(u-a)/(c-l),l=c,a=u,f<0&&(f=0,c=-e),c=Hd(f,t,r)-e,u=f;var d=Math.abs(u-a);if(d<o)return f}throw new Error("tukey.inv failed to converge")}const gae=Object.freeze(Object.defineProperty({__proto__:null,cdf:Hd,inv:vae},Symbol.toStringTag,{value:"Module"}));function mae(e,t,r){return e<0||t<0||r<0?0:r/t*Math.pow(e/t,r-1)*Math.exp(-Math.pow(e/t,r))}function _ae(e,t,r){return e<0?0:1-Math.exp(-Math.pow(e/t,r))}function yae(e,t,r){return t*Math.pow(-Math.log(1-e),1/r)}function JW(e,t){return e*Bi(1+1/t)}function bae(e,t){return e*Math.pow(Math.log(2),1/t)}function wae(e,t){return t<=1?0:e*Math.pow((t-1)/t,1/t)}function Sae(e,t){return e*Math.pow(-Math.log(fi()),1/t)}function Tae(e,t){return e*e*Bi(1+2/t)-Math.pow(JW(e,t),2)}const kae=Object.freeze(Object.defineProperty({__proto__:null,pdf:mae,cdf:_ae,inv:yae,mean:JW,median:bae,mode:wae,sample:Sae,variance:Tae},Symbol.toStringTag,{value:"Module"})),Pae=Object.freeze(Object.defineProperty({__proto__:null,arcsine:Hie,beta:noe,binomial:ooe,cauchy:hoe,centralF:yoe,chisquare:Aoe,exponential:Foe,gamma:Goe,hypgeom:Hoe,invgamma:tse,kumaraswamy:lse,laplace:mse,lognormal:Ese,negbin:Ase,noncentralt:Wse,normal:Vse,pareto:Kse,poisson:iae,studentt:Rse,triangular:dae,tukey:gae,uniform:Fie,weibull:kae},Symbol.toStringTag,{value:"Module"}));function nk(){const e=[...arguments];return Lr(e[1])?(e[0]-e[1])/e[2]:(e[0]-cr(e[1]))/Ps(e[1],e[2])}function kC(){const e=[...arguments];let t;return No(e[1])?(t=nk(e[0],e[1],e[3]),e[2]===1?Ci(-Math.abs(t),0,1):Ci(-Math.abs(t),0,1)*2):e.length>2?(t=nk(e[0],e[1],e[2]),e[3]===1?Ci(-Math.abs(t),0,1):Ci(-Math.abs(t),0,1)*2):(t=e[0],e[1]===1?Ci(-Math.abs(t),0,1):Ci(-Math.abs(t),0,1)*2)}function ik(){const e=[...arguments];return e.length===4?(e[0]-e[1])/(e[2]/Math.sqrt(e[3])):(e[0]-cr(e[1]))/(Ps(e[1],!0)/Math.sqrt(e[1].length))}function Eae(){const e=[...arguments];let t;return e.length===5?(t=Math.abs(ik(e[0],e[1],e[2],e[3])),e[4]===1?os(-t,e[3]-1):os(-t,e[3]-1)*2):Lr(e[1])?(t=Math.abs(e[0]),e[2]===1?os(-t,e[1]-1):os(-t,e[1]-1)*2):(t=Math.abs(ik(e[0],e[1])),e[2]===1?os(-t,e[1].length-1):os(-t,e[1].length-1)*2)}function Cae(){var e=[...arguments],t,r,n,i,o,s,a,l;if(e.length===1){for(o=new Array(e[0].length),a=0;a<e[0].length;a++)o[a]=e[0][a];e=o}for(r=[],a=0;a<e.length;a++)r=r.concat(e[a]);for(n=cr(r),t=0,a=0;a<e.length;a++)t=t+e[a].length*Math.pow(cr(e[a])-n,2);for(t/=e.length-1,s=0,a=0;a<e.length;a++)for(i=cr(e[a]),l=0;l<e[a].length;l++)s+=Math.pow(e[a][l]-i,2);return s/=r.length-e.length,t/s}function Aae(){var e=[...arguments],t,r,n,i;if(Lr(e[0]))return 1-A1(e[0],e[1],e[2]);var o=o(e);for(t=e.length-1,n=0,i=0;i<e.length;i++)n=n+e[i].length;return r=n-t-1,1-A1(o,t,r)}function Mae(e,t,r){return 1-A1(e,t,r)}function ok(){var e=[...arguments],t,r,n,i,o;return Lr(e[0])?(t=e[0],r=e[1],n=e[2],i=e[3],o=e[4]):(t=cr(e[0]),r=cr(e[1]),n=e[0].length,i=e[1].length,o=e[2]),Math.abs(t-r)/(o*Math.sqrt((1/n+1/i)/2))}function QW(){var e=[...arguments],t;e.length===3?(t=e[0],e=e.slice(1)):e.length===7?(t=ok(e[0],e[1],e[2],e[3],e[4]),e=e.slice(5)):(t=ok(e[0],e[1],e[2]),e=e.slice(3));var r=e[0],n=e[1];return 1-Hd(t,n,r-n)}function xae(e){for(var t=VW(e),r=e.map(l=>cr(l)),n=e.reduce((l,u)=>l+u.length,0),i=[],o=0;o<e.length;++o)for(var s=o+1;s<e.length;++s){var a=QW(r[o],r[s],e[o].length,e[s].length,t,n,e.length);i.push([[o,s],a])}return i}function Lae(){const e=[...arguments],t=new Array(2);let r;return e.length===4?r=Math.abs(ek(e[1]/2,0,1)*e[2]/Math.sqrt(e[3])):r=Math.abs(ek(e[1]/2,0,1)*Ps(e[2])/Math.sqrt(e[2].length)),t[0]=e[0]-r,t[1]=e[0]+r,t}function Iae(){const e=[...arguments],t=new Array(2);let r;return e.length===4?r=Math.abs(M1(e[1]/2,e[3]-1)*e[2]/Math.sqrt(e[3])):r=Math.abs(M1(e[1]/2,e[2].length-1)*Ps(e[2],!0)/Math.sqrt(e[2].length)),t[0]=e[0]-r,t[1]=e[0]+r,t}function Oae(e,t){return e<t}function tj(e,t,r,n){if(e>1||r>1||e<=0||r<=0)throw new Error("Proportions should be greater than 0 and less than 1");var i=(e*t+r*n)/(t+n),o=Math.sqrt(i*(1-i)*(1/t+1/n));return(e-r)/o}function Rae(e,t,r,n){const i=tj(e,t,r,n);return kC(i,1)}function Dae(e,t,r,n){const i=tj(e,t,r,n);return kC(i,2)}const Nae=Object.freeze(Object.defineProperty({__proto__:null,zscore:nk,ztest:kC,tscore:ik,ttest:Eae,anovafscore:Cae,anovaftest:Aae,ftest:Mae,qscore:ok,qtest:QW,tukeyhsd:xae,normalci:Lae,tci:Iae,significant:Oae,oneSidedDifferenceOfProportions:Rae,twoSidedDifferenceOfProportions:Dae},Symbol.toStringTag,{value:"Module"}));function ji(e){return No(e)||e.constructor.name==="jStat"}function _n(e,t){return ji(t)?(ji(t[0])||(t=[t]),ln(e,function(r,n,i){return r+t[n][i]})):ln(e,function(r){return r+t})}function yu(e,t){return ji(t)?(ji(t[0])||(t=[t]),ln(e,function(r,n,i){return r-t[n][i]||0})):ln(e,function(r){return r-t})}function sk(e,t){return ji(t)?(ji(t[0])||(t=[t]),ee(e,zo(t))):ln(e,function(r){return r/t})}function ee(e,t){let r,n;if(e.length===void 0&&t.length===void 0)return e*t;const i=e.length,o=e[0].length,s=Vo(i,r=ji(t)?t[0].length:o);let a=0;if(ji(t)){for(;a<r;a++)for(let l=0;l<i;l++){n=0;for(let u=0;u<o;u++)n+=e[l][u]*t[u][a];s[l][a]=n}return i===1&&a===1?s[0][0]:s}return ln(e,function(l){return l*t})}function Fae(e,t){return ee(e.map(r=>[r]),[t])}function x1(e,t){ji(e[0])||(e=[e]),ji(t[0])||(t=[t]);var r=e[0].length===1&&e.length!==1?Ea(e):e,n=t[0].length===1&&t.length!==1?Ea(t):t,i=[],o=r.length,s=r[0].length,a,l;for(let u=0;u<o;u++){for(i[u]=[],a=0,l=0;l<s;l++)a+=r[u][l]*n[u][l];i[u]=a}return i.length===1?i[0]:i}function ak(e,t){return ln(e,r=>Math.pow(r,t))}function zae(e){return ln(e,t=>Math.exp(t))}function Bae(e){return ln(e,t=>Math.log(t))}function $ae(e){return ln(e,t=>Math.abs(t))}function _f(e,t){var r=0,n=0;for(isNaN(t)&&(t=2),ji(e[0])&&(e=e[0]);n<e.length;n++)r+=Math.pow(Math.abs(e[n]),t);return Math.pow(r,1/t)}function Vae(e,t){return Math.acos(x1(e,t)/(_f(e)*_f(t)))}function PC(e,t){var r=[],n;for(n=0;n<e.length;n++)r.push(e[n].slice());for(n=0;n<r.length;n++)Array.prototype.push.apply(r[n],t[n]);return r}function zo(e){for(var t=e.length,r=e[0].length,n=_u(t,r),i=ej(e,n),o=[],s=0,a;s<t;s++)for(o[s]=[],a=r;a<i[0].length;a++)o[s][a-r]=i[s][a];return o}function Uae(e){var t=e.length,r=t*2,n=new Array(r),i=t-1,o=r-1,s=i-t+1,a=o,l=0,u=0,c;if(t===2)return e[0][0]*e[1][1]-e[0][1]*e[1][0];for(;l<r;l++)n[l]=1;for(l=0;l<t;l++){for(c=0;c<t;c++)n[s<0?s+t:s]*=e[l][c],n[a<t?a+t:a]*=e[l][c],s++,a--;s=--i-t+1,a=--o}for(l=0;l<t;l++)u+=n[l];for(;l<r;l++)u-=n[l];return u}function Wae(e,t){var r=0,n=0,i=e.length,o=e[0].length,s=1,a=0,l=[],u,c,f,h;for(e=PC(e,t),u=e[0].length,r=0;r<i;r++){for(c=e[r][r],n=r,h=r+1;h<o;h++)c<Math.abs(e[h][r])&&(c=e[h][r],n=h);if(n!=r)for(h=0;h<u;h++)f=e[r][h],e[r][h]=e[n][h],e[n][h]=f;for(n=r+1;n<i;n++)for(s=e[n][r]/e[r][r],h=r;h<u;h++)e[n][h]=e[n][h]-s*e[r][h]}for(r=i-1;r>=0;r--){for(a=0,n=r+1;n<=i-1;n++)a=a+l[n]*e[r][n];l[r]=(e[r][u-1]-a)/e[r][r]}return l}function ej(e,t){var r=PC(e,t),n=r.length,i=r[0].length,o=0,s,a,l;for(a=0;a<n;a++){var u=a;for(l=a+1;l<n;l++)Math.abs(r[l][a])>Math.abs(r[u][a])&&(u=l);var c=r[a];for(r[a]=r[u],r[u]=c,l=a+1;l<n;l++)for(o=r[l][a]/r[a][a],s=a;s<i;s++)r[l][s]-=r[a][s]*o}for(a=n-1;a>=0;a--){for(o=r[a][a],l=0;l<a;l++)for(s=i-1;s>a-1;s--)r[l][s]-=r[a][s]*r[l][a]/o;for(r[a][a]/=o,s=n;s<i;s++)r[a][s]/=o}return r}function jae(e,t){var r=e[0].length,n=Vo(1,r)[0],i,o=!1;return t[0].length!=null&&(t=t.map(function(s){return s[0]}),o=!0),Oe(r-1,-1,-1).forEach(function(s){i=Oe(s+1,r).map(function(a){return n[a]*e[s][a]}),n[s]=(t[s]-un(i))/e[s][s]}),o?n.map(function(s){return[s]}):n}function Gae(e,t){var r=e[0].length,n=Vo(1,r)[0],i,o=!1;return t[0].length!=null&&(t=t.map(function(s){return s[0]}),o=!0),Oe(r).forEach(function(s){i=Oe(s).map(function(a){return e[s][a]*n[a]}),n[s]=(t[s]-un(i))/e[s][s]}),o?n.map(function(s){return[s]}):n}function Hae(e){var t=e.length,r=_u(t),n=Vo(e.length,e[0].length),i;return Oe(t).forEach(function(o){n[0][o]=e[0][o]}),Oe(1,t).forEach(function(o){Oe(o).forEach(function(s){i=Oe(s).map(function(a){return r[o][a]*n[a][s]}),r[o][s]=(e[o][s]-un(i))/n[s][s]}),Oe(o,t).forEach(function(s){i=Oe(o).map(function(a){return r[o][a]*n[a][s]}),n[o][s]=e[i.length][s]-un(i)})}),[r,n]}function Xae(e){var t=e.length,r=Vo(e.length,e[0].length),n;return Oe(t).forEach(function(i){n=Oe(i).map(function(o){return Math.pow(r[i][o],2)}),r[i][i]=Math.sqrt(e[i][i]-un(n)),Oe(i+1,t).forEach(function(o){n=Oe(i).map(function(s){return r[i][s]*r[o][s]}),r[o][i]=(e[i][o]-un(n))/r[i][i]})}),r}function Yae(e,t,r,n){for(var i=0,o=0,s=e.length,a=[],l=[],u=[],c,f,h,d;i<s;i++)for(a[i]=[],l[i]=[],u[i]=[],o=0;o<s;o++)i>o?(a[i][o]=e[i][o],l[i][o]=u[i][o]=0):i<o?(l[i][o]=e[i][o],a[i][o]=u[i][o]=0):(u[i][o]=e[i][o],a[i][o]=l[i][o]=0);for(h=ee(ee(zo(u),_n(a,l)),-1),f=ee(zo(u),t),c=r,d=_n(ee(h,r),f),i=2;Math.abs(_f(yu(d,c)))>n;)c=d,d=_n(ee(h,c),f),i++;return d}function qae(e,t,r,n){for(var i=0,o=e.length,s=[],a=[],l=[],u,c,f,h,d;i<o;i++)for(s[i]=[],a[i]=[],l[i]=[],u=0;u<o;u++)i>u?(s[i][u]=e[i][u],a[i][u]=l[i][u]=0):i<u?(a[i][u]=e[i][u],s[i][u]=l[i][u]=0):(l[i][u]=e[i][u],s[i][u]=a[i][u]=0);for(h=ee(ee(zo(_n(l,s)),a),-1),f=ee(zo(_n(l,s)),t),c=r,d=_n(ee(h,r),f),i=2;Math.abs(_f(yu(d,c)))>n;)c=d,d=_n(ee(h,c),f),i=i+1;return d}function Zae(e,t,r,n,i){for(var o=0,s=e.length,a=[],l=[],u=[],c,f,h,d,p;o<s;o++)for(a[o]=[],l[o]=[],u[o]=[],c=0;c<s;c++)o>c?(a[o][c]=e[o][c],l[o][c]=u[o][c]=0):o<c?(l[o][c]=e[o][c],a[o][c]=u[o][c]=0):(u[o][c]=e[o][c],a[o][c]=l[o][c]=0);for(d=ee(zo(_n(u,ee(a,i))),yu(ee(u,1-i),ee(l,i))),h=ee(ee(zo(_n(u,ee(a,i))),t),i),f=r,p=_n(ee(d,r),h),o=2;Math.abs(_f(yu(p,f)))>n;)f=p,p=_n(ee(d,f),h),o++;return p}function Kae(e){for(var t=e.length,r=e[0].length,n=0,i=[],o=[],s,a,l,u,c;n<t-1;n++){for(s=0,u=n+1;u<r;u++)s+=e[u][n]*e[u][n];for(c=e[n+1][n]>0?-1:1,s=c*Math.sqrt(s),a=Math.sqrt((s*s-e[n+1][n]*s)/2),i=Vo(t,1),i[n+1][0]=(e[n+1][n]-s)/(2*a),l=n+2;l<t;l++)i[l][0]=e[l][n]/(2*a);o=yu(_u(t,r),ee(ee(i,Ea(i)),2)),e=ee(o,ee(e,o))}return e}function rj(e){var t=e.length,r=e[0].length,n=Vo(r,r);e=sy(e);var i,o,s;for(o=0;o<r;o++){for(n[o][o]=Math.sqrt(un(Oe(t).map(function(a){return e[a][o]*e[a][o]}))),i=0;i<t;i++)e[i][o]=e[i][o]/n[o][o];for(s=o+1;s<r;s++)for(n[o][s]=un(Oe(t).map(function(a){return e[a][o]*e[a][s]})),i=0;i<t;i++)e[i][s]=e[i][s]-e[i][o]*n[o][s]}return[e,n]}function Jae(e){e=sy(e);var t=e.length,r=_u(t);return Oe(t-1,-1,-1).forEach(function(n){vd(r,{row:n},sk(is(r,{row:n}),e[n][n])),vd(e,{row:n},sk(is(e,{row:n}),e[n][n])),Oe(n).forEach(function(i){var o=ee(e[i][n],-1),s=is(e,{row:i}),a=ee(is(e,{row:n}),o);vd(e,{row:i},_n(s,a));var l=is(r,{row:i}),u=ee(is(r,{row:n}),o);vd(r,{row:i},_n(l,u))})}),r}function nj(e,t){var r=!1;t[0].length===void 0&&(t=t.map(function(f){return[f]}),r=!0);var[n,i]=rj(e),o=e[0].length,s=is(n,{col:{end:o}}),a=is(i,{row:{end:o}}),l=Jae(a),u=Ea(s);u[0].length===void 0&&(u=[u]);var c=ee(ee(l,u),t);return c.length===void 0&&(c=[[c]]),r?c.map(function(f){return f[0]}):c}function ij(e){for(var t=1,r=e.length,n=_u(r,r),i=[],o,s,a,l,u,c,f,h;t===1;){for(c=e[0][1],l=0,u=1,s=0;s<r;s++)for(a=0;a<r;a++)s!=a&&c<Math.abs(e[s][a])&&(c=Math.abs(e[s][a]),l=s,u=a);for(e[l][l]===e[u][u]?f=e[l][u]>0?Math.PI/4:-Math.PI/4:f=Math.atan(2*e[l][u]/(e[l][l]-e[u][u]))/2,h=_u(r,r),h[l][l]=Math.cos(f),h[l][u]=-Math.sin(f),h[u][l]=Math.sin(f),h[u][u]=Math.cos(f),n=ee(n,h),o=ee(ee(zo(h),e),h),e=o,t=0,s=1;s<r;s++)for(a=1;a<r;a++)s!=a&&Math.abs(e[s][a])>.001&&(t=1)}for(s=0;s<r;s++)i.push(e[s][s]);return[n,i]}function Qae(e,t,r,n,i,o){var s,a,l,u,c;if(o===2)for(;n<=r;)s=t*e(n,i),a=t*e(n+t,i+s),l=i+(s+a)/2,i=l,n=n+t;if(o===4)for(;n<=r;)s=t*e(n,i),a=t*e(n+t/2,i+s/2),u=t*e(n+t/2,i+a/2),c=t*e(n+t,i+u),l=i+(s+2*a+2*u+c)/6,i=l,n=n+t;return i}function tle(e,t,r,n){for(var i=0,o=(r-t)/2,s=[],a=[],l=[],u,c,f,h,d;i<n/2;){for(d=e(t),f=t,h=0;f<=r;f=f+o,h++)s[h]=f;for(u=s.length,f=1;f<u-1;f++)d+=(f%2!==0?4:2)*e(s[f]);d=o/3*(d+e(r)),l[i]=d,o/=2,i++}for(c=l.length,u=1;c!==1;){for(f=0;f<c-1;f++)a[f]=(Math.pow(4,u)*l[f+1]-l[f])/(Math.pow(4,u)-1);c=a.length,l=a,a=[],u++}return l}function ele(e,t,r,n){function i(p,v){for(var m=0,g=p.length,_;m<g;m++)p[m]===v&&(_=m);return _}for(var o=Math.abs(r-e[i(e,r)+1]),s=0,a=[],l=[],u,c,f,h,d;n>=o;)u=i(e,r+n),c=i(e,r),a[s]=(t[u]-2*t[c]+t[2*c-u])/(n*n),n/=2,s++;for(h=a.length,f=1;h!=1;){for(d=0;d<h-1;d++)l[d]=(Math.pow(4,f)*a[d+1]-a[d])/(Math.pow(4,f)-1);h=l.length,a=l,l=[],f++}return a}function rle(e,t,r,n){for(var i=(r-t)/n,o=e(t),s=[],a=t,l=0,u=1,c;a<=r;a=a+i,l++)s[l]=a;for(c=s.length;u<c-1;u++)o+=(u%2!==0?4:2)*e(s[u]);return i/3*(o+e(r))}function nle(e,t,r,n){for(var i=e.length,o=0,s=0,a=[],l=[],u=[],c=[],f;s<i;s++){for(a[s]=1,f=0;f<i;f++)s!=f&&(a[s]*=(n-e[f])/(e[s]-e[f]));for(l[s]=0,f=0;f<i;f++)s!=f&&(l[s]+=1/(e[s]-e[f]));u[s]=(1-2*(n-e[s])*l[s])*(a[s]*a[s]),c[s]=(n-e[s])*(a[s]*a[s]),o+=u[s]*t[s]+c[s]*r[s]}return o}function ile(e,t,r){for(var n=0,i=0,o,s,a=e.length;i<a;i++){for(s=t[i],o=0;o<a;o++)i!=o&&(s*=(r-e[o])/(e[i]-e[o]));n+=s}return n}function ole(e,t,r){for(var n=e.length,i=0,o,s=[],a=[],l=[],u=[],c=[],f=[],h=[];i<n-1;i++)c[i]=e[i+1]-e[i];for(l[0]=0,i=1;i<n-1;i++)l[i]=3/c[i]*(t[i+1]-t[i])-3/c[i-1]*(t[i]-t[i-1]);for(i=1;i<n-1;i++)s[i]=[],a[i]=[],s[i][i-1]=c[i-1],s[i][i]=2*(c[i-1]+c[i]),s[i][i+1]=c[i],a[i][0]=l[i];for(u=ee(zo(s),a),o=0;o<n-1;o++)f[o]=(t[o+1]-t[o])/c[o]-c[o]*(u[o+1][0]+2*u[o][0])/3,h[o]=(u[o+1][0]-u[o][0])/(3*c[o]);for(o=0;o<n&&!(e[o]>r);o++);return o-=1,t[o]+(r-e[o])*f[o]+ak(r-e[o],2)*u[o]+(r-e[o])*ak(r-e[o],2)*h[o]}function sle(){throw new Error("gauss_quadrature not yet implemented")}function ale(e){var t=e.length,r=e[0].length,n=0,i,o,s=[],a=[],l=[],u=[],c=[],f=[],h=[],d=[],p=[],v=[];for(n=0;n<t;n++)s[n]=un(e[n])/r;for(n=0;n<r;n++)for(h[n]=[],i=0;i<t;i++)h[n][i]=e[i][n]-s[i];for(h=Ea(h),n=0;n<t;n++)for(d[n]=[],i=0;i<t;i++)d[n][i]=x1([h[n]],[h[i]])/(r-1);for(l=ij(d),p=l[0],a=l[1],v=Ea(p),n=0;n<a.length;n++)for(i=n;i<a.length;i++)a[n]<a[i]&&(o=a[n],a[n]=a[i],a[i]=o,u=v[n],v[n]=v[i],v[i]=u);for(f=Ea(h),n=0;n<t;n++)for(c[n]=[],i=0;i<f.length;i++)c[n][i]=x1([v[n]],[f[i]]);return[e,a,v,c]}const lle=Object.freeze(Object.defineProperty({__proto__:null,add:_n,subtract:yu,divide:sk,multiply:ee,outer:Fae,dot:x1,pow:ak,exp:zae,log:Bae,abs:$ae,norm:_f,angle:Vae,aug:PC,inv:zo,det:Uae,gauss_elimination:Wae,gauss_jordan:ej,triaUpSolve:jae,triaLowSolve:Gae,lu:Hae,cholesky:Xae,gauss_jacobi:Yae,gauss_seidel:qae,SOR:Zae,householder:Kae,QR:rj,lstsq:nj,jacobi:ij,rungekutta:Qae,romberg:tle,richardson:ele,simpson:rle,hermite:nle,lagrange:ile,cubic_spline:ole,gauss_quadrature:sle,PCA:ale},Symbol.toStringTag,{value:"Module"}));function ule(e){var t=e[0].length,r=Oe(t).map(function(n){var i=Oe(t).filter(function(o){return o!==n});return oj(E1(e,n).map(function(o){return o[0]}),E1(e,i))});return r}function oj(e,t){var r=e.length,n=t[0].length-1,i=r-n-1,o=nj(t,e),s=ee(t,o.map(function(d){return[d]})).map(function(d){return d[0]}),a=yu(e,s),l=cr(e),u=un(s.map(function(d){return Math.pow(d-l,2)})),c=un(e.map(function(d,p){return Math.pow(d-s[p],2)})),f=u+c,h=u/f;return{exog:t,endog:e,nobs:r,df_model:n,df_resid:i,coef:o,predict:s,resid:a,ybar:l,SST:f,SSE:u,SSR:c,R2:h}}function cle(e){var t=ule(e.exog),r=Math.sqrt(e.SSR/e.df_resid),n=t.map(function(l){var u=l.SST,c=l.R2;return r/Math.sqrt(u*(1-c))}),i=e.coef.map(function(l,u){return(l-0)/n[u]}),o=i.map(function(l){var u=os(l,e.df_resid);return(u>.5?1-u:u)*2}),s=M1(.975,e.df_resid),a=e.coef.map(function(l,u){var c=s*n[u];return[l-c,l+c]});return{se:n,t:i,p:o,sigmaHat:r,interval95:a}}function fle(e){var t=e.R2/e.df_model/((1-e.R2)/e.df_resid),r=function(i,o,s){return C1(i/(s/o+i),o/2,s/2)},n=1-r(t,e.df_model,e.df_resid);return{F_statistic:t,pvalue:n}}function hle(e,t){var r=oj(e,t),n=cle(r),i=fle(r),o=1-(1-r.R2)*((r.nobs-1)/r.df_resid);return r.t=n,r.f=i,r.adjust_R2=o,r}const dle={ols:hle},ple=Object.freeze(Object.defineProperty({__proto__:null,models:dle},Symbol.toStringTag,{value:"Module"}));Object.assign(ut,sie,Mie,Nae,lle,ple,qie);for(const[e,t]of Object.entries(Pae)){let r=function(...n){return this instanceof r?(this.givenArgs=n,this):new r(...n)};Object.assign(r,t),ut[e]=r,ut.prototype[e]=function(...n){const i=r(...n);return i.data=this,i},r.prototype.sample=function(n){const i=this.givenArgs;return n?ut.alter(n,()=>t.sample(...i)):t.sample(...i)},["pdf","cdf","inv"].forEach(n=>{r.prototype[n]=function(i){return!i&&i!==0&&(i=this.data),typeof i!="number"?ut.map(i,o=>t[n](o,...this.givenArgs)):t[n](i,...this.givenArgs)}}),["mean","median","mode","variance"].forEach(n=>{r.prototype[n]=function(){return t[n](...this.givenArgs)}})}"gammaln gammafn factorial factorialln".split(" ").forEach(function(e){ut.prototype[e]=function(){return ut(ut.map(this,function(t){return ut[e](t)}))}});ut.prototype.randn=function(){return ut(ut.randn.apply(null,arguments))};const EC=LW.isFunction;(function(e){for(var t=0;t<e.length;t++)(function(r){ut.prototype[r]=function(n,i){var o=[],s=0,a=this;if(EC(n)&&(i=n,n=!1),i)return setTimeout(function(){i.call(a,ut.prototype[r].call(a,n))}),this;if(this.length>1){for(a=n===!0?this:this.transpose();s<a.length;s++)o[s]=ut[r](a[s]);return o}return ut[r](this[0],n)}})(e[t])})("cumsum cumprod".split(" "));(function(e){for(var t=0;t<e.length;t++)(function(r){ut.prototype[r]=function(n,i){var o=[],s=0,a=this;if(EC(n)&&(i=n,n=!1),i)return setTimeout(function(){i.call(a,ut.prototype[r].call(a,n))}),this;if(this.length>1){for(r!=="sumrow"&&(a=n===!0?this:this.transpose());s<a.length;s++)o[s]=ut[r](a[s]);return n===!0?ut[r](ut.utils.toVector(o)):o}return ut[r](this[0],n)}})(e[t])})("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" "));(function(e){for(var t=0;t<e.length;t++)(function(r){ut.prototype[r]=function(){var n=[],i=0,o=this,s=Array.prototype.slice.call(arguments),a;if(EC(s[s.length-1])){a=s[s.length-1];var l=s.slice(0,s.length-1);return setTimeout(function(){a.call(o,ut.prototype[r].apply(o,l))}),this}else{a=void 0;var u=function(f){return ut[r].apply(o,[f].concat(s))}}if(this.length>1){for(o=o.transpose();i<o.length;i++)n[i]=u(o[i]);return n}return u(this[0])}})(e[t])})("quantiles percentileOfScore".split(" "));ut.prototype.zscore=function(t,r){return(t-this.mean())/this.stdev(r)};ut.prototype.ztest=function(t,r,n){const i=Math.abs(this.zscore(t,n));return r===1?ut.normal.cdf(-i,0,1):ut.normal.cdf(-i,0,1)*2};ut.prototype.tscore=function(t){return(t-this.mean())/(this.stdev(!0)/Math.sqrt(this.cols()))};ut.prototype.ttest=function(t,r){return r===1?1-ut.studentt.cdf(Math.abs(this.tscore(t)),this.cols()-1):ut.studentt.cdf(-Math.abs(this.tscore(t)),this.cols()-1)*2};ut.prototype.anovafscore=function(){return ut.anovafscore(this.toArray())};ut.prototype.anovaftes=function(){var t=0,r;for(r=0;r<this.length;r++)t=t+this[r].length;return ut.ftest(this.anovafscore(),this.length-1,t-this.length)};ut.prototype.oneSidedDifferenceOfProportions=function(){console.error("Please use jStat.oneSidedDifferenceOfProportions() instead")};ut.prototype.twoSidedDifferenceOfProportions=function(){console.error("Please use jStat.twoSidedDifferenceOfProportions() instead")};"add divide multiply subtract dot pow exp log abs norm angle".split(" ").forEach(e=>{ut.prototype[e]=function(t,r){const n=this;return r?(r.call(n,ut.prototype[e].call(n,t)),this):typeof ut[e](this,t)=="number"?ut[e](this,t):ut(ut[e](this,t))}});ut.jStat=ut;function vle(e,t,r,n){let i=[];for(let o=0;o<=r;o++){const s=.5+o,l=ut.uniform.pdf(s,e-n/2,e+n/2)*t;l<.01||i.push([o,l])}return i}function gle(e,t,r,n){let i=[];for(let o=0;o<=r;o++){const s=.5+o,l=ut.triangular.pdf(s,e-n,e+n,e)*t;i.push([o,l])}return i}function mle(e,t,r,n){let i=[];for(let o=0;o<=r;o++){const s=.5+o,l=ut.normal.pdf(s,e,n)*t;l<.01||i.push([o,l])}return i}function fy(e,t,r,n){if(n)return _le(e,t,r);const i=t;let o=[];for(let s=0;s<=r;s++){const a=ut.binomial.pdf(s,r,e/r);if(a<0)return null;const l=a*i;l<.01||o.push([s,l])}return o}function _le(e,t,r){const n=t;let i=[],o=0;for(let s=0;s<=r;s++){const a=ut.binomial.pdf(s,r,e/r);if(a<0)return null;const l=a*n;if(l<.01)continue;const u=Math.floor(s*1.684);if(o)for(let c=o;c<u;c++)i.push([c,0]);i.push([u,l]),o=u+1}return i}function yle(e,t,r,n,i,o){let s=[],a=0;for(let p=0;p<=i;p++){const v=ut.binomial.pdf(p,i,e/i);if(v<0){s=null;break}const m=v*t;if(m<.01)continue;const g=Math.floor(p*1.684);if(a)for(let _=a;_<g;_++)s.push([_,0]);s.push([g,m]),a=g+1}const l=n/t,u={};for(let p=0;p<=i;p++){const v=ut.binomial.pdf(p,i,r/i);if(v<0)throw Error(`invalid arguments for Stat.binomial.pdf: ${p}, ${i}, ${r/i}`);if(v*n<.01)continue;const g=o?Math.floor(p*1.684):p;s.forEach(_=>{const[b,w]=_,T=b+g,S=w*v*l;T in u?u[T]+=S:u[T]=S})}let c=99,f=0;for(const[p,v]of Object.entries(u)){if(v<.01)continue;const m=parseInt(p);m<c&&(c=m),m>f&&(f=m)}const h=[];for(let p=c;p<=f;p++)if(p in u){const v=u[p];h.push([p,v])}else h.push([p,0]);return{bellU:s,bellL:h}}function sj(e,t){let r={};if(e)for(let[o,s]of e)r[o]=s;for(let[o,s]of t)o in r?r[o]+=s:r[o]=s;let n=Object.entries(r).sort((o,s)=>o[0]-s[0]),i=[];for(let[o,s]of n)i.push([o,s]);return i}function hy(e,t,r,n,i){if(n)throw Error("not implemented");return ble(e,t,r,i)}function ble(e,t,r,n){let i,o,s;if(!Object.keys(e).length)return{mse:i,chisq:o,pval:s};i=0;for(const[p,[v,m]]of Object.entries(e)){const g=parseInt(v);if(n&&g==0)continue;const _=g in t?t[g]:0,b=m-_;i+=b*b}const a=3,l=r+2,u=Object.keys(e).sort((p,v)=>e[v][1]-e[p][1]);let c={},f=0;if(u.forEach(p=>{const v=e[p][0];if(n&&v=="0")return;const m=e[p][1],g=v in t?t[v]:0;(m>=a||g>=a||f<l)&&(c[v]={y_model:m,y_observed:g},f++)}),Object.keys(c).length==0)return console.log("can't compute chiSquared: only",c,"bins left after discard"),{mse:i,chisq:o,pval:s};let d=0;o=0;for(const[p,{y_model:v,y_observed:m}]of Object.entries(c)){const g=v-m;o+=g*g/v,d++}return d-1-r<1?(console.log("can't compute pval: bins",d,"variables",r),{mse:i,chisq:o,pval:s}):(isFinite(o)?s=1-ut.chisquare.cdf(o,d-1-r):s=0,{mse:i,chisq:o,pval:s})}function aj(e){e.forEach(t=>{t[0]=Math.floor(t[0]*1.684)})}yr([Ba,Lf,Cu,Au,Va,$a,Ua,Mu,Rf,Of,If,xu]);const wle={data:()=>({selected_np:1,selected_n:10,isBinary:!1}),props:{stats:Object,histogram:Object,isGiant:Boolean},components:{VChart:Wa},methods:{formatFixed:vt,isGoodVal:gn,formatKMG:H1,makeBinomialArray:fy,loss:hy,applyGiantBonus:aj,makeModelA(e,t){let r={np:e,n:t};if(r.bell=this.makeBinomialArray(e,this.stats.len,t,this.isGiant),!r.bell)return null;if(r.loss=this.loss(r.bell,this.histogram.map,2),this.isBinary=0 in r.bell&&1 in r.bell&&Object.keys(r.bell).length==2&&0 in this.histogram.map&&1 in this.histogram.map&&Object.keys(this.histogram.map).length==2,this.isBinary){const n=this.stats.lucky.len,i=r.bell[1][1],o=this.histogram.map[1],s=i/n;o<=n&&0<s&&s<1?(r.loss.binomtest=ny(o,Math.round(n),{p:s}),r.loss.pval=r.loss.binomtest.pValue,console.log("binomtest:",r.bell,this.histogram.map,o,n,s,r.loss.binomtest)):(console.log("can't binomtest",r.bell,this.histogram.map,o,n,s),r.loss.binomtest=NaN)}return r},tuneModelA(e,t,r){let n=[t];t===void 0&&(n=[1,10,20,40,110,120,140,150],n=n.filter(o=>o>=e&&o<=this.stats.max*5),r&&n.push(r));let i={n:NaN,loss:{mse:NaN,chisq:NaN,pval:NaN}};return n.forEach(o=>{const s=this.makeModelA(e,o);if(!s)return;gn(s.loss.mse)&&(!gn(i.loss.mse)||s.loss.mse<i.loss.mse)&&(i=s)}),i},applySelectedNP(e){e<0||(e>this.selected_n&&(this.selected_n=Math.ceil(e)),this.selected_np=e)},applySelectedN(e){e<0||(e<this.selected_np&&(this.selected_np=e),this.selected_n=e)}},computed:{modelA(){return this.makeModelA(this.selected_np,this.selected_n)},modelAForChart(){const e=this.stats.len,t=this.stats.generalSigmas,r=[];return this.modelA.bell.forEach(([n,i])=>{const o=i/e,s=t*Math.sqrt(o*(1-o)/e),a=Math.max(0,o-s)*e,l=Math.min(1,o+s)*e;r.push([n,i,a,l])}),r},sweepRange(){const e={lo:Math.max(0,this.stats.meanLo),init:this.stats.mean,hi:this.stats.meanHi};return this.isGiant&&(e.init>60?(e.lo/=1.684,e.init/=1.684,e.hi/=1.684):e.init>50?(e.lo/=1.684,e.init/=1.684,e.hi/=1.64):e.init>20?(e.lo/=1.684,e.init/=1.684,e.hi/=1.6):e.init>10?(e.lo/=1.684,e.init/=1.684,e.hi/=1.5):e.init>5?(e.lo/=1.684,e.init/=1.684,e.hi/=1.3):e.init>1&&(e.lo/=1.684,e.init/=1.684,e.hi/=1)),e.range=e.hi-e.lo,e},modelASweep(){const e=this.tuneModelA(this.sweepRange.init,void 0);let t=10;const r=[.002,.005,.01,.02,.05,.1,.2,.5,1,2,5];for(const s of r)if(Math.floor(this.sweepRange.range/s)<20){t=s;break}const n=Math.ceil(this.sweepRange.lo/t)*t;let i=e;const o=[];for(let s=n;s<=this.sweepRange.hi;s+=t){let a=this.tuneModelA(s,void 0);s>this.sweepRange.init&&s<this.sweepRange.init+t&&o.push([this.sweepRange.init,a.n,e.loss.mse,e.loss.chisq,e.loss.pval]),o.push([s,a.n,a.loss.mse,a.loss.chisq,a.loss.pval]),a.loss.mse<i.loss.mse&&(i=a)}return isFinite(i.loss.mse)&&(this.selected_np=i.np,this.selected_n=i.n),{result:i,log:o}},makeChartHist(){return{legend:null,tooltip:{trigger:"axis"},dataset:[{source:this.histogram.arr},{source:this.modelAForChart}],xAxis:{axisLine:{onZero:!1},min:this.stats.min==0?-1:null,max:this.stats.max<3?this.stats.max+1:null},yAxis:{axisLine:{onZero:!1},axisLabel:{formatter:t=>this.formatKMG(t)}},grid:{left:35,top:8,right:10,bottom:20},series:[{type:"bar",name:"observed",datasetIndex:0,encode:{x:0,y:1},tooltip:{valueFormatter:t=>vt(t,0)}},{type:"line",name:"model",datasetIndex:1,encode:{x:0,y:1},tooltip:{valueFormatter:t=>vt(t,0)},showSymbol:!1},{type:"line",name:`-${this.stats.generalSigmas}\u03C3`,datasetIndex:1,encode:{x:0,y:2},tooltip:{valueFormatter:t=>vt(t,0)},showSymbol:!1,lineStyle:{opacity:.4}},{type:"line",name:`+${this.stats.generalSigmas}\u03C3`,datasetIndex:1,encode:{x:0,y:3},tooltip:{valueFormatter:t=>vt(t,0)},showSymbol:!1,lineStyle:{opacity:.4}}]}},makeChartASweep(){const e={legend:{},tooltip:{trigger:"axis",formatter:function(t){const r=t[0].data;return`np=${vt(r[0],2)}<br/>n=${vt(r[1],2)}<br/>MSE=${r[2].toLocaleString(void 0,{notation:"compact"})}<br/>\u03C7\xB2=${r[3].toLocaleString(void 0,{notation:"compact"})}<br/>p-val=${vt(r[4],2)}<br/>`}},title:{subtext:"",left:"center",textStyle:{fontSize:10}},dataset:[{source:this.modelASweep.log}],xAxis:{min:this.sweepRange.lo,max:this.sweepRange.hi,name:"np",nameLocation:"center",nameGap:20,axisLine:{onZero:!1},axisLabel:{showMinLabel:!1}},yAxis:[{position:"left",axisLabel:{formatter:t=>t.toLocaleString(void 0,{notation:"compact"})},splitLine:{show:!1}},{position:"right",axisLabel:{formatter:t=>t.toLocaleString(void 0,{notation:"compact"})}}],grid:{left:35,top:30,right:40,bottom:20},series:[{name:"MSE",type:"line",encode:{x:0,y:2},tooltip:{valueFormatter:t=>vt(t,2)}},{name:"p-val",type:"line",encode:{x:0,y:4},tooltip:{valueFormatter:t=>vt(t,4)},yAxisIndex:1}]};return console.log("makeChartASweep",e.dataset),e}}},Rr=e=>(Ve("data-v-cd6f3e00"),e=e(),Ue(),e),Sle=Rr(()=>y("span",{class:"title"},"Model A",-1)),Tle=Rr(()=>y("span",null,[R(": all points were taken from a single distribution with "),y("i",null,"np = M")],-1)),kle=R(" with giant bonus"),Ple={key:0},Ele={style:{float:"left"}},Cle=R(" Sweeping through "),Ale=Rr(()=>y("i",null,"np",-1)),Mle={key:0,id:"chartSweep"},xle={key:1},Lle={style:{padding:"1em"}},Ile=Rr(()=>y("th",null,null,-1)),Ole=Rr(()=>y("th",null,"np",-1)),Rle=Rr(()=>y("th",null,"n",-1)),Dle=Rr(()=>y("th",null,"MSE",-1)),Nle=Rr(()=>y("th",null,"p-val",-1)),Fle=Rr(()=>y("td",null,"Best fit:",-1)),zle=Rr(()=>y("td",null,"Manual:",-1)),Ble=R(" np: "),$le=["value","min","max","step"],Vle=R(" n: "),Ule=["value","min"],Wle=Rr(()=>y("br",null,null,-1)),jle={id:"chartHisto",style:{float:"left"}},Gle=Rr(()=>y("div",{style:{clear:"both"}},null,-1)),Hle=Rr(()=>y("br",null,null,-1)),Xle=Rr(()=>y("p",{class:"fsxs"},[R("MSE: "),y("i",null,"\u03A3 (observed - model)\xB2"),R(", discard nothing \u2190 this is used for fitting")],-1)),Yle={key:0,class:"fsxs"},qle=R("p-val: "),Zle=Rr(()=>y("a",{href:"https://en.wikipedia.org/wiki/Binomial_test"},"exact",-1)),Kle=[qle,Zle],Jle=Rr(()=>y("p",{class:"fsxs"},[R("\u03C7\xB2: discard bins where model < 3, then "),y("i",null,"\u03A3 (observed - model)\xB2 / model")],-1)),Qle=Rr(()=>y("p",{class:"fsxs"},[R("p-val: "),y("i",null,"1 - chisquare.cdf(\u03C7\xB2, bins - 1 - dof) \u2190 this depends too much on previous step discards")],-1));function tue(e,t,r,n,i,o){const s=Ut("v-chart");return M(),L(j,null,[Sle,Tle,y("p",null,[ot(y("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=a=>r.isGiant=a)},null,512),[[Ke,r.isGiant]]),kle]),r.isGiant?(M(),L("p",Ple,"This causes gaps in Unlucky distrubution because giantValue=floor(1.684*ordinaryValue);")):Q("",!0),y("div",null,[y("div",Ele,[Cle,Ale,R(" values in "+E(o.formatFixed(this.sweepRange.lo,2))+"\u2026"+E(o.formatFixed(this.sweepRange.hi,2))+" range: ",1),o.modelASweep.result.np?(M(),L("div",Mle,[bt(s,{option:o.makeChartASweep},null,8,["option"])])):(M(),L("div",xle," [failed] ")),y("div",Lle,[y("table",null,[y("tr",null,[Ile,Ole,Rle,Dle,Q("",!0),Nle]),o.modelASweep.result?(M(),L("tr",{key:0,class:gr({strike:r.stats.aBad})},[Fle,y("td",null,E(o.formatFixed(o.modelASweep.result.np,4)),1),y("td",null,E(o.formatFixed(o.modelASweep.result.n)),1),y("td",null,E(o.formatFixed(o.modelASweep.result.loss.mse,2)),1),Q("",!0),y("td",null,E(o.formatFixed(o.modelASweep.result.loss.pval,4)),1)],2)):Q("",!0),y("tr",null,[zle,y("td",null,E(o.formatFixed(e.selected_np,4)),1),y("td",null,E(e.selected_n),1),y("td",null,E(o.formatFixed(o.modelA.loss.mse,2)),1),Q("",!0),y("td",null,E(o.formatFixed(o.modelA.loss.pval,4)),1)])]),Ble,y("input",{type:"range",onInput:t[1]||(t[1]=a=>o.applySelectedNP(Number(a.target.value))),value:e.selected_np,min:r.stats.min,max:r.stats.max,step:.01,class:"vmid"},null,40,$le),Vle,y("input",{type:"range",onInput:t[2]||(t[2]=a=>o.applySelectedN(Number(a.target.value))),value:e.selected_n,min:r.stats.max,max:200,step:1,class:"vmid"},null,40,Ule),Wle])]),y("div",jle,[o.modelA.bell?(M(),li(s,{key:0,option:o.makeChartHist},null,8,["option"])):(M(),L(j,{key:1},[R(" [failed to build the requested distribution np="+E(o.modelA.np)+" n="+E(o.modelA.n)+" ] ",1)],64))]),Gle,Hle,Xle,e.isBinary?(M(),L("p",Yle,Kle)):(M(),L(j,{key:1},[Jle,Qle],64))])],64)}const eue=ce(wle,[["render",tue],["__scopeId","data-v-cd6f3e00"]]);yr([Ba,Lf,Cu,Au,_ut,Va,$a,Ua,Mu,Rf,Of,If,xu]);const rue={data:()=>({selected_np:1,selected_n:10,sweep_lo:0,sweep_hi:1}),props:{stats:Object,histogram:Object},components:{VChart:Wa},methods:{isGoodVal:gn,formatFixed:vt,formatKMG:H1,makeBinomialArray:fy,loss:hy,makeModelB(e,t){const r=this.makeBinomialArray(e,this.stats.lucky.len,t);if(!r)return null;const n={np:e,n:t,bell:r},i=this.histogram.map,o=this.histogramLuckOnly.err[0][1],s=this.histogramLuckOnly.err[0][2];if(r[0]<o){const l={...i};l[0]=o,n.loss=this.loss(n.bell,l,2,!1)}else if(r[0]>s){const l={...i};l[0]=s,n.loss=this.loss(n.bell,l,2,!1)}else{const l={...i};delete l[0],n.loss=this.loss(n.bell,l,2,!1,!0)}if(0 in r&&1 in r&&Object.keys(r).length==2&&0 in i&&1 in i&&Object.keys(i).length==2){const l=this.stats.lucky.len,u=r[1][1],c=i[1],f=u/l;c<=l&&0<f&&f<1?(n.loss.binomtest=ny(c,Math.round(l),{p:f}),n.loss.pval=n.loss.binomtest.pValue,console.log("binomtest:",r,i,c,l,f,n.loss.binomtest)):(console.log("can't binomtest",r,i,c,l,f),n.loss.binomtest=NaN)}return n},tuneModelB(e,t){let r=[t];t===void 0&&(r=[10,20,40,110,120,140,150],r.push(this.stats.max),r=r.filter(i=>i<=this.stats.max*5));let n={np:0,n:1,loss:{mse:void 0,chisq:void 0,pval:void 0}};if(!this.histogramLuckOnly){console.log("tuneModelB skip");return}return r.forEach(i=>{const o=this.makeModelB(e,i);if(!o)return;gn(o.loss.mse)&&(!gn(n.loss.mse)||o.loss.mse<n.loss.mse)&&(n=o)}),n&&n.np>0&&n.np<=n.n?n:(console.log(`tuneModelB np=${e} -> failed`),null)},applySelectedNp(e){e<0||(e>this.selected_n&&(this.selected_n=Math.ceil(e)),this.selected_np=e)},applySelectedN(e){e<0||(e<this.selected_np&&(this.selected_np=e),this.selected_n=e)}},computed:{histogramLuckOnly(){const e={...this.histogram.map};e[0]=this.histogram.map[0]-this.stats.unlucky.len;const t=[],r=[];for(const[n,i]of Object.entries(e)){if(n==0){const o=this.histogram.map[0]-(this.stats.len-this.stats.lucky.lenHi),s=this.histogram.map[0]-(this.stats.len-this.stats.lucky.lenLo);r.push([n,s,o])}t.push([n,i])}return{map:e,arr:t,err:r}},zeroBinRange(){return{min:this.histogramLuckOnly.err[0][1],max:this.histogramLuckOnly.err[0][2]}},npRangeForBinary(){if(Object.keys(this.histogram.map).length==2&&1 in this.histogram.map){const e=this.histogram.map[1];return{min:e/(this.zeroBinRange.max+e),max:e/(this.zeroBinRange.min+e)}}},modelB(){const e=this.makeModelB(this.selected_np,this.selected_n);return console.log("modelB",e),e},modelBForChart(){const e=this.stats.len,t=this.stats.generalSigmas,r=[];return this.modelB.bell.forEach(([n,i])=>{const o=i/e,s=t*Math.sqrt(o*(1-o)/e),a=Math.max(0,o-s)*e,l=Math.min(1,o+s)*e;r.push([n,i,a,l])}),r},modelBSweep(){const e=Math.max(this.stats.meanLo/this.stats.lucky.share,0);if(e>8888888)return console.log("modelBSweep skip - no input",this.stats.meanLo,this.stats.lucky.share,this.stats.lucky.std),!1;this.sweep_lo=e,this.sweep_hi=this.stats.meanHi/this.stats.lucky.share;const t=this.sweep_hi-e;let r=10;const n=[.002,.005,.01,.02,.05,.1,.2,.5,1,2,5];for(const a of n)if(Math.floor(t/a)<40){r=a;break}if(Math.floor(t/r)>1e3)return!1;const i=Math.ceil(e/r)*r;let o={np:void 0,n:void 0,loss:{mse:1/0,chisq:1/0,pval:0}};const s=[];for(let a=i;a<=this.sweep_hi;a+=r){const l=this.tuneModelB(a,void 0);if(!l)continue;s.push([a,l.n,l.loss.mse,l.loss.chisq,l.loss.pval]),gn(l.loss.mse)&&(!gn(o.loss.mse)||l.loss.mse<o.loss.mse)&&(console.log("new best model",a,l),o=l)}return this.selected_np=o.np,this.selected_n=o.n,{result:o,log:s}},makeChartBSweep(){const e={legend:{},tooltip:{trigger:"axis",formatter:function(t){const r=t[0].data;return`np=${vt(r[0],2)}<br/>n=${vt(r[1])}<br/>MSE=${r[2].toLocaleString(void 0,{notation:"compact"})}<br/>\u03C7\xB2=${r[3].toLocaleString(void 0,{notation:"compact"})}<br/>p-val=${vt(r[4],2)}<br/>`}},title:{subtext:"",left:"center",textStyle:{fontSize:10}},dataset:[{source:this.modelBSweep.log}],xAxis:{min:this.sweep_lo,max:this.sweep_hi,name:"np",nameLocation:"center",nameGap:20,axisLine:{onZero:!1},axisLabel:{showMinLabel:!1}},yAxis:[{position:"left",axisLabel:{formatter:t=>this.formatKMG(t)},splitLine:{show:!1}},{position:"right"}],grid:{left:35,top:30,right:40,bottom:20},series:[{name:"MSE",type:"line",encode:{x:0,y:2},tooltip:{valueFormatter:t=>vt(t,2)}},{name:"p-val",type:"line",encode:{x:0,y:4},tooltip:{valueFormatter:t=>vt(t,4)},yAxisIndex:1}]};return console.log("makeChartBSweep",e.dataset),e},makeChartBHist(){return{legend:null,tooltip:{trigger:"axis"},dataset:[{source:this.histogramLuckOnly.arr},{source:this.histogramLuckOnly.err},{source:this.modelBForChart}],xAxis:{axisLine:{onZero:!1},min:-1,max:this.stats.max+1},yAxis:{axisLine:{onZero:!1},axisLabel:{formatter:t=>this.formatKMG(t)}},grid:{left:35,top:8,right:10,bottom:20},series:[{type:"bar",name:"observed",datasetIndex:0,encode:{x:0,y:1},tooltip:{valueFormatter:t=>vt(t,0)}},{type:"line",name:"model",datasetIndex:2,encode:{x:0,y:1},tooltip:{valueFormatter:t=>vt(t,3)},showSymbol:!1},{type:"line",name:`-${this.stats.generalSigmas}\u03C3`,datasetIndex:2,encode:{x:0,y:2},tooltip:{valueFormatter:t=>vt(t,0)},showSymbol:!1,lineStyle:{opacity:.4}},{type:"line",name:`+${this.stats.generalSigmas}\u03C3`,datasetIndex:2,encode:{x:0,y:3},tooltip:{valueFormatter:t=>vt(t,0)},showSymbol:!1,lineStyle:{opacity:.4}},{type:"custom",name:"observed-error",datasetIndex:1,encode:{x:0,y:[1,2]},itemStyle:{borderWidth:1.5},renderItem:function(t,r){var n=r.value(0),i=r.coord([n,r.value(1)]),o=r.coord([n,r.value(2)]),s=r.size([1,0])[0]*.1,a=r.style({stroke:r.visual("color"),fill:void 0});return{type:"group",children:[{type:"line",transition:["shape"],shape:{x1:i[0]-s,y1:i[1],x2:i[0]+s,y2:i[1]},style:a},{type:"line",transition:["shape"],shape:{x1:i[0],y1:i[1],x2:o[0],y2:o[1]},style:a},{type:"line",transition:["shape"],shape:{x1:o[0]-s,y1:o[1],x2:o[0]+s,y2:o[1]},style:a}]}},tooltip:{show:!1},z:100}]}}}},Sr=e=>(Ve("data-v-7790bb48"),e=e(),Ue(),e),nue=Sr(()=>y("span",{class:"title"},"Model B",-1)),iue=Sr(()=>y("span",null,[R(": majority (1-\u03BB) of points are zero, but \u03BB points are from a binomial distribution with such "),y("i",null,"np"),R(", that \u03BB"),y("i",null,"np"),R(" = M")],-1)),oue=R("Sweeping through "),sue=Sr(()=>y("i",null,"np",-1)),aue={style:{float:"left"}},lue={key:0,id:"chartSweep"},uue={style:{padding:"1em"}},cue={style:{float:"left"}},fue=Sr(()=>y("th",null,null,-1)),hue=Sr(()=>y("th",null,"np",-1)),due=Sr(()=>y("th",null,"n",-1)),pue=Sr(()=>y("th",null,"MSE",-1)),vue=Sr(()=>y("th",null,"p-val",-1)),gue={key:0},mue=Sr(()=>y("td",null,"Best fit:",-1)),_ue=Sr(()=>y("td",null,"Manual:",-1)),yue=R(" np\u1D38: "),bue=["value","min","max","step"],wue=R(" n\u1D38: "),Sue=["value"],Tue=Sr(()=>y("div",{style:{clear:"both"}},null,-1)),kue={key:0,style:{float:"left"}},Pue={id:"chartHisto"},Eue=Sr(()=>y("br",null,null,-1)),Cue={key:0},Aue=R(" Corresponding range for "),Mue=Sr(()=>y("i",null,"np",-1)),xue={key:1},Lue=Sr(()=>y("div",{style:{clear:"both"}},null,-1)),Iue=Sr(()=>y("p",{class:"fsxs"},[R("MSE: "),y("i",null,"\u03A3 (observed - model)\xB2"),R(", discard nothing \u2190 this is used for fitting")],-1)),Oue={key:0,class:"fsxs"},Rue=R("p-val: "),Due=Sr(()=>y("a",{href:"https://en.wikipedia.org/wiki/Binomial_test"},"exact",-1)),Nue=[Rue,Due],Fue=Sr(()=>y("p",{class:"fsxs"},[R("\u03C7\xB2: discard bins where model < 3, then "),y("i",null,"\u03A3 (observed - model)\xB2 / model")],-1)),zue=Sr(()=>y("p",{class:"fsxs"},[R("p-val: "),y("i",null,"1 - chisquare.cdf(\u03C7\xB2, bins - 1 - dof) \u2190 this depends too much on previous step discards")],-1));function Bue(e,t,r,n,i,o){const s=Ut("v-chart");return M(),L(j,null,[nue,iue,o.modelB?(M(),L(j,{key:0},[y("p",null,[oue,sue,R(" values in "+E(o.formatFixed(this.sweep_lo,2))+"\u2026"+E(o.formatFixed(this.sweep_hi,2))+" range:",1)]),y("div",null,[y("div",aue,[o.modelBSweep?(M(),L("div",lue,[bt(s,{option:o.makeChartBSweep},null,8,["option"])])):Q("",!0),y("div",uue,[y("div",cue,[y("table",null,[y("tr",null,[fue,hue,due,pue,Q("",!0),vue]),o.modelBSweep.result?(M(),L("tr",gue,[mue,y("td",null,E(o.formatFixed(o.modelBSweep.result.np,3)),1),y("td",null,E(o.modelBSweep.result.n),1),y("td",null,E(o.formatFixed(o.modelBSweep.result.loss.mse,2)),1),Q("",!0),y("td",null,E(o.formatFixed(o.modelBSweep.result.loss.pval,4)),1)])):Q("",!0),y("tr",null,[_ue,y("td",null,E(o.formatFixed(e.selected_np,3)),1),y("td",null,E(e.selected_n),1),y("td",null,E(o.formatFixed(o.modelB.loss.mse,2)),1),Q("",!0),y("td",null,E(o.formatFixed(o.modelB.loss.pval,4)),1)])]),y("p",null,[yue,y("input",{type:"range",onInput:t[0]||(t[0]=a=>o.applySelectedNp(Number(a.target.value))),value:e.selected_np,min:r.stats.min,max:e.sweep_hi*1.5,step:.01,class:"vmid"},null,40,bue),wue,y("input",{type:"range",onInput:t[1]||(t[1]=a=>o.applySelectedN(Number(a.target.value))),value:e.selected_n,min:1,max:200,step:1,class:"vmid"},null,40,Sue)])]),Tue])]),o.modelB.bell?(M(),L("div",kue,[y("div",Pue,[bt(s,{option:o.makeChartBHist},null,8,["option"])]),y("div",null,[R(" Bin 0 has 1-\u03BB \u2248 "+E(o.formatFixed(r.stats.unlucky.len))+" samples removed, "+E(o.formatFixed(o.histogramLuckOnly.arr[0][1]))+" remaining",1),Eue,R(" Depending on actual \u03BB could potentially be "+E(o.formatFixed(o.histogramLuckOnly.err[0][1]))+"\u2026"+E(o.formatFixed(o.histogramLuckOnly.err[0][2]))+" remaining ",1),o.npRangeForBinary?(M(),L("p",Cue,[Aue,Mue,R(": "+E(o.formatFixed(o.npRangeForBinary.min,3))+"\u2026"+E(o.formatFixed(o.npRangeForBinary.max,3)),1)])):Q("",!0)])])):(M(),L("div",xue," bad parameters ")),Lue]),y("div",null,[Iue,o.npRangeForBinary?(M(),L("p",Oue,Nue)):(M(),L(j,{key:1},[Fue,zue],64))])],64)):Q("",!0)],64)}const $ue=ce(rue,[["render",Bue],["__scopeId","data-v-7790bb48"]]);yr([Ba,Lf,Cu,Au,Va,$a,Ua,Mu,Rf,Of,If,xu]);class Vue{constructor(){this.data={},this.xmin=999,this.xmax=-999,this.ymin=999,this.ymax=-999}put(t,r,n){this.data.hasOwnProperty(t)||(this.data[t]={}),this.data[t][r]=n,this.xmin=Math.min(this.xmin,r/1e4),this.xmax=Math.max(this.xmax,r/1e4),this.ymin=Math.min(this.ymin,t/1e4),this.ymax=Math.max(this.ymax,t/1e4)}get(t,r){return!this.data.hasOwnProperty(t)||!this.data[t].hasOwnProperty(r)?null:this.data[t][r]}aslist(){let t=[];for(let[r,n]of Object.entries(this.data).sort((i,o)=>i[0]-o[0]))for(let[i,o]of Object.entries(n).sort((s,a)=>s[0]-a[0]))t.push([r/1e4,i/1e4,o.n,o.loss.mse,o.loss.chisq,o.loss.pval]);return t}}const Uue={data:()=>({selected_npL:1,selected_npU:1,selected_n:10,isGiant_lucky:!1,forceMSE:!1,bestPval:0}),props:{stats:Object,histogram:Object,isGiant:Boolean},components:{VChart:Wa},methods:{isGoodVal:gn,formatFixed:vt,formatKMG:H1,makeBinomialArray:fy,makeBinomialArraysForGiant:yle,sumDistributions:sj,loss:hy,applyGiantBonus:aj,ul2u(e,t,r){return r/(1-t)-t*e/(1-t)},l2u(e,t,r){return r-t*e},findPsStep(e,t,r,n,i){let s={il:0,iu:0,model:i};for(let a=-30;a<=30;a++)for(let l=-30;l<=30;l++){const u=t+l*n,c=r+a*n;if(u<0||c<0)continue;const f=this.isGiant?this.sweepRange.u_hi:this.l2u(c/1e4,this.stats.lucky.shareLo,this.sweepRange.u_hi);if(u/1e4>f)continue;const h=this.l2u(c/1e4,this.stats.lucky.shareHi,this.sweepRange.u_lo);if(u/1e4<h)continue;let d=e.get(u,c);d===null&&(d=this.makemodelC(c/1e4,void 0,u/1e4,void 0),this.bestPval=Math.max(this.bestPval,d.loss.pval),e.put(u,c,d)),d.loss.mse<s.model.loss.mse&&(s={il:a,iu:l,model:d})}return s},findPsRound(e,t,r,n,i,o){for(;t<=150;){let s=this.findPsStep(e,r,n,o,i);if(s.il==0&&s.iu==0)return console.log("no improvement on round",t),{round:t,curU:r,curL:n,model:s.model};if(r+=s.iu*o,n+=s.il*o,n/1e4>this.stats.max)return{round:t,curU:r,curL:n,model:s.model};t++}return{round:t,curU:r,curL:n,model:i}},makemodelC(e,t,r){let n=[t];t===void 0&&(n=[10,20,40,120],n=n.filter(o=>o>=e&&o>=r&&o>=this.stats.max));let i={n:void 0,loss:{mse:void 0,chisq:void 0,pval:void 0}};return this.stats.unlucky.len==0||(n.forEach(o=>{const s={npL:e,n:o,npU:r};if(this.isGiant){const l=this.makeBinomialArraysForGiant(r,this.stats.unlucky.len,e,this.stats.lucky.len,o,this.isGiant_lucky);s.bellU=l.bellU,s.bellL=l.bellL,s.bell=this.sumDistributions(s.bellL,s.bellU)}else s.bellU=this.makeBinomialArray(r,this.stats.unlucky.len,o),s.bellL=this.makeBinomialArray(r+e,this.stats.lucky.len,o),s.bell=this.sumDistributions(s.bellL,s.bellU);s.loss=this.loss(s.bell,this.histogram.map,3),gn(s.loss.mse)&&(!gn(i.loss.mse)||s.loss.mse<i.loss.mse)&&(i=s)}),i||console.log("makemodelC failed",e,r,t)),i},applySelectedNpL(e){e<0||(e>this.selected_nL&&(this.selected_nL=Math.ceil(e)),e>this.selected_n&&(this.selected_n=Math.ceil(e)),this.selected_npL=e)},applySelectedNpU(e){e<0||(e>this.selected_n&&(this.selected_n=Math.ceil(e)),this.selected_npU=e)},applySelectedNL(e){e<0||(e<this.selected_npL&&(this.selected_npL=e),this.selected_nL=e)},applySelectedNU(e){e<0||(e<this.selected_npU&&(this.selected_npU=e),this.selected_nU=e)},applySelectedN(e){e<0||(e<this.selected_npL&&(this.selected_npL=e),e<this.selected_npU&&(this.selected_npU=e),this.selected_n=e)},meanOfDistribution(e){let t=0,r=0;for(let[n,i]of e)t+=i,r+=n*i;return r/t}},computed:{modelC(){const e=this.makemodelC(this.selected_npL,this.selected_n,this.selected_npU);return console.log("modelC",e),e},sweepRange(){const e={u_lo:Math.max(0,this.stats.meanLo),u_init:this.stats.mean,u_hi:this.stats.meanHi,l_init:0};if(this.isGiant){const t=this.makeBinomialArray(e.u_init,this.stats.unlucky.len,100,!1),r=this.meanOfDistribution(t),n=this.makeBinomialArray(e.u_init,this.stats.unlucky.len,100,!0),o=this.meanOfDistribution(n)/r;console.log("init giant bonus",o),e.u_lo/=o,e.u_init/=o,e.u_hi/=o}return e},modelCSweep(){if(isNaN(this.stats.mean))return!1;this.bestPval=0;let e=1;const t=this.sweepRange.u_hi-this.sweepRange.u_lo;let r=1e4;t<3&&(r=5e3),t<1.5&&(r=2500),t<.6&&(r=1e3),t<.3&&(r=500),t<.12&&(r=200),t<.06&&(r=100),t<.03&&(r=50);let n=Math.round(this.sweepRange.u_init*1e4/r)*r,i=Math.round(this.sweepRange.l_init*1e4/r)*r;n<0&&(n=0),i<0&&(i=0);let o=this.makemodelC(i/1e4,void 0,n/1e4,void 0);this.stats.psGridPath=[[0,n/1e4,i/1e4,o.loss.chisq]];let s=new Vue;s.put(n,i,o),{round:e,curU:n,curL:i,model:o}=this.findPsRound(s,e,n,i,o,r);const a=s.aslist();return this.selected_npL=o.npL,this.selected_npU=o.npU,this.selected_n=o.n,console.log("modelCSweep",o,this.stats.lucky.mean),{result:o,psGridDotsMap:s,psGridDots:a}},makeChartCHist(){return{legend:{},tooltip:{trigger:"axis",valueFormatter:t=>vt(t,0)},dataset:[{source:this.histogram.arr},{source:this.modelC.bell},{source:this.modelC.bellL},{source:this.modelC.bellU}],xAxis:{min:this.stats.min==0?-1:null,max:this.stats.max<5?this.stats.max+1:null},yAxis:{axisLine:{onZero:!1},axisLabel:{formatter:t=>this.formatKMG(t)}},grid:{left:35,top:30,right:10,bottom:20},series:[{name:"observed",type:"bar",encode:{x:0,y:1},tooltip:{trigger:"axis",valueFormatter:t=>vt(t,0)}},{name:"model \u03A3",type:"line",datasetIndex:1,encode:{x:0,y:1},showSymbol:!1},{name:"model U",type:"line",datasetIndex:3,encode:{x:0,y:1},showSymbol:!1},{name:"model L",type:"line",datasetIndex:2,encode:{x:0,y:1},showSymbol:!1}]}},makeChartCGrid(){const e=2.272727272727273;let{xmin:t,xmax:r,ymin:n,ymax:i}=this.modelCSweep.psGridDotsMap;const o=(t+r)/2,s=(n+i)/2;let a=.2;this.stats.mean<2&&(a=.05);const l=1.2*(this.modelCSweep.psGridDotsMap.xmax-this.modelCSweep.psGridDotsMap.xmin)+a,u=1.2*(this.modelCSweep.psGridDotsMap.ymax-this.modelCSweep.psGridDotsMap.ymin)+a;if(l/u>e){const g=l,_=l/e;t=o-g/2,r=o+g/2,n=s-_/2,i=s+_/2}else{const g=u*e,_=u;t=o-g/2,r=o+g/2,n=s-_/2,i=s+_/2}const f={xmin:t,xmax:r,ymin:n,ymax:i},h=this.forceMSE||isNaN(this.modelCSweep.result.loss.pval);let d=h?["#282","#2c2","#cc2","#ccc"]:["#ccc","#cc2","#2c2","#282"];const p={inRange:{color:d},calculable:!0,precision:h?0:2,controller:{inRange:{color:d}},orient:"vertical",top:"center",right:10,align:"left",padding:0};let v=h?{min:this.modelCSweep.result.loss.mse,max:this.modelCSweep.result.loss.mse*2,dimension:3,text:["MSE",""]}:{min:0,max:this.bestPval,dimension:5,text:["p-val",""]};return{legend:{},tooltip:{trigger:"item",axisPointer:{type:"cross"},formatter:function(g){const _=g.data;return`np\u1D41=${vt(_[0],2)}<br/>np\u1D38=${vt(_[1],2)}<br/>n=${vt(_[2],2)}<br/>MSE=${_[3].toLocaleString(void 0,{notation:"compact"})}<br/>p-val=${vt(_[5],2)}<br/>`}},title:{},dataset:[{source:this.modelCSweep.psGridDots}],xAxis:{name:"np\u1D38",nameGap:5,min:f.xmin,max:f.xmax,axisLabel:{showMinLabel:!1,showMaxLabel:!1},axisLine:{onZero:!1}},yAxis:{name:"np\u1D41",nameGap:5,min:f.ymin,max:f.ymax,axisLabel:{showMinLabel:!1,showMaxLabel:!1},axisLine:{onZero:!1}},grid:{left:35,top:30,right:40,bottom:20},series:[{type:"scatter",encode:{x:1,y:0,tooltip:[1,0,3]},tooltip:{valueFormatter:g=>`${g[1]} \u2192 ${vt(g[2],4)}`},symbolSize:6,markArea:{silent:!0,data:[[{name:`M\xB1${this.stats.generalSigmas}\u03C3`,coord:[this.sweepRange.u_lo-this.sweepRange.u_init,this.sweepRange.u_lo]},{coord:[this.sweepRange.u_hi-this.sweepRange.u_init,this.sweepRange.u_hi]}]],label:{show:!0,position:"left"},itemStyle:{color:"rgba(0, 0, 200, 0)",borderWidth:1,borderType:"dashed"}},markLine:{silent:!0,symbol:"none",data:[this.isGiant?[{name:"low \u03BB, high M",label:{position:"insideMiddleTop"},coord:[this.sweepRange.u_hi-this.sweepRange.u_init,this.l2u(this.sweepRange.u_hi-this.sweepRange.u_init,this.stats.lucky.shareLo,this.sweepRange.u_hi)]},{coord:[this.modelCSweep.psGridDotsMap.xmax,this.l2u(this.sweepRange.u_hi-this.sweepRange.u_init,this.stats.lucky.shareLo,this.sweepRange.u_hi)]}]:[{name:"low \u03BB, high M",label:{position:"insideMiddleTop"},coord:[this.sweepRange.u_hi-this.sweepRange.u_init,this.l2u(this.sweepRange.u_hi-this.sweepRange.u_init,this.stats.lucky.shareLo,this.sweepRange.u_hi)]},{coord:[this.modelCSweep.psGridDotsMap.xmax,this.l2u(this.modelCSweep.psGridDotsMap.xmax,this.stats.lucky.shareLo,this.sweepRange.u_hi)]}],[{name:"high \u03BB, low M",label:{position:"insideMiddleBottom"},coord:[this.sweepRange.u_lo-this.sweepRange.u_init,this.l2u(this.sweepRange.u_lo-this.sweepRange.u_init,this.stats.lucky.shareHi,this.sweepRange.u_lo)]},{coord:[this.modelCSweep.psGridDotsMap.xmax,this.l2u(this.modelCSweep.psGridDotsMap.xmax,this.stats.lucky.shareHi,this.sweepRange.u_lo)]}]]}}],visualMap:{...p,...v}}}}},Tn=e=>(Ve("data-v-2713830e"),e=e(),Ue(),e),Wue=Tn(()=>y("span",{class:"title"},"Model C",-1)),jue=R(": some points were taken from a distribution L, and the rest from distribution U,"),Gue=Tn(()=>y("br",null,null,-1)),Hue=Tn(()=>y("br",null,null,-1)),Xue=R(" with giant bonus on Unlucky"),Yue=R(" with giant bonus on Lucky"),que={style:{float:"left"}},Zue={style:{width:"570px",height:"270px"}},Kue={key:1,class:"inner"},Jue={style:{padding:"1em"}},Que={style:{float:"left"}},tce=Tn(()=>y("tr",null,[y("th"),y("th",null,"np\u1D41"),y("th",null,"np\u1D38"),y("th",null,"n"),y("th",null,"MSE"),y("th",null,"p-val")],-1)),ece=Tn(()=>y("td",null,"Best fit:",-1)),rce=Tn(()=>y("td",null,"Manual:",-1)),nce=["value","min","max","step"],ice=R(" np\u1D41 "),oce=Tn(()=>y("br",null,null,-1)),sce=["value","max","step"],ace=R(" np\u1D38 "),lce=Tn(()=>y("br",null,null,-1)),uce=["value"],cce=R(" n "),fce=Tn(()=>y("div",{style:{clear:"both"}},null,-1)),hce={key:0,id:"chartHisto",style:{float:"left"}},dce=Tn(()=>y("div",{style:{clear:"both"}},null,-1)),pce=Tn(()=>y("br",null,null,-1)),vce=Tn(()=>y("p",{class:"fsxs"},[R("MSE: "),y("i",null,"\u03A3 (observed - model)\xB2"),R(", discard nothing \u2190 this is used for fitting")],-1)),gce=Tn(()=>y("p",{class:"fsxs"},[R("\u03C7\xB2: discard bins where model < 3, then "),y("i",null,"\u03A3 (observed - model)\xB2 / model")],-1)),mce=Tn(()=>y("p",{class:"fsxs"},[R("p-val: "),y("i",null,"1 - chisquare.cdf(\u03C7\xB2, bins - 1 - dof) \u2190 this depends too much on previous step discards")],-1));function _ce(e,t,r,n,i,o){var a,l;const s=Ut("v-chart");return M(),L(j,null,[Wue,y("span",null,[jue,Gue,R(" so (1 - \u03BB) np\u1D41 + \u03BB (np\u1D41 + np\u1D38) = M, where \u03BB \u2208 "+E(o.formatFixed(r.stats.lucky.shareLo*100,2))+"\u2026"+E(o.formatFixed(r.stats.lucky.shareHi*100,2))+"% and M \u2208 "+E(o.formatFixed(r.stats.mean-1.96*r.stats.meanErr,2))+"\u2026"+E(o.formatFixed(r.stats.mean+1.96*r.stats.meanErr,2)),1)]),Hue,y("p",null,[ot(y("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=u=>r.isGiant=u)},null,512),[[Ke,r.isGiant]]),Xue]),y("p",null,[ot(y("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=u=>e.isGiant_lucky=u)},null,512),[[Ke,e.isGiant_lucky]]),Yue]),y("div",que,[y("div",Zue,[(l=(a=o.modelCSweep)==null?void 0:a.result)!=null&&l.npU?(M(),li(s,{key:0,option:o.makeChartCGrid},null,8,["option"])):(M(),L("div",Kue," search failed (np\u1D41=0) "))]),y("div",Jue,[y("div",Que,[y("table",null,[tce,o.modelCSweep.result?(M(),L("tr",{key:0,class:gr({strike:r.stats.dBad})},[ece,y("td",null,E(o.formatFixed(o.modelCSweep.result.npU,2)),1),y("td",null,E(o.formatFixed(o.modelCSweep.result.npL,2)),1),y("td",null,E(o.modelCSweep.result.n),1),y("td",null,E(o.formatFixed(o.modelCSweep.result.loss.mse,2)),1),y("td",null,E(o.formatFixed(o.modelCSweep.result.loss.pval,4)),1)],2)):Q("",!0),y("tr",null,[rce,y("td",null,E(o.formatFixed(e.selected_npU,2)),1),y("td",null,E(o.formatFixed(e.selected_npL,2)),1),y("td",null,E(e.selected_n),1),y("td",null,E(o.formatFixed(o.modelC.loss.mse,2)),1),y("td",null,E(o.formatFixed(o.modelC.loss.pval,4)),1)])]),y("p",null,[y("input",{type:"range",onInput:t[2]||(t[2]=u=>o.applySelectedNpU(Number(u.target.value))),value:e.selected_npU,min:r.stats.min,max:r.stats.max,step:.01,class:"vmid"},null,40,nce),ice,oce,y("input",{type:"range",onInput:t[3]||(t[3]=u=>o.applySelectedNpL(Number(u.target.value))),value:e.selected_npL,min:0,max:r.stats.max,step:.01,class:"vmid"},null,40,sce),ace,lce,y("input",{type:"range",onInput:t[4]||(t[4]=u=>o.applySelectedN(Number(u.target.value))),value:e.selected_n,min:1,max:200,step:1,class:"vmid"},null,40,uce),cce])]),fce])]),o.modelC.bell?(M(),L("div",hce,[bt(s,{option:o.makeChartCHist},null,8,["option"])])):Q("",!0),dce,pce,vce,gce,mce],64)}const yce=ce(Uue,[["render",_ce],["__scopeId","data-v-2713830e"]]);yr([Ba,Lf,Cu,Au,Va,$a,Ua,Mu,Rf,Of,If,xu]);const bce={setup(){const e=_t(),t=Xne(),r=localStorage.getItem("droprates");return t.$patch(JSON.parse(r)),t.$subscribe((n,i)=>{localStorage.setItem("droprates",JSON.stringify(i))}),{gameStore:e,dropratesStore:t}},components:{VChart:Wa,DRMA:eue,DRMB:$ue,DRMC:yce},provide(){return{[kB]:Xe(()=>this.darkMode?"dark":"default")}},data(){const e=matchMedia("(prefers-color-scheme: dark)");return{alldata:{},generalSigmas:2,hide_buckets:{},darkModeQuery:e,darkMode:e.matches}},created(){this.fetchObservations()},mounted(){this.darkModeQuery.addEventListener("change",()=>{this.darkMode=this.darkModeQuery.matches})},watch:{},computed:{currentDataset(){const e={};if(this.dropratesStore.selected_pzk in this.alldata){const t=this.alldata[this.dropratesStore.selected_pzk];if(this.dropratesStore.selected_ik in t){const r=t[this.dropratesStore.selected_ik];if(this.dropratesStore.selected_specie in r){const n=r[this.dropratesStore.selected_specie];for(let[i,o]of Object.entries(n).sort((s,a)=>s[0]-a[0]))e[i]=o}}}return e},weightedDataset(){let e={};for(let[t,r]of Object.entries(this.currentDataset)){if(this.hide_buckets[t])continue;const n=r.length;let i=[];for(let o=0;o<n;o++){const s=ut.binomial.cdf(o,n,1-t/100);i.push(s)}e[t]={len:n,luckyLen:n*t/100,sorted:[...r].sort((o,s)=>o-s),weights:i}}return e},stats(){const e=this.currentDataset;let t=0,r=0;for(const[v,m]of Object.entries(e))t+=e[v].length,r+=e[v].length;const n=this.weightedDataset;for(let[v,m]of Object.entries(n))for(let g of m.weights)g>this.stats.generalConfidence/100,g>1-this.stats.generalConfidence/100;let i=[],o=[],s=0,a=100,l=0;for(const[v,m]of Object.entries(n)){a=Math.min(a,v),l=Math.max(l,v);let{len:g,luckyLen:_,sorted:b,weights:w}=m;s+=_,i.push(...b),o.push(...w)}const u={1.5:86.6385597,2:95.4499736,2.5:98.7580669,3:99.7300203,3.5:99.9534741841929,4:99.9936657516334},c={generalSigmas:this.generalSigmas,generalConfidence:u[this.generalSigmas],lenRaw:t,dataRaw:e,dataByLuck:n,minLuck:a,maxLuck:l,dataFlatSorted:i,weightsFlat:o,len:i.length,min:ut.min(i),max:ut.max(i),range:ut.range(i),sum:ut.sum(i),mean:ut.mean(i),meanErr:0,meanLo:0,meanHi:0,std:ut.stdev(i,!0),bell:[],histo:[]};if(c.meanErr=Math.sqrt(c.mean/c.max*(1-c.mean/c.max)*c.max/c.len),c.meanLo=c.mean-this.generalSigmas*c.meanErr,c.meanHi=c.mean+this.generalSigmas*c.meanErr,c.lucky={len:s,share:s/c.len,mean:0,std:0,lenHi:0,lenLo:0,shareHi:0,shareLo:0},isNaN(c.lucky.share))c.lucky.shareLo=NaN,c.lucky.shareHi=NaN,c.lucky.lenLo=NaN,c.lucky.lenHi=NaN;else{console.log("binomTest of lucky share%=",c.lucky.share,"with significance=",1-c.generalConfidence/100);const v=this.binomialTest(Math.round(c.lucky.len),c.len,{p:c.lucky.share,alpha:1-c.generalConfidence/100});c.lucky.shareLo=v.ci[0],c.lucky.shareHi=v.ci[1],c.lucky.lenLo=v.ci[0]*c.len,c.lucky.lenHi=v.ci[1]*c.len}c.unlucky={len:c.len-s,share:1-c.lucky.share,mean:0,std:0};let f=0,h=0;for(const[v,m]of Object.entries(n)){let{len:g,luckyLen:_,luckeyLen95:b,sorted:w,weights:T}=m;for(let S=0;S<g;S++){const k=w[S],A=T[S];f+=k*(1-A),h+=k*A}}c.unlucky.mean=f/c.unlucky.len,c.lucky.mean=h/c.lucky.len;let d=0,p=0;for(const[v,m]of Object.entries(n)){let{len:g,sorted:_,weights:b}=m;for(let w=0;w<g;w++){const T=b[w],S=_[w]-c.unlucky.mean;d+=S*S*(1-T);const k=_[w]-c.lucky.mean;p+=k*k*T}}return c.unlucky.std=Math.sqrt(d/c.unlucky.len),c.lucky.std=Math.sqrt(p/c.lucky.len),console.log("stats",c),c},histogram(){const e={arr:[],map:{}};if(this.stats.range>0){let t=[1];t=ut.histogram(this.stats.dataFlatSorted,this.stats.range+1);const n=Array.from(Array(this.stats.range+1).keys()).map(i=>[this.stats.min+i,t[i]]);e.arr=n;for(let i=0;i<t.length;i++)e.map[this.stats.min+i]=t[i]}else e.arr=[[this.stats.min,this.stats.len]],e.map[this.stats.min]=this.stats.len;return console.log("histogram",e),e}},methods:{formatFixed:vt,makeIconSrc:qr,binomialTest:ny,async fetchObservations(){const e=Date.now();this.alldata=await(await fetch("data/manual/yields_observed.json")).json();const t=this.dropratesStore.selected_pzk;this.dropratesStore.selected_pzk=t&&this.alldata[t]?t:Object.keys(this.alldata)[0];const r=this.dropratesStore.selected_ik;this.dropratesStore.selected_ik=r&&this.alldata[t][r]?r:Object.keys(this.alldata[t])[0];const n=this.dropratesStore.selected_specie;this.dropratesStore.selected_specie=n&&this.alldata[t][r][n]?n:Object.keys(this.alldata[t][r])[0],console.log("fetchObservations took",Date.now()-e,"ms",this.dropratesStore.selected_pzk,this.dropratesStore.selected_ik,this.dropratesStore.selected_specie)},activate(e,t,r){this.dropratesStore.selected_pzk=e,this.dropratesStore.selected_ik=t,this.dropratesStore.selected_specie=r}}},Ki=e=>(Ve("data-v-6e1f8d55"),e=e(),Ue(),e),wce={id:"menu"},Sce={style:{display:"none"}},Tce=Ki(()=>y("p",{class:"fsxs"},"Left: droprate parameters currently used in workerman",-1)),kce=Ki(()=>y("p",{class:"fsxs"},"Right: observations used to find out current serverside parameters",-1)),Pce={key:1},Ece=Ki(()=>y("tr",null,[y("th",{class:"fsxs"},"n"),y("th",{class:"fsxs"},"np\u1D41"),y("th",{class:"fsxs"},"np\u1D38"),y("th",{class:"fsxs"},"item"),y("th",{class:"fsxs"},"normal"),y("th",{class:"fsxs"},"giant")],-1)),Cce={class:"fsxs"},Ace={class:"fsxs"},Mce={class:"fsxs"},xce=["src"],Lce={class:"center"},Ice=["title","onClick"],Oce=["title"],Rce={id:"content"},Dce=Ki(()=>y("tr",null,[y("td",null,"mute"),y("td",null,"luck")],-1)),Nce={class:"center"},Fce=["onUpdate:modelValue"],zce=R(" Possible luck procs observed with "),Bce=W1('<option value="1.5" data-v-6e1f8d55>\xB11.5\u03C3</option><option value="2" data-v-6e1f8d55>\xB12\u03C3</option><option value="2.5" data-v-6e1f8d55>\xB12.5\u03C3</option><option value="3" data-v-6e1f8d55>\xB13\u03C3</option><option value="3.5" data-v-6e1f8d55>\xB13.5\u03C3</option><option value="4" data-v-6e1f8d55>\xB14\u03C3</option>',6),$ce=[Bce],Vce=Ki(()=>y("tr",null,[y("th"),y("th",null,"min"),y("th",null,"max")],-1)),Uce=Ki(()=>y("td",null,"count",-1)),Wce=Ki(()=>y("td",null,"% of total",-1)),jce={id:"settings"},Gce=R(" Use model:"),Hce=Ki(()=>y("br",null,null,-1)),Xce=Ki(()=>y("label",{for:"option1"},[R("A. Same item drop regardless of luck (plants, lumber, ores)"),y("br")],-1)),Yce=Ki(()=>y("label",{for:"option2"},[R("B. Item only drops when luck procs (sacks, lumbering rares)"),y("br")],-1)),qce=Ki(()=>y("label",{for:"option3"},[R("C. Different drops when luck procs and when not (eggs, honey)"),y("br")],-1)),Zce={key:0,id:"modelA",style:{float:"left"}},Kce={key:1},Jce={key:2};function Qce(e,t,r,n,i,o){const s=Ut("RouterLink"),a=Ut("DRMA"),l=Ut("DRMB"),u=Ut("DRMC");return M(),L("main",null,[y("div",wce,[y("div",Sce,E(n.dropratesStore.selected_pzk)+" "+E(n.dropratesStore.selected_ik)+" "+E(n.dropratesStore.selected_specie),1),Tce,kce,(M(!0),L(j,null,wt(i.alldata,(c,f)=>(M(),L(j,null,[f in n.gameStore.plantzoneStatic?(M(),li(s,{key:0,tag:"a",to:{path:"./",hash:"#node"+f}},{default:we(()=>[R(E(f)+" "+E(n.gameStore.plantzoneName(f)),1)]),_:2},1032,["to"])):(M(),L("span",Pce,E(f),1)),y("table",null,[Ece,(M(!0),L(j,null,wt(c,(h,d)=>(M(),L("tr",null,[y("td",Cce,[n.gameStore.ready&&Number(f)in n.gameStore.plantzones?(M(),L(j,{key:0},[R(E(n.gameStore.plantzones[Number(f)].rolls),1)],64)):Q("",!0)]),y("td",Ace,[n.gameStore.ready&&Number(f)in n.gameStore.plantzones&&d in n.gameStore.plantzones[Number(f)].unlucky?(M(),L(j,{key:0},[R(E(n.gameStore.plantzones[Number(f)].unlucky[d]),1)],64)):Q("",!0)]),y("td",Mce,[n.gameStore.ready&&Number(f)in n.gameStore.plantzones&&d in n.gameStore.plantzones[Number(f)].lucky?(M(),L(j,{key:0},[R(E(n.gameStore.plantzones[Number(f)].lucky[d]),1)],64)):Q("",!0)]),y("td",null,[bt(s,{tag:"a",to:{path:"./settings",hash:"#item"+d}},{default:we(()=>[y("span",null,[y("img",{src:o.makeIconSrc(d),class:"iconitem"},null,8,xce)])]),_:2},1032,["to"]),R(" "+E(n.gameStore.itemName(d)),1)]),(M(),L(j,null,wt(["normal","giant"],p=>y("td",Lce,[p in h?(M(),L(j,{key:0},[f!=n.dropratesStore.selected_pzk||d!=n.dropratesStore.selected_ik||p!=n.dropratesStore.selected_specie?(M(),L("button",{key:0,title:`item ${d} ${p}`,onClick:v=>o.activate(f,d,p)},E(Object.values(h[p]).flat().length),9,Ice)):(M(),L("button",{key:1,title:`item ${d} ${p}`,class:"pressed"},E(Object.values(h[p]).flat().length),9,Oce))],64)):Q("",!0)])),64))]))),256))])],64))),256))]),y("div",Rce,[y("details",null,[y("summary",null,[R("Dataset: size N = "+E(o.stats.len)+", sum "+E(o.stats.sum)+", mean M = "+E(o.formatFixed(o.stats.mean,3))+"\xB1"+E(o.formatFixed(1.96*o.stats.meanErr,3))+", ",1),this.stats.minLuck==this.stats.maxLuck?(M(),L(j,{key:0},[R(E(this.stats.maxLuck),1)],64)):(M(),L(j,{key:1},[R(E(o.formatFixed(this.stats.minLuck,2))+"\u2026"+E(o.formatFixed(this.stats.maxLuck,2)),1)],64)),R("\u{1F340} \u2192 \u03BB \u2208 "+E(o.formatFixed(o.stats.lucky.shareLo*100,2))+"\u2026"+E(o.formatFixed(o.stats.lucky.shareHi*100,2))+"% cycles were lucky ",1)]),y("div",null,[y("table",null,[Dce,(M(!0),L(j,null,wt(o.stats.dataRaw,(c,f)=>(M(),L("tr",{class:gr({strike:i.hide_buckets[f]})},[y("td",Nce,[ot(y("input",{"onUpdate:modelValue":h=>i.hide_buckets[f]=h,type:"checkbox"},null,8,Fce),[[Ke,i.hide_buckets[f]]])]),y("td",null,E(f),1),(M(!0),L(j,null,wt(c,h=>(M(),L("td",null,E(h),1))),256))],2))),256))])]),y("p",null,[zce,ot(y("select",{"onUpdate:modelValue":t[0]||(t[0]=c=>i.generalSigmas=c)},$ce,512),[[qe,i.generalSigmas]]),R(" ("+E(o.formatFixed(o.stats.generalConfidence,2))+"%) confidence: ",1),y("table",null,[Vce,y("tr",null,[Uce,y("td",null,E(o.formatFixed(o.stats.lucky.lenLo,2)),1),y("td",null,E(o.formatFixed(o.stats.lucky.lenHi,2)),1)]),y("tr",null,[Wce,y("td",null,E(o.formatFixed(o.stats.lucky.shareLo*100,2)),1),y("td",null,E(o.formatFixed(o.stats.lucky.shareHi*100,2)),1)])])])]),y("div",jce,[Gce,Hce,ot(y("input",{type:"radio",id:"option1",value:"a","onUpdate:modelValue":t[1]||(t[1]=c=>n.dropratesStore.selected_model=c)},null,512),[[Sd,n.dropratesStore.selected_model]]),Xce,ot(y("input",{type:"radio",id:"option2",value:"b","onUpdate:modelValue":t[2]||(t[2]=c=>n.dropratesStore.selected_model=c)},null,512),[[Sd,n.dropratesStore.selected_model]]),Yce,ot(y("input",{type:"radio",id:"option3",value:"c","onUpdate:modelValue":t[3]||(t[3]=c=>n.dropratesStore.selected_model=c)},null,512),[[Sd,n.dropratesStore.selected_model]]),qce]),n.dropratesStore.selected_model=="a"?(M(),L("div",Zce,[bt(a,{stats:o.stats,histogram:o.histogram,isGiant:n.dropratesStore.selected_specie=="giant"},null,8,["stats","histogram","isGiant"])])):Q("",!0),n.dropratesStore.selected_model=="b"?(M(),L("div",Kce,[bt(l,{stats:o.stats,histogram:o.histogram},null,8,["stats","histogram"])])):Q("",!0),n.dropratesStore.selected_model=="c"?(M(),L("div",Jce,[bt(u,{stats:o.stats,histogram:o.histogram,isGiant:n.dropratesStore.selected_specie=="giant"},null,8,["stats","histogram","isGiant"])])):Q("",!0)])])}const tfe=ce(bce,[["render",Qce],["__scopeId","data-v-6e1f8d55"]]);yr([Ba,Lf,Cu,Au,Va,$a,Ua,Mu,Rf,Of,If,xu]);const efe={data:()=>({share_T:.5,M_T:1,width_T:.76,selected_npU:.69,width_U:.49,selected_npL:1.25,selected_std:.42,forceMSE:!1,bestPval:0}),props:{stats:Object,histogram:Object,avg_size:Number,mode_relative:Boolean},components:{VChart:Wa},methods:{isGoodVal:gn,formatFixed:vt,formatKMG:H1,makeBinomialArray:fy,makeNormalArray:mle,makeUniformArray:vle,makeTriangularArray:gle,sumDistributions:sj,loss:hy,makeModel(e,t,r){let n=[r];r===void 0&&(n=[this.stats.mean*.23,this.stats.mean*.24,this.stats.mean*.25,this.stats.mean*.26,this.stats.mean*.27]);let i={n:void 0,loss:{mse:void 0,chisq:void 0,pval:void 0}};return this.stats.unlucky.len==0||(n.forEach(o=>{const s={npL:t,stdDev:o,npU:e};if(s.bellT=this.makeTriangularArray(this.M_T*this.avg_size,this.share_T*this.stats.len,this.stats.max,this.avg_size*this.width_T),s.bellU=this.makeTriangularArray(e*this.avg_size,(1-this.share_T)*this.stats.unlucky.len,this.stats.max,e*this.avg_size*this.width_U),s.bellL=this.makeNormalArray(t*this.avg_size,(1-this.share_T)*this.stats.lucky.len,this.stats.max,o*this.avg_size),s.bell=this.sumDistributions(s.bellL,s.bellU),s.bell=this.sumDistributions(s.bell,s.bellT),s.loss=this.loss(s.bell,this.histogram.map,3),gn(s.loss.mse)&&(!gn(i.loss.mse)||s.loss.mse<i.loss.mse)){i=s;let l=0,u=0;for(const[c,[f,h]]of Object.entries(s.bell))l+=h,u+=f*h;i.sumX=l,i.sumY=u}}),i||console.log("makeModel failed",e,t,r)),i},applySelectedNpL(e){e<0||(e>this.selected_nL&&(this.selected_nL=Math.ceil(e)),this.selected_npL=e)},applySelectedNpU(e){e<0||(this.selected_npU=e)},applySelectedNL(e){e<0||(e<this.selected_npL&&(this.selected_npL=e),this.selected_nL=e)},applySelectedNU(e){e<0||(e<this.selected_npU&&(this.selected_npU=e),this.selected_nU=e)},applySelectedStd(e){e<0||(this.selected_std=e)},meanOfDistribution(e){let t=0,r=0;for(let[n,i]of e)t+=i,r+=n*i;return r/t}},computed:{modelC(){const e=this.makeModel(this.selected_npU,this.selected_npL,this.selected_std);return console.log("modelC",e),e},makeHistogramOption(){return{legend:{},tooltip:{trigger:"axis",valueFormatter:t=>vt(t,1)},dataset:[{source:this.histogram.arr},{source:this.modelC.bell},{source:this.modelC.bellL},{source:this.modelC.bellU},{source:this.modelC.bellT}],xAxis:{min:this.stats.min==0?-1:null,max:this.mode_relative?this.stats.max<5?this.stats.max+1:null:this.avg_size*3},yAxis:{axisLine:{onZero:!1},axisLabel:{formatter:t=>this.formatKMG(t)}},grid:{left:35,top:30,right:10,bottom:20},series:[{name:"observed",type:"bar",encode:{x:0,y:1},tooltip:{trigger:"axis",valueFormatter:t=>vt(t,0)}},{name:"model \u03A3",type:"line",datasetIndex:1,encode:{x:0,y:1},showSymbol:!1},{name:"model U",type:"line",datasetIndex:3,encode:{x:0,y:1},showSymbol:!1},{name:"model L",type:"line",datasetIndex:2,encode:{x:0,y:1},showSymbol:!1},{name:"model T",type:"line",datasetIndex:4,encode:{x:0,y:1},showSymbol:!1}]}}}},kn=e=>(Ve("data-v-81466840"),e=e(),Ue(),e),rfe=kn(()=>y("span",{class:"title"},"Fish Model",-1)),nfe=R(": some points were taken from a distribution L, and the rest from distribution U,"),ife=kn(()=>y("br",null,null,-1)),ofe=kn(()=>y("br",null,null,-1)),sfe={style:{float:"left"}},afe={style:{padding:"1em"}},lfe={style:{float:"left"}},ufe=kn(()=>y("tr",null,[y("th"),y("th",null,"np\u1D41"),y("th",null,"np\u1D38"),y("th",null,"\u03C3"),y("th",null,"MSE"),y("th",null,"p-val"),y("th",null,"U/M"),y("th",null,"(U+L)/M"),y("th",null,"(U+L)/U"),y("th",null,"\u03A3x"),y("th",null,"\u03A3y")],-1)),cfe=kn(()=>y("td",null,"Manual:",-1)),ffe=["step"],hfe=kn(()=>y("br",null,null,-1)),dfe=["min","max","step"],pfe=["min","max","step"],vfe=kn(()=>y("br",null,null,-1)),gfe=["value","step"],mfe=R(" np\u1D41 "),_fe=["step"],yfe=kn(()=>y("br",null,null,-1)),bfe=["value","step"],wfe=R(" np\u1D38 "),Sfe=["value","step"],Tfe=R(" \u03C3 "),kfe=kn(()=>y("div",{style:{clear:"both"}},null,-1)),Pfe={key:0,id:"chartHisto",style:{float:"left"}},Efe=kn(()=>y("div",{style:{clear:"both"}},null,-1)),Cfe=kn(()=>y("br",null,null,-1)),Afe=kn(()=>y("p",{class:"fsxs"},[R("MSE: "),y("i",null,"\u03A3 (observed - model)\xB2"),R(", discard nothing \u2190 this is used for fitting")],-1)),Mfe=kn(()=>y("p",{class:"fsxs"},[R("\u03C7\xB2: discard bins where model < 3, then "),y("i",null,"\u03A3 (observed - model)\xB2 / model")],-1)),xfe=kn(()=>y("p",{class:"fsxs"},[R("p-val: "),y("i",null,"1 - chisquare.cdf(\u03C7\xB2, bins - 1 - dof)"),R(" \u2190 this is shown on scatter plot, non uniform because depends on previous step discards")],-1));function Lfe(e,t,r,n,i,o){const s=Ut("v-chart");return M(),L(j,null,[rfe,y("span",null,[nfe,ife,R(" so (1 - \u03BB) np\u1D41 + \u03BB (np\u1D41 + np\u1D38) = M, where \u03BB \u2208 "+E(o.formatFixed(r.stats.lucky.shareLo*100,2))+"\u2026"+E(o.formatFixed(r.stats.lucky.shareHi*100,2))+"% and M \u2208 "+E(o.formatFixed(r.stats.mean-1.96*r.stats.meanErr,2))+"\u2026"+E(o.formatFixed(r.stats.mean+1.96*r.stats.meanErr,2)),1)]),ofe,y("div",sfe,[y("div",afe,[y("div",lfe,[y("table",null,[ufe,y("tr",null,[cfe,y("td",null,E(o.formatFixed(e.selected_npU,2)),1),y("td",null,E(o.formatFixed(e.selected_npL,2)),1),y("td",null,E(o.formatFixed(e.selected_std,2)),1),y("td",null,E(o.formatFixed(o.modelC.loss.mse,2)),1),y("td",null,E(o.formatFixed(o.modelC.loss.pval,4)),1),y("td",null,E(o.formatFixed(e.selected_npU/r.avg_size,2)),1),y("td",null,E(o.formatFixed((e.selected_npU+e.selected_npL)/r.avg_size,2)),1),y("td",null,E(o.formatFixed((e.selected_npU+e.selected_npL)/e.selected_npU,2)),1),y("td",null,E(o.formatFixed(o.modelC.sumX,1)),1),y("td",null,E(o.formatFixed(o.modelC.sumY,0)),1)])]),y("p",null,[ot(y("input",{type:"range","onUpdate:modelValue":t[0]||(t[0]=a=>e.share_T=a),min:0,max:1,step:.001,class:"vmid"},null,8,ffe),[[Gt,e.share_T]]),R(" "+E(e.share_T)+" share_T ",1),hfe,ot(y("input",{type:"range","onUpdate:modelValue":t[1]||(t[1]=a=>e.M_T=a),min:.9,max:1.1,step:.001,class:"vmid"},null,8,dfe),[[Gt,e.M_T]]),R(" "+E(e.M_T)+" M_T ",1),ot(y("input",{type:"range","onUpdate:modelValue":t[2]||(t[2]=a=>e.width_T=a),min:.7,max:.8,step:.001,class:"vmid"},null,8,pfe),[[Gt,e.width_T]]),R(" "+E(e.width_T)+" width_T ",1),vfe,y("input",{type:"range",onInput:t[3]||(t[3]=a=>o.applySelectedNpU(Number(a.target.value))),value:e.selected_npU,min:0,max:1,step:.01,class:"vmid"},null,40,gfe),mfe,ot(y("input",{type:"range","onUpdate:modelValue":t[4]||(t[4]=a=>e.width_U=a),min:0,max:1,step:.01,class:"vmid"},null,8,_fe),[[Gt,e.width_U]]),R(" "+E(e.width_U)+" width_U ",1),yfe,y("input",{type:"range",onInput:t[5]||(t[5]=a=>o.applySelectedNpL(Number(a.target.value))),value:e.selected_npL,min:0,max:2,step:.01,class:"vmid"},null,40,bfe),wfe,y("input",{type:"range",onInput:t[6]||(t[6]=a=>o.applySelectedStd(Number(a.target.value))),value:e.selected_std,min:0,max:1,step:.01,class:"vmid"},null,40,Sfe),Tfe])]),kfe])]),o.modelC.bell&&o.modelC.npL!=null?(M(),L("div",Pfe,[bt(s,{option:o.makeHistogramOption},null,8,["option"])])):Q("",!0),Efe,Cfe,Afe,Mfe,xfe],64)}const Ife=ce(efe,[["render",Lfe],["__scopeId","data-v-81466840"]]);yr([Ba,Lf,Cu,Au,Va,$a,Ua,Mu,Rf,Of,If,xu]);const Ofe={setup(){},components:{VChart:Wa,FishModel:Ife},provide(){return{[kB]:Xe(()=>this.darkMode?"dark":"default")}},data(){const e=matchMedia("(prefers-color-scheme: dark)");return{mode_relative:!0,relative_base:100,alldata:{},selectedFish:"ALL",selectedLuck:68.3,generalSigmas:4,fish_info:{},hide_buckets:{},darkModeQuery:e,darkMode:e.matches}},created(){this.fetchObservations()},mounted(){this.darkModeQuery.addEventListener("change",()=>{this.darkMode=this.darkModeQuery.matches})},watch:{},computed:{currentDataset(){const e=[];if(this.selectedFish in this.alldata){const t=this.get_fish_info(this.selectedFish),r=(t.BaseSize+t.FishVarySize)/2;for(const n of this.alldata[this.selectedFish])this.mode_relative?e.push(this.relative_base*n/r):e.push(n)}return e},weightedDataset(){let e={};const t=this.currentDataset,r=t.length;let n=[];for(let i=0;i<r;i++){const o=ut.binomial.cdf(i,r,1-this.selectedLuck/100);n.push(o)}return e={len:r,luckyLen:r*this.selectedLuck/100,sorted:[...t].sort((i,o)=>i-o),weights:n},e.grouped=e.sorted.reduce((i,o)=>{const s=Math.floor(o);return i[s]||(i[s]=[]),i[s].push(o),i},{}),e},stats(){const e=this.currentDataset;let t=e.length;const r=this.weightedDataset;for(let v of r.weights)v>this.stats.generalConfidence/100,v>1-this.stats.generalConfidence/100;let n=[],i=[],o=0,s=100,a=0;s=Math.min(s,this.selectedLuck),a=Math.max(a,this.selectedLuck);let{len:l,luckyLen:u,sorted:c,weights:f,grouped:h}=r;o+=u,n.push(...c),i.push(...f);const d={1.5:86.6385597,2:95.4499736,2.5:98.7580669,3:99.7300203,3.5:99.9534741841929,4:99.9936657516334},p={generalSigmas:this.generalSigmas,generalConfidence:d[this.generalSigmas],lenRaw:t,dataRaw:e,dataFlatSorted:n,weightsFlat:i,len:n.length,min:ut.min(n),max:ut.max(n),range:ut.range(n),sum:ut.sum(n),mean:ut.mean(n),meanErr:0,meanLo:0,meanHi:0,std:ut.stdev(n,!0),bell:[],histo:[]};if(p.meanErr=Math.sqrt(p.mean/p.max*(1-p.mean/p.max)*p.max/p.len),p.meanLo=p.mean-this.generalSigmas*p.meanErr,p.meanHi=p.mean+this.generalSigmas*p.meanErr,p.lucky={len:o,share:o/p.len,mean:0,std:0,lenHi:0,lenLo:0,shareHi:0,shareLo:0},isNaN(p.lucky.share))p.lucky.shareLo=NaN,p.lucky.shareHi=NaN,p.lucky.lenLo=NaN,p.lucky.lenHi=NaN;else{console.log("binomTest of lucky share%=",p.lucky.share,"with significance=",1-p.generalConfidence/100);const v=this.binomialTest(Math.round(p.lucky.len),p.len,{p:p.lucky.share,alpha:1-p.generalConfidence/100});p.lucky.shareLo=v.ci[0],p.lucky.shareHi=v.ci[1],p.lucky.lenLo=v.ci[0]*p.len,p.lucky.lenHi=v.ci[1]*p.len}return p.unlucky={len:p.len-o,share:1-p.lucky.share,mean:0,std:0},console.log("stats",p),p},histogram(){const e={arr:[],map:{}};if(this.stats.len>0){const r=this.stats.dataFlatSorted[this.stats.len-1],n=Math.ceil(r/1);console.log("binCount",n);const i=Array(n).fill(0);for(const o of this.stats.dataFlatSorted){const s=Math.floor(o/1);i[s]++}for(let o=0;o<n;o++){const s=o*1;e.arr.push([s,i[o]]),e.map[s]=i[o]}}return this.stats.range>0||(e.arr=[[this.stats.min,this.stats.len]],e.map[this.stats.min]=this.stats.len),console.log("histogram",e),e}},methods:{formatFixed:vt,makeIconSrc:qr,binomialTest:ny,async fetchObservations(){const e=Date.now();if(this.alldata=await(await fetch("data/manual/my_catches.json")).json(),this.fish_info=await(await fetch("data/manual/fish_info.json")).json(),this.mode_relative){console.log("filling group ALL");const r=[];for(const[n,i]of Object.entries(this.alldata)){const o=this.get_fish_info(n),s=(o.BaseSize+o.FishVarySize)/2;for(const a of i)r.push(this.relative_base*a/s)}this.alldata.ALL=r,this.fish_info.ALL={BaseSize:this.relative_base,FishVarySize:this.relative_base}}const t={};for(const[r,n]of Object.entries(this.alldata)){const i=this.get_fish_info(r),o=`${i.BaseSize}_${i.FishVarySize}`,s=n.length;o in t||(t[o]={fishes:[],totalSamples:0}),t[o].fishes.push(r),t[o].totalSamples+=s}console.log("group_sizes",t);for(const[r,n]of Object.entries(this.alldata)){const i=this.get_fish_info(r),o=`${i.BaseSize}_${i.FishVarySize}`,s=t[o];if(s.fishes.length>1&&s.totalSamples>1e3){const a=s.fishes.join("+");a in this.alldata||(this.alldata[a]=[]),this.fish_info[a]={BaseSize:i.BaseSize,FishVarySize:i.FishVarySize};for(const l of n)this.alldata[a].push(l)}}console.log("fetchObservations took",Date.now()-e,"ms")},activate(e){this.selectedFish=e},get_fish_info(e){const t=e in this.fish_info?this.fish_info[e]:{BaseSize:1,FishVarySize:1};return t.avg_size=(t.BaseSize+t.FishVarySize)/2,t}}},Rfe=e=>(Ve("data-v-f006ab4b"),e=e(),Ue(),e),Dfe={id:"menu"},Nfe={style:{display:"none"}},Ffe=R("relative sizes (scaled to AVG= "),zfe=R(" ) "),Bfe=Rfe(()=>y("br",null,null,-1)),$fe={key:0},Vfe=["onClick"],Ufe={id:"content"},Wfe=["step"];function jfe(e,t,r,n,i,o){const s=Ut("FishModel");return M(),L("main",null,[y("div",Dfe,[y("div",Nfe,E(i.selectedFish),1),ot(y("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=a=>i.mode_relative=a)},null,512),[[Ke,i.mode_relative]]),Ffe,ot(y("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=a=>i.relative_base=a),step:"10",style:{width:"4em"}},null,512),[[Gt,i.relative_base]]),zfe,Bfe,(M(!0),L(j,null,wt(i.alldata,(a,l)=>(M(),L(j,null,[a.length>600?(M(),L("div",$fe,[R(E(l)+" "+E(o.get_fish_info(l).BaseSize)+" "+E(o.get_fish_info(l).FishVarySize)+" "+E(o.get_fish_info(l).avg_size)+" ",1),y("button",{class:gr({pressed:l===i.selectedFish}),onClick:u=>o.activate(l)},E(a.length)+" points ",11,Vfe)])):Q("",!0)],64))),256))]),y("div",Ufe,[ot(y("input",{type:"range","onUpdate:modelValue":t[2]||(t[2]=a=>i.selectedLuck=a),min:"0",max:"100",step:.1,class:"vmid"},null,8,Wfe),[[Gt,i.selectedLuck]]),R(" "+E(i.selectedLuck)+" luck ",1),y("details",null,[y("summary",null,"Dataset: size N = "+E(o.stats.len)+", sum "+E(o.formatFixed(o.stats.sum,3))+", mean M = "+E(o.formatFixed(o.stats.mean,3))+"\xB1"+E(o.formatFixed(1.96*o.stats.meanErr,3))+", ",1),y("div",null,[y("table",null,[(M(!0),L(j,null,wt(o.weightedDataset.grouped,(a,l)=>(M(),L("tr",null,[(M(!0),L(j,null,wt(a,u=>(M(),L("td",null,E(o.formatFixed(u,3)),1))),256))]))),256))])])]),y("div",null,[bt(s,{stats:o.stats,histogram:o.histogram,avg_size:i.mode_relative?i.relative_base:i.fish_info[i.selectedFish]},null,8,["stats","histogram","avg_size"])])])])}const Gfe=ce(Ofe,[["render",jfe],["__scopeId","data-v-f006ab4b"]]),Hfe={setup(){return{gameStore:_t()}},components:{},data(){return{cases:[{label:"ehwaz-pinto",expected:5,tasks:[[1,160],[1,136]]},{label:"glish-lynch_f/heidel-glish_r",expected:9,tasks:[[302,488],[301,480]]}]}},computed:{run_all(){const e=[];for(const t of this.cases)e.push(this.run_case(t));return e}},methods:{run_case(e){const t=_t(),r=[];for(const o of e.tasks)r.push({source:o[0],target:o[1]});const n=t.route([],r);return{...e,...n,passed:n.totalCost==e.expected}}}},Xfe={id:"tests"},Yfe=y("div",{id:"content"},null,-1);function qfe(e,t,r,n,i,o){return M(),L("main",null,[y("div",Xfe,[(M(!0),L(j,null,wt(o.run_all,s=>(M(),L("div",null,[R(E(s.label)+" "+E(s.totalCost)+" "+E(s.passed?"\u2714\uFE0F":"\u274C")+" ",1),y("button",{onClick:t[0]||(t[0]=()=>{})},"view")]))),256))]),Yfe])}const Zfe=ce(Hfe,[["render",qfe]]);const Kfe={setup(){const e=_t(),t=Wt();return{gameStore:e,userStore:t}},components:{},data(){return{deck:null,tileLayer:null,geoLayer:null,iconLayer:null,initialViewState:{target:[0,0],zoom:-12,minZoom:-12,maxZoom:-5},hoverx:0,hovery:0,selectedZone:0,highlightedIcon:0}},computed:{},mounted(){this.deck=this.initializeDeck()},watch:{highlightedIcon(e){this.iconLayer=this.makeIconsLayer(),this.deck.setProps({layers:[this.tileLayer,this.geoLayer,this.iconLayer]})}},methods:{makeIconsLayer(){return new gu({data:"data/deck_rg_graphs.json",getPosition:e=>[e.graphx,e.graphz],getColor:e=>[66,66,66,255],getIcon:function(e){return{url:"data/icons/target_percent.png",width:128,height:128,anchorX:64,anchorY:64}},modelMatrix:[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],getSize:e=>e.k==this.highlightedIcon?50:0,updateTriggers:{getSize:this.highlightedIcon}})},makeGeoLayer(){return new U_({id:"GeoJsonLayerCur",data:"data/rg_2025-05_1_5.geojson",stroked:!1,getLineWidth:50,lineWidthMinPixels:1,getLineColor:[255,255,255],getFillColor:e=>e.properties.c,pickable:!0,autoHighlight:!0,coordinateSystem:se.CARTESIAN,modelMatrix:[301.1765,0,0,0,0,301.1765,0,0,0,0,1,0,-2048e3,-2048e3,0,1],opacity:.1,onHover:({object:e})=>{e&&e.properties&&(this.highlightedIcon=e.properties.rg)}})},initializeDeck(){return this.tileLayer=new j_({id:"TileLayer",data:"https://shrddr.github.io/maptiles/{z}/{x}_{y}.webp",minZoom:0,maxZoom:7,tileSize:256*12800,zoomOffset:14,extent:[-67*2*12800,-71*2*12800,58*2*12800,35*2*12800],renderSubLayers:t=>{const{bbox:{left:r,bottom:n,right:i,top:o}}=t.tile;return new B_(t,{data:null,image:t.data,bounds:[r,n,i,o]})}}),this.iconLayer=this.makeIconsLayer(),this.geoLayer=this.makeGeoLayer(),new N_({canvas:"deck-canvas",mapbox:!1,initialViewState:this.initialViewState,layers:[this.tileLayer,this.geoLayer,this.iconLayer],controller:{doubleClickZoom:!1},getTooltip:({object:t})=>{if(t&&t.properties&&t.properties.rg)return`RG${t.properties.rg}`},views:[new R_({controller:!0})],onHover:(t,r)=>{t.coordinate&&(this.hoverx=Math.round(t.coordinate[0]),this.hovery=Math.round(t.coordinate[1]))}})}}},Jfe={id:"canvas-limiter"},Qfe={id:"deck-canvas",ref:"canvas"},the={id:"coords"};function ehe(e,t,r,n,i,o){return M(),L("main",null,[y("div",Jfe,[y("canvas",Qfe,null,512),y("div",the," x: "+E(i.hoverx)+" y: "+E(-i.hovery),1)])])}const rhe=ce(Kfe,[["render",ehe],["__scopeId","data-v-95c1054d"]]),nhe=wY({history:zX("/workerman/"),routes:[{path:"/",name:"home",component:B4t},{path:"/plantzones",component:zMt},{path:"/resources",component:P5t},{path:"/settings",component:dxt},{path:"/about",component:()=>$Y(()=>import("./AboutView.6bdba62f.js"),[])},{path:"/othertowns",component:yxt},{path:"/workshops",component:Dxt},{path:"/housecraft",component:eLt},{path:"/droprates",component:tfe},{path:"/routertests",component:Zfe},{path:"/regionmap",component:rhe},{path:"/fishsize",component:Gfe},{path:"/lodging",component:ZMt}]});const CC=GH(FY),ihe=mX();CC.use(ihe);CC.use(nhe);CC.mount("#app");export{j as F,ce as _,y as a,R as b,L as c,Ut as d,li as e,bt as f,W1 as g,Ue as h,M as o,Ve as p,WG as r,E as t,_t as u,we as w};
