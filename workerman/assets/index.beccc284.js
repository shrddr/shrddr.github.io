function cj(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();function WT(e,t){const r=Object.create(null),n=e.split(",");for(let i=0;i<n.length;i++)r[n[i]]=!0;return t?i=>!!r[i.toLowerCase()]:i=>!!r[i]}const fj="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",hj=WT(fj);function u8(e){return!!e||e===""}function Ll(e){if(Ft(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],i=fr(n)?vj(n):Ll(n);if(i)for(const o in i)t[o]=i[o]}return t}else{if(fr(e))return e;if(Qe(e))return e}}const dj=/;(?![^(]*\))/g,pj=/:(.+)/;function vj(e){const t={};return e.split(dj).forEach(r=>{if(r){const n=r.split(pj);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Sn(e){let t="";if(fr(e))t=e;else if(Ft(e))for(let r=0;r<e.length;r++){const n=Sn(e[r]);n&&(t+=n+" ")}else if(Qe(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}function gj(e,t){if(e.length!==t.length)return!1;let r=!0;for(let n=0;r&&n<e.length;n++)r=Gl(e[n],t[n]);return r}function Gl(e,t){if(e===t)return!0;let r=OC(e),n=OC(t);if(r||n)return r&&n?e.getTime()===t.getTime():!1;if(r=Id(e),n=Id(t),r||n)return e===t;if(r=Ft(e),n=Ft(t),r||n)return r&&n?gj(e,t):!1;if(r=Qe(e),n=Qe(t),r||n){if(!r||!n)return!1;const i=Object.keys(e).length,o=Object.keys(t).length;if(i!==o)return!1;for(const a in e){const s=e.hasOwnProperty(a),l=t.hasOwnProperty(a);if(s&&!l||!s&&l||!Gl(e[a],t[a]))return!1}}return String(e)===String(t)}function HT(e,t){return e.findIndex(r=>Gl(r,t))}const L=e=>fr(e)?e:e==null?"":Ft(e)||Qe(e)&&(e.toString===h8||!Gt(e.toString))?JSON.stringify(e,c8,2):String(e),c8=(e,t)=>t&&t.__v_isRef?c8(e,t.value):Pc(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[n,i])=>(r[`${n} =>`]=i,r),{})}:tf(t)?{[`Set(${t.size})`]:[...t.values()]}:Qe(t)&&!Ft(t)&&!d8(t)?String(t):t,xe={},Tc=[],Ti=()=>{},mj=()=>!1,yj=/^on[^a-z]/,b1=e=>yj.test(e),XT=e=>e.startsWith("onUpdate:"),Yr=Object.assign,YT=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},_j=Object.prototype.hasOwnProperty,se=(e,t)=>_j.call(e,t),Ft=Array.isArray,Pc=e=>S0(e)==="[object Map]",tf=e=>S0(e)==="[object Set]",OC=e=>S0(e)==="[object Date]",Gt=e=>typeof e=="function",fr=e=>typeof e=="string",Id=e=>typeof e=="symbol",Qe=e=>e!==null&&typeof e=="object",f8=e=>Qe(e)&&Gt(e.then)&&Gt(e.catch),h8=Object.prototype.toString,S0=e=>h8.call(e),bj=e=>S0(e).slice(8,-1),d8=e=>S0(e)==="[object Object]",qT=e=>fr(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,bg=WT(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),w1=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},wj=/-(\w)/g,bo=w1(e=>e.replace(wj,(t,r)=>r?r.toUpperCase():"")),Sj=/\B([A-Z])/g,ef=w1(e=>e.replace(Sj,"-$1").toLowerCase()),S1=w1(e=>e.charAt(0).toUpperCase()+e.slice(1)),a_=w1(e=>e?`on${S1(e)}`:""),Od=(e,t)=>!Object.is(e,t),wg=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},sm=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},lm=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let RC;const Tj=()=>RC||(RC=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let io;class p8{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&io&&(this.parent=io,this.index=(io.scopes||(io.scopes=[])).push(this)-1)}run(t){if(this.active){const r=io;try{return io=this,t()}finally{io=r}}}on(){io=this}off(){io=this.parent}stop(t){if(this.active){let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.scopes)for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);if(this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.active=!1}}}function v8(e){return new p8(e)}function Pj(e,t=io){t&&t.active&&t.effects.push(e)}const ZT=e=>{const t=new Set(e);return t.w=0,t.n=0,t},g8=e=>(e.w&ys)>0,m8=e=>(e.n&ys)>0,Ej=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=ys},Aj=e=>{const{deps:t}=e;if(t.length){let r=0;for(let n=0;n<t.length;n++){const i=t[n];g8(i)&&!m8(i)?i.delete(e):t[r++]=i,i.w&=~ys,i.n&=~ys}t.length=r}},Gw=new WeakMap;let zh=0,ys=1;const jw=30;let gi;const Il=Symbol(""),Ww=Symbol("");class KT{constructor(t,r=null,n){this.fn=t,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,Pj(this,n)}run(){if(!this.active)return this.fn();let t=gi,r=fs;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=gi,gi=this,fs=!0,ys=1<<++zh,zh<=jw?Ej(this):DC(this),this.fn()}finally{zh<=jw&&Aj(this),ys=1<<--zh,gi=this.parent,fs=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){gi===this?this.deferStop=!0:this.active&&(DC(this),this.onStop&&this.onStop(),this.active=!1)}}function DC(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}let fs=!0;const y8=[];function rf(){y8.push(fs),fs=!1}function nf(){const e=y8.pop();fs=e===void 0?!0:e}function En(e,t,r){if(fs&&gi){let n=Gw.get(e);n||Gw.set(e,n=new Map);let i=n.get(r);i||n.set(r,i=ZT()),_8(i)}}function _8(e,t){let r=!1;zh<=jw?m8(e)||(e.n|=ys,r=!g8(e)):r=!e.has(gi),r&&(e.add(gi),gi.deps.push(e))}function aa(e,t,r,n,i,o){const a=Gw.get(e);if(!a)return;let s=[];if(t==="clear")s=[...a.values()];else if(r==="length"&&Ft(e))a.forEach((l,u)=>{(u==="length"||u>=n)&&s.push(l)});else switch(r!==void 0&&s.push(a.get(r)),t){case"add":Ft(e)?qT(r)&&s.push(a.get("length")):(s.push(a.get(Il)),Pc(e)&&s.push(a.get(Ww)));break;case"delete":Ft(e)||(s.push(a.get(Il)),Pc(e)&&s.push(a.get(Ww)));break;case"set":Pc(e)&&s.push(a.get(Il));break}if(s.length===1)s[0]&&Hw(s[0]);else{const l=[];for(const u of s)u&&l.push(...u);Hw(ZT(l))}}function Hw(e,t){const r=Ft(e)?e:[...e];for(const n of r)n.computed&&NC(n);for(const n of r)n.computed||NC(n)}function NC(e,t){(e!==gi||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const Cj=WT("__proto__,__v_isRef,__isVue"),b8=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Id)),Mj=JT(),kj=JT(!1,!0),xj=JT(!0),FC=Lj();function Lj(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const n=fe(this);for(let o=0,a=this.length;o<a;o++)En(n,"get",o+"");const i=n[t](...r);return i===-1||i===!1?n[t](...r.map(fe)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){rf();const n=fe(this)[t].apply(this,r);return nf(),n}}),e}function JT(e=!1,t=!1){return function(n,i,o){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&o===(e?t?Xj:E8:t?P8:T8).get(n))return n;const a=Ft(n);if(!e&&a&&se(FC,i))return Reflect.get(FC,i,o);const s=Reflect.get(n,i,o);return(Id(i)?b8.has(i):Cj(i))||(e||En(n,"get",i),t)?s:He(s)?a&&qT(i)?s:s.value:Qe(s)?e?A8(s):of(s):s}}const Ij=w8(),Oj=w8(!0);function w8(e=!1){return function(r,n,i,o){let a=r[n];if(Rd(a)&&He(a)&&!He(i))return!1;if(!e&&!Rd(i)&&(Xw(i)||(i=fe(i),a=fe(a)),!Ft(r)&&He(a)&&!He(i)))return a.value=i,!0;const s=Ft(r)&&qT(n)?Number(n)<r.length:se(r,n),l=Reflect.set(r,n,i,o);return r===fe(o)&&(s?Od(i,a)&&aa(r,"set",n,i):aa(r,"add",n,i)),l}}function Rj(e,t){const r=se(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&r&&aa(e,"delete",t,void 0),n}function Dj(e,t){const r=Reflect.has(e,t);return(!Id(t)||!b8.has(t))&&En(e,"has",t),r}function Nj(e){return En(e,"iterate",Ft(e)?"length":Il),Reflect.ownKeys(e)}const S8={get:Mj,set:Ij,deleteProperty:Rj,has:Dj,ownKeys:Nj},Fj={get:xj,set(e,t){return!0},deleteProperty(e,t){return!0}},Bj=Yr({},S8,{get:kj,set:Oj}),QT=e=>e,T1=e=>Reflect.getPrototypeOf(e);function cp(e,t,r=!1,n=!1){e=e.__v_raw;const i=fe(e),o=fe(t);r||(t!==o&&En(i,"get",t),En(i,"get",o));const{has:a}=T1(i),s=n?QT:r?rP:Dd;if(a.call(i,t))return s(e.get(t));if(a.call(i,o))return s(e.get(o));e!==i&&e.get(t)}function fp(e,t=!1){const r=this.__v_raw,n=fe(r),i=fe(e);return t||(e!==i&&En(n,"has",e),En(n,"has",i)),e===i?r.has(e):r.has(e)||r.has(i)}function hp(e,t=!1){return e=e.__v_raw,!t&&En(fe(e),"iterate",Il),Reflect.get(e,"size",e)}function BC(e){e=fe(e);const t=fe(this);return T1(t).has.call(t,e)||(t.add(e),aa(t,"add",e,e)),this}function $C(e,t){t=fe(t);const r=fe(this),{has:n,get:i}=T1(r);let o=n.call(r,e);o||(e=fe(e),o=n.call(r,e));const a=i.call(r,e);return r.set(e,t),o?Od(t,a)&&aa(r,"set",e,t):aa(r,"add",e,t),this}function zC(e){const t=fe(this),{has:r,get:n}=T1(t);let i=r.call(t,e);i||(e=fe(e),i=r.call(t,e)),n&&n.call(t,e);const o=t.delete(e);return i&&aa(t,"delete",e,void 0),o}function VC(){const e=fe(this),t=e.size!==0,r=e.clear();return t&&aa(e,"clear",void 0,void 0),r}function dp(e,t){return function(n,i){const o=this,a=o.__v_raw,s=fe(a),l=t?QT:e?rP:Dd;return!e&&En(s,"iterate",Il),a.forEach((u,c)=>n.call(i,l(u),l(c),o))}}function pp(e,t,r){return function(...n){const i=this.__v_raw,o=fe(i),a=Pc(o),s=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,u=i[e](...n),c=r?QT:t?rP:Dd;return!t&&En(o,"iterate",l?Ww:Il),{next(){const{value:f,done:h}=u.next();return h?{value:f,done:h}:{value:s?[c(f[0]),c(f[1])]:c(f),done:h}},[Symbol.iterator](){return this}}}}function Aa(e){return function(...t){return e==="delete"?!1:this}}function $j(){const e={get(o){return cp(this,o)},get size(){return hp(this)},has:fp,add:BC,set:$C,delete:zC,clear:VC,forEach:dp(!1,!1)},t={get(o){return cp(this,o,!1,!0)},get size(){return hp(this)},has:fp,add:BC,set:$C,delete:zC,clear:VC,forEach:dp(!1,!0)},r={get(o){return cp(this,o,!0)},get size(){return hp(this,!0)},has(o){return fp.call(this,o,!0)},add:Aa("add"),set:Aa("set"),delete:Aa("delete"),clear:Aa("clear"),forEach:dp(!0,!1)},n={get(o){return cp(this,o,!0,!0)},get size(){return hp(this,!0)},has(o){return fp.call(this,o,!0)},add:Aa("add"),set:Aa("set"),delete:Aa("delete"),clear:Aa("clear"),forEach:dp(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{e[o]=pp(o,!1,!1),r[o]=pp(o,!0,!1),t[o]=pp(o,!1,!0),n[o]=pp(o,!0,!0)}),[e,r,t,n]}const[zj,Vj,Uj,Gj]=$j();function tP(e,t){const r=t?e?Gj:Uj:e?Vj:zj;return(n,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(se(r,i)&&i in n?r:n,i,o)}const jj={get:tP(!1,!1)},Wj={get:tP(!1,!0)},Hj={get:tP(!0,!1)},T8=new WeakMap,P8=new WeakMap,E8=new WeakMap,Xj=new WeakMap;function Yj(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function qj(e){return e.__v_skip||!Object.isExtensible(e)?0:Yj(bj(e))}function of(e){return Rd(e)?e:eP(e,!1,S8,jj,T8)}function Zj(e){return eP(e,!1,Bj,Wj,P8)}function A8(e){return eP(e,!0,Fj,Hj,E8)}function eP(e,t,r,n,i){if(!Qe(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=i.get(e);if(o)return o;const a=qj(e);if(a===0)return e;const s=new Proxy(e,a===2?n:r);return i.set(e,s),s}function ra(e){return Rd(e)?ra(e.__v_raw):!!(e&&e.__v_isReactive)}function Rd(e){return!!(e&&e.__v_isReadonly)}function Xw(e){return!!(e&&e.__v_isShallow)}function C8(e){return ra(e)||Rd(e)}function fe(e){const t=e&&e.__v_raw;return t?fe(t):e}function pi(e){return sm(e,"__v_skip",!0),e}const Dd=e=>Qe(e)?of(e):e,rP=e=>Qe(e)?A8(e):e;function M8(e){fs&&gi&&(e=fe(e),_8(e.dep||(e.dep=ZT())))}function k8(e,t){e=fe(e),e.dep&&Hw(e.dep)}function He(e){return!!(e&&e.__v_isRef===!0)}function P1(e){return x8(e,!1)}function Sg(e){return x8(e,!0)}function x8(e,t){return He(e)?e:new Kj(e,t)}class Kj{constructor(t,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?t:fe(t),this._value=r?t:Dd(t)}get value(){return M8(this),this._value}set value(t){t=this.__v_isShallow?t:fe(t),Od(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:Dd(t),k8(this))}}function mr(e){return He(e)?e.value:e}const Jj={get:(e,t,r)=>mr(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const i=e[t];return He(i)&&!He(r)?(i.value=r,!0):Reflect.set(e,t,r,n)}};function L8(e){return ra(e)?e:new Proxy(e,Jj)}function Yw(e){const t=Ft(e)?new Array(e.length):{};for(const r in e)t[r]=Tg(e,r);return t}class Qj{constructor(t,r,n){this._object=t,this._key=r,this._defaultValue=n,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function Tg(e,t,r){const n=e[t];return He(n)?n:new Qj(e,t,r)}class tW{constructor(t,r,n,i){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new KT(t,()=>{this._dirty||(this._dirty=!0,k8(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const t=fe(this);return M8(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function eW(e,t,r=!1){let n,i;const o=Gt(e);return o?(n=e,i=Ti):(n=e.get,i=e.set),new tW(n,i,o||!i,r)}function hs(e,t,r,n){let i;try{i=n?e(...n):e()}catch(o){E1(o,t,r)}return i}function Pi(e,t,r,n){if(Gt(e)){const o=hs(e,t,r,n);return o&&f8(o)&&o.catch(a=>{E1(a,t,r)}),o}const i=[];for(let o=0;o<e.length;o++)i.push(Pi(e[o],t,r,n));return i}function E1(e,t,r,n=!0){const i=t?t.vnode:null;if(t){let o=t.parent;const a=t.proxy,s=r;for(;o;){const u=o.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](e,a,s)===!1)return}o=o.parent}const l=t.appContext.config.errorHandler;if(l){hs(l,null,10,[e,a,s]);return}}rW(e,r,i,n)}function rW(e,t,r,n=!0){console.error(e)}let um=!1,qw=!1;const yn=[];let Zo=0;const nd=[];let Vh=null,ic=0;const id=[];let Ja=null,oc=0;const I8=Promise.resolve();let nP=null,Zw=null;function Nd(e){const t=nP||I8;return e?t.then(this?e.bind(this):e):t}function nW(e){let t=Zo+1,r=yn.length;for(;t<r;){const n=t+r>>>1;Fd(yn[n])<e?t=n+1:r=n}return t}function O8(e){(!yn.length||!yn.includes(e,um&&e.allowRecurse?Zo+1:Zo))&&e!==Zw&&(e.id==null?yn.push(e):yn.splice(nW(e.id),0,e),R8())}function R8(){!um&&!qw&&(qw=!0,nP=I8.then(F8))}function iW(e){const t=yn.indexOf(e);t>Zo&&yn.splice(t,1)}function D8(e,t,r,n){Ft(e)?r.push(...e):(!t||!t.includes(e,e.allowRecurse?n+1:n))&&r.push(e),R8()}function oW(e){D8(e,Vh,nd,ic)}function aW(e){D8(e,Ja,id,oc)}function A1(e,t=null){if(nd.length){for(Zw=t,Vh=[...new Set(nd)],nd.length=0,ic=0;ic<Vh.length;ic++)Vh[ic]();Vh=null,ic=0,Zw=null,A1(e,t)}}function N8(e){if(A1(),id.length){const t=[...new Set(id)];if(id.length=0,Ja){Ja.push(...t);return}for(Ja=t,Ja.sort((r,n)=>Fd(r)-Fd(n)),oc=0;oc<Ja.length;oc++)Ja[oc]();Ja=null,oc=0}}const Fd=e=>e.id==null?1/0:e.id;function F8(e){qw=!1,um=!0,A1(e),yn.sort((r,n)=>Fd(r)-Fd(n));const t=Ti;try{for(Zo=0;Zo<yn.length;Zo++){const r=yn[Zo];r&&r.active!==!1&&hs(r,null,14)}}finally{Zo=0,yn.length=0,N8(),um=!1,nP=null,(yn.length||nd.length||id.length)&&F8(e)}}function sW(e,t,...r){if(e.isUnmounted)return;const n=e.vnode.props||xe;let i=r;const o=t.startsWith("update:"),a=o&&t.slice(7);if(a&&a in n){const c=`${a==="modelValue"?"model":a}Modifiers`,{number:f,trim:h}=n[c]||xe;h&&(i=r.map(d=>d.trim())),f&&(i=r.map(lm))}let s,l=n[s=a_(t)]||n[s=a_(bo(t))];!l&&o&&(l=n[s=a_(ef(t))]),l&&Pi(l,e,6,i);const u=n[s+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,Pi(u,e,6,i)}}function B8(e,t,r=!1){const n=t.emitsCache,i=n.get(e);if(i!==void 0)return i;const o=e.emits;let a={},s=!1;if(!Gt(e)){const l=u=>{const c=B8(u,t,!0);c&&(s=!0,Yr(a,c))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!o&&!s?(n.set(e,null),null):(Ft(o)?o.forEach(l=>a[l]=null):Yr(a,o),n.set(e,a),a)}function C1(e,t){return!e||!b1(t)?!1:(t=t.slice(2).replace(/Once$/,""),se(e,t[0].toLowerCase()+t.slice(1))||se(e,ef(t))||se(e,t))}let Rr=null,M1=null;function cm(e){const t=Rr;return Rr=e,M1=e&&e.type.__scopeId||null,t}function cn(e){M1=e}function fn(){M1=null}function Le(e,t=Rr,r){if(!t||e._n)return e;const n=(...i)=>{n._d&&JC(-1);const o=cm(t),a=e(...i);return cm(o),n._d&&JC(1),a};return n._n=!0,n._c=!0,n._d=!0,n}function s_(e){const{type:t,vnode:r,proxy:n,withProxy:i,props:o,propsOptions:[a],slots:s,attrs:l,emit:u,render:c,renderCache:f,data:h,setupState:d,ctx:p,inheritAttrs:v}=e;let g,m;const y=cm(e);try{if(r.shapeFlag&4){const b=i||n;g=lo(c.call(b,b,f,o,d,h,p)),m=l}else{const b=t;g=lo(b.length>1?b(o,{attrs:l,slots:s,emit:u}):b(o,null)),m=t.props?l:lW(l)}}catch(b){ad.length=0,E1(b,e,1),g=kt(_s)}let _=g;if(m&&v!==!1){const b=Object.keys(m),{shapeFlag:T}=_;b.length&&T&7&&(a&&b.some(XT)&&(m=uW(m,a)),_=Fc(_,m))}return r.dirs&&(_=Fc(_),_.dirs=_.dirs?_.dirs.concat(r.dirs):r.dirs),r.transition&&(_.transition=r.transition),g=_,cm(y),g}const lW=e=>{let t;for(const r in e)(r==="class"||r==="style"||b1(r))&&((t||(t={}))[r]=e[r]);return t},uW=(e,t)=>{const r={};for(const n in e)(!XT(n)||!(n.slice(9)in t))&&(r[n]=e[n]);return r};function cW(e,t,r){const{props:n,children:i,component:o}=e,{props:a,children:s,patchFlag:l}=t,u=o.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?UC(n,a,u):!!a;if(l&8){const c=t.dynamicProps;for(let f=0;f<c.length;f++){const h=c[f];if(a[h]!==n[h]&&!C1(u,h))return!0}}}else return(i||s)&&(!s||!s.$stable)?!0:n===a?!1:n?a?UC(n,a,u):!0:!!a;return!1}function UC(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const o=n[i];if(t[o]!==e[o]&&!C1(r,o))return!0}return!1}function fW({vnode:e,parent:t},r){for(;t&&t.subTree===e;)(e=t.vnode).el=r,t=t.parent}const hW=e=>e.__isSuspense;function dW(e,t){t&&t.pendingBranch?Ft(e)?t.effects.push(...e):t.effects.push(e):aW(e)}function Pg(e,t){if(cr){let r=cr.provides;const n=cr.parent&&cr.parent.provides;n===r&&(r=cr.provides=Object.create(n)),r[e]=t}}function wn(e,t,r=!1){const n=cr||Rr;if(n){const i=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return r&&Gt(t)?t.call(n.proxy):t}}function GC(e,t){return iP(e,null,t)}const jC={};function ho(e,t,r){return iP(e,t,r)}function iP(e,t,{immediate:r,deep:n,flush:i,onTrack:o,onTrigger:a}=xe){const s=cr;let l,u=!1,c=!1;if(He(e)?(l=()=>e.value,u=Xw(e)):ra(e)?(l=()=>e,n=!0):Ft(e)?(c=!0,u=e.some(m=>ra(m)||Xw(m)),l=()=>e.map(m=>{if(He(m))return m.value;if(ra(m))return Pl(m);if(Gt(m))return hs(m,s,2)})):Gt(e)?t?l=()=>hs(e,s,2):l=()=>{if(!(s&&s.isUnmounted))return f&&f(),Pi(e,s,3,[h])}:l=Ti,t&&n){const m=l;l=()=>Pl(m())}let f,h=m=>{f=g.onStop=()=>{hs(m,s,4)}};if($d)return h=Ti,t?r&&Pi(t,s,3,[l(),c?[]:void 0,h]):l(),Ti;let d=c?[]:jC;const p=()=>{if(!!g.active)if(t){const m=g.run();(n||u||(c?m.some((y,_)=>Od(y,d[_])):Od(m,d)))&&(f&&f(),Pi(t,s,3,[m,d===jC?void 0:d,h]),d=m)}else g.run()};p.allowRecurse=!!t;let v;i==="sync"?v=p:i==="post"?v=()=>tn(p,s&&s.suspense):v=()=>oW(p);const g=new KT(l,v);return t?r?p():d=g.run():i==="post"?tn(g.run.bind(g),s&&s.suspense):g.run(),()=>{g.stop(),s&&s.scope&&YT(s.scope.effects,g)}}function pW(e,t,r){const n=this.proxy,i=fr(e)?e.includes(".")?$8(n,e):()=>n[e]:e.bind(n,n);let o;Gt(t)?o=t:(o=t.handler,r=t);const a=cr;Bc(this);const s=iP(i,o.bind(n),r);return a?Bc(a):Ol(),s}function $8(e,t){const r=t.split(".");return()=>{let n=e;for(let i=0;i<r.length&&n;i++)n=n[r[i]];return n}}function Pl(e,t){if(!Qe(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),He(e))Pl(e.value,t);else if(Ft(e))for(let r=0;r<e.length;r++)Pl(e[r],t);else if(tf(e)||Pc(e))e.forEach(r=>{Pl(r,t)});else if(d8(e))for(const r in e)Pl(e[r],t);return e}function oP(e){return Gt(e)?{setup:e,name:e.name}:e}const od=e=>!!e.type.__asyncLoader,z8=e=>e.type.__isKeepAlive;function vW(e,t){V8(e,"a",t)}function gW(e,t){V8(e,"da",t)}function V8(e,t,r=cr){const n=e.__wdc||(e.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(k1(t,n,r),r){let i=r.parent;for(;i&&i.parent;)z8(i.parent.vnode)&&mW(n,t,r,i),i=i.parent}}function mW(e,t,r,n){const i=k1(t,e,n,!0);x1(()=>{YT(n[t],i)},r)}function k1(e,t,r=cr,n=!1){if(r){const i=r[e]||(r[e]=[]),o=t.__weh||(t.__weh=(...a)=>{if(r.isUnmounted)return;rf(),Bc(r);const s=Pi(t,r,e,a);return Ol(),nf(),s});return n?i.unshift(o):i.push(o),o}}const ga=e=>(t,r=cr)=>(!$d||e==="sp")&&k1(e,t,r),yW=ga("bm"),U8=ga("m"),_W=ga("bu"),bW=ga("u"),wW=ga("bum"),x1=ga("um"),SW=ga("sp"),TW=ga("rtg"),PW=ga("rtc");function EW(e,t=cr){k1("ec",e,t)}function Tt(e,t){const r=Rr;if(r===null)return e;const n=I1(r)||r.proxy,i=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[a,s,l,u=xe]=t[o];Gt(a)&&(a={mounted:a,updated:a}),a.deep&&Pl(s),i.push({dir:a,instance:n,value:s,oldValue:void 0,arg:l,modifiers:u})}return e}function zs(e,t,r,n){const i=e.dirs,o=t&&t.dirs;for(let a=0;a<i.length;a++){const s=i[a];o&&(s.oldValue=o[a].value);let l=s.dir[n];l&&(rf(),Pi(l,r,8,[e.el,s,e,t]),nf())}}const G8="components";function pe(e,t){return CW(G8,e,!0,t)||e}const AW=Symbol();function CW(e,t,r=!0,n=!1){const i=Rr||cr;if(i){const o=i.type;if(e===G8){const s=nH(o,!1);if(s&&(s===t||s===bo(t)||s===S1(bo(t))))return o}const a=WC(i[e]||o[e],t)||WC(i.appContext[e],t);return!a&&n?o:a}}function WC(e,t){return e&&(e[t]||e[bo(t)]||e[S1(bo(t))])}function Nt(e,t,r,n){let i;const o=r&&r[n];if(Ft(e)||fr(e)){i=new Array(e.length);for(let a=0,s=e.length;a<s;a++)i[a]=t(e[a],a,void 0,o&&o[a])}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,o&&o[a])}else if(Qe(e))if(e[Symbol.iterator])i=Array.from(e,(a,s)=>t(a,s,void 0,o&&o[s]));else{const a=Object.keys(e);i=new Array(a.length);for(let s=0,l=a.length;s<l;s++){const u=a[s];i[s]=t(e[u],u,s,o&&o[s])}}else i=[];return r&&(r[n]=i),i}function MW(e,t,r={},n,i){if(Rr.isCE||Rr.parent&&od(Rr.parent)&&Rr.parent.isCE)return kt("slot",t==="default"?null:{name:t},n&&n());let o=e[t];o&&o._c&&(o._d=!1),D();const a=o&&j8(o(r)),s=bs(W,{key:r.key||`_${t}`},a||(n?n():[]),a&&e._===1?64:-2);return!i&&s.scopeId&&(s.slotScopeIds=[s.scopeId+"-s"]),o&&o._c&&(o._d=!0),s}function j8(e){return e.some(t=>dm(t)?!(t.type===_s||t.type===W&&!j8(t.children)):!0)?e:null}const Kw=e=>e?r7(e)?I1(e)||e.proxy:Kw(e.parent):null,fm=Yr(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Kw(e.parent),$root:e=>Kw(e.root),$emit:e=>e.emit,$options:e=>H8(e),$forceUpdate:e=>e.f||(e.f=()=>O8(e.update)),$nextTick:e=>e.n||(e.n=Nd.bind(e.proxy)),$watch:e=>pW.bind(e)}),kW={get({_:e},t){const{ctx:r,setupState:n,data:i,props:o,accessCache:a,type:s,appContext:l}=e;let u;if(t[0]!=="$"){const d=a[t];if(d!==void 0)switch(d){case 1:return n[t];case 2:return i[t];case 4:return r[t];case 3:return o[t]}else{if(n!==xe&&se(n,t))return a[t]=1,n[t];if(i!==xe&&se(i,t))return a[t]=2,i[t];if((u=e.propsOptions[0])&&se(u,t))return a[t]=3,o[t];if(r!==xe&&se(r,t))return a[t]=4,r[t];Jw&&(a[t]=0)}}const c=fm[t];let f,h;if(c)return t==="$attrs"&&En(e,"get",t),c(e);if((f=s.__cssModules)&&(f=f[t]))return f;if(r!==xe&&se(r,t))return a[t]=4,r[t];if(h=l.config.globalProperties,se(h,t))return h[t]},set({_:e},t,r){const{data:n,setupState:i,ctx:o}=e;return i!==xe&&se(i,t)?(i[t]=r,!0):n!==xe&&se(n,t)?(n[t]=r,!0):se(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:n,appContext:i,propsOptions:o}},a){let s;return!!r[a]||e!==xe&&se(e,a)||t!==xe&&se(t,a)||(s=o[0])&&se(s,a)||se(n,a)||se(fm,a)||se(i.config.globalProperties,a)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:se(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};let Jw=!0;function xW(e){const t=H8(e),r=e.proxy,n=e.ctx;Jw=!1,t.beforeCreate&&HC(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:a,watch:s,provide:l,inject:u,created:c,beforeMount:f,mounted:h,beforeUpdate:d,updated:p,activated:v,deactivated:g,beforeDestroy:m,beforeUnmount:y,destroyed:_,unmounted:b,render:T,renderTracked:S,renderTriggered:P,errorCaptured:C,serverPrefetch:A,expose:M,inheritAttrs:k,components:O,directives:F,filters:z}=t;if(u&&LW(u,n,null,e.appContext.config.unwrapInjectedRef),a)for(const Z in a){const q=a[Z];Gt(q)&&(n[Z]=q.bind(r))}if(i){const Z=i.call(r,r);Qe(Z)&&(e.data=of(Z))}if(Jw=!0,o)for(const Z in o){const q=o[Z],tt=Gt(q)?q.bind(r,r):Gt(q.get)?q.get.bind(r,r):Ti,Pt=!Gt(q)&&Gt(q.set)?q.set.bind(r):Ti,Ot=Ye({get:tt,set:Pt});Object.defineProperty(n,Z,{enumerable:!0,configurable:!0,get:()=>Ot.value,set:bt=>Ot.value=bt})}if(s)for(const Z in s)W8(s[Z],n,r,Z);if(l){const Z=Gt(l)?l.call(r):l;Reflect.ownKeys(Z).forEach(q=>{Pg(q,Z[q])})}c&&HC(c,e,"c");function j(Z,q){Ft(q)?q.forEach(tt=>Z(tt.bind(r))):q&&Z(q.bind(r))}if(j(yW,f),j(U8,h),j(_W,d),j(bW,p),j(vW,v),j(gW,g),j(EW,C),j(PW,S),j(TW,P),j(wW,y),j(x1,b),j(SW,A),Ft(M))if(M.length){const Z=e.exposed||(e.exposed={});M.forEach(q=>{Object.defineProperty(Z,q,{get:()=>r[q],set:tt=>r[q]=tt})})}else e.exposed||(e.exposed={});T&&e.render===Ti&&(e.render=T),k!=null&&(e.inheritAttrs=k),O&&(e.components=O),F&&(e.directives=F)}function LW(e,t,r=Ti,n=!1){Ft(e)&&(e=Qw(e));for(const i in e){const o=e[i];let a;Qe(o)?"default"in o?a=wn(o.from||i,o.default,!0):a=wn(o.from||i):a=wn(o),He(a)&&n?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>a.value,set:s=>a.value=s}):t[i]=a}}function HC(e,t,r){Pi(Ft(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,r)}function W8(e,t,r,n){const i=n.includes(".")?$8(r,n):()=>r[n];if(fr(e)){const o=t[e];Gt(o)&&ho(i,o)}else if(Gt(e))ho(i,e.bind(r));else if(Qe(e))if(Ft(e))e.forEach(o=>W8(o,t,r,n));else{const o=Gt(e.handler)?e.handler.bind(r):t[e.handler];Gt(o)&&ho(i,o,e)}}function H8(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:a}}=e.appContext,s=o.get(t);let l;return s?l=s:!i.length&&!r&&!n?l=t:(l={},i.length&&i.forEach(u=>hm(l,u,a,!0)),hm(l,t,a)),o.set(t,l),l}function hm(e,t,r,n=!1){const{mixins:i,extends:o}=t;o&&hm(e,o,r,!0),i&&i.forEach(a=>hm(e,a,r,!0));for(const a in t)if(!(n&&a==="expose")){const s=IW[a]||r&&r[a];e[a]=s?s(e[a],t[a]):t[a]}return e}const IW={data:XC,props:gl,emits:gl,methods:gl,computed:gl,beforeCreate:Ur,created:Ur,beforeMount:Ur,mounted:Ur,beforeUpdate:Ur,updated:Ur,beforeDestroy:Ur,beforeUnmount:Ur,destroyed:Ur,unmounted:Ur,activated:Ur,deactivated:Ur,errorCaptured:Ur,serverPrefetch:Ur,components:gl,directives:gl,watch:RW,provide:XC,inject:OW};function XC(e,t){return t?e?function(){return Yr(Gt(e)?e.call(this,this):e,Gt(t)?t.call(this,this):t)}:t:e}function OW(e,t){return gl(Qw(e),Qw(t))}function Qw(e){if(Ft(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function Ur(e,t){return e?[...new Set([].concat(e,t))]:t}function gl(e,t){return e?Yr(Yr(Object.create(null),e),t):t}function RW(e,t){if(!e)return t;if(!t)return e;const r=Yr(Object.create(null),e);for(const n in t)r[n]=Ur(e[n],t[n]);return r}function DW(e,t,r,n=!1){const i={},o={};sm(o,L1,1),e.propsDefaults=Object.create(null),X8(e,t,i,o);for(const a in e.propsOptions[0])a in i||(i[a]=void 0);r?e.props=n?i:Zj(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function NW(e,t,r,n){const{props:i,attrs:o,vnode:{patchFlag:a}}=e,s=fe(i),[l]=e.propsOptions;let u=!1;if((n||a>0)&&!(a&16)){if(a&8){const c=e.vnode.dynamicProps;for(let f=0;f<c.length;f++){let h=c[f];if(C1(e.emitsOptions,h))continue;const d=t[h];if(l)if(se(o,h))d!==o[h]&&(o[h]=d,u=!0);else{const p=bo(h);i[p]=tS(l,s,p,d,e,!1)}else d!==o[h]&&(o[h]=d,u=!0)}}}else{X8(e,t,i,o)&&(u=!0);let c;for(const f in s)(!t||!se(t,f)&&((c=ef(f))===f||!se(t,c)))&&(l?r&&(r[f]!==void 0||r[c]!==void 0)&&(i[f]=tS(l,s,f,void 0,e,!0)):delete i[f]);if(o!==s)for(const f in o)(!t||!se(t,f)&&!0)&&(delete o[f],u=!0)}u&&aa(e,"set","$attrs")}function X8(e,t,r,n){const[i,o]=e.propsOptions;let a=!1,s;if(t)for(let l in t){if(bg(l))continue;const u=t[l];let c;i&&se(i,c=bo(l))?!o||!o.includes(c)?r[c]=u:(s||(s={}))[c]=u:C1(e.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,a=!0)}if(o){const l=fe(r),u=s||xe;for(let c=0;c<o.length;c++){const f=o[c];r[f]=tS(i,l,f,u[f],e,!se(u,f))}}return a}function tS(e,t,r,n,i,o){const a=e[r];if(a!=null){const s=se(a,"default");if(s&&n===void 0){const l=a.default;if(a.type!==Function&&Gt(l)){const{propsDefaults:u}=i;r in u?n=u[r]:(Bc(i),n=u[r]=l.call(null,t),Ol())}else n=l}a[0]&&(o&&!s?n=!1:a[1]&&(n===""||n===ef(r))&&(n=!0))}return n}function Y8(e,t,r=!1){const n=t.propsCache,i=n.get(e);if(i)return i;const o=e.props,a={},s=[];let l=!1;if(!Gt(e)){const c=f=>{l=!0;const[h,d]=Y8(f,t,!0);Yr(a,h),d&&s.push(...d)};!r&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!o&&!l)return n.set(e,Tc),Tc;if(Ft(o))for(let c=0;c<o.length;c++){const f=bo(o[c]);YC(f)&&(a[f]=xe)}else if(o)for(const c in o){const f=bo(c);if(YC(f)){const h=o[c],d=a[f]=Ft(h)||Gt(h)?{type:h}:h;if(d){const p=KC(Boolean,d.type),v=KC(String,d.type);d[0]=p>-1,d[1]=v<0||p<v,(p>-1||se(d,"default"))&&s.push(f)}}}const u=[a,s];return n.set(e,u),u}function YC(e){return e[0]!=="$"}function qC(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function ZC(e,t){return qC(e)===qC(t)}function KC(e,t){return Ft(t)?t.findIndex(r=>ZC(r,e)):Gt(t)&&ZC(t,e)?0:-1}const q8=e=>e[0]==="_"||e==="$stable",aP=e=>Ft(e)?e.map(lo):[lo(e)],FW=(e,t,r)=>{if(t._n)return t;const n=Le((...i)=>aP(t(...i)),r);return n._c=!1,n},Z8=(e,t,r)=>{const n=e._ctx;for(const i in e){if(q8(i))continue;const o=e[i];if(Gt(o))t[i]=FW(i,o,n);else if(o!=null){const a=aP(o);t[i]=()=>a}}},K8=(e,t)=>{const r=aP(t);e.slots.default=()=>r},BW=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=fe(t),sm(t,"_",r)):Z8(t,e.slots={})}else e.slots={},t&&K8(e,t);sm(e.slots,L1,1)},$W=(e,t,r)=>{const{vnode:n,slots:i}=e;let o=!0,a=xe;if(n.shapeFlag&32){const s=t._;s?r&&s===1?o=!1:(Yr(i,t),!r&&s===1&&delete i._):(o=!t.$stable,Z8(t,i)),a=t}else t&&(K8(e,t),a={default:1});if(o)for(const s in i)!q8(s)&&!(s in a)&&delete i[s]};function J8(){return{app:null,config:{isNativeTag:mj,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let zW=0;function VW(e,t){return function(n,i=null){Gt(n)||(n=Object.assign({},n)),i!=null&&!Qe(i)&&(i=null);const o=J8(),a=new Set;let s=!1;const l=o.app={_uid:zW++,_component:n,_props:i,_container:null,_context:o,_instance:null,version:oH,get config(){return o.config},set config(u){},use(u,...c){return a.has(u)||(u&&Gt(u.install)?(a.add(u),u.install(l,...c)):Gt(u)&&(a.add(u),u(l,...c))),l},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),l},component(u,c){return c?(o.components[u]=c,l):o.components[u]},directive(u,c){return c?(o.directives[u]=c,l):o.directives[u]},mount(u,c,f){if(!s){const h=kt(n,i);return h.appContext=o,c&&t?t(h,u):e(h,u,f),s=!0,l._container=u,u.__vue_app__=l,I1(h.component)||h.component.proxy}},unmount(){s&&(e(null,l._container),delete l._container.__vue_app__)},provide(u,c){return o.provides[u]=c,l}};return l}}function eS(e,t,r,n,i=!1){if(Ft(e)){e.forEach((h,d)=>eS(h,t&&(Ft(t)?t[d]:t),r,n,i));return}if(od(n)&&!i)return;const o=n.shapeFlag&4?I1(n.component)||n.component.proxy:n.el,a=i?null:o,{i:s,r:l}=e,u=t&&t.r,c=s.refs===xe?s.refs={}:s.refs,f=s.setupState;if(u!=null&&u!==l&&(fr(u)?(c[u]=null,se(f,u)&&(f[u]=null)):He(u)&&(u.value=null)),Gt(l))hs(l,s,12,[a,c]);else{const h=fr(l),d=He(l);if(h||d){const p=()=>{if(e.f){const v=h?c[l]:l.value;i?Ft(v)&&YT(v,o):Ft(v)?v.includes(o)||v.push(o):h?(c[l]=[o],se(f,l)&&(f[l]=c[l])):(l.value=[o],e.k&&(c[e.k]=l.value))}else h?(c[l]=a,se(f,l)&&(f[l]=a)):d&&(l.value=a,e.k&&(c[e.k]=a))};a?(p.id=-1,tn(p,r)):p()}}}const tn=dW;function UW(e){return GW(e)}function GW(e,t){const r=Tj();r.__VUE__=!0;const{insert:n,remove:i,patchProp:o,createElement:a,createText:s,createComment:l,setText:u,setElementText:c,parentNode:f,nextSibling:h,setScopeId:d=Ti,cloneNode:p,insertStaticContent:v}=e,g=(B,G,X,J=null,Q=null,lt=null,vt=!1,at=null,it=!!G.dynamicChildren)=>{if(B===G)return;B&&!Uf(B,G)&&(J=dt(B),wt(B,Q,lt,!0),B=null),G.patchFlag===-2&&(it=!1,G.dynamicChildren=null);const{type:rt,ref:Rt,shapeFlag:Mt}=G;switch(rt){case sP:m(B,G,X,J);break;case _s:y(B,G,X,J);break;case Eg:B==null&&_(G,X,J,vt);break;case W:F(B,G,X,J,Q,lt,vt,at,it);break;default:Mt&1?S(B,G,X,J,Q,lt,vt,at,it):Mt&6?z(B,G,X,J,Q,lt,vt,at,it):(Mt&64||Mt&128)&&rt.process(B,G,X,J,Q,lt,vt,at,it,At)}Rt!=null&&Q&&eS(Rt,B&&B.ref,lt,G||B,!G)},m=(B,G,X,J)=>{if(B==null)n(G.el=s(G.children),X,J);else{const Q=G.el=B.el;G.children!==B.children&&u(Q,G.children)}},y=(B,G,X,J)=>{B==null?n(G.el=l(G.children||""),X,J):G.el=B.el},_=(B,G,X,J)=>{[B.el,B.anchor]=v(B.children,G,X,J,B.el,B.anchor)},b=({el:B,anchor:G},X,J)=>{let Q;for(;B&&B!==G;)Q=h(B),n(B,X,J),B=Q;n(G,X,J)},T=({el:B,anchor:G})=>{let X;for(;B&&B!==G;)X=h(B),i(B),B=X;i(G)},S=(B,G,X,J,Q,lt,vt,at,it)=>{vt=vt||G.type==="svg",B==null?P(G,X,J,Q,lt,vt,at,it):M(B,G,Q,lt,vt,at,it)},P=(B,G,X,J,Q,lt,vt,at)=>{let it,rt;const{type:Rt,props:Mt,shapeFlag:Dt,transition:$t,patchFlag:Kt,dirs:ge}=B;if(B.el&&p!==void 0&&Kt===-1)it=B.el=p(B.el);else{if(it=B.el=a(B.type,lt,Mt&&Mt.is,Mt),Dt&8?c(it,B.children):Dt&16&&A(B.children,it,null,J,Q,lt&&Rt!=="foreignObject",vt,at),ge&&zs(B,null,J,"created"),Mt){for(const Te in Mt)Te!=="value"&&!bg(Te)&&o(it,Te,null,Mt[Te],lt,B.children,J,Q,K);"value"in Mt&&o(it,"value",null,Mt.value),(rt=Mt.onVnodeBeforeMount)&&ji(rt,J,B)}C(it,B,B.scopeId,vt,J)}ge&&zs(B,null,J,"beforeMount");const me=(!Q||Q&&!Q.pendingBranch)&&$t&&!$t.persisted;me&&$t.beforeEnter(it),n(it,G,X),((rt=Mt&&Mt.onVnodeMounted)||me||ge)&&tn(()=>{rt&&ji(rt,J,B),me&&$t.enter(it),ge&&zs(B,null,J,"mounted")},Q)},C=(B,G,X,J,Q)=>{if(X&&d(B,X),J)for(let lt=0;lt<J.length;lt++)d(B,J[lt]);if(Q){let lt=Q.subTree;if(G===lt){const vt=Q.vnode;C(B,vt,vt.scopeId,vt.slotScopeIds,Q.parent)}}},A=(B,G,X,J,Q,lt,vt,at,it=0)=>{for(let rt=it;rt<B.length;rt++){const Rt=B[rt]=at?es(B[rt]):lo(B[rt]);g(null,Rt,G,X,J,Q,lt,vt,at)}},M=(B,G,X,J,Q,lt,vt)=>{const at=G.el=B.el;let{patchFlag:it,dynamicChildren:rt,dirs:Rt}=G;it|=B.patchFlag&16;const Mt=B.props||xe,Dt=G.props||xe;let $t;X&&Vs(X,!1),($t=Dt.onVnodeBeforeUpdate)&&ji($t,X,G,B),Rt&&zs(G,B,X,"beforeUpdate"),X&&Vs(X,!0);const Kt=Q&&G.type!=="foreignObject";if(rt?k(B.dynamicChildren,rt,at,X,J,Kt,lt):vt||tt(B,G,at,null,X,J,Kt,lt,!1),it>0){if(it&16)O(at,G,Mt,Dt,X,J,Q);else if(it&2&&Mt.class!==Dt.class&&o(at,"class",null,Dt.class,Q),it&4&&o(at,"style",Mt.style,Dt.style,Q),it&8){const ge=G.dynamicProps;for(let me=0;me<ge.length;me++){const Te=ge[me],Pr=Mt[Te],Vi=Dt[Te];(Vi!==Pr||Te==="value")&&o(at,Te,Pr,Vi,Q,B.children,X,J,K)}}it&1&&B.children!==G.children&&c(at,G.children)}else!vt&&rt==null&&O(at,G,Mt,Dt,X,J,Q);(($t=Dt.onVnodeUpdated)||Rt)&&tn(()=>{$t&&ji($t,X,G,B),Rt&&zs(G,B,X,"updated")},J)},k=(B,G,X,J,Q,lt,vt)=>{for(let at=0;at<G.length;at++){const it=B[at],rt=G[at],Rt=it.el&&(it.type===W||!Uf(it,rt)||it.shapeFlag&70)?f(it.el):X;g(it,rt,Rt,null,J,Q,lt,vt,!0)}},O=(B,G,X,J,Q,lt,vt)=>{if(X!==J){for(const at in J){if(bg(at))continue;const it=J[at],rt=X[at];it!==rt&&at!=="value"&&o(B,at,rt,it,vt,G.children,Q,lt,K)}if(X!==xe)for(const at in X)!bg(at)&&!(at in J)&&o(B,at,X[at],null,vt,G.children,Q,lt,K);"value"in J&&o(B,"value",X.value,J.value)}},F=(B,G,X,J,Q,lt,vt,at,it)=>{const rt=G.el=B?B.el:s(""),Rt=G.anchor=B?B.anchor:s("");let{patchFlag:Mt,dynamicChildren:Dt,slotScopeIds:$t}=G;$t&&(at=at?at.concat($t):$t),B==null?(n(rt,X,J),n(Rt,X,J),A(G.children,X,Rt,Q,lt,vt,at,it)):Mt>0&&Mt&64&&Dt&&B.dynamicChildren?(k(B.dynamicChildren,Dt,X,Q,lt,vt,at),(G.key!=null||Q&&G===Q.subTree)&&Q8(B,G,!0)):tt(B,G,X,Rt,Q,lt,vt,at,it)},z=(B,G,X,J,Q,lt,vt,at,it)=>{G.slotScopeIds=at,B==null?G.shapeFlag&512?Q.ctx.activate(G,X,J,vt,it):R(G,X,J,Q,lt,vt,it):j(B,G,it)},R=(B,G,X,J,Q,lt,vt)=>{const at=B.component=JW(B,J,Q);if(z8(B)&&(at.ctx.renderer=At),QW(at),at.asyncDep){if(Q&&Q.registerDep(at,Z),!B.el){const it=at.subTree=kt(_s);y(null,it,G,X)}return}Z(at,B,G,X,Q,lt,vt)},j=(B,G,X)=>{const J=G.component=B.component;if(cW(B,G,X))if(J.asyncDep&&!J.asyncResolved){q(J,G,X);return}else J.next=G,iW(J.update),J.update();else G.el=B.el,J.vnode=G},Z=(B,G,X,J,Q,lt,vt)=>{const at=()=>{if(B.isMounted){let{next:Rt,bu:Mt,u:Dt,parent:$t,vnode:Kt}=B,ge=Rt,me;Vs(B,!1),Rt?(Rt.el=Kt.el,q(B,Rt,vt)):Rt=Kt,Mt&&wg(Mt),(me=Rt.props&&Rt.props.onVnodeBeforeUpdate)&&ji(me,$t,Rt,Kt),Vs(B,!0);const Te=s_(B),Pr=B.subTree;B.subTree=Te,g(Pr,Te,f(Pr.el),dt(Pr),B,Q,lt),Rt.el=Te.el,ge===null&&fW(B,Te.el),Dt&&tn(Dt,Q),(me=Rt.props&&Rt.props.onVnodeUpdated)&&tn(()=>ji(me,$t,Rt,Kt),Q)}else{let Rt;const{el:Mt,props:Dt}=G,{bm:$t,m:Kt,parent:ge}=B,me=od(G);if(Vs(B,!1),$t&&wg($t),!me&&(Rt=Dt&&Dt.onVnodeBeforeMount)&&ji(Rt,ge,G),Vs(B,!0),Mt&&ct){const Te=()=>{B.subTree=s_(B),ct(Mt,B.subTree,B,Q,null)};me?G.type.__asyncLoader().then(()=>!B.isUnmounted&&Te()):Te()}else{const Te=B.subTree=s_(B);g(null,Te,X,J,B,Q,lt),G.el=Te.el}if(Kt&&tn(Kt,Q),!me&&(Rt=Dt&&Dt.onVnodeMounted)){const Te=G;tn(()=>ji(Rt,ge,Te),Q)}(G.shapeFlag&256||ge&&od(ge.vnode)&&ge.vnode.shapeFlag&256)&&B.a&&tn(B.a,Q),B.isMounted=!0,G=X=J=null}},it=B.effect=new KT(at,()=>O8(rt),B.scope),rt=B.update=()=>it.run();rt.id=B.uid,Vs(B,!0),rt()},q=(B,G,X)=>{G.component=B;const J=B.vnode.props;B.vnode=G,B.next=null,NW(B,G.props,J,X),$W(B,G.children,X),rf(),A1(void 0,B.update),nf()},tt=(B,G,X,J,Q,lt,vt,at,it=!1)=>{const rt=B&&B.children,Rt=B?B.shapeFlag:0,Mt=G.children,{patchFlag:Dt,shapeFlag:$t}=G;if(Dt>0){if(Dt&128){Ot(rt,Mt,X,J,Q,lt,vt,at,it);return}else if(Dt&256){Pt(rt,Mt,X,J,Q,lt,vt,at,it);return}}$t&8?(Rt&16&&K(rt,Q,lt),Mt!==rt&&c(X,Mt)):Rt&16?$t&16?Ot(rt,Mt,X,J,Q,lt,vt,at,it):K(rt,Q,lt,!0):(Rt&8&&c(X,""),$t&16&&A(Mt,X,J,Q,lt,vt,at,it))},Pt=(B,G,X,J,Q,lt,vt,at,it)=>{B=B||Tc,G=G||Tc;const rt=B.length,Rt=G.length,Mt=Math.min(rt,Rt);let Dt;for(Dt=0;Dt<Mt;Dt++){const $t=G[Dt]=it?es(G[Dt]):lo(G[Dt]);g(B[Dt],$t,X,null,Q,lt,vt,at,it)}rt>Rt?K(B,Q,lt,!0,!1,Mt):A(G,X,J,Q,lt,vt,at,it,Mt)},Ot=(B,G,X,J,Q,lt,vt,at,it)=>{let rt=0;const Rt=G.length;let Mt=B.length-1,Dt=Rt-1;for(;rt<=Mt&&rt<=Dt;){const $t=B[rt],Kt=G[rt]=it?es(G[rt]):lo(G[rt]);if(Uf($t,Kt))g($t,Kt,X,null,Q,lt,vt,at,it);else break;rt++}for(;rt<=Mt&&rt<=Dt;){const $t=B[Mt],Kt=G[Dt]=it?es(G[Dt]):lo(G[Dt]);if(Uf($t,Kt))g($t,Kt,X,null,Q,lt,vt,at,it);else break;Mt--,Dt--}if(rt>Mt){if(rt<=Dt){const $t=Dt+1,Kt=$t<Rt?G[$t].el:J;for(;rt<=Dt;)g(null,G[rt]=it?es(G[rt]):lo(G[rt]),X,Kt,Q,lt,vt,at,it),rt++}}else if(rt>Dt)for(;rt<=Mt;)wt(B[rt],Q,lt,!0),rt++;else{const $t=rt,Kt=rt,ge=new Map;for(rt=Kt;rt<=Dt;rt++){const zr=G[rt]=it?es(G[rt]):lo(G[rt]);zr.key!=null&&ge.set(zr.key,rt)}let me,Te=0;const Pr=Dt-Kt+1;let Vi=!1,rp=0;const Fs=new Array(Pr);for(rt=0;rt<Pr;rt++)Fs[rt]=0;for(rt=$t;rt<=Mt;rt++){const zr=B[rt];if(Te>=Pr){wt(zr,Q,lt,!0);continue}let kn;if(zr.key!=null)kn=ge.get(zr.key);else for(me=Kt;me<=Dt;me++)if(Fs[me-Kt]===0&&Uf(zr,G[me])){kn=me;break}kn===void 0?wt(zr,Q,lt,!0):(Fs[kn-Kt]=rt+1,kn>=rp?rp=kn:Vi=!0,g(zr,G[kn],X,null,Q,lt,vt,at,it),Te++)}const np=Vi?jW(Fs):Tc;for(me=np.length-1,rt=Pr-1;rt>=0;rt--){const zr=Kt+rt,kn=G[zr],Bs=zr+1<Rt?G[zr+1].el:J;Fs[rt]===0?g(null,kn,X,Bs,Q,lt,vt,at,it):Vi&&(me<0||rt!==np[me]?bt(kn,X,Bs,2):me--)}}},bt=(B,G,X,J,Q=null)=>{const{el:lt,type:vt,transition:at,children:it,shapeFlag:rt}=B;if(rt&6){bt(B.component.subTree,G,X,J);return}if(rt&128){B.suspense.move(G,X,J);return}if(rt&64){vt.move(B,G,X,At);return}if(vt===W){n(lt,G,X);for(let Mt=0;Mt<it.length;Mt++)bt(it[Mt],G,X,J);n(B.anchor,G,X);return}if(vt===Eg){b(B,G,X);return}if(J!==2&&rt&1&&at)if(J===0)at.beforeEnter(lt),n(lt,G,X),tn(()=>at.enter(lt),Q);else{const{leave:Mt,delayLeave:Dt,afterLeave:$t}=at,Kt=()=>n(lt,G,X),ge=()=>{Mt(lt,()=>{Kt(),$t&&$t()})};Dt?Dt(lt,Kt,ge):ge()}else n(lt,G,X)},wt=(B,G,X,J=!1,Q=!1)=>{const{type:lt,props:vt,ref:at,children:it,dynamicChildren:rt,shapeFlag:Rt,patchFlag:Mt,dirs:Dt}=B;if(at!=null&&eS(at,null,X,B,!0),Rt&256){G.ctx.deactivate(B);return}const $t=Rt&1&&Dt,Kt=!od(B);let ge;if(Kt&&(ge=vt&&vt.onVnodeBeforeUnmount)&&ji(ge,G,B),Rt&6)nt(B.component,X,J);else{if(Rt&128){B.suspense.unmount(X,J);return}$t&&zs(B,null,G,"beforeUnmount"),Rt&64?B.type.remove(B,G,X,Q,At,J):rt&&(lt!==W||Mt>0&&Mt&64)?K(rt,G,X,!1,!0):(lt===W&&Mt&384||!Q&&Rt&16)&&K(it,G,X),J&&Ht(B)}(Kt&&(ge=vt&&vt.onVnodeUnmounted)||$t)&&tn(()=>{ge&&ji(ge,G,B),$t&&zs(B,null,G,"unmounted")},X)},Ht=B=>{const{type:G,el:X,anchor:J,transition:Q}=B;if(G===W){Y(X,J);return}if(G===Eg){T(B);return}const lt=()=>{i(X),Q&&!Q.persisted&&Q.afterLeave&&Q.afterLeave()};if(B.shapeFlag&1&&Q&&!Q.persisted){const{leave:vt,delayLeave:at}=Q,it=()=>vt(X,lt);at?at(B.el,lt,it):it()}else lt()},Y=(B,G)=>{let X;for(;B!==G;)X=h(B),i(B),B=X;i(G)},nt=(B,G,X)=>{const{bum:J,scope:Q,update:lt,subTree:vt,um:at}=B;J&&wg(J),Q.stop(),lt&&(lt.active=!1,wt(vt,B,G,X)),at&&tn(at,G),tn(()=>{B.isUnmounted=!0},G),G&&G.pendingBranch&&!G.isUnmounted&&B.asyncDep&&!B.asyncResolved&&B.suspenseId===G.pendingId&&(G.deps--,G.deps===0&&G.resolve())},K=(B,G,X,J=!1,Q=!1,lt=0)=>{for(let vt=lt;vt<B.length;vt++)wt(B[vt],G,X,J,Q)},dt=B=>B.shapeFlag&6?dt(B.component.subTree):B.shapeFlag&128?B.suspense.next():h(B.anchor||B.el),St=(B,G,X)=>{B==null?G._vnode&&wt(G._vnode,null,null,!0):g(G._vnode||null,B,G,null,null,null,X),N8(),G._vnode=B},At={p:g,um:wt,m:bt,r:Ht,mt:R,mc:A,pc:tt,pbc:k,n:dt,o:e};let st,ct;return t&&([st,ct]=t(At)),{render:St,hydrate:st,createApp:VW(St,st)}}function Vs({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function Q8(e,t,r=!1){const n=e.children,i=t.children;if(Ft(n)&&Ft(i))for(let o=0;o<n.length;o++){const a=n[o];let s=i[o];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=i[o]=es(i[o]),s.el=a.el),r||Q8(a,s))}}function jW(e){const t=e.slice(),r=[0];let n,i,o,a,s;const l=e.length;for(n=0;n<l;n++){const u=e[n];if(u!==0){if(i=r[r.length-1],e[i]<u){t[n]=i,r.push(n);continue}for(o=0,a=r.length-1;o<a;)s=o+a>>1,e[r[s]]<u?o=s+1:a=s;u<e[r[o]]&&(o>0&&(t[n]=r[o-1]),r[o]=n)}}for(o=r.length,a=r[o-1];o-- >0;)r[o]=a,a=t[a];return r}const WW=e=>e.__isTeleport,W=Symbol(void 0),sP=Symbol(void 0),_s=Symbol(void 0),Eg=Symbol(void 0),ad=[];let mi=null;function D(e=!1){ad.push(mi=e?null:[])}function HW(){ad.pop(),mi=ad[ad.length-1]||null}let Bd=1;function JC(e){Bd+=e}function t7(e){return e.dynamicChildren=Bd>0?mi||Tc:null,HW(),Bd>0&&mi&&mi.push(e),e}function $(e,t,r,n,i,o){return t7(w(e,t,r,n,i,o,!0))}function bs(e,t,r,n,i){return t7(kt(e,t,r,n,i,!0))}function dm(e){return e?e.__v_isVNode===!0:!1}function Uf(e,t){return e.type===t.type&&e.key===t.key}const L1="__vInternal",e7=({key:e})=>e!=null?e:null,Ag=({ref:e,ref_key:t,ref_for:r})=>e!=null?fr(e)||He(e)||Gt(e)?{i:Rr,r:e,k:t,f:!!r}:e:null;function w(e,t=null,r=null,n=0,i=null,o=e===W?0:1,a=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&e7(t),ref:t&&Ag(t),scopeId:M1,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null};return s?(uP(l,r),o&128&&e.normalize(l)):r&&(l.shapeFlag|=fr(r)?8:16),Bd>0&&!a&&mi&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&mi.push(l),l}const kt=XW;function XW(e,t=null,r=null,n=0,i=null,o=!1){if((!e||e===AW)&&(e=_s),dm(e)){const s=Fc(e,t,!0);return r&&uP(s,r),Bd>0&&!o&&mi&&(s.shapeFlag&6?mi[mi.indexOf(e)]=s:mi.push(s)),s.patchFlag|=-2,s}if(iH(e)&&(e=e.__vccOpts),t){t=YW(t);let{class:s,style:l}=t;s&&!fr(s)&&(t.class=Sn(s)),Qe(l)&&(C8(l)&&!Ft(l)&&(l=Yr({},l)),t.style=Ll(l))}const a=fr(e)?1:hW(e)?128:WW(e)?64:Qe(e)?4:Gt(e)?2:0;return w(e,t,r,n,i,a,o,!0)}function YW(e){return e?C8(e)||L1 in e?Yr({},e):e:null}function Fc(e,t,r=!1){const{props:n,ref:i,patchFlag:o,children:a}=e,s=t?qW(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:s,key:s&&e7(s),ref:t&&t.ref?r&&i?Ft(i)?i.concat(Ag(t)):[i,Ag(t)]:Ag(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==W?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Fc(e.ssContent),ssFallback:e.ssFallback&&Fc(e.ssFallback),el:e.el,anchor:e.anchor}}function U(e=" ",t=0){return kt(sP,null,e,t)}function lP(e,t){const r=kt(Eg,null,e);return r.staticCount=t,r}function pt(e="",t=!1){return t?(D(),bs(_s,null,e)):kt(_s,null,e)}function lo(e){return e==null||typeof e=="boolean"?kt(_s):Ft(e)?kt(W,null,e.slice()):typeof e=="object"?es(e):kt(sP,null,String(e))}function es(e){return e.el===null||e.memo?e:Fc(e)}function uP(e,t){let r=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(Ft(t))r=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),uP(e,i()),i._c&&(i._d=!0));return}else{r=32;const i=t._;!i&&!(L1 in t)?t._ctx=Rr:i===3&&Rr&&(Rr.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Gt(t)?(t={default:t,_ctx:Rr},r=32):(t=String(t),n&64?(r=16,t=[U(t)]):r=8);e.children=t,e.shapeFlag|=r}function qW(...e){const t={};for(let r=0;r<e.length;r++){const n=e[r];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=Sn([t.class,n.class]));else if(i==="style")t.style=Ll([t.style,n.style]);else if(b1(i)){const o=t[i],a=n[i];a&&o!==a&&!(Ft(o)&&o.includes(a))&&(t[i]=o?[].concat(o,a):a)}else i!==""&&(t[i]=n[i])}return t}function ji(e,t,r,n=null){Pi(e,t,7,[r,n])}const ZW=J8();let KW=0;function JW(e,t,r){const n=e.type,i=(t?t.appContext:e.appContext)||ZW,o={uid:KW++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new p8(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Y8(n,i),emitsOptions:B8(n,i),emit:null,emitted:null,propsDefaults:xe,inheritAttrs:n.inheritAttrs,ctx:xe,data:xe,props:xe,attrs:xe,slots:xe,refs:xe,setupState:xe,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=sW.bind(null,o),e.ce&&e.ce(o),o}let cr=null;const cP=()=>cr||Rr,Bc=e=>{cr=e,e.scope.on()},Ol=()=>{cr&&cr.scope.off(),cr=null};function r7(e){return e.vnode.shapeFlag&4}let $d=!1;function QW(e,t=!1){$d=t;const{props:r,children:n}=e.vnode,i=r7(e);DW(e,r,i,t),BW(e,n);const o=i?tH(e,t):void 0;return $d=!1,o}function tH(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=pi(new Proxy(e.ctx,kW));const{setup:n}=r;if(n){const i=e.setupContext=n.length>1?rH(e):null;Bc(e),rf();const o=hs(n,e,0,[e.props,i]);if(nf(),Ol(),f8(o)){if(o.then(Ol,Ol),t)return o.then(a=>{QC(e,a,t)}).catch(a=>{E1(a,e,0)});e.asyncDep=o}else QC(e,o,t)}else n7(e,t)}function QC(e,t,r){Gt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Qe(t)&&(e.setupState=L8(t)),n7(e,r)}let tM;function n7(e,t,r){const n=e.type;if(!e.render){if(!t&&tM&&!n.render){const i=n.template;if(i){const{isCustomElement:o,compilerOptions:a}=e.appContext.config,{delimiters:s,compilerOptions:l}=n,u=Yr(Yr({isCustomElement:o,delimiters:s},a),l);n.render=tM(i,u)}}e.render=n.render||Ti}Bc(e),rf(),xW(e),nf(),Ol()}function eH(e){return new Proxy(e.attrs,{get(t,r){return En(e,"get","$attrs"),t[r]}})}function rH(e){const t=n=>{e.exposed=n||{}};let r;return{get attrs(){return r||(r=eH(e))},slots:e.slots,emit:e.emit,expose:t}}function I1(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(L8(pi(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in fm)return fm[r](e)}}))}function nH(e,t=!0){return Gt(e)?e.displayName||e.name:e.name||t&&e.__name}function iH(e){return Gt(e)&&"__vccOpts"in e}const Ye=(e,t)=>eW(e,t,$d);function fP(e,t,r){const n=arguments.length;return n===2?Qe(t)&&!Ft(t)?dm(t)?kt(e,null,[t]):kt(e,t):kt(e,null,t):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&dm(r)&&(r=[r]),kt(e,t,r))}const oH="3.2.37",aH="http://www.w3.org/2000/svg",wl=typeof document<"u"?document:null,eM=wl&&wl.createElement("template"),sH={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const i=t?wl.createElementNS(aH,e):wl.createElement(e,r?{is:r}:void 0);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>wl.createTextNode(e),createComment:e=>wl.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>wl.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,r,n,i,o){const a=r?r.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),r),!(i===o||!(i=i.nextSibling)););else{eM.innerHTML=n?`<svg>${e}</svg>`:e;const s=eM.content;if(n){const l=s.firstChild;for(;l.firstChild;)s.appendChild(l.firstChild);s.removeChild(l)}t.insertBefore(s,r)}return[a?a.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}};function lH(e,t,r){const n=e._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}function uH(e,t,r){const n=e.style,i=fr(r);if(r&&!i){for(const o in r)rS(n,o,r[o]);if(t&&!fr(t))for(const o in t)r[o]==null&&rS(n,o,"")}else{const o=n.display;i?t!==r&&(n.cssText=r):t&&e.removeAttribute("style"),"_vod"in e&&(n.display=o)}}const rM=/\s*!important$/;function rS(e,t,r){if(Ft(r))r.forEach(n=>rS(e,t,n));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const n=cH(e,t);rM.test(r)?e.setProperty(ef(n),r.replace(rM,""),"important"):e[n]=r}}const nM=["Webkit","Moz","ms"],l_={};function cH(e,t){const r=l_[t];if(r)return r;let n=bo(t);if(n!=="filter"&&n in e)return l_[t]=n;n=S1(n);for(let i=0;i<nM.length;i++){const o=nM[i]+n;if(o in e)return l_[t]=o}return t}const iM="http://www.w3.org/1999/xlink";function fH(e,t,r,n,i){if(n&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(iM,t.slice(6,t.length)):e.setAttributeNS(iM,t,r);else{const o=hj(t);r==null||o&&!u8(r)?e.removeAttribute(t):e.setAttribute(t,o?"":r)}}function hH(e,t,r,n,i,o,a){if(t==="innerHTML"||t==="textContent"){n&&a(n,i,o),e[t]=r==null?"":r;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=r;const l=r==null?"":r;(e.value!==l||e.tagName==="OPTION")&&(e.value=l),r==null&&e.removeAttribute(t);return}let s=!1;if(r===""||r==null){const l=typeof e[t];l==="boolean"?r=u8(r):r==null&&l==="string"?(r="",s=!0):l==="number"&&(r=0,s=!0)}try{e[t]=r}catch{}s&&e.removeAttribute(t)}const[i7,dH]=(()=>{let e=Date.now,t=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const r=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(r&&Number(r[1])<=53)}return[e,t]})();let nS=0;const pH=Promise.resolve(),vH=()=>{nS=0},gH=()=>nS||(pH.then(vH),nS=i7());function Ko(e,t,r,n){e.addEventListener(t,r,n)}function mH(e,t,r,n){e.removeEventListener(t,r,n)}function yH(e,t,r,n,i=null){const o=e._vei||(e._vei={}),a=o[t];if(n&&a)a.value=n;else{const[s,l]=_H(t);if(n){const u=o[t]=bH(n,i);Ko(e,s,u,l)}else a&&(mH(e,s,a,l),o[t]=void 0)}}const oM=/(?:Once|Passive|Capture)$/;function _H(e){let t;if(oM.test(e)){t={};let r;for(;r=e.match(oM);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[ef(e.slice(2)),t]}function bH(e,t){const r=n=>{const i=n.timeStamp||i7();(dH||i>=r.attached-1)&&Pi(wH(n,r.value),t,5,[n])};return r.value=e,r.attached=gH(),r}function wH(e,t){if(Ft(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const aM=/^on[a-z]/,SH=(e,t,r,n,i=!1,o,a,s,l)=>{t==="class"?lH(e,n,i):t==="style"?uH(e,r,n):b1(t)?XT(t)||yH(e,t,r,n,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):TH(e,t,n,i))?hH(e,t,n,o,a,s,l):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),fH(e,t,n,i))};function TH(e,t,r,n){return n?!!(t==="innerHTML"||t==="textContent"||t in e&&aM.test(t)&&Gt(r)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||aM.test(t)&&fr(r)?!1:t in e}const ws=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Ft(t)?r=>wg(t,r):t};function PH(e){e.target.composing=!0}function sM(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const le={created(e,{modifiers:{lazy:t,trim:r,number:n}},i){e._assign=ws(i);const o=n||i.props&&i.props.type==="number";Ko(e,t?"change":"input",a=>{if(a.target.composing)return;let s=e.value;r&&(s=s.trim()),o&&(s=lm(s)),e._assign(s)}),r&&Ko(e,"change",()=>{e.value=e.value.trim()}),t||(Ko(e,"compositionstart",PH),Ko(e,"compositionend",sM),Ko(e,"change",sM))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:r,trim:n,number:i}},o){if(e._assign=ws(o),e.composing||document.activeElement===e&&e.type!=="range"&&(r||n&&e.value.trim()===t||(i||e.type==="number")&&lm(e.value)===t))return;const a=t==null?"":t;e.value!==a&&(e.value=a)}},Kn={deep:!0,created(e,t,r){e._assign=ws(r),Ko(e,"change",()=>{const n=e._modelValue,i=$c(e),o=e.checked,a=e._assign;if(Ft(n)){const s=HT(n,i),l=s!==-1;if(o&&!l)a(n.concat(i));else if(!o&&l){const u=[...n];u.splice(s,1),a(u)}}else if(tf(n)){const s=new Set(n);o?s.add(i):s.delete(i),a(s)}else a(o7(e,o))})},mounted:lM,beforeUpdate(e,t,r){e._assign=ws(r),lM(e,t,r)}};function lM(e,{value:t,oldValue:r},n){e._modelValue=t,Ft(t)?e.checked=HT(t,n.props.value)>-1:tf(t)?e.checked=t.has(n.props.value):t!==r&&(e.checked=Gl(t,o7(e,!0)))}const sd={created(e,{value:t},r){e.checked=Gl(t,r.props.value),e._assign=ws(r),Ko(e,"change",()=>{e._assign($c(e))})},beforeUpdate(e,{value:t,oldValue:r},n){e._assign=ws(n),t!==r&&(e.checked=Gl(t,n.props.value))}},_n={deep:!0,created(e,{value:t,modifiers:{number:r}},n){const i=tf(t);Ko(e,"change",()=>{const o=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>r?lm($c(a)):$c(a));e._assign(e.multiple?i?new Set(o):o:o[0])}),e._assign=ws(n)},mounted(e,{value:t}){uM(e,t)},beforeUpdate(e,t,r){e._assign=ws(r)},updated(e,{value:t}){uM(e,t)}};function uM(e,t){const r=e.multiple;if(!(r&&!Ft(t)&&!tf(t))){for(let n=0,i=e.options.length;n<i;n++){const o=e.options[n],a=$c(o);if(r)Ft(t)?o.selected=HT(t,a)>-1:o.selected=t.has(a);else if(Gl($c(o),t)){e.selectedIndex!==n&&(e.selectedIndex=n);return}}!r&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function $c(e){return"_value"in e?e._value:e.value}function o7(e,t){const r=t?"_trueValue":"_falseValue";return r in e?e[r]:t}const EH=["ctrl","shift","alt","meta"],AH={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>EH.some(r=>e[`${r}Key`]&&!t.includes(r))},pm=(e,t)=>(r,...n)=>{for(let i=0;i<t.length;i++){const o=AH[t[i]];if(o&&o(r,t))return}return e(r,...n)},CH={beforeMount(e,{value:t},{transition:r}){e._vod=e.style.display==="none"?"":e.style.display,r&&t?r.beforeEnter(e):Gf(e,t)},mounted(e,{value:t},{transition:r}){r&&t&&r.enter(e)},updated(e,{value:t,oldValue:r},{transition:n}){!t!=!r&&(n?t?(n.beforeEnter(e),Gf(e,!0),n.enter(e)):n.leave(e,()=>{Gf(e,!1)}):Gf(e,t))},beforeUnmount(e,{value:t}){Gf(e,t)}};function Gf(e,t){e.style.display=t?e._vod:"none"}const MH=Yr({patchProp:SH},sH);let cM;function kH(){return cM||(cM=UW(MH))}const xH=(...e)=>{const t=kH().createApp(...e),{mount:r}=t;return t.mount=n=>{const i=LH(n);if(!i)return;const o=t._component;!Gt(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.innerHTML="";const a=r(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},t};function LH(e){return fr(e)?document.querySelector(e):e}var IH=!1;function vp(e,t,r){return Array.isArray(e)?(e.length=Math.max(e.length,t),e.splice(t,1,r),r):(e[t]=r,r)}function u_(e,t){if(Array.isArray(e)){e.splice(t,1);return}delete e[t]}function OH(){return a7().__VUE_DEVTOOLS_GLOBAL_HOOK__}function a7(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const RH=typeof Proxy=="function",DH="devtools-plugin:setup",NH="plugin:settings:set";let Pu,iS;function FH(){var e;return Pu!==void 0||(typeof window<"u"&&window.performance?(Pu=!0,iS=window.performance):typeof global<"u"&&((e=global.perf_hooks)===null||e===void 0?void 0:e.performance)?(Pu=!0,iS=global.perf_hooks.performance):Pu=!1),Pu}function BH(){return FH()?iS.now():Date.now()}class $H{constructor(t,r){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=r;const n={};if(t.settings)for(const a in t.settings){const s=t.settings[a];n[a]=s.defaultValue}const i=`__vue-devtools-plugin-settings__${t.id}`;let o=Object.assign({},n);try{const a=localStorage.getItem(i),s=JSON.parse(a);Object.assign(o,s)}catch{}this.fallbacks={getSettings(){return o},setSettings(a){try{localStorage.setItem(i,JSON.stringify(a))}catch{}o=a},now(){return BH()}},r&&r.on(NH,(a,s)=>{a===this.plugin.id&&this.fallbacks.setSettings(s)}),this.proxiedOn=new Proxy({},{get:(a,s)=>this.target?this.target.on[s]:(...l)=>{this.onQueue.push({method:s,args:l})}}),this.proxiedTarget=new Proxy({},{get:(a,s)=>this.target?this.target[s]:s==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(s)?(...l)=>(this.targetQueue.push({method:s,args:l,resolve:()=>{}}),this.fallbacks[s](...l)):(...l)=>new Promise(u=>{this.targetQueue.push({method:s,args:l,resolve:u})})})}async setRealTarget(t){this.target=t;for(const r of this.onQueue)this.target.on[r.method](...r.args);for(const r of this.targetQueue)r.resolve(await this.target[r.method](...r.args))}}function s7(e,t){const r=e,n=a7(),i=OH(),o=RH&&r.enableEarlyProxy;if(i&&(n.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!o))i.emit(DH,e,t);else{const a=o?new $H(r,i):null;(n.__VUE_DEVTOOLS_PLUGINS__=n.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:r,setupFn:t,proxy:a}),a&&t(a.proxiedTarget)}}/*!
  * pinia v2.0.18
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let oS;const zd=e=>oS=e,l7=Symbol("pinia");function jl(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var mo;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(mo||(mo={}));const ns=typeof window<"u",fM=(()=>typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:typeof globalThis=="object"?globalThis:{HTMLElement:null})();function zH(e,{autoBom:t=!1}={}){return t&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}function hP(e,t,r){const n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){f7(n.response,t,r)},n.onerror=function(){console.error("could not download file")},n.send()}function u7(e){const t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Cg(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{const r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(r)}}const Mg=typeof navigator=="object"?navigator:{userAgent:""},c7=(()=>/Macintosh/.test(Mg.userAgent)&&/AppleWebKit/.test(Mg.userAgent)&&!/Safari/.test(Mg.userAgent))(),f7=ns?typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype&&!c7?VH:"msSaveOrOpenBlob"in Mg?UH:GH:()=>{};function VH(e,t="download",r){const n=document.createElement("a");n.download=t,n.rel="noopener",typeof e=="string"?(n.href=e,n.origin!==location.origin?u7(n.href)?hP(e,t,r):(n.target="_blank",Cg(n)):Cg(n)):(n.href=URL.createObjectURL(e),setTimeout(function(){URL.revokeObjectURL(n.href)},4e4),setTimeout(function(){Cg(n)},0))}function UH(e,t="download",r){if(typeof e=="string")if(u7(e))hP(e,t,r);else{const n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){Cg(n)})}else navigator.msSaveOrOpenBlob(zH(e,r),t)}function GH(e,t,r,n){if(n=n||open("","_blank"),n&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return hP(e,t,r);const i=e.type==="application/octet-stream",o=/constructor/i.test(String(fM.HTMLElement))||"safari"in fM,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&o||c7)&&typeof FileReader<"u"){const s=new FileReader;s.onloadend=function(){let l=s.result;if(typeof l!="string")throw n=null,new Error("Wrong reader.result type");l=a?l:l.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=l:location.assign(l),n=null},s.readAsDataURL(e)}else{const s=URL.createObjectURL(e);n?n.location.assign(s):location.href=s,n=null,setTimeout(function(){URL.revokeObjectURL(s)},4e4)}}function lr(e,t){const r="\u{1F34D} "+e;typeof __VUE_DEVTOOLS_TOAST__=="function"?__VUE_DEVTOOLS_TOAST__(r,t):t==="error"?console.error(r):t==="warn"?console.warn(r):console.log(r)}function dP(e){return"_a"in e&&"install"in e}function h7(){if(!("clipboard"in navigator))return lr("Your browser doesn't support the Clipboard API","error"),!0}function d7(e){return e instanceof Error&&e.message.toLowerCase().includes("document is not focused")?(lr('You need to activate the "Emulate a focused page" setting in the "Rendering" panel of devtools.',"warn"),!0):!1}async function jH(e){if(!h7())try{await navigator.clipboard.writeText(JSON.stringify(e.state.value)),lr("Global state copied to clipboard.")}catch(t){if(d7(t))return;lr("Failed to serialize the state. Check the console for more details.","error"),console.error(t)}}async function WH(e){if(!h7())try{e.state.value=JSON.parse(await navigator.clipboard.readText()),lr("Global state pasted from clipboard.")}catch(t){if(d7(t))return;lr("Failed to deserialize the state from clipboard. Check the console for more details.","error"),console.error(t)}}async function HH(e){try{f7(new Blob([JSON.stringify(e.state.value)],{type:"text/plain;charset=utf-8"}),"pinia-state.json")}catch(t){lr("Failed to export the state as JSON. Check the console for more details.","error"),console.error(t)}}let Do;function XH(){Do||(Do=document.createElement("input"),Do.type="file",Do.accept=".json");function e(){return new Promise((t,r)=>{Do.onchange=async()=>{const n=Do.files;if(!n)return t(null);const i=n.item(0);return t(i?{text:await i.text(),file:i}:null)},Do.oncancel=()=>t(null),Do.onerror=r,Do.click()})}return e}async function YH(e){try{const r=await(await XH())();if(!r)return;const{text:n,file:i}=r;e.state.value=JSON.parse(n),lr(`Global state imported from "${i.name}".`)}catch(t){lr("Failed to export the state as JSON. Check the console for more details.","error"),console.error(t)}}function ci(e){return{_custom:{display:e}}}const p7="\u{1F34D} Pinia (root)",aS="_root";function qH(e){return dP(e)?{id:aS,label:p7}:{id:e.$id,label:e.$id}}function ZH(e){if(dP(e)){const r=Array.from(e._s.keys()),n=e._s;return{state:r.map(o=>({editable:!0,key:o,value:e.state.value[o]})),getters:r.filter(o=>n.get(o)._getters).map(o=>{const a=n.get(o);return{editable:!1,key:o,value:a._getters.reduce((s,l)=>(s[l]=a[l],s),{})}})}}const t={state:Object.keys(e.$state).map(r=>({editable:!0,key:r,value:e.$state[r]}))};return e._getters&&e._getters.length&&(t.getters=e._getters.map(r=>({editable:!1,key:r,value:e[r]}))),e._customProperties.size&&(t.customProperties=Array.from(e._customProperties).map(r=>({editable:!0,key:r,value:e[r]}))),t}function KH(e){return e?Array.isArray(e)?e.reduce((t,r)=>(t.keys.push(r.key),t.operations.push(r.type),t.oldValue[r.key]=r.oldValue,t.newValue[r.key]=r.newValue,t),{oldValue:{},keys:[],operations:[],newValue:{}}):{operation:ci(e.type),key:ci(e.key),oldValue:e.oldValue,newValue:e.newValue}:{}}function JH(e){switch(e){case mo.direct:return"mutation";case mo.patchFunction:return"$patch";case mo.patchObject:return"$patch";default:return"unknown"}}let fc=!0;const kg=[],ml="pinia:mutations",Mr="pinia",vm=e=>"\u{1F34D} "+e;function QH(e,t){s7({id:"dev.esm.pinia",label:"Pinia \u{1F34D}",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:kg,app:e},r=>{typeof r.now!="function"&&lr("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),r.addTimelineLayer({id:ml,label:"Pinia \u{1F34D}",color:15064968}),r.addInspector({id:Mr,label:"Pinia \u{1F34D}",icon:"storage",treeFilterPlaceholder:"Search stores",actions:[{icon:"content_copy",action:()=>{jH(t)},tooltip:"Serialize and copy the state"},{icon:"content_paste",action:async()=>{await WH(t),r.sendInspectorTree(Mr),r.sendInspectorState(Mr)},tooltip:"Replace the state with the content of your clipboard"},{icon:"save",action:()=>{HH(t)},tooltip:"Save the state as a JSON file"},{icon:"folder_open",action:async()=>{await YH(t),r.sendInspectorTree(Mr),r.sendInspectorState(Mr)},tooltip:"Import the state from a JSON file"}],nodeActions:[{icon:"restore",tooltip:"Reset the state (option store only)",action:n=>{const i=t._s.get(n);i?i._isOptionsAPI?(i.$reset(),lr(`Store "${n}" reset.`)):lr(`Cannot reset "${n}" store because it's a setup store.`,"warn"):lr(`Cannot reset "${n}" store because it wasn't found.`,"warn")}}]}),r.on.inspectComponent((n,i)=>{const o=n.componentInstance&&n.componentInstance.proxy;if(o&&o._pStores){const a=n.componentInstance.proxy._pStores;Object.values(a).forEach(s=>{n.instanceData.state.push({type:vm(s.$id),key:"state",editable:!0,value:s._isOptionsAPI?{_custom:{value:fe(s.$state),actions:[{icon:"restore",tooltip:"Reset the state of this store",action:()=>s.$reset()}]}}:Object.keys(s.$state).reduce((l,u)=>(l[u]=s.$state[u],l),{})}),s._getters&&s._getters.length&&n.instanceData.state.push({type:vm(s.$id),key:"getters",editable:!1,value:s._getters.reduce((l,u)=>{try{l[u]=s[u]}catch(c){l[u]=c}return l},{})})})}}),r.on.getInspectorTree(n=>{if(n.app===e&&n.inspectorId===Mr){let i=[t];i=i.concat(Array.from(t._s.values())),n.rootNodes=(n.filter?i.filter(o=>"$id"in o?o.$id.toLowerCase().includes(n.filter.toLowerCase()):p7.toLowerCase().includes(n.filter.toLowerCase())):i).map(qH)}}),r.on.getInspectorState(n=>{if(n.app===e&&n.inspectorId===Mr){const i=n.nodeId===aS?t:t._s.get(n.nodeId);if(!i)return;i&&(n.state=ZH(i))}}),r.on.editInspectorState((n,i)=>{if(n.app===e&&n.inspectorId===Mr){const o=n.nodeId===aS?t:t._s.get(n.nodeId);if(!o)return lr(`store "${n.nodeId}" not found`,"error");const{path:a}=n;dP(o)?a.unshift("state"):(a.length!==1||!o._customProperties.has(a[0])||a[0]in o.$state)&&a.unshift("$state"),fc=!1,n.set(o,a,n.state.value),fc=!0}}),r.on.editComponentState(n=>{if(n.type.startsWith("\u{1F34D}")){const i=n.type.replace(/^\s*/,""),o=t._s.get(i);if(!o)return lr(`store "${i}" not found`,"error");const{path:a}=n;if(a[0]!=="state")return lr(`Invalid path for store "${i}":
${a}
Only state can be modified.`);a[0]="$state",fc=!1,n.set(o,a,n.state.value),fc=!0}})})}function tX(e,t){kg.includes(vm(t.$id))||kg.push(vm(t.$id)),s7({id:"dev.esm.pinia",label:"Pinia \u{1F34D}",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:kg,app:e,settings:{logStoreChanges:{label:"Notify about new/deleted stores",type:"boolean",defaultValue:!0}}},r=>{const n=typeof r.now=="function"?r.now.bind(r):Date.now;t.$onAction(({after:a,onError:s,name:l,args:u})=>{const c=v7++;r.addTimelineEvent({layerId:ml,event:{time:n(),title:"\u{1F6EB} "+l,subtitle:"start",data:{store:ci(t.$id),action:ci(l),args:u},groupId:c}}),a(f=>{Sl=void 0,r.addTimelineEvent({layerId:ml,event:{time:n(),title:"\u{1F6EC} "+l,subtitle:"end",data:{store:ci(t.$id),action:ci(l),args:u,result:f},groupId:c}})}),s(f=>{Sl=void 0,r.addTimelineEvent({layerId:ml,event:{time:n(),logType:"error",title:"\u{1F4A5} "+l,subtitle:"end",data:{store:ci(t.$id),action:ci(l),args:u,error:f},groupId:c}})})},!0),t._customProperties.forEach(a=>{ho(()=>mr(t[a]),(s,l)=>{r.notifyComponentUpdate(),r.sendInspectorState(Mr),fc&&r.addTimelineEvent({layerId:ml,event:{time:n(),title:"Change",subtitle:a,data:{newValue:s,oldValue:l},groupId:Sl}})},{deep:!0})}),t.$subscribe(({events:a,type:s},l)=>{if(r.notifyComponentUpdate(),r.sendInspectorState(Mr),!fc)return;const u={time:n(),title:JH(s),data:{store:ci(t.$id),...KH(a)},groupId:Sl};Sl=void 0,s===mo.patchFunction?u.subtitle="\u2935\uFE0F":s===mo.patchObject?u.subtitle="\u{1F9E9}":a&&!Array.isArray(a)&&(u.subtitle=a.type),a&&(u.data["rawEvent(s)"]={_custom:{display:"DebuggerEvent",type:"object",tooltip:"raw DebuggerEvent[]",value:a}}),r.addTimelineEvent({layerId:ml,event:u})},{detached:!0,flush:"sync"});const i=t._hotUpdate;t._hotUpdate=pi(a=>{i(a),r.addTimelineEvent({layerId:ml,event:{time:n(),title:"\u{1F525} "+t.$id,subtitle:"HMR update",data:{store:ci(t.$id),info:ci("HMR update")}}}),r.notifyComponentUpdate(),r.sendInspectorTree(Mr),r.sendInspectorState(Mr)});const{$dispose:o}=t;t.$dispose=()=>{o(),r.notifyComponentUpdate(),r.sendInspectorTree(Mr),r.sendInspectorState(Mr),r.getSettings().logStoreChanges&&lr(`Disposed "${t.$id}" store \u{1F5D1}`)},r.notifyComponentUpdate(),r.sendInspectorTree(Mr),r.sendInspectorState(Mr),r.getSettings().logStoreChanges&&lr(`"${t.$id}" store installed \u{1F195}`)})}let v7=0,Sl;function hM(e,t){const r=t.reduce((n,i)=>(n[i]=fe(e)[i],n),{});for(const n in r)e[n]=function(){const i=v7,o=new Proxy(e,{get(...a){return Sl=i,Reflect.get(...a)},set(...a){return Sl=i,Reflect.set(...a)}});return r[n].apply(o,arguments)}}function eX({app:e,store:t,options:r}){if(!t.$id.startsWith("__hot:")){if(r.state&&(t._isOptionsAPI=!0),typeof r.state=="function"){hM(t,Object.keys(r.actions));const n=t._hotUpdate;fe(t)._hotUpdate=function(i){n.apply(this,arguments),hM(t,Object.keys(i._hmrPayload.actions))}}tX(e,t)}}function rX(){const e=v8(!0),t=e.run(()=>P1({}));let r=[],n=[];const i=pi({install(o){zd(i),i._a=o,o.provide(l7,i),o.config.globalProperties.$pinia=i,ns&&QH(o,i),n.forEach(a=>r.push(a)),n=[]},use(o){return!this._a&&!IH?n.push(o):r.push(o),this},_p:r,_a:null,_e:e,_s:new Map,state:t});return ns&&!0&&typeof Proxy<"u"&&i.use(eX),i}function g7(e,t){for(const r in t){const n=t[r];if(!(r in e))continue;const i=e[r];jl(i)&&jl(n)&&!He(n)&&!ra(n)?e[r]=g7(i,n):e[r]=n}return e}const nX=()=>{};function dM(e,t,r,n=nX){e.push(t);const i=()=>{const o=e.indexOf(t);o>-1&&(e.splice(o,1),n())};return!r&&cP()&&x1(i),i}function Eu(e,...t){e.slice().forEach(r=>{r(...t)})}function sS(e,t){for(const r in t){if(!t.hasOwnProperty(r))continue;const n=t[r],i=e[r];jl(i)&&jl(n)&&e.hasOwnProperty(r)&&!He(n)&&!ra(n)?e[r]=sS(i,n):e[r]=n}return e}const iX=Symbol("pinia:skipHydration");function oX(e){return!jl(e)||!e.hasOwnProperty(iX)}const{assign:di}=Object;function pM(e){return!!(He(e)&&e.effect)}function vM(e,t,r,n){const{state:i,actions:o,getters:a}=t,s=r.state.value[e];let l;function u(){!s&&!n&&(r.state.value[e]=i?i():{});const c=Yw(n?P1(i?i():{}).value:r.state.value[e]);return di(c,o,Object.keys(a||{}).reduce((f,h)=>(h in c&&console.warn(`[\u{1F34D}]: A getter cannot have the same name as another state property. Rename one of them. Found with "${h}" in store "${e}".`),f[h]=pi(Ye(()=>{zd(r);const d=r._s.get(e);return a[h].call(d,d)})),f),{}))}return l=lS(e,u,t,r,n,!0),l.$reset=function(){const f=i?i():{};this.$patch(h=>{di(h,f)})},l}function lS(e,t,r={},n,i,o){let a;const s=di({actions:{}},r);if(!n._e.active)throw new Error("Pinia destroyed");const l={deep:!0};l.onTrigger=A=>{u?d=A:u==!1&&!P._hotUpdating&&(Array.isArray(d)?d.push(A):console.error("\u{1F34D} debuggerEvents should be an array. This is most likely an internal Pinia bug."))};let u,c,f=pi([]),h=pi([]),d;const p=n.state.value[e];!o&&!p&&!i&&(n.state.value[e]={});const v=P1({});let g;function m(A){let M;u=c=!1,d=[],typeof A=="function"?(A(n.state.value[e]),M={type:mo.patchFunction,storeId:e,events:d}):(sS(n.state.value[e],A),M={type:mo.patchObject,payload:A,storeId:e,events:d});const k=g=Symbol();Nd().then(()=>{g===k&&(u=!0)}),c=!0,Eu(f,M,n.state.value[e])}const y=()=>{throw new Error(`\u{1F34D}: Store "${e}" is built using the setup syntax and does not implement $reset().`)};function _(){a.stop(),f=[],h=[],n._s.delete(e)}function b(A,M){return function(){zd(n);const k=Array.from(arguments),O=[],F=[];function z(Z){O.push(Z)}function R(Z){F.push(Z)}Eu(h,{args:k,name:A,store:P,after:z,onError:R});let j;try{j=M.apply(this&&this.$id===e?this:P,k)}catch(Z){throw Eu(F,Z),Z}return j instanceof Promise?j.then(Z=>(Eu(O,Z),Z)).catch(Z=>(Eu(F,Z),Promise.reject(Z))):(Eu(O,j),j)}}const T=pi({actions:{},getters:{},state:[],hotState:v}),S={_p:n,$id:e,$onAction:dM.bind(null,h),$patch:m,$reset:y,$subscribe(A,M={}){const k=dM(f,A,M.detached,()=>O()),O=a.run(()=>ho(()=>n.state.value[e],F=>{(M.flush==="sync"?c:u)&&A({storeId:e,type:mo.direct,events:d},F)},di({},l,M)));return k},$dispose:_},P=of(di(ns?{_customProperties:pi(new Set),_hmrPayload:T}:{},S));n._s.set(e,P);const C=n._e.run(()=>(a=v8(),a.run(()=>t())));for(const A in C){const M=C[A];if(He(M)&&!pM(M)||ra(M))i?vp(v.value,A,Tg(C,A)):o||(p&&oX(M)&&(He(M)?M.value=p[A]:sS(M,p[A])),n.state.value[e][A]=M),T.state.push(A);else if(typeof M=="function"){const k=i?M:b(A,M);C[A]=k,T.actions[A]=M,s.actions[A]=M}else pM(M)&&(T.getters[A]=o?r.getters[A]:M,ns&&(C._getters||(C._getters=pi([]))).push(A))}di(P,C),di(fe(P),C),Object.defineProperty(P,"$state",{get:()=>i?v.value:n.state.value[e],set:A=>{if(i)throw new Error("cannot set hotState");m(M=>{di(M,A)})}});{P._hotUpdate=pi(M=>{P._hotUpdating=!0,M._hmrPayload.state.forEach(k=>{if(k in P.$state){const O=M.$state[k],F=P.$state[k];typeof O=="object"&&jl(O)&&jl(F)?g7(O,F):M.$state[k]=F}vp(P,k,Tg(M.$state,k))}),Object.keys(P.$state).forEach(k=>{k in M.$state||u_(P,k)}),u=!1,c=!1,n.state.value[e]=Tg(M._hmrPayload,"hotState"),c=!0,Nd().then(()=>{u=!0});for(const k in M._hmrPayload.actions){const O=M[k];vp(P,k,b(k,O))}for(const k in M._hmrPayload.getters){const O=M._hmrPayload.getters[k],F=o?Ye(()=>(zd(n),O.call(P,P))):O;vp(P,k,F)}Object.keys(P._hmrPayload.getters).forEach(k=>{k in M._hmrPayload.getters||u_(P,k)}),Object.keys(P._hmrPayload.actions).forEach(k=>{k in M._hmrPayload.actions||u_(P,k)}),P._hmrPayload=M._hmrPayload,P._getters=M._getters,P._hotUpdating=!1});const A={writable:!0,configurable:!0,enumerable:!1};ns&&["_p","_hmrPayload","_getters","_customProperties"].forEach(M=>{Object.defineProperty(P,M,{value:P[M],...A})})}return n._p.forEach(A=>{if(ns){const M=a.run(()=>A({store:P,app:n._a,pinia:n,options:s}));Object.keys(M||{}).forEach(k=>P._customProperties.add(k)),di(P,M)}else di(P,a.run(()=>A({store:P,app:n._a,pinia:n,options:s})))}),P.$state&&typeof P.$state=="object"&&typeof P.$state.constructor=="function"&&!P.$state.constructor.toString().includes("[native code]")&&console.warn(`[\u{1F34D}]: The "state" must be a plain object. It cannot be
	state: () => new MyClass()
Found in store "${P.$id}".`),p&&o&&r.hydrate&&r.hydrate(P.$state,p),u=!0,c=!0,P}function T0(e,t,r){let n,i;const o=typeof t=="function";typeof e=="string"?(n=e,i=o?r:t):(i=e,n=e.id);function a(s,l){const u=cP();if(s=s||u&&wn(l7),s&&zd(s),!oS)throw new Error(`[\u{1F34D}]: getActivePinia was called with no active Pinia. Did you forget to install pinia?
	const pinia = createPinia()
	app.use(pinia)
This will fail in production.`);s=oS,s._s.has(n)||(o?lS(n,t,i,s):vM(n,i,s),a._pinia=s);const c=s._s.get(n);if(l){const f="__hot:"+n,h=o?lS(f,t,i,s,!0):vM(f,di({},i),s,!0);l._hotUpdate(h),delete s.state.value[f],s._s.delete(f)}if(ns&&u&&u.proxy&&!l){const f=u.proxy,h="_pStores"in f?f._pStores:f._pStores={};h[n]=c}return c}return a.$id=n,a}/*!
  * vue-router v4.1.3
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const ac=typeof window<"u";function aX(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const Ae=Object.assign;function c_(e,t){const r={};for(const n in t){const i=t[n];r[n]=ki(i)?i.map(e):e(i)}return r}const ld=()=>{},ki=Array.isArray,sX=/\/$/,lX=e=>e.replace(sX,"");function f_(e,t,r="/"){let n,i={},o="",a="";const s=t.indexOf("#");let l=t.indexOf("?");return s<l&&s>=0&&(l=-1),l>-1&&(n=t.slice(0,l),o=t.slice(l+1,s>-1?s:t.length),i=e(o)),s>-1&&(n=n||t.slice(0,s),a=t.slice(s,t.length)),n=hX(n!=null?n:t,r),{fullPath:n+(o&&"?")+o+a,path:n,query:i,hash:a}}function uX(e,t){const r=t.query?e(t.query):"";return t.path+(r&&"?")+r+(t.hash||"")}function gM(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function cX(e,t,r){const n=t.matched.length-1,i=r.matched.length-1;return n>-1&&n===i&&zc(t.matched[n],r.matched[i])&&m7(t.params,r.params)&&e(t.query)===e(r.query)&&t.hash===r.hash}function zc(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function m7(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!fX(e[r],t[r]))return!1;return!0}function fX(e,t){return ki(e)?mM(e,t):ki(t)?mM(t,e):e===t}function mM(e,t){return ki(t)?e.length===t.length&&e.every((r,n)=>r===t[n]):e.length===1&&e[0]===t}function hX(e,t){if(e.startsWith("/"))return e;if(!e)return t;const r=t.split("/"),n=e.split("/");let i=r.length-1,o,a;for(o=0;o<n.length;o++)if(a=n[o],a!==".")if(a==="..")i>1&&i--;else break;return r.slice(0,i).join("/")+"/"+n.slice(o-(o===n.length?1:0)).join("/")}var Vd;(function(e){e.pop="pop",e.push="push"})(Vd||(Vd={}));var ud;(function(e){e.back="back",e.forward="forward",e.unknown=""})(ud||(ud={}));function dX(e){if(!e)if(ac){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),lX(e)}const pX=/^[^#]+#/;function vX(e,t){return e.replace(pX,"#")+t}function gX(e,t){const r=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-r.left-(t.left||0),top:n.top-r.top-(t.top||0)}}const O1=()=>({left:window.pageXOffset,top:window.pageYOffset});function mX(e){let t;if("el"in e){const r=e.el,n=typeof r=="string"&&r.startsWith("#"),i=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!i)return;t=gX(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function yM(e,t){return(history.state?history.state.position-t:-1)+e}const uS=new Map;function yX(e,t){uS.set(e,t)}function _X(e){const t=uS.get(e);return uS.delete(e),t}let bX=()=>location.protocol+"//"+location.host;function y7(e,t){const{pathname:r,search:n,hash:i}=t,o=e.indexOf("#");if(o>-1){let s=i.includes(e.slice(o))?e.slice(o).length:1,l=i.slice(s);return l[0]!=="/"&&(l="/"+l),gM(l,"")}return gM(r,e)+n+i}function wX(e,t,r,n){let i=[],o=[],a=null;const s=({state:h})=>{const d=y7(e,location),p=r.value,v=t.value;let g=0;if(h){if(r.value=d,t.value=h,a&&a===p){a=null;return}g=v?h.position-v.position:0}else n(d);i.forEach(m=>{m(r.value,p,{delta:g,type:Vd.pop,direction:g?g>0?ud.forward:ud.back:ud.unknown})})};function l(){a=r.value}function u(h){i.push(h);const d=()=>{const p=i.indexOf(h);p>-1&&i.splice(p,1)};return o.push(d),d}function c(){const{history:h}=window;!h.state||h.replaceState(Ae({},h.state,{scroll:O1()}),"")}function f(){for(const h of o)h();o=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",c),{pauseListeners:l,listen:u,destroy:f}}function _M(e,t,r,n=!1,i=!1){return{back:e,current:t,forward:r,replaced:n,position:window.history.length,scroll:i?O1():null}}function SX(e){const{history:t,location:r}=window,n={value:y7(e,r)},i={value:t.state};i.value||o(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(l,u,c){const f=e.indexOf("#"),h=f>-1?(r.host&&document.querySelector("base")?e:e.slice(f))+l:bX()+e+l;try{t[c?"replaceState":"pushState"](u,"",h),i.value=u}catch(d){console.error(d),r[c?"replace":"assign"](h)}}function a(l,u){const c=Ae({},t.state,_M(i.value.back,l,i.value.forward,!0),u,{position:i.value.position});o(l,c,!0),n.value=l}function s(l,u){const c=Ae({},i.value,t.state,{forward:l,scroll:O1()});o(c.current,c,!0);const f=Ae({},_M(n.value,l,null),{position:c.position+1},u);o(l,f,!1),n.value=l}return{location:n,state:i,push:s,replace:a}}function TX(e){e=dX(e);const t=SX(e),r=wX(e,t.state,t.location,t.replace);function n(o,a=!0){a||r.pauseListeners(),history.go(o)}const i=Ae({location:"",base:e,go:n,createHref:vX.bind(null,e)},t,r);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function PX(e){return typeof e=="string"||e&&typeof e=="object"}function _7(e){return typeof e=="string"||typeof e=="symbol"}const Ca={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},b7=Symbol("");var bM;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(bM||(bM={}));function Vc(e,t){return Ae(new Error,{type:e,[b7]:!0},t)}function No(e,t){return e instanceof Error&&b7 in e&&(t==null||!!(e.type&t))}const wM="[^/]+?",EX={sensitive:!1,strict:!1,start:!0,end:!0},AX=/[.+*?^${}()[\]/\\]/g;function CX(e,t){const r=Ae({},EX,t),n=[];let i=r.start?"^":"";const o=[];for(const u of e){const c=u.length?[]:[90];r.strict&&!u.length&&(i+="/");for(let f=0;f<u.length;f++){const h=u[f];let d=40+(r.sensitive?.25:0);if(h.type===0)f||(i+="/"),i+=h.value.replace(AX,"\\$&"),d+=40;else if(h.type===1){const{value:p,repeatable:v,optional:g,regexp:m}=h;o.push({name:p,repeatable:v,optional:g});const y=m||wM;if(y!==wM){d+=10;try{new RegExp(`(${y})`)}catch(b){throw new Error(`Invalid custom RegExp for param "${p}" (${y}): `+b.message)}}let _=v?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;f||(_=g&&u.length<2?`(?:/${_})`:"/"+_),g&&(_+="?"),i+=_,d+=20,g&&(d+=-8),v&&(d+=-20),y===".*"&&(d+=-50)}c.push(d)}n.push(c)}if(r.strict&&r.end){const u=n.length-1;n[u][n[u].length-1]+=.7000000000000001}r.strict||(i+="/?"),r.end?i+="$":r.strict&&(i+="(?:/|$)");const a=new RegExp(i,r.sensitive?"":"i");function s(u){const c=u.match(a),f={};if(!c)return null;for(let h=1;h<c.length;h++){const d=c[h]||"",p=o[h-1];f[p.name]=d&&p.repeatable?d.split("/"):d}return f}function l(u){let c="",f=!1;for(const h of e){(!f||!c.endsWith("/"))&&(c+="/"),f=!1;for(const d of h)if(d.type===0)c+=d.value;else if(d.type===1){const{value:p,repeatable:v,optional:g}=d,m=p in u?u[p]:"";if(ki(m)&&!v)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const y=ki(m)?m.join("/"):m;if(!y)if(g)h.length<2&&(c.endsWith("/")?c=c.slice(0,-1):f=!0);else throw new Error(`Missing required param "${p}"`);c+=y}}return c||"/"}return{re:a,score:n,keys:o,parse:s,stringify:l}}function MX(e,t){let r=0;for(;r<e.length&&r<t.length;){const n=t[r]-e[r];if(n)return n;r++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function kX(e,t){let r=0;const n=e.score,i=t.score;for(;r<n.length&&r<i.length;){const o=MX(n[r],i[r]);if(o)return o;r++}if(Math.abs(i.length-n.length)===1){if(SM(n))return 1;if(SM(i))return-1}return i.length-n.length}function SM(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const xX={type:0,value:""},LX=/[a-zA-Z0-9_]/;function IX(e){if(!e)return[[]];if(e==="/")return[[xX]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(d){throw new Error(`ERR (${r})/"${u}": ${d}`)}let r=0,n=r;const i=[];let o;function a(){o&&i.push(o),o=[]}let s=0,l,u="",c="";function f(){!u||(r===0?o.push({type:0,value:u}):r===1||r===2||r===3?(o.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function h(){u+=l}for(;s<e.length;){if(l=e[s++],l==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:l==="/"?(u&&f(),a()):l===":"?(f(),r=1):h();break;case 4:h(),r=n;break;case 1:l==="("?r=2:LX.test(l)?h():(f(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&s--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:r=3:c+=l;break;case 3:f(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&s--,c="";break;default:t("Unknown state");break}}return r===2&&t(`Unfinished custom RegExp for param "${u}"`),f(),a(),i}function OX(e,t,r){const n=CX(IX(e.path),r),i=Ae(n,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function RX(e,t){const r=[],n=new Map;t=PM({strict:!1,end:!0,sensitive:!1},t);function i(c){return n.get(c)}function o(c,f,h){const d=!h,p=NX(c);p.aliasOf=h&&h.record;const v=PM(t,c),g=[p];if("alias"in c){const _=typeof c.alias=="string"?[c.alias]:c.alias;for(const b of _)g.push(Ae({},p,{components:h?h.record.components:p.components,path:b,aliasOf:h?h.record:p}))}let m,y;for(const _ of g){const{path:b}=_;if(f&&b[0]!=="/"){const T=f.record.path,S=T[T.length-1]==="/"?"":"/";_.path=f.record.path+(b&&S+b)}if(m=OX(_,f,v),h?h.alias.push(m):(y=y||m,y!==m&&y.alias.push(m),d&&c.name&&!TM(m)&&a(c.name)),p.children){const T=p.children;for(let S=0;S<T.length;S++)o(T[S],m,h&&h.children[S])}h=h||m,l(m)}return y?()=>{a(y)}:ld}function a(c){if(_7(c)){const f=n.get(c);f&&(n.delete(c),r.splice(r.indexOf(f),1),f.children.forEach(a),f.alias.forEach(a))}else{const f=r.indexOf(c);f>-1&&(r.splice(f,1),c.record.name&&n.delete(c.record.name),c.children.forEach(a),c.alias.forEach(a))}}function s(){return r}function l(c){let f=0;for(;f<r.length&&kX(c,r[f])>=0&&(c.record.path!==r[f].record.path||!w7(c,r[f]));)f++;r.splice(f,0,c),c.record.name&&!TM(c)&&n.set(c.record.name,c)}function u(c,f){let h,d={},p,v;if("name"in c&&c.name){if(h=n.get(c.name),!h)throw Vc(1,{location:c});v=h.record.name,d=Ae(DX(f.params,h.keys.filter(y=>!y.optional).map(y=>y.name)),c.params),p=h.stringify(d)}else if("path"in c)p=c.path,h=r.find(y=>y.re.test(p)),h&&(d=h.parse(p),v=h.record.name);else{if(h=f.name?n.get(f.name):r.find(y=>y.re.test(f.path)),!h)throw Vc(1,{location:c,currentLocation:f});v=h.record.name,d=Ae({},f.params,c.params),p=h.stringify(d)}const g=[];let m=h;for(;m;)g.unshift(m.record),m=m.parent;return{name:v,path:p,params:d,matched:g,meta:BX(g)}}return e.forEach(c=>o(c)),{addRoute:o,resolve:u,removeRoute:a,getRoutes:s,getRecordMatcher:i}}function DX(e,t){const r={};for(const n of t)n in e&&(r[n]=e[n]);return r}function NX(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:FX(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function FX(e){const t={},r=e.props||!1;if("component"in e)t.default=r;else for(const n in e.components)t[n]=typeof r=="boolean"?r:r[n];return t}function TM(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function BX(e){return e.reduce((t,r)=>Ae(t,r.meta),{})}function PM(e,t){const r={};for(const n in e)r[n]=n in t?t[n]:e[n];return r}function w7(e,t){return t.children.some(r=>r===e||w7(e,r))}const S7=/#/g,$X=/&/g,zX=/\//g,VX=/=/g,UX=/\?/g,T7=/\+/g,GX=/%5B/g,jX=/%5D/g,P7=/%5E/g,WX=/%60/g,E7=/%7B/g,HX=/%7C/g,A7=/%7D/g,XX=/%20/g;function pP(e){return encodeURI(""+e).replace(HX,"|").replace(GX,"[").replace(jX,"]")}function YX(e){return pP(e).replace(E7,"{").replace(A7,"}").replace(P7,"^")}function cS(e){return pP(e).replace(T7,"%2B").replace(XX,"+").replace(S7,"%23").replace($X,"%26").replace(WX,"`").replace(E7,"{").replace(A7,"}").replace(P7,"^")}function qX(e){return cS(e).replace(VX,"%3D")}function ZX(e){return pP(e).replace(S7,"%23").replace(UX,"%3F")}function KX(e){return e==null?"":ZX(e).replace(zX,"%2F")}function gm(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function JX(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<n.length;++i){const o=n[i].replace(T7," "),a=o.indexOf("="),s=gm(a<0?o:o.slice(0,a)),l=a<0?null:gm(o.slice(a+1));if(s in t){let u=t[s];ki(u)||(u=t[s]=[u]),u.push(l)}else t[s]=l}return t}function EM(e){let t="";for(let r in e){const n=e[r];if(r=qX(r),n==null){n!==void 0&&(t+=(t.length?"&":"")+r);continue}(ki(n)?n.map(o=>o&&cS(o)):[n&&cS(n)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+r,o!=null&&(t+="="+o))})}return t}function QX(e){const t={};for(const r in e){const n=e[r];n!==void 0&&(t[r]=ki(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return t}const tY=Symbol(""),AM=Symbol(""),vP=Symbol(""),C7=Symbol(""),fS=Symbol("");function jf(){let e=[];function t(n){return e.push(n),()=>{const i=e.indexOf(n);i>-1&&e.splice(i,1)}}function r(){e=[]}return{add:t,list:()=>e,reset:r}}function rs(e,t,r,n,i){const o=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((a,s)=>{const l=f=>{f===!1?s(Vc(4,{from:r,to:t})):f instanceof Error?s(f):PX(f)?s(Vc(2,{from:t,to:f})):(o&&n.enterCallbacks[i]===o&&typeof f=="function"&&o.push(f),a())},u=e.call(n&&n.instances[i],t,r,l);let c=Promise.resolve(u);e.length<3&&(c=c.then(l)),c.catch(f=>s(f))})}function h_(e,t,r,n){const i=[];for(const o of e)for(const a in o.components){let s=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(eY(s)){const u=(s.__vccOpts||s)[t];u&&i.push(rs(u,r,n,o,a))}else{let l=s();i.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const c=aX(u)?u.default:u;o.components[a]=c;const h=(c.__vccOpts||c)[t];return h&&rs(h,r,n,o,a)()}))}}return i}function eY(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function CM(e){const t=wn(vP),r=wn(C7),n=Ye(()=>t.resolve(mr(e.to))),i=Ye(()=>{const{matched:l}=n.value,{length:u}=l,c=l[u-1],f=r.matched;if(!c||!f.length)return-1;const h=f.findIndex(zc.bind(null,c));if(h>-1)return h;const d=MM(l[u-2]);return u>1&&MM(c)===d&&f[f.length-1].path!==d?f.findIndex(zc.bind(null,l[u-2])):h}),o=Ye(()=>i.value>-1&&iY(r.params,n.value.params)),a=Ye(()=>i.value>-1&&i.value===r.matched.length-1&&m7(r.params,n.value.params));function s(l={}){return nY(l)?t[mr(e.replace)?"replace":"push"](mr(e.to)).catch(ld):Promise.resolve()}return{route:n,href:Ye(()=>n.value.href),isActive:o,isExactActive:a,navigate:s}}const rY=oP({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:CM,setup(e,{slots:t}){const r=of(CM(e)),{options:n}=wn(vP),i=Ye(()=>({[kM(e.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[kM(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const o=t.default&&t.default(r);return e.custom?o:fP("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:i.value},o)}}}),sc=rY;function nY(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function iY(e,t){for(const r in t){const n=t[r],i=e[r];if(typeof n=="string"){if(n!==i)return!1}else if(!ki(i)||i.length!==n.length||n.some((o,a)=>o!==i[a]))return!1}return!0}function MM(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const kM=(e,t,r)=>e!=null?e:t!=null?t:r,oY=oP({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:r}){const n=wn(fS),i=Ye(()=>e.route||n.value),o=wn(AM,0),a=Ye(()=>{let u=mr(o);const{matched:c}=i.value;let f;for(;(f=c[u])&&!f.components;)u++;return u}),s=Ye(()=>i.value.matched[a.value]);Pg(AM,Ye(()=>a.value+1)),Pg(tY,s),Pg(fS,i);const l=P1();return ho(()=>[l.value,s.value,e.name],([u,c,f],[h,d,p])=>{c&&(c.instances[f]=u,d&&d!==c&&u&&u===h&&(c.leaveGuards.size||(c.leaveGuards=d.leaveGuards),c.updateGuards.size||(c.updateGuards=d.updateGuards))),u&&c&&(!d||!zc(c,d)||!h)&&(c.enterCallbacks[f]||[]).forEach(v=>v(u))},{flush:"post"}),()=>{const u=i.value,c=e.name,f=s.value,h=f&&f.components[c];if(!h)return xM(r.default,{Component:h,route:u});const d=f.props[c],p=d?d===!0?u.params:typeof d=="function"?d(u):d:null,g=fP(h,Ae({},p,t,{onVnodeUnmounted:m=>{m.component.isUnmounted&&(f.instances[c]=null)},ref:l}));return xM(r.default,{Component:g,route:u})||g}}});function xM(e,t){if(!e)return null;const r=e(t);return r.length===1?r[0]:r}const M7=oY;function aY(e){const t=RX(e.routes,e),r=e.parseQuery||JX,n=e.stringifyQuery||EM,i=e.history,o=jf(),a=jf(),s=jf(),l=Sg(Ca);let u=Ca;ac&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=c_.bind(null,Y=>""+Y),f=c_.bind(null,KX),h=c_.bind(null,gm);function d(Y,nt){let K,dt;return _7(Y)?(K=t.getRecordMatcher(Y),dt=nt):dt=Y,t.addRoute(dt,K)}function p(Y){const nt=t.getRecordMatcher(Y);nt&&t.removeRoute(nt)}function v(){return t.getRoutes().map(Y=>Y.record)}function g(Y){return!!t.getRecordMatcher(Y)}function m(Y,nt){if(nt=Ae({},nt||l.value),typeof Y=="string"){const ct=f_(r,Y,nt.path),B=t.resolve({path:ct.path},nt),G=i.createHref(ct.fullPath);return Ae(ct,B,{params:h(B.params),hash:gm(ct.hash),redirectedFrom:void 0,href:G})}let K;if("path"in Y)K=Ae({},Y,{path:f_(r,Y.path,nt.path).path});else{const ct=Ae({},Y.params);for(const B in ct)ct[B]==null&&delete ct[B];K=Ae({},Y,{params:f(Y.params)}),nt.params=f(nt.params)}const dt=t.resolve(K,nt),St=Y.hash||"";dt.params=c(h(dt.params));const At=uX(n,Ae({},Y,{hash:YX(St),path:dt.path})),st=i.createHref(At);return Ae({fullPath:At,hash:St,query:n===EM?QX(Y.query):Y.query||{}},dt,{redirectedFrom:void 0,href:st})}function y(Y){return typeof Y=="string"?f_(r,Y,l.value.path):Ae({},Y)}function _(Y,nt){if(u!==Y)return Vc(8,{from:nt,to:Y})}function b(Y){return P(Y)}function T(Y){return b(Ae(y(Y),{replace:!0}))}function S(Y){const nt=Y.matched[Y.matched.length-1];if(nt&&nt.redirect){const{redirect:K}=nt;let dt=typeof K=="function"?K(Y):K;return typeof dt=="string"&&(dt=dt.includes("?")||dt.includes("#")?dt=y(dt):{path:dt},dt.params={}),Ae({query:Y.query,hash:Y.hash,params:"path"in dt?{}:Y.params},dt)}}function P(Y,nt){const K=u=m(Y),dt=l.value,St=Y.state,At=Y.force,st=Y.replace===!0,ct=S(K);if(ct)return P(Ae(y(ct),{state:St,force:At,replace:st}),nt||K);const B=K;B.redirectedFrom=nt;let G;return!At&&cX(n,dt,K)&&(G=Vc(16,{to:B,from:dt}),Pt(dt,dt,!0,!1)),(G?Promise.resolve(G):A(B,dt)).catch(X=>No(X)?No(X,2)?X:tt(X):Z(X,B,dt)).then(X=>{if(X){if(No(X,2))return P(Ae({replace:st},y(X.to),{state:St,force:At}),nt||B)}else X=k(B,dt,!0,st,St);return M(B,dt,X),X})}function C(Y,nt){const K=_(Y,nt);return K?Promise.reject(K):Promise.resolve()}function A(Y,nt){let K;const[dt,St,At]=sY(Y,nt);K=h_(dt.reverse(),"beforeRouteLeave",Y,nt);for(const ct of dt)ct.leaveGuards.forEach(B=>{K.push(rs(B,Y,nt))});const st=C.bind(null,Y,nt);return K.push(st),Au(K).then(()=>{K=[];for(const ct of o.list())K.push(rs(ct,Y,nt));return K.push(st),Au(K)}).then(()=>{K=h_(St,"beforeRouteUpdate",Y,nt);for(const ct of St)ct.updateGuards.forEach(B=>{K.push(rs(B,Y,nt))});return K.push(st),Au(K)}).then(()=>{K=[];for(const ct of Y.matched)if(ct.beforeEnter&&!nt.matched.includes(ct))if(ki(ct.beforeEnter))for(const B of ct.beforeEnter)K.push(rs(B,Y,nt));else K.push(rs(ct.beforeEnter,Y,nt));return K.push(st),Au(K)}).then(()=>(Y.matched.forEach(ct=>ct.enterCallbacks={}),K=h_(At,"beforeRouteEnter",Y,nt),K.push(st),Au(K))).then(()=>{K=[];for(const ct of a.list())K.push(rs(ct,Y,nt));return K.push(st),Au(K)}).catch(ct=>No(ct,8)?ct:Promise.reject(ct))}function M(Y,nt,K){for(const dt of s.list())dt(Y,nt,K)}function k(Y,nt,K,dt,St){const At=_(Y,nt);if(At)return At;const st=nt===Ca,ct=ac?history.state:{};K&&(dt||st?i.replace(Y.fullPath,Ae({scroll:st&&ct&&ct.scroll},St)):i.push(Y.fullPath,St)),l.value=Y,Pt(Y,nt,K,st),tt()}let O;function F(){O||(O=i.listen((Y,nt,K)=>{if(!Ht.listening)return;const dt=m(Y),St=S(dt);if(St){P(Ae(St,{replace:!0}),dt).catch(ld);return}u=dt;const At=l.value;ac&&yX(yM(At.fullPath,K.delta),O1()),A(dt,At).catch(st=>No(st,12)?st:No(st,2)?(P(st.to,dt).then(ct=>{No(ct,20)&&!K.delta&&K.type===Vd.pop&&i.go(-1,!1)}).catch(ld),Promise.reject()):(K.delta&&i.go(-K.delta,!1),Z(st,dt,At))).then(st=>{st=st||k(dt,At,!1),st&&(K.delta&&!No(st,8)?i.go(-K.delta,!1):K.type===Vd.pop&&No(st,20)&&i.go(-1,!1)),M(dt,At,st)}).catch(ld)}))}let z=jf(),R=jf(),j;function Z(Y,nt,K){tt(Y);const dt=R.list();return dt.length?dt.forEach(St=>St(Y,nt,K)):console.error(Y),Promise.reject(Y)}function q(){return j&&l.value!==Ca?Promise.resolve():new Promise((Y,nt)=>{z.add([Y,nt])})}function tt(Y){return j||(j=!Y,F(),z.list().forEach(([nt,K])=>Y?K(Y):nt()),z.reset()),Y}function Pt(Y,nt,K,dt){const{scrollBehavior:St}=e;if(!ac||!St)return Promise.resolve();const At=!K&&_X(yM(Y.fullPath,0))||(dt||!K)&&history.state&&history.state.scroll||null;return Nd().then(()=>St(Y,nt,At)).then(st=>st&&mX(st)).catch(st=>Z(st,Y,nt))}const Ot=Y=>i.go(Y);let bt;const wt=new Set,Ht={currentRoute:l,listening:!0,addRoute:d,removeRoute:p,hasRoute:g,getRoutes:v,resolve:m,options:e,push:b,replace:T,go:Ot,back:()=>Ot(-1),forward:()=>Ot(1),beforeEach:o.add,beforeResolve:a.add,afterEach:s.add,onError:R.add,isReady:q,install(Y){const nt=this;Y.component("RouterLink",sc),Y.component("RouterView",M7),Y.config.globalProperties.$router=nt,Object.defineProperty(Y.config.globalProperties,"$route",{enumerable:!0,get:()=>mr(l)}),ac&&!bt&&l.value===Ca&&(bt=!0,b(i.location).catch(St=>{}));const K={};for(const St in Ca)K[St]=Ye(()=>l.value[St]);Y.provide(vP,nt),Y.provide(C7,of(K)),Y.provide(fS,l);const dt=Y.unmount;wt.add(Y),Y.unmount=function(){wt.delete(Y),wt.size<1&&(u=Ca,O&&O(),O=null,l.value=Ca,bt=!1,j=!1),dt()}}};return Ht}function Au(e){return e.reduce((t,r)=>t.then(()=>r()),Promise.resolve())}function sY(e,t){const r=[],n=[],i=[],o=Math.max(t.matched.length,e.matched.length);for(let a=0;a<o;a++){const s=t.matched[a];s&&(e.matched.find(u=>zc(u,s))?n.push(s):r.push(s));const l=e.matched[a];l&&(t.matched.find(u=>zc(u,l))||i.push(l))}return[r,n,i]}function Mo(e){return`data/icons/item/${e}.webp`}function lY(e){return`<img src="${Mo(e)}" class="iconitem" />`}function Bt(e,t,r){if(!e&&e!==0)return"?";const n=parseFloat(e),i=n.toFixed(t);return r?n>=0?"+"+i:i:i=="Infinity"?"\u221E":i}function is(e,t){return e+(t-e)*Math.random()}function uY(e,t){let r=0;if(t<e[r])return-1;let n=e.length-1;if(e[n]<t)return n+1;for(;r<=n;){let i=Math.floor((r+n)/2);if(e[i]<=t&&t<=e[i+1])return i;t<e[i]?n=i-1:r=i+1}return-1}function cY(e,t){let r=0,n=e.length-1,i=null;for(;r<=n;){let o=Math.floor((r+n)/2);t(e[o])?(i=e[o],n=o-1):r=o+1}return i}function fY(e,t,r,n=.5,i=120,o=0){var a=1,s=r-t;return s!=0&&(a=(e-t)/s),`hsla(${a*(i-o)+o}, 100%, 50%, ${n})`}function hY(e,t){return e.length<=t?e:e.slice(0,t-1)+"\u2026"}function dY(e){const t=/\d+/g;return e.match(t).join("-")}function gP(e){if(e>=10**12)return e;if(e>=10**9)return e/10**9+"G";if(e>=10**6)return e/10**6+"M";if(e>=10**3)return e/10**3+"K";if(e>0){if(e<10**-1)return e/10**-3+"m";if(e<10**-4)return e/10**-6+"u";if(e<10**-7)return e/10**-9+"n";if(e<10**-10)return e}return e}function cd(e,t,r){if(r==t.level)return;const n=Math.min(r,40),i=e.workerStatic[t.charkey];let o=t.mspdSheet/(i.mspd/100)-1;for(let a=t.level+1;a<=n;a++)t.level=a,t.wspdSheet+=is(i.wspd_lo,i.wspd_hi)/1e6,o+=is(i.mspd_lo,i.mspd_hi)/1e6,t.luckSheet+=is(i.luck_lo,i.luck_hi)/1e4,a%5==0&&t.skills.push(e.randomSkill(t.skills));t.mspdSheet=i.mspd/100*(1+o)}const re=T0({id:"user",state:()=>({selectedLang:"en",selectedRegion:"RU",selectedTax:.65,customPrices:{},keepItems:{},regionModifiers:{},allowFloating:!1,useFloatingModifiers:{},regionModifiers2:{},lodgingP2W:{},storageP2W:{},storagePersonal:{},lodgingTaken:{},activateAncado:!1,houseTaken:{},userWorkers:[],useDefaultWorker:!1,defaultWorker:{tnk:0,charkey:7572,label:"default",level:30,wspdSheet:140,mspdBase:5,mspdSheet:7.5,luckSheet:6,skills:["1012","1301","1302","1303","1601","1602","1603"],job:null},farmingEnable:!1,farmingBareProfit:0,farmingProfit:0,displayWorkerStatsForPz:!0,displayProfitPerCp:!1,grindTakenList:[],userWorkshops:{},defaultUserWorkshop:{industry:"unknown",label:"",manualCycleIncome:0,manualWorkload:300,manualCp:0},prerelease_housesconfig:1}),actions:{migrate(e){if(!e)return;const t=JSON.parse(e);let r=!1;if("counter"in t&&(delete t.counter,r=!0),"connectionOrder"in t&&(delete t.connectionOrder,r=!0),"townSlotsP2W"in t&&(t.lodgingP2W=t.townSlotsP2W,delete t.townSlotsP2W,r=!0),"grindTaken"in t&&(t.grindTakenList=Object.entries(t.grindTaken).filter(([n,i])=>i===!0).map(([n,i])=>Number(n)),delete t.grindTaken,r=!0),"userWorkers"in t&&t.userWorkers.forEach(n=>{n.job==1049&&(n.job=null,r=!0)}),"grindTakenList"in t){const n=new Set([133,134,612,805,806,807,801,961,962,963,1643,1644]),i=t.grindTakenList.filter(o=>!n.has(o));t.grindTakenList.length>i.length&&(t.grindTakenList=i,r=!0)}r&&(localStorage.setItem("user",JSON.stringify(t)),console.log("userStore updated to new version")),this.$patch(t)},removeNodeTaken(e){const t=xt(),r=new Set;return this.workingWorkers.forEach(n=>{t.dijTakenOnlyPath(tnk,n.job).forEach(o=>r.add(o))}),r.has(e)?(console.log("can't remove required node"),!1):(this.nodesTaken[e]=!1,console.log("removed"),!0)},assignWorker(e,t){var r=this.userWorkers.indexOf(e);console.log("fromIndex",r),this.userWorkers.splice(r,1),this.userWorkers.push(e),e.job=t,console.log("assigned",e.label,"to",e.job)},chanceAtModifier(e,t){if(t==0)return 100;if(!xt().ready)return 0;if(this.modTimes[e].hasOwnProperty(t))return this.modTimes[e][t];this.modSorteds[e]===void 0&&console.log("undefined modifiers at rgk",e);const n=uY(this.modSorteds[e],t),i=n+1;if(n===-1)return 100;const o=this.modSorteds[e].length;if(n===o)return 0;const a=this.modSorteds[e][n],s=this.modTimes[e][a];if(n==i)return s;const l=this.modSorteds[e][i],u=this.modTimes[e][l],c=(t-a)/(l-a);return s+c*(u-s)},tierModifiers(e,t,r){const n=[];let i=0;const o=t,a=2*o,s=Math.ceil(o/r),l=Math.ceil(a/r);for(let u=s;u<=l;u++){const c=Math.max(2-r*u/o,0),f=Math.floor(o*(2-c)/100)*100,h=this.chanceAtModifier(e,c*100);h!=0&&(n.push({wld:f,mod:c,tier:u,time:h-i}),i=h)}return n},calcWalkMinutes(e,t){return 2*e/t/60},calcCyclesDaily(e,t,r,n,i){let o=0;const a=this.calcWalkMinutes(n,i);if(this.allowFloating&&this.useFloatingModifiers[t])for(const s of this.tierModifiers(t,e,r)){const l=Math.ceil(s.wld/r),u=10*l+a;o+=24*60*s.time/100/u}else{const s=e*(2-this.productivity(t)),l=Math.ceil(s/r),u=10*l+a;o=24*60/u}return o},modifyGrindTakens(e,t){e.target.checked?this.grindTakenSet.add(t):this.grindTakenSet.delete(t),this.grindTakenList=[...this.grindTakenSet]}},getters:{grindTakenSet(e){const t=new Set(e.grindTakenList);return console.log("grindTakenSet getter",t),t},marketUrl:e=>`https://apiv2.bdolytics.com/${e.selectedLang}/${e.selectedRegion}/market/central-market-data`,codexNodeUrl:e=>`https://bdolytics.com/${e.selectedLang}/${e.selectedRegion}/db/node/`,itemUrl:e=>`https://bdolytics.com/${e.selectedLang}/${e.selectedRegion}/db/item/`,floatingRegionGroups(){const e=xt(),t=Object.keys(e.regionGroups).filter(r=>this.useFloatingModifiers.hasOwnProperty(r)&&this.useFloatingModifiers[r]);return console.log("floatingRegionGroups",t),t},modHists(){const e={},t=xt();for(const r of Object.keys(t.regionGroups))if(this.allowFloating&&this.useFloatingModifiers.hasOwnProperty(r)&&this.useFloatingModifiers[r]){this.regionModifiers2.hasOwnProperty(r)||(this.regionModifiers2[r]=[0]);const n=this.regionModifiers2[r].map(Number).filter(i=>!isNaN(i)).sort((i,o)=>o-i);e[r]=n}else this.regionModifiers.hasOwnProperty(r)?e[r]=[this.regionModifiers[r]]:e[r]=[0];return e},medianModifiers(){const e={},t=xt();for(const r of Object.keys(t.regionGroups)){let n=0;const i=this.modHists[r].length;if(i%2)n=this.modHists[r][(i-1)/2];else{const o=this.modHists[r][(i-1-1)/2],a=this.modHists[r][(i-1+1)/2];n=(o+a)/2}e[r]=n}return e},medianWorkloads(){const e={},t=xt();for(const[r,n]of Object.entries(t.plantzones)){const i=n.regiongroup;e[r]=n.workload*(2-this.medianModifiers[i]/100)}return e},modTimes(){const e=n=>n.reduce((i,o)=>i+o,0)/n.length,t={},r=xt();for(const n of Object.keys(r.regionGroups)){const i=this.modHists[n].length,o={},a=this.modHists[n][0],s=this.modHists[n][i-1];if(a==s)o[a]=(i-1)/2;else{const u={};for(let c=0;c<i;c++){const f=this.modHists[n][c];if(f==a){o[f]=100*c/(i-1);continue}if(f==s){o[f]=100*c/(i-1);break}f in u?u[f].push(c):u[f]=[c]}for(const[c,f]of Object.entries(u)){const h=e(f);o[c]=100*h/(i-1)}}t[n]=o}return t},modSorteds(){const e={},t=xt();for(const r of Object.keys(t.regionGroups)){const n=Object.keys(this.modTimes[r]).map(Number).sort((i,o)=>i-o);e[r]=n}return e},productivity:e=>t=>(t in e.regionModifiers?e.regionModifiers[t]:0)/100,nodeCostInfinityUntaken:e=>t=>e.autotakenNodes.has(t)?0:1/0,haveLodging(e){const t=xt();let r={slots:{perTown:{},total:0},cp:{perTown:{},total:0}};for(const[n,i]of Object.entries(t.lodgingPerTown)){if(r.slots.perTown[n]=1,r.cp.perTown[n]=0,n==619&&!e.activateAncado){r.slots.perTown[n]=0;continue}i.houses.forEach(o=>{e.lodgingTaken[o.key]&&(r.slots.perTown[n]+=o.lodgingSpaces,r.cp.perTown[n]+=o.CP)}),e.lodgingP2W[n]&&(r.slots.perTown[n]+=e.lodgingP2W[n]),r.slots.total+=r.slots.perTown[n],r.cp.total+=r.cp.perTown[n]}return console.log("haveLodging getter"),r},townFreeLodgingCount:e=>t=>{const r=xt(),n=e.haveLodging.slots.perTown[t],i=e.userWorkers.filter(o=>r.tnk2tk(o.tnk)==t).length;return n-i},countWorkers(e){return e.userWorkers.length},workingWorkers(e){return e.userWorkers.filter(t=>t.job&&t.job!=null)},townWorkers:e=>t=>{const r=xt();return e.userWorkers.filter(i=>r.tnk2tk(i.tnk)==t)},townWorkingWorkers:e=>t=>{const r=xt();return e.workingWorkers.filter(i=>r.tnk2tk(i.tnk)==t)},getFreeWorkers:e=>t=>{const r=xt();return e.userWorkers.filter(n=>r.tnk2tk(n.tnk)==t&&!n.job)},workerStatsForDisplay:e=>t=>e.displayWorkerStatsForPz?xt().workerStatsOnCurrentJob(t):{wspd:t.wspdSheet,mspd:t.mspdSheet,luck:t.luckSheet},workersMinMaxStats(e){console.log("workersMinMaxStats");const t={wspd:{lo:142,hi:143},mspd:{lo:7.4,hi:7.6},luck:{lo:10,hi:11}};return e.userWorkers.forEach(r=>{if(r.charkey==7572){const n=e.workerStatsForDisplay(r);t.wspd.lo=Math.min(n.wspd,t.wspd.lo),t.mspd.lo=Math.min(n.mspd,t.mspd.lo),t.luck.lo=Math.min(n.luck,t.luck.lo),t.wspd.hi=Math.max(n.wspd,t.wspd.hi),t.mspd.hi=Math.max(n.mspd,t.mspd.hi),t.luck.hi=Math.max(n.luck,t.luck.hi)}}),t},grindTakenDesc(e){let t="";const r=xt();return r.ready&&e.grindTakenList.forEach(n=>{t+=r.uloc.node[n]+`
`}),t},autotakenGrindNodes(e){const t=new Set,r=xt();return r.ready&&e.grindTakenList.forEach(n=>{const o=r.dijkstraNearestTowns(Number(n),4,t,!0).sort((u,c)=>u[1]-c[1]),[a,s,l]=o[0];l.forEach(u=>t.add(u))}),console.log("autotakenGrindNodes getter",t),t},pzJobs(e){const t={},r=xt(),n=new Set([...e.autotakenGrindNodes]);return this.workingWorkers.forEach(i=>{if(!i||!r.jobIsPz(i.job))return;const o=i.job;if(!o)return;const a=r.workerStatsOnPlantzone(i),s=r.profitPzTownStats(o,i.tnk,a.wspd,a.mspd,a.luck),[l,u]=r.dijkstraPath(o,i.tnk,n);l&&l.forEach(c=>n.add(c)),t[o]={pzk:o,worker:i,profit:s,usedPath:l}}),t},currentNodesJobs(e){const t={};for(const[r,n]of Object.entries(e.pzJobs))n.usedPath&&n.usedPath.forEach(i=>i in t?t[i].push(r):t[i]=[r]);return t},currentNodesCashflow(e){const t={};for(const[r,n]of Object.entries(e.pzJobs))n.usedPath&&n.usedPath.forEach(i=>i in t?t[i]+=n.profit.priceDaily:t[i]=n.profit.priceDaily);return t},nodeSharing(e){const t={},r={};for(const[n,i]of Object.entries(e.pzJobs))i.usedPath&&i.usedPath.forEach(function(o){let a=0;o in nodesJobs?(r[o]+=i.profit.priceDaily,i.profit.priceDaily>a?nodesJobs[o].push(n):(a=i.profit.priceDaily,nodesJobs[o].unshift(n))):(r[o]=i.profit.priceDaily,nodesJobs[o]=[n])});return{jobs:t,cashFlows:r}},pzjobsSharedCP(e){const t={},r=xt();for(const[n,i]of Object.entries(e.pzJobs))t[n]=0,i.usedPath&&i.usedPath.forEach(function(o){if(e.autotakenGrindNodes.has(o))return;const a=i.profit.priceDaily/e.currentNodesCashflow[o],s=r.nodes[o].CP*a;t[n]+=s});return t},pzjobsSharedEfficiency(e){const t={};for(const[r,n]of Object.entries(e.pzJobs))n.usedPath&&(t[r]=n.profit.priceDaily/e.pzjobsSharedCP[r]);return t},pzjobsSortedSharedEfficiency(e){return Object.entries(e.pzjobsSharedEfficiency).sort(([,t],[,r])=>r-t)},farmingProfitPerCP(e){return(e.farmingProfit-e.farmingBareProfit)/10},workerBringsItemkeys:e=>t=>{const r=xt();if(r.jobIsIdle(t.job))return[];if(r.jobIsPz(t.job))return r.plantzones[worker.job].itemkeys;if(r.jobIsFarming(t.job))return[];if(r.jobIsCustom(t.job))return[];if(r.jobIsWorkshop(t.job))return[]},townsStoreItemkeys(e){const t={},r=xt();if(!r.ready)return t;r.towns.forEach(n=>t[r.tnk2tk(n)]=new Set([]));for(const[n,i]of Object.entries(e.workingWorkers))if(r.jobIsPz(i.job)){const o=r.tnk2tk(i.tnk);t[o]=new Set([...t[o],...r.plantzones[i.job].itemkeys])}return t},baseStorage(e){return e.selectedRegion=="RU"?8:16},townInfra:e=>(t,r,n)=>{const i=xt();t in e.lodgingP2W||(e.lodgingP2W[t]=0),t in e.storageP2W||(e.storageP2W[t]=0),t in e.storagePersonal||(e.storagePersonal[t]=0);const o=r-e.lodgingP2W[t]-1,a=n+1+e.storagePersonal[t]-e.storageP2W[t]-e.baseStorage;return i.lsLookup(t,o,a)},townsInfra(e){const t={},r=xt();return r.ready&&r.towns.forEach(n=>{const i=r.tnk2tk(n);t[i]=this.townInfra(i,e.townWorkingWorkers(i).length,e.townsStoreItemkeys[i]?e.townsStoreItemkeys[i].size:0)}),t},lodgage(e){return Object.values(this.townsInfra).reduce((t,r)=>t+r.cost,0)},workerIncome:e=>t=>{const r=xt();if(r.jobIsIdle(t.job))return 0;if(r.jobIsPz(t.job))return e.pzJobs[t.job].profit.priceDaily;if(r.jobIsFarming(t.job))return e.farmingProfitPerCP;if(r.jobIsCustom(t.job))return t.job[1];if(r.jobIsWorkshop(t.job)){const n=t.job.hk;n in e.userWorkshops||(e.userWorkshops[n]={...e.defaultUserWorkshop});const i=e.userWorkshops[n];return r.profitWorkshopWorker(n,i,t)}},workerSharedCp:e=>t=>{const r=xt();if(r.jobIsPz(t.job))return e.pzjobsSharedCP[t.job];if(r.jobIsFarming(t.job))return 0;if(r.jobIsCustom(t.job))return t.job[2];if(r.jobIsWorkshop(t.job)){const n=e.workersWorkshop.filter(i=>i.job.hk==t.job.hk).length;return e.userWorkshops[t.job.hk].manualCp/n}},workerSharedLodgingCp:e=>t=>{const r=xt();if(!r.ready)return;const n=e.workerIncome(t),i=r.tnk2tk(t.tnk),o=e.prerelease_housesconfig?e.townsInfra[i].cost:e.haveLodging.cp.perTown[i],a=e.townsTotalIncome[i].income;let s;if(a>0)s=n/a*o;else{const l=e.userWorkers.filter(u=>r.tnk2tk(u.tnk)==i).length;s=1/l*o}return s},workerIncomePerCp:e=>t=>{const r=e.workerIncome(t)/(e.workerSharedCp(t)+e.workerSharedLodgingCp(t));return isNaN(r)&&console.log("workerIncomePerCp ret NaN (0 income / 0 cp?) for worker",t.label),r},workersSortedByIncomePerCp(e){const t=Date.now(),r=[];return e.workingWorkers.forEach(n=>{r.push({w:n,i:e.workerIncome(n),ipc:e.workerIncomePerCp(n)})}),r.sort((n,i)=>i.ipc-n.ipc),console.log("workersSortedByIncomePerCp took",Date.now()-t,"ms"),r},townsTotalIncome(e){const t={},r=xt();if(!r.ready)return t;r.towns.forEach(n=>t[r.tnk2tk(n)]={income:0,mapCp:0});for(const[n,i]of Object.entries(e.workingWorkers)){const o=r.tnk2tk(i.tnk);t[o].income+=e.workerIncome(i),t[o].mapCp+=e.workerSharedCp(i)}for(const[n,i]of Object.entries(t)){const o=e.prerelease_housesconfig?e.townsInfra[n].cost:e.haveLodging.cp.perTown[n];i.eff=i.income/(i.mapCp+o),i.income==0&&i.mapCp+o==0&&(i.eff=0)}return t},workedPlantzones(e){const t=Object.keys(e.pzJobs);return new Set(t)},autotakenNodes(e){const t=new Set([...e.autotakenGrindNodes]);for(const[n,i]of Object.entries(e.pzJobs))i.usedPath&&i.usedPath.forEach(o=>t.add(o));const r=xt();if(r.ready&&e.activateAncado){const i=r.dijkstraNearestTowns(1343,4,t,!0).sort((l,u)=>l[1]-u[1]),[o,a,s]=i[0];s.forEach(l=>t.add(l))}return console.log("autotakenNodes getter",t),t},autotakenGrindNodesCP(e){const t=xt(),r=[...e.autotakenGrindNodes].reduce((n,i)=>n+t.nodes[i].CP,0);return console.log("autotakenGrindNodesCP",r),r},autotakenNodesCP(e){const t=xt();return[...e.autotakenNodes].reduce((n,i)=>n+t.nodes[i].CP,0)-e.autotakenGrindNodesCP},pzJobsTotalDailyProfit(e){let t=0;for(const[r,n]of Object.entries(e.pzJobs))t+=n.profit.priceDaily;return t},pzJobsTotalLodgingCost(e){let t=0;for(const[r,n]of Object.entries(e.pzJobs))t+=e.workerSharedLodgingCp(n.worker);return t},pzJobsDailyProfitPerCp(e){return this.pzJobsTotalDailyProfit/(e.autotakenNodesCP+e.pzJobsTotalLodgingCost)},workersFarming(e){return e.userWorkers.filter(t=>t.job=="farming")},workersFarmingCount(e){return e.workersFarming.length},farmingCP(e){return e.farmingEnable?80:0},farmingTotalProfit(e){return e.farmingEnable?e.farmingBareProfit+(e.farmingProfit-e.farmingBareProfit)/10*e.workersFarmingCount:0},farmingJobsTotalLodgingCost(e){let t=0;return e.workersFarming.forEach(r=>{t+=e.workerSharedLodgingCp(r)}),t},farmingJobsDailyProfitPerCp(e){return e.farmingTotalProfit/(80+e.farmingJobsTotalLodgingCost)},workersWorkshop(e){const t=xt();return e.userWorkers.filter(r=>r.job&&t.jobIsWorkshop(r.job))},workersWorkshopCount(e){return e.workersWorkshop.length},workshopTotalProfit(e){let t=0;return e.workersWorkshop.forEach(r=>t+=e.workerIncome(r)),t},occupiedWorkshops(e){let t=new Set;return e.workersWorkshop.forEach(r=>t.add(r.job.hk)),console.log("occupiedWorkshops",t),t},workshopTotalCP(e){let t=0;return e.occupiedWorkshops.forEach(r=>t+=e.userWorkshops[r].manualCp),t},workshopJobsTotalLodgingCost(e){let t=0;return e.workersWorkshop.forEach(r=>{t+=e.workerSharedLodgingCp(r)}),t},workshopJobsDailyProfitPerCp(e){return e.workshopTotalProfit/(e.workshopTotalCP+e.workshopJobsTotalLodgingCost)},workersCustom(e){const t=xt();return e.userWorkers.filter(r=>r.job&&t.jobIsCustom(r.job))},workersCustomCount(e){return e.workersCustom.length},customTotalProfit(e){let t=0;return e.workersCustom.forEach(r=>t+=r.job[1]),t},customTotalCP(e){let t=0;return e.workersCustom.forEach(r=>t+=r.job[2]),t},customJobsTotalLodgingCost(e){let t=0;return e.workersCustom.forEach(r=>{t+=e.workerSharedLodgingCp(r)}),t},customJobsDailyProfitPerCp(e){return e.customTotalProfit/(e.customTotalCP+e.customJobsTotalLodgingCost)},totalCP(e){return e.autotakenNodesCP+e.farmingCP+(e.prerelease_housesconfig?e.lodgage:e.haveLodging.cp.total)+e.workshopTotalCP+e.customTotalCP},workersIdleCount(e){return e.countWorkers-e.workedPlantzones.size-e.workersFarmingCount-e.workersWorkshopCount-e.workersCustomCount},allJobsTotalDailyProfit(e){return e.pzJobsTotalDailyProfit+e.farmingTotalProfit+e.workshopTotalProfit+e.customTotalProfit},allJobsDailyProfitPerCp(e){return this.allJobsTotalDailyProfit/e.totalCP},jobsUsingNodes:e=>t=>{const r=xt(),n=t.filter(a=>!r.townSet.has(a)),i=new Set(n),o=[];for(const[a,s]of Object.entries(e.pzJobs))s.usedPath.filter(u=>i.has(u)).length&&o.push(s);return o},workerPzStats(e){const t=xt(),r=[];return e.userWorkers.forEach(n=>{r.push(t.workerStatsOnPlantzone(n))}),console.log("workerPzStats"),r},pzProfitsBefore(e){const t=e.pzJobsTotalDailyProfit,r=e.autotakenNodesCP,n=e.pzJobsTotalLodgingCost,i=e.pzJobsDailyProfitPerCp;return{daily:t,cp:r,lodgingCp:n,dailyPerCp:i}},allJobsProfitsBefore(e){const t=e.allJobsTotalDailyProfit,r=e.totalCP,n=e.allJobsDailyProfitPerCp;return{daily:t,cp:r,dailyPerCp:n}},jobEfficiencyDelta:e=>(t,r)=>{const n=e.allJobsProfitsBefore;return(n.daily+t)/(n.cp+r)-n.dailyPerCp},jobsTally(e){const t={},r=xt();if(!r.ready)return t;for(const[n,i]of Object.entries(e.pzJobs)){const o=r.plantzones[n],a=r.workerStatsOnPlantzone(i.worker).luck,s=o.lucky;if(s)for(const[l,u]of Object.entries(o.lucky))l in t||(t[l]=0),t[l]+=a/100*u*i.profit.cyclesDaily;for(const[l,u]of Object.entries(o.unlucky)){l in t||(t[l]=0);const c=s?1-a/100:1;t[l]+=c*u*i.profit.cyclesDaily}}return console.log("jobsTally getter"),t},lodgingCostsPerTownPerJobtype(e){const t={};e.userWorkers.filter(r=>gameStore.tnk2tk(r.tnk)==tk);for(const[r,n]of Object.entries(e.haveLodging.slots.perTown))e.haveLodging.cp.perTown[r],e.townWorkers(r);return t}}}),Ei=T0({id:"market",state:()=>({ready:!1,apiPrices:[],calculatedPrices:{},apiDatetime:0}),actions:{async fetchData(){const e=Date.now(),t=re(),r=`https://apiv2.bdolytics.com/${t.selectedLang}/${t.selectedRegion}/market/central-market-data`,n=await(await fetch(r)).json(),i=xt(),o=new Set(i.itemKeys),a={};n.data.forEach(s=>{o.has(s.item_id)&&(a[s.item_id]=s.price)});for(const s of Object.keys(i.vendorPrices))t.keepItems[s]=!0;this.calculatedPrices=await(await fetch("data/manual/calculated_prices.json")).json(),4001 in a&&(this.apiPrices=a,this.apiDatetime=Date.now(),this.ready=!0,localStorage.setItem("market",JSON.stringify(this.$state))),console.log("fetchMarket took",Date.now()-e,"ms")},itemPriceUrl(e){return e in this.apiPrices?`https://bdolytics.com/market/central-market/item/${e}`:re().itemUrl+e},priceBunch(e){if(e===null||typeof e>"u")return null;let t=0;for(const[r,n]of Object.entries(e))t+=this.prices[r]*n;return t},pricePzd(e,t){const r=this.priceBunch(e.unlucky);if(e.lucky){const n=this.priceBunch(e.lucky);return t/100*n+(1-t/100)*r}return r},priceLerp(e,t,r){return e===null?t:r/100*e+(1-r/100)*t}},getters:{prices(){const e=Date.now(),t=re(),r=xt();let n={};for(const[i,o]of Object.entries(this.apiPrices))n[i]=o;for(const[i,o]of Object.entries(r.vendorPrices))n[i]=o;for(const[i,o]of Object.entries(this.calculatedPrices)){n[i]=0;for(const[a,s]of Object.entries(o))n[i]+=n[a]*s}for(const i of Object.keys(n))i in t.customPrices&&t.customPrices[i]!==""&&(n[i]=t.customPrices[i]),!(i in t.keepItems&&t.keepItems[i])&&(i in r.vendorPrices||(n[i]*=t.selectedTax));return console.log("prices getter took",Date.now()-e,"ms"),n}}});var hS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pY(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var k7={exports:{}},x7={exports:{}};(function(e,t){(function(){var r,n,i,o,a,s,l,u,c,f,h,d,p,v,g;i=Math.floor,f=Math.min,n=function(m,y){return m<y?-1:m>y?1:0},c=function(m,y,_,b,T){var S;if(_==null&&(_=0),T==null&&(T=n),_<0)throw new Error("lo must be non-negative");for(b==null&&(b=m.length);_<b;)S=i((_+b)/2),T(y,m[S])<0?b=S:_=S+1;return[].splice.apply(m,[_,_-_].concat(y)),y},s=function(m,y,_){return _==null&&(_=n),m.push(y),v(m,0,m.length-1,_)},a=function(m,y){var _,b;return y==null&&(y=n),_=m.pop(),m.length?(b=m[0],m[0]=_,g(m,0,y)):b=_,b},u=function(m,y,_){var b;return _==null&&(_=n),b=m[0],m[0]=y,g(m,0,_),b},l=function(m,y,_){var b;return _==null&&(_=n),m.length&&_(m[0],y)<0&&(b=[m[0],y],y=b[0],m[0]=b[1],g(m,0,_)),y},o=function(m,y){var _,b,T,S,P,C;for(y==null&&(y=n),S=function(){C=[];for(var A=0,M=i(m.length/2);0<=M?A<M:A>M;0<=M?A++:A--)C.push(A);return C}.apply(this).reverse(),P=[],b=0,T=S.length;b<T;b++)_=S[b],P.push(g(m,_,y));return P},p=function(m,y,_){var b;if(_==null&&(_=n),b=m.indexOf(y),b!==-1)return v(m,0,b,_),g(m,b,_)},h=function(m,y,_){var b,T,S,P,C;if(_==null&&(_=n),T=m.slice(0,y),!T.length)return T;for(o(T,_),C=m.slice(y),S=0,P=C.length;S<P;S++)b=C[S],l(T,b,_);return T.sort(_).reverse()},d=function(m,y,_){var b,T,S,P,C,A,M,k,O;if(_==null&&(_=n),y*10<=m.length){if(S=m.slice(0,y).sort(_),!S.length)return S;for(T=S[S.length-1],M=m.slice(y),P=0,A=M.length;P<A;P++)b=M[P],_(b,T)<0&&(c(S,b,0,null,_),S.pop(),T=S[S.length-1]);return S}for(o(m,_),O=[],C=0,k=f(y,m.length);0<=k?C<k:C>k;0<=k?++C:--C)O.push(a(m,_));return O},v=function(m,y,_,b){var T,S,P;for(b==null&&(b=n),T=m[_];_>y;){if(P=_-1>>1,S=m[P],b(T,S)<0){m[_]=S,_=P;continue}break}return m[_]=T},g=function(m,y,_){var b,T,S,P,C;for(_==null&&(_=n),T=m.length,C=y,S=m[y],b=2*y+1;b<T;)P=b+1,P<T&&!(_(m[b],m[P])<0)&&(b=P),m[y]=m[b],y=b,b=2*y+1;return m[y]=S,v(m,C,y,_)},r=function(){m.push=s,m.pop=a,m.replace=u,m.pushpop=l,m.heapify=o,m.updateItem=p,m.nlargest=h,m.nsmallest=d;function m(y){this.cmp=y!=null?y:n,this.nodes=[]}return m.prototype.push=function(y){return s(this.nodes,y,this.cmp)},m.prototype.pop=function(){return a(this.nodes,this.cmp)},m.prototype.peek=function(){return this.nodes[0]},m.prototype.contains=function(y){return this.nodes.indexOf(y)!==-1},m.prototype.replace=function(y){return u(this.nodes,y,this.cmp)},m.prototype.pushpop=function(y){return l(this.nodes,y,this.cmp)},m.prototype.heapify=function(){return o(this.nodes,this.cmp)},m.prototype.updateItem=function(y){return p(this.nodes,y,this.cmp)},m.prototype.clear=function(){return this.nodes=[]},m.prototype.empty=function(){return this.nodes.length===0},m.prototype.size=function(){return this.nodes.length},m.prototype.clone=function(){var y;return y=new m,y.nodes=this.nodes.slice(0),y},m.prototype.toArray=function(){return this.nodes.slice(0)},m.prototype.insert=m.prototype.push,m.prototype.top=m.prototype.peek,m.prototype.front=m.prototype.peek,m.prototype.has=m.prototype.contains,m.prototype.copy=m.prototype.clone,m}(),function(m,y){return e.exports=y()}(this,function(){return r})}).call(hS)})(x7);(function(e){e.exports=x7.exports})(k7);const Uh=pY(k7.exports),xt=T0({id:"game",state:()=>({ready:!1,plantzoneDrops:{},pzdSet:null,plantzoneStatic:{},itemKeys:[],nodes:{},distPerTown:{},distToTown:{},lodgingPerTown:{},houseInfo:{},towns:[],townNames:{},regionGroups:{},loc:{},links:{},icons:{},workerStatic:{},skillData:{},vendorPrices:{}}),actions:{availableSkillPool(e,t){const r=new Set(e);return t&&r.delete(t),this.skillKeys.filter(i=>this.skillData[i].tier!=4&&!r.has(i))},randomSkill(e){const t=this.availableSkillPool(e);return t[Math.floor(Math.random()*t.length)]},wspdBonusOnPlantzone(e){let t=0;return this.ready&&e.skills.forEach(r=>{const n=this.skillData[r];n!==void 0&&("wspd"in n&&(t+=n.wspd),"wspd_farm"in n&&(t+=n.wspd_farm))}),t},wspdBonus(e,t){let r=0;return this.ready&&e.skills.forEach(n=>{const i=this.skillData[n];i!==void 0&&("wspd"in i&&(r+=i.wspd),"wspd_"+t in i&&(r+=i["wspd_"+t]))}),r},mspdBonus(e){let t=0;return this.ready&&e.skills.forEach(r=>{const n=this.skillData[r];n!==void 0&&"mspd"in n&&(t+=n.mspd)}),t},luckBonus(e){let t=0;return this.ready&&e.skills.forEach(r=>{const n=this.skillData[r];n!==void 0&&"luck"in n&&(t+=n.luck)}),t},workerStatsOnPlantzone(e){return{wspd:e.wspdSheet+this.wspdBonusOnPlantzone(e),mspd:e.mspdBase*(e.mspdSheet/e.mspdBase+this.mspdBonus(e)/100),luck:e.luckSheet+this.luckBonus(e)}},workerStatsOnIndustry(e,t){return{wspd:e.wspdSheet+this.wspdBonus(e,t),mspd:e.mspdBase*(e.mspdSheet/e.mspdBase+this.mspdBonus(e)/100),luck:e.luckSheet+this.luckBonus(e)}},workerStatsOnCurrentJob(e){var t="farm";if(this.jobIsWorkshop(e.job)){const r=re(),n=e.job.hk;n in r.userWorkshops||(r.userWorkshops[n]={...r.defaultUserWorkshop}),t=r.userWorkshops[n].industry}return{wspd:e.wspdSheet+this.wspdBonus(e,t),mspd:e.mspdBase*(e.mspdSheet/e.mspdBase+this.mspdBonus(e)/100),luck:e.luckSheet+this.luckBonus(e)}},houseLodging(e){var n;const t=(n=this.houseInfo[e].CraftList[1])!=null?n:0;return{0:0,1:1,2:2,3:4,4:6,5:8}[t]},houseStorage(e){var n;const t=(n=this.houseInfo[e].CraftList[2])!=null?n:0;return{0:0,1:3,2:5,3:8,4:12,5:16}[t]},houseCost(e){var r;return(r=this.houseInfo[e].CP)!=null?r:NaN},async fetchData(){const e=Date.now();this.plantzoneDrops=await(await fetch("data/manual/plantzone_drops.json")).json(),this.pzdSet=new Set(Object.keys(this.plantzoneDrops).map(i=>+i)),this.plantzoneStatic=await(await fetch("data/plantzone.json")).json();const t=await(await fetch("data/manual/plantzone_uniques.json")).json();this.itemKeys=t.sort((i,o)=>i-o),this.nodes=await(await fetch("data/exploration.json")).json(),this.tk2pzk=await(await fetch("data/distances_tk2pzk.json")).json(),this.pzk2tk=await(await fetch("data/distances_pzk2tk.json")).json(),this.hk2nk=await(await fetch("data/hk2nk.json")).json(),this.tk2nk=await(await fetch("data/distances_tk2nk.json")).json(),this.lodgingPerTown=await(await fetch("data/lodging_per_town.json")).json(),this.houseInfo=await(await fetch("data/houseinfo.json")).json(),this.towns=[1,301,302,601,61,602,604,608,1002,1101,1141,1301,1314,1319,1343,1380,1604,1623,1649,1691,1750,1781,1785,1795],this.vendorPrices=await(await fetch("data/manual/vendor_prices.json")).json(),this._tk2tnk={5:1,32:301,52:302,77:601,88:61,107:602,120:604,126:608,182:1002,202:1101,221:1141,229:1301,601:1314,605:1319,619:1343,693:1380,706:1604,735:1623,873:1649,955:1691,1124:1750,1210:1781,1219:1785,1246:1795};const r={};for(const[i,o]of Object.entries(this._tk2tnk))r[o]=i;this._tnk2tk=r;const n={};for(const[i,o]of Object.entries(this.plantzoneStatic))if(i in this.plantzoneDrops){const a=o.regiongroup;a in n?n[a].push(i):n[a]=[i]}this.regionGroups=n,this.skillData=await(await fetch("data/manual/skills.json")).json(),this.workerStatic=await(await fetch("data/worker_static.json")).json(),this.loc=await(await fetch("data/loc.json")).json(),this.links=await(await fetch("data/links.json")).json(),this.ls_lookup=await(await fetch("data/all_lodging_storage.json")).json(),this.ls_lodgings_sorted={};for(const[i,o]of Object.entries(this.ls_lookup))this.ls_lodgings_sorted[i]=Object.keys(o).sort((a,s)=>a-s);this.ready=!0,console.log("fetchGame took",Date.now()-e,"ms")},tk2tnk(e){if(this.ready){if(e in this._tk2tnk)return this._tk2tnk[e];console.log("unknown tk",e/0)}},tnk2tk(e){if(this.ready){if(e in this._tnk2tk)return this._tnk2tk[e];console.log("unknown tnk",e)}},dijTownsInCpRadius(e,t){let r=new Uh((s,l)=>n[s]-n[l]),n={[e]:this.nodes[e].CP},i={[e]:[e]};r.push(e);for(var o;r.size()&&(o=r.pop(),!(n[o]>=t));)this.links[o].forEach(s=>{const l=n[o]+this.nodes[s].CP;s in n?l<n[s]&&(n[s]=l,i[s]=[...i[o],s]):(n[s]=l,i[s]=[...i[o],s],r.push(s))});const a={};return this.towns.forEach(s=>{s in n&&(a[s]=n[s])}),a},dijDiscountedNearestPlantzones(e,t){if(!this.ready)return;const r=re();let n=new Set,i=new Uh((u,c)=>o[u]-o[c]),o={[e]:r.autotakenNodes.has(e)?0:this.nodes[e].CP},a={[e]:[e]};i.push(e);for(var s;i.size()&&(s=i.pop(),!(this.pzdSet.has(s)&&!r.autotakenNodes.has(s)&&(n.add(s),n.size==t)));)this.links[s].forEach(u=>{const c=r.autotakenNodes.has(u)?0:this.nodes[u].CP,f=o[s]+c;u in o?f<o[u]&&(o[u]=f,a[u]=[...a[s],u]):(o[u]=f,i.push(u),a[u]=[...a[s],u])});const l=[];return n.forEach(u=>{l.push([u,o[u],a[u]])}),l},dijkstraPath(e,t,r){if(!this.ready)return[null,0];let n={[e]:this.nodes[e].CP},i={[e]:[e]},o=new Uh((s,l)=>n[s]-n[l]);o.push(e);for(var a;o.size()&&(a=o.pop(),a!=t);)this.links[a].forEach(s=>{this.nodes[s]==null&&console.log("dijkstraPath: no exploration node",s);const l=r&&r.has(s)?0:this.nodes[s].CP,u=n[a]+l;s in n?u<n[s]&&(n[s]=u,i[s]=[...i[a],s]):(n[s]=u,i[s]=[...i[a],s],o.push(s))});return[i[t],n[t]]},dijkstraNearestTowns(e,t,r,n){if(!this.ready)return;let i=new Set,o=new Uh((c,f)=>a[c]-a[f]),a={[e]:this.nodes[e].CP},s={[e]:[e]};o.push(e);for(var l;o.size()&&(l=o.pop(),!(this.townSet.has(l)&&(!n||l!=1343)&&(i.add(l),i.size==t)));)this.links[l].forEach(c=>{this.nodes[c]==null&&console.log("dijkstraNearestTowns: no exploration node",c);const f=r&&r.has(c)?0:this.nodes[c].CP,h=a[l]+f;c in a?h<a[c]&&(a[c]=h,s[c]=[...s[l],c]):(o.push(c),a[c]=h,s[c]=[...s[l],c])});const u=[];return i.forEach(c=>{u.push([c,a[c],s[c]])}),u},plantzoneNearestTownsFreeWorkersProfits(e,t){const r=re(),n=[];return this.dijkstraNearestTowns(e,t,r.autotakenNodes).forEach(([o,a,s])=>{const l=this._tnk2tk[o];r.getFreeWorkers(l).forEach(c=>{const f=this.workerStatsOnPlantzone(c);n.push(this.pzSelectionEntry(e,l,o,a,s,c,f))})}),n.sort((o,a)=>a.dailyPerCp-o.dailyPerCp),n},pzSelectionEntry(e,t,r,n,i,o,a){const s=re(),l=this.profitPzTownStats(e,r,a.wspd,a.mspd,a.luck),u=this.plantzones[e].itemkeys,c=new Set([...s.townsStoreItemkeys[t],...u]).size,f=s.townsInfra[t],h=s.townInfra(t,s.townWorkingWorkers(t).length+1,c),d=h.cost-f.cost,p=`old: ${f.wantLodging} \u{1F6CF}\uFE0F ${f.wantStorage} \u{1F4E6} ${Bt(f.cost)}CP
new: ${h.wantLodging} \u{1F6CF}\uFE0F ${h.wantStorage} \u{1F4E6} ${Bt(h.cost)}CP`,v={pz:this.plantzones[e],tnk:r,mapCp:n,path:i,townCp:d,infraTooltip:p,cp:n+d,profit:l,w:o,statsOnPz:a};return v.dailyPerCp=s.jobEfficiencyDelta(v.profit.priceDaily,n+d),v},farmSelectionEntry(e){const t=re(),r=t.townsInfra[e],i=t.townsStoreItemkeys[e].size,o=t.townInfra(e,t.townWorkingWorkers(e).length+1,i),a=o.cost-r.cost,s=`old: ${r.wantLodging} \u{1F6CF}\uFE0F ${r.wantStorage} \u{1F4E6} ${Bt(r.cost)}CP
new: ${o.wantLodging} \u{1F6CF}\uFE0F ${o.wantStorage} \u{1F4E6} ${Bt(o.cost)}CP`;return{townCp:a,infraTooltip:s,dailyPerCp:t.jobEfficiencyDelta(t.farmingProfitPerCP,a)}},profitDataNearestTown(e,t,r){const n=Ei();let i={};for(const[o,a]of Object.entries(state.plantzones))i[o]={cycleValue:n.priceLerp(a.luckyValue,a.unluckyValue,r),cycleMinutes:10*Math.ceil(a.activeWorkload/e)+2*a.nearestTown.dist/t/60},i[o].cyclesDaily=24*60/i[o].cycleMinutes,i[o].priceDaily=i[o].cyclesDaily*i[o].cycleValue/1e6;return i},profitPzTownStats(e,t,r,n,i){if(!(e in this.plantzones))return{cycleValue:0,cycleMinutes:NaN,cyclesDaily:NaN,priceDaily:0};const o=re(),a=Ei(),s=this.plantzones[e];let l={dist:this.pzDistance(t,e),cycleValue:a.priceLerp(s.luckyValue,s.unluckyValue,i)};return l.cyclesDaily=o.calcCyclesDaily(s.workload,s.regiongroup,r,l.dist,n),l.priceDaily=l.cyclesDaily*l.cycleValue/1e6,l},profitWorkshopWorker(e,t,r){const n=re(),i=this.workerStatsOnIndustry(r,t.industry),o=this.houseDistance(r.tnk,e),a=n.calcWalkMinutes(o,i.mspd),s=Math.ceil(t.manualWorkload/i.wspd),l=5*s+a;return 24*60/l*t.manualCycleIncome/1e6},plantzoneNearestCpTownProfit(e,t,r,n){let i=this.dijkstraNearestTowns(e,2);i.sort((c,f)=>c[1]-f[1]);let o={};var a,s;for(let c=0;c<2&&([a,s]=i[c],o=this.profitPzTownStats(e,a,t,r,n),!(o.dist<1e6));c++);return{...this.plantzones[e],tnk:a,...o,cp:s,dailyPerCp:o.priceDaily/s}},plantzoneNearestWalkTownProfit(e,t,r,n){const i=Date.now(),o=re(),a=this.pzk2tk[e],[s]=a[0],u=this.dijkstraPath(e,s,o.autotakenNodes).cp,c=this.tk2tnk(s),f=this.profitPzTownStats(e,c,t,r,n),d={...this.plantzones[e],tnk:c,...f,cp:u,dailyPerCp:f.priceDaily/u};return console.log("plantzoneNearestWalkTownProfit took",Date.now()-i,"ms"),d},itemName(e){if(!this.ready)return e;const t=re();return e in this.loc[t.selectedLang].item?this.loc[t.selectedLang].item[e]:e},nodeName(e){if(!this.ready)return e;const t=re();return this.loc[t.selectedLang].node[e]},parentNodeName(e){if(this.ready&&e in this.plantzoneStatic){const t=this.plantzoneStatic[e].parent;return this.nodeName(t)}else return e},plantzoneName(e){if(this.ready&&e in this.plantzoneStatic){const t=this.plantzoneStatic[e].node.key;return this.parentNodeName(e)+" "+this.nodeName(t)}else return e},pzDistance(e,t){const r=this.pzk2tk[t],n=this._tnk2tk[e];for(let i=0;i<r.length;i++)if(r[i][0]==n)return r[i][1];return NaN},houseDistance(e,t){if(!this.ready)return 0;const r=this.hk2nk[t],n=this._tnk2tk[e];return this.tk2nk[n][r]},isWorkable(e){return[4,6,7,8,9,14,15].some(r=>r==this.nodes[e].kind)},isTown(e){return[1,2].some(r=>r==this.nodes[e].kind)},jobIsIdle(e){return e===null},jobIsPz(e){return typeof e=="number"},jobIsFarming(e){return e=="farming"},jobIsCustom(e){return Array.isArray(e)},jobIsWorkshop(e){return e&&typeof e=="object"&&"kind"in e&&e.kind=="workshop"},jobIcon(e){return this.jobIsFarming(e)?"\u{1F33B}":this.jobIsCustom(e)?"\u270D\uFE0F":this.jobIsWorkshop(e)?"\u{1F3ED}":""},workerJobDescription(e){const t=e.job;if(this.jobIsIdle(t))return"idle";if(this.jobIsPz(t))return this.uloc.node[t];if(this.jobIsFarming(t))return"["+this.jobIcon(t)+"]";if(this.jobIsCustom(t))return"["+this.jobIcon(t)+"] "+t[3];if(this.jobIsWorkshop(t)){const n=xt().uloc.char[t.hk],i=dY(n);return"["+this.jobIcon(t)+"] "+i}return"UNKNOWN_JOBTYPE"},lsLookup(e,t,r){if(!this.ready)return null;const n=this.ls_lookup[e];let i={wantLodging:t,wantStorage:r,storage:NaN,cost:NaN,lodging:NaN,success:!1};for(let u in n){const c=Number(u);if(c>=t){const f=n[c],h=cY(f,d=>d.storage>=r);if(h){if(!i.success){i={wantLodging:t,wantStorage:r,...h,lodging:c,success:!0};continue}if(i.success&&h.cost<i.cost){i={wantLodging:t,wantStorage:r,...h,lodging:c,success:!0};break}}}}const o=t==this.townUpperLimits[e].lodging,a=t>this.townUpperLimits[e].lodging,s=r==this.townUpperLimits[e].storage,l=r>this.townUpperLimits[e].storage;return i={...i,warnL:o,errL:a,warnS:s,errS:l},i}},getters:{uloc(){const e=re();return this.ready?this.loc[e.selectedLang]:{town:{},housetype:{},char:{},item:{},node:{},skill:{},skilldesc:{}}},townSet(){return new Set(this.towns)},nearestTown:e=>t=>{const r=e.pzk2tk[t];return r&&r[0]?{tk:r[0][0],dist:r[0][1]}:{tk:0,dist:NaN}},skillKeys(){return Object.keys(this.skillData).map(Number)},housesPerTown(){const e={};for(const[t,r]of Object.entries(this.houseInfo)){const n=r.affTown;n in e||(e[n]=[]),e[n].push(Number(t))}return console.log("housesPerTown",e),e},townUpperLimits(){const e={};for(const[t,r]of Object.entries(this.housesPerTown)){const n={cp:0,storage:0,lodging:0};for(const i of r)n.cp+=this.houseCost(i),n.storage+=this.houseStorage(i),n.lodging+=this.houseLodging(i);e[t]=n}return console.log("townUpperLimits",e),e},plantzones(){if(!this.ready)return{};const e=Date.now(),t=Ei(),r=re();let n={};for(const[i,o]of Object.entries(this.plantzoneDrops)){const a={...o,...this.plantzoneStatic[i]};a.name=this.plantzoneName(i),a.unluckyValue=t.priceBunch(a.unlucky),a.luckyValue=t.priceBunch(a.lucky),a.activeWorkload=a.workload*(2-r.productivity(a.regiongroup)),a.itemkeys=new Set([...Object.keys(a.lucky)]),n[i]=a}return console.log("plantzones getter took",Date.now()-e,"ms"),n}}}),R1=T0({id:"map",state:()=>({target:[0,0],zoom:-8})}),vY=T0({id:"droprates",state:()=>({selected_pzk:"",selected_ik:"",selected_specie:"",selected_model:"a",usePooling:!1,plotChiSquared:!1})});const $e=(e,t)=>{const r=e.__vccOpts||e;for(const[n,i]of t)r[n]=i;return r},gY={class:"wrapper"},mY=U("Home"),yY=U("Plantzones"),_Y=U("Modifiers"),bY=U("Settings"),wY=U("About"),SY={async beforeCreate(){xt().fetchData();const t=re(),r=localStorage.getItem("user");t.migrate(r);const n=Ei(),i=localStorage.getItem("market");i&&n.$patch(JSON.parse(i));const o=3600*1e3;n.apiDatetime+o<Date.now()&&n.fetchData();const a=R1(),s=localStorage.getItem("map");a.$patch(JSON.parse(s))}},TY=Object.assign(SY,{__name:"App",setup(e){return(t,r)=>(D(),$(W,null,[w("header",null,[w("div",gY,[w("nav",null,[kt(mr(sc),{to:"/"},{default:Le(()=>[mY]),_:1}),kt(mr(sc),{to:"/plantzones"},{default:Le(()=>[yY]),_:1}),kt(mr(sc),{to:"/modifiers"},{default:Le(()=>[_Y]),_:1}),kt(mr(sc),{to:"/settings"},{default:Le(()=>[bY]),_:1}),kt(mr(sc),{to:"/about"},{default:Le(()=>[wY]),_:1})])])]),kt(mr(M7))],64))}}),PY=$e(TY,[["__scopeId","data-v-14b67078"]]),EY="modulepreload",AY=function(e){return"/workerman/"+e},LM={},CY=function(t,r,n){return!r||r.length===0?t():Promise.all(r.map(i=>{if(i=AY(i),i in LM)return;LM[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${a}`))return;const s=document.createElement("link");if(s.rel=o?"stylesheet":EY,o||(s.as="script",s.crossOrigin=""),s.href=i,document.head.appendChild(s),o)return new Promise((l,u)=>{s.addEventListener("load",l),s.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t())};const MY={setup(){const e=xt(),t=re();return{gameStore:e,userStore:t}},props:{w:Object,homeless:Boolean},data:()=>({}),methods:{formatFixed:Bt,percentageToColor:fY}},kY=U(" @ "),xY=U(" idle ");function LY(e,t,r,n,i,o){return D(),$("tr",null,[w("td",null,[w("button",{onClick:t[0]||(t[0]=a=>e.$emit("fire"))},"fire")]),w("td",null,L(r.w.label),1),w("td",{style:Ll(this.userStore.prerelease_colorGoblins&&r.w.charkey==7572&&{backgroundColor:o.percentageToColor(this.userStore.workerStatsForDisplay(r.w).wspd,this.userStore.workersMinMaxStats.wspd.lo,this.userStore.workersMinMaxStats.wspd.hi,.2)})},L(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).wspd,2)),5),w("td",{style:Ll(this.userStore.prerelease_colorGoblins&&r.w.charkey==7572&&{backgroundColor:o.percentageToColor(this.userStore.workerStatsForDisplay(r.w).mspd,this.userStore.workersMinMaxStats.mspd.lo,this.userStore.workersMinMaxStats.mspd.hi,.2)})},L(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).mspd,2)),5),w("td",{style:Ll(this.userStore.prerelease_colorGoblins&&r.w.charkey==7572&&{backgroundColor:o.percentageToColor(this.userStore.workerStatsForDisplay(r.w).luck,this.userStore.workersMinMaxStats.luck.lo,this.userStore.workersMinMaxStats.luck.hi,.2)})},L(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).luck,2)),5),w("td",null,[w("button",{onClick:t[1]||(t[1]=a=>e.$emit("edit"))},"edit")]),w("td",null,[r.w.job?(D(),$(W,{key:0},[typeof r.w.job=="number"?(D(),$("span",{key:0,onClick:t[2]||(t[2]=a=>e.$emit("pan",this.gameStore.nodes[r.w.job].pos)),class:"clickable"},L(n.gameStore.workerJobDescription(r.w)),1)):(D(),$(W,{key:1},[U(L(n.gameStore.workerJobDescription(r.w)),1)],64)),kY,n.userStore.displayProfitPerCp?(D(),$(W,{key:2},[U(L(o.formatFixed(n.userStore.workerIncomePerCp(r.w),2))+" M$/day/CP ",1)],64)):(D(),$(W,{key:3},[U(L(o.formatFixed(n.userStore.workerIncome(r.w),2))+" M$/day ",1)],64))],64)):(D(),$(W,{key:1},[xY],64))]),w("td",null,[r.w.job?(D(),$("button",{key:0,onClick:t[3]||(t[3]=a=>r.w.job=null)},"stop")):(D(),$("button",{key:1,onClick:t[4]||(t[4]=a=>e.$emit("send"))},"send"))])])}const L7=$e(MY,[["render",LY],["__scopeId","data-v-c2fd2972"]]);const IY={setup(){const e=xt(),t=re();return{gameStore:e,userStore:t}},props:{o:Object,tk:String},emits:["selectLodging","selectHouses","hireWorker","editWorker","sendWorker","panToPaPos"],components:{Worker:L7},data:()=>({}),methods:{formatFixed:Bt,fireWorker(e){this.userStore.userWorkers=this.userStore.userWorkers.filter(t=>t!=e)}}},mP=e=>(cn("data-v-bf156dd7"),e=e(),fn(),e),OY={colspan:"2"},RY=U(" worker "),DY=mP(()=>w("td",null,"\u{1F528}",-1)),NY=mP(()=>w("td",null,"\u{1F9B6}",-1)),FY=mP(()=>w("td",null,"\u{1F340}",-1)),BY=U(" \xA0 "),$Y={colspan:"8"},zY=U(" empty slot ");function VY(e,t,r,n,i,o){const a=pe("Worker");return D(),$(W,null,[w("tr",null,[w("td",OY,[RY,n.userStore.prerelease_housesconfig?(D(),$("button",{key:0,onClick:t[0]||(t[0]=s=>this.$emit("hireWorker",r.tk))}," hire ")):pt("",!0)]),DY,NY,FY,w("td",{colspan:"3",class:Sn({unresolved:n.gameStore.ready&&n.userStore.townsInfra[r.tk].success==!1})},[w("span",{onClick:t[1]||(t[1]=s=>e.$emit("panToPaPos",this.gameStore.nodes[this.gameStore.tk2tnk(r.tk)].pos)),class:"bold clickable"},L(n.gameStore.uloc.town[r.tk]),1),U(" "+L()+" ",1),n.userStore.displayProfitPerCp?(D(),$(W,{key:0},[U(L(o.formatFixed(n.userStore.townsTotalIncome[r.tk]&&n.userStore.townsTotalIncome[r.tk].eff,2))+" M$/day/CP ",1)],64)):(D(),$(W,{key:1},[U(L(o.formatFixed(n.userStore.townsTotalIncome[r.tk]&&n.userStore.townsTotalIncome[r.tk].income,1))+" M$/day ",1)],64)),BY,n.userStore.prerelease_housesconfig?(D(),$(W,{key:2},[U(L(n.userStore.townWorkingWorkers(r.tk).length)+" \u{1F6CF}\uFE0F ",1),w("span",null,L(n.userStore.townsStoreItemkeys[r.tk]&&n.userStore.townsStoreItemkeys[r.tk].size),1),U(" \u{1F4E6} "+L(n.gameStore.ready&&n.userStore.townsInfra[r.tk].cost)+" CP ",1),w("button",{onClick:t[2]||(t[2]=s=>this.$emit("selectHouses",r.tk))}," config ")],64)):(D(),$(W,{key:3},[U(L(n.userStore.haveLodging.slots.perTown[r.tk])+" \u{1F6CF}\uFE0F / "+L(n.userStore.haveLodging.cp.perTown[r.tk])+" CP ",1),w("button",{onClick:t[3]||(t[3]=s=>this.$emit("selectLodging",r.tk))}," lodging ")],64))],2)]),(D(!0),$(W,null,Nt(n.userStore.userWorkers.filter(s=>n.gameStore.tnk2tk(s.tnk)==r.tk),(s,l)=>(D(),bs(a,{w:s,homeless:!0,class:Sn({homeless:!n.userStore.prerelease_housesconfig&&l>n.userStore.haveLodging.slots.perTown[r.tk]-1}),onFire:u=>o.fireWorker(s),onEdit:u=>this.$emit("editWorker",s),onSend:u=>this.$emit("sendWorker",s),onPan:t[4]||(t[4]=u=>this.$emit("panToPaPos",u))},null,8,["w","class","onFire","onEdit","onSend"]))),256)),n.userStore.prerelease_housesconfig?pt("",!0):(D(),$(W,{key:0},[n.userStore.townFreeLodgingCount(r.tk)>0?(D(!0),$(W,{key:0},Nt(n.userStore.townFreeLodgingCount(r.tk),s=>(D(),$("tr",null,[w("td",$Y,[zY,n.userStore.townFreeLodgingCount(r.tk)>0?(D(),$("button",{key:0,onClick:t[5]||(t[5]=l=>this.$emit("hireWorker",r.tk))}," hire ")):pt("",!0)])]))),256)):pt("",!0)],64))],64)}const UY=$e(IY,[["render",VY],["__scopeId","data-v-bf156dd7"]]);const GY={setup(){const e=xt(),t=re();return{gameStore:e,userStore:t}},props:{pzk:Number},emits:["showModifierDialog","editWorker"],components:{},data:()=>({}),methods:{formatFixed:Bt,makeIconSrc:Mo},computed:{freeWorkers(){return this.gameStore.plantzoneNearestTownsFreeWorkersProfits(this.pzk,99).filter((r,n,i)=>n===i.findIndex(o=>o.tnk===r.tnk&&JSON.stringify(o.statsOnPz)===JSON.stringify(r.statsOnPz)))}}},P0=e=>(cn("data-v-309779cd"),e=e(),fn(),e),jY={key:0},WY=["src"],HY=U(" workload: "),XY={id:"plantzoneWorkerInfo"},YY=P0(()=>w("br",null,null,-1)),qY=P0(()=>w("abbr",{title:"\u03A3 of connection nodes costs shared between all active jobs using them + full cost of this node"},"\u2139\uFE0F",-1)),ZY=P0(()=>w("br",null,null,-1)),KY=["title"],JY=P0(()=>w("br",null,null,-1)),QY=["title"],tq=U(" worker: none "),eq=U(" Nearest towns with idle workers: "),rq={key:0},nq=P0(()=>w("tr",null,[w("th",null,"town"),w("th",null,"walk"),w("th",null,[U("worker "),w("abbr",{title:"same town&stat workers are hidden in this view"},"\u2139\uFE0F")]),w("th",null,"+M$/day"),w("th",null,"+CP"),w("th",null,"+efficiency"),w("th",null,"action")],-1)),iq={key:0},oq={class:"fsxs"},aq=["title"],sq=U("+"),lq=["title"],uq=["onClick","disabled"],cq=U(" None ");function fq(e,t,r,n,i,o){const a=pe("RouterLink");return D(),$(W,null,[w("div",null,[kt(a,{tag:"a",to:{path:"./plantzones",hash:"#drops"+r.pzk}},{default:Le(()=>[U(L(n.gameStore.plantzoneName(r.pzk)),1)]),_:1},8,["to"]),U(" "+L(this.gameStore.nodes[r.pzk].CP)+"CP ",1),r.pzk in this.gameStore.plantzones?(D(),$("span",jY,[(D(!0),$(W,null,Nt(this.gameStore.plantzones[r.pzk].unlucky,(s,l)=>(D(),bs(a,{tag:"a",to:{path:"./settings",hash:"#item"+l}},{default:Le(()=>[w("img",{src:o.makeIconSrc(l),class:"iconitem"},null,8,WY)]),_:2},1032,["to"]))),256)),U(" [\u{1F340}"+L(o.formatFixed(this.gameStore.plantzones[r.pzk].lucky?this.gameStore.plantzones[r.pzk].luckyValue/this.gameStore.plantzones[r.pzk].unluckyValue:1,2))+"x] ",1)])):pt("",!0)]),w("div",null,[HY,n.gameStore.ready&&n.gameStore.plantzones[r.pzk].regiongroup&&n.userStore.allowFloating&&n.userStore.useFloatingModifiers[n.gameStore.plantzones[r.pzk].regiongroup]?(D(),$(W,{key:0},[U(" ~"+L(o.formatFixed(n.userStore.medianWorkloads[r.pzk],2))+" ",1),w("button",{onClick:t[0]||(t[0]=s=>e.$emit("showModifierDialog",r.pzk))},"review")],64)):(D(),$(W,{key:1},[U(L(o.formatFixed(n.gameStore.plantzones[r.pzk].activeWorkload,2))+" \u2190 modifier ",1),Tt(w("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=s=>n.userStore.regionModifiers[n.gameStore.plantzones[r.pzk].regiongroup]=s),min:"0",max:"100",step:"1",class:"w42em"},null,512),[[le,n.userStore.regionModifiers[n.gameStore.plantzones[r.pzk].regiongroup],void 0,{number:!0}]])],64))]),w("div",XY,[n.userStore.workedPlantzones.has(r.pzk.toString())?(D(),$(W,{key:0},[U(" worker: "+L(n.userStore.pzJobs[r.pzk].worker.label)+" @ "+L(o.formatFixed(n.userStore.pzJobs[r.pzk].profit.priceDaily,3))+" M$/day ",1),n.userStore.workedPlantzones.has(r.pzk.toString())?(D(),$(W,{key:0},[w("button",{onClick:t[2]||(t[2]=s=>e.$emit("editWorker",n.userStore.pzJobs[r.pzk].worker))}," edit "),w("button",{onClick:t[3]||(t[3]=s=>n.userStore.pzJobs[r.pzk].worker.job=null)}," stop ")],64)):pt("",!0),YY,U(" connection cost: "+L(o.formatFixed(n.userStore.pzjobsSharedCP[r.pzk],3))+" CP ",1),qY,ZY,U(" "+L(n.userStore.prerelease_housesconfig?"lodgage":"lodging")+" cost: "+L(o.formatFixed(n.userStore.workerSharedLodgingCp(n.userStore.pzJobs[r.pzk].worker),3))+" CP ",1),w("abbr",{title:n.userStore.prerelease_housesconfig?"total lodgage costs of hometown shared between all active jobs from that town":"total lodging costs of hometown shared between all active jobs from that town"},"\u2139\uFE0F",8,KY),JY,U(" efficiency: "+L(o.formatFixed(n.userStore.workerIncomePerCp(n.userStore.pzJobs[r.pzk].worker),3))+" M$/day/CP ",1),w("abbr",{title:n.userStore.prerelease_housesconfig?"income / (connectionCost + lodgageCost)":"income / (connectionCost + lodgingCost)"},"\u2139\uFE0F",8,QY)],64)):(D(),$(W,{key:1},[tq],64))]),w("div",null,[eq,o.freeWorkers.length?(D(),$("table",rq,[nq,(D(!0),$(W,null,Nt(o.freeWorkers,s=>(D(),$(W,null,[s.profit.dist<1e6?(D(),$("tr",iq,[w("td",null,L(n.gameStore.nodeName(s.tnk)),1),w("td",null,L(o.formatFixed(s.profit.dist)),1),w("td",null,[U(L(s.w.label)+" ",1),w("span",oq,L(o.formatFixed(s.statsOnPz.wspd,2))+"\u{1F528} "+L(o.formatFixed(s.statsOnPz.mspd,2))+"\u{1F9B6} "+L(o.formatFixed(s.statsOnPz.luck,2))+"\u{1F340} ",1)]),w("td",null,L(o.formatFixed(s.profit.priceDaily,2)),1),w("td",null,[w("abbr",{title:"via "+Array.from(s.path,l=>n.gameStore.uloc.node[l]).join(`
`)},L(s.mapCp),9,aq),sq,w("abbr",{title:s.infraTooltip},L(s.townCp),9,lq),U("="+L(s.cp),1)]),w("td",null,L(o.formatFixed(s.dailyPerCp,3,!0)),1),w("td",null,[w("button",{onClick:l=>n.userStore.assignWorker(s.w,s.pz.key),disabled:n.userStore.workedPlantzones.has(r.pzk.toString())}," assign ",8,uq)])])):pt("",!0)],64))),256))])):(D(),$(W,{key:1},[cq],64))])],64)}const hq=$e(GY,[["render",fq],["__scopeId","data-v-309779cd"]]);const dq={name:"modalDialog",props:{show:{type:Boolean,default:!1}},methods:{}};function pq(e,t,r,n,i,o){return Tt((D(),$("div",{onClick:t[1]||(t[1]=pm(a=>this.$emit("update:show",!1),["stop"])),class:"dialog"},[w("div",{onClick:t[0]||(t[0]=pm(()=>{},["stop"])),class:"dialog_content"},[MW(e.$slots,"default",{},void 0,!0)])],512)),[[CH,r.show]])}const yP=$e(dq,[["render",pq],["__scopeId","data-v-dea74574"]]);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var dS=function(e,t){return dS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},dS(e,t)};function mt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");dS(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var vq=function(){function e(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return e}(),gq=function(){function e(){this.browser=new vq,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return e}(),yl=new gq;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(yl.wxa=!0,yl.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?yl.worker=!0:typeof navigator>"u"?(yl.node=!0,yl.svgSupported=!0):mq(navigator.userAgent,yl);function mq(e,t){var r=t.browser,n=e.match(/Firefox\/([\d.]+)/),i=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/),o=e.match(/Edge?\/([\d.]+)/),a=/micromessenger/i.test(e);n&&(r.firefox=!0,r.version=n[1]),i&&(r.ie=!0,r.version=i[1]),o&&(r.edge=!0,r.version=o[1],r.newEdge=+o[1].split(".")[0]>18),a&&(r.weChat=!0),t.svgSupported=typeof SVGRect<"u",t.touchEventsSupported="ontouchstart"in window&&!r.ie&&!r.edge,t.pointerEventsSupported="onpointerdown"in window&&(r.edge||r.ie&&+r.version>=11),t.domSupported=typeof document<"u";var s=document.documentElement.style;t.transform3dSupported=(r.ie&&"transition"in s||r.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in s)&&!("OTransition"in s),t.transformSupported=t.transform3dSupported||r.ie&&+r.version>=9}const Xt=yl;var _P=12,yq="sans-serif",Wl=_P+"px "+yq,_q=20,bq=100,wq="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function Sq(e){var t={};if(typeof JSON>"u")return t;for(var r=0;r<e.length;r++){var n=String.fromCharCode(r+32),i=(e.charCodeAt(r)-_q)/bq;t[n]=i}return t}var Tq=Sq(wq),ou={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var e,t;return function(r,n){if(!e){var i=ou.createCanvas();e=i&&i.getContext("2d")}if(e)return t!==n&&(t=e.font=n||Wl),e.measureText(r);r=r||"",n=n||Wl;var o=/^([0-9]*?)px$/.exec(n),a=+(o&&o[1])||_P,s=0;if(n.indexOf("mono")>=0)s=a*r.length;else for(var l=0;l<r.length;l++){var u=Tq[r[l]];s+=u==null?a:u*a}return{width:s}}}(),loadImage:function(e,t,r){var n=new Image;return n.onload=t,n.onerror=r,n.src=e,n}},I7=au(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(e,t){return e["[object "+t+"]"]=!0,e},{}),O7=au(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(e,t){return e["[object "+t+"Array]"]=!0,e},{}),af=Object.prototype.toString,D1=Array.prototype,Pq=D1.forEach,Eq=D1.filter,bP=D1.slice,Aq=D1.map,IM=function(){}.constructor,gp=IM?IM.prototype:null,wP="__proto__",Cq=2311;function R7(){return Cq++}function SP(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];typeof console<"u"&&console.error.apply(console,e)}function zt(e){if(e==null||typeof e!="object")return e;var t=e,r=af.call(e);if(r==="[object Array]"){if(!hd(e)){t=[];for(var n=0,i=e.length;n<i;n++)t[n]=zt(e[n])}}else if(O7[r]){if(!hd(e)){var o=e.constructor;if(o.from)t=o.from(e);else{t=new o(e.length);for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}}}else if(!I7[r]&&!hd(e)&&!mm(e)){t={};for(var a in e)e.hasOwnProperty(a)&&a!==wP&&(t[a]=zt(e[a]))}return t}function oe(e,t,r){if(!It(t)||!It(e))return r?zt(t):e;for(var n in t)if(t.hasOwnProperty(n)&&n!==wP){var i=e[n],o=t[n];It(o)&&It(i)&&!ut(o)&&!ut(i)&&!mm(o)&&!mm(i)&&!OM(o)&&!OM(i)&&!hd(o)&&!hd(i)?oe(i,o,r):(r||!(n in e))&&(e[n]=zt(t[n]))}return e}function Mq(e,t){for(var r=e[0],n=1,i=e.length;n<i;n++)r=oe(r,e[n],t);return r}function ot(e,t){if(Object.assign)Object.assign(e,t);else for(var r in t)t.hasOwnProperty(r)&&r!==wP&&(e[r]=t[r]);return e}function te(e,t,r){for(var n=ve(t),i=0;i<n.length;i++){var o=n[i];(r?t[o]!=null:e[o]==null)&&(e[o]=t[o])}return e}ou.createCanvas;function ce(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r}return-1}function kq(e,t){var r=e.prototype;function n(){}n.prototype=t.prototype,e.prototype=new n;for(var i in r)r.hasOwnProperty(i)&&(e.prototype[i]=r[i]);e.prototype.constructor=e,e.superClass=t}function Ri(e,t,r){if(e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames)for(var n=Object.getOwnPropertyNames(t),i=0;i<n.length;i++){var o=n[i];o!=="constructor"&&(r?t[o]!=null:e[o]==null)&&(e[o]=t[o])}else te(e,t,r)}function Fr(e){return!e||typeof e=="string"?!1:typeof e.length=="number"}function N(e,t,r){if(!!(e&&t))if(e.forEach&&e.forEach===Pq)e.forEach(t,r);else if(e.length===+e.length)for(var n=0,i=e.length;n<i;n++)t.call(r,e[n],n,e);else for(var o in e)e.hasOwnProperty(o)&&t.call(r,e[o],o,e)}function Ct(e,t,r){if(!e)return[];if(!t)return TP(e);if(e.map&&e.map===Aq)return e.map(t,r);for(var n=[],i=0,o=e.length;i<o;i++)n.push(t.call(r,e[i],i,e));return n}function au(e,t,r,n){if(!!(e&&t)){for(var i=0,o=e.length;i<o;i++)r=t.call(n,r,e[i],i,e);return r}}function yr(e,t,r){if(!e)return[];if(!t)return TP(e);if(e.filter&&e.filter===Eq)return e.filter(t,r);for(var n=[],i=0,o=e.length;i<o;i++)t.call(r,e[i],i,e)&&n.push(e[i]);return n}function ve(e){if(!e)return[];if(Object.keys)return Object.keys(e);var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}function xq(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return function(){return e.apply(t,r.concat(bP.call(arguments)))}}var Vt=gp&&Ut(gp.bind)?gp.call.bind(gp.bind):xq;function _e(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(){return e.apply(this,t.concat(bP.call(arguments)))}}function ut(e){return Array.isArray?Array.isArray(e):af.call(e)==="[object Array]"}function Ut(e){return typeof e=="function"}function Et(e){return typeof e=="string"}function pS(e){return af.call(e)==="[object String]"}function be(e){return typeof e=="number"}function It(e){var t=typeof e;return t==="function"||!!e&&t==="object"}function OM(e){return!!I7[af.call(e)]}function An(e){return!!O7[af.call(e)]}function mm(e){return typeof e=="object"&&typeof e.nodeType=="number"&&typeof e.ownerDocument=="object"}function N1(e){return e.colorStops!=null}function Lq(e){return e.image!=null}function Iq(e){return af.call(e)==="[object RegExp]"}function ym(e){return e!==e}function yi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0,n=e.length;r<n;r++)if(e[r]!=null)return e[r]}function qt(e,t){return e!=null?e:t}function fd(e,t,r){return e!=null?e:t!=null?t:r}function TP(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return bP.apply(e,t)}function D7(e){if(typeof e=="number")return[e,e,e,e];var t=e.length;return t===2?[e[0],e[1],e[0],e[1]]:t===3?[e[0],e[1],e[2],e[1]]:e}function xi(e,t){if(!e)throw new Error(t)}function po(e){return e==null?null:typeof e.trim=="function"?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var N7="__ec_primitive__";function _m(e){e[N7]=!0}function hd(e){return e[N7]}var Oq=function(){function e(t){this.data={};var r=ut(t);this.data={};var n=this;t instanceof e?t.each(i):t&&N(t,i);function i(o,a){r?n.set(o,a):n.set(a,o)}}return e.prototype.get=function(t){return this.data.hasOwnProperty(t)?this.data[t]:null},e.prototype.set=function(t,r){return this.data[t]=r},e.prototype.each=function(t,r){for(var n in this.data)this.data.hasOwnProperty(n)&&t.call(r,this.data[n],n)},e.prototype.keys=function(){return ve(this.data)},e.prototype.removeKey=function(t){delete this.data[t]},e}();function jt(e){return new Oq(e)}function F7(e,t){for(var r=new e.constructor(e.length+t.length),n=0;n<e.length;n++)r[n]=e[n];for(var i=e.length,n=0;n<t.length;n++)r[n+i]=t[n];return r}function F1(e,t){var r;if(Object.create)r=Object.create(e);else{var n=function(){};n.prototype=e,r=new n}return t&&ot(r,t),r}function B7(e){var t=e.style;t.webkitUserSelect="none",t.userSelect="none",t.webkitTapHighlightColor="rgba(0,0,0,0)",t["-webkit-touch-callout"]="none"}function ft(e,t){return e.hasOwnProperty(t)}function Dr(){}var Rq=180/Math.PI;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var vS=function(e,t){return vS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},vS(e,t)};function Ee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");vS(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function sf(e,t){return e==null&&(e=0),t==null&&(t=0),[e,t]}function Dq(e,t){return e[0]=t[0],e[1]=t[1],e}function Nq(e){return[e[0],e[1]]}function RM(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function $7(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function Fq(e){return Math.sqrt(Bq(e))}function Bq(e){return e[0]*e[0]+e[1]*e[1]}function d_(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function PP(e,t){var r=Fq(t);return r===0?(e[0]=0,e[1]=0):(e[0]=t[0]/r,e[1]=t[1]/r),e}function gS(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var $q=gS;function zq(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}var Ec=zq;function Xr(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i+r[4],e[1]=r[1]*n+r[3]*i+r[5],e}function hc(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function dc(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}var Cu=function(){function e(t,r){this.target=t,this.topTarget=r&&r.topTarget}return e}(),Vq=function(){function e(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return e.prototype._dragStart=function(t){for(var r=t.target;r&&!r.draggable;)r=r.parent||r.__hostTarget;r&&(this._draggingTarget=r,r.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new Cu(r,t),"dragstart",t.event))},e.prototype._drag=function(t){var r=this._draggingTarget;if(r){var n=t.offsetX,i=t.offsetY,o=n-this._x,a=i-this._y;this._x=n,this._y=i,r.drift(o,a,t),this.handler.dispatchToElement(new Cu(r,t),"drag",t.event);var s=this.handler.findHover(n,i,r).target,l=this._dropTarget;this._dropTarget=s,r!==s&&(l&&s!==l&&this.handler.dispatchToElement(new Cu(l,t),"dragleave",t.event),s&&s!==l&&this.handler.dispatchToElement(new Cu(s,t),"dragenter",t.event))}},e.prototype._dragEnd=function(t){var r=this._draggingTarget;r&&(r.dragging=!1),this.handler.dispatchToElement(new Cu(r,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new Cu(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},e}();const Uq=Vq;var Gq=function(){function e(t){t&&(this._$eventProcessor=t)}return e.prototype.on=function(t,r,n,i){this._$handlers||(this._$handlers={});var o=this._$handlers;if(typeof r=="function"&&(i=n,n=r,r=null),!n||!t)return this;var a=this._$eventProcessor;r!=null&&a&&a.normalizeQuery&&(r=a.normalizeQuery(r)),o[t]||(o[t]=[]);for(var s=0;s<o[t].length;s++)if(o[t][s].h===n)return this;var l={h:n,query:r,ctx:i||this,callAtLast:n.zrEventfulCallAtLast},u=o[t].length-1,c=o[t][u];return c&&c.callAtLast?o[t].splice(u,0,l):o[t].push(l),this},e.prototype.isSilent=function(t){var r=this._$handlers;return!r||!r[t]||!r[t].length},e.prototype.off=function(t,r){var n=this._$handlers;if(!n)return this;if(!t)return this._$handlers={},this;if(r){if(n[t]){for(var i=[],o=0,a=n[t].length;o<a;o++)n[t][o].h!==r&&i.push(n[t][o]);n[t]=i}n[t]&&n[t].length===0&&delete n[t]}else delete n[t];return this},e.prototype.trigger=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[t],o=this._$eventProcessor;if(i)for(var a=r.length,s=i.length,l=0;l<s;l++){var u=i[l];if(!(o&&o.filter&&u.query!=null&&!o.filter(t,u.query)))switch(a){case 0:u.h.call(u.ctx);break;case 1:u.h.call(u.ctx,r[0]);break;case 2:u.h.call(u.ctx,r[0],r[1]);break;default:u.h.apply(u.ctx,r);break}}return o&&o.afterTrigger&&o.afterTrigger(t),this},e.prototype.triggerWithContext=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[t],o=this._$eventProcessor;if(i)for(var a=r.length,s=r[a-1],l=i.length,u=0;u<l;u++){var c=i[u];if(!(o&&o.filter&&c.query!=null&&!o.filter(t,c.query)))switch(a){case 0:c.h.call(s);break;case 1:c.h.call(s,r[0]);break;case 2:c.h.call(s,r[0],r[1]);break;default:c.h.apply(s,r.slice(1,a-1));break}}return o&&o.afterTrigger&&o.afterTrigger(t),this},e}();const Di=Gq;var jq=Math.log(2);function mS(e,t,r,n,i,o){var a=n+"-"+i,s=e.length;if(o.hasOwnProperty(a))return o[a];if(t===1){var l=Math.round(Math.log((1<<s)-1&~i)/jq);return e[r][l]}for(var u=n|1<<r,c=r+1;n&1<<c;)c++;for(var f=0,h=0,d=0;h<s;h++){var p=1<<h;p&i||(f+=(d%2?-1:1)*e[r][h]*mS(e,t-1,c,u,i|p,o),d++)}return o[a]=f,f}function DM(e,t){var r=[[e[0],e[1],1,0,0,0,-t[0]*e[0],-t[0]*e[1]],[0,0,0,e[0],e[1],1,-t[1]*e[0],-t[1]*e[1]],[e[2],e[3],1,0,0,0,-t[2]*e[2],-t[2]*e[3]],[0,0,0,e[2],e[3],1,-t[3]*e[2],-t[3]*e[3]],[e[4],e[5],1,0,0,0,-t[4]*e[4],-t[4]*e[5]],[0,0,0,e[4],e[5],1,-t[5]*e[4],-t[5]*e[5]],[e[6],e[7],1,0,0,0,-t[6]*e[6],-t[6]*e[7]],[0,0,0,e[6],e[7],1,-t[7]*e[6],-t[7]*e[7]]],n={},i=mS(r,8,0,0,0,n);if(i!==0){for(var o=[],a=0;a<8;a++)for(var s=0;s<8;s++)o[s]==null&&(o[s]=0),o[s]+=((a+s)%2?-1:1)*mS(r,7,a===0?1:0,1<<a,1<<s,n)/i*t[a];return function(l,u,c){var f=u*o[6]+c*o[7]+1;l[0]=(u*o[0]+c*o[1]+o[2])/f,l[1]=(u*o[3]+c*o[4]+o[5])/f}}}var NM="___zrEVENTSAVED",p_=[];function Wq(e,t,r,n,i){return yS(p_,t,n,i,!0)&&yS(e,r,p_[0],p_[1])}function yS(e,t,r,n,i){if(t.getBoundingClientRect&&Xt.domSupported&&!z7(t)){var o=t[NM]||(t[NM]={}),a=Hq(t,o),s=Xq(a,o,i);if(s)return s(e,r,n),!0}return!1}function Hq(e,t){var r=t.markers;if(r)return r;r=t.markers=[];for(var n=["left","right"],i=["top","bottom"],o=0;o<4;o++){var a=document.createElement("div"),s=a.style,l=o%2,u=(o>>1)%2;s.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",n[l]+":0",i[u]+":0",n[1-l]+":auto",i[1-u]+":auto",""].join("!important;"),e.appendChild(a),r.push(a)}return r}function Xq(e,t,r){for(var n=r?"invTrans":"trans",i=t[n],o=t.srcCoords,a=[],s=[],l=!0,u=0;u<4;u++){var c=e[u].getBoundingClientRect(),f=2*u,h=c.left,d=c.top;a.push(h,d),l=l&&o&&h===o[f]&&d===o[f+1],s.push(e[u].offsetLeft,e[u].offsetTop)}return l&&i?i:(t.srcCoords=a,t[n]=r?DM(s,a):DM(a,s))}function z7(e){return e.nodeName.toUpperCase()==="CANVAS"}var Yq=/([&<>"'])/g,qq={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Gn(e){return e==null?"":(e+"").replace(Yq,function(t,r){return qq[r]})}var Zq=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,v_=[],Kq=Xt.browser.firefox&&+Xt.browser.version.split(".")[0]<39;function _S(e,t,r,n){return r=r||{},n?FM(e,t,r):Kq&&t.layerX!=null&&t.layerX!==t.offsetX?(r.zrX=t.layerX,r.zrY=t.layerY):t.offsetX!=null?(r.zrX=t.offsetX,r.zrY=t.offsetY):FM(e,t,r),r}function FM(e,t,r){if(Xt.domSupported&&e.getBoundingClientRect){var n=t.clientX,i=t.clientY;if(z7(e)){var o=e.getBoundingClientRect();r.zrX=n-o.left,r.zrY=i-o.top;return}else if(yS(v_,e,n,i)){r.zrX=v_[0],r.zrY=v_[1];return}}r.zrX=r.zrY=0}function EP(e){return e||window.event}function $n(e,t,r){if(t=EP(t),t.zrX!=null)return t;var n=t.type,i=n&&n.indexOf("touch")>=0;if(i){var a=n!=="touchend"?t.targetTouches[0]:t.changedTouches[0];a&&_S(e,a,t,r)}else{_S(e,t,t,r);var o=Jq(t);t.zrDelta=o?o/120:-(t.detail||0)/3}var s=t.button;return t.which==null&&s!==void 0&&Zq.test(t.type)&&(t.which=s&1?1:s&2?3:s&4?2:0),t}function Jq(e){var t=e.wheelDelta;if(t)return t;var r=e.deltaX,n=e.deltaY;if(r==null||n==null)return t;var i=Math.abs(n!==0?n:r),o=n>0?-1:n<0?1:r>0?-1:1;return 3*i*o}function Qq(e,t,r,n){e.addEventListener(t,r,n)}function tZ(e,t,r,n){e.removeEventListener(t,r,n)}var Hl=function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0};function BM(e){return e.which===2||e.which===3}var eZ=function(){function e(){this._track=[]}return e.prototype.recognize=function(t,r,n){return this._doTrack(t,r,n),this._recognize(t)},e.prototype.clear=function(){return this._track.length=0,this},e.prototype._doTrack=function(t,r,n){var i=t.touches;if(!!i){for(var o={points:[],touches:[],target:r,event:t},a=0,s=i.length;a<s;a++){var l=i[a],u=_S(n,l,{});o.points.push([u.zrX,u.zrY]),o.touches.push(l)}this._track.push(o)}},e.prototype._recognize=function(t){for(var r in g_)if(g_.hasOwnProperty(r)){var n=g_[r](this._track,t);if(n)return n}},e}();function $M(e){var t=e[1][0]-e[0][0],r=e[1][1]-e[0][1];return Math.sqrt(t*t+r*r)}function rZ(e){return[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]}var g_={pinch:function(e,t){var r=e.length;if(!!r){var n=(e[r-1]||{}).points,i=(e[r-2]||{}).points||n;if(i&&i.length>1&&n&&n.length>1){var o=$M(n)/$M(i);!isFinite(o)&&(o=1),t.pinchScale=o;var a=rZ(n);return t.pinchX=a[0],t.pinchY=a[1],{type:"pinch",target:e[0].target,event:t}}}}};function Uc(){return[1,0,0,1,0,0]}function AP(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function V7(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Ac(e,t,r){var n=t[0]*r[0]+t[2]*r[1],i=t[1]*r[0]+t[3]*r[1],o=t[0]*r[2]+t[2]*r[3],a=t[1]*r[2]+t[3]*r[3],s=t[0]*r[4]+t[2]*r[5]+t[4],l=t[1]*r[4]+t[3]*r[5]+t[5];return e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e}function bS(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+r[0],e[5]=t[5]+r[1],e}function CP(e,t,r){var n=t[0],i=t[2],o=t[4],a=t[1],s=t[3],l=t[5],u=Math.sin(r),c=Math.cos(r);return e[0]=n*c+a*u,e[1]=-n*u+a*c,e[2]=i*c+s*u,e[3]=-i*u+c*s,e[4]=c*o+u*l,e[5]=c*l-u*o,e}function nZ(e,t,r){var n=r[0],i=r[1];return e[0]=t[0]*n,e[1]=t[1]*i,e[2]=t[2]*n,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*i,e}function B1(e,t){var r=t[0],n=t[2],i=t[4],o=t[1],a=t[3],s=t[5],l=r*a-o*n;return l?(l=1/l,e[0]=a*l,e[1]=-o*l,e[2]=-n*l,e[3]=r*l,e[4]=(n*s-a*i)*l,e[5]=(o*i-r*s)*l,e):null}var iZ=function(){function e(t,r){this.x=t||0,this.y=r||0}return e.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.set=function(t,r){return this.x=t,this.y=r,this},e.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},e.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},e.prototype.scale=function(t){this.x*=t,this.y*=t},e.prototype.scaleAndAdd=function(t,r){this.x+=t.x*r,this.y+=t.y*r},e.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},e.prototype.dot=function(t){return this.x*t.x+this.y*t.y},e.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},e.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},e.prototype.distance=function(t){var r=this.x-t.x,n=this.y-t.y;return Math.sqrt(r*r+n*n)},e.prototype.distanceSquare=function(t){var r=this.x-t.x,n=this.y-t.y;return r*r+n*n},e.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},e.prototype.transform=function(t){if(!!t){var r=this.x,n=this.y;return this.x=t[0]*r+t[2]*n+t[4],this.y=t[1]*r+t[3]*n+t[5],this}},e.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},e.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},e.set=function(t,r,n){t.x=r,t.y=n},e.copy=function(t,r){t.x=r.x,t.y=r.y},e.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},e.lenSquare=function(t){return t.x*t.x+t.y*t.y},e.dot=function(t,r){return t.x*r.x+t.y*r.y},e.add=function(t,r,n){t.x=r.x+n.x,t.y=r.y+n.y},e.sub=function(t,r,n){t.x=r.x-n.x,t.y=r.y-n.y},e.scale=function(t,r,n){t.x=r.x*n,t.y=r.y*n},e.scaleAndAdd=function(t,r,n,i){t.x=r.x+n.x*i,t.y=r.y+n.y*i},e.lerp=function(t,r,n,i){var o=1-i;t.x=o*r.x+i*n.x,t.y=o*r.y+i*n.y},e}();const ke=iZ;var mp=Math.min,yp=Math.max,Us=new ke,Gs=new ke,js=new ke,Ws=new ke,Wf=new ke,Hf=new ke,oZ=function(){function e(t,r,n,i){n<0&&(t=t+n,n=-n),i<0&&(r=r+i,i=-i),this.x=t,this.y=r,this.width=n,this.height=i}return e.prototype.union=function(t){var r=mp(t.x,this.x),n=mp(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=yp(t.x+t.width,this.x+this.width)-r:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=yp(t.y+t.height,this.y+this.height)-n:this.height=t.height,this.x=r,this.y=n},e.prototype.applyTransform=function(t){e.applyTransform(this,this,t)},e.prototype.calculateTransform=function(t){var r=this,n=t.width/r.width,i=t.height/r.height,o=Uc();return bS(o,o,[-r.x,-r.y]),nZ(o,o,[n,i]),bS(o,o,[t.x,t.y]),o},e.prototype.intersect=function(t,r){if(!t)return!1;t instanceof e||(t=e.create(t));var n=this,i=n.x,o=n.x+n.width,a=n.y,s=n.y+n.height,l=t.x,u=t.x+t.width,c=t.y,f=t.y+t.height,h=!(o<l||u<i||s<c||f<a);if(r){var d=1/0,p=0,v=Math.abs(o-l),g=Math.abs(u-i),m=Math.abs(s-c),y=Math.abs(f-a),_=Math.min(v,g),b=Math.min(m,y);o<l||u<i?_>p&&(p=_,v<g?ke.set(Hf,-v,0):ke.set(Hf,g,0)):_<d&&(d=_,v<g?ke.set(Wf,v,0):ke.set(Wf,-g,0)),s<c||f<a?b>p&&(p=b,m<y?ke.set(Hf,0,-m):ke.set(Hf,0,y)):_<d&&(d=_,m<y?ke.set(Wf,0,m):ke.set(Wf,0,-y))}return r&&ke.copy(r,h?Wf:Hf),h},e.prototype.contain=function(t,r){var n=this;return t>=n.x&&t<=n.x+n.width&&r>=n.y&&r<=n.y+n.height},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copy=function(t){e.copy(this,t)},e.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},e.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},e.prototype.isZero=function(){return this.width===0||this.height===0},e.create=function(t){return new e(t.x,t.y,t.width,t.height)},e.copy=function(t,r){t.x=r.x,t.y=r.y,t.width=r.width,t.height=r.height},e.applyTransform=function(t,r,n){if(!n){t!==r&&e.copy(t,r);return}if(n[1]<1e-5&&n[1]>-1e-5&&n[2]<1e-5&&n[2]>-1e-5){var i=n[0],o=n[3],a=n[4],s=n[5];t.x=r.x*i+a,t.y=r.y*o+s,t.width=r.width*i,t.height=r.height*o,t.width<0&&(t.x+=t.width,t.width=-t.width),t.height<0&&(t.y+=t.height,t.height=-t.height);return}Us.x=js.x=r.x,Us.y=Ws.y=r.y,Gs.x=Ws.x=r.x+r.width,Gs.y=js.y=r.y+r.height,Us.transform(n),Ws.transform(n),Gs.transform(n),js.transform(n),t.x=mp(Us.x,Gs.x,js.x,Ws.x),t.y=mp(Us.y,Gs.y,js.y,Ws.y);var l=yp(Us.x,Gs.x,js.x,Ws.x),u=yp(Us.y,Gs.y,js.y,Ws.y);t.width=l-t.x,t.height=u-t.y},e}();const ae=oZ;var U7="silent";function aZ(e,t,r){return{type:e,event:r,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:r.zrX,offsetY:r.zrY,gestureEvent:r.gestureEvent,pinchX:r.pinchX,pinchY:r.pinchY,pinchScale:r.pinchScale,wheelDelta:r.zrDelta,zrByTouch:r.zrByTouch,which:r.which,stop:sZ}}function sZ(){Hl(this.event)}var lZ=function(e){Ee(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.handler=null,r}return t.prototype.dispose=function(){},t.prototype.setCursor=function(){},t}(Di),Xf=function(){function e(t,r){this.x=t,this.y=r}return e}(),uZ=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],m_=new ae(0,0,0,0),G7=function(e){Ee(t,e);function t(r,n,i,o,a){var s=e.call(this)||this;return s._hovered=new Xf(0,0),s.storage=r,s.painter=n,s.painterRoot=o,s._pointerSize=a,i=i||new lZ,s.proxy=null,s.setHandlerProxy(i),s._draggingMgr=new Uq(s),s}return t.prototype.setHandlerProxy=function(r){this.proxy&&this.proxy.dispose(),r&&(N(uZ,function(n){r.on&&r.on(n,this[n],this)},this),r.handler=this),this.proxy=r},t.prototype.mousemove=function(r){var n=r.zrX,i=r.zrY,o=j7(this,n,i),a=this._hovered,s=a.target;s&&!s.__zr&&(a=this.findHover(a.x,a.y),s=a.target);var l=this._hovered=o?new Xf(n,i):this.findHover(n,i),u=l.target,c=this.proxy;c.setCursor&&c.setCursor(u?u.cursor:"default"),s&&u!==s&&this.dispatchToElement(a,"mouseout",r),this.dispatchToElement(l,"mousemove",r),u&&u!==s&&this.dispatchToElement(l,"mouseover",r)},t.prototype.mouseout=function(r){var n=r.zrEventControl;n!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",r),n!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:r})},t.prototype.resize=function(){this._hovered=new Xf(0,0)},t.prototype.dispatch=function(r,n){var i=this[r];i&&i.call(this,n)},t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},t.prototype.setCursorStyle=function(r){var n=this.proxy;n.setCursor&&n.setCursor(r)},t.prototype.dispatchToElement=function(r,n,i){r=r||{};var o=r.target;if(!(o&&o.silent)){for(var a="on"+n,s=aZ(n,r,i);o&&(o[a]&&(s.cancelBubble=!!o[a].call(o,s)),o.trigger(n,s),o=o.__hostTarget?o.__hostTarget:o.parent,!s.cancelBubble););s.cancelBubble||(this.trigger(n,s),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[a]=="function"&&l[a].call(l,s),l.trigger&&l.trigger(n,s)}))}},t.prototype.findHover=function(r,n,i){var o=this.storage.getDisplayList(),a=new Xf(r,n);if(zM(o,a,r,n,i),this._pointerSize&&!a.target){for(var s=[],l=this._pointerSize,u=l/2,c=new ae(r-u,n-u,l,l),f=o.length-1;f>=0;f--){var h=o[f];h!==i&&!h.ignore&&!h.ignoreCoarsePointer&&(!h.parent||!h.parent.ignoreCoarsePointer)&&(m_.copy(h.getBoundingRect()),h.transform&&m_.applyTransform(h.transform),m_.intersect(c)&&s.push(h))}if(s.length)for(var d=4,p=Math.PI/12,v=Math.PI*2,g=0;g<u;g+=d)for(var m=0;m<v;m+=p){var y=r+g*Math.cos(m),_=n+g*Math.sin(m);if(zM(s,a,y,_,i),a.target)return a}}return a},t.prototype.processGesture=function(r,n){this._gestureMgr||(this._gestureMgr=new eZ);var i=this._gestureMgr;n==="start"&&i.clear();var o=i.recognize(r,this.findHover(r.zrX,r.zrY,null).target,this.proxy.dom);if(n==="end"&&i.clear(),o){var a=o.type;r.gestureEvent=a;var s=new Xf;s.target=o.target,this.dispatchToElement(s,a,o.event)}},t}(Di);N(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){G7.prototype[e]=function(t){var r=t.zrX,n=t.zrY,i=j7(this,r,n),o,a;if((e!=="mouseup"||!i)&&(o=this.findHover(r,n),a=o.target),e==="mousedown")this._downEl=a,this._downPoint=[t.zrX,t.zrY],this._upEl=a;else if(e==="mouseup")this._upEl=a;else if(e==="click"){if(this._downEl!==this._upEl||!this._downPoint||$q(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(o,e,t)}});function cZ(e,t,r){if(e[e.rectHover?"rectContain":"contain"](t,r)){for(var n=e,i=void 0,o=!1;n;){if(n.ignoreClip&&(o=!0),!o){var a=n.getClipPath();if(a&&!a.contain(t,r))return!1;n.silent&&(i=!0)}var s=n.__hostTarget;n=s||n.parent}return i?U7:!0}return!1}function zM(e,t,r,n,i){for(var o=e.length-1;o>=0;o--){var a=e[o],s=void 0;if(a!==i&&!a.ignore&&(s=cZ(a,r,n))&&(!t.topTarget&&(t.topTarget=a),s!==U7)){t.target=a;break}}}function j7(e,t,r){var n=e.painter;return t<0||t>n.getWidth()||r<0||r>n.getHeight()}const fZ=G7;var W7=32,Yf=7;function hZ(e){for(var t=0;e>=W7;)t|=e&1,e>>=1;return e+t}function VM(e,t,r,n){var i=t+1;if(i===r)return 1;if(n(e[i++],e[t])<0){for(;i<r&&n(e[i],e[i-1])<0;)i++;dZ(e,t,i)}else for(;i<r&&n(e[i],e[i-1])>=0;)i++;return i-t}function dZ(e,t,r){for(r--;t<r;){var n=e[t];e[t++]=e[r],e[r--]=n}}function UM(e,t,r,n,i){for(n===t&&n++;n<r;n++){for(var o=e[n],a=t,s=n,l;a<s;)l=a+s>>>1,i(o,e[l])<0?s=l:a=l+1;var u=n-a;switch(u){case 3:e[a+3]=e[a+2];case 2:e[a+2]=e[a+1];case 1:e[a+1]=e[a];break;default:for(;u>0;)e[a+u]=e[a+u-1],u--}e[a]=o}}function y_(e,t,r,n,i,o){var a=0,s=0,l=1;if(o(e,t[r+i])>0){for(s=n-i;l<s&&o(e,t[r+i+l])>0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),a+=i,l+=i}else{for(s=i+1;l<s&&o(e,t[r+i-l])<=0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var u=a;a=i-l,l=i-u}for(a++;a<l;){var c=a+(l-a>>>1);o(e,t[r+c])>0?a=c+1:l=c}return l}function __(e,t,r,n,i,o){var a=0,s=0,l=1;if(o(e,t[r+i])<0){for(s=i+1;l<s&&o(e,t[r+i-l])<0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var u=a;a=i-l,l=i-u}else{for(s=n-i;l<s&&o(e,t[r+i+l])>=0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),a+=i,l+=i}for(a++;a<l;){var c=a+(l-a>>>1);o(e,t[r+c])<0?l=c:a=c+1}return l}function pZ(e,t){var r=Yf,n,i,o=0;e.length;var a=[];n=[],i=[];function s(d,p){n[o]=d,i[o]=p,o+=1}function l(){for(;o>1;){var d=o-2;if(d>=1&&i[d-1]<=i[d]+i[d+1]||d>=2&&i[d-2]<=i[d]+i[d-1])i[d-1]<i[d+1]&&d--;else if(i[d]>i[d+1])break;c(d)}}function u(){for(;o>1;){var d=o-2;d>0&&i[d-1]<i[d+1]&&d--,c(d)}}function c(d){var p=n[d],v=i[d],g=n[d+1],m=i[d+1];i[d]=v+m,d===o-3&&(n[d+1]=n[d+2],i[d+1]=i[d+2]),o--;var y=__(e[g],e,p,v,0,t);p+=y,v-=y,v!==0&&(m=y_(e[p+v-1],e,g,m,m-1,t),m!==0&&(v<=m?f(p,v,g,m):h(p,v,g,m)))}function f(d,p,v,g){var m=0;for(m=0;m<p;m++)a[m]=e[d+m];var y=0,_=v,b=d;if(e[b++]=e[_++],--g===0){for(m=0;m<p;m++)e[b+m]=a[y+m];return}if(p===1){for(m=0;m<g;m++)e[b+m]=e[_+m];e[b+g]=a[y];return}for(var T=r,S,P,C;;){S=0,P=0,C=!1;do if(t(e[_],a[y])<0){if(e[b++]=e[_++],P++,S=0,--g===0){C=!0;break}}else if(e[b++]=a[y++],S++,P=0,--p===1){C=!0;break}while((S|P)<T);if(C)break;do{if(S=__(e[_],a,y,p,0,t),S!==0){for(m=0;m<S;m++)e[b+m]=a[y+m];if(b+=S,y+=S,p-=S,p<=1){C=!0;break}}if(e[b++]=e[_++],--g===0){C=!0;break}if(P=y_(a[y],e,_,g,0,t),P!==0){for(m=0;m<P;m++)e[b+m]=e[_+m];if(b+=P,_+=P,g-=P,g===0){C=!0;break}}if(e[b++]=a[y++],--p===1){C=!0;break}T--}while(S>=Yf||P>=Yf);if(C)break;T<0&&(T=0),T+=2}if(r=T,r<1&&(r=1),p===1){for(m=0;m<g;m++)e[b+m]=e[_+m];e[b+g]=a[y]}else{if(p===0)throw new Error;for(m=0;m<p;m++)e[b+m]=a[y+m]}}function h(d,p,v,g){var m=0;for(m=0;m<g;m++)a[m]=e[v+m];var y=d+p-1,_=g-1,b=v+g-1,T=0,S=0;if(e[b--]=e[y--],--p===0){for(T=b-(g-1),m=0;m<g;m++)e[T+m]=a[m];return}if(g===1){for(b-=p,y-=p,S=b+1,T=y+1,m=p-1;m>=0;m--)e[S+m]=e[T+m];e[b]=a[_];return}for(var P=r;;){var C=0,A=0,M=!1;do if(t(a[_],e[y])<0){if(e[b--]=e[y--],C++,A=0,--p===0){M=!0;break}}else if(e[b--]=a[_--],A++,C=0,--g===1){M=!0;break}while((C|A)<P);if(M)break;do{if(C=p-__(a[_],e,d,p,p-1,t),C!==0){for(b-=C,y-=C,p-=C,S=b+1,T=y+1,m=C-1;m>=0;m--)e[S+m]=e[T+m];if(p===0){M=!0;break}}if(e[b--]=a[_--],--g===1){M=!0;break}if(A=g-y_(e[y],a,0,g,g-1,t),A!==0){for(b-=A,_-=A,g-=A,S=b+1,T=_+1,m=0;m<A;m++)e[S+m]=a[T+m];if(g<=1){M=!0;break}}if(e[b--]=e[y--],--p===0){M=!0;break}P--}while(C>=Yf||A>=Yf);if(M)break;P<0&&(P=0),P+=2}if(r=P,r<1&&(r=1),g===1){for(b-=p,y-=p,S=b+1,T=y+1,m=p-1;m>=0;m--)e[S+m]=e[T+m];e[b]=a[_]}else{if(g===0)throw new Error;for(T=b-(g-1),m=0;m<g;m++)e[T+m]=a[m]}}return{mergeRuns:l,forceMergeRuns:u,pushRun:s}}function xg(e,t,r,n){r||(r=0),n||(n=e.length);var i=n-r;if(!(i<2)){var o=0;if(i<W7){o=VM(e,r,n,t),UM(e,r,n,r+o,t);return}var a=pZ(e,t),s=hZ(i);do{if(o=VM(e,r,n,t),o<s){var l=i;l>s&&(l=s),UM(e,r,r+l,r+o,t),o=l}a.pushRun(r,o),a.mergeRuns(),i-=o,r+=o}while(i!==0);a.forceMergeRuns()}}var bn=1,Gh=2,lc=4,GM=!1;function b_(){GM||(GM=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function jM(e,t){return e.zlevel===t.zlevel?e.z===t.z?e.z2-t.z2:e.z-t.z:e.zlevel-t.zlevel}var vZ=function(){function e(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=jM}return e.prototype.traverse=function(t,r){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(t,r)},e.prototype.getDisplayList=function(t,r){r=r||!1;var n=this._displayList;return(t||!n.length)&&this.updateDisplayList(r),n},e.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var r=this._roots,n=this._displayList,i=0,o=r.length;i<o;i++)this._updateAndAddDisplayable(r[i],null,t);n.length=this._displayListLen,xg(n,jM)},e.prototype._updateAndAddDisplayable=function(t,r,n){if(!(t.ignore&&!n)){t.beforeUpdate(),t.update(),t.afterUpdate();var i=t.getClipPath();if(t.ignoreClip)r=null;else if(i){r?r=r.slice():r=[];for(var o=i,a=t;o;)o.parent=a,o.updateTransform(),r.push(o),a=o,o=o.getClipPath()}if(t.childrenRef){for(var s=t.childrenRef(),l=0;l<s.length;l++){var u=s[l];t.__dirty&&(u.__dirty|=bn),this._updateAndAddDisplayable(u,r,n)}t.__dirty=0}else{var c=t;r&&r.length?c.__clipPaths=r:c.__clipPaths&&c.__clipPaths.length>0&&(c.__clipPaths=[]),isNaN(c.z)&&(b_(),c.z=0),isNaN(c.z2)&&(b_(),c.z2=0),isNaN(c.zlevel)&&(b_(),c.zlevel=0),this._displayList[this._displayListLen++]=c}var f=t.getDecalElement&&t.getDecalElement();f&&this._updateAndAddDisplayable(f,r,n);var h=t.getTextGuideLine();h&&this._updateAndAddDisplayable(h,r,n);var d=t.getTextContent();d&&this._updateAndAddDisplayable(d,r,n)}},e.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},e.prototype.delRoot=function(t){if(t instanceof Array){for(var r=0,n=t.length;r<n;r++)this.delRoot(t[r]);return}var i=ce(this._roots,t);i>=0&&this._roots.splice(i,1)},e.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},e.prototype.getRoots=function(){return this._roots},e.prototype.dispose=function(){this._displayList=null,this._roots=null},e}();const gZ=vZ;var H7;H7=Xt.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){return setTimeout(e,16)};const wS=H7;var Lg={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quarticIn:function(e){return e*e*e*e},quarticOut:function(e){return 1- --e*e*e*e},quarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quinticIn:function(e){return e*e*e*e*e},quinticOut:function(e){return--e*e*e*e*e+1},quinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return .5*(1-Math.cos(Math.PI*e))},exponentialIn:function(e){return e===0?0:Math.pow(1024,e-1)},exponentialOut:function(e){return e===1?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),-(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)))},elasticOut:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/n)+1)},elasticInOut:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),(e*=2)<1?-.5*(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)):r*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*.5+1)},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},backInOut:function(e){var t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)},bounceIn:function(e){return 1-Lg.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(e){return e<.5?Lg.bounceIn(e*2)*.5:Lg.bounceOut(e*2-1)*.5+.5}};const X7=Lg;var _p=Math.pow,ds=Math.sqrt,bm=1e-8,Y7=1e-4,WM=ds(3),bp=1/3,uo=sf(),jn=sf(),Cc=sf();function os(e){return e>-bm&&e<bm}function q7(e){return e>bm||e<-bm}function or(e,t,r,n,i){var o=1-i;return o*o*(o*e+3*i*t)+i*i*(i*n+3*o*r)}function HM(e,t,r,n,i){var o=1-i;return 3*(((t-e)*o+2*(r-t)*i)*o+(n-r)*i*i)}function wm(e,t,r,n,i,o){var a=n+3*(t-r)-e,s=3*(r-t*2+e),l=3*(t-e),u=e-i,c=s*s-3*a*l,f=s*l-9*a*u,h=l*l-3*s*u,d=0;if(os(c)&&os(f))if(os(s))o[0]=0;else{var p=-l/s;p>=0&&p<=1&&(o[d++]=p)}else{var v=f*f-4*c*h;if(os(v)){var g=f/c,p=-s/a+g,m=-g/2;p>=0&&p<=1&&(o[d++]=p),m>=0&&m<=1&&(o[d++]=m)}else if(v>0){var y=ds(v),_=c*s+1.5*a*(-f+y),b=c*s+1.5*a*(-f-y);_<0?_=-_p(-_,bp):_=_p(_,bp),b<0?b=-_p(-b,bp):b=_p(b,bp);var p=(-s-(_+b))/(3*a);p>=0&&p<=1&&(o[d++]=p)}else{var T=(2*c*s-3*a*f)/(2*ds(c*c*c)),S=Math.acos(T)/3,P=ds(c),C=Math.cos(S),p=(-s-2*P*C)/(3*a),m=(-s+P*(C+WM*Math.sin(S)))/(3*a),A=(-s+P*(C-WM*Math.sin(S)))/(3*a);p>=0&&p<=1&&(o[d++]=p),m>=0&&m<=1&&(o[d++]=m),A>=0&&A<=1&&(o[d++]=A)}}return d}function Z7(e,t,r,n,i){var o=6*r-12*t+6*e,a=9*t+3*n-3*e-9*r,s=3*t-3*e,l=0;if(os(a)){if(q7(o)){var u=-s/o;u>=0&&u<=1&&(i[l++]=u)}}else{var c=o*o-4*a*s;if(os(c))i[0]=-o/(2*a);else if(c>0){var f=ds(c),u=(-o+f)/(2*a),h=(-o-f)/(2*a);u>=0&&u<=1&&(i[l++]=u),h>=0&&h<=1&&(i[l++]=h)}}return l}function Sm(e,t,r,n,i,o){var a=(t-e)*i+e,s=(r-t)*i+t,l=(n-r)*i+r,u=(s-a)*i+a,c=(l-s)*i+s,f=(c-u)*i+u;o[0]=e,o[1]=a,o[2]=u,o[3]=f,o[4]=f,o[5]=c,o[6]=l,o[7]=n}function mZ(e,t,r,n,i,o,a,s,l,u,c){var f,h=.005,d=1/0,p,v,g,m;uo[0]=l,uo[1]=u;for(var y=0;y<1;y+=.05)jn[0]=or(e,r,i,a,y),jn[1]=or(t,n,o,s,y),g=Ec(uo,jn),g<d&&(f=y,d=g);d=1/0;for(var _=0;_<32&&!(h<Y7);_++)p=f-h,v=f+h,jn[0]=or(e,r,i,a,p),jn[1]=or(t,n,o,s,p),g=Ec(jn,uo),p>=0&&g<d?(f=p,d=g):(Cc[0]=or(e,r,i,a,v),Cc[1]=or(t,n,o,s,v),m=Ec(Cc,uo),v<=1&&m<d?(f=v,d=m):h*=.5);return c&&(c[0]=or(e,r,i,a,f),c[1]=or(t,n,o,s,f)),ds(d)}function yZ(e,t,r,n,i,o,a,s,l){for(var u=e,c=t,f=0,h=1/l,d=1;d<=l;d++){var p=d*h,v=or(e,r,i,a,p),g=or(t,n,o,s,p),m=v-u,y=g-c;f+=Math.sqrt(m*m+y*y),u=v,c=g}return f}function kr(e,t,r,n){var i=1-n;return i*(i*e+2*n*t)+n*n*r}function XM(e,t,r,n){return 2*((1-n)*(t-e)+n*(r-t))}function _Z(e,t,r,n,i){var o=e-2*t+r,a=2*(t-e),s=e-n,l=0;if(os(o)){if(q7(a)){var u=-s/a;u>=0&&u<=1&&(i[l++]=u)}}else{var c=a*a-4*o*s;if(os(c)){var u=-a/(2*o);u>=0&&u<=1&&(i[l++]=u)}else if(c>0){var f=ds(c),u=(-a+f)/(2*o),h=(-a-f)/(2*o);u>=0&&u<=1&&(i[l++]=u),h>=0&&h<=1&&(i[l++]=h)}}return l}function K7(e,t,r){var n=e+r-2*t;return n===0?.5:(e-t)/n}function Tm(e,t,r,n,i){var o=(t-e)*n+e,a=(r-t)*n+t,s=(a-o)*n+o;i[0]=e,i[1]=o,i[2]=s,i[3]=s,i[4]=a,i[5]=r}function bZ(e,t,r,n,i,o,a,s,l){var u,c=.005,f=1/0;uo[0]=a,uo[1]=s;for(var h=0;h<1;h+=.05){jn[0]=kr(e,r,i,h),jn[1]=kr(t,n,o,h);var d=Ec(uo,jn);d<f&&(u=h,f=d)}f=1/0;for(var p=0;p<32&&!(c<Y7);p++){var v=u-c,g=u+c;jn[0]=kr(e,r,i,v),jn[1]=kr(t,n,o,v);var d=Ec(jn,uo);if(v>=0&&d<f)u=v,f=d;else{Cc[0]=kr(e,r,i,g),Cc[1]=kr(t,n,o,g);var m=Ec(Cc,uo);g<=1&&m<f?(u=g,f=m):c*=.5}}return l&&(l[0]=kr(e,r,i,u),l[1]=kr(t,n,o,u)),ds(f)}function wZ(e,t,r,n,i,o,a){for(var s=e,l=t,u=0,c=1/a,f=1;f<=a;f++){var h=f*c,d=kr(e,r,i,h),p=kr(t,n,o,h),v=d-s,g=p-l;u+=Math.sqrt(v*v+g*g),s=d,l=p}return u}var SZ=/cubic-bezier\(([0-9,\.e ]+)\)/;function J7(e){var t=e&&SZ.exec(e);if(t){var r=t[1].split(","),n=+po(r[0]),i=+po(r[1]),o=+po(r[2]),a=+po(r[3]);if(isNaN(n+i+o+a))return;var s=[];return function(l){return l<=0?0:l>=1?1:wm(0,n,o,1,l,s)&&or(0,i,a,1,s[0])}}}var TZ=function(){function e(t){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=t.loop||!1,this.onframe=t.onframe||Dr,this.ondestroy=t.ondestroy||Dr,this.onrestart=t.onrestart||Dr,t.easing&&this.setEasing(t.easing)}return e.prototype.step=function(t,r){if(this._inited||(this._startTime=t+this._delay,this._inited=!0),this._paused){this._pausedTime+=r;return}var n=this._life,i=t-this._startTime-this._pausedTime,o=i/n;o<0&&(o=0),o=Math.min(o,1);var a=this.easingFunc,s=a?a(o):o;if(this.onframe(s),o===1)if(this.loop){var l=i%n;this._startTime=t-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){this._paused=!1},e.prototype.setEasing=function(t){this.easing=t,this.easingFunc=Ut(t)?t:X7[t]||J7(t)},e}();const PZ=TZ;var Q7=function(){function e(t){this.value=t}return e}(),EZ=function(){function e(){this._len=0}return e.prototype.insert=function(t){var r=new Q7(t);return this.insertEntry(r),r},e.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},e.prototype.remove=function(t){var r=t.prev,n=t.next;r?r.next=n:this.head=n,n?n.prev=r:this.tail=r,t.next=t.prev=null,this._len--},e.prototype.len=function(){return this._len},e.prototype.clear=function(){this.head=this.tail=null,this._len=0},e}(),AZ=function(){function e(t){this._list=new EZ,this._maxSize=10,this._map={},this._maxSize=t}return e.prototype.put=function(t,r){var n=this._list,i=this._map,o=null;if(i[t]==null){var a=n.len(),s=this._lastRemovedEntry;if(a>=this._maxSize&&a>0){var l=n.head;n.remove(l),delete i[l.key],o=l.value,this._lastRemovedEntry=l}s?s.value=r:s=new Q7(r),s.key=t,n.insertEntry(s),i[t]=s}return o},e.prototype.get=function(t){var r=this._map[t],n=this._list;if(r!=null)return r!==n.tail&&(n.remove(r),n.insertEntry(r)),r.value},e.prototype.clear=function(){this._list.clear(),this._map={}},e.prototype.len=function(){return this._list.len()},e}();const E0=AZ;var YM={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Ai(e){return e=Math.round(e),e<0?0:e>255?255:e}function CZ(e){return e=Math.round(e),e<0?0:e>360?360:e}function Ud(e){return e<0?0:e>1?1:e}function w_(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?Ai(parseFloat(t)/100*255):Ai(parseInt(t,10))}function Rl(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?Ud(parseFloat(t)/100):Ud(parseFloat(t))}function S_(e,t,r){return r<0?r+=1:r>1&&(r-=1),r*6<1?e+(t-e)*r*6:r*2<1?t:r*3<2?e+(t-e)*(2/3-r)*6:e}function as(e,t,r){return e+(t-e)*r}function Bn(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}function SS(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}var t9=new E0(20),wp=null;function Mu(e,t){wp&&SS(wp,t),wp=t9.put(e,wp||t.slice())}function Hn(e,t){if(!!e){t=t||[];var r=t9.get(e);if(r)return SS(t,r);e=e+"";var n=e.replace(/ /g,"").toLowerCase();if(n in YM)return SS(t,YM[n]),Mu(e,t),t;var i=n.length;if(n.charAt(0)==="#"){if(i===4||i===5){var o=parseInt(n.slice(1,4),16);if(!(o>=0&&o<=4095)){Bn(t,0,0,0,1);return}return Bn(t,(o&3840)>>4|(o&3840)>>8,o&240|(o&240)>>4,o&15|(o&15)<<4,i===5?parseInt(n.slice(4),16)/15:1),Mu(e,t),t}else if(i===7||i===9){var o=parseInt(n.slice(1,7),16);if(!(o>=0&&o<=16777215)){Bn(t,0,0,0,1);return}return Bn(t,(o&16711680)>>16,(o&65280)>>8,o&255,i===9?parseInt(n.slice(7),16)/255:1),Mu(e,t),t}return}var a=n.indexOf("("),s=n.indexOf(")");if(a!==-1&&s+1===i){var l=n.substr(0,a),u=n.substr(a+1,s-(a+1)).split(","),c=1;switch(l){case"rgba":if(u.length!==4)return u.length===3?Bn(t,+u[0],+u[1],+u[2],1):Bn(t,0,0,0,1);c=Rl(u.pop());case"rgb":if(u.length>=3)return Bn(t,w_(u[0]),w_(u[1]),w_(u[2]),u.length===3?c:Rl(u[3])),Mu(e,t),t;Bn(t,0,0,0,1);return;case"hsla":if(u.length!==4){Bn(t,0,0,0,1);return}return u[3]=Rl(u[3]),TS(u,t),Mu(e,t),t;case"hsl":if(u.length!==3){Bn(t,0,0,0,1);return}return TS(u,t),Mu(e,t),t;default:return}}Bn(t,0,0,0,1)}}function TS(e,t){var r=(parseFloat(e[0])%360+360)%360/360,n=Rl(e[1]),i=Rl(e[2]),o=i<=.5?i*(n+1):i+n-i*n,a=i*2-o;return t=t||[],Bn(t,Ai(S_(a,o,r+1/3)*255),Ai(S_(a,o,r)*255),Ai(S_(a,o,r-1/3)*255),1),e.length===4&&(t[3]=e[3]),t}function MZ(e){if(!!e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.min(t,r,n),o=Math.max(t,r,n),a=o-i,s=(o+i)/2,l,u;if(a===0)l=0,u=0;else{s<.5?u=a/(o+i):u=a/(2-o-i);var c=((o-t)/6+a/2)/a,f=((o-r)/6+a/2)/a,h=((o-n)/6+a/2)/a;t===o?l=h-f:r===o?l=1/3+c-h:n===o&&(l=2/3+f-c),l<0&&(l+=1),l>1&&(l-=1)}var d=[l*360,u,s];return e[3]!=null&&d.push(e[3]),d}}function qM(e,t){var r=Hn(e);if(r){for(var n=0;n<3;n++)t<0?r[n]=r[n]*(1-t)|0:r[n]=(255-r[n])*t+r[n]|0,r[n]>255?r[n]=255:r[n]<0&&(r[n]=0);return na(r,r.length===4?"rgba":"rgb")}}function T_(e,t,r){if(!(!(t&&t.length)||!(e>=0&&e<=1))){r=r||[];var n=e*(t.length-1),i=Math.floor(n),o=Math.ceil(n),a=t[i],s=t[o],l=n-i;return r[0]=Ai(as(a[0],s[0],l)),r[1]=Ai(as(a[1],s[1],l)),r[2]=Ai(as(a[2],s[2],l)),r[3]=Ud(as(a[3],s[3],l)),r}}function kZ(e,t,r){if(!(!(t&&t.length)||!(e>=0&&e<=1))){var n=e*(t.length-1),i=Math.floor(n),o=Math.ceil(n),a=Hn(t[i]),s=Hn(t[o]),l=n-i,u=na([Ai(as(a[0],s[0],l)),Ai(as(a[1],s[1],l)),Ai(as(a[2],s[2],l)),Ud(as(a[3],s[3],l))],"rgba");return r?{color:u,leftIndex:i,rightIndex:o,value:n}:u}}function P_(e,t,r,n){var i=Hn(e);if(e)return i=MZ(i),t!=null&&(i[0]=CZ(t)),r!=null&&(i[1]=Rl(r)),n!=null&&(i[2]=Rl(n)),na(TS(i),"rgba")}function PS(e,t){var r=Hn(e);if(r&&t!=null)return r[3]=Ud(t),na(r,"rgba")}function na(e,t){if(!(!e||!e.length)){var r=e[0]+","+e[1]+","+e[2];return(t==="rgba"||t==="hsva"||t==="hsla")&&(r+=","+e[3]),t+"("+r+")"}}function Pm(e,t){var r=Hn(e);return r?(.299*r[0]+.587*r[1]+.114*r[2])*r[3]/255+(1-r[3])*t:0}function xZ(e){return e.type==="linear"}function LZ(e){return e.type==="radial"}(function(){return Xt.hasGlobalWindow&&Ut(window.btoa)?function(e){return window.btoa(unescape(e))}:typeof Buffer<"u"?function(e){return Buffer.from(e).toString("base64")}:function(e){return null}})();var ES=Array.prototype.slice;function Ho(e,t,r){return(t-e)*r+e}function E_(e,t,r,n){for(var i=t.length,o=0;o<i;o++)e[o]=Ho(t[o],r[o],n);return e}function IZ(e,t,r,n){for(var i=t.length,o=i&&t[0].length,a=0;a<i;a++){e[a]||(e[a]=[]);for(var s=0;s<o;s++)e[a][s]=Ho(t[a][s],r[a][s],n)}return e}function Sp(e,t,r,n){for(var i=t.length,o=0;o<i;o++)e[o]=t[o]+r[o]*n;return e}function ZM(e,t,r,n){for(var i=t.length,o=i&&t[0].length,a=0;a<i;a++){e[a]||(e[a]=[]);for(var s=0;s<o;s++)e[a][s]=t[a][s]+r[a][s]*n}return e}function OZ(e,t){for(var r=e.length,n=t.length,i=r>n?t:e,o=Math.min(r,n),a=i[o-1]||{color:[0,0,0,0],offset:0},s=o;s<Math.max(r,n);s++)i.push({offset:a.offset,color:a.color.slice()})}function RZ(e,t,r){var n=e,i=t;if(!(!n.push||!i.push)){var o=n.length,a=i.length;if(o!==a){var s=o>a;if(s)n.length=a;else for(var l=o;l<a;l++)n.push(r===1?i[l]:ES.call(i[l]))}for(var u=n[0]&&n[0].length,l=0;l<n.length;l++)if(r===1)isNaN(n[l])&&(n[l]=i[l]);else for(var c=0;c<u;c++)isNaN(n[l][c])&&(n[l][c]=i[l][c])}}function dd(e){if(Fr(e)){var t=e.length;if(Fr(e[0])){for(var r=[],n=0;n<t;n++)r.push(ES.call(e[n]));return r}return ES.call(e)}return e}function Ig(e){return e[0]=Math.floor(e[0])||0,e[1]=Math.floor(e[1])||0,e[2]=Math.floor(e[2])||0,e[3]=e[3]==null?1:e[3],"rgba("+e.join(",")+")"}function DZ(e){return Fr(e&&e[0])?2:1}var Tp=0,Og=1,e9=2,jh=3,AS=4,CS=5,KM=6;function JM(e){return e===AS||e===CS}function Pp(e){return e===Og||e===e9}var qf=[0,0,0,0],NZ=function(){function e(t){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=t}return e.prototype.isFinished=function(){return this._finished},e.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},e.prototype.needsAnimate=function(){return this.keyframes.length>=1},e.prototype.getAdditiveTrack=function(){return this._additiveTrack},e.prototype.addKeyframe=function(t,r,n){this._needsSort=!0;var i=this.keyframes,o=i.length,a=!1,s=KM,l=r;if(Fr(r)){var u=DZ(r);s=u,(u===1&&!be(r[0])||u===2&&!be(r[0][0]))&&(a=!0)}else if(be(r)&&!ym(r))s=Tp;else if(Et(r))if(!isNaN(+r))s=Tp;else{var c=Hn(r);c&&(l=c,s=jh)}else if(N1(r)){var f=ot({},l);f.colorStops=Ct(r.colorStops,function(d){return{offset:d.offset,color:Hn(d.color)}}),xZ(r)?s=AS:LZ(r)&&(s=CS),l=f}o===0?this.valType=s:(s!==this.valType||s===KM)&&(a=!0),this.discrete=this.discrete||a;var h={time:t,value:l,rawValue:r,percent:0};return n&&(h.easing=n,h.easingFunc=Ut(n)?n:X7[n]||J7(n)),i.push(h),h},e.prototype.prepare=function(t,r){var n=this.keyframes;this._needsSort&&n.sort(function(v,g){return v.time-g.time});for(var i=this.valType,o=n.length,a=n[o-1],s=this.discrete,l=Pp(i),u=JM(i),c=0;c<o;c++){var f=n[c],h=f.value,d=a.value;f.percent=f.time/t,s||(l&&c!==o-1?RZ(h,d,i):u&&OZ(h.colorStops,d.colorStops))}if(!s&&i!==CS&&r&&this.needsAnimate()&&r.needsAnimate()&&i===r.valType&&!r._finished){this._additiveTrack=r;for(var p=n[0].value,c=0;c<o;c++)i===Tp?n[c].additiveValue=n[c].value-p:i===jh?n[c].additiveValue=Sp([],n[c].value,p,-1):Pp(i)&&(n[c].additiveValue=i===Og?Sp([],n[c].value,p,-1):ZM([],n[c].value,p,-1))}},e.prototype.step=function(t,r){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var n=this._additiveTrack!=null,i=n?"additiveValue":"value",o=this.valType,a=this.keyframes,s=a.length,l=this.propName,u=o===jh,c,f=this._lastFr,h=Math.min,d,p;if(s===1)d=p=a[0];else{if(r<0)c=0;else if(r<this._lastFrP){var v=h(f+1,s-1);for(c=v;c>=0&&!(a[c].percent<=r);c--);c=h(c,s-2)}else{for(c=f;c<s&&!(a[c].percent>r);c++);c=h(c-1,s-2)}p=a[c+1],d=a[c]}if(!!(d&&p)){this._lastFr=c,this._lastFrP=r;var g=p.percent-d.percent,m=g===0?1:h((r-d.percent)/g,1);p.easingFunc&&(m=p.easingFunc(m));var y=n?this._additiveValue:u?qf:t[l];if((Pp(o)||u)&&!y&&(y=this._additiveValue=[]),this.discrete)t[l]=m<1?d.rawValue:p.rawValue;else if(Pp(o))o===Og?E_(y,d[i],p[i],m):IZ(y,d[i],p[i],m);else if(JM(o)){var _=d[i],b=p[i],T=o===AS;t[l]={type:T?"linear":"radial",x:Ho(_.x,b.x,m),y:Ho(_.y,b.y,m),colorStops:Ct(_.colorStops,function(P,C){var A=b.colorStops[C];return{offset:Ho(P.offset,A.offset,m),color:Ig(E_([],P.color,A.color,m))}}),global:b.global},T?(t[l].x2=Ho(_.x2,b.x2,m),t[l].y2=Ho(_.y2,b.y2,m)):t[l].r=Ho(_.r,b.r,m)}else if(u)E_(y,d[i],p[i],m),n||(t[l]=Ig(y));else{var S=Ho(d[i],p[i],m);n?this._additiveValue=S:t[l]=S}n&&this._addToTarget(t)}}},e.prototype._addToTarget=function(t){var r=this.valType,n=this.propName,i=this._additiveValue;r===Tp?t[n]=t[n]+i:r===jh?(Hn(t[n],qf),Sp(qf,qf,i,1),t[n]=Ig(qf)):r===Og?Sp(t[n],t[n],i,1):r===e9&&ZM(t[n],t[n],i,1)},e}(),FZ=function(){function e(t,r,n,i){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=t,this._loop=r,r&&i){SP("Can' use additive animation on looped animation.");return}this._additiveAnimators=i,this._allowDiscrete=n}return e.prototype.getMaxTime=function(){return this._maxTime},e.prototype.getDelay=function(){return this._delay},e.prototype.getLoop=function(){return this._loop},e.prototype.getTarget=function(){return this._target},e.prototype.changeTarget=function(t){this._target=t},e.prototype.when=function(t,r,n){return this.whenWithKeys(t,r,ve(r),n)},e.prototype.whenWithKeys=function(t,r,n,i){for(var o=this._tracks,a=0;a<n.length;a++){var s=n[a],l=o[s];if(!l){l=o[s]=new NZ(s);var u=void 0,c=this._getAdditiveTrack(s);if(c){var f=c.keyframes,h=f[f.length-1];u=h&&h.value,c.valType===jh&&u&&(u=Ig(u))}else u=this._target[s];if(u==null)continue;t>0&&l.addKeyframe(0,dd(u),i),this._trackKeys.push(s)}l.addKeyframe(t,dd(r[s]),i)}return this._maxTime=Math.max(this._maxTime,t),this},e.prototype.pause=function(){this._clip.pause(),this._paused=!0},e.prototype.resume=function(){this._clip.resume(),this._paused=!1},e.prototype.isPaused=function(){return!!this._paused},e.prototype.duration=function(t){return this._maxTime=t,this._force=!0,this},e.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var r=t.length,n=0;n<r;n++)t[n].call(this)},e.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,r=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,r)for(var n=0;n<r.length;n++)r[n].call(this)},e.prototype._setTracksFinished=function(){for(var t=this._tracks,r=this._trackKeys,n=0;n<r.length;n++)t[r[n]].setFinished()},e.prototype._getAdditiveTrack=function(t){var r,n=this._additiveAnimators;if(n)for(var i=0;i<n.length;i++){var o=n[i].getTrack(t);o&&(r=o)}return r},e.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var r=this,n=[],i=this._maxTime||0,o=0;o<this._trackKeys.length;o++){var a=this._trackKeys[o],s=this._tracks[a],l=this._getAdditiveTrack(a),u=s.keyframes,c=u.length;if(s.prepare(i,l),s.needsAnimate())if(!this._allowDiscrete&&s.discrete){var f=u[c-1];f&&(r._target[s.propName]=f.rawValue),s.setFinished()}else n.push(s)}if(n.length||this._force){var h=new PZ({life:i,loop:this._loop,delay:this._delay||0,onframe:function(d){r._started=2;var p=r._additiveAnimators;if(p){for(var v=!1,g=0;g<p.length;g++)if(p[g]._clip){v=!0;break}v||(r._additiveAnimators=null)}for(var g=0;g<n.length;g++)n[g].step(r._target,d);var m=r._onframeCbs;if(m)for(var g=0;g<m.length;g++)m[g](r._target,d)},ondestroy:function(){r._doneCallback()}});this._clip=h,this.animation&&this.animation.addClip(h),t&&h.setEasing(t)}else this._doneCallback();return this}},e.prototype.stop=function(t){if(!!this._clip){var r=this._clip;t&&r.onframe(1),this._abortedCallback()}},e.prototype.delay=function(t){return this._delay=t,this},e.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},e.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},e.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},e.prototype.getClip=function(){return this._clip},e.prototype.getTrack=function(t){return this._tracks[t]},e.prototype.getTracks=function(){var t=this;return Ct(this._trackKeys,function(r){return t._tracks[r]})},e.prototype.stopTracks=function(t,r){if(!t.length||!this._clip)return!0;for(var n=this._tracks,i=this._trackKeys,o=0;o<t.length;o++){var a=n[t[o]];a&&!a.isFinished()&&(r?a.step(this._target,1):this._started===1&&a.step(this._target,0),a.setFinished())}for(var s=!0,o=0;o<i.length;o++)if(!n[i[o]].isFinished()){s=!1;break}return s&&this._abortedCallback(),s},e.prototype.saveTo=function(t,r,n){if(!!t){r=r||this._trackKeys;for(var i=0;i<r.length;i++){var o=r[i],a=this._tracks[o];if(!(!a||a.isFinished())){var s=a.keyframes,l=s[n?0:s.length-1];l&&(t[o]=dd(l.rawValue))}}}},e.prototype.__changeFinalValue=function(t,r){r=r||ve(t);for(var n=0;n<r.length;n++){var i=r[n],o=this._tracks[i];if(!!o){var a=o.keyframes;if(a.length>1){var s=a.pop();o.addKeyframe(s.time,t[i]),o.prepare(this._maxTime,o.getAdditiveTrack())}}}},e}();const MP=FZ;function pc(){return new Date().getTime()}var BZ=function(e){Ee(t,e);function t(r){var n=e.call(this)||this;return n._running=!1,n._time=0,n._pausedTime=0,n._pauseStart=0,n._paused=!1,r=r||{},n.stage=r.stage||{},n}return t.prototype.addClip=function(r){r.animation&&this.removeClip(r),this._head?(this._tail.next=r,r.prev=this._tail,r.next=null,this._tail=r):this._head=this._tail=r,r.animation=this},t.prototype.addAnimator=function(r){r.animation=this;var n=r.getClip();n&&this.addClip(n)},t.prototype.removeClip=function(r){if(!!r.animation){var n=r.prev,i=r.next;n?n.next=i:this._head=i,i?i.prev=n:this._tail=n,r.next=r.prev=r.animation=null}},t.prototype.removeAnimator=function(r){var n=r.getClip();n&&this.removeClip(n),r.animation=null},t.prototype.update=function(r){for(var n=pc()-this._pausedTime,i=n-this._time,o=this._head;o;){var a=o.next,s=o.step(n,i);s&&(o.ondestroy(),this.removeClip(o)),o=a}this._time=n,r||(this.trigger("frame",i),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var r=this;this._running=!0;function n(){r._running&&(wS(n),!r._paused&&r.update())}wS(n)},t.prototype.start=function(){this._running||(this._time=pc(),this._pausedTime=0,this._startLoop())},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){this._paused||(this._pauseStart=pc(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=pc()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var r=this._head;r;){var n=r.next;r.prev=r.next=r.animation=null,r=n}this._head=this._tail=null},t.prototype.isFinished=function(){return this._head==null},t.prototype.animate=function(r,n){n=n||{},this.start();var i=new MP(r,n.loop);return this.addAnimator(i),i},t}(Di);const $Z=BZ;var zZ=300,A_=Xt.domSupported,C_=function(){var e=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],t=["touchstart","touchend","touchmove"],r={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},n=Ct(e,function(i){var o=i.replace("mouse","pointer");return r.hasOwnProperty(o)?o:i});return{mouse:e,touch:t,pointer:n}}(),QM={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},ek=!1;function MS(e){var t=e.pointerType;return t==="pen"||t==="touch"}function VZ(e){e.touching=!0,e.touchTimer!=null&&(clearTimeout(e.touchTimer),e.touchTimer=null),e.touchTimer=setTimeout(function(){e.touching=!1,e.touchTimer=null},700)}function M_(e){e&&(e.zrByTouch=!0)}function UZ(e,t){return $n(e.dom,new GZ(e,t),!0)}function r9(e,t){for(var r=t,n=!1;r&&r.nodeType!==9&&!(n=r.domBelongToZr||r!==t&&r===e.painterRoot);)r=r.parentNode;return n}var GZ=function(){function e(t,r){this.stopPropagation=Dr,this.stopImmediatePropagation=Dr,this.preventDefault=Dr,this.type=r.type,this.target=this.currentTarget=t.dom,this.pointerType=r.pointerType,this.clientX=r.clientX,this.clientY=r.clientY}return e}(),fi={mousedown:function(e){e=$n(this.dom,e),this.__mayPointerCapture=[e.zrX,e.zrY],this.trigger("mousedown",e)},mousemove:function(e){e=$n(this.dom,e);var t=this.__mayPointerCapture;t&&(e.zrX!==t[0]||e.zrY!==t[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",e)},mouseup:function(e){e=$n(this.dom,e),this.__togglePointerCapture(!1),this.trigger("mouseup",e)},mouseout:function(e){e=$n(this.dom,e);var t=e.toElement||e.relatedTarget;r9(this,t)||(this.__pointerCapturing&&(e.zrEventControl="no_globalout"),this.trigger("mouseout",e))},wheel:function(e){ek=!0,e=$n(this.dom,e),this.trigger("mousewheel",e)},mousewheel:function(e){ek||(e=$n(this.dom,e),this.trigger("mousewheel",e))},touchstart:function(e){e=$n(this.dom,e),M_(e),this.__lastTouchMoment=new Date,this.handler.processGesture(e,"start"),fi.mousemove.call(this,e),fi.mousedown.call(this,e)},touchmove:function(e){e=$n(this.dom,e),M_(e),this.handler.processGesture(e,"change"),fi.mousemove.call(this,e)},touchend:function(e){e=$n(this.dom,e),M_(e),this.handler.processGesture(e,"end"),fi.mouseup.call(this,e),+new Date-+this.__lastTouchMoment<zZ&&fi.click.call(this,e)},pointerdown:function(e){fi.mousedown.call(this,e)},pointermove:function(e){MS(e)||fi.mousemove.call(this,e)},pointerup:function(e){fi.mouseup.call(this,e)},pointerout:function(e){MS(e)||fi.mouseout.call(this,e)}};N(["click","dblclick","contextmenu"],function(e){fi[e]=function(t){t=$n(this.dom,t),this.trigger(e,t)}});var kS={pointermove:function(e){MS(e)||kS.mousemove.call(this,e)},pointerup:function(e){kS.mouseup.call(this,e)},mousemove:function(e){this.trigger("mousemove",e)},mouseup:function(e){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",e),t&&(e.zrEventControl="only_globalout",this.trigger("mouseout",e))}};function jZ(e,t){var r=t.domHandlers;Xt.pointerEventsSupported?N(C_.pointer,function(n){Rg(t,n,function(i){r[n].call(e,i)})}):(Xt.touchEventsSupported&&N(C_.touch,function(n){Rg(t,n,function(i){r[n].call(e,i),VZ(t)})}),N(C_.mouse,function(n){Rg(t,n,function(i){i=EP(i),t.touching||r[n].call(e,i)})}))}function WZ(e,t){Xt.pointerEventsSupported?N(QM.pointer,r):Xt.touchEventsSupported||N(QM.mouse,r);function r(n){function i(o){o=EP(o),r9(e,o.target)||(o=UZ(e,o),t.domHandlers[n].call(e,o))}Rg(t,n,i,{capture:!0})}}function Rg(e,t,r,n){e.mounted[t]=r,e.listenerOpts[t]=n,Qq(e.domTarget,t,r,n)}function k_(e){var t=e.mounted;for(var r in t)t.hasOwnProperty(r)&&tZ(e.domTarget,r,t[r],e.listenerOpts[r]);e.mounted={}}var rk=function(){function e(t,r){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=r}return e}(),HZ=function(e){Ee(t,e);function t(r,n){var i=e.call(this)||this;return i.__pointerCapturing=!1,i.dom=r,i.painterRoot=n,i._localHandlerScope=new rk(r,fi),A_&&(i._globalHandlerScope=new rk(document,kS)),jZ(i,i._localHandlerScope),i}return t.prototype.dispose=function(){k_(this._localHandlerScope),A_&&k_(this._globalHandlerScope)},t.prototype.setCursor=function(r){this.dom.style&&(this.dom.style.cursor=r||"default")},t.prototype.__togglePointerCapture=function(r){if(this.__mayPointerCapture=null,A_&&+this.__pointerCapturing^+r){this.__pointerCapturing=r;var n=this._globalHandlerScope;r?WZ(this,n):k_(n)}},t}(Di);const XZ=HZ;var n9=1;Xt.hasGlobalWindow&&(n9=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var Em=n9,xS=.4,LS="#333",IS="#ccc",YZ="#eee",nk=AP,ik=5e-5;function Hs(e){return e>ik||e<-ik}var Xs=[],ku=[],x_=Uc(),L_=Math.abs,El=function(){function e(){}return e.prototype.getLocalTransform=function(t){return e.getLocalTransform(this,t)},e.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},e.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},e.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},e.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},e.prototype.needLocalTransform=function(){return Hs(this.rotation)||Hs(this.x)||Hs(this.y)||Hs(this.scaleX-1)||Hs(this.scaleY-1)||Hs(this.skewX)||Hs(this.skewY)},e.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,r=this.needLocalTransform(),n=this.transform;if(!(r||t)){n&&nk(n);return}n=n||Uc(),r?this.getLocalTransform(n):nk(n),t&&(r?Ac(n,t,n):V7(n,t)),this.transform=n,this._resolveGlobalScaleRatio(n)},e.prototype._resolveGlobalScaleRatio=function(t){var r=this.globalScaleRatio;if(r!=null&&r!==1){this.getGlobalScale(Xs);var n=Xs[0]<0?-1:1,i=Xs[1]<0?-1:1,o=((Xs[0]-n)*r+n)/Xs[0]||0,a=((Xs[1]-i)*r+i)/Xs[1]||0;t[0]*=o,t[1]*=o,t[2]*=a,t[3]*=a}this.invTransform=this.invTransform||Uc(),B1(this.invTransform,t)},e.prototype.getComputedTransform=function(){for(var t=this,r=[];t;)r.push(t),t=t.parent;for(;t=r.pop();)t.updateTransform();return this.transform},e.prototype.setLocalTransform=function(t){if(!!t){var r=t[0]*t[0]+t[1]*t[1],n=t[2]*t[2]+t[3]*t[3],i=Math.atan2(t[1],t[0]),o=Math.PI/2+i-Math.atan2(t[3],t[2]);n=Math.sqrt(n)*Math.cos(o),r=Math.sqrt(r),this.skewX=o,this.skewY=0,this.rotation=-i,this.x=+t[4],this.y=+t[5],this.scaleX=r,this.scaleY=n,this.originX=0,this.originY=0}},e.prototype.decomposeTransform=function(){if(!!this.transform){var t=this.parent,r=this.transform;t&&t.transform&&(Ac(ku,t.invTransform,r),r=ku);var n=this.originX,i=this.originY;(n||i)&&(x_[4]=n,x_[5]=i,Ac(ku,r,x_),ku[4]-=n,ku[5]-=i,r=ku),this.setLocalTransform(r)}},e.prototype.getGlobalScale=function(t){var r=this.transform;return t=t||[],r?(t[0]=Math.sqrt(r[0]*r[0]+r[1]*r[1]),t[1]=Math.sqrt(r[2]*r[2]+r[3]*r[3]),r[0]<0&&(t[0]=-t[0]),r[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},e.prototype.transformCoordToLocal=function(t,r){var n=[t,r],i=this.invTransform;return i&&Xr(n,n,i),n},e.prototype.transformCoordToGlobal=function(t,r){var n=[t,r],i=this.transform;return i&&Xr(n,n,i),n},e.prototype.getLineScale=function(){var t=this.transform;return t&&L_(t[0]-1)>1e-10&&L_(t[3]-1)>1e-10?Math.sqrt(L_(t[0]*t[3]-t[2]*t[1])):1},e.prototype.copyTransform=function(t){qZ(this,t)},e.getLocalTransform=function(t,r){r=r||[];var n=t.originX||0,i=t.originY||0,o=t.scaleX,a=t.scaleY,s=t.anchorX,l=t.anchorY,u=t.rotation||0,c=t.x,f=t.y,h=t.skewX?Math.tan(t.skewX):0,d=t.skewY?Math.tan(-t.skewY):0;if(n||i||s||l){var p=n+s,v=i+l;r[4]=-p*o-h*v*a,r[5]=-v*a-d*p*o}else r[4]=r[5]=0;return r[0]=o,r[3]=a,r[1]=d*o,r[2]=h*a,u&&CP(r,r,u),r[4]+=n+c,r[5]+=i+f,r},e.initDefaultProps=function(){var t=e.prototype;t.scaleX=t.scaleY=t.globalScaleRatio=1,t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0}(),e}(),wo=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function qZ(e,t){for(var r=0;r<wo.length;r++){var n=wo[r];e[n]=t[n]}}var ok={};function Tn(e,t){t=t||Wl;var r=ok[t];r||(r=ok[t]=new E0(500));var n=r.get(e);return n==null&&(n=ou.measureText(e,t).width,r.put(e,n)),n}function ak(e,t,r,n){var i=Tn(e,t),o=xP(t),a=Wh(0,i,r),s=uc(0,o,n),l=new ae(a,s,i,o);return l}function kP(e,t,r,n){var i=((e||"")+"").split(`
`),o=i.length;if(o===1)return ak(i[0],t,r,n);for(var a=new ae(0,0,0,0),s=0;s<i.length;s++){var l=ak(i[s],t,r,n);s===0?a.copy(l):a.union(l)}return a}function Wh(e,t,r){return r==="right"?e-=t:r==="center"&&(e-=t/2),e}function uc(e,t,r){return r==="middle"?e-=t/2:r==="bottom"&&(e-=t),e}function xP(e){return Tn("\u56FD",e)}function sa(e,t){return typeof e=="string"?e.lastIndexOf("%")>=0?parseFloat(e)/100*t:parseFloat(e):e}function Am(e,t,r){var n=t.position||"inside",i=t.distance!=null?t.distance:5,o=r.height,a=r.width,s=o/2,l=r.x,u=r.y,c="left",f="top";if(n instanceof Array)l+=sa(n[0],r.width),u+=sa(n[1],r.height),c=null,f=null;else switch(n){case"left":l-=i,u+=s,c="right",f="middle";break;case"right":l+=i+a,u+=s,f="middle";break;case"top":l+=a/2,u-=i,c="center",f="bottom";break;case"bottom":l+=a/2,u+=o+i,c="center";break;case"inside":l+=a/2,u+=s,c="center",f="middle";break;case"insideLeft":l+=i,u+=s,f="middle";break;case"insideRight":l+=a-i,u+=s,c="right",f="middle";break;case"insideTop":l+=a/2,u+=i,c="center";break;case"insideBottom":l+=a/2,u+=o-i,c="center",f="bottom";break;case"insideTopLeft":l+=i,u+=i;break;case"insideTopRight":l+=a-i,u+=i,c="right";break;case"insideBottomLeft":l+=i,u+=o-i,f="bottom";break;case"insideBottomRight":l+=a-i,u+=o-i,c="right",f="bottom";break}return e=e||{},e.x=l,e.y=u,e.align=c,e.verticalAlign=f,e}var I_="__zr_normal__",O_=wo.concat(["ignore"]),ZZ=au(wo,function(e,t){return e[t]=!0,e},{ignore:!1}),xu={},KZ=new ae(0,0,0,0),LP=function(){function e(t){this.id=R7(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return e.prototype._init=function(t){this.attr(t)},e.prototype.drift=function(t,r,n){switch(this.draggable){case"horizontal":r=0;break;case"vertical":t=0;break}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=t,i[5]+=r,this.decomposeTransform(),this.markRedraw()},e.prototype.beforeUpdate=function(){},e.prototype.afterUpdate=function(){},e.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},e.prototype.updateInnerText=function(t){var r=this._textContent;if(r&&(!r.ignore||t)){this.textConfig||(this.textConfig={});var n=this.textConfig,i=n.local,o=r.innerTransformable,a=void 0,s=void 0,l=!1;o.parent=i?this:null;var u=!1;if(o.copyTransform(r),n.position!=null){var c=KZ;n.layoutRect?c.copy(n.layoutRect):c.copy(this.getBoundingRect()),i||c.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(xu,n,c):Am(xu,n,c),o.x=xu.x,o.y=xu.y,a=xu.align,s=xu.verticalAlign;var f=n.origin;if(f&&n.rotation!=null){var h=void 0,d=void 0;f==="center"?(h=c.width*.5,d=c.height*.5):(h=sa(f[0],c.width),d=sa(f[1],c.height)),u=!0,o.originX=-o.x+h+(i?0:c.x),o.originY=-o.y+d+(i?0:c.y)}}n.rotation!=null&&(o.rotation=n.rotation);var p=n.offset;p&&(o.x+=p[0],o.y+=p[1],u||(o.originX=-p[0],o.originY=-p[1]));var v=n.inside==null?typeof n.position=="string"&&n.position.indexOf("inside")>=0:n.inside,g=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),m=void 0,y=void 0,_=void 0;v&&this.canBeInsideText()?(m=n.insideFill,y=n.insideStroke,(m==null||m==="auto")&&(m=this.getInsideTextFill()),(y==null||y==="auto")&&(y=this.getInsideTextStroke(m),_=!0)):(m=n.outsideFill,y=n.outsideStroke,(m==null||m==="auto")&&(m=this.getOutsideFill()),(y==null||y==="auto")&&(y=this.getOutsideStroke(m),_=!0)),m=m||"#000",(m!==g.fill||y!==g.stroke||_!==g.autoStroke||a!==g.align||s!==g.verticalAlign)&&(l=!0,g.fill=m,g.stroke=y,g.autoStroke=_,g.align=a,g.verticalAlign=s,r.setDefaultTextStyle(g)),r.__dirty|=bn,l&&r.dirtyStyle(!0)}},e.prototype.canBeInsideText=function(){return!0},e.prototype.getInsideTextFill=function(){return"#fff"},e.prototype.getInsideTextStroke=function(t){return"#000"},e.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?IS:LS},e.prototype.getOutsideStroke=function(t){var r=this.__zr&&this.__zr.getBackgroundColor(),n=typeof r=="string"&&Hn(r);n||(n=[255,255,255,1]);for(var i=n[3],o=this.__zr.isDarkMode(),a=0;a<3;a++)n[a]=n[a]*i+(o?0:255)*(1-i);return n[3]=1,na(n,"rgba")},e.prototype.traverse=function(t,r){},e.prototype.attrKV=function(t,r){t==="textConfig"?this.setTextConfig(r):t==="textContent"?this.setTextContent(r):t==="clipPath"?this.setClipPath(r):t==="extra"?(this.extra=this.extra||{},ot(this.extra,r)):this[t]=r},e.prototype.hide=function(){this.ignore=!0,this.markRedraw()},e.prototype.show=function(){this.ignore=!1,this.markRedraw()},e.prototype.attr=function(t,r){if(typeof t=="string")this.attrKV(t,r);else if(It(t))for(var n=t,i=ve(n),o=0;o<i.length;o++){var a=i[o];this.attrKV(a,t[a])}return this.markRedraw(),this},e.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var r=this._normalState,n=0;n<this.animators.length;n++){var i=this.animators[n],o=i.__fromStateTransition;if(!(i.getLoop()||o&&o!==I_)){var a=i.targetName,s=a?r[a]:r;i.saveTo(s)}}},e.prototype._innerSaveToNormal=function(t){var r=this._normalState;r||(r=this._normalState={}),t.textConfig&&!r.textConfig&&(r.textConfig=this.textConfig),this._savePrimaryToNormal(t,r,O_)},e.prototype._savePrimaryToNormal=function(t,r,n){for(var i=0;i<n.length;i++){var o=n[i];t[o]!=null&&!(o in r)&&(r[o]=this[o])}},e.prototype.hasState=function(){return this.currentStates.length>0},e.prototype.getState=function(t){return this.states[t]},e.prototype.ensureState=function(t){var r=this.states;return r[t]||(r[t]={}),r[t]},e.prototype.clearStates=function(t){this.useState(I_,!1,t)},e.prototype.useState=function(t,r,n,i){var o=t===I_,a=this.hasState();if(!(!a&&o)){var s=this.currentStates,l=this.stateTransition;if(!(ce(s,t)>=0&&(r||s.length===1))){var u;if(this.stateProxy&&!o&&(u=this.stateProxy(t)),u||(u=this.states&&this.states[t]),!u&&!o){SP("State "+t+" not exists.");return}o||this.saveCurrentToNormalState(u);var c=!!(u&&u.hoverLayer||i);c&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,u,this._normalState,r,!n&&!this.__inHover&&l&&l.duration>0,l);var f=this._textContent,h=this._textGuide;return f&&f.useState(t,r,n,c),h&&h.useState(t,r,n,c),o?(this.currentStates=[],this._normalState={}):r?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!c&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~bn),u}}},e.prototype.useStates=function(t,r,n){if(!t.length)this.clearStates();else{var i=[],o=this.currentStates,a=t.length,s=a===o.length;if(s){for(var l=0;l<a;l++)if(t[l]!==o[l]){s=!1;break}}if(s)return;for(var l=0;l<a;l++){var u=t[l],c=void 0;this.stateProxy&&(c=this.stateProxy(u,t)),c||(c=this.states[u]),c&&i.push(c)}var f=i[a-1],h=!!(f&&f.hoverLayer||n);h&&this._toggleHoverLayerFlag(!0);var d=this._mergeStates(i),p=this.stateTransition;this.saveCurrentToNormalState(d),this._applyStateObj(t.join(","),d,this._normalState,!1,!r&&!this.__inHover&&p&&p.duration>0,p);var v=this._textContent,g=this._textGuide;v&&v.useStates(t,r,h),g&&g.useStates(t,r,h),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!h&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~bn)}},e.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var r=this.animators[t];r.targetName&&r.changeTarget(this[r.targetName])}},e.prototype.removeState=function(t){var r=ce(this.currentStates,t);if(r>=0){var n=this.currentStates.slice();n.splice(r,1),this.useStates(n)}},e.prototype.replaceState=function(t,r,n){var i=this.currentStates.slice(),o=ce(i,t),a=ce(i,r)>=0;o>=0?a?i.splice(o,1):i[o]=r:n&&!a&&i.push(r),this.useStates(i)},e.prototype.toggleState=function(t,r){r?this.useState(t,!0):this.removeState(t)},e.prototype._mergeStates=function(t){for(var r={},n,i=0;i<t.length;i++){var o=t[i];ot(r,o),o.textConfig&&(n=n||{},ot(n,o.textConfig))}return n&&(r.textConfig=n),r},e.prototype._applyStateObj=function(t,r,n,i,o,a){var s=!(r&&i);r&&r.textConfig?(this.textConfig=ot({},i?this.textConfig:n.textConfig),ot(this.textConfig,r.textConfig)):s&&n.textConfig&&(this.textConfig=n.textConfig);for(var l={},u=!1,c=0;c<O_.length;c++){var f=O_[c],h=o&&ZZ[f];r&&r[f]!=null?h?(u=!0,l[f]=r[f]):this[f]=r[f]:s&&n[f]!=null&&(h?(u=!0,l[f]=n[f]):this[f]=n[f])}if(!o)for(var c=0;c<this.animators.length;c++){var d=this.animators[c],p=d.targetName;d.getLoop()||d.__changeFinalValue(p?(r||n)[p]:r||n)}u&&this._transitionState(t,l,a)},e.prototype._attachComponent=function(t){if(!(t.__zr&&!t.__hostTarget)&&t!==this){var r=this.__zr;r&&t.addSelfToZr(r),t.__zr=r,t.__hostTarget=this}},e.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},e.prototype.getClipPath=function(){return this._clipPath},e.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},e.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},e.prototype.getTextContent=function(){return this._textContent},e.prototype.setTextContent=function(t){var r=this._textContent;r!==t&&(r&&r!==t&&this.removeTextContent(),t.innerTransformable=new El,this._attachComponent(t),this._textContent=t,this.markRedraw())},e.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),ot(this.textConfig,t),this.markRedraw()},e.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},e.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},e.prototype.getTextGuideLine=function(){return this._textGuide},e.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},e.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},e.prototype.markRedraw=function(){this.__dirty|=bn;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},e.prototype.dirty=function(){this.markRedraw()},e.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var r=this._textContent,n=this._textGuide;r&&(r.__inHover=t),n&&(n.__inHover=t)},e.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var r=this.animators;if(r)for(var n=0;n<r.length;n++)t.animation.addAnimator(r[n]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){if(!!this.__zr){this.__zr=null;var r=this.animators;if(r)for(var n=0;n<r.length;n++)t.animation.removeAnimator(r[n]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},e.prototype.animate=function(t,r,n){var i=t?this[t]:this,o=new MP(i,r,n);return t&&(o.targetName=t),this.addAnimator(o,t),o},e.prototype.addAnimator=function(t,r){var n=this.__zr,i=this;t.during(function(){i.updateDuringAnimation(r)}).done(function(){var o=i.animators,a=ce(o,t);a>=0&&o.splice(a,1)}),this.animators.push(t),n&&n.animation.addAnimator(t),n&&n.wakeUp()},e.prototype.updateDuringAnimation=function(t){this.markRedraw()},e.prototype.stopAnimation=function(t,r){for(var n=this.animators,i=n.length,o=[],a=0;a<i;a++){var s=n[a];!t||t===s.scope?s.stop(r):o.push(s)}return this.animators=o,this},e.prototype.animateTo=function(t,r,n){R_(this,t,r,n)},e.prototype.animateFrom=function(t,r,n){R_(this,t,r,n,!0)},e.prototype._transitionState=function(t,r,n,i){for(var o=R_(this,r,n,i),a=0;a<o.length;a++)o[a].__fromStateTransition=t},e.prototype.getBoundingRect=function(){return null},e.prototype.getPaintRect=function(){return null},e.initDefaultProps=function(){var t=e.prototype;t.type="element",t.name="",t.ignore=t.silent=t.isGroup=t.draggable=t.dragging=t.ignoreClip=t.__inHover=!1,t.__dirty=bn;function r(n,i,o,a){Object.defineProperty(t,n,{get:function(){if(!this[i]){var l=this[i]=[];s(this,l)}return this[i]},set:function(l){this[o]=l[0],this[a]=l[1],this[i]=l,s(this,l)}});function s(l,u){Object.defineProperty(u,0,{get:function(){return l[o]},set:function(c){l[o]=c}}),Object.defineProperty(u,1,{get:function(){return l[a]},set:function(c){l[a]=c}})}}Object.defineProperty&&(r("position","_legacyPos","x","y"),r("scale","_legacyScale","scaleX","scaleY"),r("origin","_legacyOrigin","originX","originY"))}(),e}();Ri(LP,Di);Ri(LP,El);function R_(e,t,r,n,i){r=r||{};var o=[];i9(e,"",e,t,r,n,o,i);var a=o.length,s=!1,l=r.done,u=r.aborted,c=function(){s=!0,a--,a<=0&&(s?l&&l():u&&u())},f=function(){a--,a<=0&&(s?l&&l():u&&u())};a||l&&l(),o.length>0&&r.during&&o[0].during(function(p,v){r.during(v)});for(var h=0;h<o.length;h++){var d=o[h];c&&d.done(c),f&&d.aborted(f),r.force&&d.duration(r.duration),d.start(r.easing)}return o}function D_(e,t,r){for(var n=0;n<r;n++)e[n]=t[n]}function JZ(e){return Fr(e[0])}function QZ(e,t,r){if(Fr(t[r]))if(Fr(e[r])||(e[r]=[]),An(t[r])){var n=t[r].length;e[r].length!==n&&(e[r]=new t[r].constructor(n),D_(e[r],t[r],n))}else{var i=t[r],o=e[r],a=i.length;if(JZ(i))for(var s=i[0].length,l=0;l<a;l++)o[l]?D_(o[l],i[l],s):o[l]=Array.prototype.slice.call(i[l]);else D_(o,i,a);o.length=i.length}else e[r]=t[r]}function tK(e,t){return e===t||Fr(e)&&Fr(t)&&eK(e,t)}function eK(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function i9(e,t,r,n,i,o,a,s){for(var l=ve(n),u=i.duration,c=i.delay,f=i.additive,h=i.setToFinal,d=!It(o),p=e.animators,v=[],g=0;g<l.length;g++){var m=l[g],y=n[m];if(y!=null&&r[m]!=null&&(d||o[m]))if(It(y)&&!Fr(y)&&!N1(y)){if(t){s||(r[m]=y,e.updateDuringAnimation(t));continue}i9(e,m,r[m],y,i,o&&o[m],a,s)}else v.push(m);else s||(r[m]=y,e.updateDuringAnimation(t),v.push(m))}var _=v.length;if(!f&&_)for(var b=0;b<p.length;b++){var T=p[b];if(T.targetName===t){var S=T.stopTracks(v);if(S){var P=ce(p,T);p.splice(P,1)}}}if(i.force||(v=yr(v,function(k){return!tK(n[k],r[k])}),_=v.length),_>0||i.force&&!a.length){var C=void 0,A=void 0,M=void 0;if(s){A={},h&&(C={});for(var b=0;b<_;b++){var m=v[b];A[m]=r[m],h?C[m]=n[m]:r[m]=n[m]}}else if(h){M={};for(var b=0;b<_;b++){var m=v[b];M[m]=dd(r[m]),QZ(r,n,m)}}var T=new MP(r,!1,!1,f?yr(p,function(O){return O.targetName===t}):null);T.targetName=t,i.scope&&(T.scope=i.scope),h&&C&&T.whenWithKeys(0,C,v),M&&T.whenWithKeys(0,M,v),T.whenWithKeys(u==null?500:u,s?A:n,v).delay(c||0),e.addAnimator(T,t),a.push(T)}}const o9=LP;var a9=function(e){Ee(t,e);function t(r){var n=e.call(this)||this;return n.isGroup=!0,n._children=[],n.attr(r),n}return t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(r){return this._children[r]},t.prototype.childOfName=function(r){for(var n=this._children,i=0;i<n.length;i++)if(n[i].name===r)return n[i]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(r){return r&&r!==this&&r.parent!==this&&(this._children.push(r),this._doAdd(r)),this},t.prototype.addBefore=function(r,n){if(r&&r!==this&&r.parent!==this&&n&&n.parent===this){var i=this._children,o=i.indexOf(n);o>=0&&(i.splice(o,0,r),this._doAdd(r))}return this},t.prototype.replace=function(r,n){var i=ce(this._children,r);return i>=0&&this.replaceAt(n,i),this},t.prototype.replaceAt=function(r,n){var i=this._children,o=i[n];if(r&&r!==this&&r.parent!==this&&r!==o){i[n]=r,o.parent=null;var a=this.__zr;a&&o.removeSelfFromZr(a),this._doAdd(r)}return this},t.prototype._doAdd=function(r){r.parent&&r.parent.remove(r),r.parent=this;var n=this.__zr;n&&n!==r.__zr&&r.addSelfToZr(n),n&&n.refresh()},t.prototype.remove=function(r){var n=this.__zr,i=this._children,o=ce(i,r);return o<0?this:(i.splice(o,1),r.parent=null,n&&r.removeSelfFromZr(n),n&&n.refresh(),this)},t.prototype.removeAll=function(){for(var r=this._children,n=this.__zr,i=0;i<r.length;i++){var o=r[i];n&&o.removeSelfFromZr(n),o.parent=null}return r.length=0,this},t.prototype.eachChild=function(r,n){for(var i=this._children,o=0;o<i.length;o++){var a=i[o];r.call(n,a,o)}return this},t.prototype.traverse=function(r,n){for(var i=0;i<this._children.length;i++){var o=this._children[i],a=r.call(n,o);o.isGroup&&!a&&o.traverse(r,n)}return this},t.prototype.addSelfToZr=function(r){e.prototype.addSelfToZr.call(this,r);for(var n=0;n<this._children.length;n++){var i=this._children[n];i.addSelfToZr(r)}},t.prototype.removeSelfFromZr=function(r){e.prototype.removeSelfFromZr.call(this,r);for(var n=0;n<this._children.length;n++){var i=this._children[n];i.removeSelfFromZr(r)}},t.prototype.getBoundingRect=function(r){for(var n=new ae(0,0,0,0),i=r||this._children,o=[],a=null,s=0;s<i.length;s++){var l=i[s];if(!(l.ignore||l.invisible)){var u=l.getBoundingRect(),c=l.getLocalTransform(o);c?(ae.applyTransform(n,u,c),a=a||n.clone(),a.union(n)):(a=a||u.clone(),a.union(u))}}return a||n},t}(o9);a9.prototype.type="group";const De=a9;/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var Dg={},s9={};function rK(e){delete s9[e]}function nK(e){if(!e)return!1;if(typeof e=="string")return Pm(e,1)<xS;if(e.colorStops){for(var t=e.colorStops,r=0,n=t.length,i=0;i<n;i++)r+=Pm(t[i].color,1);return r/=n,r<xS}return!1}var iK=function(){function e(t,r,n){var i=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,n=n||{},this.dom=r,this.id=t;var o=new gZ,a=n.renderer||"canvas";Dg[a]||(a=ve(Dg)[0]),n.useDirtyRect=n.useDirtyRect==null?!1:n.useDirtyRect;var s=new Dg[a](r,o,n,t),l=n.ssr||s.ssrOnly;this.storage=o,this.painter=s;var u=!Xt.node&&!Xt.worker&&!l?new XZ(s.getViewportRoot(),s.root):null,c=n.useCoarsePointer,f=c==null||c==="auto"?Xt.touchEventsSupported:!!c,h=44,d;f&&(d=qt(n.pointerSize,h)),this.handler=new fZ(o,s,u,s.root,d),this.animation=new $Z({stage:{update:l?null:function(){return i._flush(!0)}}}),l||this.animation.start()}return e.prototype.add=function(t){!t||(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},e.prototype.remove=function(t){!t||(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},e.prototype.configLayer=function(t,r){this.painter.configLayer&&this.painter.configLayer(t,r),this.refresh()},e.prototype.setBackgroundColor=function(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=nK(t)},e.prototype.getBackgroundColor=function(){return this._backgroundColor},e.prototype.setDarkMode=function(t){this._darkMode=t},e.prototype.isDarkMode=function(){return this._darkMode},e.prototype.refreshImmediately=function(t){t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},e.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},e.prototype.flush=function(){this._flush(!1)},e.prototype._flush=function(t){var r,n=pc();this._needsRefresh&&(r=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(r=!0,this.refreshHoverImmediately());var i=pc();r?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:i-n})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},e.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},e.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},e.prototype.refreshHover=function(){this._needsRefreshHover=!0},e.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover()},e.prototype.resize=function(t){t=t||{},this.painter.resize(t.width,t.height),this.handler.resize()},e.prototype.clearAnimation=function(){this.animation.clear()},e.prototype.getWidth=function(){return this.painter.getWidth()},e.prototype.getHeight=function(){return this.painter.getHeight()},e.prototype.setCursorStyle=function(t){this.handler.setCursorStyle(t)},e.prototype.findHover=function(t,r){return this.handler.findHover(t,r)},e.prototype.on=function(t,r,n){return this.handler.on(t,r,n),this},e.prototype.off=function(t,r){this.handler.off(t,r)},e.prototype.trigger=function(t,r){this.handler.trigger(t,r)},e.prototype.clear=function(){for(var t=this.storage.getRoots(),r=0;r<t.length;r++)t[r]instanceof De&&t[r].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},e.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,rK(this.id)},e}();function sk(e,t){var r=new iK(R7(),e,t);return s9[r.id]=r,r}function oK(e,t){Dg[e]=t}var lk=1e-4,l9=20;function aK(e){return e.replace(/^\s+|\s+$/g,"")}function la(e,t,r,n){var i=t[0],o=t[1],a=r[0],s=r[1],l=o-i,u=s-a;if(l===0)return u===0?a:(a+s)/2;if(n)if(l>0){if(e<=i)return a;if(e>=o)return s}else{if(e>=i)return a;if(e<=o)return s}else{if(e===i)return a;if(e===o)return s}return(e-i)/l*u+a}function We(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%";break}return Et(e)?aK(e).match(/%$/)?parseFloat(e)/100*t:parseFloat(e):e==null?NaN:+e}function qe(e,t,r){return t==null&&(t=10),t=Math.min(Math.max(0,t),l9),e=(+e).toFixed(t),r?e:+e}function Cm(e){return e.sort(function(t,r){return t-r}),e}function vo(e){if(e=+e,isNaN(e))return 0;if(e>1e-14){for(var t=1,r=0;r<15;r++,t*=10)if(Math.round(e*t)/t===e)return r}return sK(e)}function sK(e){var t=e.toString().toLowerCase(),r=t.indexOf("e"),n=r>0?+t.slice(r+1):0,i=r>0?r:t.length,o=t.indexOf("."),a=o<0?0:i-1-o;return Math.max(0,a-n)}function lK(e,t){var r=Math.log,n=Math.LN10,i=Math.floor(r(e[1]-e[0])/n),o=Math.round(r(Math.abs(t[1]-t[0]))/n),a=Math.min(Math.max(-i+o,0),20);return isFinite(a)?a:20}function uK(e,t){var r=Math.max(vo(e),vo(t)),n=e+t;return r>l9?n:qe(n,r)}function u9(e){var t=Math.PI*2;return(e%t+t)%t}function Mm(e){return e>-lk&&e<lk}var cK=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function ua(e){if(e instanceof Date)return e;if(Et(e)){var t=cK.exec(e);if(!t)return new Date(NaN);if(t[8]){var r=+t[4]||0;return t[8].toUpperCase()!=="Z"&&(r-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,r,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0))}else return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0)}else if(e==null)return new Date(NaN);return new Date(Math.round(e))}function fK(e){return Math.pow(10,IP(e))}function IP(e){if(e===0)return 0;var t=Math.floor(Math.log(e)/Math.LN10);return e/Math.pow(10,t)>=10&&t++,t}function c9(e,t){var r=IP(e),n=Math.pow(10,r),i=e/n,o;return t?i<1.5?o=1:i<2.5?o=2:i<4?o=3:i<7?o=5:o=10:i<1?o=1:i<2?o=2:i<3?o=3:i<5?o=5:o=10,e=o*n,r>=-20?+e.toFixed(r<0?-r:0):e}function uk(e){e.sort(function(l,u){return s(l,u,0)?-1:1});for(var t=-1/0,r=1,n=0;n<e.length;){for(var i=e[n].interval,o=e[n].close,a=0;a<2;a++)i[a]<=t&&(i[a]=t,o[a]=a?1:1-r),t=i[a],r=o[a];i[0]===i[1]&&o[0]*o[1]!==1?e.splice(n,1):n++}return e;function s(l,u,c){return l.interval[c]<u.interval[c]||l.interval[c]===u.interval[c]&&(l.close[c]-u.close[c]===(c?-1:1)||!c&&s(l,u,1))}}function Ss(e){var t=parseFloat(e);return t==e&&(t!==0||!Et(e)||e.indexOf("x")<=0)?t:NaN}function hK(e){return!isNaN(Ss(e))}function f9(){return Math.round(Math.random()*9)}function h9(e,t){return t===0?e:h9(t,e%t)}function ck(e,t){return e==null?t:t==null?e:e*t/h9(e,t)}function ne(e){throw new Error(e)}function fk(e,t,r){return(t-e)*r+e}var d9="series\0",dK="\0_ec_\0";function Ze(e){return e instanceof Array?e:e==null?[]:[e]}function OS(e,t,r){if(e){e[t]=e[t]||{},e.emphasis=e.emphasis||{},e.emphasis[t]=e.emphasis[t]||{};for(var n=0,i=r.length;n<i;n++){var o=r[n];!e.emphasis[t].hasOwnProperty(o)&&e[t].hasOwnProperty(o)&&(e.emphasis[t][o]=e[t][o])}}}var hk=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function A0(e){return It(e)&&!ut(e)&&!(e instanceof Date)?e.value:e}function pK(e){return It(e)&&!(e instanceof Array)}function vK(e,t,r){var n=r==="normalMerge",i=r==="replaceMerge",o=r==="replaceAll";e=e||[],t=(t||[]).slice();var a=jt();N(t,function(l,u){if(!It(l)){t[u]=null;return}});var s=gK(e,a,r);return(n||i)&&mK(s,e,a,t),n&&yK(s,t),n||i?_K(s,t,i):o&&bK(s,t),wK(s),s}function gK(e,t,r){var n=[];if(r==="replaceAll")return n;for(var i=0;i<e.length;i++){var o=e[i];o&&o.id!=null&&t.set(o.id,i),n.push({existing:r==="replaceMerge"||Gd(o)?null:o,newOption:null,keyInfo:null,brandNew:null})}return n}function mK(e,t,r,n){N(n,function(i,o){if(!(!i||i.id==null)){var a=pd(i.id),s=r.get(a);if(s!=null){var l=e[s];xi(!l.newOption,'Duplicated option on id "'+a+'".'),l.newOption=i,l.existing=t[s],n[o]=null}}})}function yK(e,t){N(t,function(r,n){if(!(!r||r.name==null))for(var i=0;i<e.length;i++){var o=e[i].existing;if(!e[i].newOption&&o&&(o.id==null||r.id==null)&&!Gd(r)&&!Gd(o)&&p9("name",o,r)){e[i].newOption=r,t[n]=null;return}}})}function _K(e,t,r){N(t,function(n){if(!!n){for(var i,o=0;(i=e[o])&&(i.newOption||Gd(i.existing)||i.existing&&n.id!=null&&!p9("id",n,i.existing));)o++;i?(i.newOption=n,i.brandNew=r):e.push({newOption:n,brandNew:r,existing:null,keyInfo:null}),o++}})}function bK(e,t){N(t,function(r){e.push({newOption:r,brandNew:!0,existing:null,keyInfo:null})})}function wK(e){var t=jt();N(e,function(r){var n=r.existing;n&&t.set(n.id,r)}),N(e,function(r){var n=r.newOption;xi(!n||n.id==null||!t.get(n.id)||t.get(n.id)===r,"id duplicates: "+(n&&n.id)),n&&n.id!=null&&t.set(n.id,r),!r.keyInfo&&(r.keyInfo={})}),N(e,function(r,n){var i=r.existing,o=r.newOption,a=r.keyInfo;if(!!It(o)){if(a.name=o.name!=null?pd(o.name):i?i.name:d9+n,i)a.id=pd(i.id);else if(o.id!=null)a.id=pd(o.id);else{var s=0;do a.id="\0"+a.name+"\0"+s++;while(t.get(a.id))}t.set(a.id,r)}})}function p9(e,t,r){var n=Xn(t[e],null),i=Xn(r[e],null);return n!=null&&i!=null&&n===i}function pd(e){return Xn(e,"")}function Xn(e,t){return e==null?t:Et(e)?e:be(e)||pS(e)?e+"":t}function OP(e){var t=e.name;return!!(t&&t.indexOf(d9))}function Gd(e){return e&&e.id!=null&&pd(e.id).indexOf(dK)===0}function SK(e,t,r){N(e,function(n){var i=n.newOption;It(i)&&(n.keyInfo.mainType=t,n.keyInfo.subType=TK(t,i,n.existing,r))})}function TK(e,t,r,n){var i=t.type?t.type:r?r.subType:n.determineSubType(e,t);return i}function PK(e,t){var r={},n={};return i(e||[],r),i(t||[],n,r),[o(r),o(n)];function i(a,s,l){for(var u=0,c=a.length;u<c;u++){var f=Xn(a[u].seriesId,null);if(f==null)return;for(var h=Ze(a[u].dataIndex),d=l&&l[f],p=0,v=h.length;p<v;p++){var g=h[p];d&&d[g]?d[g]=null:(s[f]||(s[f]={}))[g]=1}}}function o(a,s){var l=[];for(var u in a)if(a.hasOwnProperty(u)&&a[u]!=null)if(s)l.push(+u);else{var c=o(a[u],!0);c.length&&l.push({seriesId:u,dataIndex:c})}return l}}function Xl(e,t){if(t.dataIndexInside!=null)return t.dataIndexInside;if(t.dataIndex!=null)return ut(t.dataIndex)?Ct(t.dataIndex,function(r){return e.indexOfRawIndex(r)}):e.indexOfRawIndex(t.dataIndex);if(t.name!=null)return ut(t.name)?Ct(t.name,function(r){return e.indexOfName(r)}):e.indexOfName(t.name)}function Oe(){var e="__ec_inner_"+EK++;return function(t){return t[e]||(t[e]={})}}var EK=f9();function N_(e,t,r){var n=RP(t,r),i=n.mainTypeSpecified,o=n.queryOptionMap,a=n.others,s=a,l=r?r.defaultMainType:null;return!i&&l&&o.set(l,{}),o.each(function(u,c){var f=C0(e,c,u,{useDefault:l===c,enableAll:r&&r.enableAll!=null?r.enableAll:!0,enableNone:r&&r.enableNone!=null?r.enableNone:!0});s[c+"Models"]=f.models,s[c+"Model"]=f.models[0]}),s}function RP(e,t){var r;if(Et(e)){var n={};n[e+"Index"]=0,r=n}else r=e;var i=jt(),o={},a=!1;return N(r,function(s,l){if(l==="dataIndex"||l==="dataIndexInside"){o[l]=s;return}var u=l.match(/^(\w+)(Index|Id|Name)$/)||[],c=u[1],f=(u[2]||"").toLowerCase();if(!(!c||!f||t&&t.includeMainTypes&&ce(t.includeMainTypes,c)<0)){a=a||!!c;var h=i.get(c)||i.set(c,{});h[f]=s}}),{mainTypeSpecified:a,queryOptionMap:i,others:o}}var _i={useDefault:!0,enableAll:!1,enableNone:!1};function C0(e,t,r,n){n=n||_i;var i=r.index,o=r.id,a=r.name,s={models:null,specified:i!=null||o!=null||a!=null};if(!s.specified){var l=void 0;return s.models=n.useDefault&&(l=e.getComponent(t))?[l]:[],s}return i==="none"||i===!1?(xi(n.enableNone,'`"none"` or `false` is not a valid value on index option.'),s.models=[],s):(i==="all"&&(xi(n.enableAll,'`"all"` is not a valid value on index option.'),i=o=a=null),s.models=e.queryComponents({mainType:t,index:i,id:o,name:a}),s)}function v9(e,t,r){e.setAttribute?e.setAttribute(t,r):e[t]=r}function AK(e,t){return e.getAttribute?e.getAttribute(t):e[t]}function CK(e){return e==="auto"?Xt.domSupported?"html":"richText":e||"html"}function MK(e,t,r,n,i){var o=t==null||t==="auto";if(n==null)return n;if(be(n)){var a=fk(r||0,n,i);return qe(a,o?Math.max(vo(r||0),vo(n)):t)}else{if(Et(n))return i<1?r:n;for(var s=[],l=r,u=n,c=Math.max(l?l.length:0,u.length),f=0;f<c;++f){var h=e.getDimensionInfo(f);if(h&&h.type==="ordinal")s[f]=(i<1&&l?l:u)[f];else{var d=l&&l[f]?l[f]:0,p=u[f],a=fk(d,p,i);s[f]=qe(a,o?Math.max(vo(d),vo(p)):t)}}return s}}var kK=".",Ys="___EC__COMPONENT__CONTAINER___",g9="___EC__EXTENDED_CLASS___";function go(e){var t={main:"",sub:""};if(e){var r=e.split(kK);t.main=r[0]||"",t.sub=r[1]||""}return t}function xK(e){xi(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(e),'componentType "'+e+'" illegal')}function LK(e){return!!(e&&e[g9])}function DP(e,t){e.$constructor=e,e.extend=function(r){var n=this,i;return IK(n)?i=function(o){mt(a,o);function a(){return o.apply(this,arguments)||this}return a}(n):(i=function(){(r.$constructor||n).apply(this,arguments)},kq(i,this)),ot(i.prototype,r),i[g9]=!0,i.extend=this.extend,i.superCall=DK,i.superApply=NK,i.superClass=n,i}}function IK(e){return Ut(e)&&/^class\s/.test(Function.prototype.toString.call(e))}function m9(e,t){e.extend=t.extend}var OK=Math.round(Math.random()*10);function RK(e){var t=["__\0is_clz",OK++].join("_");e.prototype[t]=!0,e.isInstance=function(r){return!!(r&&r[t])}}function DK(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return this.superClass.prototype[t].apply(e,r)}function NK(e,t,r){return this.superClass.prototype[t].apply(e,r)}function $1(e){var t={};e.registerClass=function(n){var i=n.type||n.prototype.type;if(i){xK(i),n.prototype.type=i;var o=go(i);if(!o.sub)t[o.main]=n;else if(o.sub!==Ys){var a=r(o);a[o.sub]=n}}return n},e.getClass=function(n,i,o){var a=t[n];if(a&&a[Ys]&&(a=i?a[i]:null),o&&!a)throw new Error(i?"Component "+n+"."+(i||"")+" is used but not imported.":n+".type should be specified.");return a},e.getClassesByMainType=function(n){var i=go(n),o=[],a=t[i.main];return a&&a[Ys]?N(a,function(s,l){l!==Ys&&o.push(s)}):o.push(a),o},e.hasClass=function(n){var i=go(n);return!!t[i.main]},e.getAllClassMainTypes=function(){var n=[];return N(t,function(i,o){n.push(o)}),n},e.hasSubTypes=function(n){var i=go(n),o=t[i.main];return o&&o[Ys]};function r(n){var i=t[n.main];return(!i||!i[Ys])&&(i=t[n.main]={},i[Ys]=!0),i}}function jd(e,t){for(var r=0;r<e.length;r++)e[r][1]||(e[r][1]=e[r][0]);return t=t||!1,function(n,i,o){for(var a={},s=0;s<e.length;s++){var l=e[s][1];if(!(i&&ce(i,l)>=0||o&&ce(o,l)<0)){var u=n.getShallow(l,t);u!=null&&(a[e[s][0]]=u)}}return a}}var FK=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],BK=jd(FK),$K=function(){function e(){}return e.prototype.getAreaStyle=function(t,r){return BK(this,t,r)},e}(),RS=new E0(50);function zK(e){if(typeof e=="string"){var t=RS.get(e);return t&&t.image}else return e}function y9(e,t,r,n,i){if(e)if(typeof e=="string"){if(t&&t.__zrImageSrc===e||!r)return t;var o=RS.get(e),a={hostEl:r,cb:n,cbPayload:i};return o?(t=o.image,!z1(t)&&o.pending.push(a)):(t=ou.loadImage(e,dk,dk),t.__zrImageSrc=e,RS.put(e,t.__cachedImgObj={image:t,pending:[a]})),t}else return e;else return t}function dk(){var e=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<e.pending.length;t++){var r=e.pending[t],n=r.cb;n&&n(this,r.cbPayload),r.hostEl.dirty()}e.pending.length=0}function z1(e){return e&&e.width&&e.height}var F_=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function VK(e,t,r,n,i){if(!t)return"";var o=(e+"").split(`
`);i=_9(t,r,n,i);for(var a=0,s=o.length;a<s;a++)o[a]=b9(o[a],i);return o.join(`
`)}function _9(e,t,r,n){n=n||{};var i=ot({},n);i.font=t,r=qt(r,"..."),i.maxIterations=qt(n.maxIterations,2);var o=i.minChar=qt(n.minChar,0);i.cnCharWidth=Tn("\u56FD",t);var a=i.ascCharWidth=Tn("a",t);i.placeholder=qt(n.placeholder,"");for(var s=e=Math.max(0,e-1),l=0;l<o&&s>=a;l++)s-=a;var u=Tn(r,t);return u>s&&(r="",u=0),s=e-u,i.ellipsis=r,i.ellipsisWidth=u,i.contentWidth=s,i.containerWidth=e,i}function b9(e,t){var r=t.containerWidth,n=t.font,i=t.contentWidth;if(!r)return"";var o=Tn(e,n);if(o<=r)return e;for(var a=0;;a++){if(o<=i||a>=t.maxIterations){e+=t.ellipsis;break}var s=a===0?UK(e,i,t.ascCharWidth,t.cnCharWidth):o>0?Math.floor(e.length*i/o):0;e=e.substr(0,s),o=Tn(e,n)}return e===""&&(e=t.placeholder),e}function UK(e,t,r,n){for(var i=0,o=0,a=e.length;o<a&&i<t;o++){var s=e.charCodeAt(o);i+=0<=s&&s<=127?r:n}return o}function GK(e,t){e!=null&&(e+="");var r=t.overflow,n=t.padding,i=t.font,o=r==="truncate",a=xP(i),s=qt(t.lineHeight,a),l=!!t.backgroundColor,u=t.lineOverflow==="truncate",c=t.width,f;c!=null&&(r==="break"||r==="breakAll")?f=e?w9(e,t.font,c,r==="breakAll",0).lines:[]:f=e?e.split(`
`):[];var h=f.length*s,d=qt(t.height,h);if(h>d&&u){var p=Math.floor(d/s);f=f.slice(0,p)}if(e&&o&&c!=null)for(var v=_9(c,i,t.ellipsis,{minChar:t.truncateMinChar,placeholder:t.placeholder}),g=0;g<f.length;g++)f[g]=b9(f[g],v);for(var m=d,y=0,g=0;g<f.length;g++)y=Math.max(Tn(f[g],i),y);c==null&&(c=y);var _=y;return n&&(m+=n[0]+n[2],_+=n[1]+n[3],c+=n[1]+n[3]),l&&(_=c),{lines:f,height:d,outerWidth:_,outerHeight:m,lineHeight:s,calculatedLineHeight:a,contentWidth:y,contentHeight:h,width:c}}var jK=function(){function e(){}return e}(),pk=function(){function e(t){this.tokens=[],t&&(this.tokens=t)}return e}(),WK=function(){function e(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return e}();function HK(e,t){var r=new WK;if(e!=null&&(e+=""),!e)return r;for(var n=t.width,i=t.height,o=t.overflow,a=(o==="break"||o==="breakAll")&&n!=null?{width:n,accumWidth:0,breakAll:o==="breakAll"}:null,s=F_.lastIndex=0,l;(l=F_.exec(e))!=null;){var u=l.index;u>s&&B_(r,e.substring(s,u),t,a),B_(r,l[2],t,a,l[1]),s=F_.lastIndex}s<e.length&&B_(r,e.substring(s,e.length),t,a);var c=[],f=0,h=0,d=t.padding,p=o==="truncate",v=t.lineOverflow==="truncate";function g(q,tt,Pt){q.width=tt,q.lineHeight=Pt,f+=Pt,h=Math.max(h,tt)}t:for(var m=0;m<r.lines.length;m++){for(var y=r.lines[m],_=0,b=0,T=0;T<y.tokens.length;T++){var S=y.tokens[T],P=S.styleName&&t.rich[S.styleName]||{},C=S.textPadding=P.padding,A=C?C[1]+C[3]:0,M=S.font=P.font||t.font;S.contentHeight=xP(M);var k=qt(P.height,S.contentHeight);if(S.innerHeight=k,C&&(k+=C[0]+C[2]),S.height=k,S.lineHeight=fd(P.lineHeight,t.lineHeight,k),S.align=P&&P.align||t.align,S.verticalAlign=P&&P.verticalAlign||"middle",v&&i!=null&&f+S.lineHeight>i){T>0?(y.tokens=y.tokens.slice(0,T),g(y,b,_),r.lines=r.lines.slice(0,m+1)):r.lines=r.lines.slice(0,m);break t}var O=P.width,F=O==null||O==="auto";if(typeof O=="string"&&O.charAt(O.length-1)==="%")S.percentWidth=O,c.push(S),S.contentWidth=Tn(S.text,M);else{if(F){var z=P.backgroundColor,R=z&&z.image;R&&(R=zK(R),z1(R)&&(S.width=Math.max(S.width,R.width*k/R.height)))}var j=p&&n!=null?n-b:null;j!=null&&j<S.width?!F||j<A?(S.text="",S.width=S.contentWidth=0):(S.text=VK(S.text,j-A,M,t.ellipsis,{minChar:t.truncateMinChar}),S.width=S.contentWidth=Tn(S.text,M)):S.contentWidth=Tn(S.text,M)}S.width+=A,b+=S.width,P&&(_=Math.max(_,S.lineHeight))}g(y,b,_)}r.outerWidth=r.width=qt(n,h),r.outerHeight=r.height=qt(i,f),r.contentHeight=f,r.contentWidth=h,d&&(r.outerWidth+=d[1]+d[3],r.outerHeight+=d[0]+d[2]);for(var m=0;m<c.length;m++){var S=c[m],Z=S.percentWidth;S.width=parseInt(Z,10)/100*r.width}return r}function B_(e,t,r,n,i){var o=t==="",a=i&&r.rich[i]||{},s=e.lines,l=a.font||r.font,u=!1,c,f;if(n){var h=a.padding,d=h?h[1]+h[3]:0;if(a.width!=null&&a.width!=="auto"){var p=sa(a.width,n.width)+d;s.length>0&&p+n.accumWidth>n.width&&(c=t.split(`
`),u=!0),n.accumWidth=p}else{var v=w9(t,l,n.width,n.breakAll,n.accumWidth);n.accumWidth=v.accumWidth+d,f=v.linesWidths,c=v.lines}}else c=t.split(`
`);for(var g=0;g<c.length;g++){var m=c[g],y=new jK;if(y.styleName=i,y.text=m,y.isLineHolder=!m&&!o,typeof a.width=="number"?y.width=a.width:y.width=f?f[g]:Tn(m,l),!g&&!u){var _=(s[s.length-1]||(s[0]=new pk)).tokens,b=_.length;b===1&&_[0].isLineHolder?_[0]=y:(m||!b||o)&&_.push(y)}else s.push(new pk([y]))}}function XK(e){var t=e.charCodeAt(0);return t>=33&&t<=383}var YK=au(",&?/;] ".split(""),function(e,t){return e[t]=!0,e},{});function qK(e){return XK(e)?!!YK[e]:!0}function w9(e,t,r,n,i){for(var o=[],a=[],s="",l="",u=0,c=0,f=0;f<e.length;f++){var h=e.charAt(f);if(h===`
`){l&&(s+=l,c+=u),o.push(s),a.push(c),s="",l="",u=0,c=0;continue}var d=Tn(h,t),p=n?!1:!qK(h);if(o.length?c+d>r:i+c+d>r){c?(s||l)&&(p?(s||(s=l,l="",u=0,c=u),o.push(s),a.push(c-u),l+=h,u+=d,s="",c=u):(l&&(s+=l,l="",u=0),o.push(s),a.push(c),s=h,c=d)):p?(o.push(l),a.push(u),l=h,u=d):(o.push(h),a.push(d));continue}c+=d,p?(l+=h,u+=d):(l&&(s+=l,l="",u=0),s+=h)}return!o.length&&!s&&(s=e,l="",u=0),l&&(s+=l),s&&(o.push(s),a.push(c)),o.length===1&&(c+=i),{accumWidth:c,lines:o,linesWidths:a}}var DS="__zr_style_"+Math.round(Math.random()*10),Dl={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},V1={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};Dl[DS]=!0;var vk=["z","z2","invisible"],ZK=["invisible"],KK=function(e){Ee(t,e);function t(r){return e.call(this,r)||this}return t.prototype._init=function(r){for(var n=ve(r),i=0;i<n.length;i++){var o=n[i];o==="style"?this.useStyle(r[o]):e.prototype.attrKV.call(this,o,r[o])}this.style||this.useStyle({})},t.prototype.beforeBrush=function(){},t.prototype.afterBrush=function(){},t.prototype.innerBeforeBrush=function(){},t.prototype.innerAfterBrush=function(){},t.prototype.shouldBePainted=function(r,n,i,o){var a=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&JK(this,r,n)||a&&!a[0]&&!a[3])return!1;if(i&&this.__clipPaths){for(var s=0;s<this.__clipPaths.length;++s)if(this.__clipPaths[s].isZeroArea())return!1}if(o&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},t.prototype.contain=function(r,n){return this.rectContain(r,n)},t.prototype.traverse=function(r,n){r.call(n,this)},t.prototype.rectContain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect();return o.contain(i[0],i[1])},t.prototype.getPaintRect=function(){var r=this._paintRect;if(!this._paintRect||this.__dirty){var n=this.transform,i=this.getBoundingRect(),o=this.style,a=o.shadowBlur||0,s=o.shadowOffsetX||0,l=o.shadowOffsetY||0;r=this._paintRect||(this._paintRect=new ae(0,0,0,0)),n?ae.applyTransform(r,i,n):r.copy(i),(a||s||l)&&(r.width+=a*2+Math.abs(s),r.height+=a*2+Math.abs(l),r.x=Math.min(r.x,r.x+s-a),r.y=Math.min(r.y,r.y+l-a));var u=this.dirtyRectTolerance;r.isZero()||(r.x=Math.floor(r.x-u),r.y=Math.floor(r.y-u),r.width=Math.ceil(r.width+1+u*2),r.height=Math.ceil(r.height+1+u*2))}return r},t.prototype.setPrevPaintRect=function(r){r?(this._prevPaintRect=this._prevPaintRect||new ae(0,0,0,0),this._prevPaintRect.copy(r)):this._prevPaintRect=null},t.prototype.getPrevPaintRect=function(){return this._prevPaintRect},t.prototype.animateStyle=function(r){return this.animate("style",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():this.markRedraw()},t.prototype.attrKV=function(r,n){r!=="style"?e.prototype.attrKV.call(this,r,n):this.style?this.setStyle(n):this.useStyle(n)},t.prototype.setStyle=function(r,n){return typeof r=="string"?this.style[r]=n:ot(this.style,r),this.dirtyStyle(),this},t.prototype.dirtyStyle=function(r){r||this.markRedraw(),this.__dirty|=Gh,this._rect&&(this._rect=null)},t.prototype.dirty=function(){this.dirtyStyle()},t.prototype.styleChanged=function(){return!!(this.__dirty&Gh)},t.prototype.styleUpdated=function(){this.__dirty&=~Gh},t.prototype.createStyle=function(r){return F1(Dl,r)},t.prototype.useStyle=function(r){r[DS]||(r=this.createStyle(r)),this.__inHover?this.__hoverStyle=r:this.style=r,this.dirtyStyle()},t.prototype.isStyleObject=function(r){return r[DS]},t.prototype._innerSaveToNormal=function(r){e.prototype._innerSaveToNormal.call(this,r);var n=this._normalState;r.style&&!n.style&&(n.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(r,n,vk)},t.prototype._applyStateObj=function(r,n,i,o,a,s){e.prototype._applyStateObj.call(this,r,n,i,o,a,s);var l=!(n&&o),u;if(n&&n.style?a?o?u=n.style:(u=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(u,n.style)):(u=this._mergeStyle(this.createStyle(),o?this.style:i.style),this._mergeStyle(u,n.style)):l&&(u=i.style),u)if(a){var c=this.style;if(this.style=this.createStyle(l?{}:c),l)for(var f=ve(c),h=0;h<f.length;h++){var d=f[h];d in u&&(u[d]=u[d],this.style[d]=c[d])}for(var p=ve(u),h=0;h<p.length;h++){var d=p[h];this.style[d]=this.style[d]}this._transitionState(r,{style:u},s,this.getAnimationStyleProps())}else this.useStyle(u);for(var v=this.__inHover?ZK:vk,h=0;h<v.length;h++){var d=v[h];n&&n[d]!=null?this[d]=n[d]:l&&i[d]!=null&&(this[d]=i[d])}},t.prototype._mergeStates=function(r){for(var n=e.prototype._mergeStates.call(this,r),i,o=0;o<r.length;o++){var a=r[o];a.style&&(i=i||{},this._mergeStyle(i,a.style))}return i&&(n.style=i),n},t.prototype._mergeStyle=function(r,n){return ot(r,n),r},t.prototype.getAnimationStyleProps=function(){return V1},t.initDefaultProps=function(){var r=t.prototype;r.type="displayable",r.invisible=!1,r.z=0,r.z2=0,r.zlevel=0,r.culling=!1,r.cursor="pointer",r.rectHover=!1,r.incremental=!1,r._rect=null,r.dirtyRectTolerance=0,r.__dirty=bn|Gh}(),t}(o9),$_=new ae(0,0,0,0),z_=new ae(0,0,0,0);function JK(e,t,r){return $_.copy(e.getBoundingRect()),e.transform&&$_.applyTransform(e.transform),z_.width=t,z_.height=r,!$_.intersect(z_)}const su=KK;var en=Math.min,rn=Math.max,V_=Math.sin,U_=Math.cos,qs=Math.PI*2,Ep=sf(),Ap=sf(),Cp=sf();function QK(e,t,r){if(e.length!==0){for(var n=e[0],i=n[0],o=n[0],a=n[1],s=n[1],l=1;l<e.length;l++)n=e[l],i=en(i,n[0]),o=rn(o,n[0]),a=en(a,n[1]),s=rn(s,n[1]);t[0]=i,t[1]=a,r[0]=o,r[1]=s}}function gk(e,t,r,n,i,o){i[0]=en(e,r),i[1]=en(t,n),o[0]=rn(e,r),o[1]=rn(t,n)}var mk=[],yk=[];function tJ(e,t,r,n,i,o,a,s,l,u){var c=Z7,f=or,h=c(e,r,i,a,mk);l[0]=1/0,l[1]=1/0,u[0]=-1/0,u[1]=-1/0;for(var d=0;d<h;d++){var p=f(e,r,i,a,mk[d]);l[0]=en(p,l[0]),u[0]=rn(p,u[0])}h=c(t,n,o,s,yk);for(var d=0;d<h;d++){var v=f(t,n,o,s,yk[d]);l[1]=en(v,l[1]),u[1]=rn(v,u[1])}l[0]=en(e,l[0]),u[0]=rn(e,u[0]),l[0]=en(a,l[0]),u[0]=rn(a,u[0]),l[1]=en(t,l[1]),u[1]=rn(t,u[1]),l[1]=en(s,l[1]),u[1]=rn(s,u[1])}function eJ(e,t,r,n,i,o,a,s){var l=K7,u=kr,c=rn(en(l(e,r,i),1),0),f=rn(en(l(t,n,o),1),0),h=u(e,r,i,c),d=u(t,n,o,f);a[0]=en(e,i,h),a[1]=en(t,o,d),s[0]=rn(e,i,h),s[1]=rn(t,o,d)}function rJ(e,t,r,n,i,o,a,s,l){var u=hc,c=dc,f=Math.abs(i-o);if(f%qs<1e-4&&f>1e-4){s[0]=e-r,s[1]=t-n,l[0]=e+r,l[1]=t+n;return}if(Ep[0]=U_(i)*r+e,Ep[1]=V_(i)*n+t,Ap[0]=U_(o)*r+e,Ap[1]=V_(o)*n+t,u(s,Ep,Ap),c(l,Ep,Ap),i=i%qs,i<0&&(i=i+qs),o=o%qs,o<0&&(o=o+qs),i>o&&!a?o+=qs:i<o&&a&&(i+=qs),a){var h=o;o=i,i=h}for(var d=0;d<o;d+=Math.PI/2)d>i&&(Cp[0]=U_(d)*r+e,Cp[1]=V_(d)*n+t,u(s,Cp,s),c(l,Cp,l))}var ye={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},Zs=[],Ks=[],Wi=[],Ma=[],Hi=[],Xi=[],G_=Math.min,j_=Math.max,Js=Math.cos,Qs=Math.sin,Fo=Math.abs,NS=Math.PI,Qa=NS*2,W_=typeof Float32Array<"u",Zf=[];function H_(e){var t=Math.round(e/NS*1e8)/1e8;return t%2*NS}function nJ(e,t){var r=H_(e[0]);r<0&&(r+=Qa);var n=r-e[0],i=e[1];i+=n,!t&&i-r>=Qa?i=r+Qa:t&&r-i>=Qa?i=r-Qa:!t&&r>i?i=r+(Qa-H_(r-i)):t&&r<i&&(i=r-(Qa-H_(i-r))),e[0]=r,e[1]=i}var iJ=function(){function e(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return e.prototype.increaseVersion=function(){this._version++},e.prototype.getVersion=function(){return this._version},e.prototype.setScale=function(t,r,n){n=n||0,n>0&&(this._ux=Fo(n/Em/t)||0,this._uy=Fo(n/Em/r)||0)},e.prototype.setDPR=function(t){this.dpr=t},e.prototype.setContext=function(t){this._ctx=t},e.prototype.getContext=function(){return this._ctx},e.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},e.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},e.prototype.moveTo=function(t,r){return this._drawPendingPt(),this.addData(ye.M,t,r),this._ctx&&this._ctx.moveTo(t,r),this._x0=t,this._y0=r,this._xi=t,this._yi=r,this},e.prototype.lineTo=function(t,r){var n=Fo(t-this._xi),i=Fo(r-this._yi),o=n>this._ux||i>this._uy;if(this.addData(ye.L,t,r),this._ctx&&o&&this._ctx.lineTo(t,r),o)this._xi=t,this._yi=r,this._pendingPtDist=0;else{var a=n*n+i*i;a>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=r,this._pendingPtDist=a)}return this},e.prototype.bezierCurveTo=function(t,r,n,i,o,a){return this._drawPendingPt(),this.addData(ye.C,t,r,n,i,o,a),this._ctx&&this._ctx.bezierCurveTo(t,r,n,i,o,a),this._xi=o,this._yi=a,this},e.prototype.quadraticCurveTo=function(t,r,n,i){return this._drawPendingPt(),this.addData(ye.Q,t,r,n,i),this._ctx&&this._ctx.quadraticCurveTo(t,r,n,i),this._xi=n,this._yi=i,this},e.prototype.arc=function(t,r,n,i,o,a){this._drawPendingPt(),Zf[0]=i,Zf[1]=o,nJ(Zf,a),i=Zf[0],o=Zf[1];var s=o-i;return this.addData(ye.A,t,r,n,n,i,s,0,a?0:1),this._ctx&&this._ctx.arc(t,r,n,i,o,a),this._xi=Js(o)*n+t,this._yi=Qs(o)*n+r,this},e.prototype.arcTo=function(t,r,n,i,o){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,r,n,i,o),this},e.prototype.rect=function(t,r,n,i){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,r,n,i),this.addData(ye.R,t,r,n,i),this},e.prototype.closePath=function(){this._drawPendingPt(),this.addData(ye.Z);var t=this._ctx,r=this._x0,n=this._y0;return t&&t.closePath(),this._xi=r,this._yi=n,this},e.prototype.fill=function(t){t&&t.fill(),this.toStatic()},e.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},e.prototype.len=function(){return this._len},e.prototype.setData=function(t){var r=t.length;!(this.data&&this.data.length===r)&&W_&&(this.data=new Float32Array(r));for(var n=0;n<r;n++)this.data[n]=t[n];this._len=r},e.prototype.appendPath=function(t){t instanceof Array||(t=[t]);for(var r=t.length,n=0,i=this._len,o=0;o<r;o++)n+=t[o].len();W_&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+n));for(var o=0;o<r;o++)for(var a=t[o].data,s=0;s<a.length;s++)this.data[i++]=a[s];this._len=i},e.prototype.addData=function(t,r,n,i,o,a,s,l,u){if(!!this._saveData){var c=this.data;this._len+arguments.length>c.length&&(this._expandData(),c=this.data);for(var f=0;f<arguments.length;f++)c[this._len++]=arguments[f]}},e.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},e.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],r=0;r<this._len;r++)t[r]=this.data[r];this.data=t}},e.prototype.toStatic=function(){if(!!this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,W_&&this._len>11&&(this.data=new Float32Array(t)))}},e.prototype.getBoundingRect=function(){Wi[0]=Wi[1]=Hi[0]=Hi[1]=Number.MAX_VALUE,Ma[0]=Ma[1]=Xi[0]=Xi[1]=-Number.MAX_VALUE;var t=this.data,r=0,n=0,i=0,o=0,a;for(a=0;a<this._len;){var s=t[a++],l=a===1;switch(l&&(r=t[a],n=t[a+1],i=r,o=n),s){case ye.M:r=i=t[a++],n=o=t[a++],Hi[0]=i,Hi[1]=o,Xi[0]=i,Xi[1]=o;break;case ye.L:gk(r,n,t[a],t[a+1],Hi,Xi),r=t[a++],n=t[a++];break;case ye.C:tJ(r,n,t[a++],t[a++],t[a++],t[a++],t[a],t[a+1],Hi,Xi),r=t[a++],n=t[a++];break;case ye.Q:eJ(r,n,t[a++],t[a++],t[a],t[a+1],Hi,Xi),r=t[a++],n=t[a++];break;case ye.A:var u=t[a++],c=t[a++],f=t[a++],h=t[a++],d=t[a++],p=t[a++]+d;a+=1;var v=!t[a++];l&&(i=Js(d)*f+u,o=Qs(d)*h+c),rJ(u,c,f,h,d,p,v,Hi,Xi),r=Js(p)*f+u,n=Qs(p)*h+c;break;case ye.R:i=r=t[a++],o=n=t[a++];var g=t[a++],m=t[a++];gk(i,o,i+g,o+m,Hi,Xi);break;case ye.Z:r=i,n=o;break}hc(Wi,Wi,Hi),dc(Ma,Ma,Xi)}return a===0&&(Wi[0]=Wi[1]=Ma[0]=Ma[1]=0),new ae(Wi[0],Wi[1],Ma[0]-Wi[0],Ma[1]-Wi[1])},e.prototype._calculateLength=function(){var t=this.data,r=this._len,n=this._ux,i=this._uy,o=0,a=0,s=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var u=this._pathSegLen,c=0,f=0,h=0;h<r;){var d=t[h++],p=h===1;p&&(o=t[h],a=t[h+1],s=o,l=a);var v=-1;switch(d){case ye.M:o=s=t[h++],a=l=t[h++];break;case ye.L:{var g=t[h++],m=t[h++],y=g-o,_=m-a;(Fo(y)>n||Fo(_)>i||h===r-1)&&(v=Math.sqrt(y*y+_*_),o=g,a=m);break}case ye.C:{var b=t[h++],T=t[h++],g=t[h++],m=t[h++],S=t[h++],P=t[h++];v=yZ(o,a,b,T,g,m,S,P,10),o=S,a=P;break}case ye.Q:{var b=t[h++],T=t[h++],g=t[h++],m=t[h++];v=wZ(o,a,b,T,g,m,10),o=g,a=m;break}case ye.A:var C=t[h++],A=t[h++],M=t[h++],k=t[h++],O=t[h++],F=t[h++],z=F+O;h+=1,t[h++],p&&(s=Js(O)*M+C,l=Qs(O)*k+A),v=j_(M,k)*G_(Qa,Math.abs(F)),o=Js(z)*M+C,a=Qs(z)*k+A;break;case ye.R:{s=o=t[h++],l=a=t[h++];var R=t[h++],j=t[h++];v=R*2+j*2;break}case ye.Z:{var y=s-o,_=l-a;v=Math.sqrt(y*y+_*_),o=s,a=l;break}}v>=0&&(u[f++]=v,c+=v)}return this._pathLen=c,c},e.prototype.rebuildPath=function(t,r){var n=this.data,i=this._ux,o=this._uy,a=this._len,s,l,u,c,f,h,d=r<1,p,v,g=0,m=0,y,_=0,b,T;if(d&&(this._pathSegLen||this._calculateLength(),p=this._pathSegLen,v=this._pathLen,y=r*v,!y))return;t:for(var S=0;S<a;){var P=n[S++],C=S===1;switch(C&&(u=n[S],c=n[S+1],s=u,l=c),P!==ye.L&&_>0&&(t.lineTo(b,T),_=0),P){case ye.M:s=u=n[S++],l=c=n[S++],t.moveTo(u,c);break;case ye.L:{f=n[S++],h=n[S++];var A=Fo(f-u),M=Fo(h-c);if(A>i||M>o){if(d){var k=p[m++];if(g+k>y){var O=(y-g)/k;t.lineTo(u*(1-O)+f*O,c*(1-O)+h*O);break t}g+=k}t.lineTo(f,h),u=f,c=h,_=0}else{var F=A*A+M*M;F>_&&(b=f,T=h,_=F)}break}case ye.C:{var z=n[S++],R=n[S++],j=n[S++],Z=n[S++],q=n[S++],tt=n[S++];if(d){var k=p[m++];if(g+k>y){var O=(y-g)/k;Sm(u,z,j,q,O,Zs),Sm(c,R,Z,tt,O,Ks),t.bezierCurveTo(Zs[1],Ks[1],Zs[2],Ks[2],Zs[3],Ks[3]);break t}g+=k}t.bezierCurveTo(z,R,j,Z,q,tt),u=q,c=tt;break}case ye.Q:{var z=n[S++],R=n[S++],j=n[S++],Z=n[S++];if(d){var k=p[m++];if(g+k>y){var O=(y-g)/k;Tm(u,z,j,O,Zs),Tm(c,R,Z,O,Ks),t.quadraticCurveTo(Zs[1],Ks[1],Zs[2],Ks[2]);break t}g+=k}t.quadraticCurveTo(z,R,j,Z),u=j,c=Z;break}case ye.A:var Pt=n[S++],Ot=n[S++],bt=n[S++],wt=n[S++],Ht=n[S++],Y=n[S++],nt=n[S++],K=!n[S++],dt=bt>wt?bt:wt,St=Fo(bt-wt)>.001,At=Ht+Y,st=!1;if(d){var k=p[m++];g+k>y&&(At=Ht+Y*(y-g)/k,st=!0),g+=k}if(St&&t.ellipse?t.ellipse(Pt,Ot,bt,wt,nt,Ht,At,K):t.arc(Pt,Ot,dt,Ht,At,K),st)break t;C&&(s=Js(Ht)*bt+Pt,l=Qs(Ht)*wt+Ot),u=Js(At)*bt+Pt,c=Qs(At)*wt+Ot;break;case ye.R:s=u=n[S],l=c=n[S+1],f=n[S++],h=n[S++];var ct=n[S++],B=n[S++];if(d){var k=p[m++];if(g+k>y){var G=y-g;t.moveTo(f,h),t.lineTo(f+G_(G,ct),h),G-=ct,G>0&&t.lineTo(f+ct,h+G_(G,B)),G-=B,G>0&&t.lineTo(f+j_(ct-G,0),h+B),G-=ct,G>0&&t.lineTo(f,h+j_(B-G,0));break t}g+=k}t.rect(f,h,ct,B);break;case ye.Z:if(d){var k=p[m++];if(g+k>y){var O=(y-g)/k;t.lineTo(u*(1-O)+s*O,c*(1-O)+l*O);break t}g+=k}t.closePath(),u=s,c=l}}},e.prototype.clone=function(){var t=new e,r=this.data;return t.data=r.slice?r.slice():Array.prototype.slice.call(r),t._len=this._len,t},e.CMD=ye,e.initDefaultProps=function(){var t=e.prototype;t._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,t._version=0}(),e}();const Yl=iJ;function Lu(e,t,r,n,i,o,a){if(i===0)return!1;var s=i,l=0,u=e;if(a>t+s&&a>n+s||a<t-s&&a<n-s||o>e+s&&o>r+s||o<e-s&&o<r-s)return!1;if(e!==r)l=(t-n)/(e-r),u=(e*n-r*t)/(e-r);else return Math.abs(o-e)<=s/2;var c=l*o-a+u,f=c*c/(l*l+1);return f<=s/2*s/2}function oJ(e,t,r,n,i,o,a,s,l,u,c){if(l===0)return!1;var f=l;if(c>t+f&&c>n+f&&c>o+f&&c>s+f||c<t-f&&c<n-f&&c<o-f&&c<s-f||u>e+f&&u>r+f&&u>i+f&&u>a+f||u<e-f&&u<r-f&&u<i-f&&u<a-f)return!1;var h=mZ(e,t,r,n,i,o,a,s,u,c,null);return h<=f/2}function aJ(e,t,r,n,i,o,a,s,l){if(a===0)return!1;var u=a;if(l>t+u&&l>n+u&&l>o+u||l<t-u&&l<n-u&&l<o-u||s>e+u&&s>r+u&&s>i+u||s<e-u&&s<r-u&&s<i-u)return!1;var c=bZ(e,t,r,n,i,o,s,l,null);return c<=u/2}var _k=Math.PI*2;function Mp(e){return e%=_k,e<0&&(e+=_k),e}var Kf=Math.PI*2;function sJ(e,t,r,n,i,o,a,s,l){if(a===0)return!1;var u=a;s-=e,l-=t;var c=Math.sqrt(s*s+l*l);if(c-u>r||c+u<r)return!1;if(Math.abs(n-i)%Kf<1e-4)return!0;if(o){var f=n;n=Mp(i),i=Mp(f)}else n=Mp(n),i=Mp(i);n>i&&(i+=Kf);var h=Math.atan2(l,s);return h<0&&(h+=Kf),h>=n&&h<=i||h+Kf>=n&&h+Kf<=i}function tl(e,t,r,n,i,o){if(o>t&&o>n||o<t&&o<n||n===t)return 0;var a=(o-t)/(n-t),s=n<t?1:-1;(a===1||a===0)&&(s=n<t?.5:-.5);var l=a*(r-e)+e;return l===i?1/0:l>i?s:0}var ka=Yl.CMD,el=Math.PI*2,lJ=1e-4;function uJ(e,t){return Math.abs(e-t)<lJ}var jr=[-1,-1,-1],Vn=[-1,-1];function cJ(){var e=Vn[0];Vn[0]=Vn[1],Vn[1]=e}function fJ(e,t,r,n,i,o,a,s,l,u){if(u>t&&u>n&&u>o&&u>s||u<t&&u<n&&u<o&&u<s)return 0;var c=wm(t,n,o,s,u,jr);if(c===0)return 0;for(var f=0,h=-1,d=void 0,p=void 0,v=0;v<c;v++){var g=jr[v],m=g===0||g===1?.5:1,y=or(e,r,i,a,g);y<l||(h<0&&(h=Z7(t,n,o,s,Vn),Vn[1]<Vn[0]&&h>1&&cJ(),d=or(t,n,o,s,Vn[0]),h>1&&(p=or(t,n,o,s,Vn[1]))),h===2?g<Vn[0]?f+=d<t?m:-m:g<Vn[1]?f+=p<d?m:-m:f+=s<p?m:-m:g<Vn[0]?f+=d<t?m:-m:f+=s<d?m:-m)}return f}function hJ(e,t,r,n,i,o,a,s){if(s>t&&s>n&&s>o||s<t&&s<n&&s<o)return 0;var l=_Z(t,n,o,s,jr);if(l===0)return 0;var u=K7(t,n,o);if(u>=0&&u<=1){for(var c=0,f=kr(t,n,o,u),h=0;h<l;h++){var d=jr[h]===0||jr[h]===1?.5:1,p=kr(e,r,i,jr[h]);p<a||(jr[h]<u?c+=f<t?d:-d:c+=o<f?d:-d)}return c}else{var d=jr[0]===0||jr[0]===1?.5:1,p=kr(e,r,i,jr[0]);return p<a?0:o<t?d:-d}}function dJ(e,t,r,n,i,o,a,s){if(s-=t,s>r||s<-r)return 0;var l=Math.sqrt(r*r-s*s);jr[0]=-l,jr[1]=l;var u=Math.abs(n-i);if(u<1e-4)return 0;if(u>=el-1e-4){n=0,i=el;var c=o?1:-1;return a>=jr[0]+e&&a<=jr[1]+e?c:0}if(n>i){var f=n;n=i,i=f}n<0&&(n+=el,i+=el);for(var h=0,d=0;d<2;d++){var p=jr[d];if(p+e>a){var v=Math.atan2(s,p),c=o?1:-1;v<0&&(v=el+v),(v>=n&&v<=i||v+el>=n&&v+el<=i)&&(v>Math.PI/2&&v<Math.PI*1.5&&(c=-c),h+=c)}}return h}function S9(e,t,r,n,i){for(var o=e.data,a=e.len(),s=0,l=0,u=0,c=0,f=0,h,d,p=0;p<a;){var v=o[p++],g=p===1;switch(v===ka.M&&p>1&&(r||(s+=tl(l,u,c,f,n,i))),g&&(l=o[p],u=o[p+1],c=l,f=u),v){case ka.M:c=o[p++],f=o[p++],l=c,u=f;break;case ka.L:if(r){if(Lu(l,u,o[p],o[p+1],t,n,i))return!0}else s+=tl(l,u,o[p],o[p+1],n,i)||0;l=o[p++],u=o[p++];break;case ka.C:if(r){if(oJ(l,u,o[p++],o[p++],o[p++],o[p++],o[p],o[p+1],t,n,i))return!0}else s+=fJ(l,u,o[p++],o[p++],o[p++],o[p++],o[p],o[p+1],n,i)||0;l=o[p++],u=o[p++];break;case ka.Q:if(r){if(aJ(l,u,o[p++],o[p++],o[p],o[p+1],t,n,i))return!0}else s+=hJ(l,u,o[p++],o[p++],o[p],o[p+1],n,i)||0;l=o[p++],u=o[p++];break;case ka.A:var m=o[p++],y=o[p++],_=o[p++],b=o[p++],T=o[p++],S=o[p++];p+=1;var P=!!(1-o[p++]);h=Math.cos(T)*_+m,d=Math.sin(T)*b+y,g?(c=h,f=d):s+=tl(l,u,h,d,n,i);var C=(n-m)*b/_+m;if(r){if(sJ(m,y,b,T,T+S,P,t,C,i))return!0}else s+=dJ(m,y,b,T,T+S,P,C,i);l=Math.cos(T+S)*_+m,u=Math.sin(T+S)*b+y;break;case ka.R:c=l=o[p++],f=u=o[p++];var A=o[p++],M=o[p++];if(h=c+A,d=f+M,r){if(Lu(c,f,h,f,t,n,i)||Lu(h,f,h,d,t,n,i)||Lu(h,d,c,d,t,n,i)||Lu(c,d,c,f,t,n,i))return!0}else s+=tl(h,f,h,d,n,i),s+=tl(c,d,c,f,n,i);break;case ka.Z:if(r){if(Lu(l,u,c,f,t,n,i))return!0}else s+=tl(l,u,c,f,n,i);l=c,u=f;break}}return!r&&!uJ(u,f)&&(s+=tl(l,u,c,f,n,i)||0),s!==0}function pJ(e,t,r){return S9(e,0,!1,t,r)}function vJ(e,t,r,n){return S9(e,t,!0,r,n)}var T9=te({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},Dl),gJ={style:te({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},V1.style)},X_=wo.concat(["invisible","culling","z","z2","zlevel","parent"]),mJ=function(e){Ee(t,e);function t(r){return e.call(this,r)||this}return t.prototype.update=function(){var r=this;e.prototype.update.call(this);var n=this.style;if(n.decal){var i=this._decalEl=this._decalEl||new t;i.buildPath===t.prototype.buildPath&&(i.buildPath=function(l){r.buildPath(l,r.shape)}),i.silent=!0;var o=i.style;for(var a in n)o[a]!==n[a]&&(o[a]=n[a]);o.fill=n.fill?n.decal:null,o.decal=null,o.shadowColor=null,n.strokeFirst&&(o.stroke=null);for(var s=0;s<X_.length;++s)i[X_[s]]=this[X_[s]];i.__dirty|=bn}else this._decalEl&&(this._decalEl=null)},t.prototype.getDecalElement=function(){return this._decalEl},t.prototype._init=function(r){var n=ve(r);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var o=0;o<n.length;o++){var a=n[o],s=r[a];a==="style"?this.style?ot(this.style,s):this.useStyle(s):a==="shape"?ot(this.shape,s):e.prototype.attrKV.call(this,a,s)}this.style||this.useStyle({})},t.prototype.getDefaultStyle=function(){return null},t.prototype.getDefaultShape=function(){return{}},t.prototype.canBeInsideText=function(){return this.hasFill()},t.prototype.getInsideTextFill=function(){var r=this.style.fill;if(r!=="none"){if(Et(r)){var n=Pm(r,0);return n>.5?LS:n>.2?YZ:IS}else if(r)return IS}return LS},t.prototype.getInsideTextStroke=function(r){var n=this.style.fill;if(Et(n)){var i=this.__zr,o=!!(i&&i.isDarkMode()),a=Pm(r,0)<xS;if(o===a)return n}},t.prototype.buildPath=function(r,n,i){},t.prototype.pathUpdated=function(){this.__dirty&=~lc},t.prototype.getUpdatedPathProxy=function(r){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,r),this.path},t.prototype.createPathProxy=function(){this.path=new Yl(!1)},t.prototype.hasStroke=function(){var r=this.style,n=r.stroke;return!(n==null||n==="none"||!(r.lineWidth>0))},t.prototype.hasFill=function(){var r=this.style,n=r.fill;return n!=null&&n!=="none"},t.prototype.getBoundingRect=function(){var r=this._rect,n=this.style,i=!r;if(i){var o=!1;this.path||(o=!0,this.createPathProxy());var a=this.path;(o||this.__dirty&lc)&&(a.beginPath(),this.buildPath(a,this.shape,!1),this.pathUpdated()),r=a.getBoundingRect()}if(this._rect=r,this.hasStroke()&&this.path&&this.path.len()>0){var s=this._rectStroke||(this._rectStroke=r.clone());if(this.__dirty||i){s.copy(r);var l=n.strokeNoScale?this.getLineScale():1,u=n.lineWidth;if(!this.hasFill()){var c=this.strokeContainThreshold;u=Math.max(u,c==null?4:c)}l>1e-10&&(s.width+=u/l,s.height+=u/l,s.x-=u/l/2,s.y-=u/l/2)}return s}return r},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect(),a=this.style;if(r=i[0],n=i[1],o.contain(r,n)){var s=this.path;if(this.hasStroke()){var l=a.lineWidth,u=a.strokeNoScale?this.getLineScale():1;if(u>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),vJ(s,l/u,r,n)))return!0}if(this.hasFill())return pJ(s,r,n)}return!1},t.prototype.dirtyShape=function(){this.__dirty|=lc,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},t.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},t.prototype.animateShape=function(r){return this.animate("shape",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():r==="shape"?this.dirtyShape():this.markRedraw()},t.prototype.attrKV=function(r,n){r==="shape"?this.setShape(n):e.prototype.attrKV.call(this,r,n)},t.prototype.setShape=function(r,n){var i=this.shape;return i||(i=this.shape={}),typeof r=="string"?i[r]=n:ot(i,r),this.dirtyShape(),this},t.prototype.shapeChanged=function(){return!!(this.__dirty&lc)},t.prototype.createStyle=function(r){return F1(T9,r)},t.prototype._innerSaveToNormal=function(r){e.prototype._innerSaveToNormal.call(this,r);var n=this._normalState;r.shape&&!n.shape&&(n.shape=ot({},this.shape))},t.prototype._applyStateObj=function(r,n,i,o,a,s){e.prototype._applyStateObj.call(this,r,n,i,o,a,s);var l=!(n&&o),u;if(n&&n.shape?a?o?u=n.shape:(u=ot({},i.shape),ot(u,n.shape)):(u=ot({},o?this.shape:i.shape),ot(u,n.shape)):l&&(u=i.shape),u)if(a){this.shape=ot({},this.shape);for(var c={},f=ve(u),h=0;h<f.length;h++){var d=f[h];typeof u[d]=="object"?this.shape[d]=u[d]:c[d]=u[d]}this._transitionState(r,{shape:c},s)}else this.shape=u,this.dirtyShape()},t.prototype._mergeStates=function(r){for(var n=e.prototype._mergeStates.call(this,r),i,o=0;o<r.length;o++){var a=r[o];a.shape&&(i=i||{},this._mergeStyle(i,a.shape))}return i&&(n.shape=i),n},t.prototype.getAnimationStyleProps=function(){return gJ},t.prototype.isZeroArea=function(){return!1},t.extend=function(r){var n=function(o){Ee(a,o);function a(s){var l=o.call(this,s)||this;return r.init&&r.init.call(l,s),l}return a.prototype.getDefaultStyle=function(){return zt(r.style)},a.prototype.getDefaultShape=function(){return zt(r.shape)},a}(t);for(var i in r)typeof r[i]=="function"&&(n.prototype[i]=r[i]);return n},t.initDefaultProps=function(){var r=t.prototype;r.type="path",r.strokeContainThreshold=5,r.segmentIgnoreThreshold=0,r.subPixelOptimize=!1,r.autoBatch=!1,r.__dirty=bn|Gh|lc}(),t}(su);const he=mJ;var yJ=te({strokeFirst:!0,font:Wl,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},T9),P9=function(e){Ee(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.hasStroke=function(){var r=this.style,n=r.stroke;return n!=null&&n!=="none"&&r.lineWidth>0},t.prototype.hasFill=function(){var r=this.style,n=r.fill;return n!=null&&n!=="none"},t.prototype.createStyle=function(r){return F1(yJ,r)},t.prototype.setBoundingRect=function(r){this._rect=r},t.prototype.getBoundingRect=function(){var r=this.style;if(!this._rect){var n=r.text;n!=null?n+="":n="";var i=kP(n,r.font,r.textAlign,r.textBaseline);if(i.x+=r.x||0,i.y+=r.y||0,this.hasStroke()){var o=r.lineWidth;i.x-=o/2,i.y-=o/2,i.width+=o,i.height+=o}this._rect=i}return this._rect},t.initDefaultProps=function(){var r=t.prototype;r.dirtyRectTolerance=10}(),t}(su);P9.prototype.type="tspan";const FS=P9;var _J=te({x:0,y:0},Dl),bJ={style:te({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},V1.style)};function wJ(e){return!!(e&&typeof e!="string"&&e.width&&e.height)}var E9=function(e){Ee(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createStyle=function(r){return F1(_J,r)},t.prototype._getSize=function(r){var n=this.style,i=n[r];if(i!=null)return i;var o=wJ(n.image)?n.image:this.__image;if(!o)return 0;var a=r==="width"?"height":"width",s=n[a];return s==null?o[r]:o[r]/o[a]*s},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return bJ},t.prototype.getBoundingRect=function(){var r=this.style;return this._rect||(this._rect=new ae(r.x||0,r.y||0,this.getWidth(),this.getHeight())),this._rect},t}(su);E9.prototype.type="image";const ma=E9;function SJ(e,t){var r=t.x,n=t.y,i=t.width,o=t.height,a=t.r,s,l,u,c;i<0&&(r=r+i,i=-i),o<0&&(n=n+o,o=-o),typeof a=="number"?s=l=u=c=a:a instanceof Array?a.length===1?s=l=u=c=a[0]:a.length===2?(s=u=a[0],l=c=a[1]):a.length===3?(s=a[0],l=c=a[1],u=a[2]):(s=a[0],l=a[1],u=a[2],c=a[3]):s=l=u=c=0;var f;s+l>i&&(f=s+l,s*=i/f,l*=i/f),u+c>i&&(f=u+c,u*=i/f,c*=i/f),l+u>o&&(f=l+u,l*=o/f,u*=o/f),s+c>o&&(f=s+c,s*=o/f,c*=o/f),e.moveTo(r+s,n),e.lineTo(r+i-l,n),l!==0&&e.arc(r+i-l,n+l,l,-Math.PI/2,0),e.lineTo(r+i,n+o-u),u!==0&&e.arc(r+i-u,n+o-u,u,0,Math.PI/2),e.lineTo(r+c,n+o),c!==0&&e.arc(r+c,n+o-c,c,Math.PI/2,Math.PI),e.lineTo(r,n+s),s!==0&&e.arc(r+s,n+s,s,Math.PI,Math.PI*1.5)}var vc=Math.round;function A9(e,t,r){if(!!t){var n=t.x1,i=t.x2,o=t.y1,a=t.y2;e.x1=n,e.x2=i,e.y1=o,e.y2=a;var s=r&&r.lineWidth;return s&&(vc(n*2)===vc(i*2)&&(e.x1=e.x2=Al(n,s,!0)),vc(o*2)===vc(a*2)&&(e.y1=e.y2=Al(o,s,!0))),e}}function C9(e,t,r){if(!!t){var n=t.x,i=t.y,o=t.width,a=t.height;e.x=n,e.y=i,e.width=o,e.height=a;var s=r&&r.lineWidth;return s&&(e.x=Al(n,s,!0),e.y=Al(i,s,!0),e.width=Math.max(Al(n+o,s,!1)-e.x,o===0?0:1),e.height=Math.max(Al(i+a,s,!1)-e.y,a===0?0:1)),e}}function Al(e,t,r){if(!t)return e;var n=vc(e*2);return(n+vc(t))%2===0?n/2:(n+(r?1:-1))/2}var TJ=function(){function e(){this.x=0,this.y=0,this.width=0,this.height=0}return e}(),PJ={},M9=function(e){Ee(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new TJ},t.prototype.buildPath=function(r,n){var i,o,a,s;if(this.subPixelOptimize){var l=C9(PJ,n,this.style);i=l.x,o=l.y,a=l.width,s=l.height,l.r=n.r,n=l}else i=n.x,o=n.y,a=n.width,s=n.height;n.r?SJ(r,n):r.rect(i,o,a,s)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t}(he);M9.prototype.type="rect";const Ke=M9;var bk={fill:"#000"},wk=2,EJ={style:te({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},V1.style)},k9=function(e){Ee(t,e);function t(r){var n=e.call(this)||this;return n.type="text",n._children=[],n._defaultStyle=bk,n.attr(r),n}return t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){e.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var r=0;r<this._children.length;r++){var n=this._children[r];n.zlevel=this.zlevel,n.z=this.z,n.z2=this.z2,n.culling=this.culling,n.cursor=this.cursor,n.invisible=this.invisible}},t.prototype.updateTransform=function(){var r=this.innerTransformable;r?(r.updateTransform(),r.transform&&(this.transform=r.transform)):e.prototype.updateTransform.call(this)},t.prototype.getLocalTransform=function(r){var n=this.innerTransformable;return n?n.getLocalTransform(r):e.prototype.getLocalTransform.call(this,r)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),e.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){this._childCursor=0,xJ(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(r){e.prototype.addSelfToZr.call(this,r);for(var n=0;n<this._children.length;n++)this._children[n].__zr=r},t.prototype.removeSelfFromZr=function(r){e.prototype.removeSelfFromZr.call(this,r);for(var n=0;n<this._children.length;n++)this._children[n].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var r=new ae(0,0,0,0),n=this._children,i=[],o=null,a=0;a<n.length;a++){var s=n[a],l=s.getBoundingRect(),u=s.getLocalTransform(i);u?(r.copy(l),r.applyTransform(u),o=o||r.clone(),o.union(r)):(o=o||l.clone(),o.union(l))}this._rect=o||r}return this._rect},t.prototype.setDefaultTextStyle=function(r){this._defaultStyle=r||bk},t.prototype.setTextContent=function(r){},t.prototype._mergeStyle=function(r,n){if(!n)return r;var i=n.rich,o=r.rich||i&&{};return ot(r,n),i&&o?(this._mergeRich(o,i),r.rich=o):o&&(r.rich=o),r},t.prototype._mergeRich=function(r,n){for(var i=ve(n),o=0;o<i.length;o++){var a=i[o];r[a]=r[a]||{},ot(r[a],n[a])}},t.prototype.getAnimationStyleProps=function(){return EJ},t.prototype._getOrCreateChild=function(r){var n=this._children[this._childCursor];return(!n||!(n instanceof r))&&(n=new r),this._children[this._childCursor++]=n,n.__zr=this.__zr,n.parent=this,n},t.prototype._updatePlainTexts=function(){var r=this.style,n=r.font||Wl,i=r.padding,o=Mk(r),a=GK(o,r),s=Y_(r),l=!!r.backgroundColor,u=a.outerHeight,c=a.outerWidth,f=a.contentWidth,h=a.lines,d=a.lineHeight,p=this._defaultStyle,v=r.x||0,g=r.y||0,m=r.align||p.align||"left",y=r.verticalAlign||p.verticalAlign||"top",_=v,b=uc(g,a.contentHeight,y);if(s||i){var T=Wh(v,c,m),S=uc(g,u,y);s&&this._renderBackground(r,r,T,S,c,u)}b+=d/2,i&&(_=Ck(v,m,i),y==="top"?b+=i[0]:y==="bottom"&&(b-=i[2]));for(var P=0,C=!1,A=Ak("fill"in r?r.fill:(C=!0,p.fill)),M=Ek("stroke"in r?r.stroke:!l&&(!p.autoStroke||C)?(P=wk,p.stroke):null),k=r.textShadowBlur>0,O=r.width!=null&&(r.overflow==="truncate"||r.overflow==="break"||r.overflow==="breakAll"),F=a.calculatedLineHeight,z=0;z<h.length;z++){var R=this._getOrCreateChild(FS),j=R.createStyle();R.useStyle(j),j.text=h[z],j.x=_,j.y=b,m&&(j.textAlign=m),j.textBaseline="middle",j.opacity=r.opacity,j.strokeFirst=!0,k&&(j.shadowBlur=r.textShadowBlur||0,j.shadowColor=r.textShadowColor||"transparent",j.shadowOffsetX=r.textShadowOffsetX||0,j.shadowOffsetY=r.textShadowOffsetY||0),j.stroke=M,j.fill=A,M&&(j.lineWidth=r.lineWidth||P,j.lineDash=r.lineDash,j.lineDashOffset=r.lineDashOffset||0),j.font=n,Tk(j,r),b+=d,O&&R.setBoundingRect(new ae(Wh(j.x,r.width,j.textAlign),uc(j.y,F,j.textBaseline),f,F))}},t.prototype._updateRichTexts=function(){var r=this.style,n=Mk(r),i=HK(n,r),o=i.width,a=i.outerWidth,s=i.outerHeight,l=r.padding,u=r.x||0,c=r.y||0,f=this._defaultStyle,h=r.align||f.align,d=r.verticalAlign||f.verticalAlign,p=Wh(u,a,h),v=uc(c,s,d),g=p,m=v;l&&(g+=l[3],m+=l[0]);var y=g+o;Y_(r)&&this._renderBackground(r,r,p,v,a,s);for(var _=!!r.backgroundColor,b=0;b<i.lines.length;b++){for(var T=i.lines[b],S=T.tokens,P=S.length,C=T.lineHeight,A=T.width,M=0,k=g,O=y,F=P-1,z=void 0;M<P&&(z=S[M],!z.align||z.align==="left");)this._placeToken(z,r,C,m,k,"left",_),A-=z.width,k+=z.width,M++;for(;F>=0&&(z=S[F],z.align==="right");)this._placeToken(z,r,C,m,O,"right",_),A-=z.width,O-=z.width,F--;for(k+=(o-(k-g)-(y-O)-A)/2;M<=F;)z=S[M],this._placeToken(z,r,C,m,k+z.width/2,"center",_),k+=z.width,M++;m+=C}},t.prototype._placeToken=function(r,n,i,o,a,s,l){var u=n.rich[r.styleName]||{};u.text=r.text;var c=r.verticalAlign,f=o+i/2;c==="top"?f=o+r.height/2:c==="bottom"&&(f=o+i-r.height/2);var h=!r.isLineHolder&&Y_(u);h&&this._renderBackground(u,n,s==="right"?a-r.width:s==="center"?a-r.width/2:a,f-r.height/2,r.width,r.height);var d=!!u.backgroundColor,p=r.textPadding;p&&(a=Ck(a,s,p),f-=r.height/2-p[0]-r.innerHeight/2);var v=this._getOrCreateChild(FS),g=v.createStyle();v.useStyle(g);var m=this._defaultStyle,y=!1,_=0,b=Ak("fill"in u?u.fill:"fill"in n?n.fill:(y=!0,m.fill)),T=Ek("stroke"in u?u.stroke:"stroke"in n?n.stroke:!d&&!l&&(!m.autoStroke||y)?(_=wk,m.stroke):null),S=u.textShadowBlur>0||n.textShadowBlur>0;g.text=r.text,g.x=a,g.y=f,S&&(g.shadowBlur=u.textShadowBlur||n.textShadowBlur||0,g.shadowColor=u.textShadowColor||n.textShadowColor||"transparent",g.shadowOffsetX=u.textShadowOffsetX||n.textShadowOffsetX||0,g.shadowOffsetY=u.textShadowOffsetY||n.textShadowOffsetY||0),g.textAlign=s,g.textBaseline="middle",g.font=r.font||Wl,g.opacity=fd(u.opacity,n.opacity,1),Tk(g,u),T&&(g.lineWidth=fd(u.lineWidth,n.lineWidth,_),g.lineDash=qt(u.lineDash,n.lineDash),g.lineDashOffset=n.lineDashOffset||0,g.stroke=T),b&&(g.fill=b);var P=r.contentWidth,C=r.contentHeight;v.setBoundingRect(new ae(Wh(g.x,P,g.textAlign),uc(g.y,C,g.textBaseline),P,C))},t.prototype._renderBackground=function(r,n,i,o,a,s){var l=r.backgroundColor,u=r.borderWidth,c=r.borderColor,f=l&&l.image,h=l&&!f,d=r.borderRadius,p=this,v,g;if(h||r.lineHeight||u&&c){v=this._getOrCreateChild(Ke),v.useStyle(v.createStyle()),v.style.fill=null;var m=v.shape;m.x=i,m.y=o,m.width=a,m.height=s,m.r=d,v.dirtyShape()}if(h){var y=v.style;y.fill=l||null,y.fillOpacity=qt(r.fillOpacity,1)}else if(f){g=this._getOrCreateChild(ma),g.onload=function(){p.dirtyStyle()};var _=g.style;_.image=l.image,_.x=i,_.y=o,_.width=a,_.height=s}if(u&&c){var y=v.style;y.lineWidth=u,y.stroke=c,y.strokeOpacity=qt(r.strokeOpacity,1),y.lineDash=r.borderDash,y.lineDashOffset=r.borderDashOffset||0,v.strokeContainThreshold=0,v.hasFill()&&v.hasStroke()&&(y.strokeFirst=!0,y.lineWidth*=2)}var b=(v||g).style;b.shadowBlur=r.shadowBlur||0,b.shadowColor=r.shadowColor||"transparent",b.shadowOffsetX=r.shadowOffsetX||0,b.shadowOffsetY=r.shadowOffsetY||0,b.opacity=fd(r.opacity,n.opacity,1)},t.makeFont=function(r){var n="";return kJ(r)&&(n=[r.fontStyle,r.fontWeight,MJ(r.fontSize),r.fontFamily||"sans-serif"].join(" ")),n&&po(n)||r.textFont||r.font},t}(su),AJ={left:!0,right:1,center:1},CJ={top:1,bottom:1,middle:1},Sk=["fontStyle","fontWeight","fontSize","fontFamily"];function MJ(e){return typeof e=="string"&&(e.indexOf("px")!==-1||e.indexOf("rem")!==-1||e.indexOf("em")!==-1)?e:isNaN(+e)?_P+"px":e+"px"}function Tk(e,t){for(var r=0;r<Sk.length;r++){var n=Sk[r],i=t[n];i!=null&&(e[n]=i)}}function kJ(e){return e.fontSize!=null||e.fontFamily||e.fontWeight}function xJ(e){return Pk(e),N(e.rich,Pk),e}function Pk(e){if(e){e.font=k9.makeFont(e);var t=e.align;t==="middle"&&(t="center"),e.align=t==null||AJ[t]?t:"left";var r=e.verticalAlign;r==="center"&&(r="middle"),e.verticalAlign=r==null||CJ[r]?r:"top";var n=e.padding;n&&(e.padding=D7(e.padding))}}function Ek(e,t){return e==null||t<=0||e==="transparent"||e==="none"?null:e.image||e.colorStops?"#000":e}function Ak(e){return e==null||e==="none"?null:e.image||e.colorStops?"#000":e}function Ck(e,t,r){return t==="right"?e-r[1]:t==="center"?e+r[3]/2-r[1]/2:e+r[3]}function Mk(e){var t=e.text;return t!=null&&(t+=""),t}function Y_(e){return!!(e.backgroundColor||e.lineHeight||e.borderWidth&&e.borderColor)}const Je=k9;var ie=Oe(),LJ=function(e,t,r,n){if(n){var i=ie(n);i.dataIndex=r,i.dataType=t,i.seriesIndex=e,n.type==="group"&&n.traverse(function(o){var a=ie(o);a.seriesIndex=e,a.dataIndex=r,a.dataType=t})}},kk=1,xk={},x9=Oe(),NP=Oe(),FP=0,M0=1,U1=2,Jn=["emphasis","blur","select"],Lk=["normal","emphasis","blur","select"],IJ=10,OJ=9,Nl="highlight",Ng="downplay",vd="select",Fg="unselect",gd="toggleSelect";function Iu(e){return e!=null&&e!=="none"}var Ik=new E0(100);function Ok(e){if(Et(e)){var t=Ik.get(e);return t||(t=qM(e,-.1),Ik.put(e,t)),t}else if(N1(e)){var r=ot({},e);return r.colorStops=Ct(e.colorStops,function(n){return{offset:n.offset,color:qM(n.color,-.1)}}),r}return e}function G1(e,t,r){e.onHoverStateChange&&(e.hoverState||0)!==r&&e.onHoverStateChange(t),e.hoverState=r}function L9(e){G1(e,"emphasis",U1)}function I9(e){e.hoverState===U1&&G1(e,"normal",FP)}function BP(e){G1(e,"blur",M0)}function O9(e){e.hoverState===M0&&G1(e,"normal",FP)}function RJ(e){e.selected=!0}function DJ(e){e.selected=!1}function Rk(e,t,r){t(e,r)}function ya(e,t,r){Rk(e,t,r),e.isGroup&&e.traverse(function(n){Rk(n,t,r)})}function BS(e,t){switch(t){case"emphasis":e.hoverState=U1;break;case"normal":e.hoverState=FP;break;case"blur":e.hoverState=M0;break;case"select":e.selected=!0}}function NJ(e,t,r,n){for(var i=e.style,o={},a=0;a<t.length;a++){var s=t[a],l=i[s];o[s]=l==null?n&&n[s]:l}for(var a=0;a<e.animators.length;a++){var u=e.animators[a];u.__fromStateTransition&&u.__fromStateTransition.indexOf(r)<0&&u.targetName==="style"&&u.saveTo(o,t)}return o}function FJ(e,t,r,n){var i=r&&ce(r,"select")>=0,o=!1;if(e instanceof he){var a=x9(e),s=i&&a.selectFill||a.normalFill,l=i&&a.selectStroke||a.normalStroke;if(Iu(s)||Iu(l)){n=n||{};var u=n.style||{};u.fill==="inherit"?(o=!0,n=ot({},n),u=ot({},u),u.fill=s):!Iu(u.fill)&&Iu(s)?(o=!0,n=ot({},n),u=ot({},u),u.fill=Ok(s)):!Iu(u.stroke)&&Iu(l)&&(o||(n=ot({},n),u=ot({},u)),u.stroke=Ok(l)),n.style=u}}if(n&&n.z2==null){o||(n=ot({},n));var c=e.z2EmphasisLift;n.z2=e.z2+(c!=null?c:IJ)}return n}function BJ(e,t,r){if(r&&r.z2==null){r=ot({},r);var n=e.z2SelectLift;r.z2=e.z2+(n!=null?n:OJ)}return r}function $J(e,t,r){var n=ce(e.currentStates,t)>=0,i=e.style.opacity,o=n?null:NJ(e,["opacity"],t,{opacity:1});r=r||{};var a=r.style||{};return a.opacity==null&&(r=ot({},r),a=ot({opacity:n?i:o.opacity*.1},a),r.style=a),r}function q_(e,t){var r=this.states[e];if(this.style){if(e==="emphasis")return FJ(this,e,t,r);if(e==="blur")return $J(this,e,r);if(e==="select")return BJ(this,e,r)}return r}function $P(e){e.stateProxy=q_;var t=e.getTextContent(),r=e.getTextGuideLine();t&&(t.stateProxy=q_),r&&(r.stateProxy=q_)}function Dk(e,t){!F9(e,t)&&!e.__highByOuter&&ya(e,L9)}function Nk(e,t){!F9(e,t)&&!e.__highByOuter&&ya(e,I9)}function Wd(e,t){e.__highByOuter|=1<<(t||0),ya(e,L9)}function Hd(e,t){!(e.__highByOuter&=~(1<<(t||0)))&&ya(e,I9)}function R9(e){ya(e,BP)}function zP(e){ya(e,O9)}function D9(e){ya(e,RJ)}function N9(e){ya(e,DJ)}function F9(e,t){return e.__highDownSilentOnTouch&&t.zrByTouch}function B9(e){var t=e.getModel(),r=[],n=[];t.eachComponent(function(i,o){var a=NP(o),s=i==="series",l=s?e.getViewOfSeriesModel(o):e.getViewOfComponentModel(o);!s&&n.push(l),a.isBlured&&(l.group.traverse(function(u){O9(u)}),s&&r.push(o)),a.isBlured=!1}),N(n,function(i){i&&i.toggleBlurSeries&&i.toggleBlurSeries(r,!1,t)})}function $S(e,t,r,n){var i=n.getModel();r=r||"coordinateSystem";function o(u,c){for(var f=0;f<c.length;f++){var h=u.getItemGraphicEl(c[f]);h&&zP(h)}}if(e!=null&&!(!t||t==="none")){var a=i.getSeriesByIndex(e),s=a.coordinateSystem;s&&s.master&&(s=s.master);var l=[];i.eachSeries(function(u){var c=a===u,f=u.coordinateSystem;f&&f.master&&(f=f.master);var h=f&&s?f===s:c;if(!(r==="series"&&!c||r==="coordinateSystem"&&!h||t==="series"&&c)){var d=n.getViewOfSeriesModel(u);if(d.group.traverse(function(g){BP(g)}),Fr(t))o(u.getData(),t);else if(It(t))for(var p=ve(t),v=0;v<p.length;v++)o(u.getData(p[v]),t[p[v]]);l.push(u),NP(u).isBlured=!0}}),i.eachComponent(function(u,c){if(u!=="series"){var f=n.getViewOfComponentModel(c);f&&f.toggleBlurSeries&&f.toggleBlurSeries(l,!0,i)}})}}function zS(e,t,r){if(!(e==null||t==null)){var n=r.getModel().getComponent(e,t);if(!!n){NP(n).isBlured=!0;var i=r.getViewOfComponentModel(n);!i||!i.focusBlurEnabled||i.group.traverse(function(o){BP(o)})}}}function zJ(e,t,r){var n=e.seriesIndex,i=e.getData(t.dataType);if(!!i){var o=Xl(i,t);o=(ut(o)?o[0]:o)||0;var a=i.getItemGraphicEl(o);if(!a)for(var s=i.count(),l=0;!a&&l<s;)a=i.getItemGraphicEl(l++);if(a){var u=ie(a);$S(n,u.focus,u.blurScope,r)}else{var c=e.get(["emphasis","focus"]),f=e.get(["emphasis","blurScope"]);c!=null&&$S(n,c,f,r)}}}function VP(e,t,r,n){var i={focusSelf:!1,dispatchers:null};if(e==null||e==="series"||t==null||r==null)return i;var o=n.getModel().getComponent(e,t);if(!o)return i;var a=n.getViewOfComponentModel(o);if(!a||!a.findHighDownDispatchers)return i;for(var s=a.findHighDownDispatchers(r),l,u=0;u<s.length;u++)if(ie(s[u]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:s}}function VJ(e,t,r){var n=ie(e),i=VP(n.componentMainType,n.componentIndex,n.componentHighDownName,r),o=i.dispatchers,a=i.focusSelf;o?(a&&zS(n.componentMainType,n.componentIndex,r),N(o,function(s){return Dk(s,t)})):($S(n.seriesIndex,n.focus,n.blurScope,r),n.focus==="self"&&zS(n.componentMainType,n.componentIndex,r),Dk(e,t))}function UJ(e,t,r){B9(r);var n=ie(e),i=VP(n.componentMainType,n.componentIndex,n.componentHighDownName,r).dispatchers;i?N(i,function(o){return Nk(o,t)}):Nk(e,t)}function GJ(e,t,r){if(!!GS(t)){var n=t.dataType,i=e.getData(n),o=Xl(i,t);ut(o)||(o=[o]),e[t.type===gd?"toggleSelect":t.type===vd?"select":"unselect"](o,n)}}function Fk(e){var t=e.getAllData();N(t,function(r){var n=r.data,i=r.type;n.eachItemGraphicEl(function(o,a){e.isSelected(a,i)?D9(o):N9(o)})})}function jJ(e){var t=[];return e.eachSeries(function(r){var n=r.getAllData();N(n,function(i){i.data;var o=i.type,a=r.getSelectedDataIndices();if(a.length>0){var s={dataIndex:a,seriesIndex:r.seriesIndex};o!=null&&(s.dataType=o),t.push(s)}})}),t}function VS(e,t,r){UP(e,!0),ya(e,$P),HJ(e,t,r)}function WJ(e){UP(e,!1)}function ql(e,t,r,n){n?WJ(e):VS(e,t,r)}function HJ(e,t,r){var n=ie(e);t!=null?(n.focus=t,n.blurScope=r):n.focus&&(n.focus=null)}var Bk=["emphasis","blur","select"],XJ={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function Xd(e,t,r,n){r=r||"itemStyle";for(var i=0;i<Bk.length;i++){var o=Bk[i],a=t.getModel([o,r]),s=e.ensureState(o);s.style=n?n(a):a[XJ[r]]()}}function UP(e,t){var r=t===!1,n=e;e.highDownSilentOnTouch&&(n.__highDownSilentOnTouch=e.highDownSilentOnTouch),(!r||n.__highDownDispatcher)&&(n.__highByOuter=n.__highByOuter||0,n.__highDownDispatcher=!r)}function US(e){return!!(e&&e.__highDownDispatcher)}function YJ(e){var t=xk[e];return t==null&&kk<=32&&(t=xk[e]=kk++),t}function GS(e){var t=e.type;return t===vd||t===Fg||t===gd}function $k(e){var t=e.type;return t===Nl||t===Ng}function qJ(e){var t=x9(e);t.normalFill=e.style.fill,t.normalStroke=e.style.stroke;var r=e.states.select||{};t.selectFill=r.style&&r.style.fill||null,t.selectStroke=r.style&&r.style.stroke||null}var Ou=Yl.CMD,ZJ=[[],[],[]],zk=Math.sqrt,KJ=Math.atan2;function JJ(e,t){if(!!t){var r=e.data,n=e.len(),i,o,a,s,l,u,c=Ou.M,f=Ou.C,h=Ou.L,d=Ou.R,p=Ou.A,v=Ou.Q;for(a=0,s=0;a<n;){switch(i=r[a++],s=a,o=0,i){case c:o=1;break;case h:o=1;break;case f:o=3;break;case v:o=2;break;case p:var g=t[4],m=t[5],y=zk(t[0]*t[0]+t[1]*t[1]),_=zk(t[2]*t[2]+t[3]*t[3]),b=KJ(-t[1]/_,t[0]/y);r[a]*=y,r[a++]+=g,r[a]*=_,r[a++]+=m,r[a++]*=y,r[a++]*=_,r[a++]+=b,r[a++]+=b,a+=2,s=a;break;case d:u[0]=r[a++],u[1]=r[a++],Xr(u,u,t),r[s++]=u[0],r[s++]=u[1],u[0]+=r[a++],u[1]+=r[a++],Xr(u,u,t),r[s++]=u[0],r[s++]=u[1]}for(l=0;l<o;l++){var T=ZJ[l];T[0]=r[a++],T[1]=r[a++],Xr(T,T,t),r[s++]=T[0],r[s++]=T[1]}}e.increaseVersion()}}var Z_=Math.sqrt,kp=Math.sin,xp=Math.cos,Jf=Math.PI;function Vk(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function jS(e,t){return(e[0]*t[0]+e[1]*t[1])/(Vk(e)*Vk(t))}function Uk(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(jS(e,t))}function Gk(e,t,r,n,i,o,a,s,l,u,c){var f=l*(Jf/180),h=xp(f)*(e-r)/2+kp(f)*(t-n)/2,d=-1*kp(f)*(e-r)/2+xp(f)*(t-n)/2,p=h*h/(a*a)+d*d/(s*s);p>1&&(a*=Z_(p),s*=Z_(p));var v=(i===o?-1:1)*Z_((a*a*(s*s)-a*a*(d*d)-s*s*(h*h))/(a*a*(d*d)+s*s*(h*h)))||0,g=v*a*d/s,m=v*-s*h/a,y=(e+r)/2+xp(f)*g-kp(f)*m,_=(t+n)/2+kp(f)*g+xp(f)*m,b=Uk([1,0],[(h-g)/a,(d-m)/s]),T=[(h-g)/a,(d-m)/s],S=[(-1*h-g)/a,(-1*d-m)/s],P=Uk(T,S);if(jS(T,S)<=-1&&(P=Jf),jS(T,S)>=1&&(P=0),P<0){var C=Math.round(P/Jf*1e6)/1e6;P=Jf*2+C%2*Jf}c.addData(u,y,_,a,s,b,P,f,o)}var QJ=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,tQ=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function eQ(e){var t=new Yl;if(!e)return t;var r=0,n=0,i=r,o=n,a,s=Yl.CMD,l=e.match(QJ);if(!l)return t;for(var u=0;u<l.length;u++){for(var c=l[u],f=c.charAt(0),h=void 0,d=c.match(tQ)||[],p=d.length,v=0;v<p;v++)d[v]=parseFloat(d[v]);for(var g=0;g<p;){var m=void 0,y=void 0,_=void 0,b=void 0,T=void 0,S=void 0,P=void 0,C=r,A=n,M=void 0,k=void 0;switch(f){case"l":r+=d[g++],n+=d[g++],h=s.L,t.addData(h,r,n);break;case"L":r=d[g++],n=d[g++],h=s.L,t.addData(h,r,n);break;case"m":r+=d[g++],n+=d[g++],h=s.M,t.addData(h,r,n),i=r,o=n,f="l";break;case"M":r=d[g++],n=d[g++],h=s.M,t.addData(h,r,n),i=r,o=n,f="L";break;case"h":r+=d[g++],h=s.L,t.addData(h,r,n);break;case"H":r=d[g++],h=s.L,t.addData(h,r,n);break;case"v":n+=d[g++],h=s.L,t.addData(h,r,n);break;case"V":n=d[g++],h=s.L,t.addData(h,r,n);break;case"C":h=s.C,t.addData(h,d[g++],d[g++],d[g++],d[g++],d[g++],d[g++]),r=d[g-2],n=d[g-1];break;case"c":h=s.C,t.addData(h,d[g++]+r,d[g++]+n,d[g++]+r,d[g++]+n,d[g++]+r,d[g++]+n),r+=d[g-2],n+=d[g-1];break;case"S":m=r,y=n,M=t.len(),k=t.data,a===s.C&&(m+=r-k[M-4],y+=n-k[M-3]),h=s.C,C=d[g++],A=d[g++],r=d[g++],n=d[g++],t.addData(h,m,y,C,A,r,n);break;case"s":m=r,y=n,M=t.len(),k=t.data,a===s.C&&(m+=r-k[M-4],y+=n-k[M-3]),h=s.C,C=r+d[g++],A=n+d[g++],r+=d[g++],n+=d[g++],t.addData(h,m,y,C,A,r,n);break;case"Q":C=d[g++],A=d[g++],r=d[g++],n=d[g++],h=s.Q,t.addData(h,C,A,r,n);break;case"q":C=d[g++]+r,A=d[g++]+n,r+=d[g++],n+=d[g++],h=s.Q,t.addData(h,C,A,r,n);break;case"T":m=r,y=n,M=t.len(),k=t.data,a===s.Q&&(m+=r-k[M-4],y+=n-k[M-3]),r=d[g++],n=d[g++],h=s.Q,t.addData(h,m,y,r,n);break;case"t":m=r,y=n,M=t.len(),k=t.data,a===s.Q&&(m+=r-k[M-4],y+=n-k[M-3]),r+=d[g++],n+=d[g++],h=s.Q,t.addData(h,m,y,r,n);break;case"A":_=d[g++],b=d[g++],T=d[g++],S=d[g++],P=d[g++],C=r,A=n,r=d[g++],n=d[g++],h=s.A,Gk(C,A,r,n,S,P,_,b,T,h,t);break;case"a":_=d[g++],b=d[g++],T=d[g++],S=d[g++],P=d[g++],C=r,A=n,r+=d[g++],n+=d[g++],h=s.A,Gk(C,A,r,n,S,P,_,b,T,h,t);break}}(f==="z"||f==="Z")&&(h=s.Z,t.addData(h),r=i,n=o),a=h}return t.toStatic(),t}var $9=function(e){Ee(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.applyTransform=function(r){},t}(he);function z9(e){return e.setData!=null}function V9(e,t){var r=eQ(e),n=ot({},t);return n.buildPath=function(i){if(z9(i)){i.setData(r.data);var o=i.getContext();o&&i.rebuildPath(o,1)}else{var o=i;r.rebuildPath(o,1)}},n.applyTransform=function(i){JJ(r,i),this.dirtyShape()},n}function rQ(e,t){return new $9(V9(e,t))}function nQ(e,t){var r=V9(e,t),n=function(i){Ee(o,i);function o(a){var s=i.call(this,a)||this;return s.applyTransform=r.applyTransform,s.buildPath=r.buildPath,s}return o}($9);return n}function iQ(e,t){for(var r=[],n=e.length,i=0;i<n;i++){var o=e[i];r.push(o.getUpdatedPathProxy(!0))}var a=new he(t);return a.createPathProxy(),a.buildPath=function(s){if(z9(s)){s.appendPath(r);var l=s.getContext();l&&s.rebuildPath(l,1)}},a}var oQ=function(){function e(){this.cx=0,this.cy=0,this.r=0}return e}(),U9=function(e){Ee(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new oQ},t.prototype.buildPath=function(r,n){r.moveTo(n.cx+n.r,n.cy),r.arc(n.cx,n.cy,n.r,0,Math.PI*2)},t}(he);U9.prototype.type="circle";const GP=U9;var aQ=function(){function e(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return e}(),G9=function(e){Ee(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new aQ},t.prototype.buildPath=function(r,n){var i=.5522848,o=n.cx,a=n.cy,s=n.rx,l=n.ry,u=s*i,c=l*i;r.moveTo(o-s,a),r.bezierCurveTo(o-s,a-c,o-u,a-l,o,a-l),r.bezierCurveTo(o+u,a-l,o+s,a-c,o+s,a),r.bezierCurveTo(o+s,a+c,o+u,a+l,o,a+l),r.bezierCurveTo(o-u,a+l,o-s,a+c,o-s,a),r.closePath()},t}(he);G9.prototype.type="ellipse";const j9=G9;var W9=Math.PI,K_=W9*2,rl=Math.sin,Ru=Math.cos,sQ=Math.acos,Er=Math.atan2,jk=Math.abs,md=Math.sqrt,Hh=Math.max,Yi=Math.min,ui=1e-4;function lQ(e,t,r,n,i,o,a,s){var l=r-e,u=n-t,c=a-i,f=s-o,h=f*l-c*u;if(!(h*h<ui))return h=(c*(t-o)-f*(e-i))/h,[e+h*l,t+h*u]}function Lp(e,t,r,n,i,o,a){var s=e-r,l=t-n,u=(a?o:-o)/md(s*s+l*l),c=u*l,f=-u*s,h=e+c,d=t+f,p=r+c,v=n+f,g=(h+p)/2,m=(d+v)/2,y=p-h,_=v-d,b=y*y+_*_,T=i-o,S=h*v-p*d,P=(_<0?-1:1)*md(Hh(0,T*T*b-S*S)),C=(S*_-y*P)/b,A=(-S*y-_*P)/b,M=(S*_+y*P)/b,k=(-S*y+_*P)/b,O=C-g,F=A-m,z=M-g,R=k-m;return O*O+F*F>z*z+R*R&&(C=M,A=k),{cx:C,cy:A,x0:-c,y0:-f,x1:C*(i/T-1),y1:A*(i/T-1)}}function uQ(e){var t;if(ut(e)){var r=e.length;if(!r)return e;r===1?t=[e[0],e[0],0,0]:r===2?t=[e[0],e[0],e[1],e[1]]:r===3?t=e.concat(e[2]):t=e}else t=[e,e,e,e];return t}function cQ(e,t){var r,n=Hh(t.r,0),i=Hh(t.r0||0,0),o=n>0,a=i>0;if(!(!o&&!a)){if(o||(n=i,i=0),i>n){var s=n;n=i,i=s}var l=t.startAngle,u=t.endAngle;if(!(isNaN(l)||isNaN(u))){var c=t.cx,f=t.cy,h=!!t.clockwise,d=jk(u-l),p=d>K_&&d%K_;if(p>ui&&(d=p),!(n>ui))e.moveTo(c,f);else if(d>K_-ui)e.moveTo(c+n*Ru(l),f+n*rl(l)),e.arc(c,f,n,l,u,!h),i>ui&&(e.moveTo(c+i*Ru(u),f+i*rl(u)),e.arc(c,f,i,u,l,h));else{var v=void 0,g=void 0,m=void 0,y=void 0,_=void 0,b=void 0,T=void 0,S=void 0,P=void 0,C=void 0,A=void 0,M=void 0,k=void 0,O=void 0,F=void 0,z=void 0,R=n*Ru(l),j=n*rl(l),Z=i*Ru(u),q=i*rl(u),tt=d>ui;if(tt){var Pt=t.cornerRadius;Pt&&(r=uQ(Pt),v=r[0],g=r[1],m=r[2],y=r[3]);var Ot=jk(n-i)/2;if(_=Yi(Ot,m),b=Yi(Ot,y),T=Yi(Ot,v),S=Yi(Ot,g),A=P=Hh(_,b),M=C=Hh(T,S),(P>ui||C>ui)&&(k=n*Ru(u),O=n*rl(u),F=i*Ru(l),z=i*rl(l),d<W9)){var bt=lQ(R,j,F,z,k,O,Z,q);if(bt){var wt=R-bt[0],Ht=j-bt[1],Y=k-bt[0],nt=O-bt[1],K=1/rl(sQ((wt*Y+Ht*nt)/(md(wt*wt+Ht*Ht)*md(Y*Y+nt*nt)))/2),dt=md(bt[0]*bt[0]+bt[1]*bt[1]);A=Yi(P,(n-dt)/(K+1)),M=Yi(C,(i-dt)/(K-1))}}}if(!tt)e.moveTo(c+R,f+j);else if(A>ui){var St=Yi(m,A),At=Yi(y,A),st=Lp(F,z,R,j,n,St,h),ct=Lp(k,O,Z,q,n,At,h);e.moveTo(c+st.cx+st.x0,f+st.cy+st.y0),A<P&&St===At?e.arc(c+st.cx,f+st.cy,A,Er(st.y0,st.x0),Er(ct.y0,ct.x0),!h):(St>0&&e.arc(c+st.cx,f+st.cy,St,Er(st.y0,st.x0),Er(st.y1,st.x1),!h),e.arc(c,f,n,Er(st.cy+st.y1,st.cx+st.x1),Er(ct.cy+ct.y1,ct.cx+ct.x1),!h),At>0&&e.arc(c+ct.cx,f+ct.cy,At,Er(ct.y1,ct.x1),Er(ct.y0,ct.x0),!h))}else e.moveTo(c+R,f+j),e.arc(c,f,n,l,u,!h);if(!(i>ui)||!tt)e.lineTo(c+Z,f+q);else if(M>ui){var St=Yi(v,M),At=Yi(g,M),st=Lp(Z,q,k,O,i,-At,h),ct=Lp(R,j,F,z,i,-St,h);e.lineTo(c+st.cx+st.x0,f+st.cy+st.y0),M<C&&St===At?e.arc(c+st.cx,f+st.cy,M,Er(st.y0,st.x0),Er(ct.y0,ct.x0),!h):(At>0&&e.arc(c+st.cx,f+st.cy,At,Er(st.y0,st.x0),Er(st.y1,st.x1),!h),e.arc(c,f,i,Er(st.cy+st.y1,st.cx+st.x1),Er(ct.cy+ct.y1,ct.cx+ct.x1),h),St>0&&e.arc(c+ct.cx,f+ct.cy,St,Er(ct.y1,ct.x1),Er(ct.y0,ct.x0),!h))}else e.lineTo(c+Z,f+q),e.arc(c,f,i,u,l,h)}e.closePath()}}}var fQ=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return e}(),H9=function(e){Ee(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new fQ},t.prototype.buildPath=function(r,n){cQ(r,n)},t.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},t}(he);H9.prototype.type="sector";const k0=H9;var hQ=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return e}(),X9=function(e){Ee(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new hQ},t.prototype.buildPath=function(r,n){var i=n.cx,o=n.cy,a=Math.PI*2;r.moveTo(i+n.r,o),r.arc(i,o,n.r,0,a,!1),r.moveTo(i+n.r0,o),r.arc(i,o,n.r0,0,a,!0)},t}(he);X9.prototype.type="ring";const Y9=X9;function dQ(e,t,r,n){var i=[],o=[],a=[],s=[],l,u,c,f;if(n){c=[1/0,1/0],f=[-1/0,-1/0];for(var h=0,d=e.length;h<d;h++)hc(c,c,e[h]),dc(f,f,e[h]);hc(c,c,n[0]),dc(f,f,n[1])}for(var h=0,d=e.length;h<d;h++){var p=e[h];if(r)l=e[h?h-1:d-1],u=e[(h+1)%d];else if(h===0||h===d-1){i.push(Nq(e[h]));continue}else l=e[h-1],u=e[h+1];$7(o,u,l),d_(o,o,t);var v=gS(p,l),g=gS(p,u),m=v+g;m!==0&&(v/=m,g/=m),d_(a,o,-v),d_(s,o,g);var y=RM([],p,a),_=RM([],p,s);n&&(dc(y,y,c),hc(y,y,f),dc(_,_,c),hc(_,_,f)),i.push(y),i.push(_)}return r&&i.push(i.shift()),i}function q9(e,t,r){var n=t.smooth,i=t.points;if(i&&i.length>=2){if(n){var o=dQ(i,n,r,t.smoothConstraint);e.moveTo(i[0][0],i[0][1]);for(var a=i.length,s=0;s<(r?a:a-1);s++){var l=o[s*2],u=o[s*2+1],c=i[(s+1)%a];e.bezierCurveTo(l[0],l[1],u[0],u[1],c[0],c[1])}}else{e.moveTo(i[0][0],i[0][1]);for(var s=1,f=i.length;s<f;s++)e.lineTo(i[s][0],i[s][1])}r&&e.closePath()}}var pQ=function(){function e(){this.points=null,this.smooth=0,this.smoothConstraint=null}return e}(),Z9=function(e){Ee(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new pQ},t.prototype.buildPath=function(r,n){q9(r,n,!0)},t}(he);Z9.prototype.type="polygon";const Yd=Z9;var vQ=function(){function e(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return e}(),K9=function(e){Ee(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new vQ},t.prototype.buildPath=function(r,n){q9(r,n,!1)},t}(he);K9.prototype.type="polyline";const J9=K9;var gQ={},mQ=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}(),Q9=function(e){Ee(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new mQ},t.prototype.buildPath=function(r,n){var i,o,a,s;if(this.subPixelOptimize){var l=A9(gQ,n,this.style);i=l.x1,o=l.y1,a=l.x2,s=l.y2}else i=n.x1,o=n.y1,a=n.x2,s=n.y2;var u=n.percent;u!==0&&(r.moveTo(i,o),u<1&&(a=i*(1-u)+a*u,s=o*(1-u)+s*u),r.lineTo(a,s))},t.prototype.pointAt=function(r){var n=this.shape;return[n.x1*(1-r)+n.x2*r,n.y1*(1-r)+n.y2*r]},t}(he);Q9.prototype.type="line";const Ts=Q9;var Jr=[],yQ=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return e}();function Wk(e,t,r){var n=e.cpx2,i=e.cpy2;return n!=null||i!=null?[(r?HM:or)(e.x1,e.cpx1,e.cpx2,e.x2,t),(r?HM:or)(e.y1,e.cpy1,e.cpy2,e.y2,t)]:[(r?XM:kr)(e.x1,e.cpx1,e.x2,t),(r?XM:kr)(e.y1,e.cpy1,e.y2,t)]}var tN=function(e){Ee(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new yQ},t.prototype.buildPath=function(r,n){var i=n.x1,o=n.y1,a=n.x2,s=n.y2,l=n.cpx1,u=n.cpy1,c=n.cpx2,f=n.cpy2,h=n.percent;h!==0&&(r.moveTo(i,o),c==null||f==null?(h<1&&(Tm(i,l,a,h,Jr),l=Jr[1],a=Jr[2],Tm(o,u,s,h,Jr),u=Jr[1],s=Jr[2]),r.quadraticCurveTo(l,u,a,s)):(h<1&&(Sm(i,l,c,a,h,Jr),l=Jr[1],c=Jr[2],a=Jr[3],Sm(o,u,f,s,h,Jr),u=Jr[1],f=Jr[2],s=Jr[3]),r.bezierCurveTo(l,u,c,f,a,s)))},t.prototype.pointAt=function(r){return Wk(this.shape,r,!1)},t.prototype.tangentAt=function(r){var n=Wk(this.shape,r,!0);return PP(n,n)},t}(he);tN.prototype.type="bezier-curve";const j1=tN;var _Q=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),eN=function(e){Ee(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new _Q},t.prototype.buildPath=function(r,n){var i=n.cx,o=n.cy,a=Math.max(n.r,0),s=n.startAngle,l=n.endAngle,u=n.clockwise,c=Math.cos(s),f=Math.sin(s);r.moveTo(c*a+i,f*a+o),r.arc(i,o,a,s,l,!u)},t}(he);eN.prototype.type="arc";const jP=eN;var bQ=function(e){Ee(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="compound",r}return t.prototype._updatePathDirty=function(){for(var r=this.shape.paths,n=this.shapeChanged(),i=0;i<r.length;i++)n=n||r[i].shapeChanged();n&&this.dirtyShape()},t.prototype.beforeBrush=function(){this._updatePathDirty();for(var r=this.shape.paths||[],n=this.getGlobalScale(),i=0;i<r.length;i++)r[i].path||r[i].createPathProxy(),r[i].path.setScale(n[0],n[1],r[i].segmentIgnoreThreshold)},t.prototype.buildPath=function(r,n){for(var i=n.paths||[],o=0;o<i.length;o++)i[o].buildPath(r,i[o].shape,!0)},t.prototype.afterBrush=function(){for(var r=this.shape.paths||[],n=0;n<r.length;n++)r[n].pathUpdated()},t.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),he.prototype.getBoundingRect.call(this)},t}(he);const wQ=bQ;var SQ=function(){function e(t){this.colorStops=t||[]}return e.prototype.addColorStop=function(t,r){this.colorStops.push({offset:t,color:r})},e}();const rN=SQ;var TQ=function(e){Ee(t,e);function t(r,n,i,o,a,s){var l=e.call(this,a)||this;return l.x=r==null?0:r,l.y=n==null?0:n,l.x2=i==null?1:i,l.y2=o==null?0:o,l.type="linear",l.global=s||!1,l}return t}(rN);const WP=TQ;var PQ=function(e){Ee(t,e);function t(r,n,i,o,a){var s=e.call(this,o)||this;return s.x=r==null?.5:r,s.y=n==null?.5:n,s.r=i==null?.5:i,s.type="radial",s.global=a||!1,s}return t}(rN);const EQ=PQ;var nl=[0,0],il=[0,0],Ip=new ke,Op=new ke,AQ=function(){function e(t,r){this._corners=[],this._axes=[],this._origin=[0,0];for(var n=0;n<4;n++)this._corners[n]=new ke;for(var n=0;n<2;n++)this._axes[n]=new ke;t&&this.fromBoundingRect(t,r)}return e.prototype.fromBoundingRect=function(t,r){var n=this._corners,i=this._axes,o=t.x,a=t.y,s=o+t.width,l=a+t.height;if(n[0].set(o,a),n[1].set(s,a),n[2].set(s,l),n[3].set(o,l),r)for(var u=0;u<4;u++)n[u].transform(r);ke.sub(i[0],n[1],n[0]),ke.sub(i[1],n[3],n[0]),i[0].normalize(),i[1].normalize();for(var u=0;u<2;u++)this._origin[u]=i[u].dot(n[0])},e.prototype.intersect=function(t,r){var n=!0,i=!r;return Ip.set(1/0,1/0),Op.set(0,0),!this._intersectCheckOneSide(this,t,Ip,Op,i,1)&&(n=!1,i)||!this._intersectCheckOneSide(t,this,Ip,Op,i,-1)&&(n=!1,i)||i||ke.copy(r,n?Ip:Op),n},e.prototype._intersectCheckOneSide=function(t,r,n,i,o,a){for(var s=!0,l=0;l<2;l++){var u=this._axes[l];if(this._getProjMinMaxOnAxis(l,t._corners,nl),this._getProjMinMaxOnAxis(l,r._corners,il),nl[1]<il[0]||nl[0]>il[1]){if(s=!1,o)return s;var c=Math.abs(il[0]-nl[1]),f=Math.abs(nl[0]-il[1]);Math.min(c,f)>i.len()&&(c<f?ke.scale(i,u,-c*a):ke.scale(i,u,f*a))}else if(n){var c=Math.abs(il[0]-nl[1]),f=Math.abs(nl[0]-il[1]);Math.min(c,f)<n.len()&&(c<f?ke.scale(n,u,c*a):ke.scale(n,u,-f*a))}}return s},e.prototype._getProjMinMaxOnAxis=function(t,r,n){for(var i=this._axes[t],o=this._origin,a=r[0].dot(i)+o[t],s=a,l=a,u=1;u<r.length;u++){var c=r[u].dot(i)+o[t];s=Math.min(c,s),l=Math.max(c,l)}n[0]=s,n[1]=l},e}();const km=AQ;var CQ=[],MQ=function(e){Ee(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.notClear=!0,r.incremental=!0,r._displayables=[],r._temporaryDisplayables=[],r._cursor=0,r}return t.prototype.traverse=function(r,n){r.call(n,this)},t.prototype.useStyle=function(){this.style={}},t.prototype.getCursor=function(){return this._cursor},t.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},t.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},t.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},t.prototype.addDisplayable=function(r,n){n?this._temporaryDisplayables.push(r):this._displayables.push(r),this.markRedraw()},t.prototype.addDisplayables=function(r,n){n=n||!1;for(var i=0;i<r.length;i++)this.addDisplayable(r[i],n)},t.prototype.getDisplayables=function(){return this._displayables},t.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},t.prototype.eachPendingDisplayable=function(r){for(var n=this._cursor;n<this._displayables.length;n++)r&&r(this._displayables[n]);for(var n=0;n<this._temporaryDisplayables.length;n++)r&&r(this._temporaryDisplayables[n])},t.prototype.update=function(){this.updateTransform();for(var r=this._cursor;r<this._displayables.length;r++){var n=this._displayables[r];n.parent=this,n.update(),n.parent=null}for(var r=0;r<this._temporaryDisplayables.length;r++){var n=this._temporaryDisplayables[r];n.parent=this,n.update(),n.parent=null}},t.prototype.getBoundingRect=function(){if(!this._rect){for(var r=new ae(1/0,1/0,-1/0,-1/0),n=0;n<this._displayables.length;n++){var i=this._displayables[n],o=i.getBoundingRect().clone();i.needLocalTransform()&&o.applyTransform(i.getLocalTransform(CQ)),r.union(o)}this._rect=r}return this._rect},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect();if(o.contain(i[0],i[1]))for(var a=0;a<this._displayables.length;a++){var s=this._displayables[a];if(s.contain(r,n))return!0}return!1},t}(su);const kQ=MQ;var xQ=Oe();function HP(e,t,r,n,i){var o;if(t&&t.ecModel){var a=t.ecModel.getUpdatePayload();o=a&&a.animation}var s=t&&t.isAnimationEnabled(),l=e==="update";if(s){var u=void 0,c=void 0,f=void 0;n?(u=qt(n.duration,200),c=qt(n.easing,"cubicOut"),f=0):(u=t.getShallow(l?"animationDurationUpdate":"animationDuration"),c=t.getShallow(l?"animationEasingUpdate":"animationEasing"),f=t.getShallow(l?"animationDelayUpdate":"animationDelay")),o&&(o.duration!=null&&(u=o.duration),o.easing!=null&&(c=o.easing),o.delay!=null&&(f=o.delay)),Ut(f)&&(f=f(r,i)),Ut(u)&&(u=u(r));var h={duration:u||0,delay:f,easing:c};return h}else return null}function XP(e,t,r,n,i,o,a){var s=!1,l;Ut(i)?(a=o,o=i,i=null):It(i)&&(o=i.cb,a=i.during,s=i.isFrom,l=i.removeOpt,i=i.dataIndex);var u=e==="leave";u||t.stopAnimation("leave");var c=HP(e,n,i,u?l||{}:null,n&&n.getAnimationDelayParams?n.getAnimationDelayParams(t,i):null);if(c&&c.duration>0){var f=c.duration,h=c.delay,d=c.easing,p={duration:f,delay:h||0,easing:d,done:o,force:!!o||!!a,setToFinal:!u,scope:e,during:a};s?t.animateFrom(r,p):t.animateTo(r,p)}else t.stopAnimation(),!s&&t.attr(r),a&&a(1),o&&o()}function hr(e,t,r,n,i,o){XP("update",e,t,r,n,i,o)}function So(e,t,r,n,i,o){XP("enter",e,t,r,n,i,o)}function yd(e){if(!e.__zr)return!0;for(var t=0;t<e.animators.length;t++){var r=e.animators[t];if(r.scope==="leave")return!0}return!1}function Zl(e,t,r,n,i,o){yd(e)||XP("leave",e,t,r,n,i,o)}function Hk(e,t,r,n){e.removeTextContent(),e.removeTextGuideLine(),Zl(e,{style:{opacity:0}},t,r,n)}function WS(e,t,r){function n(){e.parent&&e.parent.remove(e)}e.isGroup?e.traverse(function(i){i.isGroup||Hk(i,t,r,n)}):Hk(e,t,r,n)}function nN(e){xQ(e).oldStyle=e.style}var xm=Math.max,Lm=Math.min,HS={};function LQ(e){return he.extend(e)}var IQ=nQ;function OQ(e,t){return IQ(e,t)}function Ni(e,t){HS[e]=t}function iN(e){if(HS.hasOwnProperty(e))return HS[e]}function W1(e,t,r,n){var i=rQ(e,t);return r&&(n==="center"&&(r=aN(r,i.getBoundingRect())),sN(i,r)),i}function oN(e,t,r){var n=new ma({style:{image:e,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(i){if(r==="center"){var o={width:i.width,height:i.height};n.setStyle(aN(t,o))}}});return n}function aN(e,t){var r=t.width/t.height,n=e.height*r,i;n<=e.width?i=e.height:(n=e.width,i=n/r);var o=e.x+e.width/2,a=e.y+e.height/2;return{x:o-n/2,y:a-i/2,width:n,height:i}}var RQ=iQ;function sN(e,t){if(!!e.applyTransform){var r=e.getBoundingRect(),n=r.calculateTransform(t);e.applyTransform(n)}}function qd(e,t){return A9(e,e,{lineWidth:t}),e}function DQ(e){return C9(e.shape,e.shape,e.style),e}var NQ=Al;function Bg(e,t){for(var r=AP([]);e&&e!==t;)Ac(r,e.getLocalTransform(),r),e=e.parent;return r}function Mc(e,t,r){return t&&!Fr(t)&&(t=El.getLocalTransform(t)),r&&(t=B1([],t)),Xr([],e,t)}function lN(e,t,r){var n=t[4]===0||t[5]===0||t[0]===0?1:Math.abs(2*t[4]/t[0]),i=t[4]===0||t[5]===0||t[2]===0?1:Math.abs(2*t[4]/t[2]),o=[e==="left"?-n:e==="right"?n:0,e==="top"?-i:e==="bottom"?i:0];return o=Mc(o,t,r),Math.abs(o[0])>Math.abs(o[1])?o[0]>0?"right":"left":o[1]>0?"bottom":"top"}function Xk(e){return!e.isGroup}function FQ(e){return e.shape!=null}function uN(e,t,r){if(!e||!t)return;function n(a){var s={};return a.traverse(function(l){Xk(l)&&l.anid&&(s[l.anid]=l)}),s}function i(a){var s={x:a.x,y:a.y,rotation:a.rotation};return FQ(a)&&(s.shape=ot({},a.shape)),s}var o=n(e);t.traverse(function(a){if(Xk(a)&&a.anid){var s=o[a.anid];if(s){var l=i(a);a.attr(i(s)),hr(a,l,r,ie(a).dataIndex)}}})}function BQ(e,t){return Ct(e,function(r){var n=r[0];n=xm(n,t.x),n=Lm(n,t.x+t.width);var i=r[1];return i=xm(i,t.y),i=Lm(i,t.y+t.height),[n,i]})}function $Q(e,t){var r=xm(e.x,t.x),n=Lm(e.x+e.width,t.x+t.width),i=xm(e.y,t.y),o=Lm(e.y+e.height,t.y+t.height);if(n>=r&&o>=i)return{x:r,y:i,width:n-r,height:o-i}}function YP(e,t,r){var n=ot({rectHover:!0},t),i=n.style={strokeNoScale:!0};if(r=r||{x:-1,y:-1,width:2,height:2},e)return e.indexOf("image://")===0?(i.image=e.slice(8),te(i,r),new ma(n)):W1(e.replace("path://",""),n,r,"center")}function zQ(e,t,r,n,i){for(var o=0,a=i[i.length-1];o<i.length;o++){var s=i[o];if(cN(e,t,r,n,s[0],s[1],a[0],a[1]))return!0;a=s}}function cN(e,t,r,n,i,o,a,s){var l=r-e,u=n-t,c=a-i,f=s-o,h=J_(c,f,l,u);if(VQ(h))return!1;var d=e-i,p=t-o,v=J_(d,p,l,u)/h;if(v<0||v>1)return!1;var g=J_(d,p,c,f)/h;return!(g<0||g>1)}function J_(e,t,r,n){return e*n-r*t}function VQ(e){return e<=1e-6&&e>=-1e-6}function qP(e){var t=e.itemTooltipOption,r=e.componentModel,n=e.itemName,i=Et(t)?{formatter:t}:t,o=r.mainType,a=r.componentIndex,s={componentType:o,name:n,$vars:["name"]};s[o+"Index"]=a;var l=e.formatterParamsExtra;l&&N(ve(l),function(c){ft(s,c)||(s[c]=l[c],s.$vars.push(c))});var u=ie(e.el);u.componentMainType=o,u.componentIndex=a,u.tooltipConfig={name:n,option:te({content:n,formatterParams:s},i)}}function Yk(e,t){var r;e.isGroup&&(r=t(e)),r||e.traverse(t)}function lf(e,t){if(e)if(ut(e))for(var r=0;r<e.length;r++)Yk(e[r],t);else Yk(e,t)}Ni("circle",GP);Ni("ellipse",j9);Ni("sector",k0);Ni("ring",Y9);Ni("polygon",Yd);Ni("polyline",J9);Ni("rect",Ke);Ni("line",Ts);Ni("bezierCurve",j1);Ni("arc",jP);const UQ=Object.freeze(Object.defineProperty({__proto__:null,updateProps:hr,initProps:So,removeElement:Zl,removeElementWithFadeOut:WS,isElementRemoved:yd,extendShape:LQ,extendPath:OQ,registerShape:Ni,getShapeClass:iN,makePath:W1,makeImage:oN,mergePath:RQ,resizePath:sN,subPixelOptimizeLine:qd,subPixelOptimizeRect:DQ,subPixelOptimize:NQ,getTransform:Bg,applyTransform:Mc,transformDirection:lN,groupTransition:uN,clipPointsByRect:BQ,clipRectByRect:$Q,createIcon:YP,linePolygonIntersect:zQ,lineLineIntersect:cN,setTooltipConfig:qP,traverseElements:lf,Group:De,Image:ma,Text:Je,Circle:GP,Ellipse:j9,Sector:k0,Ring:Y9,Polygon:Yd,Polyline:J9,Rect:Ke,Line:Ts,BezierCurve:j1,Arc:jP,IncrementalDisplayable:kQ,CompoundPath:wQ,LinearGradient:WP,RadialGradient:EQ,BoundingRect:ae,OrientedBoundingRect:km,Point:ke,Path:he},Symbol.toStringTag,{value:"Module"}));var H1={};function GQ(e,t){for(var r=0;r<Jn.length;r++){var n=Jn[r],i=t[n],o=e.ensureState(n);o.style=o.style||{},o.style.text=i}var a=e.currentStates.slice();e.clearStates(!0),e.setStyle({text:t.normal}),e.useStates(a,!0)}function qk(e,t,r){var n=e.labelFetcher,i=e.labelDataIndex,o=e.labelDimIndex,a=t.normal,s;n&&(s=n.getFormattedLabel(i,"normal",null,o,a&&a.get("formatter"),r!=null?{interpolatedValue:r}:null)),s==null&&(s=Ut(e.defaultText)?e.defaultText(i,e,r):e.defaultText);for(var l={normal:s},u=0;u<Jn.length;u++){var c=Jn[u],f=t[c];l[c]=qt(n?n.getFormattedLabel(i,c,null,o,f&&f.get("formatter")):null,s)}return l}function uf(e,t,r,n){r=r||H1;for(var i=e instanceof Je,o=!1,a=0;a<Lk.length;a++){var s=t[Lk[a]];if(s&&s.getShallow("show")){o=!0;break}}var l=i?e:e.getTextContent();if(o){i||(l||(l=new Je,e.setTextContent(l)),e.stateProxy&&(l.stateProxy=e.stateProxy));var u=qk(r,t),c=t.normal,f=!!c.getShallow("show"),h=an(c,n&&n.normal,r,!1,!i);h.text=u.normal,i||e.setTextConfig(Im(c,r,!1));for(var a=0;a<Jn.length;a++){var d=Jn[a],s=t[d];if(s){var p=l.ensureState(d),v=!!qt(s.getShallow("show"),f);if(v!==f&&(p.ignore=!v),p.style=an(s,n&&n[d],r,!0,!i),p.style.text=u[d],!i){var g=e.ensureState(d);g.textConfig=Im(s,r,!0)}}}l.silent=!!c.getShallow("silent"),l.style.x!=null&&(h.x=l.style.x),l.style.y!=null&&(h.y=l.style.y),l.ignore=!f,l.useStyle(h),l.dirty(),r.enableTextSetter&&(X1(l).setLabelText=function(m){var y=qk(r,t,m);GQ(l,y)})}else l&&(l.ignore=!0);e.dirty()}function lu(e,t){t=t||"label";for(var r={normal:e.getModel(t)},n=0;n<Jn.length;n++){var i=Jn[n];r[i]=e.getModel([i,t])}return r}function an(e,t,r,n,i){var o={};return jQ(o,e,r,n,i),t&&ot(o,t),o}function Im(e,t,r){t=t||{};var n={},i,o=e.getShallow("rotate"),a=qt(e.getShallow("distance"),r?null:5),s=e.getShallow("offset");return i=e.getShallow("position")||(r?null:"inside"),i==="outside"&&(i=t.defaultOutsidePosition||"top"),i!=null&&(n.position=i),s!=null&&(n.offset=s),o!=null&&(o*=Math.PI/180,n.rotation=o),a!=null&&(n.distance=a),n.outsideFill=e.get("color")==="inherit"?t.inheritColor||null:"auto",n}function jQ(e,t,r,n,i){r=r||H1;var o=t.ecModel,a=o&&o.option.textStyle,s=WQ(t),l;if(s){l={};for(var u in s)if(s.hasOwnProperty(u)){var c=t.getModel(["rich",u]);Qk(l[u]={},c,a,r,n,i,!1,!0)}}l&&(e.rich=l);var f=t.get("overflow");f&&(e.overflow=f);var h=t.get("minMargin");h!=null&&(e.margin=h),Qk(e,t,a,r,n,i,!0,!1)}function WQ(e){for(var t;e&&e!==e.ecModel;){var r=(e.option||H1).rich;if(r){t=t||{};for(var n=ve(r),i=0;i<n.length;i++){var o=n[i];t[o]=1}}e=e.parentModel}return t}var Zk=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],Kk=["align","lineHeight","width","height","tag","verticalAlign"],Jk=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function Qk(e,t,r,n,i,o,a,s){r=!i&&r||H1;var l=n&&n.inheritColor,u=t.getShallow("color"),c=t.getShallow("textBorderColor"),f=qt(t.getShallow("opacity"),r.opacity);(u==="inherit"||u==="auto")&&(l?u=l:u=null),(c==="inherit"||c==="auto")&&(l?c=l:c=null),o||(u=u||r.color,c=c||r.textBorderColor),u!=null&&(e.fill=u),c!=null&&(e.stroke=c);var h=qt(t.getShallow("textBorderWidth"),r.textBorderWidth);h!=null&&(e.lineWidth=h);var d=qt(t.getShallow("textBorderType"),r.textBorderType);d!=null&&(e.lineDash=d);var p=qt(t.getShallow("textBorderDashOffset"),r.textBorderDashOffset);p!=null&&(e.lineDashOffset=p),!i&&f==null&&!s&&(f=n&&n.defaultOpacity),f!=null&&(e.opacity=f),!i&&!o&&e.fill==null&&n.inheritColor&&(e.fill=n.inheritColor);for(var v=0;v<Zk.length;v++){var g=Zk[v],m=qt(t.getShallow(g),r[g]);m!=null&&(e[g]=m)}for(var v=0;v<Kk.length;v++){var g=Kk[v],m=t.getShallow(g);m!=null&&(e[g]=m)}if(e.verticalAlign==null){var y=t.getShallow("baseline");y!=null&&(e.verticalAlign=y)}if(!a||!n.disableBox){for(var v=0;v<Jk.length;v++){var g=Jk[v],m=t.getShallow(g);m!=null&&(e[g]=m)}var _=t.getShallow("borderType");_!=null&&(e.borderDash=_),(e.backgroundColor==="auto"||e.backgroundColor==="inherit")&&l&&(e.backgroundColor=l),(e.borderColor==="auto"||e.borderColor==="inherit")&&l&&(e.borderColor=l)}}function fN(e,t){var r=t&&t.getModel("textStyle");return po([e.fontStyle||r&&r.getShallow("fontStyle")||"",e.fontWeight||r&&r.getShallow("fontWeight")||"",(e.fontSize||r&&r.getShallow("fontSize")||12)+"px",e.fontFamily||r&&r.getShallow("fontFamily")||"sans-serif"].join(" "))}var X1=Oe();function HQ(e,t,r,n){if(!!e){var i=X1(e);i.prevValue=i.value,i.value=r;var o=t.normal;i.valueAnimation=o.get("valueAnimation"),i.valueAnimation&&(i.precision=o.get("precision"),i.defaultInterpolatedText=n,i.statesModels=t)}}var XQ=["textStyle","color"],Q_=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],t2=new Je,YQ=function(){function e(){}return e.prototype.getTextColor=function(t){var r=this.ecModel;return this.getShallow("color")||(!t&&r?r.get(XQ):null)},e.prototype.getFont=function(){return fN({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},e.prototype.getTextRect=function(t){for(var r={text:t,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},n=0;n<Q_.length;n++)r[Q_[n]]=this.getShallow(Q_[n]);return t2.useStyle(r),t2.update(),t2.getBoundingRect()},e}();const qQ=YQ;var hN=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],ZQ=jd(hN),KQ=function(){function e(){}return e.prototype.getLineStyle=function(t){return ZQ(this,t)},e}(),dN=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],JQ=jd(dN),QQ=function(){function e(){}return e.prototype.getItemStyle=function(t,r){return JQ(this,t,r)},e}(),uu=function(){function e(t,r,n){this.parentModel=r,this.ecModel=n,this.option=t}return e.prototype.init=function(t,r,n){},e.prototype.mergeOption=function(t,r){oe(this.option,t,!0)},e.prototype.get=function(t,r){return t==null?this.option:this._doGet(this.parsePath(t),!r&&this.parentModel)},e.prototype.getShallow=function(t,r){var n=this.option,i=n==null?n:n[t];if(i==null&&!r){var o=this.parentModel;o&&(i=o.getShallow(t))}return i},e.prototype.getModel=function(t,r){var n=t!=null,i=n?this.parsePath(t):null,o=n?this._doGet(i):this.option;return r=r||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(i)),new e(o,r,this.ecModel)},e.prototype.isEmpty=function(){return this.option==null},e.prototype.restoreData=function(){},e.prototype.clone=function(){var t=this.constructor;return new t(zt(this.option))},e.prototype.parsePath=function(t){return typeof t=="string"?t.split("."):t},e.prototype.resolveParentPath=function(t){return t},e.prototype.isAnimationEnabled=function(){if(!Xt.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},e.prototype._doGet=function(t,r){var n=this.option;if(!t)return n;for(var i=0;i<t.length&&!(!!t[i]&&(n=n&&typeof n=="object"?n[t[i]]:null,n==null));i++);return n==null&&r&&(n=r._doGet(this.resolveParentPath(t),r.parentModel)),n},e}();DP(uu);RK(uu);Ri(uu,KQ);Ri(uu,QQ);Ri(uu,$K);Ri(uu,qQ);const br=uu;var ttt=Math.round(Math.random()*10);function Y1(e){return[e||"",ttt++].join("_")}function ett(e){var t={};e.registerSubTypeDefaulter=function(r,n){var i=go(r);t[i.main]=n},e.determineSubType=function(r,n){var i=n.type;if(!i){var o=go(r).main;e.hasSubTypes(r)&&t[o]&&(i=t[o](n))}return i}}function rtt(e,t){e.topologicalTravel=function(o,a,s,l){if(!o.length)return;var u=r(a),c=u.graph,f=u.noEntryList,h={};for(N(o,function(y){h[y]=!0});f.length;){var d=f.pop(),p=c[d],v=!!h[d];v&&(s.call(l,d,p.originalDeps.slice()),delete h[d]),N(p.successor,v?m:g)}N(h,function(){var y="";throw new Error(y)});function g(y){c[y].entryCount--,c[y].entryCount===0&&f.push(y)}function m(y){h[y]=!0,g(y)}};function r(o){var a={},s=[];return N(o,function(l){var u=n(a,l),c=u.originalDeps=t(l),f=i(c,o);u.entryCount=f.length,u.entryCount===0&&s.push(l),N(f,function(h){ce(u.predecessor,h)<0&&u.predecessor.push(h);var d=n(a,h);ce(d.successor,h)<0&&d.successor.push(l)})}),{graph:a,noEntryList:s}}function n(o,a){return o[a]||(o[a]={predecessor:[],successor:[]}),o[a]}function i(o,a){var s=[];return N(o,function(l){ce(a,l)>=0&&s.push(l)}),s}}function q1(e,t){return oe(oe({},e,!0),t,!0)}const ntt={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},itt={time:{month:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"],monthAbbr:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],dayOfWeek:["\u661F\u671F\u65E5","\u661F\u671F\u4E00","\u661F\u671F\u4E8C","\u661F\u671F\u4E09","\u661F\u671F\u56DB","\u661F\u671F\u4E94","\u661F\u671F\u516D"],dayOfWeekAbbr:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"]},legend:{selector:{all:"\u5168\u9009",inverse:"\u53CD\u9009"}},toolbox:{brush:{title:{rect:"\u77E9\u5F62\u9009\u62E9",polygon:"\u5708\u9009",lineX:"\u6A2A\u5411\u9009\u62E9",lineY:"\u7EB5\u5411\u9009\u62E9",keep:"\u4FDD\u6301\u9009\u62E9",clear:"\u6E05\u9664\u9009\u62E9"}},dataView:{title:"\u6570\u636E\u89C6\u56FE",lang:["\u6570\u636E\u89C6\u56FE","\u5173\u95ED","\u5237\u65B0"]},dataZoom:{title:{zoom:"\u533A\u57DF\u7F29\u653E",back:"\u533A\u57DF\u7F29\u653E\u8FD8\u539F"}},magicType:{title:{line:"\u5207\u6362\u4E3A\u6298\u7EBF\u56FE",bar:"\u5207\u6362\u4E3A\u67F1\u72B6\u56FE",stack:"\u5207\u6362\u4E3A\u5806\u53E0",tiled:"\u5207\u6362\u4E3A\u5E73\u94FA"}},restore:{title:"\u8FD8\u539F"},saveAsImage:{title:"\u4FDD\u5B58\u4E3A\u56FE\u7247",lang:["\u53F3\u952E\u53E6\u5B58\u4E3A\u56FE\u7247"]}},series:{typeNames:{pie:"\u997C\u56FE",bar:"\u67F1\u72B6\u56FE",line:"\u6298\u7EBF\u56FE",scatter:"\u6563\u70B9\u56FE",effectScatter:"\u6D9F\u6F2A\u6563\u70B9\u56FE",radar:"\u96F7\u8FBE\u56FE",tree:"\u6811\u56FE",treemap:"\u77E9\u5F62\u6811\u56FE",boxplot:"\u7BB1\u578B\u56FE",candlestick:"K\u7EBF\u56FE",k:"K\u7EBF\u56FE",heatmap:"\u70ED\u529B\u56FE",map:"\u5730\u56FE",parallel:"\u5E73\u884C\u5750\u6807\u56FE",lines:"\u7EBF\u56FE",graph:"\u5173\u7CFB\u56FE",sankey:"\u6851\u57FA\u56FE",funnel:"\u6F0F\u6597\u56FE",gauge:"\u4EEA\u8868\u76D8\u56FE",pictorialBar:"\u8C61\u5F62\u67F1\u56FE",themeRiver:"\u4E3B\u9898\u6CB3\u6D41\u56FE",sunburst:"\u65ED\u65E5\u56FE"}},aria:{general:{withTitle:"\u8FD9\u662F\u4E00\u4E2A\u5173\u4E8E\u201C{title}\u201D\u7684\u56FE\u8868\u3002",withoutTitle:"\u8FD9\u662F\u4E00\u4E2A\u56FE\u8868\uFF0C"},series:{single:{prefix:"",withName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\uFF0C\u8868\u793A{seriesName}\u3002",withoutName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\u3002"},multiple:{prefix:"\u5B83\u7531{seriesCount}\u4E2A\u56FE\u8868\u7CFB\u5217\u7EC4\u6210\u3002",withName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A\u8868\u793A{seriesName}\u7684{seriesType}\uFF0C",withoutName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A{seriesType}\uFF0C",separator:{middle:"\uFF1B",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636E\u662F\u2014\u2014",partialData:"\u5176\u4E2D\uFF0C\u524D{displayCnt}\u9879\u662F\u2014\u2014",withName:"{name}\u7684\u6570\u636E\u662F{value}",withoutName:"{value}",separator:{middle:"\uFF0C",end:""}}}};var Om="ZH",ZP="EN",Zd=ZP,$g={},KP={},pN=Xt.domSupported?function(){var e=(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase();return e.indexOf(Om)>-1?Om:Zd}():Zd;function vN(e,t){e=e.toUpperCase(),KP[e]=new br(t),$g[e]=t}function ott(e){if(Et(e)){var t=$g[e.toUpperCase()]||{};return e===Om||e===ZP?zt(t):oe(zt(t),zt($g[Zd]),!1)}else return oe(zt(e),zt($g[Zd]),!1)}function att(e){return KP[e]}function stt(){return KP[Zd]}vN(ZP,ntt);vN(Om,itt);var JP=1e3,QP=JP*60,_d=QP*60,Wn=_d*24,t4=Wn*365,Xh={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},Rp="{yyyy}-{MM}-{dd}",e4={year:"{yyyy}",month:"{yyyy}-{MM}",day:Rp,hour:Rp+" "+Xh.hour,minute:Rp+" "+Xh.minute,second:Rp+" "+Xh.second,millisecond:Xh.none},e2=["year","month","day","hour","minute","second","millisecond"],gN=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function ol(e,t){return e+="","0000".substr(0,t-e.length)+e}function kc(e){switch(e){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return e}}function ltt(e){return e===kc(e)}function utt(e){switch(e){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function Z1(e,t,r,n){var i=ua(e),o=i[tE(r)](),a=i[xc(r)]()+1,s=Math.floor((a-1)/3)+1,l=i[K1(r)](),u=i["get"+(r?"UTC":"")+"Day"](),c=i[Kd(r)](),f=(c-1)%12+1,h=i[J1(r)](),d=i[Q1(r)](),p=i[ty(r)](),v=n instanceof br?n:att(n||pN)||stt(),g=v.getModel("time"),m=g.get("month"),y=g.get("monthAbbr"),_=g.get("dayOfWeek"),b=g.get("dayOfWeekAbbr");return(t||"").replace(/{yyyy}/g,o+"").replace(/{yy}/g,o%100+"").replace(/{Q}/g,s+"").replace(/{MMMM}/g,m[a-1]).replace(/{MMM}/g,y[a-1]).replace(/{MM}/g,ol(a,2)).replace(/{M}/g,a+"").replace(/{dd}/g,ol(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,_[u]).replace(/{ee}/g,b[u]).replace(/{e}/g,u+"").replace(/{HH}/g,ol(c,2)).replace(/{H}/g,c+"").replace(/{hh}/g,ol(f+"",2)).replace(/{h}/g,f+"").replace(/{mm}/g,ol(h,2)).replace(/{m}/g,h+"").replace(/{ss}/g,ol(d,2)).replace(/{s}/g,d+"").replace(/{SSS}/g,ol(p,3)).replace(/{S}/g,p+"")}function ctt(e,t,r,n,i){var o=null;if(Et(r))o=r;else if(Ut(r))o=r(e.value,t,{level:e.level});else{var a=ot({},Xh);if(e.level>0)for(var s=0;s<e2.length;++s)a[e2[s]]="{primary|"+a[e2[s]]+"}";var l=r?r.inherit===!1?r:te(r,a):a,u=mN(e.value,i);if(l[u])o=l[u];else if(l.inherit){for(var c=gN.indexOf(u),s=c-1;s>=0;--s)if(l[u]){o=l[u];break}o=o||a.none}if(ut(o)){var f=e.level==null?0:e.level>=0?e.level:o.length+e.level;f=Math.min(f,o.length-1),o=o[f]}}return Z1(new Date(e.value),o,i,n)}function mN(e,t){var r=ua(e),n=r[xc(t)]()+1,i=r[K1(t)](),o=r[Kd(t)](),a=r[J1(t)](),s=r[Q1(t)](),l=r[ty(t)](),u=l===0,c=u&&s===0,f=c&&a===0,h=f&&o===0,d=h&&i===1,p=d&&n===1;return p?"year":d?"month":h?"day":f?"hour":c?"minute":u?"second":"millisecond"}function r4(e,t,r){var n=be(e)?ua(e):e;switch(t=t||mN(e,r),t){case"year":return n[tE(r)]();case"half-year":return n[xc(r)]()>=6?1:0;case"quarter":return Math.floor((n[xc(r)]()+1)/4);case"month":return n[xc(r)]();case"day":return n[K1(r)]();case"half-day":return n[Kd(r)]()/24;case"hour":return n[Kd(r)]();case"minute":return n[J1(r)]();case"second":return n[Q1(r)]();case"millisecond":return n[ty(r)]()}}function tE(e){return e?"getUTCFullYear":"getFullYear"}function xc(e){return e?"getUTCMonth":"getMonth"}function K1(e){return e?"getUTCDate":"getDate"}function Kd(e){return e?"getUTCHours":"getHours"}function J1(e){return e?"getUTCMinutes":"getMinutes"}function Q1(e){return e?"getUTCSeconds":"getSeconds"}function ty(e){return e?"getUTCMilliseconds":"getMilliseconds"}function ftt(e){return e?"setUTCFullYear":"setFullYear"}function yN(e){return e?"setUTCMonth":"setMonth"}function _N(e){return e?"setUTCDate":"setDate"}function bN(e){return e?"setUTCHours":"setHours"}function wN(e){return e?"setUTCMinutes":"setMinutes"}function SN(e){return e?"setUTCSeconds":"setSeconds"}function TN(e){return e?"setUTCMilliseconds":"setMilliseconds"}function PN(e){if(!hK(e))return Et(e)?e:"-";var t=(e+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function EN(e,t){return e=(e||"").toLowerCase().replace(/-(.)/g,function(r,n){return n.toUpperCase()}),t&&e&&(e=e.charAt(0).toUpperCase()+e.slice(1)),e}var x0=D7;function XS(e,t,r){var n="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function i(c){return c&&po(c)?c:"-"}function o(c){return!!(c!=null&&!isNaN(c)&&isFinite(c))}var a=t==="time",s=e instanceof Date;if(a||s){var l=a?ua(e):e;if(isNaN(+l)){if(s)return"-"}else return Z1(l,n,r)}if(t==="ordinal")return pS(e)?i(e):be(e)&&o(e)?e+"":"-";var u=Ss(e);return o(u)?PN(u):pS(e)?i(e):typeof e=="boolean"?e+"":"-"}var n4=["a","b","c","d","e","f","g"],r2=function(e,t){return"{"+e+(t==null?"":t)+"}"};function AN(e,t,r){ut(t)||(t=[t]);var n=t.length;if(!n)return"";for(var i=t[0].$vars||[],o=0;o<i.length;o++){var a=n4[o];e=e.replace(r2(a),r2(a,0))}for(var s=0;s<n;s++)for(var l=0;l<i.length;l++){var u=t[s][i[l]];e=e.replace(r2(n4[l],s),r?Gn(u):u)}return e}function htt(e,t){var r=Et(e)?{color:e,extraCssText:t}:e||{},n=r.color,i=r.type;t=r.extraCssText;var o=r.renderMode||"html";if(!n)return"";if(o==="html")return i==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Gn(n)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+Gn(n)+";"+(t||"")+'"></span>';var a=r.markerId||"markerX";return{renderMode:o,content:"{"+a+"|}  ",style:i==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:n}:{width:10,height:10,borderRadius:5,backgroundColor:n}}}function Kl(e,t){return t=t||"transparent",Et(e)?e:It(e)&&e.colorStops&&(e.colorStops[0]||{}).color||t}function i4(e,t){if(t==="_blank"||t==="blank"){var r=window.open();r.opener=null,r.location.href=e}else window.open(e,t)}var zg=N,dtt=["left","right","top","bottom","width","height"],Dp=[["width","left","right"],["height","top","bottom"]];function eE(e,t,r,n,i){var o=0,a=0;n==null&&(n=1/0),i==null&&(i=1/0);var s=0;t.eachChild(function(l,u){var c=l.getBoundingRect(),f=t.childAt(u+1),h=f&&f.getBoundingRect(),d,p;if(e==="horizontal"){var v=c.width+(h?-h.x+c.x:0);d=o+v,d>n||l.newline?(o=0,d=v,a+=s+r,s=c.height):s=Math.max(s,c.height)}else{var g=c.height+(h?-h.y+c.y:0);p=a+g,p>i||l.newline?(o+=s+r,a=0,p=g,s=c.width):s=Math.max(s,c.width)}l.newline||(l.x=o,l.y=a,l.markRedraw(),e==="horizontal"?o=d+r:a=p+r)})}var Lc=eE;_e(eE,"vertical");_e(eE,"horizontal");function Ps(e,t,r){r=x0(r||0);var n=t.width,i=t.height,o=We(e.left,n),a=We(e.top,i),s=We(e.right,n),l=We(e.bottom,i),u=We(e.width,n),c=We(e.height,i),f=r[2]+r[0],h=r[1]+r[3],d=e.aspect;switch(isNaN(u)&&(u=n-s-h-o),isNaN(c)&&(c=i-l-f-a),d!=null&&(isNaN(u)&&isNaN(c)&&(d>n/i?u=n*.8:c=i*.8),isNaN(u)&&(u=d*c),isNaN(c)&&(c=u/d)),isNaN(o)&&(o=n-s-u-h),isNaN(a)&&(a=i-l-c-f),e.left||e.right){case"center":o=n/2-u/2-r[3];break;case"right":o=n-u-h;break}switch(e.top||e.bottom){case"middle":case"center":a=i/2-c/2-r[0];break;case"bottom":a=i-c-f;break}o=o||0,a=a||0,isNaN(u)&&(u=n-h-o-(s||0)),isNaN(c)&&(c=i-f-a-(l||0));var p=new ae(o+r[3],a+r[0],u,c);return p.margin=r,p}function ptt(e,t,r,n,i,o){var a=!i||!i.hv||i.hv[0],s=!i||!i.hv||i.hv[1],l=i&&i.boundingMode||"all";if(o=o||e,o.x=e.x,o.y=e.y,!a&&!s)return!1;var u;if(l==="raw")u=e.type==="group"?new ae(0,0,+t.width||0,+t.height||0):e.getBoundingRect();else if(u=e.getBoundingRect(),e.needLocalTransform()){var c=e.getLocalTransform();u=u.clone(),u.applyTransform(c)}var f=Ps(te({width:u.width,height:u.height},t),r,n),h=a?f.x-u.x:0,d=s?f.y-u.y:0;return l==="raw"?(o.x=h,o.y=d):(o.x+=h,o.y+=d),o===e&&e.markRedraw(),!0}function Jd(e){var t=e.layoutMode||e.constructor.layoutMode;return It(t)?t:t?{type:t}:null}function Gc(e,t,r){var n=r&&r.ignoreSize;!ut(n)&&(n=[n,n]);var i=a(Dp[0],0),o=a(Dp[1],1);u(Dp[0],e,i),u(Dp[1],e,o);function a(c,f){var h={},d=0,p={},v=0,g=2;if(zg(c,function(_){p[_]=e[_]}),zg(c,function(_){s(t,_)&&(h[_]=p[_]=t[_]),l(h,_)&&d++,l(p,_)&&v++}),n[f])return l(t,c[1])?p[c[2]]=null:l(t,c[2])&&(p[c[1]]=null),p;if(v===g||!d)return p;if(d>=g)return h;for(var m=0;m<c.length;m++){var y=c[m];if(!s(h,y)&&s(e,y)){h[y]=e[y];break}}return h}function s(c,f){return c.hasOwnProperty(f)}function l(c,f){return c[f]!=null&&c[f]!=="auto"}function u(c,f,h){zg(c,function(d){f[d]=h[d]})}}function ey(e){return vtt({},e)}function vtt(e,t){return t&&e&&zg(dtt,function(r){t.hasOwnProperty(r)&&(e[r]=t[r])}),e}var gtt=Oe(),cf=function(e){mt(t,e);function t(r,n,i){var o=e.call(this,r,n,i)||this;return o.uid=Y1("ec_cpt_model"),o}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i)},t.prototype.mergeDefaultAndTheme=function(r,n){var i=Jd(this),o=i?ey(r):{},a=n.getTheme();oe(r,a.get(this.mainType)),oe(r,this.getDefaultOption()),i&&Gc(r,o,i)},t.prototype.mergeOption=function(r,n){oe(this.option,r,!0);var i=Jd(this);i&&Gc(this.option,r,i)},t.prototype.optionUpdated=function(r,n){},t.prototype.getDefaultOption=function(){var r=this.constructor;if(!LK(r))return r.defaultOption;var n=gtt(this);if(!n.defaultOption){for(var i=[],o=r;o;){var a=o.prototype.defaultOption;a&&i.push(a),o=o.superClass}for(var s={},l=i.length-1;l>=0;l--)s=oe(s,i[l],!0);n.defaultOption=s}return n.defaultOption},t.prototype.getReferringComponents=function(r,n){var i=r+"Index",o=r+"Id";return C0(this.ecModel,r,{index:this.get(i,!0),id:this.get(o,!0)},n)},t.prototype.getBoxLayoutParams=function(){var r=this;return{left:r.get("left"),top:r.get("top"),right:r.get("right"),bottom:r.get("bottom"),width:r.get("width"),height:r.get("height")}},t.prototype.getZLevelKey=function(){return""},t.prototype.setZLevel=function(r){this.option.zlevel=r},t.protoInitialize=function(){var r=t.prototype;r.type="component",r.id="",r.name="",r.mainType="",r.subType="",r.componentIndex=0}(),t}(br);m9(cf,br);$1(cf);ett(cf);rtt(cf,mtt);function mtt(e){var t=[];return N(cf.getClassesByMainType(e),function(r){t=t.concat(r.dependencies||r.prototype.dependencies||[])}),t=Ct(t,function(r){return go(r).main}),e!=="dataset"&&ce(t,"dataset")<=0&&t.unshift("dataset"),t}const Ce=cf;var CN="";typeof navigator<"u"&&(CN=navigator.platform||"");var Du="rgba(0, 0, 0, 0.2)";const ytt={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:Du,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:Du,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:Du,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:Du,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:Du,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:Du,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:CN.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var MN=jt(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),ei="original",qr="arrayRows",Fi="objectRows",_a="keyedColumns",ps="typedArray",kN="unknown",yo="column",ff="row",vn={Must:1,Might:2,Not:3},xN=Oe();function _tt(e){xN(e).datasetMap=jt()}function btt(e,t,r){var n={},i=LN(t);if(!i||!e)return n;var o=[],a=[],s=t.ecModel,l=xN(s).datasetMap,u=i.uid+"_"+r.seriesLayoutBy,c,f;e=e.slice(),N(e,function(v,g){var m=It(v)?v:e[g]={name:v};m.type==="ordinal"&&c==null&&(c=g,f=p(m)),n[m.name]=[]});var h=l.get(u)||l.set(u,{categoryWayDim:f,valueWayDim:0});N(e,function(v,g){var m=v.name,y=p(v);if(c==null){var _=h.valueWayDim;d(n[m],_,y),d(a,_,y),h.valueWayDim+=y}else if(c===g)d(n[m],0,y),d(o,0,y);else{var _=h.categoryWayDim;d(n[m],_,y),d(a,_,y),h.categoryWayDim+=y}});function d(v,g,m){for(var y=0;y<m;y++)v.push(g+y)}function p(v){var g=v.dimsDef;return g?g.length:1}return o.length&&(n.itemName=o),a.length&&(n.seriesName=a),n}function LN(e){var t=e.get("data",!0);if(!t)return C0(e.ecModel,"dataset",{index:e.get("datasetIndex",!0),id:e.get("datasetId",!0)},_i).models[0]}function wtt(e){return!e.get("transform",!0)&&!e.get("fromTransformResult",!0)?[]:C0(e.ecModel,"dataset",{index:e.get("fromDatasetIndex",!0),id:e.get("fromDatasetId",!0)},_i).models}function IN(e,t){return Stt(e.data,e.sourceFormat,e.seriesLayoutBy,e.dimensionsDefine,e.startIndex,t)}function Stt(e,t,r,n,i,o){var a,s=5;if(An(e))return vn.Not;var l,u;if(n){var c=n[o];It(c)?(l=c.name,u=c.type):Et(c)&&(l=c)}if(u!=null)return u==="ordinal"?vn.Must:vn.Not;if(t===qr){var f=e;if(r===ff){for(var h=f[o],d=0;d<(h||[]).length&&d<s;d++)if((a=b(h[i+d]))!=null)return a}else for(var d=0;d<f.length&&d<s;d++){var p=f[i+d];if(p&&(a=b(p[o]))!=null)return a}}else if(t===Fi){var v=e;if(!l)return vn.Not;for(var d=0;d<v.length&&d<s;d++){var g=v[d];if(g&&(a=b(g[l]))!=null)return a}}else if(t===_a){var m=e;if(!l)return vn.Not;var h=m[l];if(!h||An(h))return vn.Not;for(var d=0;d<h.length&&d<s;d++)if((a=b(h[d]))!=null)return a}else if(t===ei)for(var y=e,d=0;d<y.length&&d<s;d++){var g=y[d],_=A0(g);if(!ut(_))return vn.Not;if((a=b(_[o]))!=null)return a}function b(T){var S=Et(T);if(T!=null&&isFinite(T)&&T!=="")return S?vn.Might:vn.Not;if(S&&T!=="-")return vn.Must}return vn.Not}var Ttt=jt();function Ptt(e,t,r){var n=Ttt.get(t);if(!n)return r;var i=n(e);return i?r.concat(i):r}var o4=Oe();Oe();var rE=function(){function e(){}return e.prototype.getColorFromPalette=function(t,r,n){var i=Ze(this.get("color",!0)),o=this.get("colorLayer",!0);return Att(this,o4,i,o,t,r,n)},e.prototype.clearColorPalette=function(){Ctt(this,o4)},e}();function Ett(e,t){for(var r=e.length,n=0;n<r;n++)if(e[n].length>t)return e[n];return e[r-1]}function Att(e,t,r,n,i,o,a){o=o||e;var s=t(o),l=s.paletteIdx||0,u=s.paletteNameMap=s.paletteNameMap||{};if(u.hasOwnProperty(i))return u[i];var c=a==null||!n?r:Ett(n,a);if(c=c||r,!(!c||!c.length)){var f=c[l];return i&&(u[i]=f),s.paletteIdx=(l+1)%c.length,f}}function Ctt(e,t){t(e).paletteIdx=0,t(e).paletteNameMap={}}var Np,Qf,a4,s4="\0_ec_inner",Mtt=1,ON=function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(r,n,i,o,a,s){o=o||{},this.option=null,this._theme=new br(o),this._locale=new br(a),this._optionManager=s},t.prototype.setOption=function(r,n,i){var o=c4(n);this._optionManager.setOption(r,i,o),this._resetOption(null,o)},t.prototype.resetOption=function(r,n){return this._resetOption(r,c4(n))},t.prototype._resetOption=function(r,n){var i=!1,o=this._optionManager;if(!r||r==="recreate"){var a=o.mountOption(r==="recreate");!this.option||r==="recreate"?a4(this,a):(this.restoreData(),this._mergeOption(a,n)),i=!0}if((r==="timeline"||r==="media")&&this.restoreData(),!r||r==="recreate"||r==="timeline"){var s=o.getTimelineOption(this);s&&(i=!0,this._mergeOption(s,n))}if(!r||r==="recreate"||r==="media"){var l=o.getMediaOption(this);l.length&&N(l,function(u){i=!0,this._mergeOption(u,n)},this)}return i},t.prototype.mergeOption=function(r){this._mergeOption(r,null)},t.prototype._mergeOption=function(r,n){var i=this.option,o=this._componentsMap,a=this._componentsCount,s=[],l=jt(),u=n&&n.replaceMergeMainTypeMap;_tt(this),N(r,function(f,h){f!=null&&(Ce.hasClass(h)?h&&(s.push(h),l.set(h,!0)):i[h]=i[h]==null?zt(f):oe(i[h],f,!0))}),u&&u.each(function(f,h){Ce.hasClass(h)&&!l.get(h)&&(s.push(h),l.set(h,!0))}),Ce.topologicalTravel(s,Ce.getAllClassMainTypes(),c,this);function c(f){var h=Ptt(this,f,Ze(r[f])),d=o.get(f),p=d?u&&u.get(f)?"replaceMerge":"normalMerge":"replaceAll",v=vK(d,h,p);SK(v,f,Ce),i[f]=null,o.set(f,null),a.set(f,0);var g=[],m=[],y=0,_;N(v,function(b,T){var S=b.existing,P=b.newOption;if(!P)S&&(S.mergeOption({},this),S.optionUpdated({},!1));else{var C=f==="series",A=Ce.getClass(f,b.keyInfo.subType,!C);if(!A)return;if(f==="tooltip"){if(_)return;_=!0}if(S&&S.constructor===A)S.name=b.keyInfo.name,S.mergeOption(P,this),S.optionUpdated(P,!1);else{var M=ot({componentIndex:T},b.keyInfo);S=new A(P,this,this,M),ot(S,M),b.brandNew&&(S.__requireNewView=!0),S.init(P,this,this),S.optionUpdated(null,!0)}}S?(g.push(S.option),m.push(S),y++):(g.push(void 0),m.push(void 0))},this),i[f]=g,o.set(f,m),a.set(f,y),f==="series"&&Np(this)}this._seriesIndices||Np(this)},t.prototype.getOption=function(){var r=zt(this.option);return N(r,function(n,i){if(Ce.hasClass(i)){for(var o=Ze(n),a=o.length,s=!1,l=a-1;l>=0;l--)o[l]&&!Gd(o[l])?s=!0:(o[l]=null,!s&&a--);o.length=a,r[i]=o}}),delete r[s4],r},t.prototype.getTheme=function(){return this._theme},t.prototype.getLocaleModel=function(){return this._locale},t.prototype.setUpdatePayload=function(r){this._payload=r},t.prototype.getUpdatePayload=function(){return this._payload},t.prototype.getComponent=function(r,n){var i=this._componentsMap.get(r);if(i){var o=i[n||0];if(o)return o;if(n==null){for(var a=0;a<i.length;a++)if(i[a])return i[a]}}},t.prototype.queryComponents=function(r){var n=r.mainType;if(!n)return[];var i=r.index,o=r.id,a=r.name,s=this._componentsMap.get(n);if(!s||!s.length)return[];var l;return i!=null?(l=[],N(Ze(i),function(u){s[u]&&l.push(s[u])})):o!=null?l=l4("id",o,s):a!=null?l=l4("name",a,s):l=yr(s,function(u){return!!u}),u4(l,r)},t.prototype.findComponents=function(r){var n=r.query,i=r.mainType,o=s(n),a=o?this.queryComponents(o):yr(this._componentsMap.get(i),function(u){return!!u});return l(u4(a,r));function s(u){var c=i+"Index",f=i+"Id",h=i+"Name";return u&&(u[c]!=null||u[f]!=null||u[h]!=null)?{mainType:i,index:u[c],id:u[f],name:u[h]}:null}function l(u){return r.filter?yr(u,r.filter):u}},t.prototype.eachComponent=function(r,n,i){var o=this._componentsMap;if(Ut(r)){var a=n,s=r;o.each(function(f,h){for(var d=0;f&&d<f.length;d++){var p=f[d];p&&s.call(a,h,p,p.componentIndex)}})}else for(var l=Et(r)?o.get(r):It(r)?this.findComponents(r):null,u=0;l&&u<l.length;u++){var c=l[u];c&&n.call(i,c,c.componentIndex)}},t.prototype.getSeriesByName=function(r){var n=Xn(r,null);return yr(this._componentsMap.get("series"),function(i){return!!i&&n!=null&&i.name===n})},t.prototype.getSeriesByIndex=function(r){return this._componentsMap.get("series")[r]},t.prototype.getSeriesByType=function(r){return yr(this._componentsMap.get("series"),function(n){return!!n&&n.subType===r})},t.prototype.getSeries=function(){return yr(this._componentsMap.get("series"),function(r){return!!r})},t.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},t.prototype.eachSeries=function(r,n){Qf(this),N(this._seriesIndices,function(i){var o=this._componentsMap.get("series")[i];r.call(n,o,i)},this)},t.prototype.eachRawSeries=function(r,n){N(this._componentsMap.get("series"),function(i){i&&r.call(n,i,i.componentIndex)})},t.prototype.eachSeriesByType=function(r,n,i){Qf(this),N(this._seriesIndices,function(o){var a=this._componentsMap.get("series")[o];a.subType===r&&n.call(i,a,o)},this)},t.prototype.eachRawSeriesByType=function(r,n,i){return N(this.getSeriesByType(r),n,i)},t.prototype.isSeriesFiltered=function(r){return Qf(this),this._seriesIndicesMap.get(r.componentIndex)==null},t.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},t.prototype.filterSeries=function(r,n){Qf(this);var i=[];N(this._seriesIndices,function(o){var a=this._componentsMap.get("series")[o];r.call(n,a,o)&&i.push(o)},this),this._seriesIndices=i,this._seriesIndicesMap=jt(i)},t.prototype.restoreData=function(r){Np(this);var n=this._componentsMap,i=[];n.each(function(o,a){Ce.hasClass(a)&&i.push(a)}),Ce.topologicalTravel(i,Ce.getAllClassMainTypes(),function(o){N(n.get(o),function(a){a&&(o!=="series"||!ktt(a,r))&&a.restoreData()})})},t.internalField=function(){Np=function(r){var n=r._seriesIndices=[];N(r._componentsMap.get("series"),function(i){i&&n.push(i.componentIndex)}),r._seriesIndicesMap=jt(n)},Qf=function(r){},a4=function(r,n){r.option={},r.option[s4]=Mtt,r._componentsMap=jt({series:[]}),r._componentsCount=jt();var i=n.aria;It(i)&&i.enabled==null&&(i.enabled=!0),xtt(n,r._theme.option),oe(n,ytt,!1),r._mergeOption(n,null)}}(),t}(br);function ktt(e,t){if(t){var r=t.seriesIndex,n=t.seriesId,i=t.seriesName;return r!=null&&e.componentIndex!==r||n!=null&&e.id!==n||i!=null&&e.name!==i}}function xtt(e,t){var r=e.color&&!e.colorLayer;N(t,function(n,i){i==="colorLayer"&&r||Ce.hasClass(i)||(typeof n=="object"?e[i]=e[i]?oe(e[i],n,!1):zt(n):e[i]==null&&(e[i]=n))})}function l4(e,t,r){if(ut(t)){var n=jt();return N(t,function(o){if(o!=null){var a=Xn(o,null);a!=null&&n.set(o,!0)}}),yr(r,function(o){return o&&n.get(o[e])})}else{var i=Xn(t,null);return yr(r,function(o){return o&&i!=null&&o[e]===i})}}function u4(e,t){return t.hasOwnProperty("subType")?yr(e,function(r){return r&&r.subType===t.subType}):e}function c4(e){var t=jt();return e&&N(Ze(e.replaceMerge),function(r){t.set(r,!0)}),{replaceMergeMainTypeMap:t}}Ri(ON,rE);const RN=ON;var Ltt=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],Itt=function(){function e(t){N(Ltt,function(r){this[r]=Vt(t[r],t)},this)}return e}();const DN=Itt;var n2={},Ott=function(){function e(){this._coordinateSystems=[]}return e.prototype.create=function(t,r){var n=[];N(n2,function(i,o){var a=i.create(t,r);n=n.concat(a||[])}),this._coordinateSystems=n},e.prototype.update=function(t,r){N(this._coordinateSystems,function(n){n.update&&n.update(t,r)})},e.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},e.register=function(t,r){n2[t]=r},e.get=function(t){return n2[t]},e}();const nE=Ott;var Rtt=/^(min|max)?(.+)$/,Dtt=function(){function e(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return e.prototype.setOption=function(t,r,n){t&&(N(Ze(t.series),function(a){a&&a.data&&An(a.data)&&_m(a.data)}),N(Ze(t.dataset),function(a){a&&a.source&&An(a.source)&&_m(a.source)})),t=zt(t);var i=this._optionBackup,o=Ntt(t,r,!i);this._newBaseOption=o.baseOption,i?(o.timelineOptions.length&&(i.timelineOptions=o.timelineOptions),o.mediaList.length&&(i.mediaList=o.mediaList),o.mediaDefault&&(i.mediaDefault=o.mediaDefault)):this._optionBackup=o},e.prototype.mountOption=function(t){var r=this._optionBackup;return this._timelineOptions=r.timelineOptions,this._mediaList=r.mediaList,this._mediaDefault=r.mediaDefault,this._currentMediaIndices=[],zt(t?r.baseOption:this._newBaseOption)},e.prototype.getTimelineOption=function(t){var r,n=this._timelineOptions;if(n.length){var i=t.getComponent("timeline");i&&(r=zt(n[i.getCurrentIndex()]))}return r},e.prototype.getMediaOption=function(t){var r=this._api.getWidth(),n=this._api.getHeight(),i=this._mediaList,o=this._mediaDefault,a=[],s=[];if(!i.length&&!o)return s;for(var l=0,u=i.length;l<u;l++)Ftt(i[l].query,r,n)&&a.push(l);return!a.length&&o&&(a=[-1]),a.length&&!$tt(a,this._currentMediaIndices)&&(s=Ct(a,function(c){return zt(c===-1?o.option:i[c].option)})),this._currentMediaIndices=a,s},e}();function Ntt(e,t,r){var n=[],i,o,a=e.baseOption,s=e.timeline,l=e.options,u=e.media,c=!!e.media,f=!!(l||s||a&&a.timeline);a?(o=a,o.timeline||(o.timeline=s)):((f||c)&&(e.options=e.media=null),o=e),c&&ut(u)&&N(u,function(d){d&&d.option&&(d.query?n.push(d):i||(i=d))}),h(o),N(l,function(d){return h(d)}),N(n,function(d){return h(d.option)});function h(d){N(t,function(p){p(d,r)})}return{baseOption:o,timelineOptions:l||[],mediaDefault:i,mediaList:n}}function Ftt(e,t,r){var n={width:t,height:r,aspectratio:t/r},i=!0;return N(e,function(o,a){var s=a.match(Rtt);if(!(!s||!s[1]||!s[2])){var l=s[1],u=s[2].toLowerCase();Btt(n[u],o,l)||(i=!1)}}),i}function Btt(e,t,r){return r==="min"?e>=t:r==="max"?e<=t:e===t}function $tt(e,t){return e.join(",")===t.join(",")}const ztt=Dtt;var ii=N,Qd=It,f4=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function i2(e){var t=e&&e.itemStyle;if(!!t)for(var r=0,n=f4.length;r<n;r++){var i=f4[r],o=t.normal,a=t.emphasis;o&&o[i]&&(e[i]=e[i]||{},e[i].normal?oe(e[i].normal,o[i]):e[i].normal=o[i],o[i]=null),a&&a[i]&&(e[i]=e[i]||{},e[i].emphasis?oe(e[i].emphasis,a[i]):e[i].emphasis=a[i],a[i]=null)}}function xr(e,t,r){if(e&&e[t]&&(e[t].normal||e[t].emphasis)){var n=e[t].normal,i=e[t].emphasis;n&&(r?(e[t].normal=e[t].emphasis=null,te(e[t],n)):e[t]=n),i&&(e.emphasis=e.emphasis||{},e.emphasis[t]=i,i.focus&&(e.emphasis.focus=i.focus),i.blurScope&&(e.emphasis.blurScope=i.blurScope))}}function Yh(e){xr(e,"itemStyle"),xr(e,"lineStyle"),xr(e,"areaStyle"),xr(e,"label"),xr(e,"labelLine"),xr(e,"upperLabel"),xr(e,"edgeLabel")}function Xe(e,t){var r=Qd(e)&&e[t],n=Qd(r)&&r.textStyle;if(n)for(var i=0,o=hk.length;i<o;i++){var a=hk[i];n.hasOwnProperty(a)&&(r[a]=n[a])}}function zn(e){e&&(Yh(e),Xe(e,"label"),e.emphasis&&Xe(e.emphasis,"label"))}function Vtt(e){if(!!Qd(e)){i2(e),Yh(e),Xe(e,"label"),Xe(e,"upperLabel"),Xe(e,"edgeLabel"),e.emphasis&&(Xe(e.emphasis,"label"),Xe(e.emphasis,"upperLabel"),Xe(e.emphasis,"edgeLabel"));var t=e.markPoint;t&&(i2(t),zn(t));var r=e.markLine;r&&(i2(r),zn(r));var n=e.markArea;n&&zn(n);var i=e.data;if(e.type==="graph"){i=i||e.nodes;var o=e.links||e.edges;if(o&&!An(o))for(var a=0;a<o.length;a++)zn(o[a]);N(e.categories,function(u){Yh(u)})}if(i&&!An(i))for(var a=0;a<i.length;a++)zn(i[a]);if(t=e.markPoint,t&&t.data)for(var s=t.data,a=0;a<s.length;a++)zn(s[a]);if(r=e.markLine,r&&r.data)for(var l=r.data,a=0;a<l.length;a++)ut(l[a])?(zn(l[a][0]),zn(l[a][1])):zn(l[a]);e.type==="gauge"?(Xe(e,"axisLabel"),Xe(e,"title"),Xe(e,"detail")):e.type==="treemap"?(xr(e.breadcrumb,"itemStyle"),N(e.levels,function(u){Yh(u)})):e.type==="tree"&&Yh(e.leaves)}}function Bo(e){return ut(e)?e:e?[e]:[]}function h4(e){return(ut(e)?e[0]:e)||{}}function Utt(e,t){ii(Bo(e.series),function(n){Qd(n)&&Vtt(n)});var r=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&r.push("valueAxis","categoryAxis","logAxis","timeAxis"),ii(r,function(n){ii(Bo(e[n]),function(i){i&&(Xe(i,"axisLabel"),Xe(i.axisPointer,"label"))})}),ii(Bo(e.parallel),function(n){var i=n&&n.parallelAxisDefault;Xe(i,"axisLabel"),Xe(i&&i.axisPointer,"label")}),ii(Bo(e.calendar),function(n){xr(n,"itemStyle"),Xe(n,"dayLabel"),Xe(n,"monthLabel"),Xe(n,"yearLabel")}),ii(Bo(e.radar),function(n){Xe(n,"name"),n.name&&n.axisName==null&&(n.axisName=n.name,delete n.name),n.nameGap!=null&&n.axisNameGap==null&&(n.axisNameGap=n.nameGap,delete n.nameGap)}),ii(Bo(e.geo),function(n){Qd(n)&&(zn(n),ii(Bo(n.regions),function(i){zn(i)}))}),ii(Bo(e.timeline),function(n){zn(n),xr(n,"label"),xr(n,"itemStyle"),xr(n,"controlStyle",!0);var i=n.data;ut(i)&&N(i,function(o){It(o)&&(xr(o,"label"),xr(o,"itemStyle"))})}),ii(Bo(e.toolbox),function(n){xr(n,"iconStyle"),ii(n.feature,function(i){xr(i,"iconStyle")})}),Xe(h4(e.axisPointer),"label"),Xe(h4(e.tooltip).axisPointer,"label")}function Gtt(e,t){for(var r=t.split(","),n=e,i=0;i<r.length&&(n=n&&n[r[i]],n!=null);i++);return n}function jtt(e,t,r,n){for(var i=t.split(","),o=e,a,s=0;s<i.length-1;s++)a=i[s],o[a]==null&&(o[a]={}),o=o[a];(n||o[i[s]]==null)&&(o[i[s]]=r)}function d4(e){e&&N(Wtt,function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])})}var Wtt=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],Htt=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],o2=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function th(e){var t=e&&e.itemStyle;if(t)for(var r=0;r<o2.length;r++){var n=o2[r][1],i=o2[r][0];t[n]!=null&&(t[i]=t[n])}}function p4(e){!e||e.alignTo==="edge"&&e.margin!=null&&e.edgeDistance==null&&(e.edgeDistance=e.margin)}function v4(e){!e||e.downplay&&!e.blur&&(e.blur=e.downplay)}function Xtt(e){!e||e.focusNodeAdjacency!=null&&(e.emphasis=e.emphasis||{},e.emphasis.focus==null&&(e.emphasis.focus="adjacency"))}function NN(e,t){if(e)for(var r=0;r<e.length;r++)t(e[r]),e[r]&&NN(e[r].children,t)}function FN(e,t){Utt(e,t),e.series=Ze(e.series),N(e.series,function(r){if(!!It(r)){var n=r.type;if(n==="line")r.clipOverflow!=null&&(r.clip=r.clipOverflow);else if(n==="pie"||n==="gauge"){r.clockWise!=null&&(r.clockwise=r.clockWise),p4(r.label);var i=r.data;if(i&&!An(i))for(var o=0;o<i.length;o++)p4(i[o]);r.hoverOffset!=null&&(r.emphasis=r.emphasis||{},(r.emphasis.scaleSize=null)&&(r.emphasis.scaleSize=r.hoverOffset))}else if(n==="gauge"){var a=Gtt(r,"pointer.color");a!=null&&jtt(r,"itemStyle.color",a)}else if(n==="bar"){th(r),th(r.backgroundStyle),th(r.emphasis);var i=r.data;if(i&&!An(i))for(var o=0;o<i.length;o++)typeof i[o]=="object"&&(th(i[o]),th(i[o]&&i[o].emphasis))}else if(n==="sunburst"){var s=r.highlightPolicy;s&&(r.emphasis=r.emphasis||{},r.emphasis.focus||(r.emphasis.focus=s)),v4(r),NN(r.data,v4)}else n==="graph"||n==="sankey"?Xtt(r):n==="map"&&(r.mapType&&!r.map&&(r.map=r.mapType),r.mapLocation&&te(r,r.mapLocation));r.hoverAnimation!=null&&(r.emphasis=r.emphasis||{},r.emphasis&&r.emphasis.scale==null&&(r.emphasis.scale=r.hoverAnimation)),d4(r)}}),e.dataRange&&(e.visualMap=e.dataRange),N(Htt,function(r){var n=e[r];n&&(ut(n)||(n=[n]),N(n,function(i){d4(i)}))})}function Ytt(e){var t=jt();e.eachSeries(function(r){var n=r.get("stack");if(n){var i=t.get(n)||t.set(n,[]),o=r.getData(),a={stackResultDimension:o.getCalculationInfo("stackResultDimension"),stackedOverDimension:o.getCalculationInfo("stackedOverDimension"),stackedDimension:o.getCalculationInfo("stackedDimension"),stackedByDimension:o.getCalculationInfo("stackedByDimension"),isStackedByIndex:o.getCalculationInfo("isStackedByIndex"),data:o,seriesModel:r};if(!a.stackedDimension||!(a.isStackedByIndex||a.stackedByDimension))return;i.length&&o.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(a)}}),t.each(qtt)}function qtt(e){N(e,function(t,r){var n=[],i=[NaN,NaN],o=[t.stackResultDimension,t.stackedOverDimension],a=t.data,s=t.isStackedByIndex,l=t.seriesModel.get("stackStrategy")||"samesign";a.modify(o,function(u,c,f){var h=a.get(t.stackedDimension,f);if(isNaN(h))return i;var d,p;s?p=a.getRawIndex(f):d=a.get(t.stackedByDimension,f);for(var v=NaN,g=r-1;g>=0;g--){var m=e[g];if(s||(p=m.data.rawIndexOf(m.stackedByDimension,d)),p>=0){var y=m.data.getByRawIndex(m.stackResultDimension,p);if(l==="all"||l==="positive"&&y>0||l==="negative"&&y<0||l==="samesign"&&h>=0&&y>0||l==="samesign"&&h<=0&&y<0){h=uK(h,y),v=y;break}}}return n[0]=h,n[1]=v,n})})}var ry=function(){function e(t){this.data=t.data||(t.sourceFormat===_a?{}:[]),this.sourceFormat=t.sourceFormat||kN,this.seriesLayoutBy=t.seriesLayoutBy||yo,this.startIndex=t.startIndex||0,this.dimensionsDetectedCount=t.dimensionsDetectedCount,this.metaRawOption=t.metaRawOption;var r=this.dimensionsDefine=t.dimensionsDefine;if(r)for(var n=0;n<r.length;n++){var i=r[n];i.type==null&&IN(this,n)===vn.Must&&(i.type="ordinal")}}return e}();function iE(e){return e instanceof ry}function YS(e,t,r){r=r||BN(e);var n=t.seriesLayoutBy,i=Ktt(e,r,n,t.sourceHeader,t.dimensions),o=new ry({data:e,sourceFormat:r,seriesLayoutBy:n,dimensionsDefine:i.dimensionsDefine,startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount,metaRawOption:zt(t)});return o}function oE(e){return new ry({data:e,sourceFormat:An(e)?ps:ei})}function Ztt(e){return new ry({data:e.data,sourceFormat:e.sourceFormat,seriesLayoutBy:e.seriesLayoutBy,dimensionsDefine:zt(e.dimensionsDefine),startIndex:e.startIndex,dimensionsDetectedCount:e.dimensionsDetectedCount})}function BN(e){var t=kN;if(An(e))t=ps;else if(ut(e)){e.length===0&&(t=qr);for(var r=0,n=e.length;r<n;r++){var i=e[r];if(i!=null){if(ut(i)){t=qr;break}else if(It(i)){t=Fi;break}}}}else if(It(e)){for(var o in e)if(ft(e,o)&&Fr(e[o])){t=_a;break}}return t}function Ktt(e,t,r,n,i){var o,a;if(!e)return{dimensionsDefine:g4(i),startIndex:a,dimensionsDetectedCount:o};if(t===qr){var s=e;n==="auto"||n==null?m4(function(u){u!=null&&u!=="-"&&(Et(u)?a==null&&(a=1):a=0)},r,s,10):a=be(n)?n:n?1:0,!i&&a===1&&(i=[],m4(function(u,c){i[c]=u!=null?u+"":""},r,s,1/0)),o=i?i.length:r===ff?s.length:s[0]?s[0].length:null}else if(t===Fi)i||(i=Jtt(e));else if(t===_a)i||(i=[],N(e,function(u,c){i.push(c)}));else if(t===ei){var l=A0(e[0]);o=ut(l)&&l.length||1}return{startIndex:a,dimensionsDefine:g4(i),dimensionsDetectedCount:o}}function Jtt(e){for(var t=0,r;t<e.length&&!(r=e[t++]););if(r){var n=[];return N(r,function(i,o){n.push(o)}),n}}function g4(e){if(!!e){var t=jt();return Ct(e,function(r,n){r=It(r)?r:{name:r};var i={name:r.name,displayName:r.displayName,type:r.type};if(i.name==null)return i;i.name+="",i.displayName==null&&(i.displayName=i.name);var o=t.get(i.name);return o?i.name+="-"+o.count++:t.set(i.name,{count:1}),i})}}function m4(e,t,r,n){if(t===ff)for(var i=0;i<r.length&&i<n;i++)e(r[i]?r[i][0]:null,i);else for(var o=r[0]||[],i=0;i<o.length&&i<n;i++)e(o[i],i)}function $N(e){var t=e.sourceFormat;return t===Fi||t===_a}var al,sl,ll,y4,_4,zN=function(){function e(t,r){var n=iE(t)?t:oE(t);this._source=n;var i=this._data=n.data;n.sourceFormat===ps&&(this._offset=0,this._dimSize=r,this._data=i),_4(this,i,n)}return e.prototype.getSource=function(){return this._source},e.prototype.count=function(){return 0},e.prototype.getItem=function(t,r){},e.prototype.appendData=function(t){},e.prototype.clean=function(){},e.protoInitialize=function(){var t=e.prototype;t.pure=!1,t.persistent=!0}(),e.internalField=function(){var t;_4=function(a,s,l){var u=l.sourceFormat,c=l.seriesLayoutBy,f=l.startIndex,h=l.dimensionsDefine,d=y4[aE(u,c)];if(ot(a,d),u===ps)a.getItem=r,a.count=i,a.fillStorage=n;else{var p=VN(u,c);a.getItem=Vt(p,null,s,f,h);var v=UN(u,c);a.count=Vt(v,null,s,f,h)}};var r=function(a,s){a=a-this._offset,s=s||[];for(var l=this._data,u=this._dimSize,c=u*a,f=0;f<u;f++)s[f]=l[c+f];return s},n=function(a,s,l,u){for(var c=this._data,f=this._dimSize,h=0;h<f;h++){for(var d=u[h],p=d[0]==null?1/0:d[0],v=d[1]==null?-1/0:d[1],g=s-a,m=l[h],y=0;y<g;y++){var _=c[y*f+h];m[a+y]=_,_<p&&(p=_),_>v&&(v=_)}d[0]=p,d[1]=v}},i=function(){return this._data?this._data.length/this._dimSize:0};y4=(t={},t[qr+"_"+yo]={pure:!0,appendData:o},t[qr+"_"+ff]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},t[Fi]={pure:!0,appendData:o},t[_a]={pure:!0,appendData:function(a){var s=this._data;N(a,function(l,u){for(var c=s[u]||(s[u]=[]),f=0;f<(l||[]).length;f++)c.push(l[f])})}},t[ei]={appendData:o},t[ps]={persistent:!1,pure:!0,appendData:function(a){this._data=a},clean:function(){this._offset+=this.count(),this._data=null}},t);function o(a){for(var s=0;s<a.length;s++)this._data.push(a[s])}}(),e}(),b4=function(e,t,r,n){return e[n]},Qtt=(al={},al[qr+"_"+yo]=function(e,t,r,n){return e[n+t]},al[qr+"_"+ff]=function(e,t,r,n,i){n+=t;for(var o=i||[],a=e,s=0;s<a.length;s++){var l=a[s];o[s]=l?l[n]:null}return o},al[Fi]=b4,al[_a]=function(e,t,r,n,i){for(var o=i||[],a=0;a<r.length;a++){var s=r[a].name,l=e[s];o[a]=l?l[n]:null}return o},al[ei]=b4,al);function VN(e,t){var r=Qtt[aE(e,t)];return r}var w4=function(e,t,r){return e.length},tet=(sl={},sl[qr+"_"+yo]=function(e,t,r){return Math.max(0,e.length-t)},sl[qr+"_"+ff]=function(e,t,r){var n=e[0];return n?Math.max(0,n.length-t):0},sl[Fi]=w4,sl[_a]=function(e,t,r){var n=r[0].name,i=e[n];return i?i.length:0},sl[ei]=w4,sl);function UN(e,t){var r=tet[aE(e,t)];return r}var a2=function(e,t,r){return e[t]},eet=(ll={},ll[qr]=a2,ll[Fi]=function(e,t,r){return e[r]},ll[_a]=a2,ll[ei]=function(e,t,r){var n=A0(e);return n instanceof Array?n[t]:n},ll[ps]=a2,ll);function GN(e){var t=eet[e];return t}function aE(e,t){return e===qr?e+"_"+t:e}function jc(e,t,r){if(!!e){var n=e.getRawDataItem(t);if(n!=null){var i=e.getStore(),o=i.getSource().sourceFormat;if(r!=null){var a=e.getDimensionIndex(r),s=i.getDimensionProperty(a);return GN(o)(n,a,s)}else{var l=n;return o===ei&&(l=A0(n)),l}}}}var ret=/\{@(.+?)\}/g,jN=function(){function e(){}return e.prototype.getDataParams=function(t,r){var n=this.getData(r),i=this.getRawValue(t,r),o=n.getRawIndex(t),a=n.getName(t),s=n.getRawDataItem(t),l=n.getItemVisual(t,"style"),u=l&&l[n.getItemVisual(t,"drawType")||"fill"],c=l&&l.stroke,f=this.mainType,h=f==="series",d=n.userOutput&&n.userOutput.get();return{componentType:f,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:h?this.subType:null,seriesIndex:this.seriesIndex,seriesId:h?this.id:null,seriesName:h?this.name:null,name:a,dataIndex:o,data:s,dataType:r,value:i,color:u,borderColor:c,dimensionNames:d?d.fullDimensions:null,encode:d?d.encode:null,$vars:["seriesName","name","value"]}},e.prototype.getFormattedLabel=function(t,r,n,i,o,a){r=r||"normal";var s=this.getData(n),l=this.getDataParams(t,n);if(a&&(l.value=a.interpolatedValue),i!=null&&ut(l.value)&&(l.value=l.value[i]),!o){var u=s.getItemModel(t);o=u.get(r==="normal"?["label","formatter"]:[r,"label","formatter"])}if(Ut(o))return l.status=r,l.dimensionIndex=i,o(l);if(Et(o)){var c=AN(o,l);return c.replace(ret,function(f,h){var d=h.length,p=h;p.charAt(0)==="["&&p.charAt(d-1)==="]"&&(p=+p.slice(1,d-1));var v=jc(s,t,p);if(a&&ut(a.interpolatedValue)){var g=s.getDimensionIndex(p);g>=0&&(v=a.interpolatedValue[g])}return v!=null?v+"":""})}},e.prototype.getRawValue=function(t,r){return jc(this.getData(r),t)},e.prototype.formatTooltip=function(t,r,n){},e}();function S4(e){var t,r;return It(e)?e.type&&(r=e):t=e,{text:t,frag:r}}function bd(e){return new net(e)}var net=function(){function e(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return e.prototype.perform=function(t){var r=this._upstream,n=t&&t.skip;if(this._dirty&&r){var i=this.context;i.data=i.outputData=r.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var o;this._plan&&!n&&(o=this._plan(this.context));var a=c(this._modBy),s=this._modDataCount||0,l=c(t&&t.modBy),u=t&&t.modDataCount||0;(a!==l||s!==u)&&(o="reset");function c(y){return!(y>=1)&&(y=1),y}var f;(this._dirty||o==="reset")&&(this._dirty=!1,f=this._doReset(n)),this._modBy=l,this._modDataCount=u;var h=t&&t.step;if(r?this._dueEnd=r._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var d=this._dueIndex,p=Math.min(h!=null?this._dueIndex+h:1/0,this._dueEnd);if(!n&&(f||d<p)){var v=this._progress;if(ut(v))for(var g=0;g<v.length;g++)this._doProgress(v[g],d,p,l,u);else this._doProgress(v,d,p,l,u)}this._dueIndex=p;var m=this._settedOutputEnd!=null?this._settedOutputEnd:p;this._outputDueEnd=m}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},e.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},e.prototype._doProgress=function(t,r,n,i,o){T4.reset(r,n,i,o),this._callingProgress=t,this._callingProgress({start:r,end:n,count:n-r,next:T4.next},this.context)},e.prototype._doReset=function(t){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var r,n;!t&&this._reset&&(r=this._reset(this.context),r&&r.progress&&(n=r.forceFirstProgress,r=r.progress),ut(r)&&!r.length&&(r=null)),this._progress=r,this._modBy=this._modDataCount=null;var i=this._downstream;return i&&i.dirty(),n},e.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},e.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},e.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},e.prototype.getUpstream=function(){return this._upstream},e.prototype.getDownstream=function(){return this._downstream},e.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},e}(),T4=function(){var e,t,r,n,i,o={reset:function(l,u,c,f){t=l,e=u,r=c,n=f,i=Math.ceil(n/r),o.next=r>1&&n>0?s:a}};return o;function a(){return t<e?t++:null}function s(){var l=t%i*r+Math.ceil(t/i),u=t>=e?null:l<n?l:t;return t++,u}}();function vs(e,t){var r=t&&t.type;return r==="ordinal"?e:(r==="time"&&!be(e)&&e!=null&&e!=="-"&&(e=+ua(e)),e==null||e===""?NaN:+e)}var iet=jt({number:function(e){return parseFloat(e)},time:function(e){return+ua(e)},trim:function(e){return Et(e)?po(e):e}});function WN(e){return iet.get(e)}var HN={lt:function(e,t){return e<t},lte:function(e,t){return e<=t},gt:function(e,t){return e>t},gte:function(e,t){return e>=t}},oet=function(){function e(t,r){if(!be(r)){var n="";ne(n)}this._opFn=HN[t],this._rvalFloat=Ss(r)}return e.prototype.evaluate=function(t){return be(t)?this._opFn(t,this._rvalFloat):this._opFn(Ss(t),this._rvalFloat)},e}(),XN=function(){function e(t,r){var n=t==="desc";this._resultLT=n?1:-1,r==null&&(r=n?"min":"max"),this._incomparable=r==="min"?-1/0:1/0}return e.prototype.evaluate=function(t,r){var n=be(t)?t:Ss(t),i=be(r)?r:Ss(r),o=isNaN(n),a=isNaN(i);if(o&&(n=this._incomparable),a&&(i=this._incomparable),o&&a){var s=Et(t),l=Et(r);s&&(n=l?t:0),l&&(i=s?r:0)}return n<i?this._resultLT:n>i?-this._resultLT:0},e}(),aet=function(){function e(t,r){this._rval=r,this._isEQ=t,this._rvalTypeof=typeof r,this._rvalFloat=Ss(r)}return e.prototype.evaluate=function(t){var r=t===this._rval;if(!r){var n=typeof t;n!==this._rvalTypeof&&(n==="number"||this._rvalTypeof==="number")&&(r=Ss(t)===this._rvalFloat)}return this._isEQ?r:!r},e}();function set(e,t){return e==="eq"||e==="ne"?new aet(e==="eq",t):ft(HN,e)?new oet(e,t):null}var uet=function(){function e(){}return e.prototype.getRawData=function(){throw new Error("not supported")},e.prototype.getRawDataItem=function(t){throw new Error("not supported")},e.prototype.cloneRawData=function(){},e.prototype.getDimensionInfo=function(t){},e.prototype.cloneAllDimensionInfo=function(){},e.prototype.count=function(){},e.prototype.retrieveValue=function(t,r){},e.prototype.retrieveValueFromItem=function(t,r){},e.prototype.convertValue=function(t,r){return vs(t,r)},e}();function cet(e,t){var r=new uet,n=e.data,i=r.sourceFormat=e.sourceFormat,o=e.startIndex,a="";e.seriesLayoutBy!==yo&&ne(a);var s=[],l={},u=e.dimensionsDefine;if(u)N(u,function(v,g){var m=v.name,y={index:g,name:m,displayName:v.displayName};if(s.push(y),m!=null){var _="";ft(l,m)&&ne(_),l[m]=y}});else for(var c=0;c<e.dimensionsDetectedCount;c++)s.push({index:c});var f=VN(i,yo);t.__isBuiltIn&&(r.getRawDataItem=function(v){return f(n,o,s,v)},r.getRawData=Vt(fet,null,e)),r.cloneRawData=Vt(het,null,e);var h=UN(i,yo);r.count=Vt(h,null,n,o,s);var d=GN(i);r.retrieveValue=function(v,g){var m=f(n,o,s,v);return p(m,g)};var p=r.retrieveValueFromItem=function(v,g){if(v!=null){var m=s[g];if(m)return d(v,g,m.name)}};return r.getDimensionInfo=Vt(det,null,s,l),r.cloneAllDimensionInfo=Vt(pet,null,s),r}function fet(e){var t=e.sourceFormat;if(!sE(t)){var r="";ne(r)}return e.data}function het(e){var t=e.sourceFormat,r=e.data;if(!sE(t)){var n="";ne(n)}if(t===qr){for(var i=[],o=0,a=r.length;o<a;o++)i.push(r[o].slice());return i}else if(t===Fi){for(var i=[],o=0,a=r.length;o<a;o++)i.push(ot({},r[o]));return i}}function det(e,t,r){if(r!=null){if(be(r)||!isNaN(r)&&!ft(t,r))return e[r];if(ft(t,r))return t[r]}}function pet(e){return zt(e)}var YN=jt();function vet(e){e=zt(e);var t=e.type,r="";t||ne(r);var n=t.split(":");n.length!==2&&ne(r);var i=!1;n[0]==="echarts"&&(t=n[1],i=!0),e.__isBuiltIn=i,YN.set(t,e)}function get(e,t,r){var n=Ze(e),i=n.length,o="";i||ne(o);for(var a=0,s=i;a<s;a++){var l=n[a];t=met(l,t),a!==s-1&&(t.length=Math.max(t.length,1))}return t}function met(e,t,r,n){var i="";t.length||ne(i),It(e)||ne(i);var o=e.type,a=YN.get(o);a||ne(i);var s=Ct(t,function(u){return cet(u,a)}),l=Ze(a.transform({upstream:s[0],upstreamList:s,config:zt(e.config)}));return Ct(l,function(u,c){var f="";It(u)||ne(f),u.data||ne(f);var h=BN(u.data);sE(h)||ne(f);var d,p=t[0];if(p&&c===0&&!u.dimensions){var v=p.startIndex;v&&(u.data=p.data.slice(0,v).concat(u.data)),d={seriesLayoutBy:yo,sourceHeader:v,dimensions:p.metaRawOption.dimensions}}else d={seriesLayoutBy:yo,sourceHeader:0,dimensions:u.dimensions};return YS(u.data,d,null)})}function sE(e){return e===qr||e===Fi}var ny="undefined",yet=typeof Uint32Array===ny?Array:Uint32Array,_et=typeof Uint16Array===ny?Array:Uint16Array,qN=typeof Int32Array===ny?Array:Int32Array,P4=typeof Float64Array===ny?Array:Float64Array,ZN={float:P4,int:qN,ordinal:Array,number:Array,time:P4},s2;function eh(e){return e>65535?yet:_et}function Nu(){return[1/0,-1/0]}function bet(e){var t=e.constructor;return t===Array?e.slice():new t(e)}function E4(e,t,r,n,i){var o=ZN[r||"float"];if(i){var a=e[t],s=a&&a.length;if(s!==n){for(var l=new o(n),u=0;u<s;u++)l[u]=a[u];e[t]=l}}else e[t]=new o(n)}var wet=function(){function e(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=jt()}return e.prototype.initData=function(t,r,n){this._provider=t,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var i=t.getSource(),o=this.defaultDimValueGetter=s2[i.sourceFormat];this._dimValueGetter=n||o,this._rawExtent=[],$N(i),this._dimensions=Ct(r,function(a){return{type:a.type,property:a.property}}),this._initDataFromProvider(0,t.count())},e.prototype.getProvider=function(){return this._provider},e.prototype.getSource=function(){return this._provider.getSource()},e.prototype.ensureCalculationDimension=function(t,r){var n=this._calcDimNameToIdx,i=this._dimensions,o=n.get(t);if(o!=null){if(i[o].type===r)return o}else o=i.length;return i[o]={type:r},n.set(t,o),this._chunks[o]=new ZN[r||"float"](this._rawCount),this._rawExtent[o]=Nu(),o},e.prototype.collectOrdinalMeta=function(t,r){var n=this._chunks[t],i=this._dimensions[t],o=this._rawExtent,a=i.ordinalOffset||0,s=n.length;a===0&&(o[t]=Nu());for(var l=o[t],u=a;u<s;u++){var c=n[u]=r.parseAndCollect(n[u]);isNaN(c)||(l[0]=Math.min(c,l[0]),l[1]=Math.max(c,l[1]))}i.ordinalMeta=r,i.ordinalOffset=s,i.type="ordinal"},e.prototype.getOrdinalMeta=function(t){var r=this._dimensions[t],n=r.ordinalMeta;return n},e.prototype.getDimensionProperty=function(t){var r=this._dimensions[t];return r&&r.property},e.prototype.appendData=function(t){var r=this._provider,n=this.count();r.appendData(t);var i=r.count();return r.persistent||(i+=n),n<i&&this._initDataFromProvider(n,i,!0),[n,i]},e.prototype.appendValues=function(t,r){for(var n=this._chunks,i=this._dimensions,o=i.length,a=this._rawExtent,s=this.count(),l=s+Math.max(t.length,r||0),u=0;u<o;u++){var c=i[u];E4(n,u,c.type,l,!0)}for(var f=[],h=s;h<l;h++)for(var d=h-s,p=0;p<o;p++){var c=i[p],v=s2.arrayRows.call(this,t[d]||f,c.property,d,p);n[p][h]=v;var g=a[p];v<g[0]&&(g[0]=v),v>g[1]&&(g[1]=v)}return this._rawCount=this._count=l,{start:s,end:l}},e.prototype._initDataFromProvider=function(t,r,n){for(var i=this._provider,o=this._chunks,a=this._dimensions,s=a.length,l=this._rawExtent,u=Ct(a,function(y){return y.property}),c=0;c<s;c++){var f=a[c];l[c]||(l[c]=Nu()),E4(o,c,f.type,r,n)}if(i.fillStorage)i.fillStorage(t,r,o,l);else for(var h=[],d=t;d<r;d++){h=i.getItem(d,h);for(var p=0;p<s;p++){var v=o[p],g=this._dimValueGetter(h,u[p],d,p);v[d]=g;var m=l[p];g<m[0]&&(m[0]=g),g>m[1]&&(m[1]=g)}}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=r,this._extent=[]},e.prototype.count=function(){return this._count},e.prototype.get=function(t,r){if(!(r>=0&&r<this._count))return NaN;var n=this._chunks[t];return n?n[this.getRawIndex(r)]:NaN},e.prototype.getValues=function(t,r){var n=[],i=[];if(r==null){r=t,t=[];for(var o=0;o<this._dimensions.length;o++)i.push(o)}else i=t;for(var o=0,a=i.length;o<a;o++)n.push(this.get(i[o],r));return n},e.prototype.getByRawIndex=function(t,r){if(!(r>=0&&r<this._rawCount))return NaN;var n=this._chunks[t];return n?n[r]:NaN},e.prototype.getSum=function(t){var r=this._chunks[t],n=0;if(r)for(var i=0,o=this.count();i<o;i++){var a=this.get(t,i);isNaN(a)||(n+=a)}return n},e.prototype.getMedian=function(t){var r=[];this.each([t],function(o){isNaN(o)||r.push(o)});var n=r.sort(function(o,a){return o-a}),i=this.count();return i===0?0:i%2===1?n[(i-1)/2]:(n[i/2]+n[i/2-1])/2},e.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var r=this._indices,n=r[t];if(n!=null&&n<this._count&&n===t)return t;for(var i=0,o=this._count-1;i<=o;){var a=(i+o)/2|0;if(r[a]<t)i=a+1;else if(r[a]>t)o=a-1;else return a}return-1},e.prototype.indicesOfNearest=function(t,r,n){var i=this._chunks,o=i[t],a=[];if(!o)return a;n==null&&(n=1/0);for(var s=1/0,l=-1,u=0,c=0,f=this.count();c<f;c++){var h=this.getRawIndex(c),d=r-o[h],p=Math.abs(d);p<=n&&((p<s||p===s&&d>=0&&l<0)&&(s=p,l=d,u=0),d===l&&(a[u++]=c))}return a.length=u,a},e.prototype.getIndices=function(){var t,r=this._indices;if(r){var n=r.constructor,i=this._count;if(n===Array){t=new n(i);for(var o=0;o<i;o++)t[o]=r[o]}else t=new n(r.buffer,0,i)}else{var n=eh(this._rawCount);t=new n(this.count());for(var o=0;o<t.length;o++)t[o]=o}return t},e.prototype.filter=function(t,r){if(!this._count)return this;for(var n=this.clone(),i=n.count(),o=eh(n._rawCount),a=new o(i),s=[],l=t.length,u=0,c=t[0],f=n._chunks,h=0;h<i;h++){var d=void 0,p=n.getRawIndex(h);if(l===0)d=r(h);else if(l===1){var v=f[c][p];d=r(v,h)}else{for(var g=0;g<l;g++)s[g]=f[t[g]][p];s[g]=h,d=r.apply(null,s)}d&&(a[u++]=p)}return u<i&&(n._indices=a),n._count=u,n._extent=[],n._updateGetRawIdx(),n},e.prototype.selectRange=function(t){var r=this.clone(),n=r._count;if(!n)return this;var i=ve(t),o=i.length;if(!o)return this;var a=r.count(),s=eh(r._rawCount),l=new s(a),u=0,c=i[0],f=t[c][0],h=t[c][1],d=r._chunks,p=!1;if(!r._indices){var v=0;if(o===1){for(var g=d[i[0]],m=0;m<n;m++){var y=g[m];(y>=f&&y<=h||isNaN(y))&&(l[u++]=v),v++}p=!0}else if(o===2){for(var g=d[i[0]],_=d[i[1]],b=t[i[1]][0],T=t[i[1]][1],m=0;m<n;m++){var y=g[m],S=_[m];(y>=f&&y<=h||isNaN(y))&&(S>=b&&S<=T||isNaN(S))&&(l[u++]=v),v++}p=!0}}if(!p)if(o===1)for(var m=0;m<a;m++){var P=r.getRawIndex(m),y=d[i[0]][P];(y>=f&&y<=h||isNaN(y))&&(l[u++]=P)}else for(var m=0;m<a;m++){for(var C=!0,P=r.getRawIndex(m),A=0;A<o;A++){var M=i[A],y=d[M][P];(y<t[M][0]||y>t[M][1])&&(C=!1)}C&&(l[u++]=r.getRawIndex(m))}return u<a&&(r._indices=l),r._count=u,r._extent=[],r._updateGetRawIdx(),r},e.prototype.map=function(t,r){var n=this.clone(t);return this._updateDims(n,t,r),n},e.prototype.modify=function(t,r){this._updateDims(this,t,r)},e.prototype._updateDims=function(t,r,n){for(var i=t._chunks,o=[],a=r.length,s=t.count(),l=[],u=t._rawExtent,c=0;c<r.length;c++)u[r[c]]=Nu();for(var f=0;f<s;f++){for(var h=t.getRawIndex(f),d=0;d<a;d++)l[d]=i[r[d]][h];l[a]=f;var p=n&&n.apply(null,l);if(p!=null){typeof p!="object"&&(o[0]=p,p=o);for(var c=0;c<p.length;c++){var v=r[c],g=p[c],m=u[v],y=i[v];y&&(y[h]=g),g<m[0]&&(m[0]=g),g>m[1]&&(m[1]=g)}}}},e.prototype.lttbDownSample=function(t,r){var n=this.clone([t],!0),i=n._chunks,o=i[t],a=this.count(),s=0,l=Math.floor(1/r),u=this.getRawIndex(0),c,f,h,d=new(eh(this._rawCount))(Math.min((Math.ceil(a/l)+2)*2,a));d[s++]=u;for(var p=1;p<a-1;p+=l){for(var v=Math.min(p+l,a-1),g=Math.min(p+l*2,a),m=(g+v)/2,y=0,_=v;_<g;_++){var b=this.getRawIndex(_),T=o[b];isNaN(T)||(y+=T)}y/=g-v;var S=p,P=Math.min(p+l,a),C=p-1,A=o[u];c=-1,h=S;for(var M=-1,k=0,_=S;_<P;_++){var b=this.getRawIndex(_),T=o[b];if(isNaN(T)){k++,M<0&&(M=b);continue}f=Math.abs((C-m)*(T-A)-(C-_)*(y-A)),f>c&&(c=f,h=b)}k>0&&k<P-S&&(d[s++]=Math.min(M,h),h=Math.max(M,h)),d[s++]=h,u=h}return d[s++]=this.getRawIndex(a-1),n._count=s,n._indices=d,n.getRawIndex=this._getRawIdx,n},e.prototype.downSample=function(t,r,n,i){for(var o=this.clone([t],!0),a=o._chunks,s=[],l=Math.floor(1/r),u=a[t],c=this.count(),f=o._rawExtent[t]=Nu(),h=new(eh(this._rawCount))(Math.ceil(c/l)),d=0,p=0;p<c;p+=l){l>c-p&&(l=c-p,s.length=l);for(var v=0;v<l;v++){var g=this.getRawIndex(p+v);s[v]=u[g]}var m=n(s),y=this.getRawIndex(Math.min(p+i(s,m)||0,c-1));u[y]=m,m<f[0]&&(f[0]=m),m>f[1]&&(f[1]=m),h[d++]=y}return o._count=d,o._indices=h,o._updateGetRawIdx(),o},e.prototype.each=function(t,r){if(!!this._count)for(var n=t.length,i=this._chunks,o=0,a=this.count();o<a;o++){var s=this.getRawIndex(o);switch(n){case 0:r(o);break;case 1:r(i[t[0]][s],o);break;case 2:r(i[t[0]][s],i[t[1]][s],o);break;default:for(var l=0,u=[];l<n;l++)u[l]=i[t[l]][s];u[l]=o,r.apply(null,u)}}},e.prototype.getDataExtent=function(t){var r=this._chunks[t],n=Nu();if(!r)return n;var i=this.count(),o=!this._indices,a;if(o)return this._rawExtent[t].slice();if(a=this._extent[t],a)return a.slice();a=n;for(var s=a[0],l=a[1],u=0;u<i;u++){var c=this.getRawIndex(u),f=r[c];f<s&&(s=f),f>l&&(l=f)}return a=[s,l],this._extent[t]=a,a},e.prototype.getRawDataItem=function(t){var r=this.getRawIndex(t);if(this._provider.persistent)return this._provider.getItem(r);for(var n=[],i=this._chunks,o=0;o<i.length;o++)n.push(i[o][r]);return n},e.prototype.clone=function(t,r){var n=new e,i=this._chunks,o=t&&au(t,function(s,l){return s[l]=!0,s},{});if(o)for(var a=0;a<i.length;a++)n._chunks[a]=o[a]?bet(i[a]):i[a];else n._chunks=i;return this._copyCommonProps(n),r||(n._indices=this._cloneIndices()),n._updateGetRawIdx(),n},e.prototype._copyCommonProps=function(t){t._count=this._count,t._rawCount=this._rawCount,t._provider=this._provider,t._dimensions=this._dimensions,t._extent=zt(this._extent),t._rawExtent=zt(this._rawExtent)},e.prototype._cloneIndices=function(){if(this._indices){var t=this._indices.constructor,r=void 0;if(t===Array){var n=this._indices.length;r=new t(n);for(var i=0;i<n;i++)r[i]=this._indices[i]}else r=new t(this._indices);return r}return null},e.prototype._getRawIdxIdentity=function(t){return t},e.prototype._getRawIdx=function(t){return t<this._count&&t>=0?this._indices[t]:-1},e.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},e.internalField=function(){function t(r,n,i,o){return vs(r[o],this._dimensions[o])}s2={arrayRows:t,objectRows:function(r,n,i,o){return vs(r[n],this._dimensions[o])},keyedColumns:t,original:function(r,n,i,o){var a=r&&(r.value==null?r:r.value);return vs(a instanceof Array?a[o]:a,this._dimensions[o])},typedArray:function(r,n,i,o){return r[o]}}}(),e}();const qS=wet;var KN=function(){function e(t){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=t}return e.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},e.prototype._setLocalSource=function(t,r){this._sourceList=t,this._upstreamSignList=r,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},e.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},e.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},e.prototype._createSource=function(){this._setLocalSource([],[]);var t=this._sourceHost,r=this._getUpstreamSourceManagers(),n=!!r.length,i,o;if(Fp(t)){var a=t,s=void 0,l=void 0,u=void 0;if(n){var c=r[0];c.prepareSource(),u=c.getSource(),s=u.data,l=u.sourceFormat,o=[c._getVersionSign()]}else s=a.get("data",!0),l=An(s)?ps:ei,o=[];var f=this._getSourceMetaRawOption()||{},h=u&&u.metaRawOption||{},d=qt(f.seriesLayoutBy,h.seriesLayoutBy)||null,p=qt(f.sourceHeader,h.sourceHeader),v=qt(f.dimensions,h.dimensions),g=d!==h.seriesLayoutBy||!!p!=!!h.sourceHeader||v;i=g?[YS(s,{seriesLayoutBy:d,sourceHeader:p,dimensions:v},l)]:[]}else{var m=t;if(n){var y=this._applyTransform(r);i=y.sourceList,o=y.upstreamSignList}else{var _=m.get("source",!0);i=[YS(_,this._getSourceMetaRawOption(),null)],o=[]}}this._setLocalSource(i,o)},e.prototype._applyTransform=function(t){var r=this._sourceHost,n=r.get("transform",!0),i=r.get("fromTransformResult",!0);if(i!=null){var o="";t.length!==1&&C4(o)}var a,s=[],l=[];return N(t,function(u){u.prepareSource();var c=u.getSource(i||0),f="";i!=null&&!c&&C4(f),s.push(c),l.push(u._getVersionSign())}),n?a=get(n,s,{datasetIndex:r.componentIndex}):i!=null&&(a=[Ztt(s[0])]),{sourceList:a,upstreamSignList:l}},e.prototype._isDirty=function(){if(this._dirty)return!0;for(var t=this._getUpstreamSourceManagers(),r=0;r<t.length;r++){var n=t[r];if(n._isDirty()||this._upstreamSignList[r]!==n._getVersionSign())return!0}},e.prototype.getSource=function(t){t=t||0;var r=this._sourceList[t];if(!r){var n=this._getUpstreamSourceManagers();return n[0]&&n[0].getSource(t)}return r},e.prototype.getSharedDataStore=function(t){var r=t.makeStoreSchema();return this._innerGetDataStore(r.dimensions,t.source,r.hash)},e.prototype._innerGetDataStore=function(t,r,n){var i=0,o=this._storeList,a=o[i];a||(a=o[i]={});var s=a[n];if(!s){var l=this._getUpstreamSourceManagers()[0];Fp(this._sourceHost)&&l?s=l._innerGetDataStore(t,r,n):(s=new qS,s.initData(new zN(r,t.length),t)),a[n]=s}return s},e.prototype._getUpstreamSourceManagers=function(){var t=this._sourceHost;if(Fp(t)){var r=LN(t);return r?[r.getSourceManager()]:[]}else return Ct(wtt(t),function(n){return n.getSourceManager()})},e.prototype._getSourceMetaRawOption=function(){var t=this._sourceHost,r,n,i;if(Fp(t))r=t.get("seriesLayoutBy",!0),n=t.get("sourceHeader",!0),i=t.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var o=t;r=o.get("seriesLayoutBy",!0),n=o.get("sourceHeader",!0),i=o.get("dimensions",!0)}return{seriesLayoutBy:r,sourceHeader:n,dimensions:i}},e}();function A4(e){var t=e.option.transform;t&&_m(e.option.transform)}function Fp(e){return e.mainType==="series"}function C4(e){throw new Error(e)}var JN="line-height:1";function QN(e,t){var r=e.color||"#6e7079",n=e.fontSize||12,i=e.fontWeight||"400",o=e.color||"#464646",a=e.fontSize||14,s=e.fontWeight||"900";return t==="html"?{nameStyle:"font-size:"+Gn(n+"")+"px;color:"+Gn(r)+";font-weight:"+Gn(i+""),valueStyle:"font-size:"+Gn(a+"")+"px;color:"+Gn(o)+";font-weight:"+Gn(s+"")}:{nameStyle:{fontSize:n,fill:r,fontWeight:i},valueStyle:{fontSize:a,fill:o,fontWeight:s}}}var Tet=[0,10,20,30],Pet=["",`
`,`

`,`


`];function Es(e,t){return t.type=e,t}function ZS(e){return e.type==="section"}function tF(e){return ZS(e)?Eet:Aet}function eF(e){if(ZS(e)){var t=0,r=e.blocks.length,n=r>1||r>0&&!e.noHeader;return N(e.blocks,function(i){var o=eF(i);o>=t&&(t=o+ +(n&&(!o||ZS(i)&&!i.noHeader)))}),t}return 0}function Eet(e,t,r,n){var i=t.noHeader,o=Cet(eF(t)),a=[],s=t.blocks||[];xi(!s||ut(s)),s=s||[];var l=e.orderMode;if(t.sortBlocks&&l){s=s.slice();var u={valueAsc:"asc",valueDesc:"desc"};if(ft(u,l)){var c=new XN(u[l],null);s.sort(function(p,v){return c.evaluate(p.sortParam,v.sortParam)})}else l==="seriesDesc"&&s.reverse()}N(s,function(p,v){var g=t.valueFormatter,m=tF(p)(g?ot(ot({},e),{valueFormatter:g}):e,p,v>0?o.html:0,n);m!=null&&a.push(m)});var f=e.renderMode==="richText"?a.join(o.richText):KS(a.join(""),i?r:o.html);if(i)return f;var h=XS(t.header,"ordinal",e.useUTC),d=QN(n,e.renderMode).nameStyle;return e.renderMode==="richText"?rF(e,h,d)+o.richText+f:KS('<div style="'+d+";"+JN+';">'+Gn(h)+"</div>"+f,r)}function Aet(e,t,r,n){var i=e.renderMode,o=t.noName,a=t.noValue,s=!t.markerType,l=t.name,u=e.useUTC,c=t.valueFormatter||e.valueFormatter||function(b){return b=ut(b)?b:[b],Ct(b,function(T,S){return XS(T,ut(d)?d[S]:d,u)})};if(!(o&&a)){var f=s?"":e.markupStyleCreator.makeTooltipMarker(t.markerType,t.markerColor||"#333",i),h=o?"":XS(l,"ordinal",u),d=t.valueType,p=a?[]:c(t.value),v=!s||!o,g=!s&&o,m=QN(n,i),y=m.nameStyle,_=m.valueStyle;return i==="richText"?(s?"":f)+(o?"":rF(e,h,y))+(a?"":xet(e,p,v,g,_)):KS((s?"":f)+(o?"":Met(h,!s,y))+(a?"":ket(p,v,g,_)),r)}}function M4(e,t,r,n,i,o){if(!!e){var a=tF(e),s={useUTC:i,renderMode:r,orderMode:n,markupStyleCreator:t,valueFormatter:e.valueFormatter};return a(s,e,0,o)}}function Cet(e){return{html:Tet[e],richText:Pet[e]}}function KS(e,t){var r='<div style="clear:both"></div>',n="margin: "+t+"px 0 0";return'<div style="'+n+";"+JN+';">'+e+r+"</div>"}function Met(e,t,r){var n=t?"margin-left:2px":"";return'<span style="'+r+";"+n+'">'+Gn(e)+"</span>"}function ket(e,t,r,n){var i=r?"10px":"20px",o=t?"float:right;margin-left:"+i:"";return e=ut(e)?e:[e],'<span style="'+o+";"+n+'">'+Ct(e,function(a){return Gn(a)}).join("&nbsp;&nbsp;")+"</span>"}function rF(e,t,r){return e.markupStyleCreator.wrapRichTextStyle(t,r)}function xet(e,t,r,n,i){var o=[i],a=n?10:20;return r&&o.push({padding:[0,0,0,a],align:"right"}),e.markupStyleCreator.wrapRichTextStyle(ut(t)?t.join("  "):t,o)}function Let(e,t){var r=e.getData().getItemVisual(t,"style"),n=r[e.visualDrawType];return Kl(n)}function nF(e,t){var r=e.get("padding");return r!=null?r:t==="richText"?[8,10]:10}var l2=function(){function e(){this.richTextStyles={},this._nextStyleNameId=f9()}return e.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},e.prototype.makeTooltipMarker=function(t,r,n){var i=n==="richText"?this._generateStyleName():null,o=htt({color:r,type:t,renderMode:n,markerId:i});return Et(o)?o:(this.richTextStyles[i]=o.style,o.content)},e.prototype.wrapRichTextStyle=function(t,r){var n={};ut(r)?N(r,function(o){return ot(n,o)}):ot(n,r);var i=this._generateStyleName();return this.richTextStyles[i]=n,"{"+i+"|"+t+"}"},e}();function Iet(e){var t=e.series,r=e.dataIndex,n=e.multipleSeries,i=t.getData(),o=i.mapDimensionsAll("defaultedTooltip"),a=o.length,s=t.getRawValue(r),l=ut(s),u=Let(t,r),c,f,h,d;if(a>1||l&&!a){var p=Oet(s,t,r,o,u);c=p.inlineValues,f=p.inlineValueTypes,h=p.blocks,d=p.inlineValues[0]}else if(a){var v=i.getDimensionInfo(o[0]);d=c=jc(i,r,o[0]),f=v.type}else d=c=l?s[0]:s;var g=OP(t),m=g&&t.name||"",y=i.getName(r),_=n?m:y;return Es("section",{header:m,noHeader:n||!g,sortParam:d,blocks:[Es("nameValue",{markerType:"item",markerColor:u,name:_,noName:!po(_),value:c,valueType:f})].concat(h||[])})}function Oet(e,t,r,n,i){var o=t.getData(),a=au(e,function(f,h,d){var p=o.getDimensionInfo(d);return f=f||p&&p.tooltip!==!1&&p.displayName!=null},!1),s=[],l=[],u=[];n.length?N(n,function(f){c(jc(o,r,f),f)}):N(e,c);function c(f,h){var d=o.getDimensionInfo(h);!d||d.otherDims.tooltip===!1||(a?u.push(Es("nameValue",{markerType:"subItem",markerColor:i,name:d.displayName,value:f,valueType:d.type})):(s.push(f),l.push(d.type)))}return{inlineValues:s,inlineValueTypes:l,blocks:u}}var xa=Oe();function Bp(e,t){return e.getName(t)||e.getId(t)}var Ret="__universalTransitionEnabled",iy=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._selectedDataIndicesMap={},r}return t.prototype.init=function(r,n,i){this.seriesIndex=this.componentIndex,this.dataTask=bd({count:Net,reset:Fet}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(r,i);var o=xa(this).sourceManager=new KN(this);o.prepareSource();var a=this.getInitialData(r,i);x4(a,this),this.dataTask.context.data=a,xa(this).dataBeforeProcessed=a,k4(this),this._initSelectedMapFromData(a)},t.prototype.mergeDefaultAndTheme=function(r,n){var i=Jd(this),o=i?ey(r):{},a=this.subType;Ce.hasClass(a)&&(a+="Series"),oe(r,n.getTheme().get(this.subType)),oe(r,this.getDefaultOption()),OS(r,"label",["show"]),this.fillDataTextStyle(r.data),i&&Gc(r,o,i)},t.prototype.mergeOption=function(r,n){r=oe(this.option,r,!0),this.fillDataTextStyle(r.data);var i=Jd(this);i&&Gc(this.option,r,i);var o=xa(this).sourceManager;o.dirty(),o.prepareSource();var a=this.getInitialData(r,n);x4(a,this),this.dataTask.dirty(),this.dataTask.context.data=a,xa(this).dataBeforeProcessed=a,k4(this),this._initSelectedMapFromData(a)},t.prototype.fillDataTextStyle=function(r){if(r&&!An(r))for(var n=["show"],i=0;i<r.length;i++)r[i]&&r[i].label&&OS(r[i],"label",n)},t.prototype.getInitialData=function(r,n){},t.prototype.appendData=function(r){var n=this.getRawData();n.appendData(r.data)},t.prototype.getData=function(r){var n=JS(this);if(n){var i=n.context.data;return r==null?i:i.getLinkedData(r)}else return xa(this).data},t.prototype.getAllData=function(){var r=this.getData();return r&&r.getLinkedDataAll?r.getLinkedDataAll():[{data:r}]},t.prototype.setData=function(r){var n=JS(this);if(n){var i=n.context;i.outputData=r,n!==this.dataTask&&(i.data=r)}xa(this).data=r},t.prototype.getEncode=function(){var r=this.get("encode",!0);if(r)return jt(r)},t.prototype.getSourceManager=function(){return xa(this).sourceManager},t.prototype.getSource=function(){return this.getSourceManager().getSource()},t.prototype.getRawData=function(){return xa(this).dataBeforeProcessed},t.prototype.getColorBy=function(){var r=this.get("colorBy");return r||"series"},t.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},t.prototype.getBaseAxis=function(){var r=this.coordinateSystem;return r&&r.getBaseAxis&&r.getBaseAxis()},t.prototype.formatTooltip=function(r,n,i){return Iet({series:this,dataIndex:r,multipleSeries:n})},t.prototype.isAnimationEnabled=function(){var r=this.ecModel;if(Xt.node&&!(r&&r.ssr))return!1;var n=this.getShallow("animation");return n&&this.getData().count()>this.getShallow("animationThreshold")&&(n=!1),!!n},t.prototype.restoreData=function(){this.dataTask.dirty()},t.prototype.getColorFromPalette=function(r,n,i){var o=this.ecModel,a=rE.prototype.getColorFromPalette.call(this,r,n,i);return a||(a=o.getColorFromPalette(r,n,i)),a},t.prototype.coordDimToDataDim=function(r){return this.getRawData().mapDimensionsAll(r)},t.prototype.getProgressive=function(){return this.get("progressive")},t.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},t.prototype.select=function(r,n){this._innerSelect(this.getData(n),r)},t.prototype.unselect=function(r,n){var i=this.option.selectedMap;if(!!i){var o=this.option.selectedMode,a=this.getData(n);if(o==="series"||i==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var s=0;s<r.length;s++){var l=r[s],u=Bp(a,l);i[u]=!1,this._selectedDataIndicesMap[u]=-1}}},t.prototype.toggleSelect=function(r,n){for(var i=[],o=0;o<r.length;o++)i[0]=r[o],this.isSelected(r[o],n)?this.unselect(i,n):this.select(i,n)},t.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var r=this._selectedDataIndicesMap,n=ve(r),i=[],o=0;o<n.length;o++){var a=r[n[o]];a>=0&&i.push(a)}return i},t.prototype.isSelected=function(r,n){var i=this.option.selectedMap;if(!i)return!1;var o=this.getData(n);return(i==="all"||i[Bp(o,r)])&&!o.getItemModel(r).get(["select","disabled"])},t.prototype.isUniversalTransitionEnabled=function(){if(this[Ret])return!0;var r=this.option.universalTransition;return r?r===!0?!0:r&&r.enabled:!1},t.prototype._innerSelect=function(r,n){var i,o,a=this.option,s=a.selectedMode,l=n.length;if(!(!s||!l)){if(s==="series")a.selectedMap="all";else if(s==="multiple"){It(a.selectedMap)||(a.selectedMap={});for(var u=a.selectedMap,c=0;c<l;c++){var f=n[c],h=Bp(r,f);u[h]=!0,this._selectedDataIndicesMap[h]=r.getRawIndex(f)}}else if(s==="single"||s===!0){var d=n[l-1],h=Bp(r,d);a.selectedMap=(i={},i[h]=!0,i),this._selectedDataIndicesMap=(o={},o[h]=r.getRawIndex(d),o)}}},t.prototype._initSelectedMapFromData=function(r){if(!this.option.selectedMap){var n=[];r.hasItemOption&&r.each(function(i){var o=r.getRawDataItem(i);o&&o.selected&&n.push(i)}),n.length>0&&this._innerSelect(r,n)}},t.registerClass=function(r){return Ce.registerClass(r)},t.protoInitialize=function(){var r=t.prototype;r.type="series.__base__",r.seriesIndex=0,r.ignoreStyleOnData=!1,r.hasSymbolVisual=!1,r.defaultSymbol="circle",r.visualStyleAccessPath="itemStyle",r.visualDrawType="fill"}(),t}(Ce);Ri(iy,jN);Ri(iy,rE);m9(iy,Ce);function k4(e){var t=e.name;OP(e)||(e.name=Det(e)||t)}function Det(e){var t=e.getRawData(),r=t.mapDimensionsAll("seriesName"),n=[];return N(r,function(i){var o=t.getDimensionInfo(i);o.displayName&&n.push(o.displayName)}),n.join(" ")}function Net(e){return e.model.getRawData().count()}function Fet(e){var t=e.model;return t.setData(t.getRawData().cloneShallow()),Bet}function Bet(e,t){t.outputData&&e.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function x4(e,t){N(F7(e.CHANGABLE_METHODS,e.DOWNSAMPLE_METHODS),function(r){e.wrapMethod(r,_e($et,t))})}function $et(e,t){var r=JS(e);return r&&r.setOutputEnd((t||this).count()),t}function JS(e){var t=(e.ecModel||{}).scheduler,r=t&&t.getPipeline(e.uid);if(r){var n=r.currentTask;if(n){var i=n.agentStubMap;i&&(n=i.get(e.uid))}return n}}const To=iy;var lE=function(){function e(){this.group=new De,this.uid=Y1("viewComponent")}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,n,i){},e.prototype.dispose=function(t,r){},e.prototype.updateView=function(t,r,n,i){},e.prototype.updateLayout=function(t,r,n,i){},e.prototype.updateVisual=function(t,r,n,i){},e.prototype.toggleBlurSeries=function(t,r,n){},e.prototype.eachRendered=function(t){var r=this.group;r&&r.traverse(t)},e}();DP(lE);$1(lE);const Qn=lE;function uE(){var e=Oe();return function(t){var r=e(t),n=t.pipelineContext,i=!!r.large,o=!!r.progressiveRender,a=r.large=!!(n&&n.large),s=r.progressiveRender=!!(n&&n.progressiveRender);return(i!==a||o!==s)&&"reset"}}var iF=Oe(),zet=uE(),cE=function(){function e(){this.group=new De,this.uid=Y1("viewChart"),this.renderTask=bd({plan:Vet,reset:Uet}),this.renderTask.context={view:this}}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,n,i){},e.prototype.highlight=function(t,r,n,i){var o=t.getData(i&&i.dataType);!o||I4(o,i,"emphasis")},e.prototype.downplay=function(t,r,n,i){var o=t.getData(i&&i.dataType);!o||I4(o,i,"normal")},e.prototype.remove=function(t,r){this.group.removeAll()},e.prototype.dispose=function(t,r){},e.prototype.updateView=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.updateLayout=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.updateVisual=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.eachRendered=function(t){lf(this.group,t)},e.markUpdateMethod=function(t,r){iF(t).updateMethod=r},e.protoInitialize=function(){var t=e.prototype;t.type="chart"}(),e}();function L4(e,t,r){e&&US(e)&&(t==="emphasis"?Wd:Hd)(e,r)}function I4(e,t,r){var n=Xl(e,t),i=t&&t.highlightKey!=null?YJ(t.highlightKey):null;n!=null?N(Ze(n),function(o){L4(e.getItemGraphicEl(o),r,i)}):e.eachItemGraphicEl(function(o){L4(o,r,i)})}DP(cE);$1(cE);function Vet(e){return zet(e.model)}function Uet(e){var t=e.model,r=e.ecModel,n=e.api,i=e.payload,o=t.pipelineContext.progressiveRender,a=e.view,s=i&&iF(i).updateMethod,l=o?"incrementalPrepareRender":s&&a[s]?s:"render";return l!=="render"&&a[l](t,r,n,i),Get[l]}var Get={incrementalPrepareRender:{progress:function(e,t){t.view.incrementalRender(e,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(e,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}};const Yn=cE;var Rm="\0__throttleOriginMethod",O4="\0__throttleRate",R4="\0__throttleType";function oy(e,t,r){var n,i=0,o=0,a=null,s,l,u,c;t=t||0;function f(){o=new Date().getTime(),a=null,e.apply(l,u||[])}var h=function(){for(var d=[],p=0;p<arguments.length;p++)d[p]=arguments[p];n=new Date().getTime(),l=this,u=d;var v=c||t,g=c||r;c=null,s=n-(g?i:o)-v,clearTimeout(a),g?a=setTimeout(f,v):s>=0?f():a=setTimeout(f,-s),i=n};return h.clear=function(){a&&(clearTimeout(a),a=null)},h.debounceNextCall=function(d){c=d},h}function oF(e,t,r,n){var i=e[t];if(!!i){var o=i[Rm]||i,a=i[R4],s=i[O4];if(s!==r||a!==n){if(r==null||!n)return e[t]=o;i=e[t]=oy(o,r,n==="debounce"),i[Rm]=o,i[R4]=n,i[O4]=r}return i}}function QS(e,t){var r=e[t];r&&r[Rm]&&(r.clear&&r.clear(),e[t]=r[Rm])}var D4=Oe(),N4={itemStyle:jd(dN,!0),lineStyle:jd(hN,!0)},jet={lineStyle:"stroke",itemStyle:"fill"};function aF(e,t){var r=e.visualStyleMapper||N4[t];return r||(console.warn("Unkown style type '"+t+"'."),N4.itemStyle)}function sF(e,t){var r=e.visualDrawType||jet[t];return r||(console.warn("Unkown style type '"+t+"'."),"fill")}var Wet={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData(),n=e.visualStyleAccessPath||"itemStyle",i=e.getModel(n),o=aF(e,n),a=o(i),s=i.getShallow("decal");s&&(r.setVisual("decal",s),s.dirty=!0);var l=sF(e,n),u=a[l],c=Ut(u)?u:null,f=a.fill==="auto"||a.stroke==="auto";if(!a[l]||c||f){var h=e.getColorFromPalette(e.name,null,t.getSeriesCount());a[l]||(a[l]=h,r.setVisual("colorFromPalette",!0)),a.fill=a.fill==="auto"||Ut(a.fill)?h:a.fill,a.stroke=a.stroke==="auto"||Ut(a.stroke)?h:a.stroke}if(r.setVisual("style",a),r.setVisual("drawType",l),!t.isSeriesFiltered(e)&&c)return r.setVisual("colorFromPalette",!1),{dataEach:function(d,p){var v=e.getDataParams(p),g=ot({},a);g[l]=c(v),d.setItemVisual(p,"style",g)}}}},rh=new br,Het={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!(e.ignoreStyleOnData||t.isSeriesFiltered(e))){var r=e.getData(),n=e.visualStyleAccessPath||"itemStyle",i=aF(e,n),o=r.getVisual("drawType");return{dataEach:r.hasItemOption?function(a,s){var l=a.getRawDataItem(s);if(l&&l[n]){rh.option=l[n];var u=i(rh),c=a.ensureUniqueItemVisual(s,"style");ot(c,u),rh.option.decal&&(a.setItemVisual(s,"decal",rh.option.decal),rh.option.decal.dirty=!0),o in u&&a.setItemVisual(s,"colorFromPalette",!1)}}:null}}}},Xet={performRawSeries:!0,overallReset:function(e){var t=jt();e.eachSeries(function(r){var n=r.getColorBy();if(!r.isColorBySeries()){var i=r.type+"-"+n,o=t.get(i);o||(o={},t.set(i,o)),D4(r).scope=o}}),e.eachSeries(function(r){if(!(r.isColorBySeries()||e.isSeriesFiltered(r))){var n=r.getRawData(),i={},o=r.getData(),a=D4(r).scope,s=r.visualStyleAccessPath||"itemStyle",l=sF(r,s);o.each(function(u){var c=o.getRawIndex(u);i[c]=u}),n.each(function(u){var c=i[u],f=o.getItemVisual(c,"colorFromPalette");if(f){var h=o.ensureUniqueItemVisual(c,"style"),d=n.getName(u)||u+"",p=n.count();h[l]=r.getColorFromPalette(d,a,p)}})}})}},$p=Math.PI;function Yet(e,t){t=t||{},te(t,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var r=new De,n=new Ke({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});r.add(n);var i=new Je({style:{text:t.text,fill:t.textColor,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily},zlevel:t.zlevel,z:10001}),o=new Ke({style:{fill:"none"},textContent:i,textConfig:{position:"right",distance:10},zlevel:t.zlevel,z:10001});r.add(o);var a;return t.showSpinner&&(a=new jP({shape:{startAngle:-$p/2,endAngle:-$p/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001}),a.animateShape(!0).when(1e3,{endAngle:$p*3/2}).start("circularInOut"),a.animateShape(!0).when(1e3,{startAngle:$p*3/2}).delay(300).start("circularInOut"),r.add(a)),r.resize=function(){var s=i.getBoundingRect().width,l=t.showSpinner?t.spinnerRadius:0,u=(e.getWidth()-l*2-(t.showSpinner&&s?10:0)-s)/2-(t.showSpinner&&s?0:5+s/2)+(t.showSpinner?0:s/2)+(s?0:l),c=e.getHeight()/2;t.showSpinner&&a.setShape({cx:u,cy:c}),o.setShape({x:u-l,y:c-l,width:l*2,height:l*2}),n.setShape({x:0,y:0,width:e.getWidth(),height:e.getHeight()})},r.resize(),r}var qet=function(){function e(t,r,n,i){this._stageTaskMap=jt(),this.ecInstance=t,this.api=r,n=this._dataProcessorHandlers=n.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=n.concat(i)}return e.prototype.restoreData=function(t,r){t.restoreData(r),this._stageTaskMap.each(function(n){var i=n.overallTask;i&&i.dirty()})},e.prototype.getPerformArgs=function(t,r){if(!!t.__pipeline){var n=this._pipelineMap.get(t.__pipeline.id),i=n.context,o=!r&&n.progressiveEnabled&&(!i||i.progressiveRender)&&t.__idxInPipeline>n.blockIndex,a=o?n.step:null,s=i&&i.modDataCount,l=s!=null?Math.ceil(s/a):null;return{step:a,modBy:l,modDataCount:s}}},e.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},e.prototype.updateStreamModes=function(t,r){var n=this._pipelineMap.get(t.uid),i=t.getData(),o=i.count(),a=n.progressiveEnabled&&r.incrementalPrepareRender&&o>=n.threshold,s=t.get("large")&&o>=t.get("largeThreshold"),l=t.get("progressiveChunkMode")==="mod"?o:null;t.pipelineContext=n.context={progressiveRender:a,modDataCount:l,large:s}},e.prototype.restorePipelines=function(t){var r=this,n=r._pipelineMap=jt();t.eachSeries(function(i){var o=i.getProgressive(),a=i.uid;n.set(a,{id:a,head:null,tail:null,threshold:i.getProgressiveThreshold(),progressiveEnabled:o&&!(i.preventIncremental&&i.preventIncremental()),blockIndex:-1,step:Math.round(o||700),count:0}),r._pipe(i,i.dataTask)})},e.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,r=this.api.getModel(),n=this.api;N(this._allHandlers,function(i){var o=t.get(i.uid)||t.set(i.uid,{}),a="";xi(!(i.reset&&i.overallReset),a),i.reset&&this._createSeriesStageTask(i,o,r,n),i.overallReset&&this._createOverallStageTask(i,o,r,n)},this)},e.prototype.prepareView=function(t,r,n,i){var o=t.renderTask,a=o.context;a.model=r,a.ecModel=n,a.api=i,o.__block=!t.incrementalPrepareRender,this._pipe(r,o)},e.prototype.performDataProcessorTasks=function(t,r){this._performStageTasks(this._dataProcessorHandlers,t,r,{block:!0})},e.prototype.performVisualTasks=function(t,r,n){this._performStageTasks(this._visualHandlers,t,r,n)},e.prototype._performStageTasks=function(t,r,n,i){i=i||{};var o=!1,a=this;N(t,function(l,u){if(!(i.visualType&&i.visualType!==l.visualType)){var c=a._stageTaskMap.get(l.uid),f=c.seriesTaskMap,h=c.overallTask;if(h){var d,p=h.agentStubMap;p.each(function(g){s(i,g)&&(g.dirty(),d=!0)}),d&&h.dirty(),a.updatePayload(h,n);var v=a.getPerformArgs(h,i.block);p.each(function(g){g.perform(v)}),h.perform(v)&&(o=!0)}else f&&f.each(function(g,m){s(i,g)&&g.dirty();var y=a.getPerformArgs(g,i.block);y.skip=!l.performRawSeries&&r.isSeriesFiltered(g.context.model),a.updatePayload(g,n),g.perform(y)&&(o=!0)})}});function s(l,u){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(u.__pipeline.id))}this.unfinished=o||this.unfinished},e.prototype.performSeriesTasks=function(t){var r;t.eachSeries(function(n){r=n.dataTask.perform()||r}),this.unfinished=r||this.unfinished},e.prototype.plan=function(){this._pipelineMap.each(function(t){var r=t.tail;do{if(r.__block){t.blockIndex=r.__idxInPipeline;break}r=r.getUpstream()}while(r)})},e.prototype.updatePayload=function(t,r){r!=="remain"&&(t.context.payload=r)},e.prototype._createSeriesStageTask=function(t,r,n,i){var o=this,a=r.seriesTaskMap,s=r.seriesTaskMap=jt(),l=t.seriesType,u=t.getTargetSeries;t.createOnAllSeries?n.eachRawSeries(c):l?n.eachRawSeriesByType(l,c):u&&u(n,i).each(c);function c(f){var h=f.uid,d=s.set(h,a&&a.get(h)||bd({plan:trt,reset:ert,count:nrt}));d.context={model:f,ecModel:n,api:i,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:o},o._pipe(f,d)}},e.prototype._createOverallStageTask=function(t,r,n,i){var o=this,a=r.overallTask=r.overallTask||bd({reset:Zet});a.context={ecModel:n,api:i,overallReset:t.overallReset,scheduler:o};var s=a.agentStubMap,l=a.agentStubMap=jt(),u=t.seriesType,c=t.getTargetSeries,f=!0,h=!1,d="";xi(!t.createOnAllSeries,d),u?n.eachRawSeriesByType(u,p):c?c(n,i).each(p):(f=!1,N(n.getSeries(),p));function p(v){var g=v.uid,m=l.set(g,s&&s.get(g)||(h=!0,bd({reset:Ket,onDirty:Qet})));m.context={model:v,overallProgress:f},m.agent=a,m.__block=f,o._pipe(v,m)}h&&a.dirty()},e.prototype._pipe=function(t,r){var n=t.uid,i=this._pipelineMap.get(n);!i.head&&(i.head=r),i.tail&&i.tail.pipe(r),i.tail=r,r.__idxInPipeline=i.count++,r.__pipeline=i},e.wrapStageHandler=function(t,r){return Ut(t)&&(t={overallReset:t,seriesType:irt(t)}),t.uid=Y1("stageHandler"),r&&(t.visualType=r),t},e}();function Zet(e){e.overallReset(e.ecModel,e.api,e.payload)}function Ket(e){return e.overallProgress&&Jet}function Jet(){this.agent.dirty(),this.getDownstream().dirty()}function Qet(){this.agent&&this.agent.dirty()}function trt(e){return e.plan?e.plan(e.model,e.ecModel,e.api,e.payload):null}function ert(e){e.useClearVisual&&e.data.clearAllVisual();var t=e.resetDefines=Ze(e.reset(e.model,e.ecModel,e.api,e.payload));return t.length>1?Ct(t,function(r,n){return lF(n)}):rrt}var rrt=lF(0);function lF(e){return function(t,r){var n=r.data,i=r.resetDefines[e];if(i&&i.dataEach)for(var o=t.start;o<t.end;o++)i.dataEach(n,o);else i&&i.progress&&i.progress(t,n)}}function nrt(e){return e.data.count()}function irt(e){Dm=null;try{e(t0,uF)}catch{}return Dm}var t0={},uF={},Dm;cF(t0,RN);cF(uF,DN);t0.eachSeriesByType=t0.eachRawSeriesByType=function(e){Dm=e};t0.eachComponent=function(e){e.mainType==="series"&&e.subType&&(Dm=e.subType)};function cF(e,t){for(var r in t.prototype)e[r]=Dr}const fF=qet;var F4=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const ort={color:F4,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],F4]};var Gr="#B9B8CE",B4="#100C2A",zp=function(){return{axisLine:{lineStyle:{color:Gr}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},$4=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],hF={darkMode:!0,color:$4,backgroundColor:B4,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:Gr}},textStyle:{color:Gr},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:Gr}},dataZoom:{borderColor:"#71708A",textStyle:{color:Gr},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:Gr}},timeline:{lineStyle:{color:Gr},label:{color:Gr},controlStyle:{color:Gr,borderColor:Gr}},calendar:{itemStyle:{color:B4},dayLabel:{color:Gr},monthLabel:{color:Gr},yearLabel:{color:Gr}},timeAxis:zp(),logAxis:zp(),valueAxis:zp(),categoryAxis:zp(),line:{symbol:"circle"},graph:{color:$4},gauge:{title:{color:Gr},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:Gr},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};hF.categoryAxis.splitLine.show=!1;const art=hF;var srt=function(){function e(){}return e.prototype.normalizeQuery=function(t){var r={},n={},i={};if(Et(t)){var o=go(t);r.mainType=o.main||null,r.subType=o.sub||null}else{var a=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1};N(t,function(l,u){for(var c=!1,f=0;f<a.length;f++){var h=a[f],d=u.lastIndexOf(h);if(d>0&&d===u.length-h.length){var p=u.slice(0,d);p!=="data"&&(r.mainType=p,r[h.toLowerCase()]=l,c=!0)}}s.hasOwnProperty(u)&&(n[u]=l,c=!0),c||(i[u]=l)})}return{cptQuery:r,dataQuery:n,otherQuery:i}},e.prototype.filter=function(t,r){var n=this.eventInfo;if(!n)return!0;var i=n.targetEl,o=n.packedEvent,a=n.model,s=n.view;if(!a||!s)return!0;var l=r.cptQuery,u=r.dataQuery;return c(l,a,"mainType")&&c(l,a,"subType")&&c(l,a,"index","componentIndex")&&c(l,a,"name")&&c(l,a,"id")&&c(u,o,"name")&&c(u,o,"dataIndex")&&c(u,o,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(t,r.otherQuery,i,o));function c(f,h,d,p){return f[d]==null||h[p||d]===f[d]}},e.prototype.afterTrigger=function(){this.eventInfo=null},e}(),t3=["symbol","symbolSize","symbolRotate","symbolOffset"],z4=t3.concat(["symbolKeepAspect"]),lrt={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData();if(e.legendIcon&&r.setVisual("legendIcon",e.legendIcon),!e.hasSymbolVisual)return;for(var n={},i={},o=!1,a=0;a<t3.length;a++){var s=t3[a],l=e.get(s);Ut(l)?(o=!0,i[s]=l):n[s]=l}if(n.symbol=n.symbol||e.defaultSymbol,r.setVisual(ot({legendIcon:e.legendIcon||n.symbol,symbolKeepAspect:e.get("symbolKeepAspect")},n)),t.isSeriesFiltered(e))return;var u=ve(i);function c(f,h){for(var d=e.getRawValue(h),p=e.getDataParams(h),v=0;v<u.length;v++){var g=u[v];f.setItemVisual(h,g,i[g](d,p))}}return{dataEach:o?c:null}}},urt={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!e.hasSymbolVisual||t.isSeriesFiltered(e))return;var r=e.getData();function n(i,o){for(var a=i.getItemModel(o),s=0;s<z4.length;s++){var l=z4[s],u=a.getShallow(l,!0);u!=null&&i.setItemVisual(o,l,u)}}return{dataEach:r.hasItemOption?n:null}}};function dF(e,t,r){switch(r){case"color":var n=e.getItemVisual(t,"style");return n[e.getVisual("drawType")];case"opacity":return e.getItemVisual(t,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getItemVisual(t,r)}}function ay(e,t){switch(t){case"color":var r=e.getVisual("style");return r[e.getVisual("drawType")];case"opacity":return e.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getVisual(t)}}function crt(e,t,r,n){switch(r){case"color":var i=e.ensureUniqueItemVisual(t,"style");i[e.getVisual("drawType")]=n,e.setItemVisual(t,"colorFromPalette",!1);break;case"opacity":e.ensureUniqueItemVisual(t,"style").opacity=n;break;case"symbol":case"symbolSize":case"liftZ":e.setItemVisual(t,r,n);break}}function Fu(e,t,r,n,i){var o=e+t;r.isSilent(o)||n.eachComponent({mainType:"series",subType:"pie"},function(a){for(var s=a.seriesIndex,l=a.option.selectedMap,u=i.selected,c=0;c<u.length;c++)if(u[c].seriesIndex===s){var f=a.getData(),h=Xl(f,i.fromActionPayload);r.trigger(o,{type:o,seriesId:a.id,name:ut(h)?f.getName(h[0]):f.getName(h),selected:Et(l)?l:ot({},l)})}})}function frt(e,t,r){e.on("selectchanged",function(n){var i=r.getModel();n.isFromClick?(Fu("map","selectchanged",t,i,n),Fu("pie","selectchanged",t,i,n)):n.fromAction==="select"?(Fu("map","selected",t,i,n),Fu("pie","selected",t,i,n)):n.fromAction==="unselect"&&(Fu("map","unselected",t,i,n),Fu("pie","unselected",t,i,n))})}function gc(e,t,r){for(var n;e&&!(t(e)&&(n=e,r));)e=e.__hostTarget||e.parent;return n}var hrt=Math.round(Math.random()*9),drt=typeof Object.defineProperty=="function",prt=function(){function e(){this._id="__ec_inner_"+hrt++}return e.prototype.get=function(t){return this._guard(t)[this._id]},e.prototype.set=function(t,r){var n=this._guard(t);return drt?Object.defineProperty(n,this._id,{value:r,enumerable:!1,configurable:!0}):n[this._id]=r,this},e.prototype.delete=function(t){return this.has(t)?(delete this._guard(t)[this._id],!0):!1},e.prototype.has=function(t){return!!this._guard(t)[this._id]},e.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},e}();const vrt=prt;var grt=he.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,n=t.cy,i=t.width/2,o=t.height/2;e.moveTo(r,n-o),e.lineTo(r+i,n+o),e.lineTo(r-i,n+o),e.closePath()}}),mrt=he.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,n=t.cy,i=t.width/2,o=t.height/2;e.moveTo(r,n-o),e.lineTo(r+i,n),e.lineTo(r,n+o),e.lineTo(r-i,n),e.closePath()}}),yrt=he.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.x,n=t.y,i=t.width/5*3,o=Math.max(i,t.height),a=i/2,s=a*a/(o-a),l=n-o+a+s,u=Math.asin(s/a),c=Math.cos(u)*a,f=Math.sin(u),h=Math.cos(u),d=a*.6,p=a*.7;e.moveTo(r-c,l+s),e.arc(r,l,a,Math.PI-u,Math.PI*2+u),e.bezierCurveTo(r+c-f*d,l+s+h*d,r,n-p,r,n),e.bezierCurveTo(r,n-p,r-c+f*d,l+s+h*d,r-c,l+s),e.closePath()}}),_rt=he.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.height,n=t.width,i=t.x,o=t.y,a=n/3*2;e.moveTo(i,o),e.lineTo(i+a,o+r),e.lineTo(i,o+r/4*3),e.lineTo(i-a,o+r),e.lineTo(i,o),e.closePath()}}),brt={line:Ts,rect:Ke,roundRect:Ke,square:Ke,circle:GP,diamond:mrt,pin:yrt,arrow:_rt,triangle:grt},wrt={line:function(e,t,r,n,i){i.x1=e,i.y1=t+n/2,i.x2=e+r,i.y2=t+n/2},rect:function(e,t,r,n,i){i.x=e,i.y=t,i.width=r,i.height=n},roundRect:function(e,t,r,n,i){i.x=e,i.y=t,i.width=r,i.height=n,i.r=Math.min(r,n)/4},square:function(e,t,r,n,i){var o=Math.min(r,n);i.x=e,i.y=t,i.width=o,i.height=o},circle:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.r=Math.min(r,n)/2},diamond:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.width=r,i.height=n},pin:function(e,t,r,n,i){i.x=e+r/2,i.y=t+n/2,i.width=r,i.height=n},arrow:function(e,t,r,n,i){i.x=e+r/2,i.y=t+n/2,i.width=r,i.height=n},triangle:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.width=r,i.height=n}},e3={};N(brt,function(e,t){e3[t]=new e});var Srt=he.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(e,t,r){var n=Am(e,t,r),i=this.shape;return i&&i.symbolType==="pin"&&t.position==="inside"&&(n.y=r.y+r.height*.4),n},buildPath:function(e,t,r){var n=t.symbolType;if(n!=="none"){var i=e3[n];i||(n="rect",i=e3[n]),wrt[n](t.x,t.y,t.width,t.height,i.shape),i.buildPath(e,i.shape,r)}}});function Trt(e,t){if(this.type!=="image"){var r=this.style;this.__isEmptyBrush?(r.stroke=e,r.fill=t||"#fff",r.lineWidth=2):this.shape.symbolType==="line"?r.stroke=e:r.fill=e,this.markRedraw()}}function Li(e,t,r,n,i,o,a){var s=e.indexOf("empty")===0;s&&(e=e.substr(5,1).toLowerCase()+e.substr(6));var l;return e.indexOf("image://")===0?l=oN(e.slice(8),new ae(t,r,n,i),a?"center":"cover"):e.indexOf("path://")===0?l=W1(e.slice(7),{},new ae(t,r,n,i),a?"center":"cover"):l=new Srt({shape:{symbolType:e,x:t,y:r,width:n,height:i}}),l.__isEmptyBrush=s,l.setColor=Trt,o&&l.setColor(o),l}function pF(e){return ut(e)||(e=[+e,+e]),[e[0]||0,e[1]||0]}function fE(e,t){if(e!=null)return ut(e)||(e=[e,e]),[We(e[0],t[0])||0,We(qt(e[1],e[0]),t[1])||0]}function Cl(e){return isFinite(e)}function Prt(e,t,r){var n=t.x==null?0:t.x,i=t.x2==null?1:t.x2,o=t.y==null?0:t.y,a=t.y2==null?0:t.y2;t.global||(n=n*r.width+r.x,i=i*r.width+r.x,o=o*r.height+r.y,a=a*r.height+r.y),n=Cl(n)?n:0,i=Cl(i)?i:1,o=Cl(o)?o:0,a=Cl(a)?a:0;var s=e.createLinearGradient(n,o,i,a);return s}function Ert(e,t,r){var n=r.width,i=r.height,o=Math.min(n,i),a=t.x==null?.5:t.x,s=t.y==null?.5:t.y,l=t.r==null?.5:t.r;t.global||(a=a*n+r.x,s=s*i+r.y,l=l*o),a=Cl(a)?a:.5,s=Cl(s)?s:.5,l=l>=0&&Cl(l)?l:.5;var u=e.createRadialGradient(a,s,0,a,s,l);return u}function r3(e,t,r){for(var n=t.type==="radial"?Ert(e,t,r):Prt(e,t,r),i=t.colorStops,o=0;o<i.length;o++)n.addColorStop(i[o].offset,i[o].color);return n}function Art(e,t){if(e===t||!e&&!t)return!1;if(!e||!t||e.length!==t.length)return!0;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!0;return!1}function Vp(e){return parseInt(e,10)}function Up(e,t,r){var n=["width","height"][t],i=["clientWidth","clientHeight"][t],o=["paddingLeft","paddingTop"][t],a=["paddingRight","paddingBottom"][t];if(r[n]!=null&&r[n]!=="auto")return parseFloat(r[n]);var s=document.defaultView.getComputedStyle(e);return(e[i]||Vp(s[n])||Vp(e.style[n]))-(Vp(s[o])||0)-(Vp(s[a])||0)|0}function Crt(e,t){return!e||e==="solid"||!(t>0)?null:e==="dashed"?[4*t,2*t]:e==="dotted"?[t]:be(e)?[e]:ut(e)?e:null}function vF(e){var t=e.style,r=t.lineDash&&t.lineWidth>0&&Crt(t.lineDash,t.lineWidth),n=t.lineDashOffset;if(r){var i=t.strokeNoScale&&e.getLineScale?e.getLineScale():1;i&&i!==1&&(r=Ct(r,function(o){return o/i}),n/=i)}return[r,n]}var Mrt=new Yl(!0);function Nm(e){var t=e.stroke;return!(t==null||t==="none"||!(e.lineWidth>0))}function V4(e){return typeof e=="string"&&e!=="none"}function Fm(e){var t=e.fill;return t!=null&&t!=="none"}function U4(e,t){if(t.fillOpacity!=null&&t.fillOpacity!==1){var r=e.globalAlpha;e.globalAlpha=t.fillOpacity*t.opacity,e.fill(),e.globalAlpha=r}else e.fill()}function G4(e,t){if(t.strokeOpacity!=null&&t.strokeOpacity!==1){var r=e.globalAlpha;e.globalAlpha=t.strokeOpacity*t.opacity,e.stroke(),e.globalAlpha=r}else e.stroke()}function n3(e,t,r){var n=y9(t.image,t.__image,r);if(z1(n)){var i=e.createPattern(n,t.repeat||"repeat");if(typeof DOMMatrix=="function"&&i&&i.setTransform){var o=new DOMMatrix;o.translateSelf(t.x||0,t.y||0),o.rotateSelf(0,0,(t.rotation||0)*Rq),o.scaleSelf(t.scaleX||1,t.scaleY||1),i.setTransform(o)}return i}}function krt(e,t,r,n){var i,o=Nm(r),a=Fm(r),s=r.strokePercent,l=s<1,u=!t.path;(!t.silent||l)&&u&&t.createPathProxy();var c=t.path||Mrt,f=t.__dirty;if(!n){var h=r.fill,d=r.stroke,p=a&&!!h.colorStops,v=o&&!!d.colorStops,g=a&&!!h.image,m=o&&!!d.image,y=void 0,_=void 0,b=void 0,T=void 0,S=void 0;(p||v)&&(S=t.getBoundingRect()),p&&(y=f?r3(e,h,S):t.__canvasFillGradient,t.__canvasFillGradient=y),v&&(_=f?r3(e,d,S):t.__canvasStrokeGradient,t.__canvasStrokeGradient=_),g&&(b=f||!t.__canvasFillPattern?n3(e,h,t):t.__canvasFillPattern,t.__canvasFillPattern=b),m&&(T=f||!t.__canvasStrokePattern?n3(e,d,t):t.__canvasStrokePattern,t.__canvasStrokePattern=b),p?e.fillStyle=y:g&&(b?e.fillStyle=b:a=!1),v?e.strokeStyle=_:m&&(T?e.strokeStyle=T:o=!1)}var P=t.getGlobalScale();c.setScale(P[0],P[1],t.segmentIgnoreThreshold);var C,A;e.setLineDash&&r.lineDash&&(i=vF(t),C=i[0],A=i[1]);var M=!0;(u||f&lc)&&(c.setDPR(e.dpr),l?c.setContext(null):(c.setContext(e),M=!1),c.reset(),t.buildPath(c,t.shape,n),c.toStatic(),t.pathUpdated()),M&&c.rebuildPath(e,l?s:1),C&&(e.setLineDash(C),e.lineDashOffset=A),n||(r.strokeFirst?(o&&G4(e,r),a&&U4(e,r)):(a&&U4(e,r),o&&G4(e,r))),C&&e.setLineDash([])}function xrt(e,t,r){var n=t.__image=y9(r.image,t.__image,t,t.onload);if(!(!n||!z1(n))){var i=r.x||0,o=r.y||0,a=t.getWidth(),s=t.getHeight(),l=n.width/n.height;if(a==null&&s!=null?a=s*l:s==null&&a!=null?s=a/l:a==null&&s==null&&(a=n.width,s=n.height),r.sWidth&&r.sHeight){var u=r.sx||0,c=r.sy||0;e.drawImage(n,u,c,r.sWidth,r.sHeight,i,o,a,s)}else if(r.sx&&r.sy){var u=r.sx,c=r.sy,f=a-u,h=s-c;e.drawImage(n,u,c,f,h,i,o,a,s)}else e.drawImage(n,i,o,a,s)}}function Lrt(e,t,r){var n,i=r.text;if(i!=null&&(i+=""),i){e.font=r.font||Wl,e.textAlign=r.textAlign,e.textBaseline=r.textBaseline;var o=void 0,a=void 0;e.setLineDash&&r.lineDash&&(n=vF(t),o=n[0],a=n[1]),o&&(e.setLineDash(o),e.lineDashOffset=a),r.strokeFirst?(Nm(r)&&e.strokeText(i,r.x,r.y),Fm(r)&&e.fillText(i,r.x,r.y)):(Fm(r)&&e.fillText(i,r.x,r.y),Nm(r)&&e.strokeText(i,r.x,r.y)),o&&e.setLineDash([])}}var j4=["shadowBlur","shadowOffsetX","shadowOffsetY"],W4=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function gF(e,t,r,n,i){var o=!1;if(!n&&(r=r||{},t===r))return!1;if(n||t.opacity!==r.opacity){nn(e,i),o=!0;var a=Math.max(Math.min(t.opacity,1),0);e.globalAlpha=isNaN(a)?Dl.opacity:a}(n||t.blend!==r.blend)&&(o||(nn(e,i),o=!0),e.globalCompositeOperation=t.blend||Dl.blend);for(var s=0;s<j4.length;s++){var l=j4[s];(n||t[l]!==r[l])&&(o||(nn(e,i),o=!0),e[l]=e.dpr*(t[l]||0))}return(n||t.shadowColor!==r.shadowColor)&&(o||(nn(e,i),o=!0),e.shadowColor=t.shadowColor||Dl.shadowColor),o}function H4(e,t,r,n,i){var o=e0(t,i.inHover),a=n?null:r&&e0(r,i.inHover)||{};if(o===a)return!1;var s=gF(e,o,a,n,i);if((n||o.fill!==a.fill)&&(s||(nn(e,i),s=!0),V4(o.fill)&&(e.fillStyle=o.fill)),(n||o.stroke!==a.stroke)&&(s||(nn(e,i),s=!0),V4(o.stroke)&&(e.strokeStyle=o.stroke)),(n||o.opacity!==a.opacity)&&(s||(nn(e,i),s=!0),e.globalAlpha=o.opacity==null?1:o.opacity),t.hasStroke()){var l=o.lineWidth,u=l/(o.strokeNoScale&&t.getLineScale?t.getLineScale():1);e.lineWidth!==u&&(s||(nn(e,i),s=!0),e.lineWidth=u)}for(var c=0;c<W4.length;c++){var f=W4[c],h=f[0];(n||o[h]!==a[h])&&(s||(nn(e,i),s=!0),e[h]=o[h]||f[1])}return s}function Irt(e,t,r,n,i){return gF(e,e0(t,i.inHover),r&&e0(r,i.inHover),n,i)}function mF(e,t){var r=t.transform,n=e.dpr||1;r?e.setTransform(n*r[0],n*r[1],n*r[2],n*r[3],n*r[4],n*r[5]):e.setTransform(n,0,0,n,0,0)}function Ort(e,t,r){for(var n=!1,i=0;i<e.length;i++){var o=e[i];n=n||o.isZeroArea(),mF(t,o),t.beginPath(),o.buildPath(t,o.shape),t.clip()}r.allClipped=n}function Rrt(e,t){return e&&t?e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||e[4]!==t[4]||e[5]!==t[5]:!(!e&&!t)}var X4=1,Y4=2,q4=3,Z4=4;function Drt(e){var t=Fm(e),r=Nm(e);return!(e.lineDash||!(+t^+r)||t&&typeof e.fill!="string"||r&&typeof e.stroke!="string"||e.strokePercent<1||e.strokeOpacity<1||e.fillOpacity<1)}function nn(e,t){t.batchFill&&e.fill(),t.batchStroke&&e.stroke(),t.batchFill="",t.batchStroke=""}function e0(e,t){return t&&e.__hoverStyle||e.style}function yF(e,t){Ml(e,t,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function Ml(e,t,r,n){var i=t.transform;if(!t.shouldBePainted(r.viewWidth,r.viewHeight,!1,!1)){t.__dirty&=~bn,t.__isRendered=!1;return}var o=t.__clipPaths,a=r.prevElClipPaths,s=!1,l=!1;if((!a||Art(o,a))&&(a&&a.length&&(nn(e,r),e.restore(),l=s=!0,r.prevElClipPaths=null,r.allClipped=!1,r.prevEl=null),o&&o.length&&(nn(e,r),e.save(),Ort(o,e,r),s=!0),r.prevElClipPaths=o),r.allClipped){t.__isRendered=!1;return}t.beforeBrush&&t.beforeBrush(),t.innerBeforeBrush();var u=r.prevEl;u||(l=s=!0);var c=t instanceof he&&t.autoBatch&&Drt(t.style);s||Rrt(i,u.transform)?(nn(e,r),mF(e,t)):c||nn(e,r);var f=e0(t,r.inHover);t instanceof he?(r.lastDrawType!==X4&&(l=!0,r.lastDrawType=X4),H4(e,t,u,l,r),(!c||!r.batchFill&&!r.batchStroke)&&e.beginPath(),krt(e,t,f,c),c&&(r.batchFill=f.fill||"",r.batchStroke=f.stroke||"")):t instanceof FS?(r.lastDrawType!==q4&&(l=!0,r.lastDrawType=q4),H4(e,t,u,l,r),Lrt(e,t,f)):t instanceof ma?(r.lastDrawType!==Y4&&(l=!0,r.lastDrawType=Y4),Irt(e,t,u,l,r),xrt(e,t,f)):t.getTemporalDisplayables&&(r.lastDrawType!==Z4&&(l=!0,r.lastDrawType=Z4),Nrt(e,t,r)),c&&n&&nn(e,r),t.innerAfterBrush(),t.afterBrush&&t.afterBrush(),r.prevEl=t,t.__dirty=0,t.__isRendered=!0}function Nrt(e,t,r){var n=t.getDisplayables(),i=t.getTemporalDisplayables();e.save();var o={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:r.viewWidth,viewHeight:r.viewHeight,inHover:r.inHover},a,s;for(a=t.getCursor(),s=n.length;a<s;a++){var l=n[a];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),Ml(e,l,o,a===s-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),o.prevEl=l}for(var u=0,c=i.length;u<c;u++){var l=i[u];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),Ml(e,l,o,u===c-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),o.prevEl=l}t.clearTemporalDisplayables(),t.notClear=!0,e.restore()}var u2=new vrt,K4=new E0(100),J4=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function Bm(e,t){if(e==="none")return null;var r=t.getDevicePixelRatio(),n=t.getZr(),i=n.painter.type==="svg";e.dirty&&u2.delete(e);var o=u2.get(e);if(o)return o;var a=te(e,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});a.backgroundColor==="none"&&(a.backgroundColor=null);var s={repeat:"repeat"};return l(s),s.rotation=a.rotation,s.scaleX=s.scaleY=i?1:1/r,u2.set(e,s),e.dirty=!1,s;function l(u){for(var c=[r],f=!0,h=0;h<J4.length;++h){var d=a[J4[h]];if(d!=null&&!ut(d)&&!Et(d)&&!be(d)&&typeof d!="boolean"){f=!1;break}c.push(d)}var p;if(f){p=c.join(",")+(i?"-svg":"");var v=K4.get(p);v&&(i?u.svgElement=v:u.image=v)}var g=bF(a.dashArrayX),m=Frt(a.dashArrayY),y=_F(a.symbol),_=Brt(g),b=wF(m),T=!i&&ou.createCanvas(),S=i&&{tag:"g",attrs:{},key:"dcl",children:[]},P=A(),C;T&&(T.width=P.width*r,T.height=P.height*r,C=T.getContext("2d")),M(),f&&K4.put(p,T||S),u.image=T,u.svgElement=S,u.svgWidth=P.width,u.svgHeight=P.height;function A(){for(var k=1,O=0,F=_.length;O<F;++O)k=ck(k,_[O]);for(var z=1,O=0,F=y.length;O<F;++O)z=ck(z,y[O].length);k*=z;var R=b*_.length*y.length;return{width:Math.max(1,Math.min(k,a.maxTileWidth)),height:Math.max(1,Math.min(R,a.maxTileHeight))}}function M(){C&&(C.clearRect(0,0,T.width,T.height),a.backgroundColor&&(C.fillStyle=a.backgroundColor,C.fillRect(0,0,T.width,T.height)));for(var k=0,O=0;O<m.length;++O)k+=m[O];if(k<=0)return;for(var F=-b,z=0,R=0,j=0;F<P.height;){if(z%2===0){for(var Z=R/2%y.length,q=0,tt=0,Pt=0;q<P.width*2;){for(var Ot=0,O=0;O<g[j].length;++O)Ot+=g[j][O];if(Ot<=0)break;if(tt%2===0){var bt=(1-a.symbolSize)*.5,wt=q+g[j][tt]*bt,Ht=F+m[z]*bt,Y=g[j][tt]*a.symbolSize,nt=m[z]*a.symbolSize,K=Pt/2%y[Z].length;dt(wt,Ht,Y,nt,y[Z][K])}q+=g[j][tt],++Pt,++tt,tt===g[j].length&&(tt=0)}++j,j===g.length&&(j=0)}F+=m[z],++R,++z,z===m.length&&(z=0)}function dt(St,At,st,ct,B){var G=i?1:r,X=Li(B,St*G,At*G,st*G,ct*G,a.color,a.symbolKeepAspect);if(i){var J=n.painter.renderOneToVNode(X);J&&S.children.push(J)}else yF(C,X)}}}}function _F(e){if(!e||e.length===0)return[["rect"]];if(Et(e))return[[e]];for(var t=!0,r=0;r<e.length;++r)if(!Et(e[r])){t=!1;break}if(t)return _F([e]);for(var n=[],r=0;r<e.length;++r)Et(e[r])?n.push([e[r]]):n.push(e[r]);return n}function bF(e){if(!e||e.length===0)return[[0,0]];if(be(e)){var t=Math.ceil(e);return[[t,t]]}for(var r=!0,n=0;n<e.length;++n)if(!be(e[n])){r=!1;break}if(r)return bF([e]);for(var i=[],n=0;n<e.length;++n)if(be(e[n])){var t=Math.ceil(e[n]);i.push([t,t])}else{var t=Ct(e[n],function(s){return Math.ceil(s)});t.length%2===1?i.push(t.concat(t)):i.push(t)}return i}function Frt(e){if(!e||typeof e=="object"&&e.length===0)return[0,0];if(be(e)){var t=Math.ceil(e);return[t,t]}var r=Ct(e,function(n){return Math.ceil(n)});return e.length%2?r.concat(r):r}function Brt(e){return Ct(e,function(t){return wF(t)})}function wF(e){for(var t=0,r=0;r<e.length;++r)t+=e[r];return e.length%2===1?t*2:t}function $rt(e,t){e.eachRawSeries(function(r){if(!e.isSeriesFiltered(r)){var n=r.getData();n.hasItemVisual()&&n.each(function(a){var s=n.getItemVisual(a,"decal");if(s){var l=n.ensureUniqueItemVisual(a,"style");l.decal=Bm(s,t)}});var i=n.getVisual("decal");if(i){var o=n.getVisual("style");o.decal=Bm(i,t)}}})}var zrt=new Di;const hi=zrt;var SF={};function Vrt(e,t){SF[e]=t}function Urt(e){return SF[e]}var Grt=typeof window<"u",jrt=1,Wrt=800,Hrt=900,Xrt=1e3,Yrt=2e3,qrt=5e3,TF=1e3,Zrt=1100,hE=2e3,PF=3e3,Krt=4e3,sy=4500,Jrt=4600,Qrt=5e3,tnt=6e3,EF=7e3,ent={PROCESSOR:{FILTER:Xrt,SERIES_FILTER:Wrt,STATISTIC:qrt},VISUAL:{LAYOUT:TF,PROGRESSIVE_LAYOUT:Zrt,GLOBAL:hE,CHART:PF,POST_CHART_LAYOUT:Jrt,COMPONENT:Krt,BRUSH:Qrt,CHART_ITEM:sy,ARIA:tnt,DECAL:EF}},Ar="__flagInMainProcess",Qr="__pendingUpdate",c2="__needsUpdateStatus",Q4=/^[a-zA-Z0-9_]+$/,f2="__connectUpdateStatus",t6=0,rnt=1,nnt=2;function AF(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(this.isDisposed()){this.id;return}return MF(this,e,t)}}function CF(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return MF(this,e,t)}}function MF(e,t,r){return r[0]=r[0]&&r[0].toLowerCase(),Di.prototype[t].apply(e,r)}var kF=function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Di),xF=kF.prototype;xF.on=CF("on");xF.off=CF("off");var Bu,h2,Gp,La,d2,p2,v2,nh,ih,e6,r6,g2,n6,jp,i6,LF,Ln,o6,IF=function(e){mt(t,e);function t(r,n,i){var o=e.call(this,new srt)||this;o._chartsViews=[],o._chartsMap={},o._componentsViews=[],o._componentsMap={},o._pendingActions=[],i=i||{},Et(n)&&(n=OF[n]),o._dom=r;var a="canvas",s="auto",l=!1,u=o._zr=sk(r,{renderer:i.renderer||a,devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height,ssr:i.ssr,useDirtyRect:qt(i.useDirtyRect,l),useCoarsePointer:qt(i.useCoarsePointer,s),pointerSize:i.pointerSize});o._ssr=i.ssr,o._throttledZrFlush=oy(Vt(u.flush,u),17),n=zt(n),n&&FN(n,!0),o._theme=n,o._locale=ott(i.locale||pN),o._coordSysMgr=new nE;var c=o._api=i6(o);function f(h,d){return h.__prio-d.__prio}return xg(zm,f),xg(i3,f),o._scheduler=new fF(o,c,i3,zm),o._messageCenter=new kF,o._initEvents(),o.resize=Vt(o.resize,o),u.animation.on("frame",o._onframe,o),e6(u,o),r6(u,o),_m(o),o}return t.prototype._onframe=function(){if(!this._disposed){o6(this);var r=this._scheduler;if(this[Qr]){var n=this[Qr].silent;this[Ar]=!0;try{Bu(this),La.update.call(this,null,this[Qr].updateParams)}catch(l){throw this[Ar]=!1,this[Qr]=null,l}this._zr.flush(),this[Ar]=!1,this[Qr]=null,nh.call(this,n),ih.call(this,n)}else if(r.unfinished){var i=jrt,o=this._model,a=this._api;r.unfinished=!1;do{var s=+new Date;r.performSeriesTasks(o),r.performDataProcessorTasks(o),p2(this,o),r.performVisualTasks(o),jp(this,this._model,a,"remain",{}),i-=+new Date-s}while(i>0&&r.unfinished);r.unfinished||this._zr.flush()}}},t.prototype.getDom=function(){return this._dom},t.prototype.getId=function(){return this.id},t.prototype.getZr=function(){return this._zr},t.prototype.isSSR=function(){return this._ssr},t.prototype.setOption=function(r,n,i){if(!this[Ar]){if(this._disposed){this.id;return}var o,a,s;if(It(n)&&(i=n.lazyUpdate,o=n.silent,a=n.replaceMerge,s=n.transition,n=n.notMerge),this[Ar]=!0,!this._model||n){var l=new ztt(this._api),u=this._theme,c=this._model=new RN;c.scheduler=this._scheduler,c.ssr=this._ssr,c.init(null,null,null,u,this._locale,l)}this._model.setOption(r,{replaceMerge:a},o3);var f={seriesTransition:s,optionChanged:!0};if(i)this[Qr]={silent:o,updateParams:f},this[Ar]=!1,this.getZr().wakeUp();else{try{Bu(this),La.update.call(this,null,f)}catch(h){throw this[Qr]=null,this[Ar]=!1,h}this._ssr||this._zr.flush(),this[Qr]=null,this[Ar]=!1,nh.call(this,o),ih.call(this,o)}}},t.prototype.setTheme=function(){},t.prototype.getModel=function(){return this._model},t.prototype.getOption=function(){return this._model&&this._model.getOption()},t.prototype.getWidth=function(){return this._zr.getWidth()},t.prototype.getHeight=function(){return this._zr.getHeight()},t.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||Grt&&window.devicePixelRatio||1},t.prototype.getRenderedCanvas=function(r){return this.renderToCanvas(r)},t.prototype.renderToCanvas=function(r){r=r||{};var n=this._zr.painter;return n.getRenderedCanvas({backgroundColor:r.backgroundColor||this._model.get("backgroundColor"),pixelRatio:r.pixelRatio||this.getDevicePixelRatio()})},t.prototype.renderToSVGString=function(r){r=r||{};var n=this._zr.painter;return n.renderToString({useViewBox:r.useViewBox})},t.prototype.getSvgDataURL=function(){if(!!Xt.svgSupported){var r=this._zr,n=r.storage.getDisplayList();return N(n,function(i){i.stopAnimation(null,!0)}),r.painter.toDataURL()}},t.prototype.getDataURL=function(r){if(this._disposed){this.id;return}r=r||{};var n=r.excludeComponents,i=this._model,o=[],a=this;N(n,function(l){i.eachComponent({mainType:l},function(u){var c=a._componentsMap[u.__viewId];c.group.ignore||(o.push(c),c.group.ignore=!0)})});var s=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(r).toDataURL("image/"+(r&&r.type||"png"));return N(o,function(l){l.group.ignore=!1}),s},t.prototype.getConnectedDataURL=function(r){if(this._disposed){this.id;return}var n=r.type==="svg",i=this.group,o=Math.min,a=Math.max,s=1/0;if(a6[i]){var l=s,u=s,c=-s,f=-s,h=[],d=r&&r.pixelRatio||this.getDevicePixelRatio();N(Sd,function(_,b){if(_.group===i){var T=n?_.getZr().painter.getSvgDom().innerHTML:_.renderToCanvas(zt(r)),S=_.getDom().getBoundingClientRect();l=o(S.left,l),u=o(S.top,u),c=a(S.right,c),f=a(S.bottom,f),h.push({dom:T,left:S.left,top:S.top})}}),l*=d,u*=d,c*=d,f*=d;var p=c-l,v=f-u,g=ou.createCanvas(),m=sk(g,{renderer:n?"svg":"canvas"});if(m.resize({width:p,height:v}),n){var y="";return N(h,function(_){var b=_.left-l,T=_.top-u;y+='<g transform="translate('+b+","+T+')">'+_.dom+"</g>"}),m.painter.getSvgRoot().innerHTML=y,r.connectedBackgroundColor&&m.painter.setBackgroundColor(r.connectedBackgroundColor),m.refreshImmediately(),m.painter.toDataURL()}else return r.connectedBackgroundColor&&m.add(new Ke({shape:{x:0,y:0,width:p,height:v},style:{fill:r.connectedBackgroundColor}})),N(h,function(_){var b=new ma({style:{x:_.left*d-l,y:_.top*d-u,image:_.dom}});m.add(b)}),m.refreshImmediately(),g.toDataURL("image/"+(r&&r.type||"png"))}else return this.getDataURL(r)},t.prototype.convertToPixel=function(r,n){return d2(this,"convertToPixel",r,n)},t.prototype.convertFromPixel=function(r,n){return d2(this,"convertFromPixel",r,n)},t.prototype.containPixel=function(r,n){if(this._disposed){this.id;return}var i=this._model,o,a=N_(i,r);return N(a,function(s,l){l.indexOf("Models")>=0&&N(s,function(u){var c=u.coordinateSystem;if(c&&c.containPoint)o=o||!!c.containPoint(n);else if(l==="seriesModels"){var f=this._chartsMap[u.__viewId];f&&f.containPoint&&(o=o||f.containPoint(n,u))}},this)},this),!!o},t.prototype.getVisual=function(r,n){var i=this._model,o=N_(i,r,{defaultMainType:"series"}),a=o.seriesModel,s=a.getData(),l=o.hasOwnProperty("dataIndexInside")?o.dataIndexInside:o.hasOwnProperty("dataIndex")?s.indexOfRawIndex(o.dataIndex):null;return l!=null?dF(s,l,n):ay(s,n)},t.prototype.getViewOfComponentModel=function(r){return this._componentsMap[r.__viewId]},t.prototype.getViewOfSeriesModel=function(r){return this._chartsMap[r.__viewId]},t.prototype._initEvents=function(){var r=this;N(int,function(n){var i=function(o){var a=r.getModel(),s=o.target,l,u=n==="globalout";if(u?l={}:s&&gc(s,function(p){var v=ie(p);if(v&&v.dataIndex!=null){var g=v.dataModel||a.getSeriesByIndex(v.seriesIndex);return l=g&&g.getDataParams(v.dataIndex,v.dataType)||{},!0}else if(v.eventData)return l=ot({},v.eventData),!0},!0),l){var c=l.componentType,f=l.componentIndex;(c==="markLine"||c==="markPoint"||c==="markArea")&&(c="series",f=l.seriesIndex);var h=c&&f!=null&&a.getComponent(c,f),d=h&&r[h.mainType==="series"?"_chartsMap":"_componentsMap"][h.__viewId];l.event=o,l.type=n,r._$eventProcessor.eventInfo={targetEl:s,packedEvent:l,model:h,view:d},r.trigger(n,l)}};i.zrEventfulCallAtLast=!0,r._zr.on(n,i,r)}),N(wd,function(n,i){r._messageCenter.on(i,function(o){this.trigger(i,o)},r)}),N(["selectchanged"],function(n){r._messageCenter.on(n,function(i){this.trigger(n,i)},r)}),frt(this._messageCenter,this,this._api)},t.prototype.isDisposed=function(){return this._disposed},t.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},t.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var r=this.getDom();r&&v9(this.getDom(),pE,"");var n=this,i=n._api,o=n._model;N(n._componentsViews,function(a){a.dispose(o,i)}),N(n._chartsViews,function(a){a.dispose(o,i)}),n._zr.dispose(),n._dom=n._model=n._chartsMap=n._componentsMap=n._chartsViews=n._componentsViews=n._scheduler=n._api=n._zr=n._throttledZrFlush=n._theme=n._coordSysMgr=n._messageCenter=null,delete Sd[n.id]},t.prototype.resize=function(r){if(!this[Ar]){if(this._disposed){this.id;return}this._zr.resize(r);var n=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!n){var i=n.resetOption("media"),o=r&&r.silent;this[Qr]&&(o==null&&(o=this[Qr].silent),i=!0,this[Qr]=null),this[Ar]=!0;try{i&&Bu(this),La.update.call(this,{type:"resize",animation:ot({duration:0},r&&r.animation)})}catch(a){throw this[Ar]=!1,a}this[Ar]=!1,nh.call(this,o),ih.call(this,o)}}},t.prototype.showLoading=function(r,n){if(this._disposed){this.id;return}if(It(r)&&(n=r,r=""),r=r||"default",this.hideLoading(),!!a3[r]){var i=a3[r](this._api,n),o=this._zr;this._loadingFX=i,o.add(i)}},t.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},t.prototype.makeActionFromEvent=function(r){var n=ot({},r);return n.type=wd[r.type],n},t.prototype.dispatchAction=function(r,n){if(this._disposed){this.id;return}if(It(n)||(n={silent:!!n}),!!$m[r.type]&&!!this._model){if(this[Ar]){this._pendingActions.push(r);return}var i=n.silent;v2.call(this,r,i);var o=n.flush;o?this._zr.flush():o!==!1&&Xt.browser.weChat&&this._throttledZrFlush(),nh.call(this,i),ih.call(this,i)}},t.prototype.updateLabelLayout=function(){hi.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},t.prototype.appendData=function(r){if(this._disposed){this.id;return}var n=r.seriesIndex,i=this.getModel(),o=i.getSeriesByIndex(n);o.appendData(r),this._scheduler.unfinished=!0,this.getZr().wakeUp()},t.internalField=function(){Bu=function(f){var h=f._scheduler;h.restorePipelines(f._model),h.prepareStageTasks(),h2(f,!0),h2(f,!1),h.plan()},h2=function(f,h){for(var d=f._model,p=f._scheduler,v=h?f._componentsViews:f._chartsViews,g=h?f._componentsMap:f._chartsMap,m=f._zr,y=f._api,_=0;_<v.length;_++)v[_].__alive=!1;h?d.eachComponent(function(S,P){S!=="series"&&b(P)}):d.eachSeries(b);function b(S){var P=S.__requireNewView;S.__requireNewView=!1;var C="_ec_"+S.id+"_"+S.type,A=!P&&g[C];if(!A){var M=go(S.type),k=h?Qn.getClass(M.main,M.sub):Yn.getClass(M.sub);A=new k,A.init(d,y),g[C]=A,v.push(A),m.add(A.group)}S.__viewId=A.__id=C,A.__alive=!0,A.__model=S,A.group.__ecComponentInfo={mainType:S.mainType,index:S.componentIndex},!h&&p.prepareView(A,S,d,y)}for(var _=0;_<v.length;){var T=v[_];T.__alive?_++:(!h&&T.renderTask.dispose(),m.remove(T.group),T.dispose(d,y),v.splice(_,1),g[T.__id]===T&&delete g[T.__id],T.__id=T.group.__ecComponentInfo=null)}},Gp=function(f,h,d,p,v){var g=f._model;if(g.setUpdatePayload(d),!p){N([].concat(f._componentsViews).concat(f._chartsViews),T);return}var m={};m[p+"Id"]=d[p+"Id"],m[p+"Index"]=d[p+"Index"],m[p+"Name"]=d[p+"Name"];var y={mainType:p,query:m};v&&(y.subType=v);var _=d.excludeSeriesId,b;_!=null&&(b=jt(),N(Ze(_),function(S){var P=Xn(S,null);P!=null&&b.set(P,!0)})),g&&g.eachComponent(y,function(S){var P=b&&b.get(S.id)!==null;if(!P)if($k(d))if(S instanceof To)d.type===Nl&&!d.notBlur&&!S.get(["emphasis","disabled"])&&zJ(S,d,f._api);else{var C=VP(S.mainType,S.componentIndex,d.name,f._api),A=C.focusSelf,M=C.dispatchers;d.type===Nl&&A&&!d.notBlur&&zS(S.mainType,S.componentIndex,f._api),M&&N(M,function(k){d.type===Nl?Wd(k):Hd(k)})}else GS(d)&&S instanceof To&&(GJ(S,d,f._api),Fk(S),Ln(f))},f),g&&g.eachComponent(y,function(S){var P=b&&b.get(S.id)!==null;P||T(f[p==="series"?"_chartsMap":"_componentsMap"][S.__viewId])},f);function T(S){S&&S.__alive&&S[h]&&S[h](S.__model,g,f._api,d)}},La={prepareAndUpdate:function(f){Bu(this),La.update.call(this,f,{optionChanged:f.newOption!=null})},update:function(f,h){var d=this._model,p=this._api,v=this._zr,g=this._coordSysMgr,m=this._scheduler;if(!!d){d.setUpdatePayload(f),m.restoreData(d,f),m.performSeriesTasks(d),g.create(d,p),m.performDataProcessorTasks(d,f),p2(this,d),g.update(d,p),r(d),m.performVisualTasks(d,f),g2(this,d,p,f,h);var y=d.get("backgroundColor")||"transparent",_=d.get("darkMode");v.setBackgroundColor(y),_!=null&&_!=="auto"&&v.setDarkMode(_),hi.trigger("afterupdate",d,p)}},updateTransform:function(f){var h=this,d=this._model,p=this._api;if(!!d){d.setUpdatePayload(f);var v=[];d.eachComponent(function(m,y){if(m!=="series"){var _=h.getViewOfComponentModel(y);if(_&&_.__alive)if(_.updateTransform){var b=_.updateTransform(y,d,p,f);b&&b.update&&v.push(_)}else v.push(_)}});var g=jt();d.eachSeries(function(m){var y=h._chartsMap[m.__viewId];if(y.updateTransform){var _=y.updateTransform(m,d,p,f);_&&_.update&&g.set(m.uid,1)}else g.set(m.uid,1)}),r(d),this._scheduler.performVisualTasks(d,f,{setDirty:!0,dirtyMap:g}),jp(this,d,p,f,{},g),hi.trigger("afterupdate",d,p)}},updateView:function(f){var h=this._model;!h||(h.setUpdatePayload(f),Yn.markUpdateMethod(f,"updateView"),r(h),this._scheduler.performVisualTasks(h,f,{setDirty:!0}),g2(this,h,this._api,f,{}),hi.trigger("afterupdate",h,this._api))},updateVisual:function(f){var h=this,d=this._model;!d||(d.setUpdatePayload(f),d.eachSeries(function(p){p.getData().clearAllVisual()}),Yn.markUpdateMethod(f,"updateVisual"),r(d),this._scheduler.performVisualTasks(d,f,{visualType:"visual",setDirty:!0}),d.eachComponent(function(p,v){if(p!=="series"){var g=h.getViewOfComponentModel(v);g&&g.__alive&&g.updateVisual(v,d,h._api,f)}}),d.eachSeries(function(p){var v=h._chartsMap[p.__viewId];v.updateVisual(p,d,h._api,f)}),hi.trigger("afterupdate",d,this._api))},updateLayout:function(f){La.update.call(this,f)}},d2=function(f,h,d,p){if(f._disposed){f.id;return}for(var v=f._model,g=f._coordSysMgr.getCoordinateSystems(),m,y=N_(v,d),_=0;_<g.length;_++){var b=g[_];if(b[h]&&(m=b[h](v,y,p))!=null)return m}},p2=function(f,h){var d=f._chartsMap,p=f._scheduler;h.eachSeries(function(v){p.updateStreamModes(v,d[v.__viewId])})},v2=function(f,h){var d=this,p=this.getModel(),v=f.type,g=f.escapeConnect,m=$m[v],y=m.actionInfo,_=(y.update||"update").split(":"),b=_.pop(),T=_[0]!=null&&go(_[0]);this[Ar]=!0;var S=[f],P=!1;f.batch&&(P=!0,S=Ct(f.batch,function(z){return z=te(ot({},z),f),z.batch=null,z}));var C=[],A,M=GS(f),k=$k(f);if(k&&B9(this._api),N(S,function(z){if(A=m.action(z,d._model,d._api),A=A||ot({},z),A.type=y.event||A.type,C.push(A),k){var R=RP(f),j=R.queryOptionMap,Z=R.mainTypeSpecified,q=Z?j.keys()[0]:"series";Gp(d,b,z,q),Ln(d)}else M?(Gp(d,b,z,"series"),Ln(d)):T&&Gp(d,b,z,T.main,T.sub)}),b!=="none"&&!k&&!M&&!T)try{this[Qr]?(Bu(this),La.update.call(this,f),this[Qr]=null):La[b].call(this,f)}catch(z){throw this[Ar]=!1,z}if(P?A={type:y.event||v,escapeConnect:g,batch:C}:A=C[0],this[Ar]=!1,!h){var O=this._messageCenter;if(O.trigger(A.type,A),M){var F={type:"selectchanged",escapeConnect:g,selected:jJ(p),isFromClick:f.isFromClick||!1,fromAction:f.type,fromActionPayload:f};O.trigger(F.type,F)}}},nh=function(f){for(var h=this._pendingActions;h.length;){var d=h.shift();v2.call(this,d,f)}},ih=function(f){!f&&this.trigger("updated")},e6=function(f,h){f.on("rendered",function(d){h.trigger("rendered",d),f.animation.isFinished()&&!h[Qr]&&!h._scheduler.unfinished&&!h._pendingActions.length&&h.trigger("finished")})},r6=function(f,h){f.on("mouseover",function(d){var p=d.target,v=gc(p,US);v&&(VJ(v,d,h._api),Ln(h))}).on("mouseout",function(d){var p=d.target,v=gc(p,US);v&&(UJ(v,d,h._api),Ln(h))}).on("click",function(d){var p=d.target,v=gc(p,function(y){return ie(y).dataIndex!=null},!0);if(v){var g=v.selected?"unselect":"select",m=ie(v);h._api.dispatchAction({type:g,dataType:m.dataType,dataIndexInside:m.dataIndex,seriesIndex:m.seriesIndex,isFromClick:!0})}})};function r(f){f.clearColorPalette(),f.eachSeries(function(h){h.clearColorPalette()})}function n(f){var h=[],d=[],p=!1;if(f.eachComponent(function(y,_){var b=_.get("zlevel")||0,T=_.get("z")||0,S=_.getZLevelKey();p=p||!!S,(y==="series"?d:h).push({zlevel:b,z:T,idx:_.componentIndex,type:y,key:S})}),p){var v=h.concat(d),g,m;xg(v,function(y,_){return y.zlevel===_.zlevel?y.z-_.z:y.zlevel-_.zlevel}),N(v,function(y){var _=f.getComponent(y.type,y.idx),b=y.zlevel,T=y.key;g!=null&&(b=Math.max(g,b)),T?(b===g&&T!==m&&b++,m=T):m&&(b===g&&b++,m=""),g=b,_.setZLevel(b)})}}g2=function(f,h,d,p,v){n(h),n6(f,h,d,p,v),N(f._chartsViews,function(g){g.__alive=!1}),jp(f,h,d,p,v),N(f._chartsViews,function(g){g.__alive||g.remove(h,d)})},n6=function(f,h,d,p,v,g){N(g||f._componentsViews,function(m){var y=m.__model;u(y,m),m.render(y,h,d,p),s(y,m),c(y,m)})},jp=function(f,h,d,p,v,g){var m=f._scheduler;v=ot(v||{},{updatedSeries:h.getSeries()}),hi.trigger("series:beforeupdate",h,d,v);var y=!1;h.eachSeries(function(_){var b=f._chartsMap[_.__viewId];b.__alive=!0;var T=b.renderTask;m.updatePayload(T,p),u(_,b),g&&g.get(_.uid)&&T.dirty(),T.perform(m.getPerformArgs(T))&&(y=!0),b.group.silent=!!_.get("silent"),a(_,b),Fk(_)}),m.unfinished=y||m.unfinished,hi.trigger("series:layoutlabels",h,d,v),hi.trigger("series:transition",h,d,v),h.eachSeries(function(_){var b=f._chartsMap[_.__viewId];s(_,b),c(_,b)}),o(f,h),hi.trigger("series:afterupdate",h,d,v)},Ln=function(f){f[c2]=!0,f.getZr().wakeUp()},o6=function(f){!f[c2]||(f.getZr().storage.traverse(function(h){yd(h)||i(h)}),f[c2]=!1)};function i(f){for(var h=[],d=f.currentStates,p=0;p<d.length;p++){var v=d[p];v==="emphasis"||v==="blur"||v==="select"||h.push(v)}f.selected&&f.states.select&&h.push("select"),f.hoverState===U1&&f.states.emphasis?h.push("emphasis"):f.hoverState===M0&&f.states.blur&&h.push("blur"),f.useStates(h)}function o(f,h){var d=f._zr,p=d.storage,v=0;p.traverse(function(g){g.isGroup||v++}),v>h.get("hoverLayerThreshold")&&!Xt.node&&!Xt.worker&&h.eachSeries(function(g){if(!g.preventUsingHoverLayer){var m=f._chartsMap[g.__viewId];m.__alive&&m.eachRendered(function(y){y.states.emphasis&&(y.states.emphasis.hoverLayer=!0)})}})}function a(f,h){var d=f.get("blendMode")||null;h.eachRendered(function(p){p.isGroup||(p.style.blend=d)})}function s(f,h){if(!f.preventAutoZ){var d=f.get("z")||0,p=f.get("zlevel")||0;h.eachRendered(function(v){return l(v,d,p,-1/0),!0})}}function l(f,h,d,p){var v=f.getTextContent(),g=f.getTextGuideLine(),m=f.isGroup;if(m)for(var y=f.childrenRef(),_=0;_<y.length;_++)p=Math.max(l(y[_],h,d,p),p);else f.z=h,f.zlevel=d,p=Math.max(f.z2,p);if(v&&(v.z=h,v.zlevel=d,isFinite(p)&&(v.z2=p+2)),g){var b=f.textGuideLineConfig;g.z=h,g.zlevel=d,isFinite(p)&&(g.z2=p+(b&&b.showAbove?1:-1))}return p}function u(f,h){h.eachRendered(function(d){if(!yd(d)){var p=d.getTextContent(),v=d.getTextGuideLine();d.stateTransition&&(d.stateTransition=null),p&&p.stateTransition&&(p.stateTransition=null),v&&v.stateTransition&&(v.stateTransition=null),d.hasState()?(d.prevStates=d.currentStates,d.clearStates()):d.prevStates&&(d.prevStates=null)}})}function c(f,h){var d=f.getModel("stateAnimation"),p=f.isAnimationEnabled(),v=d.get("duration"),g=v>0?{duration:v,delay:d.get("delay"),easing:d.get("easing")}:null;h.eachRendered(function(m){if(m.states&&m.states.emphasis){if(yd(m))return;if(m instanceof he&&qJ(m),m.__dirty){var y=m.prevStates;y&&m.useStates(y)}if(p){m.stateTransition=g;var _=m.getTextContent(),b=m.getTextGuideLine();_&&(_.stateTransition=g),b&&(b.stateTransition=g)}m.__dirty&&i(m)}})}i6=function(f){return new(function(h){mt(d,h);function d(){return h!==null&&h.apply(this,arguments)||this}return d.prototype.getCoordinateSystems=function(){return f._coordSysMgr.getCoordinateSystems()},d.prototype.getComponentByElement=function(p){for(;p;){var v=p.__ecComponentInfo;if(v!=null)return f._model.getComponent(v.mainType,v.index);p=p.parent}},d.prototype.enterEmphasis=function(p,v){Wd(p,v),Ln(f)},d.prototype.leaveEmphasis=function(p,v){Hd(p,v),Ln(f)},d.prototype.enterBlur=function(p){R9(p),Ln(f)},d.prototype.leaveBlur=function(p){zP(p),Ln(f)},d.prototype.enterSelect=function(p){D9(p),Ln(f)},d.prototype.leaveSelect=function(p){N9(p),Ln(f)},d.prototype.getModel=function(){return f.getModel()},d.prototype.getViewOfComponentModel=function(p){return f.getViewOfComponentModel(p)},d.prototype.getViewOfSeriesModel=function(p){return f.getViewOfSeriesModel(p)},d}(DN))(f)},LF=function(f){function h(d,p){for(var v=0;v<d.length;v++){var g=d[v];g[f2]=p}}N(wd,function(d,p){f._messageCenter.on(p,function(v){if(a6[f.group]&&f[f2]!==t6){if(v&&v.escapeConnect)return;var g=f.makeActionFromEvent(v),m=[];N(Sd,function(y){y!==f&&y.group===f.group&&m.push(y)}),h(m,t6),N(m,function(y){y[f2]!==rnt&&y.dispatchAction(g)}),h(m,nnt)}})})}}(),t}(Di),dE=IF.prototype;dE.on=AF("on");dE.off=AF("off");dE.one=function(e,t,r){var n=this;function i(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];t&&t.apply&&t.apply(this,o),n.off(e,i)}this.on.call(this,e,i,r)};var int=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var $m={},wd={},i3=[],o3=[],zm=[],OF={},a3={},Sd={},a6={},ont=+new Date-0,pE="_echarts_instance_";function ant(e,t,r){var n=!(r&&r.ssr);if(n){var i=snt(e);if(i)return i}var o=new IF(e,t,r);return o.id="ec_"+ont++,Sd[o.id]=o,n&&v9(e,pE,o.id),LF(o),hi.trigger("afterinit",o),o}function snt(e){return Sd[AK(e,pE)]}function RF(e,t){OF[e]=t}function DF(e){ce(o3,e)<0&&o3.push(e)}function NF(e,t){gE(i3,e,t,Yrt)}function lnt(e){vE("afterinit",e)}function unt(e){vE("afterupdate",e)}function vE(e,t){hi.on(e,t)}function cu(e,t,r){Ut(t)&&(r=t,t="");var n=It(e)?e.type:[e,e={event:t}][0];e.event=(e.event||n).toLowerCase(),t=e.event,!wd[t]&&(xi(Q4.test(n)&&Q4.test(t)),$m[n]||($m[n]={action:r,actionInfo:e}),wd[t]=n)}function cnt(e,t){nE.register(e,t)}function fnt(e,t){gE(zm,e,t,TF,"layout")}function fu(e,t){gE(zm,e,t,PF,"visual")}var s6=[];function gE(e,t,r,n,i){if((Ut(t)||It(t))&&(r=t,t=n),!(ce(s6,r)>=0)){s6.push(r);var o=fF.wrapStageHandler(r,i);o.__prio=t,o.__raw=r,e.push(o)}}function FF(e,t){a3[e]=t}function hnt(e,t,r){var n=Urt("registerMap");n&&n(e,t,r)}var dnt=vet;fu(hE,Wet);fu(sy,Het);fu(sy,Xet);fu(hE,lrt);fu(sy,urt);fu(EF,$rt);DF(FN);NF(Hrt,Ytt);FF("default",Yet);cu({type:Nl,event:Nl,update:Nl},Dr);cu({type:Ng,event:Ng,update:Ng},Dr);cu({type:vd,event:vd,update:vd},Dr);cu({type:Fg,event:Fg,update:Fg},Dr);cu({type:gd,event:gd,update:gd},Dr);RF("light",ort);RF("dark",art);function oh(e){return e==null?0:e.length||1}function l6(e){return e}var pnt=function(){function e(t,r,n,i,o,a){this._old=t,this._new=r,this._oldKeyGetter=n||l6,this._newKeyGetter=i||l6,this.context=o,this._diffModeMultiple=a==="multiple"}return e.prototype.add=function(t){return this._add=t,this},e.prototype.update=function(t){return this._update=t,this},e.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},e.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},e.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},e.prototype.remove=function(t){return this._remove=t,this},e.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},e.prototype._executeOneToOne=function(){var t=this._old,r=this._new,n={},i=new Array(t.length),o=new Array(r.length);this._initIndexMap(t,null,i,"_oldKeyGetter"),this._initIndexMap(r,n,o,"_newKeyGetter");for(var a=0;a<t.length;a++){var s=i[a],l=n[s],u=oh(l);if(u>1){var c=l.shift();l.length===1&&(n[s]=l[0]),this._update&&this._update(c,a)}else u===1?(n[s]=null,this._update&&this._update(l,a)):this._remove&&this._remove(a)}this._performRestAdd(o,n)},e.prototype._executeMultiple=function(){var t=this._old,r=this._new,n={},i={},o=[],a=[];this._initIndexMap(t,n,o,"_oldKeyGetter"),this._initIndexMap(r,i,a,"_newKeyGetter");for(var s=0;s<o.length;s++){var l=o[s],u=n[l],c=i[l],f=oh(u),h=oh(c);if(f>1&&h===1)this._updateManyToOne&&this._updateManyToOne(c,u),i[l]=null;else if(f===1&&h>1)this._updateOneToMany&&this._updateOneToMany(c,u),i[l]=null;else if(f===1&&h===1)this._update&&this._update(c,u),i[l]=null;else if(f>1&&h>1)this._updateManyToMany&&this._updateManyToMany(c,u),i[l]=null;else if(f>1)for(var d=0;d<f;d++)this._remove&&this._remove(u[d]);else this._remove&&this._remove(u)}this._performRestAdd(a,i)},e.prototype._performRestAdd=function(t,r){for(var n=0;n<t.length;n++){var i=t[n],o=r[i],a=oh(o);if(a>1)for(var s=0;s<a;s++)this._add&&this._add(o[s]);else a===1&&this._add&&this._add(o);r[i]=null}},e.prototype._initIndexMap=function(t,r,n,i){for(var o=this._diffModeMultiple,a=0;a<t.length;a++){var s="_ec_"+this[i](t[a],a);if(o||(n[a]=s),!!r){var l=r[s],u=oh(l);u===0?(r[s]=a,o&&n.push(s)):u===1?r[s]=[l,a]:l.push(a)}}},e}();const BF=pnt;var vnt=function(){function e(t,r){this._encode=t,this._schema=r}return e.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},e.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},e}();function gnt(e,t){var r={},n=r.encode={},i=jt(),o=[],a=[],s={};N(e.dimensions,function(h){var d=e.getDimensionInfo(h),p=d.coordDim;if(p){var v=d.coordDimIndex;m2(n,p)[v]=h,d.isExtraCoord||(i.set(p,1),ynt(d.type)&&(o[0]=h),m2(s,p)[v]=e.getDimensionIndex(d.name)),d.defaultTooltip&&a.push(h)}MN.each(function(g,m){var y=m2(n,m),_=d.otherDims[m];_!=null&&_!==!1&&(y[_]=d.name)})});var l=[],u={};i.each(function(h,d){var p=n[d];u[d]=p[0],l=l.concat(p)}),r.dataDimsOnCoord=l,r.dataDimIndicesOnCoord=Ct(l,function(h){return e.getDimensionInfo(h).storeDimIndex}),r.encodeFirstDimNotExtra=u;var c=n.label;c&&c.length&&(o=c.slice());var f=n.tooltip;return f&&f.length?a=f.slice():a.length||(a=o.slice()),n.defaultedLabel=o,n.defaultedTooltip=a,r.userOutput=new vnt(s,t),r}function m2(e,t){return e.hasOwnProperty(t)||(e[t]=[]),e[t]}function mnt(e){return e==="category"?"ordinal":e==="time"?"time":"float"}function ynt(e){return!(e==="ordinal"||e==="time")}var _nt=function(){function e(t){this.otherDims={},t!=null&&ot(this,t)}return e}();const Vg=_nt;var bnt=Oe(),wnt={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},$F=function(){function e(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return e.prototype.isDimensionOmitted=function(){return this._dimOmitted},e.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=UF(this.source)))},e.prototype.getSourceDimensionIndex=function(t){return qt(this._dimNameMap.get(t),-1)},e.prototype.getSourceDimension=function(t){var r=this.source.dimensionsDefine;if(r)return r[t]},e.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,r=$N(this.source),n=!GF(t),i="",o=[],a=0,s=0;a<t;a++){var l=void 0,u=void 0,c=void 0,f=this.dimensions[s];if(f&&f.storeDimIndex===a)l=r?f.name:null,u=f.type,c=f.ordinalMeta,s++;else{var h=this.getSourceDimension(a);h&&(l=r?h.name:null,u=h.type)}o.push({property:l,type:u,ordinalMeta:c}),r&&l!=null&&(!f||!f.isCalculationCoord)&&(i+=n?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),i+="$",i+=wnt[u]||"f",c&&(i+=c.uid),i+="$"}var d=this.source,p=[d.seriesLayoutBy,d.startIndex,i].join("$$");return{dimensions:o,hash:p}},e.prototype.makeOutputDimensionNames=function(){for(var t=[],r=0,n=0;r<this._fullDimCount;r++){var i=void 0,o=this.dimensions[n];if(o&&o.storeDimIndex===r)o.isCalculationCoord||(i=o.name),n++;else{var a=this.getSourceDimension(r);a&&(i=a.name)}t.push(i)}return t},e.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},e}();function zF(e){return e instanceof $F}function VF(e){for(var t=jt(),r=0;r<(e||[]).length;r++){var n=e[r],i=It(n)?n.name:n;i!=null&&t.get(i)==null&&t.set(i,r)}return t}function UF(e){var t=bnt(e);return t.dimNameMap||(t.dimNameMap=VF(e.dimensionsDefine))}function GF(e){return e>30}var ah=It,Ia=Ct,Snt=typeof Int32Array>"u"?Array:Int32Array,Tnt="e\0\0",u6=-1,Pnt=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],Ent=["_approximateExtent"],c6,Wp,sh,lh,y2,Hp,_2,Ant=function(){function e(t,r){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var n,i=!1;zF(t)?(n=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(i=!0,n=t),n=n||["x","y"];for(var o={},a=[],s={},l=!1,u={},c=0;c<n.length;c++){var f=n[c],h=Et(f)?new Vg({name:f}):f instanceof Vg?f:new Vg(f),d=h.name;h.type=h.type||"float",h.coordDim||(h.coordDim=d,h.coordDimIndex=0);var p=h.otherDims=h.otherDims||{};a.push(d),o[d]=h,u[d]!=null&&(l=!0),h.createInvertedIndices&&(s[d]=[]),p.itemName===0&&(this._nameDimIdx=c),p.itemId===0&&(this._idDimIdx=c),i&&(h.storeDimIndex=c)}if(this.dimensions=a,this._dimInfos=o,this._initGetDimensionInfo(l),this.hostModel=r,this._invertedIndicesMap=s,this._dimOmitted){var v=this._dimIdxToName=jt();N(a,function(g){v.set(o[g].storeDimIndex,g)})}}return e.prototype.getDimension=function(t){var r=this._recognizeDimIndex(t);if(r==null)return t;if(r=t,!this._dimOmitted)return this.dimensions[r];var n=this._dimIdxToName.get(r);if(n!=null)return n;var i=this._schema.getSourceDimension(r);if(i)return i.name},e.prototype.getDimensionIndex=function(t){var r=this._recognizeDimIndex(t);if(r!=null)return r;if(t==null)return-1;var n=this._getDimInfo(t);return n?n.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},e.prototype._recognizeDimIndex=function(t){if(be(t)||t!=null&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},e.prototype._getStoreDimIndex=function(t){var r=this.getDimensionIndex(t);return r},e.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},e.prototype._initGetDimensionInfo=function(t){var r=this._dimInfos;this._getDimInfo=t?function(n){return r.hasOwnProperty(n)?r[n]:void 0}:function(n){return r[n]}},e.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},e.prototype.mapDimension=function(t,r){var n=this._dimSummary;if(r==null)return n.encodeFirstDimNotExtra[t];var i=n.encode[t];return i?i[r]:null},e.prototype.mapDimensionsAll=function(t){var r=this._dimSummary,n=r.encode[t];return(n||[]).slice()},e.prototype.getStore=function(){return this._store},e.prototype.initData=function(t,r,n){var i=this,o;if(t instanceof qS&&(o=t),!o){var a=this.dimensions,s=iE(t)||Fr(t)?new zN(t,a.length):t;o=new qS;var l=Ia(a,function(u){return{type:i._dimInfos[u].type,property:u}});o.initData(s,l,n)}this._store=o,this._nameList=(r||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,o.count()),this._dimSummary=gnt(this,this._schema),this.userOutput=this._dimSummary.userOutput},e.prototype.appendData=function(t){var r=this._store.appendData(t);this._doInit(r[0],r[1])},e.prototype.appendValues=function(t,r){var n=this._store.appendValues(t,r.length),i=n.start,o=n.end,a=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),r)for(var s=i;s<o;s++){var l=s-i;this._nameList[s]=r[l],a&&_2(this,s)}},e.prototype._updateOrdinalMeta=function(){for(var t=this._store,r=this.dimensions,n=0;n<r.length;n++){var i=this._dimInfos[r[n]];i.ordinalMeta&&t.collectOrdinalMeta(i.storeDimIndex,i.ordinalMeta)}},e.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return this._idDimIdx==null&&t.getSource().sourceFormat!==ps&&!t.fillStorage},e.prototype._doInit=function(t,r){if(!(t>=r)){var n=this._store,i=n.getProvider();this._updateOrdinalMeta();var o=this._nameList,a=this._idList,s=i.getSource().sourceFormat,l=s===ei;if(l&&!i.pure)for(var u=[],c=t;c<r;c++){var f=i.getItem(c,u);if(!this.hasItemOption&&pK(f)&&(this.hasItemOption=!0),f){var h=f.name;o[c]==null&&h!=null&&(o[c]=Xn(h,null));var d=f.id;a[c]==null&&d!=null&&(a[c]=Xn(d,null))}}if(this._shouldMakeIdFromName())for(var c=t;c<r;c++)_2(this,c);c6(this)}},e.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.setApproximateExtent=function(t,r){r=this.getDimension(r),this._approximateExtent[r]=t.slice()},e.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},e.prototype.setCalculationInfo=function(t,r){ah(t)?ot(this._calculationInfo,t):this._calculationInfo[t]=r},e.prototype.getName=function(t){var r=this.getRawIndex(t),n=this._nameList[r];return n==null&&this._nameDimIdx!=null&&(n=sh(this,this._nameDimIdx,r)),n==null&&(n=""),n},e.prototype._getCategory=function(t,r){var n=this._store.get(t,r),i=this._store.getOrdinalMeta(t);return i?i.categories[n]:n},e.prototype.getId=function(t){return Wp(this,this.getRawIndex(t))},e.prototype.count=function(){return this._store.count()},e.prototype.get=function(t,r){var n=this._store,i=this._dimInfos[t];if(i)return n.get(i.storeDimIndex,r)},e.prototype.getByRawIndex=function(t,r){var n=this._store,i=this._dimInfos[t];if(i)return n.getByRawIndex(i.storeDimIndex,r)},e.prototype.getIndices=function(){return this._store.getIndices()},e.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},e.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},e.prototype.getValues=function(t,r){var n=this,i=this._store;return ut(t)?i.getValues(Ia(t,function(o){return n._getStoreDimIndex(o)}),r):i.getValues(t)},e.prototype.hasValue=function(t){for(var r=this._dimSummary.dataDimIndicesOnCoord,n=0,i=r.length;n<i;n++)if(isNaN(this._store.get(r[n],t)))return!1;return!0},e.prototype.indexOfName=function(t){for(var r=0,n=this._store.count();r<n;r++)if(this.getName(r)===t)return r;return-1},e.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},e.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},e.prototype.rawIndexOf=function(t,r){var n=t&&this._invertedIndicesMap[t],i=n[r];return i==null||isNaN(i)?u6:i},e.prototype.indicesOfNearest=function(t,r,n){return this._store.indicesOfNearest(this._getStoreDimIndex(t),r,n)},e.prototype.each=function(t,r,n){Ut(t)&&(n=r,r=t,t=[]);var i=n||this,o=Ia(lh(t),this._getStoreDimIndex,this);this._store.each(o,i?Vt(r,i):r)},e.prototype.filterSelf=function(t,r,n){Ut(t)&&(n=r,r=t,t=[]);var i=n||this,o=Ia(lh(t),this._getStoreDimIndex,this);return this._store=this._store.filter(o,i?Vt(r,i):r),this},e.prototype.selectRange=function(t){var r=this,n={},i=ve(t);return N(i,function(o){var a=r._getStoreDimIndex(o);n[a]=t[o]}),this._store=this._store.selectRange(n),this},e.prototype.mapArray=function(t,r,n){Ut(t)&&(n=r,r=t,t=[]),n=n||this;var i=[];return this.each(t,function(){i.push(r&&r.apply(this,arguments))},n),i},e.prototype.map=function(t,r,n,i){var o=n||i||this,a=Ia(lh(t),this._getStoreDimIndex,this),s=Hp(this);return s._store=this._store.map(a,o?Vt(r,o):r),s},e.prototype.modify=function(t,r,n,i){var o=n||i||this,a=Ia(lh(t),this._getStoreDimIndex,this);this._store.modify(a,o?Vt(r,o):r)},e.prototype.downSample=function(t,r,n,i){var o=Hp(this);return o._store=this._store.downSample(this._getStoreDimIndex(t),r,n,i),o},e.prototype.lttbDownSample=function(t,r){var n=Hp(this);return n._store=this._store.lttbDownSample(this._getStoreDimIndex(t),r),n},e.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},e.prototype.getItemModel=function(t){var r=this.hostModel,n=this.getRawDataItem(t);return new br(n,r,r&&r.ecModel)},e.prototype.diff=function(t){var r=this;return new BF(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(n){return Wp(t,n)},function(n){return Wp(r,n)})},e.prototype.getVisual=function(t){var r=this._visual;return r&&r[t]},e.prototype.setVisual=function(t,r){this._visual=this._visual||{},ah(t)?ot(this._visual,t):this._visual[t]=r},e.prototype.getItemVisual=function(t,r){var n=this._itemVisuals[t],i=n&&n[r];return i==null?this.getVisual(r):i},e.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},e.prototype.ensureUniqueItemVisual=function(t,r){var n=this._itemVisuals,i=n[t];i||(i=n[t]={});var o=i[r];return o==null&&(o=this.getVisual(r),ut(o)?o=o.slice():ah(o)&&(o=ot({},o)),i[r]=o),o},e.prototype.setItemVisual=function(t,r,n){var i=this._itemVisuals[t]||{};this._itemVisuals[t]=i,ah(r)?ot(i,r):i[r]=n},e.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},e.prototype.setLayout=function(t,r){ah(t)?ot(this._layout,t):this._layout[t]=r},e.prototype.getLayout=function(t){return this._layout[t]},e.prototype.getItemLayout=function(t){return this._itemLayouts[t]},e.prototype.setItemLayout=function(t,r,n){this._itemLayouts[t]=n?ot(this._itemLayouts[t]||{},r):r},e.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},e.prototype.setItemGraphicEl=function(t,r){var n=this.hostModel&&this.hostModel.seriesIndex;LJ(n,this.dataType,t,r),this._graphicEls[t]=r},e.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},e.prototype.eachItemGraphicEl=function(t,r){N(this._graphicEls,function(n,i){n&&t&&t.call(r,n,i)})},e.prototype.cloneShallow=function(t){return t||(t=new e(this._schema?this._schema:Ia(this.dimensions,this._getDimInfo,this),this.hostModel)),y2(t,this),t._store=this._store,t},e.prototype.wrapMethod=function(t,r){var n=this[t];!Ut(n)||(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var i=n.apply(this,arguments);return r.apply(this,[i].concat(TP(arguments)))})},e.internalField=function(){c6=function(t){var r=t._invertedIndicesMap;N(r,function(n,i){var o=t._dimInfos[i],a=o.ordinalMeta,s=t._store;if(a){n=r[i]=new Snt(a.categories.length);for(var l=0;l<n.length;l++)n[l]=u6;for(var l=0;l<s.count();l++)n[s.get(o.storeDimIndex,l)]=l}})},sh=function(t,r,n){return Xn(t._getCategory(r,n),null)},Wp=function(t,r){var n=t._idList[r];return n==null&&t._idDimIdx!=null&&(n=sh(t,t._idDimIdx,r)),n==null&&(n=Tnt+r),n},lh=function(t){return ut(t)||(t=t!=null?[t]:[]),t},Hp=function(t){var r=new e(t._schema?t._schema:Ia(t.dimensions,t._getDimInfo,t),t.hostModel);return y2(r,t),r},y2=function(t,r){N(Pnt.concat(r.__wrappedMethods||[]),function(n){r.hasOwnProperty(n)&&(t[n]=r[n])}),t.__wrappedMethods=r.__wrappedMethods,N(Ent,function(n){t[n]=zt(r[n])}),t._calculationInfo=ot({},r._calculationInfo)},_2=function(t,r){var n=t._nameList,i=t._idList,o=t._nameDimIdx,a=t._idDimIdx,s=n[r],l=i[r];if(s==null&&o!=null&&(n[r]=s=sh(t,o,r)),l==null&&a!=null&&(i[r]=l=sh(t,a,r)),l==null&&s!=null){var u=t._nameRepeatCount,c=u[s]=(u[s]||0)+1;l=s,c>1&&(l+="__ec__"+c),i[r]=l}}}(),e}();const Fl=Ant;function jF(e,t){iE(e)||(e=oE(e)),t=t||{};var r=t.coordDimensions||[],n=t.dimensionsDefine||e.dimensionsDefine||[],i=jt(),o=[],a=Mnt(e,r,n,t.dimensionsCount),s=t.canOmitUnusedDimensions&&GF(a),l=n===e.dimensionsDefine,u=l?UF(e):VF(n),c=t.encodeDefine;!c&&t.encodeDefaulter&&(c=t.encodeDefaulter(e,a));for(var f=jt(c),h=new qN(a),d=0;d<h.length;d++)h[d]=-1;function p(A){var M=h[A];if(M<0){var k=n[A],O=It(k)?k:{name:k},F=new Vg,z=O.name;z!=null&&u.get(z)!=null&&(F.name=F.displayName=z),O.type!=null&&(F.type=O.type),O.displayName!=null&&(F.displayName=O.displayName);var R=o.length;return h[A]=R,F.storeDimIndex=A,o.push(F),F}return o[M]}if(!s)for(var d=0;d<a;d++)p(d);f.each(function(A,M){var k=Ze(A).slice();if(k.length===1&&!Et(k[0])&&k[0]<0){f.set(M,!1);return}var O=f.set(M,[]);N(k,function(F,z){var R=Et(F)?u.get(F):F;R!=null&&R<a&&(O[z]=R,g(p(R),M,z))})});var v=0;N(r,function(A){var M,k,O,F;if(Et(A))M=A,F={};else{F=A,M=F.name;var z=F.ordinalMeta;F.ordinalMeta=null,F=ot({},F),F.ordinalMeta=z,k=F.dimsDef,O=F.otherDims,F.name=F.coordDim=F.coordDimIndex=F.dimsDef=F.otherDims=null}var R=f.get(M);if(R!==!1){if(R=Ze(R),!R.length)for(var j=0;j<(k&&k.length||1);j++){for(;v<a&&p(v).coordDim!=null;)v++;v<a&&R.push(v++)}N(R,function(Z,q){var tt=p(Z);if(l&&F.type!=null&&(tt.type=F.type),g(te(tt,F),M,q),tt.name==null&&k){var Pt=k[q];!It(Pt)&&(Pt={name:Pt}),tt.name=tt.displayName=Pt.name,tt.defaultTooltip=Pt.defaultTooltip}O&&te(tt.otherDims,O)})}});function g(A,M,k){MN.get(M)!=null?A.otherDims[M]=k:(A.coordDim=M,A.coordDimIndex=k,i.set(M,!0))}var m=t.generateCoord,y=t.generateCoordCount,_=y!=null;y=m?y||1:0;var b=m||"value";function T(A){A.name==null&&(A.name=A.coordDim)}if(s)N(o,function(A){T(A)}),o.sort(function(A,M){return A.storeDimIndex-M.storeDimIndex});else for(var S=0;S<a;S++){var P=p(S),C=P.coordDim;C==null&&(P.coordDim=knt(b,i,_),P.coordDimIndex=0,(!m||y<=0)&&(P.isExtraCoord=!0),y--),T(P),P.type==null&&(IN(e,S)===vn.Must||P.isExtraCoord&&(P.otherDims.itemName!=null||P.otherDims.seriesName!=null))&&(P.type="ordinal")}return Cnt(o),new $F({source:e,dimensions:o,fullDimensionCount:a,dimensionOmitted:s})}function Cnt(e){for(var t=jt(),r=0;r<e.length;r++){var n=e[r],i=n.name,o=t.get(i)||0;o>0&&(n.name=i+(o-1)),o++,t.set(i,o)}}function Mnt(e,t,r,n){var i=Math.max(e.dimensionsDetectedCount||1,t.length,r.length,n||0);return N(t,function(o){var a;It(o)&&(a=o.dimsDef)&&(i=Math.max(i,a.length))}),i}function knt(e,t,r){var n=t.data;if(r||n.hasOwnProperty(e)){for(var i=0;n.hasOwnProperty(e+i);)i++;e+=i}return t.set(e,!0),e}var xnt=function(){function e(t){this.coordSysDims=[],this.axisMap=jt(),this.categoryAxisMap=jt(),this.coordSysName=t}return e}();function Lnt(e){var t=e.get("coordinateSystem"),r=new xnt(t),n=Int[t];if(n)return n(e,r,r.axisMap,r.categoryAxisMap),r}var Int={cartesian2d:function(e,t,r,n){var i=e.getReferringComponents("xAxis",_i).models[0],o=e.getReferringComponents("yAxis",_i).models[0];t.coordSysDims=["x","y"],r.set("x",i),r.set("y",o),$u(i)&&(n.set("x",i),t.firstCategoryDimIndex=0),$u(o)&&(n.set("y",o),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},singleAxis:function(e,t,r,n){var i=e.getReferringComponents("singleAxis",_i).models[0];t.coordSysDims=["single"],r.set("single",i),$u(i)&&(n.set("single",i),t.firstCategoryDimIndex=0)},polar:function(e,t,r,n){var i=e.getReferringComponents("polar",_i).models[0],o=i.findAxisModel("radiusAxis"),a=i.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],r.set("radius",o),r.set("angle",a),$u(o)&&(n.set("radius",o),t.firstCategoryDimIndex=0),$u(a)&&(n.set("angle",a),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},geo:function(e,t,r,n){t.coordSysDims=["lng","lat"]},parallel:function(e,t,r,n){var i=e.ecModel,o=i.getComponent("parallel",e.get("parallelIndex")),a=t.coordSysDims=o.dimensions.slice();N(o.parallelAxisIndex,function(s,l){var u=i.getComponent("parallelAxis",s),c=a[l];r.set(c,u),$u(u)&&(n.set(c,u),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=l))})}};function $u(e){return e.get("type")==="category"}function Ont(e,t,r){r=r||{};var n=r.byIndex,i=r.stackedCoordDimension,o,a,s;Rnt(t)?o=t:(a=t.schema,o=a.dimensions,s=t.store);var l=!!(e&&e.get("stack")),u,c,f,h;if(N(o,function(y,_){Et(y)&&(o[_]=y={name:y}),l&&!y.isExtraCoord&&(!n&&!u&&y.ordinalMeta&&(u=y),!c&&y.type!=="ordinal"&&y.type!=="time"&&(!i||i===y.coordDim)&&(c=y))}),c&&!n&&!u&&(n=!0),c){f="__\0ecstackresult_"+e.id,h="__\0ecstackedover_"+e.id,u&&(u.createInvertedIndices=!0);var d=c.coordDim,p=c.type,v=0;N(o,function(y){y.coordDim===d&&v++});var g={name:f,coordDim:d,coordDimIndex:v,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:o.length},m={name:h,coordDim:h,coordDimIndex:v+1,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:o.length+1};a?(s&&(g.storeDimIndex=s.ensureCalculationDimension(h,p),m.storeDimIndex=s.ensureCalculationDimension(f,p)),a.appendCalculationDimension(g),a.appendCalculationDimension(m)):(o.push(g),o.push(m))}return{stackedDimension:c&&c.name,stackedByDimension:u&&u.name,isStackedByIndex:n,stackedOverDimension:h,stackResultDimension:f}}function Rnt(e){return!zF(e.schema)}function Jl(e,t){return!!t&&t===e.getCalculationInfo("stackedDimension")}function WF(e,t){return Jl(e,t)?e.getCalculationInfo("stackResultDimension"):t}function Dnt(e,t){var r=e.get("coordinateSystem"),n=nE.get(r),i;return t&&t.coordSysDims&&(i=Ct(t.coordSysDims,function(o){var a={name:o},s=t.axisMap.get(o);if(s){var l=s.get("type");a.type=mnt(l)}return a})),i||(i=n&&(n.getDimensionsInfo?n.getDimensionsInfo():n.dimensions.slice())||["x","y"]),i}function Nnt(e,t,r){var n,i;return r&&N(e,function(o,a){var s=o.coordDim,l=r.categoryAxisMap.get(s);l&&(n==null&&(n=a),o.ordinalMeta=l.getOrdinalMeta(),t&&(o.createInvertedIndices=!0)),o.otherDims.itemName!=null&&(i=!0)}),!i&&n!=null&&(e[n].otherDims.itemName=0),n}function L0(e,t,r){r=r||{};var n=t.getSourceManager(),i,o=!1;e?(o=!0,i=oE(e)):(i=n.getSource(),o=i.sourceFormat===ei);var a=Lnt(t),s=Dnt(t,a),l=r.useEncodeDefaulter,u=Ut(l)?l:l?_e(btt,s,t):null,c={coordDimensions:s,generateCoord:r.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:u,canOmitUnusedDimensions:!o},f=jF(i,c),h=Nnt(f.dimensions,r.createInvertedIndices,a),d=o?null:n.getSharedDataStore(f),p=Ont(t,{schema:f,store:d}),v=new Fl(f,t);v.setCalculationInfo(p);var g=h!=null&&Fnt(i)?function(m,y,_,b){return b===h?_:this.defaultDimValueGetter(m,y,_,b)}:null;return v.hasItemOption=!1,v.initData(o?i:d,null,g),v}function Fnt(e){if(e.sourceFormat===ei){var t=Bnt(e.data||[]);return!ut(A0(t))}}function Bnt(e){for(var t=0;t<e.length&&e[t]==null;)t++;return e[t]}var HF=function(){function e(t){this._setting=t||{},this._extent=[1/0,-1/0]}return e.prototype.getSetting=function(t){return this._setting[t]},e.prototype.unionExtent=function(t){var r=this._extent;t[0]<r[0]&&(r[0]=t[0]),t[1]>r[1]&&(r[1]=t[1])},e.prototype.unionExtentFromData=function(t,r){this.unionExtent(t.getApproximateExtent(r))},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.setExtent=function(t,r){var n=this._extent;isNaN(t)||(n[0]=t),isNaN(r)||(n[1]=r)},e.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},e.prototype.isBlank=function(){return this._isBlank},e.prototype.setBlank=function(t){this._isBlank=t},e}();$1(HF);const ba=HF;var $nt=0,znt=function(){function e(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++$nt}return e.createByAxisModel=function(t){var r=t.option,n=r.data,i=n&&Ct(n,Vnt);return new e({categories:i,needCollect:!i,deduplication:r.dedplication!==!1})},e.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},e.prototype.parseAndCollect=function(t){var r,n=this._needCollect;if(!Et(t)&&!n)return t;if(n&&!this._deduplication)return r=this.categories.length,this.categories[r]=t,r;var i=this._getOrCreateMap();return r=i.get(t),r==null&&(n?(r=this.categories.length,this.categories[r]=t,i.set(t,r)):r=NaN),r},e.prototype._getOrCreateMap=function(){return this._map||(this._map=jt(this.categories))},e}();function Vnt(e){return It(e)&&e.value!=null?e.value:e+""}const s3=znt;function l3(e){return e.type==="interval"||e.type==="log"}function Unt(e,t,r,n){var i={},o=e[1]-e[0],a=i.interval=c9(o/t,!0);r!=null&&a<r&&(a=i.interval=r),n!=null&&a>n&&(a=i.interval=n);var s=i.intervalPrecision=XF(a),l=i.niceTickExtent=[qe(Math.ceil(e[0]/a)*a,s),qe(Math.floor(e[1]/a)*a,s)];return Gnt(l,e),i}function b2(e){var t=Math.pow(10,IP(e)),r=e/t;return r?r===2?r=3:r===3?r=5:r*=2:r=1,qe(r*t)}function XF(e){return vo(e)+2}function f6(e,t,r){e[t]=Math.max(Math.min(e[t],r[1]),r[0])}function Gnt(e,t){!isFinite(e[0])&&(e[0]=t[0]),!isFinite(e[1])&&(e[1]=t[1]),f6(e,0,t),f6(e,1,t),e[0]>e[1]&&(e[0]=e[1])}function ly(e,t){return e>=t[0]&&e<=t[1]}function uy(e,t){return t[1]===t[0]?.5:(e-t[0])/(t[1]-t[0])}function cy(e,t){return e*(t[1]-t[0])+t[0]}var YF=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;n.type="ordinal";var i=n.getSetting("ordinalMeta");return i||(i=new s3({})),ut(i)&&(i=new s3({categories:Ct(i,function(o){return It(o)?o.value:o})})),n._ordinalMeta=i,n._extent=n.getSetting("extent")||[0,i.categories.length-1],n}return t.prototype.parse=function(r){return r==null?NaN:Et(r)?this._ordinalMeta.getOrdinal(r):Math.round(r)},t.prototype.contain=function(r){return r=this.parse(r),ly(r,this._extent)&&this._ordinalMeta.categories[r]!=null},t.prototype.normalize=function(r){return r=this._getTickNumber(this.parse(r)),uy(r,this._extent)},t.prototype.scale=function(r){return r=Math.round(cy(r,this._extent)),this.getRawOrdinalNumber(r)},t.prototype.getTicks=function(){for(var r=[],n=this._extent,i=n[0];i<=n[1];)r.push({value:i}),i++;return r},t.prototype.getMinorTicks=function(r){},t.prototype.setSortInfo=function(r){if(r==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var n=r.ordinalNumbers,i=this._ordinalNumbersByTick=[],o=this._ticksByOrdinalNumber=[],a=0,s=this._ordinalMeta.categories.length,l=Math.min(s,n.length);a<l;++a){var u=n[a];i[a]=u,o[u]=a}for(var c=0;a<s;++a){for(;o[c]!=null;)c++;i.push(c),o[c]=a}},t.prototype._getTickNumber=function(r){var n=this._ticksByOrdinalNumber;return n&&r>=0&&r<n.length?n[r]:r},t.prototype.getRawOrdinalNumber=function(r){var n=this._ordinalNumbersByTick;return n&&r>=0&&r<n.length?n[r]:r},t.prototype.getLabel=function(r){if(!this.isBlank()){var n=this.getRawOrdinalNumber(r.value),i=this._ordinalMeta.categories[n];return i==null?"":i+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.unionExtentFromData=function(r,n){this.unionExtent(r.getApproximateExtent(n))},t.prototype.isInExtentRange=function(r){return r=this._getTickNumber(r),this._extent[0]<=r&&this._extent[1]>=r},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t}(ba);ba.registerClass(YF);const qF=YF;var ul=qe,ZF=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="interval",r._interval=0,r._intervalPrecision=2,r}return t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return ly(r,this._extent)},t.prototype.normalize=function(r){return uy(r,this._extent)},t.prototype.scale=function(r){return cy(r,this._extent)},t.prototype.setExtent=function(r,n){var i=this._extent;isNaN(r)||(i[0]=parseFloat(r)),isNaN(n)||(i[1]=parseFloat(n))},t.prototype.unionExtent=function(r){var n=this._extent;r[0]<n[0]&&(n[0]=r[0]),r[1]>n[1]&&(n[1]=r[1]),this.setExtent(n[0],n[1])},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(r){this._interval=r,this._niceExtent=this._extent.slice(),this._intervalPrecision=XF(r)},t.prototype.getTicks=function(r){var n=this._interval,i=this._extent,o=this._niceExtent,a=this._intervalPrecision,s=[];if(!n)return s;var l=1e4;i[0]<o[0]&&(r?s.push({value:ul(o[0]-n,a)}):s.push({value:i[0]}));for(var u=o[0];u<=o[1]&&(s.push({value:u}),u=ul(u+n,a),u!==s[s.length-1].value);)if(s.length>l)return[];var c=s.length?s[s.length-1].value:o[1];return i[1]>c&&(r?s.push({value:ul(c+n,a)}):s.push({value:i[1]})),s},t.prototype.getMinorTicks=function(r){for(var n=this.getTicks(!0),i=[],o=this.getExtent(),a=1;a<n.length;a++){for(var s=n[a],l=n[a-1],u=0,c=[],f=s.value-l.value,h=f/r;u<r-1;){var d=ul(l.value+(u+1)*h);d>o[0]&&d<o[1]&&c.push(d),u++}i.push(c)}return i},t.prototype.getLabel=function(r,n){if(r==null)return"";var i=n&&n.precision;i==null?i=vo(r.value)||0:i==="auto"&&(i=this._intervalPrecision);var o=ul(r.value,i,!0);return PN(o)},t.prototype.calcNiceTicks=function(r,n,i){r=r||5;var o=this._extent,a=o[1]-o[0];if(!!isFinite(a)){a<0&&(a=-a,o.reverse());var s=Unt(o,r,n,i);this._intervalPrecision=s.intervalPrecision,this._interval=s.interval,this._niceExtent=s.niceTickExtent}},t.prototype.calcNiceExtent=function(r){var n=this._extent;if(n[0]===n[1])if(n[0]!==0){var i=Math.abs(n[0]);r.fixMax||(n[1]+=i/2),n[0]-=i/2}else n[1]=1;var o=n[1]-n[0];isFinite(o)||(n[0]=0,n[1]=1),this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval);var a=this._interval;r.fixMin||(n[0]=ul(Math.floor(n[0]/a)*a)),r.fixMax||(n[1]=ul(Math.ceil(n[1]/a)*a))},t.prototype.setNiceExtent=function(r,n){this._niceExtent=[r,n]},t.type="interval",t}(ba);ba.registerClass(ZF);const I0=ZF;var KF=typeof Float32Array<"u",jnt=KF?Float32Array:Array;function Qo(e){return ut(e)?KF?new Float32Array(e):e:new jnt(e)}var u3="__ec_stack_";function mE(e){return e.get("stack")||u3+e.seriesIndex}function yE(e){return e.dim+e.index}function Wnt(e){var t=[],r=e.axis,n="axis0";if(r.type==="category"){for(var i=r.getBandWidth(),o=0;o<e.count;o++)t.push(te({bandWidth:i,axisKey:n,stackId:u3+o},e));for(var a=tB(t),s=[],o=0;o<e.count;o++){var l=a[n][u3+o];l.offsetCenter=l.offset+l.width/2,s.push(l)}return s}}function JF(e,t){var r=[];return t.eachSeriesByType(e,function(n){eB(n)&&r.push(n)}),r}function Hnt(e){var t={};N(e,function(l){var u=l.coordinateSystem,c=u.getBaseAxis();if(!(c.type!=="time"&&c.type!=="value"))for(var f=l.getData(),h=c.dim+"_"+c.index,d=f.getDimensionIndex(f.mapDimension(c.dim)),p=f.getStore(),v=0,g=p.count();v<g;++v){var m=p.get(d,v);t[h]?t[h].push(m):t[h]=[m]}});var r={};for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];if(i){i.sort(function(l,u){return l-u});for(var o=null,a=1;a<i.length;++a){var s=i[a]-i[a-1];s>0&&(o=o===null?s:Math.min(o,s))}r[n]=o}}return r}function QF(e){var t=Hnt(e),r=[];return N(e,function(n){var i=n.coordinateSystem,o=i.getBaseAxis(),a=o.getExtent(),s;if(o.type==="category")s=o.getBandWidth();else if(o.type==="value"||o.type==="time"){var l=o.dim+"_"+o.index,u=t[l],c=Math.abs(a[1]-a[0]),f=o.scale.getExtent(),h=Math.abs(f[1]-f[0]);s=u?c/h*u:c}else{var d=n.getData();s=Math.abs(a[1]-a[0])/d.count()}var p=We(n.get("barWidth"),s),v=We(n.get("barMaxWidth"),s),g=We(n.get("barMinWidth")||(rB(n)?.5:1),s),m=n.get("barGap"),y=n.get("barCategoryGap");r.push({bandWidth:s,barWidth:p,barMaxWidth:v,barMinWidth:g,barGap:m,barCategoryGap:y,axisKey:yE(o),stackId:mE(n)})}),tB(r)}function tB(e){var t={};N(e,function(n,i){var o=n.axisKey,a=n.bandWidth,s=t[o]||{bandWidth:a,remainedWidth:a,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},l=s.stacks;t[o]=s;var u=n.stackId;l[u]||s.autoWidthCount++,l[u]=l[u]||{width:0,maxWidth:0};var c=n.barWidth;c&&!l[u].width&&(l[u].width=c,c=Math.min(s.remainedWidth,c),s.remainedWidth-=c);var f=n.barMaxWidth;f&&(l[u].maxWidth=f);var h=n.barMinWidth;h&&(l[u].minWidth=h);var d=n.barGap;d!=null&&(s.gap=d);var p=n.barCategoryGap;p!=null&&(s.categoryGap=p)});var r={};return N(t,function(n,i){r[i]={};var o=n.stacks,a=n.bandWidth,s=n.categoryGap;if(s==null){var l=ve(o).length;s=Math.max(35-l*4,15)+"%"}var u=We(s,a),c=We(n.gap,1),f=n.remainedWidth,h=n.autoWidthCount,d=(f-u)/(h+(h-1)*c);d=Math.max(d,0),N(o,function(m){var y=m.maxWidth,_=m.minWidth;if(m.width){var b=m.width;y&&(b=Math.min(b,y)),_&&(b=Math.max(b,_)),m.width=b,f-=b+c*b,h--}else{var b=d;y&&y<b&&(b=Math.min(y,f)),_&&_>b&&(b=_),b!==d&&(m.width=b,f-=b+c*b,h--)}}),d=(f-u)/(h+(h-1)*c),d=Math.max(d,0);var p=0,v;N(o,function(m,y){m.width||(m.width=d),v=m,p+=m.width*(1+c)}),v&&(p-=v.width*c);var g=-p/2;N(o,function(m,y){r[i][y]=r[i][y]||{bandWidth:a,offset:g,width:m.width},g+=m.width*(1+c)})}),r}function Xnt(e,t,r){if(e&&t){var n=e[yE(t)];return n!=null&&r!=null?n[mE(r)]:n}}function Ynt(e,t){var r=JF(e,t),n=QF(r);N(r,function(i){var o=i.getData(),a=i.coordinateSystem,s=a.getBaseAxis(),l=mE(i),u=n[yE(s)][l],c=u.offset,f=u.width;o.setLayout({bandWidth:u.bandWidth,offset:c,size:f})})}function qnt(e){return{seriesType:e,plan:uE(),reset:function(t){if(!!eB(t)){var r=t.getData(),n=t.coordinateSystem,i=n.getBaseAxis(),o=n.getOtherAxis(i),a=r.getDimensionIndex(r.mapDimension(o.dim)),s=r.getDimensionIndex(r.mapDimension(i.dim)),l=t.get("showBackground",!0),u=r.mapDimension(o.dim),c=r.getCalculationInfo("stackResultDimension"),f=Jl(r,u)&&!!r.getCalculationInfo("stackedOnSeries"),h=o.isHorizontal(),d=Znt(i,o),p=rB(t),v=t.get("barMinHeight")||0,g=c&&r.getDimensionIndex(c),m=r.getLayout("size"),y=r.getLayout("offset");return{progress:function(_,b){for(var T=_.count,S=p&&Qo(T*3),P=p&&l&&Qo(T*3),C=p&&Qo(T),A=n.master.getRect(),M=h?A.width:A.height,k,O=b.getStore(),F=0;(k=_.next())!=null;){var z=O.get(f?g:a,k),R=O.get(s,k),j=d,Z=void 0;f&&(Z=+z-O.get(a,k));var q=void 0,tt=void 0,Pt=void 0,Ot=void 0;if(h){var bt=n.dataToPoint([z,R]);if(f){var wt=n.dataToPoint([Z,R]);j=wt[0]}q=j,tt=bt[1]+y,Pt=bt[0]-j,Ot=m,Math.abs(Pt)<v&&(Pt=(Pt<0?-1:1)*v)}else{var bt=n.dataToPoint([R,z]);if(f){var wt=n.dataToPoint([R,Z]);j=wt[1]}q=bt[0]+y,tt=j,Pt=m,Ot=bt[1]-j,Math.abs(Ot)<v&&(Ot=(Ot<=0?-1:1)*v)}p?(S[F]=q,S[F+1]=tt,S[F+2]=h?Pt:Ot,P&&(P[F]=h?A.x:q,P[F+1]=h?tt:A.y,P[F+2]=M),C[k]=k):b.setItemLayout(k,{x:q,y:tt,width:Pt,height:Ot}),F+=3}p&&b.setLayout({largePoints:S,largeDataIndices:C,largeBackgroundPoints:P,valueAxisHorizontal:h})}}}}}}function eB(e){return e.coordinateSystem&&e.coordinateSystem.type==="cartesian2d"}function rB(e){return e.pipelineContext&&e.pipelineContext.large}function Znt(e,t){return t.toGlobalCoord(t.dataToCoord(t.type==="log"?1:0))}var Knt=function(e,t,r,n){for(;r<n;){var i=r+n>>>1;e[i][1]<t?r=i+1:n=i}return r},nB=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="time",n}return t.prototype.getLabel=function(r){var n=this.getSetting("useUTC");return Z1(r.value,e4[utt(kc(this._minLevelUnit))]||e4.second,n,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(r,n,i){var o=this.getSetting("useUTC"),a=this.getSetting("locale");return ctt(r,n,i,a,o)},t.prototype.getTicks=function(){var r=this._interval,n=this._extent,i=[];if(!r)return i;i.push({value:n[0],level:0});var o=this.getSetting("useUTC"),a=iit(this._minLevelUnit,this._approxInterval,o,n);return i=i.concat(a),i.push({value:n[1],level:0}),i},t.prototype.calcNiceExtent=function(r){var n=this._extent;if(n[0]===n[1]&&(n[0]-=Wn,n[1]+=Wn),n[1]===-1/0&&n[0]===1/0){var i=new Date;n[1]=+new Date(i.getFullYear(),i.getMonth(),i.getDate()),n[0]=n[1]-Wn}this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval)},t.prototype.calcNiceTicks=function(r,n,i){r=r||10;var o=this._extent,a=o[1]-o[0];this._approxInterval=a/r,n!=null&&this._approxInterval<n&&(this._approxInterval=n),i!=null&&this._approxInterval>i&&(this._approxInterval=i);var s=Xp.length,l=Math.min(Knt(Xp,this._approxInterval,0,s),s-1);this._interval=Xp[l][1],this._minLevelUnit=Xp[Math.max(l-1,0)][0]},t.prototype.parse=function(r){return be(r)?r:+ua(r)},t.prototype.contain=function(r){return ly(this.parse(r),this._extent)},t.prototype.normalize=function(r){return uy(this.parse(r),this._extent)},t.prototype.scale=function(r){return cy(r,this._extent)},t.type="time",t}(I0),Xp=[["second",JP],["minute",QP],["hour",_d],["quarter-day",_d*6],["half-day",_d*12],["day",Wn*1.2],["half-week",Wn*3.5],["week",Wn*7],["month",Wn*31],["quarter",Wn*95],["half-year",t4/2],["year",t4]];function Jnt(e,t,r,n){var i=ua(t),o=ua(r),a=function(p){return r4(i,p,n)===r4(o,p,n)},s=function(){return a("year")},l=function(){return s()&&a("month")},u=function(){return l()&&a("day")},c=function(){return u()&&a("hour")},f=function(){return c()&&a("minute")},h=function(){return f()&&a("second")},d=function(){return h()&&a("millisecond")};switch(e){case"year":return s();case"month":return l();case"day":return u();case"hour":return c();case"minute":return f();case"second":return h();case"millisecond":return d()}}function Qnt(e,t){return e/=Wn,e>16?16:e>7.5?7:e>3.5?4:e>1.5?2:1}function tit(e){var t=30*Wn;return e/=t,e>6?6:e>3?3:e>2?2:1}function eit(e){return e/=_d,e>12?12:e>6?6:e>3.5?4:e>2?2:1}function h6(e,t){return e/=t?QP:JP,e>30?30:e>20?20:e>15?15:e>10?10:e>5?5:e>2?2:1}function rit(e){return c9(e,!0)}function nit(e,t,r){var n=new Date(e);switch(kc(t)){case"year":case"month":n[yN(r)](0);case"day":n[_N(r)](1);case"hour":n[bN(r)](0);case"minute":n[wN(r)](0);case"second":n[SN(r)](0),n[TN(r)](0)}return n.getTime()}function iit(e,t,r,n){var i=1e4,o=gN,a=0;function s(M,k,O,F,z,R,j){for(var Z=new Date(k),q=k,tt=Z[F]();q<O&&q<=n[1];)j.push({value:q}),tt+=M,Z[z](tt),q=Z.getTime();j.push({value:q,notAdd:!0})}function l(M,k,O){var F=[],z=!k.length;if(!Jnt(kc(M),n[0],n[1],r)){z&&(k=[{value:nit(new Date(n[0]),M,r)},{value:n[1]}]);for(var R=0;R<k.length-1;R++){var j=k[R].value,Z=k[R+1].value;if(j!==Z){var q=void 0,tt=void 0,Pt=void 0,Ot=!1;switch(M){case"year":q=Math.max(1,Math.round(t/Wn/365)),tt=tE(r),Pt=ftt(r);break;case"half-year":case"quarter":case"month":q=tit(t),tt=xc(r),Pt=yN(r);break;case"week":case"half-week":case"day":q=Qnt(t),tt=K1(r),Pt=_N(r),Ot=!0;break;case"half-day":case"quarter-day":case"hour":q=eit(t),tt=Kd(r),Pt=bN(r);break;case"minute":q=h6(t,!0),tt=J1(r),Pt=wN(r);break;case"second":q=h6(t,!1),tt=Q1(r),Pt=SN(r);break;case"millisecond":q=rit(t),tt=ty(r),Pt=TN(r);break}s(q,j,Z,tt,Pt,Ot,F),M==="year"&&O.length>1&&R===0&&O.unshift({value:O[0].value-q})}}for(var R=0;R<F.length;R++)O.push(F[R]);return F}}for(var u=[],c=[],f=0,h=0,d=0;d<o.length&&a++<i;++d){var p=kc(o[d]);if(!!ltt(o[d])){l(o[d],u[u.length-1]||[],c);var v=o[d+1]?kc(o[d+1]):null;if(p!==v){if(c.length){h=f,c.sort(function(M,k){return M.value-k.value});for(var g=[],m=0;m<c.length;++m){var y=c[m].value;(m===0||c[m-1].value!==y)&&(g.push(c[m]),y>=n[0]&&y<=n[1]&&f++)}var _=(n[1]-n[0])/t;if(f>_*1.5&&h>_/1.5||(u.push(g),f>_||e===o[d]))break}c=[]}}}for(var b=yr(Ct(u,function(M){return yr(M,function(k){return k.value>=n[0]&&k.value<=n[1]&&!k.notAdd})}),function(M){return M.length>0}),T=[],S=b.length-1,d=0;d<b.length;++d)for(var P=b[d],C=0;C<P.length;++C)T.push({value:P[C].value,level:S-d});T.sort(function(M,k){return M.value-k.value});for(var A=[],d=0;d<T.length;++d)(d===0||T[d].value!==T[d-1].value)&&A.push(T[d]);return A}ba.registerClass(nB);const oit=nB;var d6=ba.prototype,Td=I0.prototype,ait=qe,sit=Math.floor,lit=Math.ceil,Yp=Math.pow,oi=Math.log,_E=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="log",r.base=10,r._originalScale=new I0,r._interval=0,r}return t.prototype.getTicks=function(r){var n=this._originalScale,i=this._extent,o=n.getExtent(),a=Td.getTicks.call(this,r);return Ct(a,function(s){var l=s.value,u=qe(Yp(this.base,l));return u=l===i[0]&&this._fixMin?qp(u,o[0]):u,u=l===i[1]&&this._fixMax?qp(u,o[1]):u,{value:u}},this)},t.prototype.setExtent=function(r,n){var i=oi(this.base);r=oi(Math.max(0,r))/i,n=oi(Math.max(0,n))/i,Td.setExtent.call(this,r,n)},t.prototype.getExtent=function(){var r=this.base,n=d6.getExtent.call(this);n[0]=Yp(r,n[0]),n[1]=Yp(r,n[1]);var i=this._originalScale,o=i.getExtent();return this._fixMin&&(n[0]=qp(n[0],o[0])),this._fixMax&&(n[1]=qp(n[1],o[1])),n},t.prototype.unionExtent=function(r){this._originalScale.unionExtent(r);var n=this.base;r[0]=oi(r[0])/oi(n),r[1]=oi(r[1])/oi(n),d6.unionExtent.call(this,r)},t.prototype.unionExtentFromData=function(r,n){this.unionExtent(r.getApproximateExtent(n))},t.prototype.calcNiceTicks=function(r){r=r||10;var n=this._extent,i=n[1]-n[0];if(!(i===1/0||i<=0)){var o=fK(i),a=r/i*o;for(a<=.5&&(o*=10);!isNaN(o)&&Math.abs(o)<1&&Math.abs(o)>0;)o*=10;var s=[qe(lit(n[0]/o)*o),qe(sit(n[1]/o)*o)];this._interval=o,this._niceExtent=s}},t.prototype.calcNiceExtent=function(r){Td.calcNiceExtent.call(this,r),this._fixMin=r.fixMin,this._fixMax=r.fixMax},t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return r=oi(r)/oi(this.base),ly(r,this._extent)},t.prototype.normalize=function(r){return r=oi(r)/oi(this.base),uy(r,this._extent)},t.prototype.scale=function(r){return r=cy(r,this._extent),Yp(this.base,r)},t.type="log",t}(ba),iB=_E.prototype;iB.getMinorTicks=Td.getMinorTicks;iB.getLabel=Td.getLabel;function qp(e,t){return ait(e,vo(t))}ba.registerClass(_E);const uit=_E;var cit=function(){function e(t,r,n){this._prepareParams(t,r,n)}return e.prototype._prepareParams=function(t,r,n){n[1]<n[0]&&(n=[NaN,NaN]),this._dataMin=n[0],this._dataMax=n[1];var i=this._isOrdinal=t.type==="ordinal";this._needCrossZero=t.type==="interval"&&r.getNeedCrossZero&&r.getNeedCrossZero();var o=this._modelMinRaw=r.get("min",!0);Ut(o)?this._modelMinNum=Zp(t,o({min:n[0],max:n[1]})):o!=="dataMin"&&(this._modelMinNum=Zp(t,o));var a=this._modelMaxRaw=r.get("max",!0);if(Ut(a)?this._modelMaxNum=Zp(t,a({min:n[0],max:n[1]})):a!=="dataMax"&&(this._modelMaxNum=Zp(t,a)),i)this._axisDataLen=r.getCategories().length;else{var s=r.get("boundaryGap"),l=ut(s)?s:[s||0,s||0];typeof l[0]=="boolean"||typeof l[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[sa(l[0],1),sa(l[1],1)]}},e.prototype.calculate=function(){var t=this._isOrdinal,r=this._dataMin,n=this._dataMax,i=this._axisDataLen,o=this._boundaryGapInner,a=t?null:n-r||Math.abs(r),s=this._modelMinRaw==="dataMin"?r:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?n:this._modelMaxNum,u=s!=null,c=l!=null;s==null&&(s=t?i?0:NaN:r-o[0]*a),l==null&&(l=t?i?i-1:NaN:n+o[1]*a),(s==null||!isFinite(s))&&(s=NaN),(l==null||!isFinite(l))&&(l=NaN);var f=ym(s)||ym(l)||t&&!i;this._needCrossZero&&(s>0&&l>0&&!u&&(s=0),s<0&&l<0&&!c&&(l=0));var h=this._determinedMin,d=this._determinedMax;return h!=null&&(s=h,u=!0),d!=null&&(l=d,c=!0),{min:s,max:l,minFixed:u,maxFixed:c,isBlank:f}},e.prototype.modifyDataMinMax=function(t,r){this[hit[t]]=r},e.prototype.setDeterminedMinMax=function(t,r){var n=fit[t];this[n]=r},e.prototype.freeze=function(){this.frozen=!0},e}(),fit={min:"_determinedMin",max:"_determinedMax"},hit={min:"_dataMin",max:"_dataMax"};function dit(e,t,r){var n=e.rawExtentInfo;return n||(n=new cit(e,t,r),e.rawExtentInfo=n,n)}function Zp(e,t){return t==null?null:ym(t)?NaN:e.parse(t)}function oB(e,t){var r=e.type,n=dit(e,t,e.getExtent()).calculate();e.setBlank(n.isBlank);var i=n.min,o=n.max,a=t.ecModel;if(a&&r==="time"){var s=JF("bar",a),l=!1;if(N(s,function(f){l=l||f.getBaseAxis()===t.axis}),l){var u=QF(s),c=pit(i,o,t,u);i=c.min,o=c.max}}return{extent:[i,o],fixMin:n.minFixed,fixMax:n.maxFixed}}function pit(e,t,r,n){var i=r.axis.getExtent(),o=i[1]-i[0],a=Xnt(n,r.axis);if(a===void 0)return{min:e,max:t};var s=1/0;N(a,function(d){s=Math.min(d.offset,s)});var l=-1/0;N(a,function(d){l=Math.max(d.offset+d.width,l)}),s=Math.abs(s),l=Math.abs(l);var u=s+l,c=t-e,f=1-(s+l)/o,h=c/f-c;return t+=h*(l/u),e-=h*(s/u),{min:e,max:t}}function p6(e,t){var r=t,n=oB(e,r),i=n.extent,o=r.get("splitNumber");e instanceof uit&&(e.base=r.get("logBase"));var a=e.type,s=r.get("interval"),l=a==="interval"||a==="time";e.setExtent(i[0],i[1]),e.calcNiceExtent({splitNumber:o,fixMin:n.fixMin,fixMax:n.fixMax,minInterval:l?r.get("minInterval"):null,maxInterval:l?r.get("maxInterval"):null}),s!=null&&e.setInterval&&e.setInterval(s)}function vit(e,t){if(t=t||e.get("type"),t)switch(t){case"category":return new qF({ordinalMeta:e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),extent:[1/0,-1/0]});case"time":return new oit({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new(ba.getClass(t)||I0)}}function git(e){var t=e.scale.getExtent(),r=t[0],n=t[1];return!(r>0&&n>0||r<0&&n<0)}function O0(e){var t=e.getLabelModel().get("formatter"),r=e.type==="category"?e.scale.getExtent()[0]:null;return e.scale.type==="time"?function(n){return function(i,o){return e.scale.getFormattedLabel(i,o,n)}}(t):Et(t)?function(n){return function(i){var o=e.scale.getLabel(i),a=n.replace("{value}",o!=null?o:"");return a}}(t):Ut(t)?function(n){return function(i,o){return r!=null&&(o=i.value-r),n(bE(e,i),o,i.level!=null?{level:i.level}:null)}}(t):function(n){return e.scale.getLabel(n)}}function bE(e,t){return e.type==="category"?e.scale.getLabel(t):t.value}function mit(e){var t=e.model,r=e.scale;if(!(!t.get(["axisLabel","show"])||r.isBlank())){var n,i,o=r.getExtent();r instanceof qF?i=r.count():(n=r.getTicks(),i=n.length);var a=e.getLabelModel(),s=O0(e),l,u=1;i>40&&(u=Math.ceil(i/40));for(var c=0;c<i;c+=u){var f=n?n[c]:{value:o[0]+c},h=s(f,c),d=a.getTextRect(h),p=yit(d,a.get("rotate")||0);l?l.union(p):l=p}return l}}function yit(e,t){var r=t*Math.PI/180,n=e.width,i=e.height,o=n*Math.abs(Math.cos(r))+Math.abs(i*Math.sin(r)),a=n*Math.abs(Math.sin(r))+Math.abs(i*Math.cos(r)),s=new ae(e.x,e.y,o,a);return s}function wE(e){var t=e.get("interval");return t==null?"auto":t}function aB(e){return e.type==="category"&&wE(e.getLabelModel())===0}function _it(e,t){var r={};return N(e.mapDimensionsAll(t),function(n){r[WF(e,n)]=!0}),ve(r)}var bit=function(){function e(){}return e.prototype.getNeedCrossZero=function(){var t=this.option;return!t.scale},e.prototype.getCoordSysModel=function(){},e}(),v6=[],wit={registerPreprocessor:DF,registerProcessor:NF,registerPostInit:lnt,registerPostUpdate:unt,registerUpdateLifecycle:vE,registerAction:cu,registerCoordinateSystem:cnt,registerLayout:fnt,registerVisual:fu,registerTransform:dnt,registerLoading:FF,registerMap:hnt,registerImpl:Vrt,PRIORITY:ent,ComponentModel:Ce,ComponentView:Qn,SeriesModel:To,ChartView:Yn,registerComponentModel:function(e){Ce.registerClass(e)},registerComponentView:function(e){Qn.registerClass(e)},registerSeriesModel:function(e){To.registerClass(e)},registerChartView:function(e){Yn.registerClass(e)},registerSubTypeDefaulter:function(e,t){Ce.registerSubTypeDefaulter(e,t)},registerPainter:function(e,t){oK(e,t)}};function Br(e){if(ut(e)){N(e,function(t){Br(t)});return}ce(v6,e)>=0||(v6.push(e),Ut(e)&&(e={install:e}),e.install(wit))}var r0=Oe();function Sit(e){return e.type==="category"?Pit(e):Ait(e)}function Tit(e,t){return e.type==="category"?Eit(e,t):{ticks:Ct(e.scale.getTicks(),function(r){return r.value})}}function Pit(e){var t=e.getLabelModel(),r=sB(e,t);return!t.get("show")||e.scale.isBlank()?{labels:[],labelCategoryInterval:r.labelCategoryInterval}:r}function sB(e,t){var r=lB(e,"labels"),n=wE(t),i=uB(r,n);if(i)return i;var o,a;return Ut(n)?o=hB(e,n):(a=n==="auto"?Cit(e):n,o=fB(e,a)),cB(r,n,{labels:o,labelCategoryInterval:a})}function Eit(e,t){var r=lB(e,"ticks"),n=wE(t),i=uB(r,n);if(i)return i;var o,a;if((!t.get("show")||e.scale.isBlank())&&(o=[]),Ut(n))o=hB(e,n,!0);else if(n==="auto"){var s=sB(e,e.getLabelModel());a=s.labelCategoryInterval,o=Ct(s.labels,function(l){return l.tickValue})}else a=n,o=fB(e,a,!0);return cB(r,n,{ticks:o,tickCategoryInterval:a})}function Ait(e){var t=e.scale.getTicks(),r=O0(e);return{labels:Ct(t,function(n,i){return{level:n.level,formattedLabel:r(n,i),rawLabel:e.scale.getLabel(n),tickValue:n.value}})}}function lB(e,t){return r0(e)[t]||(r0(e)[t]=[])}function uB(e,t){for(var r=0;r<e.length;r++)if(e[r].key===t)return e[r].value}function cB(e,t,r){return e.push({key:t,value:r}),r}function Cit(e){var t=r0(e).autoInterval;return t!=null?t:r0(e).autoInterval=e.calculateCategoryInterval()}function Mit(e){var t=kit(e),r=O0(e),n=(t.axisRotate-t.labelRotate)/180*Math.PI,i=e.scale,o=i.getExtent(),a=i.count();if(o[1]-o[0]<1)return 0;var s=1;a>40&&(s=Math.max(1,Math.floor(a/40)));for(var l=o[0],u=e.dataToCoord(l+1)-e.dataToCoord(l),c=Math.abs(u*Math.cos(n)),f=Math.abs(u*Math.sin(n)),h=0,d=0;l<=o[1];l+=s){var p=0,v=0,g=kP(r({value:l}),t.font,"center","top");p=g.width*1.3,v=g.height*1.3,h=Math.max(h,p,7),d=Math.max(d,v,7)}var m=h/c,y=d/f;isNaN(m)&&(m=1/0),isNaN(y)&&(y=1/0);var _=Math.max(0,Math.floor(Math.min(m,y))),b=r0(e.model),T=e.getExtent(),S=b.lastAutoInterval,P=b.lastTickCount;return S!=null&&P!=null&&Math.abs(S-_)<=1&&Math.abs(P-a)<=1&&S>_&&b.axisExtent0===T[0]&&b.axisExtent1===T[1]?_=S:(b.lastTickCount=a,b.lastAutoInterval=_,b.axisExtent0=T[0],b.axisExtent1=T[1]),_}function kit(e){var t=e.getLabelModel();return{axisRotate:e.getRotate?e.getRotate():e.isHorizontal&&!e.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}function fB(e,t,r){var n=O0(e),i=e.scale,o=i.getExtent(),a=e.getLabelModel(),s=[],l=Math.max((t||0)+1,1),u=o[0],c=i.count();u!==0&&l>1&&c/l>2&&(u=Math.round(Math.ceil(u/l)*l));var f=aB(e),h=a.get("showMinLabel")||f,d=a.get("showMaxLabel")||f;h&&u!==o[0]&&v(o[0]);for(var p=u;p<=o[1];p+=l)v(p);d&&p-l!==o[1]&&v(o[1]);function v(g){var m={value:g};s.push(r?g:{formattedLabel:n(m),rawLabel:i.getLabel(m),tickValue:g})}return s}function hB(e,t,r){var n=e.scale,i=O0(e),o=[];return N(n.getTicks(),function(a){var s=n.getLabel(a),l=a.value;t(a.value,s)&&o.push(r?l:{formattedLabel:i(a),rawLabel:s,tickValue:l})}),o}var g6=[0,1],xit=function(){function e(t,r,n){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=r,this._extent=n||[0,0]}return e.prototype.contain=function(t){var r=this._extent,n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return t>=n&&t<=i},e.prototype.containData=function(t){return this.scale.contain(t)},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.getPixelPrecision=function(t){return lK(t||this.scale.getExtent(),this._extent)},e.prototype.setExtent=function(t,r){var n=this._extent;n[0]=t,n[1]=r},e.prototype.dataToCoord=function(t,r){var n=this._extent,i=this.scale;return t=i.normalize(t),this.onBand&&i.type==="ordinal"&&(n=n.slice(),m6(n,i.count())),la(t,g6,n,r)},e.prototype.coordToData=function(t,r){var n=this._extent,i=this.scale;this.onBand&&i.type==="ordinal"&&(n=n.slice(),m6(n,i.count()));var o=la(t,n,g6,r);return this.scale.scale(o)},e.prototype.pointToData=function(t,r){},e.prototype.getTicksCoords=function(t){t=t||{};var r=t.tickModel||this.getTickModel(),n=Tit(this,r),i=n.ticks,o=Ct(i,function(s){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(s):s),tickValue:s}},this),a=r.get("alignWithLabel");return Lit(this,o,a,t.clamp),o},e.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var t=this.model.getModel("minorTick"),r=t.get("splitNumber");r>0&&r<100||(r=5);var n=this.scale.getMinorTicks(r),i=Ct(n,function(o){return Ct(o,function(a){return{coord:this.dataToCoord(a),tickValue:a}},this)},this);return i},e.prototype.getViewLabels=function(){return Sit(this).labels},e.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},e.prototype.getTickModel=function(){return this.model.getModel("axisTick")},e.prototype.getBandWidth=function(){var t=this._extent,r=this.scale.getExtent(),n=r[1]-r[0]+(this.onBand?1:0);n===0&&(n=1);var i=Math.abs(t[1]-t[0]);return Math.abs(i)/n},e.prototype.calculateCategoryInterval=function(){return Mit(this)},e}();function m6(e,t){var r=e[1]-e[0],n=t,i=r/n/2;e[0]+=i,e[1]-=i}function Lit(e,t,r,n){var i=t.length;if(!e.onBand||r||!i)return;var o=e.getExtent(),a,s;if(i===1)t[0].coord=o[0],a=t[1]={coord:o[0]};else{var l=t[i-1].tickValue-t[0].tickValue,u=(t[i-1].coord-t[0].coord)/l;N(t,function(d){d.coord-=u/2});var c=e.scale.getExtent();s=1+c[1]-t[i-1].tickValue,a={coord:t[i-1].coord+u*s},t.push(a)}var f=o[0]>o[1];h(t[0].coord,o[0])&&(n?t[0].coord=o[0]:t.shift()),n&&h(o[0],t[0].coord)&&t.unshift({coord:o[0]}),h(o[1],a.coord)&&(n?a.coord=o[1]:t.pop()),n&&h(a.coord,o[1])&&t.push({coord:o[1]});function h(d,p){return d=qe(d),p=qe(p),f?d>p:d<p}}const Iit=xit;function Oit(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(!n.defaultAttr.ignore){var i=n.label,o=i.getComputedTransform(),a=i.getBoundingRect(),s=!o||o[1]<1e-5&&o[2]<1e-5,l=i.style.margin||0,u=a.clone();u.applyTransform(o),u.x-=l/2,u.y-=l/2,u.width+=l,u.height+=l;var c=s?new km(a,o):null;t.push({label:i,labelLine:n.labelLine,rect:u,localRect:a,obb:c,priority:n.priority,defaultAttr:n.defaultAttr,layoutOption:n.computedLayoutOption,axisAligned:s,transform:o})}}return t}function Rit(e){var t=[];e.sort(function(v,g){return g.priority-v.priority});var r=new ae(0,0,0,0);function n(v){if(!v.ignore){var g=v.ensureState("emphasis");g.ignore==null&&(g.ignore=!1)}v.ignore=!0}for(var i=0;i<e.length;i++){var o=e[i],a=o.axisAligned,s=o.localRect,l=o.transform,u=o.label,c=o.labelLine;r.copy(o.rect),r.width-=.1,r.height-=.1,r.x+=.05,r.y+=.05;for(var f=o.obb,h=!1,d=0;d<t.length;d++){var p=t[d];if(!!r.intersect(p.rect)){if(a&&p.axisAligned){h=!0;break}if(p.obb||(p.obb=new km(p.localRect,p.transform)),f||(f=new km(s,l)),f.intersect(p.obb)){h=!0;break}}}h?(n(u),c&&n(c)):(u.attr("ignore",o.defaultAttr.ignore),c&&c.attr("ignore",o.defaultAttr.labelGuideIgnore),t.push(o))}}function y6(e,t,r){var n=ou.createCanvas(),i=t.getWidth(),o=t.getHeight(),a=n.style;return a&&(a.position="absolute",a.left="0",a.top="0",a.width=i+"px",a.height=o+"px",n.setAttribute("data-zr-dom-id",e)),n.width=i*r,n.height=o*r,n}var Dit=function(e){Ee(t,e);function t(r,n,i){var o=e.call(this)||this;o.motionBlur=!1,o.lastFrameAlpha=.7,o.dpr=1,o.virtual=!1,o.config={},o.incremental=!1,o.zlevel=0,o.maxRepaintRectCount=5,o.__dirty=!0,o.__firstTimePaint=!0,o.__used=!1,o.__drawIndex=0,o.__startIndex=0,o.__endIndex=0,o.__prevStartIndex=null,o.__prevEndIndex=null;var a;i=i||Em,typeof r=="string"?a=y6(r,n,i):It(r)&&(a=r,r=a.id),o.id=r,o.dom=a;var s=a.style;return s&&(B7(a),a.onselectstart=function(){return!1},s.padding="0",s.margin="0",s.borderWidth="0"),o.painter=n,o.dpr=i,o}return t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var r=this.dpr;this.domBack=y6("back-"+this.id,this.painter,r),this.ctxBack=this.domBack.getContext("2d"),r!==1&&this.ctxBack.scale(r,r)},t.prototype.createRepaintRects=function(r,n,i,o){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var a=[],s=this.maxRepaintRectCount,l=!1,u=new ae(0,0,0,0);function c(y){if(!(!y.isFinite()||y.isZero()))if(a.length===0){var _=new ae(0,0,0,0);_.copy(y),a.push(_)}else{for(var b=!1,T=1/0,S=0,P=0;P<a.length;++P){var C=a[P];if(C.intersect(y)){var A=new ae(0,0,0,0);A.copy(C),A.union(y),a[P]=A,b=!0;break}else if(l){u.copy(y),u.union(C);var M=y.width*y.height,k=C.width*C.height,O=u.width*u.height,F=O-M-k;F<T&&(T=F,S=P)}}if(l&&(a[S].union(y),b=!0),!b){var _=new ae(0,0,0,0);_.copy(y),a.push(_)}l||(l=a.length>=s)}}for(var f=this.__startIndex;f<this.__endIndex;++f){var h=r[f];if(h){var d=h.shouldBePainted(i,o,!0,!0),p=h.__isRendered&&(h.__dirty&bn||!d)?h.getPrevPaintRect():null;p&&c(p);var v=d&&(h.__dirty&bn||!h.__isRendered)?h.getPaintRect():null;v&&c(v)}}for(var f=this.__prevStartIndex;f<this.__prevEndIndex;++f){var h=n[f],d=h.shouldBePainted(i,o,!0,!0);if(h&&(!d||!h.__zr)&&h.__isRendered){var p=h.getPrevPaintRect();p&&c(p)}}var g;do{g=!1;for(var f=0;f<a.length;){if(a[f].isZero()){a.splice(f,1);continue}for(var m=f+1;m<a.length;)a[f].intersect(a[m])?(g=!0,a[f].union(a[m]),a.splice(m,1)):m++;f++}}while(g);return this._paintRects=a,a},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(r,n){var i=this.dpr,o=this.dom,a=o.style,s=this.domBack;a&&(a.width=r+"px",a.height=n+"px"),o.width=r*i,o.height=n*i,s&&(s.width=r*i,s.height=n*i,i!==1&&this.ctxBack.scale(i,i))},t.prototype.clear=function(r,n,i){var o=this.dom,a=this.ctx,s=o.width,l=o.height;n=n||this.clearColor;var u=this.motionBlur&&!r,c=this.lastFrameAlpha,f=this.dpr,h=this;u&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(o,0,0,s/f,l/f));var d=this.domBack;function p(v,g,m,y){if(a.clearRect(v,g,m,y),n&&n!=="transparent"){var _=void 0;N1(n)?(_=n.__canvasGradient||r3(a,n,{x:0,y:0,width:m,height:y}),n.__canvasGradient=_):Lq(n)&&(n.scaleX=n.scaleX||f,n.scaleY=n.scaleY||f,_=n3(a,n,{dirty:function(){h.setUnpainted(),h.__painter.refresh()}})),a.save(),a.fillStyle=_||n,a.fillRect(v,g,m,y),a.restore()}u&&(a.save(),a.globalAlpha=c,a.drawImage(d,v,g,m,y),a.restore())}!i||u?p(0,0,s,l):i.length&&N(i,function(v){p(v.x*f,v.y*f,v.width*f,v.height*f)})},t}(Di);const w2=Dit;var _6=1e5,cl=314159,Kp=.01,Nit=.001;function Fit(e){return e?e.__builtin__?!0:!(typeof e.resize!="function"||typeof e.refresh!="function"):!1}function Bit(e,t){var r=document.createElement("div");return r.style.cssText=["position:relative","width:"+e+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",r}var $it=function(){function e(t,r,n,i){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var o=!t.nodeName||t.nodeName.toUpperCase()==="CANVAS";this._opts=n=ot({},n||{}),this.dpr=n.devicePixelRatio||Em,this._singleCanvas=o,this.root=t;var a=t.style;a&&(B7(t),t.innerHTML=""),this.storage=r;var s=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(o){var c=t,f=c.width,h=c.height;n.width!=null&&(f=n.width),n.height!=null&&(h=n.height),this.dpr=n.devicePixelRatio||1,c.width=f*this.dpr,c.height=h*this.dpr,this._width=f,this._height=h;var d=new w2(c,this,this.dpr);d.__builtin__=!0,d.initContext(),l[cl]=d,d.zlevel=cl,s.push(cl),this._domRoot=t}else{this._width=Up(t,0,n),this._height=Up(t,1,n);var u=this._domRoot=Bit(this._width,this._height);t.appendChild(u)}}return e.prototype.getType=function(){return"canvas"},e.prototype.isSingleCanvas=function(){return this._singleCanvas},e.prototype.getViewportRoot=function(){return this._domRoot},e.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},e.prototype.refresh=function(t){var r=this.storage.getDisplayList(!0),n=this._prevDisplayList,i=this._zlevelList;this._redrawId=Math.random(),this._paintList(r,n,t,this._redrawId);for(var o=0;o<i.length;o++){var a=i[o],s=this._layers[a];if(!s.__builtin__&&s.refresh){var l=o===0?this._backgroundColor:null;s.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=r.slice()),this},e.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},e.prototype._paintHoverList=function(t){var r=t.length,n=this._hoverlayer;if(n&&n.clear(),!!r){for(var i={inHover:!0,viewWidth:this._width,viewHeight:this._height},o,a=0;a<r;a++){var s=t[a];s.__inHover&&(n||(n=this._hoverlayer=this.getLayer(_6)),o||(o=n.ctx,o.save()),Ml(o,s,i,a===r-1))}o&&o.restore()}},e.prototype.getHoverLayer=function(){return this.getLayer(_6)},e.prototype.paintOne=function(t,r){yF(t,r)},e.prototype._paintList=function(t,r,n,i){if(this._redrawId===i){n=n||!1,this._updateLayerStatus(t);var o=this._doPaintList(t,r,n),a=o.finished,s=o.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),s&&this._paintHoverList(t),a)this.eachLayer(function(u){u.afterBrush&&u.afterBrush()});else{var l=this;wS(function(){l._paintList(t,r,n,i)})}}},e.prototype._compositeManually=function(){var t=this.getLayer(cl).ctx,r=this._domRoot.width,n=this._domRoot.height;t.clearRect(0,0,r,n),this.eachBuiltinLayer(function(i){i.virtual&&t.drawImage(i.dom,0,0,r,n)})},e.prototype._doPaintList=function(t,r,n){for(var i=this,o=[],a=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var l=this._zlevelList[s],u=this._layers[l];u.__builtin__&&u!==this._hoverlayer&&(u.__dirty||n)&&o.push(u)}for(var c=!0,f=!1,h=function(v){var g=o[v],m=g.ctx,y=a&&g.createRepaintRects(t,r,d._width,d._height),_=n?g.__startIndex:g.__drawIndex,b=!n&&g.incremental&&Date.now,T=b&&Date.now(),S=g.zlevel===d._zlevelList[0]?d._backgroundColor:null;if(g.__startIndex===g.__endIndex)g.clear(!1,S,y);else if(_===g.__startIndex){var P=t[_];(!P.incremental||!P.notClear||n)&&g.clear(!1,S,y)}_===-1&&(console.error("For some unknown reason. drawIndex is -1"),_=g.__startIndex);var C,A=function(F){var z={inHover:!1,allClipped:!1,prevEl:null,viewWidth:i._width,viewHeight:i._height};for(C=_;C<g.__endIndex;C++){var R=t[C];if(R.__inHover&&(f=!0),i._doPaintEl(R,g,a,F,z,C===g.__endIndex-1),b){var j=Date.now()-T;if(j>15)break}}z.prevElClipPaths&&m.restore()};if(y)if(y.length===0)C=g.__endIndex;else for(var M=d.dpr,k=0;k<y.length;++k){var O=y[k];m.save(),m.beginPath(),m.rect(O.x*M,O.y*M,O.width*M,O.height*M),m.clip(),A(O),m.restore()}else m.save(),A(),m.restore();g.__drawIndex=C,g.__drawIndex<g.__endIndex&&(c=!1)},d=this,p=0;p<o.length;p++)h(p);return Xt.wxa&&N(this._layers,function(v){v&&v.ctx&&v.ctx.draw&&v.ctx.draw()}),{finished:c,needsRefreshHover:f}},e.prototype._doPaintEl=function(t,r,n,i,o,a){var s=r.ctx;if(n){var l=t.getPaintRect();(!i||l&&l.intersect(i))&&(Ml(s,t,o,a),t.setPrevPaintRect(l))}else Ml(s,t,o,a)},e.prototype.getLayer=function(t,r){this._singleCanvas&&!this._needsManuallyCompositing&&(t=cl);var n=this._layers[t];return n||(n=new w2("zr_"+t,this,this.dpr),n.zlevel=t,n.__builtin__=!0,this._layerConfig[t]?oe(n,this._layerConfig[t],!0):this._layerConfig[t-Kp]&&oe(n,this._layerConfig[t-Kp],!0),r&&(n.virtual=r),this.insertLayer(t,n),n.initContext()),n},e.prototype.insertLayer=function(t,r){var n=this._layers,i=this._zlevelList,o=i.length,a=this._domRoot,s=null,l=-1;if(!n[t]&&!!Fit(r)){if(o>0&&t>i[0]){for(l=0;l<o-1&&!(i[l]<t&&i[l+1]>t);l++);s=n[i[l]]}if(i.splice(l+1,0,t),n[t]=r,!r.virtual)if(s){var u=s.dom;u.nextSibling?a.insertBefore(r.dom,u.nextSibling):a.appendChild(r.dom)}else a.firstChild?a.insertBefore(r.dom,a.firstChild):a.appendChild(r.dom);r.__painter=this}},e.prototype.eachLayer=function(t,r){for(var n=this._zlevelList,i=0;i<n.length;i++){var o=n[i];t.call(r,this._layers[o],o)}},e.prototype.eachBuiltinLayer=function(t,r){for(var n=this._zlevelList,i=0;i<n.length;i++){var o=n[i],a=this._layers[o];a.__builtin__&&t.call(r,a,o)}},e.prototype.eachOtherLayer=function(t,r){for(var n=this._zlevelList,i=0;i<n.length;i++){var o=n[i],a=this._layers[o];a.__builtin__||t.call(r,a,o)}},e.prototype.getLayers=function(){return this._layers},e.prototype._updateLayerStatus=function(t){this.eachBuiltinLayer(function(f,h){f.__dirty=f.__used=!1});function r(f){o&&(o.__endIndex!==f&&(o.__dirty=!0),o.__endIndex=f)}if(this._singleCanvas)for(var n=1;n<t.length;n++){var i=t[n];if(i.zlevel!==t[n-1].zlevel||i.incremental){this._needsManuallyCompositing=!0;break}}var o=null,a=0,s,l;for(l=0;l<t.length;l++){var i=t[l],u=i.zlevel,c=void 0;s!==u&&(s=u,a=0),i.incremental?(c=this.getLayer(u+Nit,this._needsManuallyCompositing),c.incremental=!0,a=1):c=this.getLayer(u+(a>0?Kp:0),this._needsManuallyCompositing),c.__builtin__||SP("ZLevel "+u+" has been used by unkown layer "+c.id),c!==o&&(c.__used=!0,c.__startIndex!==l&&(c.__dirty=!0),c.__startIndex=l,c.incremental?c.__drawIndex=-1:c.__drawIndex=l,r(l),o=c),i.__dirty&bn&&!i.__inHover&&(c.__dirty=!0,c.incremental&&c.__drawIndex<0&&(c.__drawIndex=l))}r(l),this.eachBuiltinLayer(function(f,h){!f.__used&&f.getElementCount()>0&&(f.__dirty=!0,f.__startIndex=f.__endIndex=f.__drawIndex=0),f.__dirty&&f.__drawIndex<0&&(f.__drawIndex=f.__startIndex)})},e.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},e.prototype._clearLayer=function(t){t.clear()},e.prototype.setBackgroundColor=function(t){this._backgroundColor=t,N(this._layers,function(r){r.setUnpainted()})},e.prototype.configLayer=function(t,r){if(r){var n=this._layerConfig;n[t]?oe(n[t],r,!0):n[t]=r;for(var i=0;i<this._zlevelList.length;i++){var o=this._zlevelList[i];if(o===t||o===t+Kp){var a=this._layers[o];oe(a,n[t],!0)}}}},e.prototype.delLayer=function(t){var r=this._layers,n=this._zlevelList,i=r[t];!i||(i.dom.parentNode.removeChild(i.dom),delete r[t],n.splice(ce(n,t),1))},e.prototype.resize=function(t,r){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var i=this._opts,o=this.root;if(t!=null&&(i.width=t),r!=null&&(i.height=r),t=Up(o,0,i),r=Up(o,1,i),n.style.display="",this._width!==t||r!==this._height){n.style.width=t+"px",n.style.height=r+"px";for(var a in this._layers)this._layers.hasOwnProperty(a)&&this._layers[a].resize(t,r);this.refresh(!0)}this._width=t,this._height=r}else{if(t==null||r==null)return;this._width=t,this._height=r,this.getLayer(cl).resize(t,r)}return this},e.prototype.clearLayer=function(t){var r=this._layers[t];r&&r.clear()},e.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},e.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[cl].dom;var r=new w2("image",this,t.pixelRatio||this.dpr);r.initContext(),r.clear(!1,t.backgroundColor||this._backgroundColor);var n=r.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var i=r.dom.width,o=r.dom.height;this.eachLayer(function(f){f.__builtin__?n.drawImage(f.dom,0,0,i,o):f.renderToCanvas&&(n.save(),f.renderToCanvas(n),n.restore())})}else for(var a={inHover:!1,viewWidth:this._width,viewHeight:this._height},s=this.storage.getDisplayList(!0),l=0,u=s.length;l<u;l++){var c=s[l];Ml(n,c,a,l===u-1)}return r.dom},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e}();const zit=$it;function hf(e){e.registerPainter("canvas",zit)}var Vit=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r){return L0(null,this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(r){var n=new De,i=Li("line",0,r.itemHeight/2,r.itemWidth,0,r.lineStyle.stroke,!1);n.add(i),i.setStyle(r.lineStyle);var o=this.getData().getVisual("symbol"),a=this.getData().getVisual("symbolRotate"),s=o==="none"?"circle":o,l=r.itemHeight*.8,u=Li(s,(r.itemWidth-l)/2,(r.itemHeight-l)/2,l,l,r.itemStyle.fill);n.add(u),u.setStyle(r.itemStyle);var c=r.iconRotate==="inherit"?a:r.iconRotate||0;return u.rotation=c*Math.PI/180,u.setOrigin([r.itemWidth/2,r.itemHeight/2]),s.indexOf("empty")>-1&&(u.style.stroke=u.style.fill,u.style.fill="#fff",u.style.lineWidth=2),n},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},t}(To);const Uit=Vit;function n0(e,t){var r=e.mapDimensionsAll("defaultedLabel"),n=r.length;if(n===1){var i=jc(e,t,r[0]);return i!=null?i+"":null}else if(n){for(var o=[],a=0;a<r.length;a++)o.push(jc(e,t,r[a]));return o.join(" ")}}function dB(e,t){var r=e.mapDimensionsAll("defaultedLabel");if(!ut(t))return t+"";for(var n=[],i=0;i<r.length;i++){var o=e.getDimensionIndex(r[i]);o>=0&&n.push(t[o])}return n.join(" ")}var Git=function(e){mt(t,e);function t(r,n,i,o){var a=e.call(this)||this;return a.updateData(r,n,i,o),a}return t.prototype._createSymbol=function(r,n,i,o,a){this.removeAll();var s=Li(r,-1,-1,2,2,null,a);s.attr({z2:100,culling:!0,scaleX:o[0]/2,scaleY:o[1]/2}),s.drift=jit,this._symbolType=r,this.add(s)},t.prototype.stopSymbolAnimation=function(r){this.childAt(0).stopAnimation(null,r)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){Wd(this.childAt(0))},t.prototype.downplay=function(){Hd(this.childAt(0))},t.prototype.setZ=function(r,n){var i=this.childAt(0);i.zlevel=r,i.z=n},t.prototype.setDraggable=function(r,n){var i=this.childAt(0);i.draggable=r,i.cursor=!n&&r?"move":i.cursor},t.prototype.updateData=function(r,n,i,o){this.silent=!1;var a=r.getItemVisual(n,"symbol")||"circle",s=r.hostModel,l=t.getSymbolSize(r,n),u=a!==this._symbolType,c=o&&o.disableAnimation;if(u){var f=r.getItemVisual(n,"symbolKeepAspect");this._createSymbol(a,r,n,l,f)}else{var h=this.childAt(0);h.silent=!1;var d={scaleX:l[0]/2,scaleY:l[1]/2};c?h.attr(d):hr(h,d,s,n),nN(h)}if(this._updateCommon(r,n,l,i,o),u){var h=this.childAt(0);if(!c){var d={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:h.style.opacity}};h.scaleX=h.scaleY=0,h.style.opacity=0,So(h,d,s,n)}}c&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(r,n,i,o,a){var s=this.childAt(0),l=r.hostModel,u,c,f,h,d,p,v,g,m;if(o&&(u=o.emphasisItemStyle,c=o.blurItemStyle,f=o.selectItemStyle,h=o.focus,d=o.blurScope,v=o.labelStatesModels,g=o.hoverScale,m=o.cursorStyle,p=o.emphasisDisabled),!o||r.hasItemOption){var y=o&&o.itemModel?o.itemModel:r.getItemModel(n),_=y.getModel("emphasis");u=_.getModel("itemStyle").getItemStyle(),f=y.getModel(["select","itemStyle"]).getItemStyle(),c=y.getModel(["blur","itemStyle"]).getItemStyle(),h=_.get("focus"),d=_.get("blurScope"),p=_.get("disabled"),v=lu(y),g=_.getShallow("scale"),m=y.getShallow("cursor")}var b=r.getItemVisual(n,"symbolRotate");s.attr("rotation",(b||0)*Math.PI/180||0);var T=fE(r.getItemVisual(n,"symbolOffset"),i);T&&(s.x=T[0],s.y=T[1]),m&&s.attr("cursor",m);var S=r.getItemVisual(n,"style"),P=S.fill;if(s instanceof ma){var C=s.style;s.useStyle(ot({image:C.image,x:C.x,y:C.y,width:C.width,height:C.height},S))}else s.__isEmptyBrush?s.useStyle(ot({},S)):s.useStyle(S),s.style.decal=null,s.setColor(P,a&&a.symbolInnerColor),s.style.strokeNoScale=!0;var A=r.getItemVisual(n,"liftZ"),M=this._z2;A!=null?M==null&&(this._z2=s.z2,s.z2+=A):M!=null&&(s.z2=M,this._z2=null);var k=a&&a.useNameLabel;uf(s,v,{labelFetcher:l,labelDataIndex:n,defaultText:O,inheritColor:P,defaultOpacity:S.opacity});function O(R){return k?r.getName(R):n0(r,R)}this._sizeX=i[0]/2,this._sizeY=i[1]/2;var F=s.ensureState("emphasis");F.style=u,s.ensureState("select").style=f,s.ensureState("blur").style=c;var z=g==null||g===!0?Math.max(1.1,3/this._sizeY):isFinite(g)&&g>0?+g:1;F.scaleX=this._sizeX*z,F.scaleY=this._sizeY*z,this.setSymbolScale(1),ql(this,h,d,p)},t.prototype.setSymbolScale=function(r){this.scaleX=this.scaleY=r},t.prototype.fadeOut=function(r,n,i){var o=this.childAt(0),a=ie(this).dataIndex,s=i&&i.animation;if(this.silent=o.silent=!0,i&&i.fadeLabel){var l=o.getTextContent();l&&Zl(l,{style:{opacity:0}},n,{dataIndex:a,removeOpt:s,cb:function(){o.removeTextContent()}})}else o.removeTextContent();Zl(o,{style:{opacity:0},scaleX:0,scaleY:0},n,{dataIndex:a,cb:r,removeOpt:s})},t.getSymbolSize=function(r,n){return pF(r.getItemVisual(n,"symbolSize"))},t}(De);function jit(e,t){this.parent.drift(e,t)}const fy=Git;function S2(e,t,r,n){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(n.isIgnore&&n.isIgnore(r))&&!(n.clipShape&&!n.clipShape.contain(t[0],t[1]))&&e.getItemVisual(r,"symbol")!=="none"}function b6(e){return e!=null&&!It(e)&&(e={isIgnore:e}),e||{}}function w6(e){var t=e.hostModel,r=t.getModel("emphasis");return{emphasisItemStyle:r.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:r.get("focus"),blurScope:r.get("blurScope"),emphasisDisabled:r.get("disabled"),hoverScale:r.get("scale"),labelStatesModels:lu(t),cursorStyle:t.get("cursor")}}var Wit=function(){function e(t){this.group=new De,this._SymbolCtor=t||fy}return e.prototype.updateData=function(t,r){this._progressiveEls=null,r=b6(r);var n=this.group,i=t.hostModel,o=this._data,a=this._SymbolCtor,s=r.disableAnimation,l=w6(t),u={disableAnimation:s},c=r.getSymbolPoint||function(f){return t.getItemLayout(f)};o||n.removeAll(),t.diff(o).add(function(f){var h=c(f);if(S2(t,h,f,r)){var d=new a(t,f,l,u);d.setPosition(h),t.setItemGraphicEl(f,d),n.add(d)}}).update(function(f,h){var d=o.getItemGraphicEl(h),p=c(f);if(!S2(t,p,f,r)){n.remove(d);return}var v=t.getItemVisual(f,"symbol")||"circle",g=d&&d.getSymbolType&&d.getSymbolType();if(!d||g&&g!==v)n.remove(d),d=new a(t,f,l,u),d.setPosition(p);else{d.updateData(t,f,l,u);var m={x:p[0],y:p[1]};s?d.attr(m):hr(d,m,i)}n.add(d),t.setItemGraphicEl(f,d)}).remove(function(f){var h=o.getItemGraphicEl(f);h&&h.fadeOut(function(){n.remove(h)},i)}).execute(),this._getSymbolPoint=c,this._data=t},e.prototype.updateLayout=function(){var t=this,r=this._data;r&&r.eachItemGraphicEl(function(n,i){var o=t._getSymbolPoint(i);n.setPosition(o),n.markRedraw()})},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=w6(t),this._data=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,r,n){this._progressiveEls=[],n=b6(n);function i(l){l.isGroup||(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var o=t.start;o<t.end;o++){var a=r.getItemLayout(o);if(S2(r,a,o,n)){var s=new this._SymbolCtor(r,o,this._seriesScope);s.traverse(i),s.setPosition(a),this.group.add(s),r.setItemGraphicEl(o,s),this._progressiveEls.push(s)}}},e.prototype.eachRendered=function(t){lf(this._progressiveEls||this.group,t)},e.prototype.remove=function(t){var r=this.group,n=this._data;n&&t?n.eachItemGraphicEl(function(i){i.fadeOut(function(){r.remove(i)},n.hostModel)}):r.removeAll()},e}();const pB=Wit;function vB(e,t,r){var n=e.getBaseAxis(),i=e.getOtherAxis(n),o=Hit(i,r),a=n.dim,s=i.dim,l=t.mapDimension(s),u=t.mapDimension(a),c=s==="x"||s==="radius"?1:0,f=Ct(e.dimensions,function(p){return t.mapDimension(p)}),h=!1,d=t.getCalculationInfo("stackResultDimension");return Jl(t,f[0])&&(h=!0,f[0]=d),Jl(t,f[1])&&(h=!0,f[1]=d),{dataDimsForPoint:f,valueStart:o,valueAxisDim:s,baseAxisDim:a,stacked:!!h,valueDim:l,baseDim:u,baseDataOffset:c,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function Hit(e,t){var r=0,n=e.scale.getExtent();return t==="start"?r=n[0]:t==="end"?r=n[1]:be(t)&&!isNaN(t)?r=t:n[0]>0?r=n[0]:n[1]<0&&(r=n[1]),r}function gB(e,t,r,n){var i=NaN;e.stacked&&(i=r.get(r.getCalculationInfo("stackedOverDimension"),n)),isNaN(i)&&(i=e.valueStart);var o=e.baseDataOffset,a=[];return a[o]=r.get(e.baseDim,n),a[1-o]=i,t.dataToPoint(a)}function Xit(e,t){var r=[];return t.diff(e).add(function(n){r.push({cmd:"+",idx:n})}).update(function(n,i){r.push({cmd:"=",idx:i,idx1:n})}).remove(function(n){r.push({cmd:"-",idx:n})}).execute(),r}function Yit(e,t,r,n,i,o,a,s){for(var l=Xit(e,t),u=[],c=[],f=[],h=[],d=[],p=[],v=[],g=vB(i,t,a),m=e.getLayout("points")||[],y=t.getLayout("points")||[],_=0;_<l.length;_++){var b=l[_],T=!0,S=void 0,P=void 0;switch(b.cmd){case"=":S=b.idx*2,P=b.idx1*2;var C=m[S],A=m[S+1],M=y[P],k=y[P+1];(isNaN(C)||isNaN(A))&&(C=M,A=k),u.push(C,A),c.push(M,k),f.push(r[S],r[S+1]),h.push(n[P],n[P+1]),v.push(t.getRawIndex(b.idx1));break;case"+":var O=b.idx,F=g.dataDimsForPoint,z=i.dataToPoint([t.get(F[0],O),t.get(F[1],O)]);P=O*2,u.push(z[0],z[1]),c.push(y[P],y[P+1]);var R=gB(g,i,t,O);f.push(R[0],R[1]),h.push(n[P],n[P+1]),v.push(t.getRawIndex(O));break;case"-":T=!1}T&&(d.push(b),p.push(p.length))}p.sort(function(Y,nt){return v[Y]-v[nt]});for(var j=u.length,Z=Qo(j),q=Qo(j),tt=Qo(j),Pt=Qo(j),Ot=[],_=0;_<p.length;_++){var bt=p[_],wt=_*2,Ht=bt*2;Z[wt]=u[Ht],Z[wt+1]=u[Ht+1],q[wt]=c[Ht],q[wt+1]=c[Ht+1],tt[wt]=f[Ht],tt[wt+1]=f[Ht+1],Pt[wt]=h[Ht],Pt[wt+1]=h[Ht+1],Ot[_]=d[bt]}return{current:Z,next:q,stackedOnCurrent:tt,stackedOnNext:Pt,status:Ot}}var Oa=Math.min,Ra=Math.max;function Bl(e,t){return isNaN(e)||isNaN(t)}function c3(e,t,r,n,i,o,a,s,l){for(var u,c,f,h,d,p,v=r,g=0;g<n;g++){var m=t[v*2],y=t[v*2+1];if(v>=i||v<0)break;if(Bl(m,y)){if(l){v+=o;continue}break}if(v===r)e[o>0?"moveTo":"lineTo"](m,y),f=m,h=y;else{var _=m-u,b=y-c;if(_*_+b*b<.5){v+=o;continue}if(a>0){for(var T=v+o,S=t[T*2],P=t[T*2+1];S===m&&P===y&&g<n;)g++,T+=o,v+=o,S=t[T*2],P=t[T*2+1],m=t[v*2],y=t[v*2+1],_=m-u,b=y-c;var C=g+1;if(l)for(;Bl(S,P)&&C<n;)C++,T+=o,S=t[T*2],P=t[T*2+1];var A=.5,M=0,k=0,O=void 0,F=void 0;if(C>=n||Bl(S,P))d=m,p=y;else{M=S-u,k=P-c;var z=m-u,R=S-m,j=y-c,Z=P-y,q=void 0,tt=void 0;if(s==="x"){q=Math.abs(z),tt=Math.abs(R);var Pt=M>0?1:-1;d=m-Pt*q*a,p=y,O=m+Pt*tt*a,F=y}else if(s==="y"){q=Math.abs(j),tt=Math.abs(Z);var Ot=k>0?1:-1;d=m,p=y-Ot*q*a,O=m,F=y+Ot*tt*a}else q=Math.sqrt(z*z+j*j),tt=Math.sqrt(R*R+Z*Z),A=tt/(tt+q),d=m-M*a*(1-A),p=y-k*a*(1-A),O=m+M*a*A,F=y+k*a*A,O=Oa(O,Ra(S,m)),F=Oa(F,Ra(P,y)),O=Ra(O,Oa(S,m)),F=Ra(F,Oa(P,y)),M=O-m,k=F-y,d=m-M*q/tt,p=y-k*q/tt,d=Oa(d,Ra(u,m)),p=Oa(p,Ra(c,y)),d=Ra(d,Oa(u,m)),p=Ra(p,Oa(c,y)),M=m-d,k=y-p,O=m+M*tt/q,F=y+k*tt/q}e.bezierCurveTo(f,h,d,p,m,y),f=O,h=F}else e.lineTo(m,y)}u=m,c=y,v+=o}return g}var mB=function(){function e(){this.smooth=0,this.smoothConstraint=!0}return e}(),qit=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="ec-polyline",n}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new mB},t.prototype.buildPath=function(r,n){var i=n.points,o=0,a=i.length/2;if(n.connectNulls){for(;a>0&&Bl(i[a*2-2],i[a*2-1]);a--);for(;o<a&&Bl(i[o*2],i[o*2+1]);o++);}for(;o<a;)o+=c3(r,i,o,a,a,1,n.smooth,n.smoothMonotone,n.connectNulls)+1},t.prototype.getPointOn=function(r,n){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var i=this.path,o=i.data,a=Yl.CMD,s,l,u=n==="x",c=[],f=0;f<o.length;){var h=o[f++],d=void 0,p=void 0,v=void 0,g=void 0,m=void 0,y=void 0,_=void 0;switch(h){case a.M:s=o[f++],l=o[f++];break;case a.L:if(d=o[f++],p=o[f++],_=u?(r-s)/(d-s):(r-l)/(p-l),_<=1&&_>=0){var b=u?(p-l)*_+l:(d-s)*_+s;return u?[r,b]:[b,r]}s=d,l=p;break;case a.C:d=o[f++],p=o[f++],v=o[f++],g=o[f++],m=o[f++],y=o[f++];var T=u?wm(s,d,v,m,r,c):wm(l,p,g,y,r,c);if(T>0)for(var S=0;S<T;S++){var P=c[S];if(P<=1&&P>=0){var b=u?or(l,p,g,y,P):or(s,d,v,m,P);return u?[r,b]:[b,r]}}s=m,l=y;break}}},t}(he),Zit=function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(mB),Kit=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="ec-polygon",n}return t.prototype.getDefaultShape=function(){return new Zit},t.prototype.buildPath=function(r,n){var i=n.points,o=n.stackedOnPoints,a=0,s=i.length/2,l=n.smoothMonotone;if(n.connectNulls){for(;s>0&&Bl(i[s*2-2],i[s*2-1]);s--);for(;a<s&&Bl(i[a*2],i[a*2+1]);a++);}for(;a<s;){var u=c3(r,i,a,s,s,1,n.smooth,l,n.connectNulls);c3(r,o,a+u-1,u,s,-1,n.stackedOnSmooth,l,n.connectNulls),a+=u+1,r.closePath()}},t}(he);function yB(e,t,r,n,i){var o=e.getArea(),a=o.x,s=o.y,l=o.width,u=o.height,c=r.get(["lineStyle","width"])||2;a-=c/2,s-=c/2,l+=c,u+=c,a=Math.floor(a),l=Math.round(l);var f=new Ke({shape:{x:a,y:s,width:l,height:u}});if(t){var h=e.getBaseAxis(),d=h.isHorizontal(),p=h.inverse;d?(p&&(f.shape.x+=l),f.shape.width=0):(p||(f.shape.y+=u),f.shape.height=0);var v=Ut(i)?function(g){i(g,f)}:null;So(f,{shape:{width:l,height:u,x:a,y:s}},r,null,n,v)}return f}function _B(e,t,r){var n=e.getArea(),i=qe(n.r0,1),o=qe(n.r,1),a=new k0({shape:{cx:qe(e.cx,1),cy:qe(e.cy,1),r0:i,r:o,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}});if(t){var s=e.getBaseAxis().dim==="angle";s?a.shape.endAngle=n.startAngle:a.shape.r=i,So(a,{shape:{endAngle:n.endAngle,r:o}},r)}return a}function bB(e,t,r,n,i){if(e){if(e.type==="polar")return _B(e,t,r);if(e.type==="cartesian2d")return yB(e,t,r,n,i)}else return null;return null}function df(e,t){return e.type===t}function S6(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return;return!0}}function T6(e){for(var t=1/0,r=1/0,n=-1/0,i=-1/0,o=0;o<e.length;){var a=e[o++],s=e[o++];isNaN(a)||(t=Math.min(a,t),n=Math.max(a,n)),isNaN(s)||(r=Math.min(s,r),i=Math.max(s,i))}return[[t,r],[n,i]]}function P6(e,t){var r=T6(e),n=r[0],i=r[1],o=T6(t),a=o[0],s=o[1];return Math.max(Math.abs(n[0]-a[0]),Math.abs(n[1]-a[1]),Math.abs(i[0]-s[0]),Math.abs(i[1]-s[1]))}function E6(e){return be(e)?e:e?.5:0}function Jit(e,t,r){if(!r.valueDim)return[];for(var n=t.count(),i=Qo(n*2),o=0;o<n;o++){var a=gB(r,e,t,o);i[o*2]=a[0],i[o*2+1]=a[1]}return i}function Da(e,t,r,n){var i=t.getBaseAxis(),o=i.dim==="x"||i.dim==="radius"?0:1,a=[],s=0,l=[],u=[],c=[],f=[];if(n){for(s=0;s<e.length;s+=2)!isNaN(e[s])&&!isNaN(e[s+1])&&f.push(e[s],e[s+1]);e=f}for(s=0;s<e.length-2;s+=2)switch(c[0]=e[s+2],c[1]=e[s+3],u[0]=e[s],u[1]=e[s+1],a.push(u[0],u[1]),r){case"end":l[o]=c[o],l[1-o]=u[1-o],a.push(l[0],l[1]);break;case"middle":var h=(u[o]+c[o])/2,d=[];l[o]=d[o]=h,l[1-o]=u[1-o],d[1-o]=c[1-o],a.push(l[0],l[1]),a.push(d[0],d[1]);break;default:l[o]=u[o],l[1-o]=c[1-o],a.push(l[0],l[1])}return a.push(e[s++],e[s++]),a}function Qit(e,t){var r=[],n=e.length,i,o;function a(c,f,h){var d=c.coord,p=(h-d)/(f.coord-d),v=kZ(p,[c.color,f.color]);return{coord:h,color:v}}for(var s=0;s<n;s++){var l=e[s],u=l.coord;if(u<0)i=l;else if(u>t){o?r.push(a(o,l,t)):i&&r.push(a(i,l,0),a(i,l,t));break}else i&&(r.push(a(i,l,0)),i=null),r.push(l),o=l}return r}function tot(e,t,r){var n=e.getVisual("visualMeta");if(!(!n||!n.length||!e.count())&&t.type==="cartesian2d"){for(var i,o,a=n.length-1;a>=0;a--){var s=e.getDimensionInfo(n[a].dimension);if(i=s&&s.coordDim,i==="x"||i==="y"){o=n[a];break}}if(!!o){var l=t.getAxis(i),u=Ct(o.stops,function(_){return{coord:l.toGlobalCoord(l.dataToCoord(_.value)),color:_.color}}),c=u.length,f=o.outerColors.slice();c&&u[0].coord>u[c-1].coord&&(u.reverse(),f.reverse());var h=Qit(u,i==="x"?r.getWidth():r.getHeight()),d=h.length;if(!d&&c)return u[0].coord<0?f[1]?f[1]:u[c-1].color:f[0]?f[0]:u[0].color;var p=10,v=h[0].coord-p,g=h[d-1].coord+p,m=g-v;if(m<.001)return"transparent";N(h,function(_){_.offset=(_.coord-v)/m}),h.push({offset:d?h[d-1].offset:.5,color:f[1]||"transparent"}),h.unshift({offset:d?h[0].offset:.5,color:f[0]||"transparent"});var y=new WP(0,0,0,0,h,!0);return y[i]=v,y[i+"2"]=g,y}}}function eot(e,t,r){var n=e.get("showAllSymbol"),i=n==="auto";if(!(n&&!i)){var o=r.getAxesByScale("ordinal")[0];if(!!o&&!(i&&rot(o,t))){var a=t.mapDimension(o.dim),s={};return N(o.getViewLabels(),function(l){var u=o.scale.getRawOrdinalNumber(l.tickValue);s[u]=1}),function(l){return!s.hasOwnProperty(t.get(a,l))}}}}function rot(e,t){var r=e.getExtent(),n=Math.abs(r[1]-r[0])/e.scale.count();isNaN(n)&&(n=0);for(var i=t.count(),o=Math.max(1,Math.round(i/5)),a=0;a<i;a+=o)if(fy.getSymbolSize(t,a)[e.isHorizontal()?1:0]*1.5>n)return!1;return!0}function not(e,t){return isNaN(e)||isNaN(t)}function iot(e){for(var t=e.length/2;t>0&&not(e[t*2-2],e[t*2-1]);t--);return t-1}function A6(e,t){return[e[t*2],e[t*2+1]]}function oot(e,t,r){for(var n=e.length/2,i=r==="x"?0:1,o,a,s=0,l=-1,u=0;u<n;u++)if(a=e[u*2+i],!(isNaN(a)||isNaN(e[u*2+1-i]))){if(u===0){o=a;continue}if(o<=t&&a>=t||o>=t&&a<=t){l=u;break}s=u,o=a}return{range:[s,l],t:(t-o)/(a-o)}}function wB(e){if(e.get(["endLabel","show"]))return!0;for(var t=0;t<Jn.length;t++)if(e.get([Jn[t],"endLabel","show"]))return!0;return!1}function T2(e,t,r,n){if(df(t,"cartesian2d")){var i=n.getModel("endLabel"),o=i.get("valueAnimation"),a=n.getData(),s={lastFrameIndex:0},l=wB(n)?function(d,p){e._endLabelOnDuring(d,p,a,s,o,i,t)}:null,u=t.getBaseAxis().isHorizontal(),c=yB(t,r,n,function(){var d=e._endLabel;d&&r&&s.originalX!=null&&d.attr({x:s.originalX,y:s.originalY})},l);if(!n.get("clip",!0)){var f=c.shape,h=Math.max(f.width,f.height);u?(f.y-=h,f.height+=h*2):(f.x-=h,f.width+=h*2)}return l&&l(1,c),c}else return _B(t,r,n)}function aot(e,t){var r=t.getBaseAxis(),n=r.isHorizontal(),i=r.inverse,o=n?i?"right":"left":"center",a=n?"middle":i?"top":"bottom";return{normal:{align:e.get("align")||o,verticalAlign:e.get("verticalAlign")||a}}}var sot=function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(){var r=new De,n=new pB;this.group.add(n.group),this._symbolDraw=n,this._lineGroup=r},t.prototype.render=function(r,n,i){var o=this,a=r.coordinateSystem,s=this.group,l=r.getData(),u=r.getModel("lineStyle"),c=r.getModel("areaStyle"),f=l.getLayout("points")||[],h=a.type==="polar",d=this._coordSys,p=this._symbolDraw,v=this._polyline,g=this._polygon,m=this._lineGroup,y=r.get("animation"),_=!c.isEmpty(),b=c.get("origin"),T=vB(a,l,b),S=_&&Jit(a,l,T),P=r.get("showSymbol"),C=r.get("connectNulls"),A=P&&!h&&eot(r,l,a),M=this._data;M&&M.eachItemGraphicEl(function(nt,K){nt.__temp&&(s.remove(nt),M.setItemGraphicEl(K,null))}),P||p.remove(),s.add(m);var k=h?!1:r.get("step"),O;a&&a.getArea&&r.get("clip",!0)&&(O=a.getArea(),O.width!=null?(O.x-=.1,O.y-=.1,O.width+=.2,O.height+=.2):O.r0&&(O.r0-=.5,O.r+=.5)),this._clipShapeForSymbol=O;var F=tot(l,a,i)||l.getVisual("style")[l.getVisual("drawType")];if(!(v&&d.type===a.type&&k===this._step))P&&p.updateData(l,{isIgnore:A,clipShape:O,disableAnimation:!0,getSymbolPoint:function(nt){return[f[nt*2],f[nt*2+1]]}}),y&&this._initSymbolLabelAnimation(l,a,O),k&&(f=Da(f,a,k,C),S&&(S=Da(S,a,k,C))),v=this._newPolyline(f),_?g=this._newPolygon(f,S):g&&(m.remove(g),g=this._polygon=null),h||this._initOrUpdateEndLabel(r,a,Kl(F)),m.setClipPath(T2(this,a,!0,r));else{_&&!g?g=this._newPolygon(f,S):g&&!_&&(m.remove(g),g=this._polygon=null),h||this._initOrUpdateEndLabel(r,a,Kl(F));var z=m.getClipPath();if(z){var R=T2(this,a,!1,r);So(z,{shape:R.shape},r)}else m.setClipPath(T2(this,a,!0,r));P&&p.updateData(l,{isIgnore:A,clipShape:O,disableAnimation:!0,getSymbolPoint:function(nt){return[f[nt*2],f[nt*2+1]]}}),(!S6(this._stackedOnPoints,S)||!S6(this._points,f))&&(y?this._doUpdateAnimation(l,S,a,i,k,b,C):(k&&(f=Da(f,a,k,C),S&&(S=Da(S,a,k,C))),v.setShape({points:f}),g&&g.setShape({points:f,stackedOnPoints:S})))}var j=r.getModel("emphasis"),Z=j.get("focus"),q=j.get("blurScope"),tt=j.get("disabled");if(v.useStyle(te(u.getLineStyle(),{fill:"none",stroke:F,lineJoin:"bevel"})),Xd(v,r,"lineStyle"),v.style.lineWidth>0&&r.get(["emphasis","lineStyle","width"])==="bolder"){var Pt=v.getState("emphasis").style;Pt.lineWidth=+v.style.lineWidth+1}ie(v).seriesIndex=r.seriesIndex,ql(v,Z,q,tt);var Ot=E6(r.get("smooth")),bt=r.get("smoothMonotone");if(v.setShape({smooth:Ot,smoothMonotone:bt,connectNulls:C}),g){var wt=l.getCalculationInfo("stackedOnSeries"),Ht=0;g.useStyle(te(c.getAreaStyle(),{fill:F,opacity:.7,lineJoin:"bevel",decal:l.getVisual("style").decal})),wt&&(Ht=E6(wt.get("smooth"))),g.setShape({smooth:Ot,stackedOnSmooth:Ht,smoothMonotone:bt,connectNulls:C}),Xd(g,r,"areaStyle"),ie(g).seriesIndex=r.seriesIndex,ql(g,Z,q,tt)}var Y=function(nt){o._changePolyState(nt)};l.eachItemGraphicEl(function(nt){nt&&(nt.onHoverStateChange=Y)}),this._polyline.onHoverStateChange=Y,this._data=l,this._coordSys=a,this._stackedOnPoints=S,this._points=f,this._step=k,this._valueOrigin=b,r.get("triggerLineEvent")&&(this.packEventData(r,v),g&&this.packEventData(r,g))},t.prototype.packEventData=function(r,n){ie(n).eventData={componentType:"series",componentSubType:"line",componentIndex:r.componentIndex,seriesIndex:r.seriesIndex,seriesName:r.name,seriesType:"line"}},t.prototype.highlight=function(r,n,i,o){var a=r.getData(),s=Xl(a,o);if(this._changePolyState("emphasis"),!(s instanceof Array)&&s!=null&&s>=0){var l=a.getLayout("points"),u=a.getItemGraphicEl(s);if(!u){var c=l[s*2],f=l[s*2+1];if(isNaN(c)||isNaN(f)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(c,f))return;var h=r.get("zlevel")||0,d=r.get("z")||0;u=new fy(a,s),u.x=c,u.y=f,u.setZ(h,d);var p=u.getSymbolPath().getTextContent();p&&(p.zlevel=h,p.z=d,p.z2=this._polyline.z2+1),u.__temp=!0,a.setItemGraphicEl(s,u),u.stopSymbolAnimation(!0),this.group.add(u)}u.highlight()}else Yn.prototype.highlight.call(this,r,n,i,o)},t.prototype.downplay=function(r,n,i,o){var a=r.getData(),s=Xl(a,o);if(this._changePolyState("normal"),s!=null&&s>=0){var l=a.getItemGraphicEl(s);l&&(l.__temp?(a.setItemGraphicEl(s,null),this.group.remove(l)):l.downplay())}else Yn.prototype.downplay.call(this,r,n,i,o)},t.prototype._changePolyState=function(r){var n=this._polygon;BS(this._polyline,r),n&&BS(n,r)},t.prototype._newPolyline=function(r){var n=this._polyline;return n&&this._lineGroup.remove(n),n=new qit({shape:{points:r},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(n),this._polyline=n,n},t.prototype._newPolygon=function(r,n){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new Kit({shape:{points:r,stackedOnPoints:n},segmentIgnoreThreshold:2}),this._lineGroup.add(i),this._polygon=i,i},t.prototype._initSymbolLabelAnimation=function(r,n,i){var o,a,s=n.getBaseAxis(),l=s.inverse;n.type==="cartesian2d"?(o=s.isHorizontal(),a=!1):n.type==="polar"&&(o=s.dim==="angle",a=!0);var u=r.hostModel,c=u.get("animationDuration");Ut(c)&&(c=c(null));var f=u.get("animationDelay")||0,h=Ut(f)?f(null):f;r.eachItemGraphicEl(function(d,p){var v=d;if(v){var g=[d.x,d.y],m=void 0,y=void 0,_=void 0;if(i)if(a){var b=i,T=n.pointToCoord(g);o?(m=b.startAngle,y=b.endAngle,_=-T[1]/180*Math.PI):(m=b.r0,y=b.r,_=T[0])}else{var S=i;o?(m=S.x,y=S.x+S.width,_=d.x):(m=S.y+S.height,y=S.y,_=d.y)}var P=y===m?0:(_-m)/(y-m);l&&(P=1-P);var C=Ut(f)?f(p):c*P+h,A=v.getSymbolPath(),M=A.getTextContent();v.attr({scaleX:0,scaleY:0}),v.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:C}),M&&M.animateFrom({style:{opacity:0}},{duration:300,delay:C}),A.disableLabelAnimation=!0}})},t.prototype._initOrUpdateEndLabel=function(r,n,i){var o=r.getModel("endLabel");if(wB(r)){var a=r.getData(),s=this._polyline,l=a.getLayout("points");if(!l){s.removeTextContent(),this._endLabel=null;return}var u=this._endLabel;u||(u=this._endLabel=new Je({z2:200}),u.ignoreClip=!0,s.setTextContent(this._endLabel),s.disableLabelAnimation=!0);var c=iot(l);c>=0&&(uf(s,lu(r,"endLabel"),{inheritColor:i,labelFetcher:r,labelDataIndex:c,defaultText:function(f,h,d){return d!=null?dB(a,d):n0(a,f)},enableTextSetter:!0},aot(o,n)),s.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(r,n,i,o,a,s,l){var u=this._endLabel,c=this._polyline;if(u){r<1&&o.originalX==null&&(o.originalX=u.x,o.originalY=u.y);var f=i.getLayout("points"),h=i.hostModel,d=h.get("connectNulls"),p=s.get("precision"),v=s.get("distance")||0,g=l.getBaseAxis(),m=g.isHorizontal(),y=g.inverse,_=n.shape,b=y?m?_.x:_.y+_.height:m?_.x+_.width:_.y,T=(m?v:0)*(y?-1:1),S=(m?0:-v)*(y?-1:1),P=m?"x":"y",C=oot(f,b,P),A=C.range,M=A[1]-A[0],k=void 0;if(M>=1){if(M>1&&!d){var O=A6(f,A[0]);u.attr({x:O[0]+T,y:O[1]+S}),a&&(k=h.getRawValue(A[0]))}else{var O=c.getPointOn(b,P);O&&u.attr({x:O[0]+T,y:O[1]+S});var F=h.getRawValue(A[0]),z=h.getRawValue(A[1]);a&&(k=MK(i,p,F,z,C.t))}o.lastFrameIndex=A[0]}else{var R=r===1||o.lastFrameIndex>0?A[0]:0,O=A6(f,R);a&&(k=h.getRawValue(R)),u.attr({x:O[0]+T,y:O[1]+S})}a&&X1(u).setLabelText(k)}},t.prototype._doUpdateAnimation=function(r,n,i,o,a,s,l){var u=this._polyline,c=this._polygon,f=r.hostModel,h=Yit(this._data,r,this._stackedOnPoints,n,this._coordSys,i,this._valueOrigin),d=h.current,p=h.stackedOnCurrent,v=h.next,g=h.stackedOnNext;if(a&&(d=Da(h.current,i,a,l),p=Da(h.stackedOnCurrent,i,a,l),v=Da(h.next,i,a,l),g=Da(h.stackedOnNext,i,a,l)),P6(d,v)>3e3||c&&P6(p,g)>3e3){u.stopAnimation(),u.setShape({points:v}),c&&(c.stopAnimation(),c.setShape({points:v,stackedOnPoints:g}));return}u.shape.__points=h.current,u.shape.points=d;var m={shape:{points:v}};h.current!==d&&(m.shape.__points=h.next),u.stopAnimation(),hr(u,m,f),c&&(c.setShape({points:d,stackedOnPoints:p}),c.stopAnimation(),hr(c,{shape:{stackedOnPoints:g}},f),u.shape.points!==c.shape.points&&(c.shape.points=u.shape.points));for(var y=[],_=h.status,b=0;b<_.length;b++){var T=_[b].cmd;if(T==="="){var S=r.getItemGraphicEl(_[b].idx1);S&&y.push({el:S,ptIdx:b})}}u.animators&&u.animators.length&&u.animators[0].during(function(){c&&c.dirtyShape();for(var P=u.shape.__points,C=0;C<y.length;C++){var A=y[C].el,M=y[C].ptIdx*2;A.x=P[M],A.y=P[M+1],A.markRedraw()}})},t.prototype.remove=function(r){var n=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl(function(o,a){o.__temp&&(n.remove(o),i.setItemGraphicEl(a,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t}(Yn);const lot=sot;function SE(e,t){return{seriesType:e,plan:uE(),reset:function(r){var n=r.getData(),i=r.coordinateSystem,o=r.pipelineContext,a=t||o.large;if(!!i){var s=Ct(i.dimensions,function(d){return n.mapDimension(d)}).slice(0,2),l=s.length,u=n.getCalculationInfo("stackResultDimension");Jl(n,s[0])&&(s[0]=u),Jl(n,s[1])&&(s[1]=u);var c=n.getStore(),f=n.getDimensionIndex(s[0]),h=n.getDimensionIndex(s[1]);return l&&{progress:function(d,p){for(var v=d.end-d.start,g=a&&Qo(v*l),m=[],y=[],_=d.start,b=0;_<d.end;_++){var T=void 0;if(l===1){var S=c.get(f,_);T=i.dataToPoint(S,null,y)}else m[0]=c.get(f,_),m[1]=c.get(h,_),T=i.dataToPoint(m,null,y);a?(g[b++]=T[0],g[b++]=T[1]):p.setItemLayout(_,T.slice())}a&&p.setLayout("points",g)}}}}}}var uot={average:function(e){for(var t=0,r=0,n=0;n<e.length;n++)isNaN(e[n])||(t+=e[n],r++);return r===0?NaN:t/r},sum:function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r]||0;return t},max:function(e){for(var t=-1/0,r=0;r<e.length;r++)e[r]>t&&(t=e[r]);return isFinite(t)?t:NaN},min:function(e){for(var t=1/0,r=0;r<e.length;r++)e[r]<t&&(t=e[r]);return isFinite(t)?t:NaN},nearest:function(e){return e[0]}},cot=function(e){return Math.round(e.length/2)};function SB(e){return{seriesType:e,reset:function(t,r,n){var i=t.getData(),o=t.get("sampling"),a=t.coordinateSystem,s=i.count();if(s>10&&a.type==="cartesian2d"&&o){var l=a.getBaseAxis(),u=a.getOtherAxis(l),c=l.getExtent(),f=n.getDevicePixelRatio(),h=Math.abs(c[1]-c[0])*(f||1),d=Math.round(s/h);if(isFinite(d)&&d>1){o==="lttb"&&t.setData(i.lttbDownSample(i.mapDimension(u.dim),1/d));var p=void 0;Et(o)?p=uot[o]:Ut(o)&&(p=o),p&&t.setData(i.downSample(i.mapDimension(u.dim),1/d,p,cot))}}}}}function R0(e){e.registerChartView(lot),e.registerSeriesModel(Uit),e.registerLayout(SE("line",!0)),e.registerVisual({seriesType:"line",reset:function(t){var r=t.getData(),n=t.getModel("lineStyle").getLineStyle();n&&!n.stroke&&(n.stroke=r.getVisual("style").fill),r.setVisual("legendLineStyle",n)}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,SB("line"))}var TB=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(r,n){return L0(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(r){var n=this.coordinateSystem;if(n&&n.clampData){var i=n.dataToPoint(n.clampData(r)),o=this.getData(),a=o.getLayout("offset"),s=o.getLayout("size"),l=n.getBaseAxis().isHorizontal()?0:1;return i[l]+=a+s/2,i}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(To);To.registerClass(TB);const C6=TB;var fot=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(){return L0(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},t.prototype.getProgressiveThreshold=function(){var r=this.get("progressiveThreshold"),n=this.get("largeThreshold");return n>r&&(r=n),r},t.prototype.brushSelector=function(r,n,i){return i.rect(n.getItemLayout(r))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=q1(C6.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(C6);const hot=fot;var dot=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),pot=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="sausage",n}return t.prototype.getDefaultShape=function(){return new dot},t.prototype.buildPath=function(r,n){var i=n.cx,o=n.cy,a=Math.max(n.r0||0,0),s=Math.max(n.r,0),l=(s-a)*.5,u=a+l,c=n.startAngle,f=n.endAngle,h=n.clockwise,d=Math.PI*2,p=h?f-c<d:c-f<d;p||(c=f-(h?d:-d));var v=Math.cos(c),g=Math.sin(c),m=Math.cos(f),y=Math.sin(f);p?(r.moveTo(v*a+i,g*a+o),r.arc(v*u+i,g*u+o,l,-Math.PI+c,c,!h)):r.moveTo(v*s+i,g*s+o),r.arc(i,o,s,c,f,!h),r.arc(m*u+i,y*u+o,l,f-Math.PI*2,f-Math.PI,!h),a!==0&&r.arc(i,o,a,f,c,h)},t}(he);const M6=pot;function vot(e,t){t=t||{};var r=t.isRoundCap;return function(n,i,o){var a=i.position;if(!a||a instanceof Array)return Am(n,i,o);var s=e(a),l=i.distance!=null?i.distance:5,u=this.shape,c=u.cx,f=u.cy,h=u.r,d=u.r0,p=(h+d)/2,v=u.startAngle,g=u.endAngle,m=(v+g)/2,y=r?Math.abs(h-d)/2:0,_=Math.cos,b=Math.sin,T=c+h*_(v),S=f+h*b(v),P="left",C="top";switch(s){case"startArc":T=c+(d-l)*_(m),S=f+(d-l)*b(m),P="center",C="top";break;case"insideStartArc":T=c+(d+l)*_(m),S=f+(d+l)*b(m),P="center",C="bottom";break;case"startAngle":T=c+p*_(v)+Jp(v,l+y,!1),S=f+p*b(v)+Qp(v,l+y,!1),P="right",C="middle";break;case"insideStartAngle":T=c+p*_(v)+Jp(v,-l+y,!1),S=f+p*b(v)+Qp(v,-l+y,!1),P="left",C="middle";break;case"middle":T=c+p*_(m),S=f+p*b(m),P="center",C="middle";break;case"endArc":T=c+(h+l)*_(m),S=f+(h+l)*b(m),P="center",C="bottom";break;case"insideEndArc":T=c+(h-l)*_(m),S=f+(h-l)*b(m),P="center",C="top";break;case"endAngle":T=c+p*_(g)+Jp(g,l+y,!0),S=f+p*b(g)+Qp(g,l+y,!0),P="left",C="middle";break;case"insideEndAngle":T=c+p*_(g)+Jp(g,-l+y,!0),S=f+p*b(g)+Qp(g,-l+y,!0),P="right",C="middle";break;default:return Am(n,i,o)}return n=n||{},n.x=T,n.y=S,n.align=P,n.verticalAlign=C,n}}function got(e,t,r,n){if(be(n)){e.setTextConfig({rotation:n});return}else if(ut(t)){e.setTextConfig({rotation:0});return}var i=e.shape,o=i.clockwise?i.startAngle:i.endAngle,a=i.clockwise?i.endAngle:i.startAngle,s=(o+a)/2,l,u=r(t);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=s;break;case"startAngle":case"insideStartAngle":l=o;break;case"endAngle":case"insideEndAngle":l=a;break;default:e.setTextConfig({rotation:0});return}var c=Math.PI*1.5-l;u==="middle"&&c>Math.PI/2&&c<Math.PI*1.5&&(c-=Math.PI),e.setTextConfig({rotation:c})}function Jp(e,t,r){return t*Math.sin(e)*(r?-1:1)}function Qp(e,t,r){return t*Math.cos(e)*(r?1:-1)}var P2=Math.max,E2=Math.min;function mot(e,t){var r=e.getArea&&e.getArea();if(df(e,"cartesian2d")){var n=e.getBaseAxis();if(n.type!=="category"||!n.onBand){var i=t.getLayout("bandWidth");n.isHorizontal()?(r.x-=i,r.width+=i*2):(r.y-=i,r.height+=i*2)}}return r}var yot=function(e){mt(t,e);function t(){var r=e.call(this)||this;return r.type=t.type,r._isFirstFrame=!0,r}return t.prototype.render=function(r,n,i,o){this._model=r,this._removeOnRenderedListener(i),this._updateDrawMode(r);var a=r.get("coordinateSystem");(a==="cartesian2d"||a==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(r,n,i):this._renderNormal(r,n,i,o))},t.prototype.incrementalPrepareRender=function(r){this._clear(),this._updateDrawMode(r),this._updateLargeClip(r)},t.prototype.incrementalRender=function(r,n){this._progressiveEls=[],this._incrementalRenderLarge(r,n)},t.prototype.eachRendered=function(r){lf(this._progressiveEls||this.group,r)},t.prototype._updateDrawMode=function(r){var n=r.pipelineContext.large;(this._isLargeDraw==null||n!==this._isLargeDraw)&&(this._isLargeDraw=n,this._clear())},t.prototype._renderNormal=function(r,n,i,o){var a=this.group,s=r.getData(),l=this._data,u=r.coordinateSystem,c=u.getBaseAxis(),f;u.type==="cartesian2d"?f=c.isHorizontal():u.type==="polar"&&(f=c.dim==="angle");var h=r.isAnimationEnabled()?r:null,d=_ot(r,u);d&&this._enableRealtimeSort(d,s,i);var p=r.get("clip",!0)||d,v=mot(u,s);a.removeClipPath();var g=r.get("roundCap",!0),m=r.get("showBackground",!0),y=r.getModel("backgroundStyle"),_=y.get("borderRadius")||0,b=[],T=this._backgroundEls,S=o&&o.isInitSort,P=o&&o.type==="changeAxisOrder";function C(k){var O=tv[u.type](s,k),F=Aot(u,f,O);return F.useStyle(y.getItemStyle()),u.type==="cartesian2d"&&F.setShape("r",_),b[k]=F,F}s.diff(l).add(function(k){var O=s.getItemModel(k),F=tv[u.type](s,k,O);if(m&&C(k),!(!s.hasValue(k)||!O6[u.type](F))){var z=!1;p&&(z=k6[u.type](v,F));var R=x6[u.type](r,s,k,F,f,h,c.model,!1,g);d&&(R.forceLabelAnimation=!0),R6(R,s,k,O,F,r,f,u.type==="polar"),S?R.attr({shape:F}):d?L6(d,h,R,F,k,f,!1,!1):So(R,{shape:F},r,k),s.setItemGraphicEl(k,R),a.add(R),R.ignore=z}}).update(function(k,O){var F=s.getItemModel(k),z=tv[u.type](s,k,F);if(m){var R=void 0;T.length===0?R=C(O):(R=T[O],R.useStyle(y.getItemStyle()),u.type==="cartesian2d"&&R.setShape("r",_),b[k]=R);var j=tv[u.type](s,k),Z=EB(f,j,u);hr(R,{shape:Z},h,k)}var q=l.getItemGraphicEl(O);if(!s.hasValue(k)||!O6[u.type](z)){a.remove(q);return}var tt=!1;if(p&&(tt=k6[u.type](v,z),tt&&a.remove(q)),q?nN(q):q=x6[u.type](r,s,k,z,f,h,c.model,!!q,g),d&&(q.forceLabelAnimation=!0),P){var Pt=q.getTextContent();if(Pt){var Ot=X1(Pt);Ot.prevValue!=null&&(Ot.prevValue=Ot.value)}}else R6(q,s,k,F,z,r,f,u.type==="polar");S?q.attr({shape:z}):d?L6(d,h,q,z,k,f,!0,P):hr(q,{shape:z},r,k,null),s.setItemGraphicEl(k,q),q.ignore=tt,a.add(q)}).remove(function(k){var O=l.getItemGraphicEl(k);O&&WS(O,r,k)}).execute();var A=this._backgroundGroup||(this._backgroundGroup=new De);A.removeAll();for(var M=0;M<b.length;++M)A.add(b[M]);a.add(A),this._backgroundEls=b,this._data=s},t.prototype._renderLarge=function(r,n,i){this._clear(),N6(r,this.group),this._updateLargeClip(r)},t.prototype._incrementalRenderLarge=function(r,n){this._removeBackground(),N6(n,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(r){var n=r.get("clip",!0)&&bB(r.coordinateSystem,!1,r),i=this.group;n?i.setClipPath(n):i.removeClipPath()},t.prototype._enableRealtimeSort=function(r,n,i){var o=this;if(!!n.count()){var a=r.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(n,r,i),this._isFirstFrame=!1;else{var s=function(l){var u=n.getItemGraphicEl(l),c=u&&u.shape;return c&&Math.abs(a.isHorizontal()?c.height:c.width)||0};this._onRendered=function(){o._updateSortWithinSameData(n,s,a,i)},i.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(r,n,i){var o=[];return r.each(r.mapDimension(n.dim),function(a,s){var l=i(s);l=l==null?NaN:l,o.push({dataIndex:s,mappedValue:l,ordinalNumber:a})}),o.sort(function(a,s){return s.mappedValue-a.mappedValue}),{ordinalNumbers:Ct(o,function(a){return a.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(r,n,i){for(var o=i.scale,a=r.mapDimension(i.dim),s=Number.MAX_VALUE,l=0,u=o.getOrdinalMeta().categories.length;l<u;++l){var c=r.rawIndexOf(a,o.getRawOrdinalNumber(l)),f=c<0?Number.MIN_VALUE:n(r.indexOfRawIndex(c));if(f>s)return!0;s=f}return!1},t.prototype._isOrderDifferentInView=function(r,n){for(var i=n.scale,o=i.getExtent(),a=Math.max(0,o[0]),s=Math.min(o[1],i.getOrdinalMeta().categories.length-1);a<=s;++a)if(r.ordinalNumbers[a]!==i.getRawOrdinalNumber(a))return!0},t.prototype._updateSortWithinSameData=function(r,n,i,o){if(!!this._isOrderChangedWithinSameData(r,n,i)){var a=this._dataSort(r,i,n);this._isOrderDifferentInView(a,i)&&(this._removeOnRenderedListener(o),o.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",axisId:i.index,sortInfo:a}))}},t.prototype._dispatchInitSort=function(r,n,i){var o=n.baseAxis,a=this._dataSort(r,o,function(s){return r.get(r.mapDimension(n.otherAxis.dim),s)});i.dispatchAction({type:"changeAxisOrder",componentType:o.dim+"Axis",isInitSort:!0,axisId:o.index,sortInfo:a})},t.prototype.remove=function(r,n){this._clear(this._model),this._removeOnRenderedListener(n)},t.prototype.dispose=function(r,n){this._removeOnRenderedListener(n)},t.prototype._removeOnRenderedListener=function(r){this._onRendered&&(r.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(r){var n=this.group,i=this._data;r&&r.isAnimationEnabled()&&i&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],i.eachItemGraphicEl(function(o){WS(o,r,ie(o).dataIndex)})):n.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(Yn),k6={cartesian2d:function(e,t){var r=t.width<0?-1:1,n=t.height<0?-1:1;r<0&&(t.x+=t.width,t.width=-t.width),n<0&&(t.y+=t.height,t.height=-t.height);var i=e.x+e.width,o=e.y+e.height,a=P2(t.x,e.x),s=E2(t.x+t.width,i),l=P2(t.y,e.y),u=E2(t.y+t.height,o),c=s<a,f=u<l;return t.x=c&&a>i?s:a,t.y=f&&l>o?u:l,t.width=c?0:s-a,t.height=f?0:u-l,r<0&&(t.x+=t.width,t.width=-t.width),n<0&&(t.y+=t.height,t.height=-t.height),c||f},polar:function(e,t){var r=t.r0<=t.r?1:-1;if(r<0){var n=t.r;t.r=t.r0,t.r0=n}var i=E2(t.r,e.r),o=P2(t.r0,e.r0);t.r=i,t.r0=o;var a=i-o<0;if(r<0){var n=t.r;t.r=t.r0,t.r0=n}return a}},x6={cartesian2d:function(e,t,r,n,i,o,a,s,l){var u=new Ke({shape:ot({},n),z2:1});if(u.__dataIndex=r,u.name="item",o){var c=u.shape,f=i?"height":"width";c[f]=0}return u},polar:function(e,t,r,n,i,o,a,s,l){var u=!i&&l?M6:k0,c=new u({shape:n,z2:1});c.name="item";var f=PB(i);if(c.calculateTextPosition=vot(f,{isRoundCap:u===M6}),o){var h=c.shape,d=i?"r":"endAngle",p={};h[d]=i?0:n.startAngle,p[d]=n[d],(s?hr:So)(c,{shape:p},o)}return c}};function _ot(e,t){var r=e.get("realtimeSort",!0),n=t.getBaseAxis();if(r&&n.type==="category"&&t.type==="cartesian2d")return{baseAxis:n,otherAxis:t.getOtherAxis(n)}}function L6(e,t,r,n,i,o,a,s){var l,u;o?(u={x:n.x,width:n.width},l={y:n.y,height:n.height}):(u={y:n.y,height:n.height},l={x:n.x,width:n.width}),s||(a?hr:So)(r,{shape:l},t,i,null);var c=t?e.baseAxis.model:null;(a?hr:So)(r,{shape:u},c,i)}function I6(e,t){for(var r=0;r<t.length;r++)if(!isFinite(e[t[r]]))return!0;return!1}var bot=["x","y","width","height"],wot=["cx","cy","r","startAngle","endAngle"],O6={cartesian2d:function(e){return!I6(e,bot)},polar:function(e){return!I6(e,wot)}},tv={cartesian2d:function(e,t,r){var n=e.getItemLayout(t),i=r?Tot(r,n):0,o=n.width>0?1:-1,a=n.height>0?1:-1;return{x:n.x+o*i/2,y:n.y+a*i/2,width:n.width-o*i,height:n.height-a*i}},polar:function(e,t,r){var n=e.getItemLayout(t);return{cx:n.cx,cy:n.cy,r0:n.r0,r:n.r,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}}};function Sot(e){return e.startAngle!=null&&e.endAngle!=null&&e.startAngle===e.endAngle}function PB(e){return function(t){var r=t?"Arc":"Angle";return function(n){switch(n){case"start":case"insideStart":case"end":case"insideEnd":return n+r;default:return n}}}(e)}function R6(e,t,r,n,i,o,a,s){var l=t.getItemVisual(r,"style");s||e.setShape("r",n.get(["itemStyle","borderRadius"])||0),e.useStyle(l);var u=n.getShallow("cursor");u&&e.attr("cursor",u);var c=s?a?i.r>=i.r0?"endArc":"startArc":i.endAngle>=i.startAngle?"endAngle":"startAngle":a?i.height>=0?"bottom":"top":i.width>=0?"right":"left",f=lu(n);uf(e,f,{labelFetcher:o,labelDataIndex:r,defaultText:n0(o.getData(),r),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:c});var h=e.getTextContent();if(s&&h){var d=n.get(["label","position"]);e.textConfig.inside=d==="middle"?!0:null,got(e,d==="outside"?c:d,PB(a),n.get(["label","rotate"]))}HQ(h,f,o.getRawValue(r),function(v){return dB(t,v)});var p=n.getModel(["emphasis"]);ql(e,p.get("focus"),p.get("blurScope"),p.get("disabled")),Xd(e,n),Sot(i)&&(e.style.fill="none",e.style.stroke="none",N(e.states,function(v){v.style&&(v.style.fill=v.style.stroke="none")}))}function Tot(e,t){var r=e.get(["itemStyle","borderColor"]);if(!r||r==="none")return 0;var n=e.get(["itemStyle","borderWidth"])||0,i=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),o=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(n,i,o)}var Pot=function(){function e(){}return e}(),D6=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="largeBar",n}return t.prototype.getDefaultShape=function(){return new Pot},t.prototype.buildPath=function(r,n){for(var i=n.points,o=this.baseDimIdx,a=1-this.baseDimIdx,s=[],l=[],u=this.barWidth,c=0;c<i.length;c+=3)l[o]=u,l[a]=i[c+2],s[o]=i[c+o],s[a]=i[c+a],r.rect(s[0],s[1],l[0],l[1])},t}(he);function N6(e,t,r,n){var i=e.getData(),o=i.getLayout("valueAxisHorizontal")?1:0,a=i.getLayout("largeDataIndices"),s=i.getLayout("size"),l=e.getModel("backgroundStyle"),u=i.getLayout("largeBackgroundPoints");if(u){var c=new D6({shape:{points:u},incremental:!!n,silent:!0,z2:0});c.baseDimIdx=o,c.largeDataIndices=a,c.barWidth=s,c.useStyle(l.getItemStyle()),t.add(c),r&&r.push(c)}var f=new D6({shape:{points:i.getLayout("largePoints")},incremental:!!n,ignoreCoarsePointer:!0,z2:1});f.baseDimIdx=o,f.largeDataIndices=a,f.barWidth=s,t.add(f),f.useStyle(i.getVisual("style")),ie(f).seriesIndex=e.seriesIndex,e.get("silent")||(f.on("mousedown",F6),f.on("mousemove",F6)),r&&r.push(f)}var F6=oy(function(e){var t=this,r=Eot(t,e.offsetX,e.offsetY);ie(t).dataIndex=r>=0?r:null},30,!1);function Eot(e,t,r){for(var n=e.baseDimIdx,i=1-n,o=e.shape.points,a=e.largeDataIndices,s=[],l=[],u=e.barWidth,c=0,f=o.length/3;c<f;c++){var h=c*3;if(l[n]=u,l[i]=o[h+2],s[n]=o[h+n],s[i]=o[h+i],l[i]<0&&(s[i]+=l[i],l[i]=-l[i]),t>=s[0]&&t<=s[0]+l[0]&&r>=s[1]&&r<=s[1]+l[1])return a[c]}return-1}function EB(e,t,r){if(df(r,"cartesian2d")){var n=t,i=r.getArea();return{x:e?n.x:i.x,y:e?i.y:n.y,width:e?n.width:i.width,height:e?i.height:n.height}}else{var i=r.getArea(),o=t;return{cx:i.cx,cy:i.cy,r0:e?i.r0:o.r0,r:e?i.r:o.r,startAngle:e?o.startAngle:0,endAngle:e?o.endAngle:Math.PI*2}}}function Aot(e,t,r){var n=e.type==="polar"?k0:Ke;return new n({shape:EB(t,r,e),silent:!0,z2:0})}const Cot=yot;function hy(e){e.registerChartView(Cot),e.registerSeriesModel(hot),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,_e(Ynt,"bar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,qnt("bar")),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,SB("bar")),e.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,r){var n=t.componentType||"series";r.eachComponent({mainType:n,query:t},function(i){t.sortInfo&&i.axis.setCategorySortInfo(t.sortInfo)})})}var Mot=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r,n){return L0(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var r=this.option.progressive;return r==null?this.option.large?5e3:this.get("progressive"):r},t.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r==null?this.option.large?1e4:this.get("progressiveThreshold"):r},t.prototype.brushSelector=function(r,n,i){return i.point(n.getItemLayout(r))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(To);const kot=Mot;var AB=4,xot=function(){function e(){}return e}(),Lot=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;return n._off=0,n.hoverDataIdx=-1,n}return t.prototype.getDefaultShape=function(){return new xot},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(r,n){var i=n.points,o=n.size,a=this.symbolProxy,s=a.shape,l=r.getContext?r.getContext():r,u=l&&o[0]<AB,c=this.softClipShape,f;if(u){this._ctx=l;return}for(this._ctx=null,f=this._off;f<i.length;){var h=i[f++],d=i[f++];isNaN(h)||isNaN(d)||c&&!c.contain(h,d)||(s.x=h-o[0]/2,s.y=d-o[1]/2,s.width=o[0],s.height=o[1],a.buildPath(r,s,!0))}this.incremental&&(this._off=f,this.notClear=!0)},t.prototype.afterBrush=function(){var r=this.shape,n=r.points,i=r.size,o=this._ctx,a=this.softClipShape,s;if(!!o){for(s=this._off;s<n.length;){var l=n[s++],u=n[s++];isNaN(l)||isNaN(u)||a&&!a.contain(l,u)||o.fillRect(l-i[0]/2,u-i[1]/2,i[0],i[1])}this.incremental&&(this._off=s,this.notClear=!0)}},t.prototype.findDataIndex=function(r,n){for(var i=this.shape,o=i.points,a=i.size,s=Math.max(a[0],4),l=Math.max(a[1],4),u=o.length/2-1;u>=0;u--){var c=u*2,f=o[c]-s/2,h=o[c+1]-l/2;if(r>=f&&n>=h&&r<=f+s&&n<=h+l)return u}return-1},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect();if(r=i[0],n=i[1],o.contain(r,n)){var a=this.hoverDataIdx=this.findDataIndex(r,n);return a>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var n=this.shape,i=n.points,o=n.size,a=o[0],s=o[1],l=1/0,u=1/0,c=-1/0,f=-1/0,h=0;h<i.length;){var d=i[h++],p=i[h++];l=Math.min(d,l),c=Math.max(d,c),u=Math.min(p,u),f=Math.max(p,f)}r=this._rect=new ae(l-a/2,u-s/2,c-l+a,f-u+s)}return r},t}(he),Iot=function(){function e(){this.group=new De}return e.prototype.updateData=function(t,r){this._clear();var n=this._create();n.setShape({points:t.getLayout("points")}),this._setCommon(n,t,r)},e.prototype.updateLayout=function(t){var r=t.getLayout("points");this.group.eachChild(function(n){if(n.startIndex!=null){var i=(n.endIndex-n.startIndex)*2,o=n.startIndex*4*2;r=new Float32Array(r.buffer,o,i)}n.setShape("points",r),n.reset()})},e.prototype.incrementalPrepareUpdate=function(t){this._clear()},e.prototype.incrementalUpdate=function(t,r,n){var i=this._newAdded[0],o=r.getLayout("points"),a=i&&i.shape.points;if(a&&a.length<2e4){var s=a.length,l=new Float32Array(s+o.length);l.set(a),l.set(o,s),i.endIndex=t.end,i.setShape({points:l})}else{this._newAdded=[];var u=this._create();u.startIndex=t.start,u.endIndex=t.end,u.incremental=!0,u.setShape({points:o}),this._setCommon(u,r,n)}},e.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},e.prototype._create=function(){var t=new Lot({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},e.prototype._setCommon=function(t,r,n){var i=r.hostModel;n=n||{};var o=r.getVisual("symbolSize");t.setShape("size",o instanceof Array?o:[o,o]),t.softClipShape=n.clipShape||null,t.symbolProxy=Li(r.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var a=t.shape.size[0]<AB;t.useStyle(i.getModel("itemStyle").getItemStyle(a?["color","shadowBlur","shadowColor"]:["color"]));var s=r.getVisual("style"),l=s&&s.fill;l&&t.setColor(l);var u=ie(t);u.seriesIndex=i.seriesIndex,t.on("mousemove",function(c){u.dataIndex=null;var f=t.hoverDataIdx;f>=0&&(u.dataIndex=f+(t.startIndex||0))})},e.prototype.remove=function(){this._clear()},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}();const Oot=Iot;var Rot=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){var o=r.getData(),a=this._updateSymbolDraw(o,r);a.updateData(o,{clipShape:this._getClipShape(r)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(r,n,i){var o=r.getData(),a=this._updateSymbolDraw(o,r);a.incrementalPrepareUpdate(o),this._finished=!1},t.prototype.incrementalRender=function(r,n,i){this._symbolDraw.incrementalUpdate(r,n.getData(),{clipShape:this._getClipShape(n)}),this._finished=r.end===n.getData().count()},t.prototype.updateTransform=function(r,n,i){var o=r.getData();if(this.group.dirty(),!this._finished||o.count()>1e4)return{update:!0};var a=SE("").reset(r,n,i);a.progress&&a.progress({start:0,end:o.count(),count:o.count()},o),this._symbolDraw.updateLayout(o)},t.prototype.eachRendered=function(r){this._symbolDraw&&this._symbolDraw.eachRendered(r)},t.prototype._getClipShape=function(r){var n=r.coordinateSystem,i=n&&n.getArea&&n.getArea();return r.get("clip",!0)?i:null},t.prototype._updateSymbolDraw=function(r,n){var i=this._symbolDraw,o=n.pipelineContext,a=o.large;return(!i||a!==this._isLargeDraw)&&(i&&i.remove(),i=this._symbolDraw=a?new Oot:new pB,this._isLargeDraw=a,this.group.removeAll()),this.group.add(i.group),i},t.prototype.remove=function(r,n){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(Yn);const Dot=Rot;var Not=function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t}(Ce);const Fot=Not;var f3=function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",_i).models[0]},t.type="cartesian2dAxis",t}(Ce);Ri(f3,bit);var CB={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},Bot=oe({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},CB),TE=oe({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},CB),$ot=oe({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},TE),zot=te({logBase:10},TE);const Vot={category:Bot,value:TE,time:$ot,log:zot};var Uot={value:1,category:1,time:1,log:1};function B6(e,t,r,n){N(Uot,function(i,o){var a=oe(oe({},Vot[o],!0),n,!0),s=function(l){mt(u,l);function u(){var c=l!==null&&l.apply(this,arguments)||this;return c.type=t+"Axis."+o,c}return u.prototype.mergeDefaultAndTheme=function(c,f){var h=Jd(this),d=h?ey(c):{},p=f.getTheme();oe(c,p.get(o+"Axis")),oe(c,this.getDefaultOption()),c.type=$6(c),h&&Gc(c,d,h)},u.prototype.optionUpdated=function(){var c=this.option;c.type==="category"&&(this.__ordinalMeta=s3.createByAxisModel(this))},u.prototype.getCategories=function(c){var f=this.option;if(f.type==="category")return c?f.data:this.__ordinalMeta.categories},u.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},u.type=t+"Axis."+o,u.defaultOption=a,u}(r);e.registerComponentModel(s)}),e.registerSubTypeDefaulter(t+"Axis",$6)}function $6(e){return e.type||(e.data?"category":"value")}var Got=function(){function e(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return e.prototype.getAxis=function(t){return this._axes[t]},e.prototype.getAxes=function(){return Ct(this._dimList,function(t){return this._axes[t]},this)},e.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),yr(this.getAxes(),function(r){return r.scale.type===t})},e.prototype.addAxis=function(t){var r=t.dim;this._axes[r]=t,this._dimList.push(r)},e}();const jot=Got;var h3=["x","y"];function z6(e){return e.type==="interval"||e.type==="time"}var Wot=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="cartesian2d",r.dimensions=h3,r}return t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var r=this.getAxis("x").scale,n=this.getAxis("y").scale;if(!(!z6(r)||!z6(n))){var i=r.getExtent(),o=n.getExtent(),a=this.dataToPoint([i[0],o[0]]),s=this.dataToPoint([i[1],o[1]]),l=i[1]-i[0],u=o[1]-o[0];if(!(!l||!u)){var c=(s[0]-a[0])/l,f=(s[1]-a[1])/u,h=a[0]-i[0]*c,d=a[1]-o[0]*f,p=this._transform=[c,0,0,f,h,d];this._invTransform=B1([],p)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(r){var n=this.getAxis("x"),i=this.getAxis("y");return n.contain(n.toLocalCoord(r[0]))&&i.contain(i.toLocalCoord(r[1]))},t.prototype.containData=function(r){return this.getAxis("x").containData(r[0])&&this.getAxis("y").containData(r[1])},t.prototype.containZone=function(r,n){var i=this.dataToPoint(r),o=this.dataToPoint(n),a=this.getArea(),s=new ae(i[0],i[1],o[0]-i[0],o[1]-i[1]);return a.intersect(s)},t.prototype.dataToPoint=function(r,n,i){i=i||[];var o=r[0],a=r[1];if(this._transform&&o!=null&&isFinite(o)&&a!=null&&isFinite(a))return Xr(i,r,this._transform);var s=this.getAxis("x"),l=this.getAxis("y");return i[0]=s.toGlobalCoord(s.dataToCoord(o,n)),i[1]=l.toGlobalCoord(l.dataToCoord(a,n)),i},t.prototype.clampData=function(r,n){var i=this.getAxis("x").scale,o=this.getAxis("y").scale,a=i.getExtent(),s=o.getExtent(),l=i.parse(r[0]),u=o.parse(r[1]);return n=n||[],n[0]=Math.min(Math.max(Math.min(a[0],a[1]),l),Math.max(a[0],a[1])),n[1]=Math.min(Math.max(Math.min(s[0],s[1]),u),Math.max(s[0],s[1])),n},t.prototype.pointToData=function(r,n){var i=[];if(this._invTransform)return Xr(i,r,this._invTransform);var o=this.getAxis("x"),a=this.getAxis("y");return i[0]=o.coordToData(o.toLocalCoord(r[0]),n),i[1]=a.coordToData(a.toLocalCoord(r[1]),n),i},t.prototype.getOtherAxis=function(r){return this.getAxis(r.dim==="x"?"y":"x")},t.prototype.getArea=function(){var r=this.getAxis("x").getGlobalExtent(),n=this.getAxis("y").getGlobalExtent(),i=Math.min(r[0],r[1]),o=Math.min(n[0],n[1]),a=Math.max(r[0],r[1])-i,s=Math.max(n[0],n[1])-o;return new ae(i,o,a,s)},t}(jot),Hot=function(e){mt(t,e);function t(r,n,i,o,a){var s=e.call(this,r,n,i)||this;return s.index=0,s.type=o||"value",s.position=a||"bottom",s}return t.prototype.isHorizontal=function(){var r=this.position;return r==="top"||r==="bottom"},t.prototype.getGlobalExtent=function(r){var n=this.getExtent();return n[0]=this.toGlobalCoord(n[0]),n[1]=this.toGlobalCoord(n[1]),r&&n[0]>n[1]&&n.reverse(),n},t.prototype.pointToData=function(r,n){return this.coordToData(this.toLocalCoord(r[this.dim==="x"?0:1]),n)},t.prototype.setCategorySortInfo=function(r){if(this.type!=="category")return!1;this.model.option.categorySortInfo=r,this.scale.setSortInfo(r)},t}(Iit);const Xot=Hot;function d3(e,t,r){r=r||{};var n=e.coordinateSystem,i=t.axis,o={},a=i.getAxesOnZeroOf()[0],s=i.position,l=a?"onZero":s,u=i.dim,c=n.getRect(),f=[c.x,c.x+c.width,c.y,c.y+c.height],h={left:0,right:1,top:0,bottom:1,onZero:2},d=t.get("offset")||0,p=u==="x"?[f[2]-d,f[3]+d]:[f[0]-d,f[1]+d];if(a){var v=a.toGlobalCoord(a.dataToCoord(0));p[h.onZero]=Math.max(Math.min(v,p[1]),p[0])}o.position=[u==="y"?p[h[l]]:f[0],u==="x"?p[h[l]]:f[3]],o.rotation=Math.PI/2*(u==="x"?0:1);var g={top:-1,bottom:1,left:-1,right:1};o.labelDirection=o.tickDirection=o.nameDirection=g[s],o.labelOffset=a?p[h[s]]-p[h.onZero]:0,t.get(["axisTick","inside"])&&(o.tickDirection=-o.tickDirection),yi(r.labelInside,t.get(["axisLabel","inside"]))&&(o.labelDirection=-o.labelDirection);var m=t.get(["axisLabel","rotate"]);return o.labelRotate=l==="top"?-m:m,o.z2=1,o}function V6(e){return e.get("coordinateSystem")==="cartesian2d"}function U6(e){var t={xAxisModel:null,yAxisModel:null};return N(t,function(r,n){var i=n.replace(/Model$/,""),o=e.getReferringComponents(i,_i).models[0];t[n]=o}),t}var A2=Math.log;function Yot(e,t,r){var n=I0.prototype,i=n.getTicks.call(r),o=n.getTicks.call(r,!0),a=i.length-1,s=n.getInterval.call(r),l=oB(e,t),u=l.extent,c=l.fixMin,f=l.fixMax;if(e.type==="log"){var h=A2(e.base);u=[A2(u[0])/h,A2(u[1])/h]}e.setExtent(u[0],u[1]),e.calcNiceExtent({splitNumber:a,fixMin:c,fixMax:f});var d=n.getExtent.call(e);c&&(u[0]=d[0]),f&&(u[1]=d[1]);var p=n.getInterval.call(e),v=u[0],g=u[1];if(c&&f)p=(g-v)/a;else if(c)for(g=u[0]+p*a;g<u[1]&&isFinite(g)&&isFinite(u[1]);)p=b2(p),g=u[0]+p*a;else if(f)for(v=u[1]-p*a;v>u[0]&&isFinite(v)&&isFinite(u[0]);)p=b2(p),v=u[1]-p*a;else{var m=e.getTicks().length-1;m>a&&(p=b2(p));var y=p*a;g=Math.ceil(u[1]/p)*p,v=qe(g-y),v<0&&u[0]>=0?(v=0,g=qe(y)):g>0&&u[1]<=0&&(g=0,v=-qe(y))}var _=(i[0].value-o[0].value)/s,b=(i[a].value-o[a].value)/s;n.setExtent.call(e,v+p*_,g+p*b),n.setInterval.call(e,p),(_||b)&&n.setNiceExtent.call(e,v+p,g-p)}var qot=function(){function e(t,r,n){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=h3,this._initCartesian(t,r,n),this.model=t}return e.prototype.getRect=function(){return this._rect},e.prototype.update=function(t,r){var n=this._axesMap;this._updateScale(t,this.model);function i(a){var s,l=ve(a),u=l.length;if(!!u){for(var c=[],f=u-1;f>=0;f--){var h=+l[f],d=a[h],p=d.model,v=d.scale;l3(v)&&p.get("alignTicks")&&p.get("interval")==null?c.push(d):(p6(v,p),l3(v)&&(s=d))}c.length&&(s||(s=c.pop(),p6(s.scale,s.model)),N(c,function(g){Yot(g.scale,g.model,s.scale)}))}}i(n.x),i(n.y);var o={};N(n.x,function(a){G6(n,"y",a,o)}),N(n.y,function(a){G6(n,"x",a,o)}),this.resize(this.model,r)},e.prototype.resize=function(t,r,n){var i=t.getBoxLayoutParams(),o=!n&&t.get("containLabel"),a=Ps(i,{width:r.getWidth(),height:r.getHeight()});this._rect=a;var s=this._axesList;l(),o&&(N(s,function(u){if(!u.model.get(["axisLabel","inside"])){var c=mit(u);if(c){var f=u.isHorizontal()?"height":"width",h=u.model.get(["axisLabel","margin"]);a[f]-=c[f]+h,u.position==="top"?a.y+=c.height+h:u.position==="left"&&(a.x+=c.width+h)}}}),l()),N(this._coordsList,function(u){u.calcAffineTransform()});function l(){N(s,function(u){var c=u.isHorizontal(),f=c?[0,a.width]:[0,a.height],h=u.inverse?1:0;u.setExtent(f[h],f[1-h]),Zot(u,c?a.x:a.y)})}},e.prototype.getAxis=function(t,r){var n=this._axesMap[t];if(n!=null)return n[r||0]},e.prototype.getAxes=function(){return this._axesList.slice()},e.prototype.getCartesian=function(t,r){if(t!=null&&r!=null){var n="x"+t+"y"+r;return this._coordsMap[n]}It(t)&&(r=t.yAxisIndex,t=t.xAxisIndex);for(var i=0,o=this._coordsList;i<o.length;i++)if(o[i].getAxis("x").index===t||o[i].getAxis("y").index===r)return o[i]},e.prototype.getCartesians=function(){return this._coordsList.slice()},e.prototype.convertToPixel=function(t,r,n){var i=this._findConvertTarget(r);return i.cartesian?i.cartesian.dataToPoint(n):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(n)):null},e.prototype.convertFromPixel=function(t,r,n){var i=this._findConvertTarget(r);return i.cartesian?i.cartesian.pointToData(n):i.axis?i.axis.coordToData(i.axis.toLocalCoord(n)):null},e.prototype._findConvertTarget=function(t){var r=t.seriesModel,n=t.xAxisModel||r&&r.getReferringComponents("xAxis",_i).models[0],i=t.yAxisModel||r&&r.getReferringComponents("yAxis",_i).models[0],o=t.gridModel,a=this._coordsList,s,l;if(r)s=r.coordinateSystem,ce(a,s)<0&&(s=null);else if(n&&i)s=this.getCartesian(n.componentIndex,i.componentIndex);else if(n)l=this.getAxis("x",n.componentIndex);else if(i)l=this.getAxis("y",i.componentIndex);else if(o){var u=o.coordinateSystem;u===this&&(s=this._coordsList[0])}return{cartesian:s,axis:l}},e.prototype.containPoint=function(t){var r=this._coordsList[0];if(r)return r.containPoint(t)},e.prototype._initCartesian=function(t,r,n){var i=this,o=this,a={left:!1,right:!1,top:!1,bottom:!1},s={x:{},y:{}},l={x:0,y:0};if(r.eachComponent("xAxis",u("x"),this),r.eachComponent("yAxis",u("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=s,N(s.x,function(c,f){N(s.y,function(h,d){var p="x"+f+"y"+d,v=new Wot(p);v.master=i,v.model=t,i._coordsMap[p]=v,i._coordsList.push(v),v.addAxis(c),v.addAxis(h)})});function u(c){return function(f,h){if(!!C2(f,t)){var d=f.get("position");c==="x"?d!=="top"&&d!=="bottom"&&(d=a.bottom?"top":"bottom"):d!=="left"&&d!=="right"&&(d=a.left?"right":"left"),a[d]=!0;var p=new Xot(c,vit(f),[0,0],f.get("type"),d),v=p.type==="category";p.onBand=v&&f.get("boundaryGap"),p.inverse=f.get("inverse"),f.axis=p,p.model=f,p.grid=o,p.index=h,o._axesList.push(p),s[c][h]=p,l[c]++}}}},e.prototype._updateScale=function(t,r){N(this._axesList,function(i){if(i.scale.setExtent(1/0,-1/0),i.type==="category"){var o=i.model.get("categorySortInfo");i.scale.setSortInfo(o)}}),t.eachSeries(function(i){if(V6(i)){var o=U6(i),a=o.xAxisModel,s=o.yAxisModel;if(!C2(a,r)||!C2(s,r))return;var l=this.getCartesian(a.componentIndex,s.componentIndex),u=i.getData(),c=l.getAxis("x"),f=l.getAxis("y");n(u,c),n(u,f)}},this);function n(i,o){N(_it(i,o.dim),function(a){o.scale.unionExtentFromData(i,a)})}},e.prototype.getTooltipAxes=function(t){var r=[],n=[];return N(this.getCartesians(),function(i){var o=t!=null&&t!=="auto"?i.getAxis(t):i.getBaseAxis(),a=i.getOtherAxis(o);ce(r,o)<0&&r.push(o),ce(n,a)<0&&n.push(a)}),{baseAxes:r,otherAxes:n}},e.create=function(t,r){var n=[];return t.eachComponent("grid",function(i,o){var a=new e(i,t,r);a.name="grid_"+o,a.resize(i,r,!0),i.coordinateSystem=a,n.push(a)}),t.eachSeries(function(i){if(!!V6(i)){var o=U6(i),a=o.xAxisModel,s=o.yAxisModel,l=a.getCoordSysModel(),u=l.coordinateSystem;i.coordinateSystem=u.getCartesian(a.componentIndex,s.componentIndex)}}),n},e.dimensions=h3,e}();function C2(e,t){return e.getCoordSysModel()===t}function G6(e,t,r,n){r.getAxesOnZeroOf=function(){return o?[o]:[]};var i=e[t],o,a=r.model,s=a.get(["axisLine","onZero"]),l=a.get(["axisLine","onZeroAxisIndex"]);if(!s)return;if(l!=null)j6(i[l])&&(o=i[l]);else for(var u in i)if(i.hasOwnProperty(u)&&j6(i[u])&&!n[c(i[u])]){o=i[u];break}o&&(n[c(o)]=!0);function c(f){return f.dim+"_"+f.index}}function j6(e){return e&&e.type!=="category"&&e.type!=="time"&&git(e)}function Zot(e,t){var r=e.getExtent(),n=r[0]+r[1];e.toGlobalCoord=e.dim==="x"?function(i){return i+t}:function(i){return n-i+t},e.toLocalCoord=e.dim==="x"?function(i){return i-t}:function(i){return n-i+t}}const Kot=qot;var ss=Math.PI,$l=function(){function e(t,r){this.group=new De,this.opt=r,this.axisModel=t,te(r,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var n=new De({x:r.position[0],y:r.position[1],rotation:r.rotation});n.updateTransform(),this._transformGroup=n}return e.prototype.hasBuilder=function(t){return!!W6[t]},e.prototype.add=function(t){W6[t](this.opt,this.axisModel,this.group,this._transformGroup)},e.prototype.getGroup=function(){return this.group},e.innerTextLayout=function(t,r,n){var i=u9(r-t),o,a;return Mm(i)?(a=n>0?"top":"bottom",o="center"):Mm(i-ss)?(a=n>0?"bottom":"top",o="center"):(a="middle",i>0&&i<ss?o=n>0?"right":"left":o=n>0?"left":"right"),{rotation:i,textAlign:o,textVerticalAlign:a}},e.makeAxisEventDataBase=function(t){var r={componentType:t.mainType,componentIndex:t.componentIndex};return r[t.mainType+"Index"]=t.componentIndex,r},e.isLabelSilent=function(t){var r=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||r&&r.show)},e}(),W6={axisLine:function(e,t,r,n){var i=t.get(["axisLine","show"]);if(i==="auto"&&e.handleAutoShown&&(i=e.handleAutoShown("axisLine")),!!i){var o=t.axis.getExtent(),a=n.transform,s=[o[0],0],l=[o[1],0],u=s[0]>l[0];a&&(Xr(s,s,a),Xr(l,l,a));var c=ot({lineCap:"round"},t.getModel(["axisLine","lineStyle"]).getLineStyle()),f=new Ts({shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:c,strokeContainThreshold:e.strokeContainThreshold||5,silent:!0,z2:1});qd(f.shape,f.style.lineWidth),f.anid="line",r.add(f);var h=t.get(["axisLine","symbol"]);if(h!=null){var d=t.get(["axisLine","symbolSize"]);Et(h)&&(h=[h,h]),(Et(d)||be(d))&&(d=[d,d]);var p=fE(t.get(["axisLine","symbolOffset"])||0,d),v=d[0],g=d[1];N([{rotate:e.rotation+Math.PI/2,offset:p[0],r:0},{rotate:e.rotation-Math.PI/2,offset:p[1],r:Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]))}],function(m,y){if(h[y]!=="none"&&h[y]!=null){var _=Li(h[y],-v/2,-g/2,v,g,c.stroke,!0),b=m.r+m.offset,T=u?l:s;_.attr({rotation:m.rotate,x:T[0]+b*Math.cos(e.rotation),y:T[1]-b*Math.sin(e.rotation),silent:!0,z2:11}),r.add(_)}})}}},axisTickLabel:function(e,t,r,n){var i=tat(r,n,t,e),o=rat(r,n,t,e);if(Qot(t,o,i),eat(r,n,t,e.tickDirection),t.get(["axisLabel","hideOverlap"])){var a=Oit(Ct(o,function(s){return{label:s,priority:s.z2,defaultAttr:{ignore:s.ignore}}}));Rit(a)}},axisName:function(e,t,r,n){var i=yi(e.axisName,t.get("name"));if(!!i){var o=t.get("nameLocation"),a=e.nameDirection,s=t.getModel("nameTextStyle"),l=t.get("nameGap")||0,u=t.axis.getExtent(),c=u[0]>u[1]?-1:1,f=[o==="start"?u[0]-c*l:o==="end"?u[1]+c*l:(u[0]+u[1])/2,X6(o)?e.labelOffset+a*l:0],h,d=t.get("nameRotate");d!=null&&(d=d*ss/180);var p;X6(o)?h=$l.innerTextLayout(e.rotation,d!=null?d:e.rotation,a):(h=Jot(e.rotation,o,d||0,u),p=e.axisNameAvailableWidth,p!=null&&(p=Math.abs(p/Math.sin(h.rotation)),!isFinite(p)&&(p=null)));var v=s.getFont(),g=t.get("nameTruncate",!0)||{},m=g.ellipsis,y=yi(e.nameTruncateMaxWidth,g.maxWidth,p),_=new Je({x:f[0],y:f[1],rotation:h.rotation,silent:$l.isLabelSilent(t),style:an(s,{text:i,font:v,overflow:"truncate",width:y,ellipsis:m,fill:s.getTextColor()||t.get(["axisLine","lineStyle","color"]),align:s.get("align")||h.textAlign,verticalAlign:s.get("verticalAlign")||h.textVerticalAlign}),z2:1});if(qP({el:_,componentModel:t,itemName:i}),_.__fullText=i,_.anid="name",t.get("triggerEvent")){var b=$l.makeAxisEventDataBase(t);b.targetType="axisName",b.name=i,ie(_).eventData=b}n.add(_),_.updateTransform(),r.add(_),_.decomposeTransform()}}};function Jot(e,t,r,n){var i=u9(r-e),o,a,s=n[0]>n[1],l=t==="start"&&!s||t!=="start"&&s;return Mm(i-ss/2)?(a=l?"bottom":"top",o="center"):Mm(i-ss*1.5)?(a=l?"top":"bottom",o="center"):(a="middle",i<ss*1.5&&i>ss/2?o=l?"left":"right":o=l?"right":"left"),{rotation:i,textAlign:o,textVerticalAlign:a}}function Qot(e,t,r){if(!aB(e.axis)){var n=e.get(["axisLabel","showMinLabel"]),i=e.get(["axisLabel","showMaxLabel"]);t=t||[],r=r||[];var o=t[0],a=t[1],s=t[t.length-1],l=t[t.length-2],u=r[0],c=r[1],f=r[r.length-1],h=r[r.length-2];n===!1?(In(o),In(u)):H6(o,a)&&(n?(In(a),In(c)):(In(o),In(u))),i===!1?(In(s),In(f)):H6(l,s)&&(i?(In(l),In(h)):(In(s),In(f)))}}function In(e){e&&(e.ignore=!0)}function H6(e,t){var r=e&&e.getBoundingRect().clone(),n=t&&t.getBoundingRect().clone();if(!(!r||!n)){var i=AP([]);return CP(i,i,-e.rotation),r.applyTransform(Ac([],i,e.getLocalTransform())),n.applyTransform(Ac([],i,t.getLocalTransform())),r.intersect(n)}}function X6(e){return e==="middle"||e==="center"}function MB(e,t,r,n,i){for(var o=[],a=[],s=[],l=0;l<e.length;l++){var u=e[l].coord;a[0]=u,a[1]=0,s[0]=u,s[1]=r,t&&(Xr(a,a,t),Xr(s,s,t));var c=new Ts({shape:{x1:a[0],y1:a[1],x2:s[0],y2:s[1]},style:n,z2:2,autoBatch:!0,silent:!0});qd(c.shape,c.style.lineWidth),c.anid=i+"_"+e[l].tickValue,o.push(c)}return o}function tat(e,t,r,n){var i=r.axis,o=r.getModel("axisTick"),a=o.get("show");if(a==="auto"&&n.handleAutoShown&&(a=n.handleAutoShown("axisTick")),!(!a||i.scale.isBlank())){for(var s=o.getModel("lineStyle"),l=n.tickDirection*o.get("length"),u=i.getTicksCoords(),c=MB(u,t.transform,l,te(s.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}),"ticks"),f=0;f<c.length;f++)e.add(c[f]);return c}}function eat(e,t,r,n){var i=r.axis,o=r.getModel("minorTick");if(!(!o.get("show")||i.scale.isBlank())){var a=i.getMinorTicksCoords();if(!!a.length)for(var s=o.getModel("lineStyle"),l=n*o.get("length"),u=te(s.getLineStyle(),te(r.getModel("axisTick").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})),c=0;c<a.length;c++)for(var f=MB(a[c],t.transform,l,u,"minorticks_"+c),h=0;h<f.length;h++)e.add(f[h])}}function rat(e,t,r,n){var i=r.axis,o=yi(n.axisLabelShow,r.get(["axisLabel","show"]));if(!(!o||i.scale.isBlank())){var a=r.getModel("axisLabel"),s=a.get("margin"),l=i.getViewLabels(),u=(yi(n.labelRotate,a.get("rotate"))||0)*ss/180,c=$l.innerTextLayout(n.rotation,u,n.labelDirection),f=r.getCategories&&r.getCategories(!0),h=[],d=$l.isLabelSilent(r),p=r.get("triggerEvent");return N(l,function(v,g){var m=i.scale.type==="ordinal"?i.scale.getRawOrdinalNumber(v.tickValue):v.tickValue,y=v.formattedLabel,_=v.rawLabel,b=a;if(f&&f[m]){var T=f[m];It(T)&&T.textStyle&&(b=new br(T.textStyle,a,r.ecModel))}var S=b.getTextColor()||r.get(["axisLine","lineStyle","color"]),P=i.dataToCoord(m),C=new Je({x:P,y:n.labelOffset+n.labelDirection*s,rotation:c.rotation,silent:d,z2:10+(v.level||0),style:an(b,{text:y,align:b.getShallow("align",!0)||c.textAlign,verticalAlign:b.getShallow("verticalAlign",!0)||b.getShallow("baseline",!0)||c.textVerticalAlign,fill:Ut(S)?S(i.type==="category"?_:i.type==="value"?m+"":m,g):S})});if(C.anid="label_"+m,p){var A=$l.makeAxisEventDataBase(r);A.targetType="axisLabel",A.value=_,A.tickIndex=g,i.type==="category"&&(A.dataIndex=m),ie(C).eventData=A}t.add(C),C.updateTransform(),h.push(C),e.add(C),C.decomposeTransform()}),h}}const kB=$l;function nat(e,t){var r={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return iat(r,e,t),r.seriesInvolved&&aat(r,e),r}function iat(e,t,r){var n=t.getComponent("tooltip"),i=t.getComponent("axisPointer"),o=i.get("link",!0)||[],a=[];N(r.getCoordinateSystems(),function(s){if(!s.axisPointerEnabled)return;var l=i0(s.model),u=e.coordSysAxesInfo[l]={};e.coordSysMap[l]=s;var c=s.model,f=c.getModel("tooltip",n);if(N(s.getAxes(),_e(v,!1,null)),s.getTooltipAxes&&n&&f.get("show")){var h=f.get("trigger")==="axis",d=f.get(["axisPointer","type"])==="cross",p=s.getTooltipAxes(f.get(["axisPointer","axis"]));(h||d)&&N(p.baseAxes,_e(v,d?"cross":!0,h)),d&&N(p.otherAxes,_e(v,"cross",!1))}function v(g,m,y){var _=y.model.getModel("axisPointer",i),b=_.get("show");if(!(!b||b==="auto"&&!g&&!p3(_))){m==null&&(m=_.get("triggerTooltip")),_=g?oat(y,f,i,t,g,m):_;var T=_.get("snap"),S=i0(y.model),P=m||T||y.type==="category",C=e.axesInfo[S]={key:S,axis:y,coordSys:s,axisPointerModel:_,triggerTooltip:m,involveSeries:P,snap:T,useHandle:p3(_),seriesModels:[],linkGroup:null};u[S]=C,e.seriesInvolved=e.seriesInvolved||P;var A=sat(o,y);if(A!=null){var M=a[A]||(a[A]={axesInfo:{}});M.axesInfo[S]=C,M.mapper=o[A].mapper,C.linkGroup=M}}}})}function oat(e,t,r,n,i,o){var a=t.getModel("axisPointer"),s=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};N(s,function(h){l[h]=zt(a.get(h))}),l.snap=e.type!=="category"&&!!o,a.get("type")==="cross"&&(l.type="line");var u=l.label||(l.label={});if(u.show==null&&(u.show=!1),i==="cross"){var c=a.get(["label","show"]);if(u.show=c!=null?c:!0,!o){var f=l.lineStyle=a.get("crossStyle");f&&te(u,f.textStyle)}}return e.model.getModel("axisPointer",new br(l,r,n))}function aat(e,t){t.eachSeries(function(r){var n=r.coordinateSystem,i=r.get(["tooltip","trigger"],!0),o=r.get(["tooltip","show"],!0);!n||i==="none"||i===!1||i==="item"||o===!1||r.get(["axisPointer","show"],!0)===!1||N(e.coordSysAxesInfo[i0(n.model)],function(a){var s=a.axis;n.getAxis(s.dim)===s&&(a.seriesModels.push(r),a.seriesDataCount==null&&(a.seriesDataCount=0),a.seriesDataCount+=r.getData().count())})})}function sat(e,t){for(var r=t.model,n=t.dim,i=0;i<e.length;i++){var o=e[i]||{};if(M2(o[n+"AxisId"],r.id)||M2(o[n+"AxisIndex"],r.componentIndex)||M2(o[n+"AxisName"],r.name))return i}}function M2(e,t){return e==="all"||ut(e)&&ce(e,t)>=0||e===t}function lat(e){var t=PE(e);if(!!t){var r=t.axisPointerModel,n=t.axis.scale,i=r.option,o=r.get("status"),a=r.get("value");a!=null&&(a=n.parse(a));var s=p3(r);o==null&&(i.status=s?"show":"hide");var l=n.getExtent().slice();l[0]>l[1]&&l.reverse(),(a==null||a>l[1])&&(a=l[1]),a<l[0]&&(a=l[0]),i.value=a,s&&(i.status=t.axis.scale.isBlank()?"hide":"show")}}function PE(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[i0(e)]}function uat(e){var t=PE(e);return t&&t.axisPointerModel}function p3(e){return!!e.get(["handle","show"])}function i0(e){return e.type+"||"+e.id}var Y6={},cat=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i,o){this.axisPointerClass&&lat(r),e.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(r,i,!0)},t.prototype.updateAxisPointer=function(r,n,i,o){this._doUpdateAxisPointerClass(r,i,!1)},t.prototype.remove=function(r,n){var i=this._axisPointer;i&&i.remove(n)},t.prototype.dispose=function(r,n){this._disposeAxisPointer(n),e.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(r,n,i){var o=t.getAxisPointerClass(this.axisPointerClass);if(!!o){var a=uat(r);a?(this._axisPointer||(this._axisPointer=new o)).render(r,a,n,i):this._disposeAxisPointer(n)}},t.prototype._disposeAxisPointer=function(r){this._axisPointer&&this._axisPointer.dispose(r),this._axisPointer=null},t.registerAxisPointerClass=function(r,n){Y6[r]=n},t.getAxisPointerClass=function(r){return r&&Y6[r]},t.type="axis",t}(Qn);const xB=cat;var v3=Oe();function fat(e,t,r,n){var i=r.axis;if(!i.scale.isBlank()){var o=r.getModel("splitArea"),a=o.getModel("areaStyle"),s=a.get("color"),l=n.coordinateSystem.getRect(),u=i.getTicksCoords({tickModel:o,clamp:!0});if(!!u.length){var c=s.length,f=v3(e).splitAreaColors,h=jt(),d=0;if(f)for(var p=0;p<u.length;p++){var v=f.get(u[p].tickValue);if(v!=null){d=(v+(c-1)*p)%c;break}}var g=i.toGlobalCoord(u[0].coord),m=a.getAreaStyle();s=ut(s)?s:[s];for(var p=1;p<u.length;p++){var y=i.toGlobalCoord(u[p].coord),_=void 0,b=void 0,T=void 0,S=void 0;i.isHorizontal()?(_=g,b=l.y,T=y-_,S=l.height,g=_+T):(_=l.x,b=g,T=l.width,S=y-b,g=b+S);var P=u[p-1].tickValue;P!=null&&h.set(P,d),t.add(new Ke({anid:P!=null?"area_"+P:null,shape:{x:_,y:b,width:T,height:S},style:te({fill:s[d]},m),autoBatch:!0,silent:!0})),d=(d+1)%c}v3(e).splitAreaColors=h}}}function hat(e){v3(e).splitAreaColors=null}var dat=["axisLine","axisTickLabel","axisName"],pat=["splitArea","splitLine","minorSplitLine"],LB=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="CartesianAxisPointer",r}return t.prototype.render=function(r,n,i,o){this.group.removeAll();var a=this._axisGroup;if(this._axisGroup=new De,this.group.add(this._axisGroup),!!r.get("show")){var s=r.getCoordSysModel(),l=d3(s,r),u=new kB(r,ot({handleAutoShown:function(f){for(var h=s.coordinateSystem.getCartesians(),d=0;d<h.length;d++)if(l3(h[d].getOtherAxis(r.axis).scale))return!0;return!1}},l));N(dat,u.add,u),this._axisGroup.add(u.getGroup()),N(pat,function(f){r.get([f,"show"])&&vat[f](this,this._axisGroup,r,s)},this);var c=o&&o.type==="changeAxisOrder"&&o.isInitSort;c||uN(a,this._axisGroup,r),e.prototype.render.call(this,r,n,i,o)}},t.prototype.remove=function(){hat(this)},t.type="cartesianAxis",t}(xB),vat={splitLine:function(e,t,r,n){var i=r.axis;if(!i.scale.isBlank()){var o=r.getModel("splitLine"),a=o.getModel("lineStyle"),s=a.get("color");s=ut(s)?s:[s];for(var l=n.coordinateSystem.getRect(),u=i.isHorizontal(),c=0,f=i.getTicksCoords({tickModel:o}),h=[],d=[],p=a.getLineStyle(),v=0;v<f.length;v++){var g=i.toGlobalCoord(f[v].coord);u?(h[0]=g,h[1]=l.y,d[0]=g,d[1]=l.y+l.height):(h[0]=l.x,h[1]=g,d[0]=l.x+l.width,d[1]=g);var m=c++%s.length,y=f[v].tickValue,_=new Ts({anid:y!=null?"line_"+f[v].tickValue:null,autoBatch:!0,shape:{x1:h[0],y1:h[1],x2:d[0],y2:d[1]},style:te({stroke:s[m]},p),silent:!0});qd(_.shape,p.lineWidth),t.add(_)}}},minorSplitLine:function(e,t,r,n){var i=r.axis,o=r.getModel("minorSplitLine"),a=o.getModel("lineStyle"),s=n.coordinateSystem.getRect(),l=i.isHorizontal(),u=i.getMinorTicksCoords();if(!!u.length)for(var c=[],f=[],h=a.getLineStyle(),d=0;d<u.length;d++)for(var p=0;p<u[d].length;p++){var v=i.toGlobalCoord(u[d][p].coord);l?(c[0]=v,c[1]=s.y,f[0]=v,f[1]=s.y+s.height):(c[0]=s.x,c[1]=v,f[0]=s.x+s.width,f[1]=v);var g=new Ts({anid:"minor_line_"+u[d][p].tickValue,autoBatch:!0,shape:{x1:c[0],y1:c[1],x2:f[0],y2:f[1]},style:h,silent:!0});qd(g.shape,h.lineWidth),t.add(g)}},splitArea:function(e,t,r,n){fat(e,t,r,n)}},IB=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="xAxis",t}(LB),gat=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=IB.type,r}return t.type="yAxis",t}(LB),mat=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="grid",r}return t.prototype.render=function(r,n){this.group.removeAll(),r.get("show")&&this.group.add(new Ke({shape:r.coordinateSystem.getRect(),style:te({fill:r.get("backgroundColor")},r.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(Qn),q6={offset:0};function OB(e){e.registerComponentView(mat),e.registerComponentModel(Fot),e.registerCoordinateSystem("cartesian2d",Kot),B6(e,"x",f3,q6),B6(e,"y",f3,q6),e.registerComponentView(IB),e.registerComponentView(gat),e.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}function D0(e){Br(OB),e.registerSeriesModel(kot),e.registerChartView(Dot),e.registerLayout(SE("scatter"))}var Z6="\0_ec_interaction_mutex";function K6(e,t){return!!yat(e)[t]}function yat(e){return e[Z6]||(e[Z6]={})}cu({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},Dr);var _at=function(e){mt(t,e);function t(r){var n=e.call(this)||this;n._zr=r;var i=Vt(n._mousedownHandler,n),o=Vt(n._mousemoveHandler,n),a=Vt(n._mouseupHandler,n),s=Vt(n._mousewheelHandler,n),l=Vt(n._pinchHandler,n);return n.enable=function(u,c){this.disable(),this._opt=te(zt(c)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),u==null&&(u=!0),(u===!0||u==="move"||u==="pan")&&(r.on("mousedown",i),r.on("mousemove",o),r.on("mouseup",a)),(u===!0||u==="scale"||u==="zoom")&&(r.on("mousewheel",s),r.on("pinch",l))},n.disable=function(){r.off("mousedown",i),r.off("mousemove",o),r.off("mouseup",a),r.off("mousewheel",s),r.off("pinch",l)},n}return t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(r){this.pointerChecker=r},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(r){if(!BM(r)){for(var n=r.target;n;){if(n.draggable)return;n=n.__hostTarget||n.parent}var i=r.offsetX,o=r.offsetY;this.pointerChecker&&this.pointerChecker(r,i,o)&&(this._x=i,this._y=o,this._dragging=!0)}},t.prototype._mousemoveHandler=function(r){if(!(!this._dragging||!Ug("moveOnMouseMove",r,this._opt)||r.gestureEvent==="pinch"||K6(this._zr,"globalPan"))){var n=r.offsetX,i=r.offsetY,o=this._x,a=this._y,s=n-o,l=i-a;this._x=n,this._y=i,this._opt.preventDefaultMouseMove&&Hl(r.event),RB(this,"pan","moveOnMouseMove",r,{dx:s,dy:l,oldX:o,oldY:a,newX:n,newY:i,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(r){BM(r)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(r){var n=Ug("zoomOnMouseWheel",r,this._opt),i=Ug("moveOnMouseWheel",r,this._opt),o=r.wheelDelta,a=Math.abs(o),s=r.offsetX,l=r.offsetY;if(!(o===0||!n&&!i)){if(n){var u=a>3?1.4:a>1?1.2:1.1,c=o>0?u:1/u;k2(this,"zoom","zoomOnMouseWheel",r,{scale:c,originX:s,originY:l,isAvailableBehavior:null})}if(i){var f=Math.abs(o),h=(o>0?1:-1)*(f>3?.4:f>1?.15:.05);k2(this,"scrollMove","moveOnMouseWheel",r,{scrollDelta:h,originX:s,originY:l,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(r){if(!K6(this._zr,"globalPan")){var n=r.pinchScale>1?1.1:1/1.1;k2(this,"zoom",null,r,{scale:n,originX:r.pinchX,originY:r.pinchY,isAvailableBehavior:null})}},t}(Di);function k2(e,t,r,n,i){e.pointerChecker&&e.pointerChecker(n,i.originX,i.originY)&&(Hl(n.event),RB(e,t,r,n,i))}function RB(e,t,r,n,i){i.isAvailableBehavior=Vt(Ug,null,r,n),e.trigger(t,i)}function Ug(e,t,r){var n=r[e];return!e||n&&(!Et(n)||t.event[n+"Key"])}const bat=_at;function wat(e,t,r){var n=e.target;n.x+=t,n.y+=r,n.dirty()}function Sat(e,t,r,n){var i=e.target,o=e.zoomLimit,a=e.zoom=e.zoom||1;if(a*=t,o){var s=o.min||0,l=o.max||1/0;a=Math.max(Math.min(l,a),s)}var u=a/e.zoom;e.zoom=a,i.x-=(r-i.x)*(u-1),i.y-=(n-i.y)*(u-1),i.scaleX*=u,i.scaleY*=u,i.dirty()}var Tat={axisPointer:1,tooltip:1,brush:1};function Pat(e,t,r){var n=t.getComponentByElement(e.topTarget),i=n&&n.coordinateSystem;return n&&n!==r&&!Tat.hasOwnProperty(n.mainType)&&i&&i.model!==r}var J6=Xr,Eat=function(e){mt(t,e);function t(r){var n=e.call(this)||this;return n.type="view",n.dimensions=["x","y"],n._roamTransformable=new El,n._rawTransformable=new El,n.name=r,n}return t.prototype.setBoundingRect=function(r,n,i,o){return this._rect=new ae(r,n,i,o),this._rect},t.prototype.getBoundingRect=function(){return this._rect},t.prototype.setViewRect=function(r,n,i,o){this._transformTo(r,n,i,o),this._viewRect=new ae(r,n,i,o)},t.prototype._transformTo=function(r,n,i,o){var a=this.getBoundingRect(),s=this._rawTransformable;s.transform=a.calculateTransform(new ae(r,n,i,o));var l=s.parent;s.parent=null,s.decomposeTransform(),s.parent=l,this._updateTransform()},t.prototype.setCenter=function(r,n){!r||(this._center=[We(r[0],n.getWidth()),We(r[1],n.getHeight())],this._updateCenterAndZoom())},t.prototype.setZoom=function(r){r=r||1;var n=this.zoomLimit;n&&(n.max!=null&&(r=Math.min(n.max,r)),n.min!=null&&(r=Math.max(n.min,r))),this._zoom=r,this._updateCenterAndZoom()},t.prototype.getDefaultCenter=function(){var r=this.getBoundingRect(),n=r.x+r.width/2,i=r.y+r.height/2;return[n,i]},t.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},t.prototype.getZoom=function(){return this._zoom||1},t.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},t.prototype._updateCenterAndZoom=function(){var r=this._rawTransformable.getLocalTransform(),n=this._roamTransformable,i=this.getDefaultCenter(),o=this.getCenter(),a=this.getZoom();o=Xr([],o,r),i=Xr([],i,r),n.originX=o[0],n.originY=o[1],n.x=i[0]-o[0],n.y=i[1]-o[1],n.scaleX=n.scaleY=a,this._updateTransform()},t.prototype._updateTransform=function(){var r=this._roamTransformable,n=this._rawTransformable;n.parent=r,r.updateTransform(),n.updateTransform(),V7(this.transform||(this.transform=[]),n.transform||Uc()),this._rawTransform=n.getLocalTransform(),this.invTransform=this.invTransform||[],B1(this.invTransform,this.transform),this.decomposeTransform()},t.prototype.getTransformInfo=function(){var r=this._rawTransformable,n=this._roamTransformable,i=new El;return i.transform=n.transform,i.decomposeTransform(),{roam:{x:i.x,y:i.y,scaleX:i.scaleX,scaleY:i.scaleY},raw:{x:r.x,y:r.y,scaleX:r.scaleX,scaleY:r.scaleY}}},t.prototype.getViewRect=function(){return this._viewRect},t.prototype.getViewRectAfterRoam=function(){var r=this.getBoundingRect().clone();return r.applyTransform(this.transform),r},t.prototype.dataToPoint=function(r,n,i){var o=n?this._rawTransform:this.transform;return i=i||[],o?J6(i,r,o):Dq(i,r)},t.prototype.pointToData=function(r){var n=this.invTransform;return n?J6([],r,n):[r[0],r[1]]},t.prototype.convertToPixel=function(r,n,i){var o=Q6(n);return o===this?o.dataToPoint(i):null},t.prototype.convertFromPixel=function(r,n,i){var o=Q6(n);return o===this?o.pointToData(i):null},t.prototype.containPoint=function(r){return this.getViewRectAfterRoam().contain(r[0],r[1])},t.dimensions=["x","y"],t}(El);function Q6(e){var t=e.seriesModel;return t?t.coordinateSystem:null}const Aat=Eat;function t5(e,t){return e.pointToProjected?e.pointToProjected(t):e.pointToData(t)}function Cat(e,t,r,n){var i=e.getZoom(),o=e.getCenter(),a=t.zoom,s=e.projectedToPoint?e.projectedToPoint(o):e.dataToPoint(o);if(t.dx!=null&&t.dy!=null&&(s[0]-=t.dx,s[1]-=t.dy,e.setCenter(t5(e,s),n)),a!=null){if(r){var l=r.min||0,u=r.max||1/0;a=Math.max(Math.min(i*a,u),l)/i}e.scaleX*=a,e.scaleY*=a;var c=(t.originX-e.x)*(a-1),f=(t.originY-e.y)*(a-1);e.x-=c,e.y-=f,e.updateTransform(),e.setCenter(t5(e,s),n),e.setZoom(a*i)}return{center:e.getCenter(),zoom:e.getZoom()}}function Mat(e){var t=e;t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var r=[t],n,i;n=r.pop();)if(i=n.children,n.isExpand&&i.length)for(var o=i.length,a=o-1;a>=0;a--){var s=i[a];s.hierNode={defaultAncestor:null,ancestor:s,prelim:0,modifier:0,change:0,shift:0,i:a,thread:null},r.push(s)}}function kat(e,t){var r=e.isExpand?e.children:[],n=e.parentNode.children,i=e.hierNode.i?n[e.hierNode.i-1]:null;if(r.length){Iat(e);var o=(r[0].hierNode.prelim+r[r.length-1].hierNode.prelim)/2;i?(e.hierNode.prelim=i.hierNode.prelim+t(e,i),e.hierNode.modifier=e.hierNode.prelim-o):e.hierNode.prelim=o}else i&&(e.hierNode.prelim=i.hierNode.prelim+t(e,i));e.parentNode.hierNode.defaultAncestor=Oat(e,i,e.parentNode.hierNode.defaultAncestor||n[0],t)}function xat(e){var t=e.hierNode.prelim+e.parentNode.hierNode.modifier;e.setLayout({x:t},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier}function e5(e){return arguments.length?e:Nat}function qh(e,t){return e-=Math.PI/2,{x:t*Math.cos(e),y:t*Math.sin(e)}}function Lat(e,t){return Ps(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function Iat(e){for(var t=e.children,r=t.length,n=0,i=0;--r>=0;){var o=t[r];o.hierNode.prelim+=n,o.hierNode.modifier+=n,i+=o.hierNode.change,n+=o.hierNode.shift+i}}function Oat(e,t,r,n){if(t){for(var i=e,o=e,a=o.parentNode.children[0],s=t,l=i.hierNode.modifier,u=o.hierNode.modifier,c=a.hierNode.modifier,f=s.hierNode.modifier;s=x2(s),o=L2(o),s&&o;){i=x2(i),a=L2(a),i.hierNode.ancestor=e;var h=s.hierNode.prelim+f-o.hierNode.prelim-u+n(s,o);h>0&&(Dat(Rat(s,e,r),e,h),u+=h,l+=h),f+=s.hierNode.modifier,u+=o.hierNode.modifier,l+=i.hierNode.modifier,c+=a.hierNode.modifier}s&&!x2(i)&&(i.hierNode.thread=s,i.hierNode.modifier+=f-l),o&&!L2(a)&&(a.hierNode.thread=o,a.hierNode.modifier+=u-c,r=e)}return r}function x2(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function L2(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function Rat(e,t,r){return e.hierNode.ancestor.parentNode===t.parentNode?e.hierNode.ancestor:r}function Dat(e,t,r){var n=r/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=n,t.hierNode.shift+=r,t.hierNode.modifier+=r,t.hierNode.prelim+=r,e.hierNode.change+=n}function Nat(e,t){return e.parentNode===t.parentNode?1:2}var Fat=function(){function e(){this.parentPoint=[],this.childPoints=[]}return e}(),Bat=function(e){mt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Fat},t.prototype.buildPath=function(r,n){var i=n.childPoints,o=i.length,a=n.parentPoint,s=i[0],l=i[o-1];if(o===1){r.moveTo(a[0],a[1]),r.lineTo(s[0],s[1]);return}var u=n.orient,c=u==="TB"||u==="BT"?0:1,f=1-c,h=We(n.forkPosition,1),d=[];d[c]=a[c],d[f]=a[f]+(l[f]-a[f])*h,r.moveTo(a[0],a[1]),r.lineTo(d[0],d[1]),r.moveTo(s[0],s[1]),d[c]=s[c],r.lineTo(d[0],d[1]),d[c]=l[c],r.lineTo(d[0],d[1]),r.lineTo(l[0],l[1]);for(var p=1;p<o-1;p++){var v=i[p];r.moveTo(v[0],v[1]),d[c]=v[c],r.lineTo(d[0],d[1])}},t}(he),$at=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._mainGroup=new De,r}return t.prototype.init=function(r,n){this._controller=new bat(n.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(r,n,i){var o=r.getData(),a=r.layoutInfo,s=this._mainGroup,l=r.get("layout");l==="radial"?(s.x=a.x+a.width/2,s.y=a.y+a.height/2):(s.x=a.x,s.y=a.y),this._updateViewCoordSys(r,i),this._updateController(r,n,i);var u=this._data;o.diff(u).add(function(c){r5(o,c)&&n5(o,c,null,s,r)}).update(function(c,f){var h=u.getItemGraphicEl(f);if(!r5(o,c)){h&&o5(u,f,h,s,r);return}n5(o,c,h,s,r)}).remove(function(c){var f=u.getItemGraphicEl(c);f&&o5(u,c,f,s,r)}).execute(),this._nodeScaleRatio=r.get("nodeScaleRatio"),this._updateNodeAndLinkScale(r),r.get("expandAndCollapse")===!0&&o.eachItemGraphicEl(function(c,f){c.off("click").on("click",function(){i.dispatchAction({type:"treeExpandAndCollapse",seriesId:r.id,dataIndex:f})})}),this._data=o},t.prototype._updateViewCoordSys=function(r,n){var i=r.getData(),o=[];i.each(function(f){var h=i.getItemLayout(f);h&&!isNaN(h.x)&&!isNaN(h.y)&&o.push([+h.x,+h.y])});var a=[],s=[];QK(o,a,s);var l=this._min,u=this._max;s[0]-a[0]===0&&(a[0]=l?l[0]:a[0]-1,s[0]=u?u[0]:s[0]+1),s[1]-a[1]===0&&(a[1]=l?l[1]:a[1]-1,s[1]=u?u[1]:s[1]+1);var c=r.coordinateSystem=new Aat;c.zoomLimit=r.get("scaleLimit"),c.setBoundingRect(a[0],a[1],s[0]-a[0],s[1]-a[1]),c.setCenter(r.get("center"),n),c.setZoom(r.get("zoom")),this.group.attr({x:c.x,y:c.y,scaleX:c.scaleX,scaleY:c.scaleY}),this._min=a,this._max=s},t.prototype._updateController=function(r,n,i){var o=this,a=this._controller,s=this._controllerHost,l=this.group;a.setPointerChecker(function(u,c,f){var h=l.getBoundingRect();return h.applyTransform(l.transform),h.contain(c,f)&&!Pat(u,i,r)}),a.enable(r.get("roam")),s.zoomLimit=r.get("scaleLimit"),s.zoom=r.coordinateSystem.getZoom(),a.off("pan").off("zoom").on("pan",function(u){wat(s,u.dx,u.dy),i.dispatchAction({seriesId:r.id,type:"treeRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){Sat(s,u.scale,u.originX,u.originY),i.dispatchAction({seriesId:r.id,type:"treeRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),o._updateNodeAndLinkScale(r),i.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(r){var n=r.getData(),i=this._getNodeGlobalScale(r);n.eachItemGraphicEl(function(o,a){o.setSymbolScale(i)})},t.prototype._getNodeGlobalScale=function(r){var n=r.coordinateSystem;if(n.type!=="view")return 1;var i=this._nodeScaleRatio,o=n.scaleX||1,a=n.getZoom(),s=(a-1)*i+1;return s/o},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t}(Yn);function r5(e,t){var r=e.getItemLayout(t);return r&&!isNaN(r.x)&&!isNaN(r.y)}function n5(e,t,r,n,i){var o=!r,a=e.tree.getNodeByDataIndex(t),s=a.getModel(),l=a.getVisual("style").fill,u=a.isExpand===!1&&a.children.length!==0?l:"#fff",c=e.tree.root,f=a.parentNode===c?a:a.parentNode||a,h=e.getItemGraphicEl(f.dataIndex),d=f.getLayout(),p=h?{x:h.__oldX,y:h.__oldY,rawX:h.__radialOldRawX,rawY:h.__radialOldRawY}:d,v=a.getLayout();o?(r=new fy(e,t,null,{symbolInnerColor:u,useNameLabel:!0}),r.x=p.x,r.y=p.y):r.updateData(e,t,null,{symbolInnerColor:u,useNameLabel:!0}),r.__radialOldRawX=r.__radialRawX,r.__radialOldRawY=r.__radialRawY,r.__radialRawX=v.rawX,r.__radialRawY=v.rawY,n.add(r),e.setItemGraphicEl(t,r),r.__oldX=r.x,r.__oldY=r.y,hr(r,{x:v.x,y:v.y},i);var g=r.getSymbolPath();if(i.get("layout")==="radial"){var m=c.children[0],y=m.getLayout(),_=m.children.length,b=void 0,T=void 0;if(v.x===y.x&&a.isExpand===!0&&m.children.length){var S={x:(m.children[0].getLayout().x+m.children[_-1].getLayout().x)/2,y:(m.children[0].getLayout().y+m.children[_-1].getLayout().y)/2};b=Math.atan2(S.y-y.y,S.x-y.x),b<0&&(b=Math.PI*2+b),T=S.x<y.x,T&&(b=b-Math.PI)}else b=Math.atan2(v.y-y.y,v.x-y.x),b<0&&(b=Math.PI*2+b),a.children.length===0||a.children.length!==0&&a.isExpand===!1?(T=v.x<y.x,T&&(b=b-Math.PI)):(T=v.x>y.x,T||(b=b-Math.PI));var P=T?"left":"right",C=s.getModel("label"),A=C.get("rotate"),M=A*(Math.PI/180),k=g.getTextContent();k&&(g.setTextConfig({position:C.get("position")||P,rotation:A==null?-b:M,origin:"center"}),k.setStyle("verticalAlign","middle"))}var O=s.get(["emphasis","focus"]),F=O==="relative"?F7(a.getAncestorsIndices(),a.getDescendantIndices()):O==="ancestor"?a.getAncestorsIndices():O==="descendant"?a.getDescendantIndices():null;F&&(ie(r).focus=F),zat(i,a,c,r,p,d,v,n),r.__edge&&(r.onHoverStateChange=function(z){if(z!=="blur"){var R=a.parentNode&&e.getItemGraphicEl(a.parentNode.dataIndex);R&&R.hoverState===M0||BS(r.__edge,z)}})}function zat(e,t,r,n,i,o,a,s){var l=t.getModel(),u=e.get("edgeShape"),c=e.get("layout"),f=e.getOrient(),h=e.get(["lineStyle","curveness"]),d=e.get("edgeForkPosition"),p=l.getModel("lineStyle").getLineStyle(),v=n.__edge;if(u==="curve")t.parentNode&&t.parentNode!==r&&(v||(v=n.__edge=new j1({shape:g3(c,f,h,i,i)})),hr(v,{shape:g3(c,f,h,o,a)},e));else if(u==="polyline"&&c==="orthogonal"&&t!==r&&t.children&&t.children.length!==0&&t.isExpand===!0){for(var g=t.children,m=[],y=0;y<g.length;y++){var _=g[y].getLayout();m.push([_.x,_.y])}v||(v=n.__edge=new Bat({shape:{parentPoint:[a.x,a.y],childPoints:[[a.x,a.y]],orient:f,forkPosition:d}})),hr(v,{shape:{parentPoint:[a.x,a.y],childPoints:m}},e)}v&&!(u==="polyline"&&!t.isExpand)&&(v.useStyle(te({strokeNoScale:!0,fill:null},p)),Xd(v,l,"lineStyle"),$P(v),s.add(v))}function i5(e,t,r,n,i){var o=t.tree.root,a=DB(o,e),s=a.source,l=a.sourceLayout,u=t.getItemGraphicEl(e.dataIndex);if(!!u){var c=t.getItemGraphicEl(s.dataIndex),f=c.__edge,h=u.__edge||(s.isExpand===!1||s.children.length===1?f:void 0),d=n.get("edgeShape"),p=n.get("layout"),v=n.get("orient"),g=n.get(["lineStyle","curveness"]);h&&(d==="curve"?Zl(h,{shape:g3(p,v,g,l,l),style:{opacity:0}},n,{cb:function(){r.remove(h)},removeOpt:i}):d==="polyline"&&n.get("layout")==="orthogonal"&&Zl(h,{shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]]},style:{opacity:0}},n,{cb:function(){r.remove(h)},removeOpt:i}))}}function DB(e,t){for(var r=t.parentNode===e?t:t.parentNode||t,n;n=r.getLayout(),n==null;)r=r.parentNode===e?r:r.parentNode||r;return{source:r,sourceLayout:n}}function o5(e,t,r,n,i){var o=e.tree.getNodeByDataIndex(t),a=e.tree.root,s=DB(a,o).sourceLayout,l={duration:i.get("animationDurationUpdate"),easing:i.get("animationEasingUpdate")};Zl(r,{x:s.x+1,y:s.y+1},i,{cb:function(){n.remove(r),e.setItemGraphicEl(t,null)},removeOpt:l}),r.fadeOut(null,e.hostModel,{fadeLabel:!0,animation:l}),o.children.forEach(function(u){i5(u,e,n,i,l)}),i5(o,e,n,i,l)}function g3(e,t,r,n,i){var o,a,s,l,u,c,f,h;if(e==="radial"){u=n.rawX,f=n.rawY,c=i.rawX,h=i.rawY;var d=qh(u,f),p=qh(u,f+(h-f)*r),v=qh(c,h+(f-h)*r),g=qh(c,h);return{x1:d.x||0,y1:d.y||0,x2:g.x||0,y2:g.y||0,cpx1:p.x||0,cpy1:p.y||0,cpx2:v.x||0,cpy2:v.y||0}}else u=n.x,f=n.y,c=i.x,h=i.y,(t==="LR"||t==="RL")&&(o=u+(c-u)*r,a=f,s=c+(u-c)*r,l=h),(t==="TB"||t==="BT")&&(o=u,a=f+(h-f)*r,s=c,l=h+(f-h)*r);return{x1:u,y1:f,x2:c,y2:h,cpx1:o,cpy1:a,cpx2:s,cpy2:l}}const Vat=$at;var qn=Oe();function Uat(e){var t=e.mainData,r=e.datas;r||(r={main:t},e.datasAttr={main:"data"}),e.datas=e.mainData=null,NB(t,r,e),N(r,function(n){N(t.TRANSFERABLE_METHODS,function(i){n.wrapMethod(i,_e(Gat,e))})}),t.wrapMethod("cloneShallow",_e(Wat,e)),N(t.CHANGABLE_METHODS,function(n){t.wrapMethod(n,_e(jat,e))}),xi(r[t.dataType]===t)}function Gat(e,t){if(Yat(this)){var r=ot({},qn(this).datas);r[this.dataType]=t,NB(t,r,e)}else EE(t,this.dataType,qn(this).mainData,e);return t}function jat(e,t){return e.struct&&e.struct.update(),t}function Wat(e,t){return N(qn(t).datas,function(r,n){r!==t&&EE(r.cloneShallow(),n,t,e)}),t}function Hat(e){var t=qn(this).mainData;return e==null||t==null?t:qn(t).datas[e]}function Xat(){var e=qn(this).mainData;return e==null?[{data:e}]:Ct(ve(qn(e).datas),function(t){return{type:t,data:qn(e).datas[t]}})}function Yat(e){return qn(e).mainData===e}function NB(e,t,r){qn(e).datas={},N(t,function(n,i){EE(n,i,e,r)})}function EE(e,t,r,n){qn(r).datas[t]=e,qn(e).mainData=r,e.dataType=t,n.struct&&(e[n.structAttr]=n.struct,n.struct[n.datasAttr[t]]=e),e.getLinkedData=Hat,e.getLinkedDataAll=Xat}var qat=function(){function e(t,r){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=r}return e.prototype.isRemoved=function(){return this.dataIndex<0},e.prototype.eachNode=function(t,r,n){Ut(t)&&(n=r,r=t,t=null),t=t||{},Et(t)&&(t={order:t});var i=t.order||"preorder",o=this[t.attr||"children"],a;i==="preorder"&&(a=r.call(n,this));for(var s=0;!a&&s<o.length;s++)o[s].eachNode(t,r,n);i==="postorder"&&r.call(n,this)},e.prototype.updateDepthAndHeight=function(t){var r=0;this.depth=t;for(var n=0;n<this.children.length;n++){var i=this.children[n];i.updateDepthAndHeight(t+1),i.height>r&&(r=i.height)}this.height=r+1},e.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var r=0,n=this.children,i=n.length;r<i;r++){var o=n[r].getNodeById(t);if(o)return o}},e.prototype.contains=function(t){if(t===this)return!0;for(var r=0,n=this.children,i=n.length;r<i;r++){var o=n[r].contains(t);if(o)return o}},e.prototype.getAncestors=function(t){for(var r=[],n=t?this:this.parentNode;n;)r.push(n),n=n.parentNode;return r.reverse(),r},e.prototype.getAncestorsIndices=function(){for(var t=[],r=this;r;)t.push(r.dataIndex),r=r.parentNode;return t.reverse(),t},e.prototype.getDescendantIndices=function(){var t=[];return this.eachNode(function(r){t.push(r.dataIndex)}),t},e.prototype.getValue=function(t){var r=this.hostTree.data;return r.getStore().get(r.getDimensionIndex(t||"value"),this.dataIndex)},e.prototype.setLayout=function(t,r){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,r)},e.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},e.prototype.getModel=function(t){if(!(this.dataIndex<0)){var r=this.hostTree,n=r.data.getItemModel(this.dataIndex);return n.getModel(t)}},e.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},e.prototype.setVisual=function(t,r){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,r)},e.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},e.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},e.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},e.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,r=0;r<t.length;++r)if(t[r]===this)return r;return-1}return-1},e.prototype.isAncestorOf=function(t){for(var r=t.parentNode;r;){if(r===this)return!0;r=r.parentNode}return!1},e.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},e}(),Zat=function(){function e(t){this.type="tree",this._nodes=[],this.hostModel=t}return e.prototype.eachNode=function(t,r,n){this.root.eachNode(t,r,n)},e.prototype.getNodeByDataIndex=function(t){var r=this.data.getRawIndex(t);return this._nodes[r]},e.prototype.getNodeById=function(t){return this.root.getNodeById(t)},e.prototype.update=function(){for(var t=this.data,r=this._nodes,n=0,i=r.length;n<i;n++)r[n].dataIndex=-1;for(var n=0,i=t.count();n<i;n++)r[t.getRawIndex(n)].dataIndex=n},e.prototype.clearLayouts=function(){this.data.clearItemLayouts()},e.createTree=function(t,r,n){var i=new e(r),o=[],a=1;s(t);function s(c,f){var h=c.value;a=Math.max(a,ut(h)?h.length:1),o.push(c);var d=new qat(Xn(c.name,""),i);f?Kat(d,f):i.root=d,i._nodes.push(d);var p=c.children;if(p)for(var v=0;v<p.length;v++)s(p[v],d)}i.root.updateDepthAndHeight(0);var l=jF(o,{coordDimensions:["value"],dimensionsCount:a}).dimensions,u=new Fl(l,r);return u.initData(o),n&&n(u),Uat({mainData:u,struct:i,structAttr:"tree"}),i.update(),i},e}();function Kat(e,t){var r=t.children;e.parentNode!==t&&(r.push(e),e.parentNode=t)}const Jat=Zat;function Qat(e,t){for(var r=[];e;){var n=e.dataIndex;r.push({name:e.name,dataIndex:n,value:t.getRawValue(n)}),e=e.parentNode}return r.reverse(),r}var tst=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.hasSymbolVisual=!0,r.ignoreStyleOnData=!0,r}return t.prototype.getInitialData=function(r){var n={name:r.name,children:r.data},i=r.leaves||{},o=new br(i,this,this.ecModel),a=Jat.createTree(n,this,s);function s(f){f.wrapMethod("getItemModel",function(h,d){var p=a.getNodeByDataIndex(d);return p&&p.children.length&&p.isExpand||(h.parentModel=o),h})}var l=0;a.eachNode("preorder",function(f){f.depth>l&&(l=f.depth)});var u=r.expandAndCollapse,c=u&&r.initialTreeDepth>=0?r.initialTreeDepth:l;return a.root.eachNode("preorder",function(f){var h=f.hostTree.data.getRawDataItem(f.dataIndex);f.isExpand=h&&h.collapsed!=null?!h.collapsed:f.depth<=c}),a.data},t.prototype.getOrient=function(){var r=this.get("orient");return r==="horizontal"?r="LR":r==="vertical"&&(r="TB"),r},t.prototype.setZoom=function(r){this.option.zoom=r},t.prototype.setCenter=function(r){this.option.center=r},t.prototype.formatTooltip=function(r,n,i){for(var o=this.getData().tree,a=o.root.children[0],s=o.getNodeByDataIndex(r),l=s.getValue(),u=s.name;s&&s!==a;)u=s.parentNode.name+"."+u,s=s.parentNode;return Es("nameValue",{name:u,value:l,noValue:isNaN(l)||l==null})},t.prototype.getDataParams=function(r){var n=e.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(r);return n.treeAncestors=Qat(i,this),n.collapsed=!i.isExpand,n},t.type="series.tree",t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t}(To);const est=tst;function rst(e,t,r){for(var n=[e],i=[],o;o=n.pop();)if(i.push(o),o.isExpand){var a=o.children;if(a.length)for(var s=0;s<a.length;s++)n.push(a[s])}for(;o=i.pop();)t(o,r)}function uh(e,t){for(var r=[e],n;n=r.pop();)if(t(n),n.isExpand){var i=n.children;if(i.length)for(var o=i.length-1;o>=0;o--)r.push(i[o])}}function nst(e,t){e.eachSeriesByType("tree",function(r){ist(r,t)})}function ist(e,t){var r=Lat(e,t);e.layoutInfo=r;var n=e.get("layout"),i=0,o=0,a=null;n==="radial"?(i=2*Math.PI,o=Math.min(r.height,r.width)/2,a=e5(function(_,b){return(_.parentNode===b.parentNode?1:2)/_.depth})):(i=r.width,o=r.height,a=e5());var s=e.getData().tree.root,l=s.children[0];if(l){Mat(s),rst(l,kat,a),s.hierNode.modifier=-l.hierNode.prelim,uh(l,xat);var u=l,c=l,f=l;uh(l,function(_){var b=_.getLayout().x;b<u.getLayout().x&&(u=_),b>c.getLayout().x&&(c=_),_.depth>f.depth&&(f=_)});var h=u===c?1:a(u,c)/2,d=h-u.getLayout().x,p=0,v=0,g=0,m=0;if(n==="radial")p=i/(c.getLayout().x+h+d),v=o/(f.depth-1||1),uh(l,function(_){g=(_.getLayout().x+d)*p,m=(_.depth-1)*v;var b=qh(g,m);_.setLayout({x:b.x,y:b.y,rawX:g,rawY:m},!0)});else{var y=e.getOrient();y==="RL"||y==="LR"?(v=o/(c.getLayout().x+h+d),p=i/(f.depth-1||1),uh(l,function(_){m=(_.getLayout().x+d)*v,g=y==="LR"?(_.depth-1)*p:i-(_.depth-1)*p,_.setLayout({x:g,y:m},!0)})):(y==="TB"||y==="BT")&&(p=i/(c.getLayout().x+h+d),v=o/(f.depth-1||1),uh(l,function(_){g=(_.getLayout().x+d)*p,m=y==="TB"?(_.depth-1)*v:o-(_.depth-1)*v,_.setLayout({x:g,y:m},!0)}))}}}function ost(e){e.eachSeriesByType("tree",function(t){var r=t.getData(),n=r.tree;n.eachNode(function(i){var o=i.getModel(),a=o.getModel("itemStyle").getItemStyle(),s=r.ensureUniqueItemVisual(i.dataIndex,"style");ot(s,a)})})}function ast(e){e.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,r){r.eachComponent({mainType:"series",subType:"tree",query:t},function(n){var i=t.dataIndex,o=n.getData().tree,a=o.getNodeByDataIndex(i);a.isExpand=!a.isExpand})}),e.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(t,r,n){r.eachComponent({mainType:"series",subType:"tree",query:t},function(i){var o=i.coordinateSystem,a=Cat(o,t,void 0,n);i.setCenter&&i.setCenter(a.center),i.setZoom&&i.setZoom(a.zoom)})})}function sst(e){e.registerChartView(Vat),e.registerSeriesModel(est),e.registerLayout(nst),e.registerVisual(ost),ast(e)}var o0=N,lst=It,Vm=-1,AE=function(){function e(t){var r=t.mappingMethod,n=t.type,i=this.option=zt(t);this.type=n,this.mappingMethod=r,this._normalizeData=fst[r];var o=e.visualHandlers[n];this.applyVisual=o.applyVisual,this.getColorMapper=o.getColorMapper,this._normalizedToVisual=o._normalizedToVisual[r],r==="piecewise"?(I2(i),ust(i)):r==="category"?i.categories?cst(i):I2(i,!0):(xi(r!=="linear"||i.dataExtent),I2(i))}return e.prototype.mapValueToVisual=function(t){var r=this._normalizeData(t);return this._normalizedToVisual(r,t)},e.prototype.getNormalizer=function(){return Vt(this._normalizeData,this)},e.listVisualTypes=function(){return ve(e.visualHandlers)},e.isValidType=function(t){return e.visualHandlers.hasOwnProperty(t)},e.eachVisual=function(t,r,n){It(t)?N(t,r,n):r.call(n,t)},e.mapVisual=function(t,r,n){var i,o=ut(t)?[]:It(t)?{}:(i=!0,null);return e.eachVisual(t,function(a,s){var l=r.call(n,a,s);i?o=l:o[s]=l}),o},e.retrieveVisuals=function(t){var r={},n;return t&&o0(e.visualHandlers,function(i,o){t.hasOwnProperty(o)&&(r[o]=t[o],n=!0)}),n?r:null},e.prepareVisualTypes=function(t){if(ut(t))t=t.slice();else if(lst(t)){var r=[];o0(t,function(n,i){r.push(i)}),t=r}else return[];return t.sort(function(n,i){return i==="color"&&n!=="color"&&n.indexOf("color")===0?1:-1}),t},e.dependsOn=function(t,r){return r==="color"?!!(t&&t.indexOf(r)===0):t===r},e.findPieceIndex=function(t,r,n){for(var i,o=1/0,a=0,s=r.length;a<s;a++){var l=r[a].value;if(l!=null){if(l===t||Et(l)&&l===t+"")return a;n&&h(l,a)}}for(var a=0,s=r.length;a<s;a++){var u=r[a],c=u.interval,f=u.close;if(c){if(c[0]===-1/0){if(rv(f[1],t,c[1]))return a}else if(c[1]===1/0){if(rv(f[0],c[0],t))return a}else if(rv(f[0],c[0],t)&&rv(f[1],t,c[1]))return a;n&&h(c[0],a),n&&h(c[1],a)}}if(n)return t===1/0?r.length-1:t===-1/0?0:i;function h(d,p){var v=Math.abs(d-t);v<o&&(o=v,i=p)}},e.visualHandlers={color:{applyVisual:ch("color"),getColorMapper:function(){var t=this.option;return Vt(t.mappingMethod==="category"?function(r,n){return!n&&(r=this._normalizeData(r)),Zh.call(this,r)}:function(r,n,i){var o=!!i;return!n&&(r=this._normalizeData(r)),i=T_(r,t.parsedVisual,i),o?i:na(i,"rgba")},this)},_normalizedToVisual:{linear:function(t){return na(T_(t,this.option.parsedVisual),"rgba")},category:Zh,piecewise:function(t,r){var n=y3.call(this,r);return n==null&&(n=na(T_(t,this.option.parsedVisual),"rgba")),n},fixed:_l}},colorHue:ev(function(t,r){return P_(t,r)}),colorSaturation:ev(function(t,r){return P_(t,null,r)}),colorLightness:ev(function(t,r){return P_(t,null,null,r)}),colorAlpha:ev(function(t,r){return PS(t,r)}),decal:{applyVisual:ch("decal"),_normalizedToVisual:{linear:null,category:Zh,piecewise:null,fixed:null}},opacity:{applyVisual:ch("opacity"),_normalizedToVisual:m3([0,1])},liftZ:{applyVisual:ch("liftZ"),_normalizedToVisual:{linear:_l,category:_l,piecewise:_l,fixed:_l}},symbol:{applyVisual:function(t,r,n){var i=this.mapValueToVisual(t);n("symbol",i)},_normalizedToVisual:{linear:a5,category:Zh,piecewise:function(t,r){var n=y3.call(this,r);return n==null&&(n=a5.call(this,t)),n},fixed:_l}},symbolSize:{applyVisual:ch("symbolSize"),_normalizedToVisual:m3([0,1])}},e}();function ust(e){var t=e.pieceList;e.hasSpecialVisual=!1,N(t,function(r,n){r.originIndex=n,r.visual!=null&&(e.hasSpecialVisual=!0)})}function cst(e){var t=e.categories,r=e.categoryMap={},n=e.visual;if(o0(t,function(a,s){r[a]=s}),!ut(n)){var i=[];It(n)?o0(n,function(a,s){var l=r[s];i[l!=null?l:Vm]=a}):i[Vm]=n,n=FB(e,i)}for(var o=t.length-1;o>=0;o--)n[o]==null&&(delete r[t[o]],t.pop())}function I2(e,t){var r=e.visual,n=[];It(r)?o0(r,function(o){n.push(o)}):r!=null&&n.push(r);var i={color:1,symbol:1};!t&&n.length===1&&!i.hasOwnProperty(e.type)&&(n[1]=n[0]),FB(e,n)}function ev(e){return{applyVisual:function(t,r,n){var i=this.mapValueToVisual(t);n("color",e(r("color"),i))},_normalizedToVisual:m3([0,1])}}function a5(e){var t=this.option.visual;return t[Math.round(la(e,[0,1],[0,t.length-1],!0))]||{}}function ch(e){return function(t,r,n){n(e,this.mapValueToVisual(t))}}function Zh(e){var t=this.option.visual;return t[this.option.loop&&e!==Vm?e%t.length:e]}function _l(){return this.option.visual[0]}function m3(e){return{linear:function(t){return la(t,e,this.option.visual,!0)},category:Zh,piecewise:function(t,r){var n=y3.call(this,r);return n==null&&(n=la(t,e,this.option.visual,!0)),n},fixed:_l}}function y3(e){var t=this.option,r=t.pieceList;if(t.hasSpecialVisual){var n=AE.findPieceIndex(e,r),i=r[n];if(i&&i.visual)return i.visual[this.type]}}function FB(e,t){return e.visual=t,e.type==="color"&&(e.parsedVisual=Ct(t,function(r){var n=Hn(r);return n||[0,0,0,1]})),t}var fst={linear:function(e){return la(e,this.option.dataExtent,[0,1],!0)},piecewise:function(e){var t=this.option.pieceList,r=AE.findPieceIndex(e,t,!0);if(r!=null)return la(r,[0,t.length-1],[0,1],!0)},category:function(e){var t=this.option.categories?this.option.categoryMap[e]:e;return t==null?Vm:t},fixed:Dr};function rv(e,t,r){return e?t<=r:t<r}const sn=AE;var s5=Ts.prototype,O2=j1.prototype,BB=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}();(function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(BB);function R2(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var hst=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="ec-line",n}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new BB},t.prototype.buildPath=function(r,n){R2(n)?s5.buildPath.call(this,r,n):O2.buildPath.call(this,r,n)},t.prototype.pointAt=function(r){return R2(this.shape)?s5.pointAt.call(this,r):O2.pointAt.call(this,r)},t.prototype.tangentAt=function(r){var n=this.shape,i=R2(n)?[n.x2-n.x1,n.y2-n.y1]:O2.tangentAt.call(this,r);return PP(i,i)},t}(he);const dst=hst;var D2=["fromSymbol","toSymbol"];function l5(e){return"_"+e+"Type"}function u5(e,t,r){var n=t.getItemVisual(r,e);if(!(!n||n==="none")){var i=t.getItemVisual(r,e+"Size"),o=t.getItemVisual(r,e+"Rotate"),a=t.getItemVisual(r,e+"Offset"),s=t.getItemVisual(r,e+"KeepAspect"),l=pF(i),u=fE(a||0,l),c=Li(n,-l[0]/2+u[0],-l[1]/2+u[1],l[0],l[1],null,s);return c.__specifiedRotation=o==null||isNaN(o)?void 0:+o*Math.PI/180||0,c.name=e,c}}function pst(e){var t=new dst({name:"line",subPixelOptimize:!0});return _3(t.shape,e),t}function _3(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var r=t[2];r?(e.cpx1=r[0],e.cpy1=r[1]):(e.cpx1=NaN,e.cpy1=NaN)}var vst=function(e){mt(t,e);function t(r,n,i){var o=e.call(this)||this;return o._createLine(r,n,i),o}return t.prototype._createLine=function(r,n,i){var o=r.hostModel,a=r.getItemLayout(n),s=pst(a);s.shape.percent=0,So(s,{shape:{percent:1}},o,n),this.add(s),N(D2,function(l){var u=u5(l,r,n);this.add(u),this[l5(l)]=r.getItemVisual(n,l)},this),this._updateCommonStl(r,n,i)},t.prototype.updateData=function(r,n,i){var o=r.hostModel,a=this.childOfName("line"),s=r.getItemLayout(n),l={shape:{}};_3(l.shape,s),hr(a,l,o,n),N(D2,function(u){var c=r.getItemVisual(n,u),f=l5(u);if(this[f]!==c){this.remove(this.childOfName(u));var h=u5(u,r,n);this.add(h)}this[f]=c},this),this._updateCommonStl(r,n,i)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(r,n,i){var o=r.hostModel,a=this.childOfName("line"),s=i&&i.emphasisLineStyle,l=i&&i.blurLineStyle,u=i&&i.selectLineStyle,c=i&&i.labelStatesModels,f=i&&i.emphasisDisabled,h=i&&i.focus,d=i&&i.blurScope;if(!i||r.hasItemOption){var p=r.getItemModel(n),v=p.getModel("emphasis");s=v.getModel("lineStyle").getLineStyle(),l=p.getModel(["blur","lineStyle"]).getLineStyle(),u=p.getModel(["select","lineStyle"]).getLineStyle(),f=v.get("disabled"),h=v.get("focus"),d=v.get("blurScope"),c=lu(p)}var g=r.getItemVisual(n,"style"),m=g.stroke;a.useStyle(g),a.style.fill=null,a.style.strokeNoScale=!0,a.ensureState("emphasis").style=s,a.ensureState("blur").style=l,a.ensureState("select").style=u,N(D2,function(S){var P=this.childOfName(S);if(P){P.setColor(m),P.style.opacity=g.opacity;for(var C=0;C<Jn.length;C++){var A=Jn[C],M=a.getState(A);if(M){var k=M.style||{},O=P.ensureState(A),F=O.style||(O.style={});k.stroke!=null&&(F[P.__isEmptyBrush?"stroke":"fill"]=k.stroke),k.opacity!=null&&(F.opacity=k.opacity)}}P.markRedraw()}},this);var y=o.getRawValue(n);uf(this,c,{labelDataIndex:n,labelFetcher:{getFormattedLabel:function(S,P){return o.getFormattedLabel(S,P,r.dataType)}},inheritColor:m||"#000",defaultOpacity:g.opacity,defaultText:(y==null?r.getName(n):isFinite(y)?qe(y):y)+""});var _=this.getTextContent();if(_){var b=c.normal;_.__align=_.style.align,_.__verticalAlign=_.style.verticalAlign,_.__position=b.get("position")||"middle";var T=b.get("distance");ut(T)||(T=[T,T]),_.__labelDistance=T}this.setTextConfig({position:null,local:!0,inside:!1}),ql(this,h,d,f)},t.prototype.highlight=function(){Wd(this)},t.prototype.downplay=function(){Hd(this)},t.prototype.updateLayout=function(r,n){this.setLinePoints(r.getItemLayout(n))},t.prototype.setLinePoints=function(r){var n=this.childOfName("line");_3(n.shape,r),n.dirty()},t.prototype.beforeUpdate=function(){var r=this,n=r.childOfName("fromSymbol"),i=r.childOfName("toSymbol"),o=r.getTextContent();if(!n&&!i&&(!o||o.ignore))return;for(var a=1,s=this.parent;s;)s.scaleX&&(a/=s.scaleX),s=s.parent;var l=r.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var u=l.shape.percent,c=l.pointAt(0),f=l.pointAt(u),h=$7([],f,c);PP(h,h);function d(M,k){var O=M.__specifiedRotation;if(O==null){var F=l.tangentAt(k);M.attr("rotation",(k===1?-1:1)*Math.PI/2-Math.atan2(F[1],F[0]))}else M.attr("rotation",O)}if(n&&(n.setPosition(c),d(n,0),n.scaleX=n.scaleY=a*u,n.markRedraw()),i&&(i.setPosition(f),d(i,1),i.scaleX=i.scaleY=a*u,i.markRedraw()),o&&!o.ignore){o.x=o.y=0,o.originX=o.originY=0;var p=void 0,v=void 0,g=o.__labelDistance,m=g[0]*a,y=g[1]*a,_=u/2,b=l.tangentAt(_),T=[b[1],-b[0]],S=l.pointAt(_);T[1]>0&&(T[0]=-T[0],T[1]=-T[1]);var P=b[0]<0?-1:1;if(o.__position!=="start"&&o.__position!=="end"){var C=-Math.atan2(b[1],b[0]);f[0]<c[0]&&(C=Math.PI+C),o.rotation=C}var A=void 0;switch(o.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":A=-y,v="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":A=y,v="top";break;default:A=0,v="middle"}switch(o.__position){case"end":o.x=h[0]*m+f[0],o.y=h[1]*y+f[1],p=h[0]>.8?"left":h[0]<-.8?"right":"center",v=h[1]>.8?"top":h[1]<-.8?"bottom":"middle";break;case"start":o.x=-h[0]*m+c[0],o.y=-h[1]*y+c[1],p=h[0]>.8?"right":h[0]<-.8?"left":"center",v=h[1]>.8?"bottom":h[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":o.x=m*P+c[0],o.y=c[1]+A,p=b[0]<0?"right":"left",o.originX=-m*P,o.originY=-A;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":o.x=S[0],o.y=S[1]+A,p="center",o.originY=-A;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":o.x=-m*P+f[0],o.y=f[1]+A,p=b[0]>=0?"right":"left",o.originX=m*P,o.originY=-A;break}o.scaleX=o.scaleY=a,o.setStyle({verticalAlign:o.__verticalAlign||v,align:o.__align||p})}},t}(De);const gst=vst;var mst=function(){function e(t){this.group=new De,this._LineCtor=t||gst}return e.prototype.updateData=function(t){var r=this;this._progressiveEls=null;var n=this,i=n.group,o=n._lineData;n._lineData=t,o||i.removeAll();var a=c5(t);t.diff(o).add(function(s){r._doAdd(t,s,a)}).update(function(s,l){r._doUpdate(o,t,l,s,a)}).remove(function(s){i.remove(o.getItemGraphicEl(s))}).execute()},e.prototype.updateLayout=function(){var t=this._lineData;!t||t.eachItemGraphicEl(function(r,n){r.updateLayout(t,n)},this)},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=c5(t),this._lineData=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,r){this._progressiveEls=[];function n(s){!s.isGroup&&!yst(s)&&(s.incremental=!0,s.ensureState("emphasis").hoverLayer=!0)}for(var i=t.start;i<t.end;i++){var o=r.getItemLayout(i);if(N2(o)){var a=new this._LineCtor(r,i,this._seriesScope);a.traverse(n),this.group.add(a),r.setItemGraphicEl(i,a),this._progressiveEls.push(a)}}},e.prototype.remove=function(){this.group.removeAll()},e.prototype.eachRendered=function(t){lf(this._progressiveEls||this.group,t)},e.prototype._doAdd=function(t,r,n){var i=t.getItemLayout(r);if(!!N2(i)){var o=new this._LineCtor(t,r,n);t.setItemGraphicEl(r,o),this.group.add(o)}},e.prototype._doUpdate=function(t,r,n,i,o){var a=t.getItemGraphicEl(n);if(!N2(r.getItemLayout(i))){this.group.remove(a);return}a?a.updateData(r,i,o):a=new this._LineCtor(r,i,o),r.setItemGraphicEl(i,a),this.group.add(a)},e}();function yst(e){return e.animators&&e.animators.length>0}function c5(e){var t=e.hostModel,r=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:r.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:r.get("disabled"),blurScope:r.get("blurScope"),focus:r.get("focus"),labelStatesModels:lu(t)}}function f5(e){return isNaN(e[0])||isNaN(e[1])}function N2(e){return e&&!f5(e[0])&&!f5(e[1])}const _st=mst;function bst(e,t,r,n,i,o){e=e||0;var a=r[1]-r[0];if(i!=null&&(i=zu(i,[0,a])),o!=null&&(o=Math.max(o,i!=null?i:0)),n==="all"){var s=Math.abs(t[1]-t[0]);s=zu(s,[0,a]),i=o=zu(s,[i,o]),n=0}t[0]=zu(t[0],r),t[1]=zu(t[1],r);var l=F2(t,n);t[n]+=e;var u=i||0,c=r.slice();l.sign<0?c[0]+=u:c[1]-=u,t[n]=zu(t[n],c);var f;return f=F2(t,n),i!=null&&(f.sign!==l.sign||f.span<i)&&(t[1-n]=t[n]+l.sign*i),f=F2(t,n),o!=null&&f.span>o&&(t[1-n]=t[n]+f.sign*o),t}function F2(e,t){var r=e[t]-e[1-t];return{span:Math.abs(r),sign:r>0?-1:r<0?1:t?-1:1}}function zu(e,t){return Math.min(t[1]!=null?t[1]:1/0,Math.max(t[0]!=null?t[0]:-1/0,e))}var h5={color:"fill",borderColor:"stroke"},wst={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},ia=Oe(),Sst=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},t.prototype.getInitialData=function(r,n){return L0(null,this)},t.prototype.getDataParams=function(r,n,i){var o=e.prototype.getDataParams.call(this,r,n);return i&&(o.info=ia(i).info),o},t.type="series.custom",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},t}(To);const Tst=Sst;function Pst(e,t){return t=t||[0,0],Ct(["x","y"],function(r,n){var i=this.getAxis(r),o=t[n],a=e[n]/2;return i.type==="category"?i.getBandWidth():Math.abs(i.dataToCoord(o-a)-i.dataToCoord(o+a))},this)}function Est(e){var t=e.master.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(r){return e.dataToPoint(r)},size:Vt(Pst,e)}}}function Ast(e,t){return t=t||[0,0],Ct([0,1],function(r){var n=t[r],i=e[r]/2,o=[],a=[];return o[r]=n-i,a[r]=n+i,o[1-r]=a[1-r]=t[1-r],Math.abs(this.dataToPoint(o)[r]-this.dataToPoint(a)[r])},this)}function Cst(e){var t=e.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:e.getZoom()},api:{coord:function(r){return e.dataToPoint(r)},size:Vt(Ast,e)}}}function Mst(e,t){var r=this.getAxis(),n=t instanceof Array?t[0]:t,i=(e instanceof Array?e[0]:e)/2;return r.type==="category"?r.getBandWidth():Math.abs(r.dataToCoord(n-i)-r.dataToCoord(n+i))}function kst(e){var t=e.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(r){return e.dataToPoint(r)},size:Vt(Mst,e)}}}function xst(e,t){return t=t||[0,0],Ct(["Radius","Angle"],function(r,n){var i="get"+r+"Axis",o=this[i](),a=t[n],s=e[n]/2,l=o.type==="category"?o.getBandWidth():Math.abs(o.dataToCoord(a-s)-o.dataToCoord(a+s));return r==="Angle"&&(l=l*Math.PI/180),l},this)}function Lst(e){var t=e.getRadiusAxis(),r=e.getAngleAxis(),n=t.getExtent();return n[0]>n[1]&&n.reverse(),{coordSys:{type:"polar",cx:e.cx,cy:e.cy,r:n[1],r0:n[0]},api:{coord:function(i){var o=t.dataToRadius(i[0]),a=r.dataToAngle(i[1]),s=e.coordToPoint([o,a]);return s.push(o,a*Math.PI/180),s},size:Vt(xst,e)}}}function Ist(e){var t=e.getRect(),r=e.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:e.getCellWidth(),cellHeight:e.getCellHeight(),rangeInfo:{start:r.start,end:r.end,weeks:r.weeks,dayCount:r.allDay}},api:{coord:function(n,i){return e.dataToPoint(n,i)}}}}function Ost(e,t,r,n){return e&&(e.legacy||e.legacy!==!1&&!r&&!n&&t!=="tspan"&&(t==="text"||ft(e,"text")))}function Rst(e,t,r){var n=e,i,o,a;if(t==="text")a=n;else{a={},ft(n,"text")&&(a.text=n.text),ft(n,"rich")&&(a.rich=n.rich),ft(n,"textFill")&&(a.fill=n.textFill),ft(n,"textStroke")&&(a.stroke=n.textStroke),ft(n,"fontFamily")&&(a.fontFamily=n.fontFamily),ft(n,"fontSize")&&(a.fontSize=n.fontSize),ft(n,"fontStyle")&&(a.fontStyle=n.fontStyle),ft(n,"fontWeight")&&(a.fontWeight=n.fontWeight),o={type:"text",style:a,silent:!0},i={};var s=ft(n,"textPosition");r?i.position=s?n.textPosition:"inside":s&&(i.position=n.textPosition),ft(n,"textPosition")&&(i.position=n.textPosition),ft(n,"textOffset")&&(i.offset=n.textOffset),ft(n,"textRotation")&&(i.rotation=n.textRotation),ft(n,"textDistance")&&(i.distance=n.textDistance)}return d5(a,e),N(a.rich,function(l){d5(l,l)}),{textConfig:i,textContent:o}}function d5(e,t){!t||(t.font=t.textFont||t.font,ft(t,"textStrokeWidth")&&(e.lineWidth=t.textStrokeWidth),ft(t,"textAlign")&&(e.align=t.textAlign),ft(t,"textVerticalAlign")&&(e.verticalAlign=t.textVerticalAlign),ft(t,"textLineHeight")&&(e.lineHeight=t.textLineHeight),ft(t,"textWidth")&&(e.width=t.textWidth),ft(t,"textHeight")&&(e.height=t.textHeight),ft(t,"textBackgroundColor")&&(e.backgroundColor=t.textBackgroundColor),ft(t,"textPadding")&&(e.padding=t.textPadding),ft(t,"textBorderColor")&&(e.borderColor=t.textBorderColor),ft(t,"textBorderWidth")&&(e.borderWidth=t.textBorderWidth),ft(t,"textBorderRadius")&&(e.borderRadius=t.textBorderRadius),ft(t,"textBoxShadowColor")&&(e.shadowColor=t.textBoxShadowColor),ft(t,"textBoxShadowBlur")&&(e.shadowBlur=t.textBoxShadowBlur),ft(t,"textBoxShadowOffsetX")&&(e.shadowOffsetX=t.textBoxShadowOffsetX),ft(t,"textBoxShadowOffsetY")&&(e.shadowOffsetY=t.textBoxShadowOffsetY))}function p5(e,t,r){var n=e;n.textPosition=n.textPosition||r.position||"inside",r.offset!=null&&(n.textOffset=r.offset),r.rotation!=null&&(n.textRotation=r.rotation),r.distance!=null&&(n.textDistance=r.distance);var i=n.textPosition.indexOf("inside")>=0,o=e.fill||"#000";v5(n,t);var a=n.textFill==null;return i?a&&(n.textFill=r.insideFill||"#fff",!n.textStroke&&r.insideStroke&&(n.textStroke=r.insideStroke),!n.textStroke&&(n.textStroke=o),n.textStrokeWidth==null&&(n.textStrokeWidth=2)):(a&&(n.textFill=e.fill||r.outsideFill||"#000"),!n.textStroke&&r.outsideStroke&&(n.textStroke=r.outsideStroke)),n.text=t.text,n.rich=t.rich,N(t.rich,function(s){v5(s,s)}),n}function v5(e,t){!t||(ft(t,"fill")&&(e.textFill=t.fill),ft(t,"stroke")&&(e.textStroke=t.fill),ft(t,"lineWidth")&&(e.textStrokeWidth=t.lineWidth),ft(t,"font")&&(e.font=t.font),ft(t,"fontStyle")&&(e.fontStyle=t.fontStyle),ft(t,"fontWeight")&&(e.fontWeight=t.fontWeight),ft(t,"fontSize")&&(e.fontSize=t.fontSize),ft(t,"fontFamily")&&(e.fontFamily=t.fontFamily),ft(t,"align")&&(e.textAlign=t.align),ft(t,"verticalAlign")&&(e.textVerticalAlign=t.verticalAlign),ft(t,"lineHeight")&&(e.textLineHeight=t.lineHeight),ft(t,"width")&&(e.textWidth=t.width),ft(t,"height")&&(e.textHeight=t.height),ft(t,"backgroundColor")&&(e.textBackgroundColor=t.backgroundColor),ft(t,"padding")&&(e.textPadding=t.padding),ft(t,"borderColor")&&(e.textBorderColor=t.borderColor),ft(t,"borderWidth")&&(e.textBorderWidth=t.borderWidth),ft(t,"borderRadius")&&(e.textBorderRadius=t.borderRadius),ft(t,"shadowColor")&&(e.textBoxShadowColor=t.shadowColor),ft(t,"shadowBlur")&&(e.textBoxShadowBlur=t.shadowBlur),ft(t,"shadowOffsetX")&&(e.textBoxShadowOffsetX=t.shadowOffsetX),ft(t,"shadowOffsetY")&&(e.textBoxShadowOffsetY=t.shadowOffsetY),ft(t,"textShadowColor")&&(e.textShadowColor=t.textShadowColor),ft(t,"textShadowBlur")&&(e.textShadowBlur=t.textShadowBlur),ft(t,"textShadowOffsetX")&&(e.textShadowOffsetX=t.textShadowOffsetX),ft(t,"textShadowOffsetY")&&(e.textShadowOffsetY=t.textShadowOffsetY))}var $B={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},g5=ve($B);au(wo,function(e,t){return e[t]=1,e},{});wo.join(", ");var Um=["","style","shape","extra"],Wc=Oe();function CE(e,t,r,n,i){var o=e+"Animation",a=HP(e,n,i)||{},s=Wc(t).userDuring;return a.duration>0&&(a.during=s?Vt(Vst,{el:t,userDuring:s}):null,a.setToFinal=!0,a.scope=e),ot(a,r[o]),a}function Dst(e,t,r,n){n=n||{};var i=n.dataIndex,o=n.isInit,a=n.clearStyle,s=r.isAnimationEnabled(),l=Wc(e),u=t.style;l.userDuring=t.during;var c={},f={};if(Gst(e,t,f),y5("shape",t,f),y5("extra",t,f),!o&&s&&(Ust(e,t,c),m5("shape",e,t,c),m5("extra",e,t,c),jst(e,t,u,c)),f.style=u,Fst(e,f,a),$st(e,t),s)if(o){var h={};N(Um,function(p){var v=p?t[p]:t;v&&v.enterFrom&&(p&&(h[p]=h[p]||{}),ot(p?h[p]:h,v.enterFrom))});var d=CE("enter",e,t,r,i);d.duration>0&&e.animateFrom(h,d)}else Bst(e,t,i||0,r,c);Nst(e,t),u?e.dirty():e.markRedraw()}function Nst(e,t){for(var r=Wc(e).leaveToProps,n=0;n<Um.length;n++){var i=Um[n],o=i?t[i]:t;o&&o.leaveTo&&(r||(r=Wc(e).leaveToProps={}),i&&(r[i]=r[i]||{}),ot(i?r[i]:r,o.leaveTo))}}function ME(e,t,r,n){if(e){var i=e.parent,o=Wc(e).leaveToProps;if(o){var a=CE("update",e,t,r,0);a.done=function(){i.remove(e),n&&n()},e.animateTo(o,a)}else i.remove(e),n&&n()}}function Ic(e){return e==="all"}function Fst(e,t,r){var n=t.style;if(!e.isGroup&&n){if(r){e.useStyle({});for(var i=e.animators,o=0;o<i.length;o++){var a=i[o];a.targetName==="style"&&a.changeTarget(e.style)}}e.setStyle(n)}t&&(t.style=null,t&&e.attr(t),t.style=n)}function Bst(e,t,r,n,i){if(i){var o=CE("update",e,t,n,r);o.duration>0&&e.animateFrom(i,o)}}function $st(e,t){ft(t,"silent")&&(e.silent=t.silent),ft(t,"ignore")&&(e.ignore=t.ignore),e instanceof su&&ft(t,"invisible")&&(e.invisible=t.invisible),e instanceof he&&ft(t,"autoBatch")&&(e.autoBatch=t.autoBatch)}var oo={},zst={setTransform:function(e,t){return oo.el[e]=t,this},getTransform:function(e){return oo.el[e]},setShape:function(e,t){var r=oo.el,n=r.shape||(r.shape={});return n[e]=t,r.dirtyShape&&r.dirtyShape(),this},getShape:function(e){var t=oo.el.shape;if(t)return t[e]},setStyle:function(e,t){var r=oo.el,n=r.style;return n&&(n[e]=t,r.dirtyStyle&&r.dirtyStyle()),this},getStyle:function(e){var t=oo.el.style;if(t)return t[e]},setExtra:function(e,t){var r=oo.el.extra||(oo.el.extra={});return r[e]=t,this},getExtra:function(e){var t=oo.el.extra;if(t)return t[e]}};function Vst(){var e=this,t=e.el;if(!!t){var r=Wc(t).userDuring,n=e.userDuring;if(r!==n){e.el=e.userDuring=null;return}oo.el=t,n(zst)}}function m5(e,t,r,n){var i=r[e];if(!!i){var o=t[e],a;if(o){var s=r.transition,l=i.transition;if(l)if(!a&&(a=n[e]={}),Ic(l))ot(a,o);else for(var u=Ze(l),c=0;c<u.length;c++){var f=u[c],h=o[f];a[f]=h}else if(Ic(s)||ce(s,e)>=0){!a&&(a=n[e]={});for(var d=ve(o),c=0;c<d.length;c++){var f=d[c],h=o[f];Wst(i[f],h)&&(a[f]=h)}}}}}function y5(e,t,r){var n=t[e];if(!!n)for(var i=r[e]={},o=ve(n),a=0;a<o.length;a++){var s=o[a];i[s]=dd(n[s])}}function Ust(e,t,r){for(var n=t.transition,i=Ic(n)?wo:Ze(n||[]),o=0;o<i.length;o++){var a=i[o];if(!(a==="style"||a==="shape"||a==="extra")){var s=e[a];r[a]=s}}}function Gst(e,t,r){for(var n=0;n<g5.length;n++){var i=g5[n],o=$B[i],a=t[i];a&&(r[o[0]]=a[0],r[o[1]]=a[1])}for(var n=0;n<wo.length;n++){var s=wo[n];t[s]!=null&&(r[s]=t[s])}}function jst(e,t,r,n){if(!!r){var i=e.style,o;if(i){var a=r.transition,s=t.transition;if(a&&!Ic(a)){var l=Ze(a);!o&&(o=n.style={});for(var u=0;u<l.length;u++){var c=l[u],f=i[c];o[c]=f}}else if(e.getAnimationStyleProps&&(Ic(s)||Ic(a)||ce(s,"style")>=0)){var h=e.getAnimationStyleProps(),d=h?h.style:null;if(d){!o&&(o=n.style={});for(var p=ve(r),u=0;u<p.length;u++){var c=p[u];if(d[c]){var f=i[c];o[c]=f}}}}}}}function Wst(e,t){return Fr(e)?e!==t:e!=null&&isFinite(e)}var zB=Oe(),Hst=["percent","easing","shape","style","extra"];function Xst(e){e.stopAnimation("keyframe"),e.attr(zB(e))}function VB(e,t,r){if(!(!r.isAnimationEnabled()||!t)){if(ut(t)){N(t,function(s){VB(e,s,r)});return}var n=t.keyframes,i=t.duration;if(r&&i==null){var o=HP("enter",r,0);i=o&&o.duration}if(!(!n||!i)){var a=zB(e);N(Um,function(s){if(!(s&&!e[s])){var l;n.sort(function(u,c){return u.percent-c.percent}),N(n,function(u){var c=e.animators,f=s?u[s]:u;if(!!f){var h=ve(f);if(s||(h=yr(h,function(v){return ce(Hst,v)<0})),!!h.length){l||(l=e.animate(s,t.loop,!0),l.scope="keyframe");for(var d=0;d<c.length;d++)c[d]!==l&&c[d].targetName===l.targetName&&c[d].stopTracks(h);s&&(a[s]=a[s]||{});var p=s?a[s]:a;N(h,function(v){p[v]=((s?e[s]:e)||{})[v]}),l.whenWithKeys(i*u.percent,f,h,u.easing)}}}),l&&l.delay(t.delay||0).duration(i).start(t.easing)}})}}}var oa="emphasis",ls="normal",kE="blur",xE="select",As=[ls,oa,kE,xE],B2={normal:["itemStyle"],emphasis:[oa,"itemStyle"],blur:[kE,"itemStyle"],select:[xE,"itemStyle"]},$2={normal:["label"],emphasis:[oa,"label"],blur:[kE,"label"],select:[xE,"label"]},Yst=["x","y"],qst="e\0\0",On={normal:{},emphasis:{},blur:{},select:{}},Zst={cartesian2d:Est,geo:Cst,single:kst,polar:Lst,calendar:Ist};function b3(e){return e instanceof he}function w3(e){return e instanceof su}function Kst(e,t){t.copyTransform(e),w3(t)&&w3(e)&&(t.setStyle(e.style),t.z=e.z,t.z2=e.z2,t.zlevel=e.zlevel,t.invisible=e.invisible,t.ignore=e.ignore,b3(t)&&b3(e)&&t.setShape(e.shape))}var Jst=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i,o){this._progressiveEls=null;var a=this._data,s=r.getData(),l=this.group,u=_5(r,s,n,i);a||l.removeAll(),s.diff(a).add(function(f){z2(i,null,f,u(f,o),r,l,s)}).remove(function(f){var h=a.getItemGraphicEl(f);h&&ME(h,ia(h).option,r)}).update(function(f,h){var d=a.getItemGraphicEl(h);z2(i,d,f,u(f,o),r,l,s)}).execute();var c=r.get("clip",!0)?bB(r.coordinateSystem,!1,r):null;c?l.setClipPath(c):l.removeClipPath(),this._data=s},t.prototype.incrementalPrepareRender=function(r,n,i){this.group.removeAll(),this._data=null},t.prototype.incrementalRender=function(r,n,i,o,a){var s=n.getData(),l=_5(n,s,i,o),u=this._progressiveEls=[];function c(d){d.isGroup||(d.incremental=!0,d.ensureState("emphasis").hoverLayer=!0)}for(var f=r.start;f<r.end;f++){var h=z2(null,null,f,l(f,a),n,this.group,s);h&&(h.traverse(c),u.push(h))}},t.prototype.eachRendered=function(r){lf(this._progressiveEls||this.group,r)},t.prototype.filterForExposedEvent=function(r,n,i,o){var a=n.element;if(a==null||i.name===a)return!0;for(;(i=i.__hostTarget||i.parent)&&i!==this.group;)if(i.name===a)return!0;return!1},t.type="custom",t}(Yn);const Qst=Jst;function LE(e){var t=e.type,r;if(t==="path"){var n=e.shape,i=n.width!=null&&n.height!=null?{x:n.x||0,y:n.y||0,width:n.width,height:n.height}:null,o=jB(n);r=W1(o,null,i,n.layout||"center"),ia(r).customPathData=o}else if(t==="image")r=new ma({}),ia(r).customImagePath=e.style.image;else if(t==="text")r=new Je({});else if(t==="group")r=new De;else{if(t==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var a=iN(t);if(!a){var s="";ne(s)}r=new a}return ia(r).customGraphicType=t,r.name=e.name,r.z2EmphasisLift=1,r.z2SelectLift=1,r}function IE(e,t,r,n,i,o,a){Xst(t);var s=i&&i.normal.cfg;s&&t.setTextConfig(s),n&&n.transition==null&&(n.transition=Yst);var l=n&&n.style;if(l){if(t.type==="text"){var u=l;ft(u,"textFill")&&(u.fill=u.textFill),ft(u,"textStroke")&&(u.stroke=u.textStroke)}var c=void 0,f=b3(t)?l.decal:null;e&&f&&(f.dirty=!0,c=Bm(f,e)),l.__decalPattern=c}if(w3(t)&&l){var c=l.__decalPattern;c&&(l.decal=c)}Dst(t,n,o,{dataIndex:r,isInit:a,clearStyle:!0}),VB(t,n.keyframeAnimation,o)}function UB(e,t,r,n,i){var o=t.isGroup?null:t,a=i&&i[e].cfg;if(o){var s=o.ensureState(e);if(n===!1){var l=o.getState(e);l&&(l.style=null)}else s.style=n||null;a&&(s.textConfig=a),$P(o)}}function tlt(e,t,r){if(!e.isGroup){var n=e,i=r.currentZ,o=r.currentZLevel;n.z=i,n.zlevel=o;var a=t.z2;a!=null&&(n.z2=a||0);for(var s=0;s<As.length;s++)elt(n,t,As[s])}}function elt(e,t,r){var n=r===ls,i=n?t:Gm(t,r),o=i?i.z2:null,a;o!=null&&(a=n?e:e.ensureState(r),a.z2=o||0)}function _5(e,t,r,n){var i=e.get("renderItem"),o=e.coordinateSystem,a={};o&&(a=o.prepareCustoms?o.prepareCustoms(o):Zst[o.type](o));for(var s=te({getWidth:n.getWidth,getHeight:n.getHeight,getZr:n.getZr,getDevicePixelRatio:n.getDevicePixelRatio,value:b,style:S,ordinalRawValue:T,styleEmphasis:P,visual:M,barLayout:k,currentSeriesIndices:O,font:F},a.api||{}),l={context:{},seriesId:e.id,seriesName:e.name,seriesIndex:e.seriesIndex,coordSys:a.coordSys,dataInsideLength:t.count(),encode:rlt(e.getData())},u,c,f={},h={},d={},p={},v=0;v<As.length;v++){var g=As[v];d[g]=e.getModel(B2[g]),p[g]=e.getModel($2[g])}function m(z){return z===u?c||(c=t.getItemModel(z)):t.getItemModel(z)}function y(z,R){return t.hasItemOption?z===u?f[R]||(f[R]=m(z).getModel(B2[R])):m(z).getModel(B2[R]):d[R]}function _(z,R){return t.hasItemOption?z===u?h[R]||(h[R]=m(z).getModel($2[R])):m(z).getModel($2[R]):p[R]}return function(z,R){return u=z,c=null,f={},h={},i&&i(te({dataIndexInside:z,dataIndex:t.getRawIndex(z),actionType:R?R.type:null},l),s)};function b(z,R){return R==null&&(R=u),t.getStore().get(t.getDimensionIndex(z||0),R)}function T(z,R){R==null&&(R=u),z=z||0;var j=t.getDimensionInfo(z);if(!j){var Z=t.getDimensionIndex(z);return Z>=0?t.getStore().get(Z,R):void 0}var q=t.get(j.name,R),tt=j&&j.ordinalMeta;return tt?tt.categories[q]:q}function S(z,R){R==null&&(R=u);var j=t.getItemVisual(R,"style"),Z=j&&j.fill,q=j&&j.opacity,tt=y(R,ls).getItemStyle();Z!=null&&(tt.fill=Z),q!=null&&(tt.opacity=q);var Pt={inheritColor:Et(Z)?Z:"#000"},Ot=_(R,ls),bt=an(Ot,null,Pt,!1,!0);bt.text=Ot.getShallow("show")?qt(e.getFormattedLabel(R,ls),n0(t,R)):null;var wt=Im(Ot,Pt,!1);return A(z,tt),tt=p5(tt,bt,wt),z&&C(tt,z),tt.legacy=!0,tt}function P(z,R){R==null&&(R=u);var j=y(R,oa).getItemStyle(),Z=_(R,oa),q=an(Z,null,null,!0,!0);q.text=Z.getShallow("show")?fd(e.getFormattedLabel(R,oa),e.getFormattedLabel(R,ls),n0(t,R)):null;var tt=Im(Z,null,!0);return A(z,j),j=p5(j,q,tt),z&&C(j,z),j.legacy=!0,j}function C(z,R){for(var j in R)ft(R,j)&&(z[j]=R[j])}function A(z,R){z&&(z.textFill&&(R.textFill=z.textFill),z.textPosition&&(R.textPosition=z.textPosition))}function M(z,R){if(R==null&&(R=u),ft(h5,z)){var j=t.getItemVisual(R,"style");return j?j[h5[z]]:null}if(ft(wst,z))return t.getItemVisual(R,z)}function k(z){if(o.type==="cartesian2d"){var R=o.getBaseAxis();return Wnt(te({axis:R},z))}}function O(){return r.getCurrentSeriesIndices()}function F(z){return fN(z,r)}}function rlt(e){var t={};return N(e.dimensions,function(r){var n=e.getDimensionInfo(r);if(!n.isExtraCoord){var i=n.coordDim,o=t[i]=t[i]||[];o[n.coordDimIndex]=e.getDimensionIndex(r)}}),t}function z2(e,t,r,n,i,o,a){if(!n){o.remove(t);return}var s=OE(e,t,r,n,i,o);return s&&a.setItemGraphicEl(r,s),s&&ql(s,n.focus,n.blurScope,n.emphasisDisabled),s}function OE(e,t,r,n,i,o){var a=-1,s=t;t&&GB(t,n,i)&&(a=ce(o.childrenRef(),t),t=null);var l=!t,u=t;u?u.clearStates():(u=LE(n),s&&Kst(s,u)),n.morph===!1?u.disableMorphing=!0:u.disableMorphing&&(u.disableMorphing=!1),On.normal.cfg=On.normal.conOpt=On.emphasis.cfg=On.emphasis.conOpt=On.blur.cfg=On.blur.conOpt=On.select.cfg=On.select.conOpt=null,On.isLegacy=!1,ilt(u,r,n,i,l,On),nlt(u,r,n,i,l),IE(e,u,r,n,On,i,l),ft(n,"info")&&(ia(u).info=n.info);for(var c=0;c<As.length;c++){var f=As[c];if(f!==ls){var h=Gm(n,f),d=RE(n,h,f);UB(f,u,h,d,On)}}return tlt(u,n,i),n.type==="group"&&olt(e,u,r,n,i),a>=0?o.replaceAt(u,a):o.add(u),u}function GB(e,t,r){var n=ia(e),i=t.type,o=t.shape,a=t.style;return r.isUniversalTransitionEnabled()||i!=null&&i!==n.customGraphicType||i==="path"&&ult(o)&&jB(o)!==n.customPathData||i==="image"&&ft(a,"image")&&a.image!==n.customImagePath}function nlt(e,t,r,n,i){var o=r.clipPath;if(o===!1)e&&e.getClipPath()&&e.removeClipPath();else if(o){var a=e.getClipPath();a&&GB(a,o,n)&&(a=null),a||(a=LE(o),e.setClipPath(a)),IE(null,a,t,o,null,n,i)}}function ilt(e,t,r,n,i,o){if(!e.isGroup){b5(r,null,o),b5(r,oa,o);var a=o.normal.conOpt,s=o.emphasis.conOpt,l=o.blur.conOpt,u=o.select.conOpt;if(a!=null||s!=null||u!=null||l!=null){var c=e.getTextContent();if(a===!1)c&&e.removeTextContent();else{a=o.normal.conOpt=a||{type:"text"},c?c.clearStates():(c=LE(a),e.setTextContent(c)),IE(null,c,t,a,null,n,i);for(var f=a&&a.style,h=0;h<As.length;h++){var d=As[h];if(d!==ls){var p=o[d].conOpt;UB(d,c,p,RE(a,p,d),null)}}f?c.dirty():c.markRedraw()}}}}function b5(e,t,r){var n=t?Gm(e,t):e,i=t?RE(e,n,oa):e.style,o=e.type,a=n?n.textConfig:null,s=e.textContent,l=s?t?Gm(s,t):s:null;if(i&&(r.isLegacy||Ost(i,o,!!a,!!l))){r.isLegacy=!0;var u=Rst(i,o,!t);!a&&u.textConfig&&(a=u.textConfig),!l&&u.textContent&&(l=u.textContent)}if(!t&&l){var c=l;!c.type&&(c.type="text")}var f=t?r[t]:r.normal;f.cfg=a,f.conOpt=l}function Gm(e,t){return t?e?e[t]:null:e}function RE(e,t,r){var n=t&&t.style;return n==null&&r===oa&&e&&(n=e.styleEmphasis),n}function olt(e,t,r,n,i){var o=n.children,a=o?o.length:0,s=n.$mergeChildren,l=s==="byName"||n.diffChildrenByName,u=s===!1;if(!(!a&&!l&&!u)){if(l){slt({api:e,oldChildren:t.children()||[],newChildren:o||[],dataIndex:r,seriesModel:i,group:t});return}u&&t.removeAll();for(var c=0;c<a;c++){var f=o[c],h=t.childAt(c);f?(f.ignore==null&&(f.ignore=!1),OE(e,h,r,f,i,t)):h.ignore=!0}for(var d=t.childCount()-1;d>=c;d--){var p=t.childAt(d);alt(t,p,i)}}}function alt(e,t,r){t&&ME(t,ia(e).option,r)}function slt(e){new BF(e.oldChildren,e.newChildren,w5,w5,e).add(S5).update(S5).remove(llt).execute()}function w5(e,t){var r=e&&e.name;return r!=null?r:qst+t}function S5(e,t){var r=this.context,n=e!=null?r.newChildren[e]:null,i=t!=null?r.oldChildren[t]:null;OE(r.api,i,r.dataIndex,n,r.seriesModel,r.group)}function llt(e){var t=this.context,r=t.oldChildren[e];r&&ME(r,ia(r).option,t.seriesModel)}function jB(e){return e&&(e.pathData||e.d)}function ult(e){return e&&(ft(e,"pathData")||ft(e,"d"))}function clt(e){e.registerChartView(Qst),e.registerSeriesModel(Tst)}var Tl=Oe(),T5=zt,V2=Vt,flt=function(){function e(){this._dragging=!1,this.animationThreshold=15}return e.prototype.render=function(t,r,n,i){var o=r.get("value"),a=r.get("status");if(this._axisModel=t,this._axisPointerModel=r,this._api=n,!(!i&&this._lastValue===o&&this._lastStatus===a)){this._lastValue=o,this._lastStatus=a;var s=this._group,l=this._handle;if(!a||a==="hide"){s&&s.hide(),l&&l.hide();return}s&&s.show(),l&&l.show();var u={};this.makeElOption(u,o,t,r,n);var c=u.graphicKey;c!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=c;var f=this._moveAnimation=this.determineAnimation(t,r);if(!s)s=this._group=new De,this.createPointerEl(s,u,t,r),this.createLabelEl(s,u,t,r),n.getZr().add(s);else{var h=_e(P5,r,f);this.updatePointerEl(s,u,h),this.updateLabelEl(s,u,h,r)}A5(s,r,!0),this._renderHandle(o)}},e.prototype.remove=function(t){this.clear(t)},e.prototype.dispose=function(t){this.clear(t)},e.prototype.determineAnimation=function(t,r){var n=r.get("animation"),i=t.axis,o=i.type==="category",a=r.get("snap");if(!a&&!o)return!1;if(n==="auto"||n==null){var s=this.animationThreshold;if(o&&i.getBandWidth()>s)return!0;if(a){var l=PE(t).seriesDataCount,u=i.getExtent();return Math.abs(u[0]-u[1])/l>s}return!1}return n===!0},e.prototype.makeElOption=function(t,r,n,i,o){},e.prototype.createPointerEl=function(t,r,n,i){var o=r.pointer;if(o){var a=Tl(t).pointerEl=new UQ[o.type](T5(r.pointer));t.add(a)}},e.prototype.createLabelEl=function(t,r,n,i){if(r.label){var o=Tl(t).labelEl=new Je(T5(r.label));t.add(o),E5(o,i)}},e.prototype.updatePointerEl=function(t,r,n){var i=Tl(t).pointerEl;i&&r.pointer&&(i.setStyle(r.pointer.style),n(i,{shape:r.pointer.shape}))},e.prototype.updateLabelEl=function(t,r,n,i){var o=Tl(t).labelEl;o&&(o.setStyle(r.label.style),n(o,{x:r.label.x,y:r.label.y}),E5(o,i))},e.prototype._renderHandle=function(t){if(!(this._dragging||!this.updateHandleTransform)){var r=this._axisPointerModel,n=this._api.getZr(),i=this._handle,o=r.getModel("handle"),a=r.get("status");if(!o.get("show")||!a||a==="hide"){i&&n.remove(i),this._handle=null;return}var s;this._handle||(s=!0,i=this._handle=YP(o.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(u){Hl(u.event)},onmousedown:V2(this._onHandleDragMove,this,0,0),drift:V2(this._onHandleDragMove,this),ondragend:V2(this._onHandleDragEnd,this)}),n.add(i)),A5(i,r,!1),i.setStyle(o.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=o.get("size");ut(l)||(l=[l,l]),i.scaleX=l[0]/2,i.scaleY=l[1]/2,oF(this,"_doDispatchAxisPointer",o.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,s)}},e.prototype._moveHandleToValue=function(t,r){P5(this._axisPointerModel,!r&&this._moveAnimation,this._handle,U2(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},e.prototype._onHandleDragMove=function(t,r){var n=this._handle;if(!!n){this._dragging=!0;var i=this.updateHandleTransform(U2(n),[t,r],this._axisModel,this._axisPointerModel);this._payloadInfo=i,n.stopAnimation(),n.attr(U2(i)),Tl(n).lastProp=null,this._doDispatchAxisPointer()}},e.prototype._doDispatchAxisPointer=function(){var t=this._handle;if(!!t){var r=this._payloadInfo,n=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:r.cursorPoint[0],y:r.cursorPoint[1],tooltipOption:r.tooltipOption,axesInfo:[{axisDim:n.axis.dim,axisIndex:n.componentIndex}]})}},e.prototype._onHandleDragEnd=function(){this._dragging=!1;var t=this._handle;if(!!t){var r=this._axisPointerModel.get("value");this._moveHandleToValue(r),this._api.dispatchAction({type:"hideTip"})}},e.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var r=t.getZr(),n=this._group,i=this._handle;r&&n&&(this._lastGraphicKey=null,n&&r.remove(n),i&&r.remove(i),this._group=null,this._handle=null,this._payloadInfo=null),QS(this,"_doDispatchAxisPointer")},e.prototype.doClear=function(){},e.prototype.buildLabel=function(t,r,n){return n=n||0,{x:t[n],y:t[1-n],width:r[n],height:r[1-n]}},e}();function P5(e,t,r,n){WB(Tl(r).lastProp,n)||(Tl(r).lastProp=n,t?hr(r,n,e):(r.stopAnimation(),r.attr(n)))}function WB(e,t){if(It(e)&&It(t)){var r=!0;return N(t,function(n,i){r=r&&WB(e[i],n)}),!!r}else return e===t}function E5(e,t){e[t.get(["label","show"])?"show":"hide"]()}function U2(e){return{x:e.x||0,y:e.y||0,rotation:e.rotation||0}}function A5(e,t,r){var n=t.get("z"),i=t.get("zlevel");e&&e.traverse(function(o){o.type!=="group"&&(n!=null&&(o.z=n),i!=null&&(o.zlevel=i),o.silent=r)})}const hlt=flt;function dlt(e){var t=e.get("type"),r=e.getModel(t+"Style"),n;return t==="line"?(n=r.getLineStyle(),n.fill=null):t==="shadow"&&(n=r.getAreaStyle(),n.stroke=null),n}function plt(e,t,r,n,i){var o=r.get("value"),a=HB(o,t.axis,t.ecModel,r.get("seriesDataIndices"),{precision:r.get(["label","precision"]),formatter:r.get(["label","formatter"])}),s=r.getModel("label"),l=x0(s.get("padding")||0),u=s.getFont(),c=kP(a,u),f=i.position,h=c.width+l[1]+l[3],d=c.height+l[0]+l[2],p=i.align;p==="right"&&(f[0]-=h),p==="center"&&(f[0]-=h/2);var v=i.verticalAlign;v==="bottom"&&(f[1]-=d),v==="middle"&&(f[1]-=d/2),vlt(f,h,d,n);var g=s.get("backgroundColor");(!g||g==="auto")&&(g=t.get(["axisLine","lineStyle","color"])),e.label={x:f[0],y:f[1],style:an(s,{text:a,font:u,fill:s.getTextColor(),padding:l,backgroundColor:g}),z2:10}}function vlt(e,t,r,n){var i=n.getWidth(),o=n.getHeight();e[0]=Math.min(e[0]+t,i)-t,e[1]=Math.min(e[1]+r,o)-r,e[0]=Math.max(e[0],0),e[1]=Math.max(e[1],0)}function HB(e,t,r,n,i){e=t.scale.parse(e);var o=t.scale.getLabel({value:e},{precision:i.precision}),a=i.formatter;if(a){var s={value:bE(t,{value:e}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};N(n,function(l){var u=r.getSeriesByIndex(l.seriesIndex),c=l.dataIndexInside,f=u&&u.getDataParams(c);f&&s.seriesData.push(f)}),Et(a)?o=a.replace("{value}",o):Ut(a)&&(o=a(s))}return o}function XB(e,t,r){var n=Uc();return CP(n,n,r.rotation),bS(n,n,r.position),Mc([e.dataToCoord(t),(r.labelOffset||0)+(r.labelDirection||1)*(r.labelMargin||0)],n)}function glt(e,t,r,n,i,o){var a=kB.innerTextLayout(r.rotation,0,r.labelDirection);r.labelMargin=i.get(["label","margin"]),plt(t,n,i,o,{position:XB(n.axis,e,r),align:a.textAlign,verticalAlign:a.textVerticalAlign})}function mlt(e,t,r){return r=r||0,{x1:e[r],y1:e[1-r],x2:t[r],y2:t[1-r]}}function ylt(e,t,r){return r=r||0,{x:e[r],y:e[1-r],width:t[r],height:t[1-r]}}var _lt=function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeElOption=function(r,n,i,o,a){var s=i.axis,l=s.grid,u=o.get("type"),c=C5(l,s).getOtherAxis(s).getGlobalExtent(),f=s.toGlobalCoord(s.dataToCoord(n,!0));if(u&&u!=="none"){var h=dlt(o),d=blt[u](s,f,c);d.style=h,r.graphicKey=d.type,r.pointer=d}var p=d3(l.model,i);glt(n,r,p,i,o,a)},t.prototype.getHandleTransform=function(r,n,i){var o=d3(n.axis.grid.model,n,{labelInside:!1});o.labelMargin=i.get(["handle","margin"]);var a=XB(n.axis,r,o);return{x:a[0],y:a[1],rotation:o.rotation+(o.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(r,n,i,o){var a=i.axis,s=a.grid,l=a.getGlobalExtent(!0),u=C5(s,a).getOtherAxis(a).getGlobalExtent(),c=a.dim==="x"?0:1,f=[r.x,r.y];f[c]+=n[c],f[c]=Math.min(l[1],f[c]),f[c]=Math.max(l[0],f[c]);var h=(u[1]+u[0])/2,d=[h,h];d[c]=f[c];var p=[{verticalAlign:"middle"},{align:"center"}];return{x:f[0],y:f[1],rotation:r.rotation,cursorPoint:d,tooltipOption:p[c]}},t}(hlt);function C5(e,t){var r={};return r[t.dim+"AxisIndex"]=t.index,e.getCartesian(r)}var blt={line:function(e,t,r){var n=mlt([t,r[0]],[t,r[1]],M5(e));return{type:"Line",subPixelOptimize:!0,shape:n}},shadow:function(e,t,r){var n=Math.max(1,e.getBandWidth()),i=r[1]-r[0];return{type:"Rect",shape:ylt([t-n/2,r[0]],[n,i],M5(e))}}};function M5(e){return e.dim==="x"?0:1}const wlt=_lt;var Slt=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(Ce);const Tlt=Slt;var ta=Oe(),Plt=N;function YB(e,t,r){if(!Xt.node){var n=t.getZr();ta(n).records||(ta(n).records={}),Elt(n,t);var i=ta(n).records[e]||(ta(n).records[e]={});i.handler=r}}function Elt(e,t){if(ta(e).initialized)return;ta(e).initialized=!0,r("click",_e(k5,"click")),r("mousemove",_e(k5,"mousemove")),r("globalout",Clt);function r(n,i){e.on(n,function(o){var a=Mlt(t);Plt(ta(e).records,function(s){s&&i(s,o,a.dispatchAction)}),Alt(a.pendings,t)})}}function Alt(e,t){var r=e.showTip.length,n=e.hideTip.length,i;r?i=e.showTip[r-1]:n&&(i=e.hideTip[n-1]),i&&(i.dispatchAction=null,t.dispatchAction(i))}function Clt(e,t,r){e.handler("leave",null,r)}function k5(e,t,r,n){t.handler(e,r,n)}function Mlt(e){var t={showTip:[],hideTip:[]},r=function(n){var i=t[n.type];i?i.push(n):(n.dispatchAction=r,e.dispatchAction(n))};return{dispatchAction:r,pendings:t}}function S3(e,t){if(!Xt.node){var r=t.getZr(),n=(ta(r).records||{})[e];n&&(ta(r).records[e]=null)}}var klt=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){var o=n.getComponent("tooltip"),a=r.get("triggerOn")||o&&o.get("triggerOn")||"mousemove|click";YB("axisPointer",i,function(s,l,u){a!=="none"&&(s==="leave"||a.indexOf(s)>=0)&&u({type:"updateAxisPointer",currTrigger:s,x:l&&l.offsetX,y:l&&l.offsetY})})},t.prototype.remove=function(r,n){S3("axisPointer",n)},t.prototype.dispose=function(r,n){S3("axisPointer",n)},t.type="axisPointer",t}(Qn);const xlt=klt;function qB(e,t){var r=[],n=e.seriesIndex,i;if(n==null||!(i=t.getSeriesByIndex(n)))return{point:[]};var o=i.getData(),a=Xl(o,e);if(a==null||a<0||ut(a))return{point:[]};var s=o.getItemGraphicEl(a),l=i.coordinateSystem;if(i.getTooltipPosition)r=i.getTooltipPosition(a)||[];else if(l&&l.dataToPoint)if(e.isStacked){var u=l.getBaseAxis(),c=l.getOtherAxis(u),f=c.dim,h=u.dim,d=f==="x"||f==="radius"?1:0,p=o.mapDimension(h),v=[];v[d]=o.get(p,a),v[1-d]=o.get(o.getCalculationInfo("stackResultDimension"),a),r=l.dataToPoint(v)||[]}else r=l.dataToPoint(o.getValues(Ct(l.dimensions,function(m){return o.mapDimension(m)}),a))||[];else if(s){var g=s.getBoundingRect().clone();g.applyTransform(s.transform),r=[g.x+g.width/2,g.y+g.height/2]}return{point:r,el:s}}var x5=Oe();function Llt(e,t,r){var n=e.currTrigger,i=[e.x,e.y],o=e,a=e.dispatchAction||Vt(r.dispatchAction,r),s=t.getComponent("axisPointer").coordSysAxesInfo;if(!!s){Gg(i)&&(i=qB({seriesIndex:o.seriesIndex,dataIndex:o.dataIndex},t).point);var l=Gg(i),u=o.axesInfo,c=s.axesInfo,f=n==="leave"||Gg(i),h={},d={},p={list:[],map:{}},v={showPointer:_e(Olt,d),showTooltip:_e(Rlt,p)};N(s.coordSysMap,function(m,y){var _=l||m.containPoint(i);N(s.coordSysAxesInfo[y],function(b,T){var S=b.axis,P=Blt(u,b);if(!f&&_&&(!u||P)){var C=P&&P.value;C==null&&!l&&(C=S.pointToData(i)),C!=null&&L5(b,C,v,!1,h)}})});var g={};return N(c,function(m,y){var _=m.linkGroup;_&&!d[y]&&N(_.axesInfo,function(b,T){var S=d[T];if(b!==m&&S){var P=S.value;_.mapper&&(P=m.axis.scale.parse(_.mapper(P,I5(b),I5(m)))),g[m.key]=P}})}),N(g,function(m,y){L5(c[y],m,v,!0,h)}),Dlt(d,c,h),Nlt(p,i,e,a),Flt(c,a,r),h}}function L5(e,t,r,n,i){var o=e.axis;if(!(o.scale.isBlank()||!o.containData(t))){if(!e.involveSeries){r.showPointer(e,t);return}var a=Ilt(t,e),s=a.payloadBatch,l=a.snapToValue;s[0]&&i.seriesIndex==null&&ot(i,s[0]),!n&&e.snap&&o.containData(l)&&l!=null&&(t=l),r.showPointer(e,t,s),r.showTooltip(e,a,l)}}function Ilt(e,t){var r=t.axis,n=r.dim,i=e,o=[],a=Number.MAX_VALUE,s=-1;return N(t.seriesModels,function(l,u){var c=l.getData().mapDimensionsAll(n),f,h;if(l.getAxisTooltipData){var d=l.getAxisTooltipData(c,e,r);h=d.dataIndices,f=d.nestestValue}else{if(h=l.getData().indicesOfNearest(c[0],e,r.type==="category"?.5:null),!h.length)return;f=l.getData().get(c[0],h[0])}if(!(f==null||!isFinite(f))){var p=e-f,v=Math.abs(p);v<=a&&((v<a||p>=0&&s<0)&&(a=v,s=p,i=f,o.length=0),N(h,function(g){o.push({seriesIndex:l.seriesIndex,dataIndexInside:g,dataIndex:l.getData().getRawIndex(g)})}))}}),{payloadBatch:o,snapToValue:i}}function Olt(e,t,r,n){e[t.key]={value:r,payloadBatch:n}}function Rlt(e,t,r,n){var i=r.payloadBatch,o=t.axis,a=o.model,s=t.axisPointerModel;if(!(!t.triggerTooltip||!i.length)){var l=t.coordSys.model,u=i0(l),c=e.map[u];c||(c=e.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},e.list.push(c)),c.dataByAxis.push({axisDim:o.dim,axisIndex:a.componentIndex,axisType:a.type,axisId:a.id,value:n,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function Dlt(e,t,r){var n=r.axesInfo=[];N(t,function(i,o){var a=i.axisPointerModel.option,s=e[o];s?(!i.useHandle&&(a.status="show"),a.value=s.value,a.seriesDataIndices=(s.payloadBatch||[]).slice()):!i.useHandle&&(a.status="hide"),a.status==="show"&&n.push({axisDim:i.axis.dim,axisIndex:i.axis.model.componentIndex,value:a.value})})}function Nlt(e,t,r,n){if(Gg(t)||!e.list.length){n({type:"hideTip"});return}var i=((e.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};n({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:r.tooltipOption,position:r.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:e.list})}function Flt(e,t,r){var n=r.getZr(),i="axisPointerLastHighlights",o=x5(n)[i]||{},a=x5(n)[i]={};N(e,function(u,c){var f=u.axisPointerModel.option;f.status==="show"&&N(f.seriesDataIndices,function(h){var d=h.seriesIndex+" | "+h.dataIndex;a[d]=h})});var s=[],l=[];N(o,function(u,c){!a[c]&&l.push(u)}),N(a,function(u,c){!o[c]&&s.push(u)}),l.length&&r.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),s.length&&r.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function Blt(e,t){for(var r=0;r<(e||[]).length;r++){var n=e[r];if(t.axis.dim===n.axisDim&&t.axis.model.componentIndex===n.axisIndex)return n}}function I5(e){var t=e.axis.model,r={},n=r.axisDim=e.axis.dim;return r.axisIndex=r[n+"AxisIndex"]=t.componentIndex,r.axisName=r[n+"AxisName"]=t.name,r.axisId=r[n+"AxisId"]=t.id,r}function Gg(e){return!e||e[0]==null||isNaN(e[0])||e[1]==null||isNaN(e[1])}function ZB(e){xB.registerAxisPointerClass("CartesianAxisPointer",wlt),e.registerComponentModel(Tlt),e.registerComponentView(xlt),e.registerPreprocessor(function(t){if(t){(!t.axisPointer||t.axisPointer.length===0)&&(t.axisPointer={});var r=t.axisPointer.link;r&&!ut(r)&&(t.axisPointer.link=[r])}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,function(t,r){t.getComponent("axisPointer").coordSysAxesInfo=nat(t,r)}),e.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},Llt)}function N0(e){Br(OB),Br(ZB)}function $lt(e,t){var r=x0(t.get("padding")),n=t.getItemStyle(["color","opacity"]);return n.fill=t.get("backgroundColor"),e=new Ke({shape:{x:e.x-r[3],y:e.y-r[0],width:e.width+r[1]+r[3],height:e.height+r[0]+r[2],r:t.get("borderRadius")},style:n,silent:!0,z2:-1}),e}var zlt=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(Ce);const Vlt=zlt;function KB(e){var t=e.get("confine");return t!=null?!!t:e.get("renderMode")==="richText"}function JB(e){if(!!Xt.domSupported){for(var t=document.documentElement.style,r=0,n=e.length;r<n;r++)if(e[r]in t)return e[r]}}var QB=JB(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ult=JB(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function t$(e,t){if(!e)return t;t=EN(t,!0);var r=e.indexOf(t);return e=r===-1?t:"-"+e.slice(0,r)+"-"+t,e.toLowerCase()}function Glt(e,t){var r=e.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(e);return r?t?r[t]:r:null}var jlt=t$(Ult,"transition"),DE=t$(QB,"transform"),Wlt="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(Xt.transform3dSupported?"will-change:transform;":"");function Hlt(e){return e=e==="left"?"right":e==="right"?"left":e==="top"?"bottom":"top",e}function Xlt(e,t,r){if(!Et(r)||r==="inside")return"";var n=e.get("backgroundColor"),i=e.get("borderWidth");t=Kl(t);var o=Hlt(r),a=Math.max(Math.round(i)*1.5,6),s="",l=DE+":",u;ce(["left","right"],o)>-1?(s+="top:50%",l+="translateY(-50%) rotate("+(u=o==="left"?-225:-45)+"deg)"):(s+="left:50%",l+="translateX(-50%) rotate("+(u=o==="top"?225:45)+"deg)");var c=u*Math.PI/180,f=a+i,h=f*Math.abs(Math.cos(c))+f*Math.abs(Math.sin(c)),d=Math.round(((h-Math.SQRT2*i)/2+Math.SQRT2*i-(h-f)/2)*100)/100;s+=";"+o+":-"+d+"px";var p=t+" solid "+i+"px;",v=["position:absolute;width:"+a+"px;height:"+a+"px;",s+";"+l+";","border-bottom:"+p,"border-right:"+p,"background-color:"+n+";"];return'<div style="'+v.join("")+'"></div>'}function Ylt(e,t){var r="cubic-bezier(0.23,1,0.32,1)",n=" "+e/2+"s "+r,i="opacity"+n+",visibility"+n;return t||(n=" "+e+"s "+r,i+=Xt.transformSupported?","+DE+n:",left"+n+",top"+n),jlt+":"+i}function O5(e,t,r){var n=e.toFixed(0)+"px",i=t.toFixed(0)+"px";if(!Xt.transformSupported)return r?"top:"+i+";left:"+n+";":[["top",i],["left",n]];var o=Xt.transform3dSupported,a="translate"+(o?"3d":"")+"("+n+","+i+(o?",0":"")+")";return r?"top:0;left:0;"+DE+":"+a+";":[["top",0],["left",0],[QB,a]]}function qlt(e){var t=[],r=e.get("fontSize"),n=e.getTextColor();n&&t.push("color:"+n),t.push("font:"+e.getFont()),r&&t.push("line-height:"+Math.round(r*3/2)+"px");var i=e.get("textShadowColor"),o=e.get("textShadowBlur")||0,a=e.get("textShadowOffsetX")||0,s=e.get("textShadowOffsetY")||0;return i&&o&&t.push("text-shadow:"+a+"px "+s+"px "+o+"px "+i),N(["decoration","align"],function(l){var u=e.get(l);u&&t.push("text-"+l+":"+u)}),t.join(";")}function Zlt(e,t,r){var n=[],i=e.get("transitionDuration"),o=e.get("backgroundColor"),a=e.get("shadowBlur"),s=e.get("shadowColor"),l=e.get("shadowOffsetX"),u=e.get("shadowOffsetY"),c=e.getModel("textStyle"),f=nF(e,"html"),h=l+"px "+u+"px "+a+"px "+s;return n.push("box-shadow:"+h),t&&i&&n.push(Ylt(i,r)),o&&n.push("background-color:"+o),N(["width","color","radius"],function(d){var p="border-"+d,v=EN(p),g=e.get(v);g!=null&&n.push(p+":"+g+(d==="color"?"":"px"))}),n.push(qlt(c)),f!=null&&n.push("padding:"+x0(f).join("px ")+"px"),n.join(";")+";"}function R5(e,t,r,n,i){var o=t&&t.painter;if(r){var a=o&&o.getViewportRoot();a&&Wq(e,a,document.body,n,i)}else{e[0]=n,e[1]=i;var s=o&&o.getViewportRootOffset();s&&(e[0]+=s.offsetLeft,e[1]+=s.offsetTop)}e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var Klt=function(){function e(t,r,n){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._firstShow=!0,this._longHide=!0,Xt.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var o=this._zr=r.getZr(),a=this._appendToBody=n&&n.appendToBody;R5(this._styleCoord,o,a,r.getWidth()/2,r.getHeight()/2),a?document.body.appendChild(i):t.appendChild(i),this._container=t;var s=this;i.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},i.onmousemove=function(l){if(l=l||window.event,!s._enterable){var u=o.handler,c=o.painter.getViewportRoot();$n(c,l,!0),u.dispatch("mousemove",l)}},i.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return e.prototype.update=function(t){var r=this._container,n=Glt(r,"position"),i=r.style;i.position!=="absolute"&&n!=="absolute"&&(i.position="relative");var o=t.get("alwaysShowContent");o&&this._moveIfResized(),this.el.className=t.get("className")||""},e.prototype.show=function(t,r){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el,i=n.style,o=this._styleCoord;n.innerHTML?i.cssText=Wlt+Zlt(t,!this._firstShow,this._longHide)+O5(o[0],o[1],!0)+("border-color:"+Kl(r)+";")+(t.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},e.prototype.setContent=function(t,r,n,i,o){var a=this.el;if(t==null){a.innerHTML="";return}var s="";if(Et(o)&&n.get("trigger")==="item"&&!KB(n)&&(s=Xlt(n,i,o)),Et(t))a.innerHTML=t+s;else if(t){a.innerHTML="",ut(t)||(t=[t]);for(var l=0;l<t.length;l++)mm(t[l])&&t[l].parentNode!==a&&a.appendChild(t[l]);if(s&&a.childNodes.length){var u=document.createElement("div");u.innerHTML=s,a.appendChild(u)}}},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},e.prototype.moveTo=function(t,r){var n=this._styleCoord;if(R5(n,this._zr,this._appendToBody,t,r),n[0]!=null&&n[1]!=null){var i=this.el.style,o=O5(n[0],n[1]);N(o,function(a){i[a[0]]=a[1]})}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},e.prototype.hide=function(){var t=this,r=this.el.style;r.visibility="hidden",r.opacity="0",Xt.transform3dSupported&&(r.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(Vt(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},e}();const Jlt=Klt;var Qlt=function(){function e(t){this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._zr=t.getZr(),N5(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return e.prototype.update=function(t){var r=t.get("alwaysShowContent");r&&this._moveIfResized()},e.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},e.prototype.setContent=function(t,r,n,i,o){var a=this;It(t)&&ne(""),this.el&&this._zr.remove(this.el);var s=n.getModel("textStyle");this.el=new Je({style:{rich:r.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:s.get("textShadowColor"),fill:n.get(["textStyle","color"]),padding:nF(n,"richText"),verticalAlign:"top",align:"left"},z:n.get("z")}),N(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(u){a.el.style[u]=n.get(u)}),N(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(u){a.el.style[u]=s.get(u)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el,r=this.el.getBoundingRect(),n=D5(t.style);return[r.width+n.left+n.right,r.height+n.top+n.bottom]},e.prototype.moveTo=function(t,r){var n=this.el;if(n){var i=this._styleCoord;N5(i,this._zr,t,r),t=i[0],r=i[1];var o=n.style,a=ts(o.borderWidth||0),s=D5(o);n.x=t+a+s.left,n.y=r+a+s.top,n.markRedraw()}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},e.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(Vt(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this._zr.remove(this.el)},e}();function ts(e){return Math.max(0,e)}function D5(e){var t=ts(e.shadowBlur||0),r=ts(e.shadowOffsetX||0),n=ts(e.shadowOffsetY||0);return{left:ts(t-r),right:ts(t+r),top:ts(t-n),bottom:ts(t+n)}}function N5(e,t,r,n){e[0]=r,e[1]=n,e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}const tut=Qlt;var eut=new Ke({shape:{x:-1,y:-1,width:2,height:2}}),rut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,n){if(!(Xt.node||!n.getDom())){var i=r.getComponent("tooltip"),o=this._renderMode=CK(i.get("renderMode"));this._tooltipContent=o==="richText"?new tut(n):new Jlt(n.getDom(),n,{appendToBody:i.get("appendToBody",!0)})}},t.prototype.render=function(r,n,i){if(!(Xt.node||!i.getDom())){this.group.removeAll(),this._tooltipModel=r,this._ecModel=n,this._api=i,this._alwaysShowContent=r.get("alwaysShowContent");var o=this._tooltipContent;o.update(r),o.setEnterable(r.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&r.get("transitionDuration")?oF(this,"_updatePosition",50,"fixRate"):QS(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var r=this._tooltipModel,n=r.get("triggerOn");YB("itemTooltip",this._api,Vt(function(i,o,a){n!=="none"&&(n.indexOf(i)>=0?this._tryShow(o,a):i==="leave"&&this._hide(a))},this))},t.prototype._keepShow=function(){var r=this._tooltipModel,n=this._ecModel,i=this._api,o=r.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&o!=="none"&&o!=="click"){var a=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!i.isDisposed()&&a.manuallyShowTip(r,n,i,{x:a._lastX,y:a._lastY,dataByCoordSys:a._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(r,n,i,o){if(!(o.from===this.uid||Xt.node||!i.getDom())){var a=F5(o,i);this._ticket="";var s=o.dataByCoordSys,l=aut(o,n,i);if(l){var u=l.el.getBoundingRect().clone();u.applyTransform(l.el.transform),this._tryShow({offsetX:u.x+u.width/2,offsetY:u.y+u.height/2,target:l.el,position:o.position,positionDefault:"bottom"},a)}else if(o.tooltip&&o.x!=null&&o.y!=null){var c=eut;c.x=o.x,c.y=o.y,c.update(),ie(c).tooltipConfig={name:null,option:o.tooltip},this._tryShow({offsetX:o.x,offsetY:o.y,target:c},a)}else if(s)this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,dataByCoordSys:s,tooltipOption:o.tooltipOption},a);else if(o.seriesIndex!=null){if(this._manuallyAxisShowTip(r,n,i,o))return;var f=qB(o,n),h=f.point[0],d=f.point[1];h!=null&&d!=null&&this._tryShow({offsetX:h,offsetY:d,target:f.el,position:o.position,positionDefault:"bottom"},a)}else o.x!=null&&o.y!=null&&(i.dispatchAction({type:"updateAxisPointer",x:o.x,y:o.y}),this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,target:i.getZr().findHover(o.x,o.y).target},a))}},t.prototype.manuallyHideTip=function(r,n,i,o){var a=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&a.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,o.from!==this.uid&&this._hide(F5(o,i))},t.prototype._manuallyAxisShowTip=function(r,n,i,o){var a=o.seriesIndex,s=o.dataIndex,l=n.getComponent("axisPointer").coordSysAxesInfo;if(!(a==null||s==null||l==null)){var u=n.getSeriesByIndex(a);if(!!u){var c=u.getData(),f=fh([c.getItemModel(s),u,(u.coordinateSystem||{}).model],this._tooltipModel);if(f.get("trigger")==="axis")return i.dispatchAction({type:"updateAxisPointer",seriesIndex:a,dataIndex:s,position:o.position}),!0}}},t.prototype._tryShow=function(r,n){var i=r.target,o=this._tooltipModel;if(!!o){this._lastX=r.offsetX,this._lastY=r.offsetY;var a=r.dataByCoordSys;if(a&&a.length)this._showAxisTooltip(a,r);else if(i){this._lastDataByCoordSys=null;var s,l;gc(i,function(u){if(ie(u).dataIndex!=null)return s=u,!0;if(ie(u).tooltipConfig!=null)return l=u,!0},!0),s?this._showSeriesItemTooltip(r,s,n):l?this._showComponentItemTooltip(r,l,n):this._hide(n)}else this._lastDataByCoordSys=null,this._hide(n)}},t.prototype._showOrMove=function(r,n){var i=r.get("showDelay");n=Vt(n,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(n,i):n()},t.prototype._showAxisTooltip=function(r,n){var i=this._ecModel,o=this._tooltipModel,a=[n.offsetX,n.offsetY],s=fh([n.tooltipOption],o),l=this._renderMode,u=[],c=Es("section",{blocks:[],noHeader:!0}),f=[],h=new l2;N(r,function(y){N(y.dataByAxis,function(_){var b=i.getComponent(_.axisDim+"Axis",_.axisIndex),T=_.value;if(!(!b||T==null)){var S=HB(T,b.axis,i,_.seriesDataIndices,_.valueLabelOpt),P=Es("section",{header:S,noHeader:!po(S),sortBlocks:!0,blocks:[]});c.blocks.push(P),N(_.seriesDataIndices,function(C){var A=i.getSeriesByIndex(C.seriesIndex),M=C.dataIndexInside,k=A.getDataParams(M);if(!(k.dataIndex<0)){k.axisDim=_.axisDim,k.axisIndex=_.axisIndex,k.axisType=_.axisType,k.axisId=_.axisId,k.axisValue=bE(b.axis,{value:T}),k.axisValueLabel=S,k.marker=h.makeTooltipMarker("item",Kl(k.color),l);var O=S4(A.formatTooltip(M,!0,null)),F=O.frag;if(F){var z=fh([A],o).get("valueFormatter");P.blocks.push(z?ot({valueFormatter:z},F):F)}O.text&&f.push(O.text),u.push(k)}})}})}),c.blocks.reverse(),f.reverse();var d=n.position,p=s.get("order"),v=M4(c,h,l,p,i.get("useUTC"),s.get("textStyle"));v&&f.unshift(v);var g=l==="richText"?`

`:"<br/>",m=f.join(g);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(r,u)?this._updatePosition(s,d,a[0],a[1],this._tooltipContent,u):this._showTooltipContent(s,m,u,Math.random()+"",a[0],a[1],d,null,h)})},t.prototype._showSeriesItemTooltip=function(r,n,i){var o=this._ecModel,a=ie(n),s=a.seriesIndex,l=o.getSeriesByIndex(s),u=a.dataModel||l,c=a.dataIndex,f=a.dataType,h=u.getData(f),d=this._renderMode,p=r.positionDefault,v=fh([h.getItemModel(c),u,l&&(l.coordinateSystem||{}).model],this._tooltipModel,p?{position:p}:null),g=v.get("trigger");if(!(g!=null&&g!=="item")){var m=u.getDataParams(c,f),y=new l2;m.marker=y.makeTooltipMarker("item",Kl(m.color),d);var _=S4(u.formatTooltip(c,!1,f)),b=v.get("order"),T=v.get("valueFormatter"),S=_.frag,P=S?M4(T?ot({valueFormatter:T},S):S,y,d,b,o.get("useUTC"),v.get("textStyle")):_.text,C="item_"+u.name+"_"+c;this._showOrMove(v,function(){this._showTooltipContent(v,P,m,C,r.offsetX,r.offsetY,r.position,r.target,y)}),i({type:"showTip",dataIndexInside:c,dataIndex:h.getRawIndex(c),seriesIndex:s,from:this.uid})}},t.prototype._showComponentItemTooltip=function(r,n,i){var o=ie(n),a=o.tooltipConfig,s=a.option||{};if(Et(s)){var l=s;s={content:l,formatter:l}}var u=[s],c=this._ecModel.getComponent(o.componentMainType,o.componentIndex);c&&u.push(c),u.push({formatter:s.content});var f=r.positionDefault,h=fh(u,this._tooltipModel,f?{position:f}:null),d=h.get("content"),p=Math.random()+"",v=new l2;this._showOrMove(h,function(){var g=zt(h.get("formatterParams")||{});this._showTooltipContent(h,d,g,p,r.offsetX,r.offsetY,r.position,n,v)}),i({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(r,n,i,o,a,s,l,u,c){if(this._ticket="",!(!r.get("showContent")||!r.get("show"))){var f=this._tooltipContent;f.setEnterable(r.get("enterable"));var h=r.get("formatter");l=l||r.get("position");var d=n,p=this._getNearestPoint([a,s],i,r.get("trigger"),r.get("borderColor")),v=p.color;if(h)if(Et(h)){var g=r.ecModel.get("useUTC"),m=ut(i)?i[0]:i,y=m&&m.axisType&&m.axisType.indexOf("time")>=0;d=h,y&&(d=Z1(m.axisValue,d,g)),d=AN(d,i,!0)}else if(Ut(h)){var _=Vt(function(b,T){b===this._ticket&&(f.setContent(T,c,r,v,l),this._updatePosition(r,l,a,s,f,i,u))},this);this._ticket=o,d=h(i,o,_)}else d=h;f.setContent(d,c,r,v,l),f.show(r,v),this._updatePosition(r,l,a,s,f,i,u)}},t.prototype._getNearestPoint=function(r,n,i,o){if(i==="axis"||ut(n))return{color:o||(this._renderMode==="html"?"#fff":"none")};if(!ut(n))return{color:o||n.color||n.borderColor}},t.prototype._updatePosition=function(r,n,i,o,a,s,l){var u=this._api.getWidth(),c=this._api.getHeight();n=n||r.get("position");var f=a.getSize(),h=r.get("align"),d=r.get("verticalAlign"),p=l&&l.getBoundingRect().clone();if(l&&p.applyTransform(l.transform),Ut(n)&&(n=n([i,o],s,a.el,p,{viewSize:[u,c],contentSize:f.slice()})),ut(n))i=We(n[0],u),o=We(n[1],c);else if(It(n)){var v=n;v.width=f[0],v.height=f[1];var g=Ps(v,{width:u,height:c});i=g.x,o=g.y,h=null,d=null}else if(Et(n)&&l){var m=out(n,p,f,r.get("borderWidth"));i=m[0],o=m[1]}else{var m=nut(i,o,a,u,c,h?null:20,d?null:20);i=m[0],o=m[1]}if(h&&(i-=B5(h)?f[0]/2:h==="right"?f[0]:0),d&&(o-=B5(d)?f[1]/2:d==="bottom"?f[1]:0),KB(r)){var m=iut(i,o,a,u,c);i=m[0],o=m[1]}a.moveTo(i,o)},t.prototype._updateContentNotChangedOnAxis=function(r,n){var i=this._lastDataByCoordSys,o=this._cbParamsList,a=!!i&&i.length===r.length;return a&&N(i,function(s,l){var u=s.dataByAxis||[],c=r[l]||{},f=c.dataByAxis||[];a=a&&u.length===f.length,a&&N(u,function(h,d){var p=f[d]||{},v=h.seriesDataIndices||[],g=p.seriesDataIndices||[];a=a&&h.value===p.value&&h.axisType===p.axisType&&h.axisId===p.axisId&&v.length===g.length,a&&N(v,function(m,y){var _=g[y];a=a&&m.seriesIndex===_.seriesIndex&&m.dataIndex===_.dataIndex}),o&&N(h.seriesDataIndices,function(m){var y=m.seriesIndex,_=n[y],b=o[y];_&&b&&b.data!==_.data&&(a=!1)})})}),this._lastDataByCoordSys=r,this._cbParamsList=n,!!a},t.prototype._hide=function(r){this._lastDataByCoordSys=null,r({type:"hideTip",from:this.uid})},t.prototype.dispose=function(r,n){Xt.node||!n.getDom()||(QS(this,"_updatePosition"),this._tooltipContent.dispose(),S3("itemTooltip",n))},t.type="tooltip",t}(Qn);function fh(e,t,r){var n=t.ecModel,i;r?(i=new br(r,n,n),i=new br(t.option,i,n)):i=t;for(var o=e.length-1;o>=0;o--){var a=e[o];a&&(a instanceof br&&(a=a.get("tooltip",!0)),Et(a)&&(a={formatter:a}),a&&(i=new br(a,i,n)))}return i}function F5(e,t){return e.dispatchAction||Vt(t.dispatchAction,t)}function nut(e,t,r,n,i,o,a){var s=r.getSize(),l=s[0],u=s[1];return o!=null&&(e+l+o+2>n?e-=l+o:e+=o),a!=null&&(t+u+a>i?t-=u+a:t+=a),[e,t]}function iut(e,t,r,n,i){var o=r.getSize(),a=o[0],s=o[1];return e=Math.min(e+a,n)-a,t=Math.min(t+s,i)-s,e=Math.max(e,0),t=Math.max(t,0),[e,t]}function out(e,t,r,n){var i=r[0],o=r[1],a=Math.ceil(Math.SQRT2*n)+8,s=0,l=0,u=t.width,c=t.height;switch(e){case"inside":s=t.x+u/2-i/2,l=t.y+c/2-o/2;break;case"top":s=t.x+u/2-i/2,l=t.y-o-a;break;case"bottom":s=t.x+u/2-i/2,l=t.y+c+a;break;case"left":s=t.x-i-a,l=t.y+c/2-o/2;break;case"right":s=t.x+u+a,l=t.y+c/2-o/2}return[s,l]}function B5(e){return e==="center"||e==="middle"}function aut(e,t,r){var n=RP(e).queryOptionMap,i=n.keys()[0];if(!(!i||i==="series")){var o=C0(t,i,n.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),a=o.models[0];if(!!a){var s=r.getViewOfComponentModel(a),l;if(s.group.traverse(function(u){var c=ie(u).tooltipConfig;if(c&&c.name===e.name)return l=u,!0}),l)return{componentMainType:i,componentIndex:a.componentIndex,el:l}}}}const sut=rut;function pf(e){Br(ZB),e.registerComponentModel(Vlt),e.registerComponentView(sut),e.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},Dr),e.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},Dr)}var $5=N;function z5(e){if(e){for(var t in e)if(e.hasOwnProperty(t))return!0}}function V5(e,t,r){var n={};return $5(t,function(o){var a=n[o]=i();$5(e[o],function(s,l){if(!!sn.isValidType(l)){var u={type:l,visual:s};r&&r(u,o),a[l]=new sn(u),l==="opacity"&&(u=zt(u),u.type="colorAlpha",a.__hidden.__alphaForOpacity=new sn(u))}})}),n;function i(){var o=function(){};o.prototype.__hidden=o.prototype;var a=new o;return a}}function lut(e,t,r){var n;N(r,function(i){t.hasOwnProperty(i)&&z5(t[i])&&(n=!0)}),n&&N(r,function(i){t.hasOwnProperty(i)&&z5(t[i])?e[i]=zt(t[i]):delete e[i]})}function uut(e,t,r,n){var i={};return N(e,function(o){var a=sn.prepareVisualTypes(t[o]);i[o]=a}),{progress:function(a,s){var l;n!=null&&(l=s.getDimensionIndex(n));function u(T){return dF(s,f,T)}function c(T,S){crt(s,f,T,S)}for(var f,h=s.getStore();(f=a.next())!=null;){var d=s.getRawDataItem(f);if(!(d&&d.visualMap===!1))for(var p=n!=null?h.get(l,f):f,v=r(p),g=t[v],m=i[v],y=0,_=m.length;y<_;y++){var b=m[y];g[b]&&g[b].applyVisual(p,u,c)}}}}}var cut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(Ce),fut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){if(this.group.removeAll(),!!r.get("show")){var o=this.group,a=r.getModel("textStyle"),s=r.getModel("subtextStyle"),l=r.get("textAlign"),u=qt(r.get("textBaseline"),r.get("textVerticalAlign")),c=new Je({style:an(a,{text:r.get("text"),fill:a.getTextColor()},{disableBox:!0}),z2:10}),f=c.getBoundingRect(),h=r.get("subtext"),d=new Je({style:an(s,{text:h,fill:s.getTextColor(),y:f.height+r.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),p=r.get("link"),v=r.get("sublink"),g=r.get("triggerEvent",!0);c.silent=!p&&!g,d.silent=!v&&!g,p&&c.on("click",function(){i4(p,"_"+r.get("target"))}),v&&d.on("click",function(){i4(v,"_"+r.get("subtarget"))}),ie(c).eventData=ie(d).eventData=g?{componentType:"title",componentIndex:r.componentIndex}:null,o.add(c),h&&o.add(d);var m=o.getBoundingRect(),y=r.getBoxLayoutParams();y.width=m.width,y.height=m.height;var _=Ps(y,{width:i.getWidth(),height:i.getHeight()},r.get("padding"));l||(l=r.get("left")||r.get("right"),l==="middle"&&(l="center"),l==="right"?_.x+=_.width:l==="center"&&(_.x+=_.width/2)),u||(u=r.get("top")||r.get("bottom"),u==="center"&&(u="middle"),u==="bottom"?_.y+=_.height:u==="middle"&&(_.y+=_.height/2),u=u||"top"),o.x=_.x,o.y=_.y,o.markRedraw();var b={align:l,verticalAlign:u};c.setStyle(b),d.setStyle(b),m=o.getBoundingRect();var T=_.margin,S=r.getItemStyle(["color","opacity"]);S.fill=r.get("backgroundColor");var P=new Ke({shape:{x:m.x-T[3],y:m.y-T[0],width:m.width+T[1]+T[3],height:m.height+T[0]+T[2],r:r.get("borderRadius")},style:S,subPixelOptimize:!0,silent:!0});o.add(P)}},t.type="title",t}(Qn);function vf(e){e.registerComponentModel(cut),e.registerComponentView(fut)}function e$(e,t){if(!e)return!1;for(var r=ut(e)?e:[e],n=0;n<r.length;n++)if(r[n]&&r[n][t])return!0;return!1}function nv(e){OS(e,"label",["show"])}var iv=Oe(),r$=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.createdBySelf=!1,r}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i),this._mergeOption(r,i,!1,!0)},t.prototype.isAnimationEnabled=function(){if(Xt.node)return!1;var r=this.__hostSeries;return this.getShallow("animation")&&r&&r.isAnimationEnabled()},t.prototype.mergeOption=function(r,n){this._mergeOption(r,n,!1,!1)},t.prototype._mergeOption=function(r,n,i,o){var a=this.mainType;i||n.eachSeries(function(s){var l=s.get(this.mainType,!0),u=iv(s)[a];if(!l||!l.data){iv(s)[a]=null;return}u?u._mergeOption(l,n,!0):(o&&nv(l),N(l.data,function(c){c instanceof Array?(nv(c[0]),nv(c[1])):nv(c)}),u=this.createMarkerModelFromSeries(l,this,n),ot(u,{mainType:this.mainType,seriesIndex:s.seriesIndex,name:s.name,createdBySelf:!0}),u.__hostSeries=s),iv(s)[a]=u},this)},t.prototype.formatTooltip=function(r,n,i){var o=this.getData(),a=this.getRawValue(r),s=o.getName(r);return Es("section",{header:this.name,blocks:[Es("nameValue",{name:s,value:a,noName:!s,noValue:a==null})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(r){this._data=r},t.getMarkerModelFromSeries=function(r,n){return iv(r)[n]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(Ce);Ri(r$,jN.prototype);const Hc=r$;function T3(e){return!(isNaN(parseFloat(e.x))&&isNaN(parseFloat(e.y)))}function hut(e){return!isNaN(parseFloat(e.x))&&!isNaN(parseFloat(e.y))}function ov(e,t,r,n,i,o){var a=[],s=Jl(t,n),l=s?t.getCalculationInfo("stackResultDimension"):n,u=NE(t,l,e),c=t.indicesOfNearest(l,u)[0];a[i]=t.get(r,c),a[o]=t.get(l,c);var f=t.get(n,c),h=vo(t.get(n,c));return h=Math.min(h,20),h>=0&&(a[o]=+a[o].toFixed(h)),[a,f]}var G2={min:_e(ov,"min"),max:_e(ov,"max"),average:_e(ov,"average"),median:_e(ov,"median")};function jm(e,t){var r=e.getData(),n=e.coordinateSystem;if(t&&!hut(t)&&!ut(t.coord)&&n){var i=n.dimensions,o=n$(t,r,n,e);if(t=zt(t),t.type&&G2[t.type]&&o.baseAxis&&o.valueAxis){var a=ce(i,o.baseAxis.dim),s=ce(i,o.valueAxis.dim),l=G2[t.type](r,o.baseDataDim,o.valueDataDim,a,s);t.coord=l[0],t.value=l[1]}else{for(var u=[t.xAxis!=null?t.xAxis:t.radiusAxis,t.yAxis!=null?t.yAxis:t.angleAxis],c=0;c<2;c++)G2[u[c]]&&(u[c]=NE(r,r.mapDimension(i[c]),u[c]));t.coord=u}}return t}function n$(e,t,r,n){var i={};return e.valueIndex!=null||e.valueDim!=null?(i.valueDataDim=e.valueIndex!=null?t.getDimension(e.valueIndex):e.valueDim,i.valueAxis=r.getAxis(dut(n,i.valueDataDim)),i.baseAxis=r.getOtherAxis(i.valueAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim)):(i.baseAxis=n.getBaseAxis(),i.valueAxis=r.getOtherAxis(i.baseAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim),i.valueDataDim=t.mapDimension(i.valueAxis.dim)),i}function dut(e,t){var r=e.getData().getDimensionInfo(t);return r&&r.coordDim}function Wm(e,t){return e&&e.containData&&t.coord&&!T3(t)?e.containData(t.coord):!0}function put(e,t,r){return e&&e.containZone&&t.coord&&r.coord&&!T3(t)&&!T3(r)?e.containZone(t.coord,r.coord):!0}function vut(e,t){return e?function(r,n,i,o){var a=o<2?r.coord&&r.coord[o]:r.value;return vs(a,t[o])}:function(r,n,i,o){return vs(r.value,t[o])}}function NE(e,t,r){if(r==="average"){var n=0,i=0;return e.each(t,function(o,a){isNaN(o)||(n+=o,i++)}),n/i}else return r==="median"?e.getMedian(t):e.getDataExtent(t)[r==="max"?1:0]}var j2=Oe(),gut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(){this.markerGroupMap=jt()},t.prototype.render=function(r,n,i){var o=this,a=this.markerGroupMap;a.each(function(s){j2(s).keep=!1}),n.eachSeries(function(s){var l=Hc.getMarkerModelFromSeries(s,o.type);l&&o.renderSeries(s,l,n,i)}),a.each(function(s){!j2(s).keep&&o.group.remove(s.group)})},t.prototype.markKeep=function(r){j2(r).keep=!0},t.prototype.toggleBlurSeries=function(r,n){var i=this;N(r,function(o){var a=Hc.getMarkerModelFromSeries(o,i.type);if(a){var s=a.getData();s.eachItemGraphicEl(function(l){l&&(n?R9(l):zP(l))})}})},t.type="marker",t}(Qn);const i$=gut;var mut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,n,i){return new t(r,n,i)},t.type="markLine",t.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},t}(Hc);const yut=mut;var av=Oe(),_ut=function(e,t,r,n){var i=e.getData(),o;if(ut(n))o=n;else{var a=n.type;if(a==="min"||a==="max"||a==="average"||a==="median"||n.xAxis!=null||n.yAxis!=null){var s=void 0,l=void 0;if(n.yAxis!=null||n.xAxis!=null)s=t.getAxis(n.yAxis!=null?"y":"x"),l=yi(n.yAxis,n.xAxis);else{var u=n$(n,i,t,e);s=u.valueAxis;var c=WF(i,u.valueDataDim);l=NE(i,c,a)}var f=s.dim==="x"?0:1,h=1-f,d=zt(n),p={coord:[]};d.type=null,d.coord=[],d.coord[h]=-1/0,p.coord[h]=1/0;var v=r.get("precision");v>=0&&be(l)&&(l=+l.toFixed(Math.min(v,20))),d.coord[f]=p.coord[f]=l,o=[d,p,{type:a,valueIndex:n.valueIndex,value:l}]}else o=[]}var g=[jm(e,o[0]),jm(e,o[1]),ot({},o[2])];return g[2].type=g[2].type||null,oe(g[2],g[0]),oe(g[2],g[1]),g};function Hm(e){return!isNaN(e)&&!isFinite(e)}function U5(e,t,r,n){var i=1-e,o=n.dimensions[e];return Hm(t[i])&&Hm(r[i])&&t[e]===r[e]&&n.getAxis(o).containData(t[e])}function but(e,t){if(e.type==="cartesian2d"){var r=t[0].coord,n=t[1].coord;if(r&&n&&(U5(1,r,n,e)||U5(0,r,n,e)))return!0}return Wm(e,t[0])&&Wm(e,t[1])}function W2(e,t,r,n,i){var o=n.coordinateSystem,a=e.getItemModel(t),s,l=We(a.get("x"),i.getWidth()),u=We(a.get("y"),i.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(n.getMarkerPosition)s=n.getMarkerPosition(e.getValues(e.dimensions,t));else{var c=o.dimensions,f=e.get(c[0],t),h=e.get(c[1],t);s=o.dataToPoint([f,h])}if(df(o,"cartesian2d")){var d=o.getAxis("x"),p=o.getAxis("y"),c=o.dimensions;Hm(e.get(c[0],t))?s[0]=d.toGlobalCoord(d.getExtent()[r?0:1]):Hm(e.get(c[1],t))&&(s[1]=p.toGlobalCoord(p.getExtent()[r?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}e.setItemLayout(t,s)}var wut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,n,i){n.eachSeries(function(o){var a=Hc.getMarkerModelFromSeries(o,"markLine");if(a){var s=a.getData(),l=av(a).from,u=av(a).to;l.each(function(c){W2(l,c,!0,o,i),W2(u,c,!1,o,i)}),s.each(function(c){s.setItemLayout(c,[l.getItemLayout(c),u.getItemLayout(c)])}),this.markerGroupMap.get(o.id).updateLayout()}},this)},t.prototype.renderSeries=function(r,n,i,o){var a=r.coordinateSystem,s=r.id,l=r.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,new _st);this.group.add(c.group);var f=Sut(a,r,n),h=f.from,d=f.to,p=f.line;av(n).from=h,av(n).to=d,n.setData(p);var v=n.get("symbol"),g=n.get("symbolSize"),m=n.get("symbolRotate"),y=n.get("symbolOffset");ut(v)||(v=[v,v]),ut(g)||(g=[g,g]),ut(m)||(m=[m,m]),ut(y)||(y=[y,y]),f.from.each(function(b){_(h,b,!0),_(d,b,!1)}),p.each(function(b){var T=p.getItemModel(b).getModel("lineStyle").getLineStyle();p.setItemLayout(b,[h.getItemLayout(b),d.getItemLayout(b)]),T.stroke==null&&(T.stroke=h.getItemVisual(b,"style").fill),p.setItemVisual(b,{fromSymbolKeepAspect:h.getItemVisual(b,"symbolKeepAspect"),fromSymbolOffset:h.getItemVisual(b,"symbolOffset"),fromSymbolRotate:h.getItemVisual(b,"symbolRotate"),fromSymbolSize:h.getItemVisual(b,"symbolSize"),fromSymbol:h.getItemVisual(b,"symbol"),toSymbolKeepAspect:d.getItemVisual(b,"symbolKeepAspect"),toSymbolOffset:d.getItemVisual(b,"symbolOffset"),toSymbolRotate:d.getItemVisual(b,"symbolRotate"),toSymbolSize:d.getItemVisual(b,"symbolSize"),toSymbol:d.getItemVisual(b,"symbol"),style:T})}),c.updateData(p),f.line.eachItemGraphicEl(function(b){ie(b).dataModel=n,b.traverse(function(T){ie(T).dataModel=n})});function _(b,T,S){var P=b.getItemModel(T);W2(b,T,S,r,o);var C=P.getModel("itemStyle").getItemStyle();C.fill==null&&(C.fill=ay(l,"color")),b.setItemVisual(T,{symbolKeepAspect:P.get("symbolKeepAspect"),symbolOffset:qt(P.get("symbolOffset",!0),y[S?0:1]),symbolRotate:qt(P.get("symbolRotate",!0),m[S?0:1]),symbolSize:qt(P.get("symbolSize"),g[S?0:1]),symbol:qt(P.get("symbol",!0),v[S?0:1]),style:C})}this.markKeep(c),c.group.silent=n.get("silent")||r.get("silent")},t.type="markLine",t}(i$);function Sut(e,t,r){var n;e?n=Ct(e&&e.dimensions,function(u){var c=t.getData().getDimensionInfo(t.getData().mapDimension(u))||{};return ot(ot({},c),{name:u,ordinalMeta:null})}):n=[{name:"value",type:"float"}];var i=new Fl(n,r),o=new Fl(n,r),a=new Fl([],r),s=Ct(r.get("data"),_e(_ut,t,e,r));e&&(s=yr(s,_e(but,e)));var l=vut(!!e,n);return i.initData(Ct(s,function(u){return u[0]}),null,l),o.initData(Ct(s,function(u){return u[1]}),null,l),a.initData(Ct(s,function(u){return u[2]})),a.hasItemOption=!0,{from:i,to:o,line:a}}const Tut=wut;function dy(e){e.registerComponentModel(yut),e.registerComponentView(Tut),e.registerPreprocessor(function(t){e$(t.series,"markLine")&&(t.markLine=t.markLine||{})})}var Put=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,n,i){return new t(r,n,i)},t.type="markArea",t.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},t}(Hc);const Eut=Put;var sv=Oe(),Aut=function(e,t,r,n){var i=jm(e,n[0]),o=jm(e,n[1]),a=i.coord,s=o.coord;a[0]=yi(a[0],-1/0),a[1]=yi(a[1],-1/0),s[0]=yi(s[0],1/0),s[1]=yi(s[1],1/0);var l=Mq([{},i,o]);return l.coord=[i.coord,o.coord],l.x0=i.x,l.y0=i.y,l.x1=o.x,l.y1=o.y,l};function Xm(e){return!isNaN(e)&&!isFinite(e)}function G5(e,t,r,n){var i=1-e;return Xm(t[i])&&Xm(r[i])}function Cut(e,t){var r=t.coord[0],n=t.coord[1],i={coord:r,x:t.x0,y:t.y0},o={coord:n,x:t.x1,y:t.y1};return df(e,"cartesian2d")?r&&n&&(G5(1,r,n)||G5(0,r,n))?!0:put(e,i,o):Wm(e,i)||Wm(e,o)}function j5(e,t,r,n,i){var o=n.coordinateSystem,a=e.getItemModel(t),s,l=We(a.get(r[0]),i.getWidth()),u=We(a.get(r[1]),i.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(n.getMarkerPosition)s=n.getMarkerPosition(e.getValues(r,t));else{var c=e.get(r[0],t),f=e.get(r[1],t),h=[c,f];o.clampData&&o.clampData(h,h),s=o.dataToPoint(h,!0)}if(df(o,"cartesian2d")){var d=o.getAxis("x"),p=o.getAxis("y"),c=e.get(r[0],t),f=e.get(r[1],t);Xm(c)?s[0]=d.toGlobalCoord(d.getExtent()[r[0]==="x0"?0:1]):Xm(f)&&(s[1]=p.toGlobalCoord(p.getExtent()[r[1]==="y0"?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}return s}var W5=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],Mut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,n,i){n.eachSeries(function(o){var a=Hc.getMarkerModelFromSeries(o,"markArea");if(a){var s=a.getData();s.each(function(l){var u=Ct(W5,function(f){return j5(s,l,f,o,i)});s.setItemLayout(l,u);var c=s.getItemGraphicEl(l);c.setShape("points",u)})}},this)},t.prototype.renderSeries=function(r,n,i,o){var a=r.coordinateSystem,s=r.id,l=r.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,{group:new De});this.group.add(c.group),this.markKeep(c);var f=kut(a,r,n);n.setData(f),f.each(function(h){var d=Ct(W5,function(C){return j5(f,h,C,r,o)}),p=a.getAxis("x").scale,v=a.getAxis("y").scale,g=p.getExtent(),m=v.getExtent(),y=[p.parse(f.get("x0",h)),p.parse(f.get("x1",h))],_=[v.parse(f.get("y0",h)),v.parse(f.get("y1",h))];Cm(y),Cm(_);var b=!(g[0]>y[1]||g[1]<y[0]||m[0]>_[1]||m[1]<_[0]),T=!b;f.setItemLayout(h,{points:d,allClipped:T});var S=f.getItemModel(h).getModel("itemStyle").getItemStyle(),P=ay(l,"color");S.fill||(S.fill=P,Et(S.fill)&&(S.fill=PS(S.fill,.4))),S.stroke||(S.stroke=P),f.setItemVisual(h,"style",S)}),f.diff(sv(c).data).add(function(h){var d=f.getItemLayout(h);if(!d.allClipped){var p=new Yd({shape:{points:d.points}});f.setItemGraphicEl(h,p),c.group.add(p)}}).update(function(h,d){var p=sv(c).data.getItemGraphicEl(d),v=f.getItemLayout(h);v.allClipped?p&&c.group.remove(p):(p?hr(p,{shape:{points:v.points}},n,h):p=new Yd({shape:{points:v.points}}),f.setItemGraphicEl(h,p),c.group.add(p))}).remove(function(h){var d=sv(c).data.getItemGraphicEl(h);c.group.remove(d)}).execute(),f.eachItemGraphicEl(function(h,d){var p=f.getItemModel(d),v=f.getItemVisual(d,"style");h.useStyle(f.getItemVisual(d,"style")),uf(h,lu(p),{labelFetcher:n,labelDataIndex:d,defaultText:f.getName(d)||"",inheritColor:Et(v.fill)?PS(v.fill,1):"#000"}),Xd(h,p),ql(h,null,null,p.get(["emphasis","disabled"])),ie(h).dataModel=n}),sv(c).data=f,c.group.silent=n.get("silent")||r.get("silent")},t.type="markArea",t}(i$);function kut(e,t,r){var n,i,o=["x0","y0","x1","y1"];if(e){var a=Ct(e&&e.dimensions,function(u){var c=t.getData(),f=c.getDimensionInfo(c.mapDimension(u))||{};return ot(ot({},f),{name:u,ordinalMeta:null})});i=Ct(o,function(u,c){return{name:u,type:a[c%2].type}}),n=new Fl(i,r)}else i=[{name:"value",type:"float"}],n=new Fl(i,r);var s=Ct(r.get("data"),_e(Aut,t,e,r));e&&(s=yr(s,_e(Cut,e)));var l=e?function(u,c,f,h){var d=u.coord[Math.floor(h/2)][h%2];return vs(d,i[h])}:function(u,c,f,h){return vs(u.value,i[h])};return n.initData(s,null,l),n.hasItemOption=!0,n}const xut=Mut;function F0(e){e.registerComponentModel(Eut),e.registerComponentView(xut),e.registerPreprocessor(function(t){e$(t.series,"markArea")&&(t.markArea=t.markArea||{})})}var Lut=function(e,t){if(t==="all")return{type:"all",title:e.getLocaleModel().get(["legend","selector","all"])};if(t==="inverse")return{type:"inverse",title:e.getLocaleModel().get(["legend","selector","inverse"])}},Iut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i),r.selected=r.selected||{},this._updateSelector(r)},t.prototype.mergeOption=function(r,n){e.prototype.mergeOption.call(this,r,n),this._updateSelector(r)},t.prototype._updateSelector=function(r){var n=r.selector,i=this.ecModel;n===!0&&(n=r.selector=["all","inverse"]),ut(n)&&N(n,function(o,a){Et(o)&&(o={type:o}),n[a]=oe(o,Lut(i,o.type))})},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var r=this._data;if(r[0]&&this.get("selectedMode")==="single"){for(var n=!1,i=0;i<r.length;i++){var o=r[i].get("name");if(this.isSelected(o)){this.select(o),n=!0;break}}!n&&this.select(r[0].get("name"))}},t.prototype._updateData=function(r){var n=[],i=[];r.eachRawSeries(function(s){var l=s.name;i.push(l);var u;if(s.legendVisualProvider){var c=s.legendVisualProvider,f=c.getAllNames();r.isSeriesFiltered(s)||(i=i.concat(f)),f.length?n=n.concat(f):u=!0}else u=!0;u&&OP(s)&&n.push(s.name)}),this._availableNames=i;var o=this.get("data")||n,a=Ct(o,function(s){return(Et(s)||be(s))&&(s={name:s}),new br(s,this,this.ecModel)},this);this._data=a},t.prototype.getData=function(){return this._data},t.prototype.select=function(r){var n=this.option.selected,i=this.get("selectedMode");if(i==="single"){var o=this._data;N(o,function(a){n[a.get("name")]=!1})}n[r]=!0},t.prototype.unSelect=function(r){this.get("selectedMode")!=="single"&&(this.option.selected[r]=!1)},t.prototype.toggleSelected=function(r){var n=this.option.selected;n.hasOwnProperty(r)||(n[r]=!0),this[n[r]?"unSelect":"select"](r)},t.prototype.allSelect=function(){var r=this._data,n=this.option.selected;N(r,function(i){n[i.get("name",!0)]=!0})},t.prototype.inverseSelect=function(){var r=this._data,n=this.option.selected;N(r,function(i){var o=i.get("name",!0);n.hasOwnProperty(o)||(n[o]=!0),n[o]=!n[o]})},t.prototype.isSelected=function(r){var n=this.option.selected;return!(n.hasOwnProperty(r)&&!n[r])&&ce(this._availableNames,r)>=0},t.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(Ce);const P3=Iut;var Vu=_e,E3=N,lv=De,Out=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.newlineDisabled=!1,r}return t.prototype.init=function(){this.group.add(this._contentGroup=new lv),this.group.add(this._selectorGroup=new lv),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(r,n,i){var o=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!r.get("show",!0)){var a=r.get("align"),s=r.get("orient");(!a||a==="auto")&&(a=r.get("left")==="right"&&s==="vertical"?"right":"left");var l=r.get("selector",!0),u=r.get("selectorPosition",!0);l&&(!u||u==="auto")&&(u=s==="horizontal"?"end":"start"),this.renderInner(a,r,n,i,l,s,u);var c=r.getBoxLayoutParams(),f={width:i.getWidth(),height:i.getHeight()},h=r.get("padding"),d=Ps(c,f,h),p=this.layoutInner(r,a,d,o,l,u),v=Ps(te({width:p.width,height:p.height},c),f,h);this.group.x=v.x-p.x,this.group.y=v.y-p.y,this.group.markRedraw(),this.group.add(this._backgroundEl=$lt(p,r))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(r,n,i,o,a,s,l){var u=this.getContentGroup(),c=jt(),f=n.get("selectedMode"),h=[];i.eachRawSeries(function(d){!d.get("legendHoverLink")&&h.push(d.id)}),E3(n.getData(),function(d,p){var v=d.get("name");if(!this.newlineDisabled&&(v===""||v===`
`)){var g=new lv;g.newline=!0,u.add(g);return}var m=i.getSeriesByName(v)[0];if(!c.get(v))if(m){var y=m.getData(),_=y.getVisual("legendLineStyle")||{},b=y.getVisual("legendIcon"),T=y.getVisual("style"),S=this._createItem(m,v,p,d,n,r,_,T,b,f,o);S.on("click",Vu(H5,v,null,o,h)).on("mouseover",Vu(A3,m.name,null,o,h)).on("mouseout",Vu(C3,m.name,null,o,h)),c.set(v,!0)}else i.eachRawSeries(function(P){if(!c.get(v)&&P.legendVisualProvider){var C=P.legendVisualProvider;if(!C.containName(v))return;var A=C.indexOfName(v),M=C.getItemVisual(A,"style"),k=C.getItemVisual(A,"legendIcon"),O=Hn(M.fill);O&&O[3]===0&&(O[3]=.2,M=ot(ot({},M),{fill:na(O,"rgba")}));var F=this._createItem(P,v,p,d,n,r,{},M,k,f,o);F.on("click",Vu(H5,null,v,o,h)).on("mouseover",Vu(A3,null,v,o,h)).on("mouseout",Vu(C3,null,v,o,h)),c.set(v,!0)}},this)},this),a&&this._createSelector(a,n,o,s,l)},t.prototype._createSelector=function(r,n,i,o,a){var s=this.getSelectorGroup();E3(r,function(u){var c=u.type,f=new Je({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:c==="all"?"legendAllSelect":"legendInverseSelect"})}});s.add(f);var h=n.getModel("selectorLabel"),d=n.getModel(["emphasis","selectorLabel"]);uf(f,{normal:h,emphasis:d},{defaultText:u.title}),VS(f)})},t.prototype._createItem=function(r,n,i,o,a,s,l,u,c,f,h){var d=r.visualDrawType,p=a.get("itemWidth"),v=a.get("itemHeight"),g=a.isSelected(n),m=o.get("symbolRotate"),y=o.get("symbolKeepAspect"),_=o.get("icon");c=_||c||"roundRect";var b=Rut(c,o,l,u,d,g,h),T=new lv,S=o.getModel("textStyle");if(Ut(r.getLegendIcon)&&(!_||_==="inherit"))T.add(r.getLegendIcon({itemWidth:p,itemHeight:v,icon:c,iconRotate:m,itemStyle:b.itemStyle,lineStyle:b.lineStyle,symbolKeepAspect:y}));else{var P=_==="inherit"&&r.getData().getVisual("symbol")?m==="inherit"?r.getData().getVisual("symbolRotate"):m:0;T.add(Dut({itemWidth:p,itemHeight:v,icon:c,iconRotate:P,itemStyle:b.itemStyle,lineStyle:b.lineStyle,symbolKeepAspect:y}))}var C=s==="left"?p+5:-5,A=s,M=a.get("formatter"),k=n;Et(M)&&M?k=M.replace("{name}",n!=null?n:""):Ut(M)&&(k=M(n));var O=o.get("inactiveColor");T.add(new Je({style:an(S,{text:k,x:C,y:v/2,fill:g?S.getTextColor():O,align:A,verticalAlign:"middle"})}));var F=new Ke({shape:T.getBoundingRect(),invisible:!0}),z=o.getModel("tooltip");return z.get("show")&&qP({el:F,componentModel:a,itemName:n,itemTooltipOption:z.option}),T.add(F),T.eachChild(function(R){R.silent=!0}),F.silent=!f,this.getContentGroup().add(T),VS(T),T.__legendDataIndex=i,T},t.prototype.layoutInner=function(r,n,i,o,a,s){var l=this.getContentGroup(),u=this.getSelectorGroup();Lc(r.get("orient"),l,r.get("itemGap"),i.width,i.height);var c=l.getBoundingRect(),f=[-c.x,-c.y];if(u.markRedraw(),l.markRedraw(),a){Lc("horizontal",u,r.get("selectorItemGap",!0));var h=u.getBoundingRect(),d=[-h.x,-h.y],p=r.get("selectorButtonGap",!0),v=r.getOrient().index,g=v===0?"width":"height",m=v===0?"height":"width",y=v===0?"y":"x";s==="end"?d[v]+=c[g]+p:f[v]+=h[g]+p,d[1-v]+=c[m]/2-h[m]/2,u.x=d[0],u.y=d[1],l.x=f[0],l.y=f[1];var _={x:0,y:0};return _[g]=c[g]+p+h[g],_[m]=Math.max(c[m],h[m]),_[y]=Math.min(0,h[y]+d[1-v]),_}else return l.x=f[0],l.y=f[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(Qn);function Rut(e,t,r,n,i,o,a){function s(g,m){g.lineWidth==="auto"&&(g.lineWidth=m.lineWidth>0?2:0),E3(g,function(y,_){g[_]==="inherit"&&(g[_]=m[_])})}var l=t.getModel("itemStyle"),u=l.getItemStyle(),c=e.lastIndexOf("empty",0)===0?"fill":"stroke",f=l.getShallow("decal");u.decal=!f||f==="inherit"?n.decal:Bm(f,a),u.fill==="inherit"&&(u.fill=n[i]),u.stroke==="inherit"&&(u.stroke=n[c]),u.opacity==="inherit"&&(u.opacity=(i==="fill"?n:r).opacity),s(u,n);var h=t.getModel("lineStyle"),d=h.getLineStyle();if(s(d,r),u.fill==="auto"&&(u.fill=n.fill),u.stroke==="auto"&&(u.stroke=n.fill),d.stroke==="auto"&&(d.stroke=n.fill),!o){var p=t.get("inactiveBorderWidth"),v=u[c];u.lineWidth=p==="auto"?n.lineWidth>0&&v?2:0:u.lineWidth,u.fill=t.get("inactiveColor"),u.stroke=t.get("inactiveBorderColor"),d.stroke=h.get("inactiveColor"),d.lineWidth=h.get("inactiveWidth")}return{itemStyle:u,lineStyle:d}}function Dut(e){var t=e.icon||"roundRect",r=Li(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill,e.symbolKeepAspect);return r.setStyle(e.itemStyle),r.rotation=(e.iconRotate||0)*Math.PI/180,r.setOrigin([e.itemWidth/2,e.itemHeight/2]),t.indexOf("empty")>-1&&(r.style.stroke=r.style.fill,r.style.fill="#fff",r.style.lineWidth=2),r}function H5(e,t,r,n){C3(e,t,r,n),r.dispatchAction({type:"legendToggleSelect",name:e!=null?e:t}),A3(e,t,r,n)}function o$(e){for(var t=e.getZr().storage.getDisplayList(),r,n=0,i=t.length;n<i&&!(r=t[n].states.emphasis);)n++;return r&&r.hoverLayer}function A3(e,t,r,n){o$(r)||r.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:n})}function C3(e,t,r,n){o$(r)||r.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:n})}const a$=Out;function Nut(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries(function(r){for(var n=0;n<t.length;n++)if(!t[n].isSelected(r.name))return!1;return!0})}function hh(e,t,r){var n={},i=e==="toggleSelected",o;return r.eachComponent("legend",function(a){i&&o!=null?a[o?"select":"unSelect"](t.name):e==="allSelect"||e==="inverseSelect"?a[e]():(a[e](t.name),o=a.isSelected(t.name));var s=a.getData();N(s,function(l){var u=l.get("name");if(!(u===`
`||u==="")){var c=a.isSelected(u);n.hasOwnProperty(u)?n[u]=n[u]&&c:n[u]=c}})}),e==="allSelect"||e==="inverseSelect"?{selected:n}:{name:t.name,selected:n}}function Fut(e){e.registerAction("legendToggleSelect","legendselectchanged",_e(hh,"toggleSelected")),e.registerAction("legendAllSelect","legendselectall",_e(hh,"allSelect")),e.registerAction("legendInverseSelect","legendinverseselect",_e(hh,"inverseSelect")),e.registerAction("legendSelect","legendselected",_e(hh,"select")),e.registerAction("legendUnSelect","legendunselected",_e(hh,"unSelect"))}function s$(e){e.registerComponentModel(P3),e.registerComponentView(a$),e.registerProcessor(e.PRIORITY.PROCESSOR.SERIES_FILTER,Nut),e.registerSubTypeDefaulter("legend",function(){return"plain"}),Fut(e)}var But=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.setScrollDataIndex=function(r){this.option.scrollDataIndex=r},t.prototype.init=function(r,n,i){var o=ey(r);e.prototype.init.call(this,r,n,i),X5(this,r,o)},t.prototype.mergeOption=function(r,n){e.prototype.mergeOption.call(this,r,n),X5(this,this.option,r)},t.type="legend.scroll",t.defaultOption=q1(P3.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}(P3);function X5(e,t,r){var n=e.getOrient(),i=[1,1];i[n.index]=0,Gc(t,r,{type:"box",ignoreSize:!!i})}const $ut=But;var Y5=De,H2=["width","height"],X2=["x","y"],zut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.newlineDisabled=!0,r._currentIndex=0,r}return t.prototype.init=function(){e.prototype.init.call(this),this.group.add(this._containerGroup=new Y5),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Y5)},t.prototype.resetInner=function(){e.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(r,n,i,o,a,s,l){var u=this;e.prototype.renderInner.call(this,r,n,i,o,a,s,l);var c=this._controllerGroup,f=n.get("pageIconSize",!0),h=ut(f)?f:[f,f];p("pagePrev",0);var d=n.getModel("pageTextStyle");c.add(new Je({name:"pageText",style:{text:"xx/xx",fill:d.getTextColor(),font:d.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1);function p(v,g){var m=v+"DataIndex",y=YP(n.get("pageIcons",!0)[n.getOrient().name][g],{onclick:Vt(u._pageGo,u,m,n,o)},{x:-h[0]/2,y:-h[1]/2,width:h[0],height:h[1]});y.name=v,c.add(y)}},t.prototype.layoutInner=function(r,n,i,o,a,s){var l=this.getSelectorGroup(),u=r.getOrient().index,c=H2[u],f=X2[u],h=H2[1-u],d=X2[1-u];a&&Lc("horizontal",l,r.get("selectorItemGap",!0));var p=r.get("selectorButtonGap",!0),v=l.getBoundingRect(),g=[-v.x,-v.y],m=zt(i);a&&(m[c]=i[c]-v[c]-p);var y=this._layoutContentAndController(r,o,m,u,c,h,d,f);if(a){if(s==="end")g[u]+=y[c]+p;else{var _=v[c]+p;g[u]-=_,y[f]-=_}y[c]+=v[c]+p,g[1-u]+=y[d]+y[h]/2-v[h]/2,y[h]=Math.max(y[h],v[h]),y[d]=Math.min(y[d],v[d]+g[1-u]),l.x=g[0],l.y=g[1],l.markRedraw()}return y},t.prototype._layoutContentAndController=function(r,n,i,o,a,s,l,u){var c=this.getContentGroup(),f=this._containerGroup,h=this._controllerGroup;Lc(r.get("orient"),c,r.get("itemGap"),o?i.width:null,o?null:i.height),Lc("horizontal",h,r.get("pageButtonItemGap",!0));var d=c.getBoundingRect(),p=h.getBoundingRect(),v=this._showController=d[a]>i[a],g=[-d.x,-d.y];n||(g[o]=c[u]);var m=[0,0],y=[-p.x,-p.y],_=qt(r.get("pageButtonGap",!0),r.get("itemGap",!0));if(v){var b=r.get("pageButtonPosition",!0);b==="end"?y[o]+=i[a]-p[a]:m[o]+=p[a]+_}y[1-o]+=d[s]/2-p[s]/2,c.setPosition(g),f.setPosition(m),h.setPosition(y);var T={x:0,y:0};if(T[a]=v?i[a]:d[a],T[s]=Math.max(d[s],p[s]),T[l]=Math.min(0,p[l]+y[1-o]),f.__rectSize=i[a],v){var S={x:0,y:0};S[a]=Math.max(i[a]-p[a]-_,0),S[s]=T[s],f.setClipPath(new Ke({shape:S})),f.__rectSize=S[a]}else h.eachChild(function(C){C.attr({invisible:!0,silent:!0})});var P=this._getPageInfo(r);return P.pageIndex!=null&&hr(c,{x:P.contentPosition[0],y:P.contentPosition[1]},v?r:null),this._updatePageInfoView(r,P),T},t.prototype._pageGo=function(r,n,i){var o=this._getPageInfo(n)[r];o!=null&&i.dispatchAction({type:"legendScroll",scrollDataIndex:o,legendId:n.id})},t.prototype._updatePageInfoView=function(r,n){var i=this._controllerGroup;N(["pagePrev","pageNext"],function(c){var f=c+"DataIndex",h=n[f]!=null,d=i.childOfName(c);d&&(d.setStyle("fill",h?r.get("pageIconColor",!0):r.get("pageIconInactiveColor",!0)),d.cursor=h?"pointer":"default")});var o=i.childOfName("pageText"),a=r.get("pageFormatter"),s=n.pageIndex,l=s!=null?s+1:0,u=n.pageCount;o&&a&&o.setStyle("text",Et(a)?a.replace("{current}",l==null?"":l+"").replace("{total}",u==null?"":u+""):a({current:l,total:u}))},t.prototype._getPageInfo=function(r){var n=r.get("scrollDataIndex",!0),i=this.getContentGroup(),o=this._containerGroup.__rectSize,a=r.getOrient().index,s=H2[a],l=X2[a],u=this._findTargetItemIndex(n),c=i.children(),f=c[u],h=c.length,d=h?1:0,p={contentPosition:[i.x,i.y],pageCount:d,pageIndex:d-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!f)return p;var v=b(f);p.contentPosition[a]=-v.s;for(var g=u+1,m=v,y=v,_=null;g<=h;++g)_=b(c[g]),(!_&&y.e>m.s+o||_&&!T(_,m.s))&&(y.i>m.i?m=y:m=_,m&&(p.pageNextDataIndex==null&&(p.pageNextDataIndex=m.i),++p.pageCount)),y=_;for(var g=u-1,m=v,y=v,_=null;g>=-1;--g)_=b(c[g]),(!_||!T(y,_.s))&&m.i<y.i&&(y=m,p.pagePrevDataIndex==null&&(p.pagePrevDataIndex=m.i),++p.pageCount,++p.pageIndex),m=_;return p;function b(S){if(S){var P=S.getBoundingRect(),C=P[l]+S[l];return{s:C,e:C+P[s],i:S.__legendDataIndex}}}function T(S,P){return S.e>=P&&S.s<=P+o}},t.prototype._findTargetItemIndex=function(r){if(!this._showController)return 0;var n,i=this.getContentGroup(),o;return i.eachChild(function(a,s){var l=a.__legendDataIndex;o==null&&l!=null&&(o=s),l===r&&(n=s)}),n!=null?n:o},t.type="legend.scroll",t}(a$);const Vut=zut;function Uut(e){e.registerAction("legendScroll","legendscroll",function(t,r){var n=t.scrollDataIndex;n!=null&&r.eachComponent({mainType:"legend",subType:"scroll",query:t},function(i){i.setScrollDataIndex(n)})})}function Gut(e){Br(s$),e.registerComponentModel($ut),e.registerComponentView(Vut),Uut(e)}function gf(e){Br(s$),Br(Gut)}var jut={get:function(e,t,r){var n=zt((Wut[e]||{})[t]);return r&&ut(n)?n[n.length-1]:n}},Wut={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}};const l$=jut;var q5=sn.mapVisual,Hut=sn.eachVisual,Xut=ut,Z5=N,Yut=Cm,qut=la,Zut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.stateList=["inRange","outOfRange"],r.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],r.layoutMode={type:"box",ignoreSize:!0},r.dataBound=[-1/0,1/0],r.targetVisuals={},r.controllerVisuals={},r}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i)},t.prototype.optionUpdated=function(r,n){var i=this.option;!n&&lut(i,r,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},t.prototype.resetVisual=function(r){var n=this.stateList;r=Vt(r,this),this.controllerVisuals=V5(this.option.controller,n,r),this.targetVisuals=V5(this.option.target,n,r)},t.prototype.getItemSymbol=function(){return null},t.prototype.getTargetSeriesIndices=function(){var r=this.option.seriesIndex,n=[];return r==null||r==="all"?this.ecModel.eachSeries(function(i,o){n.push(o)}):n=Ze(r),n},t.prototype.eachTargetSeries=function(r,n){N(this.getTargetSeriesIndices(),function(i){var o=this.ecModel.getSeriesByIndex(i);o&&r.call(n,o)},this)},t.prototype.isTargetSeries=function(r){var n=!1;return this.eachTargetSeries(function(i){i===r&&(n=!0)}),n},t.prototype.formatValueText=function(r,n,i){var o=this.option,a=o.precision,s=this.dataBound,l=o.formatter,u;i=i||["<",">"],ut(r)&&(r=r.slice(),u=!0);var c=n?r:u?[f(r[0]),f(r[1])]:f(r);if(Et(l))return l.replace("{value}",u?c[0]:c).replace("{value2}",u?c[1]:c);if(Ut(l))return u?l(r[0],r[1]):l(r);if(u)return r[0]===s[0]?i[0]+" "+c[1]:r[1]===s[1]?i[1]+" "+c[0]:c[0]+" - "+c[1];return c;function f(h){return h===s[0]?"min":h===s[1]?"max":(+h).toFixed(Math.min(a,20))}},t.prototype.resetExtent=function(){var r=this.option,n=Yut([r.min,r.max]);this._dataExtent=n},t.prototype.getDataDimensionIndex=function(r){var n=this.option.dimension;if(n!=null)return r.getDimensionIndex(n);for(var i=r.dimensions,o=i.length-1;o>=0;o--){var a=i[o],s=r.getDimensionInfo(a);if(!s.isCalculationCoord)return s.storeDimIndex}},t.prototype.getExtent=function(){return this._dataExtent.slice()},t.prototype.completeVisualOption=function(){var r=this.ecModel,n=this.option,i={inRange:n.inRange,outOfRange:n.outOfRange},o=n.target||(n.target={}),a=n.controller||(n.controller={});oe(o,i),oe(a,i);var s=this.isCategory();l.call(this,o),l.call(this,a),u.call(this,o,"inRange","outOfRange"),c.call(this,a);function l(f){Xut(n.color)&&!f.inRange&&(f.inRange={color:n.color.slice().reverse()}),f.inRange=f.inRange||{color:r.get("gradientColor")}}function u(f,h,d){var p=f[h],v=f[d];p&&!v&&(v=f[d]={},Z5(p,function(g,m){if(!!sn.isValidType(m)){var y=l$.get(m,"inactive",s);y!=null&&(v[m]=y,m==="color"&&!v.hasOwnProperty("opacity")&&!v.hasOwnProperty("colorAlpha")&&(v.opacity=[0,0]))}}))}function c(f){var h=(f.inRange||{}).symbol||(f.outOfRange||{}).symbol,d=(f.inRange||{}).symbolSize||(f.outOfRange||{}).symbolSize,p=this.get("inactiveColor"),v=this.getItemSymbol(),g=v||"roundRect";Z5(this.stateList,function(m){var y=this.itemSize,_=f[m];_||(_=f[m]={color:s?p:[p]}),_.symbol==null&&(_.symbol=h&&zt(h)||(s?g:[g])),_.symbolSize==null&&(_.symbolSize=d&&zt(d)||(s?y[0]:[y[0],y[0]])),_.symbol=q5(_.symbol,function(S){return S==="none"?g:S});var b=_.symbolSize;if(b!=null){var T=-1/0;Hut(b,function(S){S>T&&(T=S)}),_.symbolSize=q5(b,function(S){return qut(S,[0,T],[0,y[0]],!0)})}},this)}},t.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},t.prototype.isCategory=function(){return!!this.option.categories},t.prototype.setSelected=function(r){},t.prototype.getSelected=function(){return null},t.prototype.getValueState=function(r){return null},t.prototype.getVisualMeta=function(r){return null},t.type="visualMap",t.dependencies=["series"],t.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},t}(Ce);const Ym=Zut;var K5=[20,140],Kut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(r,n){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(i){i.mappingMethod="linear",i.dataExtent=this.getExtent()}),this._resetRange()},t.prototype.resetItemSize=function(){e.prototype.resetItemSize.apply(this,arguments);var r=this.itemSize;(r[0]==null||isNaN(r[0]))&&(r[0]=K5[0]),(r[1]==null||isNaN(r[1]))&&(r[1]=K5[1])},t.prototype._resetRange=function(){var r=this.getExtent(),n=this.option.range;!n||n.auto?(r.auto=1,this.option.range=r):ut(n)&&(n[0]>n[1]&&n.reverse(),n[0]=Math.max(n[0],r[0]),n[1]=Math.min(n[1],r[1]))},t.prototype.completeVisualOption=function(){e.prototype.completeVisualOption.apply(this,arguments),N(this.stateList,function(r){var n=this.option.controller[r].symbolSize;n&&n[0]!==n[1]&&(n[0]=n[1]/3)},this)},t.prototype.setSelected=function(r){this.option.range=r.slice(),this._resetRange()},t.prototype.getSelected=function(){var r=this.getExtent(),n=Cm((this.get("range")||[]).slice());return n[0]>r[1]&&(n[0]=r[1]),n[1]>r[1]&&(n[1]=r[1]),n[0]<r[0]&&(n[0]=r[0]),n[1]<r[0]&&(n[1]=r[0]),n},t.prototype.getValueState=function(r){var n=this.option.range,i=this.getExtent();return(n[0]<=i[0]||n[0]<=r)&&(n[1]>=i[1]||r<=n[1])?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(r){var n=[];return this.eachTargetSeries(function(i){var o=[],a=i.getData();a.each(this.getDataDimensionIndex(a),function(s,l){r[0]<=s&&s<=r[1]&&o.push(l)},this),n.push({seriesId:i.id,dataIndex:o})},this),n},t.prototype.getVisualMeta=function(r){var n=J5(this,"outOfRange",this.getExtent()),i=J5(this,"inRange",this.option.range.slice()),o=[];function a(d,p){o.push({value:d,color:r(d,p)})}for(var s=0,l=0,u=i.length,c=n.length;l<c&&(!i.length||n[l]<=i[0]);l++)n[l]<i[s]&&a(n[l],"outOfRange");for(var f=1;s<u;s++,f=0)f&&o.length&&a(i[s],"outOfRange"),a(i[s],"inRange");for(var f=1;l<c;l++)(!i.length||i[i.length-1]<n[l])&&(f&&(o.length&&a(o[o.length-1].value,"outOfRange"),f=0),a(n[l],"outOfRange"));var h=o.length;return{stops:o,outerColors:[h?o[0].color:"transparent",h?o[h-1].color:"transparent"]}},t.type="visualMap.continuous",t.defaultOption=q1(Ym.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),t}(Ym);function J5(e,t,r){if(r[0]===r[1])return r.slice();for(var n=200,i=(r[1]-r[0])/n,o=r[0],a=[],s=0;s<=n&&o<r[1];s++)a.push(o),o+=i;return a.push(r[1]),a}const Jut=Kut;var Qut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.autoPositionValues={left:1,right:1,top:1,bottom:1},r}return t.prototype.init=function(r,n){this.ecModel=r,this.api=n},t.prototype.render=function(r,n,i,o){if(this.visualMapModel=r,r.get("show")===!1){this.group.removeAll();return}this.doRender(r,n,i,o)},t.prototype.renderBackground=function(r){var n=this.visualMapModel,i=x0(n.get("padding")||0),o=r.getBoundingRect();r.add(new Ke({z2:-1,silent:!0,shape:{x:o.x-i[3],y:o.y-i[0],width:o.width+i[3]+i[1],height:o.height+i[0]+i[2]},style:{fill:n.get("backgroundColor"),stroke:n.get("borderColor"),lineWidth:n.get("borderWidth")}}))},t.prototype.getControllerVisual=function(r,n,i){i=i||{};var o=i.forceState,a=this.visualMapModel,s={};if(n==="color"){var l=a.get("contentColor");s.color=l}function u(d){return s[d]}function c(d,p){s[d]=p}var f=a.controllerVisuals[o||a.getValueState(r)],h=sn.prepareVisualTypes(f);return N(h,function(d){var p=f[d];i.convertOpacityToAlpha&&d==="opacity"&&(d="colorAlpha",p=f.__alphaForOpacity),sn.dependsOn(d,n)&&p&&p.applyVisual(r,u,c)}),s[n]},t.prototype.positionGroup=function(r){var n=this.visualMapModel,i=this.api;ptt(r,n.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()})},t.prototype.doRender=function(r,n,i,o){},t.type="visualMap",t}(Qn);const u$=Qut;var Q5=[["left","right","width"],["top","bottom","height"]];function c$(e,t,r){var n=e.option,i=n.align;if(i!=null&&i!=="auto")return i;for(var o={width:t.getWidth(),height:t.getHeight()},a=n.orient==="horizontal"?1:0,s=Q5[a],l=[0,null,10],u={},c=0;c<3;c++)u[Q5[1-a][c]]=l[c],u[s[c]]=c===2?r[0]:n[s[c]];var f=[["x","width",3],["y","height",0]][a],h=Ps(u,o,n.padding);return s[(h.margin[f[2]]||0)+h[f[0]]+h[f[1]]*.5<o[f[1]]*.5?0:1]}function jg(e,t){return N(e||[],function(r){r.dataIndex!=null&&(r.dataIndexInside=r.dataIndex,r.dataIndex=null),r.highlightKey="visualMap"+(t?t.componentIndex:"")}),e}var ao=la,tct=N,tx=Math.min,Y2=Math.max,ect=12,rct=6,nct=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._shapes={},r._dataInterval=[],r._handleEnds=[],r._hoverLinkDataIndices=[],r}return t.prototype.doRender=function(r,n,i,o){this._api=i,(!o||o.type!=="selectDataRange"||o.from!==this.uid)&&this._buildView()},t.prototype._buildView=function(){this.group.removeAll();var r=this.visualMapModel,n=this.group;this._orient=r.get("orient"),this._useHandle=r.get("calculable"),this._resetInterval(),this._renderBar(n);var i=r.get("text");this._renderEndsText(n,i,0),this._renderEndsText(n,i,1),this._updateView(!0),this.renderBackground(n),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(n)},t.prototype._renderEndsText=function(r,n,i){if(!!n){var o=n[1-i];o=o!=null?o+"":"";var a=this.visualMapModel,s=a.get("textGap"),l=a.itemSize,u=this._shapes.mainGroup,c=this._applyTransform([l[0]/2,i===0?-s:l[1]+s],u),f=this._applyTransform(i===0?"bottom":"top",u),h=this._orient,d=this.visualMapModel.textStyleModel;this.group.add(new Je({style:an(d,{x:c[0],y:c[1],verticalAlign:h==="horizontal"?"middle":f,align:h==="horizontal"?f:"center",text:o})}))}},t.prototype._renderBar=function(r){var n=this.visualMapModel,i=this._shapes,o=n.itemSize,a=this._orient,s=this._useHandle,l=c$(n,this.api,o),u=i.mainGroup=this._createBarGroup(l),c=new De;u.add(c),c.add(i.outOfRange=ex()),c.add(i.inRange=ex(null,s?nx(this._orient):null,Vt(this._dragHandle,this,"all",!1),Vt(this._dragHandle,this,"all",!0))),c.setClipPath(new Ke({shape:{x:0,y:0,width:o[0],height:o[1],r:3}}));var f=n.textStyleModel.getTextRect("\u56FD"),h=Y2(f.width,f.height);s&&(i.handleThumbs=[],i.handleLabels=[],i.handleLabelPoints=[],this._createHandle(n,u,0,o,h,a),this._createHandle(n,u,1,o,h,a)),this._createIndicator(n,u,o,h,a),r.add(u)},t.prototype._createHandle=function(r,n,i,o,a,s){var l=Vt(this._dragHandle,this,i,!1),u=Vt(this._dragHandle,this,i,!0),c=sa(r.get("handleSize"),o[0]),f=Li(r.get("handleIcon"),-c/2,-c/2,c,c,null,!0),h=nx(this._orient);f.attr({cursor:h,draggable:!0,drift:l,ondragend:u,onmousemove:function(m){Hl(m.event)}}),f.x=o[0]/2,f.useStyle(r.getModel("handleStyle").getItemStyle()),f.setStyle({strokeNoScale:!0,strokeFirst:!0}),f.style.lineWidth*=2,f.ensureState("emphasis").style=r.getModel(["emphasis","handleStyle"]).getItemStyle(),UP(f,!0),n.add(f);var d=this.visualMapModel.textStyleModel,p=new Je({cursor:h,draggable:!0,drift:l,onmousemove:function(m){Hl(m.event)},ondragend:u,style:an(d,{x:0,y:0,text:""})});p.ensureState("blur").style={opacity:.1},p.stateTransition={duration:200},this.group.add(p);var v=[c,0],g=this._shapes;g.handleThumbs[i]=f,g.handleLabelPoints[i]=v,g.handleLabels[i]=p},t.prototype._createIndicator=function(r,n,i,o,a){var s=sa(r.get("indicatorSize"),i[0]),l=Li(r.get("indicatorIcon"),-s/2,-s/2,s,s,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:i[0]/2});var u=r.getModel("indicatorStyle").getItemStyle();if(l instanceof ma){var c=l.style;l.useStyle(ot({image:c.image,x:c.x,y:c.y,width:c.width,height:c.height},u))}else l.useStyle(u);n.add(l);var f=this.visualMapModel.textStyleModel,h=new Je({silent:!0,invisible:!0,style:an(f,{x:0,y:0,text:""})});this.group.add(h);var d=[(a==="horizontal"?o/2:rct)+i[0]/2,0],p=this._shapes;p.indicator=l,p.indicatorLabel=h,p.indicatorLabelPoint=d,this._firstShowIndicator=!0},t.prototype._dragHandle=function(r,n,i,o){if(!!this._useHandle){if(this._dragging=!n,!n){var a=this._applyTransform([i,o],this._shapes.mainGroup,!0);this._updateInterval(r,a[1]),this._hideIndicator(),this._updateView()}n===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),n?!this._hovering&&this._clearHoverLinkToSeries():rx(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[r],!1)}},t.prototype._resetInterval=function(){var r=this.visualMapModel,n=this._dataInterval=r.getSelected(),i=r.getExtent(),o=[0,r.itemSize[1]];this._handleEnds=[ao(n[0],i,o,!0),ao(n[1],i,o,!0)]},t.prototype._updateInterval=function(r,n){n=n||0;var i=this.visualMapModel,o=this._handleEnds,a=[0,i.itemSize[1]];bst(n,o,a,r,0);var s=i.getExtent();this._dataInterval=[ao(o[0],a,s,!0),ao(o[1],a,s,!0)]},t.prototype._updateView=function(r){var n=this.visualMapModel,i=n.getExtent(),o=this._shapes,a=[0,n.itemSize[1]],s=r?a:this._handleEnds,l=this._createBarVisual(this._dataInterval,i,s,"inRange"),u=this._createBarVisual(i,i,a,"outOfRange");o.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),o.outOfRange.setStyle({fill:u.barColor}).setShape("points",u.barPoints),this._updateHandle(s,l)},t.prototype._createBarVisual=function(r,n,i,o){var a={forceState:o,convertOpacityToAlpha:!0},s=this._makeColorGradient(r,a),l=[this.getControllerVisual(r[0],"symbolSize",a),this.getControllerVisual(r[1],"symbolSize",a)],u=this._createBarPoints(i,l);return{barColor:new WP(0,0,0,1,s),barPoints:u,handlesColor:[s[0].color,s[s.length-1].color]}},t.prototype._makeColorGradient=function(r,n){var i=100,o=[],a=(r[1]-r[0])/i;o.push({color:this.getControllerVisual(r[0],"color",n),offset:0});for(var s=1;s<i;s++){var l=r[0]+a*s;if(l>r[1])break;o.push({color:this.getControllerVisual(l,"color",n),offset:s/i})}return o.push({color:this.getControllerVisual(r[1],"color",n),offset:1}),o},t.prototype._createBarPoints=function(r,n){var i=this.visualMapModel.itemSize;return[[i[0]-n[0],r[0]],[i[0],r[0]],[i[0],r[1]],[i[0]-n[1],r[1]]]},t.prototype._createBarGroup=function(r){var n=this._orient,i=this.visualMapModel.get("inverse");return new De(n==="horizontal"&&!i?{scaleX:r==="bottom"?1:-1,rotation:Math.PI/2}:n==="horizontal"&&i?{scaleX:r==="bottom"?-1:1,rotation:-Math.PI/2}:n==="vertical"&&!i?{scaleX:r==="left"?1:-1,scaleY:-1}:{scaleX:r==="left"?1:-1})},t.prototype._updateHandle=function(r,n){if(!!this._useHandle){var i=this._shapes,o=this.visualMapModel,a=i.handleThumbs,s=i.handleLabels,l=o.itemSize,u=o.getExtent();tct([0,1],function(c){var f=a[c];f.setStyle("fill",n.handlesColor[c]),f.y=r[c];var h=ao(r[c],[0,l[1]],u,!0),d=this.getControllerVisual(h,"symbolSize");f.scaleX=f.scaleY=d/l[0],f.x=l[0]-d/2;var p=Mc(i.handleLabelPoints[c],Bg(f,this.group));s[c].setStyle({x:p[0],y:p[1],text:o.formatValueText(this._dataInterval[c]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",i.mainGroup):"center"})},this)}},t.prototype._showIndicator=function(r,n,i,o){var a=this.visualMapModel,s=a.getExtent(),l=a.itemSize,u=[0,l[1]],c=this._shapes,f=c.indicator;if(!!f){f.attr("invisible",!1);var h={convertOpacityToAlpha:!0},d=this.getControllerVisual(r,"color",h),p=this.getControllerVisual(r,"symbolSize"),v=ao(r,s,u,!0),g=l[0]-p/2,m={x:f.x,y:f.y};f.y=v,f.x=g;var y=Mc(c.indicatorLabelPoint,Bg(f,this.group)),_=c.indicatorLabel;_.attr("invisible",!1);var b=this._applyTransform("left",c.mainGroup),T=this._orient,S=T==="horizontal";_.setStyle({text:(i||"")+a.formatValueText(n),verticalAlign:S?b:"middle",align:S?"center":b});var P={x:g,y:v,style:{fill:d}},C={style:{x:y[0],y:y[1]}};if(a.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var A={duration:100,easing:"cubicInOut",additive:!0};f.x=m.x,f.y=m.y,f.animateTo(P,A),_.animateTo(C,A)}else f.attr(P),_.attr(C);this._firstShowIndicator=!1;var M=this._shapes.handleLabels;if(M)for(var k=0;k<M.length;k++)this._api.enterBlur(M[k])}},t.prototype._enableHoverLinkToSeries=function(){var r=this;this._shapes.mainGroup.on("mousemove",function(n){if(r._hovering=!0,!r._dragging){var i=r.visualMapModel.itemSize,o=r._applyTransform([n.offsetX,n.offsetY],r._shapes.mainGroup,!0,!0);o[1]=tx(Y2(0,o[1]),i[1]),r._doHoverLinkToSeries(o[1],0<=o[0]&&o[0]<=i[0])}}).on("mouseout",function(){r._hovering=!1,!r._dragging&&r._clearHoverLinkToSeries()})},t.prototype._enableHoverLinkFromSeries=function(){var r=this.api.getZr();this.visualMapModel.option.hoverLink?(r.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),r.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},t.prototype._doHoverLinkToSeries=function(r,n){var i=this.visualMapModel,o=i.itemSize;if(!!i.option.hoverLink){var a=[0,o[1]],s=i.getExtent();r=tx(Y2(a[0],r),a[1]);var l=ict(i,s,a),u=[r-l,r+l],c=ao(r,a,s,!0),f=[ao(u[0],a,s,!0),ao(u[1],a,s,!0)];u[0]<a[0]&&(f[0]=-1/0),u[1]>a[1]&&(f[1]=1/0),n&&(f[0]===-1/0?this._showIndicator(c,f[1],"< ",l):f[1]===1/0?this._showIndicator(c,f[0],"> ",l):this._showIndicator(c,c,"\u2248 ",l));var h=this._hoverLinkDataIndices,d=[];(n||rx(i))&&(d=this._hoverLinkDataIndices=i.findTargetDataIndices(f));var p=PK(h,d);this._dispatchHighDown("downplay",jg(p[0],i)),this._dispatchHighDown("highlight",jg(p[1],i))}},t.prototype._hoverLinkFromSeriesMouseOver=function(r){var n;if(gc(r.target,function(l){var u=ie(l);if(u.dataIndex!=null)return n=u,!0},!0),!!n){var i=this.ecModel.getSeriesByIndex(n.seriesIndex),o=this.visualMapModel;if(!!o.isTargetSeries(i)){var a=i.getData(n.dataType),s=a.getStore().get(o.getDataDimensionIndex(a),n.dataIndex);isNaN(s)||this._showIndicator(s,s)}}},t.prototype._hideIndicator=function(){var r=this._shapes;r.indicator&&r.indicator.attr("invisible",!0),r.indicatorLabel&&r.indicatorLabel.attr("invisible",!0);var n=this._shapes.handleLabels;if(n)for(var i=0;i<n.length;i++)this._api.leaveBlur(n[i])},t.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var r=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",jg(r,this.visualMapModel)),r.length=0},t.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var r=this.api.getZr();r.off("mouseover",this._hoverLinkFromSeriesMouseOver),r.off("mouseout",this._hideIndicator)},t.prototype._applyTransform=function(r,n,i,o){var a=Bg(n,o?null:this.group);return ut(r)?Mc(r,a,i):lN(r,a,i)},t.prototype._dispatchHighDown=function(r,n){n&&n.length&&this.api.dispatchAction({type:r,batch:n})},t.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.prototype.remove=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.type="visualMap.continuous",t}(u$);function ex(e,t,r,n){return new Yd({shape:{points:e},draggable:!!r,cursor:t,drift:r,onmousemove:function(i){Hl(i.event)},ondragend:n})}function ict(e,t,r){var n=ect/2,i=e.get("hoverLinkDataSize");return i&&(n=ao(i,t,r,!0)/2),n}function rx(e){var t=e.get("hoverLinkOnHandle");return!!(t==null?e.get("realtime"):t)}function nx(e){return e==="vertical"?"ns-resize":"ew-resize"}const oct=nct;var act={type:"selectDataRange",event:"dataRangeSelected",update:"update"},sct=function(e,t){t.eachComponent({mainType:"visualMap",query:e},function(r){r.setSelected(e.selected)})},lct=[{createOnAllSeries:!0,reset:function(e,t){var r=[];return t.eachComponent("visualMap",function(n){var i=e.pipelineContext;!n.isTargetSeries(e)||i&&i.large||r.push(uut(n.stateList,n.targetVisuals,Vt(n.getValueState,n),n.getDataDimensionIndex(e.getData())))}),r}},{createOnAllSeries:!0,reset:function(e,t){var r=e.getData(),n=[];t.eachComponent("visualMap",function(i){if(i.isTargetSeries(e)){var o=i.getVisualMeta(Vt(uct,null,e,i))||{stops:[],outerColors:[]},a=i.getDataDimensionIndex(r);a>=0&&(o.dimension=a,n.push(o))}}),e.getData().setVisual("visualMeta",n)}}];function uct(e,t,r,n){for(var i=t.targetVisuals[n],o=sn.prepareVisualTypes(i),a={color:ay(e.getData(),"color")},s=0,l=o.length;s<l;s++){var u=o[s],c=i[u==="opacity"?"__alphaForOpacity":u];c&&c.applyVisual(r,f,h)}return a.color;function f(d){return a[d]}function h(d,p){a[d]=p}}var ix=N;function cct(e){var t=e&&e.visualMap;ut(t)||(t=t?[t]:[]),ix(t,function(r){if(!!r){Uu(r,"splitList")&&!Uu(r,"pieces")&&(r.pieces=r.splitList,delete r.splitList);var n=r.pieces;n&&ut(n)&&ix(n,function(i){It(i)&&(Uu(i,"start")&&!Uu(i,"min")&&(i.min=i.start),Uu(i,"end")&&!Uu(i,"max")&&(i.max=i.end))})}})}function Uu(e,t){return e&&e.hasOwnProperty&&e.hasOwnProperty(t)}var ox=!1;function f$(e){ox||(ox=!0,e.registerSubTypeDefaulter("visualMap",function(t){return!t.categories&&(!(t.pieces?t.pieces.length>0:t.splitNumber>0)||t.calculable)?"continuous":"piecewise"}),e.registerAction(act,sct),N(lct,function(t){e.registerVisual(e.PRIORITY.VISUAL.COMPONENT,t)}),e.registerPreprocessor(cct))}function fct(e){e.registerComponentModel(Jut),e.registerComponentView(oct),f$(e)}var hct=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._pieceList=[],r}return t.prototype.optionUpdated=function(r,n){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var i=this._mode=this._determineMode();this._pieceList=[],dct[this._mode].call(this,this._pieceList),this._resetSelected(r,n);var o=this.option.categories;this.resetVisual(function(a,s){i==="categories"?(a.mappingMethod="category",a.categories=zt(o)):(a.dataExtent=this.getExtent(),a.mappingMethod="piecewise",a.pieceList=Ct(this._pieceList,function(l){return l=zt(l),s!=="inRange"&&(l.visual=null),l}))})},t.prototype.completeVisualOption=function(){var r=this.option,n={},i=sn.listVisualTypes(),o=this.isCategory();N(r.pieces,function(s){N(i,function(l){s.hasOwnProperty(l)&&(n[l]=1)})}),N(n,function(s,l){var u=!1;N(this.stateList,function(c){u=u||a(r,c,l)||a(r.target,c,l)},this),!u&&N(this.stateList,function(c){(r[c]||(r[c]={}))[l]=l$.get(l,c==="inRange"?"active":"inactive",o)})},this);function a(s,l,u){return s&&s[l]&&s[l].hasOwnProperty(u)}e.prototype.completeVisualOption.apply(this,arguments)},t.prototype._resetSelected=function(r,n){var i=this.option,o=this._pieceList,a=(n?i:r).selected||{};if(i.selected=a,N(o,function(l,u){var c=this.getSelectedMapKey(l);a.hasOwnProperty(c)||(a[c]=!0)},this),i.selectedMode==="single"){var s=!1;N(o,function(l,u){var c=this.getSelectedMapKey(l);a[c]&&(s?a[c]=!1:s=!0)},this)}},t.prototype.getItemSymbol=function(){return this.get("itemSymbol")},t.prototype.getSelectedMapKey=function(r){return this._mode==="categories"?r.value+"":r.index+""},t.prototype.getPieceList=function(){return this._pieceList},t.prototype._determineMode=function(){var r=this.option;return r.pieces&&r.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},t.prototype.setSelected=function(r){this.option.selected=zt(r)},t.prototype.getValueState=function(r){var n=sn.findPieceIndex(r,this._pieceList);return n!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[n])]?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(r){var n=[],i=this._pieceList;return this.eachTargetSeries(function(o){var a=[],s=o.getData();s.each(this.getDataDimensionIndex(s),function(l,u){var c=sn.findPieceIndex(l,i);c===r&&a.push(u)},this),n.push({seriesId:o.id,dataIndex:a})},this),n},t.prototype.getRepresentValue=function(r){var n;if(this.isCategory())n=r.value;else if(r.value!=null)n=r.value;else{var i=r.interval||[];n=i[0]===-1/0&&i[1]===1/0?0:(i[0]+i[1])/2}return n},t.prototype.getVisualMeta=function(r){if(this.isCategory())return;var n=[],i=["",""],o=this;function a(c,f){var h=o.getRepresentValue({interval:c});f||(f=o.getValueState(h));var d=r(h,f);c[0]===-1/0?i[0]=d:c[1]===1/0?i[1]=d:n.push({value:c[0],color:d},{value:c[1],color:d})}var s=this._pieceList.slice();if(!s.length)s.push({interval:[-1/0,1/0]});else{var l=s[0].interval[0];l!==-1/0&&s.unshift({interval:[-1/0,l]}),l=s[s.length-1].interval[1],l!==1/0&&s.push({interval:[l,1/0]})}var u=-1/0;return N(s,function(c){var f=c.interval;f&&(f[0]>u&&a([u,f[0]],"outOfRange"),a(f.slice()),u=f[1])},this),{stops:n,outerColors:i}},t.type="visualMap.piecewise",t.defaultOption=q1(Ym.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),t}(Ym),dct={splitNumber:function(e){var t=this.option,r=Math.min(t.precision,20),n=this.getExtent(),i=t.splitNumber;i=Math.max(parseInt(i,10),1),t.splitNumber=i;for(var o=(n[1]-n[0])/i;+o.toFixed(r)!==o&&r<5;)r++;t.precision=r,o=+o.toFixed(r),t.minOpen&&e.push({interval:[-1/0,n[0]],close:[0,0]});for(var a=0,s=n[0];a<i;s+=o,a++){var l=a===i-1?n[1]:s+o;e.push({interval:[s,l],close:[1,1]})}t.maxOpen&&e.push({interval:[n[1],1/0],close:[0,0]}),uk(e),N(e,function(u,c){u.index=c,u.text=this.formatValueText(u.interval)},this)},categories:function(e){var t=this.option;N(t.categories,function(r){e.push({text:this.formatValueText(r,!0),value:r})},this),ax(t,e)},pieces:function(e){var t=this.option;N(t.pieces,function(r,n){It(r)||(r={value:r});var i={text:"",index:n};if(r.label!=null&&(i.text=r.label),r.hasOwnProperty("value")){var o=i.value=r.value;i.interval=[o,o],i.close=[1,1]}else{for(var a=i.interval=[],s=i.close=[0,0],l=[1,0,1],u=[-1/0,1/0],c=[],f=0;f<2;f++){for(var h=[["gte","gt","min"],["lte","lt","max"]][f],d=0;d<3&&a[f]==null;d++)a[f]=r[h[d]],s[f]=l[d],c[f]=d===2;a[f]==null&&(a[f]=u[f])}c[0]&&a[1]===1/0&&(s[0]=0),c[1]&&a[0]===-1/0&&(s[1]=0),a[0]===a[1]&&s[0]&&s[1]&&(i.value=a[0])}i.visual=sn.retrieveVisuals(r),e.push(i)},this),ax(t,e),uk(e),N(e,function(r){var n=r.close,i=[["<","\u2264"][n[1]],[">","\u2265"][n[0]]];r.text=r.text||this.formatValueText(r.value!=null?r.value:r.interval,!1,i)},this)}};function ax(e,t){var r=e.inverse;(e.orient==="vertical"?!r:r)&&t.reverse()}const pct=hct;var vct=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.doRender=function(){var r=this.group;r.removeAll();var n=this.visualMapModel,i=n.get("textGap"),o=n.textStyleModel,a=o.getFont(),s=o.getTextColor(),l=this._getItemAlign(),u=n.itemSize,c=this._getViewData(),f=c.endsText,h=yi(n.get("showLabel",!0),!f);f&&this._renderEndsText(r,f[0],u,h,l),N(c.viewPieceList,function(d){var p=d.piece,v=new De;v.onclick=Vt(this._onItemClick,this,p),this._enableHoverLink(v,d.indexInModelPieceList);var g=n.getRepresentValue(p);if(this._createItemSymbol(v,g,[0,0,u[0],u[1]]),h){var m=this.visualMapModel.getValueState(g);v.add(new Je({style:{x:l==="right"?-i:u[0]+i,y:u[1]/2,text:p.text,verticalAlign:"middle",align:l,font:a,fill:s,opacity:m==="outOfRange"?.5:1}}))}r.add(v)},this),f&&this._renderEndsText(r,f[1],u,h,l),Lc(n.get("orient"),r,n.get("itemGap")),this.renderBackground(r),this.positionGroup(r)},t.prototype._enableHoverLink=function(r,n){var i=this;r.on("mouseover",function(){return o("highlight")}).on("mouseout",function(){return o("downplay")});var o=function(a){var s=i.visualMapModel;s.option.hoverLink&&i.api.dispatchAction({type:a,batch:jg(s.findTargetDataIndices(n),s)})}},t.prototype._getItemAlign=function(){var r=this.visualMapModel,n=r.option;if(n.orient==="vertical")return c$(r,this.api,r.itemSize);var i=n.align;return(!i||i==="auto")&&(i="left"),i},t.prototype._renderEndsText=function(r,n,i,o,a){if(!!n){var s=new De,l=this.visualMapModel.textStyleModel;s.add(new Je({style:an(l,{x:o?a==="right"?i[0]:0:i[0]/2,y:i[1]/2,verticalAlign:"middle",align:o?a:"center",text:n})})),r.add(s)}},t.prototype._getViewData=function(){var r=this.visualMapModel,n=Ct(r.getPieceList(),function(s,l){return{piece:s,indexInModelPieceList:l}}),i=r.get("text"),o=r.get("orient"),a=r.get("inverse");return(o==="horizontal"?a:!a)?n.reverse():i&&(i=i.slice().reverse()),{viewPieceList:n,endsText:i}},t.prototype._createItemSymbol=function(r,n,i){r.add(Li(this.getControllerVisual(n,"symbol"),i[0],i[1],i[2],i[3],this.getControllerVisual(n,"color")))},t.prototype._onItemClick=function(r){var n=this.visualMapModel,i=n.option,o=i.selectedMode;if(!!o){var a=zt(i.selected),s=n.getSelectedMapKey(r);o==="single"||o===!0?(a[s]=!0,N(a,function(l,u){a[u]=u===s})):a[s]=!a[s],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:a})}},t.type="visualMap.piecewise",t}(u$);const gct=vct;function mct(e){e.registerComponentModel(pct),e.registerComponentView(gct),f$(e)}function yct(e){Br(fct),Br(mct)}var sx={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},_ct=function(){function e(t){var r=this._condVal=Et(t)?new RegExp(t):Iq(t)?t:null;if(r==null){var n="";ne(n)}}return e.prototype.evaluate=function(t){var r=typeof t;return Et(r)?this._condVal.test(t):be(r)?this._condVal.test(t+""):!1},e}(),bct=function(){function e(){}return e.prototype.evaluate=function(){return this.value},e}(),wct=function(){function e(){}return e.prototype.evaluate=function(){for(var t=this.children,r=0;r<t.length;r++)if(!t[r].evaluate())return!1;return!0},e}(),Sct=function(){function e(){}return e.prototype.evaluate=function(){for(var t=this.children,r=0;r<t.length;r++)if(t[r].evaluate())return!0;return!1},e}(),Tct=function(){function e(){}return e.prototype.evaluate=function(){return!this.child.evaluate()},e}(),Pct=function(){function e(){}return e.prototype.evaluate=function(){for(var t=!!this.valueParser,r=this.getValue,n=r(this.valueGetterParam),i=t?this.valueParser(n):null,o=0;o<this.subCondList.length;o++)if(!this.subCondList[o].evaluate(t?i:n))return!1;return!0},e}();function FE(e,t){if(e===!0||e===!1){var r=new bct;return r.value=e,r}var n="";return h$(e)||ne(n),e.and?lx("and",e,t):e.or?lx("or",e,t):e.not?Ect(e,t):Act(e,t)}function lx(e,t,r){var n=t[e],i="";ut(n)||ne(i),n.length||ne(i);var o=e==="and"?new wct:new Sct;return o.children=Ct(n,function(a){return FE(a,r)}),o.children.length||ne(i),o}function Ect(e,t){var r=e.not,n="";h$(r)||ne(n);var i=new Tct;return i.child=FE(r,t),i.child||ne(n),i}function Act(e,t){for(var r="",n=t.prepareGetValue(e),i=[],o=ve(e),a=e.parser,s=a?WN(a):null,l=0;l<o.length;l++){var u=o[l];if(!(u==="parser"||t.valueGetterAttrMap.get(u))){var c=ft(sx,u)?sx[u]:u,f=e[u],h=s?s(f):f,d=set(c,h)||c==="reg"&&new _ct(h);d||ne(r),i.push(d)}}i.length||ne(r);var p=new Pct;return p.valueGetterParam=n,p.valueParser=s,p.getValue=t.getValue,p.subCondList=i,p}function h$(e){return It(e)&&!Fr(e)}var Cct=function(){function e(t,r){this._cond=FE(t,r)}return e.prototype.evaluate=function(){return this._cond.evaluate()},e}();function Mct(e,t){return new Cct(e,t)}var kct={type:"echarts:filter",transform:function(e){for(var t=e.upstream,r,n=Mct(e.config,{valueGetterAttrMap:jt({dimension:!0}),prepareGetValue:function(s){var l="",u=s.dimension;ft(s,"dimension")||ne(l);var c=t.getDimensionInfo(u);return c||ne(l),{dimIdx:c.index}},getValue:function(s){return t.retrieveValueFromItem(r,s.dimIdx)}}),i=[],o=0,a=t.count();o<a;o++)r=t.getRawDataItem(o),n.evaluate()&&i.push(r);return{data:i}}},xct={type:"echarts:sort",transform:function(e){var t=e.upstream,r=e.config,n="",i=Ze(r);i.length||ne(n);var o=[];N(i,function(c){var f=c.dimension,h=c.order,d=c.parser,p=c.incomparable;if(f==null&&ne(n),h!=="asc"&&h!=="desc"&&ne(n),p&&p!=="min"&&p!=="max"){var v="";ne(v)}if(h!=="asc"&&h!=="desc"){var g="";ne(g)}var m=t.getDimensionInfo(f);m||ne(n);var y=d?WN(d):null;d&&!y&&ne(n),o.push({dimIdx:m.index,parser:y,comparator:new XN(h,p)})});var a=t.sourceFormat;a!==qr&&a!==Fi&&ne(n);for(var s=[],l=0,u=t.count();l<u;l++)s.push(t.getRawDataItem(l));return s.sort(function(c,f){for(var h=0;h<o.length;h++){var d=o[h],p=t.retrieveValueFromItem(c,d.dimIdx),v=t.retrieveValueFromItem(f,d.dimIdx);d.parser&&(p=d.parser(p),v=d.parser(v));var g=d.comparator.evaluate(p,v);if(g!==0)return g}return 0}),{data:s}}};function py(e){e.registerTransform(kct),e.registerTransform(xct)}var Lct=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="dataset",r}return t.prototype.init=function(r,n,i){e.prototype.init.call(this,r,n,i),this._sourceManager=new KN(this),A4(this)},t.prototype.mergeOption=function(r,n){e.prototype.mergeOption.call(this,r,n),A4(this)},t.prototype.optionUpdated=function(){this._sourceManager.dirty()},t.prototype.getSourceManager=function(){return this._sourceManager},t.type="dataset",t.defaultOption={seriesLayoutBy:yo},t}(Ce),Ict=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="dataset",r}return t.type="dataset",t}(Qn);function vy(e){e.registerComponentModel(Lct),e.registerComponentView(Ict)}var q2=null;function Oct(e){return q2||(q2=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){return setTimeout(t,16)}).bind(window)),q2(e)}var Z2=null;function Rct(e){Z2||(Z2=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){clearTimeout(t)}).bind(window)),Z2(e)}function Dct(e){var t=document.createElement("style");return t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),(document.querySelector("head")||document.body).appendChild(t),t}function uv(e,t){t===void 0&&(t={});var r=document.createElement(e);return Object.keys(t).forEach(function(n){r[n]=t[n]}),r}function d$(e,t,r){var n=window.getComputedStyle(e,r||null)||{display:"none"};return n[t]}function M3(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};for(var t=e;t!==document;){if(d$(t,"display")==="none")return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}var Nct='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',k3=0,Wg=null;function Fct(e,t){e.__resize_mutation_handler__||(e.__resize_mutation_handler__=zct.bind(e));var r=e.__resize_listeners__;if(!r){if(e.__resize_listeners__=[],window.ResizeObserver){var n=e.offsetWidth,i=e.offsetHeight,o=new ResizeObserver(function(){!e.__resize_observer_triggered__&&(e.__resize_observer_triggered__=!0,e.offsetWidth===n&&e.offsetHeight===i)||qm(e)}),a=M3(e),s=a.detached,l=a.rendered;e.__resize_observer_triggered__=s===!1&&l===!1,e.__resize_observer__=o,o.observe(e)}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){qm(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if(k3||(Wg=Dct(Nct)),Vct(e),e.__resize_rendered__=M3(e).rendered,window.MutationObserver){var u=new MutationObserver(e.__resize_mutation_handler__);u.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=u}}e.__resize_listeners__.push(t),k3++}function Bct(e,t){var r=e.__resize_listeners__;if(!!r){if(t&&r.splice(r.indexOf(t),1),!r.length||!t){if(e.detachEvent&&e.removeEventListener){e.detachEvent("onresize",e.__resize_legacy_resize_handler__),document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);return}e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__.disconnect(),e.__resize_observer__=null):(e.__resize_mutation_observer__&&(e.__resize_mutation_observer__.disconnect(),e.__resize_mutation_observer__=null),e.removeEventListener("scroll",BE),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null),e.__resize_listeners__=null}!--k3&&Wg&&Wg.parentNode.removeChild(Wg)}}function $ct(e){var t=e.__resize_last__,r=t.width,n=t.height,i=e.offsetWidth,o=e.offsetHeight;return i!==r||o!==n?{width:i,height:o}:null}function zct(){var e=M3(this),t=e.rendered,r=e.detached;t!==this.__resize_rendered__&&(!r&&this.__resize_triggers__&&($E(this),this.addEventListener("scroll",BE,!0)),this.__resize_rendered__=t,qm(this))}function BE(){var e=this;$E(this),this.__resize_raf__&&Rct(this.__resize_raf__),this.__resize_raf__=Oct(function(){var t=$ct(e);t&&(e.__resize_last__=t,qm(e))})}function qm(e){!e||!e.__resize_listeners__||e.__resize_listeners__.forEach(function(t){t.call(e,e)})}function Vct(e){var t=d$(e,"position");(!t||t==="static")&&(e.style.position="relative"),e.__resize_old_position__=t,e.__resize_last__={};var r=uv("div",{className:"resize-triggers"}),n=uv("div",{className:"resize-expand-trigger"}),i=uv("div"),o=uv("div",{className:"resize-contract-trigger"});n.appendChild(i),r.appendChild(n),r.appendChild(o),e.appendChild(r),e.__resize_triggers__={triggers:r,expand:n,expandChild:i,contract:o},$E(e),e.addEventListener("scroll",BE,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}function $E(e){var t=e.__resize_triggers__,r=t.expand,n=t.expandChild,i=t.contract,o=i.scrollWidth,a=i.scrollHeight,s=r.offsetWidth,l=r.offsetHeight,u=r.scrollWidth,c=r.scrollHeight;i.scrollLeft=o,i.scrollTop=a,n.style.width=s+1+"px",n.style.height=l+1+"px",r.scrollLeft=u,r.scrollTop=c}var Xo=function(){return Xo=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Xo.apply(this,arguments)},Uct=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function Gct(e){return t=Object.create(null),Uct.forEach(function(r){t[r]=function(n){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(!e.value)throw new Error("ECharts is not initialized yet.");return e.value[n].apply(e.value,i)}}(r)}),t;var t}var jct={autoresize:Boolean},Wct={loading:Boolean,loadingOptions:Object},Hct=/^on[^a-z]/,Xct=function(e){return Hct.test(e)},ux=[],dh=[];(function(e,t){if(e&&typeof document<"u"){var r,n=t.prepend===!0?"prepend":"append",i=t.singleTag===!0,o=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var a=ux.indexOf(o);a===-1&&(a=ux.push(o)-1,dh[a]={}),r=dh[a]&&dh[a][n]?dh[a][n]:dh[a][n]=s()}else r=s();e.charCodeAt(0)===65279&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function s(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),t.attributes)for(var u=Object.keys(t.attributes),c=0;c<u.length;c++)l.setAttribute(u[c],t.attributes[u[c]]);var f=n==="prepend"?"afterbegin":"beforeend";return o.insertAdjacentElement(f,l),l}})("x-vue-echarts{display:block;width:100%;height:100%}",{});var Yct="ecTheme",mf=oP({name:"echarts",props:Xo(Xo({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},jct),Wct),inheritAttrs:!1,setup:function(e,t){var r=t.attrs,n=Sg(),i=Sg(),o=Sg(),a=wn("ecTheme",null),s=wn("ecInitOptions",null),l=wn("ecUpdateOptions",null),u=Yw(e),c=u.autoresize,f=u.manualUpdate,h=u.loading,d=u.loadingOptions,p=Ye(function(){return o.value||e.option||null}),v=Ye(function(){return e.theme||mr(a)||{}}),g=Ye(function(){return e.initOptions||mr(s)||{}}),m=Ye(function(){return e.updateOptions||mr(l)||{}}),y=Ye(function(){return function(C){var A={};for(var M in C)Xct(M)||(A[M]=C[M]);return A}(r)}),_=cP().proxy.$listeners;function b(C){if(n.value){var A=i.value=ant(n.value,v.value,g.value);e.group&&(A.group=e.group);var M=_;M||(M={},Object.keys(r).filter(function(O){return O.indexOf("on")===0&&O.length>2}).forEach(function(O){var F=O.charAt(2).toLowerCase()+O.slice(3);F.substring(F.length-4)==="Once"&&(F="~".concat(F.substring(0,F.length-4))),M[F]=r[O]})),Object.keys(M).forEach(function(O){var F=M[O];if(F){var z=O.toLowerCase();z.charAt(0)==="~"&&(z=z.substring(1),F.__once__=!0);var R=A;if(z.indexOf("zr:")===0&&(R=A.getZr(),z=z.substring(3)),F.__once__){delete F.__once__;var j=F;F=function(){for(var Z=[],q=0;q<arguments.length;q++)Z[q]=arguments[q];j.apply(void 0,Z),R.off(z,F)}}R.on(z,F)}}),c.value?Nd(function(){A&&!A.isDisposed()&&A.resize(),k()}):k()}function k(){var O=C||p.value;O&&A.setOption(O,m.value)}}function T(){i.value&&(i.value.dispose(),i.value=void 0)}var S=null;ho(f,function(C){typeof S=="function"&&(S(),S=null),C||(S=ho(function(){return e.option},function(A,M){A&&(i.value?i.value.setOption(A,Xo({notMerge:A.value!==(M==null?void 0:M.value)},m.value)):b())},{deep:!0}))},{immediate:!0}),ho([v,g],function(){T(),b()},{deep:!0}),GC(function(){e.group&&i.value&&(i.value.group=e.group)});var P=Gct(i);return function(C,A,M){var k=wn("ecLoadingOptions",{}),O=Ye(function(){return Xo(Xo({},mr(k)),M==null?void 0:M.value)});GC(function(){var F=C.value;F&&(A.value?F.showLoading(O.value):F.hideLoading())})}(i,h,d),function(C,A,M){var k=null;ho([M,C,A],function(O,F,z){var R=O[0],j=O[1],Z=O[2];R&&j&&Z&&(k=oy(function(){j.resize()},100),Fct(R,k)),z(function(){k&&R&&Bct(R,k)})})}(i,c,n),U8(function(){b()}),x1(T),Xo({chart:i,root:n,setOption:function(C,A){e.manualUpdate&&(o.value=C),i.value?i.value.setOption(C,A||{}):b(C)},nonEventAttrs:y},P)},render:function(){var e=Xo({},this.nonEventAttrs);return e.ref="root",e.class=e.class?["echarts"].concat(e.class):"echarts",fP("x-vue-echarts",e)}});Br([hf,R0,D0,vf,pf,gf,N0,yct,F0]);const qct={setup(){const e=re();return{gameStore:xt(),userStore:e}},components:{VChart:mf},props:{rgk:Number,workload:Number,wspd:Number,show:{type:Boolean,default:!1}},data:()=>({}),computed:{modHist(){return this.userStore.regionModifiers2.hasOwnProperty(this.rgk)||(this.userStore.regionModifiers2[this.rgk]=[0]),this.userStore.regionModifiers2[this.rgk].map(Number).filter(t=>!isNaN(t)).sort((t,r)=>r-t)},modTimes(){const e=this.modHist.length,t={};for(let r=0;r<this.modHist.length;r++){const n=this.modHist[r];t[n]=100*(r+1)/e}return t},modSorted(){return Object.keys(this.modTimes).map(Number).sort((t,r)=>t-r)},medianModifier(){let e=0;const t=this.modHist.length;if(t%2)e=modHist[(t-1)/2];else{const r=this.modHist[(t-1-1)/2],n=this.modHist[(t-1+1)/2];e=(r+n)/2}return console.log("medianModifier",t,e),this.workload*(2-e/100)},tierModifiers(){const e=[];let t=0;const r=this.workload,n=2*r,i=Math.ceil(r/this.wspd),o=Math.ceil(n/this.wspd);for(let a=i;a<=o;a++){const s=Math.max(2-this.wspd*a/r,0),l=r*(2-s),u=this.userStore.chanceAtModifier(this.rgk,s*100),c=u-t;e.push({wld:l,mod:s,tier:a,time:c}),t=u}return e},chartDataLine(){const e=[];for(let t=0;t<1001;t++){const r=t/10,n=this.workload*(2-r/100),i=this.userStore.chanceAtModifier(this.rgk,r),o=n/this.wspd;e.push([r,n,i,o])}return e},chartDataPoints(){const e=[];if(this.userStore.modHists[this.rgk]==null)return e;const t=this.userStore.modHists[this.rgk].length;for(let r=0;r<t;r++){const n=this.userStore.modHists[this.rgk][r],i=100*r/(t-1);e.push([i,n])}return e},chartColorRanges(){const e=[];let t=100;for(const r of this.tierModifiers){const n=r.mod*100;e.push({lte:t,gt:n}),t=n}return e},chartColorRangesWorkload(){const e=[];let t=this.workload;for(const r of this.tierModifiers){const n=r.wld;e.push({gt:t,lte:n}),t=n}return e},chartBands(){const e=[];let t=100;for(const r of this.tierModifiers){const n=r.mod*100;e.push([{name:r.tier,xAxis:t},{xAxis:n}]),t=n}return console.log("chartBands",e),e},chartOption(){return{grid:{left:30,top:30,right:30,bottom:40},xAxis:[{name:"workload",nameGap:22,min:"dataMin",max:"dataMax",nameLocation:"center",splitLine:{show:!1},boundaryGap:["10%","10%"]}],yAxis:{name:"chance",nameGap:10,type:"value",axisLine:{onZero:!1},axisLabel:{},splitLine:{show:!1},axisPointer:{snap:!0}},legend:{show:!0},series:[{data:this.chartDataLine,encode:{y:2,x:0,tooltip:[0,1,2]},type:"line",showSymbol:!1},{data:this.chartDataPoints,encode:{y:0,x:1},type:"scatter",symbolSize:5,color:"gray"}],visualMap:{show:!1,seriesIndex:0,dimension:0,pieces:this.chartColorRanges,color:["#cc3","#c22"]},tooltip:{trigger:"axis",axisPointer:{},formatter:function(e){const t=e[0].value[0],r=e[0].value[1],n=e[0].value[2];return`${e[0].value[3]*10} minute tier<br/>workload \u2264 ${r.toFixed(1)}<br/>modifier \u2265 ${t.toFixed(1)}<br/>chance ${n.toFixed(1)}%`}},legend:{show:!1}}},chartOption2(){return{grid:{left:30,top:30,right:30,bottom:40},xAxis:{name:"chance %",nameLocation:"center",nameGap:22,type:"value",min:0,max:100,axisLine:{onZero:!1},axisLabel:{},splitLine:{show:!1},axisPointer:{snap:!0}},yAxis:[{name:"modifier",nameGap:10,min:"dataMin",max:"dataMax",splitLine:{show:!1}}],legend:{},series:[{data:this.chartDataLine,encode:{x:2,y:0,tooltip:[0,1,2]},type:"line",showSymbol:!1},{data:this.chartDataPoints,encode:{x:0,y:1},type:"scatter",symbolSize:5,color:"gray"}],visualMap:{show:!1,seriesIndex:0,dimension:0,pieces:this.chartColorRanges,color:["#cc3","#c22"]},tooltip:{trigger:"axis",axisPointer:{axis:"y"},formatter:function(e){const t=e[0].value[0],r=e[0].value[1],n=e[0].value[2],i=e[0].value[3];return`${n.toFixed(1)}% chance to get<br/>${t.toFixed(1)} or more modifier<br/>${r.toFixed(1)} or less workload<br/>${Bt(i*10,1)} \u2192 ${Math.ceil(i)*10} minute cycle`},textStyle:{fontSize:11}},legend:{show:!1}}}},methods:{formatFixed:Bt,updStore(e){this.userStore.regionModifiers2[this.rgk]=e.split(",")},spaceSep(e,t){return Bt(e*1e6,0,t).replace(/\B(?=(\d{3})+(?!\d))/g," ")}}},hu=e=>(cn("data-v-4610c876"),e=e(),fn(),e),Zct=U(" Observations: "),Kct=hu(()=>w("abbr",{title:"Enter comma-separated modifier values (0..100 range) observed evenly across all worker-active time. The order does not matter, but repeat occurence of same value does. You can sneak in newlines and comments like 'evening,0,0.1,2,morning,3,22,0' - text will be stored, but ignored in calculations."},"\u2139\uFE0F",-1)),Jct=hu(()=>w("br",null,null,-1)),Qct=["value"],tft=hu(()=>w("span",{style:{"line-height":"200%"}},"Breakpoints:",-1)),eft={class:"fsxs tar"},rft=hu(()=>w("th",null,"work time",-1)),nft=hu(()=>w("th",null,"workload \u2264",-1)),ift=hu(()=>w("th",null,"modifier \u2265",-1)),oft=hu(()=>w("th",null,"chance",-1));function aft(e,t,r,n,i,o){const a=pe("v-chart");return D(),$(W,null,[Zct,Kct,Jct,w("textarea",{value:this.userStore.regionModifiers2[this.rgk],onInput:t[0]||(t[0]=s=>o.updStore(s.target.value)),class:"multiline"},`
  `,40,Qct),w("div",null,[kt(a,{class:"chart hmid",option:o.chartOption2},null,8,["option"])]),tft,w("table",eft,[w("tr",null,[rft,(D(!0),$(W,null,Nt(o.tierModifiers.filter(s=>s.time),s=>(D(),$("td",null,L(10*s.tier)+" min",1))),256))]),w("tr",null,[nft,(D(!0),$(W,null,Nt(o.tierModifiers.filter(s=>s.time),s=>(D(),$("td",null,L(o.formatFixed(s.wld,2)),1))),256))]),w("tr",null,[ift,(D(!0),$(W,null,Nt(o.tierModifiers.filter(s=>s.time),s=>(D(),$("td",null,L(o.formatFixed(100*s.mod,2)),1))),256))]),w("tr",null,[oft,(D(!0),$(W,null,Nt(o.tierModifiers.filter(s=>s.time),s=>(D(),$("td",null,L(o.formatFixed(s.time,2))+"%",1))),256))])])],64)}const zE=$e(qct,[["render",aft],["__scopeId","data-v-4610c876"]]);const sft={setup(){const e=re();return{gameStore:xt(),userStore:e}},components:{FloatingModifierEdit:zE},props:{workerEditing:Object,workerInitial:Object,show:{type:Boolean,default:!1}},computed:{newProfit(){return this.profit(this.workerEditing),this.profit(this.workerEditing)},initialProfit(){return this.profit(this.workerInitial)},currentWspdBonus(){var e="farm";if(this.gameStore.jobIsWorkshop(this.workerEditing.job)){const r=this.workerEditing.job.hk;e=this.userStore.userWorkshops[r].industry}const t=this.gameStore.wspdBonus(this.workerEditing,e);return console.log("cpt: currentWspdBonus",e,t),t}},data:()=>({wasChanged:!1,showChartPane:!1,prerelease_charkind:!0,prerelease_skillicon:!1}),watch:{workerEditing:{handler(e,t){this.wasChanged=JSON.stringify(e)!==JSON.stringify(this.workerInitial)},deep:!0},workerInitial:{handler(e,t){this.wasChanged=JSON.stringify(e)!==JSON.stringify(this.workerEditing)},deep:!0}},methods:{makeIconSrc:Mo,formatFixed:Bt,randBetween:is,levelup:cd,spaceSep(e,t){return Bt(e*1e6,0,t).replace(/\B(?=(\d{3})+(?!\d))/g," ")},revert(){for(const[e,t]of Object.entries(this.workerInitial))typeof t=="object"?this.workerEditing[e]=JSON.parse(JSON.stringify(t)):this.workerEditing[e]=t},profit(e){if(this.gameStore.jobIsPz(e.job)){const t=this.gameStore.workerStatsOnPlantzone(e);return this.gameStore.profitPzTownStats(e.job,e.tnk,t.wspd,t.mspd,t.luck).priceDaily}if(this.gameStore.jobIsWorkshop(e.job)){const t=e.job.hk,r=this.userStore.userWorkshops[t];return this.gameStore.profitWorkshopWorker(t,r,e)}},maxSkillsAtLevel(e){return 1+Math.floor(e/5)},suggestBestSkills(e,t){const r=this.maxSkillsAtLevel(e),n={0:{skills:[]}},i=["wspd"];t&&i.push("wspd_farm");const o=[];for(const[c,f]of Object.entries(this.gameStore.skillData))i.some(h=>f.hasOwnProperty(h)&&o.push({key:c,amount:f[h],mspd:f.hasOwnProperty("mspd")?f.mspd:0}));o.sort(function(c,f){return f.amount!=c.amount?f.amount-c.amount:f.mspd-c.mspd});for(let c=1;c<=r;c++){const f=o.slice(0,c).map(({key:d})=>d),h=this.profit({...this.workerEditing,skills:f});if(n[c]={skills:f,profit:h},f.every(d=>!this.gameStore.skillData[d].hasOwnProperty("mspd"))){const d=[...f],p=o.filter(v=>v.mspd>0);if(p.length>0){d[d.length-1]=p[0];const v=this.profit({...this.workerEditing,skills:d});v>h&&(n[c]={skills:d,profit:v},console.log("using wmSkill"))}}}console.log("wBonuses",n);const a=["mspd","luck"],s=new Set;for(const[c,f]of Object.entries(this.gameStore.skillData))a.some(d=>f.hasOwnProperty(d))&&s.add(c);console.log("mlSkills",s);const l=[n[r]],u=[];for(let c=1;c<=r;c++){const f=[...n[r-c].skills,...u],h=[];for(const d of s){if(n[r-c].skills.some(g=>g==d))continue;const p=[...f,d],v=this.profit({...this.workerEditing,skills:p});h.push({sk:d,profit:v})}if(h.length>0){h.sort((v,g)=>g.profit-v.profit);const d=h[0].sk,p=[...f,d];l[c]={skills:p,profit:h[0].profit},u.push(d),s.delete(d)}else u.push(0)}if(l.sort((c,f)=>f.profit-c.profit),l.length>0){const c=new Set(l[0].skills);console.log(c);const f=new Array(c.size);for(let d=0;d<r;d++){const p=String(this.workerEditing.skills[d]);c.has(p)&&(f[d]=Number(p),c.delete(p))}console.log(this.workerEditing.skills,c);const h=[...c];for(let d=0;d<r;d++)f[d]==null&&(f[d]=Number(h.shift()),document.querySelector("#skill"+d).classList.add("anim"),setTimeout(()=>{document.querySelector("#skill"+d).classList.remove("anim")},500));this.workerEditing.skills=f}else console.log("worker skills optimization failed")},recalcStats(e,t){if(this.workerEditing.level>1){const r=this.workerEditing.level-1,n=t-1,i=this.gameStore.workerStatic[this.workerEditing.charkey],o=this.gameStore.workerStatic[e],a=i.wspd_lo*r,l=i.wspd_hi*r-a,u=this.workerEditing.wspdSheet*1e6-i.wspd,c=(u-a)/l||0,f=o.wspd_lo*n,h=o.wspd_hi*n,d=f+(h-f)*c,p=i.mspd_lo*r,v=i.mspd_hi*r,m=((this.workerEditing.mspdSheet/(i.mspd/100)-1)*1e6-p)/(v-p)||0,y=o.mspd_lo*n,_=o.mspd_hi*n,b=y+(_-y)*m,T=i.luck_lo*r,S=i.luck_hi*r,P=this.workerEditing.luckSheet*1e4-i.luck,C=(P-T)/(S-T)||0,A=o.luck_lo*n,M=o.luck_hi*n,k=A+(M-A)*C;console.log(`recalculating levelups: 
        ${o.wspd/1e6}+${n}*[${o.wspd_lo/1e6}\u2026${o.wspd_hi/1e6}]*${Math.round(c*1e3)/10}%\u{1F528} 
        ${o.mspd/100}+${n}*[${o.mspd_lo/1e6}\u2026${o.mspd_hi/1e6}]*${Math.round(m*1e3)/10}%\u{1F9B6} 
        ${o.luck/1e4}+${n}*[${o.luck_lo/1e4}\u2026${o.luck_hi/1e4}]*${Math.round(C*1e3)/10}%\u{1F340}`),this.workerEditing.wspdSheet+=(o.wspd-i.wspd+d-u)/1e6,this.workerEditing.mspdSheet=o.mspd/100*(1+b/1e6),this.workerEditing.luckSheet+=(o.luck-i.luck+k-P)/1e4}else this.workerEditing.wspdSheet+=(stat_new.wspd-stat_old.wspd)/1e6,this.workerEditing.mspdSheet=stat_new.mspd*(this.workerEditing.mspdSheet/stat_old.mspd),this.workerEditing.luckSheet+=(stat_new.luck-stat_old.luck)/1e4,cd(this.gameStore,this.workerEditing,t);this.workerEditing.wspdSheet=Math.round(this.workerEditing.wspdSheet*100)/100,this.workerEditing.mspdSheet=Math.round(this.workerEditing.mspdSheet*100)/100,this.workerEditing.luckSheet=Math.round(this.workerEditing.luckSheet*100)/100,this.workerEditing.charkey=e,this.workerEditing.level=t,this.limitSkillCount()},limitSkillCount(){const e=1+Math.floor(this.workerEditing.level/5);this.workerEditing.skills.length>e&&this.workerEditing.skills.splice(e)},levelupMe(e){this.limitSkillCount(),cd(this.gameStore,this.workerEditing,e),this.workerEditing.wspdSheet=Math.floor(this.workerEditing.wspdSheet*100)/100,this.workerEditing.mspdSheet=Math.floor(this.workerEditing.mspdSheet*100)/100,this.workerEditing.luckSheet=Math.floor(this.workerEditing.luckSheet*100)/100},setStatsRandom(){const e=this.workerEditing,t=this.gameStore.workerStatic[e.charkey];let r=t.wspd,n=0,i=t.luck;for(let a=2;a<=e.level;a++)r+=is(t.wspd_lo,t.wspd_hi),n+=is(t.mspd_lo,t.mspd_hi),i+=is(t.luck_lo,t.luck_hi);let o=t.mspd*(1+n/1e6);e.wspdSheet=Math.round(r/1e6*100)/100,e.mspdSheet=Math.round(o)/100,e.luckSheet=Math.round(i/1e4*100)/100},setStatsMedian(){const e=this.workerEditing,t=this.gameStore.workerStatic[e.charkey];let r=t.wspd,n=0,i=t.luck;for(let a=2;a<=e.level;a++)r+=(t.wspd_lo+t.wspd_hi)/2,n+=(t.mspd_lo+t.mspd_hi)/2,i+=(t.luck_lo+t.luck_hi)/2;let o=t.mspd*(1+n/1e6);e.wspdSheet=Math.round(r/1e6*100)/100,e.mspdSheet=Math.round(o)/100,e.luckSheet=Math.round(i/1e4*100)/100}}},$r=e=>(cn("data-v-6d88b5d0"),e=e(),fn(),e),lft={key:0,id:"columns"},uft={id:"worker"},cft={class:"borderless"},fft=$r(()=>w("td",null,"name:",-1)),hft={style:{float:"right"}},dft=$r(()=>w("td",null,"type:",-1)),pft=["value"],vft=["value"],gft=$r(()=>w("td",null,"job:",-1)),mft=U(" idle "),yft={key:0},_ft={key:1},bft=U(" \u270D\uFE0F "),wft=U(" @ "),Sft=U("M$/day "),Tft=U("CP "),Pft=U(" [\u{1F33B}] "),Eft={class:"fsxs"},Aft=U(" \u270D\uFE0F "),Cft=U(" @ "),Mft=U("M$/day "),kft=U("CP "),xft=U(" UNKNOWN_JOBTYPE "),Lft={key:0},Ift=$r(()=>w("td",null,"$/day:",-1)),Oft={key:0},Rft={key:0},Dft={key:3,class:"fsxs note"},Nft={colspan:"2"},Fft={class:"borderless"},Bft=$r(()=>w("tr",null,[w("th",null,"stats:"),w("th",null,"sheet"),w("th",null,"+"),w("th",null,"skill"),w("th",null,"="),w("th",null,"final"),w("th")],-1)),$ft={class:"center"},zft={rowspan:"3"},Vft=$r(()=>w("br",null,null,-1)),Uft=$r(()=>w("td",null,null,-1)),Gft=$r(()=>w("td",null,null,-1)),jft=$r(()=>w("td",null,"\u{1F528}",-1)),Wft={class:"center"},Hft=$r(()=>w("td",null,null,-1)),Xft=$r(()=>w("td",null,null,-1)),Yft=$r(()=>w("td",null,"\u{1F9B6}",-1)),qft={class:"center"},Zft=$r(()=>w("td",null,null,-1)),Kft=$r(()=>w("td",null,null,-1)),Jft=$r(()=>w("td",null,"\u{1F340}",-1)),Qft={class:"center"},tht=$r(()=>w("td",null,"skills:",-1)),eht={style:{float:"right"}},rht=["disabled"],nht={colspan:"2",s:""},iht=["id","onUpdate:modelValue"],oht=["value"],aht=["src"],sht=U(" use floating modifier for this regionGroup "),lht={key:0,id:"chartPane"};function uht(e,t,r,n,i,o){const a=pe("FloatingModifierEdit");return r.workerEditing?(D(),$("div",lft,[w("div",uft,[w("table",cft,[w("tr",null,[fft,w("td",null,[Tt(w("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>r.workerEditing.label=s),style:{width:"10em"}},null,512),[[le,r.workerEditing.label]]),U(" lvl."+L(r.workerEditing.level)+" ",1),w("button",{onClick:t[1]||(t[1]=s=>o.recalcStats(r.workerEditing.charkey,r.workerEditing.level-1))},"\u{1F817}"),w("button",{onClick:t[2]||(t[2]=s=>o.levelupMe(r.workerEditing.level+1))},"\u{1F815}"),pt("",!0),w("div",hft,[e.wasChanged&&r.workerInitial?(D(),$("button",{key:0,onClick:t[4]||(t[4]=s=>o.revert())},"revert")):pt("",!0)])])]),w("tr",null,[dft,w("td",null,[e.prerelease_charkind?(D(),$("select",{key:0,onChange:t[5]||(t[5]=s=>o.recalcStats(s.target.value,r.workerEditing.level)),value:r.workerEditing.charkey},[(D(!0),$(W,null,Nt(n.gameStore.workerStatic,(s,l)=>(D(),$("option",{value:l},L(l)+" "+L(n.gameStore.uloc.char[l])+" "+L(s.wspd/1e6)+" / "+L(s.mspd/100)+" / "+L(s.luck/1e4),9,vft))),256))],40,pft)):(D(),$(W,{key:1},[U(L(n.gameStore.uloc.char[r.workerEditing.charkey]),1)],64))])]),w("tr",null,[gft,w("td",null,[n.gameStore.jobIsIdle(r.workerEditing.job)?(D(),$(W,{key:0},[mft],64)):n.gameStore.jobIsPz(r.workerEditing.job)?(D(),$(W,{key:1},[U(L(n.gameStore.plantzoneName(r.workerEditing.job))+" / ",1),n.gameStore.ready&&r.workerEditing.job&&n.gameStore.plantzones[r.workerEditing.job].regiongroup&&n.userStore.allowFloating&&n.userStore.useFloatingModifiers[n.gameStore.plantzones[r.workerEditing.job].regiongroup]?(D(),$("span",yft,[U(" ~"+L(o.formatFixed(n.userStore.medianWorkloads[r.workerEditing.job],2))+" ",1),w("span",{onClick:t[6]||(t[6]=s=>e.showChartPane=!e.showChartPane)},L(e.showChartPane?"\u25C0":"\u25B6"),1)])):(D(),$("span",_ft,L(o.formatFixed(n.gameStore.plantzones[r.workerEditing.job].activeWorkload,2)),1))],64)):n.gameStore.jobIsCustom(r.workerEditing.job)?(D(),$(W,{key:2},[bft,Tt(w("input",{class:"workshop-label-input","onUpdate:modelValue":t[7]||(t[7]=s=>r.workerEditing.job[3]=s)},null,512),[[le,r.workerEditing.job[3]]]),wft,Tt(w("input",{type:"number",class:"float2",step:"0.1","onUpdate:modelValue":t[8]||(t[8]=s=>r.workerEditing.job[1]=s)},null,512),[[le,r.workerEditing.job[1],void 0,{number:!0}]]),Sft,Tt(w("input",{type:"number",class:"float2","onUpdate:modelValue":t[9]||(t[9]=s=>r.workerEditing.job[2]=s)},null,512),[[le,r.workerEditing.job[2],void 0,{number:!0}]]),Tft],64)):n.gameStore.jobIsFarming(r.workerEditing.job)?(D(),$(W,{key:3},[Pft],64)):n.gameStore.jobIsWorkshop(r.workerEditing.job)?(D(),$(W,{key:4},[U(L(n.gameStore.workerJobDescription(r.workerEditing))+" ",1),n.userStore.userWorkshops[r.workerEditing.job.hk].label?(D(),$(W,{key:0},[U(' "'+L(n.userStore.userWorkshops[r.workerEditing.job.hk].label)+'" ',1)],64)):pt("",!0),U(" "+L(n.userStore.userWorkshops[r.workerEditing.job.hk].manualWorkload)+" workload ",1),w("span",Eft," ["+L(n.userStore.userWorkshops[r.workerEditing.job.hk].industry)+"] ",1)],64)):n.gameStore.jobIsCustom(r.workerEditing.job)?(D(),$(W,{key:5},[Aft,Tt(w("input",{class:"workshop-label-input","onUpdate:modelValue":t[10]||(t[10]=s=>r.workerEditing.job[3]=s)},null,512),[[le,r.workerEditing.job[3]]]),Cft,Tt(w("input",{type:"number",class:"float2",step:"0.1","onUpdate:modelValue":t[11]||(t[11]=s=>r.workerEditing.job[1]=s)},null,512),[[le,r.workerEditing.job[1],void 0,{number:!0}]]),Mft,Tt(w("input",{type:"number",class:"float2","onUpdate:modelValue":t[12]||(t[12]=s=>r.workerEditing.job[2]=s)},null,512),[[le,r.workerEditing.job[2],void 0,{number:!0}]]),kft],64)):(D(),$(W,{key:6},[xft],64))])]),r.workerEditing.job?(D(),$("tr",Lft,[Ift,w("td",null,[n.gameStore.jobIsPz(r.workerEditing.job)?(D(),$(W,{key:0},[U(L(o.spaceSep(o.initialProfit))+" ",1),o.newProfit!=o.initialProfit?(D(),$("span",Oft,[U(" \u2192 "+L(o.spaceSep(o.newProfit))+" ",1),w("span",{class:Sn({greenText:o.newProfit>o.initialProfit,redText:o.newProfit<o.initialProfit,fsxs:1})},L(o.formatFixed(100*(o.newProfit-o.initialProfit)/o.initialProfit,2,!0))+"% ",3)])):pt("",!0)],64)):n.gameStore.jobIsFarming(r.workerEditing.job)?(D(),$(W,{key:1},[U(L(o.spaceSep(n.userStore.workerIncome(r.workerEditing))),1)],64)):n.gameStore.jobIsWorkshop(r.workerEditing.job)?(D(),$(W,{key:2},[U(L(o.spaceSep(o.initialProfit))+" ",1),o.newProfit!=o.initialProfit?(D(),$("span",Rft,[U(" \u2192 "+L(o.spaceSep(o.newProfit))+" ",1),w("span",{class:Sn({greenText:o.newProfit>o.initialProfit,redText:o.newProfit<o.initialProfit,fsxs:1})},L(o.formatFixed(100*(o.newProfit-o.initialProfit)/o.initialProfit,2,!0))+"% ",3)])):pt("",!0)],64)):pt("",!0),[2,4,8].includes(n.gameStore.workerStatic[r.workerEditing.charkey].species)?(D(),$("span",Dft," giant bonus not implemented yet! ")):pt("",!0)])])):pt("",!0),w("tr",null,[w("td",Nft,[w("table",Fft,[Bft,w("tr",$ft,[w("td",zft,[w("button",{onClick:t[13]||(t[13]=s=>o.setStatsMedian()),class:"fsxxs"},"median"),Vft,w("button",{onClick:t[14]||(t[14]=s=>o.setStatsRandom()),class:"fsxxs"},"random")]),w("td",null,[Tt(w("input",{type:"number","onUpdate:modelValue":t[15]||(t[15]=s=>r.workerEditing.wspdSheet=s),step:"0.01",class:"w5em right"},null,512),[[le,r.workerEditing.wspdSheet]])]),Uft,w("td",null,L(o.formatFixed(o.currentWspdBonus,2)),1),Gft,w("td",null,L(o.formatFixed(r.workerEditing.wspdSheet+o.currentWspdBonus,2)),1),jft]),w("tr",Wft,[w("td",null,[Tt(w("input",{type:"number","onUpdate:modelValue":t[16]||(t[16]=s=>r.workerEditing.mspdSheet=s),step:"0.01",class:"w5em right"},null,512),[[le,r.workerEditing.mspdSheet]])]),Hft,w("td",null,L(o.formatFixed(n.gameStore.mspdBonus(r.workerEditing),1))+"%",1),Xft,w("td",null,L(o.formatFixed(r.workerEditing.mspdBase*(r.workerEditing.mspdSheet/r.workerEditing.mspdBase+n.gameStore.mspdBonus(r.workerEditing)/100),2)),1),Yft]),w("tr",qft,[w("td",null,[Tt(w("input",{type:"number","onUpdate:modelValue":t[17]||(t[17]=s=>r.workerEditing.luckSheet=s),step:"0.01",class:"w5em right"},null,512),[[le,r.workerEditing.luckSheet]])]),Zft,w("td",null,L(o.formatFixed(n.gameStore.luckBonus(r.workerEditing),2)),1),Kft,w("td",null,L(o.formatFixed(r.workerEditing.luckSheet+n.gameStore.luckBonus(r.workerEditing),2)),1),Jft])])])]),w("tr",Qft,[tht,w("td",null,[w("div",eht,[r.workerEditing.job?(D(),$("button",{key:0,disabled:!(r.workerEditing.job in n.userStore.pzJobs),onClick:t[18]||(t[18]=s=>o.suggestBestSkills(r.workerEditing.level,!0))}," optimize ",8,rht)):pt("",!0)])])]),(D(),$(W,null,Nt(9,s=>w("tr",null,[w("td",nht,[Tt(w("select",{id:"skill"+(s-1),"onUpdate:modelValue":l=>r.workerEditing.skills[s-1]=l,class:"w30em animable",style:{width:"30em"}},[(D(!0),$(W,null,Nt(n.gameStore.availableSkillPool(r.workerEditing.skills,r.workerEditing.skills[s-1]),l=>(D(),$("option",{value:l},L(n.gameStore.uloc.skill[l]+" / "+n.gameStore.uloc.skilldesc[l]),9,oht))),256))],8,iht),[[_n,r.workerEditing.skills[s-1]]]),e.prerelease_skillicon?(D(),$("img",{key:0,src:`data/icons/skill/${r.workerEditing.skills[s-1]}.png`,width:"22",height:"22"},null,8,aht)):pt("",!0)])])),64))]),n.gameStore.ready&&r.workerEditing.job&&typeof r.workerEditing.job=="number"&&r.workerEditing.job in n.gameStore.plantzones&&n.gameStore.plantzones[r.workerEditing.job].regiongroup&&n.userStore.allowFloating?(D(),$(W,{key:0},[Tt(w("input",{type:"checkbox","onUpdate:modelValue":t[19]||(t[19]=s=>n.userStore.useFloatingModifiers[n.gameStore.plantzones[r.workerEditing.job].regiongroup]=s)},null,512),[[Kn,n.userStore.useFloatingModifiers[n.gameStore.plantzones[r.workerEditing.job].regiongroup]]]),sht],64)):pt("",!0)]),e.showChartPane&&n.gameStore.ready&&r.workerEditing.job&&r.workerEditing.job in n.gameStore.plantzones&&n.gameStore.plantzones[r.workerEditing.job].regiongroup&&n.userStore.useFloatingModifiers[n.gameStore.plantzones[r.workerEditing.job].regiongroup]?(D(),$("div",lht,[kt(a,{rgk:n.gameStore.plantzones[r.workerEditing.job].regiongroup,wspd:r.workerEditing.wspdSheet+o.currentWspdBonus,workload:n.gameStore.plantzones[r.workerEditing.job].workload,show:!0},null,8,["rgk","wspd","workload"])])):pt("",!0)])):pt("",!0)}const p$=$e(sft,[["render",uht],["__scopeId","data-v-6d88b5d0"]]),cht={setup(){const e=re();return{gameStore:xt(),userStore:e}},props:{options:Object,show:{type:Boolean,default:!1}},data:()=>({customProfit:0,customCP:0,customLabel:""}),methods:{makeIconSrc:Mo,formatFixed:Bt,assignWorker(e,t){this.userStore.assignWorker(e,t),this.$emit("update:show",!1)},assignWorkerCustom(e){this.userStore.assignWorker(e,["workshop",this.customProfit,this.customCP,this.customLabel]),this.$emit("update:show",!1)},assignWorkerWorkshop(e,t){this.userStore.assignWorker(e,{kind:"workshop",hk:t}),this.$emit("update:show",!1)},workshopBusy(e){return this.userStore.userWorkers.some(t=>t.job&&t.job.kind=="workshop"&&t.job.hk==e)}}},fht=w("tr",null,[w("th",null,"node"),w("th",null,"workload"),w("th",null,"walk"),w("th",null,"+M$/day"),w("th",null,"+CP"),w("th",null,"+efficiency"),w("th",null,"action")],-1),hht=["href"],dht=U(L(" ")+" "),pht=["src"],vht=["title"],ght=U("+"),mht=["title"],yht=["onClick"],_ht=w("tr",null,[w("td",{colspan:"7",class:"center"},"Special jobs (not node based)")],-1),bht={key:0},wht=w("td",null,[U(" \u{1F33B} Farm "),w("abbr",{title:"see Settings page: singleWorkerProfit = (fullWorkersProfit - noWorkersProfit) / 10"},"\u2139\uFE0F")],-1),Sht=w("td",null,"x",-1),Tht=w("td",null,"x",-1),Pht=["title"],Eht=w("abbr",{title:"see Settings > Workshops config"},"\u2139\uFE0F",-1),Aht=["onClick"],Cht=U(" \u270D\uFE0F Custom job "),Mht=w("abbr",{title:"enter daily profit and CP cost for this specific job. these are per worker - so for Mass Production, divide by worker count manually"},"\u2139\uFE0F",-1),kht={style:{float:"right"}},xht=U(" label: "),Lht=w("td",null,"x",-1),Iht=w("td",null,"x",-1);function Oht(e,t,r,n,i,o){const a=pe("RouterLink");return r.options?(D(),$(W,{key:0},[w("div",null,[U(" Send "+L(r.options.worker.label)+" ( ",1),n.userStore.displayWorkerStatsForPz?(D(),$(W,{key:0},[U(L(o.formatFixed(n.gameStore.workerStatsOnPlantzone(r.options.worker).wspd,2))+"\u{1F528} "+L(o.formatFixed(n.gameStore.workerStatsOnPlantzone(r.options.worker).mspd,2))+"\u{1F9B6} "+L(o.formatFixed(n.gameStore.workerStatsOnPlantzone(r.options.worker).luck,2))+"\u{1F340} ",1)],64)):(D(),$(W,{key:1},[U(L(o.formatFixed(r.options.worker.wspdSheet,2))+"\u{1F528} "+L(o.formatFixed(r.options.worker.mspdSheet,2))+"\u{1F9B6} "+L(o.formatFixed(r.options.worker.luckSheet,2))+"\u{1F340} ",1)],64)),U(" ) where? "+L(r.options.jobs.length)+" top untaken nodes near "+L(n.gameStore.uloc.town[n.gameStore.tnk2tk(r.options.worker.tnk)])+": ",1)]),w("table",null,[fht,(D(!0),$(W,null,Nt(r.options.jobs,s=>(D(),$("tr",null,[w("td",null,[w("a",{href:this.userStore.codexNodeUrl+s.pz.key},L(s.pz.name),9,hht),(D(!0),$(W,null,Nt(this.gameStore.plantzones[s.pz.key].lucky,(l,u)=>(D(),$(W,null,[dht,kt(a,{tag:"a",to:{path:"./settings",hash:"#item"+u}},{default:Le(()=>[w("img",{src:o.makeIconSrc(u),class:"iconitem"},null,8,pht)]),_:2},1032,["to"])],64))),256))]),w("td",null,L(n.userStore.useFloatingModifiers[s.pz.regiongroup]?"~":"")+L(o.formatFixed(n.userStore.medianWorkloads[s.pz.key],2)),1),w("td",null,L(o.formatFixed(s.profit.dist,0)),1),w("td",null,L(o.formatFixed(s.profit.priceDaily,2)),1),w("td",null,[w("abbr",{title:"via "+Array.from(s.path,l=>n.gameStore.uloc.node[l]).join(`
`)},L(s.mapCp),9,vht),ght,w("abbr",{title:s.infraTooltip},L(o.formatFixed(s.townCp)),9,mht),U("="+L(o.formatFixed(s.cp)),1)]),w("td",null,L(o.formatFixed(s.dailyPerCp,3,!0)),1),w("td",null,[w("button",{onClick:l=>o.assignWorker(r.options.worker,s.pz.key)},"assign",8,yht)])]))),256)),_ht,n.userStore.farmingEnable&&n.userStore.workersFarmingCount<10?(D(),$("tr",bht,[wht,Sht,Tht,w("td",null,L(n.userStore.farmingProfitPerCP),1),w("td",null,[w("abbr",{title:n.gameStore.farmSelectionEntry(n.gameStore.tnk2tk(r.options.worker.tnk)).infraTooltip},L(o.formatFixed(n.gameStore.farmSelectionEntry(n.gameStore.tnk2tk(r.options.worker.tnk)).townCp)),9,Pht)]),w("td",null,L(o.formatFixed(n.gameStore.farmSelectionEntry(n.gameStore.tnk2tk(r.options.worker.tnk)).dailyPerCp,3,!0)),1),w("td",null,[w("button",{onClick:t[0]||(t[0]=s=>o.assignWorker(r.options.worker,"farming"))},"assign")])])):pt("",!0),(D(!0),$(W,null,Nt(n.userStore.userWorkshops,(s,l)=>(D(),$("tr",null,[(!o.workshopBusy(l)||s.industry=="mass")&&n.gameStore.houseDistance(r.options.worker.tnk,l)<1e6?(D(),$(W,{key:0},[w("td",null,[U(" \u{1F3ED} "+L(n.gameStore.uloc.char[l])+" ",1),Eht]),w("td",null,L(s.manualWorkload),1),w("td",null,L(o.formatFixed(n.gameStore.houseDistance(r.options.worker.tnk,l),0)),1),w("td",null,L(o.formatFixed(n.gameStore.profitWorkshopWorker(l,s,r.options.worker),2)),1),w("td",null,L(n.userStore.occupiedWorkshops.has(Number(l))?0:s.manualCp),1),w("td",null,L(o.formatFixed(n.userStore.jobEfficiencyDelta(n.gameStore.profitWorkshopWorker(l,s,r.options.worker),n.userStore.occupiedWorkshops.has(Number(l))?0:s.manualCp),3,!0)),1),w("td",null,[w("button",{onClick:u=>o.assignWorkerWorkshop(r.options.worker,l)},"assign",8,Aht)])],64)):pt("",!0)]))),256)),w("tr",null,[w("td",null,[Cht,Mht,w("div",kht,[xht,Tt(w("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>e.customLabel=s),class:"workshop-label-input"},null,512),[[le,e.customLabel]])])]),Lht,Iht,w("td",null,[Tt(w("input",{type:"number",class:"float2",step:"0.1","onUpdate:modelValue":t[2]||(t[2]=s=>e.customProfit=s)},null,512),[[le,e.customProfit,void 0,{number:!0}]])]),w("td",null,[Tt(w("input",{type:"number",class:"float2","onUpdate:modelValue":t[3]||(t[3]=s=>e.customCP=s)},null,512),[[le,e.customCP,void 0,{number:!0}]])]),w("td",null,L(o.formatFixed(n.userStore.jobEfficiencyDelta(e.customProfit,e.customCP),3,!0)),1),w("td",null,[w("button",{onClick:t[4]||(t[4]=s=>o.assignWorkerCustom(r.options.worker))},"assign")])])])],64)):pt("",!0)}const Rht=$e(cht,[["render",Oht]]),Dht={setup(){const e=re();return{gameStore:xt(),userStore:e}},props:{tk:String,o:Object,show:{type:Boolean,default:!1}},methods:{formatFixed:Bt}},Nht=U(" Connect to nearest town "),Fht=w("tr",null,[w("th",null,"House"),w("th",null,"\u{1F6CF}\uFE0F"),w("th",null,"CP")],-1),Bht=["disabled","onUpdate:modelValue"],$ht=U(" "+L(" ")+" "),zht=["href"],Vht=["disabled"],Uht=U(" P2W slots \u2192 Total: ");function Ght(e,t,r,n,i,o){return r.o?(D(),$(W,{key:0},[w("h3",null,L(n.gameStore.uloc.town[r.tk])+" lodging config",1),r.tk==619?(D(),$(W,{key:0},[Tt(w("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=a=>n.userStore.activateAncado=a)},null,512),[[Kn,n.userStore.activateAncado]]),Nht],64)):pt("",!0),w("table",null,[Fht,(D(!0),$(W,null,Nt(r.o.houses,a=>(D(),$("tr",null,[w("td",null,[Tt(w("input",{type:"checkbox",disabled:r.tk==619&&!n.userStore.activateAncado,"onUpdate:modelValue":s=>n.userStore.lodgingTaken[a.key]=s},null,8,Bht),[[Kn,n.userStore.lodgingTaken[a.key]]]),$ht,w("a",{href:"https://bdocodex.com/us/npc/"+a.key},L(n.gameStore.uloc.char[a.key]),9,zht)]),w("td",null,L(a.lodgingSpaces),1),w("td",null,L(a.CP),1)]))),256)),w("tr",null,[w("td",null,[Tt(w("input",{type:"number",disabled:r.tk==619&&!n.userStore.activateAncado,"onUpdate:modelValue":t[1]||(t[1]=a=>n.userStore.lodgingP2W[r.tk]=a),class:"short"},null,8,Vht),[[le,n.userStore.lodgingP2W[r.tk],void 0,{number:!0}]]),Uht]),w("td",null,L(n.userStore.haveLodging.slots.perTown[r.tk]),1),w("td",null,L(n.userStore.haveLodging.cp.perTown[r.tk]),1)])])],64)):pt("",!0)}const jht=$e(Dht,[["render",Ght]]);const Wht={setup(){const e=re();return{gameStore:xt(),userStore:e}},props:{tk:String,o:Object,show:{type:Boolean,default:!1}},data:()=>({}),computed:{wantLodging(){this.tk in this.userStore.lodgingP2W||(this.userStore.lodgingP2W[this.tk]=0);const e=this.userStore.townWorkers(this.tk).length-this.userStore.lodgingP2W[this.tk]-1;return e>0?e:0},wantStorage(){if(!this.userStore.townsStoreItemkeys[this.tk].size)return 0;this.tk in this.userStore.storageP2W||(this.userStore.storageP2W[this.tk]=0),this.tk in this.userStore.storagePersonal||(this.userStore.storagePersonal[this.tk]=0);const e=this.userStore.townsStoreItemkeys[this.tk].size+this.userStore.storagePersonal[this.tk]-this.userStore.storageP2W[this.tk]-this.userStore.baseStorage;return e>0?e:0},bestLookup(){return this.gameStore.lsLookup(this.tk,this.wantLodging,this.wantStorage)}},methods:{formatFixed:Bt,houseCraftPickedTooltip(e){const t=[];return this.userStore.townsInfra[e].indices.forEach((r,n)=>{if(this.userStore.townsInfra[e].states[n]==0)return;const i=this.userStore.townsInfra[e].states[n]==1?"\u{1F4E6}":"\u{1F6CF}\uFE0F";t.push(i+this.gameStore.uloc.char[r])}),t.join(`
`)}}},Bi=e=>(cn("data-v-07622879"),e=e(),fn(),e),Hht=U(" Connect to nearest town "),Xht={class:"section"},Yht=Bi(()=>w("h3",null,"\u{1F6CF}\uFE0F lodging",-1)),qht=Bi(()=>w("br",null,null,-1)),Zht=U(" - 1 innate"),Kht=Bi(()=>w("br",null,null,-1)),Jht=U(" - "),Qht=["disabled"],tdt=U(" from P2W"),edt=Bi(()=>w("br",null,null,-1)),rdt={key:0},ndt={key:1,class:"red"},idt=Bi(()=>w("br",null,null,-1)),odt={class:"section"},adt=Bi(()=>w("h3",null,"\u{1F4E6} storage",-1)),sdt=["title"],ldt=U(" + 1 free "),udt=Bi(()=>w("br",null,null,-1)),cdt=U(" + "),fdt=U(" for personal items"),hdt=Bi(()=>w("br",null,null,-1)),ddt=Bi(()=>w("br",null,null,-1)),pdt=U(" - "),vdt=U(" from P2W"),gdt=Bi(()=>w("br",null,null,-1)),mdt={key:0},ydt={key:1,class:"red"},_dt=Bi(()=>w("br",null,null,-1)),bdt=["title"];function wdt(e,t,r,n,i,o){return r.tk>0?(D(),$(W,{key:0},[w("h2",null,L(n.gameStore.uloc.town[r.tk]),1),r.tk==619?(D(),$(W,{key:0},[Tt(w("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=a=>n.userStore.activateAncado=a)},null,512),[[Kn,n.userStore.activateAncado]]),Hht],64)):pt("",!0),w("div",Xht,[Yht,U(" "+L(n.userStore.townWorkingWorkers(r.tk).length)+" used by workers",1),qht,Zht,Kht,Jht,Tt(w("input",{type:"number",class:"w42em",min:"0",disabled:r.tk==619&&!n.userStore.activateAncado,"onUpdate:modelValue":t[1]||(t[1]=a=>n.userStore.lodgingP2W[r.tk]=a)},null,8,Qht),[[le,n.userStore.lodgingP2W[r.tk],void 0,{number:!0}]]),tdt,edt,U(" = "+L(n.userStore.townsInfra[r.tk].wantLodging)+" required ",1),n.userStore.townsInfra[r.tk].warnL?(D(),$("span",rdt,"\u2190 max possible")):pt("",!0),n.userStore.townsInfra[r.tk].errL?(D(),$("span",ndt,"\u2190 too much!")):pt("",!0),idt,w("strong",null,L(n.userStore.townsInfra[r.tk].lodging)+" found ",1)]),w("div",odt,[adt,U(" "+L(n.userStore.townsStoreItemkeys[r.tk]&&n.userStore.townsStoreItemkeys[r.tk].size)+" for worker items ",1),w("abbr",{title:Array.from(n.userStore.townsStoreItemkeys[r.tk],a=>n.gameStore.uloc.item[a]).join(`
`)},"\u2139\uFE0F",8,sdt),ldt,udt,cdt,Tt(w("input",{type:"number",class:"w42em",min:"0","onUpdate:modelValue":t[2]||(t[2]=a=>n.userStore.storagePersonal[r.tk]=a)},null,512),[[le,n.userStore.storagePersonal[r.tk],void 0,{number:!0}]]),fdt,hdt,U(" - "+L(n.userStore.baseStorage)+" innate",1),ddt,pdt,Tt(w("input",{type:"number",class:"w42em",min:"0","onUpdate:modelValue":t[3]||(t[3]=a=>n.userStore.storageP2W[r.tk]=a)},null,512),[[le,n.userStore.storageP2W[r.tk],void 0,{number:!0}]]),vdt,gdt,U(" = "+L(n.userStore.townsInfra[r.tk].wantStorage)+" required ",1),n.userStore.townsInfra[r.tk].warnS?(D(),$("span",mdt,"\u2190 max possible")):pt("",!0),n.userStore.townsInfra[r.tk].errS?(D(),$("span",ydt,"\u2190 too much!")):pt("",!0),_dt,w("strong",null,L(n.userStore.townsInfra[r.tk].storage)+" found ",1)]),U(" Found cost: "+L(n.userStore.townsInfra[r.tk].cost)+" CP ",1),n.userStore.townsInfra[r.tk].success?(D(),$("abbr",{key:1,title:o.houseCraftPickedTooltip(r.tk)},"\u2139\uFE0F",8,bdt)):pt("",!0)],64)):pt("",!0)}const Sdt=$e(Wht,[["render",wdt],["__scopeId","data-v-07622879"]]);function Zm(e,t){if(!e)throw new Error(t||"loader assertion failed.")}const VE=Boolean(typeof process!="object"||String(process)!=="[object process]"||process.browser),cx=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);cx&&parseFloat(cx[1]);const Tdt="3.2.7";function ca(e,t){if(!e)throw new Error(t||"loaders.gl assertion failed.")}const x3=typeof process!="object"||String(process)!=="[object process]"||process.browser,Pdt=typeof window<"u"&&typeof window.orientation<"u",fx=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);fx&&parseFloat(fx[1]);function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Edt{constructor(t,r){E(this,"name",void 0),E(this,"workerThread",void 0),E(this,"isRunning",!0),E(this,"result",void 0),E(this,"_resolve",()=>{}),E(this,"_reject",()=>{}),this.name=t,this.workerThread=r,this.result=new Promise((n,i)=>{this._resolve=n,this._reject=i})}postMessage(t,r){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:r})}done(t){ca(this.isRunning),this.isRunning=!1,this._resolve(t)}error(t){ca(this.isRunning),this.isRunning=!1,this._reject(t)}}class K2{}const J2=new Map;function Adt(e){ca(e.source&&!e.url||!e.source&&e.url);let t=J2.get(e.source||e.url);return t||(e.url&&(t=Cdt(e.url),J2.set(e.url,t)),e.source&&(t=v$(e.source),J2.set(e.source,t))),ca(t),t}function Cdt(e){if(!e.startsWith("http"))return e;const t=Mdt(e);return v$(t)}function v$(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function Mdt(e){return`try {
  importScripts('`.concat(e,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}function g$(e,t=!0,r){const n=r||new Set;if(e){if(hx(e))n.add(e);else if(hx(e.buffer))n.add(e.buffer);else if(!ArrayBuffer.isView(e)){if(t&&typeof e=="object")for(const i in e)g$(e[i],t,n)}}return r===void 0?Array.from(n):[]}function hx(e){return e?e instanceof ArrayBuffer||typeof MessagePort<"u"&&e instanceof MessagePort||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas:!1}const Q2=()=>{};class L3{static isSupported(){return typeof Worker<"u"&&x3||typeof K2!==void 0}constructor(t){E(this,"name",void 0),E(this,"source",void 0),E(this,"url",void 0),E(this,"terminated",!1),E(this,"worker",void 0),E(this,"onMessage",void 0),E(this,"onError",void 0),E(this,"_loadableURL","");const{name:r,source:n,url:i}=t;ca(n||i),this.name=r,this.source=n,this.url=i,this.onMessage=Q2,this.onError=o=>console.log(o),this.worker=x3?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=Q2,this.onError=Q2,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(t,r){r=r||g$(t),this.worker.postMessage(t,r)}_getErrorFromErrorEvent(t){let r="Failed to load ";return r+="worker ".concat(this.name," from ").concat(this.url,". "),t.message&&(r+="".concat(t.message," in ")),t.lineno&&(r+=":".concat(t.lineno,":").concat(t.colno)),new Error(r)}_createBrowserWorker(){this._loadableURL=Adt({source:this.source,url:this.url});const t=new Worker(this._loadableURL,{name:this.name});return t.onmessage=r=>{r.data?this.onMessage(r.data):this.onError(new Error("No data received"))},t.onerror=r=>{this.onError(this._getErrorFromErrorEvent(r)),this.terminated=!0},t.onmessageerror=r=>console.error(r),t}_createNodeWorker(){let t;if(this.url){const n=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);t=new K2(n,{eval:!1})}else if(this.source)t=new K2(this.source,{eval:!0});else throw new Error("no worker");return t.on("message",r=>{this.onMessage(r)}),t.on("error",r=>{this.onError(r)}),t.on("exit",r=>{}),t}}class kdt{static isSupported(){return L3.isSupported()}constructor(t){E(this,"name","unnamed"),E(this,"source",void 0),E(this,"url",void 0),E(this,"maxConcurrency",1),E(this,"maxMobileConcurrency",1),E(this,"onDebug",()=>{}),E(this,"reuseWorkers",!0),E(this,"props",{}),E(this,"jobQueue",[]),E(this,"idleQueue",[]),E(this,"count",0),E(this,"isDestroyed",!1),this.source=t.source,this.url=t.url,this.setProps(t)}destroy(){this.idleQueue.forEach(t=>t.destroy()),this.isDestroyed=!0}setProps(t){this.props={...this.props,...t},t.name!==void 0&&(this.name=t.name),t.maxConcurrency!==void 0&&(this.maxConcurrency=t.maxConcurrency),t.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=t.maxMobileConcurrency),t.reuseWorkers!==void 0&&(this.reuseWorkers=t.reuseWorkers),t.onDebug!==void 0&&(this.onDebug=t.onDebug)}async startJob(t,r=(i,o,a)=>i.done(a),n=(i,o)=>i.error(o)){const i=new Promise(o=>(this.jobQueue.push({name:t,onMessage:r,onError:n,onStart:o}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const t=this._getAvailableWorker();if(!t)return;const r=this.jobQueue.shift();if(r){this.onDebug({message:"Starting job",name:r.name,workerThread:t,backlog:this.jobQueue.length});const n=new Edt(r.name,t);t.onMessage=i=>r.onMessage(n,i.type,i.payload),t.onError=i=>r.onError(n,i),r.onStart(n);try{await n.result}finally{this.returnWorkerToQueue(t)}}}returnWorkerToQueue(t){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const t="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new L3({name:t,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return Pdt?this.maxMobileConcurrency:this.maxConcurrency}}const xdt={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class Jo{static isSupported(){return L3.isSupported()}static getWorkerFarm(t={}){return Jo._workerFarm=Jo._workerFarm||new Jo({}),Jo._workerFarm.setProps(t),Jo._workerFarm}constructor(t){E(this,"props",void 0),E(this,"workerPools",new Map),this.props={...xdt},this.setProps(t),this.workerPools=new Map}destroy(){for(const t of this.workerPools.values())t.destroy();this.workerPools=new Map}setProps(t){this.props={...this.props,...t};for(const r of this.workerPools.values())r.setProps(this._getWorkerPoolProps())}getWorkerPool(t){const{name:r,source:n,url:i}=t;let o=this.workerPools.get(r);return o||(o=new kdt({name:r,source:n,url:i}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(r,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}E(Jo,"_workerFarm",void 0);const Ldt="latest";function Idt(e,t={}){const r=t[e.id]||{},n="".concat(e.id,"-worker.js");let i=r.workerUrl;if(!i&&e.id==="compression"&&(i=t.workerUrl),t._workerType==="test"&&(i="modules/".concat(e.module,"/dist/").concat(n)),!i){let o=e.version;o==="latest"&&(o=Ldt);const a=o?"@".concat(o):"";i="https://unpkg.com/@loaders.gl/".concat(e.module).concat(a,"/dist/").concat(n)}return ca(i),i}function Odt(e,t=Tdt){ca(e,"no worker provided");const r=e.version;return!(!t||!r)}function Rdt(e,t){return!Jo.isSupported()||!x3&&!(t!=null&&t._nodeWorkers)?!1:e.worker&&(t==null?void 0:t.worker)}async function Ddt(e,t,r,n,i){const o=e.id,a=Idt(e,r),l=Jo.getWorkerFarm(r).getWorkerPool({name:o,url:a});r=JSON.parse(JSON.stringify(r)),n=JSON.parse(JSON.stringify(n||{}));const u=await l.startJob("process-on-worker",Ndt.bind(null,i));return u.postMessage("process",{input:t,options:r,context:n}),await(await u.result).result}async function Ndt(e,t,r,n){switch(r){case"done":t.done(n);break;case"error":t.error(new Error(n.error));break;case"process":const{id:i,input:o,options:a}=n;try{const s=await e(o,a);t.postMessage("done",{id:i,result:s})}catch(s){const l=s instanceof Error?s.message:"unknown error";t.postMessage("error",{id:i,error:l})}break;default:console.warn("parse-with-worker unknown message ".concat(r))}}function m$(e){return e&&typeof e=="object"&&e.isBuffer}function Fdt(e){return m$(e)?new Uint8Array(e.buffer,e.byteOffset,e.length).slice().buffer:e}function y$(e){if(m$(e))return Fdt(e);if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if(typeof e=="string"){const t=e;return new TextEncoder().encode(t).buffer}if(e&&typeof e=="object"&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")}function Bdt(e,t,r){if(r=r||e.byteLength,e.byteLength<r||t.byteLength<r)return!1;const n=new Uint8Array(e),i=new Uint8Array(t);for(let o=0;o<n.length;++o)if(n[o]!==i[o])return!1;return!0}function $dt(...e){const t=e.map(o=>o instanceof ArrayBuffer?new Uint8Array(o):o),r=t.reduce((o,a)=>o+a.byteLength,0),n=new Uint8Array(r);let i=0;for(const o of t)n.set(o,i),i+=o.byteLength;return n.buffer}async function zdt(e){const t=[];for await(const r of e)t.push(r);return $dt(...t)}function dx(){let e;if(typeof window<"u"&&window.performance)e=window.performance.now();else if(typeof process<"u"&&process.hrtime){const t=process.hrtime();e=t[0]*1e3+t[1]/1e6}else e=Date.now();return e}class px{constructor(t,r){E(this,"name",void 0),E(this,"type",void 0),E(this,"sampleSize",1),E(this,"time",void 0),E(this,"count",void 0),E(this,"samples",void 0),E(this,"lastTiming",void 0),E(this,"lastSampleTime",void 0),E(this,"lastSampleCount",void 0),E(this,"_count",0),E(this,"_time",0),E(this,"_samples",0),E(this,"_startTime",0),E(this,"_timerPending",!1),this.name=t,this.type=r,this.reset()}setSampleSize(t){return this.sampleSize=t,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(t){return this._count+=t,this._samples++,this._checkSampling(),this}subtractCount(t){return this._count-=t,this._samples++,this._checkSampling(),this}addTime(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=dx(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(dx()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class gy{constructor(t){E(this,"id",void 0),E(this,"stats",{}),this.id=t.id,this.stats={},this._initializeStats(t.stats),Object.seal(this)}get(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:t,type:r})}get size(){return Object.keys(this.stats).length}reset(){for(const t in this.stats)this.stats[t].reset();return this}forEach(t){for(const r in this.stats)t(this.stats[r])}getTable(){const t={};return this.forEach(r=>{t[r.name]={time:r.time||0,count:r.count||0,average:r.getAverageTime()||0,hz:r.getHz()||0}}),t}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(r=>this._getOrCreate(r))}_getOrCreate(t){if(!t||!t.name)return null;const{name:r,type:n}=t;return this.stats[r]||(t instanceof px?this.stats[r]=t:this.stats[r]=new px(r,n)),this.stats[r]}}const Vdt="Queued Requests",Udt="Active Requests",Gdt="Cancelled Requests",jdt="Queued Requests Ever",Wdt="Active Requests Ever",Hdt={id:"request-scheduler",throttleRequests:!0,maxRequests:6};class Xdt{constructor(t={}){E(this,"props",void 0),E(this,"stats",void 0),E(this,"activeRequestCount",0),E(this,"requestQueue",[]),E(this,"requestMap",new Map),E(this,"deferredUpdate",null),this.props={...Hdt,...t},this.stats=new gy({id:this.props.id}),this.stats.get(Vdt),this.stats.get(Udt),this.stats.get(Gdt),this.stats.get(jdt),this.stats.get(Wdt)}scheduleRequest(t,r=()=>0){if(!this.props.throttleRequests)return Promise.resolve({done:()=>{}});if(this.requestMap.has(t))return this.requestMap.get(t);const n={handle:t,priority:0,getPriority:r},i=new Promise(o=>(n.resolve=o,n));return this.requestQueue.push(n),this.requestMap.set(t,i),this._issueNewRequests(),i}_issueRequest(t){const{handle:r,resolve:n}=t;let i=!1;const o=()=>{i||(i=!0,this.requestMap.delete(r),this.activeRequestCount--,this._issueNewRequests())};return this.activeRequestCount++,n?n({done:o}):Promise.resolve({done:o})}_issueNewRequests(){this.deferredUpdate||(this.deferredUpdate=setTimeout(()=>this._issueNewRequestsAsync(),0))}_issueNewRequestsAsync(){this.deferredUpdate=null;const t=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(t!==0){this._updateAllRequests();for(let r=0;r<t;++r){const n=this.requestQueue.shift();n&&this._issueRequest(n)}}}_updateAllRequests(){const t=this.requestQueue;for(let r=0;r<t.length;++r){const n=t[r];this._updateRequest(n)||(t.splice(r,1),this.requestMap.delete(n.handle),r--)}t.sort((r,n)=>r.priority-n.priority)}_updateRequest(t){return t.priority=t.getPriority(t.handle),t.priority<0?(t.resolve(null),!1):!0}}let Ydt="";const vx={};function qdt(e){for(const t in vx)if(e.startsWith(t)){const r=vx[t];e=e.replace(t,r)}return!e.startsWith("http://")&&!e.startsWith("https://")&&(e="".concat(Ydt).concat(e)),e}function Zdt(e){const t=e&&e.lastIndexOf("/");return t>=0?e.substr(t+1):""}const Kdt=e=>typeof e=="boolean",Pd=e=>typeof e=="function",B0=e=>e!==null&&typeof e=="object",gx=e=>B0(e)&&e.constructor==={}.constructor,Jdt=e=>e&&typeof e[Symbol.iterator]=="function",Qdt=e=>e&&typeof e[Symbol.asyncIterator]=="function",yf=e=>typeof Response<"u"&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json,_f=e=>typeof Blob<"u"&&e instanceof Blob,t0t=e=>e&&typeof e=="object"&&e.isBuffer,e0t=e=>typeof ReadableStream<"u"&&e instanceof ReadableStream||B0(e)&&Pd(e.tee)&&Pd(e.cancel)&&Pd(e.getReader),r0t=e=>B0(e)&&Pd(e.read)&&Pd(e.pipe)&&Kdt(e.readable),_$=e=>e0t(e)||r0t(e),n0t=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,i0t=/^([-\w.]+\/[-\w.+]+)/;function o0t(e){const t=i0t.exec(e);return t?t[1]:e}function mx(e){const t=n0t.exec(e);return t?t[1]:""}const a0t=/\?.*/;function my(e){if(yf(e)){const t=tb(e.url||""),r=e.headers.get("content-type")||"";return{url:t,type:o0t(r)||mx(t)}}return _f(e)?{url:tb(e.name||""),type:e.type||""}:typeof e=="string"?{url:tb(e),type:mx(e)}:{url:"",type:""}}function s0t(e){return yf(e)?e.headers["content-length"]||-1:_f(e)?e.size:typeof e=="string"?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}function tb(e){return e.replace(a0t,"")}async function b$(e){if(yf(e))return e;const t={},r=s0t(e);r>=0&&(t["content-length"]=String(r));const{url:n,type:i}=my(e);i&&(t["content-type"]=i);const o=await c0t(e);o&&(t["x-first-bytes"]=o),typeof e=="string"&&(e=new TextEncoder().encode(e));const a=new Response(e,{headers:t});return Object.defineProperty(a,"url",{value:n}),a}async function l0t(e){if(!e.ok){const t=await u0t(e);throw new Error(t)}}async function u0t(e){let t="Failed to fetch resource ".concat(e.url," (").concat(e.status,"): ");try{const r=e.headers.get("Content-Type");let n=e.statusText;r.includes("application/json")&&(n+=" ".concat(await e.text())),t+=n,t=t.length>60?"".concat(t.slice(0,60),"..."):t}catch{}return t}async function c0t(e){if(typeof e=="string")return"data:,".concat(e.slice(0,5));if(e instanceof Blob){const r=e.slice(0,5);return await new Promise(n=>{const i=new FileReader;i.onload=o=>{var a;return n(o==null||(a=o.target)===null||a===void 0?void 0:a.result)},i.readAsDataURL(r)})}if(e instanceof ArrayBuffer){const r=e.slice(0,5),n=f0t(r);return"data:base64,".concat(n)}return null}function f0t(e){let t="";const r=new Uint8Array(e);for(let n=0;n<r.byteLength;n++)t+=String.fromCharCode(r[n]);return btoa(t)}async function yx(e,t){if(typeof e=="string"){e=qdt(e);let r=t;return t!=null&&t.fetch&&typeof(t==null?void 0:t.fetch)!="function"&&(r=t.fetch),await fetch(e,r)}return await b$(e)}function w$(e){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&Boolean(process.versions.electron))return!0;const t=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,r=e||t;return!!(r&&r.indexOf("Electron")>=0)}function wa(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||w$()}const Hg={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:typeof process=="object"&&process},cv=Hg.window||Hg.self||Hg.global,ph=Hg.process||{},S$=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";wa();const eb=globalThis;function T$(e){if(!e&&!wa())return"Node";if(w$(e))return"Electron";const r=e||(typeof navigator<"u"?navigator:{}).userAgent||"";if(r.indexOf("Edge")>-1)return"Edge";const n=r.indexOf("MSIE ")!==-1,i=r.indexOf("Trident/")!==-1;return n||i?"IE":eb.chrome?"Chrome":eb.safari?"Safari":eb.mozInnerScreenX?"Firefox":"Unknown"}function h0t(e){try{const t=window[e],r="__storage_test__";return t.setItem(r,r),t.removeItem(r),t}catch{return null}}class d0t{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";E(this,"storage",void 0),E(this,"id",void 0),E(this,"config",{}),this.storage=h0t(n),this.id=t,this.config={},Object.assign(this.config,r),this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){return this.config={},this.updateConfiguration(t)}updateConfiguration(t){if(Object.assign(this.config,t),this.storage){const r=JSON.stringify(this.config);this.storage.setItem(this.id,r)}return this}_loadConfiguration(){let t={};if(this.storage){const r=this.storage.getItem(this.id);t=r?JSON.parse(r):{}}return Object.assign(this.config,t),this}}function p0t(e){let t;return e<10?t="".concat(e.toFixed(2),"ms"):e<100?t="".concat(e.toFixed(1),"ms"):e<1e3?t="".concat(e.toFixed(0),"ms"):t="".concat((e/1e3).toFixed(2),"s"),t}function v0t(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const r=Math.max(t-e.length,0);return"".concat(" ".repeat(r)).concat(e)}function rb(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=e.src.replace(/\(/g,"%28").replace(/\)/g,"%29");e.width>n&&(r=Math.min(r,n/e.width));const o=e.width*r,a=e.height*r,s=["font-size:1px;","padding:".concat(Math.floor(a/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(a,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(a,"px;"),"color:transparent;"].join("");return["".concat(t," %c+"),s]}let Km;(function(e){e[e.BLACK=30]="BLACK",e[e.RED=31]="RED",e[e.GREEN=32]="GREEN",e[e.YELLOW=33]="YELLOW",e[e.BLUE=34]="BLUE",e[e.MAGENTA=35]="MAGENTA",e[e.CYAN=36]="CYAN",e[e.WHITE=37]="WHITE",e[e.BRIGHT_BLACK=90]="BRIGHT_BLACK",e[e.BRIGHT_RED=91]="BRIGHT_RED",e[e.BRIGHT_GREEN=92]="BRIGHT_GREEN",e[e.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",e[e.BRIGHT_BLUE=94]="BRIGHT_BLUE",e[e.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",e[e.BRIGHT_CYAN=96]="BRIGHT_CYAN",e[e.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(Km||(Km={}));function _x(e){return typeof e=="string"?Km[e.toUpperCase()]||Km.WHITE:e}function g0t(e,t,r){return!wa&&typeof e=="string"&&(t&&(t=_x(t),e="\x1B[".concat(t,"m").concat(e,"\x1B[39m")),r&&(t=_x(r),e="\x1B[".concat(r+10,"m").concat(e,"\x1B[49m"))),e}function m0t(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const r=Object.getPrototypeOf(e),n=Object.getOwnPropertyNames(r);for(const i of n)typeof e[i]=="function"&&(t.find(o=>i===o)||(e[i]=e[i].bind(e)))}function Jm(e,t){if(!e)throw new Error(t||"Assertion failed")}function Gu(){let e;if(wa&&"performance"in cv){var t,r;e=cv==null||(t=cv.performance)===null||t===void 0||(r=t.now)===null||r===void 0?void 0:r.call(t)}else if("hrtime"in ph){var n;const i=ph==null||(n=ph.hrtime)===null||n===void 0?void 0:n.call(ph);e=i[0]*1e3+i[1]/1e6}else e=Date.now();return e}const ju={debug:wa&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},y0t={enabled:!0,level:0};function Un(){}const bx={},Sx={once:!0};class $0{constructor(){let{id:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};E(this,"id",void 0),E(this,"VERSION",S$),E(this,"_startTs",Gu()),E(this,"_deltaTs",Gu()),E(this,"_storage",void 0),E(this,"userData",{}),E(this,"LOG_THROTTLE_TIMEOUT",0),this.id=t,this._storage=new d0t("__probe-".concat(this.id,"__"),y0t),this.userData={},this.timeStamp("".concat(this.id," started")),m0t(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Gu()-this._startTs).toPrecision(10))}getDelta(){return Number((Gu()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.updateConfiguration({enabled:t}),this}setLevel(t){return this._storage.updateConfiguration({level:t}),this}get(t){return this._storage.config[t]}set(t,r){this._storage.updateConfiguration({[t]:r})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(t,r){Jm(t,r)}warn(t){return this._getLogFunction(0,t,ju.warn,arguments,Sx)}error(t){return this._getLogFunction(0,t,ju.error,arguments)}deprecated(t,r){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(r,"` instead"))}removed(t,r){return this.error("`".concat(t,"` has been removed. Use `").concat(r,"` instead"))}probe(t,r){return this._getLogFunction(t,r,ju.log,arguments,{time:!0,once:!0})}log(t,r){return this._getLogFunction(t,r,ju.debug,arguments)}info(t,r){return this._getLogFunction(t,r,console.info,arguments)}once(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];return this._getLogFunction(t,r,ju.debug||ju.info,arguments,Sx)}table(t,r,n){return r?this._getLogFunction(t,r,console.table||Un,n&&[n],{tag:S0t(r)}):Un}image(t){let{logLevel:r,priority:n,image:i,message:o="",scale:a=1}=t;return this._shouldLog(r||n)?wa?w0t({image:i,message:o,scale:a}):b0t({image:i,message:o,scale:a}):Un}time(t,r){return this._getLogFunction(t,r,console.time?console.time:console.info)}timeEnd(t,r){return this._getLogFunction(t,r,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,r){return this._getLogFunction(t,r,console.timeStamp||Un)}group(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=Tx({logLevel:t,message:r,opts:n}),{collapsed:o}=n;return i.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(t,r,Object.assign({},n,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||Un)}withGroup(t,r,n){this.group(t,r)();try{n()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=P$(t)}_getLogFunction(t,r,n,i,o){if(this._shouldLog(t)){o=Tx({logLevel:t,message:r,args:i,opts:o}),n=n||o.method,Jm(n),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=Gu();const a=o.tag||o.message;if(o.once)if(!bx[a])bx[a]=Gu();else return Un;return r=_0t(this.id,o.message,o),n.bind(console,r,...o.args)}return Un}}E($0,"VERSION",S$);function P$(e){if(!e)return 0;let t;switch(typeof e){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return Jm(Number.isFinite(t)&&t>=0),t}function Tx(e){const{logLevel:t,message:r}=e;e.logLevel=P$(t);const n=e.args?Array.from(e.args):[];for(;n.length&&n.shift()!==r;);switch(typeof t){case"string":case"function":r!==void 0&&n.unshift(r),e.message=t;break;case"object":Object.assign(e,t);break}typeof e.message=="function"&&(e.message=e.message());const i=typeof e.message;return Jm(i==="string"||i==="object"),Object.assign(e,{args:n},e.opts)}function _0t(e,t,r){if(typeof t=="string"){const n=r.time?v0t(p0t(r.total)):"";t=r.time?"".concat(e,": ").concat(n,"  ").concat(t):"".concat(e,": ").concat(t),t=g0t(t,r.color,r.background)}return t}function b0t(e){let{image:t,message:r="",scale:n=1}=e;return(void 0)({image:t,message:r,scale:n}),Un}function w0t(e){let{image:t,message:r="",scale:n=1}=e;if(typeof t=="string"){const o=new Image;return o.onload=()=>{const a=rb(o,r,n);console.log(...a)},o.src=t,Un}const i=t.nodeName||"";if(i.toLowerCase()==="img")return console.log(...rb(t,r,n)),Un;if(i.toLowerCase()==="canvas"){const o=new Image;return o.onload=()=>console.log(...rb(o,r,n)),o.src=t.toDataURL(),Un}return Un}function S0t(e){for(const t in e)for(const r in e[t])return r||"untitled";return"empty"}const Px=new $0({id:"loaders.gl"});class T0t{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class P0t{constructor(){E(this,"console",void 0),this.console=console}log(...t){return this.console.log.bind(this.console,...t)}info(...t){return this.console.info.bind(this.console,...t)}warn(...t){return this.console.warn.bind(this.console,...t)}error(...t){return this.console.error.bind(this.console,...t)}}const E$={fetch:null,mimeType:void 0,nothrow:!1,log:new P0t,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:VE,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},E0t={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function A$(){globalThis.loaders=globalThis.loaders||{};const{loaders:e}=globalThis;return e._state=e._state||{},e._state}const C$=()=>{const e=A$();return e.globalOptions=e.globalOptions||{...E$},e.globalOptions};function A0t(e,t,r,n){return r=r||[],r=Array.isArray(r)?r:[r],C0t(e,r),k0t(t,e,n)}function M$(e,t){const r=C$(),n=e||r;return typeof n.fetch=="function"?n.fetch:B0(n.fetch)?i=>yx(i,n):t!=null&&t.fetch?t==null?void 0:t.fetch:yx}function C0t(e,t){Ex(e,null,E$,E0t,t);for(const r of t){const n=e&&e[r.id]||{},i=r.options&&r.options[r.id]||{},o=r.deprecatedOptions&&r.deprecatedOptions[r.id]||{};Ex(n,r.id,i,o,t)}}function Ex(e,t,r,n,i){const o=t||"Top level",a=t?"".concat(t,"."):"";for(const s in e){const l=!t&&B0(e[s]),u=s==="baseUri"&&!t,c=s==="workerUrl"&&t;if(!(s in r)&&!u&&!c){if(s in n)Px.warn("".concat(o," loader option '").concat(a).concat(s,"' no longer supported, use '").concat(n[s],"'"))();else if(!l){const f=M0t(s,i);Px.warn("".concat(o," loader option '").concat(a).concat(s,"' not recognized. ").concat(f))()}}}}function M0t(e,t){const r=e.toLowerCase();let n="";for(const i of t)for(const o in i.options){if(e===o)return"Did you mean '".concat(i.id,".").concat(o,"'?");const a=o.toLowerCase();(r.startsWith(a)||a.startsWith(r))&&(n=n||"Did you mean '".concat(i.id,".").concat(o,"'?"))}return n}function k0t(e,t,r){const i={...e.options||{}};return x0t(i,r),i.log===null&&(i.log=new T0t),Ax(i,C$()),Ax(i,t),i}function Ax(e,t){for(const r in t)if(r in t){const n=t[r];gx(n)&&gx(e[r])?e[r]={...e[r],...t[r]}:e[r]=t[r]}}function x0t(e,t){t&&!("baseUri"in e)&&(e.baseUri=t)}function UE(e){var t;return e?(Array.isArray(e)&&(e=e[0]),Array.isArray((t=e)===null||t===void 0?void 0:t.extensions)):!1}function GE(e){var t,r;Zm(e,"null loader"),Zm(UE(e),"invalid loader");let n;return Array.isArray(e)&&(n=e[1],e=e[0],e={...e,options:{...e.options,...n}}),((t=e)!==null&&t!==void 0&&t.parseTextSync||(r=e)!==null&&r!==void 0&&r.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}const k$=()=>{const e=A$();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};function L0t(e){const t=k$();e=Array.isArray(e)?e:[e];for(const r of e){const n=GE(r);t.find(i=>n===i)||t.unshift(n)}}function I0t(){return k$()}const O0t=new $0({id:"loaders.gl"}),R0t=/\.([^.]+)$/;async function D0t(e,t=[],r,n){if(!x$(e))return null;let i=Cx(e,t,{...r,nothrow:!0},n);if(i)return i;if(_f(e)&&(e=await e.slice(0,10).arrayBuffer(),i=Cx(e,t,r,n)),!i&&!(r!=null&&r.nothrow))throw new Error(L$(e));return i}function Cx(e,t=[],r,n){if(!x$(e))return null;if(t&&!Array.isArray(t))return GE(t);let i=[];t&&(i=i.concat(t)),r!=null&&r.ignoreRegisteredLoaders||i.push(...I0t()),F0t(i);const o=N0t(e,i,r,n);if(!o&&!(r!=null&&r.nothrow))throw new Error(L$(e));return o}function N0t(e,t,r,n){const{url:i,type:o}=my(e),a=i||(n==null?void 0:n.url);let s=null,l="";if(r!=null&&r.mimeType&&(s=nb(t,r==null?void 0:r.mimeType),l="match forced by supplied MIME type ".concat(r==null?void 0:r.mimeType)),s=s||B0t(t,a),l=l||(s?"matched url ".concat(a):""),s=s||nb(t,o),l=l||(s?"matched MIME type ".concat(o):""),s=s||z0t(t,e),l=l||(s?"matched initial data ".concat(I$(e)):""),s=s||nb(t,r==null?void 0:r.fallbackMimeType),l=l||(s?"matched fallback MIME type ".concat(o):""),l){var u;O0t.log(1,"selectLoader selected ".concat((u=s)===null||u===void 0?void 0:u.name,": ").concat(l,"."))}return s}function x$(e){return!(e instanceof Response&&e.status===204)}function L$(e){const{url:t,type:r}=my(e);let n="No valid loader found (";n+=t?"".concat(Zdt(t),", "):"no url provided, ",n+="MIME type: ".concat(r?'"'.concat(r,'"'):"not provided",", ");const i=e?I$(e):"";return n+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",n+=")",n}function F0t(e){for(const t of e)GE(t)}function B0t(e,t){const r=t&&R0t.exec(t),n=r&&r[1];return n?$0t(e,n):null}function $0t(e,t){t=t.toLowerCase();for(const r of e)for(const n of r.extensions)if(n.toLowerCase()===t)return r;return null}function nb(e,t){for(const r of e)if(r.mimeTypes&&r.mimeTypes.includes(t)||t==="application/x.".concat(r.id))return r;return null}function z0t(e,t){if(!t)return null;for(const r of e)if(typeof t=="string"){if(V0t(t,r))return r}else if(ArrayBuffer.isView(t)){if(Mx(t.buffer,t.byteOffset,r))return r}else if(t instanceof ArrayBuffer&&Mx(t,0,r))return r;return null}function V0t(e,t){return t.testText?t.testText(e):(Array.isArray(t.tests)?t.tests:[t.tests]).some(n=>e.startsWith(n))}function Mx(e,t,r){return(Array.isArray(r.tests)?r.tests:[r.tests]).some(i=>U0t(e,t,r,i))}function U0t(e,t,r,n){if(n instanceof ArrayBuffer)return Bdt(n,e,n.byteLength);switch(typeof n){case"function":return n(e,r);case"string":const i=I3(e,t,n.length);return n===i;default:return!1}}function I$(e,t=5){return typeof e=="string"?e.slice(0,t):ArrayBuffer.isView(e)?I3(e.buffer,e.byteOffset,t):e instanceof ArrayBuffer?I3(e,0,t):""}function I3(e,t,r){if(e.byteLength<t+r)return"";const n=new DataView(e);let i="";for(let o=0;o<r;o++)i+=String.fromCharCode(n.getUint8(t+o));return i}const G0t=256*1024;function*j0t(e,t){const r=(t==null?void 0:t.chunkSize)||G0t;let n=0;const i=new TextEncoder;for(;n<e.length;){const o=Math.min(e.length-n,r),a=e.slice(n,n+o);n+=o,yield i.encode(a)}}const W0t=256*1024;function*H0t(e,t={}){const{chunkSize:r=W0t}=t;let n=0;for(;n<e.byteLength;){const i=Math.min(e.byteLength-n,r),o=new ArrayBuffer(i),a=new Uint8Array(e,n,i);new Uint8Array(o).set(a),n+=i,yield o}}const X0t=1024*1024;async function*Y0t(e,t){const r=(t==null?void 0:t.chunkSize)||X0t;let n=0;for(;n<e.size;){const i=n+r,o=await e.slice(n,i).arrayBuffer();n=i,yield o}}function kx(e,t){return VE?q0t(e,t):Z0t(e)}async function*q0t(e,t){const r=e.getReader();let n;try{for(;;){const i=n||r.read();t!=null&&t._streamReadAhead&&(n=r.read());const{done:o,value:a}=await i;if(o)return;yield y$(a)}}catch{r.releaseLock()}}async function*Z0t(e,t){for await(const r of e)yield y$(r)}function K0t(e,t){if(typeof e=="string")return j0t(e,t);if(e instanceof ArrayBuffer)return H0t(e,t);if(_f(e))return Y0t(e,t);if(_$(e))return kx(e,t);if(yf(e))return kx(e.body,t);throw new Error("makeIterator")}const O$="Cannot convert supplied data type";function J0t(e,t,r){if(t.text&&typeof e=="string")return e;if(t0t(e)&&(e=e.buffer),e instanceof ArrayBuffer){const n=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(e)){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);let n=e.buffer;const i=e.byteLength||e.length;return(e.byteOffset!==0||i!==n.byteLength)&&(n=n.slice(e.byteOffset,e.byteOffset+i)),n}throw new Error(O$)}async function Q0t(e,t,r){const n=e instanceof ArrayBuffer||ArrayBuffer.isView(e);if(typeof e=="string"||n)return J0t(e,t);if(_f(e)&&(e=await b$(e)),yf(e)){const i=e;return await l0t(i),t.binary?await i.arrayBuffer():await i.text()}if(_$(e)&&(e=K0t(e,r)),Jdt(e)||Qdt(e))return zdt(e);throw new Error(O$)}function tpt(e,t,r=null){if(r)return r;const n={fetch:M$(t,e),...e};return Array.isArray(n.loaders)||(n.loaders=null),n}function ept(e,t){if(!t&&e&&!Array.isArray(e))return e;let r;if(e&&(r=Array.isArray(e)?e:[e]),t&&t.loaders){const n=Array.isArray(t.loaders)?t.loaders:[t.loaders];r=r?[...r,...n]:n}return r&&r.length?r:null}async function jE(e,t,r,n){ca(!n||typeof n=="object"),t&&!Array.isArray(t)&&!UE(t)&&(n=void 0,r=t,t=void 0),e=await e,r=r||{};const{url:i}=my(e),a=ept(t,n),s=await D0t(e,a,r);return s?(r=A0t(r,s,a,i),n=tpt({url:i,parse:jE,loaders:a},r,n),await rpt(s,e,r,n)):null}async function rpt(e,t,r,n){if(Odt(e),yf(t)){const i=t,{ok:o,redirected:a,status:s,statusText:l,type:u,url:c}=i,f=Object.fromEntries(i.headers.entries());n.response={headers:f,ok:o,redirected:a,status:s,statusText:l,type:u,url:c}}if(t=await Q0t(t,e,r),e.parseTextSync&&typeof t=="string")return r.dataType="text",e.parseTextSync(t,r,n,e);if(Rdt(e,r))return await Ddt(e,t,r,n,jE);if(e.parseText&&typeof t=="string")return await e.parseText(t,r,n,e);if(e.parse)return await e.parse(t,r,n,e);throw ca(!e.parseSync),new Error("".concat(e.id," loader - no parser found and worker is disabled"))}async function Qm(e,t,r,n){!Array.isArray(t)&&!UE(t)&&(r=t,t=void 0);const i=M$(r);let o=e;return typeof e=="string"&&(o=await i(e)),_f(e)&&(o=await i(e)),await jE(o,t,r)}const npt="3.2.7",{_parseImageNode:ipt}=globalThis,O3=typeof Image<"u",R3=typeof ImageBitmap<"u",opt=Boolean(ipt),D3=VE?!0:opt;function apt(e){switch(e){case"auto":return R3||O3||D3;case"imagebitmap":return R3;case"image":return O3;case"data":return D3;default:throw new Error("@loaders.gl/images: image ".concat(e," not supported in this environment"))}}function spt(){if(R3)return"imagebitmap";if(O3)return"image";if(D3)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function lpt(e){const t=cpt(e);if(!t)throw new Error("Not an image");return t}function upt(e){switch(lpt(e)){case"data":return e;case"image":case"imagebitmap":const t=document.createElement("canvas"),r=t.getContext("2d");if(!r)throw new Error("getImageData");return t.width=e.width,t.height=e.height,r.drawImage(e,0,0),r.getImageData(0,0,e.width,e.height);default:throw new Error("getImageData")}}function cpt(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&e instanceof Image?"image":e&&typeof e=="object"&&e.data&&e.width&&e.height?"data":null}const fpt=/^data:image\/svg\+xml/,hpt=/\.svg((\?|#).*)?$/;function WE(e){return e&&(fpt.test(e)||hpt.test(e))}function dpt(e,t){if(WE(t)){let n=new TextDecoder().decode(e);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(n=unescape(encodeURIComponent(n)))}catch(o){throw new Error(o.message)}return"data:image/svg+xml;base64,".concat(btoa(n))}return R$(e,t)}function R$(e,t){if(WE(t))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(e)])}async function D$(e,t,r){const n=dpt(e,r),i=self.URL||self.webkitURL,o=typeof n!="string"&&i.createObjectURL(n);try{return await ppt(o||n,t)}finally{o&&i.revokeObjectURL(o)}}async function ppt(e,t){const r=new Image;return r.src=e,t.image&&t.image.decode&&r.decode?(await r.decode(),r):await new Promise((n,i)=>{try{r.onload=()=>n(r),r.onerror=o=>i(new Error("Could not load image ".concat(e,": ").concat(o)))}catch(o){i(o)}})}const vpt={};let xx=!0;async function gpt(e,t,r){let n;WE(r)?n=await D$(e,t,r):n=R$(e,r);const i=t&&t.imagebitmap;return await mpt(n,i)}async function mpt(e,t=null){if((ypt(t)||!xx)&&(t=null),t)try{return await createImageBitmap(e,t)}catch(r){console.warn(r),xx=!1}return await createImageBitmap(e)}function ypt(e){for(const t in e||vpt)return!1;return!0}const co=!1,Ed=!0;function N$(e){const t=z0(e);return _pt(t)||Spt(t)||bpt(t)||wpt(t)}function _pt(e){const t=z0(e);return t.byteLength>=24&&t.getUint32(0,co)===2303741511?{mimeType:"image/png",width:t.getUint32(16,co),height:t.getUint32(20,co)}:null}function bpt(e){const t=z0(e);return t.byteLength>=10&&t.getUint32(0,co)===1195984440?{mimeType:"image/gif",width:t.getUint16(6,Ed),height:t.getUint16(8,Ed)}:null}function wpt(e){const t=z0(e);return t.byteLength>=14&&t.getUint16(0,co)===16973&&t.getUint32(2,Ed)===t.byteLength?{mimeType:"image/bmp",width:t.getUint32(18,Ed),height:t.getUint32(22,Ed)}:null}function Spt(e){const t=z0(e);if(!(t.byteLength>=3&&t.getUint16(0,co)===65496&&t.getUint8(2)===255))return null;const{tableMarkers:n,sofMarkers:i}=Tpt();let o=2;for(;o+9<t.byteLength;){const a=t.getUint16(o,co);if(i.has(a))return{mimeType:"image/jpeg",height:t.getUint16(o+5,co),width:t.getUint16(o+7,co)};if(!n.has(a))return null;o+=2,o+=t.getUint16(o,co)}return null}function Tpt(){const e=new Set([65499,65476,65484,65501,65534]);for(let r=65504;r<65520;++r)e.add(r);return{tableMarkers:e,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function z0(e){if(e instanceof DataView)return e;if(ArrayBuffer.isView(e))return new DataView(e.buffer);if(e instanceof ArrayBuffer)return new DataView(e);throw new Error("toDataView")}async function Ppt(e,t){const{mimeType:r}=N$(e)||{},n=globalThis._parseImageNode;return Zm(n),await n(e,r)}async function Ept(e,t,r){t=t||{};const i=(t.image||{}).type||"auto",{url:o}=r||{},a=Apt(i);let s;switch(a){case"imagebitmap":s=await gpt(e,t,o);break;case"image":s=await D$(e,t,o);break;case"data":s=await Ppt(e);break;default:Zm(!1)}return i==="data"&&(s=upt(s)),s}function Apt(e){switch(e){case"auto":case"data":return spt();default:return apt(e),e}}const Cpt=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],Mpt=["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],kpt={image:{type:"auto",decode:!0}},F$={id:"image",module:"images",name:"Images",version:npt,mimeTypes:Mpt,extensions:Cpt,parse:Ept,tests:[e=>Boolean(N$(new DataView(e)))],options:kpt},Wt=new $0({id:"deck"});let N3={};function xpt(e){N3=e}function Lr(e,t,r,n){Wt.level>0&&N3[e]&&N3[e].call(null,t,r,n)}function Lpt(e){const t=e[0],r=e[e.length-1];return t==="{"&&r==="}"||t==="["&&r==="]"}const Ipt={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:Lpt,parseTextSync:JSON.parse},Ad="8.8.8",Xg=globalThis.deck&&globalThis.deck.VERSION;if(Xg&&Xg!==Ad)throw new Error("deck.gl - multiple versions detected: ".concat(Xg," vs ").concat(Ad));Xg||(Wt.log(1,"deck.gl ".concat(Ad))(),globalThis.deck={...globalThis.deck,VERSION:Ad,version:Ad,log:Wt,_registerLoggers:xpt},L0t([Ipt,[F$,{imagebitmap:{premultiplyAlpha:"none"}}]]));const Opt=globalThis.deck,Lt=new $0({id:"luma.gl"});function Wr(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}const Rpt="Invalid WebGLRenderingContext",Dpt="Requires WebGL2";function yy(e){return typeof WebGLRenderingContext<"u"&&e instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:Boolean(e&&Number.isFinite(e._version))}function Qt(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:Boolean(e&&e._version===2)}function Npt(e){return Qt(e)?e:null}function _y(e){return Wr(yy(e),Rpt),e}function Or(e){return Wr(Qt(e),Dpt),e}const Kh={};function Fpt(e){globalThis.console&&globalThis.console.error&&globalThis.console.error(e)}function Bpt(e){globalThis.console&&globalThis.console.log&&globalThis.console.log(e)}function $pt(e,t){Kh[e]=!0,t!==void 0&&Fpt(t)}function zpt(e){const t=e.getError;e.getError=function(){let n;do n=t.apply(e),n!==0&&(Kh[n]=!0);while(n!==0);for(n in Kh)if(Kh[n])return delete Kh[n],parseInt(n,10);return 0}}const V0=function e(t){const r=t.gl;this.ext=t,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(t.maxVertexAttribs);for(let n=0;n<this.attribs.length;n++){const i=new e.VertexAttrib(r);this.attribs[n]=i}this.maxAttrib=0};V0.VertexAttrib=function(t){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};V0.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const du=function(t){const r=this;this.gl=t,zpt(t);const n=this.original={getParameter:t.getParameter,enableVertexAttribArray:t.enableVertexAttribArray,disableVertexAttribArray:t.disableVertexAttribArray,bindBuffer:t.bindBuffer,getVertexAttrib:t.getVertexAttrib,vertexAttribPointer:t.vertexAttribPointer};t.getParameter=function(o){return o===r.VERTEX_ARRAY_BINDING_OES?r.currentVertexArrayObject===r.defaultVertexArrayObject?null:r.currentVertexArrayObject:n.getParameter.apply(this,arguments)},t.enableVertexAttribArray=function(o){const a=r.currentVertexArrayObject;a.maxAttrib=Math.max(a.maxAttrib,o);const s=a.attribs[o];return s.enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},t.disableVertexAttribArray=function(o){const a=r.currentVertexArrayObject;a.maxAttrib=Math.max(a.maxAttrib,o);const s=a.attribs[o];return s.enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},t.bindBuffer=function(o,a){switch(o){case 34962:r.currentArrayBuffer=a;break;case 34963:r.currentVertexArrayObject.elementArrayBuffer=a;break}return n.bindBuffer.apply(this,arguments)},t.getVertexAttrib=function(o,a){const l=r.currentVertexArrayObject.attribs[o];switch(a){case 34975:return l.buffer;case 34338:return l.enabled;case 34339:return l.size;case 34340:return l.stride;case 34341:return l.type;case 34922:return l.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},t.vertexAttribPointer=function(o,a,s,l,u,c){const f=r.currentVertexArrayObject;f.maxAttrib=Math.max(f.maxAttrib,o);const h=f.attribs[o];return h.buffer=r.currentArrayBuffer,h.size=a,h.type=s,h.normalized=l,h.stride=u,h.offset=c,h.recache(),n.vertexAttribPointer.apply(this,arguments)},t.instrumentExtension&&t.instrumentExtension(this,"OES_vertex_array_object"),t.canvas&&t.canvas.addEventListener("webglcontextrestored",()=>{Bpt("OESVertexArrayObject emulation library context restored"),r.reset_()},!0),this.reset_()};du.prototype.VERTEX_ARRAY_BINDING_OES=34229;du.prototype.reset_=function(){if(this.vertexArrayObjects!==void 0)for(let n=0;n<this.vertexArrayObjects.length;++n)this.vertexArrayObjects.isAlive=!1;const r=this.gl;this.maxVertexAttribs=r.getParameter(34921),this.defaultVertexArrayObject=new V0(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};du.prototype.createVertexArrayOES=function(){const t=new V0(this);return this.vertexArrayObjects.push(t),t};du.prototype.deleteVertexArrayOES=function(t){t.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(t),1),this.currentVertexArrayObject===t&&this.bindVertexArrayOES(null)};du.prototype.isVertexArrayOES=function(t){return!!(t&&t instanceof V0&&t.hasBeenBound&&t.ext===this)};du.prototype.bindVertexArrayOES=function(t){const r=this.gl;if(t&&!t.isAlive){$pt(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}const n=this.original,i=this.currentVertexArrayObject;this.currentVertexArrayObject=t||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const o=this.currentVertexArrayObject;if(i===o)return;(!i||o.elementArrayBuffer!==i.elementArrayBuffer)&&n.bindBuffer.call(r,34963,o.elementArrayBuffer);let a=this.currentArrayBuffer;const s=Math.max(i?i.maxAttrib:0,o.maxAttrib);for(let l=0;l<=s;l++){const u=o.attribs[l],c=i?i.attribs[l]:null;if((!i||u.enabled!==c.enabled)&&(u.enabled?n.enableVertexAttribArray.call(r,l):n.disableVertexAttribArray.call(r,l)),u.enabled){let f=!1;(!i||u.buffer!==c.buffer)&&(a!==u.buffer&&(n.bindBuffer.call(r,34962,u.buffer),a=u.buffer),f=!0),(f||u.cached!==c.cached)&&n.vertexAttribPointer.call(r,l,u.size,u.type,u.normalized,u.stride,u.offset)}}this.currentArrayBuffer!==a&&n.bindBuffer.call(r,34962,this.currentArrayBuffer)};function Vpt(e){if(typeof e.createVertexArray=="function")return;const t=e.getSupportedExtensions;e.getSupportedExtensions=function(){const i=t.call(this)||[];return i.indexOf("OES_vertex_array_object")<0&&i.push("OES_vertex_array_object"),i};const r=e.getExtension;e.getExtension=function(i){const o=r.call(this,i);return o||(i!=="OES_vertex_array_object"?null:(e.__OESVertexArrayObject||(this.__OESVertexArrayObject=new du(this)),this.__OESVertexArrayObject))}}const Lx="OES_element_index",Ix="WEBGL_draw_buffers",Upt="EXT_disjoint_timer_query",Gpt="EXT_disjoint_timer_query_webgl2",jpt="EXT_texture_filter_anisotropic",Ox="WEBGL_debug_renderer_info",Wpt=35723,Hpt=4352,Xpt=36795,Ypt=34047,qpt=37445,Zpt=37446,Re=e=>Qt(e)?void 0:0,Kpt={[3074]:e=>Qt(e)?void 0:36064,[Wpt]:e=>Qt(e)?void 0:Hpt,[35977]:Re,[32937]:Re,[Xpt]:(e,t)=>{const r=Qt(e)?e.getExtension(Gpt):e.getExtension(Upt);return r&&r.GPU_DISJOINT_EXT?t(r.GPU_DISJOINT_EXT):0},[qpt]:(e,t)=>{const r=e.getExtension(Ox);return t(r&&r.UNMASKED_VENDOR_WEBGL||7936)},[Zpt]:(e,t)=>{const r=e.getExtension(Ox);return t(r&&r.UNMASKED_RENDERER_WEBGL||7937)},[Ypt]:(e,t)=>{const r=e.luma.extensions[jpt];return r?t(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},[32883]:Re,[35071]:Re,[37447]:Re,[36063]:(e,t)=>{if(!Qt(e)){const r=e.getExtension(Ix);return r?t(r.MAX_COLOR_ATTACHMENTS_WEBGL):0}},[35379]:Re,[35374]:Re,[35377]:Re,[34852]:e=>{if(!Qt(e)){const t=e.getExtension(Ix);return t?t.MAX_DRAW_BUFFERS_WEBGL:0}},[36203]:e=>e.getExtension(Lx)?2147483647:65535,[33001]:e=>e.getExtension(Lx)?16777216:65535,[33e3]:e=>16777216,[37157]:Re,[35373]:Re,[35657]:Re,[36183]:Re,[37137]:Re,[34045]:Re,[35978]:Re,[35979]:Re,[35968]:Re,[35376]:Re,[35375]:Re,[35659]:Re,[37154]:Re,[35371]:Re,[35658]:Re,[35076]:Re,[35077]:Re,[35380]:Re};function Jpt(e,t,r){const n=Kpt[r],i=typeof n=="function"?n(e,t,r):n;return i!==void 0?i:t(r)}const Qpt="OES_vertex_array_object",B$="ANGLE_instanced_arrays",tvt="WEBGL_draw_buffers",evt="EXT_disjoint_timer_query",rvt="EXT_texture_filter_anisotropic",nvt="VertexArray requires WebGL2 or OES_vertex_array_object extension";function ivt(e,t){return{webgl2:Qt(e),ext:e.getExtension(t)}}const $$={[Qpt]:{meta:{suffix:"OES"},createVertexArray:()=>{Wr(!1,nvt)},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[B$]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(e,t){Wr(t===0,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[tvt]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{Wr(!1)}},[evt]:{meta:{suffix:"EXT"},createQuery:()=>{Wr(!1)},deleteQuery:()=>{Wr(!1)},beginQuery:()=>{Wr(!1)},endQuery:()=>{},getQuery(e,t){return this.getQueryObject(e,t)},getQueryParameter(e,t){return this.getQueryObject(e,t)},getQueryObject:()=>{}}},ib={readBuffer:(e,t,r)=>{Qt(e)&&t(r)},getVertexAttrib:(e,t,r,n)=>{const{webgl2:i,ext:o}=ivt(e,B$);let a;switch(n){case 35069:a=i?void 0:!1;break;case 35070:a=!i&&!o?0:void 0;break}return a!==void 0?a:t(r,n)},getProgramParameter:(e,t,r,n)=>{if(!Qt(e))switch(n){case 35967:return 35981;case 35971:return 0;case 35382:return 0}return t(r,n)},getInternalformatParameter:(e,t,r,n,i)=>{if(!Qt(e))switch(i){case 32937:return new Int32Array([0])}return e.getInternalformatParameter(r,n,i)},getTexParameter(e,t,r,n){switch(n){case 34046:const{extensions:i}=e.luma,o=i[rvt];n=o&&o.TEXTURE_MAX_ANISOTROPY_EXT||34046;break}return t(r,n)},getParameter:Jpt,hint(e,t,r,n){return t(r,n)}};function ovt(e){e.luma=e.luma||{};const{luma:t}=e;return t.polyfilled||(Vpt(e),avt(e),lvt(e,$$),svt(e,{target:t,target2:e}),t.polyfilled=!0),e}globalThis.polyfillContext=ovt;function avt(e){e.luma.extensions={};const t=e.getSupportedExtensions()||[];for(const r of t)e.luma[r]=e.getExtension(r)}function svt(e,t){let{target:r,target2:n}=t;Object.keys(ib).forEach(i=>{if(typeof ib[i]=="function"){const o=e[i]?e[i].bind(e):()=>{},a=ib[i].bind(null,e,o);r[i]=a,n[i]=a}})}function lvt(e,t){for(const r of Object.getOwnPropertyNames(t))r!=="overrides"&&uvt(e,{extension:r,target:e.luma,target2:e})}function uvt(e,t){let{extension:r,target:n,target2:i}=t;const o=$$[r];Wr(o);const{meta:a={}}=o,{suffix:s=""}=a,l=e.getExtension(r);for(const u of Object.keys(o)){const c="".concat(u).concat(s);let f=null;u==="meta"||typeof e[u]=="function"||(l&&typeof l[c]=="function"?f=function(){return l[c](...arguments)}:typeof o[u]=="function"&&(f=o[u].bind(n))),f&&(n[u]=f,i[u]=f)}}const HE={[3042]:!1,[32773]:new Float32Array([0,0,0,0]),[32777]:32774,[34877]:32774,[32969]:1,[32968]:0,[32971]:1,[32970]:0,[3106]:new Float32Array([0,0,0,0]),[3107]:[!0,!0,!0,!0],[2884]:!1,[2885]:1029,[2929]:!1,[2931]:1,[2932]:513,[2928]:new Float32Array([0,1]),[2930]:!0,[3024]:!0,[36006]:null,[2886]:2305,[33170]:4352,[2849]:1,[32823]:!1,[32824]:0,[10752]:0,[32938]:1,[32939]:!1,[3089]:!1,[3088]:new Int32Array([0,0,1024,1024]),[2960]:!1,[2961]:0,[2968]:4294967295,[36005]:4294967295,[2962]:519,[2967]:0,[2963]:4294967295,[34816]:519,[36003]:0,[36004]:4294967295,[2964]:7680,[2965]:7680,[2966]:7680,[34817]:7680,[34818]:7680,[34819]:7680,[2978]:[0,0,1024,1024],[3333]:4,[3317]:4,[37440]:!1,[37441]:!1,[37443]:37444,[35723]:4352,[36010]:null,[35977]:!1,[3330]:0,[3332]:0,[3331]:0,[3314]:0,[32878]:0,[3316]:0,[3315]:0,[32877]:0},Na=(e,t,r)=>t?e.enable(r):e.disable(r),Rx=(e,t,r)=>e.hint(r,t),dn=(e,t,r)=>e.pixelStorei(r,t),cvt=(e,t)=>{const r=Qt(e)?36009:36160;return e.bindFramebuffer(r,t)},fvt=(e,t)=>e.bindFramebuffer(36008,t);function vh(e){return Array.isArray(e)||ArrayBuffer.isView(e)}const hvt={[3042]:Na,[32773]:(e,t)=>e.blendColor(...t),[32777]:"blendEquation",[34877]:"blendEquation",[32969]:"blendFunc",[32968]:"blendFunc",[32971]:"blendFunc",[32970]:"blendFunc",[3106]:(e,t)=>e.clearColor(...t),[3107]:(e,t)=>e.colorMask(...t),[2884]:Na,[2885]:(e,t)=>e.cullFace(t),[2929]:Na,[2931]:(e,t)=>e.clearDepth(t),[2932]:(e,t)=>e.depthFunc(t),[2928]:(e,t)=>e.depthRange(...t),[2930]:(e,t)=>e.depthMask(t),[3024]:Na,[35723]:Rx,[36006]:cvt,[2886]:(e,t)=>e.frontFace(t),[33170]:Rx,[2849]:(e,t)=>e.lineWidth(t),[32823]:Na,[32824]:"polygonOffset",[10752]:"polygonOffset",[35977]:Na,[32938]:"sampleCoverage",[32939]:"sampleCoverage",[3089]:Na,[3088]:(e,t)=>e.scissor(...t),[2960]:Na,[2961]:(e,t)=>e.clearStencil(t),[2968]:(e,t)=>e.stencilMaskSeparate(1028,t),[36005]:(e,t)=>e.stencilMaskSeparate(1029,t),[2962]:"stencilFuncFront",[2967]:"stencilFuncFront",[2963]:"stencilFuncFront",[34816]:"stencilFuncBack",[36003]:"stencilFuncBack",[36004]:"stencilFuncBack",[2964]:"stencilOpFront",[2965]:"stencilOpFront",[2966]:"stencilOpFront",[34817]:"stencilOpBack",[34818]:"stencilOpBack",[34819]:"stencilOpBack",[2978]:(e,t)=>e.viewport(...t),[3333]:dn,[3317]:dn,[37440]:dn,[37441]:dn,[37443]:dn,[3330]:dn,[3332]:dn,[3331]:dn,[36010]:fvt,[3314]:dn,[32878]:dn,[3316]:dn,[3315]:dn,[32877]:dn,framebuffer:(e,t)=>{const r=t&&"handle"in t?t.handle:t;return e.bindFramebuffer(36160,r)},blend:(e,t)=>t?e.enable(3042):e.disable(3042),blendColor:(e,t)=>e.blendColor(...t),blendEquation:(e,t)=>{t=vh(t)?t:[t,t],e.blendEquationSeparate(...t)},blendFunc:(e,t)=>{t=vh(t)&&t.length===2?[...t,...t]:t,e.blendFuncSeparate(...t)},clearColor:(e,t)=>e.clearColor(...t),clearDepth:(e,t)=>e.clearDepth(t),clearStencil:(e,t)=>e.clearStencil(t),colorMask:(e,t)=>e.colorMask(...t),cull:(e,t)=>t?e.enable(2884):e.disable(2884),cullFace:(e,t)=>e.cullFace(t),depthTest:(e,t)=>t?e.enable(2929):e.disable(2929),depthFunc:(e,t)=>e.depthFunc(t),depthMask:(e,t)=>e.depthMask(t),depthRange:(e,t)=>e.depthRange(...t),dither:(e,t)=>t?e.enable(3024):e.disable(3024),derivativeHint:(e,t)=>{e.hint(35723,t)},frontFace:(e,t)=>e.frontFace(t),mipmapHint:(e,t)=>e.hint(33170,t),lineWidth:(e,t)=>e.lineWidth(t),polygonOffsetFill:(e,t)=>t?e.enable(32823):e.disable(32823),polygonOffset:(e,t)=>e.polygonOffset(...t),sampleCoverage:(e,t)=>e.sampleCoverage(...t),scissorTest:(e,t)=>t?e.enable(3089):e.disable(3089),scissor:(e,t)=>e.scissor(...t),stencilTest:(e,t)=>t?e.enable(2960):e.disable(2960),stencilMask:(e,t)=>{t=vh(t)?t:[t,t];const[r,n]=t;e.stencilMaskSeparate(1028,r),e.stencilMaskSeparate(1029,n)},stencilFunc:(e,t)=>{t=vh(t)&&t.length===3?[...t,...t]:t;const[r,n,i,o,a,s]=t;e.stencilFuncSeparate(1028,r,n,i),e.stencilFuncSeparate(1029,o,a,s)},stencilOp:(e,t)=>{t=vh(t)&&t.length===3?[...t,...t]:t;const[r,n,i,o,a,s]=t;e.stencilOpSeparate(1028,r,n,i),e.stencilOpSeparate(1029,o,a,s)},viewport:(e,t)=>e.viewport(...t)};function je(e,t,r){return t[e]!==void 0?t[e]:r[e]}const dvt={blendEquation:(e,t,r)=>e.blendEquationSeparate(je(32777,t,r),je(34877,t,r)),blendFunc:(e,t,r)=>e.blendFuncSeparate(je(32969,t,r),je(32968,t,r),je(32971,t,r),je(32970,t,r)),polygonOffset:(e,t,r)=>e.polygonOffset(je(32824,t,r),je(10752,t,r)),sampleCoverage:(e,t,r)=>e.sampleCoverage(je(32938,t,r),je(32939,t,r)),stencilFuncFront:(e,t,r)=>e.stencilFuncSeparate(1028,je(2962,t,r),je(2967,t,r),je(2963,t,r)),stencilFuncBack:(e,t,r)=>e.stencilFuncSeparate(1029,je(34816,t,r),je(36003,t,r),je(36004,t,r)),stencilOpFront:(e,t,r)=>e.stencilOpSeparate(1028,je(2964,t,r),je(2965,t,r),je(2966,t,r)),stencilOpBack:(e,t,r)=>e.stencilOpSeparate(1029,je(34817,t,r),je(34818,t,r),je(34819,t,r))},Dx={enable:(e,t)=>e({[t]:!0}),disable:(e,t)=>e({[t]:!1}),pixelStorei:(e,t,r)=>e({[t]:r}),hint:(e,t,r)=>e({[t]:r}),bindFramebuffer:(e,t,r)=>{switch(t){case 36160:return e({[36006]:r,[36010]:r});case 36009:return e({[36006]:r});case 36008:return e({[36010]:r});default:return null}},blendColor:(e,t,r,n,i)=>e({[32773]:new Float32Array([t,r,n,i])}),blendEquation:(e,t)=>e({[32777]:t,[34877]:t}),blendEquationSeparate:(e,t,r)=>e({[32777]:t,[34877]:r}),blendFunc:(e,t,r)=>e({[32969]:t,[32968]:r,[32971]:t,[32970]:r}),blendFuncSeparate:(e,t,r,n,i)=>e({[32969]:t,[32968]:r,[32971]:n,[32970]:i}),clearColor:(e,t,r,n,i)=>e({[3106]:new Float32Array([t,r,n,i])}),clearDepth:(e,t)=>e({[2931]:t}),clearStencil:(e,t)=>e({[2961]:t}),colorMask:(e,t,r,n,i)=>e({[3107]:[t,r,n,i]}),cullFace:(e,t)=>e({[2885]:t}),depthFunc:(e,t)=>e({[2932]:t}),depthRange:(e,t,r)=>e({[2928]:new Float32Array([t,r])}),depthMask:(e,t)=>e({[2930]:t}),frontFace:(e,t)=>e({[2886]:t}),lineWidth:(e,t)=>e({[2849]:t}),polygonOffset:(e,t,r)=>e({[32824]:t,[10752]:r}),sampleCoverage:(e,t,r)=>e({[32938]:t,[32939]:r}),scissor:(e,t,r,n,i)=>e({[3088]:new Int32Array([t,r,n,i])}),stencilMask:(e,t)=>e({[2968]:t,[36005]:t}),stencilMaskSeparate:(e,t,r)=>e({[t===1028?2968:36005]:r}),stencilFunc:(e,t,r,n)=>e({[2962]:t,[2967]:r,[2963]:n,[34816]:t,[36003]:r,[36004]:n}),stencilFuncSeparate:(e,t,r,n,i)=>e({[t===1028?2962:34816]:r,[t===1028?2967:36003]:n,[t===1028?2963:36004]:i}),stencilOp:(e,t,r,n)=>e({[2964]:t,[2965]:r,[2966]:n,[34817]:t,[34818]:r,[34819]:n}),stencilOpSeparate:(e,t,r,n,i)=>e({[t===1028?2964:34817]:r,[t===1028?2965:34818]:n,[t===1028?2966:34819]:i}),viewport:(e,t,r,n,i)=>e({[2978]:[t,r,n,i]})},qi=(e,t)=>e.isEnabled(t),Nx={[3042]:qi,[2884]:qi,[2929]:qi,[3024]:qi,[32823]:qi,[32926]:qi,[32928]:qi,[3089]:qi,[2960]:qi,[35977]:qi};function z$(e){for(const t in e)return!1;return!0}function pvt(e,t){if(e===t)return!0;const r=Array.isArray(e)||ArrayBuffer.isView(e),n=Array.isArray(t)||ArrayBuffer.isView(t);if(r&&n&&e.length===t.length){for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}return!1}function Fx(e,t){const r=e[t].bind(e);e[t]=function(){const i=arguments.length<=0?void 0:arguments[0];return i in e.state.cache?e.state.enable?e.state.cache[i]:r(...arguments):r(...arguments)},Object.defineProperty(e[t],"name",{value:"".concat(t,"-from-cache"),configurable:!1})}function vvt(e,t,r){const n=e[t].bind(e);e[t]=function(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];const{valueChanged:l,oldValue:u}=r(e.state._updateCache,...a);return l&&n(...a),u},Object.defineProperty(e[t],"name",{value:"".concat(t,"-to-cache"),configurable:!1})}function gvt(e){const t=e.useProgram.bind(e);e.useProgram=function(n){e.state.program!==n&&(t(n),e.state.program=n)}}class mvt{constructor(t){let{copyState:r=!1,log:n=()=>{}}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.program=null,this.stateStack=[],this.enable=!0,this.cache=r?_vt(t):Object.assign({},HE),this.log=n,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){Wr(this.stateStack.length>0);const t=this.stateStack[this.stateStack.length-1];fa(this.gl,t),this.stateStack.pop()}_updateCache(t){let r=!1,n;const i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const o in t){Wr(o!==void 0);const a=t[o],s=this.cache[o];pvt(a,s)||(r=!0,n=s,i&&!(o in i)&&(i[o]=s),this.cache[o]=a)}return{valueChanged:r,oldValue:n}}}function V$(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{enable:r=!0,copyState:n}=t;if(Wr(n!==void 0),!e.state){const{polyfillContext:i}=globalThis;i&&i(e),e.state=new mvt(e,{copyState:n}),gvt(e);for(const o in Dx){const a=Dx[o];vvt(e,o,a)}Fx(e,"getParameter"),Fx(e,"isEnabled")}return e.state.enable=r,e}function yvt(e){e.state||V$(e,{copyState:!1}),e.state.push()}function Bx(e){Wr(e.state),e.state.pop()}function fa(e,t){if(Wr(yy(e),"setParameters requires a WebGL context"),z$(t))return;const r={};for(const i in t){const o=Number(i),a=hvt[i];a&&(typeof a=="string"?r[a]=!0:a(e,t[i],o))}const n=e.state&&e.state.cache;if(n)for(const i in r){const o=dvt[i];o(e,t,n)}}function _vt(e,t){if(t=t||HE,typeof t=="number"){const i=t,o=Nx[i];return o?o(e,i):e.getParameter(i)}const r=Array.isArray(t)?t:Object.keys(t),n={};for(const i of r){const o=Nx[i];n[i]=o?o(e,Number(i)):e.getParameter(Number(i))}return n}function bvt(e){fa(e,HE)}function Zn(e,t,r){if(z$(t))return r(e);const{nocatch:n=!0}=t;yvt(e),fa(e,t);let i;if(n)i=r(e),Bx(e);else try{i=r(e)}finally{Bx(e)}return i}function Xc(e){const{luma:t}=e;if(e.canvas&&t){const{clientWidth:r}=t.canvasSizeInfo;return r?e.drawingBufferWidth/r:1}return 1}function ob(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const n=Xc(e),i=e.drawingBufferWidth,o=e.drawingBufferHeight;return Svt(t,n,i,o,r)}function wvt(e){const t=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(e)?e<=0?1:e:e?t:1}function Svt(e,t,r,n,i){const o=$x(e[0],t,r);let a=zx(e[1],t,n,i),s=$x(e[0]+1,t,r);const l=s===r-1?s:s-1;s=zx(e[1]+1,t,n,i);let u;return i?(s=s===0?s:s+1,u=a,a=s):u=s===n-1?s:s-1,{x:o,y:a,width:Math.max(l-o+1,1),height:Math.max(u-a+1,1)}}function $x(e,t,r){return Math.min(Math.round(e*t),r-1)}function zx(e,t,r,n){return n?Math.max(0,r-1-Math.round(e*t)):Math.min(Math.round(e*t),r-1)}const XE=wa(),Tvt=XE&&typeof document<"u",U$={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function G$(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Wr(XE,`createGLContext only available in the browser.
Create your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils`),e=Object.assign({},U$,e);const{width:t,height:r}=e;function n(s){if(e.throwOnError)throw new Error(s);return console.error(s),null}e.onError=n;let i;const{canvas:o}=e,a=Cvt({canvas:o,width:t,height:r,onError:n});return i=Avt(a,e),i?(i=YE(i,e),Mvt(i),i):null}function YE(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e||e._instrumented)return e;e._version=e._version||kvt(e),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{},t=Object.assign({},U$,t);const{manageState:r,debug:n}=t;return r&&V$(e,{copyState:!1,log:function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return Lt.log(1,...o)()}}),XE&&n&&(globalThis.makeDebugContext?(e=globalThis.makeDebugContext(e,t),Lt.level=Math.max(Lt.level,1)):Lt.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),e._instrumented=!0,e}function Pvt(e){const t=e.getParameter(7936),r=e.getParameter(7937),n=e.getExtension("WEBGL_debug_renderer_info"),i=n&&e.getParameter(n.UNMASKED_VENDOR_WEBGL||7936),o=n&&e.getParameter(n.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||t,renderer:o||r,vendorMasked:t,rendererMasked:r,version:e.getParameter(7938),shadingLanguageVersion:e.getParameter(35724)}}function Evt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e.canvas){const n=wvt(t.useDevicePixels);xvt(e,n,t);return}const r=e.getExtension("STACKGL_resize_drawingbuffer");r&&"width"in t&&"height"in t&&r.resize(t.width,t.height)}function Avt(e,t){const{onError:r}=t;let n=null;const i=l=>n=l.statusMessage||n;e.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:o=!0,webgl2:a=!0}=t;let s=null;return a&&(s=s||e.getContext("webgl2",t),s=s||e.getContext("experimental-webgl2",t)),o&&(s=s||e.getContext("webgl",t),s=s||e.getContext("experimental-webgl",t)),e.removeEventListener("webglcontextcreationerror",i,!1),s?(t.onContextLost&&e.addEventListener("webglcontextlost",t.onContextLost,!1),t.onContextRestored&&e.addEventListener("webglcontextrestored",t.onContextRestored,!1),s):r("Failed to create ".concat(a&&!o?"WebGL2":"WebGL"," context: ").concat(n||"Unknown error"))}function Cvt(e){let{canvas:t,width:r=800,height:n=600,onError:i}=e,o;return typeof t=="string"?(Tvt&&document.readyState==="complete"||i("createGLContext called on canvas '".concat(t,"' before page was loaded")),o=document.getElementById(t)):t?o=t:(o=document.createElement("canvas"),o.id="lumagl-canvas",o.style.width=Number.isFinite(r)?"".concat(r,"px"):"100%",o.style.height=Number.isFinite(n)?"".concat(n,"px"):"100%",document.body.insertBefore(o,document.body.firstChild)),o}function Mvt(e){const t=Qt(e)?"WebGL2":"WebGL1",r=Pvt(e),n=r?"(".concat(r.vendor,",").concat(r.renderer,")"):"",i=e.debug?" debug":"";Lt.info(1,"".concat(t).concat(i," context ").concat(n))()}function kvt(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?2:1}function xvt(e,t,r){let n="width"in r?r.width:e.canvas.clientWidth,i="height"in r?r.height:e.canvas.clientHeight;(!n||!i)&&(Lt.log(1,"Canvas clientWidth/clientHeight is 0")(),t=1,n=e.canvas.width||1,i=e.canvas.height||1),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{};const o=e.luma.canvasSizeInfo;if(o.clientWidth!==n||o.clientHeight!==i||o.devicePixelRatio!==t){let a=t;const s=Math.floor(n*a),l=Math.floor(i*a);e.canvas.width=s,e.canvas.height=l,(e.drawingBufferWidth!==s||e.drawingBufferHeight!==l)&&(Lt.warn("Device pixel ratio clamped")(),a=Math.min(e.drawingBufferWidth/n,e.drawingBufferHeight/i),e.canvas.width=Math.floor(n*a),e.canvas.height=Math.floor(i*a)),Object.assign(e.luma.canvasSizeInfo,{clientWidth:n,clientHeight:i,devicePixelRatio:t})}}const Cd="8.5.16",Lvt="set luma.log.level=1 (or higher) to trace rendering";class j${constructor(){this.stats=new Map}get(t){return this.stats.has(t)||this.stats.set(t,new gy({id:t})),this.stats.get(t)}}const kl=new j$;if(globalThis.luma&&globalThis.luma.VERSION!==Cd)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(Cd));globalThis.luma||(wa()&&Lt.log(1,"luma.gl ".concat(Cd," - ").concat(Lvt))(),globalThis.luma=globalThis.luma||{VERSION:Cd,version:Cd,log:Lt,stats:kl,globals:{modules:{},nodeIO:{}}});function Ivt(e){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60)}function Ovt(e){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e)}function gt(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}function ab(e,t){if(typeof t!="string")return t;const r=Number(t);if(!isNaN(r))return r;t=t.replace(/^.*\./,"");const n=e[t];return gt(n!==void 0,"Accessing undefined constant GL.".concat(t)),n}function gs(e,t){t=Number(t);for(const r in e)if(e[r]===t)return"GL.".concat(r);return String(t)}const sb={};function Cs(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"id";sb[e]=sb[e]||1;const t=sb[e]++;return"".concat(e,"-").concat(t)}function Vx(e){return gt(typeof e=="number","Input must be a number"),e&&(e&e-1)===0}function Yc(e){let t=!0;for(const r in e){t=!1;break}return t}function W$(e,t,r,n){const i="See luma.gl ".concat(r," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(e);n.forEach(a=>{o.methodName||(o[a]=()=>{throw Lt.removed("Calling removed method ".concat(t,".").concat(a,": "),i)(),new Error(a)})})}const Wu="Resource subclass must define virtual methods";class Sa{get[Symbol.toStringTag](){return"Resource"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};_y(t);const{id:n,userData:i={}}=r;this.gl=t,this.gl2=t,this.id=n||Cs(this[Symbol.toStringTag]),this.userData=i,this._bound=!1,this._handle=r.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._initStats(),this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,r&&t&&r.filter(Boolean).forEach(n=>n.delete()),this}bind(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.handle;if(typeof t!="function")return this._bindHandle(t),this;let r;return this._bound?r=t():(this._bindHandle(this.handle),this._bound=!0,r=t(),this._bound=!1,this._bindHandle(null)),r}unbind(){this.bind(null)}getParameter(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t=ab(this.gl,t),gt(t);const i=(this.constructor.PARAMETERS||{})[t];if(i){const o=Qt(this.gl);if(!((!("webgl2"in i)||o)&&(!("extension"in i)||this.gl.getExtension(i.extension)))){const s=i.webgl1,l="webgl2"in i?i.webgl2:i.webgl1;return o?l:s}}return this._getParameter(t,r)}getParameters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{parameters:r,keys:n}=t,i=this.constructor.PARAMETERS||{},o=Qt(this.gl),a={},s=r||Object.keys(i);for(const l of s){const u=i[l];if(u&&(!("webgl2"in u)||o)&&(!("extension"in u)||this.gl.getExtension(u.extension))){const f=n?gs(this.gl,l):l;a[f]=this.getParameter(l,t),n&&u.type==="GLenum"&&(a[f]=gs(this.gl,a[f]))}}return a}setParameter(t,r){t=ab(this.gl,t),gt(t);const i=(this.constructor.PARAMETERS||{})[t];if(i){const o=Qt(this.gl);if(!((!("webgl2"in i)||o)&&(!("extension"in i)||this.gl.getExtension(i.extension))))throw new Error("Parameter not available on this platform");i.type==="GLenum"&&(r=ab(r))}return this._setParameter(t,r),this}setParameters(t){for(const r in t)this.setParameter(r,t[r]);return this}stubRemovedMethods(t,r,n){return W$(this,t,r,n)}initialize(t){}_createHandle(){throw new Error(Wu)}_deleteHandle(){throw new Error(Wu)}_bindHandle(t){throw new Error(Wu)}_getOptsFromHandle(){throw new Error(Wu)}_getParameter(t,r){throw new Error(Wu)}_setParameter(t,r){throw new Error(Wu)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_initStats(){this.gl.stats=this.gl.stats||new j$}_addStats(){const t=this[Symbol.toStringTag],r=kl.get("Resource Counts");r.get("Resources Created").incrementCount(),r.get("".concat(t,"s Created")).incrementCount(),r.get("".concat(t,"s Active")).incrementCount()}_removeStats(){const t=this[Symbol.toStringTag];kl.get("Resource Counts").get("".concat(t,"s Active")).decrementCount()}_trackAllocatedMemory(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag];this._doTrackAllocatedMemory(t,r),this._doTrackAllocatedMemory(t,r,this.gl.stats.get("Memory Usage"))}_doTrackAllocatedMemory(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:kl.get("Memory Usage");n.get("GPU Memory").addCount(t),n.get("".concat(r," Memory")).addCount(t),this.byteLength=t}_trackDeallocatedMemory(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag];this._doTrackDeallocatedMemory(t),this._doTrackDeallocatedMemory(t,this.gl.stats.get("Memory Usage"))}_doTrackDeallocatedMemory(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:kl.get("Memory Usage");r.get("GPU Memory").subtractCount(this.byteLength),r.get("".concat(t," Memory")).subtractCount(this.byteLength),this.byteLength=0}}const Rvt="Failed to deduce GL constant from typed array";function F3(e){switch(ArrayBuffer.isView(e)?e.constructor:e){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(Rvt)}}function a0(e){let{clamped:t=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(e){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return t?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function Dvt(e){let{data:t,width:r,height:n,bytesPerPixel:i=4,temp:o}=e;const a=r*i;o=o||new Uint8Array(a);for(let s=0;s<n/2;++s){const l=s*a,u=(n-s-1)*a;o.set(t.subarray(l,l+a)),t.copyWithin(l,u,u+a),t.set(o,u)}}function Nvt(e){let{data:t,width:r,height:n}=e;const i=Math.round(r/2),o=Math.round(n/2),a=new Uint8Array(i*o*4);for(let s=0;s<o;s++)for(let l=0;l<i;l++)for(let u=0;u<4;u++)a[(s*i+l)*4+u]=t[(s*2*r+l*2)*4+u];return{data:a,width:i,height:o}}function B3(e,t,r){const{removedProps:n={},deprecatedProps:i={},replacedProps:o={}}=r;for(const s in n)if(s in t){const u=n[s]?"".concat(e,".").concat(n[s]):"N/A";Lt.removed("".concat(e,".").concat(s),u)()}for(const s in i)if(s in t){const l=i[s];Lt.deprecated("".concat(e,".").concat(s),"".concat(e,".").concat(l))()}let a=null;for(const s in o)if(s in t){const l=o[s];Lt.deprecated("".concat(e,".").concat(s),"".concat(e,".").concat(l))(),a=a||Object.assign({},t),a[l]=t[s],delete a[s]}return a||t}const Fvt={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},Bvt={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class mn{static getBytesPerElement(t){return a0(t.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(t){return gt(t.size),a0(t.type||5126).BYTES_PER_ELEMENT*t.size}static resolve(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return new mn(Fvt,...r)}constructor(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];r.forEach(i=>this._assign(i)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return mn.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return mn.getBytesPerVertex(this)}_assign(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t=B3("Accessor",t,Bvt),t.type!==void 0&&(this.type=t.type,(t.type===5124||t.type===5125)&&(this.integer=!0)),t.size!==void 0&&(this.size=t.size),t.offset!==void 0&&(this.offset=t.offset),t.stride!==void 0&&(this.stride=t.stride),t.normalized!==void 0&&(this.normalized=t.normalized),t.integer!==void 0&&(this.integer=t.integer),t.divisor!==void 0&&(this.divisor=t.divisor),t.buffer!==void 0&&(this.buffer=t.buffer),t.index!==void 0&&(typeof t.index=="boolean"?this.index=t.index?1:0:this.index=t.index),t.instanced!==void 0&&(this.divisor=t.instanced?1:0),t.isInstanced!==void 0&&(this.divisor=t.isInstanced?1:0),this}}const Ux=10,H$={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},$vt={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:H$},zvt={removedProps:H$};class Pe extends Sa{get[Symbol.toStringTag](){return"Buffer"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=r.target||(this.gl.webgl2?36662:34962),this.initialize(r),Object.seal(this)}getElementCount(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/mn.getBytesPerElement(t))}getVertexCount(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/mn.getBytesPerVertex(t))}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ArrayBuffer.isView(t)&&(t={data:t}),Number.isFinite(t)&&(t={byteLength:t}),t=B3("Buffer",t,$vt),this.usage=t.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},t,t.accessor)),t.data?this._setData(t.data,t.offset,t.byteLength):this._setByteLength(t.byteLength||0),this}setProps(t){return t=B3("Buffer",t,zvt),"accessor"in t&&this.setAccessor(t.accessor),this}setAccessor(t){return t=Object.assign({},t),delete t.buffer,this.accessor=new mn(t),this}reallocate(t){return t>this.byteLength?(this._setByteLength(t),!0):(this.bytesUsed=t,!1)}setData(t){return this.initialize(t)}subData(t){ArrayBuffer.isView(t)&&(t={data:t});const{data:r,offset:n=0,srcOffset:i=0}=t,o=t.byteLength||t.length;gt(r);const a=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(a,this.handle),i!==0||o!==void 0?(Or(this.gl),this.gl.bufferSubData(this.target,n,r,i,o)):this.gl.bufferSubData(a,n,r),this.gl.bindBuffer(a,null),this.debugData=null,this._inferType(r),this}copyData(t){let{sourceBuffer:r,readOffset:n=0,writeOffset:i=0,size:o}=t;const{gl:a}=this;return Or(a),a.bindBuffer(36662,r.handle),a.bindBuffer(36663,this.handle),a.copyBufferSubData(36662,36663,n,i,o),a.bindBuffer(36662,null),a.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:t=null,srcByteOffset:r=0,dstOffset:n=0,length:i=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Or(this.gl);const o=a0(this.accessor.type||5126,{clamped:!1}),a=this._getAvailableElementCount(r),s=n;let l,u;t?(u=t.length,l=u-s):(l=Math.min(a,i||a),u=s+l);const c=Math.min(a,l);return i=i||c,gt(i<=c),t=t||new o(u),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,r,t,n,i),this.gl.bindBuffer(36662,null),t}bind(){let{target:t=this.target,index:r=this.accessor&&this.accessor.index,offset:n=0,size:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t===35345||t===35982?i!==void 0?this.gl.bindBufferRange(t,r,this.handle,n,i):(gt(n===0),this.gl.bindBufferBase(t,r,this.handle)):this.gl.bindBuffer(t,this.handle),this}unbind(){let{target:t=this.target,index:r=this.accessor&&this.accessor.index}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t===35345||t===35982?this.gl.bindBufferBase(t,r,null):this.gl.bindBuffer(t,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(Ux,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.byteLength+r;gt(ArrayBuffer.isView(t)),this._trackDeallocatedMemory();const i=this._getTarget();this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,n,this.usage),this.gl.bufferSubData(i,r,t),this.gl.bindBuffer(i,null),this.debugData=t.slice(0,Ux),this.bytesUsed=n,this._trackAllocatedMemory(n);const o=F3(t);return gt(o),this.setAccessor(new mn(this.accessor,{type:o})),this}_setByteLength(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.usage;gt(t>=0),this._trackDeallocatedMemory();let n=t;t===0&&(n=new Float32Array(0));const i=this._getTarget();return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,n,r),this.gl.bindBuffer(i,null),this.usage=r,this.debugData=null,this.bytesUsed=t,this._trackAllocatedMemory(t),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(t){const r=a0(this.accessor.type||5126,{clamped:!1}),n=t/r.BYTES_PER_ELEMENT;return this.getElementCount()-n}_inferType(t){this.accessor.type||this.setAccessor(new mn(this.accessor,{type:F3(t)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(t){this.gl.bindBuffer(this.target,this.handle);const r=this.gl.getBufferParameter(this.target,t);return this.gl.bindBuffer(this.target,null),r}get type(){return Lt.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return Lt.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(t){return Lt.deprecated("setByteLength","reallocate")(),this.reallocate(t)}updateAccessor(t){return Lt.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new mn(this.accessor,t),this}}const qE={[6407]:{dataFormat:6407,types:[5121,33635]},[6408]:{dataFormat:6408,types:[5121,32819,32820]},[6406]:{dataFormat:6406,types:[5121]},[6409]:{dataFormat:6409,types:[5121]},[6410]:{dataFormat:6410,types:[5121]},[33326]:{dataFormat:6403,types:[5126],gl2:!0},[33328]:{dataFormat:33319,types:[5126],gl2:!0},[34837]:{dataFormat:6407,types:[5126],gl2:!0},[34836]:{dataFormat:6408,types:[5126],gl2:!0}},X$={[6403]:1,[36244]:1,[33319]:2,[33320]:2,[6407]:3,[36248]:3,[6408]:4,[36249]:4,[6402]:1,[34041]:1,[6406]:1,[6409]:1,[6410]:2},Y$={[5126]:4,[5125]:4,[5124]:4,[5123]:2,[5122]:2,[5131]:2,[5120]:1,[5121]:1};function Vvt(e,t){const r=qE[t];if(!r)return!1;if(r.gl1===void 0&&r.gl2===void 0)return!0;const n=Qt(e)&&r.gl2||r.gl1;return typeof n=="string"?e.getExtension(n):n}function Uvt(e,t){const r=qE[t];switch(r&&r.types[0]){case 5126:return e.getExtension("OES_texture_float_linear");case 5131:return e.getExtension("OES_texture_half_float_linear");default:return!0}}const Gvt=[9729,9728],Gx=globalThis.WebGLBuffer||function(){};class Ql extends Sa{get[Symbol.toStringTag](){return"Texture"}static isSupported(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{format:n,linearFiltering:i}=r;let o=!0;return n&&(o=o&&Vvt(t,n),o=o&&(!i||Uvt(t,n))),o}constructor(t,r){const{id:n=Cs("texture"),handle:i,target:o}=r;super(t,{id:n,handle:i}),this.target=o,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.data;if(r instanceof Promise)return r.then(y=>this.initialize(Object.assign({},t,{pixels:y,data:y}))),this;const n=typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement;if(n&&r.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,r.addEventListener("loadeddata",()=>this.initialize(t)),this;const{pixels:i=null,format:o=6408,border:a=0,recreate:s=!1,parameters:l={},pixelStore:u={},textureUnit:c=void 0}=t;r||(r=i);let{width:f,height:h,dataFormat:d,type:p,compressed:v=!1,mipmaps:g=!0}=t;const{depth:m=0}=t;return{width:f,height:h,compressed:v,dataFormat:d,type:p}=this._deduceParameters({format:o,type:p,dataFormat:d,compressed:v,data:r,width:f,height:h}),this.width=f,this.height=h,this.depth=m,this.format=o,this.type=p,this.dataFormat=d,this.border=a,this.textureUnit=c,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),g&&this._isNPOT()&&(Lt.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),g=!1,this._updateForNPOT(l)),this.mipmaps=g,this.setImageData({data:r,width:f,height:h,depth:m,format:o,type:p,dataFormat:d,border:a,mipmaps:g,parameters:u,compressed:v}),g&&this.generateMipmap(),this.setParameters(l),s&&(this.data=r),n&&(this._video={video:r,parameters:l,lastTime:r.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?r.currentTime:-1}),this}update(){if(this._video){const{video:t,parameters:r,lastTime:n}=this._video;if(n===t.currentTime||t.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:t,parameters:r}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=t.currentTime}}resize(t){let{height:r,width:n,mipmaps:i=!1}=t;return n!==this.width||r!==this.height?this.initialize({width:n,height:r,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}generateMipmap(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isNPOT()?(Lt.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Zn(this.gl,t,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(t){this._trackDeallocatedMemory("Texture");const{target:r=this.target,pixels:n=null,level:i=0,format:o=this.format,border:a=this.border,offset:s=0,parameters:l={}}=t;let{data:u=null,type:c=this.type,width:f=this.width,height:h=this.height,dataFormat:d=this.dataFormat,compressed:p=!1}=t;u||(u=n),{type:c,dataFormat:d,compressed:p,width:f,height:h}=this._deduceParameters({format:o,type:c,dataFormat:d,compressed:p,data:u,width:f,height:h});const{gl:v}=this;v.bindTexture(this.target,this.handle);let g=null;({data:u,dataType:g}=this._getDataType({data:u,compressed:p}));let m,y=0;if(Zn(this.gl,l,()=>{switch(g){case"null":v.texImage2D(r,i,o,f,h,a,d,c,u);break;case"typed-array":v.texImage2D(r,i,o,f,h,a,d,c,u,s);break;case"buffer":m=Or(v),m.bindBuffer(35052,u.handle||u),m.texImage2D(r,i,o,f,h,a,d,c,s),m.bindBuffer(35052,null);break;case"browser-object":Qt(v)?v.texImage2D(r,i,o,f,h,a,d,c,u):v.texImage2D(r,i,o,d,c,u);break;case"compressed":for(const[_,b]of u.entries())v.compressedTexImage2D(r,_,b.format,b.width,b.height,a,b.data),y+=b.levelSize;break;default:gt(!1,"Unknown image data type")}}),g==="compressed")this._trackAllocatedMemory(y,"Texture");else if(u&&u.byteLength)this._trackAllocatedMemory(u.byteLength,"Texture");else{const _=X$[this.dataFormat]||4,b=Y$[this.type]||1;this._trackAllocatedMemory(this.width*this.height*_*b,"Texture")}return this.loaded=!0,this}setSubImageData(t){let{target:r=this.target,pixels:n=null,data:i=null,x:o=0,y:a=0,width:s=this.width,height:l=this.height,level:u=0,format:c=this.format,type:f=this.type,dataFormat:h=this.dataFormat,compressed:d=!1,offset:p=0,border:v=this.border,parameters:g={}}=t;if({type:f,dataFormat:h,compressed:d,width:s,height:l}=this._deduceParameters({format:c,type:f,dataFormat:h,compressed:d,data:i,width:s,height:l}),gt(this.depth===0,"texSubImage not supported for 3D textures"),i||(i=n),i&&i.data){const m=i;i=m.data,s=m.shape[0],l=m.shape[1]}i instanceof Pe&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),Zn(this.gl,g,()=>{if(d)this.gl.compressedTexSubImage2D(r,u,o,a,s,l,c,i);else if(i===null)this.gl.texSubImage2D(r,u,o,a,s,l,h,f,null);else if(ArrayBuffer.isView(i))this.gl.texSubImage2D(r,u,o,a,s,l,h,f,i,p);else if(i instanceof Gx){const m=Or(this.gl);m.bindBuffer(35052,i),m.texSubImage2D(r,u,o,a,s,l,h,f,p),m.bindBuffer(35052,null)}else Qt(this.gl)?Or(this.gl).texSubImage2D(r,u,o,a,s,l,h,f,i):this.gl.texSubImage2D(r,u,o,a,h,f,i)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return Lt.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:r}=this;return t!==void 0&&(this.textureUnit=t,r.activeTexture(33984+t)),r.bindTexture(this.target,this.handle),t}unbind(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:r}=this;return t!==void 0&&(this.textureUnit=t,r.activeTexture(33984+t)),r.bindTexture(this.target,null),t}_getDataType(t){let{data:r,compressed:n=!1}=t;return n?{data:r,dataType:"compressed"}:r===null?{data:r,dataType:"null"}:ArrayBuffer.isView(r)?{data:r,dataType:"typed-array"}:r instanceof Pe?{data:r.handle,dataType:"buffer"}:r instanceof Gx?{data:r,dataType:"buffer"}:{data:r,dataType:"browser-object"}}_deduceParameters(t){const{format:r,data:n}=t;let{width:i,height:o,dataFormat:a,type:s,compressed:l}=t;const u=qE[r];return a=a||u&&u.dataFormat,s=s||u&&u.types[0],l=l||u&&u.compressed,{width:i,height:o}=this._deduceImageSize(n,i,o),{dataFormat:a,type:s,compressed:l,width:i,height:o,format:r,data:n}}_deduceImageSize(t,r,n){let i;return typeof ImageData<"u"&&t instanceof ImageData?i={width:t.width,height:t.height}:typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement?i={width:t.naturalWidth,height:t.naturalHeight}:typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement?i={width:t.width,height:t.height}:typeof ImageBitmap<"u"&&t instanceof ImageBitmap?i={width:t.width,height:t.height}:typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?i={width:t.videoWidth,height:t.videoHeight}:t?i={width:r,height:n}:i={width:r>=0?r:1,height:n>=0?n:1},gt(i,"Could not deduced texture size"),gt(r===void 0||i.width===r,"Deduced texture width does not match supplied width"),gt(n===void 0||i.height===n,"Deduced texture height does not match supplied height"),i}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(t){switch(t){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const r=this.gl.getTexParameter(this.target,t);return this.gl.bindTexture(this.target,null),r}}_setParameter(t,r){switch(this.gl.bindTexture(this.target,this.handle),r=this._getNPOTParam(t,r),t){case 33082:case 33083:this.gl.texParameterf(this.handle,t,r);break;case 4096:case 4097:gt(!1);break;default:this.gl.texParameteri(this.target,t,r);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return Qt(this.gl)||!this.width||!this.height?!1:!Vx(this.width)||!Vx(this.height)}_updateForNPOT(t){t[this.gl.TEXTURE_MIN_FILTER]===void 0&&(t[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),t[this.gl.TEXTURE_WRAP_S]===void 0&&(t[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),t[this.gl.TEXTURE_WRAP_T]===void 0&&(t[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(t,r){if(this._isNPOT())switch(t){case 10241:Gvt.indexOf(r)===-1&&(r=9729);break;case 10242:case 10243:r!==33071&&(r=33071);break}return r}}let jvt="";function Wvt(e,t){return gt(typeof e=="string"),e=jvt+e,new Promise((r,n)=>{try{const i=new Image;i.onload=()=>r(i),i.onerror=()=>n(new Error("Could not load image ".concat(e,"."))),i.crossOrigin=t&&t.crossOrigin||"anonymous",i.src=e}catch(i){n(i)}})}class ln extends Ql{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(t,r){return Ql.isSupported(t,r)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};_y(t),(r instanceof Promise||typeof r=="string")&&(r={data:r}),typeof r.data=="string"&&(r=Object.assign({},r,{data:Wvt(r.data)})),super(t,Object.assign({},r,{target:3553})),this.initialize(r),Object.seal(this)}}const $3=[34069,34070,34071,34072,34073,34074];class q$ extends Ql{get[Symbol.toStringTag](){return"TextureCube"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};_y(t),super(t,Object.assign({},r,{target:34067})),this.initialize(r),Object.seal(this)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{mipmaps:r=!0,parameters:n={}}=t;return this.opts=t,this.setCubeMapImageData(t).then(()=>{this.loaded=!0,r&&this.generateMipmap(t),this.setParameters(n)}),this}subImage(t){let{face:r,data:n,x:i=0,y:o=0,mipmapLevel:a=0}=t;return this._subImage({target:r,data:n,x:i,y:o,mipmapLevel:a})}async setCubeMapImageData(t){let{width:r,height:n,pixels:i,data:o,border:a=0,format:s=6408,type:l=5121}=t;const{gl:u}=this,c=i||o,f=await Promise.all($3.map(h=>{const d=c[h];return Promise.all(Array.isArray(d)?d:[d])}));this.bind(),$3.forEach((h,d)=>{f[d].length>1&&this.opts.mipmaps!==!1&&Lt.warn("".concat(this.id," has mipmap and multiple LODs."))(),f[d].forEach((p,v)=>{r&&n?u.texImage2D(h,v,s,r,n,a,s,l,p):u.texImage2D(h,v,s,s,l,p)})}),this.unbind()}setImageDataForFace(t){const{face:r,width:n,height:i,pixels:o,data:a,border:s=0,format:l=6408,type:u=5121}=t,{gl:c}=this,f=o||a;return this.bind(),f instanceof Promise?f.then(h=>this.setImageDataForFace(Object.assign({},t,{face:r,data:h,pixels:h}))):this.width||this.height?c.texImage2D(r,0,l,n,i,s,l,u,f):c.texImage2D(r,0,l,l,u,f),this}}q$.FACES=$3;class Hvt extends Ql{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(t){return Qt(t)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Or(t),r=Object.assign({depth:1},r,{target:32879,unpackFlipY:!1}),super(t,r),this.initialize(r),Object.seal(this)}setImageData(t){let{level:r=0,dataFormat:n=6408,width:i,height:o,depth:a=1,border:s=0,format:l,type:u=5121,offset:c=0,data:f,parameters:h={}}=t;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Zn(this.gl,h,()=>{ArrayBuffer.isView(f)&&this.gl.texImage3D(this.target,r,n,i,o,a,s,l,u,f),f instanceof Pe&&(this.gl.bindBuffer(35052,f.handle),this.gl.texImage3D(this.target,r,n,i,o,a,s,l,u,c))}),f&&f.byteLength)this._trackAllocatedMemory(f.byteLength,"Texture");else{const d=X$[this.dataFormat]||4,p=Y$[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*d*p,"Texture")}return this.loaded=!0,this}}const fl="EXT_color_buffer_float",jx={[33189]:{bpp:2},[33190]:{gl2:!0,bpp:3},[36012]:{gl2:!0,bpp:4},[36168]:{bpp:1},[34041]:{bpp:4},[35056]:{gl2:!0,bpp:4},[36013]:{gl2:!0,bpp:5},[32854]:{bpp:2},[36194]:{bpp:2},[32855]:{bpp:2},[33321]:{gl2:!0,bpp:1},[33330]:{gl2:!0,bpp:1},[33329]:{gl2:!0,bpp:1},[33332]:{gl2:!0,bpp:2},[33331]:{gl2:!0,bpp:2},[33334]:{gl2:!0,bpp:4},[33333]:{gl2:!0,bpp:4},[33323]:{gl2:!0,bpp:2},[33336]:{gl2:!0,bpp:2},[33335]:{gl2:!0,bpp:2},[33338]:{gl2:!0,bpp:4},[33337]:{gl2:!0,bpp:4},[33340]:{gl2:!0,bpp:8},[33339]:{gl2:!0,bpp:8},[32849]:{gl2:!0,bpp:3},[32856]:{gl2:!0,bpp:4},[32857]:{gl2:!0,bpp:4},[36220]:{gl2:!0,bpp:4},[36238]:{gl2:!0,bpp:4},[36975]:{gl2:!0,bpp:4},[36214]:{gl2:!0,bpp:8},[36232]:{gl2:!0,bpp:8},[36226]:{gl2:!0,bpp:16},[36208]:{gl2:!0,bpp:16},[33325]:{gl2:fl,bpp:2},[33327]:{gl2:fl,bpp:4},[34842]:{gl2:fl,bpp:8},[33326]:{gl2:fl,bpp:4},[33328]:{gl2:fl,bpp:8},[34836]:{gl2:fl,bpp:16},[35898]:{gl2:fl,bpp:4}};function Xvt(e,t,r){const n=r[t];if(!n)return!1;const i=Qt(e)&&n.gl2||n.gl1;return typeof i=="string"?e.getExtension(i):i}class mc extends Sa{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(t){let{format:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{format:null};return!r||Xvt(t,r,jx)}static getSamplesForFormat(t,r){let{format:n}=r;return t.getInternalformatParameter(36161,n,32937)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.initialize(r),Object.seal(this)}initialize(t){let{format:r,width:n=1,height:i=1,samples:o=0}=t;return gt(r,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),o!==0&&Qt(this.gl)?this.gl.renderbufferStorageMultisample(36161,o,r,n,i):this.gl.renderbufferStorage(36161,r,n,i),this.format=r,this.width=n,this.height=i,this.samples=o,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*jx[this.format].bpp),this}resize(t){let{width:r,height:n}=t;return r!==this.width||n!==this.height?this.initialize({width:r,height:n,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(t){this.gl.bindRenderbuffer(36161,t)}_syncHandle(t){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(t){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,t)}}const Yvt=256,qvt=1024,Zvt=16384,Wx=6144,Hx=6145,Xx=6146,Yx=34041,Z$="clear: bad arguments";function ZE(e){let{framebuffer:t=null,color:r=null,depth:n=null,stencil:i=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o={};t&&(o.framebuffer=t);let a=0;r&&(a|=Zvt,r!==!0&&(o.clearColor=r)),n&&(a|=Yvt,n!==!0&&(o.clearDepth=n)),i&&(a|=qvt,n!==!0&&(o.clearStencil=n)),gt(a!==0,Z$),Zn(e,o,()=>{e.clear(a)})}function Kvt(e){let{framebuffer:t=null,buffer:r=Wx,drawBuffer:n=0,value:i=[0,0,0,0]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Or(e),Zn(e,{framebuffer:t},()=>{switch(r){case Wx:switch(i.constructor){case Int32Array:e.clearBufferiv(r,n,i);break;case Uint32Array:e.clearBufferuiv(r,n,i);break;case Float32Array:default:e.clearBufferfv(r,n,i)}break;case Hx:e.clearBufferfv(Hx,0,[i]);break;case Xx:e.clearBufferiv(Xx,0,[i]);break;case Yx:const[o,a]=i;e.clearBufferfi(Yx,0,o,a);break;default:gt(!1,Z$)}})}function Jvt(e){switch(e){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return gt(!1),0}}function by(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{sourceX:r=0,sourceY:n=0,sourceFormat:i=6408}=t;let{sourceAttachment:o=36064,target:a=null,sourceWidth:s,sourceHeight:l,sourceType:u}=t;const{framebuffer:c,deleteFramebuffer:f}=K$(e);gt(c);const{gl:h,handle:d,attachments:p}=c;s=s||c.width,l=l||c.height,o===36064&&d===null&&(o=1028),gt(p[o]),u=u||p[o].type,a=tgt(a,u,i,s,l),u=u||F3(a);const v=h.bindFramebuffer(36160,d);return h.readPixels(r,n,s,l,i,u,a),h.bindFramebuffer(36160,v||null),f&&c.delete(),a}function qx(e){let{sourceAttachment:t=36064,targetMaxHeight:r=Number.MAX_SAFE_INTEGER}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=by(e,{sourceAttachment:t}),{width:i,height:o}=e;for(;o>r;)({data:n,width:i,height:o}=Nvt({data:n,width:i,height:o}));Dvt({data:n,width:i,height:o});const a=document.createElement("canvas");a.width=i,a.height=o;const s=a.getContext("2d"),l=s.createImageData(i,o);return l.data.set(n),s.putImageData(l,0,0),a.toDataURL()}function Qvt(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{sourceX:n=0,sourceY:i=0,targetMipmaplevel:o=0,targetInternalFormat:a=6408}=r;let{targetX:s,targetY:l,targetZ:u,width:c,height:f}=r;const{framebuffer:h,deleteFramebuffer:d}=K$(e);gt(h);const{gl:p,handle:v}=h,g=typeof s<"u"||typeof l<"u"||typeof u<"u";s=s||0,l=l||0,u=u||0;const m=p.bindFramebuffer(36160,v);gt(t);let y=null;if(t instanceof Ql&&(y=t,c=Number.isFinite(c)?c:y.width,f=Number.isFinite(f)?f:y.height,y.bind(0),t=y.target),!g)p.copyTexImage2D(t,o,a,n,i,c,f,0);else switch(t){case 3553:case 34067:p.copyTexSubImage2D(t,o,s,l,n,i,c,f);break;case 35866:case 32879:Or(p).copyTexSubImage3D(t,o,s,l,u,n,i,c,f);break}return y&&y.unbind(),p.bindFramebuffer(36160,m||null),d&&h.delete(),y}function K$(e){return e instanceof nr?{framebuffer:e,deleteFramebuffer:!1}:{framebuffer:ugt(e),deleteFramebuffer:!0}}function tgt(e,t,r,n,i){if(e)return e;t=t||5121;const o=a0(t,{clamped:!1}),a=Jvt(r);return new o(n*i*a)}const Be={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function egt(e){const t=new ln(e,{format:6408,type:5126,dataFormat:6408}),r=new nr(e,{id:"test-framebuffer",check:!1,attachments:{[36064]:t}}),n=r.getStatus();return t.delete(),r.delete(),n===36053}const J$={[Be.WEBGL2]:[!1,!0],[Be.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[Be.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[Be.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[Be.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[Be.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[Be.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[Be.FLOAT_BLEND]:["EXT_float_blend"],[Be.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[Be.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[Be.TEXTURE_FLOAT]:["OES_texture_float",!0],[Be.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[Be.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[Be.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[Be.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[Be.COLOR_ATTACHMENT_RGBA32F]:[egt,"EXT_color_buffer_float"],[Be.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[Be.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[Be.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[Be.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[Be.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[Be.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]},rgt=2;function ngt(e,t){return KE(e,t)}function KE(e,t){return t=Array.isArray(t)?t:[t],t.every(r=>Q$(e,r))}function igt(e){e.luma=e.luma||{},e.luma.caps=e.luma.caps||{};for(const t in J$)e.luma.caps[t]===void 0&&(e.luma.caps[t]=Q$(e,t));return e.luma.caps}function Q$(e,t){return e.luma=e.luma||{},e.luma.caps=e.luma.caps||{},e.luma.caps[t]===void 0&&(e.luma.caps[t]=ogt(e,t)),e.luma.caps[t]||Lt.log(rgt,"Feature: ".concat(t," not supported"))(),e.luma.caps[t]}function ogt(e,t){const r=J$[t];gt(r,t);let n;const i=Qt(e)&&r[1]||r[0];if(typeof i=="function")n=i(e);else if(Array.isArray(i)){n=!0;for(const o of i)n=n&&Boolean(e.getExtension(o))}else typeof i=="string"?n=Boolean(e.getExtension(i)):typeof i=="boolean"?n=i:gt(!1);return n}const Zx="Multiple render targets not supported";class nr extends Sa{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{colorBufferFloat:n,colorBufferHalfFloat:i}=r;let o=!0;return n&&(o=Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("WEBGL_color_buffer_float")||t.getExtension("OES_texture_float"))),i&&(o=o&&Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("EXT_color_buffer_half_float"))),o}static getDefaultFramebuffer(t){return t.luma=t.luma||{},t.luma.defaultFramebuffer=t.luma.defaultFramebuffer||new nr(t,{id:"default-framebuffer",handle:null,attachments:{}}),t.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const t=Or(this.gl);return t.getParameter(t.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const t=Or(this.gl);return t.getParameter(t.MAX_DRAW_BUFFERS)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(r),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(t){let{width:r=1,height:n=1,attachments:i=null,color:o=!0,depth:a=!0,stencil:s=!1,check:l=!0,readBuffer:u=void 0,drawBuffers:c=void 0}=t;if(gt(r>=0&&n>=0,"Width and height need to be integers"),this.width=r,this.height=n,i)for(const f in i){const h=i[f];(Array.isArray(h)?h[0]:h).resize({width:r,height:n})}else i=this._createDefaultAttachments(o,a,s,r,n);this.update({clearAttachments:!0,attachments:i,readBuffer:u,drawBuffers:c}),i&&l&&this.checkStatus()}delete(){for(const t of this.ownResources)t.delete();return super.delete(),this}update(t){let{attachments:r={},readBuffer:n,drawBuffers:i,clearAttachments:o=!1,resizeAttachments:a=!0}=t;this.attach(r,{clearAttachments:o,resizeAttachments:a});const{gl:s}=this,l=s.bindFramebuffer(36160,this.handle);return n&&this._setReadBuffer(n),i&&this._setDrawBuffers(i),s.bindFramebuffer(36160,l||null),this}resize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{width:r,height:n}=t;if(this.handle===null)return gt(r===void 0&&n===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;r===void 0&&(r=this.gl.drawingBufferWidth),n===void 0&&(n=this.gl.drawingBufferHeight),r!==this.width&&n!==this.height&&Lt.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(r,"x").concat(n))();for(const i in this.attachments)this.attachments[i].resize({width:r,height:n});return this.width=r,this.height=n,this}attach(t){let{clearAttachments:r=!1,resizeAttachments:n=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i={};r&&Object.keys(this.attachments).forEach(a=>{i[a]=null}),Object.assign(i,t);const o=this.gl.bindFramebuffer(36160,this.handle);for(const a in i){gt(a!==void 0,"Misspelled framebuffer binding point?");const s=Number(a),l=i[s];let u=l;if(!u)this._unattach(s);else if(u instanceof mc)this._attachRenderbuffer({attachment:s,renderbuffer:u});else if(Array.isArray(l)){const[c,f=0,h=0]=l;u=c,this._attachTexture({attachment:s,texture:c,layer:f,level:h})}else this._attachTexture({attachment:s,texture:u,layer:0,level:0});n&&u&&u.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,o||null),Object.assign(this.attachments,t),Object.keys(this.attachments).filter(a=>!this.attachments[a]).forEach(a=>{delete this.attachments[a]})}checkStatus(){const t=this.getStatus();if(t!==36053)throw new Error(sgt(t));return this}getStatus(){const{gl:t}=this,r=t.bindFramebuffer(36160,this.handle),n=t.checkFramebufferStatus(36160);return t.bindFramebuffer(36160,r||null),n}clear(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{color:r,depth:n,stencil:i,drawBuffers:o=[]}=t,a=this.gl.bindFramebuffer(36160,this.handle);return(r||n||i)&&ZE(this.gl,{color:r,depth:n,stencil:i}),o.forEach((s,l)=>{Kvt(this.gl,{drawBuffer:l,value:s})}),this.gl.bindFramebuffer(36160,a||null),this}readPixels(){return Lt.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return Lt.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return Lt.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return Lt.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return Lt.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return Lt.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(t){let{attachments:r=[],x:n=0,y:i=0,width:o,height:a}=t;const s=Or(this.gl),l=s.bindFramebuffer(36008,this.handle);return n===0&&i===0&&o===void 0&&a===void 0?s.invalidateFramebuffer(36008,r):s.invalidateFramebuffer(36008,r,n,i,o,a),s.bindFramebuffer(36008,l),this}getAttachmentParameter(t,r,n){let i=this._getAttachmentParameterFallback(r);return i===null&&(this.gl.bindFramebuffer(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,t,r),this.gl.bindFramebuffer(36160,null)),n&&i>1e3&&(i=gs(this.gl,i)),i}getAttachmentParameters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:36064,r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const i={};for(const o of n){const a=r?gs(this.gl,o):o;i[a]=this.getAttachmentParameter(t,o,r)}return i}getParameters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const r=Object.keys(this.attachments),n={};for(const i of r){const o=Number(i),a=t?gs(this.gl,o):o;n[a]=this.getAttachmentParameters(o,t)}return n}show(){return typeof window<"u"&&window.open(qx(this),"luma-debug-texture"),this}log(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(t>Lt.level||typeof window>"u")return this;r=r||"Framebuffer ".concat(this.id);const n=qx(this,{targetMaxHeight:100});return Lt.image({logLevel:t,message:r,image:n},r)(),this}bind(){let{target:t=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(t,this.handle),this}unbind(){let{target:t=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(t,null),this}_createDefaultAttachments(t,r,n,i,o){let a=null;return t&&(a=a||{},a[36064]=new ln(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:i,height:o,mipmaps:!1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.ownResources.push(a[36064])),r&&n?(a=a||{},a[33306]=new mc(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:i,height:111}),this.ownResources.push(a[33306])):r?(a=a||{},a[36096]=new mc(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:i,height:o}),this.ownResources.push(a[36096])):n&&gt(!1),a}_unattach(t){const r=this.attachments[t];!r||(r instanceof mc?this.gl.framebufferRenderbuffer(36160,t,36161,null):this.gl.framebufferTexture2D(36160,t,3553,null,0),delete this.attachments[t])}_attachRenderbuffer(t){let{attachment:r=36064,renderbuffer:n}=t;const{gl:i}=this;i.framebufferRenderbuffer(36160,r,36161,n.handle),this.attachments[r]=n}_attachTexture(t){let{attachment:r=36064,texture:n,layer:i,level:o}=t;const{gl:a}=this;switch(a.bindTexture(n.target,n.handle),n.target){case 35866:case 32879:Or(a).framebufferTextureLayer(36160,r,n.target,o,i);break;case 34067:const l=agt(i);a.framebufferTexture2D(36160,r,l,n.handle,o);break;case 3553:a.framebufferTexture2D(36160,r,3553,n.handle,o);break;default:gt(!1,"Illegal texture type")}a.bindTexture(n.target,null),this.attachments[r]=n}_setReadBuffer(t){const r=Npt(this.gl);r?r.readBuffer(t):gt(t===36064||t===1029,Zx),this.readBuffer=t}_setDrawBuffers(t){const{gl:r}=this,n=Or(r);if(n)n.drawBuffers(t);else{const i=r.getExtension("WEBGL_draw_buffers");i?i.drawBuffersWEBGL(t):gt(t.length===1&&(t[0]===36064||t[0]===1029),Zx)}this.drawBuffers=t}_getAttachmentParameterFallback(t){const r=igt(this.gl);switch(t){case 36052:return r.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return r.WEBGL2?null:8;case 33297:return r.WEBGL2?null:5125;case 33296:return!r.WEBGL2&&!r.EXT_sRGB?9729:null;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(t){return this.gl.bindFramebuffer(36160,t)}}function agt(e){return e<34069?e+34069:e}function sgt(e){return(nr.STATUS||{})[e]||"Framebuffer error ".concat(e)}const lgt=[36049,36048,33296,33298,33299,33300,33301,33302,33303];nr.ATTACHMENT_PARAMETERS=lgt;function tz(e,t){gt(e instanceof ln||e instanceof q$||e instanceof Hvt);const r=e.constructor,{gl:n,width:i,height:o,format:a,type:s,dataFormat:l,border:u,mipmaps:c}=e,f=Object.assign({width:i,height:o,format:a,type:s,dataFormat:l,border:u,mipmaps:c},t);return new r(n,f)}function ugt(e,t){const{gl:r,width:n,height:i,id:o}=e;return new nr(r,Object.assign({},t,{id:"framebuffer-for-".concat(o),width:n,height:i,attachments:{[36064]:e}}))}function Yg(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"unnamed";const r=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,n=e.match(r);return n?n[1]:t}const cgt=35632,fgt=35633;function hgt(e){switch(e){case cgt:return"fragment";case fgt:return"vertex";default:return"unknown type"}}function dgt(e,t,r,n){const i=e.split(/\r?\n/),o={},a={},s=n||Yg(t)||"(unnamed)",l="".concat(hgt(r)," shader ").concat(s);for(let c=0;c<i.length;c++){const f=i[c];if(f.length<=1)continue;const h=f.split(":"),d=h[0],p=parseInt(h[2],10);if(isNaN(p))throw new Error("GLSL compilation error in ".concat(l,": ").concat(e));d!=="WARNING"?o[p]=f:a[p]=f}const u=pgt(t);return{shaderName:l,errors:Kx(o,u),warnings:Kx(a,u)}}function Kx(e,t){let r="";for(let n=0;n<t.length;n++){const i=t[n];if(!(!e[n+3]&&!e[n+2]&&!e[n+1])&&(r+="".concat(i,`
`),e[n+1])){const o=e[n+1],a=o.split(":",3),s=a[0],l=parseInt(a[1],10)||0,u=o.substring(a.join(":").length+1).trim();r+=ez("^^^ ".concat(s,": ").concat(u,`

`),l)}}return r}function pgt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:": ";const n=e.split(/\r?\n/),i=String(n.length+t-1).length;return n.map((o,a)=>{const s=String(a+t),l=s.length;return ez(s,i-l)+r+o})}function ez(e,t){let r="";for(let n=0;n<t;++n)r+=" ";return"".concat(r).concat(e)}function rz(e){let t=100;const r=e.match(/[^\s]+/g);if(r.length>=2&&r[0]==="#version"){const n=parseInt(r[1],10);Number.isFinite(n)&&(t=n)}return t}const vgt="Shader: GLSL source code must be a JavaScript string";class s0 extends Sa{get[Symbol.toStringTag](){return"Shader"}static getTypeName(t){switch(t){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return gt(!1),"unknown"}}constructor(t,r){_y(t),gt(typeof r.source=="string",vgt);const n=Yg(r.source,null)||r.id||Cs("unnamed ".concat(s0.getTypeName(r.shaderType)));super(t,{id:n}),this.shaderType=r.shaderType,this.source=r.source,this.initialize(r)}initialize(t){let{source:r}=t;const n=Yg(r,null);n&&(this.id=Cs(n)),this._compile(r)}getParameter(t){return this.gl.getShaderParameter(this.handle,t)}toString(){return"".concat(s0.getTypeName(this.shaderType),":").concat(this.id)}getName(){return Yg(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const t=this.gl.getExtension("WEBGL_debug_shaders");return t?t.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.source;if(t.startsWith("#version ")||(t=`#version 100
`.concat(t)),this.source=t,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const n=this.gl.getShaderInfoLog(this.handle),{shaderName:i,errors:o,warnings:a}=dgt(n,this.source,this.shaderType,this.id);throw Lt.error("GLSL compilation errors in ".concat(i,`
`).concat(o))(),Lt.warn("GLSL compilation warnings in ".concat(i,`
`).concat(a))(),new Error("GLSL compilation errors in ".concat(i))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class lb extends s0{get[Symbol.toStringTag](){return"VertexShader"}constructor(t,r){typeof r=="string"&&(r={source:r}),super(t,Object.assign({},r,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class ub extends s0{get[Symbol.toStringTag](){return"FragmentShader"}constructor(t,r){typeof r=="string"&&(r={source:r}),super(t,Object.assign({},r,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const ggt={[5126]:Fe.bind(null,"uniform1fv",pn,1,Cr),[35664]:Fe.bind(null,"uniform2fv",pn,2,Cr),[35665]:Fe.bind(null,"uniform3fv",pn,3,Cr),[35666]:Fe.bind(null,"uniform4fv",pn,4,Cr),[5124]:Fe.bind(null,"uniform1iv",Fa,1,Cr),[35667]:Fe.bind(null,"uniform2iv",Fa,2,Cr),[35668]:Fe.bind(null,"uniform3iv",Fa,3,Cr),[35669]:Fe.bind(null,"uniform4iv",Fa,4,Cr),[35670]:Fe.bind(null,"uniform1iv",Fa,1,Cr),[35671]:Fe.bind(null,"uniform2iv",Fa,2,Cr),[35672]:Fe.bind(null,"uniform3iv",Fa,3,Cr),[35673]:Fe.bind(null,"uniform4iv",Fa,4,Cr),[35674]:Fe.bind(null,"uniformMatrix2fv",pn,4,$o),[35675]:Fe.bind(null,"uniformMatrix3fv",pn,9,$o),[35676]:Fe.bind(null,"uniformMatrix4fv",pn,16,$o),[35678]:vr,[35680]:vr,[5125]:Fe.bind(null,"uniform1uiv",fv,1,Cr),[36294]:Fe.bind(null,"uniform2uiv",fv,2,Cr),[36295]:Fe.bind(null,"uniform3uiv",fv,3,Cr),[36296]:Fe.bind(null,"uniform4uiv",fv,4,Cr),[35685]:Fe.bind(null,"uniformMatrix2x3fv",pn,6,$o),[35686]:Fe.bind(null,"uniformMatrix2x4fv",pn,8,$o),[35687]:Fe.bind(null,"uniformMatrix3x2fv",pn,6,$o),[35688]:Fe.bind(null,"uniformMatrix3x4fv",pn,12,$o),[35689]:Fe.bind(null,"uniformMatrix4x2fv",pn,8,$o),[35690]:Fe.bind(null,"uniformMatrix4x3fv",pn,12,$o),[35678]:vr,[35680]:vr,[35679]:vr,[35682]:vr,[36289]:vr,[36292]:vr,[36293]:vr,[36298]:vr,[36299]:vr,[36300]:vr,[36303]:vr,[36306]:vr,[36307]:vr,[36308]:vr,[36311]:vr},mgt={},ygt={},_gt={},Jx=[0];function JE(e,t,r,n){t===1&&typeof e=="boolean"&&(e=e?1:0),Number.isFinite(e)&&(Jx[0]=e,e=Jx);const i=e.length;if(i%t&&Lt.warn("Uniform size should be multiples of ".concat(t),e)(),e instanceof r)return e;let o=n[i];o||(o=new r(i),n[i]=o);for(let a=0;a<i;a++)o[a]=e[a];return o}function pn(e,t){return JE(e,t,Float32Array,mgt)}function Fa(e,t){return JE(e,t,Int32Array,ygt)}function fv(e,t){return JE(e,t,Uint32Array,_gt)}function Qx(e,t,r){const n=ggt[r.type];if(!n)throw new Error("Unknown GLSL uniform type ".concat(r.type));return n().bind(null,e,t)}function bgt(e){if(e[e.length-1]!=="]")return{name:e,length:1,isArray:!1};const t=/([^[]*)(\[[0-9]+\])?/,r=e.match(t);if(!r||r.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(e));return{name:r[1],length:r[2]||1,isArray:Boolean(r[2])}}function wgt(e,t,r){for(const n in e){const i=e[n];if((!r||Boolean(r[n]))&&!Sgt(i))throw t=t?"".concat(t," "):"",console.error("".concat(t," Bad uniform ").concat(n),i),new Error("".concat(t," Bad uniform ").concat(n))}return!0}function Sgt(e){return Array.isArray(e)||ArrayBuffer.isView(e)?Pgt(e):isFinite(e)||e===!0||e===!1||e instanceof Ql||e instanceof mc?!0:e instanceof nr?Boolean(e.texture):!1}function Tgt(e,t,r){if(Array.isArray(r)||ArrayBuffer.isView(r))if(e[t]){const n=e[t];for(let i=0,o=r.length;i<o;++i)n[i]=r[i]}else e[t]=r.slice();else e[t]=r}function Pgt(e){if(e.length===0)return!1;const t=Math.min(e.length,16);for(let r=0;r<t;++r)if(!Number.isFinite(e[r]))return!1;return!0}function vr(){let e=null;return(t,r,n)=>{const i=e!==n;return i&&(t.uniform1i(r,n),e=n),i}}function Fe(e,t,r,n){let i=null,o=null;return(a,s,l)=>{const u=t(l,r),c=u.length;let f=!1;if(i===null)i=new Float32Array(c),o=c,f=!0;else{gt(o===c,"Uniform length cannot change.");for(let h=0;h<c;++h)if(u[h]!==i[h]){f=!0;break}}return f&&(n(a,e,s,u),i.set(u)),f}}function Cr(e,t,r,n){e[t](r,n)}function $o(e,t,r,n){e[t](r,!1,n)}const Egt=5120,Agt=5121,Cgt=5122,Mgt=5123,tL=0,hv=1,kgt=2,xgt=3,dv=4,Lgt=5,Igt=6,ir=5126,Ogt=35664,Rgt=35665,Dgt=35666,gh=5124,Ngt=35667,Fgt=35668,Bgt=35669,mh=5125,$gt=36294,zgt=36295,Vgt=36296,Ugt=35670,Ggt=35671,jgt=35672,Wgt=35673,Hgt=35674,Xgt=35675,Ygt=35676,qgt=35685,Zgt=35686,Kgt=35687,Jgt=35688,Qgt=35689,tmt=35690,z3={[ir]:[ir,1,"float"],[Ogt]:[ir,2,"vec2"],[Rgt]:[ir,3,"vec3"],[Dgt]:[ir,4,"vec4"],[gh]:[gh,1,"int"],[Ngt]:[gh,2,"ivec2"],[Fgt]:[gh,3,"ivec3"],[Bgt]:[gh,4,"ivec4"],[mh]:[mh,1,"uint"],[$gt]:[mh,2,"uvec2"],[zgt]:[mh,3,"uvec3"],[Vgt]:[mh,4,"uvec4"],[Ugt]:[ir,1,"bool"],[Ggt]:[ir,2,"bvec2"],[jgt]:[ir,3,"bvec3"],[Wgt]:[ir,4,"bvec4"],[Hgt]:[ir,8,"mat2"],[qgt]:[ir,8,"mat2x3"],[Zgt]:[ir,8,"mat2x4"],[Xgt]:[ir,12,"mat3"],[Kgt]:[ir,12,"mat3x2"],[Jgt]:[ir,12,"mat3x4"],[Ygt]:[ir,16,"mat4"],[Qgt]:[ir,16,"mat4x2"],[tmt]:[ir,16,"mat4x3"]};function emt(e){switch(e){case tL:return tL;case hv:return hv;case xgt:return hv;case kgt:return hv;case dv:return dv;case Lgt:return dv;case Igt:return dv;default:return gt(!1),0}}function eL(e){const t=z3[e];if(!t)return null;const[r,n]=t;return{type:r,components:n}}function nz(e,t){switch(e){case Egt:case Agt:case Cgt:case Mgt:e=ir;break}for(const r in z3){const[n,i,o]=z3[r];if(n===e&&i===t)return{glType:r,name:o}}return null}class rmt{constructor(t){this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}getAttributeInfo(t){const r=Number(t);return Number.isFinite(r)?this.attributeInfosByLocation[r]:this.attributeInfosByName[t]||null}getAttributeLocation(t){const r=this.getAttributeInfo(t);return r?r.location:-1}getAttributeAccessor(t){const r=this.getAttributeInfo(t);return r?r.accessor:null}getVaryingInfo(t){const r=Number(t);return Number.isFinite(r)?this.varyingInfos[r]:this.varyingInfosByName[t]||null}getVaryingIndex(t){const r=this.getVaryingInfo();return r?r.location:-1}getVaryingAccessor(t){const r=this.getVaryingInfo();return r?r.accessor:null}_readAttributesFromProgram(t){const{gl:r}=t,n=r.getProgramParameter(t.handle,35721);for(let i=0;i<n;i++){const{name:o,type:a,size:s}=r.getActiveAttrib(t.handle,i),l=r.getAttribLocation(t.handle,o);l>=0&&this._addAttribute(l,o,a,s)}this.attributeInfos.sort((i,o)=>i.location-o.location)}_readVaryingsFromProgram(t){const{gl:r}=t;if(!Qt(r))return;const n=r.getProgramParameter(t.handle,35971);for(let i=0;i<n;i++){const{name:o,type:a,size:s}=r.getTransformFeedbackVarying(t.handle,i);this._addVarying(i,o,a,s)}this.varyingInfos.sort((i,o)=>i.location-o.location)}_addAttribute(t,r,n,i){const{type:o,components:a}=eL(n),s={type:o,size:i*a};this._inferProperties(t,r,s);const l={location:t,name:r,accessor:new mn(s)};this.attributeInfos.push(l),this.attributeInfosByLocation[t]=l,this.attributeInfosByName[l.name]=l}_inferProperties(t,r,n){/instance/i.test(r)&&(n.divisor=1)}_addVarying(t,r,n,i){const{type:o,components:a}=eL(n),s=new mn({type:o,size:i*a}),l={location:t,name:r,accessor:s};this.varyingInfos.push(l),this.varyingInfosByName[l.name]=l}}const rL=4,nmt=35981,imt=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class iz extends Sa{get[Symbol.toStringTag](){return"Program"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.stubRemovedMethods("Program","v6.0",imt),this._isCached=!1,this.initialize(r),Object.seal(this),this._setId(r.id)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{hash:r,vs:n,fs:i,varyings:o,bufferMode:a=nmt}=t;return this.hash=r||"",this.vs=typeof n=="string"?new lb(this.gl,{id:"".concat(t.id,"-vs"),source:n}):n,this.fs=typeof i=="string"?new ub(this.gl,{id:"".concat(t.id,"-fs"),source:i}):i,gt(this.vs instanceof lb),gt(this.fs instanceof ub),this.uniforms={},this._textureUniforms={},o&&o.length>0&&(Or(this.gl),this.varyings=o,this.gl2.transformFeedbackVaryings(this.handle,o,a)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new rmt(this),this.setProps(t)}delete(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isCached?this:super.delete(t)}setProps(t){return"uniforms"in t&&this.setUniforms(t.uniforms),this}draw(t){let{logPriority:r,drawMode:n=4,vertexCount:i,offset:o=0,start:a,end:s,isIndexed:l=!1,indexType:u=5123,instanceCount:c=0,isInstanced:f=c>0,vertexArray:h=null,transformFeedback:d,framebuffer:p,parameters:v={},uniforms:g,samplers:m}=t;if((g||m)&&(Lt.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(g||{})),Lt.priority>=r){const y=p?p.id:"default",_="mode=".concat(gs(this.gl,n)," verts=").concat(i," ")+"instances=".concat(c," indexType=").concat(gs(this.gl,u)," ")+"isInstanced=".concat(f," isIndexed=").concat(l," ")+"Framebuffer=".concat(y);Lt.log(r,_)()}return gt(h),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||i===0||f&&c===0?!1:(h.bindForDraw(i,c,()=>{if(p!==void 0&&(v=Object.assign({},v,{framebuffer:p})),d){const y=emt(n);d.begin(y)}this._bindTextures(),Zn(this.gl,v,()=>{l&&f?this.gl2.drawElementsInstanced(n,i,u,o,c):l&&Qt(this.gl)&&!isNaN(a)&&!isNaN(s)?this.gl2.drawRangeElements(n,a,s,i,u,o):l?this.gl.drawElements(n,i,u,o):f?this.gl2.drawArraysInstanced(n,o,i,c):this.gl.drawArrays(n,o,i)}),d&&d.end()}),!0)}setUniforms(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Lt.priority>=2&&wgt(t,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const r in t){const n=t[r],i=this._uniformSetters[r];if(i){let o=n,a=!1;if(o instanceof nr&&(o=o.texture),o instanceof Ql)if(a=this.uniforms[r]!==n,a){i.textureIndex===void 0&&(i.textureIndex=this._textureIndexCounter++);const s=o,{textureIndex:l}=i;s.bind(l),o=l,this._textureUniforms[r]=s}else o=i.textureIndex;else this._textureUniforms[r]&&delete this._textureUniforms[r];(i(o)||a)&&Tgt(this.uniforms,r,n)}}return this}_areTexturesRenderable(){let t=!0;for(const r in this._textureUniforms){const n=this._textureUniforms[r];n.update(),t=t&&n.loaded}return t}_bindTextures(){for(const t in this._textureUniforms){const r=this._uniformSetters[t].textureIndex;this._textureUniforms[t].bind(r)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(t){const r=this.gl.getAttachedShaders(t),n={};for(const i of r)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new lb({handle:i});break;case 35632:n.fs=new ub({handle:i});break}return n}_getParameter(t){return this.gl.getProgramParameter(this.handle,t)}_setId(t){if(!t){const r=this._getName();this.id=Cs(r)}}_getName(){let t=this.vs.getName()||this.fs.getName();return t=t.replace(/shader/i,""),t=t?"".concat(t,"-program"):"program",t}_compileAndLink(){const{gl:t}=this;if(t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),Lt.time(rL,"linkProgram for ".concat(this._getName()))(),t.linkProgram(this.handle),Lt.timeEnd(rL,"linkProgram for ".concat(this._getName()))(),t.debug||Lt.level>0){if(!t.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(t.getProgramInfoLog(this.handle)));if(t.validateProgram(this.handle),!t.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(t.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:t}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let r=0;r<this._uniformCount;r++){const n=this.gl.getActiveUniform(this.handle,r),{name:i}=bgt(n.name);let o=t.getUniformLocation(this.handle,i);if(this._uniformSetters[i]=Qx(t,o,n),n.size>1)for(let a=0;a<n.size;a++)o=t.getUniformLocation(this.handle,"".concat(i,"[").concat(a,"]")),this._uniformSetters["".concat(i,"[").concat(a,"]")]=Qx(t,o,n)}this._textureIndexCounter=0}getActiveUniforms(t,r){return this.gl2.getActiveUniforms(this.handle,t,r)}getUniformBlockIndex(t){return this.gl2.getUniformBlockIndex(this.handle,t)}getActiveUniformBlockParameter(t,r){return this.gl2.getActiveUniformBlockParameter(this.handle,t,r)}uniformBlockBinding(t,r){this.gl2.uniformBlockBinding(this.handle,t,r)}}const omt=34918,amt=34919,smt=35007,lmt=36795,umt=35976,cmt=35887,fmt=36202;class t1 extends Sa{get[Symbol.toStringTag](){return"Query"}static isSupported(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const n=Qt(t),i=KE(t,Be.TIMER_QUERY);let o=n||i;for(const a of r)switch(a){case"queries":o=o&&n;break;case"timers":o=o&&i;break;default:gt(!1)}return o}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(smt)}beginOcclusionQuery(){let{conservative:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.begin(t?fmt:cmt)}beginTransformFeedbackQuery(){return this.begin(umt)}begin(t){return this._queryPending?this:(this.target=t,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;const t=this.gl2.getQueryParameter(this.handle,amt);return t&&(this._queryPending=!1),t}isTimerDisjoint(){return this.gl2.getParameter(lmt)}getResult(){return this.gl2.getQueryParameter(this.handle,omt)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let r=0;return this._pollingPromise=new Promise((n,i)=>{const o=()=>{this.isResultAvailable()?(n(this.getResult()),this._pollingPromise=null):r++>t?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(o)};requestAnimationFrame(o)}),this._pollingPromise}_createHandle(){return t1.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}class oz extends Sa{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(t){return Qt(t)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Or(t),super(t,r),this.initialize(r),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Yc(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(t),this}setProps(t){"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"bindOnUse"in t&&(t=t.bindOnUse),"buffers"in t&&this.setBuffers(t.buffers)}setBuffers(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.bind(()=>{for(const r in t)this.setBuffer(r,t[r])}),this}setBuffer(t,r){const n=this._getVaryingIndex(t),{buffer:i,byteSize:o,byteOffset:a}=this._getBufferParams(r);return n<0?(this.unused[t]=i,Lt.warn("".concat(this.id," unused varying buffer ").concat(t))(),this):(this.buffers[n]=r,this.bindOnUse||this._bindBuffer(n,i,a,o),this)}begin(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(t),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(t){let r,n,i;return t instanceof Pe?i=t:(i=t.buffer,n=t.byteSize,r=t.byteOffset),(r!==void 0||n!==void 0)&&(r=r||0,n=n||i.byteLength-r),{buffer:i,byteOffset:r,byteSize:n}}_getVaryingInfo(t){return this.configuration&&this.configuration.getVaryingInfo(t)}_getVaryingIndex(t){if(this.configuration)return this.configuration.getVaryingInfo(t).location;const r=Number(t);return Number.isFinite(r)?r:-1}_bindBuffers(){if(this.bindOnUse)for(const t in this.buffers){const{buffer:r,byteSize:n,byteOffset:i}=this._getBufferParams(this.buffers[t]);this._bindBuffer(t,r,i,n)}}_unbindBuffers(){if(this.bindOnUse)for(const t in this.buffers)this._bindBuffer(t,null)}_bindBuffer(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;const o=r&&r.handle;return!o||i===void 0?this.gl.bindBufferBase(35982,t,o):this.gl.bindBufferRange(35982,t,o,n,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(t){this.gl.bindTransformFeedback(36386,this.handle)}}let pv=null;function hmt(e){return(!pv||pv.byteLength<e)&&(pv=new ArrayBuffer(e)),pv}function dmt(e,t){const r=hmt(e.BYTES_PER_ELEMENT*t);return new e(r,0,t)}function pmt(e){let{target:t,source:r,start:n=0,count:i=1}=e;const o=r.length,a=i*o;let s=0;for(let l=n;s<o;s++)t[l++]=r[s];for(;s<a;)s<a-s?(t.copyWithin(n+s,n,n+s),s*=2):(t.copyWithin(n+s,n,n+a-s),s=a);return t}const vmt="elements must be GL.ELEMENT_ARRAY_BUFFER";class gn extends Sa{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(t){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).constantAttributeZero?Qt(t)||T$()==="Chrome":!0}static getDefaultArray(t){return t.luma=t.luma||{},t.luma.defaultVertexArray||(t.luma.defaultVertexArray=new gn(t,{handle:null,isDefaultArray:!0})),t.luma.defaultVertexArray}static getMaxAttributes(t){return gn.MAX_ATTRIBUTES=gn.MAX_ATTRIBUTES||t.getParameter(34921),gn.MAX_ATTRIBUTES}static setConstant(t,r,n){switch(n.constructor){case Float32Array:gn._setConstantFloatArray(t,r,n);break;case Int32Array:gn._setConstantIntArray(t,r,n);break;case Uint32Array:gn._setConstantUintArray(t,r,n);break;default:gt(!1)}}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=r.id||r.program&&r.program.id;super(t,Object.assign({},r,{id:n})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=r.isDefaultArray||!1,this.gl2=t,this.initialize(r),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return gn.getMaxAttributes(this.gl)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.setProps(t)}setProps(t){return this}setElementBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return gt(!t||t.target===34963,vmt),this.bind(()=>{this.gl.bindBuffer(34963,t?t.handle:null)}),this}setBuffer(t,r,n){if(r.target===34963)return this.setElementBuffer(r,n);const{size:i,type:o,stride:a,offset:s,normalized:l,integer:u,divisor:c}=n,{gl:f,gl2:h}=this;return t=Number(t),this.bind(()=>{f.bindBuffer(34962,r.handle),u?(gt(Qt(f)),h.vertexAttribIPointer(t,i,o,a,s)):f.vertexAttribPointer(t,i,o,l,a,s),f.enableVertexAttribArray(t),h.vertexAttribDivisor(t,c||0)}),this}enable(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return!r&&t===0&&!gn.isSupported(this.gl,{constantAttributeZero:!0})||(t=Number(t),this.bind(()=>r?this.gl.enableVertexAttribArray(t):this.gl.disableVertexAttribArray(t))),this}getConstantBuffer(t,r){const n=this._normalizeConstantArrayValue(r),i=n.byteLength*t,o=n.length*t;let a=!this.buffer;if(this.buffer=this.buffer||new Pe(this.gl,i),a=a||this.buffer.reallocate(i),a=a||!this._compareConstantArrayValues(n,this.bufferValue),a){const s=dmt(r.constructor,o);pmt({target:s,source:n,start:0,count:o}),this.buffer.subData(s),this.bufferValue=r}return this.buffer}_normalizeConstantArrayValue(t){return Array.isArray(t)?new Float32Array(t):t}_compareConstantArrayValues(t,r){if(!t||!r||t.length!==r.length||t.constructor!==r.constructor)return!1;for(let n=0;n<t.length;++n)if(t[n]!==r[n])return!1;return!0}static _setConstantFloatArray(t,r,n){switch(n.length){case 1:t.vertexAttrib1fv(r,n);break;case 2:t.vertexAttrib2fv(r,n);break;case 3:t.vertexAttrib3fv(r,n);break;case 4:t.vertexAttrib4fv(r,n);break;default:gt(!1)}}static _setConstantIntArray(t,r,n){switch(gt(Qt(t)),n.length){case 1:t.vertexAttribI1iv(r,n);break;case 2:t.vertexAttribI2iv(r,n);break;case 3:t.vertexAttribI3iv(r,n);break;case 4:t.vertexAttribI4iv(r,n);break;default:gt(!1)}}static _setConstantUintArray(t,r,n){switch(gt(Qt(t)),n.length){case 1:t.vertexAttribI1uiv(r,n);break;case 2:t.vertexAttribI2uiv(r,n);break;case 3:t.vertexAttribI3uiv(r,n);break;case 4:t.vertexAttribI4uiv(r,n);break;default:gt(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(t){return this.gl2.deleteVertexArray(t),[this.elements]}_bindHandle(t){this.gl2.bindVertexArray(t)}_getParameter(t,r){let{location:n}=r;return gt(Number.isFinite(n)),this.bind(()=>{switch(t){case 34373:return this.gl.getVertexAttribOffset(n,t);default:return this.gl.getVertexAttrib(n,t)}})}}const gmt="VertexArray: attributes must be Buffers or constants (i.e. typed array)",mmt=/^(.+)__LOCATION_([0-9]+)$/,ymt=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class _mt{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=r.id||r.program&&r.program.id;this.id=n,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new gn(t),W$(this,"VertexArray","v6.0",ymt),this.initialize(r),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(t)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:t}=this.vertexArrayObject;return this.values=new Array(t).fill(null),this.accessors=new Array(t).fill(null),this.unused={},this.drawParams=null,this}setProps(t){return"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"attributes"in t&&this.setAttributes(t.attributes),"elements"in t&&this.setElementBuffer(t.elements),"bindOnUse"in t&&(t=t.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(t){return Object.assign(this.attributes,t),this.vertexArrayObject.bind(()=>{for(const r in t){const n=t[r];this._setAttribute(r,n)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.elements=t,this.elementsAccessor=r,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(t,r),this}setBuffer(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(r.target===34963)return this.setElementBuffer(r,n);const{location:i,accessor:o}=this._resolveLocationAndAccessor(t,r,r.accessor,n);return i>=0&&(this.values[i]=r,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,r,o)),this}setConstant(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{location:i,accessor:o}=this._resolveLocationAndAccessor(t,r,Object.assign({size:r.length},n));return i>=0&&(r=this.vertexArrayObject._normalizeConstantArrayValue(r),this.values[i]=r,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Pe(this.gl,{accessor:{size:4}});for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this.values[t]instanceof Pe&&(this.gl.disableVertexAttribArray(t),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(t,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++){const r=this.values[t];r instanceof Pe&&this.setBuffer(t,r)}}),this}bindForDraw(t,r,n){let i;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(t,r),i=n()}),i}_resolveLocationAndAccessor(t,r,n,i){const o={location:-1,accessor:null},{location:a,name:s}=this._getAttributeIndex(t);if(!Number.isFinite(a)||a<0)return this.unused[t]=r,Lt.once(3,()=>"unused value ".concat(t," in ").concat(this.id))(),o;const l=this._getAttributeInfo(s||a);if(!l)return o;const u=this.accessors[a]||{},c=mn.resolve(l.accessor,u,n,i),{size:f,type:h}=c;return gt(Number.isFinite(f)&&Number.isFinite(h)),{location:a,accessor:c}}_getAttributeInfo(t){return this.configuration&&this.configuration.getAttributeInfo(t)}_getAttributeIndex(t){const r=Number(t);if(Number.isFinite(r))return{location:r};const n=mmt.exec(t),i=n?n[1]:t,o=n?Number(n[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(i)+o,name:i}:{location:-1}}_setAttribute(t,r){if(r instanceof Pe)this.setBuffer(t,r);else if(Array.isArray(r)&&r.length&&r[0]instanceof Pe){const n=r[0],i=r[1];this.setBuffer(t,n,i)}else if(ArrayBuffer.isView(r)||Array.isArray(r)){const n=r;this.setConstant(t,n)}else if(r.buffer instanceof Pe){const n=r;this.setBuffer(t,n.buffer,n)}else throw new Error(gmt)}_setConstantAttributes(t,r){const n=Math.max(t|0,r|0);let i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,n);for(let o=1;o<this.vertexArrayObject.MAX_ATTRIBUTES;o++)i=this.values[o],ArrayBuffer.isView(i)&&this._setConstantAttribute(o,i)}_setConstantAttributeZero(t,r){if(gn.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,t);return}const n=this.vertexArrayObject.getConstantBuffer(r,t);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}_setConstantAttribute(t,r){gn.setConstant(this.gl,t,r)}_updateDrawParams(){const t={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let r=0;r<this.vertexArrayObject.MAX_ATTRIBUTES;r++)this._updateDrawParamsForLocation(t,r);return this.elements&&(t.elementCount=this.elements.getElementCount(this.elements.accessor),t.isIndexed=!0,t.indexType=this.elementsAccessor.type||this.elements.accessor.type,t.indexOffset=this.elementsAccessor.offset||0),t.indexCount===1/0&&(t.indexCount=0),t.vertexCount===1/0&&(t.vertexCount=0),t.instanceCount===1/0&&(t.instanceCount=0),t}_updateDrawParamsForLocation(t,r){const n=this.values[r],i=this.accessors[r];if(!n)return;const{divisor:o}=i,a=o>0;if(t.isInstanced=t.isInstanced||a,n instanceof Pe){const s=n;if(a){const l=s.getVertexCount(i);t.instanceCount=Math.min(t.instanceCount,l)}else{const l=s.getVertexCount(i);t.vertexCount=Math.min(t.vertexCount,l)}}}setElements(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Lt.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(t,r)}}function bmt(e,t){const{maxElts:r=16,size:n=1}=t;let i="[";for(let a=0;a<e.length&&a<r;++a)a>0&&(i+=",".concat(a%n===0?" ":"")),i+=l0(e[a],t);const o=e.length>r?"...":"]";return"".concat(i).concat(o)}function l0(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=1e-16,{isInteger:n=!1}=t;if(Array.isArray(e)||ArrayBuffer.isView(e))return bmt(e,t);if(!Number.isFinite(e))return String(e);if(Math.abs(e)<r)return n?"0":"0.";if(n||Math.abs(e)>100&&Math.abs(e)<1e4)return e.toFixed(0);const i=e.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function nL(e){let{header:t="Uniforms",program:r,uniforms:n,undefinedOnly:i=!1}=e;gt(r);const o=".*_.*",a=".*Matrix",s=r._uniformSetters,l={},u=Object.keys(s).sort();let c=0;for(const d of u)!d.match(o)&&!d.match(a)&&cb({table:l,header:t,uniforms:n,uniformName:d,undefinedOnly:i})&&c++;for(const d of u)d.match(a)&&cb({table:l,header:t,uniforms:n,uniformName:d,undefinedOnly:i})&&c++;for(const d of u)l[d]||cb({table:l,header:t,uniforms:n,uniformName:d,undefinedOnly:i})&&c++;let f=0;const h={};if(!i)for(const d in n){const p=n[d];l[d]||(f++,h[d]={Type:"NOT USED: ".concat(p),[t]:l0(p)})}return{table:l,count:c,unusedTable:h,unusedCount:f}}function cb(e){let{table:t,header:r,uniforms:n,uniformName:i,undefinedOnly:o}=e;const a=n[i],s=wmt(a);return!o||!s?(t[i]={[r]:s?l0(a):"N/A","Uniform Type":s?a:"NOT PROVIDED"},!0):!1}function wmt(e){return e!=null}function Smt(e){let{vertexArray:t,header:r="Attributes"}=e;if(!t.configuration)return{};const n={};t.elements&&(n.ELEMENT_ARRAY_BUFFER=iL(t,t.elements,null,r));const i=t.values;for(const o in i){const a=t._getAttributeInfo(o);if(a){let s="".concat(o,": ").concat(a.name);const l=t.accessors[a.location];l&&(s="".concat(o,": ").concat(Tmt(a.name,l))),n[s]=iL(t,i[o],l,r)}}return n}function iL(e,t,r,n){const{gl:i}=e;if(!t)return{[n]:"null","Format ":"N/A"};let o="NOT PROVIDED",a=1,s=0,l=0,u,c,f;if(r&&(o=r.type,a=r.size,o=String(o).replace("Array",""),u=o.indexOf("nt")!==-1),t instanceof Pe){const h=t,{data:d,changed:p}=h.getDebugData();c=p?"*":"",f=d,l=h.byteLength,s=l/d.BYTES_PER_ELEMENT/a;let v;if(r){const g=r.divisor>0;v="".concat(g?"I ":"P "," ").concat(s," (x").concat(a,"=").concat(l," bytes ").concat(gs(i,o),")")}else u=!0,v="".concat(l," bytes");return{[n]:"".concat(c).concat(l0(f,{size:a,isInteger:u})),"Format ":v}}return f=t,a=t.length,o=String(t.constructor.name).replace("Array",""),u=o.indexOf("nt")!==-1,{[n]:"".concat(l0(f,{size:a,isInteger:u})," (constant)"),"Format ":"".concat(a,"x").concat(o," (constant)")}}function Tmt(e,t){const{type:r,size:n}=t,i=nz(r,n);return i?"".concat(e," (").concat(i.name,")"):e}function Pmt(e){const t={},r="Accessors for ".concat(e.id);for(const n of e.attributeInfos)if(n){const i=oL(n);t["in ".concat(i)]={[r]:JSON.stringify(n.accessor)}}for(const n of e.varyingInfos)if(n){const i=oL(n);t["out ".concat(i)]={[r]:JSON.stringify(n.accessor)}}return t}function oL(e){const{type:t,size:r}=e.accessor,n=nz(t,r);return n?"".concat(n.name," ").concat(e.name):e.name}const aL=wa()&&typeof document<"u";let Emt=0;class Amt{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{onCreateContext:r=g=>G$(g),onAddHTML:n=null,onInitialize:i=()=>{},onRender:o=()=>{},onFinalize:a=()=>{},onError:s,gl:l=null,glOptions:u={},debug:c=!1,createFramebuffer:f=!1,autoResizeViewport:h=!0,autoResizeDrawingBuffer:d=!0,stats:p=kl.get("animation-loop-".concat(Emt++))}=t;let{useDevicePixels:v=!0}=t;"useDevicePixelRatio"in t&&(Lt.deprecated("useDevicePixelRatio","useDevicePixels")(),v=t.useDevicePixelRatio),this.props={onCreateContext:r,onAddHTML:n,onInitialize:i,onRender:o,onFinalize:a,onError:s,gl:l,glOptions:u,debug:c,createFramebuffer:f},this.gl=l,this.needsRedraw=null,this.timeline=null,this.stats=p,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:h,autoResizeDrawingBuffer:d,useDevicePixels:v}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(t){return gt(typeof t=="string"),this.needsRedraw=this.needsRedraw||t,this}setProps(t){return"autoResizeViewport"in t&&(this.autoResizeViewport=t.autoResizeViewport),"autoResizeDrawingBuffer"in t&&(this.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer),"useDevicePixels"in t&&(this.useDevicePixels=t.useDevicePixels),this}start(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._running)return this;this._running=!0;const r=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(t),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=t1.isSupported(this.gl,["timers"])?new t1(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(n=>{this._running&&(this._addCallbackData(n||{}),n!==!1&&this._startLoop())});return this.props.onError&&r.catch(this.props.onError),this}redraw(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(t){return this.timeline=t,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(t=>{this._resolveNextFrame=t})),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const n=document.getElementById(t);return n?Number(n.value):r}setViewParameters(){return Lt.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const t=()=>{!this._running||(this.redraw(),this._animationFrameId=this._requestAnimationFrame(t))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(t)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=aL?new Promise((t,r)=>{if(aL&&document.readyState==="complete"){t(document);return}window.addEventListener("load",()=>{t(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(t){this.display&&(this.display.delete(),this.display.animationLoop=null),t&&(t.animationLoop=this),this.display=t}_cancelAnimationFrame(t){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(t):Ovt(t)}_requestAnimationFrame(t){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(t):Ivt(t)}_renderFrame(){if(this.display){this.display._renderFrame(...arguments);return}this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:t,height:r,aspect:n}=this._getSizeAndAspect();(t!==this.animationProps.width||r!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=r,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(t){typeof t=="object"&&t!==null&&(this.animationProps=Object.assign({},this.animationProps,t))}_createWebGLContext(t){if(this.offScreen=t.canvas&&typeof OffscreenCanvas<"u"&&t.canvas instanceof OffscreenCanvas,t=Object.assign({},t,this.props.glOptions),this.gl=this.props.gl?YE(this.props.gl,t):this.onCreateContext(t),!yy(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");bvt(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const t=document.createElement("div");document.body.appendChild(t),t.style.position="relative";const r=document.createElement("div");r.style.position="absolute",r.style.left="10px",r.style.bottom="10px",r.style.width="300px",r.style.background="white",t.appendChild(this.gl.canvas),t.appendChild(r);const n=this.props.onAddHTML(r);n&&(r.innerHTML=n)}}_getSizeAndAspect(){const t=this.gl.drawingBufferWidth,r=this.gl.drawingBufferHeight;let n=1;const{canvas:i}=this.gl;return i&&i.clientHeight?n=i.clientWidth/i.clientHeight:t>0&&r>0&&(n=t/r),{width:t,height:r,aspect:n}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&Evt(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new nr(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:t}=this.gl;t&&(t.addEventListener("mousemove",this._onMousemove),t.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(t){this.animationProps._mousePosition=[t.offsetX,t.offsetY]}_onMouseleave(t){this.animationProps._mousePosition=null}}const U0="vs",QE="fs";function Pn(e,t){if(!e)throw new Error(t||"shadertools: assertion failed.")}const fb={number:{validate(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},array:{validate(e,t){return Array.isArray(e)||ArrayBuffer.isView(e)}}};function Cmt(e){const t={};for(const r in e){const n=e[r],i=Mmt(n);t[r]=i}return t}function Mmt(e){let t=sL(e);return t==="object"?e?"type"in e?Object.assign({},e,fb[e.type]):"value"in e?(t=sL(e.value),Object.assign({type:t},e,fb[t])):{type:"object",value:e}:{type:"object",value:null}:Object.assign({type:t,value:e},fb[t])}function sL(e){return Array.isArray(e)||ArrayBuffer.isView(e)?"array":typeof e}const kmt="vs",xmt="fs";class lL{constructor(t){let{name:r,vs:n,fs:i,dependencies:o=[],uniforms:a,getUniforms:s,deprecations:l=[],defines:u={},inject:c={},vertexShader:f,fragmentShader:h}=t;Pn(typeof r=="string"),this.name=r,this.vs=n||f,this.fs=i||h,this.getModuleUniforms=s,this.dependencies=o,this.deprecations=this._parseDeprecationDefinitions(l),this.defines=u,this.injections=Lmt(c),a&&(this.uniforms=Cmt(a))}getModuleSource(t){let r;switch(t){case kmt:r=this.vs||"";break;case xmt:r=this.fs||"";break;default:Pn(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),`
`).concat(r,"// END MODULE_").concat(this.name,`

`)}getUniforms(t,r){return this.getModuleUniforms?this.getModuleUniforms(t,r):this.uniforms?this._defaultGetUniforms(t):{}}getDefines(){return this.defines}checkDeprecations(t,r){this.deprecations.forEach(n=>{n.regex.test(t)&&(n.deprecated?r.deprecated(n.old,n.new)():r.removed(n.old,n.new)())})}_parseDeprecationDefinitions(t){return t.forEach(r=>{switch(r.type){case"function":r.regex=new RegExp("\\b".concat(r.old,"\\("));break;default:r.regex=new RegExp("".concat(r.type," ").concat(r.old,";"))}}),t}_defaultGetUniforms(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r={},n=this.uniforms;for(const i in n){const o=n[i];i in t&&!o.private?(o.validate&&Pn(o.validate(t[i],o),"".concat(this.name,": invalid ").concat(i)),r[i]=t[i]):r[i]=o.value}return r}}function Lmt(e){const t={vs:{},fs:{}};for(const r in e){let n=e[r];const i=r.slice(0,2);typeof n=="string"&&(n={order:0,injection:n}),t[i][r]=n}return t}function Imt(e){return Omt(sz(e))}function Omt(e){const t={},r={};return az({modules:e,level:0,moduleMap:t,moduleDepth:r}),Object.keys(r).sort((n,i)=>r[i]-r[n]).map(n=>t[n])}function az(e){let{modules:t,level:r,moduleMap:n,moduleDepth:i}=e;if(r>=5)throw new Error("Possible loop in shader dependency graph");for(const o of t)n[o.name]=o,(i[o.name]===void 0||i[o.name]<r)&&(i[o.name]=r);for(const o of t)o.dependencies&&az({modules:o.dependencies,level:r+1,moduleMap:n,moduleDepth:i})}function sz(e,t){return e.map(r=>(r instanceof lL||(Pn(typeof r!="string","Shader module use by name is deprecated. Import shader module '".concat(r,"' and use it directly.")),Pn(r.name,"shader module has no name"),r=new lL(r),r.dependencies=sz(r.dependencies)),r))}function Rmt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=typeof window<"u"?window.navigator||{}:{},r=e.userAgent||t.userAgent||"",n=r.indexOf("MSIE ")!==-1,i=r.indexOf("Trident/")!==-1;return n||i}const Dmt=7936,Nmt=7937,Fmt=7938,Bmt=35724,tA={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},bl={};Object.keys(tA).forEach(e=>{bl[e]=e});function $mt(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:Boolean(e&&e._version===2)}function zmt(e){const t=e.getExtension("WEBGL_debug_renderer_info"),r=e.getParameter(t&&t.UNMASKED_VENDOR_WEBGL||Dmt),n=e.getParameter(t&&t.UNMASKED_RENDERER_WEBGL||Nmt);return{gpuVendor:Vmt(r,n),vendor:r,renderer:n,version:e.getParameter(Fmt),shadingLanguageVersion:e.getParameter(Bmt)}}function Vmt(e,t){return e.match(/NVIDIA/i)||t.match(/NVIDIA/i)?"NVIDIA":e.match(/INTEL/i)||t.match(/INTEL/i)?"INTEL":e.match(/AMD/i)||t.match(/AMD/i)||e.match(/ATI/i)||t.match(/ATI/i)?"AMD":"UNKNOWN GPU"}const hb={};function uL(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=tA[t];if(Pn(n,t),!Rmt(r))return!0;if(t in hb)return hb[t];const i=n[0],o=r.behavior||"enable",a="#extension GL_".concat(i," : ").concat(o,`
void main(void) {}`),s=e.createShader(35633);e.shaderSource(s,a),e.compileShader(s);const l=e.getShaderParameter(s,35713);return e.deleteShader(s),hb[t]=l,l}function Umt(e,t){const r=tA[t];Pn(r,t);const n=$mt(e)&&r[1]||r[0],i=typeof n=="string"?Boolean(e.getExtension(n)):n;return Pn(i===!1||i===!0),i}function vv(e,t){return t=Array.isArray(t)?t:[t],t.every(r=>Umt(e,r))}function Gmt(e){switch(zmt(e).gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function jmt(e,t,r){let n=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return vv(e,bl.GLSL_FRAG_DEPTH)&&(n+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),vv(e,bl.GLSL_DERIVATIVES)&&uL(e,bl.GLSL_DERIVATIVES)&&(n+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),vv(e,bl.GLSL_FRAG_DATA)&&uL(e,bl.GLSL_FRAG_DATA,{behavior:"require"})&&(n+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),vv(e,bl.GLSL_TEXTURE_LOD)&&(n+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),n}const Wmt=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,Hmt=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,Xmt={[U0]:Wmt,[QE]:Hmt},qg="__LUMA_INJECT_DECLARATIONS__",cL=/void\s+main\s*\([^)]*\)\s*\{\n?/,fL=/}\n?[^{}]*$/,db=[];function hL(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=t===U0;for(const o in r){const a=r[o];a.sort((l,u)=>l.order-u.order),db.length=a.length;for(let l=0,u=a.length;l<u;++l)db[l]=a[l].injection;const s="".concat(db.join(`
`),`
`);switch(o){case"vs:#decl":i&&(e=e.replace(qg,s));break;case"vs:#main-start":i&&(e=e.replace(cL,l=>l+s));break;case"vs:#main-end":i&&(e=e.replace(fL,l=>s+l));break;case"fs:#decl":i||(e=e.replace(qg,s));break;case"fs:#main-start":i||(e=e.replace(cL,l=>l+s));break;case"fs:#main-end":i||(e=e.replace(fL,l=>s+l));break;default:e=e.replace(o,l=>l+s)}}return e=e.replace(qg,""),n&&(e=e.replace(/\}\s*$/,o=>o+Xmt[t])),e}function V3(e){const t={};return Pn(Array.isArray(e)&&e.length>1),e.forEach(r=>{for(const n in r)t[n]=t[n]?"".concat(t[n],`
`).concat(r[n]):r[n]}),t}function qc(e){return new RegExp("\\b".concat(e,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const lz=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],Ymt=[...lz,[qc("attribute"),"in $1"],[qc("varying"),"out $1"]],qmt=[...lz,[qc("varying"),"in $1"]],uz=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],Zmt=[...uz,[qc("in"),"attribute $1"],[qc("out"),"varying $1"]],Kmt=[...uz,[qc("in"),"varying $1"]],U3="gl_FragColor",G3=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,Jmt=/void\s+main\s*\([^)]*\)\s*\{\n?/;function Qmt(e,t,r){switch(t){case 300:return r?e1(e,Ymt):t1t(e);case 100:return r?e1(e,Zmt):e1t(e);default:throw new Error("unknown GLSL version ".concat(t))}}function e1(e,t){for(const[r,n]of t)e=e.replace(r,n);return e}function t1t(e){e=e1(e,qmt);const t=e.match(G3);if(t){const r=t[1];e=e.replace(new RegExp("\\b".concat(U3,"\\b"),"g"),r)}else{const r="fragmentColor";e=e.replace(Jmt,n=>"out vec4 ".concat(r,`;
`).concat(n)).replace(new RegExp("\\b".concat(U3,"\\b"),"g"),r)}return e}function e1t(e){e=e1(e,Kmt);const t=e.match(G3);if(t){const r=t[1];e=e.replace(G3,"").replace(new RegExp("\\b".concat(r,"\\b"),"g"),U3)}return e}const r1t=`

`.concat(qg,`

`),cz={[U0]:"vertex",[QE]:"fragment"},n1t=`precision highp float;

`;function i1t(e,t){const{vs:r,fs:n}=t,i=Imt(t.modules||[]);return{gl:e,vs:dL(e,Object.assign({},t,{source:r,type:U0,modules:i})),fs:dL(e,Object.assign({},t,{source:n,type:QE,modules:i})),getUniforms:o1t(i)}}function dL(e,t){let{id:r,source:n,type:i,modules:o,defines:a={},hookFunctions:s=[],inject:l={},transpileToGLSL100:u=!1,prologue:c=!0,log:f}=t;Pn(typeof n=="string","shader source must be a string");const h=i===U0,d=n.split(`
`);let p=100,v="",g=n;d[0].indexOf("#version ")===0?(p=300,v=d[0],g=d.slice(1).join(`
`)):v="#version ".concat(p);const m={};o.forEach(P=>{Object.assign(m,P.getDefines())}),Object.assign(m,a);let y=c?"".concat(v,`
`).concat(s1t({id:r,source:n,type:i}),`
`).concat(a1t({type:i}),`
`).concat(Gmt(e),`
`).concat(jmt(e),`
`).concat(l1t(m),`
`).concat(h?"":n1t,`
`):"".concat(v,`
`);const _=c1t(s),b={},T={},S={};for(const P in l){const C=typeof l[P]=="string"?{injection:l[P],order:0}:l[P],A=P.match(/^(v|f)s:(#)?([\w-]+)$/);if(A){const M=A[2],k=A[3];M?k==="decl"?T[P]=[C]:S[P]=[C]:b[P]=[C]}else S[P]=[C]}for(const P of o){f&&P.checkDeprecations(g,f),y+=P.getModuleSource(i,p);const A=P.injections[i];for(const M in A){const k=M.match(/^(v|f)s:#([\w-]+)$/);if(k){const F=k[2]==="decl"?T:S;F[M]=F[M]||[],F[M].push(A[M])}else b[M]=b[M]||[],b[M].push(A[M])}}return y+=r1t,y=hL(y,i,T),y+=u1t(_[i],b),y+=g,y=hL(y,i,S),y=Qmt(y,u?100:p,h),y}function o1t(e){return function(r){const n={};for(const i of e){const o=i.getUniforms(r,n);Object.assign(n,o)}return n}}function a1t(e){let{type:t}=e;return`
#define SHADER_TYPE_`.concat(cz[t].toUpperCase(),`
`)}function s1t(e){let{id:t,source:r,type:n}=e;return t&&typeof t=="string"&&r.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME `.concat(t,"_").concat(cz[n],`

`):""}function l1t(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=0,r="";for(const n in e){t===0&&(r+=`
// APPLICATION DEFINES
`),t++;const i=e[n];(i||Number.isFinite(i))&&(r+="#define ".concat(n.toUpperCase()," ").concat(e[n],`
`))}return t===0&&(r+=`
`),r}function u1t(e,t){let r="";for(const n in e){const i=e[n];if(r+="void ".concat(i.signature,` {
`),i.header&&(r+="  ".concat(i.header)),t[n]){const o=t[n];o.sort((a,s)=>a.order-s.order);for(const a of o)r+="  ".concat(a.injection,`
`)}i.footer&&(r+="  ".concat(i.footer)),r+=`}
`}return r}function c1t(e){const t={vs:{},fs:{}};return e.forEach(r=>{let n;typeof r!="string"?(n=r,r=n.hook):n={},r=r.trim();const[i,o]=r.split(":"),a=r.replace(/\(.+/,"");t[i][a]=Object.assign(n,{signature:o})}),t}const f1t="void main() {gl_FragColor = vec4(0);}",fz=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,h1t=`#version 300 es
`.concat(fz);function hz(e,t){t=Array.isArray(t)?t:[t];const r=e.replace(/^\s+/,"").split(/\s+/),[n,i,o]=r;if(!t.includes(n)||!i||!o)return null;const a=o.split(";")[0];return{qualifier:n,type:i,name:a}}function dz(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{version:t=100,input:r,inputType:n,output:i}=e;if(!r)return t===300?h1t:t>300?"#version ".concat(t,`
`).concat(fz):f1t;const o=v1t(r,n);return t>=300?"#version ".concat(t," ").concat(t===300?"es":"",`
in `).concat(n," ").concat(r,`;
out vec4 `).concat(i,`;
void main() {
  `).concat(i," = ").concat(o,`;
}`):"varying ".concat(n," ").concat(r,`;
void main() {
  gl_FragColor = `).concat(o,`;
}`)}function d1t(e){switch(e){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Pn(!1),null}}function p1t(e){switch(e){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Pn(!1),null}}function v1t(e,t){switch(t){case"float":return"vec4(".concat(e,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(e,", 0.0, 1.0)");case"vec3":return"vec4(".concat(e,", 1.0)");case"vec4":return e;default:return Pn(!1),null}}const g1t=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,m1t={name:"fp32",vs:g1t,fs:null};function u0(e,t){if(!e)throw new Error("math.gl assertion ".concat(t))}const Hr={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function y1t(e,{precision:t=Hr.precision}={}){return e=_1t(e),"".concat(parseFloat(e.toPrecision(t)))}function tu(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&!(e instanceof DataView)}function _r(e,t,r){return w1t(e,n=>Math.max(t,Math.min(r,n)))}function zl(e,t,r){return tu(e)?e.map((n,i)=>zl(n,t[i],r)):r*t+(1-r)*e}function _o(e,t,r){const n=Hr.EPSILON;r&&(Hr.EPSILON=r);try{if(e===t)return!0;if(tu(e)&&tu(t)){if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(!_o(e[i],t[i]))return!1;return!0}return e&&e.equals?e.equals(t):t&&t.equals?t.equals(e):typeof e=="number"&&typeof t=="number"?Math.abs(e-t)<=Hr.EPSILON*Math.max(1,Math.abs(e),Math.abs(t)):!1}finally{Hr.EPSILON=n}}function _1t(e){return Math.round(e/Hr.EPSILON)*Hr.EPSILON}function b1t(e){return e.clone?e.clone():new Array(e.length)}function w1t(e,t,r){if(tu(e)){const n=e;r=r||b1t(n);for(let i=0;i<r.length&&i<n.length;++i)r[i]=t(e[i],i,r);return r}return t(e)}function S1t(e){function t(){var r=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(r,Object.getPrototypeOf(this)),r}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}class eA extends S1t(Array){clone(){return new this.constructor().copy(this)}fromArray(t,r=0){for(let n=0;n<this.ELEMENTS;++n)this[n]=t[n+r];return this.check()}toArray(t=[],r=0){for(let n=0;n<this.ELEMENTS;++n)t[r+n]=this[n];return t}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}to(t){return t===this?this:tu(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Hr)}formatString(t){let r="";for(let n=0;n<this.ELEMENTS;++n)r+=(n>0?", ":"")+y1t(this[n],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(r,"]")}equals(t){if(!t||this.length!==t.length)return!1;for(let r=0;r<this.ELEMENTS;++r)if(!_o(this[r],t[r]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let r=0;r<this.ELEMENTS;++r)if(this[r]!==t[r])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,r,n){if(n===void 0)return this.lerp(this,t,r);for(let i=0;i<this.ELEMENTS;++i){const o=t[i];this[i]=o+n*(r[i]-o)}return this.check()}min(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(t[r],this[r]);return this.check()}max(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.max(t[r],this[r]);return this.check()}clamp(t,r){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t[n]),r[n]);return this.check()}add(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]+=r[n];return this.check()}subtract(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]-=r[n];return this.check()}scale(t){if(typeof t=="number")for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;else for(let r=0;r<this.ELEMENTS&&r<t.length;++r)this[r]*=t[r];return this.check()}multiplyByScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;return this.check()}check(){if(Hr.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let t=this.length===this.ELEMENTS;for(let r=0;r<this.ELEMENTS;++r)t=t&&Number.isFinite(this[r]);return t}sub(t){return this.subtract(t)}setScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=t;return this.check()}addScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;return this.check()}divideScalar(t){return this.multiplyByScalar(1/t)}clampScalar(t,r){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t),r);return this.check()}get elements(){return this}}function T1t(e,t){if(e.length!==t)return!1;for(let r=0;r<e.length;++r)if(!Number.isFinite(e[r]))return!1;return!0}function Me(e){if(!Number.isFinite(e))throw new Error("Invalid number ".concat(e));return e}function Md(e,t,r=""){if(Hr.debug&&!T1t(e,t))throw new Error("math.gl: ".concat(r," some fields set to invalid numbers'"));return e}class pz extends eA{get x(){return this[0]}set x(t){this[0]=Me(t)}get y(){return this[1]}set y(t){this[1]=Me(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let r=0;r<this.ELEMENTS;++r)t+=this[r]*this[r];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let r=0;for(let n=0;n<this.ELEMENTS;++n){const i=this[n]-t[n];r+=i*i}return Me(r)}dot(t){let r=0;for(let n=0;n<this.ELEMENTS;++n)r+=this[n]*t[n];return Me(r)}normalize(){const t=this.magnitude();if(t!==0)for(let r=0;r<this.ELEMENTS;++r)this[r]/=t;return this.check()}multiply(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]*=r[n];return this.check()}divide(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]/=r[n];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return u0(t>=0&&t<this.ELEMENTS,"index is out of range"),Me(this[t])}setComponent(t,r){return u0(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=r,this.check()}addVectors(t,r){return this.copy(t).add(r)}subVectors(t,r){return this.copy(t).subtract(r)}multiplyVectors(t,r){return this.copy(t).multiply(r)}addScaledVector(t,r){return this.add(new this.constructor(t).multiplyScalar(r))}}var kd=1e-6,Ii=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function P1t(){var e=new Ii(2);return Ii!=Float32Array&&(e[0]=0,e[1]=0),e}function r1(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function vz(e,t){return e[0]=-t[0],e[1]=-t[1],e}function gz(e,t,r,n){var i=t[0],o=t[1];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e}function E1t(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[3]*i+r[6],e[1]=r[1]*n+r[4]*i+r[7],e}function A1t(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e}(function(){var e=P1t();return function(t,r,n,i,o,a){var s,l;for(r||(r=2),n||(n=0),i?l=Math.min(i*r+n,t.length):l=t.length,s=n;s<l;s+=r)e[0]=t[s],e[1]=t[s+1],o(e,e,a),t[s]=e[0],t[s+1]=e[1];return t}})();function C1t(e,t,r){const n=t[0],i=t[1],o=r[3]*n+r[7]*i||1;return e[0]=(r[0]*n+r[4]*i)/o,e[1]=(r[1]*n+r[5]*i)/o,e}function mz(e,t,r){const n=t[0],i=t[1],o=t[2],a=r[3]*n+r[7]*i+r[11]*o||1;return e[0]=(r[0]*n+r[4]*i+r[8]*o)/a,e[1]=(r[1]*n+r[5]*i+r[9]*o)/a,e[2]=(r[2]*n+r[6]*i+r[10]*o)/a,e}function M1t(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e[2]=t[2],e}function k1t(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e[2]=t[2],e[3]=t[3],e}function yz(e,t,r){const n=t[0],i=t[1],o=t[2];return e[0]=r[0]*n+r[3]*i+r[6]*o,e[1]=r[1]*n+r[4]*i+r[7]*o,e[2]=r[2]*n+r[5]*i+r[8]*o,e[3]=t[3],e}function _z(){var e=new Ii(3);return Ii!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function x1t(e){var t=e[0],r=e[1],n=e[2];return Math.hypot(t,r,n)}function pL(e,t,r){var n=new Ii(3);return n[0]=e,n[1]=t,n[2]=r,n}function L1t(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function I1t(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n}function O1t(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function R1t(e,t){var r=t[0],n=t[1],i=t[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function bz(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Zg(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0],s=r[1],l=r[2];return e[0]=i*l-o*s,e[1]=o*a-n*l,e[2]=n*s-i*a,e}function D1t(e,t,r,n){var i=t[0],o=t[1],a=t[2];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e[2]=a+n*(r[2]-a),e}function rA(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[3]*n+r[7]*i+r[11]*o+r[15];return a=a||1,e[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/a,e[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/a,e[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/a,e}function wz(e,t,r){var n=t[0],i=t[1],o=t[2];return e[0]=n*r[0]+i*r[3]+o*r[6],e[1]=n*r[1]+i*r[4]+o*r[7],e[2]=n*r[2]+i*r[5]+o*r[8],e}function Sz(e,t,r){var n=r[0],i=r[1],o=r[2],a=r[3],s=t[0],l=t[1],u=t[2],c=i*u-o*l,f=o*s-n*u,h=n*l-i*s,d=i*h-o*f,p=o*c-n*h,v=n*f-i*c,g=a*2;return c*=g,f*=g,h*=g,d*=2,p*=2,v*=2,e[0]=s+c+d,e[1]=l+f+p,e[2]=u+h+v,e}function N1t(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function F1t(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function B1t(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function $1t(e,t){var r=e[0],n=e[1],i=e[2],o=t[0],a=t[1],s=t[2],l=Math.sqrt(r*r+n*n+i*i),u=Math.sqrt(o*o+a*a+s*s),c=l*u,f=c&&bz(e,t)/c;return Math.acos(Math.min(Math.max(f,-1),1))}var Tz=L1t,Pz=x1t,pb=I1t;(function(){var e=_z();return function(t,r,n,i,o,a){var s,l;for(r||(r=3),n||(n=0),i?l=Math.min(i*r+n,t.length):l=t.length,s=n;s<l;s+=r)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2];return t}})();const vb=[0,0,0];let gv;class _t extends pz{static get ZERO(){return gv||(gv=new _t(0,0,0),Object.freeze(gv)),gv}constructor(t=0,r=0,n=0){super(-0,-0,-0),arguments.length===1&&tu(t)?this.copy(t):(Hr.debug&&(Me(t),Me(r),Me(n)),this[0]=t,this[1]=r,this[2]=n)}set(t,r,n){return this[0]=t,this[1]=r,this[2]=n,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}fromObject(t){return Hr.debug&&(Me(t.x),Me(t.y),Me(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}get ELEMENTS(){return 3}get z(){return this[2]}set z(t){this[2]=Me(t)}angle(t){return $1t(this,t)}cross(t){return Zg(this,this,t),this.check()}rotateX({radians:t,origin:r=vb}){return N1t(this,this,r,t),this.check()}rotateY({radians:t,origin:r=vb}){return F1t(this,this,r,t),this.check()}rotateZ({radians:t,origin:r=vb}){return B1t(this,this,r,t),this.check()}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return rA(this,this,t),this.check()}transformAsVector(t){return mz(this,this,t),this.check()}transformByMatrix3(t){return wz(this,this,t),this.check()}transformByMatrix2(t){return M1t(this,this,t),this.check()}transformByQuaternion(t){return Sz(this,this,t),this.check()}}let mv;class nA extends pz{static get ZERO(){return mv||(mv=new nA(0,0,0,0),Object.freeze(mv)),mv}constructor(t=0,r=0,n=0,i=0){super(-0,-0,-0,-0),tu(t)&&arguments.length===1?this.copy(t):(Hr.debug&&(Me(t),Me(r),Me(n),Me(i)),this[0]=t,this[1]=r,this[2]=n,this[3]=i)}set(t,r,n,i){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}fromObject(t){return Hr.debug&&(Me(t.x),Me(t.y),Me(t.z),Me(t.w)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t.w=this[3],t}get ELEMENTS(){return 4}get z(){return this[2]}set z(t){this[2]=Me(t)}get w(){return this[3]}set w(t){this[3]=Me(t)}transform(t){return rA(this,this,t),this.check()}transformByMatrix3(t){return yz(this,this,t),this.check()}transformByMatrix2(t){return k1t(this,this,t),this.check()}transformByQuaternion(t){return Sz(this,this,t),this.check()}applyMatrix4(t){return t.transform(this,this),this}}class Ez extends eA{toString(){let t="[";if(Hr.printRowMajor){t+="row-major:";for(let r=0;r<this.RANK;++r)for(let n=0;n<this.RANK;++n)t+=" ".concat(this[n*this.RANK+r])}else{t+="column-major:";for(let r=0;r<this.ELEMENTS;++r)t+=" ".concat(this[r])}return t+="]",t}getElementIndex(t,r){return r*this.RANK+t}getElement(t,r){return this[r*this.RANK+t]}setElement(t,r,n){return this[r*this.RANK+t]=Me(n),this}getColumn(t,r=new Array(this.RANK).fill(-0)){const n=t*this.RANK;for(let i=0;i<this.RANK;++i)r[i]=this[n+i];return r}setColumn(t,r){const n=t*this.RANK;for(let i=0;i<this.RANK;++i)this[n+i]=r[i];return this}}function z1t(){var e=new Ii(9);return Ii!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function V1t(e,t){if(e===t){var r=t[1],n=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=n,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function U1t(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=c*a-s*u,h=-c*o+s*l,d=u*o-a*l,p=r*f+n*h+i*d;return p?(p=1/p,e[0]=f*p,e[1]=(-c*n+i*u)*p,e[2]=(s*n-i*a)*p,e[3]=h*p,e[4]=(c*r-i*l)*p,e[5]=(-s*r+i*o)*p,e[6]=d*p,e[7]=(-u*r+n*l)*p,e[8]=(a*r-n*o)*p,e):null}function G1t(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8];return t*(u*o-a*l)+r*(-u*i+a*s)+n*(l*i-o*s)}function vL(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=r[0],d=r[1],p=r[2],v=r[3],g=r[4],m=r[5],y=r[6],_=r[7],b=r[8];return e[0]=h*n+d*a+p*u,e[1]=h*i+d*s+p*c,e[2]=h*o+d*l+p*f,e[3]=v*n+g*a+m*u,e[4]=v*i+g*s+m*c,e[5]=v*o+g*l+m*f,e[6]=y*n+_*a+b*u,e[7]=y*i+_*s+b*c,e[8]=y*o+_*l+b*f,e}function j1t(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=r[0],d=r[1];return e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=h*n+d*a+u,e[7]=h*i+d*s+c,e[8]=h*o+d*l+f,e}function W1t(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=Math.sin(r),d=Math.cos(r);return e[0]=d*n+h*a,e[1]=d*i+h*s,e[2]=d*o+h*l,e[3]=d*a-h*n,e[4]=d*s-h*i,e[5]=d*l-h*o,e[6]=u,e[7]=c,e[8]=f,e}function gL(e,t,r){var n=r[0],i=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function H1t(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r+r,s=n+n,l=i+i,u=r*a,c=n*a,f=n*s,h=i*a,d=i*s,p=i*l,v=o*a,g=o*s,m=o*l;return e[0]=1-f-p,e[3]=c-m,e[6]=h+g,e[1]=c+m,e[4]=1-u-p,e[7]=d-v,e[2]=h-g,e[5]=d+v,e[8]=1-u-f,e}var j3;(function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL1ROW0=3]="COL1ROW0",e[e.COL1ROW1=4]="COL1ROW1",e[e.COL1ROW2=5]="COL1ROW2",e[e.COL2ROW0=6]="COL2ROW0",e[e.COL2ROW1=7]="COL2ROW1",e[e.COL2ROW2=8]="COL2ROW2"})(j3||(j3={}));const X1t=Object.freeze([1,0,0,0,1,0,0,0,1]);class wr extends Ez{static get IDENTITY(){return q1t()}static get ZERO(){return Y1t()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return j3}constructor(t,...r){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(t)?this.copy(t):r.length>0?this.copy([t,...r]):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this.check()}identity(){return this.copy(X1t)}fromObject(t){return this.check()}fromQuaternion(t){return H1t(this,t),this.check()}set(t,r,n,i,o,a,s,l,u){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this[4]=o,this[5]=a,this[6]=s,this[7]=l,this[8]=u,this.check()}setRowMajor(t,r,n,i,o,a,s,l,u){return this[0]=t,this[1]=i,this[2]=s,this[3]=r,this[4]=o,this[5]=l,this[6]=n,this[7]=a,this[8]=u,this.check()}determinant(){return G1t(this)}transpose(){return V1t(this,this),this.check()}invert(){return U1t(this,this),this.check()}multiplyLeft(t){return vL(this,t,this),this.check()}multiplyRight(t){return vL(this,this,t),this.check()}rotate(t){return W1t(this,this,t),this.check()}scale(t){return Array.isArray(t)?gL(this,this,t):gL(this,this,[t,t]),this.check()}translate(t){return j1t(this,this,t),this.check()}transform(t,r){let n;switch(t.length){case 2:n=E1t(r||[-0,-0],t,this);break;case 3:n=wz(r||[-0,-0,-0],t,this);break;case 4:n=yz(r||[-0,-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Md(n,t.length),n}transformVector(t,r){return this.transform(t,r)}transformVector2(t,r){return this.transform(t,r)}transformVector3(t,r){return this.transform(t,r)}}let yv,_v;function Y1t(){return yv||(yv=new wr([0,0,0,0,0,0,0,0,0]),Object.freeze(yv)),yv}function q1t(){return _v||(_v=new wr,Object.freeze(_v)),_v}function Z1t(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function K1t(e,t){if(e===t){var r=t[1],n=t[2],i=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function W3(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],h=t[10],d=t[11],p=t[12],v=t[13],g=t[14],m=t[15],y=r*s-n*a,_=r*l-i*a,b=r*u-o*a,T=n*l-i*s,S=n*u-o*s,P=i*u-o*l,C=c*v-f*p,A=c*g-h*p,M=c*m-d*p,k=f*g-h*v,O=f*m-d*v,F=h*m-d*g,z=y*F-_*O+b*k+T*M-S*A+P*C;return z?(z=1/z,e[0]=(s*F-l*O+u*k)*z,e[1]=(i*O-n*F-o*k)*z,e[2]=(v*P-g*S+m*T)*z,e[3]=(h*S-f*P-d*T)*z,e[4]=(l*M-a*F-u*A)*z,e[5]=(r*F-i*M+o*A)*z,e[6]=(g*b-p*P-m*_)*z,e[7]=(c*P-h*b+d*_)*z,e[8]=(a*O-s*M+u*C)*z,e[9]=(n*M-r*O-o*C)*z,e[10]=(p*S-v*b+m*y)*z,e[11]=(f*b-c*S-d*y)*z,e[12]=(s*A-a*k-l*C)*z,e[13]=(r*k-n*A+i*C)*z,e[14]=(v*_-p*T-g*y)*z,e[15]=(c*T-f*_+h*y)*z,e):null}function J1t(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],f=e[10],h=e[11],d=e[12],p=e[13],v=e[14],g=e[15],m=t*a-r*o,y=t*s-n*o,_=t*l-i*o,b=r*s-n*a,T=r*l-i*a,S=n*l-i*s,P=u*p-c*d,C=u*v-f*d,A=u*g-h*d,M=c*v-f*p,k=c*g-h*p,O=f*g-h*v;return m*O-y*k+_*M+b*A-T*C+S*P}function Vl(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=t[9],d=t[10],p=t[11],v=t[12],g=t[13],m=t[14],y=t[15],_=r[0],b=r[1],T=r[2],S=r[3];return e[0]=_*n+b*s+T*f+S*v,e[1]=_*i+b*l+T*h+S*g,e[2]=_*o+b*u+T*d+S*m,e[3]=_*a+b*c+T*p+S*y,_=r[4],b=r[5],T=r[6],S=r[7],e[4]=_*n+b*s+T*f+S*v,e[5]=_*i+b*l+T*h+S*g,e[6]=_*o+b*u+T*d+S*m,e[7]=_*a+b*c+T*p+S*y,_=r[8],b=r[9],T=r[10],S=r[11],e[8]=_*n+b*s+T*f+S*v,e[9]=_*i+b*l+T*h+S*g,e[10]=_*o+b*u+T*d+S*m,e[11]=_*a+b*c+T*p+S*y,_=r[12],b=r[13],T=r[14],S=r[15],e[12]=_*n+b*s+T*f+S*v,e[13]=_*i+b*l+T*h+S*g,e[14]=_*o+b*u+T*d+S*m,e[15]=_*a+b*c+T*p+S*y,e}function n1(e,t,r){var n=r[0],i=r[1],o=r[2],a,s,l,u,c,f,h,d,p,v,g,m;return t===e?(e[12]=t[0]*n+t[4]*i+t[8]*o+t[12],e[13]=t[1]*n+t[5]*i+t[9]*o+t[13],e[14]=t[2]*n+t[6]*i+t[10]*o+t[14],e[15]=t[3]*n+t[7]*i+t[11]*o+t[15]):(a=t[0],s=t[1],l=t[2],u=t[3],c=t[4],f=t[5],h=t[6],d=t[7],p=t[8],v=t[9],g=t[10],m=t[11],e[0]=a,e[1]=s,e[2]=l,e[3]=u,e[4]=c,e[5]=f,e[6]=h,e[7]=d,e[8]=p,e[9]=v,e[10]=g,e[11]=m,e[12]=a*n+c*i+p*o+t[12],e[13]=s*n+f*i+v*o+t[13],e[14]=l*n+h*i+g*o+t[14],e[15]=u*n+d*i+m*o+t[15]),e}function iA(e,t,r){var n=r[0],i=r[1],o=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Q1t(e,t,r,n){var i=n[0],o=n[1],a=n[2],s=Math.hypot(i,o,a),l,u,c,f,h,d,p,v,g,m,y,_,b,T,S,P,C,A,M,k,O,F,z,R;return s<kd?null:(s=1/s,i*=s,o*=s,a*=s,l=Math.sin(r),u=Math.cos(r),c=1-u,f=t[0],h=t[1],d=t[2],p=t[3],v=t[4],g=t[5],m=t[6],y=t[7],_=t[8],b=t[9],T=t[10],S=t[11],P=i*i*c+u,C=o*i*c+a*l,A=a*i*c-o*l,M=i*o*c-a*l,k=o*o*c+u,O=a*o*c+i*l,F=i*a*c+o*l,z=o*a*c-i*l,R=a*a*c+u,e[0]=f*P+v*C+_*A,e[1]=h*P+g*C+b*A,e[2]=d*P+m*C+T*A,e[3]=p*P+y*C+S*A,e[4]=f*M+v*k+_*O,e[5]=h*M+g*k+b*O,e[6]=d*M+m*k+T*O,e[7]=p*M+y*k+S*O,e[8]=f*F+v*z+_*R,e[9]=h*F+g*z+b*R,e[10]=d*F+m*z+T*R,e[11]=p*F+y*z+S*R,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function Az(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],f=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+u*n,e[5]=a*i+c*n,e[6]=s*i+f*n,e[7]=l*i+h*n,e[8]=u*i-o*n,e[9]=c*i-a*n,e[10]=f*i-s*n,e[11]=h*i-l*n,e}function tyt(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],l=t[3],u=t[8],c=t[9],f=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-u*n,e[1]=a*i-c*n,e[2]=s*i-f*n,e[3]=l*i-h*n,e[8]=o*n+u*i,e[9]=a*n+c*i,e[10]=s*n+f*i,e[11]=l*n+h*i,e}function Cz(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5],f=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+u*n,e[1]=a*i+c*n,e[2]=s*i+f*n,e[3]=l*i+h*n,e[4]=u*i-o*n,e[5]=c*i-a*n,e[6]=f*i-s*n,e[7]=h*i-l*n,e}function eyt(e,t){var r=t[0],n=t[1],i=t[2],o=t[4],a=t[5],s=t[6],l=t[8],u=t[9],c=t[10];return e[0]=Math.hypot(r,n,i),e[1]=Math.hypot(o,a,s),e[2]=Math.hypot(l,u,c),e}function ryt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r+r,s=n+n,l=i+i,u=r*a,c=n*a,f=n*s,h=i*a,d=i*s,p=i*l,v=o*a,g=o*s,m=o*l;return e[0]=1-f-p,e[1]=c+m,e[2]=h-g,e[3]=0,e[4]=c-m,e[5]=1-u-p,e[6]=d+v,e[7]=0,e[8]=h+g,e[9]=d-v,e[10]=1-u-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function nyt(e,t,r,n,i,o,a){var s=1/(r-t),l=1/(i-n),u=1/(o-a);return e[0]=o*2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o*2*l,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(i+n)*l,e[10]=(a+o)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*u,e[15]=0,e}function iyt(e,t,r,n,i){var o=1/Math.tan(t/2),a;return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0?(a=1/(n-i),e[10]=(i+n)*a,e[14]=2*i*n*a):(e[10]=-1,e[14]=-2*n),e}var oyt=iyt;function ayt(e,t,r,n,i,o,a){var s=1/(t-r),l=1/(n-i),u=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+r)*s,e[13]=(i+n)*l,e[14]=(a+o)*u,e[15]=1,e}var syt=ayt;function lyt(e,t,r,n){var i,o,a,s,l,u,c,f,h,d,p=t[0],v=t[1],g=t[2],m=n[0],y=n[1],_=n[2],b=r[0],T=r[1],S=r[2];return Math.abs(p-b)<kd&&Math.abs(v-T)<kd&&Math.abs(g-S)<kd?Z1t(e):(c=p-b,f=v-T,h=g-S,d=1/Math.hypot(c,f,h),c*=d,f*=d,h*=d,i=y*h-_*f,o=_*c-m*h,a=m*f-y*c,d=Math.hypot(i,o,a),d?(d=1/d,i*=d,o*=d,a*=d):(i=0,o=0,a=0),s=f*a-h*o,l=h*i-c*a,u=c*o-f*i,d=Math.hypot(s,l,u),d?(d=1/d,s*=d,l*=d,u*=d):(s=0,l=0,u=0),e[0]=i,e[1]=s,e[2]=c,e[3]=0,e[4]=o,e[5]=l,e[6]=f,e[7]=0,e[8]=a,e[9]=u,e[10]=h,e[11]=0,e[12]=-(i*p+o*v+a*g),e[13]=-(s*p+l*v+u*g),e[14]=-(c*p+f*v+h*g),e[15]=1,e)}function uyt(){var e=new Ii(4);return Ii!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function cyt(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function oA(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function fyt(e){var t=e[0],r=e[1],n=e[2],i=e[3];return Math.hypot(t,r,n,i)}function hyt(e){var t=e[0],r=e[1],n=e[2],i=e[3];return t*t+r*r+n*n+i*i}function dyt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r*r+n*n+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),e[0]=r*a,e[1]=n*a,e[2]=i*a,e[3]=o*a,e}function pyt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function vyt(e,t,r,n){var i=t[0],o=t[1],a=t[2],s=t[3];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e[2]=a+n*(r[2]-a),e[3]=s+n*(r[3]-s),e}function bf(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*a,e[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*a,e[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*a,e[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*a,e}function gyt(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0],s=r[1],l=r[2],u=r[3],c=u*n+s*o-l*i,f=u*i+l*n-a*o,h=u*o+a*i-s*n,d=-a*n-s*i-l*o;return e[0]=c*u+d*-a+f*-l-h*-s,e[1]=f*u+d*-s+h*-a-c*-l,e[2]=h*u+d*-l+c*-s-f*-a,e[3]=t[3],e}(function(){var e=uyt();return function(t,r,n,i,o,a){var s,l;for(r||(r=4),n||(n=0),i?l=Math.min(i*r+n,t.length):l=t.length,s=n;s<l;s+=r)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}})();var H3;(function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL0ROW3=3]="COL0ROW3",e[e.COL1ROW0=4]="COL1ROW0",e[e.COL1ROW1=5]="COL1ROW1",e[e.COL1ROW2=6]="COL1ROW2",e[e.COL1ROW3=7]="COL1ROW3",e[e.COL2ROW0=8]="COL2ROW0",e[e.COL2ROW1=9]="COL2ROW1",e[e.COL2ROW2=10]="COL2ROW2",e[e.COL2ROW3=11]="COL2ROW3",e[e.COL3ROW0=12]="COL3ROW0",e[e.COL3ROW1=13]="COL3ROW1",e[e.COL3ROW2=14]="COL3ROW2",e[e.COL3ROW3=15]="COL3ROW3"})(H3||(H3={}));const myt=45*Math.PI/180,yyt=1,gb=.1,mb=500,_yt=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Nr extends Ez{static get IDENTITY(){return wyt()}static get ZERO(){return byt()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return H3}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,r,n,i,o,a,s,l,u,c,f,h,d,p,v,g){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this[4]=o,this[5]=a,this[6]=s,this[7]=l,this[8]=u,this[9]=c,this[10]=f,this[11]=h,this[12]=d,this[13]=p,this[14]=v,this[15]=g,this.check()}setRowMajor(t,r,n,i,o,a,s,l,u,c,f,h,d,p,v,g){return this[0]=t,this[1]=o,this[2]=u,this[3]=d,this[4]=r,this[5]=a,this[6]=c,this[7]=p,this[8]=n,this[9]=s,this[10]=f,this[11]=v,this[12]=i,this[13]=l,this[14]=h,this[15]=g,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(_yt)}fromObject(t){return this.check()}fromQuaternion(t){return ryt(this,t),this.check()}frustum(t){const{left:r,right:n,bottom:i,top:o,near:a=gb,far:s=mb}=t;return s===1/0?Syt(this,r,n,i,o,a):nyt(this,r,n,i,o,a,s),this.check()}lookAt(t){const{eye:r,center:n=[0,0,0],up:i=[0,1,0]}=t;return lyt(this,r,n,i),this.check()}ortho(t){const{left:r,right:n,bottom:i,top:o,near:a=gb,far:s=mb}=t;return syt(this,r,n,i,o,a,s),this.check()}orthographic(t){const{fovy:r=myt,aspect:n=yyt,focalDistance:i=1,near:o=gb,far:a=mb}=t;mL(r);const s=r/2,l=i*Math.tan(s),u=l*n;return this.ortho({left:-u,right:u,bottom:-l,top:l,near:o,far:a})}perspective(t){const{fovy:r=45*Math.PI/180,aspect:n=1,near:i=.1,far:o=500}=t;return mL(r),oyt(this,r,n,i,o),this.check()}determinant(){return J1t(this)}getScale(t=[-0,-0,-0]){return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(t=[-0,-0,-0]){return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t,r){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],r=r||[-0,-0,-0];const n=this.getScale(r),i=1/n[0],o=1/n[1],a=1/n[2];return t[0]=this[0]*i,t[1]=this[1]*o,t[2]=this[2]*a,t[3]=0,t[4]=this[4]*i,t[5]=this[5]*o,t[6]=this[6]*a,t[7]=0,t[8]=this[8]*i,t[9]=this[9]*o,t[10]=this[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t,r){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0],r=r||[-0,-0,-0];const n=this.getScale(r),i=1/n[0],o=1/n[1],a=1/n[2];return t[0]=this[0]*i,t[1]=this[1]*o,t[2]=this[2]*a,t[3]=this[4]*i,t[4]=this[5]*o,t[5]=this[6]*a,t[6]=this[8]*i,t[7]=this[9]*o,t[8]=this[10]*a,t}transpose(){return K1t(this,this),this.check()}invert(){return W3(this,this),this.check()}multiplyLeft(t){return Vl(this,t,this),this.check()}multiplyRight(t){return Vl(this,this,t),this.check()}rotateX(t){return Az(this,this,t),this.check()}rotateY(t){return tyt(this,this,t),this.check()}rotateZ(t){return Cz(this,this,t),this.check()}rotateXYZ(t){return this.rotateX(t[0]).rotateY(t[1]).rotateZ(t[2])}rotateAxis(t,r){return Q1t(this,this,t,r),this.check()}scale(t){return iA(this,this,Array.isArray(t)?t:[t,t,t]),this.check()}translate(t){return n1(this,this,t),this.check()}transform(t,r){return t.length===4?(r=bf(r||[-0,-0,-0,-0],t,this),Md(r,4),r):this.transformAsPoint(t,r)}transformAsPoint(t,r){const{length:n}=t;let i;switch(n){case 2:i=A1t(r||[-0,-0],t,this);break;case 3:i=rA(r||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Md(i,t.length),i}transformAsVector(t,r){let n;switch(t.length){case 2:n=C1t(r||[-0,-0],t,this);break;case 3:n=mz(r||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Md(n,t.length),n}transformPoint(t,r){return this.transformAsPoint(t,r)}transformVector(t,r){return this.transformAsPoint(t,r)}transformDirection(t,r){return this.transformAsVector(t,r)}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,r,n){return this.identity().translate([t,r,n])}}let bv,wv;function byt(){return bv||(bv=new Nr([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(bv)),bv}function wyt(){return wv||(wv=new Nr,Object.freeze(wv)),wv}function mL(e){if(e>Math.PI*2)throw Error("expected radians")}function Syt(e,t,r,n,i,o){const a=2*o/(r-t),s=2*o/(i-n),l=(r+t)/(r-t),u=(i+n)/(i-n),c=-1,f=-1,h=-2*o;return e[0]=a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=l,e[9]=u,e[10]=c,e[11]=f,e[12]=0,e[13]=0,e[14]=h,e[15]=0,e}function yL(){var e=new Ii(4);return Ii!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function Tyt(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Mz(e,t,r){r=r*.5;var n=Math.sin(r);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(r),e}function _L(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=r[0],l=r[1],u=r[2],c=r[3];return e[0]=n*c+a*s+i*u-o*l,e[1]=i*c+a*l+o*s-n*u,e[2]=o*c+a*u+n*l-i*s,e[3]=a*c-n*s-i*l-o*u,e}function Pyt(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l+a*s,e[1]=i*l+o*s,e[2]=o*l-i*s,e[3]=a*l-n*s,e}function Eyt(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l-o*s,e[1]=i*l+a*s,e[2]=o*l+n*s,e[3]=a*l-i*s,e}function Ayt(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l+i*s,e[1]=i*l-n*s,e[2]=o*l+a*s,e[3]=a*l-o*s,e}function Cyt(e,t){var r=t[0],n=t[1],i=t[2];return e[0]=r,e[1]=n,e[2]=i,e[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),e}function Kg(e,t,r,n){var i=t[0],o=t[1],a=t[2],s=t[3],l=r[0],u=r[1],c=r[2],f=r[3],h,d,p,v,g;return d=i*l+o*u+a*c+s*f,d<0&&(d=-d,l=-l,u=-u,c=-c,f=-f),1-d>kd?(h=Math.acos(d),p=Math.sin(h),v=Math.sin((1-n)*h)/p,g=Math.sin(n*h)/p):(v=1-n,g=n),e[0]=v*i+g*l,e[1]=v*o+g*u,e[2]=v*a+g*c,e[3]=v*s+g*f,e}function Myt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r*r+n*n+i*i+o*o,s=a?1/a:0;return e[0]=-r*s,e[1]=-n*s,e[2]=-i*s,e[3]=o*s,e}function kyt(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function kz(e,t){var r=t[0]+t[4]+t[8],n;if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[i*3+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(t[i*3+i]-t[o*3+o]-t[a*3+a]+1),e[i]=.5*n,n=.5/n,e[3]=(t[o*3+a]-t[a*3+o])*n,e[o]=(t[o*3+i]+t[i*3+o])*n,e[a]=(t[a*3+i]+t[i*3+a])*n}return e}var xyt=cyt,Lyt=oA,Iyt=pyt,Oyt=vyt,Ryt=fyt,Dyt=hyt,xz=dyt,Nyt=function(){var e=_z(),t=pL(1,0,0),r=pL(0,1,0);return function(n,i,o){var a=bz(i,o);return a<-.999999?(Zg(e,t,i),Pz(e)<1e-6&&Zg(e,r,i),R1t(e,e),Mz(n,e,Math.PI),n):a>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(Zg(e,i,o),n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=1+a,xz(n,n))}}();(function(){var e=yL(),t=yL();return function(r,n,i,o,a,s){return Kg(e,n,a,s),Kg(t,i,o,s),Kg(r,e,t,2*s*(1-s)),r}})();(function(){var e=z1t();return function(t,r,n,i){return e[0]=n[0],e[3]=n[1],e[6]=n[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-r[0],e[5]=-r[1],e[8]=-r[2],xz(t,kz(t,e))}})();const Fyt=[0,0,0,1];class bL extends eA{constructor(t=0,r=0,n=0,i=1){super(-0,-0,-0,-0),Array.isArray(t)&&arguments.length===1?this.copy(t):this.set(t,r,n,i)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}set(t,r,n,i){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this.check()}fromObject(t){return this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this.check()}fromMatrix3(t){return kz(this,t),this.check()}fromAxisRotation(t,r){return Mz(this,t,r),this.check()}identity(){return Tyt(this),this.check()}setAxisAngle(t,r){return this.fromAxisRotation(t,r)}get ELEMENTS(){return 4}get x(){return this[0]}set x(t){this[0]=Me(t)}get y(){return this[1]}set y(t){this[1]=Me(t)}get z(){return this[2]}set z(t){this[2]=Me(t)}get w(){return this[3]}set w(t){this[3]=Me(t)}len(){return Ryt(this)}lengthSquared(){return Dyt(this)}dot(t){return Iyt(this,t)}rotationTo(t,r){return Nyt(this,t,r),this.check()}add(t){return xyt(this,this,t),this.check()}calculateW(){return Cyt(this,this),this.check()}conjugate(){return kyt(this,this),this.check()}invert(){return Myt(this,this),this.check()}lerp(t,r,n){return n===void 0?this.lerp(this,t,r):(Oyt(this,t,r,n),this.check())}multiplyRight(t){return _L(this,this,t),this.check()}multiplyLeft(t){return _L(this,t,this),this.check()}normalize(){const t=this.len(),r=t>0?1/t:0;return this[0]=this[0]*r,this[1]=this[1]*r,this[2]=this[2]*r,this[3]=this[3]*r,t===0&&(this[3]=1),this.check()}rotateX(t){return Pyt(this,this,t),this.check()}rotateY(t){return Eyt(this,this,t),this.check()}rotateZ(t){return Ayt(this,this,t),this.check()}scale(t){return Lyt(this,this,t),this.check()}slerp(t,r,n){let i,o,a;switch(arguments.length){case 1:({start:i=Fyt,target:o,ratio:a}=t);break;case 2:i=this,o=t,a=r;break;default:i=t,o=r,a=n}return Kg(this,i,o,a),this.check()}transformVector4(t,r=new nA){return gyt(r,t,this),Md(r,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(t,r){return this.setAxisAngle(t,r)}premultiply(t){return this.multiplyLeft(t)}multiply(t){return this.multiplyRight(t)}}const Lz={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:Math.PI*2},wL=`#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))

struct AmbientLight {
 vec3 color;
};

struct PointLight {
 vec3 color;
 vec3 position;
 vec3 attenuation;
};

struct DirectionalLight {
  vec3 color;
  vec3 direction;
};

uniform AmbientLight lighting_uAmbientLight;
uniform PointLight lighting_uPointLight[MAX_LIGHTS];
uniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];
uniform int lighting_uPointLightCount;
uniform int lighting_uDirectionalLightCount;

uniform bool lighting_uEnabled;

float getPointLightAttenuation(PointLight pointLight, float distance) {
  return pointLight.attenuation.x
       + pointLight.attenuation.y * distance
       + pointLight.attenuation.z * distance * distance;
}

#endif
`,Byt={lightSources:{}};function yb(){let{color:e=[0,0,0],intensity:t=1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.map(r=>r*t/255)}function $yt(e){let{ambientLight:t,pointLights:r=[],directionalLights:n=[]}=e;const i={};return t?i["lighting_uAmbientLight.color"]=yb(t):i["lighting_uAmbientLight.color"]=[0,0,0],r.forEach((o,a)=>{i["lighting_uPointLight[".concat(a,"].color")]=yb(o),i["lighting_uPointLight[".concat(a,"].position")]=o.position,i["lighting_uPointLight[".concat(a,"].attenuation")]=o.attenuation||[1,0,0]}),i.lighting_uPointLightCount=r.length,n.forEach((o,a)=>{i["lighting_uDirectionalLight[".concat(a,"].color")]=yb(o),i["lighting_uDirectionalLight[".concat(a,"].direction")]=o.direction}),i.lighting_uDirectionalLightCount=n.length,i}function Iz(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Byt;if("lightSources"in e){const{ambientLight:t,pointLights:r,directionalLights:n}=e.lightSources||{};return t||r&&r.length>0||n&&n.length>0?Object.assign({},$yt({ambientLight:t,pointLights:r,directionalLights:n}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in e){const t={pointLights:[],directionalLights:[]};for(const r of e.lights||[])switch(r.type){case"ambient":t.ambientLight=r;break;case"directional":t.directionalLights.push(r);break;case"point":t.pointLights.push(r);break}return Iz({lightSources:t})}return{}}const zyt={name:"lights",vs:wL,fs:wL,getUniforms:Iz,defines:{MAX_LIGHTS:3}},Vyt=new Uint8Array([0,255,255,255]),Uyt={pickingSelectedColor:null,pickingHighlightColor:Vyt,pickingActive:!1,pickingAttribute:!1};function Gyt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Uyt;const t={};if(e.pickingSelectedColor!==void 0)if(!e.pickingSelectedColor)t.picking_uSelectedColorValid=0;else{const r=e.pickingSelectedColor.slice(0,3);t.picking_uSelectedColorValid=1,t.picking_uSelectedColor=r}if(e.pickingHighlightColor){const r=Array.from(e.pickingHighlightColor,n=>n/255);Number.isFinite(r[3])||(r[3]=1),t.picking_uHighlightColor=r}return e.pickingActive!==void 0&&(t.picking_uActive=Boolean(e.pickingActive),t.picking_uAttribute=Boolean(e.pickingAttribute)),t}const jyt=`uniform bool picking_uActive;
uniform bool picking_uAttribute;
uniform vec3 picking_uSelectedColor;
uniform bool picking_uSelectedColorValid;

out vec4 picking_vRGBcolor_Avalid;

const float COLOR_SCALE = 1. / 255.;

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.001;
}

bool isVertexPicked(vec3 vertexColor) {
  return
    picking_uSelectedColorValid &&
    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));
}

void picking_setPickingColor(vec3 pickingColor) {
  if (picking_uActive) {
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!picking_uAttribute) {
      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;
    }
  } else {
    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.r = value;
  }
}
void picking_setPickingAttribute(vec2 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}
void picking_setPickingAttribute(vec3 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,Wyt=`uniform bool picking_uActive;
uniform vec3 picking_uSelectedColor;
uniform vec4 picking_uHighlightColor;

in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
  if (picking_uActive) {
    return color;
  }
  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    float highLightAlpha = picking_uHighlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}
vec4 picking_filterPickingColor(vec4 color) {
  if (picking_uActive) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}
vec4 picking_filterColor(vec4 color) {
  vec4 highightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highightColor);
}

`,Hyt={name:"picking",vs:jyt,fs:Wyt,getUniforms:Gyt},Xyt=`
uniform float lighting_uAmbient;
uniform float lighting_uDiffuse;
uniform float lighting_uShininess;
uniform vec3  lighting_uSpecularColor;

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {
    vec3 halfway_direction = normalize(light_direction + view_direction);
    float lambertian = dot(light_direction, normal_worldspace);
    float specular = 0.0;
    if (lambertian > 0.0) {
      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);
      specular = pow(specular_angle, lighting_uShininess);
    }
    lambertian = max(lambertian, 0.0);
    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;
}

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = surfaceColor;

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);
    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}

vec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = vec3(0, 0, 0);
  vec3 surfaceColor = vec3(0, 0, 0);

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}
`,Yyt={};function qyt(e){const{ambient:t=.35,diffuse:r=.6,shininess:n=32,specularColor:i=[30,30,30]}=e;return{lighting_uAmbient:t,lighting_uDiffuse:r,lighting_uShininess:n,lighting_uSpecularColor:i.map(o=>o/255)}}function Zyt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Yyt;if(!("material"in e))return{};const{material:t}=e;return t?qyt(t):{lighting_uEnabled:!1}}const Kyt={name:"gouraud-lighting",dependencies:[zyt],vs:Xyt,defines:{LIGHTING_VERTEX:1},getUniforms:Zyt},Jyt=`attribute float transform_elementID;
vec2 transform_getPixelSizeHalf(vec2 size) {
  return vec2(1.) / (2. * size);
}

vec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {
  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);
  float xIndex = transform_elementID - (yIndex * texSize[0]);
  return vec2(xIndex, yIndex);
}
vec2 transform_getTexCoord(vec2 size) {
  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);
  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);
  vec2 coord = indices / size + pixelSizeHalf;
  return coord;
}
vec2 transform_getPos(vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);
  return pos;
}
vec4 transform_getInput(sampler2D texSampler, vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec4 textureColor = texture2D(texSampler, texCoord);
  return textureColor;
}
`,Qyt={name:"transform",vs:Jyt,fs:null};class G0{static getDefaultProgramManager(t){return t.luma=t.luma||{},t.luma.defaultProgramManager=t.luma.defaultProgramManager||new G0(t),t.luma.defaultProgramManager}constructor(t){this.gl=t,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(t){this._defaultModules.find(r=>r.name===t.name)||this._defaultModules.push(t),this.stateHash++}removeDefaultModule(t){const r=typeof t=="string"?t:t.name;this._defaultModules=this._defaultModules.filter(n=>n.name!==r),this.stateHash++}addShaderHook(t,r){r&&(t=Object.assign(r,{hook:t})),this._hookFunctions.push(t),this.stateHash++}get(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{vs:r="",fs:n="",defines:i={},inject:o={},varyings:a=[],bufferMode:s=35981,transpileToGLSL100:l=!1}=t,u=this._getModuleList(t.modules),c=this._getHash(r),f=this._getHash(n),h=u.map(_=>this._getHash(_.name)).sort(),d=a.map(_=>this._getHash(_)),p=Object.keys(i).sort(),v=Object.keys(o).sort(),g=[],m=[];for(const _ of p)g.push(this._getHash(_)),g.push(this._getHash(i[_]));for(const _ of v)m.push(this._getHash(_)),m.push(this._getHash(o[_]));const y="".concat(c,"/").concat(f,"D").concat(g.join("/"),"M").concat(h.join("/"),"I").concat(m.join("/"),"V").concat(d.join("/"),"H").concat(this.stateHash,"B").concat(s).concat(l?"T":"");if(!this._programCache[y]){const _=i1t(this.gl,{vs:r,fs:n,modules:u,inject:o,defines:i,hookFunctions:this._hookFunctions,transpileToGLSL100:l});this._programCache[y]=new iz(this.gl,{hash:y,vs:_.vs,fs:_.fs,varyings:a,bufferMode:s}),this._getUniforms[y]=_.getUniforms||(b=>{}),this._useCounts[y]=0}return this._useCounts[y]++,this._programCache[y]}getUniforms(t){return this._getUniforms[t.hash]||null}release(t){const r=t.hash;this._useCounts[r]--,this._useCounts[r]===0&&(this._programCache[r].delete(),delete this._programCache[r],delete this._getUniforms[r],delete this._useCounts[r])}_getHash(t){return this._hashes[t]===void 0&&(this._hashes[t]=this._hashCounter++),this._hashes[t]}_getModuleList(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const r=new Array(this._defaultModules.length+t.length),n={};let i=0;for(let o=0,a=this._defaultModules.length;o<a;++o){const s=this._defaultModules[o],l=s.name;r[i++]=s,n[l]=!0}for(let o=0,a=t.length;o<a;++o){const s=t[o],l=s.name;n[l]||(r[i++]=s,n[l]=!0)}return r.length=i,r}}const t_t={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function e_t(e,t,r){const n={};let i=t.indices;for(const o in t.attributes){const a=t.attributes[o],s=r_t(o,r);if(o==="indices")i=a;else if(a.constant)n[s]=a.value;else{const l=a.value,u={...a};delete u.value,n[s]=[new Pe(e,l),u],n_t(o,u)}}if(i){const o=i.value||i;gt(o instanceof Uint16Array||o instanceof Uint32Array,'attribute array for "indices" must be of integer type');const a={size:1,isIndexed:i.isIndexed===void 0?!0:i.isIndexed};n.indices=[new Pe(e,{data:o,target:34963}),a]}return n}function r_t(e,t){const{attributeMap:r=t_t}=t||{};return r&&r[e]||e}function n_t(e,t){let r;switch(e){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":r="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":r="vectors";break}switch(r){case"vectors":t.size=t.size||3;break;case"uvs":t.size=t.size||2;break}gt(Number.isFinite(t.size),"attribute ".concat(e," needs size"))}const Hu=2,i_t=1e4,o_t="Model needs drawMode and vertexCount",SL=()=>{},a_t={};class ha{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{id:n=Cs("model")}=r;gt(yy(t)),this.id=n,this.gl=t,this.id=r.id||Cs("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(r)}initialize(t){this.props={},this.programManager=t.programManager||G0.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:r=null,vs:n,fs:i,modules:o,defines:a,inject:s,varyings:l,bufferMode:u,transpileToGLSL100:c}=t;this.programProps={program:r,vs:n,fs:i,modules:o,defines:a,inject:s,varyings:l,bufferMode:u,transpileToGLSL100:c},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(t.moduleSettings))),this.drawMode=t.drawMode!==void 0?t.drawMode:4,this.vertexCount=t.vertexCount||0,this.geometryBuffers={},this.isInstanced=t.isInstanced||t.instanced||t.instanceCount>0,this._setModelProps(t),this.geometry={},gt(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),o_t)}setProps(t){this._setModelProps(t)}delete(){for(const t in this._attributes)this._attributes[t]!==this.attributes[t]&&this._attributes[t].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(t){const{program:r,vs:n,fs:i,modules:o,defines:a,inject:s,varyings:l,bufferMode:u,transpileToGLSL100:c}=t;this.programProps={program:r,vs:n,fs:i,modules:o,defines:a,inject:s,varyings:l,bufferMode:u,transpileToGLSL100:c},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(t){return this.drawMode=t,this}setVertexCount(t){return gt(Number.isFinite(t)),this.vertexCount=t,this}setInstanceCount(t){return gt(Number.isFinite(t)),this.instanceCount=t,this}setGeometry(t){return this.drawMode=t.drawMode,this.vertexCount=t.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=e_t(this.gl,t),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Yc(t))return this;const r={};for(const n in t){const i=t[n];r[n]=i.getValue?i.getValue():i}return this.vertexArray.setAttributes(r),this}setUniforms(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.assign(this.uniforms,t),this}getModuleUniforms(t){this._checkProgram();const r=this.programManager.getUniforms(this.program);return r?r(t):{}}updateModuleSettings(t){const r=this.getModuleUniforms(t||{});return this.setUniforms(r)}clear(t){return ZE(this.program.gl,t),this}draw(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._checkProgram();const{moduleSettings:r=null,framebuffer:n,uniforms:i={},attributes:o={},transformFeedback:a=this.transformFeedback,parameters:s={},vertexArray:l=this.vertexArray}=t;this.setAttributes(o),this.updateModuleSettings(r),this.setUniforms(i);let u;Lt.priority>=Hu&&(u=this._logDrawCallStart(Hu));const c=this.vertexArray.getDrawParams(),{isIndexed:f=c.isIndexed,indexType:h=c.indexType,indexOffset:d=c.indexOffset,vertexArrayInstanced:p=c.isInstanced}=this.props;p&&!this.isInstanced&&Lt.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:v,instanceCount:g}=this,{onBeforeRender:m=SL,onAfterRender:y=SL}=this.props;m(),this.program.setUniforms(this.uniforms);const _=this.program.draw(Object.assign(a_t,t,{logPriority:u,uniforms:null,framebuffer:n,parameters:s,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:l,transformFeedback:a,isIndexed:f,indexType:h,isInstanced:v,instanceCount:g,offset:f?d:0}));return y(),Lt.priority>=Hu&&this._logDrawCallEnd(u,l,n),_}transform(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{discard:r=!0,feedbackBuffers:n,unbindModels:i=[]}=t;let{parameters:o}=t;n&&this._setFeedbackBuffers(n),r&&(o=Object.assign({},o,{[35977]:r})),i.forEach(a=>a.vertexArray.unbindBuffers());try{this.draw(Object.assign({},t,{parameters:o}))}finally{i.forEach(a=>a.vertexArray.bindBuffers())}return this}render(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Lt.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(t).draw()}_setModelProps(t){Object.assign(this.props,t),"uniforms"in t&&this.setUniforms(t.uniforms),"pickable"in t&&(this.pickable=t.pickable),"instanceCount"in t&&(this.instanceCount=t.instanceCount),"geometry"in t&&this.setGeometry(t.geometry),"attributes"in t&&this.setAttributes(t.attributes),"_feedbackBuffers"in t&&this._setFeedbackBuffers(t._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:r}=this.programProps;if(r)this._managedProgram=!1;else{const{vs:n,fs:i,modules:o,inject:a,defines:s,varyings:l,bufferMode:u,transpileToGLSL100:c}=this.programProps;r=this.programManager.get({vs:n,fs:i,modules:o,inject:a,defines:s,varyings:l,bufferMode:u,transpileToGLSL100:c}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}gt(r instanceof iz,"Model needs a program"),this._programDirty=!1,r!==this.program&&(this.program=r,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new _mt(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const t in this.geometryBuffers){const r=this.geometryBuffers[t][0]||this.geometryBuffers[t];r instanceof Pe&&r.delete()}}_setAnimationProps(t){this.animated&&gt(t,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Yc(t))return this;const{gl:r}=this.program;return this.transformFeedback=this.transformFeedback||new oz(r,{program:this.program}),this.transformFeedback.setBuffers(t),this}_logDrawCallStart(t){const r=t>3?0:i_t;if(!(Date.now()-this.lastLogTime<r))return this.lastLogTime=Date.now(),Lt.group(Hu,">>> DRAWING MODEL ".concat(this.id),{collapsed:Lt.level<=2})(),t}_logDrawCallEnd(t,r,n,i){if(t===void 0)return;const o=Smt({vertexArray:r,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:a,unusedTable:s,unusedCount:l}=nL({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),{table:u,count:c}=nL({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0});c>0&&Lt.log("MISSING UNIFORMS",Object.keys(u))(),l>0&&Lt.log("UNUSED UNIFORMS",Object.keys(s))();const f=Pmt(this.vertexArray.configuration);Lt.table(t,o)(),Lt.table(t,a)(),Lt.table(t+1,f)(),i&&i.log({logLevel:Hu,message:"Rendered to ".concat(i.id)}),Lt.groupEnd(Hu)()}}class s_t{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(r),Object.seal(this)}setupResources(t){for(const r of this.bindings)this._setupTransformFeedback(r,t)}updateModelProps(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyings:r}=this;return r.length>0&&(t=Object.assign({},t,{varyings:r})),t}getDrawOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this.bindings[this.currentIndex],{sourceBuffers:n,transformFeedback:i}=r;return{attributes:Object.assign({},n,t.attributes),transformFeedback:i}}swap(){return this.feedbackMap?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(t)}getBuffer(t){const{feedbackBuffers:r}=this.bindings[this.currentIndex],n=t?r[t]:null;return n?n instanceof Pe?n:n.buffer:null}getData(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyingName:r}=t,n=this.getBuffer(r);return n?n.getData():null}delete(){for(const t in this.resources)this.resources[t].delete()}_initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(t),this.varyings=t.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&gt(Qt(this.gl))}_getFeedbackBuffers(t){const{sourceBuffers:r={}}=t,n={};if(this.bindings[this.currentIndex]&&Object.assign(n,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const i in this.feedbackMap){const o=this.feedbackMap[i];i in r&&(n[o]=i)}Object.assign(n,t.feedbackBuffers);for(const i in n){const o=n[i];if(typeof o=="string"){const a=r[o],{byteLength:s,usage:l,accessor:u}=a;n[i]=this._createNewBuffer(i,{byteLength:s,usage:l,accessor:u})}}return n}_setupBuffers(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:r=null}=t;Object.assign(this.feedbackMap,t.feedbackMap);const n=this._getFeedbackBuffers(t);this._updateBindings({sourceBuffers:r,feedbackBuffers:n})}_setupTransformFeedback(t,r){let{model:n}=r;const{program:i}=n;t.transformFeedback=new oz(this.gl,{program:i,buffers:t.feedbackBuffers})}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this.feedbackMap){const{sourceBuffers:r,feedbackBuffers:n}=this._swapBuffers(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:r,feedbackBuffers:n})}}_updateBinding(t,r){return t?(Object.assign(t.sourceBuffers,r.sourceBuffers),Object.assign(t.feedbackBuffers,r.feedbackBuffers),t.transformFeedback&&t.transformFeedback.setBuffers(t.feedbackBuffers),t):{sourceBuffers:Object.assign({},r.sourceBuffers),feedbackBuffers:Object.assign({},r.feedbackBuffers)}}_swapBuffers(t){if(!this.feedbackMap)return null;const r=Object.assign({},t.sourceBuffers),n=Object.assign({},t.feedbackBuffers);for(const i in this.feedbackMap){const o=this.feedbackMap[i];r[i]=t.feedbackBuffers[o],n[o]=t.sourceBuffers[i],gt(n[o]instanceof Pe)}return{sourceBuffers:r,feedbackBuffers:n}}_createNewBuffer(t,r){const n=new Pe(this.gl,r);return this.resources[t]&&this.resources[t].delete(),this.resources[t]=n,n}_getNextIndex(){return(this.currentIndex+1)%2}}const l_t="transform_uSampler_",i1="transform_uSize_",TL="transform_position";function u_t(e){let{vs:t,sourceTextureMap:r,targetTextureVarying:n,targetTexture:i}=e,a=Object.keys(r).length,s=null;const l={};let u=t,c={};if(a>0||n){const f=u.split(`
`),h=f.slice();if(f.forEach((d,p,v)=>{if(a>0){const g=p_t(d,r);if(g){const{updatedLine:m,inject:y}=g;h[p]=m,c=V3([c,y]),Object.assign(l,g.samplerTextureMap),a--}}n&&!s&&(s=d_t(d,n))}),n){gt(i);const d="".concat(i1).concat(n),p="uniform vec2 ".concat(d,`;
`),v="     vec2 ".concat(TL," = transform_getPos(").concat(d,`);
     gl_Position = vec4(`).concat(TL,`, 0, 1.);
`);c=V3([c,{"vs:#decl":p,"vs:#main-start":v}])}u=h.join(`
`)}return{vs:u,targetTextureType:s,inject:c,samplerTextureMap:l}}function c_t(e){let{sourceTextureMap:t,targetTextureVarying:r,targetTexture:n}=e;const i={};let o,a;r&&({width:o,height:a}=n,i["".concat(i1).concat(r)]=[o,a]);for(const s in t)({width:o,height:a}=t[s]),i["".concat(i1).concat(s)]=[o,a];return i}function f_t(e){return hz(e,["attribute","in"])}function h_t(e){const t="".concat(l_t).concat(e),r="".concat(i1).concat(e),n="  uniform sampler2D ".concat(t,`;
  uniform vec2 `).concat(r,";");return{samplerName:t,sizeName:r,uniformDeclerations:n}}function d_t(e,t){const r=hz(e,["varying","out"]);return r&&r.name===t?r.type:null}function p_t(e,t){const r={},n=f_t(e);if(!n)return null;const{type:i,name:o}=n;if(o&&t[o]){const a="// ".concat(e," => Replaced by Transform with a sampler"),{samplerName:s,sizeName:l,uniformDeclerations:u}=h_t(o),c=d1t(i),f="  ".concat(i," ").concat(o," = transform_getInput(").concat(s,", ").concat(l,").").concat(c,`;
`);return r[s]=o,{updatedLine:a,inject:{"vs:#decl":u,"vs:#main-start":f},samplerTextureMap:r}}return null}const v_t={[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},g_t="transform_output";class m_t{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(r),Object.seal(this)}updateModelProps(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this._processVertexShader(t);return Object.assign({},t,r)}getDrawOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:r,sourceTextures:n,framebuffer:i,targetTexture:o}=this.bindings[this.currentIndex],a=Object.assign({},r,t.attributes),s=Object.assign({},t.uniforms),l=Object.assign({},t.parameters);let u=t.discard;if(this.hasSourceTextures||this.hasTargetTexture){a.transform_elementID=this.elementIDBuffer;for(const f in this.samplerTextureMap){const h=this.samplerTextureMap[f];s[f]=n[h]}this._setSourceTextureParameters();const c=c_t({sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:o});Object.assign(s,c)}return this.hasTargetTexture&&(u=!1,l.viewport=[0,0,i.width,i.height]),{attributes:a,framebuffer:i,uniforms:s,discard:u,parameters:l}}swap(){return this._swapTexture?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupTextures(t)}getTargetTexture(){const{targetTexture:t}=this.bindings[this.currentIndex];return t}getData(){let{packed:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{framebuffer:r}=this.bindings[this.currentIndex],n=by(r);if(!t)return n;const i=n.constructor,o=p1t(this.targetTextureType),a=new i(n.length*o/4);let s=0;for(let l=0;l<n.length;l+=4)for(let u=0;u<o;u++)a[s++]=n[l+u];return a}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{_targetTextureVarying:r,_swapTexture:n}=t;this._swapTexture=n,this.targetTextureVarying=r,this.hasTargetTexture=r,this._setupTextures(t)}_createTargetTexture(t){const{sourceTextures:r,textureOrReference:n}=t;if(n instanceof ln)return n;const i=r[n];return i?(this._targetRefTexName=n,this._createNewTexture(i)):null}_setupTextures(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:r,_sourceTextures:n={},_targetTexture:i}=t,o=this._createTargetTexture({sourceTextures:n,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||n&&Object.keys(n).length>0,this._updateBindings({sourceBuffers:r,sourceTextures:n,targetTexture:o}),"elementCount"in t&&this._updateElementIDBuffer(t.elementCount)}_updateElementIDBuffer(t){if(typeof t!="number"||this.elementCount>=t)return;const r=new Float32Array(t);r.forEach((n,i,o)=>{o[i]=i}),this.elementIDBuffer?this.elementIDBuffer.setData({data:r}):this.elementIDBuffer=new Pe(this.gl,{data:r,accessor:{size:1}}),this.elementCount=t}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this._swapTexture){const{sourceTextures:r,targetTexture:n}=this._swapTextures(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:r,targetTexture:n})}}_updateBinding(t,r){const{sourceBuffers:n,sourceTextures:i,targetTexture:o}=r;if(t||(t={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(t.sourceTextures,i),Object.assign(t.sourceBuffers,n),o){t.targetTexture=o;const{width:a,height:s}=o,{framebuffer:l}=t;l?(l.update({attachments:{[36064]:o},resizeAttachments:!1}),l.resize({width:a,height:s})):t.framebuffer=new nr(this.gl,{id:"transform-framebuffer",width:a,height:s,attachments:{[36064]:o}})}return t}_setSourceTextureParameters(){const t=this.currentIndex,{sourceTextures:r}=this.bindings[t];for(const n in r)r[n].setParameters(v_t)}_swapTextures(t){if(!this._swapTexture)return null;const r=Object.assign({},t.sourceTextures);r[this._swapTexture]=t.targetTexture;const n=t.sourceTextures[this._swapTexture];return{sourceTextures:r,targetTexture:n}}_createNewTexture(t){const r=tz(t,{parameters:{[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},pixelStore:{[37440]:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=r,r}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceTextures:r,targetTexture:n}=this.bindings[this.currentIndex],{vs:i,uniforms:o,targetTextureType:a,inject:s,samplerTextureMap:l}=u_t({vs:t.vs,sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:n}),u=V3([t.inject||{},s]);this.targetTextureType=a,this.samplerTextureMap=l;const c=t._fs||dz({version:rz(i),input:this.targetTextureVarying,inputType:a,output:g_t}),f=this.hasSourceTextures||this.targetTextureVarying?[Qyt].concat(t.modules||[]):t.modules;return{vs:i,fs:c,modules:f,uniforms:o,inject:u}}}class aA{static isSupported(t){return Qt(t)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(r),Object.seal(this)}delete(){const{model:t,bufferTransform:r,textureTransform:n}=this;t&&t.delete(),r&&r.delete(),n&&n.delete()}run(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{clearRenderTarget:r=!0}=t,n=this._updateDrawOptions(t);r&&n.framebuffer&&n.framebuffer.clear({color:!0}),this.model.transform(n)}swap(){let t=!1;const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of r)t=t||n.swap();gt(t,"Nothing to swap")}getBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(t)}getData(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of r){const i=n.getData(t);if(i)return i}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};"elementCount"in t&&this.model.setVertexCount(t.elementCount);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of r)n.update(t)}_initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{gl:r}=this;this._buildResourceTransforms(r,t),t=this._updateModelProps(t),this.model=new ha(r,Object.assign({},t,{fs:t.fs||dz({version:rz(t.vs)}),id:t.id||"transform-model",drawMode:t.drawMode||0,vertexCount:t.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(t){let r=Object.assign({},t);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)r=i.updateModelProps(r);return r}_buildResourceTransforms(t,r){y_t(r)&&(this.bufferTransform=new s_t(t,r)),__t(r)&&(this.textureTransform=new m_t(t,r)),gt(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(t){let r=Object.assign({},t);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)r=Object.assign(r,i.getDrawOptions(r));return r}}function y_t(e){return!!(!Yc(e.feedbackBuffers)||!Yc(e.feedbackMap)||e.varyings&&e.varyings.length>0)}function __t(e){return!!(!Yc(e._sourceTextures)||e._targetTexture||e._targetTextureVarying)}const PL={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class pu{static get DRAW_MODE(){return PL}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:r=Cs("geometry"),drawMode:n=PL.TRIANGLES,attributes:i={},indices:o=null,vertexCount:a=null}=t;this.id=r,this.drawMode=n|0,this.attributes={},this.userData={},this._setAttributes(i,o),this.vertexCount=a||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(t){return"Geometry ".concat(this.id," attribute ").concat(t)}_setAttributes(t,r){r&&(this.indices=ArrayBuffer.isView(r)?{value:r,size:1}:r);for(const n in t){let i=t[n];i=ArrayBuffer.isView(i)?{value:i}:i,gt(ArrayBuffer.isView(i.value),"".concat(this._print(n),": must be typed array or object with value as typed array")),(n==="POSITION"||n==="positions")&&!i.size&&(i.size=3),n==="indices"?(gt(!this.indices),this.indices=i):this.attributes[n]=i}return this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(t,r){if(r)return r.value.length;let n=1/0;for(const i in t){const o=t[i],{value:a,size:s,constant:l}=o;!l&&a&&s>=1&&(n=Math.min(n,a.length/s))}return gt(Number.isFinite(n)),n}}let b_t=1,w_t=1;class Oz{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(t){const{delay:r=0,duration:n=Number.POSITIVE_INFINITY,rate:i=1,repeat:o=1}=t,a=b_t++,s={time:0,delay:r,duration:n,rate:i,repeat:o};return this._setChannelTime(s,this.time),this.channels.set(a,s),a}removeChannel(t){this.channels.delete(t);for(const[r,n]of this.animations)n.channel===t&&this.detachAnimation(r)}isFinished(t){const r=this.channels.get(t);return r===void 0?!1:this.time>=r.delay+r.duration*r.repeat}getTime(t){if(t===void 0)return this.time;const r=this.channels.get(t);return r===void 0?-1:r.time}setTime(t){this.time=Math.max(0,t);const r=this.channels.values();for(const i of r)this._setChannelTime(i,this.time);const n=this.animations.values();for(const i of n){const{animation:o,channel:a}=i;o.setTime(this.getTime(a))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(t,r){const n=w_t++;return this.animations.set(n,{animation:t,channel:r}),t.setTime(this.getTime(r)),n}detachAnimation(t){this.animations.delete(t)}update(t){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=t),this.setTime(this.time+(t-this.lastEngineTime)),this.lastEngineTime=t)}_setChannelTime(t,r){const n=r-t.delay,i=t.duration*t.repeat;n>=i?t.time=t.duration*t.rate:(t.time=Math.max(0,n)%t.duration,t.time*=t.rate)}}const Rz="#define SMOOTH_EDGE_RADIUS 0.5",S_t=`
`.concat(Rz,`

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`),T_t=`
`.concat(Rz,`

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`),P_t={name:"geometry",vs:S_t,fs:T_t},ue={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(ue,"IDENTITY",{get:()=>(Wt.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const bi={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Ms={common:0,meters:1,pixels:2},EL={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},j0={DRAW:"draw",MASK:"mask"},E_t=Object.keys(ue).map(e=>"const int COORDINATE_SYSTEM_".concat(e," = ").concat(ue[e],";")).join(""),A_t=Object.keys(bi).map(e=>"const int PROJECTION_MODE_".concat(e," = ").concat(bi[e],";")).join(""),C_t=Object.keys(Ms).map(e=>"const int UNIT_".concat(e.toUpperCase()," = ").concat(Ms[e],";")).join(""),M_t="".concat(E_t,`
`).concat(A_t,`
`).concat(C_t,`

uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;

const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0; // meters
const float GLOBE_RADIUS = 256.0;

// returns an adjustment factor for uCommonUnitsPerMeter
float project_size() {
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
    project_uPseudoMeters == false) {

    // uCommonUnitsPerMeter in low-zoom Web Mercator is non-linear
    // Adjust by 1 / cos(latitude)
    // If geometry.position (vertex in common space) is populated, use it
    // Otherwise use geometry.worldPosition (anchor in world space)
    
    if (geometry.position.w == 0.0) {
      float y = clamp(geometry.worldPosition.y, -89.9, 89.9);
      return 1.0 / cos(radians(y));
    }

    // latitude from common y: 2.0 * (atan(exp(y / TILE_SIZE * 2.0 * PI - PI)) - PI / 4.0)
    // Taylor series of 1 / cos(latitude)
    // Max error < 0.003
  
    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    float y2 = y * y;
    float y4 = y2 * y2;
    float y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}
//
// Scaling offsets - scales meters to "world distance"
// Note the scalar version of project_size is for scaling the z component only
//
float project_size(float meters) {
  return meters * project_uCommonUnitsPerMeter.z * project_size();
}

vec2 project_size(vec2 meters) {
  return meters * project_uCommonUnitsPerMeter.xy * project_size();
}

vec3 project_size(vec3 meters) {
  return meters * project_uCommonUnitsPerMeter * project_size();
}

vec4 project_size(vec4 meters) {
  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}

// Get rotation matrix that aligns the z axis with the given up vector
// Find 3 unit vectors ux, uy, uz that are perpendicular to each other and uz == up
mat3 project_get_orientation_matrix(vec3 up) {
  vec3 uz = normalize(up);
  // Tangent on XY plane
  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
  vec3 uy = cross(uz, ux);
  return mat3(ux, uy, uz);
}

bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    transform = project_get_orientation_matrix(commonPosition);
    return true;
  }
  return false;
}

//
// Projecting normal - transform deltas from current coordinate system to
// normals in the worldspace
//
vec3 project_normal(vec3 vector) {
  // Apply model matrix
  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
  mat3 rotation;
  if (project_needs_rotation(geometry.position.xyz, rotation)) {
    n = rotation * n;
  }
  return n;
}

vec4 project_offset_(vec4 offset) {
  float dy = offset.y;
  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}

//
// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]
//
vec2 project_mercator_(vec2 lnglat) {
  float x = lnglat.x;
  if (project_uWrapLongitude) {
    x = mod(x + 180., 360.0) - 180.;
  }
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

vec3 project_globe_(vec3 lnglatz) {
  float lambda = radians(lnglatz.x);
  float phi = radians(lnglatz.y);
  float cosPhi = cos(phi);
  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;

  return vec3(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}

//
// Projects positions (defined by project_uCoordinateSystem) to common space (defined by project_uProjectionMode)
//
vec4 project_position(vec4 position, vec3 position64Low) {
  vec4 position_world = project_uModelMatrix * position;

  // Work around for a Mac+NVIDIA bug https://github.com/visgl/deck.gl/issues/4145
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_mercator_(position_world.xy),
        project_size(position_world.z),
        position_world.w
      );
    }
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world.xyz += project_uCoordinateOrigin;
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
        // Too far from the projection center for offset mode to be accurate
        // Only use high parts
        return vec4(
          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
          project_size(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    // Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.
    position_world.xyz -= project_uCoordinateOrigin;
  }

  // Translation is already added to the high parts
  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_LOW);
}

vec3 project_position(vec3 position, vec3 position64Low) {
  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
  return projected_position.xyz;
}

vec3 project_position(vec3 position) {
  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

vec2 project_position(vec2 position) {
  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  return viewProjectionMatrix * position + center;
}

//
// Projects from common space coordinates to clip space.
// Uses project_uViewProjectionMatrix
//
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}

// Returns a clip space offset that corresponds to a given number of screen pixels
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
  return offset * project_uFocalDistance;
}

float project_size_to_pixel(float meters) {
  return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
  if (unit == UNIT_METERS) return project_size_to_pixel(size);
  if (unit == UNIT_COMMON) return size * project_uScale;
  // UNIT_PIXELS
  return size;
}
float project_pixel_size(float pixels) {
  return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
  return pixels / project_uScale;
}
`);function k_t(e,t){if(e===t)return!0;if(Array.isArray(e)){const r=e.length;if(!t||t.length!==r)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}return!1}function W0(e){let t={},r;return n=>{for(const i in n)if(!k_t(n[i],t[i])){r=e(n),t=n;break}return r}}const AL=[0,0,0,0],x_t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],Dz=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],L_t=[0,0,0],Nz=[0,0,0],I_t=W0(D_t);function Fz(e,t,r=Nz){r.length<3&&(r=[r[0],r[1],0]);let n=r,i,o=!0;switch(t===ue.LNGLAT_OFFSETS||t===ue.METER_OFFSETS?i=r:i=e.isGeospatial?[Math.fround(e.longitude),Math.fround(e.latitude),0]:null,e.projectionMode){case bi.WEB_MERCATOR:(t===ue.LNGLAT||t===ue.CARTESIAN)&&(i=[0,0,0],o=!1);break;case bi.WEB_MERCATOR_AUTO_OFFSET:t===ue.LNGLAT?n=i:t===ue.CARTESIAN&&(n=[Math.fround(e.center[0]),Math.fround(e.center[1]),0],i=e.unprojectPosition(n),n[0]-=r[0],n[1]-=r[1],n[2]-=r[2]);break;case bi.IDENTITY:n=e.position.map(Math.fround),n[2]=n[2]||0;break;case bi.GLOBE:o=!1,i=null;break;default:o=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:n,offsetMode:o}}function O_t(e,t,r){const{viewMatrixUncentered:n,projectionMatrix:i}=e;let{viewMatrix:o,viewProjectionMatrix:a}=e,s=AL,l=AL,u=e.cameraPosition;const{geospatialOrigin:c,shaderCoordinateOrigin:f,offsetMode:h}=Fz(e,t,r);return h&&(l=e.projectPosition(c||f),u=[u[0]-l[0],u[1]-l[1],u[2]-l[2]],l[3]=1,s=bf([],l,a),o=n||o,a=Vl([],i,o),a=Vl([],a,x_t)),{viewMatrix:o,viewProjectionMatrix:a,projectionCenter:s,originCommon:l,cameraPosCommon:u,shaderCoordinateOrigin:f,geospatialOrigin:c}}function R_t({viewport:e,devicePixelRatio:t=1,modelMatrix:r=null,coordinateSystem:n=ue.DEFAULT,coordinateOrigin:i=Nz,autoWrapLongitude:o=!1}){n===ue.DEFAULT&&(n=e.isGeospatial?ue.LNGLAT:ue.CARTESIAN);const a=I_t({viewport:e,devicePixelRatio:t,coordinateSystem:n,coordinateOrigin:i});return a.project_uWrapLongitude=o,a.project_uModelMatrix=r||Dz,a}function D_t({viewport:e,devicePixelRatio:t,coordinateSystem:r,coordinateOrigin:n}){const{projectionCenter:i,viewProjectionMatrix:o,originCommon:a,cameraPosCommon:s,shaderCoordinateOrigin:l,geospatialOrigin:u}=O_t(e,r,n),c=e.getDistanceScales(),f=[e.width*t,e.height*t],h=bf([],[0,0,-e.focalDistance,1],e.projectionMatrix)[3]||1,d={project_uCoordinateSystem:r,project_uProjectionMode:e.projectionMode,project_uCoordinateOrigin:l,project_uCommonOrigin:a.slice(0,3),project_uCenter:i,project_uPseudoMeters:Boolean(e._pseudoMeters),project_uViewportSize:f,project_uDevicePixelRatio:t,project_uFocalDistance:h,project_uCommonUnitsPerMeter:c.unitsPerMeter,project_uCommonUnitsPerWorldUnit:c.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:L_t,project_uScale:e.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:o,project_uModelMatrix:Dz,project_uCameraPosition:s};if(u){const p=e.getDistanceScales(u);switch(r){case ue.METER_OFFSETS:d.project_uCommonUnitsPerWorldUnit=p.unitsPerMeter,d.project_uCommonUnitsPerWorldUnit2=p.unitsPerMeter2;break;case ue.LNGLAT:case ue.LNGLAT_OFFSETS:e._pseudoMeters||(d.project_uCommonUnitsPerMeter=p.unitsPerMeter),d.project_uCommonUnitsPerWorldUnit=p.unitsPerDegree,d.project_uCommonUnitsPerWorldUnit2=p.unitsPerDegree2;break;case ue.CARTESIAN:d.project_uCommonUnitsPerWorldUnit=[1,1,p.unitsPerMeter[2]],d.project_uCommonUnitsPerWorldUnit2=[0,0,p.unitsPerMeter2[2]];break}}return d}const N_t={};function F_t(e=N_t){return"viewport"in e?R_t(e):{}}const sA={name:"project",dependencies:[m1t,P_t],vs:M_t,getUniforms:F_t},B_t=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,vu={name:"project32",dependencies:[sA],vs:B_t};function $_t(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Oc(e,t){const r=bf([],t,e);return oA(r,r,1/r[3]),r}function CL(e,t){const r=e%t;return r<0?t+r:r}function X3(e,t,r){return e<t?t:e>r?r:e}function z_t(e){return Math.log(e)*Math.LOG2E}const lA=Math.log2||z_t;function da(e,t){if(!e)throw new Error(t||"@math.gl/web-mercator: assertion failed.")}const wi=Math.PI,Bz=wi/4,Ci=wi/180,Y3=180/wi,c0=512,q3=4003e4,Sv=85.051129,V_t=1.5;function U_t(e){return lA(e)}function ks(e){const[t,r]=e;da(Number.isFinite(t)),da(Number.isFinite(r)&&r>=-90&&r<=90,"invalid latitude");const n=t*Ci,i=r*Ci,o=c0*(n+wi)/(2*wi),a=c0*(wi+Math.log(Math.tan(Bz+i*.5)))/(2*wi);return[o,a]}function Zc(e){const[t,r]=e,n=t/c0*(2*wi)-wi,i=2*(Math.atan(Math.exp(r/c0*(2*wi)-wi))-Bz);return[n*Y3,i*Y3]}function G_t(e){const{latitude:t}=e;da(Number.isFinite(t));const r=Math.cos(t*Ci);return U_t(q3*r)-9}function Z3(e){const{latitude:t,longitude:r,highPrecision:n=!1}=e;da(Number.isFinite(t)&&Number.isFinite(r));const i=c0,o=Math.cos(t*Ci),a=i/360,s=a/o,l=i/q3/o,u={unitsPerMeter:[l,l,l],metersPerUnit:[1/l,1/l,1/l],unitsPerDegree:[a,s,l],degreesPerUnit:[1/a,1/s,1/l]};if(n){const c=Ci*Math.tan(t*Ci)/o,f=a*c/2,h=i/q3*c,d=h/s*l;u.unitsPerDegree2=[0,f,h],u.unitsPerMeter2=[d,0,d]}return u}function $z(e,t){const[r,n,i]=e,[o,a,s]=t,{unitsPerMeter:l,unitsPerMeter2:u}=Z3({longitude:r,latitude:n,highPrecision:!0}),c=ks(e);c[0]+=o*(l[0]+u[0]*a),c[1]+=a*(l[1]+u[1]*a);const f=Zc(c),h=(i||0)+(s||0);return Number.isFinite(i)||Number.isFinite(s)?[f[0],f[1],h]:f}function j_t(e){const{height:t,pitch:r,bearing:n,altitude:i,scale:o,center:a}=e,s=$_t();n1(s,s,[0,0,-i]),Az(s,s,-r*Ci),Cz(s,s,n*Ci);const l=o/t;return iA(s,s,[l,l,l]),a&&n1(s,s,O1t([],a)),s}function W_t(e){const{width:t,height:r,altitude:n,pitch:i=0,offset:o,center:a,scale:s,nearZMultiplier:l=1,farZMultiplier:u=1}=e;let{fovy:c=o1(V_t)}=e;n!==void 0&&(c=o1(n));const f=c*Ci,h=i*Ci,d=zz(c);let p=d;a&&(p+=a[2]*s/Math.cos(h)/r);const v=f*(.5+(o?o[1]:0)/r),g=Math.sin(v)*p/Math.sin(X3(Math.PI/2-h-v,.01,Math.PI-.01)),m=Math.sin(h)*g+p,y=p*10,_=Math.min(m*u,y);return{fov:f,aspect:t/r,focalDistance:d,near:l,far:_}}function o1(e){return 2*Math.atan(.5/e)*Y3}function zz(e){return .5/Math.tan(.5*e*Ci)}function Vz(e,t){const[r,n,i=0]=e;return da(Number.isFinite(r)&&Number.isFinite(n)&&Number.isFinite(i)),Oc(t,[r,n,i,1])}function wy(e,t,r=0){const[n,i,o]=e;if(da(Number.isFinite(n)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(o))return Oc(t,[n,i,o,1]);const a=Oc(t,[n,i,0,1]),s=Oc(t,[n,i,1,1]),l=a[2],u=s[2],c=l===u?0:((r||0)-l)/(u-l);return gz([],a,s,c)}function Uz(e){const{width:t,height:r,bounds:n,minExtent:i=0,maxZoom:o=24,offset:a=[0,0]}=e,[[s,l],[u,c]]=n,f=H_t(e.padding),h=ks([s,X3(c,-Sv,Sv)]),d=ks([u,X3(l,-Sv,Sv)]),p=[Math.max(Math.abs(d[0]-h[0]),i),Math.max(Math.abs(d[1]-h[1]),i)],v=[t-f.left-f.right-Math.abs(a[0])*2,r-f.top-f.bottom-Math.abs(a[1])*2];da(v[0]>0&&v[1]>0);const g=v[0]/p[0],m=v[1]/p[1],y=(f.right-f.left)/2/g,_=(f.top-f.bottom)/2/m,b=[(d[0]+h[0])/2+y,(d[1]+h[1])/2+_],T=Zc(b),S=Math.min(o,lA(Math.abs(Math.min(g,m))));return da(Number.isFinite(S)),{longitude:T[0],latitude:T[1],zoom:S}}function H_t(e=0){return typeof e=="number"?{top:e,bottom:e,left:e,right:e}:(da(Number.isFinite(e.top)&&Number.isFinite(e.bottom)&&Number.isFinite(e.left)&&Number.isFinite(e.right)),e)}const ML=Math.PI/180;function X_t(e,t=0){const{width:r,height:n,unproject:i}=e,o={targetZ:t},a=i([0,n],o),s=i([r,n],o);let l,u;const c=e.fovy?.5*e.fovy*ML:Math.atan(.5/e.altitude),f=(90-e.pitch)*ML;return c>f-.01?(l=kL(e,0,t),u=kL(e,r,t)):(l=i([0,0],o),u=i([r,0],o)),[a,s,u,l]}function kL(e,t,r){const{pixelUnprojectionMatrix:n}=e,i=Oc(n,[t,0,1,1]),o=Oc(n,[t,e.height,1,1]),s=(r*e.distanceScales.unitsPerMeter[2]-i[2])/(o[2]-i[2]),l=gz([],i,o,s),u=Zc(l);return u.push(r),u}const xL=512;function Y_t(e){const{width:t,height:r,pitch:n=0}=e;let{longitude:i,latitude:o,zoom:a,bearing:s=0}=e;(i<-180||i>180)&&(i=CL(i+180,360)-180),(s<-180||s>180)&&(s=CL(s+180,360)-180);const l=lA(r/xL);if(a<=l)a=l,o=0;else{const u=r/2/Math.pow(2,a),c=Zc([0,u])[1];if(o<c)o=c;else{const f=Zc([0,xL-u])[1];o>f&&(o=f)}}return{width:t,height:r,longitude:i,latitude:o,zoom:a,pitch:n,bearing:s}}const q_t=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,Z_t=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture2D(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,K_t=W0(r2t),J_t=W0(n2t),Q_t=[0,0,0,1],t2t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function e2t(e,t){const[r,n,i]=e,o=wy([r,n,i],t);return Number.isFinite(i)?o:[o[0],o[1],0]}function r2t({viewport:e,center:t}){return new Nr(e.viewProjectionMatrix).invert().transform(t)}function n2t({viewport:e,shadowMatrices:t}){const r=[],n=e.pixelUnprojectionMatrix,i=e.isGeospatial?void 0:1,o=[[0,0,i],[e.width,0,i],[0,e.height,i],[e.width,e.height,i],[0,0,-1],[e.width,0,-1],[0,e.height,-1],[e.width,e.height,-1]].map(a=>e2t(a,n));for(const a of t){const s=a.clone().translate(new _t(e.center).negate()),l=o.map(c=>s.transform(c)),u=new Nr().ortho({left:Math.min(...l.map(c=>c[0])),right:Math.max(...l.map(c=>c[0])),bottom:Math.min(...l.map(c=>c[1])),top:Math.max(...l.map(c=>c[1])),near:Math.min(...l.map(c=>-c[2])),far:Math.max(...l.map(c=>-c[2]))});r.push(u.multiplyRight(a))}return r}function i2t(e,t){const{shadowEnabled:r=!0}=e;if(!r||!e.shadowMatrices||!e.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const n={shadow_uDrawShadowMap:Boolean(e.drawToShadowMap),shadow_uUseShadowMap:e.shadowMaps?e.shadowMaps.length>0:!1,shadow_uColor:e.shadowColor||Q_t,shadow_uLightId:e.shadowLightId||0,shadow_uLightCount:e.shadowMatrices.length},i=K_t({viewport:e.viewport,center:t.project_uCenter}),o=[],a=J_t({shadowMatrices:e.shadowMatrices,viewport:e.viewport}).slice();for(let s=0;s<e.shadowMatrices.length;s++){const l=a[s],u=l.clone().translate(new _t(e.viewport.center).negate());t.project_uCoordinateSystem===ue.LNGLAT&&t.project_uProjectionMode===bi.WEB_MERCATOR?(a[s]=u,o[s]=i):(a[s]=l.clone().multiplyRight(t2t),o[s]=u.transform(i))}for(let s=0;s<a.length;s++)n["shadow_uViewProjectionMatrices[".concat(s,"]")]=a[s],n["shadow_uProjectCenters[".concat(s,"]")]=o[s],e.shadowMaps&&e.shadowMaps.length>0?n["shadow_uShadowMap".concat(s)]=e.shadowMaps[s]:n["shadow_uShadowMap".concat(s)]=e.dummyShadowMap;return n}const _b={name:"shadow",dependencies:[sA],vs:q_t,fs:Z_t,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(e={},t={})=>"viewport"in e&&(e.drawToShadowMap||e.shadowMaps&&e.shadowMaps.length>0)?i2t(e,t):{}},gu={inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}},...Hyt},o2t=[sA],a2t=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function s2t(e){const t=G0.getDefaultProgramManager(e);for(const r of o2t)t.addDefaultModule(r);for(const r of a2t)t.addShaderHook(r);return t}const l2t=[255,255,255],u2t=1;let c2t=0;class f2t{constructor(t={}){E(this,"id",void 0),E(this,"color",void 0),E(this,"intensity",void 0),E(this,"type","ambient");const{color:r=l2t}=t,{intensity:n=u2t}=t;this.id=t.id||"ambient-".concat(c2t++),this.color=r,this.intensity=n}}const h2t=[255,255,255],d2t=1,p2t=[0,0,-1];let v2t=0;class LL{constructor(t={}){E(this,"id",void 0),E(this,"color",void 0),E(this,"intensity",void 0),E(this,"type","directional"),E(this,"direction",void 0),E(this,"shadow",void 0);const{color:r=h2t}=t,{intensity:n=d2t}=t,{direction:i=p2t}=t,{_shadow:o=!1}=t;this.id=t.id||"directional-".concat(v2t++),this.color=r,this.intensity=n,this.type="directional",this.direction=new _t(i).normalize().toArray(),this.shadow=o}getProjectedLight(t){return this}}class g2t{constructor(t,r={id:"pass"}){E(this,"id",void 0),E(this,"gl",void 0),E(this,"props",void 0);const{id:n}=r;this.id=n,this.gl=t,this.props={...r}}setProps(t){Object.assign(this.props,t)}render(t){}cleanup(){}}class Sy extends g2t{constructor(...t){super(...t),E(this,"_lastRenderIndex",-1)}render(t){const r=this.gl;return fa(r,{framebuffer:t.target}),this._drawLayers(t)}_drawLayers(t){const{target:r,moduleParameters:n,viewports:i,views:o,onViewportActive:a,clearStack:s=!0,clearCanvas:l=!0}=t;t.pass=t.pass||"unknown";const u=this.gl;l&&y2t(u),s&&(this._lastRenderIndex=-1);const c=[];for(const f of i){const h=o&&o[f.id];a(f);const d=this._getDrawLayerParams(f,t),p=f.subViewports||[f];for(const v of p){const g=this._drawLayersInViewport(u,{target:r,moduleParameters:n,viewport:v,view:h,pass:t.pass,layers:t.layers},d);c.push(g)}}return c}_getDrawLayerParams(t,{layers:r,pass:n,layerFilter:i,cullRect:o,effects:a,moduleParameters:s}){const l=[],u=Gz(this._lastRenderIndex+1),c={layer:r[0],viewport:t,isPicking:n.startsWith("picking"),renderPass:n,cullRect:o},f={};for(let h=0;h<r.length;h++){const d=r[h],p=this._shouldDrawLayer(d,c,i,f),v={shouldDrawLayer:p};p&&(v.layerRenderIndex=u(d,p),v.moduleParameters=this._getModuleParameters(d,a,n,s),v.layerParameters=this.getLayerParameters(d,h,t)),l[h]=v}return l}_drawLayersInViewport(t,{layers:r,moduleParameters:n,pass:i,target:o,viewport:a,view:s},l){const u=m2t(t,{moduleParameters:n,target:o,viewport:a});if(s&&s.props.clear){const f=s.props.clear===!0?{color:!0,depth:!0}:s.props.clear;Zn(t,{scissorTest:!0,scissor:u},()=>ZE(t,f))}const c={totalCount:r.length,visibleCount:0,compositeCount:0,pickableCount:0};fa(t,{viewport:u});for(let f=0;f<r.length;f++){const h=r[f],{shouldDrawLayer:d,layerRenderIndex:p,moduleParameters:v,layerParameters:g}=l[f];if(d&&h.props.pickable&&c.pickableCount++,h.isComposite)c.compositeCount++;else if(d){c.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,p),v.viewport=a;try{h._drawLayer({moduleParameters:v,uniforms:{layerIndex:p},parameters:g})}catch(m){h.raiseError(m,"drawing ".concat(h," to ").concat(i))}}}return c}shouldDrawLayer(t){return!0}getModuleParameters(t,r){return null}getLayerParameters(t,r,n){return t.props.parameters}_shouldDrawLayer(t,r,n,i){if(!(t.props.visible&&this.shouldDrawLayer(t)))return!1;r.layer=t;let a=t.parent;for(;a;){if(!a.props.visible||!a.filterSubLayer(r))return!1;r.layer=a,a=a.parent}if(n){const s=r.layer.id;if(s in i||(i[s]=n(r)),!i[s])return!1}return t.activateViewport(r.viewport),!0}_getModuleParameters(t,r,n,i){var o;const a=Object.assign(Object.create(((o=t.internalState)===null||o===void 0?void 0:o.propsInTransition)||t.props),{autoWrapLongitude:t.wrapLongitude,viewport:t.context.viewport,mousePosition:t.context.mousePosition,pickingActive:0,devicePixelRatio:Xc(this.gl)});if(r)for(const l of r){var s;Object.assign(a,(s=l.getModuleParameters)===null||s===void 0?void 0:s.call(l,t))}return Object.assign(a,this.getModuleParameters(t,r),i)}}function Gz(e=0,t={}){const r={},n=(i,o)=>{const a=i.props._offset,s=i.id,l=i.parent&&i.parent.id;let u;if(l&&!(l in t)&&n(i.parent,!1),l in r){const c=r[l]=r[l]||Gz(t[l],t);u=c(i,o),r[s]=c}else Number.isFinite(a)?(u=a+(t[l]||0),r[s]=null):u=e;return o&&u>=e&&(e=u+1),t[s]=u,u};return n}function m2t(e,{moduleParameters:t,target:r,viewport:n}){const i=r&&r.id!=="default-framebuffer",o=t&&t.devicePixelRatio||Xc(e),a=i?r.height:e.drawingBufferHeight,s=n;return[s.x*o,a-(s.y+s.height)*o,s.width*o,s.height*o]}function y2t(e){const t=e.drawingBufferWidth,r=e.drawingBufferHeight;fa(e,{viewport:[0,0,t,r]}),e.clear(16640)}class _2t extends Sy{constructor(t,r){super(t,r),E(this,"shadowMap",void 0),E(this,"depthBuffer",void 0),E(this,"fbo",void 0),this.shadowMap=new ln(t,{width:1,height:1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.depthBuffer=new mc(t,{format:33189,width:1,height:1}),this.fbo=new nr(t,{id:"shadowmap",width:1,height:1,attachments:{[36064]:this.shadowMap,[36096]:this.depthBuffer}})}render(t){const r=this.fbo;Zn(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const n=t.viewports[0],i=Xc(this.gl),o=n.width*i,a=n.height*i;(o!==r.width||a!==r.height)&&r.resize({width:o,height:a}),super.render({...t,target:r,pass:"shadow"})})}shouldDrawLayer(t){return t.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const b2t={color:[255,255,255],intensity:1},IL=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],w2t=[0,0,0,200/255];class jz{constructor(t={}){E(this,"id","lighting-effect"),E(this,"props",null),E(this,"shadowColor",w2t),E(this,"shadow",void 0),E(this,"ambientLight",null),E(this,"directionalLights",[]),E(this,"pointLights",[]),E(this,"shadowPasses",[]),E(this,"shadowMaps",[]),E(this,"dummyShadowMap",null),E(this,"programManager",void 0),E(this,"shadowMatrices",void 0);for(const r in t){const n=t[r];switch(n.type){case"ambient":this.ambientLight=n;break;case"directional":this.directionalLights.push(n);break;case"point":this.pointLights.push(n);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(r=>r.shadow)}preRender(t,{layers:r,layerFilter:n,viewports:i,onViewportActive:o,views:a}){if(!!this.shadow){this.shadowMatrices=this._calculateMatrices(),this.shadowPasses.length===0&&this._createShadowPasses(t),this.programManager||(this.programManager=G0.getDefaultProgramManager(t),_b&&this.programManager.addDefaultModule(_b)),this.dummyShadowMap||(this.dummyShadowMap=new ln(t,{width:1,height:1}));for(let s=0;s<this.shadowPasses.length;s++)this.shadowPasses[s].render({layers:r,layerFilter:n,viewports:i,onViewportActive:o,views:a,moduleParameters:{shadowLightId:s,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(t){const r=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return r.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(n=>n.getProjectedLight({layer:t})),pointLights:this.pointLights.map(n=>n.getProjectedLight({layer:t}))},r}cleanup(){for(const t of this.shadowPasses)t.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(_b),this.programManager=null)}_calculateMatrices(){const t=[];for(const r of this.directionalLights){const n=new Nr().lookAt({eye:new _t(r.direction).negate()});t.push(n)}return t}_createShadowPasses(t){for(let r=0;r<this.directionalLights.length;r++){const n=new _2t(t);this.shadowPasses[r]=n,this.shadowMaps[r]=n.shadowMap}}_applyDefaultLights(){const{ambientLight:t,pointLights:r,directionalLights:n}=this;!t&&r.length===0&&n.length===0&&(this.ambientLight=new f2t(b2t),this.directionalLights.push(new LL(IL[0]),new LL(IL[1])))}}class S2t{constructor(t={}){E(this,"_pool",[]),E(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(t)}setOptions(t){Object.assign(this.opts,t)}allocate(t,r,{size:n=1,type:i,padding:o=0,copy:a=!1,initialize:s=!1,maxCount:l}){const u=i||t&&t.constructor||Float32Array,c=r*n+o;if(ArrayBuffer.isView(t)){if(c<=t.length)return t;if(c*t.BYTES_PER_ELEMENT<=t.buffer.byteLength)return new u(t.buffer,0,c)}let f=1/0;l&&(f=l*n+o);const h=this._allocate(u,c,s,f);return t&&a?h.set(t):s||h.fill(0,0,4),this._release(t),h}release(t){this._release(t)}_allocate(t,r,n,i){let o=Math.max(Math.ceil(r*this.opts.overAlloc),1);o>i&&(o=i);const a=this._pool,s=t.BYTES_PER_ELEMENT*o,l=a.findIndex(u=>u.byteLength>=s);if(l>=0){const u=new t(a.splice(l,1)[0],0,o);return n&&u.fill(0),u}return new t(o)}_release(t){if(!ArrayBuffer.isView(t))return;const r=this._pool,{buffer:n}=t,{byteLength:i}=n,o=r.findIndex(a=>a.byteLength>=i);o<0?r.push(n):(o>0||r.length<this.opts.poolSize)&&r.splice(o,0,n),r.length>this.opts.poolSize&&r.shift()}}const Kc=new S2t;function Jh(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function T2t(e,t){const r=e%t;return r<0?t+r:r}function P2t(e){return[e[12],e[13],e[14]]}function E2t(e){return{left:Xu(e[3]+e[0],e[7]+e[4],e[11]+e[8],e[15]+e[12]),right:Xu(e[3]-e[0],e[7]-e[4],e[11]-e[8],e[15]-e[12]),bottom:Xu(e[3]+e[1],e[7]+e[5],e[11]+e[9],e[15]+e[13]),top:Xu(e[3]-e[1],e[7]-e[5],e[11]-e[9],e[15]-e[13]),near:Xu(e[3]+e[2],e[7]+e[6],e[11]+e[10],e[15]+e[14]),far:Xu(e[3]-e[2],e[7]-e[6],e[11]-e[10],e[15]-e[14])}}const OL=new _t;function Xu(e,t,r,n){OL.set(e,t,r);const i=OL.len();return{distance:n/i,normal:new _t(-e/i,-t/i,-r/i)}}function A2t(e){return e-Math.fround(e)}let yh;function bb(e,t){const{size:r=1,startIndex:n=0}=t,i=t.endIndex!==void 0?t.endIndex:e.length,o=(i-n)/r;yh=Kc.allocate(yh,o,{type:Float32Array,size:r*2});let a=n,s=0;for(;a<i;){for(let l=0;l<r;l++){const u=e[a++];yh[s+l]=u,yh[s+l+r]=A2t(u)}s+=r*2}return yh.subarray(0,o*r*2)}const C2t=Math.PI/180,M2t=Jh(),RL=[0,0,0],k2t={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function x2t({width:e,height:t,orthographic:r,fovyRadians:n,focalDistance:i,padding:o,near:a,far:s}){const l=e/t,u=r?new Nr().orthographic({fovy:n,aspect:l,focalDistance:i,near:a,far:s}):new Nr().perspective({fovy:n,aspect:l,near:a,far:s});if(o){const{left:c=0,right:f=0,top:h=0,bottom:d=0}=o,p=_r((c+e-f)/2,0,e)-e/2,v=_r((h+t-d)/2,0,t)-t/2;u[8]-=p*2/e,u[9]+=v*2/t}return u}class xs{constructor(t={}){E(this,"id",void 0),E(this,"x",void 0),E(this,"y",void 0),E(this,"width",void 0),E(this,"height",void 0),E(this,"isGeospatial",void 0),E(this,"zoom",void 0),E(this,"focalDistance",void 0),E(this,"position",void 0),E(this,"modelMatrix",void 0),E(this,"distanceScales",void 0),E(this,"scale",void 0),E(this,"center",void 0),E(this,"cameraPosition",void 0),E(this,"projectionMatrix",void 0),E(this,"viewMatrix",void 0),E(this,"viewMatrixUncentered",void 0),E(this,"viewMatrixInverse",void 0),E(this,"viewProjectionMatrix",void 0),E(this,"pixelProjectionMatrix",void 0),E(this,"pixelUnprojectionMatrix",void 0),E(this,"resolution",void 0),E(this,"_frustumPlanes",{}),this.id=t.id||this.constructor.displayName||"viewport",this.x=t.x||0,this.y=t.y||0,this.width=t.width||1,this.height=t.height||1,this.zoom=t.zoom||0,this.distanceScales=t.distanceScales||k2t,this.focalDistance=t.focalDistance||1,this.position=t.position||RL,this.modelMatrix=t.modelMatrix||null;const{longitude:r,latitude:n}=t;this.isGeospatial=Number.isFinite(n)&&Number.isFinite(r),this._initProps(t),this._initMatrices(t),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?bi.WEB_MERCATOR:bi.WEB_MERCATOR_AUTO_OFFSET:bi.IDENTITY}equals(t){return t instanceof xs?this===t?!0:t.width===this.width&&t.height===this.height&&t.scale===this.scale&&_o(t.projectionMatrix,this.projectionMatrix)&&_o(t.viewMatrix,this.viewMatrix):!1}project(t,{topLeft:r=!0}={}){const n=this.projectPosition(t),i=Vz(n,this.pixelProjectionMatrix),[o,a]=i,s=r?a:this.height-a;return t.length===2?[o,s]:[o,s,i[2]]}unproject(t,{topLeft:r=!0,targetZ:n}={}){const[i,o,a]=t,s=r?o:this.height-o,l=n&&n*this.distanceScales.unitsPerMeter[2],u=wy([i,s,a],this.pixelUnprojectionMatrix,l),[c,f,h]=this.unprojectPosition(u);return Number.isFinite(a)?[c,f,h]:Number.isFinite(n)?[c,f,n]:[c,f]}projectPosition(t){const[r,n]=this.projectFlat(t),i=(t[2]||0)*this.distanceScales.unitsPerMeter[2];return[r,n,i]}unprojectPosition(t){const[r,n]=this.unprojectFlat(t),i=(t[2]||0)*this.distanceScales.metersPerUnit[2];return[r,n,i]}projectFlat(t){if(this.isGeospatial){const r=ks(t);return r[1]=_r(r[1],-318,830),r}return t}unprojectFlat(t){return this.isGeospatial?Zc(t):t}getBounds(t={}){const r={targetZ:t.z||0},n=this.unproject([0,0],r),i=this.unproject([this.width,0],r),o=this.unproject([0,this.height],r),a=this.unproject([this.width,this.height],r);return[Math.min(n[0],i[0],o[0],a[0]),Math.min(n[1],i[1],o[1],a[1]),Math.max(n[0],i[0],o[0],a[0]),Math.max(n[1],i[1],o[1],a[1])]}getDistanceScales(t){return t?Z3({longitude:t[0],latitude:t[1],highPrecision:!0}):this.distanceScales}containsPixel({x:t,y:r,width:n=1,height:i=1}){return t<this.x+this.width&&this.x<t+n&&r<this.y+this.height&&this.y<r+i}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,E2t(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(t,r){return null}_initProps(t){const r=t.longitude,n=t.latitude;this.isGeospatial&&(Number.isFinite(t.zoom)||(this.zoom=G_t({latitude:n})+Math.log2(this.focalDistance)),this.distanceScales=t.distanceScales||Z3({latitude:n,longitude:r}));const i=Math.pow(2,this.zoom);this.scale=i;const{position:o,modelMatrix:a}=t;let s=RL;if(o&&(s=a?new Nr(a).transformAsVector(o,[]):o),this.isGeospatial){const l=this.projectPosition([r,n,0]);this.center=new _t(s).scale(this.distanceScales.unitsPerMeter).add(l)}else this.center=this.projectPosition(s)}_initMatrices(t){const{viewMatrix:r=M2t,projectionMatrix:n=null,orthographic:i=!1,fovyRadians:o,fovy:a=75,near:s=.1,far:l=1e3,padding:u=null,focalDistance:c=1}=t;this.viewMatrixUncentered=r,this.viewMatrix=new Nr().multiplyRight(r).translate(new _t(this.center).negate()),this.projectionMatrix=n||x2t({width:this.width,height:this.height,orthographic:i,fovyRadians:o||a*C2t,focalDistance:c,padding:u,near:s,far:l});const f=Jh();Vl(f,f,this.projectionMatrix),Vl(f,f,this.viewMatrix),this.viewProjectionMatrix=f,this.viewMatrixInverse=W3([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=P2t(this.viewMatrixInverse);const h=Jh(),d=Jh();iA(h,h,[this.width/2,-this.height/2,1]),n1(h,h,[1,-1,0]),Vl(d,h,this.viewProjectionMatrix),this.pixelProjectionMatrix=d,this.pixelUnprojectionMatrix=W3(Jh(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||Wt.warn("Pixel project matrix not invertible")()}}E(xs,"displayName","Viewport");const L2t=512,I2t=4003e4,O2t=Math.PI/180;function DL(e){const t=Math.cos(e*O2t);return L2t/I2t/t}class Po extends xs{constructor(t={}){const{latitude:r=0,longitude:n=0,zoom:i=0,pitch:o=0,bearing:a=0,nearZMultiplier:s=.1,farZMultiplier:l=1.01,orthographic:u=!1,projectionMatrix:c,repeat:f=!1,worldOffset:h=0,legacyMeterSizes:d=!1}=t;let{width:p,height:v,altitude:g=1.5}=t;const m=Math.pow(2,i);p=p||1,v=v||1;let y,_=null;c?(g=c[5]/2,y=o1(g)):(t.fovy?(y=t.fovy,g=zz(y)):y=o1(g),_=W_t({width:p,height:v,pitch:o,fovy:y,nearZMultiplier:s,farZMultiplier:l}));let b=j_t({height:v,pitch:o,bearing:a,scale:m,altitude:g});h&&(b=new Nr().translate([512*h,0,0]).multiplyLeft(b)),super({...t,width:p,height:v,viewMatrix:b,longitude:n,latitude:r,zoom:i,..._,fovy:y,focalDistance:g}),E(this,"longitude",void 0),E(this,"latitude",void 0),E(this,"pitch",void 0),E(this,"bearing",void 0),E(this,"altitude",void 0),E(this,"fovy",void 0),E(this,"orthographic",void 0),E(this,"_subViewports",void 0),E(this,"_pseudoMeters",void 0),this.latitude=r,this.longitude=n,this.zoom=i,this.pitch=o,this.bearing=a,this.altitude=g,this.fovy=y,this.orthographic=u,this._subViewports=f?[]:null,this._pseudoMeters=d,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const t=this.getBounds(),r=Math.floor((t[0]+180)/360),n=Math.ceil((t[2]-180)/360);for(let i=r;i<=n;i++){const o=i?new Po({...this,worldOffset:i}):this;this._subViewports.push(o)}}return this._subViewports}projectPosition(t){if(this._pseudoMeters)return super.projectPosition(t);const[r,n]=this.projectFlat(t),i=(t[2]||0)*DL(t[1]);return[r,n,i]}unprojectPosition(t){if(this._pseudoMeters)return super.unprojectPosition(t);const[r,n]=this.unprojectFlat(t),i=(t[2]||0)/DL(n);return[r,n,i]}addMetersToLngLat(t,r){return $z(t,r)}panByPosition(t,r){const n=wy(r,this.pixelUnprojectionMatrix),i=this.projectFlat(t),o=r1([],i,vz([],n)),a=r1([],this.center,o),[s,l]=this.unprojectFlat(a);return{longitude:s,latitude:l}}getBounds(t={}){const r=X_t(this,t.z||0);return[Math.min(r[0][0],r[1][0],r[2][0],r[3][0]),Math.min(r[0][1],r[1][1],r[2][1],r[3][1]),Math.max(r[0][0],r[1][0],r[2][0],r[3][0]),Math.max(r[0][1],r[1][1],r[2][1],r[3][1])]}fitBounds(t,r={}){const{width:n,height:i}=this,{longitude:o,latitude:a,zoom:s}=Uz({width:n,height:i,bounds:t,...r});return new Po({width:n,height:i,longitude:o,latitude:a,zoom:s})}}E(Po,"displayName","WebMercatorViewport");function wb(e,t,r=!1){const n=t.projectPosition(e);if(r&&t instanceof Po){const[i,o,a=0]=e,s=t.getDistanceScales([i,o]);n[2]=a*s.unitsPerMeter[2]}return n}function R2t(e){const{viewport:t,modelMatrix:r,coordinateOrigin:n}=e;let{coordinateSystem:i,fromCoordinateSystem:o,fromCoordinateOrigin:a}=e;return i===ue.DEFAULT&&(i=t.isGeospatial?ue.LNGLAT:ue.CARTESIAN),o===void 0&&(o=i),a===void 0&&(a=n),{viewport:t,coordinateSystem:i,coordinateOrigin:n,modelMatrix:r,fromCoordinateSystem:o,fromCoordinateOrigin:a}}function Wz(e,{viewport:t,modelMatrix:r,coordinateSystem:n,coordinateOrigin:i,offsetMode:o}){let[a,s,l=0]=e;switch(r&&([a,s,l]=bf([],[a,s,l,1],r)),n){case ue.LNGLAT:return wb([a,s,l],t,o);case ue.LNGLAT_OFFSETS:return wb([a+i[0],s+i[1],l+(i[2]||0)],t,o);case ue.METER_OFFSETS:return wb($z(i,[a,s,l]),t,o);case ue.CARTESIAN:default:return t.isGeospatial?[a+i[0],s+i[1],l+i[2]]:t.projectPosition([a,s,l])}}function D2t(e,t){const{viewport:r,coordinateSystem:n,coordinateOrigin:i,modelMatrix:o,fromCoordinateSystem:a,fromCoordinateOrigin:s}=R2t(t),{geospatialOrigin:l,shaderCoordinateOrigin:u,offsetMode:c}=Fz(r,n,i),f=Wz(e,{viewport:r,modelMatrix:o,coordinateSystem:a,coordinateOrigin:s,offsetMode:c});if(c){const h=r.projectPosition(l||u);Tz(f,f,h)}return f}const cc={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},a1=Symbol.for("component"),Rc=Symbol.for("asyncPropDefaults"),eu=Symbol.for("asyncPropOriginal"),us=Symbol.for("asyncPropResolved");function Ty(e,t=()=>!0){return Array.isArray(e)?Hz(e,t,[]):t(e)?[e]:[]}function Hz(e,t,r){let n=-1;for(;++n<e.length;){const i=e[n];Array.isArray(i)?Hz(i,t,r):t(i)&&r.push(i)}return r}function N2t({target:e,source:t,start:r=0,count:n=1}){const i=t.length,o=n*i;let a=0;for(let s=r;a<i;a++)e[s++]=t[a];for(;a<o;)a<o-a?(e.copyWithin(r+a,r,r+a),a*=2):(e.copyWithin(r+a,r,r+o-a),a=o);return e}class F2t{constructor(t,r,n){E(this,"id",void 0),E(this,"context",void 0),E(this,"isLoaded",void 0),E(this,"persistent",void 0),E(this,"_loadCount",0),E(this,"_subscribers",new Set),E(this,"_data",void 0),E(this,"_loader",void 0),E(this,"_error",void 0),E(this,"_content",void 0),this.id=t,this.context=n,this.setData(r)}subscribe(t){this._subscribers.add(t)}unsubscribe(t){this._subscribers.delete(t)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(t,r){if(t===this._data&&!r)return;this._data=t;const n=++this._loadCount;let i=t;typeof t=="string"&&(i=Qm(t)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(o=>{this._loadCount===n&&(this.isLoaded=!0,this._error=void 0,this._content=o)}).catch(o=>{this._loadCount===n&&(this.isLoaded=!0,this._error=o||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=t);for(const o of this._subscribers)o.onChange(this.getData())}}class B2t{constructor({gl:t,protocol:r}){E(this,"protocol",void 0),E(this,"_context",void 0),E(this,"_resources",void 0),E(this,"_consumers",void 0),E(this,"_pruneRequest",void 0),this.protocol=r||"resource://",this._context={gl:t,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(t){return t.startsWith(this.protocol)?!0:t in this._resources}add({resourceId:t,data:r,forceUpdate:n=!1,persistent:i=!0}){let o=this._resources[t];o?o.setData(r,n):(o=new F2t(t,r,this._context),this._resources[t]=o),o.persistent=i}remove(t){const r=this._resources[t];r&&(r.delete(),delete this._resources[t])}unsubscribe({consumerId:t}){const r=this._consumers[t];if(r){for(const n in r){const i=r[n],o=this._resources[i.resourceId];o&&o.unsubscribe(i)}delete this._consumers[t],this.prune()}}subscribe({resourceId:t,onChange:r,consumerId:n,requestId:i="default"}){const{_resources:o,protocol:a}=this;t.startsWith(a)&&(t=t.replace(a,""),o[t]||this.add({resourceId:t,data:null,persistent:!1}));const s=o[t];if(this._track(n,i,s,r),s)return s.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const t in this._resources)this._resources[t].delete()}_track(t,r,n,i){const o=this._consumers,a=o[t]=o[t]||{},s=a[r]||{},l=s.resourceId&&this._resources[s.resourceId];l&&(l.unsubscribe(s),this.prune()),n&&(a[r]=s,s.onChange=i,s.resourceId=n.id,n.subscribe(s))}_prune(){this._pruneRequest=null;for(const t of Object.keys(this._resources)){const r=this._resources[t];!r.persistent&&!r.inUse()&&(r.delete(),delete this._resources[t])}}}const $2t="layerManager.setLayers",z2t="layerManager.activateViewport";class V2t{constructor(t,{deck:r,stats:n,viewport:i,timeline:o}={}){E(this,"layers",void 0),E(this,"context",void 0),E(this,"resourceManager",void 0),E(this,"_lastRenderedLayers",[]),E(this,"_needsRedraw",!1),E(this,"_needsUpdate",!1),E(this,"_nextLayers",null),E(this,"_debug",!1),E(this,"activateViewport",a=>{Lr(z2t,this,a),a&&(this.context.viewport=a)}),this.layers=[],this.resourceManager=new B2t({gl:t,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:t,deck:r,programManager:t&&s2t(t),stats:n||new gy({id:"deck.gl"}),viewport:i||new xs({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:o||new Oz,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const t of this.layers)this._finalizeLayer(t)}needsRedraw(t={clearRedrawFlags:!1}){let r=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);for(const n of this.layers){const i=n.getNeedsRedraw(t);r=r||i}return r}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(t){this._needsRedraw=this._needsRedraw||t}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t}getLayers({layerIds:t}={}){return t?this.layers.filter(r=>t.find(n=>r.id.indexOf(n)===0)):this.layers}setProps(t){"debug"in t&&(this._debug=t.debug),"userData"in t&&(this.context.userData=t.userData),"layers"in t&&(this._nextLayers=t.layers),"onError"in t&&(this.context.onError=t.onError)}setLayers(t,r){Lr($2t,this,r,t),this._lastRenderedLayers=t;const n=Ty(t,Boolean);for(const i of n)i.context=this.context;this._updateLayers(this.layers,n)}updateLayers(){const t=this.needsUpdate();t&&(this.setNeedsRedraw("updating layers: ".concat(t)),this.setLayers(this._nextLayers||this._lastRenderedLayers,t)),this._nextLayers=null}_handleError(t,r,n){n.raiseError(r,"".concat(t," of ").concat(n))}_updateLayers(t,r){const n={};for(const a of t)n[a.id]?Wt.warn("Multiple old layers with same id ".concat(a.id))():n[a.id]=a;const i=[];this._updateSublayersRecursively(r,n,i),this._finalizeOldLayers(n);let o=!1;for(const a of i)if(a.hasUniformTransition()){o="Uniform transition in ".concat(a);break}this._needsUpdate=o,this.layers=i}_updateSublayersRecursively(t,r,n){for(const i of t){i.context=this.context;const o=r[i.id];o===null&&Wt.warn("Multiple new layers with same id ".concat(i.id))(),r[i.id]=null;let a=null;try{this._debug&&o!==i&&i.validateProps(),o?(this._transferLayerState(o,i),this._updateLayer(i)):this._initializeLayer(i),n.push(i),a=i.isComposite?i.getSubLayers():null}catch(s){this._handleError("matching",s,i)}a&&this._updateSublayersRecursively(a,r,n)}}_finalizeOldLayers(t){for(const r in t){const n=t[r];n&&this._finalizeLayer(n)}}_initializeLayer(t){try{t._initialize(),t.lifecycle=cc.INITIALIZED}catch(r){this._handleError("initialization",r,t)}}_transferLayerState(t,r){r._transferState(t),r.lifecycle=cc.MATCHED,r!==t&&(t.lifecycle=cc.AWAITING_GC)}_updateLayer(t){try{t._update()}catch(r){this._handleError("update",r,t)}}_finalizeLayer(t){this._needsRedraw=this._needsRedraw||"finalized ".concat(t),t.lifecycle=cc.AWAITING_FINALIZATION;try{t._finalize(),t.lifecycle=cc.FINALIZED}catch(r){this._handleError("finalization",r,t)}}}function wf(e,t){if(e===t)return!0;if(!e||!t)return!1;for(const r in e){const n=e[r],i=t[r];if(!(n===i||Array.isArray(n)&&Array.isArray(i)&&wf(n,i)))return!1}return!0}class U2t{constructor(t){E(this,"width",void 0),E(this,"height",void 0),E(this,"views",void 0),E(this,"viewState",void 0),E(this,"controllers",void 0),E(this,"timeline",void 0),E(this,"_viewports",void 0),E(this,"_viewportMap",void 0),E(this,"_isUpdating",void 0),E(this,"_needsRedraw",void 0),E(this,"_needsUpdate",void 0),E(this,"_eventManager",void 0),E(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=t.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=t.eventManager,this._eventCallbacks={onViewStateChange:t.onViewStateChange,onInteractionStateChange:t.onInteractionStateChange},Object.seal(this),this.setProps(t)}finalize(){for(const t in this.controllers){const r=this.controllers[t];r&&r.finalize()}this.controllers={}}needsRedraw(t={clearRedrawFlags:!1}){const r=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),r}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t,this._needsRedraw=this._needsRedraw||t}updateViewStates(){for(const t in this.controllers){const r=this.controllers[t];r&&r.updateTransition()}}getViewports(t){return t?this._viewports.filter(r=>r.containsPixel(t)):this._viewports}getViews(){const t={};return this.views.forEach(r=>{t[r.id]=r}),t}getView(t){return this.views.find(r=>r.id===t)}getViewState(t){const r=typeof t=="string"?this.getView(t):t,n=r&&this.viewState[r.getViewStateId()]||this.viewState;return r?r.filterViewState(n):n}getViewport(t){return this._viewportMap[t]}unproject(t,r){const n=this.getViewports(),i={x:t[0],y:t[1]};for(let o=n.length-1;o>=0;--o){const a=n[o];if(a.containsPixel(i)){const s=t.slice();return s[0]-=a.x,s[1]-=a.y,a.unproject(s,r)}}return null}setProps(t){t.views&&this._setViews(t.views),t.viewState&&this._setViewState(t.viewState),("width"in t||"height"in t)&&this._setSize(t.width,t.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(t,r){(t!==this.width||r!==this.height)&&(this.width=t,this.height=r,this.setNeedsUpdate("Size changed"))}_setViews(t){t=Ty(t,Boolean),this._diffViews(t,this.views)&&this.setNeedsUpdate("views changed"),this.views=t}_setViewState(t){t?(!wf(t,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=t):Wt.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(t,r){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...r,viewId:t})}_createController(t,r){const n=r.type;return new n({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,r.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:o=>t.makeViewport({viewState:o,width:this.width,height:this.height})})}_updateController(t,r,n,i){const o=t.controller;if(o){const a={...r,...o,id:t.id,x:n.x,y:n.y,width:n.width,height:n.height};return i||(i=this._createController(t,a)),i&&i.setProps(a),i}return null}_rebuildViewports(){const{views:t}=this,r=this.controllers;this._viewports=[],this.controllers={};let n=!1;for(let i=t.length;i--;){const o=t[i],a=this.getViewState(o),s=o.makeViewport({viewState:a,width:this.width,height:this.height});let l=r[o.id];const u=Boolean(o.controller);u&&!l&&(n=!0),(n||!u)&&l&&(l.finalize(),l=null),this.controllers[o.id]=this._updateController(o,a,s,l),this._viewports.unshift(s)}for(const i in r){const o=r[i];o&&!this.controllers[i]&&o.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(t=>{t.id&&(this._viewportMap[t.id]=this._viewportMap[t.id]||t)})}_diffViews(t,r){return t.length!==r.length?!0:t.some((n,i)=>!t[i].equals(r[i]))}}const G2t=/([0-9]+\.?[0-9]*)(%|px)/;function Ba(e){switch(typeof e){case"number":return{position:e,relative:!1};case"string":const t=G2t.exec(e);if(t&&t.length>=3){const r=t[2]==="%",n=parseFloat(t[1]);return{position:r?n/100:n,relative:r}}default:throw new Error("Could not parse position string ".concat(e))}}function $a(e,t){return e.relative?Math.round(e.position*t):e.position}function ur(e,t){if(!e)throw new Error(t||"deck.gl: assertion failed.")}class Xz{constructor(t){E(this,"id",void 0),E(this,"viewportInstance",void 0),E(this,"_x",void 0),E(this,"_y",void 0),E(this,"_width",void 0),E(this,"_height",void 0),E(this,"_padding",void 0),E(this,"props",void 0);const{id:r,x:n=0,y:i=0,width:o="100%",height:a="100%",padding:s=null,viewportInstance:l}=t||{};ur(!l||l instanceof xs),this.viewportInstance=l,this.id=r||this.constructor.displayName||"view",this.props={...t,id:this.id},this._x=Ba(n),this._y=Ba(i),this._width=Ba(o),this._height=Ba(a),this._padding=s&&{left:Ba(s.left||0),right:Ba(s.right||0),top:Ba(s.top||0),bottom:Ba(s.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(t){return this===t?!0:this.viewportInstance?t.viewportInstance?this.viewportInstance.equals(t.viewportInstance):!1:this.ViewportType===t.ViewportType&&wf(this.props,t.props)}makeViewport({width:t,height:r,viewState:n}){if(this.viewportInstance)return this.viewportInstance;n=this.filterViewState(n);const i=this.getDimensions({width:t,height:r});return new this.ViewportType({...n,...this.props,...i})}getViewStateId(){const{viewState:t}=this.props;return typeof t=="string"?t:(t==null?void 0:t.id)||this.id}filterViewState(t){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const r={...t};for(const n in this.props.viewState)n!=="id"&&(r[n]=this.props.viewState[n]);return r}return t}getDimensions({width:t,height:r}){const n={x:$a(this._x,t),y:$a(this._y,r),width:$a(this._width,t),height:$a(this._height,r)};return this._padding&&(n.padding={left:$a(this._padding.left,t),top:$a(this._padding.top,r),right:$a(this._padding.right,t),bottom:$a(this._padding.bottom,r)}),n}get controller(){const t=this.props.controller;return t?t===!0?{type:this.ControllerType}:typeof t=="function"?{type:t}:{type:this.ControllerType,...t}:null}}class H0{constructor(t){E(this,"_inProgress",void 0),E(this,"_handle",void 0),E(this,"_timeline",void 0),E(this,"time",void 0),E(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=t,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(t){var r,n;this.cancel(),this.settings=t,this._inProgress=!0,(r=(n=this.settings).onStart)===null||r===void 0||r.call(n,this)}end(){if(this._inProgress){var t,r;this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(t=(r=this.settings).onEnd)===null||t===void 0||t.call(r,this)}}cancel(){if(this._inProgress){var t,r;(t=(r=this.settings).onInterrupt)===null||t===void 0||t.call(r,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1}}update(){var t,r;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:n,settings:i}=this;this._handle=n.addChannel({delay:n.getTime(),duration:i.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(t=(r=this.settings).onUpdate)===null||t===void 0||t.call(r,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const NL=()=>{},K3={BREAK:1,SNAP_TO_END:2,IGNORE:3},j2t=e=>e,W2t=K3.BREAK;class H2t{constructor(t){E(this,"getControllerState",void 0),E(this,"props",void 0),E(this,"propsInTransition",void 0),E(this,"transition",void 0),E(this,"onViewStateChange",void 0),E(this,"onStateChange",void 0),E(this,"_onTransitionUpdate",r=>{const{time:n,settings:{interpolator:i,startProps:o,endProps:a,duration:s,easing:l}}=r,u=l(n/s),c=i.interpolateProps(o,a,u);this.propsInTransition=this.getControllerState({...this.props,...c}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=t.getControllerState,this.propsInTransition=null,this.transition=new H0(t.timeline),this.onViewStateChange=t.onViewStateChange||NL,this.onStateChange=t.onStateChange||NL}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(t){let r=!1;const n=this.props;if(this.props=t,!n||this._shouldIgnoreViewportChange(n,t))return!1;if(this._isTransitionEnabled(t)){let i=n;if(this.transition.inProgress){const{interruption:o,endProps:a}=this.transition.settings;i={...n,...o===K3.SNAP_TO_END?a:this.propsInTransition||n}}this._triggerTransition(i,t),r=!0}else this.transition.cancel();return r}updateTransition(){this.transition.update()}_isTransitionEnabled(t){const{transitionDuration:r,transitionInterpolator:n}=t;return(r>0||r==="auto")&&Boolean(n)}_isUpdateDueToCurrentTransition(t){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(t,this.propsInTransition):!1}_shouldIgnoreViewportChange(t,r){return this.transition.inProgress?this.transition.settings.interruption===K3.IGNORE||this._isUpdateDueToCurrentTransition(r):this._isTransitionEnabled(r)?r.transitionInterpolator.arePropsEqual(t,r):!0}_triggerTransition(t,r){const n=this.getControllerState(t),i=this.getControllerState(r).shortestPathFrom(n),o=r.transitionInterpolator,a=o.getDuration?o.getDuration(t,r):r.transitionDuration;if(a===0)return;const s=o.initializeProps(t,i);this.propsInTransition={};const l={duration:a,easing:r.transitionEasing||j2t,interpolator:o,interruption:r.transitionInterruption||W2t,startProps:s.start,endProps:s.end,onStart:r.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(r.onTransitionInterrupt),onEnd:this._onTransitionEnd(r.onTransitionEnd)};this.transition.start(l),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(t){return r=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),t==null||t(r)}}}class X2t{constructor(t){E(this,"_propsToCompare",void 0),E(this,"_propsToExtract",void 0),E(this,"_requiredProps",void 0);const{compare:r,extract:n,required:i}=t;this._propsToCompare=r,this._propsToExtract=n||r,this._requiredProps=i}arePropsEqual(t,r){for(const n of this._propsToCompare)if(!(n in t)||!(n in r)||!_o(t[n],r[n]))return!1;return!0}initializeProps(t,r){const n={},i={};for(const o of this._propsToExtract)(o in t||o in r)&&(n[o]=t[o],i[o]=r[o]);return this._checkRequiredProps(n),this._checkRequiredProps(i),{start:n,end:i}}getDuration(t,r){return r.transitionDuration}_checkRequiredProps(t){!this._requiredProps||this._requiredProps.forEach(r=>{const n=t[r];ur(Number.isFinite(n)||Array.isArray(n),"".concat(r," is required for transition"))})}}const Y2t=["longitude","latitude","zoom","bearing","pitch"],q2t=["longitude","latitude","zoom"];class Py extends X2t{constructor(t={}){const r=Array.isArray(t)?t:t.transitionProps,n=Array.isArray(t)?{}:t;n.transitionProps=Array.isArray(r)?{compare:r,required:r}:r||{compare:Y2t,required:q2t},super(n.transitionProps),E(this,"opts",void 0),this.opts=n}initializeProps(t,r){const n=super.initializeProps(t,r),{makeViewport:i,around:o}=this.opts;if(i&&o){const a=i(t),s=i(r),l=a.unproject(o);n.start.around=o,Object.assign(n.end,{around:s.project(l),aroundPosition:l,width:r.width,height:r.height})}return n}interpolateProps(t,r,n){const i={};for(const o of this._propsToExtract)i[o]=zl(t[o]||0,r[o]||0,n);if(r.aroundPosition&&this.opts.makeViewport){const o=this.opts.makeViewport({...r,...i});Object.assign(i,o.panByPosition(r.aroundPosition,zl(t.around,r.around,n)))}return i}}const za={transitionDuration:0},Z2t=300,Tv=e=>1-(1-e)*(1-e),Yu={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},hl={};class Yz{constructor(t){E(this,"props",void 0),E(this,"state",{}),E(this,"transitionManager",void 0),E(this,"eventManager",void 0),E(this,"onViewStateChange",void 0),E(this,"onStateChange",void 0),E(this,"makeViewport",void 0),E(this,"_controllerState",void 0),E(this,"_events",{}),E(this,"_interactionState",{isDragging:!1}),E(this,"_customEvents",[]),E(this,"_eventStartBlocked",null),E(this,"_panMove",!1),E(this,"invertPan",!1),E(this,"dragMode","rotate"),E(this,"inertia",0),E(this,"scrollZoom",!0),E(this,"dragPan",!0),E(this,"dragRotate",!0),E(this,"doubleClickZoom",!0),E(this,"touchZoom",!0),E(this,"touchRotate",!1),E(this,"keyboard",!0),this.transitionManager=new H2t({...t,getControllerState:r=>new this.ControllerState(r),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=t.eventManager,this.onViewStateChange=t.onViewStateChange||(()=>{}),this.onStateChange=t.onStateChange||(()=>{}),this.makeViewport=t.makeViewport}set events(t){this.toggleEvents(this._customEvents,!1),this.toggleEvents(t,!0),this._customEvents=t,this.props&&this.setProps(this.props)}finalize(){for(const r in this._events)if(this._events[r]){var t;(t=this.eventManager)===null||t===void 0||t.off(r,this.handleEvent)}this.transitionManager.finalize()}handleEvent(t){this._controllerState=void 0;const r=this._eventStartBlocked;switch(t.type){case"panstart":return r?!1:this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return r?!1:this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"tripanstart":return r?!1:this._onTriplePanStart(t);case"tripanmove":return this._onTriplePan(t);case"tripanend":return this._onTriplePanEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(t){const{x:r,y:n}=this.props,{offsetCenter:i}=t;return[i.x-r,i.y-n]}isPointInBounds(t,r){const{width:n,height:i}=this.props;if(r&&r.handled)return!1;const o=t[0]>=0&&t[0]<=n&&t[1]>=0&&t[1]<=i;return o&&r&&r.stopPropagation(),o}isFunctionKeyPressed(t){const{srcEvent:r}=t;return Boolean(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(t){const r=setTimeout(()=>{this._eventStartBlocked===r&&(this._eventStartBlocked=null)},t);this._eventStartBlocked=r}setProps(t){t.dragMode&&(this.dragMode=t.dragMode),this.props=t,"transitionInterpolator"in t||(t.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(t);const{inertia:r}=t;this.inertia=Number.isFinite(r)?r:r===!0?Z2t:0;const{scrollZoom:n=!0,dragPan:i=!0,dragRotate:o=!0,doubleClickZoom:a=!0,touchZoom:s=!0,touchRotate:l=!1,keyboard:u=!0}=t,c=Boolean(this.onViewStateChange);this.toggleEvents(Yu.WHEEL,c&&n),this.toggleEvents(Yu.PAN,c&&(i||o)),this.toggleEvents(Yu.PINCH,c&&(s||l)),this.toggleEvents(Yu.TRIPLE_PAN,c&&l),this.toggleEvents(Yu.DOUBLE_TAP,c&&a),this.toggleEvents(Yu.KEYBOARD,c&&u),this.scrollZoom=n,this.dragPan=i,this.dragRotate=o,this.doubleClickZoom=a,this.touchZoom=s,this.touchRotate=l,this.keyboard=u}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(t,r){this.eventManager&&t.forEach(n=>{this._events[n]!==r&&(this._events[n]=r,r?this.eventManager.on(n,this.handleEvent):this.eventManager.off(n,this.handleEvent))})}updateViewport(t,r=null,n={}){const i={...t.getViewportProps(),...r},o=this.controllerState!==t;if(this.state=t.getState(),this._setInteractionState(n),o){const a=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:a})}}_onTransition(t){this.onViewStateChange({...t,interactionState:this._interactionState})}_setInteractionState(t){Object.assign(this._interactionState,t),this.onStateChange(this._interactionState)}_onPanStart(t){const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;let n=this.isFunctionKeyPressed(t)||t.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(n=!n);const i=this.controllerState[n?"panStart":"rotateStart"]({pos:r});return this._panMove=n,this.updateViewport(i,za,{isDragging:!0}),!0}_onPan(t){return this.isDragging()?this._panMove?this._onPanMove(t):this._onPanRotate(t):!1}_onPanEnd(t){return this.isDragging()?this._panMove?this._onPanMoveEnd(t):this._onPanRotateEnd(t):!1}_onPanMove(t){if(!this.dragPan)return!1;const r=this.getCenter(t),n=this.controllerState.pan({pos:r});return this.updateViewport(n,za,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(t){const{inertia:r}=this;if(this.dragPan&&r&&t.velocity){const n=this.getCenter(t),i=[n[0]+t.velocityX*r/2,n[1]+t.velocityY*r/2],o=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Tv},{isDragging:!1,isPanning:!0})}else{const n=this.controllerState.panEnd();this.updateViewport(n,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(t){if(!this.dragRotate)return!1;const r=this.getCenter(t),n=this.controllerState.rotate({pos:r});return this.updateViewport(n,za,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(t){const{inertia:r}=this;if(this.dragRotate&&r&&t.velocity){const n=this.getCenter(t),i=[n[0]+t.velocityX*r/2,n[1]+t.velocityY*r/2],o=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Tv},{isDragging:!1,isRotating:!0})}else{const n=this.controllerState.rotateEnd();this.updateViewport(n,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(t){if(!this.scrollZoom)return!1;t.srcEvent.preventDefault();const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const{speed:n=.01,smooth:i=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:o}=t;let a=2/(1+Math.exp(-Math.abs(o*n)));o<0&&a!==0&&(a=1/a);const s=this.controllerState.zoom({pos:r,scale:a});return this.updateViewport(s,{...this._getTransitionProps({around:r}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(t){const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const n=this.controllerState.rotateStart({pos:r});return this.updateViewport(n,za,{isDragging:!0}),!0}_onTriplePan(t){if(!this.touchRotate||!this.isDragging())return!1;const r=this.getCenter(t);r[0]-=t.deltaX;const n=this.controllerState.rotate({pos:r});return this.updateViewport(n,za,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(t){if(!this.isDragging())return!1;const{inertia:r}=this;if(this.touchRotate&&r&&t.velocityY){const n=this.getCenter(t),i=[n[0],n[1]+=t.velocityY*r/2],o=this.controllerState.rotate({pos:i});this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Tv},{isDragging:!1,isRotating:!0}),this.blockEvents(r)}else{const n=this.controllerState.rotateEnd();this.updateViewport(n,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(t){const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const n=this.controllerState.zoomStart({pos:r}).rotateStart({pos:r});return hl._startPinchRotation=t.rotation,hl._lastPinchEvent=t,this.updateViewport(n,za,{isDragging:!0}),!0}_onPinch(t){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let r=this.controllerState;if(this.touchZoom){const{scale:n}=t,i=this.getCenter(t);r=r.zoom({pos:i,scale:n})}if(this.touchRotate){const{rotation:n}=t;r=r.rotate({deltaAngleX:hl._startPinchRotation-n})}return this.updateViewport(r,za,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),hl._lastPinchEvent=t,!0}_onPinchEnd(t){if(!this.isDragging())return!1;const{inertia:r}=this,{_lastPinchEvent:n}=hl;if(this.touchZoom&&r&&n&&t.scale!==n.scale){const i=this.getCenter(t);let o=this.controllerState.rotateEnd();const a=Math.log2(t.scale),s=(a-Math.log2(n.scale))/(t.deltaTime-n.deltaTime),l=Math.pow(2,a+s*r/2);o=o.zoom({pos:i,scale:l}).zoomEnd(),this.updateViewport(o,{...this._getTransitionProps({around:i}),transitionDuration:r,transitionEasing:Tv},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(r)}else{const i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return hl._startPinchRotation=null,hl._lastPinchEvent=null,!0}_onDoubleTap(t){if(!this.doubleClickZoom)return!1;const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const n=this.isFunctionKeyPressed(t),i=this.controllerState.zoom({pos:r,scale:n?.5:2});return this.updateViewport(i,this._getTransitionProps({around:r}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(t){if(!this.keyboard)return!1;const r=this.isFunctionKeyPressed(t),{zoomSpeed:n,moveSpeed:i,rotateSpeedX:o,rotateSpeedY:a}=this.keyboard===!0?{}:this.keyboard,{controllerState:s}=this;let l;const u={};switch(t.srcEvent.code){case"Minus":l=r?s.zoomOut(n).zoomOut(n):s.zoomOut(n),u.isZooming=!0;break;case"Equal":l=r?s.zoomIn(n).zoomIn(n):s.zoomIn(n),u.isZooming=!0;break;case"ArrowLeft":r?(l=s.rotateLeft(o),u.isRotating=!0):(l=s.moveLeft(i),u.isPanning=!0);break;case"ArrowRight":r?(l=s.rotateRight(o),u.isRotating=!0):(l=s.moveRight(i),u.isPanning=!0);break;case"ArrowUp":r?(l=s.rotateUp(a),u.isRotating=!0):(l=s.moveUp(i),u.isPanning=!0);break;case"ArrowDown":r?(l=s.rotateDown(a),u.isRotating=!0):(l=s.moveDown(i),u.isPanning=!0);break;default:return!1}return this.updateViewport(l,this._getTransitionProps(),u),!0}_getTransitionProps(t){const{transition:r}=this;return!r||!r.transitionInterpolator?za:t?{...r,transitionInterpolator:new Py({...t,...r.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:r}}class qz{constructor(t,r){E(this,"_viewportProps",void 0),E(this,"_state",void 0),this._viewportProps=this.applyConstraints(t),this._state=r}getViewportProps(){return this._viewportProps}getState(){return this._state}}const FL=5,K2t=1.2;class J2t extends qz{constructor(t){const{width:r,height:n,latitude:i,longitude:o,zoom:a,bearing:s=0,pitch:l=0,altitude:u=1.5,position:c=[0,0,0],maxZoom:f=20,minZoom:h=0,maxPitch:d=60,minPitch:p=0,startPanLngLat:v,startZoomLngLat:g,startRotatePos:m,startBearing:y,startPitch:_,startZoom:b,normalize:T=!0}=t;ur(Number.isFinite(o)),ur(Number.isFinite(i)),ur(Number.isFinite(a)),super({width:r,height:n,latitude:i,longitude:o,zoom:a,bearing:s,pitch:l,altitude:u,maxZoom:f,minZoom:h,maxPitch:d,minPitch:p,normalize:T,position:c},{startPanLngLat:v,startZoomLngLat:g,startRotatePos:m,startBearing:y,startPitch:_,startZoom:b}),E(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart({pos:t}){return this._getUpdatedState({startPanLngLat:this._unproject(t)})}pan({pos:t,startPos:r}){const n=this.getState().startPanLngLat||this._unproject(r);if(!n)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(n,t);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:t,deltaAngleX:r=0,deltaAngleY:n=0}){const{startRotatePos:i,startBearing:o,startPitch:a}=this.getState();if(!i||o===void 0||a===void 0)return this;let s;return t?s=this._getNewRotation(t,i,a,o):s={bearing:o+r,pitch:a+n},this._getUpdatedState(s)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:t}){return this._getUpdatedState({startZoomLngLat:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom({pos:t,startPos:r,scale:n}){let{startZoom:i,startZoomLngLat:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(r)||this._unproject(t)),!o)return this;const{maxZoom:a,minZoom:s}=this.getViewportProps();let l=i+Math.log2(n);l=_r(l,s,a);const u=this.makeViewport({...this.getViewportProps(),zoom:l});return this._getUpdatedState({zoom:l,...u.panByPosition(o,t)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(t=2){return this._zoomFromCenter(t)}zoomOut(t=2){return this._zoomFromCenter(1/t)}moveLeft(t=100){return this._panFromCenter([t,0])}moveRight(t=100){return this._panFromCenter([-t,0])}moveUp(t=100){return this._panFromCenter([0,t])}moveDown(t=100){return this._panFromCenter([0,-t])}rotateLeft(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-t})}rotateRight(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+t})}rotateUp(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+t})}rotateDown(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-t})}shortestPathFrom(t){const r=t.getViewportProps(),n={...this.getViewportProps()},{bearing:i,longitude:o}=n;return Math.abs(i-r.bearing)>180&&(n.bearing=i<0?i+360:i-360),Math.abs(o-r.longitude)>180&&(n.longitude=o<0?o+360:o-360),n}applyConstraints(t){const{maxZoom:r,minZoom:n,zoom:i}=t;t.zoom=_r(i,n,r);const{maxPitch:o,minPitch:a,pitch:s}=t;t.pitch=_r(s,a,o);const{normalize:l=!0}=t;return l&&Object.assign(t,Y_t(t)),t}_zoomFromCenter(t){const{width:r,height:n}=this.getViewportProps();return this.zoom({pos:[r/2,n/2],scale:t})}_panFromCenter(t){const{width:r,height:n}=this.getViewportProps();return this.pan({startPos:[r/2,n/2],pos:[r/2+t[0],n/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}_unproject(t){const r=this.makeViewport(this.getViewportProps());return t&&r.unproject(t)}_getNewRotation(t,r,n,i){const o=t[0]-r[0],a=t[1]-r[1],s=t[1],l=r[1],{width:u,height:c}=this.getViewportProps(),f=o/u;let h=0;a>0?Math.abs(c-l)>FL&&(h=a/(l-c)*K2t):a<0&&l>FL&&(h=1-s/l),h=_r(h,-1,1);const{minPitch:d,maxPitch:p}=this.getViewportProps(),v=i+180*f;let g=n;return h>0?g=n+h*(p-n):h<0&&(g=n-h*(d-n)),{pitch:g,bearing:v}}}class Q2t extends Yz{constructor(...t){super(...t),E(this,"ControllerState",J2t),E(this,"transition",{transitionDuration:300,transitionInterpolator:new Py({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),E(this,"dragMode","pan")}setProps(t){t.position=t.position||[0,0,0];const r=this.props;super.setProps(t),(!r||r.height!==t.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...t,...this.state}))}}class Zz extends Xz{get ViewportType(){return Po}get ControllerType(){return Q2t}}E(Zz,"displayName","MapView");class tbt extends Sy{constructor(t,r){super(t,r),E(this,"maskMap",void 0),E(this,"fbo",void 0);const{mapSize:n=2048}=r;this.maskMap=new ln(t,{width:n,height:n,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.fbo=new nr(t,{id:"maskmap",width:n,height:n,attachments:{[36064]:this.maskMap}})}render(t){const r=this.gl,n=[!1,!1,!1,!1];return n[t.channel]=!0,Zn(r,{clearColor:[255,255,255,255],blend:!0,blendFunc:[0,1],blendEquation:32778,colorMask:n,depthTest:!1},()=>super.render({...t,target:this.fbo,pass:"mask"}))}shouldDrawLayer(t){return t.props.operation===j0.MASK}delete(){this.fbo.delete(),this.maskMap.delete()}}const ebt=new Nr().lookAt({eye:[0,0,1]});function rbt({width:e,height:t,near:r,far:n,padding:i}){let o=-e/2,a=e/2,s=-t/2,l=t/2;if(i){const{left:u=0,right:c=0,top:f=0,bottom:h=0}=i,d=_r((u+e-c)/2,0,e)-e/2,p=_r((f+t-h)/2,0,t)-t/2;o-=d,a-=d,s+=p,l+=p}return new Nr().ortho({left:o,right:a,bottom:s,top:l,near:r,far:n})}class nbt extends xs{constructor(t){const{width:r,height:n,near:i=.1,far:o=1e3,zoom:a=0,target:s=[0,0,0],padding:l=null,flipY:u=!0}=t,c=Array.isArray(a)?a[0]:a,f=Array.isArray(a)?a[1]:a,h=Math.min(c,f),d=Math.pow(2,h);let p;if(c!==f){const v=Math.pow(2,c),g=Math.pow(2,f);p={unitsPerMeter:[v/d,g/d,1],metersPerUnit:[d/v,d/g,1]}}super({...t,longitude:void 0,position:s,viewMatrix:ebt.clone().scale([d,d*(u?-1:1),d]),projectionMatrix:rbt({width:r||1,height:n||1,padding:l,near:i,far:o}),zoom:h,distanceScales:p})}projectFlat([t,r]){const{unitsPerMeter:n}=this.distanceScales;return[t*n[0],r*n[1]]}unprojectFlat([t,r]){const{metersPerUnit:n}=this.distanceScales;return[t*n[0],r*n[1]]}panByPosition(t,r){const n=wy(r,this.pixelUnprojectionMatrix),i=this.projectFlat(t),o=r1([],i,vz([],n)),a=r1([],this.center,o);return{target:this.unprojectFlat(a)}}}class ibt extends qz{constructor(t){const{width:r,height:n,rotationX:i=0,rotationOrbit:o=0,target:a=[0,0,0],zoom:s=0,minRotationX:l=-90,maxRotationX:u=90,minZoom:c=-1/0,maxZoom:f=1/0,startPanPosition:h,startRotatePos:d,startRotationX:p,startRotationOrbit:v,startZoomPosition:g,startZoom:m}=t;super({width:r,height:n,rotationX:i,rotationOrbit:o,target:a,zoom:s,minRotationX:l,maxRotationX:u,minZoom:c,maxZoom:f},{startPanPosition:h,startRotatePos:d,startRotationX:p,startRotationOrbit:v,startZoomPosition:g,startZoom:m}),E(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart({pos:t}){return this._getUpdatedState({startPanPosition:this._unproject(t)})}pan({pos:t,startPosition:r}){const n=this.getState().startPanPosition||r;if(!n)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(n,t);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:t,deltaAngleX:r=0,deltaAngleY:n=0}){const{startRotatePos:i,startRotationX:o,startRotationOrbit:a}=this.getState(),{width:s,height:l}=this.getViewportProps();if(!i||o===void 0||a===void 0)return this;let u;if(t){let c=(t[0]-i[0])/s;const f=(t[1]-i[1])/l;(o<-90||o>90)&&(c*=-1),u={rotationX:o+f*180,rotationOrbit:a+c*180}}else u={rotationX:o+n,rotationOrbit:a+r};return this._getUpdatedState(u)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(t){const r=t.getViewportProps(),n={...this.getViewportProps()},{rotationOrbit:i}=n;return Math.abs(i-r.rotationOrbit)>180&&(n.rotationOrbit=i<0?i+360:i-360),n}zoomStart({pos:t}){return this._getUpdatedState({startZoomPosition:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom({pos:t,startPos:r,scale:n}){let{startZoom:i,startZoomPosition:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(r)||this._unproject(t)),!o)return this;const a=this._calculateNewZoom({scale:n,startZoom:i}),s=this.makeViewport({...this.getViewportProps(),zoom:a});return this._getUpdatedState({zoom:a,...s.panByPosition(o,t)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(t=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:t})})}zoomOut(t=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/t})})}moveLeft(t=50){return this._panFromCenter([-t,0])}moveRight(t=50){return this._panFromCenter([t,0])}moveUp(t=50){return this._panFromCenter([0,-t])}moveDown(t=50){return this._panFromCenter([0,t])}rotateLeft(t=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-t})}rotateRight(t=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+t})}rotateUp(t=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-t})}rotateDown(t=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+t})}_unproject(t){const r=this.makeViewport(this.getViewportProps());return t&&r.unproject(t)}_calculateNewZoom({scale:t,startZoom:r}){const{maxZoom:n,minZoom:i}=this.getViewportProps();r===void 0&&(r=this.getViewportProps().zoom);const o=r+Math.log2(t);return _r(o,i,n)}_panFromCenter(t){const{width:r,height:n,target:i}=this.getViewportProps();return this.pan({startPosition:i,pos:[r/2+t[0],n/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}applyConstraints(t){const{maxZoom:r,minZoom:n,zoom:i,maxRotationX:o,minRotationX:a,rotationOrbit:s}=t;return t.zoom=Array.isArray(i)?[_r(i[0],n,r),_r(i[1],n,r)]:_r(i,n,r),t.rotationX=_r(t.rotationX,a,o),(s<-180||s>180)&&(t.rotationOrbit=T2t(s+180,360)-180),t}}class obt extends ibt{constructor(t){super(t),E(this,"zoomAxis",void 0),this.zoomAxis=t.zoomAxis||"all"}_calculateNewZoom({scale:t,startZoom:r}){const{maxZoom:n,minZoom:i}=this.getViewportProps();r===void 0&&(r=this.getViewportProps().zoom);let o=Math.log2(t);if(Array.isArray(r)){let[a,s]=r;switch(this.zoomAxis){case"X":a=_r(a+o,i,n);break;case"Y":s=_r(s+o,i,n);break;default:let l=Math.min(a+o,s+o);l<i&&(o+=i-l),l=Math.max(a+o,s+o),l>n&&(o+=n-l),a+=o,s+=o}return[a,s]}return _r(r+o,i,n)}}class abt extends Yz{constructor(...t){super(...t),E(this,"ControllerState",obt),E(this,"transition",{transitionDuration:300,transitionInterpolator:new Py(["target","zoom"])}),E(this,"dragMode","pan")}_onPanRotate(){return!1}}class uA extends Xz{get ViewportType(){return nbt}get ControllerType(){return abt}}E(uA,"displayName","OrthographicView");function sbt({layers:e,viewport:t}){let r=null;for(const o of e){const a=o.getBounds();a&&(r?(r[0]=Math.min(r[0],a[0][0]),r[1]=Math.min(r[1],a[0][1]),r[2]=Math.max(r[2],a[1][0]),r[3]=Math.max(r[3],a[1][1])):r=[a[0][0],a[0][1],a[1][0],a[1][1]])}const n=t.getBounds();if(!r)return n;const i=ubt(n);return r[2]-r[0]<i[2]-i[0]||r[3]-r[1]<i[3]-i[1]||(r[0]=Math.max(r[0],i[0]),r[1]=Math.max(r[1],i[1]),r[2]=Math.min(r[2],i[2]),r[3]=Math.min(r[3],i[3])),r}function lbt({bounds:e,viewport:t,width:r,height:n}){if(e[2]<=e[0]||e[3]<=e[1])return null;const i=1;if(r-=i*2,n-=i*2,t instanceof Po){const{longitude:s,latitude:l,zoom:u}=Uz({width:r,height:n,bounds:[[e[0],e[1]],[e[2],e[3]]],maxZoom:20});return new Po({longitude:s,latitude:l,zoom:u,x:i,y:i,width:r,height:n})}const o=[(e[0]+e[2])/2,(e[1]+e[3])/2,0],a=Math.min(20,r/(e[2]-e[0]),n/(e[3]-e[1]));return new uA({x:i,y:i}).makeViewport({width:r,height:n,viewState:{target:o,zoom:Math.log2(a)}})}function ubt(e){const t={x:e[2]-e[0],y:e[3]-e[1]},r={x:e[0]+.5*t.x,y:e[1]+.5*t.y};return[r.x-t.x,r.y-t.y,r.x+t.x,r.y+t.y]}class cbt{constructor(){E(this,"id","mask-effect"),E(this,"props",null),E(this,"useInPicking",!0),E(this,"dummyMaskMap",void 0),E(this,"channels",[]),E(this,"masks",null),E(this,"maskPass",void 0),E(this,"maskMap",void 0),E(this,"lastViewport",void 0)}preRender(t,{layers:r,layerFilter:n,viewports:i,onViewportActive:o,views:a}){this.dummyMaskMap||(this.dummyMaskMap=new ln(t,{width:1,height:1}));const s=r.filter(f=>f.props.visible&&f.props.operation===j0.MASK);if(s.length===0){this.masks=null,this.channels.length=0;return}this.masks={},this.maskPass||(this.maskPass=new tbt(t,{id:"default-mask"}),this.maskMap=this.maskPass.maskMap);const l=this._sortMaskChannels(s),u=i[0],c=!this.lastViewport||!this.lastViewport.equals(u);for(const f in l)this._renderChannel(l[f],{layerFilter:n,onViewportActive:o,views:a,viewport:u,viewportChanged:c})}_renderChannel(t,{layerFilter:r,onViewportActive:n,views:i,viewport:o,viewportChanged:a}){const s=this.channels[t.index];if(!s)return;const l=t===s||s.layers.length!==t.layers.length||t.layerBounds.some((u,c)=>u!==s.layerBounds[c]);if(t.bounds=s.bounds,t.maskBounds=s.maskBounds,this.channels[t.index]=t,(l||a)&&(this.lastViewport=o,t.bounds=sbt({layers:t.layers,viewport:o}),l||!_o(t.bounds,s.bounds))){const{maskPass:u,maskMap:c}=this,f=lbt({bounds:t.bounds,viewport:o,width:c.width,height:c.height});t.maskBounds=f?f.getBounds():[0,0,1,1],u.render({pass:"mask",channel:t.index,layers:t.layers,layerFilter:r,viewports:f?[f]:[],onViewportActive:n,views:i,moduleParameters:{devicePixelRatio:1}})}this.masks[t.id]={index:t.index,bounds:t.maskBounds,coordinateOrigin:t.coordinateOrigin,coordinateSystem:t.coordinateSystem}}_sortMaskChannels(t){const r={};let n=0;for(const i of t){const{id:o}=i.root;let a=r[o];if(!a){if(++n>4){Wt.warn("Too many mask layers. The max supported is 4")();continue}a={id:o,index:this.channels.findIndex(s=>(s==null?void 0:s.id)===o),layers:[],layerBounds:[],coordinateOrigin:i.root.props.coordinateOrigin,coordinateSystem:i.root.props.coordinateSystem},r[o]=a}a.layers.push(i),a.layerBounds.push(i.getBounds())}for(let i=0;i<4;i++){const o=this.channels[i];(!o||!(o.id in r))&&(this.channels[i]=null)}for(const i in r){const o=r[i];o.index<0&&(o.index=this.channels.findIndex(a=>!a),this.channels[o.index]=o)}return r}getModuleParameters(){return{maskMap:this.masks?this.maskMap:this.dummyMaskMap,maskChannels:this.masks}}cleanup(){this.dummyMaskMap&&(this.dummyMaskMap.delete(),this.dummyMaskMap=void 0),this.maskPass&&(this.maskPass.delete(),this.maskPass=void 0,this.maskMap=void 0),this.lastViewport=void 0,this.masks=null,this.channels.length=0}}const fbt=new jz;class hbt{constructor(){E(this,"effects",void 0),E(this,"_internalEffects",void 0),E(this,"_needsRedraw",void 0),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(t){"effects"in t&&(t.effects.length!==this.effects.length||!wf(t.effects,this.effects))&&(this.setEffects(t.effects),this._needsRedraw="effects changed")}needsRedraw(t={clearRedrawFlags:!1}){const r=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),r}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(t=[]){this.cleanup(),this.effects=t,this._internalEffects=t.slice(),this._internalEffects.push(new cbt),t.some(r=>r instanceof jz)||this._internalEffects.push(fbt)}cleanup(){for(const t of this.effects)t.cleanup();for(const t of this._internalEffects)t.cleanup();this.effects.length=0,this._internalEffects.length=0}}class dbt extends Sy{shouldDrawLayer(t){return t.props.operation===j0.DRAW}}const BL={blendFunc:[1,0,32771,0],blendEquation:32774};class Kz extends Sy{constructor(...t){super(...t),E(this,"pickZ",void 0),E(this,"_colors",null)}render(t){return t.pickingFBO?this._drawPickingBuffer(t):super.render(t)}_drawPickingBuffer({layers:t,layerFilter:r,views:n,viewports:i,onViewportActive:o,pickingFBO:a,deviceRect:{x:s,y:l,width:u,height:c},cullRect:f,effects:h,pass:d="picking",pickZ:p}){const v=this.gl;this.pickZ=p;const g=p?null:{byLayer:new Map,byAlpha:[]};this._colors=g;const m=Zn(v,{scissorTest:!0,scissor:[s,l,u,c],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...BL,blend:!p},()=>super.render({target:a,layers:t,layerFilter:r,views:n,viewports:i,onViewportActive:o,cullRect:f,effects:h==null?void 0:h.filter(_=>_.useInPicking),pass:d}));return this._colors=null,{decodePickingColor:g&&vbt.bind(null,g),stats:m}}shouldDrawLayer(t){return t.props.pickable&&t.props.operation===j0.DRAW}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(t,r,n){const i={...t.props.parameters};return this._colors?(Object.assign(i,BL),i.blend=!0,i.blendColor=pbt(this._colors,t,n)):i.blend=!1,i}}function pbt(e,t,r){const{byLayer:n,byAlpha:i}=e;let o,a=n.get(t);return a?(a.viewports.push(r),o=a.a):(o=n.size+1,o<=255?(a={a:o,layer:t,viewports:[r]},n.set(t,a),i[o]=a):(Wt.warn("Too many pickable layers, only picking the first 255")(),o=0)),[0,0,0,o/255]}function vbt(e,t){const r=e.byAlpha[t[3]];return r&&{pickedLayer:r.layer,pickedViewports:r.viewports,pickedObjectIndex:r.layer.decodePickingColor(t)}}const gbt="deckRenderer.renderLayers";class mbt{constructor(t){this.gl=t,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new dbt(t),this.pickLayersPass=new Kz(t),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(t){"layerFilter"in t&&this.layerFilter!==t.layerFilter&&(this.layerFilter=t.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in t&&this.drawPickingColors!==t.drawPickingColors&&(this.drawPickingColors=t.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(t){const r=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;t.layerFilter=t.layerFilter||this.layerFilter,t.effects=t.effects||[],t.target=t.target||nr.getDefaultFramebuffer(this.gl),this._preRender(t.effects,t);const n=this.lastPostProcessEffect?this.renderBuffers[0]:t.target,i=r.render({...t,target:n});this._postRender(t.effects,t),this.renderCount++,Lr(gbt,this,i,t)}needsRedraw(t={clearRedrawFlags:!1}){const r=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),r}finalize(){const{renderBuffers:t}=this;for(const r of t)r.delete();t.length=0}_preRender(t,r){let n=null;for(const i of t)i.preRender(this.gl,r),i.postRender&&(n=i);n&&this._resizeRenderBuffers(),this.lastPostProcessEffect=n}_resizeRenderBuffers(){const{renderBuffers:t}=this;t.length===0&&t.push(new nr(this.gl),new nr(this.gl));for(const r of t)r.resize()}_postRender(t,r){const{renderBuffers:n}=this,i={inputBuffer:n[0],swapBuffer:n[1],target:null};for(const o of t)if(o.postRender){if(o===this.lastPostProcessEffect){i.target=r.target,o.postRender(this.gl,i);break}const a=o.postRender(this.gl,i);i.inputBuffer=a,i.swapBuffer=a===n[0]?n[1]:n[0]}}}const ybt={pickedColor:null,pickedObjectIndex:-1};function _bt({pickedColors:e,decodePickingColor:t,deviceX:r,deviceY:n,deviceRadius:i,deviceRect:o}){const{x:a,y:s,width:l,height:u}=o;let c=i*i,f=-1,h=0;for(let d=0;d<u;d++){const p=d+s-n,v=p*p;if(v>c)h+=4*l;else for(let g=0;g<l;g++){if(e[h+3]-1>=0){const y=g+a-r,_=y*y+v;_<=c&&(c=_,f=h)}h+=4}}if(f>=0){const d=e.slice(f,f+4),p=t(d);if(p){const v=Math.floor(f/4/l),g=f/4-v*l;return{...p,pickedColor:d,pickedX:a+g,pickedY:s+v}}Wt.error("Picked non-existent layer. Is picking buffer corrupt?")()}return ybt}function bbt({pickedColors:e,decodePickingColor:t}){const r=new Map;if(e){for(let n=0;n<e.length;n+=4)if(e[n+3]-1>=0){const o=e.slice(n,n+4),a=o.join(",");if(!r.has(a)){const s=t(o);s?r.set(a,{...s,color:o}):Wt.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(r.values())}function Jz({pickInfo:e,viewports:t,pixelRatio:r,x:n,y:i,z:o}){let a=t[0];t.length>1&&(a=Sbt((e==null?void 0:e.pickedViewports)||t,{x:n,y:i}));let s;if(a){const l=[n-a.x,i-a.y];o!==void 0&&(l[2]=o),s=a.unproject(l)}return{color:null,layer:null,viewport:a,index:-1,picked:!1,x:n,y:i,pixel:[n,i],coordinate:s,devicePixel:e&&"pickedX"in e?[e.pickedX,e.pickedY]:void 0,pixelRatio:r}}function wbt(e){const{pickInfo:t,lastPickedInfo:r,mode:n,layers:i}=e,{pickedColor:o,pickedLayer:a,pickedObjectIndex:s}=t,l=a?[a]:[];if(n==="hover"){const f=r.index,h=r.layerId,d=a?a.props.id:null;if(d!==h||s!==f){if(d!==h){const p=i.find(v=>v.props.id===h);p&&l.unshift(p)}r.layerId=d,r.index=s,r.info=null}}const u=Jz(e),c=new Map;return c.set(null,u),l.forEach(f=>{let h={...u};f===a&&(h.color=o,h.index=s,h.picked=!0),h=Qz({layer:f,info:h,mode:n});const d=h.layer;f===a&&n==="hover"&&(r.info=h),c.set(d.id,h),n==="hover"&&d.updateAutoHighlight(h)}),c}function Qz({layer:e,info:t,mode:r}){for(;e&&t;){const n=t.layer||null;t.sourceLayer=n,t.layer=e,t=e.getPickingInfo({info:t,mode:r,sourceLayer:n}),e=e.parent}return t}function Sbt(e,t){for(let r=e.length-1;r>=0;r--){const n=e[r];if(n.containsPixel(t))return n}return e[0]}class Tbt{constructor(t){E(this,"gl",void 0),E(this,"pickingFBO",void 0),E(this,"depthFBO",void 0),E(this,"pickLayersPass",void 0),E(this,"layerFilter",void 0),E(this,"lastPickedInfo",void 0),E(this,"_pickable",!0),this.gl=t,this.pickLayersPass=new Kz(t),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(t){"layerFilter"in t&&(this.layerFilter=t.layerFilter),"_pickable"in t&&(this._pickable=t._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(t){return this._pickClosestObject(t)}pickObjects(t){return this._pickVisibleObjects(t)}getLastPickedObject({x:t,y:r,layers:n,viewports:i},o=this.lastPickedInfo.info){const a=o&&o.layer&&o.layer.id,s=o&&o.viewport&&o.viewport.id,l=a?n.find(h=>h.id===a):null,u=s&&i.find(h=>h.id===s)||i[0],c=u&&u.unproject([t-u.x,r-u.y]);return{...o,...{x:t,y:r,viewport:u,coordinate:c,layer:l}}}_resizeBuffer(){var t,r;const{gl:n}=this;if(!this.pickingFBO&&(this.pickingFBO=new nr(n),nr.isSupported(n,{colorBufferFloat:!0}))){const i=new nr(n);i.attach({[36064]:new ln(n,{format:Qt(n)?34836:6408,type:5126})}),this.depthFBO=i}(t=this.pickingFBO)===null||t===void 0||t.resize({width:n.canvas.width,height:n.canvas.height}),(r=this.depthFBO)===null||r===void 0||r.resize({width:n.canvas.width,height:n.canvas.height})}_getPickable(t){if(this._pickable===!1)return null;const r=t.filter(n=>n.isPickable()&&!n.isComposite);return r.length?r:null}_pickClosestObject({layers:t,views:r,viewports:n,x:i,y:o,radius:a=0,depth:s=1,mode:l="query",unproject3D:u,onViewportActive:c,effects:f}){const h=this._getPickable(t),d=Xc(this.gl);if(!h)return{result:[],emptyInfo:Jz({viewports:n,x:i,y:o,pixelRatio:d})};this._resizeBuffer();const p=ob(this.gl,[i,o],!0),v=[p.x+Math.floor(p.width/2),p.y+Math.floor(p.height/2)],g=Math.round(a*d),{width:m,height:y}=this.pickingFBO,_=this._getPickingRect({deviceX:v[0],deviceY:v[1],deviceRadius:g,deviceWidth:m,deviceHeight:y}),b={x:i-a,y:o-a,width:a*2+1,height:a*2+1};let T;const S=[],P=new Set;for(let C=0;C<s;C++){let A;if(_){const k=this._drawAndSample({layers:h,views:r,viewports:n,onViewportActive:c,deviceRect:_,cullRect:b,effects:f,pass:"picking:".concat(l)});A=_bt({...k,deviceX:v[0],deviceY:v[1],deviceRadius:g,deviceRect:_})}else A={pickedColor:null,pickedObjectIndex:-1};let M;A.pickedLayer&&u&&this.depthFBO&&(M=this._drawAndSample({layers:[A.pickedLayer],views:r,viewports:n,onViewportActive:c,deviceRect:{x:A.pickedX,y:A.pickedY,width:1,height:1},cullRect:b,effects:f,pass:"picking:".concat(l,":z")},!0).pickedColors[0]),A.pickedLayer&&C+1<s&&(P.add(A.pickedLayer),A.pickedLayer.disablePickingIndex(A.pickedObjectIndex)),T=wbt({pickInfo:A,lastPickedInfo:this.lastPickedInfo,mode:l,layers:h,viewports:n,x:i,y:o,z:M,pixelRatio:d});for(const k of T.values())k.layer&&S.push(k);if(!A.pickedColor)break}for(const C of P)C.restorePickingColors();return{result:S,emptyInfo:T.get(null)}}_pickVisibleObjects({layers:t,views:r,viewports:n,x:i,y:o,width:a=1,height:s=1,mode:l="query",maxObjects:u=null,onViewportActive:c,effects:f}){const h=this._getPickable(t);if(!h)return[];this._resizeBuffer();const d=Xc(this.gl),p=ob(this.gl,[i,o],!0),v=p.x,g=p.y+p.height,m=ob(this.gl,[i+a,o+s],!0),y=m.x+m.width,_=m.y,b={x:v,y:_,width:y-v,height:g-_},T=this._drawAndSample({layers:h,views:r,viewports:n,onViewportActive:c,deviceRect:b,cullRect:{x:i,y:o,width:a,height:s},effects:f,pass:"picking:".concat(l)}),S=bbt(T),P=new Map,C=Number.isFinite(u);for(let A=0;A<S.length&&!(C&&u&&P.size>=u);A++){const M=S[A];let k={color:M.pickedColor,layer:null,index:M.pickedObjectIndex,picked:!0,x:i,y:o,pixelRatio:d};k=Qz({layer:M.pickedLayer,info:k,mode:l}),P.has(k.object)||P.set(k.object,k)}return Array.from(P.values())}_drawAndSample({layers:t,views:r,viewports:n,onViewportActive:i,deviceRect:o,cullRect:a,effects:s,pass:l},u=!1){const c=u?this.depthFBO:this.pickingFBO,{decodePickingColor:f}=this.pickLayersPass.render({layers:t,layerFilter:this.layerFilter,views:r,viewports:n,onViewportActive:i,pickingFBO:c,deviceRect:o,cullRect:a,effects:s,pass:l,pickZ:u}),{x:h,y:d,width:p,height:v}=o,g=new(u?Float32Array:Uint8Array)(p*v*4);return by(c,{sourceX:h,sourceY:d,sourceWidth:p,sourceHeight:v,target:g}),{pickedColors:g,decodePickingColor:f}}_getPickingRect({deviceX:t,deviceY:r,deviceRadius:n,deviceWidth:i,deviceHeight:o}){const a=Math.max(0,t-n),s=Math.max(0,r-n),l=Math.min(i,t+n+1)-a,u=Math.min(o,r+n+1)-s;return l<=0||u<=0?null:{x:a,y:s,width:l,height:u}}}const Pbt={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class Ebt{constructor(t){E(this,"el",null),E(this,"isVisible",!1);const r=t.parentElement;r&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,Pbt),r.appendChild(this.el))}setTooltip(t,r,n){const i=this.el;if(!!i){if(typeof t=="string")i.innerText=t;else if(t)t.text&&(i.innerText=t.text),t.html&&(i.innerHTML=t.html),t.className&&(i.className=t.className),Object.assign(i.style,t.style);else{this.isVisible=!1,i.style.display="none";return}this.isVisible=!0,i.style.display="block",i.style.transform="translate(".concat(r,"px, ").concat(n,"px)")}}remove(){this.el&&(this.el.remove(),this.el=null)}}var Sf={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(e){(function(t,r,n,i){var o=["","webkit","Moz","MS","ms","o"],a=r.createElement("div"),s="function",l=Math.round,u=Math.abs,c=Date.now;function f(x,I,V){return setTimeout(_(x,V),I)}function h(x,I,V){return Array.isArray(x)?(d(x,V[I],V),!0):!1}function d(x,I,V){var H;if(!!x)if(x.forEach)x.forEach(I,V);else if(x.length!==i)for(H=0;H<x.length;)I.call(V,x[H],H,x),H++;else for(H in x)x.hasOwnProperty(H)&&I.call(V,x[H],H,x)}function p(x,I,V){var H="DEPRECATED METHOD: "+I+`
`+V+` AT 
`;return function(){var et=new Error("get-stack-trace"),yt=et&&et.stack?et.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Yt=t.console&&(t.console.warn||t.console.log);return Yt&&Yt.call(t.console,H,yt),x.apply(this,arguments)}}var v;typeof Object.assign!="function"?v=function(I){if(I===i||I===null)throw new TypeError("Cannot convert undefined or null to object");for(var V=Object(I),H=1;H<arguments.length;H++){var et=arguments[H];if(et!==i&&et!==null)for(var yt in et)et.hasOwnProperty(yt)&&(V[yt]=et[yt])}return V}:v=Object.assign;var g=p(function(I,V,H){for(var et=Object.keys(V),yt=0;yt<et.length;)(!H||H&&I[et[yt]]===i)&&(I[et[yt]]=V[et[yt]]),yt++;return I},"extend","Use `assign`."),m=p(function(I,V){return g(I,V,!0)},"merge","Use `assign`.");function y(x,I,V){var H=I.prototype,et;et=x.prototype=Object.create(H),et.constructor=x,et._super=H,V&&v(et,V)}function _(x,I){return function(){return x.apply(I,arguments)}}function b(x,I){return typeof x==s?x.apply(I&&I[0]||i,I):x}function T(x,I){return x===i?I:x}function S(x,I,V){d(M(I),function(H){x.addEventListener(H,V,!1)})}function P(x,I,V){d(M(I),function(H){x.removeEventListener(H,V,!1)})}function C(x,I){for(;x;){if(x==I)return!0;x=x.parentNode}return!1}function A(x,I){return x.indexOf(I)>-1}function M(x){return x.trim().split(/\s+/g)}function k(x,I,V){if(x.indexOf&&!V)return x.indexOf(I);for(var H=0;H<x.length;){if(V&&x[H][V]==I||!V&&x[H]===I)return H;H++}return-1}function O(x){return Array.prototype.slice.call(x,0)}function F(x,I,V){for(var H=[],et=[],yt=0;yt<x.length;){var Yt=I?x[yt][I]:x[yt];k(et,Yt)<0&&H.push(x[yt]),et[yt]=Yt,yt++}return V&&(I?H=H.sort(function(pr,Vr){return pr[I]>Vr[I]}):H=H.sort()),H}function z(x,I){for(var V,H,et=I[0].toUpperCase()+I.slice(1),yt=0;yt<o.length;){if(V=o[yt],H=V?V+et:I,H in x)return H;yt++}return i}var R=1;function j(){return R++}function Z(x){var I=x.ownerDocument||x;return I.defaultView||I.parentWindow||t}var q=/mobile|tablet|ip(ad|hone|od)|android/i,tt="ontouchstart"in t,Pt=z(t,"PointerEvent")!==i,Ot=tt&&q.test(navigator.userAgent),bt="touch",wt="pen",Ht="mouse",Y="kinect",nt=25,K=1,dt=2,St=4,At=8,st=1,ct=2,B=4,G=8,X=16,J=ct|B,Q=G|X,lt=J|Q,vt=["x","y"],at=["clientX","clientY"];function it(x,I){var V=this;this.manager=x,this.callback=I,this.element=x.element,this.target=x.options.inputTarget,this.domHandler=function(H){b(x.options.enable,[x])&&V.handler(H)},this.init()}it.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(Z(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&P(this.element,this.evEl,this.domHandler),this.evTarget&&P(this.target,this.evTarget,this.domHandler),this.evWin&&P(Z(this.element),this.evWin,this.domHandler)}};function rt(x){var I,V=x.options.inputClass;return V?I=V:Pt?I=Ky:Ot?I=ip:tt?I=Jy:I=Bs,new I(x,Rt)}function Rt(x,I,V){var H=V.pointers.length,et=V.changedPointers.length,yt=I&K&&H-et===0,Yt=I&(St|At)&&H-et===0;V.isFirst=!!yt,V.isFinal=!!Yt,yt&&(x.session={}),V.eventType=I,Mt(x,V),x.emit("hammer.input",V),x.recognize(V),x.session.prevInput=V}function Mt(x,I){var V=x.session,H=I.pointers,et=H.length;V.firstInput||(V.firstInput=Kt(I)),et>1&&!V.firstMultiple?V.firstMultiple=Kt(I):et===1&&(V.firstMultiple=!1);var yt=V.firstInput,Yt=V.firstMultiple,sr=Yt?Yt.center:yt.center,pr=I.center=ge(H);I.timeStamp=c(),I.deltaTime=I.timeStamp-yt.timeStamp,I.angle=Vi(sr,pr),I.distance=Pr(sr,pr),Dt(V,I),I.offsetDirection=Te(I.deltaX,I.deltaY);var Vr=me(I.deltaTime,I.deltaX,I.deltaY);I.overallVelocityX=Vr.x,I.overallVelocityY=Vr.y,I.overallVelocity=u(Vr.x)>u(Vr.y)?Vr.x:Vr.y,I.scale=Yt?Fs(Yt.pointers,H):1,I.rotation=Yt?rp(Yt.pointers,H):0,I.maxPointers=V.prevInput?I.pointers.length>V.prevInput.maxPointers?I.pointers.length:V.prevInput.maxPointers:I.pointers.length,$t(V,I);var Gi=x.element;C(I.srcEvent.target,Gi)&&(Gi=I.srcEvent.target),I.target=Gi}function Dt(x,I){var V=I.center,H=x.offsetDelta||{},et=x.prevDelta||{},yt=x.prevInput||{};(I.eventType===K||yt.eventType===St)&&(et=x.prevDelta={x:yt.deltaX||0,y:yt.deltaY||0},H=x.offsetDelta={x:V.x,y:V.y}),I.deltaX=et.x+(V.x-H.x),I.deltaY=et.y+(V.y-H.y)}function $t(x,I){var V=x.lastInterval||I,H=I.timeStamp-V.timeStamp,et,yt,Yt,sr;if(I.eventType!=At&&(H>nt||V.velocity===i)){var pr=I.deltaX-V.deltaX,Vr=I.deltaY-V.deltaY,Gi=me(H,pr,Vr);yt=Gi.x,Yt=Gi.y,et=u(Gi.x)>u(Gi.y)?Gi.x:Gi.y,sr=Te(pr,Vr),x.lastInterval=I}else et=V.velocity,yt=V.velocityX,Yt=V.velocityY,sr=V.direction;I.velocity=et,I.velocityX=yt,I.velocityY=Yt,I.direction=sr}function Kt(x){for(var I=[],V=0;V<x.pointers.length;)I[V]={clientX:l(x.pointers[V].clientX),clientY:l(x.pointers[V].clientY)},V++;return{timeStamp:c(),pointers:I,center:ge(I),deltaX:x.deltaX,deltaY:x.deltaY}}function ge(x){var I=x.length;if(I===1)return{x:l(x[0].clientX),y:l(x[0].clientY)};for(var V=0,H=0,et=0;et<I;)V+=x[et].clientX,H+=x[et].clientY,et++;return{x:l(V/I),y:l(H/I)}}function me(x,I,V){return{x:I/x||0,y:V/x||0}}function Te(x,I){return x===I?st:u(x)>=u(I)?x<0?ct:B:I<0?G:X}function Pr(x,I,V){V||(V=vt);var H=I[V[0]]-x[V[0]],et=I[V[1]]-x[V[1]];return Math.sqrt(H*H+et*et)}function Vi(x,I,V){V||(V=vt);var H=I[V[0]]-x[V[0]],et=I[V[1]]-x[V[1]];return Math.atan2(et,H)*180/Math.PI}function rp(x,I){return Vi(I[1],I[0],at)+Vi(x[1],x[0],at)}function Fs(x,I){return Pr(I[0],I[1],at)/Pr(x[0],x[1],at)}var np={mousedown:K,mousemove:dt,mouseup:St},zr="mousedown",kn="mousemove mouseup";function Bs(){this.evEl=zr,this.evWin=kn,this.pressed=!1,it.apply(this,arguments)}y(Bs,it,{handler:function(I){var V=np[I.type];V&K&&I.button===0&&(this.pressed=!0),V&dt&&I.which!==1&&(V=St),this.pressed&&(V&St&&(this.pressed=!1),this.callback(this.manager,V,{pointers:[I],changedPointers:[I],pointerType:Ht,srcEvent:I}))}});var XG={pointerdown:K,pointermove:dt,pointerup:St,pointercancel:At,pointerout:At},YG={2:bt,3:wt,4:Ht,5:Y},bC="pointerdown",wC="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(bC="MSPointerDown",wC="MSPointerMove MSPointerUp MSPointerCancel");function Ky(){this.evEl=bC,this.evWin=wC,it.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}y(Ky,it,{handler:function(I){var V=this.store,H=!1,et=I.type.toLowerCase().replace("ms",""),yt=XG[et],Yt=YG[I.pointerType]||I.pointerType,sr=Yt==bt,pr=k(V,I.pointerId,"pointerId");yt&K&&(I.button===0||sr)?pr<0&&(V.push(I),pr=V.length-1):yt&(St|At)&&(H=!0),!(pr<0)&&(V[pr]=I,this.callback(this.manager,yt,{pointers:V,changedPointers:[I],pointerType:Yt,srcEvent:I}),H&&V.splice(pr,1))}});var qG={touchstart:K,touchmove:dt,touchend:St,touchcancel:At},ZG="touchstart",KG="touchstart touchmove touchend touchcancel";function SC(){this.evTarget=ZG,this.evWin=KG,this.started=!1,it.apply(this,arguments)}y(SC,it,{handler:function(I){var V=qG[I.type];if(V===K&&(this.started=!0),!!this.started){var H=JG.call(this,I,V);V&(St|At)&&H[0].length-H[1].length===0&&(this.started=!1),this.callback(this.manager,V,{pointers:H[0],changedPointers:H[1],pointerType:bt,srcEvent:I})}}});function JG(x,I){var V=O(x.touches),H=O(x.changedTouches);return I&(St|At)&&(V=F(V.concat(H),"identifier",!0)),[V,H]}var QG={touchstart:K,touchmove:dt,touchend:St,touchcancel:At},tj="touchstart touchmove touchend touchcancel";function ip(){this.evTarget=tj,this.targetIds={},it.apply(this,arguments)}y(ip,it,{handler:function(I){var V=QG[I.type],H=ej.call(this,I,V);!H||this.callback(this.manager,V,{pointers:H[0],changedPointers:H[1],pointerType:bt,srcEvent:I})}});function ej(x,I){var V=O(x.touches),H=this.targetIds;if(I&(K|dt)&&V.length===1)return H[V[0].identifier]=!0,[V,V];var et,yt,Yt=O(x.changedTouches),sr=[],pr=this.target;if(yt=V.filter(function(Vr){return C(Vr.target,pr)}),I===K)for(et=0;et<yt.length;)H[yt[et].identifier]=!0,et++;for(et=0;et<Yt.length;)H[Yt[et].identifier]&&sr.push(Yt[et]),I&(St|At)&&delete H[Yt[et].identifier],et++;if(!!sr.length)return[F(yt.concat(sr),"identifier",!0),sr]}var rj=2500,TC=25;function Jy(){it.apply(this,arguments);var x=_(this.handler,this);this.touch=new ip(this.manager,x),this.mouse=new Bs(this.manager,x),this.primaryTouch=null,this.lastTouches=[]}y(Jy,it,{handler:function(I,V,H){var et=H.pointerType==bt,yt=H.pointerType==Ht;if(!(yt&&H.sourceCapabilities&&H.sourceCapabilities.firesTouchEvents)){if(et)nj.call(this,V,H);else if(yt&&ij.call(this,H))return;this.callback(I,V,H)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function nj(x,I){x&K?(this.primaryTouch=I.changedPointers[0].identifier,PC.call(this,I)):x&(St|At)&&PC.call(this,I)}function PC(x){var I=x.changedPointers[0];if(I.identifier===this.primaryTouch){var V={x:I.clientX,y:I.clientY};this.lastTouches.push(V);var H=this.lastTouches,et=function(){var yt=H.indexOf(V);yt>-1&&H.splice(yt,1)};setTimeout(et,rj)}}function ij(x){for(var I=x.srcEvent.clientX,V=x.srcEvent.clientY,H=0;H<this.lastTouches.length;H++){var et=this.lastTouches[H],yt=Math.abs(I-et.x),Yt=Math.abs(V-et.y);if(yt<=TC&&Yt<=TC)return!0}return!1}var EC=z(a.style,"touchAction"),AC=EC!==i,CC="compute",MC="auto",Qy="manipulation",$s="none",$f="pan-x",zf="pan-y",op=aj();function t_(x,I){this.manager=x,this.set(I)}t_.prototype={set:function(x){x==CC&&(x=this.compute()),AC&&this.manager.element.style&&op[x]&&(this.manager.element.style[EC]=x),this.actions=x.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var x=[];return d(this.manager.recognizers,function(I){b(I.options.enable,[I])&&(x=x.concat(I.getTouchAction()))}),oj(x.join(" "))},preventDefaults:function(x){var I=x.srcEvent,V=x.offsetDirection;if(this.manager.session.prevented){I.preventDefault();return}var H=this.actions,et=A(H,$s)&&!op[$s],yt=A(H,zf)&&!op[zf],Yt=A(H,$f)&&!op[$f];if(et){var sr=x.pointers.length===1,pr=x.distance<2,Vr=x.deltaTime<250;if(sr&&pr&&Vr)return}if(!(Yt&&yt)&&(et||yt&&V&J||Yt&&V&Q))return this.preventSrc(I)},preventSrc:function(x){this.manager.session.prevented=!0,x.preventDefault()}};function oj(x){if(A(x,$s))return $s;var I=A(x,$f),V=A(x,zf);return I&&V?$s:I||V?I?$f:zf:A(x,Qy)?Qy:MC}function aj(){if(!AC)return!1;var x={},I=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(V){x[V]=I?t.CSS.supports("touch-action",V):!0}),x}var ap=1,xn=2,Tu=4,Ea=8,Io=Ea,Vf=16,Ui=32;function Oo(x){this.options=v({},this.defaults,x||{}),this.id=j(),this.manager=null,this.options.enable=T(this.options.enable,!0),this.state=ap,this.simultaneous={},this.requireFail=[]}Oo.prototype={defaults:{},set:function(x){return v(this.options,x),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(x){if(h(x,"recognizeWith",this))return this;var I=this.simultaneous;return x=sp(x,this),I[x.id]||(I[x.id]=x,x.recognizeWith(this)),this},dropRecognizeWith:function(x){return h(x,"dropRecognizeWith",this)?this:(x=sp(x,this),delete this.simultaneous[x.id],this)},requireFailure:function(x){if(h(x,"requireFailure",this))return this;var I=this.requireFail;return x=sp(x,this),k(I,x)===-1&&(I.push(x),x.requireFailure(this)),this},dropRequireFailure:function(x){if(h(x,"dropRequireFailure",this))return this;x=sp(x,this);var I=k(this.requireFail,x);return I>-1&&this.requireFail.splice(I,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(x){return!!this.simultaneous[x.id]},emit:function(x){var I=this,V=this.state;function H(et){I.manager.emit(et,x)}V<Ea&&H(I.options.event+kC(V)),H(I.options.event),x.additionalEvent&&H(x.additionalEvent),V>=Ea&&H(I.options.event+kC(V))},tryEmit:function(x){if(this.canEmit())return this.emit(x);this.state=Ui},canEmit:function(){for(var x=0;x<this.requireFail.length;){if(!(this.requireFail[x].state&(Ui|ap)))return!1;x++}return!0},recognize:function(x){var I=v({},x);if(!b(this.options.enable,[this,I])){this.reset(),this.state=Ui;return}this.state&(Io|Vf|Ui)&&(this.state=ap),this.state=this.process(I),this.state&(xn|Tu|Ea|Vf)&&this.tryEmit(I)},process:function(x){},getTouchAction:function(){},reset:function(){}};function kC(x){return x&Vf?"cancel":x&Ea?"end":x&Tu?"move":x&xn?"start":""}function xC(x){return x==X?"down":x==G?"up":x==ct?"left":x==B?"right":""}function sp(x,I){var V=I.manager;return V?V.get(x):x}function ni(){Oo.apply(this,arguments)}y(ni,Oo,{defaults:{pointers:1},attrTest:function(x){var I=this.options.pointers;return I===0||x.pointers.length===I},process:function(x){var I=this.state,V=x.eventType,H=I&(xn|Tu),et=this.attrTest(x);return H&&(V&At||!et)?I|Vf:H||et?V&St?I|Ea:I&xn?I|Tu:xn:Ui}});function lp(){ni.apply(this,arguments),this.pX=null,this.pY=null}y(lp,ni,{defaults:{event:"pan",threshold:10,pointers:1,direction:lt},getTouchAction:function(){var x=this.options.direction,I=[];return x&J&&I.push(zf),x&Q&&I.push($f),I},directionTest:function(x){var I=this.options,V=!0,H=x.distance,et=x.direction,yt=x.deltaX,Yt=x.deltaY;return et&I.direction||(I.direction&J?(et=yt===0?st:yt<0?ct:B,V=yt!=this.pX,H=Math.abs(x.deltaX)):(et=Yt===0?st:Yt<0?G:X,V=Yt!=this.pY,H=Math.abs(x.deltaY))),x.direction=et,V&&H>I.threshold&&et&I.direction},attrTest:function(x){return ni.prototype.attrTest.call(this,x)&&(this.state&xn||!(this.state&xn)&&this.directionTest(x))},emit:function(x){this.pX=x.deltaX,this.pY=x.deltaY;var I=xC(x.direction);I&&(x.additionalEvent=this.options.event+I),this._super.emit.call(this,x)}});function e_(){ni.apply(this,arguments)}y(e_,ni,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[$s]},attrTest:function(x){return this._super.attrTest.call(this,x)&&(Math.abs(x.scale-1)>this.options.threshold||this.state&xn)},emit:function(x){if(x.scale!==1){var I=x.scale<1?"in":"out";x.additionalEvent=this.options.event+I}this._super.emit.call(this,x)}});function r_(){Oo.apply(this,arguments),this._timer=null,this._input=null}y(r_,Oo,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[MC]},process:function(x){var I=this.options,V=x.pointers.length===I.pointers,H=x.distance<I.threshold,et=x.deltaTime>I.time;if(this._input=x,!H||!V||x.eventType&(St|At)&&!et)this.reset();else if(x.eventType&K)this.reset(),this._timer=f(function(){this.state=Io,this.tryEmit()},I.time,this);else if(x.eventType&St)return Io;return Ui},reset:function(){clearTimeout(this._timer)},emit:function(x){this.state===Io&&(x&&x.eventType&St?this.manager.emit(this.options.event+"up",x):(this._input.timeStamp=c(),this.manager.emit(this.options.event,this._input)))}});function n_(){ni.apply(this,arguments)}y(n_,ni,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[$s]},attrTest:function(x){return this._super.attrTest.call(this,x)&&(Math.abs(x.rotation)>this.options.threshold||this.state&xn)}});function i_(){ni.apply(this,arguments)}y(i_,ni,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:J|Q,pointers:1},getTouchAction:function(){return lp.prototype.getTouchAction.call(this)},attrTest:function(x){var I=this.options.direction,V;return I&(J|Q)?V=x.overallVelocity:I&J?V=x.overallVelocityX:I&Q&&(V=x.overallVelocityY),this._super.attrTest.call(this,x)&&I&x.offsetDirection&&x.distance>this.options.threshold&&x.maxPointers==this.options.pointers&&u(V)>this.options.velocity&&x.eventType&St},emit:function(x){var I=xC(x.offsetDirection);I&&this.manager.emit(this.options.event+I,x),this.manager.emit(this.options.event,x)}});function up(){Oo.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}y(up,Oo,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Qy]},process:function(x){var I=this.options,V=x.pointers.length===I.pointers,H=x.distance<I.threshold,et=x.deltaTime<I.time;if(this.reset(),x.eventType&K&&this.count===0)return this.failTimeout();if(H&&et&&V){if(x.eventType!=St)return this.failTimeout();var yt=this.pTime?x.timeStamp-this.pTime<I.interval:!0,Yt=!this.pCenter||Pr(this.pCenter,x.center)<I.posThreshold;this.pTime=x.timeStamp,this.pCenter=x.center,!Yt||!yt?this.count=1:this.count+=1,this._input=x;var sr=this.count%I.taps;if(sr===0)return this.hasRequireFailures()?(this._timer=f(function(){this.state=Io,this.tryEmit()},I.interval,this),xn):Io}return Ui},failTimeout:function(){return this._timer=f(function(){this.state=Ui},this.options.interval,this),Ui},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Io&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Ro(x,I){return I=I||{},I.recognizers=T(I.recognizers,Ro.defaults.preset),new o_(x,I)}Ro.VERSION="2.0.7",Ro.defaults={domEvents:!1,touchAction:CC,enable:!0,inputTarget:null,inputClass:null,preset:[[n_,{enable:!1}],[e_,{enable:!1},["rotate"]],[i_,{direction:J}],[lp,{direction:J},["swipe"]],[up],[up,{event:"doubletap",taps:2},["tap"]],[r_]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var sj=1,LC=2;function o_(x,I){this.options=v({},Ro.defaults,I||{}),this.options.inputTarget=this.options.inputTarget||x,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=x,this.input=rt(this),this.touchAction=new t_(this,this.options.touchAction),IC(this,!0),d(this.options.recognizers,function(V){var H=this.add(new V[0](V[1]));V[2]&&H.recognizeWith(V[2]),V[3]&&H.requireFailure(V[3])},this)}o_.prototype={set:function(x){return v(this.options,x),x.touchAction&&this.touchAction.update(),x.inputTarget&&(this.input.destroy(),this.input.target=x.inputTarget,this.input.init()),this},stop:function(x){this.session.stopped=x?LC:sj},recognize:function(x){var I=this.session;if(!I.stopped){this.touchAction.preventDefaults(x);var V,H=this.recognizers,et=I.curRecognizer;(!et||et&&et.state&Io)&&(et=I.curRecognizer=null);for(var yt=0;yt<H.length;)V=H[yt],I.stopped!==LC&&(!et||V==et||V.canRecognizeWith(et))?V.recognize(x):V.reset(),!et&&V.state&(xn|Tu|Ea)&&(et=I.curRecognizer=V),yt++}},get:function(x){if(x instanceof Oo)return x;for(var I=this.recognizers,V=0;V<I.length;V++)if(I[V].options.event==x)return I[V];return null},add:function(x){if(h(x,"add",this))return this;var I=this.get(x.options.event);return I&&this.remove(I),this.recognizers.push(x),x.manager=this,this.touchAction.update(),x},remove:function(x){if(h(x,"remove",this))return this;if(x=this.get(x),x){var I=this.recognizers,V=k(I,x);V!==-1&&(I.splice(V,1),this.touchAction.update())}return this},on:function(x,I){if(x!==i&&I!==i){var V=this.handlers;return d(M(x),function(H){V[H]=V[H]||[],V[H].push(I)}),this}},off:function(x,I){if(x!==i){var V=this.handlers;return d(M(x),function(H){I?V[H]&&V[H].splice(k(V[H],I),1):delete V[H]}),this}},emit:function(x,I){this.options.domEvents&&lj(x,I);var V=this.handlers[x]&&this.handlers[x].slice();if(!(!V||!V.length)){I.type=x,I.preventDefault=function(){I.srcEvent.preventDefault()};for(var H=0;H<V.length;)V[H](I),H++}},destroy:function(){this.element&&IC(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function IC(x,I){var V=x.element;if(!!V.style){var H;d(x.options.cssProps,function(et,yt){H=z(V.style,yt),I?(x.oldCssProps[H]=V.style[H],V.style[H]=et):V.style[H]=x.oldCssProps[H]||""}),I||(x.oldCssProps={})}}function lj(x,I){var V=r.createEvent("Event");V.initEvent(x,!0,!0),V.gesture=I,I.target.dispatchEvent(V)}v(Ro,{INPUT_START:K,INPUT_MOVE:dt,INPUT_END:St,INPUT_CANCEL:At,STATE_POSSIBLE:ap,STATE_BEGAN:xn,STATE_CHANGED:Tu,STATE_ENDED:Ea,STATE_RECOGNIZED:Io,STATE_CANCELLED:Vf,STATE_FAILED:Ui,DIRECTION_NONE:st,DIRECTION_LEFT:ct,DIRECTION_RIGHT:B,DIRECTION_UP:G,DIRECTION_DOWN:X,DIRECTION_HORIZONTAL:J,DIRECTION_VERTICAL:Q,DIRECTION_ALL:lt,Manager:o_,Input:it,TouchAction:t_,TouchInput:ip,MouseInput:Bs,PointerEventInput:Ky,TouchMouseInput:Jy,SingleTouchInput:SC,Recognizer:Oo,AttrRecognizer:ni,Tap:up,Pan:lp,Swipe:i_,Pinch:e_,Rotate:n_,Press:r_,on:S,off:P,each:d,merge:m,extend:g,assign:v,inherit:y,bindFn:_,prefixed:z});var uj=typeof t<"u"?t:typeof self<"u"?self:{};uj.Hammer=Ro,typeof i=="function"&&i.amd?i(function(){return Ro}):e.exports?e.exports=Ro:t[n]=Ro})(window,document,"Hammer")})(Sf);const Abt=Sf.exports,Zi=cj({__proto__:null,default:Abt},[Sf.exports]),tV=1,eV=2,J3=4,Cbt={mousedown:tV,mousemove:eV,mouseup:J3};function Mbt(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return!0;return!1}function kbt(e){const t=e.prototype.handler;e.prototype.handler=function(n){const i=this.store;n.button>0&&n.type==="pointerdown"&&(Mbt(i,o=>o.pointerId===n.pointerId)||i.push(n)),t.call(this,n)}}function xbt(e){e.prototype.handler=function(r){let n=Cbt[r.type];n&tV&&r.button>=0&&(this.pressed=!0),n&eV&&r.which===0&&(n=J3),this.pressed&&(n&J3&&(this.pressed=!1),this.callback(this.manager,n,{pointers:[r],changedPointers:[r],pointerType:"mouse",srcEvent:r}))}}kbt(Sf.exports.PointerEventInput);xbt(Sf.exports.MouseInput);const Lbt=Sf.exports.Manager;class Ey{constructor(t,r,n){this.element=t,this.callback=r,this.options={enable:!0,...n}}}const Ibt=Zi?[[Zi.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Zi.Rotate,{enable:!1}],[Zi.Pinch,{enable:!1}],[Zi.Swipe,{enable:!1}],[Zi.Pan,{threshold:0,enable:!1}],[Zi.Press,{enable:!1}],[Zi.Tap,{event:"doubletap",taps:2,enable:!1}],[Zi.Tap,{event:"anytap",enable:!1}],[Zi.Tap,{enable:!1}]]:null,$L={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},Obt={doubletap:["tap"]},Rbt={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},cA={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},Dbt={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},zL={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},Nbt=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",yc=typeof window<"u"?window:global;let Q3=!1;try{const e={get passive(){return Q3=!0,!0}};yc.addEventListener("test",null,e),yc.removeEventListener("test",null)}catch{Q3=!1}const Fbt=Nbt.indexOf("firefox")!==-1,{WHEEL_EVENTS:Bbt}=cA,VL="wheel",UL=4.000244140625,$bt=40,zbt=.25;class Vbt extends Ey{constructor(t,r,n){super(t,r,n),this.handleEvent=i=>{if(!this.options.enable)return;let o=i.deltaY;yc.WheelEvent&&(Fbt&&i.deltaMode===yc.WheelEvent.DOM_DELTA_PIXEL&&(o/=yc.devicePixelRatio),i.deltaMode===yc.WheelEvent.DOM_DELTA_LINE&&(o*=$bt)),o!==0&&o%UL===0&&(o=Math.floor(o/UL)),i.shiftKey&&o&&(o=o*zbt),this.callback({type:VL,center:{x:i.clientX,y:i.clientY},delta:-o,srcEvent:i,pointerType:"mouse",target:i.target})},this.events=(this.options.events||[]).concat(Bbt),this.events.forEach(i=>t.addEventListener(i,this.handleEvent,Q3?{passive:!1}:!1))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,r){t===VL&&(this.options.enable=r)}}const{MOUSE_EVENTS:Ubt}=cA,GL="pointermove",jL="pointerover",WL="pointerout",HL="pointerenter",XL="pointerleave";class Gbt extends Ey{constructor(t,r,n){super(t,r,n),this.handleEvent=o=>{this.handleOverEvent(o),this.handleOutEvent(o),this.handleEnterEvent(o),this.handleLeaveEvent(o),this.handleMoveEvent(o)},this.pressed=!1;const{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,this.events=(this.options.events||[]).concat(Ubt),this.events.forEach(o=>t.addEventListener(o,this.handleEvent))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,r){t===GL&&(this.enableMoveEvent=r),t===jL&&(this.enableOverEvent=r),t===WL&&(this.enableOutEvent=r),t===HL&&(this.enableEnterEvent=r),t===XL&&(this.enableLeaveEvent=r)}handleOverEvent(t){this.enableOverEvent&&t.type==="mouseover"&&this._emit(jL,t)}handleOutEvent(t){this.enableOutEvent&&t.type==="mouseout"&&this._emit(WL,t)}handleEnterEvent(t){this.enableEnterEvent&&t.type==="mouseenter"&&this._emit(HL,t)}handleLeaveEvent(t){this.enableLeaveEvent&&t.type==="mouseleave"&&this._emit(XL,t)}handleMoveEvent(t){if(this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":t.which===0&&(this.pressed=!1),this.pressed||this._emit(GL,t);break;case"mouseup":this.pressed=!1;break}}_emit(t,r){this.callback({type:t,center:{x:r.clientX,y:r.clientY},srcEvent:r,pointerType:"mouse",target:r.target})}}const{KEY_EVENTS:jbt}=cA,YL="keydown",qL="keyup";class Wbt extends Ey{constructor(t,r,n){super(t,r,n),this.handleEvent=i=>{const o=i.target||i.srcElement;o.tagName==="INPUT"&&o.type==="text"||o.tagName==="TEXTAREA"||(this.enableDownEvent&&i.type==="keydown"&&this.callback({type:YL,srcEvent:i,key:i.key,target:i.target}),this.enableUpEvent&&i.type==="keyup"&&this.callback({type:qL,srcEvent:i,key:i.key,target:i.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(jbt),t.tabIndex=this.options.tabIndex||0,t.style.outline="none",this.events.forEach(i=>t.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,r){t===YL&&(this.enableDownEvent=r),t===qL&&(this.enableUpEvent=r)}}const ZL="contextmenu";class Hbt extends Ey{constructor(t,r,n){super(t,r,n),this.handleEvent=i=>{!this.options.enable||this.callback({type:ZL,center:{x:i.clientX,y:i.clientY},srcEvent:i,pointerType:"mouse",target:i.target})},t.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(t,r){t===ZL&&(this.options.enable=r)}}const tT=1,s1=2,eT=4,Xbt={pointerdown:tT,pointermove:s1,pointerup:eT,mousedown:tT,mousemove:s1,mouseup:eT},Ybt=1,qbt=2,Zbt=3,Kbt=0,Jbt=1,Qbt=2,twt=1,ewt=2,rwt=4;function nwt(e){const t=Xbt[e.srcEvent.type];if(!t)return null;const{buttons:r,button:n,which:i}=e.srcEvent;let o=!1,a=!1,s=!1;return t===eT||t===s1&&!Number.isFinite(r)?(o=i===Ybt,a=i===qbt,s=i===Zbt):t===s1?(o=Boolean(r&twt),a=Boolean(r&rwt),s=Boolean(r&ewt)):t===tT&&(o=n===Kbt,a=n===Jbt,s=n===Qbt),{leftButton:o,middleButton:a,rightButton:s}}function iwt(e,t){const r=e.center;if(!r)return null;const n=t.getBoundingClientRect(),i=n.width/t.offsetWidth||1,o=n.height/t.offsetHeight||1,a={x:(r.x-n.left-t.clientLeft)/i,y:(r.y-n.top-t.clientTop)/o};return{center:r,offsetCenter:a}}const Sb={srcElement:"root",priority:0};class owt{constructor(t){this.handleEvent=r=>{if(this.isEmpty())return;const n=this._normalizeEvent(r);let i=r.srcEvent.target;for(;i&&i!==n.rootElement;){if(this._emit(n,i),n.handled)return;i=i.parentNode}this._emit(n,"root")},this.eventManager=t,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(t,r,n,i=!1,o=!1){const{handlers:a,handlersByElement:s}=this;let l=Sb;typeof n=="string"||n&&n.addEventListener?l={...Sb,srcElement:n}:n&&(l={...Sb,...n});let u=s.get(l.srcElement);u||(u=[],s.set(l.srcElement,u));const c={type:t,handler:r,srcElement:l.srcElement,priority:l.priority};i&&(c.once=!0),o&&(c.passive=!0),a.push(c),this._active=this._active||!c.passive;let f=u.length-1;for(;f>=0&&!(u[f].priority>=c.priority);)f--;u.splice(f+1,0,c)}remove(t,r){const{handlers:n,handlersByElement:i}=this;for(let o=n.length-1;o>=0;o--){const a=n[o];if(a.type===t&&a.handler===r){n.splice(o,1);const s=i.get(a.srcElement);s.splice(s.indexOf(a),1),s.length===0&&i.delete(a.srcElement)}}this._active=n.some(o=>!o.passive)}_emit(t,r){const n=this.handlersByElement.get(r);if(n){let i=!1;const o=()=>{t.handled=!0},a=()=>{t.handled=!0,i=!0},s=[];for(let l=0;l<n.length;l++){const{type:u,handler:c,once:f}=n[l];if(c({...t,type:u,stopPropagation:o,stopImmediatePropagation:a}),f&&s.push(n[l]),i)break}for(let l=0;l<s.length;l++){const{type:u,handler:c}=s[l];this.remove(u,c)}}}_normalizeEvent(t){const r=this.eventManager.getElement();return{...t,...nwt(t),...iwt(t,r),preventDefault:()=>{t.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:r}}}const awt={events:null,recognizers:null,recognizerOptions:{},Manager:Lbt,touchAction:"none",tabIndex:0};class swt{constructor(t=null,r){this._onBasicInput=i=>{const{srcEvent:o}=i,a=Rbt[o.type];a&&this.manager.emit(a,i)},this._onOtherEvent=i=>{this.manager.emit(i.type,i)},this.options={...awt,...r},this.events=new Map,this.setElement(t);const{events:n}=this.options;n&&this.on(n)}getElement(){return this.element}setElement(t){if(this.element&&this.destroy(),this.element=t,!t)return;const{options:r}=this,n=r.Manager;this.manager=new n(t,{touchAction:r.touchAction,recognizers:r.recognizers||Ibt}).on("hammer.input",this._onBasicInput),r.recognizers||Object.keys($L).forEach(i=>{const o=this.manager.get(i);o&&$L[i].forEach(a=>{o.recognizeWith(a)})});for(const i in r.recognizerOptions){const o=this.manager.get(i);if(o){const a=r.recognizerOptions[i];delete a.enable,o.set(a)}}this.wheelInput=new Vbt(t,this._onOtherEvent,{enable:!1}),this.moveInput=new Gbt(t,this._onOtherEvent,{enable:!1}),this.keyInput=new Wbt(t,this._onOtherEvent,{enable:!1,tabIndex:r.tabIndex}),this.contextmenuInput=new Hbt(t,this._onOtherEvent,{enable:!1});for(const[i,o]of this.events)o.isEmpty()||(this._toggleRecognizer(o.recognizerName,!0),this.manager.on(i,o.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(t,r,n){this._addEventHandler(t,r,n,!1)}once(t,r,n){this._addEventHandler(t,r,n,!0)}watch(t,r,n){this._addEventHandler(t,r,n,!1,!0)}off(t,r){this._removeEventHandler(t,r)}_toggleRecognizer(t,r){const{manager:n}=this;if(!n)return;const i=n.get(t);if(i&&i.options.enable!==r){i.set({enable:r});const o=Obt[t];o&&!this.options.recognizers&&o.forEach(a=>{const s=n.get(a);r?(s.requireFailure(t),i.dropRequireFailure(a)):s.dropRequireFailure(t)})}this.wheelInput.enableEventType(t,r),this.moveInput.enableEventType(t,r),this.keyInput.enableEventType(t,r),this.contextmenuInput.enableEventType(t,r)}_addEventHandler(t,r,n,i,o){if(typeof t!="string"){n=r;for(const c in t)this._addEventHandler(c,t[c],n,i,o);return}const{manager:a,events:s}=this,l=zL[t]||t;let u=s.get(l);u||(u=new owt(this),s.set(l,u),u.recognizerName=Dbt[l]||l,a&&a.on(l,u.handleEvent)),u.add(t,r,n,i,o),u.isEmpty()||this._toggleRecognizer(u.recognizerName,!0)}_removeEventHandler(t,r){if(typeof t!="string"){for(const a in t)this._removeEventHandler(a,t[a]);return}const{events:n}=this,i=zL[t]||t,o=n.get(i);if(!!o&&(o.remove(t,r),o.isEmpty())){const{recognizerName:a}=o;let s=!1;for(const l of n.values())if(l.recognizerName===a&&!l.isEmpty()){s=!0;break}s||this._toggleRecognizer(a,!1)}}}function dl(){}const lwt=({isDragging:e})=>e?"grabbing":"grab",rV={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:dl,onResize:dl,onViewStateChange:dl,onInteractionStateChange:dl,onBeforeRender:dl,onAfterRender:dl,onLoad:dl,onError:e=>Wt.error(e.message)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:lwt,getTooltip:null,debug:!1,drawPickingColors:!1};class fA{constructor(t){E(this,"props",void 0),E(this,"width",0),E(this,"height",0),E(this,"userData",{}),E(this,"canvas",null),E(this,"viewManager",null),E(this,"layerManager",null),E(this,"effectManager",null),E(this,"deckRenderer",null),E(this,"deckPicker",null),E(this,"eventManager",null),E(this,"tooltip",null),E(this,"metrics",void 0),E(this,"animationLoop",void 0),E(this,"stats",void 0),E(this,"viewState",void 0),E(this,"cursorState",void 0),E(this,"_needsRedraw",void 0),E(this,"_pickRequest",void 0),E(this,"_lastPointerDownInfo",null),E(this,"_metricsCounter",void 0),E(this,"_onPointerMove",r=>{const{_pickRequest:n}=this;if(r.type==="pointerleave")n.x=-1,n.y=-1,n.radius=0;else{if(r.leftButton||r.rightButton)return;{const i=r.offsetCenter;if(!i)return;n.x=i.x,n.y=i.y,n.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:n.x,y:n.y}),n.event=r}),E(this,"_onEvent",r=>{const n=EL[r.type],i=r.offsetCenter;if(!n||!i||!this.layerManager)return;const o=this.layerManager.getLayers(),a=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:o,viewports:this.getViewports(i)},this._lastPointerDownInfo),{layer:s}=a,l=s&&(s[n.handler]||s.props[n.handler]),u=this.props[n.handler];let c=!1;l&&(c=l.call(s,a,r)),!c&&u&&u(a,r)}),E(this,"_onPointerDown",r=>{const n=r.offsetCenter,i=this._pick("pickObject","pickObject Time",{x:n.x,y:n.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=i.result[0]||i.emptyInfo}),this.props={...rV,...t},t=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},t.viewState&&t.initialViewState&&Wt.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),T$()==="IE"&&Wt.warn("IE 11 is not supported")(),this.viewState=t.initialViewState,t.gl||typeof document<"u"&&(this.canvas=this._createCanvas(t)),this.animationLoop=this._createAnimationLoop(t),this.stats=new gy({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(t),t._typedArrayManagerProps&&Kc.setOptions(t._typedArrayManagerProps),this.animationLoop.start()}finalize(){var t,r,n,i,o,a,s;if(this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,(t=this.layerManager)===null||t===void 0||t.finalize(),this.layerManager=null,(r=this.viewManager)===null||r===void 0||r.finalize(),this.viewManager=null,(n=this.effectManager)===null||n===void 0||n.finalize(),this.effectManager=null,(i=this.deckRenderer)===null||i===void 0||i.finalize(),this.deckRenderer=null,(o=this.deckPicker)===null||o===void 0||o.finalize(),this.deckPicker=null,(a=this.eventManager)===null||a===void 0||a.destroy(),this.eventManager=null,(s=this.tooltip)===null||s===void 0||s.remove(),this.tooltip=null,!this.props.canvas&&!this.props.gl&&this.canvas){var l;(l=this.canvas.parentElement)===null||l===void 0||l.removeChild(this.canvas),this.canvas=null}}setProps(t){this.stats.get("setProps Time").timeStart(),"onLayerHover"in t&&Wt.removed("onLayerHover","onHover")(),"onLayerClick"in t&&Wt.removed("onLayerClick","onClick")(),t.initialViewState&&!wf(this.props.initialViewState,t.initialViewState)&&(this.viewState=t.initialViewState),Object.assign(this.props,t),this._setCanvasSize(this.props);const r=Object.create(this.props);Object.assign(r,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(r),this.layerManager&&(this.viewManager.setProps(r),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(r),this.effectManager.setProps(r),this.deckRenderer.setProps(r),this.deckPicker.setProps(r)),this.stats.get("setProps Time").timeEnd()}needsRedraw(t={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let r=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);const n=this.viewManager.needsRedraw(t),i=this.layerManager.needsRedraw(t),o=this.effectManager.needsRedraw(t),a=this.deckRenderer.needsRedraw(t);return r=r||n||i||o||a,r}redraw(t){if(!this.layerManager)return;let r=this.needsRedraw({clearRedrawFlags:!0});r=t||r,r&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(r):this._drawLayers(r))}get isInitialized(){return this.viewManager!==null}getViews(){return ur(this.viewManager),this.viewManager.views}getViewports(t){return ur(this.viewManager),this.viewManager.getViewports(t)}pickObject(t){const r=this._pick("pickObject","pickObject Time",t).result;return r.length?r[0]:null}pickMultipleObjects(t){return t.depth=t.depth||10,this._pick("pickObject","pickMultipleObjects Time",t).result}pickObjects(t){return this._pick("pickObjects","pickObjects Time",t)}_addResources(t,r=!1){for(const n in t)this.layerManager.resourceManager.add({resourceId:n,data:t[n],forceUpdate:r})}_removeResources(t){for(const r of t)this.layerManager.resourceManager.remove(r)}_pick(t,r,n){ur(this.deckPicker);const{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(r).timeStart();const o=this.deckPicker[t]({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...n});return i.get(r).timeEnd(),o}_createCanvas(t){let r=t.canvas;return typeof r=="string"&&(r=document.getElementById(r),ur(r)),r||(r=document.createElement("canvas"),r.id=t.id||"deckgl-overlay",(t.parent||document.body).appendChild(r)),Object.assign(r.style,t.style),r}_setCanvasSize(t){if(!this.canvas)return;const{width:r,height:n}=t;if(r||r===0){const o=Number.isFinite(r)?"".concat(r,"px"):r;this.canvas.style.width=o}if(n||n===0){var i;const o=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.position=((i=t.style)===null||i===void 0?void 0:i.position)||"absolute",this.canvas.style.height=o}}_updateCanvasSize(){const{canvas:t}=this;if(!t)return;const r=t.clientWidth||t.width,n=t.clientHeight||t.height;if(r!==this.width||n!==this.height){var i;this.width=r,this.height=n,(i=this.viewManager)===null||i===void 0||i.setProps({width:r,height:n}),this.props.onResize({width:r,height:n})}}_createAnimationLoop(t){const{width:r,height:n,gl:i,glOptions:o,debug:a,onError:s,onBeforeRender:l,onAfterRender:u,useDevicePixels:c}=t;return new Amt({width:r,height:n,useDevicePixels:c,autoResizeViewport:!1,gl:i,onCreateContext:f=>G$({...o,...f,canvas:this.canvas,debug:a,onContextLost:()=>this._onContextLost()}),onInitialize:f=>this._setGLContext(f.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:l,onAfterRender:u,onError:s})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let t=this.props.views||[new Zz({id:"default-view"})];return t=Array.isArray(t)?t:[t],t.length&&this.props.controller&&(t[0].props.controller=this.props.controller),t}_onContextLost(){const{onError:t}=this.props;this.animationLoop&&t&&t(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:t}=this;if(t.event){const{result:n,emptyInfo:i}=this._pick("pickObject","pickObject Time",t);this.cursorState.isHovering=n.length>0;let o=i,a=!1;for(const s of n){var r;o=s,a=((r=s.layer)===null||r===void 0?void 0:r.onHover(s,t.event))||a}if(!a&&this.props.onHover&&this.props.onHover(o,t.event),this.props.getTooltip&&this.tooltip){const s=this.props.getTooltip(o);this.tooltip.setTooltip(s,o.x,o.y)}t.event=null}}_updateCursor(){const t=this.props.parent||this.canvas;t&&(t.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(t){if(this.layerManager)return;this.canvas||(this.canvas=t.canvas,YE(t,{enable:!0,copyState:!0})),this.tooltip=new Ebt(this.canvas),fa(t,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(t);const r=new Oz;r.play(),this.animationLoop.attachTimeline(r),this.eventManager=new swt(this.props.parent||t.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const i in EL)this.eventManager.on(i,this._onEvent);this.viewManager=new U2t({timeline:r,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const n=this.viewManager.getViewports()[0];this.layerManager=new V2t(t,{deck:this,stats:this.stats,viewport:n,timeline:r}),this.effectManager=new hbt,this.deckRenderer=new mbt(t),this.deckPicker=new Tbt(t),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(t,r){const{gl:n}=this.layerManager.context;fa(n,this.props.parameters),this.props.onBeforeRender({gl:n}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:t,effects:this.effectManager.getEffects(),...r}),this.props.onAfterRender({gl:n})}_onRenderFrame(t){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),Wt.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(t){const r=this.props.onViewStateChange(t)||t.viewState;this.viewState&&(this.viewState={...this.viewState,[t.viewId]:r},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(t){this.cursorState.isDragging=t.isDragging||!1,this.props.onInteractionStateChange(t)}_getFrameStats(){const{stats:t}=this;t.get("frameRate").timeEnd(),t.get("frameRate").timeStart();const r=this.animationLoop.stats;t.get("GPU Time").addTime(r.get("GPU Time").lastTiming),t.get("CPU Time").addTime(r.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:t,stats:r}=this;t.fps=r.get("frameRate").getHz(),t.setPropsTime=r.get("setProps Time").time,t.updateAttributesTime=r.get("Update Attributes").time,t.framesRedrawn=r.get("Redraw Count").count,t.pickTime=r.get("pickObject Time").time+r.get("pickMultipleObjects Time").time+r.get("pickObjects Time").time,t.pickCount=r.get("Pick Count").count,t.gpuTime=r.get("GPU Time").time,t.cpuTime=r.get("CPU Time").time,t.gpuTimePerFrame=r.get("GPU Time").getAverageTime(),t.cpuTimePerFrame=r.get("CPU Time").getAverageTime();const n=kl.get("Memory Usage");t.bufferMemory=n.get("Buffer Memory").count,t.textureMemory=n.get("Texture Memory").count,t.renderbufferMemory=n.get("Renderbuffer Memory").count,t.gpuMemory=n.get("GPU Memory").count}}E(fA,"defaultProps",rV);E(fA,"VERSION",Opt.VERSION);class Tb{constructor(t,r){E(this,"opts",void 0),E(this,"source",void 0),this.opts=r,this.source=t}get value(){return this.source.value}getValue(){const t=this.source.getBuffer(),r=this.getAccessor();if(t)return[t,r];const{value:n}=this.source,{size:i}=r;let o=n;if(n&&n.length!==i){o=new Float32Array(i);const a=r.elementOffset||0;for(let s=0;s<i;++s)o[s]=n[a+s]}return o}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function uwt(e){switch(e){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}function Jg(e){return e.stride||e.size*e.bytesPerElement}function nV(e,t){t.offset&&Wt.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const r=Jg(e),n=t.vertexOffset!==void 0?t.vertexOffset:e.vertexOffset||0,i=t.elementOffset||0,o=n*r+i*e.bytesPerElement+(e.offset||0);return{...t,offset:o,stride:r}}function cwt(e,t){const r=nV(e,t);return{high:r,low:{...r,offset:r.offset+e.size*4}}}class fwt{constructor(t,r,n){E(this,"gl",void 0),E(this,"id",void 0),E(this,"size",void 0),E(this,"settings",void 0),E(this,"value",void 0),E(this,"doublePrecision",void 0),E(this,"_buffer",void 0),E(this,"state",void 0),this.gl=t,this.id=r.id||"",this.size=r.size||1;const i=r.logicalType||r.type,o=i===5130;let{defaultValue:a}=r;a=Number.isFinite(a)?[a]:a||new Array(this.size).fill(0);let s;o?s=5126:!i&&r.isIndexed?s=t&&ngt(t,Be.ELEMENT_INDEX_UINT32)?5125:5123:s=i||5126;let l=uwt(i||s||5126);this.doublePrecision=o,o&&r.fp64===!1&&(l=Float32Array),this.value=null,this.settings={...r,defaultType:l,defaultValue:a,logicalType:i,type:s,size:this.size,bytesPerElement:l.BYTES_PER_ELEMENT},this.state={...n,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:t,type:r}=this.settings;this._buffer=new Pe(this.gl,{id:this.id,target:t?34963:34962,accessor:{type:r}})}return this._buffer}get byteOffset(){const t=this.getAccessor();return t.vertexOffset?t.vertexOffset*Jg(t):0}get numInstances(){return this.state.numInstances}set numInstances(t){this.state.numInstances=t}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),Kc.release(this.state.allocatedValue)}getShaderAttributes(t,r){if(this.doublePrecision){const n={},i=this.value instanceof Float64Array,o=cwt(this.getAccessor(),r||{});return n[t]=new Tb(this,o.high),n["".concat(t,"64Low")]=i?new Tb(this,o.low):new Float32Array(this.size),n}if(r){const n=nV(this.getAccessor(),r);return{[t]:new Tb(this,n)}}return{[t]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let t=null;if(this.state.constant&&this.value){const r=Array.from(this.value);t=[r,r]}else{const{value:r,numInstances:n,size:i}=this,o=n*i;if(r&&o&&r.length>=o){const a=new Array(i).fill(1/0),s=new Array(i).fill(-1/0);for(let l=0;l<o;)for(let u=0;u<i;u++){const c=r[l++];c<a[u]&&(a[u]=c),c>s[u]&&(s[u]=c)}t=[a,s]}}return this.state.bounds=t,t}setData(t){const{state:r}=this;let n;ArrayBuffer.isView(t)?n={value:t}:t instanceof Pe?n={buffer:t}:n=t;const i={...this.settings,...n};if(r.bufferAccessor=i,r.bounds=null,n.constant){let o=n.value;if(o=this._normalizeValue(o,[],0),this.settings.normalized&&(o=this.normalizeConstant(o)),!(!r.constant||!this._areValuesEqual(o,this.value)))return!1;r.externalBuffer=null,r.constant=!0,this.value=o}else if(n.buffer){const o=n.buffer;r.externalBuffer=o,r.constant=!1,this.value=n.value||null;const a=n.value instanceof Float64Array;i.type=n.type||o.accessor.type,i.bytesPerElement=o.accessor.BYTES_PER_ELEMENT*(a?2:1),i.stride=Jg(i)}else if(n.value){this._checkExternalBuffer(n);let o=n.value;r.externalBuffer=null,r.constant=!1,this.value=o,i.bytesPerElement=o.BYTES_PER_ELEMENT,i.stride=Jg(i);const{buffer:a,byteOffset:s}=this;this.doublePrecision&&o instanceof Float64Array&&(o=bb(o,i));const l=o.byteLength+s+i.stride*2;a.byteLength<l&&a.reallocate(l),a.setAccessor(null),a.subData({data:o,offset:s}),i.type=n.type||a.accessor.type}return!0}updateSubBuffer(t={}){this.state.bounds=null;const r=this.value,{startOffset:n=0,endOffset:i}=t;this.buffer.subData({data:this.doublePrecision&&r instanceof Float64Array?bb(r,{size:this.size,startIndex:n,endIndex:i}):r.subarray(n,i),offset:n*r.BYTES_PER_ELEMENT+this.byteOffset})}allocate(t,r=!1){const{state:n}=this,i=n.allocatedValue,o=Kc.allocate(i,t+1,{size:this.size,type:this.settings.defaultType,copy:r});this.value=o;const{buffer:a,byteOffset:s}=this;return a.byteLength<o.byteLength+s&&(a.reallocate(o.byteLength+s),r&&i&&a.subData({data:i instanceof Float64Array?bb(i,this):i,offset:s})),n.allocatedValue=o,n.constant=!1,n.externalBuffer=null,n.bufferAccessor=this.settings,!0}_checkExternalBuffer(t){const{value:r}=t;if(!ArrayBuffer.isView(r))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const n=this.settings.defaultType;let i=!1;if(this.doublePrecision&&(i=r.BYTES_PER_ELEMENT<4),i)throw new Error("Attribute ".concat(this.id," does not support ").concat(r.constructor.name));!(r instanceof n)&&this.settings.normalized&&!("normalized"in t)&&Wt.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(t){switch(this.settings.type){case 5120:return new Float32Array(t).map(r=>(r+128)/255*2-1);case 5122:return new Float32Array(t).map(r=>(r+32768)/65535*2-1);case 5121:return new Float32Array(t).map(r=>r/255);case 5123:return new Float32Array(t).map(r=>r/65535);default:return t}}_normalizeValue(t,r,n){const{defaultValue:i,size:o}=this.settings;if(Number.isFinite(t))return r[n]=t,r;if(!t)return r[n]=i[0],r;switch(o){case 4:r[n+3]=Number.isFinite(t[3])?t[3]:i[3];case 3:r[n+2]=Number.isFinite(t[2])?t[2]:i[2];case 2:r[n+1]=Number.isFinite(t[1])?t[1]:i[1];case 1:r[n+0]=Number.isFinite(t[0])?t[0]:i[0];break;default:let a=o;for(;--a>=0;)r[n+a]=Number.isFinite(t[a])?t[a]:i[a]}return r}_areValuesEqual(t,r){if(!t||!r)return!1;const{size:n}=this;for(let i=0;i<n;i++)if(t[i]!==r[i])return!1;return!0}}const KL=[],JL=[];function Ay(e,t=0,r=1/0){let n=KL;const i={index:-1,data:e,target:[]};return e?typeof e[Symbol.iterator]=="function"?n=e:e.length>0&&(JL.length=e.length,n=JL):n=KL,(t>0||Number.isFinite(r))&&(n=(Array.isArray(n)?n:Array.from(n)).slice(t,r),i.index=t-1),{iterable:n,objectInfo:i}}function iV(e){return e&&e[Symbol.asyncIterator]}function oV(e,t){const{size:r,stride:n,offset:i,startIndices:o,nested:a}=t,s=e.BYTES_PER_ELEMENT,l=n?n/s:r,u=i?i/s:0,c=Math.floor((e.length-u)/l);return(f,{index:h,target:d})=>{if(!o){const m=h*l+u;for(let y=0;y<r;y++)d[y]=e[m+y];return d}const p=o[h],v=o[h+1]||c;let g;if(a){g=new Array(v-p);for(let m=p;m<v;m++){const y=m*l+u;d=new Array(r);for(let _=0;_<r;_++)d[_]=e[y+_];g[m-p]=d}}else if(l===r)g=e.subarray(p*r+u,v*r+u);else{g=new e.constructor((v-p)*r);let m=0;for(let y=p;y<v;y++){const _=y*l+u;for(let b=0;b<r;b++)g[m++]=e[_+b]}}return g}}const hwt=[],Qg=[[0,1/0]];function dwt(e,t){if(e===Qg||(t[0]<0&&(t[0]=0),t[0]>=t[1]))return e;const r=[],n=e.length;let i=0;for(let o=0;o<n;o++){const a=e[o];a[1]<t[0]?(r.push(a),i=o+1):a[0]>t[1]?r.push(a):t=[Math.min(a[0],t[0]),Math.max(a[1],t[1])]}return r.splice(i,0,t),r}function Pb(e){const{source:t,target:r,start:n=0,size:i,getData:o}=e,a=e.end||r.length,s=t.length,l=a-n;if(s>l){r.set(t.subarray(0,l),n);return}if(r.set(t,n),!o)return;let u=s;for(;u<l;){const c=o(u,t);for(let f=0;f<i;f++)r[n+u]=c[f]||0,u++}}function pwt({source:e,target:t,size:r,getData:n,sourceStartIndices:i,targetStartIndices:o}){if(!Array.isArray(o))return Pb({source:e,target:t,size:r,getData:n}),t;let a=0,s=0;const l=n&&((c,f)=>n(c+s,f)),u=Math.min(i.length,o.length);for(let c=1;c<u;c++){const f=i[c]*r,h=o[c]*r;Pb({source:e.subarray(a,f),target:t,start:s,end:h,size:r,getData:l}),a=f,s=h}return s<t.length&&Pb({source:[],target:t,start:s,size:r,getData:l}),t}const vwt={interpolation:{duration:0,easing:e=>e},spring:{stiffness:.05,damping:.5}};function aV(e,t){if(!e)return null;Number.isFinite(e)&&(e={type:"interpolation",duration:e});const r=e.type||"interpolation";return{...vwt[r],...t,...e,type:r}}function sV(e,t){const r=t.getBuffer();return r?[r,{divisor:0,size:t.size,normalized:t.settings.normalized}]:t.value}function lV(e){switch(e){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(e,'"'))}}function uV(e){e.push(e.shift())}function hA(e,t){const{doublePrecision:r,settings:n,value:i,size:o}=e,a=r&&i instanceof Float64Array?2:1;return(n.noAlloc?i.length:t*o)*a}function cV({buffer:e,numInstances:t,attribute:r,fromLength:n,fromStartIndices:i,getData:o=a=>a}){const a=r.doublePrecision&&r.value instanceof Float64Array?2:1,s=r.size*a,l=r.byteOffset,u=r.startIndices,c=i&&u,f=hA(r,t),h=r.isConstant;if(!c&&n>=f)return;const d=h?r.value:r.getBuffer().getData({srcByteOffset:l});if(r.settings.normalized&&!h){const m=o;o=(y,_)=>r.normalizeConstant(m(y,_))}const p=h?(m,y)=>o(d,y):(m,y)=>o(d.subarray(m,m+s),y),v=e.getData({length:n}),g=new Float32Array(f);pwt({source:v,target:g,sourceStartIndices:i,targetStartIndices:u,size:s,getData:p}),e.byteLength<g.byteLength+l&&e.reallocate(g.byteLength+l),e.subData({data:g,offset:l})}class dA extends fwt{constructor(t,r){super(t,r,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:Qg}),E(this,"constant",!1),this.settings.update=r.update||(r.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(t){this.state.startIndices=t}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:t=!1}={}){const r=this.state.needsRedraw;return this.state.needsRedraw=r&&!t,r}getUpdateTriggers(){const{accessor:t}=this.settings;return[this.id].concat(typeof t!="function"&&t||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(t){if(!t||!this.supportsTransition())return null;const{accessor:r}=this.settings,n=this.settings.transition,i=Array.isArray(r)?t[r.find(o=>t[o])]:t[r];return aV(i,n)}setNeedsUpdate(t=this.id,r){if(this.state.needsUpdate=this.state.needsUpdate||t,this.setNeedsRedraw(t),r){const{startRow:n=0,endRow:i=1/0}=r;this.state.updateRanges=dwt(this.state.updateRanges,[n,i])}else this.state.updateRanges=Qg}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=hwt}setNeedsRedraw(t=this.id){this.state.needsRedraw=this.state.needsRedraw||t}allocate(t){const{state:r,settings:n}=this;return n.noAlloc?!1:n.update?(super.allocate(t,r.updateRanges!==Qg),!0):!1}updateBuffer({numInstances:t,data:r,props:n,context:i}){if(!this.needsUpdate())return!1;const{state:{updateRanges:o},settings:{update:a,noAlloc:s}}=this;let l=!0;if(a){for(const[u,c]of o)a.call(i,this,{data:r,startRow:u,endRow:c,props:n,numInstances:t});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[u,c]of o){const f=Number.isFinite(u)?this.getVertexOffset(u):0,h=Number.isFinite(c)?this.getVertexOffset(c):s||!Number.isFinite(t)?this.value.length:t*this.size;super.updateSubBuffer({startOffset:f,endOffset:h})}this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(t){return t===void 0||typeof t=="function"?!1:(this.setData({constant:!0,value:t})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(t){const{state:r}=this;return t?(this.clearNeedsUpdate(),r.lastExternalBuffer===t||(r.lastExternalBuffer=t,this.setNeedsRedraw(),this.setData(t)),!0):(r.lastExternalBuffer=null,!1)}setBinaryValue(t,r=null){const{state:n,settings:i}=this;if(!t)return n.binaryValue=null,n.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(n.binaryValue===t)return this.clearNeedsUpdate(),!0;if(n.binaryValue=t,this.setNeedsRedraw(),i.transform||r!==this.startIndices){ArrayBuffer.isView(t)&&(t={value:t});const a=t;ur(ArrayBuffer.isView(a.value),"invalid ".concat(i.accessor));const s=Boolean(a.size)&&a.size!==this.size;return n.binaryAccessor=oV(a.value,{size:a.size||this.size,stride:a.stride,offset:a.offset,startIndices:r,nested:s}),!1}return this.clearNeedsUpdate(),this.setData(t),!0}getVertexOffset(t){const{startIndices:r}=this;return(r?r[t]:t)*this.size}getShaderAttributes(){const t=this.settings.shaderAttributes||{[this.id]:null},r={};for(const n in t)Object.assign(r,super.getShaderAttributes(n,t[n]));return r}_autoUpdater(t,{data:r,startRow:n,endRow:i,props:o,numInstances:a}){if(t.constant)return;const{settings:s,state:l,value:u,size:c,startIndices:f}=t,{accessor:h,transform:d}=s,p=l.binaryAccessor||(typeof h=="function"?h:o[h]);ur(typeof p=="function",'accessor "'.concat(h,'" is not a function'));let v=t.getVertexOffset(n);const{iterable:g,objectInfo:m}=Ay(r,n,i);for(const y of g){m.index++;let _=p(y,m);if(d&&(_=d.call(this,_)),f){const b=(m.index<f.length-1?f[m.index+1]:a)-f[m.index];if(_&&Array.isArray(_[0])){let T=v;for(const S of _)t._normalizeValue(S,u,T),T+=c}else _&&_.length>c?u.set(_,v):(t._normalizeValue(_,m.target,0),N2t({target:u,source:m.target,start:v,count:b}));v+=b*c}else t._normalizeValue(_,u,v),v+=c}}_validateAttributeUpdaters(){const{settings:t}=this;if(!(t.noAlloc||typeof t.update=="function"))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:t}=this,r=Math.min(4,this.size);if(t&&t.length>=r){let n=!0;switch(r){case 4:n=n&&Number.isFinite(t[3]);case 3:n=n&&Number.isFinite(t[2]);case 2:n=n&&Number.isFinite(t[1]);case 1:n=n&&Number.isFinite(t[0]);break;default:n=!1}if(!n)throw new Error("Illegal attribute generated for ".concat(this.id))}}}class gwt{constructor({gl:t,attribute:r,timeline:n}){E(this,"gl",void 0),E(this,"type","interpolation"),E(this,"attributeInTransition",void 0),E(this,"settings",void 0),E(this,"attribute",void 0),E(this,"transition",void 0),E(this,"currentStartIndices",void 0),E(this,"currentLength",void 0),E(this,"transform",void 0),E(this,"buffers",void 0),this.gl=t,this.transition=new H0(n),this.attribute=r,this.attributeInTransition=new dA(t,r.settings),this.currentStartIndices=r.startIndices,this.currentLength=0,this.transform=ywt(t,r);const i={byteLength:0,usage:35050};this.buffers=[new Pe(t,i),new Pe(t,i)]}get inProgress(){return this.transition.inProgress}start(t,r){if(t.duration<=0){this.transition.cancel();return}this.settings=t;const{gl:n,buffers:i,attribute:o}=this;uV(i);const a={numInstances:r,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const s of i)cV({buffer:s,...a});this.currentStartIndices=o.startIndices,this.currentLength=hA(o,r),this.attributeInTransition.setData({buffer:i[1],value:o.value}),this.transition.start(t),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aFrom:i[0],aTo:sV(n,o)},feedbackBuffers:{vCurrent:i[1]}})}update(){const t=this.transition.update();if(t){const{duration:r,easing:n}=this.settings,{time:i}=this.transition;let o=i/r;n&&(o=n(o)),this.transform.run({uniforms:{time:o}})}return t}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0}}const mwt=`
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
attribute ATTRIBUTE_TYPE aFrom;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`;function ywt(e,t){const r=lV(t.size);return new aA(e,{vs:mwt,defines:{ATTRIBUTE_TYPE:r},varyings:["vCurrent"]})}class _wt{constructor({gl:t,attribute:r,timeline:n}){E(this,"gl",void 0),E(this,"type","spring"),E(this,"attributeInTransition",void 0),E(this,"settings",void 0),E(this,"attribute",void 0),E(this,"transition",void 0),E(this,"currentStartIndices",void 0),E(this,"currentLength",void 0),E(this,"texture",void 0),E(this,"framebuffer",void 0),E(this,"transform",void 0),E(this,"buffers",void 0),this.gl=t,this.type="spring",this.transition=new H0(n),this.attribute=r,this.attributeInTransition=new dA(t,{...r.settings,normalized:!1}),this.currentStartIndices=r.startIndices,this.currentLength=0,this.texture=wwt(t),this.framebuffer=Swt(t,this.texture),this.transform=bwt(t,r,this.framebuffer);const i={byteLength:0,usage:35050};this.buffers=[new Pe(t,i),new Pe(t,i),new Pe(t,i)]}get inProgress(){return this.transition.inProgress}start(t,r){const{gl:n,buffers:i,attribute:o}=this,a={numInstances:r,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const s of i)cV({buffer:s,...a});this.settings=t,this.currentStartIndices=o.startIndices,this.currentLength=hA(o,r),this.attributeInTransition.setData({buffer:i[1],value:o.value}),this.transition.start({...t,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aTo:sV(n,o)}})}update(){const{buffers:t,transform:r,framebuffer:n,transition:i}=this;if(!i.update())return!1;const a=this.settings;return r.update({sourceBuffers:{aPrev:t[0],aCur:t[1]},feedbackBuffers:{vNext:t[2]}}),r.run({framebuffer:n,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:a.stiffness,damping:a.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),uV(t),this.attributeInTransition.setData({buffer:t[1],value:this.attribute.value}),by(n)[0]>0||i.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}function bwt(e,t,r){const n=lV(t.size);return new aA(e,{framebuffer:r,vs:`
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
attribute ATTRIBUTE_TYPE aPrev;
attribute ATTRIBUTE_TYPE aCur;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vNext;
varying float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs:`
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

varying float vIsTransitioningFlag;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  gl_FragColor = vec4(1.0);
}`,defines:{ATTRIBUTE_TYPE:n},varyings:["vNext"]})}function wwt(e){return new ln(e,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function Swt(e,t){return new nr(e,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{[36064]:t}})}const Twt={interpolation:gwt,spring:_wt};class Pwt{constructor(t,{id:r,timeline:n}){E(this,"id",void 0),E(this,"isSupported",void 0),E(this,"gl",void 0),E(this,"timeline",void 0),E(this,"transitions",void 0),E(this,"needsRedraw",void 0),E(this,"numInstances",void 0),this.id=r,this.gl=t,this.timeline=n,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=aA.isSupported(t)}finalize(){for(const t in this.transitions)this._removeTransition(t)}update({attributes:t,transitions:r,numInstances:n}){this.numInstances=n||1;for(const i in t){const o=t[i],a=o.getTransitionSetting(r);!a||this._updateAttribute(i,o,a)}for(const i in this.transitions){const o=t[i];(!o||!o.getTransitionSetting(r))&&this._removeTransition(i)}}hasAttribute(t){const r=this.transitions[t];return r&&r.inProgress}getAttributes(){const t={};for(const r in this.transitions){const n=this.transitions[r];n.inProgress&&(t[r]=n.attributeInTransition)}return t}run(){if(!this.isSupported||this.numInstances===0)return!1;for(const r in this.transitions)this.transitions[r].update()&&(this.needsRedraw=!0);const t=this.needsRedraw;return this.needsRedraw=!1,t}_removeTransition(t){this.transitions[t].cancel(),delete this.transitions[t]}_updateAttribute(t,r,n){const i=this.transitions[t];let o=!i||i.type!==n.type;if(o){if(!this.isSupported){Wt.warn("WebGL2 not supported by this browser. Transition for ".concat(t," is disabled."))();return}i&&this._removeTransition(t);const a=Twt[n.type];a?this.transitions[t]=new a({attribute:r,timeline:this.timeline,gl:this.gl}):(Wt.error("unsupported transition type '".concat(n.type,"'"))(),o=!1)}(o||r.needsRedraw())&&(this.needsRedraw=!0,this.transitions[t].start(n,this.numInstances))}}const QL="attributeManager.invalidate",Ewt="attributeManager.updateStart",Awt="attributeManager.updateEnd",Cwt="attribute.updateStart",Mwt="attribute.allocate",kwt="attribute.updateEnd";class xwt{constructor(t,{id:r="attribute-manager",stats:n,timeline:i}={}){E(this,"id",void 0),E(this,"gl",void 0),E(this,"attributes",void 0),E(this,"updateTriggers",void 0),E(this,"needsRedraw",void 0),E(this,"userData",void 0),E(this,"stats",void 0),E(this,"attributeTransitionManager",void 0),this.id=r,this.gl=t,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=n,this.attributeTransitionManager=new Pwt(t,{id:"".concat(r,"-transitions"),timeline:i}),Object.seal(this)}finalize(){for(const t in this.attributes)this.attributes[t].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(t={clearRedrawFlags:!1}){const r=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!t.clearRedrawFlags,r&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(t){this._add(t)}addInstanced(t){this._add(t,{instanced:1})}remove(t){for(const r of t)this.attributes[r]!==void 0&&(this.attributes[r].delete(),delete this.attributes[r])}invalidate(t,r){const n=this._invalidateTrigger(t,r);Lr(QL,this,t,n)}invalidateAll(t){for(const r in this.attributes)this.attributes[r].setNeedsUpdate(r,t);Lr(QL,this,"all")}update({data:t,numInstances:r,startIndices:n=null,transitions:i,props:o={},buffers:a={},context:s={}}){let l=!1;Lr(Ewt,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const u in this.attributes){const c=this.attributes[u],f=c.settings.accessor;c.startIndices=n,c.numInstances=r,o[u]&&Wt.removed("props.".concat(u),"data.attributes.".concat(u))(),c.setExternalBuffer(a[u])||c.setBinaryValue(typeof f=="string"?a[f]:void 0,t.startIndices)||typeof f=="string"&&!a[f]&&c.setConstantValue(o[f])||c.needsUpdate()&&(l=!0,this._updateAttribute({attribute:c,numInstances:r,data:t,props:o,context:s})),this.needsRedraw=this.needsRedraw||c.needsRedraw()}l&&Lr(Awt,this,r),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:r,transitions:i})}updateTransition(){const{attributeTransitionManager:t}=this,r=t.run();return this.needsRedraw=this.needsRedraw||r,r}getAttributes(){return this.attributes}getChangedAttributes(t={clearChangedFlags:!1}){const{attributes:r,attributeTransitionManager:n}=this,i={...n.getAttributes()};for(const o in r){const a=r[o];a.needsRedraw(t)&&!n.hasAttribute(o)&&(i[o]=a)}return i}getShaderAttributes(t,r={}){t||(t=this.getAttributes());const n={};for(const i in t)r[i]||Object.assign(n,t[i].getShaderAttributes());return n}_add(t,r={}){for(const n in t){const i=t[n];this.attributes[n]=this._createAttribute(n,i,r)}this._mapUpdateTriggersToAttributes()}_createAttribute(t,r,n){const i={...r,id:t,size:r.isIndexed&&1||r.size||1,divisor:n.instanced?1:r.divisor||0};return new dA(this.gl,i)}_mapUpdateTriggersToAttributes(){const t={};for(const r in this.attributes)this.attributes[r].getUpdateTriggers().forEach(i=>{t[i]||(t[i]=[]),t[i].push(r)});this.updateTriggers=t}_invalidateTrigger(t,r){const{attributes:n,updateTriggers:i}=this,o=i[t];return o&&o.forEach(a=>{const s=n[a];s&&s.setNeedsUpdate(s.id,r)}),o}_updateAttribute(t){const{attribute:r,numInstances:n}=t;if(Lr(Cwt,r),r.constant){r.setConstantValue(r.value);return}r.allocate(n)&&Lr(Mwt,r,n),r.updateBuffer(t)&&(this.needsRedraw=!0,Lr(kwt,r,n))}}class Lwt extends H0{get value(){return this._value}_onUpdate(){const{time:t,settings:{fromValue:r,toValue:n,duration:i,easing:o}}=this,a=o(t/i);this._value=zl(r,n,a)}}const tI=1e-5;function eI(e,t,r,n,i){const o=t-e,s=(r-t)*i,l=-o*n;return s+l+o+t}function Iwt(e,t,r,n,i){if(Array.isArray(r)){const o=[];for(let a=0;a<r.length;a++)o[a]=eI(e[a],t[a],r[a],n,i);return o}return eI(e,t,r,n,i)}function rI(e,t){if(Array.isArray(e)){let r=0;for(let n=0;n<e.length;n++){const i=e[n]-t[n];r+=i*i}return Math.sqrt(r)}return Math.abs(e-t)}class Owt extends H0{get value(){return this._currValue}_onUpdate(){const{fromValue:t,toValue:r,damping:n,stiffness:i}=this.settings,{_prevValue:o=t,_currValue:a=t}=this;let s=Iwt(o,a,r,n,i);const l=rI(s,r),u=rI(s,a);l<tI&&u<tI&&(s=r,this.end()),this._prevValue=a,this._currValue=s}}const Rwt={interpolation:Lwt,spring:Owt};class Dwt{constructor(t){this.transitions=new Map,this.timeline=t}get active(){return this.transitions.size>0}add(t,r,n,i){const{transitions:o}=this;if(o.has(t)){const l=o.get(t),{value:u=l.settings.fromValue}=l;r=u,this.remove(t)}if(i=aV(i),!i)return;const a=Rwt[i.type];if(!a){Wt.error("unsupported transition type '".concat(i.type,"'"))();return}const s=new a(this.timeline);s.start({...i,fromValue:r,toValue:n}),o.set(t,s)}remove(t){const{transitions:r}=this;r.has(t)&&(r.get(t).cancel(),r.delete(t))}update(){const t={};for(const[r,n]of this.transitions)n.update(),t[r]=n.value,n.inProgress||this.remove(r);return t}clear(){for(const t of this.transitions.keys())this.remove(t)}}function Nwt(e){const t=pA(e);for(const r in t){const n=t[r],{validate:i}=n;if(i&&!i(e[r],n))throw new Error("Invalid prop ".concat(r,": ").concat(e[r]))}}function Fwt(e,t){const r=fV({newProps:e,oldProps:t,propTypes:pA(e),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),n=$wt(e,t);let i=!1;return n||(i=zwt(e,t)),{dataChanged:n,propsChanged:r,updateTriggersChanged:i,extensionsChanged:Vwt(e,t),transitionsChanged:Bwt(e,t)}}function Bwt(e,t){if(!e.transitions)return!1;const r={},n=pA(e);let i=!1;for(const o in e.transitions){const a=n[o],s=a&&a.type;(s==="number"||s==="color"||s==="array")&&rT(e[o],t[o],a)&&(r[o]=!0,i=!0)}return i?r:!1}function fV({newProps:e,oldProps:t,ignoreProps:r={},propTypes:n={},triggerName:i="props"}){if(t===e)return!1;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return"".concat(i," changed shallowly");for(const o of Object.keys(e))if(!(o in r)){if(!(o in t))return"".concat(i,".").concat(o," added");const a=rT(e[o],t[o],n[o]);if(a)return"".concat(i,".").concat(o," ").concat(a)}for(const o of Object.keys(t))if(!(o in r)){if(!(o in e))return"".concat(i,".").concat(o," dropped");if(!Object.hasOwnProperty.call(e,o)){const a=rT(e[o],t[o],n[o]);if(a)return"".concat(i,".").concat(o," ").concat(a)}}return!1}function rT(e,t,r){let n=r&&r.equal;return n&&!n(e,t,r)||!n&&(n=e&&t&&e.equals,n&&!n.call(e,t))?"changed deeply":!n&&t!==e?"changed shallowly":null}function $wt(e,t){if(t===null)return"oldProps is null, initial diff";let r=!1;const{dataComparator:n,_dataDiff:i}=e;return n?n(e.data,t.data)||(r="Data comparator detected a change"):e.data!==t.data&&(r="A new data container was supplied"),r&&i&&(r=i(e.data,t.data)||r),r}function zwt(e,t){if(t===null)return{all:!0};if("all"in e.updateTriggers&&nI(e,t,"all"))return{all:!0};const r={};let n=!1;for(const i in e.updateTriggers)i!=="all"&&nI(e,t,i)&&(r[i]=!0,n=!0);return n?r:!1}function Vwt(e,t){if(t===null)return!0;const r=t.extensions,{extensions:n}=e;if(n===r)return!1;if(!r||!n||n.length!==r.length)return!0;for(let i=0;i<n.length;i++)if(!n[i].equals(r[i]))return!0;return!1}function nI(e,t,r){let n=e.updateTriggers[r];n=n==null?{}:n;let i=t.updateTriggers[r];return i=i==null?{}:i,fV({oldProps:i,newProps:n,triggerName:r})}function pA(e){const t=e[a1],r=t&&t.constructor;return r?r._propTypes:{}}const Uwt="count(): argument not an object",Gwt="count(): argument not a container";function jwt(e){if(!Hwt(e))throw new Error(Uwt);if(typeof e.count=="function")return e.count();if(Number.isFinite(e.size))return e.size;if(Number.isFinite(e.length))return e.length;if(Wwt(e))return Object.keys(e).length;throw new Error(Gwt)}function Wwt(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function Hwt(e){return e!==null&&typeof e=="object"}function Xwt(e,t){if(!t)return e;const r={...e,...t};if("defines"in t&&(r.defines={...e.defines,...t.defines}),"modules"in t&&(r.modules=(e.modules||[]).concat(t.modules),t.modules.some(n=>n.name==="project64"))){const n=r.modules.findIndex(i=>i.name==="project32");n>=0&&r.modules.splice(n,1)}if("inject"in t)if(!e.inject)r.inject=t.inject;else{const n={...e.inject};for(const i in t.inject)n[i]=(n[i]||"")+t.inject[i];r.inject=n}return r}const Ywt={[10241]:9987,[10240]:9729,[10242]:33071,[10243]:33071},nT={};function qwt(e,t){const r=e.context&&e.context.gl;if(!r||!t)return null;if(t instanceof ln)return t;t.constructor&&t.constructor.name!=="Object"&&(t={data:t});let n=null;t.compressed&&(n={[10241]:t.data.length>1?9985:9729});const i=new ln(r,{...t,parameters:{...Ywt,...n,...e.props.textureParameters}});return nT[i.id]=!0,i}function Zwt(e){!e||!(e instanceof ln)||nT[e.id]&&(e.delete(),delete nT[e.id])}const Kwt={boolean:{validate(e,t){return!0},equal(e,t,r){return Boolean(e)===Boolean(t)}},number:{validate(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},color:{validate(e,t){return t.optional&&!e||f0(e)&&(e.length===3||e.length===4)},equal(e,t,r){return Eb(e,t)}},accessor:{validate(e,t){const r=l1(e);return r==="function"||r===l1(t.value)},equal(e,t,r){return typeof t=="function"?!0:Eb(e,t)}},array:{validate(e,t){return t.optional&&!e||f0(e)},equal(e,t,r){return r.compare?Eb(e,t):e===t}},object:{equal(e,t,r){return r.compare?wf(e,t):e===t}},function:{validate(e,t){return t.optional&&!e||typeof e=="function"},equal(e,t,r){return!r.compare||e===t}},data:{transform:(e,t,r)=>{const{dataTransform:n}=r.props;return n&&e?n(e):e}},image:{transform:(e,t,r)=>qwt(r,e),release:e=>{Zwt(e)}}};function Eb(e,t){if(e===t)return!0;if(!f0(e)||!f0(t))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Jwt(e){const t={},r={},n={};for(const[i,o]of Object.entries(e)){const a=o==null?void 0:o.deprecatedFor;if(a)n[i]=Array.isArray(a)?a:[a];else{const s=Qwt(i,o);t[i]=s,r[i]=s.value}}return{propTypes:t,defaultProps:r,deprecatedProps:n}}function Qwt(e,t){switch(l1(t)){case"object":return _h(e,t);case"array":return _h(e,{type:"array",value:t,compare:!1});case"boolean":return _h(e,{type:"boolean",value:t});case"number":return _h(e,{type:"number",value:t});case"function":return _h(e,{type:"function",value:t,compare:!0});default:return{name:e,type:"unknown",value:t}}}function _h(e,t){return"type"in t?{name:e,...Kwt[t.type],...t}:"value"in t?{name:e,type:l1(t.value),...t}:{name:e,type:"object",value:t}}function f0(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function l1(e){return f0(e)?"array":e===null?"null":typeof e}function tSt(e,t){const r=hV(e.constructor),n=Object.create(r);n[a1]=e,n[eu]={},n[us]={};for(let i=0;i<t.length;++i){const o=t[i];for(const a in o)n[a]=o[a]}return Object.freeze(n),n}function hV(e){const t=u1(e,"_mergedDefaultProps");return t||(eSt(e),e._mergedDefaultProps)}function eSt(e){if(!e.prototype)return;const r=Object.getPrototypeOf(e),n=hV(r),i=u1(e,"defaultProps")||{},o=Jwt(i),a=rSt(o.defaultProps,n,e),s={...r._propTypes,...o.propTypes};iSt(a,s);const l={...r._deprecatedProps,...o.deprecatedProps};nSt(a,l),e._mergedDefaultProps=a,e._propTypes=s,e._deprecatedProps=l}function rSt(e,t,r){const n=Object.create(null);Object.assign(n,t,e);const i=aSt(r);return delete e.id,Object.defineProperties(n,{id:{writable:!0,value:i}}),n}function nSt(e,t){for(const r in t)Object.defineProperty(e,r,{enumerable:!1,set(n){const i="".concat(this.id,": ").concat(r);for(const o of t[r])dV(this,o)||(this[o]=n);Wt.deprecated(i,t[r].join("/"))()}})}function iSt(e,t){const r={},n={};for(const i in t){const o=t[i],{name:a,value:s}=o;o.async&&(r[a]=s,n[a]=oSt(a))}e[Rc]=r,e[eu]={},Object.defineProperties(e,n)}function oSt(e){return{enumerable:!0,set(t){typeof t=="string"||t instanceof Promise||iV(t)?this[eu][e]=t:this[us][e]=t},get(){if(this[us]){if(e in this[us])return this[us][e]||this[Rc][e];if(e in this[eu]){const t=this[a1]&&this[a1].internalState;if(t&&t.hasAsyncProp(e))return t.getAsyncProp(e)||this[Rc][e]}}return this[Rc][e]}}}function dV(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u1(e,t){return dV(e,t)&&e[t]}function aSt(e){const t=u1(e,"layerName")||u1(e,"componentName");return t||Wt.once(0,"".concat(e.name,".componentName not specified"))(),t||e.name}let sSt=0;class vA{constructor(...t){E(this,"id",void 0),E(this,"props",void 0),E(this,"count",void 0),this.props=tSt(this,t),this.id=this.props.id,this.count=sSt++}clone(t){const{props:r}=this,n={};for(const i in r[Rc])i in r[us]?n[i]=r[us][i]:i in r[eu]&&(n[i]=r[eu][i]);return new this.constructor({...r,...n,...t})}}E(vA,"componentName","Component");E(vA,"defaultProps",{});const lSt=Object.freeze({});class uSt{constructor(t){E(this,"component",void 0),E(this,"onAsyncPropUpdated",void 0),E(this,"asyncProps",void 0),E(this,"oldProps",void 0),E(this,"oldAsyncProps",void 0),this.component=t,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const t in this.asyncProps){const r=this.asyncProps[t];r&&r.type&&r.type.release&&r.type.release(r.resolvedValue,r.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps||lSt}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}hasAsyncProp(t){return t in this.asyncProps}getAsyncProp(t){const r=this.asyncProps[t];return r&&r.resolvedValue}isAsyncPropLoading(t){if(t){const r=this.asyncProps[t];return Boolean(r&&r.pendingLoadCount>0&&r.pendingLoadCount!==r.resolvedLoadCount)}for(const r in this.asyncProps)if(this.isAsyncPropLoading(r))return!0;return!1}reloadAsyncProp(t,r){this._watchPromise(t,Promise.resolve(r))}setAsyncProps(t){const r=t[us]||{},n=t[eu]||t,i=t[Rc]||{};for(const o in r){const a=r[o];this._createAsyncPropData(o,i[o]),this._updateAsyncProp(o,a),r[o]=this.getAsyncProp(o)}for(const o in n){const a=n[o];this._createAsyncPropData(o,i[o]),this._updateAsyncProp(o,a)}}_fetch(t,r){return null}_onResolve(t,r){}_onError(t,r){}_updateAsyncProp(t,r){if(!!this._didAsyncInputValueChange(t,r)){if(typeof r=="string"&&(r=this._fetch(t,r)),r instanceof Promise){this._watchPromise(t,r);return}if(iV(r)){this._resolveAsyncIterable(t,r);return}this._setPropValue(t,r)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const t in this.asyncProps)Object.defineProperty(this.oldAsyncProps,t,{enumerable:!0,value:this.oldProps[t]})}}_didAsyncInputValueChange(t,r){const n=this.asyncProps[t];return r===n.resolvedValue||r===n.lastValue?!1:(n.lastValue=r,!0)}_setPropValue(t,r){this._freezeAsyncOldProps();const n=this.asyncProps[t];n&&(r=this._postProcessValue(n,r),n.resolvedValue=r,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount)}_setAsyncPropValue(t,r,n){const i=this.asyncProps[t];i&&n>=i.resolvedLoadCount&&r!==void 0&&(this._freezeAsyncOldProps(),i.resolvedValue=r,i.resolvedLoadCount=n,this.onAsyncPropUpdated(t,r))}_watchPromise(t,r){const n=this.asyncProps[t];if(n){n.pendingLoadCount++;const i=n.pendingLoadCount;r.then(o=>{o=this._postProcessValue(n,o),this._setAsyncPropValue(t,o,i),this._onResolve(t,o)}).catch(o=>{this._onError(t,o)})}}async _resolveAsyncIterable(t,r){if(t!=="data"){this._setPropValue(t,r);return}const n=this.asyncProps[t];if(!n)return;n.pendingLoadCount++;const i=n.pendingLoadCount;let o=[],a=0;for await(const s of r){const{dataTransform:l}=this.component.props;l?o=l(s,o):o=o.concat(s),Object.defineProperty(o,"__diff",{enumerable:!1,value:[{startRow:a,endRow:o.length}]}),a=o.length,this._setAsyncPropValue(t,o,i)}this._onResolve(t,o)}_postProcessValue(t,r){const n=t.type;return n&&(n.release&&n.release(t.resolvedValue,n,this.component),n.transform)?n.transform(r,n,this.component):r}_createAsyncPropData(t,r){if(!this.asyncProps[t]){const i=this.component&&this.component.constructor._propTypes;this.asyncProps[t]={type:i&&i[t],lastValue:null,resolvedValue:r,pendingLoadCount:0,resolvedLoadCount:0}}}}class cSt extends uSt{constructor({attributeManager:t,layer:r}){super(r),E(this,"attributeManager",void 0),E(this,"needsRedraw",void 0),E(this,"needsUpdate",void 0),E(this,"subLayers",void 0),E(this,"usesPickingColorCache",void 0),E(this,"changeFlags",void 0),E(this,"viewport",void 0),E(this,"uniformTransitions",void 0),E(this,"propsInTransition",void 0),this.attributeManager=t,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(t){this.component=t}_fetch(t,r){const n=this.component.props.fetch;return n?n(r,{propName:t,layer:this.layer}):super._fetch(t,r)}_onResolve(t,r){const n=this.component.props.onDataLoad;t==="data"&&n&&n(r,{propName:t,layer:this.layer})}_onError(t,r){this.layer.raiseError(r,"loading ".concat(t," of ").concat(this.layer))}}const fSt="layer.changeFlag",hSt="layer.initialize",dSt="layer.update",pSt="layer.finalize",vSt="layer.matched",iI=2**24-1,gSt=Object.freeze([]),mSt=W0(({oldViewport:e,viewport:t})=>e.equals(t));let Ki=new Uint8ClampedArray(0);const ySt={data:{type:"data",value:gSt,async:!0},dataComparator:{type:"function",value:null,compare:!1,optional:!0},_dataDiff:{type:"function",value:e=>e&&e.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(e,{propName:t,layer:r,loaders:n,loadOptions:i,signal:o})=>{const{resourceManager:a}=r.context;if(i=i||r.getLoadOptions(),n=n||r.props.loaders,o){var s;i={...i,fetch:{...(s=i)===null||s===void 0?void 0:s.fetch,signal:o}}}let l=a.contains(e);return!l&&!i&&(a.add({resourceId:e,data:Qm(e,n),persistent:!1}),l=!0),l?a.subscribe({resourceId:e,onChange:u=>{var c;return(c=r.internalState)===null||c===void 0?void 0:c.reloadAsyncProp(t,u)},consumerId:r.id,requestId:t}):Qm(e,n,i)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:j0.DRAW,onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:ue.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:e})=>[0,-e*100],compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class ko extends vA{constructor(...t){super(...t),E(this,"internalState",null),E(this,"lifecycle",cc.NO_STATE),E(this,"context",void 0),E(this,"state",void 0),E(this,"parent",null)}get root(){let t=this;for(;t.parent;)t=t.parent;return t}toString(){const t=this.constructor.layerName||this.constructor.name;return"".concat(t,"({id: '").concat(this.props.id,"'})")}project(t){ur(this.internalState);const r=this.internalState.viewport||this.context.viewport,n=Wz(t,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,o,a]=Vz(n,r.pixelProjectionMatrix);return t.length===2?[i,o]:[i,o,a]}unproject(t){return ur(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(t)}projectPosition(t,r){ur(this.internalState);const n=this.internalState.viewport||this.context.viewport;return D2t(t,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...r})}get isComposite(){return!1}setState(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(t){for(const r of this.getModels())r.updateModuleSettings(t)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:t}=this.props;return t===ue.DEFAULT||t===ue.LNGLAT||t===ue.CARTESIAN}onHover(t,r){return this.props.onHover&&this.props.onHover(t,r)||!1}onClick(t,r){return this.props.onClick&&this.props.onClick(t,r)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(t,r=[]){return r[0]=t+1&255,r[1]=t+1>>8&255,r[2]=t+1>>8>>8&255,r}decodePickingColor(t){ur(t instanceof Uint8Array);const[r,n,i]=t;return r+n*256+i*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:jwt(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var t;const r=this.getAttributeManager();if(!r)return null;const{positions:n,instancePositions:i}=r.attributes;return(t=n||i)===null||t===void 0?void 0:t.getBounds()}getShaders(t){for(const r of this.props.extensions)t=Xwt(t,r.getShaders.call(this,r));return t}shouldUpdateState(t){return t.changeFlags.propsOrDataChanged}updateState(t){const r=this.getAttributeManager(),{dataChanged:n}=t.changeFlags;if(n&&r)if(Array.isArray(n))for(const l of n)r.invalidateAll(l);else r.invalidateAll();const{props:i,oldProps:o}=t,a=Number.isInteger(o.highlightedObjectIndex)||o.pickable,s=Number.isInteger(i.highlightedObjectIndex)||i.pickable;if(a!==s&&r){const{pickingColors:l,instancePickingColors:u}=r.attributes,c=l||u;c&&(s&&c.constant&&(c.constant=!1,r.invalidate(c.id)),!c.value&&!s&&(c.constant=!0,c.value=[0,0,0]))}}finalizeState(t){for(const n of this.getModels())n.delete();const r=this.getAttributeManager();r&&r.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(t){for(const r of this.getModels())r.draw(t)}getPickingInfo({info:t,mode:r,sourceLayer:n}){const{index:i}=t;return i>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[i]),t}raiseError(t,r){var n,i;if(r&&(t.message="".concat(r,": ").concat(t.message)),!((n=(i=this.props).onError)!==null&&n!==void 0&&n.call(i,t))){var o,a;(o=this.context)===null||o===void 0||(a=o.onError)===null||a===void 0||a.call(o,t,this)}}getNeedsRedraw(t={clearRedrawFlags:!1}){return this._getNeedsRedraw(t)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var t;return((t=this.internalState)===null||t===void 0?void 0:t.uniformTransitions.active)||!1}activateViewport(t){if(!this.internalState)return;const r=this.internalState.viewport;this.internalState.viewport=t,(!r||!mSt({oldViewport:r,viewport:t}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(t="all"){const r=this.getAttributeManager();!r||(t==="all"?r.invalidateAll():r.invalidate(t))}updateAttributes(t){for(const r of this.getModels())this._setModelAttributes(r,t)}_updateAttributes(){const t=this.getAttributeManager();if(!t)return;const r=this.props,n=this.getNumInstances(),i=this.getStartIndices();t.update({data:r.data,numInstances:n,startIndices:i,props:r,transitions:r.transitions,buffers:r.data.attributes,context:this});const o=t.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(o)}_updateAttributeTransition(){const t=this.getAttributeManager();t&&t.updateTransition()}_updateUniformTransition(){const{uniformTransitions:t}=this.internalState;if(t.active){const r=t.update(),n=Object.create(this.props);for(const i in r)Object.defineProperty(n,i,{value:r[i]});return n}return this.props}calculateInstancePickingColors(t,{numInstances:r}){if(t.constant)return;const n=Math.floor(Ki.length/3);if(this.internalState.usesPickingColorCache=!0,n<r){r>iI&&Wt.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Ki=Kc.allocate(Ki,r,{size:3,copy:!0,maxCount:Math.max(r,iI)});const i=Math.floor(Ki.length/3),o=[];for(let a=n;a<i;a++)this.encodePickingColor(a,o),Ki[a*3+0]=o[0],Ki[a*3+1]=o[1],Ki[a*3+2]=o[2]}t.value=Ki.subarray(0,r*3)}_setModelAttributes(t,r){const n=this.getAttributeManager(),i=t.userData.excludeAttributes||{},o=n.getShaderAttributes(r,i);t.setAttributes(o)}disablePickingIndex(t){this._disablePickingIndex(t)}_disablePickingIndex(t){const{pickingColors:r,instancePickingColors:n}=this.getAttributeManager().attributes,i=r||n;if(!i)return;const o=i.getVertexOffset(t),a=i.getVertexOffset(t+1);i.buffer.subData({data:new Uint8Array(a-o),offset:o})}restorePickingColors(){const{pickingColors:t,instancePickingColors:r}=this.getAttributeManager().attributes,n=t||r;!n||(this.internalState.usesPickingColorCache&&n.value.buffer!==Ki.buffer&&(n.value=Ki.subarray(0,n.value.length)),n.updateSubBuffer({startOffset:0}))}_initialize(){ur(!this.internalState),ur(Number.isFinite(this.props.coordinateSystem)),Lr(hSt,this);const t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new cSt({attributeManager:t,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(Wt.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),t)}),this.internalState.layer=this,this.internalState.uniformTransitions=new Dwt(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const r of this.props.extensions)r.initializeState.call(this,this.context,r);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(t){Lr(vSt,this,this===t);const{state:r,internalState:n}=t;this!==t&&(this.internalState=n,this.internalState.layer=this,this.state=r,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const t=this.needsUpdate();if(Lr(dSt,this,t),!t)return;const r=this.props,n=this.context,i=this.internalState,o=n.viewport,a=this._updateUniformTransition();i.propsInTransition=a,n.viewport=i.viewport||o,this.props=a;try{const s=this._getUpdateParams(),l=this.getModels();if(n.gl)this.updateState(s);else try{this.updateState(s)}catch{}for(const c of this.props.extensions)c.updateState.call(this,s,c);const u=this.getModels()[0]!==l[0];this._postUpdate(s,u)}finally{n.viewport=o,this.props=r,this._clearChangeFlags(),i.needsUpdate=!1,i.resetOldProps()}}_finalize(){Lr(pSt,this),this.finalizeState(this.context);for(const t of this.props.extensions)t.finalizeState.call(this,t)}_drawLayer({moduleParameters:t=null,uniforms:r={},parameters:n={}}){this._updateAttributeTransition();const i=this.props,o=this.context;this.props=this.internalState.propsInTransition||i;const a=this.props.opacity;r.opacity=Math.pow(a,1/2.2);try{t&&this.setModuleParameters(t);const{getPolygonOffset:s}=this.props,l=s&&s(r)||[0,0];fa(o.gl,{polygonOffset:l}),Zn(o.gl,n,()=>{const u={moduleParameters:t,uniforms:r,parameters:n,context:o};for(const c of this.props.extensions)c.draw.call(this,u,c);this.draw(u)})}finally{this.props=i}}getChangeFlags(){var t;return(t=this.internalState)===null||t===void 0?void 0:t.changeFlags}setChangeFlags(t){if(!this.internalState)return;const{changeFlags:r}=this.internalState;for(const i in t)if(t[i]){let o=!1;switch(i){case"dataChanged":const a=t[i],s=r[i];a&&Array.isArray(s)&&(r.dataChanged=Array.isArray(a)?s.concat(a):a,o=!0);default:r[i]||(r[i]=t[i],o=!0)}o&&Lr(fSt,this,i,t)}const n=Boolean(r.dataChanged||r.updateTriggersChanged||r.propsChanged||r.extensionsChanged);r.propsOrDataChanged=n,r.somethingChanged=n||r.viewportChanged||r.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(t,r){const n=Fwt(t,r);if(n.updateTriggersChanged)for(const o in n.updateTriggersChanged)n.updateTriggersChanged[o]&&this.invalidateAttribute(o);if(n.transitionsChanged)for(const o in n.transitionsChanged){var i;this.internalState.uniformTransitions.add(o,r[o],t[o],(i=t.transitions)===null||i===void 0?void 0:i[o])}return this.setChangeFlags(n)}validateProps(){Nwt(this.props)}updateAutoHighlight(t){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(t)}_updateAutoHighlight(t){const r={pickingSelectedColor:t.picked?t.color:null},{highlightColor:n}=this.props;t.picked&&typeof n=="function"&&(r.pickingHighlightColor=n(t)),this.setModuleParameters(r),this.setNeedsRedraw()}_getAttributeManager(){const t=this.context;return new xwt(t.gl,{id:this.props.id,stats:t.stats,timeline:t.timeline})}_postUpdate(t,r){const{props:n,oldProps:i}=t;this.setNeedsRedraw(),this._updateAttributes();const{model:o}=this.state;o==null||o.setInstanceCount(this.getNumInstances());const{autoHighlight:a,highlightedObjectIndex:s,highlightColor:l}=n;if(r||i.autoHighlight!==a||i.highlightedObjectIndex!==s||i.highlightColor!==l){const u={};a||(u.pickingSelectedColor=null),Array.isArray(l)&&(u.pickingHighlightColor=l),Number.isInteger(s)&&(u.pickingSelectedColor=Number.isFinite(s)&&s>=0?this.encodePickingColor(s):null),this.setModuleParameters(u)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(t){if(!this.internalState)return!1;let r=!1;r=r||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!t.clearRedrawFlags;const n=this.getAttributeManager(),i=n?n.getNeedsRedraw(t):!1;return r=r||i,r}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}E(ko,"defaultProps",ySt);E(ko,"layerName","Layer");const _St="compositeLayer.renderLayers";class Cy extends ko{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(t=>t.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(t){}setState(t){super.setState(t),this.setNeedsUpdate()}getPickingInfo({info:t}){const{object:r}=t;return r&&r.__source&&r.__source.parent&&r.__source.parent.id===this.id&&(t.object=r.__source.object,t.index=r.__source.index),t}filterSubLayer(t){return!0}shouldRenderSubLayer(t,r){return r&&r.length}getSubLayerClass(t,r){const{_subLayerProps:n}=this.props;return n&&n[t]&&n[t].type||r}getSubLayerRow(t,r,n){return t.__source={parent:this,object:r,index:n},t}getSubLayerAccessor(t){if(typeof t=="function"){const r={index:-1,data:this.props.data,target:[]};return(n,i)=>n&&n.__source?(r.index=n.__source.index,t(n.__source.object,r)):t(n,i)}return t}getSubLayerProps(t={}){var r;const{opacity:n,pickable:i,visible:o,parameters:a,getPolygonOffset:s,highlightedObjectIndex:l,autoHighlight:u,highlightColor:c,coordinateSystem:f,coordinateOrigin:h,wrapLongitude:d,positionFormat:p,modelMatrix:v,extensions:g,fetch:m,operation:y,_subLayerProps:_}=this.props,b={id:"",updateTriggers:{},opacity:n,pickable:i,visible:o,parameters:a,getPolygonOffset:s,highlightedObjectIndex:l,autoHighlight:u,highlightColor:c,coordinateSystem:f,coordinateOrigin:h,wrapLongitude:d,positionFormat:p,modelMatrix:v,extensions:g,fetch:m,operation:y},T=_&&t.id&&_[t.id],S=T&&T.updateTriggers,P=t.id||"sublayer";if(T){const C=this.constructor._propTypes,A=t.type?t.type._propTypes:{};for(const M in T){const k=A[M]||C[M];k&&k.type==="accessor"&&(T[M]=this.getSubLayerAccessor(T[M]))}}Object.assign(b,t,T),b.id="".concat(this.props.id,"-").concat(P),b.updateTriggers={all:(r=this.props.updateTriggers)===null||r===void 0?void 0:r.all,...t.updateTriggers,...S};for(const C of g){const A=C.getSubLayerProps.call(this,C);A&&Object.assign(b,A,{updateTriggers:Object.assign(b.updateTriggers,A.updateTriggers)})}return b}_updateAutoHighlight(t){for(const r of this.getSubLayers())r.updateAutoHighlight(t)}_getAttributeManager(){return null}_postUpdate(t,r){let n=this.internalState.subLayers;const i=!n||this.needsUpdate();if(i){const o=this.renderLayers();n=Ty(o,Boolean),this.internalState.subLayers=n}Lr(_St,this,i,n);for(const o of n)o.parent=this}}E(Cy,"layerName","CompositeLayer");const Pv=Math.PI/180,oI=180/Math.PI,tm=6370972,_c=256;function bSt(){const e=_c/tm,t=Math.PI/180*_c;return{unitsPerMeter:[e,e,e],unitsPerMeter2:[0,0,0],metersPerUnit:[1/e,1/e,1/e],unitsPerDegree:[t,t,e],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/t,1/t,1/e]}}class wSt extends xs{constructor(t={}){const{latitude:r=0,longitude:n=0,zoom:i=0,nearZMultiplier:o=.1,farZMultiplier:a=2,resolution:s=10}=t;let{height:l,altitude:u=1.5}=t;l=l||1,u=Math.max(.75,u);const c=new Nr().lookAt({eye:[0,-u,0],up:[0,0,1]}),f=Math.pow(2,i);c.rotateX(r*Pv),c.rotateZ(-n*Pv),c.scale(f/l);const h=Math.atan(.5/u),d=_c*2*f/l;super({...t,height:l,viewMatrix:c,longitude:n,latitude:r,zoom:i,distanceScales:bSt(),fovyRadians:h*2,focalDistance:u,near:o,far:Math.min(2,1/d+1)*u*a}),E(this,"longitude",void 0),E(this,"latitude",void 0),E(this,"resolution",void 0),this.latitude=r,this.longitude=n,this.resolution=s}get projectionMode(){return bi.GLOBE}getDistanceScales(){return this.distanceScales}getBounds(t={}){const r={targetZ:t.z||0},n=this.unproject([0,this.height/2],r),i=this.unproject([this.width/2,0],r),o=this.unproject([this.width,this.height/2],r),a=this.unproject([this.width/2,this.height],r);return o[0]<this.longitude&&(o[0]+=360),n[0]>this.longitude&&(n[0]-=360),[Math.min(n[0],o[0],i[0],a[0]),Math.min(n[1],o[1],i[1],a[1]),Math.max(n[0],o[0],i[0],a[0]),Math.max(n[1],o[1],i[1],a[1])]}unproject(t,{topLeft:r=!0,targetZ:n}={}){const[i,o,a]=t,s=r?o:this.height-o,{pixelUnprojectionMatrix:l}=this;let u;if(Number.isFinite(a))u=Ab(l,[i,s,a,1]);else{const d=Ab(l,[i,s,-1,1]),p=Ab(l,[i,s,1,1]),v=((n||0)/tm+1)*_c,g=pb(Tz([],d,p)),m=pb(d),y=pb(p),_=(4*m*y-(g-m-y)**2)/16,b=4*_/g,T=Math.sqrt(m-b),S=Math.sqrt(Math.max(0,v*v-b)),P=(T-S)/Math.sqrt(g);u=D1t([],d,p,P)}const[c,f,h]=this.unprojectPosition(u);return Number.isFinite(a)?[c,f,h]:Number.isFinite(n)?[c,f,n]:[c,f]}projectPosition(t){const[r,n,i=0]=t,o=r*Pv,a=n*Pv,s=Math.cos(a),l=(i/tm+1)*_c;return[Math.sin(o)*s*l,-Math.cos(o)*s*l,Math.sin(a)*l]}unprojectPosition(t){const[r,n,i]=t,o=Pz(t),a=Math.asin(i/o),l=Math.atan2(r,-n)*oI,u=a*oI,c=(o/_c-1)*tm;return[l,u,c]}projectFlat(t){return t}unprojectFlat(t){return t}panByPosition(t,r){const n=this.unproject(r);return{longitude:t[0]-n[0]+this.longitude,latitude:t[1]-n[1]+this.latitude}}}function Ab(e,t){const r=bf([],t,e);return oA(r,r,1/r[3]),r}class pV{constructor(t){E(this,"opts",void 0),E(this,"typedArrayManager",void 0),E(this,"indexStarts",[0]),E(this,"vertexStarts",[0]),E(this,"vertexCount",0),E(this,"instanceCount",0),E(this,"attributes",void 0),E(this,"_attributeDefs",void 0),E(this,"data",void 0),E(this,"getGeometry",void 0),E(this,"geometryBuffer",void 0),E(this,"buffers",void 0),E(this,"positionSize",void 0),E(this,"normalize",void 0);const{attributes:r={}}=t;this.typedArrayManager=Kc,this.attributes={},this._attributeDefs=r,this.opts=t,this.updateGeometry(t)}updateGeometry(t){Object.assign(this.opts,t);const{data:r,buffers:n={},getGeometry:i,geometryBuffer:o,positionFormat:a,dataChanged:s,normalize:l=!0}=this.opts;if(this.data=r,this.getGeometry=i,this.positionSize=o&&o.size||(a==="XY"?2:3),this.buffers=n,this.normalize=l,o&&(ur(r.startIndices),this.getGeometry=this.getGeometryFromBuffer(o),l||(n.positions=o)),this.geometryBuffer=n.positions,Array.isArray(s))for(const u of s)this._rebuildGeometry(u);else this._rebuildGeometry()}updatePartialGeometry({startRow:t,endRow:r}){this._rebuildGeometry({startRow:t,endRow:r})}getGeometryFromBuffer(t){const r=t.value||t;return ArrayBuffer.isView(r)?oV(r,{size:this.positionSize,offset:t.offset,stride:t.stride,startIndices:this.data.startIndices}):null}_allocate(t,r){const{attributes:n,buffers:i,_attributeDefs:o,typedArrayManager:a}=this;for(const s in o)if(s in i)a.release(n[s]),n[s]=null;else{const l=o[s];l.copy=r,n[s]=a.allocate(n[s],t,l)}}_forEachGeometry(t,r,n){const{data:i,getGeometry:o}=this,{iterable:a,objectInfo:s}=Ay(i,r,n);for(const l of a){s.index++;const u=o?o(l,s):null;t(u,s.index)}}_rebuildGeometry(t){if(!this.data)return;let{indexStarts:r,vertexStarts:n,instanceCount:i}=this;const{data:o,geometryBuffer:a}=this,{startRow:s=0,endRow:l=1/0}=t||{},u={};if(t||(r=[0],n=[0]),this.normalize||!a)this._forEachGeometry((f,h)=>{const d=f&&this.normalizeGeometry(f);u[h]=d,n[h+1]=n[h]+(d?this.getGeometrySize(d):0)},s,l),i=n[n.length-1];else if(n=o.startIndices,i=n[o.length]||0,ArrayBuffer.isView(a))i=i||a.length/this.positionSize;else if(a instanceof Pe){const f=a.accessor.stride||this.positionSize*4;i=i||a.byteLength/f}else if(a.buffer){const f=a.stride||this.positionSize*4;i=i||a.buffer.byteLength/f}else if(a.value){const f=a.value,h=a.stride/f.BYTES_PER_ELEMENT||this.positionSize;i=i||f.length/h}this._allocate(i,Boolean(t)),this.indexStarts=r,this.vertexStarts=n,this.instanceCount=i;const c={};this._forEachGeometry((f,h)=>{const d=u[h]||f;c.vertexStart=n[h],c.indexStart=r[h];const p=h<n.length-1?n[h+1]:i;c.geometrySize=p-n[h],c.geometryIndex=h,this.updateGeometryAttributes(d,c)},s,l),this.vertexCount=r[r.length-1]}}const SSt=new Uint16Array([0,2,1,0,3,2]),TSt=new Float32Array([0,1,0,0,1,0,1,1]);function PSt(e,t){if(!t)return ESt(e);const r=Math.max(Math.abs(e[0][0]-e[3][0]),Math.abs(e[1][0]-e[2][0])),n=Math.max(Math.abs(e[1][1]-e[0][1]),Math.abs(e[2][1]-e[3][1])),i=Math.ceil(r/t)+1,o=Math.ceil(n/t)+1,a=(i-1)*(o-1)*6,s=new Uint32Array(a),l=new Float32Array(i*o*2),u=new Float64Array(i*o*3);let c=0,f=0;for(let h=0;h<i;h++){const d=h/(i-1);for(let p=0;p<o;p++){const v=p/(o-1),g=ASt(e,d,v);u[c*3+0]=g[0],u[c*3+1]=g[1],u[c*3+2]=g[2]||0,l[c*2+0]=d,l[c*2+1]=1-v,h>0&&p>0&&(s[f++]=c-o,s[f++]=c-o-1,s[f++]=c-1,s[f++]=c-o,s[f++]=c-1,s[f++]=c),c++}}return{vertexCount:a,positions:u,indices:s,texCoords:l}}function ESt(e){const t=new Float64Array(12);for(let r=0;r<e.length;r++)t[r*3+0]=e[r][0],t[r*3+1]=e[r][1],t[r*3+2]=e[r][2]||0;return{vertexCount:6,positions:t,indices:SSt,texCoords:TSt}}function ASt(e,t,r){return zl(zl(e[0],e[1],r),zl(e[3],e[2],r),t)}const CSt=`
#define SHADER_NAME bitmap-layer-vertex-shader

attribute vec2 texCoords;
attribute vec3 positions;
attribute vec3 positions64Low;

varying vec2 vTexCoord;
varying vec2 vTexPos;

uniform float coordinateConversion;

const vec3 pickingColor = vec3(1.0, 0.0, 0.0);

void main(void) {
  geometry.worldPosition = positions;
  geometry.uv = texCoords;
  geometry.pickingColor = pickingColor;

  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTexCoord = texCoords;

  if (coordinateConversion < -0.5) {
    vTexPos = geometry.position.xy + project_uCommonOrigin.xy;
  } else if (coordinateConversion > 0.5) {
    vTexPos = geometry.worldPosition.xy;
  }

  vec4 color = vec4(0.0);
  DECKGL_FILTER_COLOR(color, geometry);
}
`,MSt=`
vec3 packUVsIntoRGB(vec2 uv) {
  // Extract the top 8 bits. We want values to be truncated down so we can add a fraction
  vec2 uv8bit = floor(uv * 256.);

  // Calculate the normalized remainders of u and v parts that do not fit into 8 bits
  // Scale and clamp to 0-1 range
  vec2 uvFraction = fract(uv * 256.);
  vec2 uvFraction4bit = floor(uvFraction * 16.);

  // Remainder can be encoded in blue channel, encode as 4 bits for pixel coordinates
  float fractions = uvFraction4bit.x + uvFraction4bit.y * 16.;

  return vec3(uv8bit, fractions) / 255.;
}
`,kSt=`
#define SHADER_NAME bitmap-layer-fragment-shader

#ifdef GL_ES
precision highp float;
#endif

uniform sampler2D bitmapTexture;

varying vec2 vTexCoord;
varying vec2 vTexPos;

uniform float desaturate;
uniform vec4 transparentColor;
uniform vec3 tintColor;
uniform float opacity;

uniform float coordinateConversion;
uniform vec4 bounds;

/* projection utils */
const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / PI / 2.0;

// from degrees to Web Mercator
vec2 lnglat_to_mercator(vec2 lnglat) {
  float x = lnglat.x;
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

// from Web Mercator to degrees
vec2 mercator_to_lnglat(vec2 xy) {
  xy /= WORLD_SCALE;
  return degrees(vec2(
    xy.x - PI,
    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5
  ));
}
/* End projection utils */

// apply desaturation
vec3 color_desaturate(vec3 color) {
  float luminance = (color.r + color.g + color.b) * 0.333333333;
  return mix(color, vec3(luminance), desaturate);
}

// apply tint
vec3 color_tint(vec3 color) {
  return color * tintColor;
}

// blend with background color
vec4 apply_opacity(vec3 color, float alpha) {
  return mix(transparentColor, vec4(color, 1.0), alpha);
}

vec2 getUV(vec2 pos) {
  return vec2(
    (pos.x - bounds[0]) / (bounds[2] - bounds[0]),
    (pos.y - bounds[3]) / (bounds[1] - bounds[3])
  );
}

`.concat(MSt,`

void main(void) {
  vec2 uv = vTexCoord;
  if (coordinateConversion < -0.5) {
    vec2 lnglat = mercator_to_lnglat(vTexPos);
    uv = getUV(lnglat);
  } else if (coordinateConversion > 0.5) {
    vec2 commonPos = lnglat_to_mercator(vTexPos);
    uv = getUV(commonPos);
  }
  vec4 bitmapColor = texture2D(bitmapTexture, uv);

  gl_FragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * opacity);

  geometry.uv = uv;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);

  if (picking_uActive) {
    // Since instance information is not used, we can use picking color for pixel index
    gl_FragColor.rgb = packUVsIntoRGB(uv);
  }
}
`),xSt={image:{type:"image",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},_imageCoordinateSystem:ue.DEFAULT,desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]}};class gA extends ko{constructor(...t){super(...t),E(this,"state",void 0)}getShaders(){return super.getShaders({vs:CSt,fs:kSt,modules:[vu,gu]})}initializeState(){const t=this.getAttributeManager();t.remove(["instancePickingColors"]);const r=!0;t.add({indices:{size:1,isIndexed:!0,update:n=>n.value=this.state.mesh.indices,noAlloc:r},positions:{size:3,type:5130,fp64:this.use64bitPositions(),update:n=>n.value=this.state.mesh.positions,noAlloc:r},texCoords:{size:2,update:n=>n.value=this.state.mesh.texCoords,noAlloc:r}})}updateState({props:t,oldProps:r,changeFlags:n}){const i=this.getAttributeManager();if(n.extensionsChanged){var o;const{gl:a}=this.context;(o=this.state.model)===null||o===void 0||o.delete(),this.state.model=this._getModel(a),i.invalidateAll()}if(t.bounds!==r.bounds){const a=this.state.mesh,s=this._createMesh();this.state.model.setVertexCount(s.vertexCount);for(const l in s)a&&a[l]!==s[l]&&i.invalidate(l);this.setState({mesh:s,...this._getCoordinateUniforms()})}else t._imageCoordinateSystem!==r._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}getPickingInfo(t){const{image:r}=this.props,n=t.info;if(!n.color||!r)return n.bitmap=null,n;const{width:i,height:o}=r;n.index=0;const a=LSt(n.color),s=[Math.floor(a[0]*i),Math.floor(a[1]*o)];return n.bitmap={size:{width:i,height:o},uv:a,pixel:s},n}disablePickingIndex(){this.setState({disablePicking:!0})}restorePickingColors(){this.setState({disablePicking:!1})}_updateAutoHighlight(t){super._updateAutoHighlight({...t,color:this.encodePickingColor(0)})}_createMesh(){const{bounds:t}=this.props;let r=t;return aI(t)&&(r=[[t[0],t[1]],[t[0],t[3]],[t[2],t[3]],[t[2],t[1]]]),PSt(r,this.context.viewport.resolution)}_getModel(t){return t?new ha(t,{...this.getShaders(),id:this.props.id,geometry:new pu({drawMode:4,vertexCount:6}),isInstanced:!1}):null}draw(t){const{uniforms:r,moduleParameters:n}=t,{model:i,coordinateConversion:o,bounds:a,disablePicking:s}=this.state,{image:l,desaturate:u,transparentColor:c,tintColor:f}=this.props;n.pickingActive&&s||l&&i&&i.setUniforms(r).setUniforms({bitmapTexture:l,desaturate:u,transparentColor:c.map(h=>h/255),tintColor:f.slice(0,3).map(h=>h/255),coordinateConversion:o,bounds:a}).draw()}_getCoordinateUniforms(){const{LNGLAT:t,CARTESIAN:r,DEFAULT:n}=ue;let{_imageCoordinateSystem:i}=this.props;if(i!==n){const{bounds:o}=this.props;if(!aI(o))throw new Error("_imageCoordinateSystem only supports rectangular bounds");const a=this.context.viewport.resolution?t:r;if(i=i===t?t:r,i===t&&a===r)return{coordinateConversion:-1,bounds:o};if(i===r&&a===t){const s=ks([o[0],o[1]]),l=ks([o[2],o[3]]);return{coordinateConversion:1,bounds:[s[0],s[1],l[0],l[1]]}}}return{coordinateConversion:0,bounds:[0,0,0,0]}}}E(gA,"layerName","BitmapLayer");E(gA,"defaultProps",xSt);function LSt(e){const[t,r,n]=e,i=(n&240)/256,o=(n&15)/16;return[(t+o)/256,(r+i)/256]}function aI(e){return Number.isFinite(e[0])}const ISt=`#define SHADER_NAME icon-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute vec4 instanceIconFrames;
attribute float instanceColorModes;
attribute vec2 instanceOffsets;
attribute vec2 instancePixelOffset;

uniform float sizeScale;
uniform vec2 iconsTextureDim;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform bool billboard;
uniform int sizeUnits;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = angle * PI / 180.0;
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;

  vec2 iconSize = instanceIconFrames.zw;
  // convert size in meters to pixels, then scaled and clamp
 
  // project meters to pixels and clamp to limits 
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), 
    sizeMinPixels, sizeMaxPixels
  );

  // scale icon height to match instanceSize
  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;

  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace
  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
  pixelOffset += instancePixelOffset;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);

  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); 
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTextureCoords = mix(
    instanceIconFrames.xy,
    instanceIconFrames.xy + iconSize,
    (positions.xy + 1.0) / 2.0
  ) / iconsTextureDim;

  vColor = instanceColors;
  DECKGL_FILTER_COLOR(vColor, geometry);

  vColorMode = instanceColorModes;
}
`,OSt=`#define SHADER_NAME icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float alphaCutoff;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  vec4 texColor = texture2D(iconsTexture, vTextureCoords);

  // if colorMode == 0, use pixel color from the texture
  // if colorMode == 1 or rendering picking buffer, use texture as transparency mask
  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
  // Take the global opacity and the alpha from vColor into account for the alpha component
  float a = texColor.a * opacity * vColor.a;

  if (a < alphaCutoff) {
    discard;
  }

  gl_FragColor = vec4(color, a);
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,RSt=1024,DSt=4,sI=()=>{},NSt={[10241]:9987,[10240]:9729,[10242]:33071,[10243]:33071};function FSt(e){return Math.pow(2,Math.ceil(Math.log2(e)))}function BSt(e,t,r,n){return r===t.width&&n===t.height?t:(e.canvas.height=n,e.canvas.width=r,e.clearRect(0,0,e.canvas.width,e.canvas.height),e.drawImage(t,0,0,t.width,t.height,0,0,r,n),e.canvas)}function h0(e){return e&&(e.id||e.url)}function $St(e,t,r){const n=e.width,i=e.height,o=tz(e,{width:t,height:r});return Qvt(e,o,{targetY:0,width:n,height:i}),e.delete(),o}function lI(e,t,r){for(let n=0;n<t.length;n++){const{icon:i,xOffset:o}=t[n],a=h0(i);e[a]={...i,x:o,y:r}}}function zSt({icons:e,buffer:t,mapping:r={},xOffset:n=0,yOffset:i=0,rowHeight:o=0,canvasWidth:a}){let s=[];for(let l=0;l<e.length;l++){const u=e[l],c=h0(u);if(!r[c]){const{height:f,width:h}=u;n+h+t>a&&(lI(r,s,i),n=0,i=o+i+t,o=0,s=[]),s.push({icon:u,xOffset:n}),n=n+h+t,o=Math.max(o,f)}}return s.length>0&&lI(r,s,i),{mapping:r,rowHeight:o,xOffset:n,yOffset:i,canvasWidth:a,canvasHeight:FSt(o+i+t)}}function VSt(e,t,r){if(!e||!t)return null;r=r||{};const n={},{iterable:i,objectInfo:o}=Ay(e);for(const a of i){o.index++;const s=t(a,o),l=h0(s);if(!s)throw new Error("Icon is missing.");if(!s.url)throw new Error("Icon url is missing.");!n[l]&&(!r[l]||s.url!==r[l].url)&&(n[l]={...s,source:a,sourceIndex:o.index})}return n}class USt{constructor(t,{onUpdate:r=sI,onError:n=sI}){E(this,"gl",void 0),E(this,"onUpdate",void 0),E(this,"onError",void 0),E(this,"_loadOptions",null),E(this,"_texture",null),E(this,"_externalTexture",null),E(this,"_mapping",{}),E(this,"_textureParameters",null),E(this,"_pendingCount",0),E(this,"_autoPacking",!1),E(this,"_xOffset",0),E(this,"_yOffset",0),E(this,"_rowHeight",0),E(this,"_buffer",DSt),E(this,"_canvasWidth",RSt),E(this,"_canvasHeight",0),E(this,"_canvas",null),this.gl=t,this.onUpdate=r,this.onError=n}finalize(){var t;(t=this._texture)===null||t===void 0||t.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(t){const r=this._autoPacking?h0(t):t;return this._mapping[r]||{}}setProps({loadOptions:t,autoPacking:r,iconAtlas:n,iconMapping:i,textureParameters:o}){if(t&&(this._loadOptions=t),r!==void 0&&(this._autoPacking=r),i&&(this._mapping=i),n){var a;(a=this._texture)===null||a===void 0||a.delete(),this._texture=null,this._externalTexture=n}o&&(this._textureParameters=o)}get isLoaded(){return this._pendingCount===0}packIcons(t,r){if(!this._autoPacking||typeof document>"u")return;const n=Object.values(VSt(t,r,this._mapping)||{});if(n.length>0){const{mapping:i,xOffset:o,yOffset:a,rowHeight:s,canvasHeight:l}=zSt({icons:n,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=s,this._mapping=i,this._xOffset=o,this._yOffset=a,this._canvasHeight=l,this._texture||(this._texture=new ln(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||NSt})),this._texture.height!==this._canvasHeight&&(this._texture=$St(this._texture,this._canvasWidth,this._canvasHeight)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(n)}}_loadIcons(t){const r=this._canvas.getContext("2d");for(const n of t)this._pendingCount++,Qm(n.url,F$,this._loadOptions).then(i=>{const o=h0(n),{x:a,y:s,width:l,height:u}=this._mapping[o],c=BSt(r,i,l,u);this._texture.setSubImageData({data:c,x:a,y:s,width:l,height:u}),this._texture.generateMipmap(),this.onUpdate()}).catch(i=>{this.onError({url:n.url,source:n.source,sourceIndex:n.sourceIndex,loadOptions:this._loadOptions,error:i})}).finally(()=>{this._pendingCount--})}}const vV=[0,0,0,255],GSt={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:e=>e.position},getIcon:{type:"accessor",value:e=>e.icon},getColor:{type:"accessor",value:vV},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}};class X0 extends ko{constructor(...t){super(...t),E(this,"state",void 0)}getShaders(){return super.getShaders({vs:ISt,fs:OSt,modules:[vu,gu]})}initializeState(){this.state={iconManager:new USt(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:vV},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(t){super.updateState(t);const{props:r,oldProps:n,changeFlags:i}=t,o=this.getAttributeManager(),{iconAtlas:a,iconMapping:s,data:l,getIcon:u,textureParameters:c}=r,{iconManager:f}=this.state,h=a||this.internalState.isAsyncPropLoading("iconAtlas");if(f.setProps({loadOptions:r.loadOptions,autoPacking:!h,iconAtlas:a,iconMapping:h?s:null,textureParameters:c}),h?n.iconMapping!==r.iconMapping&&o.invalidate("getIcon"):(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getIcon))&&f.packIcons(l,u),i.extensionsChanged){var d;const{gl:p}=this.context;(d=this.state.model)===null||d===void 0||d.delete(),this.state.model=this._getModel(p),o.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(t){super.finalizeState(t),this.state.iconManager.finalize()}draw({uniforms:t}){const{sizeScale:r,sizeMinPixels:n,sizeMaxPixels:i,sizeUnits:o,billboard:a,alphaCutoff:s}=this.props,{iconManager:l}=this.state,u=l.getTexture();u&&this.state.model.setUniforms(t).setUniforms({iconsTexture:u,iconsTextureDim:[u.width,u.height],sizeUnits:Ms[o],sizeScale:r,sizeMinPixels:n,sizeMaxPixels:i,billboard:a,alphaCutoff:s}).draw()}_getModel(t){const r=[-1,-1,-1,1,1,1,1,-1];return new ha(t,{...this.getShaders(),id:this.props.id,geometry:new pu({drawMode:6,attributes:{positions:{size:2,value:new Float32Array(r)}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(t){var r;const n=(r=this.getCurrentLayer())===null||r===void 0?void 0:r.props.onIconError;n?n(t):Wt.error(t.error.message)()}getInstanceOffset(t){const{width:r,height:n,anchorX:i=r/2,anchorY:o=n/2}=this.state.iconManager.getIconMapping(t);return[r/2-i,n/2-o]}getInstanceColorMode(t){return this.state.iconManager.getIconMapping(t).mask?1:0}getInstanceIconFrame(t){const{x:r,y:n,width:i,height:o}=this.state.iconManager.getIconMapping(t);return[r,n,i,o]}}E(X0,"defaultProps",GSt);E(X0,"layerName","IconLayer");const jSt=`#define SHADER_NAME line-layer-vertex-shader

attribute vec3 positions;
attribute vec3 instanceSourcePositions;
attribute vec3 instanceTargetPositions;
attribute vec3 instanceSourcePositions64Low;
attribute vec3 instanceTargetPositions64Low;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute float instanceWidths;

uniform float opacity;
uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float useShortestPath;
uniform int widthUnits;

varying vec4 vColor;
varying vec2 uv;

// offset vector by strokeWidth pixels
// offset_direction is -1 (left) or 1 (right)
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  return dir_screenspace * offset_direction * width / 2.0;
}

vec3 splitLine(vec3 a, vec3 b, float x) {
  float t = (x - a.x) / (b.x - a.x);
  return vec3(x, mix(a.yz, b.yz, t));
}

void main(void) {
  geometry.worldPosition = instanceSourcePositions;
  geometry.worldPositionAlt = instanceTargetPositions;

  vec3 source_world = instanceSourcePositions;
  vec3 target_world = instanceTargetPositions;
  vec3 source_world_64low = instanceSourcePositions64Low;
  vec3 target_world_64low = instanceTargetPositions64Low;

  if (useShortestPath > 0.5 || useShortestPath < -0.5) {
    source_world.x = mod(source_world.x + 180., 360.0) - 180.;
    target_world.x = mod(target_world.x + 180., 360.0) - 180.;
    float deltaLng = target_world.x - source_world.x;

    if (deltaLng * useShortestPath > 180.) {
      source_world.x += 360. * useShortestPath;
      source_world = splitLine(source_world, target_world, 180. * useShortestPath);
      source_world_64low = vec3(0.0);
    } else if (deltaLng * useShortestPath < -180.) {
      target_world.x += 360. * useShortestPath;
      target_world = splitLine(source_world, target_world, 180. * useShortestPath);
      target_world_64low = vec3(0.0);
    } else if (useShortestPath < 0.) {
      // Line is not split, abort
      gl_Position = vec4(0.);
      return;
    }
  }

  // Position
  vec4 source_commonspace;
  vec4 target_commonspace;
  vec4 source = project_position_to_clipspace(source_world, source_world_64low, vec3(0.), source_commonspace);
  vec4 target = project_position_to_clipspace(target_world, target_world_64low, vec3(0.), target_commonspace);
  
  // linear interpolation of source & target to pick right coord
  float segmentIndex = positions.x;
  vec4 p = mix(source, target, segmentIndex);
  geometry.position = mix(source_commonspace, target_commonspace, segmentIndex);
  uv = positions.xy;
  geometry.uv = uv;
  geometry.pickingColor = instancePickingColors;

  // Multiply out width and clamp to limits
  float widthPixels = clamp(
    project_size_to_pixel(instanceWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels
  );

  // extrude
  vec3 offset = vec3(
    getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels),
    0.0);
  DECKGL_FILTER_SIZE(offset, geometry);
  gl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Color
  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,WSt=`#define SHADER_NAME line-layer-fragment-shader

precision highp float;

varying vec4 vColor;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,HSt=[0,0,0,255],XSt={getSourcePosition:{type:"accessor",value:e=>e.sourcePosition},getTargetPosition:{type:"accessor",value:e=>e.targetPosition},getColor:{type:"accessor",value:HSt},getWidth:{type:"accessor",value:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}};class mA extends ko{getShaders(){return super.getShaders({vs:jSt,fs:WSt,modules:[vu,gu]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1}})}updateState(t){if(super.updateState(t),t.changeFlags.extensionsChanged){var r;const{gl:n}=this.context;(r=this.state.model)===null||r===void 0||r.delete(),this.state.model=this._getModel(n),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{widthUnits:r,widthScale:n,widthMinPixels:i,widthMaxPixels:o,wrapLongitude:a}=this.props;this.state.model.setUniforms(t).setUniforms({widthUnits:Ms[r],widthScale:n,widthMinPixels:i,widthMaxPixels:o,useShortestPath:a?1:0}).draw(),a&&this.state.model.setUniforms({useShortestPath:-1}).draw()}_getModel(t){const r=[0,-1,0,0,1,0,1,-1,0,1,1,0];return new ha(t,{...this.getShaders(),id:this.props.id,geometry:new pu({drawMode:5,attributes:{positions:new Float32Array(r)}}),isInstanced:!0})}}E(mA,"layerName","LineLayer");E(mA,"defaultProps",XSt);const YSt=`#define SHADER_NAME scatterplot-layer-vertex-shader

attribute vec3 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceRadius;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform float radiusScale;
uniform float radiusMinPixels;
uniform float radiusMaxPixels;
uniform float lineWidthScale;
uniform float lineWidthMinPixels;
uniform float lineWidthMaxPixels;
uniform float stroked;
uniform bool filled;
uniform bool antialiasing;
uniform bool billboard;
uniform int radiusUnits;
uniform int lineWidthUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;


void main(void) {
  geometry.worldPosition = instancePositions;

  // Multiply out radius and clamp to limits
  outerRadiusPixels = clamp(
    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),
    radiusMinPixels, radiusMaxPixels
  );
  
  // Multiply out line width and clamp to limits
  float lineWidthPixels = clamp(
    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),
    lineWidthMinPixels, lineWidthMaxPixels
  );

  // outer radius needs to offset by half stroke width
  outerRadiusPixels += stroked * lineWidthPixels / 2.0;

  // Expand geometry to accomodate edge smoothing
  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;

  // position on the containing square in [-1, 1] space
  unitPosition = edgePadding * positions.xy;
  geometry.uv = unitPosition;
  geometry.pickingColor = instancePickingColors;

  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;
  
  if (billboard) {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = edgePadding * positions * outerRadiusPixels;
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
  }

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Apply opacity to instance color, or return instance picking color
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,qSt=`#define SHADER_NAME scatterplot-layer-fragment-shader

precision highp float;

uniform bool filled;
uniform float stroked;
uniform bool antialiasing;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;

void main(void) {
  geometry.uv = unitPosition;

  float distToCenter = length(unitPosition) * outerRadiusPixels;
  float inCircle = antialiasing ? 
    smoothedge(distToCenter, outerRadiusPixels) : 
    step(distToCenter, outerRadiusPixels);

  if (inCircle == 0.0) {
    discard;
  }

  if (stroked > 0.5) {
    float isLine = antialiasing ? 
      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
      step(innerUnitRadius * outerRadiusPixels, distToCenter);

    if (filled) {
      gl_FragColor = mix(vFillColor, vLineColor, isLine);
    } else {
      if (isLine == 0.0) {
        discard;
      }
      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
    }
  } else if (filled) {
    gl_FragColor = vFillColor;
  } else {
    discard;
  }

  gl_FragColor.a *= inCircle;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,uI=[0,0,0,255],ZSt={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:e=>e.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:uI},getLineColor:{type:"accessor",value:uI},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class yA extends ko{getShaders(){return super.getShaders({vs:YSt,fs:qSt,modules:[vu,gu]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){if(super.updateState(t),t.changeFlags.extensionsChanged){var r;const{gl:n}=this.context;(r=this.state.model)===null||r===void 0||r.delete(),this.state.model=this._getModel(n),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{radiusUnits:r,radiusScale:n,radiusMinPixels:i,radiusMaxPixels:o,stroked:a,filled:s,billboard:l,antialiasing:u,lineWidthUnits:c,lineWidthScale:f,lineWidthMinPixels:h,lineWidthMaxPixels:d}=this.props;this.state.model.setUniforms(t).setUniforms({stroked:a?1:0,filled:s,billboard:l,antialiasing:u,radiusUnits:Ms[r],radiusScale:n,radiusMinPixels:i,radiusMaxPixels:o,lineWidthUnits:Ms[c],lineWidthScale:f,lineWidthMinPixels:h,lineWidthMaxPixels:d}).draw()}_getModel(t){const r=[-1,-1,0,1,-1,0,1,1,0,-1,1,0];return new ha(t,{...this.getShaders(),id:this.props.id,geometry:new pu({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array(r)}}}),isInstanced:!0})}}E(yA,"defaultProps",ZSt);E(yA,"layerName","ScatterplotLayer");const gV={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function mV(e,t,r={}){return KSt(e,r)!==t?(QSt(e,r),!0):!1}function KSt(e,t={}){return Math.sign(JSt(e,t))}function JSt(e,t={}){const{start:r=0,end:n=e.length}=t,i=t.size||2;let o=0;for(let a=r,s=n-i;a<n;a+=i)o+=(e[a]-e[s])*(e[a+1]+e[s+1]),s=a;return o/2}function QSt(e,t){const{start:r=0,end:n=e.length,size:i=2}=t,o=(n-r)/i,a=Math.floor(o/2);for(let s=0;s<a;++s){const l=r+s*i,u=r+(o-1-s)*i;for(let c=0;c<i;++c){const f=e[l+c];e[l+c]=e[u+c],e[u+c]=f}}}function Si(e,t){const r=t.length,n=e.length;if(n>0){let i=!0;for(let o=0;o<r;o++)if(e[n-r+o]!==t[o]){i=!1;break}if(i)return!1}for(let i=0;i<r;i++)e[n+i]=t[i];return!0}function iT(e,t){const r=t.length;for(let n=0;n<r;n++)e[n]=t[n]}function d0(e,t,r,n,i=[]){const o=n+t*r;for(let a=0;a<r;a++)i[a]=e[o+a];return i}function oT(e,t,r,n,i=[]){let o,a;if(r&8)o=(n[3]-e[1])/(t[1]-e[1]),a=3;else if(r&4)o=(n[1]-e[1])/(t[1]-e[1]),a=1;else if(r&2)o=(n[2]-e[0])/(t[0]-e[0]),a=2;else if(r&1)o=(n[0]-e[0])/(t[0]-e[0]),a=0;else return null;for(let s=0;s<e.length;s++)i[s]=(a&1)===s?n[a]:o*(t[s]-e[s])+e[s];return i}function em(e,t){let r=0;return e[0]<t[0]?r|=1:e[0]>t[2]&&(r|=2),e[1]<t[1]?r|=4:e[1]>t[3]&&(r|=8),r}function yV(e,t){const{size:r=2,broken:n=!1,gridResolution:i=10,gridOffset:o=[0,0],startIndex:a=0,endIndex:s=e.length}=t||{},l=(s-a)/r;let u=[];const c=[u],f=d0(e,0,r,a);let h,d;const p=bV(f,i,o,[]),v=[];Si(u,f);for(let g=1;g<l;g++){for(h=d0(e,g,r,a,h),d=em(h,p);d;){oT(f,h,d,p,v);const m=em(v,p);m&&(oT(f,v,m,p,v),d=m),Si(u,v),iT(f,v),e3t(p,i,d),n&&u.length>r&&(u=[],c.push(u),Si(u,f)),d=em(h,p)}Si(u,h),iT(f,h)}return n?c:c[0]}const cI=0,t3t=1;function Ev(e,t){for(let r=0;r<t.length;r++)e.push(t[r]);return e}function _V(e,t=null,r){if(!e.length)return[];const{size:n=2,gridResolution:i=10,gridOffset:o=[0,0],edgeTypes:a=!1}=r||{},s=[],l=[{pos:e,types:a?new Array(e.length/n).fill(t3t):null,holes:t||[]}],u=[[],[]];let c=[];for(;l.length;){const{pos:f,types:h,holes:d}=l.shift();r3t(f,n,d[0]||f.length,u),c=bV(u[0],i,o,c);const p=em(u[1],c);if(p){let v=fI(f,h,n,0,d[0]||f.length,c,p);const g={pos:v[0].pos,types:v[0].types,holes:[]},m={pos:v[1].pos,types:v[1].types,holes:[]};l.push(g,m);for(let y=0;y<d.length;y++)v=fI(f,h,n,d[y],d[y+1]||f.length,c,p),v[0]&&(g.holes.push(g.pos.length),g.pos=Ev(g.pos,v[0].pos),a&&(g.types=Ev(g.types,v[0].types))),v[1]&&(m.holes.push(m.pos.length),m.pos=Ev(m.pos,v[1].pos),a&&(m.types=Ev(m.types,v[1].types)))}else{const v={positions:f};a&&(v.edgeTypes=h),d.length&&(v.holeIndices=d),s.push(v)}}return s}function fI(e,t,r,n,i,o,a){const s=(i-n)/r,l=[],u=[],c=[],f=[],h=[];let d,p,v;const g=d0(e,s-1,r,n);let m=Math.sign(a&8?g[1]-o[3]:g[0]-o[2]),y=t&&t[s-1],_=0,b=0;for(let T=0;T<s;T++)d=d0(e,T,r,n,d),p=Math.sign(a&8?d[1]-o[3]:d[0]-o[2]),v=t&&t[n/r+T],p&&m&&m!==p&&(oT(g,d,a,o,h),Si(l,h)&&c.push(y),Si(u,h)&&f.push(y)),p<=0?(Si(l,d)&&c.push(v),_-=p):c.length&&(c[c.length-1]=cI),p>=0?(Si(u,d)&&f.push(v),b+=p):f.length&&(f[f.length-1]=cI),iT(g,d),m=p,y=v;return[_?{pos:l,types:t&&c}:null,b?{pos:u,types:t&&f}:null]}function bV(e,t,r,n){const i=Math.floor((e[0]-r[0])/t)*t+r[0],o=Math.floor((e[1]-r[1])/t)*t+r[1];return n[0]=i,n[1]=o,n[2]=i+t,n[3]=o+t,n}function e3t(e,t,r){r&8?(e[1]+=t,e[3]+=t):r&4?(e[1]-=t,e[3]-=t):r&2?(e[0]+=t,e[2]+=t):r&1&&(e[0]-=t,e[2]-=t)}function r3t(e,t,r,n){let i=1/0,o=-1/0,a=1/0,s=-1/0;for(let l=0;l<r;l+=t){const u=e[l],c=e[l+1];i=u<i?u:i,o=u>o?u:o,a=c<a?c:a,s=c>s?c:s}return n[0][0]=i,n[0][1]=a,n[1][0]=o,n[1][1]=s,n}const n3t=85.051129;function i3t(e,t){const{size:r=2,startIndex:n=0,endIndex:i=e.length,normalize:o=!0}=t||{},a=e.slice(n,i);wV(a,r,0,i-n);const s=yV(a,{size:r,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(o)for(const l of s)SV(l,r);return s}function o3t(e,t=null,r){const{size:n=2,normalize:i=!0,edgeTypes:o=!1}=r||{};t=t||[];const a=[],s=[];let l=0,u=0;for(let f=0;f<=t.length;f++){const h=t[f]||e.length,d=u,p=a3t(e,n,l,h);for(let v=p;v<h;v++)a[u++]=e[v];for(let v=l;v<p;v++)a[u++]=e[v];wV(a,n,d,u),s3t(a,n,d,u,r==null?void 0:r.maxLatitude),l=h,s[f]=u}s.pop();const c=_V(a,s,{size:n,gridResolution:360,gridOffset:[-180,-180],edgeTypes:o});if(i)for(const f of c)SV(f.positions,n);return c}function a3t(e,t,r,n){let i=-1,o=-1;for(let a=r+1;a<n;a+=t){const s=Math.abs(e[a]);s>i&&(i=s,o=a-1)}return o}function s3t(e,t,r,n,i=n3t){const o=e[r],a=e[n-t];if(Math.abs(o-a)>180){const s=d0(e,0,t,r);s[0]+=Math.round((a-o)/360)*360,Si(e,s),s[1]=Math.sign(s[1])*i,Si(e,s),s[0]=o,Si(e,s)}}function wV(e,t,r,n){let i=e[0],o;for(let a=r;a<n;a+=t){o=e[a];const s=o-i;(s>180||s<-180)&&(o-=Math.round(s/360)*360),e[a]=i=o}}function SV(e,t){let r;const n=e.length/t;for(let o=0;o<n&&(r=e[o*t],(r+180)%360===0);o++);const i=-Math.round(r/360)*360;if(i!==0)for(let o=0;o<n;o++)e[o*t]+=i}function l3t(e,t,r,n){let i;if(Array.isArray(e[0])){const o=e.length*t;i=new Array(o);for(let a=0;a<e.length;a++)for(let s=0;s<t;s++)i[a*t+s]=e[a][s]||0}else i=e;return r?yV(i,{size:t,gridResolution:r}):n?i3t(i,{size:t}):i}const u3t=1,c3t=2,Cb=4;class f3t extends pV{constructor(t){super({...t,attributes:{positions:{size:3,padding:18,initialize:!0,type:t.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(t){return this.attributes[t]}getGeometryFromBuffer(t){return this.normalize?super.getGeometryFromBuffer(t):null}normalizeGeometry(t){return this.normalize?l3t(t,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):t}getGeometrySize(t){if(hI(t)){let n=0;for(const i of t)n+=this.getGeometrySize(i);return n}const r=this.getPathLength(t);return r<2?0:this.isClosed(t)?r<3?0:r+2:r}updateGeometryAttributes(t,r){if(r.geometrySize!==0)if(t&&hI(t))for(const n of t){const i=this.getGeometrySize(n);r.geometrySize=i,this.updateGeometryAttributes(n,r),r.vertexStart+=i}else this._updateSegmentTypes(t,r),this._updatePositions(t,r)}_updateSegmentTypes(t,r){const n=this.attributes.segmentTypes,i=t?this.isClosed(t):!1,{vertexStart:o,geometrySize:a}=r;n.fill(0,o,o+a),i?(n[o]=Cb,n[o+a-2]=Cb):(n[o]+=u3t,n[o+a-2]+=c3t),n[o+a-1]=Cb}_updatePositions(t,r){const{positions:n}=this.attributes;if(!n||!t)return;const{vertexStart:i,geometrySize:o}=r,a=new Array(3);for(let s=i,l=0;l<o;s++,l++)this.getPointOnPath(t,l,a),n[s*3]=a[0],n[s*3+1]=a[1],n[s*3+2]=a[2]}getPathLength(t){return t.length/this.positionSize}getPointOnPath(t,r,n=[]){const{positionSize:i}=this;r*i>=t.length&&(r+=1-t.length/i);const o=r*i;return n[0]=t[o],n[1]=t[o+1],n[2]=i===3&&t[o+2]||0,n}isClosed(t){if(!this.normalize)return Boolean(this.opts.loop);const{positionSize:r}=this,n=t.length-r;return t[0]===t[n]&&t[1]===t[n+1]&&(r===2||t[2]===t[n+2])}}function hI(e){return Array.isArray(e[0])}const h3t=`#define SHADER_NAME path-layer-vertex-shader

attribute vec2 positions;

attribute float instanceTypes;
attribute vec3 instanceStartPositions;
attribute vec3 instanceEndPositions;
attribute vec3 instanceLeftPositions;
attribute vec3 instanceRightPositions;
attribute vec3 instanceLeftPositions64Low;
attribute vec3 instanceStartPositions64Low;
attribute vec3 instanceEndPositions64Low;
attribute vec3 instanceRightPositions64Low;
attribute float instanceStrokeWidths;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;

uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float jointType;
uniform float capType;
uniform float miterLimit;
uniform bool billboard;
uniform int widthUnits;

uniform float opacity;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

const float EPSILON = 0.001;
const vec3 ZERO_OFFSET = vec3(0.0);

float flipIfTrue(bool flag) {
  return -(float(flag) * 2. - 1.);
}

// calculate line join positions
vec3 lineJoin(
  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,
  vec2 width
) {
  bool isEnd = positions.x > 0.0;
  // side of the segment - -1: left, 0: center, 1: right
  float sideOfPath = positions.y;
  float isJoint = float(sideOfPath == 0.0);

  vec3 deltaA3 = (currPoint - prevPoint);
  vec3 deltaB3 = (nextPoint - currPoint);

  mat3 rotationMatrix;
  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);
  if (needsRotation) {
    deltaA3 = deltaA3 * rotationMatrix;
    deltaB3 = deltaB3 * rotationMatrix;
  }
  vec2 deltaA = deltaA3.xy / width;
  vec2 deltaB = deltaB3.xy / width;

  float lenA = length(deltaA);
  float lenB = length(deltaB);

  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);
  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);

  vec2 perpA = vec2(-dirA.y, dirA.x);
  vec2 perpB = vec2(-dirB.y, dirB.x);

  // tangent of the corner
  vec2 tangent = dirA + dirB;
  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;
  // direction of the corner
  vec2 miterVec = vec2(-tangent.y, tangent.x);
  // direction of the segment
  vec2 dir = isEnd ? dirA : dirB;
  // direction of the extrusion
  vec2 perp = isEnd ? perpA : perpB;
  // length of the segment
  float L = isEnd ? lenA : lenB;

  // A = angle of the corner
  float sinHalfA = abs(dot(miterVec, perp));
  float cosHalfA = abs(dot(dirA, miterVec));

  // -1: right, 1: left
  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);

  // relative position to the corner:
  // -1: inside (smaller side of the angle)
  // 0: center
  // 1: outside (bigger side of the angle)
  float cornerPosition = sideOfPath * turnDirection;

  float miterSize = 1.0 / max(sinHalfA, EPSILON);
  // trim if inside corner extends further than the line segment
  miterSize = mix(
    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),
    miterSize,
    step(0.0, cornerPosition)
  );

  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))
    * (sideOfPath + isJoint * turnDirection);

  // special treatment for start cap and end cap
  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));
  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));
  bool isCap = isStartCap || isEndCap;

  // extend out a triangle to envelope the round cap
  if (isCap) {
    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);
    vJointType = capType;
  } else {
    vJointType = jointType;
  }

  // Generate variables for fragment shader
  vPathLength = L;
  vCornerOffset = offsetVec;
  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);
  vMiterLength = isCap ? isJoint : vMiterLength;

  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);
  vPathPosition = vec2(
    dot(offsetFromStartOfPath, perp),
    dot(offsetFromStartOfPath, dir)
  );
  geometry.uv = vPathPosition;

  float isValid = step(instanceTypes, 3.5);
  vec3 offset = vec3(offsetVec * width * isValid, 0.0);

  if (needsRotation) {
    offset = rotationMatrix * offset;
  }
  return currPoint + offset;
}

// In clipspace extrusion, if a line extends behind the camera, clip it to avoid visual artifacts
void clipLine(inout vec4 position, vec4 refPosition) {
  if (position.w < EPSILON) {
    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);
    position = refPosition + (position - refPosition) * r;
  }
}

void main() {
  geometry.pickingColor = instancePickingColors;

  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);

  float isEnd = positions.x;

  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);
  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);

  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);
  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);

  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);
  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);

  geometry.worldPosition = currPosition;
  vec2 widthPixels = vec2(clamp(
    project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels) / 2.0);
  vec3 width;

  if (billboard) {
    // Extrude in clipspace
    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);
    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);
    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);

    clipLine(prevPositionScreen, currPositionScreen);
    clipLine(nextPositionScreen, currPositionScreen);
    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));

    width = vec3(widthPixels, 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec3 pos = lineJoin(
      prevPositionScreen.xyz / prevPositionScreen.w,
      currPositionScreen.xyz / currPositionScreen.w,
      nextPositionScreen.xyz / nextPositionScreen.w,
      project_pixel_size_to_clipspace(width.xy)
    );

    gl_Position = vec4(pos * currPositionScreen.w, currPositionScreen.w);
  } else {
    // Extrude in commonspace
    prevPosition = project_position(prevPosition, prevPosition64Low);
    currPosition = project_position(currPosition, currPosition64Low);
    nextPosition = project_position(nextPosition, nextPosition64Low);

    width = vec3(project_pixel_size(widthPixels), 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec4 pos = vec4(
      lineJoin(prevPosition, currPosition, nextPosition, width.xy),
      1.0);
    geometry.position = pos;
    gl_Position = project_common_position_to_clipspace(pos);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,d3t=`#define SHADER_NAME path-layer-fragment-shader

precision highp float;

uniform float miterLimit;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
/*
 * vPathPosition represents the relative coordinates of the current fragment on the path segment.
 * vPathPosition.x - position along the width of the path, between [-1, 1]. 0 is the center line.
 * vPathPosition.y - position along the length of the path, between [0, L / width].
 */
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

void main(void) {
  geometry.uv = vPathPosition;

  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {
    // if joint is rounded, test distance from the corner
    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {
      discard;
    }
    // trim miter
    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {
      discard;
    }
  }
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,TV=[0,0,0,255],p3t={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:e=>e.path},getColor:{type:"accessor",value:TV},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},Mb={enter:(e,t)=>t.length?t.subarray(t.length-e.length):e};class _A extends ko{constructor(...t){super(...t),E(this,"state",void 0)}getShaders(){return super.getShaders({vs:h3t,fs:d3t,modules:[vu,gu]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:Mb,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:Mb,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:Mb,defaultValue:TV},instancePickingColors:{size:3,type:5121,accessor:(n,{index:i,target:o})=>this.encodePickingColor(n&&n.__source?n.__source.index:i,o)}}),this.setState({pathTesselator:new f3t({fp64:this.use64bitPositions()})})}updateState(t){super.updateState(t);const{props:r,changeFlags:n}=t,i=this.getAttributeManager();if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPath)){const{pathTesselator:s}=this.state,l=r.data.attributes||{};s.updateGeometry({data:r.data,geometryBuffer:l.getPath,buffers:l,normalize:!r._pathType,loop:r._pathType==="loop",getGeometry:r.getPath,positionFormat:r.positionFormat,wrapLongitude:r.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:n.dataChanged}),this.setState({numInstances:s.instanceCount,startIndices:s.vertexStarts}),n.dataChanged||i.invalidateAll()}if(n.extensionsChanged){var a;const{gl:s}=this.context;(a=this.state.model)===null||a===void 0||a.delete(),this.state.model=this._getModel(s),i.invalidateAll()}}getPickingInfo(t){const r=super.getPickingInfo(t),{index:n}=r,{data:i}=this.props;return i[0]&&i[0].__source&&(r.object=i.find(o=>o.__source.index===n)),r}disablePickingIndex(t){const{data:r}=this.props;if(r[0]&&r[0].__source)for(let n=0;n<r.length;n++)r[n].__source.index===t&&this._disablePickingIndex(n);else this._disablePickingIndex(t)}draw({uniforms:t}){const{jointRounded:r,capRounded:n,billboard:i,miterLimit:o,widthUnits:a,widthScale:s,widthMinPixels:l,widthMaxPixels:u}=this.props;this.state.model.setUniforms(t).setUniforms({jointType:Number(r),capType:Number(n),billboard:i,widthUnits:Ms[a],widthScale:s,miterLimit:o,widthMinPixels:l,widthMaxPixels:u}).draw()}_getModel(t){const r=[0,1,2,1,4,2,1,3,4,3,5,4],n=[0,0,0,-1,0,1,1,-1,1,1,1,0];return new ha(t,{...this.getShaders(),id:this.props.id,geometry:new pu({drawMode:4,attributes:{indices:new Uint16Array(r),positions:{value:new Float32Array(n),size:2}}}),isInstanced:!0})}calculatePositions(t){const{pathTesselator:r}=this.state;t.startIndices=r.vertexStarts,t.value=r.get("positions")}calculateSegmentTypes(t){const{pathTesselator:r}=this.state;t.startIndices=r.vertexStarts,t.value=r.get("segmentTypes")}}E(_A,"defaultProps",p3t);E(_A,"layerName","PathLayer");var bA={exports:{}};bA.exports=My;bA.exports.default=My;function My(e,t,r){r=r||2;var n=t&&t.length,i=n?t[0]*r:e.length,o=PV(e,0,i,r,!0),a=[];if(!o||o.next===o.prev)return a;var s,l,u,c,f,h,d;if(n&&(o=_3t(e,t,o,r)),e.length>80*r){s=u=e[0],l=c=e[1];for(var p=r;p<i;p+=r)f=e[p],h=e[p+1],f<s&&(s=f),h<l&&(l=h),f>u&&(u=f),h>c&&(c=h);d=Math.max(u-s,c-l),d=d!==0?32767/d:0}return p0(o,a,r,s,l,d,0),a}function PV(e,t,r,n,i){var o,a;if(i===lT(e,t,r,n)>0)for(o=t;o<r;o+=n)a=dI(o,e[o],e[o+1],a);else for(o=r-n;o>=t;o-=n)a=dI(o,e[o],e[o+1],a);return a&&ky(a,a.next)&&(g0(a),a=a.next),a}function ru(e,t){if(!e)return e;t||(t=e);var r=e,n;do if(n=!1,!r.steiner&&(ky(r,r.next)||Ue(r.prev,r,r.next)===0)){if(g0(r),r=t=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==t);return t}function p0(e,t,r,n,i,o,a){if(!!e){!a&&o&&P3t(e,n,i,o);for(var s=e,l,u;e.prev!==e.next;){if(l=e.prev,u=e.next,o?g3t(e,n,i,o):v3t(e)){t.push(l.i/r|0),t.push(e.i/r|0),t.push(u.i/r|0),g0(e),e=u.next,s=u.next;continue}if(e=u,e===s){a?a===1?(e=m3t(ru(e),t,r),p0(e,t,r,n,i,o,2)):a===2&&y3t(e,t,r,n,i,o):p0(ru(e),t,r,n,i,o,1);break}}}}function v3t(e){var t=e.prev,r=e,n=e.next;if(Ue(t,r,n)>=0)return!1;for(var i=t.x,o=r.x,a=n.x,s=t.y,l=r.y,u=n.y,c=i<o?i<a?i:a:o<a?o:a,f=s<l?s<u?s:u:l<u?l:u,h=i>o?i>a?i:a:o>a?o:a,d=s>l?s>u?s:u:l>u?l:u,p=n.next;p!==t;){if(p.x>=c&&p.x<=h&&p.y>=f&&p.y<=d&&bc(i,s,o,l,a,u,p.x,p.y)&&Ue(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function g3t(e,t,r,n){var i=e.prev,o=e,a=e.next;if(Ue(i,o,a)>=0)return!1;for(var s=i.x,l=o.x,u=a.x,c=i.y,f=o.y,h=a.y,d=s<l?s<u?s:u:l<u?l:u,p=c<f?c<h?c:h:f<h?f:h,v=s>l?s>u?s:u:l>u?l:u,g=c>f?c>h?c:h:f>h?f:h,m=aT(d,p,t,r,n),y=aT(v,g,t,r,n),_=e.prevZ,b=e.nextZ;_&&_.z>=m&&b&&b.z<=y;){if(_.x>=d&&_.x<=v&&_.y>=p&&_.y<=g&&_!==i&&_!==a&&bc(s,c,l,f,u,h,_.x,_.y)&&Ue(_.prev,_,_.next)>=0||(_=_.prevZ,b.x>=d&&b.x<=v&&b.y>=p&&b.y<=g&&b!==i&&b!==a&&bc(s,c,l,f,u,h,b.x,b.y)&&Ue(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;_&&_.z>=m;){if(_.x>=d&&_.x<=v&&_.y>=p&&_.y<=g&&_!==i&&_!==a&&bc(s,c,l,f,u,h,_.x,_.y)&&Ue(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;b&&b.z<=y;){if(b.x>=d&&b.x<=v&&b.y>=p&&b.y<=g&&b!==i&&b!==a&&bc(s,c,l,f,u,h,b.x,b.y)&&Ue(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function m3t(e,t,r){var n=e;do{var i=n.prev,o=n.next.next;!ky(i,o)&&EV(i,n,n.next,o)&&v0(i,o)&&v0(o,i)&&(t.push(i.i/r|0),t.push(n.i/r|0),t.push(o.i/r|0),g0(n),g0(n.next),n=e=o),n=n.next}while(n!==e);return ru(n)}function y3t(e,t,r,n,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&C3t(a,s)){var l=AV(a,s);a=ru(a,a.next),l=ru(l,l.next),p0(a,t,r,n,i,o,0),p0(l,t,r,n,i,o,0);return}s=s.next}a=a.next}while(a!==e)}function _3t(e,t,r,n){var i=[],o,a,s,l,u;for(o=0,a=t.length;o<a;o++)s=t[o]*n,l=o<a-1?t[o+1]*n:e.length,u=PV(e,s,l,n,!1),u===u.next&&(u.steiner=!0),i.push(A3t(u));for(i.sort(b3t),o=0;o<i.length;o++)r=w3t(i[o],r);return r}function b3t(e,t){return e.x-t.x}function w3t(e,t){var r=S3t(e,t);if(!r)return t;var n=AV(r,e);return ru(n,n.next),ru(r,r.next)}function S3t(e,t){var r=t,n=e.x,i=e.y,o=-1/0,a;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var s=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&s>o&&(o=s,a=r.x<r.next.x?r:r.next,s===n))return a}r=r.next}while(r!==t);if(!a)return null;var l=a,u=a.x,c=a.y,f=1/0,h;r=a;do n>=r.x&&r.x>=u&&n!==r.x&&bc(i<c?n:o,i,u,c,i<c?o:n,i,r.x,r.y)&&(h=Math.abs(i-r.y)/(n-r.x),v0(r,e)&&(h<f||h===f&&(r.x>a.x||r.x===a.x&&T3t(a,r)))&&(a=r,f=h)),r=r.next;while(r!==l);return a}function T3t(e,t){return Ue(e.prev,e,t.prev)<0&&Ue(t.next,e,e.next)<0}function P3t(e,t,r,n){var i=e;do i.z===0&&(i.z=aT(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,E3t(i)}function E3t(e){var t,r,n,i,o,a,s,l,u=1;do{for(r=e,e=null,o=null,a=0;r;){for(a++,n=r,s=0,t=0;t<u&&(s++,n=n.nextZ,!!n);t++);for(l=u;s>0||l>0&&n;)s!==0&&(l===0||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,u*=2}while(a>1);return e}function aT(e,t,r,n,i){return e=(e-r)*i|0,t=(t-n)*i|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function A3t(e){var t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function bc(e,t,r,n,i,o,a,s){return(i-a)*(t-s)>=(e-a)*(o-s)&&(e-a)*(n-s)>=(r-a)*(t-s)&&(r-a)*(o-s)>=(i-a)*(n-s)}function C3t(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!M3t(e,t)&&(v0(e,t)&&v0(t,e)&&k3t(e,t)&&(Ue(e.prev,e,t.prev)||Ue(e,t.prev,t))||ky(e,t)&&Ue(e.prev,e,e.next)>0&&Ue(t.prev,t,t.next)>0)}function Ue(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function ky(e,t){return e.x===t.x&&e.y===t.y}function EV(e,t,r,n){var i=Cv(Ue(e,t,r)),o=Cv(Ue(e,t,n)),a=Cv(Ue(r,n,e)),s=Cv(Ue(r,n,t));return!!(i!==o&&a!==s||i===0&&Av(e,r,t)||o===0&&Av(e,n,t)||a===0&&Av(r,e,n)||s===0&&Av(r,t,n))}function Av(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function Cv(e){return e>0?1:e<0?-1:0}function M3t(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&EV(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function v0(e,t){return Ue(e.prev,e,e.next)<0?Ue(e,t,e.next)>=0&&Ue(e,e.prev,t)>=0:Ue(e,t,e.prev)<0||Ue(e,e.next,t)<0}function k3t(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==e);return n}function AV(e,t){var r=new sT(e.i,e.x,e.y),n=new sT(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function dI(e,t,r,n){var i=new sT(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function g0(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function sT(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}My.deviation=function(e,t,r,n){var i=t&&t.length,o=i?t[0]*r:e.length,a=Math.abs(lT(e,0,o,r));if(i)for(var s=0,l=t.length;s<l;s++){var u=t[s]*r,c=s<l-1?t[s+1]*r:e.length;a-=Math.abs(lT(e,u,c,r))}var f=0;for(s=0;s<n.length;s+=3){var h=n[s]*r,d=n[s+1]*r,p=n[s+2]*r;f+=Math.abs((e[h]-e[p])*(e[d+1]-e[h+1])-(e[h]-e[d])*(e[p+1]-e[h+1]))}return a===0&&f===0?0:Math.abs((f-a)/a)};function lT(e,t,r,n){for(var i=0,o=t,a=r-n;o<r;o+=n)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}My.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)r.vertices.push(e[i][o][a]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r};const Mv=gV.CLOCKWISE,pI=gV.COUNTER_CLOCKWISE,cs={isClosed:!0};function x3t(e){if(e=e&&e.positions||e,!Array.isArray(e)&&!ArrayBuffer.isView(e))throw new Error("invalid polygon")}function Qh(e){return"positions"in e?e.positions:e}function rm(e){return"holeIndices"in e?e.holeIndices:null}function L3t(e){return Array.isArray(e[0])}function I3t(e){return e.length>=1&&e[0].length>=2&&Number.isFinite(e[0][0])}function O3t(e){const t=e[0],r=e[e.length-1];return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]}function R3t(e,t,r,n){for(let i=0;i<t;i++)if(e[r+i]!==e[n-t+i])return!1;return!0}function vI(e,t,r,n,i){let o=t;const a=r.length;for(let s=0;s<a;s++)for(let l=0;l<n;l++)e[o++]=r[s][l]||0;if(!O3t(r))for(let s=0;s<n;s++)e[o++]=r[0][s]||0;return cs.start=t,cs.end=o,cs.size=n,mV(e,i,cs),o}function gI(e,t,r,n,i=0,o,a){o=o||r.length;const s=o-i;if(s<=0)return t;let l=t;for(let u=0;u<s;u++)e[l++]=r[i+u];if(!R3t(r,n,i,o))for(let u=0;u<n;u++)e[l++]=r[i+u];return cs.start=t,cs.end=l,cs.size=n,mV(e,a,cs),l}function D3t(e,t){x3t(e);const r=[],n=[];if("positions"in e){const{positions:i,holeIndices:o}=e;if(o){let a=0;for(let s=0;s<=o.length;s++)a=gI(r,a,i,t,o[s-1],o[s],s===0?Mv:pI),n.push(a);return n.pop(),{positions:r,holeIndices:n}}e=i}if(!L3t(e))return gI(r,0,e,t,0,r.length,Mv),r;if(!I3t(e)){let i=0;for(const[o,a]of e.entries())i=vI(r,i,a,t,o===0?Mv:pI),n.push(i);return n.pop(),{positions:r,holeIndices:n}}return vI(r,0,e,t,Mv),r}function N3t(e,t,r){let n=rm(e);n&&(n=n.map(o=>o/t));let i=Qh(e);if(r){const o=i.length;i=i.slice();const a=[];for(let s=0;s<o;s+=t){a[0]=i[s],a[1]=i[s+1];const l=r(a);i[s]=l[0],i[s+1]=l[1]}}return bA.exports(i,n,t)}class F3t extends pV{constructor(t){const{fp64:r,IndexType:n=Uint32Array}=t;super({...t,attributes:{positions:{size:3,type:r?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:n,size:1}}})}get(t){const{attributes:r}=this;return t==="indices"?r.indices&&r.indices.subarray(0,this.vertexCount):r[t]}updateGeometry(t){super.updateGeometry(t);const r=this.buffers.indices;if(r)this.vertexCount=(r.value||r).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(t){if(this.normalize){const r=D3t(t,this.positionSize);return this.opts.resolution?_V(Qh(r),rm(r),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?o3t(Qh(r),rm(r),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):r}return t}getGeometrySize(t){if(mI(t)){let r=0;for(const n of t)r+=this.getGeometrySize(n);return r}return Qh(t).length/this.positionSize}getGeometryFromBuffer(t){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(t):null}updateGeometryAttributes(t,r){if(t&&mI(t))for(const n of t){const i=this.getGeometrySize(n);r.geometrySize=i,this.updateGeometryAttributes(n,r),r.vertexStart+=i,r.indexStart=this.indexStarts[r.geometryIndex+1]}else this._updateIndices(t,r),this._updatePositions(t,r),this._updateVertexValid(t,r)}_updateIndices(t,{geometryIndex:r,vertexStart:n,indexStart:i}){const{attributes:o,indexStarts:a,typedArrayManager:s}=this;let l=o.indices;if(!l||!t)return;let u=i;const c=N3t(t,this.positionSize,this.opts.preproject);l=s.allocate(l,i+c.length,{copy:!0});for(let f=0;f<c.length;f++)l[u++]=c[f]+n;a[r+1]=i+c.length,o.indices=l}_updatePositions(t,{vertexStart:r,geometrySize:n}){const{attributes:{positions:i},positionSize:o}=this;if(!i||!t)return;const a=Qh(t);for(let s=r,l=0;l<n;s++,l++){const u=a[l*o],c=a[l*o+1],f=o>2?a[l*o+2]:0;i[s*3]=u,i[s*3+1]=c,i[s*3+2]=f}}_updateVertexValid(t,{vertexStart:r,geometrySize:n}){const{positionSize:i}=this,o=this.attributes.vertexValid,a=t&&rm(t);if(t&&t.edgeTypes?o.set(t.edgeTypes,r):o.fill(1,r,r+n),a)for(let s=0;s<a.length;s++)o[r+a[s]/i-1]=0;o[r+n-1]=0}}function mI(e){return Array.isArray(e)&&e.length>0&&!Number.isFinite(e[0])}const CV=`
attribute vec2 vertexPositions;
attribute float vertexValid;

uniform bool extruded;
uniform bool isWireframe;
uniform float elevationScale;
uniform float opacity;

varying vec4 vColor;

struct PolygonProps {
  vec4 fillColors;
  vec4 lineColors;
  vec3 positions;
  vec3 nextPositions;
  vec3 pickingColors;
  vec3 positions64Low;
  vec3 nextPositions64Low;
  float elevations;
};

vec3 project_offset_normal(vec3 vector) {
  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * project_uCommonUnitsPerWorldUnit);
  }
  return project_normal(vector);
}

void calculatePosition(PolygonProps props) {
#ifdef IS_SIDE_VERTEX
  if(vertexValid < 0.5){
    gl_Position = vec4(0.);
    return;
  }
#endif

  vec3 pos;
  vec3 pos64Low;
  vec3 normal;
  vec4 colors = isWireframe ? props.lineColors : props.fillColors;

  geometry.worldPosition = props.positions;
  geometry.worldPositionAlt = props.nextPositions;
  geometry.pickingColor = props.pickingColors;

#ifdef IS_SIDE_VERTEX
  pos = mix(props.positions, props.nextPositions, vertexPositions.x);
  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);
#else
  pos = props.positions;
  pos64Low = props.positions64Low;
#endif

  if (extruded) {
    pos.z += props.elevations * vertexPositions.y * elevationScale;
  }
  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  if (extruded) {
  #ifdef IS_SIDE_VERTEX
    normal = vec3(
      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),
      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),
      0.0);
    normal = project_offset_normal(normal);
  #else
    normal = project_normal(vec3(0.0, 0.0, 1.0));
  #endif
    geometry.normal = normal;
    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);
    vColor = vec4(lightColor, colors.a * opacity);
  } else {
    vColor = vec4(colors.rgb, colors.a * opacity);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,B3t=`#define SHADER_NAME solid-polygon-layer-vertex-shader

attribute vec3 positions;
attribute vec3 positions64Low;
attribute float elevations;
attribute vec4 fillColors;
attribute vec4 lineColors;
attribute vec3 pickingColors;

`.concat(CV,`

void main(void) {
  PolygonProps props;

  props.positions = positions;
  props.positions64Low = positions64Low;
  props.elevations = elevations;
  props.fillColors = fillColors;
  props.lineColors = lineColors;
  props.pickingColors = pickingColors;

  calculatePosition(props);
}
`),$3t=`#define SHADER_NAME solid-polygon-layer-vertex-shader-side
#define IS_SIDE_VERTEX


attribute vec3 instancePositions;
attribute vec3 nextPositions;
attribute vec3 instancePositions64Low;
attribute vec3 nextPositions64Low;
attribute float instanceElevations;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

`.concat(CV,`

void main(void) {
  PolygonProps props;

  #if RING_WINDING_ORDER_CW == 1
    props.positions = instancePositions;
    props.positions64Low = instancePositions64Low;
    props.nextPositions = nextPositions;
    props.nextPositions64Low = nextPositions64Low;
  #else
    props.positions = nextPositions;
    props.positions64Low = nextPositions64Low;
    props.nextPositions = instancePositions;
    props.nextPositions64Low = instancePositions64Low;
  #endif
  props.elevations = instanceElevations;
  props.fillColors = instanceFillColors;
  props.lineColors = instanceLineColors;
  props.pickingColors = instancePickingColors;

  calculatePosition(props);
}
`),z3t=`#define SHADER_NAME solid-polygon-layer-fragment-shader

precision highp float;

varying vec4 vColor;

void main(void) {
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,c1=[0,0,0,255],V3t={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:e=>e.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:c1},getLineColor:{type:"accessor",value:c1},material:!0},kv={enter:(e,t)=>t.length?t.subarray(t.length-e.length):e};class wA extends ko{constructor(...t){super(...t),E(this,"state",void 0)}getShaders(t){return super.getShaders({vs:t==="top"?B3t:$3t,fs:z3t,defines:{RING_WINDING_ORDER_CW:!this.props._normalize&&this.props._windingOrder==="CCW"?0:1},modules:[vu,Kyt,gu]})}get wrapLongitude(){return!1}initializeState(){const{gl:t,viewport:r}=this.context;let{coordinateSystem:n}=this.props;r.isGeospatial&&n===ue.DEFAULT&&(n=ue.LNGLAT),this.setState({numInstances:0,polygonTesselator:new F3t({preproject:n===ue.LNGLAT&&r.projectFlat.bind(r),fp64:this.use64bitPositions(),IndexType:!t||KE(t,Be.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});const i=this.getAttributeManager(),o=!0;i.remove(["instancePickingColors"]),i.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:o},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:kv,accessor:"getPolygon",update:this.calculatePositions,noAlloc:o,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:o},elevations:{size:1,transition:kv,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:kv,accessor:"getFillColor",defaultValue:c1,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:kv,accessor:"getLineColor",defaultValue:c1,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:(a,{index:s,target:l})=>this.encodePickingColor(a&&a.__source?a.__source.index:s,l),shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}getPickingInfo(t){const r=super.getPickingInfo(t),{index:n}=r,{data:i}=this.props;return i[0]&&i[0].__source&&(r.object=i.find(o=>o.__source.index===n)),r}disablePickingIndex(t){const{data:r}=this.props;if(r[0]&&r[0].__source)for(let n=0;n<r.length;n++)r[n].__source.index===t&&this._disablePickingIndex(n);else this._disablePickingIndex(t)}draw({uniforms:t}){const{extruded:r,filled:n,wireframe:i,elevationScale:o}=this.props,{topModel:a,sideModel:s,polygonTesselator:l}=this.state,u={...t,extruded:Boolean(r),elevationScale:o};s&&(s.setInstanceCount(l.instanceCount-1),s.setUniforms(u),i&&(s.setDrawMode(3),s.setUniforms({isWireframe:!0}).draw()),n&&(s.setDrawMode(6),s.setUniforms({isWireframe:!1}).draw())),a&&(a.setVertexCount(l.vertexCount),a.setUniforms(u).draw())}updateState(t){super.updateState(t),this.updateGeometry(t);const{props:r,oldProps:n,changeFlags:i}=t,o=this.getAttributeManager();if(i.extensionsChanged||r.filled!==n.filled||r.extruded!==n.extruded){var s;(s=this.state.models)===null||s===void 0||s.forEach(l=>l.delete()),this.setState(this._getModels(this.context.gl)),o.invalidateAll()}}updateGeometry({props:t,oldProps:r,changeFlags:n}){if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon)){const{polygonTesselator:o}=this.state,a=t.data.attributes||{};o.updateGeometry({data:t.data,normalize:t._normalize,geometryBuffer:a.getPolygon,buffers:a,getGeometry:t.getPolygon,positionFormat:t.positionFormat,wrapLongitude:t.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:n.dataChanged}),this.setState({numInstances:o.instanceCount,startIndices:o.vertexStarts}),n.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(t){const{id:r,filled:n,extruded:i}=this.props;let o,a;if(n){const s=this.getShaders("top");s.defines.NON_INSTANCED_MODEL=1,o=new ha(t,{...s,id:"".concat(r,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0})}return i&&(a=new ha(t,{...this.getShaders("side"),id:"".concat(r,"-side"),geometry:new pu({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}),a.userData.excludeAttributes={indices:!0}),{models:[a,o].filter(Boolean),topModel:o,sideModel:a}}calculateIndices(t){const{polygonTesselator:r}=this.state;t.startIndices=r.indexStarts,t.value=r.get("indices")}calculatePositions(t){const{polygonTesselator:r}=this.state;t.startIndices=r.vertexStarts,t.value=r.get("positions")}calculateVertexValid(t){t.value=this.state.polygonTesselator.get("vertexValid")}}E(wA,"defaultProps",V3t);E(wA,"layerName","SolidPolygonLayer");function U3t({data:e,getIndex:t,dataRange:r,replace:n}){const{startRow:i=0,endRow:o=1/0}=r,a=e.length;let s=a,l=a;for(let h=0;h<a;h++){const d=t(e[h]);if(s>h&&d>=i&&(s=h),d>=o){l=h;break}}let u=s;const f=l-s!==n.length?e.slice(l):void 0;for(let h=0;h<n.length;h++)e[u++]=n[h];if(f){for(let h=0;h<f.length;h++)e[u++]=f[h];e.length=u}return{startRow:s,endRow:s+n.length}}function G3t(e,t){if(!e)return null;const r="startIndices"in e?e.startIndices[t]:t,n=e.featureIds.value[r];return r!==-1?j3t(e,n,r):null}function j3t(e,t,r){const n={properties:{...e.properties[t]}};for(const i in e.numericProps)n.properties[i]=e.numericProps[i].value[r];return n}function W3t(e,t){const r={points:null,lines:null,polygons:null};for(const n in r){const i=e[n].globalFeatureIds.value;r[n]=new Uint8ClampedArray(i.length*3);const o=[];for(let a=0;a<i.length;a++)t(i[a],o),r[n][a*3+0]=o[0],r[n][a*3+1]=o[1],r[n][a*3+2]=o[2]}return r}const H3t=`#define SHADER_NAME multi-icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float gamma;
uniform bool sdf;
uniform float alphaCutoff;
uniform float buffer;
uniform float outlineBuffer;
uniform vec4 outlineColor;

varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  if (!picking_uActive) {
    float alpha = texture2D(iconsTexture, vTextureCoords).a;
    vec4 color = vColor;

    // if enable sdf (signed distance fields)
    if (sdf) {
      float distance = alpha;
      alpha = smoothstep(buffer - gamma, buffer + gamma, distance);

      if (outlineBuffer > 0.0) {
        float inFill = alpha;
        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);
        color = mix(outlineColor, vColor, inFill);
        alpha = inBorder;
      }
    }

    // Take the global opacity and the alpha from color into account for the alpha component
    float a = alpha * color.a;
    
    if (a < alphaCutoff) {
      discard;
    }

    gl_FragColor = vec4(color.rgb, a * opacity);
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,yI=192/256,_I=[],X3t={getIconOffsets:{type:"accessor",value:e=>e.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}};class SA extends X0{constructor(...t){super(...t),E(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:H3t}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(r,{index:n,target:i})=>this.encodePickingColor(n,i)}})}updateState(t){super.updateState(t);const{props:r,oldProps:n}=t;let{outlineColor:i}=r;i!==n.outlineColor&&(i=i.map(o=>o/255),i[3]=Number.isFinite(i[3])?i[3]:1,this.setState({outlineColor:i})),!r.sdf&&r.outlineWidth&&Wt.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(t){const{sdf:r,smoothing:n,outlineWidth:i}=this.props,{outlineColor:o}=this.state;t.uniforms={...t.uniforms,buffer:yI,outlineBuffer:i?Math.max(n,yI*(1-i)):-1,gamma:n,sdf:Boolean(r),outlineColor:o},super.draw(t)}getInstanceOffset(t){return t?Array.from(t).flatMap(r=>super.getInstanceOffset(r)):_I}getInstanceColorMode(t){return 1}getInstanceIconFrame(t){return t?Array.from(t).flatMap(r=>super.getInstanceIconFrame(r)):_I}}E(SA,"defaultProps",X3t);E(SA,"layerName","MultiIconLayer");var TA={exports:{}};TA.exports=Y0;TA.exports.default=Y0;var Dc=1e20;function Y0(e,t,r,n,i,o){this.fontSize=e||24,this.buffer=t===void 0?3:t,this.cutoff=n||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=r||8;var a=this.size=this.fontSize+this.buffer*2,s=a+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Y3t(e,t,r,n,i,o,a){o.fill(Dc,0,t*r),a.fill(0,0,t*r);for(var s=(t-n)/2,l=0;l<i;l++)for(var u=0;u<n;u++){var c=(l+s)*t+u+s,f=e.data[4*(l*n+u)+3]/255;if(f===1)o[c]=0,a[c]=Dc;else if(f===0)o[c]=Dc,a[c]=0;else{var h=Math.max(0,.5-f),d=Math.max(0,f-.5);o[c]=h*h,a[c]=d*d}}}function q3t(e,t,r,n,i,o,a){for(var s=0;s<t*r;s++){var l=Math.sqrt(n[s])-Math.sqrt(i[s]);e[s]=Math.round(255-255*(l/o+a))}}Y0.prototype._draw=function(e,t){var r=this.ctx.measureText(e),n=r.width,i=2*this.buffer,o,a,s,l,u,c,f,h;t&&this.useMetrics?(u=Math.floor(r.actualBoundingBoxAscent),h=this.buffer+Math.ceil(r.actualBoundingBoxAscent),c=this.buffer,f=this.buffer,a=Math.min(this.size,Math.ceil(r.actualBoundingBoxRight-r.actualBoundingBoxLeft)),l=Math.min(this.size-c,Math.ceil(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)),o=a+i,s=l+i,this.ctx.textBaseline="alphabetic"):(o=a=this.size,s=l=this.size,u=19*this.fontSize/24,c=f=0,h=this.middle,this.ctx.textBaseline="middle");var d;a&&l&&(this.ctx.clearRect(f,c,a,l),this.ctx.fillText(e,this.buffer,h),d=this.ctx.getImageData(f,c,a,l));var p=new Uint8ClampedArray(o*s);return Y3t(d,o,s,a,l,this.gridOuter,this.gridInner),bI(this.gridOuter,o,s,this.f,this.v,this.z),bI(this.gridInner,o,s,this.f,this.v,this.z),q3t(p,o,s,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:p,metrics:{width:a,height:l,sdfWidth:o,sdfHeight:s,top:u,left:0,advance:n}}};Y0.prototype.draw=function(e){return this._draw(e,!1).data};Y0.prototype.drawWithMetrics=function(e){return this._draw(e,!0)};function bI(e,t,r,n,i,o){for(var a=0;a<t;a++)wI(e,a,t,r,n,i,o);for(var s=0;s<r;s++)wI(e,s*t,1,t,n,i,o)}function wI(e,t,r,n,i,o,a){var s,l,u,c;for(o[0]=0,a[0]=-Dc,a[1]=Dc,s=0;s<n;s++)i[s]=e[t+s*r];for(s=1,l=0,u=0;s<n;s++){do c=o[l],u=(i[s]-i[c]+s*s-c*c)/(s-c)/2;while(u<=a[l]&&--l>-1);l++,o[l]=s,a[l]=u,a[l+1]=Dc}for(s=0,l=0;s<n;s++){for(;a[l+1]<s;)l++;c=o[l],e[t+s*r]=i[c]+(s-c)*(s-c)}}const Z3t=32,K3t=[];function J3t(e){return Math.pow(2,Math.ceil(Math.log2(e)))}function Q3t({characterSet:e,getFontWidth:t,fontHeight:r,buffer:n,maxCanvasWidth:i,mapping:o={},xOffset:a=0,yOffset:s=0}){let l=0,u=a;for(const f of e)if(!o[f]){const h=t(f);u+h+n*2>i&&(u=0,l++),o[f]={x:u+n,y:s+l*(r+n*2)+n,width:h,height:r},u+=h+n*2}const c=r+n*2;return{mapping:o,xOffset:u,yOffset:s+l*c,canvasHeight:J3t(s+(l+1)*c)}}function MV(e,t,r,n){let i=0;for(let a=t;a<r;a++){var o;const s=e[a];i+=((o=n[s])===null||o===void 0?void 0:o.width)||0}return i}function kV(e,t,r,n,i,o){let a=t,s=0;for(let l=t;l<r;l++){const u=MV(e,l,l+1,i);s+u>n&&(a<l&&o.push(l),a=l,s=0),s+=u}return s}function tTt(e,t,r,n,i,o){let a=t,s=t,l=t,u=0;for(let c=t;c<r;c++)if((e[c]===" "||e[c+1]===" "||c+1===r)&&(l=c+1),l>s){let f=MV(e,s,l,i);u+f>n&&(a<s&&(o.push(s),a=s,u=0),f>n&&(f=kV(e,s,l,n,i,o),a=o[o.length-1])),s=l,u+=f}return u}function eTt(e,t,r,n,i=0,o){o===void 0&&(o=e.length);const a=[];return t==="break-all"?kV(e,i,o,r,n,a):tTt(e,i,o,r,n,a),a}function rTt(e,t,r,n,i,o){let a=0,s=0;for(let l=t;l<r;l++){const u=e[l],c=n[u];c?(s||(s=c.height),i[l]=a+c.width/2,a+=c.width):(Wt.warn("Missing character: ".concat(u," (").concat(u.codePointAt(0),")"))(),i[l]=a,a+=Z3t)}o[0]=a,o[1]=s}function SI(e,t,r,n,i){const o=Array.from(e),a=o.length,s=new Array(a),l=new Array(a),u=new Array(a),c=(r==="break-word"||r==="break-all")&&isFinite(n)&&n>0,f=[0,0],h=[0,0];let d=0,p=0,v=0;for(let g=0;g<=a;g++){const m=o[g];if((m===`
`||g===a)&&(v=g),v>p){const y=c?eTt(o,r,n,i,p,v):K3t;for(let _=0;_<=y.length;_++){const b=_===0?p:y[_-1],T=_<y.length?y[_]:v;rTt(o,b,T,i,s,h);for(let S=b;S<T;S++)l[S]=d+h[1]/2,u[S]=h[0];d=d+h[1]*t,f[0]=Math.max(f[0],h[0])}p=v}m===`
`&&(s[p]=0,l[p]=0,u[p]=0,p++)}return f[1]=d,{x:s,y:l,rowWidth:u,size:f}}function nTt({value:e,length:t,stride:r,offset:n,startIndices:i,characterSet:o}){const a=e.BYTES_PER_ELEMENT,s=r?r/a:1,l=n?n/a:0,u=i[t]||Math.ceil((e.length-l)/s),c=o&&new Set,f=new Array(t);let h=e;if(s>1||l>0){const d=e.constructor;h=new d(u);for(let p=0;p<u;p++)h[p]=e[p*s+l]}for(let d=0;d<t;d++){const p=i[d],v=i[d+1]||u,g=h.subarray(p,v);f[d]=String.fromCodePoint.apply(null,g),c&&g.forEach(c.add,c)}if(c)for(const d of c)o.add(String.fromCodePoint(d));return{texts:f,characterCount:u}}class xV{constructor(t=5){E(this,"limit",void 0),E(this,"_cache",{}),E(this,"_order",[]),this.limit=t}get(t){const r=this._cache[t];return r&&(this._deleteOrder(t),this._appendOrder(t)),r}set(t,r){this._cache[t]?(this.delete(t),this._cache[t]=r,this._appendOrder(t)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[t]=r,this._appendOrder(t))}delete(t){this._cache[t]&&(delete this._cache[t],this._deleteOrder(t))}_deleteOrder(t){const r=this._order.indexOf(t);r>=0&&this._order.splice(r,1)}_appendOrder(t){this._order.push(t)}}function iTt(){const e=[];for(let t=32;t<128;t++)e.push(String.fromCharCode(t));return e}const xd={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:iTt(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1},TI=1024,oTt=.9,PI=1.2,LV=3;let f1=new xV(LV);function aTt(e,t){let r;typeof t=="string"?r=new Set(Array.from(t)):r=new Set(t);const n=f1.get(e);if(!n)return r;for(const i in n.mapping)r.has(i)&&r.delete(i);return r}function sTt(e,t){for(let r=0;r<e.length;r++)t.data[4*r+3]=e[r]}function EI(e,t,r,n){e.font="".concat(n," ").concat(r,"px ").concat(t),e.fillStyle="#000",e.textBaseline="alphabetic",e.textAlign="left"}function lTt(e){Wt.assert(Number.isFinite(e)&&e>=LV,"Invalid cache limit"),f1=new xV(e)}class uTt{constructor(){E(this,"props",{...xd}),E(this,"_key",void 0),E(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){return PI}setProps(t={}){Object.assign(this.props,t);const r=this._key;this._key=this._getKey();const n=aTt(this._key,this.props.characterSet),i=f1.get(this._key);if(i&&n.size===0){this._key!==r&&(this._atlas=i);return}const o=this._generateFontAtlas(this._key,n,i);this._atlas=o,f1.set(this._key,o)}_generateFontAtlas(t,r,n){const{fontFamily:i,fontWeight:o,fontSize:a,buffer:s,sdf:l,radius:u,cutoff:c}=this.props;let f=n&&n.data;f||(f=document.createElement("canvas"),f.width=TI);const h=f.getContext("2d");EI(h,i,a,o);const{mapping:d,canvasHeight:p,xOffset:v,yOffset:g}=Q3t({getFontWidth:m=>h.measureText(m).width,fontHeight:a*PI,buffer:s,characterSet:r,maxCanvasWidth:TI,...n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset}});if(f.height!==p){const m=h.getImageData(0,0,f.width,f.height);f.height=p,h.putImageData(m,0,0)}if(EI(h,i,a,o),l){const m=new TA.exports(a,s,u,c,i,o),y=h.getImageData(0,0,m.size,m.size);for(const _ of r)sTt(m.draw(_),y),h.putImageData(y,d[_].x-s,d[_].y+s)}else for(const m of r)h.fillText(m,d[m].x,d[m].y+a*oTt);return{xOffset:v,yOffset:g,mapping:d,data:f,width:f.width,height:f.height}}_getKey(){const{fontFamily:t,fontWeight:r,fontSize:n,buffer:i,sdf:o,radius:a,cutoff:s}=this.props;return o?"".concat(t," ").concat(r," ").concat(n," ").concat(i," ").concat(a," ").concat(s):"".concat(t," ").concat(r," ").concat(n," ").concat(i)}}const cTt=`#define SHADER_NAME text-background-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute vec4 instanceRects;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec2 instancePixelOffsets;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform bool billboard;
uniform float opacity;
uniform float sizeScale;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform vec4 padding;
uniform int sizeUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = radians(angle);
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;
  vLineWidth = instanceLineWidths;

  // convert size in meters to pixels, then scaled and clamp

  // project meters to pixels and clamp to limits
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),
    sizeMinPixels, sizeMaxPixels
  );

  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;

  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);
  pixelOffset += instancePixelOffsets;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Apply opacity to instance color, or return instance picking color
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,fTt=`#define SHADER_NAME text-background-layer-fragment-shader

precision highp float;

uniform bool stroked;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

void main(void) {
  geometry.uv = uv;

  vec2 pixelPosition = uv * dimensions;
  if (stroked) {
    float distToEdge = min(
      min(pixelPosition.x, dimensions.x - pixelPosition.x),
      min(pixelPosition.y, dimensions.y - pixelPosition.y)
    );
    float isBorder = smoothedge(distToEdge, vLineWidth);
    gl_FragColor = mix(vFillColor, vLineColor, isBorder);
  } else {
    gl_FragColor = vFillColor;
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,hTt={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:e=>e.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class PA extends ko{constructor(...t){super(...t),E(this,"state",void 0)}getShaders(){return super.getShaders({vs:cTt,fs:fTt,modules:[vu,gu]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){super.updateState(t);const{changeFlags:r}=t;if(r.extensionsChanged){var n;const{gl:i}=this.context;(n=this.state.model)===null||n===void 0||n.delete(),this.state.model=this._getModel(i),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{billboard:r,sizeScale:n,sizeUnits:i,sizeMinPixels:o,sizeMaxPixels:a,getLineWidth:s}=this.props;let{padding:l}=this.props;l.length<4&&(l=[l[0],l[1],l[0],l[1]]),this.state.model.setUniforms(t).setUniforms({billboard:r,stroked:Boolean(s),padding:l,sizeUnits:Ms[i],sizeScale:n,sizeMinPixels:o,sizeMaxPixels:a}).draw()}_getModel(t){const r=[0,0,1,0,1,1,0,1];return new ha(t,{...this.getShaders(),id:this.props.id,geometry:new pu({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array(r)}}}),isInstanced:!0})}}E(PA,"defaultProps",hTt);E(PA,"layerName","TextBackgroundLayer");const AI={start:1,middle:0,end:-1},CI={top:1,center:0,bottom:-1},kb=[0,0,0,255],dTt=1,pTt={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:kb},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:xd.characterSet},fontFamily:xd.fontFamily,fontWeight:xd.fontWeight,lineHeight:dTt,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:kb},fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:e=>e.text},getPosition:{type:"accessor",value:e=>e.position},getColor:{type:"accessor",value:kb},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class EA extends Cy{constructor(...t){super(...t),E(this,"state",void 0),E(this,"getBoundingRect",(r,n)=>{const i=this.state.fontAtlasManager.mapping,o=this.state.getText,{wordBreak:a,maxWidth:s,lineHeight:l,getTextAnchor:u,getAlignmentBaseline:c}=this.props,f=o(r,n)||"",{size:[h,d]}=SI(f,l,a,s,i),p=AI[typeof u=="function"?u(r,n):u],v=CI[typeof c=="function"?c(r,n):c];return[(p-1)*h/2,(v-1)*d/2,h,d]}),E(this,"getIconOffsets",(r,n)=>{const i=this.state.fontAtlasManager.mapping,o=this.state.getText,{wordBreak:a,maxWidth:s,lineHeight:l,getTextAnchor:u,getAlignmentBaseline:c}=this.props,f=o(r,n)||"",{x:h,y:d,rowWidth:p,size:[v,g]}=SI(f,l,a,s,i),m=AI[typeof u=="function"?u(r,n):u],y=CI[typeof c=="function"?c(r,n):c],_=h.length,b=new Array(_*2);let T=0;for(let S=0;S<_;S++){const P=(1-m)*(v-p[S])/2;b[T++]=(m-1)*v/2+P+h[S],b[T++]=(y-1)*g/2+d[S]}return b})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new uTt}}updateState(t){const{props:r,oldProps:n,changeFlags:i}=t;(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||r.lineHeight!==n.lineHeight||r.wordBreak!==n.wordBreak||r.maxWidth!==n.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:t}){return t.object=t.index>=0?this.props.data[t.index]:null,t}_updateFontAtlas(){const{fontSettings:t,fontFamily:r,fontWeight:n}=this.props,{fontAtlasManager:i,characterSet:o}=this.state,a={...t,characterSet:o,fontFamily:r,fontWeight:n};if(!i.mapping)return i.setProps(a),!0;for(const s in a)if(a[s]!==i.props[s])return i.setProps(a),!0;return!1}_updateText(){var t;const{data:r,characterSet:n}=this.props,i=(t=r.attributes)===null||t===void 0?void 0:t.getText;let{getText:o}=this.props,a=r.startIndices,s;const l=n==="auto"&&new Set;if(i&&a){const{texts:u,characterCount:c}=nTt({...ArrayBuffer.isView(i)?{value:i}:i,length:r.length,startIndices:a,characterSet:l});s=c,o=(f,{index:h})=>u[h]}else{const{iterable:u,objectInfo:c}=Ay(r);a=[0],s=0;for(const f of u){c.index++;const h=Array.from(o(f,c)||"");l&&h.forEach(l.add,l),s+=h.length,a.push(s)}}this.setState({getText:o,startIndices:a,numInstances:s,characterSet:l||n})}renderLayers(){const{startIndices:t,numInstances:r,getText:n,fontAtlasManager:{scale:i,texture:o,mapping:a},styleVersion:s}=this.state,{data:l,_dataDiff:u,getPosition:c,getColor:f,getSize:h,getAngle:d,getPixelOffset:p,getBackgroundColor:v,getBorderColor:g,getBorderWidth:m,backgroundPadding:y,background:_,billboard:b,fontSettings:T,outlineWidth:S,outlineColor:P,sizeScale:C,sizeUnits:A,sizeMinPixels:M,sizeMaxPixels:k,transitions:O,updateTriggers:F}=this.props,z=this.getSubLayerClass("characters",SA),R=this.getSubLayerClass("background",PA);return[_&&new R({getFillColor:v,getLineColor:g,getLineWidth:m,padding:y,getPosition:c,getSize:h,getAngle:d,getPixelOffset:p,billboard:b,sizeScale:C/this.state.fontAtlasManager.props.fontSize,sizeUnits:A,sizeMinPixels:M,sizeMaxPixels:k,transitions:O&&{getPosition:O.getPosition,getAngle:O.getAngle,getSize:O.getSize,getFillColor:O.getBackgroundColor,getLineColor:O.getBorderColor,getLineWidth:O.getBorderWidth,getPixelOffset:O.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:F.getPosition,getAngle:F.getAngle,getSize:F.getSize,getFillColor:F.getBackgroundColor,getLineColor:F.getBorderColor,getLineWidth:F.getBorderWidth,getPixelOffset:F.getPixelOffset,getBoundingRect:{getText:F.getText,getTextAnchor:F.getTextAnchor,getAlignmentBaseline:F.getAlignmentBaseline,styleVersion:s}}}),{data:l.attributes&&l.attributes.background?{length:l.length,attributes:l.attributes.background}:l,_dataDiff:u,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new z({sdf:T.sdf,smoothing:Number.isFinite(T.smoothing)?T.smoothing:xd.smoothing,outlineWidth:S,outlineColor:P,iconAtlas:o,iconMapping:a,getPosition:c,getColor:f,getSize:h,getAngle:d,getPixelOffset:p,billboard:b,sizeScale:C*i,sizeUnits:A,sizeMinPixels:M*i,sizeMaxPixels:k*i,transitions:O&&{getPosition:O.getPosition,getAngle:O.getAngle,getColor:O.getColor,getSize:O.getSize,getPixelOffset:O.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:F.getText,getPosition:F.getPosition,getAngle:F.getAngle,getColor:F.getColor,getSize:F.getSize,getPixelOffset:F.getPixelOffset,getIconOffsets:{getText:F.getText,getTextAnchor:F.getTextAnchor,getAlignmentBaseline:F.getAlignmentBaseline,styleVersion:s}}}),{data:l,_dataDiff:u,startIndices:t,numInstances:r,getIconOffsets:this.getIconOffsets,getIcon:n})]}static set fontAtlasCacheLimit(t){lTt(t)}}E(EA,"defaultProps",pTt);E(EA,"layerName","TextLayer");const nm={circle:{type:yA,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:X0,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:EA,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},im={type:_A,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},uT={type:wA,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function bh({type:e,props:t}){const r={};for(const n in t)r[n]=e.defaultProps[t[n]];return r}function xb(e,t){const{transitions:r,updateTriggers:n}=e.props,i={updateTriggers:{},transitions:r&&{getPosition:r.geometry}};for(const o in t){const a=t[o];let s=e.props[o];o.startsWith("get")&&(s=e.getSubLayerAccessor(s),i.updateTriggers[a]=n[o],r&&(i.transitions[a]=r[o])),i[a]=s}return i}function vTt(e){if(Array.isArray(e))return e;switch(Wt.assert(e.type,"GeoJSON does not have type"),e.type){case"Feature":return[e];case"FeatureCollection":return Wt.assert(Array.isArray(e.features),"GeoJSON does not have features array"),e.features;default:return[{geometry:e}]}}function MI(e,t,r={}){const n={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:i=0,endRow:o=e.length}=r;for(let a=i;a<o;a++){const s=e[a];Wt.assert(s&&s.geometry,"GeoJSON does not have geometry");const{geometry:l}=s;if(l.type==="GeometryCollection"){Wt.assert(Array.isArray(l.geometries),"GeoJSON does not have geometries array");const{geometries:u}=l;for(let c=0;c<u.length;c++){const f=u[c];kI(f,n,t,s,a)}}else kI(l,n,t,s,a)}return n}function kI(e,t,r,n,i){const{type:o,coordinates:a}=e,{pointFeatures:s,lineFeatures:l,polygonFeatures:u,polygonOutlineFeatures:c}=t;if(!mTt(o,a)){Wt.warn("".concat(o," coordinates are malformed"))();return}switch(o){case"Point":s.push(r({geometry:e},n,i));break;case"MultiPoint":a.forEach(f=>{s.push(r({geometry:{type:"Point",coordinates:f}},n,i))});break;case"LineString":l.push(r({geometry:e},n,i));break;case"MultiLineString":a.forEach(f=>{l.push(r({geometry:{type:"LineString",coordinates:f}},n,i))});break;case"Polygon":u.push(r({geometry:e},n,i)),a.forEach(f=>{c.push(r({geometry:{type:"LineString",coordinates:f}},n,i))});break;case"MultiPolygon":a.forEach(f=>{u.push(r({geometry:{type:"Polygon",coordinates:f}},n,i)),f.forEach(h=>{c.push(r({geometry:{type:"LineString",coordinates:h}},n,i))})});break}}const gTt={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function mTt(e,t){let r=gTt[e];for(Wt.assert(r,"Unknown GeoJSON type ".concat(e));t&&--r>0;)t=t[0];return t&&Number.isFinite(t[0])}function IV(){return{points:{},lines:{},polygons:{},polygonsOutline:{}}}function xv(e){return e.geometry.coordinates}function yTt(e,t){const r=IV(),{pointFeatures:n,lineFeatures:i,polygonFeatures:o,polygonOutlineFeatures:a}=e;return r.points.data=n,r.points._dataDiff=t.pointFeatures&&(()=>t.pointFeatures),r.points.getPosition=xv,r.lines.data=i,r.lines._dataDiff=t.lineFeatures&&(()=>t.lineFeatures),r.lines.getPath=xv,r.polygons.data=o,r.polygons._dataDiff=t.polygonFeatures&&(()=>t.polygonFeatures),r.polygons.getPolygon=xv,r.polygonsOutline.data=a,r.polygonsOutline._dataDiff=t.polygonOutlineFeatures&&(()=>t.polygonOutlineFeatures),r.polygonsOutline.getPath=xv,r}function _Tt(e,t){const r=IV(),{points:n,lines:i,polygons:o}=e,a=W3t(e,t);return r.points.data={length:n.positions.value.length/n.positions.size,attributes:{...n.attributes,getPosition:n.positions,instancePickingColors:{size:3,value:a.points}},properties:n.properties,numericProps:n.numericProps,featureIds:n.featureIds},r.lines.data={length:i.pathIndices.value.length-1,startIndices:i.pathIndices.value,attributes:{...i.attributes,getPath:i.positions,instancePickingColors:{size:3,value:a.lines}},properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},r.lines._pathType="open",r.polygons.data={length:o.polygonIndices.value.length-1,startIndices:o.polygonIndices.value,attributes:{...o.attributes,getPolygon:o.positions,pickingColors:{size:3,value:a.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},r.polygons._normalize=!1,o.triangles&&(r.polygons.data.attributes.indices=o.triangles.value),r.polygonsOutline.data={length:o.primitivePolygonIndices.value.length-1,startIndices:o.primitivePolygonIndices.value,attributes:{...o.attributes,getPath:o.positions,instancePickingColors:{size:3,value:a.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},r.polygonsOutline._pathType="open",r}const bTt=["points","linestrings","polygons"],wTt={...bh(nm.circle),...bh(nm.icon),...bh(nm.text),...bh(im),...bh(uT),stroked:!0,filled:!0,extruded:!1,wireframe:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:e=>e.properties.icon},getText:{type:"accessor",value:e=>e.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class AA extends Cy{initializeState(){this.state={layerProps:{},features:{}}}updateState({props:t,changeFlags:r}){if(!r.dataChanged)return;const{data:n}=this.props,i=n&&"points"in n&&"polygons"in n&&"lines"in n;this.setState({binary:i}),i?this._updateStateBinary({props:t,changeFlags:r}):this._updateStateJSON({props:t,changeFlags:r})}_updateStateBinary({props:t,changeFlags:r}){const n=_Tt(t.data,this.encodePickingColor);this.setState({layerProps:n})}_updateStateJSON({props:t,changeFlags:r}){const n=vTt(t.data),i=this.getSubLayerRow.bind(this);let o={};const a={};if(Array.isArray(r.dataChanged)){const l=this.state.features;for(const u in l)o[u]=l[u].slice(),a[u]=[];for(const u of r.dataChanged){const c=MI(n,i,u);for(const f in l)a[f].push(U3t({data:o[f],getIndex:h=>h.__source.index,dataRange:u,replace:c[f]}))}}else o=MI(n,i);const s=yTt(o,a);this.setState({features:o,featuresDiff:a,layerProps:s})}getPickingInfo(t){const r=super.getPickingInfo(t),{index:n,sourceLayer:i}=r;return r.featureType=bTt.find(o=>i.id.startsWith("".concat(this.id,"-").concat(o,"-"))),n>=0&&i.id.startsWith("".concat(this.id,"-points-text"))&&this.state.binary&&(r.index=this.props.data.points.globalFeatureIds.value[n]),r}_updateAutoHighlight(t){const r="".concat(this.id,"-points-"),n=t.featureType==="points";for(const i of this.getSubLayers())i.id.startsWith(r)===n&&i.updateAutoHighlight(t)}_renderPolygonLayer(){const{extruded:t,wireframe:r}=this.props,{layerProps:n}=this.state,i="polygons-fill",o=this.shouldRenderSubLayer(i,n.polygons.data)&&this.getSubLayerClass(i,uT.type);if(o){const a=xb(this,uT.props),s=t&&r;return s||delete a.getLineColor,a.updateTriggers.lineColors=s,new o(a,this.getSubLayerProps({id:i,updateTriggers:a.updateTriggers}),n.polygons)}return null}_renderLineLayers(){const{extruded:t,stroked:r}=this.props,{layerProps:n}=this.state,i="polygons-stroke",o="linestrings",a=!t&&r&&this.shouldRenderSubLayer(i,n.polygonsOutline.data)&&this.getSubLayerClass(i,im.type),s=this.shouldRenderSubLayer(o,n.lines.data)&&this.getSubLayerClass(o,im.type);if(a||s){const l=xb(this,im.props);return[a&&new a(l,this.getSubLayerProps({id:i,updateTriggers:l.updateTriggers}),n.polygonsOutline),s&&new s(l,this.getSubLayerProps({id:o,updateTriggers:l.updateTriggers}),n.lines)]}return null}_renderPointLayers(){const{pointType:t}=this.props,{layerProps:r,binary:n}=this.state;let{highlightedObjectIndex:i}=this.props;!n&&Number.isFinite(i)&&(i=r.points.data.findIndex(s=>s.__source.index===i));const o=new Set(t.split("+")),a=[];for(const s of o){const l="points-".concat(s),u=nm[s],c=u&&this.shouldRenderSubLayer(l,r.points.data)&&this.getSubLayerClass(l,u.type);if(c){const f=xb(this,u.props);let h=r.points;if(s==="text"&&n){const{instancePickingColors:d,...p}=h.data.attributes;h={...h,data:{...h.data,attributes:p}}}a.push(new c(f,this.getSubLayerProps({id:l,updateTriggers:f.updateTriggers,highlightedObjectIndex:i}),h))}}return a}renderLayers(){const{extruded:t}=this.props,r=this._renderPolygonLayer(),n=this._renderLineLayers(),i=this._renderPointLayers();return[!t&&r,n,i,t&&r]}getSubLayerAccessor(t){const{binary:r}=this.state;return!r||typeof t!="function"?super.getSubLayerAccessor(t):(n,i)=>{const{data:o,index:a}=i,s=G3t(o,a);return t(s,i)}}}E(AA,"layerName","GeoJsonLayer");E(AA,"defaultProps",wTt);class STt{constructor(t){E(this,"index",void 0),E(this,"isVisible",void 0),E(this,"isSelected",void 0),E(this,"parent",void 0),E(this,"children",void 0),E(this,"content",void 0),E(this,"state",void 0),E(this,"layers",void 0),E(this,"id",void 0),E(this,"bbox",void 0),E(this,"zoom",void 0),E(this,"userData",void 0),E(this,"_abortController",void 0),E(this,"_loader",void 0),E(this,"_loaderId",void 0),E(this,"_isLoaded",void 0),E(this,"_isCancelled",void 0),E(this,"_needsReload",void 0),this.index=t,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._loader=void 0,this._abortController=null,this._loaderId=0,this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1}get data(){return this.isLoading&&this._loader?this._loader.then(()=>this.data):this.content}get isLoaded(){return this._isLoaded&&!this._needsReload}get isLoading(){return Boolean(this._loader)&&!this._isCancelled}get needsReload(){return this._needsReload||this._isCancelled}get byteLength(){const t=this.content?this.content.byteLength:0;return Number.isFinite(t)||Wt.error("byteLength not defined in tile data")(),t}async _loadData({getData:t,requestScheduler:r,onLoad:n,onError:i}){const{index:o,id:a,bbox:s,userData:l,zoom:u}=this,c=this._loaderId;this._abortController=new AbortController;const{signal:f}=this._abortController,h=await r.scheduleRequest(this,v=>v.isSelected?1:-1);if(!h){this._isCancelled=!0;return}if(this._isCancelled){h.done();return}let d=null,p;try{d=await t({index:o,id:a,bbox:s,userData:l,zoom:u,signal:f})}catch(v){p=v||!0}finally{h.done()}if(c===this._loaderId){if(this._loader=void 0,this.content=d,this._isCancelled&&!d){this._isLoaded=!1;return}this._isLoaded=!0,this._isCancelled=!1,p?i(p,this):n(this)}}loadData(t){return this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1,this._loaderId++,this._loader=this._loadData(t),this._loader}setNeedsReload(){this.isLoading&&(this.abort(),this._loader=void 0),this._needsReload=!0}abort(){var t;this.isLoaded||(this._isCancelled=!0,(t=this._abortController)===null||t===void 0||t.abort())}}const Ir={OUTSIDE:-1,INTERSECTING:0,INSIDE:1},xI=new _t,TTt=new _t;class CA{constructor(t=[0,0,0],r=[0,0,0],n){E(this,"center",void 0),E(this,"halfDiagonal",void 0),E(this,"minimum",void 0),E(this,"maximum",void 0),n=n||xI.copy(t).add(r).scale(.5),this.center=new _t(n),this.halfDiagonal=new _t(r).subtract(this.center),this.minimum=new _t(t),this.maximum=new _t(r)}clone(){return new CA(this.minimum,this.maximum,this.center)}equals(t){return this===t||Boolean(t)&&this.minimum.equals(t.minimum)&&this.maximum.equals(t.maximum)}transform(t){return this.center.transformAsPoint(t),this.halfDiagonal.transform(t),this.minimum.transform(t),this.maximum.transform(t),this}intersectPlane(t){const{halfDiagonal:r}=this,n=TTt.from(t.normal),i=r.x*Math.abs(n.x)+r.y*Math.abs(n.y)+r.z*Math.abs(n.z),o=this.center.dot(n)+t.distance;return o-i>0?Ir.INSIDE:o+i<0?Ir.OUTSIDE:Ir.INTERSECTING}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const r=xI.from(t).subtract(this.center),{halfDiagonal:n}=this;let i=0,o;return o=Math.abs(r.x)-n.x,o>0&&(i+=o*o),o=Math.abs(r.y)-n.y,o>0&&(i+=o*o),o=Math.abs(r.z)-n.z,o>0&&(i+=o*o),i}}const wh=new _t,LI=new _t;class MA{constructor(t=[0,0,0],r=0){E(this,"center",void 0),E(this,"radius",void 0),this.radius=-0,this.center=new _t,this.fromCenterRadius(t,r)}fromCenterRadius(t,r){return this.center.from(t),this.radius=r,this}fromCornerPoints(t,r){return r=wh.from(r),this.center=new _t().from(t).add(r).scale(.5),this.radius=this.center.distance(r),this}equals(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.radius===t.radius}clone(){return new MA(this.center,this.radius)}union(t){const r=this.center,n=this.radius,i=t.center,o=t.radius,a=wh.copy(i).subtract(r),s=a.magnitude();if(n>=s+o)return this.clone();if(o>=s+n)return t.clone();const l=(n+s+o)*.5;return LI.copy(a).scale((-n+l)/s).add(r),this.center.copy(LI),this.radius=l,this}expand(t){const n=wh.from(t).subtract(this.center).magnitude();return n>this.radius&&(this.radius=n),this}transform(t){this.center.transform(t);const r=eyt(wh,t);return this.radius=Math.max(r[0],Math.max(r[1],r[2]))*this.radius,this}distanceSquaredTo(t){const r=this.distanceTo(t);return r*r}distanceTo(t){const n=wh.from(t).subtract(this.center);return Math.max(0,n.len()-this.radius)}intersectPlane(t){const r=this.center,n=this.radius,o=t.normal.dot(r)+t.distance;return o<-n?Ir.OUTSIDE:o<n?Ir.INTERSECTING:Ir.INSIDE}}const PTt=new _t,ETt=new _t,Lv=new _t,Iv=new _t,Ov=new _t,ATt=new _t,CTt=new _t,zo={COLUMN0ROW0:0,COLUMN0ROW1:1,COLUMN0ROW2:2,COLUMN1ROW0:3,COLUMN1ROW1:4,COLUMN1ROW2:5,COLUMN2ROW0:6,COLUMN2ROW1:7,COLUMN2ROW2:8};class kA{constructor(t=[0,0,0],r=[0,0,0,0,0,0,0,0,0]){E(this,"center",void 0),E(this,"halfAxes",void 0),this.center=new _t().from(t),this.halfAxes=new wr(r)}get halfSize(){const t=this.halfAxes.getColumn(0),r=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2);return[new _t(t).len(),new _t(r).len(),new _t(n).len()]}get quaternion(){const t=this.halfAxes.getColumn(0),r=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2),i=new _t(t).normalize(),o=new _t(r).normalize(),a=new _t(n).normalize();return new bL().fromMatrix3(new wr([...i,...o,...a]))}fromCenterHalfSizeQuaternion(t,r,n){const i=new bL(n),o=new wr().fromQuaternion(i);return o[0]=o[0]*r[0],o[1]=o[1]*r[0],o[2]=o[2]*r[0],o[3]=o[3]*r[1],o[4]=o[4]*r[1],o[5]=o[5]*r[1],o[6]=o[6]*r[2],o[7]=o[7]*r[2],o[8]=o[8]*r[2],this.center=new _t().from(t),this.halfAxes=o,this}clone(){return new kA(this.center,this.halfAxes)}equals(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.halfAxes.equals(t.halfAxes)}getBoundingSphere(t=new MA){const r=this.halfAxes,n=r.getColumn(0,Lv),i=r.getColumn(1,Iv),o=r.getColumn(2,Ov),a=PTt.copy(n).add(i).add(o);return t.center.copy(this.center),t.radius=a.magnitude(),t}intersectPlane(t){const r=this.center,n=t.normal,i=this.halfAxes,o=n.x,a=n.y,s=n.z,l=Math.abs(o*i[zo.COLUMN0ROW0]+a*i[zo.COLUMN0ROW1]+s*i[zo.COLUMN0ROW2])+Math.abs(o*i[zo.COLUMN1ROW0]+a*i[zo.COLUMN1ROW1]+s*i[zo.COLUMN1ROW2])+Math.abs(o*i[zo.COLUMN2ROW0]+a*i[zo.COLUMN2ROW1]+s*i[zo.COLUMN2ROW2]),u=n.dot(r)+t.distance;return u<=-l?Ir.OUTSIDE:u>=l?Ir.INSIDE:Ir.INTERSECTING}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const r=ETt.from(t).subtract(this.center),n=this.halfAxes,i=n.getColumn(0,Lv),o=n.getColumn(1,Iv),a=n.getColumn(2,Ov),s=i.magnitude(),l=o.magnitude(),u=a.magnitude();i.normalize(),o.normalize(),a.normalize();let c=0,f;return f=Math.abs(r.dot(i))-s,f>0&&(c+=f*f),f=Math.abs(r.dot(o))-l,f>0&&(c+=f*f),f=Math.abs(r.dot(a))-u,f>0&&(c+=f*f),c}computePlaneDistances(t,r,n=[-0,-0]){let i=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;const a=this.center,s=this.halfAxes,l=s.getColumn(0,Lv),u=s.getColumn(1,Iv),c=s.getColumn(2,Ov),f=ATt.copy(l).add(u).add(c).add(a),h=CTt.copy(f).subtract(t);let d=r.dot(h);return i=Math.min(d,i),o=Math.max(d,o),f.copy(a).add(l).add(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),f.copy(a).add(l).subtract(u).add(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),f.copy(a).add(l).subtract(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),a.copy(f).subtract(l).add(u).add(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),a.copy(f).subtract(l).add(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),a.copy(f).subtract(l).subtract(u).add(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),a.copy(f).subtract(l).subtract(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),n[0]=i,n[1]=o,n}transform(t){this.center.transformAsPoint(t);const r=this.halfAxes.getColumn(0,Lv);r.transformAsPoint(t);const n=this.halfAxes.getColumn(1,Iv);n.transformAsPoint(t);const i=this.halfAxes.getColumn(2,Ov);return i.transformAsPoint(t),this.halfAxes=new wr([...r,...n,...i]),this}getTransform(){throw new Error("not implemented")}}const II=new _t,OI=new _t;class Jc{constructor(t=[0,0,1],r=0){E(this,"normal",void 0),E(this,"distance",void 0),this.normal=new _t,this.distance=-0,this.fromNormalDistance(t,r)}fromNormalDistance(t,r){return u0(Number.isFinite(r)),this.normal.from(t).normalize(),this.distance=r,this}fromPointNormal(t,r){t=II.from(t),this.normal.from(r).normalize();const n=-this.normal.dot(t);return this.distance=n,this}fromCoefficients(t,r,n,i){return this.normal.set(t,r,n),u0(_o(this.normal.len(),1)),this.distance=i,this}clone(){return new Jc(this.normal,this.distance)}equals(t){return _o(this.distance,t.distance)&&_o(this.normal,t.normal)}getPointDistance(t){return this.normal.dot(t)+this.distance}transform(t){const r=OI.copy(this.normal).transformAsVector(t).normalize(),n=this.normal.scale(-this.distance).transform(t);return this.fromPointNormal(n,r)}projectPointOntoPlane(t,r=[0,0,0]){t=II.from(t);const n=this.getPointDistance(t),i=OI.copy(this.normal).scale(n);return t.subtract(i).to(r)}}const RI=[new _t([1,0,0]),new _t([0,1,0]),new _t([0,0,1])],DI=new _t,MTt=new _t;new Jc(new _t(1,0,0),0);class ea{constructor(t=[]){E(this,"planes",void 0),this.planes=t}fromBoundingSphere(t){this.planes.length=2*RI.length;const r=t.center,n=t.radius;let i=0;for(const o of RI){let a=this.planes[i],s=this.planes[i+1];a||(a=this.planes[i]=new Jc),s||(s=this.planes[i+1]=new Jc);const l=DI.copy(o).scale(-n).add(r);-o.dot(l),a.fromPointNormal(l,o);const u=DI.copy(o).scale(n).add(r),c=MTt.copy(o).negate();-c.dot(u),s.fromPointNormal(u,c),i+=2}return this}computeVisibility(t){let r=Ir.INSIDE;for(const n of this.planes)switch(t.intersectPlane(n)){case Ir.OUTSIDE:return Ir.OUTSIDE;case Ir.INTERSECTING:r=Ir.INTERSECTING;break}return r}computeVisibilityWithPlaneMask(t,r){if(u0(Number.isFinite(r),"parentPlaneMask is required."),r===ea.MASK_OUTSIDE||r===ea.MASK_INSIDE)return r;let n=ea.MASK_INSIDE;const i=this.planes;for(let o=0;o<this.planes.length;++o){const a=o<31?1<<o:0;if(o<31&&(r&a)===0)continue;const s=i[o],l=t.intersectPlane(s);if(l===Ir.OUTSIDE)return ea.MASK_OUTSIDE;l===Ir.INTERSECTING&&(n|=a)}return n}}E(ea,"MASK_OUTSIDE",4294967295);E(ea,"MASK_INSIDE",0);E(ea,"MASK_INDETERMINATE",2147483647);new _t;new _t;new _t;new _t;new _t;new _t;new _t;new _t;new _t;new _t;new _t;new _t;new _t;new _t;new _t;new _t;new _t;const so=new wr,kTt=new wr,xTt=new wr,Rv=new wr,NI=new wr;function LTt(e,t={}){const r=Lz.EPSILON20,n=10;let i=0,o=0;const a=kTt,s=xTt;a.identity(),s.copy(e);const l=r*ITt(s);for(;o<n&&OTt(s)>l;)RTt(s,Rv),NI.copy(Rv).transpose(),s.multiplyRight(Rv),s.multiplyLeft(NI),a.multiplyRight(Rv),++i>2&&(++o,i=0);return t.unitary=a.toTarget(t.unitary),t.diagonal=s.toTarget(t.diagonal),t}function ITt(e){let t=0;for(let r=0;r<9;++r){const n=e[r];t+=n*n}return Math.sqrt(t)}const cT=[1,0,0],fT=[2,2,1];function OTt(e){let t=0;for(let r=0;r<3;++r){const n=e[so.getElementIndex(fT[r],cT[r])];t+=2*n*n}return Math.sqrt(t)}function RTt(e,t){const r=Lz.EPSILON15;let n=0,i=1;for(let u=0;u<3;++u){const c=Math.abs(e[so.getElementIndex(fT[u],cT[u])]);c>n&&(i=u,n=c)}const o=cT[i],a=fT[i];let s=1,l=0;if(Math.abs(e[so.getElementIndex(a,o)])>r){const u=e[so.getElementIndex(a,a)],c=e[so.getElementIndex(o,o)],f=e[so.getElementIndex(a,o)],h=(u-c)/2/f;let d;h<0?d=-1/(-h+Math.sqrt(1+h*h)):d=1/(h+Math.sqrt(1+h*h)),s=1/Math.sqrt(1+d*d),l=d*s}return wr.IDENTITY.to(t),t[so.getElementIndex(o,o)]=t[so.getElementIndex(a,a)]=s,t[so.getElementIndex(a,o)]=l,t[so.getElementIndex(o,a)]=-l,t}const Va=new _t,DTt=new _t,NTt=new _t,FTt=new _t,BTt=new _t,$Tt=new wr,zTt={diagonal:new wr,unitary:new wr};function VTt(e,t=new kA){if(!e||e.length===0)return t.halfAxes=new wr([0,0,0,0,0,0,0,0,0]),t.center=new _t,t;const r=e.length,n=new _t(0,0,0);for(const A of e)n.add(A);const i=1/r;n.multiplyByScalar(i);let o=0,a=0,s=0,l=0,u=0,c=0;for(const A of e){const M=Va.copy(A).subtract(n);o+=M.x*M.x,a+=M.x*M.y,s+=M.x*M.z,l+=M.y*M.y,u+=M.y*M.z,c+=M.z*M.z}o*=i,a*=i,s*=i,l*=i,u*=i,c*=i;const f=$Tt;f[0]=o,f[1]=a,f[2]=s,f[3]=a,f[4]=l,f[5]=u,f[6]=s,f[7]=u,f[8]=c;const{unitary:h}=LTt(f,zTt),d=t.halfAxes.copy(h);let p=d.getColumn(0,NTt),v=d.getColumn(1,FTt),g=d.getColumn(2,BTt),m=-Number.MAX_VALUE,y=-Number.MAX_VALUE,_=-Number.MAX_VALUE,b=Number.MAX_VALUE,T=Number.MAX_VALUE,S=Number.MAX_VALUE;for(const A of e)Va.copy(A),m=Math.max(Va.dot(p),m),y=Math.max(Va.dot(v),y),_=Math.max(Va.dot(g),_),b=Math.min(Va.dot(p),b),T=Math.min(Va.dot(v),T),S=Math.min(Va.dot(g),S);p=p.multiplyByScalar(.5*(b+m)),v=v.multiplyByScalar(.5*(T+y)),g=g.multiplyByScalar(.5*(S+_)),t.center.copy(p).add(v).add(g);const P=DTt.set(m-b,y-T,_-S).multiplyByScalar(.5),C=new wr([P[0],0,0,0,P[1],0,0,0,P[2]]);return t.halfAxes.multiplyRight(C),t}const wc=512,FI=3,OV=[[.5,.5],[0,0],[0,1],[1,0],[1,1]],RV=OV.concat([[0,.5],[.5,0],[1,.5],[.5,1]]),UTt=RV.concat([[.25,.5],[.75,.5]]);class Sc{constructor(t,r,n){E(this,"x",void 0),E(this,"y",void 0),E(this,"z",void 0),E(this,"childVisible",void 0),E(this,"selected",void 0),E(this,"_children",void 0),this.x=t,this.y=r,this.z=n}get children(){if(!this._children){const t=this.x*2,r=this.y*2,n=this.z+1;this._children=[new Sc(t,r,n),new Sc(t,r+1,n),new Sc(t+1,r,n),new Sc(t+1,r+1,n)]}return this._children}update(t){const{viewport:r,cullingVolume:n,elevationBounds:i,minZ:o,maxZ:a,bounds:s,offset:l,project:u}=t,c=this.getBoundingVolume(i,l,u);if(s&&!this.insideBounds(s)||n.computeVisibility(c)<0)return!1;if(!this.childVisible){let{z:h}=this;if(h<a&&h>=o){const d=c.distanceTo(r.cameraPosition)*r.scale/r.height;h+=Math.floor(Math.log2(d))}if(h>=a)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;for(const h of this.children)h.update(t);return!0}getSelected(t=[]){if(this.selected&&t.push(this),this._children)for(const r of this._children)r.getSelected(t);return t}insideBounds([t,r,n,i]){const o=Math.pow(2,this.z),a=wc/o;return this.x*a<n&&this.y*a<i&&(this.x+1)*a>t&&(this.y+1)*a>r}getBoundingVolume(t,r,n){if(n){const l=this.z<1?UTt:this.z<2?RV:OV,u=[];for(const c of l){const f=hT(this.x+c[0],this.y+c[1],this.z);f[2]=t[0],u.push(n(f)),t[0]!==t[1]&&(f[2]=t[1],u.push(n(f)))}return VTt(u)}const i=Math.pow(2,this.z),o=wc/i,a=this.x*o+r*wc,s=wc-(this.y+1)*o;return new CA([a,s,t[0]],[a+o,s+o,t[1]])}}function GTt(e,t,r,n){const i=e instanceof wSt&&e.resolution?e.projectPosition:null,o=Object.values(e.getFrustumPlanes()).map(({normal:d,distance:p})=>new Jc(d.clone().negate(),p)),a=new ea(o),s=e.distanceScales.unitsPerMeter[2],l=r&&r[0]*s||0,u=r&&r[1]*s||0,c=e instanceof Po&&e.pitch<=60?t:0;if(n){const[d,p,v,g]=n,m=ks([d,g]),y=ks([v,p]);n=[m[0],wc-m[1],y[0],wc-y[1]]}const f=new Sc(0,0,0),h={viewport:e,project:i,cullingVolume:a,elevationBounds:[l,u],minZ:c,maxZ:t,bounds:n,offset:0};if(f.update(h),e instanceof Po&&e.subViewports&&e.subViewports.length>1){for(h.offset=-1;f.update(h)&&!(--h.offset<-FI););for(h.offset=1;f.update(h)&&!(++h.offset>FI););}return f.getSelected()}const pa=512,jTt=[-1/0,-1/0,1/0,1/0],WTt={type:"url",value:null,validate:(e,t)=>t.optional&&e===null||typeof e=="string"||Array.isArray(e)&&e.every(r=>typeof r=="string"),equals:(e,t)=>{if(e===t)return!0;if(!Array.isArray(e)||!Array.isArray(t))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}};function DV(e,t){const r=[t.transformAsPoint([e[0],e[1]]),t.transformAsPoint([e[2],e[1]]),t.transformAsPoint([e[0],e[3]]),t.transformAsPoint([e[2],e[3]])];return[Math.min(...r.map(i=>i[0])),Math.min(...r.map(i=>i[1])),Math.max(...r.map(i=>i[0])),Math.max(...r.map(i=>i[1]))]}function HTt(e){return Math.abs(e.split("").reduce((t,r)=>(t<<5)-t+r.charCodeAt(0)|0,0))}function XTt(e,t){if(!e||!e.length)return null;const{index:r,id:n}=t;if(Array.isArray(e)){const o=HTt(n)%e.length;e=e[o]}let i=e;for(const o of Object.keys(r)){const a=new RegExp("{".concat(o,"}"),"g");i=i.replace(a,String(r[o]))}return Number.isInteger(r.y)&&Number.isInteger(r.z)&&(i=i.replace(/\{-y\}/g,String(Math.pow(2,r.z)-r.y-1))),i}function YTt(e,t,r){let n;if(t&&t.length===2){const[i,o]=t,a=e.getBounds({z:i}),s=e.getBounds({z:o});n=[Math.min(a[0],s[0]),Math.min(a[1],s[1]),Math.max(a[2],s[2]),Math.max(a[3],s[3])]}else n=e.getBounds();return e.isGeospatial?[Math.max(n[0],r[0]),Math.max(n[1],r[1]),Math.min(n[2],r[2]),Math.min(n[3],r[3])]:[Math.max(Math.min(n[0],r[2]),r[0]),Math.max(Math.min(n[1],r[3]),r[1]),Math.min(Math.max(n[2],r[0]),r[2]),Math.min(Math.max(n[3],r[1]),r[3])]}function h1({viewport:e,z:t,cullRect:r}){const n=r.x-e.x,i=r.y-e.y,{width:o,height:a}=r;if(!Array.isArray(t)){const u={targetZ:t||0},c=e.unproject([n,i],u),f=e.unproject([n+o,i],u),h=e.unproject([n,i+a],u),d=e.unproject([n+o,i+a],u);return[Math.min(c[0],f[0],h[0],d[0]),Math.min(c[1],f[1],h[1],d[1]),Math.max(c[0],f[0],h[0],d[0]),Math.max(c[1],f[1],h[1],d[1])]}const s=h1({viewport:e,z:t[0],cullRect:r}),l=h1({viewport:e,z:t[1],cullRect:r});return[Math.min(s[0],l[0]),Math.min(s[1],l[1]),Math.max(s[2],l[2]),Math.max(s[3],l[3])]}function qTt(e,t,r){return r?DV(e,r).map(i=>i*t/pa):e.map(n=>n*t/pa)}function xA(e,t){return Math.pow(2,e)*pa/t}function hT(e,t,r){const n=xA(r,pa),i=e/n*360-180,o=Math.PI-2*Math.PI*t/n,a=180/Math.PI*Math.atan(.5*(Math.exp(o)-Math.exp(-o)));return[i,a]}function BI(e,t,r,n){const i=xA(r,n);return[e/i*pa,t/i*pa]}function ZTt(e,t,r,n,i=pa){if(e.isGeospatial){const[u,c]=hT(t,r,n),[f,h]=hT(t+1,r+1,n);return{west:u,north:c,east:f,south:h}}const[o,a]=BI(t,r,n,i),[s,l]=BI(t+1,r+1,n,i);return{left:o,top:a,right:s,bottom:l}}function KTt(e,t,r,n,i){const o=YTt(e,null,n),a=xA(t,r),[s,l,u,c]=qTt(o,a,i),f=[];for(let h=Math.floor(s);h<u;h++)for(let d=Math.floor(l);d<c;d++)f.push({x:h,y:d,z:t});return f}function JTt({viewport:e,maxZoom:t,minZoom:r,zRange:n,extent:i,tileSize:o=pa,modelMatrix:a,modelMatrixInverse:s,zoomOffset:l=0}){let u=e.isGeospatial?Math.round(e.zoom+Math.log2(pa/o))+l:Math.ceil(e.zoom)+l;if(typeof r=="number"&&Number.isFinite(r)&&u<r){if(!i)return[];u=r}typeof t=="number"&&Number.isFinite(t)&&u>t&&(u=t);let c=i;return a&&s&&i&&!e.isGeospatial&&(c=DV(i,a)),e.isGeospatial?GTt(e,u,n,i):KTt(e,u,o,c||jTt,s)}const $I=1,xy=2,QTt="never",tPt="no-overlap",LA="best-available",ePt=5,rPt={[LA]:iPt,[tPt]:oPt,[QTt]:()=>{}};class nPt{constructor(t){E(this,"opts",void 0),E(this,"_requestScheduler",void 0),E(this,"_cache",void 0),E(this,"_dirty",void 0),E(this,"_tiles",void 0),E(this,"_cacheByteSize",void 0),E(this,"_viewport",void 0),E(this,"_zRange",void 0),E(this,"_selectedTiles",void 0),E(this,"_frameNumber",void 0),E(this,"_modelMatrix",void 0),E(this,"_modelMatrixInverse",void 0),E(this,"_maxZoom",void 0),E(this,"_minZoom",void 0),E(this,"onTileLoad",void 0),E(this,"_getCullBounds",W0(h1)),this.opts=t,this.onTileLoad=r=>{this.opts.onTileLoad(r),this.opts.maxCacheByteSize&&(this._cacheByteSize+=r.byteLength,this._resizeCache())},this._requestScheduler=new Xdt({maxRequests:t.maxRequests,throttleRequests:t.maxRequests>0}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._selectedTiles=null,this._frameNumber=0,this._modelMatrix=new Nr,this._modelMatrixInverse=new Nr,this.setOptions(t)}get tiles(){return this._tiles}get selectedTiles(){return this._selectedTiles}get isLoaded(){return this._selectedTiles!==null&&this._selectedTiles.every(t=>t.isLoaded)}get needsReload(){return this._selectedTiles!==null&&this._selectedTiles.some(t=>t.needsReload)}setOptions(t){Object.assign(this.opts,t),Number.isFinite(t.maxZoom)&&(this._maxZoom=Math.floor(t.maxZoom)),Number.isFinite(t.minZoom)&&(this._minZoom=Math.ceil(t.minZoom))}finalize(){for(const t of this._cache.values())t.isLoading&&t.abort();this._cache.clear(),this._tiles=[],this._selectedTiles=null}reloadAll(){for(const t of this._cache.keys()){const r=this._cache.get(t);!this._selectedTiles||!this._selectedTiles.includes(r)?this._cache.delete(t):r.setNeedsReload()}}update(t,{zRange:r,modelMatrix:n}={}){const i=new Nr(n),o=!i.equals(this._modelMatrix);if(!this._viewport||!t.equals(this._viewport)||!_o(this._zRange,r)||o){o&&(this._modelMatrixInverse=i.clone().invert(),this._modelMatrix=i),this._viewport=t,this._zRange=r;const s=this.getTileIndices({viewport:t,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:r,modelMatrix:this._modelMatrix,modelMatrixInverse:this._modelMatrixInverse});this._selectedTiles=s.map(l=>this._getTile(l,!0)),this._dirty&&this._rebuildTree()}else this.needsReload&&(this._selectedTiles=this._selectedTiles.map(s=>this._getTile(s.index,!0)));const a=this.updateTileStates();return this._pruneRequests(),this._dirty&&this._resizeCache(),a&&this._frameNumber++,this._frameNumber}isTileVisible(t,r){if(!t.isVisible)return!1;if(r&&this._viewport){const[n,i,o,a]=h1({viewport:this._viewport,z:this._zRange,cullRect:r}),{bbox:s}=t;if("west"in s)return s.west<o&&s.east>n&&s.south<a&&s.north>i;const l=Math.min(s.top,s.bottom),u=Math.max(s.top,s.bottom);return s.left<o&&s.right>n&&l<a&&u>i}return!0}getTileIndices({viewport:t,maxZoom:r,minZoom:n,zRange:i,modelMatrix:o,modelMatrixInverse:a}){const{tileSize:s,extent:l,zoomOffset:u}=this.opts;return JTt({viewport:t,maxZoom:r,minZoom:n,zRange:i,tileSize:s,extent:l,modelMatrix:o,modelMatrixInverse:a,zoomOffset:u})}getTileId(t){return"".concat(t.x,"-").concat(t.y,"-").concat(t.z)}getTileZoom(t){return t.z}getTileMetadata(t){const{tileSize:r}=this.opts;return{bbox:ZTt(this._viewport,t.x,t.y,t.z,r)}}getParentIndex(t){const r=Math.floor(t.x/2),n=Math.floor(t.y/2),i=t.z-1;return{x:r,y:n,z:i}}updateTileStates(){const t=this.opts.refinementStrategy||LA,r=new Array(this._cache.size);let n=0;for(const i of this._cache.values())r[n++]=i.isVisible,i.isSelected=!1,i.isVisible=!1;for(const i of this._selectedTiles)i.isSelected=!0,i.isVisible=!0;(typeof t=="function"?t:rPt[t])(Array.from(this._cache.values())),n=0;for(const i of this._cache.values())if(r[n++]!==i.isVisible)return!0;return!1}_pruneRequests(){const{maxRequests:t}=this.opts,r=[];let n=0;for(const i of this._cache.values())i.isLoading&&(n++,!i.isSelected&&!i.isVisible&&r.push(i));for(;t>0&&n>t&&r.length>0;)r.shift().abort(),n--}_rebuildTree(){const{_cache:t}=this;for(const r of t.values())r.parent=null,r.children&&(r.children.length=0);for(const r of t.values()){const n=this._getNearestAncestor(r);r.parent=n,n!=null&&n.children&&n.children.push(r)}}_resizeCache(){const{_cache:t,opts:r}=this,n=r.maxCacheSize||(r.maxCacheByteSize?1/0:ePt*this.selectedTiles.length),i=r.maxCacheByteSize||1/0;if(t.size>n||this._cacheByteSize>i){for(const[a,s]of t)if(s.isVisible||(this._cacheByteSize-=r.maxCacheByteSize?s.byteLength:0,t.delete(a),this.opts.onTileUnload(s)),t.size<=n&&this._cacheByteSize<=i)break;this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort((a,s)=>a.zoom-s.zoom),this._dirty=!1)}_getTile(t,r){const n=this.getTileId(t);let i=this._cache.get(n),o=!1;return!i&&r?(i=new STt(t),Object.assign(i,this.getTileMetadata(i.index)),Object.assign(i,{id:n,zoom:this.getTileZoom(i.index)}),o=!0,this._cache.set(n,i),this._dirty=!0):i&&i.needsReload&&(o=!0),i&&o&&i.loadData({getData:this.opts.getTileData,requestScheduler:this._requestScheduler,onLoad:this.onTileLoad,onError:this.opts.onTileError}),i}_getNearestAncestor(t){const{_minZoom:r=0}=this;let n=t.index;for(;this.getTileZoom(n)>r;){n=this.getParentIndex(n);const i=this._getTile(n);if(i)return i}return null}}function iPt(e){for(const t of e)t.state=0;for(const t of e)t.isSelected&&!NV(t)&&IA(t);for(const t of e)t.isVisible=Boolean(t.state&xy)}function oPt(e){for(const r of e)r.state=0;for(const r of e)r.isSelected&&NV(r);const t=Array.from(e).sort((r,n)=>r.zoom-n.zoom);for(const r of t)if(r.isVisible=Boolean(r.state&xy),r.children&&(r.isVisible||r.state&$I))for(const n of r.children)n.state=$I;else r.isSelected&&IA(r)}function NV(e){let t=e;for(;t;){if(t.isLoaded||t.content)return t.state|=xy,!0;t=t.parent}return!1}function IA(e){for(const t of e.children)t.isLoaded||t.content?t.state|=xy:IA(t)}const aPt={TilesetClass:nPt,data:{type:"data",value:[]},dataComparator:WTt.equals,renderSubLayers:{type:"function",value:e=>new AA(e),compare:!1},getTileData:{type:"function",optional:!0,value:null,compare:!1},onViewportLoad:{type:"function",optional:!0,value:null,compare:!1},onTileLoad:{type:"function",value:e=>{},compare:!1},onTileUnload:{type:"function",value:e=>{},compare:!1},onTileError:{type:"function",value:e=>console.error(e),compare:!1},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:LA,zRange:null,maxRequests:6,zoomOffset:0};class OA extends Cy{initializeState(){this.state={tileset:null,isLoaded:!1}}finalizeState(){var t,r;(t=this.state)===null||t===void 0||(r=t.tileset)===null||r===void 0||r.finalize()}get isLoaded(){var t,r;return(t=this.state)===null||t===void 0||(r=t.tileset)===null||r===void 0?void 0:r.selectedTiles.every(n=>n.isLoaded&&n.layers&&n.layers.every(i=>i.isLoaded))}shouldUpdateState({changeFlags:t}){return t.somethingChanged}updateState({changeFlags:t}){let{tileset:r}=this.state;const n=t.propsOrDataChanged||t.updateTriggersChanged,i=t.dataChanged||t.updateTriggersChanged&&(t.updateTriggersChanged.all||t.updateTriggersChanged.getTileData);r?n&&(r.setOptions(this._getTilesetOptions()),i?r.reloadAll():this.state.tileset.tiles.forEach(o=>{o.layers=null})):(r=new this.props.TilesetClass(this._getTilesetOptions()),this.setState({tileset:r})),this._updateTileset()}_getTilesetOptions(){const{tileSize:t,maxCacheSize:r,maxCacheByteSize:n,refinementStrategy:i,extent:o,maxZoom:a,minZoom:s,maxRequests:l,zoomOffset:u}=this.props;return{maxCacheSize:r,maxCacheByteSize:n,maxZoom:a,minZoom:s,tileSize:t,refinementStrategy:i,extent:o,maxRequests:l,zoomOffset:u,getTileData:this.getTileData.bind(this),onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),onTileUnload:this._onTileUnload.bind(this)}}_updateTileset(){const{tileset:t}=this.state,{zRange:r,modelMatrix:n}=this.props,i=t.update(this.context.viewport,{zRange:r,modelMatrix:n}),{isLoaded:o}=t,a=this.state.isLoaded!==o,s=this.state.frameNumber!==i;o&&(a||s)&&this._onViewportLoad(),s&&this.setState({frameNumber:i}),this.state.isLoaded=o}_onViewportLoad(){const{tileset:t}=this.state,{onViewportLoad:r}=this.props;r&&r(t.selectedTiles)}_onTileLoad(t){this.props.onTileLoad(t),t.layers=null,this.setNeedsUpdate()}_onTileError(t,r){this.props.onTileError(t),r.layers=null,this.setNeedsUpdate()}_onTileUnload(t){this.props.onTileUnload(t)}getTileData(t){const{data:r,getTileData:n,fetch:i}=this.props,{signal:o}=t;return t.url=typeof r=="string"||Array.isArray(r)?XTt(r,t):null,n?n(t):i&&t.url?i(t.url,{propName:"data",layer:this,signal:o}):null}renderSubLayers(t){return this.props.renderSubLayers(t)}getSubLayerPropsByTile(t){return null}getPickingInfo({info:t,sourceLayer:r}){return t.tile=r.props.tile,t}_updateAutoHighlight(t){t.sourceLayer&&t.sourceLayer.updateAutoHighlight(t)}renderLayers(){return this.state.tileset.tiles.map(t=>{const r=this.getSubLayerPropsByTile(t);if(!(!t.isLoaded&&!t.content))if(t.layers)r&&t.layers[0]&&Object.keys(r).some(n=>t.layers[0].props[n]!==r[n])&&(t.layers=t.layers.map(n=>n.clone(r)));else{const n=this.renderSubLayers({...this.props,id:"".concat(this.id,"-").concat(t.id),data:t.content,_offset:0,tile:t});t.layers=Ty(n,Boolean).map(i=>i.clone({tile:t,...r}))}return t.layers})}filterSubLayer({layer:t,cullRect:r}){const{tile:n}=t.props;return this.state.tileset.isTileVisible(n,r)}}E(OA,"defaultProps",aPt);E(OA,"layerName","TileLayer");var mu={};Object.defineProperty(mu,"__esModule",{value:!0});mu.calcRdx=uPt;mu.isFunction=fPt;var sPt=mu.isNumber=hPt;mu.toVector=dPt;mu.isArray=void 0;var lPt=Array.prototype.concat,FV=Object.prototype.toString;function uPt(e,t){var r=e>t?e:t;return Math.pow(10,17-~~(Math.log(r>0?r:-r)*Math.LOG10E))}var cPt=Array.isArray||function(t){return FV.call(t)==="[object Array]"};mu.isArray=cPt;function fPt(e){return FV.call(e)==="[object Function]"}function hPt(e){return typeof e=="number"?e-e===0:!1}function dPt(e){return lPt.apply([],e)}const pPt={setup(){const e=xt(),t=re(),r=Ei(),n=R1();return t.$subscribe((i,o)=>{const a=Date.now();localStorage.setItem("user",JSON.stringify(o)),console.log("userStore subscription took",Date.now()-a,"ms")}),n.$subscribe((i,o)=>{localStorage.setItem("map",JSON.stringify(o))}),{gameStore:e,userStore:t,marketStore:r,mapStore:n}},props:{clickedObj:Object,hoverInfo:Object,panToPzk:String,panToPaPos:Object},emits:["update:hoverInfo","update:clickedObj","update:panToPzk","update:panToPaPos","panAnywhere"],data:()=>({deck:null,tileLayer:null,iconData:[],iconPositions:{},iconLayer:null,lineData:[],lineLayer:null,clickedObject:null,scores:{needTakes:{},pathCosts:{}},pzkSelectedTown:{},initialViewState:{target:[0,0],zoom:-8,minZoom:-12,maxZoom:-5},mapStateSavedTimestamp:0}),created(){},async mounted(){function e(t){const r=n=>{t()?n():setTimeout(i=>r(n),100)};return new Promise(r)}if(console.log("NodeMap mounted, sleeping"),await e(t=>this.gameStore.ready==!0&&this.iconsCalc),console.log("resuming"),this.iconData=await(await fetch("data/deck_icons.json")).json(),this.iconPositions=await(await fetch("data/deck_icon_positions.json")).json(),this.lineData=await(await fetch("data/deck_links.json")).json(),this.panToPzk in this.gameStore.nodes){console.log("panning to node",this.panToPzk);const t=this.gameStore.nodes[this.panToPzk].pos;this.mapStore.target=[t.x,-t.z],this.mapStore.zoom=-7}this.initialViewState.target=[...this.mapStore.target],this.initialViewState.zoom=this.mapStore.zoom,this.deck=this.initializeDeck(),this.scores=this.dijkstraScoreAll(),this.updateDeck()},watch:{"userStore.autotakenNodes"(e){this.updateLayers()},linesCalc(e){this.updateLayers()},panToPaPos(e){if(e){const t={...this.initialViewState};t.target=[e.x,-e.z],t.zoom=-7,t.transitionDuration=100,t.transitionInterpolator=new Py({transitionProps:["target","zoom"]}),this.deck.setProps({initialViewState:t})}}},computed:{iconsCalc(){console.log("iconsCalc");let e=[];return this.iconData&&this.iconData.forEach(([t,r])=>{t in this.scores.pathCosts&&e.push({key:t,kind:r,pos:this.iconPositions[t],taken:this.userStore.autotakenNodes.has(t),thisCpCost:this.gameStore.nodes[t].CP,fromTown:this.scores.needTakes[t][0],fromTownCpCost:this.scores.pathCosts[t],fromTownPath:this.scores.needTakes[t]})}),e},linesCalc(){let e=[];if(this.lineData.forEach(([t,r])=>{const n=this.userStore.autotakenNodes.has(t)&&this.userStore.autotakenNodes.has(r),i=this.userStore.autotakenGrindNodes.has(t)&&this.userStore.autotakenGrindNodes.has(r);e.push({start:this.iconPositions[t],end:this.iconPositions[r],color:n?i?[255,109,0,255]:[255,179,0,255]:[172,172,172,255]})}),this.clickedObject){if(this.clickedObject.key in this.userStore.pzJobs){const t=this.userStore.pzJobs[this.clickedObject.key];let r;for(const n of t.usedPath)r&&e.push({start:this.iconPositions[r],end:this.iconPositions[n],color:[64,255,0,255]}),r=n}if(this.clickedObject.key in this.gameStore._tnk2tk){const t=this.gameStore.tnk2tk(this.clickedObject.key);this.userStore.townWorkers(t).forEach(r=>{if(!sPt(r.job))return;const n=this.userStore.pzJobs[r.job];let i;for(const o of n.usedPath)i&&e.push({start:this.iconPositions[i],end:this.iconPositions[o],color:[64,255,0,255]}),i=o})}}return e}},methods:{makeIconImg:lY,formatFixed:Bt,onMoveEvent(e){const t=Date.now();t-this.mapStateSavedTimestamp>100&&(this.mapStore.target=[...e.viewState.target],this.mapStateSavedTimestamp=t),this.$emit("panAnywhere")},dijkstraScoreAll(){const e=Date.now(),t=this.gameStore.nodes,r=this.gameStore.links,n=0;r[n]=this.gameStore.towns;let i=new Uh((l,u)=>o[l]-o[u]);i.push(n);let o={[n]:0},a={[n]:[]};for(var s;i.size();)s=i.pop(),r[s].forEach(l=>{if(!(l in t))return;const u=o[s]+t[l].CP;l in o?u<o[l]&&(o[l]=u,a[l]=[...a[s],l]):(i.push(l),o[l]=u,a[l]=[...a[s],l])});return console.log("scoreAll took",Date.now()-e,"ms"),{needTakes:a,pathCosts:o}},dijkstraScoreAllProfitPerCp(){const e=Date.now(),t=this.gameStore.nodes,r=this.gameStore.links,n=0;r[n]=[1,301,302,601,61,602,604,608,1002,1101,1141,1301,1314,1319,1343,1380,1623,1649,1691,1750];let i=new Set(Object.keys(t)),o={0:[]},a={0:0},s={0:0};for(const u of Object.keys(t))a[u]=1/0,s[u]=0,o[u]=[];let l=n;for(;r[l].forEach(f=>{const h=a[l]+t[f].CP,d=this.gameStore.profitData(f,o[l][0],150,10,10),p=h==0?0:-d.priceDaily/h;console.log(l,f,h,d.priceDaily,p),p<s[f]&&(a[f]=h,s[f]=p,o[f]=[...o[l],f])}),i.delete(l),i.length!=0;){let u=[];i.forEach(f=>{u.push([f,a[f]])}),u.sort((f,h)=>f[1]-h[1]);let c=-1;if([l,c]=u[0],c==1/0)break}return console.log("scoreAll took",Date.now()-e,"ms"),{needTakes:o,pathCosts:a}},makeIconsLayer(){return new X0({data:this.iconsCalc,pickable:!0,onClick:(e,t)=>this.objectClicked(e.object),onHover:e=>this.$emit("update:hoverInfo",e),getPosition:e=>e.pos,getColor:e=>e.taken?[0,0,0,255]:[0,0,0,255],getIcon:function(e){return{url:e.taken?`data/icons/node/${e.kind}.png`:`data/icons/node/gray/${e.kind}.png`,width:256,height:256,anchorX:128,anchorY:128}},updateTriggers:{getColor:this.userStore.countNodesTaken},transitions:{getColor:100},modelMatrix:[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],getSize:30,autoHighlight:!0})},makeLineLayer(){return new mA({data:this.linesCalc,getSourcePosition:e=>e.start,getTargetPosition:e=>e.end,getColor:e=>e.color,modelMatrix:[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1]})},initializeDeck(){return console.log("initializeDeck",this.initialViewState),console.log("initializeDeck",this.mapStore.target),this.tileLayer=new OA({data:"data/maptiles/{z}/{x}_{y}.webp",minZoom:0,maxZoom:7,tileSize:256*12800,zoomOffset:14,extent:[-67*2*12800,-71*2*12800,58*2*12800,35*2*12800],renderSubLayers:e=>{const{bbox:{left:t,bottom:r,right:n,top:i}}=e.tile;return new gA(e,{data:null,image:e.data,bounds:[t,r,n,i]})}}),this.lineLayer=this.makeLineLayer(),this.iconLayer=this.makeIconsLayer(),new fA({canvas:"deck-canvas",mapbox:!1,onViewStateChange:this.onMoveEvent,initialViewState:this.initialViewState,layers:[this.tileLayer,this.lineLayer,this.iconLayer],controller:{doubleClickZoom:!1},views:[new uA({controller:!0})]})},updateLayers(){!this.deck||(console.log("updateLayers"),this.lineLayer=this.makeLineLayer(),this.iconLayer=this.makeIconsLayer(),this.deck.setProps({layers:[this.tileLayer,this.lineLayer,this.iconLayer]}))},updateDeck(){!this.deck||(console.log("updateDeck"),this.lineLayer=this.makeLineLayer(),this.iconLayer=this.makeIconsLayer(),this.deck.setProps({layers:[this.tileLayer,this.lineLayer,this.iconLayer],initialViewState:this.initialViewState}))},objectClicked(e){this.clickedObject=e,this.$emit("update:clickedObj",e)},move(e){this.initialViewState.target=[e,0],console.log("trying to move to",e),console.log(this.deck.viewState)}}},vPt={id:"deck-canvas",ref:"canvas"},gPt={id:"hack"};function mPt(e,t,r,n,i,o){return D(),$(W,null,[w("canvas",vPt,null,512),w("div",gPt,L(o.iconsCalc.length)+" icons",1)],64)}const yPt=$e(pPt,[["render",mPt],["__scopeId","data-v-a056ba81"]]);const _Pt={setup(){const e=re();return{gameStore:xt(),userStore:e}},emits:["panToPaPos"],data:()=>({activeTab:"daily"}),methods:{makeIconSrc:Mo,formatFixed:Bt,strShortenLeft:hY},computed:{untakenPlantzonesNearestCpTownProfit(){const n=Date.now();let i=[];this.gameStore.towns.forEach(a=>{const s=this.gameStore.dijDiscountedNearestPlantzones(a,10);i[a]=s});let o=[];for(const[a,s]of Object.entries(i))s.forEach(([l,u,c])=>{if(this.userStore.workedPlantzones.has(l.toString()))return;const f=this.gameStore.profitPzTownStats(l,a,150,10,10),h={tnk:a,pz:this.gameStore.plantzones[l],cp:u,path:c,profit:f};h.dailyPerCp=h.profit.priceDaily/u,o.push(h)});return o.sort((a,s)=>s.dailyPerCp-a.dailyPerCp),console.log("cpt: untakenPlantzonesNearestCpTownProfit took",Date.now()-n,"ms"),o}}},RA=e=>(cn("data-v-e81845a9"),e=e(),fn(),e),bPt={style:{"margin-top":"0.5rem","margin-bottom":"0.5rem"}},wPt={key:0},SPt=["href"],TPt=["src","data-key"],PPt={class:"right"},EPt={key:1},APt=RA(()=>w("tr",null,[w("th",{rowspan:"2"},"town"),w("th",{rowspan:"2"},"job"),w("th",{rowspan:"2"},"M$/day"),w("th",{colspan:"2"},"CP"),w("th",{rowspan:"2"},"Efficiency")],-1)),CPt=RA(()=>w("th",null,"\u{1F4BC}",-1)),MPt=["onClick"],kPt={class:"hlimited"},xPt=["onClick"],LPt=["src"],IPt={key:1,class:"reducible"},OPt={class:"fsxs"},RPt=RA(()=>w("tr",null,[w("th",null,"town"),w("th",null,"job"),w("th",null,"M$/day"),w("th",null,"\u{1F4BC}CP"),w("th",null,"M$/day/CP")],-1)),DPt=["onClick"],NPt={class:"hlimited"},FPt=["onClick"],BPt=["src"];function $Pt(e,t,r,n,i,o){const a=pe("RouterLink");return D(),$(W,null,[w("nav",bPt,[w("span",{onClick:t[0]||(t[0]=s=>e.activeTab="daily"),class:Sn({tab:1,green:e.activeTab!="daily"})},"Daily Yields",2),w("span",{onClick:t[1]||(t[1]=s=>e.activeTab="ranking"),class:Sn({tab:1,green:e.activeTab!="ranking"})},"Active Jobs Ranking",2),w("span",{onClick:t[2]||(t[2]=s=>e.activeTab="next"),class:Sn({tab:1,green:e.activeTab!="next"})},"Untaken Ranking",2)]),e.activeTab=="daily"?(D(),$("div",wPt,[w("table",null,[(D(!0),$(W,null,Nt(n.userStore.jobsTally,(s,l)=>(D(),$("tr",null,[w("td",null,[w("a",{href:this.userStore.itemUrl+l},[w("img",{src:o.makeIconSrc(l),class:"iconitem","data-key":l},null,8,TPt),U(" "+L(n.gameStore.uloc.item[l]),1)],8,SPt)]),w("td",PPt,L(o.formatFixed(s,0)),1)]))),256))])])):pt("",!0),e.activeTab=="ranking"?(D(),$("table",EPt,[APt,w("tr",null,[CPt,w("th",null,"\u{1F6CF}\uFE0F"+L(n.userStore.prerelease_housesconfig?"\u{1F4E6}":""),1)]),(D(!0),$(W,null,Nt(n.userStore.workersSortedByIncomePerCp,({w:s,i:l,ipc:u})=>(D(),$("tr",null,[w("td",null,[w("span",{onClick:c=>e.$emit("panToPaPos",this.gameStore.nodes[s.tnk].pos),class:"clickable"},L(n.gameStore.uloc.town[n.gameStore.tnk2tk(s.tnk)]),9,MPt)]),w("td",null,[w("div",kPt,[s.job in n.userStore.pzJobs?(D(),$(W,{key:0},[w("span",{onClick:c=>e.$emit("panToPaPos",this.gameStore.nodes[s.job].pos),class:"reducible clickable"},L(n.gameStore.parentNodeName(s.job)),9,xPt),w("span",null,[(D(!0),$(W,null,Nt(n.gameStore.plantzones[s.job].unlucky,(c,f)=>(D(),$(W,null,[f in n.gameStore.vendorPrices?pt("",!0):(D(),bs(a,{key:0,tag:"a",to:{path:"./settings",hash:"#item"+f}},{default:Le(()=>[w("img",{src:o.makeIconSrc(f),class:"iconitem"},null,8,LPt)]),_:2},1032,["to"]))],64))),256))])],64)):(D(),$("span",IPt,L(n.gameStore.workerJobDescription(s)),1))])]),w("td",null,L(o.formatFixed(l,2)),1),w("td",null,L(o.formatFixed(n.userStore.workerSharedCp(s),2)),1),w("td",null,L(o.formatFixed(n.userStore.workerSharedLodgingCp(s),2)),1),w("td",null,L(o.formatFixed(u,2)),1)]))),256))])):pt("",!0),e.activeTab=="next"?(D(),$(W,{key:2},[w("span",OPt,"Compares 10 nearest (by CP) untaken nodes of each town. Uses a 150/10/10 worker. Doesn't include "+L(n.userStore.prerelease_housesconfig?"lodgage":"lodging")+" costs.",1),w("table",null,[RPt,(D(!0),$(W,null,Nt(o.untakenPlantzonesNearestCpTownProfit,s=>(D(),$("tr",null,[w("td",null,[w("span",{onClick:l=>e.$emit("panToPaPos",this.gameStore.nodes[s.tnk].pos),class:"clickable"},L(n.gameStore.nodeName(s.tnk)),9,DPt)]),w("td",null,[w("div",NPt,[w("span",{onClick:l=>e.$emit("panToPaPos",this.gameStore.nodes[s.pz.key].pos),class:"reducible clickable"},L(n.gameStore.parentNodeName(s.pz.key)),9,FPt),w("span",null,[(D(!0),$(W,null,Nt(s.pz.unlucky,(l,u)=>(D(),$(W,null,[u in n.gameStore.vendorPrices?pt("",!0):(D(),bs(a,{key:0,tag:"a",to:{path:"./settings",hash:"#item"+u}},{default:Le(()=>[w("img",{src:o.makeIconSrc(u),class:"iconitem"},null,8,BPt)]),_:2},1032,["to"]))],64))),256))])])]),w("td",null,L(o.formatFixed(s.profit.priceDaily,2)),1),w("td",null,L(o.formatFixed(s.cp)),1),w("td",null,L(o.formatFixed(s.dailyPerCp,2)),1)]))),256))])],64)):pt("",!0)],64)}const zPt=$e(_Pt,[["render",$Pt],["__scopeId","data-v-e81845a9"]]);const VPt={setup(){const e=xt(),t=re(),r=Ei(),n=R1();return{gameStore:e,userStore:t,marketStore:r,mapStore:n}},components:{Worker:L7,Town:UY,Plantzone:hq,ModalDialog:yP,WorkerEdit:p$,WorkerSendSelection:Rht,LodgingSelection:jht,HousesSelection:Sdt,NodeMap:yPt,EmpireOverview:zPt,FloatingModifierEdit:zE},data:()=>({workerEditing:null,workerEditingInitial:null,workerEditingInitialProfit:0,workerDialogVisible:!1,sendSelection:null,sendDialogVisible:!1,lodgingDialogTown:"0",lodgingDialogData:null,lodgingDialogVisible:!1,housesDialogTown:"0",housesDialogVisible:!1,importDialogVisible:!1,clickedNode:null,hoverInfo:null,modifierDialogWspd:150,modifierDialogRgroup:1,modifierDialogWkld:400,modifierDialogVisible:!1,panToPzk:null,panToPaPos:null,importData:null,importSkipSections:{},prerelease_zerocost:!0,prerelease_colorGoblins:!1}),created(){},watch:{},computed:{},methods:{makeIconSrc:Mo,formatFixed:Bt,randBetween:is,levelup:cd,townNearestCpPlantzonesProfit(e,t,r,n){const i=Date.now();let o=[];const a=this.gameStore.tk2tnk(e);return this.gameStore.dijDiscountedNearestPlantzones(a,80).forEach(([l,u,c])=>{if(this.userStore.workedPlantzones.has(l.toString()))return;const f=this.gameStore.pzSelectionEntry(l,e,a,u,c,r,n);f.profit.dist>1e6||o.push(f)}),o.sort((l,u)=>u.dailyPerCp-l.dailyPerCp),console.log("cpt: townNearestCpPlantzonesProfit took",Date.now()-i,"ms"),o.slice(0,t)},hireWorker(e){const t=this.userStore.useDefaultWorker?{...this.userStore.defaultWorker,tnk:this.gameStore.tk2tnk(e)}:this.hireRandomArtGob(e);console.log("w",t),this.userStore.userWorkers.push(t)},hireRandomArtGob(e){const t=this.gameStore.uloc.town[e].replace("\u0413\u043E\u0440\u043E\u0434 ","").replace("\u0414\u0435\u0440\u0435\u0432\u043D\u044F ","").substring(0,3),r=this.userStore.townWorkers(e).length+1;let n={tk:e,tnk:this.gameStore.tk2tnk(e),charkey:7572,label:t+r,level:1,wspdSheet:115,mspdBase:5,mspdSheet:0,luckSheet:6,skills:[],job:null};return n.skills.push(this.gameStore.randomSkill(n.skills)),cd(this.gameStore,n,40),n.wspdSheet=Math.round(n.wspdSheet*100)/100,n.mspdSheet=Math.round(n.mspdSheet*100)/100,n.luckSheet=Math.round(n.luckSheet*100)/100,n},fireWorker(e){this.userStore.userWorkers=this.userStore.userWorkers.filter(t=>t!=e)},sendWorker(e){const t=this.gameStore.workerStatsOnPlantzone(e);this.sendSelection={worker:e,jobs:this.townNearestCpPlantzonesProfit(this.gameStore.tnk2tk(e.tnk),16,e,t)},this.sendDialogVisible=!0},unsendWorker(e){e.job=null},editWorker(e){this.workerEditing=e,this.workerEditingInitial=JSON.parse(JSON.stringify(e)),this.workerEditingInitialProfit=e&&e.job&&typeof e.job=="number"?this.userStore.pzJobs[this.workerEditing.job].profit.priceDaily:0,this.workerDialogVisible=!0},hireAll(){for(const e of Object.keys(this.gameStore.lodgingPerTown)){const t=this.userStore.townFreeLodgingCount(e);for(let r=0;r<t;r++)this.hireWorker(e)}},fireAll(){this.userStore.userWorkers=[]},selectLodging(e){this.lodgingDialogTown=e,this.lodgingDialogData=this.gameStore.lodgingPerTown[e],this.lodgingDialogVisible=!0},selectHouses(e){this.housesDialogTown=e,this.housesDialogVisible=!0,console.log("housesDialogVisible")},fileImport(e){if(!e)return;const t=e.target[0].files;if(t.length<1)return;const r=t[0];console.log("fileImport",r);let n=new FileReader;n.onload=this.fileParse,n.readAsText(r)},fileParse(e){let t=e.target.result,r=JSON.parse(t);r.userWorkers.forEach(n=>{if(delete n.tk,"wspdLvlup"in n){const o=(this.gameStore.workerStatic[n.charkey].wspd+n.wspdLvlup)/1e6;n.wspdSheet=Math.round(o*100)/100,delete n.wspdLvlup}if("mspdLvlup"in n){const i=this.gameStore.workerStatic[n.charkey],o=i.mspd/100*(1+n.mspdLvlup/1e6);n.mspdSheet=Math.round(o*100)/100,n.mspdBase=i.mspd/100,delete n.mspdLvlup}if("luckLvlup"in n){const o=(this.gameStore.workerStatic[n.charkey].luck+n.luckLvlup)/1e4;n.luckSheet=Math.round(o*100)/100,delete n.luckLvlup}this.gameStore.jobIsWorkshop(n.job)&&(n.job.hk in this.userStore.userWorkshops||(this.userStore.userWorkshops[n.job.hk]={...this.userStore.defaultUserWorkshop},console.log(`userWorkshop #${n.job.hk} not set, using default`)))}),console.log("import parsed"),this.userStore.$patch(r),r.lodgingTaken&&Object.keys(r.lodgingTaken).length>0?(console.log("overwriting lodgingTaken"),this.userStore.lodgingTaken=r.lodgingTaken):console.log("keeping lodgingTaken"),r.lodgingP2W&&Object.keys(r.lodgingP2W).length>0?(console.log("overwriting lodgingP2W"),this.userStore.lodgingP2W=r.lodgingP2W):console.log("keeping lodgingP2W"),console.log("import done"),this.importDialogVisible=!1},fileExport(){var e=document.createElement("a");let t={activateAncado:this.userStore.activateAncado,lodgingP2W:this.userStore.lodgingP2W,lodgingTaken:this.userStore.lodgingTaken,userWorkers:this.userStore.userWorkers,farmingEnable:this.userStore.farmingEnable,farmingProfit:this.userStore.farmingProfit,farmingBareProfit:this.userStore.farmingBareProfit,grindTakenList:this.userStore.grindTakenList};const r=JSON.stringify(t);var n=new Blob([r],{type:"text/plain"});e.href=URL.createObjectURL(n),e.download="user.json",e.click()},log(e){console.log(e)},showModifierDialog(e){this.modifierDialogVisible=!0,this.modifierDialogRgroup=this.gameStore.plantzoneStatic[e].regiongroup,this.modifierDialogWkld=this.gameStore.plantzones[e].peg.time,this.modifierDialogWspd=this.userStore.workedPlantzones.has(String(e))?this.userStore.pzJobs[e].worker.wspdSheet+this.gameStore.wspdBonus(this.userStore.pzJobs[e].worker,"farm"):150},panToHash(){this.$route.hash&&(this.panToPzk=this.$route.hash.replace("#node",""))}},mounted(){this.panToHash()}},we=e=>(cn("data-v-9d04c25b"),e=e(),fn(),e),UPt=we(()=>w("button",null,"import",-1)),GPt=we(()=>w("br",null,null,-1)),jPt={style:{width:"24em"}},WPt=U("Test with workspeed: "),HPt={id:"canvas-limiter"},XPt={key:0},YPt=["src"],qPt=we(()=>w("br",null,null,-1)),ZPt={id:"topleft"},KPt=we(()=>w("summary",null,"Empire",-1)),JPt={id:"leftside"},QPt={key:0,id:"mapObjDetail"},tEt=we(()=>w("div",null,"\u02C5",-1)),eEt=[tEt],rEt={id:"clickedTownInfo",class:"vscrollable"},nEt={key:0},iEt={key:0,id:"clickedNodeInfo"},oEt=U(),aEt=we(()=>w("abbr",{title:"is involved in a zero-cost path"},"\u2139\uFE0F",-1)),sEt={key:0,class:"fsxs"},lEt=U(" shared by active nodejobs: "),uEt=["checked"],cEt=U(" zero-cost connection to nearest town (invested for droprate) "),fEt={key:1,id:"clickedPlantzoneInfo"},hEt={id:"rightside"},dEt={id:"totals"},pEt={class:"fsxs"},vEt=we(()=>w("br",null,null,-1)),gEt={key:0,title:"CP not allocated for fences, enable Farming on Settings page"},mEt={key:1,title:"not all fences being worked, for best results either send 10 workers or none at all"},yEt=we(()=>w("br",null,null,-1)),_Et=we(()=>w("br",null,null,-1)),bEt=we(()=>w("br",null,null,-1)),wEt={class:"fsxs"},SEt=U(" invested for droprate: "),TEt=["title"],PEt=we(()=>w("br",null,null,-1)),EEt=we(()=>w("br",null,null,-1)),AEt=we(()=>w("br",null,null,-1)),CEt=we(()=>w("br",null,null,-1)),MEt=we(()=>w("br",null,null,-1)),kEt=we(()=>w("br",null,null,-1)),xEt=we(()=>w("br",null,null,-1)),LEt={class:"fsxs"},IEt=we(()=>w("br",null,null,-1)),OEt=we(()=>w("br",null,null,-1)),REt=we(()=>w("br",null,null,-1)),DEt=we(()=>w("br",null,null,-1)),NEt=U(" (M$/day/CP) "),FEt={class:"fsxs"},BEt=we(()=>w("br",null,null,-1)),$Et=we(()=>w("br",null,null,-1)),zEt=we(()=>w("br",null,null,-1)),VEt=we(()=>w("br",null,null,-1)),UEt=we(()=>w("div",{style:{clear:"both"}},null,-1)),GEt={id:"workerlist"},jEt=we(()=>w("summary",null,"All towns/workers list",-1)),WEt=U(" show: "),HEt={class:"switch mauto"},XEt=we(()=>w("span",{class:"slider"},null,-1)),YEt=U(" stats after skills "),qEt={class:"switch mauto"},ZEt=we(()=>w("span",{class:"slider"},null,-1)),KEt=U(" efficiency ");function JEt(e,t,r,n,i,o){const a=pe("WorkerEdit"),s=pe("ModalDialog"),l=pe("WorkerSendSelection"),u=pe("LodgingSelection"),c=pe("HousesSelection"),f=pe("FloatingModifierEdit"),h=pe("NodeMap"),d=pe("EmpireOverview"),p=pe("Town"),v=pe("Plantzone");return D(),$(W,null,[kt(s,{show:e.workerDialogVisible,"onUpdate:show":t[1]||(t[1]=g=>e.workerDialogVisible=g)},{default:Le(()=>[kt(a,{workerEditing:e.workerEditing,workerInitial:e.workerEditingInitial,initialProfit:e.workerEditingInitialProfit,show:e.workerDialogVisible,"onUpdate:show":t[0]||(t[0]=g=>e.workerDialogVisible=g)},null,8,["workerEditing","workerInitial","initialProfit","show"])]),_:1},8,["show"]),kt(s,{show:e.sendDialogVisible,"onUpdate:show":t[3]||(t[3]=g=>e.sendDialogVisible=g)},{default:Le(()=>[kt(l,{options:e.sendSelection,show:e.sendDialogVisible,"onUpdate:show":t[2]||(t[2]=g=>e.sendDialogVisible=g)},null,8,["options","show"])]),_:1},8,["show"]),kt(s,{show:e.lodgingDialogVisible,"onUpdate:show":t[5]||(t[5]=g=>e.lodgingDialogVisible=g)},{default:Le(()=>[kt(u,{tk:e.lodgingDialogTown,o:e.lodgingDialogData,show:e.lodgingDialogVisible,"onUpdate:show":t[4]||(t[4]=g=>e.lodgingDialogVisible=g)},null,8,["tk","o","show"])]),_:1},8,["show"]),kt(s,{show:e.housesDialogVisible,"onUpdate:show":t[7]||(t[7]=g=>e.housesDialogVisible=g)},{default:Le(()=>[kt(c,{tk:e.housesDialogTown,show:e.housesDialogVisible,"onUpdate:show":t[6]||(t[6]=g=>e.housesDialogVisible=g)},null,8,["tk","show"])]),_:1},8,["show"]),kt(s,{show:e.importDialogVisible,"onUpdate:show":t[10]||(t[10]=g=>e.importDialogVisible=g)},{default:Le(()=>[w("form",{onSubmit:t[9]||(t[9]=pm(g=>o.fileImport(g),["prevent"]))},[w("input",{type:"file",accept:".json",onClick:t[8]||(t[8]=g=>o.fileImport())}),UPt,GPt],32)]),_:1},8,["show"]),kt(s,{show:e.modifierDialogVisible,"onUpdate:show":t[13]||(t[13]=g=>e.modifierDialogVisible=g)},{default:Le(()=>[kt(f,{rgk:e.modifierDialogRgroup,wspd:e.modifierDialogWspd,workload:e.modifierDialogWkld,show:e.modifierDialogVisible,"onUpdate:show":t[11]||(t[11]=g=>e.modifierDialogVisible=g)},null,8,["rgk","wspd","workload","show"]),w("div",jPt,[WPt,Tt(w("input",{type:"range",class:"vmid","onUpdate:modelValue":t[12]||(t[12]=g=>e.modifierDialogWspd=g),min:"40",max:"200",step:"0.01"},null,512),[[le,e.modifierDialogWspd,void 0,{number:!0}]]),U(" "+L(e.modifierDialogWspd),1)])]),_:1},8,["show"]),w("main",null,[w("div",HPt,[kt(h,{clickedObj:e.clickedNode,"onUpdate:clickedObj":t[14]||(t[14]=g=>e.clickedNode=g),hoverInfo:e.hoverInfo,"onUpdate:hoverInfo":t[15]||(t[15]=g=>e.hoverInfo=g),panToPzk:e.panToPzk,"onUpdate:panToPzk":t[16]||(t[16]=g=>e.panToPzk=g),panToPaPos:e.panToPaPos,"onUpdate:panToPaPos":t[17]||(t[17]=g=>e.panToPaPos=g),onPanAnywhere:t[18]||(t[18]=g=>e.panToPaPos=null)},null,8,["clickedObj","hoverInfo","panToPzk","panToPaPos"]),e.hoverInfo&&e.hoverInfo.object?(D(),$("div",{key:0,id:"tooltip",style:Ll({left:e.hoverInfo.x+"px",top:e.hoverInfo.y+"px"})},[U(L(e.hoverInfo.object.key)+" "+L(n.gameStore.uloc.node[e.hoverInfo.object.key])+" "+L(e.hoverInfo.object.thisCpCost)+"CP ",1),e.hoverInfo.object.key in this.gameStore.plantzones?(D(),$("span",XPt,[(D(!0),$(W,null,Nt(this.gameStore.plantzones[e.hoverInfo.object.key].unlucky,(g,m)=>(D(),$("img",{src:o.makeIconSrc(m),class:"iconitem"},null,8,YPt))),256))])):pt("",!0),qPt],4)):pt("",!0),w("div",ZPt,[w("details",null,[KPt,kt(d,{onPanToPaPos:t[19]||(t[19]=g=>e.panToPaPos=g)})])]),w("div",JPt,[e.clickedNode?(D(),$("div",QPt,[w("div",{class:"rolldown",onClick:t[20]||(t[20]=g=>e.clickedNode=null)},eEt),w("div",rEt,[e.clickedNode.key in n.gameStore._tnk2tk&&n.gameStore.tnk2tk(e.clickedNode.key)in n.gameStore.lodgingPerTown?(D(),$("table",nEt,[kt(p,{o:n.gameStore.lodgingPerTown[n.gameStore.tnk2tk(e.clickedNode.key)],tk:n.gameStore.tnk2tk(e.clickedNode.key),onSelectLodging:o.selectLodging,onSelectHouses:o.selectHouses,onHireWorker:o.hireWorker,onEditWorker:o.editWorker,onSendWorker:o.sendWorker,onPanToPaPos:t[21]||(t[21]=g=>e.panToPaPos=g)},null,8,["o","tk","onSelectLodging","onSelectHouses","onHireWorker","onEditWorker","onSendWorker"])])):pt("",!0)]),!(n.gameStore.tnk2tk[e.clickedNode.key]in n.gameStore.lodgingPerTown)&&!(e.clickedNode.key in n.gameStore.plantzoneDrops)?(D(),$("div",iEt,[w("p",null,[U(L(n.gameStore.uloc.node[e.clickedNode.key])+" ",1),n.userStore.autotakenGrindNodes.has(e.clickedNode.key)?(D(),$(W,{key:0},[w("s",null,L(e.clickedNode.thisCpCost)+"CP",1),oEt,aEt],64)):(D(),$(W,{key:1},[U(L(e.clickedNode.thisCpCost)+"CP ",1)],64))]),e.clickedNode.key in n.userStore.currentNodesJobs?(D(),$("p",sEt,[lEt,(D(!0),$(W,null,Nt(n.userStore.currentNodesJobs[e.clickedNode.key],g=>(D(),$("p",null,L(o.formatFixed(100*n.userStore.pzJobs[g].profit.priceDaily/n.userStore.currentNodesCashflow[e.clickedNode.key]))+"% - "+L(n.gameStore.plantzoneName(g))+" @ "+L(o.formatFixed(n.userStore.pzJobs[g].profit.priceDaily,2))+" M$/day ",1))),256))])):pt("",!0),e.prerelease_zerocost?(D(),$(W,{key:1},[w("input",{type:"checkbox",onChange:t[22]||(t[22]=g=>n.userStore.modifyGrindTakens(g,e.clickedNode.key)),checked:n.userStore.grindTakenSet.has(e.clickedNode.key)},null,40,uEt),cEt],64)):pt("",!0)])):pt("",!0),e.clickedNode.key in n.gameStore.plantzoneDrops?(D(),$("div",fEt,[kt(v,{pzk:e.clickedNode.key,onShowModifierDialog:o.showModifierDialog,onEditWorker:o.editWorker},null,8,["pzk","onShowModifierDialog","onEditWorker"])])):pt("",!0)])):pt("",!0)]),w("div",hEt,[w("div",dEt,[w("details",null,[w("summary",null,"Total workers: "+L(n.userStore.countWorkers),1),w("p",pEt,[U(" nodes: "+L(n.userStore.workedPlantzones.size)+" ",1),vEt,n.userStore.workersFarmingCount?(D(),$(W,{key:0},[n.userStore.farmingEnable?n.userStore.workersFarmingCount&&n.userStore.workersFarmingCount<10?(D(),$("abbr",mEt,"\u26A0\uFE0F")):pt("",!0):(D(),$("abbr",gEt,"\u26A0\uFE0F")),U(" farming: "+L(n.userStore.workersFarmingCount)+" ",1),yEt],64)):pt("",!0),n.userStore.workersWorkshopCount?(D(),$(W,{key:1},[U(" workshop: "+L(n.userStore.workersWorkshopCount)+" ",1),_Et],64)):pt("",!0),n.userStore.workersCustomCount?(D(),$(W,{key:2},[U(" custom: "+L(n.userStore.workersCustomCount)+" ",1),bEt],64)):pt("",!0),n.userStore.workersIdleCount?(D(),$(W,{key:3},[U(" \u26A0\uFE0F idle: "+L(n.userStore.workersIdleCount),1)],64)):pt("",!0)])]),w("details",null,[w("summary",null,"Total CP: "+L(o.formatFixed(n.userStore.totalCP+n.userStore.autotakenGrindNodesCP)),1),w("p",wEt,[n.userStore.autotakenGrindNodesCP?(D(),$(W,{key:0},[SEt,w("abbr",{title:n.userStore.grindTakenDesc},L(n.userStore.autotakenGrindNodesCP),9,TEt),PEt],64)):pt("",!0),U(" nodes: "+L(n.userStore.autotakenNodesCP)+" ",1),EEt,n.userStore.farmingEnable?(D(),$(W,{key:1},[U(" farming: "+L(n.userStore.farmingCP)+" ",1),AEt],64)):pt("",!0),n.userStore.workersWorkshopCount?(D(),$(W,{key:2},[U(" workshops: "+L(o.formatFixed(n.userStore.workshopTotalCP))+" ",1),CEt],64)):pt("",!0),n.userStore.workersCustomCount?(D(),$(W,{key:3},[U(" custom: "+L(o.formatFixed(n.userStore.customTotalCP))+" ",1),MEt],64)):pt("",!0),n.userStore.prerelease_housesconfig?(D(),$(W,{key:4},[U(" lodgage: "+L(n.userStore.lodgage)+" ",1),kEt],64)):(D(),$(W,{key:5},[U(" lodging: "+L(n.userStore.haveLodging.cp.total)+" ",1),xEt],64))])]),w("details",null,[w("summary",null,"Total M$/day: "+L(o.formatFixed(n.userStore.allJobsTotalDailyProfit,2)),1),w("p",LEt,[U(" nodes: "+L(o.formatFixed(n.userStore.pzJobsTotalDailyProfit,2))+" ",1),IEt,n.userStore.workersFarmingCount?(D(),$(W,{key:0},[U(" farming: "+L(o.formatFixed(n.userStore.farmingTotalProfit,2))+" ",1),OEt],64)):pt("",!0),n.userStore.workersWorkshopCount?(D(),$(W,{key:1},[U(" workshops: "+L(o.formatFixed(n.userStore.workshopTotalProfit,2))+" ",1),REt],64)):pt("",!0),n.userStore.workersCustomCount?(D(),$(W,{key:2},[U(" custom: "+L(o.formatFixed(n.userStore.customTotalProfit,2))+" ",1),DEt],64)):pt("",!0)])]),w("details",null,[w("summary",null,"Total efficiency: "+L(o.formatFixed(n.userStore.allJobsDailyProfitPerCp,3)),1),NEt,w("p",FEt,[U(" nodes: "+L(o.formatFixed(n.userStore.pzJobsDailyProfitPerCp,3))+" ",1),BEt,n.userStore.farmingEnable?(D(),$(W,{key:0},[U(" farming: "+L(o.formatFixed(n.userStore.farmingJobsDailyProfitPerCp,3))+" ",1),$Et],64)):pt("",!0),n.userStore.workersWorkshopCount?(D(),$(W,{key:1},[U(" workshop: "+L(o.formatFixed(n.userStore.workshopJobsDailyProfitPerCp,3))+" ",1),zEt],64)):pt("",!0),n.userStore.workersCustomCount?(D(),$(W,{key:2},[U(" custom: "+L(o.formatFixed(n.userStore.customJobsDailyProfitPerCp,3))+" ",1),VEt],64)):pt("",!0)])])]),UEt,w("div",GEt,[w("details",null,[jEt,WEt,w("label",HEt,[Tt(w("input",{type:"checkbox","onUpdate:modelValue":t[23]||(t[23]=g=>n.userStore.displayWorkerStatsForPz=g)},null,512),[[Kn,n.userStore.displayWorkerStatsForPz]]),XEt,YEt]),w("label",qEt,[Tt(w("input",{type:"checkbox","onUpdate:modelValue":t[24]||(t[24]=g=>n.userStore.displayProfitPerCp=g)},null,512),[[Kn,n.userStore.displayProfitPerCp]]),ZEt,KEt]),w("button",{onClick:t[25]||(t[25]=g=>e.importDialogVisible=!0)},"import"),w("button",{onClick:t[26]||(t[26]=g=>o.fileExport())},"export"),w("button",{onClick:t[27]||(t[27]=g=>o.hireAll())},"hire all"),w("button",{onClick:t[28]||(t[28]=g=>o.fireAll())},"fire all"),w("table",null,[(D(!0),$(W,null,Nt(n.gameStore.lodgingPerTown,(g,m)=>(D(),bs(p,{o:g,tk:m,onSelectLodging:o.selectLodging,onSelectHouses:o.selectHouses,onHireWorker:o.hireWorker,onEditWorker:o.editWorker,onSendWorker:o.sendWorker,onPanToPaPos:t[29]||(t[29]=y=>e.panToPaPos=y)},null,8,["o","tk","onSelectLodging","onSelectHouses","onHireWorker","onEditWorker","onSendWorker"]))),256))])])])])])])],64)}const QEt=$e(VPt,[["render",JEt],["__scopeId","data-v-9d04c25b"]]);const tAt={setup(){const e=re(),t=xt(),r=Ei(),n=R1();return n.$subscribe((i,o)=>{localStorage.setItem("map",JSON.stringify(o))}),e.$subscribe((i,o)=>{const a=Date.now();localStorage.setItem("user",JSON.stringify(o)),console.log("userStore subscription took",Date.now()-a,"ms")}),{marketStore:r,userStore:e,gameStore:t,mapStore:n}},data:()=>({wspd:150,mspd:10,luck:10}),methods:{makeIconSrc:Mo,formatFixed:Bt,highlightHash(){if(this.$route.hash){const e=document.querySelector(this.$route.hash);e&&(e.scrollIntoView(),e.classList.add("anim"))}}},computed:{allPlantzonesNearestCpTownProfit(){const e=Date.now();let t=[];for(const r of Object.keys(this.gameStore.plantzones)){const i=this.gameStore.plantzoneNearestCpTownProfit(r,this.wspd,this.mspd,this.luck);t.push(i)}return t.sort((r,n)=>isFinite(n.dailyPerCp-r.dailyPerCp)?n.dailyPerCp-r.dailyPerCp:isFinite(r.dailyPerCp)?-1:1),console.log("cpt: plantzonesNearestCpTownProfit took",Date.now()-e,"ms"),t}},mounted(){this.highlightHash()},updated(){this.$nextTick(()=>this.highlightHash())}},Ly=e=>(cn("data-v-e05bf1d4"),e=e(),fn(),e),eAt={id:"toptext"},rAt=Ly(()=>w("p",null,"Note that CP costs shown here are independent for each node. In practice however, multiple resource nodes can reuse the same town connection, resulting in higher combined $/CP.",-1)),nAt=Ly(()=>w("p",null,"For example, taking both Shakatu Fig nodes is not 3+3 but 3+1 CP. Use worker management on Home page to take this (and also lodging/storage costs) into account.",-1)),iAt=U(" Compute using worker: "),oAt=U(" workspeed, "),aAt=U(" movespeed, "),sAt=U(" luck "),lAt={class:"scroll"},uAt=Ly(()=>w("tr",null,[w("th",{rowspan:"2"},"Node"),w("th",{colspan:"3"},"cycle drops"),w("th",{rowspan:"2"},"workload"),w("th",{colspan:"3"},"best town"),w("th",{colspan:"3"},"daily"),w("th",{rowspan:"2"},"\u{1F451}")],-1)),cAt=Ly(()=>w("tr",null,[w("th",null,"normal"),w("th",null,"lucky"),w("th",null,"$ value"),w("th",null,"name"),w("th",null,"dist"),w("th",null,"CP"),w("th",null,"cycles"),w("th",null,"M$"),w("th",null,"M$/CP")],-1)),fAt=["id"],hAt=["src"],dAt=["src"],pAt={class:"tar"},vAt={class:"tar"},gAt={class:"tac"},mAt={class:"tar"},yAt={class:"tar"},_At={class:"tar"},bAt={class:"tar"},wAt={class:"tar"},SAt={class:"tac"};function TAt(e,t,r,n,i,o){const a=pe("RouterLink");return D(),$("main",null,[w("div",eAt,[rAt,nAt,w("p",null,[iAt,Tt(w("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>e.wspd=s),type:"number",class:"w42em",min:"40",max:"200"},null,512),[[le,e.wspd]]),oAt,Tt(w("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>e.mspd=s),type:"number",class:"w42em",min:"1",max:"30"},null,512),[[le,e.mspd]]),aAt,Tt(w("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>e.luck=s),type:"number",class:"w42em",min:"0",max:"50"},null,512),[[le,e.luck]]),sAt])]),w("div",lAt,[w("table",null,[uAt,cAt,(D(!0),$(W,null,Nt(o.allPlantzonesNearestCpTownProfit,s=>(D(),$("tr",{id:"drops"+s.key},[w("td",null,[kt(a,{tag:"a",to:{path:"./",hash:"#node"+s.key}},{default:Le(()=>[U(L(n.gameStore.plantzoneName(s.key)),1)]),_:2},1032,["to"])]),w("td",null,[(D(!0),$(W,null,Nt(s.unlucky,(l,u)=>(D(),$("div",null,[kt(a,{tag:"a",to:{path:"./settings",hash:"#item"+u}},{default:Le(()=>[w("span",null,[U(L(l)+" ",1),w("img",{src:o.makeIconSrc(u),class:"iconitem"},null,8,hAt),U(" "+L(n.gameStore.uloc.item[u]),1)])]),_:2},1032,["to"])]))),256))]),w("td",null,[(D(!0),$(W,null,Nt(s.lucky,(l,u)=>(D(),$("div",null,[kt(a,{tag:"a",to:{path:"./settings",hash:"#item"+u}},{default:Le(()=>[U(L(l)+" ",1),w("img",{src:o.makeIconSrc(u),class:"iconitem"},null,8,dAt)]),_:2},1032,["to"])]))),256))]),w("td",pAt,L(o.formatFixed(s.cycleValue,0)),1),w("td",vAt,[n.userStore.allowFloating&&n.userStore.useFloatingModifiers[s.regiongroup]?(D(),$(W,{key:0},[U(" ~"+L(o.formatFixed(n.userStore.medianWorkloads[s.key],2)),1)],64)):(D(),$(W,{key:1},[U(L(o.formatFixed(s.activeWorkload,2)),1)],64))]),w("td",gAt,L(n.gameStore.nodeName(s.tnk)),1),w("td",mAt,L(o.formatFixed(s.dist,0)),1),w("td",yAt,L(s.cp),1),w("td",_At,L(o.formatFixed(s.cyclesDaily,1)),1),w("td",bAt,L(o.formatFixed(s.priceDaily,2)),1),w("td",wAt,L(o.formatFixed(s.dailyPerCp,3)),1),w("td",SAt,L(n.userStore.workedPlantzones.has(s.key.toString())?"\u2713":"\u2717"),1)],8,fAt))),256))])])])}const PAt=$e(tAt,[["render",TAt],["__scopeId","data-v-e05bf1d4"]]),EAt={setup(){const e=xt(),t=re(),r=Ei();return t.$subscribe((n,i)=>{const o=Date.now();localStorage.setItem("user",JSON.stringify(i)),console.log("userStore subscription took",Date.now()-o,"ms")}),{gameStore:e,userStore:t,marketStore:r}},data:()=>({}),created(){},mounted(){},watch:{},methods:{}},AAt=w("br",null,null,-1),CAt=w("br",null,null,-1),MAt=w("tr",null,[w("th"),w("th",null,"Town / House"),w("th",null,"Lodging"),w("th",null,"CP")],-1),kAt=w("td",null,null,-1),xAt={class:"header"},LAt=U(" P2W: "),IAt=["onUpdate:modelValue"],OAt=["onUpdate:modelValue"],RAt=["href"];function DAt(e,t,r,n,i,o){return D(),$("main",null,[U(" Total lodging slots: "+L(n.userStore.haveLodging.slots.total),1),AAt,U(" Total CP spent: "+L(n.userStore.haveLodging.cp.total),1),CAt,w("table",null,[MAt,(D(!0),$(W,null,Nt(n.gameStore.lodgingPerTown,(a,s)=>(D(),$(W,null,[w("tr",null,[kAt,w("td",null,[w("span",xAt,L(n.gameStore.uloc.town[s]),1),LAt,Tt(w("input",{type:"number","onUpdate:modelValue":l=>n.userStore.lodgingP2W[s]=l,class:"short"},null,8,IAt),[[le,n.userStore.lodgingP2W[s],void 0,{number:!0}]])]),w("td",null,L(n.userStore.haveLodging.slots.perTown[s]),1),w("td",null,L(n.userStore.haveLodging.cp.perTown[s]),1)]),(D(!0),$(W,null,Nt(a.houses,l=>(D(),$("tr",null,[w("td",null,[Tt(w("input",{type:"checkbox","onUpdate:modelValue":u=>n.userStore.lodgingTaken[l.key]=u},null,8,OAt),[[Kn,n.userStore.lodgingTaken[l.key]]])]),w("td",null,[w("a",{href:"https://bdocodex.com/us/npc/"+l.key},L(n.gameStore.uloc.char[l.key]),9,RAt)]),w("td",null,L(l.lodgingSpaces),1),w("td",null,L(l.CP),1)]))),256))],64))),256))])])}const NAt=$e(EAt,[["render",DAt]]);const FAt={setup(){const e=xt(),t=re(),r=Ei();return t.$subscribe((n,i)=>{const o=Date.now();localStorage.setItem("user",JSON.stringify(i)),console.log("userStore subscription took",Date.now()-o,"ms")}),{gameStore:e,userStore:t,marketStore:r}},components:{ModalDialog:yP,FloatingModifierEdit:zE},data:()=>({floatingDialogWspd:150,floatingDialogRgroup:1,floatingDialogWkld:400,floatingDialogVisible:!1,importDialogVisible:!1}),watch:{"userStore.marketUrl":{handler(e,t){this.marketStore.fetchData()}}},methods:{formatFixed:Bt,fileParse(e){let t=e.target.result,r=JSON.parse(t);this.userStore.$patch(r),this.importDialogVisible=!1},fileImport(e){if(!e)return;const t=e.target[0].files;if(t.length<1)return;const r=t[0];console.log("fileImport",r);let n=new FileReader;n.onload=this.fileParse,n.readAsText(r)},showDialog(e){this.floatingDialogVisible=!0,this.floatingDialogRgroup=Number(e);for(let t of this.gameStore.regionGroups[e]){this.floatingDialogWkld=this.gameStore.plantzones[t].peg.time;break}},fileExport(){var e=document.createElement("a");let t={regionModifiers:this.userStore.regionModifiers,regionModifiers2:this.userStore.regionModifiers2};const r=JSON.stringify(t);var n=new Blob([r],{type:"text/plain"});e.href=URL.createObjectURL(n),e.download="modifiers.json",e.click()},clear(){this.userStore.regionModifiers={},this.userStore.regionModifiers2={}}}},$i=e=>(cn("data-v-71ddcc88"),e=e(),fn(),e),BAt=$i(()=>w("button",null,"import",-1)),$At=$i(()=>w("br",null,null,-1)),zAt=U(" Test on node: "),VAt=["value"],UAt=$i(()=>w("br",null,null,-1)),GAt=U(" With workspeed: "),jAt={id:"toptext"},WAt=$i(()=>w("p",null,"Productivity modifiers are shown ingame as green bars at world map > resource view.",-1)),HAt=$i(()=>w("p",null,"Low modifier means lots of players are working in the area and workloads are increased (up to 2x of base).",-1)),XAt=$i(()=>w("p",null,"If unspecified, 0% modifier will be used (= max workload = min cycles per day)",-1)),YAt=$i(()=>w("summary",null,"Advanced",-1)),qAt=U("allow floating modifiers "),ZAt=$i(()=>w("tr",null,[w("th",null,"#"),w("th",null,"Modifier%"),w("th",null,"Contains nodes")],-1)),KAt={class:"center"},JAt={class:"center"},QAt={key:0,class:"switch mauto"},tCt=["onUpdate:modelValue"],eCt=$i(()=>w("span",{class:"slider"},null,-1)),rCt=U(" floating"),nCt=$i(()=>w("br",null,null,-1)),iCt=["onClick"],oCt=U(" constant"),aCt=$i(()=>w("br",null,null,-1)),sCt=["onUpdate:modelValue"];function lCt(e,t,r,n,i,o){const a=pe("ModalDialog"),s=pe("FloatingModifierEdit"),l=pe("RouterLink");return D(),$(W,null,[kt(a,{show:e.importDialogVisible,"onUpdate:show":t[2]||(t[2]=u=>e.importDialogVisible=u)},{default:Le(()=>[w("form",{onSubmit:t[1]||(t[1]=pm(u=>o.fileImport(u),["prevent"]))},[w("input",{type:"file",accept:".json",onClick:t[0]||(t[0]=u=>o.fileImport())}),BAt],32)]),_:1},8,["show"]),kt(a,{show:e.floatingDialogVisible,"onUpdate:show":t[6]||(t[6]=u=>e.floatingDialogVisible=u)},{default:Le(()=>[kt(s,{rgk:e.floatingDialogRgroup,wspd:e.floatingDialogWspd,workload:e.floatingDialogWkld,show:e.floatingDialogVisible,"onUpdate:show":t[3]||(t[3]=u=>e.floatingDialogVisible=u)},null,8,["rgk","wspd","workload","show"]),$At,zAt,Tt(w("select",{"onUpdate:modelValue":t[4]||(t[4]=u=>e.floatingDialogWkld=u)},[(D(!0),$(W,null,Nt(n.gameStore.regionGroups[e.floatingDialogRgroup],u=>(D(),$("option",{value:n.gameStore.plantzones[u]&&n.gameStore.plantzones[u].peg.time},L(n.gameStore.plantzoneName(u))+" - "+L(n.gameStore.plantzones[u]&&n.gameStore.plantzones[u].peg.time)+" base ",9,VAt))),256))],512),[[_n,e.floatingDialogWkld]]),UAt,GAt,Tt(w("input",{type:"range",class:"vmid","onUpdate:modelValue":t[5]||(t[5]=u=>e.floatingDialogWspd=u),min:"40",max:"200",step:"0.01"},null,512),[[le,e.floatingDialogWspd,void 0,{number:!0}]]),U(" "+L(e.floatingDialogWspd),1)]),_:1},8,["show"]),w("div",jAt,[WAt,HAt,XAt,w("details",null,[YAt,w("button",{onClick:t[7]||(t[7]=u=>e.importDialogVisible=!0)},"import"),w("button",{onClick:t[8]||(t[8]=u=>o.fileExport())},"export"),w("button",{onClick:t[9]||(t[9]=u=>o.clear())},"clear"),w("label",null,[Tt(w("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=u=>n.userStore.allowFloating=u)},null,512),[[Kn,n.userStore.allowFloating]]),qAt])])]),w("table",null,[ZAt,(D(!0),$(W,null,Nt(n.gameStore.regionGroups,(u,c)=>(D(),$("tr",null,[w("td",KAt,L(c),1),w("td",JAt,[n.userStore.allowFloating?(D(),$("label",QAt,[Tt(w("input",{type:"checkbox","onUpdate:modelValue":f=>n.userStore.useFloatingModifiers[c]=f},null,8,tCt),[[Kn,n.userStore.useFloatingModifiers[c]]]),eCt])):pt("",!0),n.userStore.allowFloating&&n.userStore.useFloatingModifiers[c]?(D(),$(W,{key:1},[rCt,nCt,U(" ~"+L(o.formatFixed(n.userStore.medianModifiers[c],2))+" ",1),w("button",{onClick:f=>o.showDialog(c)},"edit",8,iCt)],64)):(D(),$(W,{key:2},[oCt,aCt,Tt(w("input",{type:"number","onUpdate:modelValue":f=>n.userStore.regionModifiers[c]=f,min:"0",max:"100",step:"0.01",class:"w42em"},null,8,sCt),[[le,n.userStore.regionModifiers[c],void 0,{number:!0}]])],64))]),w("td",null,[(D(!0),$(W,null,Nt(u,f=>(D(),$("div",null,[kt(l,{tag:"a",to:{path:"./",hash:"#node"+f}},{default:Le(()=>[U(L(n.gameStore.plantzoneName(f)),1)]),_:2},1032,["to"]),U(" "+L(n.gameStore.ready&&n.gameStore.plantzones[f].peg.time)+" ",1),n.userStore.allowFloating&&n.userStore.useFloatingModifiers[c]?(D(),$(W,{key:0},[U(" \u2933 "+L(o.formatFixed(n.userStore.medianWorkloads[f],2)),1)],64)):(D(),$(W,{key:1},[U(" \u2192 "+L(n.gameStore.ready?o.formatFixed(n.gameStore.plantzones[f].activeWorkload,2):""),1)],64))]))),256))])]))),256))])],64)}const uCt=$e(FAt,[["render",lCt],["__scopeId","data-v-71ddcc88"]]),cCt={setup(){const e=re();return{gameStore:xt(),userStore:e}},props:{show:{type:Boolean,default:!1}},created(){this.fetchData()},data:()=>({houses:{},towns:[-1],usages:[-1],levels:[-1],filterTown:-1,filterUsage:-1,filterLevel:-1,selectedHouse:-1}),computed:{filteredTowns(){const e=new Set([-1]);for(const[t,r]of Object.entries(this.houses))(this.filterUsage==-1||this.filterUsage in r.CraftList)&&(this.filterLevel==-1||this.filterLevel<=r.CraftList[this.filterUsage])&&r.affTown!=694&&e.add(r.affTown);return[...e].sort((t,r)=>t-r)},filteredUsages(){const e=new Set([-1]);for(const[t,r]of Object.entries(this.houses))if(this.filterTown==-1||r.affTown==this.filterTown)for(const[n,i]of Object.entries(r.CraftList))n>10&&e.add(n);return[...e].sort((t,r)=>t-r)},filteredLevels(){const e=new Set([-1]);if(this.filterUsage!=-1)for(const[t,r]of Object.entries(this.houses))(this.filterTown==-1||r.affTown==this.filterTown)&&this.filterUsage in r.CraftList&&e.add(r.CraftList[this.filterUsage]);return[...e].sort((t,r)=>t-r)},filteredHouses(){const e=[];for(const[t,r]of Object.entries(this.houses))(this.filterTown==-1||r.affTown==this.filterTown)&&(this.filterUsage==-1||this.filterUsage in r.CraftList)&&(this.filterLevel==-1||this.filterLevel<=r.CraftList[this.filterUsage])&&e.push(Number(t));return e}},methods:{formatFixed:Bt,async fetchData(){this.houses=await(await fetch("data/houseinfo.json")).json();const e=new Set([-1]),t=new Set([-1]);for(const[r,n]of Object.entries(this.houses)){e.add(n.affTown);for(const[o,a]of Object.entries(n.CraftList))o>10&&t.add(o);this.houses[r].CPfull=this.houses[r].CP;let i=n.needHouseKey;for(;i;)this.houses[r].CPfull+=this.houses[i].CP,i=this.houses[i].needHouseKey}this.towns=e,this.usages=[...t].sort((r,n)=>r-n)},addWorkshop(e){this.userStore.userWorkshops[e]={...this.userStore.defaultUserWorkshop}},deleteWorkshop(e){delete this.userStore.userWorkshops[e]}}},fCt=w("h3",null,"\u{1F3ED}Workshops config",-1),hCt={class:"sa"},dCt=w("tr",null,[w("th",null,"House"),w("th",null,"label"),w("th",null,"worktype"),w("th",null,"workload"),w("th",null,[U("$/cycle "),w("abbr",{title:"use Sho's Workshop Profitability Calculator"},"\u2139\uFE0F")]),w("th",null,[U("CP "),w("abbr",{title:"full cost of operating the workshop (including connection houses)"},"\u2139\uFE0F")]),w("th",null,"action")],-1),pCt=["onUpdate:modelValue"],vCt=["onUpdate:modelValue"],gCt=lP('<option value="unk">unknown</option><option value="jewelry">jewelry</option><option value="mass">mass</option><option value="weap">weapon</option><option value="tool">tool</option><option value="furn">furniture</option><option value="costume">costume</option><option value="refine">refine</option><option value="siege">siege</option><option value="mount">mount</option><option value="exclus">exclusive</option><option value="pack_produce">pack_produce</option><option value="pack_herb">pack_herb</option><option value="pack_mushr">pack_mushr</option><option value="pack_fish">pack_fish</option><option value="pack_timber">pack_timber</option><option value="pack_ore">pack_ore</option>',17),mCt=[gCt],yCt=["onUpdate:modelValue"],_Ct=["onUpdate:modelValue"],bCt=["onUpdate:modelValue"],wCt=["onClick"],SCt=U(" new entry:"),TCt=w("br",null,null,-1),PCt={class:"borderless"},ECt=w("td",null,"town",-1),ACt=["value"],CCt=w("td",null,"usage",-1),MCt=["value"],kCt=w("td",null,"level",-1),xCt=["value"],LCt=w("td",null,"house",-1),ICt=["value"],OCt=["disabled"],RCt={key:0,class:"fsxs"};function DCt(e,t,r,n,i,o){return D(),$(W,null,[fCt,w("table",hCt,[dCt,(D(!0),$(W,null,Nt(n.userStore.userWorkshops,(a,s)=>(D(),$("tr",null,[w("td",null,L(n.gameStore.uloc.char[s]),1),w("td",null,[Tt(w("input",{class:"w5em","onUpdate:modelValue":l=>a.label=l},null,8,pCt),[[le,a.label,void 0,{number:!0}]])]),w("td",null,[Tt(w("select",{"onUpdate:modelValue":l=>a.industry=l},mCt,8,vCt),[[_n,a.industry]])]),w("td",null,[Tt(w("input",{type:"number",class:"w5em","onUpdate:modelValue":l=>a.manualWorkload=l},null,8,yCt),[[le,a.manualWorkload,void 0,{number:!0}]])]),w("td",null,[Tt(w("input",{type:"number",class:"w5em","onUpdate:modelValue":l=>a.manualCycleIncome=l},null,8,_Ct),[[le,a.manualCycleIncome,void 0,{number:!0}]])]),w("td",null,[Tt(w("input",{type:"number",class:"float2","onUpdate:modelValue":l=>a.manualCp=l},null,8,bCt),[[le,a.manualCp,void 0,{number:!0}]])]),w("td",null,[w("button",{onClick:l=>o.deleteWorkshop(s)},"delete",8,wCt)])]))),256))]),SCt,TCt,w("table",PCt,[w("tr",null,[ECt,w("td",null,[Tt(w("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>e.filterTown=a)},[(D(!0),$(W,null,Nt(o.filteredTowns,a=>(D(),$("option",{value:a},L(a>=0?n.gameStore.uloc.town[a]:"any"),9,ACt))),256))],512),[[_n,e.filterTown]])])]),w("tr",null,[CCt,w("td",null,[Tt(w("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>e.filterUsage=a)},[(D(!0),$(W,null,Nt(o.filteredUsages,a=>(D(),$("option",{value:a},L(a>=0?n.gameStore.uloc.housetype[a]+" "+a:"any"),9,MCt))),256))],512),[[_n,e.filterUsage]])])]),w("tr",null,[kCt,w("td",null,[Tt(w("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>e.filterLevel=a)},[(D(!0),$(W,null,Nt(o.filteredLevels,a=>(D(),$("option",{value:a},L(a>=0?a+"+":"any"),9,xCt))),256))],512),[[_n,e.filterLevel]])])]),w("tr",null,[LCt,w("td",null,[Tt(w("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>e.selectedHouse=a)},[(D(!0),$(W,null,Nt(o.filteredHouses,a=>(D(),$("option",{value:a},L(a)+" "+L(n.gameStore.uloc.char[a])+" "+L(a in n.userStore.userWorkshops?"\u{1F451}":""),9,ICt))),256))],512),[[_n,e.selectedHouse]])])])]),w("button",{disabled:e.selectedHouse==-1||e.selectedHouse in n.userStore.userWorkshops,onClick:t[4]||(t[4]=a=>o.addWorkshop(e.selectedHouse))},"add",8,OCt),e.selectedHouse in n.userStore.userWorkshops?(D(),$("span",RCt," already in list! ")):pt("",!0)],64)}const NCt=$e(cCt,[["render",DCt]]);const FCt={setup(){const e=xt(),t=re(),r=Ei();return t.$subscribe((n,i)=>{const o=Date.now();localStorage.setItem("user",JSON.stringify(i)),console.log("userStore subscription took",Date.now()-o,"ms")}),{gameStore:e,userStore:t,marketStore:r}},components:{ModalDialog:yP,WorkerEdit:p$,WorkshopsConfig:NCt},data:()=>({workerDialogVisible:!1,workshopsConfigVisible:!1,highlightPending:!1}),watch:{"userStore.marketUrl":{handler(e,t){this.marketStore.fetchData()}}},methods:{makeIconSrc:Mo,formatFixed:Bt,reload(){this.marketStore.ready=!1,this.marketStore.fetchData()},highlightHash(){if(!!this.highlightPending&&(console.log("highlighting",this.$route.hash,this.highlightPending),this.$route.hash)){const e=document.querySelector(this.$route.hash);e&&(this.highlightPending=!1,e.scrollIntoView(),e.classList.add("anim"))}}},mounted(){this.highlightPending=!0,this.highlightHash()},updated(){this.$nextTick(()=>{this.highlightHash()})}},hn=e=>(cn("data-v-ac2e5748"),e=e(),fn(),e),BCt={id:"toptext"},$Ct=U(" Enable \u{1F33B}Farming "),zCt=U(" (reserve 80 CP for 10 large fences)."),VCt=hn(()=>w("br",null,null,-1)),UCt=U(" Total profit:"),GCt=hn(()=>w("br",null,null,-1)),jCt=U(" 10 workers: "),WCt=U(" M$/day (use "),HCt=hn(()=>w("a",{href:"https://bit.ly/MagicalFarmingProfit"},"MFP",-1)),XCt=U(" to estimate) "),YCt=hn(()=>w("br",null,null,-1)),qCt=U(" 0 workers: "),ZCt=U(" M$/day (half growth speed) "),KCt=hn(()=>w("div",{class:"spacer"},null,-1)),JCt={key:1},QCt={class:"sa"},tMt=U(" Default worker for hire: "),eMt=U(" "+L(" ")+" "),rMt=hn(()=>w("label",{for:"f"},"Random Artisan Goblin",-1)),nMt=U(" "+L(" ")+" "),iMt=U(" "+L(" ")+" "),oMt=hn(()=>w("label",{for:"t"},"Custom",-1)),aMt=hn(()=>w("br",null,null,-1)),sMt=U(" Tax: "),lMt=lP('<option value="0.65" data-v-ac2e5748>0.65 (0)</option><option value="0.65325" data-v-ac2e5748>0.65325 (1000)</option><option value="0.6565" data-v-ac2e5748>0.6565 (4000)</option><option value="0.65975" data-v-ac2e5748>0.65975 (7000)</option><option value="0.65975" data-v-ac2e5748>0.69225 (7000 + ring)</option><option value="0.845" data-v-ac2e5748>0.845 (0 + VP)</option><option value="0.84825" data-v-ac2e5748>0.84825 (1000 + VP)</option><option value="0.8515" data-v-ac2e5748>0.8515 (4000 + VP)</option><option value="0.85475" data-v-ac2e5748>0.85475 (7000 + VP)</option><option value="0.88725" data-v-ac2e5748>0.88725 (7000 + ring + VP)</option><option value="1" data-v-ac2e5748>1 (test)</option>',11),uMt=[lMt],cMt=U(" Language: "),fMt=hn(()=>w("option",null,"en",-1)),hMt=hn(()=>w("option",null,"ru",-1)),dMt=[fMt,hMt],pMt=U(" Server: "),vMt=lP("<option data-v-ac2e5748>NA</option><option data-v-ac2e5748>EU</option><option data-v-ac2e5748>RU</option><option data-v-ac2e5748>KR</option><option data-v-ac2e5748>JP</option><option data-v-ac2e5748>TH</option><option data-v-ac2e5748>TW</option><option data-v-ac2e5748>SA</option><option data-v-ac2e5748>SEA</option><option data-v-ac2e5748>MENA</option><option data-v-ac2e5748>CEU</option><option data-v-ac2e5748>CNA</option>",12),gMt=[vMt],mMt=U(" Market API status: "),yMt={key:2},_Mt={key:3},bMt=U(" \xA0"),wMt=hn(()=>w("div",{class:"spacer"},null,-1)),SMt=hn(()=>w("p",null,"By default everything marketable is supposed to be sold on Central Market (with tax).",-1)),TMt=hn(()=>w("p",null,"If the item is for self use, select Keep and/or enter Custom price:",-1)),PMt={class:"scrollable"},EMt=hn(()=>w("tr",null,[w("th",null,"Item"),w("th",null,"Market"),w("th",null,"Custom"),w("th",null,"Keep"),w("th",null,"Value")],-1)),AMt=["id"],CMt=["href"],MMt=["src","data-key"],kMt={class:"right"},xMt=["href"],LMt=["onUpdate:modelValue"],IMt={class:"center"},OMt=["disabled","onUpdate:modelValue"],RMt={class:"right"};function DMt(e,t,r,n,i,o){const a=pe("WorkerEdit"),s=pe("ModalDialog"),l=pe("WorkshopsConfig");return D(),$(W,null,[kt(s,{show:e.workerDialogVisible,"onUpdate:show":t[1]||(t[1]=u=>e.workerDialogVisible=u)},{default:Le(()=>[kt(a,{workerEditing:n.userStore.defaultWorker,initialProfit:0,show:e.workerDialogVisible,"onUpdate:show":t[0]||(t[0]=u=>e.workerDialogVisible=u)},null,8,["workerEditing","show"])]),_:1},8,["show"]),kt(s,{show:e.workshopsConfigVisible,"onUpdate:show":t[2]||(t[2]=u=>e.workshopsConfigVisible=u)},{default:Le(()=>[kt(l)]),_:1},8,["show"]),w("main",null,[w("div",BCt,[Tt(w("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=u=>n.userStore.farmingEnable=u)},null,512),[[Kn,n.userStore.farmingEnable]]),$Ct,n.userStore.farmingEnable?(D(),$(W,{key:0},[zCt,VCt,UCt,GCt,jCt,Tt(w("input",{type:"number",class:"float2","onUpdate:modelValue":t[4]||(t[4]=u=>n.userStore.farmingProfit=u)},null,512),[[le,n.userStore.farmingProfit,void 0,{number:!0}]]),WCt,HCt,XCt,YCt,qCt,Tt(w("input",{type:"number",class:"float2","onUpdate:modelValue":t[5]||(t[5]=u=>n.userStore.farmingBareProfit=u)},null,512),[[le,n.userStore.farmingBareProfit,void 0,{number:!0}]]),ZCt,KCt],64)):(D(),$("br",JCt)),w("p",QCt,[w("button",{onClick:t[6]||(t[6]=u=>e.workshopsConfigVisible=!0)},"\u{1F3ED}Workshops config")]),tMt,Tt(w("input",{type:"radio",name:"dw",id:"f",value:!1,"onUpdate:modelValue":t[7]||(t[7]=u=>n.userStore.useDefaultWorker=u)},null,512),[[sd,n.userStore.useDefaultWorker]]),eMt,rMt,nMt,Tt(w("input",{type:"radio",name:"dw",id:"t",value:!0,"onUpdate:modelValue":t[8]||(t[8]=u=>n.userStore.useDefaultWorker=u)},null,512),[[sd,n.userStore.useDefaultWorker]]),iMt,oMt,U(" ("+L(o.formatFixed(n.gameStore.workerStatsOnPlantzone(n.userStore.defaultWorker).wspd,2))+"\u{1F528} "+L(o.formatFixed(n.gameStore.workerStatsOnPlantzone(n.userStore.defaultWorker).mspd,2))+"\u{1F9B6} "+L(o.formatFixed(n.gameStore.workerStatsOnPlantzone(n.userStore.defaultWorker).luck,2))+"\u{1F340}) ",1),w("button",{onClick:t[9]||(t[9]=u=>e.workerDialogVisible=!0)},"edit"),aMt,sMt,Tt(w("select",{"onUpdate:modelValue":t[10]||(t[10]=u=>n.userStore.selectedTax=u)},uMt,512),[[_n,n.userStore.selectedTax]]),cMt,Tt(w("select",{"onUpdate:modelValue":t[11]||(t[11]=u=>n.userStore.selectedLang=u),onChange:t[12]||(t[12]=(...u)=>e.fetchMarket&&e.fetchMarket(...u))},dMt,544),[[_n,n.userStore.selectedLang]]),pMt,Tt(w("select",{"onUpdate:modelValue":t[13]||(t[13]=u=>n.userStore.selectedRegion=u),onChange:t[14]||(t[14]=(...u)=>e.fetchMarket&&e.fetchMarket(...u))},gMt,544),[[_n,n.userStore.selectedRegion]]),mMt,n.marketStore.ready?(D(),$("span",yMt,"\u2713")):(D(),$("span",_Mt,"\u274C")),bMt,w("button",{onClick:t[15]||(t[15]=u=>o.reload())},"reload"),wMt,SMt,TMt]),w("div",PMt,[w("table",null,[EMt,(D(!0),$(W,null,Nt(n.gameStore.itemKeys,u=>(D(),$("tr",{id:"item"+u},[w("td",null,[w("a",{href:this.userStore.itemUrl+u},[w("img",{src:o.makeIconSrc(u),class:"iconitem","data-key":u},null,8,MMt),U(" "+L(n.gameStore.uloc.item[u]),1)],8,CMt)]),w("td",kMt,[u in n.marketStore.apiPrices?(D(),$("a",{key:0,href:this.marketStore.itemPriceUrl(u)},L(o.formatFixed(n.marketStore.apiPrices[u])),9,xMt)):(D(),$(W,{key:1},[U(L(o.formatFixed(n.gameStore.vendorPrices[u])),1)],64))]),w("td",null,[Tt(w("input",{type:"number",class:"mid right","onUpdate:modelValue":c=>n.userStore.customPrices[u]=c},null,8,LMt),[[le,n.userStore.customPrices[u],void 0,{number:!0}]])]),w("td",IMt,[Tt(w("input",{type:"checkbox",disabled:u in n.gameStore.vendorPrices,"onUpdate:modelValue":c=>n.userStore.keepItems[u]=c},null,8,OMt),[[Kn,n.userStore.keepItems[u]]])]),w("td",RMt,L(o.formatFixed(n.marketStore.prices[u])),1)],8,AMt))),256))])])])],64)}const NMt=$e(FCt,[["render",DMt],["__scopeId","data-v-ac2e5748"]]);const FMt={setup(){const e=xt(),t=re(),r=Ei();return{gameStore:e,userStore:t,marketStore:r}},data:()=>({}),watch:{},methods:{formatFixed:Bt},computed:{plantzonesNearestCpTownsProfits150(){const e=Date.now();let t={};for(const r of Object.keys(this.gameStore.plantzones))t[r]=this.gameStore.plantzoneNearestCpTownsProfits150(r,3);return console.log("cpt: plantzonesNearestCpTownsProfits took",Date.now()-e,"ms"),t}}},BMt=w("div",{id:"toptext"},[w("p",null,"Using 150/10/10 worker")],-1),$Mt=w("tr",null,[w("th",null,"Node/Town"),w("th",null,"connect"),w("th",null,"distance"),w("th",null,"M$/day"),w("th",null,"M$/day/CP")],-1),zMt={colspan:"5"};function VMt(e,t,r,n,i,o){return D(),$(W,null,[BMt,w("table",null,[$Mt,(D(!0),$(W,null,Nt(n.gameStore.plantzones,(a,s)=>(D(),$(W,null,[w("tr",null,[w("td",zMt,[w("h3",null,L(s)+" "+L(a.name),1)])]),(D(!0),$(W,null,Nt(o.plantzonesNearestCpTownsProfits150[s],l=>(D(),$("tr",null,[w("td",null,L(n.gameStore.nodeName(l.tnk)),1),w("td",null,L(l.cp)+"CP ",1),w("td",null,L(o.formatFixed(l.dist,0)),1),w("td",null,L(o.formatFixed(l.priceDaily,2)),1),w("td",null,L(o.formatFixed(l.dailyPerCp,3)),1)]))),256))],64))),256))])],64)}const UMt=$e(FMt,[["render",VMt]]),GMt={setup(){const e=xt(),t=re();return{gameStore:e,userStore:t}},data:()=>({houses:{},houseCrafts:{},towns:[-1],usages:[-1],filterTown:-1,filterUsage:-1}),created(){this.fetchData()},mounted(){},watch:{},methods:{makeIconSrc:Mo,async fetchData(){this.houseCrafts=await(await fetch("data/houseinforeceipe.json")).json(),this.craftItems=await(await fetch("data/house_craft_outputs.json")).json(),this.houses=await(await fetch("data/houseinfo.json")).json();const e=new Set([-1]),t=new Set([-1]);for(const[r,n]of Object.entries(this.houses)){e.add(n.affTown);for(const[o,a]of Object.entries(n.CraftList))t.add(o);this.houses[r].CPfull=this.houses[r].CP;let i=n.needHouseKey;for(;i;)this.houses[r].CPfull+=this.houses[i].CP,i=this.houses[i].needHouseKey}this.towns=e,this.usages=[...t].sort((r,n)=>r-n)}}},jMt={id:"toptext"},WMt=U(" Town: "),HMt=["value"],XMt=U(" Usage: "),YMt=["value"],qMt={key:0},ZMt=w("summary",null,"Craftables",-1),KMt=["href"],JMt=["src","data-key"],QMt=w("tr",null,[w("th",null,"town"),w("th",null,"node"),w("th",null,"name"),w("th",null,"CP"),w("th",null,"usage/level")],-1),tkt={key:0},ekt=["href"],rkt=U(L(" "));function nkt(e,t,r,n,i,o){return D(),$("main",null,[w("div",jMt,[WMt,Tt(w("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>e.filterTown=a)},[(D(!0),$(W,null,Nt(e.towns,a=>(D(),$("option",{value:a},L(a>=0?n.gameStore.uloc.town[a]:"any"),9,HMt))),256))],512),[[_n,e.filterTown]]),XMt,Tt(w("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>e.filterUsage=a)},[(D(!0),$(W,null,Nt(e.usages,a=>(D(),$("option",{value:a},L(a>=0?n.gameStore.uloc.housetype[a]+" "+a:"any"),9,YMt))),256))],512),[[_n,e.filterUsage]]),e.filterUsage!=-1?(D(),$("details",qMt,[ZMt,(D(!0),$(W,null,Nt(this.houseCrafts[e.filterUsage].groups,(a,s)=>(D(),$("div",null,[U(" level "+L(s+1)+": ",1),w("table",null,[(D(!0),$(W,null,Nt(a,l=>(D(),$("tr",null,[(D(!0),$(W,null,Nt(this.craftItems[l],u=>(D(),$("a",{href:this.userStore.itemUrl+u},[w("img",{src:o.makeIconSrc(u),class:"iconitem","data-key":u},null,8,JMt),U(" "+L(n.gameStore.uloc.item[u]),1)],8,KMt))),256))]))),256))])]))),256))])):pt("",!0)]),w("table",null,[QMt,(D(!0),$(W,null,Nt(e.houses,(a,s)=>(D(),$(W,null,[(e.filterTown==-1||a.affTown==e.filterTown)&&(e.filterUsage==-1||e.filterUsage in a.CraftList)?(D(),$("tr",tkt,[w("td",null,L(a.affTown),1),w("td",null,L(a.parentNode),1),w("td",null,[w("a",{href:"https://bdocodex.com/us/npc/"+a.key},L(n.gameStore.uloc.char[a.key]),9,ekt)]),w("td",null,L(a.CP)+" ("+L(a.CPfull)+")",1),w("td",null,[(D(!0),$(W,null,Nt(a.CraftList,(l,u)=>(D(),$("span",null,[U(L(n.gameStore.uloc.housetype[u]),1),w("sup",null,L(l),1),rkt]))),256))])])):pt("",!0)],64))),256))])])}const ikt=$e(GMt,[["render",nkt]]);Br([hf,sst,vf,pf,gf]);const okt={setup(){const e=re();return{gameStore:xt(),userStore:e}},components:{VChart:mf},props:{show:{type:Boolean,default:!1}},data:()=>({tk:5,wantLodging:0,wantStorage:0}),computed:{bestLookup(){return this.gameStore.lsLookup(this.tk,this.wantLodging,this.wantStorage)},townChains(){const e={};for(const t of this.gameStore.housesPerTown[this.tk]){e[t]=[];let r=Number(t);for(;r!=0;)e[t].unshift(r),r=this.gameStore.houseInfo[r].needHouseKey}return e},townTree(){const e={name:"",value:this.gameStore.uloc.town[this.tk],children:[]};if(!this.gameStore.ready||!this.bestLookup.success)return e;for(const t of this.gameStore.housesPerTown[this.tk]){let r=e;for(const n of this.townChains[t]){const i=r.children.findIndex(o=>o.name==n);if(i>=0)r=r.children[i];else{let o=0;if(this.bestLookup){const s=this.bestLookup.indices.indexOf(n);s!==-1&&(o=this.bestLookup.states[s])}const a={name:n,value:{label:this.gameStore.uloc.char[n],lodging:this.gameStore.houseLodging(n),storage:this.gameStore.houseStorage(n),cp:this.gameStore.houseCost(n)},lineStyle:r.name==0?{color:"transparent"}:{},itemStyle:o>0?o==2?{color:"#fe6"}:{color:"#a5f"}:{},children:[]};r.children.push(a),r=a}}}return e},chartOption(){return{tooltip:{trigger:"item",triggerOn:"mousemove",formatter:function(e){const t=e.value;return e.name==0?t:`${e.name} ${t.label}<br/>${t.lodging}\u{1F6CF}\uFE0F ${t.storage}\u{1F4E6} ${t.cp}CP`}},series:[{type:"tree",layout:"radial",roam:!0,data:[this.townTree],top:"1%",left:"1%",bottom:"1%",right:"1%",symbolSize:6,initialTreeDepth:9,label:{fontSize:9,color:"gray",position:"top",formatter:function(e){const t=e.value;return e.name==0?"":`{r|${t.lodging}} {o|${t.storage}} ${t.cp}`},rich:{r:{fontSize:9},o:{fontSize:9}}},leaves:{label:{}},emphasis:{focus:"descendant"}}]}}},methods:{formatFixed:Bt}},Tf=e=>(cn("data-v-3d740ab8"),e=e(),fn(),e),akt={class:"limit"},skt={id:"controls"},lkt=Tf(()=>w("p",null,[U("data from "),w("a",{href:"https://github.com/Thell/bdo-housecraft"},"Thell/bdo-housecraft")],-1)),ukt=U(" town "),ckt=["value"],fkt=Tf(()=>w("br",null,null,-1)),hkt=Tf(()=>w("span",{style:{color:"#fe6"}},"lodging",-1)),dkt=U(" needed: "),pkt=["max"],vkt=Tf(()=>w("br",null,null,-1)),gkt=Tf(()=>w("span",{style:{color:"#a5f"}},"storage",-1)),mkt=U(" needed: "),ykt=["max"],_kt=Tf(()=>w("br",null,null,-1));function bkt(e,t,r,n,i,o){const a=pe("v-chart");return D(),$("main",null,[w("div",akt,[w("div",skt,[lkt,this.gameStore.ready?(D(),$(W,{key:0},[ukt,Tt(w("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>e.tk=s)},[(D(!0),$(W,null,Nt(this.gameStore._tk2tnk,(s,l)=>(D(),$("option",{value:l},L(n.gameStore.uloc.town[l]),9,ckt))),256))],512),[[_n,e.tk]])],64)):pt("",!0),fkt,hkt,dkt,Tt(w("input",{type:"range",class:"wlong","onUpdate:modelValue":t[1]||(t[1]=s=>e.wantLodging=s),min:"0",max:Math.min(n.gameStore.ready?n.gameStore.townUpperLimits[e.tk].lodging:999,100)},null,8,pkt),[[le,e.wantLodging,void 0,{number:!0}]]),U(" "+L(e.wantLodging)+" \u2192 "+L(o.bestLookup?o.bestLookup.lodging:"?")+" found ",1),vkt,gkt,mkt,Tt(w("input",{type:"range",class:"wlong","onUpdate:modelValue":t[2]||(t[2]=s=>e.wantStorage=s),min:"0",max:Math.min(n.gameStore.ready?n.gameStore.townUpperLimits[e.tk].storage:999,192-8)},null,8,ykt),[[le,e.wantStorage,void 0,{number:!0}]]),U(" "+L(e.wantStorage)+" \u2192 "+L(o.bestLookup?o.bestLookup.storage:"?")+" found ",1),_kt,U(" cost: "+L(o.bestLookup?o.bestLookup.cost:"?")+" CP ",1)]),kt(a,{class:"chart",option:o.chartOption},null,8,["option"])])])}const wkt=$e(okt,[["render",bkt],["__scopeId","data-v-3d740ab8"]]),Skt=Array.prototype.concat,BV=Object.prototype.toString;function $V(e,t){var r=e>t?e:t;return Math.pow(10,17-~~(Math.log(r>0?r:-r)*Math.LOG10E))}const Eo=Array.isArray||function(t){return BV.call(t)==="[object Array]"};function m0(e){return BV.call(e)==="[object Function]"}function Sr(e){return typeof e=="number"?e-e===0:!1}function Tkt(e){return Skt.apply([],e)}const zV={calcRdx:$V,isArray:Eo,isFunction:m0,isNumber:Sr,toVector:Tkt};let ti=Math.random;function VV(e){if(typeof e!="function")throw new TypeError("fn is not a function");ti=e}function Iy(e){return e.length||1}function UV(e){return e[0].length||1}function Pkt(e){return{rows:Iy(e),cols:UV(e)}}function DA(e,t){return Eo(t)?t.map(r=>DA(e,r)):e[t]}function GV(e,t){return DA(e,t)}function d1(e,t){if(Eo(t)){const n=Ie(e.length).map(()=>new Array(t.length));return t.forEach(function(i,o){Ie(e.length).forEach(function(a){n[a][o]=e[a][i]})}),n}const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=[e[n][t]];return r}function jV(e,t){return d1(e,t).map(r=>r[0])}function Ekt(e){const t=Iy(e),r=new Array(t);for(let n=0;n<t;n++)r[n]=[e[n][n]];return r}function Akt(e){for(var t=Iy(e)-1,r=new Array(t),n=0;t>=0;t--,n++)r[n]=[e[n][t]];return r}function ms(e){var t=[],r,n,i,o,a;for(Eo(e[0])||(e=[e]),n=e.length,i=e[0].length,a=0;a<i;a++){for(r=new Array(n),o=0;o<n;o++)r[o]=e[o][a];t.push(r)}return t.length===1?t[0]:t}function Zr(e,t,r){var n,i,o,a,s;for(Eo(e[0])||(e=[e]),i=e.length,o=e[0].length,a=r?e:new Array(i),n=0;n<i;n++)for(a[n]||(a[n]=new Array(o)),s=0;s<o;s++)a[n][s]=t(e[n][s],n,s);return a.length===1?a[0]:a}function Oy(e,t,r){var n,i,o,a,s;for(Eo(e[0])||(e=[e]),i=e.length,o=e[0].length,a=r?e:new Array(i),n=0;n<i;n++)for(a[n]||(a[n]=new Array(o)),o>0&&(a[n][0]=e[n][0]),s=1;s<o;s++)a[n][s]=t(a[n][s-1],e[n][s]);return a.length===1?a[0]:a}function NA(e,t){return Zr(e,t,!0)}function Pf(e,t,r){var n=new Array(e),i,o;for(m0(t)&&(r=t,t=e),i=0;i<e;i++)for(n[i]=new Array(t),o=0;o<t;o++)n[i][o]=r(i,o);return n}function WV(){return 0}function Ckt(){return 1}function Mkt(e,t){return e===t?1:0}function xo(e,t){return Sr(t)||(t=e),Pf(e,t,WV)}function kkt(e,t){return Sr(t)||(t=e),Pf(e,t,Ckt)}function xkt(e,t){return Sr(t)||(t=e),Pf(e,t,ti)}function nu(e,t){return Sr(t)||(t=e),Pf(e,t,Mkt)}function Lkt(e){var t=e.length,r,n;if(e.length!==e[0].length)return!1;for(r=0;r<t;r++)for(n=0;n<t;n++)if(e[n][r]!==e[r][n])return!1;return!0}function Ikt(e){return NA(e,WV)}function HV(e,t,r,n){m0(n)||(n=!1);var i=[],o=$V(e,t),a=(t*o-e*o)/((r-1)*o),s=e,l;for(l=0;s<=t&&l<r;l++,s=(e*o+a*o*l)/o)i.push(n?n(s,l):s);return i}function Ie(e,t,r){var n=[],i;if(r=r||1,t===void 0&&(t=e,e=0),e===t||r===0)return[];if(e<t&&r<0)return[];if(e>t&&r>0)return[];if(r>0)for(i=e;i<t;i+=r)n.push(i);else for(i=e;i>t;i+=r)n.push(i);return n}function Yo(e,t){function r(l,u,c,f){var h,d=[],p=l.length;if(u===void 0&&c===void 0&&f===void 0)return Ry(l);if(u=u||0,c=c||l.length,u=u>=0?u:p+u,c=c>=0?c:p+c,f=f||1,u===c||f===0)return[];if(u<c&&f<0)return[];if(u>c&&f>0)return[];if(f>0)for(h=u;h<c;h+=f)d.push(l[h]);else for(h=u;h>c;h+=f)d.push(l[h]);return d}var n,i;if(t=t||{},Sr(t.row)){if(Sr(t.col))return e[t.row][t.col];var o=GV(e,t.row);return n=t.col||{},r(o,n.start,n.end,n.step)}if(Sr(t.col)){var a=jV(e,t.col);return i=t.row||{},r(a,i.start,i.end,i.step)}i=t.row||{},n=t.col||{};var s=r(e,i.start,i.end,i.step);return s.map(function(l){return r(l,n.start,n.end,n.step)})}function td(e,t,r){var n,i;if(Sr(t.row)){if(Sr(t.col))return e[t.row][t.col]=r;t.col=t.col||{},t.col.start=t.col.start||0,t.col.end=t.col.end||e[0].length,t.col.step=t.col.step||1,n=Ie(t.col.start,Math.min(e.length,t.col.end),t.col.step);var o=t.row;return n.forEach(function(s,l){e[o][s]=r[l]}),e}if(Sr(t.col)){t.row=t.row||{},t.row.start=t.row.start||0,t.row.end=t.row.end||e.length,t.row.step=t.row.step||1,i=Ie(t.row.start,Math.min(e[0].length,t.row.end),t.row.step);var a=t.col;return i.forEach(function(s,l){e[s][a]=r[l]}),e}return r[0].length===void 0&&(r=[r]),t.row.start=t.row.start||0,t.row.end=t.row.end||e.length,t.row.step=t.row.step||1,t.col.start=t.col.start||0,t.col.end=t.col.end||e[0].length,t.col.step=t.col.step||1,i=Ie(t.row.start,Math.min(e.length,t.row.end),t.row.step),n=Ie(t.col.start,Math.min(e[0].length,t.col.end),t.col.step),i.forEach(function(s,l){n.forEach(function(u,c){e[s][u]=r[l][c]})}),e}function Okt(e){var t=xo(e.length,e.length);return e.forEach(function(r,n){t[n][n]=r}),t}function Ry(e){return e.map(function(t){return Sr(t)?t:t.map(function(r){return r})})}const Rkt=Object.freeze(Object.defineProperty({__proto__:null,utils:zV,get random_fn(){return ti},setRandom:VV,rows:Iy,cols:UV,dimensions:Pkt,row:DA,rowa:GV,col:d1,cola:jV,diag:Ekt,antidiag:Akt,transpose:ms,map:Zr,cumreduce:Oy,alter:NA,create:Pf,zeros:xo,ones:kkt,rand:xkt,identity:nu,symmetric:Lkt,clear:Ikt,seq:HV,arange:Ie,slice:Yo,sliceAssign:td,diagonal:Okt,copy:Ry},Symbol.toStringTag,{value:"Module"}));function Ef(e,t){return e-t}function zI(e,t,r){return Math.max(t,Math.min(e,r))}function Kr(e){for(var t=0,r=e.length;--r>=0;)t+=e[r];return t}function Dkt(e){for(var t=0,r=e.length;--r>=0;)t+=e[r]*e[r];return t}function Dy(e){for(var t=ar(e),r=0,n=e.length,i;--n>=0;)i=e[n]-t,r+=i*i;return r}function Nkt(e){for(var t=0,r=e.length;--r>=0;)t+=e[r];return t}function XV(e){for(var t=1,r=e.length;--r>=0;)t*=e[r];return t}function FA(e){for(var t=e[0],r=0;++r<e.length;)e[r]<t&&(t=e[r]);return t}function BA(e){for(var t=e[0],r=0;++r<e.length;)e[r]>t&&(t=e[r]);return t}function Fkt(e){for(var t={},r=[],n=0;n<e.length;n++)t[e[n]]||(t[e[n]]=!0,r.push(e[n]));return r}function ar(e){return Kr(e)/e.length}function Bkt(e){return Dy(e)/e.length}function $kt(e){return Math.pow(XV(e),1/e.length)}function dT(e){var t=e.length,r=e.slice().sort(Ef);return t&1?r[t/2|0]:(r[t/2-1]+r[t/2])/2}function zkt(e){return Oy(e,function(t,r){return t+r})}function Vkt(e){return Oy(e,function(t,r){return t*r})}function Ukt(e){var t=[],r=e.length,n;for(n=1;n<r;n++)t.push(e[n]-e[n-1]);return t}function pT(e){var t,r=[],n={};for(t=0;t<e.length;t++){var i=e[t];n[i]?n[i]++:(n[i]=1,r.push(i))}var o=r.sort(Ef),a={},s=1;for(t=0;t<o.length;t++){var i=o[t],l=n[i],u=s,c=s+l-1,f=(u+c)/2;a[i]=f,s+=l}return e.map(function(h){return a[h]})}function Gkt(e){var t=e.length,r=e.slice().sort(Ef),n=1,i=0,o=0,a=[],s;for(s=0;s<t;s++)r[s]===r[s+1]?n++:(n>i?(a=[r[s]],i=n,o=0):n===i&&(a.push(r[s]),o++),n=1);return o===0?a[0]:a}function jkt(e){return BA(e)-FA(e)}function YV(e,t){return Dy(e)/(e.length-(t?1:0))}function qV(e){var t=e.reduce(function(n,i){return n+Dy(i)},0),r=e.reduce(function(n,i){return n+i.length},0);return t/(r-e.length)}function Wkt(e){for(var t=ar(e),r=e.length,n=new Array(r),i=0;i<r;i++)n[i]=e[i]-t;return n}function va(e,t){return Math.sqrt(YV(e,t))}function ZV(e){return Math.sqrt(qV(e))}function Hkt(e){for(var t=ar(e),r=[],n=e.length-1;n>=0;n--)r.push(Math.abs(e[n]-t));return ar(r)}function Xkt(e){for(var t=dT(e),r=[],n=e.length-1;n>=0;n--)r.push(Math.abs(e[n]-t));return dT(r)}function Ykt(e){return va(e)/ar(e)}function qkt(e){var t=e.length,r=e.slice().sort(Ef);return[r[Math.round(t/4)-1],r[Math.round(t/2)-1],r[Math.round(t*3/4)-1]]}function Zkt(e,t,r,n){var i=e.slice().sort(Ef),o=[t.length],a=e.length,s,l,u,c,f,h;for(typeof r>"u"&&(r=3/8),typeof n>"u"&&(n=3/8),s=0;s<t.length;s++)l=t[s],u=r+l*(1-r-n),c=a*l+u,f=Math.floor(zI(c,1,a-1)),h=zI(c-f,0,1),o[s]=(1-h)*i[f-1]+h*i[f];return o}function Kkt(e,t,r){var n=e.slice().sort(Ef),i=t*(n.length+(r?1:-1))+(r?0:1),o=parseInt(i),a=i-o;return o+1<n.length?n[o-1]+a*(n[o]-n[o-1]):n[o-1]}function Jkt(e,t,r){var n=0,i=e.length,o=!1,a,s;for(r==="strict"&&(o=!0),s=0;s<i;s++)a=e[s],(o&&a<t||!o&&a<=t)&&n++;return n/i}function Qkt(e,t){t=t||4;var r=FA(e),n=(BA(e)-r)/t,i=e.length,o=[],a;for(a=0;a<t;a++)o[a]=0;for(a=0;a<i;a++)o[Math.min(Math.floor((e[a]-r)/n),t-1)]+=1;return o}function KV(e,t){var r=ar(e),n=ar(t),i=e.length,o=new Array(i),a;for(a=0;a<i;a++)o[a]=(e[a]-r)*(t[a]-n);return Kr(o)/(i-1)}function JV(e,t){return KV(e,t)/va(e,1)/va(t,1)}function t4t(e,t){return e=pT(e),t=pT(t),JV(e,t)}function $A(e,t){for(var r=ar(e),n=va(e),i=e.length,o=0,a=0;a<i;a++)o+=Math.pow((e[a]-r)/n,t);return o/e.length}function e4t(e){return $A(e,3)}function r4t(e){return $A(e,4)-3}const n4t=Object.freeze(Object.defineProperty({__proto__:null,sum:Kr,sumsqrd:Dkt,sumsqerr:Dy,sumrow:Nkt,product:XV,min:FA,max:BA,unique:Fkt,mean:ar,meansqerr:Bkt,geomean:$kt,median:dT,cumsum:zkt,cumprod:Vkt,diff:Ukt,rank:pT,mode:Gkt,range:jkt,variance:YV,pooledvariance:qV,deviation:Wkt,stdev:va,pooledstdev:ZV,meandev:Hkt,meddev:Xkt,coeffvar:Ykt,quartiles:qkt,quantiles:Zkt,percentile:Kkt,percentileOfScore:Jkt,histogram:Qkt,covariance:KV,corrcoeff:JV,spearmancoeff:t4t,stanMoment:$A,skewness:e4t,kurtosis:r4t},Symbol.toStringTag,{value:"Module"}));function i4t(e,t,r){return e<t||e>r?0:1/(r-t)}function o4t(e,t,r){return e<t?0:e<r?(e-t)/(r-t):1}function a4t(e,t,r){return t+e*(r-t)}function s4t(e,t){return .5*(e+t)}function l4t(e,t){return ar(e)}function u4t(){throw new Error("mode is not yet implemented")}function QV(e,t){return e/2+t/2+(t/2-e/2)*(2*ti()-1)}function c4t(e,t){return Math.pow(t-e,2)/12}const f4t=Object.freeze(Object.defineProperty({__proto__:null,pdf:i4t,cdf:o4t,inv:a4t,mean:s4t,median:l4t,mode:u4t,sample:QV,variance:c4t},Symbol.toStringTag,{value:"Module"}));function h4t(e,t,r){return r<=t?NaN:e<=t||e>=r?0:2/Math.PI*Math.pow(Math.pow(r-t,2)-Math.pow(2*e-t-r,2),-.5)}function d4t(e,t,r){return e<t?0:e<r?2/Math.PI*Math.asin(Math.sqrt((e-t)/(r-t))):1}function p4t(e,t,r){return t+(.5-.5*Math.cos(Math.PI*e))*(r-t)}function v4t(e,t){return t<=e?NaN:(e+t)/2}function g4t(e,t){return t<=e?NaN:(e+t)/2}function m4t(){throw new Error("mode is not yet implemented")}function y4t(e,t){return(e+t)/2+(t-e)/2*Math.sin(2*Math.PI*QV(0,1))}function _4t(e,t){return t<=e?NaN:Math.pow(t-e,2)/8}const b4t=Object.freeze(Object.defineProperty({__proto__:null,pdf:h4t,cdf:d4t,inv:p4t,mean:v4t,median:g4t,mode:m4t,sample:y4t,variance:_4t},Symbol.toStringTag,{value:"Module"}));function Ge(e){var t=0,r=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],n=1.000000000190015,i,o,a;for(a=(o=i=e)+5.5,a-=(i+.5)*Math.log(a);t<6;t++)n+=r[t]/++o;return Math.log(2.5066282746310007*n/i)-a}function tU(e){var t,r,n,i,o,a,s,l=[.08333333333333333,-.002777777777777778,.0007936507936507937,-.0005952380952380952,.0008417508417508418,-.001917526917526918,.00641025641025641,-.02955065359477124,.1796443723688307,-1.3924322169059];if(t=e,s=0,e==1||e==2)return 0;for(e<=7&&(s=Math.floor(7-e),t=e+s),r=1/(t*t),n=2*Math.PI,o=l[9],a=8;a>=0;a--)o*=r,o+=l[a];if(i=o/t+.5*Math.log(n)+(t-.5)*Math.log(t)-t,e<=7)for(a=1;a<=s;a++)i-=Math.log(t-1),t-=1;return i}function Mi(e){var t=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],r=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],n=!1,i=0,o=0,a=0,s=e,l,u,c,f;if(e>171.6243769536076)return 1/0;if(s<=0)if(f=s%1+36e-17,f)n=(s&1?-1:1)*Math.PI/Math.sin(Math.PI*f),s=1-s;else return 1/0;for(c=s,s<1?u=s++:u=(s-=i=(s|0)-1)-1,l=0;l<8;++l)a=(a+t[l])*u,o=o*u+r[l];if(f=a/o+1,c<s)f/=c;else if(c>s)for(l=0;l<i;++l)f*=s,s++;return n&&(f=n/f),f}function w4t(e,t){return Af(e,t)*Mi(e)}function Af(e,t){var r=Ge(e),n=e,i=1/e,o=i,a=t+1-e,s=1/1e-30,l=1/a,u=l,c=1,f=-~(Math.log(e>=1?e:1/e)*8.5+e*.4+17),h;if(t<0||e<=0)return NaN;if(t<e+1){for(;c<=f;c++)i+=o*=t/++n;return i*Math.exp(-t+e*Math.log(t)-r)}for(;c<=f;c++)h=-c*(c-e),a+=2,l=h*l+a,s=a+h/s,l=1/l,u*=l*s;return 1-u*Math.exp(-t+e*Math.log(t)-r)}function om(e){return e<0?NaN:Ge(e+1)}function Ul(e){return e<0?NaN:Mi(e+1)}function zA(e,t){return e>170||t>170?Math.exp(eU(e,t)):Ul(e)/Ul(t)/Ul(e-t)}function eU(e,t){return om(e)-om(t)-om(e-t)}function S4t(e,t){return Ul(e)/Ul(e-t)}function Ny(e,t){if(!(e<=0||t<=0))return e+t>170?Math.exp(VA(e,t)):Mi(e)*Mi(t)/Mi(e+t)}function VA(e,t){return Ge(e)+Ge(t)-Ge(e+t)}function vT(e,t,r){var n=1e-30,i=1,o=t+r,a=t+1,s=t-1,l=1,u=1-o*e/a,c,f,h,d;for(Math.abs(u)<n&&(u=n),u=1/u,d=u;i<=100&&(c=2*i,f=i*(r-i)*e/((s+c)*(t+c)),u=1+f*u,Math.abs(u)<n&&(u=n),l=1+f/l,Math.abs(l)<n&&(l=n),u=1/u,d*=u*l,f=-(t+i)*(o+i)*e/((t+c)*(a+c)),u=1+f*u,Math.abs(u)<n&&(u=n),l=1+f/l,Math.abs(l)<n&&(l=n),u=1/u,h=u*l,d*=h,!(Math.abs(h-1)<3e-7));i++);return d}function Fy(e,t){var r=0,n=t-1,i=1e-8,o=Ge(t),a,s,l,u,c,f,h;if(e>=1)return Math.max(100,t+100*Math.sqrt(t));if(e<=0)return 0;for(t>1?(f=Math.log(n),h=Math.exp(n*(f-1)-o),c=e<.5?e:1-e,l=Math.sqrt(-2*Math.log(c)),a=(2.30753+l*.27061)/(1+l*(.99229+l*.04481))-l,e<.5&&(a=-a),a=Math.max(.001,t*Math.pow(1-1/(9*t)-a/(3*Math.sqrt(t)),3))):(l=1-t*(.253+t*.12),e<l?a=Math.pow(e/l,1/t):a=1-Math.log(1-(e-l)/(1-l)));r<12;r++){if(a<=0)return 0;if(s=Af(t,a)-e,t>1?l=h*Math.exp(-(a-n)+n*(Math.log(a)-f)):l=Math.exp(-a+n*Math.log(a)-o),u=s/l,a-=l=u/(1-.5*Math.min(1,u*((t-1)/a-1))),a<=0&&(a=.5*(a+l)),Math.abs(l)<i*a)break}return a}function By(e){var t=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,15626441722e-18,-85238095915e-18,6529054439e-18,5059343495e-18,-991364156e-18,-227365122e-18,96467911e-18,2394038e-18,-6886027e-18,894487e-18,313092e-18,-112708e-18,381e-18,7106e-18,-1523e-18,-94e-18,121e-18,-28e-18],r=t.length-1,n=!1,i=0,o=0,a,s,l,u;for(e<0&&(e=-e,n=!0),a=2/(2+e),s=4*a-2;r>0;r--)l=i,i=s*i-o+t[r],o=l;return u=a*Math.exp(-e*e+.5*(t[0]+s*i)-o),n?u-1:1-u}function rU(e){return 1-By(e)}function UA(e){var t=0,r,n,i,o;if(e>=2)return-100;if(e<=0)return 100;for(o=e<1?e:2-e,i=Math.sqrt(-2*Math.log(o/2)),r=-.70711*((2.30753+i*.27061)/(1+i*(.99229+i*.04481))-i);t<2;t++)n=rU(r)-o,r+=n/(1.1283791670955126*Math.exp(-r*r)-r*n);return e<1?r:-r}function q0(e,t,r){var n=1e-8,i=t-1,o=r-1,a=0,s,l,u,c,f,h,d,p,v,g,m;if(e<=0)return 0;if(e>=1)return 1;for(t>=1&&r>=1?(u=e<.5?e:1-e,c=Math.sqrt(-2*Math.log(u)),d=(2.30753+c*.27061)/(1+c*(.99229+c*.04481))-c,e<.5&&(d=-d),p=(d*d-3)/6,v=2/(1/(2*t-1)+1/(2*r-1)),g=d*Math.sqrt(p+v)/v-(1/(2*r-1)-1/(2*t-1))*(p+5/6-2/(3*v)),d=t/(t+r*Math.exp(2*g))):(s=Math.log(t/(t+r)),l=Math.log(r/(t+r)),c=Math.exp(t*s)/t,f=Math.exp(r*l)/r,g=c+f,e<c/g?d=Math.pow(t*g*e,1/t):d=1-Math.pow(r*g*(1-e),1/r)),m=-Ge(t)-Ge(r)+Ge(t+r);a<10;a++){if(d===0||d===1)return d;if(h=Z0(d,t,r)-e,c=Math.exp(i*Math.log(d)+o*Math.log(1-d)+m),f=h/c,d-=c=f/(1-.5*Math.min(1,f*(i/d-o/(1-d)))),d<=0&&(d=.5*(d+c)),d>=1&&(d=.5*(d+c+1)),Math.abs(c)<n*d&&a>0)break}return d}function Z0(e,t,r){var n=e===0||e===1?0:Math.exp(Ge(t+r)-Ge(t)-Ge(r)+t*Math.log(e)+r*Math.log(1-e));return e<0||e>1?!1:e<(t+1)/(t+r+2)?n*vT(e,t,r)/t:1-n*vT(1-e,r,t)/r}function yu(e,t){var r,n,i,o,a;if(t||(t=e),e)return Pf(e,t,function(){return yu()});do r=ti(),n=1.7156*(ti()-.5),i=r-.449871,o=Math.abs(n)+.386595,a=i*i+o*(.196*o-.25472*i);while(a>.27597&&(a>.27846||n*n>-4*Math.log(r)*r*r));return n/r}function Ao(e,t,r){var n=e,i,o,a,s,l,u;if(r||(r=t),e||(e=1),t)return u=xo(t,r),u.alter(function(){return Ao(e)}),u;e<1&&(e+=1),i=e-1/3,o=1/Math.sqrt(9*i);do{do l=yu(),s=1+o*l;while(s<=0);s=s*s*s,a=ti()}while(a>1-.331*Math.pow(l,4)&&Math.log(a)>.5*l*l+i*(1-s+Math.log(s)));if(e==n)return i*s;do a=ti();while(a===0);return Math.pow(a,1/n)*i*s}const T4t=Object.freeze(Object.defineProperty({__proto__:null,gammaln:Ge,loggam:tU,gammafn:Mi,gammap:w4t,lowRegGamma:Af,factorialln:om,factorial:Ul,combination:zA,combinationln:eU,permutation:S4t,betafn:Ny,betaln:VA,betacf:vT,gammapinv:Fy,erf:By,erfc:rU,erfcinv:UA,ibetainv:q0,ibeta:Z0,randn:yu,randg:Ao},Symbol.toStringTag,{value:"Module"}));function P4t(e,t,r){return e>1||e<0?0:t==1&&r==1?1:t<512&&r<512?Math.pow(e,t-1)*Math.pow(1-e,r-1)/Ny(t,r):Math.exp((t-1)*Math.log(e)+(r-1)*Math.log(1-e)-VA(t,r))}function p1(e,t,r){return e>1||e<0?(e>1)*1:Z0(e,t,r)}function E4t(e,t,r){return q0(e,t,r)}function A4t(e,t){return e/(e+t)}function C4t(e,t){return q0(.5,e,t)}function M4t(e,t){return(e-1)/(e+t-2)}function k4t(e,t){var r=Ao(e);return r/(r+Ao(t))}function x4t(e,t){return e*t/(Math.pow(e+t,2)*(e+t+1))}const L4t=Object.freeze(Object.defineProperty({__proto__:null,pdf:P4t,cdf:p1,inv:E4t,mean:A4t,median:C4t,mode:M4t,sample:k4t,variance:x4t},Symbol.toStringTag,{value:"Module"}));function VI(e,t,r,n){for(var i=0,o=1,a=1,s=1,l=0,u=0,c;Math.abs((a-u)/a)>n;)u=a,c=-(t+l)*(t+r+l)*e/(t+2*l)/(t+2*l+1),i=a+c*i,o=s+c*o,l=l+1,c=l*(r-l)*e/(t+2*l-1)/(t+2*l),a=i+c*a,s=o+c*s,i=i/s,o=o/s,a=a/s,s=1;return a/t}function nU(e,t,r){return r===0||r===1?t*r===e?1:0:zA(t,e)*Math.pow(r,e)*Math.pow(1-r,t-e)}function I4t(e,t,r){var n,i=1e-10;if(e<0)return 0;if(e>=t)return 1;if(r<0||r>1||t<=0)return NaN;e=Math.floor(e);var o=r,a=e+1,s=t-e,l=a+s,u=Math.exp(Ge(l)-Ge(s)-Ge(a)+a*Math.log(o)+s*Math.log(1-o));return o<(a+1)/(l+2)?n=u*VI(o,a,s,i):n=1-u*VI(1-o,s,a,i),Math.round((1-n)*(1/i))/(1/i)}const O4t=Object.freeze(Object.defineProperty({__proto__:null,pdf:nU,cdf:I4t},Symbol.toStringTag,{value:"Module"}));function R4t(e,t,r){return r<0?0:r/(Math.pow(e-t,2)+Math.pow(r,2))/Math.PI}function D4t(e,t,r){return Math.atan((e-t)/r)/Math.PI+.5}function N4t(e,t,r){return t+r*Math.tan(Math.PI*(e-.5))}function F4t(e){return e}function B4t(e){return e}function $4t(e,t){return yu()*Math.sqrt(1/(2*randg(.5)))*t+e}const z4t=Object.freeze(Object.defineProperty({__proto__:null,pdf:R4t,cdf:D4t,inv:N4t,median:F4t,mode:B4t,sample:$4t},Symbol.toStringTag,{value:"Module"}));function V4t(e,t,r){var n,i,o;return e<0?0:t<=2?e===0&&t<2?1/0:e===0&&t===2?1:1/Ny(t/2,r/2)*Math.pow(t/r,t/2)*Math.pow(e,t/2-1)*Math.pow(1+t/r*e,-(t+r)/2):(n=t*e/(r+e*t),i=r/(r+e*t),o=t*i/2,o*nU((t-2)/2,(t+r-2)/2,n))}function v1(e,t,r){return e<0?0:Z0(t*e/(t*e+r),t/2,r/2)}function U4t(e,t,r){return r/(t*(1/q0(e,t/2,r/2)-1))}function G4t(e,t){return t>2?t/(t-2):void 0}function j4t(e,t){return e>2?t*(e-2)/(e*(t+2)):void 0}function W4t(e,t){var r=Ao(e/2)*2,n=Ao(t/2)*2;return r/e/(n/t)}function H4t(e,t){if(!(t<=4))return 2*t*t*(e+t-2)/(e*(t-2)*(t-2)*(t-4))}const X4t=Object.freeze(Object.defineProperty({__proto__:null,pdf:V4t,cdf:v1,inv:U4t,mean:G4t,mode:j4t,sample:W4t,variance:H4t},Symbol.toStringTag,{value:"Module"}));function Y4t(e,t){return e<0?0:e===0&&t===2?.5:Math.exp((t/2-1)*Math.log(e)-e/2-t/2*Math.log(2)-Ge(t/2))}function q4t(e,t){return e<0?0:Af(t/2,e/2)}function Z4t(e,t){return 2*Fy(e,.5*t)}function K4t(e){return e}function J4t(e){return e*Math.pow(1-2/(9*e),3)}function Q4t(e){return e-2>0?e-2:0}function t6t(e){return Ao(e/2)*2}function e6t(e){return 2*e}const r6t=Object.freeze(Object.defineProperty({__proto__:null,pdf:Y4t,cdf:q4t,inv:Z4t,mean:K4t,median:J4t,mode:Q4t,sample:t6t,variance:e6t},Symbol.toStringTag,{value:"Module"}));function n6t(e,t){return e<0?0:t*Math.exp(-t*e)}function i6t(e,t){return e<0?0:1-Math.exp(-t*e)}function o6t(e,t){return-Math.log(1-e)/t}function a6t(e){return 1/e}function s6t(e){return 1/e*Math.log(2)}function l6t(){return 0}function u6t(e){return-1/e*Math.log(ti())}function c6t(e){return Math.pow(e,-2)}const f6t=Object.freeze(Object.defineProperty({__proto__:null,pdf:n6t,cdf:i6t,inv:o6t,mean:a6t,median:s6t,mode:l6t,sample:u6t,variance:c6t},Symbol.toStringTag,{value:"Module"}));function h6t(e,t,r){return e<0?0:e===0&&t===1?1/r:Math.exp((t-1)*Math.log(e)-e/r-Ge(t)-t*Math.log(r))}function d6t(e,t,r){return e<0?0:Af(t,e/r)}function p6t(e,t,r){return Fy(e,t)*r}function v6t(e,t){return e*t}function g6t(e,t){if(e>1)return(e-1)*t}function m6t(e,t){return Ao(e)*t}function y6t(e,t){return e*t*t}const _6t=Object.freeze(Object.defineProperty({__proto__:null,pdf:h6t,cdf:d6t,inv:p6t,mean:v6t,mode:g6t,sample:m6t,variance:y6t},Symbol.toStringTag,{value:"Module"}));function ed(e,t,r,n){if(e!==e|0)return!1;if(e<0||e<r-(t-n))return 0;if(e>n||e>r)return 0;if(r*2>t)return n*2>t?ed(t-r-n+e,t,t-r,t-n):ed(n-e,t,t-r,n);if(n*2>t)return ed(r-e,t,r,t-n);if(r<n)return ed(e,t,n,r);for(var i=1,o=0,a=0;a<e;a++){for(;i>1&&o<n;)i*=1-r/(t-o),o++;i*=(n-a)*(r-a)/((a+1)*(t-r-n+a+1))}for(;o<n;o++)i*=1-r/(t-o);return Math.min(1,Math.max(0,i))}function rd(e,t,r,n){if(e<0||e<r-(t-n))return 0;if(e>=n||e>=r)return 1;if(r*2>t)return n*2>t?rd(t-r-n+e,t,t-r,t-n):1-rd(n-e-1,t,t-r,n);if(n*2>t)return 1-rd(r-e-1,t,r,t-n);if(r<n)return rd(e,t,n,r);for(var i=1,o=1,a=0,s=0;s<e;s++){for(;i>1&&a<n;){var l=1-r/(t-a);o*=l,i*=l,a++}o*=(n-s)*(r-s)/((s+1)*(t-r-n+s+1)),i+=o}for(;a<n;a++)i*=1-r/(t-a);return Math.min(1,Math.max(0,i))}const b6t=Object.freeze(Object.defineProperty({__proto__:null,pdf:ed,cdf:rd},Symbol.toStringTag,{value:"Module"}));function w6t(e,t,r){return e<=0?0:Math.exp(-(t+1)*Math.log(e)-r/e-Ge(t)+t*Math.log(r))}function S6t(e,t,r){return e<=0?0:1-Af(t,r/e)}function T6t(e,t,r){return r/Fy(1-e,t)}function P6t(e,t){return e>1?t/(e-1):void 0}function E6t(e,t){return t/(e+1)}function A6t(e,t){return t/Ao(e)}function C6t(e,t){if(!(e<=2))return t*t/((e-1)*(e-1)*(e-2))}const M6t=Object.freeze(Object.defineProperty({__proto__:null,pdf:w6t,cdf:S6t,inv:T6t,mean:P6t,mode:E6t,sample:A6t,variance:C6t},Symbol.toStringTag,{value:"Module"}));function k6t(e,t,r){return e===0&&t===1?r:e===1&&r===1?t:Math.exp(Math.log(t)+Math.log(r)+(t-1)*Math.log(e)+(r-1)*Math.log(1-Math.pow(e,t)))}function x6t(e,t,r){return e<0?0:e>1?1:1-Math.pow(1-Math.pow(e,t),r)}function L6t(e,t,r){return Math.pow(1-Math.pow(1-e,1/r),1/t)}function I6t(e,t){return t*Mi(1+1/e)*Mi(t)/Mi(1+1/e+t)}function O6t(e,t){return Math.pow(1-Math.pow(2,-1/t),1/e)}function R6t(e,t){if(e>=1&&t>=1&&e!==1&&t!==1)return Math.pow((e-1)/(e*t-1),1/e)}function D6t(){throw new Error("variance not yet implemented")}const N6t=Object.freeze(Object.defineProperty({__proto__:null,pdf:k6t,cdf:x6t,inv:L6t,mean:I6t,median:O6t,mode:R6t,variance:D6t},Symbol.toStringTag,{value:"Module"}));function F6t(e){return e/Math.abs(e)}function B6t(e,t,r){return r<=0?0:Math.exp(-Math.abs(e-t)/r)/(2*r)}function $6t(e,t,r){return r<=0?0:e<t?.5*Math.exp((e-t)/r):1-.5*Math.exp(-(e-t)/r)}function z6t(e){return e}function V6t(e){return e}function U6t(e){return e}function G6t(e,t){return 2*t*t}function j6t(e,t){var r=ti()-.5;return e-t*F6t(r)*Math.log(1-2*Math.abs(r))}const W6t=Object.freeze(Object.defineProperty({__proto__:null,pdf:B6t,cdf:$6t,mean:z6t,median:V6t,mode:U6t,variance:G6t,sample:j6t},Symbol.toStringTag,{value:"Module"}));function H6t(e,t,r){return e<=0?0:Math.exp(-Math.log(e)-.5*Math.log(2*Math.PI)-Math.log(r)-Math.pow(Math.log(e)-t,2)/(2*r*r))}function X6t(e,t,r){return e<0?0:.5+.5*By((Math.log(e)-t)/Math.sqrt(2*r*r))}function Y6t(e,t,r){return Math.exp(-1.4142135623730951*r*UA(2*e)+t)}function q6t(e,t){return Math.exp(e+t*t/2)}function Z6t(e){return Math.exp(e)}function K6t(e,t){return Math.exp(e-t*t)}function J6t(e,t){return Math.exp(yu()*t+e)}function Q6t(e,t){return(Math.exp(t*t)-1)*Math.exp(2*e+t*t)}const t5t=Object.freeze(Object.defineProperty({__proto__:null,pdf:H6t,cdf:X6t,inv:Y6t,mean:q6t,median:Z6t,mode:K6t,sample:J6t,variance:Q6t},Symbol.toStringTag,{value:"Module"}));function iU(e,t,r){return e!==e>>>0?!1:e<0?0:zA(e+t-1,t-1)*Math.pow(1-r,e)*Math.pow(r,t)}function e5t(e,t,r){var n=0,i=0;if(e<0)return 0;for(;i<=e;i++)n+=iU(i,t,r);return n}const r5t=Object.freeze(Object.defineProperty({__proto__:null,pdf:iU,cdf:e5t},Symbol.toStringTag,{value:"Module"}));function oU(e,t){return t=t>1e100?1e100:t,1/(Math.sqrt(t)*Ny(.5,t/2))*Math.pow(1+e*e/t,-((t+1)/2))}function qo(e,t){var r=t/2;return Z0((e+Math.sqrt(e*e+t))/(2*Math.sqrt(e*e+t)),r,r)}function g1(e,t){var r=q0(2*Math.min(e,1-e),.5*t,.5);return r=Math.sqrt(t*(1-r)/r),e>.5?r:-r}function n5t(e){return e>1?0:void 0}function i5t(){return 0}function o5t(){return 0}function a5t(e){return yu()*Math.sqrt(e/(2*Ao(e/2)))}function s5t(e){return e>2?e/(e-2):e>1?1/0:void 0}const l5t=Object.freeze(Object.defineProperty({__proto__:null,pdf:oU,cdf:qo,inv:g1,mean:n5t,median:i5t,mode:o5t,sample:a5t,variance:s5t},Symbol.toStringTag,{value:"Module"}));function u5t(e,t,r){return Math.exp(-.5*Math.log(2*Math.PI)-Math.log(r)-Math.pow(e-t,2)/(2*r*r))}function vi(e,t,r){return .5*(1+By((e-t)/Math.sqrt(2*r*r)))}function gT(e,t,r){return-1.4142135623730951*r*UA(2*e)+t}function c5t(e){return e}function f5t(e){return e}function h5t(e){return e}function d5t(e,t){return yu()*t+e}function p5t(e,t){return t*t}const v5t=Object.freeze(Object.defineProperty({__proto__:null,pdf:u5t,cdf:vi,inv:gT,mean:c5t,median:f5t,mode:h5t,sample:d5t,variance:p5t},Symbol.toStringTag,{value:"Module"}));function g5t(e,t,r){var n=1e-14;return Math.abs(r)<n?oU(e,t):Math.abs(e)<n?Math.exp(Ge((t+1)/2)-r*r/2-.5*Math.log(Math.PI*t)-Ge(t/2)):t/e*(mT(e*Math.sqrt(1+2/t),t+2,r)-mT(e,t,r))}function mT(e,t,r){var n=1e-14,i=200;if(Math.abs(r)<n)return qo(e,t);var o=!1;e<0&&(o=!0,r=-r);for(var a=vi(-r,0,1),s=n+1,l=s,u=e*e/(e*e+t),c=0,f=Math.exp(-r*r/2),h=Math.exp(-r*r/2-.5*Math.log(2)-Ge(3/2))*r;c<i||l>n||s>n;)l=s,c>0&&(f*=r*r/(2*c),h*=r*r/(2*(c+1/2))),s=f*p1(u,c+.5,t/2)+h*p1(u,c+1,t/2),a+=.5*s,c++;return o?1-a:a}const m5t=Object.freeze(Object.defineProperty({__proto__:null,pdf:g5t,cdf:mT},Symbol.toStringTag,{value:"Module"}));function y5t(e,t,r){return e<t?0:r*Math.pow(t,r)/Math.pow(e,r+1)}function _5t(e,t,r){return e<t?0:1-Math.pow(t/e,r)}function b5t(e,t,r){return t/Math.pow(1-e,1/r)}function w5t(e,t){if(!(t<=1))return t*Math.pow(e,t)/(t-1)}function S5t(e,t){return e*(t*Math.SQRT2)}function T5t(e){return e}function P5t(e,t){if(!(t<=2))return e*e*t/(Math.pow(t-1,2)*(t-2))}const E5t=Object.freeze(Object.defineProperty({__proto__:null,pdf:y5t,cdf:_5t,inv:b5t,mean:w5t,median:S5t,mode:T5t,variance:P5t},Symbol.toStringTag,{value:"Module"}));function ht(...e){return new ht._init(...e)}ht._init=function(...e){if(Eo(e[0]))if(Eo(e[0][0])){m0(e[1])&&(e[0]=Zr(e[0],e[1]));for(let t=0;t<e[0].length;t++)this[t]=e[0][t];this.length=e[0].length}else this[0]=m0(e[1])?Zr(e[0],e[1]):e[0],this.length=1;else if(Sr(e[0]))this[0]=HV.apply(null,e),this.length=1;else{if(e[0]instanceof ht)return ht(e[0].toArray());this[0]=[],this.length=1}return this};ht._init.prototype=ht.prototype;ht._init.constructor=ht;ht.setRandom=VV;const un=ht.prototype;un.length=0;un.push=Array.prototype.push;un.sort=Array.prototype.sort;un.splice=Array.prototype.splice;un.slice=Array.prototype.slice;un.toArray=function(){return this.length>1?this.slice():this.slice()[0]};un.map=function(e,t){return ht(Zr(this,e,t))};un.cumreduce=function(e,t){return ht(Oy(this,e,t))};un.alter=function(e){return NA(this,e),this};"transpose clear symmetric rows cols dimensions diag antidiag".split(" ").forEach(e=>{un[e]=function(t){if(t)return t.call(this,un[e].call(this)),this;const r=ht[e](this);return Array.isArray(r)?ht(r):r}});"row col".split(" ").forEach(e=>{un[e]=function(t,r){return r?(r.call(this,un[e].call(this,t)),this):ht(ht[e](this,t))}});"create zeros ones rand identity".split(" ").forEach(e=>{un[e]=function(...t){return ht(ht[e](...t))}});function aU(e,t){return t<0||e%1!==0||e<0?0:Math.pow(t,e)*Math.exp(-t)/Ul(e)}function A5t(e,t){var r=[],n=0;if(e<0)return 0;for(;n<=e;n++)r.push(aU(n,t));return Kr(r)}function C5t(e){return e}function M5t(e){return e}function k5t(e){var t=1,r=0,n=Math.exp(-e);do r++,t*=ht._random_fn();while(t>n);return r-1}function x5t(e){var t=e,r,n,i,o,a,s,l,u,c,f;for(o=Math.sqrt(t),a=Math.log(t),l=.931+2.53*o,s=-.059+.02483*l,u=1.1239+1.1328/(l-3.4),c=.9277-3.6224/(l-2);;){if(n=Math.random()-.5,i=Math.random(),f=.5-Math.abs(n),r=Math.floor((2*s/f+l)*n+t+.43),f>=.07&&i<=c)return r;if(!(r<0||f<.013&&i>f)&&Math.log(i)+Math.log(u)-Math.log(s/(f*f)+l)<=-t+r*a-tU(r+1))return r}}function L5t(e){return e<10?k5t(e):x5t(e)}const I5t=Object.freeze(Object.defineProperty({__proto__:null,pdf:aU,cdf:A5t,mean:C5t,variance:M5t,sample:L5t},Symbol.toStringTag,{value:"Module"}));function O5t(e,t,r,n){return r<=t||n<t||n>r?NaN:e<t||e>r?0:e<n?2*(e-t)/((r-t)*(n-t)):e===n?2/(r-t):2*(r-e)/((r-t)*(r-n))}function R5t(e,t,r,n){return r<=t||n<t||n>r?NaN:e<=t?0:e>=r?1:e<=n?Math.pow(e-t,2)/((r-t)*(n-t)):1-Math.pow(r-e,2)/((r-t)*(r-n))}function D5t(e,t,r,n){return r<=t||n<t||n>r?NaN:e<=(n-t)/(r-t)?t+(r-t)*Math.sqrt(e*((n-t)/(r-t))):t+(r-t)*(1-Math.sqrt((1-e)*(1-(n-t)/(r-t))))}function N5t(e,t,r){return(e+t+r)/3}function F5t(e,t,r){if(r<=(e+t)/2)return t-Math.sqrt((t-e)*(t-r))/Math.sqrt(2);if(r>(e+t)/2)return e+Math.sqrt((t-e)*(r-e))/Math.sqrt(2)}function B5t(e,t,r){return r}function $5t(e,t,r){var n=ti();return n<(r-e)/(t-e)?e+Math.sqrt(n*(t-e)*(r-e)):t-Math.sqrt((1-n)*(t-e)*(t-r))}function z5t(e,t,r){return(e*e+t*t+r*r-e*t-e*r-t*r)/18}const V5t=Object.freeze(Object.defineProperty({__proto__:null,pdf:O5t,cdf:R5t,inv:D5t,mean:N5t,median:F5t,mode:B5t,sample:$5t,variance:z5t},Symbol.toStringTag,{value:"Module"}));function UI(e,t,r){var n=12,i=6,o=-30,a=-50,s=60,l=8,u=3,c=2,f=3,h=[.9815606342467192,.9041172563704749,.7699026741943047,.5873179542866175,.3678314989981802,.1252334085114689],d=[.04717533638651183,.10693932599531843,.16007832854334622,.20316742672306592,.2334925365383548,.24914704581340277],p=e*.5;if(p>=l)return 1;var v=2*vi(p,0,1)-1;v>=Math.exp(a/r)?v=Math.pow(v,r):v=0;var g;e>u?g=c:g=f;for(var m=p,y=(l-p)/g,_=m+y,b=0,T=r-1,S=1;S<=g;S++){for(var P=0,C=.5*(_+m),A=.5*(_-m),M=1;M<=n;M++){var k,O;i<M?(k=n-M+1,O=h[k-1]):(k=M,O=-h[k-1]);var F=A*O,z=C+F,R=z*z;if(R>s)break;var j=2*vi(z,0,1),Z=2*vi(z,e,1),q=j*.5-Z*.5;q>=Math.exp(o/T)&&(q=d[k-1]*Math.exp(-(.5*R))*Math.pow(q,T),P+=q)}P*=2*A*r/Math.sqrt(2*Math.PI),b+=P,m=_,_+=y}return v+=b,v<=Math.exp(o/t)?0:(v=Math.pow(v,t),v>=1?1:v)}function U5t(e,t,r){var n=.322232421088,i=.099348462606,o=-1,a=.588581570495,s=-.342242088547,l=.531103462366,u=-.204231210125,c=.10353775285,f=-453642210148e-16,h=.0038560700634,d=.8832,p=.2368,v=1.214,g=1.208,m=1.4142,y=120,_=.5-.5*e,b=Math.sqrt(Math.log(1/(_*_))),T=b+((((b*f+u)*b+s)*b+o)*b+n)/((((b*h+c)*b+l)*b+a)*b+i);r<y&&(T+=(T*T*T+T)/r/4);var S=d-p*T;return r<y&&(S+=-v/r+g*T/r),T*(S*Math.log(t-1)+m)}function Ld(e,t,r){var n=1,i=t,o=16,a=8,s=-30,l=1e-14,u=100,c=800,f=5e3,h=25e3,d=1,p=.5,v=.25,g=.125,m=[.9894009349916499,.9445750230732326,.8656312023878318,.755404408355003,.6178762444026438,.45801677765722737,.2816035507792589,.09501250983763744],y=[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685];if(e<=0)return 0;if(r<2||n<1||i<2)return NaN;if(!Number.isFinite(e))return 1;if(r>h)return UI(e,n,i);var _=r*.5,b=_*Math.log(r)-r*Math.log(2)-Ge(_),T=_-1,S=r*.25,P;r<=u?P=d:r<=c?P=p:r<=f?P=v:P=g,b+=Math.log(P);for(var C=0,A=1;A<=50;A++){for(var M=0,k=(2*A-1)*P,O=1;O<=o;O++){var F,z;a<O?(F=O-a-1,z=b+T*Math.log(k+m[F]*P)-(m[F]*P+k)*S):(F=O-1,z=b+T*Math.log(k-m[F]*P)+(m[F]*P-k)*S);var R;if(z>=s){a<O?R=e*Math.sqrt((m[F]*P+k)*.5):R=e*Math.sqrt((-(m[F]*P)+k)*.5);var j=UI(R,n,i),Z=j*y[F]*Math.exp(z);M+=Z}}if(A*P>=1&&M<=l)break;C+=M}if(M>l)throw new Error("tukey.cdf failed to converge");return C>1&&(C=1),C}function G5t(e,t,r){var n=1,i=t,o=1e-4,a=50;if(r<2||n<1||i<2)return NaN;if(e<0||e>1)return NaN;if(e===0)return 0;if(e===1)return 1/0;var s=U5t(e,i,r),l=Ld(s,t,r)-e,u;l>0?u=Math.max(0,s-1):u=s+1;for(var c=Ld(u,t,r)-e,f,h=1;h<a;h++){f=u-c*(u-s)/(c-l),l=c,s=u,f<0&&(f=0,c=-e),c=Ld(f,t,r)-e,u=f;var d=Math.abs(u-s);if(d<o)return f}throw new Error("tukey.inv failed to converge")}const j5t=Object.freeze(Object.defineProperty({__proto__:null,cdf:Ld,inv:G5t},Symbol.toStringTag,{value:"Module"}));function W5t(e,t,r){return e<0||t<0||r<0?0:r/t*Math.pow(e/t,r-1)*Math.exp(-Math.pow(e/t,r))}function H5t(e,t,r){return e<0?0:1-Math.exp(-Math.pow(e/t,r))}function X5t(e,t,r){return t*Math.pow(-Math.log(1-e),1/r)}function sU(e,t){return e*Mi(1+1/t)}function Y5t(e,t){return e*Math.pow(Math.log(2),1/t)}function q5t(e,t){return t<=1?0:e*Math.pow((t-1)/t,1/t)}function Z5t(e,t){return e*Math.pow(-Math.log(ti()),1/t)}function K5t(e,t){return e*e*Mi(1+2/t)-Math.pow(sU(e,t),2)}const J5t=Object.freeze(Object.defineProperty({__proto__:null,pdf:W5t,cdf:H5t,inv:X5t,mean:sU,median:Y5t,mode:q5t,sample:Z5t,variance:K5t},Symbol.toStringTag,{value:"Module"})),Q5t=Object.freeze(Object.defineProperty({__proto__:null,arcsine:b4t,beta:L4t,binomial:O4t,cauchy:z4t,centralF:X4t,chisquare:r6t,exponential:f6t,gamma:_6t,hypgeom:b6t,invgamma:M6t,kumaraswamy:N6t,laplace:W6t,lognormal:t5t,negbin:r5t,noncentralt:m5t,normal:v5t,pareto:E5t,poisson:I5t,studentt:l5t,triangular:V5t,tukey:j5t,uniform:f4t,weibull:J5t},Symbol.toStringTag,{value:"Module"}));function yT(){const e=[...arguments];return Sr(e[1])?(e[0]-e[1])/e[2]:(e[0]-ar(e[1]))/va(e[1],e[2])}function GA(){const e=[...arguments];let t;return Eo(e[1])?(t=yT(e[0],e[1],e[3]),e[2]===1?vi(-Math.abs(t),0,1):vi(-Math.abs(t),0,1)*2):e.length>2?(t=yT(e[0],e[1],e[2]),e[3]===1?vi(-Math.abs(t),0,1):vi(-Math.abs(t),0,1)*2):(t=e[0],e[1]===1?vi(-Math.abs(t),0,1):vi(-Math.abs(t),0,1)*2)}function _T(){const e=[...arguments];return e.length===4?(e[0]-e[1])/(e[2]/Math.sqrt(e[3])):(e[0]-ar(e[1]))/(va(e[1],!0)/Math.sqrt(e[1].length))}function txt(){const e=[...arguments];let t;return e.length===5?(t=Math.abs(_T(e[0],e[1],e[2],e[3])),e[4]===1?qo(-t,e[3]-1):qo(-t,e[3]-1)*2):Sr(e[1])?(t=Math.abs(e[0]),e[2]===1?qo(-t,e[1]-1):qo(-t,e[1]-1)*2):(t=Math.abs(_T(e[0],e[1])),e[2]===1?qo(-t,e[1].length-1):qo(-t,e[1].length-1)*2)}function ext(){var e=[...arguments],t,r,n,i,o,a,s,l;if(e.length===1){for(o=new Array(e[0].length),s=0;s<e[0].length;s++)o[s]=e[0][s];e=o}for(r=[],s=0;s<e.length;s++)r=r.concat(e[s]);for(n=ar(r),t=0,s=0;s<e.length;s++)t=t+e[s].length*Math.pow(ar(e[s])-n,2);for(t/=e.length-1,a=0,s=0;s<e.length;s++)for(i=ar(e[s]),l=0;l<e[s].length;l++)a+=Math.pow(e[s][l]-i,2);return a/=r.length-e.length,t/a}function rxt(){var e=[...arguments],t,r,n,i;if(Sr(e[0]))return 1-v1(e[0],e[1],e[2]);var o=o(e);for(t=e.length-1,n=0,i=0;i<e.length;i++)n=n+e[i].length;return r=n-t-1,1-v1(o,t,r)}function nxt(e,t,r){return 1-v1(e,t,r)}function bT(){var e=[...arguments],t,r,n,i,o;return Sr(e[0])?(t=e[0],r=e[1],n=e[2],i=e[3],o=e[4]):(t=ar(e[0]),r=ar(e[1]),n=e[0].length,i=e[1].length,o=e[2]),Math.abs(t-r)/(o*Math.sqrt((1/n+1/i)/2))}function lU(){var e=[...arguments],t;e.length===3?(t=e[0],e=e.slice(1)):e.length===7?(t=bT(e[0],e[1],e[2],e[3],e[4]),e=e.slice(5)):(t=bT(e[0],e[1],e[2]),e=e.slice(3));var r=e[0],n=e[1];return 1-Ld(t,n,r-n)}function ixt(e){for(var t=ZV(e),r=e.map(l=>ar(l)),n=e.reduce((l,u)=>l+u.length,0),i=[],o=0;o<e.length;++o)for(var a=o+1;a<e.length;++a){var s=lU(r[o],r[a],e[o].length,e[a].length,t,n,e.length);i.push([[o,a],s])}return i}function oxt(){const e=[...arguments],t=new Array(2);let r;return e.length===4?r=Math.abs(gT(e[1]/2,0,1)*e[2]/Math.sqrt(e[3])):r=Math.abs(gT(e[1]/2,0,1)*va(e[2])/Math.sqrt(e[2].length)),t[0]=e[0]-r,t[1]=e[0]+r,t}function axt(){const e=[...arguments],t=new Array(2);let r;return e.length===4?r=Math.abs(g1(e[1]/2,e[3]-1)*e[2]/Math.sqrt(e[3])):r=Math.abs(g1(e[1]/2,e[2].length-1)*va(e[2],!0)/Math.sqrt(e[2].length)),t[0]=e[0]-r,t[1]=e[0]+r,t}function sxt(e,t){return e<t}function uU(e,t,r,n){if(e>1||r>1||e<=0||r<=0)throw new Error("Proportions should be greater than 0 and less than 1");var i=(e*t+r*n)/(t+n),o=Math.sqrt(i*(1-i)*(1/t+1/n));return(e-r)/o}function lxt(e,t,r,n){const i=uU(e,t,r,n);return GA(i,1)}function uxt(e,t,r,n){const i=uU(e,t,r,n);return GA(i,2)}const cxt=Object.freeze(Object.defineProperty({__proto__:null,zscore:yT,ztest:GA,tscore:_T,ttest:txt,anovafscore:ext,anovaftest:rxt,ftest:nxt,qscore:bT,qtest:lU,tukeyhsd:ixt,normalci:oxt,tci:axt,significant:sxt,oneSidedDifferenceOfProportions:lxt,twoSidedDifferenceOfProportions:uxt},Symbol.toStringTag,{value:"Module"}));function Oi(e){return Eo(e)||e.constructor.name==="jStat"}function on(e,t){return Oi(t)?(Oi(t[0])||(t=[t]),Zr(e,function(r,n,i){return r+t[n][i]})):Zr(e,function(r){return r+t})}function iu(e,t){return Oi(t)?(Oi(t[0])||(t=[t]),Zr(e,function(r,n,i){return r-t[n][i]||0})):Zr(e,function(r){return r-t})}function wT(e,t){return Oi(t)?(Oi(t[0])||(t=[t]),Jt(e,Co(t))):Zr(e,function(r){return r/t})}function Jt(e,t){let r,n;if(e.length===void 0&&t.length===void 0)return e*t;const i=e.length,o=e[0].length,a=xo(i,r=Oi(t)?t[0].length:o);let s=0;if(Oi(t)){for(;s<r;s++)for(let l=0;l<i;l++){n=0;for(let u=0;u<o;u++)n+=e[l][u]*t[u][s];a[l][s]=n}return i===1&&s===1?a[0][0]:a}return Zr(e,function(l){return l*t})}function fxt(e,t){return Jt(e.map(r=>[r]),[t])}function m1(e,t){Oi(e[0])||(e=[e]),Oi(t[0])||(t=[t]);var r=e[0].length===1&&e.length!==1?ms(e):e,n=t[0].length===1&&t.length!==1?ms(t):t,i=[],o=r.length,a=r[0].length,s,l;for(let u=0;u<o;u++){for(i[u]=[],s=0,l=0;l<a;l++)s+=r[u][l]*n[u][l];i[u]=s}return i.length===1?i[0]:i}function ST(e,t){return Zr(e,r=>Math.pow(r,t))}function hxt(e){return Zr(e,t=>Math.exp(t))}function dxt(e){return Zr(e,t=>Math.log(t))}function pxt(e){return Zr(e,t=>Math.abs(t))}function Qc(e,t){var r=0,n=0;for(isNaN(t)&&(t=2),Oi(e[0])&&(e=e[0]);n<e.length;n++)r+=Math.pow(Math.abs(e[n]),t);return Math.pow(r,1/t)}function vxt(e,t){return Math.acos(m1(e,t)/(Qc(e)*Qc(t)))}function jA(e,t){var r=[],n;for(n=0;n<e.length;n++)r.push(e[n].slice());for(n=0;n<r.length;n++)Array.prototype.push.apply(r[n],t[n]);return r}function Co(e){for(var t=e.length,r=e[0].length,n=nu(t,r),i=cU(e,n),o=[],a=0,s;a<t;a++)for(o[a]=[],s=r;s<i[0].length;s++)o[a][s-r]=i[a][s];return o}function gxt(e){var t=e.length,r=t*2,n=new Array(r),i=t-1,o=r-1,a=i-t+1,s=o,l=0,u=0,c;if(t===2)return e[0][0]*e[1][1]-e[0][1]*e[1][0];for(;l<r;l++)n[l]=1;for(l=0;l<t;l++){for(c=0;c<t;c++)n[a<0?a+t:a]*=e[l][c],n[s<t?s+t:s]*=e[l][c],a++,s--;a=--i-t+1,s=--o}for(l=0;l<t;l++)u+=n[l];for(;l<r;l++)u-=n[l];return u}function mxt(e,t){var r=0,n=0,i=e.length,o=e[0].length,a=1,s=0,l=[],u,c,f,h;for(e=jA(e,t),u=e[0].length,r=0;r<i;r++){for(c=e[r][r],n=r,h=r+1;h<o;h++)c<Math.abs(e[h][r])&&(c=e[h][r],n=h);if(n!=r)for(h=0;h<u;h++)f=e[r][h],e[r][h]=e[n][h],e[n][h]=f;for(n=r+1;n<i;n++)for(a=e[n][r]/e[r][r],h=r;h<u;h++)e[n][h]=e[n][h]-a*e[r][h]}for(r=i-1;r>=0;r--){for(s=0,n=r+1;n<=i-1;n++)s=s+l[n]*e[r][n];l[r]=(e[r][u-1]-s)/e[r][r]}return l}function cU(e,t){var r=jA(e,t),n=r.length,i=r[0].length,o=0,a,s,l;for(s=0;s<n;s++){var u=s;for(l=s+1;l<n;l++)Math.abs(r[l][s])>Math.abs(r[u][s])&&(u=l);var c=r[s];for(r[s]=r[u],r[u]=c,l=s+1;l<n;l++)for(o=r[l][s]/r[s][s],a=s;a<i;a++)r[l][a]-=r[s][a]*o}for(s=n-1;s>=0;s--){for(o=r[s][s],l=0;l<s;l++)for(a=i-1;a>s-1;a--)r[l][a]-=r[s][a]*r[l][s]/o;for(r[s][s]/=o,a=n;a<i;a++)r[s][a]/=o}return r}function yxt(e,t){var r=e[0].length,n=xo(1,r)[0],i,o=!1;return t[0].length!=null&&(t=t.map(function(a){return a[0]}),o=!0),Ie(r-1,-1,-1).forEach(function(a){i=Ie(a+1,r).map(function(s){return n[s]*e[a][s]}),n[a]=(t[a]-Kr(i))/e[a][a]}),o?n.map(function(a){return[a]}):n}function _xt(e,t){var r=e[0].length,n=xo(1,r)[0],i,o=!1;return t[0].length!=null&&(t=t.map(function(a){return a[0]}),o=!0),Ie(r).forEach(function(a){i=Ie(a).map(function(s){return e[a][s]*n[s]}),n[a]=(t[a]-Kr(i))/e[a][a]}),o?n.map(function(a){return[a]}):n}function bxt(e){var t=e.length,r=nu(t),n=xo(e.length,e[0].length),i;return Ie(t).forEach(function(o){n[0][o]=e[0][o]}),Ie(1,t).forEach(function(o){Ie(o).forEach(function(a){i=Ie(a).map(function(s){return r[o][s]*n[s][a]}),r[o][a]=(e[o][a]-Kr(i))/n[a][a]}),Ie(o,t).forEach(function(a){i=Ie(o).map(function(s){return r[o][s]*n[s][a]}),n[o][a]=e[i.length][a]-Kr(i)})}),[r,n]}function wxt(e){var t=e.length,r=xo(e.length,e[0].length),n;return Ie(t).forEach(function(i){n=Ie(i).map(function(o){return Math.pow(r[i][o],2)}),r[i][i]=Math.sqrt(e[i][i]-Kr(n)),Ie(i+1,t).forEach(function(o){n=Ie(i).map(function(a){return r[i][a]*r[o][a]}),r[o][i]=(e[i][o]-Kr(n))/r[i][i]})}),r}function Sxt(e,t,r,n){for(var i=0,o=0,a=e.length,s=[],l=[],u=[],c,f,h,d;i<a;i++)for(s[i]=[],l[i]=[],u[i]=[],o=0;o<a;o++)i>o?(s[i][o]=e[i][o],l[i][o]=u[i][o]=0):i<o?(l[i][o]=e[i][o],s[i][o]=u[i][o]=0):(u[i][o]=e[i][o],s[i][o]=l[i][o]=0);for(h=Jt(Jt(Co(u),on(s,l)),-1),f=Jt(Co(u),t),c=r,d=on(Jt(h,r),f),i=2;Math.abs(Qc(iu(d,c)))>n;)c=d,d=on(Jt(h,c),f),i++;return d}function Txt(e,t,r,n){for(var i=0,o=e.length,a=[],s=[],l=[],u,c,f,h,d;i<o;i++)for(a[i]=[],s[i]=[],l[i]=[],u=0;u<o;u++)i>u?(a[i][u]=e[i][u],s[i][u]=l[i][u]=0):i<u?(s[i][u]=e[i][u],a[i][u]=l[i][u]=0):(l[i][u]=e[i][u],a[i][u]=s[i][u]=0);for(h=Jt(Jt(Co(on(l,a)),s),-1),f=Jt(Co(on(l,a)),t),c=r,d=on(Jt(h,r),f),i=2;Math.abs(Qc(iu(d,c)))>n;)c=d,d=on(Jt(h,c),f),i=i+1;return d}function Pxt(e,t,r,n,i){for(var o=0,a=e.length,s=[],l=[],u=[],c,f,h,d,p;o<a;o++)for(s[o]=[],l[o]=[],u[o]=[],c=0;c<a;c++)o>c?(s[o][c]=e[o][c],l[o][c]=u[o][c]=0):o<c?(l[o][c]=e[o][c],s[o][c]=u[o][c]=0):(u[o][c]=e[o][c],s[o][c]=l[o][c]=0);for(d=Jt(Co(on(u,Jt(s,i))),iu(Jt(u,1-i),Jt(l,i))),h=Jt(Jt(Co(on(u,Jt(s,i))),t),i),f=r,p=on(Jt(d,r),h),o=2;Math.abs(Qc(iu(p,f)))>n;)f=p,p=on(Jt(d,f),h),o++;return p}function Ext(e){for(var t=e.length,r=e[0].length,n=0,i=[],o=[],a,s,l,u,c;n<t-1;n++){for(a=0,u=n+1;u<r;u++)a+=e[u][n]*e[u][n];for(c=e[n+1][n]>0?-1:1,a=c*Math.sqrt(a),s=Math.sqrt((a*a-e[n+1][n]*a)/2),i=xo(t,1),i[n+1][0]=(e[n+1][n]-a)/(2*s),l=n+2;l<t;l++)i[l][0]=e[l][n]/(2*s);o=iu(nu(t,r),Jt(Jt(i,ms(i)),2)),e=Jt(o,Jt(e,o))}return e}function fU(e){var t=e.length,r=e[0].length,n=xo(r,r);e=Ry(e);var i,o,a;for(o=0;o<r;o++){for(n[o][o]=Math.sqrt(Kr(Ie(t).map(function(s){return e[s][o]*e[s][o]}))),i=0;i<t;i++)e[i][o]=e[i][o]/n[o][o];for(a=o+1;a<r;a++)for(n[o][a]=Kr(Ie(t).map(function(s){return e[s][o]*e[s][a]})),i=0;i<t;i++)e[i][a]=e[i][a]-e[i][o]*n[o][a]}return[e,n]}function Axt(e){e=Ry(e);var t=e.length,r=nu(t);return Ie(t-1,-1,-1).forEach(function(n){td(r,{row:n},wT(Yo(r,{row:n}),e[n][n])),td(e,{row:n},wT(Yo(e,{row:n}),e[n][n])),Ie(n).forEach(function(i){var o=Jt(e[i][n],-1),a=Yo(e,{row:i}),s=Jt(Yo(e,{row:n}),o);td(e,{row:i},on(a,s));var l=Yo(r,{row:i}),u=Jt(Yo(r,{row:n}),o);td(r,{row:i},on(l,u))})}),r}function hU(e,t){var r=!1;t[0].length===void 0&&(t=t.map(function(f){return[f]}),r=!0);var[n,i]=fU(e),o=e[0].length,a=Yo(n,{col:{end:o}}),s=Yo(i,{row:{end:o}}),l=Axt(s),u=ms(a);u[0].length===void 0&&(u=[u]);var c=Jt(Jt(l,u),t);return c.length===void 0&&(c=[[c]]),r?c.map(function(f){return f[0]}):c}function dU(e){for(var t=1,r=e.length,n=nu(r,r),i=[],o,a,s,l,u,c,f,h;t===1;){for(c=e[0][1],l=0,u=1,a=0;a<r;a++)for(s=0;s<r;s++)a!=s&&c<Math.abs(e[a][s])&&(c=Math.abs(e[a][s]),l=a,u=s);for(e[l][l]===e[u][u]?f=e[l][u]>0?Math.PI/4:-Math.PI/4:f=Math.atan(2*e[l][u]/(e[l][l]-e[u][u]))/2,h=nu(r,r),h[l][l]=Math.cos(f),h[l][u]=-Math.sin(f),h[u][l]=Math.sin(f),h[u][u]=Math.cos(f),n=Jt(n,h),o=Jt(Jt(Co(h),e),h),e=o,t=0,a=1;a<r;a++)for(s=1;s<r;s++)a!=s&&Math.abs(e[a][s])>.001&&(t=1)}for(a=0;a<r;a++)i.push(e[a][a]);return[n,i]}function Cxt(e,t,r,n,i,o){var a,s,l,u,c;if(o===2)for(;n<=r;)a=t*e(n,i),s=t*e(n+t,i+a),l=i+(a+s)/2,i=l,n=n+t;if(o===4)for(;n<=r;)a=t*e(n,i),s=t*e(n+t/2,i+a/2),u=t*e(n+t/2,i+s/2),c=t*e(n+t,i+u),l=i+(a+2*s+2*u+c)/6,i=l,n=n+t;return i}function Mxt(e,t,r,n){for(var i=0,o=(r-t)/2,a=[],s=[],l=[],u,c,f,h,d;i<n/2;){for(d=e(t),f=t,h=0;f<=r;f=f+o,h++)a[h]=f;for(u=a.length,f=1;f<u-1;f++)d+=(f%2!==0?4:2)*e(a[f]);d=o/3*(d+e(r)),l[i]=d,o/=2,i++}for(c=l.length,u=1;c!==1;){for(f=0;f<c-1;f++)s[f]=(Math.pow(4,u)*l[f+1]-l[f])/(Math.pow(4,u)-1);c=s.length,l=s,s=[],u++}return l}function kxt(e,t,r,n){function i(p,v){for(var g=0,m=p.length,y;g<m;g++)p[g]===v&&(y=g);return y}for(var o=Math.abs(r-e[i(e,r)+1]),a=0,s=[],l=[],u,c,f,h,d;n>=o;)u=i(e,r+n),c=i(e,r),s[a]=(t[u]-2*t[c]+t[2*c-u])/(n*n),n/=2,a++;for(h=s.length,f=1;h!=1;){for(d=0;d<h-1;d++)l[d]=(Math.pow(4,f)*s[d+1]-s[d])/(Math.pow(4,f)-1);h=l.length,s=l,l=[],f++}return s}function xxt(e,t,r,n){for(var i=(r-t)/n,o=e(t),a=[],s=t,l=0,u=1,c;s<=r;s=s+i,l++)a[l]=s;for(c=a.length;u<c-1;u++)o+=(u%2!==0?4:2)*e(a[u]);return i/3*(o+e(r))}function Lxt(e,t,r,n){for(var i=e.length,o=0,a=0,s=[],l=[],u=[],c=[],f;a<i;a++){for(s[a]=1,f=0;f<i;f++)a!=f&&(s[a]*=(n-e[f])/(e[a]-e[f]));for(l[a]=0,f=0;f<i;f++)a!=f&&(l[a]+=1/(e[a]-e[f]));u[a]=(1-2*(n-e[a])*l[a])*(s[a]*s[a]),c[a]=(n-e[a])*(s[a]*s[a]),o+=u[a]*t[a]+c[a]*r[a]}return o}function Ixt(e,t,r){for(var n=0,i=0,o,a,s=e.length;i<s;i++){for(a=t[i],o=0;o<s;o++)i!=o&&(a*=(r-e[o])/(e[i]-e[o]));n+=a}return n}function Oxt(e,t,r){for(var n=e.length,i=0,o,a=[],s=[],l=[],u=[],c=[],f=[],h=[];i<n-1;i++)c[i]=e[i+1]-e[i];for(l[0]=0,i=1;i<n-1;i++)l[i]=3/c[i]*(t[i+1]-t[i])-3/c[i-1]*(t[i]-t[i-1]);for(i=1;i<n-1;i++)a[i]=[],s[i]=[],a[i][i-1]=c[i-1],a[i][i]=2*(c[i-1]+c[i]),a[i][i+1]=c[i],s[i][0]=l[i];for(u=Jt(Co(a),s),o=0;o<n-1;o++)f[o]=(t[o+1]-t[o])/c[o]-c[o]*(u[o+1][0]+2*u[o][0])/3,h[o]=(u[o+1][0]-u[o][0])/(3*c[o]);for(o=0;o<n&&!(e[o]>r);o++);return o-=1,t[o]+(r-e[o])*f[o]+ST(r-e[o],2)*u[o]+(r-e[o])*ST(r-e[o],2)*h[o]}function Rxt(){throw new Error("gauss_quadrature not yet implemented")}function Dxt(e){var t=e.length,r=e[0].length,n=0,i,o,a=[],s=[],l=[],u=[],c=[],f=[],h=[],d=[],p=[],v=[];for(n=0;n<t;n++)a[n]=Kr(e[n])/r;for(n=0;n<r;n++)for(h[n]=[],i=0;i<t;i++)h[n][i]=e[i][n]-a[i];for(h=ms(h),n=0;n<t;n++)for(d[n]=[],i=0;i<t;i++)d[n][i]=m1([h[n]],[h[i]])/(r-1);for(l=dU(d),p=l[0],s=l[1],v=ms(p),n=0;n<s.length;n++)for(i=n;i<s.length;i++)s[n]<s[i]&&(o=s[n],s[n]=s[i],s[i]=o,u=v[n],v[n]=v[i],v[i]=u);for(f=ms(h),n=0;n<t;n++)for(c[n]=[],i=0;i<f.length;i++)c[n][i]=m1([v[n]],[f[i]]);return[e,s,v,c]}const Nxt=Object.freeze(Object.defineProperty({__proto__:null,add:on,subtract:iu,divide:wT,multiply:Jt,outer:fxt,dot:m1,pow:ST,exp:hxt,log:dxt,abs:pxt,norm:Qc,angle:vxt,aug:jA,inv:Co,det:gxt,gauss_elimination:mxt,gauss_jordan:cU,triaUpSolve:yxt,triaLowSolve:_xt,lu:bxt,cholesky:wxt,gauss_jacobi:Sxt,gauss_seidel:Txt,SOR:Pxt,householder:Ext,QR:fU,lstsq:hU,jacobi:dU,rungekutta:Cxt,romberg:Mxt,richardson:kxt,simpson:xxt,hermite:Lxt,lagrange:Ixt,cubic_spline:Oxt,gauss_quadrature:Rxt,PCA:Dxt},Symbol.toStringTag,{value:"Module"}));function Fxt(e){var t=e[0].length,r=Ie(t).map(function(n){var i=Ie(t).filter(function(o){return o!==n});return pU(d1(e,n).map(function(o){return o[0]}),d1(e,i))});return r}function pU(e,t){var r=e.length,n=t[0].length-1,i=r-n-1,o=hU(t,e),a=Jt(t,o.map(function(d){return[d]})).map(function(d){return d[0]}),s=iu(e,a),l=ar(e),u=Kr(a.map(function(d){return Math.pow(d-l,2)})),c=Kr(e.map(function(d,p){return Math.pow(d-a[p],2)})),f=u+c,h=u/f;return{exog:t,endog:e,nobs:r,df_model:n,df_resid:i,coef:o,predict:a,resid:s,ybar:l,SST:f,SSE:u,SSR:c,R2:h}}function Bxt(e){var t=Fxt(e.exog),r=Math.sqrt(e.SSR/e.df_resid),n=t.map(function(l){var u=l.SST,c=l.R2;return r/Math.sqrt(u*(1-c))}),i=e.coef.map(function(l,u){return(l-0)/n[u]}),o=i.map(function(l){var u=qo(l,e.df_resid);return(u>.5?1-u:u)*2}),a=g1(.975,e.df_resid),s=e.coef.map(function(l,u){var c=a*n[u];return[l-c,l+c]});return{se:n,t:i,p:o,sigmaHat:r,interval95:s}}function $xt(e){var t=e.R2/e.df_model/((1-e.R2)/e.df_resid),r=function(i,o,a){return p1(i/(a/o+i),o/2,a/2)},n=1-r(t,e.df_model,e.df_resid);return{F_statistic:t,pvalue:n}}function zxt(e,t){var r=pU(e,t),n=Bxt(r),i=$xt(r),o=1-(1-r.R2)*((r.nobs-1)/r.df_resid);return r.t=n,r.f=i,r.adjust_R2=o,r}const Vxt={ols:zxt},Uxt=Object.freeze(Object.defineProperty({__proto__:null,models:Vxt},Symbol.toStringTag,{value:"Module"}));Object.assign(ht,Rkt,n4t,cxt,Nxt,Uxt,T4t);for(const[e,t]of Object.entries(Q5t)){let r=function(...n){return this instanceof r?(this.givenArgs=n,this):new r(...n)};Object.assign(r,t),ht[e]=r,ht.prototype[e]=function(...n){const i=r(...n);return i.data=this,i},r.prototype.sample=function(n){const i=this.givenArgs;return n?ht.alter(n,()=>t.sample(...i)):t.sample(...i)},["pdf","cdf","inv"].forEach(n=>{r.prototype[n]=function(i){return!i&&i!==0&&(i=this.data),typeof i!="number"?ht.map(i,o=>t[n](o,...this.givenArgs)):t[n](i,...this.givenArgs)}}),["mean","median","mode","variance"].forEach(n=>{r.prototype[n]=function(){return t[n](...this.givenArgs)}})}"gammaln gammafn factorial factorialln".split(" ").forEach(function(e){ht.prototype[e]=function(){return ht(ht.map(this,function(t){return ht[e](t)}))}});ht.prototype.randn=function(){return ht(ht.randn.apply(null,arguments))};const WA=zV.isFunction;(function(e){for(var t=0;t<e.length;t++)(function(r){ht.prototype[r]=function(n,i){var o=[],a=0,s=this;if(WA(n)&&(i=n,n=!1),i)return setTimeout(function(){i.call(s,ht.prototype[r].call(s,n))}),this;if(this.length>1){for(s=n===!0?this:this.transpose();a<s.length;a++)o[a]=ht[r](s[a]);return o}return ht[r](this[0],n)}})(e[t])})("cumsum cumprod".split(" "));(function(e){for(var t=0;t<e.length;t++)(function(r){ht.prototype[r]=function(n,i){var o=[],a=0,s=this;if(WA(n)&&(i=n,n=!1),i)return setTimeout(function(){i.call(s,ht.prototype[r].call(s,n))}),this;if(this.length>1){for(r!=="sumrow"&&(s=n===!0?this:this.transpose());a<s.length;a++)o[a]=ht[r](s[a]);return n===!0?ht[r](ht.utils.toVector(o)):o}return ht[r](this[0],n)}})(e[t])})("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" "));(function(e){for(var t=0;t<e.length;t++)(function(r){ht.prototype[r]=function(){var n=[],i=0,o=this,a=Array.prototype.slice.call(arguments),s;if(WA(a[a.length-1])){s=a[a.length-1];var l=a.slice(0,a.length-1);return setTimeout(function(){s.call(o,ht.prototype[r].apply(o,l))}),this}else{s=void 0;var u=function(f){return ht[r].apply(o,[f].concat(a))}}if(this.length>1){for(o=o.transpose();i<o.length;i++)n[i]=u(o[i]);return n}return u(this[0])}})(e[t])})("quantiles percentileOfScore".split(" "));ht.prototype.zscore=function(t,r){return(t-this.mean())/this.stdev(r)};ht.prototype.ztest=function(t,r,n){const i=Math.abs(this.zscore(t,n));return r===1?ht.normal.cdf(-i,0,1):ht.normal.cdf(-i,0,1)*2};ht.prototype.tscore=function(t){return(t-this.mean())/(this.stdev(!0)/Math.sqrt(this.cols()))};ht.prototype.ttest=function(t,r){return r===1?1-ht.studentt.cdf(Math.abs(this.tscore(t)),this.cols()-1):ht.studentt.cdf(-Math.abs(this.tscore(t)),this.cols()-1)*2};ht.prototype.anovafscore=function(){return ht.anovafscore(this.toArray())};ht.prototype.anovaftes=function(){var t=0,r;for(r=0;r<this.length;r++)t=t+this[r].length;return ht.ftest(this.anovafscore(),this.length-1,t-this.length)};ht.prototype.oneSidedDifferenceOfProportions=function(){console.error("Please use jStat.oneSidedDifferenceOfProportions() instead")};ht.prototype.twoSidedDifferenceOfProportions=function(){console.error("Please use jStat.twoSidedDifferenceOfProportions() instead")};"add divide multiply subtract dot pow exp log abs norm angle".split(" ").forEach(e=>{ht.prototype[e]=function(t,r){const n=this;return r?(r.call(n,ht.prototype[e].call(n,t)),this):typeof ht[e](this,t)=="number"?ht[e](this,t):ht(ht[e](this,t))}});ht.jStat=ht;function HA(e,t,r){const n=t;let i=[];for(let o=0;o<=r;o++){const a=ht.binomial.pdf(o,r,e/r)*n;a<.001&&(o<this.stats.min||o>this.stats.max)||i.push([o,a,`${o}: ${a.toFixed(3)} samples`])}return i}function Gxt(e,t){let r={};for(let[o,a]of e)r[o]=a;for(let[o,a]of t)o in r?r[o]+=a:r[o]=a;let n=Object.entries(r).sort((o,a)=>o[0]-a[0]),i=[];for(let[o,a]of n)i.push([o,a,`${o}: ${a.toFixed(3)} samples`]);return i}function XA(e,t,r,n){let i={};return n?i=Wxt(e,t,r):i=jxt(e,t,r),i}function jxt(e,t,r){let i={},o=e.length;for(;o--;){const c=e[o][0],f=e[o][1],h=c in t?t[c]:0;h>=5&&(i[c]={bell:f,hist:h})}if(Object.keys(i).length==0)return console.log("can't compute chiSquared: discarded",i),{chisq:void 0,pval:NaN};let s=0,l=0;for(const[c,{bell:f,hist:h}]of Object.entries(i)){let d=f-h;l+=d*d/f,s++}if(s-1-r<1)return console.log("can't compute pval: bins",s,"variables",r),{chisq:l,pval:NaN};const u=1-ht.chisquare.cdf(l,s-1-r);return{chisq:l,pval:u}}function Wxt(e,t,r){if(this.stats.len<=5)return console.log("can't compute chiSquared: count <",5),{chisq:0,pval:1};let i={},o=0,a=0,s=e.length,l=0;for(;s--;){let h=e[s][0];if(o+=e[s][1],a+=h in t?t[h]:0,a>=5){i[h]={bell:o,hist:a},o=0,a=0,l=h;break}}for(const[h,d]of e){if(h==l)break;o+=d,a+=h in t?t[h]:0,a>=5&&(i[h]={bell:o,hist:a},o=0,a=0)}i[l].bell+=o,i[l].hist+=a;let u=0,c=0;for(const[h,{bell:d,hist:p}]of Object.entries(i)){let v=d-p;c+=v*v/d,u++}if(u-1-r<1)return console.log("can't compute pval: bins",u,"variables",r),{chisq:c,pval:1};const f=1-ht.chisquare.cdf(c,u-1-r);return{chisq:c,pval:f}}Br([hf,hy,R0,D0,vf,pf,gf,N0,vy,py,dy,F0]);const Hxt={data:()=>({selected_np:1,selected_n:10}),props:{stats:Object,histogram:Object},components:{VChart:mf},methods:{formatFixed:Bt,formatKMG:gP,makeBinomBellN:HA,loss:XA,makeModelA(e,t){let r={np:e,n:t};return r.bell=this.makeBinomBellN(e,this.stats.len,t),r.loss=this.loss(r.bell,this.histogram.map,2),r},tuneModelA(e,t){let r=[t];t===void 0&&(r=[10,20,40,110,120,140,150],r=r.filter(i=>i>=e&&i<=this.stats.max*5),r.push(this.stats.max));let n={n:0,loss:{chisq:1/0,pval:0}};return r.forEach(i=>{const o=this.makeModelA(e,i);o.loss.chisq<n.loss.chisq&&(n=o,console.log("new best modelA",n))}),n},applySelectedNP(e){e<0||(e>this.selected_n&&(this.selected_n=Math.ceil(e)),this.selected_np=e)},applySelectedN(e){e<0||(e<this.selected_np&&(this.selected_np=e),this.selected_n=e)}},computed:{modelA(){const e=this.makeModelA(this.selected_np,this.selected_n);return console.log("modelA",e),e},modelASweep(){const e=this.stats.mean,t=this.stats.meanLo,r=this.stats.meanHi,n=this.tuneModelA(e,void 0),i=r-t;let o=10;const a=[.002,.005,.01,.02,.05,.1,.2,.5,1,2,5];for(const c of a)if(Math.floor(i/c)<20){o=c;break}const s=Math.ceil(t/o)*o;let l=n;const u=[];for(let c=s;c<=r;c+=o){let f=this.tuneModelA(c,void 0);c>e&&c<e+o&&u.push([e,n.loss.chisq,n.loss.pval,f.n]),u.push([c,f.loss.chisq,f.loss.pval,f.n]),f.loss.chisq<l.loss.chisq&&(l=f)}return isFinite(l.loss.chisq)&&(this.selected_np=l.np,this.selected_n=l.n),console.log("modelASweep",t,r,o,s,l,u),{result:l,log:u}},makeChartAHist(){return{legend:null,tooltip:{trigger:"axis"},dataset:[{source:this.histogram.arr},{source:this.modelA.bell}],xAxis:{axisLine:{onZero:!1},min:this.stats.min==0?-1:null,max:this.stats.max<3?this.stats.max+1:null},yAxis:{axisLine:{onZero:!1},axisLabel:{formatter:t=>this.formatKMG(t)}},grid:{left:35,top:8,right:10,bottom:20},series:[{type:"bar",name:"observed",encode:{x:0,y:1},tooltip:{valueFormatter:t=>Bt(t,0)}},{type:"line",name:"theoretical",datasetIndex:1,encode:{x:0,y:1},tooltip:{valueFormatter:t=>Bt(t,3)},showSymbol:!1}]}},makeChartASweep(){const e={legend:{},tooltip:{trigger:"axis",formatter:function(t){const r=t[0].data;return`np=${Bt(r[0],2)}<br/>n=${Bt(r[3],2)}<br/>\u03C7\xB2=${r[1].toLocaleString(void 0,{notation:"compact"})}<br/>p-val=${Bt(r[2],2)}<br/>`}},title:{subtext:"",left:"center",textStyle:{fontSize:10}},dataset:[{source:this.modelASweep.log}],xAxis:{min:this.stats.meanLo,max:this.stats.meanHi,name:"np",nameLocation:"center",nameGap:20,axisLine:{onZero:!1},axisLabel:{showMinLabel:!1}},yAxis:[{position:"left",axisLabel:{formatter:t=>this.formatKMG(t)},splitLine:{show:!1}},{position:"right",axisLabel:{formatter:t=>this.formatKMG(t)}}],grid:{left:35,top:30,right:40,bottom:20},series:[{name:"\u03C7\xB2",type:"line",encode:{x:0,y:1},tooltip:{valueFormatter:t=>Bt(t,2)}},{name:"p-val",type:"line",encode:{x:0,y:2},tooltip:{valueFormatter:t=>Bt(t,4)},yAxisIndex:1}]};return console.log("makeChartASweep",e.dataset),e}}},Ls=e=>(cn("data-v-264ed7c0"),e=e(),fn(),e),Xxt=Ls(()=>w("span",{class:"title"},"Model A",-1)),Yxt=Ls(()=>w("span",null,[U(" \u2261 all points were taken from a single distribution with "),w("i",null,"np = M")],-1)),qxt={style:{float:"left"}},Zxt=U(" Sweeping through "),Kxt=Ls(()=>w("i",null,"np",-1)),Jxt={key:0,id:"chartSweep"},Qxt={key:1},tLt={style:{padding:"1em"}},eLt=Ls(()=>w("tr",null,[w("th"),w("th",null,"np"),w("th",null,"n"),w("th",null,"\u03C7\xB2"),w("th",null,"p-val")],-1)),rLt=Ls(()=>w("td",null,"Best fit:",-1)),nLt=Ls(()=>w("td",null,"Manual:",-1)),iLt=U(" np: "),oLt=["value","min","max","step"],aLt=U(" n: "),sLt=["value","min"],lLt=Ls(()=>w("br",null,null,-1)),uLt={id:"chartHisto"},cLt=Ls(()=>w("div",{style:{clear:"both"}},null,-1));function fLt(e,t,r,n,i,o){const a=pe("v-chart");return D(),$(W,null,[Xxt,Yxt,w("div",qxt,[Zxt,Kxt,U(" values in "+L(o.formatFixed(r.stats.mean-1.96*r.stats.meanErr,2))+"\u2026"+L(o.formatFixed(r.stats.mean+1.96*r.stats.meanErr,2))+" range: ",1),o.modelASweep.result.np?(D(),$("div",Jxt,[kt(a,{option:o.makeChartASweep},null,8,["option"])])):(D(),$("div",Qxt," [failed] ")),w("div",tLt,[w("table",null,[eLt,o.modelASweep.result?(D(),$("tr",{key:0,class:Sn({strike:r.stats.aBad})},[rLt,w("td",null,L(o.formatFixed(o.modelASweep.result.np,4)),1),w("td",null,L(o.formatFixed(o.modelASweep.result.n)),1),w("td",null,L(o.formatFixed(o.modelASweep.result.loss.chisq,2)),1),w("td",null,L(o.formatFixed(o.modelASweep.result.loss.pval,4)),1)],2)):pt("",!0),w("tr",null,[nLt,w("td",null,L(o.formatFixed(e.selected_np,4)),1),w("td",null,L(e.selected_n),1),w("td",null,L(o.formatFixed(o.modelA.loss.chisq,2)),1),w("td",null,L(o.formatFixed(o.modelA.loss.pval,4)),1)])]),iLt,w("input",{type:"range",onInput:t[0]||(t[0]=s=>o.applySelectedNP(Number(s.target.value))),value:e.selected_np,min:r.stats.min,max:r.stats.max,step:.01,class:"vmid"},null,40,oLt),aLt,w("input",{type:"range",onInput:t[1]||(t[1]=s=>o.applySelectedN(Number(s.target.value))),value:e.selected_n,min:r.stats.max,max:200,step:1,class:"vmid"},null,40,sLt),lLt])]),w("div",uLt,[o.modelA.bell?(D(),bs(a,{key:0,option:o.makeChartAHist},null,8,["option"])):(D(),$(W,{key:1},[U(" [failed to build the requested distribution np="+L(o.modelA.np)+" n="+L(o.modelA.n)+" ] ",1)],64))]),cLt],64)}const hLt=$e(Hxt,[["render",fLt],["__scopeId","data-v-264ed7c0"]]);/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dLt=typeof Object.defineProperty=="function"?Object.defineProperty:null,pLt=dLt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vLt=pLt;function gLt(){try{return vLt({},"x",{}),!0}catch{return!1}}var mLt=gLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yLt=Object.defineProperty,_Lt=yLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Cf=Object.prototype,GI=Cf.toString,jI=Cf.__defineGetter__,WI=Cf.__defineSetter__,bLt=Cf.__lookupGetter__,wLt=Cf.__lookupSetter__;function SLt(e,t,r){var n,i,o,a;if(typeof e!="object"||e===null||GI.call(e)==="[object Array]")throw new TypeError("invalid argument. First argument must be an object. Value: `"+e+"`.");if(typeof r!="object"||r===null||GI.call(r)==="[object Array]")throw new TypeError("invalid argument. Property descriptor must be an object. Value: `"+r+"`.");if(i="value"in r,i&&(bLt.call(e,t)||wLt.call(e,t)?(n=e.__proto__,e.__proto__=Cf,delete e[t],e[t]=r.value,e.__proto__=n):e[t]=r.value),o="get"in r,a="set"in r,i&&(o||a))throw new Error("invalid argument. Cannot specify one or more accessors and a value or writable attribute in the property descriptor.");return o&&jI&&jI.call(e,t,r.get),a&&WI&&WI.call(e,t,r.set),e}var TLt=SLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PLt=mLt,ELt=_Lt,ALt=TLt,TT;PLt()?TT=ELt:TT=ALt;var vU=TT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var CLt=vU;function MLt(e,t,r){CLt(e,t,{configurable:!1,enumerable:!0,writable:!1,value:r})}var kLt=MLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xLt=kLt,LLt=xLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ILt=vU;function OLt(e,t,r){ILt(e,t,{configurable:!1,enumerable:!1,writable:!1,value:r})}var RLt=OLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var DLt=RLt,dr=DLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NLt=Math.floor,FLt=NLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var BLt=FLt,Cn=BLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $Lt=Cn;function zLt(e){return $Lt(e)===e}var VLt=zLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ULt=VLt,Is=ULt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GLt=4294967295>>>0,jLt=GLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var WLt=Is,HLt=jLt;function XLt(e){return e!=null&&typeof e!="function"&&typeof e.length=="number"&&WLt(e.length)&&e.length>=0&&e.length<=HLt}var YLt=XLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qLt=YLt,ZLt=qLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var KLt=ZLt;function JLt(e){if(typeof e!="function")throw new TypeError("invalid argument. Must provide a function. Value: `"+e+"`.");return t;function t(r){var n,i;if(!KLt(r)||(n=r.length,n===0))return!1;for(i=0;i<n;i++)if(e(r[i])===!1)return!1;return!0}}var QLt=JLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tIt=QLt,eIt=tIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function rIt(e){return typeof e=="number"}var gU=rIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function nIt(){return typeof Symbol=="function"&&typeof Symbol("foo")=="symbol"}var iIt=nIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oIt=iIt,aIt=oIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sIt=aIt,lIt=sIt();function uIt(){return lIt&&typeof Symbol.toStringTag=="symbol"}var cIt=uIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fIt=cIt,$y=fIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hIt=Object.prototype.toString,mU=hIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dIt=mU;function pIt(e){return dIt.call(e)}var vIt=pIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gIt=Object.prototype.hasOwnProperty;function mIt(e,t){return e==null?!1:gIt.call(e,t)}var yIt=mIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _It=yIt,zy=_It;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bIt=typeof Symbol=="function"?Symbol.toStringTag:"",wIt=bIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SIt=zy,Sh=wIt,Lb=mU;function TIt(e){var t,r,n;if(e==null)return Lb.call(e);r=e[Sh],t=SIt(e,Sh);try{e[Sh]=void 0}catch{return Lb.call(e)}return n=Lb.call(e),t?e[Sh]=r:delete e[Sh],n}var PIt=TIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var EIt=$y,AIt=vIt,CIt=PIt,PT;EIt()?PT=CIt:PT=AIt;var zi=PT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var MIt=Number;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kIt=MIt,YA=kIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xIt=YA,LIt=xIt.prototype.toString,IIt=LIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var OIt=IIt;function RIt(e){try{return OIt.call(e),!0}catch{return!1}}var DIt=RIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NIt=$y,FIt=zi,BIt=YA,$It=DIt,zIt=NIt();function VIt(e){return typeof e=="object"?e instanceof BIt?!0:zIt?$It(e):FIt(e)==="[object Number]":!1}var yU=VIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var UIt=gU,GIt=yU;function jIt(e){return UIt(e)||GIt(e)}var WIt=jIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _U=dr,qA=WIt,HIt=gU,XIt=yU;_U(qA,"isPrimitive",HIt);_U(qA,"isObject",XIt);var Mf=qA;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bU=dr,ZA=eIt,KA=Mf,YIt=ZA(KA.isPrimitive),qIt=ZA(KA.isObject),JA=ZA(KA);bU(JA,"primitives",YIt);bU(JA,"objects",qIt);var ZIt=JA;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var KIt=Number.POSITIVE_INFINITY,Ne=KIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var JIt=YA,QIt=JIt.NEGATIVE_INFINITY,Tr=QIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tOt=Ne,eOt=Tr,rOt=Is;function nOt(e){return e<tOt&&e>eOt&&rOt(e)}var wU=nOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iOt=Mf.isPrimitive,oOt=wU;function aOt(e){return iOt(e)&&oOt(e)}var SU=aOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sOt=Mf.isObject,lOt=wU;function uOt(e){return sOt(e)&&lOt(e.valueOf())}var TU=uOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cOt=SU,fOt=TU;function hOt(e){return cOt(e)||fOt(e)}var dOt=hOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PU=dr,QA=dOt,pOt=SU,vOt=TU;PU(QA,"isPrimitive",pOt);PU(QA,"isObject",vOt);var Vy=QA;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gOt=Vy.isPrimitive;function mOt(e){return gOt(e)&&e>=0}var EU=mOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yOt=Vy.isObject;function _Ot(e){return yOt(e)&&e.valueOf()>=0}var AU=_Ot;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bOt=EU,wOt=AU;function SOt(e){return bOt(e)||wOt(e)}var TOt=SOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var CU=dr,tC=TOt,POt=EU,EOt=AU;CU(tC,"isPrimitive",POt);CU(tC,"isObject",EOt);var AOt=tC;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function COt(e){return e!==e}var MOt=COt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kOt=MOt,Zt=kOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function xOt(e,t){var r,n;if(n=e.length,n<2||t===0)return n===0?0:e[0];for(n-=1,r=e[n]*t+e[n-1],n-=2;n>=0;)r=r*t+e[n],n-=1;return r}var MU=xOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var LOt=MU;function IOt(e){var t,r,n,i;if(e.length>500)return o;if(t="return function evalpoly(x){",r=e.length,r===0)t+="return 0.0;";else if(r===1)t+="return "+e[0]+";";else{for(t+="if(x===0.0){return "+e[0]+";}",t+="return "+e[0],n=r-1,i=1;i<r;i++)t+="+x*",i<n&&(t+="("),t+=e[i];for(i=0;i<n-1;i++)t+=")";t+=";"}return t+="}",t+="//# sourceURL=evalpoly.factory.js",new Function(t)();function o(a){return LOt(e,a)}}var OOt=IOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ROt=dr,kU=MU,DOt=OOt;ROt(kU,"factory",DOt);var Os=kU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NOt=zi,FOt=typeof Uint32Array=="function";function BOt(e){return FOt&&e instanceof Uint32Array||NOt(e)==="[object Uint32Array]"}var $Ot=BOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zOt=$Ot,VOt=zOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var UOt=4294967295,GOt=UOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jOt=typeof Uint32Array=="function"?Uint32Array:null,WOt=jOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var HOt=VOt,Ib=GOt,HI=WOt;function XOt(){var e,t;if(typeof HI!="function")return!1;try{t=[1,3.14,-3.14,Ib+1,Ib+2],t=new HI(t),e=HOt(t)&&t[0]===1&&t[1]===3&&t[2]===Ib-2&&t[3]===0&&t[4]===1}catch{e=!1}return e}var YOt=XOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qOt=YOt,ZOt=qOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var KOt=typeof Uint32Array=="function"?Uint32Array:void 0,JOt=KOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function QOt(){throw new Error("not implemented")}var tRt=QOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eRt=ZOt,rRt=JOt,nRt=tRt,ET;eRt()?ET=rRt:ET=nRt;var kf=ET;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iRt=zi,oRt=typeof Float64Array=="function";function aRt(e){return oRt&&e instanceof Float64Array||iRt(e)==="[object Float64Array]"}var sRt=aRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var lRt=sRt,uRt=lRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cRt=typeof Float64Array=="function"?Float64Array:null,fRt=cRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hRt=uRt,XI=fRt;function dRt(){var e,t;if(typeof XI!="function")return!1;try{t=new XI([1,3.14,-3.14,NaN]),e=hRt(t)&&t[0]===1&&t[1]===3.14&&t[2]===-3.14&&t[3]!==t[3]}catch{e=!1}return e}var pRt=dRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vRt=pRt,gRt=vRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mRt=typeof Float64Array=="function"?Float64Array:void 0,yRt=mRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _Rt(){throw new Error("not implemented")}var bRt=_Rt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wRt=gRt,SRt=yRt,TRt=bRt,AT;wRt()?AT=SRt:AT=TRt;var xf=AT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PRt=zi,ERt=typeof Uint8Array=="function";function ARt(e){return ERt&&e instanceof Uint8Array||PRt(e)==="[object Uint8Array]"}var CRt=ARt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var MRt=CRt,kRt=MRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xRt=255,LRt=xRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var IRt=typeof Uint8Array=="function"?Uint8Array:null,ORt=IRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var RRt=kRt,Ob=LRt,YI=ORt;function DRt(){var e,t;if(typeof YI!="function")return!1;try{t=[1,3.14,-3.14,Ob+1,Ob+2],t=new YI(t),e=RRt(t)&&t[0]===1&&t[1]===3&&t[2]===Ob-2&&t[3]===0&&t[4]===1}catch{e=!1}return e}var NRt=DRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var FRt=NRt,BRt=FRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $Rt=typeof Uint8Array=="function"?Uint8Array:void 0,zRt=$Rt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function VRt(){throw new Error("not implemented")}var URt=VRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GRt=BRt,jRt=zRt,WRt=URt,CT;GRt()?CT=jRt:CT=WRt;var HRt=CT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XRt=zi,YRt=typeof Uint16Array=="function";function qRt(e){return YRt&&e instanceof Uint16Array||XRt(e)==="[object Uint16Array]"}var ZRt=qRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var KRt=ZRt,JRt=KRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var QRt=65535,tDt=QRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eDt=typeof Uint16Array=="function"?Uint16Array:null,rDt=eDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nDt=JRt,Rb=tDt,qI=rDt;function iDt(){var e,t;if(typeof qI!="function")return!1;try{t=[1,3.14,-3.14,Rb+1,Rb+2],t=new qI(t),e=nDt(t)&&t[0]===1&&t[1]===3&&t[2]===Rb-2&&t[3]===0&&t[4]===1}catch{e=!1}return e}var oDt=iDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aDt=oDt,sDt=aDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var lDt=typeof Uint16Array=="function"?Uint16Array:void 0,uDt=lDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function cDt(){throw new Error("not implemented")}var fDt=cDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hDt=sDt,dDt=uDt,pDt=fDt,MT;hDt()?MT=dDt:MT=pDt;var vDt=MT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gDt=HRt,mDt=vDt,yDt={uint16:mDt,uint8:gDt},_Dt=yDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZI=_Dt,xU;function bDt(){var e,t;return e=new ZI.uint16(1),e[0]=4660,t=new ZI.uint8(e.buffer),t[0]===52}xU=bDt();var wDt=xU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SDt=wDt,Lf=SDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var TDt=Lf,kT;TDt===!0?kT=1:kT=0;var PDt=kT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var EDt=kf,ADt=xf,CDt=PDt,LU=new ADt(1),MDt=new EDt(LU.buffer);function kDt(e){return LU[0]=e,MDt[CDt]}var xDt=kDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var LDt=xDt,ri=LDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var IDt=Lf,xT;IDt===!0?xT=1:xT=0;var ODt=xT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var RDt=kf,DDt=xf,NDt=ODt,LT=new DDt(1),FDt=new RDt(LT.buffer);function BDt(e,t){return LT[0]=e,FDt[NDt]=t>>>0,LT[0]}var $Dt=BDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zDt=$Dt,K0=zDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var VDt=1023,_u=VDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var UDt=.34657359027997264,GDt=UDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jDt(e){return e===0?-.03333333333333313:-.03333333333333313+e*(.0015873015872548146+e*(-793650757867488e-19+e*(4008217827329362e-21+e*-20109921818362437e-23)))}var WDt=jDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FDLIBM]{@link http://www.netlib.org/fdlibm/s_expm1.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var HDt=Zt,Db=ri,Dv=K0,KI=Ne,XDt=Tr,YDt=_u,qDt=GDt,ZDt=WDt,KDt=709.782712893384,Nb=.6931471803691238,Fb=19082149292705877e-26,JI=1.4426950408889634,JDt=38.816242111356935,QDt=1.0397207708399179;function t8t(e){var t,r,n,i,o,a,s,l,u,c,f,h;if(e===KI||HDt(e))return e;if(e===XDt)return-1;if(e===0)return e;if(e<0?(r=!0,s=-e):(r=!1,s=e),s>=JDt){if(r)return-1;if(s>=KDt)return KI}if(o=Db(s)|0,s>qDt)s<QDt?r?(n=e+Nb,i=-Fb,h=-1):(n=e-Nb,i=Fb,h=1):(r?h=JI*e-.5:h=JI*e+.5,h|=0,c=h,n=e-c*Nb,i=c*Fb),e=n-i,u=n-e-i;else{if(o<1016070144)return e;h=0}return t=.5*e,l=e*t,a=1+l*ZDt(l),c=3-a*t,f=l*((a-c)/(6-e*c)),h===0?e-(e*f-l):(f=e*(f-u)-u,f-=l,h===-1?.5*(e-f)-.5:h===1?e<-.25?-2*(f-(e+.5)):1+2*(e-f):h<=-2||h>56?(s=1-(f-e),n=Db(s)+(h<<20)|0,s=Dv(s,n),s-1):(c=1,h<20?(n=1072693248-(2097152>>h)|0,c=Dv(c,n),s=c-(f-e)):(n=YDt-h<<20|0,c=Dv(c,n),s=e-(f+c),s+=1),n=Db(s)+(h<<20)|0,Dv(s,n)))}var e8t=t8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var r8t=e8t,If=r8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function n8t(e){return e===0?.6666666666666735:.6666666666666735+e*(.3999999999940942+e*(.2857142874366239+e*(.22222198432149784+e*(.1818357216161805+e*(.15313837699209373+e*.14798198605116586)))))}var i8t=n8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FDLIBM]{@link http://www.netlib.org/fdlibm/s_log1p.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var o8t=Zt,QI=ri,tO=K0,a8t=Ne,s8t=Tr,eO=_u,l8t=i8t,Bb=.6931471803691238,$b=19082149292705877e-26,u8t=.41421356237309503,c8t=-.2928932188134525,f8t=1862645149230957e-24,h8t=5551115123125783e-32,d8t=9007199254740992,p8t=.6666666666666666;function v8t(e){var t,r,n,i,o,a,s,l,u,c;if(e<-1||o8t(e))return NaN;if(e===-1)return s8t;if(e===a8t||e===0)return e;if(e<0?n=-e:n=e,c=1,n<u8t){if(n<f8t)return n<h8t?e:e-e*e*.5;e>c8t&&(c=0,i=e,r=1)}return c!==0&&(n<d8t?(u=1+e,r=QI(u),c=(r>>20)-eO,c>0?o=1-(u-e):o=e-(u-1),o/=u):(u=e,r=QI(u),c=(r>>20)-eO,o=0),r&=1048575,r<434334?u=tO(u,r|1072693248):(c+=1,u=tO(u,r|1071644672),r=1048576-r>>2),i=u-1),t=.5*i*i,r===0?i===0?(o+=c*$b,c*Bb+o):(l=t*(1-p8t*i),c*Bb-(l-(c*$b+o)-i)):(a=i/(2+i),s=a*a,l=s*l8t(s),c===0?i-(t-a*(t+l)):c*Bb-(t-(a*(t+l)+(c*$b+o))-i))}var g8t=v8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var m8t=g8t,Mn=m8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var y8t=Math.sqrt,_8t=y8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var b8t=_8t,tr=b8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var w8t=.7853981633974483,IU=w8t;/**
* @license Apache-2.0
*
* Copyright (c) 2020 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function S8t(e){var t,r,n;return e===0?.16666666666666713:(e<0?t=-e:t=e,t<=1?(r=-8.198089802484825+e*(19.562619833175948+e*(-16.262479672107002+e*(5.444622390564711+e*(-.6019598008014124+e*.004253011369004428)))),n=-49.18853881490881+e*(139.51056146574857+e*(-147.1791292232726+e*(70.49610280856842+e*(-14.740913729888538+e*1))))):(e=1/e,r=.004253011369004428+e*(-.6019598008014124+e*(5.444622390564711+e*(-16.262479672107002+e*(19.562619833175948+e*-8.198089802484825)))),n=1+e*(-14.740913729888538+e*(70.49610280856842+e*(-147.1791292232726+e*(139.51056146574857+e*-49.18853881490881))))),r/n)}var T8t=S8t;/**
* @license Apache-2.0
*
* Copyright (c) 2020 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function P8t(e){var t,r,n;return e===0?.08333333333333809:(e<0?t=-e:t=e,t<=1?(r=28.536655482610616+e*(-25.56901049652825+e*(6.968710824104713+e*(-.5634242780008963+e*.002967721961301243))),n=342.43986579130785+e*(-383.8770957603691+e*(147.0656354026815+e*(-21.947795316429207+e*1)))):(e=1/e,r=.002967721961301243+e*(-.5634242780008963+e*(6.968710824104713+e*(-25.56901049652825+e*28.536655482610616))),n=1+e*(-21.947795316429207+e*(147.0656354026815+e*(-383.8770957603691+e*342.43986579130785)))),r/n)}var E8t=P8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, long comment, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1995, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var A8t=Zt,C8t=tr,rO=IU,M8t=T8t,k8t=E8t,x8t=6123233995736766e-32;function L8t(e){var t,r,n,i,o;if(A8t(e))return NaN;if(e>0?n=e:(t=!0,n=-e),n>1)return NaN;if(n>.625)r=1-n,i=r*k8t(r),r=C8t(r+r),o=rO-r,r=r*i-x8t,o-=r,o+=rO;else{if(n<1e-8)return e;r=n*n,o=r*M8t(r),o=n*o+n}return t?-o:o}var I8t=L8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var O8t=I8t,eC=O8t;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function R8t(e){return Math.abs(e)}var D8t=R8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var N8t=D8t,de=N8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var F8t=Math.ceil,B8t=F8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $8t=B8t,OU=$8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var z8t=Cn,V8t=OU;function U8t(e){return e<0?V8t(e):z8t(e)}var G8t=U8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var j8t=G8t,rC=j8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var W8t=1023,H8t=W8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var X8t=-1023,Y8t=X8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var q8t=-1074,Z8t=q8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var K8t=Ne,J8t=Tr;function Q8t(e){return e===K8t||e===J8t}var t7t=Q8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e7t=t7t,Of=e7t;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var r7t=2147483648>>>0,n7t=r7t;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var i7t=2147483647>>>0,Uy=i7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var o7t=Lf,RU,IT,OT;o7t===!0?(IT=1,OT=0):(IT=0,OT=1);RU={HIGH:IT,LOW:OT};var a7t=RU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var s7t=kf,l7t=xf,DU=a7t,NU=new l7t(1),nO=new s7t(NU.buffer),u7t=DU.HIGH,c7t=DU.LOW;function f7t(e,t,r,n){return NU[0]=e,t[n]=nO[u7t],t[n+r]=nO[c7t],t}var FU=f7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var h7t=FU;function d7t(e){return h7t(e,[0>>>0,0>>>0],1,0)}var p7t=d7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var v7t=dr,BU=p7t,g7t=FU;v7t(BU,"assign",g7t);var nC=BU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var m7t=Lf,$U,RT,DT;m7t===!0?(RT=1,DT=0):(RT=0,DT=1);$U={HIGH:RT,LOW:DT};var y7t=$U;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _7t=kf,b7t=xf,zU=y7t,VU=new b7t(1),iO=new _7t(VU.buffer),w7t=zU.HIGH,S7t=zU.LOW;function T7t(e,t){return iO[w7t]=e,iO[S7t]=t,VU[0]}var P7t=T7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var E7t=P7t,iC=E7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var A7t=n7t,C7t=Uy,M7t=nC,k7t=ri,x7t=iC,zb=[0,0];function L7t(e,t){var r,n;return M7t.assign(e,zb,1,0),r=zb[0],r&=C7t,n=k7t(t),n&=A7t,r|=n,x7t(r,zb[1])}var I7t=L7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var O7t=I7t,oC=O7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var R7t=22250738585072014e-324,bu=R7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var D7t=bu,N7t=Of,F7t=Zt,B7t=de,$7t=4503599627370496;function z7t(e,t,r,n){return F7t(e)||N7t(e)?(t[n]=e,t[n+r]=0,t):e!==0&&B7t(e)<D7t?(t[n]=e*$7t,t[n+r]=-52,t):(t[n]=e,t[n+r]=0,t)}var UU=z7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var V7t=UU;function U7t(e){return V7t(e,[0,0],1,0)}var G7t=U7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var j7t=dr,GU=G7t,W7t=UU;j7t(GU,"assign",W7t);var H7t=GU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var X7t=2146435072,Y7t=X7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var q7t=ri,Z7t=Y7t,K7t=_u;function J7t(e){var t=q7t(e);return t=(t&Z7t)>>>20,t-K7t|0}var Q7t=J7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var t9t=Q7t,e9t=t9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var r9t=Ne,n9t=Tr,i9t=_u,o9t=H8t,a9t=Y8t,s9t=Z8t,l9t=Zt,u9t=Of,c9t=oC,f9t=H7t.assign,h9t=e9t,d9t=nC,p9t=iC,v9t=2220446049250313e-31,g9t=2148532223>>>0,Vb=[0,0],Ub=[0,0];function m9t(e,t){var r,n;return t===0||e===0||l9t(e)||u9t(e)?e:(f9t(e,Vb,1,0),e=Vb[0],t+=Vb[1],t+=h9t(e),t<s9t?c9t(0,e):t>o9t?e<0?n9t:r9t:(t<=a9t?(t+=52,n=v9t):n=1,d9t.assign(e,Ub,1,0),r=Ub[0],r&=g9t,r|=t+i9t<<20,n*p9t(r,Ub[1])))}var y9t=m9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _9t=y9t,Rf=_9t;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function b9t(e){return e===0?.16666666666666602:.16666666666666602+e*(-.0027777777777015593+e*(6613756321437934e-20+e*(-16533902205465252e-22+e*41381367970572385e-24)))}var w9t=b9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_exp.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var S9t=Rf,T9t=w9t;function P9t(e,t,r){var n,i,o,a;return n=e-t,i=n*n,o=n-i*T9t(i),a=1-(t-n*o/(2-o)-e),S9t(a,r)}var E9t=P9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_exp.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var A9t=Zt,oO=rC,C9t=Tr,aO=Ne,M9t=E9t,k9t=.6931471803691238,x9t=19082149292705877e-26,sO=1.4426950408889634,L9t=709.782712893384,I9t=-745.1332191019411,jU=1/(1<<28),O9t=-jU;function R9t(e){var t,r,n;return A9t(e)||e===aO?e:e===C9t?0:e>L9t?aO:e<I9t?0:e>O9t&&e<jU?1+e:(e<0?n=oO(sO*e-.5):n=oO(sO*e+.5),t=e-n*k9t,r=n*x9t,M9t(t,r,n))}var D9t=R9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var N9t=D9t,Ve=N9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var F9t=Is;function B9t(e){return F9t(e/2)}var $9t=B9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var z9t=$9t,V9t=z9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var lO=V9t;function U9t(e){return e>0?lO(e-1):lO(e+1)}var G9t=U9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var j9t=G9t,aC=j9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var W9t=Lf,NT;W9t===!0?NT=0:NT=1;var H9t=NT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var X9t=kf,Y9t=xf,q9t=H9t,FT=new Y9t(1),Z9t=new X9t(FT.buffer);function K9t(e,t){return FT[0]=e,Z9t[q9t]=t>>>0,FT[0]}var J9t=K9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Q9t=J9t,J0=Q9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tNt(e){return e|0}var eNt=tNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rNt=eNt,WU=rNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var uO=aC,nNt=oC,iNt=Tr,Nv=Ne;function oNt(e,t){return t===iNt?Nv:t===Nv?0:t>0?uO(t)?e:0:uO(t)?nNt(Nv,e):Nv}var aNt=oNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var sNt=Uy,lNt=ri,uNt=1072693247,Fv=1e300,Bv=1e-300;function cNt(e,t){var r,n;return n=lNt(e),r=n&sNt,r<=uNt?t<0?Fv*Fv:Bv*Bv:t>0?Fv*Fv:Bv*Bv}var fNt=cNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hNt=de,cO=Ne;function dNt(e,t){return e===-1?(e-e)/(e-e):e===1?1:hNt(e)<1==(t===cO)?0:cO}var pNt=dNt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function vNt(e){return e===0?.5999999999999946:.5999999999999946+e*(.4285714285785502+e*(.33333332981837743+e*(.272728123808534+e*(.23066074577556175+e*.20697501780033842))))}var gNt=vNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var mNt=ri,$v=J0,fO=K0,yNt=_u,_Nt=gNt,bNt=1048575,hO=1048576,wNt=1072693248,SNt=536870912,TNt=524288,PNt=20,ENt=9007199254740992,ANt=.9617966939259756,CNt=.9617967009544373,MNt=-7028461650952758e-24,kNt=[1,1.5],xNt=[0,.5849624872207642],LNt=[0,1350039202129749e-23];function INt(e,t,r){var n,i,o,a,s,l,u,c,f,h,d,p,v,g,m,y,_,b,T,S,P,C;return S=0,r<hO&&(t*=ENt,S-=53,r=mNt(t)),S+=(r>>PNt)-yNt|0,P=r&bNt|0,r=P|wNt|0,P<=235662?C=0:P<767610?C=1:(C=0,S+=1,r-=hO),t=fO(t,r),c=kNt[C],b=t-c,T=1/(t+c),i=b*T,a=$v(i,0),n=(r>>1|SNt)+TNt,n+=C<<18,l=fO(0,n),u=t-(l-c),s=T*(b-a*l-a*u),o=i*i,_=o*o*_Nt(o),_+=s*(a+i),o=a*a,l=3+o+_,l=$v(l,0),u=_-(l-3-o),b=a*l,T=s*l+u*i,h=b+T,h=$v(h,0),d=T-(h-b),p=CNt*h,v=MNt*h+d*ANt+LNt[C],f=xNt[C],y=S,g=p+v+f+y,g=$v(g,0),m=v-(g-y-f-p),e[0]=g,e[1]=m,e}var ONt=INt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function RNt(e){return e===0?.5:.5+e*(-.3333333333333333+e*.25)}var DNt=RNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var NNt=J0,FNt=DNt,BNt=1.4426950408889634,$Nt=1.4426950216293335,zNt=19259629911266175e-24;function VNt(e,t){var r,n,i,o,a,s;return i=t-1,o=i*i*FNt(i),a=$Nt*i,s=i*zNt-o*BNt,n=a+s,n=NNt(n,0),r=s-(n-a),e[0]=n,e[1]=r,e}var UNt=VNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GNt=.6931471805599453,jNt=GNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var WNt=1048575,HNt=WNt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function XNt(e){return e===0?.16666666666666602:.16666666666666602+e*(-.0027777777777015593+e*(6613756321437934e-20+e*(-16533902205465252e-22+e*41381367970572385e-24)))}var YNt=XNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var qNt=ri,dO=K0,ZNt=J0,KNt=WU,JNt=Rf,QNt=jNt,pO=_u,vO=Uy,gO=HNt,tFt=YNt,mO=1048576,eFt=1071644672,Th=20,rFt=.6931471824645996,nFt=-1904654299957768e-24;function iFt(e,t,r){var n,i,o,a,s,l,u,c,f,h,d;return h=e&vO|0,d=(h>>Th)-pO|0,f=0,h>eFt&&(f=e+(mO>>d+1)>>>0,d=((f&vO)>>Th)-pO|0,n=(f&~(gO>>d))>>>0,o=dO(0,n),f=(f&gO|mO)>>Th-d>>>0,e<0&&(f=-f),t-=o),o=r+t,o=ZNt(o,0),s=o*rFt,l=(r-(o-t))*QNt+o*nFt,c=s+l,u=l-(c-s),o=c*c,i=c-o*tFt(o),a=c*i/(i-2)-(u+c*u),c=1-(a-c),e=qNt(c),e=KNt(e),e+=f<<Th>>>0,e>>Th<=0?c=JNt(c,f):c=dO(c,e),c}var oFt=iFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var yO=Zt,_O=aC,bO=Of,aFt=Is,wO=tr,sFt=de,Gb=nC,lFt=J0,SO=WU,uFt=Tr,cFt=Ne,jb=Uy,fFt=aNt,hFt=fNt,dFt=pNt,pFt=ONt,vFt=UNt,gFt=oFt,mFt=1072693247,yFt=1105199104,_Ft=1139802112,TO=1083179008,bFt=1072693248,wFt=1083231232,SFt=3230714880>>>0,PO=31,Ua=1e300,Ga=1e-300,TFt=8008566259537294e-32,Vo=[0,0],EO=[0,0];function HU(e,t){var r,n,i,o,a,s,l,u,c,f,h,d,p,v,g,m;if(yO(e)||yO(t))return NaN;if(Gb.assign(t,Vo,1,0),s=Vo[0],l=Vo[1],l===0){if(t===0)return 1;if(t===1)return e;if(t===-1)return 1/e;if(t===.5)return wO(e);if(t===-.5)return 1/wO(e);if(t===2)return e*e;if(t===3)return e*e*e;if(t===4)return e*=e,e*e;if(bO(t))return dFt(e,t)}if(Gb.assign(e,Vo,1,0),o=Vo[0],a=Vo[1],a===0){if(o===0)return fFt(e,t);if(e===1)return 1;if(e===-1&&_O(t))return-1;if(bO(e))return e===uFt?HU(-0,-t):t<0?0:cFt}if(e<0&&aFt(t)===!1)return(e-e)/(e-e);if(i=sFt(e),r=o&jb|0,n=s&jb|0,u=o>>>PO|0,c=s>>>PO|0,u&&_O(t)?u=-1:u=1,n>yFt){if(n>_Ft)return hFt(e,t);if(r<mFt)return c===1?u*Ua*Ua:u*Ga*Ga;if(r>bFt)return c===0?u*Ua*Ua:u*Ga*Ga;p=vFt(EO,i)}else p=pFt(EO,i,r);if(f=lFt(t,0),d=(t-f)*p[0]+t*p[1],h=f*p[0],v=d+h,Gb.assign(v,Vo,1,0),g=SO(Vo[0]),m=SO(Vo[1]),g>=TO){if((g-TO|m)!==0||d+TFt>v-h)return u*Ua*Ua}else if((g&jb)>=wFt&&((g-SFt|m)!==0||d<=v-h))return u*Ga*Ga;return v=gFt(g,h,d),u*v}var PFt=HU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var EFt=PFt,er=EFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var AFt=2.718281828459045,Df=AFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var CFt=2220446049250313e-31,Ta=CFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function MFt(e){var t,r,n;return e===0?1/0:(e<0?t=-e:t=e,t<=1?(r=709811.662581658+e*(679979.8474157227+e*(293136.7857211597+e*(74887.54032914672+e*(12555.290582413863+e*(1443.4299244417066+e*(115.24194596137347+e*(6.309239205732627+e*(.22668404630224365+e*(.004826466289237662+e*4624429436045379e-20))))))))),n=0+e*(362880+e*(1026576+e*(1172700+e*(723680+e*(269325+e*(63273+e*(9450+e*(870+e*(45+e*1)))))))))):(e=1/e,r=4624429436045379e-20+e*(.004826466289237662+e*(.22668404630224365+e*(6.309239205732627+e*(115.24194596137347+e*(1443.4299244417066+e*(12555.290582413863+e*(74887.54032914672+e*(293136.7857211597+e*(679979.8474157227+e*709811.662581658))))))))),n=1+e*(45+e*(870+e*(9450+e*(63273+e*(269325+e*(723680+e*(1172700+e*(1026576+e*(362880+e*0)))))))))),r/n)}var kFt=MFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var AO=Zt,xFt=Mn,LFt=tr,IFt=de,OFt=Ve,Wb=er,RFt=Df,Hb=Ta,Xb=kFt,Yb=10.900511;function DFt(e,t){var r,n,i,o,a,s,l;return AO(e)||AO(t)?NaN:e<0||t<0?NaN:t===1?1/e:e===1?1/t:(l=e+t,l<Hb?(a=l/e,a/=t,a):l===e&&t<Hb?1/t:l===t&&e<Hb?1/e:(e<t&&(s=t,t=e,e=s),n=e+Yb-.5,i=t+Yb-.5,o=l+Yb-.5,a=Xb(e)*(Xb(t)/Xb(l)),r=e-.5-t,IFt(t*r)<o*100&&e>100?a*=OFt(r*xFt(-t/o)):a*=Wb(n/o,r),o>1e10?a*=Wb(n/o*(i/o),t):a*=Wb(n*i/(o*o),t),a*=LFt(RFt/i),a))}var NFt=DFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var FFt=NFt,XU=FFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var BFt=Ne;function $Ft(e){return e===0&&1/e===BFt}var zFt=$Ft;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var VFt=zFt,UFt=VFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var CO=UFt,qb=Zt,GFt=Tr,zv=Ne;function jFt(e,t){var r,n,i,o;if(r=arguments.length,r===2)return qb(e)||qb(t)?NaN:e===zv||t===zv?zv:e===t&&e===0?CO(e)?e:t:e>t?e:t;for(n=GFt,o=0;o<r;o++){if(i=arguments[o],qb(i)||i===zv)return i;(i>n||i===n&&i===0&&CO(i))&&(n=i)}return n}var WFt=jFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var HFt=WFt,wu=HFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XFt=Tr;function YFt(e){return e===0&&1/e===XFt}var qFt=YFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZFt=qFt,YU=ZFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var MO=YU,Zb=Zt,Vv=Tr,KFt=Ne;function JFt(e,t){var r,n,i,o;if(r=arguments.length,r===2)return Zb(e)||Zb(t)?NaN:e===Vv||t===Vv?Vv:e===t&&e===0?MO(e)?e:t:e<t?e:t;for(n=KFt,o=0;o<r;o++){if(i=arguments[o],Zb(i)||i===Vv)return i;(i<n||i===n&&i===0&&MO(i))&&(n=i)}return n}var QFt=JFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tBt=QFt,Rs=tBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eBt=17976931348623157e292,Nf=eBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rBt=2147483647,nBt=rBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iBt=1.5707963267948966,sC=iBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oBt=3.141592653589793,Ds=oBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function aBt(e){return e===0?.0416666666666666:.0416666666666666+e*(-.001388888888887411+e*2480158728947673e-20)}var sBt=aBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function lBt(e){return e===0?-27557314351390663e-23:-27557314351390663e-23+e*(2087572321298175e-24+e*-11359647557788195e-27)}var uBt=lBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_cos.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var cBt=sBt,fBt=uBt;function hBt(e,t){var r,n,i,o;return o=e*e,i=o*o,n=o*cBt(o),n+=i*i*fBt(o),r=.5*o,i=1-r,i+(1-i-r+(o*n-e*t))}var dBt=hBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pBt=dBt,qU=pBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_sin.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var kO=-.16666666666666632,vBt=.00833333333332249,gBt=-.0001984126982985795,mBt=27557313707070068e-22,yBt=-25050760253406863e-24,_Bt=158969099521155e-24;function bBt(e,t){var r,n,i,o;return o=e*e,i=o*o,r=vBt+o*(gBt+o*mBt)+o*i*(yBt+o*_Bt),n=o*e,t===0?e+n*(kO+o*r):e-(o*(.5*t-n*r)-t-n*kO)}var wBt=bBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SBt=wBt,ZU=SBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var TBt=Lf,BT;TBt===!0?BT=0:BT=1;var PBt=BT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var EBt=kf,ABt=xf,CBt=PBt,KU=new ABt(1),MBt=new EBt(KU.buffer);function kBt(e){return KU[0]=e,MBt[CBt]}var xBt=kBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var LBt=xBt,IBt=LBt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function OBt(e,t){var r,n;for(r=[],n=0;n<t;n++)r.push(e);return r}var RBt=OBt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var DBt=RBt,NBt=DBt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var FBt=NBt;function BBt(e){return FBt(0,e)}var $Bt=BBt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zBt=$Bt,VBt=zBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_rem_pio2.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var UBt=Cn,Uv=Rf,Gy=VBt,JU=[10680707,7228996,1387004,2578385,16069853,12639074,9804092,4427841,16666979,11263675,12935607,2387514,4345298,14681673,3074569,13734428,16653803,1880361,10960616,8533493,3062596,8710556,7349940,6258241,3772886,3769171,3798172,8675211,12450088,3874808,9961438,366607,15675153,9132554,7151469,3571407,2607881,12013382,4155038,6285869,7677882,13102053,15825725,473591,9065106,15363067,6271263,9264392,5636912,4652155,7056368,13614112,10155062,1944035,9527646,15080200,6658437,6231200,6832269,16767104,5075751,3212806,1398474,7579849,6349435,12618859],GBt=[1.570796251296997,7549789415861596e-23,5390302529957765e-30,3282003415807913e-37,1270655753080676e-44,12293330898111133e-52,27337005381646456e-60,21674168387780482e-67],Kb=16777216,Jb=5960464477539063e-23,Gv=Gy(20),xO=Gy(20),jv=Gy(20),gr=Gy(20);function QU(e,t,r,n,i,o,a,s,l){var u,c,f,h,d,p,v,g,m;for(h=o,m=n[r],g=r,d=0;g>0;d++)c=Jb*m|0,gr[d]=m-Kb*c|0,m=n[g-1]+c,g-=1;if(m=Uv(m,i),m-=8*UBt(m*.125),v=m|0,m-=v,f=0,i>0?(d=gr[r-1]>>24-i,v+=d,gr[r-1]-=d<<24-i,f=gr[r-1]>>23-i):i===0?f=gr[r-1]>>23:m>=.5&&(f=2),f>0){for(v+=1,u=0,d=0;d<r;d++)g=gr[d],u===0?g!==0&&(u=1,gr[d]=16777216-g):gr[d]=16777215-g;if(i>0)switch(i){case 1:gr[r-1]&=8388607;break;case 2:gr[r-1]&=4194303;break}f===2&&(m=1-m,u!==0&&(m-=Uv(1,i)))}if(m===0){for(g=0,d=r-1;d>=o;d--)g|=gr[d];if(g===0){for(p=1;gr[o-p]===0;p++);for(d=r+1;d<=r+p;d++){for(l[s+d]=JU[a+d],c=0,g=0;g<=s;g++)c+=e[g]*l[s+(d-g)];n[d]=c}return r+=p,QU(e,t,r,n,i,o,a,s,l)}}if(m===0)for(r-=1,i-=24;gr[r]===0;)r-=1,i-=24;else m=Uv(m,-i),m>=Kb?(c=Jb*m|0,gr[r]=m-Kb*c|0,r+=1,i+=24,gr[r]=c):gr[r]=m|0;for(c=Uv(1,i),d=r;d>=0;d--)n[d]=c*gr[d],c*=Jb;for(d=r;d>=0;d--){for(c=0,p=0;p<=h&&p<=r-d;p++)c+=GBt[p]*n[d+p];jv[r-d]=c}for(c=0,d=r;d>=0;d--)c+=jv[d];for(f===0?t[0]=c:t[0]=-c,c=jv[0]-c,d=1;d<=r;d++)c+=jv[d];return f===0?t[1]=c:t[1]=-c,v&7}function jBt(e,t,r,n){var i,o,a,s,l,u,c,f,h;for(o=4,s=n-1,a=(r-3)/24|0,a<0&&(a=0),u=r-24*(a+1),f=a-s,h=s+o,c=0;c<=h;c++)f<0?Gv[c]=0:Gv[c]=JU[f],f+=1;for(c=0;c<=o;c++){for(i=0,f=0;f<=s;f++)i+=e[f]*Gv[s+(c-f)];xO[c]=i}return l=o,QU(e,t,l,xO,u,o,a,s,Gv)}var WBt=jBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var HBt=Math.round,XBt=HBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var YBt=XBt,jy=YBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_rem_pio2.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var qBt=jy,LO=ri,ZBt=.6366197723675814,KBt=1.5707963267341256,JBt=6077100506506192e-26,QBt=6077100506303966e-26,t$t=20222662487959506e-37,e$t=20222662487111665e-37,r$t=84784276603689e-45,IO=2047;function n$t(e,t,r){var n,i,o,a,s,l,u;return i=qBt(e*ZBt),a=e-i*KBt,s=i*JBt,u=t>>20|0,r[0]=a-s,n=LO(r[0]),l=u-(n>>20&IO),l>16&&(o=a,s=i*QBt,a=o-s,s=i*t$t-(o-a-s),r[0]=a-s,n=LO(r[0]),l=u-(n>>20&IO),l>49&&(o=a,s=i*e$t,a=o-s,s=i*r$t-(o-a-s),r[0]=a-s)),r[1]=a-r[0]-s,i}var i$t=n$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_rem_pio2.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
*
* Optimized by Bruce D. Evans.
* ```
*/var o$t=ri,a$t=IBt,s$t=iC,l$t=WBt,Wv=i$t,u$t=0,c$t=16777216,ja=1.5707963267341256,xl=6077100506506192e-26,Hv=2*xl,Xv=3*xl,Yv=4*xl,f$t=2147483647,h$t=2146435072,d$t=1048575,p$t=598523,v$t=1072243195,g$t=1073928572,m$t=1074752122,y$t=1074977148,_$t=1075183036,b$t=1075388923,w$t=1075594811,S$t=1094263291,Ph=[0,0,0],Eh=[0,0];function T$t(e,t){var r,n,i,o,a,s,l,u;if(i=o$t(e),o=i&f$t|0,o<=v$t)return t[0]=e,t[1]=0,0;if(o<=m$t)return(o&d$t)===p$t?Wv(e,o,t):o<=g$t?e>0?(u=e-ja,t[0]=u-xl,t[1]=u-t[0]-xl,1):(u=e+ja,t[0]=u+xl,t[1]=u-t[0]+xl,-1):e>0?(u=e-2*ja,t[0]=u-Hv,t[1]=u-t[0]-Hv,2):(u=e+2*ja,t[0]=u+Hv,t[1]=u-t[0]+Hv,-2);if(o<=w$t)return o<=_$t?o===y$t?Wv(e,o,t):e>0?(u=e-3*ja,t[0]=u-Xv,t[1]=u-t[0]-Xv,3):(u=e+3*ja,t[0]=u+Xv,t[1]=u-t[0]+Xv,-3):o===b$t?Wv(e,o,t):e>0?(u=e-4*ja,t[0]=u-Yv,t[1]=u-t[0]-Yv,4):(u=e+4*ja,t[0]=u+Yv,t[1]=u-t[0]+Yv,-4);if(o<S$t)return Wv(e,o,t);if(o>=h$t)return t[0]=NaN,t[1]=NaN,0;for(r=a$t(e),n=(o>>20)-1046,u=s$t(o-(n<<20|0),r),s=0;s<2;s++)Ph[s]=u|0,u=(u-Ph[s])*c$t;for(Ph[2]=u,a=3;Ph[a-1]===u$t;)a-=1;return l=l$t(Ph,Eh,n,a),e<0?(t[0]=-Eh[0],t[1]=-Eh[1],-l):(t[0]=Eh[0],t[1]=Eh[1],l)}var P$t=T$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var E$t=P$t,tG=E$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_sin.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var A$t=ri,OO=qU,Qb=ZU,C$t=tG,M$t=2147483647,k$t=2146435072,x$t=1072243195,L$t=1045430272,Uo=[0,0];function I$t(e){var t,r;if(t=A$t(e),t&=M$t,t<=x$t)return t<L$t?e:Qb(e,0);if(t>=k$t)return NaN;switch(r=C$t(e,Uo),r&3){case 0:return Qb(Uo[0],Uo[1]);case 1:return OO(Uo[0],Uo[1]);case 2:return-Qb(Uo[0],Uo[1]);default:return-OO(Uo[0],Uo[1])}}var O$t=I$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var R$t=O$t,Q0=R$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var D$t=2.5066282746310007,Wy=D$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function N$t(e){return e===0?.08333333333334822:.08333333333334822+e*(.0034722222160545866+e*(-.0026813261780578124+e*(-.00022954996161337813+e*.0007873113957930937)))}var F$t=N$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var B$t=Wy,RO=er,$$t=Ve,z$t=F$t,V$t=143.01608;function U$t(e){var t,r,n;return t=1/e,t=1+t*z$t(t),r=$$t(e),e>V$t?(n=RO(e,.5*e-.25),r=n*(n/r)):r=RO(e,e-.5)/r,B$t*r*t}var G$t=U$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var j$t=.5772156649015329,W$t=j$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var H$t=W$t;function X$t(e,t){return t/((1+H$t*e)*e)}var Y$t=X$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function q$t(e){var t,r,n;return e===0?1:(e<0?t=-e:t=e,t<=1?(r=1+e*(.4942148268014971+e*(.20744822764843598+e*(.04763678004571372+e*(.010421379756176158+e*(.0011913514700658638+e*(.00016011952247675185+e*0)))))),n=1+e*(.0714304917030273+e*(-.23459179571824335+e*(.035823639860549865+e*(.011813978522206043+e*(-.004456419138517973+e*(.0005396055804933034+e*-23158187332412014e-21))))))):(e=1/e,r=0+e*(.00016011952247675185+e*(.0011913514700658638+e*(.010421379756176158+e*(.04763678004571372+e*(.20744822764843598+e*(.4942148268014971+e*1)))))),n=-23158187332412014e-21+e*(.0005396055804933034+e*(-.004456419138517973+e*(.011813978522206043+e*(.035823639860549865+e*(-.23459179571824335+e*(.0714304917030273+e*1))))))),r/n)}var Z$t=q$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, long comment, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var K$t=Zt,J$t=Is,Q$t=YU,DO=de,tzt=Cn,ezt=Q0,NO=Ne,FO=Tr,BO=Ds,$O=G$t,zO=Y$t,rzt=Z$t;function nzt(e){var t,r,n,i;if(J$t(e)&&e<0||e===FO||K$t(e))return NaN;if(e===0)return Q$t(e)?FO:NO;if(e>171.61447887182297)return NO;if(e<-170.5674972726612)return 0;if(r=DO(e),r>33)return e>=0?$O(e):(n=tzt(r),(n&1)===0?t=-1:t=1,i=r-n,i>.5&&(n+=1,i=r-n),i=r*ezt(BO*i),t*BO/(DO(i)*$O(r)));for(i=1;e>=3;)e-=1,i*=e;for(;e<0;){if(e>-1e-9)return zO(e,i);i/=e,e+=1}for(;e<2;){if(e<1e-9)return zO(e,i);i/=e,e+=1}return e===2?i:(e-=2,i*rzt(e))}var izt=nzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ozt=izt,Lo=ozt;const azt=[1,1,2,6,24,120,720,5040,40320,362880,3628800,39916800,479001600,6227020800,87178291200,1307674368e3,20922789888e3,355687428096e3,6402373705728e3,121645100408832e3,243290200817664e4,5109094217170944e4,11240007277776077e5,2585201673888498e7,6204484017332394e8,15511210043330986e9,40329146112660565e10,10888869450418352e12,30488834461171387e13,8841761993739702e15,26525285981219107e16,8222838654177922e18,2631308369336935e20,8683317618811886e21,29523279903960416e22,10333147966386145e24,37199332678990125e25,13763753091226346e27,5230226174666011e29,20397882081197444e30,8159152832478977e32,3345252661316381e34,140500611775288e37,6041526306337383e37,2658271574788449e39,11962222086548019e40,5502622159812089e42,25862324151116818e43,12413915592536073e45,6082818640342675e47,30414093201713376e48,15511187532873822e50,8065817517094388e52,42748832840600255e53,2308436973392414e56,12696403353658276e57,7109985878048635e59,40526919504877214e60,23505613312828785e62,13868311854568984e64,832098711274139e67,5075802138772248e68,3146997326038794e70,198260831540444e73,12688693218588417e73,8247650592082472e75,5443449390774431e77,3647111091818868e79,24800355424368305e80,1711224524281413e83,11978571669969892e84,8504785885678623e86,61234458376886085e87,44701154615126844e89,3307885441519386e92,248091408113954e95,18854947016660504e95,14518309202828587e97,11324281178206297e99,8946182130782976e101,7156945704626381e103,5797126020747368e105,4753643337012842e107,3945523969720659e109,3314240134565353e111,281710411438055e114,24227095383672734e114,2107757298379528e117,18548264225739844e118,1650795516090846e121,14857159644817615e122,1352001527678403e125,12438414054641308e126,11567725070816416e128,1087366156656743e131,1032997848823906e133,9916779348709496e134,9619275968248212e136,9426890448883248e138,9332621544394415e140,9332621544394415e142,942594775983836e145,9614466715035127e146,990290071648618e149,10299016745145628e150,1081396758240291e153,11462805637347084e154,1226520203196138e157,1324641819451829e159,14438595832024937e160,1588245541522743e163,17629525510902446e164,1974506857221074e167,22311927486598138e168,25435597334721877e170,2925093693493016e173,3393108684451898e175,3969937160808721e177,4684525849754291e179,5574585761207606e181,6689502913449127e183,8094298525273444e185,9875044200833601e187,1214630436702533e190,1506141741511141e192,1882677176888926e194,2372173242880047e196,30126600184576594e197,3856204823625804e200,4974504222477287e202,6466855489220474e204,847158069087882e207,11182486511960043e208,14872707060906857e210,19929427461615188e212,26904727073180504e214,3659042881952549e217,5012888748274992e219,6917786472619489e221,9615723196941089e223,13462012475717526e225,1898143759076171e228,2695364137888163e230,3854370717180073e232,55502938327393044e233,8047926057471992e236,11749972043909107e238,1727245890454639e241,25563239178728654e242,380892263763057e246,5713383956445855e247,862720977423324e250,13113358856834524e251,20063439050956823e253,30897696138473508e255,4789142901463394e258,7471062926282894e260,11729568794264145e262,1853271869493735e265,29467022724950384e266,47147236359920616e268,7590705053947219e271,12296942187394494e273,20044015765453026e275,3287218585534296e278,5423910666131589e280,9003691705778438e282,1503616514864999e285,25260757449731984e286,4269068009004705e289,7257415615307999e291];/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var szt=Zt,lzt=Is,uzt=Lo,czt=Ne,fzt=azt,hzt=170;function dzt(e){return szt(e)?NaN:lzt(e)?e<0?NaN:e<=hzt?fzt[e]:czt:uzt(e+1)}var pzt=dzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vzt=pzt,eG=vzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function gzt(e){var t,r,n;return e===0?1/0:(e<0?t=-e:t=e,t<=1?(r=3847467039331777e-5+e*(3685766504351951e-5+e*(1588920245372942e-5+e*(4059208354298835e-6+e*(6805476611834733e-7+e*(7823975500312005e-8+e*(6246580776401795e-9+e*(341986.3488721347+e*(12287.194511824551+e*(261.61404416416684+e*2.5066282746310007))))))))),n=0+e*(362880+e*(1026576+e*(1172700+e*(723680+e*(269325+e*(63273+e*(9450+e*(870+e*(45+e*1)))))))))):(e=1/e,r=2.5066282746310007+e*(261.61404416416684+e*(12287.194511824551+e*(341986.3488721347+e*(6246580776401795e-9+e*(7823975500312005e-8+e*(6805476611834733e-7+e*(4059208354298835e-6+e*(1588920245372942e-5+e*(3685766504351951e-5+e*3847467039331777e-5))))))))),n=1+e*(45+e*(870+e*(9450+e*(63273+e*(269325+e*(723680+e*(1172700+e*(1026576+e*(362880+e*0)))))))))),r/n)}var mzt=gzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/lanczos.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var yzt=mzt,_zt=yzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bzt=_zt,wzt=bzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Szt=10.900511,tp=Szt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var VO=wzt,Tzt=Lo,UO=Mn,GO=de,jO=Ve,WO=er,Pzt=Ta,Ezt=Df,Azt=tp,HO=170,Czt=4269068009004705e289;function rG(e,t){var r,n,i;return e<Pzt?t>HO?(n=rG(t,HO-t),n*=e,n*=Czt,1/n):1/(e*Tzt(e+t)):(i=e+Azt-.5,e+t===e?GO(t)<10?r=jO((.5-e)*UO(t/i)):r=1:(GO(t)<10?r=jO((.5-e)*UO(t/i)):r=WO(i/(i+t),e-.5),r*=VO(e)/VO(e+t)),r*=WO(Ezt/(i+t),t),r)}var Mzt=rG;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var kzt=de,XO=Cn,YO=Lo,qO=eG,xzt=Mzt,ZO=170;function Lzt(e,t){var r,n,i;if(e<=0||e+t<=0)return YO(e)/YO(e+t);if(n=XO(t),n===t){if(i=XO(e),i===e&&e<=ZO&&e+t<=ZO)return qO(i-1)/qO(n+i-1);if(kzt(t)<20){if(t===0)return 1;if(t<0){for(e-=1,r=e,t+=1;t!==0;)e-=1,r*=e,t+=1;return r}for(r=1/e,t-=1;t!==0;)e+=1,r/=e,t-=1;return r}}return xzt(e,t)}var Izt=Lzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ozt=Izt,lC=Ozt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Rzt(e){return e===0?.3999999999940942:.3999999999940942+e*(.22222198432149784+e*.15313837699209373)}var Dzt=Rzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Nzt(e){return e===0?.6666666666666735:.6666666666666735+e*(.2857142874366239+e*(.1818357216161805+e*.14798198605116586))}var Fzt=Nzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_log.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var KO=ri,Bzt=K0,$zt=Zt,zzt=_u,Vzt=Tr,Uzt=Dzt,Gzt=Fzt,qv=.6931471803691238,Zv=19082149292705877e-26,jzt=0x40000000000000,Wzt=.3333333333333333,JO=1048575,Hzt=2146435072,Xzt=1048576,Yzt=1072693248;function qzt(e){var t,r,n,i,o,a,s,l,u,c,f,h;return e===0?Vzt:$zt(e)||e<0?NaN:(r=KO(e),o=0,r<Xzt&&(o-=54,e*=jzt,r=KO(e)),r>=Hzt?e+e:(o+=(r>>20)-zzt|0,r&=JO,l=r+614244&1048576|0,e=Bzt(e,r|l^Yzt),o+=l>>20|0,s=e-1,(JO&2+r)<3?s===0?o===0?0:o*qv+o*Zv:(a=s*s*(.5-Wzt*s),o===0?s-a:o*qv-(a-o*Zv-s)):(c=s/(2+s),h=c*c,l=r-398458|0,f=h*h,u=440401-r|0,i=f*Uzt(f),n=h*Gzt(f),l|=u,a=n+i,l>0?(t=.5*s*s,o===0?s-(t-c*(t+a)):o*qv-(t-(c*(t+a)+o*Zv)-s)):o===0?s-c*(s-a):o*qv-(c*(s-a)-o*Zv-s))))}var Zzt=qzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Kzt=Zzt,Se=Kzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_cos.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var Jzt=ri,tw=qU,QO=ZU,Qzt=tG,Go=[0,0],tVt=2147483647,eVt=1072243195,rVt=1044381696,nVt=2146435072;function iVt(e){var t,r;if(t=Jzt(e),t&=tVt,t<=eVt)return t<rVt?1:tw(e,0);if(t>=nVt)return NaN;switch(r=Qzt(e,Go),r&3){case 0:return tw(Go[0],Go[1]);case 1:return-QO(Go[0],Go[1]);case 2:return-tw(Go[0],Go[1]);default:return QO(Go[0],Go[1])}}var oVt=iVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aVt=oVt,uC=aVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sVt=Zt,lVt=Of,tR=uC,ew=Q0,uVt=de,Ah=oC,Ch=Ds;function cVt(e){var t,r;return sVt(e)?NaN:lVt(e)?NaN:(r=e%2,t=uVt(r),t===0||t===1?Ah(0,r):t<.25?ew(Ch*r):t<.75?(t=.5-t,Ah(tR(Ch*t),r)):t<1.25?(r=Ah(1,r)-r,ew(Ch*r)):t<1.75?(t-=1.5,-Ah(tR(Ch*t),r)):(r-=Ah(2,r),ew(Ch*r)))}var fVt=cVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hVt=fVt,dVt=hVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function pVt(e){return e===0?.06735230105312927:.06735230105312927+e*(.007385550860814029+e*(.0011927076318336207+e*(.00022086279071390839+e*25214456545125733e-21)))}var vVt=pVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function gVt(e){return e===0?.020580808432516733:.020580808432516733+e*(.0028905138367341563+e*(.0005100697921535113+e*(.00010801156724758394+e*44864094961891516e-21)))}var mVt=gVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function yVt(e){return e===0?1.3920053346762105:1.3920053346762105+e*(.7219355475671381+e*(.17193386563280308+e*(.01864591917156529+e*(.0007779424963818936+e*7326684307446256e-21))))}var _Vt=yVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function bVt(e){return e===0?.21498241596060885:.21498241596060885+e*(.325778796408931+e*(.14635047265246445+e*(.02664227030336386+e*(.0018402845140733772+e*3194753265841009e-20))))}var wVt=bVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function SVt(e){return e===0?-.032788541075985965:-.032788541075985965+e*(.006100538702462913+e*(-.0014034646998923284+e*.00031563207090362595))}var TVt=SVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function PVt(e){return e===0?.01797067508118204:.01797067508118204+e*(-.0036845201678113826+e*(.000881081882437654+e*-.00031275416837512086))}var EVt=PVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function AVt(e){return e===0?-.010314224129834144:-.010314224129834144+e*(.0022596478090061247+e*(-.0005385953053567405+e*.0003355291926355191))}var CVt=AVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function MVt(e){return e===0?.6328270640250934:.6328270640250934+e*(1.4549225013723477+e*(.9777175279633727+e*(.22896372806469245+e*.013381091853678766)))}var kVt=MVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function xVt(e){return e===0?2.4559779371304113:2.4559779371304113+e*(2.128489763798934+e*(.7692851504566728+e*(.10422264559336913+e*.003217092422824239)))}var LVt=xVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function IVt(e){return e===0?.08333333333333297:.08333333333333297+e*(-.0027777777772877554+e*(.0007936505586430196+e*(-.00059518755745034+e*(.0008363399189962821+e*-.0016309293409657527))))}var OVt=IVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_lgamma_r.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var RVt=Zt,DVt=Of,NVt=de,qu=Se,FVt=rC,BVt=dVt,$Vt=Ds,rw=Ne,zVt=vVt,VVt=mVt,UVt=_Vt,GVt=wVt,jVt=TVt,WVt=EVt,HVt=CVt,XVt=kVt,YVt=LVt,qVt=OVt,ZVt=.07721566490153287,KVt=.3224670334241136,JVt=1,QVt=-.07721566490153287,tUt=.48383612272381005,eUt=-.1475877229945939,rUt=.06462494023913339,nUt=-.07721566490153287,iUt=1,oUt=.4189385332046727,Kv=1.4616321449683622,aUt=4503599627370496,sUt=0x400000000000000,lUt=8470329472543003e-37,eR=1.4616321449683622,uUt=-.12148629053584961,cUt=-3638676997039505e-33;function fUt(e){var t,r,n,i,o,a,s,l,u,c,f,h,d;if(RVt(e)||DVt(e))return e;if(e===0)return rw;if(e<0?(t=!0,e=-e):t=!1,e<lUt)return-qu(e);if(t){if(e>=aUt||(u=BVt(e),u===0))return rw;r=qu($Vt/NVt(u*e))}if(e===1||e===2)return 0;if(e<2)switch(e<=.9?(d=-qu(e),e>=Kv-1+.27?(f=1-e,n=0):e>=Kv-1-.27?(f=e-(eR-1),n=1):(f=e,n=2)):(d=0,e>=Kv+.27?(f=2-e,n=0):e>=Kv-.27?(f=e-eR,n=1):(f=e-1,n=2)),n){case 0:h=f*f,a=ZVt+h*zVt(h),o=h*(KVt+h*VVt(h)),s=f*a+o,d+=s-.5*f;break;case 1:h=f*f,c=h*f,a=tUt+c*jVt(c),o=eUt+c*WVt(c),i=rUt+c*HVt(c),s=h*a-(cUt-c*(o+f*i)),d+=uUt+s;break;case 2:a=f*(nUt+f*XVt(f)),o=iUt+f*YVt(f),d+=-.5*f+a/o;break}else if(e<8)switch(n=FVt(e),f=e-n,s=f*(QVt+f*GVt(f)),l=JVt+f*UVt(f),d=.5*f+s/l,h=1,n){case 7:h*=f+6;case 6:h*=f+5;case 5:h*=f+4;case 4:h*=f+3;case 3:h*=f+2,d+=qu(h)}else e<sUt?(u=qu(e),h=1/e,f=h*h,c=oUt+h*qVt(f),d=(e-.5)*(u-1)+c):d=e*(qu(e)-1);return t&&(d=r-d),d}var hUt=fUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dUt=hUt,Ff=dUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pUt=14901161193847656e-24,vUt=pUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gUt=709.782712893384,Su=gUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var mUt=Ve;function yUt(e,t){var r,n,i,o;if(i=mUt(-t),n=i,n!==0)for(r=n,o=1;o<e;++o)r/=o,r*=t,n+=r;return n}var _Ut=yUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function bUt(e){return e===0?-.3250421072470015:-.3250421072470015+e*(-.02848174957559851+e*(-.005770270296489442+e*-23763016656650163e-21))}var wUt=bUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function SUt(e){return e===0?.39791722395915535:.39791722395915535+e*(.0650222499887673+e*(.005081306281875766+e*(.00013249473800432164+e*-3960228278775368e-21)))}var TUt=SUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function PUt(e){return e===0?.41485611868374833:.41485611868374833+e*(-.3722078760357013+e*(.31834661990116175+e*(-.11089469428239668+e*(.035478304325618236+e*-.002166375594868791))))}var EUt=PUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function AUt(e){return e===0?.10642088040084423:.10642088040084423+e*(.540397917702171+e*(.07182865441419627+e*(.12617121980876164+e*(.01363708391202905+e*.011984499846799107))))}var CUt=AUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function MUt(e){return e===0?-.6938585727071818:-.6938585727071818+e*(-10.558626225323291+e*(-62.375332450326006+e*(-162.39666946257347+e*(-184.60509290671104+e*(-81.2874355063066+e*-9.814329344169145)))))}var kUt=MUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function xUt(e){return e===0?19.651271667439257:19.651271667439257+e*(137.65775414351904+e*(434.56587747522923+e*(645.3872717332679+e*(429.00814002756783+e*(108.63500554177944+e*(6.570249770319282+e*-.0604244152148581))))))}var LUt=xUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function IUt(e){return e===0?-.799283237680523:-.799283237680523+e*(-17.757954917754752+e*(-160.63638485582192+e*(-637.5664433683896+e*(-1025.0951316110772+e*-483.5191916086514))))}var OUt=IUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function RUt(e){return e===0?30.33806074348246:30.33806074348246+e*(325.7925129965739+e*(1536.729586084437+e*(3199.8582195085955+e*(2553.0504064331644+e*(474.52854120695537+e*-22.44095244658582)))))}var DUt=RUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_erf.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var NUt=Zt,rR=Ve,FUt=J0,BUt=Ne,$Ut=Tr,zUt=wUt,VUt=TUt,UUt=EUt,GUt=CUt,jUt=kUt,WUt=LUt,HUt=OUt,XUt=DUt,Jv=1e-300,YUt=13877787807814457e-33,nR=.8450629115104675,qUt=.12837916709551256,ZUt=1,KUt=-.0023621185607526594,JUt=1,QUt=-.009864944034847148,tGt=1,eGt=-.0098649429247001,rGt=1;function nGt(e){var t,r,n,i,o,a,s,l;if(NUt(e))return NaN;if(e===BUt)return 0;if(e===$Ut)return 2;if(e===0)return 1;if(e<0?(t=!0,r=-e):(t=!1,r=e),r<.84375)return r<YUt?1-e:(n=e*e,i=qUt+n*zUt(n),o=ZUt+n*VUt(n),a=i/o,e<.25?1-(e+e*a):(i=e*a,i+=e-.5,.5-i));if(r<1.25)return o=r-1,s=KUt+o*UUt(o),l=JUt+o*GUt(o),t?1+nR+s/l:1-nR-s/l;if(r<28){if(o=1/(r*r),r<2.857142857142857)i=QUt+o*jUt(o),o=tGt+o*WUt(o);else{if(e<-6)return 2-Jv;i=eGt+o*HUt(o),o=rGt+o*XUt(o)}return n=FUt(r,0),i=rR(-(n*n)-.5625)*rR((n-r)*(n+r)+i/o),t?2-i/r:i/r}return t?2-Jv:Jv*Jv}var iGt=nGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oGt=iGt,nG=oGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var aGt=nG,iR=tr,sGt=Ve,lGt=Ds;function uGt(e,t){var r,n,i,o,a;if(o=aGt(iR(t)),o!==0&&e>1){for(n=sGt(-t)/iR(lGt*t),n*=t,r=.5,n/=r,i=n,a=2;a<e;++a)n/=a-r,n*=t,i+=n;o+=i}return o}var cGt=uGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fGt=-708.3964185322641,Bf=fGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Zu=Ve,Qv=er,hGt=Se,oR=Su,aR=Bf;function dGt(e,t){var r,n;return n=e*hGt(t),t>=1?n<oR&&-t>aR?r=Qv(t,e)*Zu(-t):e>=1?r=Qv(t/Zu(t/e),e):r=Zu(n-t):n>aR?r=Qv(t,e)*Zu(-t):t/e<oR?r=Qv(t/Zu(t/e),e):r=Zu(n-t),r}var pGt=dGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vGt=6.283185307179586,iG=vGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function gGt(e){return e===0?-.3333333333333333:-.3333333333333333+e*(.08333333333333333+e*(-.014814814814814815+e*(.0011574074074074073+e*(.0003527336860670194+e*(-.0001787551440329218+e*(3919263178522438e-20+e*(-21854485106799924e-22+e*(-185406221071516e-20+e*(8296711340953087e-22+e*(-17665952736826078e-23+e*(6707853543401498e-24+e*(10261809784240309e-24+e*(-4382036018453353e-24+e*914769958223679e-24)))))))))))))}var mGt=gGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function yGt(e){return e===0?-.001851851851851852:-.001851851851851852+e*(-.003472222222222222+e*(.0026455026455026454+e*(-.0009902263374485596+e*(.00020576131687242798+e*(-4018775720164609e-22+e*(-18098550334489977e-21+e*(764916091608111e-20+e*(-16120900894563446e-22+e*(4647127802807434e-24+e*(1378633446915721e-22+e*(-5752545603517705e-23+e*11951628599778148e-24)))))))))))}var _Gt=yGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function bGt(e){return e===0?.004133597883597883:.004133597883597883+e*(-.0026813271604938273+e*(.0007716049382716049+e*(20093878600823047e-22+e*(-.00010736653226365161+e*(52923448829120125e-21+e*(-12760635188618728e-21+e*(3423578734096138e-23+e*(13721957309062932e-22+e*(-6298992138380055e-22+e*14280614206064242e-23)))))))))}var wGt=bGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function SGt(e){return e===0?.0006494341563786008:.0006494341563786008+e*(.00022947209362139917+e*(-.0004691894943952557+e*(.00026772063206283885+e*(-7561801671883977e-20+e*(-2396505113867297e-22+e*(11082654115347302e-21+e*(-56749528269915965e-22+e*14230900732435883e-22)))))))}var TGt=SGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function PGt(e){return e===0?-.0008618882909167117:-.0008618882909167117+e*(.0007840392217200666+e*(-.0002990724803031902+e*(-14638452578843418e-22+e*(6641498215465122e-20+e*(-3968365047179435e-20+e*11375726970678419e-21)))))}var EGt=PGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function AGt(e){return e===0?-.00033679855336635813:-.00033679855336635813+e*(-6972813758365858e-20+e*(.0002772753244959392+e*(-.00019932570516188847+e*(6797780477937208e-20+e*(1419062920643967e-22+e*(-13594048189768693e-21+e*(8018470256334202e-21+e*-2291481176508095e-21)))))))}var CGt=AGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function MGt(e){return e===0?.0005313079364639922:.0005313079364639922+e*(-.0005921664373536939+e*(.0002708782096718045+e*(7902353232660328e-22+e*(-8153969367561969e-20+e*(561168275310625e-19+e*-18329116582843375e-21)))))}var kGt=MGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function xGt(e){return e===0?.00034436760689237765:.00034436760689237765+e*(5171790908260592e-20+e*(-.00033493161081142234+e*(.0002812695154763237+e*-.00010976582244684731)))}var LGt=xGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function IGt(e){return e===0?-.0006526239185953094:-.0006526239185953094+e*(.0008394987206720873+e*-.000438297098541721)}var OGt=IGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var RGt=Os,DGt=nG,nw=tr,NGt=Ve,FGt=Se,BGt=iG,$Gt=mGt,zGt=_Gt,VGt=wGt,UGt=TGt,GGt=EGt,jGt=CGt,WGt=kGt,HGt=LGt,XGt=OGt,ai=[0,0,0,0,0,0,0,0,0,0];function YGt(e,t){var r,n,i,o,a;return n=(t-e)/e,i=-FGt(1+n)+n,o=e*i,a=nw(2*i),t<e&&(a=-a),ai[0]=$Gt(a),ai[1]=zGt(a),ai[2]=VGt(a),ai[3]=UGt(a),ai[4]=GGt(a),ai[5]=jGt(a),ai[6]=WGt(a),ai[7]=HGt(a),ai[8]=XGt(a),ai[9]=-.0005967612901927463,r=RGt(ai,1/e),r*=NGt(-o)/nw(BGt*e),t<e&&(r=-r),r+=DGt(nw(o))/2,r}var qGt=YGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZGt=eval,KGt=ZGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var JGt=KGt;function QGt(){var e;try{JGt('"use strict"; (function* () {})'),e=!0}catch{e=!1}return e}var tjt=QGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ejt=tjt,oG=ejt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tg=de,rjt=Ta,njt=1e6;function ijt(e,t){var r,n,i,o,a,s;if(s={},arguments.length>1&&(s=t),n=s.tolerance||rjt,o=s.maxTerms||njt,a=s.initialValue||0,r=typeof e.next=="function",r===!0){for(i of e)if(a+=i,tg(n*a)>=tg(i)||--o===0)break}else do i=e(),a+=i;while(tg(n*a)<tg(i)&&--o);return a}var ojt=ijt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sR=de,ajt=Ta,sjt=1e6;function ljt(e,t){var r,n,i,o,a;a={},arguments.length>1&&(a=t),r=a.tolerance||ajt,i=a.maxTerms||sjt,o=a.initialValue||0;do n=e(),o+=n;while(sR(r*o)<sR(n)&&--i);return o}var ujt=ljt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cjt=oG,fjt=ojt,hjt=ujt,$T;cjt()?$T=fjt:$T=hjt;var cC=$T;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function djt(e,t){var r=1,n=e,i=t;return o;function o(){var a=r;return n+=1,r*=i/n,a}}var pjt=djt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var vjt=cC,gjt=pjt;function mjt(e,t,r){var n,i;return r=r||0,i=gjt(e,t),n=vjt(i,{initialValue:r}),n}var yjt=mjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _jt(e){var t,r,n;return e===0?1/0:(e<0?t=-e:t=e,t<=1?(r=709811.662581658+e*(679979.8474157227+e*(293136.7857211597+e*(74887.54032914672+e*(12555.290582413863+e*(1443.4299244417066+e*(115.24194596137347+e*(6.309239205732627+e*(.22668404630224365+e*(.004826466289237662+e*4624429436045379e-20))))))))),n=0+e*(362880+e*(1026576+e*(1172700+e*(723680+e*(269325+e*(63273+e*(9450+e*(870+e*(45+e*1)))))))))):(e=1/e,r=4624429436045379e-20+e*(.004826466289237662+e*(.22668404630224365+e*(6.309239205732627+e*(115.24194596137347+e*(1443.4299244417066+e*(12555.290582413863+e*(74887.54032914672+e*(293136.7857211597+e*(679979.8474157227+e*709811.662581658))))))))),n=1+e*(45+e*(870+e*(9450+e*(63273+e*(269325+e*(723680+e*(1172700+e*(1026576+e*(362880+e*0)))))))))),r/n)}var bjt=_jt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/lanczos.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var wjt=bjt,Sjt=wjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Tjt=Sjt,Hy=Tjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Pjt=Hy,Ejt=Ff,Ajt=Lo,Cjt=Mn,Mjt=tr,kjt=de,Wa=Ve,Mh=er,iw=wu,ow=Rs,lR=Se,eg=Su,kh=Bf,aw=tp,xjt=Df;function Ljt(e,t){var r,n,i,o,a,s,l;return i=e+aw-.5,l=(t-e-aw+.5)/i,e<1?t<=kh?Wa(e*lR(t)-t-Ejt(e)):Mh(t,e)*Wa(-t)/Ajt(e):(kjt(l*l*e)<=100&&e>150?(r=e*(Cjt(l)-l)+t*(.5-aw)/i,r=Wa(r)):(o=e*lR(t/i),a=e-t,ow(o,a)<=kh||iw(o,a)>=eg?(n=a/e,ow(o,a)/2>kh&&iw(o,a)/2<eg?(s=Mh(t/i,e/2)*Wa(a/2),r=s*s):ow(o,a)/4>kh&&iw(o,a)/4<eg&&t>e?(s=Mh(t/i,e/4)*Wa(a/4),r=s*s,r*=r):n>kh&&n<eg?r=Mh(t*Wa(n)/i,e):r=Wa(o+a)):r=Mh(t/i,e)*Wa(a)),r*=Mjt(i/xjt)/Pjt(e),r)}var Ijt=Ljt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_60_0/boost/math/special_functions/powm1.hpp}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var uR=Zt,cR=de,Ojt=If,Rjt=Se,Djt=er,Njt=rC;function Fjt(e,t){var r;if(uR(e)||uR(t))return NaN;if(t===0)return 0;if(e===0)return-1;if(e<0&&t%2===0&&(e=-e),e>0){if((cR(t*(e-1))<.5||cR(t)<.2)&&(r=Rjt(e)*t,r<.5))return Ojt(r)}else if(Njt(t)!==t)return NaN;return Djt(e,t)-1}var Bjt=Fjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $jt=Bjt,zjt=$jt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Vjt(e){var t,r,n;return e===0?-.01803556856784494:(e<0?t=-e:t=e,t<=1?(r=-.01803556856784494+e*(.02512664961998968+e*(.049410315156753225+e*(.0172491608709614+e*(-.0002594535632054381+e*(-.0005410098692152044+e*(-3245886498259485e-20+e*0)))))),n=1+e*(1.962029871977952+e*(1.4801966942423133+e*(.5413914320717209+e*(.09885042511280101+e*(.008213096746488934+e*(.00022493629192211576+e*-22335276320861708e-23))))))):(e=1/e,r=0+e*(-3245886498259485e-20+e*(-.0005410098692152044+e*(-.0002594535632054381+e*(.0172491608709614+e*(.049410315156753225+e*(.02512664961998968+e*-.01803556856784494)))))),n=-22335276320861708e-23+e*(.00022493629192211576+e*(.008213096746488934+e*(.09885042511280101+e*(.5413914320717209+e*(1.4801966942423133+e*(1.962029871977952+e*1))))))),r/n)}var Ujt=Vjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Gjt(e){var t,r,n;return e===0?.04906224540690395:(e<0?t=-e:t=e,t<=1?(r=.04906224540690395+e*(-.09691175301595212+e*(-.4149833583594954+e*(-.4065671242119384+e*(-.1584135863906922+e*(-.024014982064857155+e*-.0010034668769627955))))),n=1+e*(3.0234982984646304+e*(3.4873958536072385+e*(1.9141558827442668+e*(.5071377386143635+e*(.05770397226904519+e*.001957681026011072)))))):(e=1/e,r=-.0010034668769627955+e*(-.024014982064857155+e*(-.1584135863906922+e*(-.4065671242119384+e*(-.4149833583594954+e*(-.09691175301595212+e*.04906224540690395))))),n=.001957681026011072+e*(.05770397226904519+e*(.5071377386143635+e*(1.9141558827442668+e*(3.4873958536072385+e*(3.0234982984646304+e*1)))))),r/n)}var jjt=Gjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Wjt(e){var t,r,n;return e===0?-.029232972183027003:(e<0?t=-e:t=e,t<=1?(r=-.029232972183027003+e*(.14421626775719232+e*(-.14244039073863127+e*(.05428096940550536+e*(-.008505359768683364+e*(.0004311713426792973+e*0))))),n=1+e*(-1.5016935605448505+e*(.846973248876495+e*(-.22009515181499575+e*(.02558279715597587+e*(-.0010066679553914337+e*-8271935218912905e-22)))))):(e=1/e,r=0+e*(.0004311713426792973+e*(-.008505359768683364+e*(.05428096940550536+e*(-.14244039073863127+e*(.14421626775719232+e*-.029232972183027003))))),n=-8271935218912905e-22+e*(-.0010066679553914337+e*(.02558279715597587+e*(-.22009515181499575+e*(.846973248876495+e*(-1.5016935605448505+e*1)))))),r/n)}var Hjt=Wjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/lgamma_small.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006-7, 2013-14.
* (C) Copyright Paul A. Bristow 2007, 2013-14.
* (C) Copyright Nikhar Agrawal 2013-14.
* (C) Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var sw=Se,Xjt=Ta,Yjt=Ujt,qjt=jjt,Zjt=Hjt,Kjt=.15896368026733398,Jjt=.5281534194946289,Qjt=.45201730728149414;function tWt(e,t,r){var n,i,o,a;if(e<Xjt)return-sw(e);if(t===0||r===0)return 0;if(i=0,e>2){if(e>=3){do e-=1,r-=1,i+=sw(e);while(e>=3);r=e-2}return o=r*(e+1),a=Yjt(r),i+=o*Kjt+o*a,i}return e<1&&(i+=-sw(e),r=t,t=e,e+=1),e<=1.5?(o=qjt(t),n=t*r,i+=n*Jjt+n*o,i):(o=r*t,a=Zjt(-r),i+=o*Qjt+o*a,i)}var eWt=tWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006-7, 2013-14.
* (C) Copyright Paul A. Bristow 2007, 2013-14.
* (C) Copyright Nikhar Agrawal 2013-14.
* (C) Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var fR=Lo,hR=If,rWt=Mn,nWt=Zt,dR=eWt;function iWt(e){return nWt(e)?NaN:e<0?e<-.5?fR(1+e)-1:hR(-rWt(e)+dR(e+2,e+1,e)):e<2?hR(dR(e+1,e,e-1)):fR(1+e)-1}var oWt=iWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aWt=oWt,sWt=aWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function lWt(e,t){var r,n,i,o;return r=-t,t=-t,n=e+1,i=1,a;function a(){return o=r/n,r*=t,i+=1,r/=i,n+=1,o}}var uWt=lWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var cWt=zjt,fWt=cC,hWt=sWt,dWt=uWt;function pWt(e,t,r){var n,i,o,a,s;return i=hWt(e),o=(i+1)/e,a=cWt(t,e),i-=a,i/=e,s=dWt(e,t),a+=1,n=r?o:0,i=-a*fWt(s,{initialValue:(n-i)/a}),r&&(i=-i),[i,o]}var vWt=pWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gWt=11754943508222875e-54,Xy=gWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var y1=de,fo=Xy,mWt=Ta,yWt=1e6;function _Wt(e,t,r){var n,i,o,a,s,l,u;if(n=typeof e.next=="function",u=n?e.next().value:e(),a=u[1],o=u[0],a===0&&(a=fo),s=a,l=0,n===!0)do u=e.next().value,u&&(l=u[1]+u[0]*l,l===0&&(l=fo),s=u[1]+u[0]/s,s===0&&(s=fo),l=1/l,i=s*l,a*=i);while(y1(i-1)>t&&--r);else do u=e(),u&&(l=u[1]+u[0]*l,l===0&&(l=fo),s=u[1]+u[0]/s,s===0&&(s=fo),l=1/l,i=s*l,a*=i);while(u&&y1(i-1)>t&&--r);return o/a}function bWt(e,t,r){var n,i,o,a,s,l;if(n=typeof e.next=="function",l=n?e.next().value:e(),o=l[1],o===0&&(o=fo),a=o,s=0,n===!0)do l=e.next().value,l&&(s=l[1]+l[0]*s,s===0&&(s=fo),a=l[1]+l[0]/a,a===0&&(a=fo),s=1/s,i=a*s,o*=i);while(l&&y1(i-1)>t&&--r);else do l=e(),l&&(s=l[1]+l[0]*s,s===0&&(s=fo),a=l[1]+l[0]/a,a===0&&(a=fo),s=1/s,i=a*s,o*=i);while(l&&y1(i-1)>t&&--r);return o}function wWt(e,t){var r,n,i;return n={},arguments.length>1&&(n=t),r=n.maxIter||yWt,i=n.tolerance||mWt,n.keep?bWt(e,i,r):_Wt(e,i,r)}var SWt=wWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aG=de,TWt=Ta,Nc=Xy,PWt=1e6;function EWt(e,t,r){var n,i,o,a,s,l;l=e(),s=l[1],i=l[0],s===0&&(s=Nc),o=s,a=0;do l=e(),l&&(a=l[1]+l[0]*a,a===0&&(a=Nc),o=l[1]+l[0]/o,o===0&&(o=Nc),a=1/a,n=o*a,s*=n);while(l&&aG(n-1)>t&&--r);return i/s}function AWt(e,t,r){var n,i,o,a,s;s=e(),a=s[1],a===0&&(a=Nc),i=a,o=0;do s=e(),s&&(o=s[1]+s[0]*o,o===0&&(o=Nc),i=s[1]+s[0]/i,i===0&&(i=Nc),o=1/o,n=i*o,a*=n);while(s&&aG(n-1)>t&&--r);return a}function CWt(e,t){var r,n,i;return n={},arguments.length>1&&(n=t),i=n.tolerance||TWt,r=n.maxIter||PWt,n.keep?AWt(e,i,r):EWt(e,i,r)}var MWt=CWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kWt=oG,xWt=SWt,LWt=MWt,zT;kWt()?zT=xWt:zT=LWt;var sG=zT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function IWt(e,t){var r=t-e+1,n=e,i=0;return o;function o(){return i+=1,r+=2,[i*(n-i),r]}}var OWt=IWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var RWt=sG,DWt=OWt;function NWt(e,t){var r=DWt(e,t);return 1/(t-e+1+RWt(r))}var FWt=NWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006-7, 2013-14.
* (C) Copyright Paul A. Bristow 2007, 2013-14.
* (C) Copyright Nikhar Agrawal 2013-14.
* (C) Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var BWt=Ff,$Wt=Cn,xh=Lo,pR=de,zWt=Ve,vR=er,si=Se,VWt=vUt,gR=Nf,UWt=Wy,mR=Su,GWt=Ne,jWt=_Ut,WWt=cGt,yR=pGt,HWt=qGt,lw=yjt,_R=Ijt,XWt=vWt,bR=FWt,YWt=170;function lG(e,t,r,n){var i,o,a,s,l,u,c,f,h,d,p,v,g,m,y;if(e<0||t<=0)return NaN;if(o=r===void 0?!0:r,f=n,h=0,t>=YWt&&!o)return f&&t*4<e?(h=t*si(e)-e,h+=si(bR(t,e))):!f&&t>4*e?(h=t*si(e)-e,s=0,h+=si(lw(t,e,s)/t)):(h=lG(t,e,!0,f),h===0?f?(h=1+1/(12*t)+1/(288*t*t),h=si(h)-t+(t-.5)*si(t),h+=si(UWt)):(h=t*si(e)-e,s=0,h+=si(lw(t,e,s)/t)):h=si(h)+BWt(t)),h>mR?GWt:zWt(h);switch(c=t<30&&t<=e+1&&e<mR,c?(m=$Wt(t),d=m===t,l=d?!1:pR(m-t)===.5):d=l=!1,d&&e>.6?(f=!f,a=0):l&&e>.2?(f=!f,a=1):e<VWt&&t>1?a=6:e<.5?-.4/si(e)<t?a=2:a=3:e<1.1?e*.75<t?a=2:a=3:(u=!1,o&&t>20&&(p=pR((e-t)/t),t>200?20/t>p*p&&(u=!0):p<.4&&(u=!0)),u?a=5:e-1/(3*e)<t?a=2:(a=4,f=!f)),a){case 0:h=jWt(t,e),o===!1&&(h*=xh(t));break;case 1:h=WWt(t,e),o===!1&&(h*=xh(t));break;case 2:h=o?_R(t,e):yR(t,e),h!==0&&(s=0,i=!1,f&&(s=o?1:xh(t),o||h>=1||gR*h>s?(s/=h,o||t<1||gR/t>s?(s*=-t,i=!0):s=0):s=0)),h*=lw(t,e,s)/t,i&&(f=!1,h=-h);break;case 3:f=!f,g=XWt(t,e,f),h=g[0],y=g[1],f=!1,o&&(h/=y);break;case 4:h=o?_R(t,e):yR(t,e),h!==0&&(h*=bR(t,e));break;case 5:h=HWt(t,e),e>=t&&(f=!f);break;case 6:h=o?vR(e,t)/xh(t+1):vR(e,t)/t,h*=1-t*e/(t+1);break}return o&&h>1&&(h=1),f&&(v=o?1:xh(t),h=v-h),h}var qWt=lG;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZWt=qWt,uG=ZWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Ku=Ve,rg=er,KWt=Se,wR=Su,SR=Bf;function JWt(e,t){var r,n;return n=e*KWt(t),t>=1?n<wR&&-t>SR?r=rg(t,e)*Ku(-t):e>=1?r=rg(t/Ku(t/e),e):r=Ku(n-t):n>SR?r=rg(t,e)*Ku(-t):t/e<wR?r=rg(t/Ku(t/e),e):r=Ku(n-t),r}var QWt=JWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var tHt=Hy,eHt=Ff,rHt=Lo,nHt=Mn,iHt=tr,oHt=de,Ha=Ve,Lh=er,uw=wu,cw=Rs,TR=Se,ng=Su,Ih=Bf,fw=tp,aHt=Df;function sHt(e,t){var r,n,i,o,a,s,l;return i=e+fw-.5,l=(t-e-fw+.5)/i,e<1?t<=Ih?Ha(e*TR(t)-t-eHt(e)):Lh(t,e)*Ha(-t)/rHt(e):(oHt(l*l*e)<=100&&e>150?(r=e*(nHt(l)-l)+t*(.5-fw)/i,r=Ha(r)):(o=e*TR(t/i),a=e-t,cw(o,a)<=Ih||uw(o,a)>=ng?(n=a/e,cw(o,a)/2>Ih&&uw(o,a)/2<ng?(s=Lh(t/i,e/2)*Ha(a/2),r=s*s):cw(o,a)/4>Ih&&uw(o,a)/4<ng&&t>e?(s=Lh(t/i,e/4)*Ha(a/4),r=s*s,r*=r):n>Ih&&n<ng?r=Lh(t*Ha(n)/i,e):r=Ha(o+a)):r=Lh(t/i,e)*Ha(a)),r*=iHt(i/aHt)/tHt(e),r)}var lHt=sHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var uHt=lC,PR=eG,cHt=uG,fHt=Mn,ig=de,ER=er,hHt=Se,dHt=bu,AR=Ta,pHt=QWt,vHt=lHt,Xa=new Array(30);function gHt(e,t,r,n,i,o,a){var s,l,u,c,f,h,d,p,v,g,m,y,_,b,T,S,P,C;if(h=t-1,P=e+h/2,n<.35?g=fHt(-n):g=hHt(r),C=-P*g,y=vHt(t,C),y<=dHt)return i;for(a?(s=y/uHt(e,t),s/=ER(P,t)):s=pHt(t,C)/ER(P,t),s*=o,Xa[0]=1,_=cHt(C,t,!0,!0),_/=y,c=i+s*_,u=1,d=g/2,d*=d,p=1,m=4*P*P,f=t,T=1;T<Xa.length;++T){for(u+=2,Xa[T]=0,v=t-T,l=3,b=1;b<T;++b)v=b*t-T,Xa[T]+=v*Xa[T-b]/PR(l),l+=2;if(Xa[T]/=T,Xa[T]+=h/PR(u),_=(f*(f+1)*_+(C+f+1)*p)/m,p*=d,f+=2,S=s*Xa[T]*_,c+=S,S>1){if(ig(S)<ig(AR*c))break}else if(ig(S/AR)<ig(c))break}return c}var mHt=gHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function yHt(e,t,r){var n,i;if(r===0)return 1;for(n=1,i=0;i<r;i++)n*=(e+i)/(t+i);return n}var _Ht=yHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hw=de,CR=wu,bHt=Ne;function wHt(e,t){var r,n,i;if(r=arguments.length,r===0)return bHt;if(r===2)return CR(hw(e),hw(t));for(n=[],i=0;i<r;i++)n.push(hw(arguments[i]));return CR.apply(null,n)}var SHt=wHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var THt=SHt,PHt=THt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dw=de,MR=Rs,EHt=Ne;function AHt(e,t){var r,n,i;if(r=arguments.length,r===0)return EHt;if(r===2)return MR(dw(e),dw(t));for(n=[],i=0;i<r;i++)n.push(dw(arguments[i]));return MR.apply(null,n)}var CHt=AHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var MHt=CHt,kHt=MHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var pw=Hy,xHt=PHt,LHt=kHt,kR=If,Ya=Mn,xR=tr,og=de,Ji=Ve,Qi=er,IHt=Rs,Rn=Se,to=Su,Ju=Bf,vw=tp,OHt=Df;function RHt(e,t,r,n,i){var o,a,s,l,u,c,f,h,d,p,v,g,m,y;if(!i)return Qi(r,e)*Qi(n,t);if(m=e+t,l=e+vw-.5,u=t+vw-.5,c=m+vw-.5,o=pw(m),o/=pw(e)*pw(t),o*=xR(u/OHt),o*=xR(l/c),f=(r*t-n*l)/l,h=(n*e-r*u)/u,LHt(f,h)<.2)if(f*h>0||IHt(e,t)<1)og(f)<.1?o*=Ji(e*Ya(f)):o*=Qi(r*c/l,e),og(h)<.1?o*=Ji(t*Ya(h)):o*=Qi(n*c/u,t);else if(xHt(f,h)<.5)a=e<t,s=t/e,a&&s*h<.1||!a&&f/s>.1?(d=kR(s*Ya(h)),d=f+d+d*f,d=e*Ya(d),o*=Ji(d)):(d=kR(Ya(f)/s),d=h+d+d*h,d=t*Ya(d),o*=Ji(d));else if(og(f)<og(h))if(y=e*Ya(f)+t*Rn(n*c/u),y<=Ju||y>=to){if(y+=Rn(o),y>=to)return NaN;o=Ji(y)}else o*=Ji(y);else if(y=t*Ya(h)+e*Rn(r*c/l),y<=Ju||y>=to){if(y+=Rn(o),y>=to)return NaN;o=Ji(y)}else o*=Ji(y);else if(v=r*c/l,g=n*c/u,f=e*Rn(v),h=t*Rn(g),f>=to||f<=Ju||h>=to||h<=Ju)if(e<t)if(p=Qi(g,t/e),d=e*(Rn(v)+Rn(p)),d<to&&d>Ju)o*=Qi(p*v,e);else{if(h+=f+Rn(o),h>=to)return NaN;o=Ji(h)}else if(p=Qi(v,e/t),d=(Rn(p)+Rn(g))*t,d<to&&d>Ju)o*=Qi(p*g,t);else{if(h+=f+Rn(o),h>=to)return NaN;o=Ji(h)}else o*=Qi(v,e)*Qi(g,t);return o}var fC=RHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var DHt=sG,NHt=fC,FHt={keep:!0,maxIter:1e3};function BHt(e,t,r,n){var i=0;return o;function o(){var a,s,l;return s=(e+i-1)*(e+t+i-1)*i*(t-i)*r*r,a=e+2*i-1,s/=a*a,l=i,l+=i*(t-i)*r/(e+2*i-1),l+=(e+i)*(e*n-t*r+1+i*(2-r))/(e+2*i+1),i+=1,[s,l]}}function $Ht(e,t,r,n,i,o){var a,s,l;return a=NHt(e,t,r,n,i),o&&(o[1]=a),a===0?a:(l=BHt(e,t,r,n),s=DHt(l,FHt),a/s)}var zHt=$Ht;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gw=Is,LR=Zt,VHt=aC,UHt=jy;function cG(e,t){var r,n;if(LR(e)||LR(t))return NaN;if(!gw(e)||!gw(t))return NaN;if(t<0)return 0;if(e<0)return r=cG(-e+t-1,t),VHt(t)&&(r=-r),r;if(t>e)return 0;if(t===0||t===e)return 1;if(t===1||t===e-1)return e;for(e-t<t&&(t=e-t),r=e,n=2;n<=t;n++)r*=(e-n+1)/n;return gw(r)?r:UHt(r)}var GHt=cG;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jHt=GHt,WHt=jHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var IR=WHt,pl=Cn,Oh=er,HHt=bu;function XHt(e,t,r,n){var i,o,a,s,l;if(o=Oh(r,e),o>HHt)for(s=o,l=pl(e-1);l>t;l--)s*=(l+1)*n/((e-l)*r),o+=s;else if(a=pl(e*r),a<=t+1&&(a=pl(t+2)),o=Oh(r,a)*Oh(n,e-a),o*=IR(pl(e),pl(a)),o===0)for(l=a-1;l>t;l--)o+=Oh(r,l)*Oh(n,e-l),o*=IR(pl(e),pl(l));else{for(s=o,i=o,l=a-1;l>t;l--)s*=(l+1)*n/((e-l)*r),o+=s;for(s=i,l=a+1;l<=e;l++)s*=(e-l+1)*r/(l*n),o+=s}return o}var YHt=XHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var qHt=fC;function ZHt(e,t,r,n,i,o,a){var s,l,u,c;if(s=qHt(e,t,r,n,o),a&&(a[1]=s),s/=e,s===0)return s;for(u=1,l=1,c=0;c<i-1;++c)l*=(e+t+c)*r/(e+c+1),u+=l;return s*=u,s}var KHt=ZHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var mw=Hy,JHt=cC,QHt=Mn,tXt=tr,yw=Ve,ag=er,Rh=Se,eXt=bu,OR=Su,RR=Bf,_w=tp,rXt=Df,DR={maxTerms:100};function nXt(e,t,r,n){var i=1-t,o=1;return a;function a(){var s=n/e;return e+=1,n*=i*r/o,o+=1,i+=1,s}}function iXt(e,t,r,n,i,o,a){var s,l,u,c,f,h,d,p;return i?(d=e+t,l=e+_w-.5,u=t+_w-.5,c=d+_w-.5,s=mw(d)/(mw(e)*mw(t)),f=Rh(c/u)*(t-.5),h=Rh(r*c/l)*e,f>RR&&f<OR&&h>RR&&h<OR?(e*t<u*10?s*=yw((t-.5)*QHt(e/u)):s*=ag(c/u,t-.5),s*=ag(r*c/l,e),s*=tXt(l/rXt),o&&(o[1]=s*ag(a,t))):(s=Rh(s)+f+h+(Rh(l)-1)/2,o&&(o[1]=yw(s+t*Rh(a))),s=yw(s))):s=ag(r,e),s<eXt?n:(p=nXt(e,t,r,s),DR.initialValue=n,JHt(p,DR))}var oXt=iXt,aXt=Zt,sXt=If,sg=Cn,NR=Mn,FR=eC,Dn=XU,bw=tr,lXt=Ve,Dh=er,uXt=wu,BR=Rs,lg=Nf,$R=bu,cXt=nBt,fXt=sC,fG=Ds,qa=mHt,ww=_Ht,hXt=fC,zR=zHt,dXt=YHt,Nh=KHt,eo=oXt,pXt=1/fG;function vXt(e,t,r,n,i,o,a,s){var l,u,c,f,h,d,p,v,g,m,y,_;if(_=1-e,p=s,v=s+a,o[v]=-1,aXt(e)||e<0||e>1)return o[p]=NaN,o[v]=NaN,o;if(n){if(t<0||r<0)return o[p]=NaN,o[v]=NaN,o;if(t===0){if(r===0)return o[p]=NaN,o[v]=NaN,o;if(r>0)return o[p]=i?0:1,o}else if(r===0&&t>0)return o[p]=i?1:0,o}else if(t<=0||r<=0)return o[p]=NaN,o[v]=NaN,o;return e===0?(t===1?o[v]=1:o[v]=t<1?lg/2:$R*2,i?(o[p]=n?1:Dn(t,r),o):(o[p]=0,o)):e===1?(r===1?o[v]=1:o[v]=r<1?lg/2:$R*2,i?o[p]=0:o[p]=n?1:Dn(t,r),o):t===.5&&r===.5?(o[v]=pXt*bw(_*e),y=FR(bw(i?_:e)),y/=fXt,n||(y*=fG),o[p]=y,o):(t===1&&(d=r,r=t,t=d,d=_,_=e,e=d,i=!i),r===1?t===1?(o[p]=i?_:e,o[v]=1,o):(o[v]=t*Dh(e,t-1),_<.5?y=i?-sXt(t*NR(-_)):lXt(t*NR(-_)):y=i?-(Dh(e,t)-1):Dh(e,t),n||(y/=t),o[p]=y,o):(BR(t,r)<=1?(e>.5&&(d=r,r=t,t=d,d=_,_=e,e=d,i=!i),uXt(t,r)<=1?t>=BR(.2,r)||Dh(e,t)<=.9?i?(c=-(n?1:Dn(t,r)),i=!1,c=-eo(t,r,e,c,n,o,_)):c=eo(t,r,e,0,n,o,_):(d=r,r=t,t=d,d=_,_=e,e=d,i=!i,_>=.3?i?(c=-(n?1:Dn(t,r)),i=!1,c=-eo(t,r,e,c,n,o,_)):c=eo(t,r,e,0,n,o,_):(n?u=1:u=ww(t+r,t,20),c=Nh(t,r,e,_,20,n,o),i?(c-=n?1:Dn(t,r),i=!1,c=-qa(t+20,r,e,_,c,u,n)):c=qa(t+20,r,e,_,c,u,n))):r<=1||e<.1&&Dh(r*e,t)<=.7?i?(c=-(n?1:Dn(t,r)),i=!1,c=-eo(t,r,e,c,n,o,_)):c=eo(t,r,e,0,n,o,_):(d=r,r=t,t=d,d=_,_=e,e=d,i=!i,_>=.3?i?(c=-(n?1:Dn(t,r)),i=!1,c=-eo(t,r,e,c,n,o,_)):c=eo(t,r,e,0,n,o,_):t>=15?i?(c=-(n?1:Dn(t,r)),i=!1,c=-qa(t,r,e,_,c,1,n)):c=qa(t,r,e,_,0,1,n):(n?u=1:u=ww(t+r,t,20),c=Nh(t,r,e,_,20,n,o),i?(c-=n?1:Dn(t,r),i=!1,c=-qa(t+20,r,e,_,c,u,n)):c=qa(t+20,r,e,_,c,u,n)))):(t<r?l=t-(t+r)*e:l=(t+r)*_-r,l<0&&(d=r,r=t,t=d,d=_,_=e,e=d,i=!i),r<40?sg(t)===t&&sg(r)===r&&t<cXt-100?(g=t-1,m=r+g,c=dXt(m,g,e,_),n||(c*=Dn(t,r))):r*e<=.7?i?(c=-(n?1:Dn(t,r)),i=!1,c=-eo(t,r,e,c,n,o,_)):c=eo(t,r,e,0,n,o,_):t>15?(m=sg(r),m===r&&(m-=1),f=r-m,n?u=1:u=ww(t+f,f,m),c=Nh(f,t,_,e,m,n),c=qa(t,f,e,_,c,1,n),c/=u):n?(m=sg(r),f=r-m,f<=0&&(m-=1,f+=1),c=Nh(f,t,_,e,m,n),c+=Nh(t,f,e,_,20,n),i&&(c-=1),c=qa(t+20,f,e,_,c,1,n),i&&(c=-c,i=!1)):c=zR(t,r,e,_,n,o):c=zR(t,r,e,_,n,o)),o[v]<0&&(o[v]=hXt(t,r,e,_,!0)),h=_*e,o[v]!==0&&(lg*h<o[v]?o[v]=lg/2:o[v]/=h),o[p]=i?(n?1:Dn(t,r))-c:c,o))}var hG=vXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gXt=hG;function mXt(e,t,r,n,i){return gXt(e,t,r,n,i,[0,0],1,0)}var yXt=mXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _Xt=dr,dG=yXt,bXt=hG;_Xt(dG,"assign",bXt);var pG=dG;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wXt=pG.assign;function SXt(e,t,r,n,i){var o=[0,0];return n=n!==!1,i=i===!0,wXt(e,t,r,n,i,o,1,0),o[0]}var TXt=SXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PXt=TXt,hC=PXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function EXt(e){var t,r,n;return e===0?-.0005087819496582806:(e<0?t=-e:t=e,t<=1?(r=-.0005087819496582806+e*(-.008368748197417368+e*(.03348066254097446+e*(-.012692614766297404+e*(-.03656379714117627+e*(.02198786811111689+e*(.008226878746769157+e*(-.005387729650712429+e*(0+e*0)))))))),n=1+e*(-.9700050433032906+e*(-1.5657455823417585+e*(1.5622155839842302+e*(.662328840472003+e*(-.7122890234154284+e*(-.05273963823400997+e*(.07952836873415717+e*(-.0023339375937419+e*.0008862163904564247))))))))):(e=1/e,r=0+e*(0+e*(-.005387729650712429+e*(.008226878746769157+e*(.02198786811111689+e*(-.03656379714117627+e*(-.012692614766297404+e*(.03348066254097446+e*(-.008368748197417368+e*-.0005087819496582806)))))))),n=.0008862163904564247+e*(-.0023339375937419+e*(.07952836873415717+e*(-.05273963823400997+e*(-.7122890234154284+e*(.662328840472003+e*(1.5622155839842302+e*(-1.5657455823417585+e*(-.9700050433032906+e*1))))))))),r/n)}var AXt=EXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function CXt(e){var t,r,n;return e===0?-.20243350835593876:(e<0?t=-e:t=e,t<=1?(r=-.20243350835593876+e*(.10526468069939171+e*(8.3705032834312+e*(17.644729840837403+e*(-18.851064805871424+e*(-44.6382324441787+e*(17.445385985570866+e*(21.12946554483405+e*-3.6719225470772936))))))),n=1+e*(6.242641248542475+e*(3.971343795334387+e*(-28.66081804998+e*(-20.14326346804852+e*(48.560921310873994+e*(10.826866735546016+e*(-22.643693341313973+e*1.7211476576120028)))))))):(e=1/e,r=-3.6719225470772936+e*(21.12946554483405+e*(17.445385985570866+e*(-44.6382324441787+e*(-18.851064805871424+e*(17.644729840837403+e*(8.3705032834312+e*(.10526468069939171+e*-.20243350835593876))))))),n=1.7211476576120028+e*(-22.643693341313973+e*(10.826866735546016+e*(48.560921310873994+e*(-20.14326346804852+e*(-28.66081804998+e*(3.971343795334387+e*(6.242641248542475+e*1)))))))),r/n)}var MXt=CXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function kXt(e){var t,r,n;return e===0?-.1311027816799519:(e<0?t=-e:t=e,t<=1?(r=-.1311027816799519+e*(-.16379404719331705+e*(.11703015634199525+e*(.38707973897260434+e*(.3377855389120359+e*(.14286953440815717+e*(.029015791000532906+e*(.0021455899538880526+e*(-6794655751811263e-22+e*(28522533178221704e-24+e*-681149956853777e-24))))))))),n=1+e*(3.4662540724256723+e*(5.381683457070069+e*(4.778465929458438+e*(2.5930192162362027+e*(.848854343457902+e*(.15226433829533179+e*(.011059242293464892+e*(0+e*(0+e*0)))))))))):(e=1/e,r=-681149956853777e-24+e*(28522533178221704e-24+e*(-6794655751811263e-22+e*(.0021455899538880526+e*(.029015791000532906+e*(.14286953440815717+e*(.3377855389120359+e*(.38707973897260434+e*(.11703015634199525+e*(-.16379404719331705+e*-.1311027816799519))))))))),n=0+e*(0+e*(0+e*(.011059242293464892+e*(.15226433829533179+e*(.848854343457902+e*(2.5930192162362027+e*(4.778465929458438+e*(5.381683457070069+e*(3.4662540724256723+e*1)))))))))),r/n)}var xXt=kXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function LXt(e){var t,r,n;return e===0?-.0350353787183178:(e<0?t=-e:t=e,t<=1?(r=-.0350353787183178+e*(-.0022242652921344794+e*(.018557330651423107+e*(.009508047013259196+e*(.0018712349281955923+e*(.00015754461742496055+e*(460469890584318e-20+e*(-2304047769118826e-25+e*26633922742578204e-28))))))),n=1+e*(1.3653349817554064+e*(.7620591645536234+e*(.22009110576413124+e*(.03415891436709477+e*(.00263861676657016+e*(7646752923027944e-20+e*(0+e*0)))))))):(e=1/e,r=26633922742578204e-28+e*(-2304047769118826e-25+e*(460469890584318e-20+e*(.00015754461742496055+e*(.0018712349281955923+e*(.009508047013259196+e*(.018557330651423107+e*(-.0022242652921344794+e*-.0350353787183178))))))),n=0+e*(0+e*(7646752923027944e-20+e*(.00263861676657016+e*(.03415891436709477+e*(.22009110576413124+e*(.7620591645536234+e*(1.3653349817554064+e*1)))))))),r/n)}var IXt=LXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function OXt(e){var t,r,n;return e===0?-.016743100507663373:(e<0?t=-e:t=e,t<=1?(r=-.016743100507663373+e*(-.0011295143874558028+e*(.001056288621524929+e*(.00020938631748758808+e*(14962478375834237e-21+e*(44969678992770644e-23+e*(4625961635228786e-24+e*(-2811287356288318e-29+e*9905570997331033e-32))))))),n=1+e*(.5914293448864175+e*(.1381518657490833+e*(.016074608709367652+e*(.0009640118070051656+e*(27533547476472603e-21+e*(282243172016108e-21+e*(0+e*0)))))))):(e=1/e,r=9905570997331033e-32+e*(-2811287356288318e-29+e*(4625961635228786e-24+e*(44969678992770644e-23+e*(14962478375834237e-21+e*(.00020938631748758808+e*(.001056288621524929+e*(-.0011295143874558028+e*-.016743100507663373))))))),n=0+e*(0+e*(282243172016108e-21+e*(27533547476472603e-21+e*(.0009640118070051656+e*(.016074608709367652+e*(.1381518657490833+e*(.5914293448864175+e*1)))))))),r/n)}var RXt=OXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_48_0/boost/math/special_functions/detail/erf_inv.hpp}. This implementation follows the original, but has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var DXt=Zt,VR=tr,UR=Se,NXt=Ne,FXt=Tr,BXt=AXt,$Xt=MXt,zXt=xXt,VXt=IXt,UXt=RXt,GXt=.08913147449493408,jXt=2.249481201171875,WXt=.807220458984375,HXt=.9399557113647461,XXt=.9836282730102539;function YXt(e){var t,r,n,i,o;return DXt(e)?NaN:e===0?NXt:e===2?FXt:e===1?0:e>2||e<0?NaN:(e>1?(t=-1,n=2-e):(t=1,n=e),e=1-n,e<=.5?(i=e*(e+10),o=BXt(e),t*(i*GXt+i*o)):n>=.25?(i=VR(-2*UR(n)),n-=.25,o=$Xt(n),t*(i/(jXt+o))):(n=VR(-UR(n)),n<3?(r=n-1.125,o=zXt(r),t*(WXt*n+o*n)):n<6?(r=n-3,o=VXt(r),t*(HXt*n+o*n)):(r=n-6,o=UXt(r),t*(XXt*n+o*n))))}var qXt=YXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZXt=qXt,ep=ZXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, long comment, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1995, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var KXt=Zt,GR=eC,JXt=tr,jR=IU,QXt=6123233995736766e-32;function tYt(e){var t;return KXt(e)?NaN:e<-1||e>1?NaN:e>.5?2*GR(JXt(.5-.5*e)):(t=jR-GR(e),t+=QXt,t+=jR,t)}var eYt=tYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rYt=eYt,nYt=rYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iYt=1.4142135623730951,dC=iYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function oYt(e){return e===0?.16666666666666666:.16666666666666666+e*.16666666666666666}var aYt=oYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function sYt(e){return e===0?.058333333333333334:.058333333333333334+e*(.06666666666666667+e*.008333333333333333)}var lYt=sYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function uYt(e){return e===0?.0251984126984127:.0251984126984127+e*(.026785714285714284+e*(.0017857142857142857+e*.0001984126984126984))}var cYt=uYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function fYt(e){return e===0?.012039792768959435:.012039792768959435+e*(.010559964726631394+e*(-.0011078042328042327+e*(.0003747795414462081+e*27557319223985893e-22)))}var hYt=fYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function dYt(e){return e===0?.003837005972422639:.003837005972422639+e*(.00610392115600449+e*(-.0016095979637646305+e*(.0005945867404200738+e*(-6270542728876062e-20+e*2505210838544172e-23))))}var pYt=dYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function vYt(e){return e===0?.0032177478835464946:.0032177478835464946+e*(.0010898206731540065+e*(-.0012579159844784845+e*(.0006908420797309686+e*(-.00016376804137220805+e*(154012654012654e-19+e*16059043836821613e-26)))))}var gYt=vYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function mYt(e){return e===0?.001743826229834001:.001743826229834001+e*(3353097688001788e-20+e*(-.0007624513544032393+e*(.0006451304695145635+e*(-.000249472580470431+e*(49255746366361444e-21+e*(-39851014346715405e-22+e*7647163731819816e-28))))))}var yYt=mYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _Yt(e){return e===0?.0009647274732138864:.0009647274732138864+e*(-.0003110108632631878+e*(-.00036307660358786886+e*(.0005140660578834113+e*(-.00029133414466938067+e*(9086710793521991e-20+e*(-15303004486655377e-21+e*(10914179173496788e-22+e*28114572543455206e-31)))))))}var bYt=_Yt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function wYt(e){return e===0?.0005422926281312969:.0005422926281312969+e*(-.0003694266780000966+e*(-.00010230378073700413+e*(.00035764655430568635+e*(-.00028690924218514614+e*(.00012645437628698076+e*(-33202652391372056e-21+e*(4890304529197534e-21+e*(-3123956959982987e-22+e*822063524662433e-32))))))))}var SYt=wYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var TYt=lC,PYt=Os,EYt=tr,AYt=Ds,CYt=aYt,MYt=lYt,kYt=cYt,xYt=hYt,LYt=pYt,IYt=gYt,OYt=yYt,RYt=bYt,DYt=SYt,NYt=0,ro=[1,0,0,0,0,0,0,0,0,0];function FYt(e,t){var r,n;return n=TYt(e/2,.5)*EYt(e*AYt)*(t-.5),r=1/e,ro[1]=CYt(r),ro[2]=MYt(r),ro[3]=kYt(r),ro[4]=xYt(r),ro[5]=LYt(r),ro[6]=IYt(r),ro[7]=OYt(r),ro[8]=RYt(r),ro[9]=DYt(r),NYt+n*PYt(ro,n*n)}var BYt=FYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var $Yt=lC,zYt=Os,WR=tr,VYt=er,UYt=Ds,Za=[0,0,0,0,0,0,0];function GYt(e,t){var r,n,i,o,a,s,l,u;return u=$Yt(e/2,.5)*WR(e*UYt)*t,o=e+2,a=e+4,s=e+6,Za[0]=1,Za[1]=-(e+1)/(2*o),o*=e+2,Za[2]=-e*(e+1)*(e+3)/(8*o*a),o*=e+2,Za[3]=-e*(e+1)*(e+5)*((3*e+7)*e-2)/(48*o*a*s),o*=e+2,a*=e+4,Za[4]=-e*(e+1)*(e+7)*(((((15*e+154)*e+465)*e+286)*e-336)*e+64)/(384*o*a*s*(e+8)),o*=e+2,Za[5]=-e*(e+1)*(e+3)*(e+9)*((((((35*e+452)*e+1573)*e+600)*e-2020)*e+928)*e-128)/(1280*o*a*s*(e+8)*(e+10)),o*=e+2,a*=e+4,s*=e+6,Za[6]=-e*(e+1)*(e+11)*(((((((((((945*e+31506)*e+425858)*e+2980236)*e+11266745)*e+20675018)*e+7747124)*e-22574632)*e-8565600)*e+18108416)*e-7099392)*e+884736)/(46080*o*a*s*(e+8)*(e+10)*(e+12)),l=WR(e),i=VYt(l*u,1/e),n=i*i,r=zYt(Za,n),r*=l,r/=i,-r}var jYt=GYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var HR=ep,WYt=If,XR=tr,HYt=er,XYt=sC,YR=dC;function YYt(e,t){var r,n,i,o,a,s,l;return e>1e20?-HR(2*t)*YR:(r=1/(e-.5),n=48/(r*r),i=((20700*r/n-98)*r-16)*r+96.36,o=((94.5/(n+i)-3)/n+1)*XR(r*XYt)*e,l=HYt(o*2*t,2/e),l>.05+r?(s=-HR(2*t)*YR,l=s*s,e<5&&(i+=.3*(e-4.5)*(s+.6)),i+=(((.05*o*s-5)*s-7)*s-2)*s+n,l=(((((.4*l+6.3)*l+36)*l+94.5)/i-l-3)/n+1)*s,l=WYt(r*l*l)):l=((1/(((e+6)/(e*l)-.089*o-.822)*(e+2)*3)+.5/(e+4))*l-1)*(e+1)/(e+2)+1/l,a=XR(e*l),-a)}var qYt=YYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var qR=ep,ZR=Cn,Sw=Rf,KR=jy,ZYt=nYt,ug=tr,KYt=de,JR=uC,JYt=er,QYt=Q0,QR=dC,tD=Ds,eD=BYt,cg=jYt,Tw=qYt,rD=268435456,tqt=1/3,eqt=2*53/3,rqt=.8549879733383485;function nqt(e,t,r){var n,i,o,a,s,l,u,c,f,h,d,p,v,g,m,y;if(s=0,t>r?(u=r,r=t,t=u,a=!0):a=!1,ZR(e)===e&&e<20)switch(i=Sw(1,eqt),ZR(e)){case 1:t===.5?s=0:s=-JR(tD*t)/QYt(tD*t);break;case 2:s=(2*t-1)/ug(2*t*r);break;case 4:l=4*t*r,o=ug(l),v=4*JR(ZYt(o)/3)/o,g=ug(v-4),s=t-.5<0?-g:g;break;case 6:if(t<1e-150)return(a?-1:1)*Tw(e,t);m=4*(t-t*t),y=JYt(m,tqt),p=6*(1+rqt*(1/y-1));do f=p*p,h=f*f,d=p*h,c=p,p=2*(8*m*d-270*f+2187)/(5*(4*m*h-216*p-243));while(KYt((p-c)/p)>i);p=ug(p-e),s=t-.5<0?-p:p;break;default:e>rD?s=qR(2*t)*QR:e<3?(n=.2742-e*.0242143,t>n?s=eD(e,t):s=cg(e,t)):(n=Sw(1,KR(e/-.654)),t>n?s=Tw(e,t):s=cg(e,t))}else e>rD?s=-qR(2*t)*QR:e<3?(n=.2742-e*.0242143,t>n?s=eD(e,t):s=cg(e,t)):(n=Sw(1,KR(e/-.654)),t>n?s=Tw(e,t):s=cg(e,t));return a?-s:s}var iqt=nqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var oqt=iqt;function aqt(e,t,r){var n,i,o,a;return i=t/2,o=1-i,n=e*2,a=oqt(n,i,o),r&&(r.value=a*a/(n+a*a)),n/(n+a*a)}var sqt=aqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var fg=Os,lqt=ep,nD=tr,uqt=Ve,jo=dC,ze=[0,0,0,0,0,0,0],Fh=[0,0,0,0];function cqt(e,t,r){var n,i,o,a,s,l,u;return n=lqt(2*r),n/=-nD(e/2),Fh[0]=n,l=t-e,a=l*l,s=a*l,ze[0]=-l*jo/2,ze[1]=(1-2*l)/8,ze[2]=-(l*jo/48),ze[3]=-1/192,ze[4]=-l*jo/3840,ze[5]=0,ze[6]=0,Fh[1]=fg(ze,n),ze[0]=l*jo*(3*l-2)/12,ze[1]=(20*a-12*l+1)/128,ze[2]=l*jo*(20*l-1)/960,ze[3]=(16*a+30*l-15)/4608,ze[4]=l*jo*(21*l+32)/53760,ze[5]=(-(32*a)+63)/368640,ze[6]=-l*jo*(120*l+17)/25804480,Fh[2]=fg(ze,n),ze[0]=l*jo*(-75*a+80*l-16)/480,ze[1]=(-1080*s+868*a-90*l-45)/9216,ze[2]=l*jo*(-1190*a+84*l+373)/53760,ze[3]=(-2240*s-2508*a+2100*l-165)/368640,ze[4]=0,ze[5]=0,ze[6]=0,Fh[3]=fg(ze,n),o=fg(Fh,1/e),i=o*o,u=-uqt(-i/2),i===0?.5:(1+o*nD((1+u)/i))/2}var fqt=cqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var iD=Se,hqt=Nf,hg=hqt/4;function dqt(e,t){return r;function r(n){var i,o,a;return a=1-n,a===0?[-hg,-hg]:n===0?[-hg,-hg]:(o=iD(n)+t*iD(a)+e,i=1/n-t/a,[o,i])}}var vG=dqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pqt=Zt;function vqt(e){return e===0||pqt(e)?e:e<0?-1:1}var gqt=vqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mqt=gqt,gG=mqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/tools/roots.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var oD=gG,dg=de,yqt=Rf,Pw=Nf;function _qt(e,t,r,n,i,o){var a,s,l,u,c,f,h,d,p,v;p=0,a=0,c=t,u=yqt(1,1-i),h=Pw,s=Pw,l=Pw,f=o;do{if(a=p,l=s,s=h,d=e(c),p=d[0],v=d[1],f-=1,p===0)break;if(v===0?(a===0&&(c===r?t=n:t=r,a=e(t),h=t-c),oD(a)*oD(p)<0?h<0?h=(c-r)/2:h=(c-n)/2:h<0?h=(c-n)/2:h=(c-r)/2):h=p/v,dg(h*2)>dg(l)&&(h=h>0?(c-r)/2:(c-n)/2),t=c,c-=h,c<=r){if(h=.5*(t-r),c=t-h,c===r||c===n)break}else if(c>=n&&(h=.5*(t-n),c=t-h,c===r||c===n))break;h>0?n=t:r=t}while(f&&dg(c*u)<dg(h));return c}var mG=_qt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function bqt(e){return e===0?-1:-1+e*(-5+e*5)}var wqt=bqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Sqt(e){return e===0?1:1+e*(21+e*(-69+e*46))}var Tqt=Sqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Pqt(e){return e===0?7:7+e*(-2+e*(33+e*(-62+e*31)))}var Eqt=Pqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Aqt(e){return e===0?25:25+e*(-52+e*(-17+e*(88+e*(-115+e*46))))}var Cqt=Aqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Mqt(e){return e===0?7:7+e*(12+e*(-78+e*52))}var kqt=Mqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function xqt(e){return e===0?-7:-7+e*(2+e*(183+e*(-370+e*185)))}var Lqt=xqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Iqt(e){return e===0?-533:-533+e*(776+e*(-1835+e*(10240+e*(-13525+e*5410))))}var Oqt=Iqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Rqt(e){return e===0?-1579:-1579+e*(3747+e*(-3372+e*(-15821+e*(45588+e*(-45213+e*15071)))))}var Dqt=Rqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Nqt(e){return e===0?449:449+e*(-1259+e*(-769+e*(6686+e*(-9260+e*3704))))}var Fqt=Nqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Bqt(e){return e===0?63149:63149+e*(-151557+e*(140052+e*(-727469+e*(2239932+e*(-2251437+e*750479)))))}var $qt=Bqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zqt(e){return e===0?29233:29233+e*(-78755+e*(105222+e*(146879+e*(-1602610+e*(3195183+e*(-2554139+e*729754))))))}var Vqt=zqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Uqt(e){return e===0?1:1+e*(-13+e*13)}var Gqt=Uqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jqt(e){return e===0?1:1+e*(21+e*(-69+e*46))}var Wqt=jqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Qu=Os,Hqt=ep,Xqt=de,Yqt=Ve,aD=Se,qqt=tr,Zqt=Q0,Kqt=uC,Jqt=vG,Qqt=mG,tZt=wqt,eZt=Tqt,rZt=Eqt,nZt=Cqt,iZt=kqt,oZt=Lqt,aZt=Oqt,sZt=Dqt,lZt=Fqt,uZt=$qt,cZt=Vqt,fZt=Gqt,hZt=Wqt,ee=[0,0,0,0,0,0],Bh=[0,0,0,0];function dZt(e,t,r){var n,i,o,a,s,l,u,c,f,h,d,p,v,g,m,y,_,b,T,S;return s=Hqt(2*e)/-qqt(t/2),b=Zqt(r),_=Kqt(r),Bh[0]=s,m=b*b,y=_*_,v=b*_,p=v*v,d=p*v,h=p*p,f=p*d,c=d*d,u=h*d,ee[0]=(2*m-1)/(3*v),ee[1]=-tZt(m)/(36*p),ee[2]=eZt(m)/(1620*d),ee[3]=rZt(m)/(6480*h),ee[4]=nZt(m)/(90720*f),ee[5]=0,Bh[1]=Qu(ee,s),ee[0]=-iZt(m)/(405*d),ee[1]=oZt(m)/(2592*h),ee[2]=-aZt(m)/(204120*f),ee[3]=-sZt(m)/(2099520*c),ee[4]=0,ee[5]=0,Bh[2]=Qu(ee,s),ee[0]=lZt(m)/(102060*f),ee[1]=-uZt(m)/(20995200*c),ee[2]=cZt(m)/(36741600*u),ee[3]=0,ee[4]=0,ee[5]=0,Bh[3]=Qu(ee,s),l=Qu(Bh,1/t),o=_/b,o*=o,g=-(l*l)/(2*m)+aD(m)+y*aD(y)/m,Xqt(l)<.7?(ee[0]=m,ee[1]=v,ee[2]=(1-2*m)/3,ee[3]=fZt(m)/(36*v),ee[4]=hZt(m)/(270*p),ee[5]=0,S=Qu(ee,l)):(T=Yqt(g),ee[0]=T,ee[1]=o,ee[2]=0,ee[3]=3*o*(3*o+1)/6,ee[4]=4*o*(4*o+1)*(4*o+2)/24,ee[5]=5*o*(5*o+1)*(5*o+2)*(5*o+3)/120,S=Qu(ee,T),(S-m)*l<0&&(S=1-S)),l<0?(i=0,n=m):(i=m,n=1),(S<i||S>n)&&(S=(i+n)/2),a=Jqt(-g,o),S=Qqt(a,S,i,n,32,100),S}var pZt=dZt,_1={exports:{}},VT={exports:{}},y0=1e3,_0=y0*60,b0=_0*60,w0=b0*24,vZt=w0*365.25,gZt=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return mZt(e);if(r==="number"&&isNaN(e)===!1)return t.long?_Zt(e):yZt(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function mZt(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!!t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*vZt;case"days":case"day":case"d":return r*w0;case"hours":case"hour":case"hrs":case"hr":case"h":return r*b0;case"minutes":case"minute":case"mins":case"min":case"m":return r*_0;case"seconds":case"second":case"secs":case"sec":case"s":return r*y0;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function yZt(e){return e>=w0?Math.round(e/w0)+"d":e>=b0?Math.round(e/b0)+"h":e>=_0?Math.round(e/_0)+"m":e>=y0?Math.round(e/y0)+"s":e+"ms"}function _Zt(e){return pg(e,w0,"day")||pg(e,b0,"hour")||pg(e,_0,"minute")||pg(e,y0,"second")||e+" ms"}function pg(e,t,r){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}(function(e,t){t=e.exports=i.debug=i.default=i,t.coerce=l,t.disable=a,t.enable=o,t.enabled=s,t.humanize=gZt,t.names=[],t.skips=[],t.formatters={};var r;function n(u){var c=0,f;for(f in u)c=(c<<5)-c+u.charCodeAt(f),c|=0;return t.colors[Math.abs(c)%t.colors.length]}function i(u){function c(){if(!!c.enabled){var f=c,h=+new Date,d=h-(r||h);f.diff=d,f.prev=r,f.curr=h,r=h;for(var p=new Array(arguments.length),v=0;v<p.length;v++)p[v]=arguments[v];p[0]=t.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");var g=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,function(y,_){if(y==="%%")return y;g++;var b=t.formatters[_];if(typeof b=="function"){var T=p[g];y=b.call(f,T),p.splice(g,1),g--}return y}),t.formatArgs.call(f,p);var m=c.log||t.log||console.log.bind(console);m.apply(f,p)}}return c.namespace=u,c.enabled=t.enabled(u),c.useColors=t.useColors(),c.color=n(u),typeof t.init=="function"&&t.init(c),c}function o(u){t.save(u),t.names=[],t.skips=[];for(var c=(typeof u=="string"?u:"").split(/[\s,]+/),f=c.length,h=0;h<f;h++)!c[h]||(u=c[h].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.substr(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function a(){t.enable("")}function s(u){var c,f;for(c=0,f=t.skips.length;c<f;c++)if(t.skips[c].test(u))return!1;for(c=0,f=t.names.length;c<f;c++)if(t.names[c].test(u))return!0;return!1}function l(u){return u instanceof Error?u.stack||u.message:u}})(VT,VT.exports);(function(e,t){t=e.exports=VT.exports,t.log=i,t.formatArgs=n,t.save=o,t.load=a,t.useColors=r,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:s(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function r(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(l){try{return JSON.stringify(l)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}};function n(l){var u=this.useColors;if(l[0]=(u?"%c":"")+this.namespace+(u?" %c":" ")+l[0]+(u?"%c ":" ")+"+"+t.humanize(this.diff),!!u){var c="color: "+this.color;l.splice(1,0,c,"color: inherit");var f=0,h=0;l[0].replace(/%[a-zA-Z%]/g,function(d){d!=="%%"&&(f++,d==="%c"&&(h=f))}),l.splice(h,0,c)}}function i(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(l){try{l==null?t.storage.removeItem("debug"):t.storage.debug=l}catch{}}function a(){var l;try{l=t.storage.debug}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=process.env.DEBUG),l}t.enable(a());function s(){try{return window.localStorage}catch{}}})(_1,_1.exports);/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bZt=34028234663852886e22,Yy=bZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wZt=_1.exports,sD=uG,SZt=de,TZt=Ve,lD=Se,PZt=Yy,uD=wZt("gammaincinv:higher_newton");function EZt(e,t,r,n,i,o,a,s){var l,u,c,f,h,d,p,v,g,m,y,_,b,T;T=e,y=1,_=1,d=t*t,u=e;do{if(T=e,p=T*T,r===0){if(l=(1-t)*lD(T)+T+o,l>lD(PZt))return uD("Warning: overflow problems in one or more steps of the computation. The initial approximation to the root is returned."),u;b=TZt(l)}else b=-a*T;s?(v=sD(T,t,!0,!1),c=-b*(v-n)):(g=sD(T,t,!0,!0),c=b*(g-i)),b=c,n>1e-120||_>1?(f=.5*(T-t+1)/T,h=(2*p-4*T*t+4*T+2*d-3*t+1)/p,h/=6,e=T+b*(1+b*(f+b*h))):e=T+b,y=SZt(T/e-1),_+=1,T=e,T<0&&(T=u,_=100)}while(y>2e-14&&_<35);return(y>2e-14||_>99)&&uD("Warning: the number of iterations in the Newton method reached the upper limit N=35. The last value obtained for the root is given as output."),m=T||0,m}var AZt=EZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function CZt(e){return e===0?0:0+e*(1+e*(1+e*(1.5+e*(2.6666666666666665+e*(5.208333333333333+e*10.8)))))}var MZt=CZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function kZt(e){return e===0?1:1+e*(1+e*(.3333333333333333+e*(.027777777777777776+e*(-.003703703703703704+e*(.0002314814814814815+e*5878894767783657e-20)))))}var xZt=kZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var LZt=de,IZt=Ve,cD=Se,OZt=Os,RZt=MZt,DZt=xZt,NZt=1e-8,FZt=.08333333333333333,BZt=.008333333333333333,tc=[1,0,0,0,0,0];function $Zt(e){var t,r,n,i,o,a,s,l,u;if(u=e*e*.5,e===0?o=0:e<-1?(l=IZt(-1-u),o=RZt(l)):e<1?(l=e,o=DZt(l)):(l=11+u,a=cD(l),o=l+a,l=1/l,t=a*a,r=t*a,n=r*a,i=n*a,tc[1]=(2-a)*.5,tc[2]=(-9*a+6+2*t)/6,tc[3]=-(3*r+36*a-22*t-12)*FZt,tc[4]=(60+350*t-300*a-125*r+12*n)/60,tc[5]=-(-120-274*n+900*a-1700*t+1125*r+20*i)*BZt,o+=a*l*OZt(tc,l)),l=1,e>-3.5&&e<-.03||e>.03&&e<40){l=1,s=o;do o=s*(u+cD(s))/(s-1),l=LZt(s/o-1),s=o;while(l>NZt)}return o}var yG=$Zt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zZt=.9189385332046728,_G=zZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var VZt=[1.9963790515900766,-.0017971032528832887,13129285796384672e-21,-2340875228178749e-22,72291210671127e-22,-3280997607821e-22,19875070901e-21,-1509214183e-21,1375340084e-22,-145728923e-22,17532367e-22,-2351465e-22,346551e-22,-55471e-22,9548e-22,-1748e-22,332e-22,-58e-22];function UZt(e,t){var r,n,i,o,a;n=0,i=0,r=t+t,a=e;do o=i,i=n,n=r*i-o+VZt[a],a-=1;while(a>=0);return(n-o)/2}var GZt=UZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jZt(e){return e===0?.025721014990011306:.025721014990011306+e*(.08247596616699963+e*(-.0025328157302663564+e*(.0006099292666946337+e*(-.00033543297638406+e*.000250505279903))))}var WZt=jZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function HZt(e){return e===0?.08333333333333333:.08333333333333333+e*(-.002777777777777778+e*(.0007936507936507937+e*-.0005952380952380953))}var XZt=HZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ew=Ff,vg=Se,Aw=_G,YZt=Xy,qZt=Yy,ZZt=GZt,KZt=WZt,JZt=XZt,QZt=.30865217988013566;function tKt(e){var t;return e<YZt?qZt:e<1?Ew(e+1)-(e+.5)*vg(e)+e-Aw:e<2?Ew(e)-(e-.5)*vg(e)+e-Aw:e<3?Ew(e-1)-(e-.5)*vg(e)+e-Aw+vg(e-1):e<12?(t=18/(e*e)-1,ZZt(17,t)/(12*e)):(t=1/(e*e),e<1e3?KZt(t)/(QZt+t)/e:JZt(t)/e)}var eKt=tKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fD=Ve,rKt=Lo,nKt=Se,iKt=Yy,oKt=Wy,aKt=eKt;function sKt(e){return e>=3?fD(aKt(e)):e>0?rKt(e)/(fD(-e+(e-.5)*nKt(e))*oKt):iKt}var lKt=sKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function uKt(e){var t,r,n;return e===0?-.3333333333438:(e<0?t=-e:t=e,t<=1?(r=-.3333333333438+e*(-.2070740359969+e*(-.05041806657154+e*(-.004923635739372+e*-4293658292782e-17))),n=1+e*(.7045554412463+e*(.2118190062224+e*(.03048648397436+e*.001605037988091)))):(e=1/e,r=-4293658292782e-17+e*(-.004923635739372+e*(-.05041806657154+e*(-.2070740359969+e*-.3333333333438))),n=.001605037988091+e*(.03048648397436+e*(.2118190062224+e*(.7045554412463+e*1)))),r/n)}var cKt=uKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fKt=de,hKt=Se,dKt=yG,pKt=cKt;function vKt(e){var t;return fKt(e)<1?pKt(e):(t=dKt(e),hKt(e/(t-1))/e)}var gKt=vKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function mKt(e){var t,r,n;return e===0?-.0172847633523:(e<0?t=-e:t=e,t<=1?(r=-.0172847633523+e*(-.0159372646475+e*(-.00464910887221+e*(-.00060683488776+e*-614830384279e-17))),n=1+e*(.764050615669+e*(.297143406325+e*(.0579490176079+e*.00574558524851)))):(e=1/e,r=-614830384279e-17+e*(-.00060683488776+e*(-.00464910887221+e*(-.0159372646475+e*-.0172847633523))),n=.00574558524851+e*(.0579490176079+e*(.297143406325+e*(.764050615669+e*1)))),r/n)}var yKt=mKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _Kt(e){var t,r,n;return e===0?-.0172839517431:(e<0?t=-e:t=e,t<=1?(r=-.0172839517431+e*(-.0146362417966+e*(-.00357406772616+e*(-.000391032032692+e*249634036069e-17))),n=1+e*(.690560400696+e*(.249962384741+e*(.0443843438769+e*.00424073217211)))):(e=1/e,r=249634036069e-17+e*(-.000391032032692+e*(-.00357406772616+e*(-.0146362417966+e*-.0172839517431))),n=.00424073217211+e*(.0443843438769+e*(.249962384741+e*(.690560400696+e*1)))),r/n)}var bKt=_Kt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function wKt(e){var t,r,n;return e===0?.99994466948:(e<0?t=-e:t=e,t<=1?(r=.99994466948+e*(104.649839762+e*(857.204033806+e*(731.901559577+e*45.5174411671))),n=1+e*(104.526456943+e*(823.313447808+e*(3119.93802124+e*3970.03311219)))):(e=1/e,r=45.5174411671+e*(731.901559577+e*(857.204033806+e*(104.649839762+e*.99994466948))),n=3970.03311219+e*(3119.93802124+e*(823.313447808+e*(104.526456943+e*1)))),r/n)}var SKt=wKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var TKt=Se,PKt=yKt,EKt=bKt,AKt=SKt;function CKt(e){var t,r;return e<-5?(r=e*e,t=TKt(-e),(12-r-6*(t*t))/(12*r*e)):e<-2?PKt(e):e<2?EKt(e):e<1e3?(r=1/e,AKt(e)/(-12*e)):-1/(12*e)}var MKt=CKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function kKt(e){var t,r,n;return e===0?.0495346498136:(e<0?t=-e:t=e,t<=1?(r=.0495346498136+e*(.0299521337141+e*(.00688296911516+e*(.000512634846317+e*-201411722031e-16))),n=1+e*(.759803615283+e*(.261547111595+e*(.0464854522477+e*.00403751193496)))):(e=1/e,r=-201411722031e-16+e*(.000512634846317+e*(.00688296911516+e*(.0299521337141+e*.0495346498136))),n=.00403751193496+e*(.0464854522477+e*(.261547111595+e*(.759803615283+e*1)))),r/n)}var xKt=kKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function LKt(e){var t,r,n;return e===0?.00452313583942:(e<0?t=-e:t=e,t<=1?(r=.00452313583942+e*(.00120744920113+e*(-789724156582e-16+e*(-504476066942e-16+e*-535770949796e-17))),n=1+e*(.912203410349+e*(.405368773071+e*(.0901638932349+e*.00948935714996)))):(e=1/e,r=-535770949796e-17+e*(-504476066942e-16+e*(-789724156582e-16+e*(.00120744920113+e*.00452313583942))),n=.00948935714996+e*(.0901638932349+e*(.405368773071+e*(.912203410349+e*1)))),r/n)}var IKt=LKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function OKt(e){var t,r,n;return e===0?.00439937562904:(e<0?t=-e:t=e,t<=1?(r=.00439937562904+e*(.000487225670639+e*(-.000128470657374+e*(529110969589e-17+e*15716677175e-17))),n=1+e*(.794435257415+e*(.333094721709+e*(.0703527806143+e*.00806110846078)))):(e=1/e,r=15716677175e-17+e*(529110969589e-17+e*(-.000128470657374+e*(.000487225670639+e*.00439937562904))),n=.00806110846078+e*(.0703527806143+e*(.333094721709+e*(.794435257415+e*1)))),r/n)}var RKt=OKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function DKt(e){var t,r,n;return e===0?-.0011481191232:(e<0?t=-e:t=e,t<=1?(r=-.0011481191232+e*(-.112850923276+e*(1.51623048511+e*(-.218472031183+e*.0730002451555))),n=1+e*(14.2482206905+e*(69.7360396285+e*(218.938950816+e*277.067027185)))):(e=1/e,r=.0730002451555+e*(-.218472031183+e*(1.51623048511+e*(-.112850923276+e*-.0011481191232))),n=277.067027185+e*(218.938950816+e*(69.7360396285+e*(14.2482206905+e*1)))),r/n)}var NKt=DKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function FKt(e){var t,r,n;return e===0?-.000145727889667:(e<0?t=-e:t=e,t<=1?(r=-.000145727889667+e*(-.290806748131+e*(-13.308504545+e*(199.722374056+e*-11.4311378756))),n=1+e*(139.612587808+e*(2189.01116348+e*(7115.24019009+e*45574.6081453)))):(e=1/e,r=-11.4311378756+e*(199.722374056+e*(-13.308504545+e*(-.290806748131+e*-.000145727889667))),n=45574.6081453+e*(7115.24019009+e*(2189.01116348+e*(139.612587808+e*1)))),r/n)}var BKt=FKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hD=Se,$Kt=xKt,zKt=IKt,VKt=RKt,UKt=NKt,GKt=BKt;function jKt(e){var t,r;return e<-8?(t=e*e,r=hD(-e)/e,(-30+e*r*(6*t*r*r-12+t))/(12*e*t*t)):e<-4?$Kt(e)/(e*e):e<-2?zKt(e):e<2?VKt(e):e<10?(t=1/e,UKt(t)/(e*e)):e<100?(t=1/e,GKt(t)/(e*e)):-hD(e)/(12*e*e*e)}var WKt=jKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var HKt=_1.exports,dD=Os,li=Ff,XKt=ep,pD=Lo,gg=tr,vD=de,ec=Ve,YKt=Rs,qKt=er,Nn=Se,ZKt=Wy,KKt=Yy,JKt=iG,QKt=AZt,gD=yG,mD=lKt,tJt=gKt,eJt=MKt,rJt=WKt,nJt=HKt("gammaincinv:compute"),Ka=.5,Cw=.3333333333333333,iJt=.25,yD=.2,_D=.16666666666666666,oJt=.08333333333333333,aJt=.041666666666666664,Fn=[0,0,0,0,0];function sJt(e,t,r){var n,i,o,a,s,l,u,c,f,h,d,p,v,g,m,y,_,b,T,S,P,C,A,M,k,O,F,z,R,j,Z,q,tt,Pt,Ot,bt,wt,Ht,Y,nt,K,dt,St,At;if(t<Ka?(a=!0,s=t,dt=-1):(a=!1,s=r,dt=1),Y=0,vD(e-1)<1e-4&&(nt=0,a?t<.001?(q=t*t,z=q*t,Z=z*t,S=Z*t,T=S*t,P=t+q*Ka+z*Cw+Z*iJt+S*yD+T*_D):P=-Nn(1-t):P=-Nn(r),e===1?(Y=2,Pt=P):(o=li(e),Y=1)),r<1e-30&&e<Ka&&(nt=0,P=-Nn(r*pD(e))+(e-1)*Nn(-Nn(r*pD(e))),Y=1,o=li(e)),e>1&&e<500&&t<1e-80){for(nt=0,l=1/e,n=1/(e+1),P=(li(e+1)+Nn(t))*l,P=ec(P),g=P,Ht=0;Ht<10;Ht++)P=g*ec(P*l)*qKt(1-P*n,l);Y=1,o=li(e)}if(u=1/e*(Nn(t)+li(e+1)),u<Nn(yD*(1+e))&&Y===0&&(K=ec(u),nt=0,C=e*e,tt=C*e,R=tt*e,m=e+1,d=m*m,h=m*d,f=d*d,y=e+2,c=y*y,_=e+3,Fn[0]=1,Fn[1]=1/m,Fn[2]=Ka*(3*e+5)/(d*y),Fn[3]=Cw*(31+8*C+33*e)/(h*y*_),Fn[4]=aJt*(2888+1179*tt+125*R+3971*C+5661*e)/(f*c*_*(e+4)),P=K*dD(Fn,K),o=li(e),Y=1),e<10&&Y===0&&(p=gg(e)/(mD(e)*ZKt),v=YKt(.02,p),r<v&&(nt=0,bt=1-e,O=bt*bt,F=O*bt,b=gg(-2/e*Nn(r/p)),P=e*gD(b),wt=Nn(P),P>5?(A=wt*wt,M=A*wt,k=M*wt,K=1/P,Fn[0]=wt-1,Fn[1]=(3*bt-2*bt*wt+A-2*wt+2)*Ka,Fn[2]=(24*bt*wt-11*O-24*bt-6*A+12*wt-12-9*bt*A+6*O*wt+2*M)*_D,Fn[3]=(-12*F*wt+8.04*bt*A-114*O*wt+(72+36*A)+(3*k-72*wt+162)*(bt-168*bt*wt)-(12*M+25*F)-(22*bt*M+36*O*A+120*O))*oJt,Fn[4]=0,P=P-wt+bt*K*dD(Fn,K)):(K=1/P,A=wt*wt,Ot=wt-1,St=wt-bt*K*Ot,St<P&&(P-=St)),o=li(e),Y=1)),vD(s-Ka)<1e-5&&Y===0&&(nt=0,l=1/e,P=e-Cw+(.019753086419753086+.007211444248481286*l)*l,o=li(e),Y=1),e<1&&Y===0&&(nt=0,a?P=ec(1/e*(Nn(s)+li(e+1))):P=ec(1/e*(Nn(1-s)+li(e+1))),o=li(e),Y=1),Y===0)if(nt=1,l=1/e,K=XKt(2*s),b=dt*K/gg(e*Ka),K<KKt)b+=(tJt(b)+(eJt(b)+rJt(b)*l)*l)*l,P=e*gD(b),At=b,j=-gg(e/JKt)*ec(-Ka*e*At*At)/mD(e),i=1/j;else return nJt("Warning: Overflow problems in one or more steps of the computation."),NaN;return Y<2&&(Pt=QKt(P,e,nt,t,r,o,i,a)),Pt}var lJt=sJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bD=Zt,uJt=Xy,wD=Ne,SD=lJt;function cJt(e,t,r){return bD(e)||bD(t)?NaN:t<uJt?NaN:e>1||e<0?NaN:r===!0?e===0?wD:e===1?0:SD(t,1-e,e):e===0?0:e===1?wD:SD(t,e,1-e)}var fJt=cJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hJt=fJt,dJt=hJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pJt=5e-324,vJt=pJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var TD=dJt,PD=Se,gJt=tr,mJt=vJt,yJt=vG,_Jt=mG;function bJt(e,t,r,n){var i,o,a,s,l,u,c,f,h,d,p,v,g,m,y,_,b,T,S,P,C,A,M,k,O,F,z,R,j,Z;return r<n?l=TD(r,t,!0):l=TD(n,t,!1),l/=e,m=t/e,R=gJt(1+m),T=R*R,S=T*R,P=T*T,C=S*T,A=S*S,M=P*S,k=P*P,O=C*P,c=C*C,z=l-m,y=z*z,_=y*z,b=y*y,F=R+1,f=F*F,h=F*f,d=f*f,p=(R+2)*(R-1)/(3*R),p+=(S+9*T+21*R+5)*z/(36*T*F),p-=(P-13*S+69*T+167*R+46)*y/(1620*f*S),p-=(7*C+21*P+70*S+26*T-93*R-31)*_/(6480*h*P),p-=(75*A+202*C+188*P-888*S-1345*T+118*R+138)*b/(272160*d*C),v=(28*P+131*S+402*T+581*R+208)*(R-1)/(1620*F*S),v-=(35*A-154*C-623*P-1636*S-3983*T-3514*R-925)*z/(12960*f*P),v-=(2132*M+7915*A+16821*C+35066*P+87490*S+141183*T+95993*R+21640)*y/(816480*C*h),v-=(11053*k+53308*M+117010*A+163924*C+116188*P-258428*S-677042*T-481940*R-105497)*_/(14696640*d*A),g=-((3592*M+8375*A-1323*C-29198*P-89578*S-154413*T-116063*R-29632)*(R-1))/(816480*C*f),g-=(442043*O+2054169*k+3803094*M+3470754*A+2141568*C-2393568*P-19904934*S-34714674*T-23128299*R-5253353)*z/(146966400*A*h),g-=(116932*c+819281*O+2378172*k+4341330*M+6806004*A+10622748*C+18739500*P+30651894*S+30869976*T+15431867*R+2919016)*y/(146966400*d*M),u=l+p/e+v/(e*e)+g/(e*e*e),u<=0&&(u=mJt),j=u-m*PD(u)+(1+m)*PD(1+m)-m,i=1/(1+m),a=u<m?i:0,s=u<m?1:i,Z=(a+s)/2,o=yJt(j,m),_Jt(o,Z,a,s,32,100)}var wJt=bJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/tools/roots.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var rr=de,SJt=Rf,Mw=gG,TJt=wu,kw=Nf;function PJt(e,t,r,n,i,o){var a,s,l,u,c,f,h,d,p,v,g,m,y,_,b,T;_=0,s=!1,f=t,c=SJt(1,1-i),p=TJt(1e7*t,1e7),h=0,l=p,u=p,d=o;do{if(h=_,u=l,l=p,y=e(f),_=y[0],b=y[1],T=y[2],d-=1,_===0)break;if(b===0?(h===0&&(f===r?t=n:t=r,h=e(t),p=t-f),Mw(h)*Mw(_)<0?p<0?p=(f-r)/2:p=(f-n)/2:p<0?p=(f-n)/2:p=(f-r)/2):T===0?p=_/b:(v=2*_,m=2*b-_*(T/b),rr(m)<1&&rr(v)>=rr(m)*kw?p=_/b:p=v/m,p*b/_<0&&(p=_/b,rr(p)>2*rr(t)&&(p=(p<0?-1:1)*2*rr(t)))),a=rr(p/u),a>.8&&a<2&&(p=p>0?(f-r)/2:(f-n)/2,rr(p)>f&&(p=Mw(p)*f),u=p*3),t=f,f-=p,f<r){if(rr(r)<1&&rr(f)>1&&kw/rr(f)<rr(r)?g=1e3:g=f/r,rr(g)<1&&(g=1/g),!s&&g>0&&g<3)p=.99*(t-r),f=t-p,s=!0;else if(p=(t-r)/2,f=t-p,f===r||f===n)break}else if(f>n){if(rr(n)<1&&rr(f)>1&&kw/rr(f)<rr(n)?g=1e3:g=f/n,rr(g)<1&&(g=1/g),!s&&g>0&&g<3)p=.99*(t-n),f=t-p,s=!0;else if(p=(t-n)/2,f=t-p,f===r||f===n)break}p>0?n=t:r=t}while(d&&rr(f*c)<rr(p));return f}var EJt=PJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var AJt=pG.assign,CJt=de,MJt=Nf,xw=bu;function kJt(e,t,r,n){return i;function i(o){var a,s,l,u,c;return c=1-o,a=[0,0],AJt(o,e,t,!0,n,a,1,0),u=a[0]-r,s=a[1],n&&(s=-s),c===0&&(c=xw*64),o===0&&(o=xw*64),l=s*(-(c*e)+(t-2)*o+1),CJt(l)<c*o*MJt&&(l/=c*o),n&&(l=-l),s===0&&(s=(n?-1:1)*xw*64),[u,s,l]}}var xJt=kJt,LJt=Os,ED=hC,Lw=If,AD=Mn,IJt=eC,rc=XU,CD=tr,OJt=de,MD=Ve,no=er,kD=Q0,RJt=wu,DJt=Rs,xD=Se,Iw=bu,LD=sC,ID=Ta,NJt=sqt,FJt=fqt,BJt=pZt,$Jt=wJt,zJt=EJt,VJt=xJt,UJt=32,GJt=1e3,vl=[0,0,0,0,0];function jJt(e,t,r,n){var i,o,a,s,l,u,c,f,h,d,p,v,g,m,y,_,b,T,S,P,C,A,M,k,O,F,z,R,j;if(o=!1,n===0)return[1,0];if(r===0)return[0,1];if(e===1){if(t===1)return[r,1-r];v=t,t=e,e=v,v=n,n=r,r=v,o=!0}if(R=0,s=0,u=1,e===.5){if(t===.5)return R=kD(r*LD),R*=R,j=kD(n*LD),j*=j,[R,j];t>.5&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o)}if(t===.5&&e>=.5&&r!==1)C={},R=NJt(e,r,C),j=C.value;else{if(t===1)return r<n?e>1?(R=no(r,1/e),j=-Lw(xD(r)/e)):(R=no(r,1/e),j=1-R):(R=MD(AD(-n)/e),j=-Lw(AD(-n)/e)),o&&(v=j,j=R,R=v),[R,j];if(e+t>5)r>.5&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o),h=DJt(e,t),f=RJt(e,t),CD(h)>f-h&&h>5?(R=FJt(e,t,r),j=1-R):(O=e+t,l=IJt(CD(e/O)),a=h/O,a>=.2&&a<=.8&&O>=10?(p=no(r,1/e),p<.0025&&e+t<200?R=p*no(e*rc(e,t),1/e):R=BJt(r,O,l),j=1-R):(e<t&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o),d=0,t<2&&(d=rc(e,t)),d===0?j=1:(j=no(t*n*d,1/t),R=1-j)),j>1e-5&&(R=$Jt(e,t,r,n),j=1-R));else if(e<1&&t<1){if(P=(1-e)/(2-e-t),_=ED(P,e,t)-r,OJt(_)/r<ID*3)return o?[1-P,P]:[P,1-P];_<0&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o,P=1-P),S=no(e*r*rc(e,t),1/e),R=S/(1+S),j=1/(1+S),R>P&&(R=P),u=P}else e>1&&t>1?(P=(e-1)/(e+t-2),g=(t-1)/(e+t-2),T=ED(P,e,t)-r,T<0&&(v=t,t=e,e=v,v=n,n=r,r=v,v=g,g=P,P=v,o=!o),b=xD(r*e*rc(e,t))/e,R=MD(b),j=R<.9?1-R:-Lw(b),t<e&&R<.2&&(m=e-1,y=t-1,A=e*e,M=e*A,k=t*t,vl[0]=0,vl[1]=1,vl[2]=y/m,m*=m,vl[3]=y*(3*e*t+5*t+A-e-4)/(2*(e+2)*m),m*=e+1,vl[4]=y*(33*e*k+31*k+8*A*k-30*e*t-47*t+11*A*t+6*M*t+18+4*e-M+A*A-10*A),vl[4]/=3*(e+3)*(e+2)*m,R=LJt(vl,R)),R>P&&(R=P),u=P):(t<e&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o),no(r,1/e)<.5?(R=no(r*e*rc(e,t),1/e),R===0&&(R=Iw),j=1-R):(j=no(1-no(r,t*rc(e,t)),1/t),j===0&&(j=Iw),R=1-j))}return R>.5&&(v=t,t=e,e=v,v=n,n=r,r=v,v=j,j=R,R=v,o=!o,F=1-u,z=1-s,s=F,u=z),s===0&&(o?(s=ID,R<s&&(R=s)):s=Iw,R<s&&(R=s)),i=UJt,R<1e-50&&(e<1||t<1)&&(i*=3,i/=2),c=VJt(e,t,r<n?r:n,r>=n),R=zJt(c,R,s,u,i,GJt),R===s&&(R=0),o?[1-R,R]:[R,1-R]}var WJt=jJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var HJt=WJt,XJt=HJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ow=Zt,OD=XJt;function YJt(e,t,r,n){return Ow(e)||Ow(t)||Ow(r)?NaN:t<=0||r<=0?NaN:e<0||e>1?NaN:n?OD(t,r,1-e,e)[0]:OD(t,r,e,1-e)[0]}var qJt=YJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZJt=qJt,bG=ZJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var KJt=bG,Rw=Zt;function JJt(e,t,r){return Rw(e)||Rw(t)||Rw(r)||t<=0||r<=0||e<0||e>1?NaN:KJt(e,t,r)}var QJt=JJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tQt(e){return t;function t(){return e}}var eQt=tQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rQt=eQt,qy=rQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nQt=qy,iQt=bG,Dw=Zt;function oQt(e,t){if(Dw(e)||Dw(t)||e<=0||t<=0)return nQt(NaN);return r;function r(n){return Dw(n)||n<0||n>1?NaN:iQt(n,e,t)}}var aQt=oQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sQt=dr,wG=QJt,lQt=aQt;sQt(wG,"factory",lQt);var uQt=wG;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cQt=Cn;function fQt(e){return cQt(e)===e&&e>=0}var hQt=fQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dQt=hQt,Zy=dQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pQt=Zy,vQt=hC,Nw=Zt,gQt=Cn,mQt=Ne;function yQt(e,t,r){return Nw(e)||Nw(t)||Nw(r)||r<0||r>1||!pQt(t)||t===mQt?NaN:e<0?0:e>=t?1:(e=gQt(e+1e-7),vQt(r,e+1,t-e,!0,!0))}var _Qt=yQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bQt=Zy,wQt=qy,SQt=hC,Fw=Zt,TQt=Cn,PQt=Ne;function EQt(e,t){if(Fw(e)||Fw(t)||t<0||t>1||!bQt(e)||e===PQt)return wQt(NaN);return r;function r(n){return Fw(n)?NaN:n<0?0:n>=e?1:(n=TQt(n+1e-7),SQt(t,n+1,e-n,!0,!0))}}var AQt=EQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var CQt=dr,SG=_Qt,MQt=AQt;CQt(SG,"factory",MQt);var kQt=SG;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The code is adapted from the Fortran routine from the FNLIB library of the [SLATEC Common Mathematical Library]{@link http://www.netlib.no/netlib/slatec/fnlib/}.
*
* The original code was developed by W. Fullerton of Los Alamos Scientific Laboratory, a governmental institution, and is therefore public domain.
*/var TG=[1276642195630063e-46,-3401102254316749e-45,1025680058010471e-43,-35475981581010704e-43,14292273559424982e-41,-6831888753985767e-39,39628370610464347e-38,-2868042435334643e-35,2683181998482699e-33,-3399615005417722e-31,6221098041892606e-29,-1809129475572494e-26,981082564692473e-23,-1384948176067564e-20,.16663894804518634],xQt=TG.length;function LQt(e){var t,r,n,i,o;if(e<-1.1||e>1.1)return NaN;for(n=0,i=0,t=2*e,o=0;o<xQt;o++)r=n,n=i,i=t*n-r+TG[o];return(i-r)*.5}var IQt=LQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The code is adapted from the Fortran routine from the FNLIB library of the [SLATEC Common Mathematical Library]{@link http://www.netlib.no/netlib/fn/d9lgmc.f}.
*
* The original code was developed by W. Fullerton of Los Alamos Scientific Laboratory, a governmental institution, and is therefore public domain.
*/var OQt=er,RQt=IQt,DQt=9490626562425156e-8,NQt=3745194030963158e291;function FQt(e){return e<10?NaN:e>=NQt?0:e<DQt?RQt(2*OQt(10/e,2)-1)/e:1/(e*12)}var BQt=FQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The code is adapted from the Fortran routine from the FNLIB library of the [SLATEC Common Mathematical Library]{@link http://www.netlib.no/netlib/slatec/fnlib/albeta.f}.
*
* The original code was developed by W. Fullerton of Los Alamos Scientific Laboratory, a governmental institution, and is therefore public domain.
*/var $Qt=Ff,RD=Mn,Bw=Lo,zQt=wu,VQt=Rs,mg=Se,UQt=_G,GQt=Tr,DD=Ne,$h=BQt;function jQt(e,t){var r,n,i;return n=VQt(e,t),i=zQt(e,t),n<0?NaN:n===0?DD:i===DD?GQt:n>=10?(r=$h(n)+$h(i)-$h(n+i),-.5*mg(i)+UQt+r+(n-.5)*mg(n/(n+i))+i*RD(-n/(n+i))):i>=10?(r=$h(i)-$h(n+i),$Qt(n)+r+n-n*mg(n+i)+(i-.5)*RD(-n/(n+i))):mg(Bw(n)*(Bw(i)/Bw(n+i)))}var WQt=jQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var HQt=WQt,XQt=HQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ND=Is,FD=Zt,YQt=XQt,qQt=de,BD=Se,$D=Tr;function UT(e,t){return FD(e)||FD(t)?NaN:!ND(e)||!ND(t)?NaN:e<0?UT(-e+t-1,t):t<0?$D:t===0?0:t===1?BD(qQt(e)):e<t?$D:e-t<2?UT(e,e-t):-BD(e+1)-YQt(e-t+1,t+1)}var ZQt=UT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var KQt=ZQt,PG=KQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zD=Zy,JQt=PG,$w=Zt,QQt=Mn,tte=Ve,ete=Se,rte=Ne;function nte(e,t,r){var n;return $w(e)||$w(t)||$w(r)||r<0||r>1||!zD(t)||t===rte?NaN:zD(e)?e>t?0:r===0?e===0?1:0:r===1?e===t?1:0:(n=JQt(t,e),n+=e*ete(r)+(t-e)*QQt(-r),tte(n)):0}var ite=nte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var VD=Zt;function ote(e,t){return VD(e)||VD(t)?NaN:e===t?1:0}var ate=ote;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ste=qy,UD=Zt;function lte(e){if(UD(e))return ste(NaN);return t;function t(r){return UD(r)?NaN:r===e?1:0}}var ute=lte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cte=dr,EG=ate,fte=ute;cte(EG,"factory",fte);var hte=EG;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GD=Zy,dte=qy,pte=PG,jD=hte.factory,zw=Zt,vte=Mn,gte=Ve,mte=Se,yte=Ne;function _te(e,t){if(zw(e)||zw(t)||!GD(e)||e===yte||t<0||t>1)return dte(NaN);if(t===0||e===0)return jD(0);if(t===1)return jD(e);return r;function r(n){var i;return zw(n)?NaN:GD(n)?n>e?0:(i=pte(e,n),i+=n*mte(t)+(e-n)*vte(-t),gte(i)):0}}var bte=_te;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wte=dr,AG=ite,Ste=bte;wte(AG,"factory",Ste);var Tte=AG;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Pte=zi,GT;function Ete(e){return Pte(e)==="[object Array]"}Array.isArray?GT=Array.isArray:GT=Ete;var Ate=GT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Cte=Ate,CG=Cte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Mte=CG;function kte(e){return typeof e=="object"&&e!==null&&!Mte(e)}var xte=kte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Lte=xte,Ite=Lte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ote=/./,Rte=Ote;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Dte(e){return typeof e=="boolean"}var MG=Dte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Nte=Boolean.prototype.toString,Fte=Nte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Bte=Fte;function $te(e){try{return Bte.call(e),!0}catch{return!1}}var zte=$te;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Vte=$y,Ute=zi,Gte=zte,jte=Vte();function Wte(e){return typeof e=="object"?e instanceof Boolean?!0:jte?Gte(e):Ute(e)==="[object Boolean]":!1}var kG=Wte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Hte=MG,Xte=kG;function Yte(e){return Hte(e)||Xte(e)}var qte=Yte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xG=dr,pC=qte,Zte=MG,Kte=kG;xG(pC,"isPrimitive",Zte);xG(pC,"isObject",Kte);var LG=pC;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Jte(){return new Function("return this;")()}var Qte=Jte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tee=typeof self=="object"?self:null,eee=tee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ree=typeof window=="object"?window:null,nee=ree;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iee=typeof hS=="object"?hS:null,oee=iee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aee=LG.isPrimitive,see=Qte,WD=eee,HD=nee,XD=oee;function lee(e){if(arguments.length){if(!aee(e))throw new TypeError("invalid argument. Must provide a boolean primitive. Value: `"+e+"`.");if(e)return see()}if(WD)return WD;if(HD)return HD;if(XD)return XD;throw new Error("unexpected error. Unable to resolve global object.")}var uee=lee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cee=uee,fee=cee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hee=fee,YD=hee(),dee=YD.document&&YD.document.childNodes,pee=dee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vee=Int8Array,gee=vee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mee=Rte,yee=pee,_ee=gee;function bee(){return typeof mee=="function"||typeof _ee=="object"||typeof yee=="function"}var wee=bee;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function See(){return/^\s*function\s*([^(]*)/i}var IG=See;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Tee=IG,Pee=Tee(),Eee=Pee;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Aee=dr,OG=IG,Cee=Eee;Aee(OG,"REGEXP",Cee);var Mee=OG;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kee=CG;function xee(e){if(typeof e!="function")throw new TypeError("invalid argument. Must provide a function. Value: `"+e+"`.");return t;function t(r){var n,i;if(!kee(r)||(n=r.length,n===0))return!1;for(i=0;i<n;i++)if(e(r[i])===!1)return!1;return!0}}var Lee=xee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Iee=Lee,Oee=Iee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ree(e){return e!==null&&typeof e=="object"}var Dee=Ree;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Nee=dr,Fee=Oee,vC=Dee,Bee=Fee(vC);Nee(vC,"isObjectLikeArray",Bee);var $ee=vC;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zee=$ee;function Vee(e){return zee(e)&&(e._isBuffer||e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e))}var Uee=Vee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Gee=Uee,jee=Gee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Wee=zi,Hee=Mee.REGEXP,Xee=jee;function Yee(e){var t,r,n;if(r=Wee(e).slice(8,-1),(r==="Object"||r==="Error")&&e.constructor){if(n=e.constructor,typeof n.name=="string")return n.name;if(t=Hee.exec(n.toString()),t)return t[1]}return Xee(e)?"Buffer":r}var qee=Yee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Zee=qee,RG=Zee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Kee=RG;function Jee(e){var t;return e===null?"null":(t=typeof e,t==="object"?Kee(e).toLowerCase():t)}var Qee=Jee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tre=RG;function ere(e){return tre(e).toLowerCase()}var rre=ere;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nre=wee,ire=Qee,ore=rre,are=nre()?ore:ire,sre=are;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var lre=sre;function ure(e){return lre(e)==="function"}var cre=ure;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fre=cre,DG=fre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hre=Object.getPrototypeOf,dre=hre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function pre(e){return e.__proto__}var vre=pre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gre=zi,mre=vre;function yre(e){var t=mre(e);return t||t===null?t:gre(e.constructor)==="[object Function]"?e.constructor.prototype:e instanceof Object?Object.prototype:null}var _re=yre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bre=DG,wre=dre,Sre=_re,jT;bre(Object.getPrototypeOf)?jT=wre:jT=Sre;var Tre=jT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Pre=Tre;function Ere(e){return e==null?null:(e=Object(e),Pre(e))}var Are=Ere;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Cre=Are,Mre=Cre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kre=Ite,qD=DG,xre=Mre,am=zy,Lre=zi,Ire=Object.prototype;function Ore(e){var t;for(t in e)if(!am(e,t))return!1;return!0}function Rre(e){var t;return kre(e)?(t=xre(e),t?!am(e,"constructor")&&am(t,"constructor")&&qD(t.constructor)&&Lre(t.constructor)==="[object Function]"&&am(t,"isPrototypeOf")&&qD(t.isPrototypeOf)&&(t===Ire||Ore(e)):!0):!1}var Dre=Rre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Nre=Dre,NG=Nre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Fre(e){return typeof e=="string"}var FG=Fre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Bre=String.prototype.valueOf,$re=Bre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zre=$re;function Vre(e){try{return zre.call(e),!0}catch{return!1}}var Ure=Vre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Gre=$y,jre=zi,Wre=Ure,Hre=Gre();function Xre(e){return typeof e=="object"?e instanceof String?!0:Hre?Wre(e):jre(e)==="[object String]":!1}var BG=Xre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Yre=FG,qre=BG;function Zre(e){return Yre(e)||qre(e)}var Kre=Zre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $G=dr,gC=Kre,Jre=FG,Qre=BG;$G(gC,"isPrimitive",Jre);$G(gC,"isObject",Qre);var tne=gC;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ene=Mf.isPrimitive,rne=Zt;function nne(e){return ene(e)&&rne(e)}var zG=nne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ine=Mf.isObject,one=Zt;function ane(e){return ine(e)&&one(e.valueOf())}var VG=ane;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sne=zG,lne=VG;function une(e){return sne(e)||lne(e)}var cne=une;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var UG=dr,mC=cne,fne=zG,hne=VG;UG(mC,"isPrimitive",fne);UG(mC,"isObject",hne);var dne=mC;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZD=Mf.isPrimitive,pne=NG,vne=tne.isPrimitive,KD=dne,Vw=zy;function gne(e,t){return pne(t)?Vw(t,"alpha")&&(e.alpha=t.alpha,!ZD(e.alpha)||KD(e.alpha))?new TypeError("invalid option. `alpha` option must be a number primitive. Option: `"+e.alpha+"`."):Vw(t,"alternative")&&(e.alternative=t.alternative,!vne(e.alternative))?new TypeError("invalid option. `alternative` option must be a string primitive. Option: `"+e.alternative+"`."):Vw(t,"p")&&(e.p=t.p,!ZD(e.p)||KD(e.p))?new TypeError("invalid option. `p` option must be a number primitive. Option: `"+e.p+"`."):null:new TypeError("invalid argument. Options argument must be an object. Value: `"+t+"`.")}var mne=gne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yne=Vy.isPrimitive;function _ne(e){return yne(e)&&e>0}var GG=_ne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bne=Vy.isObject;function wne(e){return bne(e)&&e.valueOf()>0}var jG=wne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Sne=GG,Tne=jG;function Pne(e){return Sne(e)||Tne(e)}var Ene=Pne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var WG=dr,yC=Ene,Ane=GG,Cne=jG;WG(yC,"isPrimitive",Ane);WG(yC,"isObject",Cne);var Mne=yC;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kne=9007199254740991,xne=kne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Lne=308,Ine=Lne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var One=-308,Rne=One;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Dne=-324,Nne=Dne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var JD=Zt,yg=Of,QD=er,Fne=de,t8=jy,Bne=xne,e8=Ine,$ne=Rne,zne=Nne,Vne=Bne+1,r8=1e308;function Une(e,t){var r,n;return JD(e)||JD(t)||yg(t)?NaN:yg(e)||e===0||t<zne||Fne(e)>Vne&&t<=0?e:t>e8?0*e:t<$ne?(r=QD(10,-(t+e8)),n=e*r8*r,yg(n)?e:t8(n)/r8/r):(r=QD(10,-t),n=e*r,yg(n)?e:t8(n)/r)}var Gne=Une;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jne=Gne,Wne=jne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Hne=Mne,Xne=NG,Yne=LG.isPrimitive,n8=zy,_g=Wne;function qne(e){var t,r,n;if(r=4,t=!0,arguments.length>0){if(!Xne(e))throw new TypeError("invalid argument. First argument must be an options object. Value: `"+e+"`.");if(n8(e,"digits")){if(!Hne(e.digits))throw new TypeError("invalid option. `digits` option must be a positive integer. Option: `"+e.digits+"`.");r=e.digits}if(n8(e,"decision")){if(!Yne(e.decision))throw new TypeError("invalid option. `decision` option must be a boolean primitive. Option: `"+e.decision+"`.");t=e.decision}}switch(n="",n+=this.method,n+=`

`,n+="Alternative hypothesis: ",n+="True correlation coefficient is ",this.alternative){case"less":n+="less than ";break;case"greater":n+="greater than ";break;case"two-sided":default:n+="not equal to ";break}return n+=this.nullValue,n+=`

`,n+="    pValue: "+_g(this.pValue,-r)+`
`,n+="    statistic: "+_g(this.statistic,-r)+`
`,n+="    "+(1-this.alpha)*100+"% confidence interval: ["+_g(this.ci[0],-r)+","+_g(this.ci[1],-r)+"]",n+=`

`,t&&(n+="Test Decision: ",this.rejected?n+="Reject null in favor of alternative at "+this.alpha*100+"% significance level":n+="Fail to reject null in favor of alternative at "+this.alpha*100+"% significance level",n+=`
`),n}var Zne=qne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Wo=LLt,Kne=ZIt,i8=AOt,HG=uQt,Jne=Cn,Qne=OU,nc=kQt,Uw=Tte,o8=mne,tie=Zne,a8=1+1e-7;function s8(e,t,r){return e===0?0:HG(r,e,t-e+1)}function l8(e,t,r){return e===t?1:HG(1-r,e+1,t-e)}function eie(){var e,t,r,n,i,o,a,s,l,u,c,f,h,d,p;if(t={},Kne(arguments[0])){if(h=arguments[0],h.length!==2)throw new Error("invalid argument. If provided an array, it must have two elements. Value: `"+h+"`.");c=h[1]+h[0],h=h[0],arguments[1]&&(a=o8(t,arguments[1]))}else{if(h=arguments[0],c=arguments[1],!i8(h))throw new TypeError("invalid argument. Must provide a nonnegative integer or a two-element array. Value: `"+h+"`.");if(!i8(c))throw new TypeError("invalid argument. Must provide a nonnegative integer. Value: `"+c+"`.");if(h>c)throw new TypeError("invalid arguments. `x` cannot be larger than `n`. `x:"+h+", n:"+c+"`.");arguments[2]&&(a=o8(t,arguments[2]))}if(a)throw a;if(t.alpha===void 0?e=.05:e=t.alpha,e<0||e>1)throw new RangeError("invalid argument. Option `alpha` must be a number in the range 0 to 1. Value: `"+e+"`.");if(t.p===void 0?f=.5:f=t.p,f<0||f>1)throw new RangeError("invalid argument. Option `p` must be a probability. Value: `"+f+"`.");switch(o=t.alternative||"two-sided",i=h/c,o){case"less":n=nc(h,c,f),r=[0,l8(h,c,e)];break;case"greater":n=1-nc(h-1,c,f),r=[s8(h,c,e),1];break;case"two-sided":if(l=Uw(h,c,f),u=c*f,h===u)n=1;else if(h<u){for(d=0,p=Qne(u);p<=c;p++)Uw(p,c,f)<=l*a8&&(d+=1);n=nc(h,c,f)+(1-nc(c-d,c,f))}else{for(d=0,p=0;p<=Jne(u);p++)Uw(p,c,f)<=l*a8&&(d+=1);n=nc(d-1,c,f)+(1-nc(h-1,c,f))}r=[s8(h,c,e/2),l8(h,c,e/2)];break;default:throw new Error("Invalid option. `alternative` must be either `two-sided`, `less` or `greater`. Value: `"+o+"`")}return s={},Wo(s,"rejected",n<=e),Wo(s,"alpha",e),Wo(s,"pValue",n),Wo(s,"statistic",i),Wo(s,"ci",r),Wo(s,"nullValue",f),Wo(s,"alternative",o),Wo(s,"method","Exact binomial test"),Wo(s,"print",tie),s}var rie=eie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nie=rie,iie=nie;Br([hf,hy,R0,D0,clt,vf,pf,gf,N0,vy,py,dy,F0]);const oie={data:()=>({selected_np:1,selected_n:10,sweep_lo:0,sweep_hi:1}),props:{stats:Object,histogram:Object},components:{VChart:mf},methods:{formatFixed:Bt,formatKMG:gP,makeBinomBellN:HA,loss:XA,makeModelB(e,t){const r=this.makeBinomBellN(e,this.stats.lucky.len,t),n={np:e,n:t,bell:r};n.loss=this.loss(n.bell,this.histogramNonzero.map,2);const i=this.histogramNonzero.map;if(1 in i&&Object.keys(i).length==1&&1 in r&&Object.keys(r).length==2){const o=this.stats.lucky.len,a=r[1][1],s=i[1];console.log("binomtest",r,i,s,o,a/o),n.loss.binomtest=iie(s,Math.round(o),{p:a/o})}return n},tuneModelB(e,t){let r=[t];t===void 0&&(r=[10,20,40,110,120,140,150],r.push(this.stats.max),r=r.filter(o=>o<=this.stats.max*2));let n={np:0,n:1,loss:{chisq:1e99,pval:0}},i=1/0;if(!this.histogramLuckOnly){console.log("tuneModelB skip");return}return r.forEach(o=>{const a=this.makeModelB(e,o);0<a.loss.chisq&&a.loss.chisq<.9999*i&&(i=a.loss.chisq,n=a)}),n&&n.np>0&&n.np<=n.n?n:(console.log(`tuneModelB np=${e} -> failed`),null)},applySelectedNp(e){e<0||(e>this.selected_n&&(this.selected_n=Math.ceil(e)),this.selected_np=e)},applySelectedN(e){e<0||(e<this.selected_np&&(this.selected_np=e),this.selected_n=e)}},computed:{histogramLuckOnly(){const e={...this.histogram.map};e[0]=this.histogram.map[0]-this.stats.unlucky.len;const t=[],r=[];for(const[n,i]of Object.entries(e)){if(n==0){const o=this.histogram.map[0]-(this.stats.len-this.stats.lucky.lenHi),a=this.histogram.map[0]-(this.stats.len-this.stats.lucky.lenLo);r.push([n,a,o])}t.push([n,i])}return{map:e,arr:t,err:r}},histogramNonzero(){const e={...this.histogram.map};delete e[0];const t=[];for(const[r,n]of Object.entries(e))t.push([r,n]);return{arr:t,map:e}},modelB(){const e=this.makeModelB(this.selected_np,this.selected_n);return console.log("modelB",e),e},modelBSweep(){this.stats.mean/this.stats.lucky.share;const e=this.stats.meanLo/this.stats.lucky.share;if(e>8888888)return console.log("modelBSweep skip - no input",this.stats.meanLo,this.stats.lucky.share,this.stats.lucky.std),!1;this.sweep_lo=e,this.sweep_hi=this.stats.meanHi/this.stats.lucky.share;const t=this.sweep_hi-e;let r=10;const n=[.002,.005,.01,.02,.05,.1,.2,.5,1,2,5];for(const s of n)if(Math.floor(t/s)<40){r=s;break}if(Math.floor(t/r)>1e3)return!1;const i=Math.ceil(e/r)*r;let o={np:void 0,n:void 0,loss:{chisq:1e99,pval:0}};const a=[];for(let s=i;s<=this.sweep_hi;s+=r){const l=this.tuneModelB(s,void 0);!l||(a.push([s,l.loss.chisq,l.loss.pval,l.n]),l.loss.chisq<o.loss.chisq&&(console.log("new best model",o),o=l))}return this.selected_np=o.np,this.selected_n=o.n,console.log("modelBSweep",e,this.sweep_hi,r,i,o,a),{result:o,log:a}},makeChartBHist(){return{legend:null,tooltip:{trigger:"axis"},dataset:[{source:this.histogramLuckOnly.arr},{source:this.histogramLuckOnly.err},{source:this.modelB.bell}],xAxis:{axisLine:{onZero:!1},min:-1,max:this.stats.max+1},yAxis:{axisLine:{onZero:!1},axisLabel:{formatter:t=>this.formatKMG(t)}},grid:{left:35,top:8,right:10,bottom:20},series:[{type:"bar",name:"probably observed",datasetIndex:0,encode:{x:0,y:1},tooltip:{valueFormatter:t=>Bt(t,0)}},{type:"line",name:"theoretical",datasetIndex:2,encode:{x:0,y:1},tooltip:{valueFormatter:t=>Bt(t,3)},showSymbol:!1},{type:"custom",name:"observed-error",datasetIndex:1,encode:{x:0,y:[1,2]},itemStyle:{borderWidth:1.5},renderItem:function(t,r){var n=r.value(0),i=r.coord([n,r.value(1)]),o=r.coord([n,r.value(2)]),a=r.size([1,0])[0]*.1,s=r.style({stroke:r.visual("color"),fill:void 0});return{type:"group",children:[{type:"line",transition:["shape"],shape:{x1:i[0]-a,y1:i[1],x2:i[0]+a,y2:i[1]},style:s},{type:"line",transition:["shape"],shape:{x1:i[0],y1:i[1],x2:o[0],y2:o[1]},style:s},{type:"line",transition:["shape"],shape:{x1:o[0]-a,y1:o[1],x2:o[0]+a,y2:o[1]},style:s}]}},tooltip:{show:!1},z:100}]}},makeChartBSweep(){const e={legend:{},tooltip:{trigger:"axis",formatter:function(t){const r=t[0].data;return`np=${Bt(r[0],2)}<br/>n=${Bt(r[3],2)}<br/>\u03C7\xB2=${r[1].toLocaleString(void 0,{notation:"compact"})}<br/>p-val=${Bt(r[2],2)}<br/>`}},title:{subtext:"",left:"center",textStyle:{fontSize:10}},dataset:[{source:this.modelBSweep.log}],xAxis:{min:this.sweep_lo,max:this.sweep_hi,name:"np",nameLocation:"center",nameGap:20,axisLine:{onZero:!1},axisLabel:{showMinLabel:!1}},yAxis:[{position:"left",axisLabel:{formatter:t=>this.formatKMG(t)},splitLine:{show:!1}},{position:"right"}],grid:{left:35,top:30,right:40,bottom:20},series:[{name:"\u03C7\xB2",type:"line",encode:{x:0,y:1},tooltip:{valueFormatter:t=>Bt(t,2)}},{name:"p-val",type:"line",encode:{x:0,y:2},tooltip:{valueFormatter:t=>Bt(t,4)},yAxisIndex:1}]};return console.log("makeChartBSweep",e.dataset),e}}},Pa=e=>(cn("data-v-229746f4"),e=e(),fn(),e),aie=Pa(()=>w("span",{class:"title"},"Model B",-1)),sie=Pa(()=>w("span",null," \u2261 majority (1-\u03BB) of points are zero, but \u03BB points are from a binomial distribution with such np, that \u03BB np = M",-1)),lie=U("Sweeping through "),uie=Pa(()=>w("i",null,"np",-1)),cie={style:{float:"left"}},fie={key:0,id:"chartSweep"},hie={style:{padding:"1em"}},die={style:{float:"left"}},pie=Pa(()=>w("tr",null,[w("th"),w("th",null,"np"),w("th",null,"n"),w("th",null,"\u03C7\xB2"),w("th",null,"p-val")],-1)),vie={key:0},gie=Pa(()=>w("td",null,"Best fit:",-1)),mie=Pa(()=>w("td",null,"Manual:",-1)),yie={key:0},_ie=U(" np\u1D38: "),bie=["value","min","max","step"],wie=U(" n\u1D38: "),Sie=["value"],Tie=Pa(()=>w("div",{style:{clear:"both"}},null,-1)),Pie={key:0,id:"chartHisto"},Eie=Pa(()=>w("br",null,null,-1)),Aie={key:1},Cie=Pa(()=>w("div",{style:{clear:"both"}},null,-1));function Mie(e,t,r,n,i,o){const a=pe("v-chart");return D(),$(W,null,[aie,sie,o.modelB?(D(),$(W,{key:0},[w("p",null,[lie,uie,U(" values in "+L(o.formatFixed(this.sweep_lo,2))+"\u2026"+L(o.formatFixed(this.sweep_hi,2))+" range:",1)]),w("div",cie,[o.modelBSweep?(D(),$("div",fie,[kt(a,{option:o.makeChartBSweep},null,8,["option"])])):pt("",!0),w("div",hie,[w("div",die,[w("table",null,[pie,o.modelBSweep.result?(D(),$("tr",vie,[gie,w("td",null,L(o.formatFixed(o.modelBSweep.result.np,2)),1),w("td",null,L(o.modelBSweep.result.n),1),w("td",null,L(o.formatFixed(o.modelBSweep.result.loss.chisq,2)),1),w("td",null,L(o.formatFixed(o.modelBSweep.result.loss.pval,4)),1)])):pt("",!0),w("tr",null,[mie,w("td",null,L(o.formatFixed(e.selected_np,2)),1),w("td",null,L(e.selected_n),1),w("td",null,L(o.formatFixed(o.modelB.loss.chisq,2)),1),w("td",null,L(o.formatFixed(o.modelB.loss.pval,4)),1),o.modelB.loss.binomtest?(D(),$("td",yie,L(o.formatFixed(o.modelB.loss.binomtest.pValue,4)),1)):pt("",!0)])]),w("p",null,[_ie,w("input",{type:"range",onInput:t[0]||(t[0]=s=>o.applySelectedNp(Number(s.target.value))),value:e.selected_np,min:r.stats.min,max:e.sweep_hi*1.5,step:.01,class:"vmid"},null,40,bie),wie,w("input",{type:"range",onInput:t[1]||(t[1]=s=>o.applySelectedN(Number(s.target.value))),value:e.selected_n,min:1,max:200,step:1,class:"vmid"},null,40,Sie)])]),Tie])]),o.modelB.bell?(D(),$("div",Pie,[kt(a,{option:o.makeChartBHist},null,8,["option"]),U(" Bin 0 has 1-\u03BB \u2248 "+L(o.formatFixed(r.stats.unlucky.len))+" samples removed, "+L(o.formatFixed(o.histogramLuckOnly.arr[0][1]))+" remaining",1),Eie,U(" Depending on \u03BB could potentially be "+L(o.formatFixed(o.histogramLuckOnly.err[0][1]))+"\u2026"+L(o.formatFixed(o.histogramLuckOnly.err[0][2]))+" remaining ",1)])):(D(),$("div",Aie," bad parameters ")),Cie],64)):pt("",!0)],64)}const kie=$e(oie,[["render",Mie],["__scopeId","data-v-229746f4"]]);Br([hf,hy,R0,D0,vf,pf,gf,N0,vy,py,dy,F0]);class xie{constructor(){this.data={},this.xmin=999,this.xmax=-999,this.ymin=999,this.ymax=-999}put(t,r,n){this.data.hasOwnProperty(t)||(this.data[t]={}),this.data[t][r]=n,this.xmin=Math.min(this.xmin,r/1e4),this.xmax=Math.max(this.xmax,r/1e4),this.ymin=Math.min(this.ymin,t/1e4),this.ymax=Math.max(this.ymax,t/1e4)}get(t,r){return!this.data.hasOwnProperty(t)||!this.data[t].hasOwnProperty(r)?null:this.data[t][r]}aslist(){let t=[];for(let[r,n]of Object.entries(this.data).sort((i,o)=>i[0]-o[0]))for(let[i,o]of Object.entries(n).sort((a,s)=>a[0]-s[0]))t.push([r/1e4,i/1e4,o.loss.chisq,o.loss.pval]);return t}}const Lie={data:()=>({selected_npL:1,selected_nL:10,selected_npU:1,selected_nU:10}),props:{stats:Object,histogram:Object},components:{VChart:mf},methods:{formatFixed:Bt,formatKMG:gP,makeBinomBellN:HA,makeBellSum:Gxt,loss:XA,l2u(e,t,r){return r/(1-t)-t*e/(1-t)},findPsStep(e,t,r,n,i){let a={il:0,iu:0,model:i};for(let s=-15;s<=15;s++)for(let l=-15;l<=15;l++){const u=t+l*n,c=r+s*n;if(u<0||c<u)continue;const f=2.96,h=this.l2u(c/1e4,this.stats.lucky.shareLo,this.stats.mean+f*this.stats.meanErr);if(u/1e4>h)continue;const d=this.l2u(c/1e4,this.stats.lucky.shareHi,this.stats.mean-f*this.stats.meanErr);if(u/1e4<d)continue;let p=e.get(u,c);p===null&&(p=this.makemodelC(c/1e4,void 0,u/1e4,void 0),e.put(u,c,p)),p.loss.chisq<a.model.loss.chisq*.9999&&(a={il:s,iu:l,model:p})}return a},findPsRound(e,t,r,n,i,o){for(;t<=150;){let a=this.findPsStep(e,r,n,o,i);if(a.il==0&&a.iu==0)return{round:t,curU:r,curL:n,model:a.model};if(r+=a.iu*o,n+=a.il*o,n/1e4>this.stats.max)return{round:t,curU:r,curL:n,model:a.model};this.stats.psGridPath.push([t,r/1e4,n/1e4,a.model.loss.chisq]),t++}return{round:t,curU:r,curL:n,model:i}},makemodelC(e,t,r,n){let i=[t];t===void 0&&(i=[10,20,40,110,120,140,150],i=i.filter(s=>s>=e&&s>=this.stats.max&&s<=this.stats.max*2),i.push(this.stats.max));let o=[n];n===void 0&&(o=[10,20,40,110,120,140,150],o=o.filter(s=>s>=r&&s<=this.stats.max*2),o.push(this.stats.max));let a={n:0,loss:{chisq:1/0,pval:0}};return i.forEach(s=>{const l=this.makeBinomBellN(e,this.stats.lucky.len,s);o.forEach(u=>{const c={npL:e,nL:s,npU:r,nU:u,bellL:l};c.bellU=this.makeBinomBellN(r,this.stats.unlucky.len,u),c.bell=this.makeBellSum(c.bellL,c.bellU),c.loss=this.loss(c.bell,this.histogram.map,4),c.loss.chisq<.9999*a.loss.chisq&&(a=c)})}),a||console.log("makemodelC failed",e,r),a},applySelectedNpL(e){e<0||(e>this.selected_nL&&(this.selected_nL=Math.ceil(e)),this.selected_npL=e)},applySelectedNL(e){e<0||(e<this.selected_npL&&(this.selected_npL=e),this.selected_nL=e)},applySelectedNpU(e){e<0||(e>this.selected_nU&&(this.selected_nU=Math.ceil(e)),this.selected_npU=e)},applySelectedNU(e){e<0||(e<this.selected_npU&&(this.selected_npU=e),this.selected_nU=e)}},computed:{modelC(){const e=this.makemodelC(this.selected_npL,this.selected_nL,this.selected_npU,this.selected_nU);return console.log("modelC",e),e},modelCSweep(){if(isNaN(this.stats.mean))return!1;const e=this.stats.mean,t=this.stats.mean;console.log("initU",e);let r=1,n=5e3;this.stats.mean<22&&(n=2500),this.stats.mean<11&&(n=1e3),this.stats.mean<5.5&&(n=500),this.stats.mean<2.2&&(n=200),this.stats.mean<.55&&(n=50);let i=Math.round(e*1e4/n)*n,o=Math.round(t*1e4/n)*n;i<0&&(i=0),o<i&&(o=i);let a=this.makemodelC(o/1e4,void 0,i/1e4,void 0);this.stats.psGridPath=[[0,i/1e4,o/1e4,a.loss.chisq]];let s=new xie;s.put(i,o,a),{round:r,curU:i,curL:o,model:a}=this.findPsRound(s,r,i,o,a,n);const l=s.aslist();return this.selected_npL=a.npL,this.selected_nL=a.nL,this.selected_npU=a.npU,this.selected_nU=a.nU,console.log("modelCSweep",a,this.stats.lucky.mean),{result:a,psGridDotsMap:s,psGridDots:l}},makeChartCHist(){return{legend:{},tooltip:{trigger:"axis",valueFormatter:t=>Bt(t,4)},dataset:[{source:this.histogram.arr},{source:this.modelC.bell},{source:this.modelC.bellL},{source:this.modelC.bellU}],xAxis:{min:this.stats.min==0?-1:null,max:this.stats.max<3?this.stats.max+1:null},yAxis:{axisLine:{onZero:!1},axisLabel:{formatter:t=>this.formatKMG(t)}},grid:{left:35,top:30,right:10,bottom:20},series:[{name:"observed",type:"bar",encode:{x:0,y:1},tooltip:{trigger:"axis",valueFormatter:t=>Bt(t,0)}},{name:"total",type:"line",datasetIndex:1,encode:{x:0,y:1},showSymbol:!1},{name:"unlucky",type:"line",datasetIndex:3,encode:{x:0,y:1},showSymbol:!1},{name:"lucky",type:"line",datasetIndex:2,encode:{x:0,y:1},showSymbol:!1}]}},makeChartCGrid(){const e=2.272727272727273;let{xmin:t,xmax:r,ymin:n,ymax:i}=this.modelCSweep.psGridDotsMap;const o=(t+r)/2,a=(n+i)/2;let s=.2;this.stats.mean<2&&(s=.05);const l=1.2*(this.modelCSweep.psGridDotsMap.xmax-this.modelCSweep.psGridDotsMap.xmin)+s,u=1.2*(this.modelCSweep.psGridDotsMap.ymax-this.modelCSweep.psGridDotsMap.ymin)+s;if(l/u>e){const m=l,y=l/e;t=o-m/2,r=o+m/2,n=a-y/2,i=a+y/2}else{const m=u*e,y=u;t=o-m/2,r=o+m/2,n=a-y/2,i=a+y/2}const f={xmin:t,xmax:r,ymin:n,ymax:i},h=isNaN(this.modelCSweep.result.loss.pval);let d=h?["#282","#2c2","#cc2","#ccc"]:["#ccc","#cc2","#2c2","#282"];const p={inRange:{color:d},calculable:!0,precision:2,controller:{inRange:{color:d}},orient:"vertical",top:"center",right:10,align:"left",padding:0};let v=h?{min:this.modelCSweep.result.loss.chisq,max:this.modelCSweep.result.loss.chisq*2,dimension:2,text:["\u03C7\xB2",""]}:{min:0,max:this.modelCSweep.result.loss.pval,dimension:3,text:["p-val",""]};return{legend:{},tooltip:{trigger:"item",axisPointer:{type:"cross"},formatter:function(m){const y=m.data;return`np\u1D41=${Bt(y[0],2)}<br/>np\u1D38=${Bt(y[1],2)}<br/>\u03C7\xB2=${y[2].toLocaleString(void 0,{notation:"compact"})}<br/>p-val=${Bt(y[3],2)}<br/>`}},title:{},dataset:[{source:this.modelCSweep.psGridDots}],xAxis:{name:"np\u1D38",nameGap:5,min:f.xmin,max:f.xmax,axisLabel:{showMinLabel:!1,showMaxLabel:!1},axisLine:{onZero:!1}},yAxis:{name:"np\u1D41",nameGap:5,min:f.ymin,max:f.ymax,axisLabel:{showMinLabel:!1,showMaxLabel:!1},axisLine:{onZero:!1}},grid:{left:35,top:30,right:40,bottom:20},series:[{type:"scatter",encode:{x:1,y:0,tooltip:[1,0,3]},tooltip:{valueFormatter:m=>`${m[1]} \u2192 ${Bt(m[2],4)}`},symbolSize:6,markArea:{silent:!0,data:[[{name:"M\xB13\u03C3",coord:[this.stats.mean-2.96*this.stats.meanErr,this.stats.mean-2.96*this.stats.meanErr]},{coord:[this.stats.mean+2.96*this.stats.meanErr,this.stats.mean+2.96*this.stats.meanErr]}]],label:{show:!0,position:"left"},itemStyle:{color:"rgba(0, 0, 200, 0)",borderWidth:1,borderType:"dashed"}},markLine:{silent:!0,symbol:"none",data:[[{name:"low \u03BB, high M",label:{position:"insideMiddleTop"},coord:[this.stats.mean+2.96*this.stats.meanErr,this.l2u(this.stats.mean+2.96*this.stats.meanErr,this.stats.lucky.shareLo,this.stats.mean+2.96*this.stats.meanErr)]},{coord:[this.modelCSweep.psGridDotsMap.xmax,this.l2u(this.modelCSweep.psGridDotsMap.xmax,this.stats.lucky.shareLo,this.stats.mean+2.96*this.stats.meanErr)]}],[{name:"high \u03BB, low M",label:{position:"insideMiddleBottom"},coord:[this.stats.mean-2.96*this.stats.meanErr,this.l2u(this.stats.mean-2.96*this.stats.meanErr,this.stats.lucky.shareHi,this.stats.mean-2.96*this.stats.meanErr)]},{coord:[this.modelCSweep.psGridDotsMap.xmax,this.l2u(this.modelCSweep.psGridDotsMap.xmax,this.stats.lucky.shareHi,this.stats.mean-2.96*this.stats.meanErr)]}]]}}],visualMap:{...p,...v}}}}},Iie=w("span",{class:"title"},"Model C",-1),Oie=w("br",null,null,-1),Rie={style:{float:"left"}},Die={key:0,style:{width:"570px",height:"270px"}},Nie={style:{padding:"1em"}},Fie={style:{float:"left"}},Bie=w("tr",null,[w("th"),w("th",null,"np\u1D41"),w("th",null,"n\u1D41"),w("th",null,"np\u1D38"),w("th",null,"n\u1D38"),w("th",null,"\u03C7\xB2"),w("th",null,"p-val")],-1),$ie=w("td",null,"Best fit:",-1),zie=w("td",null,"Manual:",-1),Vie=U(" np\u1D41: "),Uie=["value","min","max","step"],Gie=U(" n\u1D41: "),jie=["value"],Wie=w("br",null,null,-1),Hie=U(" np\u1D38: "),Xie=["value","min","max","step"],Yie=U(" n\u1D38: "),qie=["value"],Zie=w("div",{style:{clear:"both"}},null,-1),Kie={style:{float:"left"}},Jie={style:{width:"500px",height:"320px"}},Qie=w("div",{style:{clear:"both"}},null,-1);function toe(e,t,r,n,i,o){const a=pe("v-chart");return D(),$(W,null,[Iie,w("span",null," \u2261 some points were taken from a distribution L, and the rest from distribution U, so \u03BB np\u1D38 + (1 - \u03BB) np\u1D41 = M, where \u03BB \u2208 "+L(o.formatFixed(r.stats.lucky.shareLo*100,2))+"\u2026"+L(o.formatFixed(r.stats.lucky.shareHi*100,2))+"%, M \u2208 "+L(o.formatFixed(r.stats.mean-1.96*r.stats.meanErr,2))+"\u2026"+L(o.formatFixed(r.stats.mean+1.96*r.stats.meanErr,2))+", and 0 < np\u1D41 < np\u1D38",1),Oie,U(" "+L(e.progress)+" ",1),w("div",Rie,[o.modelCSweep?(D(),$("div",Die,[kt(a,{option:o.makeChartCGrid},null,8,["option"])])):pt("",!0),w("div",Nie,[w("div",Fie,[w("table",null,[Bie,o.modelCSweep.result?(D(),$("tr",{key:0,class:Sn({strike:r.stats.dBad})},[$ie,w("td",null,L(o.formatFixed(o.modelCSweep.result.npU,2)),1),w("td",null,L(o.modelCSweep.result.nU),1),w("td",null,L(o.formatFixed(o.modelCSweep.result.npL,2)),1),w("td",null,L(o.modelCSweep.result.nL),1),w("td",null,L(o.formatFixed(o.modelCSweep.result.loss.chisq,2)),1),w("td",null,L(o.formatFixed(o.modelCSweep.result.loss.pval,4)),1)],2)):pt("",!0),w("tr",null,[zie,w("td",null,L(o.formatFixed(e.selected_npU,2)),1),w("td",null,L(e.selected_nU),1),w("td",null,L(o.formatFixed(e.selected_npL,2)),1),w("td",null,L(e.selected_nL),1),w("td",null,L(o.formatFixed(o.modelC.loss.chisq,2)),1),w("td",null,L(o.formatFixed(o.modelC.loss.pval,4)),1)])]),w("p",null,[Vie,w("input",{type:"range",onInput:t[0]||(t[0]=s=>o.applySelectedNpU(Number(s.target.value))),value:e.selected_npU,min:r.stats.min,max:r.stats.max,step:.01,class:"vmid"},null,40,Uie),Gie,w("input",{type:"range",onInput:t[1]||(t[1]=s=>o.applySelectedNU(Number(s.target.value))),value:e.selected_nU,min:1,max:200,step:1,class:"vmid"},null,40,jie),Wie,Hie,w("input",{type:"range",onInput:t[2]||(t[2]=s=>o.applySelectedNpL(Number(s.target.value))),value:e.selected_npL,min:r.stats.min,max:r.stats.max,step:.01,class:"vmid"},null,40,Xie),Yie,w("input",{type:"range",onInput:t[3]||(t[3]=s=>o.applySelectedNL(Number(s.target.value))),value:e.selected_nL,min:1,max:200,step:1,class:"vmid"},null,40,qie)])]),Zie])]),w("div",Kie,[w("div",Jie,[kt(a,{option:o.makeChartCHist},null,8,["option"])])]),Qie],64)}const eoe=$e(Lie,[["render",toe]]);Br([hf,hy,R0,D0,vf,pf,gf,N0,vy,py,dy,F0]);const roe={setup(){const e=xt(),t=vY(),r=localStorage.getItem("droprates");return t.$patch(JSON.parse(r)),t.$subscribe((n,i)=>{localStorage.setItem("droprates",JSON.stringify(i))}),{gameStore:e,dropratesStore:t}},components:{VChart:mf,DRMA:hLt,DRMB:kie,DRMC:eoe},provide(){return{[Yct]:Ye(()=>this.darkMode?"dark":"default")}},data(){const e=matchMedia("(prefers-color-scheme: dark)");return{alldata:{},luckyCountConfidence:95/100,hide_buckets:{},darkModeQuery:e,darkMode:e.matches}},created(){this.fetchObservations()},mounted(){this.darkModeQuery.addEventListener("change",()=>{this.darkMode=this.darkModeQuery.matches})},watch:{},computed:{currentDataset(){const e={};if(this.dropratesStore.selected_pzk in this.alldata){const t=this.alldata[this.dropratesStore.selected_pzk];if(this.dropratesStore.selected_ik in t){const r=t[this.dropratesStore.selected_ik];if(this.dropratesStore.selected_specie in r){const n=r[this.dropratesStore.selected_specie];for(let[i,o]of Object.entries(n).sort((a,s)=>a[0]-s[0]))e[i]=o}}}return e},weightedDataset(){let e={};for(let[t,r]of Object.entries(this.currentDataset)){if(this.hide_buckets[t])continue;const n=r.length;let i=[];for(let o=0;o<n;o++){const a=ht.binomial.cdf(o,n,1-t/100);i.push(a)}e[t]={len:n,luckyLen:n*t/100,sorted:[...r].sort((o,a)=>o-a),weights:i}}return e},stats(){const e=this.currentDataset;let t=0,r=0;for(const[g,m]of Object.entries(e))t+=e[g].length,r+=e[g].length;const n=this.weightedDataset;let i=0,o=0;for(let[g,m]of Object.entries(n))for(let y of m.weights)y>this.luckyCountConfidence&&o++,y>1-this.luckyCountConfidence&&i++;let a=[],s=[],l=0,u=100,c=0;for(const[g,m]of Object.entries(n)){u=Math.min(u,g),c=Math.max(c,g);let{len:y,luckyLen:_,sorted:b,weights:T}=m;l+=_,a.push(...b),s.push(...T)}const f={lenRaw:t,dataRaw:e,dataByLuck:n,minLuck:u,maxLuck:c,dataFlatSorted:a,weightsFlat:s,len:a.length,min:ht.min(a),max:ht.max(a),range:ht.range(a),mean:ht.mean(a),meanErr:0,meanLo:0,meanHi:0,std:ht.stdev(a,!0),bell:[],modelA:{n:NaN,bell:[]},chanceLuckyBinom:[],histo:[],ps:{pU:0,pL:0,loss:NaN},chiSqA:0,chiSqD:0,rssA:0,rssD:0,sweepLogA:[],sweepLogD:[],aBad:!1,dBad:!1,psGrid:[],psGridPath:[],psGridDots:[],dEqualsA:!1};f.meanErr=Math.sqrt(f.mean/150*(1-f.mean/150)/f.len*150),f.meanLo=f.mean-3*f.meanErr,f.meanHi=f.mean+3*f.meanErr,f.lucky={len:l,share:l/f.len,mean:0,std:0,lenHi:i,lenLo:o,shareHi:i/f.len,shareLo:o/f.len},f.unlucky={len:f.len-l,share:1-f.lucky.share,mean:0,std:0};let h=0,d=0;for(const[g,m]of Object.entries(n)){let{len:y,luckyLen:_,luckeyLen95:b,sorted:T,weights:S}=m;for(let P=0;P<y;P++){const C=T[P],A=S[P];h+=C*(1-A),d+=C*A}}f.unlucky.mean=h/f.unlucky.len,f.lucky.mean=d/f.lucky.len;let p=0,v=0;for(const[g,m]of Object.entries(n)){let{len:y,sorted:_,weights:b}=m;for(let T=0;T<y;T++){const S=b[T],P=_[T]-f.unlucky.mean;p+=P*P*(1-S);const C=_[T]-f.lucky.mean;v+=C*C*S}}return f.unlucky.std=Math.sqrt(p/f.unlucky.len),f.lucky.std=Math.sqrt(v/f.lucky.len),console.log("stats",f),f},histogram(){const e={arr:[],map:{}};if(this.stats.range>0){let t=[1];t=ht.histogram(this.stats.dataFlatSorted,this.stats.range+1);const n=Array.from(Array(this.stats.range+1).keys()).map(i=>[this.stats.min+i,t[i]]);e.arr=n;for(let i=0;i<t.length;i++)e.map[this.stats.min+i]=t[i]}else e.arr=[[this.stats.min,this.stats.len]],e.map[this.stats.min]=this.stats.len;return console.log("histogram",e),e}},methods:{formatFixed:Bt,makeIconSrc:Mo,async fetchObservations(){const e=Date.now();this.alldata=await(await fetch("data/manual/yields_observed.json")).json();const t=this.dropratesStore.selected_pzk;this.dropratesStore.selected_pzk=t&&this.alldata[t]?t:Object.keys(this.alldata)[0];const r=this.dropratesStore.selected_ik;this.dropratesStore.selected_ik=r&&this.alldata[t][r]?r:Object.keys(this.alldata[t])[0];const n=this.dropratesStore.selected_specie;this.dropratesStore.selected_specie=n&&this.alldata[t][r][n]?n:Object.keys(this.alldata[t][r])[0],console.log("fetchObservations took",Date.now()-e,"ms",this.dropratesStore.selected_pzk,this.dropratesStore.selected_ik,this.dropratesStore.selected_specie)},activate(e,t,r){this.dropratesStore.selected_pzk=e,this.dropratesStore.selected_ik=t,this.dropratesStore.selected_specie=r}}},Ns=e=>(cn("data-v-bcf165fa"),e=e(),fn(),e),noe={id:"menu"},ioe={style:{display:"none"}},ooe=["src"],aoe=["onClick"],soe={key:1,class:"pressed"},loe={id:"content"},uoe=Ns(()=>w("tr",null,[w("td",null,"mute"),w("td",null,"luck")],-1)),coe={class:"center"},foe=["onUpdate:modelValue"],hoe=U(" Possible luck procs observed with 95% confidence: "),doe=Ns(()=>w("tr",null,[w("th"),w("th",null,"min"),w("th",null,"max")],-1)),poe=Ns(()=>w("td",null,"combined count",-1)),voe=Ns(()=>w("td",null,"% of total",-1)),goe={id:"settings"},moe=U(" Use model:"),yoe=Ns(()=>w("br",null,null,-1)),_oe=Ns(()=>w("label",{for:"option1"},[U("A. Same item drop regardless of luck (plants, lumber, ores)"),w("br")],-1)),boe=Ns(()=>w("label",{for:"option2"},[U("B. Item only drops when luck procs (sacks, lumbering rares)"),w("br")],-1)),woe=Ns(()=>w("label",{for:"option3"},[U("C. Different drops when luck procs and when not (eggs, honey)"),w("br")],-1)),Soe={key:0,id:"modelA",style:{float:"left"}},Toe={key:1},Poe={key:2};function Eoe(e,t,r,n,i,o){const a=pe("RouterLink"),s=pe("DRMA"),l=pe("DRMB"),u=pe("DRMC");return D(),$("main",null,[w("div",noe,[w("div",ioe,L(n.dropratesStore.selected_pzk)+" "+L(n.dropratesStore.selected_ik)+" "+L(n.dropratesStore.selected_specie),1),(D(!0),$(W,null,Nt(i.alldata,(c,f)=>(D(),$(W,null,[kt(a,{tag:"a",to:{path:"./",hash:"#node"+f}},{default:Le(()=>[U(L(n.gameStore.plantzoneName(f)),1)]),_:2},1032,["to"]),w("ul",null,[(D(!0),$(W,null,Nt(c,(h,d)=>(D(),$("li",null,[kt(a,{tag:"a",to:{path:"./settings",hash:"#item"+d}},{default:Le(()=>[w("span",null,[w("img",{src:o.makeIconSrc(d),class:"iconitem"},null,8,ooe)])]),_:2},1032,["to"]),U(" "+L(n.gameStore.itemName(d))+" ",1),(D(!0),$(W,null,Nt(h,(p,v)=>(D(),$(W,null,[f!=n.dropratesStore.selected_pzk||d!=n.dropratesStore.selected_ik||v!=n.dropratesStore.selected_specie?(D(),$("button",{key:0,onClick:g=>o.activate(f,d,v)},L(Object.values(p).flat().length)+" "+L(v),9,aoe)):(D(),$("button",soe,L(Object.values(p).flat().length)+" "+L(v),1))],64))),256))]))),256))])],64))),256))]),w("div",loe,[w("details",null,[w("summary",null,[U("Dataset: size N = "+L(o.stats.len)+", mean M = "+L(o.formatFixed(o.stats.mean,2))+"\xB1"+L(o.formatFixed(1.96*o.stats.meanErr,2))+", ",1),this.stats.minLuck==this.stats.maxLuck?(D(),$(W,{key:0},[U(L(this.stats.maxLuck),1)],64)):(D(),$(W,{key:1},[U(L(o.formatFixed(this.stats.minLuck,2))+"\u2026"+L(o.formatFixed(this.stats.maxLuck,2)),1)],64)),U("\u{1F340} \u2192 \u03BB \u2208 "+L(o.formatFixed(o.stats.lucky.shareLo*100,2))+"\u2026"+L(o.formatFixed(o.stats.lucky.shareHi*100,2))+"% cycles were lucky ",1)]),w("div",null,[w("table",null,[uoe,(D(!0),$(W,null,Nt(o.stats.dataRaw,(c,f)=>(D(),$("tr",{class:Sn({strike:i.hide_buckets[f]})},[w("td",coe,[Tt(w("input",{"onUpdate:modelValue":h=>i.hide_buckets[f]=h,type:"checkbox"},null,8,foe),[[Kn,i.hide_buckets[f]]])]),w("td",null,L(f),1),(D(!0),$(W,null,Nt(c,h=>(D(),$("td",null,L(h),1))),256))],2))),256))])]),w("p",null,[hoe,w("table",null,[doe,w("tr",null,[poe,w("td",null,L(o.stats.lucky.lenLo),1),w("td",null,L(o.stats.lucky.lenHi),1)]),w("tr",null,[voe,w("td",null,L(o.formatFixed(o.stats.lucky.shareLo*100,2)),1),w("td",null,L(o.formatFixed(o.stats.lucky.shareHi*100,2)),1)])])])]),w("div",goe,[moe,yoe,Tt(w("input",{type:"radio",id:"option1",value:"a","onUpdate:modelValue":t[0]||(t[0]=c=>n.dropratesStore.selected_model=c)},null,512),[[sd,n.dropratesStore.selected_model]]),_oe,Tt(w("input",{type:"radio",id:"option2",value:"b","onUpdate:modelValue":t[1]||(t[1]=c=>n.dropratesStore.selected_model=c)},null,512),[[sd,n.dropratesStore.selected_model]]),boe,Tt(w("input",{type:"radio",id:"option3",value:"c","onUpdate:modelValue":t[2]||(t[2]=c=>n.dropratesStore.selected_model=c)},null,512),[[sd,n.dropratesStore.selected_model]]),woe]),n.dropratesStore.selected_model=="a"?(D(),$("div",Soe,[kt(s,{stats:o.stats,histogram:o.histogram},null,8,["stats","histogram"])])):pt("",!0),n.dropratesStore.selected_model=="b"?(D(),$("div",Toe,[kt(l,{stats:o.stats,histogram:o.histogram},null,8,["stats","histogram"])])):pt("",!0),n.dropratesStore.selected_model=="c"?(D(),$("div",Poe,[kt(u,{stats:o.stats,histogram:o.histogram},null,8,["stats","histogram"])])):pt("",!0)])])}const Aoe=$e(roe,[["render",Eoe],["__scopeId","data-v-bcf165fa"]]),Coe=aY({history:TX("/workerman/"),routes:[{path:"/",name:"home",component:QEt},{path:"/plantzones",component:PAt},{path:"/modifiers",component:uCt},{path:"/settings",component:NMt},{path:"/about",component:()=>CY(()=>import("./AboutView.df9bcd9f.js"),[])},{path:"/othertowns",component:UMt},{path:"/workshops",component:ikt},{path:"/housecraft",component:wkt},{path:"/droprates",component:Aoe},{path:"/lodging",component:NAt}]});const _C=xH(PY),Moe=rX();_C.use(Moe);_C.use(Coe);_C.mount("#app");export{W as F,$e as _,w as a,U as b,$ as c,kt as d,lP as e,pe as f,fn as g,D as o,cn as p,MW as r,Le as w};
