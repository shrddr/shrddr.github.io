function rK(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();function ub(e,t){const r=Object.create(null),n=e.split(",");for(let i=0;i<n.length;i++)r[n[i]]=!0;return t?i=>!!r[i.toLowerCase()]:i=>!!r[i]}const nK="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",iK=ub(nK),oK="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",aK=ub(oK);function tF(e){return!!e||e===""}function cs(e){if(Ht(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],i=wr(n)?uK(n):cs(n);if(i)for(const o in i)t[o]=i[o]}return t}else{if(wr(e))return e;if(Ar(e))return e}}const sK=/;(?![^(]*\))/g,lK=/:(.+)/;function uK(e){const t={};return e.split(sK).forEach(r=>{if(r){const n=r.split(lK);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Ur(e){let t="";if(wr(e))t=e;else if(Ht(e))for(let r=0;r<e.length;r++){const n=Ur(e[r]);n&&(t+=n+" ")}else if(Ar(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}function cK(e){if(!e)return null;let{class:t,style:r}=e;return t&&!wr(t)&&(e.class=Ur(t)),r&&(e.style=cs(r)),e}function fK(e,t){if(e.length!==t.length)return!1;let r=!0;for(let n=0;r&&n<e.length;n++)r=Nl(e[n],t[n]);return r}function Nl(e,t){if(e===t)return!0;let r=aM(e),n=aM(t);if(r||n)return r&&n?e.getTime()===t.getTime():!1;if(r=tv(e),n=tv(t),r||n)return e===t;if(r=Ht(e),n=Ht(t),r||n)return r&&n?fK(e,t):!1;if(r=Ar(e),n=Ar(t),r||n){if(!r||!n)return!1;const i=Object.keys(e).length,o=Object.keys(t).length;if(i!==o)return!1;for(const a in e){const s=e.hasOwnProperty(a),l=t.hasOwnProperty(a);if(s&&!l||!s&&l||!Nl(e[a],t[a]))return!1}}return String(e)===String(t)}function cb(e,t){return e.findIndex(r=>Nl(r,t))}const M=e=>wr(e)?e:e==null?"":Ht(e)||Ar(e)&&(e.toString===rF||!ie(e.toString))?JSON.stringify(e,eF,2):String(e),eF=(e,t)=>t&&t.__v_isRef?eF(e,t.value):_h(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[n,i])=>(r[`${n} =>`]=i,r),{})}:Nc(t)?{[`Set(${t.size})`]:[...t.values()]}:Ar(t)&&!Ht(t)&&!nF(t)?String(t):t,Ue={},yh=[],Mo=()=>{},hK=()=>!1,dK=/^on[^a-z]/,Vv=e=>dK.test(e),vC=e=>e.startsWith("onUpdate:"),Cr=Object.assign,mC=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},pK=Object.prototype.hasOwnProperty,Re=(e,t)=>pK.call(e,t),Ht=Array.isArray,_h=e=>Uv(e)==="[object Map]",Nc=e=>Uv(e)==="[object Set]",aM=e=>Uv(e)==="[object Date]",ie=e=>typeof e=="function",wr=e=>typeof e=="string",tv=e=>typeof e=="symbol",Ar=e=>e!==null&&typeof e=="object",yC=e=>Ar(e)&&ie(e.then)&&ie(e.catch),rF=Object.prototype.toString,Uv=e=>rF.call(e),gK=e=>Uv(e).slice(8,-1),nF=e=>Uv(e)==="[object Object]",_C=e=>wr(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,fg=ub(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),fb=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},vK=/-(\w)/g,Si=fb(e=>e.replace(vK,(t,r)=>r?r.toUpperCase():"")),mK=/\B([A-Z])/g,ba=fb(e=>e.replace(mK,"-$1").toLowerCase()),Wv=fb(e=>e.charAt(0).toUpperCase()+e.slice(1)),hg=fb(e=>e?`on${Wv(e)}`:""),Rh=(e,t)=>!Object.is(e,t),bh=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},Vy=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},Fl=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let sM;const yK=()=>sM||(sM=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let di;class bC{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&di&&(this.parent=di,this.index=(di.scopes||(di.scopes=[])).push(this)-1)}run(t){if(this.active){const r=di;try{return di=this,t()}finally{di=r}}}on(){di=this}off(){di=this.parent}stop(t){if(this.active){let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.scopes)for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);if(this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.active=!1}}}function wC(e){return new bC(e)}function iF(e,t=di){t&&t.active&&t.effects.push(e)}function _K(){return di}function bK(e){di&&di.cleanups.push(e)}const SC=e=>{const t=new Set(e);return t.w=0,t.n=0,t},oF=e=>(e.w&$l)>0,aF=e=>(e.n&$l)>0,wK=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=$l},SK=e=>{const{deps:t}=e;if(t.length){let r=0;for(let n=0;n<t.length;n++){const i=t[n];oF(i)&&!aF(i)?i.delete(e):t[r++]=i,i.w&=~$l,i.n&=~$l}t.length=r}},ik=new WeakMap;let Up=0,$l=1;const ok=30;let ko;const ic=Symbol(""),ak=Symbol("");class jv{constructor(t,r=null,n){this.fn=t,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,iF(this,n)}run(){if(!this.active)return this.fn();let t=ko,r=Cl;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=ko,ko=this,Cl=!0,$l=1<<++Up,Up<=ok?wK(this):lM(this),this.fn()}finally{Up<=ok&&SK(this),$l=1<<--Up,ko=this.parent,Cl=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){ko===this?this.deferStop=!0:this.active&&(lM(this),this.onStop&&this.onStop(),this.active=!1)}}function lM(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}function TK(e,t){e.effect&&(e=e.effect.fn);const r=new jv(e);t&&(Cr(r,t),t.scope&&iF(r,t.scope)),(!t||!t.lazy)&&r.run();const n=r.run.bind(r);return n.effect=r,n}function kK(e){e.effect.stop()}let Cl=!0;const sF=[];function Fc(){sF.push(Cl),Cl=!1}function $c(){const e=sF.pop();Cl=e===void 0?!0:e}function Ti(e,t,r){if(Cl&&ko){let n=ik.get(e);n||ik.set(e,n=new Map);let i=n.get(r);i||n.set(r,i=SC()),lF(i)}}function lF(e,t){let r=!1;Up<=ok?aF(e)||(e.n|=$l,r=!oF(e)):r=!e.has(ko),r&&(e.add(ko),ko.deps.push(e))}function gs(e,t,r,n,i,o){const a=ik.get(e);if(!a)return;let s=[];if(t==="clear")s=[...a.values()];else if(r==="length"&&Ht(e))a.forEach((l,u)=>{(u==="length"||u>=n)&&s.push(l)});else switch(r!==void 0&&s.push(a.get(r)),t){case"add":Ht(e)?_C(r)&&s.push(a.get("length")):(s.push(a.get(ic)),_h(e)&&s.push(a.get(ak)));break;case"delete":Ht(e)||(s.push(a.get(ic)),_h(e)&&s.push(a.get(ak)));break;case"set":_h(e)&&s.push(a.get(ic));break}if(s.length===1)s[0]&&sk(s[0]);else{const l=[];for(const u of s)u&&l.push(...u);sk(SC(l))}}function sk(e,t){const r=Ht(e)?e:[...e];for(const n of r)n.computed&&uM(n);for(const n of r)n.computed||uM(n)}function uM(e,t){(e!==ko||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const PK=ub("__proto__,__v_isRef,__isVue"),uF=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(tv)),EK=hb(),CK=hb(!1,!0),AK=hb(!0),xK=hb(!0,!0),cM=MK();function MK(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const n=pe(this);for(let o=0,a=this.length;o<a;o++)Ti(n,"get",o+"");const i=n[t](...r);return i===-1||i===!1?n[t](...r.map(pe)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){Fc();const n=pe(this)[t].apply(this,r);return $c(),n}}),e}function hb(e=!1,t=!1){return function(n,i,o){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&o===(e?t?vF:gF:t?pF:dF).get(n))return n;const a=Ht(n);if(!e&&a&&Re(cM,i))return Reflect.get(cM,i,o);const s=Reflect.get(n,i,o);return(tv(i)?uF.has(i):PK(i))||(e||Ti(n,"get",i),t)?s:pr(s)?a&&_C(i)?s:s.value:Ar(s)?e?kC(s):Bc(s):s}}const IK=cF(),LK=cF(!0);function cF(e=!1){return function(r,n,i,o){let a=r[n];if(Dh(a)&&pr(a)&&!pr(i))return!1;if(!e&&!Dh(i)&&(Uy(i)||(i=pe(i),a=pe(a)),!Ht(r)&&pr(a)&&!pr(i)))return a.value=i,!0;const s=Ht(r)&&_C(n)?Number(n)<r.length:Re(r,n),l=Reflect.set(r,n,i,o);return r===pe(o)&&(s?Rh(i,a)&&gs(r,"set",n,i):gs(r,"add",n,i)),l}}function OK(e,t){const r=Re(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&r&&gs(e,"delete",t,void 0),n}function RK(e,t){const r=Reflect.has(e,t);return(!tv(t)||!uF.has(t))&&Ti(e,"has",t),r}function DK(e){return Ti(e,"iterate",Ht(e)?"length":ic),Reflect.ownKeys(e)}const fF={get:EK,set:IK,deleteProperty:OK,has:RK,ownKeys:DK},hF={get:AK,set(e,t){return!0},deleteProperty(e,t){return!0}},NK=Cr({},fF,{get:CK,set:LK}),FK=Cr({},hF,{get:xK}),TC=e=>e,db=e=>Reflect.getPrototypeOf(e);function I0(e,t,r=!1,n=!1){e=e.__v_raw;const i=pe(e),o=pe(t);r||(t!==o&&Ti(i,"get",t),Ti(i,"get",o));const{has:a}=db(i),s=n?TC:r?EC:ev;if(a.call(i,t))return s(e.get(t));if(a.call(i,o))return s(e.get(o));e!==i&&e.get(t)}function L0(e,t=!1){const r=this.__v_raw,n=pe(r),i=pe(e);return t||(e!==i&&Ti(n,"has",e),Ti(n,"has",i)),e===i?r.has(e):r.has(e)||r.has(i)}function O0(e,t=!1){return e=e.__v_raw,!t&&Ti(pe(e),"iterate",ic),Reflect.get(e,"size",e)}function fM(e){e=pe(e);const t=pe(this);return db(t).has.call(t,e)||(t.add(e),gs(t,"add",e,e)),this}function hM(e,t){t=pe(t);const r=pe(this),{has:n,get:i}=db(r);let o=n.call(r,e);o||(e=pe(e),o=n.call(r,e));const a=i.call(r,e);return r.set(e,t),o?Rh(t,a)&&gs(r,"set",e,t):gs(r,"add",e,t),this}function dM(e){const t=pe(this),{has:r,get:n}=db(t);let i=r.call(t,e);i||(e=pe(e),i=r.call(t,e)),n&&n.call(t,e);const o=t.delete(e);return i&&gs(t,"delete",e,void 0),o}function pM(){const e=pe(this),t=e.size!==0,r=e.clear();return t&&gs(e,"clear",void 0,void 0),r}function R0(e,t){return function(n,i){const o=this,a=o.__v_raw,s=pe(a),l=t?TC:e?EC:ev;return!e&&Ti(s,"iterate",ic),a.forEach((u,c)=>n.call(i,l(u),l(c),o))}}function D0(e,t,r){return function(...n){const i=this.__v_raw,o=pe(i),a=_h(o),s=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,u=i[e](...n),c=r?TC:t?EC:ev;return!t&&Ti(o,"iterate",l?ak:ic),{next(){const{value:f,done:h}=u.next();return h?{value:f,done:h}:{value:s?[c(f[0]),c(f[1])]:c(f),done:h}},[Symbol.iterator](){return this}}}}function Ns(e){return function(...t){return e==="delete"?!1:this}}function $K(){const e={get(o){return I0(this,o)},get size(){return O0(this)},has:L0,add:fM,set:hM,delete:dM,clear:pM,forEach:R0(!1,!1)},t={get(o){return I0(this,o,!1,!0)},get size(){return O0(this)},has:L0,add:fM,set:hM,delete:dM,clear:pM,forEach:R0(!1,!0)},r={get(o){return I0(this,o,!0)},get size(){return O0(this,!0)},has(o){return L0.call(this,o,!0)},add:Ns("add"),set:Ns("set"),delete:Ns("delete"),clear:Ns("clear"),forEach:R0(!0,!1)},n={get(o){return I0(this,o,!0,!0)},get size(){return O0(this,!0)},has(o){return L0.call(this,o,!0)},add:Ns("add"),set:Ns("set"),delete:Ns("delete"),clear:Ns("clear"),forEach:R0(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{e[o]=D0(o,!1,!1),r[o]=D0(o,!0,!1),t[o]=D0(o,!1,!0),n[o]=D0(o,!0,!0)}),[e,r,t,n]}const[BK,zK,VK,UK]=$K();function pb(e,t){const r=t?e?UK:VK:e?zK:BK;return(n,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(Re(r,i)&&i in n?r:n,i,o)}const WK={get:pb(!1,!1)},jK={get:pb(!1,!0)},GK={get:pb(!0,!1)},HK={get:pb(!0,!0)},dF=new WeakMap,pF=new WeakMap,gF=new WeakMap,vF=new WeakMap;function XK(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function YK(e){return e.__v_skip||!Object.isExtensible(e)?0:XK(gK(e))}function Bc(e){return Dh(e)?e:gb(e,!1,fF,WK,dF)}function mF(e){return gb(e,!1,NK,jK,pF)}function kC(e){return gb(e,!0,hF,GK,gF)}function KK(e){return gb(e,!0,FK,HK,vF)}function gb(e,t,r,n,i){if(!Ar(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=i.get(e);if(o)return o;const a=YK(e);if(a===0)return e;const s=new Proxy(e,a===2?n:r);return i.set(e,s),s}function wa(e){return Dh(e)?wa(e.__v_raw):!!(e&&e.__v_isReactive)}function Dh(e){return!!(e&&e.__v_isReadonly)}function Uy(e){return!!(e&&e.__v_isShallow)}function PC(e){return wa(e)||Dh(e)}function pe(e){const t=e&&e.__v_raw;return t?pe(t):e}function Ui(e){return Vy(e,"__v_skip",!0),e}const ev=e=>Ar(e)?Bc(e):e,EC=e=>Ar(e)?kC(e):e;function CC(e){Cl&&ko&&(e=pe(e),lF(e.dep||(e.dep=SC())))}function vb(e,t){e=pe(e),e.dep&&sk(e.dep)}function pr(e){return!!(e&&e.__v_isRef===!0)}function Al(e){return yF(e,!1)}function dg(e){return yF(e,!0)}function yF(e,t){return pr(e)?e:new ZK(e,t)}class ZK{constructor(t,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?t:pe(t),this._value=r?t:ev(t)}get value(){return CC(this),this._value}set value(t){t=this.__v_isShallow?t:pe(t),Rh(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:ev(t),vb(this))}}function qK(e){vb(e)}function Kr(e){return pr(e)?e.value:e}const JK={get:(e,t,r)=>Kr(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const i=e[t];return pr(i)&&!pr(r)?(i.value=r,!0):Reflect.set(e,t,r,n)}};function AC(e){return wa(e)?e:new Proxy(e,JK)}class QK{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:r,set:n}=t(()=>CC(this),()=>vb(this));this._get=r,this._set=n}get value(){return this._get()}set value(t){this._set(t)}}function tZ(e){return new QK(e)}function Wy(e){const t=Ht(e)?new Array(e.length):{};for(const r in e)t[r]=pg(e,r);return t}class eZ{constructor(t,r,n){this._object=t,this._key=r,this._defaultValue=n,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function pg(e,t,r){const n=e[t];return pr(n)?n:new eZ(e,t,r)}class rZ{constructor(t,r,n,i){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new jv(t,()=>{this._dirty||(this._dirty=!0,vb(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const t=pe(this);return CC(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function nZ(e,t,r=!1){let n,i;const o=ie(e);return o?(n=e,i=Mo):(n=e.get,i=e.set),new rZ(n,i,o||!i,r)}const gg=[];function _F(e,...t){Fc();const r=gg.length?gg[gg.length-1].component:null,n=r&&r.appContext.config.warnHandler,i=iZ();if(n)Sa(n,r,11,[e+t.join(""),r&&r.proxy,i.map(({vnode:o})=>`at <${h$(r,o.type)}>`).join(`
`),i]);else{const o=[`[Vue warn]: ${e}`,...t];i.length&&o.push(`
`,...oZ(i)),console.warn(...o)}$c()}function iZ(){let e=gg[gg.length-1];if(!e)return[];const t=[];for(;e;){const r=t[0];r&&r.vnode===e?r.recurseCount++:t.push({vnode:e,recurseCount:0});const n=e.component&&e.component.parent;e=n&&n.vnode}return t}function oZ(e){const t=[];return e.forEach((r,n)=>{t.push(...n===0?[]:[`
`],...aZ(r))}),t}function aZ({vnode:e,recurseCount:t}){const r=t>0?`... (${t} recursive calls)`:"",n=e.component?e.component.parent==null:!1,i=` at <${h$(e.component,e.type,n)}`,o=">"+r;return e.props?[i,...sZ(e.props),o]:[i+o]}function sZ(e){const t=[],r=Object.keys(e);return r.slice(0,3).forEach(n=>{t.push(...bF(n,e[n]))}),r.length>3&&t.push(" ..."),t}function bF(e,t,r){return wr(t)?(t=JSON.stringify(t),r?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?r?t:[`${e}=${t}`]:pr(t)?(t=bF(e,pe(t.value),!0),r?t:[`${e}=Ref<`,t,">"]):ie(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=pe(t),r?t:[`${e}=`,t])}function Sa(e,t,r,n){let i;try{i=n?e(...n):e()}catch(o){zc(o,t,r)}return i}function _i(e,t,r,n){if(ie(e)){const o=Sa(e,t,r,n);return o&&yC(o)&&o.catch(a=>{zc(a,t,r)}),o}const i=[];for(let o=0;o<e.length;o++)i.push(_i(e[o],t,r,n));return i}function zc(e,t,r,n=!0){const i=t?t.vnode:null;if(t){let o=t.parent;const a=t.proxy,s=r;for(;o;){const u=o.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](e,a,s)===!1)return}o=o.parent}const l=t.appContext.config.errorHandler;if(l){Sa(l,null,10,[e,a,s]);return}}lZ(e,r,i,n)}function lZ(e,t,r,n=!0){console.error(e)}let jy=!1,lk=!1;const mi=[];let is=0;const vg=[];let Wp=null,Zf=0;const mg=[];let cl=null,qf=0;const wF=Promise.resolve();let xC=null,uk=null;function vs(e){const t=xC||wF;return e?t.then(this?e.bind(this):e):t}function uZ(e){let t=is+1,r=mi.length;for(;t<r;){const n=t+r>>>1;rv(mi[n])<e?t=n+1:r=n}return t}function MC(e){(!mi.length||!mi.includes(e,jy&&e.allowRecurse?is+1:is))&&e!==uk&&(e.id==null?mi.push(e):mi.splice(uZ(e.id),0,e),SF())}function SF(){!jy&&!lk&&(lk=!0,xC=wF.then(kF))}function cZ(e){const t=mi.indexOf(e);t>is&&mi.splice(t,1)}function TF(e,t,r,n){Ht(e)?r.push(...e):(!t||!t.includes(e,e.allowRecurse?n+1:n))&&r.push(e),SF()}function fZ(e){TF(e,Wp,vg,Zf)}function IC(e){TF(e,cl,mg,qf)}function mb(e,t=null){if(vg.length){for(uk=t,Wp=[...new Set(vg)],vg.length=0,Zf=0;Zf<Wp.length;Zf++)Wp[Zf]();Wp=null,Zf=0,uk=null,mb(e,t)}}function Gy(e){if(mb(),mg.length){const t=[...new Set(mg)];if(mg.length=0,cl){cl.push(...t);return}for(cl=t,cl.sort((r,n)=>rv(r)-rv(n)),qf=0;qf<cl.length;qf++)cl[qf]();cl=null,qf=0}}const rv=e=>e.id==null?1/0:e.id;function kF(e){lk=!1,jy=!0,mb(e),mi.sort((r,n)=>rv(r)-rv(n));const t=Mo;try{for(is=0;is<mi.length;is++){const r=mi[is];r&&r.active!==!1&&Sa(r,null,14)}}finally{is=0,mi.length=0,Gy(),jy=!1,xC=null,(mi.length||vg.length||mg.length)&&kF(e)}}let Jf,N0=[];function PF(e,t){var r,n;Jf=e,Jf?(Jf.enabled=!0,N0.forEach(({event:i,args:o})=>Jf.emit(i,...o)),N0=[]):typeof window<"u"&&window.HTMLElement&&!(!((n=(r=window.navigator)===null||r===void 0?void 0:r.userAgent)===null||n===void 0)&&n.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(o=>{PF(o,t)}),setTimeout(()=>{Jf||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,N0=[])},3e3)):N0=[]}function hZ(e,t,...r){if(e.isUnmounted)return;const n=e.vnode.props||Ue;let i=r;const o=t.startsWith("update:"),a=o&&t.slice(7);if(a&&a in n){const c=`${a==="modelValue"?"model":a}Modifiers`,{number:f,trim:h}=n[c]||Ue;h&&(i=r.map(d=>d.trim())),f&&(i=r.map(Fl))}let s,l=n[s=hg(t)]||n[s=hg(Si(t))];!l&&o&&(l=n[s=hg(ba(t))]),l&&_i(l,e,6,i);const u=n[s+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,_i(u,e,6,i)}}function EF(e,t,r=!1){const n=t.emitsCache,i=n.get(e);if(i!==void 0)return i;const o=e.emits;let a={},s=!1;if(!ie(e)){const l=u=>{const c=EF(u,t,!0);c&&(s=!0,Cr(a,c))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!o&&!s?(n.set(e,null),null):(Ht(o)?o.forEach(l=>a[l]=null):Cr(a,o),n.set(e,a),a)}function yb(e,t){return!e||!Vv(t)?!1:(t=t.slice(2).replace(/Once$/,""),Re(e,t[0].toLowerCase()+t.slice(1))||Re(e,ba(t))||Re(e,t))}let Cn=null,_b=null;function nv(e){const t=Cn;return Cn=e,_b=e&&e.type.__scopeId||null,t}function er(e){_b=e}function rr(){_b=null}const dZ=e=>Fe;function Fe(e,t=Cn,r){if(!t||e._n)return e;const n=(...i)=>{n._d&&mk(-1);const o=nv(t),a=e(...i);return nv(o),n._d&&mk(1),a};return n._n=!0,n._c=!0,n._d=!0,n}function Q1(e){const{type:t,vnode:r,proxy:n,withProxy:i,props:o,propsOptions:[a],slots:s,attrs:l,emit:u,render:c,renderCache:f,data:h,setupState:d,ctx:p,inheritAttrs:g}=e;let m,v;const y=nv(e);try{if(r.shapeFlag&4){const w=i||n;m=gi(c.call(w,w,f,o,d,h,p)),v=l}else{const w=t;m=gi(w.length>1?w(o,{attrs:l,slots:s,emit:u}):w(o,null)),v=t.props?l:gZ(l)}}catch(w){bg.length=0,zc(w,e,1),m=ht(An)}let b=m;if(v&&g!==!1){const w=Object.keys(v),{shapeFlag:T}=b;w.length&&T&7&&(a&&w.some(vC)&&(v=vZ(v,a)),b=Ca(b,v))}return r.dirs&&(b=Ca(b),b.dirs=b.dirs?b.dirs.concat(r.dirs):r.dirs),r.transition&&(b.transition=r.transition),m=b,nv(y),m}function pZ(e){let t;for(let r=0;r<e.length;r++){const n=e[r];if(Bl(n)){if(n.type!==An||n.children==="v-if"){if(t)return;t=n}}else return}return t}const gZ=e=>{let t;for(const r in e)(r==="class"||r==="style"||Vv(r))&&((t||(t={}))[r]=e[r]);return t},vZ=(e,t)=>{const r={};for(const n in e)(!vC(n)||!(n.slice(9)in t))&&(r[n]=e[n]);return r};function mZ(e,t,r){const{props:n,children:i,component:o}=e,{props:a,children:s,patchFlag:l}=t,u=o.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?gM(n,a,u):!!a;if(l&8){const c=t.dynamicProps;for(let f=0;f<c.length;f++){const h=c[f];if(a[h]!==n[h]&&!yb(u,h))return!0}}}else return(i||s)&&(!s||!s.$stable)?!0:n===a?!1:n?a?gM(n,a,u):!0:!!a;return!1}function gM(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const o=n[i];if(t[o]!==e[o]&&!yb(r,o))return!0}return!1}function LC({vnode:e,parent:t},r){for(;t&&t.subTree===e;)(e=t.vnode).el=r,t=t.parent}const CF=e=>e.__isSuspense,yZ={name:"Suspense",__isSuspense:!0,process(e,t,r,n,i,o,a,s,l,u){e==null?bZ(t,r,n,i,o,a,s,l,u):wZ(e,t,r,n,i,a,s,l,u)},hydrate:SZ,create:OC,normalize:TZ},_Z=yZ;function iv(e,t){const r=e.props&&e.props[t];ie(r)&&r()}function bZ(e,t,r,n,i,o,a,s,l){const{p:u,o:{createElement:c}}=l,f=c("div"),h=e.suspense=OC(e,i,n,t,f,r,o,a,s,l);u(null,h.pendingBranch=e.ssContent,f,null,n,h,o,a),h.deps>0?(iv(e,"onPending"),iv(e,"onFallback"),u(null,e.ssFallback,t,r,n,null,o,a),wh(h,e.ssFallback)):h.resolve()}function wZ(e,t,r,n,i,o,a,s,{p:l,um:u,o:{createElement:c}}){const f=t.suspense=e.suspense;f.vnode=t,t.el=e.el;const h=t.ssContent,d=t.ssFallback,{activeBranch:p,pendingBranch:g,isInFallback:m,isHydrating:v}=f;if(g)f.pendingBranch=h,da(h,g)?(l(g,h,f.hiddenContainer,null,i,f,o,a,s),f.deps<=0?f.resolve():m&&(l(p,d,r,n,i,null,o,a,s),wh(f,d))):(f.pendingId++,v?(f.isHydrating=!1,f.activeBranch=g):u(g,i,f),f.deps=0,f.effects.length=0,f.hiddenContainer=c("div"),m?(l(null,h,f.hiddenContainer,null,i,f,o,a,s),f.deps<=0?f.resolve():(l(p,d,r,n,i,null,o,a,s),wh(f,d))):p&&da(h,p)?(l(p,h,r,n,i,f,o,a,s),f.resolve(!0)):(l(null,h,f.hiddenContainer,null,i,f,o,a,s),f.deps<=0&&f.resolve()));else if(p&&da(h,p))l(p,h,r,n,i,f,o,a,s),wh(f,h);else if(iv(t,"onPending"),f.pendingBranch=h,f.pendingId++,l(null,h,f.hiddenContainer,null,i,f,o,a,s),f.deps<=0)f.resolve();else{const{timeout:y,pendingId:b}=f;y>0?setTimeout(()=>{f.pendingId===b&&f.fallback(d)},y):y===0&&f.fallback(d)}}function OC(e,t,r,n,i,o,a,s,l,u,c=!1){const{p:f,m:h,um:d,n:p,o:{parentNode:g,remove:m}}=u,v=Fl(e.props&&e.props.timeout),y={vnode:e,parent:t,parentComponent:r,isSVG:a,container:n,hiddenContainer:i,anchor:o,deps:0,pendingId:0,timeout:typeof v=="number"?v:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:c,isUnmounted:!1,effects:[],resolve(b=!1){const{vnode:w,activeBranch:T,pendingBranch:S,pendingId:k,effects:E,parentComponent:P,container:C}=y;if(y.isHydrating)y.isHydrating=!1;else if(!b){const R=T&&S.transition&&S.transition.mode==="out-in";R&&(T.transition.afterLeave=()=>{k===y.pendingId&&h(S,C,D,0)});let{anchor:D}=y;T&&(D=p(T),d(T,P,y,!0)),R||h(S,C,D,0)}wh(y,S),y.pendingBranch=null,y.isInFallback=!1;let A=y.parent,L=!1;for(;A;){if(A.pendingBranch){A.effects.push(...E),L=!0;break}A=A.parent}L||IC(E),y.effects=[],iv(w,"onResolve")},fallback(b){if(!y.pendingBranch)return;const{vnode:w,activeBranch:T,parentComponent:S,container:k,isSVG:E}=y;iv(w,"onFallback");const P=p(T),C=()=>{!y.isInFallback||(f(null,b,k,P,S,null,E,s,l),wh(y,b))},A=b.transition&&b.transition.mode==="out-in";A&&(T.transition.afterLeave=C),y.isInFallback=!0,d(T,S,null,!0),A||C()},move(b,w,T){y.activeBranch&&h(y.activeBranch,b,w,T),y.container=b},next(){return y.activeBranch&&p(y.activeBranch)},registerDep(b,w){const T=!!y.pendingBranch;T&&y.deps++;const S=b.vnode.el;b.asyncDep.catch(k=>{zc(k,b,0)}).then(k=>{if(b.isUnmounted||y.isUnmounted||y.pendingId!==b.suspenseId)return;b.asyncResolved=!0;const{vnode:E}=b;yk(b,k,!1),S&&(E.el=S);const P=!S&&b.subTree.el;w(b,E,g(S||b.subTree.el),S?null:p(b.subTree),y,a,l),P&&m(P),LC(b,E.el),T&&--y.deps===0&&y.resolve()})},unmount(b,w){y.isUnmounted=!0,y.activeBranch&&d(y.activeBranch,r,b,w),y.pendingBranch&&d(y.pendingBranch,r,b,w)}};return y}function SZ(e,t,r,n,i,o,a,s,l){const u=t.suspense=OC(t,n,r,e.parentNode,document.createElement("div"),null,i,o,a,s,!0),c=l(e,u.pendingBranch=t.ssContent,r,u,o,a);return u.deps===0&&u.resolve(),c}function TZ(e){const{shapeFlag:t,children:r}=e,n=t&32;e.ssContent=vM(n?r.default:r),e.ssFallback=n?vM(r.fallback):ht(An)}function vM(e){let t;if(ie(e)){const r=_c&&e._c;r&&(e._d=!1,I()),e=e(),r&&(e._d=!0,t=ti,r$())}return Ht(e)&&(e=pZ(e)),e=gi(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(r=>r!==e)),e}function AF(e,t){t&&t.pendingBranch?Ht(e)?t.effects.push(...e):t.effects.push(e):IC(e)}function wh(e,t){e.activeBranch=t;const{vnode:r,parentComponent:n}=e,i=r.el=t.el;n&&n.subTree===r&&(n.vnode.el=i,LC(n,i))}function yg(e,t){if(Vr){let r=Vr.provides;const n=Vr.parent&&Vr.parent.provides;n===r&&(r=Vr.provides=Object.create(n)),r[e]=t}}function Bn(e,t,r=!1){const n=Vr||Cn;if(n){const i=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return r&&ie(t)?t.call(n.proxy):t}}function ck(e,t){return Gv(e,null,t)}function xF(e,t){return Gv(e,null,{flush:"post"})}function kZ(e,t){return Gv(e,null,{flush:"sync"})}const mM={};function Xi(e,t,r){return Gv(e,t,r)}function Gv(e,t,{immediate:r,deep:n,flush:i,onTrack:o,onTrigger:a}=Ue){const s=Vr;let l,u=!1,c=!1;if(pr(e)?(l=()=>e.value,u=Uy(e)):wa(e)?(l=()=>e,n=!0):Ht(e)?(c=!0,u=e.some(v=>wa(v)||Uy(v)),l=()=>e.map(v=>{if(pr(v))return v.value;if(wa(v))return qu(v);if(ie(v))return Sa(v,s,2)})):ie(e)?t?l=()=>Sa(e,s,2):l=()=>{if(!(s&&s.isUnmounted))return f&&f(),_i(e,s,3,[h])}:l=Mo,t&&n){const v=l;l=()=>qu(v())}let f,h=v=>{f=m.onStop=()=>{Sa(v,s,4)}};if($h)return h=Mo,t?r&&_i(t,s,3,[l(),c?[]:void 0,h]):l(),Mo;let d=c?[]:mM;const p=()=>{if(!!m.active)if(t){const v=m.run();(n||u||(c?v.some((y,b)=>Rh(y,d[b])):Rh(v,d)))&&(f&&f(),_i(t,s,3,[v,d===mM?void 0:d,h]),d=v)}else m.run()};p.allowRecurse=!!t;let g;i==="sync"?g=p:i==="post"?g=()=>sn(p,s&&s.suspense):g=()=>fZ(p);const m=new jv(l,g);return t?r?p():d=m.run():i==="post"?sn(m.run.bind(m),s&&s.suspense):m.run(),()=>{m.stop(),s&&s.scope&&mC(s.scope.effects,m)}}function PZ(e,t,r){const n=this.proxy,i=wr(e)?e.includes(".")?MF(n,e):()=>n[e]:e.bind(n,n);let o;ie(t)?o=t:(o=t.handler,r=t);const a=Vr;zl(this);const s=Gv(i,o.bind(n),r);return a?zl(a):xl(),s}function MF(e,t){const r=t.split(".");return()=>{let n=e;for(let i=0;i<r.length&&n;i++)n=n[r[i]];return n}}function qu(e,t){if(!Ar(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),pr(e))qu(e.value,t);else if(Ht(e))for(let r=0;r<e.length;r++)qu(e[r],t);else if(Nc(e)||_h(e))e.forEach(r=>{qu(r,t)});else if(nF(e))for(const r in e)qu(e[r],t);return e}function RC(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return nd(()=>{e.isMounted=!0}),Tb(()=>{e.isUnmounting=!0}),e}const Ai=[Function,Array],EZ={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ai,onEnter:Ai,onAfterEnter:Ai,onEnterCancelled:Ai,onBeforeLeave:Ai,onLeave:Ai,onAfterLeave:Ai,onLeaveCancelled:Ai,onBeforeAppear:Ai,onAppear:Ai,onAfterAppear:Ai,onAppearCancelled:Ai},setup(e,{slots:t}){const r=Bo(),n=RC();let i;return()=>{const o=t.default&&bb(t.default(),!0);if(!o||!o.length)return;let a=o[0];if(o.length>1){for(const g of o)if(g.type!==An){a=g;break}}const s=pe(e),{mode:l}=s;if(n.isLeaving)return iw(a);const u=yM(a);if(!u)return iw(a);const c=Nh(u,s,n,r);yc(u,c);const f=r.subTree,h=f&&yM(f);let d=!1;const{getTransitionKey:p}=u.type;if(p){const g=p();i===void 0?i=g:g!==i&&(i=g,d=!0)}if(h&&h.type!==An&&(!da(u,h)||d)){const g=Nh(h,s,n,r);if(yc(h,g),l==="out-in")return n.isLeaving=!0,g.afterLeave=()=>{n.isLeaving=!1,r.update()},iw(a);l==="in-out"&&u.type!==An&&(g.delayLeave=(m,v,y)=>{const b=IF(n,h);b[String(h.key)]=h,m._leaveCb=()=>{v(),m._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=y})}return a}}},DC=EZ;function IF(e,t){const{leavingVNodes:r}=e;let n=r.get(t.type);return n||(n=Object.create(null),r.set(t.type,n)),n}function Nh(e,t,r,n){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:s,onEnter:l,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:f,onLeave:h,onAfterLeave:d,onLeaveCancelled:p,onBeforeAppear:g,onAppear:m,onAfterAppear:v,onAppearCancelled:y}=t,b=String(e.key),w=IF(r,e),T=(E,P)=>{E&&_i(E,n,9,P)},S=(E,P)=>{const C=P[1];T(E,P),Ht(E)?E.every(A=>A.length<=1)&&C():E.length<=1&&C()},k={mode:o,persisted:a,beforeEnter(E){let P=s;if(!r.isMounted)if(i)P=g||s;else return;E._leaveCb&&E._leaveCb(!0);const C=w[b];C&&da(e,C)&&C.el._leaveCb&&C.el._leaveCb(),T(P,[E])},enter(E){let P=l,C=u,A=c;if(!r.isMounted)if(i)P=m||l,C=v||u,A=y||c;else return;let L=!1;const R=E._enterCb=D=>{L||(L=!0,D?T(A,[E]):T(C,[E]),k.delayedLeave&&k.delayedLeave(),E._enterCb=void 0)};P?S(P,[E,R]):R()},leave(E,P){const C=String(e.key);if(E._enterCb&&E._enterCb(!0),r.isUnmounting)return P();T(f,[E]);let A=!1;const L=E._leaveCb=R=>{A||(A=!0,P(),R?T(p,[E]):T(d,[E]),E._leaveCb=void 0,w[C]===e&&delete w[C])};w[C]=e,h?S(h,[E,L]):L()},clone(E){return Nh(E,t,r,n)}};return k}function iw(e){if(Hv(e))return e=Ca(e),e.children=null,e}function yM(e){return Hv(e)?e.children?e.children[0]:void 0:e}function yc(e,t){e.shapeFlag&6&&e.component?yc(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function bb(e,t=!1,r){let n=[],i=0;for(let o=0;o<e.length;o++){let a=e[o];const s=r==null?a.key:String(r)+String(a.key!=null?a.key:o);a.type===W?(a.patchFlag&128&&i++,n=n.concat(bb(a.children,t,s))):(t||a.type!==An)&&n.push(s!=null?Ca(a,{key:s}):a)}if(i>1)for(let o=0;o<n.length;o++)n[o].patchFlag=-2;return n}function rd(e){return ie(e)?{setup:e,name:e.name}:e}const oc=e=>!!e.type.__asyncLoader;function CZ(e){ie(e)&&(e={loader:e});const{loader:t,loadingComponent:r,errorComponent:n,delay:i=200,timeout:o,suspensible:a=!0,onError:s}=e;let l=null,u,c=0;const f=()=>(c++,l=null,h()),h=()=>{let d;return l||(d=l=t().catch(p=>{if(p=p instanceof Error?p:new Error(String(p)),s)return new Promise((g,m)=>{s(p,()=>g(f()),()=>m(p),c+1)});throw p}).then(p=>d!==l&&l?l:(p&&(p.__esModule||p[Symbol.toStringTag]==="Module")&&(p=p.default),u=p,p)))};return rd({name:"AsyncComponentWrapper",__asyncLoader:h,get __asyncResolved(){return u},setup(){const d=Vr;if(u)return()=>ow(u,d);const p=y=>{l=null,zc(y,d,13,!n)};if(a&&d.suspense||$h)return h().then(y=>()=>ow(y,d)).catch(y=>(p(y),()=>n?ht(n,{error:y}):null));const g=Al(!1),m=Al(),v=Al(!!i);return i&&setTimeout(()=>{v.value=!1},i),o!=null&&setTimeout(()=>{if(!g.value&&!m.value){const y=new Error(`Async component timed out after ${o}ms.`);p(y),m.value=y}},o),h().then(()=>{g.value=!0,d.parent&&Hv(d.parent.vnode)&&MC(d.parent.update)}).catch(y=>{p(y),m.value=y}),()=>{if(g.value&&u)return ow(u,d);if(m.value&&n)return ht(n,{error:m.value});if(r&&!v.value)return ht(r)}}})}function ow(e,{vnode:{ref:t,props:r,children:n,shapeFlag:i},parent:o}){const a=ht(e,r,n);return a.ref=t,a}const Hv=e=>e.type.__isKeepAlive,AZ={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const r=Bo(),n=r.ctx;if(!n.renderer)return()=>{const y=t.default&&t.default();return y&&y.length===1?y[0]:y};const i=new Map,o=new Set;let a=null;const s=r.suspense,{renderer:{p:l,m:u,um:c,o:{createElement:f}}}=n,h=f("div");n.activate=(y,b,w,T,S)=>{const k=y.component;u(y,b,w,0,s),l(k.vnode,y,b,w,k,s,T,y.slotScopeIds,S),sn(()=>{k.isDeactivated=!1,k.a&&bh(k.a);const E=y.props&&y.props.onVnodeMounted;E&&Zn(E,k.parent,y)},s)},n.deactivate=y=>{const b=y.component;u(y,h,null,1,s),sn(()=>{b.da&&bh(b.da);const w=y.props&&y.props.onVnodeUnmounted;w&&Zn(w,b.parent,y),b.isDeactivated=!0},s)};function d(y){aw(y),c(y,r,s,!0)}function p(y){i.forEach((b,w)=>{const T=Zy(b.type);T&&(!y||!y(T))&&g(w)})}function g(y){const b=i.get(y);!a||b.type!==a.type?d(b):a&&aw(a),i.delete(y),o.delete(y)}Xi(()=>[e.include,e.exclude],([y,b])=>{y&&p(w=>jp(y,w)),b&&p(w=>!jp(b,w))},{flush:"post",deep:!0});let m=null;const v=()=>{m!=null&&i.set(m,sw(r.subTree))};return nd(v),Sb(v),Tb(()=>{i.forEach(y=>{const{subTree:b,suspense:w}=r,T=sw(b);if(y.type===T.type){aw(T);const S=T.component.da;S&&sn(S,w);return}d(y)})}),()=>{if(m=null,!t.default)return null;const y=t.default(),b=y[0];if(y.length>1)return a=null,y;if(!Bl(b)||!(b.shapeFlag&4)&&!(b.shapeFlag&128))return a=null,b;let w=sw(b);const T=w.type,S=Zy(oc(w)?w.type.__asyncResolved||{}:T),{include:k,exclude:E,max:P}=e;if(k&&(!S||!jp(k,S))||E&&S&&jp(E,S))return a=w,b;const C=w.key==null?T:w.key,A=i.get(C);return w.el&&(w=Ca(w),b.shapeFlag&128&&(b.ssContent=w)),m=C,A?(w.el=A.el,w.component=A.component,w.transition&&yc(w,w.transition),w.shapeFlag|=512,o.delete(C),o.add(C)):(o.add(C),P&&o.size>parseInt(P,10)&&g(o.values().next().value)),w.shapeFlag|=256,a=w,CF(b.type)?b:w}}},xZ=AZ;function jp(e,t){return Ht(e)?e.some(r=>jp(r,t)):wr(e)?e.split(",").includes(t):e.test?e.test(t):!1}function LF(e,t){RF(e,"a",t)}function OF(e,t){RF(e,"da",t)}function RF(e,t,r=Vr){const n=e.__wdc||(e.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(wb(t,n,r),r){let i=r.parent;for(;i&&i.parent;)Hv(i.parent.vnode)&&MZ(n,t,r,i),i=i.parent}}function MZ(e,t,r,n){const i=wb(t,e,n,!0);id(()=>{mC(n[t],i)},r)}function aw(e){let t=e.shapeFlag;t&256&&(t-=256),t&512&&(t-=512),e.shapeFlag=t}function sw(e){return e.shapeFlag&128?e.ssContent:e}function wb(e,t,r=Vr,n=!1){if(r){const i=r[e]||(r[e]=[]),o=t.__weh||(t.__weh=(...a)=>{if(r.isUnmounted)return;Fc(),zl(r);const s=_i(t,r,e,a);return xl(),$c(),s});return n?i.unshift(o):i.push(o),o}}const Es=e=>(t,r=Vr)=>(!$h||e==="sp")&&wb(e,t,r),DF=Es("bm"),nd=Es("m"),NF=Es("bu"),Sb=Es("u"),Tb=Es("bum"),id=Es("um"),FF=Es("sp"),$F=Es("rtg"),BF=Es("rtc");function zF(e,t=Vr){wb("ec",e,t)}function at(e,t){const r=Cn;if(r===null)return e;const n=Pb(r)||r.proxy,i=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[a,s,l,u=Ue]=t[o];ie(a)&&(a={mounted:a,updated:a}),a.deep&&qu(s),i.push({dir:a,instance:n,value:s,oldValue:void 0,arg:l,modifiers:u})}return e}function ha(e,t,r,n){const i=e.dirs,o=t&&t.dirs;for(let a=0;a<i.length;a++){const s=i[a];o&&(s.oldValue=o[a].value);let l=s.dir[n];l&&(Fc(),_i(l,r,8,[e.el,s,e,t]),$c())}}const NC="components",IZ="directives";function Gt(e,t){return FC(NC,e,!0,t)||e}const VF=Symbol();function UF(e){return wr(e)?FC(NC,e,!1)||e:e||VF}function LZ(e){return FC(IZ,e)}function FC(e,t,r=!0,n=!1){const i=Cn||Vr;if(i){const o=i.type;if(e===NC){const s=Zy(o,!1);if(s&&(s===t||s===Si(t)||s===Wv(Si(t))))return o}const a=_M(i[e]||o[e],t)||_M(i.appContext[e],t);return!a&&n?o:a}}function _M(e,t){return e&&(e[t]||e[Si(t)]||e[Wv(Si(t))])}function Pt(e,t,r,n){let i;const o=r&&r[n];if(Ht(e)||wr(e)){i=new Array(e.length);for(let a=0,s=e.length;a<s;a++)i[a]=t(e[a],a,void 0,o&&o[a])}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,o&&o[a])}else if(Ar(e))if(e[Symbol.iterator])i=Array.from(e,(a,s)=>t(a,s,void 0,o&&o[s]));else{const a=Object.keys(e);i=new Array(a.length);for(let s=0,l=a.length;s<l;s++){const u=a[s];i[s]=t(e[u],u,s,o&&o[s])}}else i=[];return r&&(r[n]=i),i}function OZ(e,t){for(let r=0;r<t.length;r++){const n=t[r];if(Ht(n))for(let i=0;i<n.length;i++)e[n[i].name]=n[i].fn;else n&&(e[n.name]=n.fn)}return e}function WF(e,t,r={},n,i){if(Cn.isCE||Cn.parent&&oc(Cn.parent)&&Cn.parent.isCE)return ht("slot",t==="default"?null:{name:t},n&&n());let o=e[t];o&&o._c&&(o._d=!1),I();const a=o&&jF(o(r)),s=qr(W,{key:r.key||`_${t}`},a||(n?n():[]),a&&e._===1?64:-2);return!i&&s.scopeId&&(s.slotScopeIds=[s.scopeId+"-s"]),o&&o._c&&(o._d=!0),s}function jF(e){return e.some(t=>Bl(t)?!(t.type===An||t.type===W&&!jF(t.children)):!0)?e:null}function RZ(e){const t={};for(const r in e)t[hg(r)]=e[r];return t}const fk=e=>e?l$(e)?Pb(e)||e.proxy:fk(e.parent):null,Hy=Cr(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>fk(e.parent),$root:e=>fk(e.root),$emit:e=>e.emit,$options:e=>HF(e),$forceUpdate:e=>e.f||(e.f=()=>MC(e.update)),$nextTick:e=>e.n||(e.n=vs.bind(e.proxy)),$watch:e=>PZ.bind(e)}),hk={get({_:e},t){const{ctx:r,setupState:n,data:i,props:o,accessCache:a,type:s,appContext:l}=e;let u;if(t[0]!=="$"){const d=a[t];if(d!==void 0)switch(d){case 1:return n[t];case 2:return i[t];case 4:return r[t];case 3:return o[t]}else{if(n!==Ue&&Re(n,t))return a[t]=1,n[t];if(i!==Ue&&Re(i,t))return a[t]=2,i[t];if((u=e.propsOptions[0])&&Re(u,t))return a[t]=3,o[t];if(r!==Ue&&Re(r,t))return a[t]=4,r[t];dk&&(a[t]=0)}}const c=Hy[t];let f,h;if(c)return t==="$attrs"&&Ti(e,"get",t),c(e);if((f=s.__cssModules)&&(f=f[t]))return f;if(r!==Ue&&Re(r,t))return a[t]=4,r[t];if(h=l.config.globalProperties,Re(h,t))return h[t]},set({_:e},t,r){const{data:n,setupState:i,ctx:o}=e;return i!==Ue&&Re(i,t)?(i[t]=r,!0):n!==Ue&&Re(n,t)?(n[t]=r,!0):Re(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:n,appContext:i,propsOptions:o}},a){let s;return!!r[a]||e!==Ue&&Re(e,a)||t!==Ue&&Re(t,a)||(s=o[0])&&Re(s,a)||Re(n,a)||Re(Hy,a)||Re(i.config.globalProperties,a)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:Re(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}},DZ=Cr({},hk,{get(e,t){if(t!==Symbol.unscopables)return hk.get(e,t,e)},has(e,t){return t[0]!=="_"&&!iK(t)}});let dk=!0;function NZ(e){const t=HF(e),r=e.proxy,n=e.ctx;dk=!1,t.beforeCreate&&bM(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:a,watch:s,provide:l,inject:u,created:c,beforeMount:f,mounted:h,beforeUpdate:d,updated:p,activated:g,deactivated:m,beforeDestroy:v,beforeUnmount:y,destroyed:b,unmounted:w,render:T,renderTracked:S,renderTriggered:k,errorCaptured:E,serverPrefetch:P,expose:C,inheritAttrs:A,components:L,directives:R,filters:D}=t;if(u&&FZ(u,n,null,e.appContext.config.unwrapInjectedRef),a)for(const Y in a){const K=a[Y];ie(K)&&(n[Y]=K.bind(r))}if(i){const Y=i.call(r,r);Ar(Y)&&(e.data=Bc(Y))}if(dk=!0,o)for(const Y in o){const K=o[Y],et=ie(K)?K.bind(r,r):ie(K.get)?K.get.bind(r,r):Mo,Tt=!ie(K)&&ie(K.set)?K.set.bind(r):Mo,Ct=yr({get:et,set:Tt});Object.defineProperty(n,Y,{enumerable:!0,configurable:!0,get:()=>Ct.value,set:vt=>Ct.value=vt})}if(s)for(const Y in s)GF(s[Y],n,r,Y);if(l){const Y=ie(l)?l.call(r):l;Reflect.ownKeys(Y).forEach(K=>{yg(K,Y[K])})}c&&bM(c,e,"c");function z(Y,K){Ht(K)?K.forEach(et=>Y(et.bind(r))):K&&Y(K.bind(r))}if(z(DF,f),z(nd,h),z(NF,d),z(Sb,p),z(LF,g),z(OF,m),z(zF,E),z(BF,S),z($F,k),z(Tb,y),z(id,w),z(FF,P),Ht(C))if(C.length){const Y=e.exposed||(e.exposed={});C.forEach(K=>{Object.defineProperty(Y,K,{get:()=>r[K],set:et=>r[K]=et})})}else e.exposed||(e.exposed={});T&&e.render===Mo&&(e.render=T),A!=null&&(e.inheritAttrs=A),L&&(e.components=L),R&&(e.directives=R)}function FZ(e,t,r=Mo,n=!1){Ht(e)&&(e=pk(e));for(const i in e){const o=e[i];let a;Ar(o)?"default"in o?a=Bn(o.from||i,o.default,!0):a=Bn(o.from||i):a=Bn(o),pr(a)&&n?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>a.value,set:s=>a.value=s}):t[i]=a}}function bM(e,t,r){_i(Ht(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,r)}function GF(e,t,r,n){const i=n.includes(".")?MF(r,n):()=>r[n];if(wr(e)){const o=t[e];ie(o)&&Xi(i,o)}else if(ie(e))Xi(i,e.bind(r));else if(Ar(e))if(Ht(e))e.forEach(o=>GF(o,t,r,n));else{const o=ie(e.handler)?e.handler.bind(r):t[e.handler];ie(o)&&Xi(i,o,e)}}function HF(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:a}}=e.appContext,s=o.get(t);let l;return s?l=s:!i.length&&!r&&!n?l=t:(l={},i.length&&i.forEach(u=>Xy(l,u,a,!0)),Xy(l,t,a)),o.set(t,l),l}function Xy(e,t,r,n=!1){const{mixins:i,extends:o}=t;o&&Xy(e,o,r,!0),i&&i.forEach(a=>Xy(e,a,r,!0));for(const a in t)if(!(n&&a==="expose")){const s=$Z[a]||r&&r[a];e[a]=s?s(e[a],t[a]):t[a]}return e}const $Z={data:wM,props:Vu,emits:Vu,methods:Vu,computed:Vu,beforeCreate:Rn,created:Rn,beforeMount:Rn,mounted:Rn,beforeUpdate:Rn,updated:Rn,beforeDestroy:Rn,beforeUnmount:Rn,destroyed:Rn,unmounted:Rn,activated:Rn,deactivated:Rn,errorCaptured:Rn,serverPrefetch:Rn,components:Vu,directives:Vu,watch:zZ,provide:wM,inject:BZ};function wM(e,t){return t?e?function(){return Cr(ie(e)?e.call(this,this):e,ie(t)?t.call(this,this):t)}:t:e}function BZ(e,t){return Vu(pk(e),pk(t))}function pk(e){if(Ht(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function Rn(e,t){return e?[...new Set([].concat(e,t))]:t}function Vu(e,t){return e?Cr(Cr(Object.create(null),e),t):t}function zZ(e,t){if(!e)return t;if(!t)return e;const r=Cr(Object.create(null),e);for(const n in t)r[n]=Rn(e[n],t[n]);return r}function VZ(e,t,r,n=!1){const i={},o={};Vy(o,kb,1),e.propsDefaults=Object.create(null),XF(e,t,i,o);for(const a in e.propsOptions[0])a in i||(i[a]=void 0);r?e.props=n?i:mF(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function UZ(e,t,r,n){const{props:i,attrs:o,vnode:{patchFlag:a}}=e,s=pe(i),[l]=e.propsOptions;let u=!1;if((n||a>0)&&!(a&16)){if(a&8){const c=e.vnode.dynamicProps;for(let f=0;f<c.length;f++){let h=c[f];if(yb(e.emitsOptions,h))continue;const d=t[h];if(l)if(Re(o,h))d!==o[h]&&(o[h]=d,u=!0);else{const p=Si(h);i[p]=gk(l,s,p,d,e,!1)}else d!==o[h]&&(o[h]=d,u=!0)}}}else{XF(e,t,i,o)&&(u=!0);let c;for(const f in s)(!t||!Re(t,f)&&((c=ba(f))===f||!Re(t,c)))&&(l?r&&(r[f]!==void 0||r[c]!==void 0)&&(i[f]=gk(l,s,f,void 0,e,!0)):delete i[f]);if(o!==s)for(const f in o)(!t||!Re(t,f)&&!0)&&(delete o[f],u=!0)}u&&gs(e,"set","$attrs")}function XF(e,t,r,n){const[i,o]=e.propsOptions;let a=!1,s;if(t)for(let l in t){if(fg(l))continue;const u=t[l];let c;i&&Re(i,c=Si(l))?!o||!o.includes(c)?r[c]=u:(s||(s={}))[c]=u:yb(e.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,a=!0)}if(o){const l=pe(r),u=s||Ue;for(let c=0;c<o.length;c++){const f=o[c];r[f]=gk(i,l,f,u[f],e,!Re(u,f))}}return a}function gk(e,t,r,n,i,o){const a=e[r];if(a!=null){const s=Re(a,"default");if(s&&n===void 0){const l=a.default;if(a.type!==Function&&ie(l)){const{propsDefaults:u}=i;r in u?n=u[r]:(zl(i),n=u[r]=l.call(null,t),xl())}else n=l}a[0]&&(o&&!s?n=!1:a[1]&&(n===""||n===ba(r))&&(n=!0))}return n}function YF(e,t,r=!1){const n=t.propsCache,i=n.get(e);if(i)return i;const o=e.props,a={},s=[];let l=!1;if(!ie(e)){const c=f=>{l=!0;const[h,d]=YF(f,t,!0);Cr(a,h),d&&s.push(...d)};!r&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!o&&!l)return n.set(e,yh),yh;if(Ht(o))for(let c=0;c<o.length;c++){const f=Si(o[c]);SM(f)&&(a[f]=Ue)}else if(o)for(const c in o){const f=Si(c);if(SM(f)){const h=o[c],d=a[f]=Ht(h)||ie(h)?{type:h}:h;if(d){const p=PM(Boolean,d.type),g=PM(String,d.type);d[0]=p>-1,d[1]=g<0||p<g,(p>-1||Re(d,"default"))&&s.push(f)}}}const u=[a,s];return n.set(e,u),u}function SM(e){return e[0]!=="$"}function TM(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function kM(e,t){return TM(e)===TM(t)}function PM(e,t){return Ht(t)?t.findIndex(r=>kM(r,e)):ie(t)&&kM(t,e)?0:-1}const KF=e=>e[0]==="_"||e==="$stable",$C=e=>Ht(e)?e.map(gi):[gi(e)],WZ=(e,t,r)=>{if(t._n)return t;const n=Fe((...i)=>$C(t(...i)),r);return n._c=!1,n},ZF=(e,t,r)=>{const n=e._ctx;for(const i in e){if(KF(i))continue;const o=e[i];if(ie(o))t[i]=WZ(i,o,n);else if(o!=null){const a=$C(o);t[i]=()=>a}}},qF=(e,t)=>{const r=$C(t);e.slots.default=()=>r},jZ=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=pe(t),Vy(t,"_",r)):ZF(t,e.slots={})}else e.slots={},t&&qF(e,t);Vy(e.slots,kb,1)},GZ=(e,t,r)=>{const{vnode:n,slots:i}=e;let o=!0,a=Ue;if(n.shapeFlag&32){const s=t._;s?r&&s===1?o=!1:(Cr(i,t),!r&&s===1&&delete i._):(o=!t.$stable,ZF(t,i)),a=t}else t&&(qF(e,t),a={default:1});if(o)for(const s in i)!KF(s)&&!(s in a)&&delete i[s]};function JF(){return{app:null,config:{isNativeTag:hK,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let HZ=0;function XZ(e,t){return function(n,i=null){ie(n)||(n=Object.assign({},n)),i!=null&&!Ar(i)&&(i=null);const o=JF(),a=new Set;let s=!1;const l=o.app={_uid:HZ++,_component:n,_props:i,_container:null,_context:o,_instance:null,version:v$,get config(){return o.config},set config(u){},use(u,...c){return a.has(u)||(u&&ie(u.install)?(a.add(u),u.install(l,...c)):ie(u)&&(a.add(u),u(l,...c))),l},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),l},component(u,c){return c?(o.components[u]=c,l):o.components[u]},directive(u,c){return c?(o.directives[u]=c,l):o.directives[u]},mount(u,c,f){if(!s){const h=ht(n,i);return h.appContext=o,c&&t?t(h,u):e(h,u,f),s=!0,l._container=u,u.__vue_app__=l,Pb(h.component)||h.component.proxy}},unmount(){s&&(e(null,l._container),delete l._container.__vue_app__)},provide(u,c){return o.provides[u]=c,l}};return l}}function Yy(e,t,r,n,i=!1){if(Ht(e)){e.forEach((h,d)=>Yy(h,t&&(Ht(t)?t[d]:t),r,n,i));return}if(oc(n)&&!i)return;const o=n.shapeFlag&4?Pb(n.component)||n.component.proxy:n.el,a=i?null:o,{i:s,r:l}=e,u=t&&t.r,c=s.refs===Ue?s.refs={}:s.refs,f=s.setupState;if(u!=null&&u!==l&&(wr(u)?(c[u]=null,Re(f,u)&&(f[u]=null)):pr(u)&&(u.value=null)),ie(l))Sa(l,s,12,[a,c]);else{const h=wr(l),d=pr(l);if(h||d){const p=()=>{if(e.f){const g=h?c[l]:l.value;i?Ht(g)&&mC(g,o):Ht(g)?g.includes(o)||g.push(o):h?(c[l]=[o],Re(f,l)&&(f[l]=c[l])):(l.value=[o],e.k&&(c[e.k]=l.value))}else h?(c[l]=a,Re(f,l)&&(f[l]=a)):d&&(l.value=a,e.k&&(c[e.k]=a))};a?(p.id=-1,sn(p,r)):p()}}}let Fs=!1;const F0=e=>/svg/.test(e.namespaceURI)&&e.tagName!=="foreignObject",$0=e=>e.nodeType===8;function YZ(e){const{mt:t,p:r,o:{patchProp:n,createText:i,nextSibling:o,parentNode:a,remove:s,insert:l,createComment:u}}=e,c=(v,y)=>{if(!y.hasChildNodes()){r(null,v,y),Gy(),y._vnode=v;return}Fs=!1,f(y.firstChild,v,null,null,null),Gy(),y._vnode=v,Fs&&console.error("Hydration completed but contains mismatches.")},f=(v,y,b,w,T,S=!1)=>{const k=$0(v)&&v.data==="[",E=()=>g(v,y,b,w,T,k),{type:P,ref:C,shapeFlag:A,patchFlag:L}=y,R=v.nodeType;y.el=v,L===-2&&(S=!1,y.dynamicChildren=null);let D=null;switch(P){case Fh:R!==3?y.children===""?(l(y.el=i(""),a(v),v),D=v):D=E():(v.data!==y.children&&(Fs=!0,v.data=y.children),D=o(v));break;case An:R!==8||k?D=E():D=o(v);break;case ac:if(R!==1&&R!==3)D=E();else{D=v;const F=!y.children.length;for(let z=0;z<y.staticCount;z++)F&&(y.children+=D.nodeType===1?D.outerHTML:D.data),z===y.staticCount-1&&(y.anchor=D),D=o(D);return D}break;case W:k?D=p(v,y,b,w,T,S):D=E();break;default:if(A&1)R!==1||y.type.toLowerCase()!==v.tagName.toLowerCase()?D=E():D=h(v,y,b,w,T,S);else if(A&6){y.slotScopeIds=T;const F=a(v);if(t(y,F,null,b,w,F0(F),S),D=k?m(v):o(v),D&&$0(D)&&D.data==="teleport end"&&(D=o(D)),oc(y)){let z;k?(z=ht(W),z.anchor=D?D.previousSibling:F.lastChild):z=v.nodeType===3?$(""):ht("div"),z.el=v,y.component.subTree=z}}else A&64?R!==8?D=E():D=y.type.hydrate(v,y,b,w,T,S,e,d):A&128&&(D=y.type.hydrate(v,y,b,w,F0(a(v)),T,S,e,f))}return C!=null&&Yy(C,null,w,y),D},h=(v,y,b,w,T,S)=>{S=S||!!y.dynamicChildren;const{type:k,props:E,patchFlag:P,shapeFlag:C,dirs:A}=y,L=k==="input"&&A||k==="option";if(L||P!==-1){if(A&&ha(y,null,b,"created"),E)if(L||!S||P&48)for(const D in E)(L&&D.endsWith("value")||Vv(D)&&!fg(D))&&n(v,D,null,E[D],!1,void 0,b);else E.onClick&&n(v,"onClick",null,E.onClick,!1,void 0,b);let R;if((R=E&&E.onVnodeBeforeMount)&&Zn(R,b,y),A&&ha(y,null,b,"beforeMount"),((R=E&&E.onVnodeMounted)||A)&&AF(()=>{R&&Zn(R,b,y),A&&ha(y,null,b,"mounted")},w),C&16&&!(E&&(E.innerHTML||E.textContent))){let D=d(v.firstChild,y,v,b,w,T,S);for(;D;){Fs=!0;const F=D;D=D.nextSibling,s(F)}}else C&8&&v.textContent!==y.children&&(Fs=!0,v.textContent=y.children)}return v.nextSibling},d=(v,y,b,w,T,S,k)=>{k=k||!!y.dynamicChildren;const E=y.children,P=E.length;for(let C=0;C<P;C++){const A=k?E[C]:E[C]=gi(E[C]);if(v)v=f(v,A,w,T,S,k);else{if(A.type===Fh&&!A.children)continue;Fs=!0,r(null,A,b,null,w,T,F0(b),S)}}return v},p=(v,y,b,w,T,S)=>{const{slotScopeIds:k}=y;k&&(T=T?T.concat(k):k);const E=a(v),P=d(o(v),y,E,b,w,T,S);return P&&$0(P)&&P.data==="]"?o(y.anchor=P):(Fs=!0,l(y.anchor=u("]"),E,P),P)},g=(v,y,b,w,T,S)=>{if(Fs=!0,y.el=null,S){const P=m(v);for(;;){const C=o(v);if(C&&C!==P)s(C);else break}}const k=o(v),E=a(v);return s(v),r(null,y,E,k,b,w,F0(E),T),k},m=v=>{let y=0;for(;v;)if(v=o(v),v&&$0(v)&&(v.data==="["&&y++,v.data==="]")){if(y===0)return o(v);y--}return v};return[c,f]}const sn=AF;function QF(e){return e$(e)}function t$(e){return e$(e,YZ)}function e$(e,t){const r=yK();r.__VUE__=!0;const{insert:n,remove:i,patchProp:o,createElement:a,createText:s,createComment:l,setText:u,setElementText:c,parentNode:f,nextSibling:h,setScopeId:d=Mo,cloneNode:p,insertStaticContent:g}=e,m=(V,j,q,rt=null,ot=null,yt=null,xt=!1,ut=null,ct=!!j.dynamicChildren)=>{if(V===j)return;V&&!da(V,j)&&(rt=bt(V),wt(V,ot,yt,!0),V=null),j.patchFlag===-2&&(ct=!1,j.dynamicChildren=null);const{type:lt,ref:Vt,shapeFlag:Rt}=j;switch(lt){case Fh:v(V,j,q,rt);break;case An:y(V,j,q,rt);break;case ac:V==null&&b(j,q,rt,xt);break;case W:R(V,j,q,rt,ot,yt,xt,ut,ct);break;default:Rt&1?S(V,j,q,rt,ot,yt,xt,ut,ct):Rt&6?D(V,j,q,rt,ot,yt,xt,ut,ct):(Rt&64||Rt&128)&&lt.process(V,j,q,rt,ot,yt,xt,ut,ct,It)}Vt!=null&&ot&&Yy(Vt,V&&V.ref,yt,j||V,!j)},v=(V,j,q,rt)=>{if(V==null)n(j.el=s(j.children),q,rt);else{const ot=j.el=V.el;j.children!==V.children&&u(ot,j.children)}},y=(V,j,q,rt)=>{V==null?n(j.el=l(j.children||""),q,rt):j.el=V.el},b=(V,j,q,rt)=>{[V.el,V.anchor]=g(V.children,j,q,rt,V.el,V.anchor)},w=({el:V,anchor:j},q,rt)=>{let ot;for(;V&&V!==j;)ot=h(V),n(V,q,rt),V=ot;n(j,q,rt)},T=({el:V,anchor:j})=>{let q;for(;V&&V!==j;)q=h(V),i(V),V=q;i(j)},S=(V,j,q,rt,ot,yt,xt,ut,ct)=>{xt=xt||j.type==="svg",V==null?k(j,q,rt,ot,yt,xt,ut,ct):C(V,j,ot,yt,xt,ut,ct)},k=(V,j,q,rt,ot,yt,xt,ut)=>{let ct,lt;const{type:Vt,props:Rt,shapeFlag:Ut,transition:Jt,patchFlag:ce,dirs:we}=V;if(V.el&&p!==void 0&&ce===-1)ct=V.el=p(V.el);else{if(ct=V.el=a(V.type,yt,Rt&&Rt.is,Rt),Ut&8?c(ct,V.children):Ut&16&&P(V.children,ct,null,rt,ot,yt&&Vt!=="foreignObject",xt,ut),we&&ha(V,null,rt,"created"),Rt){for(const X in Rt)X!=="value"&&!fg(X)&&o(ct,X,null,Rt[X],yt,V.children,rt,ot,tt);"value"in Rt&&o(ct,"value",null,Rt.value),(lt=Rt.onVnodeBeforeMount)&&Zn(lt,rt,V)}E(ct,V,V.scopeId,xt,rt)}we&&ha(V,null,rt,"beforeMount");const H=(!ot||ot&&!ot.pendingBranch)&&Jt&&!Jt.persisted;H&&Jt.beforeEnter(ct),n(ct,j,q),((lt=Rt&&Rt.onVnodeMounted)||H||we)&&sn(()=>{lt&&Zn(lt,rt,V),H&&Jt.enter(ct),we&&ha(V,null,rt,"mounted")},ot)},E=(V,j,q,rt,ot)=>{if(q&&d(V,q),rt)for(let yt=0;yt<rt.length;yt++)d(V,rt[yt]);if(ot){let yt=ot.subTree;if(j===yt){const xt=ot.vnode;E(V,xt,xt.scopeId,xt.slotScopeIds,ot.parent)}}},P=(V,j,q,rt,ot,yt,xt,ut,ct=0)=>{for(let lt=ct;lt<V.length;lt++){const Vt=V[lt]=ut?pl(V[lt]):gi(V[lt]);m(null,Vt,j,q,rt,ot,yt,xt,ut)}},C=(V,j,q,rt,ot,yt,xt)=>{const ut=j.el=V.el;let{patchFlag:ct,dynamicChildren:lt,dirs:Vt}=j;ct|=V.patchFlag&16;const Rt=V.props||Ue,Ut=j.props||Ue;let Jt;q&&uu(q,!1),(Jt=Ut.onVnodeBeforeUpdate)&&Zn(Jt,q,j,V),Vt&&ha(j,V,q,"beforeUpdate"),q&&uu(q,!0);const ce=ot&&j.type!=="foreignObject";if(lt?A(V.dynamicChildren,lt,ut,q,rt,ce,yt):xt||et(V,j,ut,null,q,rt,ce,yt,!1),ct>0){if(ct&16)L(ut,j,Rt,Ut,q,rt,ot);else if(ct&2&&Rt.class!==Ut.class&&o(ut,"class",null,Ut.class,ot),ct&4&&o(ut,"style",Rt.style,Ut.style,ot),ct&8){const we=j.dynamicProps;for(let H=0;H<we.length;H++){const X=we[H],Q=Rt[X],st=Ut[X];(st!==Q||X==="value")&&o(ut,X,Q,st,ot,V.children,q,rt,tt)}}ct&1&&V.children!==j.children&&c(ut,j.children)}else!xt&&lt==null&&L(ut,j,Rt,Ut,q,rt,ot);((Jt=Ut.onVnodeUpdated)||Vt)&&sn(()=>{Jt&&Zn(Jt,q,j,V),Vt&&ha(j,V,q,"updated")},rt)},A=(V,j,q,rt,ot,yt,xt)=>{for(let ut=0;ut<j.length;ut++){const ct=V[ut],lt=j[ut],Vt=ct.el&&(ct.type===W||!da(ct,lt)||ct.shapeFlag&70)?f(ct.el):q;m(ct,lt,Vt,null,rt,ot,yt,xt,!0)}},L=(V,j,q,rt,ot,yt,xt)=>{if(q!==rt){for(const ut in rt){if(fg(ut))continue;const ct=rt[ut],lt=q[ut];ct!==lt&&ut!=="value"&&o(V,ut,lt,ct,xt,j.children,ot,yt,tt)}if(q!==Ue)for(const ut in q)!fg(ut)&&!(ut in rt)&&o(V,ut,q[ut],null,xt,j.children,ot,yt,tt);"value"in rt&&o(V,"value",q.value,rt.value)}},R=(V,j,q,rt,ot,yt,xt,ut,ct)=>{const lt=j.el=V?V.el:s(""),Vt=j.anchor=V?V.anchor:s("");let{patchFlag:Rt,dynamicChildren:Ut,slotScopeIds:Jt}=j;Jt&&(ut=ut?ut.concat(Jt):Jt),V==null?(n(lt,q,rt),n(Vt,q,rt),P(j.children,q,Vt,ot,yt,xt,ut,ct)):Rt>0&&Rt&64&&Ut&&V.dynamicChildren?(A(V.dynamicChildren,Ut,q,ot,yt,xt,ut),(j.key!=null||ot&&j===ot.subTree)&&BC(V,j,!0)):et(V,j,q,Vt,ot,yt,xt,ut,ct)},D=(V,j,q,rt,ot,yt,xt,ut,ct)=>{j.slotScopeIds=ut,V==null?j.shapeFlag&512?ot.ctx.activate(j,q,rt,xt,ct):F(j,q,rt,ot,yt,xt,ct):z(V,j,ct)},F=(V,j,q,rt,ot,yt,xt)=>{const ut=V.component=s$(V,rt,ot);if(Hv(V)&&(ut.ctx.renderer=It),u$(ut),ut.asyncDep){if(ot&&ot.registerDep(ut,Y),!V.el){const ct=ut.subTree=ht(An);y(null,ct,j,q)}return}Y(ut,V,j,q,ot,yt,xt)},z=(V,j,q)=>{const rt=j.component=V.component;if(mZ(V,j,q))if(rt.asyncDep&&!rt.asyncResolved){K(rt,j,q);return}else rt.next=j,cZ(rt.update),rt.update();else j.el=V.el,rt.vnode=j},Y=(V,j,q,rt,ot,yt,xt)=>{const ut=()=>{if(V.isMounted){let{next:Vt,bu:Rt,u:Ut,parent:Jt,vnode:ce}=V,we=Vt,H;uu(V,!1),Vt?(Vt.el=ce.el,K(V,Vt,xt)):Vt=ce,Rt&&bh(Rt),(H=Vt.props&&Vt.props.onVnodeBeforeUpdate)&&Zn(H,Jt,Vt,ce),uu(V,!0);const X=Q1(V),Q=V.subTree;V.subTree=X,m(Q,X,f(Q.el),bt(Q),V,ot,yt),Vt.el=X.el,we===null&&LC(V,X.el),Ut&&sn(Ut,ot),(H=Vt.props&&Vt.props.onVnodeUpdated)&&sn(()=>Zn(H,Jt,Vt,ce),ot)}else{let Vt;const{el:Rt,props:Ut}=j,{bm:Jt,m:ce,parent:we}=V,H=oc(j);if(uu(V,!1),Jt&&bh(Jt),!H&&(Vt=Ut&&Ut.onVnodeBeforeMount)&&Zn(Vt,we,j),uu(V,!0),Rt&&mt){const X=()=>{V.subTree=Q1(V),mt(Rt,V.subTree,V,ot,null)};H?j.type.__asyncLoader().then(()=>!V.isUnmounted&&X()):X()}else{const X=V.subTree=Q1(V);m(null,X,q,rt,V,ot,yt),j.el=X.el}if(ce&&sn(ce,ot),!H&&(Vt=Ut&&Ut.onVnodeMounted)){const X=j;sn(()=>Zn(Vt,we,X),ot)}(j.shapeFlag&256||we&&oc(we.vnode)&&we.vnode.shapeFlag&256)&&V.a&&sn(V.a,ot),V.isMounted=!0,j=q=rt=null}},ct=V.effect=new jv(ut,()=>MC(lt),V.scope),lt=V.update=()=>ct.run();lt.id=V.uid,uu(V,!0),lt()},K=(V,j,q)=>{j.component=V;const rt=V.vnode.props;V.vnode=j,V.next=null,UZ(V,j.props,rt,q),GZ(V,j.children,q),Fc(),mb(void 0,V.update),$c()},et=(V,j,q,rt,ot,yt,xt,ut,ct=!1)=>{const lt=V&&V.children,Vt=V?V.shapeFlag:0,Rt=j.children,{patchFlag:Ut,shapeFlag:Jt}=j;if(Ut>0){if(Ut&128){Ct(lt,Rt,q,rt,ot,yt,xt,ut,ct);return}else if(Ut&256){Tt(lt,Rt,q,rt,ot,yt,xt,ut,ct);return}}Jt&8?(Vt&16&&tt(lt,ot,yt),Rt!==lt&&c(q,Rt)):Vt&16?Jt&16?Ct(lt,Rt,q,rt,ot,yt,xt,ut,ct):tt(lt,ot,yt,!0):(Vt&8&&c(q,""),Jt&16&&P(Rt,q,rt,ot,yt,xt,ut,ct))},Tt=(V,j,q,rt,ot,yt,xt,ut,ct)=>{V=V||yh,j=j||yh;const lt=V.length,Vt=j.length,Rt=Math.min(lt,Vt);let Ut;for(Ut=0;Ut<Rt;Ut++){const Jt=j[Ut]=ct?pl(j[Ut]):gi(j[Ut]);m(V[Ut],Jt,q,null,ot,yt,xt,ut,ct)}lt>Vt?tt(V,ot,yt,!0,!1,Rt):P(j,q,rt,ot,yt,xt,ut,ct,Rt)},Ct=(V,j,q,rt,ot,yt,xt,ut,ct)=>{let lt=0;const Vt=j.length;let Rt=V.length-1,Ut=Vt-1;for(;lt<=Rt&&lt<=Ut;){const Jt=V[lt],ce=j[lt]=ct?pl(j[lt]):gi(j[lt]);if(da(Jt,ce))m(Jt,ce,q,null,ot,yt,xt,ut,ct);else break;lt++}for(;lt<=Rt&&lt<=Ut;){const Jt=V[Rt],ce=j[Ut]=ct?pl(j[Ut]):gi(j[Ut]);if(da(Jt,ce))m(Jt,ce,q,null,ot,yt,xt,ut,ct);else break;Rt--,Ut--}if(lt>Rt){if(lt<=Ut){const Jt=Ut+1,ce=Jt<Vt?j[Jt].el:rt;for(;lt<=Ut;)m(null,j[lt]=ct?pl(j[lt]):gi(j[lt]),q,ce,ot,yt,xt,ut,ct),lt++}}else if(lt>Ut)for(;lt<=Rt;)wt(V[lt],ot,yt,!0),lt++;else{const Jt=lt,ce=lt,we=new Map;for(lt=ce;lt<=Ut;lt++){const re=j[lt]=ct?pl(j[lt]):gi(j[lt]);re.key!=null&&we.set(re.key,lt)}let H,X=0;const Q=Ut-ce+1;let st=!1,Ft=0;const Zt=new Array(Q);for(lt=0;lt<Q;lt++)Zt[lt]=0;for(lt=Jt;lt<=Rt;lt++){const re=V[lt];if(X>=Q){wt(re,ot,yt,!0);continue}let Oe;if(re.key!=null)Oe=we.get(re.key);else for(H=ce;H<=Ut;H++)if(Zt[H-ce]===0&&da(re,j[H])){Oe=H;break}Oe===void 0?wt(re,ot,yt,!0):(Zt[Oe-ce]=lt+1,Oe>=Ft?Ft=Oe:st=!0,m(re,j[Oe],q,null,ot,yt,xt,ut,ct),X++)}const ne=st?KZ(Zt):yh;for(H=ne.length-1,lt=Q-1;lt>=0;lt--){const re=ce+lt,Oe=j[re],qt=re+1<Vt?j[re+1].el:rt;Zt[lt]===0?m(null,Oe,q,qt,ot,yt,xt,ut,ct):st&&(H<0||lt!==ne[H]?vt(Oe,q,qt,2):H--)}}},vt=(V,j,q,rt,ot=null)=>{const{el:yt,type:xt,transition:ut,children:ct,shapeFlag:lt}=V;if(lt&6){vt(V.component.subTree,j,q,rt);return}if(lt&128){V.suspense.move(j,q,rt);return}if(lt&64){xt.move(V,j,q,It);return}if(xt===W){n(yt,j,q);for(let Rt=0;Rt<ct.length;Rt++)vt(ct[Rt],j,q,rt);n(V.anchor,j,q);return}if(xt===ac){w(V,j,q);return}if(rt!==2&&lt&1&&ut)if(rt===0)ut.beforeEnter(yt),n(yt,j,q),sn(()=>ut.enter(yt),ot);else{const{leave:Rt,delayLeave:Ut,afterLeave:Jt}=ut,ce=()=>n(yt,j,q),we=()=>{Rt(yt,()=>{ce(),Jt&&Jt()})};Ut?Ut(yt,ce,we):we()}else n(yt,j,q)},wt=(V,j,q,rt=!1,ot=!1)=>{const{type:yt,props:xt,ref:ut,children:ct,dynamicChildren:lt,shapeFlag:Vt,patchFlag:Rt,dirs:Ut}=V;if(ut!=null&&Yy(ut,null,q,V,!0),Vt&256){j.ctx.deactivate(V);return}const Jt=Vt&1&&Ut,ce=!oc(V);let we;if(ce&&(we=xt&&xt.onVnodeBeforeUnmount)&&Zn(we,j,V),Vt&6)it(V.component,q,rt);else{if(Vt&128){V.suspense.unmount(q,rt);return}Jt&&ha(V,null,j,"beforeUnmount"),Vt&64?V.type.remove(V,j,q,ot,It,rt):lt&&(yt!==W||Rt>0&&Rt&64)?tt(lt,j,q,!1,!0):(yt===W&&Rt&384||!ot&&Vt&16)&&tt(ct,j,q),rt&&Kt(V)}(ce&&(we=xt&&xt.onVnodeUnmounted)||Jt)&&sn(()=>{we&&Zn(we,j,V),Jt&&ha(V,null,j,"unmounted")},q)},Kt=V=>{const{type:j,el:q,anchor:rt,transition:ot}=V;if(j===W){Z(q,rt);return}if(j===ac){T(V);return}const yt=()=>{i(q),ot&&!ot.persisted&&ot.afterLeave&&ot.afterLeave()};if(V.shapeFlag&1&&ot&&!ot.persisted){const{leave:xt,delayLeave:ut}=ot,ct=()=>xt(q,yt);ut?ut(V.el,yt,ct):ct()}else yt()},Z=(V,j)=>{let q;for(;V!==j;)q=h(V),i(V),V=q;i(j)},it=(V,j,q)=>{const{bum:rt,scope:ot,update:yt,subTree:xt,um:ut}=V;rt&&bh(rt),ot.stop(),yt&&(yt.active=!1,wt(xt,V,j,q)),ut&&sn(ut,j),sn(()=>{V.isUnmounted=!0},j),j&&j.pendingBranch&&!j.isUnmounted&&V.asyncDep&&!V.asyncResolved&&V.suspenseId===j.pendingId&&(j.deps--,j.deps===0&&j.resolve())},tt=(V,j,q,rt=!1,ot=!1,yt=0)=>{for(let xt=yt;xt<V.length;xt++)wt(V[xt],j,q,rt,ot)},bt=V=>V.shapeFlag&6?bt(V.component.subTree):V.shapeFlag&128?V.suspense.next():h(V.anchor||V.el),kt=(V,j,q)=>{V==null?j._vnode&&wt(j._vnode,null,null,!0):m(j._vnode||null,V,j,null,null,null,q),Gy(),j._vnode=V},It={p:m,um:wt,m:vt,r:Kt,mt:F,mc:P,pc:et,pbc:A,n:bt,o:e};let pt,mt;return t&&([pt,mt]=t(It)),{render:kt,hydrate:pt,createApp:XZ(kt,pt)}}function uu({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function BC(e,t,r=!1){const n=e.children,i=t.children;if(Ht(n)&&Ht(i))for(let o=0;o<n.length;o++){const a=n[o];let s=i[o];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=i[o]=pl(i[o]),s.el=a.el),r||BC(a,s))}}function KZ(e){const t=e.slice(),r=[0];let n,i,o,a,s;const l=e.length;for(n=0;n<l;n++){const u=e[n];if(u!==0){if(i=r[r.length-1],e[i]<u){t[n]=i,r.push(n);continue}for(o=0,a=r.length-1;o<a;)s=o+a>>1,e[r[s]]<u?o=s+1:a=s;u<e[r[o]]&&(o>0&&(t[n]=r[o-1]),r[o]=n)}}for(o=r.length,a=r[o-1];o-- >0;)r[o]=a,a=t[a];return r}const ZZ=e=>e.__isTeleport,_g=e=>e&&(e.disabled||e.disabled===""),EM=e=>typeof SVGElement<"u"&&e instanceof SVGElement,vk=(e,t)=>{const r=e&&e.to;return wr(r)?t?t(r):null:r},qZ={__isTeleport:!0,process(e,t,r,n,i,o,a,s,l,u){const{mc:c,pc:f,pbc:h,o:{insert:d,querySelector:p,createText:g,createComment:m}}=u,v=_g(t.props);let{shapeFlag:y,children:b,dynamicChildren:w}=t;if(e==null){const T=t.el=g(""),S=t.anchor=g("");d(T,r,n),d(S,r,n);const k=t.target=vk(t.props,p),E=t.targetAnchor=g("");k&&(d(E,k),a=a||EM(k));const P=(C,A)=>{y&16&&c(b,C,A,i,o,a,s,l)};v?P(r,S):k&&P(k,E)}else{t.el=e.el;const T=t.anchor=e.anchor,S=t.target=e.target,k=t.targetAnchor=e.targetAnchor,E=_g(e.props),P=E?r:S,C=E?T:k;if(a=a||EM(S),w?(h(e.dynamicChildren,w,P,i,o,a,s),BC(e,t,!0)):l||f(e,t,P,C,i,o,a,s,!1),v)E||B0(t,r,T,u,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const A=t.target=vk(t.props,p);A&&B0(t,A,null,u,0)}else E&&B0(t,S,k,u,1)}},remove(e,t,r,n,{um:i,o:{remove:o}},a){const{shapeFlag:s,children:l,anchor:u,targetAnchor:c,target:f,props:h}=e;if(f&&o(c),(a||!_g(h))&&(o(u),s&16))for(let d=0;d<l.length;d++){const p=l[d];i(p,t,r,!0,!!p.dynamicChildren)}},move:B0,hydrate:JZ};function B0(e,t,r,{o:{insert:n},m:i},o=2){o===0&&n(e.targetAnchor,t,r);const{el:a,anchor:s,shapeFlag:l,children:u,props:c}=e,f=o===2;if(f&&n(a,t,r),(!f||_g(c))&&l&16)for(let h=0;h<u.length;h++)i(u[h],t,r,2);f&&n(s,t,r)}function JZ(e,t,r,n,i,o,{o:{nextSibling:a,parentNode:s,querySelector:l}},u){const c=t.target=vk(t.props,l);if(c){const f=c._lpa||c.firstChild;if(t.shapeFlag&16)if(_g(t.props))t.anchor=u(a(e),t,s(e),r,n,i,o),t.targetAnchor=f;else{t.anchor=a(e);let h=f;for(;h;)if(h=a(h),h&&h.nodeType===8&&h.data==="teleport anchor"){t.targetAnchor=h,c._lpa=t.targetAnchor&&a(t.targetAnchor);break}u(f,t,c,r,n,i,o)}}return t.anchor&&a(t.anchor)}const QZ=qZ,W=Symbol(void 0),Fh=Symbol(void 0),An=Symbol(void 0),ac=Symbol(void 0),bg=[];let ti=null;function I(e=!1){bg.push(ti=e?null:[])}function r$(){bg.pop(),ti=bg[bg.length-1]||null}let _c=1;function mk(e){_c+=e}function n$(e){return e.dynamicChildren=_c>0?ti||yh:null,r$(),_c>0&&ti&&ti.push(e),e}function O(e,t,r,n,i,o){return n$(_(e,t,r,n,i,o,!0))}function qr(e,t,r,n,i){return n$(ht(e,t,r,n,i,!0))}function Bl(e){return e?e.__v_isVNode===!0:!1}function da(e,t){return e.type===t.type&&e.key===t.key}function tq(e){}const kb="__vInternal",i$=({key:e})=>e!=null?e:null,ty=({ref:e,ref_key:t,ref_for:r})=>e!=null?wr(e)||pr(e)||ie(e)?{i:Cn,r:e,k:t,f:!!r}:e:null;function _(e,t=null,r=null,n=0,i=null,o=e===W?0:1,a=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&i$(t),ref:t&&ty(t),scopeId:_b,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null};return s?(zC(l,r),o&128&&e.normalize(l)):r&&(l.shapeFlag|=wr(r)?8:16),_c>0&&!a&&ti&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&ti.push(l),l}const ht=eq;function eq(e,t=null,r=null,n=0,i=null,o=!1){if((!e||e===VF)&&(e=An),Bl(e)){const s=Ca(e,t,!0);return r&&zC(s,r),_c>0&&!o&&ti&&(s.shapeFlag&6?ti[ti.indexOf(e)]=s:ti.push(s)),s.patchFlag|=-2,s}if(cq(e)&&(e=e.__vccOpts),t){t=o$(t);let{class:s,style:l}=t;s&&!wr(s)&&(t.class=Ur(s)),Ar(l)&&(PC(l)&&!Ht(l)&&(l=Cr({},l)),t.style=cs(l))}const a=wr(e)?1:CF(e)?128:ZZ(e)?64:Ar(e)?4:ie(e)?2:0;return _(e,t,r,n,i,a,o,!0)}function o$(e){return e?PC(e)||kb in e?Cr({},e):e:null}function Ca(e,t,r=!1){const{props:n,ref:i,patchFlag:o,children:a}=e,s=t?a$(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:s,key:s&&i$(s),ref:t&&t.ref?r&&i?Ht(i)?i.concat(ty(t)):[i,ty(t)]:ty(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==W?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Ca(e.ssContent),ssFallback:e.ssFallback&&Ca(e.ssFallback),el:e.el,anchor:e.anchor}}function $(e=" ",t=0){return ht(Fh,null,e,t)}function Xv(e,t){const r=ht(ac,null,e);return r.staticCount=t,r}function nt(e="",t=!1){return t?(I(),qr(An,null,e)):ht(An,null,e)}function gi(e){return e==null||typeof e=="boolean"?ht(An):Ht(e)?ht(W,null,e.slice()):typeof e=="object"?pl(e):ht(Fh,null,String(e))}function pl(e){return e.el===null||e.memo?e:Ca(e)}function zC(e,t){let r=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(Ht(t))r=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),zC(e,i()),i._c&&(i._d=!0));return}else{r=32;const i=t._;!i&&!(kb in t)?t._ctx=Cn:i===3&&Cn&&(Cn.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ie(t)?(t={default:t,_ctx:Cn},r=32):(t=String(t),n&64?(r=16,t=[$(t)]):r=8);e.children=t,e.shapeFlag|=r}function a$(...e){const t={};for(let r=0;r<e.length;r++){const n=e[r];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=Ur([t.class,n.class]));else if(i==="style")t.style=cs([t.style,n.style]);else if(Vv(i)){const o=t[i],a=n[i];a&&o!==a&&!(Ht(o)&&o.includes(a))&&(t[i]=o?[].concat(o,a):a)}else i!==""&&(t[i]=n[i])}return t}function Zn(e,t,r,n=null){_i(e,t,7,[r,n])}const rq=JF();let nq=0;function s$(e,t,r){const n=e.type,i=(t?t.appContext:e.appContext)||rq,o={uid:nq++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new bC(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:YF(n,i),emitsOptions:EF(n,i),emit:null,emitted:null,propsDefaults:Ue,inheritAttrs:n.inheritAttrs,ctx:Ue,data:Ue,props:Ue,attrs:Ue,slots:Ue,refs:Ue,setupState:Ue,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=hZ.bind(null,o),e.ce&&e.ce(o),o}let Vr=null;const Bo=()=>Vr||Cn,zl=e=>{Vr=e,e.scope.on()},xl=()=>{Vr&&Vr.scope.off(),Vr=null};function l$(e){return e.vnode.shapeFlag&4}let $h=!1;function u$(e,t=!1){$h=t;const{props:r,children:n}=e.vnode,i=l$(e);VZ(e,r,i,t),jZ(e,n);const o=i?iq(e,t):void 0;return $h=!1,o}function iq(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=Ui(new Proxy(e.ctx,hk));const{setup:n}=r;if(n){const i=e.setupContext=n.length>1?f$(e):null;zl(e),Fc();const o=Sa(n,e,0,[e.props,i]);if($c(),xl(),yC(o)){if(o.then(xl,xl),t)return o.then(a=>{yk(e,a,t)}).catch(a=>{zc(a,e,0)});e.asyncDep=o}else yk(e,o,t)}else c$(e,t)}function yk(e,t,r){ie(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ar(t)&&(e.setupState=AC(t)),c$(e,r)}let Ky,_k;function oq(e){Ky=e,_k=t=>{t.render._rc&&(t.withProxy=new Proxy(t.ctx,DZ))}}const aq=()=>!Ky;function c$(e,t,r){const n=e.type;if(!e.render){if(!t&&Ky&&!n.render){const i=n.template;if(i){const{isCustomElement:o,compilerOptions:a}=e.appContext.config,{delimiters:s,compilerOptions:l}=n,u=Cr(Cr({isCustomElement:o,delimiters:s},a),l);n.render=Ky(i,u)}}e.render=n.render||Mo,_k&&_k(e)}zl(e),Fc(),NZ(e),$c(),xl()}function sq(e){return new Proxy(e.attrs,{get(t,r){return Ti(e,"get","$attrs"),t[r]}})}function f$(e){const t=n=>{e.exposed=n||{}};let r;return{get attrs(){return r||(r=sq(e))},slots:e.slots,emit:e.emit,expose:t}}function Pb(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(AC(Ui(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in Hy)return Hy[r](e)}}))}const lq=/(?:^|[-_])(\w)/g,uq=e=>e.replace(lq,t=>t.toUpperCase()).replace(/[-_]/g,"");function Zy(e,t=!0){return ie(e)?e.displayName||e.name:e.name||t&&e.__name}function h$(e,t,r=!1){let n=Zy(t);if(!n&&t.__file){const i=t.__file.match(/([^/\\]+)\.\w+$/);i&&(n=i[1])}if(!n&&e&&e.parent){const i=o=>{for(const a in o)if(o[a]===t)return a};n=i(e.components||e.parent.type.components)||i(e.appContext.components)}return n?uq(n):r?"App":"Anonymous"}function cq(e){return ie(e)&&"__vccOpts"in e}const yr=(e,t)=>nZ(e,t,$h);function fq(){return null}function hq(){return null}function dq(e){}function pq(e,t){return null}function gq(){return d$().slots}function vq(){return d$().attrs}function d$(){const e=Bo();return e.setupContext||(e.setupContext=f$(e))}function mq(e,t){const r=Ht(e)?e.reduce((n,i)=>(n[i]={},n),{}):e;for(const n in t){const i=r[n];i?Ht(i)||ie(i)?r[n]={type:i,default:t[n]}:i.default=t[n]:i===null&&(r[n]={default:t[n]})}return r}function yq(e,t){const r={};for(const n in e)t.includes(n)||Object.defineProperty(r,n,{enumerable:!0,get:()=>e[n]});return r}function _q(e){const t=Bo();let r=e();return xl(),yC(r)&&(r=r.catch(n=>{throw zl(t),n})),[r,()=>zl(t)]}function Yv(e,t,r){const n=arguments.length;return n===2?Ar(t)&&!Ht(t)?Bl(t)?ht(e,null,[t]):ht(e,t):ht(e,null,t):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&Bl(r)&&(r=[r]),ht(e,t,r))}const p$=Symbol(""),bq=()=>{{const e=Bn(p$);return e||_F("Server rendering context not provided. Make sure to only call useSSRContext() conditionally in the server build."),e}};function wq(){}function Sq(e,t,r,n){const i=r[n];if(i&&g$(i,e))return i;const o=t();return o.memo=e.slice(),r[n]=o}function g$(e,t){const r=e.memo;if(r.length!=t.length)return!1;for(let n=0;n<r.length;n++)if(Rh(r[n],t[n]))return!1;return _c>0&&ti&&ti.push(e),!0}const v$="3.2.37",Tq={createComponentInstance:s$,setupComponent:u$,renderComponentRoot:Q1,setCurrentRenderingInstance:nv,isVNode:Bl,normalizeVNode:gi},kq=Tq,Pq=null,Eq=null,Cq="http://www.w3.org/2000/svg",Yu=typeof document<"u"?document:null,CM=Yu&&Yu.createElement("template"),Aq={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const i=t?Yu.createElementNS(Cq,e):Yu.createElement(e,r?{is:r}:void 0);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>Yu.createTextNode(e),createComment:e=>Yu.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Yu.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,r,n,i,o){const a=r?r.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),r),!(i===o||!(i=i.nextSibling)););else{CM.innerHTML=n?`<svg>${e}</svg>`:e;const s=CM.content;if(n){const l=s.firstChild;for(;l.firstChild;)s.appendChild(l.firstChild);s.removeChild(l)}t.insertBefore(s,r)}return[a?a.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}};function xq(e,t,r){const n=e._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}function Mq(e,t,r){const n=e.style,i=wr(r);if(r&&!i){for(const o in r)bk(n,o,r[o]);if(t&&!wr(t))for(const o in t)r[o]==null&&bk(n,o,"")}else{const o=n.display;i?t!==r&&(n.cssText=r):t&&e.removeAttribute("style"),"_vod"in e&&(n.display=o)}}const AM=/\s*!important$/;function bk(e,t,r){if(Ht(r))r.forEach(n=>bk(e,t,n));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const n=Iq(e,t);AM.test(r)?e.setProperty(ba(n),r.replace(AM,""),"important"):e[n]=r}}const xM=["Webkit","Moz","ms"],lw={};function Iq(e,t){const r=lw[t];if(r)return r;let n=Si(t);if(n!=="filter"&&n in e)return lw[t]=n;n=Wv(n);for(let i=0;i<xM.length;i++){const o=xM[i]+n;if(o in e)return lw[t]=o}return t}const MM="http://www.w3.org/1999/xlink";function Lq(e,t,r,n,i){if(n&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(MM,t.slice(6,t.length)):e.setAttributeNS(MM,t,r);else{const o=aK(t);r==null||o&&!tF(r)?e.removeAttribute(t):e.setAttribute(t,o?"":r)}}function Oq(e,t,r,n,i,o,a){if(t==="innerHTML"||t==="textContent"){n&&a(n,i,o),e[t]=r==null?"":r;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=r;const l=r==null?"":r;(e.value!==l||e.tagName==="OPTION")&&(e.value=l),r==null&&e.removeAttribute(t);return}let s=!1;if(r===""||r==null){const l=typeof e[t];l==="boolean"?r=tF(r):r==null&&l==="string"?(r="",s=!0):l==="number"&&(r=0,s=!0)}try{e[t]=r}catch{}s&&e.removeAttribute(t)}const[m$,Rq]=(()=>{let e=Date.now,t=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const r=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(r&&Number(r[1])<=53)}return[e,t]})();let wk=0;const Dq=Promise.resolve(),Nq=()=>{wk=0},Fq=()=>wk||(Dq.then(Nq),wk=m$());function os(e,t,r,n){e.addEventListener(t,r,n)}function $q(e,t,r,n){e.removeEventListener(t,r,n)}function Bq(e,t,r,n,i=null){const o=e._vei||(e._vei={}),a=o[t];if(n&&a)a.value=n;else{const[s,l]=zq(t);if(n){const u=o[t]=Vq(n,i);os(e,s,u,l)}else a&&($q(e,s,a,l),o[t]=void 0)}}const IM=/(?:Once|Passive|Capture)$/;function zq(e){let t;if(IM.test(e)){t={};let r;for(;r=e.match(IM);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[ba(e.slice(2)),t]}function Vq(e,t){const r=n=>{const i=n.timeStamp||m$();(Rq||i>=r.attached-1)&&_i(Uq(n,r.value),t,5,[n])};return r.value=e,r.attached=Fq(),r}function Uq(e,t){if(Ht(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const LM=/^on[a-z]/,Wq=(e,t,r,n,i=!1,o,a,s,l)=>{t==="class"?xq(e,n,i):t==="style"?Mq(e,r,n):Vv(t)?vC(t)||Bq(e,t,r,n,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):jq(e,t,n,i))?Oq(e,t,n,o,a,s,l):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),Lq(e,t,n,i))};function jq(e,t,r,n){return n?!!(t==="innerHTML"||t==="textContent"||t in e&&LM.test(t)&&ie(r)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||LM.test(t)&&wr(r)?!1:t in e}function y$(e,t){const r=rd(e);class n extends Eb{constructor(o){super(r,o,t)}}return n.def=r,n}const Gq=e=>y$(e,I$),Hq=typeof HTMLElement<"u"?HTMLElement:class{};class Eb extends Hq{constructor(t,r={},n){super(),this._def=t,this._props=r,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&n?n(this._createVNode(),this.shadowRoot):this.attachShadow({mode:"open"})}connectedCallback(){this._connected=!0,this._instance||this._resolveDef()}disconnectedCallback(){this._connected=!1,vs(()=>{this._connected||(Tk(null,this.shadowRoot),this._instance=null)})}_resolveDef(){if(this._resolved)return;this._resolved=!0;for(let n=0;n<this.attributes.length;n++)this._setAttr(this.attributes[n].name);new MutationObserver(n=>{for(const i of n)this._setAttr(i.attributeName)}).observe(this,{attributes:!0});const t=n=>{const{props:i,styles:o}=n,a=!Ht(i),s=i?a?Object.keys(i):i:[];let l;if(a)for(const u in this._props){const c=i[u];(c===Number||c&&c.type===Number)&&(this._props[u]=Fl(this._props[u]),(l||(l=Object.create(null)))[u]=!0)}this._numberProps=l;for(const u of Object.keys(this))u[0]!=="_"&&this._setProp(u,this[u],!0,!1);for(const u of s.map(Si))Object.defineProperty(this,u,{get(){return this._getProp(u)},set(c){this._setProp(u,c)}});this._applyStyles(o),this._update()},r=this._def.__asyncLoader;r?r().then(t):t(this._def)}_setAttr(t){let r=this.getAttribute(t);this._numberProps&&this._numberProps[t]&&(r=Fl(r)),this._setProp(Si(t),r,!1)}_getProp(t){return this._props[t]}_setProp(t,r,n=!0,i=!0){r!==this._props[t]&&(this._props[t]=r,i&&this._instance&&this._update(),n&&(r===!0?this.setAttribute(ba(t),""):typeof r=="string"||typeof r=="number"?this.setAttribute(ba(t),r+""):r||this.removeAttribute(ba(t))))}_update(){Tk(this._createVNode(),this.shadowRoot)}_createVNode(){const t=ht(this._def,Cr({},this._props));return this._instance||(t.ce=r=>{this._instance=r,r.isCE=!0,r.emit=(i,...o)=>{this.dispatchEvent(new CustomEvent(i,{detail:o}))};let n=this;for(;n=n&&(n.parentNode||n.host);)if(n instanceof Eb){r.parent=n._instance;break}}),t}_applyStyles(t){t&&t.forEach(r=>{const n=document.createElement("style");n.textContent=r,this.shadowRoot.appendChild(n)})}}function Xq(e="$style"){{const t=Bo();if(!t)return Ue;const r=t.type.__cssModules;if(!r)return Ue;const n=r[e];return n||Ue}}function Yq(e){const t=Bo();if(!t)return;const r=()=>Sk(t.subTree,e(t.proxy));xF(r),nd(()=>{const n=new MutationObserver(r);n.observe(t.subTree.el.parentNode,{childList:!0}),id(()=>n.disconnect())})}function Sk(e,t){if(e.shapeFlag&128){const r=e.suspense;e=r.activeBranch,r.pendingBranch&&!r.isHydrating&&r.effects.push(()=>{Sk(r.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)OM(e.el,t);else if(e.type===W)e.children.forEach(r=>Sk(r,t));else if(e.type===ac){let{el:r,anchor:n}=e;for(;r&&(OM(r,t),r!==n);)r=r.nextSibling}}function OM(e,t){if(e.nodeType===1){const r=e.style;for(const n in t)r.setProperty(`--${n}`,t[n])}}const $s="transition",Vd="animation",VC=(e,{slots:t})=>Yv(DC,b$(e),t);VC.displayName="Transition";const _$={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Kq=VC.props=Cr({},DC.props,_$),cu=(e,t=[])=>{Ht(e)?e.forEach(r=>r(...t)):e&&e(...t)},RM=e=>e?Ht(e)?e.some(t=>t.length>1):e.length>1:!1;function b$(e){const t={};for(const L in e)L in _$||(t[L]=e[L]);if(e.css===!1)return t;const{name:r="v",type:n,duration:i,enterFromClass:o=`${r}-enter-from`,enterActiveClass:a=`${r}-enter-active`,enterToClass:s=`${r}-enter-to`,appearFromClass:l=o,appearActiveClass:u=a,appearToClass:c=s,leaveFromClass:f=`${r}-leave-from`,leaveActiveClass:h=`${r}-leave-active`,leaveToClass:d=`${r}-leave-to`}=e,p=Zq(i),g=p&&p[0],m=p&&p[1],{onBeforeEnter:v,onEnter:y,onEnterCancelled:b,onLeave:w,onLeaveCancelled:T,onBeforeAppear:S=v,onAppear:k=y,onAppearCancelled:E=b}=t,P=(L,R,D)=>{fl(L,R?c:s),fl(L,R?u:a),D&&D()},C=(L,R)=>{L._isLeaving=!1,fl(L,f),fl(L,d),fl(L,h),R&&R()},A=L=>(R,D)=>{const F=L?k:y,z=()=>P(R,L,D);cu(F,[R,z]),DM(()=>{fl(R,L?l:o),Qa(R,L?c:s),RM(F)||NM(R,n,g,z)})};return Cr(t,{onBeforeEnter(L){cu(v,[L]),Qa(L,o),Qa(L,a)},onBeforeAppear(L){cu(S,[L]),Qa(L,l),Qa(L,u)},onEnter:A(!1),onAppear:A(!0),onLeave(L,R){L._isLeaving=!0;const D=()=>C(L,R);Qa(L,f),S$(),Qa(L,h),DM(()=>{!L._isLeaving||(fl(L,f),Qa(L,d),RM(w)||NM(L,n,m,D))}),cu(w,[L,D])},onEnterCancelled(L){P(L,!1),cu(b,[L])},onAppearCancelled(L){P(L,!0),cu(E,[L])},onLeaveCancelled(L){C(L),cu(T,[L])}})}function Zq(e){if(e==null)return null;if(Ar(e))return[uw(e.enter),uw(e.leave)];{const t=uw(e);return[t,t]}}function uw(e){return Fl(e)}function Qa(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.add(r)),(e._vtc||(e._vtc=new Set)).add(t)}function fl(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.remove(n));const{_vtc:r}=e;r&&(r.delete(t),r.size||(e._vtc=void 0))}function DM(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let qq=0;function NM(e,t,r,n){const i=e._endId=++qq,o=()=>{i===e._endId&&n()};if(r)return setTimeout(o,r);const{type:a,timeout:s,propCount:l}=w$(e,t);if(!a)return n();const u=a+"end";let c=0;const f=()=>{e.removeEventListener(u,h),o()},h=d=>{d.target===e&&++c>=l&&f()};setTimeout(()=>{c<l&&f()},s+1),e.addEventListener(u,h)}function w$(e,t){const r=window.getComputedStyle(e),n=p=>(r[p]||"").split(", "),i=n($s+"Delay"),o=n($s+"Duration"),a=FM(i,o),s=n(Vd+"Delay"),l=n(Vd+"Duration"),u=FM(s,l);let c=null,f=0,h=0;t===$s?a>0&&(c=$s,f=a,h=o.length):t===Vd?u>0&&(c=Vd,f=u,h=l.length):(f=Math.max(a,u),c=f>0?a>u?$s:Vd:null,h=c?c===$s?o.length:l.length:0);const d=c===$s&&/\b(transform|all)(,|$)/.test(r[$s+"Property"]);return{type:c,timeout:f,propCount:h,hasTransform:d}}function FM(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((r,n)=>$M(r)+$M(e[n])))}function $M(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function S$(){return document.body.offsetHeight}const T$=new WeakMap,k$=new WeakMap,Jq={name:"TransitionGroup",props:Cr({},Kq,{tag:String,moveClass:String}),setup(e,{slots:t}){const r=Bo(),n=RC();let i,o;return Sb(()=>{if(!i.length)return;const a=e.moveClass||`${e.name||"v"}-move`;if(!nJ(i[0].el,r.vnode.el,a))return;i.forEach(tJ),i.forEach(eJ);const s=i.filter(rJ);S$(),s.forEach(l=>{const u=l.el,c=u.style;Qa(u,a),c.transform=c.webkitTransform=c.transitionDuration="";const f=u._moveCb=h=>{h&&h.target!==u||(!h||/transform$/.test(h.propertyName))&&(u.removeEventListener("transitionend",f),u._moveCb=null,fl(u,a))};u.addEventListener("transitionend",f)})}),()=>{const a=pe(e),s=b$(a);let l=a.tag||W;i=o,o=t.default?bb(t.default()):[];for(let u=0;u<o.length;u++){const c=o[u];c.key!=null&&yc(c,Nh(c,s,n,r))}if(i)for(let u=0;u<i.length;u++){const c=i[u];yc(c,Nh(c,s,n,r)),T$.set(c,c.el.getBoundingClientRect())}return ht(l,null,o)}}},Qq=Jq;function tJ(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function eJ(e){k$.set(e,e.el.getBoundingClientRect())}function rJ(e){const t=T$.get(e),r=k$.get(e),n=t.left-r.left,i=t.top-r.top;if(n||i){const o=e.el.style;return o.transform=o.webkitTransform=`translate(${n}px,${i}px)`,o.transitionDuration="0s",e}}function nJ(e,t,r){const n=e.cloneNode();e._vtc&&e._vtc.forEach(a=>{a.split(/\s+/).forEach(s=>s&&n.classList.remove(s))}),r.split(/\s+/).forEach(a=>a&&n.classList.add(a)),n.style.display="none";const i=t.nodeType===1?t:t.parentNode;i.appendChild(n);const{hasTransform:o}=w$(n);return i.removeChild(n),o}const Vl=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Ht(t)?r=>bh(t,r):t};function iJ(e){e.target.composing=!0}function BM(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const zt={created(e,{modifiers:{lazy:t,trim:r,number:n}},i){e._assign=Vl(i);const o=n||i.props&&i.props.type==="number";os(e,t?"change":"input",a=>{if(a.target.composing)return;let s=e.value;r&&(s=s.trim()),o&&(s=Fl(s)),e._assign(s)}),r&&os(e,"change",()=>{e.value=e.value.trim()}),t||(os(e,"compositionstart",iJ),os(e,"compositionend",BM),os(e,"change",BM))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:r,trim:n,number:i}},o){if(e._assign=Vl(o),e.composing||document.activeElement===e&&e.type!=="range"&&(r||n&&e.value.trim()===t||(i||e.type==="number")&&Fl(e.value)===t))return;const a=t==null?"":t;e.value!==a&&(e.value=a)}},Ge={deep:!0,created(e,t,r){e._assign=Vl(r),os(e,"change",()=>{const n=e._modelValue,i=Bh(e),o=e.checked,a=e._assign;if(Ht(n)){const s=cb(n,i),l=s!==-1;if(o&&!l)a(n.concat(i));else if(!o&&l){const u=[...n];u.splice(s,1),a(u)}}else if(Nc(n)){const s=new Set(n);o?s.add(i):s.delete(i),a(s)}else a(P$(e,o))})},mounted:zM,beforeUpdate(e,t,r){e._assign=Vl(r),zM(e,t,r)}};function zM(e,{value:t,oldValue:r},n){e._modelValue=t,Ht(t)?e.checked=cb(t,n.props.value)>-1:Nc(t)?e.checked=t.has(n.props.value):t!==r&&(e.checked=Nl(t,P$(e,!0)))}const Ml={created(e,{value:t},r){e.checked=Nl(t,r.props.value),e._assign=Vl(r),os(e,"change",()=>{e._assign(Bh(e))})},beforeUpdate(e,{value:t,oldValue:r},n){e._assign=Vl(n),t!==r&&(e.checked=Nl(t,n.props.value))}},cr={deep:!0,created(e,{value:t,modifiers:{number:r}},n){const i=Nc(t);os(e,"change",()=>{const o=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>r?Fl(Bh(a)):Bh(a));e._assign(e.multiple?i?new Set(o):o:o[0])}),e._assign=Vl(n)},mounted(e,{value:t}){VM(e,t)},beforeUpdate(e,t,r){e._assign=Vl(r)},updated(e,{value:t}){VM(e,t)}};function VM(e,t){const r=e.multiple;if(!(r&&!Ht(t)&&!Nc(t))){for(let n=0,i=e.options.length;n<i;n++){const o=e.options[n],a=Bh(o);if(r)Ht(t)?o.selected=cb(t,a)>-1:o.selected=t.has(a);else if(Nl(Bh(o),t)){e.selectedIndex!==n&&(e.selectedIndex=n);return}}!r&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Bh(e){return"_value"in e?e._value:e.value}function P$(e,t){const r=t?"_trueValue":"_falseValue";return r in e?e[r]:t}const E$={created(e,t,r){z0(e,t,r,null,"created")},mounted(e,t,r){z0(e,t,r,null,"mounted")},beforeUpdate(e,t,r,n){z0(e,t,r,n,"beforeUpdate")},updated(e,t,r,n){z0(e,t,r,n,"updated")}};function C$(e,t){switch(e){case"SELECT":return cr;case"TEXTAREA":return zt;default:switch(t){case"checkbox":return Ge;case"radio":return Ml;default:return zt}}}function z0(e,t,r,n,i){const a=C$(e.tagName,r.props&&r.props.type)[i];a&&a(e,t,r,n)}function oJ(){zt.getSSRProps=({value:e})=>({value:e}),Ml.getSSRProps=({value:e},t)=>{if(t.props&&Nl(t.props.value,e))return{checked:!0}},Ge.getSSRProps=({value:e},t)=>{if(Ht(e)){if(t.props&&cb(e,t.props.value)>-1)return{checked:!0}}else if(Nc(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}},E$.getSSRProps=(e,t)=>{if(typeof t.type!="string")return;const r=C$(t.type.toUpperCase(),t.props&&t.props.type);if(r.getSSRProps)return r.getSSRProps(e,t)}}const aJ=["ctrl","shift","alt","meta"],sJ={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>aJ.some(r=>e[`${r}Key`]&&!t.includes(r))},zh=(e,t)=>(r,...n)=>{for(let i=0;i<t.length;i++){const o=sJ[t[i]];if(o&&o(r,t))return}return e(r,...n)},lJ={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},uJ=(e,t)=>r=>{if(!("key"in r))return;const n=ba(r.key);if(t.some(i=>i===n||lJ[i]===n))return e(r)},UC={beforeMount(e,{value:t},{transition:r}){e._vod=e.style.display==="none"?"":e.style.display,r&&t?r.beforeEnter(e):Ud(e,t)},mounted(e,{value:t},{transition:r}){r&&t&&r.enter(e)},updated(e,{value:t,oldValue:r},{transition:n}){!t!=!r&&(n?t?(n.beforeEnter(e),Ud(e,!0),n.enter(e)):n.leave(e,()=>{Ud(e,!1)}):Ud(e,t))},beforeUnmount(e,{value:t}){Ud(e,t)}};function Ud(e,t){e.style.display=t?e._vod:"none"}function cJ(){UC.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const A$=Cr({patchProp:Wq},Aq);let wg,UM=!1;function x$(){return wg||(wg=QF(A$))}function M$(){return wg=UM?wg:t$(A$),UM=!0,wg}const Tk=(...e)=>{x$().render(...e)},I$=(...e)=>{M$().hydrate(...e)},L$=(...e)=>{const t=x$().createApp(...e),{mount:r}=t;return t.mount=n=>{const i=O$(n);if(!i)return;const o=t._component;!ie(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.innerHTML="";const a=r(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},t},fJ=(...e)=>{const t=M$().createApp(...e),{mount:r}=t;return t.mount=n=>{const i=O$(n);if(i)return r(i,!0,i instanceof SVGElement)},t};function O$(e){return wr(e)?document.querySelector(e):e}let WM=!1;const hJ=()=>{WM||(WM=!0,oJ(),cJ())},dJ=()=>{},pJ=Object.freeze(Object.defineProperty({__proto__:null,compile:dJ,EffectScope:bC,ReactiveEffect:jv,customRef:tZ,effect:TK,effectScope:wC,getCurrentScope:_K,isProxy:PC,isReactive:wa,isReadonly:Dh,isRef:pr,isShallow:Uy,markRaw:Ui,onScopeDispose:bK,proxyRefs:AC,reactive:Bc,readonly:kC,ref:Al,shallowReactive:mF,shallowReadonly:KK,shallowRef:dg,stop:kK,toRaw:pe,toRef:pg,toRefs:Wy,triggerRef:qK,unref:Kr,camelize:Si,capitalize:Wv,normalizeClass:Ur,normalizeProps:cK,normalizeStyle:cs,toDisplayString:M,toHandlerKey:hg,BaseTransition:DC,Comment:An,Fragment:W,KeepAlive:xZ,Static:ac,Suspense:_Z,Teleport:QZ,Text:Fh,callWithAsyncErrorHandling:_i,callWithErrorHandling:Sa,cloneVNode:Ca,compatUtils:Eq,computed:yr,createBlock:qr,createCommentVNode:nt,createElementBlock:O,createElementVNode:_,createHydrationRenderer:t$,createPropsRestProxy:yq,createRenderer:QF,createSlots:OZ,createStaticVNode:Xv,createTextVNode:$,createVNode:ht,defineAsyncComponent:CZ,defineComponent:rd,defineEmits:hq,defineExpose:dq,defineProps:fq,get devtools(){return Jf},getCurrentInstance:Bo,getTransitionRawChildren:bb,guardReactiveProps:o$,h:Yv,handleError:zc,initCustomFormatter:wq,inject:Bn,isMemoSame:g$,isRuntimeOnly:aq,isVNode:Bl,mergeDefaults:mq,mergeProps:a$,nextTick:vs,onActivated:LF,onBeforeMount:DF,onBeforeUnmount:Tb,onBeforeUpdate:NF,onDeactivated:OF,onErrorCaptured:zF,onMounted:nd,onRenderTracked:BF,onRenderTriggered:$F,onServerPrefetch:FF,onUnmounted:id,onUpdated:Sb,openBlock:I,popScopeId:rr,provide:yg,pushScopeId:er,queuePostFlushCb:IC,registerRuntimeCompiler:oq,renderList:Pt,renderSlot:WF,resolveComponent:Gt,resolveDirective:LZ,resolveDynamicComponent:UF,resolveFilter:Pq,resolveTransitionHooks:Nh,setBlockTracking:mk,setDevtoolsHook:PF,setTransitionHooks:yc,ssrContextKey:p$,ssrUtils:kq,toHandlers:RZ,transformVNodeArgs:tq,useAttrs:vq,useSSRContext:bq,useSlots:gq,useTransitionState:RC,version:v$,warn:_F,watch:Xi,watchEffect:ck,watchPostEffect:xF,watchSyncEffect:kZ,withAsyncContext:_q,withCtx:Fe,withDefaults:pq,withDirectives:at,withMemo:Sq,withScopeId:dZ,Transition:VC,TransitionGroup:Qq,VueElement:Eb,createApp:L$,createSSRApp:fJ,defineCustomElement:y$,defineSSRCustomElement:Gq,hydrate:I$,initDirectivesForSSR:hJ,render:Tk,useCssModule:Xq,useCssVars:Yq,vModelCheckbox:Ge,vModelDynamic:E$,vModelRadio:Ml,vModelSelect:cr,vModelText:zt,vShow:UC,withKeys:uJ,withModifiers:zh},Symbol.toStringTag,{value:"Module"}));var gJ=!1;function V0(e,t,r){return Array.isArray(e)?(e.length=Math.max(e.length,t),e.splice(t,1,r),r):(e[t]=r,r)}function cw(e,t){if(Array.isArray(e)){e.splice(t,1);return}delete e[t]}function vJ(){return R$().__VUE_DEVTOOLS_GLOBAL_HOOK__}function R$(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const mJ=typeof Proxy=="function",yJ="devtools-plugin:setup",_J="plugin:settings:set";let hf,kk;function bJ(){var e;return hf!==void 0||(typeof window<"u"&&window.performance?(hf=!0,kk=window.performance):typeof global<"u"&&((e=global.perf_hooks)===null||e===void 0?void 0:e.performance)?(hf=!0,kk=global.perf_hooks.performance):hf=!1),hf}function wJ(){return bJ()?kk.now():Date.now()}class SJ{constructor(t,r){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=r;const n={};if(t.settings)for(const a in t.settings){const s=t.settings[a];n[a]=s.defaultValue}const i=`__vue-devtools-plugin-settings__${t.id}`;let o=Object.assign({},n);try{const a=localStorage.getItem(i),s=JSON.parse(a);Object.assign(o,s)}catch{}this.fallbacks={getSettings(){return o},setSettings(a){try{localStorage.setItem(i,JSON.stringify(a))}catch{}o=a},now(){return wJ()}},r&&r.on(_J,(a,s)=>{a===this.plugin.id&&this.fallbacks.setSettings(s)}),this.proxiedOn=new Proxy({},{get:(a,s)=>this.target?this.target.on[s]:(...l)=>{this.onQueue.push({method:s,args:l})}}),this.proxiedTarget=new Proxy({},{get:(a,s)=>this.target?this.target[s]:s==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(s)?(...l)=>(this.targetQueue.push({method:s,args:l,resolve:()=>{}}),this.fallbacks[s](...l)):(...l)=>new Promise(u=>{this.targetQueue.push({method:s,args:l,resolve:u})})})}async setRealTarget(t){this.target=t;for(const r of this.onQueue)this.target.on[r.method](...r.args);for(const r of this.targetQueue)r.resolve(await this.target[r.method](...r.args))}}function D$(e,t){const r=e,n=R$(),i=vJ(),o=mJ&&r.enableEarlyProxy;if(i&&(n.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!o))i.emit(yJ,e,t);else{const a=o?new SJ(r,i):null;(n.__VUE_DEVTOOLS_PLUGINS__=n.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:r,setupFn:t,proxy:a}),a&&t(a.proxiedTarget)}}/*!
  * pinia v2.0.18
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let Pk;const ov=e=>Pk=e,N$=Symbol("pinia");function bc(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Ta;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Ta||(Ta={}));const yl=typeof window<"u",jM=(()=>typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:typeof globalThis=="object"?globalThis:{HTMLElement:null})();function TJ(e,{autoBom:t=!1}={}){return t&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}function WC(e,t,r){const n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){B$(n.response,t,r)},n.onerror=function(){console.error("could not download file")},n.send()}function F$(e){const t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function ey(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{const r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(r)}}const ry=typeof navigator=="object"?navigator:{userAgent:""},$$=(()=>/Macintosh/.test(ry.userAgent)&&/AppleWebKit/.test(ry.userAgent)&&!/Safari/.test(ry.userAgent))(),B$=yl?typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype&&!$$?kJ:"msSaveOrOpenBlob"in ry?PJ:EJ:()=>{};function kJ(e,t="download",r){const n=document.createElement("a");n.download=t,n.rel="noopener",typeof e=="string"?(n.href=e,n.origin!==location.origin?F$(n.href)?WC(e,t,r):(n.target="_blank",ey(n)):ey(n)):(n.href=URL.createObjectURL(e),setTimeout(function(){URL.revokeObjectURL(n.href)},4e4),setTimeout(function(){ey(n)},0))}function PJ(e,t="download",r){if(typeof e=="string")if(F$(e))WC(e,t,r);else{const n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){ey(n)})}else navigator.msSaveOrOpenBlob(TJ(e,r),t)}function EJ(e,t,r,n){if(n=n||open("","_blank"),n&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return WC(e,t,r);const i=e.type==="application/octet-stream",o=/constructor/i.test(String(jM.HTMLElement))||"safari"in jM,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&o||$$)&&typeof FileReader<"u"){const s=new FileReader;s.onloadend=function(){let l=s.result;if(typeof l!="string")throw n=null,new Error("Wrong reader.result type");l=a?l:l.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=l:location.assign(l),n=null},s.readAsDataURL(e)}else{const s=URL.createObjectURL(e);n?n.location.assign(s):location.href=s,n=null,setTimeout(function(){URL.revokeObjectURL(s)},4e4)}}function Yr(e,t){const r="\u{1F34D} "+e;typeof __VUE_DEVTOOLS_TOAST__=="function"?__VUE_DEVTOOLS_TOAST__(r,t):t==="error"?console.error(r):t==="warn"?console.warn(r):console.log(r)}function jC(e){return"_a"in e&&"install"in e}function z$(){if(!("clipboard"in navigator))return Yr("Your browser doesn't support the Clipboard API","error"),!0}function V$(e){return e instanceof Error&&e.message.toLowerCase().includes("document is not focused")?(Yr('You need to activate the "Emulate a focused page" setting in the "Rendering" panel of devtools.',"warn"),!0):!1}async function CJ(e){if(!z$())try{await navigator.clipboard.writeText(JSON.stringify(e.state.value)),Yr("Global state copied to clipboard.")}catch(t){if(V$(t))return;Yr("Failed to serialize the state. Check the console for more details.","error"),console.error(t)}}async function AJ(e){if(!z$())try{e.state.value=JSON.parse(await navigator.clipboard.readText()),Yr("Global state pasted from clipboard.")}catch(t){if(V$(t))return;Yr("Failed to deserialize the state from clipboard. Check the console for more details.","error"),console.error(t)}}async function xJ(e){try{B$(new Blob([JSON.stringify(e.state.value)],{type:"text/plain;charset=utf-8"}),"pinia-state.json")}catch(t){Yr("Failed to export the state as JSON. Check the console for more details.","error"),console.error(t)}}let Ua;function MJ(){Ua||(Ua=document.createElement("input"),Ua.type="file",Ua.accept=".json");function e(){return new Promise((t,r)=>{Ua.onchange=async()=>{const n=Ua.files;if(!n)return t(null);const i=n.item(0);return t(i?{text:await i.text(),file:i}:null)},Ua.oncancel=()=>t(null),Ua.onerror=r,Ua.click()})}return e}async function IJ(e){try{const r=await(await MJ())();if(!r)return;const{text:n,file:i}=r;e.state.value=JSON.parse(n),Yr(`Global state imported from "${i.name}".`)}catch(t){Yr("Failed to export the state as JSON. Check the console for more details.","error"),console.error(t)}}function yo(e){return{_custom:{display:e}}}const U$="\u{1F34D} Pinia (root)",Ek="_root";function LJ(e){return jC(e)?{id:Ek,label:U$}:{id:e.$id,label:e.$id}}function OJ(e){if(jC(e)){const r=Array.from(e._s.keys()),n=e._s;return{state:r.map(o=>({editable:!0,key:o,value:e.state.value[o]})),getters:r.filter(o=>n.get(o)._getters).map(o=>{const a=n.get(o);return{editable:!1,key:o,value:a._getters.reduce((s,l)=>(s[l]=a[l],s),{})}})}}const t={state:Object.keys(e.$state).map(r=>({editable:!0,key:r,value:e.$state[r]}))};return e._getters&&e._getters.length&&(t.getters=e._getters.map(r=>({editable:!1,key:r,value:e[r]}))),e._customProperties.size&&(t.customProperties=Array.from(e._customProperties).map(r=>({editable:!0,key:r,value:e[r]}))),t}function RJ(e){return e?Array.isArray(e)?e.reduce((t,r)=>(t.keys.push(r.key),t.operations.push(r.type),t.oldValue[r.key]=r.oldValue,t.newValue[r.key]=r.newValue,t),{oldValue:{},keys:[],operations:[],newValue:{}}):{operation:yo(e.type),key:yo(e.key),oldValue:e.oldValue,newValue:e.newValue}:{}}function DJ(e){switch(e){case Ta.direct:return"mutation";case Ta.patchFunction:return"$patch";case Ta.patchObject:return"$patch";default:return"unknown"}}let oh=!0;const ny=[],Uu="pinia:mutations",bn="pinia",qy=e=>"\u{1F34D} "+e;function NJ(e,t){D$({id:"dev.esm.pinia",label:"Pinia \u{1F34D}",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:ny,app:e},r=>{typeof r.now!="function"&&Yr("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),r.addTimelineLayer({id:Uu,label:"Pinia \u{1F34D}",color:15064968}),r.addInspector({id:bn,label:"Pinia \u{1F34D}",icon:"storage",treeFilterPlaceholder:"Search stores",actions:[{icon:"content_copy",action:()=>{CJ(t)},tooltip:"Serialize and copy the state"},{icon:"content_paste",action:async()=>{await AJ(t),r.sendInspectorTree(bn),r.sendInspectorState(bn)},tooltip:"Replace the state with the content of your clipboard"},{icon:"save",action:()=>{xJ(t)},tooltip:"Save the state as a JSON file"},{icon:"folder_open",action:async()=>{await IJ(t),r.sendInspectorTree(bn),r.sendInspectorState(bn)},tooltip:"Import the state from a JSON file"}],nodeActions:[{icon:"restore",tooltip:"Reset the state (option store only)",action:n=>{const i=t._s.get(n);i?i._isOptionsAPI?(i.$reset(),Yr(`Store "${n}" reset.`)):Yr(`Cannot reset "${n}" store because it's a setup store.`,"warn"):Yr(`Cannot reset "${n}" store because it wasn't found.`,"warn")}}]}),r.on.inspectComponent((n,i)=>{const o=n.componentInstance&&n.componentInstance.proxy;if(o&&o._pStores){const a=n.componentInstance.proxy._pStores;Object.values(a).forEach(s=>{n.instanceData.state.push({type:qy(s.$id),key:"state",editable:!0,value:s._isOptionsAPI?{_custom:{value:pe(s.$state),actions:[{icon:"restore",tooltip:"Reset the state of this store",action:()=>s.$reset()}]}}:Object.keys(s.$state).reduce((l,u)=>(l[u]=s.$state[u],l),{})}),s._getters&&s._getters.length&&n.instanceData.state.push({type:qy(s.$id),key:"getters",editable:!1,value:s._getters.reduce((l,u)=>{try{l[u]=s[u]}catch(c){l[u]=c}return l},{})})})}}),r.on.getInspectorTree(n=>{if(n.app===e&&n.inspectorId===bn){let i=[t];i=i.concat(Array.from(t._s.values())),n.rootNodes=(n.filter?i.filter(o=>"$id"in o?o.$id.toLowerCase().includes(n.filter.toLowerCase()):U$.toLowerCase().includes(n.filter.toLowerCase())):i).map(LJ)}}),r.on.getInspectorState(n=>{if(n.app===e&&n.inspectorId===bn){const i=n.nodeId===Ek?t:t._s.get(n.nodeId);if(!i)return;i&&(n.state=OJ(i))}}),r.on.editInspectorState((n,i)=>{if(n.app===e&&n.inspectorId===bn){const o=n.nodeId===Ek?t:t._s.get(n.nodeId);if(!o)return Yr(`store "${n.nodeId}" not found`,"error");const{path:a}=n;jC(o)?a.unshift("state"):(a.length!==1||!o._customProperties.has(a[0])||a[0]in o.$state)&&a.unshift("$state"),oh=!1,n.set(o,a,n.state.value),oh=!0}}),r.on.editComponentState(n=>{if(n.type.startsWith("\u{1F34D}")){const i=n.type.replace(/^\s*/,""),o=t._s.get(i);if(!o)return Yr(`store "${i}" not found`,"error");const{path:a}=n;if(a[0]!=="state")return Yr(`Invalid path for store "${i}":
${a}
Only state can be modified.`);a[0]="$state",oh=!1,n.set(o,a,n.state.value),oh=!0}})})}function FJ(e,t){ny.includes(qy(t.$id))||ny.push(qy(t.$id)),D$({id:"dev.esm.pinia",label:"Pinia \u{1F34D}",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:ny,app:e,settings:{logStoreChanges:{label:"Notify about new/deleted stores",type:"boolean",defaultValue:!0}}},r=>{const n=typeof r.now=="function"?r.now.bind(r):Date.now;t.$onAction(({after:a,onError:s,name:l,args:u})=>{const c=W$++;r.addTimelineEvent({layerId:Uu,event:{time:n(),title:"\u{1F6EB} "+l,subtitle:"start",data:{store:yo(t.$id),action:yo(l),args:u},groupId:c}}),a(f=>{Ku=void 0,r.addTimelineEvent({layerId:Uu,event:{time:n(),title:"\u{1F6EC} "+l,subtitle:"end",data:{store:yo(t.$id),action:yo(l),args:u,result:f},groupId:c}})}),s(f=>{Ku=void 0,r.addTimelineEvent({layerId:Uu,event:{time:n(),logType:"error",title:"\u{1F4A5} "+l,subtitle:"end",data:{store:yo(t.$id),action:yo(l),args:u,error:f},groupId:c}})})},!0),t._customProperties.forEach(a=>{Xi(()=>Kr(t[a]),(s,l)=>{r.notifyComponentUpdate(),r.sendInspectorState(bn),oh&&r.addTimelineEvent({layerId:Uu,event:{time:n(),title:"Change",subtitle:a,data:{newValue:s,oldValue:l},groupId:Ku}})},{deep:!0})}),t.$subscribe(({events:a,type:s},l)=>{if(r.notifyComponentUpdate(),r.sendInspectorState(bn),!oh)return;const u={time:n(),title:DJ(s),data:{store:yo(t.$id),...RJ(a)},groupId:Ku};Ku=void 0,s===Ta.patchFunction?u.subtitle="\u2935\uFE0F":s===Ta.patchObject?u.subtitle="\u{1F9E9}":a&&!Array.isArray(a)&&(u.subtitle=a.type),a&&(u.data["rawEvent(s)"]={_custom:{display:"DebuggerEvent",type:"object",tooltip:"raw DebuggerEvent[]",value:a}}),r.addTimelineEvent({layerId:Uu,event:u})},{detached:!0,flush:"sync"});const i=t._hotUpdate;t._hotUpdate=Ui(a=>{i(a),r.addTimelineEvent({layerId:Uu,event:{time:n(),title:"\u{1F525} "+t.$id,subtitle:"HMR update",data:{store:yo(t.$id),info:yo("HMR update")}}}),r.notifyComponentUpdate(),r.sendInspectorTree(bn),r.sendInspectorState(bn)});const{$dispose:o}=t;t.$dispose=()=>{o(),r.notifyComponentUpdate(),r.sendInspectorTree(bn),r.sendInspectorState(bn),r.getSettings().logStoreChanges&&Yr(`Disposed "${t.$id}" store \u{1F5D1}`)},r.notifyComponentUpdate(),r.sendInspectorTree(bn),r.sendInspectorState(bn),r.getSettings().logStoreChanges&&Yr(`"${t.$id}" store installed \u{1F195}`)})}let W$=0,Ku;function GM(e,t){const r=t.reduce((n,i)=>(n[i]=pe(e)[i],n),{});for(const n in r)e[n]=function(){const i=W$,o=new Proxy(e,{get(...a){return Ku=i,Reflect.get(...a)},set(...a){return Ku=i,Reflect.set(...a)}});return r[n].apply(o,arguments)}}function $J({app:e,store:t,options:r}){if(!t.$id.startsWith("__hot:")){if(r.state&&(t._isOptionsAPI=!0),typeof r.state=="function"){GM(t,Object.keys(r.actions));const n=t._hotUpdate;pe(t)._hotUpdate=function(i){n.apply(this,arguments),GM(t,Object.keys(i._hmrPayload.actions))}}FJ(e,t)}}function BJ(){const e=wC(!0),t=e.run(()=>Al({}));let r=[],n=[];const i=Ui({install(o){ov(i),i._a=o,o.provide(N$,i),o.config.globalProperties.$pinia=i,yl&&NJ(o,i),n.forEach(a=>r.push(a)),n=[]},use(o){return!this._a&&!gJ?n.push(o):r.push(o),this},_p:r,_a:null,_e:e,_s:new Map,state:t});return yl&&!0&&typeof Proxy<"u"&&i.use($J),i}function j$(e,t){for(const r in t){const n=t[r];if(!(r in e))continue;const i=e[r];bc(i)&&bc(n)&&!pr(n)&&!wa(n)?e[r]=j$(i,n):e[r]=n}return e}const zJ=()=>{};function HM(e,t,r,n=zJ){e.push(t);const i=()=>{const o=e.indexOf(t);o>-1&&(e.splice(o,1),n())};return!r&&Bo()&&id(i),i}function df(e,...t){e.slice().forEach(r=>{r(...t)})}function Ck(e,t){for(const r in t){if(!t.hasOwnProperty(r))continue;const n=t[r],i=e[r];bc(i)&&bc(n)&&e.hasOwnProperty(r)&&!pr(n)&&!wa(n)?e[r]=Ck(i,n):e[r]=n}return e}const VJ=Symbol("pinia:skipHydration");function UJ(e){return!bc(e)||!e.hasOwnProperty(VJ)}const{assign:wo}=Object;function XM(e){return!!(pr(e)&&e.effect)}function YM(e,t,r,n){const{state:i,actions:o,getters:a}=t,s=r.state.value[e];let l;function u(){!s&&!n&&(r.state.value[e]=i?i():{});const c=Wy(n?Al(i?i():{}).value:r.state.value[e]);return wo(c,o,Object.keys(a||{}).reduce((f,h)=>(h in c&&console.warn(`[\u{1F34D}]: A getter cannot have the same name as another state property. Rename one of them. Found with "${h}" in store "${e}".`),f[h]=Ui(yr(()=>{ov(r);const d=r._s.get(e);return a[h].call(d,d)})),f),{}))}return l=Ak(e,u,t,r,n,!0),l.$reset=function(){const f=i?i():{};this.$patch(h=>{wo(h,f)})},l}function Ak(e,t,r={},n,i,o){let a;const s=wo({actions:{}},r);if(!n._e.active)throw new Error("Pinia destroyed");const l={deep:!0};l.onTrigger=P=>{u?d=P:u==!1&&!k._hotUpdating&&(Array.isArray(d)?d.push(P):console.error("\u{1F34D} debuggerEvents should be an array. This is most likely an internal Pinia bug."))};let u,c,f=Ui([]),h=Ui([]),d;const p=n.state.value[e];!o&&!p&&!i&&(n.state.value[e]={});const g=Al({});let m;function v(P){let C;u=c=!1,d=[],typeof P=="function"?(P(n.state.value[e]),C={type:Ta.patchFunction,storeId:e,events:d}):(Ck(n.state.value[e],P),C={type:Ta.patchObject,payload:P,storeId:e,events:d});const A=m=Symbol();vs().then(()=>{m===A&&(u=!0)}),c=!0,df(f,C,n.state.value[e])}const y=()=>{throw new Error(`\u{1F34D}: Store "${e}" is built using the setup syntax and does not implement $reset().`)};function b(){a.stop(),f=[],h=[],n._s.delete(e)}function w(P,C){return function(){ov(n);const A=Array.from(arguments),L=[],R=[];function D(Y){L.push(Y)}function F(Y){R.push(Y)}df(h,{args:A,name:P,store:k,after:D,onError:F});let z;try{z=C.apply(this&&this.$id===e?this:k,A)}catch(Y){throw df(R,Y),Y}return z instanceof Promise?z.then(Y=>(df(L,Y),Y)).catch(Y=>(df(R,Y),Promise.reject(Y))):(df(L,z),z)}}const T=Ui({actions:{},getters:{},state:[],hotState:g}),S={_p:n,$id:e,$onAction:HM.bind(null,h),$patch:v,$reset:y,$subscribe(P,C={}){const A=HM(f,P,C.detached,()=>L()),L=a.run(()=>Xi(()=>n.state.value[e],R=>{(C.flush==="sync"?c:u)&&P({storeId:e,type:Ta.direct,events:d},R)},wo({},l,C)));return A},$dispose:b},k=Bc(wo(yl?{_customProperties:Ui(new Set),_hmrPayload:T}:{},S));n._s.set(e,k);const E=n._e.run(()=>(a=wC(),a.run(()=>t())));for(const P in E){const C=E[P];if(pr(C)&&!XM(C)||wa(C))i?V0(g.value,P,pg(E,P)):o||(p&&UJ(C)&&(pr(C)?C.value=p[P]:Ck(C,p[P])),n.state.value[e][P]=C),T.state.push(P);else if(typeof C=="function"){const A=i?C:w(P,C);E[P]=A,T.actions[P]=C,s.actions[P]=C}else XM(C)&&(T.getters[P]=o?r.getters[P]:C,yl&&(E._getters||(E._getters=Ui([]))).push(P))}wo(k,E),wo(pe(k),E),Object.defineProperty(k,"$state",{get:()=>i?g.value:n.state.value[e],set:P=>{if(i)throw new Error("cannot set hotState");v(C=>{wo(C,P)})}});{k._hotUpdate=Ui(C=>{k._hotUpdating=!0,C._hmrPayload.state.forEach(A=>{if(A in k.$state){const L=C.$state[A],R=k.$state[A];typeof L=="object"&&bc(L)&&bc(R)?j$(L,R):C.$state[A]=R}V0(k,A,pg(C.$state,A))}),Object.keys(k.$state).forEach(A=>{A in C.$state||cw(k,A)}),u=!1,c=!1,n.state.value[e]=pg(C._hmrPayload,"hotState"),c=!0,vs().then(()=>{u=!0});for(const A in C._hmrPayload.actions){const L=C[A];V0(k,A,w(A,L))}for(const A in C._hmrPayload.getters){const L=C._hmrPayload.getters[A],R=o?yr(()=>(ov(n),L.call(k,k))):L;V0(k,A,R)}Object.keys(k._hmrPayload.getters).forEach(A=>{A in C._hmrPayload.getters||cw(k,A)}),Object.keys(k._hmrPayload.actions).forEach(A=>{A in C._hmrPayload.actions||cw(k,A)}),k._hmrPayload=C._hmrPayload,k._getters=C._getters,k._hotUpdating=!1});const P={writable:!0,configurable:!0,enumerable:!1};yl&&["_p","_hmrPayload","_getters","_customProperties"].forEach(C=>{Object.defineProperty(k,C,{value:k[C],...P})})}return n._p.forEach(P=>{if(yl){const C=a.run(()=>P({store:k,app:n._a,pinia:n,options:s}));Object.keys(C||{}).forEach(A=>k._customProperties.add(A)),wo(k,C)}else wo(k,a.run(()=>P({store:k,app:n._a,pinia:n,options:s})))}),k.$state&&typeof k.$state=="object"&&typeof k.$state.constructor=="function"&&!k.$state.constructor.toString().includes("[native code]")&&console.warn(`[\u{1F34D}]: The "state" must be a plain object. It cannot be
	state: () => new MyClass()
Found in store "${k.$id}".`),p&&o&&r.hydrate&&r.hydrate(k.$state,p),u=!0,c=!0,k}function od(e,t,r){let n,i;const o=typeof t=="function";typeof e=="string"?(n=e,i=o?r:t):(i=e,n=e.id);function a(s,l){const u=Bo();if(s=s||u&&Bn(N$),s&&ov(s),!Pk)throw new Error(`[\u{1F34D}]: getActivePinia was called with no active Pinia. Did you forget to install pinia?
	const pinia = createPinia()
	app.use(pinia)
This will fail in production.`);s=Pk,s._s.has(n)||(o?Ak(n,t,i,s):YM(n,i,s),a._pinia=s);const c=s._s.get(n);if(l){const f="__hot:"+n,h=o?Ak(f,t,i,s,!0):YM(f,wo({},i),s,!0);l._hotUpdate(h),delete s.state.value[f],s._s.delete(f)}if(yl&&u&&u.proxy&&!l){const f=u.proxy,h="_pStores"in f?f._pStores:f._pStores={};h[n]=c}return c}return a.$id=n,a}/*!
  * vue-router v4.1.3
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const Qf=typeof window<"u";function WJ(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const Ze=Object.assign;function fw(e,t){const r={};for(const n in t){const i=t[n];r[n]=Ro(i)?i.map(e):e(i)}return r}const Sg=()=>{},Ro=Array.isArray,jJ=/\/$/,GJ=e=>e.replace(jJ,"");function hw(e,t,r="/"){let n,i={},o="",a="";const s=t.indexOf("#");let l=t.indexOf("?");return s<l&&s>=0&&(l=-1),l>-1&&(n=t.slice(0,l),o=t.slice(l+1,s>-1?s:t.length),i=e(o)),s>-1&&(n=n||t.slice(0,s),a=t.slice(s,t.length)),n=KJ(n!=null?n:t,r),{fullPath:n+(o&&"?")+o+a,path:n,query:i,hash:a}}function HJ(e,t){const r=t.query?e(t.query):"";return t.path+(r&&"?")+r+(t.hash||"")}function KM(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function XJ(e,t,r){const n=t.matched.length-1,i=r.matched.length-1;return n>-1&&n===i&&Vh(t.matched[n],r.matched[i])&&G$(t.params,r.params)&&e(t.query)===e(r.query)&&t.hash===r.hash}function Vh(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function G$(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!YJ(e[r],t[r]))return!1;return!0}function YJ(e,t){return Ro(e)?ZM(e,t):Ro(t)?ZM(t,e):e===t}function ZM(e,t){return Ro(t)?e.length===t.length&&e.every((r,n)=>r===t[n]):e.length===1&&e[0]===t}function KJ(e,t){if(e.startsWith("/"))return e;if(!e)return t;const r=t.split("/"),n=e.split("/");let i=r.length-1,o,a;for(o=0;o<n.length;o++)if(a=n[o],a!==".")if(a==="..")i>1&&i--;else break;return r.slice(0,i).join("/")+"/"+n.slice(o-(o===n.length?1:0)).join("/")}var av;(function(e){e.pop="pop",e.push="push"})(av||(av={}));var Tg;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Tg||(Tg={}));function ZJ(e){if(!e)if(Qf){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),GJ(e)}const qJ=/^[^#]+#/;function JJ(e,t){return e.replace(qJ,"#")+t}function QJ(e,t){const r=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-r.left-(t.left||0),top:n.top-r.top-(t.top||0)}}const Cb=()=>({left:window.pageXOffset,top:window.pageYOffset});function tQ(e){let t;if("el"in e){const r=e.el,n=typeof r=="string"&&r.startsWith("#"),i=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!i)return;t=QJ(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function qM(e,t){return(history.state?history.state.position-t:-1)+e}const xk=new Map;function eQ(e,t){xk.set(e,t)}function rQ(e){const t=xk.get(e);return xk.delete(e),t}let nQ=()=>location.protocol+"//"+location.host;function H$(e,t){const{pathname:r,search:n,hash:i}=t,o=e.indexOf("#");if(o>-1){let s=i.includes(e.slice(o))?e.slice(o).length:1,l=i.slice(s);return l[0]!=="/"&&(l="/"+l),KM(l,"")}return KM(r,e)+n+i}function iQ(e,t,r,n){let i=[],o=[],a=null;const s=({state:h})=>{const d=H$(e,location),p=r.value,g=t.value;let m=0;if(h){if(r.value=d,t.value=h,a&&a===p){a=null;return}m=g?h.position-g.position:0}else n(d);i.forEach(v=>{v(r.value,p,{delta:m,type:av.pop,direction:m?m>0?Tg.forward:Tg.back:Tg.unknown})})};function l(){a=r.value}function u(h){i.push(h);const d=()=>{const p=i.indexOf(h);p>-1&&i.splice(p,1)};return o.push(d),d}function c(){const{history:h}=window;!h.state||h.replaceState(Ze({},h.state,{scroll:Cb()}),"")}function f(){for(const h of o)h();o=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",c),{pauseListeners:l,listen:u,destroy:f}}function JM(e,t,r,n=!1,i=!1){return{back:e,current:t,forward:r,replaced:n,position:window.history.length,scroll:i?Cb():null}}function oQ(e){const{history:t,location:r}=window,n={value:H$(e,r)},i={value:t.state};i.value||o(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(l,u,c){const f=e.indexOf("#"),h=f>-1?(r.host&&document.querySelector("base")?e:e.slice(f))+l:nQ()+e+l;try{t[c?"replaceState":"pushState"](u,"",h),i.value=u}catch(d){console.error(d),r[c?"replace":"assign"](h)}}function a(l,u){const c=Ze({},t.state,JM(i.value.back,l,i.value.forward,!0),u,{position:i.value.position});o(l,c,!0),n.value=l}function s(l,u){const c=Ze({},i.value,t.state,{forward:l,scroll:Cb()});o(c.current,c,!0);const f=Ze({},JM(n.value,l,null),{position:c.position+1},u);o(l,f,!1),n.value=l}return{location:n,state:i,push:s,replace:a}}function aQ(e){e=ZJ(e);const t=oQ(e),r=iQ(e,t.state,t.location,t.replace);function n(o,a=!0){a||r.pauseListeners(),history.go(o)}const i=Ze({location:"",base:e,go:n,createHref:JJ.bind(null,e)},t,r);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function sQ(e){return typeof e=="string"||e&&typeof e=="object"}function X$(e){return typeof e=="string"||typeof e=="symbol"}const Bs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Y$=Symbol("");var QM;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(QM||(QM={}));function Uh(e,t){return Ze(new Error,{type:e,[Y$]:!0},t)}function Wa(e,t){return e instanceof Error&&Y$ in e&&(t==null||!!(e.type&t))}const tI="[^/]+?",lQ={sensitive:!1,strict:!1,start:!0,end:!0},uQ=/[.+*?^${}()[\]/\\]/g;function cQ(e,t){const r=Ze({},lQ,t),n=[];let i=r.start?"^":"";const o=[];for(const u of e){const c=u.length?[]:[90];r.strict&&!u.length&&(i+="/");for(let f=0;f<u.length;f++){const h=u[f];let d=40+(r.sensitive?.25:0);if(h.type===0)f||(i+="/"),i+=h.value.replace(uQ,"\\$&"),d+=40;else if(h.type===1){const{value:p,repeatable:g,optional:m,regexp:v}=h;o.push({name:p,repeatable:g,optional:m});const y=v||tI;if(y!==tI){d+=10;try{new RegExp(`(${y})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${p}" (${y}): `+w.message)}}let b=g?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;f||(b=m&&u.length<2?`(?:/${b})`:"/"+b),m&&(b+="?"),i+=b,d+=20,m&&(d+=-8),g&&(d+=-20),y===".*"&&(d+=-50)}c.push(d)}n.push(c)}if(r.strict&&r.end){const u=n.length-1;n[u][n[u].length-1]+=.7000000000000001}r.strict||(i+="/?"),r.end?i+="$":r.strict&&(i+="(?:/|$)");const a=new RegExp(i,r.sensitive?"":"i");function s(u){const c=u.match(a),f={};if(!c)return null;for(let h=1;h<c.length;h++){const d=c[h]||"",p=o[h-1];f[p.name]=d&&p.repeatable?d.split("/"):d}return f}function l(u){let c="",f=!1;for(const h of e){(!f||!c.endsWith("/"))&&(c+="/"),f=!1;for(const d of h)if(d.type===0)c+=d.value;else if(d.type===1){const{value:p,repeatable:g,optional:m}=d,v=p in u?u[p]:"";if(Ro(v)&&!g)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const y=Ro(v)?v.join("/"):v;if(!y)if(m)h.length<2&&(c.endsWith("/")?c=c.slice(0,-1):f=!0);else throw new Error(`Missing required param "${p}"`);c+=y}}return c||"/"}return{re:a,score:n,keys:o,parse:s,stringify:l}}function fQ(e,t){let r=0;for(;r<e.length&&r<t.length;){const n=t[r]-e[r];if(n)return n;r++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function hQ(e,t){let r=0;const n=e.score,i=t.score;for(;r<n.length&&r<i.length;){const o=fQ(n[r],i[r]);if(o)return o;r++}if(Math.abs(i.length-n.length)===1){if(eI(n))return 1;if(eI(i))return-1}return i.length-n.length}function eI(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const dQ={type:0,value:""},pQ=/[a-zA-Z0-9_]/;function gQ(e){if(!e)return[[]];if(e==="/")return[[dQ]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(d){throw new Error(`ERR (${r})/"${u}": ${d}`)}let r=0,n=r;const i=[];let o;function a(){o&&i.push(o),o=[]}let s=0,l,u="",c="";function f(){!u||(r===0?o.push({type:0,value:u}):r===1||r===2||r===3?(o.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function h(){u+=l}for(;s<e.length;){if(l=e[s++],l==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:l==="/"?(u&&f(),a()):l===":"?(f(),r=1):h();break;case 4:h(),r=n;break;case 1:l==="("?r=2:pQ.test(l)?h():(f(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&s--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:r=3:c+=l;break;case 3:f(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&s--,c="";break;default:t("Unknown state");break}}return r===2&&t(`Unfinished custom RegExp for param "${u}"`),f(),a(),i}function vQ(e,t,r){const n=cQ(gQ(e.path),r),i=Ze(n,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function mQ(e,t){const r=[],n=new Map;t=nI({strict:!1,end:!0,sensitive:!1},t);function i(c){return n.get(c)}function o(c,f,h){const d=!h,p=_Q(c);p.aliasOf=h&&h.record;const g=nI(t,c),m=[p];if("alias"in c){const b=typeof c.alias=="string"?[c.alias]:c.alias;for(const w of b)m.push(Ze({},p,{components:h?h.record.components:p.components,path:w,aliasOf:h?h.record:p}))}let v,y;for(const b of m){const{path:w}=b;if(f&&w[0]!=="/"){const T=f.record.path,S=T[T.length-1]==="/"?"":"/";b.path=f.record.path+(w&&S+w)}if(v=vQ(b,f,g),h?h.alias.push(v):(y=y||v,y!==v&&y.alias.push(v),d&&c.name&&!rI(v)&&a(c.name)),p.children){const T=p.children;for(let S=0;S<T.length;S++)o(T[S],v,h&&h.children[S])}h=h||v,l(v)}return y?()=>{a(y)}:Sg}function a(c){if(X$(c)){const f=n.get(c);f&&(n.delete(c),r.splice(r.indexOf(f),1),f.children.forEach(a),f.alias.forEach(a))}else{const f=r.indexOf(c);f>-1&&(r.splice(f,1),c.record.name&&n.delete(c.record.name),c.children.forEach(a),c.alias.forEach(a))}}function s(){return r}function l(c){let f=0;for(;f<r.length&&hQ(c,r[f])>=0&&(c.record.path!==r[f].record.path||!K$(c,r[f]));)f++;r.splice(f,0,c),c.record.name&&!rI(c)&&n.set(c.record.name,c)}function u(c,f){let h,d={},p,g;if("name"in c&&c.name){if(h=n.get(c.name),!h)throw Uh(1,{location:c});g=h.record.name,d=Ze(yQ(f.params,h.keys.filter(y=>!y.optional).map(y=>y.name)),c.params),p=h.stringify(d)}else if("path"in c)p=c.path,h=r.find(y=>y.re.test(p)),h&&(d=h.parse(p),g=h.record.name);else{if(h=f.name?n.get(f.name):r.find(y=>y.re.test(f.path)),!h)throw Uh(1,{location:c,currentLocation:f});g=h.record.name,d=Ze({},f.params,c.params),p=h.stringify(d)}const m=[];let v=h;for(;v;)m.unshift(v.record),v=v.parent;return{name:g,path:p,params:d,matched:m,meta:wQ(m)}}return e.forEach(c=>o(c)),{addRoute:o,resolve:u,removeRoute:a,getRoutes:s,getRecordMatcher:i}}function yQ(e,t){const r={};for(const n of t)n in e&&(r[n]=e[n]);return r}function _Q(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:bQ(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function bQ(e){const t={},r=e.props||!1;if("component"in e)t.default=r;else for(const n in e.components)t[n]=typeof r=="boolean"?r:r[n];return t}function rI(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function wQ(e){return e.reduce((t,r)=>Ze(t,r.meta),{})}function nI(e,t){const r={};for(const n in e)r[n]=n in t?t[n]:e[n];return r}function K$(e,t){return t.children.some(r=>r===e||K$(e,r))}const Z$=/#/g,SQ=/&/g,TQ=/\//g,kQ=/=/g,PQ=/\?/g,q$=/\+/g,EQ=/%5B/g,CQ=/%5D/g,J$=/%5E/g,AQ=/%60/g,Q$=/%7B/g,xQ=/%7C/g,tB=/%7D/g,MQ=/%20/g;function GC(e){return encodeURI(""+e).replace(xQ,"|").replace(EQ,"[").replace(CQ,"]")}function IQ(e){return GC(e).replace(Q$,"{").replace(tB,"}").replace(J$,"^")}function Mk(e){return GC(e).replace(q$,"%2B").replace(MQ,"+").replace(Z$,"%23").replace(SQ,"%26").replace(AQ,"`").replace(Q$,"{").replace(tB,"}").replace(J$,"^")}function LQ(e){return Mk(e).replace(kQ,"%3D")}function OQ(e){return GC(e).replace(Z$,"%23").replace(PQ,"%3F")}function RQ(e){return e==null?"":OQ(e).replace(TQ,"%2F")}function Jy(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function DQ(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<n.length;++i){const o=n[i].replace(q$," "),a=o.indexOf("="),s=Jy(a<0?o:o.slice(0,a)),l=a<0?null:Jy(o.slice(a+1));if(s in t){let u=t[s];Ro(u)||(u=t[s]=[u]),u.push(l)}else t[s]=l}return t}function iI(e){let t="";for(let r in e){const n=e[r];if(r=LQ(r),n==null){n!==void 0&&(t+=(t.length?"&":"")+r);continue}(Ro(n)?n.map(o=>o&&Mk(o)):[n&&Mk(n)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+r,o!=null&&(t+="="+o))})}return t}function NQ(e){const t={};for(const r in e){const n=e[r];n!==void 0&&(t[r]=Ro(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return t}const FQ=Symbol(""),oI=Symbol(""),HC=Symbol(""),eB=Symbol(""),Ik=Symbol("");function Wd(){let e=[];function t(n){return e.push(n),()=>{const i=e.indexOf(n);i>-1&&e.splice(i,1)}}function r(){e=[]}return{add:t,list:()=>e,reset:r}}function gl(e,t,r,n,i){const o=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((a,s)=>{const l=f=>{f===!1?s(Uh(4,{from:r,to:t})):f instanceof Error?s(f):sQ(f)?s(Uh(2,{from:t,to:f})):(o&&n.enterCallbacks[i]===o&&typeof f=="function"&&o.push(f),a())},u=e.call(n&&n.instances[i],t,r,l);let c=Promise.resolve(u);e.length<3&&(c=c.then(l)),c.catch(f=>s(f))})}function dw(e,t,r,n){const i=[];for(const o of e)for(const a in o.components){let s=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if($Q(s)){const u=(s.__vccOpts||s)[t];u&&i.push(gl(u,r,n,o,a))}else{let l=s();i.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const c=WJ(u)?u.default:u;o.components[a]=c;const h=(c.__vccOpts||c)[t];return h&&gl(h,r,n,o,a)()}))}}return i}function $Q(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function aI(e){const t=Bn(HC),r=Bn(eB),n=yr(()=>t.resolve(Kr(e.to))),i=yr(()=>{const{matched:l}=n.value,{length:u}=l,c=l[u-1],f=r.matched;if(!c||!f.length)return-1;const h=f.findIndex(Vh.bind(null,c));if(h>-1)return h;const d=sI(l[u-2]);return u>1&&sI(c)===d&&f[f.length-1].path!==d?f.findIndex(Vh.bind(null,l[u-2])):h}),o=yr(()=>i.value>-1&&VQ(r.params,n.value.params)),a=yr(()=>i.value>-1&&i.value===r.matched.length-1&&G$(r.params,n.value.params));function s(l={}){return zQ(l)?t[Kr(e.replace)?"replace":"push"](Kr(e.to)).catch(Sg):Promise.resolve()}return{route:n,href:yr(()=>n.value.href),isActive:o,isExactActive:a,navigate:s}}const BQ=rd({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:aI,setup(e,{slots:t}){const r=Bc(aI(e)),{options:n}=Bn(HC),i=yr(()=>({[lI(e.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[lI(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const o=t.default&&t.default(r);return e.custom?o:Yv("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:i.value},o)}}}),th=BQ;function zQ(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function VQ(e,t){for(const r in t){const n=t[r],i=e[r];if(typeof n=="string"){if(n!==i)return!1}else if(!Ro(i)||i.length!==n.length||n.some((o,a)=>o!==i[a]))return!1}return!0}function sI(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const lI=(e,t,r)=>e!=null?e:t!=null?t:r,UQ=rd({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:r}){const n=Bn(Ik),i=yr(()=>e.route||n.value),o=Bn(oI,0),a=yr(()=>{let u=Kr(o);const{matched:c}=i.value;let f;for(;(f=c[u])&&!f.components;)u++;return u}),s=yr(()=>i.value.matched[a.value]);yg(oI,yr(()=>a.value+1)),yg(FQ,s),yg(Ik,i);const l=Al();return Xi(()=>[l.value,s.value,e.name],([u,c,f],[h,d,p])=>{c&&(c.instances[f]=u,d&&d!==c&&u&&u===h&&(c.leaveGuards.size||(c.leaveGuards=d.leaveGuards),c.updateGuards.size||(c.updateGuards=d.updateGuards))),u&&c&&(!d||!Vh(c,d)||!h)&&(c.enterCallbacks[f]||[]).forEach(g=>g(u))},{flush:"post"}),()=>{const u=i.value,c=e.name,f=s.value,h=f&&f.components[c];if(!h)return uI(r.default,{Component:h,route:u});const d=f.props[c],p=d?d===!0?u.params:typeof d=="function"?d(u):d:null,m=Yv(h,Ze({},p,t,{onVnodeUnmounted:v=>{v.component.isUnmounted&&(f.instances[c]=null)},ref:l}));return uI(r.default,{Component:m,route:u})||m}}});function uI(e,t){if(!e)return null;const r=e(t);return r.length===1?r[0]:r}const rB=UQ;function WQ(e){const t=mQ(e.routes,e),r=e.parseQuery||DQ,n=e.stringifyQuery||iI,i=e.history,o=Wd(),a=Wd(),s=Wd(),l=dg(Bs);let u=Bs;Qf&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=fw.bind(null,Z=>""+Z),f=fw.bind(null,RQ),h=fw.bind(null,Jy);function d(Z,it){let tt,bt;return X$(Z)?(tt=t.getRecordMatcher(Z),bt=it):bt=Z,t.addRoute(bt,tt)}function p(Z){const it=t.getRecordMatcher(Z);it&&t.removeRoute(it)}function g(){return t.getRoutes().map(Z=>Z.record)}function m(Z){return!!t.getRecordMatcher(Z)}function v(Z,it){if(it=Ze({},it||l.value),typeof Z=="string"){const mt=hw(r,Z,it.path),V=t.resolve({path:mt.path},it),j=i.createHref(mt.fullPath);return Ze(mt,V,{params:h(V.params),hash:Jy(mt.hash),redirectedFrom:void 0,href:j})}let tt;if("path"in Z)tt=Ze({},Z,{path:hw(r,Z.path,it.path).path});else{const mt=Ze({},Z.params);for(const V in mt)mt[V]==null&&delete mt[V];tt=Ze({},Z,{params:f(Z.params)}),it.params=f(it.params)}const bt=t.resolve(tt,it),kt=Z.hash||"";bt.params=c(h(bt.params));const It=HJ(n,Ze({},Z,{hash:IQ(kt),path:bt.path})),pt=i.createHref(It);return Ze({fullPath:It,hash:kt,query:n===iI?NQ(Z.query):Z.query||{}},bt,{redirectedFrom:void 0,href:pt})}function y(Z){return typeof Z=="string"?hw(r,Z,l.value.path):Ze({},Z)}function b(Z,it){if(u!==Z)return Uh(8,{from:it,to:Z})}function w(Z){return k(Z)}function T(Z){return w(Ze(y(Z),{replace:!0}))}function S(Z){const it=Z.matched[Z.matched.length-1];if(it&&it.redirect){const{redirect:tt}=it;let bt=typeof tt=="function"?tt(Z):tt;return typeof bt=="string"&&(bt=bt.includes("?")||bt.includes("#")?bt=y(bt):{path:bt},bt.params={}),Ze({query:Z.query,hash:Z.hash,params:"path"in bt?{}:Z.params},bt)}}function k(Z,it){const tt=u=v(Z),bt=l.value,kt=Z.state,It=Z.force,pt=Z.replace===!0,mt=S(tt);if(mt)return k(Ze(y(mt),{state:kt,force:It,replace:pt}),it||tt);const V=tt;V.redirectedFrom=it;let j;return!It&&XJ(n,bt,tt)&&(j=Uh(16,{to:V,from:bt}),Tt(bt,bt,!0,!1)),(j?Promise.resolve(j):P(V,bt)).catch(q=>Wa(q)?Wa(q,2)?q:et(q):Y(q,V,bt)).then(q=>{if(q){if(Wa(q,2))return k(Ze({replace:pt},y(q.to),{state:kt,force:It}),it||V)}else q=A(V,bt,!0,pt,kt);return C(V,bt,q),q})}function E(Z,it){const tt=b(Z,it);return tt?Promise.reject(tt):Promise.resolve()}function P(Z,it){let tt;const[bt,kt,It]=jQ(Z,it);tt=dw(bt.reverse(),"beforeRouteLeave",Z,it);for(const mt of bt)mt.leaveGuards.forEach(V=>{tt.push(gl(V,Z,it))});const pt=E.bind(null,Z,it);return tt.push(pt),pf(tt).then(()=>{tt=[];for(const mt of o.list())tt.push(gl(mt,Z,it));return tt.push(pt),pf(tt)}).then(()=>{tt=dw(kt,"beforeRouteUpdate",Z,it);for(const mt of kt)mt.updateGuards.forEach(V=>{tt.push(gl(V,Z,it))});return tt.push(pt),pf(tt)}).then(()=>{tt=[];for(const mt of Z.matched)if(mt.beforeEnter&&!it.matched.includes(mt))if(Ro(mt.beforeEnter))for(const V of mt.beforeEnter)tt.push(gl(V,Z,it));else tt.push(gl(mt.beforeEnter,Z,it));return tt.push(pt),pf(tt)}).then(()=>(Z.matched.forEach(mt=>mt.enterCallbacks={}),tt=dw(It,"beforeRouteEnter",Z,it),tt.push(pt),pf(tt))).then(()=>{tt=[];for(const mt of a.list())tt.push(gl(mt,Z,it));return tt.push(pt),pf(tt)}).catch(mt=>Wa(mt,8)?mt:Promise.reject(mt))}function C(Z,it,tt){for(const bt of s.list())bt(Z,it,tt)}function A(Z,it,tt,bt,kt){const It=b(Z,it);if(It)return It;const pt=it===Bs,mt=Qf?history.state:{};tt&&(bt||pt?i.replace(Z.fullPath,Ze({scroll:pt&&mt&&mt.scroll},kt)):i.push(Z.fullPath,kt)),l.value=Z,Tt(Z,it,tt,pt),et()}let L;function R(){L||(L=i.listen((Z,it,tt)=>{if(!Kt.listening)return;const bt=v(Z),kt=S(bt);if(kt){k(Ze(kt,{replace:!0}),bt).catch(Sg);return}u=bt;const It=l.value;Qf&&eQ(qM(It.fullPath,tt.delta),Cb()),P(bt,It).catch(pt=>Wa(pt,12)?pt:Wa(pt,2)?(k(pt.to,bt).then(mt=>{Wa(mt,20)&&!tt.delta&&tt.type===av.pop&&i.go(-1,!1)}).catch(Sg),Promise.reject()):(tt.delta&&i.go(-tt.delta,!1),Y(pt,bt,It))).then(pt=>{pt=pt||A(bt,It,!1),pt&&(tt.delta&&!Wa(pt,8)?i.go(-tt.delta,!1):tt.type===av.pop&&Wa(pt,20)&&i.go(-1,!1)),C(bt,It,pt)}).catch(Sg)}))}let D=Wd(),F=Wd(),z;function Y(Z,it,tt){et(Z);const bt=F.list();return bt.length?bt.forEach(kt=>kt(Z,it,tt)):console.error(Z),Promise.reject(Z)}function K(){return z&&l.value!==Bs?Promise.resolve():new Promise((Z,it)=>{D.add([Z,it])})}function et(Z){return z||(z=!Z,R(),D.list().forEach(([it,tt])=>Z?tt(Z):it()),D.reset()),Z}function Tt(Z,it,tt,bt){const{scrollBehavior:kt}=e;if(!Qf||!kt)return Promise.resolve();const It=!tt&&rQ(qM(Z.fullPath,0))||(bt||!tt)&&history.state&&history.state.scroll||null;return vs().then(()=>kt(Z,it,It)).then(pt=>pt&&tQ(pt)).catch(pt=>Y(pt,Z,it))}const Ct=Z=>i.go(Z);let vt;const wt=new Set,Kt={currentRoute:l,listening:!0,addRoute:d,removeRoute:p,hasRoute:m,getRoutes:g,resolve:v,options:e,push:w,replace:T,go:Ct,back:()=>Ct(-1),forward:()=>Ct(1),beforeEach:o.add,beforeResolve:a.add,afterEach:s.add,onError:F.add,isReady:K,install(Z){const it=this;Z.component("RouterLink",th),Z.component("RouterView",rB),Z.config.globalProperties.$router=it,Object.defineProperty(Z.config.globalProperties,"$route",{enumerable:!0,get:()=>Kr(l)}),Qf&&!vt&&l.value===Bs&&(vt=!0,w(i.location).catch(kt=>{}));const tt={};for(const kt in Bs)tt[kt]=yr(()=>l.value[kt]);Z.provide(HC,it),Z.provide(eB,Bc(tt)),Z.provide(Ik,l);const bt=Z.unmount;wt.add(Z),Z.unmount=function(){wt.delete(Z),wt.size<1&&(u=Bs,L&&L(),L=null,l.value=Bs,vt=!1,z=!1),bt()}}};return Kt}function pf(e){return e.reduce((t,r)=>t.then(()=>r()),Promise.resolve())}function jQ(e,t){const r=[],n=[],i=[],o=Math.max(t.matched.length,e.matched.length);for(let a=0;a<o;a++){const s=t.matched[a];s&&(e.matched.find(u=>Vh(u,s))?n.push(s):r.push(s));const l=e.matched[a];l&&(t.matched.find(u=>Vh(u,l))||i.push(l))}return[r,n,i]}function GQ(e){return`data/icons/item/${e}.webp`}function HQ(e){return`<img src="${GQ(e)}" class="iconitem" />`}function dt(e,t,r,n){if(!e&&e!==0)return"?";const i=parseFloat(e);if(!isFinite(i))return"\u221E";let o=i.toFixed(t);return n&&(o=o.replace(/(\.\d*?[1-9])0+$/,"$1").replace(/\.0*$/,"")),r&&i>=0&&(o="+"+o),o}function _l(e,t){return e+(t-e)*Math.random()}function XQ(e){return typeof e=="number"&&isFinite(e)}function Gi(e){return!isNaN(e)&&isFinite(e)}function YQ(e,t){let r=0;if(t<e[r])return-1;let n=e.length-1;if(e[n]<t)return n+1;for(;r<=n;){let i=Math.floor((r+n)/2);if(e[i]<=t&&t<=e[i+1])return i;t<e[i]?n=i-1:r=i+1}return-1}function KQ(e,t){let r=0,n=e.length-1,i=null;for(;r<=n;){let o=Math.floor((r+n)/2);t(e[o])?(i=e[o],n=o-1):r=o+1}return i}function ZQ(e,t,r,n=.5,i=120,o=0){var a=1,s=r-t;return s!=0&&(a=(e-t)/s),`hsla(${a*(i-o)+o}, 100%, 50%, ${n})`}function qQ(e,t){return e.length<=t?e:e.slice(0,t-1)+"\u2026"}function cI(e){const t=/\d+/g;return e.match(t).join("-")}function Ab(e){if(e>=10**12)return e;if(e>=10**9)return e/10**9+"G";if(e>=10**6)return e/10**6+"M";if(e>=10**3)return e/10**3+"K";if(e>0){if(e<10**-1)return e/10**-3+"m";if(e<10**-4)return e/10**-6+"u";if(e<10**-7)return e/10**-9+"n";if(e<10**-10)return e}return e}function kg(e,t,r){if(r==t.level)return;const n=Math.min(r,40),i=e.workerStatic[t.charkey];let o=t.mspdSheet/(i.mspd/100)-1;for(let a=t.level+1;a<=n;a++)t.level=a,t.wspdSheet+=_l(i.wspd_lo,i.wspd_hi)/1e6,o+=_l(i.mspd_lo,i.mspd_hi)/1e6,t.luckSheet+=_l(i.luck_lo,i.luck_hi)/1e4,a%5==0&&t.skills.push(e.randomSkill(t.skills));t.mspdSheet=i.mspd/100*(1+o)}function fI(e){const t=Math.floor(e*3600),r=Math.floor(t/3600),n=Math.floor(t%3600/60),i=t%60,o=String(r).padStart(2,"0"),a=String(n).padStart(2,"0"),s=String(i).padStart(2,"0");return`${o}:${a}:${s}`}const mr=od({id:"routing",state:()=>({}),actions:{applyWasmWorkarounds(e,t){const r=At(),n=ee(),i={1152:1002};for(const o of n.grindTakenList)if(o in i){const a=o,s=i[o],l=[];for(const h of t)l.push(h[0]==a&&h[1]==99999?[a,s]:h);const u=r.wasmRouter.solveForTerminalPairs(l),c=u.reduce((h,d)=>h+r.nodes[d].CP,0),f=e.reduce((h,d)=>h+r.nodes[d].CP,0);if(c<f)return console.log(`wasm workaround applied (${c} < ${f})`),u}return e}},getters:{routing(e){return ee().wasmRouting?e.routingWasm:e.routingOld},routingWasm(e){var c,f,h,d,p,g,m,v,y,b,w,T;const t={autotakenNodes:new Set,autotakenNodesCP:0,autotakenWorkerNodes:new Set,autotakenWorkerNodesCP:0,autotakenGrindNodes:new Set,autotakenGrindNodesCP:0,autotakenWagonNodes:new Set,autotakenWagonNodesCP:0,linkColors:{},pzWsJobs:{pz:{},ws:[],map:[],nodeUsedbyJob:{}}},r=At();if(!r.ready)return t;const n=ee(),i=new Set,o=[],a=[];for(const S of n.linkOrder){if(S.name=="grind")for(const k of n.grindTakenList)a.push({type:"grind",nk:k}),o.push([k,99999]);if(S.name=="worker"&&(n.workingWorkers.forEach(k=>{const E=k.tnk;var P;if(r.jobIsPz(k.job))P=k.job.pzk;else if(r.jobIsWorkshop(k.job)){const C=k.job.hk,A=r.houseInfo[C].affTown;P=r.tk2tnk(A)}else return;a.push({type:"worker",tnk:E,nk:P}),P!=E&&(i.has(P)&&console.log(`duplicate nk=${P} may cause wasm to misbehave`),o.push([P,E]),i.add(P))}),n.activateAncado)){a.push({type:"ancado"});const k=1343;i.has(k)&&console.log(`duplicate nk=${k} may cause wasm to misbehave`),o.push([k,99999])}if(S.name=="wagon")for(const{origin:k,destination:E}of n.wagonRoutes)console.log("push wagon",k,E),a.push({type:"wagon",origin:k,destination:E}),o.push([k,E])}let s=[];if(o.length>0){const S=performance.now(),[k,E]=r.wasmRouter.solveForTerminalPairs(o);if(n.wasm.tryMoreFrontierRings){r.wasmRouter.setOption("max_frontier_rings","4");const[C,A]=r.wasmRouter.solveForTerminalPairs(o);r.wasmRouter.setOption("max_frontier_rings","3"),s=E<=A?k:C}else s=k;const P=performance.now()-S;console.log("wasm took",P.toFixed(2),"ms")}s=this.applyWasmWorkarounds(s,o);const l={},u=new Set;for(const S of a){if(S.type=="grind"){const[k,E]=r.miniDijkstra(s,S.nk,99999);let P=null;for(const C of k)u.has(C)||(t.autotakenNodes.add(C),t.autotakenNodesCP+=r.nodes[C].CP,t.autotakenGrindNodes.add(C),t.autotakenGrindNodesCP+=r.nodes[C].CP),P&&((h=(c=t.linkColors)[f=P<C?`${P}-${C}`:`${C}-${P}`])!=null||(c[f]="grind")),P=C,u.add(C)}if(S.type=="worker"){const{nk:k,tnk:E}=S,[P,C]=r.miniDijkstra(s,k,E),A={usedPath:P,usedPathCost:C};E in l||(l[E]={}),l[E][k]=A;let L=null;for(const R of P)u.has(R)||(t.autotakenNodes.add(R),t.autotakenNodesCP+=r.nodes[R].CP,t.autotakenWorkerNodes.add(R),t.autotakenWorkerNodesCP+=r.nodes[R].CP),L&&((g=(d=t.linkColors)[p=L<R?`${L}-${R}`:`${R}-${L}`])!=null||(d[p]="worker")),L=R,u.add(R)}if(S.type=="ancado"){const[k,E]=r.miniDijkstra(s,1343,99999);let P=null;for(const C of k)u.has(C)||(t.autotakenNodes.add(C),t.autotakenNodesCP+=r.nodes[C].CP,t.autotakenWorkerNodes.add(C),t.autotakenWorkerNodesCP+=r.nodes[C].CP),P&&((y=(m=t.linkColors)[v=P<C?`${P}-${C}`:`${C}-${P}`])!=null||(m[v]="worker")),P=C,u.add(C)}if(S.type=="wagon"){const{origin:k,destination:E}=S,[P,C]=r.miniDijkstra(s,E,k);let A=null;for(const L of P)u.has(L)||(t.autotakenNodes.add(L),t.autotakenNodesCP+=r.nodes[L].CP,t.autotakenWagonNodes.add(L),t.autotakenWagonNodesCP+=r.nodes[L].CP),A&&((T=(b=t.linkColors)[w=A<L?`${A}-${L}`:`${L}-${A}`])!=null||(b[w]="wagon")),A=L,u.add(L)}}return n.workingWorkers.forEach(S=>{if(r.jobIsPz(S.job)){const k=S.job.pzk;if(!k)return;const E=r.workerStatsOnPlantzone(S),P=r.profitPzTownStats(k,S.tnk,E.wspd,E.mspd,E.luck,r.isGiant(S.charkey)),C=l[S.tnk][k],A={pzk:k,worker:S,profit:P,...C};t.pzWsJobs.pz[k]=A,t.pzWsJobs.map.push(A)}else if(r.jobIsWorkshop(S.job)){const k=S.job.hk,E=n.getUserWorkshop(k),P=r.houseInfo[k].affTown,C=r.tk2tnk(P),A=r.profitWorkshopWorker(k,E,S),L=l[S.tnk][C];let R=0,D=!1;const F=S.job.recipe;if(r.craftInputs&&F in r.craftInputs){const Y=r.craftInputs[F];for(const K of Object.keys(Y))Y[K]>=10&&(D=!0);if(D)for(const K of S.skills)K>0&&("thrifty5"in r.skillData[K]&&(R+=5),"thrifty7"in r.skillData[K]&&(R+=7),"thrifty10"in r.skillData[K]&&(R+=10))}const z={hk:k,worker:S,profit:A,thriftyPercent:R,...L};t.pzWsJobs.ws.push(z),t.pzWsJobs.map.push(z)}}),t},routingOld(e){const t={autotakenNodes:new Set,autotakenNodesCP:0,autotakenWorkerNodes:new Set,autotakenWorkerNodesCP:0,autotakenGrindNodes:new Set,autotakenGrindNodesCP:0,autotakenWagonNodes:new Set,autotakenWagonNodesCP:0,linkColors:{},pzWsJobs:{pz:{},ws:[],map:[],nodeUsedbyJob:{}}},r=At();if(!r.ready)return t;const n=ee(),i=[];for(const a of n.linkOrder){if(a.name=="grind")for(const s of n.grindTakenList)i.push({type:"grind",nk:s});if(a.name=="worker"){for(const s of n.workingWorkers)if(r.jobIsPz(s.job))i.push({type:"worker",source:s.tnk,target:s.job.pzk});else if(r.jobIsWorkshop(s.job)){const l=s.job.hk,u=r.houseInfo[l].affTown,c=r.tk2tnk(u);i.push({type:"worker",source:s.tnk,target:c})}n.activateAncado&&i.push({type:"ancado"})}if(a.name=="wagon")for(const{origin:s,destination:l}of n.wagonRoutes)i.push({type:"wagon",source:s,target:l})}const o=r.routeOld(t.autotakenGrindNodes,i);t.autotakenNodes=o.autotakenNodes,t.autotakenNodesCP=o.autotakenNodesCP,t.autotakenWorkerNodes=o.autotakenWorkerNodes,t.autotakenWorkerNodesCP=o.autotakenWorkerNodesCP,t.autotakenGrindNodes=o.autotakenGrindNodes,t.autotakenGrindNodesCP=o.autotakenGrindNodesCP,t.autotakenWagonNodes=o.autotakenWagonNodes,t.autotakenWagonNodesCP=o.autotakenWagonNodesCP,t.linkColors=o.linkColors;for(const a of n.workingWorkers)if(r.jobIsPz(a.job)){const s=a.job.pzk;if(!s)continue;const l=r.workerStatsOnPlantzone(a),u=r.profitPzTownStats(s,a.tnk,l.wspd,l.mspd,l.luck,r.isGiant(a.charkey)),c=o.routeInfos[a.tnk][a.job.pzk],f={pzk:s,worker:a,profit:u,...c};t.pzWsJobs.pz[s]=f,t.pzWsJobs.map.push(f)}else if(r.jobIsWorkshop(a.job)){const s=a.job.hk,l=n.getUserWorkshop(s),u=r.houseInfo[s].affTown,c=r.tk2tnk(u),f=r.profitWorkshopWorker(s,l,a);let h=0,d=!1;const p=a.job.recipe;if(r.craftInputs&&p in r.craftInputs){const v=r.craftInputs[p];for(const y of Object.keys(v))v[y]>=10&&(d=!0);if(d)for(const y of a.skills)y>0&&("thrifty5"in r.skillData[y]&&(h+=5),"thrifty7"in r.skillData[y]&&(h+=7),"thrifty10"in r.skillData[y]&&(h+=10))}const g=o.routeInfos[a.tnk][c],m={hk:s,worker:a,profit:f,thriftyPercent:h,...g};t.pzWsJobs.ws.push(m),t.pzWsJobs.map.push(m)}return console.log("autotakenGrindNodes",t.autotakenGrindNodes),t.autotakenGrindNodesCP=[...t.autotakenGrindNodes].reduce((a,s)=>a+r.nodes[s].CP,0),console.log("autotakenGrindNodesCP",t.autotakenGrindNodesCP),console.log("autotakenWagonNodes",t.autotakenWagonNodes),t.autotakenWagonNodesCP=[...t.autotakenWagonNodes].reduce((a,s)=>a+r.nodes[s].CP,0),console.log("autotakenWagonNodesCP",t.autotakenWagonNodesCP),console.log("autotakenNodes",t.autotakenNodes),t.autotakenNodesCP=[...t.autotakenNodes].reduce((a,s)=>a+r.nodes[s].CP,0),console.log("autotakenNodesCP",t.autotakenNodesCP),t},pzJobs(e){return e.routing.pzWsJobs.pz},wsJobs(e){return e.routing.pzWsJobs.ws},mapJobs(e){return e.routing.pzWsJobs.map},currentNodesCashflow(e){const t={};for(const r of e.mapJobs)r.usedPath&&r.usedPath.forEach(n=>n in t?t[n]+=r.profit.priceDaily:t[n]=r.profit.priceDaily);return t},pzjobsSharedConnectionCP(e){const t={},r=At();for(const[n,i]of Object.entries(e.pzJobs))t[n]={value:0,tooltip:""},i.usedPath&&i.usedPath.forEach(function(o){if(e.routing.autotakenGrindNodes.has(o))return t;const a=i.profit.priceDaily/e.currentNodesCashflow[o],s=r.nodes[o].CP*a;t[n].value+=s,t[n].tooltip+=`${dt(s,3)} ${r.nodeName(o)}
`});return t}}}),ee=od({id:"user",state:()=>({selectedLang:"en",selectedRegion:"RU",selectedTax:.65,customPrices:{},keepItems:{},regionResources:{},allowFloating:!1,useFloatingResources:{},regionResources2:{},lodgingP2W:{},storageP2W:{},storageVP:!1,storagePersonal:{},lodgingTaken:{},activateAncado:!1,houseTaken:{},userWorkers:[],useDefaultWorker:!1,defaultWorker:{tnk:0,charkey:7572,label:"default",level:30,wspdSheet:140,mspdSheet:7.5,luckSheet:6,skills:["1012","1301","1302","1303","1601","1602","1603"],job:null},farmingEnable:!1,farmingBareProfit:0,farmingProfit:0,farmingP2WShare:0,displayWorkerNames:!0,displayWorkerStatsRank:!1,displayWorkerStatsForPz:!0,displayProfitPerCp:!1,grindTakenList:[],userWorkshops:{},defaultUserWorkshop:{industry:"unknown",label:"",manualCycleIncome:0,manualWorkload:300,manualCp:1},mapHideInactive:0,mapIconSize:30,wasmRouting:!1,palaceEnable:!1,palaceProfit:0,tradeDestinations:{},tradeRouteAlwaysOn:{},tradeInfraCp:{},tradeRouteCp:{},tradingLevel:91,linkOrder:[{name:"grind",id:1},{name:"worker",id:2},{name:"wagon",id:3}],wasm:{tryMoreFrontierRings:!0}}),actions:{migrate(e){var n;if(!e)return;const t=JSON.parse(e);let r=!1;if("counter"in t&&(delete t.counter,r=!0),"connectionOrder"in t&&(delete t.connectionOrder,r=!0),"townSlotsP2W"in t&&(t.lodgingP2W=t.townSlotsP2W,delete t.townSlotsP2W,r=!0),"grindTaken"in t&&(t.grindTakenList=Object.entries(t.grindTaken).filter(([i,o])=>o===!0).map(([i,o])=>Number(i)),delete t.grindTaken,r=!0),"userWorkers"in t&&t.userWorkers.forEach(i=>{i.job==1049&&(i.job=null,r=!0)}),"grindTakenList"in t){const i=new Set([133,134,612,805,806,807,801,961,962,963,1643,1644]),o=t.grindTakenList.filter(a=>!i.has(a));t.grindTakenList.length>o.length&&(t.grindTakenList=o,r=!0)}"userWorkers"in t&&t.userWorkers.forEach(i=>{var o;if(typeof i.job=="number"){const a=i.job;i.job={kind:"plantzone",pzk:a,storage:i.tnk},r=!0}else((o=i==null?void 0:i.job)==null?void 0:o.kind)==="plantzone"&&("storage"in i.job||(i.job.storage=i.tnk,r=!0));Array.isArray(i.job)&&(i.job={kind:"custom",profit:i.job[1],cp:i.job[2],label:i.job[3]})}),"farmingP2W"in t&&(t.farmingP2WShare=t.farmingP2W?80:0,delete t.farmingP2W,r=!0),"regionModifiers"in t&&(t.regionResources=t.regionModifiers,delete t.regionModifiers),"useFloatingModifiers"in t&&(t.useFloatingResources=t.useFloatingModifiers,delete t.useFloatingModifiers),"regionModifiers2"in t&&(t.regionResources2=t.regionModifiers2,delete t.regionModifiers2),((n=t==null?void 0:t.defaultUserWorkshop)==null?void 0:n.manualCp)==0&&(t.defaultUserWorkshop.manualCp=1),r&&(localStorage.setItem("user",JSON.stringify(t)),console.log("userStore updated to new version")),this.$patch(t)},removeNodeTaken(e){const t=At(),r=new Set;return this.workingWorkers.forEach(n=>{t.dijTakenOnlyPath(tnk,n.job).forEach(o=>r.add(o))}),r.has(e)?(console.log("can't remove required node"),!1):(this.nodesTaken[e]=!1,console.log("removed"),!0)},assignWorker(e,t){if(console.log("assigning",e.label,"to",e.job),(t==null?void 0:t.kind)=="plantzone"&&t.storage==null)throw Error("storage undefined");var r=this.userWorkers.indexOf(e);this.userWorkers.splice(r,1),this.userWorkers.push(e),e.job=t},chanceAtResource(e,t){if(t==0)return 100;if(!At().ready)return 0;if(this.modTimes[e].hasOwnProperty(t))return this.modTimes[e][t];this.modSorteds[e]===void 0&&console.log("undefined resource% at rgk",e);const n=YQ(this.modSorteds[e],t),i=n+1;if(n===-1)return 100;const o=this.modSorteds[e].length;if(n===o)return 0;const a=this.modSorteds[e][n],s=this.modTimes[e][a];if(n==i)return s;const l=this.modSorteds[e][i],u=this.modTimes[e][l],c=(t-a)/(l-a);return s+c*(u-s)},tierResources(e,t,r){const n=[];let i=0;const o=t,a=2*o,s=Math.ceil(o/r),l=Math.ceil(a/r);for(let u=s;u<=l;u++){const c=Math.max(2-r*u/o,0),f=Math.floor(o*(2-c)/100)*100,h=this.chanceAtResource(e,c*100);h!=0&&(n.push({wld:f,mod:c,tier:u,time:h-i}),i=h)}return n},calcWalkMinutes(e,t){return 2*e/t/60},calcCyclesDaily(e,t,r,n,i){let o=0;const a=this.calcWalkMinutes(n,i);if(this.allowFloating&&this.useFloatingResources[t])for(const s of this.tierResources(t,e,r)){const l=Math.ceil(s.wld/r),u=10*l+a;o+=24*60*s.time/100/u}else{const s=e*(2-this.productivity(t)),l=Math.ceil(s/r),u=10*l+a;o=24*60/u}return o},modifyGrindTakens(e,t){e.target.checked?this.grindTakenSet.add(t):this.grindTakenSet.delete(t),this.grindTakenList=[...this.grindTakenSet]},workerLabel(e){let t=this.displayWorkerNames?e.label:"";const r=At();return r&&r.ready&&(t+=r.speciesIcons[r.workerStatic[e.charkey].species]),t+=e.level,t},getUserWorkshop(e){return e in this.userWorkshops||(this.userWorkshops[e]={...this.defaultUserWorkshop}),this.userWorkshops[e]},workerIncomePerCp(e){const t=this.workerIncome(e),r=this.workerSharedConnectionCP(e),n=this.workerSharedLodgageCP(e).value,i=t/(r+n);return isNaN(i)&&console.log(`workerIncomePerCp: ${dt(t,2)} / (${dt(r,2)} + ${dt(n,2)}) = ${dt(i,2)} for worker ${e.label}`),i},workerIncome(e){const t=At(),r=mr();if(t.jobIsIdle(e.job)||!r.pzJobs)return 0;if(t.jobIsPz(e.job)){if(r.pzJobs[e.job.pzk]==null)throw Error(`pzjob ${e.job.pzk} is undefined`);return r.pzJobs[e.job.pzk].profit.priceDaily}if(t.jobIsFarming(e.job))return this.farmingProfitPerWorker;if(t.jobIsCustom(e.job))return e.job.profit;if(t.jobIsWorkshop(e.job)){const n=e.job.hk,i=this.getUserWorkshop(n);return t.profitWorkshopWorker(n,i,e).priceDaily}},workerSharedConnectionCP(e){let t;const r=At();if(r.jobIsPz(e.job)&&(t=mr().pzjobsSharedConnectionCP[e.job.pzk].value),r.jobIsFarming(e.job)&&(t=0),r.jobIsCustom(e.job)&&(t=e.job.cp),r.jobIsWorkshop(e.job)){const n=this.workersWorkshop.filter(i=>i.job.hk==e.job.hk).length;t=this.getUserWorkshop(e.job.hk).manualCp/n}return t},workerSharedLodgageCP(e){const t={value:void 0,tooltip:"?"},r=At();if(!r.ready)return t;const n=this.workerIncome(e),i=r.tnk2tk(e.tnk),o=this.townsInfra[i].cost,a=this.userWorkers.filter(l=>r.tnk2tk(l.tnk)==i).length,s=this.townsTotalIncome[i].income;return this.townsTotalIncome[i].hasNegativeJob||s==0?(t.value=o/a,t.tooltip=`= total lodgage costs of hometown shared equally between all active jobs from that town:
${o}CP / ${a}`):a==1?(t.value=o,t.tooltip=`= all costs of ${r.nodeName(e.tnk)} lodgage`):(t.value=o*(n/s),t.tooltip=`= total lodgage costs of hometown shared proportionally between all active jobs from that town:
${o}CP * (${dt(n,3)} / ${dt(s,3)})`),t}},getters:{grindTakenSet(e){const t=new Set(e.grindTakenList);return console.log("grindTakenSet getter",t),t},marketUrl:e=>`https://apiv2.bdolytics.com/${e.selectedLang}/${e.selectedRegion}/market/central-market-data`,codexNodeUrl:e=>`https://bdolytics.com/${e.selectedLang}/${e.selectedRegion}/db/node/`,itemUrl:e=>`https://bdolytics.com/${e.selectedLang}/${e.selectedRegion}/db/item/`,floatingRegionGroups(){const e=At();return Object.keys(e.regionGroups).filter(r=>this.useFloatingResources.hasOwnProperty(r)&&this.useFloatingResources[r])},modHists(){const e={},t=At();for(const r of Object.keys(t.regionGroups))this.regionResources.hasOwnProperty(r)?e[r]=[this.regionResources[r]]:e[r]=[0];for(const r of this.floatingRegionGroups){this.regionResources2.hasOwnProperty(r)||(this.regionResources2[r]=[0]);const n=this.regionResources2[r].map(Number).filter(i=>!isNaN(i)).sort((i,o)=>o-i);e[r]=n}return e},medianResources(){const e={};for(const[t,r]of Object.entries(this.modHists)){let n=0;const i=r.length;if(i%2)n=r[(i-1)/2];else{const o=r[(i-1-1)/2],a=r[(i-1+1)/2];n=(o+a)/2}e[t]=n}return e},medianWorkloads(){const e={},t=At();for(const[r,n]of Object.entries(t.plantzones)){const i=n.regiongroup;e[r]=n.workload*(2-this.medianResources[i]/100)}return e},modTimes(){const e=n=>n.reduce((i,o)=>i+o,0)/n.length,t={},r=At();for(const n of Object.keys(r.regionGroups)){const i=this.modHists[n].length,o={},a=this.modHists[n][0],s=this.modHists[n][i-1];if(a==s)o[a]=(i-1)/2;else{const u={};for(let c=0;c<i;c++){const f=this.modHists[n][c];if(f==a){o[f]=100*c/(i-1);continue}if(f==s){o[f]=100*c/(i-1);break}f in u?u[f].push(c):u[f]=[c]}for(const[c,f]of Object.entries(u)){const h=e(f);o[c]=100*h/(i-1)}}t[n]=o}return t},modSorteds(){const e={},t=At();for(const r of Object.keys(t.regionGroups)){const n=Object.keys(this.modTimes[r]).map(Number).sort((i,o)=>i-o);e[r]=n}return e},productivity:e=>t=>(t in e.regionResources?e.regionResources[t]:0)/100,nodeCostInfinityUntaken:e=>t=>e.autotakenNodes.has(t)?0:1/0,haveLodging(e){const t=At();let r={slots:{perTown:{},total:0},cp:{perTown:{},total:0}};for(const[n,i]of Object.entries(t.lodgingPerTown)){if(r.slots.perTown[n]=1,r.cp.perTown[n]=0,n==619&&!e.activateAncado){r.slots.perTown[n]=0;continue}i.houses.forEach(o=>{e.lodgingTaken[o.key]&&(r.slots.perTown[n]+=o.lodgingSpaces,r.cp.perTown[n]+=o.CP)}),e.lodgingP2W[n]&&(r.slots.perTown[n]+=e.lodgingP2W[n]),r.slots.total+=r.slots.perTown[n],r.cp.total+=r.cp.perTown[n]}return console.log("haveLodging getter"),r},townFreeLodgingCount:e=>t=>{const r=At(),n=e.haveLodging.slots.perTown[t],i=e.userWorkers.filter(o=>r.tnk2tk(o.tnk)==t).length;return n-i},countWorkers(e){return e.userWorkers.length},workingWorkers(e){return e.userWorkers.filter(t=>t.job&&t.job!=null)},townWorkers:e=>t=>{const r=At();return e.userWorkers.filter(i=>r.tnk2tk(i.tnk)==t)},townWorkingWorkers:e=>t=>{const r=At();return e.workingWorkers.filter(i=>r.tnk2tk(i.tnk)==t)},getFreeWorkers:e=>t=>{const r=At();return e.userWorkers.filter(n=>r.tnk2tk(n.tnk)==t&&!n.job)},workerStatsForDisplay:e=>t=>{if(e.displayWorkerStatsRank){const n=At().workerStatRank(t);return{wspd:n.wspd_rank*100,mspd:n.mspd_rank*100,luck:n.luck_rank*100}}else return e.displayWorkerStatsForPz?At().workerStatsOnCurrentJob(t):{wspd:t.wspdSheet,mspd:t.mspdSheet,luck:t.luckSheet}},workersMinMaxStats(e){console.log("workersMinMaxStats");const t={wspd:{lo:142,hi:143},mspd:{lo:7.4,hi:7.6},luck:{lo:10,hi:11}};return e.userWorkers.forEach(r=>{if(r.charkey==7572){const n=e.workerStatsForDisplay(r);t.wspd.lo=Math.min(n.wspd,t.wspd.lo),t.mspd.lo=Math.min(n.mspd,t.mspd.lo),t.luck.lo=Math.min(n.luck,t.luck.lo),t.wspd.hi=Math.max(n.wspd,t.wspd.hi),t.mspd.hi=Math.max(n.mspd,t.mspd.hi),t.luck.hi=Math.max(n.luck,t.luck.hi)}}),t},wagonRoutes(e){const t=new Set,r=[],n=At();if(!n.ready)return r;for(const i of this.workingWorkers)if(n.jobIsWorkshop(i.job)){const o=i.tnk;if(e.tradeRouteAlwaysOn[o]){const a=Number(e.tradeDestinations[o]),s=`${o}-${a}`;if(t.has(s))continue;r.push({origin:o,destination:a}),t.add(s)}}return r},grindTakenDesc(e){let t="";const r=At();return r.ready&&e.grindTakenList.forEach(n=>{t+=r.uloc.node[n]+`
`}),t},currentNodesJobs(e){const t={},r=mr();for(const n of r.mapJobs)n.usedPath&&n.usedPath.forEach(i=>i in t?t[i].push(n):t[i]=[n]);return t},pzjobsSharedEfficiency(e){const t={},r=mr();for(const[n,i]of Object.entries(r.pzJobs))i.usedPath&&(t[n]=i.profit.priceDaily/e.pzjobsSharedConnectionCP[n]);return t},pzjobsSortedSharedEfficiency(e){return Object.entries(e.pzjobsSharedEfficiency).sort(([,t],[,r])=>r-t)},farmingProfitPerWorker(e){return(e.farmingProfit-e.farmingBareProfit)/10},newWorkerName:e=>t=>{const n=At().uloc.town[t].replace("\u0413\u043E\u0440\u043E\u0434 ","").replace("\u0414\u0435\u0440\u0435\u0432\u043D\u044F ","").substring(0,3),i=e.townWorkers(t).length+1;return n+i},workerBringsItemkeys:e=>t=>{const r=At();if(r.jobIsIdle(t.job))return[];if(r.jobIsPz(t.job))return r.plantzones[t.job].itemkeys;if(r.jobIsFarming(t.job))return[];if(r.jobIsCustom(t.job))return[];if(r.jobIsWorkshop(t.job))return[]},townsStoreItemkeys(e){const t={},r=At();return r.ready&&(r.townsWithRedirectableStorage.forEach(n=>t[r.tnk2tk(n)]=new Set([])),e.workingWorkers.forEach(n=>{if(r.jobIsPz(n.job)){const i=r.tnk2tk(n.job.storage);t[i]=new Set([...t[i],...r.plantzones[n.job.pzk].itemkeys])}})),t},baseStorage(e){let t=16;return e.selectedRegion=="RU"&&(t=8),e.selectedRegion=="SEA"&&(t=8),e.selectedRegion=="MENA"&&(t=8),t+(e.storageVP?16:0)},townInfra:e=>(t,r,n)=>{const i=At();t in e.lodgingP2W||(e.lodgingP2W[t]=0),t in e.storageP2W||(e.storageP2W[t]=0),t in e.storagePersonal||(e.storagePersonal[t]=0);const o=r-e.lodgingP2W[t]-1,a=n+(n>0?1:0)+e.storagePersonal[t]-e.storageP2W[t]-e.baseStorage;return i.lsLookup(t,o,a)},townInfraAddCost:e=>(t,r,n,i)=>{if(i&&t==i){const o=t,a=e.townsInfra[o],s=new Set([...e.townsStoreItemkeys[o],...n]).size,l=e.townInfra(o,e.townWorkingWorkers(o).length+r,s),c=At().uloc.town[o]+` housing:
old: ${Math.max(0,a.wantLodging)}\u{1F6CF}\uFE0F + ${Math.max(0,a.wantStorage)}\u{1F4E6} = ${dt(a.cost)} CP
new: ${Math.max(0,l.wantLodging)}\u{1F6CF}\uFE0F + ${Math.max(0,l.wantStorage)}\u{1F4E6} = ${dt(l.cost)} CP`;return{cost:l.cost-a.cost,tooltip:c,storageTk:i}}else{const o=e.townsInfra[t],a=e.townsStoreItemkeys[t].size,s=e.townInfra(t,e.townWorkingWorkers(t).length+r,a),l=[],u=[],c={};if(i)u.push(i);else{c.sameTown=e.townInfraAddCost(t,r,n,t);for(const y of Object.keys(e.townsInfra))y!=t&&u.push(y)}for(const y of u){const b=e.townsInfra[y],w=new Set([...e.townsStoreItemkeys[y],...n]).size,T=e.townInfra(y,e.townWorkingWorkers(y).length+r,w);if(T.errL||T.errS)continue;const S=isNaN(T.cost)?Number.POSITIVE_INFINITY:T.cost-b.cost;if(l.push({storTk:y,storageOldInfra:b,storageNewInfra:T,storageCostDelta:S}),S==0)break}l.sort((y,b)=>y.storageCostDelta-b.storageCostDelta);const{storTk:f,storageOldInfra:h,storageNewInfra:d,storageCostDelta:p}=l[0],g=p+s.cost-o.cost,m=At();if(c.sameTown&&c.sameTown.cost<=g)return c.sameTown;const v=m.uloc.town[t]+` lodging:
old: ${Math.max(0,o.wantLodging)}\u{1F6CF}\uFE0F + ${Math.max(0,o.wantStorage)}\u{1F4E6} = ${dt(o.cost)} CP
new: ${Math.max(0,s.wantLodging)}\u{1F6CF}\uFE0F + ${Math.max(0,s.wantStorage)}\u{1F4E6} = ${dt(s.cost)} CP
`+m.uloc.town[f]+` storage:
old: ${Math.max(0,h.wantLodging)}\u{1F6CF}\uFE0F + ${Math.max(0,h.wantStorage)}\u{1F4E6} = ${dt(h.cost)} CP
new: ${Math.max(0,d.wantLodging)}\u{1F6CF}\uFE0F + ${Math.max(0,d.wantStorage)}\u{1F4E6} = ${dt(d.cost)} CP`;return{cost:p+s.cost-o.cost,tooltip:v,storageTk:f}}},townsInfra(e){const t={},r=At();return r.ready&&r.townsWithRedirectableStorage.forEach(n=>{const i=r.tnk2tk(n);if(t[i]=this.townInfra(i,e.townWorkingWorkers(i).length,e.townsStoreItemkeys[i]?e.townsStoreItemkeys[i].size:0),isNaN(t[i].cost))throw Error(`no infra for tk=${i}`)}),t},lodgage(e){return Object.values(this.townsInfra).reduce((t,r)=>t+r.cost,0)},townsTopIncomeWorkers(e){const t={},r=At();if(!r.ready)return t;r.townsWithLodging.forEach(n=>t[r.tnk2tk(n)]=[]);for(const[n,i]of Object.entries(e.workingWorkers)){const o=r.tnk2tk(i.tnk);t[o].push(i)}for(const[n,i]of Object.entries(t))i.sort((o,a)=>e.workerIncome(a)-e.workerIncome(o));return console.log("townsTopIncomeWorkers",t),t},townsSteppedInfra(e){const t=Date.now(),r={},n=At();if(!n.ready)return r;const i=[];n.townsWithRedirectableStorage.forEach(l=>{const u=n.tnk2tk(l);i[u]=[],r[u]=[]});for(const[l,u]of Object.entries(e.workingWorkers))i[n.tnk2tk(u.tnk)].push(u);for(const[l,u]of Object.entries(i)){let c=0,f=new Set([]),h=0;const d=e.townInfra(l,c,f.size),p=d.success?d.cost:NaN;for(;u.length>0;){let g=-1/0,m=null;var o,a,s;for(const v of u){const y=e.workerIncome(v),b=e.workerBringsItemkeys(v),w=new Set([...f,...b]),T=e.townInfra(l,c+1,w.size);if(!T.success)throw Error(`townsSteppedInfra: failed to provide infrastructure for ${l}, ${c+1}, ${w.size}`);const S=(h+y)/(T.cost-p);(S>g||!(S<g)&&y>a)&&(g=S,m=v,o=w,a=y,s=T.cost)}if(!m)throw Error("townsSteppedInfra: efficiency -Inf");c+=1,f=o,h+=a,r[l].push({w:m,curL:c,curS:f.size,addI:a,curI:h,cost:s,eff:g}),u.splice(u.indexOf(m),1)}for(let g=0;g<r[l].length;g++){const m=r[l][g];let v=g-1;for(;v>=0&&r[l][v].cost==m.cost;)v--;const y=v>=0?r[l][v]:{curI:0,cost:p};m.delta_eff=(m.curI-y.curI)/(m.cost-y.cost)}}return console.log("townsSteppedInfra took",Date.now()-t,"ms"),r},workersSortedByIncomePerCp(e){const t=[];return e.workingWorkers.forEach(r=>{t.push({w:r,i:e.workerIncome(r),ipc:e.workerIncomePerCp(r)})}),t.sort((r,n)=>isNaN(r.ipc)?-1:isNaN(n.ipc)||!isFinite(r.ipc)?1:isFinite(n.ipc)?r.ipc-n.ipc:-1),t},townsTotalIncome(e){const t={},r=At();if(!r.ready)return t;r.townsWithLodging.forEach(n=>{const i=r.tnk2tk(n);t[i]={income:0,mapCp:0,hasNegativeJob:!1}});for(const[n,i]of Object.entries(e.workingWorkers)){const o=r.tnk2tk(i.tnk),a=e.workerIncome(i);t[o].income+=a,t[o].mapCp+=e.workerSharedConnectionCP(i),a<0&&(t[o].hasNegativeJob=!0)}for(const[n,i]of Object.entries(t)){const o=e.townsInfra[n].cost;i.eff=i.income/(i.mapCp+o),i.income==0&&i.mapCp+o==0&&(i.eff=0)}return t},workedPlantzones(e){const t=mr();if(!t.pzJobs)return new Set;const r=Object.keys(t.pzJobs);return new Set(r)},pzJobsTotalDailyProfit(e){let t=0;const r=mr();if(!r.pzJobs)return t;for(const[n,i]of Object.entries(r.pzJobs))t+=i.profit.priceDaily;return t},pzJobsTotalLodgingCost(e){let t=0;const r=mr();if(!r.pzJobs)return t;for(const[n,i]of Object.entries(r.pzJobs))t+=e.workerSharedLodgageCP(i.worker).value;return t},pzJobsDailyProfitPerCp(e){const t=mr();return this.pzJobsTotalDailyProfit/(t.routing.autotakenNodesCP+e.pzJobsTotalLodgingCost)},workersFarming(e){return e.userWorkers.filter(t=>t.job=="farming")},workersFarmingCount(e){return e.workersFarming.length},farmingCP(e){return e.farmingEnable?80-e.farmingP2WShare:0},farmingTotalProfit(e){return e.farmingEnable?e.farmingBareProfit+(e.farmingProfit-e.farmingBareProfit)/10*e.workersFarmingCount:0},farmingJobsTotalLodgingCost(e){let t=0;return e.workersFarming.forEach(r=>{t+=e.workerSharedLodgageCP(r).value}),t},farmingJobsDailyProfitPerCp(e){return e.farmingTotalProfit/(80+e.farmingJobsTotalLodgingCost)},workersWorkshop(e){const t=At();return e.userWorkers.filter(r=>r.job&&t.jobIsWorkshop(r.job))},workersWorkshopCount(e){return e.workersWorkshop.length},workshopTotalProfit(e){let t=0;return e.workersWorkshop.forEach(r=>t+=e.workerIncome(r)),t},occupiedWorkshops(e){let t=new Set;return e.workersWorkshop.forEach(r=>t.add(r.job.hk)),console.log("occupiedWorkshops",t),t},workshopTotalCP(e){let t=0;return e.occupiedWorkshops.forEach(r=>t+=e.getUserWorkshop(r).manualCp),t},workshopJobsTotalLodgingCost(e){let t=0;return e.workersWorkshop.forEach(r=>{t+=e.workerSharedLodgageCP(r).value}),t},workshopJobsDailyProfitPerCp(e){return e.workshopTotalProfit/(e.workshopTotalCP+e.workshopJobsTotalLodgingCost)},workersCustom(e){const t=At();return e.userWorkers.filter(r=>r.job&&t.jobIsCustom(r.job))},workersCustomCount(e){return e.workersCustom.length},customTotalProfit(e){let t=0;return e.workersCustom.forEach(r=>t+=r.job.profit),t},customTotalCP(e){let t=0;return e.workersCustom.forEach(r=>t+=r.job.cp),t},customJobsTotalLodgingCost(e){let t=0;return e.workersCustom.forEach(r=>{t+=e.workerSharedLodgageCP(r).value}),t},customJobsDailyProfitPerCp(e){return e.customTotalProfit/(e.customTotalCP+e.customJobsTotalLodgingCost)},customJobsCp(e){const t={},r=At();return r.ready&&(e.workersCustom.forEach(n=>{const i=r.tnk2tk(n.tnk);i in t||(t[i]=0),t[i]+=n.job.cp}),console.log("customJobsCp",t)),t},totalCP(e){return mr().routing.autotakenNodesCP+e.farmingCP+e.lodgage+e.workshopTotalCP+e.customTotalCP},workersIdleCount(e){return e.countWorkers-e.workedPlantzones.size-e.workersFarmingCount-e.workersWorkshopCount-e.workersCustomCount},allJobsTotalDailyProfit(e){return e.pzJobsTotalDailyProfit+e.farmingTotalProfit+e.workshopTotalProfit+e.customTotalProfit},allJobsDailyProfitPerCp(e){return this.allJobsTotalDailyProfit/e.totalCP},workerPzStats(e){const t=At(),r=[];return e.userWorkers.forEach(n=>{r.push(t.workerStatsOnPlantzone(n))}),console.log("workerPzStats"),r},allJobsProfitsBefore(e){const t=e.allJobsTotalDailyProfit,r=e.totalCP,n=e.allJobsDailyProfitPerCp;return{daily:t,cp:r,dailyPerCp:n}},jobEfficiencyDelta:e=>(t,r)=>{const n=e.allJobsProfitsBefore;return(n.daily+t)/(n.cp+r)-n.dailyPerCp},jobsTally(e){const t={},r=At();if(!r.ready)return t;const n=mr();if(!n.pzJobs)return t;for(const[i,o]of Object.entries(n.pzJobs)){const a=r.plantzones[i],s=r.workerStatsOnPlantzone(o.worker).luck;if(a.lucky)for(const[u,c]of Object.entries(a.lucky))u in t||(t[u]=0),t[u]+=s/100*c*o.profit.cyclesDaily;if(r.isGiant(o.worker.charkey))for(const[u,c]of Object.entries(a.unlucky_gi))u in t||(t[u]=0),t[u]+=c*o.profit.cyclesDaily;else for(const[u,c]of Object.entries(a.unlucky))u in t||(t[u]=0),t[u]+=c*o.profit.cyclesDaily}return t},cyclesTally(e){let t={pz:0,workshop:0,chicken:0};const r=At(),n=mr();if(!r.ready)return t;for(const i of e.workingWorkers){if(!i)return;if(r.jobIsPz(i.job)){if(!n.pzJobs)continue;const o=n.pzJobs[i.job.pzk];t.pz+=o.profit.cyclesDaily}if(r.jobIsWorkshop(i.job)){const o=i.job.hk,a=e.getUserWorkshop(o);t.workshop+=r.measureWorkshopWorker(o,a,i).cyclesDaily}}return t.chicken=(t.pz+t.workshop)/3,t},lodgingCostsPerTownPerJobtype(e){const t={};e.userWorkers.filter(r=>gameStore.tnk2tk(r.tnk)==tk);for(const[r,n]of Object.entries(e.haveLodging.slots.perTown))e.haveLodging.cp.perTown[r],e.townWorkers(r);return t},bargainBonus(){return this.tradingLevel*.005}}}),ii=od({id:"market",state:()=>({ready:!1,apiPrices:[],apiAlive:!1,calculatedPrices:{},apiDatetime:0}),actions:{async fetchData(){const e=Date.now(),t=ee(),n=`https://apiv2.bdolytics.com/${t.selectedLang=="jp"?"ja":t.selectedLang}/${t.selectedRegion}/market/central-market-data`,i=await(await fetch(n)).json(),o=At(),a=new Set(o.itemKeys);a.add(9492);const s={};i.data.forEach(l=>{(a.has(l.item_id)||o.ready&&o.craftInputItemKeySet.has(l.item_id))&&(s[l.item_id]=l.price)});for(const l of Object.keys(o.vendorPrices))t.keepItems[l]=!0;this.calculatedPrices=await(await fetch("data/manual/calculated_prices.json")).json(),4202 in s&&(this.apiPrices=s,this.apiDatetime=Date.now(),this.apiAlive=!0,this.ready=!0,localStorage.setItem("market",JSON.stringify(this.$state))),console.log("fetchMarket took",Date.now()-e,"ms")},itemPriceUrl(e){return e in this.apiPrices?`https://bdolytics.com/market/central-market/item/${e}`:ee().itemUrl+e},priceBunch(e){const t={val:null,desc:""};if(e===null||typeof e>"u")return t;t.val=0;for(const[r,n]of Object.entries(e))if(r in this.prices){const i=this.prices[r]*n;t.val+=i;const o=this.prices[r],a=`${o}`.length<8?`${o}`:dt(o,3),s=`${n}`.length<8?`${n}`:dt(n,3),l=`${i}`.length<8?`${i}`:dt(i);t.desc+=`${a} x ${s} = ${l}
`}else t.val=NaN,t.desc+=`??? x ${n} = ???
`;return t},pricePzd(e,t){const r=this.priceBunch(e.unlucky).val;if(e.lucky){const n=this.priceBunch(e.lucky).val;return t/100*n+(1-t/100)*r}return r},priceLerp(e,t,r){return e===null?t:r/100*e+(1-r/100)*t}},getters:{prices(){const e=Date.now(),t=ee(),r=At();let n={};for(const[i,o]of Object.entries(t.customPrices))o!==""&&(n[i]=o);for(const[i,o]of Object.entries(this.apiPrices))i in n||(n[i]=o);for(const[i,o]of Object.entries(r.vendorPrices))i in n||(n[i]=o);for(const i of Object.keys(n))i in t.keepItems&&t.keepItems[i]||i in r.vendorPrices||(n[i]*=t.selectedTax);for(const[i,o]of Object.entries(this.calculatedPrices))if(!(i in t.customPrices&&t.customPrices[i]!=="")){n[i]=0;for(const[a,s]of Object.entries(o))n[i]+=n[a]*s}return console.log("prices getter took",Date.now()-e,"ms"),n}}});var Qy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nB(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function iB(e){var t=e.default;if(typeof t=="function"){var r=function(){return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var oB={exports:{}},aB={exports:{}};(function(e,t){(function(){var r,n,i,o,a,s,l,u,c,f,h,d,p,g,m;i=Math.floor,f=Math.min,n=function(v,y){return v<y?-1:v>y?1:0},c=function(v,y,b,w,T){var S;if(b==null&&(b=0),T==null&&(T=n),b<0)throw new Error("lo must be non-negative");for(w==null&&(w=v.length);b<w;)S=i((b+w)/2),T(y,v[S])<0?w=S:b=S+1;return[].splice.apply(v,[b,b-b].concat(y)),y},s=function(v,y,b){return b==null&&(b=n),v.push(y),g(v,0,v.length-1,b)},a=function(v,y){var b,w;return y==null&&(y=n),b=v.pop(),v.length?(w=v[0],v[0]=b,m(v,0,y)):w=b,w},u=function(v,y,b){var w;return b==null&&(b=n),w=v[0],v[0]=y,m(v,0,b),w},l=function(v,y,b){var w;return b==null&&(b=n),v.length&&b(v[0],y)<0&&(w=[v[0],y],y=w[0],v[0]=w[1],m(v,0,b)),y},o=function(v,y){var b,w,T,S,k,E;for(y==null&&(y=n),S=function(){E=[];for(var P=0,C=i(v.length/2);0<=C?P<C:P>C;0<=C?P++:P--)E.push(P);return E}.apply(this).reverse(),k=[],w=0,T=S.length;w<T;w++)b=S[w],k.push(m(v,b,y));return k},p=function(v,y,b){var w;if(b==null&&(b=n),w=v.indexOf(y),w!==-1)return g(v,0,w,b),m(v,w,b)},h=function(v,y,b){var w,T,S,k,E;if(b==null&&(b=n),T=v.slice(0,y),!T.length)return T;for(o(T,b),E=v.slice(y),S=0,k=E.length;S<k;S++)w=E[S],l(T,w,b);return T.sort(b).reverse()},d=function(v,y,b){var w,T,S,k,E,P,C,A,L;if(b==null&&(b=n),y*10<=v.length){if(S=v.slice(0,y).sort(b),!S.length)return S;for(T=S[S.length-1],C=v.slice(y),k=0,P=C.length;k<P;k++)w=C[k],b(w,T)<0&&(c(S,w,0,null,b),S.pop(),T=S[S.length-1]);return S}for(o(v,b),L=[],E=0,A=f(y,v.length);0<=A?E<A:E>A;0<=A?++E:--E)L.push(a(v,b));return L},g=function(v,y,b,w){var T,S,k;for(w==null&&(w=n),T=v[b];b>y;){if(k=b-1>>1,S=v[k],w(T,S)<0){v[b]=S,b=k;continue}break}return v[b]=T},m=function(v,y,b){var w,T,S,k,E;for(b==null&&(b=n),T=v.length,E=y,S=v[y],w=2*y+1;w<T;)k=w+1,k<T&&!(b(v[w],v[k])<0)&&(w=k),v[y]=v[w],y=w,w=2*y+1;return v[y]=S,g(v,E,y,b)},r=function(){v.push=s,v.pop=a,v.replace=u,v.pushpop=l,v.heapify=o,v.updateItem=p,v.nlargest=h,v.nsmallest=d;function v(y){this.cmp=y!=null?y:n,this.nodes=[]}return v.prototype.push=function(y){return s(this.nodes,y,this.cmp)},v.prototype.pop=function(){return a(this.nodes,this.cmp)},v.prototype.peek=function(){return this.nodes[0]},v.prototype.contains=function(y){return this.nodes.indexOf(y)!==-1},v.prototype.replace=function(y){return u(this.nodes,y,this.cmp)},v.prototype.pushpop=function(y){return l(this.nodes,y,this.cmp)},v.prototype.heapify=function(){return o(this.nodes,this.cmp)},v.prototype.updateItem=function(y){return p(this.nodes,y,this.cmp)},v.prototype.clear=function(){return this.nodes=[]},v.prototype.empty=function(){return this.nodes.length===0},v.prototype.size=function(){return this.nodes.length},v.prototype.clone=function(){var y;return y=new v,y.nodes=this.nodes.slice(0),y},v.prototype.toArray=function(){return this.nodes.slice(0)},v.prototype.insert=v.prototype.push,v.prototype.top=v.prototype.peek,v.prototype.front=v.prototype.peek,v.prototype.has=v.prototype.contains,v.prototype.copy=v.prototype.clone,v}(),function(v,y){return e.exports=y()}(this,function(){return r})}).call(Qy)})(aB);(function(e){e.exports=aB.exports})(oB);const Gp=nB(oB.exports);let je,Hp=null;function Pg(){return(Hp===null||Hp.byteLength===0)&&(Hp=new Uint8Array(je.memory.buffer)),Hp}let iy=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});iy.decode();const JQ=2146435072;let pw=0;function QQ(e,t){return pw+=t,pw>=JQ&&(iy=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),iy.decode(),pw=t),iy.decode(Pg().subarray(e,e+t))}function gw(e,t){return e=e>>>0,QQ(e,t)}let sc=0;const Eg=new TextEncoder;"encodeInto"in Eg||(Eg.encodeInto=function(e,t){const r=Eg.encode(e);return t.set(r),{read:e.length,written:r.length}});function Cg(e,t,r){if(r===void 0){const s=Eg.encode(e),l=t(s.length,1)>>>0;return Pg().subarray(l,l+s.length).set(s),sc=s.length,l}let n=e.length,i=t(n,1)>>>0;const o=Pg();let a=0;for(;a<n;a++){const s=e.charCodeAt(a);if(s>127)break;o[i+a]=s}if(a!==n){a!==0&&(e=e.slice(a)),i=r(i,n,n=a+e.length*3,1)>>>0;const s=Pg().subarray(i+a,i+n);a+=Eg.encodeInto(e,s).written,i=r(i,n,a,1)>>>0}return sc=a,i}let Wu=null;function Ko(){return(Wu===null||Wu.buffer.detached===!0||Wu.buffer.detached===void 0&&Wu.buffer!==je.memory.buffer)&&(Wu=new DataView(je.memory.buffer)),Wu}function ttt(e){const t=je.__externref_table_alloc();return je.__wbindgen_export_4.set(t,e),t}function vw(e,t){try{return e.apply(this,t)}catch(r){const n=ttt(r);je.__wbindgen_exn_store(n)}}function ett(e,t){return e=e>>>0,Pg().subarray(e/1,e/1+t)}function gf(e){return e==null}function Lk(e){const t=typeof e;if(t=="number"||t=="boolean"||e==null)return`${e}`;if(t=="string")return`"${e}"`;if(t=="symbol"){const i=e.description;return i==null?"Symbol":`Symbol(${i})`}if(t=="function"){const i=e.name;return typeof i=="string"&&i.length>0?`Function(${i})`:"Function"}if(Array.isArray(e)){const i=e.length;let o="[";i>0&&(o+=Lk(e[0]));for(let a=1;a<i;a++)o+=", "+Lk(e[a]);return o+="]",o}const r=/\[object ([^\]]+)\]/.exec(toString.call(e));let n;if(r&&r.length>1)n=r[1];else return toString.call(e);if(n=="Object")try{return"Object("+JSON.stringify(e)+")"}catch{return"Object"}return e instanceof Error?`${e.name}: ${e.message}
${e.stack}`:n}function U0(e){const t=je.__wbindgen_export_4.get(e);return je.__externref_table_dealloc(e),t}const hI=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>je.__wbg_wasmnoderouter_free(e>>>0,1));class t_{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,hI.unregister(this),t}free(){const t=this.__destroy_into_raw();je.__wbg_wasmnoderouter_free(t,0)}setOption(t,r){const n=Cg(t,je.__wbindgen_malloc,je.__wbindgen_realloc),i=sc,o=Cg(r,je.__wbindgen_malloc,je.__wbindgen_realloc),a=sc,s=je.wasmnoderouter_setOption(this.__wbg_ptr,n,i,o,a);if(s[1])throw U0(s[0])}solveForTerminalPairs(t){const r=je.wasmnoderouter_solveForTerminalPairs(this.__wbg_ptr,t);if(r[2])throw U0(r[1]);return U0(r[0])}constructor(t){const r=je.wasmnoderouter_new(t);if(r[2])throw U0(r[1]);return this.__wbg_ptr=r[0]>>>0,hI.register(this,this.__wbg_ptr,this),this}}Symbol.dispose&&(t_.prototype[Symbol.dispose]=t_.prototype.free);const rtt=new Set(["basic","cors","default"]);async function ntt(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(n){if(e.ok&&rtt.has(e.type)&&e.headers.get("Content-Type")!=="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n);else throw n}const r=await e.arrayBuffer();return await WebAssembly.instantiate(r,t)}else{const r=await WebAssembly.instantiate(e,t);return r instanceof WebAssembly.Instance?{instance:r,module:e}:r}}function itt(){const e={};return e.wbg={},e.wbg.__wbg_Error_e17e777aac105295=function(t,r){return Error(gw(t,r))},e.wbg.__wbg_Number_998bea33bd87c3e0=function(t){return Number(t)},e.wbg.__wbg_String_8f0eb39a4a4c2f66=function(t,r){const n=String(r),i=Cg(n,je.__wbindgen_malloc,je.__wbindgen_realloc),o=sc;Ko().setInt32(t+4*1,o,!0),Ko().setInt32(t+4*0,i,!0)},e.wbg.__wbg_call_13410aac570ffff7=function(){return vw(function(t,r){return t.call(r)},arguments)},e.wbg.__wbg_done_75ed0ee6dd243d9d=function(t){return t.done},e.wbg.__wbg_entries_2be2f15bd5554996=function(t){return Object.entries(t)},e.wbg.__wbg_from_88bc52ce20ba6318=function(t){return Array.from(t)},e.wbg.__wbg_get_0da715ceaecea5c8=function(t,r){return t[r>>>0]},e.wbg.__wbg_get_458e874b43b18b25=function(){return vw(function(t,r){return Reflect.get(t,r)},arguments)},e.wbg.__wbg_instanceof_ArrayBuffer_67f3012529f6a2dd=function(t){let r;try{r=t instanceof ArrayBuffer}catch{r=!1}return r},e.wbg.__wbg_instanceof_Map_ebb01a5b6b5ffd0b=function(t){let r;try{r=t instanceof Map}catch{r=!1}return r},e.wbg.__wbg_instanceof_Uint8Array_9a8378d955933db7=function(t){let r;try{r=t instanceof Uint8Array}catch{r=!1}return r},e.wbg.__wbg_isArray_030cce220591fb41=function(t){return Array.isArray(t)},e.wbg.__wbg_isSafeInteger_1c0d1af5542e102a=function(t){return Number.isSafeInteger(t)},e.wbg.__wbg_iterator_f370b34483c71a1c=function(){return Symbol.iterator},e.wbg.__wbg_length_186546c51cd61acd=function(t){return t.length},e.wbg.__wbg_length_6bb7e81f9d7713e4=function(t){return t.length},e.wbg.__wbg_new_1f3a344cf3123716=function(){return new Array},e.wbg.__wbg_new_638ebfaedbf32a5e=function(t){return new Uint8Array(t)},e.wbg.__wbg_next_5b3530e612fde77d=function(t){return t.next},e.wbg.__wbg_next_692e82279131b03c=function(){return vw(function(t){return t.next()},arguments)},e.wbg.__wbg_prototypesetcall_3d4a26c1ed734349=function(t,r,n){Uint8Array.prototype.set.call(ett(t,r),n)},e.wbg.__wbg_push_330b2eb93e4e1212=function(t,r){return t.push(r)},e.wbg.__wbg_value_dd9372230531eade=function(t){return t.value},e.wbg.__wbg_wbindgenbigintgetasi64_ac743ece6ab9bba1=function(t,r){const n=r,i=typeof n=="bigint"?n:void 0;Ko().setBigInt64(t+8*1,gf(i)?BigInt(0):i,!0),Ko().setInt32(t+4*0,!gf(i),!0)},e.wbg.__wbg_wbindgenbooleanget_3fe6f642c7d97746=function(t){const r=t,n=typeof r=="boolean"?r:void 0;return gf(n)?16777215:n?1:0},e.wbg.__wbg_wbindgendebugstring_99ef257a3ddda34d=function(t,r){const n=Lk(r),i=Cg(n,je.__wbindgen_malloc,je.__wbindgen_realloc),o=sc;Ko().setInt32(t+4*1,o,!0),Ko().setInt32(t+4*0,i,!0)},e.wbg.__wbg_wbindgenin_d7a1ee10933d2d55=function(t,r){return t in r},e.wbg.__wbg_wbindgenisbigint_ecb90cc08a5a9154=function(t){return typeof t=="bigint"},e.wbg.__wbg_wbindgenisfunction_8cee7dce3725ae74=function(t){return typeof t=="function"},e.wbg.__wbg_wbindgenisobject_307a53c6bd97fbf8=function(t){const r=t;return typeof r=="object"&&r!==null},e.wbg.__wbg_wbindgenjsvaleq_e6f2ad59ccae1b58=function(t,r){return t===r},e.wbg.__wbg_wbindgenjsvallooseeq_9bec8c9be826bed1=function(t,r){return t==r},e.wbg.__wbg_wbindgennumberget_f74b4c7525ac05cb=function(t,r){const n=r,i=typeof n=="number"?n:void 0;Ko().setFloat64(t+8*1,gf(i)?0:i,!0),Ko().setInt32(t+4*0,!gf(i),!0)},e.wbg.__wbg_wbindgenstringget_0f16a6ddddef376f=function(t,r){const n=r,i=typeof n=="string"?n:void 0;var o=gf(i)?0:Cg(i,je.__wbindgen_malloc,je.__wbindgen_realloc),a=sc;Ko().setInt32(t+4*1,a,!0),Ko().setInt32(t+4*0,o,!0)},e.wbg.__wbg_wbindgenthrow_451ec1a8469d7eb6=function(t,r){throw new Error(gw(t,r))},e.wbg.__wbindgen_cast_2241b6af4c4b2941=function(t,r){return gw(t,r)},e.wbg.__wbindgen_cast_4625c577ab2ec9ee=function(t){return BigInt.asUintN(64,t)},e.wbg.__wbindgen_cast_9ae0607507abb057=function(t){return t},e.wbg.__wbindgen_cast_d6cd19b81560fd6e=function(t){return t},e.wbg.__wbindgen_init_externref_table=function(){const t=je.__wbindgen_export_4,r=t.grow(4);t.set(0,void 0),t.set(r+0,void 0),t.set(r+1,null),t.set(r+2,!0),t.set(r+3,!1)},e}function ott(e,t){return je=e.exports,sB.__wbindgen_wasm_module=t,Wu=null,Hp=null,je.__wbindgen_start(),je}async function sB(e){if(je!==void 0)return je;typeof e<"u"&&(Object.getPrototypeOf(e)===Object.prototype?{module_or_path:e}=e:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof e>"u"&&(e=new URL("/workerman/assets/noderouter_bg.ce8735d7.wasm",self.location));const t=itt();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:r,module:n}=await ntt(await e,t);return ott(r,n)}const At=od({id:"game",state:()=>({ready:!1,plantzoneDrops:{},pzdSet:null,plantzoneStatic:{},itemKeys:[],nodes:{},distPerTown:{},distToTown:{},lodgingPerTown:{},houseInfo:{},regionInfo:{},townsConnectionRoots:new Set,townsWithLodging:[],townsWithRentableStorage:[],townsWithRedirectableStorage:[],townNames:{},regionGroups:{},loc:{},links:{},icons:{},workerStatic:{},skillData:{},vendorPrices:{},_tk2tnk:{},_tnk2tk:{},craftInputs:{},craftOutputs:{},wasmNodesLinks:{},wasmBaseTowns:new Set,wasmRouter:null,wasmRouterWithOption:null}),actions:{availableSkillPool(e,t){const r=new Set(e);return t&&r.delete(t),this.skillKeys.filter(i=>!r.has(i))},randomSkill(e){const t=this.availableSkillPool(e);return t[Math.floor(Math.random()*t.length)]},wspdBonusOnPlantzone(e){let t=0;return this.ready&&e.skills.forEach(r=>{const n=this.skillData[r];n!==void 0&&("wspd"in n&&(t+=n.wspd),"wspd_farm"in n&&(t+=n.wspd_farm))}),t},wspdBonus(e,t){let r=0;return this.ready&&e.skills.forEach(n=>{const i=this.skillData[n];i!==void 0&&("wspd"in i&&(r+=i.wspd),"wspd_"+t in i&&(r+=i["wspd_"+t]),"wspd_refine"in i&&t.startsWith("pack_")&&(r+=i.wspd_refine))}),r},mspdBonus(e){let t=0;return this.ready&&e.skills.forEach(r=>{const n=this.skillData[r];n!==void 0&&"mspd"in n&&(t+=n.mspd)}),t},luckBonus(e){let t=0;return this.ready&&e.skills.forEach(r=>{const n=this.skillData[r];n!==void 0&&"luck"in n&&(t+=n.luck)}),t},workerStatsOnPlantzone(e){return this.ready?{wspd:e.wspdSheet+this.wspdBonusOnPlantzone(e),mspd:this.workerStatic[e.charkey].mspd/100*(e.mspdSheet/(this.workerStatic[e.charkey].mspd/100)+this.mspdBonus(e)/100),luck:e.luckSheet+this.luckBonus(e)}:{wspd:0,mspd:0,luck:0}},workerStatsOnIndustry(e,t){return this.ready?{wspd:e.wspdSheet+this.wspdBonus(e,t),mspd:this.workerStatic[e.charkey].mspd/100*(e.mspdSheet/(this.workerStatic[e.charkey].mspd/100)+this.mspdBonus(e)/100),luck:e.luckSheet+this.luckBonus(e)}:{wspd:0,mspd:0,luck:0}},workerStatsOnCurrentJob(e){var t="farm";if(this.jobIsWorkshop(e.job)){const r=ee(),n=e.job.hk;n in r.userWorkshops||(r.userWorkshops[n]={...r.defaultUserWorkshop}),t=r.userWorkshops[n].industry}return{wspd:e.wspdSheet+this.wspdBonus(e,t),mspd:this.workerStatic[e.charkey].mspd/100*(e.mspdSheet/(this.workerStatic[e.charkey].mspd/100)+this.mspdBonus(e)/100),luck:e.luckSheet+this.luckBonus(e)}},workerStatRank(e){const t=e.level-1,r=this.workerStatic[e.charkey],n=r.wspd_lo*t,o=r.wspd_hi*t-n,s=(e.wspdSheet*1e6-r.wspd-n)/o||0,l=r.mspd_lo*t,u=r.mspd_hi*t,f=((e.mspdSheet/(r.mspd/100)-1)*1e6-l)/(u-l)||0,h=r.luck_lo*t,d=r.luck_hi*t,g=(e.luckSheet*1e4-r.luck-h)/(d-h)||0;return{wspd_rank:s,mspd_rank:f,luck_rank:g}},houseLodging(e){var n;const t=(n=this.houseInfo[e].CraftList[1])!=null?n:0;return{0:0,1:1,2:2,3:4,4:6,5:8}[t]},houseStorage(e){var n;const t=(n=this.houseInfo[e].CraftList[2])!=null?n:0;return{0:0,1:3,2:5,3:8,4:12,5:16}[t]},houseCost(e){var r;return(r=this.houseInfo[e]&&this.houseInfo[e].CP)!=null?r:NaN},async fetchData(){const e=Date.now();this.plantzoneDrops=await(await fetch("data/manual/plantzone_drops.json")).json(),this.pzdSet=new Set(Object.keys(this.plantzoneDrops).map(r=>+r)),this.plantzoneStatic=await(await fetch("data/plantzone.json")).json(),console.log("plantzoneStatic",this.plantzoneStatic[1879]),this.itemInfo=await(await fetch("data/item_info.json")).json(),this.itemKeys=await(await fetch("data/manual/plantzone_uniques.json")).json(),this.nodes=await(await fetch("data/exploration.json")).json(),this.tk2pzk=await(await fetch("data/distances_tk2pzk.json")).json(),this.pzk2tk=await(await fetch("data/distances_pzk2tk.json")).json(),this.tk2hk=await(await fetch("data/distances_tk2hk.json")).json(),this.regionInfo=await(await fetch("data/regioninfo.json")).json(),Object.values(this.regionInfo).forEach(({key:r,waypoint:n})=>{n!==0&&(this._tk2tnk[r]=n,this._tnk2tk[n]=r)}),this.townsConnectionRoots=new Set(Object.keys(this.nodes).filter(r=>this.nodes[r].kind>0&&this.nodes[r].kind<3&&this.nodes[r].CP===0).map(r=>this.nodes[r].key)),this.townsWithLodging=[1,61,301,302,601,602,604,608,1002,1101,1141,1301,1314,1319,1343,1380,1604,1623,1649,1691,1750,1781,1785,1795,1853,1857,1858,1834,1843,2001],this.lodgingPerTown=await(await fetch("data/lodging_per_town.json")).json(),this.townsWithRentableStorage=[1,61,301,302,601,602,604,608,1002,1101,1141,1301,1314,1319,1343,1380,1604,1623,1649,1691,1727,1750,1781,1785,1795,1853,1857,1834,1843,2001],this.townsWithRedirectableStorage=[1,61,301,302,601,602,604,608,1002,1101,1141,1301,1314,1319,1343,1380,1604,1623,1649,1691,1727,1750,1781,1785,1795,1834,1843,1850,1853,1857,1858,2001],this.houseInfo=await(await fetch("data/houseinfo.json")).json(),this.vendorPrices=await(await fetch("data/manual/vendor_prices.json")).json(),this.industries={unk:"unknown",jewelry:"jewelry",mass:"mass production",weap:"weapon",tool:"tool",furn:"furniture",costume:"costume",refine:"refine",siege:"siege",mount:"mount",exclus:"exclusive",pack_produce:"pack_produce",pack_herb:"pack_herb",pack_mushr:"pack_mushr",pack_fish:"pack_fish",pack_timber:"pack_timber",pack_ore:"pack_ore"};const t={};for(const[r,n]of Object.entries(this.plantzoneStatic))if(r in this.plantzoneDrops){const i=n.regiongroup;i in t?t[i].push(r):t[i]=[r]}this.regionGroups=t,this.skillData=await(await fetch("data/manual/skills.json")).json(),this.workerStatic=await(await fetch("data/worker_static.json")).json(),this.loc=await(await fetch("data/loc.json")).json(),this.links=await(await fetch("data/links.json")).json(),this.ls_lookup=await(await fetch("data/all_lodging_storage.json")).json(),this.ls_lodgings_sorted={};for(const[r,n]of Object.entries(this.ls_lookup))this.ls_lodgings_sorted[r]=Object.keys(n).sort((i,o)=>i-o);this.giantSpecies=new Set([2,4,8]),this.speciesIcons={0:"\u{1F47A}",1:"\u{1F468}",2:"\u{1F422}",3:"\u{1F47A}",4:"\u{1F422}",5:"\u{1F47A}",6:"\u{1F47A}",7:"\u{1F468}",8:"\u{1F422}"},this.craftInputs=await(await fetch("data/house_craft_inputs.json")).json(),this.craftOutputs=await(await fetch("data/house_craft_outputs.json")).json(),this.craftInfo=await(await fetch("data/house_craft_info.json")).json(),this.craftInputItemKeySet=new Set;for(const r of Object.values(this.craftInputs))for(const n of Object.keys(r))this.craftInputItemKeySet.add(Number(n));this.traders=await(await fetch("data/manual/traders.json")).json(),await this.initWasmRouter(),this.ready=!0,console.log("fetchGame took",Date.now()-e,"ms")},async initWasmRouter(){this.wasmBaseTowns=new Set;const e={};for(const[t,r]of Object.entries(this.links))e[t]={link_list:r};for(const[t,r]of Object.entries(this.nodes))if(t in e){const n=0<r.kind&&r.kind<3&&r.CP==0;n&&this.wasmBaseTowns.add(r.key),e[t].waypoint_key=r.key,e[t].need_exploration_point=r.CP,e[t].is_base_town=n}await sB(),this.wasmRouter=new t_(e),this.wasmRouterWithOption=new t_(e),this.wasmRouterWithOption.setOption("max_removal_attempts","350"),this.wasmRouterWithOption.setOption("max_frontier_rings","4"),this.wasmRouterWithOption.setOption("ring_combo_cutoff","2")},isGiant(e){if(this.ready)return this.giantSpecies.has(this.workerStatic[e].species)},tk2tnk(e){if(this.ready){if(e in this._tk2tnk)return this._tk2tnk[e];console.log("unknown tk",e)}},tnk2tk(e){if(this.ready)return this._tnk2tk[e]},dijDiscountedNearestPlantzones(e,t){if(!this.ready)return;const r=mr();let n=new Set;const i={[e]:r.routing.autotakenNodes.has(e)?0:this.nodes[e].CP},o={[e]:null},a=new Gp((u,c)=>i[u]-i[c]);a.push(e);for(var s;a.size()&&(s=a.pop(),!(this.pzdSet.has(s)&&!r.routing.autotakenNodes.has(s)&&(n.add(s),n.size==t)));)this.links[s].forEach(u=>{const c=r.routing.autotakenNodes.has(u)?0:this.nodes[u].CP,f=i[s]+c;u in i?f<i[u]&&(i[u]=f,o[u]=s):(i[u]=f,o[u]=s,a.push(u))});const l=[];return n.forEach(u=>{const c=[u];let f=u;for(;o[f]!==null;)c.push(o[f]),f=o[f];l.push([u,i[u],c.reverse()])}),l},dijkstraPath(e,t,r){if(!this.ready)return[null,0];const n={[e]:null},i={[e]:r&&r.has(e)?0:this.nodes[e].CP},o=new Gp((u,c)=>i[u]-i[c]);o.push(e);for(var a;o.size()&&(a=o.pop(),a!=t);)this.links[a].forEach(u=>{this.nodes[u]==null&&console.log("dijkstraPath: no exploration node",u);const c=r&&r.has(u)?0:this.nodes[u].CP,f=i[a]+c;u in i?f<i[u]&&(i[u]=f,n[u]=a):(i[u]=f,n[u]=a,o.push(u))});const s=[t];let l=t;for(;n[l]!==null;)s.push(n[l]),l=n[l];return[s.reverse(),i[t]]},dijkstraNearestTowns(e,t,r,n,i,o){if(!this.ready)return;let a=new Set;const s={[e]:null},l={[e]:r&&r.has(e)?0:this.nodes[e].CP},u=new Gp((h,d)=>l[h]-l[d]);u.push(e);for(var c;u.size()&&(c=u.pop(),!(this.townsConnectionRoots.has(c)&&(!n||this.townsWithLodgingSet.has(c))&&(c!=1343||!i)&&(a.add(c),a.size==t)));)this.links[c].forEach(h=>{if(this.nodes[h]==null)throw Error(`dijkstraNearestTowns: unknown exploration node ${h}`);if(o&&(c==1727&&h==1800||c==1800&&h==1727))return;const d=r&&r.has(h)?0:this.nodes[h].CP,p=l[c]+d;h in l?p<l[h]&&(l[h]=p,s[h]=c):(l[h]=p,s[h]=c,u.push(h))});const f=[];return a.forEach(h=>{const d=[h];let p=h;for(;s[p]!==null;)d.push(s[p]),p=s[p];f.push([h,l[h],d])}),f},pzSelectionEntry(e,t,r,n,i,o,a,s){const l=ee(),u=this.profitPzTownStats(e,r,a.wspd,a.mspd,a.luck,this.isGiant(o.charkey)),c=l.townInfraAddCost(t,1,this.plantzones[e].itemkeys,s),f={pz:this.plantzones[e],tnk:r,mapCp:n,path:i,townCp:c.cost,infraTooltip:c.tooltip,cp:n+c.cost,profit:u,w:o,statsOnPz:a,storageTnk:this.tk2tnk(c.storageTk)};return f.dailyPerCp=f.profit.priceDaily/(n+c.cost),f.effDelta=l.jobEfficiencyDelta(f.profit.priceDaily,n+c.cost),f},workshopSelectionEntry(e,t,r,n,i,o,a){const s=ee(),l=s.userWorkshops[e],u=this.profitWorkshopWorker(e,l,i),c=s.townInfraAddCost(t,1,[]),f=o+a+c.cost,h={hk:e,tnk:r,mapCp:o,houseCp:a,path:n,townCp:c.cost,infraTooltip:c.tooltip,cp:f,profit:u,w:i,workshop:l};return h.dailyPerCp=h.profit.priceDaily/f,h.effDelta=s.jobEfficiencyDelta(h.profit.priceDaily,f),h},addBedInfo(e){return ee().townInfraAddCost(e,1,[])},farmSelectionEntry(e){const t=ee(),r=this.addBedInfo(e),n=t.farmingProfitPerWorker;return{income:n,infraCp:r.cost,infraTooltip:r.tooltip,dailyPerCp:n/r.cost,effDelta:t.jobEfficiencyDelta(n,r.cost)}},profitPzTownStats(e,t,r,n,i,o){if(!(e in this.plantzones))return{cycleValue:0,cycleMinutes:NaN,cyclesDaily:NaN,priceDaily:0};const a=ee(),s=ii(),l=this.plantzones[e];let u={dist:this.pzDistance(t,e),cycleValue:s.priceLerp(o?l.luckyValue_gi:l.luckyValue,o?l.unluckyValue_gi:l.unluckyValue,i)};return u.cyclesDaily=a.calcCyclesDaily(l.workload,l.regiongroup,r,u.dist,n),u.priceDaily=u.cyclesDaily*u.cycleValue/1e6,u},profitPzTownArtisans(e,t,r){const n=this.plantzones[e];let i=this.medianGoblin(t),o=this.profitPzTownStats(e,t,i.wspd+5,i.mspd,i.luck,!1);if(o.dist>1e6)return{connected:!1};o.charkey=i.charkey,o.wspd=i.wspd;const a={...n,tnk:t,...o,cp:r,dailyPerCp:o.priceDaily/r,isGiant:!1,kind:"goblin"},s=this.medianGiant(t);o=this.profitPzTownStats(e,t,s.wspd+5,s.mspd,s.luck,!0),o.charkey=s.charkey,o.wspd=s.wspd;const l={...n,tnk:t,...o,cp:r,dailyPerCp:o.priceDaily/r,isGiant:!0,kind:"giant"},u=l&&l.dailyPerCp>a.dailyPerCp?l:a,c=this.medianHuman(t);o=this.profitPzTownStats(e,t,c.wspd+5,c.mspd,c.luck,!1),o.charkey=c.charkey,o.wspd=c.wspd;const f={...n,tnk:t,...o,cp:r,dailyPerCp:o.priceDaily/r,isGiant:!0,kind:"human"},h=f&&f.dailyPerCp>u.dailyPerCp?f:u,d={[l.charkey]:l.priceDaily,[f.charkey]:f.priceDaily,[a.charkey]:a.priceDaily},p=Object.entries(d).map(([g,m])=>({charkey:g,priceDaily:m}));return p.sort((g,m)=>g&&m&&m.priceDaily-g.priceDaily),h.alt_workers_profits=d,h.alt_workers=p,h.connected=!0,h.cycleValue_gob=a.cycleValue,h.cycleValue_gi=l.cycleValue,h},makeMedianChar(e){const t={level:40},r=this.workerStatic[e];let n=r.wspd,i=0,o=r.luck;for(let s=2;s<=40;s++)n+=(r.wspd_lo+r.wspd_hi)/2,i+=(r.mspd_lo+r.mspd_hi)/2,o+=(r.luck_lo+r.luck_hi)/2;let a=r.mspd*(1+i/1e6);return t.wspd=Math.round(n/1e6*100)/100,t.mspd=Math.round(a)/100,t.luck=Math.round(o/1e4*100)/100,t.charkey=e,t.isGiant=this.isGiant(e),t},medianGoblin(e){return e==1623?this.makeMedianChar(8003):e==1604?this.makeMedianChar(8003):e==1691?this.makeMedianChar(8023):e==1750?this.makeMedianChar(8035):e==1781?this.makeMedianChar(8050):e==1785?this.makeMedianChar(8050):e==1795?this.makeMedianChar(8050):e==1857?this.makeMedianChar(8050):e==1858?this.makeMedianChar(8050):e==1853?this.makeMedianChar(8050):this.makeMedianChar(7572)},medianGiant(e){return e==1623?this.makeMedianChar(8006):e==1604?this.makeMedianChar(8006):e==1691?this.makeMedianChar(8027):e==1750?this.makeMedianChar(8039):e==1781?this.makeMedianChar(8058):e==1785?this.makeMedianChar(8058):e==1795?this.makeMedianChar(8058):e==1857?this.makeMedianChar(8058):e==1858?this.makeMedianChar(8058):e==1853?this.makeMedianChar(8058):this.makeMedianChar(7571)},medianHuman(e){return e==1623?this.makeMedianChar(8009):e==1604?this.makeMedianChar(8009):e==1691?this.makeMedianChar(8031):e==1750?this.makeMedianChar(8043):e==1781?this.makeMedianChar(8054):e==1785?this.makeMedianChar(8054):e==1795?this.makeMedianChar(8054):e==1857?this.makeMedianChar(8054):e==1858?this.makeMedianChar(8054):e==1853?this.makeMedianChar(8054):this.makeMedianChar(7573)},measureWorkshopWorker(e,t,r){var d;const n=ee(),i=this.workerStatsOnIndustry(r,t.industry),o={statsOnWs:i,distance:999,cyclesDaily:0};if(!this.ready)return o;const a=this.houseDistance(r.tnk,e),s=n.calcWalkMinutes(a,i.mspd);let l=NaN;((d=r==null?void 0:r.job)==null?void 0:d.recipe)&&r.job.recipe in this.craftInfo&&(l=this.craftInfo[r.job.recipe].wl);const u=t.manualWorkload?t.manualWorkload:l,c=Math.ceil(u/i.wspd),f=5*c+s,h=24*60/f;return{statsOnWs:i,distance:a,cyclesDaily:h}},repeatsWorkshopWorker(e,t){let r=1;return this.ready&&e.skills.forEach(n=>{const i=this.skillData[n];i!==void 0&&t in i&&(r+=i[t])}),r},profitWorkshopWorker(e,t,r){const{statsOnWs:n,distance:i,cyclesDaily:o}=this.measureWorkshopWorker(e,t,r),s=this.repeatsWorkshopWorker(r,t.industry)*o*t.manualCycleIncome/1e6;return{statsOnWs:n,distance:i,cyclesDaily:o,priceDaily:s}},isLodgingTown(e){return typeof e=="string"&&(e=Number(e)),this.tnk2tk(e)in this.lodgingPerTown},isPlantzone(e){return e in this.plantzoneDrops},isConnectionNode(e){return!this.isLodgingTown(e)&&!this.isPlantzone(e)},itemName(e){if(!this.ready)return e;const t=ee();return e in this.loc[t.selectedLang].item?this.loc[t.selectedLang].item[e]:e},nodeName(e){if(!this.ready)return e;const t=ee();return this.loc[t.selectedLang].node[e]},parentNodeName(e){if(this.ready&&e in this.plantzoneStatic){const t=this.plantzoneStatic[e].parent;return this.nodeName(t)}else return e},plantzoneName(e){if(this.ready&&e in this.plantzoneStatic){const t=this.plantzoneStatic[e].node.key;return this.parentNodeName(e)+" "+this.nodeName(t)}else return""},pzDistance(e,t){if(t in this.pzk2tk){const r=this.pzk2tk[t],n=this._tnk2tk[e];for(let i=0;i<r.length;i++)if(r[i][0]==n)return r[i][1]}else throw new Error(`no distances for pzk ${t}`);return NaN},houseDistance(e,t){if(!this.ready)return 0;const r=this._tnk2tk[e];return this.tk2hk[r][t]},isWorkable(e){return[4,6,7,8,9,14,15].some(r=>r==this.nodes[e].kind)},jobIsIdle(e){return e===null},jobIsPz(e){return e&&typeof e=="object"&&"kind"in e&&e.kind=="plantzone"||typeof e=="number"},jobIsFarming(e){return e=="farming"},jobIsCustom(e){return(e==null?void 0:e.kind)=="custom"},jobIsWorkshop(e){return e&&typeof e=="object"&&"kind"in e&&e.kind=="workshop"},jobIcon(e){return this.jobIsFarming(e)?"\u{1F33B}":this.jobIsCustom(e)?"\u270D\uFE0F":this.jobIsWorkshop(e)?"\u{1F3ED}":""},lsLookup(e,t,r){if(!this.ready)return null;const n=this.ls_lookup[e];let i={wantLodging:t,wantStorage:r,storage:NaN,cost:NaN,lodging:NaN,success:!1};for(let u in n){const c=Number(u);if(c>=t){const f=n[c],h=KQ(f,d=>d.storage>=r);if(h){if(!i.success){i={wantLodging:t,wantStorage:r,...h,lodging:c,success:!0};continue}if(i.success&&h.cost<i.cost){i={wantLodging:t,wantStorage:r,...h,lodging:c,success:!0};break}}}}const o=t==this.townUpperLimits[e].lodging,a=t>this.townUpperLimits[e].lodging,s=r==this.townUpperLimits[e].storage,l=r>this.townUpperLimits[e].storage;return i={...i,warnL:o,errL:a,warnS:s,errS:l},i},routeOld(e,t){var o,a,s,l,u,c,f,h,d,p,g,m,v,y,b;const r={autotakenNodes:new Set,autotakenNodesCP:0,autotakenWorkerNodes:new Set,autotakenWorkerNodesCP:0,autotakenGrindNodes:new Set,autotakenGrindNodesCP:0,autotakenWagonNodes:new Set,autotakenWagonNodesCP:0,linkColors:{},routeInfos:{}},n=performance.now();for(const w of t){if(w.type=="grind"){const S=this.dijkstraNearestTowns(Number(w.nk),4,r.autotakenNodes,!1,!0).sort((A,L)=>A[1]-L[1]),[k,E,P]=S[0];let C=null;for(const A of P)r.autotakenNodes.has(A)||(r.autotakenNodes.add(A),r.autotakenNodesCP+=this.nodes[A].CP,r.autotakenGrindNodes.add(A),r.autotakenGrindNodesCP+=this.nodes[A].CP),C&&((s=(o=r.linkColors)[a=C<A?`${C}-${A}`:`${A}-${C}`])!=null||(o[a]="grind")),C=A}if(w.type=="worker"){const[T,S]=this.dijkstraPath(w.target,w.source,r.autotakenNodes);if(!T)continue;let k=null;for(const P of T)r.autotakenNodes.has(P)||(r.autotakenNodes.add(P),r.autotakenNodesCP+=this.nodes[P].CP,r.autotakenWorkerNodes.add(P),r.autotakenWorkerNodesCP+=this.nodes[P].CP),k&&((c=(l=r.linkColors)[u=k<P?`${k}-${P}`:`${P}-${k}`])!=null||(l[u]="worker")),k=P;const E={usedPath:T,usedPathCost:S};(d=(f=r.routeInfos)[h=w.source])!=null||(f[h]={}),r.routeInfos[w.source][w.target]=E}if(w.type=="ancado"){const S=this.dijkstraNearestTowns(1343,4,r.autotakenNodes,!1,!0).sort((A,L)=>A[1]-L[1]),[k,E,P]=S[0];let C=null;for(const A of P)r.autotakenNodes.has(A)||(r.autotakenNodes.add(A),r.autotakenNodesCP+=this.nodes[A].CP,r.autotakenWorkerNodes.add(A),r.autotakenWorkerNodesCP+=this.nodes[A].CP),C&&((m=(p=r.linkColors)[g=C<A?`${C}-${A}`:`${A}-${C}`])!=null||(p[g]="worker")),C=A}if(w.type=="wagon"){const[T,S]=this.dijkstraPath(w.target,w.source,r.autotakenNodes);if(!T)continue;let k=null;for(const E of T)r.autotakenNodes.has(E)||(r.autotakenNodes.add(E),r.autotakenNodesCP+=this.nodes[E].CP,r.autotakenWagonNodes.add(E),r.autotakenWagonNodesCP+=this.nodes[E].CP),k&&((b=(v=r.linkColors)[y=k<E?`${k}-${E}`:`${E}-${k}`])!=null||(v[y]="wagon")),k=E}}const i=performance.now()-n;return console.log("routeOld took",i.toFixed(2),"ms"),r},routeWasm(e,t){const r={routeInfos:{},autotakenNodesCP:0},n=[];for(const s of t)n.push([s.target,s.source]);for(const s of e)n.push([s,99999]);if(n.length==0)return r;const i=performance.now(),o=this.wasmRouter.solveForTerminalPairs(n),a=performance.now()-i;console.log("routeWasm took",a.toFixed(2),"ms"),t.forEach(s=>{const[l,u]=this.miniDijkstra(o,s.target,s.source),c={usedPath:l,usedPathCost:u};s.source in r.routeInfos||(r.routeInfos[s.source]={}),r.routeInfos[s.source][s.target]=c});for(const s of o)r.autotakenNodesCP+=this.nodes[s].CP;return r},miniDijkstra(e,t,r){const n=new Set(e),i={[t]:null},o={[t]:this.nodes[t].CP},a=new Gp((c,f)=>o[c]-o[f]);a.push(t);for(var s;a.size()&&(s=a.pop(),!(s==r||r==99999&&this.wasmBaseTowns.has(s)));)this.links[s].forEach(c=>{if(n.has(c)){const f=this.nodes[c].CP,h=o[s]+f;c in o?h<o[c]&&(o[c]=h,i[c]=s):(o[c]=h,i[c]=s,a.push(c))}});const l=[s];let u=s;for(;i[u]!==null;)l.push(i[u]),u=i[u];return[l.reverse(),o[r]]}},getters:{uloc(){const e=ee();return this.ready?this.loc[e.selectedLang]:{town:{},housetype:{},char:{},item:{},node:{},skill:{},skilldesc:{},recipe:{}}},townsWithLodgingSet(){return new Set(this.townsWithLodging)},townsWithRentableStorageSet(){return new Set(this.townsWithRentableStorage)},townsWithRedirectableStorageSet(){return new Set(this.townsWithRedirectableStorage)},nearestTown:e=>t=>{const r=e.pzk2tk[t];return r&&r[0]?{tk:r[0][0],dist:r[0][1]}:{tk:0,dist:NaN}},skillKeys(){return Object.keys(this.skillData).map(Number)},housesPerTown(){const e={};this.townsWithRedirectableStorage.forEach(t=>e[this.tnk2tk(t)]=[]);for(const[t,r]of Object.entries(this.houseInfo)){const n=r.affTown;n in e||(e[n]=[]),e[n].push(Number(t))}return e},townUpperLimits(){const e={};for(const[t,r]of Object.entries(this.housesPerTown)){const n={cp:0,storage:0,lodging:0};for(const i of r)n.cp+=this.houseCost(i),n.storage+=this.houseStorage(i),n.lodging+=this.houseLodging(i);e[t]=n}return e},plantzones(){if(!this.ready)return{};const e=Date.now(),t=ii(),r=ee();let n={};for(const[i,o]of Object.entries(this.plantzoneDrops)){const a={...o,...this.plantzoneStatic[i]};a.name=this.plantzoneName(i);const s=t.priceBunch(a.lucky).val;a.unluckyValue=t.priceBunch(a.unlucky).val,a.luckyValue=a.unluckyValue+s,a.unluckyValue_gi=t.priceBunch(a.unlucky_gi).val,a.luckyValue_gi=a.unluckyValue_gi+s,a.activeWorkload=a.workload*(2-r.productivity(a.regiongroup)),a.itemkeys=new Set([...Object.keys(a.unlucky),...Object.keys(a.lucky)]),n[i]=a}return console.log("plantzones getter took",Date.now()-e,"ms"),n},itemkeyPlantzones(){const e={};if(!this.ready)return e;for(const[t,r]of Object.entries(this.plantzones))r.itemkeys.forEach(n=>{n in e||(e[n]=new Set([])),e[n].add(Number(t))});return e}}}),Kv=od({id:"map",state:()=>({target:[0,0],zoom:-8})});const le=(e,t)=>{const r=e.__vccOpts||e;for(const[n,i]of t)r[n]=i;return r},att={class:"wrapper"},stt=$("Home"),ltt=$("Plantzones"),utt=$("Resources"),ctt=$("Settings"),ftt=$("About"),htt={async beforeCreate(){const e=ee(),t=localStorage.getItem("user");e.migrate(t);const r=Kv(),n=localStorage.getItem("map");r.$patch(JSON.parse(n)),await At().fetchData();const o=ii(),a=localStorage.getItem("market");a&&o.$patch(JSON.parse(a));const s=3600*1e3;o.apiDatetime+s<Date.now()&&o.fetchData()}},dtt=Object.assign(htt,{__name:"App",setup(e){return(t,r)=>(I(),O(W,null,[_("header",null,[_("div",att,[_("nav",null,[ht(Kr(th),{to:"/"},{default:Fe(()=>[stt]),_:1}),ht(Kr(th),{to:"/plantzones"},{default:Fe(()=>[ltt]),_:1}),ht(Kr(th),{to:"/resources"},{default:Fe(()=>[utt]),_:1}),ht(Kr(th),{to:"/settings"},{default:Fe(()=>[ctt]),_:1}),ht(Kr(th),{to:"/about"},{default:Fe(()=>[ftt]),_:1})])])]),ht(Kr(rB))],64))}}),ptt=le(dtt,[["__scopeId","data-v-d7c97319"]]),gtt="modulepreload",vtt=function(e){return"/workerman/"+e},dI={},mtt=function(t,r,n){return!r||r.length===0?t():Promise.all(r.map(i=>{if(i=vtt(i),i in dI)return;dI[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${a}`))return;const s=document.createElement("link");if(s.rel=o?"stylesheet":gtt,o||(s.as="script",s.crossOrigin=""),s.href=i,document.head.appendChild(s),o)return new Promise((l,u)=>{s.addEventListener("load",l),s.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t())};var lB={exports:{}};const ytt=iB(pJ);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function pI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Aa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pI(Object(r),!0).forEach(function(n){_tt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oy(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?oy=function(t){return typeof t}:oy=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oy(e)}function _tt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qi(){return Qi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qi.apply(this,arguments)}function btt(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function wtt(e,t){if(e==null)return{};var r=btt(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,n)||(r[n]=e[n]))}return r}function Stt(e){return Ttt(e)||ktt(e)||Ptt(e)||Ett()}function Ttt(e){if(Array.isArray(e))return Ok(e)}function ktt(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ptt(e,t){if(!!e){if(typeof e=="string")return Ok(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ok(e,t)}}function Ok(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ett(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ctt="1.14.0";function fs(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Cs=fs(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Zv=fs(/Edge/i),gI=fs(/firefox/i),Ag=fs(/safari/i)&&!fs(/chrome/i)&&!fs(/android/i),uB=fs(/iP(ad|od|hone)/i),Att=fs(/chrome/i)&&fs(/android/i),cB={capture:!1,passive:!1};function Te(e,t,r){e.addEventListener(t,r,!Cs&&cB)}function ve(e,t,r){e.removeEventListener(t,r,!Cs&&cB)}function e_(e,t){if(!!t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function xtt(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function So(e,t,r,n){if(e){r=r||document;do{if(t!=null&&(t[0]===">"?e.parentNode===r&&e_(e,t):e_(e,t))||n&&e===r)return e;if(e===r)break}while(e=xtt(e))}return null}var vI=/\s+/g;function vr(e,t,r){if(e&&t)if(e.classList)e.classList[r?"add":"remove"](t);else{var n=(" "+e.className+" ").replace(vI," ").replace(" "+t+" "," ");e.className=(n+(r?" "+t:"")).replace(vI," ")}}function jt(e,t,r){var n=e&&e.style;if(n){if(r===void 0)return document.defaultView&&document.defaultView.getComputedStyle?r=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(r=e.currentStyle),t===void 0?r:r[t];!(t in n)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),n[t]=r+(typeof r=="string"?"":"px")}}function lc(e,t){var r="";if(typeof e=="string")r=e;else do{var n=jt(e,"transform");n&&n!=="none"&&(r=n+" "+r)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(r)}function fB(e,t,r){if(e){var n=e.getElementsByTagName(t),i=0,o=n.length;if(r)for(;i<o;i++)r(n[i],i);return n}return[]}function ka(){var e=document.scrollingElement;return e||document.documentElement}function dr(e,t,r,n,i){if(!(!e.getBoundingClientRect&&e!==window)){var o,a,s,l,u,c,f;if(e!==window&&e.parentNode&&e!==ka()?(o=e.getBoundingClientRect(),a=o.top,s=o.left,l=o.bottom,u=o.right,c=o.height,f=o.width):(a=0,s=0,l=window.innerHeight,u=window.innerWidth,c=window.innerHeight,f=window.innerWidth),(t||r)&&e!==window&&(i=i||e.parentNode,!Cs))do if(i&&i.getBoundingClientRect&&(jt(i,"transform")!=="none"||r&&jt(i,"position")!=="static")){var h=i.getBoundingClientRect();a-=h.top+parseInt(jt(i,"border-top-width")),s-=h.left+parseInt(jt(i,"border-left-width")),l=a+o.height,u=s+o.width;break}while(i=i.parentNode);if(n&&e!==window){var d=lc(i||e),p=d&&d.a,g=d&&d.d;d&&(a/=g,s/=p,f/=p,c/=g,l=a+c,u=s+f)}return{top:a,left:s,bottom:l,right:u,width:f,height:c}}}function mI(e,t,r){for(var n=bl(e,!0),i=dr(e)[t];n;){var o=dr(n)[r],a=void 0;if(r==="top"||r==="left"?a=i>=o:a=i<=o,!a)return n;if(n===ka())break;n=bl(n,!1)}return!1}function Wh(e,t,r,n){for(var i=0,o=0,a=e.children;o<a.length;){if(a[o].style.display!=="none"&&a[o]!==te.ghost&&(n||a[o]!==te.dragged)&&So(a[o],r.draggable,e,!1)){if(i===t)return a[o];i++}o++}return null}function XC(e,t){for(var r=e.lastElementChild;r&&(r===te.ghost||jt(r,"display")==="none"||t&&!e_(r,t));)r=r.previousElementSibling;return r||null}function Pr(e,t){var r=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==te.clone&&(!t||e_(e,t))&&r++;return r}function yI(e){var t=0,r=0,n=ka();if(e)do{var i=lc(e),o=i.a,a=i.d;t+=e.scrollLeft*o,r+=e.scrollTop*a}while(e!==n&&(e=e.parentNode));return[t,r]}function Mtt(e,t){for(var r in e)if(!!e.hasOwnProperty(r)){for(var n in t)if(t.hasOwnProperty(n)&&t[n]===e[r][n])return Number(r)}return-1}function bl(e,t){if(!e||!e.getBoundingClientRect)return ka();var r=e,n=!1;do if(r.clientWidth<r.scrollWidth||r.clientHeight<r.scrollHeight){var i=jt(r);if(r.clientWidth<r.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||r.clientHeight<r.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!r.getBoundingClientRect||r===document.body)return ka();if(n||t)return r;n=!0}}while(r=r.parentNode);return ka()}function Itt(e,t){if(e&&t)for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function mw(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var xg;function hB(e,t){return function(){if(!xg){var r=arguments,n=this;r.length===1?e.call(n,r[0]):e.apply(n,r),xg=setTimeout(function(){xg=void 0},t)}}}function Ltt(){clearTimeout(xg),xg=void 0}function dB(e,t,r){e.scrollLeft+=t,e.scrollTop+=r}function YC(e){var t=window.Polymer,r=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):r?r(e).clone(!0)[0]:e.cloneNode(!0)}function _I(e,t){jt(e,"position","absolute"),jt(e,"top",t.top),jt(e,"left",t.left),jt(e,"width",t.width),jt(e,"height",t.height)}function yw(e){jt(e,"position",""),jt(e,"top",""),jt(e,"left",""),jt(e,"width",""),jt(e,"height","")}var Pn="Sortable"+new Date().getTime();function Ott(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(i){if(!(jt(i,"display")==="none"||i===te.ghost)){e.push({target:i,rect:dr(i)});var o=Aa({},e[e.length-1].rect);if(i.thisAnimationDuration){var a=lc(i,!0);a&&(o.top-=a.f,o.left-=a.e)}i.fromRect=o}})}},addAnimationState:function(n){e.push(n)},removeAnimationState:function(n){e.splice(Mtt(e,{target:n}),1)},animateAll:function(n){var i=this;if(!this.options.animation){clearTimeout(t),typeof n=="function"&&n();return}var o=!1,a=0;e.forEach(function(s){var l=0,u=s.target,c=u.fromRect,f=dr(u),h=u.prevFromRect,d=u.prevToRect,p=s.rect,g=lc(u,!0);g&&(f.top-=g.f,f.left-=g.e),u.toRect=f,u.thisAnimationDuration&&mw(h,f)&&!mw(c,f)&&(p.top-f.top)/(p.left-f.left)===(c.top-f.top)/(c.left-f.left)&&(l=Dtt(p,h,d,i.options)),mw(f,c)||(u.prevFromRect=c,u.prevToRect=f,l||(l=i.options.animation),i.animate(u,p,f,l)),l&&(o=!0,a=Math.max(a,l),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},l),u.thisAnimationDuration=l)}),clearTimeout(t),o?t=setTimeout(function(){typeof n=="function"&&n()},a):typeof n=="function"&&n(),e=[]},animate:function(n,i,o,a){if(a){jt(n,"transition",""),jt(n,"transform","");var s=lc(this.el),l=s&&s.a,u=s&&s.d,c=(i.left-o.left)/(l||1),f=(i.top-o.top)/(u||1);n.animatingX=!!c,n.animatingY=!!f,jt(n,"transform","translate3d("+c+"px,"+f+"px,0)"),this.forRepaintDummy=Rtt(n),jt(n,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),jt(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){jt(n,"transition",""),jt(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},a)}}}}function Rtt(e){return e.offsetWidth}function Dtt(e,t,r,n){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-r.top,2)+Math.pow(t.left-r.left,2))*n.animation}var vf=[],_w={initializeByDefault:!0},qv={mount:function(t){for(var r in _w)_w.hasOwnProperty(r)&&!(r in t)&&(t[r]=_w[r]);vf.forEach(function(n){if(n.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),vf.push(t)},pluginEvent:function(t,r,n){var i=this;this.eventCanceled=!1,n.cancel=function(){i.eventCanceled=!0};var o=t+"Global";vf.forEach(function(a){!r[a.pluginName]||(r[a.pluginName][o]&&r[a.pluginName][o](Aa({sortable:r},n)),r.options[a.pluginName]&&r[a.pluginName][t]&&r[a.pluginName][t](Aa({sortable:r},n)))})},initializePlugins:function(t,r,n,i){vf.forEach(function(s){var l=s.pluginName;if(!(!t.options[l]&&!s.initializeByDefault)){var u=new s(t,r,t.options);u.sortable=t,u.options=t.options,t[l]=u,Qi(n,u.defaults)}});for(var o in t.options)if(!!t.options.hasOwnProperty(o)){var a=this.modifyOption(t,o,t.options[o]);typeof a<"u"&&(t.options[o]=a)}},getEventProperties:function(t,r){var n={};return vf.forEach(function(i){typeof i.eventProperties=="function"&&Qi(n,i.eventProperties.call(r[i.pluginName],t))}),n},modifyOption:function(t,r,n){var i;return vf.forEach(function(o){!t[o.pluginName]||o.optionListeners&&typeof o.optionListeners[r]=="function"&&(i=o.optionListeners[r].call(t[o.pluginName],n))}),i}};function Xp(e){var t=e.sortable,r=e.rootEl,n=e.name,i=e.targetEl,o=e.cloneEl,a=e.toEl,s=e.fromEl,l=e.oldIndex,u=e.newIndex,c=e.oldDraggableIndex,f=e.newDraggableIndex,h=e.originalEvent,d=e.putSortable,p=e.extraEventProperties;if(t=t||r&&r[Pn],!!t){var g,m=t.options,v="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!Cs&&!Zv?g=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent(n,!0,!0)),g.to=a||r,g.from=s||r,g.item=i||r,g.clone=o,g.oldIndex=l,g.newIndex=u,g.oldDraggableIndex=c,g.newDraggableIndex=f,g.originalEvent=h,g.pullMode=d?d.lastPutMode:void 0;var y=Aa(Aa({},p),qv.getEventProperties(n,t));for(var b in y)g[b]=y[b];r&&r.dispatchEvent(g),m[v]&&m[v].call(t,g)}}var Ntt=["evt"],Hn=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n.evt,o=wtt(n,Ntt);qv.pluginEvent.bind(te)(t,r,Aa({dragEl:Et,parentEl:Tr,ghostEl:fe,rootEl:hr,nextEl:ju,lastDownEl:ay,cloneEl:kr,cloneHidden:ml,dragStarted:Yp,putSortable:an,activeSortable:te.active,originalEvent:i,oldIndex:ah,oldDraggableIndex:Mg,newIndex:fi,newDraggableIndex:vl,hideGhostForTarget:mB,unhideGhostForTarget:yB,cloneNowHidden:function(){ml=!0},cloneNowShown:function(){ml=!1},dispatchSortableEvent:function(s){Dn({sortable:r,name:s,originalEvent:i})}},o))};function Dn(e){Xp(Aa({putSortable:an,cloneEl:kr,targetEl:Et,rootEl:hr,oldIndex:ah,oldDraggableIndex:Mg,newIndex:fi,newDraggableIndex:vl},e))}var Et,Tr,fe,hr,ju,ay,kr,ml,ah,fi,Mg,vl,W0,an,eh=!1,r_=!1,n_=[],fu,uo,bw,ww,bI,wI,Yp,mf,Ig,Lg=!1,j0=!1,sy,vn,Sw=[],Rk=!1,i_=[],xb=typeof document<"u",G0=uB,SI=Zv||Cs?"cssFloat":"float",Ftt=xb&&!Att&&!uB&&"draggable"in document.createElement("div"),pB=function(){if(!!xb){if(Cs)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),gB=function(t,r){var n=jt(t),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=Wh(t,0,r),a=Wh(t,1,r),s=o&&jt(o),l=a&&jt(a),u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+dr(o).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+dr(a).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&s.float&&s.float!=="none"){var f=s.float==="left"?"left":"right";return a&&(l.clear==="both"||l.clear===f)?"vertical":"horizontal"}return o&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||u>=i&&n[SI]==="none"||a&&n[SI]==="none"&&u+c>i)?"vertical":"horizontal"},$tt=function(t,r,n){var i=n?t.left:t.top,o=n?t.right:t.bottom,a=n?t.width:t.height,s=n?r.left:r.top,l=n?r.right:r.bottom,u=n?r.width:r.height;return i===s||o===l||i+a/2===s+u/2},Btt=function(t,r){var n;return n_.some(function(i){var o=i[Pn].options.emptyInsertThreshold;if(!(!o||XC(i))){var a=dr(i),s=t>=a.left-o&&t<=a.right+o,l=r>=a.top-o&&r<=a.bottom+o;if(s&&l)return n=i}}),n},vB=function(t){function r(o,a){return function(s,l,u,c){var f=s.options.group.name&&l.options.group.name&&s.options.group.name===l.options.group.name;if(o==null&&(a||f))return!0;if(o==null||o===!1)return!1;if(a&&o==="clone")return o;if(typeof o=="function")return r(o(s,l,u,c),a)(s,l,u,c);var h=(a?s:l).options.group.name;return o===!0||typeof o=="string"&&o===h||o.join&&o.indexOf(h)>-1}}var n={},i=t.group;(!i||oy(i)!="object")&&(i={name:i}),n.name=i.name,n.checkPull=r(i.pull,!0),n.checkPut=r(i.put),n.revertClone=i.revertClone,t.group=n},mB=function(){!pB&&fe&&jt(fe,"display","none")},yB=function(){!pB&&fe&&jt(fe,"display","")};xb&&document.addEventListener("click",function(e){if(r_)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),r_=!1,!1},!0);var hu=function(t){if(Et){t=t.touches?t.touches[0]:t;var r=Btt(t.clientX,t.clientY);if(r){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.target=n.rootEl=r,n.preventDefault=void 0,n.stopPropagation=void 0,r[Pn]._onDragOver(n)}}},ztt=function(t){Et&&Et.parentNode[Pn]._isOutsideThisEl(t.target)};function te(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=Qi({},t),e[Pn]=this;var r={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return gB(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,s){a.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:te.supportPointer!==!1&&"PointerEvent"in window&&!Ag,emptyInsertThreshold:5};qv.initializePlugins(this,e,r);for(var n in r)!(n in t)&&(t[n]=r[n]);vB(t);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=t.forceFallback?!1:Ftt,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?Te(e,"pointerdown",this._onTapStart):(Te(e,"mousedown",this._onTapStart),Te(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Te(e,"dragover",this),Te(e,"dragenter",this)),n_.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Qi(this,Ott())}te.prototype={constructor:te,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(mf=null)},_getDirection:function(t,r){return typeof this.options.direction=="function"?this.options.direction.call(this,t,r,Et):this.options.direction},_onTapStart:function(t){if(!!t.cancelable){var r=this,n=this.el,i=this.options,o=i.preventOnFilter,a=t.type,s=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,l=(s||t).target,u=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,c=i.filter;if(Ytt(n),!Et&&!(/mousedown|pointerdown/.test(a)&&t.button!==0||i.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&Ag&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=So(l,i.draggable,n,!1),!(l&&l.animated)&&ay!==l)){if(ah=Pr(l),Mg=Pr(l,i.draggable),typeof c=="function"){if(c.call(this,t,l,this)){Dn({sortable:r,rootEl:u,name:"filter",targetEl:l,toEl:n,fromEl:n}),Hn("filter",r,{evt:t}),o&&t.cancelable&&t.preventDefault();return}}else if(c&&(c=c.split(",").some(function(f){if(f=So(u,f.trim(),n,!1),f)return Dn({sortable:r,rootEl:f,name:"filter",targetEl:l,fromEl:n,toEl:n}),Hn("filter",r,{evt:t}),!0}),c)){o&&t.cancelable&&t.preventDefault();return}i.handle&&!So(u,i.handle,n,!1)||this._prepareDragStart(t,s,l)}}},_prepareDragStart:function(t,r,n){var i=this,o=i.el,a=i.options,s=o.ownerDocument,l;if(n&&!Et&&n.parentNode===o){var u=dr(n);if(hr=o,Et=n,Tr=Et.parentNode,ju=Et.nextSibling,ay=n,W0=a.group,te.dragged=Et,fu={target:Et,clientX:(r||t).clientX,clientY:(r||t).clientY},bI=fu.clientX-u.left,wI=fu.clientY-u.top,this._lastX=(r||t).clientX,this._lastY=(r||t).clientY,Et.style["will-change"]="all",l=function(){if(Hn("delayEnded",i,{evt:t}),te.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!gI&&i.nativeDraggable&&(Et.draggable=!0),i._triggerDragStart(t,r),Dn({sortable:i,name:"choose",originalEvent:t}),vr(Et,a.chosenClass,!0)},a.ignore.split(",").forEach(function(c){fB(Et,c.trim(),Tw)}),Te(s,"dragover",hu),Te(s,"mousemove",hu),Te(s,"touchmove",hu),Te(s,"mouseup",i._onDrop),Te(s,"touchend",i._onDrop),Te(s,"touchcancel",i._onDrop),gI&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Et.draggable=!0),Hn("delayStart",this,{evt:t}),a.delay&&(!a.delayOnTouchOnly||r)&&(!this.nativeDraggable||!(Zv||Cs))){if(te.eventCanceled){this._onDrop();return}Te(s,"mouseup",i._disableDelayedDrag),Te(s,"touchend",i._disableDelayedDrag),Te(s,"touchcancel",i._disableDelayedDrag),Te(s,"mousemove",i._delayedDragTouchMoveHandler),Te(s,"touchmove",i._delayedDragTouchMoveHandler),a.supportPointer&&Te(s,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,a.delay)}else l()}},_delayedDragTouchMoveHandler:function(t){var r=t.touches?t.touches[0]:t;Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Et&&Tw(Et),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;ve(t,"mouseup",this._disableDelayedDrag),ve(t,"touchend",this._disableDelayedDrag),ve(t,"touchcancel",this._disableDelayedDrag),ve(t,"mousemove",this._delayedDragTouchMoveHandler),ve(t,"touchmove",this._delayedDragTouchMoveHandler),ve(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,r){r=r||t.pointerType=="touch"&&t,!this.nativeDraggable||r?this.options.supportPointer?Te(document,"pointermove",this._onTouchMove):r?Te(document,"touchmove",this._onTouchMove):Te(document,"mousemove",this._onTouchMove):(Te(Et,"dragend",this),Te(hr,"dragstart",this._onDragStart));try{document.selection?ly(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,r){if(eh=!1,hr&&Et){Hn("dragStarted",this,{evt:r}),this.nativeDraggable&&Te(document,"dragover",ztt);var n=this.options;!t&&vr(Et,n.dragClass,!1),vr(Et,n.ghostClass,!0),te.active=this,t&&this._appendGhost(),Dn({sortable:this,name:"start",originalEvent:r})}else this._nulling()},_emulateDragOver:function(){if(uo){this._lastX=uo.clientX,this._lastY=uo.clientY,mB();for(var t=document.elementFromPoint(uo.clientX,uo.clientY),r=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(uo.clientX,uo.clientY),t!==r);)r=t;if(Et.parentNode[Pn]._isOutsideThisEl(t),r)do{if(r[Pn]){var n=void 0;if(n=r[Pn]._onDragOver({clientX:uo.clientX,clientY:uo.clientY,target:t,rootEl:r}),n&&!this.options.dragoverBubble)break}t=r}while(r=r.parentNode);yB()}},_onTouchMove:function(t){if(fu){var r=this.options,n=r.fallbackTolerance,i=r.fallbackOffset,o=t.touches?t.touches[0]:t,a=fe&&lc(fe,!0),s=fe&&a&&a.a,l=fe&&a&&a.d,u=G0&&vn&&yI(vn),c=(o.clientX-fu.clientX+i.x)/(s||1)+(u?u[0]-Sw[0]:0)/(s||1),f=(o.clientY-fu.clientY+i.y)/(l||1)+(u?u[1]-Sw[1]:0)/(l||1);if(!te.active&&!eh){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(fe){a?(a.e+=c-(bw||0),a.f+=f-(ww||0)):a={a:1,b:0,c:0,d:1,e:c,f};var h="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");jt(fe,"webkitTransform",h),jt(fe,"mozTransform",h),jt(fe,"msTransform",h),jt(fe,"transform",h),bw=c,ww=f,uo=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!fe){var t=this.options.fallbackOnBody?document.body:hr,r=dr(Et,!0,G0,!0,t),n=this.options;if(G0){for(vn=t;jt(vn,"position")==="static"&&jt(vn,"transform")==="none"&&vn!==document;)vn=vn.parentNode;vn!==document.body&&vn!==document.documentElement?(vn===document&&(vn=ka()),r.top+=vn.scrollTop,r.left+=vn.scrollLeft):vn=ka(),Sw=yI(vn)}fe=Et.cloneNode(!0),vr(fe,n.ghostClass,!1),vr(fe,n.fallbackClass,!0),vr(fe,n.dragClass,!0),jt(fe,"transition",""),jt(fe,"transform",""),jt(fe,"box-sizing","border-box"),jt(fe,"margin",0),jt(fe,"top",r.top),jt(fe,"left",r.left),jt(fe,"width",r.width),jt(fe,"height",r.height),jt(fe,"opacity","0.8"),jt(fe,"position",G0?"absolute":"fixed"),jt(fe,"zIndex","100000"),jt(fe,"pointerEvents","none"),te.ghost=fe,t.appendChild(fe),jt(fe,"transform-origin",bI/parseInt(fe.style.width)*100+"% "+wI/parseInt(fe.style.height)*100+"%")}},_onDragStart:function(t,r){var n=this,i=t.dataTransfer,o=n.options;if(Hn("dragStart",this,{evt:t}),te.eventCanceled){this._onDrop();return}Hn("setupClone",this),te.eventCanceled||(kr=YC(Et),kr.draggable=!1,kr.style["will-change"]="",this._hideClone(),vr(kr,this.options.chosenClass,!1),te.clone=kr),n.cloneId=ly(function(){Hn("clone",n),!te.eventCanceled&&(n.options.removeCloneOnHide||hr.insertBefore(kr,Et),n._hideClone(),Dn({sortable:n,name:"clone"}))}),!r&&vr(Et,o.dragClass,!0),r?(r_=!0,n._loopId=setInterval(n._emulateDragOver,50)):(ve(document,"mouseup",n._onDrop),ve(document,"touchend",n._onDrop),ve(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",o.setData&&o.setData.call(n,i,Et)),Te(document,"drop",n),jt(Et,"transform","translateZ(0)")),eh=!0,n._dragStartId=ly(n._dragStarted.bind(n,r,t)),Te(document,"selectstart",n),Yp=!0,Ag&&jt(document.body,"user-select","none")},_onDragOver:function(t){var r=this.el,n=t.target,i,o,a,s=this.options,l=s.group,u=te.active,c=W0===l,f=s.sort,h=an||u,d,p=this,g=!1;if(Rk)return;function m(K,et){Hn(K,p,Aa({evt:t,isOwner:c,axis:d?"vertical":"horizontal",revert:a,dragRect:i,targetRect:o,canSort:f,fromSortable:h,target:n,completed:y,onMove:function(Ct,vt){return H0(hr,r,Et,i,Ct,dr(Ct),t,vt)},changed:b},et))}function v(){m("dragOverAnimationCapture"),p.captureAnimationState(),p!==h&&h.captureAnimationState()}function y(K){return m("dragOverCompleted",{insertion:K}),K&&(c?u._hideClone():u._showClone(p),p!==h&&(vr(Et,an?an.options.ghostClass:u.options.ghostClass,!1),vr(Et,s.ghostClass,!0)),an!==p&&p!==te.active?an=p:p===te.active&&an&&(an=null),h===p&&(p._ignoreWhileAnimating=n),p.animateAll(function(){m("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(n===Et&&!Et.animated||n===r&&!n.animated)&&(mf=null),!s.dragoverBubble&&!t.rootEl&&n!==document&&(Et.parentNode[Pn]._isOutsideThisEl(t.target),!K&&hu(t)),!s.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),g=!0}function b(){fi=Pr(Et),vl=Pr(Et,s.draggable),Dn({sortable:p,name:"change",toEl:r,newIndex:fi,newDraggableIndex:vl,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),n=So(n,s.draggable,r,!0),m("dragOver"),te.eventCanceled)return g;if(Et.contains(t.target)||n.animated&&n.animatingX&&n.animatingY||p._ignoreWhileAnimating===n)return y(!1);if(r_=!1,u&&!s.disabled&&(c?f||(a=Tr!==hr):an===this||(this.lastPutMode=W0.checkPull(this,u,Et,t))&&l.checkPut(this,u,Et,t))){if(d=this._getDirection(t,n)==="vertical",i=dr(Et),m("dragOverValid"),te.eventCanceled)return g;if(a)return Tr=hr,v(),this._hideClone(),m("revert"),te.eventCanceled||(ju?hr.insertBefore(Et,ju):hr.appendChild(Et)),y(!0);var w=XC(r,s.draggable);if(!w||jtt(t,d,this)&&!w.animated){if(w===Et)return y(!1);if(w&&r===t.target&&(n=w),n&&(o=dr(n)),H0(hr,r,Et,i,n,o,t,!!n)!==!1)return v(),r.appendChild(Et),Tr=r,b(),y(!0)}else if(w&&Wtt(t,d,this)){var T=Wh(r,0,s,!0);if(T===Et)return y(!1);if(n=T,o=dr(n),H0(hr,r,Et,i,n,o,t,!1)!==!1)return v(),r.insertBefore(Et,T),Tr=r,b(),y(!0)}else if(n.parentNode===r){o=dr(n);var S=0,k,E=Et.parentNode!==r,P=!$tt(Et.animated&&Et.toRect||i,n.animated&&n.toRect||o,d),C=d?"top":"left",A=mI(n,"top","top")||mI(Et,"top","top"),L=A?A.scrollTop:void 0;mf!==n&&(k=o[C],Lg=!1,j0=!P&&s.invertSwap||E),S=Gtt(t,n,o,d,P?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,j0,mf===n);var R;if(S!==0){var D=Pr(Et);do D-=S,R=Tr.children[D];while(R&&(jt(R,"display")==="none"||R===fe))}if(S===0||R===n)return y(!1);mf=n,Ig=S;var F=n.nextElementSibling,z=!1;z=S===1;var Y=H0(hr,r,Et,i,n,o,t,z);if(Y!==!1)return(Y===1||Y===-1)&&(z=Y===1),Rk=!0,setTimeout(Utt,30),v(),z&&!F?r.appendChild(Et):n.parentNode.insertBefore(Et,z?F:n),A&&dB(A,0,L-A.scrollTop),Tr=Et.parentNode,k!==void 0&&!j0&&(sy=Math.abs(k-dr(n)[C])),b(),y(!0)}if(r.contains(Et))return y(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){ve(document,"mousemove",this._onTouchMove),ve(document,"touchmove",this._onTouchMove),ve(document,"pointermove",this._onTouchMove),ve(document,"dragover",hu),ve(document,"mousemove",hu),ve(document,"touchmove",hu)},_offUpEvents:function(){var t=this.el.ownerDocument;ve(t,"mouseup",this._onDrop),ve(t,"touchend",this._onDrop),ve(t,"pointerup",this._onDrop),ve(t,"touchcancel",this._onDrop),ve(document,"selectstart",this)},_onDrop:function(t){var r=this.el,n=this.options;if(fi=Pr(Et),vl=Pr(Et,n.draggable),Hn("drop",this,{evt:t}),Tr=Et&&Et.parentNode,fi=Pr(Et),vl=Pr(Et,n.draggable),te.eventCanceled){this._nulling();return}eh=!1,j0=!1,Lg=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Dk(this.cloneId),Dk(this._dragStartId),this.nativeDraggable&&(ve(document,"drop",this),ve(r,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ag&&jt(document.body,"user-select",""),jt(Et,"transform",""),t&&(Yp&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),fe&&fe.parentNode&&fe.parentNode.removeChild(fe),(hr===Tr||an&&an.lastPutMode!=="clone")&&kr&&kr.parentNode&&kr.parentNode.removeChild(kr),Et&&(this.nativeDraggable&&ve(Et,"dragend",this),Tw(Et),Et.style["will-change"]="",Yp&&!eh&&vr(Et,an?an.options.ghostClass:this.options.ghostClass,!1),vr(Et,this.options.chosenClass,!1),Dn({sortable:this,name:"unchoose",toEl:Tr,newIndex:null,newDraggableIndex:null,originalEvent:t}),hr!==Tr?(fi>=0&&(Dn({rootEl:Tr,name:"add",toEl:Tr,fromEl:hr,originalEvent:t}),Dn({sortable:this,name:"remove",toEl:Tr,originalEvent:t}),Dn({rootEl:Tr,name:"sort",toEl:Tr,fromEl:hr,originalEvent:t}),Dn({sortable:this,name:"sort",toEl:Tr,originalEvent:t})),an&&an.save()):fi!==ah&&fi>=0&&(Dn({sortable:this,name:"update",toEl:Tr,originalEvent:t}),Dn({sortable:this,name:"sort",toEl:Tr,originalEvent:t})),te.active&&((fi==null||fi===-1)&&(fi=ah,vl=Mg),Dn({sortable:this,name:"end",toEl:Tr,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){Hn("nulling",this),hr=Et=Tr=fe=ju=kr=ay=ml=fu=uo=Yp=fi=vl=ah=Mg=mf=Ig=an=W0=te.dragged=te.ghost=te.clone=te.active=null,i_.forEach(function(t){t.checked=!0}),i_.length=bw=ww=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":Et&&(this._onDragOver(t),Vtt(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],r,n=this.el.children,i=0,o=n.length,a=this.options;i<o;i++)r=n[i],So(r,a.draggable,this.el,!1)&&t.push(r.getAttribute(a.dataIdAttr)||Xtt(r));return t},sort:function(t,r){var n={},i=this.el;this.toArray().forEach(function(o,a){var s=i.children[a];So(s,this.options.draggable,i,!1)&&(n[o]=s)},this),r&&this.captureAnimationState(),t.forEach(function(o){n[o]&&(i.removeChild(n[o]),i.appendChild(n[o]))}),r&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,r){return So(t,r||this.options.draggable,this.el,!1)},option:function(t,r){var n=this.options;if(r===void 0)return n[t];var i=qv.modifyOption(this,t,r);typeof i<"u"?n[t]=i:n[t]=r,t==="group"&&vB(n)},destroy:function(){Hn("destroy",this);var t=this.el;t[Pn]=null,ve(t,"mousedown",this._onTapStart),ve(t,"touchstart",this._onTapStart),ve(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(ve(t,"dragover",this),ve(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(r){r.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),n_.splice(n_.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!ml){if(Hn("hideClone",this),te.eventCanceled)return;jt(kr,"display","none"),this.options.removeCloneOnHide&&kr.parentNode&&kr.parentNode.removeChild(kr),ml=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(ml){if(Hn("showClone",this),te.eventCanceled)return;Et.parentNode==hr&&!this.options.group.revertClone?hr.insertBefore(kr,Et):ju?hr.insertBefore(kr,ju):hr.appendChild(kr),this.options.group.revertClone&&this.animate(Et,kr),jt(kr,"display",""),ml=!1}}};function Vtt(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function H0(e,t,r,n,i,o,a,s){var l,u=e[Pn],c=u.options.onMove,f;return window.CustomEvent&&!Cs&&!Zv?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=t,l.from=e,l.dragged=r,l.draggedRect=n,l.related=i||t,l.relatedRect=o||dr(t),l.willInsertAfter=s,l.originalEvent=a,e.dispatchEvent(l),c&&(f=c.call(u,l,a)),f}function Tw(e){e.draggable=!1}function Utt(){Rk=!1}function Wtt(e,t,r){var n=dr(Wh(r.el,0,r.options,!0)),i=10;return t?e.clientX<n.left-i||e.clientY<n.top&&e.clientX<n.right:e.clientY<n.top-i||e.clientY<n.bottom&&e.clientX<n.left}function jtt(e,t,r){var n=dr(XC(r.el,r.options.draggable)),i=10;return t?e.clientX>n.right+i||e.clientX<=n.right&&e.clientY>n.bottom&&e.clientX>=n.left:e.clientX>n.right&&e.clientY>n.top||e.clientX<=n.right&&e.clientY>n.bottom+i}function Gtt(e,t,r,n,i,o,a,s){var l=n?e.clientY:e.clientX,u=n?r.height:r.width,c=n?r.top:r.left,f=n?r.bottom:r.right,h=!1;if(!a){if(s&&sy<u*i){if(!Lg&&(Ig===1?l>c+u*o/2:l<f-u*o/2)&&(Lg=!0),Lg)h=!0;else if(Ig===1?l<c+sy:l>f-sy)return-Ig}else if(l>c+u*(1-i)/2&&l<f-u*(1-i)/2)return Htt(t)}return h=h||a,h&&(l<c+u*o/2||l>f-u*o/2)?l>c+u/2?1:-1:0}function Htt(e){return Pr(Et)<Pr(e)?1:-1}function Xtt(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,r=t.length,n=0;r--;)n+=t.charCodeAt(r);return n.toString(36)}function Ytt(e){i_.length=0;for(var t=e.getElementsByTagName("input"),r=t.length;r--;){var n=t[r];n.checked&&i_.push(n)}}function ly(e){return setTimeout(e,0)}function Dk(e){return clearTimeout(e)}xb&&Te(document,"touchmove",function(e){(te.active||eh)&&e.cancelable&&e.preventDefault()});te.utils={on:Te,off:ve,css:jt,find:fB,is:function(t,r){return!!So(t,r,t,!1)},extend:Itt,throttle:hB,closest:So,toggleClass:vr,clone:YC,index:Pr,nextTick:ly,cancelNextTick:Dk,detectDirection:gB,getChild:Wh};te.get=function(e){return e[Pn]};te.mount=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t[0].constructor===Array&&(t=t[0]),t.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(te.utils=Aa(Aa({},te.utils),n.utils)),qv.mount(n)})};te.create=function(e,t){return new te(e,t)};te.version=Ctt;var Fr=[],Kp,Nk,Fk=!1,kw,Pw,o_,Zp;function Ktt(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(r){var n=r.originalEvent;this.sortable.nativeDraggable?Te(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Te(document,"pointermove",this._handleFallbackAutoScroll):n.touches?Te(document,"touchmove",this._handleFallbackAutoScroll):Te(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(r){var n=r.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?ve(document,"dragover",this._handleAutoScroll):(ve(document,"pointermove",this._handleFallbackAutoScroll),ve(document,"touchmove",this._handleFallbackAutoScroll),ve(document,"mousemove",this._handleFallbackAutoScroll)),TI(),uy(),Ltt()},nulling:function(){o_=Nk=Kp=Fk=Zp=kw=Pw=null,Fr.length=0},_handleFallbackAutoScroll:function(r){this._handleAutoScroll(r,!0)},_handleAutoScroll:function(r,n){var i=this,o=(r.touches?r.touches[0]:r).clientX,a=(r.touches?r.touches[0]:r).clientY,s=document.elementFromPoint(o,a);if(o_=r,n||this.options.forceAutoScrollFallback||Zv||Cs||Ag){Ew(r,this.options,s,n);var l=bl(s,!0);Fk&&(!Zp||o!==kw||a!==Pw)&&(Zp&&TI(),Zp=setInterval(function(){var u=bl(document.elementFromPoint(o,a),!0);u!==l&&(l=u,uy()),Ew(r,i.options,u,n)},10),kw=o,Pw=a)}else{if(!this.options.bubbleScroll||bl(s,!0)===ka()){uy();return}Ew(r,this.options,bl(s,!1),!1)}}},Qi(e,{pluginName:"scroll",initializeByDefault:!0})}function uy(){Fr.forEach(function(e){clearInterval(e.pid)}),Fr=[]}function TI(){clearInterval(Zp)}var Ew=hB(function(e,t,r,n){if(!!t.scroll){var i=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,a=t.scrollSensitivity,s=t.scrollSpeed,l=ka(),u=!1,c;Nk!==r&&(Nk=r,uy(),Kp=t.scroll,c=t.scrollFn,Kp===!0&&(Kp=bl(r,!0)));var f=0,h=Kp;do{var d=h,p=dr(d),g=p.top,m=p.bottom,v=p.left,y=p.right,b=p.width,w=p.height,T=void 0,S=void 0,k=d.scrollWidth,E=d.scrollHeight,P=jt(d),C=d.scrollLeft,A=d.scrollTop;d===l?(T=b<k&&(P.overflowX==="auto"||P.overflowX==="scroll"||P.overflowX==="visible"),S=w<E&&(P.overflowY==="auto"||P.overflowY==="scroll"||P.overflowY==="visible")):(T=b<k&&(P.overflowX==="auto"||P.overflowX==="scroll"),S=w<E&&(P.overflowY==="auto"||P.overflowY==="scroll"));var L=T&&(Math.abs(y-i)<=a&&C+b<k)-(Math.abs(v-i)<=a&&!!C),R=S&&(Math.abs(m-o)<=a&&A+w<E)-(Math.abs(g-o)<=a&&!!A);if(!Fr[f])for(var D=0;D<=f;D++)Fr[D]||(Fr[D]={});(Fr[f].vx!=L||Fr[f].vy!=R||Fr[f].el!==d)&&(Fr[f].el=d,Fr[f].vx=L,Fr[f].vy=R,clearInterval(Fr[f].pid),(L!=0||R!=0)&&(u=!0,Fr[f].pid=setInterval(function(){n&&this.layer===0&&te.active._onTouchMove(o_);var F=Fr[this.layer].vy?Fr[this.layer].vy*s:0,z=Fr[this.layer].vx?Fr[this.layer].vx*s:0;typeof c=="function"&&c.call(te.dragged.parentNode[Pn],z,F,e,o_,Fr[this.layer].el)!=="continue"||dB(Fr[this.layer].el,z,F)}.bind({layer:f}),24))),f++}while(t.bubbleScroll&&h!==l&&(h=bl(h,!1)));Fk=u}},30),_B=function(t){var r=t.originalEvent,n=t.putSortable,i=t.dragEl,o=t.activeSortable,a=t.dispatchSortableEvent,s=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(!!r){var u=n||o;s();var c=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:r,f=document.elementFromPoint(c.clientX,c.clientY);l(),u&&!u.el.contains(f)&&(a("spill"),this.onSpill({dragEl:i,putSortable:n}))}};function KC(){}KC.prototype={startIndex:null,dragStart:function(t){var r=t.oldDraggableIndex;this.startIndex=r},onSpill:function(t){var r=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var i=Wh(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(r,i):this.sortable.el.appendChild(r),this.sortable.animateAll(),n&&n.animateAll()},drop:_B};Qi(KC,{pluginName:"revertOnSpill"});function ZC(){}ZC.prototype={onSpill:function(t){var r=t.dragEl,n=t.putSortable,i=n||this.sortable;i.captureAnimationState(),r.parentNode&&r.parentNode.removeChild(r),i.animateAll()},drop:_B};Qi(ZC,{pluginName:"removeOnSpill"});var xi;function Ztt(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(r){var n=r.dragEl;xi=n},dragOverValid:function(r){var n=r.completed,i=r.target,o=r.onMove,a=r.activeSortable,s=r.changed,l=r.cancel;if(!!a.options.swap){var u=this.sortable.el,c=this.options;if(i&&i!==u){var f=xi;o(i)!==!1?(vr(i,c.swapClass,!0),xi=i):xi=null,f&&f!==xi&&vr(f,c.swapClass,!1)}s(),n(!0),l()}},drop:function(r){var n=r.activeSortable,i=r.putSortable,o=r.dragEl,a=i||this.sortable,s=this.options;xi&&vr(xi,s.swapClass,!1),xi&&(s.swap||i&&i.options.swap)&&o!==xi&&(a.captureAnimationState(),a!==n&&n.captureAnimationState(),qtt(o,xi),a.animateAll(),a!==n&&n.animateAll())},nulling:function(){xi=null}},Qi(e,{pluginName:"swap",eventProperties:function(){return{swapItem:xi}}})}function qtt(e,t){var r=e.parentNode,n=t.parentNode,i,o;!r||!n||r.isEqualNode(t)||n.isEqualNode(e)||(i=Pr(e),o=Pr(t),r.isEqualNode(n)&&i<o&&o++,r.insertBefore(t,r.children[i]),n.insertBefore(e,n.children[o]))}var ae=[],ci=[],jd,co,Gd=!1,Xn=!1,yf=!1,or,Hd,X0;function Jtt(){function e(t){for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));t.options.supportPointer?Te(document,"pointerup",this._deselectMultiDrag):(Te(document,"mouseup",this._deselectMultiDrag),Te(document,"touchend",this._deselectMultiDrag)),Te(document,"keydown",this._checkKeyDown),Te(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(i,o){var a="";ae.length&&co===t?ae.forEach(function(s,l){a+=(l?", ":"")+s.textContent}):a=o.textContent,i.setData("Text",a)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(r){var n=r.dragEl;or=n},delayEnded:function(){this.isMultiDrag=~ae.indexOf(or)},setupClone:function(r){var n=r.sortable,i=r.cancel;if(!!this.isMultiDrag){for(var o=0;o<ae.length;o++)ci.push(YC(ae[o])),ci[o].sortableIndex=ae[o].sortableIndex,ci[o].draggable=!1,ci[o].style["will-change"]="",vr(ci[o],this.options.selectedClass,!1),ae[o]===or&&vr(ci[o],this.options.chosenClass,!1);n._hideClone(),i()}},clone:function(r){var n=r.sortable,i=r.rootEl,o=r.dispatchSortableEvent,a=r.cancel;!this.isMultiDrag||this.options.removeCloneOnHide||ae.length&&co===n&&(kI(!0,i),o("clone"),a())},showClone:function(r){var n=r.cloneNowShown,i=r.rootEl,o=r.cancel;!this.isMultiDrag||(kI(!1,i),ci.forEach(function(a){jt(a,"display","")}),n(),X0=!1,o())},hideClone:function(r){var n=this;r.sortable;var i=r.cloneNowHidden,o=r.cancel;!this.isMultiDrag||(ci.forEach(function(a){jt(a,"display","none"),n.options.removeCloneOnHide&&a.parentNode&&a.parentNode.removeChild(a)}),i(),X0=!0,o())},dragStartGlobal:function(r){r.sortable,!this.isMultiDrag&&co&&co.multiDrag._deselectMultiDrag(),ae.forEach(function(n){n.sortableIndex=Pr(n)}),ae=ae.sort(function(n,i){return n.sortableIndex-i.sortableIndex}),yf=!0},dragStarted:function(r){var n=this,i=r.sortable;if(!!this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){ae.forEach(function(a){a!==or&&jt(a,"position","absolute")});var o=dr(or,!1,!0,!0);ae.forEach(function(a){a!==or&&_I(a,o)}),Xn=!0,Gd=!0}i.animateAll(function(){Xn=!1,Gd=!1,n.options.animation&&ae.forEach(function(a){yw(a)}),n.options.sort&&Y0()})}},dragOver:function(r){var n=r.target,i=r.completed,o=r.cancel;Xn&&~ae.indexOf(n)&&(i(!1),o())},revert:function(r){var n=r.fromSortable,i=r.rootEl,o=r.sortable,a=r.dragRect;ae.length>1&&(ae.forEach(function(s){o.addAnimationState({target:s,rect:Xn?dr(s):a}),yw(s),s.fromRect=a,n.removeAnimationState(s)}),Xn=!1,Qtt(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(r){var n=r.sortable,i=r.isOwner,o=r.insertion,a=r.activeSortable,s=r.parentEl,l=r.putSortable,u=this.options;if(o){if(i&&a._hideClone(),Gd=!1,u.animation&&ae.length>1&&(Xn||!i&&!a.options.sort&&!l)){var c=dr(or,!1,!0,!0);ae.forEach(function(h){h!==or&&(_I(h,c),s.appendChild(h))}),Xn=!0}if(!i)if(Xn||Y0(),ae.length>1){var f=X0;a._showClone(n),a.options.animation&&!X0&&f&&ci.forEach(function(h){a.addAnimationState({target:h,rect:Hd}),h.fromRect=Hd,h.thisAnimationDuration=null})}else a._showClone(n)}},dragOverAnimationCapture:function(r){var n=r.dragRect,i=r.isOwner,o=r.activeSortable;if(ae.forEach(function(s){s.thisAnimationDuration=null}),o.options.animation&&!i&&o.multiDrag.isMultiDrag){Hd=Qi({},n);var a=lc(or,!0);Hd.top-=a.f,Hd.left-=a.e}},dragOverAnimationComplete:function(){Xn&&(Xn=!1,Y0())},drop:function(r){var n=r.originalEvent,i=r.rootEl,o=r.parentEl,a=r.sortable,s=r.dispatchSortableEvent,l=r.oldIndex,u=r.putSortable,c=u||this.sortable;if(!!n){var f=this.options,h=o.children;if(!yf)if(f.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),vr(or,f.selectedClass,!~ae.indexOf(or)),~ae.indexOf(or))ae.splice(ae.indexOf(or),1),jd=null,Xp({sortable:a,rootEl:i,name:"deselect",targetEl:or,originalEvt:n});else{if(ae.push(or),Xp({sortable:a,rootEl:i,name:"select",targetEl:or,originalEvt:n}),n.shiftKey&&jd&&a.el.contains(jd)){var d=Pr(jd),p=Pr(or);if(~d&&~p&&d!==p){var g,m;for(p>d?(m=d,g=p):(m=p,g=d+1);m<g;m++)~ae.indexOf(h[m])||(vr(h[m],f.selectedClass,!0),ae.push(h[m]),Xp({sortable:a,rootEl:i,name:"select",targetEl:h[m],originalEvt:n}))}}else jd=or;co=c}if(yf&&this.isMultiDrag){if(Xn=!1,(o[Pn].options.sort||o!==i)&&ae.length>1){var v=dr(or),y=Pr(or,":not(."+this.options.selectedClass+")");if(!Gd&&f.animation&&(or.thisAnimationDuration=null),c.captureAnimationState(),!Gd&&(f.animation&&(or.fromRect=v,ae.forEach(function(w){if(w.thisAnimationDuration=null,w!==or){var T=Xn?dr(w):v;w.fromRect=T,c.addAnimationState({target:w,rect:T})}})),Y0(),ae.forEach(function(w){h[y]?o.insertBefore(w,h[y]):o.appendChild(w),y++}),l===Pr(or))){var b=!1;ae.forEach(function(w){if(w.sortableIndex!==Pr(w)){b=!0;return}}),b&&s("update")}ae.forEach(function(w){yw(w)}),c.animateAll()}co=c}(i===o||u&&u.lastPutMode!=="clone")&&ci.forEach(function(w){w.parentNode&&w.parentNode.removeChild(w)})}},nullingGlobal:function(){this.isMultiDrag=yf=!1,ci.length=0},destroyGlobal:function(){this._deselectMultiDrag(),ve(document,"pointerup",this._deselectMultiDrag),ve(document,"mouseup",this._deselectMultiDrag),ve(document,"touchend",this._deselectMultiDrag),ve(document,"keydown",this._checkKeyDown),ve(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(r){if(!(typeof yf<"u"&&yf)&&co===this.sortable&&!(r&&So(r.target,this.options.draggable,this.sortable.el,!1))&&!(r&&r.button!==0))for(;ae.length;){var n=ae[0];vr(n,this.options.selectedClass,!1),ae.shift(),Xp({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:n,originalEvt:r})}},_checkKeyDown:function(r){r.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(r){r.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Qi(e,{pluginName:"multiDrag",utils:{select:function(r){var n=r.parentNode[Pn];!n||!n.options.multiDrag||~ae.indexOf(r)||(co&&co!==n&&(co.multiDrag._deselectMultiDrag(),co=n),vr(r,n.options.selectedClass,!0),ae.push(r))},deselect:function(r){var n=r.parentNode[Pn],i=ae.indexOf(r);!n||!n.options.multiDrag||!~i||(vr(r,n.options.selectedClass,!1),ae.splice(i,1))}},eventProperties:function(){var r=this,n=[],i=[];return ae.forEach(function(o){n.push({multiDragElement:o,index:o.sortableIndex});var a;Xn&&o!==or?a=-1:Xn?a=Pr(o,":not(."+r.options.selectedClass+")"):a=Pr(o),i.push({multiDragElement:o,index:a})}),{items:Stt(ae),clones:[].concat(ci),oldIndicies:n,newIndicies:i}},optionListeners:{multiDragKey:function(r){return r=r.toLowerCase(),r==="ctrl"?r="Control":r.length>1&&(r=r.charAt(0).toUpperCase()+r.substr(1)),r}}})}function Qtt(e,t){ae.forEach(function(r,n){var i=t.children[r.sortableIndex+(e?Number(n):0)];i?t.insertBefore(r,i):t.appendChild(r)})}function kI(e,t){ci.forEach(function(r,n){var i=t.children[r.sortableIndex+(e?Number(n):0)];i?t.insertBefore(r,i):t.appendChild(r)})}function Y0(){ae.forEach(function(e){e!==or&&e.parentNode&&e.parentNode.removeChild(e)})}te.mount(new Ktt);te.mount(ZC,KC);const tet=Object.freeze(Object.defineProperty({__proto__:null,default:te,MultiDrag:Jtt,Sortable:te,Swap:Ztt},Symbol.toStringTag,{value:"Module"})),eet=iB(tet);(function(e,t){(function(n,i){e.exports=i(ytt,eet)})(typeof self<"u"?self:Qy,function(r,n){return function(i){var o={};function a(s){if(o[s])return o[s].exports;var l=o[s]={i:s,l:!1,exports:{}};return i[s].call(l.exports,l,l.exports,a),l.l=!0,l.exports}return a.m=i,a.c=o,a.d=function(s,l,u){a.o(s,l)||Object.defineProperty(s,l,{enumerable:!0,get:u})},a.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},a.t=function(s,l){if(l&1&&(s=a(s)),l&8||l&4&&typeof s=="object"&&s&&s.__esModule)return s;var u=Object.create(null);if(a.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:s}),l&2&&typeof s!="string")for(var c in s)a.d(u,c,function(f){return s[f]}.bind(null,c));return u},a.n=function(s){var l=s&&s.__esModule?function(){return s.default}:function(){return s};return a.d(l,"a",l),l},a.o=function(s,l){return Object.prototype.hasOwnProperty.call(s,l)},a.p="",a(a.s="fb15")}({"00ee":function(i,o,a){var s=a("b622"),l=s("toStringTag"),u={};u[l]="z",i.exports=String(u)==="[object z]"},"0366":function(i,o,a){var s=a("1c0b");i.exports=function(l,u,c){if(s(l),u===void 0)return l;switch(c){case 0:return function(){return l.call(u)};case 1:return function(f){return l.call(u,f)};case 2:return function(f,h){return l.call(u,f,h)};case 3:return function(f,h,d){return l.call(u,f,h,d)}}return function(){return l.apply(u,arguments)}}},"057f":function(i,o,a){var s=a("fc6a"),l=a("241c").f,u={}.toString,c=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],f=function(h){try{return l(h)}catch{return c.slice()}};i.exports.f=function(d){return c&&u.call(d)=="[object Window]"?f(d):l(s(d))}},"06cf":function(i,o,a){var s=a("83ab"),l=a("d1e7"),u=a("5c6c"),c=a("fc6a"),f=a("c04e"),h=a("5135"),d=a("0cfb"),p=Object.getOwnPropertyDescriptor;o.f=s?p:function(m,v){if(m=c(m),v=f(v,!0),d)try{return p(m,v)}catch{}if(h(m,v))return u(!l.f.call(m,v),m[v])}},"0cfb":function(i,o,a){var s=a("83ab"),l=a("d039"),u=a("cc12");i.exports=!s&&!l(function(){return Object.defineProperty(u("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(i,o,a){var s=a("23e7"),l=a("d58f").left,u=a("a640"),c=a("ae40"),f=u("reduce"),h=c("reduce",{1:0});s({target:"Array",proto:!0,forced:!f||!h},{reduce:function(p){return l(this,p,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(i,o,a){var s=a("c6b6"),l=a("9263");i.exports=function(u,c){var f=u.exec;if(typeof f=="function"){var h=f.call(u,c);if(typeof h!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return h}if(s(u)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(u,c)}},"159b":function(i,o,a){var s=a("da84"),l=a("fdbc"),u=a("17c2"),c=a("9112");for(var f in l){var h=s[f],d=h&&h.prototype;if(d&&d.forEach!==u)try{c(d,"forEach",u)}catch{d.forEach=u}}},"17c2":function(i,o,a){var s=a("b727").forEach,l=a("a640"),u=a("ae40"),c=l("forEach"),f=u("forEach");i.exports=!c||!f?function(d){return s(this,d,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(i,o,a){var s=a("d066");i.exports=s("document","documentElement")},"1c0b":function(i,o){i.exports=function(a){if(typeof a!="function")throw TypeError(String(a)+" is not a function");return a}},"1c7e":function(i,o,a){var s=a("b622"),l=s("iterator"),u=!1;try{var c=0,f={next:function(){return{done:!!c++}},return:function(){u=!0}};f[l]=function(){return this},Array.from(f,function(){throw 2})}catch{}i.exports=function(h,d){if(!d&&!u)return!1;var p=!1;try{var g={};g[l]=function(){return{next:function(){return{done:p=!0}}}},h(g)}catch{}return p}},"1d80":function(i,o){i.exports=function(a){if(a==null)throw TypeError("Can't call method on "+a);return a}},"1dde":function(i,o,a){var s=a("d039"),l=a("b622"),u=a("2d00"),c=l("species");i.exports=function(f){return u>=51||!s(function(){var h=[],d=h.constructor={};return d[c]=function(){return{foo:1}},h[f](Boolean).foo!==1})}},"23cb":function(i,o,a){var s=a("a691"),l=Math.max,u=Math.min;i.exports=function(c,f){var h=s(c);return h<0?l(h+f,0):u(h,f)}},"23e7":function(i,o,a){var s=a("da84"),l=a("06cf").f,u=a("9112"),c=a("6eeb"),f=a("ce4e"),h=a("e893"),d=a("94ca");i.exports=function(p,g){var m=p.target,v=p.global,y=p.stat,b,w,T,S,k,E;if(v?w=s:y?w=s[m]||f(m,{}):w=(s[m]||{}).prototype,w)for(T in g){if(k=g[T],p.noTargetGet?(E=l(w,T),S=E&&E.value):S=w[T],b=d(v?T:m+(y?".":"#")+T,p.forced),!b&&S!==void 0){if(typeof k==typeof S)continue;h(k,S)}(p.sham||S&&S.sham)&&u(k,"sham",!0),c(w,T,k,p)}}},"241c":function(i,o,a){var s=a("ca84"),l=a("7839"),u=l.concat("length","prototype");o.f=Object.getOwnPropertyNames||function(f){return s(f,u)}},"25f0":function(i,o,a){var s=a("6eeb"),l=a("825a"),u=a("d039"),c=a("ad6d"),f="toString",h=RegExp.prototype,d=h[f],p=u(function(){return d.call({source:"a",flags:"b"})!="/a/b"}),g=d.name!=f;(p||g)&&s(RegExp.prototype,f,function(){var v=l(this),y=String(v.source),b=v.flags,w=String(b===void 0&&v instanceof RegExp&&!("flags"in h)?c.call(v):b);return"/"+y+"/"+w},{unsafe:!0})},"2ca0":function(i,o,a){var s=a("23e7"),l=a("06cf").f,u=a("50c4"),c=a("5a34"),f=a("1d80"),h=a("ab13"),d=a("c430"),p="".startsWith,g=Math.min,m=h("startsWith"),v=!d&&!m&&!!function(){var y=l(String.prototype,"startsWith");return y&&!y.writable}();s({target:"String",proto:!0,forced:!v&&!m},{startsWith:function(b){var w=String(f(this));c(b);var T=u(g(arguments.length>1?arguments[1]:void 0,w.length)),S=String(b);return p?p.call(w,S,T):w.slice(T,T+S.length)===S}})},"2d00":function(i,o,a){var s=a("da84"),l=a("342f"),u=s.process,c=u&&u.versions,f=c&&c.v8,h,d;f?(h=f.split("."),d=h[0]+h[1]):l&&(h=l.match(/Edge\/(\d+)/),(!h||h[1]>=74)&&(h=l.match(/Chrome\/(\d+)/),h&&(d=h[1]))),i.exports=d&&+d},"342f":function(i,o,a){var s=a("d066");i.exports=s("navigator","userAgent")||""},"35a1":function(i,o,a){var s=a("f5df"),l=a("3f8c"),u=a("b622"),c=u("iterator");i.exports=function(f){if(f!=null)return f[c]||f["@@iterator"]||l[s(f)]}},"37e8":function(i,o,a){var s=a("83ab"),l=a("9bf2"),u=a("825a"),c=a("df75");i.exports=s?Object.defineProperties:function(h,d){u(h);for(var p=c(d),g=p.length,m=0,v;g>m;)l.f(h,v=p[m++],d[v]);return h}},"3bbe":function(i,o,a){var s=a("861d");i.exports=function(l){if(!s(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype");return l}},"3ca3":function(i,o,a){var s=a("6547").charAt,l=a("69f3"),u=a("7dd0"),c="String Iterator",f=l.set,h=l.getterFor(c);u(String,"String",function(d){f(this,{type:c,string:String(d),index:0})},function(){var p=h(this),g=p.string,m=p.index,v;return m>=g.length?{value:void 0,done:!0}:(v=s(g,m),p.index+=v.length,{value:v,done:!1})})},"3f8c":function(i,o){i.exports={}},4160:function(i,o,a){var s=a("23e7"),l=a("17c2");s({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},"428f":function(i,o,a){var s=a("da84");i.exports=s},"44ad":function(i,o,a){var s=a("d039"),l=a("c6b6"),u="".split;i.exports=s(function(){return!Object("z").propertyIsEnumerable(0)})?function(c){return l(c)=="String"?u.call(c,""):Object(c)}:Object},"44d2":function(i,o,a){var s=a("b622"),l=a("7c73"),u=a("9bf2"),c=s("unscopables"),f=Array.prototype;f[c]==null&&u.f(f,c,{configurable:!0,value:l(null)}),i.exports=function(h){f[c][h]=!0}},"44e7":function(i,o,a){var s=a("861d"),l=a("c6b6"),u=a("b622"),c=u("match");i.exports=function(f){var h;return s(f)&&((h=f[c])!==void 0?!!h:l(f)=="RegExp")}},4930:function(i,o,a){var s=a("d039");i.exports=!!Object.getOwnPropertySymbols&&!s(function(){return!String(Symbol())})},"4d64":function(i,o,a){var s=a("fc6a"),l=a("50c4"),u=a("23cb"),c=function(f){return function(h,d,p){var g=s(h),m=l(g.length),v=u(p,m),y;if(f&&d!=d){for(;m>v;)if(y=g[v++],y!=y)return!0}else for(;m>v;v++)if((f||v in g)&&g[v]===d)return f||v||0;return!f&&-1}};i.exports={includes:c(!0),indexOf:c(!1)}},"4de4":function(i,o,a){var s=a("23e7"),l=a("b727").filter,u=a("1dde"),c=a("ae40"),f=u("filter"),h=c("filter");s({target:"Array",proto:!0,forced:!f||!h},{filter:function(p){return l(this,p,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(i,o,a){var s=a("0366"),l=a("7b0b"),u=a("9bdd"),c=a("e95a"),f=a("50c4"),h=a("8418"),d=a("35a1");i.exports=function(g){var m=l(g),v=typeof this=="function"?this:Array,y=arguments.length,b=y>1?arguments[1]:void 0,w=b!==void 0,T=d(m),S=0,k,E,P,C,A,L;if(w&&(b=s(b,y>2?arguments[2]:void 0,2)),T!=null&&!(v==Array&&c(T)))for(C=T.call(m),A=C.next,E=new v;!(P=A.call(C)).done;S++)L=w?u(C,b,[P.value,S],!0):P.value,h(E,S,L);else for(k=f(m.length),E=new v(k);k>S;S++)L=w?b(m[S],S):m[S],h(E,S,L);return E.length=S,E}},"4fad":function(i,o,a){var s=a("23e7"),l=a("6f53").entries;s({target:"Object",stat:!0},{entries:function(c){return l(c)}})},"50c4":function(i,o,a){var s=a("a691"),l=Math.min;i.exports=function(u){return u>0?l(s(u),9007199254740991):0}},5135:function(i,o){var a={}.hasOwnProperty;i.exports=function(s,l){return a.call(s,l)}},5319:function(i,o,a){var s=a("d784"),l=a("825a"),u=a("7b0b"),c=a("50c4"),f=a("a691"),h=a("1d80"),d=a("8aa5"),p=a("14c3"),g=Math.max,m=Math.min,v=Math.floor,y=/\$([$&'`]|\d\d?|<[^>]*>)/g,b=/\$([$&'`]|\d\d?)/g,w=function(T){return T===void 0?T:String(T)};s("replace",2,function(T,S,k,E){var P=E.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,C=E.REPLACE_KEEPS_$0,A=P?"$":"$0";return[function(D,F){var z=h(this),Y=D==null?void 0:D[T];return Y!==void 0?Y.call(D,z,F):S.call(String(z),D,F)},function(R,D){if(!P&&C||typeof D=="string"&&D.indexOf(A)===-1){var F=k(S,R,this,D);if(F.done)return F.value}var z=l(R),Y=String(this),K=typeof D=="function";K||(D=String(D));var et=z.global;if(et){var Tt=z.unicode;z.lastIndex=0}for(var Ct=[];;){var vt=p(z,Y);if(vt===null||(Ct.push(vt),!et))break;var wt=String(vt[0]);wt===""&&(z.lastIndex=d(Y,c(z.lastIndex),Tt))}for(var Kt="",Z=0,it=0;it<Ct.length;it++){vt=Ct[it];for(var tt=String(vt[0]),bt=g(m(f(vt.index),Y.length),0),kt=[],It=1;It<vt.length;It++)kt.push(w(vt[It]));var pt=vt.groups;if(K){var mt=[tt].concat(kt,bt,Y);pt!==void 0&&mt.push(pt);var V=String(D.apply(void 0,mt))}else V=L(tt,Y,bt,kt,pt,D);bt>=Z&&(Kt+=Y.slice(Z,bt)+V,Z=bt+tt.length)}return Kt+Y.slice(Z)}];function L(R,D,F,z,Y,K){var et=F+R.length,Tt=z.length,Ct=b;return Y!==void 0&&(Y=u(Y),Ct=y),S.call(K,Ct,function(vt,wt){var Kt;switch(wt.charAt(0)){case"$":return"$";case"&":return R;case"`":return D.slice(0,F);case"'":return D.slice(et);case"<":Kt=Y[wt.slice(1,-1)];break;default:var Z=+wt;if(Z===0)return vt;if(Z>Tt){var it=v(Z/10);return it===0?vt:it<=Tt?z[it-1]===void 0?wt.charAt(1):z[it-1]+wt.charAt(1):vt}Kt=z[Z-1]}return Kt===void 0?"":Kt})}})},5692:function(i,o,a){var s=a("c430"),l=a("c6cd");(i.exports=function(u,c){return l[u]||(l[u]=c!==void 0?c:{})})("versions",[]).push({version:"3.6.5",mode:s?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(i,o,a){var s=a("d066"),l=a("241c"),u=a("7418"),c=a("825a");i.exports=s("Reflect","ownKeys")||function(h){var d=l.f(c(h)),p=u.f;return p?d.concat(p(h)):d}},"5a34":function(i,o,a){var s=a("44e7");i.exports=function(l){if(s(l))throw TypeError("The method doesn't accept regular expressions");return l}},"5c6c":function(i,o){i.exports=function(a,s){return{enumerable:!(a&1),configurable:!(a&2),writable:!(a&4),value:s}}},"5db7":function(i,o,a){var s=a("23e7"),l=a("a2bf"),u=a("7b0b"),c=a("50c4"),f=a("1c0b"),h=a("65f0");s({target:"Array",proto:!0},{flatMap:function(p){var g=u(this),m=c(g.length),v;return f(p),v=h(g,0),v.length=l(v,g,g,m,0,1,p,arguments.length>1?arguments[1]:void 0),v}})},6547:function(i,o,a){var s=a("a691"),l=a("1d80"),u=function(c){return function(f,h){var d=String(l(f)),p=s(h),g=d.length,m,v;return p<0||p>=g?c?"":void 0:(m=d.charCodeAt(p),m<55296||m>56319||p+1===g||(v=d.charCodeAt(p+1))<56320||v>57343?c?d.charAt(p):m:c?d.slice(p,p+2):(m-55296<<10)+(v-56320)+65536)}};i.exports={codeAt:u(!1),charAt:u(!0)}},"65f0":function(i,o,a){var s=a("861d"),l=a("e8b5"),u=a("b622"),c=u("species");i.exports=function(f,h){var d;return l(f)&&(d=f.constructor,typeof d=="function"&&(d===Array||l(d.prototype))?d=void 0:s(d)&&(d=d[c],d===null&&(d=void 0))),new(d===void 0?Array:d)(h===0?0:h)}},"69f3":function(i,o,a){var s=a("7f9a"),l=a("da84"),u=a("861d"),c=a("9112"),f=a("5135"),h=a("f772"),d=a("d012"),p=l.WeakMap,g,m,v,y=function(P){return v(P)?m(P):g(P,{})},b=function(P){return function(C){var A;if(!u(C)||(A=m(C)).type!==P)throw TypeError("Incompatible receiver, "+P+" required");return A}};if(s){var w=new p,T=w.get,S=w.has,k=w.set;g=function(P,C){return k.call(w,P,C),C},m=function(P){return T.call(w,P)||{}},v=function(P){return S.call(w,P)}}else{var E=h("state");d[E]=!0,g=function(P,C){return c(P,E,C),C},m=function(P){return f(P,E)?P[E]:{}},v=function(P){return f(P,E)}}i.exports={set:g,get:m,has:v,enforce:y,getterFor:b}},"6eeb":function(i,o,a){var s=a("da84"),l=a("9112"),u=a("5135"),c=a("ce4e"),f=a("8925"),h=a("69f3"),d=h.get,p=h.enforce,g=String(String).split("String");(i.exports=function(m,v,y,b){var w=b?!!b.unsafe:!1,T=b?!!b.enumerable:!1,S=b?!!b.noTargetGet:!1;if(typeof y=="function"&&(typeof v=="string"&&!u(y,"name")&&l(y,"name",v),p(y).source=g.join(typeof v=="string"?v:"")),m===s){T?m[v]=y:c(v,y);return}else w?!S&&m[v]&&(T=!0):delete m[v];T?m[v]=y:l(m,v,y)})(Function.prototype,"toString",function(){return typeof this=="function"&&d(this).source||f(this)})},"6f53":function(i,o,a){var s=a("83ab"),l=a("df75"),u=a("fc6a"),c=a("d1e7").f,f=function(h){return function(d){for(var p=u(d),g=l(p),m=g.length,v=0,y=[],b;m>v;)b=g[v++],(!s||c.call(p,b))&&y.push(h?[b,p[b]]:p[b]);return y}};i.exports={entries:f(!0),values:f(!1)}},"73d9":function(i,o,a){var s=a("44d2");s("flatMap")},7418:function(i,o){o.f=Object.getOwnPropertySymbols},"746f":function(i,o,a){var s=a("428f"),l=a("5135"),u=a("e538"),c=a("9bf2").f;i.exports=function(f){var h=s.Symbol||(s.Symbol={});l(h,f)||c(h,f,{value:u.f(f)})}},7839:function(i,o){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(i,o,a){var s=a("1d80");i.exports=function(l){return Object(s(l))}},"7c73":function(i,o,a){var s=a("825a"),l=a("37e8"),u=a("7839"),c=a("d012"),f=a("1be4"),h=a("cc12"),d=a("f772"),p=">",g="<",m="prototype",v="script",y=d("IE_PROTO"),b=function(){},w=function(P){return g+v+p+P+g+"/"+v+p},T=function(P){P.write(w("")),P.close();var C=P.parentWindow.Object;return P=null,C},S=function(){var P=h("iframe"),C="java"+v+":",A;return P.style.display="none",f.appendChild(P),P.src=String(C),A=P.contentWindow.document,A.open(),A.write(w("document.F=Object")),A.close(),A.F},k,E=function(){try{k=document.domain&&new ActiveXObject("htmlfile")}catch{}E=k?T(k):S();for(var P=u.length;P--;)delete E[m][u[P]];return E()};c[y]=!0,i.exports=Object.create||function(C,A){var L;return C!==null?(b[m]=s(C),L=new b,b[m]=null,L[y]=C):L=E(),A===void 0?L:l(L,A)}},"7dd0":function(i,o,a){var s=a("23e7"),l=a("9ed3"),u=a("e163"),c=a("d2bb"),f=a("d44e"),h=a("9112"),d=a("6eeb"),p=a("b622"),g=a("c430"),m=a("3f8c"),v=a("ae93"),y=v.IteratorPrototype,b=v.BUGGY_SAFARI_ITERATORS,w=p("iterator"),T="keys",S="values",k="entries",E=function(){return this};i.exports=function(P,C,A,L,R,D,F){l(A,C,L);var z=function(it){if(it===R&&Ct)return Ct;if(!b&&it in et)return et[it];switch(it){case T:return function(){return new A(this,it)};case S:return function(){return new A(this,it)};case k:return function(){return new A(this,it)}}return function(){return new A(this)}},Y=C+" Iterator",K=!1,et=P.prototype,Tt=et[w]||et["@@iterator"]||R&&et[R],Ct=!b&&Tt||z(R),vt=C=="Array"&&et.entries||Tt,wt,Kt,Z;if(vt&&(wt=u(vt.call(new P)),y!==Object.prototype&&wt.next&&(!g&&u(wt)!==y&&(c?c(wt,y):typeof wt[w]!="function"&&h(wt,w,E)),f(wt,Y,!0,!0),g&&(m[Y]=E))),R==S&&Tt&&Tt.name!==S&&(K=!0,Ct=function(){return Tt.call(this)}),(!g||F)&&et[w]!==Ct&&h(et,w,Ct),m[C]=Ct,R)if(Kt={values:z(S),keys:D?Ct:z(T),entries:z(k)},F)for(Z in Kt)(b||K||!(Z in et))&&d(et,Z,Kt[Z]);else s({target:C,proto:!0,forced:b||K},Kt);return Kt}},"7f9a":function(i,o,a){var s=a("da84"),l=a("8925"),u=s.WeakMap;i.exports=typeof u=="function"&&/native code/.test(l(u))},"825a":function(i,o,a){var s=a("861d");i.exports=function(l){if(!s(l))throw TypeError(String(l)+" is not an object");return l}},"83ab":function(i,o,a){var s=a("d039");i.exports=!s(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(i,o,a){var s=a("c04e"),l=a("9bf2"),u=a("5c6c");i.exports=function(c,f,h){var d=s(f);d in c?l.f(c,d,u(0,h)):c[d]=h}},"861d":function(i,o){i.exports=function(a){return typeof a=="object"?a!==null:typeof a=="function"}},8875:function(i,o,a){var s,l,u;(function(c,f){l=[],s=f,u=typeof s=="function"?s.apply(o,l):s,u!==void 0&&(i.exports=u)})(typeof self<"u"?self:this,function(){function c(){var f=Object.getOwnPropertyDescriptor(document,"currentScript");if(!f&&"currentScript"in document&&document.currentScript||f&&f.get!==c&&document.currentScript)return document.currentScript;try{throw new Error}catch(k){var h=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,d=/@([^@]*):(\d+):(\d+)\s*$/ig,p=h.exec(k.stack)||d.exec(k.stack),g=p&&p[1]||!1,m=p&&p[2]||!1,v=document.location.href.replace(document.location.hash,""),y,b,w,T=document.getElementsByTagName("script");g===v&&(y=document.documentElement.outerHTML,b=new RegExp("(?:[^\\n]+?\\n){0,"+(m-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),w=y.replace(b,"$1").trim());for(var S=0;S<T.length;S++)if(T[S].readyState==="interactive"||T[S].src===g||g===v&&T[S].innerHTML&&T[S].innerHTML.trim()===w)return T[S];return null}}return c})},8925:function(i,o,a){var s=a("c6cd"),l=Function.toString;typeof s.inspectSource!="function"&&(s.inspectSource=function(u){return l.call(u)}),i.exports=s.inspectSource},"8aa5":function(i,o,a){var s=a("6547").charAt;i.exports=function(l,u,c){return u+(c?s(l,u).length:1)}},"8bbf":function(i,o){i.exports=r},"90e3":function(i,o){var a=0,s=Math.random();i.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++a+s).toString(36)}},9112:function(i,o,a){var s=a("83ab"),l=a("9bf2"),u=a("5c6c");i.exports=s?function(c,f,h){return l.f(c,f,u(1,h))}:function(c,f,h){return c[f]=h,c}},9263:function(i,o,a){var s=a("ad6d"),l=a("9f7f"),u=RegExp.prototype.exec,c=String.prototype.replace,f=u,h=function(){var m=/a/,v=/b*/g;return u.call(m,"a"),u.call(v,"a"),m.lastIndex!==0||v.lastIndex!==0}(),d=l.UNSUPPORTED_Y||l.BROKEN_CARET,p=/()??/.exec("")[1]!==void 0,g=h||p||d;g&&(f=function(v){var y=this,b,w,T,S,k=d&&y.sticky,E=s.call(y),P=y.source,C=0,A=v;return k&&(E=E.replace("y",""),E.indexOf("g")===-1&&(E+="g"),A=String(v).slice(y.lastIndex),y.lastIndex>0&&(!y.multiline||y.multiline&&v[y.lastIndex-1]!==`
`)&&(P="(?: "+P+")",A=" "+A,C++),w=new RegExp("^(?:"+P+")",E)),p&&(w=new RegExp("^"+P+"$(?!\\s)",E)),h&&(b=y.lastIndex),T=u.call(k?w:y,A),k?T?(T.input=T.input.slice(C),T[0]=T[0].slice(C),T.index=y.lastIndex,y.lastIndex+=T[0].length):y.lastIndex=0:h&&T&&(y.lastIndex=y.global?T.index+T[0].length:b),p&&T&&T.length>1&&c.call(T[0],w,function(){for(S=1;S<arguments.length-2;S++)arguments[S]===void 0&&(T[S]=void 0)}),T}),i.exports=f},"94ca":function(i,o,a){var s=a("d039"),l=/#|\.prototype\./,u=function(p,g){var m=f[c(p)];return m==d?!0:m==h?!1:typeof g=="function"?s(g):!!g},c=u.normalize=function(p){return String(p).replace(l,".").toLowerCase()},f=u.data={},h=u.NATIVE="N",d=u.POLYFILL="P";i.exports=u},"99af":function(i,o,a){var s=a("23e7"),l=a("d039"),u=a("e8b5"),c=a("861d"),f=a("7b0b"),h=a("50c4"),d=a("8418"),p=a("65f0"),g=a("1dde"),m=a("b622"),v=a("2d00"),y=m("isConcatSpreadable"),b=9007199254740991,w="Maximum allowed index exceeded",T=v>=51||!l(function(){var P=[];return P[y]=!1,P.concat()[0]!==P}),S=g("concat"),k=function(P){if(!c(P))return!1;var C=P[y];return C!==void 0?!!C:u(P)},E=!T||!S;s({target:"Array",proto:!0,forced:E},{concat:function(C){var A=f(this),L=p(A,0),R=0,D,F,z,Y,K;for(D=-1,z=arguments.length;D<z;D++)if(K=D===-1?A:arguments[D],k(K)){if(Y=h(K.length),R+Y>b)throw TypeError(w);for(F=0;F<Y;F++,R++)F in K&&d(L,R,K[F])}else{if(R>=b)throw TypeError(w);d(L,R++,K)}return L.length=R,L}})},"9bdd":function(i,o,a){var s=a("825a");i.exports=function(l,u,c,f){try{return f?u(s(c)[0],c[1]):u(c)}catch(d){var h=l.return;throw h!==void 0&&s(h.call(l)),d}}},"9bf2":function(i,o,a){var s=a("83ab"),l=a("0cfb"),u=a("825a"),c=a("c04e"),f=Object.defineProperty;o.f=s?f:function(d,p,g){if(u(d),p=c(p,!0),u(g),l)try{return f(d,p,g)}catch{}if("get"in g||"set"in g)throw TypeError("Accessors not supported");return"value"in g&&(d[p]=g.value),d}},"9ed3":function(i,o,a){var s=a("ae93").IteratorPrototype,l=a("7c73"),u=a("5c6c"),c=a("d44e"),f=a("3f8c"),h=function(){return this};i.exports=function(d,p,g){var m=p+" Iterator";return d.prototype=l(s,{next:u(1,g)}),c(d,m,!1,!0),f[m]=h,d}},"9f7f":function(i,o,a){var s=a("d039");function l(u,c){return RegExp(u,c)}o.UNSUPPORTED_Y=s(function(){var u=l("a","y");return u.lastIndex=2,u.exec("abcd")!=null}),o.BROKEN_CARET=s(function(){var u=l("^r","gy");return u.lastIndex=2,u.exec("str")!=null})},a2bf:function(i,o,a){var s=a("e8b5"),l=a("50c4"),u=a("0366"),c=function(f,h,d,p,g,m,v,y){for(var b=g,w=0,T=v?u(v,y,3):!1,S;w<p;){if(w in d){if(S=T?T(d[w],w,h):d[w],m>0&&s(S))b=c(f,h,S,l(S.length),b,m-1)-1;else{if(b>=9007199254740991)throw TypeError("Exceed the acceptable array length");f[b]=S}b++}w++}return b};i.exports=c},a352:function(i,o){i.exports=n},a434:function(i,o,a){var s=a("23e7"),l=a("23cb"),u=a("a691"),c=a("50c4"),f=a("7b0b"),h=a("65f0"),d=a("8418"),p=a("1dde"),g=a("ae40"),m=p("splice"),v=g("splice",{ACCESSORS:!0,0:0,1:2}),y=Math.max,b=Math.min,w=9007199254740991,T="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!m||!v},{splice:function(k,E){var P=f(this),C=c(P.length),A=l(k,C),L=arguments.length,R,D,F,z,Y,K;if(L===0?R=D=0:L===1?(R=0,D=C-A):(R=L-2,D=b(y(u(E),0),C-A)),C+R-D>w)throw TypeError(T);for(F=h(P,D),z=0;z<D;z++)Y=A+z,Y in P&&d(F,z,P[Y]);if(F.length=D,R<D){for(z=A;z<C-D;z++)Y=z+D,K=z+R,Y in P?P[K]=P[Y]:delete P[K];for(z=C;z>C-D+R;z--)delete P[z-1]}else if(R>D)for(z=C-D;z>A;z--)Y=z+D-1,K=z+R-1,Y in P?P[K]=P[Y]:delete P[K];for(z=0;z<R;z++)P[z+A]=arguments[z+2];return P.length=C-D+R,F}})},a4d3:function(i,o,a){var s=a("23e7"),l=a("da84"),u=a("d066"),c=a("c430"),f=a("83ab"),h=a("4930"),d=a("fdbf"),p=a("d039"),g=a("5135"),m=a("e8b5"),v=a("861d"),y=a("825a"),b=a("7b0b"),w=a("fc6a"),T=a("c04e"),S=a("5c6c"),k=a("7c73"),E=a("df75"),P=a("241c"),C=a("057f"),A=a("7418"),L=a("06cf"),R=a("9bf2"),D=a("d1e7"),F=a("9112"),z=a("6eeb"),Y=a("5692"),K=a("f772"),et=a("d012"),Tt=a("90e3"),Ct=a("b622"),vt=a("e538"),wt=a("746f"),Kt=a("d44e"),Z=a("69f3"),it=a("b727").forEach,tt=K("hidden"),bt="Symbol",kt="prototype",It=Ct("toPrimitive"),pt=Z.set,mt=Z.getterFor(bt),V=Object[kt],j=l.Symbol,q=u("JSON","stringify"),rt=L.f,ot=R.f,yt=C.f,xt=D.f,ut=Y("symbols"),ct=Y("op-symbols"),lt=Y("string-to-symbol-registry"),Vt=Y("symbol-to-string-registry"),Rt=Y("wks"),Ut=l.QObject,Jt=!Ut||!Ut[kt]||!Ut[kt].findChild,ce=f&&p(function(){return k(ot({},"a",{get:function(){return ot(this,"a",{value:7}).a}})).a!=7})?function(qt,Wt,Qt){var ge=rt(V,Wt);ge&&delete V[Wt],ot(qt,Wt,Qt),ge&&qt!==V&&ot(V,Wt,ge)}:ot,we=function(qt,Wt){var Qt=ut[qt]=k(j[kt]);return pt(Qt,{type:bt,tag:qt,description:Wt}),f||(Qt.description=Wt),Qt},H=d?function(qt){return typeof qt=="symbol"}:function(qt){return Object(qt)instanceof j},X=function(Wt,Qt,ge){Wt===V&&X(ct,Qt,ge),y(Wt);var Se=T(Qt,!0);return y(ge),g(ut,Se)?(ge.enumerable?(g(Wt,tt)&&Wt[tt][Se]&&(Wt[tt][Se]=!1),ge=k(ge,{enumerable:S(0,!1)})):(g(Wt,tt)||ot(Wt,tt,S(1,{})),Wt[tt][Se]=!0),ce(Wt,Se,ge)):ot(Wt,Se,ge)},Q=function(Wt,Qt){y(Wt);var ge=w(Qt),Se=E(ge).concat(re(ge));return it(Se,function(Hr){(!f||Ft.call(ge,Hr))&&X(Wt,Hr,ge[Hr])}),Wt},st=function(Wt,Qt){return Qt===void 0?k(Wt):Q(k(Wt),Qt)},Ft=function(Wt){var Qt=T(Wt,!0),ge=xt.call(this,Qt);return this===V&&g(ut,Qt)&&!g(ct,Qt)?!1:ge||!g(this,Qt)||!g(ut,Qt)||g(this,tt)&&this[tt][Qt]?ge:!0},Zt=function(Wt,Qt){var ge=w(Wt),Se=T(Qt,!0);if(!(ge===V&&g(ut,Se)&&!g(ct,Se))){var Hr=rt(ge,Se);return Hr&&g(ut,Se)&&!(g(ge,tt)&&ge[tt][Se])&&(Hr.enumerable=!0),Hr}},ne=function(Wt){var Qt=yt(w(Wt)),ge=[];return it(Qt,function(Se){!g(ut,Se)&&!g(et,Se)&&ge.push(Se)}),ge},re=function(Wt){var Qt=Wt===V,ge=yt(Qt?ct:w(Wt)),Se=[];return it(ge,function(Hr){g(ut,Hr)&&(!Qt||g(V,Hr))&&Se.push(ut[Hr])}),Se};if(h||(j=function(){if(this instanceof j)throw TypeError("Symbol is not a constructor");var Wt=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),Qt=Tt(Wt),ge=function(Se){this===V&&ge.call(ct,Se),g(this,tt)&&g(this[tt],Qt)&&(this[tt][Qt]=!1),ce(this,Qt,S(1,Se))};return f&&Jt&&ce(V,Qt,{configurable:!0,set:ge}),we(Qt,Wt)},z(j[kt],"toString",function(){return mt(this).tag}),z(j,"withoutSetter",function(qt){return we(Tt(qt),qt)}),D.f=Ft,R.f=X,L.f=Zt,P.f=C.f=ne,A.f=re,vt.f=function(qt){return we(Ct(qt),qt)},f&&(ot(j[kt],"description",{configurable:!0,get:function(){return mt(this).description}}),c||z(V,"propertyIsEnumerable",Ft,{unsafe:!0}))),s({global:!0,wrap:!0,forced:!h,sham:!h},{Symbol:j}),it(E(Rt),function(qt){wt(qt)}),s({target:bt,stat:!0,forced:!h},{for:function(qt){var Wt=String(qt);if(g(lt,Wt))return lt[Wt];var Qt=j(Wt);return lt[Wt]=Qt,Vt[Qt]=Wt,Qt},keyFor:function(Wt){if(!H(Wt))throw TypeError(Wt+" is not a symbol");if(g(Vt,Wt))return Vt[Wt]},useSetter:function(){Jt=!0},useSimple:function(){Jt=!1}}),s({target:"Object",stat:!0,forced:!h,sham:!f},{create:st,defineProperty:X,defineProperties:Q,getOwnPropertyDescriptor:Zt}),s({target:"Object",stat:!0,forced:!h},{getOwnPropertyNames:ne,getOwnPropertySymbols:re}),s({target:"Object",stat:!0,forced:p(function(){A.f(1)})},{getOwnPropertySymbols:function(Wt){return A.f(b(Wt))}}),q){var Oe=!h||p(function(){var qt=j();return q([qt])!="[null]"||q({a:qt})!="{}"||q(Object(qt))!="{}"});s({target:"JSON",stat:!0,forced:Oe},{stringify:function(Wt,Qt,ge){for(var Se=[Wt],Hr=1,Fd;arguments.length>Hr;)Se.push(arguments[Hr++]);if(Fd=Qt,!(!v(Qt)&&Wt===void 0||H(Wt)))return m(Qt)||(Qt=function(K2,cf){if(typeof Fd=="function"&&(cf=Fd.call(this,K2,cf)),!H(cf))return cf}),Se[1]=Qt,q.apply(null,Se)}})}j[kt][It]||F(j[kt],It,j[kt].valueOf),Kt(j,bt),et[tt]=!0},a630:function(i,o,a){var s=a("23e7"),l=a("4df4"),u=a("1c7e"),c=!u(function(f){Array.from(f)});s({target:"Array",stat:!0,forced:c},{from:l})},a640:function(i,o,a){var s=a("d039");i.exports=function(l,u){var c=[][l];return!!c&&s(function(){c.call(null,u||function(){throw 1},1)})}},a691:function(i,o){var a=Math.ceil,s=Math.floor;i.exports=function(l){return isNaN(l=+l)?0:(l>0?s:a)(l)}},ab13:function(i,o,a){var s=a("b622"),l=s("match");i.exports=function(u){var c=/./;try{"/./"[u](c)}catch{try{return c[l]=!1,"/./"[u](c)}catch{}}return!1}},ac1f:function(i,o,a){var s=a("23e7"),l=a("9263");s({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},ad6d:function(i,o,a){var s=a("825a");i.exports=function(){var l=s(this),u="";return l.global&&(u+="g"),l.ignoreCase&&(u+="i"),l.multiline&&(u+="m"),l.dotAll&&(u+="s"),l.unicode&&(u+="u"),l.sticky&&(u+="y"),u}},ae40:function(i,o,a){var s=a("83ab"),l=a("d039"),u=a("5135"),c=Object.defineProperty,f={},h=function(d){throw d};i.exports=function(d,p){if(u(f,d))return f[d];p||(p={});var g=[][d],m=u(p,"ACCESSORS")?p.ACCESSORS:!1,v=u(p,0)?p[0]:h,y=u(p,1)?p[1]:void 0;return f[d]=!!g&&!l(function(){if(m&&!s)return!0;var b={length:-1};m?c(b,1,{enumerable:!0,get:h}):b[1]=1,g.call(b,v,y)})}},ae93:function(i,o,a){var s=a("e163"),l=a("9112"),u=a("5135"),c=a("b622"),f=a("c430"),h=c("iterator"),d=!1,p=function(){return this},g,m,v;[].keys&&(v=[].keys(),"next"in v?(m=s(s(v)),m!==Object.prototype&&(g=m)):d=!0),g==null&&(g={}),!f&&!u(g,h)&&l(g,h,p),i.exports={IteratorPrototype:g,BUGGY_SAFARI_ITERATORS:d}},b041:function(i,o,a){var s=a("00ee"),l=a("f5df");i.exports=s?{}.toString:function(){return"[object "+l(this)+"]"}},b0c0:function(i,o,a){var s=a("83ab"),l=a("9bf2").f,u=Function.prototype,c=u.toString,f=/^\s*function ([^ (]*)/,h="name";s&&!(h in u)&&l(u,h,{configurable:!0,get:function(){try{return c.call(this).match(f)[1]}catch{return""}}})},b622:function(i,o,a){var s=a("da84"),l=a("5692"),u=a("5135"),c=a("90e3"),f=a("4930"),h=a("fdbf"),d=l("wks"),p=s.Symbol,g=h?p:p&&p.withoutSetter||c;i.exports=function(m){return u(d,m)||(f&&u(p,m)?d[m]=p[m]:d[m]=g("Symbol."+m)),d[m]}},b64b:function(i,o,a){var s=a("23e7"),l=a("7b0b"),u=a("df75"),c=a("d039"),f=c(function(){u(1)});s({target:"Object",stat:!0,forced:f},{keys:function(d){return u(l(d))}})},b727:function(i,o,a){var s=a("0366"),l=a("44ad"),u=a("7b0b"),c=a("50c4"),f=a("65f0"),h=[].push,d=function(p){var g=p==1,m=p==2,v=p==3,y=p==4,b=p==6,w=p==5||b;return function(T,S,k,E){for(var P=u(T),C=l(P),A=s(S,k,3),L=c(C.length),R=0,D=E||f,F=g?D(T,L):m?D(T,0):void 0,z,Y;L>R;R++)if((w||R in C)&&(z=C[R],Y=A(z,R,P),p)){if(g)F[R]=Y;else if(Y)switch(p){case 3:return!0;case 5:return z;case 6:return R;case 2:h.call(F,z)}else if(y)return!1}return b?-1:v||y?y:F}};i.exports={forEach:d(0),map:d(1),filter:d(2),some:d(3),every:d(4),find:d(5),findIndex:d(6)}},c04e:function(i,o,a){var s=a("861d");i.exports=function(l,u){if(!s(l))return l;var c,f;if(u&&typeof(c=l.toString)=="function"&&!s(f=c.call(l))||typeof(c=l.valueOf)=="function"&&!s(f=c.call(l))||!u&&typeof(c=l.toString)=="function"&&!s(f=c.call(l)))return f;throw TypeError("Can't convert object to primitive value")}},c430:function(i,o){i.exports=!1},c6b6:function(i,o){var a={}.toString;i.exports=function(s){return a.call(s).slice(8,-1)}},c6cd:function(i,o,a){var s=a("da84"),l=a("ce4e"),u="__core-js_shared__",c=s[u]||l(u,{});i.exports=c},c740:function(i,o,a){var s=a("23e7"),l=a("b727").findIndex,u=a("44d2"),c=a("ae40"),f="findIndex",h=!0,d=c(f);f in[]&&Array(1)[f](function(){h=!1}),s({target:"Array",proto:!0,forced:h||!d},{findIndex:function(g){return l(this,g,arguments.length>1?arguments[1]:void 0)}}),u(f)},c8ba:function(i,o){var a;a=function(){return this}();try{a=a||new Function("return this")()}catch{typeof window=="object"&&(a=window)}i.exports=a},c975:function(i,o,a){var s=a("23e7"),l=a("4d64").indexOf,u=a("a640"),c=a("ae40"),f=[].indexOf,h=!!f&&1/[1].indexOf(1,-0)<0,d=u("indexOf"),p=c("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:h||!d||!p},{indexOf:function(m){return h?f.apply(this,arguments)||0:l(this,m,arguments.length>1?arguments[1]:void 0)}})},ca84:function(i,o,a){var s=a("5135"),l=a("fc6a"),u=a("4d64").indexOf,c=a("d012");i.exports=function(f,h){var d=l(f),p=0,g=[],m;for(m in d)!s(c,m)&&s(d,m)&&g.push(m);for(;h.length>p;)s(d,m=h[p++])&&(~u(g,m)||g.push(m));return g}},caad:function(i,o,a){var s=a("23e7"),l=a("4d64").includes,u=a("44d2"),c=a("ae40"),f=c("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:!f},{includes:function(d){return l(this,d,arguments.length>1?arguments[1]:void 0)}}),u("includes")},cc12:function(i,o,a){var s=a("da84"),l=a("861d"),u=s.document,c=l(u)&&l(u.createElement);i.exports=function(f){return c?u.createElement(f):{}}},ce4e:function(i,o,a){var s=a("da84"),l=a("9112");i.exports=function(u,c){try{l(s,u,c)}catch{s[u]=c}return c}},d012:function(i,o){i.exports={}},d039:function(i,o){i.exports=function(a){try{return!!a()}catch{return!0}}},d066:function(i,o,a){var s=a("428f"),l=a("da84"),u=function(c){return typeof c=="function"?c:void 0};i.exports=function(c,f){return arguments.length<2?u(s[c])||u(l[c]):s[c]&&s[c][f]||l[c]&&l[c][f]}},d1e7:function(i,o,a){var s={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,u=l&&!s.call({1:2},1);o.f=u?function(f){var h=l(this,f);return!!h&&h.enumerable}:s},d28b:function(i,o,a){var s=a("746f");s("iterator")},d2bb:function(i,o,a){var s=a("825a"),l=a("3bbe");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var u=!1,c={},f;try{f=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,f.call(c,[]),u=c instanceof Array}catch{}return function(d,p){return s(d),l(p),u?f.call(d,p):d.__proto__=p,d}}():void 0)},d3b7:function(i,o,a){var s=a("00ee"),l=a("6eeb"),u=a("b041");s||l(Object.prototype,"toString",u,{unsafe:!0})},d44e:function(i,o,a){var s=a("9bf2").f,l=a("5135"),u=a("b622"),c=u("toStringTag");i.exports=function(f,h,d){f&&!l(f=d?f:f.prototype,c)&&s(f,c,{configurable:!0,value:h})}},d58f:function(i,o,a){var s=a("1c0b"),l=a("7b0b"),u=a("44ad"),c=a("50c4"),f=function(h){return function(d,p,g,m){s(p);var v=l(d),y=u(v),b=c(v.length),w=h?b-1:0,T=h?-1:1;if(g<2)for(;;){if(w in y){m=y[w],w+=T;break}if(w+=T,h?w<0:b<=w)throw TypeError("Reduce of empty array with no initial value")}for(;h?w>=0:b>w;w+=T)w in y&&(m=p(m,y[w],w,v));return m}};i.exports={left:f(!1),right:f(!0)}},d784:function(i,o,a){a("ac1f");var s=a("6eeb"),l=a("d039"),u=a("b622"),c=a("9263"),f=a("9112"),h=u("species"),d=!l(function(){var y=/./;return y.exec=function(){var b=[];return b.groups={a:"7"},b},"".replace(y,"$<a>")!=="7"}),p=function(){return"a".replace(/./,"$0")==="$0"}(),g=u("replace"),m=function(){return/./[g]?/./[g]("a","$0")==="":!1}(),v=!l(function(){var y=/(?:)/,b=y.exec;y.exec=function(){return b.apply(this,arguments)};var w="ab".split(y);return w.length!==2||w[0]!=="a"||w[1]!=="b"});i.exports=function(y,b,w,T){var S=u(y),k=!l(function(){var R={};return R[S]=function(){return 7},""[y](R)!=7}),E=k&&!l(function(){var R=!1,D=/a/;return y==="split"&&(D={},D.constructor={},D.constructor[h]=function(){return D},D.flags="",D[S]=/./[S]),D.exec=function(){return R=!0,null},D[S](""),!R});if(!k||!E||y==="replace"&&!(d&&p&&!m)||y==="split"&&!v){var P=/./[S],C=w(S,""[y],function(R,D,F,z,Y){return D.exec===c?k&&!Y?{done:!0,value:P.call(D,F,z)}:{done:!0,value:R.call(F,D,z)}:{done:!1}},{REPLACE_KEEPS_$0:p,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:m}),A=C[0],L=C[1];s(String.prototype,y,A),s(RegExp.prototype,S,b==2?function(R,D){return L.call(R,this,D)}:function(R){return L.call(R,this)})}T&&f(RegExp.prototype[S],"sham",!0)}},d81d:function(i,o,a){var s=a("23e7"),l=a("b727").map,u=a("1dde"),c=a("ae40"),f=u("map"),h=c("map");s({target:"Array",proto:!0,forced:!f||!h},{map:function(p){return l(this,p,arguments.length>1?arguments[1]:void 0)}})},da84:function(i,o,a){(function(s){var l=function(u){return u&&u.Math==Math&&u};i.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof s=="object"&&s)||Function("return this")()}).call(this,a("c8ba"))},dbb4:function(i,o,a){var s=a("23e7"),l=a("83ab"),u=a("56ef"),c=a("fc6a"),f=a("06cf"),h=a("8418");s({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(p){for(var g=c(p),m=f.f,v=u(g),y={},b=0,w,T;v.length>b;)T=m(g,w=v[b++]),T!==void 0&&h(y,w,T);return y}})},dbf1:function(i,o,a){(function(s){a.d(o,"a",function(){return u});function l(){return typeof window<"u"?window.console:s.console}var u=l()}).call(this,a("c8ba"))},ddb0:function(i,o,a){var s=a("da84"),l=a("fdbc"),u=a("e260"),c=a("9112"),f=a("b622"),h=f("iterator"),d=f("toStringTag"),p=u.values;for(var g in l){var m=s[g],v=m&&m.prototype;if(v){if(v[h]!==p)try{c(v,h,p)}catch{v[h]=p}if(v[d]||c(v,d,g),l[g]){for(var y in u)if(v[y]!==u[y])try{c(v,y,u[y])}catch{v[y]=u[y]}}}}},df75:function(i,o,a){var s=a("ca84"),l=a("7839");i.exports=Object.keys||function(c){return s(c,l)}},e01a:function(i,o,a){var s=a("23e7"),l=a("83ab"),u=a("da84"),c=a("5135"),f=a("861d"),h=a("9bf2").f,d=a("e893"),p=u.Symbol;if(l&&typeof p=="function"&&(!("description"in p.prototype)||p().description!==void 0)){var g={},m=function(){var S=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),k=this instanceof m?new p(S):S===void 0?p():p(S);return S===""&&(g[k]=!0),k};d(m,p);var v=m.prototype=p.prototype;v.constructor=m;var y=v.toString,b=String(p("test"))=="Symbol(test)",w=/^Symbol\((.*)\)[^)]+$/;h(v,"description",{configurable:!0,get:function(){var S=f(this)?this.valueOf():this,k=y.call(S);if(c(g,S))return"";var E=b?k.slice(7,-1):k.replace(w,"$1");return E===""?void 0:E}}),s({global:!0,forced:!0},{Symbol:m})}},e163:function(i,o,a){var s=a("5135"),l=a("7b0b"),u=a("f772"),c=a("e177"),f=u("IE_PROTO"),h=Object.prototype;i.exports=c?Object.getPrototypeOf:function(d){return d=l(d),s(d,f)?d[f]:typeof d.constructor=="function"&&d instanceof d.constructor?d.constructor.prototype:d instanceof Object?h:null}},e177:function(i,o,a){var s=a("d039");i.exports=!s(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},e260:function(i,o,a){var s=a("fc6a"),l=a("44d2"),u=a("3f8c"),c=a("69f3"),f=a("7dd0"),h="Array Iterator",d=c.set,p=c.getterFor(h);i.exports=f(Array,"Array",function(g,m){d(this,{type:h,target:s(g),index:0,kind:m})},function(){var g=p(this),m=g.target,v=g.kind,y=g.index++;return!m||y>=m.length?(g.target=void 0,{value:void 0,done:!0}):v=="keys"?{value:y,done:!1}:v=="values"?{value:m[y],done:!1}:{value:[y,m[y]],done:!1}},"values"),u.Arguments=u.Array,l("keys"),l("values"),l("entries")},e439:function(i,o,a){var s=a("23e7"),l=a("d039"),u=a("fc6a"),c=a("06cf").f,f=a("83ab"),h=l(function(){c(1)}),d=!f||h;s({target:"Object",stat:!0,forced:d,sham:!f},{getOwnPropertyDescriptor:function(g,m){return c(u(g),m)}})},e538:function(i,o,a){var s=a("b622");o.f=s},e893:function(i,o,a){var s=a("5135"),l=a("56ef"),u=a("06cf"),c=a("9bf2");i.exports=function(f,h){for(var d=l(h),p=c.f,g=u.f,m=0;m<d.length;m++){var v=d[m];s(f,v)||p(f,v,g(h,v))}}},e8b5:function(i,o,a){var s=a("c6b6");i.exports=Array.isArray||function(u){return s(u)=="Array"}},e95a:function(i,o,a){var s=a("b622"),l=a("3f8c"),u=s("iterator"),c=Array.prototype;i.exports=function(f){return f!==void 0&&(l.Array===f||c[u]===f)}},f5df:function(i,o,a){var s=a("00ee"),l=a("c6b6"),u=a("b622"),c=u("toStringTag"),f=l(function(){return arguments}())=="Arguments",h=function(d,p){try{return d[p]}catch{}};i.exports=s?l:function(d){var p,g,m;return d===void 0?"Undefined":d===null?"Null":typeof(g=h(p=Object(d),c))=="string"?g:f?l(p):(m=l(p))=="Object"&&typeof p.callee=="function"?"Arguments":m}},f772:function(i,o,a){var s=a("5692"),l=a("90e3"),u=s("keys");i.exports=function(c){return u[c]||(u[c]=l(c))}},fb15:function(i,o,a){if(a.r(o),typeof window<"u"){var s=window.document.currentScript;{var l=a("8875");s=l(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:l})}var u=s&&s.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);u&&(a.p=u[1])}a("99af"),a("4de4"),a("4160"),a("c975"),a("d81d"),a("a434"),a("159b"),a("a4d3"),a("e439"),a("dbb4"),a("b64b");function c(H,X,Q){return X in H?Object.defineProperty(H,X,{value:Q,enumerable:!0,configurable:!0,writable:!0}):H[X]=Q,H}function f(H,X){var Q=Object.keys(H);if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(H);X&&(st=st.filter(function(Ft){return Object.getOwnPropertyDescriptor(H,Ft).enumerable})),Q.push.apply(Q,st)}return Q}function h(H){for(var X=1;X<arguments.length;X++){var Q=arguments[X]!=null?arguments[X]:{};X%2?f(Object(Q),!0).forEach(function(st){c(H,st,Q[st])}):Object.getOwnPropertyDescriptors?Object.defineProperties(H,Object.getOwnPropertyDescriptors(Q)):f(Object(Q)).forEach(function(st){Object.defineProperty(H,st,Object.getOwnPropertyDescriptor(Q,st))})}return H}function d(H){if(Array.isArray(H))return H}a("e01a"),a("d28b"),a("e260"),a("d3b7"),a("3ca3"),a("ddb0");function p(H,X){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(H)))){var Q=[],st=!0,Ft=!1,Zt=void 0;try{for(var ne=H[Symbol.iterator](),re;!(st=(re=ne.next()).done)&&(Q.push(re.value),!(X&&Q.length===X));st=!0);}catch(Oe){Ft=!0,Zt=Oe}finally{try{!st&&ne.return!=null&&ne.return()}finally{if(Ft)throw Zt}}return Q}}a("a630"),a("fb6a"),a("b0c0"),a("25f0");function g(H,X){(X==null||X>H.length)&&(X=H.length);for(var Q=0,st=new Array(X);Q<X;Q++)st[Q]=H[Q];return st}function m(H,X){if(!!H){if(typeof H=="string")return g(H,X);var Q=Object.prototype.toString.call(H).slice(8,-1);if(Q==="Object"&&H.constructor&&(Q=H.constructor.name),Q==="Map"||Q==="Set")return Array.from(H);if(Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q))return g(H,X)}}function v(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y(H,X){return d(H)||p(H,X)||m(H,X)||v()}function b(H){if(Array.isArray(H))return g(H)}function w(H){if(typeof Symbol<"u"&&Symbol.iterator in Object(H))return Array.from(H)}function T(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S(H){return b(H)||w(H)||m(H)||T()}var k=a("a352"),E=a.n(k);function P(H){H.parentElement!==null&&H.parentElement.removeChild(H)}function C(H,X,Q){var st=Q===0?H.children[0]:H.children[Q-1].nextSibling;H.insertBefore(X,st)}var A=a("dbf1");a("13d5"),a("4fad"),a("ac1f"),a("5319");function L(H){var X=Object.create(null);return function(st){var Ft=X[st];return Ft||(X[st]=H(st))}}var R=/-(\w)/g,D=L(function(H){return H.replace(R,function(X,Q){return Q.toUpperCase()})});a("5db7"),a("73d9");var F=["Start","Add","Remove","Update","End"],z=["Choose","Unchoose","Sort","Filter","Clone"],Y=["Move"],K=[Y,F,z].flatMap(function(H){return H}).map(function(H){return"on".concat(H)}),et={manage:Y,manageAndEmit:F,emit:z};function Tt(H){return K.indexOf(H)!==-1}a("caad"),a("2ca0");var Ct=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function vt(H){return Ct.includes(H)}function wt(H){return["transition-group","TransitionGroup"].includes(H)}function Kt(H){return["id","class","role","style"].includes(H)||H.startsWith("data-")||H.startsWith("aria-")||H.startsWith("on")}function Z(H){return H.reduce(function(X,Q){var st=y(Q,2),Ft=st[0],Zt=st[1];return X[Ft]=Zt,X},{})}function it(H){var X=H.$attrs,Q=H.componentData,st=Q===void 0?{}:Q,Ft=Z(Object.entries(X).filter(function(Zt){var ne=y(Zt,2),re=ne[0];return ne[1],Kt(re)}));return h(h({},Ft),st)}function tt(H){var X=H.$attrs,Q=H.callBackBuilder,st=Z(bt(X));Object.entries(Q).forEach(function(Zt){var ne=y(Zt,2),re=ne[0],Oe=ne[1];et[re].forEach(function(qt){st["on".concat(qt)]=Oe(qt)})});var Ft="[data-draggable]".concat(st.draggable||"");return h(h({},st),{},{draggable:Ft})}function bt(H){return Object.entries(H).filter(function(X){var Q=y(X,2),st=Q[0];return Q[1],!Kt(st)}).map(function(X){var Q=y(X,2),st=Q[0],Ft=Q[1];return[D(st),Ft]}).filter(function(X){var Q=y(X,2),st=Q[0];return Q[1],!Tt(st)})}a("c740");function kt(H,X){if(!(H instanceof X))throw new TypeError("Cannot call a class as a function")}function It(H,X){for(var Q=0;Q<X.length;Q++){var st=X[Q];st.enumerable=st.enumerable||!1,st.configurable=!0,"value"in st&&(st.writable=!0),Object.defineProperty(H,st.key,st)}}function pt(H,X,Q){return X&&It(H.prototype,X),Q&&It(H,Q),H}var mt=function(X){var Q=X.el;return Q},V=function(X,Q){return X.__draggable_context=Q},j=function(X){return X.__draggable_context},q=function(){function H(X){var Q=X.nodes,st=Q.header,Ft=Q.default,Zt=Q.footer,ne=X.root,re=X.realList;kt(this,H),this.defaultNodes=Ft,this.children=[].concat(S(st),S(Ft),S(Zt)),this.externalComponent=ne.externalComponent,this.rootTransition=ne.transition,this.tag=ne.tag,this.realList=re}return pt(H,[{key:"render",value:function(Q,st){var Ft=this.tag,Zt=this.children,ne=this._isRootComponent,re=ne?{default:function(){return Zt}}:Zt;return Q(Ft,st,re)}},{key:"updated",value:function(){var Q=this.defaultNodes,st=this.realList;Q.forEach(function(Ft,Zt){V(mt(Ft),{element:st[Zt],index:Zt})})}},{key:"getUnderlyingVm",value:function(Q){return j(Q)}},{key:"getVmIndexFromDomIndex",value:function(Q,st){var Ft=this.defaultNodes,Zt=Ft.length,ne=st.children,re=ne.item(Q);if(re===null)return Zt;var Oe=j(re);if(Oe)return Oe.index;if(Zt===0)return 0;var qt=mt(Ft[0]),Wt=S(ne).findIndex(function(Qt){return Qt===qt});return Q<Wt?0:Zt}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),H}(),rt=a("8bbf");function ot(H,X){var Q=H[X];return Q?Q():[]}function yt(H){var X=H.$slots,Q=H.realList,st=H.getKey,Ft=Q||[],Zt=["header","footer"].map(function(Qt){return ot(X,Qt)}),ne=y(Zt,2),re=ne[0],Oe=ne[1],qt=X.item;if(!qt)throw new Error("draggable element must have an item slot");var Wt=Ft.flatMap(function(Qt,ge){return qt({element:Qt,index:ge}).map(function(Se){return Se.key=st(Qt),Se.props=h(h({},Se.props||{}),{},{"data-draggable":!0}),Se})});if(Wt.length!==Ft.length)throw new Error("Item slot must have only one child");return{header:re,footer:Oe,default:Wt}}function xt(H){var X=wt(H),Q=!vt(H)&&!X;return{transition:X,externalComponent:Q,tag:Q?Object(rt.resolveComponent)(H):X?rt.TransitionGroup:H}}function ut(H){var X=H.$slots,Q=H.tag,st=H.realList,Ft=H.getKey,Zt=yt({$slots:X,realList:st,getKey:Ft}),ne=xt(Q);return new q({nodes:Zt,root:ne,realList:st})}function ct(H,X){var Q=this;Object(rt.nextTick)(function(){return Q.$emit(H.toLowerCase(),X)})}function lt(H){var X=this;return function(Q,st){if(X.realList!==null)return X["onDrag".concat(H)](Q,st)}}function Vt(H){var X=this,Q=lt.call(this,H);return function(st,Ft){Q.call(X,st,Ft),ct.call(X,H,st)}}var Rt=null,Ut={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(X){return X}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},Jt=["update:modelValue","change"].concat(S([].concat(S(et.manageAndEmit),S(et.emit)).map(function(H){return H.toLowerCase()}))),ce=Object(rt.defineComponent)({name:"draggable",inheritAttrs:!1,props:Ut,emits:Jt,data:function(){return{error:!1}},render:function(){try{this.error=!1;var X=this.$slots,Q=this.$attrs,st=this.tag,Ft=this.componentData,Zt=this.realList,ne=this.getKey,re=ut({$slots:X,tag:st,realList:Zt,getKey:ne});this.componentStructure=re;var Oe=it({$attrs:Q,componentData:Ft});return re.render(rt.h,Oe)}catch(qt){return this.error=!0,Object(rt.h)("pre",{style:{color:"red"}},qt.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&A.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var X=this;if(!this.error){var Q=this.$attrs,st=this.$el,Ft=this.componentStructure;Ft.updated();var Zt=tt({$attrs:Q,callBackBuilder:{manageAndEmit:function(Oe){return Vt.call(X,Oe)},emit:function(Oe){return ct.bind(X,Oe)},manage:function(Oe){return lt.call(X,Oe)}}}),ne=st.nodeType===1?st:st.parentElement;this._sortable=new E.a(ne,Zt),this.targetDomElement=ne,ne.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var X=this.list;return X||this.modelValue},getKey:function(){var X=this.itemKey;return typeof X=="function"?X:function(Q){return Q[X]}}},watch:{$attrs:{handler:function(X){var Q=this._sortable;!Q||bt(X).forEach(function(st){var Ft=y(st,2),Zt=Ft[0],ne=Ft[1];Q.option(Zt,ne)})},deep:!0}},methods:{getUnderlyingVm:function(X){return this.componentStructure.getUnderlyingVm(X)||null},getUnderlyingPotencialDraggableComponent:function(X){return X.__draggable_component__},emitChanges:function(X){var Q=this;Object(rt.nextTick)(function(){return Q.$emit("change",X)})},alterList:function(X){if(this.list){X(this.list);return}var Q=S(this.modelValue);X(Q),this.$emit("update:modelValue",Q)},spliceList:function(){var X=arguments,Q=function(Ft){return Ft.splice.apply(Ft,S(X))};this.alterList(Q)},updatePosition:function(X,Q){var st=function(Zt){return Zt.splice(Q,0,Zt.splice(X,1)[0])};this.alterList(st)},getRelatedContextFromMoveEvent:function(X){var Q=X.to,st=X.related,Ft=this.getUnderlyingPotencialDraggableComponent(Q);if(!Ft)return{component:Ft};var Zt=Ft.realList,ne={list:Zt,component:Ft};if(Q!==st&&Zt){var re=Ft.getUnderlyingVm(st)||{};return h(h({},re),ne)}return ne},getVmIndexFromDomIndex:function(X){return this.componentStructure.getVmIndexFromDomIndex(X,this.targetDomElement)},onDragStart:function(X){this.context=this.getUnderlyingVm(X.item),X.item._underlying_vm_=this.clone(this.context.element),Rt=X.item},onDragAdd:function(X){var Q=X.item._underlying_vm_;if(Q!==void 0){P(X.item);var st=this.getVmIndexFromDomIndex(X.newIndex);this.spliceList(st,0,Q);var Ft={element:Q,newIndex:st};this.emitChanges({added:Ft})}},onDragRemove:function(X){if(C(this.$el,X.item,X.oldIndex),X.pullMode==="clone"){P(X.clone);return}var Q=this.context,st=Q.index,Ft=Q.element;this.spliceList(st,1);var Zt={element:Ft,oldIndex:st};this.emitChanges({removed:Zt})},onDragUpdate:function(X){P(X.item),C(X.from,X.item,X.oldIndex);var Q=this.context.index,st=this.getVmIndexFromDomIndex(X.newIndex);this.updatePosition(Q,st);var Ft={element:this.context.element,oldIndex:Q,newIndex:st};this.emitChanges({moved:Ft})},computeFutureIndex:function(X,Q){if(!X.element)return 0;var st=S(Q.to.children).filter(function(re){return re.style.display!=="none"}),Ft=st.indexOf(Q.related),Zt=X.component.getVmIndexFromDomIndex(Ft),ne=st.indexOf(Rt)!==-1;return ne||!Q.willInsertAfter?Zt:Zt+1},onDragMove:function(X,Q){var st=this.move,Ft=this.realList;if(!st||!Ft)return!0;var Zt=this.getRelatedContextFromMoveEvent(X),ne=this.computeFutureIndex(Zt,X),re=h(h({},this.context),{},{futureIndex:ne}),Oe=h(h({},X),{},{relatedContext:Zt,draggedContext:re});return st(Oe,Q)},onDragEnd:function(){Rt=null}}}),we=ce;o.default=we},fb6a:function(i,o,a){var s=a("23e7"),l=a("861d"),u=a("e8b5"),c=a("23cb"),f=a("50c4"),h=a("fc6a"),d=a("8418"),p=a("b622"),g=a("1dde"),m=a("ae40"),v=g("slice"),y=m("slice",{ACCESSORS:!0,0:0,1:2}),b=p("species"),w=[].slice,T=Math.max;s({target:"Array",proto:!0,forced:!v||!y},{slice:function(k,E){var P=h(this),C=f(P.length),A=c(k,C),L=c(E===void 0?C:E,C),R,D,F;if(u(P)&&(R=P.constructor,typeof R=="function"&&(R===Array||u(R.prototype))?R=void 0:l(R)&&(R=R[b],R===null&&(R=void 0)),R===Array||R===void 0))return w.call(P,A,L);for(D=new(R===void 0?Array:R)(T(L-A,0)),F=0;A<L;A++,F++)A in P&&d(D,F,P[A]);return D.length=F,D}})},fc6a:function(i,o,a){var s=a("44ad"),l=a("1d80");i.exports=function(u){return s(l(u))}},fdbc:function(i,o){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(i,o,a){var s=a("4930");i.exports=s&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(lB);const ret=nB(lB.exports),net={setup(){const e=ee(),t=At();return{userStore:e,gameStore:t}},props:{ik:Number,external_link:{type:Boolean,default:!1},with_name:{type:Boolean,default:!1}}},iet=["href"],oet=["src","data-key"];function aet(e,t,r,n,i,o){return I(),O("a",{href:n.userStore.itemUrl+r.ik},[_("img",{src:`data/icons/item/${r.ik}.webp`,class:"iconitem","data-key":r.ik},null,8,oet),r.with_name&&n.gameStore.ready?(I(),O(W,{key:0},[$(M(n.gameStore.uloc.item[r.ik]),1)],64)):nt("",!0)],8,iet)}const no=le(net,[["render",aet]]),set={setup(){const e=ee();return{gameStore:At(),userStore:e}},props:{w:Object},components:{ItemIcon:no},methods:{formatFixed:dt,extractNumbers:cI,workshop_text(e){const t=e.tnk,r=this.gameStore.uloc.char[e.job.hk];let n=cI(r);if(t){const i=this.gameStore.houseInfo[e.job.hk].affTown,o=this.gameStore.tk2tnk(i);t!=o&&(n=this.gameStore.nodeName(o)+" "+n)}return`${n} ${this.userStore.userWorkshops[e.job.hk].label}`}}},uet=$(" idle "),cet=$(" UNKNOWN_JOBTYPE ");function fet(e,t,r,n,i,o){const a=Gt("ItemIcon");return n.gameStore.jobIsIdle(r.w.job)?(I(),O(W,{key:0},[uet],64)):n.gameStore.jobIsPz(r.w.job)?(I(),O(W,{key:1},[$(M(n.gameStore.uloc.node[r.w.job.pzk]),1)],64)):n.gameStore.jobIsFarming(r.w.job)?(I(),O(W,{key:2},[$(" ["+M(n.gameStore.jobIcon(r.w.job))+"] ",1)],64)):n.gameStore.jobIsCustom(r.w.job)?(I(),O(W,{key:3},[$(" ["+M(n.gameStore.jobIcon(r.w.job))+"] "+M(r.w.job.label),1)],64)):n.gameStore.jobIsWorkshop(r.w.job)?(I(),O(W,{key:4},[r.w.job.recipe&&n.gameStore.craftOutputs[r.w.job.recipe]?(I(!0),O(W,{key:0},Pt(n.gameStore.craftOutputs[r.w.job.recipe],s=>(I(),qr(a,{ik:s},null,8,["ik"]))),256)):(I(),O(W,{key:1},[$(" ["+M(n.gameStore.jobIcon(r.w.job))+"] ",1)],64)),$(" "+M(o.workshop_text(r.w)),1)],64)):(I(),O(W,{key:5},[cet],64))}const Mb=le(set,[["render",fet]]);const het={setup(){const e=At(),t=ee();return{gameStore:e,userStore:t}},props:{w:Object,homeless:Boolean,unsendable:Boolean},emits:["panToPaPos","send","edit"],components:{WorkerJobDescription:Mb},data:()=>({}),methods:{formatFixed:dt,percentageToColor:ZQ}},det=e=>(er("data-v-df4b03fd"),e=e(),rr(),e),pet={key:0,class:"fss"},get={key:1},vet={key:0,class:"fss"},met={key:1},yet={key:0,class:"fss"},_et={key:1},bet={class:"center"},wet=$(" @ "),Tet=$(" idle "),ket={class:"center"},Pet={key:0},Eet=det(()=>_("button",{title:"Ancado is not activated, can't house workers",disabled:"true"},"send",-1)),Cet=[Eet];function Aet(e,t,r,n,i,o){const a=Gt("WorkerJobDescription");return I(),O("tr",null,[_("td",null,[_("button",{onClick:t[0]||(t[0]=s=>e.$emit("fire"))},"fire")]),_("td",null,M(n.userStore.workerLabel(r.w)),1),_("td",{style:cs(this.userStore.prerelease_colorGoblins&&r.w.charkey==7572&&{backgroundColor:o.percentageToColor(this.userStore.workerStatsForDisplay(r.w).wspd,this.userStore.workersMinMaxStats.wspd.lo,this.userStore.workersMinMaxStats.wspd.hi,.2)})},[this.userStore.displayWorkerStatsRank?(I(),O("span",pet,M(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).wspd,1))+"% ",1)):(I(),O("span",get,M(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).wspd,2)),1))],4),_("td",{style:cs(this.userStore.prerelease_colorGoblins&&r.w.charkey==7572&&{backgroundColor:o.percentageToColor(this.userStore.workerStatsForDisplay(r.w).mspd,this.userStore.workersMinMaxStats.mspd.lo,this.userStore.workersMinMaxStats.mspd.hi,.2)})},[this.userStore.displayWorkerStatsRank?(I(),O("span",vet,M(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).mspd,1))+"% ",1)):(I(),O("span",met,M(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).mspd,2)),1))],4),_("td",{style:cs(this.userStore.prerelease_colorGoblins&&r.w.charkey==7572&&{backgroundColor:o.percentageToColor(this.userStore.workerStatsForDisplay(r.w).luck,this.userStore.workersMinMaxStats.luck.lo,this.userStore.workersMinMaxStats.luck.hi,.2)})},[this.userStore.displayWorkerStatsRank?(I(),O("span",yet,M(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).luck,1))+"% ",1)):(I(),O("span",_et,M(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).luck,2)),1))],4),_("td",bet,[_("button",{onClick:t[1]||(t[1]=s=>e.$emit("edit"))},"edit")]),_("td",null,[r.w.job?(I(),O(W,{key:0},[n.gameStore.jobIsPz(r.w.job)?(I(),O("span",{key:0,onClick:t[2]||(t[2]=s=>e.$emit("panToPaPos",this.gameStore.nodes[r.w.job.pzk].pos)),class:"clickable"},[ht(a,{w:r.w},null,8,["w"])])):(I(),qr(a,{key:1,w:r.w},null,8,["w"])),wet,n.userStore.displayProfitPerCp?(I(),O(W,{key:2},[$(M(o.formatFixed(n.userStore.workerIncomePerCp(r.w),2))+" M$/day/CP ",1)],64)):(I(),O(W,{key:3},[$(M(o.formatFixed(n.userStore.workerIncome(r.w),2))+" M$/day ",1)],64))],64)):(I(),O(W,{key:1},[Tet],64))]),_("td",ket,[r.w.job?(I(),O("button",{key:0,onClick:t[3]||(t[3]=s=>r.w.job=null)},"stop")):(I(),O(W,{key:1},[r.unsendable?(I(),O("div",Pet,Cet)):(I(),O("button",{key:1,onClick:t[4]||(t[4]=s=>e.$emit("send"))},"send"))],64))])])}const qC=le(het,[["render",Aet],["__scopeId","data-v-df4b03fd"]]);const xet={setup(){const e=At(),t=ee();return{gameStore:e,userStore:t}},props:{o:Object,tk:Number},emits:["selectLodging","selectHouses","hireWorker","editWorker","sendWorker","panToPaPos"],components:{Worker:qC},data:()=>({}),computed:{infra(){if(this.tk in this.userStore.townsInfra)return this.userStore.townsInfra[this.tk];throw console.log(this.userStore.townsInfra),new Error(`no infra for town: ${this.tk}`)}},methods:{formatFixed:dt,fireWorker(e){this.userStore.userWorkers=this.userStore.userWorkers.filter(t=>t!=e)}}},JC=e=>(er("data-v-bae92347"),e=e(),rr(),e),Met={colspan:"2"},Iet=$(" worker "),Let=$(" workers not hireable "),Oet=JC(()=>_("th",{class:"center"},"\u{1F528}",-1)),Ret=JC(()=>_("th",{class:"center"},"\u{1F9B6}",-1)),Det=JC(()=>_("th",{class:"center"},"\u{1F340}",-1)),Net=$(" \xA0 ");function Fet(e,t,r,n,i,o){const a=Gt("Worker");return I(),O(W,null,[_("thead",null,[_("tr",null,[_("th",Met,[r.o?(I(),O(W,{key:0},[Iet,_("button",{onClick:t[0]||(t[0]=s=>this.$emit("hireWorker",r.tk))}," hire ")],64)):(I(),O(W,{key:1},[Let],64))]),Oet,Ret,Det,_("th",{colspan:"3",class:Ur({unresolved:n.gameStore.ready&&o.infra.success==!1})},[_("span",{onClick:t[1]||(t[1]=s=>e.$emit("panToPaPos",this.gameStore.nodes[this.gameStore.tk2tnk(r.tk)].pos)),class:"bold clickable"},M(n.gameStore.nodeName(n.gameStore.tk2tnk(r.tk))),1),$(" "+M()+" ",1),n.userStore.displayProfitPerCp?(I(),O(W,{key:0},[$(M(o.formatFixed(n.userStore.townsTotalIncome[r.tk]&&n.userStore.townsTotalIncome[r.tk].eff,2))+" M$/day/CP ",1)],64)):(I(),O(W,{key:1},[$(M(o.formatFixed(n.userStore.townsTotalIncome[r.tk]&&n.userStore.townsTotalIncome[r.tk].income,1))+" M$/day ",1)],64)),Net,_("span",null,[$(M(n.userStore.townWorkingWorkers(r.tk).length)+" \u{1F6CF}\uFE0F ",1),_("span",null,M(n.userStore.townsStoreItemkeys[r.tk]&&n.userStore.townsStoreItemkeys[r.tk].size),1),$(" \u{1F4E6} "+M(n.gameStore.ready&&n.userStore.townsInfra[r.tk].cost+(r.tk in n.userStore.customJobsCp?n.userStore.customJobsCp[r.tk]:0))+" CP ",1),_("button",{onClick:t[2]||(t[2]=s=>this.$emit("selectHouses",r.tk)),class:Ur({unresolved:n.gameStore.ready&&n.userStore.townsInfra[r.tk].success==!1})}," config ",2)])],2)])]),_("tbody",null,[(I(!0),O(W,null,Pt(n.userStore.userWorkers.filter(s=>n.gameStore.tnk2tk(s.tnk)==r.tk),(s,l)=>(I(),qr(a,{w:s,homeless:!0,class:Ur({homeless:0}),unsendable:r.tk==619&&!n.userStore.activateAncado,onFire:u=>o.fireWorker(s),onEdit:u=>this.$emit("editWorker",s),onSend:u=>this.$emit("sendWorker",s),onPanToPaPos:t[3]||(t[3]=u=>this.$emit("panToPaPos",u))},null,8,["w","class","unsendable","onFire","onEdit","onSend"]))),256))])],64)}const bB=le(xet,[["render",Fet],["__scopeId","data-v-bae92347"]]);const $et={setup(){const e=At(),t=ee(),r=mr();return{gameStore:e,userStore:t,routingStore:r}},props:{pzk:Number,redirect:Number},emits:[],data:()=>({homeTnk:1,workerKind:"gob",selectedWorkerIndices:{},selectedWorkerPZSEs:{}}),methods:{formatFixed:dt,workerStats(e,t){return e=="gia"?this.gameStore.medianGiant(t):e=="hum"?this.gameStore.medianHuman(t):this.gameStore.medianGoblin(t)},profitTownStats(e,t){return this.gameStore.profitPzTownStats(this.pzk,e,t.wspd+5,t.mspd,t.luck,t.isGiant)},assignWorker(e){if(!e.storageTnk)throw Error("no storage");const t=JSON.parse(JSON.stringify(e.w));this.userStore.userWorkers.push(t),this.userStore.assignWorker(t,{kind:"plantzone",pzk:e.pz.key,storage:e.storageTnk})}},computed:{workerKinds(){const e=[];for(const t of["gia","hum","gob"]){const r={kind:t,stats:this.workerStats(t,this.homeTnk)};r.profit=this.profitTownStats(this.homeTnk,r.stats),e.push(r)}return e.sort((t,r)=>r.profit.priceDaily-t.profit.priceDaily),e},selectedWorkerStats(){return this.workerStats(this.workerKind,this.homeTnk)},nearestTowns(){const t=[];return this.gameStore.dijkstraNearestTowns(this.pzk,5,this.routingStore.routing.autotakenNodes,!0).forEach(([n,i,o])=>{const a=[],s=this.gameStore._tnk2tk[n],l=this.redirect==-1?s:this.gameStore.tnk2tk(this.redirect),u=this.userStore.townInfraAddCost(s,1,this.gameStore.plantzones[this.pzk].itemkeys,l);for(const c of["gia","hum","gob"]){const f=this.workerStats(c,n),h={tk:s,tnk:n,charkey:f.charkey,label:this.userStore.newWorkerName(s),level:f.level,wspdSheet:f.wspd,mspdSheet:f.mspd,luckSheet:f.luck,skills:[],job:null};h.skills.push(1011);const d=this.gameStore.workerStatsOnPlantzone(h),p=this.gameStore.profitPzTownStats(this.pzk,n,d.wspd,d.mspd,d.luck,this.gameStore.isGiant(h.charkey));if(p.dist>1e6)return;const g={pz:this.gameStore.plantzones[this.pzk],tnk:n,mapCp:i,path:o,townCp:u.cost,infraTooltip:u.tooltip,cp:i+u.cost,profit:p,w:h,statsOnPz:d,storageTnk:this.gameStore.tk2tnk(u.storageTk)};g.dailyPerCp=g.profit.priceDaily/(i+u.cost),g.effDelta=this.userStore.jobEfficiencyDelta(g.profit.priceDaily,i+u.cost);const m={kind:c,stats:f,PZSE:g};a.push(m)}a.length!=0&&(a.sort((c,f)=>f.PZSE.profit.priceDaily-c.PZSE.profit.priceDaily),this.selectedWorkerIndices[n]=0,t.push({tnk:n,workerKinds:a}))}),t.sort((n,i)=>i.workerKinds[0].PZSE.dailyPerCp-n.workerKinds[0].PZSE.dailyPerCp),t}}},wB=e=>(er("data-v-2d2b362f"),e=e(),rr(),e),Bet=wB(()=>_("h4",null,"Nearest towns with hireable workers:",-1)),zet={key:0},Vet=wB(()=>_("tr",null,[_("th",null,"\u{1F6CF}\uFE0Ftown"),_("th",null,"walk"),_("th",null,[$("make new level 40 artisan "),_("abbr",{class:"tooltip",title:"with median stats and a single +5\u{1F528} skill"},"\u2139")]),_("th",null,[$("+CP "),_("abbr",{class:"tooltip",title:"node connection + town housing = total"},"\u2139")]),_("th",null,"M$/day/CP"),_("th",null,"action")],-1)),Uet={class:"center"},Wet=["onUpdate:modelValue"],jet=["value"],Get={class:"center"},Het=["title"],Xet=$("+"),Yet=["title"],Ket={class:"center"},Zet={key:0,title:"plantzone already occupied",disabled:"true"},qet={key:1,title:"Can't find housing, try P2W",disabled:"true"},Jet={key:2,title:"No walk path",disabled:"true"},Qet={key:3,title:"Ancado is not activated, can't house workers",disabled:"true"},trt=["onClick"],ert={key:1};function rrt(e,t,r,n,i,o){return I(),O("div",null,[Bet,this.nearestTowns?(I(),O("table",zet,[Vet,(I(!0),O(W,null,Pt(this.nearestTowns,a=>(I(),O("tr",null,[_("td",null,M(n.gameStore.uloc.node[a.tnk]),1),_("td",Uet,M(o.formatFixed(a.workerKinds[e.selectedWorkerIndices[a.tnk]].PZSE.profit.dist)),1),_("td",null,[at(_("select",{"onUpdate:modelValue":s=>e.selectedWorkerIndices[a.tnk]=s},[(I(!0),O(W,null,Pt(a.workerKinds,(s,l)=>(I(),O("option",{value:l},M(n.gameStore.uloc.char[s.stats.charkey])+" ("+M(o.formatFixed(s.PZSE.profit.priceDaily,2))+" M$/day) ",9,jet))),256))],8,Wet),[[cr,e.selectedWorkerIndices[a.tnk]]])]),_("td",Get,[_("abbr",{class:"tooltip",title:Array.from(a.workerKinds[e.selectedWorkerIndices[a.tnk]].PZSE.path,s=>`${n.routingStore.routing.autotakenNodes.has(s)?0:n.gameStore.nodes[s].CP} ${n.gameStore.uloc.node[s]}`).join(`
`)},M(a.workerKinds[e.selectedWorkerIndices[a.tnk]].PZSE.mapCp),9,Het),Xet,_("abbr",{class:"tooltip",title:a.workerKinds[e.selectedWorkerIndices[a.tnk]].PZSE.infraTooltip},M(o.formatFixed(a.workerKinds[e.selectedWorkerIndices[a.tnk]].PZSE.townCp)),9,Yet),$("="+M(o.formatFixed(a.workerKinds[e.selectedWorkerIndices[a.tnk]].PZSE.cp)),1)]),_("td",Ket,M(o.formatFixed(a.workerKinds[e.selectedWorkerIndices[a.tnk]].PZSE.dailyPerCp,3)),1),_("td",null,[n.userStore.workedPlantzones.has(r.pzk.toString())?(I(),O("button",Zet,"hire+assign")):isNaN(a.workerKinds[e.selectedWorkerIndices[a.tnk]].PZSE.townCp)?(I(),O("button",qet,"hire+assign")):isNaN(a.workerKinds[e.selectedWorkerIndices[a.tnk]].PZSE.profit.dist)?(I(),O("button",Jet,"hire+assign")):n.gameStore.tnk2tk(a.tnk)&&n.gameStore.tnk2tk(a.tnk)==619&&!n.userStore.activateAncado?(I(),O("button",Qet,"hire+assign")):(I(),O("button",{key:4,onClick:s=>o.assignWorker(a.workerKinds[e.selectedWorkerIndices[a.tnk]].PZSE)}," hire+assign ",8,trt))])]))),256))])):(I(),O("span",ert," None "))])}const nrt=le($et,[["render",rrt],["__scopeId","data-v-2d2b362f"]]);const irt={setup(){const e=At(),t=ee(),r=mr(),n=ii();return{gameStore:e,userStore:t,routingStore:r,marketStore:n}},props:{pzk:Number},emits:["showResourceDialog","editWorker"],components:{MakeAWorker:nrt,ItemIcon:no},data:()=>({selectedRedirect:-1}),methods:{formatFixed:dt,plantzoneNearestTownsFreeWorkersProfits(e,t){const r=[];return this.gameStore.dijkstraNearestTowns(e,t,this.routingStore.routing.autotakenNodes,!0).forEach(([i,o,a])=>{const s=this.gameStore._tnk2tk[i];this.userStore.getFreeWorkers(s).forEach(u=>{const c=this.gameStore.workerStatsOnPlantzone(u),f=this.selectedRedirect==-1?s:this.gameStore.tnk2tk(this.selectedRedirect),h=this.gameStore.pzSelectionEntry(e,s,i,o,a,u,c,f);r.push(h)})}),r.sort((i,o)=>o.dailyPerCp-i.dailyPerCp),r}},computed:{freeWorkers(){return this.plantzoneNearestTownsFreeWorkersProfits(this.pzk,99).filter(n=>n.profit.dist<1e6).filter((n,i,o)=>i===o.findIndex(a=>a.tnk===n.tnk&&JSON.stringify(a.statsOnPz)===JSON.stringify(n.statsOnPz)))}}},Zl=e=>(er("data-v-2f625ecc"),e=e(),rr(),e),ort={key:0},art=["title"],srt=Zl(()=>_("abbr",{class:"tooltip",title:"how much more $ a lucky cycle brings vs unlucky"},"x",-1)),lrt=$("] "),urt=$(" workload: "),crt=$("% resource "),frt={id:"plantzoneWorkerInfo"},hrt=Zl(()=>_("br",null,null,-1)),drt=["title"],prt=Zl(()=>_("br",null,null,-1)),grt=["title"],vrt=Zl(()=>_("br",null,null,-1)),mrt=Zl(()=>_("abbr",{class:"tooltip",title:"income / (connectionCost + lodgageCost)"},"\u2139",-1)),yrt=$(" worker: none "),_rt={class:"spaced-columns"},brt=$("Nearest towns with idle workers: "),wrt=$("None"),Srt={style:{"margin-right":"6px"}},Trt=$("stash at: "),krt=Zl(()=>_("option",{value:"-1"},"worker hometown",-1)),Prt=Zl(()=>_("option",{value:"0"},"cheapest storage \u{1F9CA}",-1)),Ert=["value"],Crt={key:0},Art=Zl(()=>_("tr",null,[_("th",null,"town"),_("th",null,"walk"),_("th",null,[$("worker "),_("abbr",{class:"tooltip",title:"same town&stat workers are hidden in this view"},"\u2139")]),_("th",null,"+M$/day"),_("th",null,[$("+CP "),_("abbr",{class:"tooltip",title:"node connection + town housing = total"},"\u2139")]),_("th",null,"M$/day/CP"),_("th",null,"action")],-1)),xrt={class:"fsxs"},Mrt={class:"center"},Irt=["title"],Lrt=$("+"),Ort=["title"],Rrt={class:"center"},Drt={key:0,title:"plantzone already occupied",disabled:"true"},Nrt={key:1,title:"Can't resolve housing",disabled:"true"},Frt={key:2,title:"Ancado is not activated, can't house workers",disabled:"true"},$rt=["onClick"];function Brt(e,t,r,n,i,o){const a=Gt("RouterLink"),s=Gt("ItemIcon"),l=Gt("MakeAWorker");return I(),O(W,null,[_("div",null,[ht(a,{tag:"a",to:{path:"./plantzones",hash:"#drops"+r.pzk}},{default:Fe(()=>[$(M(n.gameStore.plantzoneName(r.pzk)),1)]),_:1},8,["to"]),$(" "+M(this.gameStore.nodes[r.pzk].CP)+"CP ",1),r.pzk in this.gameStore.plantzones?(I(),O("span",ort,[(I(!0),O(W,null,Pt(this.gameStore.plantzones[r.pzk].itemkeys,u=>(I(),qr(a,{tag:"a",to:{path:"./settings",hash:"#item"+u}},{default:Fe(()=>[_("abbr",{title:n.gameStore.itemName(u)+" "+o.formatFixed(n.marketStore.prices[u])+"$"},[ht(s,{ik:Number(u)},null,8,["ik"])],8,art)]),_:2},1032,["to"]))),256)),$(" [\u{1F340}"+M(o.formatFixed(this.gameStore.plantzones[r.pzk].lucky?this.gameStore.plantzones[r.pzk].luckyValue/this.gameStore.plantzones[r.pzk].unluckyValue:1,2)),1),srt,lrt])):nt("",!0)]),_("div",null,[urt,n.gameStore.ready&&n.gameStore.plantzones[r.pzk].regiongroup&&n.userStore.allowFloating&&n.userStore.useFloatingResources[n.gameStore.plantzones[r.pzk].regiongroup]?(I(),O(W,{key:0},[$(" ~"+M(o.formatFixed(n.userStore.medianWorkloads[r.pzk],2))+" ",1),_("button",{onClick:t[0]||(t[0]=u=>e.$emit("showResourceDialog",r.pzk))},"review")],64)):(I(),O(W,{key:1},[$(M(o.formatFixed(n.gameStore.plantzones[r.pzk].activeWorkload,2))+" \u2190 ",1),at(_("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=u=>n.userStore.regionResources[n.gameStore.plantzones[r.pzk].regiongroup]=u),min:"0",max:"100",step:"0.1",class:"w42em"},null,512),[[zt,n.userStore.regionResources[n.gameStore.plantzones[r.pzk].regiongroup],void 0,{number:!0}]]),crt],64))]),_("div",frt,[n.userStore.workedPlantzones.has(r.pzk.toString())?(I(),O(W,{key:0},[$(" worker: "+M(this.routingStore.pzJobs[r.pzk].worker.label)+" @ "+M(o.formatFixed(this.routingStore.pzJobs[r.pzk].profit.priceDaily,3))+" M$/day ",1),n.userStore.workedPlantzones.has(r.pzk.toString())?(I(),O(W,{key:0},[_("button",{onClick:t[2]||(t[2]=u=>e.$emit("editWorker",this.routingStore.pzJobs[r.pzk].worker))}," edit "),_("button",{onClick:t[3]||(t[3]=u=>this.routingStore.pzJobs[r.pzk].worker.job=null)}," stop ")],64)):nt("",!0),hrt,$(" connection cost: "+M(o.formatFixed(this.routingStore.pzjobsSharedConnectionCP[r.pzk].value,3))+" CP ",1),_("abbr",{class:"tooltip",title:`full cost of this node + \u03A3 of connection nodes costs shared proportionally between all active jobs using them
`+this.routingStore.pzjobsSharedConnectionCP[r.pzk].tooltip},"\u2139",8,drt),prt,$(" lodgage cost: "+M(o.formatFixed(n.userStore.workerSharedLodgageCP(this.routingStore.pzJobs[r.pzk].worker).value,3))+" CP ",1),_("abbr",{class:"tooltip",title:n.userStore.workerSharedLodgageCP(this.routingStore.pzJobs[r.pzk].worker).tooltip},"\u2139",8,grt),vrt,$(" efficiency: "+M(o.formatFixed(n.userStore.workerIncomePerCp(this.routingStore.pzJobs[r.pzk].worker),3))+" M$/day/CP ",1),mrt],64)):(I(),O(W,{key:1},[yrt],64))]),_("div",null,[_("div",_rt,[_("div",null,[_("h4",null,[brt,o.freeWorkers.length==0?(I(),O(W,{key:0},[wrt],64)):nt("",!0)])]),_("div",Srt,[Trt,at(_("select",{"onUpdate:modelValue":t[4]||(t[4]=u=>e.selectedRedirect=u)},[krt,Prt,(I(!0),O(W,null,Pt(n.gameStore.townsWithRedirectableStorage,u=>(I(),O("option",{value:u},M(n.gameStore.uloc.node[u]),9,Ert))),256))],512),[[cr,e.selectedRedirect]])])]),o.freeWorkers.length>0?(I(),O("table",Crt,[Art,(I(!0),O(W,null,Pt(o.freeWorkers,u=>(I(),O("tr",null,[_("td",null,M(n.gameStore.nodeName(u.tnk)),1),_("td",null,M(o.formatFixed(u.profit.dist)),1),_("td",null,[$(M(u.w.label)+" ",1),_("span",xrt,M(o.formatFixed(u.statsOnPz.wspd,2))+"\u{1F528} "+M(o.formatFixed(u.statsOnPz.mspd,2))+"\u{1F9B6} "+M(o.formatFixed(u.statsOnPz.luck,2))+"\u{1F340} ",1)]),_("td",Mrt,M(o.formatFixed(u.profit.priceDaily,2)),1),_("td",null,[_("abbr",{class:"tooltip",title:Array.from(u.path,c=>`${n.routingStore.routing.autotakenNodes.has(c)?0:n.gameStore.nodes[c].CP} ${n.gameStore.uloc.node[c]}`).join(`
`)},M(u.mapCp),9,Irt),Lrt,_("abbr",{class:"tooltip",title:u.infraTooltip},M(o.formatFixed(u.townCp)),9,Ort),$("="+M(o.formatFixed(u.cp)),1)]),_("td",Rrt,M(o.formatFixed(u.dailyPerCp,3)),1),_("td",null,[n.userStore.workedPlantzones.has(r.pzk.toString())?(I(),O("button",Drt,"assign")):isNaN(u.townCp)?(I(),O("button",Nrt,"assign")):n.gameStore.tnk2tk(u.w.tnk)&&n.gameStore.tnk2tk(u.w.tnk)==619&&!n.userStore.activateAncado?(I(),O("button",Frt,"assign")):(I(),O("button",{key:3,onClick:c=>n.userStore.assignWorker(u.w,{kind:"plantzone",pzk:u.pz.key,storage:u.storageTnk})}," assign ",8,$rt))])]))),256))])):nt("",!0),ht(l,{pzk:r.pzk,redirect:Number(e.selectedRedirect)},null,8,["pzk","redirect"])])],64)}const SB=le(irt,[["render",Brt],["__scopeId","data-v-2f625ecc"]]);const zrt={name:"modalDialog",props:{show:{type:Boolean,default:!1}},methods:{}};function Vrt(e,t,r,n,i,o){return at((I(),O("div",{onClick:t[1]||(t[1]=zh(a=>this.$emit("update:show",!1),["stop"])),class:"dialog"},[_("div",{onClick:t[0]||(t[0]=zh(()=>{},["stop"])),class:"dialog_content"},[WF(e.$slots,"default",{},void 0,!0)])],512)),[[UC,r.show]])}const QC=le(zrt,[["render",Vrt],["__scopeId","data-v-dea74574"]]);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $k=function(e,t){return $k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},$k(e,t)};function Ot(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");$k(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Urt=function(){function e(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return e}(),Wrt=function(){function e(){this.browser=new Urt,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return e}(),Gu=new Wrt;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(Gu.wxa=!0,Gu.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?Gu.worker=!0:typeof navigator>"u"?(Gu.node=!0,Gu.svgSupported=!0):jrt(navigator.userAgent,Gu);function jrt(e,t){var r=t.browser,n=e.match(/Firefox\/([\d.]+)/),i=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/),o=e.match(/Edge?\/([\d.]+)/),a=/micromessenger/i.test(e);n&&(r.firefox=!0,r.version=n[1]),i&&(r.ie=!0,r.version=i[1]),o&&(r.edge=!0,r.version=o[1],r.newEdge=+o[1].split(".")[0]>18),a&&(r.weChat=!0),t.svgSupported=typeof SVGRect<"u",t.touchEventsSupported="ontouchstart"in window&&!r.ie&&!r.edge,t.pointerEventsSupported="onpointerdown"in window&&(r.edge||r.ie&&+r.version>=11),t.domSupported=typeof document<"u";var s=document.documentElement.style;t.transform3dSupported=(r.ie&&"transition"in s||r.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in s)&&!("OTransition"in s),t.transformSupported=t.transform3dSupported||r.ie&&+r.version>=9}const me=Gu;var tA=12,Grt="sans-serif",wc=tA+"px "+Grt,Hrt=20,Xrt=100,Yrt="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function Krt(e){var t={};if(typeof JSON>"u")return t;for(var r=0;r<e.length;r++){var n=String.fromCharCode(r+32),i=(e.charCodeAt(r)-Hrt)/Xrt;t[n]=i}return t}var Zrt=Krt(Yrt),Vc={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var e,t;return function(r,n){if(!e){var i=Vc.createCanvas();e=i&&i.getContext("2d")}if(e)return t!==n&&(t=e.font=n||wc),e.measureText(r);r=r||"",n=n||wc;var o=/^([0-9]*?)px$/.exec(n),a=+(o&&o[1])||tA,s=0;if(n.indexOf("mono")>=0)s=a*r.length;else for(var l=0;l<r.length;l++){var u=Zrt[r[l]];s+=u==null?a:u*a}return{width:s}}}(),loadImage:function(e,t,r){var n=new Image;return n.onload=t,n.onerror=r,n.src=e,n}},TB=Uc(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(e,t){return e["[object "+t+"]"]=!0,e},{}),kB=Uc(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(e,t){return e["[object "+t+"Array]"]=!0,e},{}),ad=Object.prototype.toString,Ib=Array.prototype,qrt=Ib.forEach,Jrt=Ib.filter,eA=Ib.slice,Qrt=Ib.map,PI=function(){}.constructor,K0=PI?PI.prototype:null,rA="__proto__",tnt=2311;function PB(){return tnt++}function nA(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];typeof console<"u"&&console.error.apply(console,e)}function oe(e){if(e==null||typeof e!="object")return e;var t=e,r=ad.call(e);if(r==="[object Array]"){if(!Rg(e)){t=[];for(var n=0,i=e.length;n<i;n++)t[n]=oe(e[n])}}else if(kB[r]){if(!Rg(e)){var o=e.constructor;if(o.from)t=o.from(e);else{t=new o(e.length);for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}}}else if(!TB[r]&&!Rg(e)&&!a_(e)){t={};for(var a in e)e.hasOwnProperty(a)&&a!==rA&&(t[a]=oe(e[a]))}return t}function Ie(e,t,r){if(!Yt(t)||!Yt(e))return r?oe(t):e;for(var n in t)if(t.hasOwnProperty(n)&&n!==rA){var i=e[n],o=t[n];Yt(o)&&Yt(i)&&!St(o)&&!St(i)&&!a_(o)&&!a_(i)&&!EI(o)&&!EI(i)&&!Rg(o)&&!Rg(i)?Ie(i,o,r):(r||!(n in e))&&(e[n]=oe(t[n]))}return e}function ent(e,t){for(var r=e[0],n=1,i=e.length;n<i;n++)r=Ie(r,e[n],t);return r}function _t(e,t){if(Object.assign)Object.assign(e,t);else for(var r in t)t.hasOwnProperty(r)&&r!==rA&&(e[r]=t[r]);return e}function Ee(e,t,r){for(var n=ze(t),i=0;i<n.length;i++){var o=n[i];(r?t[o]!=null:e[o]==null)&&(e[o]=t[o])}return e}Vc.createCanvas;function De(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r}return-1}function rnt(e,t){var r=e.prototype;function n(){}n.prototype=t.prototype,e.prototype=new n;for(var i in r)r.hasOwnProperty(i)&&(e.prototype[i]=r[i]);e.prototype.constructor=e,e.superClass=t}function zo(e,t,r){if(e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames)for(var n=Object.getOwnPropertyNames(t),i=0;i<n.length;i++){var o=n[i];o!=="constructor"&&(r?t[o]!=null:e[o]==null)&&(e[o]=t[o])}else Ee(e,t,r)}function In(e){return!e||typeof e=="string"?!1:typeof e.length=="number"}function U(e,t,r){if(!!(e&&t))if(e.forEach&&e.forEach===qrt)e.forEach(t,r);else if(e.length===+e.length)for(var n=0,i=e.length;n<i;n++)t.call(r,e[n],n,e);else for(var o in e)e.hasOwnProperty(o)&&t.call(r,e[o],o,e)}function Bt(e,t,r){if(!e)return[];if(!t)return iA(e);if(e.map&&e.map===Qrt)return e.map(t,r);for(var n=[],i=0,o=e.length;i<o;i++)n.push(t.call(r,e[i],i,e));return n}function Uc(e,t,r,n){if(!!(e&&t)){for(var i=0,o=e.length;i<o;i++)r=t.call(n,r,e[i],i,e);return r}}function ln(e,t,r){if(!e)return[];if(!t)return iA(e);if(e.filter&&e.filter===Jrt)return e.filter(t,r);for(var n=[],i=0,o=e.length;i<o;i++)t.call(r,e[i],i,e)&&n.push(e[i]);return n}function ze(e){if(!e)return[];if(Object.keys)return Object.keys(e);var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}function nnt(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return function(){return e.apply(t,r.concat(eA.call(arguments)))}}var se=K0&&ue(K0.bind)?K0.call.bind(K0.bind):nnt;function We(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(){return e.apply(this,t.concat(eA.call(arguments)))}}function St(e){return Array.isArray?Array.isArray(e):ad.call(e)==="[object Array]"}function ue(e){return typeof e=="function"}function $t(e){return typeof e=="string"}function Bk(e){return ad.call(e)==="[object String]"}function He(e){return typeof e=="number"}function Yt(e){var t=typeof e;return t==="function"||!!e&&t==="object"}function EI(e){return!!TB[ad.call(e)]}function ki(e){return!!kB[ad.call(e)]}function a_(e){return typeof e=="object"&&typeof e.nodeType=="number"&&typeof e.ownerDocument=="object"}function Lb(e){return e.colorStops!=null}function int(e){return e.image!=null}function ont(e){return ad.call(e)==="[object RegExp]"}function s_(e){return e!==e}function Po(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0,n=e.length;r<n;r++)if(e[r]!=null)return e[r]}function _e(e,t){return e!=null?e:t}function Og(e,t,r){return e!=null?e:t!=null?t:r}function iA(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return eA.apply(e,t)}function EB(e){if(typeof e=="number")return[e,e,e,e];var t=e.length;return t===2?[e[0],e[1],e[0],e[1]]:t===3?[e[0],e[1],e[2],e[1]]:e}function Do(e,t){if(!e)throw new Error(t)}function ma(e){return e==null?null:typeof e.trim=="function"?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var CB="__ec_primitive__";function l_(e){e[CB]=!0}function Rg(e){return e[CB]}var ant=function(){function e(t){this.data={};var r=St(t);this.data={};var n=this;t instanceof e?t.each(i):t&&U(t,i);function i(o,a){r?n.set(o,a):n.set(a,o)}}return e.prototype.get=function(t){return this.data.hasOwnProperty(t)?this.data[t]:null},e.prototype.set=function(t,r){return this.data[t]=r},e.prototype.each=function(t,r){for(var n in this.data)this.data.hasOwnProperty(n)&&t.call(r,this.data[n],n)},e.prototype.keys=function(){return ze(this.data)},e.prototype.removeKey=function(t){delete this.data[t]},e}();function he(e){return new ant(e)}function AB(e,t){for(var r=new e.constructor(e.length+t.length),n=0;n<e.length;n++)r[n]=e[n];for(var i=e.length,n=0;n<t.length;n++)r[n+i]=t[n];return r}function Ob(e,t){var r;if(Object.create)r=Object.create(e);else{var n=function(){};n.prototype=e,r=new n}return t&&_t(r,t),r}function xB(e){var t=e.style;t.webkitUserSelect="none",t.userSelect="none",t.webkitTapHighlightColor="rgba(0,0,0,0)",t["-webkit-touch-callout"]="none"}function Mt(e,t){return e.hasOwnProperty(t)}function xn(){}var snt=180/Math.PI;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var zk=function(e,t){return zk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},zk(e,t)};function Ke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");zk(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function sd(e,t){return e==null&&(e=0),t==null&&(t=0),[e,t]}function lnt(e,t){return e[0]=t[0],e[1]=t[1],e}function unt(e){return[e[0],e[1]]}function CI(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function MB(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function cnt(e){return Math.sqrt(fnt(e))}function fnt(e){return e[0]*e[0]+e[1]*e[1]}function Cw(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function oA(e,t){var r=cnt(t);return r===0?(e[0]=0,e[1]=0):(e[0]=t[0]/r,e[1]=t[1]/r),e}function Vk(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var hnt=Vk;function dnt(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}var Sh=dnt;function Vn(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i+r[4],e[1]=r[1]*n+r[3]*i+r[5],e}function sh(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function lh(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}var _f=function(){function e(t,r){this.target=t,this.topTarget=r&&r.topTarget}return e}(),pnt=function(){function e(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return e.prototype._dragStart=function(t){for(var r=t.target;r&&!r.draggable;)r=r.parent||r.__hostTarget;r&&(this._draggingTarget=r,r.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new _f(r,t),"dragstart",t.event))},e.prototype._drag=function(t){var r=this._draggingTarget;if(r){var n=t.offsetX,i=t.offsetY,o=n-this._x,a=i-this._y;this._x=n,this._y=i,r.drift(o,a,t),this.handler.dispatchToElement(new _f(r,t),"drag",t.event);var s=this.handler.findHover(n,i,r).target,l=this._dropTarget;this._dropTarget=s,r!==s&&(l&&s!==l&&this.handler.dispatchToElement(new _f(l,t),"dragleave",t.event),s&&s!==l&&this.handler.dispatchToElement(new _f(s,t),"dragenter",t.event))}},e.prototype._dragEnd=function(t){var r=this._draggingTarget;r&&(r.dragging=!1),this.handler.dispatchToElement(new _f(r,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new _f(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},e}();const gnt=pnt;var vnt=function(){function e(t){t&&(this._$eventProcessor=t)}return e.prototype.on=function(t,r,n,i){this._$handlers||(this._$handlers={});var o=this._$handlers;if(typeof r=="function"&&(i=n,n=r,r=null),!n||!t)return this;var a=this._$eventProcessor;r!=null&&a&&a.normalizeQuery&&(r=a.normalizeQuery(r)),o[t]||(o[t]=[]);for(var s=0;s<o[t].length;s++)if(o[t][s].h===n)return this;var l={h:n,query:r,ctx:i||this,callAtLast:n.zrEventfulCallAtLast},u=o[t].length-1,c=o[t][u];return c&&c.callAtLast?o[t].splice(u,0,l):o[t].push(l),this},e.prototype.isSilent=function(t){var r=this._$handlers;return!r||!r[t]||!r[t].length},e.prototype.off=function(t,r){var n=this._$handlers;if(!n)return this;if(!t)return this._$handlers={},this;if(r){if(n[t]){for(var i=[],o=0,a=n[t].length;o<a;o++)n[t][o].h!==r&&i.push(n[t][o]);n[t]=i}n[t]&&n[t].length===0&&delete n[t]}else delete n[t];return this},e.prototype.trigger=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[t],o=this._$eventProcessor;if(i)for(var a=r.length,s=i.length,l=0;l<s;l++){var u=i[l];if(!(o&&o.filter&&u.query!=null&&!o.filter(t,u.query)))switch(a){case 0:u.h.call(u.ctx);break;case 1:u.h.call(u.ctx,r[0]);break;case 2:u.h.call(u.ctx,r[0],r[1]);break;default:u.h.apply(u.ctx,r);break}}return o&&o.afterTrigger&&o.afterTrigger(t),this},e.prototype.triggerWithContext=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[t],o=this._$eventProcessor;if(i)for(var a=r.length,s=r[a-1],l=i.length,u=0;u<l;u++){var c=i[u];if(!(o&&o.filter&&c.query!=null&&!o.filter(t,c.query)))switch(a){case 0:c.h.call(s);break;case 1:c.h.call(s,r[0]);break;case 2:c.h.call(s,r[0],r[1]);break;default:c.h.apply(s,r.slice(1,a-1));break}}return o&&o.afterTrigger&&o.afterTrigger(t),this},e}();const Vo=vnt;var mnt=Math.log(2);function Uk(e,t,r,n,i,o){var a=n+"-"+i,s=e.length;if(o.hasOwnProperty(a))return o[a];if(t===1){var l=Math.round(Math.log((1<<s)-1&~i)/mnt);return e[r][l]}for(var u=n|1<<r,c=r+1;n&1<<c;)c++;for(var f=0,h=0,d=0;h<s;h++){var p=1<<h;p&i||(f+=(d%2?-1:1)*e[r][h]*Uk(e,t-1,c,u,i|p,o),d++)}return o[a]=f,f}function AI(e,t){var r=[[e[0],e[1],1,0,0,0,-t[0]*e[0],-t[0]*e[1]],[0,0,0,e[0],e[1],1,-t[1]*e[0],-t[1]*e[1]],[e[2],e[3],1,0,0,0,-t[2]*e[2],-t[2]*e[3]],[0,0,0,e[2],e[3],1,-t[3]*e[2],-t[3]*e[3]],[e[4],e[5],1,0,0,0,-t[4]*e[4],-t[4]*e[5]],[0,0,0,e[4],e[5],1,-t[5]*e[4],-t[5]*e[5]],[e[6],e[7],1,0,0,0,-t[6]*e[6],-t[6]*e[7]],[0,0,0,e[6],e[7],1,-t[7]*e[6],-t[7]*e[7]]],n={},i=Uk(r,8,0,0,0,n);if(i!==0){for(var o=[],a=0;a<8;a++)for(var s=0;s<8;s++)o[s]==null&&(o[s]=0),o[s]+=((a+s)%2?-1:1)*Uk(r,7,a===0?1:0,1<<a,1<<s,n)/i*t[a];return function(l,u,c){var f=u*o[6]+c*o[7]+1;l[0]=(u*o[0]+c*o[1]+o[2])/f,l[1]=(u*o[3]+c*o[4]+o[5])/f}}}var xI="___zrEVENTSAVED",Aw=[];function ynt(e,t,r,n,i){return Wk(Aw,t,n,i,!0)&&Wk(e,r,Aw[0],Aw[1])}function Wk(e,t,r,n,i){if(t.getBoundingClientRect&&me.domSupported&&!IB(t)){var o=t[xI]||(t[xI]={}),a=_nt(t,o),s=bnt(a,o,i);if(s)return s(e,r,n),!0}return!1}function _nt(e,t){var r=t.markers;if(r)return r;r=t.markers=[];for(var n=["left","right"],i=["top","bottom"],o=0;o<4;o++){var a=document.createElement("div"),s=a.style,l=o%2,u=(o>>1)%2;s.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",n[l]+":0",i[u]+":0",n[1-l]+":auto",i[1-u]+":auto",""].join("!important;"),e.appendChild(a),r.push(a)}return r}function bnt(e,t,r){for(var n=r?"invTrans":"trans",i=t[n],o=t.srcCoords,a=[],s=[],l=!0,u=0;u<4;u++){var c=e[u].getBoundingClientRect(),f=2*u,h=c.left,d=c.top;a.push(h,d),l=l&&o&&h===o[f]&&d===o[f+1],s.push(e[u].offsetLeft,e[u].offsetTop)}return l&&i?i:(t.srcCoords=a,t[n]=r?AI(s,a):AI(a,s))}function IB(e){return e.nodeName.toUpperCase()==="CANVAS"}var wnt=/([&<>"'])/g,Snt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Wi(e){return e==null?"":(e+"").replace(wnt,function(t,r){return Snt[r]})}var Tnt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,xw=[],knt=me.browser.firefox&&+me.browser.version.split(".")[0]<39;function jk(e,t,r,n){return r=r||{},n?MI(e,t,r):knt&&t.layerX!=null&&t.layerX!==t.offsetX?(r.zrX=t.layerX,r.zrY=t.layerY):t.offsetX!=null?(r.zrX=t.offsetX,r.zrY=t.offsetY):MI(e,t,r),r}function MI(e,t,r){if(me.domSupported&&e.getBoundingClientRect){var n=t.clientX,i=t.clientY;if(IB(e)){var o=e.getBoundingClientRect();r.zrX=n-o.left,r.zrY=i-o.top;return}else if(Wk(xw,e,n,i)){r.zrX=xw[0],r.zrY=xw[1];return}}r.zrX=r.zrY=0}function aA(e){return e||window.event}function $i(e,t,r){if(t=aA(t),t.zrX!=null)return t;var n=t.type,i=n&&n.indexOf("touch")>=0;if(i){var a=n!=="touchend"?t.targetTouches[0]:t.changedTouches[0];a&&jk(e,a,t,r)}else{jk(e,t,t,r);var o=Pnt(t);t.zrDelta=o?o/120:-(t.detail||0)/3}var s=t.button;return t.which==null&&s!==void 0&&Tnt.test(t.type)&&(t.which=s&1?1:s&2?3:s&4?2:0),t}function Pnt(e){var t=e.wheelDelta;if(t)return t;var r=e.deltaX,n=e.deltaY;if(r==null||n==null)return t;var i=Math.abs(n!==0?n:r),o=n>0?-1:n<0?1:r>0?-1:1;return 3*i*o}function Ent(e,t,r,n){e.addEventListener(t,r,n)}function Cnt(e,t,r,n){e.removeEventListener(t,r,n)}var Sc=function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0};function II(e){return e.which===2||e.which===3}var Ant=function(){function e(){this._track=[]}return e.prototype.recognize=function(t,r,n){return this._doTrack(t,r,n),this._recognize(t)},e.prototype.clear=function(){return this._track.length=0,this},e.prototype._doTrack=function(t,r,n){var i=t.touches;if(!!i){for(var o={points:[],touches:[],target:r,event:t},a=0,s=i.length;a<s;a++){var l=i[a],u=jk(n,l,{});o.points.push([u.zrX,u.zrY]),o.touches.push(l)}this._track.push(o)}},e.prototype._recognize=function(t){for(var r in Mw)if(Mw.hasOwnProperty(r)){var n=Mw[r](this._track,t);if(n)return n}},e}();function LI(e){var t=e[1][0]-e[0][0],r=e[1][1]-e[0][1];return Math.sqrt(t*t+r*r)}function xnt(e){return[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]}var Mw={pinch:function(e,t){var r=e.length;if(!!r){var n=(e[r-1]||{}).points,i=(e[r-2]||{}).points||n;if(i&&i.length>1&&n&&n.length>1){var o=LI(n)/LI(i);!isFinite(o)&&(o=1),t.pinchScale=o;var a=xnt(n);return t.pinchX=a[0],t.pinchY=a[1],{type:"pinch",target:e[0].target,event:t}}}}};function jh(){return[1,0,0,1,0,0]}function sA(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function LB(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Th(e,t,r){var n=t[0]*r[0]+t[2]*r[1],i=t[1]*r[0]+t[3]*r[1],o=t[0]*r[2]+t[2]*r[3],a=t[1]*r[2]+t[3]*r[3],s=t[0]*r[4]+t[2]*r[5]+t[4],l=t[1]*r[4]+t[3]*r[5]+t[5];return e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e}function Gk(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+r[0],e[5]=t[5]+r[1],e}function lA(e,t,r){var n=t[0],i=t[2],o=t[4],a=t[1],s=t[3],l=t[5],u=Math.sin(r),c=Math.cos(r);return e[0]=n*c+a*u,e[1]=-n*u+a*c,e[2]=i*c+s*u,e[3]=-i*u+c*s,e[4]=c*o+u*l,e[5]=c*l-u*o,e}function Mnt(e,t,r){var n=r[0],i=r[1];return e[0]=t[0]*n,e[1]=t[1]*i,e[2]=t[2]*n,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*i,e}function Rb(e,t){var r=t[0],n=t[2],i=t[4],o=t[1],a=t[3],s=t[5],l=r*a-o*n;return l?(l=1/l,e[0]=a*l,e[1]=-o*l,e[2]=-n*l,e[3]=r*l,e[4]=(n*s-a*i)*l,e[5]=(o*i-r*s)*l,e):null}var Int=function(){function e(t,r){this.x=t||0,this.y=r||0}return e.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.set=function(t,r){return this.x=t,this.y=r,this},e.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},e.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},e.prototype.scale=function(t){this.x*=t,this.y*=t},e.prototype.scaleAndAdd=function(t,r){this.x+=t.x*r,this.y+=t.y*r},e.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},e.prototype.dot=function(t){return this.x*t.x+this.y*t.y},e.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},e.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},e.prototype.distance=function(t){var r=this.x-t.x,n=this.y-t.y;return Math.sqrt(r*r+n*n)},e.prototype.distanceSquare=function(t){var r=this.x-t.x,n=this.y-t.y;return r*r+n*n},e.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},e.prototype.transform=function(t){if(!!t){var r=this.x,n=this.y;return this.x=t[0]*r+t[2]*n+t[4],this.y=t[1]*r+t[3]*n+t[5],this}},e.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},e.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},e.set=function(t,r,n){t.x=r,t.y=n},e.copy=function(t,r){t.x=r.x,t.y=r.y},e.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},e.lenSquare=function(t){return t.x*t.x+t.y*t.y},e.dot=function(t,r){return t.x*r.x+t.y*r.y},e.add=function(t,r,n){t.x=r.x+n.x,t.y=r.y+n.y},e.sub=function(t,r,n){t.x=r.x-n.x,t.y=r.y-n.y},e.scale=function(t,r,n){t.x=r.x*n,t.y=r.y*n},e.scaleAndAdd=function(t,r,n,i){t.x=r.x+n.x*i,t.y=r.y+n.y*i},e.lerp=function(t,r,n,i){var o=1-i;t.x=o*r.x+i*n.x,t.y=o*r.y+i*n.y},e}();const Qe=Int;var Z0=Math.min,q0=Math.max,du=new Qe,pu=new Qe,gu=new Qe,vu=new Qe,Xd=new Qe,Yd=new Qe,Lnt=function(){function e(t,r,n,i){n<0&&(t=t+n,n=-n),i<0&&(r=r+i,i=-i),this.x=t,this.y=r,this.width=n,this.height=i}return e.prototype.union=function(t){var r=Z0(t.x,this.x),n=Z0(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=q0(t.x+t.width,this.x+this.width)-r:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=q0(t.y+t.height,this.y+this.height)-n:this.height=t.height,this.x=r,this.y=n},e.prototype.applyTransform=function(t){e.applyTransform(this,this,t)},e.prototype.calculateTransform=function(t){var r=this,n=t.width/r.width,i=t.height/r.height,o=jh();return Gk(o,o,[-r.x,-r.y]),Mnt(o,o,[n,i]),Gk(o,o,[t.x,t.y]),o},e.prototype.intersect=function(t,r){if(!t)return!1;t instanceof e||(t=e.create(t));var n=this,i=n.x,o=n.x+n.width,a=n.y,s=n.y+n.height,l=t.x,u=t.x+t.width,c=t.y,f=t.y+t.height,h=!(o<l||u<i||s<c||f<a);if(r){var d=1/0,p=0,g=Math.abs(o-l),m=Math.abs(u-i),v=Math.abs(s-c),y=Math.abs(f-a),b=Math.min(g,m),w=Math.min(v,y);o<l||u<i?b>p&&(p=b,g<m?Qe.set(Yd,-g,0):Qe.set(Yd,m,0)):b<d&&(d=b,g<m?Qe.set(Xd,g,0):Qe.set(Xd,-m,0)),s<c||f<a?w>p&&(p=w,v<y?Qe.set(Yd,0,-v):Qe.set(Yd,0,y)):b<d&&(d=b,v<y?Qe.set(Xd,0,v):Qe.set(Xd,0,-y))}return r&&Qe.copy(r,h?Xd:Yd),h},e.prototype.contain=function(t,r){var n=this;return t>=n.x&&t<=n.x+n.width&&r>=n.y&&r<=n.y+n.height},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copy=function(t){e.copy(this,t)},e.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},e.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},e.prototype.isZero=function(){return this.width===0||this.height===0},e.create=function(t){return new e(t.x,t.y,t.width,t.height)},e.copy=function(t,r){t.x=r.x,t.y=r.y,t.width=r.width,t.height=r.height},e.applyTransform=function(t,r,n){if(!n){t!==r&&e.copy(t,r);return}if(n[1]<1e-5&&n[1]>-1e-5&&n[2]<1e-5&&n[2]>-1e-5){var i=n[0],o=n[3],a=n[4],s=n[5];t.x=r.x*i+a,t.y=r.y*o+s,t.width=r.width*i,t.height=r.height*o,t.width<0&&(t.x+=t.width,t.width=-t.width),t.height<0&&(t.y+=t.height,t.height=-t.height);return}du.x=gu.x=r.x,du.y=vu.y=r.y,pu.x=vu.x=r.x+r.width,pu.y=gu.y=r.y+r.height,du.transform(n),vu.transform(n),pu.transform(n),gu.transform(n),t.x=Z0(du.x,pu.x,gu.x,vu.x),t.y=Z0(du.y,pu.y,gu.y,vu.y);var l=q0(du.x,pu.x,gu.x,vu.x),u=q0(du.y,pu.y,gu.y,vu.y);t.width=l-t.x,t.height=u-t.y},e}();const Le=Lnt;var OB="silent";function Ont(e,t,r){return{type:e,event:r,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:r.zrX,offsetY:r.zrY,gestureEvent:r.gestureEvent,pinchX:r.pinchX,pinchY:r.pinchY,pinchScale:r.pinchScale,wheelDelta:r.zrDelta,zrByTouch:r.zrByTouch,which:r.which,stop:Rnt}}function Rnt(){Sc(this.event)}var Dnt=function(e){Ke(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.handler=null,r}return t.prototype.dispose=function(){},t.prototype.setCursor=function(){},t}(Vo),Kd=function(){function e(t,r){this.x=t,this.y=r}return e}(),Nnt=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],Iw=new Le(0,0,0,0),RB=function(e){Ke(t,e);function t(r,n,i,o,a){var s=e.call(this)||this;return s._hovered=new Kd(0,0),s.storage=r,s.painter=n,s.painterRoot=o,s._pointerSize=a,i=i||new Dnt,s.proxy=null,s.setHandlerProxy(i),s._draggingMgr=new gnt(s),s}return t.prototype.setHandlerProxy=function(r){this.proxy&&this.proxy.dispose(),r&&(U(Nnt,function(n){r.on&&r.on(n,this[n],this)},this),r.handler=this),this.proxy=r},t.prototype.mousemove=function(r){var n=r.zrX,i=r.zrY,o=DB(this,n,i),a=this._hovered,s=a.target;s&&!s.__zr&&(a=this.findHover(a.x,a.y),s=a.target);var l=this._hovered=o?new Kd(n,i):this.findHover(n,i),u=l.target,c=this.proxy;c.setCursor&&c.setCursor(u?u.cursor:"default"),s&&u!==s&&this.dispatchToElement(a,"mouseout",r),this.dispatchToElement(l,"mousemove",r),u&&u!==s&&this.dispatchToElement(l,"mouseover",r)},t.prototype.mouseout=function(r){var n=r.zrEventControl;n!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",r),n!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:r})},t.prototype.resize=function(){this._hovered=new Kd(0,0)},t.prototype.dispatch=function(r,n){var i=this[r];i&&i.call(this,n)},t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},t.prototype.setCursorStyle=function(r){var n=this.proxy;n.setCursor&&n.setCursor(r)},t.prototype.dispatchToElement=function(r,n,i){r=r||{};var o=r.target;if(!(o&&o.silent)){for(var a="on"+n,s=Ont(n,r,i);o&&(o[a]&&(s.cancelBubble=!!o[a].call(o,s)),o.trigger(n,s),o=o.__hostTarget?o.__hostTarget:o.parent,!s.cancelBubble););s.cancelBubble||(this.trigger(n,s),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[a]=="function"&&l[a].call(l,s),l.trigger&&l.trigger(n,s)}))}},t.prototype.findHover=function(r,n,i){var o=this.storage.getDisplayList(),a=new Kd(r,n);if(OI(o,a,r,n,i),this._pointerSize&&!a.target){for(var s=[],l=this._pointerSize,u=l/2,c=new Le(r-u,n-u,l,l),f=o.length-1;f>=0;f--){var h=o[f];h!==i&&!h.ignore&&!h.ignoreCoarsePointer&&(!h.parent||!h.parent.ignoreCoarsePointer)&&(Iw.copy(h.getBoundingRect()),h.transform&&Iw.applyTransform(h.transform),Iw.intersect(c)&&s.push(h))}if(s.length)for(var d=4,p=Math.PI/12,g=Math.PI*2,m=0;m<u;m+=d)for(var v=0;v<g;v+=p){var y=r+m*Math.cos(v),b=n+m*Math.sin(v);if(OI(s,a,y,b,i),a.target)return a}}return a},t.prototype.processGesture=function(r,n){this._gestureMgr||(this._gestureMgr=new Ant);var i=this._gestureMgr;n==="start"&&i.clear();var o=i.recognize(r,this.findHover(r.zrX,r.zrY,null).target,this.proxy.dom);if(n==="end"&&i.clear(),o){var a=o.type;r.gestureEvent=a;var s=new Kd;s.target=o.target,this.dispatchToElement(s,a,o.event)}},t}(Vo);U(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){RB.prototype[e]=function(t){var r=t.zrX,n=t.zrY,i=DB(this,r,n),o,a;if((e!=="mouseup"||!i)&&(o=this.findHover(r,n),a=o.target),e==="mousedown")this._downEl=a,this._downPoint=[t.zrX,t.zrY],this._upEl=a;else if(e==="mouseup")this._upEl=a;else if(e==="click"){if(this._downEl!==this._upEl||!this._downPoint||hnt(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(o,e,t)}});function Fnt(e,t,r){if(e[e.rectHover?"rectContain":"contain"](t,r)){for(var n=e,i=void 0,o=!1;n;){if(n.ignoreClip&&(o=!0),!o){var a=n.getClipPath();if(a&&!a.contain(t,r))return!1;n.silent&&(i=!0)}var s=n.__hostTarget;n=s||n.parent}return i?OB:!0}return!1}function OI(e,t,r,n,i){for(var o=e.length-1;o>=0;o--){var a=e[o],s=void 0;if(a!==i&&!a.ignore&&(s=Fnt(a,r,n))&&(!t.topTarget&&(t.topTarget=a),s!==OB)){t.target=a;break}}}function DB(e,t,r){var n=e.painter;return t<0||t>n.getWidth()||r<0||r>n.getHeight()}const $nt=RB;var NB=32,Zd=7;function Bnt(e){for(var t=0;e>=NB;)t|=e&1,e>>=1;return e+t}function RI(e,t,r,n){var i=t+1;if(i===r)return 1;if(n(e[i++],e[t])<0){for(;i<r&&n(e[i],e[i-1])<0;)i++;znt(e,t,i)}else for(;i<r&&n(e[i],e[i-1])>=0;)i++;return i-t}function znt(e,t,r){for(r--;t<r;){var n=e[t];e[t++]=e[r],e[r--]=n}}function DI(e,t,r,n,i){for(n===t&&n++;n<r;n++){for(var o=e[n],a=t,s=n,l;a<s;)l=a+s>>>1,i(o,e[l])<0?s=l:a=l+1;var u=n-a;switch(u){case 3:e[a+3]=e[a+2];case 2:e[a+2]=e[a+1];case 1:e[a+1]=e[a];break;default:for(;u>0;)e[a+u]=e[a+u-1],u--}e[a]=o}}function Lw(e,t,r,n,i,o){var a=0,s=0,l=1;if(o(e,t[r+i])>0){for(s=n-i;l<s&&o(e,t[r+i+l])>0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),a+=i,l+=i}else{for(s=i+1;l<s&&o(e,t[r+i-l])<=0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var u=a;a=i-l,l=i-u}for(a++;a<l;){var c=a+(l-a>>>1);o(e,t[r+c])>0?a=c+1:l=c}return l}function Ow(e,t,r,n,i,o){var a=0,s=0,l=1;if(o(e,t[r+i])<0){for(s=i+1;l<s&&o(e,t[r+i-l])<0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var u=a;a=i-l,l=i-u}else{for(s=n-i;l<s&&o(e,t[r+i+l])>=0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),a+=i,l+=i}for(a++;a<l;){var c=a+(l-a>>>1);o(e,t[r+c])<0?l=c:a=c+1}return l}function Vnt(e,t){var r=Zd,n,i,o=0;e.length;var a=[];n=[],i=[];function s(d,p){n[o]=d,i[o]=p,o+=1}function l(){for(;o>1;){var d=o-2;if(d>=1&&i[d-1]<=i[d]+i[d+1]||d>=2&&i[d-2]<=i[d]+i[d-1])i[d-1]<i[d+1]&&d--;else if(i[d]>i[d+1])break;c(d)}}function u(){for(;o>1;){var d=o-2;d>0&&i[d-1]<i[d+1]&&d--,c(d)}}function c(d){var p=n[d],g=i[d],m=n[d+1],v=i[d+1];i[d]=g+v,d===o-3&&(n[d+1]=n[d+2],i[d+1]=i[d+2]),o--;var y=Ow(e[m],e,p,g,0,t);p+=y,g-=y,g!==0&&(v=Lw(e[p+g-1],e,m,v,v-1,t),v!==0&&(g<=v?f(p,g,m,v):h(p,g,m,v)))}function f(d,p,g,m){var v=0;for(v=0;v<p;v++)a[v]=e[d+v];var y=0,b=g,w=d;if(e[w++]=e[b++],--m===0){for(v=0;v<p;v++)e[w+v]=a[y+v];return}if(p===1){for(v=0;v<m;v++)e[w+v]=e[b+v];e[w+m]=a[y];return}for(var T=r,S,k,E;;){S=0,k=0,E=!1;do if(t(e[b],a[y])<0){if(e[w++]=e[b++],k++,S=0,--m===0){E=!0;break}}else if(e[w++]=a[y++],S++,k=0,--p===1){E=!0;break}while((S|k)<T);if(E)break;do{if(S=Ow(e[b],a,y,p,0,t),S!==0){for(v=0;v<S;v++)e[w+v]=a[y+v];if(w+=S,y+=S,p-=S,p<=1){E=!0;break}}if(e[w++]=e[b++],--m===0){E=!0;break}if(k=Lw(a[y],e,b,m,0,t),k!==0){for(v=0;v<k;v++)e[w+v]=e[b+v];if(w+=k,b+=k,m-=k,m===0){E=!0;break}}if(e[w++]=a[y++],--p===1){E=!0;break}T--}while(S>=Zd||k>=Zd);if(E)break;T<0&&(T=0),T+=2}if(r=T,r<1&&(r=1),p===1){for(v=0;v<m;v++)e[w+v]=e[b+v];e[w+m]=a[y]}else{if(p===0)throw new Error;for(v=0;v<p;v++)e[w+v]=a[y+v]}}function h(d,p,g,m){var v=0;for(v=0;v<m;v++)a[v]=e[g+v];var y=d+p-1,b=m-1,w=g+m-1,T=0,S=0;if(e[w--]=e[y--],--p===0){for(T=w-(m-1),v=0;v<m;v++)e[T+v]=a[v];return}if(m===1){for(w-=p,y-=p,S=w+1,T=y+1,v=p-1;v>=0;v--)e[S+v]=e[T+v];e[w]=a[b];return}for(var k=r;;){var E=0,P=0,C=!1;do if(t(a[b],e[y])<0){if(e[w--]=e[y--],E++,P=0,--p===0){C=!0;break}}else if(e[w--]=a[b--],P++,E=0,--m===1){C=!0;break}while((E|P)<k);if(C)break;do{if(E=p-Ow(a[b],e,d,p,p-1,t),E!==0){for(w-=E,y-=E,p-=E,S=w+1,T=y+1,v=E-1;v>=0;v--)e[S+v]=e[T+v];if(p===0){C=!0;break}}if(e[w--]=a[b--],--m===1){C=!0;break}if(P=m-Lw(e[y],a,0,m,m-1,t),P!==0){for(w-=P,b-=P,m-=P,S=w+1,T=b+1,v=0;v<P;v++)e[S+v]=a[T+v];if(m<=1){C=!0;break}}if(e[w--]=e[y--],--p===0){C=!0;break}k--}while(E>=Zd||P>=Zd);if(C)break;k<0&&(k=0),k+=2}if(r=k,r<1&&(r=1),m===1){for(w-=p,y-=p,S=w+1,T=y+1,v=p-1;v>=0;v--)e[S+v]=e[T+v];e[w]=a[b]}else{if(m===0)throw new Error;for(T=w-(m-1),v=0;v<m;v++)e[T+v]=a[v]}}return{mergeRuns:l,forceMergeRuns:u,pushRun:s}}function cy(e,t,r,n){r||(r=0),n||(n=e.length);var i=n-r;if(!(i<2)){var o=0;if(i<NB){o=RI(e,r,n,t),DI(e,r,n,r+o,t);return}var a=Vnt(e,t),s=Bnt(i);do{if(o=RI(e,r,n,t),o<s){var l=i;l>s&&(l=s),DI(e,r,r+l,r+o,t),o=l}a.pushRun(r,o),a.mergeRuns(),i-=o,r+=o}while(i!==0);a.forceMergeRuns()}}var yi=1,qp=2,rh=4,NI=!1;function Rw(){NI||(NI=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function FI(e,t){return e.zlevel===t.zlevel?e.z===t.z?e.z2-t.z2:e.z-t.z:e.zlevel-t.zlevel}var Unt=function(){function e(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=FI}return e.prototype.traverse=function(t,r){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(t,r)},e.prototype.getDisplayList=function(t,r){r=r||!1;var n=this._displayList;return(t||!n.length)&&this.updateDisplayList(r),n},e.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var r=this._roots,n=this._displayList,i=0,o=r.length;i<o;i++)this._updateAndAddDisplayable(r[i],null,t);n.length=this._displayListLen,cy(n,FI)},e.prototype._updateAndAddDisplayable=function(t,r,n){if(!(t.ignore&&!n)){t.beforeUpdate(),t.update(),t.afterUpdate();var i=t.getClipPath();if(t.ignoreClip)r=null;else if(i){r?r=r.slice():r=[];for(var o=i,a=t;o;)o.parent=a,o.updateTransform(),r.push(o),a=o,o=o.getClipPath()}if(t.childrenRef){for(var s=t.childrenRef(),l=0;l<s.length;l++){var u=s[l];t.__dirty&&(u.__dirty|=yi),this._updateAndAddDisplayable(u,r,n)}t.__dirty=0}else{var c=t;r&&r.length?c.__clipPaths=r:c.__clipPaths&&c.__clipPaths.length>0&&(c.__clipPaths=[]),isNaN(c.z)&&(Rw(),c.z=0),isNaN(c.z2)&&(Rw(),c.z2=0),isNaN(c.zlevel)&&(Rw(),c.zlevel=0),this._displayList[this._displayListLen++]=c}var f=t.getDecalElement&&t.getDecalElement();f&&this._updateAndAddDisplayable(f,r,n);var h=t.getTextGuideLine();h&&this._updateAndAddDisplayable(h,r,n);var d=t.getTextContent();d&&this._updateAndAddDisplayable(d,r,n)}},e.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},e.prototype.delRoot=function(t){if(t instanceof Array){for(var r=0,n=t.length;r<n;r++)this.delRoot(t[r]);return}var i=De(this._roots,t);i>=0&&this._roots.splice(i,1)},e.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},e.prototype.getRoots=function(){return this._roots},e.prototype.dispose=function(){this._displayList=null,this._roots=null},e}();const Wnt=Unt;var FB;FB=me.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){return setTimeout(e,16)};const Hk=FB;var fy={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quarticIn:function(e){return e*e*e*e},quarticOut:function(e){return 1- --e*e*e*e},quarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quinticIn:function(e){return e*e*e*e*e},quinticOut:function(e){return--e*e*e*e*e+1},quinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return .5*(1-Math.cos(Math.PI*e))},exponentialIn:function(e){return e===0?0:Math.pow(1024,e-1)},exponentialOut:function(e){return e===1?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),-(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)))},elasticOut:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/n)+1)},elasticInOut:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),(e*=2)<1?-.5*(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)):r*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*.5+1)},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},backInOut:function(e){var t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)},bounceIn:function(e){return 1-fy.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(e){return e<.5?fy.bounceIn(e*2)*.5:fy.bounceOut(e*2-1)*.5+.5}};const $B=fy;var J0=Math.pow,Il=Math.sqrt,u_=1e-8,BB=1e-4,$I=Il(3),Q0=1/3,pa=sd(),ji=sd(),kh=sd();function wl(e){return e>-u_&&e<u_}function zB(e){return e>u_||e<-u_}function zr(e,t,r,n,i){var o=1-i;return o*o*(o*e+3*i*t)+i*i*(i*n+3*o*r)}function BI(e,t,r,n,i){var o=1-i;return 3*(((t-e)*o+2*(r-t)*i)*o+(n-r)*i*i)}function c_(e,t,r,n,i,o){var a=n+3*(t-r)-e,s=3*(r-t*2+e),l=3*(t-e),u=e-i,c=s*s-3*a*l,f=s*l-9*a*u,h=l*l-3*s*u,d=0;if(wl(c)&&wl(f))if(wl(s))o[0]=0;else{var p=-l/s;p>=0&&p<=1&&(o[d++]=p)}else{var g=f*f-4*c*h;if(wl(g)){var m=f/c,p=-s/a+m,v=-m/2;p>=0&&p<=1&&(o[d++]=p),v>=0&&v<=1&&(o[d++]=v)}else if(g>0){var y=Il(g),b=c*s+1.5*a*(-f+y),w=c*s+1.5*a*(-f-y);b<0?b=-J0(-b,Q0):b=J0(b,Q0),w<0?w=-J0(-w,Q0):w=J0(w,Q0);var p=(-s-(b+w))/(3*a);p>=0&&p<=1&&(o[d++]=p)}else{var T=(2*c*s-3*a*f)/(2*Il(c*c*c)),S=Math.acos(T)/3,k=Il(c),E=Math.cos(S),p=(-s-2*k*E)/(3*a),v=(-s+k*(E+$I*Math.sin(S)))/(3*a),P=(-s+k*(E-$I*Math.sin(S)))/(3*a);p>=0&&p<=1&&(o[d++]=p),v>=0&&v<=1&&(o[d++]=v),P>=0&&P<=1&&(o[d++]=P)}}return d}function VB(e,t,r,n,i){var o=6*r-12*t+6*e,a=9*t+3*n-3*e-9*r,s=3*t-3*e,l=0;if(wl(a)){if(zB(o)){var u=-s/o;u>=0&&u<=1&&(i[l++]=u)}}else{var c=o*o-4*a*s;if(wl(c))i[0]=-o/(2*a);else if(c>0){var f=Il(c),u=(-o+f)/(2*a),h=(-o-f)/(2*a);u>=0&&u<=1&&(i[l++]=u),h>=0&&h<=1&&(i[l++]=h)}}return l}function f_(e,t,r,n,i,o){var a=(t-e)*i+e,s=(r-t)*i+t,l=(n-r)*i+r,u=(s-a)*i+a,c=(l-s)*i+s,f=(c-u)*i+u;o[0]=e,o[1]=a,o[2]=u,o[3]=f,o[4]=f,o[5]=c,o[6]=l,o[7]=n}function jnt(e,t,r,n,i,o,a,s,l,u,c){var f,h=.005,d=1/0,p,g,m,v;pa[0]=l,pa[1]=u;for(var y=0;y<1;y+=.05)ji[0]=zr(e,r,i,a,y),ji[1]=zr(t,n,o,s,y),m=Sh(pa,ji),m<d&&(f=y,d=m);d=1/0;for(var b=0;b<32&&!(h<BB);b++)p=f-h,g=f+h,ji[0]=zr(e,r,i,a,p),ji[1]=zr(t,n,o,s,p),m=Sh(ji,pa),p>=0&&m<d?(f=p,d=m):(kh[0]=zr(e,r,i,a,g),kh[1]=zr(t,n,o,s,g),v=Sh(kh,pa),g<=1&&v<d?(f=g,d=v):h*=.5);return c&&(c[0]=zr(e,r,i,a,f),c[1]=zr(t,n,o,s,f)),Il(d)}function Gnt(e,t,r,n,i,o,a,s,l){for(var u=e,c=t,f=0,h=1/l,d=1;d<=l;d++){var p=d*h,g=zr(e,r,i,a,p),m=zr(t,n,o,s,p),v=g-u,y=m-c;f+=Math.sqrt(v*v+y*y),u=g,c=m}return f}function wn(e,t,r,n){var i=1-n;return i*(i*e+2*n*t)+n*n*r}function zI(e,t,r,n){return 2*((1-n)*(t-e)+n*(r-t))}function Hnt(e,t,r,n,i){var o=e-2*t+r,a=2*(t-e),s=e-n,l=0;if(wl(o)){if(zB(a)){var u=-s/a;u>=0&&u<=1&&(i[l++]=u)}}else{var c=a*a-4*o*s;if(wl(c)){var u=-a/(2*o);u>=0&&u<=1&&(i[l++]=u)}else if(c>0){var f=Il(c),u=(-a+f)/(2*o),h=(-a-f)/(2*o);u>=0&&u<=1&&(i[l++]=u),h>=0&&h<=1&&(i[l++]=h)}}return l}function UB(e,t,r){var n=e+r-2*t;return n===0?.5:(e-t)/n}function h_(e,t,r,n,i){var o=(t-e)*n+e,a=(r-t)*n+t,s=(a-o)*n+o;i[0]=e,i[1]=o,i[2]=s,i[3]=s,i[4]=a,i[5]=r}function Xnt(e,t,r,n,i,o,a,s,l){var u,c=.005,f=1/0;pa[0]=a,pa[1]=s;for(var h=0;h<1;h+=.05){ji[0]=wn(e,r,i,h),ji[1]=wn(t,n,o,h);var d=Sh(pa,ji);d<f&&(u=h,f=d)}f=1/0;for(var p=0;p<32&&!(c<BB);p++){var g=u-c,m=u+c;ji[0]=wn(e,r,i,g),ji[1]=wn(t,n,o,g);var d=Sh(ji,pa);if(g>=0&&d<f)u=g,f=d;else{kh[0]=wn(e,r,i,m),kh[1]=wn(t,n,o,m);var v=Sh(kh,pa);m<=1&&v<f?(u=m,f=v):c*=.5}}return l&&(l[0]=wn(e,r,i,u),l[1]=wn(t,n,o,u)),Il(f)}function Ynt(e,t,r,n,i,o,a){for(var s=e,l=t,u=0,c=1/a,f=1;f<=a;f++){var h=f*c,d=wn(e,r,i,h),p=wn(t,n,o,h),g=d-s,m=p-l;u+=Math.sqrt(g*g+m*m),s=d,l=p}return u}var Knt=/cubic-bezier\(([0-9,\.e ]+)\)/;function WB(e){var t=e&&Knt.exec(e);if(t){var r=t[1].split(","),n=+ma(r[0]),i=+ma(r[1]),o=+ma(r[2]),a=+ma(r[3]);if(isNaN(n+i+o+a))return;var s=[];return function(l){return l<=0?0:l>=1?1:c_(0,n,o,1,l,s)&&zr(0,i,a,1,s[0])}}}var Znt=function(){function e(t){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=t.loop||!1,this.onframe=t.onframe||xn,this.ondestroy=t.ondestroy||xn,this.onrestart=t.onrestart||xn,t.easing&&this.setEasing(t.easing)}return e.prototype.step=function(t,r){if(this._inited||(this._startTime=t+this._delay,this._inited=!0),this._paused){this._pausedTime+=r;return}var n=this._life,i=t-this._startTime-this._pausedTime,o=i/n;o<0&&(o=0),o=Math.min(o,1);var a=this.easingFunc,s=a?a(o):o;if(this.onframe(s),o===1)if(this.loop){var l=i%n;this._startTime=t-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){this._paused=!1},e.prototype.setEasing=function(t){this.easing=t,this.easingFunc=ue(t)?t:$B[t]||WB(t)},e}();const qnt=Znt;var jB=function(){function e(t){this.value=t}return e}(),Jnt=function(){function e(){this._len=0}return e.prototype.insert=function(t){var r=new jB(t);return this.insertEntry(r),r},e.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},e.prototype.remove=function(t){var r=t.prev,n=t.next;r?r.next=n:this.head=n,n?n.prev=r:this.tail=r,t.next=t.prev=null,this._len--},e.prototype.len=function(){return this._len},e.prototype.clear=function(){this.head=this.tail=null,this._len=0},e}(),Qnt=function(){function e(t){this._list=new Jnt,this._maxSize=10,this._map={},this._maxSize=t}return e.prototype.put=function(t,r){var n=this._list,i=this._map,o=null;if(i[t]==null){var a=n.len(),s=this._lastRemovedEntry;if(a>=this._maxSize&&a>0){var l=n.head;n.remove(l),delete i[l.key],o=l.value,this._lastRemovedEntry=l}s?s.value=r:s=new jB(r),s.key=t,n.insertEntry(s),i[t]=s}return o},e.prototype.get=function(t){var r=this._map[t],n=this._list;if(r!=null)return r!==n.tail&&(n.remove(r),n.insertEntry(r)),r.value},e.prototype.clear=function(){this._list.clear(),this._map={}},e.prototype.len=function(){return this._list.len()},e}();const Jv=Qnt;var VI={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Io(e){return e=Math.round(e),e<0?0:e>255?255:e}function tit(e){return e=Math.round(e),e<0?0:e>360?360:e}function sv(e){return e<0?0:e>1?1:e}function Dw(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?Io(parseFloat(t)/100*255):Io(parseInt(t,10))}function uc(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?sv(parseFloat(t)/100):sv(parseFloat(t))}function Nw(e,t,r){return r<0?r+=1:r>1&&(r-=1),r*6<1?e+(t-e)*r*6:r*2<1?t:r*3<2?e+(t-e)*(2/3-r)*6:e}function Sl(e,t,r){return e+(t-e)*r}function Fi(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}function Xk(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}var GB=new Jv(20),tm=null;function bf(e,t){tm&&Xk(tm,t),tm=GB.put(e,tm||t.slice())}function Yi(e,t){if(!!e){t=t||[];var r=GB.get(e);if(r)return Xk(t,r);e=e+"";var n=e.replace(/ /g,"").toLowerCase();if(n in VI)return Xk(t,VI[n]),bf(e,t),t;var i=n.length;if(n.charAt(0)==="#"){if(i===4||i===5){var o=parseInt(n.slice(1,4),16);if(!(o>=0&&o<=4095)){Fi(t,0,0,0,1);return}return Fi(t,(o&3840)>>4|(o&3840)>>8,o&240|(o&240)>>4,o&15|(o&15)<<4,i===5?parseInt(n.slice(4),16)/15:1),bf(e,t),t}else if(i===7||i===9){var o=parseInt(n.slice(1,7),16);if(!(o>=0&&o<=16777215)){Fi(t,0,0,0,1);return}return Fi(t,(o&16711680)>>16,(o&65280)>>8,o&255,i===9?parseInt(n.slice(7),16)/255:1),bf(e,t),t}return}var a=n.indexOf("("),s=n.indexOf(")");if(a!==-1&&s+1===i){var l=n.substr(0,a),u=n.substr(a+1,s-(a+1)).split(","),c=1;switch(l){case"rgba":if(u.length!==4)return u.length===3?Fi(t,+u[0],+u[1],+u[2],1):Fi(t,0,0,0,1);c=uc(u.pop());case"rgb":if(u.length>=3)return Fi(t,Dw(u[0]),Dw(u[1]),Dw(u[2]),u.length===3?c:uc(u[3])),bf(e,t),t;Fi(t,0,0,0,1);return;case"hsla":if(u.length!==4){Fi(t,0,0,0,1);return}return u[3]=uc(u[3]),Yk(u,t),bf(e,t),t;case"hsl":if(u.length!==3){Fi(t,0,0,0,1);return}return Yk(u,t),bf(e,t),t;default:return}}Fi(t,0,0,0,1)}}function Yk(e,t){var r=(parseFloat(e[0])%360+360)%360/360,n=uc(e[1]),i=uc(e[2]),o=i<=.5?i*(n+1):i+n-i*n,a=i*2-o;return t=t||[],Fi(t,Io(Nw(a,o,r+1/3)*255),Io(Nw(a,o,r)*255),Io(Nw(a,o,r-1/3)*255),1),e.length===4&&(t[3]=e[3]),t}function eit(e){if(!!e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.min(t,r,n),o=Math.max(t,r,n),a=o-i,s=(o+i)/2,l,u;if(a===0)l=0,u=0;else{s<.5?u=a/(o+i):u=a/(2-o-i);var c=((o-t)/6+a/2)/a,f=((o-r)/6+a/2)/a,h=((o-n)/6+a/2)/a;t===o?l=h-f:r===o?l=1/3+c-h:n===o&&(l=2/3+f-c),l<0&&(l+=1),l>1&&(l-=1)}var d=[l*360,u,s];return e[3]!=null&&d.push(e[3]),d}}function UI(e,t){var r=Yi(e);if(r){for(var n=0;n<3;n++)t<0?r[n]=r[n]*(1-t)|0:r[n]=(255-r[n])*t+r[n]|0,r[n]>255?r[n]=255:r[n]<0&&(r[n]=0);return hs(r,r.length===4?"rgba":"rgb")}}function Fw(e,t,r){if(!(!(t&&t.length)||!(e>=0&&e<=1))){r=r||[];var n=e*(t.length-1),i=Math.floor(n),o=Math.ceil(n),a=t[i],s=t[o],l=n-i;return r[0]=Io(Sl(a[0],s[0],l)),r[1]=Io(Sl(a[1],s[1],l)),r[2]=Io(Sl(a[2],s[2],l)),r[3]=sv(Sl(a[3],s[3],l)),r}}function rit(e,t,r){if(!(!(t&&t.length)||!(e>=0&&e<=1))){var n=e*(t.length-1),i=Math.floor(n),o=Math.ceil(n),a=Yi(t[i]),s=Yi(t[o]),l=n-i,u=hs([Io(Sl(a[0],s[0],l)),Io(Sl(a[1],s[1],l)),Io(Sl(a[2],s[2],l)),sv(Sl(a[3],s[3],l))],"rgba");return r?{color:u,leftIndex:i,rightIndex:o,value:n}:u}}function $w(e,t,r,n){var i=Yi(e);if(e)return i=eit(i),t!=null&&(i[0]=tit(t)),r!=null&&(i[1]=uc(r)),n!=null&&(i[2]=uc(n)),hs(Yk(i),"rgba")}function Kk(e,t){var r=Yi(e);if(r&&t!=null)return r[3]=sv(t),hs(r,"rgba")}function hs(e,t){if(!(!e||!e.length)){var r=e[0]+","+e[1]+","+e[2];return(t==="rgba"||t==="hsva"||t==="hsla")&&(r+=","+e[3]),t+"("+r+")"}}function d_(e,t){var r=Yi(e);return r?(.299*r[0]+.587*r[1]+.114*r[2])*r[3]/255+(1-r[3])*t:0}function nit(e){return e.type==="linear"}function iit(e){return e.type==="radial"}(function(){return me.hasGlobalWindow&&ue(window.btoa)?function(e){return window.btoa(unescape(e))}:typeof Buffer<"u"?function(e){return Buffer.from(e).toString("base64")}:function(e){return null}})();var Zk=Array.prototype.slice;function ts(e,t,r){return(t-e)*r+e}function Bw(e,t,r,n){for(var i=t.length,o=0;o<i;o++)e[o]=ts(t[o],r[o],n);return e}function oit(e,t,r,n){for(var i=t.length,o=i&&t[0].length,a=0;a<i;a++){e[a]||(e[a]=[]);for(var s=0;s<o;s++)e[a][s]=ts(t[a][s],r[a][s],n)}return e}function em(e,t,r,n){for(var i=t.length,o=0;o<i;o++)e[o]=t[o]+r[o]*n;return e}function WI(e,t,r,n){for(var i=t.length,o=i&&t[0].length,a=0;a<i;a++){e[a]||(e[a]=[]);for(var s=0;s<o;s++)e[a][s]=t[a][s]+r[a][s]*n}return e}function ait(e,t){for(var r=e.length,n=t.length,i=r>n?t:e,o=Math.min(r,n),a=i[o-1]||{color:[0,0,0,0],offset:0},s=o;s<Math.max(r,n);s++)i.push({offset:a.offset,color:a.color.slice()})}function sit(e,t,r){var n=e,i=t;if(!(!n.push||!i.push)){var o=n.length,a=i.length;if(o!==a){var s=o>a;if(s)n.length=a;else for(var l=o;l<a;l++)n.push(r===1?i[l]:Zk.call(i[l]))}for(var u=n[0]&&n[0].length,l=0;l<n.length;l++)if(r===1)isNaN(n[l])&&(n[l]=i[l]);else for(var c=0;c<u;c++)isNaN(n[l][c])&&(n[l][c]=i[l][c])}}function Dg(e){if(In(e)){var t=e.length;if(In(e[0])){for(var r=[],n=0;n<t;n++)r.push(Zk.call(e[n]));return r}return Zk.call(e)}return e}function hy(e){return e[0]=Math.floor(e[0])||0,e[1]=Math.floor(e[1])||0,e[2]=Math.floor(e[2])||0,e[3]=e[3]==null?1:e[3],"rgba("+e.join(",")+")"}function lit(e){return In(e&&e[0])?2:1}var rm=0,dy=1,HB=2,Jp=3,qk=4,Jk=5,jI=6;function GI(e){return e===qk||e===Jk}function nm(e){return e===dy||e===HB}var qd=[0,0,0,0],uit=function(){function e(t){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=t}return e.prototype.isFinished=function(){return this._finished},e.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},e.prototype.needsAnimate=function(){return this.keyframes.length>=1},e.prototype.getAdditiveTrack=function(){return this._additiveTrack},e.prototype.addKeyframe=function(t,r,n){this._needsSort=!0;var i=this.keyframes,o=i.length,a=!1,s=jI,l=r;if(In(r)){var u=lit(r);s=u,(u===1&&!He(r[0])||u===2&&!He(r[0][0]))&&(a=!0)}else if(He(r)&&!s_(r))s=rm;else if($t(r))if(!isNaN(+r))s=rm;else{var c=Yi(r);c&&(l=c,s=Jp)}else if(Lb(r)){var f=_t({},l);f.colorStops=Bt(r.colorStops,function(d){return{offset:d.offset,color:Yi(d.color)}}),nit(r)?s=qk:iit(r)&&(s=Jk),l=f}o===0?this.valType=s:(s!==this.valType||s===jI)&&(a=!0),this.discrete=this.discrete||a;var h={time:t,value:l,rawValue:r,percent:0};return n&&(h.easing=n,h.easingFunc=ue(n)?n:$B[n]||WB(n)),i.push(h),h},e.prototype.prepare=function(t,r){var n=this.keyframes;this._needsSort&&n.sort(function(g,m){return g.time-m.time});for(var i=this.valType,o=n.length,a=n[o-1],s=this.discrete,l=nm(i),u=GI(i),c=0;c<o;c++){var f=n[c],h=f.value,d=a.value;f.percent=f.time/t,s||(l&&c!==o-1?sit(h,d,i):u&&ait(h.colorStops,d.colorStops))}if(!s&&i!==Jk&&r&&this.needsAnimate()&&r.needsAnimate()&&i===r.valType&&!r._finished){this._additiveTrack=r;for(var p=n[0].value,c=0;c<o;c++)i===rm?n[c].additiveValue=n[c].value-p:i===Jp?n[c].additiveValue=em([],n[c].value,p,-1):nm(i)&&(n[c].additiveValue=i===dy?em([],n[c].value,p,-1):WI([],n[c].value,p,-1))}},e.prototype.step=function(t,r){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var n=this._additiveTrack!=null,i=n?"additiveValue":"value",o=this.valType,a=this.keyframes,s=a.length,l=this.propName,u=o===Jp,c,f=this._lastFr,h=Math.min,d,p;if(s===1)d=p=a[0];else{if(r<0)c=0;else if(r<this._lastFrP){var g=h(f+1,s-1);for(c=g;c>=0&&!(a[c].percent<=r);c--);c=h(c,s-2)}else{for(c=f;c<s&&!(a[c].percent>r);c++);c=h(c-1,s-2)}p=a[c+1],d=a[c]}if(!!(d&&p)){this._lastFr=c,this._lastFrP=r;var m=p.percent-d.percent,v=m===0?1:h((r-d.percent)/m,1);p.easingFunc&&(v=p.easingFunc(v));var y=n?this._additiveValue:u?qd:t[l];if((nm(o)||u)&&!y&&(y=this._additiveValue=[]),this.discrete)t[l]=v<1?d.rawValue:p.rawValue;else if(nm(o))o===dy?Bw(y,d[i],p[i],v):oit(y,d[i],p[i],v);else if(GI(o)){var b=d[i],w=p[i],T=o===qk;t[l]={type:T?"linear":"radial",x:ts(b.x,w.x,v),y:ts(b.y,w.y,v),colorStops:Bt(b.colorStops,function(k,E){var P=w.colorStops[E];return{offset:ts(k.offset,P.offset,v),color:hy(Bw([],k.color,P.color,v))}}),global:w.global},T?(t[l].x2=ts(b.x2,w.x2,v),t[l].y2=ts(b.y2,w.y2,v)):t[l].r=ts(b.r,w.r,v)}else if(u)Bw(y,d[i],p[i],v),n||(t[l]=hy(y));else{var S=ts(d[i],p[i],v);n?this._additiveValue=S:t[l]=S}n&&this._addToTarget(t)}}},e.prototype._addToTarget=function(t){var r=this.valType,n=this.propName,i=this._additiveValue;r===rm?t[n]=t[n]+i:r===Jp?(Yi(t[n],qd),em(qd,qd,i,1),t[n]=hy(qd)):r===dy?em(t[n],t[n],i,1):r===HB&&WI(t[n],t[n],i,1)},e}(),cit=function(){function e(t,r,n,i){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=t,this._loop=r,r&&i){nA("Can' use additive animation on looped animation.");return}this._additiveAnimators=i,this._allowDiscrete=n}return e.prototype.getMaxTime=function(){return this._maxTime},e.prototype.getDelay=function(){return this._delay},e.prototype.getLoop=function(){return this._loop},e.prototype.getTarget=function(){return this._target},e.prototype.changeTarget=function(t){this._target=t},e.prototype.when=function(t,r,n){return this.whenWithKeys(t,r,ze(r),n)},e.prototype.whenWithKeys=function(t,r,n,i){for(var o=this._tracks,a=0;a<n.length;a++){var s=n[a],l=o[s];if(!l){l=o[s]=new uit(s);var u=void 0,c=this._getAdditiveTrack(s);if(c){var f=c.keyframes,h=f[f.length-1];u=h&&h.value,c.valType===Jp&&u&&(u=hy(u))}else u=this._target[s];if(u==null)continue;t>0&&l.addKeyframe(0,Dg(u),i),this._trackKeys.push(s)}l.addKeyframe(t,Dg(r[s]),i)}return this._maxTime=Math.max(this._maxTime,t),this},e.prototype.pause=function(){this._clip.pause(),this._paused=!0},e.prototype.resume=function(){this._clip.resume(),this._paused=!1},e.prototype.isPaused=function(){return!!this._paused},e.prototype.duration=function(t){return this._maxTime=t,this._force=!0,this},e.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var r=t.length,n=0;n<r;n++)t[n].call(this)},e.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,r=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,r)for(var n=0;n<r.length;n++)r[n].call(this)},e.prototype._setTracksFinished=function(){for(var t=this._tracks,r=this._trackKeys,n=0;n<r.length;n++)t[r[n]].setFinished()},e.prototype._getAdditiveTrack=function(t){var r,n=this._additiveAnimators;if(n)for(var i=0;i<n.length;i++){var o=n[i].getTrack(t);o&&(r=o)}return r},e.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var r=this,n=[],i=this._maxTime||0,o=0;o<this._trackKeys.length;o++){var a=this._trackKeys[o],s=this._tracks[a],l=this._getAdditiveTrack(a),u=s.keyframes,c=u.length;if(s.prepare(i,l),s.needsAnimate())if(!this._allowDiscrete&&s.discrete){var f=u[c-1];f&&(r._target[s.propName]=f.rawValue),s.setFinished()}else n.push(s)}if(n.length||this._force){var h=new qnt({life:i,loop:this._loop,delay:this._delay||0,onframe:function(d){r._started=2;var p=r._additiveAnimators;if(p){for(var g=!1,m=0;m<p.length;m++)if(p[m]._clip){g=!0;break}g||(r._additiveAnimators=null)}for(var m=0;m<n.length;m++)n[m].step(r._target,d);var v=r._onframeCbs;if(v)for(var m=0;m<v.length;m++)v[m](r._target,d)},ondestroy:function(){r._doneCallback()}});this._clip=h,this.animation&&this.animation.addClip(h),t&&h.setEasing(t)}else this._doneCallback();return this}},e.prototype.stop=function(t){if(!!this._clip){var r=this._clip;t&&r.onframe(1),this._abortedCallback()}},e.prototype.delay=function(t){return this._delay=t,this},e.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},e.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},e.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},e.prototype.getClip=function(){return this._clip},e.prototype.getTrack=function(t){return this._tracks[t]},e.prototype.getTracks=function(){var t=this;return Bt(this._trackKeys,function(r){return t._tracks[r]})},e.prototype.stopTracks=function(t,r){if(!t.length||!this._clip)return!0;for(var n=this._tracks,i=this._trackKeys,o=0;o<t.length;o++){var a=n[t[o]];a&&!a.isFinished()&&(r?a.step(this._target,1):this._started===1&&a.step(this._target,0),a.setFinished())}for(var s=!0,o=0;o<i.length;o++)if(!n[i[o]].isFinished()){s=!1;break}return s&&this._abortedCallback(),s},e.prototype.saveTo=function(t,r,n){if(!!t){r=r||this._trackKeys;for(var i=0;i<r.length;i++){var o=r[i],a=this._tracks[o];if(!(!a||a.isFinished())){var s=a.keyframes,l=s[n?0:s.length-1];l&&(t[o]=Dg(l.rawValue))}}}},e.prototype.__changeFinalValue=function(t,r){r=r||ze(t);for(var n=0;n<r.length;n++){var i=r[n],o=this._tracks[i];if(!!o){var a=o.keyframes;if(a.length>1){var s=a.pop();o.addKeyframe(s.time,t[i]),o.prepare(this._maxTime,o.getAdditiveTrack())}}}},e}();const uA=cit;function uh(){return new Date().getTime()}var fit=function(e){Ke(t,e);function t(r){var n=e.call(this)||this;return n._running=!1,n._time=0,n._pausedTime=0,n._pauseStart=0,n._paused=!1,r=r||{},n.stage=r.stage||{},n}return t.prototype.addClip=function(r){r.animation&&this.removeClip(r),this._head?(this._tail.next=r,r.prev=this._tail,r.next=null,this._tail=r):this._head=this._tail=r,r.animation=this},t.prototype.addAnimator=function(r){r.animation=this;var n=r.getClip();n&&this.addClip(n)},t.prototype.removeClip=function(r){if(!!r.animation){var n=r.prev,i=r.next;n?n.next=i:this._head=i,i?i.prev=n:this._tail=n,r.next=r.prev=r.animation=null}},t.prototype.removeAnimator=function(r){var n=r.getClip();n&&this.removeClip(n),r.animation=null},t.prototype.update=function(r){for(var n=uh()-this._pausedTime,i=n-this._time,o=this._head;o;){var a=o.next,s=o.step(n,i);s&&(o.ondestroy(),this.removeClip(o)),o=a}this._time=n,r||(this.trigger("frame",i),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var r=this;this._running=!0;function n(){r._running&&(Hk(n),!r._paused&&r.update())}Hk(n)},t.prototype.start=function(){this._running||(this._time=uh(),this._pausedTime=0,this._startLoop())},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){this._paused||(this._pauseStart=uh(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=uh()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var r=this._head;r;){var n=r.next;r.prev=r.next=r.animation=null,r=n}this._head=this._tail=null},t.prototype.isFinished=function(){return this._head==null},t.prototype.animate=function(r,n){n=n||{},this.start();var i=new uA(r,n.loop);return this.addAnimator(i),i},t}(Vo);const hit=fit;var dit=300,zw=me.domSupported,Vw=function(){var e=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],t=["touchstart","touchend","touchmove"],r={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},n=Bt(e,function(i){var o=i.replace("mouse","pointer");return r.hasOwnProperty(o)?o:i});return{mouse:e,touch:t,pointer:n}}(),HI={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},XI=!1;function Qk(e){var t=e.pointerType;return t==="pen"||t==="touch"}function pit(e){e.touching=!0,e.touchTimer!=null&&(clearTimeout(e.touchTimer),e.touchTimer=null),e.touchTimer=setTimeout(function(){e.touching=!1,e.touchTimer=null},700)}function Uw(e){e&&(e.zrByTouch=!0)}function git(e,t){return $i(e.dom,new vit(e,t),!0)}function XB(e,t){for(var r=t,n=!1;r&&r.nodeType!==9&&!(n=r.domBelongToZr||r!==t&&r===e.painterRoot);)r=r.parentNode;return n}var vit=function(){function e(t,r){this.stopPropagation=xn,this.stopImmediatePropagation=xn,this.preventDefault=xn,this.type=r.type,this.target=this.currentTarget=t.dom,this.pointerType=r.pointerType,this.clientX=r.clientX,this.clientY=r.clientY}return e}(),_o={mousedown:function(e){e=$i(this.dom,e),this.__mayPointerCapture=[e.zrX,e.zrY],this.trigger("mousedown",e)},mousemove:function(e){e=$i(this.dom,e);var t=this.__mayPointerCapture;t&&(e.zrX!==t[0]||e.zrY!==t[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",e)},mouseup:function(e){e=$i(this.dom,e),this.__togglePointerCapture(!1),this.trigger("mouseup",e)},mouseout:function(e){e=$i(this.dom,e);var t=e.toElement||e.relatedTarget;XB(this,t)||(this.__pointerCapturing&&(e.zrEventControl="no_globalout"),this.trigger("mouseout",e))},wheel:function(e){XI=!0,e=$i(this.dom,e),this.trigger("mousewheel",e)},mousewheel:function(e){XI||(e=$i(this.dom,e),this.trigger("mousewheel",e))},touchstart:function(e){e=$i(this.dom,e),Uw(e),this.__lastTouchMoment=new Date,this.handler.processGesture(e,"start"),_o.mousemove.call(this,e),_o.mousedown.call(this,e)},touchmove:function(e){e=$i(this.dom,e),Uw(e),this.handler.processGesture(e,"change"),_o.mousemove.call(this,e)},touchend:function(e){e=$i(this.dom,e),Uw(e),this.handler.processGesture(e,"end"),_o.mouseup.call(this,e),+new Date-+this.__lastTouchMoment<dit&&_o.click.call(this,e)},pointerdown:function(e){_o.mousedown.call(this,e)},pointermove:function(e){Qk(e)||_o.mousemove.call(this,e)},pointerup:function(e){_o.mouseup.call(this,e)},pointerout:function(e){Qk(e)||_o.mouseout.call(this,e)}};U(["click","dblclick","contextmenu"],function(e){_o[e]=function(t){t=$i(this.dom,t),this.trigger(e,t)}});var tP={pointermove:function(e){Qk(e)||tP.mousemove.call(this,e)},pointerup:function(e){tP.mouseup.call(this,e)},mousemove:function(e){this.trigger("mousemove",e)},mouseup:function(e){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",e),t&&(e.zrEventControl="only_globalout",this.trigger("mouseout",e))}};function mit(e,t){var r=t.domHandlers;me.pointerEventsSupported?U(Vw.pointer,function(n){py(t,n,function(i){r[n].call(e,i)})}):(me.touchEventsSupported&&U(Vw.touch,function(n){py(t,n,function(i){r[n].call(e,i),pit(t)})}),U(Vw.mouse,function(n){py(t,n,function(i){i=aA(i),t.touching||r[n].call(e,i)})}))}function yit(e,t){me.pointerEventsSupported?U(HI.pointer,r):me.touchEventsSupported||U(HI.mouse,r);function r(n){function i(o){o=aA(o),XB(e,o.target)||(o=git(e,o),t.domHandlers[n].call(e,o))}py(t,n,i,{capture:!0})}}function py(e,t,r,n){e.mounted[t]=r,e.listenerOpts[t]=n,Ent(e.domTarget,t,r,n)}function Ww(e){var t=e.mounted;for(var r in t)t.hasOwnProperty(r)&&Cnt(e.domTarget,r,t[r],e.listenerOpts[r]);e.mounted={}}var YI=function(){function e(t,r){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=r}return e}(),_it=function(e){Ke(t,e);function t(r,n){var i=e.call(this)||this;return i.__pointerCapturing=!1,i.dom=r,i.painterRoot=n,i._localHandlerScope=new YI(r,_o),zw&&(i._globalHandlerScope=new YI(document,tP)),mit(i,i._localHandlerScope),i}return t.prototype.dispose=function(){Ww(this._localHandlerScope),zw&&Ww(this._globalHandlerScope)},t.prototype.setCursor=function(r){this.dom.style&&(this.dom.style.cursor=r||"default")},t.prototype.__togglePointerCapture=function(r){if(this.__mayPointerCapture=null,zw&&+this.__pointerCapturing^+r){this.__pointerCapturing=r;var n=this._globalHandlerScope;r?yit(this,n):Ww(n)}},t}(Vo);const bit=_it;var YB=1;me.hasGlobalWindow&&(YB=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var p_=YB,eP=.4,rP="#333",nP="#ccc",wit="#eee",KI=sA,ZI=5e-5;function mu(e){return e>ZI||e<-ZI}var yu=[],wf=[],jw=jh(),Gw=Math.abs,Ju=function(){function e(){}return e.prototype.getLocalTransform=function(t){return e.getLocalTransform(this,t)},e.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},e.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},e.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},e.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},e.prototype.needLocalTransform=function(){return mu(this.rotation)||mu(this.x)||mu(this.y)||mu(this.scaleX-1)||mu(this.scaleY-1)||mu(this.skewX)||mu(this.skewY)},e.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,r=this.needLocalTransform(),n=this.transform;if(!(r||t)){n&&KI(n);return}n=n||jh(),r?this.getLocalTransform(n):KI(n),t&&(r?Th(n,t,n):LB(n,t)),this.transform=n,this._resolveGlobalScaleRatio(n)},e.prototype._resolveGlobalScaleRatio=function(t){var r=this.globalScaleRatio;if(r!=null&&r!==1){this.getGlobalScale(yu);var n=yu[0]<0?-1:1,i=yu[1]<0?-1:1,o=((yu[0]-n)*r+n)/yu[0]||0,a=((yu[1]-i)*r+i)/yu[1]||0;t[0]*=o,t[1]*=o,t[2]*=a,t[3]*=a}this.invTransform=this.invTransform||jh(),Rb(this.invTransform,t)},e.prototype.getComputedTransform=function(){for(var t=this,r=[];t;)r.push(t),t=t.parent;for(;t=r.pop();)t.updateTransform();return this.transform},e.prototype.setLocalTransform=function(t){if(!!t){var r=t[0]*t[0]+t[1]*t[1],n=t[2]*t[2]+t[3]*t[3],i=Math.atan2(t[1],t[0]),o=Math.PI/2+i-Math.atan2(t[3],t[2]);n=Math.sqrt(n)*Math.cos(o),r=Math.sqrt(r),this.skewX=o,this.skewY=0,this.rotation=-i,this.x=+t[4],this.y=+t[5],this.scaleX=r,this.scaleY=n,this.originX=0,this.originY=0}},e.prototype.decomposeTransform=function(){if(!!this.transform){var t=this.parent,r=this.transform;t&&t.transform&&(Th(wf,t.invTransform,r),r=wf);var n=this.originX,i=this.originY;(n||i)&&(jw[4]=n,jw[5]=i,Th(wf,r,jw),wf[4]-=n,wf[5]-=i,r=wf),this.setLocalTransform(r)}},e.prototype.getGlobalScale=function(t){var r=this.transform;return t=t||[],r?(t[0]=Math.sqrt(r[0]*r[0]+r[1]*r[1]),t[1]=Math.sqrt(r[2]*r[2]+r[3]*r[3]),r[0]<0&&(t[0]=-t[0]),r[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},e.prototype.transformCoordToLocal=function(t,r){var n=[t,r],i=this.invTransform;return i&&Vn(n,n,i),n},e.prototype.transformCoordToGlobal=function(t,r){var n=[t,r],i=this.transform;return i&&Vn(n,n,i),n},e.prototype.getLineScale=function(){var t=this.transform;return t&&Gw(t[0]-1)>1e-10&&Gw(t[3]-1)>1e-10?Math.sqrt(Gw(t[0]*t[3]-t[2]*t[1])):1},e.prototype.copyTransform=function(t){Sit(this,t)},e.getLocalTransform=function(t,r){r=r||[];var n=t.originX||0,i=t.originY||0,o=t.scaleX,a=t.scaleY,s=t.anchorX,l=t.anchorY,u=t.rotation||0,c=t.x,f=t.y,h=t.skewX?Math.tan(t.skewX):0,d=t.skewY?Math.tan(-t.skewY):0;if(n||i||s||l){var p=n+s,g=i+l;r[4]=-p*o-h*g*a,r[5]=-g*a-d*p*o}else r[4]=r[5]=0;return r[0]=o,r[3]=a,r[1]=d*o,r[2]=h*a,u&&lA(r,r,u),r[4]+=n+c,r[5]+=i+f,r},e.initDefaultProps=function(){var t=e.prototype;t.scaleX=t.scaleY=t.globalScaleRatio=1,t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0}(),e}(),xa=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function Sit(e,t){for(var r=0;r<xa.length;r++){var n=xa[r];e[n]=t[n]}}var qI={};function bi(e,t){t=t||wc;var r=qI[t];r||(r=qI[t]=new Jv(500));var n=r.get(e);return n==null&&(n=Vc.measureText(e,t).width,r.put(e,n)),n}function JI(e,t,r,n){var i=bi(e,t),o=fA(t),a=Qp(0,i,r),s=nh(0,o,n),l=new Le(a,s,i,o);return l}function cA(e,t,r,n){var i=((e||"")+"").split(`
`),o=i.length;if(o===1)return JI(i[0],t,r,n);for(var a=new Le(0,0,0,0),s=0;s<i.length;s++){var l=JI(i[s],t,r,n);s===0?a.copy(l):a.union(l)}return a}function Qp(e,t,r){return r==="right"?e-=t:r==="center"&&(e-=t/2),e}function nh(e,t,r){return r==="middle"?e-=t/2:r==="bottom"&&(e-=t),e}function fA(e){return bi("\u56FD",e)}function ms(e,t){return typeof e=="string"?e.lastIndexOf("%")>=0?parseFloat(e)/100*t:parseFloat(e):e}function g_(e,t,r){var n=t.position||"inside",i=t.distance!=null?t.distance:5,o=r.height,a=r.width,s=o/2,l=r.x,u=r.y,c="left",f="top";if(n instanceof Array)l+=ms(n[0],r.width),u+=ms(n[1],r.height),c=null,f=null;else switch(n){case"left":l-=i,u+=s,c="right",f="middle";break;case"right":l+=i+a,u+=s,f="middle";break;case"top":l+=a/2,u-=i,c="center",f="bottom";break;case"bottom":l+=a/2,u+=o+i,c="center";break;case"inside":l+=a/2,u+=s,c="center",f="middle";break;case"insideLeft":l+=i,u+=s,f="middle";break;case"insideRight":l+=a-i,u+=s,c="right",f="middle";break;case"insideTop":l+=a/2,u+=i,c="center";break;case"insideBottom":l+=a/2,u+=o-i,c="center",f="bottom";break;case"insideTopLeft":l+=i,u+=i;break;case"insideTopRight":l+=a-i,u+=i,c="right";break;case"insideBottomLeft":l+=i,u+=o-i,f="bottom";break;case"insideBottomRight":l+=a-i,u+=o-i,c="right",f="bottom";break}return e=e||{},e.x=l,e.y=u,e.align=c,e.verticalAlign=f,e}var Hw="__zr_normal__",Xw=xa.concat(["ignore"]),Tit=Uc(xa,function(e,t){return e[t]=!0,e},{ignore:!1}),Sf={},kit=new Le(0,0,0,0),hA=function(){function e(t){this.id=PB(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return e.prototype._init=function(t){this.attr(t)},e.prototype.drift=function(t,r,n){switch(this.draggable){case"horizontal":r=0;break;case"vertical":t=0;break}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=t,i[5]+=r,this.decomposeTransform(),this.markRedraw()},e.prototype.beforeUpdate=function(){},e.prototype.afterUpdate=function(){},e.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},e.prototype.updateInnerText=function(t){var r=this._textContent;if(r&&(!r.ignore||t)){this.textConfig||(this.textConfig={});var n=this.textConfig,i=n.local,o=r.innerTransformable,a=void 0,s=void 0,l=!1;o.parent=i?this:null;var u=!1;if(o.copyTransform(r),n.position!=null){var c=kit;n.layoutRect?c.copy(n.layoutRect):c.copy(this.getBoundingRect()),i||c.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(Sf,n,c):g_(Sf,n,c),o.x=Sf.x,o.y=Sf.y,a=Sf.align,s=Sf.verticalAlign;var f=n.origin;if(f&&n.rotation!=null){var h=void 0,d=void 0;f==="center"?(h=c.width*.5,d=c.height*.5):(h=ms(f[0],c.width),d=ms(f[1],c.height)),u=!0,o.originX=-o.x+h+(i?0:c.x),o.originY=-o.y+d+(i?0:c.y)}}n.rotation!=null&&(o.rotation=n.rotation);var p=n.offset;p&&(o.x+=p[0],o.y+=p[1],u||(o.originX=-p[0],o.originY=-p[1]));var g=n.inside==null?typeof n.position=="string"&&n.position.indexOf("inside")>=0:n.inside,m=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),v=void 0,y=void 0,b=void 0;g&&this.canBeInsideText()?(v=n.insideFill,y=n.insideStroke,(v==null||v==="auto")&&(v=this.getInsideTextFill()),(y==null||y==="auto")&&(y=this.getInsideTextStroke(v),b=!0)):(v=n.outsideFill,y=n.outsideStroke,(v==null||v==="auto")&&(v=this.getOutsideFill()),(y==null||y==="auto")&&(y=this.getOutsideStroke(v),b=!0)),v=v||"#000",(v!==m.fill||y!==m.stroke||b!==m.autoStroke||a!==m.align||s!==m.verticalAlign)&&(l=!0,m.fill=v,m.stroke=y,m.autoStroke=b,m.align=a,m.verticalAlign=s,r.setDefaultTextStyle(m)),r.__dirty|=yi,l&&r.dirtyStyle(!0)}},e.prototype.canBeInsideText=function(){return!0},e.prototype.getInsideTextFill=function(){return"#fff"},e.prototype.getInsideTextStroke=function(t){return"#000"},e.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?nP:rP},e.prototype.getOutsideStroke=function(t){var r=this.__zr&&this.__zr.getBackgroundColor(),n=typeof r=="string"&&Yi(r);n||(n=[255,255,255,1]);for(var i=n[3],o=this.__zr.isDarkMode(),a=0;a<3;a++)n[a]=n[a]*i+(o?0:255)*(1-i);return n[3]=1,hs(n,"rgba")},e.prototype.traverse=function(t,r){},e.prototype.attrKV=function(t,r){t==="textConfig"?this.setTextConfig(r):t==="textContent"?this.setTextContent(r):t==="clipPath"?this.setClipPath(r):t==="extra"?(this.extra=this.extra||{},_t(this.extra,r)):this[t]=r},e.prototype.hide=function(){this.ignore=!0,this.markRedraw()},e.prototype.show=function(){this.ignore=!1,this.markRedraw()},e.prototype.attr=function(t,r){if(typeof t=="string")this.attrKV(t,r);else if(Yt(t))for(var n=t,i=ze(n),o=0;o<i.length;o++){var a=i[o];this.attrKV(a,t[a])}return this.markRedraw(),this},e.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var r=this._normalState,n=0;n<this.animators.length;n++){var i=this.animators[n],o=i.__fromStateTransition;if(!(i.getLoop()||o&&o!==Hw)){var a=i.targetName,s=a?r[a]:r;i.saveTo(s)}}},e.prototype._innerSaveToNormal=function(t){var r=this._normalState;r||(r=this._normalState={}),t.textConfig&&!r.textConfig&&(r.textConfig=this.textConfig),this._savePrimaryToNormal(t,r,Xw)},e.prototype._savePrimaryToNormal=function(t,r,n){for(var i=0;i<n.length;i++){var o=n[i];t[o]!=null&&!(o in r)&&(r[o]=this[o])}},e.prototype.hasState=function(){return this.currentStates.length>0},e.prototype.getState=function(t){return this.states[t]},e.prototype.ensureState=function(t){var r=this.states;return r[t]||(r[t]={}),r[t]},e.prototype.clearStates=function(t){this.useState(Hw,!1,t)},e.prototype.useState=function(t,r,n,i){var o=t===Hw,a=this.hasState();if(!(!a&&o)){var s=this.currentStates,l=this.stateTransition;if(!(De(s,t)>=0&&(r||s.length===1))){var u;if(this.stateProxy&&!o&&(u=this.stateProxy(t)),u||(u=this.states&&this.states[t]),!u&&!o){nA("State "+t+" not exists.");return}o||this.saveCurrentToNormalState(u);var c=!!(u&&u.hoverLayer||i);c&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,u,this._normalState,r,!n&&!this.__inHover&&l&&l.duration>0,l);var f=this._textContent,h=this._textGuide;return f&&f.useState(t,r,n,c),h&&h.useState(t,r,n,c),o?(this.currentStates=[],this._normalState={}):r?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!c&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~yi),u}}},e.prototype.useStates=function(t,r,n){if(!t.length)this.clearStates();else{var i=[],o=this.currentStates,a=t.length,s=a===o.length;if(s){for(var l=0;l<a;l++)if(t[l]!==o[l]){s=!1;break}}if(s)return;for(var l=0;l<a;l++){var u=t[l],c=void 0;this.stateProxy&&(c=this.stateProxy(u,t)),c||(c=this.states[u]),c&&i.push(c)}var f=i[a-1],h=!!(f&&f.hoverLayer||n);h&&this._toggleHoverLayerFlag(!0);var d=this._mergeStates(i),p=this.stateTransition;this.saveCurrentToNormalState(d),this._applyStateObj(t.join(","),d,this._normalState,!1,!r&&!this.__inHover&&p&&p.duration>0,p);var g=this._textContent,m=this._textGuide;g&&g.useStates(t,r,h),m&&m.useStates(t,r,h),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!h&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~yi)}},e.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var r=this.animators[t];r.targetName&&r.changeTarget(this[r.targetName])}},e.prototype.removeState=function(t){var r=De(this.currentStates,t);if(r>=0){var n=this.currentStates.slice();n.splice(r,1),this.useStates(n)}},e.prototype.replaceState=function(t,r,n){var i=this.currentStates.slice(),o=De(i,t),a=De(i,r)>=0;o>=0?a?i.splice(o,1):i[o]=r:n&&!a&&i.push(r),this.useStates(i)},e.prototype.toggleState=function(t,r){r?this.useState(t,!0):this.removeState(t)},e.prototype._mergeStates=function(t){for(var r={},n,i=0;i<t.length;i++){var o=t[i];_t(r,o),o.textConfig&&(n=n||{},_t(n,o.textConfig))}return n&&(r.textConfig=n),r},e.prototype._applyStateObj=function(t,r,n,i,o,a){var s=!(r&&i);r&&r.textConfig?(this.textConfig=_t({},i?this.textConfig:n.textConfig),_t(this.textConfig,r.textConfig)):s&&n.textConfig&&(this.textConfig=n.textConfig);for(var l={},u=!1,c=0;c<Xw.length;c++){var f=Xw[c],h=o&&Tit[f];r&&r[f]!=null?h?(u=!0,l[f]=r[f]):this[f]=r[f]:s&&n[f]!=null&&(h?(u=!0,l[f]=n[f]):this[f]=n[f])}if(!o)for(var c=0;c<this.animators.length;c++){var d=this.animators[c],p=d.targetName;d.getLoop()||d.__changeFinalValue(p?(r||n)[p]:r||n)}u&&this._transitionState(t,l,a)},e.prototype._attachComponent=function(t){if(!(t.__zr&&!t.__hostTarget)&&t!==this){var r=this.__zr;r&&t.addSelfToZr(r),t.__zr=r,t.__hostTarget=this}},e.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},e.prototype.getClipPath=function(){return this._clipPath},e.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},e.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},e.prototype.getTextContent=function(){return this._textContent},e.prototype.setTextContent=function(t){var r=this._textContent;r!==t&&(r&&r!==t&&this.removeTextContent(),t.innerTransformable=new Ju,this._attachComponent(t),this._textContent=t,this.markRedraw())},e.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),_t(this.textConfig,t),this.markRedraw()},e.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},e.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},e.prototype.getTextGuideLine=function(){return this._textGuide},e.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},e.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},e.prototype.markRedraw=function(){this.__dirty|=yi;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},e.prototype.dirty=function(){this.markRedraw()},e.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var r=this._textContent,n=this._textGuide;r&&(r.__inHover=t),n&&(n.__inHover=t)},e.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var r=this.animators;if(r)for(var n=0;n<r.length;n++)t.animation.addAnimator(r[n]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){if(!!this.__zr){this.__zr=null;var r=this.animators;if(r)for(var n=0;n<r.length;n++)t.animation.removeAnimator(r[n]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},e.prototype.animate=function(t,r,n){var i=t?this[t]:this,o=new uA(i,r,n);return t&&(o.targetName=t),this.addAnimator(o,t),o},e.prototype.addAnimator=function(t,r){var n=this.__zr,i=this;t.during(function(){i.updateDuringAnimation(r)}).done(function(){var o=i.animators,a=De(o,t);a>=0&&o.splice(a,1)}),this.animators.push(t),n&&n.animation.addAnimator(t),n&&n.wakeUp()},e.prototype.updateDuringAnimation=function(t){this.markRedraw()},e.prototype.stopAnimation=function(t,r){for(var n=this.animators,i=n.length,o=[],a=0;a<i;a++){var s=n[a];!t||t===s.scope?s.stop(r):o.push(s)}return this.animators=o,this},e.prototype.animateTo=function(t,r,n){Yw(this,t,r,n)},e.prototype.animateFrom=function(t,r,n){Yw(this,t,r,n,!0)},e.prototype._transitionState=function(t,r,n,i){for(var o=Yw(this,r,n,i),a=0;a<o.length;a++)o[a].__fromStateTransition=t},e.prototype.getBoundingRect=function(){return null},e.prototype.getPaintRect=function(){return null},e.initDefaultProps=function(){var t=e.prototype;t.type="element",t.name="",t.ignore=t.silent=t.isGroup=t.draggable=t.dragging=t.ignoreClip=t.__inHover=!1,t.__dirty=yi;function r(n,i,o,a){Object.defineProperty(t,n,{get:function(){if(!this[i]){var l=this[i]=[];s(this,l)}return this[i]},set:function(l){this[o]=l[0],this[a]=l[1],this[i]=l,s(this,l)}});function s(l,u){Object.defineProperty(u,0,{get:function(){return l[o]},set:function(c){l[o]=c}}),Object.defineProperty(u,1,{get:function(){return l[a]},set:function(c){l[a]=c}})}}Object.defineProperty&&(r("position","_legacyPos","x","y"),r("scale","_legacyScale","scaleX","scaleY"),r("origin","_legacyOrigin","originX","originY"))}(),e}();zo(hA,Vo);zo(hA,Ju);function Yw(e,t,r,n,i){r=r||{};var o=[];KB(e,"",e,t,r,n,o,i);var a=o.length,s=!1,l=r.done,u=r.aborted,c=function(){s=!0,a--,a<=0&&(s?l&&l():u&&u())},f=function(){a--,a<=0&&(s?l&&l():u&&u())};a||l&&l(),o.length>0&&r.during&&o[0].during(function(p,g){r.during(g)});for(var h=0;h<o.length;h++){var d=o[h];c&&d.done(c),f&&d.aborted(f),r.force&&d.duration(r.duration),d.start(r.easing)}return o}function Kw(e,t,r){for(var n=0;n<r;n++)e[n]=t[n]}function Pit(e){return In(e[0])}function Eit(e,t,r){if(In(t[r]))if(In(e[r])||(e[r]=[]),ki(t[r])){var n=t[r].length;e[r].length!==n&&(e[r]=new t[r].constructor(n),Kw(e[r],t[r],n))}else{var i=t[r],o=e[r],a=i.length;if(Pit(i))for(var s=i[0].length,l=0;l<a;l++)o[l]?Kw(o[l],i[l],s):o[l]=Array.prototype.slice.call(i[l]);else Kw(o,i,a);o.length=i.length}else e[r]=t[r]}function Cit(e,t){return e===t||In(e)&&In(t)&&Ait(e,t)}function Ait(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function KB(e,t,r,n,i,o,a,s){for(var l=ze(n),u=i.duration,c=i.delay,f=i.additive,h=i.setToFinal,d=!Yt(o),p=e.animators,g=[],m=0;m<l.length;m++){var v=l[m],y=n[v];if(y!=null&&r[v]!=null&&(d||o[v]))if(Yt(y)&&!In(y)&&!Lb(y)){if(t){s||(r[v]=y,e.updateDuringAnimation(t));continue}KB(e,v,r[v],y,i,o&&o[v],a,s)}else g.push(v);else s||(r[v]=y,e.updateDuringAnimation(t),g.push(v))}var b=g.length;if(!f&&b)for(var w=0;w<p.length;w++){var T=p[w];if(T.targetName===t){var S=T.stopTracks(g);if(S){var k=De(p,T);p.splice(k,1)}}}if(i.force||(g=ln(g,function(A){return!Cit(n[A],r[A])}),b=g.length),b>0||i.force&&!a.length){var E=void 0,P=void 0,C=void 0;if(s){P={},h&&(E={});for(var w=0;w<b;w++){var v=g[w];P[v]=r[v],h?E[v]=n[v]:r[v]=n[v]}}else if(h){C={};for(var w=0;w<b;w++){var v=g[w];C[v]=Dg(r[v]),Eit(r,n,v)}}var T=new uA(r,!1,!1,f?ln(p,function(L){return L.targetName===t}):null);T.targetName=t,i.scope&&(T.scope=i.scope),h&&E&&T.whenWithKeys(0,E,g),C&&T.whenWithKeys(0,C,g),T.whenWithKeys(u==null?500:u,s?P:n,g).delay(c||0),e.addAnimator(T,t),a.push(T)}}const ZB=hA;var qB=function(e){Ke(t,e);function t(r){var n=e.call(this)||this;return n.isGroup=!0,n._children=[],n.attr(r),n}return t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(r){return this._children[r]},t.prototype.childOfName=function(r){for(var n=this._children,i=0;i<n.length;i++)if(n[i].name===r)return n[i]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(r){return r&&r!==this&&r.parent!==this&&(this._children.push(r),this._doAdd(r)),this},t.prototype.addBefore=function(r,n){if(r&&r!==this&&r.parent!==this&&n&&n.parent===this){var i=this._children,o=i.indexOf(n);o>=0&&(i.splice(o,0,r),this._doAdd(r))}return this},t.prototype.replace=function(r,n){var i=De(this._children,r);return i>=0&&this.replaceAt(n,i),this},t.prototype.replaceAt=function(r,n){var i=this._children,o=i[n];if(r&&r!==this&&r.parent!==this&&r!==o){i[n]=r,o.parent=null;var a=this.__zr;a&&o.removeSelfFromZr(a),this._doAdd(r)}return this},t.prototype._doAdd=function(r){r.parent&&r.parent.remove(r),r.parent=this;var n=this.__zr;n&&n!==r.__zr&&r.addSelfToZr(n),n&&n.refresh()},t.prototype.remove=function(r){var n=this.__zr,i=this._children,o=De(i,r);return o<0?this:(i.splice(o,1),r.parent=null,n&&r.removeSelfFromZr(n),n&&n.refresh(),this)},t.prototype.removeAll=function(){for(var r=this._children,n=this.__zr,i=0;i<r.length;i++){var o=r[i];n&&o.removeSelfFromZr(n),o.parent=null}return r.length=0,this},t.prototype.eachChild=function(r,n){for(var i=this._children,o=0;o<i.length;o++){var a=i[o];r.call(n,a,o)}return this},t.prototype.traverse=function(r,n){for(var i=0;i<this._children.length;i++){var o=this._children[i],a=r.call(n,o);o.isGroup&&!a&&o.traverse(r,n)}return this},t.prototype.addSelfToZr=function(r){e.prototype.addSelfToZr.call(this,r);for(var n=0;n<this._children.length;n++){var i=this._children[n];i.addSelfToZr(r)}},t.prototype.removeSelfFromZr=function(r){e.prototype.removeSelfFromZr.call(this,r);for(var n=0;n<this._children.length;n++){var i=this._children[n];i.removeSelfFromZr(r)}},t.prototype.getBoundingRect=function(r){for(var n=new Le(0,0,0,0),i=r||this._children,o=[],a=null,s=0;s<i.length;s++){var l=i[s];if(!(l.ignore||l.invisible)){var u=l.getBoundingRect(),c=l.getLocalTransform(o);c?(Le.applyTransform(n,u,c),a=a||n.clone(),a.union(n)):(a=a||u.clone(),a.union(u))}}return a||n},t}(ZB);qB.prototype.type="group";const ar=qB;/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var gy={},JB={};function xit(e){delete JB[e]}function Mit(e){if(!e)return!1;if(typeof e=="string")return d_(e,1)<eP;if(e.colorStops){for(var t=e.colorStops,r=0,n=t.length,i=0;i<n;i++)r+=d_(t[i].color,1);return r/=n,r<eP}return!1}var Iit=function(){function e(t,r,n){var i=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,n=n||{},this.dom=r,this.id=t;var o=new Wnt,a=n.renderer||"canvas";gy[a]||(a=ze(gy)[0]),n.useDirtyRect=n.useDirtyRect==null?!1:n.useDirtyRect;var s=new gy[a](r,o,n,t),l=n.ssr||s.ssrOnly;this.storage=o,this.painter=s;var u=!me.node&&!me.worker&&!l?new bit(s.getViewportRoot(),s.root):null,c=n.useCoarsePointer,f=c==null||c==="auto"?me.touchEventsSupported:!!c,h=44,d;f&&(d=_e(n.pointerSize,h)),this.handler=new $nt(o,s,u,s.root,d),this.animation=new hit({stage:{update:l?null:function(){return i._flush(!0)}}}),l||this.animation.start()}return e.prototype.add=function(t){!t||(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},e.prototype.remove=function(t){!t||(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},e.prototype.configLayer=function(t,r){this.painter.configLayer&&this.painter.configLayer(t,r),this.refresh()},e.prototype.setBackgroundColor=function(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=Mit(t)},e.prototype.getBackgroundColor=function(){return this._backgroundColor},e.prototype.setDarkMode=function(t){this._darkMode=t},e.prototype.isDarkMode=function(){return this._darkMode},e.prototype.refreshImmediately=function(t){t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},e.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},e.prototype.flush=function(){this._flush(!1)},e.prototype._flush=function(t){var r,n=uh();this._needsRefresh&&(r=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(r=!0,this.refreshHoverImmediately());var i=uh();r?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:i-n})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},e.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},e.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},e.prototype.refreshHover=function(){this._needsRefreshHover=!0},e.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover()},e.prototype.resize=function(t){t=t||{},this.painter.resize(t.width,t.height),this.handler.resize()},e.prototype.clearAnimation=function(){this.animation.clear()},e.prototype.getWidth=function(){return this.painter.getWidth()},e.prototype.getHeight=function(){return this.painter.getHeight()},e.prototype.setCursorStyle=function(t){this.handler.setCursorStyle(t)},e.prototype.findHover=function(t,r){return this.handler.findHover(t,r)},e.prototype.on=function(t,r,n){return this.handler.on(t,r,n),this},e.prototype.off=function(t,r){this.handler.off(t,r)},e.prototype.trigger=function(t,r){this.handler.trigger(t,r)},e.prototype.clear=function(){for(var t=this.storage.getRoots(),r=0;r<t.length;r++)t[r]instanceof ar&&t[r].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},e.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,xit(this.id)},e}();function QI(e,t){var r=new Iit(PB(),e,t);return JB[r.id]=r,r}function Lit(e,t){gy[e]=t}var t6=1e-4,QB=20;function Oit(e){return e.replace(/^\s+|\s+$/g,"")}function ys(e,t,r,n){var i=t[0],o=t[1],a=r[0],s=r[1],l=o-i,u=s-a;if(l===0)return u===0?a:(a+s)/2;if(n)if(l>0){if(e<=i)return a;if(e>=o)return s}else{if(e>=i)return a;if(e<=o)return s}else{if(e===i)return a;if(e===o)return s}return(e-i)/l*u+a}function Er(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%";break}return $t(e)?Oit(e).match(/%$/)?parseFloat(e)/100*t:parseFloat(e):e==null?NaN:+e}function Mr(e,t,r){return t==null&&(t=10),t=Math.min(Math.max(0,t),QB),e=(+e).toFixed(t),r?e:+e}function v_(e){return e.sort(function(t,r){return t-r}),e}function ya(e){if(e=+e,isNaN(e))return 0;if(e>1e-14){for(var t=1,r=0;r<15;r++,t*=10)if(Math.round(e*t)/t===e)return r}return Rit(e)}function Rit(e){var t=e.toString().toLowerCase(),r=t.indexOf("e"),n=r>0?+t.slice(r+1):0,i=r>0?r:t.length,o=t.indexOf("."),a=o<0?0:i-1-o;return Math.max(0,a-n)}function Dit(e,t){var r=Math.log,n=Math.LN10,i=Math.floor(r(e[1]-e[0])/n),o=Math.round(r(Math.abs(t[1]-t[0]))/n),a=Math.min(Math.max(-i+o,0),20);return isFinite(a)?a:20}function Nit(e,t){var r=Math.max(ya(e),ya(t)),n=e+t;return r>QB?n:Mr(n,r)}function tz(e){var t=Math.PI*2;return(e%t+t)%t}function m_(e){return e>-t6&&e<t6}var Fit=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function _s(e){if(e instanceof Date)return e;if($t(e)){var t=Fit.exec(e);if(!t)return new Date(NaN);if(t[8]){var r=+t[4]||0;return t[8].toUpperCase()!=="Z"&&(r-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,r,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0))}else return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0)}else if(e==null)return new Date(NaN);return new Date(Math.round(e))}function $it(e){return Math.pow(10,dA(e))}function dA(e){if(e===0)return 0;var t=Math.floor(Math.log(e)/Math.LN10);return e/Math.pow(10,t)>=10&&t++,t}function ez(e,t){var r=dA(e),n=Math.pow(10,r),i=e/n,o;return t?i<1.5?o=1:i<2.5?o=2:i<4?o=3:i<7?o=5:o=10:i<1?o=1:i<2?o=2:i<3?o=3:i<5?o=5:o=10,e=o*n,r>=-20?+e.toFixed(r<0?-r:0):e}function e6(e){e.sort(function(l,u){return s(l,u,0)?-1:1});for(var t=-1/0,r=1,n=0;n<e.length;){for(var i=e[n].interval,o=e[n].close,a=0;a<2;a++)i[a]<=t&&(i[a]=t,o[a]=a?1:1-r),t=i[a],r=o[a];i[0]===i[1]&&o[0]*o[1]!==1?e.splice(n,1):n++}return e;function s(l,u,c){return l.interval[c]<u.interval[c]||l.interval[c]===u.interval[c]&&(l.close[c]-u.close[c]===(c?-1:1)||!c&&s(l,u,1))}}function Ul(e){var t=parseFloat(e);return t==e&&(t!==0||!$t(e)||e.indexOf("x")<=0)?t:NaN}function Bit(e){return!isNaN(Ul(e))}function rz(){return Math.round(Math.random()*9)}function nz(e,t){return t===0?e:nz(t,e%t)}function r6(e,t){return e==null?t:t==null?e:e*t/nz(e,t)}function Ae(e){throw new Error(e)}function n6(e,t,r){return(t-e)*r+e}var iz="series\0",zit="\0_ec_\0";function Ir(e){return e instanceof Array?e:e==null?[]:[e]}function iP(e,t,r){if(e){e[t]=e[t]||{},e.emphasis=e.emphasis||{},e.emphasis[t]=e.emphasis[t]||{};for(var n=0,i=r.length;n<i;n++){var o=r[n];!e.emphasis[t].hasOwnProperty(o)&&e[t].hasOwnProperty(o)&&(e.emphasis[t][o]=e[t][o])}}}var i6=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function Qv(e){return Yt(e)&&!St(e)&&!(e instanceof Date)?e.value:e}function Vit(e){return Yt(e)&&!(e instanceof Array)}function Uit(e,t,r){var n=r==="normalMerge",i=r==="replaceMerge",o=r==="replaceAll";e=e||[],t=(t||[]).slice();var a=he();U(t,function(l,u){if(!Yt(l)){t[u]=null;return}});var s=Wit(e,a,r);return(n||i)&&jit(s,e,a,t),n&&Git(s,t),n||i?Hit(s,t,i):o&&Xit(s,t),Yit(s),s}function Wit(e,t,r){var n=[];if(r==="replaceAll")return n;for(var i=0;i<e.length;i++){var o=e[i];o&&o.id!=null&&t.set(o.id,i),n.push({existing:r==="replaceMerge"||lv(o)?null:o,newOption:null,keyInfo:null,brandNew:null})}return n}function jit(e,t,r,n){U(n,function(i,o){if(!(!i||i.id==null)){var a=Ng(i.id),s=r.get(a);if(s!=null){var l=e[s];Do(!l.newOption,'Duplicated option on id "'+a+'".'),l.newOption=i,l.existing=t[s],n[o]=null}}})}function Git(e,t){U(t,function(r,n){if(!(!r||r.name==null))for(var i=0;i<e.length;i++){var o=e[i].existing;if(!e[i].newOption&&o&&(o.id==null||r.id==null)&&!lv(r)&&!lv(o)&&oz("name",o,r)){e[i].newOption=r,t[n]=null;return}}})}function Hit(e,t,r){U(t,function(n){if(!!n){for(var i,o=0;(i=e[o])&&(i.newOption||lv(i.existing)||i.existing&&n.id!=null&&!oz("id",n,i.existing));)o++;i?(i.newOption=n,i.brandNew=r):e.push({newOption:n,brandNew:r,existing:null,keyInfo:null}),o++}})}function Xit(e,t){U(t,function(r){e.push({newOption:r,brandNew:!0,existing:null,keyInfo:null})})}function Yit(e){var t=he();U(e,function(r){var n=r.existing;n&&t.set(n.id,r)}),U(e,function(r){var n=r.newOption;Do(!n||n.id==null||!t.get(n.id)||t.get(n.id)===r,"id duplicates: "+(n&&n.id)),n&&n.id!=null&&t.set(n.id,r),!r.keyInfo&&(r.keyInfo={})}),U(e,function(r,n){var i=r.existing,o=r.newOption,a=r.keyInfo;if(!!Yt(o)){if(a.name=o.name!=null?Ng(o.name):i?i.name:iz+n,i)a.id=Ng(i.id);else if(o.id!=null)a.id=Ng(o.id);else{var s=0;do a.id="\0"+a.name+"\0"+s++;while(t.get(a.id))}t.set(a.id,r)}})}function oz(e,t,r){var n=Ki(t[e],null),i=Ki(r[e],null);return n!=null&&i!=null&&n===i}function Ng(e){return Ki(e,"")}function Ki(e,t){return e==null?t:$t(e)?e:He(e)||Bk(e)?e+"":t}function pA(e){var t=e.name;return!!(t&&t.indexOf(iz))}function lv(e){return e&&e.id!=null&&Ng(e.id).indexOf(zit)===0}function Kit(e,t,r){U(e,function(n){var i=n.newOption;Yt(i)&&(n.keyInfo.mainType=t,n.keyInfo.subType=Zit(t,i,n.existing,r))})}function Zit(e,t,r,n){var i=t.type?t.type:r?r.subType:n.determineSubType(e,t);return i}function qit(e,t){var r={},n={};return i(e||[],r),i(t||[],n,r),[o(r),o(n)];function i(a,s,l){for(var u=0,c=a.length;u<c;u++){var f=Ki(a[u].seriesId,null);if(f==null)return;for(var h=Ir(a[u].dataIndex),d=l&&l[f],p=0,g=h.length;p<g;p++){var m=h[p];d&&d[m]?d[m]=null:(s[f]||(s[f]={}))[m]=1}}}function o(a,s){var l=[];for(var u in a)if(a.hasOwnProperty(u)&&a[u]!=null)if(s)l.push(+u);else{var c=o(a[u],!0);c.length&&l.push({seriesId:u,dataIndex:c})}return l}}function Tc(e,t){if(t.dataIndexInside!=null)return t.dataIndexInside;if(t.dataIndex!=null)return St(t.dataIndex)?Bt(t.dataIndex,function(r){return e.indexOfRawIndex(r)}):e.indexOfRawIndex(t.dataIndex);if(t.name!=null)return St(t.name)?Bt(t.name,function(r){return e.indexOfName(r)}):e.indexOfName(t.name)}function nr(){var e="__ec_inner_"+Jit++;return function(t){return t[e]||(t[e]={})}}var Jit=rz();function Zw(e,t,r){var n=gA(t,r),i=n.mainTypeSpecified,o=n.queryOptionMap,a=n.others,s=a,l=r?r.defaultMainType:null;return!i&&l&&o.set(l,{}),o.each(function(u,c){var f=t0(e,c,u,{useDefault:l===c,enableAll:r&&r.enableAll!=null?r.enableAll:!0,enableNone:r&&r.enableNone!=null?r.enableNone:!0});s[c+"Models"]=f.models,s[c+"Model"]=f.models[0]}),s}function gA(e,t){var r;if($t(e)){var n={};n[e+"Index"]=0,r=n}else r=e;var i=he(),o={},a=!1;return U(r,function(s,l){if(l==="dataIndex"||l==="dataIndexInside"){o[l]=s;return}var u=l.match(/^(\w+)(Index|Id|Name)$/)||[],c=u[1],f=(u[2]||"").toLowerCase();if(!(!c||!f||t&&t.includeMainTypes&&De(t.includeMainTypes,c)<0)){a=a||!!c;var h=i.get(c)||i.set(c,{});h[f]=s}}),{mainTypeSpecified:a,queryOptionMap:i,others:o}}var Eo={useDefault:!0,enableAll:!1,enableNone:!1};function t0(e,t,r,n){n=n||Eo;var i=r.index,o=r.id,a=r.name,s={models:null,specified:i!=null||o!=null||a!=null};if(!s.specified){var l=void 0;return s.models=n.useDefault&&(l=e.getComponent(t))?[l]:[],s}return i==="none"||i===!1?(Do(n.enableNone,'`"none"` or `false` is not a valid value on index option.'),s.models=[],s):(i==="all"&&(Do(n.enableAll,'`"all"` is not a valid value on index option.'),i=o=a=null),s.models=e.queryComponents({mainType:t,index:i,id:o,name:a}),s)}function az(e,t,r){e.setAttribute?e.setAttribute(t,r):e[t]=r}function Qit(e,t){return e.getAttribute?e.getAttribute(t):e[t]}function tot(e){return e==="auto"?me.domSupported?"html":"richText":e||"html"}function eot(e,t,r,n,i){var o=t==null||t==="auto";if(n==null)return n;if(He(n)){var a=n6(r||0,n,i);return Mr(a,o?Math.max(ya(r||0),ya(n)):t)}else{if($t(n))return i<1?r:n;for(var s=[],l=r,u=n,c=Math.max(l?l.length:0,u.length),f=0;f<c;++f){var h=e.getDimensionInfo(f);if(h&&h.type==="ordinal")s[f]=(i<1&&l?l:u)[f];else{var d=l&&l[f]?l[f]:0,p=u[f],a=n6(d,p,i);s[f]=Mr(a,o?Math.max(ya(d),ya(p)):t)}}return s}}var rot=".",_u="___EC__COMPONENT__CONTAINER___",sz="___EC__EXTENDED_CLASS___";function _a(e){var t={main:"",sub:""};if(e){var r=e.split(rot);t.main=r[0]||"",t.sub=r[1]||""}return t}function not(e){Do(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(e),'componentType "'+e+'" illegal')}function iot(e){return!!(e&&e[sz])}function vA(e,t){e.$constructor=e,e.extend=function(r){var n=this,i;return oot(n)?i=function(o){Ot(a,o);function a(){return o.apply(this,arguments)||this}return a}(n):(i=function(){(r.$constructor||n).apply(this,arguments)},rnt(i,this)),_t(i.prototype,r),i[sz]=!0,i.extend=this.extend,i.superCall=lot,i.superApply=uot,i.superClass=n,i}}function oot(e){return ue(e)&&/^class\s/.test(Function.prototype.toString.call(e))}function lz(e,t){e.extend=t.extend}var aot=Math.round(Math.random()*10);function sot(e){var t=["__\0is_clz",aot++].join("_");e.prototype[t]=!0,e.isInstance=function(r){return!!(r&&r[t])}}function lot(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return this.superClass.prototype[t].apply(e,r)}function uot(e,t,r){return this.superClass.prototype[t].apply(e,r)}function Db(e){var t={};e.registerClass=function(n){var i=n.type||n.prototype.type;if(i){not(i),n.prototype.type=i;var o=_a(i);if(!o.sub)t[o.main]=n;else if(o.sub!==_u){var a=r(o);a[o.sub]=n}}return n},e.getClass=function(n,i,o){var a=t[n];if(a&&a[_u]&&(a=i?a[i]:null),o&&!a)throw new Error(i?"Component "+n+"."+(i||"")+" is used but not imported.":n+".type should be specified.");return a},e.getClassesByMainType=function(n){var i=_a(n),o=[],a=t[i.main];return a&&a[_u]?U(a,function(s,l){l!==_u&&o.push(s)}):o.push(a),o},e.hasClass=function(n){var i=_a(n);return!!t[i.main]},e.getAllClassMainTypes=function(){var n=[];return U(t,function(i,o){n.push(o)}),n},e.hasSubTypes=function(n){var i=_a(n),o=t[i.main];return o&&o[_u]};function r(n){var i=t[n.main];return(!i||!i[_u])&&(i=t[n.main]={},i[_u]=!0),i}}function uv(e,t){for(var r=0;r<e.length;r++)e[r][1]||(e[r][1]=e[r][0]);return t=t||!1,function(n,i,o){for(var a={},s=0;s<e.length;s++){var l=e[s][1];if(!(i&&De(i,l)>=0||o&&De(o,l)<0)){var u=n.getShallow(l,t);u!=null&&(a[e[s][0]]=u)}}return a}}var cot=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],fot=uv(cot),hot=function(){function e(){}return e.prototype.getAreaStyle=function(t,r){return fot(this,t,r)},e}(),oP=new Jv(50);function dot(e){if(typeof e=="string"){var t=oP.get(e);return t&&t.image}else return e}function uz(e,t,r,n,i){if(e)if(typeof e=="string"){if(t&&t.__zrImageSrc===e||!r)return t;var o=oP.get(e),a={hostEl:r,cb:n,cbPayload:i};return o?(t=o.image,!Nb(t)&&o.pending.push(a)):(t=Vc.loadImage(e,o6,o6),t.__zrImageSrc=e,oP.put(e,t.__cachedImgObj={image:t,pending:[a]})),t}else return e;else return t}function o6(){var e=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<e.pending.length;t++){var r=e.pending[t],n=r.cb;n&&n(this,r.cbPayload),r.hostEl.dirty()}e.pending.length=0}function Nb(e){return e&&e.width&&e.height}var qw=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function pot(e,t,r,n,i){if(!t)return"";var o=(e+"").split(`
`);i=cz(t,r,n,i);for(var a=0,s=o.length;a<s;a++)o[a]=fz(o[a],i);return o.join(`
`)}function cz(e,t,r,n){n=n||{};var i=_t({},n);i.font=t,r=_e(r,"..."),i.maxIterations=_e(n.maxIterations,2);var o=i.minChar=_e(n.minChar,0);i.cnCharWidth=bi("\u56FD",t);var a=i.ascCharWidth=bi("a",t);i.placeholder=_e(n.placeholder,"");for(var s=e=Math.max(0,e-1),l=0;l<o&&s>=a;l++)s-=a;var u=bi(r,t);return u>s&&(r="",u=0),s=e-u,i.ellipsis=r,i.ellipsisWidth=u,i.contentWidth=s,i.containerWidth=e,i}function fz(e,t){var r=t.containerWidth,n=t.font,i=t.contentWidth;if(!r)return"";var o=bi(e,n);if(o<=r)return e;for(var a=0;;a++){if(o<=i||a>=t.maxIterations){e+=t.ellipsis;break}var s=a===0?got(e,i,t.ascCharWidth,t.cnCharWidth):o>0?Math.floor(e.length*i/o):0;e=e.substr(0,s),o=bi(e,n)}return e===""&&(e=t.placeholder),e}function got(e,t,r,n){for(var i=0,o=0,a=e.length;o<a&&i<t;o++){var s=e.charCodeAt(o);i+=0<=s&&s<=127?r:n}return o}function vot(e,t){e!=null&&(e+="");var r=t.overflow,n=t.padding,i=t.font,o=r==="truncate",a=fA(i),s=_e(t.lineHeight,a),l=!!t.backgroundColor,u=t.lineOverflow==="truncate",c=t.width,f;c!=null&&(r==="break"||r==="breakAll")?f=e?hz(e,t.font,c,r==="breakAll",0).lines:[]:f=e?e.split(`
`):[];var h=f.length*s,d=_e(t.height,h);if(h>d&&u){var p=Math.floor(d/s);f=f.slice(0,p)}if(e&&o&&c!=null)for(var g=cz(c,i,t.ellipsis,{minChar:t.truncateMinChar,placeholder:t.placeholder}),m=0;m<f.length;m++)f[m]=fz(f[m],g);for(var v=d,y=0,m=0;m<f.length;m++)y=Math.max(bi(f[m],i),y);c==null&&(c=y);var b=y;return n&&(v+=n[0]+n[2],b+=n[1]+n[3],c+=n[1]+n[3]),l&&(b=c),{lines:f,height:d,outerWidth:b,outerHeight:v,lineHeight:s,calculatedLineHeight:a,contentWidth:y,contentHeight:h,width:c}}var mot=function(){function e(){}return e}(),a6=function(){function e(t){this.tokens=[],t&&(this.tokens=t)}return e}(),yot=function(){function e(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return e}();function _ot(e,t){var r=new yot;if(e!=null&&(e+=""),!e)return r;for(var n=t.width,i=t.height,o=t.overflow,a=(o==="break"||o==="breakAll")&&n!=null?{width:n,accumWidth:0,breakAll:o==="breakAll"}:null,s=qw.lastIndex=0,l;(l=qw.exec(e))!=null;){var u=l.index;u>s&&Jw(r,e.substring(s,u),t,a),Jw(r,l[2],t,a,l[1]),s=qw.lastIndex}s<e.length&&Jw(r,e.substring(s,e.length),t,a);var c=[],f=0,h=0,d=t.padding,p=o==="truncate",g=t.lineOverflow==="truncate";function m(K,et,Tt){K.width=et,K.lineHeight=Tt,f+=Tt,h=Math.max(h,et)}t:for(var v=0;v<r.lines.length;v++){for(var y=r.lines[v],b=0,w=0,T=0;T<y.tokens.length;T++){var S=y.tokens[T],k=S.styleName&&t.rich[S.styleName]||{},E=S.textPadding=k.padding,P=E?E[1]+E[3]:0,C=S.font=k.font||t.font;S.contentHeight=fA(C);var A=_e(k.height,S.contentHeight);if(S.innerHeight=A,E&&(A+=E[0]+E[2]),S.height=A,S.lineHeight=Og(k.lineHeight,t.lineHeight,A),S.align=k&&k.align||t.align,S.verticalAlign=k&&k.verticalAlign||"middle",g&&i!=null&&f+S.lineHeight>i){T>0?(y.tokens=y.tokens.slice(0,T),m(y,w,b),r.lines=r.lines.slice(0,v+1)):r.lines=r.lines.slice(0,v);break t}var L=k.width,R=L==null||L==="auto";if(typeof L=="string"&&L.charAt(L.length-1)==="%")S.percentWidth=L,c.push(S),S.contentWidth=bi(S.text,C);else{if(R){var D=k.backgroundColor,F=D&&D.image;F&&(F=dot(F),Nb(F)&&(S.width=Math.max(S.width,F.width*A/F.height)))}var z=p&&n!=null?n-w:null;z!=null&&z<S.width?!R||z<P?(S.text="",S.width=S.contentWidth=0):(S.text=pot(S.text,z-P,C,t.ellipsis,{minChar:t.truncateMinChar}),S.width=S.contentWidth=bi(S.text,C)):S.contentWidth=bi(S.text,C)}S.width+=P,w+=S.width,k&&(b=Math.max(b,S.lineHeight))}m(y,w,b)}r.outerWidth=r.width=_e(n,h),r.outerHeight=r.height=_e(i,f),r.contentHeight=f,r.contentWidth=h,d&&(r.outerWidth+=d[1]+d[3],r.outerHeight+=d[0]+d[2]);for(var v=0;v<c.length;v++){var S=c[v],Y=S.percentWidth;S.width=parseInt(Y,10)/100*r.width}return r}function Jw(e,t,r,n,i){var o=t==="",a=i&&r.rich[i]||{},s=e.lines,l=a.font||r.font,u=!1,c,f;if(n){var h=a.padding,d=h?h[1]+h[3]:0;if(a.width!=null&&a.width!=="auto"){var p=ms(a.width,n.width)+d;s.length>0&&p+n.accumWidth>n.width&&(c=t.split(`
`),u=!0),n.accumWidth=p}else{var g=hz(t,l,n.width,n.breakAll,n.accumWidth);n.accumWidth=g.accumWidth+d,f=g.linesWidths,c=g.lines}}else c=t.split(`
`);for(var m=0;m<c.length;m++){var v=c[m],y=new mot;if(y.styleName=i,y.text=v,y.isLineHolder=!v&&!o,typeof a.width=="number"?y.width=a.width:y.width=f?f[m]:bi(v,l),!m&&!u){var b=(s[s.length-1]||(s[0]=new a6)).tokens,w=b.length;w===1&&b[0].isLineHolder?b[0]=y:(v||!w||o)&&b.push(y)}else s.push(new a6([y]))}}function bot(e){var t=e.charCodeAt(0);return t>=33&&t<=383}var wot=Uc(",&?/;] ".split(""),function(e,t){return e[t]=!0,e},{});function Sot(e){return bot(e)?!!wot[e]:!0}function hz(e,t,r,n,i){for(var o=[],a=[],s="",l="",u=0,c=0,f=0;f<e.length;f++){var h=e.charAt(f);if(h===`
`){l&&(s+=l,c+=u),o.push(s),a.push(c),s="",l="",u=0,c=0;continue}var d=bi(h,t),p=n?!1:!Sot(h);if(o.length?c+d>r:i+c+d>r){c?(s||l)&&(p?(s||(s=l,l="",u=0,c=u),o.push(s),a.push(c-u),l+=h,u+=d,s="",c=u):(l&&(s+=l,l="",u=0),o.push(s),a.push(c),s=h,c=d)):p?(o.push(l),a.push(u),l=h,u=d):(o.push(h),a.push(d));continue}c+=d,p?(l+=h,u+=d):(l&&(s+=l,l="",u=0),s+=h)}return!o.length&&!s&&(s=e,l="",u=0),l&&(s+=l),s&&(o.push(s),a.push(c)),o.length===1&&(c+=i),{accumWidth:c,lines:o,linesWidths:a}}var aP="__zr_style_"+Math.round(Math.random()*10),cc={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},Fb={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};cc[aP]=!0;var s6=["z","z2","invisible"],Tot=["invisible"],kot=function(e){Ke(t,e);function t(r){return e.call(this,r)||this}return t.prototype._init=function(r){for(var n=ze(r),i=0;i<n.length;i++){var o=n[i];o==="style"?this.useStyle(r[o]):e.prototype.attrKV.call(this,o,r[o])}this.style||this.useStyle({})},t.prototype.beforeBrush=function(){},t.prototype.afterBrush=function(){},t.prototype.innerBeforeBrush=function(){},t.prototype.innerAfterBrush=function(){},t.prototype.shouldBePainted=function(r,n,i,o){var a=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&Pot(this,r,n)||a&&!a[0]&&!a[3])return!1;if(i&&this.__clipPaths){for(var s=0;s<this.__clipPaths.length;++s)if(this.__clipPaths[s].isZeroArea())return!1}if(o&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},t.prototype.contain=function(r,n){return this.rectContain(r,n)},t.prototype.traverse=function(r,n){r.call(n,this)},t.prototype.rectContain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect();return o.contain(i[0],i[1])},t.prototype.getPaintRect=function(){var r=this._paintRect;if(!this._paintRect||this.__dirty){var n=this.transform,i=this.getBoundingRect(),o=this.style,a=o.shadowBlur||0,s=o.shadowOffsetX||0,l=o.shadowOffsetY||0;r=this._paintRect||(this._paintRect=new Le(0,0,0,0)),n?Le.applyTransform(r,i,n):r.copy(i),(a||s||l)&&(r.width+=a*2+Math.abs(s),r.height+=a*2+Math.abs(l),r.x=Math.min(r.x,r.x+s-a),r.y=Math.min(r.y,r.y+l-a));var u=this.dirtyRectTolerance;r.isZero()||(r.x=Math.floor(r.x-u),r.y=Math.floor(r.y-u),r.width=Math.ceil(r.width+1+u*2),r.height=Math.ceil(r.height+1+u*2))}return r},t.prototype.setPrevPaintRect=function(r){r?(this._prevPaintRect=this._prevPaintRect||new Le(0,0,0,0),this._prevPaintRect.copy(r)):this._prevPaintRect=null},t.prototype.getPrevPaintRect=function(){return this._prevPaintRect},t.prototype.animateStyle=function(r){return this.animate("style",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():this.markRedraw()},t.prototype.attrKV=function(r,n){r!=="style"?e.prototype.attrKV.call(this,r,n):this.style?this.setStyle(n):this.useStyle(n)},t.prototype.setStyle=function(r,n){return typeof r=="string"?this.style[r]=n:_t(this.style,r),this.dirtyStyle(),this},t.prototype.dirtyStyle=function(r){r||this.markRedraw(),this.__dirty|=qp,this._rect&&(this._rect=null)},t.prototype.dirty=function(){this.dirtyStyle()},t.prototype.styleChanged=function(){return!!(this.__dirty&qp)},t.prototype.styleUpdated=function(){this.__dirty&=~qp},t.prototype.createStyle=function(r){return Ob(cc,r)},t.prototype.useStyle=function(r){r[aP]||(r=this.createStyle(r)),this.__inHover?this.__hoverStyle=r:this.style=r,this.dirtyStyle()},t.prototype.isStyleObject=function(r){return r[aP]},t.prototype._innerSaveToNormal=function(r){e.prototype._innerSaveToNormal.call(this,r);var n=this._normalState;r.style&&!n.style&&(n.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(r,n,s6)},t.prototype._applyStateObj=function(r,n,i,o,a,s){e.prototype._applyStateObj.call(this,r,n,i,o,a,s);var l=!(n&&o),u;if(n&&n.style?a?o?u=n.style:(u=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(u,n.style)):(u=this._mergeStyle(this.createStyle(),o?this.style:i.style),this._mergeStyle(u,n.style)):l&&(u=i.style),u)if(a){var c=this.style;if(this.style=this.createStyle(l?{}:c),l)for(var f=ze(c),h=0;h<f.length;h++){var d=f[h];d in u&&(u[d]=u[d],this.style[d]=c[d])}for(var p=ze(u),h=0;h<p.length;h++){var d=p[h];this.style[d]=this.style[d]}this._transitionState(r,{style:u},s,this.getAnimationStyleProps())}else this.useStyle(u);for(var g=this.__inHover?Tot:s6,h=0;h<g.length;h++){var d=g[h];n&&n[d]!=null?this[d]=n[d]:l&&i[d]!=null&&(this[d]=i[d])}},t.prototype._mergeStates=function(r){for(var n=e.prototype._mergeStates.call(this,r),i,o=0;o<r.length;o++){var a=r[o];a.style&&(i=i||{},this._mergeStyle(i,a.style))}return i&&(n.style=i),n},t.prototype._mergeStyle=function(r,n){return _t(r,n),r},t.prototype.getAnimationStyleProps=function(){return Fb},t.initDefaultProps=function(){var r=t.prototype;r.type="displayable",r.invisible=!1,r.z=0,r.z2=0,r.zlevel=0,r.culling=!1,r.cursor="pointer",r.rectHover=!1,r.incremental=!1,r._rect=null,r.dirtyRectTolerance=0,r.__dirty=yi|qp}(),t}(ZB),Qw=new Le(0,0,0,0),tS=new Le(0,0,0,0);function Pot(e,t,r){return Qw.copy(e.getBoundingRect()),e.transform&&Qw.applyTransform(e.transform),tS.width=t,tS.height=r,!Qw.intersect(tS)}const Wc=kot;var qn=Math.min,Jn=Math.max,eS=Math.sin,rS=Math.cos,bu=Math.PI*2,im=sd(),om=sd(),am=sd();function Eot(e,t,r){if(e.length!==0){for(var n=e[0],i=n[0],o=n[0],a=n[1],s=n[1],l=1;l<e.length;l++)n=e[l],i=qn(i,n[0]),o=Jn(o,n[0]),a=qn(a,n[1]),s=Jn(s,n[1]);t[0]=i,t[1]=a,r[0]=o,r[1]=s}}function l6(e,t,r,n,i,o){i[0]=qn(e,r),i[1]=qn(t,n),o[0]=Jn(e,r),o[1]=Jn(t,n)}var u6=[],c6=[];function Cot(e,t,r,n,i,o,a,s,l,u){var c=VB,f=zr,h=c(e,r,i,a,u6);l[0]=1/0,l[1]=1/0,u[0]=-1/0,u[1]=-1/0;for(var d=0;d<h;d++){var p=f(e,r,i,a,u6[d]);l[0]=qn(p,l[0]),u[0]=Jn(p,u[0])}h=c(t,n,o,s,c6);for(var d=0;d<h;d++){var g=f(t,n,o,s,c6[d]);l[1]=qn(g,l[1]),u[1]=Jn(g,u[1])}l[0]=qn(e,l[0]),u[0]=Jn(e,u[0]),l[0]=qn(a,l[0]),u[0]=Jn(a,u[0]),l[1]=qn(t,l[1]),u[1]=Jn(t,u[1]),l[1]=qn(s,l[1]),u[1]=Jn(s,u[1])}function Aot(e,t,r,n,i,o,a,s){var l=UB,u=wn,c=Jn(qn(l(e,r,i),1),0),f=Jn(qn(l(t,n,o),1),0),h=u(e,r,i,c),d=u(t,n,o,f);a[0]=qn(e,i,h),a[1]=qn(t,o,d),s[0]=Jn(e,i,h),s[1]=Jn(t,o,d)}function xot(e,t,r,n,i,o,a,s,l){var u=sh,c=lh,f=Math.abs(i-o);if(f%bu<1e-4&&f>1e-4){s[0]=e-r,s[1]=t-n,l[0]=e+r,l[1]=t+n;return}if(im[0]=rS(i)*r+e,im[1]=eS(i)*n+t,om[0]=rS(o)*r+e,om[1]=eS(o)*n+t,u(s,im,om),c(l,im,om),i=i%bu,i<0&&(i=i+bu),o=o%bu,o<0&&(o=o+bu),i>o&&!a?o+=bu:i<o&&a&&(i+=bu),a){var h=o;o=i,i=h}for(var d=0;d<o;d+=Math.PI/2)d>i&&(am[0]=rS(d)*r+e,am[1]=eS(d)*n+t,u(s,am,s),c(l,am,l))}var Ve={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},wu=[],Su=[],Zo=[],zs=[],qo=[],Jo=[],nS=Math.min,iS=Math.max,Tu=Math.cos,ku=Math.sin,ja=Math.abs,sP=Math.PI,hl=sP*2,oS=typeof Float32Array<"u",Jd=[];function aS(e){var t=Math.round(e/sP*1e8)/1e8;return t%2*sP}function Mot(e,t){var r=aS(e[0]);r<0&&(r+=hl);var n=r-e[0],i=e[1];i+=n,!t&&i-r>=hl?i=r+hl:t&&r-i>=hl?i=r-hl:!t&&r>i?i=r+(hl-aS(r-i)):t&&r<i&&(i=r-(hl-aS(i-r))),e[0]=r,e[1]=i}var Iot=function(){function e(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return e.prototype.increaseVersion=function(){this._version++},e.prototype.getVersion=function(){return this._version},e.prototype.setScale=function(t,r,n){n=n||0,n>0&&(this._ux=ja(n/p_/t)||0,this._uy=ja(n/p_/r)||0)},e.prototype.setDPR=function(t){this.dpr=t},e.prototype.setContext=function(t){this._ctx=t},e.prototype.getContext=function(){return this._ctx},e.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},e.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},e.prototype.moveTo=function(t,r){return this._drawPendingPt(),this.addData(Ve.M,t,r),this._ctx&&this._ctx.moveTo(t,r),this._x0=t,this._y0=r,this._xi=t,this._yi=r,this},e.prototype.lineTo=function(t,r){var n=ja(t-this._xi),i=ja(r-this._yi),o=n>this._ux||i>this._uy;if(this.addData(Ve.L,t,r),this._ctx&&o&&this._ctx.lineTo(t,r),o)this._xi=t,this._yi=r,this._pendingPtDist=0;else{var a=n*n+i*i;a>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=r,this._pendingPtDist=a)}return this},e.prototype.bezierCurveTo=function(t,r,n,i,o,a){return this._drawPendingPt(),this.addData(Ve.C,t,r,n,i,o,a),this._ctx&&this._ctx.bezierCurveTo(t,r,n,i,o,a),this._xi=o,this._yi=a,this},e.prototype.quadraticCurveTo=function(t,r,n,i){return this._drawPendingPt(),this.addData(Ve.Q,t,r,n,i),this._ctx&&this._ctx.quadraticCurveTo(t,r,n,i),this._xi=n,this._yi=i,this},e.prototype.arc=function(t,r,n,i,o,a){this._drawPendingPt(),Jd[0]=i,Jd[1]=o,Mot(Jd,a),i=Jd[0],o=Jd[1];var s=o-i;return this.addData(Ve.A,t,r,n,n,i,s,0,a?0:1),this._ctx&&this._ctx.arc(t,r,n,i,o,a),this._xi=Tu(o)*n+t,this._yi=ku(o)*n+r,this},e.prototype.arcTo=function(t,r,n,i,o){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,r,n,i,o),this},e.prototype.rect=function(t,r,n,i){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,r,n,i),this.addData(Ve.R,t,r,n,i),this},e.prototype.closePath=function(){this._drawPendingPt(),this.addData(Ve.Z);var t=this._ctx,r=this._x0,n=this._y0;return t&&t.closePath(),this._xi=r,this._yi=n,this},e.prototype.fill=function(t){t&&t.fill(),this.toStatic()},e.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},e.prototype.len=function(){return this._len},e.prototype.setData=function(t){var r=t.length;!(this.data&&this.data.length===r)&&oS&&(this.data=new Float32Array(r));for(var n=0;n<r;n++)this.data[n]=t[n];this._len=r},e.prototype.appendPath=function(t){t instanceof Array||(t=[t]);for(var r=t.length,n=0,i=this._len,o=0;o<r;o++)n+=t[o].len();oS&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+n));for(var o=0;o<r;o++)for(var a=t[o].data,s=0;s<a.length;s++)this.data[i++]=a[s];this._len=i},e.prototype.addData=function(t,r,n,i,o,a,s,l,u){if(!!this._saveData){var c=this.data;this._len+arguments.length>c.length&&(this._expandData(),c=this.data);for(var f=0;f<arguments.length;f++)c[this._len++]=arguments[f]}},e.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},e.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],r=0;r<this._len;r++)t[r]=this.data[r];this.data=t}},e.prototype.toStatic=function(){if(!!this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,oS&&this._len>11&&(this.data=new Float32Array(t)))}},e.prototype.getBoundingRect=function(){Zo[0]=Zo[1]=qo[0]=qo[1]=Number.MAX_VALUE,zs[0]=zs[1]=Jo[0]=Jo[1]=-Number.MAX_VALUE;var t=this.data,r=0,n=0,i=0,o=0,a;for(a=0;a<this._len;){var s=t[a++],l=a===1;switch(l&&(r=t[a],n=t[a+1],i=r,o=n),s){case Ve.M:r=i=t[a++],n=o=t[a++],qo[0]=i,qo[1]=o,Jo[0]=i,Jo[1]=o;break;case Ve.L:l6(r,n,t[a],t[a+1],qo,Jo),r=t[a++],n=t[a++];break;case Ve.C:Cot(r,n,t[a++],t[a++],t[a++],t[a++],t[a],t[a+1],qo,Jo),r=t[a++],n=t[a++];break;case Ve.Q:Aot(r,n,t[a++],t[a++],t[a],t[a+1],qo,Jo),r=t[a++],n=t[a++];break;case Ve.A:var u=t[a++],c=t[a++],f=t[a++],h=t[a++],d=t[a++],p=t[a++]+d;a+=1;var g=!t[a++];l&&(i=Tu(d)*f+u,o=ku(d)*h+c),xot(u,c,f,h,d,p,g,qo,Jo),r=Tu(p)*f+u,n=ku(p)*h+c;break;case Ve.R:i=r=t[a++],o=n=t[a++];var m=t[a++],v=t[a++];l6(i,o,i+m,o+v,qo,Jo);break;case Ve.Z:r=i,n=o;break}sh(Zo,Zo,qo),lh(zs,zs,Jo)}return a===0&&(Zo[0]=Zo[1]=zs[0]=zs[1]=0),new Le(Zo[0],Zo[1],zs[0]-Zo[0],zs[1]-Zo[1])},e.prototype._calculateLength=function(){var t=this.data,r=this._len,n=this._ux,i=this._uy,o=0,a=0,s=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var u=this._pathSegLen,c=0,f=0,h=0;h<r;){var d=t[h++],p=h===1;p&&(o=t[h],a=t[h+1],s=o,l=a);var g=-1;switch(d){case Ve.M:o=s=t[h++],a=l=t[h++];break;case Ve.L:{var m=t[h++],v=t[h++],y=m-o,b=v-a;(ja(y)>n||ja(b)>i||h===r-1)&&(g=Math.sqrt(y*y+b*b),o=m,a=v);break}case Ve.C:{var w=t[h++],T=t[h++],m=t[h++],v=t[h++],S=t[h++],k=t[h++];g=Gnt(o,a,w,T,m,v,S,k,10),o=S,a=k;break}case Ve.Q:{var w=t[h++],T=t[h++],m=t[h++],v=t[h++];g=Ynt(o,a,w,T,m,v,10),o=m,a=v;break}case Ve.A:var E=t[h++],P=t[h++],C=t[h++],A=t[h++],L=t[h++],R=t[h++],D=R+L;h+=1,t[h++],p&&(s=Tu(L)*C+E,l=ku(L)*A+P),g=iS(C,A)*nS(hl,Math.abs(R)),o=Tu(D)*C+E,a=ku(D)*A+P;break;case Ve.R:{s=o=t[h++],l=a=t[h++];var F=t[h++],z=t[h++];g=F*2+z*2;break}case Ve.Z:{var y=s-o,b=l-a;g=Math.sqrt(y*y+b*b),o=s,a=l;break}}g>=0&&(u[f++]=g,c+=g)}return this._pathLen=c,c},e.prototype.rebuildPath=function(t,r){var n=this.data,i=this._ux,o=this._uy,a=this._len,s,l,u,c,f,h,d=r<1,p,g,m=0,v=0,y,b=0,w,T;if(d&&(this._pathSegLen||this._calculateLength(),p=this._pathSegLen,g=this._pathLen,y=r*g,!y))return;t:for(var S=0;S<a;){var k=n[S++],E=S===1;switch(E&&(u=n[S],c=n[S+1],s=u,l=c),k!==Ve.L&&b>0&&(t.lineTo(w,T),b=0),k){case Ve.M:s=u=n[S++],l=c=n[S++],t.moveTo(u,c);break;case Ve.L:{f=n[S++],h=n[S++];var P=ja(f-u),C=ja(h-c);if(P>i||C>o){if(d){var A=p[v++];if(m+A>y){var L=(y-m)/A;t.lineTo(u*(1-L)+f*L,c*(1-L)+h*L);break t}m+=A}t.lineTo(f,h),u=f,c=h,b=0}else{var R=P*P+C*C;R>b&&(w=f,T=h,b=R)}break}case Ve.C:{var D=n[S++],F=n[S++],z=n[S++],Y=n[S++],K=n[S++],et=n[S++];if(d){var A=p[v++];if(m+A>y){var L=(y-m)/A;f_(u,D,z,K,L,wu),f_(c,F,Y,et,L,Su),t.bezierCurveTo(wu[1],Su[1],wu[2],Su[2],wu[3],Su[3]);break t}m+=A}t.bezierCurveTo(D,F,z,Y,K,et),u=K,c=et;break}case Ve.Q:{var D=n[S++],F=n[S++],z=n[S++],Y=n[S++];if(d){var A=p[v++];if(m+A>y){var L=(y-m)/A;h_(u,D,z,L,wu),h_(c,F,Y,L,Su),t.quadraticCurveTo(wu[1],Su[1],wu[2],Su[2]);break t}m+=A}t.quadraticCurveTo(D,F,z,Y),u=z,c=Y;break}case Ve.A:var Tt=n[S++],Ct=n[S++],vt=n[S++],wt=n[S++],Kt=n[S++],Z=n[S++],it=n[S++],tt=!n[S++],bt=vt>wt?vt:wt,kt=ja(vt-wt)>.001,It=Kt+Z,pt=!1;if(d){var A=p[v++];m+A>y&&(It=Kt+Z*(y-m)/A,pt=!0),m+=A}if(kt&&t.ellipse?t.ellipse(Tt,Ct,vt,wt,it,Kt,It,tt):t.arc(Tt,Ct,bt,Kt,It,tt),pt)break t;E&&(s=Tu(Kt)*vt+Tt,l=ku(Kt)*wt+Ct),u=Tu(It)*vt+Tt,c=ku(It)*wt+Ct;break;case Ve.R:s=u=n[S],l=c=n[S+1],f=n[S++],h=n[S++];var mt=n[S++],V=n[S++];if(d){var A=p[v++];if(m+A>y){var j=y-m;t.moveTo(f,h),t.lineTo(f+nS(j,mt),h),j-=mt,j>0&&t.lineTo(f+mt,h+nS(j,V)),j-=V,j>0&&t.lineTo(f+iS(mt-j,0),h+V),j-=mt,j>0&&t.lineTo(f,h+iS(V-j,0));break t}m+=A}t.rect(f,h,mt,V);break;case Ve.Z:if(d){var A=p[v++];if(m+A>y){var L=(y-m)/A;t.lineTo(u*(1-L)+s*L,c*(1-L)+l*L);break t}m+=A}t.closePath(),u=s,c=l}}},e.prototype.clone=function(){var t=new e,r=this.data;return t.data=r.slice?r.slice():Array.prototype.slice.call(r),t._len=this._len,t},e.CMD=Ve,e.initDefaultProps=function(){var t=e.prototype;t._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,t._version=0}(),e}();const kc=Iot;function Tf(e,t,r,n,i,o,a){if(i===0)return!1;var s=i,l=0,u=e;if(a>t+s&&a>n+s||a<t-s&&a<n-s||o>e+s&&o>r+s||o<e-s&&o<r-s)return!1;if(e!==r)l=(t-n)/(e-r),u=(e*n-r*t)/(e-r);else return Math.abs(o-e)<=s/2;var c=l*o-a+u,f=c*c/(l*l+1);return f<=s/2*s/2}function Lot(e,t,r,n,i,o,a,s,l,u,c){if(l===0)return!1;var f=l;if(c>t+f&&c>n+f&&c>o+f&&c>s+f||c<t-f&&c<n-f&&c<o-f&&c<s-f||u>e+f&&u>r+f&&u>i+f&&u>a+f||u<e-f&&u<r-f&&u<i-f&&u<a-f)return!1;var h=jnt(e,t,r,n,i,o,a,s,u,c,null);return h<=f/2}function Oot(e,t,r,n,i,o,a,s,l){if(a===0)return!1;var u=a;if(l>t+u&&l>n+u&&l>o+u||l<t-u&&l<n-u&&l<o-u||s>e+u&&s>r+u&&s>i+u||s<e-u&&s<r-u&&s<i-u)return!1;var c=Xnt(e,t,r,n,i,o,s,l,null);return c<=u/2}var f6=Math.PI*2;function sm(e){return e%=f6,e<0&&(e+=f6),e}var Qd=Math.PI*2;function Rot(e,t,r,n,i,o,a,s,l){if(a===0)return!1;var u=a;s-=e,l-=t;var c=Math.sqrt(s*s+l*l);if(c-u>r||c+u<r)return!1;if(Math.abs(n-i)%Qd<1e-4)return!0;if(o){var f=n;n=sm(i),i=sm(f)}else n=sm(n),i=sm(i);n>i&&(i+=Qd);var h=Math.atan2(l,s);return h<0&&(h+=Qd),h>=n&&h<=i||h+Qd>=n&&h+Qd<=i}function Pu(e,t,r,n,i,o){if(o>t&&o>n||o<t&&o<n||n===t)return 0;var a=(o-t)/(n-t),s=n<t?1:-1;(a===1||a===0)&&(s=n<t?.5:-.5);var l=a*(r-e)+e;return l===i?1/0:l>i?s:0}var Vs=kc.CMD,Eu=Math.PI*2,Dot=1e-4;function Not(e,t){return Math.abs(e-t)<Dot}var Fn=[-1,-1,-1],zi=[-1,-1];function Fot(){var e=zi[0];zi[0]=zi[1],zi[1]=e}function $ot(e,t,r,n,i,o,a,s,l,u){if(u>t&&u>n&&u>o&&u>s||u<t&&u<n&&u<o&&u<s)return 0;var c=c_(t,n,o,s,u,Fn);if(c===0)return 0;for(var f=0,h=-1,d=void 0,p=void 0,g=0;g<c;g++){var m=Fn[g],v=m===0||m===1?.5:1,y=zr(e,r,i,a,m);y<l||(h<0&&(h=VB(t,n,o,s,zi),zi[1]<zi[0]&&h>1&&Fot(),d=zr(t,n,o,s,zi[0]),h>1&&(p=zr(t,n,o,s,zi[1]))),h===2?m<zi[0]?f+=d<t?v:-v:m<zi[1]?f+=p<d?v:-v:f+=s<p?v:-v:m<zi[0]?f+=d<t?v:-v:f+=s<d?v:-v)}return f}function Bot(e,t,r,n,i,o,a,s){if(s>t&&s>n&&s>o||s<t&&s<n&&s<o)return 0;var l=Hnt(t,n,o,s,Fn);if(l===0)return 0;var u=UB(t,n,o);if(u>=0&&u<=1){for(var c=0,f=wn(t,n,o,u),h=0;h<l;h++){var d=Fn[h]===0||Fn[h]===1?.5:1,p=wn(e,r,i,Fn[h]);p<a||(Fn[h]<u?c+=f<t?d:-d:c+=o<f?d:-d)}return c}else{var d=Fn[0]===0||Fn[0]===1?.5:1,p=wn(e,r,i,Fn[0]);return p<a?0:o<t?d:-d}}function zot(e,t,r,n,i,o,a,s){if(s-=t,s>r||s<-r)return 0;var l=Math.sqrt(r*r-s*s);Fn[0]=-l,Fn[1]=l;var u=Math.abs(n-i);if(u<1e-4)return 0;if(u>=Eu-1e-4){n=0,i=Eu;var c=o?1:-1;return a>=Fn[0]+e&&a<=Fn[1]+e?c:0}if(n>i){var f=n;n=i,i=f}n<0&&(n+=Eu,i+=Eu);for(var h=0,d=0;d<2;d++){var p=Fn[d];if(p+e>a){var g=Math.atan2(s,p),c=o?1:-1;g<0&&(g=Eu+g),(g>=n&&g<=i||g+Eu>=n&&g+Eu<=i)&&(g>Math.PI/2&&g<Math.PI*1.5&&(c=-c),h+=c)}}return h}function dz(e,t,r,n,i){for(var o=e.data,a=e.len(),s=0,l=0,u=0,c=0,f=0,h,d,p=0;p<a;){var g=o[p++],m=p===1;switch(g===Vs.M&&p>1&&(r||(s+=Pu(l,u,c,f,n,i))),m&&(l=o[p],u=o[p+1],c=l,f=u),g){case Vs.M:c=o[p++],f=o[p++],l=c,u=f;break;case Vs.L:if(r){if(Tf(l,u,o[p],o[p+1],t,n,i))return!0}else s+=Pu(l,u,o[p],o[p+1],n,i)||0;l=o[p++],u=o[p++];break;case Vs.C:if(r){if(Lot(l,u,o[p++],o[p++],o[p++],o[p++],o[p],o[p+1],t,n,i))return!0}else s+=$ot(l,u,o[p++],o[p++],o[p++],o[p++],o[p],o[p+1],n,i)||0;l=o[p++],u=o[p++];break;case Vs.Q:if(r){if(Oot(l,u,o[p++],o[p++],o[p],o[p+1],t,n,i))return!0}else s+=Bot(l,u,o[p++],o[p++],o[p],o[p+1],n,i)||0;l=o[p++],u=o[p++];break;case Vs.A:var v=o[p++],y=o[p++],b=o[p++],w=o[p++],T=o[p++],S=o[p++];p+=1;var k=!!(1-o[p++]);h=Math.cos(T)*b+v,d=Math.sin(T)*w+y,m?(c=h,f=d):s+=Pu(l,u,h,d,n,i);var E=(n-v)*w/b+v;if(r){if(Rot(v,y,w,T,T+S,k,t,E,i))return!0}else s+=zot(v,y,w,T,T+S,k,E,i);l=Math.cos(T+S)*b+v,u=Math.sin(T+S)*w+y;break;case Vs.R:c=l=o[p++],f=u=o[p++];var P=o[p++],C=o[p++];if(h=c+P,d=f+C,r){if(Tf(c,f,h,f,t,n,i)||Tf(h,f,h,d,t,n,i)||Tf(h,d,c,d,t,n,i)||Tf(c,d,c,f,t,n,i))return!0}else s+=Pu(h,f,h,d,n,i),s+=Pu(c,d,c,f,n,i);break;case Vs.Z:if(r){if(Tf(l,u,c,f,t,n,i))return!0}else s+=Pu(l,u,c,f,n,i);l=c,u=f;break}}return!r&&!Not(u,f)&&(s+=Pu(l,u,c,f,n,i)||0),s!==0}function Vot(e,t,r){return dz(e,0,!1,t,r)}function Uot(e,t,r,n){return dz(e,t,!0,r,n)}var pz=Ee({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},cc),Wot={style:Ee({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},Fb.style)},sS=xa.concat(["invisible","culling","z","z2","zlevel","parent"]),jot=function(e){Ke(t,e);function t(r){return e.call(this,r)||this}return t.prototype.update=function(){var r=this;e.prototype.update.call(this);var n=this.style;if(n.decal){var i=this._decalEl=this._decalEl||new t;i.buildPath===t.prototype.buildPath&&(i.buildPath=function(l){r.buildPath(l,r.shape)}),i.silent=!0;var o=i.style;for(var a in n)o[a]!==n[a]&&(o[a]=n[a]);o.fill=n.fill?n.decal:null,o.decal=null,o.shadowColor=null,n.strokeFirst&&(o.stroke=null);for(var s=0;s<sS.length;++s)i[sS[s]]=this[sS[s]];i.__dirty|=yi}else this._decalEl&&(this._decalEl=null)},t.prototype.getDecalElement=function(){return this._decalEl},t.prototype._init=function(r){var n=ze(r);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var o=0;o<n.length;o++){var a=n[o],s=r[a];a==="style"?this.style?_t(this.style,s):this.useStyle(s):a==="shape"?_t(this.shape,s):e.prototype.attrKV.call(this,a,s)}this.style||this.useStyle({})},t.prototype.getDefaultStyle=function(){return null},t.prototype.getDefaultShape=function(){return{}},t.prototype.canBeInsideText=function(){return this.hasFill()},t.prototype.getInsideTextFill=function(){var r=this.style.fill;if(r!=="none"){if($t(r)){var n=d_(r,0);return n>.5?rP:n>.2?wit:nP}else if(r)return nP}return rP},t.prototype.getInsideTextStroke=function(r){var n=this.style.fill;if($t(n)){var i=this.__zr,o=!!(i&&i.isDarkMode()),a=d_(r,0)<eP;if(o===a)return n}},t.prototype.buildPath=function(r,n,i){},t.prototype.pathUpdated=function(){this.__dirty&=~rh},t.prototype.getUpdatedPathProxy=function(r){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,r),this.path},t.prototype.createPathProxy=function(){this.path=new kc(!1)},t.prototype.hasStroke=function(){var r=this.style,n=r.stroke;return!(n==null||n==="none"||!(r.lineWidth>0))},t.prototype.hasFill=function(){var r=this.style,n=r.fill;return n!=null&&n!=="none"},t.prototype.getBoundingRect=function(){var r=this._rect,n=this.style,i=!r;if(i){var o=!1;this.path||(o=!0,this.createPathProxy());var a=this.path;(o||this.__dirty&rh)&&(a.beginPath(),this.buildPath(a,this.shape,!1),this.pathUpdated()),r=a.getBoundingRect()}if(this._rect=r,this.hasStroke()&&this.path&&this.path.len()>0){var s=this._rectStroke||(this._rectStroke=r.clone());if(this.__dirty||i){s.copy(r);var l=n.strokeNoScale?this.getLineScale():1,u=n.lineWidth;if(!this.hasFill()){var c=this.strokeContainThreshold;u=Math.max(u,c==null?4:c)}l>1e-10&&(s.width+=u/l,s.height+=u/l,s.x-=u/l/2,s.y-=u/l/2)}return s}return r},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect(),a=this.style;if(r=i[0],n=i[1],o.contain(r,n)){var s=this.path;if(this.hasStroke()){var l=a.lineWidth,u=a.strokeNoScale?this.getLineScale():1;if(u>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),Uot(s,l/u,r,n)))return!0}if(this.hasFill())return Vot(s,r,n)}return!1},t.prototype.dirtyShape=function(){this.__dirty|=rh,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},t.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},t.prototype.animateShape=function(r){return this.animate("shape",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():r==="shape"?this.dirtyShape():this.markRedraw()},t.prototype.attrKV=function(r,n){r==="shape"?this.setShape(n):e.prototype.attrKV.call(this,r,n)},t.prototype.setShape=function(r,n){var i=this.shape;return i||(i=this.shape={}),typeof r=="string"?i[r]=n:_t(i,r),this.dirtyShape(),this},t.prototype.shapeChanged=function(){return!!(this.__dirty&rh)},t.prototype.createStyle=function(r){return Ob(pz,r)},t.prototype._innerSaveToNormal=function(r){e.prototype._innerSaveToNormal.call(this,r);var n=this._normalState;r.shape&&!n.shape&&(n.shape=_t({},this.shape))},t.prototype._applyStateObj=function(r,n,i,o,a,s){e.prototype._applyStateObj.call(this,r,n,i,o,a,s);var l=!(n&&o),u;if(n&&n.shape?a?o?u=n.shape:(u=_t({},i.shape),_t(u,n.shape)):(u=_t({},o?this.shape:i.shape),_t(u,n.shape)):l&&(u=i.shape),u)if(a){this.shape=_t({},this.shape);for(var c={},f=ze(u),h=0;h<f.length;h++){var d=f[h];typeof u[d]=="object"?this.shape[d]=u[d]:c[d]=u[d]}this._transitionState(r,{shape:c},s)}else this.shape=u,this.dirtyShape()},t.prototype._mergeStates=function(r){for(var n=e.prototype._mergeStates.call(this,r),i,o=0;o<r.length;o++){var a=r[o];a.shape&&(i=i||{},this._mergeStyle(i,a.shape))}return i&&(n.shape=i),n},t.prototype.getAnimationStyleProps=function(){return Wot},t.prototype.isZeroArea=function(){return!1},t.extend=function(r){var n=function(o){Ke(a,o);function a(s){var l=o.call(this,s)||this;return r.init&&r.init.call(l,s),l}return a.prototype.getDefaultStyle=function(){return oe(r.style)},a.prototype.getDefaultShape=function(){return oe(r.shape)},a}(t);for(var i in r)typeof r[i]=="function"&&(n.prototype[i]=r[i]);return n},t.initDefaultProps=function(){var r=t.prototype;r.type="path",r.strokeContainThreshold=5,r.segmentIgnoreThreshold=0,r.subPixelOptimize=!1,r.autoBatch=!1,r.__dirty=yi|qp|rh}(),t}(Wc);const Ne=jot;var Got=Ee({strokeFirst:!0,font:wc,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},pz),gz=function(e){Ke(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.hasStroke=function(){var r=this.style,n=r.stroke;return n!=null&&n!=="none"&&r.lineWidth>0},t.prototype.hasFill=function(){var r=this.style,n=r.fill;return n!=null&&n!=="none"},t.prototype.createStyle=function(r){return Ob(Got,r)},t.prototype.setBoundingRect=function(r){this._rect=r},t.prototype.getBoundingRect=function(){var r=this.style;if(!this._rect){var n=r.text;n!=null?n+="":n="";var i=cA(n,r.font,r.textAlign,r.textBaseline);if(i.x+=r.x||0,i.y+=r.y||0,this.hasStroke()){var o=r.lineWidth;i.x-=o/2,i.y-=o/2,i.width+=o,i.height+=o}this._rect=i}return this._rect},t.initDefaultProps=function(){var r=t.prototype;r.dirtyRectTolerance=10}(),t}(Wc);gz.prototype.type="tspan";const lP=gz;var Hot=Ee({x:0,y:0},cc),Xot={style:Ee({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},Fb.style)};function Yot(e){return!!(e&&typeof e!="string"&&e.width&&e.height)}var vz=function(e){Ke(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createStyle=function(r){return Ob(Hot,r)},t.prototype._getSize=function(r){var n=this.style,i=n[r];if(i!=null)return i;var o=Yot(n.image)?n.image:this.__image;if(!o)return 0;var a=r==="width"?"height":"width",s=n[a];return s==null?o[r]:o[r]/o[a]*s},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return Xot},t.prototype.getBoundingRect=function(){var r=this.style;return this._rect||(this._rect=new Le(r.x||0,r.y||0,this.getWidth(),this.getHeight())),this._rect},t}(Wc);vz.prototype.type="image";const As=vz;function Kot(e,t){var r=t.x,n=t.y,i=t.width,o=t.height,a=t.r,s,l,u,c;i<0&&(r=r+i,i=-i),o<0&&(n=n+o,o=-o),typeof a=="number"?s=l=u=c=a:a instanceof Array?a.length===1?s=l=u=c=a[0]:a.length===2?(s=u=a[0],l=c=a[1]):a.length===3?(s=a[0],l=c=a[1],u=a[2]):(s=a[0],l=a[1],u=a[2],c=a[3]):s=l=u=c=0;var f;s+l>i&&(f=s+l,s*=i/f,l*=i/f),u+c>i&&(f=u+c,u*=i/f,c*=i/f),l+u>o&&(f=l+u,l*=o/f,u*=o/f),s+c>o&&(f=s+c,s*=o/f,c*=o/f),e.moveTo(r+s,n),e.lineTo(r+i-l,n),l!==0&&e.arc(r+i-l,n+l,l,-Math.PI/2,0),e.lineTo(r+i,n+o-u),u!==0&&e.arc(r+i-u,n+o-u,u,0,Math.PI/2),e.lineTo(r+c,n+o),c!==0&&e.arc(r+c,n+o-c,c,Math.PI/2,Math.PI),e.lineTo(r,n+s),s!==0&&e.arc(r+s,n+s,s,Math.PI,Math.PI*1.5)}var ch=Math.round;function mz(e,t,r){if(!!t){var n=t.x1,i=t.x2,o=t.y1,a=t.y2;e.x1=n,e.x2=i,e.y1=o,e.y2=a;var s=r&&r.lineWidth;return s&&(ch(n*2)===ch(i*2)&&(e.x1=e.x2=Qu(n,s,!0)),ch(o*2)===ch(a*2)&&(e.y1=e.y2=Qu(o,s,!0))),e}}function yz(e,t,r){if(!!t){var n=t.x,i=t.y,o=t.width,a=t.height;e.x=n,e.y=i,e.width=o,e.height=a;var s=r&&r.lineWidth;return s&&(e.x=Qu(n,s,!0),e.y=Qu(i,s,!0),e.width=Math.max(Qu(n+o,s,!1)-e.x,o===0?0:1),e.height=Math.max(Qu(i+a,s,!1)-e.y,a===0?0:1)),e}}function Qu(e,t,r){if(!t)return e;var n=ch(e*2);return(n+ch(t))%2===0?n/2:(n+(r?1:-1))/2}var Zot=function(){function e(){this.x=0,this.y=0,this.width=0,this.height=0}return e}(),qot={},_z=function(e){Ke(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new Zot},t.prototype.buildPath=function(r,n){var i,o,a,s;if(this.subPixelOptimize){var l=yz(qot,n,this.style);i=l.x,o=l.y,a=l.width,s=l.height,l.r=n.r,n=l}else i=n.x,o=n.y,a=n.width,s=n.height;n.r?Kot(r,n):r.rect(i,o,a,s)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t}(Ne);_z.prototype.type="rect";const Lr=_z;var h6={fill:"#000"},d6=2,Jot={style:Ee({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},Fb.style)},bz=function(e){Ke(t,e);function t(r){var n=e.call(this)||this;return n.type="text",n._children=[],n._defaultStyle=h6,n.attr(r),n}return t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){e.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var r=0;r<this._children.length;r++){var n=this._children[r];n.zlevel=this.zlevel,n.z=this.z,n.z2=this.z2,n.culling=this.culling,n.cursor=this.cursor,n.invisible=this.invisible}},t.prototype.updateTransform=function(){var r=this.innerTransformable;r?(r.updateTransform(),r.transform&&(this.transform=r.transform)):e.prototype.updateTransform.call(this)},t.prototype.getLocalTransform=function(r){var n=this.innerTransformable;return n?n.getLocalTransform(r):e.prototype.getLocalTransform.call(this,r)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),e.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){this._childCursor=0,nat(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(r){e.prototype.addSelfToZr.call(this,r);for(var n=0;n<this._children.length;n++)this._children[n].__zr=r},t.prototype.removeSelfFromZr=function(r){e.prototype.removeSelfFromZr.call(this,r);for(var n=0;n<this._children.length;n++)this._children[n].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var r=new Le(0,0,0,0),n=this._children,i=[],o=null,a=0;a<n.length;a++){var s=n[a],l=s.getBoundingRect(),u=s.getLocalTransform(i);u?(r.copy(l),r.applyTransform(u),o=o||r.clone(),o.union(r)):(o=o||l.clone(),o.union(l))}this._rect=o||r}return this._rect},t.prototype.setDefaultTextStyle=function(r){this._defaultStyle=r||h6},t.prototype.setTextContent=function(r){},t.prototype._mergeStyle=function(r,n){if(!n)return r;var i=n.rich,o=r.rich||i&&{};return _t(r,n),i&&o?(this._mergeRich(o,i),r.rich=o):o&&(r.rich=o),r},t.prototype._mergeRich=function(r,n){for(var i=ze(n),o=0;o<i.length;o++){var a=i[o];r[a]=r[a]||{},_t(r[a],n[a])}},t.prototype.getAnimationStyleProps=function(){return Jot},t.prototype._getOrCreateChild=function(r){var n=this._children[this._childCursor];return(!n||!(n instanceof r))&&(n=new r),this._children[this._childCursor++]=n,n.__zr=this.__zr,n.parent=this,n},t.prototype._updatePlainTexts=function(){var r=this.style,n=r.font||wc,i=r.padding,o=b6(r),a=vot(o,r),s=lS(r),l=!!r.backgroundColor,u=a.outerHeight,c=a.outerWidth,f=a.contentWidth,h=a.lines,d=a.lineHeight,p=this._defaultStyle,g=r.x||0,m=r.y||0,v=r.align||p.align||"left",y=r.verticalAlign||p.verticalAlign||"top",b=g,w=nh(m,a.contentHeight,y);if(s||i){var T=Qp(g,c,v),S=nh(m,u,y);s&&this._renderBackground(r,r,T,S,c,u)}w+=d/2,i&&(b=_6(g,v,i),y==="top"?w+=i[0]:y==="bottom"&&(w-=i[2]));for(var k=0,E=!1,P=y6("fill"in r?r.fill:(E=!0,p.fill)),C=m6("stroke"in r?r.stroke:!l&&(!p.autoStroke||E)?(k=d6,p.stroke):null),A=r.textShadowBlur>0,L=r.width!=null&&(r.overflow==="truncate"||r.overflow==="break"||r.overflow==="breakAll"),R=a.calculatedLineHeight,D=0;D<h.length;D++){var F=this._getOrCreateChild(lP),z=F.createStyle();F.useStyle(z),z.text=h[D],z.x=b,z.y=w,v&&(z.textAlign=v),z.textBaseline="middle",z.opacity=r.opacity,z.strokeFirst=!0,A&&(z.shadowBlur=r.textShadowBlur||0,z.shadowColor=r.textShadowColor||"transparent",z.shadowOffsetX=r.textShadowOffsetX||0,z.shadowOffsetY=r.textShadowOffsetY||0),z.stroke=C,z.fill=P,C&&(z.lineWidth=r.lineWidth||k,z.lineDash=r.lineDash,z.lineDashOffset=r.lineDashOffset||0),z.font=n,g6(z,r),w+=d,L&&F.setBoundingRect(new Le(Qp(z.x,r.width,z.textAlign),nh(z.y,R,z.textBaseline),f,R))}},t.prototype._updateRichTexts=function(){var r=this.style,n=b6(r),i=_ot(n,r),o=i.width,a=i.outerWidth,s=i.outerHeight,l=r.padding,u=r.x||0,c=r.y||0,f=this._defaultStyle,h=r.align||f.align,d=r.verticalAlign||f.verticalAlign,p=Qp(u,a,h),g=nh(c,s,d),m=p,v=g;l&&(m+=l[3],v+=l[0]);var y=m+o;lS(r)&&this._renderBackground(r,r,p,g,a,s);for(var b=!!r.backgroundColor,w=0;w<i.lines.length;w++){for(var T=i.lines[w],S=T.tokens,k=S.length,E=T.lineHeight,P=T.width,C=0,A=m,L=y,R=k-1,D=void 0;C<k&&(D=S[C],!D.align||D.align==="left");)this._placeToken(D,r,E,v,A,"left",b),P-=D.width,A+=D.width,C++;for(;R>=0&&(D=S[R],D.align==="right");)this._placeToken(D,r,E,v,L,"right",b),P-=D.width,L-=D.width,R--;for(A+=(o-(A-m)-(y-L)-P)/2;C<=R;)D=S[C],this._placeToken(D,r,E,v,A+D.width/2,"center",b),A+=D.width,C++;v+=E}},t.prototype._placeToken=function(r,n,i,o,a,s,l){var u=n.rich[r.styleName]||{};u.text=r.text;var c=r.verticalAlign,f=o+i/2;c==="top"?f=o+r.height/2:c==="bottom"&&(f=o+i-r.height/2);var h=!r.isLineHolder&&lS(u);h&&this._renderBackground(u,n,s==="right"?a-r.width:s==="center"?a-r.width/2:a,f-r.height/2,r.width,r.height);var d=!!u.backgroundColor,p=r.textPadding;p&&(a=_6(a,s,p),f-=r.height/2-p[0]-r.innerHeight/2);var g=this._getOrCreateChild(lP),m=g.createStyle();g.useStyle(m);var v=this._defaultStyle,y=!1,b=0,w=y6("fill"in u?u.fill:"fill"in n?n.fill:(y=!0,v.fill)),T=m6("stroke"in u?u.stroke:"stroke"in n?n.stroke:!d&&!l&&(!v.autoStroke||y)?(b=d6,v.stroke):null),S=u.textShadowBlur>0||n.textShadowBlur>0;m.text=r.text,m.x=a,m.y=f,S&&(m.shadowBlur=u.textShadowBlur||n.textShadowBlur||0,m.shadowColor=u.textShadowColor||n.textShadowColor||"transparent",m.shadowOffsetX=u.textShadowOffsetX||n.textShadowOffsetX||0,m.shadowOffsetY=u.textShadowOffsetY||n.textShadowOffsetY||0),m.textAlign=s,m.textBaseline="middle",m.font=r.font||wc,m.opacity=Og(u.opacity,n.opacity,1),g6(m,u),T&&(m.lineWidth=Og(u.lineWidth,n.lineWidth,b),m.lineDash=_e(u.lineDash,n.lineDash),m.lineDashOffset=n.lineDashOffset||0,m.stroke=T),w&&(m.fill=w);var k=r.contentWidth,E=r.contentHeight;g.setBoundingRect(new Le(Qp(m.x,k,m.textAlign),nh(m.y,E,m.textBaseline),k,E))},t.prototype._renderBackground=function(r,n,i,o,a,s){var l=r.backgroundColor,u=r.borderWidth,c=r.borderColor,f=l&&l.image,h=l&&!f,d=r.borderRadius,p=this,g,m;if(h||r.lineHeight||u&&c){g=this._getOrCreateChild(Lr),g.useStyle(g.createStyle()),g.style.fill=null;var v=g.shape;v.x=i,v.y=o,v.width=a,v.height=s,v.r=d,g.dirtyShape()}if(h){var y=g.style;y.fill=l||null,y.fillOpacity=_e(r.fillOpacity,1)}else if(f){m=this._getOrCreateChild(As),m.onload=function(){p.dirtyStyle()};var b=m.style;b.image=l.image,b.x=i,b.y=o,b.width=a,b.height=s}if(u&&c){var y=g.style;y.lineWidth=u,y.stroke=c,y.strokeOpacity=_e(r.strokeOpacity,1),y.lineDash=r.borderDash,y.lineDashOffset=r.borderDashOffset||0,g.strokeContainThreshold=0,g.hasFill()&&g.hasStroke()&&(y.strokeFirst=!0,y.lineWidth*=2)}var w=(g||m).style;w.shadowBlur=r.shadowBlur||0,w.shadowColor=r.shadowColor||"transparent",w.shadowOffsetX=r.shadowOffsetX||0,w.shadowOffsetY=r.shadowOffsetY||0,w.opacity=Og(r.opacity,n.opacity,1)},t.makeFont=function(r){var n="";return rat(r)&&(n=[r.fontStyle,r.fontWeight,eat(r.fontSize),r.fontFamily||"sans-serif"].join(" ")),n&&ma(n)||r.textFont||r.font},t}(Wc),Qot={left:!0,right:1,center:1},tat={top:1,bottom:1,middle:1},p6=["fontStyle","fontWeight","fontSize","fontFamily"];function eat(e){return typeof e=="string"&&(e.indexOf("px")!==-1||e.indexOf("rem")!==-1||e.indexOf("em")!==-1)?e:isNaN(+e)?tA+"px":e+"px"}function g6(e,t){for(var r=0;r<p6.length;r++){var n=p6[r],i=t[n];i!=null&&(e[n]=i)}}function rat(e){return e.fontSize!=null||e.fontFamily||e.fontWeight}function nat(e){return v6(e),U(e.rich,v6),e}function v6(e){if(e){e.font=bz.makeFont(e);var t=e.align;t==="middle"&&(t="center"),e.align=t==null||Qot[t]?t:"left";var r=e.verticalAlign;r==="center"&&(r="middle"),e.verticalAlign=r==null||tat[r]?r:"top";var n=e.padding;n&&(e.padding=EB(e.padding))}}function m6(e,t){return e==null||t<=0||e==="transparent"||e==="none"?null:e.image||e.colorStops?"#000":e}function y6(e){return e==null||e==="none"?null:e.image||e.colorStops?"#000":e}function _6(e,t,r){return t==="right"?e-r[1]:t==="center"?e+r[3]/2-r[1]/2:e+r[3]}function b6(e){var t=e.text;return t!=null&&(t+=""),t}function lS(e){return!!(e.backgroundColor||e.lineHeight||e.borderWidth&&e.borderColor)}const Or=bz;var Me=nr(),iat=function(e,t,r,n){if(n){var i=Me(n);i.dataIndex=r,i.dataType=t,i.seriesIndex=e,n.type==="group"&&n.traverse(function(o){var a=Me(o);a.seriesIndex=e,a.dataIndex=r,a.dataType=t})}},w6=1,S6={},wz=nr(),mA=nr(),yA=0,e0=1,$b=2,to=["emphasis","blur","select"],T6=["normal","emphasis","blur","select"],oat=10,aat=9,fc="highlight",vy="downplay",Fg="select",my="unselect",$g="toggleSelect";function kf(e){return e!=null&&e!=="none"}var k6=new Jv(100);function P6(e){if($t(e)){var t=k6.get(e);return t||(t=UI(e,-.1),k6.put(e,t)),t}else if(Lb(e)){var r=_t({},e);return r.colorStops=Bt(e.colorStops,function(n){return{offset:n.offset,color:UI(n.color,-.1)}}),r}return e}function Bb(e,t,r){e.onHoverStateChange&&(e.hoverState||0)!==r&&e.onHoverStateChange(t),e.hoverState=r}function Sz(e){Bb(e,"emphasis",$b)}function Tz(e){e.hoverState===$b&&Bb(e,"normal",yA)}function _A(e){Bb(e,"blur",e0)}function kz(e){e.hoverState===e0&&Bb(e,"normal",yA)}function sat(e){e.selected=!0}function lat(e){e.selected=!1}function E6(e,t,r){t(e,r)}function xs(e,t,r){E6(e,t,r),e.isGroup&&e.traverse(function(n){E6(n,t,r)})}function uP(e,t){switch(t){case"emphasis":e.hoverState=$b;break;case"normal":e.hoverState=yA;break;case"blur":e.hoverState=e0;break;case"select":e.selected=!0}}function uat(e,t,r,n){for(var i=e.style,o={},a=0;a<t.length;a++){var s=t[a],l=i[s];o[s]=l==null?n&&n[s]:l}for(var a=0;a<e.animators.length;a++){var u=e.animators[a];u.__fromStateTransition&&u.__fromStateTransition.indexOf(r)<0&&u.targetName==="style"&&u.saveTo(o,t)}return o}function cat(e,t,r,n){var i=r&&De(r,"select")>=0,o=!1;if(e instanceof Ne){var a=wz(e),s=i&&a.selectFill||a.normalFill,l=i&&a.selectStroke||a.normalStroke;if(kf(s)||kf(l)){n=n||{};var u=n.style||{};u.fill==="inherit"?(o=!0,n=_t({},n),u=_t({},u),u.fill=s):!kf(u.fill)&&kf(s)?(o=!0,n=_t({},n),u=_t({},u),u.fill=P6(s)):!kf(u.stroke)&&kf(l)&&(o||(n=_t({},n),u=_t({},u)),u.stroke=P6(l)),n.style=u}}if(n&&n.z2==null){o||(n=_t({},n));var c=e.z2EmphasisLift;n.z2=e.z2+(c!=null?c:oat)}return n}function fat(e,t,r){if(r&&r.z2==null){r=_t({},r);var n=e.z2SelectLift;r.z2=e.z2+(n!=null?n:aat)}return r}function hat(e,t,r){var n=De(e.currentStates,t)>=0,i=e.style.opacity,o=n?null:uat(e,["opacity"],t,{opacity:1});r=r||{};var a=r.style||{};return a.opacity==null&&(r=_t({},r),a=_t({opacity:n?i:o.opacity*.1},a),r.style=a),r}function uS(e,t){var r=this.states[e];if(this.style){if(e==="emphasis")return cat(this,e,t,r);if(e==="blur")return hat(this,e,r);if(e==="select")return fat(this,e,r)}return r}function bA(e){e.stateProxy=uS;var t=e.getTextContent(),r=e.getTextGuideLine();t&&(t.stateProxy=uS),r&&(r.stateProxy=uS)}function C6(e,t){!Az(e,t)&&!e.__highByOuter&&xs(e,Sz)}function A6(e,t){!Az(e,t)&&!e.__highByOuter&&xs(e,Tz)}function cv(e,t){e.__highByOuter|=1<<(t||0),xs(e,Sz)}function fv(e,t){!(e.__highByOuter&=~(1<<(t||0)))&&xs(e,Tz)}function Pz(e){xs(e,_A)}function wA(e){xs(e,kz)}function Ez(e){xs(e,sat)}function Cz(e){xs(e,lat)}function Az(e,t){return e.__highDownSilentOnTouch&&t.zrByTouch}function xz(e){var t=e.getModel(),r=[],n=[];t.eachComponent(function(i,o){var a=mA(o),s=i==="series",l=s?e.getViewOfSeriesModel(o):e.getViewOfComponentModel(o);!s&&n.push(l),a.isBlured&&(l.group.traverse(function(u){kz(u)}),s&&r.push(o)),a.isBlured=!1}),U(n,function(i){i&&i.toggleBlurSeries&&i.toggleBlurSeries(r,!1,t)})}function cP(e,t,r,n){var i=n.getModel();r=r||"coordinateSystem";function o(u,c){for(var f=0;f<c.length;f++){var h=u.getItemGraphicEl(c[f]);h&&wA(h)}}if(e!=null&&!(!t||t==="none")){var a=i.getSeriesByIndex(e),s=a.coordinateSystem;s&&s.master&&(s=s.master);var l=[];i.eachSeries(function(u){var c=a===u,f=u.coordinateSystem;f&&f.master&&(f=f.master);var h=f&&s?f===s:c;if(!(r==="series"&&!c||r==="coordinateSystem"&&!h||t==="series"&&c)){var d=n.getViewOfSeriesModel(u);if(d.group.traverse(function(m){_A(m)}),In(t))o(u.getData(),t);else if(Yt(t))for(var p=ze(t),g=0;g<p.length;g++)o(u.getData(p[g]),t[p[g]]);l.push(u),mA(u).isBlured=!0}}),i.eachComponent(function(u,c){if(u!=="series"){var f=n.getViewOfComponentModel(c);f&&f.toggleBlurSeries&&f.toggleBlurSeries(l,!0,i)}})}}function fP(e,t,r){if(!(e==null||t==null)){var n=r.getModel().getComponent(e,t);if(!!n){mA(n).isBlured=!0;var i=r.getViewOfComponentModel(n);!i||!i.focusBlurEnabled||i.group.traverse(function(o){_A(o)})}}}function dat(e,t,r){var n=e.seriesIndex,i=e.getData(t.dataType);if(!!i){var o=Tc(i,t);o=(St(o)?o[0]:o)||0;var a=i.getItemGraphicEl(o);if(!a)for(var s=i.count(),l=0;!a&&l<s;)a=i.getItemGraphicEl(l++);if(a){var u=Me(a);cP(n,u.focus,u.blurScope,r)}else{var c=e.get(["emphasis","focus"]),f=e.get(["emphasis","blurScope"]);c!=null&&cP(n,c,f,r)}}}function SA(e,t,r,n){var i={focusSelf:!1,dispatchers:null};if(e==null||e==="series"||t==null||r==null)return i;var o=n.getModel().getComponent(e,t);if(!o)return i;var a=n.getViewOfComponentModel(o);if(!a||!a.findHighDownDispatchers)return i;for(var s=a.findHighDownDispatchers(r),l,u=0;u<s.length;u++)if(Me(s[u]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:s}}function pat(e,t,r){var n=Me(e),i=SA(n.componentMainType,n.componentIndex,n.componentHighDownName,r),o=i.dispatchers,a=i.focusSelf;o?(a&&fP(n.componentMainType,n.componentIndex,r),U(o,function(s){return C6(s,t)})):(cP(n.seriesIndex,n.focus,n.blurScope,r),n.focus==="self"&&fP(n.componentMainType,n.componentIndex,r),C6(e,t))}function gat(e,t,r){xz(r);var n=Me(e),i=SA(n.componentMainType,n.componentIndex,n.componentHighDownName,r).dispatchers;i?U(i,function(o){return A6(o,t)}):A6(e,t)}function vat(e,t,r){if(!!pP(t)){var n=t.dataType,i=e.getData(n),o=Tc(i,t);St(o)||(o=[o]),e[t.type===$g?"toggleSelect":t.type===Fg?"select":"unselect"](o,n)}}function x6(e){var t=e.getAllData();U(t,function(r){var n=r.data,i=r.type;n.eachItemGraphicEl(function(o,a){e.isSelected(a,i)?Ez(o):Cz(o)})})}function mat(e){var t=[];return e.eachSeries(function(r){var n=r.getAllData();U(n,function(i){i.data;var o=i.type,a=r.getSelectedDataIndices();if(a.length>0){var s={dataIndex:a,seriesIndex:r.seriesIndex};o!=null&&(s.dataType=o),t.push(s)}})}),t}function hP(e,t,r){TA(e,!0),xs(e,bA),_at(e,t,r)}function yat(e){TA(e,!1)}function Pc(e,t,r,n){n?yat(e):hP(e,t,r)}function _at(e,t,r){var n=Me(e);t!=null?(n.focus=t,n.blurScope=r):n.focus&&(n.focus=null)}var M6=["emphasis","blur","select"],bat={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function hv(e,t,r,n){r=r||"itemStyle";for(var i=0;i<M6.length;i++){var o=M6[i],a=t.getModel([o,r]),s=e.ensureState(o);s.style=n?n(a):a[bat[r]]()}}function TA(e,t){var r=t===!1,n=e;e.highDownSilentOnTouch&&(n.__highDownSilentOnTouch=e.highDownSilentOnTouch),(!r||n.__highDownDispatcher)&&(n.__highByOuter=n.__highByOuter||0,n.__highDownDispatcher=!r)}function dP(e){return!!(e&&e.__highDownDispatcher)}function wat(e){var t=S6[e];return t==null&&w6<=32&&(t=S6[e]=w6++),t}function pP(e){var t=e.type;return t===Fg||t===my||t===$g}function I6(e){var t=e.type;return t===fc||t===vy}function Sat(e){var t=wz(e);t.normalFill=e.style.fill,t.normalStroke=e.style.stroke;var r=e.states.select||{};t.selectFill=r.style&&r.style.fill||null,t.selectStroke=r.style&&r.style.stroke||null}var Pf=kc.CMD,Tat=[[],[],[]],L6=Math.sqrt,kat=Math.atan2;function Pat(e,t){if(!!t){var r=e.data,n=e.len(),i,o,a,s,l,u,c=Pf.M,f=Pf.C,h=Pf.L,d=Pf.R,p=Pf.A,g=Pf.Q;for(a=0,s=0;a<n;){switch(i=r[a++],s=a,o=0,i){case c:o=1;break;case h:o=1;break;case f:o=3;break;case g:o=2;break;case p:var m=t[4],v=t[5],y=L6(t[0]*t[0]+t[1]*t[1]),b=L6(t[2]*t[2]+t[3]*t[3]),w=kat(-t[1]/b,t[0]/y);r[a]*=y,r[a++]+=m,r[a]*=b,r[a++]+=v,r[a++]*=y,r[a++]*=b,r[a++]+=w,r[a++]+=w,a+=2,s=a;break;case d:u[0]=r[a++],u[1]=r[a++],Vn(u,u,t),r[s++]=u[0],r[s++]=u[1],u[0]+=r[a++],u[1]+=r[a++],Vn(u,u,t),r[s++]=u[0],r[s++]=u[1]}for(l=0;l<o;l++){var T=Tat[l];T[0]=r[a++],T[1]=r[a++],Vn(T,T,t),r[s++]=T[0],r[s++]=T[1]}}e.increaseVersion()}}var cS=Math.sqrt,lm=Math.sin,um=Math.cos,tp=Math.PI;function O6(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function gP(e,t){return(e[0]*t[0]+e[1]*t[1])/(O6(e)*O6(t))}function R6(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(gP(e,t))}function D6(e,t,r,n,i,o,a,s,l,u,c){var f=l*(tp/180),h=um(f)*(e-r)/2+lm(f)*(t-n)/2,d=-1*lm(f)*(e-r)/2+um(f)*(t-n)/2,p=h*h/(a*a)+d*d/(s*s);p>1&&(a*=cS(p),s*=cS(p));var g=(i===o?-1:1)*cS((a*a*(s*s)-a*a*(d*d)-s*s*(h*h))/(a*a*(d*d)+s*s*(h*h)))||0,m=g*a*d/s,v=g*-s*h/a,y=(e+r)/2+um(f)*m-lm(f)*v,b=(t+n)/2+lm(f)*m+um(f)*v,w=R6([1,0],[(h-m)/a,(d-v)/s]),T=[(h-m)/a,(d-v)/s],S=[(-1*h-m)/a,(-1*d-v)/s],k=R6(T,S);if(gP(T,S)<=-1&&(k=tp),gP(T,S)>=1&&(k=0),k<0){var E=Math.round(k/tp*1e6)/1e6;k=tp*2+E%2*tp}c.addData(u,y,b,a,s,w,k,f,o)}var Eat=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,Cat=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function Aat(e){var t=new kc;if(!e)return t;var r=0,n=0,i=r,o=n,a,s=kc.CMD,l=e.match(Eat);if(!l)return t;for(var u=0;u<l.length;u++){for(var c=l[u],f=c.charAt(0),h=void 0,d=c.match(Cat)||[],p=d.length,g=0;g<p;g++)d[g]=parseFloat(d[g]);for(var m=0;m<p;){var v=void 0,y=void 0,b=void 0,w=void 0,T=void 0,S=void 0,k=void 0,E=r,P=n,C=void 0,A=void 0;switch(f){case"l":r+=d[m++],n+=d[m++],h=s.L,t.addData(h,r,n);break;case"L":r=d[m++],n=d[m++],h=s.L,t.addData(h,r,n);break;case"m":r+=d[m++],n+=d[m++],h=s.M,t.addData(h,r,n),i=r,o=n,f="l";break;case"M":r=d[m++],n=d[m++],h=s.M,t.addData(h,r,n),i=r,o=n,f="L";break;case"h":r+=d[m++],h=s.L,t.addData(h,r,n);break;case"H":r=d[m++],h=s.L,t.addData(h,r,n);break;case"v":n+=d[m++],h=s.L,t.addData(h,r,n);break;case"V":n=d[m++],h=s.L,t.addData(h,r,n);break;case"C":h=s.C,t.addData(h,d[m++],d[m++],d[m++],d[m++],d[m++],d[m++]),r=d[m-2],n=d[m-1];break;case"c":h=s.C,t.addData(h,d[m++]+r,d[m++]+n,d[m++]+r,d[m++]+n,d[m++]+r,d[m++]+n),r+=d[m-2],n+=d[m-1];break;case"S":v=r,y=n,C=t.len(),A=t.data,a===s.C&&(v+=r-A[C-4],y+=n-A[C-3]),h=s.C,E=d[m++],P=d[m++],r=d[m++],n=d[m++],t.addData(h,v,y,E,P,r,n);break;case"s":v=r,y=n,C=t.len(),A=t.data,a===s.C&&(v+=r-A[C-4],y+=n-A[C-3]),h=s.C,E=r+d[m++],P=n+d[m++],r+=d[m++],n+=d[m++],t.addData(h,v,y,E,P,r,n);break;case"Q":E=d[m++],P=d[m++],r=d[m++],n=d[m++],h=s.Q,t.addData(h,E,P,r,n);break;case"q":E=d[m++]+r,P=d[m++]+n,r+=d[m++],n+=d[m++],h=s.Q,t.addData(h,E,P,r,n);break;case"T":v=r,y=n,C=t.len(),A=t.data,a===s.Q&&(v+=r-A[C-4],y+=n-A[C-3]),r=d[m++],n=d[m++],h=s.Q,t.addData(h,v,y,r,n);break;case"t":v=r,y=n,C=t.len(),A=t.data,a===s.Q&&(v+=r-A[C-4],y+=n-A[C-3]),r+=d[m++],n+=d[m++],h=s.Q,t.addData(h,v,y,r,n);break;case"A":b=d[m++],w=d[m++],T=d[m++],S=d[m++],k=d[m++],E=r,P=n,r=d[m++],n=d[m++],h=s.A,D6(E,P,r,n,S,k,b,w,T,h,t);break;case"a":b=d[m++],w=d[m++],T=d[m++],S=d[m++],k=d[m++],E=r,P=n,r+=d[m++],n+=d[m++],h=s.A,D6(E,P,r,n,S,k,b,w,T,h,t);break}}(f==="z"||f==="Z")&&(h=s.Z,t.addData(h),r=i,n=o),a=h}return t.toStatic(),t}var Mz=function(e){Ke(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.applyTransform=function(r){},t}(Ne);function Iz(e){return e.setData!=null}function Lz(e,t){var r=Aat(e),n=_t({},t);return n.buildPath=function(i){if(Iz(i)){i.setData(r.data);var o=i.getContext();o&&i.rebuildPath(o,1)}else{var o=i;r.rebuildPath(o,1)}},n.applyTransform=function(i){Pat(r,i),this.dirtyShape()},n}function xat(e,t){return new Mz(Lz(e,t))}function Mat(e,t){var r=Lz(e,t),n=function(i){Ke(o,i);function o(a){var s=i.call(this,a)||this;return s.applyTransform=r.applyTransform,s.buildPath=r.buildPath,s}return o}(Mz);return n}function Iat(e,t){for(var r=[],n=e.length,i=0;i<n;i++){var o=e[i];r.push(o.getUpdatedPathProxy(!0))}var a=new Ne(t);return a.createPathProxy(),a.buildPath=function(s){if(Iz(s)){s.appendPath(r);var l=s.getContext();l&&s.rebuildPath(l,1)}},a}var Lat=function(){function e(){this.cx=0,this.cy=0,this.r=0}return e}(),Oz=function(e){Ke(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new Lat},t.prototype.buildPath=function(r,n){r.moveTo(n.cx+n.r,n.cy),r.arc(n.cx,n.cy,n.r,0,Math.PI*2)},t}(Ne);Oz.prototype.type="circle";const kA=Oz;var Oat=function(){function e(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return e}(),Rz=function(e){Ke(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new Oat},t.prototype.buildPath=function(r,n){var i=.5522848,o=n.cx,a=n.cy,s=n.rx,l=n.ry,u=s*i,c=l*i;r.moveTo(o-s,a),r.bezierCurveTo(o-s,a-c,o-u,a-l,o,a-l),r.bezierCurveTo(o+u,a-l,o+s,a-c,o+s,a),r.bezierCurveTo(o+s,a+c,o+u,a+l,o,a+l),r.bezierCurveTo(o-u,a+l,o-s,a+c,o-s,a),r.closePath()},t}(Ne);Rz.prototype.type="ellipse";const Dz=Rz;var Nz=Math.PI,fS=Nz*2,Cu=Math.sin,Ef=Math.cos,Rat=Math.acos,mn=Math.atan2,N6=Math.abs,Bg=Math.sqrt,tg=Math.max,Qo=Math.min,mo=1e-4;function Dat(e,t,r,n,i,o,a,s){var l=r-e,u=n-t,c=a-i,f=s-o,h=f*l-c*u;if(!(h*h<mo))return h=(c*(t-o)-f*(e-i))/h,[e+h*l,t+h*u]}function cm(e,t,r,n,i,o,a){var s=e-r,l=t-n,u=(a?o:-o)/Bg(s*s+l*l),c=u*l,f=-u*s,h=e+c,d=t+f,p=r+c,g=n+f,m=(h+p)/2,v=(d+g)/2,y=p-h,b=g-d,w=y*y+b*b,T=i-o,S=h*g-p*d,k=(b<0?-1:1)*Bg(tg(0,T*T*w-S*S)),E=(S*b-y*k)/w,P=(-S*y-b*k)/w,C=(S*b+y*k)/w,A=(-S*y+b*k)/w,L=E-m,R=P-v,D=C-m,F=A-v;return L*L+R*R>D*D+F*F&&(E=C,P=A),{cx:E,cy:P,x0:-c,y0:-f,x1:E*(i/T-1),y1:P*(i/T-1)}}function Nat(e){var t;if(St(e)){var r=e.length;if(!r)return e;r===1?t=[e[0],e[0],0,0]:r===2?t=[e[0],e[0],e[1],e[1]]:r===3?t=e.concat(e[2]):t=e}else t=[e,e,e,e];return t}function Fat(e,t){var r,n=tg(t.r,0),i=tg(t.r0||0,0),o=n>0,a=i>0;if(!(!o&&!a)){if(o||(n=i,i=0),i>n){var s=n;n=i,i=s}var l=t.startAngle,u=t.endAngle;if(!(isNaN(l)||isNaN(u))){var c=t.cx,f=t.cy,h=!!t.clockwise,d=N6(u-l),p=d>fS&&d%fS;if(p>mo&&(d=p),!(n>mo))e.moveTo(c,f);else if(d>fS-mo)e.moveTo(c+n*Ef(l),f+n*Cu(l)),e.arc(c,f,n,l,u,!h),i>mo&&(e.moveTo(c+i*Ef(u),f+i*Cu(u)),e.arc(c,f,i,u,l,h));else{var g=void 0,m=void 0,v=void 0,y=void 0,b=void 0,w=void 0,T=void 0,S=void 0,k=void 0,E=void 0,P=void 0,C=void 0,A=void 0,L=void 0,R=void 0,D=void 0,F=n*Ef(l),z=n*Cu(l),Y=i*Ef(u),K=i*Cu(u),et=d>mo;if(et){var Tt=t.cornerRadius;Tt&&(r=Nat(Tt),g=r[0],m=r[1],v=r[2],y=r[3]);var Ct=N6(n-i)/2;if(b=Qo(Ct,v),w=Qo(Ct,y),T=Qo(Ct,g),S=Qo(Ct,m),P=k=tg(b,w),C=E=tg(T,S),(k>mo||E>mo)&&(A=n*Ef(u),L=n*Cu(u),R=i*Ef(l),D=i*Cu(l),d<Nz)){var vt=Dat(F,z,R,D,A,L,Y,K);if(vt){var wt=F-vt[0],Kt=z-vt[1],Z=A-vt[0],it=L-vt[1],tt=1/Cu(Rat((wt*Z+Kt*it)/(Bg(wt*wt+Kt*Kt)*Bg(Z*Z+it*it)))/2),bt=Bg(vt[0]*vt[0]+vt[1]*vt[1]);P=Qo(k,(n-bt)/(tt+1)),C=Qo(E,(i-bt)/(tt-1))}}}if(!et)e.moveTo(c+F,f+z);else if(P>mo){var kt=Qo(v,P),It=Qo(y,P),pt=cm(R,D,F,z,n,kt,h),mt=cm(A,L,Y,K,n,It,h);e.moveTo(c+pt.cx+pt.x0,f+pt.cy+pt.y0),P<k&&kt===It?e.arc(c+pt.cx,f+pt.cy,P,mn(pt.y0,pt.x0),mn(mt.y0,mt.x0),!h):(kt>0&&e.arc(c+pt.cx,f+pt.cy,kt,mn(pt.y0,pt.x0),mn(pt.y1,pt.x1),!h),e.arc(c,f,n,mn(pt.cy+pt.y1,pt.cx+pt.x1),mn(mt.cy+mt.y1,mt.cx+mt.x1),!h),It>0&&e.arc(c+mt.cx,f+mt.cy,It,mn(mt.y1,mt.x1),mn(mt.y0,mt.x0),!h))}else e.moveTo(c+F,f+z),e.arc(c,f,n,l,u,!h);if(!(i>mo)||!et)e.lineTo(c+Y,f+K);else if(C>mo){var kt=Qo(g,C),It=Qo(m,C),pt=cm(Y,K,A,L,i,-It,h),mt=cm(F,z,R,D,i,-kt,h);e.lineTo(c+pt.cx+pt.x0,f+pt.cy+pt.y0),C<E&&kt===It?e.arc(c+pt.cx,f+pt.cy,C,mn(pt.y0,pt.x0),mn(mt.y0,mt.x0),!h):(It>0&&e.arc(c+pt.cx,f+pt.cy,It,mn(pt.y0,pt.x0),mn(pt.y1,pt.x1),!h),e.arc(c,f,i,mn(pt.cy+pt.y1,pt.cx+pt.x1),mn(mt.cy+mt.y1,mt.cx+mt.x1),h),kt>0&&e.arc(c+mt.cx,f+mt.cy,kt,mn(mt.y1,mt.x1),mn(mt.y0,mt.x0),!h))}else e.lineTo(c+Y,f+K),e.arc(c,f,i,u,l,h)}e.closePath()}}}var $at=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return e}(),Fz=function(e){Ke(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new $at},t.prototype.buildPath=function(r,n){Fat(r,n)},t.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},t}(Ne);Fz.prototype.type="sector";const r0=Fz;var Bat=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return e}(),$z=function(e){Ke(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new Bat},t.prototype.buildPath=function(r,n){var i=n.cx,o=n.cy,a=Math.PI*2;r.moveTo(i+n.r,o),r.arc(i,o,n.r,0,a,!1),r.moveTo(i+n.r0,o),r.arc(i,o,n.r0,0,a,!0)},t}(Ne);$z.prototype.type="ring";const Bz=$z;function zat(e,t,r,n){var i=[],o=[],a=[],s=[],l,u,c,f;if(n){c=[1/0,1/0],f=[-1/0,-1/0];for(var h=0,d=e.length;h<d;h++)sh(c,c,e[h]),lh(f,f,e[h]);sh(c,c,n[0]),lh(f,f,n[1])}for(var h=0,d=e.length;h<d;h++){var p=e[h];if(r)l=e[h?h-1:d-1],u=e[(h+1)%d];else if(h===0||h===d-1){i.push(unt(e[h]));continue}else l=e[h-1],u=e[h+1];MB(o,u,l),Cw(o,o,t);var g=Vk(p,l),m=Vk(p,u),v=g+m;v!==0&&(g/=v,m/=v),Cw(a,o,-g),Cw(s,o,m);var y=CI([],p,a),b=CI([],p,s);n&&(lh(y,y,c),sh(y,y,f),lh(b,b,c),sh(b,b,f)),i.push(y),i.push(b)}return r&&i.push(i.shift()),i}function zz(e,t,r){var n=t.smooth,i=t.points;if(i&&i.length>=2){if(n){var o=zat(i,n,r,t.smoothConstraint);e.moveTo(i[0][0],i[0][1]);for(var a=i.length,s=0;s<(r?a:a-1);s++){var l=o[s*2],u=o[s*2+1],c=i[(s+1)%a];e.bezierCurveTo(l[0],l[1],u[0],u[1],c[0],c[1])}}else{e.moveTo(i[0][0],i[0][1]);for(var s=1,f=i.length;s<f;s++)e.lineTo(i[s][0],i[s][1])}r&&e.closePath()}}var Vat=function(){function e(){this.points=null,this.smooth=0,this.smoothConstraint=null}return e}(),Vz=function(e){Ke(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new Vat},t.prototype.buildPath=function(r,n){zz(r,n,!0)},t}(Ne);Vz.prototype.type="polygon";const dv=Vz;var Uat=function(){function e(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return e}(),Uz=function(e){Ke(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Uat},t.prototype.buildPath=function(r,n){zz(r,n,!1)},t}(Ne);Uz.prototype.type="polyline";const Wz=Uz;var Wat={},jat=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}(),jz=function(e){Ke(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new jat},t.prototype.buildPath=function(r,n){var i,o,a,s;if(this.subPixelOptimize){var l=mz(Wat,n,this.style);i=l.x1,o=l.y1,a=l.x2,s=l.y2}else i=n.x1,o=n.y1,a=n.x2,s=n.y2;var u=n.percent;u!==0&&(r.moveTo(i,o),u<1&&(a=i*(1-u)+a*u,s=o*(1-u)+s*u),r.lineTo(a,s))},t.prototype.pointAt=function(r){var n=this.shape;return[n.x1*(1-r)+n.x2*r,n.y1*(1-r)+n.y2*r]},t}(Ne);jz.prototype.type="line";const Wl=jz;var Yn=[],Gat=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return e}();function F6(e,t,r){var n=e.cpx2,i=e.cpy2;return n!=null||i!=null?[(r?BI:zr)(e.x1,e.cpx1,e.cpx2,e.x2,t),(r?BI:zr)(e.y1,e.cpy1,e.cpy2,e.y2,t)]:[(r?zI:wn)(e.x1,e.cpx1,e.x2,t),(r?zI:wn)(e.y1,e.cpy1,e.y2,t)]}var Gz=function(e){Ke(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Gat},t.prototype.buildPath=function(r,n){var i=n.x1,o=n.y1,a=n.x2,s=n.y2,l=n.cpx1,u=n.cpy1,c=n.cpx2,f=n.cpy2,h=n.percent;h!==0&&(r.moveTo(i,o),c==null||f==null?(h<1&&(h_(i,l,a,h,Yn),l=Yn[1],a=Yn[2],h_(o,u,s,h,Yn),u=Yn[1],s=Yn[2]),r.quadraticCurveTo(l,u,a,s)):(h<1&&(f_(i,l,c,a,h,Yn),l=Yn[1],c=Yn[2],a=Yn[3],f_(o,u,f,s,h,Yn),u=Yn[1],f=Yn[2],s=Yn[3]),r.bezierCurveTo(l,u,c,f,a,s)))},t.prototype.pointAt=function(r){return F6(this.shape,r,!1)},t.prototype.tangentAt=function(r){var n=F6(this.shape,r,!0);return oA(n,n)},t}(Ne);Gz.prototype.type="bezier-curve";const zb=Gz;var Hat=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),Hz=function(e){Ke(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Hat},t.prototype.buildPath=function(r,n){var i=n.cx,o=n.cy,a=Math.max(n.r,0),s=n.startAngle,l=n.endAngle,u=n.clockwise,c=Math.cos(s),f=Math.sin(s);r.moveTo(c*a+i,f*a+o),r.arc(i,o,a,s,l,!u)},t}(Ne);Hz.prototype.type="arc";const PA=Hz;var Xat=function(e){Ke(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="compound",r}return t.prototype._updatePathDirty=function(){for(var r=this.shape.paths,n=this.shapeChanged(),i=0;i<r.length;i++)n=n||r[i].shapeChanged();n&&this.dirtyShape()},t.prototype.beforeBrush=function(){this._updatePathDirty();for(var r=this.shape.paths||[],n=this.getGlobalScale(),i=0;i<r.length;i++)r[i].path||r[i].createPathProxy(),r[i].path.setScale(n[0],n[1],r[i].segmentIgnoreThreshold)},t.prototype.buildPath=function(r,n){for(var i=n.paths||[],o=0;o<i.length;o++)i[o].buildPath(r,i[o].shape,!0)},t.prototype.afterBrush=function(){for(var r=this.shape.paths||[],n=0;n<r.length;n++)r[n].pathUpdated()},t.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Ne.prototype.getBoundingRect.call(this)},t}(Ne);const Yat=Xat;var Kat=function(){function e(t){this.colorStops=t||[]}return e.prototype.addColorStop=function(t,r){this.colorStops.push({offset:t,color:r})},e}();const Xz=Kat;var Zat=function(e){Ke(t,e);function t(r,n,i,o,a,s){var l=e.call(this,a)||this;return l.x=r==null?0:r,l.y=n==null?0:n,l.x2=i==null?1:i,l.y2=o==null?0:o,l.type="linear",l.global=s||!1,l}return t}(Xz);const EA=Zat;var qat=function(e){Ke(t,e);function t(r,n,i,o,a){var s=e.call(this,o)||this;return s.x=r==null?.5:r,s.y=n==null?.5:n,s.r=i==null?.5:i,s.type="radial",s.global=a||!1,s}return t}(Xz);const Jat=qat;var Au=[0,0],xu=[0,0],fm=new Qe,hm=new Qe,Qat=function(){function e(t,r){this._corners=[],this._axes=[],this._origin=[0,0];for(var n=0;n<4;n++)this._corners[n]=new Qe;for(var n=0;n<2;n++)this._axes[n]=new Qe;t&&this.fromBoundingRect(t,r)}return e.prototype.fromBoundingRect=function(t,r){var n=this._corners,i=this._axes,o=t.x,a=t.y,s=o+t.width,l=a+t.height;if(n[0].set(o,a),n[1].set(s,a),n[2].set(s,l),n[3].set(o,l),r)for(var u=0;u<4;u++)n[u].transform(r);Qe.sub(i[0],n[1],n[0]),Qe.sub(i[1],n[3],n[0]),i[0].normalize(),i[1].normalize();for(var u=0;u<2;u++)this._origin[u]=i[u].dot(n[0])},e.prototype.intersect=function(t,r){var n=!0,i=!r;return fm.set(1/0,1/0),hm.set(0,0),!this._intersectCheckOneSide(this,t,fm,hm,i,1)&&(n=!1,i)||!this._intersectCheckOneSide(t,this,fm,hm,i,-1)&&(n=!1,i)||i||Qe.copy(r,n?fm:hm),n},e.prototype._intersectCheckOneSide=function(t,r,n,i,o,a){for(var s=!0,l=0;l<2;l++){var u=this._axes[l];if(this._getProjMinMaxOnAxis(l,t._corners,Au),this._getProjMinMaxOnAxis(l,r._corners,xu),Au[1]<xu[0]||Au[0]>xu[1]){if(s=!1,o)return s;var c=Math.abs(xu[0]-Au[1]),f=Math.abs(Au[0]-xu[1]);Math.min(c,f)>i.len()&&(c<f?Qe.scale(i,u,-c*a):Qe.scale(i,u,f*a))}else if(n){var c=Math.abs(xu[0]-Au[1]),f=Math.abs(Au[0]-xu[1]);Math.min(c,f)<n.len()&&(c<f?Qe.scale(n,u,c*a):Qe.scale(n,u,-f*a))}}return s},e.prototype._getProjMinMaxOnAxis=function(t,r,n){for(var i=this._axes[t],o=this._origin,a=r[0].dot(i)+o[t],s=a,l=a,u=1;u<r.length;u++){var c=r[u].dot(i)+o[t];s=Math.min(c,s),l=Math.max(c,l)}n[0]=s,n[1]=l},e}();const y_=Qat;var tst=[],est=function(e){Ke(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.notClear=!0,r.incremental=!0,r._displayables=[],r._temporaryDisplayables=[],r._cursor=0,r}return t.prototype.traverse=function(r,n){r.call(n,this)},t.prototype.useStyle=function(){this.style={}},t.prototype.getCursor=function(){return this._cursor},t.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},t.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},t.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},t.prototype.addDisplayable=function(r,n){n?this._temporaryDisplayables.push(r):this._displayables.push(r),this.markRedraw()},t.prototype.addDisplayables=function(r,n){n=n||!1;for(var i=0;i<r.length;i++)this.addDisplayable(r[i],n)},t.prototype.getDisplayables=function(){return this._displayables},t.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},t.prototype.eachPendingDisplayable=function(r){for(var n=this._cursor;n<this._displayables.length;n++)r&&r(this._displayables[n]);for(var n=0;n<this._temporaryDisplayables.length;n++)r&&r(this._temporaryDisplayables[n])},t.prototype.update=function(){this.updateTransform();for(var r=this._cursor;r<this._displayables.length;r++){var n=this._displayables[r];n.parent=this,n.update(),n.parent=null}for(var r=0;r<this._temporaryDisplayables.length;r++){var n=this._temporaryDisplayables[r];n.parent=this,n.update(),n.parent=null}},t.prototype.getBoundingRect=function(){if(!this._rect){for(var r=new Le(1/0,1/0,-1/0,-1/0),n=0;n<this._displayables.length;n++){var i=this._displayables[n],o=i.getBoundingRect().clone();i.needLocalTransform()&&o.applyTransform(i.getLocalTransform(tst)),r.union(o)}this._rect=r}return this._rect},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect();if(o.contain(i[0],i[1]))for(var a=0;a<this._displayables.length;a++){var s=this._displayables[a];if(s.contain(r,n))return!0}return!1},t}(Wc);const rst=est;var nst=nr();function CA(e,t,r,n,i){var o;if(t&&t.ecModel){var a=t.ecModel.getUpdatePayload();o=a&&a.animation}var s=t&&t.isAnimationEnabled(),l=e==="update";if(s){var u=void 0,c=void 0,f=void 0;n?(u=_e(n.duration,200),c=_e(n.easing,"cubicOut"),f=0):(u=t.getShallow(l?"animationDurationUpdate":"animationDuration"),c=t.getShallow(l?"animationEasingUpdate":"animationEasing"),f=t.getShallow(l?"animationDelayUpdate":"animationDelay")),o&&(o.duration!=null&&(u=o.duration),o.easing!=null&&(c=o.easing),o.delay!=null&&(f=o.delay)),ue(f)&&(f=f(r,i)),ue(u)&&(u=u(r));var h={duration:u||0,delay:f,easing:c};return h}else return null}function AA(e,t,r,n,i,o,a){var s=!1,l;ue(i)?(a=o,o=i,i=null):Yt(i)&&(o=i.cb,a=i.during,s=i.isFrom,l=i.removeOpt,i=i.dataIndex);var u=e==="leave";u||t.stopAnimation("leave");var c=CA(e,n,i,u?l||{}:null,n&&n.getAnimationDelayParams?n.getAnimationDelayParams(t,i):null);if(c&&c.duration>0){var f=c.duration,h=c.delay,d=c.easing,p={duration:f,delay:h||0,easing:d,done:o,force:!!o||!!a,setToFinal:!u,scope:e,during:a};s?t.animateFrom(r,p):t.animateTo(r,p)}else t.stopAnimation(),!s&&t.attr(r),a&&a(1),o&&o()}function Jr(e,t,r,n,i,o){AA("update",e,t,r,n,i,o)}function Ma(e,t,r,n,i,o){AA("enter",e,t,r,n,i,o)}function zg(e){if(!e.__zr)return!0;for(var t=0;t<e.animators.length;t++){var r=e.animators[t];if(r.scope==="leave")return!0}return!1}function Ec(e,t,r,n,i,o){zg(e)||AA("leave",e,t,r,n,i,o)}function $6(e,t,r,n){e.removeTextContent(),e.removeTextGuideLine(),Ec(e,{style:{opacity:0}},t,r,n)}function vP(e,t,r){function n(){e.parent&&e.parent.remove(e)}e.isGroup?e.traverse(function(i){i.isGroup||$6(i,t,r,n)}):$6(e,t,r,n)}function Yz(e){nst(e).oldStyle=e.style}var __=Math.max,b_=Math.min,mP={};function ist(e){return Ne.extend(e)}var ost=Mat;function ast(e,t){return ost(e,t)}function Uo(e,t){mP[e]=t}function Kz(e){if(mP.hasOwnProperty(e))return mP[e]}function Vb(e,t,r,n){var i=xat(e,t);return r&&(n==="center"&&(r=qz(r,i.getBoundingRect())),Jz(i,r)),i}function Zz(e,t,r){var n=new As({style:{image:e,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(i){if(r==="center"){var o={width:i.width,height:i.height};n.setStyle(qz(t,o))}}});return n}function qz(e,t){var r=t.width/t.height,n=e.height*r,i;n<=e.width?i=e.height:(n=e.width,i=n/r);var o=e.x+e.width/2,a=e.y+e.height/2;return{x:o-n/2,y:a-i/2,width:n,height:i}}var sst=Iat;function Jz(e,t){if(!!e.applyTransform){var r=e.getBoundingRect(),n=r.calculateTransform(t);e.applyTransform(n)}}function pv(e,t){return mz(e,e,{lineWidth:t}),e}function lst(e){return yz(e.shape,e.shape,e.style),e}var ust=Qu;function yy(e,t){for(var r=sA([]);e&&e!==t;)Th(r,e.getLocalTransform(),r),e=e.parent;return r}function Ph(e,t,r){return t&&!In(t)&&(t=Ju.getLocalTransform(t)),r&&(t=Rb([],t)),Vn([],e,t)}function Qz(e,t,r){var n=t[4]===0||t[5]===0||t[0]===0?1:Math.abs(2*t[4]/t[0]),i=t[4]===0||t[5]===0||t[2]===0?1:Math.abs(2*t[4]/t[2]),o=[e==="left"?-n:e==="right"?n:0,e==="top"?-i:e==="bottom"?i:0];return o=Ph(o,t,r),Math.abs(o[0])>Math.abs(o[1])?o[0]>0?"right":"left":o[1]>0?"bottom":"top"}function B6(e){return!e.isGroup}function cst(e){return e.shape!=null}function tV(e,t,r){if(!e||!t)return;function n(a){var s={};return a.traverse(function(l){B6(l)&&l.anid&&(s[l.anid]=l)}),s}function i(a){var s={x:a.x,y:a.y,rotation:a.rotation};return cst(a)&&(s.shape=_t({},a.shape)),s}var o=n(e);t.traverse(function(a){if(B6(a)&&a.anid){var s=o[a.anid];if(s){var l=i(a);a.attr(i(s)),Jr(a,l,r,Me(a).dataIndex)}}})}function fst(e,t){return Bt(e,function(r){var n=r[0];n=__(n,t.x),n=b_(n,t.x+t.width);var i=r[1];return i=__(i,t.y),i=b_(i,t.y+t.height),[n,i]})}function hst(e,t){var r=__(e.x,t.x),n=b_(e.x+e.width,t.x+t.width),i=__(e.y,t.y),o=b_(e.y+e.height,t.y+t.height);if(n>=r&&o>=i)return{x:r,y:i,width:n-r,height:o-i}}function xA(e,t,r){var n=_t({rectHover:!0},t),i=n.style={strokeNoScale:!0};if(r=r||{x:-1,y:-1,width:2,height:2},e)return e.indexOf("image://")===0?(i.image=e.slice(8),Ee(i,r),new As(n)):Vb(e.replace("path://",""),n,r,"center")}function dst(e,t,r,n,i){for(var o=0,a=i[i.length-1];o<i.length;o++){var s=i[o];if(eV(e,t,r,n,s[0],s[1],a[0],a[1]))return!0;a=s}}function eV(e,t,r,n,i,o,a,s){var l=r-e,u=n-t,c=a-i,f=s-o,h=hS(c,f,l,u);if(pst(h))return!1;var d=e-i,p=t-o,g=hS(d,p,l,u)/h;if(g<0||g>1)return!1;var m=hS(d,p,c,f)/h;return!(m<0||m>1)}function hS(e,t,r,n){return e*n-r*t}function pst(e){return e<=1e-6&&e>=-1e-6}function MA(e){var t=e.itemTooltipOption,r=e.componentModel,n=e.itemName,i=$t(t)?{formatter:t}:t,o=r.mainType,a=r.componentIndex,s={componentType:o,name:n,$vars:["name"]};s[o+"Index"]=a;var l=e.formatterParamsExtra;l&&U(ze(l),function(c){Mt(s,c)||(s[c]=l[c],s.$vars.push(c))});var u=Me(e.el);u.componentMainType=o,u.componentIndex=a,u.tooltipConfig={name:n,option:Ee({content:n,formatterParams:s},i)}}function z6(e,t){var r;e.isGroup&&(r=t(e)),r||e.traverse(t)}function ld(e,t){if(e)if(St(e))for(var r=0;r<e.length;r++)z6(e[r],t);else z6(e,t)}Uo("circle",kA);Uo("ellipse",Dz);Uo("sector",r0);Uo("ring",Bz);Uo("polygon",dv);Uo("polyline",Wz);Uo("rect",Lr);Uo("line",Wl);Uo("bezierCurve",zb);Uo("arc",PA);const gst=Object.freeze(Object.defineProperty({__proto__:null,updateProps:Jr,initProps:Ma,removeElement:Ec,removeElementWithFadeOut:vP,isElementRemoved:zg,extendShape:ist,extendPath:ast,registerShape:Uo,getShapeClass:Kz,makePath:Vb,makeImage:Zz,mergePath:sst,resizePath:Jz,subPixelOptimizeLine:pv,subPixelOptimizeRect:lst,subPixelOptimize:ust,getTransform:yy,applyTransform:Ph,transformDirection:Qz,groupTransition:tV,clipPointsByRect:fst,clipRectByRect:hst,createIcon:xA,linePolygonIntersect:dst,lineLineIntersect:eV,setTooltipConfig:MA,traverseElements:ld,Group:ar,Image:As,Text:Or,Circle:kA,Ellipse:Dz,Sector:r0,Ring:Bz,Polygon:dv,Polyline:Wz,Rect:Lr,Line:Wl,BezierCurve:zb,Arc:PA,IncrementalDisplayable:rst,CompoundPath:Yat,LinearGradient:EA,RadialGradient:Jat,BoundingRect:Le,OrientedBoundingRect:y_,Point:Qe,Path:Ne},Symbol.toStringTag,{value:"Module"}));var Ub={};function vst(e,t){for(var r=0;r<to.length;r++){var n=to[r],i=t[n],o=e.ensureState(n);o.style=o.style||{},o.style.text=i}var a=e.currentStates.slice();e.clearStates(!0),e.setStyle({text:t.normal}),e.useStates(a,!0)}function V6(e,t,r){var n=e.labelFetcher,i=e.labelDataIndex,o=e.labelDimIndex,a=t.normal,s;n&&(s=n.getFormattedLabel(i,"normal",null,o,a&&a.get("formatter"),r!=null?{interpolatedValue:r}:null)),s==null&&(s=ue(e.defaultText)?e.defaultText(i,e,r):e.defaultText);for(var l={normal:s},u=0;u<to.length;u++){var c=to[u],f=t[c];l[c]=_e(n?n.getFormattedLabel(i,c,null,o,f&&f.get("formatter")):null,s)}return l}function ud(e,t,r,n){r=r||Ub;for(var i=e instanceof Or,o=!1,a=0;a<T6.length;a++){var s=t[T6[a]];if(s&&s.getShallow("show")){o=!0;break}}var l=i?e:e.getTextContent();if(o){i||(l||(l=new Or,e.setTextContent(l)),e.stateProxy&&(l.stateProxy=e.stateProxy));var u=V6(r,t),c=t.normal,f=!!c.getShallow("show"),h=ri(c,n&&n.normal,r,!1,!i);h.text=u.normal,i||e.setTextConfig(w_(c,r,!1));for(var a=0;a<to.length;a++){var d=to[a],s=t[d];if(s){var p=l.ensureState(d),g=!!_e(s.getShallow("show"),f);if(g!==f&&(p.ignore=!g),p.style=ri(s,n&&n[d],r,!0,!i),p.style.text=u[d],!i){var m=e.ensureState(d);m.textConfig=w_(s,r,!0)}}}l.silent=!!c.getShallow("silent"),l.style.x!=null&&(h.x=l.style.x),l.style.y!=null&&(h.y=l.style.y),l.ignore=!f,l.useStyle(h),l.dirty(),r.enableTextSetter&&(Wb(l).setLabelText=function(v){var y=V6(r,t,v);vst(l,y)})}else l&&(l.ignore=!0);e.dirty()}function jc(e,t){t=t||"label";for(var r={normal:e.getModel(t)},n=0;n<to.length;n++){var i=to[n];r[i]=e.getModel([i,t])}return r}function ri(e,t,r,n,i){var o={};return mst(o,e,r,n,i),t&&_t(o,t),o}function w_(e,t,r){t=t||{};var n={},i,o=e.getShallow("rotate"),a=_e(e.getShallow("distance"),r?null:5),s=e.getShallow("offset");return i=e.getShallow("position")||(r?null:"inside"),i==="outside"&&(i=t.defaultOutsidePosition||"top"),i!=null&&(n.position=i),s!=null&&(n.offset=s),o!=null&&(o*=Math.PI/180,n.rotation=o),a!=null&&(n.distance=a),n.outsideFill=e.get("color")==="inherit"?t.inheritColor||null:"auto",n}function mst(e,t,r,n,i){r=r||Ub;var o=t.ecModel,a=o&&o.option.textStyle,s=yst(t),l;if(s){l={};for(var u in s)if(s.hasOwnProperty(u)){var c=t.getModel(["rich",u]);G6(l[u]={},c,a,r,n,i,!1,!0)}}l&&(e.rich=l);var f=t.get("overflow");f&&(e.overflow=f);var h=t.get("minMargin");h!=null&&(e.margin=h),G6(e,t,a,r,n,i,!0,!1)}function yst(e){for(var t;e&&e!==e.ecModel;){var r=(e.option||Ub).rich;if(r){t=t||{};for(var n=ze(r),i=0;i<n.length;i++){var o=n[i];t[o]=1}}e=e.parentModel}return t}var U6=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],W6=["align","lineHeight","width","height","tag","verticalAlign"],j6=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function G6(e,t,r,n,i,o,a,s){r=!i&&r||Ub;var l=n&&n.inheritColor,u=t.getShallow("color"),c=t.getShallow("textBorderColor"),f=_e(t.getShallow("opacity"),r.opacity);(u==="inherit"||u==="auto")&&(l?u=l:u=null),(c==="inherit"||c==="auto")&&(l?c=l:c=null),o||(u=u||r.color,c=c||r.textBorderColor),u!=null&&(e.fill=u),c!=null&&(e.stroke=c);var h=_e(t.getShallow("textBorderWidth"),r.textBorderWidth);h!=null&&(e.lineWidth=h);var d=_e(t.getShallow("textBorderType"),r.textBorderType);d!=null&&(e.lineDash=d);var p=_e(t.getShallow("textBorderDashOffset"),r.textBorderDashOffset);p!=null&&(e.lineDashOffset=p),!i&&f==null&&!s&&(f=n&&n.defaultOpacity),f!=null&&(e.opacity=f),!i&&!o&&e.fill==null&&n.inheritColor&&(e.fill=n.inheritColor);for(var g=0;g<U6.length;g++){var m=U6[g],v=_e(t.getShallow(m),r[m]);v!=null&&(e[m]=v)}for(var g=0;g<W6.length;g++){var m=W6[g],v=t.getShallow(m);v!=null&&(e[m]=v)}if(e.verticalAlign==null){var y=t.getShallow("baseline");y!=null&&(e.verticalAlign=y)}if(!a||!n.disableBox){for(var g=0;g<j6.length;g++){var m=j6[g],v=t.getShallow(m);v!=null&&(e[m]=v)}var b=t.getShallow("borderType");b!=null&&(e.borderDash=b),(e.backgroundColor==="auto"||e.backgroundColor==="inherit")&&l&&(e.backgroundColor=l),(e.borderColor==="auto"||e.borderColor==="inherit")&&l&&(e.borderColor=l)}}function rV(e,t){var r=t&&t.getModel("textStyle");return ma([e.fontStyle||r&&r.getShallow("fontStyle")||"",e.fontWeight||r&&r.getShallow("fontWeight")||"",(e.fontSize||r&&r.getShallow("fontSize")||12)+"px",e.fontFamily||r&&r.getShallow("fontFamily")||"sans-serif"].join(" "))}var Wb=nr();function _st(e,t,r,n){if(!!e){var i=Wb(e);i.prevValue=i.value,i.value=r;var o=t.normal;i.valueAnimation=o.get("valueAnimation"),i.valueAnimation&&(i.precision=o.get("precision"),i.defaultInterpolatedText=n,i.statesModels=t)}}var bst=["textStyle","color"],dS=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],pS=new Or,wst=function(){function e(){}return e.prototype.getTextColor=function(t){var r=this.ecModel;return this.getShallow("color")||(!t&&r?r.get(bst):null)},e.prototype.getFont=function(){return rV({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},e.prototype.getTextRect=function(t){for(var r={text:t,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},n=0;n<dS.length;n++)r[dS[n]]=this.getShallow(dS[n]);return pS.useStyle(r),pS.update(),pS.getBoundingRect()},e}();const Sst=wst;var nV=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],Tst=uv(nV),kst=function(){function e(){}return e.prototype.getLineStyle=function(t){return Tst(this,t)},e}(),iV=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],Pst=uv(iV),Est=function(){function e(){}return e.prototype.getItemStyle=function(t,r){return Pst(this,t,r)},e}(),Gc=function(){function e(t,r,n){this.parentModel=r,this.ecModel=n,this.option=t}return e.prototype.init=function(t,r,n){},e.prototype.mergeOption=function(t,r){Ie(this.option,t,!0)},e.prototype.get=function(t,r){return t==null?this.option:this._doGet(this.parsePath(t),!r&&this.parentModel)},e.prototype.getShallow=function(t,r){var n=this.option,i=n==null?n:n[t];if(i==null&&!r){var o=this.parentModel;o&&(i=o.getShallow(t))}return i},e.prototype.getModel=function(t,r){var n=t!=null,i=n?this.parsePath(t):null,o=n?this._doGet(i):this.option;return r=r||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(i)),new e(o,r,this.ecModel)},e.prototype.isEmpty=function(){return this.option==null},e.prototype.restoreData=function(){},e.prototype.clone=function(){var t=this.constructor;return new t(oe(this.option))},e.prototype.parsePath=function(t){return typeof t=="string"?t.split("."):t},e.prototype.resolveParentPath=function(t){return t},e.prototype.isAnimationEnabled=function(){if(!me.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},e.prototype._doGet=function(t,r){var n=this.option;if(!t)return n;for(var i=0;i<t.length&&!(!!t[i]&&(n=n&&typeof n=="object"?n[t[i]]:null,n==null));i++);return n==null&&r&&(n=r._doGet(this.resolveParentPath(t),r.parentModel)),n},e}();vA(Gc);sot(Gc);zo(Gc,kst);zo(Gc,Est);zo(Gc,hot);zo(Gc,Sst);const cn=Gc;var Cst=Math.round(Math.random()*10);function jb(e){return[e||"",Cst++].join("_")}function Ast(e){var t={};e.registerSubTypeDefaulter=function(r,n){var i=_a(r);t[i.main]=n},e.determineSubType=function(r,n){var i=n.type;if(!i){var o=_a(r).main;e.hasSubTypes(r)&&t[o]&&(i=t[o](n))}return i}}function xst(e,t){e.topologicalTravel=function(o,a,s,l){if(!o.length)return;var u=r(a),c=u.graph,f=u.noEntryList,h={};for(U(o,function(y){h[y]=!0});f.length;){var d=f.pop(),p=c[d],g=!!h[d];g&&(s.call(l,d,p.originalDeps.slice()),delete h[d]),U(p.successor,g?v:m)}U(h,function(){var y="";throw new Error(y)});function m(y){c[y].entryCount--,c[y].entryCount===0&&f.push(y)}function v(y){h[y]=!0,m(y)}};function r(o){var a={},s=[];return U(o,function(l){var u=n(a,l),c=u.originalDeps=t(l),f=i(c,o);u.entryCount=f.length,u.entryCount===0&&s.push(l),U(f,function(h){De(u.predecessor,h)<0&&u.predecessor.push(h);var d=n(a,h);De(d.successor,h)<0&&d.successor.push(l)})}),{graph:a,noEntryList:s}}function n(o,a){return o[a]||(o[a]={predecessor:[],successor:[]}),o[a]}function i(o,a){var s=[];return U(o,function(l){De(a,l)>=0&&s.push(l)}),s}}function Gb(e,t){return Ie(Ie({},e,!0),t,!0)}const Mst={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},Ist={time:{month:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"],monthAbbr:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],dayOfWeek:["\u661F\u671F\u65E5","\u661F\u671F\u4E00","\u661F\u671F\u4E8C","\u661F\u671F\u4E09","\u661F\u671F\u56DB","\u661F\u671F\u4E94","\u661F\u671F\u516D"],dayOfWeekAbbr:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"]},legend:{selector:{all:"\u5168\u9009",inverse:"\u53CD\u9009"}},toolbox:{brush:{title:{rect:"\u77E9\u5F62\u9009\u62E9",polygon:"\u5708\u9009",lineX:"\u6A2A\u5411\u9009\u62E9",lineY:"\u7EB5\u5411\u9009\u62E9",keep:"\u4FDD\u6301\u9009\u62E9",clear:"\u6E05\u9664\u9009\u62E9"}},dataView:{title:"\u6570\u636E\u89C6\u56FE",lang:["\u6570\u636E\u89C6\u56FE","\u5173\u95ED","\u5237\u65B0"]},dataZoom:{title:{zoom:"\u533A\u57DF\u7F29\u653E",back:"\u533A\u57DF\u7F29\u653E\u8FD8\u539F"}},magicType:{title:{line:"\u5207\u6362\u4E3A\u6298\u7EBF\u56FE",bar:"\u5207\u6362\u4E3A\u67F1\u72B6\u56FE",stack:"\u5207\u6362\u4E3A\u5806\u53E0",tiled:"\u5207\u6362\u4E3A\u5E73\u94FA"}},restore:{title:"\u8FD8\u539F"},saveAsImage:{title:"\u4FDD\u5B58\u4E3A\u56FE\u7247",lang:["\u53F3\u952E\u53E6\u5B58\u4E3A\u56FE\u7247"]}},series:{typeNames:{pie:"\u997C\u56FE",bar:"\u67F1\u72B6\u56FE",line:"\u6298\u7EBF\u56FE",scatter:"\u6563\u70B9\u56FE",effectScatter:"\u6D9F\u6F2A\u6563\u70B9\u56FE",radar:"\u96F7\u8FBE\u56FE",tree:"\u6811\u56FE",treemap:"\u77E9\u5F62\u6811\u56FE",boxplot:"\u7BB1\u578B\u56FE",candlestick:"K\u7EBF\u56FE",k:"K\u7EBF\u56FE",heatmap:"\u70ED\u529B\u56FE",map:"\u5730\u56FE",parallel:"\u5E73\u884C\u5750\u6807\u56FE",lines:"\u7EBF\u56FE",graph:"\u5173\u7CFB\u56FE",sankey:"\u6851\u57FA\u56FE",funnel:"\u6F0F\u6597\u56FE",gauge:"\u4EEA\u8868\u76D8\u56FE",pictorialBar:"\u8C61\u5F62\u67F1\u56FE",themeRiver:"\u4E3B\u9898\u6CB3\u6D41\u56FE",sunburst:"\u65ED\u65E5\u56FE"}},aria:{general:{withTitle:"\u8FD9\u662F\u4E00\u4E2A\u5173\u4E8E\u201C{title}\u201D\u7684\u56FE\u8868\u3002",withoutTitle:"\u8FD9\u662F\u4E00\u4E2A\u56FE\u8868\uFF0C"},series:{single:{prefix:"",withName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\uFF0C\u8868\u793A{seriesName}\u3002",withoutName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\u3002"},multiple:{prefix:"\u5B83\u7531{seriesCount}\u4E2A\u56FE\u8868\u7CFB\u5217\u7EC4\u6210\u3002",withName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A\u8868\u793A{seriesName}\u7684{seriesType}\uFF0C",withoutName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A{seriesType}\uFF0C",separator:{middle:"\uFF1B",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636E\u662F\u2014\u2014",partialData:"\u5176\u4E2D\uFF0C\u524D{displayCnt}\u9879\u662F\u2014\u2014",withName:"{name}\u7684\u6570\u636E\u662F{value}",withoutName:"{value}",separator:{middle:"\uFF0C",end:""}}}};var S_="ZH",IA="EN",gv=IA,_y={},LA={},oV=me.domSupported?function(){var e=(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase();return e.indexOf(S_)>-1?S_:gv}():gv;function aV(e,t){e=e.toUpperCase(),LA[e]=new cn(t),_y[e]=t}function Lst(e){if($t(e)){var t=_y[e.toUpperCase()]||{};return e===S_||e===IA?oe(t):Ie(oe(t),oe(_y[gv]),!1)}else return Ie(oe(e),oe(_y[gv]),!1)}function Ost(e){return LA[e]}function Rst(){return LA[gv]}aV(IA,Mst);aV(S_,Ist);var OA=1e3,RA=OA*60,Vg=RA*60,Hi=Vg*24,H6=Hi*365,eg={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},dm="{yyyy}-{MM}-{dd}",X6={year:"{yyyy}",month:"{yyyy}-{MM}",day:dm,hour:dm+" "+eg.hour,minute:dm+" "+eg.minute,second:dm+" "+eg.second,millisecond:eg.none},gS=["year","month","day","hour","minute","second","millisecond"],sV=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function Mu(e,t){return e+="","0000".substr(0,t-e.length)+e}function Eh(e){switch(e){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return e}}function Dst(e){return e===Eh(e)}function Nst(e){switch(e){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function Hb(e,t,r,n){var i=_s(e),o=i[DA(r)](),a=i[Ch(r)]()+1,s=Math.floor((a-1)/3)+1,l=i[Xb(r)](),u=i["get"+(r?"UTC":"")+"Day"](),c=i[vv(r)](),f=(c-1)%12+1,h=i[Yb(r)](),d=i[Kb(r)](),p=i[Zb(r)](),g=n instanceof cn?n:Ost(n||oV)||Rst(),m=g.getModel("time"),v=m.get("month"),y=m.get("monthAbbr"),b=m.get("dayOfWeek"),w=m.get("dayOfWeekAbbr");return(t||"").replace(/{yyyy}/g,o+"").replace(/{yy}/g,o%100+"").replace(/{Q}/g,s+"").replace(/{MMMM}/g,v[a-1]).replace(/{MMM}/g,y[a-1]).replace(/{MM}/g,Mu(a,2)).replace(/{M}/g,a+"").replace(/{dd}/g,Mu(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,b[u]).replace(/{ee}/g,w[u]).replace(/{e}/g,u+"").replace(/{HH}/g,Mu(c,2)).replace(/{H}/g,c+"").replace(/{hh}/g,Mu(f+"",2)).replace(/{h}/g,f+"").replace(/{mm}/g,Mu(h,2)).replace(/{m}/g,h+"").replace(/{ss}/g,Mu(d,2)).replace(/{s}/g,d+"").replace(/{SSS}/g,Mu(p,3)).replace(/{S}/g,p+"")}function Fst(e,t,r,n,i){var o=null;if($t(r))o=r;else if(ue(r))o=r(e.value,t,{level:e.level});else{var a=_t({},eg);if(e.level>0)for(var s=0;s<gS.length;++s)a[gS[s]]="{primary|"+a[gS[s]]+"}";var l=r?r.inherit===!1?r:Ee(r,a):a,u=lV(e.value,i);if(l[u])o=l[u];else if(l.inherit){for(var c=sV.indexOf(u),s=c-1;s>=0;--s)if(l[u]){o=l[u];break}o=o||a.none}if(St(o)){var f=e.level==null?0:e.level>=0?e.level:o.length+e.level;f=Math.min(f,o.length-1),o=o[f]}}return Hb(new Date(e.value),o,i,n)}function lV(e,t){var r=_s(e),n=r[Ch(t)]()+1,i=r[Xb(t)](),o=r[vv(t)](),a=r[Yb(t)](),s=r[Kb(t)](),l=r[Zb(t)](),u=l===0,c=u&&s===0,f=c&&a===0,h=f&&o===0,d=h&&i===1,p=d&&n===1;return p?"year":d?"month":h?"day":f?"hour":c?"minute":u?"second":"millisecond"}function Y6(e,t,r){var n=He(e)?_s(e):e;switch(t=t||lV(e,r),t){case"year":return n[DA(r)]();case"half-year":return n[Ch(r)]()>=6?1:0;case"quarter":return Math.floor((n[Ch(r)]()+1)/4);case"month":return n[Ch(r)]();case"day":return n[Xb(r)]();case"half-day":return n[vv(r)]()/24;case"hour":return n[vv(r)]();case"minute":return n[Yb(r)]();case"second":return n[Kb(r)]();case"millisecond":return n[Zb(r)]()}}function DA(e){return e?"getUTCFullYear":"getFullYear"}function Ch(e){return e?"getUTCMonth":"getMonth"}function Xb(e){return e?"getUTCDate":"getDate"}function vv(e){return e?"getUTCHours":"getHours"}function Yb(e){return e?"getUTCMinutes":"getMinutes"}function Kb(e){return e?"getUTCSeconds":"getSeconds"}function Zb(e){return e?"getUTCMilliseconds":"getMilliseconds"}function $st(e){return e?"setUTCFullYear":"setFullYear"}function uV(e){return e?"setUTCMonth":"setMonth"}function cV(e){return e?"setUTCDate":"setDate"}function fV(e){return e?"setUTCHours":"setHours"}function hV(e){return e?"setUTCMinutes":"setMinutes"}function dV(e){return e?"setUTCSeconds":"setSeconds"}function pV(e){return e?"setUTCMilliseconds":"setMilliseconds"}function gV(e){if(!Bit(e))return $t(e)?e:"-";var t=(e+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function vV(e,t){return e=(e||"").toLowerCase().replace(/-(.)/g,function(r,n){return n.toUpperCase()}),t&&e&&(e=e.charAt(0).toUpperCase()+e.slice(1)),e}var n0=EB;function yP(e,t,r){var n="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function i(c){return c&&ma(c)?c:"-"}function o(c){return!!(c!=null&&!isNaN(c)&&isFinite(c))}var a=t==="time",s=e instanceof Date;if(a||s){var l=a?_s(e):e;if(isNaN(+l)){if(s)return"-"}else return Hb(l,n,r)}if(t==="ordinal")return Bk(e)?i(e):He(e)&&o(e)?e+"":"-";var u=Ul(e);return o(u)?gV(u):Bk(e)?i(e):typeof e=="boolean"?e+"":"-"}var K6=["a","b","c","d","e","f","g"],vS=function(e,t){return"{"+e+(t==null?"":t)+"}"};function mV(e,t,r){St(t)||(t=[t]);var n=t.length;if(!n)return"";for(var i=t[0].$vars||[],o=0;o<i.length;o++){var a=K6[o];e=e.replace(vS(a),vS(a,0))}for(var s=0;s<n;s++)for(var l=0;l<i.length;l++){var u=t[s][i[l]];e=e.replace(vS(K6[l],s),r?Wi(u):u)}return e}function Bst(e,t){var r=$t(e)?{color:e,extraCssText:t}:e||{},n=r.color,i=r.type;t=r.extraCssText;var o=r.renderMode||"html";if(!n)return"";if(o==="html")return i==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Wi(n)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+Wi(n)+";"+(t||"")+'"></span>';var a=r.markerId||"markerX";return{renderMode:o,content:"{"+a+"|}  ",style:i==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:n}:{width:10,height:10,borderRadius:5,backgroundColor:n}}}function Cc(e,t){return t=t||"transparent",$t(e)?e:Yt(e)&&e.colorStops&&(e.colorStops[0]||{}).color||t}function Z6(e,t){if(t==="_blank"||t==="blank"){var r=window.open();r.opener=null,r.location.href=e}else window.open(e,t)}var by=U,zst=["left","right","top","bottom","width","height"],pm=[["width","left","right"],["height","top","bottom"]];function NA(e,t,r,n,i){var o=0,a=0;n==null&&(n=1/0),i==null&&(i=1/0);var s=0;t.eachChild(function(l,u){var c=l.getBoundingRect(),f=t.childAt(u+1),h=f&&f.getBoundingRect(),d,p;if(e==="horizontal"){var g=c.width+(h?-h.x+c.x:0);d=o+g,d>n||l.newline?(o=0,d=g,a+=s+r,s=c.height):s=Math.max(s,c.height)}else{var m=c.height+(h?-h.y+c.y:0);p=a+m,p>i||l.newline?(o+=s+r,a=0,p=m,s=c.width):s=Math.max(s,c.width)}l.newline||(l.x=o,l.y=a,l.markRedraw(),e==="horizontal"?o=d+r:a=p+r)})}var Ah=NA;We(NA,"vertical");We(NA,"horizontal");function jl(e,t,r){r=n0(r||0);var n=t.width,i=t.height,o=Er(e.left,n),a=Er(e.top,i),s=Er(e.right,n),l=Er(e.bottom,i),u=Er(e.width,n),c=Er(e.height,i),f=r[2]+r[0],h=r[1]+r[3],d=e.aspect;switch(isNaN(u)&&(u=n-s-h-o),isNaN(c)&&(c=i-l-f-a),d!=null&&(isNaN(u)&&isNaN(c)&&(d>n/i?u=n*.8:c=i*.8),isNaN(u)&&(u=d*c),isNaN(c)&&(c=u/d)),isNaN(o)&&(o=n-s-u-h),isNaN(a)&&(a=i-l-c-f),e.left||e.right){case"center":o=n/2-u/2-r[3];break;case"right":o=n-u-h;break}switch(e.top||e.bottom){case"middle":case"center":a=i/2-c/2-r[0];break;case"bottom":a=i-c-f;break}o=o||0,a=a||0,isNaN(u)&&(u=n-h-o-(s||0)),isNaN(c)&&(c=i-f-a-(l||0));var p=new Le(o+r[3],a+r[0],u,c);return p.margin=r,p}function Vst(e,t,r,n,i,o){var a=!i||!i.hv||i.hv[0],s=!i||!i.hv||i.hv[1],l=i&&i.boundingMode||"all";if(o=o||e,o.x=e.x,o.y=e.y,!a&&!s)return!1;var u;if(l==="raw")u=e.type==="group"?new Le(0,0,+t.width||0,+t.height||0):e.getBoundingRect();else if(u=e.getBoundingRect(),e.needLocalTransform()){var c=e.getLocalTransform();u=u.clone(),u.applyTransform(c)}var f=jl(Ee({width:u.width,height:u.height},t),r,n),h=a?f.x-u.x:0,d=s?f.y-u.y:0;return l==="raw"?(o.x=h,o.y=d):(o.x+=h,o.y+=d),o===e&&e.markRedraw(),!0}function mv(e){var t=e.layoutMode||e.constructor.layoutMode;return Yt(t)?t:t?{type:t}:null}function Gh(e,t,r){var n=r&&r.ignoreSize;!St(n)&&(n=[n,n]);var i=a(pm[0],0),o=a(pm[1],1);u(pm[0],e,i),u(pm[1],e,o);function a(c,f){var h={},d=0,p={},g=0,m=2;if(by(c,function(b){p[b]=e[b]}),by(c,function(b){s(t,b)&&(h[b]=p[b]=t[b]),l(h,b)&&d++,l(p,b)&&g++}),n[f])return l(t,c[1])?p[c[2]]=null:l(t,c[2])&&(p[c[1]]=null),p;if(g===m||!d)return p;if(d>=m)return h;for(var v=0;v<c.length;v++){var y=c[v];if(!s(h,y)&&s(e,y)){h[y]=e[y];break}}return h}function s(c,f){return c.hasOwnProperty(f)}function l(c,f){return c[f]!=null&&c[f]!=="auto"}function u(c,f,h){by(c,function(d){f[d]=h[d]})}}function qb(e){return Ust({},e)}function Ust(e,t){return t&&e&&by(zst,function(r){t.hasOwnProperty(r)&&(e[r]=t[r])}),e}var Wst=nr(),cd=function(e){Ot(t,e);function t(r,n,i){var o=e.call(this,r,n,i)||this;return o.uid=jb("ec_cpt_model"),o}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i)},t.prototype.mergeDefaultAndTheme=function(r,n){var i=mv(this),o=i?qb(r):{},a=n.getTheme();Ie(r,a.get(this.mainType)),Ie(r,this.getDefaultOption()),i&&Gh(r,o,i)},t.prototype.mergeOption=function(r,n){Ie(this.option,r,!0);var i=mv(this);i&&Gh(this.option,r,i)},t.prototype.optionUpdated=function(r,n){},t.prototype.getDefaultOption=function(){var r=this.constructor;if(!iot(r))return r.defaultOption;var n=Wst(this);if(!n.defaultOption){for(var i=[],o=r;o;){var a=o.prototype.defaultOption;a&&i.push(a),o=o.superClass}for(var s={},l=i.length-1;l>=0;l--)s=Ie(s,i[l],!0);n.defaultOption=s}return n.defaultOption},t.prototype.getReferringComponents=function(r,n){var i=r+"Index",o=r+"Id";return t0(this.ecModel,r,{index:this.get(i,!0),id:this.get(o,!0)},n)},t.prototype.getBoxLayoutParams=function(){var r=this;return{left:r.get("left"),top:r.get("top"),right:r.get("right"),bottom:r.get("bottom"),width:r.get("width"),height:r.get("height")}},t.prototype.getZLevelKey=function(){return""},t.prototype.setZLevel=function(r){this.option.zlevel=r},t.protoInitialize=function(){var r=t.prototype;r.type="component",r.id="",r.name="",r.mainType="",r.subType="",r.componentIndex=0}(),t}(cn);lz(cd,cn);Db(cd);Ast(cd);xst(cd,jst);function jst(e){var t=[];return U(cd.getClassesByMainType(e),function(r){t=t.concat(r.dependencies||r.prototype.dependencies||[])}),t=Bt(t,function(r){return _a(r).main}),e!=="dataset"&&De(t,"dataset")<=0&&t.unshift("dataset"),t}const qe=cd;var yV="";typeof navigator<"u"&&(yV=navigator.platform||"");var Cf="rgba(0, 0, 0, 0.2)";const Gst={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:Cf,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:Cf,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:Cf,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:Cf,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:Cf,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:Cf,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:yV.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var _V=he(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),io="original",Un="arrayRows",Wo="objectRows",Ms="keyedColumns",Ll="typedArray",bV="unknown",Pa="column",fd="row",hi={Must:1,Might:2,Not:3},wV=nr();function Hst(e){wV(e).datasetMap=he()}function Xst(e,t,r){var n={},i=SV(t);if(!i||!e)return n;var o=[],a=[],s=t.ecModel,l=wV(s).datasetMap,u=i.uid+"_"+r.seriesLayoutBy,c,f;e=e.slice(),U(e,function(g,m){var v=Yt(g)?g:e[m]={name:g};v.type==="ordinal"&&c==null&&(c=m,f=p(v)),n[v.name]=[]});var h=l.get(u)||l.set(u,{categoryWayDim:f,valueWayDim:0});U(e,function(g,m){var v=g.name,y=p(g);if(c==null){var b=h.valueWayDim;d(n[v],b,y),d(a,b,y),h.valueWayDim+=y}else if(c===m)d(n[v],0,y),d(o,0,y);else{var b=h.categoryWayDim;d(n[v],b,y),d(a,b,y),h.categoryWayDim+=y}});function d(g,m,v){for(var y=0;y<v;y++)g.push(m+y)}function p(g){var m=g.dimsDef;return m?m.length:1}return o.length&&(n.itemName=o),a.length&&(n.seriesName=a),n}function SV(e){var t=e.get("data",!0);if(!t)return t0(e.ecModel,"dataset",{index:e.get("datasetIndex",!0),id:e.get("datasetId",!0)},Eo).models[0]}function Yst(e){return!e.get("transform",!0)&&!e.get("fromTransformResult",!0)?[]:t0(e.ecModel,"dataset",{index:e.get("fromDatasetIndex",!0),id:e.get("fromDatasetId",!0)},Eo).models}function TV(e,t){return Kst(e.data,e.sourceFormat,e.seriesLayoutBy,e.dimensionsDefine,e.startIndex,t)}function Kst(e,t,r,n,i,o){var a,s=5;if(ki(e))return hi.Not;var l,u;if(n){var c=n[o];Yt(c)?(l=c.name,u=c.type):$t(c)&&(l=c)}if(u!=null)return u==="ordinal"?hi.Must:hi.Not;if(t===Un){var f=e;if(r===fd){for(var h=f[o],d=0;d<(h||[]).length&&d<s;d++)if((a=w(h[i+d]))!=null)return a}else for(var d=0;d<f.length&&d<s;d++){var p=f[i+d];if(p&&(a=w(p[o]))!=null)return a}}else if(t===Wo){var g=e;if(!l)return hi.Not;for(var d=0;d<g.length&&d<s;d++){var m=g[d];if(m&&(a=w(m[l]))!=null)return a}}else if(t===Ms){var v=e;if(!l)return hi.Not;var h=v[l];if(!h||ki(h))return hi.Not;for(var d=0;d<h.length&&d<s;d++)if((a=w(h[d]))!=null)return a}else if(t===io)for(var y=e,d=0;d<y.length&&d<s;d++){var m=y[d],b=Qv(m);if(!St(b))return hi.Not;if((a=w(b[o]))!=null)return a}function w(T){var S=$t(T);if(T!=null&&isFinite(T)&&T!=="")return S?hi.Might:hi.Not;if(S&&T!=="-")return hi.Must}return hi.Not}var Zst=he();function qst(e,t,r){var n=Zst.get(t);if(!n)return r;var i=n(e);return i?r.concat(i):r}var q6=nr();nr();var FA=function(){function e(){}return e.prototype.getColorFromPalette=function(t,r,n){var i=Ir(this.get("color",!0)),o=this.get("colorLayer",!0);return Qst(this,q6,i,o,t,r,n)},e.prototype.clearColorPalette=function(){tlt(this,q6)},e}();function Jst(e,t){for(var r=e.length,n=0;n<r;n++)if(e[n].length>t)return e[n];return e[r-1]}function Qst(e,t,r,n,i,o,a){o=o||e;var s=t(o),l=s.paletteIdx||0,u=s.paletteNameMap=s.paletteNameMap||{};if(u.hasOwnProperty(i))return u[i];var c=a==null||!n?r:Jst(n,a);if(c=c||r,!(!c||!c.length)){var f=c[l];return i&&(u[i]=f),s.paletteIdx=(l+1)%c.length,f}}function tlt(e,t){t(e).paletteIdx=0,t(e).paletteNameMap={}}var gm,ep,J6,Q6="\0_ec_inner",elt=1,kV=function(e){Ot(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(r,n,i,o,a,s){o=o||{},this.option=null,this._theme=new cn(o),this._locale=new cn(a),this._optionManager=s},t.prototype.setOption=function(r,n,i){var o=r5(n);this._optionManager.setOption(r,i,o),this._resetOption(null,o)},t.prototype.resetOption=function(r,n){return this._resetOption(r,r5(n))},t.prototype._resetOption=function(r,n){var i=!1,o=this._optionManager;if(!r||r==="recreate"){var a=o.mountOption(r==="recreate");!this.option||r==="recreate"?J6(this,a):(this.restoreData(),this._mergeOption(a,n)),i=!0}if((r==="timeline"||r==="media")&&this.restoreData(),!r||r==="recreate"||r==="timeline"){var s=o.getTimelineOption(this);s&&(i=!0,this._mergeOption(s,n))}if(!r||r==="recreate"||r==="media"){var l=o.getMediaOption(this);l.length&&U(l,function(u){i=!0,this._mergeOption(u,n)},this)}return i},t.prototype.mergeOption=function(r){this._mergeOption(r,null)},t.prototype._mergeOption=function(r,n){var i=this.option,o=this._componentsMap,a=this._componentsCount,s=[],l=he(),u=n&&n.replaceMergeMainTypeMap;Hst(this),U(r,function(f,h){f!=null&&(qe.hasClass(h)?h&&(s.push(h),l.set(h,!0)):i[h]=i[h]==null?oe(f):Ie(i[h],f,!0))}),u&&u.each(function(f,h){qe.hasClass(h)&&!l.get(h)&&(s.push(h),l.set(h,!0))}),qe.topologicalTravel(s,qe.getAllClassMainTypes(),c,this);function c(f){var h=qst(this,f,Ir(r[f])),d=o.get(f),p=d?u&&u.get(f)?"replaceMerge":"normalMerge":"replaceAll",g=Uit(d,h,p);Kit(g,f,qe),i[f]=null,o.set(f,null),a.set(f,0);var m=[],v=[],y=0,b;U(g,function(w,T){var S=w.existing,k=w.newOption;if(!k)S&&(S.mergeOption({},this),S.optionUpdated({},!1));else{var E=f==="series",P=qe.getClass(f,w.keyInfo.subType,!E);if(!P)return;if(f==="tooltip"){if(b)return;b=!0}if(S&&S.constructor===P)S.name=w.keyInfo.name,S.mergeOption(k,this),S.optionUpdated(k,!1);else{var C=_t({componentIndex:T},w.keyInfo);S=new P(k,this,this,C),_t(S,C),w.brandNew&&(S.__requireNewView=!0),S.init(k,this,this),S.optionUpdated(null,!0)}}S?(m.push(S.option),v.push(S),y++):(m.push(void 0),v.push(void 0))},this),i[f]=m,o.set(f,v),a.set(f,y),f==="series"&&gm(this)}this._seriesIndices||gm(this)},t.prototype.getOption=function(){var r=oe(this.option);return U(r,function(n,i){if(qe.hasClass(i)){for(var o=Ir(n),a=o.length,s=!1,l=a-1;l>=0;l--)o[l]&&!lv(o[l])?s=!0:(o[l]=null,!s&&a--);o.length=a,r[i]=o}}),delete r[Q6],r},t.prototype.getTheme=function(){return this._theme},t.prototype.getLocaleModel=function(){return this._locale},t.prototype.setUpdatePayload=function(r){this._payload=r},t.prototype.getUpdatePayload=function(){return this._payload},t.prototype.getComponent=function(r,n){var i=this._componentsMap.get(r);if(i){var o=i[n||0];if(o)return o;if(n==null){for(var a=0;a<i.length;a++)if(i[a])return i[a]}}},t.prototype.queryComponents=function(r){var n=r.mainType;if(!n)return[];var i=r.index,o=r.id,a=r.name,s=this._componentsMap.get(n);if(!s||!s.length)return[];var l;return i!=null?(l=[],U(Ir(i),function(u){s[u]&&l.push(s[u])})):o!=null?l=t5("id",o,s):a!=null?l=t5("name",a,s):l=ln(s,function(u){return!!u}),e5(l,r)},t.prototype.findComponents=function(r){var n=r.query,i=r.mainType,o=s(n),a=o?this.queryComponents(o):ln(this._componentsMap.get(i),function(u){return!!u});return l(e5(a,r));function s(u){var c=i+"Index",f=i+"Id",h=i+"Name";return u&&(u[c]!=null||u[f]!=null||u[h]!=null)?{mainType:i,index:u[c],id:u[f],name:u[h]}:null}function l(u){return r.filter?ln(u,r.filter):u}},t.prototype.eachComponent=function(r,n,i){var o=this._componentsMap;if(ue(r)){var a=n,s=r;o.each(function(f,h){for(var d=0;f&&d<f.length;d++){var p=f[d];p&&s.call(a,h,p,p.componentIndex)}})}else for(var l=$t(r)?o.get(r):Yt(r)?this.findComponents(r):null,u=0;l&&u<l.length;u++){var c=l[u];c&&n.call(i,c,c.componentIndex)}},t.prototype.getSeriesByName=function(r){var n=Ki(r,null);return ln(this._componentsMap.get("series"),function(i){return!!i&&n!=null&&i.name===n})},t.prototype.getSeriesByIndex=function(r){return this._componentsMap.get("series")[r]},t.prototype.getSeriesByType=function(r){return ln(this._componentsMap.get("series"),function(n){return!!n&&n.subType===r})},t.prototype.getSeries=function(){return ln(this._componentsMap.get("series"),function(r){return!!r})},t.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},t.prototype.eachSeries=function(r,n){ep(this),U(this._seriesIndices,function(i){var o=this._componentsMap.get("series")[i];r.call(n,o,i)},this)},t.prototype.eachRawSeries=function(r,n){U(this._componentsMap.get("series"),function(i){i&&r.call(n,i,i.componentIndex)})},t.prototype.eachSeriesByType=function(r,n,i){ep(this),U(this._seriesIndices,function(o){var a=this._componentsMap.get("series")[o];a.subType===r&&n.call(i,a,o)},this)},t.prototype.eachRawSeriesByType=function(r,n,i){return U(this.getSeriesByType(r),n,i)},t.prototype.isSeriesFiltered=function(r){return ep(this),this._seriesIndicesMap.get(r.componentIndex)==null},t.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},t.prototype.filterSeries=function(r,n){ep(this);var i=[];U(this._seriesIndices,function(o){var a=this._componentsMap.get("series")[o];r.call(n,a,o)&&i.push(o)},this),this._seriesIndices=i,this._seriesIndicesMap=he(i)},t.prototype.restoreData=function(r){gm(this);var n=this._componentsMap,i=[];n.each(function(o,a){qe.hasClass(a)&&i.push(a)}),qe.topologicalTravel(i,qe.getAllClassMainTypes(),function(o){U(n.get(o),function(a){a&&(o!=="series"||!rlt(a,r))&&a.restoreData()})})},t.internalField=function(){gm=function(r){var n=r._seriesIndices=[];U(r._componentsMap.get("series"),function(i){i&&n.push(i.componentIndex)}),r._seriesIndicesMap=he(n)},ep=function(r){},J6=function(r,n){r.option={},r.option[Q6]=elt,r._componentsMap=he({series:[]}),r._componentsCount=he();var i=n.aria;Yt(i)&&i.enabled==null&&(i.enabled=!0),nlt(n,r._theme.option),Ie(n,Gst,!1),r._mergeOption(n,null)}}(),t}(cn);function rlt(e,t){if(t){var r=t.seriesIndex,n=t.seriesId,i=t.seriesName;return r!=null&&e.componentIndex!==r||n!=null&&e.id!==n||i!=null&&e.name!==i}}function nlt(e,t){var r=e.color&&!e.colorLayer;U(t,function(n,i){i==="colorLayer"&&r||qe.hasClass(i)||(typeof n=="object"?e[i]=e[i]?Ie(e[i],n,!1):oe(n):e[i]==null&&(e[i]=n))})}function t5(e,t,r){if(St(t)){var n=he();return U(t,function(o){if(o!=null){var a=Ki(o,null);a!=null&&n.set(o,!0)}}),ln(r,function(o){return o&&n.get(o[e])})}else{var i=Ki(t,null);return ln(r,function(o){return o&&i!=null&&o[e]===i})}}function e5(e,t){return t.hasOwnProperty("subType")?ln(e,function(r){return r&&r.subType===t.subType}):e}function r5(e){var t=he();return e&&U(Ir(e.replaceMerge),function(r){t.set(r,!0)}),{replaceMergeMainTypeMap:t}}zo(kV,FA);const PV=kV;var ilt=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],olt=function(){function e(t){U(ilt,function(r){this[r]=se(t[r],t)},this)}return e}();const EV=olt;var mS={},alt=function(){function e(){this._coordinateSystems=[]}return e.prototype.create=function(t,r){var n=[];U(mS,function(i,o){var a=i.create(t,r);n=n.concat(a||[])}),this._coordinateSystems=n},e.prototype.update=function(t,r){U(this._coordinateSystems,function(n){n.update&&n.update(t,r)})},e.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},e.register=function(t,r){mS[t]=r},e.get=function(t){return mS[t]},e}();const $A=alt;var slt=/^(min|max)?(.+)$/,llt=function(){function e(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return e.prototype.setOption=function(t,r,n){t&&(U(Ir(t.series),function(a){a&&a.data&&ki(a.data)&&l_(a.data)}),U(Ir(t.dataset),function(a){a&&a.source&&ki(a.source)&&l_(a.source)})),t=oe(t);var i=this._optionBackup,o=ult(t,r,!i);this._newBaseOption=o.baseOption,i?(o.timelineOptions.length&&(i.timelineOptions=o.timelineOptions),o.mediaList.length&&(i.mediaList=o.mediaList),o.mediaDefault&&(i.mediaDefault=o.mediaDefault)):this._optionBackup=o},e.prototype.mountOption=function(t){var r=this._optionBackup;return this._timelineOptions=r.timelineOptions,this._mediaList=r.mediaList,this._mediaDefault=r.mediaDefault,this._currentMediaIndices=[],oe(t?r.baseOption:this._newBaseOption)},e.prototype.getTimelineOption=function(t){var r,n=this._timelineOptions;if(n.length){var i=t.getComponent("timeline");i&&(r=oe(n[i.getCurrentIndex()]))}return r},e.prototype.getMediaOption=function(t){var r=this._api.getWidth(),n=this._api.getHeight(),i=this._mediaList,o=this._mediaDefault,a=[],s=[];if(!i.length&&!o)return s;for(var l=0,u=i.length;l<u;l++)clt(i[l].query,r,n)&&a.push(l);return!a.length&&o&&(a=[-1]),a.length&&!hlt(a,this._currentMediaIndices)&&(s=Bt(a,function(c){return oe(c===-1?o.option:i[c].option)})),this._currentMediaIndices=a,s},e}();function ult(e,t,r){var n=[],i,o,a=e.baseOption,s=e.timeline,l=e.options,u=e.media,c=!!e.media,f=!!(l||s||a&&a.timeline);a?(o=a,o.timeline||(o.timeline=s)):((f||c)&&(e.options=e.media=null),o=e),c&&St(u)&&U(u,function(d){d&&d.option&&(d.query?n.push(d):i||(i=d))}),h(o),U(l,function(d){return h(d)}),U(n,function(d){return h(d.option)});function h(d){U(t,function(p){p(d,r)})}return{baseOption:o,timelineOptions:l||[],mediaDefault:i,mediaList:n}}function clt(e,t,r){var n={width:t,height:r,aspectratio:t/r},i=!0;return U(e,function(o,a){var s=a.match(slt);if(!(!s||!s[1]||!s[2])){var l=s[1],u=s[2].toLowerCase();flt(n[u],o,l)||(i=!1)}}),i}function flt(e,t,r){return r==="min"?e>=t:r==="max"?e<=t:e===t}function hlt(e,t){return e.join(",")===t.join(",")}const dlt=llt;var fo=U,yv=Yt,n5=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function yS(e){var t=e&&e.itemStyle;if(!!t)for(var r=0,n=n5.length;r<n;r++){var i=n5[r],o=t.normal,a=t.emphasis;o&&o[i]&&(e[i]=e[i]||{},e[i].normal?Ie(e[i].normal,o[i]):e[i].normal=o[i],o[i]=null),a&&a[i]&&(e[i]=e[i]||{},e[i].emphasis?Ie(e[i].emphasis,a[i]):e[i].emphasis=a[i],a[i]=null)}}function Sn(e,t,r){if(e&&e[t]&&(e[t].normal||e[t].emphasis)){var n=e[t].normal,i=e[t].emphasis;n&&(r?(e[t].normal=e[t].emphasis=null,Ee(e[t],n)):e[t]=n),i&&(e.emphasis=e.emphasis||{},e.emphasis[t]=i,i.focus&&(e.emphasis.focus=i.focus),i.blurScope&&(e.emphasis.blurScope=i.blurScope))}}function rg(e){Sn(e,"itemStyle"),Sn(e,"lineStyle"),Sn(e,"areaStyle"),Sn(e,"label"),Sn(e,"labelLine"),Sn(e,"upperLabel"),Sn(e,"edgeLabel")}function xr(e,t){var r=yv(e)&&e[t],n=yv(r)&&r.textStyle;if(n)for(var i=0,o=i6.length;i<o;i++){var a=i6[i];n.hasOwnProperty(a)&&(r[a]=n[a])}}function Bi(e){e&&(rg(e),xr(e,"label"),e.emphasis&&xr(e.emphasis,"label"))}function plt(e){if(!!yv(e)){yS(e),rg(e),xr(e,"label"),xr(e,"upperLabel"),xr(e,"edgeLabel"),e.emphasis&&(xr(e.emphasis,"label"),xr(e.emphasis,"upperLabel"),xr(e.emphasis,"edgeLabel"));var t=e.markPoint;t&&(yS(t),Bi(t));var r=e.markLine;r&&(yS(r),Bi(r));var n=e.markArea;n&&Bi(n);var i=e.data;if(e.type==="graph"){i=i||e.nodes;var o=e.links||e.edges;if(o&&!ki(o))for(var a=0;a<o.length;a++)Bi(o[a]);U(e.categories,function(u){rg(u)})}if(i&&!ki(i))for(var a=0;a<i.length;a++)Bi(i[a]);if(t=e.markPoint,t&&t.data)for(var s=t.data,a=0;a<s.length;a++)Bi(s[a]);if(r=e.markLine,r&&r.data)for(var l=r.data,a=0;a<l.length;a++)St(l[a])?(Bi(l[a][0]),Bi(l[a][1])):Bi(l[a]);e.type==="gauge"?(xr(e,"axisLabel"),xr(e,"title"),xr(e,"detail")):e.type==="treemap"?(Sn(e.breadcrumb,"itemStyle"),U(e.levels,function(u){rg(u)})):e.type==="tree"&&rg(e.leaves)}}function Ga(e){return St(e)?e:e?[e]:[]}function i5(e){return(St(e)?e[0]:e)||{}}function glt(e,t){fo(Ga(e.series),function(n){yv(n)&&plt(n)});var r=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&r.push("valueAxis","categoryAxis","logAxis","timeAxis"),fo(r,function(n){fo(Ga(e[n]),function(i){i&&(xr(i,"axisLabel"),xr(i.axisPointer,"label"))})}),fo(Ga(e.parallel),function(n){var i=n&&n.parallelAxisDefault;xr(i,"axisLabel"),xr(i&&i.axisPointer,"label")}),fo(Ga(e.calendar),function(n){Sn(n,"itemStyle"),xr(n,"dayLabel"),xr(n,"monthLabel"),xr(n,"yearLabel")}),fo(Ga(e.radar),function(n){xr(n,"name"),n.name&&n.axisName==null&&(n.axisName=n.name,delete n.name),n.nameGap!=null&&n.axisNameGap==null&&(n.axisNameGap=n.nameGap,delete n.nameGap)}),fo(Ga(e.geo),function(n){yv(n)&&(Bi(n),fo(Ga(n.regions),function(i){Bi(i)}))}),fo(Ga(e.timeline),function(n){Bi(n),Sn(n,"label"),Sn(n,"itemStyle"),Sn(n,"controlStyle",!0);var i=n.data;St(i)&&U(i,function(o){Yt(o)&&(Sn(o,"label"),Sn(o,"itemStyle"))})}),fo(Ga(e.toolbox),function(n){Sn(n,"iconStyle"),fo(n.feature,function(i){Sn(i,"iconStyle")})}),xr(i5(e.axisPointer),"label"),xr(i5(e.tooltip).axisPointer,"label")}function vlt(e,t){for(var r=t.split(","),n=e,i=0;i<r.length&&(n=n&&n[r[i]],n!=null);i++);return n}function mlt(e,t,r,n){for(var i=t.split(","),o=e,a,s=0;s<i.length-1;s++)a=i[s],o[a]==null&&(o[a]={}),o=o[a];(n||o[i[s]]==null)&&(o[i[s]]=r)}function o5(e){e&&U(ylt,function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])})}var ylt=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],_lt=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],_S=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function rp(e){var t=e&&e.itemStyle;if(t)for(var r=0;r<_S.length;r++){var n=_S[r][1],i=_S[r][0];t[n]!=null&&(t[i]=t[n])}}function a5(e){!e||e.alignTo==="edge"&&e.margin!=null&&e.edgeDistance==null&&(e.edgeDistance=e.margin)}function s5(e){!e||e.downplay&&!e.blur&&(e.blur=e.downplay)}function blt(e){!e||e.focusNodeAdjacency!=null&&(e.emphasis=e.emphasis||{},e.emphasis.focus==null&&(e.emphasis.focus="adjacency"))}function CV(e,t){if(e)for(var r=0;r<e.length;r++)t(e[r]),e[r]&&CV(e[r].children,t)}function AV(e,t){glt(e,t),e.series=Ir(e.series),U(e.series,function(r){if(!!Yt(r)){var n=r.type;if(n==="line")r.clipOverflow!=null&&(r.clip=r.clipOverflow);else if(n==="pie"||n==="gauge"){r.clockWise!=null&&(r.clockwise=r.clockWise),a5(r.label);var i=r.data;if(i&&!ki(i))for(var o=0;o<i.length;o++)a5(i[o]);r.hoverOffset!=null&&(r.emphasis=r.emphasis||{},(r.emphasis.scaleSize=null)&&(r.emphasis.scaleSize=r.hoverOffset))}else if(n==="gauge"){var a=vlt(r,"pointer.color");a!=null&&mlt(r,"itemStyle.color",a)}else if(n==="bar"){rp(r),rp(r.backgroundStyle),rp(r.emphasis);var i=r.data;if(i&&!ki(i))for(var o=0;o<i.length;o++)typeof i[o]=="object"&&(rp(i[o]),rp(i[o]&&i[o].emphasis))}else if(n==="sunburst"){var s=r.highlightPolicy;s&&(r.emphasis=r.emphasis||{},r.emphasis.focus||(r.emphasis.focus=s)),s5(r),CV(r.data,s5)}else n==="graph"||n==="sankey"?blt(r):n==="map"&&(r.mapType&&!r.map&&(r.map=r.mapType),r.mapLocation&&Ee(r,r.mapLocation));r.hoverAnimation!=null&&(r.emphasis=r.emphasis||{},r.emphasis&&r.emphasis.scale==null&&(r.emphasis.scale=r.hoverAnimation)),o5(r)}}),e.dataRange&&(e.visualMap=e.dataRange),U(_lt,function(r){var n=e[r];n&&(St(n)||(n=[n]),U(n,function(i){o5(i)}))})}function wlt(e){var t=he();e.eachSeries(function(r){var n=r.get("stack");if(n){var i=t.get(n)||t.set(n,[]),o=r.getData(),a={stackResultDimension:o.getCalculationInfo("stackResultDimension"),stackedOverDimension:o.getCalculationInfo("stackedOverDimension"),stackedDimension:o.getCalculationInfo("stackedDimension"),stackedByDimension:o.getCalculationInfo("stackedByDimension"),isStackedByIndex:o.getCalculationInfo("isStackedByIndex"),data:o,seriesModel:r};if(!a.stackedDimension||!(a.isStackedByIndex||a.stackedByDimension))return;i.length&&o.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(a)}}),t.each(Slt)}function Slt(e){U(e,function(t,r){var n=[],i=[NaN,NaN],o=[t.stackResultDimension,t.stackedOverDimension],a=t.data,s=t.isStackedByIndex,l=t.seriesModel.get("stackStrategy")||"samesign";a.modify(o,function(u,c,f){var h=a.get(t.stackedDimension,f);if(isNaN(h))return i;var d,p;s?p=a.getRawIndex(f):d=a.get(t.stackedByDimension,f);for(var g=NaN,m=r-1;m>=0;m--){var v=e[m];if(s||(p=v.data.rawIndexOf(v.stackedByDimension,d)),p>=0){var y=v.data.getByRawIndex(v.stackResultDimension,p);if(l==="all"||l==="positive"&&y>0||l==="negative"&&y<0||l==="samesign"&&h>=0&&y>0||l==="samesign"&&h<=0&&y<0){h=Nit(h,y),g=y;break}}}return n[0]=h,n[1]=g,n})})}var Jb=function(){function e(t){this.data=t.data||(t.sourceFormat===Ms?{}:[]),this.sourceFormat=t.sourceFormat||bV,this.seriesLayoutBy=t.seriesLayoutBy||Pa,this.startIndex=t.startIndex||0,this.dimensionsDetectedCount=t.dimensionsDetectedCount,this.metaRawOption=t.metaRawOption;var r=this.dimensionsDefine=t.dimensionsDefine;if(r)for(var n=0;n<r.length;n++){var i=r[n];i.type==null&&TV(this,n)===hi.Must&&(i.type="ordinal")}}return e}();function BA(e){return e instanceof Jb}function _P(e,t,r){r=r||xV(e);var n=t.seriesLayoutBy,i=klt(e,r,n,t.sourceHeader,t.dimensions),o=new Jb({data:e,sourceFormat:r,seriesLayoutBy:n,dimensionsDefine:i.dimensionsDefine,startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount,metaRawOption:oe(t)});return o}function zA(e){return new Jb({data:e,sourceFormat:ki(e)?Ll:io})}function Tlt(e){return new Jb({data:e.data,sourceFormat:e.sourceFormat,seriesLayoutBy:e.seriesLayoutBy,dimensionsDefine:oe(e.dimensionsDefine),startIndex:e.startIndex,dimensionsDetectedCount:e.dimensionsDetectedCount})}function xV(e){var t=bV;if(ki(e))t=Ll;else if(St(e)){e.length===0&&(t=Un);for(var r=0,n=e.length;r<n;r++){var i=e[r];if(i!=null){if(St(i)){t=Un;break}else if(Yt(i)){t=Wo;break}}}}else if(Yt(e)){for(var o in e)if(Mt(e,o)&&In(e[o])){t=Ms;break}}return t}function klt(e,t,r,n,i){var o,a;if(!e)return{dimensionsDefine:l5(i),startIndex:a,dimensionsDetectedCount:o};if(t===Un){var s=e;n==="auto"||n==null?u5(function(u){u!=null&&u!=="-"&&($t(u)?a==null&&(a=1):a=0)},r,s,10):a=He(n)?n:n?1:0,!i&&a===1&&(i=[],u5(function(u,c){i[c]=u!=null?u+"":""},r,s,1/0)),o=i?i.length:r===fd?s.length:s[0]?s[0].length:null}else if(t===Wo)i||(i=Plt(e));else if(t===Ms)i||(i=[],U(e,function(u,c){i.push(c)}));else if(t===io){var l=Qv(e[0]);o=St(l)&&l.length||1}return{startIndex:a,dimensionsDefine:l5(i),dimensionsDetectedCount:o}}function Plt(e){for(var t=0,r;t<e.length&&!(r=e[t++]););if(r){var n=[];return U(r,function(i,o){n.push(o)}),n}}function l5(e){if(!!e){var t=he();return Bt(e,function(r,n){r=Yt(r)?r:{name:r};var i={name:r.name,displayName:r.displayName,type:r.type};if(i.name==null)return i;i.name+="",i.displayName==null&&(i.displayName=i.name);var o=t.get(i.name);return o?i.name+="-"+o.count++:t.set(i.name,{count:1}),i})}}function u5(e,t,r,n){if(t===fd)for(var i=0;i<r.length&&i<n;i++)e(r[i]?r[i][0]:null,i);else for(var o=r[0]||[],i=0;i<o.length&&i<n;i++)e(o[i],i)}function MV(e){var t=e.sourceFormat;return t===Wo||t===Ms}var Iu,Lu,Ou,c5,f5,IV=function(){function e(t,r){var n=BA(t)?t:zA(t);this._source=n;var i=this._data=n.data;n.sourceFormat===Ll&&(this._offset=0,this._dimSize=r,this._data=i),f5(this,i,n)}return e.prototype.getSource=function(){return this._source},e.prototype.count=function(){return 0},e.prototype.getItem=function(t,r){},e.prototype.appendData=function(t){},e.prototype.clean=function(){},e.protoInitialize=function(){var t=e.prototype;t.pure=!1,t.persistent=!0}(),e.internalField=function(){var t;f5=function(a,s,l){var u=l.sourceFormat,c=l.seriesLayoutBy,f=l.startIndex,h=l.dimensionsDefine,d=c5[VA(u,c)];if(_t(a,d),u===Ll)a.getItem=r,a.count=i,a.fillStorage=n;else{var p=LV(u,c);a.getItem=se(p,null,s,f,h);var g=OV(u,c);a.count=se(g,null,s,f,h)}};var r=function(a,s){a=a-this._offset,s=s||[];for(var l=this._data,u=this._dimSize,c=u*a,f=0;f<u;f++)s[f]=l[c+f];return s},n=function(a,s,l,u){for(var c=this._data,f=this._dimSize,h=0;h<f;h++){for(var d=u[h],p=d[0]==null?1/0:d[0],g=d[1]==null?-1/0:d[1],m=s-a,v=l[h],y=0;y<m;y++){var b=c[y*f+h];v[a+y]=b,b<p&&(p=b),b>g&&(g=b)}d[0]=p,d[1]=g}},i=function(){return this._data?this._data.length/this._dimSize:0};c5=(t={},t[Un+"_"+Pa]={pure:!0,appendData:o},t[Un+"_"+fd]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},t[Wo]={pure:!0,appendData:o},t[Ms]={pure:!0,appendData:function(a){var s=this._data;U(a,function(l,u){for(var c=s[u]||(s[u]=[]),f=0;f<(l||[]).length;f++)c.push(l[f])})}},t[io]={appendData:o},t[Ll]={persistent:!1,pure:!0,appendData:function(a){this._data=a},clean:function(){this._offset+=this.count(),this._data=null}},t);function o(a){for(var s=0;s<a.length;s++)this._data.push(a[s])}}(),e}(),h5=function(e,t,r,n){return e[n]},Elt=(Iu={},Iu[Un+"_"+Pa]=function(e,t,r,n){return e[n+t]},Iu[Un+"_"+fd]=function(e,t,r,n,i){n+=t;for(var o=i||[],a=e,s=0;s<a.length;s++){var l=a[s];o[s]=l?l[n]:null}return o},Iu[Wo]=h5,Iu[Ms]=function(e,t,r,n,i){for(var o=i||[],a=0;a<r.length;a++){var s=r[a].name,l=e[s];o[a]=l?l[n]:null}return o},Iu[io]=h5,Iu);function LV(e,t){var r=Elt[VA(e,t)];return r}var d5=function(e,t,r){return e.length},Clt=(Lu={},Lu[Un+"_"+Pa]=function(e,t,r){return Math.max(0,e.length-t)},Lu[Un+"_"+fd]=function(e,t,r){var n=e[0];return n?Math.max(0,n.length-t):0},Lu[Wo]=d5,Lu[Ms]=function(e,t,r){var n=r[0].name,i=e[n];return i?i.length:0},Lu[io]=d5,Lu);function OV(e,t){var r=Clt[VA(e,t)];return r}var bS=function(e,t,r){return e[t]},Alt=(Ou={},Ou[Un]=bS,Ou[Wo]=function(e,t,r){return e[r]},Ou[Ms]=bS,Ou[io]=function(e,t,r){var n=Qv(e);return n instanceof Array?n[t]:n},Ou[Ll]=bS,Ou);function RV(e){var t=Alt[e];return t}function VA(e,t){return e===Un?e+"_"+t:e}function Hh(e,t,r){if(!!e){var n=e.getRawDataItem(t);if(n!=null){var i=e.getStore(),o=i.getSource().sourceFormat;if(r!=null){var a=e.getDimensionIndex(r),s=i.getDimensionProperty(a);return RV(o)(n,a,s)}else{var l=n;return o===io&&(l=Qv(n)),l}}}}var xlt=/\{@(.+?)\}/g,DV=function(){function e(){}return e.prototype.getDataParams=function(t,r){var n=this.getData(r),i=this.getRawValue(t,r),o=n.getRawIndex(t),a=n.getName(t),s=n.getRawDataItem(t),l=n.getItemVisual(t,"style"),u=l&&l[n.getItemVisual(t,"drawType")||"fill"],c=l&&l.stroke,f=this.mainType,h=f==="series",d=n.userOutput&&n.userOutput.get();return{componentType:f,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:h?this.subType:null,seriesIndex:this.seriesIndex,seriesId:h?this.id:null,seriesName:h?this.name:null,name:a,dataIndex:o,data:s,dataType:r,value:i,color:u,borderColor:c,dimensionNames:d?d.fullDimensions:null,encode:d?d.encode:null,$vars:["seriesName","name","value"]}},e.prototype.getFormattedLabel=function(t,r,n,i,o,a){r=r||"normal";var s=this.getData(n),l=this.getDataParams(t,n);if(a&&(l.value=a.interpolatedValue),i!=null&&St(l.value)&&(l.value=l.value[i]),!o){var u=s.getItemModel(t);o=u.get(r==="normal"?["label","formatter"]:[r,"label","formatter"])}if(ue(o))return l.status=r,l.dimensionIndex=i,o(l);if($t(o)){var c=mV(o,l);return c.replace(xlt,function(f,h){var d=h.length,p=h;p.charAt(0)==="["&&p.charAt(d-1)==="]"&&(p=+p.slice(1,d-1));var g=Hh(s,t,p);if(a&&St(a.interpolatedValue)){var m=s.getDimensionIndex(p);m>=0&&(g=a.interpolatedValue[m])}return g!=null?g+"":""})}},e.prototype.getRawValue=function(t,r){return Hh(this.getData(r),t)},e.prototype.formatTooltip=function(t,r,n){},e}();function p5(e){var t,r;return Yt(e)?e.type&&(r=e):t=e,{text:t,frag:r}}function Ug(e){return new Mlt(e)}var Mlt=function(){function e(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return e.prototype.perform=function(t){var r=this._upstream,n=t&&t.skip;if(this._dirty&&r){var i=this.context;i.data=i.outputData=r.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var o;this._plan&&!n&&(o=this._plan(this.context));var a=c(this._modBy),s=this._modDataCount||0,l=c(t&&t.modBy),u=t&&t.modDataCount||0;(a!==l||s!==u)&&(o="reset");function c(y){return!(y>=1)&&(y=1),y}var f;(this._dirty||o==="reset")&&(this._dirty=!1,f=this._doReset(n)),this._modBy=l,this._modDataCount=u;var h=t&&t.step;if(r?this._dueEnd=r._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var d=this._dueIndex,p=Math.min(h!=null?this._dueIndex+h:1/0,this._dueEnd);if(!n&&(f||d<p)){var g=this._progress;if(St(g))for(var m=0;m<g.length;m++)this._doProgress(g[m],d,p,l,u);else this._doProgress(g,d,p,l,u)}this._dueIndex=p;var v=this._settedOutputEnd!=null?this._settedOutputEnd:p;this._outputDueEnd=v}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},e.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},e.prototype._doProgress=function(t,r,n,i,o){g5.reset(r,n,i,o),this._callingProgress=t,this._callingProgress({start:r,end:n,count:n-r,next:g5.next},this.context)},e.prototype._doReset=function(t){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var r,n;!t&&this._reset&&(r=this._reset(this.context),r&&r.progress&&(n=r.forceFirstProgress,r=r.progress),St(r)&&!r.length&&(r=null)),this._progress=r,this._modBy=this._modDataCount=null;var i=this._downstream;return i&&i.dirty(),n},e.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},e.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},e.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},e.prototype.getUpstream=function(){return this._upstream},e.prototype.getDownstream=function(){return this._downstream},e.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},e}(),g5=function(){var e,t,r,n,i,o={reset:function(l,u,c,f){t=l,e=u,r=c,n=f,i=Math.ceil(n/r),o.next=r>1&&n>0?s:a}};return o;function a(){return t<e?t++:null}function s(){var l=t%i*r+Math.ceil(t/i),u=t>=e?null:l<n?l:t;return t++,u}}();function Ol(e,t){var r=t&&t.type;return r==="ordinal"?e:(r==="time"&&!He(e)&&e!=null&&e!=="-"&&(e=+_s(e)),e==null||e===""?NaN:+e)}var Ilt=he({number:function(e){return parseFloat(e)},time:function(e){return+_s(e)},trim:function(e){return $t(e)?ma(e):e}});function NV(e){return Ilt.get(e)}var FV={lt:function(e,t){return e<t},lte:function(e,t){return e<=t},gt:function(e,t){return e>t},gte:function(e,t){return e>=t}},Llt=function(){function e(t,r){if(!He(r)){var n="";Ae(n)}this._opFn=FV[t],this._rvalFloat=Ul(r)}return e.prototype.evaluate=function(t){return He(t)?this._opFn(t,this._rvalFloat):this._opFn(Ul(t),this._rvalFloat)},e}(),$V=function(){function e(t,r){var n=t==="desc";this._resultLT=n?1:-1,r==null&&(r=n?"min":"max"),this._incomparable=r==="min"?-1/0:1/0}return e.prototype.evaluate=function(t,r){var n=He(t)?t:Ul(t),i=He(r)?r:Ul(r),o=isNaN(n),a=isNaN(i);if(o&&(n=this._incomparable),a&&(i=this._incomparable),o&&a){var s=$t(t),l=$t(r);s&&(n=l?t:0),l&&(i=s?r:0)}return n<i?this._resultLT:n>i?-this._resultLT:0},e}(),Olt=function(){function e(t,r){this._rval=r,this._isEQ=t,this._rvalTypeof=typeof r,this._rvalFloat=Ul(r)}return e.prototype.evaluate=function(t){var r=t===this._rval;if(!r){var n=typeof t;n!==this._rvalTypeof&&(n==="number"||this._rvalTypeof==="number")&&(r=Ul(t)===this._rvalFloat)}return this._isEQ?r:!r},e}();function Rlt(e,t){return e==="eq"||e==="ne"?new Olt(e==="eq",t):Mt(FV,e)?new Llt(e,t):null}var Dlt=function(){function e(){}return e.prototype.getRawData=function(){throw new Error("not supported")},e.prototype.getRawDataItem=function(t){throw new Error("not supported")},e.prototype.cloneRawData=function(){},e.prototype.getDimensionInfo=function(t){},e.prototype.cloneAllDimensionInfo=function(){},e.prototype.count=function(){},e.prototype.retrieveValue=function(t,r){},e.prototype.retrieveValueFromItem=function(t,r){},e.prototype.convertValue=function(t,r){return Ol(t,r)},e}();function Nlt(e,t){var r=new Dlt,n=e.data,i=r.sourceFormat=e.sourceFormat,o=e.startIndex,a="";e.seriesLayoutBy!==Pa&&Ae(a);var s=[],l={},u=e.dimensionsDefine;if(u)U(u,function(g,m){var v=g.name,y={index:m,name:v,displayName:g.displayName};if(s.push(y),v!=null){var b="";Mt(l,v)&&Ae(b),l[v]=y}});else for(var c=0;c<e.dimensionsDetectedCount;c++)s.push({index:c});var f=LV(i,Pa);t.__isBuiltIn&&(r.getRawDataItem=function(g){return f(n,o,s,g)},r.getRawData=se(Flt,null,e)),r.cloneRawData=se($lt,null,e);var h=OV(i,Pa);r.count=se(h,null,n,o,s);var d=RV(i);r.retrieveValue=function(g,m){var v=f(n,o,s,g);return p(v,m)};var p=r.retrieveValueFromItem=function(g,m){if(g!=null){var v=s[m];if(v)return d(g,m,v.name)}};return r.getDimensionInfo=se(Blt,null,s,l),r.cloneAllDimensionInfo=se(zlt,null,s),r}function Flt(e){var t=e.sourceFormat;if(!UA(t)){var r="";Ae(r)}return e.data}function $lt(e){var t=e.sourceFormat,r=e.data;if(!UA(t)){var n="";Ae(n)}if(t===Un){for(var i=[],o=0,a=r.length;o<a;o++)i.push(r[o].slice());return i}else if(t===Wo){for(var i=[],o=0,a=r.length;o<a;o++)i.push(_t({},r[o]));return i}}function Blt(e,t,r){if(r!=null){if(He(r)||!isNaN(r)&&!Mt(t,r))return e[r];if(Mt(t,r))return t[r]}}function zlt(e){return oe(e)}var BV=he();function Vlt(e){e=oe(e);var t=e.type,r="";t||Ae(r);var n=t.split(":");n.length!==2&&Ae(r);var i=!1;n[0]==="echarts"&&(t=n[1],i=!0),e.__isBuiltIn=i,BV.set(t,e)}function Ult(e,t,r){var n=Ir(e),i=n.length,o="";i||Ae(o);for(var a=0,s=i;a<s;a++){var l=n[a];t=Wlt(l,t),a!==s-1&&(t.length=Math.max(t.length,1))}return t}function Wlt(e,t,r,n){var i="";t.length||Ae(i),Yt(e)||Ae(i);var o=e.type,a=BV.get(o);a||Ae(i);var s=Bt(t,function(u){return Nlt(u,a)}),l=Ir(a.transform({upstream:s[0],upstreamList:s,config:oe(e.config)}));return Bt(l,function(u,c){var f="";Yt(u)||Ae(f),u.data||Ae(f);var h=xV(u.data);UA(h)||Ae(f);var d,p=t[0];if(p&&c===0&&!u.dimensions){var g=p.startIndex;g&&(u.data=p.data.slice(0,g).concat(u.data)),d={seriesLayoutBy:Pa,sourceHeader:g,dimensions:p.metaRawOption.dimensions}}else d={seriesLayoutBy:Pa,sourceHeader:0,dimensions:u.dimensions};return _P(u.data,d,null)})}function UA(e){return e===Un||e===Wo}var Qb="undefined",jlt=typeof Uint32Array===Qb?Array:Uint32Array,Glt=typeof Uint16Array===Qb?Array:Uint16Array,zV=typeof Int32Array===Qb?Array:Int32Array,v5=typeof Float64Array===Qb?Array:Float64Array,VV={float:v5,int:zV,ordinal:Array,number:Array,time:v5},wS;function np(e){return e>65535?jlt:Glt}function Af(){return[1/0,-1/0]}function Hlt(e){var t=e.constructor;return t===Array?e.slice():new t(e)}function m5(e,t,r,n,i){var o=VV[r||"float"];if(i){var a=e[t],s=a&&a.length;if(s!==n){for(var l=new o(n),u=0;u<s;u++)l[u]=a[u];e[t]=l}}else e[t]=new o(n)}var Xlt=function(){function e(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=he()}return e.prototype.initData=function(t,r,n){this._provider=t,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var i=t.getSource(),o=this.defaultDimValueGetter=wS[i.sourceFormat];this._dimValueGetter=n||o,this._rawExtent=[],MV(i),this._dimensions=Bt(r,function(a){return{type:a.type,property:a.property}}),this._initDataFromProvider(0,t.count())},e.prototype.getProvider=function(){return this._provider},e.prototype.getSource=function(){return this._provider.getSource()},e.prototype.ensureCalculationDimension=function(t,r){var n=this._calcDimNameToIdx,i=this._dimensions,o=n.get(t);if(o!=null){if(i[o].type===r)return o}else o=i.length;return i[o]={type:r},n.set(t,o),this._chunks[o]=new VV[r||"float"](this._rawCount),this._rawExtent[o]=Af(),o},e.prototype.collectOrdinalMeta=function(t,r){var n=this._chunks[t],i=this._dimensions[t],o=this._rawExtent,a=i.ordinalOffset||0,s=n.length;a===0&&(o[t]=Af());for(var l=o[t],u=a;u<s;u++){var c=n[u]=r.parseAndCollect(n[u]);isNaN(c)||(l[0]=Math.min(c,l[0]),l[1]=Math.max(c,l[1]))}i.ordinalMeta=r,i.ordinalOffset=s,i.type="ordinal"},e.prototype.getOrdinalMeta=function(t){var r=this._dimensions[t],n=r.ordinalMeta;return n},e.prototype.getDimensionProperty=function(t){var r=this._dimensions[t];return r&&r.property},e.prototype.appendData=function(t){var r=this._provider,n=this.count();r.appendData(t);var i=r.count();return r.persistent||(i+=n),n<i&&this._initDataFromProvider(n,i,!0),[n,i]},e.prototype.appendValues=function(t,r){for(var n=this._chunks,i=this._dimensions,o=i.length,a=this._rawExtent,s=this.count(),l=s+Math.max(t.length,r||0),u=0;u<o;u++){var c=i[u];m5(n,u,c.type,l,!0)}for(var f=[],h=s;h<l;h++)for(var d=h-s,p=0;p<o;p++){var c=i[p],g=wS.arrayRows.call(this,t[d]||f,c.property,d,p);n[p][h]=g;var m=a[p];g<m[0]&&(m[0]=g),g>m[1]&&(m[1]=g)}return this._rawCount=this._count=l,{start:s,end:l}},e.prototype._initDataFromProvider=function(t,r,n){for(var i=this._provider,o=this._chunks,a=this._dimensions,s=a.length,l=this._rawExtent,u=Bt(a,function(y){return y.property}),c=0;c<s;c++){var f=a[c];l[c]||(l[c]=Af()),m5(o,c,f.type,r,n)}if(i.fillStorage)i.fillStorage(t,r,o,l);else for(var h=[],d=t;d<r;d++){h=i.getItem(d,h);for(var p=0;p<s;p++){var g=o[p],m=this._dimValueGetter(h,u[p],d,p);g[d]=m;var v=l[p];m<v[0]&&(v[0]=m),m>v[1]&&(v[1]=m)}}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=r,this._extent=[]},e.prototype.count=function(){return this._count},e.prototype.get=function(t,r){if(!(r>=0&&r<this._count))return NaN;var n=this._chunks[t];return n?n[this.getRawIndex(r)]:NaN},e.prototype.getValues=function(t,r){var n=[],i=[];if(r==null){r=t,t=[];for(var o=0;o<this._dimensions.length;o++)i.push(o)}else i=t;for(var o=0,a=i.length;o<a;o++)n.push(this.get(i[o],r));return n},e.prototype.getByRawIndex=function(t,r){if(!(r>=0&&r<this._rawCount))return NaN;var n=this._chunks[t];return n?n[r]:NaN},e.prototype.getSum=function(t){var r=this._chunks[t],n=0;if(r)for(var i=0,o=this.count();i<o;i++){var a=this.get(t,i);isNaN(a)||(n+=a)}return n},e.prototype.getMedian=function(t){var r=[];this.each([t],function(o){isNaN(o)||r.push(o)});var n=r.sort(function(o,a){return o-a}),i=this.count();return i===0?0:i%2===1?n[(i-1)/2]:(n[i/2]+n[i/2-1])/2},e.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var r=this._indices,n=r[t];if(n!=null&&n<this._count&&n===t)return t;for(var i=0,o=this._count-1;i<=o;){var a=(i+o)/2|0;if(r[a]<t)i=a+1;else if(r[a]>t)o=a-1;else return a}return-1},e.prototype.indicesOfNearest=function(t,r,n){var i=this._chunks,o=i[t],a=[];if(!o)return a;n==null&&(n=1/0);for(var s=1/0,l=-1,u=0,c=0,f=this.count();c<f;c++){var h=this.getRawIndex(c),d=r-o[h],p=Math.abs(d);p<=n&&((p<s||p===s&&d>=0&&l<0)&&(s=p,l=d,u=0),d===l&&(a[u++]=c))}return a.length=u,a},e.prototype.getIndices=function(){var t,r=this._indices;if(r){var n=r.constructor,i=this._count;if(n===Array){t=new n(i);for(var o=0;o<i;o++)t[o]=r[o]}else t=new n(r.buffer,0,i)}else{var n=np(this._rawCount);t=new n(this.count());for(var o=0;o<t.length;o++)t[o]=o}return t},e.prototype.filter=function(t,r){if(!this._count)return this;for(var n=this.clone(),i=n.count(),o=np(n._rawCount),a=new o(i),s=[],l=t.length,u=0,c=t[0],f=n._chunks,h=0;h<i;h++){var d=void 0,p=n.getRawIndex(h);if(l===0)d=r(h);else if(l===1){var g=f[c][p];d=r(g,h)}else{for(var m=0;m<l;m++)s[m]=f[t[m]][p];s[m]=h,d=r.apply(null,s)}d&&(a[u++]=p)}return u<i&&(n._indices=a),n._count=u,n._extent=[],n._updateGetRawIdx(),n},e.prototype.selectRange=function(t){var r=this.clone(),n=r._count;if(!n)return this;var i=ze(t),o=i.length;if(!o)return this;var a=r.count(),s=np(r._rawCount),l=new s(a),u=0,c=i[0],f=t[c][0],h=t[c][1],d=r._chunks,p=!1;if(!r._indices){var g=0;if(o===1){for(var m=d[i[0]],v=0;v<n;v++){var y=m[v];(y>=f&&y<=h||isNaN(y))&&(l[u++]=g),g++}p=!0}else if(o===2){for(var m=d[i[0]],b=d[i[1]],w=t[i[1]][0],T=t[i[1]][1],v=0;v<n;v++){var y=m[v],S=b[v];(y>=f&&y<=h||isNaN(y))&&(S>=w&&S<=T||isNaN(S))&&(l[u++]=g),g++}p=!0}}if(!p)if(o===1)for(var v=0;v<a;v++){var k=r.getRawIndex(v),y=d[i[0]][k];(y>=f&&y<=h||isNaN(y))&&(l[u++]=k)}else for(var v=0;v<a;v++){for(var E=!0,k=r.getRawIndex(v),P=0;P<o;P++){var C=i[P],y=d[C][k];(y<t[C][0]||y>t[C][1])&&(E=!1)}E&&(l[u++]=r.getRawIndex(v))}return u<a&&(r._indices=l),r._count=u,r._extent=[],r._updateGetRawIdx(),r},e.prototype.map=function(t,r){var n=this.clone(t);return this._updateDims(n,t,r),n},e.prototype.modify=function(t,r){this._updateDims(this,t,r)},e.prototype._updateDims=function(t,r,n){for(var i=t._chunks,o=[],a=r.length,s=t.count(),l=[],u=t._rawExtent,c=0;c<r.length;c++)u[r[c]]=Af();for(var f=0;f<s;f++){for(var h=t.getRawIndex(f),d=0;d<a;d++)l[d]=i[r[d]][h];l[a]=f;var p=n&&n.apply(null,l);if(p!=null){typeof p!="object"&&(o[0]=p,p=o);for(var c=0;c<p.length;c++){var g=r[c],m=p[c],v=u[g],y=i[g];y&&(y[h]=m),m<v[0]&&(v[0]=m),m>v[1]&&(v[1]=m)}}}},e.prototype.lttbDownSample=function(t,r){var n=this.clone([t],!0),i=n._chunks,o=i[t],a=this.count(),s=0,l=Math.floor(1/r),u=this.getRawIndex(0),c,f,h,d=new(np(this._rawCount))(Math.min((Math.ceil(a/l)+2)*2,a));d[s++]=u;for(var p=1;p<a-1;p+=l){for(var g=Math.min(p+l,a-1),m=Math.min(p+l*2,a),v=(m+g)/2,y=0,b=g;b<m;b++){var w=this.getRawIndex(b),T=o[w];isNaN(T)||(y+=T)}y/=m-g;var S=p,k=Math.min(p+l,a),E=p-1,P=o[u];c=-1,h=S;for(var C=-1,A=0,b=S;b<k;b++){var w=this.getRawIndex(b),T=o[w];if(isNaN(T)){A++,C<0&&(C=w);continue}f=Math.abs((E-v)*(T-P)-(E-b)*(y-P)),f>c&&(c=f,h=w)}A>0&&A<k-S&&(d[s++]=Math.min(C,h),h=Math.max(C,h)),d[s++]=h,u=h}return d[s++]=this.getRawIndex(a-1),n._count=s,n._indices=d,n.getRawIndex=this._getRawIdx,n},e.prototype.downSample=function(t,r,n,i){for(var o=this.clone([t],!0),a=o._chunks,s=[],l=Math.floor(1/r),u=a[t],c=this.count(),f=o._rawExtent[t]=Af(),h=new(np(this._rawCount))(Math.ceil(c/l)),d=0,p=0;p<c;p+=l){l>c-p&&(l=c-p,s.length=l);for(var g=0;g<l;g++){var m=this.getRawIndex(p+g);s[g]=u[m]}var v=n(s),y=this.getRawIndex(Math.min(p+i(s,v)||0,c-1));u[y]=v,v<f[0]&&(f[0]=v),v>f[1]&&(f[1]=v),h[d++]=y}return o._count=d,o._indices=h,o._updateGetRawIdx(),o},e.prototype.each=function(t,r){if(!!this._count)for(var n=t.length,i=this._chunks,o=0,a=this.count();o<a;o++){var s=this.getRawIndex(o);switch(n){case 0:r(o);break;case 1:r(i[t[0]][s],o);break;case 2:r(i[t[0]][s],i[t[1]][s],o);break;default:for(var l=0,u=[];l<n;l++)u[l]=i[t[l]][s];u[l]=o,r.apply(null,u)}}},e.prototype.getDataExtent=function(t){var r=this._chunks[t],n=Af();if(!r)return n;var i=this.count(),o=!this._indices,a;if(o)return this._rawExtent[t].slice();if(a=this._extent[t],a)return a.slice();a=n;for(var s=a[0],l=a[1],u=0;u<i;u++){var c=this.getRawIndex(u),f=r[c];f<s&&(s=f),f>l&&(l=f)}return a=[s,l],this._extent[t]=a,a},e.prototype.getRawDataItem=function(t){var r=this.getRawIndex(t);if(this._provider.persistent)return this._provider.getItem(r);for(var n=[],i=this._chunks,o=0;o<i.length;o++)n.push(i[o][r]);return n},e.prototype.clone=function(t,r){var n=new e,i=this._chunks,o=t&&Uc(t,function(s,l){return s[l]=!0,s},{});if(o)for(var a=0;a<i.length;a++)n._chunks[a]=o[a]?Hlt(i[a]):i[a];else n._chunks=i;return this._copyCommonProps(n),r||(n._indices=this._cloneIndices()),n._updateGetRawIdx(),n},e.prototype._copyCommonProps=function(t){t._count=this._count,t._rawCount=this._rawCount,t._provider=this._provider,t._dimensions=this._dimensions,t._extent=oe(this._extent),t._rawExtent=oe(this._rawExtent)},e.prototype._cloneIndices=function(){if(this._indices){var t=this._indices.constructor,r=void 0;if(t===Array){var n=this._indices.length;r=new t(n);for(var i=0;i<n;i++)r[i]=this._indices[i]}else r=new t(this._indices);return r}return null},e.prototype._getRawIdxIdentity=function(t){return t},e.prototype._getRawIdx=function(t){return t<this._count&&t>=0?this._indices[t]:-1},e.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},e.internalField=function(){function t(r,n,i,o){return Ol(r[o],this._dimensions[o])}wS={arrayRows:t,objectRows:function(r,n,i,o){return Ol(r[n],this._dimensions[o])},keyedColumns:t,original:function(r,n,i,o){var a=r&&(r.value==null?r:r.value);return Ol(a instanceof Array?a[o]:a,this._dimensions[o])},typedArray:function(r,n,i,o){return r[o]}}}(),e}();const bP=Xlt;var UV=function(){function e(t){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=t}return e.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},e.prototype._setLocalSource=function(t,r){this._sourceList=t,this._upstreamSignList=r,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},e.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},e.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},e.prototype._createSource=function(){this._setLocalSource([],[]);var t=this._sourceHost,r=this._getUpstreamSourceManagers(),n=!!r.length,i,o;if(vm(t)){var a=t,s=void 0,l=void 0,u=void 0;if(n){var c=r[0];c.prepareSource(),u=c.getSource(),s=u.data,l=u.sourceFormat,o=[c._getVersionSign()]}else s=a.get("data",!0),l=ki(s)?Ll:io,o=[];var f=this._getSourceMetaRawOption()||{},h=u&&u.metaRawOption||{},d=_e(f.seriesLayoutBy,h.seriesLayoutBy)||null,p=_e(f.sourceHeader,h.sourceHeader),g=_e(f.dimensions,h.dimensions),m=d!==h.seriesLayoutBy||!!p!=!!h.sourceHeader||g;i=m?[_P(s,{seriesLayoutBy:d,sourceHeader:p,dimensions:g},l)]:[]}else{var v=t;if(n){var y=this._applyTransform(r);i=y.sourceList,o=y.upstreamSignList}else{var b=v.get("source",!0);i=[_P(b,this._getSourceMetaRawOption(),null)],o=[]}}this._setLocalSource(i,o)},e.prototype._applyTransform=function(t){var r=this._sourceHost,n=r.get("transform",!0),i=r.get("fromTransformResult",!0);if(i!=null){var o="";t.length!==1&&_5(o)}var a,s=[],l=[];return U(t,function(u){u.prepareSource();var c=u.getSource(i||0),f="";i!=null&&!c&&_5(f),s.push(c),l.push(u._getVersionSign())}),n?a=Ult(n,s,{datasetIndex:r.componentIndex}):i!=null&&(a=[Tlt(s[0])]),{sourceList:a,upstreamSignList:l}},e.prototype._isDirty=function(){if(this._dirty)return!0;for(var t=this._getUpstreamSourceManagers(),r=0;r<t.length;r++){var n=t[r];if(n._isDirty()||this._upstreamSignList[r]!==n._getVersionSign())return!0}},e.prototype.getSource=function(t){t=t||0;var r=this._sourceList[t];if(!r){var n=this._getUpstreamSourceManagers();return n[0]&&n[0].getSource(t)}return r},e.prototype.getSharedDataStore=function(t){var r=t.makeStoreSchema();return this._innerGetDataStore(r.dimensions,t.source,r.hash)},e.prototype._innerGetDataStore=function(t,r,n){var i=0,o=this._storeList,a=o[i];a||(a=o[i]={});var s=a[n];if(!s){var l=this._getUpstreamSourceManagers()[0];vm(this._sourceHost)&&l?s=l._innerGetDataStore(t,r,n):(s=new bP,s.initData(new IV(r,t.length),t)),a[n]=s}return s},e.prototype._getUpstreamSourceManagers=function(){var t=this._sourceHost;if(vm(t)){var r=SV(t);return r?[r.getSourceManager()]:[]}else return Bt(Yst(t),function(n){return n.getSourceManager()})},e.prototype._getSourceMetaRawOption=function(){var t=this._sourceHost,r,n,i;if(vm(t))r=t.get("seriesLayoutBy",!0),n=t.get("sourceHeader",!0),i=t.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var o=t;r=o.get("seriesLayoutBy",!0),n=o.get("sourceHeader",!0),i=o.get("dimensions",!0)}return{seriesLayoutBy:r,sourceHeader:n,dimensions:i}},e}();function y5(e){var t=e.option.transform;t&&l_(e.option.transform)}function vm(e){return e.mainType==="series"}function _5(e){throw new Error(e)}var WV="line-height:1";function jV(e,t){var r=e.color||"#6e7079",n=e.fontSize||12,i=e.fontWeight||"400",o=e.color||"#464646",a=e.fontSize||14,s=e.fontWeight||"900";return t==="html"?{nameStyle:"font-size:"+Wi(n+"")+"px;color:"+Wi(r)+";font-weight:"+Wi(i+""),valueStyle:"font-size:"+Wi(a+"")+"px;color:"+Wi(o)+";font-weight:"+Wi(s+"")}:{nameStyle:{fontSize:n,fill:r,fontWeight:i},valueStyle:{fontSize:a,fill:o,fontWeight:s}}}var Ylt=[0,10,20,30],Klt=["",`
`,`

`,`


`];function Gl(e,t){return t.type=e,t}function wP(e){return e.type==="section"}function GV(e){return wP(e)?Zlt:qlt}function HV(e){if(wP(e)){var t=0,r=e.blocks.length,n=r>1||r>0&&!e.noHeader;return U(e.blocks,function(i){var o=HV(i);o>=t&&(t=o+ +(n&&(!o||wP(i)&&!i.noHeader)))}),t}return 0}function Zlt(e,t,r,n){var i=t.noHeader,o=Jlt(HV(t)),a=[],s=t.blocks||[];Do(!s||St(s)),s=s||[];var l=e.orderMode;if(t.sortBlocks&&l){s=s.slice();var u={valueAsc:"asc",valueDesc:"desc"};if(Mt(u,l)){var c=new $V(u[l],null);s.sort(function(p,g){return c.evaluate(p.sortParam,g.sortParam)})}else l==="seriesDesc"&&s.reverse()}U(s,function(p,g){var m=t.valueFormatter,v=GV(p)(m?_t(_t({},e),{valueFormatter:m}):e,p,g>0?o.html:0,n);v!=null&&a.push(v)});var f=e.renderMode==="richText"?a.join(o.richText):SP(a.join(""),i?r:o.html);if(i)return f;var h=yP(t.header,"ordinal",e.useUTC),d=jV(n,e.renderMode).nameStyle;return e.renderMode==="richText"?XV(e,h,d)+o.richText+f:SP('<div style="'+d+";"+WV+';">'+Wi(h)+"</div>"+f,r)}function qlt(e,t,r,n){var i=e.renderMode,o=t.noName,a=t.noValue,s=!t.markerType,l=t.name,u=e.useUTC,c=t.valueFormatter||e.valueFormatter||function(w){return w=St(w)?w:[w],Bt(w,function(T,S){return yP(T,St(d)?d[S]:d,u)})};if(!(o&&a)){var f=s?"":e.markupStyleCreator.makeTooltipMarker(t.markerType,t.markerColor||"#333",i),h=o?"":yP(l,"ordinal",u),d=t.valueType,p=a?[]:c(t.value),g=!s||!o,m=!s&&o,v=jV(n,i),y=v.nameStyle,b=v.valueStyle;return i==="richText"?(s?"":f)+(o?"":XV(e,h,y))+(a?"":eut(e,p,g,m,b)):SP((s?"":f)+(o?"":Qlt(h,!s,y))+(a?"":tut(p,g,m,b)),r)}}function b5(e,t,r,n,i,o){if(!!e){var a=GV(e),s={useUTC:i,renderMode:r,orderMode:n,markupStyleCreator:t,valueFormatter:e.valueFormatter};return a(s,e,0,o)}}function Jlt(e){return{html:Ylt[e],richText:Klt[e]}}function SP(e,t){var r='<div style="clear:both"></div>',n="margin: "+t+"px 0 0";return'<div style="'+n+";"+WV+';">'+e+r+"</div>"}function Qlt(e,t,r){var n=t?"margin-left:2px":"";return'<span style="'+r+";"+n+'">'+Wi(e)+"</span>"}function tut(e,t,r,n){var i=r?"10px":"20px",o=t?"float:right;margin-left:"+i:"";return e=St(e)?e:[e],'<span style="'+o+";"+n+'">'+Bt(e,function(a){return Wi(a)}).join("&nbsp;&nbsp;")+"</span>"}function XV(e,t,r){return e.markupStyleCreator.wrapRichTextStyle(t,r)}function eut(e,t,r,n,i){var o=[i],a=n?10:20;return r&&o.push({padding:[0,0,0,a],align:"right"}),e.markupStyleCreator.wrapRichTextStyle(St(t)?t.join("  "):t,o)}function rut(e,t){var r=e.getData().getItemVisual(t,"style"),n=r[e.visualDrawType];return Cc(n)}function YV(e,t){var r=e.get("padding");return r!=null?r:t==="richText"?[8,10]:10}var SS=function(){function e(){this.richTextStyles={},this._nextStyleNameId=rz()}return e.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},e.prototype.makeTooltipMarker=function(t,r,n){var i=n==="richText"?this._generateStyleName():null,o=Bst({color:r,type:t,renderMode:n,markerId:i});return $t(o)?o:(this.richTextStyles[i]=o.style,o.content)},e.prototype.wrapRichTextStyle=function(t,r){var n={};St(r)?U(r,function(o){return _t(n,o)}):_t(n,r);var i=this._generateStyleName();return this.richTextStyles[i]=n,"{"+i+"|"+t+"}"},e}();function nut(e){var t=e.series,r=e.dataIndex,n=e.multipleSeries,i=t.getData(),o=i.mapDimensionsAll("defaultedTooltip"),a=o.length,s=t.getRawValue(r),l=St(s),u=rut(t,r),c,f,h,d;if(a>1||l&&!a){var p=iut(s,t,r,o,u);c=p.inlineValues,f=p.inlineValueTypes,h=p.blocks,d=p.inlineValues[0]}else if(a){var g=i.getDimensionInfo(o[0]);d=c=Hh(i,r,o[0]),f=g.type}else d=c=l?s[0]:s;var m=pA(t),v=m&&t.name||"",y=i.getName(r),b=n?v:y;return Gl("section",{header:v,noHeader:n||!m,sortParam:d,blocks:[Gl("nameValue",{markerType:"item",markerColor:u,name:b,noName:!ma(b),value:c,valueType:f})].concat(h||[])})}function iut(e,t,r,n,i){var o=t.getData(),a=Uc(e,function(f,h,d){var p=o.getDimensionInfo(d);return f=f||p&&p.tooltip!==!1&&p.displayName!=null},!1),s=[],l=[],u=[];n.length?U(n,function(f){c(Hh(o,r,f),f)}):U(e,c);function c(f,h){var d=o.getDimensionInfo(h);!d||d.otherDims.tooltip===!1||(a?u.push(Gl("nameValue",{markerType:"subItem",markerColor:i,name:d.displayName,value:f,valueType:d.type})):(s.push(f),l.push(d.type)))}return{inlineValues:s,inlineValueTypes:l,blocks:u}}var Us=nr();function mm(e,t){return e.getName(t)||e.getId(t)}var out="__universalTransitionEnabled",t2=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._selectedDataIndicesMap={},r}return t.prototype.init=function(r,n,i){this.seriesIndex=this.componentIndex,this.dataTask=Ug({count:sut,reset:lut}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(r,i);var o=Us(this).sourceManager=new UV(this);o.prepareSource();var a=this.getInitialData(r,i);S5(a,this),this.dataTask.context.data=a,Us(this).dataBeforeProcessed=a,w5(this),this._initSelectedMapFromData(a)},t.prototype.mergeDefaultAndTheme=function(r,n){var i=mv(this),o=i?qb(r):{},a=this.subType;qe.hasClass(a)&&(a+="Series"),Ie(r,n.getTheme().get(this.subType)),Ie(r,this.getDefaultOption()),iP(r,"label",["show"]),this.fillDataTextStyle(r.data),i&&Gh(r,o,i)},t.prototype.mergeOption=function(r,n){r=Ie(this.option,r,!0),this.fillDataTextStyle(r.data);var i=mv(this);i&&Gh(this.option,r,i);var o=Us(this).sourceManager;o.dirty(),o.prepareSource();var a=this.getInitialData(r,n);S5(a,this),this.dataTask.dirty(),this.dataTask.context.data=a,Us(this).dataBeforeProcessed=a,w5(this),this._initSelectedMapFromData(a)},t.prototype.fillDataTextStyle=function(r){if(r&&!ki(r))for(var n=["show"],i=0;i<r.length;i++)r[i]&&r[i].label&&iP(r[i],"label",n)},t.prototype.getInitialData=function(r,n){},t.prototype.appendData=function(r){var n=this.getRawData();n.appendData(r.data)},t.prototype.getData=function(r){var n=TP(this);if(n){var i=n.context.data;return r==null?i:i.getLinkedData(r)}else return Us(this).data},t.prototype.getAllData=function(){var r=this.getData();return r&&r.getLinkedDataAll?r.getLinkedDataAll():[{data:r}]},t.prototype.setData=function(r){var n=TP(this);if(n){var i=n.context;i.outputData=r,n!==this.dataTask&&(i.data=r)}Us(this).data=r},t.prototype.getEncode=function(){var r=this.get("encode",!0);if(r)return he(r)},t.prototype.getSourceManager=function(){return Us(this).sourceManager},t.prototype.getSource=function(){return this.getSourceManager().getSource()},t.prototype.getRawData=function(){return Us(this).dataBeforeProcessed},t.prototype.getColorBy=function(){var r=this.get("colorBy");return r||"series"},t.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},t.prototype.getBaseAxis=function(){var r=this.coordinateSystem;return r&&r.getBaseAxis&&r.getBaseAxis()},t.prototype.formatTooltip=function(r,n,i){return nut({series:this,dataIndex:r,multipleSeries:n})},t.prototype.isAnimationEnabled=function(){var r=this.ecModel;if(me.node&&!(r&&r.ssr))return!1;var n=this.getShallow("animation");return n&&this.getData().count()>this.getShallow("animationThreshold")&&(n=!1),!!n},t.prototype.restoreData=function(){this.dataTask.dirty()},t.prototype.getColorFromPalette=function(r,n,i){var o=this.ecModel,a=FA.prototype.getColorFromPalette.call(this,r,n,i);return a||(a=o.getColorFromPalette(r,n,i)),a},t.prototype.coordDimToDataDim=function(r){return this.getRawData().mapDimensionsAll(r)},t.prototype.getProgressive=function(){return this.get("progressive")},t.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},t.prototype.select=function(r,n){this._innerSelect(this.getData(n),r)},t.prototype.unselect=function(r,n){var i=this.option.selectedMap;if(!!i){var o=this.option.selectedMode,a=this.getData(n);if(o==="series"||i==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var s=0;s<r.length;s++){var l=r[s],u=mm(a,l);i[u]=!1,this._selectedDataIndicesMap[u]=-1}}},t.prototype.toggleSelect=function(r,n){for(var i=[],o=0;o<r.length;o++)i[0]=r[o],this.isSelected(r[o],n)?this.unselect(i,n):this.select(i,n)},t.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var r=this._selectedDataIndicesMap,n=ze(r),i=[],o=0;o<n.length;o++){var a=r[n[o]];a>=0&&i.push(a)}return i},t.prototype.isSelected=function(r,n){var i=this.option.selectedMap;if(!i)return!1;var o=this.getData(n);return(i==="all"||i[mm(o,r)])&&!o.getItemModel(r).get(["select","disabled"])},t.prototype.isUniversalTransitionEnabled=function(){if(this[out])return!0;var r=this.option.universalTransition;return r?r===!0?!0:r&&r.enabled:!1},t.prototype._innerSelect=function(r,n){var i,o,a=this.option,s=a.selectedMode,l=n.length;if(!(!s||!l)){if(s==="series")a.selectedMap="all";else if(s==="multiple"){Yt(a.selectedMap)||(a.selectedMap={});for(var u=a.selectedMap,c=0;c<l;c++){var f=n[c],h=mm(r,f);u[h]=!0,this._selectedDataIndicesMap[h]=r.getRawIndex(f)}}else if(s==="single"||s===!0){var d=n[l-1],h=mm(r,d);a.selectedMap=(i={},i[h]=!0,i),this._selectedDataIndicesMap=(o={},o[h]=r.getRawIndex(d),o)}}},t.prototype._initSelectedMapFromData=function(r){if(!this.option.selectedMap){var n=[];r.hasItemOption&&r.each(function(i){var o=r.getRawDataItem(i);o&&o.selected&&n.push(i)}),n.length>0&&this._innerSelect(r,n)}},t.registerClass=function(r){return qe.registerClass(r)},t.protoInitialize=function(){var r=t.prototype;r.type="series.__base__",r.seriesIndex=0,r.ignoreStyleOnData=!1,r.hasSymbolVisual=!1,r.defaultSymbol="circle",r.visualStyleAccessPath="itemStyle",r.visualDrawType="fill"}(),t}(qe);zo(t2,DV);zo(t2,FA);lz(t2,qe);function w5(e){var t=e.name;pA(e)||(e.name=aut(e)||t)}function aut(e){var t=e.getRawData(),r=t.mapDimensionsAll("seriesName"),n=[];return U(r,function(i){var o=t.getDimensionInfo(i);o.displayName&&n.push(o.displayName)}),n.join(" ")}function sut(e){return e.model.getRawData().count()}function lut(e){var t=e.model;return t.setData(t.getRawData().cloneShallow()),uut}function uut(e,t){t.outputData&&e.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function S5(e,t){U(AB(e.CHANGABLE_METHODS,e.DOWNSAMPLE_METHODS),function(r){e.wrapMethod(r,We(cut,t))})}function cut(e,t){var r=TP(e);return r&&r.setOutputEnd((t||this).count()),t}function TP(e){var t=(e.ecModel||{}).scheduler,r=t&&t.getPipeline(e.uid);if(r){var n=r.currentTask;if(n){var i=n.agentStubMap;i&&(n=i.get(e.uid))}return n}}const Ia=t2;var WA=function(){function e(){this.group=new ar,this.uid=jb("viewComponent")}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,n,i){},e.prototype.dispose=function(t,r){},e.prototype.updateView=function(t,r,n,i){},e.prototype.updateLayout=function(t,r,n,i){},e.prototype.updateVisual=function(t,r,n,i){},e.prototype.toggleBlurSeries=function(t,r,n){},e.prototype.eachRendered=function(t){var r=this.group;r&&r.traverse(t)},e}();vA(WA);Db(WA);const eo=WA;function jA(){var e=nr();return function(t){var r=e(t),n=t.pipelineContext,i=!!r.large,o=!!r.progressiveRender,a=r.large=!!(n&&n.large),s=r.progressiveRender=!!(n&&n.progressiveRender);return(i!==a||o!==s)&&"reset"}}var KV=nr(),fut=jA(),GA=function(){function e(){this.group=new ar,this.uid=jb("viewChart"),this.renderTask=Ug({plan:hut,reset:dut}),this.renderTask.context={view:this}}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,n,i){},e.prototype.highlight=function(t,r,n,i){var o=t.getData(i&&i.dataType);!o||k5(o,i,"emphasis")},e.prototype.downplay=function(t,r,n,i){var o=t.getData(i&&i.dataType);!o||k5(o,i,"normal")},e.prototype.remove=function(t,r){this.group.removeAll()},e.prototype.dispose=function(t,r){},e.prototype.updateView=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.updateLayout=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.updateVisual=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.eachRendered=function(t){ld(this.group,t)},e.markUpdateMethod=function(t,r){KV(t).updateMethod=r},e.protoInitialize=function(){var t=e.prototype;t.type="chart"}(),e}();function T5(e,t,r){e&&dP(e)&&(t==="emphasis"?cv:fv)(e,r)}function k5(e,t,r){var n=Tc(e,t),i=t&&t.highlightKey!=null?wat(t.highlightKey):null;n!=null?U(Ir(n),function(o){T5(e.getItemGraphicEl(o),r,i)}):e.eachItemGraphicEl(function(o){T5(o,r,i)})}vA(GA);Db(GA);function hut(e){return fut(e.model)}function dut(e){var t=e.model,r=e.ecModel,n=e.api,i=e.payload,o=t.pipelineContext.progressiveRender,a=e.view,s=i&&KV(i).updateMethod,l=o?"incrementalPrepareRender":s&&a[s]?s:"render";return l!=="render"&&a[l](t,r,n,i),put[l]}var put={incrementalPrepareRender:{progress:function(e,t){t.view.incrementalRender(e,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(e,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}};const Zi=GA;var T_="\0__throttleOriginMethod",P5="\0__throttleRate",E5="\0__throttleType";function e2(e,t,r){var n,i=0,o=0,a=null,s,l,u,c;t=t||0;function f(){o=new Date().getTime(),a=null,e.apply(l,u||[])}var h=function(){for(var d=[],p=0;p<arguments.length;p++)d[p]=arguments[p];n=new Date().getTime(),l=this,u=d;var g=c||t,m=c||r;c=null,s=n-(m?i:o)-g,clearTimeout(a),m?a=setTimeout(f,g):s>=0?f():a=setTimeout(f,-s),i=n};return h.clear=function(){a&&(clearTimeout(a),a=null)},h.debounceNextCall=function(d){c=d},h}function ZV(e,t,r,n){var i=e[t];if(!!i){var o=i[T_]||i,a=i[E5],s=i[P5];if(s!==r||a!==n){if(r==null||!n)return e[t]=o;i=e[t]=e2(o,r,n==="debounce"),i[T_]=o,i[E5]=n,i[P5]=r}return i}}function kP(e,t){var r=e[t];r&&r[T_]&&(r.clear&&r.clear(),e[t]=r[T_])}var C5=nr(),A5={itemStyle:uv(iV,!0),lineStyle:uv(nV,!0)},gut={lineStyle:"stroke",itemStyle:"fill"};function qV(e,t){var r=e.visualStyleMapper||A5[t];return r||(console.warn("Unkown style type '"+t+"'."),A5.itemStyle)}function JV(e,t){var r=e.visualDrawType||gut[t];return r||(console.warn("Unkown style type '"+t+"'."),"fill")}var vut={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData(),n=e.visualStyleAccessPath||"itemStyle",i=e.getModel(n),o=qV(e,n),a=o(i),s=i.getShallow("decal");s&&(r.setVisual("decal",s),s.dirty=!0);var l=JV(e,n),u=a[l],c=ue(u)?u:null,f=a.fill==="auto"||a.stroke==="auto";if(!a[l]||c||f){var h=e.getColorFromPalette(e.name,null,t.getSeriesCount());a[l]||(a[l]=h,r.setVisual("colorFromPalette",!0)),a.fill=a.fill==="auto"||ue(a.fill)?h:a.fill,a.stroke=a.stroke==="auto"||ue(a.stroke)?h:a.stroke}if(r.setVisual("style",a),r.setVisual("drawType",l),!t.isSeriesFiltered(e)&&c)return r.setVisual("colorFromPalette",!1),{dataEach:function(d,p){var g=e.getDataParams(p),m=_t({},a);m[l]=c(g),d.setItemVisual(p,"style",m)}}}},ip=new cn,mut={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!(e.ignoreStyleOnData||t.isSeriesFiltered(e))){var r=e.getData(),n=e.visualStyleAccessPath||"itemStyle",i=qV(e,n),o=r.getVisual("drawType");return{dataEach:r.hasItemOption?function(a,s){var l=a.getRawDataItem(s);if(l&&l[n]){ip.option=l[n];var u=i(ip),c=a.ensureUniqueItemVisual(s,"style");_t(c,u),ip.option.decal&&(a.setItemVisual(s,"decal",ip.option.decal),ip.option.decal.dirty=!0),o in u&&a.setItemVisual(s,"colorFromPalette",!1)}}:null}}}},yut={performRawSeries:!0,overallReset:function(e){var t=he();e.eachSeries(function(r){var n=r.getColorBy();if(!r.isColorBySeries()){var i=r.type+"-"+n,o=t.get(i);o||(o={},t.set(i,o)),C5(r).scope=o}}),e.eachSeries(function(r){if(!(r.isColorBySeries()||e.isSeriesFiltered(r))){var n=r.getRawData(),i={},o=r.getData(),a=C5(r).scope,s=r.visualStyleAccessPath||"itemStyle",l=JV(r,s);o.each(function(u){var c=o.getRawIndex(u);i[c]=u}),n.each(function(u){var c=i[u],f=o.getItemVisual(c,"colorFromPalette");if(f){var h=o.ensureUniqueItemVisual(c,"style"),d=n.getName(u)||u+"",p=n.count();h[l]=r.getColorFromPalette(d,a,p)}})}})}},ym=Math.PI;function _ut(e,t){t=t||{},Ee(t,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var r=new ar,n=new Lr({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});r.add(n);var i=new Or({style:{text:t.text,fill:t.textColor,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily},zlevel:t.zlevel,z:10001}),o=new Lr({style:{fill:"none"},textContent:i,textConfig:{position:"right",distance:10},zlevel:t.zlevel,z:10001});r.add(o);var a;return t.showSpinner&&(a=new PA({shape:{startAngle:-ym/2,endAngle:-ym/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001}),a.animateShape(!0).when(1e3,{endAngle:ym*3/2}).start("circularInOut"),a.animateShape(!0).when(1e3,{startAngle:ym*3/2}).delay(300).start("circularInOut"),r.add(a)),r.resize=function(){var s=i.getBoundingRect().width,l=t.showSpinner?t.spinnerRadius:0,u=(e.getWidth()-l*2-(t.showSpinner&&s?10:0)-s)/2-(t.showSpinner&&s?0:5+s/2)+(t.showSpinner?0:s/2)+(s?0:l),c=e.getHeight()/2;t.showSpinner&&a.setShape({cx:u,cy:c}),o.setShape({x:u-l,y:c-l,width:l*2,height:l*2}),n.setShape({x:0,y:0,width:e.getWidth(),height:e.getHeight()})},r.resize(),r}var but=function(){function e(t,r,n,i){this._stageTaskMap=he(),this.ecInstance=t,this.api=r,n=this._dataProcessorHandlers=n.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=n.concat(i)}return e.prototype.restoreData=function(t,r){t.restoreData(r),this._stageTaskMap.each(function(n){var i=n.overallTask;i&&i.dirty()})},e.prototype.getPerformArgs=function(t,r){if(!!t.__pipeline){var n=this._pipelineMap.get(t.__pipeline.id),i=n.context,o=!r&&n.progressiveEnabled&&(!i||i.progressiveRender)&&t.__idxInPipeline>n.blockIndex,a=o?n.step:null,s=i&&i.modDataCount,l=s!=null?Math.ceil(s/a):null;return{step:a,modBy:l,modDataCount:s}}},e.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},e.prototype.updateStreamModes=function(t,r){var n=this._pipelineMap.get(t.uid),i=t.getData(),o=i.count(),a=n.progressiveEnabled&&r.incrementalPrepareRender&&o>=n.threshold,s=t.get("large")&&o>=t.get("largeThreshold"),l=t.get("progressiveChunkMode")==="mod"?o:null;t.pipelineContext=n.context={progressiveRender:a,modDataCount:l,large:s}},e.prototype.restorePipelines=function(t){var r=this,n=r._pipelineMap=he();t.eachSeries(function(i){var o=i.getProgressive(),a=i.uid;n.set(a,{id:a,head:null,tail:null,threshold:i.getProgressiveThreshold(),progressiveEnabled:o&&!(i.preventIncremental&&i.preventIncremental()),blockIndex:-1,step:Math.round(o||700),count:0}),r._pipe(i,i.dataTask)})},e.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,r=this.api.getModel(),n=this.api;U(this._allHandlers,function(i){var o=t.get(i.uid)||t.set(i.uid,{}),a="";Do(!(i.reset&&i.overallReset),a),i.reset&&this._createSeriesStageTask(i,o,r,n),i.overallReset&&this._createOverallStageTask(i,o,r,n)},this)},e.prototype.prepareView=function(t,r,n,i){var o=t.renderTask,a=o.context;a.model=r,a.ecModel=n,a.api=i,o.__block=!t.incrementalPrepareRender,this._pipe(r,o)},e.prototype.performDataProcessorTasks=function(t,r){this._performStageTasks(this._dataProcessorHandlers,t,r,{block:!0})},e.prototype.performVisualTasks=function(t,r,n){this._performStageTasks(this._visualHandlers,t,r,n)},e.prototype._performStageTasks=function(t,r,n,i){i=i||{};var o=!1,a=this;U(t,function(l,u){if(!(i.visualType&&i.visualType!==l.visualType)){var c=a._stageTaskMap.get(l.uid),f=c.seriesTaskMap,h=c.overallTask;if(h){var d,p=h.agentStubMap;p.each(function(m){s(i,m)&&(m.dirty(),d=!0)}),d&&h.dirty(),a.updatePayload(h,n);var g=a.getPerformArgs(h,i.block);p.each(function(m){m.perform(g)}),h.perform(g)&&(o=!0)}else f&&f.each(function(m,v){s(i,m)&&m.dirty();var y=a.getPerformArgs(m,i.block);y.skip=!l.performRawSeries&&r.isSeriesFiltered(m.context.model),a.updatePayload(m,n),m.perform(y)&&(o=!0)})}});function s(l,u){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(u.__pipeline.id))}this.unfinished=o||this.unfinished},e.prototype.performSeriesTasks=function(t){var r;t.eachSeries(function(n){r=n.dataTask.perform()||r}),this.unfinished=r||this.unfinished},e.prototype.plan=function(){this._pipelineMap.each(function(t){var r=t.tail;do{if(r.__block){t.blockIndex=r.__idxInPipeline;break}r=r.getUpstream()}while(r)})},e.prototype.updatePayload=function(t,r){r!=="remain"&&(t.context.payload=r)},e.prototype._createSeriesStageTask=function(t,r,n,i){var o=this,a=r.seriesTaskMap,s=r.seriesTaskMap=he(),l=t.seriesType,u=t.getTargetSeries;t.createOnAllSeries?n.eachRawSeries(c):l?n.eachRawSeriesByType(l,c):u&&u(n,i).each(c);function c(f){var h=f.uid,d=s.set(h,a&&a.get(h)||Ug({plan:Put,reset:Eut,count:Aut}));d.context={model:f,ecModel:n,api:i,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:o},o._pipe(f,d)}},e.prototype._createOverallStageTask=function(t,r,n,i){var o=this,a=r.overallTask=r.overallTask||Ug({reset:wut});a.context={ecModel:n,api:i,overallReset:t.overallReset,scheduler:o};var s=a.agentStubMap,l=a.agentStubMap=he(),u=t.seriesType,c=t.getTargetSeries,f=!0,h=!1,d="";Do(!t.createOnAllSeries,d),u?n.eachRawSeriesByType(u,p):c?c(n,i).each(p):(f=!1,U(n.getSeries(),p));function p(g){var m=g.uid,v=l.set(m,s&&s.get(m)||(h=!0,Ug({reset:Sut,onDirty:kut})));v.context={model:g,overallProgress:f},v.agent=a,v.__block=f,o._pipe(g,v)}h&&a.dirty()},e.prototype._pipe=function(t,r){var n=t.uid,i=this._pipelineMap.get(n);!i.head&&(i.head=r),i.tail&&i.tail.pipe(r),i.tail=r,r.__idxInPipeline=i.count++,r.__pipeline=i},e.wrapStageHandler=function(t,r){return ue(t)&&(t={overallReset:t,seriesType:xut(t)}),t.uid=jb("stageHandler"),r&&(t.visualType=r),t},e}();function wut(e){e.overallReset(e.ecModel,e.api,e.payload)}function Sut(e){return e.overallProgress&&Tut}function Tut(){this.agent.dirty(),this.getDownstream().dirty()}function kut(){this.agent&&this.agent.dirty()}function Put(e){return e.plan?e.plan(e.model,e.ecModel,e.api,e.payload):null}function Eut(e){e.useClearVisual&&e.data.clearAllVisual();var t=e.resetDefines=Ir(e.reset(e.model,e.ecModel,e.api,e.payload));return t.length>1?Bt(t,function(r,n){return QV(n)}):Cut}var Cut=QV(0);function QV(e){return function(t,r){var n=r.data,i=r.resetDefines[e];if(i&&i.dataEach)for(var o=t.start;o<t.end;o++)i.dataEach(n,o);else i&&i.progress&&i.progress(t,n)}}function Aut(e){return e.data.count()}function xut(e){k_=null;try{e(_v,tU)}catch{}return k_}var _v={},tU={},k_;eU(_v,PV);eU(tU,EV);_v.eachSeriesByType=_v.eachRawSeriesByType=function(e){k_=e};_v.eachComponent=function(e){e.mainType==="series"&&e.subType&&(k_=e.subType)};function eU(e,t){for(var r in t.prototype)e[r]=xn}const rU=but;var x5=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const Mut={color:x5,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],x5]};var Nn="#B9B8CE",M5="#100C2A",_m=function(){return{axisLine:{lineStyle:{color:Nn}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},I5=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],nU={darkMode:!0,color:I5,backgroundColor:M5,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:Nn}},textStyle:{color:Nn},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:Nn}},dataZoom:{borderColor:"#71708A",textStyle:{color:Nn},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:Nn}},timeline:{lineStyle:{color:Nn},label:{color:Nn},controlStyle:{color:Nn,borderColor:Nn}},calendar:{itemStyle:{color:M5},dayLabel:{color:Nn},monthLabel:{color:Nn},yearLabel:{color:Nn}},timeAxis:_m(),logAxis:_m(),valueAxis:_m(),categoryAxis:_m(),line:{symbol:"circle"},graph:{color:I5},gauge:{title:{color:Nn},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:Nn},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};nU.categoryAxis.splitLine.show=!1;const Iut=nU;var Lut=function(){function e(){}return e.prototype.normalizeQuery=function(t){var r={},n={},i={};if($t(t)){var o=_a(t);r.mainType=o.main||null,r.subType=o.sub||null}else{var a=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1};U(t,function(l,u){for(var c=!1,f=0;f<a.length;f++){var h=a[f],d=u.lastIndexOf(h);if(d>0&&d===u.length-h.length){var p=u.slice(0,d);p!=="data"&&(r.mainType=p,r[h.toLowerCase()]=l,c=!0)}}s.hasOwnProperty(u)&&(n[u]=l,c=!0),c||(i[u]=l)})}return{cptQuery:r,dataQuery:n,otherQuery:i}},e.prototype.filter=function(t,r){var n=this.eventInfo;if(!n)return!0;var i=n.targetEl,o=n.packedEvent,a=n.model,s=n.view;if(!a||!s)return!0;var l=r.cptQuery,u=r.dataQuery;return c(l,a,"mainType")&&c(l,a,"subType")&&c(l,a,"index","componentIndex")&&c(l,a,"name")&&c(l,a,"id")&&c(u,o,"name")&&c(u,o,"dataIndex")&&c(u,o,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(t,r.otherQuery,i,o));function c(f,h,d,p){return f[d]==null||h[p||d]===f[d]}},e.prototype.afterTrigger=function(){this.eventInfo=null},e}(),PP=["symbol","symbolSize","symbolRotate","symbolOffset"],L5=PP.concat(["symbolKeepAspect"]),Out={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData();if(e.legendIcon&&r.setVisual("legendIcon",e.legendIcon),!e.hasSymbolVisual)return;for(var n={},i={},o=!1,a=0;a<PP.length;a++){var s=PP[a],l=e.get(s);ue(l)?(o=!0,i[s]=l):n[s]=l}if(n.symbol=n.symbol||e.defaultSymbol,r.setVisual(_t({legendIcon:e.legendIcon||n.symbol,symbolKeepAspect:e.get("symbolKeepAspect")},n)),t.isSeriesFiltered(e))return;var u=ze(i);function c(f,h){for(var d=e.getRawValue(h),p=e.getDataParams(h),g=0;g<u.length;g++){var m=u[g];f.setItemVisual(h,m,i[m](d,p))}}return{dataEach:o?c:null}}},Rut={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!e.hasSymbolVisual||t.isSeriesFiltered(e))return;var r=e.getData();function n(i,o){for(var a=i.getItemModel(o),s=0;s<L5.length;s++){var l=L5[s],u=a.getShallow(l,!0);u!=null&&i.setItemVisual(o,l,u)}}return{dataEach:r.hasItemOption?n:null}}};function iU(e,t,r){switch(r){case"color":var n=e.getItemVisual(t,"style");return n[e.getVisual("drawType")];case"opacity":return e.getItemVisual(t,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getItemVisual(t,r)}}function r2(e,t){switch(t){case"color":var r=e.getVisual("style");return r[e.getVisual("drawType")];case"opacity":return e.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getVisual(t)}}function Dut(e,t,r,n){switch(r){case"color":var i=e.ensureUniqueItemVisual(t,"style");i[e.getVisual("drawType")]=n,e.setItemVisual(t,"colorFromPalette",!1);break;case"opacity":e.ensureUniqueItemVisual(t,"style").opacity=n;break;case"symbol":case"symbolSize":case"liftZ":e.setItemVisual(t,r,n);break}}function xf(e,t,r,n,i){var o=e+t;r.isSilent(o)||n.eachComponent({mainType:"series",subType:"pie"},function(a){for(var s=a.seriesIndex,l=a.option.selectedMap,u=i.selected,c=0;c<u.length;c++)if(u[c].seriesIndex===s){var f=a.getData(),h=Tc(f,i.fromActionPayload);r.trigger(o,{type:o,seriesId:a.id,name:St(h)?f.getName(h[0]):f.getName(h),selected:$t(l)?l:_t({},l)})}})}function Nut(e,t,r){e.on("selectchanged",function(n){var i=r.getModel();n.isFromClick?(xf("map","selectchanged",t,i,n),xf("pie","selectchanged",t,i,n)):n.fromAction==="select"?(xf("map","selected",t,i,n),xf("pie","selected",t,i,n)):n.fromAction==="unselect"&&(xf("map","unselected",t,i,n),xf("pie","unselected",t,i,n))})}function fh(e,t,r){for(var n;e&&!(t(e)&&(n=e,r));)e=e.__hostTarget||e.parent;return n}var Fut=Math.round(Math.random()*9),$ut=typeof Object.defineProperty=="function",But=function(){function e(){this._id="__ec_inner_"+Fut++}return e.prototype.get=function(t){return this._guard(t)[this._id]},e.prototype.set=function(t,r){var n=this._guard(t);return $ut?Object.defineProperty(n,this._id,{value:r,enumerable:!1,configurable:!0}):n[this._id]=r,this},e.prototype.delete=function(t){return this.has(t)?(delete this._guard(t)[this._id],!0):!1},e.prototype.has=function(t){return!!this._guard(t)[this._id]},e.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},e}();const zut=But;var Vut=Ne.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,n=t.cy,i=t.width/2,o=t.height/2;e.moveTo(r,n-o),e.lineTo(r+i,n+o),e.lineTo(r-i,n+o),e.closePath()}}),Uut=Ne.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,n=t.cy,i=t.width/2,o=t.height/2;e.moveTo(r,n-o),e.lineTo(r+i,n),e.lineTo(r,n+o),e.lineTo(r-i,n),e.closePath()}}),Wut=Ne.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.x,n=t.y,i=t.width/5*3,o=Math.max(i,t.height),a=i/2,s=a*a/(o-a),l=n-o+a+s,u=Math.asin(s/a),c=Math.cos(u)*a,f=Math.sin(u),h=Math.cos(u),d=a*.6,p=a*.7;e.moveTo(r-c,l+s),e.arc(r,l,a,Math.PI-u,Math.PI*2+u),e.bezierCurveTo(r+c-f*d,l+s+h*d,r,n-p,r,n),e.bezierCurveTo(r,n-p,r-c+f*d,l+s+h*d,r-c,l+s),e.closePath()}}),jut=Ne.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.height,n=t.width,i=t.x,o=t.y,a=n/3*2;e.moveTo(i,o),e.lineTo(i+a,o+r),e.lineTo(i,o+r/4*3),e.lineTo(i-a,o+r),e.lineTo(i,o),e.closePath()}}),Gut={line:Wl,rect:Lr,roundRect:Lr,square:Lr,circle:kA,diamond:Uut,pin:Wut,arrow:jut,triangle:Vut},Hut={line:function(e,t,r,n,i){i.x1=e,i.y1=t+n/2,i.x2=e+r,i.y2=t+n/2},rect:function(e,t,r,n,i){i.x=e,i.y=t,i.width=r,i.height=n},roundRect:function(e,t,r,n,i){i.x=e,i.y=t,i.width=r,i.height=n,i.r=Math.min(r,n)/4},square:function(e,t,r,n,i){var o=Math.min(r,n);i.x=e,i.y=t,i.width=o,i.height=o},circle:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.r=Math.min(r,n)/2},diamond:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.width=r,i.height=n},pin:function(e,t,r,n,i){i.x=e+r/2,i.y=t+n/2,i.width=r,i.height=n},arrow:function(e,t,r,n,i){i.x=e+r/2,i.y=t+n/2,i.width=r,i.height=n},triangle:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.width=r,i.height=n}},EP={};U(Gut,function(e,t){EP[t]=new e});var Xut=Ne.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(e,t,r){var n=g_(e,t,r),i=this.shape;return i&&i.symbolType==="pin"&&t.position==="inside"&&(n.y=r.y+r.height*.4),n},buildPath:function(e,t,r){var n=t.symbolType;if(n!=="none"){var i=EP[n];i||(n="rect",i=EP[n]),Hut[n](t.x,t.y,t.width,t.height,i.shape),i.buildPath(e,i.shape,r)}}});function Yut(e,t){if(this.type!=="image"){var r=this.style;this.__isEmptyBrush?(r.stroke=e,r.fill=t||"#fff",r.lineWidth=2):this.shape.symbolType==="line"?r.stroke=e:r.fill=e,this.markRedraw()}}function No(e,t,r,n,i,o,a){var s=e.indexOf("empty")===0;s&&(e=e.substr(5,1).toLowerCase()+e.substr(6));var l;return e.indexOf("image://")===0?l=Zz(e.slice(8),new Le(t,r,n,i),a?"center":"cover"):e.indexOf("path://")===0?l=Vb(e.slice(7),{},new Le(t,r,n,i),a?"center":"cover"):l=new Xut({shape:{symbolType:e,x:t,y:r,width:n,height:i}}),l.__isEmptyBrush=s,l.setColor=Yut,o&&l.setColor(o),l}function oU(e){return St(e)||(e=[+e,+e]),[e[0]||0,e[1]||0]}function HA(e,t){if(e!=null)return St(e)||(e=[e,e]),[Er(e[0],t[0])||0,Er(_e(e[1],e[0]),t[1])||0]}function tc(e){return isFinite(e)}function Kut(e,t,r){var n=t.x==null?0:t.x,i=t.x2==null?1:t.x2,o=t.y==null?0:t.y,a=t.y2==null?0:t.y2;t.global||(n=n*r.width+r.x,i=i*r.width+r.x,o=o*r.height+r.y,a=a*r.height+r.y),n=tc(n)?n:0,i=tc(i)?i:1,o=tc(o)?o:0,a=tc(a)?a:0;var s=e.createLinearGradient(n,o,i,a);return s}function Zut(e,t,r){var n=r.width,i=r.height,o=Math.min(n,i),a=t.x==null?.5:t.x,s=t.y==null?.5:t.y,l=t.r==null?.5:t.r;t.global||(a=a*n+r.x,s=s*i+r.y,l=l*o),a=tc(a)?a:.5,s=tc(s)?s:.5,l=l>=0&&tc(l)?l:.5;var u=e.createRadialGradient(a,s,0,a,s,l);return u}function CP(e,t,r){for(var n=t.type==="radial"?Zut(e,t,r):Kut(e,t,r),i=t.colorStops,o=0;o<i.length;o++)n.addColorStop(i[o].offset,i[o].color);return n}function qut(e,t){if(e===t||!e&&!t)return!1;if(!e||!t||e.length!==t.length)return!0;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!0;return!1}function bm(e){return parseInt(e,10)}function wm(e,t,r){var n=["width","height"][t],i=["clientWidth","clientHeight"][t],o=["paddingLeft","paddingTop"][t],a=["paddingRight","paddingBottom"][t];if(r[n]!=null&&r[n]!=="auto")return parseFloat(r[n]);var s=document.defaultView.getComputedStyle(e);return(e[i]||bm(s[n])||bm(e.style[n]))-(bm(s[o])||0)-(bm(s[a])||0)|0}function Jut(e,t){return!e||e==="solid"||!(t>0)?null:e==="dashed"?[4*t,2*t]:e==="dotted"?[t]:He(e)?[e]:St(e)?e:null}function aU(e){var t=e.style,r=t.lineDash&&t.lineWidth>0&&Jut(t.lineDash,t.lineWidth),n=t.lineDashOffset;if(r){var i=t.strokeNoScale&&e.getLineScale?e.getLineScale():1;i&&i!==1&&(r=Bt(r,function(o){return o/i}),n/=i)}return[r,n]}var Qut=new kc(!0);function P_(e){var t=e.stroke;return!(t==null||t==="none"||!(e.lineWidth>0))}function O5(e){return typeof e=="string"&&e!=="none"}function E_(e){var t=e.fill;return t!=null&&t!=="none"}function R5(e,t){if(t.fillOpacity!=null&&t.fillOpacity!==1){var r=e.globalAlpha;e.globalAlpha=t.fillOpacity*t.opacity,e.fill(),e.globalAlpha=r}else e.fill()}function D5(e,t){if(t.strokeOpacity!=null&&t.strokeOpacity!==1){var r=e.globalAlpha;e.globalAlpha=t.strokeOpacity*t.opacity,e.stroke(),e.globalAlpha=r}else e.stroke()}function AP(e,t,r){var n=uz(t.image,t.__image,r);if(Nb(n)){var i=e.createPattern(n,t.repeat||"repeat");if(typeof DOMMatrix=="function"&&i&&i.setTransform){var o=new DOMMatrix;o.translateSelf(t.x||0,t.y||0),o.rotateSelf(0,0,(t.rotation||0)*snt),o.scaleSelf(t.scaleX||1,t.scaleY||1),i.setTransform(o)}return i}}function tct(e,t,r,n){var i,o=P_(r),a=E_(r),s=r.strokePercent,l=s<1,u=!t.path;(!t.silent||l)&&u&&t.createPathProxy();var c=t.path||Qut,f=t.__dirty;if(!n){var h=r.fill,d=r.stroke,p=a&&!!h.colorStops,g=o&&!!d.colorStops,m=a&&!!h.image,v=o&&!!d.image,y=void 0,b=void 0,w=void 0,T=void 0,S=void 0;(p||g)&&(S=t.getBoundingRect()),p&&(y=f?CP(e,h,S):t.__canvasFillGradient,t.__canvasFillGradient=y),g&&(b=f?CP(e,d,S):t.__canvasStrokeGradient,t.__canvasStrokeGradient=b),m&&(w=f||!t.__canvasFillPattern?AP(e,h,t):t.__canvasFillPattern,t.__canvasFillPattern=w),v&&(T=f||!t.__canvasStrokePattern?AP(e,d,t):t.__canvasStrokePattern,t.__canvasStrokePattern=w),p?e.fillStyle=y:m&&(w?e.fillStyle=w:a=!1),g?e.strokeStyle=b:v&&(T?e.strokeStyle=T:o=!1)}var k=t.getGlobalScale();c.setScale(k[0],k[1],t.segmentIgnoreThreshold);var E,P;e.setLineDash&&r.lineDash&&(i=aU(t),E=i[0],P=i[1]);var C=!0;(u||f&rh)&&(c.setDPR(e.dpr),l?c.setContext(null):(c.setContext(e),C=!1),c.reset(),t.buildPath(c,t.shape,n),c.toStatic(),t.pathUpdated()),C&&c.rebuildPath(e,l?s:1),E&&(e.setLineDash(E),e.lineDashOffset=P),n||(r.strokeFirst?(o&&D5(e,r),a&&R5(e,r)):(a&&R5(e,r),o&&D5(e,r))),E&&e.setLineDash([])}function ect(e,t,r){var n=t.__image=uz(r.image,t.__image,t,t.onload);if(!(!n||!Nb(n))){var i=r.x||0,o=r.y||0,a=t.getWidth(),s=t.getHeight(),l=n.width/n.height;if(a==null&&s!=null?a=s*l:s==null&&a!=null?s=a/l:a==null&&s==null&&(a=n.width,s=n.height),r.sWidth&&r.sHeight){var u=r.sx||0,c=r.sy||0;e.drawImage(n,u,c,r.sWidth,r.sHeight,i,o,a,s)}else if(r.sx&&r.sy){var u=r.sx,c=r.sy,f=a-u,h=s-c;e.drawImage(n,u,c,f,h,i,o,a,s)}else e.drawImage(n,i,o,a,s)}}function rct(e,t,r){var n,i=r.text;if(i!=null&&(i+=""),i){e.font=r.font||wc,e.textAlign=r.textAlign,e.textBaseline=r.textBaseline;var o=void 0,a=void 0;e.setLineDash&&r.lineDash&&(n=aU(t),o=n[0],a=n[1]),o&&(e.setLineDash(o),e.lineDashOffset=a),r.strokeFirst?(P_(r)&&e.strokeText(i,r.x,r.y),E_(r)&&e.fillText(i,r.x,r.y)):(E_(r)&&e.fillText(i,r.x,r.y),P_(r)&&e.strokeText(i,r.x,r.y)),o&&e.setLineDash([])}}var N5=["shadowBlur","shadowOffsetX","shadowOffsetY"],F5=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function sU(e,t,r,n,i){var o=!1;if(!n&&(r=r||{},t===r))return!1;if(n||t.opacity!==r.opacity){Qn(e,i),o=!0;var a=Math.max(Math.min(t.opacity,1),0);e.globalAlpha=isNaN(a)?cc.opacity:a}(n||t.blend!==r.blend)&&(o||(Qn(e,i),o=!0),e.globalCompositeOperation=t.blend||cc.blend);for(var s=0;s<N5.length;s++){var l=N5[s];(n||t[l]!==r[l])&&(o||(Qn(e,i),o=!0),e[l]=e.dpr*(t[l]||0))}return(n||t.shadowColor!==r.shadowColor)&&(o||(Qn(e,i),o=!0),e.shadowColor=t.shadowColor||cc.shadowColor),o}function $5(e,t,r,n,i){var o=bv(t,i.inHover),a=n?null:r&&bv(r,i.inHover)||{};if(o===a)return!1;var s=sU(e,o,a,n,i);if((n||o.fill!==a.fill)&&(s||(Qn(e,i),s=!0),O5(o.fill)&&(e.fillStyle=o.fill)),(n||o.stroke!==a.stroke)&&(s||(Qn(e,i),s=!0),O5(o.stroke)&&(e.strokeStyle=o.stroke)),(n||o.opacity!==a.opacity)&&(s||(Qn(e,i),s=!0),e.globalAlpha=o.opacity==null?1:o.opacity),t.hasStroke()){var l=o.lineWidth,u=l/(o.strokeNoScale&&t.getLineScale?t.getLineScale():1);e.lineWidth!==u&&(s||(Qn(e,i),s=!0),e.lineWidth=u)}for(var c=0;c<F5.length;c++){var f=F5[c],h=f[0];(n||o[h]!==a[h])&&(s||(Qn(e,i),s=!0),e[h]=o[h]||f[1])}return s}function nct(e,t,r,n,i){return sU(e,bv(t,i.inHover),r&&bv(r,i.inHover),n,i)}function lU(e,t){var r=t.transform,n=e.dpr||1;r?e.setTransform(n*r[0],n*r[1],n*r[2],n*r[3],n*r[4],n*r[5]):e.setTransform(n,0,0,n,0,0)}function ict(e,t,r){for(var n=!1,i=0;i<e.length;i++){var o=e[i];n=n||o.isZeroArea(),lU(t,o),t.beginPath(),o.buildPath(t,o.shape),t.clip()}r.allClipped=n}function oct(e,t){return e&&t?e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||e[4]!==t[4]||e[5]!==t[5]:!(!e&&!t)}var B5=1,z5=2,V5=3,U5=4;function act(e){var t=E_(e),r=P_(e);return!(e.lineDash||!(+t^+r)||t&&typeof e.fill!="string"||r&&typeof e.stroke!="string"||e.strokePercent<1||e.strokeOpacity<1||e.fillOpacity<1)}function Qn(e,t){t.batchFill&&e.fill(),t.batchStroke&&e.stroke(),t.batchFill="",t.batchStroke=""}function bv(e,t){return t&&e.__hoverStyle||e.style}function uU(e,t){ec(e,t,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function ec(e,t,r,n){var i=t.transform;if(!t.shouldBePainted(r.viewWidth,r.viewHeight,!1,!1)){t.__dirty&=~yi,t.__isRendered=!1;return}var o=t.__clipPaths,a=r.prevElClipPaths,s=!1,l=!1;if((!a||qut(o,a))&&(a&&a.length&&(Qn(e,r),e.restore(),l=s=!0,r.prevElClipPaths=null,r.allClipped=!1,r.prevEl=null),o&&o.length&&(Qn(e,r),e.save(),ict(o,e,r),s=!0),r.prevElClipPaths=o),r.allClipped){t.__isRendered=!1;return}t.beforeBrush&&t.beforeBrush(),t.innerBeforeBrush();var u=r.prevEl;u||(l=s=!0);var c=t instanceof Ne&&t.autoBatch&&act(t.style);s||oct(i,u.transform)?(Qn(e,r),lU(e,t)):c||Qn(e,r);var f=bv(t,r.inHover);t instanceof Ne?(r.lastDrawType!==B5&&(l=!0,r.lastDrawType=B5),$5(e,t,u,l,r),(!c||!r.batchFill&&!r.batchStroke)&&e.beginPath(),tct(e,t,f,c),c&&(r.batchFill=f.fill||"",r.batchStroke=f.stroke||"")):t instanceof lP?(r.lastDrawType!==V5&&(l=!0,r.lastDrawType=V5),$5(e,t,u,l,r),rct(e,t,f)):t instanceof As?(r.lastDrawType!==z5&&(l=!0,r.lastDrawType=z5),nct(e,t,u,l,r),ect(e,t,f)):t.getTemporalDisplayables&&(r.lastDrawType!==U5&&(l=!0,r.lastDrawType=U5),sct(e,t,r)),c&&n&&Qn(e,r),t.innerAfterBrush(),t.afterBrush&&t.afterBrush(),r.prevEl=t,t.__dirty=0,t.__isRendered=!0}function sct(e,t,r){var n=t.getDisplayables(),i=t.getTemporalDisplayables();e.save();var o={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:r.viewWidth,viewHeight:r.viewHeight,inHover:r.inHover},a,s;for(a=t.getCursor(),s=n.length;a<s;a++){var l=n[a];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),ec(e,l,o,a===s-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),o.prevEl=l}for(var u=0,c=i.length;u<c;u++){var l=i[u];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),ec(e,l,o,u===c-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),o.prevEl=l}t.clearTemporalDisplayables(),t.notClear=!0,e.restore()}var TS=new zut,W5=new Jv(100),j5=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function C_(e,t){if(e==="none")return null;var r=t.getDevicePixelRatio(),n=t.getZr(),i=n.painter.type==="svg";e.dirty&&TS.delete(e);var o=TS.get(e);if(o)return o;var a=Ee(e,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});a.backgroundColor==="none"&&(a.backgroundColor=null);var s={repeat:"repeat"};return l(s),s.rotation=a.rotation,s.scaleX=s.scaleY=i?1:1/r,TS.set(e,s),e.dirty=!1,s;function l(u){for(var c=[r],f=!0,h=0;h<j5.length;++h){var d=a[j5[h]];if(d!=null&&!St(d)&&!$t(d)&&!He(d)&&typeof d!="boolean"){f=!1;break}c.push(d)}var p;if(f){p=c.join(",")+(i?"-svg":"");var g=W5.get(p);g&&(i?u.svgElement=g:u.image=g)}var m=fU(a.dashArrayX),v=lct(a.dashArrayY),y=cU(a.symbol),b=uct(m),w=hU(v),T=!i&&Vc.createCanvas(),S=i&&{tag:"g",attrs:{},key:"dcl",children:[]},k=P(),E;T&&(T.width=k.width*r,T.height=k.height*r,E=T.getContext("2d")),C(),f&&W5.put(p,T||S),u.image=T,u.svgElement=S,u.svgWidth=k.width,u.svgHeight=k.height;function P(){for(var A=1,L=0,R=b.length;L<R;++L)A=r6(A,b[L]);for(var D=1,L=0,R=y.length;L<R;++L)D=r6(D,y[L].length);A*=D;var F=w*b.length*y.length;return{width:Math.max(1,Math.min(A,a.maxTileWidth)),height:Math.max(1,Math.min(F,a.maxTileHeight))}}function C(){E&&(E.clearRect(0,0,T.width,T.height),a.backgroundColor&&(E.fillStyle=a.backgroundColor,E.fillRect(0,0,T.width,T.height)));for(var A=0,L=0;L<v.length;++L)A+=v[L];if(A<=0)return;for(var R=-w,D=0,F=0,z=0;R<k.height;){if(D%2===0){for(var Y=F/2%y.length,K=0,et=0,Tt=0;K<k.width*2;){for(var Ct=0,L=0;L<m[z].length;++L)Ct+=m[z][L];if(Ct<=0)break;if(et%2===0){var vt=(1-a.symbolSize)*.5,wt=K+m[z][et]*vt,Kt=R+v[D]*vt,Z=m[z][et]*a.symbolSize,it=v[D]*a.symbolSize,tt=Tt/2%y[Y].length;bt(wt,Kt,Z,it,y[Y][tt])}K+=m[z][et],++Tt,++et,et===m[z].length&&(et=0)}++z,z===m.length&&(z=0)}R+=v[D],++F,++D,D===v.length&&(D=0)}function bt(kt,It,pt,mt,V){var j=i?1:r,q=No(V,kt*j,It*j,pt*j,mt*j,a.color,a.symbolKeepAspect);if(i){var rt=n.painter.renderOneToVNode(q);rt&&S.children.push(rt)}else uU(E,q)}}}}function cU(e){if(!e||e.length===0)return[["rect"]];if($t(e))return[[e]];for(var t=!0,r=0;r<e.length;++r)if(!$t(e[r])){t=!1;break}if(t)return cU([e]);for(var n=[],r=0;r<e.length;++r)$t(e[r])?n.push([e[r]]):n.push(e[r]);return n}function fU(e){if(!e||e.length===0)return[[0,0]];if(He(e)){var t=Math.ceil(e);return[[t,t]]}for(var r=!0,n=0;n<e.length;++n)if(!He(e[n])){r=!1;break}if(r)return fU([e]);for(var i=[],n=0;n<e.length;++n)if(He(e[n])){var t=Math.ceil(e[n]);i.push([t,t])}else{var t=Bt(e[n],function(s){return Math.ceil(s)});t.length%2===1?i.push(t.concat(t)):i.push(t)}return i}function lct(e){if(!e||typeof e=="object"&&e.length===0)return[0,0];if(He(e)){var t=Math.ceil(e);return[t,t]}var r=Bt(e,function(n){return Math.ceil(n)});return e.length%2?r.concat(r):r}function uct(e){return Bt(e,function(t){return hU(t)})}function hU(e){for(var t=0,r=0;r<e.length;++r)t+=e[r];return e.length%2===1?t*2:t}function cct(e,t){e.eachRawSeries(function(r){if(!e.isSeriesFiltered(r)){var n=r.getData();n.hasItemVisual()&&n.each(function(a){var s=n.getItemVisual(a,"decal");if(s){var l=n.ensureUniqueItemVisual(a,"style");l.decal=C_(s,t)}});var i=n.getVisual("decal");if(i){var o=n.getVisual("style");o.decal=C_(i,t)}}})}var fct=new Vo;const bo=fct;var dU={};function hct(e,t){dU[e]=t}function dct(e){return dU[e]}var pct=typeof window<"u",gct=1,vct=800,mct=900,yct=1e3,_ct=2e3,bct=5e3,pU=1e3,wct=1100,XA=2e3,gU=3e3,Sct=4e3,n2=4500,Tct=4600,kct=5e3,Pct=6e3,vU=7e3,Ect={PROCESSOR:{FILTER:yct,SERIES_FILTER:vct,STATISTIC:bct},VISUAL:{LAYOUT:pU,PROGRESSIVE_LAYOUT:wct,GLOBAL:XA,CHART:gU,POST_CHART_LAYOUT:Tct,COMPONENT:Sct,BRUSH:kct,CHART_ITEM:n2,ARIA:Pct,DECAL:vU}},yn="__flagInMainProcess",Kn="__pendingUpdate",kS="__needsUpdateStatus",G5=/^[a-zA-Z0-9_]+$/,PS="__connectUpdateStatus",H5=0,Cct=1,Act=2;function mU(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(this.isDisposed()){this.id;return}return _U(this,e,t)}}function yU(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return _U(this,e,t)}}function _U(e,t,r){return r[0]=r[0]&&r[0].toLowerCase(),Vo.prototype[t].apply(e,r)}var bU=function(e){Ot(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Vo),wU=bU.prototype;wU.on=yU("on");wU.off=yU("off");var Mf,ES,Sm,Ws,CS,AS,xS,op,ap,X5,Y5,MS,K5,Tm,Z5,SU,Mi,q5,TU=function(e){Ot(t,e);function t(r,n,i){var o=e.call(this,new Lut)||this;o._chartsViews=[],o._chartsMap={},o._componentsViews=[],o._componentsMap={},o._pendingActions=[],i=i||{},$t(n)&&(n=kU[n]),o._dom=r;var a="canvas",s="auto",l=!1,u=o._zr=QI(r,{renderer:i.renderer||a,devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height,ssr:i.ssr,useDirtyRect:_e(i.useDirtyRect,l),useCoarsePointer:_e(i.useCoarsePointer,s),pointerSize:i.pointerSize});o._ssr=i.ssr,o._throttledZrFlush=e2(se(u.flush,u),17),n=oe(n),n&&AV(n,!0),o._theme=n,o._locale=Lst(i.locale||oV),o._coordSysMgr=new $A;var c=o._api=Z5(o);function f(h,d){return h.__prio-d.__prio}return cy(x_,f),cy(xP,f),o._scheduler=new rU(o,c,xP,x_),o._messageCenter=new bU,o._initEvents(),o.resize=se(o.resize,o),u.animation.on("frame",o._onframe,o),X5(u,o),Y5(u,o),l_(o),o}return t.prototype._onframe=function(){if(!this._disposed){q5(this);var r=this._scheduler;if(this[Kn]){var n=this[Kn].silent;this[yn]=!0;try{Mf(this),Ws.update.call(this,null,this[Kn].updateParams)}catch(l){throw this[yn]=!1,this[Kn]=null,l}this._zr.flush(),this[yn]=!1,this[Kn]=null,op.call(this,n),ap.call(this,n)}else if(r.unfinished){var i=gct,o=this._model,a=this._api;r.unfinished=!1;do{var s=+new Date;r.performSeriesTasks(o),r.performDataProcessorTasks(o),AS(this,o),r.performVisualTasks(o),Tm(this,this._model,a,"remain",{}),i-=+new Date-s}while(i>0&&r.unfinished);r.unfinished||this._zr.flush()}}},t.prototype.getDom=function(){return this._dom},t.prototype.getId=function(){return this.id},t.prototype.getZr=function(){return this._zr},t.prototype.isSSR=function(){return this._ssr},t.prototype.setOption=function(r,n,i){if(!this[yn]){if(this._disposed){this.id;return}var o,a,s;if(Yt(n)&&(i=n.lazyUpdate,o=n.silent,a=n.replaceMerge,s=n.transition,n=n.notMerge),this[yn]=!0,!this._model||n){var l=new dlt(this._api),u=this._theme,c=this._model=new PV;c.scheduler=this._scheduler,c.ssr=this._ssr,c.init(null,null,null,u,this._locale,l)}this._model.setOption(r,{replaceMerge:a},MP);var f={seriesTransition:s,optionChanged:!0};if(i)this[Kn]={silent:o,updateParams:f},this[yn]=!1,this.getZr().wakeUp();else{try{Mf(this),Ws.update.call(this,null,f)}catch(h){throw this[Kn]=null,this[yn]=!1,h}this._ssr||this._zr.flush(),this[Kn]=null,this[yn]=!1,op.call(this,o),ap.call(this,o)}}},t.prototype.setTheme=function(){},t.prototype.getModel=function(){return this._model},t.prototype.getOption=function(){return this._model&&this._model.getOption()},t.prototype.getWidth=function(){return this._zr.getWidth()},t.prototype.getHeight=function(){return this._zr.getHeight()},t.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||pct&&window.devicePixelRatio||1},t.prototype.getRenderedCanvas=function(r){return this.renderToCanvas(r)},t.prototype.renderToCanvas=function(r){r=r||{};var n=this._zr.painter;return n.getRenderedCanvas({backgroundColor:r.backgroundColor||this._model.get("backgroundColor"),pixelRatio:r.pixelRatio||this.getDevicePixelRatio()})},t.prototype.renderToSVGString=function(r){r=r||{};var n=this._zr.painter;return n.renderToString({useViewBox:r.useViewBox})},t.prototype.getSvgDataURL=function(){if(!!me.svgSupported){var r=this._zr,n=r.storage.getDisplayList();return U(n,function(i){i.stopAnimation(null,!0)}),r.painter.toDataURL()}},t.prototype.getDataURL=function(r){if(this._disposed){this.id;return}r=r||{};var n=r.excludeComponents,i=this._model,o=[],a=this;U(n,function(l){i.eachComponent({mainType:l},function(u){var c=a._componentsMap[u.__viewId];c.group.ignore||(o.push(c),c.group.ignore=!0)})});var s=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(r).toDataURL("image/"+(r&&r.type||"png"));return U(o,function(l){l.group.ignore=!1}),s},t.prototype.getConnectedDataURL=function(r){if(this._disposed){this.id;return}var n=r.type==="svg",i=this.group,o=Math.min,a=Math.max,s=1/0;if(J5[i]){var l=s,u=s,c=-s,f=-s,h=[],d=r&&r.pixelRatio||this.getDevicePixelRatio();U(jg,function(b,w){if(b.group===i){var T=n?b.getZr().painter.getSvgDom().innerHTML:b.renderToCanvas(oe(r)),S=b.getDom().getBoundingClientRect();l=o(S.left,l),u=o(S.top,u),c=a(S.right,c),f=a(S.bottom,f),h.push({dom:T,left:S.left,top:S.top})}}),l*=d,u*=d,c*=d,f*=d;var p=c-l,g=f-u,m=Vc.createCanvas(),v=QI(m,{renderer:n?"svg":"canvas"});if(v.resize({width:p,height:g}),n){var y="";return U(h,function(b){var w=b.left-l,T=b.top-u;y+='<g transform="translate('+w+","+T+')">'+b.dom+"</g>"}),v.painter.getSvgRoot().innerHTML=y,r.connectedBackgroundColor&&v.painter.setBackgroundColor(r.connectedBackgroundColor),v.refreshImmediately(),v.painter.toDataURL()}else return r.connectedBackgroundColor&&v.add(new Lr({shape:{x:0,y:0,width:p,height:g},style:{fill:r.connectedBackgroundColor}})),U(h,function(b){var w=new As({style:{x:b.left*d-l,y:b.top*d-u,image:b.dom}});v.add(w)}),v.refreshImmediately(),m.toDataURL("image/"+(r&&r.type||"png"))}else return this.getDataURL(r)},t.prototype.convertToPixel=function(r,n){return CS(this,"convertToPixel",r,n)},t.prototype.convertFromPixel=function(r,n){return CS(this,"convertFromPixel",r,n)},t.prototype.containPixel=function(r,n){if(this._disposed){this.id;return}var i=this._model,o,a=Zw(i,r);return U(a,function(s,l){l.indexOf("Models")>=0&&U(s,function(u){var c=u.coordinateSystem;if(c&&c.containPoint)o=o||!!c.containPoint(n);else if(l==="seriesModels"){var f=this._chartsMap[u.__viewId];f&&f.containPoint&&(o=o||f.containPoint(n,u))}},this)},this),!!o},t.prototype.getVisual=function(r,n){var i=this._model,o=Zw(i,r,{defaultMainType:"series"}),a=o.seriesModel,s=a.getData(),l=o.hasOwnProperty("dataIndexInside")?o.dataIndexInside:o.hasOwnProperty("dataIndex")?s.indexOfRawIndex(o.dataIndex):null;return l!=null?iU(s,l,n):r2(s,n)},t.prototype.getViewOfComponentModel=function(r){return this._componentsMap[r.__viewId]},t.prototype.getViewOfSeriesModel=function(r){return this._chartsMap[r.__viewId]},t.prototype._initEvents=function(){var r=this;U(xct,function(n){var i=function(o){var a=r.getModel(),s=o.target,l,u=n==="globalout";if(u?l={}:s&&fh(s,function(p){var g=Me(p);if(g&&g.dataIndex!=null){var m=g.dataModel||a.getSeriesByIndex(g.seriesIndex);return l=m&&m.getDataParams(g.dataIndex,g.dataType)||{},!0}else if(g.eventData)return l=_t({},g.eventData),!0},!0),l){var c=l.componentType,f=l.componentIndex;(c==="markLine"||c==="markPoint"||c==="markArea")&&(c="series",f=l.seriesIndex);var h=c&&f!=null&&a.getComponent(c,f),d=h&&r[h.mainType==="series"?"_chartsMap":"_componentsMap"][h.__viewId];l.event=o,l.type=n,r._$eventProcessor.eventInfo={targetEl:s,packedEvent:l,model:h,view:d},r.trigger(n,l)}};i.zrEventfulCallAtLast=!0,r._zr.on(n,i,r)}),U(Wg,function(n,i){r._messageCenter.on(i,function(o){this.trigger(i,o)},r)}),U(["selectchanged"],function(n){r._messageCenter.on(n,function(i){this.trigger(n,i)},r)}),Nut(this._messageCenter,this,this._api)},t.prototype.isDisposed=function(){return this._disposed},t.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},t.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var r=this.getDom();r&&az(this.getDom(),KA,"");var n=this,i=n._api,o=n._model;U(n._componentsViews,function(a){a.dispose(o,i)}),U(n._chartsViews,function(a){a.dispose(o,i)}),n._zr.dispose(),n._dom=n._model=n._chartsMap=n._componentsMap=n._chartsViews=n._componentsViews=n._scheduler=n._api=n._zr=n._throttledZrFlush=n._theme=n._coordSysMgr=n._messageCenter=null,delete jg[n.id]},t.prototype.resize=function(r){if(!this[yn]){if(this._disposed){this.id;return}this._zr.resize(r);var n=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!n){var i=n.resetOption("media"),o=r&&r.silent;this[Kn]&&(o==null&&(o=this[Kn].silent),i=!0,this[Kn]=null),this[yn]=!0;try{i&&Mf(this),Ws.update.call(this,{type:"resize",animation:_t({duration:0},r&&r.animation)})}catch(a){throw this[yn]=!1,a}this[yn]=!1,op.call(this,o),ap.call(this,o)}}},t.prototype.showLoading=function(r,n){if(this._disposed){this.id;return}if(Yt(r)&&(n=r,r=""),r=r||"default",this.hideLoading(),!!IP[r]){var i=IP[r](this._api,n),o=this._zr;this._loadingFX=i,o.add(i)}},t.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},t.prototype.makeActionFromEvent=function(r){var n=_t({},r);return n.type=Wg[r.type],n},t.prototype.dispatchAction=function(r,n){if(this._disposed){this.id;return}if(Yt(n)||(n={silent:!!n}),!!A_[r.type]&&!!this._model){if(this[yn]){this._pendingActions.push(r);return}var i=n.silent;xS.call(this,r,i);var o=n.flush;o?this._zr.flush():o!==!1&&me.browser.weChat&&this._throttledZrFlush(),op.call(this,i),ap.call(this,i)}},t.prototype.updateLabelLayout=function(){bo.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},t.prototype.appendData=function(r){if(this._disposed){this.id;return}var n=r.seriesIndex,i=this.getModel(),o=i.getSeriesByIndex(n);o.appendData(r),this._scheduler.unfinished=!0,this.getZr().wakeUp()},t.internalField=function(){Mf=function(f){var h=f._scheduler;h.restorePipelines(f._model),h.prepareStageTasks(),ES(f,!0),ES(f,!1),h.plan()},ES=function(f,h){for(var d=f._model,p=f._scheduler,g=h?f._componentsViews:f._chartsViews,m=h?f._componentsMap:f._chartsMap,v=f._zr,y=f._api,b=0;b<g.length;b++)g[b].__alive=!1;h?d.eachComponent(function(S,k){S!=="series"&&w(k)}):d.eachSeries(w);function w(S){var k=S.__requireNewView;S.__requireNewView=!1;var E="_ec_"+S.id+"_"+S.type,P=!k&&m[E];if(!P){var C=_a(S.type),A=h?eo.getClass(C.main,C.sub):Zi.getClass(C.sub);P=new A,P.init(d,y),m[E]=P,g.push(P),v.add(P.group)}S.__viewId=P.__id=E,P.__alive=!0,P.__model=S,P.group.__ecComponentInfo={mainType:S.mainType,index:S.componentIndex},!h&&p.prepareView(P,S,d,y)}for(var b=0;b<g.length;){var T=g[b];T.__alive?b++:(!h&&T.renderTask.dispose(),v.remove(T.group),T.dispose(d,y),g.splice(b,1),m[T.__id]===T&&delete m[T.__id],T.__id=T.group.__ecComponentInfo=null)}},Sm=function(f,h,d,p,g){var m=f._model;if(m.setUpdatePayload(d),!p){U([].concat(f._componentsViews).concat(f._chartsViews),T);return}var v={};v[p+"Id"]=d[p+"Id"],v[p+"Index"]=d[p+"Index"],v[p+"Name"]=d[p+"Name"];var y={mainType:p,query:v};g&&(y.subType=g);var b=d.excludeSeriesId,w;b!=null&&(w=he(),U(Ir(b),function(S){var k=Ki(S,null);k!=null&&w.set(k,!0)})),m&&m.eachComponent(y,function(S){var k=w&&w.get(S.id)!==null;if(!k)if(I6(d))if(S instanceof Ia)d.type===fc&&!d.notBlur&&!S.get(["emphasis","disabled"])&&dat(S,d,f._api);else{var E=SA(S.mainType,S.componentIndex,d.name,f._api),P=E.focusSelf,C=E.dispatchers;d.type===fc&&P&&!d.notBlur&&fP(S.mainType,S.componentIndex,f._api),C&&U(C,function(A){d.type===fc?cv(A):fv(A)})}else pP(d)&&S instanceof Ia&&(vat(S,d,f._api),x6(S),Mi(f))},f),m&&m.eachComponent(y,function(S){var k=w&&w.get(S.id)!==null;k||T(f[p==="series"?"_chartsMap":"_componentsMap"][S.__viewId])},f);function T(S){S&&S.__alive&&S[h]&&S[h](S.__model,m,f._api,d)}},Ws={prepareAndUpdate:function(f){Mf(this),Ws.update.call(this,f,{optionChanged:f.newOption!=null})},update:function(f,h){var d=this._model,p=this._api,g=this._zr,m=this._coordSysMgr,v=this._scheduler;if(!!d){d.setUpdatePayload(f),v.restoreData(d,f),v.performSeriesTasks(d),m.create(d,p),v.performDataProcessorTasks(d,f),AS(this,d),m.update(d,p),r(d),v.performVisualTasks(d,f),MS(this,d,p,f,h);var y=d.get("backgroundColor")||"transparent",b=d.get("darkMode");g.setBackgroundColor(y),b!=null&&b!=="auto"&&g.setDarkMode(b),bo.trigger("afterupdate",d,p)}},updateTransform:function(f){var h=this,d=this._model,p=this._api;if(!!d){d.setUpdatePayload(f);var g=[];d.eachComponent(function(v,y){if(v!=="series"){var b=h.getViewOfComponentModel(y);if(b&&b.__alive)if(b.updateTransform){var w=b.updateTransform(y,d,p,f);w&&w.update&&g.push(b)}else g.push(b)}});var m=he();d.eachSeries(function(v){var y=h._chartsMap[v.__viewId];if(y.updateTransform){var b=y.updateTransform(v,d,p,f);b&&b.update&&m.set(v.uid,1)}else m.set(v.uid,1)}),r(d),this._scheduler.performVisualTasks(d,f,{setDirty:!0,dirtyMap:m}),Tm(this,d,p,f,{},m),bo.trigger("afterupdate",d,p)}},updateView:function(f){var h=this._model;!h||(h.setUpdatePayload(f),Zi.markUpdateMethod(f,"updateView"),r(h),this._scheduler.performVisualTasks(h,f,{setDirty:!0}),MS(this,h,this._api,f,{}),bo.trigger("afterupdate",h,this._api))},updateVisual:function(f){var h=this,d=this._model;!d||(d.setUpdatePayload(f),d.eachSeries(function(p){p.getData().clearAllVisual()}),Zi.markUpdateMethod(f,"updateVisual"),r(d),this._scheduler.performVisualTasks(d,f,{visualType:"visual",setDirty:!0}),d.eachComponent(function(p,g){if(p!=="series"){var m=h.getViewOfComponentModel(g);m&&m.__alive&&m.updateVisual(g,d,h._api,f)}}),d.eachSeries(function(p){var g=h._chartsMap[p.__viewId];g.updateVisual(p,d,h._api,f)}),bo.trigger("afterupdate",d,this._api))},updateLayout:function(f){Ws.update.call(this,f)}},CS=function(f,h,d,p){if(f._disposed){f.id;return}for(var g=f._model,m=f._coordSysMgr.getCoordinateSystems(),v,y=Zw(g,d),b=0;b<m.length;b++){var w=m[b];if(w[h]&&(v=w[h](g,y,p))!=null)return v}},AS=function(f,h){var d=f._chartsMap,p=f._scheduler;h.eachSeries(function(g){p.updateStreamModes(g,d[g.__viewId])})},xS=function(f,h){var d=this,p=this.getModel(),g=f.type,m=f.escapeConnect,v=A_[g],y=v.actionInfo,b=(y.update||"update").split(":"),w=b.pop(),T=b[0]!=null&&_a(b[0]);this[yn]=!0;var S=[f],k=!1;f.batch&&(k=!0,S=Bt(f.batch,function(D){return D=Ee(_t({},D),f),D.batch=null,D}));var E=[],P,C=pP(f),A=I6(f);if(A&&xz(this._api),U(S,function(D){if(P=v.action(D,d._model,d._api),P=P||_t({},D),P.type=y.event||P.type,E.push(P),A){var F=gA(f),z=F.queryOptionMap,Y=F.mainTypeSpecified,K=Y?z.keys()[0]:"series";Sm(d,w,D,K),Mi(d)}else C?(Sm(d,w,D,"series"),Mi(d)):T&&Sm(d,w,D,T.main,T.sub)}),w!=="none"&&!A&&!C&&!T)try{this[Kn]?(Mf(this),Ws.update.call(this,f),this[Kn]=null):Ws[w].call(this,f)}catch(D){throw this[yn]=!1,D}if(k?P={type:y.event||g,escapeConnect:m,batch:E}:P=E[0],this[yn]=!1,!h){var L=this._messageCenter;if(L.trigger(P.type,P),C){var R={type:"selectchanged",escapeConnect:m,selected:mat(p),isFromClick:f.isFromClick||!1,fromAction:f.type,fromActionPayload:f};L.trigger(R.type,R)}}},op=function(f){for(var h=this._pendingActions;h.length;){var d=h.shift();xS.call(this,d,f)}},ap=function(f){!f&&this.trigger("updated")},X5=function(f,h){f.on("rendered",function(d){h.trigger("rendered",d),f.animation.isFinished()&&!h[Kn]&&!h._scheduler.unfinished&&!h._pendingActions.length&&h.trigger("finished")})},Y5=function(f,h){f.on("mouseover",function(d){var p=d.target,g=fh(p,dP);g&&(pat(g,d,h._api),Mi(h))}).on("mouseout",function(d){var p=d.target,g=fh(p,dP);g&&(gat(g,d,h._api),Mi(h))}).on("click",function(d){var p=d.target,g=fh(p,function(y){return Me(y).dataIndex!=null},!0);if(g){var m=g.selected?"unselect":"select",v=Me(g);h._api.dispatchAction({type:m,dataType:v.dataType,dataIndexInside:v.dataIndex,seriesIndex:v.seriesIndex,isFromClick:!0})}})};function r(f){f.clearColorPalette(),f.eachSeries(function(h){h.clearColorPalette()})}function n(f){var h=[],d=[],p=!1;if(f.eachComponent(function(y,b){var w=b.get("zlevel")||0,T=b.get("z")||0,S=b.getZLevelKey();p=p||!!S,(y==="series"?d:h).push({zlevel:w,z:T,idx:b.componentIndex,type:y,key:S})}),p){var g=h.concat(d),m,v;cy(g,function(y,b){return y.zlevel===b.zlevel?y.z-b.z:y.zlevel-b.zlevel}),U(g,function(y){var b=f.getComponent(y.type,y.idx),w=y.zlevel,T=y.key;m!=null&&(w=Math.max(m,w)),T?(w===m&&T!==v&&w++,v=T):v&&(w===m&&w++,v=""),m=w,b.setZLevel(w)})}}MS=function(f,h,d,p,g){n(h),K5(f,h,d,p,g),U(f._chartsViews,function(m){m.__alive=!1}),Tm(f,h,d,p,g),U(f._chartsViews,function(m){m.__alive||m.remove(h,d)})},K5=function(f,h,d,p,g,m){U(m||f._componentsViews,function(v){var y=v.__model;u(y,v),v.render(y,h,d,p),s(y,v),c(y,v)})},Tm=function(f,h,d,p,g,m){var v=f._scheduler;g=_t(g||{},{updatedSeries:h.getSeries()}),bo.trigger("series:beforeupdate",h,d,g);var y=!1;h.eachSeries(function(b){var w=f._chartsMap[b.__viewId];w.__alive=!0;var T=w.renderTask;v.updatePayload(T,p),u(b,w),m&&m.get(b.uid)&&T.dirty(),T.perform(v.getPerformArgs(T))&&(y=!0),w.group.silent=!!b.get("silent"),a(b,w),x6(b)}),v.unfinished=y||v.unfinished,bo.trigger("series:layoutlabels",h,d,g),bo.trigger("series:transition",h,d,g),h.eachSeries(function(b){var w=f._chartsMap[b.__viewId];s(b,w),c(b,w)}),o(f,h),bo.trigger("series:afterupdate",h,d,g)},Mi=function(f){f[kS]=!0,f.getZr().wakeUp()},q5=function(f){!f[kS]||(f.getZr().storage.traverse(function(h){zg(h)||i(h)}),f[kS]=!1)};function i(f){for(var h=[],d=f.currentStates,p=0;p<d.length;p++){var g=d[p];g==="emphasis"||g==="blur"||g==="select"||h.push(g)}f.selected&&f.states.select&&h.push("select"),f.hoverState===$b&&f.states.emphasis?h.push("emphasis"):f.hoverState===e0&&f.states.blur&&h.push("blur"),f.useStates(h)}function o(f,h){var d=f._zr,p=d.storage,g=0;p.traverse(function(m){m.isGroup||g++}),g>h.get("hoverLayerThreshold")&&!me.node&&!me.worker&&h.eachSeries(function(m){if(!m.preventUsingHoverLayer){var v=f._chartsMap[m.__viewId];v.__alive&&v.eachRendered(function(y){y.states.emphasis&&(y.states.emphasis.hoverLayer=!0)})}})}function a(f,h){var d=f.get("blendMode")||null;h.eachRendered(function(p){p.isGroup||(p.style.blend=d)})}function s(f,h){if(!f.preventAutoZ){var d=f.get("z")||0,p=f.get("zlevel")||0;h.eachRendered(function(g){return l(g,d,p,-1/0),!0})}}function l(f,h,d,p){var g=f.getTextContent(),m=f.getTextGuideLine(),v=f.isGroup;if(v)for(var y=f.childrenRef(),b=0;b<y.length;b++)p=Math.max(l(y[b],h,d,p),p);else f.z=h,f.zlevel=d,p=Math.max(f.z2,p);if(g&&(g.z=h,g.zlevel=d,isFinite(p)&&(g.z2=p+2)),m){var w=f.textGuideLineConfig;m.z=h,m.zlevel=d,isFinite(p)&&(m.z2=p+(w&&w.showAbove?1:-1))}return p}function u(f,h){h.eachRendered(function(d){if(!zg(d)){var p=d.getTextContent(),g=d.getTextGuideLine();d.stateTransition&&(d.stateTransition=null),p&&p.stateTransition&&(p.stateTransition=null),g&&g.stateTransition&&(g.stateTransition=null),d.hasState()?(d.prevStates=d.currentStates,d.clearStates()):d.prevStates&&(d.prevStates=null)}})}function c(f,h){var d=f.getModel("stateAnimation"),p=f.isAnimationEnabled(),g=d.get("duration"),m=g>0?{duration:g,delay:d.get("delay"),easing:d.get("easing")}:null;h.eachRendered(function(v){if(v.states&&v.states.emphasis){if(zg(v))return;if(v instanceof Ne&&Sat(v),v.__dirty){var y=v.prevStates;y&&v.useStates(y)}if(p){v.stateTransition=m;var b=v.getTextContent(),w=v.getTextGuideLine();b&&(b.stateTransition=m),w&&(w.stateTransition=m)}v.__dirty&&i(v)}})}Z5=function(f){return new(function(h){Ot(d,h);function d(){return h!==null&&h.apply(this,arguments)||this}return d.prototype.getCoordinateSystems=function(){return f._coordSysMgr.getCoordinateSystems()},d.prototype.getComponentByElement=function(p){for(;p;){var g=p.__ecComponentInfo;if(g!=null)return f._model.getComponent(g.mainType,g.index);p=p.parent}},d.prototype.enterEmphasis=function(p,g){cv(p,g),Mi(f)},d.prototype.leaveEmphasis=function(p,g){fv(p,g),Mi(f)},d.prototype.enterBlur=function(p){Pz(p),Mi(f)},d.prototype.leaveBlur=function(p){wA(p),Mi(f)},d.prototype.enterSelect=function(p){Ez(p),Mi(f)},d.prototype.leaveSelect=function(p){Cz(p),Mi(f)},d.prototype.getModel=function(){return f.getModel()},d.prototype.getViewOfComponentModel=function(p){return f.getViewOfComponentModel(p)},d.prototype.getViewOfSeriesModel=function(p){return f.getViewOfSeriesModel(p)},d}(EV))(f)},SU=function(f){function h(d,p){for(var g=0;g<d.length;g++){var m=d[g];m[PS]=p}}U(Wg,function(d,p){f._messageCenter.on(p,function(g){if(J5[f.group]&&f[PS]!==H5){if(g&&g.escapeConnect)return;var m=f.makeActionFromEvent(g),v=[];U(jg,function(y){y!==f&&y.group===f.group&&v.push(y)}),h(v,H5),U(v,function(y){y[PS]!==Cct&&y.dispatchAction(m)}),h(v,Act)}})})}}(),t}(Vo),YA=TU.prototype;YA.on=mU("on");YA.off=mU("off");YA.one=function(e,t,r){var n=this;function i(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];t&&t.apply&&t.apply(this,o),n.off(e,i)}this.on.call(this,e,i,r)};var xct=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var A_={},Wg={},xP=[],MP=[],x_=[],kU={},IP={},jg={},J5={},Mct=+new Date-0,KA="_echarts_instance_";function Ict(e,t,r){var n=!(r&&r.ssr);if(n){var i=Lct(e);if(i)return i}var o=new TU(e,t,r);return o.id="ec_"+Mct++,jg[o.id]=o,n&&az(e,KA,o.id),SU(o),bo.trigger("afterinit",o),o}function Lct(e){return jg[Qit(e,KA)]}function PU(e,t){kU[e]=t}function EU(e){De(MP,e)<0&&MP.push(e)}function CU(e,t){qA(xP,e,t,_ct)}function Oct(e){ZA("afterinit",e)}function Rct(e){ZA("afterupdate",e)}function ZA(e,t){bo.on(e,t)}function Hc(e,t,r){ue(t)&&(r=t,t="");var n=Yt(e)?e.type:[e,e={event:t}][0];e.event=(e.event||n).toLowerCase(),t=e.event,!Wg[t]&&(Do(G5.test(n)&&G5.test(t)),A_[n]||(A_[n]={action:r,actionInfo:e}),Wg[t]=n)}function Dct(e,t){$A.register(e,t)}function Nct(e,t){qA(x_,e,t,pU,"layout")}function Xc(e,t){qA(x_,e,t,gU,"visual")}var Q5=[];function qA(e,t,r,n,i){if((ue(t)||Yt(t))&&(r=t,t=n),!(De(Q5,r)>=0)){Q5.push(r);var o=rU.wrapStageHandler(r,i);o.__prio=t,o.__raw=r,e.push(o)}}function AU(e,t){IP[e]=t}function Fct(e,t,r){var n=dct("registerMap");n&&n(e,t,r)}var $ct=Vlt;Xc(XA,vut);Xc(n2,mut);Xc(n2,yut);Xc(XA,Out);Xc(n2,Rut);Xc(vU,cct);EU(AV);CU(mct,wlt);AU("default",_ut);Hc({type:fc,event:fc,update:fc},xn);Hc({type:vy,event:vy,update:vy},xn);Hc({type:Fg,event:Fg,update:Fg},xn);Hc({type:my,event:my,update:my},xn);Hc({type:$g,event:$g,update:$g},xn);PU("light",Mut);PU("dark",Iut);function sp(e){return e==null?0:e.length||1}function tL(e){return e}var Bct=function(){function e(t,r,n,i,o,a){this._old=t,this._new=r,this._oldKeyGetter=n||tL,this._newKeyGetter=i||tL,this.context=o,this._diffModeMultiple=a==="multiple"}return e.prototype.add=function(t){return this._add=t,this},e.prototype.update=function(t){return this._update=t,this},e.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},e.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},e.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},e.prototype.remove=function(t){return this._remove=t,this},e.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},e.prototype._executeOneToOne=function(){var t=this._old,r=this._new,n={},i=new Array(t.length),o=new Array(r.length);this._initIndexMap(t,null,i,"_oldKeyGetter"),this._initIndexMap(r,n,o,"_newKeyGetter");for(var a=0;a<t.length;a++){var s=i[a],l=n[s],u=sp(l);if(u>1){var c=l.shift();l.length===1&&(n[s]=l[0]),this._update&&this._update(c,a)}else u===1?(n[s]=null,this._update&&this._update(l,a)):this._remove&&this._remove(a)}this._performRestAdd(o,n)},e.prototype._executeMultiple=function(){var t=this._old,r=this._new,n={},i={},o=[],a=[];this._initIndexMap(t,n,o,"_oldKeyGetter"),this._initIndexMap(r,i,a,"_newKeyGetter");for(var s=0;s<o.length;s++){var l=o[s],u=n[l],c=i[l],f=sp(u),h=sp(c);if(f>1&&h===1)this._updateManyToOne&&this._updateManyToOne(c,u),i[l]=null;else if(f===1&&h>1)this._updateOneToMany&&this._updateOneToMany(c,u),i[l]=null;else if(f===1&&h===1)this._update&&this._update(c,u),i[l]=null;else if(f>1&&h>1)this._updateManyToMany&&this._updateManyToMany(c,u),i[l]=null;else if(f>1)for(var d=0;d<f;d++)this._remove&&this._remove(u[d]);else this._remove&&this._remove(u)}this._performRestAdd(a,i)},e.prototype._performRestAdd=function(t,r){for(var n=0;n<t.length;n++){var i=t[n],o=r[i],a=sp(o);if(a>1)for(var s=0;s<a;s++)this._add&&this._add(o[s]);else a===1&&this._add&&this._add(o);r[i]=null}},e.prototype._initIndexMap=function(t,r,n,i){for(var o=this._diffModeMultiple,a=0;a<t.length;a++){var s="_ec_"+this[i](t[a],a);if(o||(n[a]=s),!!r){var l=r[s],u=sp(l);u===0?(r[s]=a,o&&n.push(s)):u===1?r[s]=[l,a]:l.push(a)}}},e}();const xU=Bct;var zct=function(){function e(t,r){this._encode=t,this._schema=r}return e.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},e.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},e}();function Vct(e,t){var r={},n=r.encode={},i=he(),o=[],a=[],s={};U(e.dimensions,function(h){var d=e.getDimensionInfo(h),p=d.coordDim;if(p){var g=d.coordDimIndex;IS(n,p)[g]=h,d.isExtraCoord||(i.set(p,1),Wct(d.type)&&(o[0]=h),IS(s,p)[g]=e.getDimensionIndex(d.name)),d.defaultTooltip&&a.push(h)}_V.each(function(m,v){var y=IS(n,v),b=d.otherDims[v];b!=null&&b!==!1&&(y[b]=d.name)})});var l=[],u={};i.each(function(h,d){var p=n[d];u[d]=p[0],l=l.concat(p)}),r.dataDimsOnCoord=l,r.dataDimIndicesOnCoord=Bt(l,function(h){return e.getDimensionInfo(h).storeDimIndex}),r.encodeFirstDimNotExtra=u;var c=n.label;c&&c.length&&(o=c.slice());var f=n.tooltip;return f&&f.length?a=f.slice():a.length||(a=o.slice()),n.defaultedLabel=o,n.defaultedTooltip=a,r.userOutput=new zct(s,t),r}function IS(e,t){return e.hasOwnProperty(t)||(e[t]=[]),e[t]}function Uct(e){return e==="category"?"ordinal":e==="time"?"time":"float"}function Wct(e){return!(e==="ordinal"||e==="time")}var jct=function(){function e(t){this.otherDims={},t!=null&&_t(this,t)}return e}();const wy=jct;var Gct=nr(),Hct={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},MU=function(){function e(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return e.prototype.isDimensionOmitted=function(){return this._dimOmitted},e.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=OU(this.source)))},e.prototype.getSourceDimensionIndex=function(t){return _e(this._dimNameMap.get(t),-1)},e.prototype.getSourceDimension=function(t){var r=this.source.dimensionsDefine;if(r)return r[t]},e.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,r=MV(this.source),n=!RU(t),i="",o=[],a=0,s=0;a<t;a++){var l=void 0,u=void 0,c=void 0,f=this.dimensions[s];if(f&&f.storeDimIndex===a)l=r?f.name:null,u=f.type,c=f.ordinalMeta,s++;else{var h=this.getSourceDimension(a);h&&(l=r?h.name:null,u=h.type)}o.push({property:l,type:u,ordinalMeta:c}),r&&l!=null&&(!f||!f.isCalculationCoord)&&(i+=n?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),i+="$",i+=Hct[u]||"f",c&&(i+=c.uid),i+="$"}var d=this.source,p=[d.seriesLayoutBy,d.startIndex,i].join("$$");return{dimensions:o,hash:p}},e.prototype.makeOutputDimensionNames=function(){for(var t=[],r=0,n=0;r<this._fullDimCount;r++){var i=void 0,o=this.dimensions[n];if(o&&o.storeDimIndex===r)o.isCalculationCoord||(i=o.name),n++;else{var a=this.getSourceDimension(r);a&&(i=a.name)}t.push(i)}return t},e.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},e}();function IU(e){return e instanceof MU}function LU(e){for(var t=he(),r=0;r<(e||[]).length;r++){var n=e[r],i=Yt(n)?n.name:n;i!=null&&t.get(i)==null&&t.set(i,r)}return t}function OU(e){var t=Gct(e);return t.dimNameMap||(t.dimNameMap=LU(e.dimensionsDefine))}function RU(e){return e>30}var lp=Yt,js=Bt,Xct=typeof Int32Array>"u"?Array:Int32Array,Yct="e\0\0",eL=-1,Kct=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],Zct=["_approximateExtent"],rL,km,up,cp,LS,Pm,OS,qct=function(){function e(t,r){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var n,i=!1;IU(t)?(n=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(i=!0,n=t),n=n||["x","y"];for(var o={},a=[],s={},l=!1,u={},c=0;c<n.length;c++){var f=n[c],h=$t(f)?new wy({name:f}):f instanceof wy?f:new wy(f),d=h.name;h.type=h.type||"float",h.coordDim||(h.coordDim=d,h.coordDimIndex=0);var p=h.otherDims=h.otherDims||{};a.push(d),o[d]=h,u[d]!=null&&(l=!0),h.createInvertedIndices&&(s[d]=[]),p.itemName===0&&(this._nameDimIdx=c),p.itemId===0&&(this._idDimIdx=c),i&&(h.storeDimIndex=c)}if(this.dimensions=a,this._dimInfos=o,this._initGetDimensionInfo(l),this.hostModel=r,this._invertedIndicesMap=s,this._dimOmitted){var g=this._dimIdxToName=he();U(a,function(m){g.set(o[m].storeDimIndex,m)})}}return e.prototype.getDimension=function(t){var r=this._recognizeDimIndex(t);if(r==null)return t;if(r=t,!this._dimOmitted)return this.dimensions[r];var n=this._dimIdxToName.get(r);if(n!=null)return n;var i=this._schema.getSourceDimension(r);if(i)return i.name},e.prototype.getDimensionIndex=function(t){var r=this._recognizeDimIndex(t);if(r!=null)return r;if(t==null)return-1;var n=this._getDimInfo(t);return n?n.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},e.prototype._recognizeDimIndex=function(t){if(He(t)||t!=null&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},e.prototype._getStoreDimIndex=function(t){var r=this.getDimensionIndex(t);return r},e.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},e.prototype._initGetDimensionInfo=function(t){var r=this._dimInfos;this._getDimInfo=t?function(n){return r.hasOwnProperty(n)?r[n]:void 0}:function(n){return r[n]}},e.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},e.prototype.mapDimension=function(t,r){var n=this._dimSummary;if(r==null)return n.encodeFirstDimNotExtra[t];var i=n.encode[t];return i?i[r]:null},e.prototype.mapDimensionsAll=function(t){var r=this._dimSummary,n=r.encode[t];return(n||[]).slice()},e.prototype.getStore=function(){return this._store},e.prototype.initData=function(t,r,n){var i=this,o;if(t instanceof bP&&(o=t),!o){var a=this.dimensions,s=BA(t)||In(t)?new IV(t,a.length):t;o=new bP;var l=js(a,function(u){return{type:i._dimInfos[u].type,property:u}});o.initData(s,l,n)}this._store=o,this._nameList=(r||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,o.count()),this._dimSummary=Vct(this,this._schema),this.userOutput=this._dimSummary.userOutput},e.prototype.appendData=function(t){var r=this._store.appendData(t);this._doInit(r[0],r[1])},e.prototype.appendValues=function(t,r){var n=this._store.appendValues(t,r.length),i=n.start,o=n.end,a=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),r)for(var s=i;s<o;s++){var l=s-i;this._nameList[s]=r[l],a&&OS(this,s)}},e.prototype._updateOrdinalMeta=function(){for(var t=this._store,r=this.dimensions,n=0;n<r.length;n++){var i=this._dimInfos[r[n]];i.ordinalMeta&&t.collectOrdinalMeta(i.storeDimIndex,i.ordinalMeta)}},e.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return this._idDimIdx==null&&t.getSource().sourceFormat!==Ll&&!t.fillStorage},e.prototype._doInit=function(t,r){if(!(t>=r)){var n=this._store,i=n.getProvider();this._updateOrdinalMeta();var o=this._nameList,a=this._idList,s=i.getSource().sourceFormat,l=s===io;if(l&&!i.pure)for(var u=[],c=t;c<r;c++){var f=i.getItem(c,u);if(!this.hasItemOption&&Vit(f)&&(this.hasItemOption=!0),f){var h=f.name;o[c]==null&&h!=null&&(o[c]=Ki(h,null));var d=f.id;a[c]==null&&d!=null&&(a[c]=Ki(d,null))}}if(this._shouldMakeIdFromName())for(var c=t;c<r;c++)OS(this,c);rL(this)}},e.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.setApproximateExtent=function(t,r){r=this.getDimension(r),this._approximateExtent[r]=t.slice()},e.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},e.prototype.setCalculationInfo=function(t,r){lp(t)?_t(this._calculationInfo,t):this._calculationInfo[t]=r},e.prototype.getName=function(t){var r=this.getRawIndex(t),n=this._nameList[r];return n==null&&this._nameDimIdx!=null&&(n=up(this,this._nameDimIdx,r)),n==null&&(n=""),n},e.prototype._getCategory=function(t,r){var n=this._store.get(t,r),i=this._store.getOrdinalMeta(t);return i?i.categories[n]:n},e.prototype.getId=function(t){return km(this,this.getRawIndex(t))},e.prototype.count=function(){return this._store.count()},e.prototype.get=function(t,r){var n=this._store,i=this._dimInfos[t];if(i)return n.get(i.storeDimIndex,r)},e.prototype.getByRawIndex=function(t,r){var n=this._store,i=this._dimInfos[t];if(i)return n.getByRawIndex(i.storeDimIndex,r)},e.prototype.getIndices=function(){return this._store.getIndices()},e.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},e.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},e.prototype.getValues=function(t,r){var n=this,i=this._store;return St(t)?i.getValues(js(t,function(o){return n._getStoreDimIndex(o)}),r):i.getValues(t)},e.prototype.hasValue=function(t){for(var r=this._dimSummary.dataDimIndicesOnCoord,n=0,i=r.length;n<i;n++)if(isNaN(this._store.get(r[n],t)))return!1;return!0},e.prototype.indexOfName=function(t){for(var r=0,n=this._store.count();r<n;r++)if(this.getName(r)===t)return r;return-1},e.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},e.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},e.prototype.rawIndexOf=function(t,r){var n=t&&this._invertedIndicesMap[t],i=n[r];return i==null||isNaN(i)?eL:i},e.prototype.indicesOfNearest=function(t,r,n){return this._store.indicesOfNearest(this._getStoreDimIndex(t),r,n)},e.prototype.each=function(t,r,n){ue(t)&&(n=r,r=t,t=[]);var i=n||this,o=js(cp(t),this._getStoreDimIndex,this);this._store.each(o,i?se(r,i):r)},e.prototype.filterSelf=function(t,r,n){ue(t)&&(n=r,r=t,t=[]);var i=n||this,o=js(cp(t),this._getStoreDimIndex,this);return this._store=this._store.filter(o,i?se(r,i):r),this},e.prototype.selectRange=function(t){var r=this,n={},i=ze(t);return U(i,function(o){var a=r._getStoreDimIndex(o);n[a]=t[o]}),this._store=this._store.selectRange(n),this},e.prototype.mapArray=function(t,r,n){ue(t)&&(n=r,r=t,t=[]),n=n||this;var i=[];return this.each(t,function(){i.push(r&&r.apply(this,arguments))},n),i},e.prototype.map=function(t,r,n,i){var o=n||i||this,a=js(cp(t),this._getStoreDimIndex,this),s=Pm(this);return s._store=this._store.map(a,o?se(r,o):r),s},e.prototype.modify=function(t,r,n,i){var o=n||i||this,a=js(cp(t),this._getStoreDimIndex,this);this._store.modify(a,o?se(r,o):r)},e.prototype.downSample=function(t,r,n,i){var o=Pm(this);return o._store=this._store.downSample(this._getStoreDimIndex(t),r,n,i),o},e.prototype.lttbDownSample=function(t,r){var n=Pm(this);return n._store=this._store.lttbDownSample(this._getStoreDimIndex(t),r),n},e.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},e.prototype.getItemModel=function(t){var r=this.hostModel,n=this.getRawDataItem(t);return new cn(n,r,r&&r.ecModel)},e.prototype.diff=function(t){var r=this;return new xU(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(n){return km(t,n)},function(n){return km(r,n)})},e.prototype.getVisual=function(t){var r=this._visual;return r&&r[t]},e.prototype.setVisual=function(t,r){this._visual=this._visual||{},lp(t)?_t(this._visual,t):this._visual[t]=r},e.prototype.getItemVisual=function(t,r){var n=this._itemVisuals[t],i=n&&n[r];return i==null?this.getVisual(r):i},e.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},e.prototype.ensureUniqueItemVisual=function(t,r){var n=this._itemVisuals,i=n[t];i||(i=n[t]={});var o=i[r];return o==null&&(o=this.getVisual(r),St(o)?o=o.slice():lp(o)&&(o=_t({},o)),i[r]=o),o},e.prototype.setItemVisual=function(t,r,n){var i=this._itemVisuals[t]||{};this._itemVisuals[t]=i,lp(r)?_t(i,r):i[r]=n},e.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},e.prototype.setLayout=function(t,r){lp(t)?_t(this._layout,t):this._layout[t]=r},e.prototype.getLayout=function(t){return this._layout[t]},e.prototype.getItemLayout=function(t){return this._itemLayouts[t]},e.prototype.setItemLayout=function(t,r,n){this._itemLayouts[t]=n?_t(this._itemLayouts[t]||{},r):r},e.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},e.prototype.setItemGraphicEl=function(t,r){var n=this.hostModel&&this.hostModel.seriesIndex;iat(n,this.dataType,t,r),this._graphicEls[t]=r},e.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},e.prototype.eachItemGraphicEl=function(t,r){U(this._graphicEls,function(n,i){n&&t&&t.call(r,n,i)})},e.prototype.cloneShallow=function(t){return t||(t=new e(this._schema?this._schema:js(this.dimensions,this._getDimInfo,this),this.hostModel)),LS(t,this),t._store=this._store,t},e.prototype.wrapMethod=function(t,r){var n=this[t];!ue(n)||(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var i=n.apply(this,arguments);return r.apply(this,[i].concat(iA(arguments)))})},e.internalField=function(){rL=function(t){var r=t._invertedIndicesMap;U(r,function(n,i){var o=t._dimInfos[i],a=o.ordinalMeta,s=t._store;if(a){n=r[i]=new Xct(a.categories.length);for(var l=0;l<n.length;l++)n[l]=eL;for(var l=0;l<s.count();l++)n[s.get(o.storeDimIndex,l)]=l}})},up=function(t,r,n){return Ki(t._getCategory(r,n),null)},km=function(t,r){var n=t._idList[r];return n==null&&t._idDimIdx!=null&&(n=up(t,t._idDimIdx,r)),n==null&&(n=Yct+r),n},cp=function(t){return St(t)||(t=t!=null?[t]:[]),t},Pm=function(t){var r=new e(t._schema?t._schema:js(t.dimensions,t._getDimInfo,t),t.hostModel);return LS(r,t),r},LS=function(t,r){U(Kct.concat(r.__wrappedMethods||[]),function(n){r.hasOwnProperty(n)&&(t[n]=r[n])}),t.__wrappedMethods=r.__wrappedMethods,U(Zct,function(n){t[n]=oe(r[n])}),t._calculationInfo=_t({},r._calculationInfo)},OS=function(t,r){var n=t._nameList,i=t._idList,o=t._nameDimIdx,a=t._idDimIdx,s=n[r],l=i[r];if(s==null&&o!=null&&(n[r]=s=up(t,o,r)),l==null&&a!=null&&(i[r]=l=up(t,a,r)),l==null&&s!=null){var u=t._nameRepeatCount,c=u[s]=(u[s]||0)+1;l=s,c>1&&(l+="__ec__"+c),i[r]=l}}}(),e}();const hc=qct;function DU(e,t){BA(e)||(e=zA(e)),t=t||{};var r=t.coordDimensions||[],n=t.dimensionsDefine||e.dimensionsDefine||[],i=he(),o=[],a=Qct(e,r,n,t.dimensionsCount),s=t.canOmitUnusedDimensions&&RU(a),l=n===e.dimensionsDefine,u=l?OU(e):LU(n),c=t.encodeDefine;!c&&t.encodeDefaulter&&(c=t.encodeDefaulter(e,a));for(var f=he(c),h=new zV(a),d=0;d<h.length;d++)h[d]=-1;function p(P){var C=h[P];if(C<0){var A=n[P],L=Yt(A)?A:{name:A},R=new wy,D=L.name;D!=null&&u.get(D)!=null&&(R.name=R.displayName=D),L.type!=null&&(R.type=L.type),L.displayName!=null&&(R.displayName=L.displayName);var F=o.length;return h[P]=F,R.storeDimIndex=P,o.push(R),R}return o[C]}if(!s)for(var d=0;d<a;d++)p(d);f.each(function(P,C){var A=Ir(P).slice();if(A.length===1&&!$t(A[0])&&A[0]<0){f.set(C,!1);return}var L=f.set(C,[]);U(A,function(R,D){var F=$t(R)?u.get(R):R;F!=null&&F<a&&(L[D]=F,m(p(F),C,D))})});var g=0;U(r,function(P){var C,A,L,R;if($t(P))C=P,R={};else{R=P,C=R.name;var D=R.ordinalMeta;R.ordinalMeta=null,R=_t({},R),R.ordinalMeta=D,A=R.dimsDef,L=R.otherDims,R.name=R.coordDim=R.coordDimIndex=R.dimsDef=R.otherDims=null}var F=f.get(C);if(F!==!1){if(F=Ir(F),!F.length)for(var z=0;z<(A&&A.length||1);z++){for(;g<a&&p(g).coordDim!=null;)g++;g<a&&F.push(g++)}U(F,function(Y,K){var et=p(Y);if(l&&R.type!=null&&(et.type=R.type),m(Ee(et,R),C,K),et.name==null&&A){var Tt=A[K];!Yt(Tt)&&(Tt={name:Tt}),et.name=et.displayName=Tt.name,et.defaultTooltip=Tt.defaultTooltip}L&&Ee(et.otherDims,L)})}});function m(P,C,A){_V.get(C)!=null?P.otherDims[C]=A:(P.coordDim=C,P.coordDimIndex=A,i.set(C,!0))}var v=t.generateCoord,y=t.generateCoordCount,b=y!=null;y=v?y||1:0;var w=v||"value";function T(P){P.name==null&&(P.name=P.coordDim)}if(s)U(o,function(P){T(P)}),o.sort(function(P,C){return P.storeDimIndex-C.storeDimIndex});else for(var S=0;S<a;S++){var k=p(S),E=k.coordDim;E==null&&(k.coordDim=tft(w,i,b),k.coordDimIndex=0,(!v||y<=0)&&(k.isExtraCoord=!0),y--),T(k),k.type==null&&(TV(e,S)===hi.Must||k.isExtraCoord&&(k.otherDims.itemName!=null||k.otherDims.seriesName!=null))&&(k.type="ordinal")}return Jct(o),new MU({source:e,dimensions:o,fullDimensionCount:a,dimensionOmitted:s})}function Jct(e){for(var t=he(),r=0;r<e.length;r++){var n=e[r],i=n.name,o=t.get(i)||0;o>0&&(n.name=i+(o-1)),o++,t.set(i,o)}}function Qct(e,t,r,n){var i=Math.max(e.dimensionsDetectedCount||1,t.length,r.length,n||0);return U(t,function(o){var a;Yt(o)&&(a=o.dimsDef)&&(i=Math.max(i,a.length))}),i}function tft(e,t,r){var n=t.data;if(r||n.hasOwnProperty(e)){for(var i=0;n.hasOwnProperty(e+i);)i++;e+=i}return t.set(e,!0),e}var eft=function(){function e(t){this.coordSysDims=[],this.axisMap=he(),this.categoryAxisMap=he(),this.coordSysName=t}return e}();function rft(e){var t=e.get("coordinateSystem"),r=new eft(t),n=nft[t];if(n)return n(e,r,r.axisMap,r.categoryAxisMap),r}var nft={cartesian2d:function(e,t,r,n){var i=e.getReferringComponents("xAxis",Eo).models[0],o=e.getReferringComponents("yAxis",Eo).models[0];t.coordSysDims=["x","y"],r.set("x",i),r.set("y",o),If(i)&&(n.set("x",i),t.firstCategoryDimIndex=0),If(o)&&(n.set("y",o),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},singleAxis:function(e,t,r,n){var i=e.getReferringComponents("singleAxis",Eo).models[0];t.coordSysDims=["single"],r.set("single",i),If(i)&&(n.set("single",i),t.firstCategoryDimIndex=0)},polar:function(e,t,r,n){var i=e.getReferringComponents("polar",Eo).models[0],o=i.findAxisModel("radiusAxis"),a=i.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],r.set("radius",o),r.set("angle",a),If(o)&&(n.set("radius",o),t.firstCategoryDimIndex=0),If(a)&&(n.set("angle",a),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},geo:function(e,t,r,n){t.coordSysDims=["lng","lat"]},parallel:function(e,t,r,n){var i=e.ecModel,o=i.getComponent("parallel",e.get("parallelIndex")),a=t.coordSysDims=o.dimensions.slice();U(o.parallelAxisIndex,function(s,l){var u=i.getComponent("parallelAxis",s),c=a[l];r.set(c,u),If(u)&&(n.set(c,u),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=l))})}};function If(e){return e.get("type")==="category"}function ift(e,t,r){r=r||{};var n=r.byIndex,i=r.stackedCoordDimension,o,a,s;oft(t)?o=t:(a=t.schema,o=a.dimensions,s=t.store);var l=!!(e&&e.get("stack")),u,c,f,h;if(U(o,function(y,b){$t(y)&&(o[b]=y={name:y}),l&&!y.isExtraCoord&&(!n&&!u&&y.ordinalMeta&&(u=y),!c&&y.type!=="ordinal"&&y.type!=="time"&&(!i||i===y.coordDim)&&(c=y))}),c&&!n&&!u&&(n=!0),c){f="__\0ecstackresult_"+e.id,h="__\0ecstackedover_"+e.id,u&&(u.createInvertedIndices=!0);var d=c.coordDim,p=c.type,g=0;U(o,function(y){y.coordDim===d&&g++});var m={name:f,coordDim:d,coordDimIndex:g,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:o.length},v={name:h,coordDim:h,coordDimIndex:g+1,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:o.length+1};a?(s&&(m.storeDimIndex=s.ensureCalculationDimension(h,p),v.storeDimIndex=s.ensureCalculationDimension(f,p)),a.appendCalculationDimension(m),a.appendCalculationDimension(v)):(o.push(m),o.push(v))}return{stackedDimension:c&&c.name,stackedByDimension:u&&u.name,isStackedByIndex:n,stackedOverDimension:h,stackResultDimension:f}}function oft(e){return!IU(e.schema)}function Ac(e,t){return!!t&&t===e.getCalculationInfo("stackedDimension")}function NU(e,t){return Ac(e,t)?e.getCalculationInfo("stackResultDimension"):t}function aft(e,t){var r=e.get("coordinateSystem"),n=$A.get(r),i;return t&&t.coordSysDims&&(i=Bt(t.coordSysDims,function(o){var a={name:o},s=t.axisMap.get(o);if(s){var l=s.get("type");a.type=Uct(l)}return a})),i||(i=n&&(n.getDimensionsInfo?n.getDimensionsInfo():n.dimensions.slice())||["x","y"]),i}function sft(e,t,r){var n,i;return r&&U(e,function(o,a){var s=o.coordDim,l=r.categoryAxisMap.get(s);l&&(n==null&&(n=a),o.ordinalMeta=l.getOrdinalMeta(),t&&(o.createInvertedIndices=!0)),o.otherDims.itemName!=null&&(i=!0)}),!i&&n!=null&&(e[n].otherDims.itemName=0),n}function i0(e,t,r){r=r||{};var n=t.getSourceManager(),i,o=!1;e?(o=!0,i=zA(e)):(i=n.getSource(),o=i.sourceFormat===io);var a=rft(t),s=aft(t,a),l=r.useEncodeDefaulter,u=ue(l)?l:l?We(Xst,s,t):null,c={coordDimensions:s,generateCoord:r.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:u,canOmitUnusedDimensions:!o},f=DU(i,c),h=sft(f.dimensions,r.createInvertedIndices,a),d=o?null:n.getSharedDataStore(f),p=ift(t,{schema:f,store:d}),g=new hc(f,t);g.setCalculationInfo(p);var m=h!=null&&lft(i)?function(v,y,b,w){return w===h?b:this.defaultDimValueGetter(v,y,b,w)}:null;return g.hasItemOption=!1,g.initData(o?i:d,null,m),g}function lft(e){if(e.sourceFormat===io){var t=uft(e.data||[]);return!St(Qv(t))}}function uft(e){for(var t=0;t<e.length&&e[t]==null;)t++;return e[t]}var FU=function(){function e(t){this._setting=t||{},this._extent=[1/0,-1/0]}return e.prototype.getSetting=function(t){return this._setting[t]},e.prototype.unionExtent=function(t){var r=this._extent;t[0]<r[0]&&(r[0]=t[0]),t[1]>r[1]&&(r[1]=t[1])},e.prototype.unionExtentFromData=function(t,r){this.unionExtent(t.getApproximateExtent(r))},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.setExtent=function(t,r){var n=this._extent;isNaN(t)||(n[0]=t),isNaN(r)||(n[1]=r)},e.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},e.prototype.isBlank=function(){return this._isBlank},e.prototype.setBlank=function(t){this._isBlank=t},e}();Db(FU);const Is=FU;var cft=0,fft=function(){function e(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++cft}return e.createByAxisModel=function(t){var r=t.option,n=r.data,i=n&&Bt(n,hft);return new e({categories:i,needCollect:!i,deduplication:r.dedplication!==!1})},e.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},e.prototype.parseAndCollect=function(t){var r,n=this._needCollect;if(!$t(t)&&!n)return t;if(n&&!this._deduplication)return r=this.categories.length,this.categories[r]=t,r;var i=this._getOrCreateMap();return r=i.get(t),r==null&&(n?(r=this.categories.length,this.categories[r]=t,i.set(t,r)):r=NaN),r},e.prototype._getOrCreateMap=function(){return this._map||(this._map=he(this.categories))},e}();function hft(e){return Yt(e)&&e.value!=null?e.value:e+""}const LP=fft;function OP(e){return e.type==="interval"||e.type==="log"}function dft(e,t,r,n){var i={},o=e[1]-e[0],a=i.interval=ez(o/t,!0);r!=null&&a<r&&(a=i.interval=r),n!=null&&a>n&&(a=i.interval=n);var s=i.intervalPrecision=$U(a),l=i.niceTickExtent=[Mr(Math.ceil(e[0]/a)*a,s),Mr(Math.floor(e[1]/a)*a,s)];return pft(l,e),i}function RS(e){var t=Math.pow(10,dA(e)),r=e/t;return r?r===2?r=3:r===3?r=5:r*=2:r=1,Mr(r*t)}function $U(e){return ya(e)+2}function nL(e,t,r){e[t]=Math.max(Math.min(e[t],r[1]),r[0])}function pft(e,t){!isFinite(e[0])&&(e[0]=t[0]),!isFinite(e[1])&&(e[1]=t[1]),nL(e,0,t),nL(e,1,t),e[0]>e[1]&&(e[0]=e[1])}function i2(e,t){return e>=t[0]&&e<=t[1]}function o2(e,t){return t[1]===t[0]?.5:(e-t[0])/(t[1]-t[0])}function a2(e,t){return e*(t[1]-t[0])+t[0]}var BU=function(e){Ot(t,e);function t(r){var n=e.call(this,r)||this;n.type="ordinal";var i=n.getSetting("ordinalMeta");return i||(i=new LP({})),St(i)&&(i=new LP({categories:Bt(i,function(o){return Yt(o)?o.value:o})})),n._ordinalMeta=i,n._extent=n.getSetting("extent")||[0,i.categories.length-1],n}return t.prototype.parse=function(r){return r==null?NaN:$t(r)?this._ordinalMeta.getOrdinal(r):Math.round(r)},t.prototype.contain=function(r){return r=this.parse(r),i2(r,this._extent)&&this._ordinalMeta.categories[r]!=null},t.prototype.normalize=function(r){return r=this._getTickNumber(this.parse(r)),o2(r,this._extent)},t.prototype.scale=function(r){return r=Math.round(a2(r,this._extent)),this.getRawOrdinalNumber(r)},t.prototype.getTicks=function(){for(var r=[],n=this._extent,i=n[0];i<=n[1];)r.push({value:i}),i++;return r},t.prototype.getMinorTicks=function(r){},t.prototype.setSortInfo=function(r){if(r==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var n=r.ordinalNumbers,i=this._ordinalNumbersByTick=[],o=this._ticksByOrdinalNumber=[],a=0,s=this._ordinalMeta.categories.length,l=Math.min(s,n.length);a<l;++a){var u=n[a];i[a]=u,o[u]=a}for(var c=0;a<s;++a){for(;o[c]!=null;)c++;i.push(c),o[c]=a}},t.prototype._getTickNumber=function(r){var n=this._ticksByOrdinalNumber;return n&&r>=0&&r<n.length?n[r]:r},t.prototype.getRawOrdinalNumber=function(r){var n=this._ordinalNumbersByTick;return n&&r>=0&&r<n.length?n[r]:r},t.prototype.getLabel=function(r){if(!this.isBlank()){var n=this.getRawOrdinalNumber(r.value),i=this._ordinalMeta.categories[n];return i==null?"":i+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.unionExtentFromData=function(r,n){this.unionExtent(r.getApproximateExtent(n))},t.prototype.isInExtentRange=function(r){return r=this._getTickNumber(r),this._extent[0]<=r&&this._extent[1]>=r},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t}(Is);Is.registerClass(BU);const zU=BU;var Ru=Mr,VU=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="interval",r._interval=0,r._intervalPrecision=2,r}return t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return i2(r,this._extent)},t.prototype.normalize=function(r){return o2(r,this._extent)},t.prototype.scale=function(r){return a2(r,this._extent)},t.prototype.setExtent=function(r,n){var i=this._extent;isNaN(r)||(i[0]=parseFloat(r)),isNaN(n)||(i[1]=parseFloat(n))},t.prototype.unionExtent=function(r){var n=this._extent;r[0]<n[0]&&(n[0]=r[0]),r[1]>n[1]&&(n[1]=r[1]),this.setExtent(n[0],n[1])},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(r){this._interval=r,this._niceExtent=this._extent.slice(),this._intervalPrecision=$U(r)},t.prototype.getTicks=function(r){var n=this._interval,i=this._extent,o=this._niceExtent,a=this._intervalPrecision,s=[];if(!n)return s;var l=1e4;i[0]<o[0]&&(r?s.push({value:Ru(o[0]-n,a)}):s.push({value:i[0]}));for(var u=o[0];u<=o[1]&&(s.push({value:u}),u=Ru(u+n,a),u!==s[s.length-1].value);)if(s.length>l)return[];var c=s.length?s[s.length-1].value:o[1];return i[1]>c&&(r?s.push({value:Ru(c+n,a)}):s.push({value:i[1]})),s},t.prototype.getMinorTicks=function(r){for(var n=this.getTicks(!0),i=[],o=this.getExtent(),a=1;a<n.length;a++){for(var s=n[a],l=n[a-1],u=0,c=[],f=s.value-l.value,h=f/r;u<r-1;){var d=Ru(l.value+(u+1)*h);d>o[0]&&d<o[1]&&c.push(d),u++}i.push(c)}return i},t.prototype.getLabel=function(r,n){if(r==null)return"";var i=n&&n.precision;i==null?i=ya(r.value)||0:i==="auto"&&(i=this._intervalPrecision);var o=Ru(r.value,i,!0);return gV(o)},t.prototype.calcNiceTicks=function(r,n,i){r=r||5;var o=this._extent,a=o[1]-o[0];if(!!isFinite(a)){a<0&&(a=-a,o.reverse());var s=dft(o,r,n,i);this._intervalPrecision=s.intervalPrecision,this._interval=s.interval,this._niceExtent=s.niceTickExtent}},t.prototype.calcNiceExtent=function(r){var n=this._extent;if(n[0]===n[1])if(n[0]!==0){var i=Math.abs(n[0]);r.fixMax||(n[1]+=i/2),n[0]-=i/2}else n[1]=1;var o=n[1]-n[0];isFinite(o)||(n[0]=0,n[1]=1),this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval);var a=this._interval;r.fixMin||(n[0]=Ru(Math.floor(n[0]/a)*a)),r.fixMax||(n[1]=Ru(Math.ceil(n[1]/a)*a))},t.prototype.setNiceExtent=function(r,n){this._niceExtent=[r,n]},t.type="interval",t}(Is);Is.registerClass(VU);const o0=VU;var UU=typeof Float32Array<"u",gft=UU?Float32Array:Array;function ss(e){return St(e)?UU?new Float32Array(e):e:new gft(e)}var RP="__ec_stack_";function JA(e){return e.get("stack")||RP+e.seriesIndex}function QA(e){return e.dim+e.index}function vft(e){var t=[],r=e.axis,n="axis0";if(r.type==="category"){for(var i=r.getBandWidth(),o=0;o<e.count;o++)t.push(Ee({bandWidth:i,axisKey:n,stackId:RP+o},e));for(var a=GU(t),s=[],o=0;o<e.count;o++){var l=a[n][RP+o];l.offsetCenter=l.offset+l.width/2,s.push(l)}return s}}function WU(e,t){var r=[];return t.eachSeriesByType(e,function(n){HU(n)&&r.push(n)}),r}function mft(e){var t={};U(e,function(l){var u=l.coordinateSystem,c=u.getBaseAxis();if(!(c.type!=="time"&&c.type!=="value"))for(var f=l.getData(),h=c.dim+"_"+c.index,d=f.getDimensionIndex(f.mapDimension(c.dim)),p=f.getStore(),g=0,m=p.count();g<m;++g){var v=p.get(d,g);t[h]?t[h].push(v):t[h]=[v]}});var r={};for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];if(i){i.sort(function(l,u){return l-u});for(var o=null,a=1;a<i.length;++a){var s=i[a]-i[a-1];s>0&&(o=o===null?s:Math.min(o,s))}r[n]=o}}return r}function jU(e){var t=mft(e),r=[];return U(e,function(n){var i=n.coordinateSystem,o=i.getBaseAxis(),a=o.getExtent(),s;if(o.type==="category")s=o.getBandWidth();else if(o.type==="value"||o.type==="time"){var l=o.dim+"_"+o.index,u=t[l],c=Math.abs(a[1]-a[0]),f=o.scale.getExtent(),h=Math.abs(f[1]-f[0]);s=u?c/h*u:c}else{var d=n.getData();s=Math.abs(a[1]-a[0])/d.count()}var p=Er(n.get("barWidth"),s),g=Er(n.get("barMaxWidth"),s),m=Er(n.get("barMinWidth")||(XU(n)?.5:1),s),v=n.get("barGap"),y=n.get("barCategoryGap");r.push({bandWidth:s,barWidth:p,barMaxWidth:g,barMinWidth:m,barGap:v,barCategoryGap:y,axisKey:QA(o),stackId:JA(n)})}),GU(r)}function GU(e){var t={};U(e,function(n,i){var o=n.axisKey,a=n.bandWidth,s=t[o]||{bandWidth:a,remainedWidth:a,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},l=s.stacks;t[o]=s;var u=n.stackId;l[u]||s.autoWidthCount++,l[u]=l[u]||{width:0,maxWidth:0};var c=n.barWidth;c&&!l[u].width&&(l[u].width=c,c=Math.min(s.remainedWidth,c),s.remainedWidth-=c);var f=n.barMaxWidth;f&&(l[u].maxWidth=f);var h=n.barMinWidth;h&&(l[u].minWidth=h);var d=n.barGap;d!=null&&(s.gap=d);var p=n.barCategoryGap;p!=null&&(s.categoryGap=p)});var r={};return U(t,function(n,i){r[i]={};var o=n.stacks,a=n.bandWidth,s=n.categoryGap;if(s==null){var l=ze(o).length;s=Math.max(35-l*4,15)+"%"}var u=Er(s,a),c=Er(n.gap,1),f=n.remainedWidth,h=n.autoWidthCount,d=(f-u)/(h+(h-1)*c);d=Math.max(d,0),U(o,function(v){var y=v.maxWidth,b=v.minWidth;if(v.width){var w=v.width;y&&(w=Math.min(w,y)),b&&(w=Math.max(w,b)),v.width=w,f-=w+c*w,h--}else{var w=d;y&&y<w&&(w=Math.min(y,f)),b&&b>w&&(w=b),w!==d&&(v.width=w,f-=w+c*w,h--)}}),d=(f-u)/(h+(h-1)*c),d=Math.max(d,0);var p=0,g;U(o,function(v,y){v.width||(v.width=d),g=v,p+=v.width*(1+c)}),g&&(p-=g.width*c);var m=-p/2;U(o,function(v,y){r[i][y]=r[i][y]||{bandWidth:a,offset:m,width:v.width},m+=v.width*(1+c)})}),r}function yft(e,t,r){if(e&&t){var n=e[QA(t)];return n!=null&&r!=null?n[JA(r)]:n}}function _ft(e,t){var r=WU(e,t),n=jU(r);U(r,function(i){var o=i.getData(),a=i.coordinateSystem,s=a.getBaseAxis(),l=JA(i),u=n[QA(s)][l],c=u.offset,f=u.width;o.setLayout({bandWidth:u.bandWidth,offset:c,size:f})})}function bft(e){return{seriesType:e,plan:jA(),reset:function(t){if(!!HU(t)){var r=t.getData(),n=t.coordinateSystem,i=n.getBaseAxis(),o=n.getOtherAxis(i),a=r.getDimensionIndex(r.mapDimension(o.dim)),s=r.getDimensionIndex(r.mapDimension(i.dim)),l=t.get("showBackground",!0),u=r.mapDimension(o.dim),c=r.getCalculationInfo("stackResultDimension"),f=Ac(r,u)&&!!r.getCalculationInfo("stackedOnSeries"),h=o.isHorizontal(),d=wft(i,o),p=XU(t),g=t.get("barMinHeight")||0,m=c&&r.getDimensionIndex(c),v=r.getLayout("size"),y=r.getLayout("offset");return{progress:function(b,w){for(var T=b.count,S=p&&ss(T*3),k=p&&l&&ss(T*3),E=p&&ss(T),P=n.master.getRect(),C=h?P.width:P.height,A,L=w.getStore(),R=0;(A=b.next())!=null;){var D=L.get(f?m:a,A),F=L.get(s,A),z=d,Y=void 0;f&&(Y=+D-L.get(a,A));var K=void 0,et=void 0,Tt=void 0,Ct=void 0;if(h){var vt=n.dataToPoint([D,F]);if(f){var wt=n.dataToPoint([Y,F]);z=wt[0]}K=z,et=vt[1]+y,Tt=vt[0]-z,Ct=v,Math.abs(Tt)<g&&(Tt=(Tt<0?-1:1)*g)}else{var vt=n.dataToPoint([F,D]);if(f){var wt=n.dataToPoint([F,Y]);z=wt[1]}K=vt[0]+y,et=z,Tt=v,Ct=vt[1]-z,Math.abs(Ct)<g&&(Ct=(Ct<=0?-1:1)*g)}p?(S[R]=K,S[R+1]=et,S[R+2]=h?Tt:Ct,k&&(k[R]=h?P.x:K,k[R+1]=h?et:P.y,k[R+2]=C),E[A]=A):w.setItemLayout(A,{x:K,y:et,width:Tt,height:Ct}),R+=3}p&&w.setLayout({largePoints:S,largeDataIndices:E,largeBackgroundPoints:k,valueAxisHorizontal:h})}}}}}}function HU(e){return e.coordinateSystem&&e.coordinateSystem.type==="cartesian2d"}function XU(e){return e.pipelineContext&&e.pipelineContext.large}function wft(e,t){return t.toGlobalCoord(t.dataToCoord(t.type==="log"?1:0))}var Sft=function(e,t,r,n){for(;r<n;){var i=r+n>>>1;e[i][1]<t?r=i+1:n=i}return r},YU=function(e){Ot(t,e);function t(r){var n=e.call(this,r)||this;return n.type="time",n}return t.prototype.getLabel=function(r){var n=this.getSetting("useUTC");return Hb(r.value,X6[Nst(Eh(this._minLevelUnit))]||X6.second,n,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(r,n,i){var o=this.getSetting("useUTC"),a=this.getSetting("locale");return Fst(r,n,i,a,o)},t.prototype.getTicks=function(){var r=this._interval,n=this._extent,i=[];if(!r)return i;i.push({value:n[0],level:0});var o=this.getSetting("useUTC"),a=xft(this._minLevelUnit,this._approxInterval,o,n);return i=i.concat(a),i.push({value:n[1],level:0}),i},t.prototype.calcNiceExtent=function(r){var n=this._extent;if(n[0]===n[1]&&(n[0]-=Hi,n[1]+=Hi),n[1]===-1/0&&n[0]===1/0){var i=new Date;n[1]=+new Date(i.getFullYear(),i.getMonth(),i.getDate()),n[0]=n[1]-Hi}this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval)},t.prototype.calcNiceTicks=function(r,n,i){r=r||10;var o=this._extent,a=o[1]-o[0];this._approxInterval=a/r,n!=null&&this._approxInterval<n&&(this._approxInterval=n),i!=null&&this._approxInterval>i&&(this._approxInterval=i);var s=Em.length,l=Math.min(Sft(Em,this._approxInterval,0,s),s-1);this._interval=Em[l][1],this._minLevelUnit=Em[Math.max(l-1,0)][0]},t.prototype.parse=function(r){return He(r)?r:+_s(r)},t.prototype.contain=function(r){return i2(this.parse(r),this._extent)},t.prototype.normalize=function(r){return o2(this.parse(r),this._extent)},t.prototype.scale=function(r){return a2(r,this._extent)},t.type="time",t}(o0),Em=[["second",OA],["minute",RA],["hour",Vg],["quarter-day",Vg*6],["half-day",Vg*12],["day",Hi*1.2],["half-week",Hi*3.5],["week",Hi*7],["month",Hi*31],["quarter",Hi*95],["half-year",H6/2],["year",H6]];function Tft(e,t,r,n){var i=_s(t),o=_s(r),a=function(p){return Y6(i,p,n)===Y6(o,p,n)},s=function(){return a("year")},l=function(){return s()&&a("month")},u=function(){return l()&&a("day")},c=function(){return u()&&a("hour")},f=function(){return c()&&a("minute")},h=function(){return f()&&a("second")},d=function(){return h()&&a("millisecond")};switch(e){case"year":return s();case"month":return l();case"day":return u();case"hour":return c();case"minute":return f();case"second":return h();case"millisecond":return d()}}function kft(e,t){return e/=Hi,e>16?16:e>7.5?7:e>3.5?4:e>1.5?2:1}function Pft(e){var t=30*Hi;return e/=t,e>6?6:e>3?3:e>2?2:1}function Eft(e){return e/=Vg,e>12?12:e>6?6:e>3.5?4:e>2?2:1}function iL(e,t){return e/=t?RA:OA,e>30?30:e>20?20:e>15?15:e>10?10:e>5?5:e>2?2:1}function Cft(e){return ez(e,!0)}function Aft(e,t,r){var n=new Date(e);switch(Eh(t)){case"year":case"month":n[uV(r)](0);case"day":n[cV(r)](1);case"hour":n[fV(r)](0);case"minute":n[hV(r)](0);case"second":n[dV(r)](0),n[pV(r)](0)}return n.getTime()}function xft(e,t,r,n){var i=1e4,o=sV,a=0;function s(C,A,L,R,D,F,z){for(var Y=new Date(A),K=A,et=Y[R]();K<L&&K<=n[1];)z.push({value:K}),et+=C,Y[D](et),K=Y.getTime();z.push({value:K,notAdd:!0})}function l(C,A,L){var R=[],D=!A.length;if(!Tft(Eh(C),n[0],n[1],r)){D&&(A=[{value:Aft(new Date(n[0]),C,r)},{value:n[1]}]);for(var F=0;F<A.length-1;F++){var z=A[F].value,Y=A[F+1].value;if(z!==Y){var K=void 0,et=void 0,Tt=void 0,Ct=!1;switch(C){case"year":K=Math.max(1,Math.round(t/Hi/365)),et=DA(r),Tt=$st(r);break;case"half-year":case"quarter":case"month":K=Pft(t),et=Ch(r),Tt=uV(r);break;case"week":case"half-week":case"day":K=kft(t),et=Xb(r),Tt=cV(r),Ct=!0;break;case"half-day":case"quarter-day":case"hour":K=Eft(t),et=vv(r),Tt=fV(r);break;case"minute":K=iL(t,!0),et=Yb(r),Tt=hV(r);break;case"second":K=iL(t,!1),et=Kb(r),Tt=dV(r);break;case"millisecond":K=Cft(t),et=Zb(r),Tt=pV(r);break}s(K,z,Y,et,Tt,Ct,R),C==="year"&&L.length>1&&F===0&&L.unshift({value:L[0].value-K})}}for(var F=0;F<R.length;F++)L.push(R[F]);return R}}for(var u=[],c=[],f=0,h=0,d=0;d<o.length&&a++<i;++d){var p=Eh(o[d]);if(!!Dst(o[d])){l(o[d],u[u.length-1]||[],c);var g=o[d+1]?Eh(o[d+1]):null;if(p!==g){if(c.length){h=f,c.sort(function(C,A){return C.value-A.value});for(var m=[],v=0;v<c.length;++v){var y=c[v].value;(v===0||c[v-1].value!==y)&&(m.push(c[v]),y>=n[0]&&y<=n[1]&&f++)}var b=(n[1]-n[0])/t;if(f>b*1.5&&h>b/1.5||(u.push(m),f>b||e===o[d]))break}c=[]}}}for(var w=ln(Bt(u,function(C){return ln(C,function(A){return A.value>=n[0]&&A.value<=n[1]&&!A.notAdd})}),function(C){return C.length>0}),T=[],S=w.length-1,d=0;d<w.length;++d)for(var k=w[d],E=0;E<k.length;++E)T.push({value:k[E].value,level:S-d});T.sort(function(C,A){return C.value-A.value});for(var P=[],d=0;d<T.length;++d)(d===0||T[d].value!==T[d-1].value)&&P.push(T[d]);return P}Is.registerClass(YU);const Mft=YU;var oL=Is.prototype,Gg=o0.prototype,Ift=Mr,Lft=Math.floor,Oft=Math.ceil,Cm=Math.pow,ho=Math.log,tx=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="log",r.base=10,r._originalScale=new o0,r._interval=0,r}return t.prototype.getTicks=function(r){var n=this._originalScale,i=this._extent,o=n.getExtent(),a=Gg.getTicks.call(this,r);return Bt(a,function(s){var l=s.value,u=Mr(Cm(this.base,l));return u=l===i[0]&&this._fixMin?Am(u,o[0]):u,u=l===i[1]&&this._fixMax?Am(u,o[1]):u,{value:u}},this)},t.prototype.setExtent=function(r,n){var i=ho(this.base);r=ho(Math.max(0,r))/i,n=ho(Math.max(0,n))/i,Gg.setExtent.call(this,r,n)},t.prototype.getExtent=function(){var r=this.base,n=oL.getExtent.call(this);n[0]=Cm(r,n[0]),n[1]=Cm(r,n[1]);var i=this._originalScale,o=i.getExtent();return this._fixMin&&(n[0]=Am(n[0],o[0])),this._fixMax&&(n[1]=Am(n[1],o[1])),n},t.prototype.unionExtent=function(r){this._originalScale.unionExtent(r);var n=this.base;r[0]=ho(r[0])/ho(n),r[1]=ho(r[1])/ho(n),oL.unionExtent.call(this,r)},t.prototype.unionExtentFromData=function(r,n){this.unionExtent(r.getApproximateExtent(n))},t.prototype.calcNiceTicks=function(r){r=r||10;var n=this._extent,i=n[1]-n[0];if(!(i===1/0||i<=0)){var o=$it(i),a=r/i*o;for(a<=.5&&(o*=10);!isNaN(o)&&Math.abs(o)<1&&Math.abs(o)>0;)o*=10;var s=[Mr(Oft(n[0]/o)*o),Mr(Lft(n[1]/o)*o)];this._interval=o,this._niceExtent=s}},t.prototype.calcNiceExtent=function(r){Gg.calcNiceExtent.call(this,r),this._fixMin=r.fixMin,this._fixMax=r.fixMax},t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return r=ho(r)/ho(this.base),i2(r,this._extent)},t.prototype.normalize=function(r){return r=ho(r)/ho(this.base),o2(r,this._extent)},t.prototype.scale=function(r){return r=a2(r,this._extent),Cm(this.base,r)},t.type="log",t}(Is),KU=tx.prototype;KU.getMinorTicks=Gg.getMinorTicks;KU.getLabel=Gg.getLabel;function Am(e,t){return Ift(e,ya(t))}Is.registerClass(tx);const Rft=tx;var Dft=function(){function e(t,r,n){this._prepareParams(t,r,n)}return e.prototype._prepareParams=function(t,r,n){n[1]<n[0]&&(n=[NaN,NaN]),this._dataMin=n[0],this._dataMax=n[1];var i=this._isOrdinal=t.type==="ordinal";this._needCrossZero=t.type==="interval"&&r.getNeedCrossZero&&r.getNeedCrossZero();var o=this._modelMinRaw=r.get("min",!0);ue(o)?this._modelMinNum=xm(t,o({min:n[0],max:n[1]})):o!=="dataMin"&&(this._modelMinNum=xm(t,o));var a=this._modelMaxRaw=r.get("max",!0);if(ue(a)?this._modelMaxNum=xm(t,a({min:n[0],max:n[1]})):a!=="dataMax"&&(this._modelMaxNum=xm(t,a)),i)this._axisDataLen=r.getCategories().length;else{var s=r.get("boundaryGap"),l=St(s)?s:[s||0,s||0];typeof l[0]=="boolean"||typeof l[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[ms(l[0],1),ms(l[1],1)]}},e.prototype.calculate=function(){var t=this._isOrdinal,r=this._dataMin,n=this._dataMax,i=this._axisDataLen,o=this._boundaryGapInner,a=t?null:n-r||Math.abs(r),s=this._modelMinRaw==="dataMin"?r:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?n:this._modelMaxNum,u=s!=null,c=l!=null;s==null&&(s=t?i?0:NaN:r-o[0]*a),l==null&&(l=t?i?i-1:NaN:n+o[1]*a),(s==null||!isFinite(s))&&(s=NaN),(l==null||!isFinite(l))&&(l=NaN);var f=s_(s)||s_(l)||t&&!i;this._needCrossZero&&(s>0&&l>0&&!u&&(s=0),s<0&&l<0&&!c&&(l=0));var h=this._determinedMin,d=this._determinedMax;return h!=null&&(s=h,u=!0),d!=null&&(l=d,c=!0),{min:s,max:l,minFixed:u,maxFixed:c,isBlank:f}},e.prototype.modifyDataMinMax=function(t,r){this[Fft[t]]=r},e.prototype.setDeterminedMinMax=function(t,r){var n=Nft[t];this[n]=r},e.prototype.freeze=function(){this.frozen=!0},e}(),Nft={min:"_determinedMin",max:"_determinedMax"},Fft={min:"_dataMin",max:"_dataMax"};function $ft(e,t,r){var n=e.rawExtentInfo;return n||(n=new Dft(e,t,r),e.rawExtentInfo=n,n)}function xm(e,t){return t==null?null:s_(t)?NaN:e.parse(t)}function ZU(e,t){var r=e.type,n=$ft(e,t,e.getExtent()).calculate();e.setBlank(n.isBlank);var i=n.min,o=n.max,a=t.ecModel;if(a&&r==="time"){var s=WU("bar",a),l=!1;if(U(s,function(f){l=l||f.getBaseAxis()===t.axis}),l){var u=jU(s),c=Bft(i,o,t,u);i=c.min,o=c.max}}return{extent:[i,o],fixMin:n.minFixed,fixMax:n.maxFixed}}function Bft(e,t,r,n){var i=r.axis.getExtent(),o=i[1]-i[0],a=yft(n,r.axis);if(a===void 0)return{min:e,max:t};var s=1/0;U(a,function(d){s=Math.min(d.offset,s)});var l=-1/0;U(a,function(d){l=Math.max(d.offset+d.width,l)}),s=Math.abs(s),l=Math.abs(l);var u=s+l,c=t-e,f=1-(s+l)/o,h=c/f-c;return t+=h*(l/u),e-=h*(s/u),{min:e,max:t}}function aL(e,t){var r=t,n=ZU(e,r),i=n.extent,o=r.get("splitNumber");e instanceof Rft&&(e.base=r.get("logBase"));var a=e.type,s=r.get("interval"),l=a==="interval"||a==="time";e.setExtent(i[0],i[1]),e.calcNiceExtent({splitNumber:o,fixMin:n.fixMin,fixMax:n.fixMax,minInterval:l?r.get("minInterval"):null,maxInterval:l?r.get("maxInterval"):null}),s!=null&&e.setInterval&&e.setInterval(s)}function zft(e,t){if(t=t||e.get("type"),t)switch(t){case"category":return new zU({ordinalMeta:e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),extent:[1/0,-1/0]});case"time":return new Mft({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new(Is.getClass(t)||o0)}}function Vft(e){var t=e.scale.getExtent(),r=t[0],n=t[1];return!(r>0&&n>0||r<0&&n<0)}function a0(e){var t=e.getLabelModel().get("formatter"),r=e.type==="category"?e.scale.getExtent()[0]:null;return e.scale.type==="time"?function(n){return function(i,o){return e.scale.getFormattedLabel(i,o,n)}}(t):$t(t)?function(n){return function(i){var o=e.scale.getLabel(i),a=n.replace("{value}",o!=null?o:"");return a}}(t):ue(t)?function(n){return function(i,o){return r!=null&&(o=i.value-r),n(ex(e,i),o,i.level!=null?{level:i.level}:null)}}(t):function(n){return e.scale.getLabel(n)}}function ex(e,t){return e.type==="category"?e.scale.getLabel(t):t.value}function Uft(e){var t=e.model,r=e.scale;if(!(!t.get(["axisLabel","show"])||r.isBlank())){var n,i,o=r.getExtent();r instanceof zU?i=r.count():(n=r.getTicks(),i=n.length);var a=e.getLabelModel(),s=a0(e),l,u=1;i>40&&(u=Math.ceil(i/40));for(var c=0;c<i;c+=u){var f=n?n[c]:{value:o[0]+c},h=s(f,c),d=a.getTextRect(h),p=Wft(d,a.get("rotate")||0);l?l.union(p):l=p}return l}}function Wft(e,t){var r=t*Math.PI/180,n=e.width,i=e.height,o=n*Math.abs(Math.cos(r))+Math.abs(i*Math.sin(r)),a=n*Math.abs(Math.sin(r))+Math.abs(i*Math.cos(r)),s=new Le(e.x,e.y,o,a);return s}function rx(e){var t=e.get("interval");return t==null?"auto":t}function qU(e){return e.type==="category"&&rx(e.getLabelModel())===0}function jft(e,t){var r={};return U(e.mapDimensionsAll(t),function(n){r[NU(e,n)]=!0}),ze(r)}var Gft=function(){function e(){}return e.prototype.getNeedCrossZero=function(){var t=this.option;return!t.scale},e.prototype.getCoordSysModel=function(){},e}(),sL=[],Hft={registerPreprocessor:EU,registerProcessor:CU,registerPostInit:Oct,registerPostUpdate:Rct,registerUpdateLifecycle:ZA,registerAction:Hc,registerCoordinateSystem:Dct,registerLayout:Nct,registerVisual:Xc,registerTransform:$ct,registerLoading:AU,registerMap:Fct,registerImpl:hct,PRIORITY:Ect,ComponentModel:qe,ComponentView:eo,SeriesModel:Ia,ChartView:Zi,registerComponentModel:function(e){qe.registerClass(e)},registerComponentView:function(e){eo.registerClass(e)},registerSeriesModel:function(e){Ia.registerClass(e)},registerChartView:function(e){Zi.registerClass(e)},registerSubTypeDefaulter:function(e,t){qe.registerSubTypeDefaulter(e,t)},registerPainter:function(e,t){Lit(e,t)}};function Qr(e){if(St(e)){U(e,function(t){Qr(t)});return}De(sL,e)>=0||(sL.push(e),ue(e)&&(e={install:e}),e.install(Hft))}var wv=nr();function Xft(e){return e.type==="category"?Kft(e):qft(e)}function Yft(e,t){return e.type==="category"?Zft(e,t):{ticks:Bt(e.scale.getTicks(),function(r){return r.value})}}function Kft(e){var t=e.getLabelModel(),r=JU(e,t);return!t.get("show")||e.scale.isBlank()?{labels:[],labelCategoryInterval:r.labelCategoryInterval}:r}function JU(e,t){var r=QU(e,"labels"),n=rx(t),i=tW(r,n);if(i)return i;var o,a;return ue(n)?o=nW(e,n):(a=n==="auto"?Jft(e):n,o=rW(e,a)),eW(r,n,{labels:o,labelCategoryInterval:a})}function Zft(e,t){var r=QU(e,"ticks"),n=rx(t),i=tW(r,n);if(i)return i;var o,a;if((!t.get("show")||e.scale.isBlank())&&(o=[]),ue(n))o=nW(e,n,!0);else if(n==="auto"){var s=JU(e,e.getLabelModel());a=s.labelCategoryInterval,o=Bt(s.labels,function(l){return l.tickValue})}else a=n,o=rW(e,a,!0);return eW(r,n,{ticks:o,tickCategoryInterval:a})}function qft(e){var t=e.scale.getTicks(),r=a0(e);return{labels:Bt(t,function(n,i){return{level:n.level,formattedLabel:r(n,i),rawLabel:e.scale.getLabel(n),tickValue:n.value}})}}function QU(e,t){return wv(e)[t]||(wv(e)[t]=[])}function tW(e,t){for(var r=0;r<e.length;r++)if(e[r].key===t)return e[r].value}function eW(e,t,r){return e.push({key:t,value:r}),r}function Jft(e){var t=wv(e).autoInterval;return t!=null?t:wv(e).autoInterval=e.calculateCategoryInterval()}function Qft(e){var t=tht(e),r=a0(e),n=(t.axisRotate-t.labelRotate)/180*Math.PI,i=e.scale,o=i.getExtent(),a=i.count();if(o[1]-o[0]<1)return 0;var s=1;a>40&&(s=Math.max(1,Math.floor(a/40)));for(var l=o[0],u=e.dataToCoord(l+1)-e.dataToCoord(l),c=Math.abs(u*Math.cos(n)),f=Math.abs(u*Math.sin(n)),h=0,d=0;l<=o[1];l+=s){var p=0,g=0,m=cA(r({value:l}),t.font,"center","top");p=m.width*1.3,g=m.height*1.3,h=Math.max(h,p,7),d=Math.max(d,g,7)}var v=h/c,y=d/f;isNaN(v)&&(v=1/0),isNaN(y)&&(y=1/0);var b=Math.max(0,Math.floor(Math.min(v,y))),w=wv(e.model),T=e.getExtent(),S=w.lastAutoInterval,k=w.lastTickCount;return S!=null&&k!=null&&Math.abs(S-b)<=1&&Math.abs(k-a)<=1&&S>b&&w.axisExtent0===T[0]&&w.axisExtent1===T[1]?b=S:(w.lastTickCount=a,w.lastAutoInterval=b,w.axisExtent0=T[0],w.axisExtent1=T[1]),b}function tht(e){var t=e.getLabelModel();return{axisRotate:e.getRotate?e.getRotate():e.isHorizontal&&!e.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}function rW(e,t,r){var n=a0(e),i=e.scale,o=i.getExtent(),a=e.getLabelModel(),s=[],l=Math.max((t||0)+1,1),u=o[0],c=i.count();u!==0&&l>1&&c/l>2&&(u=Math.round(Math.ceil(u/l)*l));var f=qU(e),h=a.get("showMinLabel")||f,d=a.get("showMaxLabel")||f;h&&u!==o[0]&&g(o[0]);for(var p=u;p<=o[1];p+=l)g(p);d&&p-l!==o[1]&&g(o[1]);function g(m){var v={value:m};s.push(r?m:{formattedLabel:n(v),rawLabel:i.getLabel(v),tickValue:m})}return s}function nW(e,t,r){var n=e.scale,i=a0(e),o=[];return U(n.getTicks(),function(a){var s=n.getLabel(a),l=a.value;t(a.value,s)&&o.push(r?l:{formattedLabel:i(a),rawLabel:s,tickValue:l})}),o}var lL=[0,1],eht=function(){function e(t,r,n){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=r,this._extent=n||[0,0]}return e.prototype.contain=function(t){var r=this._extent,n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return t>=n&&t<=i},e.prototype.containData=function(t){return this.scale.contain(t)},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.getPixelPrecision=function(t){return Dit(t||this.scale.getExtent(),this._extent)},e.prototype.setExtent=function(t,r){var n=this._extent;n[0]=t,n[1]=r},e.prototype.dataToCoord=function(t,r){var n=this._extent,i=this.scale;return t=i.normalize(t),this.onBand&&i.type==="ordinal"&&(n=n.slice(),uL(n,i.count())),ys(t,lL,n,r)},e.prototype.coordToData=function(t,r){var n=this._extent,i=this.scale;this.onBand&&i.type==="ordinal"&&(n=n.slice(),uL(n,i.count()));var o=ys(t,n,lL,r);return this.scale.scale(o)},e.prototype.pointToData=function(t,r){},e.prototype.getTicksCoords=function(t){t=t||{};var r=t.tickModel||this.getTickModel(),n=Yft(this,r),i=n.ticks,o=Bt(i,function(s){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(s):s),tickValue:s}},this),a=r.get("alignWithLabel");return rht(this,o,a,t.clamp),o},e.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var t=this.model.getModel("minorTick"),r=t.get("splitNumber");r>0&&r<100||(r=5);var n=this.scale.getMinorTicks(r),i=Bt(n,function(o){return Bt(o,function(a){return{coord:this.dataToCoord(a),tickValue:a}},this)},this);return i},e.prototype.getViewLabels=function(){return Xft(this).labels},e.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},e.prototype.getTickModel=function(){return this.model.getModel("axisTick")},e.prototype.getBandWidth=function(){var t=this._extent,r=this.scale.getExtent(),n=r[1]-r[0]+(this.onBand?1:0);n===0&&(n=1);var i=Math.abs(t[1]-t[0]);return Math.abs(i)/n},e.prototype.calculateCategoryInterval=function(){return Qft(this)},e}();function uL(e,t){var r=e[1]-e[0],n=t,i=r/n/2;e[0]+=i,e[1]-=i}function rht(e,t,r,n){var i=t.length;if(!e.onBand||r||!i)return;var o=e.getExtent(),a,s;if(i===1)t[0].coord=o[0],a=t[1]={coord:o[0]};else{var l=t[i-1].tickValue-t[0].tickValue,u=(t[i-1].coord-t[0].coord)/l;U(t,function(d){d.coord-=u/2});var c=e.scale.getExtent();s=1+c[1]-t[i-1].tickValue,a={coord:t[i-1].coord+u*s},t.push(a)}var f=o[0]>o[1];h(t[0].coord,o[0])&&(n?t[0].coord=o[0]:t.shift()),n&&h(o[0],t[0].coord)&&t.unshift({coord:o[0]}),h(o[1],a.coord)&&(n?a.coord=o[1]:t.pop()),n&&h(a.coord,o[1])&&t.push({coord:o[1]});function h(d,p){return d=Mr(d),p=Mr(p),f?d>p:d<p}}const nht=eht;function iht(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(!n.defaultAttr.ignore){var i=n.label,o=i.getComputedTransform(),a=i.getBoundingRect(),s=!o||o[1]<1e-5&&o[2]<1e-5,l=i.style.margin||0,u=a.clone();u.applyTransform(o),u.x-=l/2,u.y-=l/2,u.width+=l,u.height+=l;var c=s?new y_(a,o):null;t.push({label:i,labelLine:n.labelLine,rect:u,localRect:a,obb:c,priority:n.priority,defaultAttr:n.defaultAttr,layoutOption:n.computedLayoutOption,axisAligned:s,transform:o})}}return t}function oht(e){var t=[];e.sort(function(g,m){return m.priority-g.priority});var r=new Le(0,0,0,0);function n(g){if(!g.ignore){var m=g.ensureState("emphasis");m.ignore==null&&(m.ignore=!1)}g.ignore=!0}for(var i=0;i<e.length;i++){var o=e[i],a=o.axisAligned,s=o.localRect,l=o.transform,u=o.label,c=o.labelLine;r.copy(o.rect),r.width-=.1,r.height-=.1,r.x+=.05,r.y+=.05;for(var f=o.obb,h=!1,d=0;d<t.length;d++){var p=t[d];if(!!r.intersect(p.rect)){if(a&&p.axisAligned){h=!0;break}if(p.obb||(p.obb=new y_(p.localRect,p.transform)),f||(f=new y_(s,l)),f.intersect(p.obb)){h=!0;break}}}h?(n(u),c&&n(c)):(u.attr("ignore",o.defaultAttr.ignore),c&&c.attr("ignore",o.defaultAttr.labelGuideIgnore),t.push(o))}}function cL(e,t,r){var n=Vc.createCanvas(),i=t.getWidth(),o=t.getHeight(),a=n.style;return a&&(a.position="absolute",a.left="0",a.top="0",a.width=i+"px",a.height=o+"px",n.setAttribute("data-zr-dom-id",e)),n.width=i*r,n.height=o*r,n}var aht=function(e){Ke(t,e);function t(r,n,i){var o=e.call(this)||this;o.motionBlur=!1,o.lastFrameAlpha=.7,o.dpr=1,o.virtual=!1,o.config={},o.incremental=!1,o.zlevel=0,o.maxRepaintRectCount=5,o.__dirty=!0,o.__firstTimePaint=!0,o.__used=!1,o.__drawIndex=0,o.__startIndex=0,o.__endIndex=0,o.__prevStartIndex=null,o.__prevEndIndex=null;var a;i=i||p_,typeof r=="string"?a=cL(r,n,i):Yt(r)&&(a=r,r=a.id),o.id=r,o.dom=a;var s=a.style;return s&&(xB(a),a.onselectstart=function(){return!1},s.padding="0",s.margin="0",s.borderWidth="0"),o.painter=n,o.dpr=i,o}return t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var r=this.dpr;this.domBack=cL("back-"+this.id,this.painter,r),this.ctxBack=this.domBack.getContext("2d"),r!==1&&this.ctxBack.scale(r,r)},t.prototype.createRepaintRects=function(r,n,i,o){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var a=[],s=this.maxRepaintRectCount,l=!1,u=new Le(0,0,0,0);function c(y){if(!(!y.isFinite()||y.isZero()))if(a.length===0){var b=new Le(0,0,0,0);b.copy(y),a.push(b)}else{for(var w=!1,T=1/0,S=0,k=0;k<a.length;++k){var E=a[k];if(E.intersect(y)){var P=new Le(0,0,0,0);P.copy(E),P.union(y),a[k]=P,w=!0;break}else if(l){u.copy(y),u.union(E);var C=y.width*y.height,A=E.width*E.height,L=u.width*u.height,R=L-C-A;R<T&&(T=R,S=k)}}if(l&&(a[S].union(y),w=!0),!w){var b=new Le(0,0,0,0);b.copy(y),a.push(b)}l||(l=a.length>=s)}}for(var f=this.__startIndex;f<this.__endIndex;++f){var h=r[f];if(h){var d=h.shouldBePainted(i,o,!0,!0),p=h.__isRendered&&(h.__dirty&yi||!d)?h.getPrevPaintRect():null;p&&c(p);var g=d&&(h.__dirty&yi||!h.__isRendered)?h.getPaintRect():null;g&&c(g)}}for(var f=this.__prevStartIndex;f<this.__prevEndIndex;++f){var h=n[f],d=h.shouldBePainted(i,o,!0,!0);if(h&&(!d||!h.__zr)&&h.__isRendered){var p=h.getPrevPaintRect();p&&c(p)}}var m;do{m=!1;for(var f=0;f<a.length;){if(a[f].isZero()){a.splice(f,1);continue}for(var v=f+1;v<a.length;)a[f].intersect(a[v])?(m=!0,a[f].union(a[v]),a.splice(v,1)):v++;f++}}while(m);return this._paintRects=a,a},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(r,n){var i=this.dpr,o=this.dom,a=o.style,s=this.domBack;a&&(a.width=r+"px",a.height=n+"px"),o.width=r*i,o.height=n*i,s&&(s.width=r*i,s.height=n*i,i!==1&&this.ctxBack.scale(i,i))},t.prototype.clear=function(r,n,i){var o=this.dom,a=this.ctx,s=o.width,l=o.height;n=n||this.clearColor;var u=this.motionBlur&&!r,c=this.lastFrameAlpha,f=this.dpr,h=this;u&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(o,0,0,s/f,l/f));var d=this.domBack;function p(g,m,v,y){if(a.clearRect(g,m,v,y),n&&n!=="transparent"){var b=void 0;Lb(n)?(b=n.__canvasGradient||CP(a,n,{x:0,y:0,width:v,height:y}),n.__canvasGradient=b):int(n)&&(n.scaleX=n.scaleX||f,n.scaleY=n.scaleY||f,b=AP(a,n,{dirty:function(){h.setUnpainted(),h.__painter.refresh()}})),a.save(),a.fillStyle=b||n,a.fillRect(g,m,v,y),a.restore()}u&&(a.save(),a.globalAlpha=c,a.drawImage(d,g,m,v,y),a.restore())}!i||u?p(0,0,s,l):i.length&&U(i,function(g){p(g.x*f,g.y*f,g.width*f,g.height*f)})},t}(Vo);const DS=aht;var fL=1e5,Du=314159,Mm=.01,sht=.001;function lht(e){return e?e.__builtin__?!0:!(typeof e.resize!="function"||typeof e.refresh!="function"):!1}function uht(e,t){var r=document.createElement("div");return r.style.cssText=["position:relative","width:"+e+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",r}var cht=function(){function e(t,r,n,i){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var o=!t.nodeName||t.nodeName.toUpperCase()==="CANVAS";this._opts=n=_t({},n||{}),this.dpr=n.devicePixelRatio||p_,this._singleCanvas=o,this.root=t;var a=t.style;a&&(xB(t),t.innerHTML=""),this.storage=r;var s=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(o){var c=t,f=c.width,h=c.height;n.width!=null&&(f=n.width),n.height!=null&&(h=n.height),this.dpr=n.devicePixelRatio||1,c.width=f*this.dpr,c.height=h*this.dpr,this._width=f,this._height=h;var d=new DS(c,this,this.dpr);d.__builtin__=!0,d.initContext(),l[Du]=d,d.zlevel=Du,s.push(Du),this._domRoot=t}else{this._width=wm(t,0,n),this._height=wm(t,1,n);var u=this._domRoot=uht(this._width,this._height);t.appendChild(u)}}return e.prototype.getType=function(){return"canvas"},e.prototype.isSingleCanvas=function(){return this._singleCanvas},e.prototype.getViewportRoot=function(){return this._domRoot},e.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},e.prototype.refresh=function(t){var r=this.storage.getDisplayList(!0),n=this._prevDisplayList,i=this._zlevelList;this._redrawId=Math.random(),this._paintList(r,n,t,this._redrawId);for(var o=0;o<i.length;o++){var a=i[o],s=this._layers[a];if(!s.__builtin__&&s.refresh){var l=o===0?this._backgroundColor:null;s.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=r.slice()),this},e.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},e.prototype._paintHoverList=function(t){var r=t.length,n=this._hoverlayer;if(n&&n.clear(),!!r){for(var i={inHover:!0,viewWidth:this._width,viewHeight:this._height},o,a=0;a<r;a++){var s=t[a];s.__inHover&&(n||(n=this._hoverlayer=this.getLayer(fL)),o||(o=n.ctx,o.save()),ec(o,s,i,a===r-1))}o&&o.restore()}},e.prototype.getHoverLayer=function(){return this.getLayer(fL)},e.prototype.paintOne=function(t,r){uU(t,r)},e.prototype._paintList=function(t,r,n,i){if(this._redrawId===i){n=n||!1,this._updateLayerStatus(t);var o=this._doPaintList(t,r,n),a=o.finished,s=o.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),s&&this._paintHoverList(t),a)this.eachLayer(function(u){u.afterBrush&&u.afterBrush()});else{var l=this;Hk(function(){l._paintList(t,r,n,i)})}}},e.prototype._compositeManually=function(){var t=this.getLayer(Du).ctx,r=this._domRoot.width,n=this._domRoot.height;t.clearRect(0,0,r,n),this.eachBuiltinLayer(function(i){i.virtual&&t.drawImage(i.dom,0,0,r,n)})},e.prototype._doPaintList=function(t,r,n){for(var i=this,o=[],a=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var l=this._zlevelList[s],u=this._layers[l];u.__builtin__&&u!==this._hoverlayer&&(u.__dirty||n)&&o.push(u)}for(var c=!0,f=!1,h=function(g){var m=o[g],v=m.ctx,y=a&&m.createRepaintRects(t,r,d._width,d._height),b=n?m.__startIndex:m.__drawIndex,w=!n&&m.incremental&&Date.now,T=w&&Date.now(),S=m.zlevel===d._zlevelList[0]?d._backgroundColor:null;if(m.__startIndex===m.__endIndex)m.clear(!1,S,y);else if(b===m.__startIndex){var k=t[b];(!k.incremental||!k.notClear||n)&&m.clear(!1,S,y)}b===-1&&(console.error("For some unknown reason. drawIndex is -1"),b=m.__startIndex);var E,P=function(R){var D={inHover:!1,allClipped:!1,prevEl:null,viewWidth:i._width,viewHeight:i._height};for(E=b;E<m.__endIndex;E++){var F=t[E];if(F.__inHover&&(f=!0),i._doPaintEl(F,m,a,R,D,E===m.__endIndex-1),w){var z=Date.now()-T;if(z>15)break}}D.prevElClipPaths&&v.restore()};if(y)if(y.length===0)E=m.__endIndex;else for(var C=d.dpr,A=0;A<y.length;++A){var L=y[A];v.save(),v.beginPath(),v.rect(L.x*C,L.y*C,L.width*C,L.height*C),v.clip(),P(L),v.restore()}else v.save(),P(),v.restore();m.__drawIndex=E,m.__drawIndex<m.__endIndex&&(c=!1)},d=this,p=0;p<o.length;p++)h(p);return me.wxa&&U(this._layers,function(g){g&&g.ctx&&g.ctx.draw&&g.ctx.draw()}),{finished:c,needsRefreshHover:f}},e.prototype._doPaintEl=function(t,r,n,i,o,a){var s=r.ctx;if(n){var l=t.getPaintRect();(!i||l&&l.intersect(i))&&(ec(s,t,o,a),t.setPrevPaintRect(l))}else ec(s,t,o,a)},e.prototype.getLayer=function(t,r){this._singleCanvas&&!this._needsManuallyCompositing&&(t=Du);var n=this._layers[t];return n||(n=new DS("zr_"+t,this,this.dpr),n.zlevel=t,n.__builtin__=!0,this._layerConfig[t]?Ie(n,this._layerConfig[t],!0):this._layerConfig[t-Mm]&&Ie(n,this._layerConfig[t-Mm],!0),r&&(n.virtual=r),this.insertLayer(t,n),n.initContext()),n},e.prototype.insertLayer=function(t,r){var n=this._layers,i=this._zlevelList,o=i.length,a=this._domRoot,s=null,l=-1;if(!n[t]&&!!lht(r)){if(o>0&&t>i[0]){for(l=0;l<o-1&&!(i[l]<t&&i[l+1]>t);l++);s=n[i[l]]}if(i.splice(l+1,0,t),n[t]=r,!r.virtual)if(s){var u=s.dom;u.nextSibling?a.insertBefore(r.dom,u.nextSibling):a.appendChild(r.dom)}else a.firstChild?a.insertBefore(r.dom,a.firstChild):a.appendChild(r.dom);r.__painter=this}},e.prototype.eachLayer=function(t,r){for(var n=this._zlevelList,i=0;i<n.length;i++){var o=n[i];t.call(r,this._layers[o],o)}},e.prototype.eachBuiltinLayer=function(t,r){for(var n=this._zlevelList,i=0;i<n.length;i++){var o=n[i],a=this._layers[o];a.__builtin__&&t.call(r,a,o)}},e.prototype.eachOtherLayer=function(t,r){for(var n=this._zlevelList,i=0;i<n.length;i++){var o=n[i],a=this._layers[o];a.__builtin__||t.call(r,a,o)}},e.prototype.getLayers=function(){return this._layers},e.prototype._updateLayerStatus=function(t){this.eachBuiltinLayer(function(f,h){f.__dirty=f.__used=!1});function r(f){o&&(o.__endIndex!==f&&(o.__dirty=!0),o.__endIndex=f)}if(this._singleCanvas)for(var n=1;n<t.length;n++){var i=t[n];if(i.zlevel!==t[n-1].zlevel||i.incremental){this._needsManuallyCompositing=!0;break}}var o=null,a=0,s,l;for(l=0;l<t.length;l++){var i=t[l],u=i.zlevel,c=void 0;s!==u&&(s=u,a=0),i.incremental?(c=this.getLayer(u+sht,this._needsManuallyCompositing),c.incremental=!0,a=1):c=this.getLayer(u+(a>0?Mm:0),this._needsManuallyCompositing),c.__builtin__||nA("ZLevel "+u+" has been used by unkown layer "+c.id),c!==o&&(c.__used=!0,c.__startIndex!==l&&(c.__dirty=!0),c.__startIndex=l,c.incremental?c.__drawIndex=-1:c.__drawIndex=l,r(l),o=c),i.__dirty&yi&&!i.__inHover&&(c.__dirty=!0,c.incremental&&c.__drawIndex<0&&(c.__drawIndex=l))}r(l),this.eachBuiltinLayer(function(f,h){!f.__used&&f.getElementCount()>0&&(f.__dirty=!0,f.__startIndex=f.__endIndex=f.__drawIndex=0),f.__dirty&&f.__drawIndex<0&&(f.__drawIndex=f.__startIndex)})},e.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},e.prototype._clearLayer=function(t){t.clear()},e.prototype.setBackgroundColor=function(t){this._backgroundColor=t,U(this._layers,function(r){r.setUnpainted()})},e.prototype.configLayer=function(t,r){if(r){var n=this._layerConfig;n[t]?Ie(n[t],r,!0):n[t]=r;for(var i=0;i<this._zlevelList.length;i++){var o=this._zlevelList[i];if(o===t||o===t+Mm){var a=this._layers[o];Ie(a,n[t],!0)}}}},e.prototype.delLayer=function(t){var r=this._layers,n=this._zlevelList,i=r[t];!i||(i.dom.parentNode.removeChild(i.dom),delete r[t],n.splice(De(n,t),1))},e.prototype.resize=function(t,r){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var i=this._opts,o=this.root;if(t!=null&&(i.width=t),r!=null&&(i.height=r),t=wm(o,0,i),r=wm(o,1,i),n.style.display="",this._width!==t||r!==this._height){n.style.width=t+"px",n.style.height=r+"px";for(var a in this._layers)this._layers.hasOwnProperty(a)&&this._layers[a].resize(t,r);this.refresh(!0)}this._width=t,this._height=r}else{if(t==null||r==null)return;this._width=t,this._height=r,this.getLayer(Du).resize(t,r)}return this},e.prototype.clearLayer=function(t){var r=this._layers[t];r&&r.clear()},e.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},e.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[Du].dom;var r=new DS("image",this,t.pixelRatio||this.dpr);r.initContext(),r.clear(!1,t.backgroundColor||this._backgroundColor);var n=r.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var i=r.dom.width,o=r.dom.height;this.eachLayer(function(f){f.__builtin__?n.drawImage(f.dom,0,0,i,o):f.renderToCanvas&&(n.save(),f.renderToCanvas(n),n.restore())})}else for(var a={inHover:!1,viewWidth:this._width,viewHeight:this._height},s=this.storage.getDisplayList(!0),l=0,u=s.length;l<u;l++){var c=s[l];ec(n,c,a,l===u-1)}return r.dom},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e}();const fht=cht;function ql(e){e.registerPainter("canvas",fht)}var hht=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r){return i0(null,this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(r){var n=new ar,i=No("line",0,r.itemHeight/2,r.itemWidth,0,r.lineStyle.stroke,!1);n.add(i),i.setStyle(r.lineStyle);var o=this.getData().getVisual("symbol"),a=this.getData().getVisual("symbolRotate"),s=o==="none"?"circle":o,l=r.itemHeight*.8,u=No(s,(r.itemWidth-l)/2,(r.itemHeight-l)/2,l,l,r.itemStyle.fill);n.add(u),u.setStyle(r.itemStyle);var c=r.iconRotate==="inherit"?a:r.iconRotate||0;return u.rotation=c*Math.PI/180,u.setOrigin([r.itemWidth/2,r.itemHeight/2]),s.indexOf("empty")>-1&&(u.style.stroke=u.style.fill,u.style.fill="#fff",u.style.lineWidth=2),n},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},t}(Ia);const dht=hht;function Sv(e,t){var r=e.mapDimensionsAll("defaultedLabel"),n=r.length;if(n===1){var i=Hh(e,t,r[0]);return i!=null?i+"":null}else if(n){for(var o=[],a=0;a<r.length;a++)o.push(Hh(e,t,r[a]));return o.join(" ")}}function iW(e,t){var r=e.mapDimensionsAll("defaultedLabel");if(!St(t))return t+"";for(var n=[],i=0;i<r.length;i++){var o=e.getDimensionIndex(r[i]);o>=0&&n.push(t[o])}return n.join(" ")}var pht=function(e){Ot(t,e);function t(r,n,i,o){var a=e.call(this)||this;return a.updateData(r,n,i,o),a}return t.prototype._createSymbol=function(r,n,i,o,a){this.removeAll();var s=No(r,-1,-1,2,2,null,a);s.attr({z2:100,culling:!0,scaleX:o[0]/2,scaleY:o[1]/2}),s.drift=ght,this._symbolType=r,this.add(s)},t.prototype.stopSymbolAnimation=function(r){this.childAt(0).stopAnimation(null,r)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){cv(this.childAt(0))},t.prototype.downplay=function(){fv(this.childAt(0))},t.prototype.setZ=function(r,n){var i=this.childAt(0);i.zlevel=r,i.z=n},t.prototype.setDraggable=function(r,n){var i=this.childAt(0);i.draggable=r,i.cursor=!n&&r?"move":i.cursor},t.prototype.updateData=function(r,n,i,o){this.silent=!1;var a=r.getItemVisual(n,"symbol")||"circle",s=r.hostModel,l=t.getSymbolSize(r,n),u=a!==this._symbolType,c=o&&o.disableAnimation;if(u){var f=r.getItemVisual(n,"symbolKeepAspect");this._createSymbol(a,r,n,l,f)}else{var h=this.childAt(0);h.silent=!1;var d={scaleX:l[0]/2,scaleY:l[1]/2};c?h.attr(d):Jr(h,d,s,n),Yz(h)}if(this._updateCommon(r,n,l,i,o),u){var h=this.childAt(0);if(!c){var d={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:h.style.opacity}};h.scaleX=h.scaleY=0,h.style.opacity=0,Ma(h,d,s,n)}}c&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(r,n,i,o,a){var s=this.childAt(0),l=r.hostModel,u,c,f,h,d,p,g,m,v;if(o&&(u=o.emphasisItemStyle,c=o.blurItemStyle,f=o.selectItemStyle,h=o.focus,d=o.blurScope,g=o.labelStatesModels,m=o.hoverScale,v=o.cursorStyle,p=o.emphasisDisabled),!o||r.hasItemOption){var y=o&&o.itemModel?o.itemModel:r.getItemModel(n),b=y.getModel("emphasis");u=b.getModel("itemStyle").getItemStyle(),f=y.getModel(["select","itemStyle"]).getItemStyle(),c=y.getModel(["blur","itemStyle"]).getItemStyle(),h=b.get("focus"),d=b.get("blurScope"),p=b.get("disabled"),g=jc(y),m=b.getShallow("scale"),v=y.getShallow("cursor")}var w=r.getItemVisual(n,"symbolRotate");s.attr("rotation",(w||0)*Math.PI/180||0);var T=HA(r.getItemVisual(n,"symbolOffset"),i);T&&(s.x=T[0],s.y=T[1]),v&&s.attr("cursor",v);var S=r.getItemVisual(n,"style"),k=S.fill;if(s instanceof As){var E=s.style;s.useStyle(_t({image:E.image,x:E.x,y:E.y,width:E.width,height:E.height},S))}else s.__isEmptyBrush?s.useStyle(_t({},S)):s.useStyle(S),s.style.decal=null,s.setColor(k,a&&a.symbolInnerColor),s.style.strokeNoScale=!0;var P=r.getItemVisual(n,"liftZ"),C=this._z2;P!=null?C==null&&(this._z2=s.z2,s.z2+=P):C!=null&&(s.z2=C,this._z2=null);var A=a&&a.useNameLabel;ud(s,g,{labelFetcher:l,labelDataIndex:n,defaultText:L,inheritColor:k,defaultOpacity:S.opacity});function L(F){return A?r.getName(F):Sv(r,F)}this._sizeX=i[0]/2,this._sizeY=i[1]/2;var R=s.ensureState("emphasis");R.style=u,s.ensureState("select").style=f,s.ensureState("blur").style=c;var D=m==null||m===!0?Math.max(1.1,3/this._sizeY):isFinite(m)&&m>0?+m:1;R.scaleX=this._sizeX*D,R.scaleY=this._sizeY*D,this.setSymbolScale(1),Pc(this,h,d,p)},t.prototype.setSymbolScale=function(r){this.scaleX=this.scaleY=r},t.prototype.fadeOut=function(r,n,i){var o=this.childAt(0),a=Me(this).dataIndex,s=i&&i.animation;if(this.silent=o.silent=!0,i&&i.fadeLabel){var l=o.getTextContent();l&&Ec(l,{style:{opacity:0}},n,{dataIndex:a,removeOpt:s,cb:function(){o.removeTextContent()}})}else o.removeTextContent();Ec(o,{style:{opacity:0},scaleX:0,scaleY:0},n,{dataIndex:a,cb:r,removeOpt:s})},t.getSymbolSize=function(r,n){return oU(r.getItemVisual(n,"symbolSize"))},t}(ar);function ght(e,t){this.parent.drift(e,t)}const s2=pht;function NS(e,t,r,n){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(n.isIgnore&&n.isIgnore(r))&&!(n.clipShape&&!n.clipShape.contain(t[0],t[1]))&&e.getItemVisual(r,"symbol")!=="none"}function hL(e){return e!=null&&!Yt(e)&&(e={isIgnore:e}),e||{}}function dL(e){var t=e.hostModel,r=t.getModel("emphasis");return{emphasisItemStyle:r.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:r.get("focus"),blurScope:r.get("blurScope"),emphasisDisabled:r.get("disabled"),hoverScale:r.get("scale"),labelStatesModels:jc(t),cursorStyle:t.get("cursor")}}var vht=function(){function e(t){this.group=new ar,this._SymbolCtor=t||s2}return e.prototype.updateData=function(t,r){this._progressiveEls=null,r=hL(r);var n=this.group,i=t.hostModel,o=this._data,a=this._SymbolCtor,s=r.disableAnimation,l=dL(t),u={disableAnimation:s},c=r.getSymbolPoint||function(f){return t.getItemLayout(f)};o||n.removeAll(),t.diff(o).add(function(f){var h=c(f);if(NS(t,h,f,r)){var d=new a(t,f,l,u);d.setPosition(h),t.setItemGraphicEl(f,d),n.add(d)}}).update(function(f,h){var d=o.getItemGraphicEl(h),p=c(f);if(!NS(t,p,f,r)){n.remove(d);return}var g=t.getItemVisual(f,"symbol")||"circle",m=d&&d.getSymbolType&&d.getSymbolType();if(!d||m&&m!==g)n.remove(d),d=new a(t,f,l,u),d.setPosition(p);else{d.updateData(t,f,l,u);var v={x:p[0],y:p[1]};s?d.attr(v):Jr(d,v,i)}n.add(d),t.setItemGraphicEl(f,d)}).remove(function(f){var h=o.getItemGraphicEl(f);h&&h.fadeOut(function(){n.remove(h)},i)}).execute(),this._getSymbolPoint=c,this._data=t},e.prototype.updateLayout=function(){var t=this,r=this._data;r&&r.eachItemGraphicEl(function(n,i){var o=t._getSymbolPoint(i);n.setPosition(o),n.markRedraw()})},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=dL(t),this._data=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,r,n){this._progressiveEls=[],n=hL(n);function i(l){l.isGroup||(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var o=t.start;o<t.end;o++){var a=r.getItemLayout(o);if(NS(r,a,o,n)){var s=new this._SymbolCtor(r,o,this._seriesScope);s.traverse(i),s.setPosition(a),this.group.add(s),r.setItemGraphicEl(o,s),this._progressiveEls.push(s)}}},e.prototype.eachRendered=function(t){ld(this._progressiveEls||this.group,t)},e.prototype.remove=function(t){var r=this.group,n=this._data;n&&t?n.eachItemGraphicEl(function(i){i.fadeOut(function(){r.remove(i)},n.hostModel)}):r.removeAll()},e}();const oW=vht;function aW(e,t,r){var n=e.getBaseAxis(),i=e.getOtherAxis(n),o=mht(i,r),a=n.dim,s=i.dim,l=t.mapDimension(s),u=t.mapDimension(a),c=s==="x"||s==="radius"?1:0,f=Bt(e.dimensions,function(p){return t.mapDimension(p)}),h=!1,d=t.getCalculationInfo("stackResultDimension");return Ac(t,f[0])&&(h=!0,f[0]=d),Ac(t,f[1])&&(h=!0,f[1]=d),{dataDimsForPoint:f,valueStart:o,valueAxisDim:s,baseAxisDim:a,stacked:!!h,valueDim:l,baseDim:u,baseDataOffset:c,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function mht(e,t){var r=0,n=e.scale.getExtent();return t==="start"?r=n[0]:t==="end"?r=n[1]:He(t)&&!isNaN(t)?r=t:n[0]>0?r=n[0]:n[1]<0&&(r=n[1]),r}function sW(e,t,r,n){var i=NaN;e.stacked&&(i=r.get(r.getCalculationInfo("stackedOverDimension"),n)),isNaN(i)&&(i=e.valueStart);var o=e.baseDataOffset,a=[];return a[o]=r.get(e.baseDim,n),a[1-o]=i,t.dataToPoint(a)}function yht(e,t){var r=[];return t.diff(e).add(function(n){r.push({cmd:"+",idx:n})}).update(function(n,i){r.push({cmd:"=",idx:i,idx1:n})}).remove(function(n){r.push({cmd:"-",idx:n})}).execute(),r}function _ht(e,t,r,n,i,o,a,s){for(var l=yht(e,t),u=[],c=[],f=[],h=[],d=[],p=[],g=[],m=aW(i,t,a),v=e.getLayout("points")||[],y=t.getLayout("points")||[],b=0;b<l.length;b++){var w=l[b],T=!0,S=void 0,k=void 0;switch(w.cmd){case"=":S=w.idx*2,k=w.idx1*2;var E=v[S],P=v[S+1],C=y[k],A=y[k+1];(isNaN(E)||isNaN(P))&&(E=C,P=A),u.push(E,P),c.push(C,A),f.push(r[S],r[S+1]),h.push(n[k],n[k+1]),g.push(t.getRawIndex(w.idx1));break;case"+":var L=w.idx,R=m.dataDimsForPoint,D=i.dataToPoint([t.get(R[0],L),t.get(R[1],L)]);k=L*2,u.push(D[0],D[1]),c.push(y[k],y[k+1]);var F=sW(m,i,t,L);f.push(F[0],F[1]),h.push(n[k],n[k+1]),g.push(t.getRawIndex(L));break;case"-":T=!1}T&&(d.push(w),p.push(p.length))}p.sort(function(Z,it){return g[Z]-g[it]});for(var z=u.length,Y=ss(z),K=ss(z),et=ss(z),Tt=ss(z),Ct=[],b=0;b<p.length;b++){var vt=p[b],wt=b*2,Kt=vt*2;Y[wt]=u[Kt],Y[wt+1]=u[Kt+1],K[wt]=c[Kt],K[wt+1]=c[Kt+1],et[wt]=f[Kt],et[wt+1]=f[Kt+1],Tt[wt]=h[Kt],Tt[wt+1]=h[Kt+1],Ct[b]=d[vt]}return{current:Y,next:K,stackedOnCurrent:et,stackedOnNext:Tt,status:Ct}}var Gs=Math.min,Hs=Math.max;function dc(e,t){return isNaN(e)||isNaN(t)}function DP(e,t,r,n,i,o,a,s,l){for(var u,c,f,h,d,p,g=r,m=0;m<n;m++){var v=t[g*2],y=t[g*2+1];if(g>=i||g<0)break;if(dc(v,y)){if(l){g+=o;continue}break}if(g===r)e[o>0?"moveTo":"lineTo"](v,y),f=v,h=y;else{var b=v-u,w=y-c;if(b*b+w*w<.5){g+=o;continue}if(a>0){for(var T=g+o,S=t[T*2],k=t[T*2+1];S===v&&k===y&&m<n;)m++,T+=o,g+=o,S=t[T*2],k=t[T*2+1],v=t[g*2],y=t[g*2+1],b=v-u,w=y-c;var E=m+1;if(l)for(;dc(S,k)&&E<n;)E++,T+=o,S=t[T*2],k=t[T*2+1];var P=.5,C=0,A=0,L=void 0,R=void 0;if(E>=n||dc(S,k))d=v,p=y;else{C=S-u,A=k-c;var D=v-u,F=S-v,z=y-c,Y=k-y,K=void 0,et=void 0;if(s==="x"){K=Math.abs(D),et=Math.abs(F);var Tt=C>0?1:-1;d=v-Tt*K*a,p=y,L=v+Tt*et*a,R=y}else if(s==="y"){K=Math.abs(z),et=Math.abs(Y);var Ct=A>0?1:-1;d=v,p=y-Ct*K*a,L=v,R=y+Ct*et*a}else K=Math.sqrt(D*D+z*z),et=Math.sqrt(F*F+Y*Y),P=et/(et+K),d=v-C*a*(1-P),p=y-A*a*(1-P),L=v+C*a*P,R=y+A*a*P,L=Gs(L,Hs(S,v)),R=Gs(R,Hs(k,y)),L=Hs(L,Gs(S,v)),R=Hs(R,Gs(k,y)),C=L-v,A=R-y,d=v-C*K/et,p=y-A*K/et,d=Gs(d,Hs(u,v)),p=Gs(p,Hs(c,y)),d=Hs(d,Gs(u,v)),p=Hs(p,Gs(c,y)),C=v-d,A=y-p,L=v+C*et/K,R=y+A*et/K}e.bezierCurveTo(f,h,d,p,v,y),f=L,h=R}else e.lineTo(v,y)}u=v,c=y,g+=o}return m}var lW=function(){function e(){this.smooth=0,this.smoothConstraint=!0}return e}(),bht=function(e){Ot(t,e);function t(r){var n=e.call(this,r)||this;return n.type="ec-polyline",n}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new lW},t.prototype.buildPath=function(r,n){var i=n.points,o=0,a=i.length/2;if(n.connectNulls){for(;a>0&&dc(i[a*2-2],i[a*2-1]);a--);for(;o<a&&dc(i[o*2],i[o*2+1]);o++);}for(;o<a;)o+=DP(r,i,o,a,a,1,n.smooth,n.smoothMonotone,n.connectNulls)+1},t.prototype.getPointOn=function(r,n){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var i=this.path,o=i.data,a=kc.CMD,s,l,u=n==="x",c=[],f=0;f<o.length;){var h=o[f++],d=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0,b=void 0;switch(h){case a.M:s=o[f++],l=o[f++];break;case a.L:if(d=o[f++],p=o[f++],b=u?(r-s)/(d-s):(r-l)/(p-l),b<=1&&b>=0){var w=u?(p-l)*b+l:(d-s)*b+s;return u?[r,w]:[w,r]}s=d,l=p;break;case a.C:d=o[f++],p=o[f++],g=o[f++],m=o[f++],v=o[f++],y=o[f++];var T=u?c_(s,d,g,v,r,c):c_(l,p,m,y,r,c);if(T>0)for(var S=0;S<T;S++){var k=c[S];if(k<=1&&k>=0){var w=u?zr(l,p,m,y,k):zr(s,d,g,v,k);return u?[r,w]:[w,r]}}s=v,l=y;break}}},t}(Ne),wht=function(e){Ot(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(lW),Sht=function(e){Ot(t,e);function t(r){var n=e.call(this,r)||this;return n.type="ec-polygon",n}return t.prototype.getDefaultShape=function(){return new wht},t.prototype.buildPath=function(r,n){var i=n.points,o=n.stackedOnPoints,a=0,s=i.length/2,l=n.smoothMonotone;if(n.connectNulls){for(;s>0&&dc(i[s*2-2],i[s*2-1]);s--);for(;a<s&&dc(i[a*2],i[a*2+1]);a++);}for(;a<s;){var u=DP(r,i,a,s,s,1,n.smooth,l,n.connectNulls);DP(r,o,a+u-1,u,s,-1,n.stackedOnSmooth,l,n.connectNulls),a+=u+1,r.closePath()}},t}(Ne);function uW(e,t,r,n,i){var o=e.getArea(),a=o.x,s=o.y,l=o.width,u=o.height,c=r.get(["lineStyle","width"])||2;a-=c/2,s-=c/2,l+=c,u+=c,a=Math.floor(a),l=Math.round(l);var f=new Lr({shape:{x:a,y:s,width:l,height:u}});if(t){var h=e.getBaseAxis(),d=h.isHorizontal(),p=h.inverse;d?(p&&(f.shape.x+=l),f.shape.width=0):(p||(f.shape.y+=u),f.shape.height=0);var g=ue(i)?function(m){i(m,f)}:null;Ma(f,{shape:{width:l,height:u,x:a,y:s}},r,null,n,g)}return f}function cW(e,t,r){var n=e.getArea(),i=Mr(n.r0,1),o=Mr(n.r,1),a=new r0({shape:{cx:Mr(e.cx,1),cy:Mr(e.cy,1),r0:i,r:o,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}});if(t){var s=e.getBaseAxis().dim==="angle";s?a.shape.endAngle=n.startAngle:a.shape.r=i,Ma(a,{shape:{endAngle:n.endAngle,r:o}},r)}return a}function fW(e,t,r,n,i){if(e){if(e.type==="polar")return cW(e,t,r);if(e.type==="cartesian2d")return uW(e,t,r,n,i)}else return null;return null}function hd(e,t){return e.type===t}function pL(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return;return!0}}function gL(e){for(var t=1/0,r=1/0,n=-1/0,i=-1/0,o=0;o<e.length;){var a=e[o++],s=e[o++];isNaN(a)||(t=Math.min(a,t),n=Math.max(a,n)),isNaN(s)||(r=Math.min(s,r),i=Math.max(s,i))}return[[t,r],[n,i]]}function vL(e,t){var r=gL(e),n=r[0],i=r[1],o=gL(t),a=o[0],s=o[1];return Math.max(Math.abs(n[0]-a[0]),Math.abs(n[1]-a[1]),Math.abs(i[0]-s[0]),Math.abs(i[1]-s[1]))}function mL(e){return He(e)?e:e?.5:0}function Tht(e,t,r){if(!r.valueDim)return[];for(var n=t.count(),i=ss(n*2),o=0;o<n;o++){var a=sW(r,e,t,o);i[o*2]=a[0],i[o*2+1]=a[1]}return i}function Xs(e,t,r,n){var i=t.getBaseAxis(),o=i.dim==="x"||i.dim==="radius"?0:1,a=[],s=0,l=[],u=[],c=[],f=[];if(n){for(s=0;s<e.length;s+=2)!isNaN(e[s])&&!isNaN(e[s+1])&&f.push(e[s],e[s+1]);e=f}for(s=0;s<e.length-2;s+=2)switch(c[0]=e[s+2],c[1]=e[s+3],u[0]=e[s],u[1]=e[s+1],a.push(u[0],u[1]),r){case"end":l[o]=c[o],l[1-o]=u[1-o],a.push(l[0],l[1]);break;case"middle":var h=(u[o]+c[o])/2,d=[];l[o]=d[o]=h,l[1-o]=u[1-o],d[1-o]=c[1-o],a.push(l[0],l[1]),a.push(d[0],d[1]);break;default:l[o]=u[o],l[1-o]=c[1-o],a.push(l[0],l[1])}return a.push(e[s++],e[s++]),a}function kht(e,t){var r=[],n=e.length,i,o;function a(c,f,h){var d=c.coord,p=(h-d)/(f.coord-d),g=rit(p,[c.color,f.color]);return{coord:h,color:g}}for(var s=0;s<n;s++){var l=e[s],u=l.coord;if(u<0)i=l;else if(u>t){o?r.push(a(o,l,t)):i&&r.push(a(i,l,0),a(i,l,t));break}else i&&(r.push(a(i,l,0)),i=null),r.push(l),o=l}return r}function Pht(e,t,r){var n=e.getVisual("visualMeta");if(!(!n||!n.length||!e.count())&&t.type==="cartesian2d"){for(var i,o,a=n.length-1;a>=0;a--){var s=e.getDimensionInfo(n[a].dimension);if(i=s&&s.coordDim,i==="x"||i==="y"){o=n[a];break}}if(!!o){var l=t.getAxis(i),u=Bt(o.stops,function(b){return{coord:l.toGlobalCoord(l.dataToCoord(b.value)),color:b.color}}),c=u.length,f=o.outerColors.slice();c&&u[0].coord>u[c-1].coord&&(u.reverse(),f.reverse());var h=kht(u,i==="x"?r.getWidth():r.getHeight()),d=h.length;if(!d&&c)return u[0].coord<0?f[1]?f[1]:u[c-1].color:f[0]?f[0]:u[0].color;var p=10,g=h[0].coord-p,m=h[d-1].coord+p,v=m-g;if(v<.001)return"transparent";U(h,function(b){b.offset=(b.coord-g)/v}),h.push({offset:d?h[d-1].offset:.5,color:f[1]||"transparent"}),h.unshift({offset:d?h[0].offset:.5,color:f[0]||"transparent"});var y=new EA(0,0,0,0,h,!0);return y[i]=g,y[i+"2"]=m,y}}}function Eht(e,t,r){var n=e.get("showAllSymbol"),i=n==="auto";if(!(n&&!i)){var o=r.getAxesByScale("ordinal")[0];if(!!o&&!(i&&Cht(o,t))){var a=t.mapDimension(o.dim),s={};return U(o.getViewLabels(),function(l){var u=o.scale.getRawOrdinalNumber(l.tickValue);s[u]=1}),function(l){return!s.hasOwnProperty(t.get(a,l))}}}}function Cht(e,t){var r=e.getExtent(),n=Math.abs(r[1]-r[0])/e.scale.count();isNaN(n)&&(n=0);for(var i=t.count(),o=Math.max(1,Math.round(i/5)),a=0;a<i;a+=o)if(s2.getSymbolSize(t,a)[e.isHorizontal()?1:0]*1.5>n)return!1;return!0}function Aht(e,t){return isNaN(e)||isNaN(t)}function xht(e){for(var t=e.length/2;t>0&&Aht(e[t*2-2],e[t*2-1]);t--);return t-1}function yL(e,t){return[e[t*2],e[t*2+1]]}function Mht(e,t,r){for(var n=e.length/2,i=r==="x"?0:1,o,a,s=0,l=-1,u=0;u<n;u++)if(a=e[u*2+i],!(isNaN(a)||isNaN(e[u*2+1-i]))){if(u===0){o=a;continue}if(o<=t&&a>=t||o>=t&&a<=t){l=u;break}s=u,o=a}return{range:[s,l],t:(t-o)/(a-o)}}function hW(e){if(e.get(["endLabel","show"]))return!0;for(var t=0;t<to.length;t++)if(e.get([to[t],"endLabel","show"]))return!0;return!1}function FS(e,t,r,n){if(hd(t,"cartesian2d")){var i=n.getModel("endLabel"),o=i.get("valueAnimation"),a=n.getData(),s={lastFrameIndex:0},l=hW(n)?function(d,p){e._endLabelOnDuring(d,p,a,s,o,i,t)}:null,u=t.getBaseAxis().isHorizontal(),c=uW(t,r,n,function(){var d=e._endLabel;d&&r&&s.originalX!=null&&d.attr({x:s.originalX,y:s.originalY})},l);if(!n.get("clip",!0)){var f=c.shape,h=Math.max(f.width,f.height);u?(f.y-=h,f.height+=h*2):(f.x-=h,f.width+=h*2)}return l&&l(1,c),c}else return cW(t,r,n)}function Iht(e,t){var r=t.getBaseAxis(),n=r.isHorizontal(),i=r.inverse,o=n?i?"right":"left":"center",a=n?"middle":i?"top":"bottom";return{normal:{align:e.get("align")||o,verticalAlign:e.get("verticalAlign")||a}}}var Lht=function(e){Ot(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(){var r=new ar,n=new oW;this.group.add(n.group),this._symbolDraw=n,this._lineGroup=r},t.prototype.render=function(r,n,i){var o=this,a=r.coordinateSystem,s=this.group,l=r.getData(),u=r.getModel("lineStyle"),c=r.getModel("areaStyle"),f=l.getLayout("points")||[],h=a.type==="polar",d=this._coordSys,p=this._symbolDraw,g=this._polyline,m=this._polygon,v=this._lineGroup,y=r.get("animation"),b=!c.isEmpty(),w=c.get("origin"),T=aW(a,l,w),S=b&&Tht(a,l,T),k=r.get("showSymbol"),E=r.get("connectNulls"),P=k&&!h&&Eht(r,l,a),C=this._data;C&&C.eachItemGraphicEl(function(it,tt){it.__temp&&(s.remove(it),C.setItemGraphicEl(tt,null))}),k||p.remove(),s.add(v);var A=h?!1:r.get("step"),L;a&&a.getArea&&r.get("clip",!0)&&(L=a.getArea(),L.width!=null?(L.x-=.1,L.y-=.1,L.width+=.2,L.height+=.2):L.r0&&(L.r0-=.5,L.r+=.5)),this._clipShapeForSymbol=L;var R=Pht(l,a,i)||l.getVisual("style")[l.getVisual("drawType")];if(!(g&&d.type===a.type&&A===this._step))k&&p.updateData(l,{isIgnore:P,clipShape:L,disableAnimation:!0,getSymbolPoint:function(it){return[f[it*2],f[it*2+1]]}}),y&&this._initSymbolLabelAnimation(l,a,L),A&&(f=Xs(f,a,A,E),S&&(S=Xs(S,a,A,E))),g=this._newPolyline(f),b?m=this._newPolygon(f,S):m&&(v.remove(m),m=this._polygon=null),h||this._initOrUpdateEndLabel(r,a,Cc(R)),v.setClipPath(FS(this,a,!0,r));else{b&&!m?m=this._newPolygon(f,S):m&&!b&&(v.remove(m),m=this._polygon=null),h||this._initOrUpdateEndLabel(r,a,Cc(R));var D=v.getClipPath();if(D){var F=FS(this,a,!1,r);Ma(D,{shape:F.shape},r)}else v.setClipPath(FS(this,a,!0,r));k&&p.updateData(l,{isIgnore:P,clipShape:L,disableAnimation:!0,getSymbolPoint:function(it){return[f[it*2],f[it*2+1]]}}),(!pL(this._stackedOnPoints,S)||!pL(this._points,f))&&(y?this._doUpdateAnimation(l,S,a,i,A,w,E):(A&&(f=Xs(f,a,A,E),S&&(S=Xs(S,a,A,E))),g.setShape({points:f}),m&&m.setShape({points:f,stackedOnPoints:S})))}var z=r.getModel("emphasis"),Y=z.get("focus"),K=z.get("blurScope"),et=z.get("disabled");if(g.useStyle(Ee(u.getLineStyle(),{fill:"none",stroke:R,lineJoin:"bevel"})),hv(g,r,"lineStyle"),g.style.lineWidth>0&&r.get(["emphasis","lineStyle","width"])==="bolder"){var Tt=g.getState("emphasis").style;Tt.lineWidth=+g.style.lineWidth+1}Me(g).seriesIndex=r.seriesIndex,Pc(g,Y,K,et);var Ct=mL(r.get("smooth")),vt=r.get("smoothMonotone");if(g.setShape({smooth:Ct,smoothMonotone:vt,connectNulls:E}),m){var wt=l.getCalculationInfo("stackedOnSeries"),Kt=0;m.useStyle(Ee(c.getAreaStyle(),{fill:R,opacity:.7,lineJoin:"bevel",decal:l.getVisual("style").decal})),wt&&(Kt=mL(wt.get("smooth"))),m.setShape({smooth:Ct,stackedOnSmooth:Kt,smoothMonotone:vt,connectNulls:E}),hv(m,r,"areaStyle"),Me(m).seriesIndex=r.seriesIndex,Pc(m,Y,K,et)}var Z=function(it){o._changePolyState(it)};l.eachItemGraphicEl(function(it){it&&(it.onHoverStateChange=Z)}),this._polyline.onHoverStateChange=Z,this._data=l,this._coordSys=a,this._stackedOnPoints=S,this._points=f,this._step=A,this._valueOrigin=w,r.get("triggerLineEvent")&&(this.packEventData(r,g),m&&this.packEventData(r,m))},t.prototype.packEventData=function(r,n){Me(n).eventData={componentType:"series",componentSubType:"line",componentIndex:r.componentIndex,seriesIndex:r.seriesIndex,seriesName:r.name,seriesType:"line"}},t.prototype.highlight=function(r,n,i,o){var a=r.getData(),s=Tc(a,o);if(this._changePolyState("emphasis"),!(s instanceof Array)&&s!=null&&s>=0){var l=a.getLayout("points"),u=a.getItemGraphicEl(s);if(!u){var c=l[s*2],f=l[s*2+1];if(isNaN(c)||isNaN(f)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(c,f))return;var h=r.get("zlevel")||0,d=r.get("z")||0;u=new s2(a,s),u.x=c,u.y=f,u.setZ(h,d);var p=u.getSymbolPath().getTextContent();p&&(p.zlevel=h,p.z=d,p.z2=this._polyline.z2+1),u.__temp=!0,a.setItemGraphicEl(s,u),u.stopSymbolAnimation(!0),this.group.add(u)}u.highlight()}else Zi.prototype.highlight.call(this,r,n,i,o)},t.prototype.downplay=function(r,n,i,o){var a=r.getData(),s=Tc(a,o);if(this._changePolyState("normal"),s!=null&&s>=0){var l=a.getItemGraphicEl(s);l&&(l.__temp?(a.setItemGraphicEl(s,null),this.group.remove(l)):l.downplay())}else Zi.prototype.downplay.call(this,r,n,i,o)},t.prototype._changePolyState=function(r){var n=this._polygon;uP(this._polyline,r),n&&uP(n,r)},t.prototype._newPolyline=function(r){var n=this._polyline;return n&&this._lineGroup.remove(n),n=new bht({shape:{points:r},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(n),this._polyline=n,n},t.prototype._newPolygon=function(r,n){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new Sht({shape:{points:r,stackedOnPoints:n},segmentIgnoreThreshold:2}),this._lineGroup.add(i),this._polygon=i,i},t.prototype._initSymbolLabelAnimation=function(r,n,i){var o,a,s=n.getBaseAxis(),l=s.inverse;n.type==="cartesian2d"?(o=s.isHorizontal(),a=!1):n.type==="polar"&&(o=s.dim==="angle",a=!0);var u=r.hostModel,c=u.get("animationDuration");ue(c)&&(c=c(null));var f=u.get("animationDelay")||0,h=ue(f)?f(null):f;r.eachItemGraphicEl(function(d,p){var g=d;if(g){var m=[d.x,d.y],v=void 0,y=void 0,b=void 0;if(i)if(a){var w=i,T=n.pointToCoord(m);o?(v=w.startAngle,y=w.endAngle,b=-T[1]/180*Math.PI):(v=w.r0,y=w.r,b=T[0])}else{var S=i;o?(v=S.x,y=S.x+S.width,b=d.x):(v=S.y+S.height,y=S.y,b=d.y)}var k=y===v?0:(b-v)/(y-v);l&&(k=1-k);var E=ue(f)?f(p):c*k+h,P=g.getSymbolPath(),C=P.getTextContent();g.attr({scaleX:0,scaleY:0}),g.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:E}),C&&C.animateFrom({style:{opacity:0}},{duration:300,delay:E}),P.disableLabelAnimation=!0}})},t.prototype._initOrUpdateEndLabel=function(r,n,i){var o=r.getModel("endLabel");if(hW(r)){var a=r.getData(),s=this._polyline,l=a.getLayout("points");if(!l){s.removeTextContent(),this._endLabel=null;return}var u=this._endLabel;u||(u=this._endLabel=new Or({z2:200}),u.ignoreClip=!0,s.setTextContent(this._endLabel),s.disableLabelAnimation=!0);var c=xht(l);c>=0&&(ud(s,jc(r,"endLabel"),{inheritColor:i,labelFetcher:r,labelDataIndex:c,defaultText:function(f,h,d){return d!=null?iW(a,d):Sv(a,f)},enableTextSetter:!0},Iht(o,n)),s.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(r,n,i,o,a,s,l){var u=this._endLabel,c=this._polyline;if(u){r<1&&o.originalX==null&&(o.originalX=u.x,o.originalY=u.y);var f=i.getLayout("points"),h=i.hostModel,d=h.get("connectNulls"),p=s.get("precision"),g=s.get("distance")||0,m=l.getBaseAxis(),v=m.isHorizontal(),y=m.inverse,b=n.shape,w=y?v?b.x:b.y+b.height:v?b.x+b.width:b.y,T=(v?g:0)*(y?-1:1),S=(v?0:-g)*(y?-1:1),k=v?"x":"y",E=Mht(f,w,k),P=E.range,C=P[1]-P[0],A=void 0;if(C>=1){if(C>1&&!d){var L=yL(f,P[0]);u.attr({x:L[0]+T,y:L[1]+S}),a&&(A=h.getRawValue(P[0]))}else{var L=c.getPointOn(w,k);L&&u.attr({x:L[0]+T,y:L[1]+S});var R=h.getRawValue(P[0]),D=h.getRawValue(P[1]);a&&(A=eot(i,p,R,D,E.t))}o.lastFrameIndex=P[0]}else{var F=r===1||o.lastFrameIndex>0?P[0]:0,L=yL(f,F);a&&(A=h.getRawValue(F)),u.attr({x:L[0]+T,y:L[1]+S})}a&&Wb(u).setLabelText(A)}},t.prototype._doUpdateAnimation=function(r,n,i,o,a,s,l){var u=this._polyline,c=this._polygon,f=r.hostModel,h=_ht(this._data,r,this._stackedOnPoints,n,this._coordSys,i,this._valueOrigin),d=h.current,p=h.stackedOnCurrent,g=h.next,m=h.stackedOnNext;if(a&&(d=Xs(h.current,i,a,l),p=Xs(h.stackedOnCurrent,i,a,l),g=Xs(h.next,i,a,l),m=Xs(h.stackedOnNext,i,a,l)),vL(d,g)>3e3||c&&vL(p,m)>3e3){u.stopAnimation(),u.setShape({points:g}),c&&(c.stopAnimation(),c.setShape({points:g,stackedOnPoints:m}));return}u.shape.__points=h.current,u.shape.points=d;var v={shape:{points:g}};h.current!==d&&(v.shape.__points=h.next),u.stopAnimation(),Jr(u,v,f),c&&(c.setShape({points:d,stackedOnPoints:p}),c.stopAnimation(),Jr(c,{shape:{stackedOnPoints:m}},f),u.shape.points!==c.shape.points&&(c.shape.points=u.shape.points));for(var y=[],b=h.status,w=0;w<b.length;w++){var T=b[w].cmd;if(T==="="){var S=r.getItemGraphicEl(b[w].idx1);S&&y.push({el:S,ptIdx:w})}}u.animators&&u.animators.length&&u.animators[0].during(function(){c&&c.dirtyShape();for(var k=u.shape.__points,E=0;E<y.length;E++){var P=y[E].el,C=y[E].ptIdx*2;P.x=k[C],P.y=k[C+1],P.markRedraw()}})},t.prototype.remove=function(r){var n=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl(function(o,a){o.__temp&&(n.remove(o),i.setItemGraphicEl(a,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t}(Zi);const Oht=Lht;function nx(e,t){return{seriesType:e,plan:jA(),reset:function(r){var n=r.getData(),i=r.coordinateSystem,o=r.pipelineContext,a=t||o.large;if(!!i){var s=Bt(i.dimensions,function(d){return n.mapDimension(d)}).slice(0,2),l=s.length,u=n.getCalculationInfo("stackResultDimension");Ac(n,s[0])&&(s[0]=u),Ac(n,s[1])&&(s[1]=u);var c=n.getStore(),f=n.getDimensionIndex(s[0]),h=n.getDimensionIndex(s[1]);return l&&{progress:function(d,p){for(var g=d.end-d.start,m=a&&ss(g*l),v=[],y=[],b=d.start,w=0;b<d.end;b++){var T=void 0;if(l===1){var S=c.get(f,b);T=i.dataToPoint(S,null,y)}else v[0]=c.get(f,b),v[1]=c.get(h,b),T=i.dataToPoint(v,null,y);a?(m[w++]=T[0],m[w++]=T[1]):p.setItemLayout(b,T.slice())}a&&p.setLayout("points",m)}}}}}}var Rht={average:function(e){for(var t=0,r=0,n=0;n<e.length;n++)isNaN(e[n])||(t+=e[n],r++);return r===0?NaN:t/r},sum:function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r]||0;return t},max:function(e){for(var t=-1/0,r=0;r<e.length;r++)e[r]>t&&(t=e[r]);return isFinite(t)?t:NaN},min:function(e){for(var t=1/0,r=0;r<e.length;r++)e[r]<t&&(t=e[r]);return isFinite(t)?t:NaN},nearest:function(e){return e[0]}},Dht=function(e){return Math.round(e.length/2)};function dW(e){return{seriesType:e,reset:function(t,r,n){var i=t.getData(),o=t.get("sampling"),a=t.coordinateSystem,s=i.count();if(s>10&&a.type==="cartesian2d"&&o){var l=a.getBaseAxis(),u=a.getOtherAxis(l),c=l.getExtent(),f=n.getDevicePixelRatio(),h=Math.abs(c[1]-c[0])*(f||1),d=Math.round(s/h);if(isFinite(d)&&d>1){o==="lttb"&&t.setData(i.lttbDownSample(i.mapDimension(u.dim),1/d));var p=void 0;$t(o)?p=Rht[o]:ue(o)&&(p=o),p&&t.setData(i.downSample(i.mapDimension(u.dim),1/d,p,Dht))}}}}}function Yc(e){e.registerChartView(Oht),e.registerSeriesModel(dht),e.registerLayout(nx("line",!0)),e.registerVisual({seriesType:"line",reset:function(t){var r=t.getData(),n=t.getModel("lineStyle").getLineStyle();n&&!n.stroke&&(n.stroke=r.getVisual("style").fill),r.setVisual("legendLineStyle",n)}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,dW("line"))}var pW=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(r,n){return i0(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(r){var n=this.coordinateSystem;if(n&&n.clampData){var i=n.dataToPoint(n.clampData(r)),o=this.getData(),a=o.getLayout("offset"),s=o.getLayout("size"),l=n.getBaseAxis().isHorizontal()?0:1;return i[l]+=a+s/2,i}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(Ia);Ia.registerClass(pW);const _L=pW;var Nht=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(){return i0(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},t.prototype.getProgressiveThreshold=function(){var r=this.get("progressiveThreshold"),n=this.get("largeThreshold");return n>r&&(r=n),r},t.prototype.brushSelector=function(r,n,i){return i.rect(n.getItemLayout(r))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=Gb(_L.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(_L);const Fht=Nht;var $ht=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),Bht=function(e){Ot(t,e);function t(r){var n=e.call(this,r)||this;return n.type="sausage",n}return t.prototype.getDefaultShape=function(){return new $ht},t.prototype.buildPath=function(r,n){var i=n.cx,o=n.cy,a=Math.max(n.r0||0,0),s=Math.max(n.r,0),l=(s-a)*.5,u=a+l,c=n.startAngle,f=n.endAngle,h=n.clockwise,d=Math.PI*2,p=h?f-c<d:c-f<d;p||(c=f-(h?d:-d));var g=Math.cos(c),m=Math.sin(c),v=Math.cos(f),y=Math.sin(f);p?(r.moveTo(g*a+i,m*a+o),r.arc(g*u+i,m*u+o,l,-Math.PI+c,c,!h)):r.moveTo(g*s+i,m*s+o),r.arc(i,o,s,c,f,!h),r.arc(v*u+i,y*u+o,l,f-Math.PI*2,f-Math.PI,!h),a!==0&&r.arc(i,o,a,f,c,h)},t}(Ne);const bL=Bht;function zht(e,t){t=t||{};var r=t.isRoundCap;return function(n,i,o){var a=i.position;if(!a||a instanceof Array)return g_(n,i,o);var s=e(a),l=i.distance!=null?i.distance:5,u=this.shape,c=u.cx,f=u.cy,h=u.r,d=u.r0,p=(h+d)/2,g=u.startAngle,m=u.endAngle,v=(g+m)/2,y=r?Math.abs(h-d)/2:0,b=Math.cos,w=Math.sin,T=c+h*b(g),S=f+h*w(g),k="left",E="top";switch(s){case"startArc":T=c+(d-l)*b(v),S=f+(d-l)*w(v),k="center",E="top";break;case"insideStartArc":T=c+(d+l)*b(v),S=f+(d+l)*w(v),k="center",E="bottom";break;case"startAngle":T=c+p*b(g)+Im(g,l+y,!1),S=f+p*w(g)+Lm(g,l+y,!1),k="right",E="middle";break;case"insideStartAngle":T=c+p*b(g)+Im(g,-l+y,!1),S=f+p*w(g)+Lm(g,-l+y,!1),k="left",E="middle";break;case"middle":T=c+p*b(v),S=f+p*w(v),k="center",E="middle";break;case"endArc":T=c+(h+l)*b(v),S=f+(h+l)*w(v),k="center",E="bottom";break;case"insideEndArc":T=c+(h-l)*b(v),S=f+(h-l)*w(v),k="center",E="top";break;case"endAngle":T=c+p*b(m)+Im(m,l+y,!0),S=f+p*w(m)+Lm(m,l+y,!0),k="left",E="middle";break;case"insideEndAngle":T=c+p*b(m)+Im(m,-l+y,!0),S=f+p*w(m)+Lm(m,-l+y,!0),k="right",E="middle";break;default:return g_(n,i,o)}return n=n||{},n.x=T,n.y=S,n.align=k,n.verticalAlign=E,n}}function Vht(e,t,r,n){if(He(n)){e.setTextConfig({rotation:n});return}else if(St(t)){e.setTextConfig({rotation:0});return}var i=e.shape,o=i.clockwise?i.startAngle:i.endAngle,a=i.clockwise?i.endAngle:i.startAngle,s=(o+a)/2,l,u=r(t);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=s;break;case"startAngle":case"insideStartAngle":l=o;break;case"endAngle":case"insideEndAngle":l=a;break;default:e.setTextConfig({rotation:0});return}var c=Math.PI*1.5-l;u==="middle"&&c>Math.PI/2&&c<Math.PI*1.5&&(c-=Math.PI),e.setTextConfig({rotation:c})}function Im(e,t,r){return t*Math.sin(e)*(r?-1:1)}function Lm(e,t,r){return t*Math.cos(e)*(r?1:-1)}var $S=Math.max,BS=Math.min;function Uht(e,t){var r=e.getArea&&e.getArea();if(hd(e,"cartesian2d")){var n=e.getBaseAxis();if(n.type!=="category"||!n.onBand){var i=t.getLayout("bandWidth");n.isHorizontal()?(r.x-=i,r.width+=i*2):(r.y-=i,r.height+=i*2)}}return r}var Wht=function(e){Ot(t,e);function t(){var r=e.call(this)||this;return r.type=t.type,r._isFirstFrame=!0,r}return t.prototype.render=function(r,n,i,o){this._model=r,this._removeOnRenderedListener(i),this._updateDrawMode(r);var a=r.get("coordinateSystem");(a==="cartesian2d"||a==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(r,n,i):this._renderNormal(r,n,i,o))},t.prototype.incrementalPrepareRender=function(r){this._clear(),this._updateDrawMode(r),this._updateLargeClip(r)},t.prototype.incrementalRender=function(r,n){this._progressiveEls=[],this._incrementalRenderLarge(r,n)},t.prototype.eachRendered=function(r){ld(this._progressiveEls||this.group,r)},t.prototype._updateDrawMode=function(r){var n=r.pipelineContext.large;(this._isLargeDraw==null||n!==this._isLargeDraw)&&(this._isLargeDraw=n,this._clear())},t.prototype._renderNormal=function(r,n,i,o){var a=this.group,s=r.getData(),l=this._data,u=r.coordinateSystem,c=u.getBaseAxis(),f;u.type==="cartesian2d"?f=c.isHorizontal():u.type==="polar"&&(f=c.dim==="angle");var h=r.isAnimationEnabled()?r:null,d=jht(r,u);d&&this._enableRealtimeSort(d,s,i);var p=r.get("clip",!0)||d,g=Uht(u,s);a.removeClipPath();var m=r.get("roundCap",!0),v=r.get("showBackground",!0),y=r.getModel("backgroundStyle"),b=y.get("borderRadius")||0,w=[],T=this._backgroundEls,S=o&&o.isInitSort,k=o&&o.type==="changeAxisOrder";function E(A){var L=Om[u.type](s,A),R=qht(u,f,L);return R.useStyle(y.getItemStyle()),u.type==="cartesian2d"&&R.setShape("r",b),w[A]=R,R}s.diff(l).add(function(A){var L=s.getItemModel(A),R=Om[u.type](s,A,L);if(v&&E(A),!(!s.hasValue(A)||!PL[u.type](R))){var D=!1;p&&(D=wL[u.type](g,R));var F=SL[u.type](r,s,A,R,f,h,c.model,!1,m);d&&(F.forceLabelAnimation=!0),EL(F,s,A,L,R,r,f,u.type==="polar"),S?F.attr({shape:R}):d?TL(d,h,F,R,A,f,!1,!1):Ma(F,{shape:R},r,A),s.setItemGraphicEl(A,F),a.add(F),F.ignore=D}}).update(function(A,L){var R=s.getItemModel(A),D=Om[u.type](s,A,R);if(v){var F=void 0;T.length===0?F=E(L):(F=T[L],F.useStyle(y.getItemStyle()),u.type==="cartesian2d"&&F.setShape("r",b),w[A]=F);var z=Om[u.type](s,A),Y=vW(f,z,u);Jr(F,{shape:Y},h,A)}var K=l.getItemGraphicEl(L);if(!s.hasValue(A)||!PL[u.type](D)){a.remove(K);return}var et=!1;if(p&&(et=wL[u.type](g,D),et&&a.remove(K)),K?Yz(K):K=SL[u.type](r,s,A,D,f,h,c.model,!!K,m),d&&(K.forceLabelAnimation=!0),k){var Tt=K.getTextContent();if(Tt){var Ct=Wb(Tt);Ct.prevValue!=null&&(Ct.prevValue=Ct.value)}}else EL(K,s,A,R,D,r,f,u.type==="polar");S?K.attr({shape:D}):d?TL(d,h,K,D,A,f,!0,k):Jr(K,{shape:D},r,A,null),s.setItemGraphicEl(A,K),K.ignore=et,a.add(K)}).remove(function(A){var L=l.getItemGraphicEl(A);L&&vP(L,r,A)}).execute();var P=this._backgroundGroup||(this._backgroundGroup=new ar);P.removeAll();for(var C=0;C<w.length;++C)P.add(w[C]);a.add(P),this._backgroundEls=w,this._data=s},t.prototype._renderLarge=function(r,n,i){this._clear(),AL(r,this.group),this._updateLargeClip(r)},t.prototype._incrementalRenderLarge=function(r,n){this._removeBackground(),AL(n,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(r){var n=r.get("clip",!0)&&fW(r.coordinateSystem,!1,r),i=this.group;n?i.setClipPath(n):i.removeClipPath()},t.prototype._enableRealtimeSort=function(r,n,i){var o=this;if(!!n.count()){var a=r.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(n,r,i),this._isFirstFrame=!1;else{var s=function(l){var u=n.getItemGraphicEl(l),c=u&&u.shape;return c&&Math.abs(a.isHorizontal()?c.height:c.width)||0};this._onRendered=function(){o._updateSortWithinSameData(n,s,a,i)},i.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(r,n,i){var o=[];return r.each(r.mapDimension(n.dim),function(a,s){var l=i(s);l=l==null?NaN:l,o.push({dataIndex:s,mappedValue:l,ordinalNumber:a})}),o.sort(function(a,s){return s.mappedValue-a.mappedValue}),{ordinalNumbers:Bt(o,function(a){return a.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(r,n,i){for(var o=i.scale,a=r.mapDimension(i.dim),s=Number.MAX_VALUE,l=0,u=o.getOrdinalMeta().categories.length;l<u;++l){var c=r.rawIndexOf(a,o.getRawOrdinalNumber(l)),f=c<0?Number.MIN_VALUE:n(r.indexOfRawIndex(c));if(f>s)return!0;s=f}return!1},t.prototype._isOrderDifferentInView=function(r,n){for(var i=n.scale,o=i.getExtent(),a=Math.max(0,o[0]),s=Math.min(o[1],i.getOrdinalMeta().categories.length-1);a<=s;++a)if(r.ordinalNumbers[a]!==i.getRawOrdinalNumber(a))return!0},t.prototype._updateSortWithinSameData=function(r,n,i,o){if(!!this._isOrderChangedWithinSameData(r,n,i)){var a=this._dataSort(r,i,n);this._isOrderDifferentInView(a,i)&&(this._removeOnRenderedListener(o),o.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",axisId:i.index,sortInfo:a}))}},t.prototype._dispatchInitSort=function(r,n,i){var o=n.baseAxis,a=this._dataSort(r,o,function(s){return r.get(r.mapDimension(n.otherAxis.dim),s)});i.dispatchAction({type:"changeAxisOrder",componentType:o.dim+"Axis",isInitSort:!0,axisId:o.index,sortInfo:a})},t.prototype.remove=function(r,n){this._clear(this._model),this._removeOnRenderedListener(n)},t.prototype.dispose=function(r,n){this._removeOnRenderedListener(n)},t.prototype._removeOnRenderedListener=function(r){this._onRendered&&(r.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(r){var n=this.group,i=this._data;r&&r.isAnimationEnabled()&&i&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],i.eachItemGraphicEl(function(o){vP(o,r,Me(o).dataIndex)})):n.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(Zi),wL={cartesian2d:function(e,t){var r=t.width<0?-1:1,n=t.height<0?-1:1;r<0&&(t.x+=t.width,t.width=-t.width),n<0&&(t.y+=t.height,t.height=-t.height);var i=e.x+e.width,o=e.y+e.height,a=$S(t.x,e.x),s=BS(t.x+t.width,i),l=$S(t.y,e.y),u=BS(t.y+t.height,o),c=s<a,f=u<l;return t.x=c&&a>i?s:a,t.y=f&&l>o?u:l,t.width=c?0:s-a,t.height=f?0:u-l,r<0&&(t.x+=t.width,t.width=-t.width),n<0&&(t.y+=t.height,t.height=-t.height),c||f},polar:function(e,t){var r=t.r0<=t.r?1:-1;if(r<0){var n=t.r;t.r=t.r0,t.r0=n}var i=BS(t.r,e.r),o=$S(t.r0,e.r0);t.r=i,t.r0=o;var a=i-o<0;if(r<0){var n=t.r;t.r=t.r0,t.r0=n}return a}},SL={cartesian2d:function(e,t,r,n,i,o,a,s,l){var u=new Lr({shape:_t({},n),z2:1});if(u.__dataIndex=r,u.name="item",o){var c=u.shape,f=i?"height":"width";c[f]=0}return u},polar:function(e,t,r,n,i,o,a,s,l){var u=!i&&l?bL:r0,c=new u({shape:n,z2:1});c.name="item";var f=gW(i);if(c.calculateTextPosition=zht(f,{isRoundCap:u===bL}),o){var h=c.shape,d=i?"r":"endAngle",p={};h[d]=i?0:n.startAngle,p[d]=n[d],(s?Jr:Ma)(c,{shape:p},o)}return c}};function jht(e,t){var r=e.get("realtimeSort",!0),n=t.getBaseAxis();if(r&&n.type==="category"&&t.type==="cartesian2d")return{baseAxis:n,otherAxis:t.getOtherAxis(n)}}function TL(e,t,r,n,i,o,a,s){var l,u;o?(u={x:n.x,width:n.width},l={y:n.y,height:n.height}):(u={y:n.y,height:n.height},l={x:n.x,width:n.width}),s||(a?Jr:Ma)(r,{shape:l},t,i,null);var c=t?e.baseAxis.model:null;(a?Jr:Ma)(r,{shape:u},c,i)}function kL(e,t){for(var r=0;r<t.length;r++)if(!isFinite(e[t[r]]))return!0;return!1}var Ght=["x","y","width","height"],Hht=["cx","cy","r","startAngle","endAngle"],PL={cartesian2d:function(e){return!kL(e,Ght)},polar:function(e){return!kL(e,Hht)}},Om={cartesian2d:function(e,t,r){var n=e.getItemLayout(t),i=r?Yht(r,n):0,o=n.width>0?1:-1,a=n.height>0?1:-1;return{x:n.x+o*i/2,y:n.y+a*i/2,width:n.width-o*i,height:n.height-a*i}},polar:function(e,t,r){var n=e.getItemLayout(t);return{cx:n.cx,cy:n.cy,r0:n.r0,r:n.r,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}}};function Xht(e){return e.startAngle!=null&&e.endAngle!=null&&e.startAngle===e.endAngle}function gW(e){return function(t){var r=t?"Arc":"Angle";return function(n){switch(n){case"start":case"insideStart":case"end":case"insideEnd":return n+r;default:return n}}}(e)}function EL(e,t,r,n,i,o,a,s){var l=t.getItemVisual(r,"style");s||e.setShape("r",n.get(["itemStyle","borderRadius"])||0),e.useStyle(l);var u=n.getShallow("cursor");u&&e.attr("cursor",u);var c=s?a?i.r>=i.r0?"endArc":"startArc":i.endAngle>=i.startAngle?"endAngle":"startAngle":a?i.height>=0?"bottom":"top":i.width>=0?"right":"left",f=jc(n);ud(e,f,{labelFetcher:o,labelDataIndex:r,defaultText:Sv(o.getData(),r),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:c});var h=e.getTextContent();if(s&&h){var d=n.get(["label","position"]);e.textConfig.inside=d==="middle"?!0:null,Vht(e,d==="outside"?c:d,gW(a),n.get(["label","rotate"]))}_st(h,f,o.getRawValue(r),function(g){return iW(t,g)});var p=n.getModel(["emphasis"]);Pc(e,p.get("focus"),p.get("blurScope"),p.get("disabled")),hv(e,n),Xht(i)&&(e.style.fill="none",e.style.stroke="none",U(e.states,function(g){g.style&&(g.style.fill=g.style.stroke="none")}))}function Yht(e,t){var r=e.get(["itemStyle","borderColor"]);if(!r||r==="none")return 0;var n=e.get(["itemStyle","borderWidth"])||0,i=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),o=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(n,i,o)}var Kht=function(){function e(){}return e}(),CL=function(e){Ot(t,e);function t(r){var n=e.call(this,r)||this;return n.type="largeBar",n}return t.prototype.getDefaultShape=function(){return new Kht},t.prototype.buildPath=function(r,n){for(var i=n.points,o=this.baseDimIdx,a=1-this.baseDimIdx,s=[],l=[],u=this.barWidth,c=0;c<i.length;c+=3)l[o]=u,l[a]=i[c+2],s[o]=i[c+o],s[a]=i[c+a],r.rect(s[0],s[1],l[0],l[1])},t}(Ne);function AL(e,t,r,n){var i=e.getData(),o=i.getLayout("valueAxisHorizontal")?1:0,a=i.getLayout("largeDataIndices"),s=i.getLayout("size"),l=e.getModel("backgroundStyle"),u=i.getLayout("largeBackgroundPoints");if(u){var c=new CL({shape:{points:u},incremental:!!n,silent:!0,z2:0});c.baseDimIdx=o,c.largeDataIndices=a,c.barWidth=s,c.useStyle(l.getItemStyle()),t.add(c),r&&r.push(c)}var f=new CL({shape:{points:i.getLayout("largePoints")},incremental:!!n,ignoreCoarsePointer:!0,z2:1});f.baseDimIdx=o,f.largeDataIndices=a,f.barWidth=s,t.add(f),f.useStyle(i.getVisual("style")),Me(f).seriesIndex=e.seriesIndex,e.get("silent")||(f.on("mousedown",xL),f.on("mousemove",xL)),r&&r.push(f)}var xL=e2(function(e){var t=this,r=Zht(t,e.offsetX,e.offsetY);Me(t).dataIndex=r>=0?r:null},30,!1);function Zht(e,t,r){for(var n=e.baseDimIdx,i=1-n,o=e.shape.points,a=e.largeDataIndices,s=[],l=[],u=e.barWidth,c=0,f=o.length/3;c<f;c++){var h=c*3;if(l[n]=u,l[i]=o[h+2],s[n]=o[h+n],s[i]=o[h+i],l[i]<0&&(s[i]+=l[i],l[i]=-l[i]),t>=s[0]&&t<=s[0]+l[0]&&r>=s[1]&&r<=s[1]+l[1])return a[c]}return-1}function vW(e,t,r){if(hd(r,"cartesian2d")){var n=t,i=r.getArea();return{x:e?n.x:i.x,y:e?i.y:n.y,width:e?n.width:i.width,height:e?i.height:n.height}}else{var i=r.getArea(),o=t;return{cx:i.cx,cy:i.cy,r0:e?i.r0:o.r0,r:e?i.r:o.r,startAngle:e?o.startAngle:0,endAngle:e?o.endAngle:Math.PI*2}}}function qht(e,t,r){var n=e.type==="polar"?r0:Lr;return new n({shape:vW(t,r,e),silent:!0,z2:0})}const Jht=Wht;function dd(e){e.registerChartView(Jht),e.registerSeriesModel(Fht),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,We(_ft,"bar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,bft("bar")),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,dW("bar")),e.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,r){var n=t.componentType||"series";r.eachComponent({mainType:n,query:t},function(i){t.sortInfo&&i.axis.setCategorySortInfo(t.sortInfo)})})}var Qht=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r,n){return i0(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var r=this.option.progressive;return r==null?this.option.large?5e3:this.get("progressive"):r},t.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r==null?this.option.large?1e4:this.get("progressiveThreshold"):r},t.prototype.brushSelector=function(r,n,i){return i.point(n.getItemLayout(r))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(Ia);const tdt=Qht;var mW=4,edt=function(){function e(){}return e}(),rdt=function(e){Ot(t,e);function t(r){var n=e.call(this,r)||this;return n._off=0,n.hoverDataIdx=-1,n}return t.prototype.getDefaultShape=function(){return new edt},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(r,n){var i=n.points,o=n.size,a=this.symbolProxy,s=a.shape,l=r.getContext?r.getContext():r,u=l&&o[0]<mW,c=this.softClipShape,f;if(u){this._ctx=l;return}for(this._ctx=null,f=this._off;f<i.length;){var h=i[f++],d=i[f++];isNaN(h)||isNaN(d)||c&&!c.contain(h,d)||(s.x=h-o[0]/2,s.y=d-o[1]/2,s.width=o[0],s.height=o[1],a.buildPath(r,s,!0))}this.incremental&&(this._off=f,this.notClear=!0)},t.prototype.afterBrush=function(){var r=this.shape,n=r.points,i=r.size,o=this._ctx,a=this.softClipShape,s;if(!!o){for(s=this._off;s<n.length;){var l=n[s++],u=n[s++];isNaN(l)||isNaN(u)||a&&!a.contain(l,u)||o.fillRect(l-i[0]/2,u-i[1]/2,i[0],i[1])}this.incremental&&(this._off=s,this.notClear=!0)}},t.prototype.findDataIndex=function(r,n){for(var i=this.shape,o=i.points,a=i.size,s=Math.max(a[0],4),l=Math.max(a[1],4),u=o.length/2-1;u>=0;u--){var c=u*2,f=o[c]-s/2,h=o[c+1]-l/2;if(r>=f&&n>=h&&r<=f+s&&n<=h+l)return u}return-1},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect();if(r=i[0],n=i[1],o.contain(r,n)){var a=this.hoverDataIdx=this.findDataIndex(r,n);return a>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var n=this.shape,i=n.points,o=n.size,a=o[0],s=o[1],l=1/0,u=1/0,c=-1/0,f=-1/0,h=0;h<i.length;){var d=i[h++],p=i[h++];l=Math.min(d,l),c=Math.max(d,c),u=Math.min(p,u),f=Math.max(p,f)}r=this._rect=new Le(l-a/2,u-s/2,c-l+a,f-u+s)}return r},t}(Ne),ndt=function(){function e(){this.group=new ar}return e.prototype.updateData=function(t,r){this._clear();var n=this._create();n.setShape({points:t.getLayout("points")}),this._setCommon(n,t,r)},e.prototype.updateLayout=function(t){var r=t.getLayout("points");this.group.eachChild(function(n){if(n.startIndex!=null){var i=(n.endIndex-n.startIndex)*2,o=n.startIndex*4*2;r=new Float32Array(r.buffer,o,i)}n.setShape("points",r),n.reset()})},e.prototype.incrementalPrepareUpdate=function(t){this._clear()},e.prototype.incrementalUpdate=function(t,r,n){var i=this._newAdded[0],o=r.getLayout("points"),a=i&&i.shape.points;if(a&&a.length<2e4){var s=a.length,l=new Float32Array(s+o.length);l.set(a),l.set(o,s),i.endIndex=t.end,i.setShape({points:l})}else{this._newAdded=[];var u=this._create();u.startIndex=t.start,u.endIndex=t.end,u.incremental=!0,u.setShape({points:o}),this._setCommon(u,r,n)}},e.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},e.prototype._create=function(){var t=new rdt({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},e.prototype._setCommon=function(t,r,n){var i=r.hostModel;n=n||{};var o=r.getVisual("symbolSize");t.setShape("size",o instanceof Array?o:[o,o]),t.softClipShape=n.clipShape||null,t.symbolProxy=No(r.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var a=t.shape.size[0]<mW;t.useStyle(i.getModel("itemStyle").getItemStyle(a?["color","shadowBlur","shadowColor"]:["color"]));var s=r.getVisual("style"),l=s&&s.fill;l&&t.setColor(l);var u=Me(t);u.seriesIndex=i.seriesIndex,t.on("mousemove",function(c){u.dataIndex=null;var f=t.hoverDataIdx;f>=0&&(u.dataIndex=f+(t.startIndex||0))})},e.prototype.remove=function(){this._clear()},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}();const idt=ndt;var odt=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){var o=r.getData(),a=this._updateSymbolDraw(o,r);a.updateData(o,{clipShape:this._getClipShape(r)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(r,n,i){var o=r.getData(),a=this._updateSymbolDraw(o,r);a.incrementalPrepareUpdate(o),this._finished=!1},t.prototype.incrementalRender=function(r,n,i){this._symbolDraw.incrementalUpdate(r,n.getData(),{clipShape:this._getClipShape(n)}),this._finished=r.end===n.getData().count()},t.prototype.updateTransform=function(r,n,i){var o=r.getData();if(this.group.dirty(),!this._finished||o.count()>1e4)return{update:!0};var a=nx("").reset(r,n,i);a.progress&&a.progress({start:0,end:o.count(),count:o.count()},o),this._symbolDraw.updateLayout(o)},t.prototype.eachRendered=function(r){this._symbolDraw&&this._symbolDraw.eachRendered(r)},t.prototype._getClipShape=function(r){var n=r.coordinateSystem,i=n&&n.getArea&&n.getArea();return r.get("clip",!0)?i:null},t.prototype._updateSymbolDraw=function(r,n){var i=this._symbolDraw,o=n.pipelineContext,a=o.large;return(!i||a!==this._isLargeDraw)&&(i&&i.remove(),i=this._symbolDraw=a?new idt:new oW,this._isLargeDraw=a,this.group.removeAll()),this.group.add(i.group),i},t.prototype.remove=function(r,n){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(Zi);const adt=odt;var sdt=function(e){Ot(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t}(qe);const ldt=sdt;var NP=function(e){Ot(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",Eo).models[0]},t.type="cartesian2dAxis",t}(qe);zo(NP,Gft);var yW={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},udt=Ie({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},yW),ix=Ie({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},yW),cdt=Ie({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},ix),fdt=Ee({logBase:10},ix);const hdt={category:udt,value:ix,time:cdt,log:fdt};var ddt={value:1,category:1,time:1,log:1};function ML(e,t,r,n){U(ddt,function(i,o){var a=Ie(Ie({},hdt[o],!0),n,!0),s=function(l){Ot(u,l);function u(){var c=l!==null&&l.apply(this,arguments)||this;return c.type=t+"Axis."+o,c}return u.prototype.mergeDefaultAndTheme=function(c,f){var h=mv(this),d=h?qb(c):{},p=f.getTheme();Ie(c,p.get(o+"Axis")),Ie(c,this.getDefaultOption()),c.type=IL(c),h&&Gh(c,d,h)},u.prototype.optionUpdated=function(){var c=this.option;c.type==="category"&&(this.__ordinalMeta=LP.createByAxisModel(this))},u.prototype.getCategories=function(c){var f=this.option;if(f.type==="category")return c?f.data:this.__ordinalMeta.categories},u.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},u.type=t+"Axis."+o,u.defaultOption=a,u}(r);e.registerComponentModel(s)}),e.registerSubTypeDefaulter(t+"Axis",IL)}function IL(e){return e.type||(e.data?"category":"value")}var pdt=function(){function e(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return e.prototype.getAxis=function(t){return this._axes[t]},e.prototype.getAxes=function(){return Bt(this._dimList,function(t){return this._axes[t]},this)},e.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),ln(this.getAxes(),function(r){return r.scale.type===t})},e.prototype.addAxis=function(t){var r=t.dim;this._axes[r]=t,this._dimList.push(r)},e}();const gdt=pdt;var FP=["x","y"];function LL(e){return e.type==="interval"||e.type==="time"}var vdt=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="cartesian2d",r.dimensions=FP,r}return t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var r=this.getAxis("x").scale,n=this.getAxis("y").scale;if(!(!LL(r)||!LL(n))){var i=r.getExtent(),o=n.getExtent(),a=this.dataToPoint([i[0],o[0]]),s=this.dataToPoint([i[1],o[1]]),l=i[1]-i[0],u=o[1]-o[0];if(!(!l||!u)){var c=(s[0]-a[0])/l,f=(s[1]-a[1])/u,h=a[0]-i[0]*c,d=a[1]-o[0]*f,p=this._transform=[c,0,0,f,h,d];this._invTransform=Rb([],p)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(r){var n=this.getAxis("x"),i=this.getAxis("y");return n.contain(n.toLocalCoord(r[0]))&&i.contain(i.toLocalCoord(r[1]))},t.prototype.containData=function(r){return this.getAxis("x").containData(r[0])&&this.getAxis("y").containData(r[1])},t.prototype.containZone=function(r,n){var i=this.dataToPoint(r),o=this.dataToPoint(n),a=this.getArea(),s=new Le(i[0],i[1],o[0]-i[0],o[1]-i[1]);return a.intersect(s)},t.prototype.dataToPoint=function(r,n,i){i=i||[];var o=r[0],a=r[1];if(this._transform&&o!=null&&isFinite(o)&&a!=null&&isFinite(a))return Vn(i,r,this._transform);var s=this.getAxis("x"),l=this.getAxis("y");return i[0]=s.toGlobalCoord(s.dataToCoord(o,n)),i[1]=l.toGlobalCoord(l.dataToCoord(a,n)),i},t.prototype.clampData=function(r,n){var i=this.getAxis("x").scale,o=this.getAxis("y").scale,a=i.getExtent(),s=o.getExtent(),l=i.parse(r[0]),u=o.parse(r[1]);return n=n||[],n[0]=Math.min(Math.max(Math.min(a[0],a[1]),l),Math.max(a[0],a[1])),n[1]=Math.min(Math.max(Math.min(s[0],s[1]),u),Math.max(s[0],s[1])),n},t.prototype.pointToData=function(r,n){var i=[];if(this._invTransform)return Vn(i,r,this._invTransform);var o=this.getAxis("x"),a=this.getAxis("y");return i[0]=o.coordToData(o.toLocalCoord(r[0]),n),i[1]=a.coordToData(a.toLocalCoord(r[1]),n),i},t.prototype.getOtherAxis=function(r){return this.getAxis(r.dim==="x"?"y":"x")},t.prototype.getArea=function(){var r=this.getAxis("x").getGlobalExtent(),n=this.getAxis("y").getGlobalExtent(),i=Math.min(r[0],r[1]),o=Math.min(n[0],n[1]),a=Math.max(r[0],r[1])-i,s=Math.max(n[0],n[1])-o;return new Le(i,o,a,s)},t}(gdt),mdt=function(e){Ot(t,e);function t(r,n,i,o,a){var s=e.call(this,r,n,i)||this;return s.index=0,s.type=o||"value",s.position=a||"bottom",s}return t.prototype.isHorizontal=function(){var r=this.position;return r==="top"||r==="bottom"},t.prototype.getGlobalExtent=function(r){var n=this.getExtent();return n[0]=this.toGlobalCoord(n[0]),n[1]=this.toGlobalCoord(n[1]),r&&n[0]>n[1]&&n.reverse(),n},t.prototype.pointToData=function(r,n){return this.coordToData(this.toLocalCoord(r[this.dim==="x"?0:1]),n)},t.prototype.setCategorySortInfo=function(r){if(this.type!=="category")return!1;this.model.option.categorySortInfo=r,this.scale.setSortInfo(r)},t}(nht);const ydt=mdt;function $P(e,t,r){r=r||{};var n=e.coordinateSystem,i=t.axis,o={},a=i.getAxesOnZeroOf()[0],s=i.position,l=a?"onZero":s,u=i.dim,c=n.getRect(),f=[c.x,c.x+c.width,c.y,c.y+c.height],h={left:0,right:1,top:0,bottom:1,onZero:2},d=t.get("offset")||0,p=u==="x"?[f[2]-d,f[3]+d]:[f[0]-d,f[1]+d];if(a){var g=a.toGlobalCoord(a.dataToCoord(0));p[h.onZero]=Math.max(Math.min(g,p[1]),p[0])}o.position=[u==="y"?p[h[l]]:f[0],u==="x"?p[h[l]]:f[3]],o.rotation=Math.PI/2*(u==="x"?0:1);var m={top:-1,bottom:1,left:-1,right:1};o.labelDirection=o.tickDirection=o.nameDirection=m[s],o.labelOffset=a?p[h[s]]-p[h.onZero]:0,t.get(["axisTick","inside"])&&(o.tickDirection=-o.tickDirection),Po(r.labelInside,t.get(["axisLabel","inside"]))&&(o.labelDirection=-o.labelDirection);var v=t.get(["axisLabel","rotate"]);return o.labelRotate=l==="top"?-v:v,o.z2=1,o}function OL(e){return e.get("coordinateSystem")==="cartesian2d"}function RL(e){var t={xAxisModel:null,yAxisModel:null};return U(t,function(r,n){var i=n.replace(/Model$/,""),o=e.getReferringComponents(i,Eo).models[0];t[n]=o}),t}var zS=Math.log;function _dt(e,t,r){var n=o0.prototype,i=n.getTicks.call(r),o=n.getTicks.call(r,!0),a=i.length-1,s=n.getInterval.call(r),l=ZU(e,t),u=l.extent,c=l.fixMin,f=l.fixMax;if(e.type==="log"){var h=zS(e.base);u=[zS(u[0])/h,zS(u[1])/h]}e.setExtent(u[0],u[1]),e.calcNiceExtent({splitNumber:a,fixMin:c,fixMax:f});var d=n.getExtent.call(e);c&&(u[0]=d[0]),f&&(u[1]=d[1]);var p=n.getInterval.call(e),g=u[0],m=u[1];if(c&&f)p=(m-g)/a;else if(c)for(m=u[0]+p*a;m<u[1]&&isFinite(m)&&isFinite(u[1]);)p=RS(p),m=u[0]+p*a;else if(f)for(g=u[1]-p*a;g>u[0]&&isFinite(g)&&isFinite(u[0]);)p=RS(p),g=u[1]-p*a;else{var v=e.getTicks().length-1;v>a&&(p=RS(p));var y=p*a;m=Math.ceil(u[1]/p)*p,g=Mr(m-y),g<0&&u[0]>=0?(g=0,m=Mr(y)):m>0&&u[1]<=0&&(m=0,g=-Mr(y))}var b=(i[0].value-o[0].value)/s,w=(i[a].value-o[a].value)/s;n.setExtent.call(e,g+p*b,m+p*w),n.setInterval.call(e,p),(b||w)&&n.setNiceExtent.call(e,g+p,m-p)}var bdt=function(){function e(t,r,n){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=FP,this._initCartesian(t,r,n),this.model=t}return e.prototype.getRect=function(){return this._rect},e.prototype.update=function(t,r){var n=this._axesMap;this._updateScale(t,this.model);function i(a){var s,l=ze(a),u=l.length;if(!!u){for(var c=[],f=u-1;f>=0;f--){var h=+l[f],d=a[h],p=d.model,g=d.scale;OP(g)&&p.get("alignTicks")&&p.get("interval")==null?c.push(d):(aL(g,p),OP(g)&&(s=d))}c.length&&(s||(s=c.pop(),aL(s.scale,s.model)),U(c,function(m){_dt(m.scale,m.model,s.scale)}))}}i(n.x),i(n.y);var o={};U(n.x,function(a){DL(n,"y",a,o)}),U(n.y,function(a){DL(n,"x",a,o)}),this.resize(this.model,r)},e.prototype.resize=function(t,r,n){var i=t.getBoxLayoutParams(),o=!n&&t.get("containLabel"),a=jl(i,{width:r.getWidth(),height:r.getHeight()});this._rect=a;var s=this._axesList;l(),o&&(U(s,function(u){if(!u.model.get(["axisLabel","inside"])){var c=Uft(u);if(c){var f=u.isHorizontal()?"height":"width",h=u.model.get(["axisLabel","margin"]);a[f]-=c[f]+h,u.position==="top"?a.y+=c.height+h:u.position==="left"&&(a.x+=c.width+h)}}}),l()),U(this._coordsList,function(u){u.calcAffineTransform()});function l(){U(s,function(u){var c=u.isHorizontal(),f=c?[0,a.width]:[0,a.height],h=u.inverse?1:0;u.setExtent(f[h],f[1-h]),wdt(u,c?a.x:a.y)})}},e.prototype.getAxis=function(t,r){var n=this._axesMap[t];if(n!=null)return n[r||0]},e.prototype.getAxes=function(){return this._axesList.slice()},e.prototype.getCartesian=function(t,r){if(t!=null&&r!=null){var n="x"+t+"y"+r;return this._coordsMap[n]}Yt(t)&&(r=t.yAxisIndex,t=t.xAxisIndex);for(var i=0,o=this._coordsList;i<o.length;i++)if(o[i].getAxis("x").index===t||o[i].getAxis("y").index===r)return o[i]},e.prototype.getCartesians=function(){return this._coordsList.slice()},e.prototype.convertToPixel=function(t,r,n){var i=this._findConvertTarget(r);return i.cartesian?i.cartesian.dataToPoint(n):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(n)):null},e.prototype.convertFromPixel=function(t,r,n){var i=this._findConvertTarget(r);return i.cartesian?i.cartesian.pointToData(n):i.axis?i.axis.coordToData(i.axis.toLocalCoord(n)):null},e.prototype._findConvertTarget=function(t){var r=t.seriesModel,n=t.xAxisModel||r&&r.getReferringComponents("xAxis",Eo).models[0],i=t.yAxisModel||r&&r.getReferringComponents("yAxis",Eo).models[0],o=t.gridModel,a=this._coordsList,s,l;if(r)s=r.coordinateSystem,De(a,s)<0&&(s=null);else if(n&&i)s=this.getCartesian(n.componentIndex,i.componentIndex);else if(n)l=this.getAxis("x",n.componentIndex);else if(i)l=this.getAxis("y",i.componentIndex);else if(o){var u=o.coordinateSystem;u===this&&(s=this._coordsList[0])}return{cartesian:s,axis:l}},e.prototype.containPoint=function(t){var r=this._coordsList[0];if(r)return r.containPoint(t)},e.prototype._initCartesian=function(t,r,n){var i=this,o=this,a={left:!1,right:!1,top:!1,bottom:!1},s={x:{},y:{}},l={x:0,y:0};if(r.eachComponent("xAxis",u("x"),this),r.eachComponent("yAxis",u("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=s,U(s.x,function(c,f){U(s.y,function(h,d){var p="x"+f+"y"+d,g=new vdt(p);g.master=i,g.model=t,i._coordsMap[p]=g,i._coordsList.push(g),g.addAxis(c),g.addAxis(h)})});function u(c){return function(f,h){if(!!VS(f,t)){var d=f.get("position");c==="x"?d!=="top"&&d!=="bottom"&&(d=a.bottom?"top":"bottom"):d!=="left"&&d!=="right"&&(d=a.left?"right":"left"),a[d]=!0;var p=new ydt(c,zft(f),[0,0],f.get("type"),d),g=p.type==="category";p.onBand=g&&f.get("boundaryGap"),p.inverse=f.get("inverse"),f.axis=p,p.model=f,p.grid=o,p.index=h,o._axesList.push(p),s[c][h]=p,l[c]++}}}},e.prototype._updateScale=function(t,r){U(this._axesList,function(i){if(i.scale.setExtent(1/0,-1/0),i.type==="category"){var o=i.model.get("categorySortInfo");i.scale.setSortInfo(o)}}),t.eachSeries(function(i){if(OL(i)){var o=RL(i),a=o.xAxisModel,s=o.yAxisModel;if(!VS(a,r)||!VS(s,r))return;var l=this.getCartesian(a.componentIndex,s.componentIndex),u=i.getData(),c=l.getAxis("x"),f=l.getAxis("y");n(u,c),n(u,f)}},this);function n(i,o){U(jft(i,o.dim),function(a){o.scale.unionExtentFromData(i,a)})}},e.prototype.getTooltipAxes=function(t){var r=[],n=[];return U(this.getCartesians(),function(i){var o=t!=null&&t!=="auto"?i.getAxis(t):i.getBaseAxis(),a=i.getOtherAxis(o);De(r,o)<0&&r.push(o),De(n,a)<0&&n.push(a)}),{baseAxes:r,otherAxes:n}},e.create=function(t,r){var n=[];return t.eachComponent("grid",function(i,o){var a=new e(i,t,r);a.name="grid_"+o,a.resize(i,r,!0),i.coordinateSystem=a,n.push(a)}),t.eachSeries(function(i){if(!!OL(i)){var o=RL(i),a=o.xAxisModel,s=o.yAxisModel,l=a.getCoordSysModel(),u=l.coordinateSystem;i.coordinateSystem=u.getCartesian(a.componentIndex,s.componentIndex)}}),n},e.dimensions=FP,e}();function VS(e,t){return e.getCoordSysModel()===t}function DL(e,t,r,n){r.getAxesOnZeroOf=function(){return o?[o]:[]};var i=e[t],o,a=r.model,s=a.get(["axisLine","onZero"]),l=a.get(["axisLine","onZeroAxisIndex"]);if(!s)return;if(l!=null)NL(i[l])&&(o=i[l]);else for(var u in i)if(i.hasOwnProperty(u)&&NL(i[u])&&!n[c(i[u])]){o=i[u];break}o&&(n[c(o)]=!0);function c(f){return f.dim+"_"+f.index}}function NL(e){return e&&e.type!=="category"&&e.type!=="time"&&Vft(e)}function wdt(e,t){var r=e.getExtent(),n=r[0]+r[1];e.toGlobalCoord=e.dim==="x"?function(i){return i+t}:function(i){return n-i+t},e.toLocalCoord=e.dim==="x"?function(i){return i-t}:function(i){return n-i+t}}const Sdt=bdt;var Tl=Math.PI,pc=function(){function e(t,r){this.group=new ar,this.opt=r,this.axisModel=t,Ee(r,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var n=new ar({x:r.position[0],y:r.position[1],rotation:r.rotation});n.updateTransform(),this._transformGroup=n}return e.prototype.hasBuilder=function(t){return!!FL[t]},e.prototype.add=function(t){FL[t](this.opt,this.axisModel,this.group,this._transformGroup)},e.prototype.getGroup=function(){return this.group},e.innerTextLayout=function(t,r,n){var i=tz(r-t),o,a;return m_(i)?(a=n>0?"top":"bottom",o="center"):m_(i-Tl)?(a=n>0?"bottom":"top",o="center"):(a="middle",i>0&&i<Tl?o=n>0?"right":"left":o=n>0?"left":"right"),{rotation:i,textAlign:o,textVerticalAlign:a}},e.makeAxisEventDataBase=function(t){var r={componentType:t.mainType,componentIndex:t.componentIndex};return r[t.mainType+"Index"]=t.componentIndex,r},e.isLabelSilent=function(t){var r=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||r&&r.show)},e}(),FL={axisLine:function(e,t,r,n){var i=t.get(["axisLine","show"]);if(i==="auto"&&e.handleAutoShown&&(i=e.handleAutoShown("axisLine")),!!i){var o=t.axis.getExtent(),a=n.transform,s=[o[0],0],l=[o[1],0],u=s[0]>l[0];a&&(Vn(s,s,a),Vn(l,l,a));var c=_t({lineCap:"round"},t.getModel(["axisLine","lineStyle"]).getLineStyle()),f=new Wl({shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:c,strokeContainThreshold:e.strokeContainThreshold||5,silent:!0,z2:1});pv(f.shape,f.style.lineWidth),f.anid="line",r.add(f);var h=t.get(["axisLine","symbol"]);if(h!=null){var d=t.get(["axisLine","symbolSize"]);$t(h)&&(h=[h,h]),($t(d)||He(d))&&(d=[d,d]);var p=HA(t.get(["axisLine","symbolOffset"])||0,d),g=d[0],m=d[1];U([{rotate:e.rotation+Math.PI/2,offset:p[0],r:0},{rotate:e.rotation-Math.PI/2,offset:p[1],r:Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]))}],function(v,y){if(h[y]!=="none"&&h[y]!=null){var b=No(h[y],-g/2,-m/2,g,m,c.stroke,!0),w=v.r+v.offset,T=u?l:s;b.attr({rotation:v.rotate,x:T[0]+w*Math.cos(e.rotation),y:T[1]-w*Math.sin(e.rotation),silent:!0,z2:11}),r.add(b)}})}}},axisTickLabel:function(e,t,r,n){var i=Pdt(r,n,t,e),o=Cdt(r,n,t,e);if(kdt(t,o,i),Edt(r,n,t,e.tickDirection),t.get(["axisLabel","hideOverlap"])){var a=iht(Bt(o,function(s){return{label:s,priority:s.z2,defaultAttr:{ignore:s.ignore}}}));oht(a)}},axisName:function(e,t,r,n){var i=Po(e.axisName,t.get("name"));if(!!i){var o=t.get("nameLocation"),a=e.nameDirection,s=t.getModel("nameTextStyle"),l=t.get("nameGap")||0,u=t.axis.getExtent(),c=u[0]>u[1]?-1:1,f=[o==="start"?u[0]-c*l:o==="end"?u[1]+c*l:(u[0]+u[1])/2,BL(o)?e.labelOffset+a*l:0],h,d=t.get("nameRotate");d!=null&&(d=d*Tl/180);var p;BL(o)?h=pc.innerTextLayout(e.rotation,d!=null?d:e.rotation,a):(h=Tdt(e.rotation,o,d||0,u),p=e.axisNameAvailableWidth,p!=null&&(p=Math.abs(p/Math.sin(h.rotation)),!isFinite(p)&&(p=null)));var g=s.getFont(),m=t.get("nameTruncate",!0)||{},v=m.ellipsis,y=Po(e.nameTruncateMaxWidth,m.maxWidth,p),b=new Or({x:f[0],y:f[1],rotation:h.rotation,silent:pc.isLabelSilent(t),style:ri(s,{text:i,font:g,overflow:"truncate",width:y,ellipsis:v,fill:s.getTextColor()||t.get(["axisLine","lineStyle","color"]),align:s.get("align")||h.textAlign,verticalAlign:s.get("verticalAlign")||h.textVerticalAlign}),z2:1});if(MA({el:b,componentModel:t,itemName:i}),b.__fullText=i,b.anid="name",t.get("triggerEvent")){var w=pc.makeAxisEventDataBase(t);w.targetType="axisName",w.name=i,Me(b).eventData=w}n.add(b),b.updateTransform(),r.add(b),b.decomposeTransform()}}};function Tdt(e,t,r,n){var i=tz(r-e),o,a,s=n[0]>n[1],l=t==="start"&&!s||t!=="start"&&s;return m_(i-Tl/2)?(a=l?"bottom":"top",o="center"):m_(i-Tl*1.5)?(a=l?"top":"bottom",o="center"):(a="middle",i<Tl*1.5&&i>Tl/2?o=l?"left":"right":o=l?"right":"left"),{rotation:i,textAlign:o,textVerticalAlign:a}}function kdt(e,t,r){if(!qU(e.axis)){var n=e.get(["axisLabel","showMinLabel"]),i=e.get(["axisLabel","showMaxLabel"]);t=t||[],r=r||[];var o=t[0],a=t[1],s=t[t.length-1],l=t[t.length-2],u=r[0],c=r[1],f=r[r.length-1],h=r[r.length-2];n===!1?(Ii(o),Ii(u)):$L(o,a)&&(n?(Ii(a),Ii(c)):(Ii(o),Ii(u))),i===!1?(Ii(s),Ii(f)):$L(l,s)&&(i?(Ii(l),Ii(h)):(Ii(s),Ii(f)))}}function Ii(e){e&&(e.ignore=!0)}function $L(e,t){var r=e&&e.getBoundingRect().clone(),n=t&&t.getBoundingRect().clone();if(!(!r||!n)){var i=sA([]);return lA(i,i,-e.rotation),r.applyTransform(Th([],i,e.getLocalTransform())),n.applyTransform(Th([],i,t.getLocalTransform())),r.intersect(n)}}function BL(e){return e==="middle"||e==="center"}function _W(e,t,r,n,i){for(var o=[],a=[],s=[],l=0;l<e.length;l++){var u=e[l].coord;a[0]=u,a[1]=0,s[0]=u,s[1]=r,t&&(Vn(a,a,t),Vn(s,s,t));var c=new Wl({shape:{x1:a[0],y1:a[1],x2:s[0],y2:s[1]},style:n,z2:2,autoBatch:!0,silent:!0});pv(c.shape,c.style.lineWidth),c.anid=i+"_"+e[l].tickValue,o.push(c)}return o}function Pdt(e,t,r,n){var i=r.axis,o=r.getModel("axisTick"),a=o.get("show");if(a==="auto"&&n.handleAutoShown&&(a=n.handleAutoShown("axisTick")),!(!a||i.scale.isBlank())){for(var s=o.getModel("lineStyle"),l=n.tickDirection*o.get("length"),u=i.getTicksCoords(),c=_W(u,t.transform,l,Ee(s.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}),"ticks"),f=0;f<c.length;f++)e.add(c[f]);return c}}function Edt(e,t,r,n){var i=r.axis,o=r.getModel("minorTick");if(!(!o.get("show")||i.scale.isBlank())){var a=i.getMinorTicksCoords();if(!!a.length)for(var s=o.getModel("lineStyle"),l=n*o.get("length"),u=Ee(s.getLineStyle(),Ee(r.getModel("axisTick").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})),c=0;c<a.length;c++)for(var f=_W(a[c],t.transform,l,u,"minorticks_"+c),h=0;h<f.length;h++)e.add(f[h])}}function Cdt(e,t,r,n){var i=r.axis,o=Po(n.axisLabelShow,r.get(["axisLabel","show"]));if(!(!o||i.scale.isBlank())){var a=r.getModel("axisLabel"),s=a.get("margin"),l=i.getViewLabels(),u=(Po(n.labelRotate,a.get("rotate"))||0)*Tl/180,c=pc.innerTextLayout(n.rotation,u,n.labelDirection),f=r.getCategories&&r.getCategories(!0),h=[],d=pc.isLabelSilent(r),p=r.get("triggerEvent");return U(l,function(g,m){var v=i.scale.type==="ordinal"?i.scale.getRawOrdinalNumber(g.tickValue):g.tickValue,y=g.formattedLabel,b=g.rawLabel,w=a;if(f&&f[v]){var T=f[v];Yt(T)&&T.textStyle&&(w=new cn(T.textStyle,a,r.ecModel))}var S=w.getTextColor()||r.get(["axisLine","lineStyle","color"]),k=i.dataToCoord(v),E=new Or({x:k,y:n.labelOffset+n.labelDirection*s,rotation:c.rotation,silent:d,z2:10+(g.level||0),style:ri(w,{text:y,align:w.getShallow("align",!0)||c.textAlign,verticalAlign:w.getShallow("verticalAlign",!0)||w.getShallow("baseline",!0)||c.textVerticalAlign,fill:ue(S)?S(i.type==="category"?b:i.type==="value"?v+"":v,m):S})});if(E.anid="label_"+v,p){var P=pc.makeAxisEventDataBase(r);P.targetType="axisLabel",P.value=b,P.tickIndex=m,i.type==="category"&&(P.dataIndex=v),Me(E).eventData=P}t.add(E),E.updateTransform(),h.push(E),e.add(E),E.decomposeTransform()}),h}}const bW=pc;function Adt(e,t){var r={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return xdt(r,e,t),r.seriesInvolved&&Idt(r,e),r}function xdt(e,t,r){var n=t.getComponent("tooltip"),i=t.getComponent("axisPointer"),o=i.get("link",!0)||[],a=[];U(r.getCoordinateSystems(),function(s){if(!s.axisPointerEnabled)return;var l=Tv(s.model),u=e.coordSysAxesInfo[l]={};e.coordSysMap[l]=s;var c=s.model,f=c.getModel("tooltip",n);if(U(s.getAxes(),We(g,!1,null)),s.getTooltipAxes&&n&&f.get("show")){var h=f.get("trigger")==="axis",d=f.get(["axisPointer","type"])==="cross",p=s.getTooltipAxes(f.get(["axisPointer","axis"]));(h||d)&&U(p.baseAxes,We(g,d?"cross":!0,h)),d&&U(p.otherAxes,We(g,"cross",!1))}function g(m,v,y){var b=y.model.getModel("axisPointer",i),w=b.get("show");if(!(!w||w==="auto"&&!m&&!BP(b))){v==null&&(v=b.get("triggerTooltip")),b=m?Mdt(y,f,i,t,m,v):b;var T=b.get("snap"),S=Tv(y.model),k=v||T||y.type==="category",E=e.axesInfo[S]={key:S,axis:y,coordSys:s,axisPointerModel:b,triggerTooltip:v,involveSeries:k,snap:T,useHandle:BP(b),seriesModels:[],linkGroup:null};u[S]=E,e.seriesInvolved=e.seriesInvolved||k;var P=Ldt(o,y);if(P!=null){var C=a[P]||(a[P]={axesInfo:{}});C.axesInfo[S]=E,C.mapper=o[P].mapper,E.linkGroup=C}}}})}function Mdt(e,t,r,n,i,o){var a=t.getModel("axisPointer"),s=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};U(s,function(h){l[h]=oe(a.get(h))}),l.snap=e.type!=="category"&&!!o,a.get("type")==="cross"&&(l.type="line");var u=l.label||(l.label={});if(u.show==null&&(u.show=!1),i==="cross"){var c=a.get(["label","show"]);if(u.show=c!=null?c:!0,!o){var f=l.lineStyle=a.get("crossStyle");f&&Ee(u,f.textStyle)}}return e.model.getModel("axisPointer",new cn(l,r,n))}function Idt(e,t){t.eachSeries(function(r){var n=r.coordinateSystem,i=r.get(["tooltip","trigger"],!0),o=r.get(["tooltip","show"],!0);!n||i==="none"||i===!1||i==="item"||o===!1||r.get(["axisPointer","show"],!0)===!1||U(e.coordSysAxesInfo[Tv(n.model)],function(a){var s=a.axis;n.getAxis(s.dim)===s&&(a.seriesModels.push(r),a.seriesDataCount==null&&(a.seriesDataCount=0),a.seriesDataCount+=r.getData().count())})})}function Ldt(e,t){for(var r=t.model,n=t.dim,i=0;i<e.length;i++){var o=e[i]||{};if(US(o[n+"AxisId"],r.id)||US(o[n+"AxisIndex"],r.componentIndex)||US(o[n+"AxisName"],r.name))return i}}function US(e,t){return e==="all"||St(e)&&De(e,t)>=0||e===t}function Odt(e){var t=ox(e);if(!!t){var r=t.axisPointerModel,n=t.axis.scale,i=r.option,o=r.get("status"),a=r.get("value");a!=null&&(a=n.parse(a));var s=BP(r);o==null&&(i.status=s?"show":"hide");var l=n.getExtent().slice();l[0]>l[1]&&l.reverse(),(a==null||a>l[1])&&(a=l[1]),a<l[0]&&(a=l[0]),i.value=a,s&&(i.status=t.axis.scale.isBlank()?"hide":"show")}}function ox(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[Tv(e)]}function Rdt(e){var t=ox(e);return t&&t.axisPointerModel}function BP(e){return!!e.get(["handle","show"])}function Tv(e){return e.type+"||"+e.id}var zL={},Ddt=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i,o){this.axisPointerClass&&Odt(r),e.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(r,i,!0)},t.prototype.updateAxisPointer=function(r,n,i,o){this._doUpdateAxisPointerClass(r,i,!1)},t.prototype.remove=function(r,n){var i=this._axisPointer;i&&i.remove(n)},t.prototype.dispose=function(r,n){this._disposeAxisPointer(n),e.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(r,n,i){var o=t.getAxisPointerClass(this.axisPointerClass);if(!!o){var a=Rdt(r);a?(this._axisPointer||(this._axisPointer=new o)).render(r,a,n,i):this._disposeAxisPointer(n)}},t.prototype._disposeAxisPointer=function(r){this._axisPointer&&this._axisPointer.dispose(r),this._axisPointer=null},t.registerAxisPointerClass=function(r,n){zL[r]=n},t.getAxisPointerClass=function(r){return r&&zL[r]},t.type="axis",t}(eo);const wW=Ddt;var zP=nr();function Ndt(e,t,r,n){var i=r.axis;if(!i.scale.isBlank()){var o=r.getModel("splitArea"),a=o.getModel("areaStyle"),s=a.get("color"),l=n.coordinateSystem.getRect(),u=i.getTicksCoords({tickModel:o,clamp:!0});if(!!u.length){var c=s.length,f=zP(e).splitAreaColors,h=he(),d=0;if(f)for(var p=0;p<u.length;p++){var g=f.get(u[p].tickValue);if(g!=null){d=(g+(c-1)*p)%c;break}}var m=i.toGlobalCoord(u[0].coord),v=a.getAreaStyle();s=St(s)?s:[s];for(var p=1;p<u.length;p++){var y=i.toGlobalCoord(u[p].coord),b=void 0,w=void 0,T=void 0,S=void 0;i.isHorizontal()?(b=m,w=l.y,T=y-b,S=l.height,m=b+T):(b=l.x,w=m,T=l.width,S=y-w,m=w+S);var k=u[p-1].tickValue;k!=null&&h.set(k,d),t.add(new Lr({anid:k!=null?"area_"+k:null,shape:{x:b,y:w,width:T,height:S},style:Ee({fill:s[d]},v),autoBatch:!0,silent:!0})),d=(d+1)%c}zP(e).splitAreaColors=h}}}function Fdt(e){zP(e).splitAreaColors=null}var $dt=["axisLine","axisTickLabel","axisName"],Bdt=["splitArea","splitLine","minorSplitLine"],SW=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="CartesianAxisPointer",r}return t.prototype.render=function(r,n,i,o){this.group.removeAll();var a=this._axisGroup;if(this._axisGroup=new ar,this.group.add(this._axisGroup),!!r.get("show")){var s=r.getCoordSysModel(),l=$P(s,r),u=new bW(r,_t({handleAutoShown:function(f){for(var h=s.coordinateSystem.getCartesians(),d=0;d<h.length;d++)if(OP(h[d].getOtherAxis(r.axis).scale))return!0;return!1}},l));U($dt,u.add,u),this._axisGroup.add(u.getGroup()),U(Bdt,function(f){r.get([f,"show"])&&zdt[f](this,this._axisGroup,r,s)},this);var c=o&&o.type==="changeAxisOrder"&&o.isInitSort;c||tV(a,this._axisGroup,r),e.prototype.render.call(this,r,n,i,o)}},t.prototype.remove=function(){Fdt(this)},t.type="cartesianAxis",t}(wW),zdt={splitLine:function(e,t,r,n){var i=r.axis;if(!i.scale.isBlank()){var o=r.getModel("splitLine"),a=o.getModel("lineStyle"),s=a.get("color");s=St(s)?s:[s];for(var l=n.coordinateSystem.getRect(),u=i.isHorizontal(),c=0,f=i.getTicksCoords({tickModel:o}),h=[],d=[],p=a.getLineStyle(),g=0;g<f.length;g++){var m=i.toGlobalCoord(f[g].coord);u?(h[0]=m,h[1]=l.y,d[0]=m,d[1]=l.y+l.height):(h[0]=l.x,h[1]=m,d[0]=l.x+l.width,d[1]=m);var v=c++%s.length,y=f[g].tickValue,b=new Wl({anid:y!=null?"line_"+f[g].tickValue:null,autoBatch:!0,shape:{x1:h[0],y1:h[1],x2:d[0],y2:d[1]},style:Ee({stroke:s[v]},p),silent:!0});pv(b.shape,p.lineWidth),t.add(b)}}},minorSplitLine:function(e,t,r,n){var i=r.axis,o=r.getModel("minorSplitLine"),a=o.getModel("lineStyle"),s=n.coordinateSystem.getRect(),l=i.isHorizontal(),u=i.getMinorTicksCoords();if(!!u.length)for(var c=[],f=[],h=a.getLineStyle(),d=0;d<u.length;d++)for(var p=0;p<u[d].length;p++){var g=i.toGlobalCoord(u[d][p].coord);l?(c[0]=g,c[1]=s.y,f[0]=g,f[1]=s.y+s.height):(c[0]=s.x,c[1]=g,f[0]=s.x+s.width,f[1]=g);var m=new Wl({anid:"minor_line_"+u[d][p].tickValue,autoBatch:!0,shape:{x1:c[0],y1:c[1],x2:f[0],y2:f[1]},style:h,silent:!0});pv(m.shape,h.lineWidth),t.add(m)}},splitArea:function(e,t,r,n){Ndt(e,t,r,n)}},TW=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="xAxis",t}(SW),Vdt=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=TW.type,r}return t.type="yAxis",t}(SW),Udt=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="grid",r}return t.prototype.render=function(r,n){this.group.removeAll(),r.get("show")&&this.group.add(new Lr({shape:r.coordinateSystem.getRect(),style:Ee({fill:r.get("backgroundColor")},r.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(eo),VL={offset:0};function kW(e){e.registerComponentView(Udt),e.registerComponentModel(ldt),e.registerCoordinateSystem("cartesian2d",Sdt),ML(e,"x",NP,VL),ML(e,"y",NP,VL),e.registerComponentView(TW),e.registerComponentView(Vdt),e.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}function Kc(e){Qr(kW),e.registerSeriesModel(tdt),e.registerChartView(adt),e.registerLayout(nx("scatter"))}var UL="\0_ec_interaction_mutex";function WL(e,t){return!!Wdt(e)[t]}function Wdt(e){return e[UL]||(e[UL]={})}Hc({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},xn);var jdt=function(e){Ot(t,e);function t(r){var n=e.call(this)||this;n._zr=r;var i=se(n._mousedownHandler,n),o=se(n._mousemoveHandler,n),a=se(n._mouseupHandler,n),s=se(n._mousewheelHandler,n),l=se(n._pinchHandler,n);return n.enable=function(u,c){this.disable(),this._opt=Ee(oe(c)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),u==null&&(u=!0),(u===!0||u==="move"||u==="pan")&&(r.on("mousedown",i),r.on("mousemove",o),r.on("mouseup",a)),(u===!0||u==="scale"||u==="zoom")&&(r.on("mousewheel",s),r.on("pinch",l))},n.disable=function(){r.off("mousedown",i),r.off("mousemove",o),r.off("mouseup",a),r.off("mousewheel",s),r.off("pinch",l)},n}return t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(r){this.pointerChecker=r},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(r){if(!II(r)){for(var n=r.target;n;){if(n.draggable)return;n=n.__hostTarget||n.parent}var i=r.offsetX,o=r.offsetY;this.pointerChecker&&this.pointerChecker(r,i,o)&&(this._x=i,this._y=o,this._dragging=!0)}},t.prototype._mousemoveHandler=function(r){if(!(!this._dragging||!Sy("moveOnMouseMove",r,this._opt)||r.gestureEvent==="pinch"||WL(this._zr,"globalPan"))){var n=r.offsetX,i=r.offsetY,o=this._x,a=this._y,s=n-o,l=i-a;this._x=n,this._y=i,this._opt.preventDefaultMouseMove&&Sc(r.event),PW(this,"pan","moveOnMouseMove",r,{dx:s,dy:l,oldX:o,oldY:a,newX:n,newY:i,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(r){II(r)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(r){var n=Sy("zoomOnMouseWheel",r,this._opt),i=Sy("moveOnMouseWheel",r,this._opt),o=r.wheelDelta,a=Math.abs(o),s=r.offsetX,l=r.offsetY;if(!(o===0||!n&&!i)){if(n){var u=a>3?1.4:a>1?1.2:1.1,c=o>0?u:1/u;WS(this,"zoom","zoomOnMouseWheel",r,{scale:c,originX:s,originY:l,isAvailableBehavior:null})}if(i){var f=Math.abs(o),h=(o>0?1:-1)*(f>3?.4:f>1?.15:.05);WS(this,"scrollMove","moveOnMouseWheel",r,{scrollDelta:h,originX:s,originY:l,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(r){if(!WL(this._zr,"globalPan")){var n=r.pinchScale>1?1.1:1/1.1;WS(this,"zoom",null,r,{scale:n,originX:r.pinchX,originY:r.pinchY,isAvailableBehavior:null})}},t}(Vo);function WS(e,t,r,n,i){e.pointerChecker&&e.pointerChecker(n,i.originX,i.originY)&&(Sc(n.event),PW(e,t,r,n,i))}function PW(e,t,r,n,i){i.isAvailableBehavior=se(Sy,null,r,n),e.trigger(t,i)}function Sy(e,t,r){var n=r[e];return!e||n&&(!$t(n)||t.event[n+"Key"])}const Gdt=jdt;function Hdt(e,t,r){var n=e.target;n.x+=t,n.y+=r,n.dirty()}function Xdt(e,t,r,n){var i=e.target,o=e.zoomLimit,a=e.zoom=e.zoom||1;if(a*=t,o){var s=o.min||0,l=o.max||1/0;a=Math.max(Math.min(l,a),s)}var u=a/e.zoom;e.zoom=a,i.x-=(r-i.x)*(u-1),i.y-=(n-i.y)*(u-1),i.scaleX*=u,i.scaleY*=u,i.dirty()}var Ydt={axisPointer:1,tooltip:1,brush:1};function Kdt(e,t,r){var n=t.getComponentByElement(e.topTarget),i=n&&n.coordinateSystem;return n&&n!==r&&!Ydt.hasOwnProperty(n.mainType)&&i&&i.model!==r}var jL=Vn,Zdt=function(e){Ot(t,e);function t(r){var n=e.call(this)||this;return n.type="view",n.dimensions=["x","y"],n._roamTransformable=new Ju,n._rawTransformable=new Ju,n.name=r,n}return t.prototype.setBoundingRect=function(r,n,i,o){return this._rect=new Le(r,n,i,o),this._rect},t.prototype.getBoundingRect=function(){return this._rect},t.prototype.setViewRect=function(r,n,i,o){this._transformTo(r,n,i,o),this._viewRect=new Le(r,n,i,o)},t.prototype._transformTo=function(r,n,i,o){var a=this.getBoundingRect(),s=this._rawTransformable;s.transform=a.calculateTransform(new Le(r,n,i,o));var l=s.parent;s.parent=null,s.decomposeTransform(),s.parent=l,this._updateTransform()},t.prototype.setCenter=function(r,n){!r||(this._center=[Er(r[0],n.getWidth()),Er(r[1],n.getHeight())],this._updateCenterAndZoom())},t.prototype.setZoom=function(r){r=r||1;var n=this.zoomLimit;n&&(n.max!=null&&(r=Math.min(n.max,r)),n.min!=null&&(r=Math.max(n.min,r))),this._zoom=r,this._updateCenterAndZoom()},t.prototype.getDefaultCenter=function(){var r=this.getBoundingRect(),n=r.x+r.width/2,i=r.y+r.height/2;return[n,i]},t.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},t.prototype.getZoom=function(){return this._zoom||1},t.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},t.prototype._updateCenterAndZoom=function(){var r=this._rawTransformable.getLocalTransform(),n=this._roamTransformable,i=this.getDefaultCenter(),o=this.getCenter(),a=this.getZoom();o=Vn([],o,r),i=Vn([],i,r),n.originX=o[0],n.originY=o[1],n.x=i[0]-o[0],n.y=i[1]-o[1],n.scaleX=n.scaleY=a,this._updateTransform()},t.prototype._updateTransform=function(){var r=this._roamTransformable,n=this._rawTransformable;n.parent=r,r.updateTransform(),n.updateTransform(),LB(this.transform||(this.transform=[]),n.transform||jh()),this._rawTransform=n.getLocalTransform(),this.invTransform=this.invTransform||[],Rb(this.invTransform,this.transform),this.decomposeTransform()},t.prototype.getTransformInfo=function(){var r=this._rawTransformable,n=this._roamTransformable,i=new Ju;return i.transform=n.transform,i.decomposeTransform(),{roam:{x:i.x,y:i.y,scaleX:i.scaleX,scaleY:i.scaleY},raw:{x:r.x,y:r.y,scaleX:r.scaleX,scaleY:r.scaleY}}},t.prototype.getViewRect=function(){return this._viewRect},t.prototype.getViewRectAfterRoam=function(){var r=this.getBoundingRect().clone();return r.applyTransform(this.transform),r},t.prototype.dataToPoint=function(r,n,i){var o=n?this._rawTransform:this.transform;return i=i||[],o?jL(i,r,o):lnt(i,r)},t.prototype.pointToData=function(r){var n=this.invTransform;return n?jL([],r,n):[r[0],r[1]]},t.prototype.convertToPixel=function(r,n,i){var o=GL(n);return o===this?o.dataToPoint(i):null},t.prototype.convertFromPixel=function(r,n,i){var o=GL(n);return o===this?o.pointToData(i):null},t.prototype.containPoint=function(r){return this.getViewRectAfterRoam().contain(r[0],r[1])},t.dimensions=["x","y"],t}(Ju);function GL(e){var t=e.seriesModel;return t?t.coordinateSystem:null}const qdt=Zdt;function HL(e,t){return e.pointToProjected?e.pointToProjected(t):e.pointToData(t)}function Jdt(e,t,r,n){var i=e.getZoom(),o=e.getCenter(),a=t.zoom,s=e.projectedToPoint?e.projectedToPoint(o):e.dataToPoint(o);if(t.dx!=null&&t.dy!=null&&(s[0]-=t.dx,s[1]-=t.dy,e.setCenter(HL(e,s),n)),a!=null){if(r){var l=r.min||0,u=r.max||1/0;a=Math.max(Math.min(i*a,u),l)/i}e.scaleX*=a,e.scaleY*=a;var c=(t.originX-e.x)*(a-1),f=(t.originY-e.y)*(a-1);e.x-=c,e.y-=f,e.updateTransform(),e.setCenter(HL(e,s),n),e.setZoom(a*i)}return{center:e.getCenter(),zoom:e.getZoom()}}function Qdt(e){var t=e;t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var r=[t],n,i;n=r.pop();)if(i=n.children,n.isExpand&&i.length)for(var o=i.length,a=o-1;a>=0;a--){var s=i[a];s.hierNode={defaultAncestor:null,ancestor:s,prelim:0,modifier:0,change:0,shift:0,i:a,thread:null},r.push(s)}}function tpt(e,t){var r=e.isExpand?e.children:[],n=e.parentNode.children,i=e.hierNode.i?n[e.hierNode.i-1]:null;if(r.length){npt(e);var o=(r[0].hierNode.prelim+r[r.length-1].hierNode.prelim)/2;i?(e.hierNode.prelim=i.hierNode.prelim+t(e,i),e.hierNode.modifier=e.hierNode.prelim-o):e.hierNode.prelim=o}else i&&(e.hierNode.prelim=i.hierNode.prelim+t(e,i));e.parentNode.hierNode.defaultAncestor=ipt(e,i,e.parentNode.hierNode.defaultAncestor||n[0],t)}function ept(e){var t=e.hierNode.prelim+e.parentNode.hierNode.modifier;e.setLayout({x:t},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier}function XL(e){return arguments.length?e:spt}function ng(e,t){return e-=Math.PI/2,{x:t*Math.cos(e),y:t*Math.sin(e)}}function rpt(e,t){return jl(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function npt(e){for(var t=e.children,r=t.length,n=0,i=0;--r>=0;){var o=t[r];o.hierNode.prelim+=n,o.hierNode.modifier+=n,i+=o.hierNode.change,n+=o.hierNode.shift+i}}function ipt(e,t,r,n){if(t){for(var i=e,o=e,a=o.parentNode.children[0],s=t,l=i.hierNode.modifier,u=o.hierNode.modifier,c=a.hierNode.modifier,f=s.hierNode.modifier;s=jS(s),o=GS(o),s&&o;){i=jS(i),a=GS(a),i.hierNode.ancestor=e;var h=s.hierNode.prelim+f-o.hierNode.prelim-u+n(s,o);h>0&&(apt(opt(s,e,r),e,h),u+=h,l+=h),f+=s.hierNode.modifier,u+=o.hierNode.modifier,l+=i.hierNode.modifier,c+=a.hierNode.modifier}s&&!jS(i)&&(i.hierNode.thread=s,i.hierNode.modifier+=f-l),o&&!GS(a)&&(a.hierNode.thread=o,a.hierNode.modifier+=u-c,r=e)}return r}function jS(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function GS(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function opt(e,t,r){return e.hierNode.ancestor.parentNode===t.parentNode?e.hierNode.ancestor:r}function apt(e,t,r){var n=r/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=n,t.hierNode.shift+=r,t.hierNode.modifier+=r,t.hierNode.prelim+=r,e.hierNode.change+=n}function spt(e,t){return e.parentNode===t.parentNode?1:2}var lpt=function(){function e(){this.parentPoint=[],this.childPoints=[]}return e}(),upt=function(e){Ot(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new lpt},t.prototype.buildPath=function(r,n){var i=n.childPoints,o=i.length,a=n.parentPoint,s=i[0],l=i[o-1];if(o===1){r.moveTo(a[0],a[1]),r.lineTo(s[0],s[1]);return}var u=n.orient,c=u==="TB"||u==="BT"?0:1,f=1-c,h=Er(n.forkPosition,1),d=[];d[c]=a[c],d[f]=a[f]+(l[f]-a[f])*h,r.moveTo(a[0],a[1]),r.lineTo(d[0],d[1]),r.moveTo(s[0],s[1]),d[c]=s[c],r.lineTo(d[0],d[1]),d[c]=l[c],r.lineTo(d[0],d[1]),r.lineTo(l[0],l[1]);for(var p=1;p<o-1;p++){var g=i[p];r.moveTo(g[0],g[1]),d[c]=g[c],r.lineTo(d[0],d[1])}},t}(Ne),cpt=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._mainGroup=new ar,r}return t.prototype.init=function(r,n){this._controller=new Gdt(n.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(r,n,i){var o=r.getData(),a=r.layoutInfo,s=this._mainGroup,l=r.get("layout");l==="radial"?(s.x=a.x+a.width/2,s.y=a.y+a.height/2):(s.x=a.x,s.y=a.y),this._updateViewCoordSys(r,i),this._updateController(r,n,i);var u=this._data;o.diff(u).add(function(c){YL(o,c)&&KL(o,c,null,s,r)}).update(function(c,f){var h=u.getItemGraphicEl(f);if(!YL(o,c)){h&&qL(u,f,h,s,r);return}KL(o,c,h,s,r)}).remove(function(c){var f=u.getItemGraphicEl(c);f&&qL(u,c,f,s,r)}).execute(),this._nodeScaleRatio=r.get("nodeScaleRatio"),this._updateNodeAndLinkScale(r),r.get("expandAndCollapse")===!0&&o.eachItemGraphicEl(function(c,f){c.off("click").on("click",function(){i.dispatchAction({type:"treeExpandAndCollapse",seriesId:r.id,dataIndex:f})})}),this._data=o},t.prototype._updateViewCoordSys=function(r,n){var i=r.getData(),o=[];i.each(function(f){var h=i.getItemLayout(f);h&&!isNaN(h.x)&&!isNaN(h.y)&&o.push([+h.x,+h.y])});var a=[],s=[];Eot(o,a,s);var l=this._min,u=this._max;s[0]-a[0]===0&&(a[0]=l?l[0]:a[0]-1,s[0]=u?u[0]:s[0]+1),s[1]-a[1]===0&&(a[1]=l?l[1]:a[1]-1,s[1]=u?u[1]:s[1]+1);var c=r.coordinateSystem=new qdt;c.zoomLimit=r.get("scaleLimit"),c.setBoundingRect(a[0],a[1],s[0]-a[0],s[1]-a[1]),c.setCenter(r.get("center"),n),c.setZoom(r.get("zoom")),this.group.attr({x:c.x,y:c.y,scaleX:c.scaleX,scaleY:c.scaleY}),this._min=a,this._max=s},t.prototype._updateController=function(r,n,i){var o=this,a=this._controller,s=this._controllerHost,l=this.group;a.setPointerChecker(function(u,c,f){var h=l.getBoundingRect();return h.applyTransform(l.transform),h.contain(c,f)&&!Kdt(u,i,r)}),a.enable(r.get("roam")),s.zoomLimit=r.get("scaleLimit"),s.zoom=r.coordinateSystem.getZoom(),a.off("pan").off("zoom").on("pan",function(u){Hdt(s,u.dx,u.dy),i.dispatchAction({seriesId:r.id,type:"treeRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){Xdt(s,u.scale,u.originX,u.originY),i.dispatchAction({seriesId:r.id,type:"treeRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),o._updateNodeAndLinkScale(r),i.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(r){var n=r.getData(),i=this._getNodeGlobalScale(r);n.eachItemGraphicEl(function(o,a){o.setSymbolScale(i)})},t.prototype._getNodeGlobalScale=function(r){var n=r.coordinateSystem;if(n.type!=="view")return 1;var i=this._nodeScaleRatio,o=n.scaleX||1,a=n.getZoom(),s=(a-1)*i+1;return s/o},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t}(Zi);function YL(e,t){var r=e.getItemLayout(t);return r&&!isNaN(r.x)&&!isNaN(r.y)}function KL(e,t,r,n,i){var o=!r,a=e.tree.getNodeByDataIndex(t),s=a.getModel(),l=a.getVisual("style").fill,u=a.isExpand===!1&&a.children.length!==0?l:"#fff",c=e.tree.root,f=a.parentNode===c?a:a.parentNode||a,h=e.getItemGraphicEl(f.dataIndex),d=f.getLayout(),p=h?{x:h.__oldX,y:h.__oldY,rawX:h.__radialOldRawX,rawY:h.__radialOldRawY}:d,g=a.getLayout();o?(r=new s2(e,t,null,{symbolInnerColor:u,useNameLabel:!0}),r.x=p.x,r.y=p.y):r.updateData(e,t,null,{symbolInnerColor:u,useNameLabel:!0}),r.__radialOldRawX=r.__radialRawX,r.__radialOldRawY=r.__radialRawY,r.__radialRawX=g.rawX,r.__radialRawY=g.rawY,n.add(r),e.setItemGraphicEl(t,r),r.__oldX=r.x,r.__oldY=r.y,Jr(r,{x:g.x,y:g.y},i);var m=r.getSymbolPath();if(i.get("layout")==="radial"){var v=c.children[0],y=v.getLayout(),b=v.children.length,w=void 0,T=void 0;if(g.x===y.x&&a.isExpand===!0&&v.children.length){var S={x:(v.children[0].getLayout().x+v.children[b-1].getLayout().x)/2,y:(v.children[0].getLayout().y+v.children[b-1].getLayout().y)/2};w=Math.atan2(S.y-y.y,S.x-y.x),w<0&&(w=Math.PI*2+w),T=S.x<y.x,T&&(w=w-Math.PI)}else w=Math.atan2(g.y-y.y,g.x-y.x),w<0&&(w=Math.PI*2+w),a.children.length===0||a.children.length!==0&&a.isExpand===!1?(T=g.x<y.x,T&&(w=w-Math.PI)):(T=g.x>y.x,T||(w=w-Math.PI));var k=T?"left":"right",E=s.getModel("label"),P=E.get("rotate"),C=P*(Math.PI/180),A=m.getTextContent();A&&(m.setTextConfig({position:E.get("position")||k,rotation:P==null?-w:C,origin:"center"}),A.setStyle("verticalAlign","middle"))}var L=s.get(["emphasis","focus"]),R=L==="relative"?AB(a.getAncestorsIndices(),a.getDescendantIndices()):L==="ancestor"?a.getAncestorsIndices():L==="descendant"?a.getDescendantIndices():null;R&&(Me(r).focus=R),fpt(i,a,c,r,p,d,g,n),r.__edge&&(r.onHoverStateChange=function(D){if(D!=="blur"){var F=a.parentNode&&e.getItemGraphicEl(a.parentNode.dataIndex);F&&F.hoverState===e0||uP(r.__edge,D)}})}function fpt(e,t,r,n,i,o,a,s){var l=t.getModel(),u=e.get("edgeShape"),c=e.get("layout"),f=e.getOrient(),h=e.get(["lineStyle","curveness"]),d=e.get("edgeForkPosition"),p=l.getModel("lineStyle").getLineStyle(),g=n.__edge;if(u==="curve")t.parentNode&&t.parentNode!==r&&(g||(g=n.__edge=new zb({shape:VP(c,f,h,i,i)})),Jr(g,{shape:VP(c,f,h,o,a)},e));else if(u==="polyline"&&c==="orthogonal"&&t!==r&&t.children&&t.children.length!==0&&t.isExpand===!0){for(var m=t.children,v=[],y=0;y<m.length;y++){var b=m[y].getLayout();v.push([b.x,b.y])}g||(g=n.__edge=new upt({shape:{parentPoint:[a.x,a.y],childPoints:[[a.x,a.y]],orient:f,forkPosition:d}})),Jr(g,{shape:{parentPoint:[a.x,a.y],childPoints:v}},e)}g&&!(u==="polyline"&&!t.isExpand)&&(g.useStyle(Ee({strokeNoScale:!0,fill:null},p)),hv(g,l,"lineStyle"),bA(g),s.add(g))}function ZL(e,t,r,n,i){var o=t.tree.root,a=EW(o,e),s=a.source,l=a.sourceLayout,u=t.getItemGraphicEl(e.dataIndex);if(!!u){var c=t.getItemGraphicEl(s.dataIndex),f=c.__edge,h=u.__edge||(s.isExpand===!1||s.children.length===1?f:void 0),d=n.get("edgeShape"),p=n.get("layout"),g=n.get("orient"),m=n.get(["lineStyle","curveness"]);h&&(d==="curve"?Ec(h,{shape:VP(p,g,m,l,l),style:{opacity:0}},n,{cb:function(){r.remove(h)},removeOpt:i}):d==="polyline"&&n.get("layout")==="orthogonal"&&Ec(h,{shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]]},style:{opacity:0}},n,{cb:function(){r.remove(h)},removeOpt:i}))}}function EW(e,t){for(var r=t.parentNode===e?t:t.parentNode||t,n;n=r.getLayout(),n==null;)r=r.parentNode===e?r:r.parentNode||r;return{source:r,sourceLayout:n}}function qL(e,t,r,n,i){var o=e.tree.getNodeByDataIndex(t),a=e.tree.root,s=EW(a,o).sourceLayout,l={duration:i.get("animationDurationUpdate"),easing:i.get("animationEasingUpdate")};Ec(r,{x:s.x+1,y:s.y+1},i,{cb:function(){n.remove(r),e.setItemGraphicEl(t,null)},removeOpt:l}),r.fadeOut(null,e.hostModel,{fadeLabel:!0,animation:l}),o.children.forEach(function(u){ZL(u,e,n,i,l)}),ZL(o,e,n,i,l)}function VP(e,t,r,n,i){var o,a,s,l,u,c,f,h;if(e==="radial"){u=n.rawX,f=n.rawY,c=i.rawX,h=i.rawY;var d=ng(u,f),p=ng(u,f+(h-f)*r),g=ng(c,h+(f-h)*r),m=ng(c,h);return{x1:d.x||0,y1:d.y||0,x2:m.x||0,y2:m.y||0,cpx1:p.x||0,cpy1:p.y||0,cpx2:g.x||0,cpy2:g.y||0}}else u=n.x,f=n.y,c=i.x,h=i.y,(t==="LR"||t==="RL")&&(o=u+(c-u)*r,a=f,s=c+(u-c)*r,l=h),(t==="TB"||t==="BT")&&(o=u,a=f+(h-f)*r,s=c,l=h+(f-h)*r);return{x1:u,y1:f,x2:c,y2:h,cpx1:o,cpy1:a,cpx2:s,cpy2:l}}const hpt=cpt;var qi=nr();function dpt(e){var t=e.mainData,r=e.datas;r||(r={main:t},e.datasAttr={main:"data"}),e.datas=e.mainData=null,CW(t,r,e),U(r,function(n){U(t.TRANSFERABLE_METHODS,function(i){n.wrapMethod(i,We(ppt,e))})}),t.wrapMethod("cloneShallow",We(vpt,e)),U(t.CHANGABLE_METHODS,function(n){t.wrapMethod(n,We(gpt,e))}),Do(r[t.dataType]===t)}function ppt(e,t){if(_pt(this)){var r=_t({},qi(this).datas);r[this.dataType]=t,CW(t,r,e)}else ax(t,this.dataType,qi(this).mainData,e);return t}function gpt(e,t){return e.struct&&e.struct.update(),t}function vpt(e,t){return U(qi(t).datas,function(r,n){r!==t&&ax(r.cloneShallow(),n,t,e)}),t}function mpt(e){var t=qi(this).mainData;return e==null||t==null?t:qi(t).datas[e]}function ypt(){var e=qi(this).mainData;return e==null?[{data:e}]:Bt(ze(qi(e).datas),function(t){return{type:t,data:qi(e).datas[t]}})}function _pt(e){return qi(e).mainData===e}function CW(e,t,r){qi(e).datas={},U(t,function(n,i){ax(n,i,e,r)})}function ax(e,t,r,n){qi(r).datas[t]=e,qi(e).mainData=r,e.dataType=t,n.struct&&(e[n.structAttr]=n.struct,n.struct[n.datasAttr[t]]=e),e.getLinkedData=mpt,e.getLinkedDataAll=ypt}var bpt=function(){function e(t,r){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=r}return e.prototype.isRemoved=function(){return this.dataIndex<0},e.prototype.eachNode=function(t,r,n){ue(t)&&(n=r,r=t,t=null),t=t||{},$t(t)&&(t={order:t});var i=t.order||"preorder",o=this[t.attr||"children"],a;i==="preorder"&&(a=r.call(n,this));for(var s=0;!a&&s<o.length;s++)o[s].eachNode(t,r,n);i==="postorder"&&r.call(n,this)},e.prototype.updateDepthAndHeight=function(t){var r=0;this.depth=t;for(var n=0;n<this.children.length;n++){var i=this.children[n];i.updateDepthAndHeight(t+1),i.height>r&&(r=i.height)}this.height=r+1},e.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var r=0,n=this.children,i=n.length;r<i;r++){var o=n[r].getNodeById(t);if(o)return o}},e.prototype.contains=function(t){if(t===this)return!0;for(var r=0,n=this.children,i=n.length;r<i;r++){var o=n[r].contains(t);if(o)return o}},e.prototype.getAncestors=function(t){for(var r=[],n=t?this:this.parentNode;n;)r.push(n),n=n.parentNode;return r.reverse(),r},e.prototype.getAncestorsIndices=function(){for(var t=[],r=this;r;)t.push(r.dataIndex),r=r.parentNode;return t.reverse(),t},e.prototype.getDescendantIndices=function(){var t=[];return this.eachNode(function(r){t.push(r.dataIndex)}),t},e.prototype.getValue=function(t){var r=this.hostTree.data;return r.getStore().get(r.getDimensionIndex(t||"value"),this.dataIndex)},e.prototype.setLayout=function(t,r){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,r)},e.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},e.prototype.getModel=function(t){if(!(this.dataIndex<0)){var r=this.hostTree,n=r.data.getItemModel(this.dataIndex);return n.getModel(t)}},e.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},e.prototype.setVisual=function(t,r){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,r)},e.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},e.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},e.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},e.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,r=0;r<t.length;++r)if(t[r]===this)return r;return-1}return-1},e.prototype.isAncestorOf=function(t){for(var r=t.parentNode;r;){if(r===this)return!0;r=r.parentNode}return!1},e.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},e}(),wpt=function(){function e(t){this.type="tree",this._nodes=[],this.hostModel=t}return e.prototype.eachNode=function(t,r,n){this.root.eachNode(t,r,n)},e.prototype.getNodeByDataIndex=function(t){var r=this.data.getRawIndex(t);return this._nodes[r]},e.prototype.getNodeById=function(t){return this.root.getNodeById(t)},e.prototype.update=function(){for(var t=this.data,r=this._nodes,n=0,i=r.length;n<i;n++)r[n].dataIndex=-1;for(var n=0,i=t.count();n<i;n++)r[t.getRawIndex(n)].dataIndex=n},e.prototype.clearLayouts=function(){this.data.clearItemLayouts()},e.createTree=function(t,r,n){var i=new e(r),o=[],a=1;s(t);function s(c,f){var h=c.value;a=Math.max(a,St(h)?h.length:1),o.push(c);var d=new bpt(Ki(c.name,""),i);f?Spt(d,f):i.root=d,i._nodes.push(d);var p=c.children;if(p)for(var g=0;g<p.length;g++)s(p[g],d)}i.root.updateDepthAndHeight(0);var l=DU(o,{coordDimensions:["value"],dimensionsCount:a}).dimensions,u=new hc(l,r);return u.initData(o),n&&n(u),dpt({mainData:u,struct:i,structAttr:"tree"}),i.update(),i},e}();function Spt(e,t){var r=t.children;e.parentNode!==t&&(r.push(e),e.parentNode=t)}const Tpt=wpt;function kpt(e,t){for(var r=[];e;){var n=e.dataIndex;r.push({name:e.name,dataIndex:n,value:t.getRawValue(n)}),e=e.parentNode}return r.reverse(),r}var Ppt=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.hasSymbolVisual=!0,r.ignoreStyleOnData=!0,r}return t.prototype.getInitialData=function(r){var n={name:r.name,children:r.data},i=r.leaves||{},o=new cn(i,this,this.ecModel),a=Tpt.createTree(n,this,s);function s(f){f.wrapMethod("getItemModel",function(h,d){var p=a.getNodeByDataIndex(d);return p&&p.children.length&&p.isExpand||(h.parentModel=o),h})}var l=0;a.eachNode("preorder",function(f){f.depth>l&&(l=f.depth)});var u=r.expandAndCollapse,c=u&&r.initialTreeDepth>=0?r.initialTreeDepth:l;return a.root.eachNode("preorder",function(f){var h=f.hostTree.data.getRawDataItem(f.dataIndex);f.isExpand=h&&h.collapsed!=null?!h.collapsed:f.depth<=c}),a.data},t.prototype.getOrient=function(){var r=this.get("orient");return r==="horizontal"?r="LR":r==="vertical"&&(r="TB"),r},t.prototype.setZoom=function(r){this.option.zoom=r},t.prototype.setCenter=function(r){this.option.center=r},t.prototype.formatTooltip=function(r,n,i){for(var o=this.getData().tree,a=o.root.children[0],s=o.getNodeByDataIndex(r),l=s.getValue(),u=s.name;s&&s!==a;)u=s.parentNode.name+"."+u,s=s.parentNode;return Gl("nameValue",{name:u,value:l,noValue:isNaN(l)||l==null})},t.prototype.getDataParams=function(r){var n=e.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(r);return n.treeAncestors=kpt(i,this),n.collapsed=!i.isExpand,n},t.type="series.tree",t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t}(Ia);const Ept=Ppt;function Cpt(e,t,r){for(var n=[e],i=[],o;o=n.pop();)if(i.push(o),o.isExpand){var a=o.children;if(a.length)for(var s=0;s<a.length;s++)n.push(a[s])}for(;o=i.pop();)t(o,r)}function fp(e,t){for(var r=[e],n;n=r.pop();)if(t(n),n.isExpand){var i=n.children;if(i.length)for(var o=i.length-1;o>=0;o--)r.push(i[o])}}function Apt(e,t){e.eachSeriesByType("tree",function(r){xpt(r,t)})}function xpt(e,t){var r=rpt(e,t);e.layoutInfo=r;var n=e.get("layout"),i=0,o=0,a=null;n==="radial"?(i=2*Math.PI,o=Math.min(r.height,r.width)/2,a=XL(function(b,w){return(b.parentNode===w.parentNode?1:2)/b.depth})):(i=r.width,o=r.height,a=XL());var s=e.getData().tree.root,l=s.children[0];if(l){Qdt(s),Cpt(l,tpt,a),s.hierNode.modifier=-l.hierNode.prelim,fp(l,ept);var u=l,c=l,f=l;fp(l,function(b){var w=b.getLayout().x;w<u.getLayout().x&&(u=b),w>c.getLayout().x&&(c=b),b.depth>f.depth&&(f=b)});var h=u===c?1:a(u,c)/2,d=h-u.getLayout().x,p=0,g=0,m=0,v=0;if(n==="radial")p=i/(c.getLayout().x+h+d),g=o/(f.depth-1||1),fp(l,function(b){m=(b.getLayout().x+d)*p,v=(b.depth-1)*g;var w=ng(m,v);b.setLayout({x:w.x,y:w.y,rawX:m,rawY:v},!0)});else{var y=e.getOrient();y==="RL"||y==="LR"?(g=o/(c.getLayout().x+h+d),p=i/(f.depth-1||1),fp(l,function(b){v=(b.getLayout().x+d)*g,m=y==="LR"?(b.depth-1)*p:i-(b.depth-1)*p,b.setLayout({x:m,y:v},!0)})):(y==="TB"||y==="BT")&&(p=i/(c.getLayout().x+h+d),g=o/(f.depth-1||1),fp(l,function(b){m=(b.getLayout().x+d)*p,v=y==="TB"?(b.depth-1)*g:o-(b.depth-1)*g,b.setLayout({x:m,y:v},!0)}))}}}function Mpt(e){e.eachSeriesByType("tree",function(t){var r=t.getData(),n=r.tree;n.eachNode(function(i){var o=i.getModel(),a=o.getModel("itemStyle").getItemStyle(),s=r.ensureUniqueItemVisual(i.dataIndex,"style");_t(s,a)})})}function Ipt(e){e.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,r){r.eachComponent({mainType:"series",subType:"tree",query:t},function(n){var i=t.dataIndex,o=n.getData().tree,a=o.getNodeByDataIndex(i);a.isExpand=!a.isExpand})}),e.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(t,r,n){r.eachComponent({mainType:"series",subType:"tree",query:t},function(i){var o=i.coordinateSystem,a=Jdt(o,t,void 0,n);i.setCenter&&i.setCenter(a.center),i.setZoom&&i.setZoom(a.zoom)})})}function Lpt(e){e.registerChartView(hpt),e.registerSeriesModel(Ept),e.registerLayout(Apt),e.registerVisual(Mpt),Ipt(e)}var kv=U,Opt=Yt,M_=-1,sx=function(){function e(t){var r=t.mappingMethod,n=t.type,i=this.option=oe(t);this.type=n,this.mappingMethod=r,this._normalizeData=Npt[r];var o=e.visualHandlers[n];this.applyVisual=o.applyVisual,this.getColorMapper=o.getColorMapper,this._normalizedToVisual=o._normalizedToVisual[r],r==="piecewise"?(HS(i),Rpt(i)):r==="category"?i.categories?Dpt(i):HS(i,!0):(Do(r!=="linear"||i.dataExtent),HS(i))}return e.prototype.mapValueToVisual=function(t){var r=this._normalizeData(t);return this._normalizedToVisual(r,t)},e.prototype.getNormalizer=function(){return se(this._normalizeData,this)},e.listVisualTypes=function(){return ze(e.visualHandlers)},e.isValidType=function(t){return e.visualHandlers.hasOwnProperty(t)},e.eachVisual=function(t,r,n){Yt(t)?U(t,r,n):r.call(n,t)},e.mapVisual=function(t,r,n){var i,o=St(t)?[]:Yt(t)?{}:(i=!0,null);return e.eachVisual(t,function(a,s){var l=r.call(n,a,s);i?o=l:o[s]=l}),o},e.retrieveVisuals=function(t){var r={},n;return t&&kv(e.visualHandlers,function(i,o){t.hasOwnProperty(o)&&(r[o]=t[o],n=!0)}),n?r:null},e.prepareVisualTypes=function(t){if(St(t))t=t.slice();else if(Opt(t)){var r=[];kv(t,function(n,i){r.push(i)}),t=r}else return[];return t.sort(function(n,i){return i==="color"&&n!=="color"&&n.indexOf("color")===0?1:-1}),t},e.dependsOn=function(t,r){return r==="color"?!!(t&&t.indexOf(r)===0):t===r},e.findPieceIndex=function(t,r,n){for(var i,o=1/0,a=0,s=r.length;a<s;a++){var l=r[a].value;if(l!=null){if(l===t||$t(l)&&l===t+"")return a;n&&h(l,a)}}for(var a=0,s=r.length;a<s;a++){var u=r[a],c=u.interval,f=u.close;if(c){if(c[0]===-1/0){if(Dm(f[1],t,c[1]))return a}else if(c[1]===1/0){if(Dm(f[0],c[0],t))return a}else if(Dm(f[0],c[0],t)&&Dm(f[1],t,c[1]))return a;n&&h(c[0],a),n&&h(c[1],a)}}if(n)return t===1/0?r.length-1:t===-1/0?0:i;function h(d,p){var g=Math.abs(d-t);g<o&&(o=g,i=p)}},e.visualHandlers={color:{applyVisual:hp("color"),getColorMapper:function(){var t=this.option;return se(t.mappingMethod==="category"?function(r,n){return!n&&(r=this._normalizeData(r)),ig.call(this,r)}:function(r,n,i){var o=!!i;return!n&&(r=this._normalizeData(r)),i=Fw(r,t.parsedVisual,i),o?i:hs(i,"rgba")},this)},_normalizedToVisual:{linear:function(t){return hs(Fw(t,this.option.parsedVisual),"rgba")},category:ig,piecewise:function(t,r){var n=WP.call(this,r);return n==null&&(n=hs(Fw(t,this.option.parsedVisual),"rgba")),n},fixed:Hu}},colorHue:Rm(function(t,r){return $w(t,r)}),colorSaturation:Rm(function(t,r){return $w(t,null,r)}),colorLightness:Rm(function(t,r){return $w(t,null,null,r)}),colorAlpha:Rm(function(t,r){return Kk(t,r)}),decal:{applyVisual:hp("decal"),_normalizedToVisual:{linear:null,category:ig,piecewise:null,fixed:null}},opacity:{applyVisual:hp("opacity"),_normalizedToVisual:UP([0,1])},liftZ:{applyVisual:hp("liftZ"),_normalizedToVisual:{linear:Hu,category:Hu,piecewise:Hu,fixed:Hu}},symbol:{applyVisual:function(t,r,n){var i=this.mapValueToVisual(t);n("symbol",i)},_normalizedToVisual:{linear:JL,category:ig,piecewise:function(t,r){var n=WP.call(this,r);return n==null&&(n=JL.call(this,t)),n},fixed:Hu}},symbolSize:{applyVisual:hp("symbolSize"),_normalizedToVisual:UP([0,1])}},e}();function Rpt(e){var t=e.pieceList;e.hasSpecialVisual=!1,U(t,function(r,n){r.originIndex=n,r.visual!=null&&(e.hasSpecialVisual=!0)})}function Dpt(e){var t=e.categories,r=e.categoryMap={},n=e.visual;if(kv(t,function(a,s){r[a]=s}),!St(n)){var i=[];Yt(n)?kv(n,function(a,s){var l=r[s];i[l!=null?l:M_]=a}):i[M_]=n,n=AW(e,i)}for(var o=t.length-1;o>=0;o--)n[o]==null&&(delete r[t[o]],t.pop())}function HS(e,t){var r=e.visual,n=[];Yt(r)?kv(r,function(o){n.push(o)}):r!=null&&n.push(r);var i={color:1,symbol:1};!t&&n.length===1&&!i.hasOwnProperty(e.type)&&(n[1]=n[0]),AW(e,n)}function Rm(e){return{applyVisual:function(t,r,n){var i=this.mapValueToVisual(t);n("color",e(r("color"),i))},_normalizedToVisual:UP([0,1])}}function JL(e){var t=this.option.visual;return t[Math.round(ys(e,[0,1],[0,t.length-1],!0))]||{}}function hp(e){return function(t,r,n){n(e,this.mapValueToVisual(t))}}function ig(e){var t=this.option.visual;return t[this.option.loop&&e!==M_?e%t.length:e]}function Hu(){return this.option.visual[0]}function UP(e){return{linear:function(t){return ys(t,e,this.option.visual,!0)},category:ig,piecewise:function(t,r){var n=WP.call(this,r);return n==null&&(n=ys(t,e,this.option.visual,!0)),n},fixed:Hu}}function WP(e){var t=this.option,r=t.pieceList;if(t.hasSpecialVisual){var n=sx.findPieceIndex(e,r),i=r[n];if(i&&i.visual)return i.visual[this.type]}}function AW(e,t){return e.visual=t,e.type==="color"&&(e.parsedVisual=Bt(t,function(r){var n=Yi(r);return n||[0,0,0,1]})),t}var Npt={linear:function(e){return ys(e,this.option.dataExtent,[0,1],!0)},piecewise:function(e){var t=this.option.pieceList,r=sx.findPieceIndex(e,t,!0);if(r!=null)return ys(r,[0,t.length-1],[0,1],!0)},category:function(e){var t=this.option.categories?this.option.categoryMap[e]:e;return t==null?M_:t},fixed:xn};function Dm(e,t,r){return e?t<=r:t<r}const ni=sx;var QL=Wl.prototype,XS=zb.prototype,xW=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}();(function(e){Ot(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(xW);function YS(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var Fpt=function(e){Ot(t,e);function t(r){var n=e.call(this,r)||this;return n.type="ec-line",n}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new xW},t.prototype.buildPath=function(r,n){YS(n)?QL.buildPath.call(this,r,n):XS.buildPath.call(this,r,n)},t.prototype.pointAt=function(r){return YS(this.shape)?QL.pointAt.call(this,r):XS.pointAt.call(this,r)},t.prototype.tangentAt=function(r){var n=this.shape,i=YS(n)?[n.x2-n.x1,n.y2-n.y1]:XS.tangentAt.call(this,r);return oA(i,i)},t}(Ne);const $pt=Fpt;var KS=["fromSymbol","toSymbol"];function tO(e){return"_"+e+"Type"}function eO(e,t,r){var n=t.getItemVisual(r,e);if(!(!n||n==="none")){var i=t.getItemVisual(r,e+"Size"),o=t.getItemVisual(r,e+"Rotate"),a=t.getItemVisual(r,e+"Offset"),s=t.getItemVisual(r,e+"KeepAspect"),l=oU(i),u=HA(a||0,l),c=No(n,-l[0]/2+u[0],-l[1]/2+u[1],l[0],l[1],null,s);return c.__specifiedRotation=o==null||isNaN(o)?void 0:+o*Math.PI/180||0,c.name=e,c}}function Bpt(e){var t=new $pt({name:"line",subPixelOptimize:!0});return jP(t.shape,e),t}function jP(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var r=t[2];r?(e.cpx1=r[0],e.cpy1=r[1]):(e.cpx1=NaN,e.cpy1=NaN)}var zpt=function(e){Ot(t,e);function t(r,n,i){var o=e.call(this)||this;return o._createLine(r,n,i),o}return t.prototype._createLine=function(r,n,i){var o=r.hostModel,a=r.getItemLayout(n),s=Bpt(a);s.shape.percent=0,Ma(s,{shape:{percent:1}},o,n),this.add(s),U(KS,function(l){var u=eO(l,r,n);this.add(u),this[tO(l)]=r.getItemVisual(n,l)},this),this._updateCommonStl(r,n,i)},t.prototype.updateData=function(r,n,i){var o=r.hostModel,a=this.childOfName("line"),s=r.getItemLayout(n),l={shape:{}};jP(l.shape,s),Jr(a,l,o,n),U(KS,function(u){var c=r.getItemVisual(n,u),f=tO(u);if(this[f]!==c){this.remove(this.childOfName(u));var h=eO(u,r,n);this.add(h)}this[f]=c},this),this._updateCommonStl(r,n,i)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(r,n,i){var o=r.hostModel,a=this.childOfName("line"),s=i&&i.emphasisLineStyle,l=i&&i.blurLineStyle,u=i&&i.selectLineStyle,c=i&&i.labelStatesModels,f=i&&i.emphasisDisabled,h=i&&i.focus,d=i&&i.blurScope;if(!i||r.hasItemOption){var p=r.getItemModel(n),g=p.getModel("emphasis");s=g.getModel("lineStyle").getLineStyle(),l=p.getModel(["blur","lineStyle"]).getLineStyle(),u=p.getModel(["select","lineStyle"]).getLineStyle(),f=g.get("disabled"),h=g.get("focus"),d=g.get("blurScope"),c=jc(p)}var m=r.getItemVisual(n,"style"),v=m.stroke;a.useStyle(m),a.style.fill=null,a.style.strokeNoScale=!0,a.ensureState("emphasis").style=s,a.ensureState("blur").style=l,a.ensureState("select").style=u,U(KS,function(S){var k=this.childOfName(S);if(k){k.setColor(v),k.style.opacity=m.opacity;for(var E=0;E<to.length;E++){var P=to[E],C=a.getState(P);if(C){var A=C.style||{},L=k.ensureState(P),R=L.style||(L.style={});A.stroke!=null&&(R[k.__isEmptyBrush?"stroke":"fill"]=A.stroke),A.opacity!=null&&(R.opacity=A.opacity)}}k.markRedraw()}},this);var y=o.getRawValue(n);ud(this,c,{labelDataIndex:n,labelFetcher:{getFormattedLabel:function(S,k){return o.getFormattedLabel(S,k,r.dataType)}},inheritColor:v||"#000",defaultOpacity:m.opacity,defaultText:(y==null?r.getName(n):isFinite(y)?Mr(y):y)+""});var b=this.getTextContent();if(b){var w=c.normal;b.__align=b.style.align,b.__verticalAlign=b.style.verticalAlign,b.__position=w.get("position")||"middle";var T=w.get("distance");St(T)||(T=[T,T]),b.__labelDistance=T}this.setTextConfig({position:null,local:!0,inside:!1}),Pc(this,h,d,f)},t.prototype.highlight=function(){cv(this)},t.prototype.downplay=function(){fv(this)},t.prototype.updateLayout=function(r,n){this.setLinePoints(r.getItemLayout(n))},t.prototype.setLinePoints=function(r){var n=this.childOfName("line");jP(n.shape,r),n.dirty()},t.prototype.beforeUpdate=function(){var r=this,n=r.childOfName("fromSymbol"),i=r.childOfName("toSymbol"),o=r.getTextContent();if(!n&&!i&&(!o||o.ignore))return;for(var a=1,s=this.parent;s;)s.scaleX&&(a/=s.scaleX),s=s.parent;var l=r.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var u=l.shape.percent,c=l.pointAt(0),f=l.pointAt(u),h=MB([],f,c);oA(h,h);function d(C,A){var L=C.__specifiedRotation;if(L==null){var R=l.tangentAt(A);C.attr("rotation",(A===1?-1:1)*Math.PI/2-Math.atan2(R[1],R[0]))}else C.attr("rotation",L)}if(n&&(n.setPosition(c),d(n,0),n.scaleX=n.scaleY=a*u,n.markRedraw()),i&&(i.setPosition(f),d(i,1),i.scaleX=i.scaleY=a*u,i.markRedraw()),o&&!o.ignore){o.x=o.y=0,o.originX=o.originY=0;var p=void 0,g=void 0,m=o.__labelDistance,v=m[0]*a,y=m[1]*a,b=u/2,w=l.tangentAt(b),T=[w[1],-w[0]],S=l.pointAt(b);T[1]>0&&(T[0]=-T[0],T[1]=-T[1]);var k=w[0]<0?-1:1;if(o.__position!=="start"&&o.__position!=="end"){var E=-Math.atan2(w[1],w[0]);f[0]<c[0]&&(E=Math.PI+E),o.rotation=E}var P=void 0;switch(o.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":P=-y,g="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":P=y,g="top";break;default:P=0,g="middle"}switch(o.__position){case"end":o.x=h[0]*v+f[0],o.y=h[1]*y+f[1],p=h[0]>.8?"left":h[0]<-.8?"right":"center",g=h[1]>.8?"top":h[1]<-.8?"bottom":"middle";break;case"start":o.x=-h[0]*v+c[0],o.y=-h[1]*y+c[1],p=h[0]>.8?"right":h[0]<-.8?"left":"center",g=h[1]>.8?"bottom":h[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":o.x=v*k+c[0],o.y=c[1]+P,p=w[0]<0?"right":"left",o.originX=-v*k,o.originY=-P;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":o.x=S[0],o.y=S[1]+P,p="center",o.originY=-P;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":o.x=-v*k+f[0],o.y=f[1]+P,p=w[0]>=0?"right":"left",o.originX=v*k,o.originY=-P;break}o.scaleX=o.scaleY=a,o.setStyle({verticalAlign:o.__verticalAlign||g,align:o.__align||p})}},t}(ar);const Vpt=zpt;var Upt=function(){function e(t){this.group=new ar,this._LineCtor=t||Vpt}return e.prototype.updateData=function(t){var r=this;this._progressiveEls=null;var n=this,i=n.group,o=n._lineData;n._lineData=t,o||i.removeAll();var a=rO(t);t.diff(o).add(function(s){r._doAdd(t,s,a)}).update(function(s,l){r._doUpdate(o,t,l,s,a)}).remove(function(s){i.remove(o.getItemGraphicEl(s))}).execute()},e.prototype.updateLayout=function(){var t=this._lineData;!t||t.eachItemGraphicEl(function(r,n){r.updateLayout(t,n)},this)},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=rO(t),this._lineData=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,r){this._progressiveEls=[];function n(s){!s.isGroup&&!Wpt(s)&&(s.incremental=!0,s.ensureState("emphasis").hoverLayer=!0)}for(var i=t.start;i<t.end;i++){var o=r.getItemLayout(i);if(ZS(o)){var a=new this._LineCtor(r,i,this._seriesScope);a.traverse(n),this.group.add(a),r.setItemGraphicEl(i,a),this._progressiveEls.push(a)}}},e.prototype.remove=function(){this.group.removeAll()},e.prototype.eachRendered=function(t){ld(this._progressiveEls||this.group,t)},e.prototype._doAdd=function(t,r,n){var i=t.getItemLayout(r);if(!!ZS(i)){var o=new this._LineCtor(t,r,n);t.setItemGraphicEl(r,o),this.group.add(o)}},e.prototype._doUpdate=function(t,r,n,i,o){var a=t.getItemGraphicEl(n);if(!ZS(r.getItemLayout(i))){this.group.remove(a);return}a?a.updateData(r,i,o):a=new this._LineCtor(r,i,o),r.setItemGraphicEl(i,a),this.group.add(a)},e}();function Wpt(e){return e.animators&&e.animators.length>0}function rO(e){var t=e.hostModel,r=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:r.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:r.get("disabled"),blurScope:r.get("blurScope"),focus:r.get("focus"),labelStatesModels:jc(t)}}function nO(e){return isNaN(e[0])||isNaN(e[1])}function ZS(e){return e&&!nO(e[0])&&!nO(e[1])}const jpt=Upt;function Gpt(e,t,r,n,i,o){e=e||0;var a=r[1]-r[0];if(i!=null&&(i=Lf(i,[0,a])),o!=null&&(o=Math.max(o,i!=null?i:0)),n==="all"){var s=Math.abs(t[1]-t[0]);s=Lf(s,[0,a]),i=o=Lf(s,[i,o]),n=0}t[0]=Lf(t[0],r),t[1]=Lf(t[1],r);var l=qS(t,n);t[n]+=e;var u=i||0,c=r.slice();l.sign<0?c[0]+=u:c[1]-=u,t[n]=Lf(t[n],c);var f;return f=qS(t,n),i!=null&&(f.sign!==l.sign||f.span<i)&&(t[1-n]=t[n]+l.sign*i),f=qS(t,n),o!=null&&f.span>o&&(t[1-n]=t[n]+f.sign*o),t}function qS(e,t){var r=e[t]-e[1-t];return{span:Math.abs(r),sign:r>0?-1:r<0?1:t?-1:1}}function Lf(e,t){return Math.min(t[1]!=null?t[1]:1/0,Math.max(t[0]!=null?t[0]:-1/0,e))}var iO={color:"fill",borderColor:"stroke"},Hpt={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},ds=nr(),Xpt=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},t.prototype.getInitialData=function(r,n){return i0(null,this)},t.prototype.getDataParams=function(r,n,i){var o=e.prototype.getDataParams.call(this,r,n);return i&&(o.info=ds(i).info),o},t.type="series.custom",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},t}(Ia);const Ypt=Xpt;function Kpt(e,t){return t=t||[0,0],Bt(["x","y"],function(r,n){var i=this.getAxis(r),o=t[n],a=e[n]/2;return i.type==="category"?i.getBandWidth():Math.abs(i.dataToCoord(o-a)-i.dataToCoord(o+a))},this)}function Zpt(e){var t=e.master.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(r){return e.dataToPoint(r)},size:se(Kpt,e)}}}function qpt(e,t){return t=t||[0,0],Bt([0,1],function(r){var n=t[r],i=e[r]/2,o=[],a=[];return o[r]=n-i,a[r]=n+i,o[1-r]=a[1-r]=t[1-r],Math.abs(this.dataToPoint(o)[r]-this.dataToPoint(a)[r])},this)}function Jpt(e){var t=e.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:e.getZoom()},api:{coord:function(r){return e.dataToPoint(r)},size:se(qpt,e)}}}function Qpt(e,t){var r=this.getAxis(),n=t instanceof Array?t[0]:t,i=(e instanceof Array?e[0]:e)/2;return r.type==="category"?r.getBandWidth():Math.abs(r.dataToCoord(n-i)-r.dataToCoord(n+i))}function tgt(e){var t=e.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(r){return e.dataToPoint(r)},size:se(Qpt,e)}}}function egt(e,t){return t=t||[0,0],Bt(["Radius","Angle"],function(r,n){var i="get"+r+"Axis",o=this[i](),a=t[n],s=e[n]/2,l=o.type==="category"?o.getBandWidth():Math.abs(o.dataToCoord(a-s)-o.dataToCoord(a+s));return r==="Angle"&&(l=l*Math.PI/180),l},this)}function rgt(e){var t=e.getRadiusAxis(),r=e.getAngleAxis(),n=t.getExtent();return n[0]>n[1]&&n.reverse(),{coordSys:{type:"polar",cx:e.cx,cy:e.cy,r:n[1],r0:n[0]},api:{coord:function(i){var o=t.dataToRadius(i[0]),a=r.dataToAngle(i[1]),s=e.coordToPoint([o,a]);return s.push(o,a*Math.PI/180),s},size:se(egt,e)}}}function ngt(e){var t=e.getRect(),r=e.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:e.getCellWidth(),cellHeight:e.getCellHeight(),rangeInfo:{start:r.start,end:r.end,weeks:r.weeks,dayCount:r.allDay}},api:{coord:function(n,i){return e.dataToPoint(n,i)}}}}function igt(e,t,r,n){return e&&(e.legacy||e.legacy!==!1&&!r&&!n&&t!=="tspan"&&(t==="text"||Mt(e,"text")))}function ogt(e,t,r){var n=e,i,o,a;if(t==="text")a=n;else{a={},Mt(n,"text")&&(a.text=n.text),Mt(n,"rich")&&(a.rich=n.rich),Mt(n,"textFill")&&(a.fill=n.textFill),Mt(n,"textStroke")&&(a.stroke=n.textStroke),Mt(n,"fontFamily")&&(a.fontFamily=n.fontFamily),Mt(n,"fontSize")&&(a.fontSize=n.fontSize),Mt(n,"fontStyle")&&(a.fontStyle=n.fontStyle),Mt(n,"fontWeight")&&(a.fontWeight=n.fontWeight),o={type:"text",style:a,silent:!0},i={};var s=Mt(n,"textPosition");r?i.position=s?n.textPosition:"inside":s&&(i.position=n.textPosition),Mt(n,"textPosition")&&(i.position=n.textPosition),Mt(n,"textOffset")&&(i.offset=n.textOffset),Mt(n,"textRotation")&&(i.rotation=n.textRotation),Mt(n,"textDistance")&&(i.distance=n.textDistance)}return oO(a,e),U(a.rich,function(l){oO(l,l)}),{textConfig:i,textContent:o}}function oO(e,t){!t||(t.font=t.textFont||t.font,Mt(t,"textStrokeWidth")&&(e.lineWidth=t.textStrokeWidth),Mt(t,"textAlign")&&(e.align=t.textAlign),Mt(t,"textVerticalAlign")&&(e.verticalAlign=t.textVerticalAlign),Mt(t,"textLineHeight")&&(e.lineHeight=t.textLineHeight),Mt(t,"textWidth")&&(e.width=t.textWidth),Mt(t,"textHeight")&&(e.height=t.textHeight),Mt(t,"textBackgroundColor")&&(e.backgroundColor=t.textBackgroundColor),Mt(t,"textPadding")&&(e.padding=t.textPadding),Mt(t,"textBorderColor")&&(e.borderColor=t.textBorderColor),Mt(t,"textBorderWidth")&&(e.borderWidth=t.textBorderWidth),Mt(t,"textBorderRadius")&&(e.borderRadius=t.textBorderRadius),Mt(t,"textBoxShadowColor")&&(e.shadowColor=t.textBoxShadowColor),Mt(t,"textBoxShadowBlur")&&(e.shadowBlur=t.textBoxShadowBlur),Mt(t,"textBoxShadowOffsetX")&&(e.shadowOffsetX=t.textBoxShadowOffsetX),Mt(t,"textBoxShadowOffsetY")&&(e.shadowOffsetY=t.textBoxShadowOffsetY))}function aO(e,t,r){var n=e;n.textPosition=n.textPosition||r.position||"inside",r.offset!=null&&(n.textOffset=r.offset),r.rotation!=null&&(n.textRotation=r.rotation),r.distance!=null&&(n.textDistance=r.distance);var i=n.textPosition.indexOf("inside")>=0,o=e.fill||"#000";sO(n,t);var a=n.textFill==null;return i?a&&(n.textFill=r.insideFill||"#fff",!n.textStroke&&r.insideStroke&&(n.textStroke=r.insideStroke),!n.textStroke&&(n.textStroke=o),n.textStrokeWidth==null&&(n.textStrokeWidth=2)):(a&&(n.textFill=e.fill||r.outsideFill||"#000"),!n.textStroke&&r.outsideStroke&&(n.textStroke=r.outsideStroke)),n.text=t.text,n.rich=t.rich,U(t.rich,function(s){sO(s,s)}),n}function sO(e,t){!t||(Mt(t,"fill")&&(e.textFill=t.fill),Mt(t,"stroke")&&(e.textStroke=t.fill),Mt(t,"lineWidth")&&(e.textStrokeWidth=t.lineWidth),Mt(t,"font")&&(e.font=t.font),Mt(t,"fontStyle")&&(e.fontStyle=t.fontStyle),Mt(t,"fontWeight")&&(e.fontWeight=t.fontWeight),Mt(t,"fontSize")&&(e.fontSize=t.fontSize),Mt(t,"fontFamily")&&(e.fontFamily=t.fontFamily),Mt(t,"align")&&(e.textAlign=t.align),Mt(t,"verticalAlign")&&(e.textVerticalAlign=t.verticalAlign),Mt(t,"lineHeight")&&(e.textLineHeight=t.lineHeight),Mt(t,"width")&&(e.textWidth=t.width),Mt(t,"height")&&(e.textHeight=t.height),Mt(t,"backgroundColor")&&(e.textBackgroundColor=t.backgroundColor),Mt(t,"padding")&&(e.textPadding=t.padding),Mt(t,"borderColor")&&(e.textBorderColor=t.borderColor),Mt(t,"borderWidth")&&(e.textBorderWidth=t.borderWidth),Mt(t,"borderRadius")&&(e.textBorderRadius=t.borderRadius),Mt(t,"shadowColor")&&(e.textBoxShadowColor=t.shadowColor),Mt(t,"shadowBlur")&&(e.textBoxShadowBlur=t.shadowBlur),Mt(t,"shadowOffsetX")&&(e.textBoxShadowOffsetX=t.shadowOffsetX),Mt(t,"shadowOffsetY")&&(e.textBoxShadowOffsetY=t.shadowOffsetY),Mt(t,"textShadowColor")&&(e.textShadowColor=t.textShadowColor),Mt(t,"textShadowBlur")&&(e.textShadowBlur=t.textShadowBlur),Mt(t,"textShadowOffsetX")&&(e.textShadowOffsetX=t.textShadowOffsetX),Mt(t,"textShadowOffsetY")&&(e.textShadowOffsetY=t.textShadowOffsetY))}var MW={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},lO=ze(MW);Uc(xa,function(e,t){return e[t]=1,e},{});xa.join(", ");var I_=["","style","shape","extra"],Xh=nr();function lx(e,t,r,n,i){var o=e+"Animation",a=CA(e,n,i)||{},s=Xh(t).userDuring;return a.duration>0&&(a.during=s?se(hgt,{el:t,userDuring:s}):null,a.setToFinal=!0,a.scope=e),_t(a,r[o]),a}function agt(e,t,r,n){n=n||{};var i=n.dataIndex,o=n.isInit,a=n.clearStyle,s=r.isAnimationEnabled(),l=Xh(e),u=t.style;l.userDuring=t.during;var c={},f={};if(pgt(e,t,f),cO("shape",t,f),cO("extra",t,f),!o&&s&&(dgt(e,t,c),uO("shape",e,t,c),uO("extra",e,t,c),ggt(e,t,u,c)),f.style=u,lgt(e,f,a),cgt(e,t),s)if(o){var h={};U(I_,function(p){var g=p?t[p]:t;g&&g.enterFrom&&(p&&(h[p]=h[p]||{}),_t(p?h[p]:h,g.enterFrom))});var d=lx("enter",e,t,r,i);d.duration>0&&e.animateFrom(h,d)}else ugt(e,t,i||0,r,c);sgt(e,t),u?e.dirty():e.markRedraw()}function sgt(e,t){for(var r=Xh(e).leaveToProps,n=0;n<I_.length;n++){var i=I_[n],o=i?t[i]:t;o&&o.leaveTo&&(r||(r=Xh(e).leaveToProps={}),i&&(r[i]=r[i]||{}),_t(i?r[i]:r,o.leaveTo))}}function ux(e,t,r,n){if(e){var i=e.parent,o=Xh(e).leaveToProps;if(o){var a=lx("update",e,t,r,0);a.done=function(){i.remove(e),n&&n()},e.animateTo(o,a)}else i.remove(e),n&&n()}}function xh(e){return e==="all"}function lgt(e,t,r){var n=t.style;if(!e.isGroup&&n){if(r){e.useStyle({});for(var i=e.animators,o=0;o<i.length;o++){var a=i[o];a.targetName==="style"&&a.changeTarget(e.style)}}e.setStyle(n)}t&&(t.style=null,t&&e.attr(t),t.style=n)}function ugt(e,t,r,n,i){if(i){var o=lx("update",e,t,n,r);o.duration>0&&e.animateFrom(i,o)}}function cgt(e,t){Mt(t,"silent")&&(e.silent=t.silent),Mt(t,"ignore")&&(e.ignore=t.ignore),e instanceof Wc&&Mt(t,"invisible")&&(e.invisible=t.invisible),e instanceof Ne&&Mt(t,"autoBatch")&&(e.autoBatch=t.autoBatch)}var ua={},fgt={setTransform:function(e,t){return ua.el[e]=t,this},getTransform:function(e){return ua.el[e]},setShape:function(e,t){var r=ua.el,n=r.shape||(r.shape={});return n[e]=t,r.dirtyShape&&r.dirtyShape(),this},getShape:function(e){var t=ua.el.shape;if(t)return t[e]},setStyle:function(e,t){var r=ua.el,n=r.style;return n&&(n[e]=t,r.dirtyStyle&&r.dirtyStyle()),this},getStyle:function(e){var t=ua.el.style;if(t)return t[e]},setExtra:function(e,t){var r=ua.el.extra||(ua.el.extra={});return r[e]=t,this},getExtra:function(e){var t=ua.el.extra;if(t)return t[e]}};function hgt(){var e=this,t=e.el;if(!!t){var r=Xh(t).userDuring,n=e.userDuring;if(r!==n){e.el=e.userDuring=null;return}ua.el=t,n(fgt)}}function uO(e,t,r,n){var i=r[e];if(!!i){var o=t[e],a;if(o){var s=r.transition,l=i.transition;if(l)if(!a&&(a=n[e]={}),xh(l))_t(a,o);else for(var u=Ir(l),c=0;c<u.length;c++){var f=u[c],h=o[f];a[f]=h}else if(xh(s)||De(s,e)>=0){!a&&(a=n[e]={});for(var d=ze(o),c=0;c<d.length;c++){var f=d[c],h=o[f];vgt(i[f],h)&&(a[f]=h)}}}}}function cO(e,t,r){var n=t[e];if(!!n)for(var i=r[e]={},o=ze(n),a=0;a<o.length;a++){var s=o[a];i[s]=Dg(n[s])}}function dgt(e,t,r){for(var n=t.transition,i=xh(n)?xa:Ir(n||[]),o=0;o<i.length;o++){var a=i[o];if(!(a==="style"||a==="shape"||a==="extra")){var s=e[a];r[a]=s}}}function pgt(e,t,r){for(var n=0;n<lO.length;n++){var i=lO[n],o=MW[i],a=t[i];a&&(r[o[0]]=a[0],r[o[1]]=a[1])}for(var n=0;n<xa.length;n++){var s=xa[n];t[s]!=null&&(r[s]=t[s])}}function ggt(e,t,r,n){if(!!r){var i=e.style,o;if(i){var a=r.transition,s=t.transition;if(a&&!xh(a)){var l=Ir(a);!o&&(o=n.style={});for(var u=0;u<l.length;u++){var c=l[u],f=i[c];o[c]=f}}else if(e.getAnimationStyleProps&&(xh(s)||xh(a)||De(s,"style")>=0)){var h=e.getAnimationStyleProps(),d=h?h.style:null;if(d){!o&&(o=n.style={});for(var p=ze(r),u=0;u<p.length;u++){var c=p[u];if(d[c]){var f=i[c];o[c]=f}}}}}}}function vgt(e,t){return In(e)?e!==t:e!=null&&isFinite(e)}var IW=nr(),mgt=["percent","easing","shape","style","extra"];function ygt(e){e.stopAnimation("keyframe"),e.attr(IW(e))}function LW(e,t,r){if(!(!r.isAnimationEnabled()||!t)){if(St(t)){U(t,function(s){LW(e,s,r)});return}var n=t.keyframes,i=t.duration;if(r&&i==null){var o=CA("enter",r,0);i=o&&o.duration}if(!(!n||!i)){var a=IW(e);U(I_,function(s){if(!(s&&!e[s])){var l;n.sort(function(u,c){return u.percent-c.percent}),U(n,function(u){var c=e.animators,f=s?u[s]:u;if(!!f){var h=ze(f);if(s||(h=ln(h,function(g){return De(mgt,g)<0})),!!h.length){l||(l=e.animate(s,t.loop,!0),l.scope="keyframe");for(var d=0;d<c.length;d++)c[d]!==l&&c[d].targetName===l.targetName&&c[d].stopTracks(h);s&&(a[s]=a[s]||{});var p=s?a[s]:a;U(h,function(g){p[g]=((s?e[s]:e)||{})[g]}),l.whenWithKeys(i*u.percent,f,h,u.easing)}}}),l&&l.delay(t.delay||0).duration(i).start(t.easing)}})}}}var ps="emphasis",kl="normal",cx="blur",fx="select",Hl=[kl,ps,cx,fx],JS={normal:["itemStyle"],emphasis:[ps,"itemStyle"],blur:[cx,"itemStyle"],select:[fx,"itemStyle"]},QS={normal:["label"],emphasis:[ps,"label"],blur:[cx,"label"],select:[fx,"label"]},_gt=["x","y"],bgt="e\0\0",Li={normal:{},emphasis:{},blur:{},select:{}},wgt={cartesian2d:Zpt,geo:Jpt,single:tgt,polar:rgt,calendar:ngt};function GP(e){return e instanceof Ne}function HP(e){return e instanceof Wc}function Sgt(e,t){t.copyTransform(e),HP(t)&&HP(e)&&(t.setStyle(e.style),t.z=e.z,t.z2=e.z2,t.zlevel=e.zlevel,t.invisible=e.invisible,t.ignore=e.ignore,GP(t)&&GP(e)&&t.setShape(e.shape))}var Tgt=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i,o){this._progressiveEls=null;var a=this._data,s=r.getData(),l=this.group,u=fO(r,s,n,i);a||l.removeAll(),s.diff(a).add(function(f){t3(i,null,f,u(f,o),r,l,s)}).remove(function(f){var h=a.getItemGraphicEl(f);h&&ux(h,ds(h).option,r)}).update(function(f,h){var d=a.getItemGraphicEl(h);t3(i,d,f,u(f,o),r,l,s)}).execute();var c=r.get("clip",!0)?fW(r.coordinateSystem,!1,r):null;c?l.setClipPath(c):l.removeClipPath(),this._data=s},t.prototype.incrementalPrepareRender=function(r,n,i){this.group.removeAll(),this._data=null},t.prototype.incrementalRender=function(r,n,i,o,a){var s=n.getData(),l=fO(n,s,i,o),u=this._progressiveEls=[];function c(d){d.isGroup||(d.incremental=!0,d.ensureState("emphasis").hoverLayer=!0)}for(var f=r.start;f<r.end;f++){var h=t3(null,null,f,l(f,a),n,this.group,s);h&&(h.traverse(c),u.push(h))}},t.prototype.eachRendered=function(r){ld(this._progressiveEls||this.group,r)},t.prototype.filterForExposedEvent=function(r,n,i,o){var a=n.element;if(a==null||i.name===a)return!0;for(;(i=i.__hostTarget||i.parent)&&i!==this.group;)if(i.name===a)return!0;return!1},t.type="custom",t}(Zi);const kgt=Tgt;function hx(e){var t=e.type,r;if(t==="path"){var n=e.shape,i=n.width!=null&&n.height!=null?{x:n.x||0,y:n.y||0,width:n.width,height:n.height}:null,o=DW(n);r=Vb(o,null,i,n.layout||"center"),ds(r).customPathData=o}else if(t==="image")r=new As({}),ds(r).customImagePath=e.style.image;else if(t==="text")r=new Or({});else if(t==="group")r=new ar;else{if(t==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var a=Kz(t);if(!a){var s="";Ae(s)}r=new a}return ds(r).customGraphicType=t,r.name=e.name,r.z2EmphasisLift=1,r.z2SelectLift=1,r}function dx(e,t,r,n,i,o,a){ygt(t);var s=i&&i.normal.cfg;s&&t.setTextConfig(s),n&&n.transition==null&&(n.transition=_gt);var l=n&&n.style;if(l){if(t.type==="text"){var u=l;Mt(u,"textFill")&&(u.fill=u.textFill),Mt(u,"textStroke")&&(u.stroke=u.textStroke)}var c=void 0,f=GP(t)?l.decal:null;e&&f&&(f.dirty=!0,c=C_(f,e)),l.__decalPattern=c}if(HP(t)&&l){var c=l.__decalPattern;c&&(l.decal=c)}agt(t,n,o,{dataIndex:r,isInit:a,clearStyle:!0}),LW(t,n.keyframeAnimation,o)}function OW(e,t,r,n,i){var o=t.isGroup?null:t,a=i&&i[e].cfg;if(o){var s=o.ensureState(e);if(n===!1){var l=o.getState(e);l&&(l.style=null)}else s.style=n||null;a&&(s.textConfig=a),bA(o)}}function Pgt(e,t,r){if(!e.isGroup){var n=e,i=r.currentZ,o=r.currentZLevel;n.z=i,n.zlevel=o;var a=t.z2;a!=null&&(n.z2=a||0);for(var s=0;s<Hl.length;s++)Egt(n,t,Hl[s])}}function Egt(e,t,r){var n=r===kl,i=n?t:L_(t,r),o=i?i.z2:null,a;o!=null&&(a=n?e:e.ensureState(r),a.z2=o||0)}function fO(e,t,r,n){var i=e.get("renderItem"),o=e.coordinateSystem,a={};o&&(a=o.prepareCustoms?o.prepareCustoms(o):wgt[o.type](o));for(var s=Ee({getWidth:n.getWidth,getHeight:n.getHeight,getZr:n.getZr,getDevicePixelRatio:n.getDevicePixelRatio,value:w,style:S,ordinalRawValue:T,styleEmphasis:k,visual:C,barLayout:A,currentSeriesIndices:L,font:R},a.api||{}),l={context:{},seriesId:e.id,seriesName:e.name,seriesIndex:e.seriesIndex,coordSys:a.coordSys,dataInsideLength:t.count(),encode:Cgt(e.getData())},u,c,f={},h={},d={},p={},g=0;g<Hl.length;g++){var m=Hl[g];d[m]=e.getModel(JS[m]),p[m]=e.getModel(QS[m])}function v(D){return D===u?c||(c=t.getItemModel(D)):t.getItemModel(D)}function y(D,F){return t.hasItemOption?D===u?f[F]||(f[F]=v(D).getModel(JS[F])):v(D).getModel(JS[F]):d[F]}function b(D,F){return t.hasItemOption?D===u?h[F]||(h[F]=v(D).getModel(QS[F])):v(D).getModel(QS[F]):p[F]}return function(D,F){return u=D,c=null,f={},h={},i&&i(Ee({dataIndexInside:D,dataIndex:t.getRawIndex(D),actionType:F?F.type:null},l),s)};function w(D,F){return F==null&&(F=u),t.getStore().get(t.getDimensionIndex(D||0),F)}function T(D,F){F==null&&(F=u),D=D||0;var z=t.getDimensionInfo(D);if(!z){var Y=t.getDimensionIndex(D);return Y>=0?t.getStore().get(Y,F):void 0}var K=t.get(z.name,F),et=z&&z.ordinalMeta;return et?et.categories[K]:K}function S(D,F){F==null&&(F=u);var z=t.getItemVisual(F,"style"),Y=z&&z.fill,K=z&&z.opacity,et=y(F,kl).getItemStyle();Y!=null&&(et.fill=Y),K!=null&&(et.opacity=K);var Tt={inheritColor:$t(Y)?Y:"#000"},Ct=b(F,kl),vt=ri(Ct,null,Tt,!1,!0);vt.text=Ct.getShallow("show")?_e(e.getFormattedLabel(F,kl),Sv(t,F)):null;var wt=w_(Ct,Tt,!1);return P(D,et),et=aO(et,vt,wt),D&&E(et,D),et.legacy=!0,et}function k(D,F){F==null&&(F=u);var z=y(F,ps).getItemStyle(),Y=b(F,ps),K=ri(Y,null,null,!0,!0);K.text=Y.getShallow("show")?Og(e.getFormattedLabel(F,ps),e.getFormattedLabel(F,kl),Sv(t,F)):null;var et=w_(Y,null,!0);return P(D,z),z=aO(z,K,et),D&&E(z,D),z.legacy=!0,z}function E(D,F){for(var z in F)Mt(F,z)&&(D[z]=F[z])}function P(D,F){D&&(D.textFill&&(F.textFill=D.textFill),D.textPosition&&(F.textPosition=D.textPosition))}function C(D,F){if(F==null&&(F=u),Mt(iO,D)){var z=t.getItemVisual(F,"style");return z?z[iO[D]]:null}if(Mt(Hpt,D))return t.getItemVisual(F,D)}function A(D){if(o.type==="cartesian2d"){var F=o.getBaseAxis();return vft(Ee({axis:F},D))}}function L(){return r.getCurrentSeriesIndices()}function R(D){return rV(D,r)}}function Cgt(e){var t={};return U(e.dimensions,function(r){var n=e.getDimensionInfo(r);if(!n.isExtraCoord){var i=n.coordDim,o=t[i]=t[i]||[];o[n.coordDimIndex]=e.getDimensionIndex(r)}}),t}function t3(e,t,r,n,i,o,a){if(!n){o.remove(t);return}var s=px(e,t,r,n,i,o);return s&&a.setItemGraphicEl(r,s),s&&Pc(s,n.focus,n.blurScope,n.emphasisDisabled),s}function px(e,t,r,n,i,o){var a=-1,s=t;t&&RW(t,n,i)&&(a=De(o.childrenRef(),t),t=null);var l=!t,u=t;u?u.clearStates():(u=hx(n),s&&Sgt(s,u)),n.morph===!1?u.disableMorphing=!0:u.disableMorphing&&(u.disableMorphing=!1),Li.normal.cfg=Li.normal.conOpt=Li.emphasis.cfg=Li.emphasis.conOpt=Li.blur.cfg=Li.blur.conOpt=Li.select.cfg=Li.select.conOpt=null,Li.isLegacy=!1,xgt(u,r,n,i,l,Li),Agt(u,r,n,i,l),dx(e,u,r,n,Li,i,l),Mt(n,"info")&&(ds(u).info=n.info);for(var c=0;c<Hl.length;c++){var f=Hl[c];if(f!==kl){var h=L_(n,f),d=gx(n,h,f);OW(f,u,h,d,Li)}}return Pgt(u,n,i),n.type==="group"&&Mgt(e,u,r,n,i),a>=0?o.replaceAt(u,a):o.add(u),u}function RW(e,t,r){var n=ds(e),i=t.type,o=t.shape,a=t.style;return r.isUniversalTransitionEnabled()||i!=null&&i!==n.customGraphicType||i==="path"&&Rgt(o)&&DW(o)!==n.customPathData||i==="image"&&Mt(a,"image")&&a.image!==n.customImagePath}function Agt(e,t,r,n,i){var o=r.clipPath;if(o===!1)e&&e.getClipPath()&&e.removeClipPath();else if(o){var a=e.getClipPath();a&&RW(a,o,n)&&(a=null),a||(a=hx(o),e.setClipPath(a)),dx(null,a,t,o,null,n,i)}}function xgt(e,t,r,n,i,o){if(!e.isGroup){hO(r,null,o),hO(r,ps,o);var a=o.normal.conOpt,s=o.emphasis.conOpt,l=o.blur.conOpt,u=o.select.conOpt;if(a!=null||s!=null||u!=null||l!=null){var c=e.getTextContent();if(a===!1)c&&e.removeTextContent();else{a=o.normal.conOpt=a||{type:"text"},c?c.clearStates():(c=hx(a),e.setTextContent(c)),dx(null,c,t,a,null,n,i);for(var f=a&&a.style,h=0;h<Hl.length;h++){var d=Hl[h];if(d!==kl){var p=o[d].conOpt;OW(d,c,p,gx(a,p,d),null)}}f?c.dirty():c.markRedraw()}}}}function hO(e,t,r){var n=t?L_(e,t):e,i=t?gx(e,n,ps):e.style,o=e.type,a=n?n.textConfig:null,s=e.textContent,l=s?t?L_(s,t):s:null;if(i&&(r.isLegacy||igt(i,o,!!a,!!l))){r.isLegacy=!0;var u=ogt(i,o,!t);!a&&u.textConfig&&(a=u.textConfig),!l&&u.textContent&&(l=u.textContent)}if(!t&&l){var c=l;!c.type&&(c.type="text")}var f=t?r[t]:r.normal;f.cfg=a,f.conOpt=l}function L_(e,t){return t?e?e[t]:null:e}function gx(e,t,r){var n=t&&t.style;return n==null&&r===ps&&e&&(n=e.styleEmphasis),n}function Mgt(e,t,r,n,i){var o=n.children,a=o?o.length:0,s=n.$mergeChildren,l=s==="byName"||n.diffChildrenByName,u=s===!1;if(!(!a&&!l&&!u)){if(l){Lgt({api:e,oldChildren:t.children()||[],newChildren:o||[],dataIndex:r,seriesModel:i,group:t});return}u&&t.removeAll();for(var c=0;c<a;c++){var f=o[c],h=t.childAt(c);f?(f.ignore==null&&(f.ignore=!1),px(e,h,r,f,i,t)):h.ignore=!0}for(var d=t.childCount()-1;d>=c;d--){var p=t.childAt(d);Igt(t,p,i)}}}function Igt(e,t,r){t&&ux(t,ds(e).option,r)}function Lgt(e){new xU(e.oldChildren,e.newChildren,dO,dO,e).add(pO).update(pO).remove(Ogt).execute()}function dO(e,t){var r=e&&e.name;return r!=null?r:bgt+t}function pO(e,t){var r=this.context,n=e!=null?r.newChildren[e]:null,i=t!=null?r.oldChildren[t]:null;px(r.api,i,r.dataIndex,n,r.seriesModel,r.group)}function Ogt(e){var t=this.context,r=t.oldChildren[e];r&&ux(r,ds(r).option,t.seriesModel)}function DW(e){return e&&(e.pathData||e.d)}function Rgt(e){return e&&(Mt(e,"pathData")||Mt(e,"d"))}function Dgt(e){e.registerChartView(kgt),e.registerSeriesModel(Ypt)}var Zu=nr(),gO=oe,e3=se,Ngt=function(){function e(){this._dragging=!1,this.animationThreshold=15}return e.prototype.render=function(t,r,n,i){var o=r.get("value"),a=r.get("status");if(this._axisModel=t,this._axisPointerModel=r,this._api=n,!(!i&&this._lastValue===o&&this._lastStatus===a)){this._lastValue=o,this._lastStatus=a;var s=this._group,l=this._handle;if(!a||a==="hide"){s&&s.hide(),l&&l.hide();return}s&&s.show(),l&&l.show();var u={};this.makeElOption(u,o,t,r,n);var c=u.graphicKey;c!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=c;var f=this._moveAnimation=this.determineAnimation(t,r);if(!s)s=this._group=new ar,this.createPointerEl(s,u,t,r),this.createLabelEl(s,u,t,r),n.getZr().add(s);else{var h=We(vO,r,f);this.updatePointerEl(s,u,h),this.updateLabelEl(s,u,h,r)}yO(s,r,!0),this._renderHandle(o)}},e.prototype.remove=function(t){this.clear(t)},e.prototype.dispose=function(t){this.clear(t)},e.prototype.determineAnimation=function(t,r){var n=r.get("animation"),i=t.axis,o=i.type==="category",a=r.get("snap");if(!a&&!o)return!1;if(n==="auto"||n==null){var s=this.animationThreshold;if(o&&i.getBandWidth()>s)return!0;if(a){var l=ox(t).seriesDataCount,u=i.getExtent();return Math.abs(u[0]-u[1])/l>s}return!1}return n===!0},e.prototype.makeElOption=function(t,r,n,i,o){},e.prototype.createPointerEl=function(t,r,n,i){var o=r.pointer;if(o){var a=Zu(t).pointerEl=new gst[o.type](gO(r.pointer));t.add(a)}},e.prototype.createLabelEl=function(t,r,n,i){if(r.label){var o=Zu(t).labelEl=new Or(gO(r.label));t.add(o),mO(o,i)}},e.prototype.updatePointerEl=function(t,r,n){var i=Zu(t).pointerEl;i&&r.pointer&&(i.setStyle(r.pointer.style),n(i,{shape:r.pointer.shape}))},e.prototype.updateLabelEl=function(t,r,n,i){var o=Zu(t).labelEl;o&&(o.setStyle(r.label.style),n(o,{x:r.label.x,y:r.label.y}),mO(o,i))},e.prototype._renderHandle=function(t){if(!(this._dragging||!this.updateHandleTransform)){var r=this._axisPointerModel,n=this._api.getZr(),i=this._handle,o=r.getModel("handle"),a=r.get("status");if(!o.get("show")||!a||a==="hide"){i&&n.remove(i),this._handle=null;return}var s;this._handle||(s=!0,i=this._handle=xA(o.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(u){Sc(u.event)},onmousedown:e3(this._onHandleDragMove,this,0,0),drift:e3(this._onHandleDragMove,this),ondragend:e3(this._onHandleDragEnd,this)}),n.add(i)),yO(i,r,!1),i.setStyle(o.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=o.get("size");St(l)||(l=[l,l]),i.scaleX=l[0]/2,i.scaleY=l[1]/2,ZV(this,"_doDispatchAxisPointer",o.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,s)}},e.prototype._moveHandleToValue=function(t,r){vO(this._axisPointerModel,!r&&this._moveAnimation,this._handle,r3(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},e.prototype._onHandleDragMove=function(t,r){var n=this._handle;if(!!n){this._dragging=!0;var i=this.updateHandleTransform(r3(n),[t,r],this._axisModel,this._axisPointerModel);this._payloadInfo=i,n.stopAnimation(),n.attr(r3(i)),Zu(n).lastProp=null,this._doDispatchAxisPointer()}},e.prototype._doDispatchAxisPointer=function(){var t=this._handle;if(!!t){var r=this._payloadInfo,n=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:r.cursorPoint[0],y:r.cursorPoint[1],tooltipOption:r.tooltipOption,axesInfo:[{axisDim:n.axis.dim,axisIndex:n.componentIndex}]})}},e.prototype._onHandleDragEnd=function(){this._dragging=!1;var t=this._handle;if(!!t){var r=this._axisPointerModel.get("value");this._moveHandleToValue(r),this._api.dispatchAction({type:"hideTip"})}},e.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var r=t.getZr(),n=this._group,i=this._handle;r&&n&&(this._lastGraphicKey=null,n&&r.remove(n),i&&r.remove(i),this._group=null,this._handle=null,this._payloadInfo=null),kP(this,"_doDispatchAxisPointer")},e.prototype.doClear=function(){},e.prototype.buildLabel=function(t,r,n){return n=n||0,{x:t[n],y:t[1-n],width:r[n],height:r[1-n]}},e}();function vO(e,t,r,n){NW(Zu(r).lastProp,n)||(Zu(r).lastProp=n,t?Jr(r,n,e):(r.stopAnimation(),r.attr(n)))}function NW(e,t){if(Yt(e)&&Yt(t)){var r=!0;return U(t,function(n,i){r=r&&NW(e[i],n)}),!!r}else return e===t}function mO(e,t){e[t.get(["label","show"])?"show":"hide"]()}function r3(e){return{x:e.x||0,y:e.y||0,rotation:e.rotation||0}}function yO(e,t,r){var n=t.get("z"),i=t.get("zlevel");e&&e.traverse(function(o){o.type!=="group"&&(n!=null&&(o.z=n),i!=null&&(o.zlevel=i),o.silent=r)})}const Fgt=Ngt;function $gt(e){var t=e.get("type"),r=e.getModel(t+"Style"),n;return t==="line"?(n=r.getLineStyle(),n.fill=null):t==="shadow"&&(n=r.getAreaStyle(),n.stroke=null),n}function Bgt(e,t,r,n,i){var o=r.get("value"),a=FW(o,t.axis,t.ecModel,r.get("seriesDataIndices"),{precision:r.get(["label","precision"]),formatter:r.get(["label","formatter"])}),s=r.getModel("label"),l=n0(s.get("padding")||0),u=s.getFont(),c=cA(a,u),f=i.position,h=c.width+l[1]+l[3],d=c.height+l[0]+l[2],p=i.align;p==="right"&&(f[0]-=h),p==="center"&&(f[0]-=h/2);var g=i.verticalAlign;g==="bottom"&&(f[1]-=d),g==="middle"&&(f[1]-=d/2),zgt(f,h,d,n);var m=s.get("backgroundColor");(!m||m==="auto")&&(m=t.get(["axisLine","lineStyle","color"])),e.label={x:f[0],y:f[1],style:ri(s,{text:a,font:u,fill:s.getTextColor(),padding:l,backgroundColor:m}),z2:10}}function zgt(e,t,r,n){var i=n.getWidth(),o=n.getHeight();e[0]=Math.min(e[0]+t,i)-t,e[1]=Math.min(e[1]+r,o)-r,e[0]=Math.max(e[0],0),e[1]=Math.max(e[1],0)}function FW(e,t,r,n,i){e=t.scale.parse(e);var o=t.scale.getLabel({value:e},{precision:i.precision}),a=i.formatter;if(a){var s={value:ex(t,{value:e}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};U(n,function(l){var u=r.getSeriesByIndex(l.seriesIndex),c=l.dataIndexInside,f=u&&u.getDataParams(c);f&&s.seriesData.push(f)}),$t(a)?o=a.replace("{value}",o):ue(a)&&(o=a(s))}return o}function $W(e,t,r){var n=jh();return lA(n,n,r.rotation),Gk(n,n,r.position),Ph([e.dataToCoord(t),(r.labelOffset||0)+(r.labelDirection||1)*(r.labelMargin||0)],n)}function Vgt(e,t,r,n,i,o){var a=bW.innerTextLayout(r.rotation,0,r.labelDirection);r.labelMargin=i.get(["label","margin"]),Bgt(t,n,i,o,{position:$W(n.axis,e,r),align:a.textAlign,verticalAlign:a.textVerticalAlign})}function Ugt(e,t,r){return r=r||0,{x1:e[r],y1:e[1-r],x2:t[r],y2:t[1-r]}}function Wgt(e,t,r){return r=r||0,{x:e[r],y:e[1-r],width:t[r],height:t[1-r]}}var jgt=function(e){Ot(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeElOption=function(r,n,i,o,a){var s=i.axis,l=s.grid,u=o.get("type"),c=_O(l,s).getOtherAxis(s).getGlobalExtent(),f=s.toGlobalCoord(s.dataToCoord(n,!0));if(u&&u!=="none"){var h=$gt(o),d=Ggt[u](s,f,c);d.style=h,r.graphicKey=d.type,r.pointer=d}var p=$P(l.model,i);Vgt(n,r,p,i,o,a)},t.prototype.getHandleTransform=function(r,n,i){var o=$P(n.axis.grid.model,n,{labelInside:!1});o.labelMargin=i.get(["handle","margin"]);var a=$W(n.axis,r,o);return{x:a[0],y:a[1],rotation:o.rotation+(o.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(r,n,i,o){var a=i.axis,s=a.grid,l=a.getGlobalExtent(!0),u=_O(s,a).getOtherAxis(a).getGlobalExtent(),c=a.dim==="x"?0:1,f=[r.x,r.y];f[c]+=n[c],f[c]=Math.min(l[1],f[c]),f[c]=Math.max(l[0],f[c]);var h=(u[1]+u[0])/2,d=[h,h];d[c]=f[c];var p=[{verticalAlign:"middle"},{align:"center"}];return{x:f[0],y:f[1],rotation:r.rotation,cursorPoint:d,tooltipOption:p[c]}},t}(Fgt);function _O(e,t){var r={};return r[t.dim+"AxisIndex"]=t.index,e.getCartesian(r)}var Ggt={line:function(e,t,r){var n=Ugt([t,r[0]],[t,r[1]],bO(e));return{type:"Line",subPixelOptimize:!0,shape:n}},shadow:function(e,t,r){var n=Math.max(1,e.getBandWidth()),i=r[1]-r[0];return{type:"Rect",shape:Wgt([t-n/2,r[0]],[n,i],bO(e))}}};function bO(e){return e.dim==="x"?0:1}const Hgt=jgt;var Xgt=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(qe);const Ygt=Xgt;var ls=nr(),Kgt=U;function BW(e,t,r){if(!me.node){var n=t.getZr();ls(n).records||(ls(n).records={}),Zgt(n,t);var i=ls(n).records[e]||(ls(n).records[e]={});i.handler=r}}function Zgt(e,t){if(ls(e).initialized)return;ls(e).initialized=!0,r("click",We(wO,"click")),r("mousemove",We(wO,"mousemove")),r("globalout",Jgt);function r(n,i){e.on(n,function(o){var a=Qgt(t);Kgt(ls(e).records,function(s){s&&i(s,o,a.dispatchAction)}),qgt(a.pendings,t)})}}function qgt(e,t){var r=e.showTip.length,n=e.hideTip.length,i;r?i=e.showTip[r-1]:n&&(i=e.hideTip[n-1]),i&&(i.dispatchAction=null,t.dispatchAction(i))}function Jgt(e,t,r){e.handler("leave",null,r)}function wO(e,t,r,n){t.handler(e,r,n)}function Qgt(e){var t={showTip:[],hideTip:[]},r=function(n){var i=t[n.type];i?i.push(n):(n.dispatchAction=r,e.dispatchAction(n))};return{dispatchAction:r,pendings:t}}function XP(e,t){if(!me.node){var r=t.getZr(),n=(ls(r).records||{})[e];n&&(ls(r).records[e]=null)}}var tvt=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){var o=n.getComponent("tooltip"),a=r.get("triggerOn")||o&&o.get("triggerOn")||"mousemove|click";BW("axisPointer",i,function(s,l,u){a!=="none"&&(s==="leave"||a.indexOf(s)>=0)&&u({type:"updateAxisPointer",currTrigger:s,x:l&&l.offsetX,y:l&&l.offsetY})})},t.prototype.remove=function(r,n){XP("axisPointer",n)},t.prototype.dispose=function(r,n){XP("axisPointer",n)},t.type="axisPointer",t}(eo);const evt=tvt;function zW(e,t){var r=[],n=e.seriesIndex,i;if(n==null||!(i=t.getSeriesByIndex(n)))return{point:[]};var o=i.getData(),a=Tc(o,e);if(a==null||a<0||St(a))return{point:[]};var s=o.getItemGraphicEl(a),l=i.coordinateSystem;if(i.getTooltipPosition)r=i.getTooltipPosition(a)||[];else if(l&&l.dataToPoint)if(e.isStacked){var u=l.getBaseAxis(),c=l.getOtherAxis(u),f=c.dim,h=u.dim,d=f==="x"||f==="radius"?1:0,p=o.mapDimension(h),g=[];g[d]=o.get(p,a),g[1-d]=o.get(o.getCalculationInfo("stackResultDimension"),a),r=l.dataToPoint(g)||[]}else r=l.dataToPoint(o.getValues(Bt(l.dimensions,function(v){return o.mapDimension(v)}),a))||[];else if(s){var m=s.getBoundingRect().clone();m.applyTransform(s.transform),r=[m.x+m.width/2,m.y+m.height/2]}return{point:r,el:s}}var SO=nr();function rvt(e,t,r){var n=e.currTrigger,i=[e.x,e.y],o=e,a=e.dispatchAction||se(r.dispatchAction,r),s=t.getComponent("axisPointer").coordSysAxesInfo;if(!!s){Ty(i)&&(i=zW({seriesIndex:o.seriesIndex,dataIndex:o.dataIndex},t).point);var l=Ty(i),u=o.axesInfo,c=s.axesInfo,f=n==="leave"||Ty(i),h={},d={},p={list:[],map:{}},g={showPointer:We(ivt,d),showTooltip:We(ovt,p)};U(s.coordSysMap,function(v,y){var b=l||v.containPoint(i);U(s.coordSysAxesInfo[y],function(w,T){var S=w.axis,k=uvt(u,w);if(!f&&b&&(!u||k)){var E=k&&k.value;E==null&&!l&&(E=S.pointToData(i)),E!=null&&TO(w,E,g,!1,h)}})});var m={};return U(c,function(v,y){var b=v.linkGroup;b&&!d[y]&&U(b.axesInfo,function(w,T){var S=d[T];if(w!==v&&S){var k=S.value;b.mapper&&(k=v.axis.scale.parse(b.mapper(k,kO(w),kO(v)))),m[v.key]=k}})}),U(m,function(v,y){TO(c[y],v,g,!0,h)}),avt(d,c,h),svt(p,i,e,a),lvt(c,a,r),h}}function TO(e,t,r,n,i){var o=e.axis;if(!(o.scale.isBlank()||!o.containData(t))){if(!e.involveSeries){r.showPointer(e,t);return}var a=nvt(t,e),s=a.payloadBatch,l=a.snapToValue;s[0]&&i.seriesIndex==null&&_t(i,s[0]),!n&&e.snap&&o.containData(l)&&l!=null&&(t=l),r.showPointer(e,t,s),r.showTooltip(e,a,l)}}function nvt(e,t){var r=t.axis,n=r.dim,i=e,o=[],a=Number.MAX_VALUE,s=-1;return U(t.seriesModels,function(l,u){var c=l.getData().mapDimensionsAll(n),f,h;if(l.getAxisTooltipData){var d=l.getAxisTooltipData(c,e,r);h=d.dataIndices,f=d.nestestValue}else{if(h=l.getData().indicesOfNearest(c[0],e,r.type==="category"?.5:null),!h.length)return;f=l.getData().get(c[0],h[0])}if(!(f==null||!isFinite(f))){var p=e-f,g=Math.abs(p);g<=a&&((g<a||p>=0&&s<0)&&(a=g,s=p,i=f,o.length=0),U(h,function(m){o.push({seriesIndex:l.seriesIndex,dataIndexInside:m,dataIndex:l.getData().getRawIndex(m)})}))}}),{payloadBatch:o,snapToValue:i}}function ivt(e,t,r,n){e[t.key]={value:r,payloadBatch:n}}function ovt(e,t,r,n){var i=r.payloadBatch,o=t.axis,a=o.model,s=t.axisPointerModel;if(!(!t.triggerTooltip||!i.length)){var l=t.coordSys.model,u=Tv(l),c=e.map[u];c||(c=e.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},e.list.push(c)),c.dataByAxis.push({axisDim:o.dim,axisIndex:a.componentIndex,axisType:a.type,axisId:a.id,value:n,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function avt(e,t,r){var n=r.axesInfo=[];U(t,function(i,o){var a=i.axisPointerModel.option,s=e[o];s?(!i.useHandle&&(a.status="show"),a.value=s.value,a.seriesDataIndices=(s.payloadBatch||[]).slice()):!i.useHandle&&(a.status="hide"),a.status==="show"&&n.push({axisDim:i.axis.dim,axisIndex:i.axis.model.componentIndex,value:a.value})})}function svt(e,t,r,n){if(Ty(t)||!e.list.length){n({type:"hideTip"});return}var i=((e.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};n({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:r.tooltipOption,position:r.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:e.list})}function lvt(e,t,r){var n=r.getZr(),i="axisPointerLastHighlights",o=SO(n)[i]||{},a=SO(n)[i]={};U(e,function(u,c){var f=u.axisPointerModel.option;f.status==="show"&&U(f.seriesDataIndices,function(h){var d=h.seriesIndex+" | "+h.dataIndex;a[d]=h})});var s=[],l=[];U(o,function(u,c){!a[c]&&l.push(u)}),U(a,function(u,c){!o[c]&&s.push(u)}),l.length&&r.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),s.length&&r.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function uvt(e,t){for(var r=0;r<(e||[]).length;r++){var n=e[r];if(t.axis.dim===n.axisDim&&t.axis.model.componentIndex===n.axisIndex)return n}}function kO(e){var t=e.axis.model,r={},n=r.axisDim=e.axis.dim;return r.axisIndex=r[n+"AxisIndex"]=t.componentIndex,r.axisName=r[n+"AxisName"]=t.name,r.axisId=r[n+"AxisId"]=t.id,r}function Ty(e){return!e||e[0]==null||isNaN(e[0])||e[1]==null||isNaN(e[1])}function VW(e){wW.registerAxisPointerClass("CartesianAxisPointer",Hgt),e.registerComponentModel(Ygt),e.registerComponentView(evt),e.registerPreprocessor(function(t){if(t){(!t.axisPointer||t.axisPointer.length===0)&&(t.axisPointer={});var r=t.axisPointer.link;r&&!St(r)&&(t.axisPointer.link=[r])}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,function(t,r){t.getComponent("axisPointer").coordSysAxesInfo=Adt(t,r)}),e.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},rvt)}function Zc(e){Qr(kW),Qr(VW)}function cvt(e,t){var r=n0(t.get("padding")),n=t.getItemStyle(["color","opacity"]);return n.fill=t.get("backgroundColor"),e=new Lr({shape:{x:e.x-r[3],y:e.y-r[0],width:e.width+r[1]+r[3],height:e.height+r[0]+r[2],r:t.get("borderRadius")},style:n,silent:!0,z2:-1}),e}var fvt=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(qe);const hvt=fvt;function UW(e){var t=e.get("confine");return t!=null?!!t:e.get("renderMode")==="richText"}function WW(e){if(!!me.domSupported){for(var t=document.documentElement.style,r=0,n=e.length;r<n;r++)if(e[r]in t)return e[r]}}var jW=WW(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),dvt=WW(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function GW(e,t){if(!e)return t;t=vV(t,!0);var r=e.indexOf(t);return e=r===-1?t:"-"+e.slice(0,r)+"-"+t,e.toLowerCase()}function pvt(e,t){var r=e.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(e);return r?t?r[t]:r:null}var gvt=GW(dvt,"transition"),vx=GW(jW,"transform"),vvt="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(me.transform3dSupported?"will-change:transform;":"");function mvt(e){return e=e==="left"?"right":e==="right"?"left":e==="top"?"bottom":"top",e}function yvt(e,t,r){if(!$t(r)||r==="inside")return"";var n=e.get("backgroundColor"),i=e.get("borderWidth");t=Cc(t);var o=mvt(r),a=Math.max(Math.round(i)*1.5,6),s="",l=vx+":",u;De(["left","right"],o)>-1?(s+="top:50%",l+="translateY(-50%) rotate("+(u=o==="left"?-225:-45)+"deg)"):(s+="left:50%",l+="translateX(-50%) rotate("+(u=o==="top"?225:45)+"deg)");var c=u*Math.PI/180,f=a+i,h=f*Math.abs(Math.cos(c))+f*Math.abs(Math.sin(c)),d=Math.round(((h-Math.SQRT2*i)/2+Math.SQRT2*i-(h-f)/2)*100)/100;s+=";"+o+":-"+d+"px";var p=t+" solid "+i+"px;",g=["position:absolute;width:"+a+"px;height:"+a+"px;",s+";"+l+";","border-bottom:"+p,"border-right:"+p,"background-color:"+n+";"];return'<div style="'+g.join("")+'"></div>'}function _vt(e,t){var r="cubic-bezier(0.23,1,0.32,1)",n=" "+e/2+"s "+r,i="opacity"+n+",visibility"+n;return t||(n=" "+e+"s "+r,i+=me.transformSupported?","+vx+n:",left"+n+",top"+n),gvt+":"+i}function PO(e,t,r){var n=e.toFixed(0)+"px",i=t.toFixed(0)+"px";if(!me.transformSupported)return r?"top:"+i+";left:"+n+";":[["top",i],["left",n]];var o=me.transform3dSupported,a="translate"+(o?"3d":"")+"("+n+","+i+(o?",0":"")+")";return r?"top:0;left:0;"+vx+":"+a+";":[["top",0],["left",0],[jW,a]]}function bvt(e){var t=[],r=e.get("fontSize"),n=e.getTextColor();n&&t.push("color:"+n),t.push("font:"+e.getFont()),r&&t.push("line-height:"+Math.round(r*3/2)+"px");var i=e.get("textShadowColor"),o=e.get("textShadowBlur")||0,a=e.get("textShadowOffsetX")||0,s=e.get("textShadowOffsetY")||0;return i&&o&&t.push("text-shadow:"+a+"px "+s+"px "+o+"px "+i),U(["decoration","align"],function(l){var u=e.get(l);u&&t.push("text-"+l+":"+u)}),t.join(";")}function wvt(e,t,r){var n=[],i=e.get("transitionDuration"),o=e.get("backgroundColor"),a=e.get("shadowBlur"),s=e.get("shadowColor"),l=e.get("shadowOffsetX"),u=e.get("shadowOffsetY"),c=e.getModel("textStyle"),f=YV(e,"html"),h=l+"px "+u+"px "+a+"px "+s;return n.push("box-shadow:"+h),t&&i&&n.push(_vt(i,r)),o&&n.push("background-color:"+o),U(["width","color","radius"],function(d){var p="border-"+d,g=vV(p),m=e.get(g);m!=null&&n.push(p+":"+m+(d==="color"?"":"px"))}),n.push(bvt(c)),f!=null&&n.push("padding:"+n0(f).join("px ")+"px"),n.join(";")+";"}function EO(e,t,r,n,i){var o=t&&t.painter;if(r){var a=o&&o.getViewportRoot();a&&ynt(e,a,document.body,n,i)}else{e[0]=n,e[1]=i;var s=o&&o.getViewportRootOffset();s&&(e[0]+=s.offsetLeft,e[1]+=s.offsetTop)}e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var Svt=function(){function e(t,r,n){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._firstShow=!0,this._longHide=!0,me.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var o=this._zr=r.getZr(),a=this._appendToBody=n&&n.appendToBody;EO(this._styleCoord,o,a,r.getWidth()/2,r.getHeight()/2),a?document.body.appendChild(i):t.appendChild(i),this._container=t;var s=this;i.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},i.onmousemove=function(l){if(l=l||window.event,!s._enterable){var u=o.handler,c=o.painter.getViewportRoot();$i(c,l,!0),u.dispatch("mousemove",l)}},i.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return e.prototype.update=function(t){var r=this._container,n=pvt(r,"position"),i=r.style;i.position!=="absolute"&&n!=="absolute"&&(i.position="relative");var o=t.get("alwaysShowContent");o&&this._moveIfResized(),this.el.className=t.get("className")||""},e.prototype.show=function(t,r){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el,i=n.style,o=this._styleCoord;n.innerHTML?i.cssText=vvt+wvt(t,!this._firstShow,this._longHide)+PO(o[0],o[1],!0)+("border-color:"+Cc(r)+";")+(t.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},e.prototype.setContent=function(t,r,n,i,o){var a=this.el;if(t==null){a.innerHTML="";return}var s="";if($t(o)&&n.get("trigger")==="item"&&!UW(n)&&(s=yvt(n,i,o)),$t(t))a.innerHTML=t+s;else if(t){a.innerHTML="",St(t)||(t=[t]);for(var l=0;l<t.length;l++)a_(t[l])&&t[l].parentNode!==a&&a.appendChild(t[l]);if(s&&a.childNodes.length){var u=document.createElement("div");u.innerHTML=s,a.appendChild(u)}}},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},e.prototype.moveTo=function(t,r){var n=this._styleCoord;if(EO(n,this._zr,this._appendToBody,t,r),n[0]!=null&&n[1]!=null){var i=this.el.style,o=PO(n[0],n[1]);U(o,function(a){i[a[0]]=a[1]})}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},e.prototype.hide=function(){var t=this,r=this.el.style;r.visibility="hidden",r.opacity="0",me.transform3dSupported&&(r.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(se(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},e}();const Tvt=Svt;var kvt=function(){function e(t){this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._zr=t.getZr(),AO(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return e.prototype.update=function(t){var r=t.get("alwaysShowContent");r&&this._moveIfResized()},e.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},e.prototype.setContent=function(t,r,n,i,o){var a=this;Yt(t)&&Ae(""),this.el&&this._zr.remove(this.el);var s=n.getModel("textStyle");this.el=new Or({style:{rich:r.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:s.get("textShadowColor"),fill:n.get(["textStyle","color"]),padding:YV(n,"richText"),verticalAlign:"top",align:"left"},z:n.get("z")}),U(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(u){a.el.style[u]=n.get(u)}),U(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(u){a.el.style[u]=s.get(u)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el,r=this.el.getBoundingRect(),n=CO(t.style);return[r.width+n.left+n.right,r.height+n.top+n.bottom]},e.prototype.moveTo=function(t,r){var n=this.el;if(n){var i=this._styleCoord;AO(i,this._zr,t,r),t=i[0],r=i[1];var o=n.style,a=dl(o.borderWidth||0),s=CO(o);n.x=t+a+s.left,n.y=r+a+s.top,n.markRedraw()}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},e.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(se(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this._zr.remove(this.el)},e}();function dl(e){return Math.max(0,e)}function CO(e){var t=dl(e.shadowBlur||0),r=dl(e.shadowOffsetX||0),n=dl(e.shadowOffsetY||0);return{left:dl(t-r),right:dl(t+r),top:dl(t-n),bottom:dl(t+n)}}function AO(e,t,r,n){e[0]=r,e[1]=n,e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}const Pvt=kvt;var Evt=new Lr({shape:{x:-1,y:-1,width:2,height:2}}),Cvt=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,n){if(!(me.node||!n.getDom())){var i=r.getComponent("tooltip"),o=this._renderMode=tot(i.get("renderMode"));this._tooltipContent=o==="richText"?new Pvt(n):new Tvt(n.getDom(),n,{appendToBody:i.get("appendToBody",!0)})}},t.prototype.render=function(r,n,i){if(!(me.node||!i.getDom())){this.group.removeAll(),this._tooltipModel=r,this._ecModel=n,this._api=i,this._alwaysShowContent=r.get("alwaysShowContent");var o=this._tooltipContent;o.update(r),o.setEnterable(r.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&r.get("transitionDuration")?ZV(this,"_updatePosition",50,"fixRate"):kP(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var r=this._tooltipModel,n=r.get("triggerOn");BW("itemTooltip",this._api,se(function(i,o,a){n!=="none"&&(n.indexOf(i)>=0?this._tryShow(o,a):i==="leave"&&this._hide(a))},this))},t.prototype._keepShow=function(){var r=this._tooltipModel,n=this._ecModel,i=this._api,o=r.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&o!=="none"&&o!=="click"){var a=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!i.isDisposed()&&a.manuallyShowTip(r,n,i,{x:a._lastX,y:a._lastY,dataByCoordSys:a._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(r,n,i,o){if(!(o.from===this.uid||me.node||!i.getDom())){var a=xO(o,i);this._ticket="";var s=o.dataByCoordSys,l=Ivt(o,n,i);if(l){var u=l.el.getBoundingRect().clone();u.applyTransform(l.el.transform),this._tryShow({offsetX:u.x+u.width/2,offsetY:u.y+u.height/2,target:l.el,position:o.position,positionDefault:"bottom"},a)}else if(o.tooltip&&o.x!=null&&o.y!=null){var c=Evt;c.x=o.x,c.y=o.y,c.update(),Me(c).tooltipConfig={name:null,option:o.tooltip},this._tryShow({offsetX:o.x,offsetY:o.y,target:c},a)}else if(s)this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,dataByCoordSys:s,tooltipOption:o.tooltipOption},a);else if(o.seriesIndex!=null){if(this._manuallyAxisShowTip(r,n,i,o))return;var f=zW(o,n),h=f.point[0],d=f.point[1];h!=null&&d!=null&&this._tryShow({offsetX:h,offsetY:d,target:f.el,position:o.position,positionDefault:"bottom"},a)}else o.x!=null&&o.y!=null&&(i.dispatchAction({type:"updateAxisPointer",x:o.x,y:o.y}),this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,target:i.getZr().findHover(o.x,o.y).target},a))}},t.prototype.manuallyHideTip=function(r,n,i,o){var a=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&a.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,o.from!==this.uid&&this._hide(xO(o,i))},t.prototype._manuallyAxisShowTip=function(r,n,i,o){var a=o.seriesIndex,s=o.dataIndex,l=n.getComponent("axisPointer").coordSysAxesInfo;if(!(a==null||s==null||l==null)){var u=n.getSeriesByIndex(a);if(!!u){var c=u.getData(),f=dp([c.getItemModel(s),u,(u.coordinateSystem||{}).model],this._tooltipModel);if(f.get("trigger")==="axis")return i.dispatchAction({type:"updateAxisPointer",seriesIndex:a,dataIndex:s,position:o.position}),!0}}},t.prototype._tryShow=function(r,n){var i=r.target,o=this._tooltipModel;if(!!o){this._lastX=r.offsetX,this._lastY=r.offsetY;var a=r.dataByCoordSys;if(a&&a.length)this._showAxisTooltip(a,r);else if(i){this._lastDataByCoordSys=null;var s,l;fh(i,function(u){if(Me(u).dataIndex!=null)return s=u,!0;if(Me(u).tooltipConfig!=null)return l=u,!0},!0),s?this._showSeriesItemTooltip(r,s,n):l?this._showComponentItemTooltip(r,l,n):this._hide(n)}else this._lastDataByCoordSys=null,this._hide(n)}},t.prototype._showOrMove=function(r,n){var i=r.get("showDelay");n=se(n,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(n,i):n()},t.prototype._showAxisTooltip=function(r,n){var i=this._ecModel,o=this._tooltipModel,a=[n.offsetX,n.offsetY],s=dp([n.tooltipOption],o),l=this._renderMode,u=[],c=Gl("section",{blocks:[],noHeader:!0}),f=[],h=new SS;U(r,function(y){U(y.dataByAxis,function(b){var w=i.getComponent(b.axisDim+"Axis",b.axisIndex),T=b.value;if(!(!w||T==null)){var S=FW(T,w.axis,i,b.seriesDataIndices,b.valueLabelOpt),k=Gl("section",{header:S,noHeader:!ma(S),sortBlocks:!0,blocks:[]});c.blocks.push(k),U(b.seriesDataIndices,function(E){var P=i.getSeriesByIndex(E.seriesIndex),C=E.dataIndexInside,A=P.getDataParams(C);if(!(A.dataIndex<0)){A.axisDim=b.axisDim,A.axisIndex=b.axisIndex,A.axisType=b.axisType,A.axisId=b.axisId,A.axisValue=ex(w.axis,{value:T}),A.axisValueLabel=S,A.marker=h.makeTooltipMarker("item",Cc(A.color),l);var L=p5(P.formatTooltip(C,!0,null)),R=L.frag;if(R){var D=dp([P],o).get("valueFormatter");k.blocks.push(D?_t({valueFormatter:D},R):R)}L.text&&f.push(L.text),u.push(A)}})}})}),c.blocks.reverse(),f.reverse();var d=n.position,p=s.get("order"),g=b5(c,h,l,p,i.get("useUTC"),s.get("textStyle"));g&&f.unshift(g);var m=l==="richText"?`

`:"<br/>",v=f.join(m);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(r,u)?this._updatePosition(s,d,a[0],a[1],this._tooltipContent,u):this._showTooltipContent(s,v,u,Math.random()+"",a[0],a[1],d,null,h)})},t.prototype._showSeriesItemTooltip=function(r,n,i){var o=this._ecModel,a=Me(n),s=a.seriesIndex,l=o.getSeriesByIndex(s),u=a.dataModel||l,c=a.dataIndex,f=a.dataType,h=u.getData(f),d=this._renderMode,p=r.positionDefault,g=dp([h.getItemModel(c),u,l&&(l.coordinateSystem||{}).model],this._tooltipModel,p?{position:p}:null),m=g.get("trigger");if(!(m!=null&&m!=="item")){var v=u.getDataParams(c,f),y=new SS;v.marker=y.makeTooltipMarker("item",Cc(v.color),d);var b=p5(u.formatTooltip(c,!1,f)),w=g.get("order"),T=g.get("valueFormatter"),S=b.frag,k=S?b5(T?_t({valueFormatter:T},S):S,y,d,w,o.get("useUTC"),g.get("textStyle")):b.text,E="item_"+u.name+"_"+c;this._showOrMove(g,function(){this._showTooltipContent(g,k,v,E,r.offsetX,r.offsetY,r.position,r.target,y)}),i({type:"showTip",dataIndexInside:c,dataIndex:h.getRawIndex(c),seriesIndex:s,from:this.uid})}},t.prototype._showComponentItemTooltip=function(r,n,i){var o=Me(n),a=o.tooltipConfig,s=a.option||{};if($t(s)){var l=s;s={content:l,formatter:l}}var u=[s],c=this._ecModel.getComponent(o.componentMainType,o.componentIndex);c&&u.push(c),u.push({formatter:s.content});var f=r.positionDefault,h=dp(u,this._tooltipModel,f?{position:f}:null),d=h.get("content"),p=Math.random()+"",g=new SS;this._showOrMove(h,function(){var m=oe(h.get("formatterParams")||{});this._showTooltipContent(h,d,m,p,r.offsetX,r.offsetY,r.position,n,g)}),i({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(r,n,i,o,a,s,l,u,c){if(this._ticket="",!(!r.get("showContent")||!r.get("show"))){var f=this._tooltipContent;f.setEnterable(r.get("enterable"));var h=r.get("formatter");l=l||r.get("position");var d=n,p=this._getNearestPoint([a,s],i,r.get("trigger"),r.get("borderColor")),g=p.color;if(h)if($t(h)){var m=r.ecModel.get("useUTC"),v=St(i)?i[0]:i,y=v&&v.axisType&&v.axisType.indexOf("time")>=0;d=h,y&&(d=Hb(v.axisValue,d,m)),d=mV(d,i,!0)}else if(ue(h)){var b=se(function(w,T){w===this._ticket&&(f.setContent(T,c,r,g,l),this._updatePosition(r,l,a,s,f,i,u))},this);this._ticket=o,d=h(i,o,b)}else d=h;f.setContent(d,c,r,g,l),f.show(r,g),this._updatePosition(r,l,a,s,f,i,u)}},t.prototype._getNearestPoint=function(r,n,i,o){if(i==="axis"||St(n))return{color:o||(this._renderMode==="html"?"#fff":"none")};if(!St(n))return{color:o||n.color||n.borderColor}},t.prototype._updatePosition=function(r,n,i,o,a,s,l){var u=this._api.getWidth(),c=this._api.getHeight();n=n||r.get("position");var f=a.getSize(),h=r.get("align"),d=r.get("verticalAlign"),p=l&&l.getBoundingRect().clone();if(l&&p.applyTransform(l.transform),ue(n)&&(n=n([i,o],s,a.el,p,{viewSize:[u,c],contentSize:f.slice()})),St(n))i=Er(n[0],u),o=Er(n[1],c);else if(Yt(n)){var g=n;g.width=f[0],g.height=f[1];var m=jl(g,{width:u,height:c});i=m.x,o=m.y,h=null,d=null}else if($t(n)&&l){var v=Mvt(n,p,f,r.get("borderWidth"));i=v[0],o=v[1]}else{var v=Avt(i,o,a,u,c,h?null:20,d?null:20);i=v[0],o=v[1]}if(h&&(i-=MO(h)?f[0]/2:h==="right"?f[0]:0),d&&(o-=MO(d)?f[1]/2:d==="bottom"?f[1]:0),UW(r)){var v=xvt(i,o,a,u,c);i=v[0],o=v[1]}a.moveTo(i,o)},t.prototype._updateContentNotChangedOnAxis=function(r,n){var i=this._lastDataByCoordSys,o=this._cbParamsList,a=!!i&&i.length===r.length;return a&&U(i,function(s,l){var u=s.dataByAxis||[],c=r[l]||{},f=c.dataByAxis||[];a=a&&u.length===f.length,a&&U(u,function(h,d){var p=f[d]||{},g=h.seriesDataIndices||[],m=p.seriesDataIndices||[];a=a&&h.value===p.value&&h.axisType===p.axisType&&h.axisId===p.axisId&&g.length===m.length,a&&U(g,function(v,y){var b=m[y];a=a&&v.seriesIndex===b.seriesIndex&&v.dataIndex===b.dataIndex}),o&&U(h.seriesDataIndices,function(v){var y=v.seriesIndex,b=n[y],w=o[y];b&&w&&w.data!==b.data&&(a=!1)})})}),this._lastDataByCoordSys=r,this._cbParamsList=n,!!a},t.prototype._hide=function(r){this._lastDataByCoordSys=null,r({type:"hideTip",from:this.uid})},t.prototype.dispose=function(r,n){me.node||!n.getDom()||(kP(this,"_updatePosition"),this._tooltipContent.dispose(),XP("itemTooltip",n))},t.type="tooltip",t}(eo);function dp(e,t,r){var n=t.ecModel,i;r?(i=new cn(r,n,n),i=new cn(t.option,i,n)):i=t;for(var o=e.length-1;o>=0;o--){var a=e[o];a&&(a instanceof cn&&(a=a.get("tooltip",!0)),$t(a)&&(a={formatter:a}),a&&(i=new cn(a,i,n)))}return i}function xO(e,t){return e.dispatchAction||se(t.dispatchAction,t)}function Avt(e,t,r,n,i,o,a){var s=r.getSize(),l=s[0],u=s[1];return o!=null&&(e+l+o+2>n?e-=l+o:e+=o),a!=null&&(t+u+a>i?t-=u+a:t+=a),[e,t]}function xvt(e,t,r,n,i){var o=r.getSize(),a=o[0],s=o[1];return e=Math.min(e+a,n)-a,t=Math.min(t+s,i)-s,e=Math.max(e,0),t=Math.max(t,0),[e,t]}function Mvt(e,t,r,n){var i=r[0],o=r[1],a=Math.ceil(Math.SQRT2*n)+8,s=0,l=0,u=t.width,c=t.height;switch(e){case"inside":s=t.x+u/2-i/2,l=t.y+c/2-o/2;break;case"top":s=t.x+u/2-i/2,l=t.y-o-a;break;case"bottom":s=t.x+u/2-i/2,l=t.y+c+a;break;case"left":s=t.x-i-a,l=t.y+c/2-o/2;break;case"right":s=t.x+u+a,l=t.y+c/2-o/2}return[s,l]}function MO(e){return e==="center"||e==="middle"}function Ivt(e,t,r){var n=gA(e).queryOptionMap,i=n.keys()[0];if(!(!i||i==="series")){var o=t0(t,i,n.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),a=o.models[0];if(!!a){var s=r.getViewOfComponentModel(a),l;if(s.group.traverse(function(u){var c=Me(u).tooltipConfig;if(c&&c.name===e.name)return l=u,!0}),l)return{componentMainType:i,componentIndex:a.componentIndex,el:l}}}}const Lvt=Cvt;function Jl(e){Qr(VW),e.registerComponentModel(hvt),e.registerComponentView(Lvt),e.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},xn),e.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},xn)}var IO=U;function LO(e){if(e){for(var t in e)if(e.hasOwnProperty(t))return!0}}function OO(e,t,r){var n={};return IO(t,function(o){var a=n[o]=i();IO(e[o],function(s,l){if(!!ni.isValidType(l)){var u={type:l,visual:s};r&&r(u,o),a[l]=new ni(u),l==="opacity"&&(u=oe(u),u.type="colorAlpha",a.__hidden.__alphaForOpacity=new ni(u))}})}),n;function i(){var o=function(){};o.prototype.__hidden=o.prototype;var a=new o;return a}}function Ovt(e,t,r){var n;U(r,function(i){t.hasOwnProperty(i)&&LO(t[i])&&(n=!0)}),n&&U(r,function(i){t.hasOwnProperty(i)&&LO(t[i])?e[i]=oe(t[i]):delete e[i]})}function Rvt(e,t,r,n){var i={};return U(e,function(o){var a=ni.prepareVisualTypes(t[o]);i[o]=a}),{progress:function(a,s){var l;n!=null&&(l=s.getDimensionIndex(n));function u(T){return iU(s,f,T)}function c(T,S){Dut(s,f,T,S)}for(var f,h=s.getStore();(f=a.next())!=null;){var d=s.getRawDataItem(f);if(!(d&&d.visualMap===!1))for(var p=n!=null?h.get(l,f):f,g=r(p),m=t[g],v=i[g],y=0,b=v.length;y<b;y++){var w=v[y];m[w]&&m[w].applyVisual(p,u,c)}}}}}var Dvt=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(qe),Nvt=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){if(this.group.removeAll(),!!r.get("show")){var o=this.group,a=r.getModel("textStyle"),s=r.getModel("subtextStyle"),l=r.get("textAlign"),u=_e(r.get("textBaseline"),r.get("textVerticalAlign")),c=new Or({style:ri(a,{text:r.get("text"),fill:a.getTextColor()},{disableBox:!0}),z2:10}),f=c.getBoundingRect(),h=r.get("subtext"),d=new Or({style:ri(s,{text:h,fill:s.getTextColor(),y:f.height+r.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),p=r.get("link"),g=r.get("sublink"),m=r.get("triggerEvent",!0);c.silent=!p&&!m,d.silent=!g&&!m,p&&c.on("click",function(){Z6(p,"_"+r.get("target"))}),g&&d.on("click",function(){Z6(g,"_"+r.get("subtarget"))}),Me(c).eventData=Me(d).eventData=m?{componentType:"title",componentIndex:r.componentIndex}:null,o.add(c),h&&o.add(d);var v=o.getBoundingRect(),y=r.getBoxLayoutParams();y.width=v.width,y.height=v.height;var b=jl(y,{width:i.getWidth(),height:i.getHeight()},r.get("padding"));l||(l=r.get("left")||r.get("right"),l==="middle"&&(l="center"),l==="right"?b.x+=b.width:l==="center"&&(b.x+=b.width/2)),u||(u=r.get("top")||r.get("bottom"),u==="center"&&(u="middle"),u==="bottom"?b.y+=b.height:u==="middle"&&(b.y+=b.height/2),u=u||"top"),o.x=b.x,o.y=b.y,o.markRedraw();var w={align:l,verticalAlign:u};c.setStyle(w),d.setStyle(w),v=o.getBoundingRect();var T=b.margin,S=r.getItemStyle(["color","opacity"]);S.fill=r.get("backgroundColor");var k=new Lr({shape:{x:v.x-T[3],y:v.y-T[0],width:v.width+T[1]+T[3],height:v.height+T[0]+T[2],r:r.get("borderRadius")},style:S,subPixelOptimize:!0,silent:!0});o.add(k)}},t.type="title",t}(eo);function Ql(e){e.registerComponentModel(Dvt),e.registerComponentView(Nvt)}function HW(e,t){if(!e)return!1;for(var r=St(e)?e:[e],n=0;n<r.length;n++)if(r[n]&&r[n][t])return!0;return!1}function Nm(e){iP(e,"label",["show"])}var Fm=nr(),XW=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.createdBySelf=!1,r}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i),this._mergeOption(r,i,!1,!0)},t.prototype.isAnimationEnabled=function(){if(me.node)return!1;var r=this.__hostSeries;return this.getShallow("animation")&&r&&r.isAnimationEnabled()},t.prototype.mergeOption=function(r,n){this._mergeOption(r,n,!1,!1)},t.prototype._mergeOption=function(r,n,i,o){var a=this.mainType;i||n.eachSeries(function(s){var l=s.get(this.mainType,!0),u=Fm(s)[a];if(!l||!l.data){Fm(s)[a]=null;return}u?u._mergeOption(l,n,!0):(o&&Nm(l),U(l.data,function(c){c instanceof Array?(Nm(c[0]),Nm(c[1])):Nm(c)}),u=this.createMarkerModelFromSeries(l,this,n),_t(u,{mainType:this.mainType,seriesIndex:s.seriesIndex,name:s.name,createdBySelf:!0}),u.__hostSeries=s),Fm(s)[a]=u},this)},t.prototype.formatTooltip=function(r,n,i){var o=this.getData(),a=this.getRawValue(r),s=o.getName(r);return Gl("section",{header:this.name,blocks:[Gl("nameValue",{name:s,value:a,noName:!s,noValue:a==null})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(r){this._data=r},t.getMarkerModelFromSeries=function(r,n){return Fm(r)[n]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(qe);zo(XW,DV.prototype);const Yh=XW;function YP(e){return!(isNaN(parseFloat(e.x))&&isNaN(parseFloat(e.y)))}function Fvt(e){return!isNaN(parseFloat(e.x))&&!isNaN(parseFloat(e.y))}function $m(e,t,r,n,i,o){var a=[],s=Ac(t,n),l=s?t.getCalculationInfo("stackResultDimension"):n,u=mx(t,l,e),c=t.indicesOfNearest(l,u)[0];a[i]=t.get(r,c),a[o]=t.get(l,c);var f=t.get(n,c),h=ya(t.get(n,c));return h=Math.min(h,20),h>=0&&(a[o]=+a[o].toFixed(h)),[a,f]}var n3={min:We($m,"min"),max:We($m,"max"),average:We($m,"average"),median:We($m,"median")};function O_(e,t){var r=e.getData(),n=e.coordinateSystem;if(t&&!Fvt(t)&&!St(t.coord)&&n){var i=n.dimensions,o=YW(t,r,n,e);if(t=oe(t),t.type&&n3[t.type]&&o.baseAxis&&o.valueAxis){var a=De(i,o.baseAxis.dim),s=De(i,o.valueAxis.dim),l=n3[t.type](r,o.baseDataDim,o.valueDataDim,a,s);t.coord=l[0],t.value=l[1]}else{for(var u=[t.xAxis!=null?t.xAxis:t.radiusAxis,t.yAxis!=null?t.yAxis:t.angleAxis],c=0;c<2;c++)n3[u[c]]&&(u[c]=mx(r,r.mapDimension(i[c]),u[c]));t.coord=u}}return t}function YW(e,t,r,n){var i={};return e.valueIndex!=null||e.valueDim!=null?(i.valueDataDim=e.valueIndex!=null?t.getDimension(e.valueIndex):e.valueDim,i.valueAxis=r.getAxis($vt(n,i.valueDataDim)),i.baseAxis=r.getOtherAxis(i.valueAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim)):(i.baseAxis=n.getBaseAxis(),i.valueAxis=r.getOtherAxis(i.baseAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim),i.valueDataDim=t.mapDimension(i.valueAxis.dim)),i}function $vt(e,t){var r=e.getData().getDimensionInfo(t);return r&&r.coordDim}function R_(e,t){return e&&e.containData&&t.coord&&!YP(t)?e.containData(t.coord):!0}function Bvt(e,t,r){return e&&e.containZone&&t.coord&&r.coord&&!YP(t)&&!YP(r)?e.containZone(t.coord,r.coord):!0}function zvt(e,t){return e?function(r,n,i,o){var a=o<2?r.coord&&r.coord[o]:r.value;return Ol(a,t[o])}:function(r,n,i,o){return Ol(r.value,t[o])}}function mx(e,t,r){if(r==="average"){var n=0,i=0;return e.each(t,function(o,a){isNaN(o)||(n+=o,i++)}),n/i}else return r==="median"?e.getMedian(t):e.getDataExtent(t)[r==="max"?1:0]}var i3=nr(),Vvt=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(){this.markerGroupMap=he()},t.prototype.render=function(r,n,i){var o=this,a=this.markerGroupMap;a.each(function(s){i3(s).keep=!1}),n.eachSeries(function(s){var l=Yh.getMarkerModelFromSeries(s,o.type);l&&o.renderSeries(s,l,n,i)}),a.each(function(s){!i3(s).keep&&o.group.remove(s.group)})},t.prototype.markKeep=function(r){i3(r).keep=!0},t.prototype.toggleBlurSeries=function(r,n){var i=this;U(r,function(o){var a=Yh.getMarkerModelFromSeries(o,i.type);if(a){var s=a.getData();s.eachItemGraphicEl(function(l){l&&(n?Pz(l):wA(l))})}})},t.type="marker",t}(eo);const KW=Vvt;var Uvt=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,n,i){return new t(r,n,i)},t.type="markLine",t.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},t}(Yh);const Wvt=Uvt;var Bm=nr(),jvt=function(e,t,r,n){var i=e.getData(),o;if(St(n))o=n;else{var a=n.type;if(a==="min"||a==="max"||a==="average"||a==="median"||n.xAxis!=null||n.yAxis!=null){var s=void 0,l=void 0;if(n.yAxis!=null||n.xAxis!=null)s=t.getAxis(n.yAxis!=null?"y":"x"),l=Po(n.yAxis,n.xAxis);else{var u=YW(n,i,t,e);s=u.valueAxis;var c=NU(i,u.valueDataDim);l=mx(i,c,a)}var f=s.dim==="x"?0:1,h=1-f,d=oe(n),p={coord:[]};d.type=null,d.coord=[],d.coord[h]=-1/0,p.coord[h]=1/0;var g=r.get("precision");g>=0&&He(l)&&(l=+l.toFixed(Math.min(g,20))),d.coord[f]=p.coord[f]=l,o=[d,p,{type:a,valueIndex:n.valueIndex,value:l}]}else o=[]}var m=[O_(e,o[0]),O_(e,o[1]),_t({},o[2])];return m[2].type=m[2].type||null,Ie(m[2],m[0]),Ie(m[2],m[1]),m};function D_(e){return!isNaN(e)&&!isFinite(e)}function RO(e,t,r,n){var i=1-e,o=n.dimensions[e];return D_(t[i])&&D_(r[i])&&t[e]===r[e]&&n.getAxis(o).containData(t[e])}function Gvt(e,t){if(e.type==="cartesian2d"){var r=t[0].coord,n=t[1].coord;if(r&&n&&(RO(1,r,n,e)||RO(0,r,n,e)))return!0}return R_(e,t[0])&&R_(e,t[1])}function o3(e,t,r,n,i){var o=n.coordinateSystem,a=e.getItemModel(t),s,l=Er(a.get("x"),i.getWidth()),u=Er(a.get("y"),i.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(n.getMarkerPosition)s=n.getMarkerPosition(e.getValues(e.dimensions,t));else{var c=o.dimensions,f=e.get(c[0],t),h=e.get(c[1],t);s=o.dataToPoint([f,h])}if(hd(o,"cartesian2d")){var d=o.getAxis("x"),p=o.getAxis("y"),c=o.dimensions;D_(e.get(c[0],t))?s[0]=d.toGlobalCoord(d.getExtent()[r?0:1]):D_(e.get(c[1],t))&&(s[1]=p.toGlobalCoord(p.getExtent()[r?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}e.setItemLayout(t,s)}var Hvt=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,n,i){n.eachSeries(function(o){var a=Yh.getMarkerModelFromSeries(o,"markLine");if(a){var s=a.getData(),l=Bm(a).from,u=Bm(a).to;l.each(function(c){o3(l,c,!0,o,i),o3(u,c,!1,o,i)}),s.each(function(c){s.setItemLayout(c,[l.getItemLayout(c),u.getItemLayout(c)])}),this.markerGroupMap.get(o.id).updateLayout()}},this)},t.prototype.renderSeries=function(r,n,i,o){var a=r.coordinateSystem,s=r.id,l=r.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,new jpt);this.group.add(c.group);var f=Xvt(a,r,n),h=f.from,d=f.to,p=f.line;Bm(n).from=h,Bm(n).to=d,n.setData(p);var g=n.get("symbol"),m=n.get("symbolSize"),v=n.get("symbolRotate"),y=n.get("symbolOffset");St(g)||(g=[g,g]),St(m)||(m=[m,m]),St(v)||(v=[v,v]),St(y)||(y=[y,y]),f.from.each(function(w){b(h,w,!0),b(d,w,!1)}),p.each(function(w){var T=p.getItemModel(w).getModel("lineStyle").getLineStyle();p.setItemLayout(w,[h.getItemLayout(w),d.getItemLayout(w)]),T.stroke==null&&(T.stroke=h.getItemVisual(w,"style").fill),p.setItemVisual(w,{fromSymbolKeepAspect:h.getItemVisual(w,"symbolKeepAspect"),fromSymbolOffset:h.getItemVisual(w,"symbolOffset"),fromSymbolRotate:h.getItemVisual(w,"symbolRotate"),fromSymbolSize:h.getItemVisual(w,"symbolSize"),fromSymbol:h.getItemVisual(w,"symbol"),toSymbolKeepAspect:d.getItemVisual(w,"symbolKeepAspect"),toSymbolOffset:d.getItemVisual(w,"symbolOffset"),toSymbolRotate:d.getItemVisual(w,"symbolRotate"),toSymbolSize:d.getItemVisual(w,"symbolSize"),toSymbol:d.getItemVisual(w,"symbol"),style:T})}),c.updateData(p),f.line.eachItemGraphicEl(function(w){Me(w).dataModel=n,w.traverse(function(T){Me(T).dataModel=n})});function b(w,T,S){var k=w.getItemModel(T);o3(w,T,S,r,o);var E=k.getModel("itemStyle").getItemStyle();E.fill==null&&(E.fill=r2(l,"color")),w.setItemVisual(T,{symbolKeepAspect:k.get("symbolKeepAspect"),symbolOffset:_e(k.get("symbolOffset",!0),y[S?0:1]),symbolRotate:_e(k.get("symbolRotate",!0),v[S?0:1]),symbolSize:_e(k.get("symbolSize"),m[S?0:1]),symbol:_e(k.get("symbol",!0),g[S?0:1]),style:E})}this.markKeep(c),c.group.silent=n.get("silent")||r.get("silent")},t.type="markLine",t}(KW);function Xvt(e,t,r){var n;e?n=Bt(e&&e.dimensions,function(u){var c=t.getData().getDimensionInfo(t.getData().mapDimension(u))||{};return _t(_t({},c),{name:u,ordinalMeta:null})}):n=[{name:"value",type:"float"}];var i=new hc(n,r),o=new hc(n,r),a=new hc([],r),s=Bt(r.get("data"),We(jvt,t,e,r));e&&(s=ln(s,We(Gvt,e)));var l=zvt(!!e,n);return i.initData(Bt(s,function(u){return u[0]}),null,l),o.initData(Bt(s,function(u){return u[1]}),null,l),a.initData(Bt(s,function(u){return u[2]})),a.hasItemOption=!0,{from:i,to:o,line:a}}const Yvt=Hvt;function pd(e){e.registerComponentModel(Wvt),e.registerComponentView(Yvt),e.registerPreprocessor(function(t){HW(t.series,"markLine")&&(t.markLine=t.markLine||{})})}var Kvt=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,n,i){return new t(r,n,i)},t.type="markArea",t.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},t}(Yh);const Zvt=Kvt;var zm=nr(),qvt=function(e,t,r,n){var i=O_(e,n[0]),o=O_(e,n[1]),a=i.coord,s=o.coord;a[0]=Po(a[0],-1/0),a[1]=Po(a[1],-1/0),s[0]=Po(s[0],1/0),s[1]=Po(s[1],1/0);var l=ent([{},i,o]);return l.coord=[i.coord,o.coord],l.x0=i.x,l.y0=i.y,l.x1=o.x,l.y1=o.y,l};function N_(e){return!isNaN(e)&&!isFinite(e)}function DO(e,t,r,n){var i=1-e;return N_(t[i])&&N_(r[i])}function Jvt(e,t){var r=t.coord[0],n=t.coord[1],i={coord:r,x:t.x0,y:t.y0},o={coord:n,x:t.x1,y:t.y1};return hd(e,"cartesian2d")?r&&n&&(DO(1,r,n)||DO(0,r,n))?!0:Bvt(e,i,o):R_(e,i)||R_(e,o)}function NO(e,t,r,n,i){var o=n.coordinateSystem,a=e.getItemModel(t),s,l=Er(a.get(r[0]),i.getWidth()),u=Er(a.get(r[1]),i.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(n.getMarkerPosition)s=n.getMarkerPosition(e.getValues(r,t));else{var c=e.get(r[0],t),f=e.get(r[1],t),h=[c,f];o.clampData&&o.clampData(h,h),s=o.dataToPoint(h,!0)}if(hd(o,"cartesian2d")){var d=o.getAxis("x"),p=o.getAxis("y"),c=e.get(r[0],t),f=e.get(r[1],t);N_(c)?s[0]=d.toGlobalCoord(d.getExtent()[r[0]==="x0"?0:1]):N_(f)&&(s[1]=p.toGlobalCoord(p.getExtent()[r[1]==="y0"?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}return s}var FO=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],Qvt=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,n,i){n.eachSeries(function(o){var a=Yh.getMarkerModelFromSeries(o,"markArea");if(a){var s=a.getData();s.each(function(l){var u=Bt(FO,function(f){return NO(s,l,f,o,i)});s.setItemLayout(l,u);var c=s.getItemGraphicEl(l);c.setShape("points",u)})}},this)},t.prototype.renderSeries=function(r,n,i,o){var a=r.coordinateSystem,s=r.id,l=r.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,{group:new ar});this.group.add(c.group),this.markKeep(c);var f=t0t(a,r,n);n.setData(f),f.each(function(h){var d=Bt(FO,function(E){return NO(f,h,E,r,o)}),p=a.getAxis("x").scale,g=a.getAxis("y").scale,m=p.getExtent(),v=g.getExtent(),y=[p.parse(f.get("x0",h)),p.parse(f.get("x1",h))],b=[g.parse(f.get("y0",h)),g.parse(f.get("y1",h))];v_(y),v_(b);var w=!(m[0]>y[1]||m[1]<y[0]||v[0]>b[1]||v[1]<b[0]),T=!w;f.setItemLayout(h,{points:d,allClipped:T});var S=f.getItemModel(h).getModel("itemStyle").getItemStyle(),k=r2(l,"color");S.fill||(S.fill=k,$t(S.fill)&&(S.fill=Kk(S.fill,.4))),S.stroke||(S.stroke=k),f.setItemVisual(h,"style",S)}),f.diff(zm(c).data).add(function(h){var d=f.getItemLayout(h);if(!d.allClipped){var p=new dv({shape:{points:d.points}});f.setItemGraphicEl(h,p),c.group.add(p)}}).update(function(h,d){var p=zm(c).data.getItemGraphicEl(d),g=f.getItemLayout(h);g.allClipped?p&&c.group.remove(p):(p?Jr(p,{shape:{points:g.points}},n,h):p=new dv({shape:{points:g.points}}),f.setItemGraphicEl(h,p),c.group.add(p))}).remove(function(h){var d=zm(c).data.getItemGraphicEl(h);c.group.remove(d)}).execute(),f.eachItemGraphicEl(function(h,d){var p=f.getItemModel(d),g=f.getItemVisual(d,"style");h.useStyle(f.getItemVisual(d,"style")),ud(h,jc(p),{labelFetcher:n,labelDataIndex:d,defaultText:f.getName(d)||"",inheritColor:$t(g.fill)?Kk(g.fill,1):"#000"}),hv(h,p),Pc(h,null,null,p.get(["emphasis","disabled"])),Me(h).dataModel=n}),zm(c).data=f,c.group.silent=n.get("silent")||r.get("silent")},t.type="markArea",t}(KW);function t0t(e,t,r){var n,i,o=["x0","y0","x1","y1"];if(e){var a=Bt(e&&e.dimensions,function(u){var c=t.getData(),f=c.getDimensionInfo(c.mapDimension(u))||{};return _t(_t({},f),{name:u,ordinalMeta:null})});i=Bt(o,function(u,c){return{name:u,type:a[c%2].type}}),n=new hc(i,r)}else i=[{name:"value",type:"float"}],n=new hc(i,r);var s=Bt(r.get("data"),We(qvt,t,e,r));e&&(s=ln(s,We(Jvt,e)));var l=e?function(u,c,f,h){var d=u.coord[Math.floor(h/2)][h%2];return Ol(d,i[h])}:function(u,c,f,h){return Ol(u.value,i[h])};return n.initData(s,null,l),n.hasItemOption=!0,n}const e0t=Qvt;function qc(e){e.registerComponentModel(Zvt),e.registerComponentView(e0t),e.registerPreprocessor(function(t){HW(t.series,"markArea")&&(t.markArea=t.markArea||{})})}var r0t=function(e,t){if(t==="all")return{type:"all",title:e.getLocaleModel().get(["legend","selector","all"])};if(t==="inverse")return{type:"inverse",title:e.getLocaleModel().get(["legend","selector","inverse"])}},n0t=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i),r.selected=r.selected||{},this._updateSelector(r)},t.prototype.mergeOption=function(r,n){e.prototype.mergeOption.call(this,r,n),this._updateSelector(r)},t.prototype._updateSelector=function(r){var n=r.selector,i=this.ecModel;n===!0&&(n=r.selector=["all","inverse"]),St(n)&&U(n,function(o,a){$t(o)&&(o={type:o}),n[a]=Ie(o,r0t(i,o.type))})},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var r=this._data;if(r[0]&&this.get("selectedMode")==="single"){for(var n=!1,i=0;i<r.length;i++){var o=r[i].get("name");if(this.isSelected(o)){this.select(o),n=!0;break}}!n&&this.select(r[0].get("name"))}},t.prototype._updateData=function(r){var n=[],i=[];r.eachRawSeries(function(s){var l=s.name;i.push(l);var u;if(s.legendVisualProvider){var c=s.legendVisualProvider,f=c.getAllNames();r.isSeriesFiltered(s)||(i=i.concat(f)),f.length?n=n.concat(f):u=!0}else u=!0;u&&pA(s)&&n.push(s.name)}),this._availableNames=i;var o=this.get("data")||n,a=Bt(o,function(s){return($t(s)||He(s))&&(s={name:s}),new cn(s,this,this.ecModel)},this);this._data=a},t.prototype.getData=function(){return this._data},t.prototype.select=function(r){var n=this.option.selected,i=this.get("selectedMode");if(i==="single"){var o=this._data;U(o,function(a){n[a.get("name")]=!1})}n[r]=!0},t.prototype.unSelect=function(r){this.get("selectedMode")!=="single"&&(this.option.selected[r]=!1)},t.prototype.toggleSelected=function(r){var n=this.option.selected;n.hasOwnProperty(r)||(n[r]=!0),this[n[r]?"unSelect":"select"](r)},t.prototype.allSelect=function(){var r=this._data,n=this.option.selected;U(r,function(i){n[i.get("name",!0)]=!0})},t.prototype.inverseSelect=function(){var r=this._data,n=this.option.selected;U(r,function(i){var o=i.get("name",!0);n.hasOwnProperty(o)||(n[o]=!0),n[o]=!n[o]})},t.prototype.isSelected=function(r){var n=this.option.selected;return!(n.hasOwnProperty(r)&&!n[r])&&De(this._availableNames,r)>=0},t.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(qe);const KP=n0t;var Of=We,ZP=U,Vm=ar,i0t=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.newlineDisabled=!1,r}return t.prototype.init=function(){this.group.add(this._contentGroup=new Vm),this.group.add(this._selectorGroup=new Vm),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(r,n,i){var o=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!r.get("show",!0)){var a=r.get("align"),s=r.get("orient");(!a||a==="auto")&&(a=r.get("left")==="right"&&s==="vertical"?"right":"left");var l=r.get("selector",!0),u=r.get("selectorPosition",!0);l&&(!u||u==="auto")&&(u=s==="horizontal"?"end":"start"),this.renderInner(a,r,n,i,l,s,u);var c=r.getBoxLayoutParams(),f={width:i.getWidth(),height:i.getHeight()},h=r.get("padding"),d=jl(c,f,h),p=this.layoutInner(r,a,d,o,l,u),g=jl(Ee({width:p.width,height:p.height},c),f,h);this.group.x=g.x-p.x,this.group.y=g.y-p.y,this.group.markRedraw(),this.group.add(this._backgroundEl=cvt(p,r))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(r,n,i,o,a,s,l){var u=this.getContentGroup(),c=he(),f=n.get("selectedMode"),h=[];i.eachRawSeries(function(d){!d.get("legendHoverLink")&&h.push(d.id)}),ZP(n.getData(),function(d,p){var g=d.get("name");if(!this.newlineDisabled&&(g===""||g===`
`)){var m=new Vm;m.newline=!0,u.add(m);return}var v=i.getSeriesByName(g)[0];if(!c.get(g))if(v){var y=v.getData(),b=y.getVisual("legendLineStyle")||{},w=y.getVisual("legendIcon"),T=y.getVisual("style"),S=this._createItem(v,g,p,d,n,r,b,T,w,f,o);S.on("click",Of($O,g,null,o,h)).on("mouseover",Of(qP,v.name,null,o,h)).on("mouseout",Of(JP,v.name,null,o,h)),c.set(g,!0)}else i.eachRawSeries(function(k){if(!c.get(g)&&k.legendVisualProvider){var E=k.legendVisualProvider;if(!E.containName(g))return;var P=E.indexOfName(g),C=E.getItemVisual(P,"style"),A=E.getItemVisual(P,"legendIcon"),L=Yi(C.fill);L&&L[3]===0&&(L[3]=.2,C=_t(_t({},C),{fill:hs(L,"rgba")}));var R=this._createItem(k,g,p,d,n,r,{},C,A,f,o);R.on("click",Of($O,null,g,o,h)).on("mouseover",Of(qP,null,g,o,h)).on("mouseout",Of(JP,null,g,o,h)),c.set(g,!0)}},this)},this),a&&this._createSelector(a,n,o,s,l)},t.prototype._createSelector=function(r,n,i,o,a){var s=this.getSelectorGroup();ZP(r,function(u){var c=u.type,f=new Or({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:c==="all"?"legendAllSelect":"legendInverseSelect"})}});s.add(f);var h=n.getModel("selectorLabel"),d=n.getModel(["emphasis","selectorLabel"]);ud(f,{normal:h,emphasis:d},{defaultText:u.title}),hP(f)})},t.prototype._createItem=function(r,n,i,o,a,s,l,u,c,f,h){var d=r.visualDrawType,p=a.get("itemWidth"),g=a.get("itemHeight"),m=a.isSelected(n),v=o.get("symbolRotate"),y=o.get("symbolKeepAspect"),b=o.get("icon");c=b||c||"roundRect";var w=o0t(c,o,l,u,d,m,h),T=new Vm,S=o.getModel("textStyle");if(ue(r.getLegendIcon)&&(!b||b==="inherit"))T.add(r.getLegendIcon({itemWidth:p,itemHeight:g,icon:c,iconRotate:v,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:y}));else{var k=b==="inherit"&&r.getData().getVisual("symbol")?v==="inherit"?r.getData().getVisual("symbolRotate"):v:0;T.add(a0t({itemWidth:p,itemHeight:g,icon:c,iconRotate:k,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:y}))}var E=s==="left"?p+5:-5,P=s,C=a.get("formatter"),A=n;$t(C)&&C?A=C.replace("{name}",n!=null?n:""):ue(C)&&(A=C(n));var L=o.get("inactiveColor");T.add(new Or({style:ri(S,{text:A,x:E,y:g/2,fill:m?S.getTextColor():L,align:P,verticalAlign:"middle"})}));var R=new Lr({shape:T.getBoundingRect(),invisible:!0}),D=o.getModel("tooltip");return D.get("show")&&MA({el:R,componentModel:a,itemName:n,itemTooltipOption:D.option}),T.add(R),T.eachChild(function(F){F.silent=!0}),R.silent=!f,this.getContentGroup().add(T),hP(T),T.__legendDataIndex=i,T},t.prototype.layoutInner=function(r,n,i,o,a,s){var l=this.getContentGroup(),u=this.getSelectorGroup();Ah(r.get("orient"),l,r.get("itemGap"),i.width,i.height);var c=l.getBoundingRect(),f=[-c.x,-c.y];if(u.markRedraw(),l.markRedraw(),a){Ah("horizontal",u,r.get("selectorItemGap",!0));var h=u.getBoundingRect(),d=[-h.x,-h.y],p=r.get("selectorButtonGap",!0),g=r.getOrient().index,m=g===0?"width":"height",v=g===0?"height":"width",y=g===0?"y":"x";s==="end"?d[g]+=c[m]+p:f[g]+=h[m]+p,d[1-g]+=c[v]/2-h[v]/2,u.x=d[0],u.y=d[1],l.x=f[0],l.y=f[1];var b={x:0,y:0};return b[m]=c[m]+p+h[m],b[v]=Math.max(c[v],h[v]),b[y]=Math.min(0,h[y]+d[1-g]),b}else return l.x=f[0],l.y=f[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(eo);function o0t(e,t,r,n,i,o,a){function s(m,v){m.lineWidth==="auto"&&(m.lineWidth=v.lineWidth>0?2:0),ZP(m,function(y,b){m[b]==="inherit"&&(m[b]=v[b])})}var l=t.getModel("itemStyle"),u=l.getItemStyle(),c=e.lastIndexOf("empty",0)===0?"fill":"stroke",f=l.getShallow("decal");u.decal=!f||f==="inherit"?n.decal:C_(f,a),u.fill==="inherit"&&(u.fill=n[i]),u.stroke==="inherit"&&(u.stroke=n[c]),u.opacity==="inherit"&&(u.opacity=(i==="fill"?n:r).opacity),s(u,n);var h=t.getModel("lineStyle"),d=h.getLineStyle();if(s(d,r),u.fill==="auto"&&(u.fill=n.fill),u.stroke==="auto"&&(u.stroke=n.fill),d.stroke==="auto"&&(d.stroke=n.fill),!o){var p=t.get("inactiveBorderWidth"),g=u[c];u.lineWidth=p==="auto"?n.lineWidth>0&&g?2:0:u.lineWidth,u.fill=t.get("inactiveColor"),u.stroke=t.get("inactiveBorderColor"),d.stroke=h.get("inactiveColor"),d.lineWidth=h.get("inactiveWidth")}return{itemStyle:u,lineStyle:d}}function a0t(e){var t=e.icon||"roundRect",r=No(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill,e.symbolKeepAspect);return r.setStyle(e.itemStyle),r.rotation=(e.iconRotate||0)*Math.PI/180,r.setOrigin([e.itemWidth/2,e.itemHeight/2]),t.indexOf("empty")>-1&&(r.style.stroke=r.style.fill,r.style.fill="#fff",r.style.lineWidth=2),r}function $O(e,t,r,n){JP(e,t,r,n),r.dispatchAction({type:"legendToggleSelect",name:e!=null?e:t}),qP(e,t,r,n)}function ZW(e){for(var t=e.getZr().storage.getDisplayList(),r,n=0,i=t.length;n<i&&!(r=t[n].states.emphasis);)n++;return r&&r.hoverLayer}function qP(e,t,r,n){ZW(r)||r.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:n})}function JP(e,t,r,n){ZW(r)||r.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:n})}const qW=i0t;function s0t(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries(function(r){for(var n=0;n<t.length;n++)if(!t[n].isSelected(r.name))return!1;return!0})}function pp(e,t,r){var n={},i=e==="toggleSelected",o;return r.eachComponent("legend",function(a){i&&o!=null?a[o?"select":"unSelect"](t.name):e==="allSelect"||e==="inverseSelect"?a[e]():(a[e](t.name),o=a.isSelected(t.name));var s=a.getData();U(s,function(l){var u=l.get("name");if(!(u===`
`||u==="")){var c=a.isSelected(u);n.hasOwnProperty(u)?n[u]=n[u]&&c:n[u]=c}})}),e==="allSelect"||e==="inverseSelect"?{selected:n}:{name:t.name,selected:n}}function l0t(e){e.registerAction("legendToggleSelect","legendselectchanged",We(pp,"toggleSelected")),e.registerAction("legendAllSelect","legendselectall",We(pp,"allSelect")),e.registerAction("legendInverseSelect","legendinverseselect",We(pp,"inverseSelect")),e.registerAction("legendSelect","legendselected",We(pp,"select")),e.registerAction("legendUnSelect","legendunselected",We(pp,"unSelect"))}function JW(e){e.registerComponentModel(KP),e.registerComponentView(qW),e.registerProcessor(e.PRIORITY.PROCESSOR.SERIES_FILTER,s0t),e.registerSubTypeDefaulter("legend",function(){return"plain"}),l0t(e)}var u0t=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.setScrollDataIndex=function(r){this.option.scrollDataIndex=r},t.prototype.init=function(r,n,i){var o=qb(r);e.prototype.init.call(this,r,n,i),BO(this,r,o)},t.prototype.mergeOption=function(r,n){e.prototype.mergeOption.call(this,r,n),BO(this,this.option,r)},t.type="legend.scroll",t.defaultOption=Gb(KP.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}(KP);function BO(e,t,r){var n=e.getOrient(),i=[1,1];i[n.index]=0,Gh(t,r,{type:"box",ignoreSize:!!i})}const c0t=u0t;var zO=ar,a3=["width","height"],s3=["x","y"],f0t=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.newlineDisabled=!0,r._currentIndex=0,r}return t.prototype.init=function(){e.prototype.init.call(this),this.group.add(this._containerGroup=new zO),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new zO)},t.prototype.resetInner=function(){e.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(r,n,i,o,a,s,l){var u=this;e.prototype.renderInner.call(this,r,n,i,o,a,s,l);var c=this._controllerGroup,f=n.get("pageIconSize",!0),h=St(f)?f:[f,f];p("pagePrev",0);var d=n.getModel("pageTextStyle");c.add(new Or({name:"pageText",style:{text:"xx/xx",fill:d.getTextColor(),font:d.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1);function p(g,m){var v=g+"DataIndex",y=xA(n.get("pageIcons",!0)[n.getOrient().name][m],{onclick:se(u._pageGo,u,v,n,o)},{x:-h[0]/2,y:-h[1]/2,width:h[0],height:h[1]});y.name=g,c.add(y)}},t.prototype.layoutInner=function(r,n,i,o,a,s){var l=this.getSelectorGroup(),u=r.getOrient().index,c=a3[u],f=s3[u],h=a3[1-u],d=s3[1-u];a&&Ah("horizontal",l,r.get("selectorItemGap",!0));var p=r.get("selectorButtonGap",!0),g=l.getBoundingRect(),m=[-g.x,-g.y],v=oe(i);a&&(v[c]=i[c]-g[c]-p);var y=this._layoutContentAndController(r,o,v,u,c,h,d,f);if(a){if(s==="end")m[u]+=y[c]+p;else{var b=g[c]+p;m[u]-=b,y[f]-=b}y[c]+=g[c]+p,m[1-u]+=y[d]+y[h]/2-g[h]/2,y[h]=Math.max(y[h],g[h]),y[d]=Math.min(y[d],g[d]+m[1-u]),l.x=m[0],l.y=m[1],l.markRedraw()}return y},t.prototype._layoutContentAndController=function(r,n,i,o,a,s,l,u){var c=this.getContentGroup(),f=this._containerGroup,h=this._controllerGroup;Ah(r.get("orient"),c,r.get("itemGap"),o?i.width:null,o?null:i.height),Ah("horizontal",h,r.get("pageButtonItemGap",!0));var d=c.getBoundingRect(),p=h.getBoundingRect(),g=this._showController=d[a]>i[a],m=[-d.x,-d.y];n||(m[o]=c[u]);var v=[0,0],y=[-p.x,-p.y],b=_e(r.get("pageButtonGap",!0),r.get("itemGap",!0));if(g){var w=r.get("pageButtonPosition",!0);w==="end"?y[o]+=i[a]-p[a]:v[o]+=p[a]+b}y[1-o]+=d[s]/2-p[s]/2,c.setPosition(m),f.setPosition(v),h.setPosition(y);var T={x:0,y:0};if(T[a]=g?i[a]:d[a],T[s]=Math.max(d[s],p[s]),T[l]=Math.min(0,p[l]+y[1-o]),f.__rectSize=i[a],g){var S={x:0,y:0};S[a]=Math.max(i[a]-p[a]-b,0),S[s]=T[s],f.setClipPath(new Lr({shape:S})),f.__rectSize=S[a]}else h.eachChild(function(E){E.attr({invisible:!0,silent:!0})});var k=this._getPageInfo(r);return k.pageIndex!=null&&Jr(c,{x:k.contentPosition[0],y:k.contentPosition[1]},g?r:null),this._updatePageInfoView(r,k),T},t.prototype._pageGo=function(r,n,i){var o=this._getPageInfo(n)[r];o!=null&&i.dispatchAction({type:"legendScroll",scrollDataIndex:o,legendId:n.id})},t.prototype._updatePageInfoView=function(r,n){var i=this._controllerGroup;U(["pagePrev","pageNext"],function(c){var f=c+"DataIndex",h=n[f]!=null,d=i.childOfName(c);d&&(d.setStyle("fill",h?r.get("pageIconColor",!0):r.get("pageIconInactiveColor",!0)),d.cursor=h?"pointer":"default")});var o=i.childOfName("pageText"),a=r.get("pageFormatter"),s=n.pageIndex,l=s!=null?s+1:0,u=n.pageCount;o&&a&&o.setStyle("text",$t(a)?a.replace("{current}",l==null?"":l+"").replace("{total}",u==null?"":u+""):a({current:l,total:u}))},t.prototype._getPageInfo=function(r){var n=r.get("scrollDataIndex",!0),i=this.getContentGroup(),o=this._containerGroup.__rectSize,a=r.getOrient().index,s=a3[a],l=s3[a],u=this._findTargetItemIndex(n),c=i.children(),f=c[u],h=c.length,d=h?1:0,p={contentPosition:[i.x,i.y],pageCount:d,pageIndex:d-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!f)return p;var g=w(f);p.contentPosition[a]=-g.s;for(var m=u+1,v=g,y=g,b=null;m<=h;++m)b=w(c[m]),(!b&&y.e>v.s+o||b&&!T(b,v.s))&&(y.i>v.i?v=y:v=b,v&&(p.pageNextDataIndex==null&&(p.pageNextDataIndex=v.i),++p.pageCount)),y=b;for(var m=u-1,v=g,y=g,b=null;m>=-1;--m)b=w(c[m]),(!b||!T(y,b.s))&&v.i<y.i&&(y=v,p.pagePrevDataIndex==null&&(p.pagePrevDataIndex=v.i),++p.pageCount,++p.pageIndex),v=b;return p;function w(S){if(S){var k=S.getBoundingRect(),E=k[l]+S[l];return{s:E,e:E+k[s],i:S.__legendDataIndex}}}function T(S,k){return S.e>=k&&S.s<=k+o}},t.prototype._findTargetItemIndex=function(r){if(!this._showController)return 0;var n,i=this.getContentGroup(),o;return i.eachChild(function(a,s){var l=a.__legendDataIndex;o==null&&l!=null&&(o=s),l===r&&(n=s)}),n!=null?n:o},t.type="legend.scroll",t}(qW);const h0t=f0t;function d0t(e){e.registerAction("legendScroll","legendscroll",function(t,r){var n=t.scrollDataIndex;n!=null&&r.eachComponent({mainType:"legend",subType:"scroll",query:t},function(i){i.setScrollDataIndex(n)})})}function p0t(e){Qr(JW),e.registerComponentModel(c0t),e.registerComponentView(h0t),d0t(e)}function tu(e){Qr(JW),Qr(p0t)}var g0t={get:function(e,t,r){var n=oe((v0t[e]||{})[t]);return r&&St(n)?n[n.length-1]:n}},v0t={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}};const QW=g0t;var VO=ni.mapVisual,m0t=ni.eachVisual,y0t=St,UO=U,_0t=v_,b0t=ys,w0t=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.stateList=["inRange","outOfRange"],r.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],r.layoutMode={type:"box",ignoreSize:!0},r.dataBound=[-1/0,1/0],r.targetVisuals={},r.controllerVisuals={},r}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i)},t.prototype.optionUpdated=function(r,n){var i=this.option;!n&&Ovt(i,r,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},t.prototype.resetVisual=function(r){var n=this.stateList;r=se(r,this),this.controllerVisuals=OO(this.option.controller,n,r),this.targetVisuals=OO(this.option.target,n,r)},t.prototype.getItemSymbol=function(){return null},t.prototype.getTargetSeriesIndices=function(){var r=this.option.seriesIndex,n=[];return r==null||r==="all"?this.ecModel.eachSeries(function(i,o){n.push(o)}):n=Ir(r),n},t.prototype.eachTargetSeries=function(r,n){U(this.getTargetSeriesIndices(),function(i){var o=this.ecModel.getSeriesByIndex(i);o&&r.call(n,o)},this)},t.prototype.isTargetSeries=function(r){var n=!1;return this.eachTargetSeries(function(i){i===r&&(n=!0)}),n},t.prototype.formatValueText=function(r,n,i){var o=this.option,a=o.precision,s=this.dataBound,l=o.formatter,u;i=i||["<",">"],St(r)&&(r=r.slice(),u=!0);var c=n?r:u?[f(r[0]),f(r[1])]:f(r);if($t(l))return l.replace("{value}",u?c[0]:c).replace("{value2}",u?c[1]:c);if(ue(l))return u?l(r[0],r[1]):l(r);if(u)return r[0]===s[0]?i[0]+" "+c[1]:r[1]===s[1]?i[1]+" "+c[0]:c[0]+" - "+c[1];return c;function f(h){return h===s[0]?"min":h===s[1]?"max":(+h).toFixed(Math.min(a,20))}},t.prototype.resetExtent=function(){var r=this.option,n=_0t([r.min,r.max]);this._dataExtent=n},t.prototype.getDataDimensionIndex=function(r){var n=this.option.dimension;if(n!=null)return r.getDimensionIndex(n);for(var i=r.dimensions,o=i.length-1;o>=0;o--){var a=i[o],s=r.getDimensionInfo(a);if(!s.isCalculationCoord)return s.storeDimIndex}},t.prototype.getExtent=function(){return this._dataExtent.slice()},t.prototype.completeVisualOption=function(){var r=this.ecModel,n=this.option,i={inRange:n.inRange,outOfRange:n.outOfRange},o=n.target||(n.target={}),a=n.controller||(n.controller={});Ie(o,i),Ie(a,i);var s=this.isCategory();l.call(this,o),l.call(this,a),u.call(this,o,"inRange","outOfRange"),c.call(this,a);function l(f){y0t(n.color)&&!f.inRange&&(f.inRange={color:n.color.slice().reverse()}),f.inRange=f.inRange||{color:r.get("gradientColor")}}function u(f,h,d){var p=f[h],g=f[d];p&&!g&&(g=f[d]={},UO(p,function(m,v){if(!!ni.isValidType(v)){var y=QW.get(v,"inactive",s);y!=null&&(g[v]=y,v==="color"&&!g.hasOwnProperty("opacity")&&!g.hasOwnProperty("colorAlpha")&&(g.opacity=[0,0]))}}))}function c(f){var h=(f.inRange||{}).symbol||(f.outOfRange||{}).symbol,d=(f.inRange||{}).symbolSize||(f.outOfRange||{}).symbolSize,p=this.get("inactiveColor"),g=this.getItemSymbol(),m=g||"roundRect";UO(this.stateList,function(v){var y=this.itemSize,b=f[v];b||(b=f[v]={color:s?p:[p]}),b.symbol==null&&(b.symbol=h&&oe(h)||(s?m:[m])),b.symbolSize==null&&(b.symbolSize=d&&oe(d)||(s?y[0]:[y[0],y[0]])),b.symbol=VO(b.symbol,function(S){return S==="none"?m:S});var w=b.symbolSize;if(w!=null){var T=-1/0;m0t(w,function(S){S>T&&(T=S)}),b.symbolSize=VO(w,function(S){return b0t(S,[0,T],[0,y[0]],!0)})}},this)}},t.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},t.prototype.isCategory=function(){return!!this.option.categories},t.prototype.setSelected=function(r){},t.prototype.getSelected=function(){return null},t.prototype.getValueState=function(r){return null},t.prototype.getVisualMeta=function(r){return null},t.type="visualMap",t.dependencies=["series"],t.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},t}(qe);const F_=w0t;var WO=[20,140],S0t=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(r,n){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(i){i.mappingMethod="linear",i.dataExtent=this.getExtent()}),this._resetRange()},t.prototype.resetItemSize=function(){e.prototype.resetItemSize.apply(this,arguments);var r=this.itemSize;(r[0]==null||isNaN(r[0]))&&(r[0]=WO[0]),(r[1]==null||isNaN(r[1]))&&(r[1]=WO[1])},t.prototype._resetRange=function(){var r=this.getExtent(),n=this.option.range;!n||n.auto?(r.auto=1,this.option.range=r):St(n)&&(n[0]>n[1]&&n.reverse(),n[0]=Math.max(n[0],r[0]),n[1]=Math.min(n[1],r[1]))},t.prototype.completeVisualOption=function(){e.prototype.completeVisualOption.apply(this,arguments),U(this.stateList,function(r){var n=this.option.controller[r].symbolSize;n&&n[0]!==n[1]&&(n[0]=n[1]/3)},this)},t.prototype.setSelected=function(r){this.option.range=r.slice(),this._resetRange()},t.prototype.getSelected=function(){var r=this.getExtent(),n=v_((this.get("range")||[]).slice());return n[0]>r[1]&&(n[0]=r[1]),n[1]>r[1]&&(n[1]=r[1]),n[0]<r[0]&&(n[0]=r[0]),n[1]<r[0]&&(n[1]=r[0]),n},t.prototype.getValueState=function(r){var n=this.option.range,i=this.getExtent();return(n[0]<=i[0]||n[0]<=r)&&(n[1]>=i[1]||r<=n[1])?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(r){var n=[];return this.eachTargetSeries(function(i){var o=[],a=i.getData();a.each(this.getDataDimensionIndex(a),function(s,l){r[0]<=s&&s<=r[1]&&o.push(l)},this),n.push({seriesId:i.id,dataIndex:o})},this),n},t.prototype.getVisualMeta=function(r){var n=jO(this,"outOfRange",this.getExtent()),i=jO(this,"inRange",this.option.range.slice()),o=[];function a(d,p){o.push({value:d,color:r(d,p)})}for(var s=0,l=0,u=i.length,c=n.length;l<c&&(!i.length||n[l]<=i[0]);l++)n[l]<i[s]&&a(n[l],"outOfRange");for(var f=1;s<u;s++,f=0)f&&o.length&&a(i[s],"outOfRange"),a(i[s],"inRange");for(var f=1;l<c;l++)(!i.length||i[i.length-1]<n[l])&&(f&&(o.length&&a(o[o.length-1].value,"outOfRange"),f=0),a(n[l],"outOfRange"));var h=o.length;return{stops:o,outerColors:[h?o[0].color:"transparent",h?o[h-1].color:"transparent"]}},t.type="visualMap.continuous",t.defaultOption=Gb(F_.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),t}(F_);function jO(e,t,r){if(r[0]===r[1])return r.slice();for(var n=200,i=(r[1]-r[0])/n,o=r[0],a=[],s=0;s<=n&&o<r[1];s++)a.push(o),o+=i;return a.push(r[1]),a}const T0t=S0t;var k0t=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.autoPositionValues={left:1,right:1,top:1,bottom:1},r}return t.prototype.init=function(r,n){this.ecModel=r,this.api=n},t.prototype.render=function(r,n,i,o){if(this.visualMapModel=r,r.get("show")===!1){this.group.removeAll();return}this.doRender(r,n,i,o)},t.prototype.renderBackground=function(r){var n=this.visualMapModel,i=n0(n.get("padding")||0),o=r.getBoundingRect();r.add(new Lr({z2:-1,silent:!0,shape:{x:o.x-i[3],y:o.y-i[0],width:o.width+i[3]+i[1],height:o.height+i[0]+i[2]},style:{fill:n.get("backgroundColor"),stroke:n.get("borderColor"),lineWidth:n.get("borderWidth")}}))},t.prototype.getControllerVisual=function(r,n,i){i=i||{};var o=i.forceState,a=this.visualMapModel,s={};if(n==="color"){var l=a.get("contentColor");s.color=l}function u(d){return s[d]}function c(d,p){s[d]=p}var f=a.controllerVisuals[o||a.getValueState(r)],h=ni.prepareVisualTypes(f);return U(h,function(d){var p=f[d];i.convertOpacityToAlpha&&d==="opacity"&&(d="colorAlpha",p=f.__alphaForOpacity),ni.dependsOn(d,n)&&p&&p.applyVisual(r,u,c)}),s[n]},t.prototype.positionGroup=function(r){var n=this.visualMapModel,i=this.api;Vst(r,n.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()})},t.prototype.doRender=function(r,n,i,o){},t.type="visualMap",t}(eo);const tj=k0t;var GO=[["left","right","width"],["top","bottom","height"]];function ej(e,t,r){var n=e.option,i=n.align;if(i!=null&&i!=="auto")return i;for(var o={width:t.getWidth(),height:t.getHeight()},a=n.orient==="horizontal"?1:0,s=GO[a],l=[0,null,10],u={},c=0;c<3;c++)u[GO[1-a][c]]=l[c],u[s[c]]=c===2?r[0]:n[s[c]];var f=[["x","width",3],["y","height",0]][a],h=jl(u,o,n.padding);return s[(h.margin[f[2]]||0)+h[f[0]]+h[f[1]]*.5<o[f[1]]*.5?0:1]}function ky(e,t){return U(e||[],function(r){r.dataIndex!=null&&(r.dataIndexInside=r.dataIndex,r.dataIndex=null),r.highlightKey="visualMap"+(t?t.componentIndex:"")}),e}var ca=ys,P0t=U,HO=Math.min,l3=Math.max,E0t=12,C0t=6,A0t=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._shapes={},r._dataInterval=[],r._handleEnds=[],r._hoverLinkDataIndices=[],r}return t.prototype.doRender=function(r,n,i,o){this._api=i,(!o||o.type!=="selectDataRange"||o.from!==this.uid)&&this._buildView()},t.prototype._buildView=function(){this.group.removeAll();var r=this.visualMapModel,n=this.group;this._orient=r.get("orient"),this._useHandle=r.get("calculable"),this._resetInterval(),this._renderBar(n);var i=r.get("text");this._renderEndsText(n,i,0),this._renderEndsText(n,i,1),this._updateView(!0),this.renderBackground(n),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(n)},t.prototype._renderEndsText=function(r,n,i){if(!!n){var o=n[1-i];o=o!=null?o+"":"";var a=this.visualMapModel,s=a.get("textGap"),l=a.itemSize,u=this._shapes.mainGroup,c=this._applyTransform([l[0]/2,i===0?-s:l[1]+s],u),f=this._applyTransform(i===0?"bottom":"top",u),h=this._orient,d=this.visualMapModel.textStyleModel;this.group.add(new Or({style:ri(d,{x:c[0],y:c[1],verticalAlign:h==="horizontal"?"middle":f,align:h==="horizontal"?f:"center",text:o})}))}},t.prototype._renderBar=function(r){var n=this.visualMapModel,i=this._shapes,o=n.itemSize,a=this._orient,s=this._useHandle,l=ej(n,this.api,o),u=i.mainGroup=this._createBarGroup(l),c=new ar;u.add(c),c.add(i.outOfRange=XO()),c.add(i.inRange=XO(null,s?KO(this._orient):null,se(this._dragHandle,this,"all",!1),se(this._dragHandle,this,"all",!0))),c.setClipPath(new Lr({shape:{x:0,y:0,width:o[0],height:o[1],r:3}}));var f=n.textStyleModel.getTextRect("\u56FD"),h=l3(f.width,f.height);s&&(i.handleThumbs=[],i.handleLabels=[],i.handleLabelPoints=[],this._createHandle(n,u,0,o,h,a),this._createHandle(n,u,1,o,h,a)),this._createIndicator(n,u,o,h,a),r.add(u)},t.prototype._createHandle=function(r,n,i,o,a,s){var l=se(this._dragHandle,this,i,!1),u=se(this._dragHandle,this,i,!0),c=ms(r.get("handleSize"),o[0]),f=No(r.get("handleIcon"),-c/2,-c/2,c,c,null,!0),h=KO(this._orient);f.attr({cursor:h,draggable:!0,drift:l,ondragend:u,onmousemove:function(v){Sc(v.event)}}),f.x=o[0]/2,f.useStyle(r.getModel("handleStyle").getItemStyle()),f.setStyle({strokeNoScale:!0,strokeFirst:!0}),f.style.lineWidth*=2,f.ensureState("emphasis").style=r.getModel(["emphasis","handleStyle"]).getItemStyle(),TA(f,!0),n.add(f);var d=this.visualMapModel.textStyleModel,p=new Or({cursor:h,draggable:!0,drift:l,onmousemove:function(v){Sc(v.event)},ondragend:u,style:ri(d,{x:0,y:0,text:""})});p.ensureState("blur").style={opacity:.1},p.stateTransition={duration:200},this.group.add(p);var g=[c,0],m=this._shapes;m.handleThumbs[i]=f,m.handleLabelPoints[i]=g,m.handleLabels[i]=p},t.prototype._createIndicator=function(r,n,i,o,a){var s=ms(r.get("indicatorSize"),i[0]),l=No(r.get("indicatorIcon"),-s/2,-s/2,s,s,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:i[0]/2});var u=r.getModel("indicatorStyle").getItemStyle();if(l instanceof As){var c=l.style;l.useStyle(_t({image:c.image,x:c.x,y:c.y,width:c.width,height:c.height},u))}else l.useStyle(u);n.add(l);var f=this.visualMapModel.textStyleModel,h=new Or({silent:!0,invisible:!0,style:ri(f,{x:0,y:0,text:""})});this.group.add(h);var d=[(a==="horizontal"?o/2:C0t)+i[0]/2,0],p=this._shapes;p.indicator=l,p.indicatorLabel=h,p.indicatorLabelPoint=d,this._firstShowIndicator=!0},t.prototype._dragHandle=function(r,n,i,o){if(!!this._useHandle){if(this._dragging=!n,!n){var a=this._applyTransform([i,o],this._shapes.mainGroup,!0);this._updateInterval(r,a[1]),this._hideIndicator(),this._updateView()}n===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),n?!this._hovering&&this._clearHoverLinkToSeries():YO(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[r],!1)}},t.prototype._resetInterval=function(){var r=this.visualMapModel,n=this._dataInterval=r.getSelected(),i=r.getExtent(),o=[0,r.itemSize[1]];this._handleEnds=[ca(n[0],i,o,!0),ca(n[1],i,o,!0)]},t.prototype._updateInterval=function(r,n){n=n||0;var i=this.visualMapModel,o=this._handleEnds,a=[0,i.itemSize[1]];Gpt(n,o,a,r,0);var s=i.getExtent();this._dataInterval=[ca(o[0],a,s,!0),ca(o[1],a,s,!0)]},t.prototype._updateView=function(r){var n=this.visualMapModel,i=n.getExtent(),o=this._shapes,a=[0,n.itemSize[1]],s=r?a:this._handleEnds,l=this._createBarVisual(this._dataInterval,i,s,"inRange"),u=this._createBarVisual(i,i,a,"outOfRange");o.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),o.outOfRange.setStyle({fill:u.barColor}).setShape("points",u.barPoints),this._updateHandle(s,l)},t.prototype._createBarVisual=function(r,n,i,o){var a={forceState:o,convertOpacityToAlpha:!0},s=this._makeColorGradient(r,a),l=[this.getControllerVisual(r[0],"symbolSize",a),this.getControllerVisual(r[1],"symbolSize",a)],u=this._createBarPoints(i,l);return{barColor:new EA(0,0,0,1,s),barPoints:u,handlesColor:[s[0].color,s[s.length-1].color]}},t.prototype._makeColorGradient=function(r,n){var i=100,o=[],a=(r[1]-r[0])/i;o.push({color:this.getControllerVisual(r[0],"color",n),offset:0});for(var s=1;s<i;s++){var l=r[0]+a*s;if(l>r[1])break;o.push({color:this.getControllerVisual(l,"color",n),offset:s/i})}return o.push({color:this.getControllerVisual(r[1],"color",n),offset:1}),o},t.prototype._createBarPoints=function(r,n){var i=this.visualMapModel.itemSize;return[[i[0]-n[0],r[0]],[i[0],r[0]],[i[0],r[1]],[i[0]-n[1],r[1]]]},t.prototype._createBarGroup=function(r){var n=this._orient,i=this.visualMapModel.get("inverse");return new ar(n==="horizontal"&&!i?{scaleX:r==="bottom"?1:-1,rotation:Math.PI/2}:n==="horizontal"&&i?{scaleX:r==="bottom"?-1:1,rotation:-Math.PI/2}:n==="vertical"&&!i?{scaleX:r==="left"?1:-1,scaleY:-1}:{scaleX:r==="left"?1:-1})},t.prototype._updateHandle=function(r,n){if(!!this._useHandle){var i=this._shapes,o=this.visualMapModel,a=i.handleThumbs,s=i.handleLabels,l=o.itemSize,u=o.getExtent();P0t([0,1],function(c){var f=a[c];f.setStyle("fill",n.handlesColor[c]),f.y=r[c];var h=ca(r[c],[0,l[1]],u,!0),d=this.getControllerVisual(h,"symbolSize");f.scaleX=f.scaleY=d/l[0],f.x=l[0]-d/2;var p=Ph(i.handleLabelPoints[c],yy(f,this.group));s[c].setStyle({x:p[0],y:p[1],text:o.formatValueText(this._dataInterval[c]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",i.mainGroup):"center"})},this)}},t.prototype._showIndicator=function(r,n,i,o){var a=this.visualMapModel,s=a.getExtent(),l=a.itemSize,u=[0,l[1]],c=this._shapes,f=c.indicator;if(!!f){f.attr("invisible",!1);var h={convertOpacityToAlpha:!0},d=this.getControllerVisual(r,"color",h),p=this.getControllerVisual(r,"symbolSize"),g=ca(r,s,u,!0),m=l[0]-p/2,v={x:f.x,y:f.y};f.y=g,f.x=m;var y=Ph(c.indicatorLabelPoint,yy(f,this.group)),b=c.indicatorLabel;b.attr("invisible",!1);var w=this._applyTransform("left",c.mainGroup),T=this._orient,S=T==="horizontal";b.setStyle({text:(i||"")+a.formatValueText(n),verticalAlign:S?w:"middle",align:S?"center":w});var k={x:m,y:g,style:{fill:d}},E={style:{x:y[0],y:y[1]}};if(a.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var P={duration:100,easing:"cubicInOut",additive:!0};f.x=v.x,f.y=v.y,f.animateTo(k,P),b.animateTo(E,P)}else f.attr(k),b.attr(E);this._firstShowIndicator=!1;var C=this._shapes.handleLabels;if(C)for(var A=0;A<C.length;A++)this._api.enterBlur(C[A])}},t.prototype._enableHoverLinkToSeries=function(){var r=this;this._shapes.mainGroup.on("mousemove",function(n){if(r._hovering=!0,!r._dragging){var i=r.visualMapModel.itemSize,o=r._applyTransform([n.offsetX,n.offsetY],r._shapes.mainGroup,!0,!0);o[1]=HO(l3(0,o[1]),i[1]),r._doHoverLinkToSeries(o[1],0<=o[0]&&o[0]<=i[0])}}).on("mouseout",function(){r._hovering=!1,!r._dragging&&r._clearHoverLinkToSeries()})},t.prototype._enableHoverLinkFromSeries=function(){var r=this.api.getZr();this.visualMapModel.option.hoverLink?(r.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),r.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},t.prototype._doHoverLinkToSeries=function(r,n){var i=this.visualMapModel,o=i.itemSize;if(!!i.option.hoverLink){var a=[0,o[1]],s=i.getExtent();r=HO(l3(a[0],r),a[1]);var l=x0t(i,s,a),u=[r-l,r+l],c=ca(r,a,s,!0),f=[ca(u[0],a,s,!0),ca(u[1],a,s,!0)];u[0]<a[0]&&(f[0]=-1/0),u[1]>a[1]&&(f[1]=1/0),n&&(f[0]===-1/0?this._showIndicator(c,f[1],"< ",l):f[1]===1/0?this._showIndicator(c,f[0],"> ",l):this._showIndicator(c,c,"\u2248 ",l));var h=this._hoverLinkDataIndices,d=[];(n||YO(i))&&(d=this._hoverLinkDataIndices=i.findTargetDataIndices(f));var p=qit(h,d);this._dispatchHighDown("downplay",ky(p[0],i)),this._dispatchHighDown("highlight",ky(p[1],i))}},t.prototype._hoverLinkFromSeriesMouseOver=function(r){var n;if(fh(r.target,function(l){var u=Me(l);if(u.dataIndex!=null)return n=u,!0},!0),!!n){var i=this.ecModel.getSeriesByIndex(n.seriesIndex),o=this.visualMapModel;if(!!o.isTargetSeries(i)){var a=i.getData(n.dataType),s=a.getStore().get(o.getDataDimensionIndex(a),n.dataIndex);isNaN(s)||this._showIndicator(s,s)}}},t.prototype._hideIndicator=function(){var r=this._shapes;r.indicator&&r.indicator.attr("invisible",!0),r.indicatorLabel&&r.indicatorLabel.attr("invisible",!0);var n=this._shapes.handleLabels;if(n)for(var i=0;i<n.length;i++)this._api.leaveBlur(n[i])},t.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var r=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",ky(r,this.visualMapModel)),r.length=0},t.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var r=this.api.getZr();r.off("mouseover",this._hoverLinkFromSeriesMouseOver),r.off("mouseout",this._hideIndicator)},t.prototype._applyTransform=function(r,n,i,o){var a=yy(n,o?null:this.group);return St(r)?Ph(r,a,i):Qz(r,a,i)},t.prototype._dispatchHighDown=function(r,n){n&&n.length&&this.api.dispatchAction({type:r,batch:n})},t.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.prototype.remove=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.type="visualMap.continuous",t}(tj);function XO(e,t,r,n){return new dv({shape:{points:e},draggable:!!r,cursor:t,drift:r,onmousemove:function(i){Sc(i.event)},ondragend:n})}function x0t(e,t,r){var n=E0t/2,i=e.get("hoverLinkDataSize");return i&&(n=ca(i,t,r,!0)/2),n}function YO(e){var t=e.get("hoverLinkOnHandle");return!!(t==null?e.get("realtime"):t)}function KO(e){return e==="vertical"?"ns-resize":"ew-resize"}const M0t=A0t;var I0t={type:"selectDataRange",event:"dataRangeSelected",update:"update"},L0t=function(e,t){t.eachComponent({mainType:"visualMap",query:e},function(r){r.setSelected(e.selected)})},O0t=[{createOnAllSeries:!0,reset:function(e,t){var r=[];return t.eachComponent("visualMap",function(n){var i=e.pipelineContext;!n.isTargetSeries(e)||i&&i.large||r.push(Rvt(n.stateList,n.targetVisuals,se(n.getValueState,n),n.getDataDimensionIndex(e.getData())))}),r}},{createOnAllSeries:!0,reset:function(e,t){var r=e.getData(),n=[];t.eachComponent("visualMap",function(i){if(i.isTargetSeries(e)){var o=i.getVisualMeta(se(R0t,null,e,i))||{stops:[],outerColors:[]},a=i.getDataDimensionIndex(r);a>=0&&(o.dimension=a,n.push(o))}}),e.getData().setVisual("visualMeta",n)}}];function R0t(e,t,r,n){for(var i=t.targetVisuals[n],o=ni.prepareVisualTypes(i),a={color:r2(e.getData(),"color")},s=0,l=o.length;s<l;s++){var u=o[s],c=i[u==="opacity"?"__alphaForOpacity":u];c&&c.applyVisual(r,f,h)}return a.color;function f(d){return a[d]}function h(d,p){a[d]=p}}var ZO=U;function D0t(e){var t=e&&e.visualMap;St(t)||(t=t?[t]:[]),ZO(t,function(r){if(!!r){Rf(r,"splitList")&&!Rf(r,"pieces")&&(r.pieces=r.splitList,delete r.splitList);var n=r.pieces;n&&St(n)&&ZO(n,function(i){Yt(i)&&(Rf(i,"start")&&!Rf(i,"min")&&(i.min=i.start),Rf(i,"end")&&!Rf(i,"max")&&(i.max=i.end))})}})}function Rf(e,t){return e&&e.hasOwnProperty&&e.hasOwnProperty(t)}var qO=!1;function rj(e){qO||(qO=!0,e.registerSubTypeDefaulter("visualMap",function(t){return!t.categories&&(!(t.pieces?t.pieces.length>0:t.splitNumber>0)||t.calculable)?"continuous":"piecewise"}),e.registerAction(I0t,L0t),U(O0t,function(t){e.registerVisual(e.PRIORITY.VISUAL.COMPONENT,t)}),e.registerPreprocessor(D0t))}function N0t(e){e.registerComponentModel(T0t),e.registerComponentView(M0t),rj(e)}var F0t=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._pieceList=[],r}return t.prototype.optionUpdated=function(r,n){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var i=this._mode=this._determineMode();this._pieceList=[],$0t[this._mode].call(this,this._pieceList),this._resetSelected(r,n);var o=this.option.categories;this.resetVisual(function(a,s){i==="categories"?(a.mappingMethod="category",a.categories=oe(o)):(a.dataExtent=this.getExtent(),a.mappingMethod="piecewise",a.pieceList=Bt(this._pieceList,function(l){return l=oe(l),s!=="inRange"&&(l.visual=null),l}))})},t.prototype.completeVisualOption=function(){var r=this.option,n={},i=ni.listVisualTypes(),o=this.isCategory();U(r.pieces,function(s){U(i,function(l){s.hasOwnProperty(l)&&(n[l]=1)})}),U(n,function(s,l){var u=!1;U(this.stateList,function(c){u=u||a(r,c,l)||a(r.target,c,l)},this),!u&&U(this.stateList,function(c){(r[c]||(r[c]={}))[l]=QW.get(l,c==="inRange"?"active":"inactive",o)})},this);function a(s,l,u){return s&&s[l]&&s[l].hasOwnProperty(u)}e.prototype.completeVisualOption.apply(this,arguments)},t.prototype._resetSelected=function(r,n){var i=this.option,o=this._pieceList,a=(n?i:r).selected||{};if(i.selected=a,U(o,function(l,u){var c=this.getSelectedMapKey(l);a.hasOwnProperty(c)||(a[c]=!0)},this),i.selectedMode==="single"){var s=!1;U(o,function(l,u){var c=this.getSelectedMapKey(l);a[c]&&(s?a[c]=!1:s=!0)},this)}},t.prototype.getItemSymbol=function(){return this.get("itemSymbol")},t.prototype.getSelectedMapKey=function(r){return this._mode==="categories"?r.value+"":r.index+""},t.prototype.getPieceList=function(){return this._pieceList},t.prototype._determineMode=function(){var r=this.option;return r.pieces&&r.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},t.prototype.setSelected=function(r){this.option.selected=oe(r)},t.prototype.getValueState=function(r){var n=ni.findPieceIndex(r,this._pieceList);return n!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[n])]?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(r){var n=[],i=this._pieceList;return this.eachTargetSeries(function(o){var a=[],s=o.getData();s.each(this.getDataDimensionIndex(s),function(l,u){var c=ni.findPieceIndex(l,i);c===r&&a.push(u)},this),n.push({seriesId:o.id,dataIndex:a})},this),n},t.prototype.getRepresentValue=function(r){var n;if(this.isCategory())n=r.value;else if(r.value!=null)n=r.value;else{var i=r.interval||[];n=i[0]===-1/0&&i[1]===1/0?0:(i[0]+i[1])/2}return n},t.prototype.getVisualMeta=function(r){if(this.isCategory())return;var n=[],i=["",""],o=this;function a(c,f){var h=o.getRepresentValue({interval:c});f||(f=o.getValueState(h));var d=r(h,f);c[0]===-1/0?i[0]=d:c[1]===1/0?i[1]=d:n.push({value:c[0],color:d},{value:c[1],color:d})}var s=this._pieceList.slice();if(!s.length)s.push({interval:[-1/0,1/0]});else{var l=s[0].interval[0];l!==-1/0&&s.unshift({interval:[-1/0,l]}),l=s[s.length-1].interval[1],l!==1/0&&s.push({interval:[l,1/0]})}var u=-1/0;return U(s,function(c){var f=c.interval;f&&(f[0]>u&&a([u,f[0]],"outOfRange"),a(f.slice()),u=f[1])},this),{stops:n,outerColors:i}},t.type="visualMap.piecewise",t.defaultOption=Gb(F_.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),t}(F_),$0t={splitNumber:function(e){var t=this.option,r=Math.min(t.precision,20),n=this.getExtent(),i=t.splitNumber;i=Math.max(parseInt(i,10),1),t.splitNumber=i;for(var o=(n[1]-n[0])/i;+o.toFixed(r)!==o&&r<5;)r++;t.precision=r,o=+o.toFixed(r),t.minOpen&&e.push({interval:[-1/0,n[0]],close:[0,0]});for(var a=0,s=n[0];a<i;s+=o,a++){var l=a===i-1?n[1]:s+o;e.push({interval:[s,l],close:[1,1]})}t.maxOpen&&e.push({interval:[n[1],1/0],close:[0,0]}),e6(e),U(e,function(u,c){u.index=c,u.text=this.formatValueText(u.interval)},this)},categories:function(e){var t=this.option;U(t.categories,function(r){e.push({text:this.formatValueText(r,!0),value:r})},this),JO(t,e)},pieces:function(e){var t=this.option;U(t.pieces,function(r,n){Yt(r)||(r={value:r});var i={text:"",index:n};if(r.label!=null&&(i.text=r.label),r.hasOwnProperty("value")){var o=i.value=r.value;i.interval=[o,o],i.close=[1,1]}else{for(var a=i.interval=[],s=i.close=[0,0],l=[1,0,1],u=[-1/0,1/0],c=[],f=0;f<2;f++){for(var h=[["gte","gt","min"],["lte","lt","max"]][f],d=0;d<3&&a[f]==null;d++)a[f]=r[h[d]],s[f]=l[d],c[f]=d===2;a[f]==null&&(a[f]=u[f])}c[0]&&a[1]===1/0&&(s[0]=0),c[1]&&a[0]===-1/0&&(s[1]=0),a[0]===a[1]&&s[0]&&s[1]&&(i.value=a[0])}i.visual=ni.retrieveVisuals(r),e.push(i)},this),JO(t,e),e6(e),U(e,function(r){var n=r.close,i=[["<","\u2264"][n[1]],[">","\u2265"][n[0]]];r.text=r.text||this.formatValueText(r.value!=null?r.value:r.interval,!1,i)},this)}};function JO(e,t){var r=e.inverse;(e.orient==="vertical"?!r:r)&&t.reverse()}const B0t=F0t;var z0t=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.doRender=function(){var r=this.group;r.removeAll();var n=this.visualMapModel,i=n.get("textGap"),o=n.textStyleModel,a=o.getFont(),s=o.getTextColor(),l=this._getItemAlign(),u=n.itemSize,c=this._getViewData(),f=c.endsText,h=Po(n.get("showLabel",!0),!f);f&&this._renderEndsText(r,f[0],u,h,l),U(c.viewPieceList,function(d){var p=d.piece,g=new ar;g.onclick=se(this._onItemClick,this,p),this._enableHoverLink(g,d.indexInModelPieceList);var m=n.getRepresentValue(p);if(this._createItemSymbol(g,m,[0,0,u[0],u[1]]),h){var v=this.visualMapModel.getValueState(m);g.add(new Or({style:{x:l==="right"?-i:u[0]+i,y:u[1]/2,text:p.text,verticalAlign:"middle",align:l,font:a,fill:s,opacity:v==="outOfRange"?.5:1}}))}r.add(g)},this),f&&this._renderEndsText(r,f[1],u,h,l),Ah(n.get("orient"),r,n.get("itemGap")),this.renderBackground(r),this.positionGroup(r)},t.prototype._enableHoverLink=function(r,n){var i=this;r.on("mouseover",function(){return o("highlight")}).on("mouseout",function(){return o("downplay")});var o=function(a){var s=i.visualMapModel;s.option.hoverLink&&i.api.dispatchAction({type:a,batch:ky(s.findTargetDataIndices(n),s)})}},t.prototype._getItemAlign=function(){var r=this.visualMapModel,n=r.option;if(n.orient==="vertical")return ej(r,this.api,r.itemSize);var i=n.align;return(!i||i==="auto")&&(i="left"),i},t.prototype._renderEndsText=function(r,n,i,o,a){if(!!n){var s=new ar,l=this.visualMapModel.textStyleModel;s.add(new Or({style:ri(l,{x:o?a==="right"?i[0]:0:i[0]/2,y:i[1]/2,verticalAlign:"middle",align:o?a:"center",text:n})})),r.add(s)}},t.prototype._getViewData=function(){var r=this.visualMapModel,n=Bt(r.getPieceList(),function(s,l){return{piece:s,indexInModelPieceList:l}}),i=r.get("text"),o=r.get("orient"),a=r.get("inverse");return(o==="horizontal"?a:!a)?n.reverse():i&&(i=i.slice().reverse()),{viewPieceList:n,endsText:i}},t.prototype._createItemSymbol=function(r,n,i){r.add(No(this.getControllerVisual(n,"symbol"),i[0],i[1],i[2],i[3],this.getControllerVisual(n,"color")))},t.prototype._onItemClick=function(r){var n=this.visualMapModel,i=n.option,o=i.selectedMode;if(!!o){var a=oe(i.selected),s=n.getSelectedMapKey(r);o==="single"||o===!0?(a[s]=!0,U(a,function(l,u){a[u]=u===s})):a[s]=!a[s],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:a})}},t.type="visualMap.piecewise",t}(tj);const V0t=z0t;function U0t(e){e.registerComponentModel(B0t),e.registerComponentView(V0t),rj(e)}function W0t(e){Qr(N0t),Qr(U0t)}var QO={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},j0t=function(){function e(t){var r=this._condVal=$t(t)?new RegExp(t):ont(t)?t:null;if(r==null){var n="";Ae(n)}}return e.prototype.evaluate=function(t){var r=typeof t;return $t(r)?this._condVal.test(t):He(r)?this._condVal.test(t+""):!1},e}(),G0t=function(){function e(){}return e.prototype.evaluate=function(){return this.value},e}(),H0t=function(){function e(){}return e.prototype.evaluate=function(){for(var t=this.children,r=0;r<t.length;r++)if(!t[r].evaluate())return!1;return!0},e}(),X0t=function(){function e(){}return e.prototype.evaluate=function(){for(var t=this.children,r=0;r<t.length;r++)if(t[r].evaluate())return!0;return!1},e}(),Y0t=function(){function e(){}return e.prototype.evaluate=function(){return!this.child.evaluate()},e}(),K0t=function(){function e(){}return e.prototype.evaluate=function(){for(var t=!!this.valueParser,r=this.getValue,n=r(this.valueGetterParam),i=t?this.valueParser(n):null,o=0;o<this.subCondList.length;o++)if(!this.subCondList[o].evaluate(t?i:n))return!1;return!0},e}();function yx(e,t){if(e===!0||e===!1){var r=new G0t;return r.value=e,r}var n="";return nj(e)||Ae(n),e.and?tR("and",e,t):e.or?tR("or",e,t):e.not?Z0t(e,t):q0t(e,t)}function tR(e,t,r){var n=t[e],i="";St(n)||Ae(i),n.length||Ae(i);var o=e==="and"?new H0t:new X0t;return o.children=Bt(n,function(a){return yx(a,r)}),o.children.length||Ae(i),o}function Z0t(e,t){var r=e.not,n="";nj(r)||Ae(n);var i=new Y0t;return i.child=yx(r,t),i.child||Ae(n),i}function q0t(e,t){for(var r="",n=t.prepareGetValue(e),i=[],o=ze(e),a=e.parser,s=a?NV(a):null,l=0;l<o.length;l++){var u=o[l];if(!(u==="parser"||t.valueGetterAttrMap.get(u))){var c=Mt(QO,u)?QO[u]:u,f=e[u],h=s?s(f):f,d=Rlt(c,h)||c==="reg"&&new j0t(h);d||Ae(r),i.push(d)}}i.length||Ae(r);var p=new K0t;return p.valueGetterParam=n,p.valueParser=s,p.getValue=t.getValue,p.subCondList=i,p}function nj(e){return Yt(e)&&!In(e)}var J0t=function(){function e(t,r){this._cond=yx(t,r)}return e.prototype.evaluate=function(){return this._cond.evaluate()},e}();function Q0t(e,t){return new J0t(e,t)}var tmt={type:"echarts:filter",transform:function(e){for(var t=e.upstream,r,n=Q0t(e.config,{valueGetterAttrMap:he({dimension:!0}),prepareGetValue:function(s){var l="",u=s.dimension;Mt(s,"dimension")||Ae(l);var c=t.getDimensionInfo(u);return c||Ae(l),{dimIdx:c.index}},getValue:function(s){return t.retrieveValueFromItem(r,s.dimIdx)}}),i=[],o=0,a=t.count();o<a;o++)r=t.getRawDataItem(o),n.evaluate()&&i.push(r);return{data:i}}},emt={type:"echarts:sort",transform:function(e){var t=e.upstream,r=e.config,n="",i=Ir(r);i.length||Ae(n);var o=[];U(i,function(c){var f=c.dimension,h=c.order,d=c.parser,p=c.incomparable;if(f==null&&Ae(n),h!=="asc"&&h!=="desc"&&Ae(n),p&&p!=="min"&&p!=="max"){var g="";Ae(g)}if(h!=="asc"&&h!=="desc"){var m="";Ae(m)}var v=t.getDimensionInfo(f);v||Ae(n);var y=d?NV(d):null;d&&!y&&Ae(n),o.push({dimIdx:v.index,parser:y,comparator:new $V(h,p)})});var a=t.sourceFormat;a!==Un&&a!==Wo&&Ae(n);for(var s=[],l=0,u=t.count();l<u;l++)s.push(t.getRawDataItem(l));return s.sort(function(c,f){for(var h=0;h<o.length;h++){var d=o[h],p=t.retrieveValueFromItem(c,d.dimIdx),g=t.retrieveValueFromItem(f,d.dimIdx);d.parser&&(p=d.parser(p),g=d.parser(g));var m=d.comparator.evaluate(p,g);if(m!==0)return m}return 0}),{data:s}}};function gd(e){e.registerTransform(tmt),e.registerTransform(emt)}var rmt=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="dataset",r}return t.prototype.init=function(r,n,i){e.prototype.init.call(this,r,n,i),this._sourceManager=new UV(this),y5(this)},t.prototype.mergeOption=function(r,n){e.prototype.mergeOption.call(this,r,n),y5(this)},t.prototype.optionUpdated=function(){this._sourceManager.dirty()},t.prototype.getSourceManager=function(){return this._sourceManager},t.type="dataset",t.defaultOption={seriesLayoutBy:Pa},t}(qe),nmt=function(e){Ot(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="dataset",r}return t.type="dataset",t}(eo);function vd(e){e.registerComponentModel(rmt),e.registerComponentView(nmt)}var u3=null;function imt(e){return u3||(u3=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){return setTimeout(t,16)}).bind(window)),u3(e)}var c3=null;function omt(e){c3||(c3=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){clearTimeout(t)}).bind(window)),c3(e)}function amt(e){var t=document.createElement("style");return t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),(document.querySelector("head")||document.body).appendChild(t),t}function Um(e,t){t===void 0&&(t={});var r=document.createElement(e);return Object.keys(t).forEach(function(n){r[n]=t[n]}),r}function ij(e,t,r){var n=window.getComputedStyle(e,r||null)||{display:"none"};return n[t]}function QP(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};for(var t=e;t!==document;){if(ij(t,"display")==="none")return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}var smt='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',tE=0,Py=null;function lmt(e,t){e.__resize_mutation_handler__||(e.__resize_mutation_handler__=fmt.bind(e));var r=e.__resize_listeners__;if(!r){if(e.__resize_listeners__=[],window.ResizeObserver){var n=e.offsetWidth,i=e.offsetHeight,o=new ResizeObserver(function(){!e.__resize_observer_triggered__&&(e.__resize_observer_triggered__=!0,e.offsetWidth===n&&e.offsetHeight===i)||$_(e)}),a=QP(e),s=a.detached,l=a.rendered;e.__resize_observer_triggered__=s===!1&&l===!1,e.__resize_observer__=o,o.observe(e)}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){$_(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if(tE||(Py=amt(smt)),hmt(e),e.__resize_rendered__=QP(e).rendered,window.MutationObserver){var u=new MutationObserver(e.__resize_mutation_handler__);u.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=u}}e.__resize_listeners__.push(t),tE++}function umt(e,t){var r=e.__resize_listeners__;if(!!r){if(t&&r.splice(r.indexOf(t),1),!r.length||!t){if(e.detachEvent&&e.removeEventListener){e.detachEvent("onresize",e.__resize_legacy_resize_handler__),document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);return}e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__.disconnect(),e.__resize_observer__=null):(e.__resize_mutation_observer__&&(e.__resize_mutation_observer__.disconnect(),e.__resize_mutation_observer__=null),e.removeEventListener("scroll",_x),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null),e.__resize_listeners__=null}!--tE&&Py&&Py.parentNode.removeChild(Py)}}function cmt(e){var t=e.__resize_last__,r=t.width,n=t.height,i=e.offsetWidth,o=e.offsetHeight;return i!==r||o!==n?{width:i,height:o}:null}function fmt(){var e=QP(this),t=e.rendered,r=e.detached;t!==this.__resize_rendered__&&(!r&&this.__resize_triggers__&&(bx(this),this.addEventListener("scroll",_x,!0)),this.__resize_rendered__=t,$_(this))}function _x(){var e=this;bx(this),this.__resize_raf__&&omt(this.__resize_raf__),this.__resize_raf__=imt(function(){var t=cmt(e);t&&(e.__resize_last__=t,$_(e))})}function $_(e){!e||!e.__resize_listeners__||e.__resize_listeners__.forEach(function(t){t.call(e,e)})}function hmt(e){var t=ij(e,"position");(!t||t==="static")&&(e.style.position="relative"),e.__resize_old_position__=t,e.__resize_last__={};var r=Um("div",{className:"resize-triggers"}),n=Um("div",{className:"resize-expand-trigger"}),i=Um("div"),o=Um("div",{className:"resize-contract-trigger"});n.appendChild(i),r.appendChild(n),r.appendChild(o),e.appendChild(r),e.__resize_triggers__={triggers:r,expand:n,expandChild:i,contract:o},bx(e),e.addEventListener("scroll",_x,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}function bx(e){var t=e.__resize_triggers__,r=t.expand,n=t.expandChild,i=t.contract,o=i.scrollWidth,a=i.scrollHeight,s=r.offsetWidth,l=r.offsetHeight,u=r.scrollWidth,c=r.scrollHeight;i.scrollLeft=o,i.scrollTop=a,n.style.width=s+1+"px",n.style.height=l+1+"px",r.scrollLeft=u,r.scrollTop=c}var es=function(){return es=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},es.apply(this,arguments)},dmt=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function pmt(e){return t=Object.create(null),dmt.forEach(function(r){t[r]=function(n){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(!e.value)throw new Error("ECharts is not initialized yet.");return e.value[n].apply(e.value,i)}}(r)}),t;var t}var gmt={autoresize:Boolean},vmt={loading:Boolean,loadingOptions:Object},mmt=/^on[^a-z]/,ymt=function(e){return mmt.test(e)},eR=[],gp=[];(function(e,t){if(e&&typeof document<"u"){var r,n=t.prepend===!0?"prepend":"append",i=t.singleTag===!0,o=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var a=eR.indexOf(o);a===-1&&(a=eR.push(o)-1,gp[a]={}),r=gp[a]&&gp[a][n]?gp[a][n]:gp[a][n]=s()}else r=s();e.charCodeAt(0)===65279&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function s(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),t.attributes)for(var u=Object.keys(t.attributes),c=0;c<u.length;c++)l.setAttribute(u[c],t.attributes[u[c]]);var f=n==="prepend"?"afterbegin":"beforeend";return o.insertAdjacentElement(f,l),l}})("x-vue-echarts{display:block;width:100%;height:100%}",{});var oj="ecTheme",eu=rd({name:"echarts",props:es(es({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},gmt),vmt),inheritAttrs:!1,setup:function(e,t){var r=t.attrs,n=dg(),i=dg(),o=dg(),a=Bn("ecTheme",null),s=Bn("ecInitOptions",null),l=Bn("ecUpdateOptions",null),u=Wy(e),c=u.autoresize,f=u.manualUpdate,h=u.loading,d=u.loadingOptions,p=yr(function(){return o.value||e.option||null}),g=yr(function(){return e.theme||Kr(a)||{}}),m=yr(function(){return e.initOptions||Kr(s)||{}}),v=yr(function(){return e.updateOptions||Kr(l)||{}}),y=yr(function(){return function(E){var P={};for(var C in E)ymt(C)||(P[C]=E[C]);return P}(r)}),b=Bo().proxy.$listeners;function w(E){if(n.value){var P=i.value=Ict(n.value,g.value,m.value);e.group&&(P.group=e.group);var C=b;C||(C={},Object.keys(r).filter(function(L){return L.indexOf("on")===0&&L.length>2}).forEach(function(L){var R=L.charAt(2).toLowerCase()+L.slice(3);R.substring(R.length-4)==="Once"&&(R="~".concat(R.substring(0,R.length-4))),C[R]=r[L]})),Object.keys(C).forEach(function(L){var R=C[L];if(R){var D=L.toLowerCase();D.charAt(0)==="~"&&(D=D.substring(1),R.__once__=!0);var F=P;if(D.indexOf("zr:")===0&&(F=P.getZr(),D=D.substring(3)),R.__once__){delete R.__once__;var z=R;R=function(){for(var Y=[],K=0;K<arguments.length;K++)Y[K]=arguments[K];z.apply(void 0,Y),F.off(D,R)}}F.on(D,R)}}),c.value?vs(function(){P&&!P.isDisposed()&&P.resize(),A()}):A()}function A(){var L=E||p.value;L&&P.setOption(L,v.value)}}function T(){i.value&&(i.value.dispose(),i.value=void 0)}var S=null;Xi(f,function(E){typeof S=="function"&&(S(),S=null),E||(S=Xi(function(){return e.option},function(P,C){P&&(i.value?i.value.setOption(P,es({notMerge:P.value!==(C==null?void 0:C.value)},v.value)):w())},{deep:!0}))},{immediate:!0}),Xi([g,m],function(){T(),w()},{deep:!0}),ck(function(){e.group&&i.value&&(i.value.group=e.group)});var k=pmt(i);return function(E,P,C){var A=Bn("ecLoadingOptions",{}),L=yr(function(){return es(es({},Kr(A)),C==null?void 0:C.value)});ck(function(){var R=E.value;R&&(P.value?R.showLoading(L.value):R.hideLoading())})}(i,h,d),function(E,P,C){var A=null;Xi([C,E,P],function(L,R,D){var F=L[0],z=L[1],Y=L[2];F&&z&&Y&&(A=e2(function(){z.resize()},100),lmt(F,A)),D(function(){A&&F&&umt(F,A)})})}(i,c,n),nd(function(){w()}),id(T),es({chart:i,root:n,setOption:function(E,P){e.manualUpdate&&(o.value=E),i.value?i.value.setOption(E,P||{}):w(E)},nonEventAttrs:y},k)},render:function(){var e=es({},this.nonEventAttrs);return e.ref="root",e.class=e.class?["echarts"].concat(e.class):"echarts",Yv("x-vue-echarts",e)}});Qr([ql,Yc,Kc,Ql,Jl,tu,Zc,W0t,qc]);const _mt={setup(){const e=ee();return{gameStore:At(),userStore:e}},components:{VChart:eu},props:{rgk:Number,workload:Number,wspd:Number,show:{type:Boolean,default:!1}},data:()=>({}),computed:{modHist(){return this.userStore.regionResources2.hasOwnProperty(this.rgk)||(this.userStore.regionResources2[this.rgk]=[0]),this.userStore.regionResources2[this.rgk].map(Number).filter(t=>!isNaN(t)).sort((t,r)=>r-t)},modTimes(){const e=this.modHist.length,t={};for(let r=0;r<this.modHist.length;r++){const n=this.modHist[r];t[n]=100*(r+1)/e}return t},modSorted(){return Object.keys(this.modTimes).map(Number).sort((t,r)=>t-r)},medianResource(){let e=0;const t=this.modHist.length;if(t%2)e=modHist[(t-1)/2];else{const r=this.modHist[(t-1-1)/2],n=this.modHist[(t-1+1)/2];e=(r+n)/2}return console.log("medianResource",t,e),this.workload*(2-e/100)},tierResources(){const e=[];let t=0;const r=this.workload,n=2*r,i=Math.ceil(r/this.wspd),o=Math.ceil(n/this.wspd);for(let a=i;a<=o;a++){const s=Math.max(2-this.wspd*a/r,0),l=r*(2-s),u=this.userStore.chanceAtResource(this.rgk,s*100),c=u-t;e.push({wld:l,mod:s,tier:a,time:c}),t=u}return e},chartDataLine(){const e=[];for(let t=0;t<1001;t++){const r=t/10,n=this.workload*(2-r/100),i=this.userStore.chanceAtResource(this.rgk,r),o=n/this.wspd;e.push([r,n,i,o])}return e},chartDataPoints(){const e=[];if(this.userStore.modHists[this.rgk]==null)return e;const t=this.userStore.modHists[this.rgk].length;for(let r=0;r<t;r++){const n=this.userStore.modHists[this.rgk][r],i=100*r/(t-1);e.push([i,n])}return e},chartColorRanges(){const e=[];let t=100;for(const r of this.tierResources){const n=r.mod*100;e.push({lte:t,gt:n}),t=n}return e},chartColorRangesWorkload(){const e=[];let t=this.workload;for(const r of this.tierResources){const n=r.wld;e.push({gt:t,lte:n}),t=n}return e},chartBands(){const e=[];let t=100;for(const r of this.tierResources){const n=r.mod*100;e.push([{name:r.tier,xAxis:t},{xAxis:n}]),t=n}return console.log("chartBands",e),e},chartOptionRotated(){return{grid:{left:30,top:30,right:30,bottom:40},xAxis:[{name:"workload",nameGap:22,min:"dataMin",max:"dataMax",nameLocation:"center",splitLine:{show:!1},boundaryGap:["10%","10%"]}],yAxis:{name:"chance",nameGap:10,type:"value",axisLine:{onZero:!1},axisLabel:{},splitLine:{show:!1},axisPointer:{snap:!0}},legend:{show:!0},series:[{data:this.chartDataLine,encode:{y:2,x:0,tooltip:[0,1,2]},type:"line",showSymbol:!1},{data:this.chartDataPoints,encode:{y:0,x:1},type:"scatter",symbolSize:5,color:"gray"}],visualMap:{show:!1,seriesIndex:0,dimension:0,pieces:this.chartColorRanges,color:["#cc3","#c22"]},tooltip:{trigger:"axis",axisPointer:{},formatter:function(e){const t=e[0].value[0],r=e[0].value[1],n=e[0].value[2];return`${e[0].value[3]*10} minute tier<br/>workload \u2264 ${r.toFixed(1)}<br/>resource \u2265 ${t.toFixed(1)}<br/>chance ${n.toFixed(1)}%`}},legend:{show:!1}}},chartOption(){return{grid:{left:30,top:30,right:30,bottom:40},xAxis:{name:"chance %",nameLocation:"center",nameGap:22,type:"value",min:0,max:100,axisLine:{onZero:!1},axisLabel:{},splitLine:{show:!1},axisPointer:{snap:!0}},yAxis:[{name:"resource",nameGap:10,min:"dataMin",max:"dataMax",splitLine:{show:!1}}],legend:{},series:[{data:this.chartDataLine,encode:{x:2,y:0,tooltip:[0,1,2]},type:"line",showSymbol:!1},{data:this.chartDataPoints,encode:{x:0,y:1},type:"scatter",symbolSize:5,color:"gray",tooltip:{show:!1}}],visualMap:{show:!1,seriesIndex:0,dimension:0,pieces:this.chartColorRanges,color:["#cc3","#c22"]},tooltip:{trigger:"axis",axisPointer:{axis:"x"},formatter:function(e){const t=e[0].value[0],r=e[0].value[1],n=e[0].value[2],i=e[0].value[3];return`${dt(n,1)}% chance to get<br/>${dt(t,1)} or more resource %, or<br/>${dt(r,1)} or less workload, or<br/>${dt(i*10,1)} min \u2192 ${Math.ceil(i)*10} min cycle`},backgroundColor:"var(--color-background)",borderColor:"var(--color-border)",borderWidth:1,textStyle:{color:"var(--color-text)",fontSize:11}},confine:!0,legend:{show:!1}}}},methods:{formatFixed:dt,updStore(e){this.userStore.regionResources2[this.rgk]=e.split(",")},spaceSep(e,t){return dt(e*1e6,0,t).replace(/\B(?=(\d{3})+(?!\d))/g," ")}}},Jc=e=>(er("data-v-b9414618"),e=e(),rr(),e),bmt=$(" Observations: "),wmt=Jc(()=>_("abbr",{class:"tooltip",title:"Enter comma-separated resource values (0..100 range) observed evenly across all worker-active time.\nThe order does not matter, but repeat occurence of same value does.\nYou can sneak in newlines and comments like `evening,0,0.1,2, morning,3,22,0` - text will be stored, but ignored in calculations."},"\u2139",-1)),Smt=Jc(()=>_("br",null,null,-1)),Tmt=["value"],kmt=Jc(()=>_("span",{style:{"line-height":"200%"}},"Breakpoints:",-1)),Pmt={class:"fsxs tar"},Emt=Jc(()=>_("th",null,"work time",-1)),Cmt=Jc(()=>_("th",null,"workload \u2264",-1)),Amt=Jc(()=>_("th",null,"resource \u2265",-1)),xmt=Jc(()=>_("th",null,"chance",-1));function Mmt(e,t,r,n,i,o){const a=Gt("v-chart");return I(),O(W,null,[bmt,wmt,Smt,_("textarea",{value:this.userStore.regionResources2[this.rgk],onInput:t[0]||(t[0]=s=>o.updStore(s.target.value)),class:"multiline"},`
  `,40,Tmt),_("div",null,[ht(a,{class:"chart hmid",option:o.chartOption},null,8,["option"])]),kmt,_("table",Pmt,[_("tr",null,[Emt,(I(!0),O(W,null,Pt(o.tierResources.filter(s=>s.time),s=>(I(),O("td",null,M(10*s.tier)+" min",1))),256))]),_("tr",null,[Cmt,(I(!0),O(W,null,Pt(o.tierResources.filter(s=>s.time),s=>(I(),O("td",null,M(o.formatFixed(s.wld,2)),1))),256))]),_("tr",null,[Amt,(I(!0),O(W,null,Pt(o.tierResources.filter(s=>s.time),s=>(I(),O("td",null,M(o.formatFixed(100*s.mod,2)),1))),256))]),_("tr",null,[xmt,(I(!0),O(W,null,Pt(o.tierResources.filter(s=>s.time),s=>(I(),O("td",null,M(o.formatFixed(s.time,2))+"%",1))),256))])])],64)}const Sx=le(_mt,[["render",Mmt],["__scopeId","data-v-b9414618"]]);const Imt={setup(){const e=ee(),t=mr();return{gameStore:At(),userStore:e,routingStore:t}},components:{FloatingResourceEdit:Sx,WorkerJobDescription:Mb},props:{workerEditing:Object,workerInitial:Object,show:{type:Boolean,default:!1}},computed:{newProfit(){return this.profit(this.workerEditing)},initialProfit(){return this.profit(this.workerInitial)},currentWspdBonus(){var e="farm";if(this.gameStore.jobIsWorkshop(this.workerEditing.job)){const r=this.workerEditing.job.hk;e=this.userStore.userWorkshops[r].industry}return this.gameStore.wspdBonus(this.workerEditing,e)},statRank(){return this.gameStore.workerStatRank(this.workerEditing)}},data:()=>({wasChanged:!1,showChartPane:!1,prerelease_charkind:!0,prerelease_skillicon:!1}),watch:{workerEditing:{handler(e,t){this.wasChanged=JSON.stringify(e)!==JSON.stringify(this.workerInitial)},deep:!0},workerInitial:{handler(e,t){this.wasChanged=JSON.stringify(e)!==JSON.stringify(this.workerEditing)},deep:!0}},methods:{formatFixed:dt,randBetween:_l,levelup:kg,spaceSep(e,t){return dt(e*1e6,0,t).replace(/\B(?=(\d{3})+(?!\d))/g," ")},revert(){for(const[e,t]of Object.entries(this.workerInitial))typeof t=="object"?this.workerEditing[e]=JSON.parse(JSON.stringify(t)):this.workerEditing[e]=t},profit(e){if(this.gameStore.jobIsPz(e.job)){const t=this.gameStore.workerStatsOnPlantzone(e);return this.gameStore.profitPzTownStats(e.job.pzk,e.tnk,t.wspd,t.mspd,t.luck,this.gameStore.isGiant(e.charkey))}if(this.gameStore.jobIsWorkshop(e.job)){const t=e.job.hk,r=this.userStore.userWorkshops[t];return this.gameStore.profitWorkshopWorker(t,r,e)}},maxSkillsAtLevel(e){return 1+Math.floor(e/5)},suggestBestSkills(e,t){const r=this.maxSkillsAtLevel(e),n={0:{skills:[]}},i=["wspd"];t&&i.push("wspd_farm");const o=[];for(const[c,f]of Object.entries(this.gameStore.skillData))i.some(h=>f.hasOwnProperty(h)&&o.push({key:c,amount:f[h],mspd:f.hasOwnProperty("mspd")?f.mspd:0}));o.sort(function(c,f){return f.amount!=c.amount?f.amount-c.amount:f.mspd-c.mspd});for(let c=1;c<=r;c++){const f=o.slice(0,c).map(({key:d})=>d),h=this.profit({...this.workerEditing,skills:f}).priceDaily;if(n[c]={skills:f,daily:h},f.every(d=>!this.gameStore.skillData[d].hasOwnProperty("mspd"))){const d=[...f],p=o.filter(g=>g.mspd>0);if(p.length>0){d[d.length-1]=p[0];const g=this.profit({...this.workerEditing,skills:d}).priceDaily;g>h&&(n[c]={skills:d,daily:g},console.log("using wmSkill"))}}}console.log("wBonuses",n);const a=["mspd","luck"],s=new Set;for(const[c,f]of Object.entries(this.gameStore.skillData))a.some(d=>f.hasOwnProperty(d))&&s.add(c);console.log("mlSkills",s);const l=[n[r]],u=[];for(let c=1;c<=r;c++){const f=[...n[r-c].skills,...u],h=[];for(const d of s){if(n[r-c].skills.some(m=>m==d))continue;const p=[...f,d],g=this.profit({...this.workerEditing,skills:p}).priceDaily;h.push({sk:d,daily:g})}if(h.length>0){h.sort((g,m)=>m.daily-g.daily);const d=h[0].sk,p=[...f,d];l[c]={skills:p,daily:h[0].daily},u.push(d),s.delete(d)}else u.push(0)}if(l.sort((c,f)=>f.daily-c.daily),l.length>0){const c=new Set(l[0].skills);console.log(c);const f=new Array(c.size);for(let d=0;d<r;d++){const p=String(this.workerEditing.skills[d]);c.has(p)&&(f[d]=Number(p),c.delete(p))}console.log(this.workerEditing.skills,c);const h=[...c];for(let d=0;d<r;d++)f[d]==null&&(f[d]=Number(h.shift()),document.querySelector("#skill"+d).classList.add("anim"),setTimeout(()=>{document.querySelector("#skill"+d).classList.remove("anim")},500));this.workerEditing.skills=f}else console.log("worker skills optimization failed")},recalcStats(e,t){if(this.workerEditing.level>1){const r=t-1,n=this.gameStore.workerStatic[this.workerEditing.charkey],i=this.gameStore.workerStatic[e],o=this.workerEditing.wspdSheet*1e6-n.wspd,a=i.wspd_lo*r,s=i.wspd_hi*r,l=a+(s-a)*this.statRank.wspd_rank,u=i.mspd_lo*r,c=i.mspd_hi*r,f=u+(c-u)*this.statRank.mspd_rank,h=this.workerEditing.luckSheet*1e4-n.luck,d=i.luck_lo*r,p=i.luck_hi*r,g=d+(p-d)*this.statRank.luck_rank;console.log(`recalculating levelups: 
        ${i.wspd/1e6}+${r}*[${i.wspd_lo/1e6}\u2026${i.wspd_hi/1e6}]*${Math.round(this.statRank.wspd_rank*1e3)/10}%\u{1F528} 
        ${i.mspd/100}+${r}*[${i.mspd_lo/1e6}\u2026${i.mspd_hi/1e6}]*${Math.round(this.statRank.wspd_rank*1e3)/10}%\u{1F9B6} 
        ${i.luck/1e4}+${r}*[${i.luck_lo/1e4}\u2026${i.luck_hi/1e4}]*${Math.round(this.statRank.luck_rank*1e3)/10}%\u{1F340}`),this.workerEditing.wspdSheet+=(i.wspd-n.wspd+l-o)/1e6,this.workerEditing.mspdSheet=i.mspd/100*(1+f/1e6),this.workerEditing.luckSheet+=(i.luck-n.luck+g-h)/1e4}else this.workerEditing.wspdSheet+=(stat_new.wspd-stat_old.wspd)/1e6,this.workerEditing.mspdSheet=stat_new.mspd*(this.workerEditing.mspdSheet/stat_old.mspd),this.workerEditing.luckSheet+=(stat_new.luck-stat_old.luck)/1e4,kg(this.gameStore,this.workerEditing,t);this.workerEditing.wspdSheet=Math.round(this.workerEditing.wspdSheet*100)/100,this.workerEditing.mspdSheet=Math.round(this.workerEditing.mspdSheet*100)/100,this.workerEditing.luckSheet=Math.round(this.workerEditing.luckSheet*100)/100,this.workerEditing.charkey=e,this.workerEditing.level=t,this.limitSkillCount()},limitSkillCount(){const e=1+Math.floor(this.workerEditing.level/5);this.workerEditing.skills.length>e&&this.workerEditing.skills.splice(e)},levelupMe(e){this.limitSkillCount(),kg(this.gameStore,this.workerEditing,e),this.workerEditing.wspdSheet=Math.floor(this.workerEditing.wspdSheet*100)/100,this.workerEditing.mspdSheet=Math.floor(this.workerEditing.mspdSheet*100)/100,this.workerEditing.luckSheet=Math.floor(this.workerEditing.luckSheet*100)/100},setStatsRandom(){const e=this.workerEditing,t=this.gameStore.workerStatic[e.charkey];let r=t.wspd,n=0,i=t.luck;for(let a=2;a<=e.level;a++)r+=_l(t.wspd_lo,t.wspd_hi),n+=_l(t.mspd_lo,t.mspd_hi),i+=_l(t.luck_lo,t.luck_hi);let o=t.mspd*(1+n/1e6);e.wspdSheet=Math.round(r/1e6*100)/100,e.mspdSheet=Math.round(o)/100,e.luckSheet=Math.round(i/1e4*100)/100},setStatsMedian(){const e=this.workerEditing,t=this.gameStore.workerStatic[e.charkey];let r=t.wspd,n=0,i=t.luck;for(let a=2;a<=e.level;a++)r+=(t.wspd_lo+t.wspd_hi)/2,n+=(t.mspd_lo+t.mspd_hi)/2,i+=(t.luck_lo+t.luck_hi)/2;let o=t.mspd*(1+n/1e6);e.wspdSheet=Math.round(r/1e6*100)/100,e.mspdSheet=Math.round(o)/100,e.luckSheet=Math.round(i/1e4*100)/100}}},jr=e=>(er("data-v-47add1fa"),e=e(),rr(),e),Lmt={key:0,id:"columns"},Omt={id:"worker"},Rmt={class:"borderless"},Dmt=jr(()=>_("td",null,"name:",-1)),Nmt={style:{float:"right"}},Fmt=jr(()=>_("td",null,"type:",-1)),$mt=["value"],Bmt=["value"],zmt={key:0},Vmt=jr(()=>_("td",null,"stash:",-1)),Umt=["value"],Wmt=jr(()=>_("td",null,"job:",-1)),jmt=$(" idle "),Gmt={key:0},Hmt={key:1},Xmt=$(" \u270D\uFE0F "),Ymt=$(" @ "),Kmt=$("M$/day "),Zmt=$("CP "),qmt=$(" [\u{1F33B}] "),Jmt=["value"],Qmt=jr(()=>_("abbr",{class:"tooltip",title:"see Settings > \u{1F3ED}Workshops"},"\u2139",-1)),t1t={class:"fsxs"},e1t=$(" \u270D\uFE0F "),r1t=$(" @ "),n1t=$("M$/day "),i1t=$("CP "),o1t=$(" UNKNOWN_JOBTYPE "),a1t={key:1},s1t=jr(()=>_("td",null,"cycle:",-1)),l1t={key:0},u1t=$(" minutes "),c1t={key:2},f1t=jr(()=>_("td",null,"$/day:",-1)),h1t={key:0},d1t={colspan:"2"},p1t={key:0,class:"borderless"},g1t=jr(()=>_("tr",null,[_("th",null,"stats:"),_("th",{class:"fsxs"},"rank"),_("th",null,"sheet"),_("th",null,"+"),_("th",null,"skill"),_("th",null,"="),_("th",null,"final"),_("th")],-1)),v1t={class:"center"},m1t={rowspan:"3"},y1t=jr(()=>_("br",null,null,-1)),_1t={class:"fsxs"},b1t=jr(()=>_("td",null,null,-1)),w1t=jr(()=>_("td",null,null,-1)),S1t=jr(()=>_("td",null,"\u{1F528}",-1)),T1t={class:"center"},k1t={class:"fsxs"},P1t=jr(()=>_("td",null,null,-1)),E1t=jr(()=>_("td",null,null,-1)),C1t=jr(()=>_("td",null,"\u{1F9B6}",-1)),A1t={class:"center"},x1t={class:"fsxs"},M1t=jr(()=>_("td",null,null,-1)),I1t=jr(()=>_("td",null,null,-1)),L1t=jr(()=>_("td",null,"\u{1F340}",-1)),O1t={class:"center"},R1t=jr(()=>_("td",null,"skills:",-1)),D1t={style:{float:"right"}},N1t=["disabled"],F1t={colspan:"2",s:""},$1t=["id","onUpdate:modelValue"],B1t=["value"],z1t=["src"],V1t=$(" use floating resource for this regionGroup "),U1t={key:0,id:"chartPane"};function W1t(e,t,r,n,i,o){const a=Gt("WorkerJobDescription"),s=Gt("FloatingResourceEdit");return r.workerEditing?(I(),O("div",Lmt,[_("div",Omt,[_("table",Rmt,[_("tr",null,[Dmt,_("td",null,[at(_("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>r.workerEditing.label=l),style:{width:"10em"}},null,512),[[zt,r.workerEditing.label]]),$(" lvl."+M(r.workerEditing.level)+" ",1),_("button",{onClick:t[1]||(t[1]=l=>o.levelupMe(r.workerEditing.level+1))},"\u{1F815}"),_("button",{onClick:t[2]||(t[2]=l=>o.recalcStats(r.workerEditing.charkey,r.workerEditing.level-1))},"\u{1F817}"),nt("",!0),_("div",Nmt,[e.wasChanged&&r.workerInitial?(I(),O("button",{key:0,onClick:t[4]||(t[4]=l=>o.revert())},"revert")):nt("",!0)])])]),_("tr",null,[Fmt,_("td",null,[e.prerelease_charkind?(I(),O("select",{key:0,onChange:t[5]||(t[5]=l=>o.recalcStats(l.target.value,r.workerEditing.level)),value:r.workerEditing.charkey},[(I(!0),O(W,null,Pt(n.gameStore.workerStatic,(l,u)=>(I(),O("option",{value:u},M(u)+" "+M(n.gameStore.uloc.char[u])+" "+M(l.wspd/1e6)+" / "+M(l.mspd/100)+" / "+M(l.luck/1e4),9,Bmt))),256))],40,$mt)):(I(),O(W,{key:1},[$(M(n.gameStore.uloc.char[r.workerEditing.charkey]),1)],64))])]),r.workerEditing.job&&n.gameStore.jobIsPz(r.workerEditing.job)?(I(),O("tr",zmt,[Vmt,_("td",null,[at(_("select",{"onUpdate:modelValue":t[6]||(t[6]=l=>r.workerEditing.job.storage=l)},[(I(!0),O(W,null,Pt(n.gameStore.townsWithRedirectableStorage,l=>(I(),O("option",{value:l},M(n.gameStore.uloc.node[l]),9,Umt))),256))],512),[[cr,r.workerEditing.job.storage]])])])):nt("",!0),_("tr",null,[Wmt,_("td",null,[n.gameStore.jobIsIdle(r.workerEditing.job)?(I(),O(W,{key:0},[jmt],64)):n.gameStore.jobIsPz(r.workerEditing.job)?(I(),O(W,{key:1},[$(M(n.gameStore.plantzoneName(r.workerEditing.job.pzk))+" / ",1),n.gameStore.ready&&r.workerEditing.job&&r.workerEditing.job.pzk&&n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup&&n.userStore.allowFloating&&n.userStore.useFloatingResources[n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup]?(I(),O("span",Gmt,[$(" ~"+M(o.formatFixed(n.userStore.medianWorkloads[r.workerEditing.job.pzk],2))+" ",1),_("span",{id:"spoiler",onClick:t[7]||(t[7]=l=>e.showChartPane=!e.showChartPane)},M(e.showChartPane?"\u25C0":"\u25B6"),1)])):(I(),O("span",Hmt,M(o.formatFixed(n.gameStore.plantzones[r.workerEditing.job.pzk].activeWorkload,2)),1))],64)):n.gameStore.jobIsCustom(r.workerEditing.job)?(I(),O(W,{key:2},[Xmt,at(_("input",{class:"workshop-label-input","onUpdate:modelValue":t[8]||(t[8]=l=>r.workerEditing.job.label=l)},null,512),[[zt,r.workerEditing.job.label]]),Ymt,at(_("input",{type:"number",class:"float4",step:"0.1","onUpdate:modelValue":t[9]||(t[9]=l=>r.workerEditing.job.profit=l)},null,512),[[zt,r.workerEditing.job.profit,void 0,{number:!0}]]),Kmt,at(_("input",{type:"number",class:"float4","onUpdate:modelValue":t[10]||(t[10]=l=>r.workerEditing.job.cp=l)},null,512),[[zt,r.workerEditing.job.cp,void 0,{number:!0}]]),Zmt],64)):n.gameStore.jobIsFarming(r.workerEditing.job)?(I(),O(W,{key:3},[qmt],64)):n.gameStore.jobIsWorkshop(r.workerEditing.job)?(I(),O(W,{key:4},[at(_("select",{"onUpdate:modelValue":t[11]||(t[11]=l=>r.workerEditing.job.recipe=l),style:{width:"13em"}},[(I(!0),O(W,null,Pt(n.gameStore.craftOutputs,(l,u)=>(I(),O("option",{value:u},M(n.gameStore.uloc.recipe[u]),9,Jmt))),256))],512),[[cr,r.workerEditing.job.recipe]]),ht(a,{w:r.workerEditing},null,8,["w"]),$(" / "+M(n.userStore.userWorkshops[r.workerEditing.job.hk].manualWorkload)+" ",1),Qmt,_("span",t1t," [type: "+M(n.userStore.userWorkshops[r.workerEditing.job.hk].industry)+"] ",1)],64)):n.gameStore.jobIsCustom(r.workerEditing.job)?(I(),O(W,{key:5},[e1t,at(_("input",{class:"workshop-label-input","onUpdate:modelValue":t[12]||(t[12]=l=>r.workerEditing.job.label=l)},null,512),[[zt,r.workerEditing.job.label]]),r1t,at(_("input",{type:"number",class:"float4",step:"0.1","onUpdate:modelValue":t[13]||(t[13]=l=>r.workerEditing.job.profit=l)},null,512),[[zt,r.workerEditing.job.profit,void 0,{number:!0}]]),n1t,at(_("input",{type:"number",class:"float4","onUpdate:modelValue":t[14]||(t[14]=l=>r.workerEditing.job.cp=l)},null,512),[[zt,r.workerEditing.job.cp,void 0,{number:!0}]]),i1t],64)):(I(),O(W,{key:6},[o1t],64))])]),r.workerEditing.job&&n.gameStore.jobIsPz(r.workerEditing.job)||n.gameStore.jobIsWorkshop(r.workerEditing.job)?(I(),O("tr",a1t,[s1t,_("td",null,[$(M(o.formatFixed(24*60/o.initialProfit.cyclesDaily,1))+" ",1),o.newProfit.cyclesDaily!=o.initialProfit.cyclesDaily?(I(),O("span",l1t," \u2192 "+M(o.formatFixed(24*60/o.newProfit.cyclesDaily,1)),1)):nt("",!0),u1t])])):nt("",!0),r.workerEditing.job?(I(),O("tr",c1t,[f1t,_("td",null,[n.gameStore.jobIsPz(r.workerEditing.job)||n.gameStore.jobIsWorkshop(r.workerEditing.job)?(I(),O(W,{key:0},[$(M(o.spaceSep(o.initialProfit.priceDaily))+" ",1),o.newProfit.priceDaily!=o.initialProfit.priceDaily?(I(),O("span",h1t,[$(" \u2192 "+M(o.spaceSep(o.newProfit.priceDaily))+" ",1),_("span",{class:Ur({greenText:o.newProfit.priceDaily>o.initialProfit.priceDaily,redText:o.newProfit.priceDaily<o.initialProfit.priceDaily,fsxs:1})},M(o.formatFixed(100*(o.newProfit.priceDaily-o.initialProfit.priceDaily)/o.initialProfit.priceDaily,2,!0))+"% ",3)])):nt("",!0)],64)):n.gameStore.jobIsFarming(r.workerEditing.job)?(I(),O(W,{key:1},[$(M(o.spaceSep(n.userStore.workerIncome(r.workerEditing))),1)],64)):nt("",!0)])])):nt("",!0),_("tr",null,[_("td",d1t,[n.gameStore.ready?(I(),O("table",p1t,[g1t,_("tr",v1t,[_("td",m1t,[_("button",{onClick:t[15]||(t[15]=l=>o.setStatsMedian()),class:"fsxxs"},"median"),y1t,_("button",{onClick:t[16]||(t[16]=l=>o.setStatsRandom()),class:"fsxxs"},"random")]),_("td",_1t,M(o.formatFixed(o.statRank.wspd_rank*100,1))+"% ",1),_("td",null,[at(_("input",{type:"number","onUpdate:modelValue":t[17]||(t[17]=l=>r.workerEditing.wspdSheet=l),step:"0.01",class:"w5em right"},null,512),[[zt,r.workerEditing.wspdSheet]])]),b1t,_("td",null,M(o.formatFixed(o.currentWspdBonus,2)),1),w1t,_("td",null,M(o.formatFixed(r.workerEditing.wspdSheet+o.currentWspdBonus,2)),1),S1t]),_("tr",T1t,[_("td",k1t,M(o.formatFixed(o.statRank.mspd_rank*100,1))+"% ",1),_("td",null,[at(_("input",{type:"number","onUpdate:modelValue":t[18]||(t[18]=l=>r.workerEditing.mspdSheet=l),step:"0.01",class:"w5em right"},null,512),[[zt,r.workerEditing.mspdSheet]])]),P1t,_("td",null,M(o.formatFixed(n.gameStore.mspdBonus(r.workerEditing),1))+"%",1),E1t,_("td",null,M(o.formatFixed(n.gameStore.workerStatic[r.workerEditing.charkey].mspd/100*(r.workerEditing.mspdSheet/(n.gameStore.workerStatic[r.workerEditing.charkey].mspd/100)+n.gameStore.mspdBonus(r.workerEditing)/100),2)),1),C1t]),_("tr",A1t,[_("td",x1t,M(o.formatFixed(o.statRank.luck_rank*100,1))+"% ",1),_("td",null,[at(_("input",{type:"number","onUpdate:modelValue":t[19]||(t[19]=l=>r.workerEditing.luckSheet=l),step:"0.01",class:"w5em right"},null,512),[[zt,r.workerEditing.luckSheet]])]),M1t,_("td",null,M(o.formatFixed(n.gameStore.luckBonus(r.workerEditing),2)),1),I1t,_("td",null,M(o.formatFixed(r.workerEditing.luckSheet+n.gameStore.luckBonus(r.workerEditing),2)),1),L1t])])):nt("",!0)])]),_("tr",O1t,[R1t,_("td",null,[_("div",D1t,[_("button",{disabled:!(r.workerEditing.job&&r.workerEditing.job.pzk in this.routingStore.pzJobs),onClick:t[20]||(t[20]=l=>o.suggestBestSkills(r.workerEditing.level,!0))}," optimize ",8,N1t)])])]),(I(),O(W,null,Pt(9,l=>_("tr",null,[_("td",F1t,[at(_("select",{id:"skill"+(l-1),"onUpdate:modelValue":u=>r.workerEditing.skills[l-1]=u,class:"w30em animable",style:{width:"30em"}},[(I(!0),O(W,null,Pt(n.gameStore.availableSkillPool(r.workerEditing.skills,r.workerEditing.skills[l-1]),u=>(I(),O("option",{value:u},M(n.gameStore.uloc.skill[u]+" / "+n.gameStore.uloc.skilldesc[u]),9,B1t))),256))],8,$1t),[[cr,r.workerEditing.skills[l-1]]]),e.prerelease_skillicon?(I(),O("img",{key:0,src:`data/icons/skill/${r.workerEditing.skills[l-1]}.png`,width:"22",height:"22"},null,8,z1t)):nt("",!0)])])),64))]),n.gameStore.ready&&r.workerEditing.job&&n.gameStore.jobIsPz(r.workerEditing.job)&&r.workerEditing.job.pzk in n.gameStore.plantzones&&n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup&&n.userStore.allowFloating?(I(),O(W,{key:0},[at(_("input",{type:"checkbox","onUpdate:modelValue":t[21]||(t[21]=l=>n.userStore.useFloatingResources[n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup]=l)},null,512),[[Ge,n.userStore.useFloatingResources[n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup]]]),V1t],64)):nt("",!0)]),e.showChartPane&&n.gameStore.ready&&r.workerEditing.job&&r.workerEditing.job.pzk&&r.workerEditing.job.pzk in n.gameStore.plantzones&&n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup&&n.userStore.useFloatingResources[n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup]?(I(),O("div",U1t,[ht(s,{rgk:n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup,wspd:r.workerEditing.wspdSheet+o.currentWspdBonus,workload:n.gameStore.plantzones[r.workerEditing.job.pzk].workload,show:!0},null,8,["rgk","wspd","workload"])])):nt("",!0)])):nt("",!0)}const aj=le(Imt,[["render",W1t],["__scopeId","data-v-47add1fa"]]);const j1t={setup(){const e=ee(),t=mr();return{gameStore:At(),userStore:e,routingStore:t}},props:{w:Object,defaultRedirect:Number,show:{type:Boolean,default:!1}},components:{ItemIcon:no},data:()=>({customProfit:0,customCP:0,customLabel:"",selectedRedirect:1}),watch:{show:function(e){e&&(this.selectedRedirect=this.w.tnk)}},methods:{formatFixed:dt,assignWorkerPz(e,t){console.log("assigning to",this.selectedRedirect),this.userStore.assignWorker(e,{kind:"plantzone",pzk:t,storage:this.selectedRedirect}),this.$emit("update:show",!1)},assignWorkerFm(e){this.userStore.assignWorker(e,"farming"),this.$emit("update:show",!1)},assignWorkerCustom(e){this.userStore.assignWorker(e,{kind:"custom",profit:this.customProfit,cp:this.customCP,label:this.customLabel}),this.$emit("update:show",!1)},assignWorkerWorkshop(e,t){this.userStore.assignWorker(e,{kind:"workshop",hk:t,recipe:void 0}),this.$emit("update:show",!1)},workshopBusy(e){return this.userStore.userWorkers.some(t=>t.job&&t.job.kind=="workshop"&&t.job.hk==e)}},computed:{thisFarmSelectionEntry(){return this.gameStore.farmSelectionEntry(this.gameStore.tnk2tk(this.w.tnk))},addBedHereInfo(){return this.gameStore.addBedInfo(this.gameStore.tnk2tk(this.w.tnk))},workerNearestCpPlantzonesProfit(){const e=[];if(!this.w)return e;const t=Date.now(),r=16,n=this.gameStore.workerStatsOnPlantzone(this.w),i=this.gameStore.tnk2tk(this.w.tnk),o=this.gameStore.tnk2tk(this.selectedRedirect);return this.gameStore.dijDiscountedNearestPlantzones(this.w.tnk,80).forEach(([s,l,u])=>{if(this.userStore.workedPlantzones.has(s.toString()))return;const c=this.gameStore.pzSelectionEntry(s,i,this.w.tnk,l,u,this.w,n,o);c.profit.dist>1e6||e.push(c)}),e.sort((s,l)=>l.dailyPerCp-s.dailyPerCp),console.log("cpt: workerNearestCpPlantzonesProfit took",Date.now()-t,"ms"),e.slice(0,r)},workerWorkshopsProfit(){const e=[];if(!this.w)return e;const t=this.gameStore.tnk2tk(this.w.tnk),r=Date.now(),n=16,i=new Set([...this.routingStore.routing.autotakenNodes]);for(const[o,a]of Object.entries(this.userStore.userWorkshops)){const s=Number(o);if(this.workshopBusy(s)&&a.industry!="mass"||this.gameStore.houseDistance(this.w.tnk,s)>1e6)continue;const l=this.gameStore.houseInfo[s].affTown,u=this.gameStore.tk2tnk(l),c=this.userStore.occupiedWorkshops.has(Number(s))?0:a.manualCp,[f,h]=this.gameStore.dijkstraPath(u,this.w.tnk,i),d=this.gameStore.workshopSelectionEntry(s,t,this.w.tnk,f,this.w,h,c);e.push(d)}return e.sort((o,a)=>a.dailyPerCp-o.dailyPerCp),console.log("cpt: workerWorkshopsProfit took",Date.now()-r,"ms"),console.log("workerWorkshopsProfit",e),e.slice(0,n)}}},Gn=e=>(er("data-v-ac053731"),e=e(),rr(),e),G1t={class:"spaced-columns"},H1t=$(" ) where?"),X1t=Gn(()=>_("br",null,null,-1)),Y1t=$(" stash: "),K1t=["value"],Z1t=Gn(()=>_("th",null,"node",-1)),q1t=Gn(()=>_("th",null,"workload",-1)),J1t=Gn(()=>_("th",null,"walk",-1)),Q1t=Gn(()=>_("th",null,"+M$/day",-1)),tyt=Gn(()=>_("th",null,"+CP",-1)),eyt=Gn(()=>_("th",null,"M$/day/CP",-1)),ryt=Gn(()=>_("th",null,"action",-1)),nyt=["href"],iyt=$(M(" ")+" "),oyt={class:"tac"},ayt={class:"tac"},syt={class:"tac"},lyt={class:"tac"},uyt=["title"],cyt=$("+"),fyt=["title"],hyt={class:"tac"},dyt=["onClick"],pyt=Gn(()=>_("tr",null,[_("td",{colspan:"7",class:"center"},"Special jobs (not node based)")],-1)),gyt={key:0},vyt=Gn(()=>_("td",null,[$(" \u{1F33B} Farm "),_("abbr",{title:"see Settings page: singleWorkerProfit = (fullWorkersProfit - noWorkersProfit) / 10",class:"tooltip"},"\u2139")],-1)),myt=Gn(()=>_("td",{class:"tac"},"x",-1)),yyt=Gn(()=>_("td",{class:"tac"},"x",-1)),_yt={class:"tac"},byt={class:"tac"},wyt=["title"],Syt={class:"tac"},Tyt={class:"tac"},kyt={class:"tac"},Pyt={class:"tac"},Eyt={class:"tac"},Cyt=["title"],Ayt=$("+"),xyt={class:"tooltip",title:`cost of operating the workshop
(see Settings > \u{1F3ED}Workshops)`},Myt=$("+"),Iyt=["title"],Lyt={class:"tac"},Oyt=["onClick"],Ryt=$(" \u270D\uFE0F Custom job "),Dyt=Gn(()=>_("abbr",{title:"enter daily profit and CP cost for this specific job PER ONE WORKER",class:"tooltip"},"\u2139",-1)),Nyt={style:{float:"right"}},Fyt=$(" \xA0label: "),$yt=Gn(()=>_("td",{class:"tac"},"x",-1)),Byt=Gn(()=>_("td",{class:"tac"},"x",-1)),zyt={class:"tac"},Vyt={class:"tac"},Uyt=$("+"),Wyt=["title"],jyt={class:"tac"};function Gyt(e,t,r,n,i,o){const a=Gt("ItemIcon"),s=Gt("RouterLink");return r.w?(I(),O(W,{key:0},[_("div",G1t,[_("div",null,[$(" Send "+M(r.w.label)+" ( ",1),n.userStore.displayWorkerStatsForPz?(I(),O(W,{key:0},[$(M(o.formatFixed(n.gameStore.workerStatsOnPlantzone(r.w).wspd,2))+"\u{1F528} "+M(o.formatFixed(n.gameStore.workerStatsOnPlantzone(r.w).mspd,2))+"\u{1F9B6} "+M(o.formatFixed(n.gameStore.workerStatsOnPlantzone(r.w).luck,2))+"\u{1F340} ",1)],64)):(I(),O(W,{key:1},[$(M(o.formatFixed(r.w.wspdSheet,2))+"\u{1F528} "+M(o.formatFixed(r.w.mspdSheet,2))+"\u{1F9B6} "+M(o.formatFixed(r.w.luckSheet,2))+"\u{1F340} ",1)],64)),H1t,X1t,$(" "+M(o.workerNearestCpPlantzonesProfit.length)+" top untaken nodes near "+M(n.gameStore.uloc.node[r.w.tnk])+": ",1)]),_("div",null,[Y1t,at(_("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>e.selectedRedirect=l)},[(I(!0),O(W,null,Pt(n.gameStore.townsWithRedirectableStorageSet,l=>(I(),O("option",{value:l},M(n.gameStore.uloc.node[l]),9,K1t))),256))],512),[[cr,e.selectedRedirect]])])]),_("table",null,[_("tr",null,[Z1t,q1t,J1t,Q1t,tyt,eyt,nt("",!0),ryt]),(I(!0),O(W,null,Pt(o.workerNearestCpPlantzonesProfit,l=>(I(),O("tr",null,[_("td",null,[_("a",{href:this.userStore.codexNodeUrl+l.pz.key},M(l.pz.name),9,nyt),(I(!0),O(W,null,Pt(this.gameStore.plantzones[l.pz.key].itemkeys,u=>(I(),O(W,null,[iyt,ht(s,{tag:"a",to:{path:"./settings",hash:"#item"+u}},{default:Fe(()=>[ht(a,{ik:Number(u)},null,8,["ik"])]),_:2},1032,["to"])],64))),256))]),_("td",oyt,M(n.userStore.useFloatingResources[l.pz.regiongroup]?"~":"")+M(o.formatFixed(n.userStore.medianWorkloads[l.pz.key],2)),1),_("td",ayt,M(o.formatFixed(l.profit.dist,0)),1),_("td",syt,M(o.formatFixed(l.profit.priceDaily,2)),1),_("td",lyt,[_("abbr",{title:Array.from(l.path,u=>`${n.routingStore.routing.autotakenNodes.has(u)?0:n.gameStore.nodes[u].CP} ${n.gameStore.uloc.node[u]}`).join(`
`),class:"tooltip"},M(l.mapCp),9,uyt),cyt,_("abbr",{title:l.infraTooltip,class:"tooltip"},M(o.formatFixed(l.townCp)),9,fyt),$("="+M(o.formatFixed(l.cp)),1)]),_("td",hyt,M(o.formatFixed(l.dailyPerCp,2)),1),nt("",!0),_("td",null,[_("button",{onClick:u=>o.assignWorkerPz(r.w,l.pz.key)},"assign",8,dyt)])]))),256)),pyt,n.userStore.farmingEnable&&n.userStore.workersFarmingCount<10?(I(),O("tr",gyt,[vyt,myt,yyt,_("td",_yt,M(o.formatFixed(o.thisFarmSelectionEntry.income,2)),1),_("td",byt,[_("abbr",{title:o.thisFarmSelectionEntry.infraTooltip,class:"tooltip"},M(o.formatFixed(o.thisFarmSelectionEntry.infraCp)),9,wyt)]),_("td",Syt,M(o.formatFixed(o.thisFarmSelectionEntry.dailyPerCp,2)),1),nt("",!0),_("td",null,[_("button",{onClick:t[1]||(t[1]=l=>o.assignWorkerFm(r.w))},"assign")])])):nt("",!0),(I(!0),O(W,null,Pt(o.workerWorkshopsProfit,l=>(I(),O("tr",null,[_("td",null," \u{1F3ED} "+M(n.gameStore.uloc.char[l.hk])+" "+M(l.workshop.label),1),_("td",Tyt,M(l.workshop.manualWorkload),1),_("td",kyt,M(o.formatFixed(l.profit.distance,0)),1),_("td",Pyt,M(o.formatFixed(l.profit.priceDaily,2)),1),_("td",Eyt,[_("abbr",{class:"tooltip",title:`connection cost:
`+Array.from(l.path,u=>`${n.routingStore.routing.autotakenNodes.has(u)?0:n.gameStore.nodes[u].CP} ${n.gameStore.uloc.node[u]}`).join(`
`)},M(l.mapCp),9,Cyt),Ayt,_("abbr",xyt,M(o.formatFixed(l.houseCp,2,!1,!0)),1),Myt,_("abbr",{title:l.infraTooltip,class:"tooltip"},M(l.townCp),9,Iyt),$("="+M(o.formatFixed(l.cp,2,!1,!0)),1)]),_("td",Lyt,M(o.formatFixed(l.dailyPerCp,2)),1),nt("",!0),_("td",null,[_("button",{onClick:u=>o.assignWorkerWorkshop(r.w,l.hk)},"assign",8,Oyt)])]))),256)),_("tr",null,[_("td",null,[Ryt,Dyt,_("div",Nyt,[Fyt,at(_("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>e.customLabel=l),class:"workshop-label-input"},null,512),[[zt,e.customLabel]])])]),$yt,Byt,_("td",zyt,[at(_("input",{type:"number",class:"float4",step:"0.1","onUpdate:modelValue":t[3]||(t[3]=l=>e.customProfit=l)},null,512),[[zt,e.customProfit,void 0,{number:!0}]])]),_("td",Vyt,[at(_("input",{type:"number",class:"float3","onUpdate:modelValue":t[4]||(t[4]=l=>e.customCP=l)},null,512),[[zt,e.customCP,void 0,{number:!0}]]),Uyt,_("abbr",{title:o.addBedHereInfo.tooltip,class:"tooltip"},M(o.formatFixed(o.addBedHereInfo.cost)),9,Wyt),$("="+M(o.formatFixed(e.customCP+o.addBedHereInfo.cost)),1)]),_("td",jyt,M(o.formatFixed(e.customProfit/(e.customCP+o.addBedHereInfo.cost),2)),1),nt("",!0),_("td",null,[_("button",{onClick:t[5]||(t[5]=l=>o.assignWorkerCustom(r.w))},"assign")])])])],64)):nt("",!0)}const Hyt=le(j1t,[["render",Gyt],["__scopeId","data-v-ac053731"]]),Xyt={setup(){const e=ee();return{gameStore:At(),userStore:e}},props:{tk:String,o:Object,show:{type:Boolean,default:!1}},methods:{formatFixed:dt}},Yyt=$(" Connect to nearest town "),Kyt=_("tr",null,[_("th",null,"House"),_("th",null,"\u{1F6CF}\uFE0F"),_("th",null,"CP")],-1),Zyt=["disabled","onUpdate:modelValue"],qyt=$(" "+M(" ")+" "),Jyt=["href"],Qyt=["disabled"],t_t=$(" P2W slots \u2192 Total: ");function e_t(e,t,r,n,i,o){return r.o?(I(),O(W,{key:0},[_("h3",null,M(n.gameStore.uloc.town[r.tk])+" lodging config",1),r.tk==619?(I(),O(W,{key:0},[at(_("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=a=>n.userStore.activateAncado=a)},null,512),[[Ge,n.userStore.activateAncado]]),Yyt],64)):nt("",!0),_("table",null,[Kyt,(I(!0),O(W,null,Pt(r.o.houses,a=>(I(),O("tr",null,[_("td",null,[at(_("input",{type:"checkbox",disabled:r.tk==619&&!n.userStore.activateAncado,"onUpdate:modelValue":s=>n.userStore.lodgingTaken[a.key]=s},null,8,Zyt),[[Ge,n.userStore.lodgingTaken[a.key]]]),qyt,_("a",{href:"https://bdocodex.com/us/npc/"+a.key},M(n.gameStore.uloc.char[a.key]),9,Jyt)]),_("td",null,M(a.lodgingSpaces),1),_("td",null,M(a.CP),1)]))),256)),_("tr",null,[_("td",null,[at(_("input",{type:"number",disabled:r.tk==619&&!n.userStore.activateAncado,"onUpdate:modelValue":t[1]||(t[1]=a=>n.userStore.lodgingP2W[r.tk]=a),class:"short"},null,8,Qyt),[[zt,n.userStore.lodgingP2W[r.tk],void 0,{number:!0}]]),t_t]),_("td",null,M(n.userStore.haveLodging.slots.perTown[r.tk]),1),_("td",null,M(n.userStore.haveLodging.cp.perTown[r.tk]),1)])])],64)):nt("",!0)}const r_t=le(Xyt,[["render",e_t]]);const n_t={setup(){const e=ee();return{gameStore:At(),userStore:e}},props:{tk:Number,show:{type:Boolean,default:!1}},components:{WorkerJobDescription:Mb,ItemIcon:no},data:()=>({}),computed:{wantLodging(){this.tk in this.userStore.lodgingP2W||(this.userStore.lodgingP2W[this.tk]=0);const e=this.userStore.townWorkers(this.tk).length-this.userStore.lodgingP2W[this.tk]-1;return e>0?e:0},wantStorage(){if(!this.userStore.townsStoreItemkeys[this.tk].size)return 0;this.tk in this.userStore.storageP2W||(this.userStore.storageP2W[this.tk]=0),this.tk in this.userStore.storagePersonal||(this.userStore.storagePersonal[this.tk]=0);const e=this.userStore.townsStoreItemkeys[this.tk].size+this.userStore.storagePersonal[this.tk]-this.userStore.storageP2W[this.tk]-this.userStore.baseStorage;return e>0?e:0},bestLookup(){return this.gameStore.lsLookup(this.tk,this.wantLodging,this.wantStorage)},storageViewCount(){const e=this.userStore.baseStorage+this.userStore.storageP2W[this.tk]+this.userStore.townsInfra[this.tk].storage;return isNaN(e)?0:e},ingameSortedItems(){const e=[...this.userStore.townsStoreItemkeys[this.tk]];e.sort((n,i)=>{var o=this.gameStore.itemInfo[i].typePriority-this.gameStore.itemInfo[n].typePriority;if(o)return o;var o=this.gameStore.itemInfo[i].grade-this.gameStore.itemInfo[n].grade;return o||i-n});const t=Array(this.userStore.storagePersonal[this.tk]).fill("P"),r=e.concat(t);return e.length&&r.push("F"),r}},methods:{formatFixed:dt,houseCraftPickedTooltip(e){const t=[];return this.userStore.townsInfra[e].indices.forEach((r,n)=>{if(this.userStore.townsInfra[e].states[n]==0)return;const i=this.userStore.townsInfra[e].states[n]==1?"\u{1F4E6}":"\u{1F6CF}\uFE0F";t.push(i+this.gameStore.uloc.char[r])}),t.join(`
`)},itemTooltip(e,t){const r=this.gameStore.uloc.item[t];let n="";return this.userStore.workingWorkers.forEach(i=>{if(this.gameStore.jobIsPz(i.job)){const o=this.gameStore.tnk2tk(i.job.storage),a=this.gameStore.plantzones[i.job.pzk].itemkeys;if(o==e&&a.has(t)){const s=i.job.pzk;n.length==0&&(n+=` brought by:
`),n+=`${this.gameStore.uloc.node[i.tnk]} worker ${i.label} from ${this.gameStore.parentNodeName(s)}
`}}}),r+n}}},Ln=e=>(er("data-v-32bbd801"),e=e(),rr(),e),i_t={style:{"font-size":"x-large"}},o_t=$(" housing config"),a_t=$(" Connect to nearest town "),s_t={key:2,class:"section"},l_t=Ln(()=>_("h3",null,"\u{1F6CF}\uFE0F lodging",-1)),u_t=Ln(()=>_("br",null,null,-1)),c_t=$(" - 1 initial"),f_t=Ln(()=>_("br",null,null,-1)),h_t=$(" - "),d_t=["disabled"],p_t=$(" from P2W"),g_t=Ln(()=>_("br",null,null,-1)),v_t={key:0},m_t={key:1,class:"red"},y_t=Ln(()=>_("br",null,null,-1)),__t={class:"section"},b_t={id:"storageParent"},w_t={id:"storageLeft"},S_t=Ln(()=>_("h3",null,"\u{1F4E6} storage",-1)),T_t=Ln(()=>_("br",null,null,-1)),k_t=$(" + 1 Free slot"),P_t=Ln(()=>_("br",null,null,-1)),E_t=$(" + "),C_t=$(" Personal items"),A_t=Ln(()=>_("br",null,null,-1)),x_t=Ln(()=>_("span",{class:"markInnate underline"},"initial",-1)),M_t=Ln(()=>_("br",null,null,-1)),I_t=$(" - "),L_t=$(" "+M(" ")),O_t=Ln(()=>_("span",{class:"markP2W underline"},"from P2W",-1)),R_t=Ln(()=>_("br",null,null,-1)),D_t=Ln(()=>_("span",{class:"markProvided underline"},"required",-1)),N_t={key:1},F_t={key:2,class:"red"},$_t=Ln(()=>_("br",null,null,-1)),B_t=Ln(()=>_("span",{class:"markExtra underline"},"extra",-1)),z_t={id:"storageItemList"},V_t={key:0},U_t={key:0,class:"textItem"},W_t={key:1,class:"textItem"},j_t=["title"],G_t={class:"fsxs"};function H_t(e,t,r,n,i,o){Gt("WorkerJobDescription");const a=Gt("ItemIcon");return r.tk>0?(I(),O(W,{key:0},[nt("",!0),_("p",null,[_("span",i_t,M(n.gameStore.uloc.town[r.tk]),1),o_t]),r.tk==619?(I(),O(W,{key:1},[at(_("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=s=>n.userStore.activateAncado=s)},null,512),[[Ge,n.userStore.activateAncado]]),a_t],64)):nt("",!0),r.tk in n.gameStore.lodgingPerTown?(I(),O("div",s_t,[l_t,$(" "+M(n.userStore.townWorkingWorkers(r.tk).length)+" used by workers",1),u_t,c_t,f_t,h_t,at(_("input",{type:"number",class:"w3em",min:"0",max:"20",disabled:r.tk==619&&!n.userStore.activateAncado,"onUpdate:modelValue":t[1]||(t[1]=s=>n.userStore.lodgingP2W[r.tk]=s)},null,8,d_t),[[zt,n.userStore.lodgingP2W[r.tk],void 0,{number:!0}]]),p_t,g_t,$(" = "+M(n.userStore.townsInfra[r.tk].wantLodging)+" required ",1),n.userStore.townsInfra[r.tk].warnL?(I(),O("span",v_t,"\u2190 max possible")):nt("",!0),n.userStore.townsInfra[r.tk].errL?(I(),O("span",m_t,"\u2190 too much!")):nt("",!0),y_t,_("strong",null,M(n.userStore.townsInfra[r.tk].lodging)+" found ",1)])):nt("",!0),_("div",__t,[_("div",b_t,[_("div",w_t,[S_t,$(" "+M(n.userStore.townsStoreItemkeys[r.tk]&&n.userStore.townsStoreItemkeys[r.tk].size)+" worker items",1),T_t,n.userStore.townsStoreItemkeys[r.tk]&&n.userStore.townsStoreItemkeys[r.tk].size>0?(I(),O(W,{key:0},[k_t,P_t],64)):nt("",!0),E_t,at(_("input",{type:"number",class:"w42em",min:"0",max:"192","onUpdate:modelValue":t[2]||(t[2]=s=>n.userStore.storagePersonal[r.tk]=s)},null,512),[[zt,n.userStore.storagePersonal[r.tk],void 0,{number:!0}]]),C_t,A_t,$(" - "+M(n.userStore.baseStorage)+" ",1),x_t,M_t,I_t,at(_("input",{type:"number",class:"w42em",min:"0",max:"192","onUpdate:modelValue":t[3]||(t[3]=s=>n.userStore.storageP2W[r.tk]=s)},null,512),[[zt,n.userStore.storageP2W[r.tk],void 0,{number:!0}]]),L_t,O_t,R_t,$(" = "+M(n.userStore.townsInfra[r.tk].wantStorage)+" ",1),D_t,n.userStore.townsInfra[r.tk].warnS?(I(),O("span",N_t,"\u2190 max possible")):nt("",!0),n.userStore.townsInfra[r.tk].errS?(I(),O("span",F_t,"\u2190 too much!")):nt("",!0),$_t,_("strong",null,M(n.userStore.townsInfra[r.tk].storage)+" found",1),$(" "+M(n.userStore.townsInfra[r.tk].storage-n.userStore.townsInfra[r.tk].wantStorage)+" ",1),B_t]),_("div",z_t,[(I(!0),O(W,null,Pt(o.storageViewCount,s=>(I(),O(W,null,[s>1&&(s-1)%9==0?(I(),O("br",V_t)):nt("",!0),_("div",{class:Ur(["storageCell",{markInnate:0<=s&&s<=n.userStore.baseStorage,markP2W:n.userStore.baseStorage<s&&s<=n.userStore.baseStorage+n.userStore.storageP2W[r.tk],markProvided:n.userStore.baseStorage+n.userStore.storageP2W[r.tk]<s&&s<=n.userStore.baseStorage+n.userStore.storageP2W[r.tk]+n.userStore.townsInfra[r.tk].wantStorage,markExtra:n.userStore.baseStorage+n.userStore.storageP2W[r.tk]+n.userStore.townsInfra[r.tk].wantStorage<s&&s<=n.userStore.baseStorage+n.userStore.storageP2W[r.tk]+n.userStore.townsInfra[r.tk].storage}])},[s-1>o.ingameSortedItems.length?(I(),O("span",U_t)):isNaN(o.ingameSortedItems[s-1])?(I(),O("span",W_t,M(o.ingameSortedItems[s-1]),1)):(I(),O("abbr",{key:2,title:o.itemTooltip(r.tk,o.ingameSortedItems[s-1]),class:"hastooltip"},[ht(a,{ik:Number(o.ingameSortedItems[s-1])},null,8,["ik"])],8,j_t))],2)],64))),256))])])]),_("details",null,[_("summary",null,"Found cost: "+M(n.userStore.townsInfra[r.tk].cost)+" CP",1),_("pre",G_t,M(n.userStore.townsInfra[r.tk].success?o.houseCraftPickedTooltip(r.tk):"FAILED"),1)])],64)):nt("",!0)}const X_t=le(n_t,[["render",H_t],["__scopeId","data-v-32bbd801"]]);function B_(e,t){if(!e)throw new Error(t||"loader assertion failed.")}const Tx=Boolean(typeof process!="object"||String(process)!=="[object process]"||process.browser),rR=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);rR&&parseFloat(rR[1]);const Y_t="3.2.7";function bs(e,t){if(!e)throw new Error(t||"loaders.gl assertion failed.")}const eE=typeof process!="object"||String(process)!=="[object process]"||process.browser,K_t=typeof window<"u"&&typeof window.orientation<"u",nR=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);nR&&parseFloat(nR[1]);function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Z_t{constructor(t,r){x(this,"name",void 0),x(this,"workerThread",void 0),x(this,"isRunning",!0),x(this,"result",void 0),x(this,"_resolve",()=>{}),x(this,"_reject",()=>{}),this.name=t,this.workerThread=r,this.result=new Promise((n,i)=>{this._resolve=n,this._reject=i})}postMessage(t,r){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:r})}done(t){bs(this.isRunning),this.isRunning=!1,this._resolve(t)}error(t){bs(this.isRunning),this.isRunning=!1,this._reject(t)}}class f3{}const h3=new Map;function q_t(e){bs(e.source&&!e.url||!e.source&&e.url);let t=h3.get(e.source||e.url);return t||(e.url&&(t=J_t(e.url),h3.set(e.url,t)),e.source&&(t=sj(e.source),h3.set(e.source,t))),bs(t),t}function J_t(e){if(!e.startsWith("http"))return e;const t=Q_t(e);return sj(t)}function sj(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function Q_t(e){return`try {
  importScripts('`.concat(e,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}function lj(e,t=!0,r){const n=r||new Set;if(e){if(iR(e))n.add(e);else if(iR(e.buffer))n.add(e.buffer);else if(!ArrayBuffer.isView(e)){if(t&&typeof e=="object")for(const i in e)lj(e[i],t,n)}}return r===void 0?Array.from(n):[]}function iR(e){return e?e instanceof ArrayBuffer||typeof MessagePort<"u"&&e instanceof MessagePort||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas:!1}const d3=()=>{};class rE{static isSupported(){return typeof Worker<"u"&&eE||typeof f3!==void 0}constructor(t){x(this,"name",void 0),x(this,"source",void 0),x(this,"url",void 0),x(this,"terminated",!1),x(this,"worker",void 0),x(this,"onMessage",void 0),x(this,"onError",void 0),x(this,"_loadableURL","");const{name:r,source:n,url:i}=t;bs(n||i),this.name=r,this.source=n,this.url=i,this.onMessage=d3,this.onError=o=>console.log(o),this.worker=eE?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=d3,this.onError=d3,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(t,r){r=r||lj(t),this.worker.postMessage(t,r)}_getErrorFromErrorEvent(t){let r="Failed to load ";return r+="worker ".concat(this.name," from ").concat(this.url,". "),t.message&&(r+="".concat(t.message," in ")),t.lineno&&(r+=":".concat(t.lineno,":").concat(t.colno)),new Error(r)}_createBrowserWorker(){this._loadableURL=q_t({source:this.source,url:this.url});const t=new Worker(this._loadableURL,{name:this.name});return t.onmessage=r=>{r.data?this.onMessage(r.data):this.onError(new Error("No data received"))},t.onerror=r=>{this.onError(this._getErrorFromErrorEvent(r)),this.terminated=!0},t.onmessageerror=r=>console.error(r),t}_createNodeWorker(){let t;if(this.url){const n=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);t=new f3(n,{eval:!1})}else if(this.source)t=new f3(this.source,{eval:!0});else throw new Error("no worker");return t.on("message",r=>{this.onMessage(r)}),t.on("error",r=>{this.onError(r)}),t.on("exit",r=>{}),t}}class tbt{static isSupported(){return rE.isSupported()}constructor(t){x(this,"name","unnamed"),x(this,"source",void 0),x(this,"url",void 0),x(this,"maxConcurrency",1),x(this,"maxMobileConcurrency",1),x(this,"onDebug",()=>{}),x(this,"reuseWorkers",!0),x(this,"props",{}),x(this,"jobQueue",[]),x(this,"idleQueue",[]),x(this,"count",0),x(this,"isDestroyed",!1),this.source=t.source,this.url=t.url,this.setProps(t)}destroy(){this.idleQueue.forEach(t=>t.destroy()),this.isDestroyed=!0}setProps(t){this.props={...this.props,...t},t.name!==void 0&&(this.name=t.name),t.maxConcurrency!==void 0&&(this.maxConcurrency=t.maxConcurrency),t.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=t.maxMobileConcurrency),t.reuseWorkers!==void 0&&(this.reuseWorkers=t.reuseWorkers),t.onDebug!==void 0&&(this.onDebug=t.onDebug)}async startJob(t,r=(i,o,a)=>i.done(a),n=(i,o)=>i.error(o)){const i=new Promise(o=>(this.jobQueue.push({name:t,onMessage:r,onError:n,onStart:o}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const t=this._getAvailableWorker();if(!t)return;const r=this.jobQueue.shift();if(r){this.onDebug({message:"Starting job",name:r.name,workerThread:t,backlog:this.jobQueue.length});const n=new Z_t(r.name,t);t.onMessage=i=>r.onMessage(n,i.type,i.payload),t.onError=i=>r.onError(n,i),r.onStart(n);try{await n.result}finally{this.returnWorkerToQueue(t)}}}returnWorkerToQueue(t){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const t="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new rE({name:t,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return K_t?this.maxMobileConcurrency:this.maxConcurrency}}const ebt={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class as{static isSupported(){return rE.isSupported()}static getWorkerFarm(t={}){return as._workerFarm=as._workerFarm||new as({}),as._workerFarm.setProps(t),as._workerFarm}constructor(t){x(this,"props",void 0),x(this,"workerPools",new Map),this.props={...ebt},this.setProps(t),this.workerPools=new Map}destroy(){for(const t of this.workerPools.values())t.destroy();this.workerPools=new Map}setProps(t){this.props={...this.props,...t};for(const r of this.workerPools.values())r.setProps(this._getWorkerPoolProps())}getWorkerPool(t){const{name:r,source:n,url:i}=t;let o=this.workerPools.get(r);return o||(o=new tbt({name:r,source:n,url:i}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(r,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}x(as,"_workerFarm",void 0);const rbt="latest";function nbt(e,t={}){const r=t[e.id]||{},n="".concat(e.id,"-worker.js");let i=r.workerUrl;if(!i&&e.id==="compression"&&(i=t.workerUrl),t._workerType==="test"&&(i="modules/".concat(e.module,"/dist/").concat(n)),!i){let o=e.version;o==="latest"&&(o=rbt);const a=o?"@".concat(o):"";i="https://unpkg.com/@loaders.gl/".concat(e.module).concat(a,"/dist/").concat(n)}return bs(i),i}function ibt(e,t=Y_t){bs(e,"no worker provided");const r=e.version;return!(!t||!r)}function obt(e,t){return!as.isSupported()||!eE&&!(t!=null&&t._nodeWorkers)?!1:e.worker&&(t==null?void 0:t.worker)}async function abt(e,t,r,n,i){const o=e.id,a=nbt(e,r),l=as.getWorkerFarm(r).getWorkerPool({name:o,url:a});r=JSON.parse(JSON.stringify(r)),n=JSON.parse(JSON.stringify(n||{}));const u=await l.startJob("process-on-worker",sbt.bind(null,i));return u.postMessage("process",{input:t,options:r,context:n}),await(await u.result).result}async function sbt(e,t,r,n){switch(r){case"done":t.done(n);break;case"error":t.error(new Error(n.error));break;case"process":const{id:i,input:o,options:a}=n;try{const s=await e(o,a);t.postMessage("done",{id:i,result:s})}catch(s){const l=s instanceof Error?s.message:"unknown error";t.postMessage("error",{id:i,error:l})}break;default:console.warn("parse-with-worker unknown message ".concat(r))}}function uj(e){return e&&typeof e=="object"&&e.isBuffer}function lbt(e){return uj(e)?new Uint8Array(e.buffer,e.byteOffset,e.length).slice().buffer:e}function cj(e){if(uj(e))return lbt(e);if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if(typeof e=="string"){const t=e;return new TextEncoder().encode(t).buffer}if(e&&typeof e=="object"&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")}function ubt(e,t,r){if(r=r||e.byteLength,e.byteLength<r||t.byteLength<r)return!1;const n=new Uint8Array(e),i=new Uint8Array(t);for(let o=0;o<n.length;++o)if(n[o]!==i[o])return!1;return!0}function cbt(...e){const t=e.map(o=>o instanceof ArrayBuffer?new Uint8Array(o):o),r=t.reduce((o,a)=>o+a.byteLength,0),n=new Uint8Array(r);let i=0;for(const o of t)n.set(o,i),i+=o.byteLength;return n.buffer}async function fbt(e){const t=[];for await(const r of e)t.push(r);return cbt(...t)}function oR(){let e;if(typeof window<"u"&&window.performance)e=window.performance.now();else if(typeof process<"u"&&process.hrtime){const t=process.hrtime();e=t[0]*1e3+t[1]/1e6}else e=Date.now();return e}class aR{constructor(t,r){x(this,"name",void 0),x(this,"type",void 0),x(this,"sampleSize",1),x(this,"time",void 0),x(this,"count",void 0),x(this,"samples",void 0),x(this,"lastTiming",void 0),x(this,"lastSampleTime",void 0),x(this,"lastSampleCount",void 0),x(this,"_count",0),x(this,"_time",0),x(this,"_samples",0),x(this,"_startTime",0),x(this,"_timerPending",!1),this.name=t,this.type=r,this.reset()}setSampleSize(t){return this.sampleSize=t,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(t){return this._count+=t,this._samples++,this._checkSampling(),this}subtractCount(t){return this._count-=t,this._samples++,this._checkSampling(),this}addTime(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=oR(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(oR()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class l2{constructor(t){x(this,"id",void 0),x(this,"stats",{}),this.id=t.id,this.stats={},this._initializeStats(t.stats),Object.seal(this)}get(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:t,type:r})}get size(){return Object.keys(this.stats).length}reset(){for(const t in this.stats)this.stats[t].reset();return this}forEach(t){for(const r in this.stats)t(this.stats[r])}getTable(){const t={};return this.forEach(r=>{t[r.name]={time:r.time||0,count:r.count||0,average:r.getAverageTime()||0,hz:r.getHz()||0}}),t}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(r=>this._getOrCreate(r))}_getOrCreate(t){if(!t||!t.name)return null;const{name:r,type:n}=t;return this.stats[r]||(t instanceof aR?this.stats[r]=t:this.stats[r]=new aR(r,n)),this.stats[r]}}const hbt="Queued Requests",dbt="Active Requests",pbt="Cancelled Requests",gbt="Queued Requests Ever",vbt="Active Requests Ever",mbt={id:"request-scheduler",throttleRequests:!0,maxRequests:6};class ybt{constructor(t={}){x(this,"props",void 0),x(this,"stats",void 0),x(this,"activeRequestCount",0),x(this,"requestQueue",[]),x(this,"requestMap",new Map),x(this,"deferredUpdate",null),this.props={...mbt,...t},this.stats=new l2({id:this.props.id}),this.stats.get(hbt),this.stats.get(dbt),this.stats.get(pbt),this.stats.get(gbt),this.stats.get(vbt)}scheduleRequest(t,r=()=>0){if(!this.props.throttleRequests)return Promise.resolve({done:()=>{}});if(this.requestMap.has(t))return this.requestMap.get(t);const n={handle:t,priority:0,getPriority:r},i=new Promise(o=>(n.resolve=o,n));return this.requestQueue.push(n),this.requestMap.set(t,i),this._issueNewRequests(),i}_issueRequest(t){const{handle:r,resolve:n}=t;let i=!1;const o=()=>{i||(i=!0,this.requestMap.delete(r),this.activeRequestCount--,this._issueNewRequests())};return this.activeRequestCount++,n?n({done:o}):Promise.resolve({done:o})}_issueNewRequests(){this.deferredUpdate||(this.deferredUpdate=setTimeout(()=>this._issueNewRequestsAsync(),0))}_issueNewRequestsAsync(){this.deferredUpdate=null;const t=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(t!==0){this._updateAllRequests();for(let r=0;r<t;++r){const n=this.requestQueue.shift();n&&this._issueRequest(n)}}}_updateAllRequests(){const t=this.requestQueue;for(let r=0;r<t.length;++r){const n=t[r];this._updateRequest(n)||(t.splice(r,1),this.requestMap.delete(n.handle),r--)}t.sort((r,n)=>r.priority-n.priority)}_updateRequest(t){return t.priority=t.getPriority(t.handle),t.priority<0?(t.resolve(null),!1):!0}}let _bt="";const sR={};function bbt(e){for(const t in sR)if(e.startsWith(t)){const r=sR[t];e=e.replace(t,r)}return!e.startsWith("http://")&&!e.startsWith("https://")&&(e="".concat(_bt).concat(e)),e}function wbt(e){const t=e&&e.lastIndexOf("/");return t>=0?e.substr(t+1):""}const Sbt=e=>typeof e=="boolean",Hg=e=>typeof e=="function",s0=e=>e!==null&&typeof e=="object",lR=e=>s0(e)&&e.constructor==={}.constructor,Tbt=e=>e&&typeof e[Symbol.iterator]=="function",kbt=e=>e&&typeof e[Symbol.asyncIterator]=="function",md=e=>typeof Response<"u"&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json,yd=e=>typeof Blob<"u"&&e instanceof Blob,Pbt=e=>e&&typeof e=="object"&&e.isBuffer,Ebt=e=>typeof ReadableStream<"u"&&e instanceof ReadableStream||s0(e)&&Hg(e.tee)&&Hg(e.cancel)&&Hg(e.getReader),Cbt=e=>s0(e)&&Hg(e.read)&&Hg(e.pipe)&&Sbt(e.readable),fj=e=>Ebt(e)||Cbt(e),Abt=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,xbt=/^([-\w.]+\/[-\w.+]+)/;function Mbt(e){const t=xbt.exec(e);return t?t[1]:e}function uR(e){const t=Abt.exec(e);return t?t[1]:""}const Ibt=/\?.*/;function u2(e){if(md(e)){const t=p3(e.url||""),r=e.headers.get("content-type")||"";return{url:t,type:Mbt(r)||uR(t)}}return yd(e)?{url:p3(e.name||""),type:e.type||""}:typeof e=="string"?{url:p3(e),type:uR(e)}:{url:"",type:""}}function Lbt(e){return md(e)?e.headers["content-length"]||-1:yd(e)?e.size:typeof e=="string"?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}function p3(e){return e.replace(Ibt,"")}async function hj(e){if(md(e))return e;const t={},r=Lbt(e);r>=0&&(t["content-length"]=String(r));const{url:n,type:i}=u2(e);i&&(t["content-type"]=i);const o=await Dbt(e);o&&(t["x-first-bytes"]=o),typeof e=="string"&&(e=new TextEncoder().encode(e));const a=new Response(e,{headers:t});return Object.defineProperty(a,"url",{value:n}),a}async function Obt(e){if(!e.ok){const t=await Rbt(e);throw new Error(t)}}async function Rbt(e){let t="Failed to fetch resource ".concat(e.url," (").concat(e.status,"): ");try{const r=e.headers.get("Content-Type");let n=e.statusText;r.includes("application/json")&&(n+=" ".concat(await e.text())),t+=n,t=t.length>60?"".concat(t.slice(0,60),"..."):t}catch{}return t}async function Dbt(e){if(typeof e=="string")return"data:,".concat(e.slice(0,5));if(e instanceof Blob){const r=e.slice(0,5);return await new Promise(n=>{const i=new FileReader;i.onload=o=>{var a;return n(o==null||(a=o.target)===null||a===void 0?void 0:a.result)},i.readAsDataURL(r)})}if(e instanceof ArrayBuffer){const r=e.slice(0,5),n=Nbt(r);return"data:base64,".concat(n)}return null}function Nbt(e){let t="";const r=new Uint8Array(e);for(let n=0;n<r.byteLength;n++)t+=String.fromCharCode(r[n]);return btoa(t)}async function cR(e,t){if(typeof e=="string"){e=bbt(e);let r=t;return t!=null&&t.fetch&&typeof(t==null?void 0:t.fetch)!="function"&&(r=t.fetch),await fetch(e,r)}return await hj(e)}function dj(e){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&Boolean(process.versions.electron))return!0;const t=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,r=e||t;return!!(r&&r.indexOf("Electron")>=0)}function Ls(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||dj()}const Ey={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:typeof process=="object"&&process},Wm=Ey.window||Ey.self||Ey.global,vp=Ey.process||{},pj=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";Ls();const g3=globalThis;function gj(e){if(!e&&!Ls())return"Node";if(dj(e))return"Electron";const r=e||(typeof navigator<"u"?navigator:{}).userAgent||"";if(r.indexOf("Edge")>-1)return"Edge";const n=r.indexOf("MSIE ")!==-1,i=r.indexOf("Trident/")!==-1;return n||i?"IE":g3.chrome?"Chrome":g3.safari?"Safari":g3.mozInnerScreenX?"Firefox":"Unknown"}function Fbt(e){try{const t=window[e],r="__storage_test__";return t.setItem(r,r),t.removeItem(r),t}catch{return null}}class $bt{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";x(this,"storage",void 0),x(this,"id",void 0),x(this,"config",{}),this.storage=Fbt(n),this.id=t,this.config={},Object.assign(this.config,r),this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){return this.config={},this.updateConfiguration(t)}updateConfiguration(t){if(Object.assign(this.config,t),this.storage){const r=JSON.stringify(this.config);this.storage.setItem(this.id,r)}return this}_loadConfiguration(){let t={};if(this.storage){const r=this.storage.getItem(this.id);t=r?JSON.parse(r):{}}return Object.assign(this.config,t),this}}function Bbt(e){let t;return e<10?t="".concat(e.toFixed(2),"ms"):e<100?t="".concat(e.toFixed(1),"ms"):e<1e3?t="".concat(e.toFixed(0),"ms"):t="".concat((e/1e3).toFixed(2),"s"),t}function zbt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const r=Math.max(t-e.length,0);return"".concat(" ".repeat(r)).concat(e)}function v3(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=e.src.replace(/\(/g,"%28").replace(/\)/g,"%29");e.width>n&&(r=Math.min(r,n/e.width));const o=e.width*r,a=e.height*r,s=["font-size:1px;","padding:".concat(Math.floor(a/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(a,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(a,"px;"),"color:transparent;"].join("");return["".concat(t," %c+"),s]}let z_;(function(e){e[e.BLACK=30]="BLACK",e[e.RED=31]="RED",e[e.GREEN=32]="GREEN",e[e.YELLOW=33]="YELLOW",e[e.BLUE=34]="BLUE",e[e.MAGENTA=35]="MAGENTA",e[e.CYAN=36]="CYAN",e[e.WHITE=37]="WHITE",e[e.BRIGHT_BLACK=90]="BRIGHT_BLACK",e[e.BRIGHT_RED=91]="BRIGHT_RED",e[e.BRIGHT_GREEN=92]="BRIGHT_GREEN",e[e.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",e[e.BRIGHT_BLUE=94]="BRIGHT_BLUE",e[e.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",e[e.BRIGHT_CYAN=96]="BRIGHT_CYAN",e[e.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(z_||(z_={}));function fR(e){return typeof e=="string"?z_[e.toUpperCase()]||z_.WHITE:e}function Vbt(e,t,r){return!Ls&&typeof e=="string"&&(t&&(t=fR(t),e="\x1B[".concat(t,"m").concat(e,"\x1B[39m")),r&&(t=fR(r),e="\x1B[".concat(r+10,"m").concat(e,"\x1B[49m"))),e}function Ubt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const r=Object.getPrototypeOf(e),n=Object.getOwnPropertyNames(r);for(const i of n)typeof e[i]=="function"&&(t.find(o=>i===o)||(e[i]=e[i].bind(e)))}function V_(e,t){if(!e)throw new Error(t||"Assertion failed")}function Df(){let e;if(Ls&&"performance"in Wm){var t,r;e=Wm==null||(t=Wm.performance)===null||t===void 0||(r=t.now)===null||r===void 0?void 0:r.call(t)}else if("hrtime"in vp){var n;const i=vp==null||(n=vp.hrtime)===null||n===void 0?void 0:n.call(vp);e=i[0]*1e3+i[1]/1e6}else e=Date.now();return e}const Nf={debug:Ls&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Wbt={enabled:!0,level:0};function Vi(){}const hR={},dR={once:!0};class l0{constructor(){let{id:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};x(this,"id",void 0),x(this,"VERSION",pj),x(this,"_startTs",Df()),x(this,"_deltaTs",Df()),x(this,"_storage",void 0),x(this,"userData",{}),x(this,"LOG_THROTTLE_TIMEOUT",0),this.id=t,this._storage=new $bt("__probe-".concat(this.id,"__"),Wbt),this.userData={},this.timeStamp("".concat(this.id," started")),Ubt(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Df()-this._startTs).toPrecision(10))}getDelta(){return Number((Df()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.updateConfiguration({enabled:t}),this}setLevel(t){return this._storage.updateConfiguration({level:t}),this}get(t){return this._storage.config[t]}set(t,r){this._storage.updateConfiguration({[t]:r})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(t,r){V_(t,r)}warn(t){return this._getLogFunction(0,t,Nf.warn,arguments,dR)}error(t){return this._getLogFunction(0,t,Nf.error,arguments)}deprecated(t,r){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(r,"` instead"))}removed(t,r){return this.error("`".concat(t,"` has been removed. Use `").concat(r,"` instead"))}probe(t,r){return this._getLogFunction(t,r,Nf.log,arguments,{time:!0,once:!0})}log(t,r){return this._getLogFunction(t,r,Nf.debug,arguments)}info(t,r){return this._getLogFunction(t,r,console.info,arguments)}once(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];return this._getLogFunction(t,r,Nf.debug||Nf.info,arguments,dR)}table(t,r,n){return r?this._getLogFunction(t,r,console.table||Vi,n&&[n],{tag:Xbt(r)}):Vi}image(t){let{logLevel:r,priority:n,image:i,message:o="",scale:a=1}=t;return this._shouldLog(r||n)?Ls?Hbt({image:i,message:o,scale:a}):Gbt({image:i,message:o,scale:a}):Vi}time(t,r){return this._getLogFunction(t,r,console.time?console.time:console.info)}timeEnd(t,r){return this._getLogFunction(t,r,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,r){return this._getLogFunction(t,r,console.timeStamp||Vi)}group(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=pR({logLevel:t,message:r,opts:n}),{collapsed:o}=n;return i.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(t,r,Object.assign({},n,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||Vi)}withGroup(t,r,n){this.group(t,r)();try{n()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=vj(t)}_getLogFunction(t,r,n,i,o){if(this._shouldLog(t)){o=pR({logLevel:t,message:r,args:i,opts:o}),n=n||o.method,V_(n),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=Df();const a=o.tag||o.message;if(o.once)if(!hR[a])hR[a]=Df();else return Vi;return r=jbt(this.id,o.message,o),n.bind(console,r,...o.args)}return Vi}}x(l0,"VERSION",pj);function vj(e){if(!e)return 0;let t;switch(typeof e){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return V_(Number.isFinite(t)&&t>=0),t}function pR(e){const{logLevel:t,message:r}=e;e.logLevel=vj(t);const n=e.args?Array.from(e.args):[];for(;n.length&&n.shift()!==r;);switch(typeof t){case"string":case"function":r!==void 0&&n.unshift(r),e.message=t;break;case"object":Object.assign(e,t);break}typeof e.message=="function"&&(e.message=e.message());const i=typeof e.message;return V_(i==="string"||i==="object"),Object.assign(e,{args:n},e.opts)}function jbt(e,t,r){if(typeof t=="string"){const n=r.time?zbt(Bbt(r.total)):"";t=r.time?"".concat(e,": ").concat(n,"  ").concat(t):"".concat(e,": ").concat(t),t=Vbt(t,r.color,r.background)}return t}function Gbt(e){let{image:t,message:r="",scale:n=1}=e;return(void 0)({image:t,message:r,scale:n}),Vi}function Hbt(e){let{image:t,message:r="",scale:n=1}=e;if(typeof t=="string"){const o=new Image;return o.onload=()=>{const a=v3(o,r,n);console.log(...a)},o.src=t,Vi}const i=t.nodeName||"";if(i.toLowerCase()==="img")return console.log(...v3(t,r,n)),Vi;if(i.toLowerCase()==="canvas"){const o=new Image;return o.onload=()=>console.log(...v3(o,r,n)),o.src=t.toDataURL(),Vi}return Vi}function Xbt(e){for(const t in e)for(const r in e[t])return r||"untitled";return"empty"}const gR=new l0({id:"loaders.gl"});class Ybt{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class Kbt{constructor(){x(this,"console",void 0),this.console=console}log(...t){return this.console.log.bind(this.console,...t)}info(...t){return this.console.info.bind(this.console,...t)}warn(...t){return this.console.warn.bind(this.console,...t)}error(...t){return this.console.error.bind(this.console,...t)}}const mj={fetch:null,mimeType:void 0,nothrow:!1,log:new Kbt,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:Tx,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},Zbt={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function yj(){globalThis.loaders=globalThis.loaders||{};const{loaders:e}=globalThis;return e._state=e._state||{},e._state}const _j=()=>{const e=yj();return e.globalOptions=e.globalOptions||{...mj},e.globalOptions};function qbt(e,t,r,n){return r=r||[],r=Array.isArray(r)?r:[r],Jbt(e,r),t2t(t,e,n)}function bj(e,t){const r=_j(),n=e||r;return typeof n.fetch=="function"?n.fetch:s0(n.fetch)?i=>cR(i,n):t!=null&&t.fetch?t==null?void 0:t.fetch:cR}function Jbt(e,t){vR(e,null,mj,Zbt,t);for(const r of t){const n=e&&e[r.id]||{},i=r.options&&r.options[r.id]||{},o=r.deprecatedOptions&&r.deprecatedOptions[r.id]||{};vR(n,r.id,i,o,t)}}function vR(e,t,r,n,i){const o=t||"Top level",a=t?"".concat(t,"."):"";for(const s in e){const l=!t&&s0(e[s]),u=s==="baseUri"&&!t,c=s==="workerUrl"&&t;if(!(s in r)&&!u&&!c){if(s in n)gR.warn("".concat(o," loader option '").concat(a).concat(s,"' no longer supported, use '").concat(n[s],"'"))();else if(!l){const f=Qbt(s,i);gR.warn("".concat(o," loader option '").concat(a).concat(s,"' not recognized. ").concat(f))()}}}}function Qbt(e,t){const r=e.toLowerCase();let n="";for(const i of t)for(const o in i.options){if(e===o)return"Did you mean '".concat(i.id,".").concat(o,"'?");const a=o.toLowerCase();(r.startsWith(a)||a.startsWith(r))&&(n=n||"Did you mean '".concat(i.id,".").concat(o,"'?"))}return n}function t2t(e,t,r){const i={...e.options||{}};return e2t(i,r),i.log===null&&(i.log=new Ybt),mR(i,_j()),mR(i,t),i}function mR(e,t){for(const r in t)if(r in t){const n=t[r];lR(n)&&lR(e[r])?e[r]={...e[r],...t[r]}:e[r]=t[r]}}function e2t(e,t){t&&!("baseUri"in e)&&(e.baseUri=t)}function kx(e){var t;return e?(Array.isArray(e)&&(e=e[0]),Array.isArray((t=e)===null||t===void 0?void 0:t.extensions)):!1}function Px(e){var t,r;B_(e,"null loader"),B_(kx(e),"invalid loader");let n;return Array.isArray(e)&&(n=e[1],e=e[0],e={...e,options:{...e.options,...n}}),((t=e)!==null&&t!==void 0&&t.parseTextSync||(r=e)!==null&&r!==void 0&&r.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}const wj=()=>{const e=yj();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};function r2t(e){const t=wj();e=Array.isArray(e)?e:[e];for(const r of e){const n=Px(r);t.find(i=>n===i)||t.unshift(n)}}function n2t(){return wj()}const i2t=new l0({id:"loaders.gl"}),o2t=/\.([^.]+)$/;async function a2t(e,t=[],r,n){if(!Sj(e))return null;let i=yR(e,t,{...r,nothrow:!0},n);if(i)return i;if(yd(e)&&(e=await e.slice(0,10).arrayBuffer(),i=yR(e,t,r,n)),!i&&!(r!=null&&r.nothrow))throw new Error(Tj(e));return i}function yR(e,t=[],r,n){if(!Sj(e))return null;if(t&&!Array.isArray(t))return Px(t);let i=[];t&&(i=i.concat(t)),r!=null&&r.ignoreRegisteredLoaders||i.push(...n2t()),l2t(i);const o=s2t(e,i,r,n);if(!o&&!(r!=null&&r.nothrow))throw new Error(Tj(e));return o}function s2t(e,t,r,n){const{url:i,type:o}=u2(e),a=i||(n==null?void 0:n.url);let s=null,l="";if(r!=null&&r.mimeType&&(s=m3(t,r==null?void 0:r.mimeType),l="match forced by supplied MIME type ".concat(r==null?void 0:r.mimeType)),s=s||u2t(t,a),l=l||(s?"matched url ".concat(a):""),s=s||m3(t,o),l=l||(s?"matched MIME type ".concat(o):""),s=s||f2t(t,e),l=l||(s?"matched initial data ".concat(kj(e)):""),s=s||m3(t,r==null?void 0:r.fallbackMimeType),l=l||(s?"matched fallback MIME type ".concat(o):""),l){var u;i2t.log(1,"selectLoader selected ".concat((u=s)===null||u===void 0?void 0:u.name,": ").concat(l,"."))}return s}function Sj(e){return!(e instanceof Response&&e.status===204)}function Tj(e){const{url:t,type:r}=u2(e);let n="No valid loader found (";n+=t?"".concat(wbt(t),", "):"no url provided, ",n+="MIME type: ".concat(r?'"'.concat(r,'"'):"not provided",", ");const i=e?kj(e):"";return n+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",n+=")",n}function l2t(e){for(const t of e)Px(t)}function u2t(e,t){const r=t&&o2t.exec(t),n=r&&r[1];return n?c2t(e,n):null}function c2t(e,t){t=t.toLowerCase();for(const r of e)for(const n of r.extensions)if(n.toLowerCase()===t)return r;return null}function m3(e,t){for(const r of e)if(r.mimeTypes&&r.mimeTypes.includes(t)||t==="application/x.".concat(r.id))return r;return null}function f2t(e,t){if(!t)return null;for(const r of e)if(typeof t=="string"){if(h2t(t,r))return r}else if(ArrayBuffer.isView(t)){if(_R(t.buffer,t.byteOffset,r))return r}else if(t instanceof ArrayBuffer&&_R(t,0,r))return r;return null}function h2t(e,t){return t.testText?t.testText(e):(Array.isArray(t.tests)?t.tests:[t.tests]).some(n=>e.startsWith(n))}function _R(e,t,r){return(Array.isArray(r.tests)?r.tests:[r.tests]).some(i=>d2t(e,t,r,i))}function d2t(e,t,r,n){if(n instanceof ArrayBuffer)return ubt(n,e,n.byteLength);switch(typeof n){case"function":return n(e,r);case"string":const i=nE(e,t,n.length);return n===i;default:return!1}}function kj(e,t=5){return typeof e=="string"?e.slice(0,t):ArrayBuffer.isView(e)?nE(e.buffer,e.byteOffset,t):e instanceof ArrayBuffer?nE(e,0,t):""}function nE(e,t,r){if(e.byteLength<t+r)return"";const n=new DataView(e);let i="";for(let o=0;o<r;o++)i+=String.fromCharCode(n.getUint8(t+o));return i}const p2t=256*1024;function*g2t(e,t){const r=(t==null?void 0:t.chunkSize)||p2t;let n=0;const i=new TextEncoder;for(;n<e.length;){const o=Math.min(e.length-n,r),a=e.slice(n,n+o);n+=o,yield i.encode(a)}}const v2t=256*1024;function*m2t(e,t={}){const{chunkSize:r=v2t}=t;let n=0;for(;n<e.byteLength;){const i=Math.min(e.byteLength-n,r),o=new ArrayBuffer(i),a=new Uint8Array(e,n,i);new Uint8Array(o).set(a),n+=i,yield o}}const y2t=1024*1024;async function*_2t(e,t){const r=(t==null?void 0:t.chunkSize)||y2t;let n=0;for(;n<e.size;){const i=n+r,o=await e.slice(n,i).arrayBuffer();n=i,yield o}}function bR(e,t){return Tx?b2t(e,t):w2t(e)}async function*b2t(e,t){const r=e.getReader();let n;try{for(;;){const i=n||r.read();t!=null&&t._streamReadAhead&&(n=r.read());const{done:o,value:a}=await i;if(o)return;yield cj(a)}}catch{r.releaseLock()}}async function*w2t(e,t){for await(const r of e)yield cj(r)}function S2t(e,t){if(typeof e=="string")return g2t(e,t);if(e instanceof ArrayBuffer)return m2t(e,t);if(yd(e))return _2t(e,t);if(fj(e))return bR(e,t);if(md(e))return bR(e.body,t);throw new Error("makeIterator")}const Pj="Cannot convert supplied data type";function T2t(e,t,r){if(t.text&&typeof e=="string")return e;if(Pbt(e)&&(e=e.buffer),e instanceof ArrayBuffer){const n=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(e)){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);let n=e.buffer;const i=e.byteLength||e.length;return(e.byteOffset!==0||i!==n.byteLength)&&(n=n.slice(e.byteOffset,e.byteOffset+i)),n}throw new Error(Pj)}async function k2t(e,t,r){const n=e instanceof ArrayBuffer||ArrayBuffer.isView(e);if(typeof e=="string"||n)return T2t(e,t);if(yd(e)&&(e=await hj(e)),md(e)){const i=e;return await Obt(i),t.binary?await i.arrayBuffer():await i.text()}if(fj(e)&&(e=S2t(e,r)),Tbt(e)||kbt(e))return fbt(e);throw new Error(Pj)}function P2t(e,t,r=null){if(r)return r;const n={fetch:bj(t,e),...e};return Array.isArray(n.loaders)||(n.loaders=null),n}function E2t(e,t){if(!t&&e&&!Array.isArray(e))return e;let r;if(e&&(r=Array.isArray(e)?e:[e]),t&&t.loaders){const n=Array.isArray(t.loaders)?t.loaders:[t.loaders];r=r?[...r,...n]:n}return r&&r.length?r:null}async function Ex(e,t,r,n){bs(!n||typeof n=="object"),t&&!Array.isArray(t)&&!kx(t)&&(n=void 0,r=t,t=void 0),e=await e,r=r||{};const{url:i}=u2(e),a=E2t(t,n),s=await a2t(e,a,r);return s?(r=qbt(r,s,a,i),n=P2t({url:i,parse:Ex,loaders:a},r,n),await C2t(s,e,r,n)):null}async function C2t(e,t,r,n){if(ibt(e),md(t)){const i=t,{ok:o,redirected:a,status:s,statusText:l,type:u,url:c}=i,f=Object.fromEntries(i.headers.entries());n.response={headers:f,ok:o,redirected:a,status:s,statusText:l,type:u,url:c}}if(t=await k2t(t,e,r),e.parseTextSync&&typeof t=="string")return r.dataType="text",e.parseTextSync(t,r,n,e);if(obt(e,r))return await abt(e,t,r,n,Ex);if(e.parseText&&typeof t=="string")return await e.parseText(t,r,n,e);if(e.parse)return await e.parse(t,r,n,e);throw bs(!e.parseSync),new Error("".concat(e.id," loader - no parser found and worker is disabled"))}async function U_(e,t,r,n){!Array.isArray(t)&&!kx(t)&&(r=t,t=void 0);const i=bj(r);let o=e;return typeof e=="string"&&(o=await i(e)),yd(e)&&(o=await i(e)),await Ex(o,t,r)}const A2t="3.2.7",{_parseImageNode:x2t}=globalThis,iE=typeof Image<"u",oE=typeof ImageBitmap<"u",M2t=Boolean(x2t),aE=Tx?!0:M2t;function I2t(e){switch(e){case"auto":return oE||iE||aE;case"imagebitmap":return oE;case"image":return iE;case"data":return aE;default:throw new Error("@loaders.gl/images: image ".concat(e," not supported in this environment"))}}function L2t(){if(oE)return"imagebitmap";if(iE)return"image";if(aE)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function O2t(e){const t=D2t(e);if(!t)throw new Error("Not an image");return t}function R2t(e){switch(O2t(e)){case"data":return e;case"image":case"imagebitmap":const t=document.createElement("canvas"),r=t.getContext("2d");if(!r)throw new Error("getImageData");return t.width=e.width,t.height=e.height,r.drawImage(e,0,0),r.getImageData(0,0,e.width,e.height);default:throw new Error("getImageData")}}function D2t(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&e instanceof Image?"image":e&&typeof e=="object"&&e.data&&e.width&&e.height?"data":null}const N2t=/^data:image\/svg\+xml/,F2t=/\.svg((\?|#).*)?$/;function Cx(e){return e&&(N2t.test(e)||F2t.test(e))}function $2t(e,t){if(Cx(t)){let n=new TextDecoder().decode(e);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(n=unescape(encodeURIComponent(n)))}catch(o){throw new Error(o.message)}return"data:image/svg+xml;base64,".concat(btoa(n))}return Ej(e,t)}function Ej(e,t){if(Cx(t))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(e)])}async function Cj(e,t,r){const n=$2t(e,r),i=self.URL||self.webkitURL,o=typeof n!="string"&&i.createObjectURL(n);try{return await B2t(o||n,t)}finally{o&&i.revokeObjectURL(o)}}async function B2t(e,t){const r=new Image;return r.src=e,t.image&&t.image.decode&&r.decode?(await r.decode(),r):await new Promise((n,i)=>{try{r.onload=()=>n(r),r.onerror=o=>i(new Error("Could not load image ".concat(e,": ").concat(o)))}catch(o){i(o)}})}const z2t={};let wR=!0;async function V2t(e,t,r){let n;Cx(r)?n=await Cj(e,t,r):n=Ej(e,r);const i=t&&t.imagebitmap;return await U2t(n,i)}async function U2t(e,t=null){if((W2t(t)||!wR)&&(t=null),t)try{return await createImageBitmap(e,t)}catch(r){console.warn(r),wR=!1}return await createImageBitmap(e)}function W2t(e){for(const t in e||z2t)return!1;return!0}const ga=!1,Xg=!0;function Aj(e){const t=u0(e);return j2t(t)||X2t(t)||G2t(t)||H2t(t)}function j2t(e){const t=u0(e);return t.byteLength>=24&&t.getUint32(0,ga)===2303741511?{mimeType:"image/png",width:t.getUint32(16,ga),height:t.getUint32(20,ga)}:null}function G2t(e){const t=u0(e);return t.byteLength>=10&&t.getUint32(0,ga)===1195984440?{mimeType:"image/gif",width:t.getUint16(6,Xg),height:t.getUint16(8,Xg)}:null}function H2t(e){const t=u0(e);return t.byteLength>=14&&t.getUint16(0,ga)===16973&&t.getUint32(2,Xg)===t.byteLength?{mimeType:"image/bmp",width:t.getUint32(18,Xg),height:t.getUint32(22,Xg)}:null}function X2t(e){const t=u0(e);if(!(t.byteLength>=3&&t.getUint16(0,ga)===65496&&t.getUint8(2)===255))return null;const{tableMarkers:n,sofMarkers:i}=Y2t();let o=2;for(;o+9<t.byteLength;){const a=t.getUint16(o,ga);if(i.has(a))return{mimeType:"image/jpeg",height:t.getUint16(o+5,ga),width:t.getUint16(o+7,ga)};if(!n.has(a))return null;o+=2,o+=t.getUint16(o,ga)}return null}function Y2t(){const e=new Set([65499,65476,65484,65501,65534]);for(let r=65504;r<65520;++r)e.add(r);return{tableMarkers:e,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function u0(e){if(e instanceof DataView)return e;if(ArrayBuffer.isView(e))return new DataView(e.buffer);if(e instanceof ArrayBuffer)return new DataView(e);throw new Error("toDataView")}async function K2t(e,t){const{mimeType:r}=Aj(e)||{},n=globalThis._parseImageNode;return B_(n),await n(e,r)}async function Z2t(e,t,r){t=t||{};const i=(t.image||{}).type||"auto",{url:o}=r||{},a=q2t(i);let s;switch(a){case"imagebitmap":s=await V2t(e,t,o);break;case"image":s=await Cj(e,t,o);break;case"data":s=await K2t(e);break;default:B_(!1)}return i==="data"&&(s=R2t(s)),s}function q2t(e){switch(e){case"auto":case"data":return L2t();default:return I2t(e),e}}const J2t=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],Q2t=["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],twt={image:{type:"auto",decode:!0}},xj={id:"image",module:"images",name:"Images",version:A2t,mimeTypes:Q2t,extensions:J2t,parse:Z2t,tests:[e=>Boolean(Aj(new DataView(e)))],options:twt},de=new l0({id:"deck"});let sE={};function ewt(e){sE=e}function Tn(e,t,r,n){de.level>0&&sE[e]&&sE[e].call(null,t,r,n)}function rwt(e){const t=e[0],r=e[e.length-1];return t==="{"&&r==="}"||t==="["&&r==="]"}const nwt={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:rwt,parseTextSync:JSON.parse},Yg="8.8.8",Cy=globalThis.deck&&globalThis.deck.VERSION;if(Cy&&Cy!==Yg)throw new Error("deck.gl - multiple versions detected: ".concat(Cy," vs ").concat(Yg));Cy||(de.log(1,"deck.gl ".concat(Yg))(),globalThis.deck={...globalThis.deck,VERSION:Yg,version:Yg,log:de,_registerLoggers:ewt},r2t([nwt,[xj,{imagebitmap:{premultiplyAlpha:"none"}}]]));const iwt=globalThis.deck,Xt=new l0({id:"luma.gl"});function $n(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}const owt="Invalid WebGLRenderingContext",awt="Requires WebGL2";function c2(e){return typeof WebGLRenderingContext<"u"&&e instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:Boolean(e&&Number.isFinite(e._version))}function Pe(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:Boolean(e&&e._version===2)}function swt(e){return Pe(e)?e:null}function f2(e){return $n(c2(e),owt),e}function En(e){return $n(Pe(e),awt),e}const og={};function lwt(e){globalThis.console&&globalThis.console.error&&globalThis.console.error(e)}function uwt(e){globalThis.console&&globalThis.console.log&&globalThis.console.log(e)}function cwt(e,t){og[e]=!0,t!==void 0&&lwt(t)}function fwt(e){const t=e.getError;e.getError=function(){let n;do n=t.apply(e),n!==0&&(og[n]=!0);while(n!==0);for(n in og)if(og[n])return delete og[n],parseInt(n,10);return 0}}const c0=function e(t){const r=t.gl;this.ext=t,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(t.maxVertexAttribs);for(let n=0;n<this.attribs.length;n++){const i=new e.VertexAttrib(r);this.attribs[n]=i}this.maxAttrib=0};c0.VertexAttrib=function(t){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};c0.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const Qc=function(t){const r=this;this.gl=t,fwt(t);const n=this.original={getParameter:t.getParameter,enableVertexAttribArray:t.enableVertexAttribArray,disableVertexAttribArray:t.disableVertexAttribArray,bindBuffer:t.bindBuffer,getVertexAttrib:t.getVertexAttrib,vertexAttribPointer:t.vertexAttribPointer};t.getParameter=function(o){return o===r.VERTEX_ARRAY_BINDING_OES?r.currentVertexArrayObject===r.defaultVertexArrayObject?null:r.currentVertexArrayObject:n.getParameter.apply(this,arguments)},t.enableVertexAttribArray=function(o){const a=r.currentVertexArrayObject;a.maxAttrib=Math.max(a.maxAttrib,o);const s=a.attribs[o];return s.enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},t.disableVertexAttribArray=function(o){const a=r.currentVertexArrayObject;a.maxAttrib=Math.max(a.maxAttrib,o);const s=a.attribs[o];return s.enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},t.bindBuffer=function(o,a){switch(o){case 34962:r.currentArrayBuffer=a;break;case 34963:r.currentVertexArrayObject.elementArrayBuffer=a;break}return n.bindBuffer.apply(this,arguments)},t.getVertexAttrib=function(o,a){const l=r.currentVertexArrayObject.attribs[o];switch(a){case 34975:return l.buffer;case 34338:return l.enabled;case 34339:return l.size;case 34340:return l.stride;case 34341:return l.type;case 34922:return l.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},t.vertexAttribPointer=function(o,a,s,l,u,c){const f=r.currentVertexArrayObject;f.maxAttrib=Math.max(f.maxAttrib,o);const h=f.attribs[o];return h.buffer=r.currentArrayBuffer,h.size=a,h.type=s,h.normalized=l,h.stride=u,h.offset=c,h.recache(),n.vertexAttribPointer.apply(this,arguments)},t.instrumentExtension&&t.instrumentExtension(this,"OES_vertex_array_object"),t.canvas&&t.canvas.addEventListener("webglcontextrestored",()=>{uwt("OESVertexArrayObject emulation library context restored"),r.reset_()},!0),this.reset_()};Qc.prototype.VERTEX_ARRAY_BINDING_OES=34229;Qc.prototype.reset_=function(){if(this.vertexArrayObjects!==void 0)for(let n=0;n<this.vertexArrayObjects.length;++n)this.vertexArrayObjects.isAlive=!1;const r=this.gl;this.maxVertexAttribs=r.getParameter(34921),this.defaultVertexArrayObject=new c0(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};Qc.prototype.createVertexArrayOES=function(){const t=new c0(this);return this.vertexArrayObjects.push(t),t};Qc.prototype.deleteVertexArrayOES=function(t){t.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(t),1),this.currentVertexArrayObject===t&&this.bindVertexArrayOES(null)};Qc.prototype.isVertexArrayOES=function(t){return!!(t&&t instanceof c0&&t.hasBeenBound&&t.ext===this)};Qc.prototype.bindVertexArrayOES=function(t){const r=this.gl;if(t&&!t.isAlive){cwt(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}const n=this.original,i=this.currentVertexArrayObject;this.currentVertexArrayObject=t||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const o=this.currentVertexArrayObject;if(i===o)return;(!i||o.elementArrayBuffer!==i.elementArrayBuffer)&&n.bindBuffer.call(r,34963,o.elementArrayBuffer);let a=this.currentArrayBuffer;const s=Math.max(i?i.maxAttrib:0,o.maxAttrib);for(let l=0;l<=s;l++){const u=o.attribs[l],c=i?i.attribs[l]:null;if((!i||u.enabled!==c.enabled)&&(u.enabled?n.enableVertexAttribArray.call(r,l):n.disableVertexAttribArray.call(r,l)),u.enabled){let f=!1;(!i||u.buffer!==c.buffer)&&(a!==u.buffer&&(n.bindBuffer.call(r,34962,u.buffer),a=u.buffer),f=!0),(f||u.cached!==c.cached)&&n.vertexAttribPointer.call(r,l,u.size,u.type,u.normalized,u.stride,u.offset)}}this.currentArrayBuffer!==a&&n.bindBuffer.call(r,34962,this.currentArrayBuffer)};function hwt(e){if(typeof e.createVertexArray=="function")return;const t=e.getSupportedExtensions;e.getSupportedExtensions=function(){const i=t.call(this)||[];return i.indexOf("OES_vertex_array_object")<0&&i.push("OES_vertex_array_object"),i};const r=e.getExtension;e.getExtension=function(i){const o=r.call(this,i);return o||(i!=="OES_vertex_array_object"?null:(e.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Qc(this)),this.__OESVertexArrayObject))}}const SR="OES_element_index",TR="WEBGL_draw_buffers",dwt="EXT_disjoint_timer_query",pwt="EXT_disjoint_timer_query_webgl2",gwt="EXT_texture_filter_anisotropic",kR="WEBGL_debug_renderer_info",vwt=35723,mwt=4352,ywt=36795,_wt=34047,bwt=37445,wwt=37446,ir=e=>Pe(e)?void 0:0,Swt={[3074]:e=>Pe(e)?void 0:36064,[vwt]:e=>Pe(e)?void 0:mwt,[35977]:ir,[32937]:ir,[ywt]:(e,t)=>{const r=Pe(e)?e.getExtension(pwt):e.getExtension(dwt);return r&&r.GPU_DISJOINT_EXT?t(r.GPU_DISJOINT_EXT):0},[bwt]:(e,t)=>{const r=e.getExtension(kR);return t(r&&r.UNMASKED_VENDOR_WEBGL||7936)},[wwt]:(e,t)=>{const r=e.getExtension(kR);return t(r&&r.UNMASKED_RENDERER_WEBGL||7937)},[_wt]:(e,t)=>{const r=e.luma.extensions[gwt];return r?t(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},[32883]:ir,[35071]:ir,[37447]:ir,[36063]:(e,t)=>{if(!Pe(e)){const r=e.getExtension(TR);return r?t(r.MAX_COLOR_ATTACHMENTS_WEBGL):0}},[35379]:ir,[35374]:ir,[35377]:ir,[34852]:e=>{if(!Pe(e)){const t=e.getExtension(TR);return t?t.MAX_DRAW_BUFFERS_WEBGL:0}},[36203]:e=>e.getExtension(SR)?2147483647:65535,[33001]:e=>e.getExtension(SR)?16777216:65535,[33e3]:e=>16777216,[37157]:ir,[35373]:ir,[35657]:ir,[36183]:ir,[37137]:ir,[34045]:ir,[35978]:ir,[35979]:ir,[35968]:ir,[35376]:ir,[35375]:ir,[35659]:ir,[37154]:ir,[35371]:ir,[35658]:ir,[35076]:ir,[35077]:ir,[35380]:ir};function Twt(e,t,r){const n=Swt[r],i=typeof n=="function"?n(e,t,r):n;return i!==void 0?i:t(r)}const kwt="OES_vertex_array_object",Mj="ANGLE_instanced_arrays",Pwt="WEBGL_draw_buffers",Ewt="EXT_disjoint_timer_query",Cwt="EXT_texture_filter_anisotropic",Awt="VertexArray requires WebGL2 or OES_vertex_array_object extension";function xwt(e,t){return{webgl2:Pe(e),ext:e.getExtension(t)}}const Ij={[kwt]:{meta:{suffix:"OES"},createVertexArray:()=>{$n(!1,Awt)},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[Mj]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(e,t){$n(t===0,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[Pwt]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{$n(!1)}},[Ewt]:{meta:{suffix:"EXT"},createQuery:()=>{$n(!1)},deleteQuery:()=>{$n(!1)},beginQuery:()=>{$n(!1)},endQuery:()=>{},getQuery(e,t){return this.getQueryObject(e,t)},getQueryParameter(e,t){return this.getQueryObject(e,t)},getQueryObject:()=>{}}},y3={readBuffer:(e,t,r)=>{Pe(e)&&t(r)},getVertexAttrib:(e,t,r,n)=>{const{webgl2:i,ext:o}=xwt(e,Mj);let a;switch(n){case 35069:a=i?void 0:!1;break;case 35070:a=!i&&!o?0:void 0;break}return a!==void 0?a:t(r,n)},getProgramParameter:(e,t,r,n)=>{if(!Pe(e))switch(n){case 35967:return 35981;case 35971:return 0;case 35382:return 0}return t(r,n)},getInternalformatParameter:(e,t,r,n,i)=>{if(!Pe(e))switch(i){case 32937:return new Int32Array([0])}return e.getInternalformatParameter(r,n,i)},getTexParameter(e,t,r,n){switch(n){case 34046:const{extensions:i}=e.luma,o=i[Cwt];n=o&&o.TEXTURE_MAX_ANISOTROPY_EXT||34046;break}return t(r,n)},getParameter:Twt,hint(e,t,r,n){return t(r,n)}};function Mwt(e){e.luma=e.luma||{};const{luma:t}=e;return t.polyfilled||(hwt(e),Iwt(e),Owt(e,Ij),Lwt(e,{target:t,target2:e}),t.polyfilled=!0),e}globalThis.polyfillContext=Mwt;function Iwt(e){e.luma.extensions={};const t=e.getSupportedExtensions()||[];for(const r of t)e.luma[r]=e.getExtension(r)}function Lwt(e,t){let{target:r,target2:n}=t;Object.keys(y3).forEach(i=>{if(typeof y3[i]=="function"){const o=e[i]?e[i].bind(e):()=>{},a=y3[i].bind(null,e,o);r[i]=a,n[i]=a}})}function Owt(e,t){for(const r of Object.getOwnPropertyNames(t))r!=="overrides"&&Rwt(e,{extension:r,target:e.luma,target2:e})}function Rwt(e,t){let{extension:r,target:n,target2:i}=t;const o=Ij[r];$n(o);const{meta:a={}}=o,{suffix:s=""}=a,l=e.getExtension(r);for(const u of Object.keys(o)){const c="".concat(u).concat(s);let f=null;u==="meta"||typeof e[u]=="function"||(l&&typeof l[c]=="function"?f=function(){return l[c](...arguments)}:typeof o[u]=="function"&&(f=o[u].bind(n))),f&&(n[u]=f,i[u]=f)}}const Ax={[3042]:!1,[32773]:new Float32Array([0,0,0,0]),[32777]:32774,[34877]:32774,[32969]:1,[32968]:0,[32971]:1,[32970]:0,[3106]:new Float32Array([0,0,0,0]),[3107]:[!0,!0,!0,!0],[2884]:!1,[2885]:1029,[2929]:!1,[2931]:1,[2932]:513,[2928]:new Float32Array([0,1]),[2930]:!0,[3024]:!0,[36006]:null,[2886]:2305,[33170]:4352,[2849]:1,[32823]:!1,[32824]:0,[10752]:0,[32938]:1,[32939]:!1,[3089]:!1,[3088]:new Int32Array([0,0,1024,1024]),[2960]:!1,[2961]:0,[2968]:4294967295,[36005]:4294967295,[2962]:519,[2967]:0,[2963]:4294967295,[34816]:519,[36003]:0,[36004]:4294967295,[2964]:7680,[2965]:7680,[2966]:7680,[34817]:7680,[34818]:7680,[34819]:7680,[2978]:[0,0,1024,1024],[3333]:4,[3317]:4,[37440]:!1,[37441]:!1,[37443]:37444,[35723]:4352,[36010]:null,[35977]:!1,[3330]:0,[3332]:0,[3331]:0,[3314]:0,[32878]:0,[3316]:0,[3315]:0,[32877]:0},Ys=(e,t,r)=>t?e.enable(r):e.disable(r),PR=(e,t,r)=>e.hint(r,t),li=(e,t,r)=>e.pixelStorei(r,t),Dwt=(e,t)=>{const r=Pe(e)?36009:36160;return e.bindFramebuffer(r,t)},Nwt=(e,t)=>e.bindFramebuffer(36008,t);function mp(e){return Array.isArray(e)||ArrayBuffer.isView(e)}const Fwt={[3042]:Ys,[32773]:(e,t)=>e.blendColor(...t),[32777]:"blendEquation",[34877]:"blendEquation",[32969]:"blendFunc",[32968]:"blendFunc",[32971]:"blendFunc",[32970]:"blendFunc",[3106]:(e,t)=>e.clearColor(...t),[3107]:(e,t)=>e.colorMask(...t),[2884]:Ys,[2885]:(e,t)=>e.cullFace(t),[2929]:Ys,[2931]:(e,t)=>e.clearDepth(t),[2932]:(e,t)=>e.depthFunc(t),[2928]:(e,t)=>e.depthRange(...t),[2930]:(e,t)=>e.depthMask(t),[3024]:Ys,[35723]:PR,[36006]:Dwt,[2886]:(e,t)=>e.frontFace(t),[33170]:PR,[2849]:(e,t)=>e.lineWidth(t),[32823]:Ys,[32824]:"polygonOffset",[10752]:"polygonOffset",[35977]:Ys,[32938]:"sampleCoverage",[32939]:"sampleCoverage",[3089]:Ys,[3088]:(e,t)=>e.scissor(...t),[2960]:Ys,[2961]:(e,t)=>e.clearStencil(t),[2968]:(e,t)=>e.stencilMaskSeparate(1028,t),[36005]:(e,t)=>e.stencilMaskSeparate(1029,t),[2962]:"stencilFuncFront",[2967]:"stencilFuncFront",[2963]:"stencilFuncFront",[34816]:"stencilFuncBack",[36003]:"stencilFuncBack",[36004]:"stencilFuncBack",[2964]:"stencilOpFront",[2965]:"stencilOpFront",[2966]:"stencilOpFront",[34817]:"stencilOpBack",[34818]:"stencilOpBack",[34819]:"stencilOpBack",[2978]:(e,t)=>e.viewport(...t),[3333]:li,[3317]:li,[37440]:li,[37441]:li,[37443]:li,[3330]:li,[3332]:li,[3331]:li,[36010]:Nwt,[3314]:li,[32878]:li,[3316]:li,[3315]:li,[32877]:li,framebuffer:(e,t)=>{const r=t&&"handle"in t?t.handle:t;return e.bindFramebuffer(36160,r)},blend:(e,t)=>t?e.enable(3042):e.disable(3042),blendColor:(e,t)=>e.blendColor(...t),blendEquation:(e,t)=>{t=mp(t)?t:[t,t],e.blendEquationSeparate(...t)},blendFunc:(e,t)=>{t=mp(t)&&t.length===2?[...t,...t]:t,e.blendFuncSeparate(...t)},clearColor:(e,t)=>e.clearColor(...t),clearDepth:(e,t)=>e.clearDepth(t),clearStencil:(e,t)=>e.clearStencil(t),colorMask:(e,t)=>e.colorMask(...t),cull:(e,t)=>t?e.enable(2884):e.disable(2884),cullFace:(e,t)=>e.cullFace(t),depthTest:(e,t)=>t?e.enable(2929):e.disable(2929),depthFunc:(e,t)=>e.depthFunc(t),depthMask:(e,t)=>e.depthMask(t),depthRange:(e,t)=>e.depthRange(...t),dither:(e,t)=>t?e.enable(3024):e.disable(3024),derivativeHint:(e,t)=>{e.hint(35723,t)},frontFace:(e,t)=>e.frontFace(t),mipmapHint:(e,t)=>e.hint(33170,t),lineWidth:(e,t)=>e.lineWidth(t),polygonOffsetFill:(e,t)=>t?e.enable(32823):e.disable(32823),polygonOffset:(e,t)=>e.polygonOffset(...t),sampleCoverage:(e,t)=>e.sampleCoverage(...t),scissorTest:(e,t)=>t?e.enable(3089):e.disable(3089),scissor:(e,t)=>e.scissor(...t),stencilTest:(e,t)=>t?e.enable(2960):e.disable(2960),stencilMask:(e,t)=>{t=mp(t)?t:[t,t];const[r,n]=t;e.stencilMaskSeparate(1028,r),e.stencilMaskSeparate(1029,n)},stencilFunc:(e,t)=>{t=mp(t)&&t.length===3?[...t,...t]:t;const[r,n,i,o,a,s]=t;e.stencilFuncSeparate(1028,r,n,i),e.stencilFuncSeparate(1029,o,a,s)},stencilOp:(e,t)=>{t=mp(t)&&t.length===3?[...t,...t]:t;const[r,n,i,o,a,s]=t;e.stencilOpSeparate(1028,r,n,i),e.stencilOpSeparate(1029,o,a,s)},viewport:(e,t)=>e.viewport(...t)};function Sr(e,t,r){return t[e]!==void 0?t[e]:r[e]}const $wt={blendEquation:(e,t,r)=>e.blendEquationSeparate(Sr(32777,t,r),Sr(34877,t,r)),blendFunc:(e,t,r)=>e.blendFuncSeparate(Sr(32969,t,r),Sr(32968,t,r),Sr(32971,t,r),Sr(32970,t,r)),polygonOffset:(e,t,r)=>e.polygonOffset(Sr(32824,t,r),Sr(10752,t,r)),sampleCoverage:(e,t,r)=>e.sampleCoverage(Sr(32938,t,r),Sr(32939,t,r)),stencilFuncFront:(e,t,r)=>e.stencilFuncSeparate(1028,Sr(2962,t,r),Sr(2967,t,r),Sr(2963,t,r)),stencilFuncBack:(e,t,r)=>e.stencilFuncSeparate(1029,Sr(34816,t,r),Sr(36003,t,r),Sr(36004,t,r)),stencilOpFront:(e,t,r)=>e.stencilOpSeparate(1028,Sr(2964,t,r),Sr(2965,t,r),Sr(2966,t,r)),stencilOpBack:(e,t,r)=>e.stencilOpSeparate(1029,Sr(34817,t,r),Sr(34818,t,r),Sr(34819,t,r))},ER={enable:(e,t)=>e({[t]:!0}),disable:(e,t)=>e({[t]:!1}),pixelStorei:(e,t,r)=>e({[t]:r}),hint:(e,t,r)=>e({[t]:r}),bindFramebuffer:(e,t,r)=>{switch(t){case 36160:return e({[36006]:r,[36010]:r});case 36009:return e({[36006]:r});case 36008:return e({[36010]:r});default:return null}},blendColor:(e,t,r,n,i)=>e({[32773]:new Float32Array([t,r,n,i])}),blendEquation:(e,t)=>e({[32777]:t,[34877]:t}),blendEquationSeparate:(e,t,r)=>e({[32777]:t,[34877]:r}),blendFunc:(e,t,r)=>e({[32969]:t,[32968]:r,[32971]:t,[32970]:r}),blendFuncSeparate:(e,t,r,n,i)=>e({[32969]:t,[32968]:r,[32971]:n,[32970]:i}),clearColor:(e,t,r,n,i)=>e({[3106]:new Float32Array([t,r,n,i])}),clearDepth:(e,t)=>e({[2931]:t}),clearStencil:(e,t)=>e({[2961]:t}),colorMask:(e,t,r,n,i)=>e({[3107]:[t,r,n,i]}),cullFace:(e,t)=>e({[2885]:t}),depthFunc:(e,t)=>e({[2932]:t}),depthRange:(e,t,r)=>e({[2928]:new Float32Array([t,r])}),depthMask:(e,t)=>e({[2930]:t}),frontFace:(e,t)=>e({[2886]:t}),lineWidth:(e,t)=>e({[2849]:t}),polygonOffset:(e,t,r)=>e({[32824]:t,[10752]:r}),sampleCoverage:(e,t,r)=>e({[32938]:t,[32939]:r}),scissor:(e,t,r,n,i)=>e({[3088]:new Int32Array([t,r,n,i])}),stencilMask:(e,t)=>e({[2968]:t,[36005]:t}),stencilMaskSeparate:(e,t,r)=>e({[t===1028?2968:36005]:r}),stencilFunc:(e,t,r,n)=>e({[2962]:t,[2967]:r,[2963]:n,[34816]:t,[36003]:r,[36004]:n}),stencilFuncSeparate:(e,t,r,n,i)=>e({[t===1028?2962:34816]:r,[t===1028?2967:36003]:n,[t===1028?2963:36004]:i}),stencilOp:(e,t,r,n)=>e({[2964]:t,[2965]:r,[2966]:n,[34817]:t,[34818]:r,[34819]:n}),stencilOpSeparate:(e,t,r,n,i)=>e({[t===1028?2964:34817]:r,[t===1028?2965:34818]:n,[t===1028?2966:34819]:i}),viewport:(e,t,r,n,i)=>e({[2978]:[t,r,n,i]})},ta=(e,t)=>e.isEnabled(t),CR={[3042]:ta,[2884]:ta,[2929]:ta,[3024]:ta,[32823]:ta,[32926]:ta,[32928]:ta,[3089]:ta,[2960]:ta,[35977]:ta};function Lj(e){for(const t in e)return!1;return!0}function Bwt(e,t){if(e===t)return!0;const r=Array.isArray(e)||ArrayBuffer.isView(e),n=Array.isArray(t)||ArrayBuffer.isView(t);if(r&&n&&e.length===t.length){for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}return!1}function AR(e,t){const r=e[t].bind(e);e[t]=function(){const i=arguments.length<=0?void 0:arguments[0];return i in e.state.cache?e.state.enable?e.state.cache[i]:r(...arguments):r(...arguments)},Object.defineProperty(e[t],"name",{value:"".concat(t,"-from-cache"),configurable:!1})}function zwt(e,t,r){const n=e[t].bind(e);e[t]=function(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];const{valueChanged:l,oldValue:u}=r(e.state._updateCache,...a);return l&&n(...a),u},Object.defineProperty(e[t],"name",{value:"".concat(t,"-to-cache"),configurable:!1})}function Vwt(e){const t=e.useProgram.bind(e);e.useProgram=function(n){e.state.program!==n&&(t(n),e.state.program=n)}}class Uwt{constructor(t){let{copyState:r=!1,log:n=()=>{}}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.program=null,this.stateStack=[],this.enable=!0,this.cache=r?jwt(t):Object.assign({},Ax),this.log=n,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){$n(this.stateStack.length>0);const t=this.stateStack[this.stateStack.length-1];ws(this.gl,t),this.stateStack.pop()}_updateCache(t){let r=!1,n;const i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const o in t){$n(o!==void 0);const a=t[o],s=this.cache[o];Bwt(a,s)||(r=!0,n=s,i&&!(o in i)&&(i[o]=s),this.cache[o]=a)}return{valueChanged:r,oldValue:n}}}function Oj(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{enable:r=!0,copyState:n}=t;if($n(n!==void 0),!e.state){const{polyfillContext:i}=globalThis;i&&i(e),e.state=new Uwt(e,{copyState:n}),Vwt(e);for(const o in ER){const a=ER[o];zwt(e,o,a)}AR(e,"getParameter"),AR(e,"isEnabled")}return e.state.enable=r,e}function Wwt(e){e.state||Oj(e,{copyState:!1}),e.state.push()}function xR(e){$n(e.state),e.state.pop()}function ws(e,t){if($n(c2(e),"setParameters requires a WebGL context"),Lj(t))return;const r={};for(const i in t){const o=Number(i),a=Fwt[i];a&&(typeof a=="string"?r[a]=!0:a(e,t[i],o))}const n=e.state&&e.state.cache;if(n)for(const i in r){const o=$wt[i];o(e,t,n)}}function jwt(e,t){if(t=t||Ax,typeof t=="number"){const i=t,o=CR[i];return o?o(e,i):e.getParameter(i)}const r=Array.isArray(t)?t:Object.keys(t),n={};for(const i of r){const o=CR[i];n[i]=o?o(e,Number(i)):e.getParameter(Number(i))}return n}function Gwt(e){ws(e,Ax)}function Ji(e,t,r){if(Lj(t))return r(e);const{nocatch:n=!0}=t;Wwt(e),ws(e,t);let i;if(n)i=r(e),xR(e);else try{i=r(e)}finally{xR(e)}return i}function Kh(e){const{luma:t}=e;if(e.canvas&&t){const{clientWidth:r}=t.canvasSizeInfo;return r?e.drawingBufferWidth/r:1}return 1}function _3(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const n=Kh(e),i=e.drawingBufferWidth,o=e.drawingBufferHeight;return Xwt(t,n,i,o,r)}function Hwt(e){const t=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(e)?e<=0?1:e:e?t:1}function Xwt(e,t,r,n,i){const o=MR(e[0],t,r);let a=IR(e[1],t,n,i),s=MR(e[0]+1,t,r);const l=s===r-1?s:s-1;s=IR(e[1]+1,t,n,i);let u;return i?(s=s===0?s:s+1,u=a,a=s):u=s===n-1?s:s-1,{x:o,y:a,width:Math.max(l-o+1,1),height:Math.max(u-a+1,1)}}function MR(e,t,r){return Math.min(Math.round(e*t),r-1)}function IR(e,t,r,n){return n?Math.max(0,r-1-Math.round(e*t)):Math.min(Math.round(e*t),r-1)}const xx=Ls(),Ywt=xx&&typeof document<"u",Rj={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function Dj(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};$n(xx,`createGLContext only available in the browser.
Create your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils`),e=Object.assign({},Rj,e);const{width:t,height:r}=e;function n(s){if(e.throwOnError)throw new Error(s);return console.error(s),null}e.onError=n;let i;const{canvas:o}=e,a=Jwt({canvas:o,width:t,height:r,onError:n});return i=qwt(a,e),i?(i=Mx(i,e),Qwt(i),i):null}function Mx(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e||e._instrumented)return e;e._version=e._version||tSt(e),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{},t=Object.assign({},Rj,t);const{manageState:r,debug:n}=t;return r&&Oj(e,{copyState:!1,log:function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return Xt.log(1,...o)()}}),xx&&n&&(globalThis.makeDebugContext?(e=globalThis.makeDebugContext(e,t),Xt.level=Math.max(Xt.level,1)):Xt.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),e._instrumented=!0,e}function Kwt(e){const t=e.getParameter(7936),r=e.getParameter(7937),n=e.getExtension("WEBGL_debug_renderer_info"),i=n&&e.getParameter(n.UNMASKED_VENDOR_WEBGL||7936),o=n&&e.getParameter(n.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||t,renderer:o||r,vendorMasked:t,rendererMasked:r,version:e.getParameter(7938),shadingLanguageVersion:e.getParameter(35724)}}function Zwt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e.canvas){const n=Hwt(t.useDevicePixels);eSt(e,n,t);return}const r=e.getExtension("STACKGL_resize_drawingbuffer");r&&"width"in t&&"height"in t&&r.resize(t.width,t.height)}function qwt(e,t){const{onError:r}=t;let n=null;const i=l=>n=l.statusMessage||n;e.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:o=!0,webgl2:a=!0}=t;let s=null;return a&&(s=s||e.getContext("webgl2",t),s=s||e.getContext("experimental-webgl2",t)),o&&(s=s||e.getContext("webgl",t),s=s||e.getContext("experimental-webgl",t)),e.removeEventListener("webglcontextcreationerror",i,!1),s?(t.onContextLost&&e.addEventListener("webglcontextlost",t.onContextLost,!1),t.onContextRestored&&e.addEventListener("webglcontextrestored",t.onContextRestored,!1),s):r("Failed to create ".concat(a&&!o?"WebGL2":"WebGL"," context: ").concat(n||"Unknown error"))}function Jwt(e){let{canvas:t,width:r=800,height:n=600,onError:i}=e,o;return typeof t=="string"?(Ywt&&document.readyState==="complete"||i("createGLContext called on canvas '".concat(t,"' before page was loaded")),o=document.getElementById(t)):t?o=t:(o=document.createElement("canvas"),o.id="lumagl-canvas",o.style.width=Number.isFinite(r)?"".concat(r,"px"):"100%",o.style.height=Number.isFinite(n)?"".concat(n,"px"):"100%",document.body.insertBefore(o,document.body.firstChild)),o}function Qwt(e){const t=Pe(e)?"WebGL2":"WebGL1",r=Kwt(e),n=r?"(".concat(r.vendor,",").concat(r.renderer,")"):"",i=e.debug?" debug":"";Xt.info(1,"".concat(t).concat(i," context ").concat(n))()}function tSt(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?2:1}function eSt(e,t,r){let n="width"in r?r.width:e.canvas.clientWidth,i="height"in r?r.height:e.canvas.clientHeight;(!n||!i)&&(Xt.log(1,"Canvas clientWidth/clientHeight is 0")(),t=1,n=e.canvas.width||1,i=e.canvas.height||1),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{};const o=e.luma.canvasSizeInfo;if(o.clientWidth!==n||o.clientHeight!==i||o.devicePixelRatio!==t){let a=t;const s=Math.floor(n*a),l=Math.floor(i*a);e.canvas.width=s,e.canvas.height=l,(e.drawingBufferWidth!==s||e.drawingBufferHeight!==l)&&(Xt.warn("Device pixel ratio clamped")(),a=Math.min(e.drawingBufferWidth/n,e.drawingBufferHeight/i),e.canvas.width=Math.floor(n*a),e.canvas.height=Math.floor(i*a)),Object.assign(e.luma.canvasSizeInfo,{clientWidth:n,clientHeight:i,devicePixelRatio:t})}}const Kg="8.5.16",rSt="set luma.log.level=1 (or higher) to trace rendering";class Nj{constructor(){this.stats=new Map}get(t){return this.stats.has(t)||this.stats.set(t,new l2({id:t})),this.stats.get(t)}}const rc=new Nj;if(globalThis.luma&&globalThis.luma.VERSION!==Kg)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(Kg));globalThis.luma||(Ls()&&Xt.log(1,"luma.gl ".concat(Kg," - ").concat(rSt))(),globalThis.luma=globalThis.luma||{VERSION:Kg,version:Kg,log:Xt,stats:rc,globals:{modules:{},nodeIO:{}}});function nSt(e){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60)}function iSt(e){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e)}function Lt(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}function b3(e,t){if(typeof t!="string")return t;const r=Number(t);if(!isNaN(r))return r;t=t.replace(/^.*\./,"");const n=e[t];return Lt(n!==void 0,"Accessing undefined constant GL.".concat(t)),n}function Rl(e,t){t=Number(t);for(const r in e)if(e[r]===t)return"GL.".concat(r);return String(t)}const w3={};function Xl(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"id";w3[e]=w3[e]||1;const t=w3[e]++;return"".concat(e,"-").concat(t)}function LR(e){return Lt(typeof e=="number","Input must be a number"),e&&(e&e-1)===0}function Zh(e){let t=!0;for(const r in e){t=!1;break}return t}function Fj(e,t,r,n){const i="See luma.gl ".concat(r," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(e);n.forEach(a=>{o.methodName||(o[a]=()=>{throw Xt.removed("Calling removed method ".concat(t,".").concat(a,": "),i)(),new Error(a)})})}const Ff="Resource subclass must define virtual methods";class Os{get[Symbol.toStringTag](){return"Resource"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};f2(t);const{id:n,userData:i={}}=r;this.gl=t,this.gl2=t,this.id=n||Xl(this[Symbol.toStringTag]),this.userData=i,this._bound=!1,this._handle=r.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._initStats(),this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,r&&t&&r.filter(Boolean).forEach(n=>n.delete()),this}bind(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.handle;if(typeof t!="function")return this._bindHandle(t),this;let r;return this._bound?r=t():(this._bindHandle(this.handle),this._bound=!0,r=t(),this._bound=!1,this._bindHandle(null)),r}unbind(){this.bind(null)}getParameter(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t=b3(this.gl,t),Lt(t);const i=(this.constructor.PARAMETERS||{})[t];if(i){const o=Pe(this.gl);if(!((!("webgl2"in i)||o)&&(!("extension"in i)||this.gl.getExtension(i.extension)))){const s=i.webgl1,l="webgl2"in i?i.webgl2:i.webgl1;return o?l:s}}return this._getParameter(t,r)}getParameters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{parameters:r,keys:n}=t,i=this.constructor.PARAMETERS||{},o=Pe(this.gl),a={},s=r||Object.keys(i);for(const l of s){const u=i[l];if(u&&(!("webgl2"in u)||o)&&(!("extension"in u)||this.gl.getExtension(u.extension))){const f=n?Rl(this.gl,l):l;a[f]=this.getParameter(l,t),n&&u.type==="GLenum"&&(a[f]=Rl(this.gl,a[f]))}}return a}setParameter(t,r){t=b3(this.gl,t),Lt(t);const i=(this.constructor.PARAMETERS||{})[t];if(i){const o=Pe(this.gl);if(!((!("webgl2"in i)||o)&&(!("extension"in i)||this.gl.getExtension(i.extension))))throw new Error("Parameter not available on this platform");i.type==="GLenum"&&(r=b3(r))}return this._setParameter(t,r),this}setParameters(t){for(const r in t)this.setParameter(r,t[r]);return this}stubRemovedMethods(t,r,n){return Fj(this,t,r,n)}initialize(t){}_createHandle(){throw new Error(Ff)}_deleteHandle(){throw new Error(Ff)}_bindHandle(t){throw new Error(Ff)}_getOptsFromHandle(){throw new Error(Ff)}_getParameter(t,r){throw new Error(Ff)}_setParameter(t,r){throw new Error(Ff)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_initStats(){this.gl.stats=this.gl.stats||new Nj}_addStats(){const t=this[Symbol.toStringTag],r=rc.get("Resource Counts");r.get("Resources Created").incrementCount(),r.get("".concat(t,"s Created")).incrementCount(),r.get("".concat(t,"s Active")).incrementCount()}_removeStats(){const t=this[Symbol.toStringTag];rc.get("Resource Counts").get("".concat(t,"s Active")).decrementCount()}_trackAllocatedMemory(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag];this._doTrackAllocatedMemory(t,r),this._doTrackAllocatedMemory(t,r,this.gl.stats.get("Memory Usage"))}_doTrackAllocatedMemory(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:rc.get("Memory Usage");n.get("GPU Memory").addCount(t),n.get("".concat(r," Memory")).addCount(t),this.byteLength=t}_trackDeallocatedMemory(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag];this._doTrackDeallocatedMemory(t),this._doTrackDeallocatedMemory(t,this.gl.stats.get("Memory Usage"))}_doTrackDeallocatedMemory(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:rc.get("Memory Usage");r.get("GPU Memory").subtractCount(this.byteLength),r.get("".concat(t," Memory")).subtractCount(this.byteLength),this.byteLength=0}}const oSt="Failed to deduce GL constant from typed array";function lE(e){switch(ArrayBuffer.isView(e)?e.constructor:e){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(oSt)}}function Pv(e){let{clamped:t=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(e){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return t?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function aSt(e){let{data:t,width:r,height:n,bytesPerPixel:i=4,temp:o}=e;const a=r*i;o=o||new Uint8Array(a);for(let s=0;s<n/2;++s){const l=s*a,u=(n-s-1)*a;o.set(t.subarray(l,l+a)),t.copyWithin(l,u,u+a),t.set(o,u)}}function sSt(e){let{data:t,width:r,height:n}=e;const i=Math.round(r/2),o=Math.round(n/2),a=new Uint8Array(i*o*4);for(let s=0;s<o;s++)for(let l=0;l<i;l++)for(let u=0;u<4;u++)a[(s*i+l)*4+u]=t[(s*2*r+l*2)*4+u];return{data:a,width:i,height:o}}function uE(e,t,r){const{removedProps:n={},deprecatedProps:i={},replacedProps:o={}}=r;for(const s in n)if(s in t){const u=n[s]?"".concat(e,".").concat(n[s]):"N/A";Xt.removed("".concat(e,".").concat(s),u)()}for(const s in i)if(s in t){const l=i[s];Xt.deprecated("".concat(e,".").concat(s),"".concat(e,".").concat(l))()}let a=null;for(const s in o)if(s in t){const l=o[s];Xt.deprecated("".concat(e,".").concat(s),"".concat(e,".").concat(l))(),a=a||Object.assign({},t),a[l]=t[s],delete a[s]}return a||t}const lSt={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},uSt={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class vi{static getBytesPerElement(t){return Pv(t.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(t){return Lt(t.size),Pv(t.type||5126).BYTES_PER_ELEMENT*t.size}static resolve(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return new vi(lSt,...r)}constructor(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];r.forEach(i=>this._assign(i)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return vi.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return vi.getBytesPerVertex(this)}_assign(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t=uE("Accessor",t,uSt),t.type!==void 0&&(this.type=t.type,(t.type===5124||t.type===5125)&&(this.integer=!0)),t.size!==void 0&&(this.size=t.size),t.offset!==void 0&&(this.offset=t.offset),t.stride!==void 0&&(this.stride=t.stride),t.normalized!==void 0&&(this.normalized=t.normalized),t.integer!==void 0&&(this.integer=t.integer),t.divisor!==void 0&&(this.divisor=t.divisor),t.buffer!==void 0&&(this.buffer=t.buffer),t.index!==void 0&&(typeof t.index=="boolean"?this.index=t.index?1:0:this.index=t.index),t.instanced!==void 0&&(this.divisor=t.instanced?1:0),t.isInstanced!==void 0&&(this.divisor=t.isInstanced?1:0),this}}const OR=10,$j={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},cSt={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:$j},fSt={removedProps:$j};class Ye extends Os{get[Symbol.toStringTag](){return"Buffer"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=r.target||(this.gl.webgl2?36662:34962),this.initialize(r),Object.seal(this)}getElementCount(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/vi.getBytesPerElement(t))}getVertexCount(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/vi.getBytesPerVertex(t))}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ArrayBuffer.isView(t)&&(t={data:t}),Number.isFinite(t)&&(t={byteLength:t}),t=uE("Buffer",t,cSt),this.usage=t.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},t,t.accessor)),t.data?this._setData(t.data,t.offset,t.byteLength):this._setByteLength(t.byteLength||0),this}setProps(t){return t=uE("Buffer",t,fSt),"accessor"in t&&this.setAccessor(t.accessor),this}setAccessor(t){return t=Object.assign({},t),delete t.buffer,this.accessor=new vi(t),this}reallocate(t){return t>this.byteLength?(this._setByteLength(t),!0):(this.bytesUsed=t,!1)}setData(t){return this.initialize(t)}subData(t){ArrayBuffer.isView(t)&&(t={data:t});const{data:r,offset:n=0,srcOffset:i=0}=t,o=t.byteLength||t.length;Lt(r);const a=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(a,this.handle),i!==0||o!==void 0?(En(this.gl),this.gl.bufferSubData(this.target,n,r,i,o)):this.gl.bufferSubData(a,n,r),this.gl.bindBuffer(a,null),this.debugData=null,this._inferType(r),this}copyData(t){let{sourceBuffer:r,readOffset:n=0,writeOffset:i=0,size:o}=t;const{gl:a}=this;return En(a),a.bindBuffer(36662,r.handle),a.bindBuffer(36663,this.handle),a.copyBufferSubData(36662,36663,n,i,o),a.bindBuffer(36662,null),a.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:t=null,srcByteOffset:r=0,dstOffset:n=0,length:i=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};En(this.gl);const o=Pv(this.accessor.type||5126,{clamped:!1}),a=this._getAvailableElementCount(r),s=n;let l,u;t?(u=t.length,l=u-s):(l=Math.min(a,i||a),u=s+l);const c=Math.min(a,l);return i=i||c,Lt(i<=c),t=t||new o(u),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,r,t,n,i),this.gl.bindBuffer(36662,null),t}bind(){let{target:t=this.target,index:r=this.accessor&&this.accessor.index,offset:n=0,size:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t===35345||t===35982?i!==void 0?this.gl.bindBufferRange(t,r,this.handle,n,i):(Lt(n===0),this.gl.bindBufferBase(t,r,this.handle)):this.gl.bindBuffer(t,this.handle),this}unbind(){let{target:t=this.target,index:r=this.accessor&&this.accessor.index}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t===35345||t===35982?this.gl.bindBufferBase(t,r,null):this.gl.bindBuffer(t,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(OR,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.byteLength+r;Lt(ArrayBuffer.isView(t)),this._trackDeallocatedMemory();const i=this._getTarget();this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,n,this.usage),this.gl.bufferSubData(i,r,t),this.gl.bindBuffer(i,null),this.debugData=t.slice(0,OR),this.bytesUsed=n,this._trackAllocatedMemory(n);const o=lE(t);return Lt(o),this.setAccessor(new vi(this.accessor,{type:o})),this}_setByteLength(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.usage;Lt(t>=0),this._trackDeallocatedMemory();let n=t;t===0&&(n=new Float32Array(0));const i=this._getTarget();return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,n,r),this.gl.bindBuffer(i,null),this.usage=r,this.debugData=null,this.bytesUsed=t,this._trackAllocatedMemory(t),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(t){const r=Pv(this.accessor.type||5126,{clamped:!1}),n=t/r.BYTES_PER_ELEMENT;return this.getElementCount()-n}_inferType(t){this.accessor.type||this.setAccessor(new vi(this.accessor,{type:lE(t)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(t){this.gl.bindBuffer(this.target,this.handle);const r=this.gl.getBufferParameter(this.target,t);return this.gl.bindBuffer(this.target,null),r}get type(){return Xt.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return Xt.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(t){return Xt.deprecated("setByteLength","reallocate")(),this.reallocate(t)}updateAccessor(t){return Xt.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new vi(this.accessor,t),this}}const Ix={[6407]:{dataFormat:6407,types:[5121,33635]},[6408]:{dataFormat:6408,types:[5121,32819,32820]},[6406]:{dataFormat:6406,types:[5121]},[6409]:{dataFormat:6409,types:[5121]},[6410]:{dataFormat:6410,types:[5121]},[33326]:{dataFormat:6403,types:[5126],gl2:!0},[33328]:{dataFormat:33319,types:[5126],gl2:!0},[34837]:{dataFormat:6407,types:[5126],gl2:!0},[34836]:{dataFormat:6408,types:[5126],gl2:!0}},Bj={[6403]:1,[36244]:1,[33319]:2,[33320]:2,[6407]:3,[36248]:3,[6408]:4,[36249]:4,[6402]:1,[34041]:1,[6406]:1,[6409]:1,[6410]:2},zj={[5126]:4,[5125]:4,[5124]:4,[5123]:2,[5122]:2,[5131]:2,[5120]:1,[5121]:1};function hSt(e,t){const r=Ix[t];if(!r)return!1;if(r.gl1===void 0&&r.gl2===void 0)return!0;const n=Pe(e)&&r.gl2||r.gl1;return typeof n=="string"?e.getExtension(n):n}function dSt(e,t){const r=Ix[t];switch(r&&r.types[0]){case 5126:return e.getExtension("OES_texture_float_linear");case 5131:return e.getExtension("OES_texture_half_float_linear");default:return!0}}const pSt=[9729,9728],RR=globalThis.WebGLBuffer||function(){};class xc extends Os{get[Symbol.toStringTag](){return"Texture"}static isSupported(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{format:n,linearFiltering:i}=r;let o=!0;return n&&(o=o&&hSt(t,n),o=o&&(!i||dSt(t,n))),o}constructor(t,r){const{id:n=Xl("texture"),handle:i,target:o}=r;super(t,{id:n,handle:i}),this.target=o,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.data;if(r instanceof Promise)return r.then(y=>this.initialize(Object.assign({},t,{pixels:y,data:y}))),this;const n=typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement;if(n&&r.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,r.addEventListener("loadeddata",()=>this.initialize(t)),this;const{pixels:i=null,format:o=6408,border:a=0,recreate:s=!1,parameters:l={},pixelStore:u={},textureUnit:c=void 0}=t;r||(r=i);let{width:f,height:h,dataFormat:d,type:p,compressed:g=!1,mipmaps:m=!0}=t;const{depth:v=0}=t;return{width:f,height:h,compressed:g,dataFormat:d,type:p}=this._deduceParameters({format:o,type:p,dataFormat:d,compressed:g,data:r,width:f,height:h}),this.width=f,this.height=h,this.depth=v,this.format=o,this.type=p,this.dataFormat=d,this.border=a,this.textureUnit=c,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),m&&this._isNPOT()&&(Xt.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),m=!1,this._updateForNPOT(l)),this.mipmaps=m,this.setImageData({data:r,width:f,height:h,depth:v,format:o,type:p,dataFormat:d,border:a,mipmaps:m,parameters:u,compressed:g}),m&&this.generateMipmap(),this.setParameters(l),s&&(this.data=r),n&&(this._video={video:r,parameters:l,lastTime:r.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?r.currentTime:-1}),this}update(){if(this._video){const{video:t,parameters:r,lastTime:n}=this._video;if(n===t.currentTime||t.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:t,parameters:r}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=t.currentTime}}resize(t){let{height:r,width:n,mipmaps:i=!1}=t;return n!==this.width||r!==this.height?this.initialize({width:n,height:r,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}generateMipmap(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isNPOT()?(Xt.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Ji(this.gl,t,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(t){this._trackDeallocatedMemory("Texture");const{target:r=this.target,pixels:n=null,level:i=0,format:o=this.format,border:a=this.border,offset:s=0,parameters:l={}}=t;let{data:u=null,type:c=this.type,width:f=this.width,height:h=this.height,dataFormat:d=this.dataFormat,compressed:p=!1}=t;u||(u=n),{type:c,dataFormat:d,compressed:p,width:f,height:h}=this._deduceParameters({format:o,type:c,dataFormat:d,compressed:p,data:u,width:f,height:h});const{gl:g}=this;g.bindTexture(this.target,this.handle);let m=null;({data:u,dataType:m}=this._getDataType({data:u,compressed:p}));let v,y=0;if(Ji(this.gl,l,()=>{switch(m){case"null":g.texImage2D(r,i,o,f,h,a,d,c,u);break;case"typed-array":g.texImage2D(r,i,o,f,h,a,d,c,u,s);break;case"buffer":v=En(g),v.bindBuffer(35052,u.handle||u),v.texImage2D(r,i,o,f,h,a,d,c,s),v.bindBuffer(35052,null);break;case"browser-object":Pe(g)?g.texImage2D(r,i,o,f,h,a,d,c,u):g.texImage2D(r,i,o,d,c,u);break;case"compressed":for(const[b,w]of u.entries())g.compressedTexImage2D(r,b,w.format,w.width,w.height,a,w.data),y+=w.levelSize;break;default:Lt(!1,"Unknown image data type")}}),m==="compressed")this._trackAllocatedMemory(y,"Texture");else if(u&&u.byteLength)this._trackAllocatedMemory(u.byteLength,"Texture");else{const b=Bj[this.dataFormat]||4,w=zj[this.type]||1;this._trackAllocatedMemory(this.width*this.height*b*w,"Texture")}return this.loaded=!0,this}setSubImageData(t){let{target:r=this.target,pixels:n=null,data:i=null,x:o=0,y:a=0,width:s=this.width,height:l=this.height,level:u=0,format:c=this.format,type:f=this.type,dataFormat:h=this.dataFormat,compressed:d=!1,offset:p=0,border:g=this.border,parameters:m={}}=t;if({type:f,dataFormat:h,compressed:d,width:s,height:l}=this._deduceParameters({format:c,type:f,dataFormat:h,compressed:d,data:i,width:s,height:l}),Lt(this.depth===0,"texSubImage not supported for 3D textures"),i||(i=n),i&&i.data){const v=i;i=v.data,s=v.shape[0],l=v.shape[1]}i instanceof Ye&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),Ji(this.gl,m,()=>{if(d)this.gl.compressedTexSubImage2D(r,u,o,a,s,l,c,i);else if(i===null)this.gl.texSubImage2D(r,u,o,a,s,l,h,f,null);else if(ArrayBuffer.isView(i))this.gl.texSubImage2D(r,u,o,a,s,l,h,f,i,p);else if(i instanceof RR){const v=En(this.gl);v.bindBuffer(35052,i),v.texSubImage2D(r,u,o,a,s,l,h,f,p),v.bindBuffer(35052,null)}else Pe(this.gl)?En(this.gl).texSubImage2D(r,u,o,a,s,l,h,f,i):this.gl.texSubImage2D(r,u,o,a,h,f,i)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return Xt.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:r}=this;return t!==void 0&&(this.textureUnit=t,r.activeTexture(33984+t)),r.bindTexture(this.target,this.handle),t}unbind(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:r}=this;return t!==void 0&&(this.textureUnit=t,r.activeTexture(33984+t)),r.bindTexture(this.target,null),t}_getDataType(t){let{data:r,compressed:n=!1}=t;return n?{data:r,dataType:"compressed"}:r===null?{data:r,dataType:"null"}:ArrayBuffer.isView(r)?{data:r,dataType:"typed-array"}:r instanceof Ye?{data:r.handle,dataType:"buffer"}:r instanceof RR?{data:r,dataType:"buffer"}:{data:r,dataType:"browser-object"}}_deduceParameters(t){const{format:r,data:n}=t;let{width:i,height:o,dataFormat:a,type:s,compressed:l}=t;const u=Ix[r];return a=a||u&&u.dataFormat,s=s||u&&u.types[0],l=l||u&&u.compressed,{width:i,height:o}=this._deduceImageSize(n,i,o),{dataFormat:a,type:s,compressed:l,width:i,height:o,format:r,data:n}}_deduceImageSize(t,r,n){let i;return typeof ImageData<"u"&&t instanceof ImageData?i={width:t.width,height:t.height}:typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement?i={width:t.naturalWidth,height:t.naturalHeight}:typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement?i={width:t.width,height:t.height}:typeof ImageBitmap<"u"&&t instanceof ImageBitmap?i={width:t.width,height:t.height}:typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?i={width:t.videoWidth,height:t.videoHeight}:t?i={width:r,height:n}:i={width:r>=0?r:1,height:n>=0?n:1},Lt(i,"Could not deduced texture size"),Lt(r===void 0||i.width===r,"Deduced texture width does not match supplied width"),Lt(n===void 0||i.height===n,"Deduced texture height does not match supplied height"),i}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(t){switch(t){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const r=this.gl.getTexParameter(this.target,t);return this.gl.bindTexture(this.target,null),r}}_setParameter(t,r){switch(this.gl.bindTexture(this.target,this.handle),r=this._getNPOTParam(t,r),t){case 33082:case 33083:this.gl.texParameterf(this.handle,t,r);break;case 4096:case 4097:Lt(!1);break;default:this.gl.texParameteri(this.target,t,r);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return Pe(this.gl)||!this.width||!this.height?!1:!LR(this.width)||!LR(this.height)}_updateForNPOT(t){t[this.gl.TEXTURE_MIN_FILTER]===void 0&&(t[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),t[this.gl.TEXTURE_WRAP_S]===void 0&&(t[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),t[this.gl.TEXTURE_WRAP_T]===void 0&&(t[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(t,r){if(this._isNPOT())switch(t){case 10241:pSt.indexOf(r)===-1&&(r=9729);break;case 10242:case 10243:r!==33071&&(r=33071);break}return r}}let gSt="";function vSt(e,t){return Lt(typeof e=="string"),e=gSt+e,new Promise((r,n)=>{try{const i=new Image;i.onload=()=>r(i),i.onerror=()=>n(new Error("Could not load image ".concat(e,"."))),i.crossOrigin=t&&t.crossOrigin||"anonymous",i.src=e}catch(i){n(i)}})}class oi extends xc{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(t,r){return xc.isSupported(t,r)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};f2(t),(r instanceof Promise||typeof r=="string")&&(r={data:r}),typeof r.data=="string"&&(r=Object.assign({},r,{data:vSt(r.data)})),super(t,Object.assign({},r,{target:3553})),this.initialize(r),Object.seal(this)}}const cE=[34069,34070,34071,34072,34073,34074];class Vj extends xc{get[Symbol.toStringTag](){return"TextureCube"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};f2(t),super(t,Object.assign({},r,{target:34067})),this.initialize(r),Object.seal(this)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{mipmaps:r=!0,parameters:n={}}=t;return this.opts=t,this.setCubeMapImageData(t).then(()=>{this.loaded=!0,r&&this.generateMipmap(t),this.setParameters(n)}),this}subImage(t){let{face:r,data:n,x:i=0,y:o=0,mipmapLevel:a=0}=t;return this._subImage({target:r,data:n,x:i,y:o,mipmapLevel:a})}async setCubeMapImageData(t){let{width:r,height:n,pixels:i,data:o,border:a=0,format:s=6408,type:l=5121}=t;const{gl:u}=this,c=i||o,f=await Promise.all(cE.map(h=>{const d=c[h];return Promise.all(Array.isArray(d)?d:[d])}));this.bind(),cE.forEach((h,d)=>{f[d].length>1&&this.opts.mipmaps!==!1&&Xt.warn("".concat(this.id," has mipmap and multiple LODs."))(),f[d].forEach((p,g)=>{r&&n?u.texImage2D(h,g,s,r,n,a,s,l,p):u.texImage2D(h,g,s,s,l,p)})}),this.unbind()}setImageDataForFace(t){const{face:r,width:n,height:i,pixels:o,data:a,border:s=0,format:l=6408,type:u=5121}=t,{gl:c}=this,f=o||a;return this.bind(),f instanceof Promise?f.then(h=>this.setImageDataForFace(Object.assign({},t,{face:r,data:h,pixels:h}))):this.width||this.height?c.texImage2D(r,0,l,n,i,s,l,u,f):c.texImage2D(r,0,l,l,u,f),this}}Vj.FACES=cE;class mSt extends xc{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(t){return Pe(t)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};En(t),r=Object.assign({depth:1},r,{target:32879,unpackFlipY:!1}),super(t,r),this.initialize(r),Object.seal(this)}setImageData(t){let{level:r=0,dataFormat:n=6408,width:i,height:o,depth:a=1,border:s=0,format:l,type:u=5121,offset:c=0,data:f,parameters:h={}}=t;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Ji(this.gl,h,()=>{ArrayBuffer.isView(f)&&this.gl.texImage3D(this.target,r,n,i,o,a,s,l,u,f),f instanceof Ye&&(this.gl.bindBuffer(35052,f.handle),this.gl.texImage3D(this.target,r,n,i,o,a,s,l,u,c))}),f&&f.byteLength)this._trackAllocatedMemory(f.byteLength,"Texture");else{const d=Bj[this.dataFormat]||4,p=zj[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*d*p,"Texture")}return this.loaded=!0,this}}const Nu="EXT_color_buffer_float",DR={[33189]:{bpp:2},[33190]:{gl2:!0,bpp:3},[36012]:{gl2:!0,bpp:4},[36168]:{bpp:1},[34041]:{bpp:4},[35056]:{gl2:!0,bpp:4},[36013]:{gl2:!0,bpp:5},[32854]:{bpp:2},[36194]:{bpp:2},[32855]:{bpp:2},[33321]:{gl2:!0,bpp:1},[33330]:{gl2:!0,bpp:1},[33329]:{gl2:!0,bpp:1},[33332]:{gl2:!0,bpp:2},[33331]:{gl2:!0,bpp:2},[33334]:{gl2:!0,bpp:4},[33333]:{gl2:!0,bpp:4},[33323]:{gl2:!0,bpp:2},[33336]:{gl2:!0,bpp:2},[33335]:{gl2:!0,bpp:2},[33338]:{gl2:!0,bpp:4},[33337]:{gl2:!0,bpp:4},[33340]:{gl2:!0,bpp:8},[33339]:{gl2:!0,bpp:8},[32849]:{gl2:!0,bpp:3},[32856]:{gl2:!0,bpp:4},[32857]:{gl2:!0,bpp:4},[36220]:{gl2:!0,bpp:4},[36238]:{gl2:!0,bpp:4},[36975]:{gl2:!0,bpp:4},[36214]:{gl2:!0,bpp:8},[36232]:{gl2:!0,bpp:8},[36226]:{gl2:!0,bpp:16},[36208]:{gl2:!0,bpp:16},[33325]:{gl2:Nu,bpp:2},[33327]:{gl2:Nu,bpp:4},[34842]:{gl2:Nu,bpp:8},[33326]:{gl2:Nu,bpp:4},[33328]:{gl2:Nu,bpp:8},[34836]:{gl2:Nu,bpp:16},[35898]:{gl2:Nu,bpp:4}};function ySt(e,t,r){const n=r[t];if(!n)return!1;const i=Pe(e)&&n.gl2||n.gl1;return typeof i=="string"?e.getExtension(i):i}class hh extends Os{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(t){let{format:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{format:null};return!r||ySt(t,r,DR)}static getSamplesForFormat(t,r){let{format:n}=r;return t.getInternalformatParameter(36161,n,32937)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.initialize(r),Object.seal(this)}initialize(t){let{format:r,width:n=1,height:i=1,samples:o=0}=t;return Lt(r,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),o!==0&&Pe(this.gl)?this.gl.renderbufferStorageMultisample(36161,o,r,n,i):this.gl.renderbufferStorage(36161,r,n,i),this.format=r,this.width=n,this.height=i,this.samples=o,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*DR[this.format].bpp),this}resize(t){let{width:r,height:n}=t;return r!==this.width||n!==this.height?this.initialize({width:r,height:n,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(t){this.gl.bindRenderbuffer(36161,t)}_syncHandle(t){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(t){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,t)}}const _St=256,bSt=1024,wSt=16384,NR=6144,FR=6145,$R=6146,BR=34041,Uj="clear: bad arguments";function Lx(e){let{framebuffer:t=null,color:r=null,depth:n=null,stencil:i=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o={};t&&(o.framebuffer=t);let a=0;r&&(a|=wSt,r!==!0&&(o.clearColor=r)),n&&(a|=_St,n!==!0&&(o.clearDepth=n)),i&&(a|=bSt,n!==!0&&(o.clearStencil=n)),Lt(a!==0,Uj),Ji(e,o,()=>{e.clear(a)})}function SSt(e){let{framebuffer:t=null,buffer:r=NR,drawBuffer:n=0,value:i=[0,0,0,0]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};En(e),Ji(e,{framebuffer:t},()=>{switch(r){case NR:switch(i.constructor){case Int32Array:e.clearBufferiv(r,n,i);break;case Uint32Array:e.clearBufferuiv(r,n,i);break;case Float32Array:default:e.clearBufferfv(r,n,i)}break;case FR:e.clearBufferfv(FR,0,[i]);break;case $R:e.clearBufferiv($R,0,[i]);break;case BR:const[o,a]=i;e.clearBufferfi(BR,0,o,a);break;default:Lt(!1,Uj)}})}function TSt(e){switch(e){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Lt(!1),0}}function h2(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{sourceX:r=0,sourceY:n=0,sourceFormat:i=6408}=t;let{sourceAttachment:o=36064,target:a=null,sourceWidth:s,sourceHeight:l,sourceType:u}=t;const{framebuffer:c,deleteFramebuffer:f}=Wj(e);Lt(c);const{gl:h,handle:d,attachments:p}=c;s=s||c.width,l=l||c.height,o===36064&&d===null&&(o=1028),Lt(p[o]),u=u||p[o].type,a=PSt(a,u,i,s,l),u=u||lE(a);const g=h.bindFramebuffer(36160,d);return h.readPixels(r,n,s,l,i,u,a),h.bindFramebuffer(36160,g||null),f&&c.delete(),a}function zR(e){let{sourceAttachment:t=36064,targetMaxHeight:r=Number.MAX_SAFE_INTEGER}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=h2(e,{sourceAttachment:t}),{width:i,height:o}=e;for(;o>r;)({data:n,width:i,height:o}=sSt({data:n,width:i,height:o}));aSt({data:n,width:i,height:o});const a=document.createElement("canvas");a.width=i,a.height=o;const s=a.getContext("2d"),l=s.createImageData(i,o);return l.data.set(n),s.putImageData(l,0,0),a.toDataURL()}function kSt(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{sourceX:n=0,sourceY:i=0,targetMipmaplevel:o=0,targetInternalFormat:a=6408}=r;let{targetX:s,targetY:l,targetZ:u,width:c,height:f}=r;const{framebuffer:h,deleteFramebuffer:d}=Wj(e);Lt(h);const{gl:p,handle:g}=h,m=typeof s<"u"||typeof l<"u"||typeof u<"u";s=s||0,l=l||0,u=u||0;const v=p.bindFramebuffer(36160,g);Lt(t);let y=null;if(t instanceof xc&&(y=t,c=Number.isFinite(c)?c:y.width,f=Number.isFinite(f)?f:y.height,y.bind(0),t=y.target),!m)p.copyTexImage2D(t,o,a,n,i,c,f,0);else switch(t){case 3553:case 34067:p.copyTexSubImage2D(t,o,s,l,n,i,c,f);break;case 35866:case 32879:En(p).copyTexSubImage3D(t,o,s,l,u,n,i,c,f);break}return y&&y.unbind(),p.bindFramebuffer(36160,v||null),d&&h.delete(),y}function Wj(e){return e instanceof $r?{framebuffer:e,deleteFramebuffer:!1}:{framebuffer:RSt(e),deleteFramebuffer:!0}}function PSt(e,t,r,n,i){if(e)return e;t=t||5121;const o=Pv(t,{clamped:!1}),a=TSt(r);return new o(n*i*a)}const ur={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function ESt(e){const t=new oi(e,{format:6408,type:5126,dataFormat:6408}),r=new $r(e,{id:"test-framebuffer",check:!1,attachments:{[36064]:t}}),n=r.getStatus();return t.delete(),r.delete(),n===36053}const jj={[ur.WEBGL2]:[!1,!0],[ur.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[ur.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[ur.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[ur.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[ur.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[ur.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[ur.FLOAT_BLEND]:["EXT_float_blend"],[ur.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[ur.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[ur.TEXTURE_FLOAT]:["OES_texture_float",!0],[ur.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[ur.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[ur.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[ur.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[ur.COLOR_ATTACHMENT_RGBA32F]:[ESt,"EXT_color_buffer_float"],[ur.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[ur.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[ur.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[ur.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[ur.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[ur.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]},CSt=2;function ASt(e,t){return Ox(e,t)}function Ox(e,t){return t=Array.isArray(t)?t:[t],t.every(r=>Gj(e,r))}function xSt(e){e.luma=e.luma||{},e.luma.caps=e.luma.caps||{};for(const t in jj)e.luma.caps[t]===void 0&&(e.luma.caps[t]=Gj(e,t));return e.luma.caps}function Gj(e,t){return e.luma=e.luma||{},e.luma.caps=e.luma.caps||{},e.luma.caps[t]===void 0&&(e.luma.caps[t]=MSt(e,t)),e.luma.caps[t]||Xt.log(CSt,"Feature: ".concat(t," not supported"))(),e.luma.caps[t]}function MSt(e,t){const r=jj[t];Lt(r,t);let n;const i=Pe(e)&&r[1]||r[0];if(typeof i=="function")n=i(e);else if(Array.isArray(i)){n=!0;for(const o of i)n=n&&Boolean(e.getExtension(o))}else typeof i=="string"?n=Boolean(e.getExtension(i)):typeof i=="boolean"?n=i:Lt(!1);return n}const VR="Multiple render targets not supported";class $r extends Os{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{colorBufferFloat:n,colorBufferHalfFloat:i}=r;let o=!0;return n&&(o=Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("WEBGL_color_buffer_float")||t.getExtension("OES_texture_float"))),i&&(o=o&&Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("EXT_color_buffer_half_float"))),o}static getDefaultFramebuffer(t){return t.luma=t.luma||{},t.luma.defaultFramebuffer=t.luma.defaultFramebuffer||new $r(t,{id:"default-framebuffer",handle:null,attachments:{}}),t.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const t=En(this.gl);return t.getParameter(t.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const t=En(this.gl);return t.getParameter(t.MAX_DRAW_BUFFERS)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(r),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(t){let{width:r=1,height:n=1,attachments:i=null,color:o=!0,depth:a=!0,stencil:s=!1,check:l=!0,readBuffer:u=void 0,drawBuffers:c=void 0}=t;if(Lt(r>=0&&n>=0,"Width and height need to be integers"),this.width=r,this.height=n,i)for(const f in i){const h=i[f];(Array.isArray(h)?h[0]:h).resize({width:r,height:n})}else i=this._createDefaultAttachments(o,a,s,r,n);this.update({clearAttachments:!0,attachments:i,readBuffer:u,drawBuffers:c}),i&&l&&this.checkStatus()}delete(){for(const t of this.ownResources)t.delete();return super.delete(),this}update(t){let{attachments:r={},readBuffer:n,drawBuffers:i,clearAttachments:o=!1,resizeAttachments:a=!0}=t;this.attach(r,{clearAttachments:o,resizeAttachments:a});const{gl:s}=this,l=s.bindFramebuffer(36160,this.handle);return n&&this._setReadBuffer(n),i&&this._setDrawBuffers(i),s.bindFramebuffer(36160,l||null),this}resize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{width:r,height:n}=t;if(this.handle===null)return Lt(r===void 0&&n===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;r===void 0&&(r=this.gl.drawingBufferWidth),n===void 0&&(n=this.gl.drawingBufferHeight),r!==this.width&&n!==this.height&&Xt.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(r,"x").concat(n))();for(const i in this.attachments)this.attachments[i].resize({width:r,height:n});return this.width=r,this.height=n,this}attach(t){let{clearAttachments:r=!1,resizeAttachments:n=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i={};r&&Object.keys(this.attachments).forEach(a=>{i[a]=null}),Object.assign(i,t);const o=this.gl.bindFramebuffer(36160,this.handle);for(const a in i){Lt(a!==void 0,"Misspelled framebuffer binding point?");const s=Number(a),l=i[s];let u=l;if(!u)this._unattach(s);else if(u instanceof hh)this._attachRenderbuffer({attachment:s,renderbuffer:u});else if(Array.isArray(l)){const[c,f=0,h=0]=l;u=c,this._attachTexture({attachment:s,texture:c,layer:f,level:h})}else this._attachTexture({attachment:s,texture:u,layer:0,level:0});n&&u&&u.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,o||null),Object.assign(this.attachments,t),Object.keys(this.attachments).filter(a=>!this.attachments[a]).forEach(a=>{delete this.attachments[a]})}checkStatus(){const t=this.getStatus();if(t!==36053)throw new Error(LSt(t));return this}getStatus(){const{gl:t}=this,r=t.bindFramebuffer(36160,this.handle),n=t.checkFramebufferStatus(36160);return t.bindFramebuffer(36160,r||null),n}clear(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{color:r,depth:n,stencil:i,drawBuffers:o=[]}=t,a=this.gl.bindFramebuffer(36160,this.handle);return(r||n||i)&&Lx(this.gl,{color:r,depth:n,stencil:i}),o.forEach((s,l)=>{SSt(this.gl,{drawBuffer:l,value:s})}),this.gl.bindFramebuffer(36160,a||null),this}readPixels(){return Xt.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return Xt.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return Xt.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return Xt.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return Xt.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return Xt.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(t){let{attachments:r=[],x:n=0,y:i=0,width:o,height:a}=t;const s=En(this.gl),l=s.bindFramebuffer(36008,this.handle);return n===0&&i===0&&o===void 0&&a===void 0?s.invalidateFramebuffer(36008,r):s.invalidateFramebuffer(36008,r,n,i,o,a),s.bindFramebuffer(36008,l),this}getAttachmentParameter(t,r,n){let i=this._getAttachmentParameterFallback(r);return i===null&&(this.gl.bindFramebuffer(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,t,r),this.gl.bindFramebuffer(36160,null)),n&&i>1e3&&(i=Rl(this.gl,i)),i}getAttachmentParameters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:36064,r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const i={};for(const o of n){const a=r?Rl(this.gl,o):o;i[a]=this.getAttachmentParameter(t,o,r)}return i}getParameters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const r=Object.keys(this.attachments),n={};for(const i of r){const o=Number(i),a=t?Rl(this.gl,o):o;n[a]=this.getAttachmentParameters(o,t)}return n}show(){return typeof window<"u"&&window.open(zR(this),"luma-debug-texture"),this}log(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(t>Xt.level||typeof window>"u")return this;r=r||"Framebuffer ".concat(this.id);const n=zR(this,{targetMaxHeight:100});return Xt.image({logLevel:t,message:r,image:n},r)(),this}bind(){let{target:t=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(t,this.handle),this}unbind(){let{target:t=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(t,null),this}_createDefaultAttachments(t,r,n,i,o){let a=null;return t&&(a=a||{},a[36064]=new oi(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:i,height:o,mipmaps:!1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.ownResources.push(a[36064])),r&&n?(a=a||{},a[33306]=new hh(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:i,height:111}),this.ownResources.push(a[33306])):r?(a=a||{},a[36096]=new hh(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:i,height:o}),this.ownResources.push(a[36096])):n&&Lt(!1),a}_unattach(t){const r=this.attachments[t];!r||(r instanceof hh?this.gl.framebufferRenderbuffer(36160,t,36161,null):this.gl.framebufferTexture2D(36160,t,3553,null,0),delete this.attachments[t])}_attachRenderbuffer(t){let{attachment:r=36064,renderbuffer:n}=t;const{gl:i}=this;i.framebufferRenderbuffer(36160,r,36161,n.handle),this.attachments[r]=n}_attachTexture(t){let{attachment:r=36064,texture:n,layer:i,level:o}=t;const{gl:a}=this;switch(a.bindTexture(n.target,n.handle),n.target){case 35866:case 32879:En(a).framebufferTextureLayer(36160,r,n.target,o,i);break;case 34067:const l=ISt(i);a.framebufferTexture2D(36160,r,l,n.handle,o);break;case 3553:a.framebufferTexture2D(36160,r,3553,n.handle,o);break;default:Lt(!1,"Illegal texture type")}a.bindTexture(n.target,null),this.attachments[r]=n}_setReadBuffer(t){const r=swt(this.gl);r?r.readBuffer(t):Lt(t===36064||t===1029,VR),this.readBuffer=t}_setDrawBuffers(t){const{gl:r}=this,n=En(r);if(n)n.drawBuffers(t);else{const i=r.getExtension("WEBGL_draw_buffers");i?i.drawBuffersWEBGL(t):Lt(t.length===1&&(t[0]===36064||t[0]===1029),VR)}this.drawBuffers=t}_getAttachmentParameterFallback(t){const r=xSt(this.gl);switch(t){case 36052:return r.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return r.WEBGL2?null:8;case 33297:return r.WEBGL2?null:5125;case 33296:return!r.WEBGL2&&!r.EXT_sRGB?9729:null;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(t){return this.gl.bindFramebuffer(36160,t)}}function ISt(e){return e<34069?e+34069:e}function LSt(e){return($r.STATUS||{})[e]||"Framebuffer error ".concat(e)}const OSt=[36049,36048,33296,33298,33299,33300,33301,33302,33303];$r.ATTACHMENT_PARAMETERS=OSt;function Hj(e,t){Lt(e instanceof oi||e instanceof Vj||e instanceof mSt);const r=e.constructor,{gl:n,width:i,height:o,format:a,type:s,dataFormat:l,border:u,mipmaps:c}=e,f=Object.assign({width:i,height:o,format:a,type:s,dataFormat:l,border:u,mipmaps:c},t);return new r(n,f)}function RSt(e,t){const{gl:r,width:n,height:i,id:o}=e;return new $r(r,Object.assign({},t,{id:"framebuffer-for-".concat(o),width:n,height:i,attachments:{[36064]:e}}))}function Ay(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"unnamed";const r=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,n=e.match(r);return n?n[1]:t}const DSt=35632,NSt=35633;function FSt(e){switch(e){case DSt:return"fragment";case NSt:return"vertex";default:return"unknown type"}}function $St(e,t,r,n){const i=e.split(/\r?\n/),o={},a={},s=n||Ay(t)||"(unnamed)",l="".concat(FSt(r)," shader ").concat(s);for(let c=0;c<i.length;c++){const f=i[c];if(f.length<=1)continue;const h=f.split(":"),d=h[0],p=parseInt(h[2],10);if(isNaN(p))throw new Error("GLSL compilation error in ".concat(l,": ").concat(e));d!=="WARNING"?o[p]=f:a[p]=f}const u=BSt(t);return{shaderName:l,errors:UR(o,u),warnings:UR(a,u)}}function UR(e,t){let r="";for(let n=0;n<t.length;n++){const i=t[n];if(!(!e[n+3]&&!e[n+2]&&!e[n+1])&&(r+="".concat(i,`
`),e[n+1])){const o=e[n+1],a=o.split(":",3),s=a[0],l=parseInt(a[1],10)||0,u=o.substring(a.join(":").length+1).trim();r+=Xj("^^^ ".concat(s,": ").concat(u,`

`),l)}}return r}function BSt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:": ";const n=e.split(/\r?\n/),i=String(n.length+t-1).length;return n.map((o,a)=>{const s=String(a+t),l=s.length;return Xj(s,i-l)+r+o})}function Xj(e,t){let r="";for(let n=0;n<t;++n)r+=" ";return"".concat(r).concat(e)}function Yj(e){let t=100;const r=e.match(/[^\s]+/g);if(r.length>=2&&r[0]==="#version"){const n=parseInt(r[1],10);Number.isFinite(n)&&(t=n)}return t}const zSt="Shader: GLSL source code must be a JavaScript string";class Ev extends Os{get[Symbol.toStringTag](){return"Shader"}static getTypeName(t){switch(t){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return Lt(!1),"unknown"}}constructor(t,r){f2(t),Lt(typeof r.source=="string",zSt);const n=Ay(r.source,null)||r.id||Xl("unnamed ".concat(Ev.getTypeName(r.shaderType)));super(t,{id:n}),this.shaderType=r.shaderType,this.source=r.source,this.initialize(r)}initialize(t){let{source:r}=t;const n=Ay(r,null);n&&(this.id=Xl(n)),this._compile(r)}getParameter(t){return this.gl.getShaderParameter(this.handle,t)}toString(){return"".concat(Ev.getTypeName(this.shaderType),":").concat(this.id)}getName(){return Ay(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const t=this.gl.getExtension("WEBGL_debug_shaders");return t?t.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.source;if(t.startsWith("#version ")||(t=`#version 100
`.concat(t)),this.source=t,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const n=this.gl.getShaderInfoLog(this.handle),{shaderName:i,errors:o,warnings:a}=$St(n,this.source,this.shaderType,this.id);throw Xt.error("GLSL compilation errors in ".concat(i,`
`).concat(o))(),Xt.warn("GLSL compilation warnings in ".concat(i,`
`).concat(a))(),new Error("GLSL compilation errors in ".concat(i))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class S3 extends Ev{get[Symbol.toStringTag](){return"VertexShader"}constructor(t,r){typeof r=="string"&&(r={source:r}),super(t,Object.assign({},r,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class T3 extends Ev{get[Symbol.toStringTag](){return"FragmentShader"}constructor(t,r){typeof r=="string"&&(r={source:r}),super(t,Object.assign({},r,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const VSt={[5126]:lr.bind(null,"uniform1fv",ui,1,_n),[35664]:lr.bind(null,"uniform2fv",ui,2,_n),[35665]:lr.bind(null,"uniform3fv",ui,3,_n),[35666]:lr.bind(null,"uniform4fv",ui,4,_n),[5124]:lr.bind(null,"uniform1iv",Ks,1,_n),[35667]:lr.bind(null,"uniform2iv",Ks,2,_n),[35668]:lr.bind(null,"uniform3iv",Ks,3,_n),[35669]:lr.bind(null,"uniform4iv",Ks,4,_n),[35670]:lr.bind(null,"uniform1iv",Ks,1,_n),[35671]:lr.bind(null,"uniform2iv",Ks,2,_n),[35672]:lr.bind(null,"uniform3iv",Ks,3,_n),[35673]:lr.bind(null,"uniform4iv",Ks,4,_n),[35674]:lr.bind(null,"uniformMatrix2fv",ui,4,Ha),[35675]:lr.bind(null,"uniformMatrix3fv",ui,9,Ha),[35676]:lr.bind(null,"uniformMatrix4fv",ui,16,Ha),[35678]:nn,[35680]:nn,[5125]:lr.bind(null,"uniform1uiv",jm,1,_n),[36294]:lr.bind(null,"uniform2uiv",jm,2,_n),[36295]:lr.bind(null,"uniform3uiv",jm,3,_n),[36296]:lr.bind(null,"uniform4uiv",jm,4,_n),[35685]:lr.bind(null,"uniformMatrix2x3fv",ui,6,Ha),[35686]:lr.bind(null,"uniformMatrix2x4fv",ui,8,Ha),[35687]:lr.bind(null,"uniformMatrix3x2fv",ui,6,Ha),[35688]:lr.bind(null,"uniformMatrix3x4fv",ui,12,Ha),[35689]:lr.bind(null,"uniformMatrix4x2fv",ui,8,Ha),[35690]:lr.bind(null,"uniformMatrix4x3fv",ui,12,Ha),[35678]:nn,[35680]:nn,[35679]:nn,[35682]:nn,[36289]:nn,[36292]:nn,[36293]:nn,[36298]:nn,[36299]:nn,[36300]:nn,[36303]:nn,[36306]:nn,[36307]:nn,[36308]:nn,[36311]:nn},USt={},WSt={},jSt={},WR=[0];function Rx(e,t,r,n){t===1&&typeof e=="boolean"&&(e=e?1:0),Number.isFinite(e)&&(WR[0]=e,e=WR);const i=e.length;if(i%t&&Xt.warn("Uniform size should be multiples of ".concat(t),e)(),e instanceof r)return e;let o=n[i];o||(o=new r(i),n[i]=o);for(let a=0;a<i;a++)o[a]=e[a];return o}function ui(e,t){return Rx(e,t,Float32Array,USt)}function Ks(e,t){return Rx(e,t,Int32Array,WSt)}function jm(e,t){return Rx(e,t,Uint32Array,jSt)}function jR(e,t,r){const n=VSt[r.type];if(!n)throw new Error("Unknown GLSL uniform type ".concat(r.type));return n().bind(null,e,t)}function GSt(e){if(e[e.length-1]!=="]")return{name:e,length:1,isArray:!1};const t=/([^[]*)(\[[0-9]+\])?/,r=e.match(t);if(!r||r.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(e));return{name:r[1],length:r[2]||1,isArray:Boolean(r[2])}}function HSt(e,t,r){for(const n in e){const i=e[n];if((!r||Boolean(r[n]))&&!XSt(i))throw t=t?"".concat(t," "):"",console.error("".concat(t," Bad uniform ").concat(n),i),new Error("".concat(t," Bad uniform ").concat(n))}return!0}function XSt(e){return Array.isArray(e)||ArrayBuffer.isView(e)?KSt(e):isFinite(e)||e===!0||e===!1||e instanceof xc||e instanceof hh?!0:e instanceof $r?Boolean(e.texture):!1}function YSt(e,t,r){if(Array.isArray(r)||ArrayBuffer.isView(r))if(e[t]){const n=e[t];for(let i=0,o=r.length;i<o;++i)n[i]=r[i]}else e[t]=r.slice();else e[t]=r}function KSt(e){if(e.length===0)return!1;const t=Math.min(e.length,16);for(let r=0;r<t;++r)if(!Number.isFinite(e[r]))return!1;return!0}function nn(){let e=null;return(t,r,n)=>{const i=e!==n;return i&&(t.uniform1i(r,n),e=n),i}}function lr(e,t,r,n){let i=null,o=null;return(a,s,l)=>{const u=t(l,r),c=u.length;let f=!1;if(i===null)i=new Float32Array(c),o=c,f=!0;else{Lt(o===c,"Uniform length cannot change.");for(let h=0;h<c;++h)if(u[h]!==i[h]){f=!0;break}}return f&&(n(a,e,s,u),i.set(u)),f}}function _n(e,t,r,n){e[t](r,n)}function Ha(e,t,r,n){e[t](r,!1,n)}const ZSt=5120,qSt=5121,JSt=5122,QSt=5123,GR=0,Gm=1,t3t=2,e3t=3,Hm=4,r3t=5,n3t=6,Br=5126,i3t=35664,o3t=35665,a3t=35666,yp=5124,s3t=35667,l3t=35668,u3t=35669,_p=5125,c3t=36294,f3t=36295,h3t=36296,d3t=35670,p3t=35671,g3t=35672,v3t=35673,m3t=35674,y3t=35675,_3t=35676,b3t=35685,w3t=35686,S3t=35687,T3t=35688,k3t=35689,P3t=35690,fE={[Br]:[Br,1,"float"],[i3t]:[Br,2,"vec2"],[o3t]:[Br,3,"vec3"],[a3t]:[Br,4,"vec4"],[yp]:[yp,1,"int"],[s3t]:[yp,2,"ivec2"],[l3t]:[yp,3,"ivec3"],[u3t]:[yp,4,"ivec4"],[_p]:[_p,1,"uint"],[c3t]:[_p,2,"uvec2"],[f3t]:[_p,3,"uvec3"],[h3t]:[_p,4,"uvec4"],[d3t]:[Br,1,"bool"],[p3t]:[Br,2,"bvec2"],[g3t]:[Br,3,"bvec3"],[v3t]:[Br,4,"bvec4"],[m3t]:[Br,8,"mat2"],[b3t]:[Br,8,"mat2x3"],[w3t]:[Br,8,"mat2x4"],[y3t]:[Br,12,"mat3"],[S3t]:[Br,12,"mat3x2"],[T3t]:[Br,12,"mat3x4"],[_3t]:[Br,16,"mat4"],[k3t]:[Br,16,"mat4x2"],[P3t]:[Br,16,"mat4x3"]};function E3t(e){switch(e){case GR:return GR;case Gm:return Gm;case e3t:return Gm;case t3t:return Gm;case Hm:return Hm;case r3t:return Hm;case n3t:return Hm;default:return Lt(!1),0}}function HR(e){const t=fE[e];if(!t)return null;const[r,n]=t;return{type:r,components:n}}function Kj(e,t){switch(e){case ZSt:case qSt:case JSt:case QSt:e=Br;break}for(const r in fE){const[n,i,o]=fE[r];if(n===e&&i===t)return{glType:r,name:o}}return null}class C3t{constructor(t){this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}getAttributeInfo(t){const r=Number(t);return Number.isFinite(r)?this.attributeInfosByLocation[r]:this.attributeInfosByName[t]||null}getAttributeLocation(t){const r=this.getAttributeInfo(t);return r?r.location:-1}getAttributeAccessor(t){const r=this.getAttributeInfo(t);return r?r.accessor:null}getVaryingInfo(t){const r=Number(t);return Number.isFinite(r)?this.varyingInfos[r]:this.varyingInfosByName[t]||null}getVaryingIndex(t){const r=this.getVaryingInfo();return r?r.location:-1}getVaryingAccessor(t){const r=this.getVaryingInfo();return r?r.accessor:null}_readAttributesFromProgram(t){const{gl:r}=t,n=r.getProgramParameter(t.handle,35721);for(let i=0;i<n;i++){const{name:o,type:a,size:s}=r.getActiveAttrib(t.handle,i),l=r.getAttribLocation(t.handle,o);l>=0&&this._addAttribute(l,o,a,s)}this.attributeInfos.sort((i,o)=>i.location-o.location)}_readVaryingsFromProgram(t){const{gl:r}=t;if(!Pe(r))return;const n=r.getProgramParameter(t.handle,35971);for(let i=0;i<n;i++){const{name:o,type:a,size:s}=r.getTransformFeedbackVarying(t.handle,i);this._addVarying(i,o,a,s)}this.varyingInfos.sort((i,o)=>i.location-o.location)}_addAttribute(t,r,n,i){const{type:o,components:a}=HR(n),s={type:o,size:i*a};this._inferProperties(t,r,s);const l={location:t,name:r,accessor:new vi(s)};this.attributeInfos.push(l),this.attributeInfosByLocation[t]=l,this.attributeInfosByName[l.name]=l}_inferProperties(t,r,n){/instance/i.test(r)&&(n.divisor=1)}_addVarying(t,r,n,i){const{type:o,components:a}=HR(n),s=new vi({type:o,size:i*a}),l={location:t,name:r,accessor:s};this.varyingInfos.push(l),this.varyingInfosByName[l.name]=l}}const XR=4,A3t=35981,x3t=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class Zj extends Os{get[Symbol.toStringTag](){return"Program"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.stubRemovedMethods("Program","v6.0",x3t),this._isCached=!1,this.initialize(r),Object.seal(this),this._setId(r.id)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{hash:r,vs:n,fs:i,varyings:o,bufferMode:a=A3t}=t;return this.hash=r||"",this.vs=typeof n=="string"?new S3(this.gl,{id:"".concat(t.id,"-vs"),source:n}):n,this.fs=typeof i=="string"?new T3(this.gl,{id:"".concat(t.id,"-fs"),source:i}):i,Lt(this.vs instanceof S3),Lt(this.fs instanceof T3),this.uniforms={},this._textureUniforms={},o&&o.length>0&&(En(this.gl),this.varyings=o,this.gl2.transformFeedbackVaryings(this.handle,o,a)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new C3t(this),this.setProps(t)}delete(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isCached?this:super.delete(t)}setProps(t){return"uniforms"in t&&this.setUniforms(t.uniforms),this}draw(t){let{logPriority:r,drawMode:n=4,vertexCount:i,offset:o=0,start:a,end:s,isIndexed:l=!1,indexType:u=5123,instanceCount:c=0,isInstanced:f=c>0,vertexArray:h=null,transformFeedback:d,framebuffer:p,parameters:g={},uniforms:m,samplers:v}=t;if((m||v)&&(Xt.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(m||{})),Xt.priority>=r){const y=p?p.id:"default",b="mode=".concat(Rl(this.gl,n)," verts=").concat(i," ")+"instances=".concat(c," indexType=").concat(Rl(this.gl,u)," ")+"isInstanced=".concat(f," isIndexed=").concat(l," ")+"Framebuffer=".concat(y);Xt.log(r,b)()}return Lt(h),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||i===0||f&&c===0?!1:(h.bindForDraw(i,c,()=>{if(p!==void 0&&(g=Object.assign({},g,{framebuffer:p})),d){const y=E3t(n);d.begin(y)}this._bindTextures(),Ji(this.gl,g,()=>{l&&f?this.gl2.drawElementsInstanced(n,i,u,o,c):l&&Pe(this.gl)&&!isNaN(a)&&!isNaN(s)?this.gl2.drawRangeElements(n,a,s,i,u,o):l?this.gl.drawElements(n,i,u,o):f?this.gl2.drawArraysInstanced(n,o,i,c):this.gl.drawArrays(n,o,i)}),d&&d.end()}),!0)}setUniforms(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Xt.priority>=2&&HSt(t,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const r in t){const n=t[r],i=this._uniformSetters[r];if(i){let o=n,a=!1;if(o instanceof $r&&(o=o.texture),o instanceof xc)if(a=this.uniforms[r]!==n,a){i.textureIndex===void 0&&(i.textureIndex=this._textureIndexCounter++);const s=o,{textureIndex:l}=i;s.bind(l),o=l,this._textureUniforms[r]=s}else o=i.textureIndex;else this._textureUniforms[r]&&delete this._textureUniforms[r];(i(o)||a)&&YSt(this.uniforms,r,n)}}return this}_areTexturesRenderable(){let t=!0;for(const r in this._textureUniforms){const n=this._textureUniforms[r];n.update(),t=t&&n.loaded}return t}_bindTextures(){for(const t in this._textureUniforms){const r=this._uniformSetters[t].textureIndex;this._textureUniforms[t].bind(r)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(t){const r=this.gl.getAttachedShaders(t),n={};for(const i of r)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new S3({handle:i});break;case 35632:n.fs=new T3({handle:i});break}return n}_getParameter(t){return this.gl.getProgramParameter(this.handle,t)}_setId(t){if(!t){const r=this._getName();this.id=Xl(r)}}_getName(){let t=this.vs.getName()||this.fs.getName();return t=t.replace(/shader/i,""),t=t?"".concat(t,"-program"):"program",t}_compileAndLink(){const{gl:t}=this;if(t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),Xt.time(XR,"linkProgram for ".concat(this._getName()))(),t.linkProgram(this.handle),Xt.timeEnd(XR,"linkProgram for ".concat(this._getName()))(),t.debug||Xt.level>0){if(!t.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(t.getProgramInfoLog(this.handle)));if(t.validateProgram(this.handle),!t.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(t.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:t}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let r=0;r<this._uniformCount;r++){const n=this.gl.getActiveUniform(this.handle,r),{name:i}=GSt(n.name);let o=t.getUniformLocation(this.handle,i);if(this._uniformSetters[i]=jR(t,o,n),n.size>1)for(let a=0;a<n.size;a++)o=t.getUniformLocation(this.handle,"".concat(i,"[").concat(a,"]")),this._uniformSetters["".concat(i,"[").concat(a,"]")]=jR(t,o,n)}this._textureIndexCounter=0}getActiveUniforms(t,r){return this.gl2.getActiveUniforms(this.handle,t,r)}getUniformBlockIndex(t){return this.gl2.getUniformBlockIndex(this.handle,t)}getActiveUniformBlockParameter(t,r){return this.gl2.getActiveUniformBlockParameter(this.handle,t,r)}uniformBlockBinding(t,r){this.gl2.uniformBlockBinding(this.handle,t,r)}}const M3t=34918,I3t=34919,L3t=35007,O3t=36795,R3t=35976,D3t=35887,N3t=36202;class W_ extends Os{get[Symbol.toStringTag](){return"Query"}static isSupported(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const n=Pe(t),i=Ox(t,ur.TIMER_QUERY);let o=n||i;for(const a of r)switch(a){case"queries":o=o&&n;break;case"timers":o=o&&i;break;default:Lt(!1)}return o}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(L3t)}beginOcclusionQuery(){let{conservative:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.begin(t?N3t:D3t)}beginTransformFeedbackQuery(){return this.begin(R3t)}begin(t){return this._queryPending?this:(this.target=t,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;const t=this.gl2.getQueryParameter(this.handle,I3t);return t&&(this._queryPending=!1),t}isTimerDisjoint(){return this.gl2.getParameter(O3t)}getResult(){return this.gl2.getQueryParameter(this.handle,M3t)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let r=0;return this._pollingPromise=new Promise((n,i)=>{const o=()=>{this.isResultAvailable()?(n(this.getResult()),this._pollingPromise=null):r++>t?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(o)};requestAnimationFrame(o)}),this._pollingPromise}_createHandle(){return W_.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}class qj extends Os{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(t){return Pe(t)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};En(t),super(t,r),this.initialize(r),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Zh(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(t),this}setProps(t){"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"bindOnUse"in t&&(t=t.bindOnUse),"buffers"in t&&this.setBuffers(t.buffers)}setBuffers(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.bind(()=>{for(const r in t)this.setBuffer(r,t[r])}),this}setBuffer(t,r){const n=this._getVaryingIndex(t),{buffer:i,byteSize:o,byteOffset:a}=this._getBufferParams(r);return n<0?(this.unused[t]=i,Xt.warn("".concat(this.id," unused varying buffer ").concat(t))(),this):(this.buffers[n]=r,this.bindOnUse||this._bindBuffer(n,i,a,o),this)}begin(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(t),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(t){let r,n,i;return t instanceof Ye?i=t:(i=t.buffer,n=t.byteSize,r=t.byteOffset),(r!==void 0||n!==void 0)&&(r=r||0,n=n||i.byteLength-r),{buffer:i,byteOffset:r,byteSize:n}}_getVaryingInfo(t){return this.configuration&&this.configuration.getVaryingInfo(t)}_getVaryingIndex(t){if(this.configuration)return this.configuration.getVaryingInfo(t).location;const r=Number(t);return Number.isFinite(r)?r:-1}_bindBuffers(){if(this.bindOnUse)for(const t in this.buffers){const{buffer:r,byteSize:n,byteOffset:i}=this._getBufferParams(this.buffers[t]);this._bindBuffer(t,r,i,n)}}_unbindBuffers(){if(this.bindOnUse)for(const t in this.buffers)this._bindBuffer(t,null)}_bindBuffer(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;const o=r&&r.handle;return!o||i===void 0?this.gl.bindBufferBase(35982,t,o):this.gl.bindBufferRange(35982,t,o,n,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(t){this.gl.bindTransformFeedback(36386,this.handle)}}let Xm=null;function F3t(e){return(!Xm||Xm.byteLength<e)&&(Xm=new ArrayBuffer(e)),Xm}function $3t(e,t){const r=F3t(e.BYTES_PER_ELEMENT*t);return new e(r,0,t)}function B3t(e){let{target:t,source:r,start:n=0,count:i=1}=e;const o=r.length,a=i*o;let s=0;for(let l=n;s<o;s++)t[l++]=r[s];for(;s<a;)s<a-s?(t.copyWithin(n+s,n,n+s),s*=2):(t.copyWithin(n+s,n,n+a-s),s=a);return t}const z3t="elements must be GL.ELEMENT_ARRAY_BUFFER";class pi extends Os{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(t){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).constantAttributeZero?Pe(t)||gj()==="Chrome":!0}static getDefaultArray(t){return t.luma=t.luma||{},t.luma.defaultVertexArray||(t.luma.defaultVertexArray=new pi(t,{handle:null,isDefaultArray:!0})),t.luma.defaultVertexArray}static getMaxAttributes(t){return pi.MAX_ATTRIBUTES=pi.MAX_ATTRIBUTES||t.getParameter(34921),pi.MAX_ATTRIBUTES}static setConstant(t,r,n){switch(n.constructor){case Float32Array:pi._setConstantFloatArray(t,r,n);break;case Int32Array:pi._setConstantIntArray(t,r,n);break;case Uint32Array:pi._setConstantUintArray(t,r,n);break;default:Lt(!1)}}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=r.id||r.program&&r.program.id;super(t,Object.assign({},r,{id:n})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=r.isDefaultArray||!1,this.gl2=t,this.initialize(r),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return pi.getMaxAttributes(this.gl)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.setProps(t)}setProps(t){return this}setElementBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return Lt(!t||t.target===34963,z3t),this.bind(()=>{this.gl.bindBuffer(34963,t?t.handle:null)}),this}setBuffer(t,r,n){if(r.target===34963)return this.setElementBuffer(r,n);const{size:i,type:o,stride:a,offset:s,normalized:l,integer:u,divisor:c}=n,{gl:f,gl2:h}=this;return t=Number(t),this.bind(()=>{f.bindBuffer(34962,r.handle),u?(Lt(Pe(f)),h.vertexAttribIPointer(t,i,o,a,s)):f.vertexAttribPointer(t,i,o,l,a,s),f.enableVertexAttribArray(t),h.vertexAttribDivisor(t,c||0)}),this}enable(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return!r&&t===0&&!pi.isSupported(this.gl,{constantAttributeZero:!0})||(t=Number(t),this.bind(()=>r?this.gl.enableVertexAttribArray(t):this.gl.disableVertexAttribArray(t))),this}getConstantBuffer(t,r){const n=this._normalizeConstantArrayValue(r),i=n.byteLength*t,o=n.length*t;let a=!this.buffer;if(this.buffer=this.buffer||new Ye(this.gl,i),a=a||this.buffer.reallocate(i),a=a||!this._compareConstantArrayValues(n,this.bufferValue),a){const s=$3t(r.constructor,o);B3t({target:s,source:n,start:0,count:o}),this.buffer.subData(s),this.bufferValue=r}return this.buffer}_normalizeConstantArrayValue(t){return Array.isArray(t)?new Float32Array(t):t}_compareConstantArrayValues(t,r){if(!t||!r||t.length!==r.length||t.constructor!==r.constructor)return!1;for(let n=0;n<t.length;++n)if(t[n]!==r[n])return!1;return!0}static _setConstantFloatArray(t,r,n){switch(n.length){case 1:t.vertexAttrib1fv(r,n);break;case 2:t.vertexAttrib2fv(r,n);break;case 3:t.vertexAttrib3fv(r,n);break;case 4:t.vertexAttrib4fv(r,n);break;default:Lt(!1)}}static _setConstantIntArray(t,r,n){switch(Lt(Pe(t)),n.length){case 1:t.vertexAttribI1iv(r,n);break;case 2:t.vertexAttribI2iv(r,n);break;case 3:t.vertexAttribI3iv(r,n);break;case 4:t.vertexAttribI4iv(r,n);break;default:Lt(!1)}}static _setConstantUintArray(t,r,n){switch(Lt(Pe(t)),n.length){case 1:t.vertexAttribI1uiv(r,n);break;case 2:t.vertexAttribI2uiv(r,n);break;case 3:t.vertexAttribI3uiv(r,n);break;case 4:t.vertexAttribI4uiv(r,n);break;default:Lt(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(t){return this.gl2.deleteVertexArray(t),[this.elements]}_bindHandle(t){this.gl2.bindVertexArray(t)}_getParameter(t,r){let{location:n}=r;return Lt(Number.isFinite(n)),this.bind(()=>{switch(t){case 34373:return this.gl.getVertexAttribOffset(n,t);default:return this.gl.getVertexAttrib(n,t)}})}}const V3t="VertexArray: attributes must be Buffers or constants (i.e. typed array)",U3t=/^(.+)__LOCATION_([0-9]+)$/,W3t=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class j3t{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=r.id||r.program&&r.program.id;this.id=n,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new pi(t),Fj(this,"VertexArray","v6.0",W3t),this.initialize(r),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(t)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:t}=this.vertexArrayObject;return this.values=new Array(t).fill(null),this.accessors=new Array(t).fill(null),this.unused={},this.drawParams=null,this}setProps(t){return"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"attributes"in t&&this.setAttributes(t.attributes),"elements"in t&&this.setElementBuffer(t.elements),"bindOnUse"in t&&(t=t.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(t){return Object.assign(this.attributes,t),this.vertexArrayObject.bind(()=>{for(const r in t){const n=t[r];this._setAttribute(r,n)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.elements=t,this.elementsAccessor=r,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(t,r),this}setBuffer(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(r.target===34963)return this.setElementBuffer(r,n);const{location:i,accessor:o}=this._resolveLocationAndAccessor(t,r,r.accessor,n);return i>=0&&(this.values[i]=r,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,r,o)),this}setConstant(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{location:i,accessor:o}=this._resolveLocationAndAccessor(t,r,Object.assign({size:r.length},n));return i>=0&&(r=this.vertexArrayObject._normalizeConstantArrayValue(r),this.values[i]=r,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Ye(this.gl,{accessor:{size:4}});for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this.values[t]instanceof Ye&&(this.gl.disableVertexAttribArray(t),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(t,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++){const r=this.values[t];r instanceof Ye&&this.setBuffer(t,r)}}),this}bindForDraw(t,r,n){let i;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(t,r),i=n()}),i}_resolveLocationAndAccessor(t,r,n,i){const o={location:-1,accessor:null},{location:a,name:s}=this._getAttributeIndex(t);if(!Number.isFinite(a)||a<0)return this.unused[t]=r,Xt.once(3,()=>"unused value ".concat(t," in ").concat(this.id))(),o;const l=this._getAttributeInfo(s||a);if(!l)return o;const u=this.accessors[a]||{},c=vi.resolve(l.accessor,u,n,i),{size:f,type:h}=c;return Lt(Number.isFinite(f)&&Number.isFinite(h)),{location:a,accessor:c}}_getAttributeInfo(t){return this.configuration&&this.configuration.getAttributeInfo(t)}_getAttributeIndex(t){const r=Number(t);if(Number.isFinite(r))return{location:r};const n=U3t.exec(t),i=n?n[1]:t,o=n?Number(n[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(i)+o,name:i}:{location:-1}}_setAttribute(t,r){if(r instanceof Ye)this.setBuffer(t,r);else if(Array.isArray(r)&&r.length&&r[0]instanceof Ye){const n=r[0],i=r[1];this.setBuffer(t,n,i)}else if(ArrayBuffer.isView(r)||Array.isArray(r)){const n=r;this.setConstant(t,n)}else if(r.buffer instanceof Ye){const n=r;this.setBuffer(t,n.buffer,n)}else throw new Error(V3t)}_setConstantAttributes(t,r){const n=Math.max(t|0,r|0);let i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,n);for(let o=1;o<this.vertexArrayObject.MAX_ATTRIBUTES;o++)i=this.values[o],ArrayBuffer.isView(i)&&this._setConstantAttribute(o,i)}_setConstantAttributeZero(t,r){if(pi.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,t);return}const n=this.vertexArrayObject.getConstantBuffer(r,t);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}_setConstantAttribute(t,r){pi.setConstant(this.gl,t,r)}_updateDrawParams(){const t={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let r=0;r<this.vertexArrayObject.MAX_ATTRIBUTES;r++)this._updateDrawParamsForLocation(t,r);return this.elements&&(t.elementCount=this.elements.getElementCount(this.elements.accessor),t.isIndexed=!0,t.indexType=this.elementsAccessor.type||this.elements.accessor.type,t.indexOffset=this.elementsAccessor.offset||0),t.indexCount===1/0&&(t.indexCount=0),t.vertexCount===1/0&&(t.vertexCount=0),t.instanceCount===1/0&&(t.instanceCount=0),t}_updateDrawParamsForLocation(t,r){const n=this.values[r],i=this.accessors[r];if(!n)return;const{divisor:o}=i,a=o>0;if(t.isInstanced=t.isInstanced||a,n instanceof Ye){const s=n;if(a){const l=s.getVertexCount(i);t.instanceCount=Math.min(t.instanceCount,l)}else{const l=s.getVertexCount(i);t.vertexCount=Math.min(t.vertexCount,l)}}}setElements(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Xt.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(t,r)}}function G3t(e,t){const{maxElts:r=16,size:n=1}=t;let i="[";for(let a=0;a<e.length&&a<r;++a)a>0&&(i+=",".concat(a%n===0?" ":"")),i+=Cv(e[a],t);const o=e.length>r?"...":"]";return"".concat(i).concat(o)}function Cv(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=1e-16,{isInteger:n=!1}=t;if(Array.isArray(e)||ArrayBuffer.isView(e))return G3t(e,t);if(!Number.isFinite(e))return String(e);if(Math.abs(e)<r)return n?"0":"0.";if(n||Math.abs(e)>100&&Math.abs(e)<1e4)return e.toFixed(0);const i=e.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function YR(e){let{header:t="Uniforms",program:r,uniforms:n,undefinedOnly:i=!1}=e;Lt(r);const o=".*_.*",a=".*Matrix",s=r._uniformSetters,l={},u=Object.keys(s).sort();let c=0;for(const d of u)!d.match(o)&&!d.match(a)&&k3({table:l,header:t,uniforms:n,uniformName:d,undefinedOnly:i})&&c++;for(const d of u)d.match(a)&&k3({table:l,header:t,uniforms:n,uniformName:d,undefinedOnly:i})&&c++;for(const d of u)l[d]||k3({table:l,header:t,uniforms:n,uniformName:d,undefinedOnly:i})&&c++;let f=0;const h={};if(!i)for(const d in n){const p=n[d];l[d]||(f++,h[d]={Type:"NOT USED: ".concat(p),[t]:Cv(p)})}return{table:l,count:c,unusedTable:h,unusedCount:f}}function k3(e){let{table:t,header:r,uniforms:n,uniformName:i,undefinedOnly:o}=e;const a=n[i],s=H3t(a);return!o||!s?(t[i]={[r]:s?Cv(a):"N/A","Uniform Type":s?a:"NOT PROVIDED"},!0):!1}function H3t(e){return e!=null}function X3t(e){let{vertexArray:t,header:r="Attributes"}=e;if(!t.configuration)return{};const n={};t.elements&&(n.ELEMENT_ARRAY_BUFFER=KR(t,t.elements,null,r));const i=t.values;for(const o in i){const a=t._getAttributeInfo(o);if(a){let s="".concat(o,": ").concat(a.name);const l=t.accessors[a.location];l&&(s="".concat(o,": ").concat(Y3t(a.name,l))),n[s]=KR(t,i[o],l,r)}}return n}function KR(e,t,r,n){const{gl:i}=e;if(!t)return{[n]:"null","Format ":"N/A"};let o="NOT PROVIDED",a=1,s=0,l=0,u,c,f;if(r&&(o=r.type,a=r.size,o=String(o).replace("Array",""),u=o.indexOf("nt")!==-1),t instanceof Ye){const h=t,{data:d,changed:p}=h.getDebugData();c=p?"*":"",f=d,l=h.byteLength,s=l/d.BYTES_PER_ELEMENT/a;let g;if(r){const m=r.divisor>0;g="".concat(m?"I ":"P "," ").concat(s," (x").concat(a,"=").concat(l," bytes ").concat(Rl(i,o),")")}else u=!0,g="".concat(l," bytes");return{[n]:"".concat(c).concat(Cv(f,{size:a,isInteger:u})),"Format ":g}}return f=t,a=t.length,o=String(t.constructor.name).replace("Array",""),u=o.indexOf("nt")!==-1,{[n]:"".concat(Cv(f,{size:a,isInteger:u})," (constant)"),"Format ":"".concat(a,"x").concat(o," (constant)")}}function Y3t(e,t){const{type:r,size:n}=t,i=Kj(r,n);return i?"".concat(e," (").concat(i.name,")"):e}function K3t(e){const t={},r="Accessors for ".concat(e.id);for(const n of e.attributeInfos)if(n){const i=ZR(n);t["in ".concat(i)]={[r]:JSON.stringify(n.accessor)}}for(const n of e.varyingInfos)if(n){const i=ZR(n);t["out ".concat(i)]={[r]:JSON.stringify(n.accessor)}}return t}function ZR(e){const{type:t,size:r}=e.accessor,n=Kj(t,r);return n?"".concat(n.name," ").concat(e.name):e.name}const qR=Ls()&&typeof document<"u";let Z3t=0;class q3t{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{onCreateContext:r=m=>Dj(m),onAddHTML:n=null,onInitialize:i=()=>{},onRender:o=()=>{},onFinalize:a=()=>{},onError:s,gl:l=null,glOptions:u={},debug:c=!1,createFramebuffer:f=!1,autoResizeViewport:h=!0,autoResizeDrawingBuffer:d=!0,stats:p=rc.get("animation-loop-".concat(Z3t++))}=t;let{useDevicePixels:g=!0}=t;"useDevicePixelRatio"in t&&(Xt.deprecated("useDevicePixelRatio","useDevicePixels")(),g=t.useDevicePixelRatio),this.props={onCreateContext:r,onAddHTML:n,onInitialize:i,onRender:o,onFinalize:a,onError:s,gl:l,glOptions:u,debug:c,createFramebuffer:f},this.gl=l,this.needsRedraw=null,this.timeline=null,this.stats=p,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:h,autoResizeDrawingBuffer:d,useDevicePixels:g}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(t){return Lt(typeof t=="string"),this.needsRedraw=this.needsRedraw||t,this}setProps(t){return"autoResizeViewport"in t&&(this.autoResizeViewport=t.autoResizeViewport),"autoResizeDrawingBuffer"in t&&(this.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer),"useDevicePixels"in t&&(this.useDevicePixels=t.useDevicePixels),this}start(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._running)return this;this._running=!0;const r=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(t),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=W_.isSupported(this.gl,["timers"])?new W_(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(n=>{this._running&&(this._addCallbackData(n||{}),n!==!1&&this._startLoop())});return this.props.onError&&r.catch(this.props.onError),this}redraw(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(t){return this.timeline=t,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(t=>{this._resolveNextFrame=t})),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const n=document.getElementById(t);return n?Number(n.value):r}setViewParameters(){return Xt.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const t=()=>{!this._running||(this.redraw(),this._animationFrameId=this._requestAnimationFrame(t))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(t)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=qR?new Promise((t,r)=>{if(qR&&document.readyState==="complete"){t(document);return}window.addEventListener("load",()=>{t(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(t){this.display&&(this.display.delete(),this.display.animationLoop=null),t&&(t.animationLoop=this),this.display=t}_cancelAnimationFrame(t){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(t):iSt(t)}_requestAnimationFrame(t){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(t):nSt(t)}_renderFrame(){if(this.display){this.display._renderFrame(...arguments);return}this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:t,height:r,aspect:n}=this._getSizeAndAspect();(t!==this.animationProps.width||r!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=r,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(t){typeof t=="object"&&t!==null&&(this.animationProps=Object.assign({},this.animationProps,t))}_createWebGLContext(t){if(this.offScreen=t.canvas&&typeof OffscreenCanvas<"u"&&t.canvas instanceof OffscreenCanvas,t=Object.assign({},t,this.props.glOptions),this.gl=this.props.gl?Mx(this.props.gl,t):this.onCreateContext(t),!c2(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");Gwt(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const t=document.createElement("div");document.body.appendChild(t),t.style.position="relative";const r=document.createElement("div");r.style.position="absolute",r.style.left="10px",r.style.bottom="10px",r.style.width="300px",r.style.background="white",t.appendChild(this.gl.canvas),t.appendChild(r);const n=this.props.onAddHTML(r);n&&(r.innerHTML=n)}}_getSizeAndAspect(){const t=this.gl.drawingBufferWidth,r=this.gl.drawingBufferHeight;let n=1;const{canvas:i}=this.gl;return i&&i.clientHeight?n=i.clientWidth/i.clientHeight:t>0&&r>0&&(n=t/r),{width:t,height:r,aspect:n}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&Zwt(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new $r(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:t}=this.gl;t&&(t.addEventListener("mousemove",this._onMousemove),t.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(t){this.animationProps._mousePosition=[t.offsetX,t.offsetY]}_onMouseleave(t){this.animationProps._mousePosition=null}}const f0="vs",Dx="fs";function wi(e,t){if(!e)throw new Error(t||"shadertools: assertion failed.")}const P3={number:{validate(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},array:{validate(e,t){return Array.isArray(e)||ArrayBuffer.isView(e)}}};function J3t(e){const t={};for(const r in e){const n=e[r],i=Q3t(n);t[r]=i}return t}function Q3t(e){let t=JR(e);return t==="object"?e?"type"in e?Object.assign({},e,P3[e.type]):"value"in e?(t=JR(e.value),Object.assign({type:t},e,P3[t])):{type:"object",value:e}:{type:"object",value:null}:Object.assign({type:t,value:e},P3[t])}function JR(e){return Array.isArray(e)||ArrayBuffer.isView(e)?"array":typeof e}const tTt="vs",eTt="fs";class QR{constructor(t){let{name:r,vs:n,fs:i,dependencies:o=[],uniforms:a,getUniforms:s,deprecations:l=[],defines:u={},inject:c={},vertexShader:f,fragmentShader:h}=t;wi(typeof r=="string"),this.name=r,this.vs=n||f,this.fs=i||h,this.getModuleUniforms=s,this.dependencies=o,this.deprecations=this._parseDeprecationDefinitions(l),this.defines=u,this.injections=rTt(c),a&&(this.uniforms=J3t(a))}getModuleSource(t){let r;switch(t){case tTt:r=this.vs||"";break;case eTt:r=this.fs||"";break;default:wi(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),`
`).concat(r,"// END MODULE_").concat(this.name,`

`)}getUniforms(t,r){return this.getModuleUniforms?this.getModuleUniforms(t,r):this.uniforms?this._defaultGetUniforms(t):{}}getDefines(){return this.defines}checkDeprecations(t,r){this.deprecations.forEach(n=>{n.regex.test(t)&&(n.deprecated?r.deprecated(n.old,n.new)():r.removed(n.old,n.new)())})}_parseDeprecationDefinitions(t){return t.forEach(r=>{switch(r.type){case"function":r.regex=new RegExp("\\b".concat(r.old,"\\("));break;default:r.regex=new RegExp("".concat(r.type," ").concat(r.old,";"))}}),t}_defaultGetUniforms(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r={},n=this.uniforms;for(const i in n){const o=n[i];i in t&&!o.private?(o.validate&&wi(o.validate(t[i],o),"".concat(this.name,": invalid ").concat(i)),r[i]=t[i]):r[i]=o.value}return r}}function rTt(e){const t={vs:{},fs:{}};for(const r in e){let n=e[r];const i=r.slice(0,2);typeof n=="string"&&(n={order:0,injection:n}),t[i][r]=n}return t}function nTt(e){return iTt(Qj(e))}function iTt(e){const t={},r={};return Jj({modules:e,level:0,moduleMap:t,moduleDepth:r}),Object.keys(r).sort((n,i)=>r[i]-r[n]).map(n=>t[n])}function Jj(e){let{modules:t,level:r,moduleMap:n,moduleDepth:i}=e;if(r>=5)throw new Error("Possible loop in shader dependency graph");for(const o of t)n[o.name]=o,(i[o.name]===void 0||i[o.name]<r)&&(i[o.name]=r);for(const o of t)o.dependencies&&Jj({modules:o.dependencies,level:r+1,moduleMap:n,moduleDepth:i})}function Qj(e,t){return e.map(r=>(r instanceof QR||(wi(typeof r!="string","Shader module use by name is deprecated. Import shader module '".concat(r,"' and use it directly.")),wi(r.name,"shader module has no name"),r=new QR(r),r.dependencies=Qj(r.dependencies)),r))}function oTt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=typeof window<"u"?window.navigator||{}:{},r=e.userAgent||t.userAgent||"",n=r.indexOf("MSIE ")!==-1,i=r.indexOf("Trident/")!==-1;return n||i}const aTt=7936,sTt=7937,lTt=7938,uTt=35724,Nx={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Xu={};Object.keys(Nx).forEach(e=>{Xu[e]=e});function cTt(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:Boolean(e&&e._version===2)}function fTt(e){const t=e.getExtension("WEBGL_debug_renderer_info"),r=e.getParameter(t&&t.UNMASKED_VENDOR_WEBGL||aTt),n=e.getParameter(t&&t.UNMASKED_RENDERER_WEBGL||sTt);return{gpuVendor:hTt(r,n),vendor:r,renderer:n,version:e.getParameter(lTt),shadingLanguageVersion:e.getParameter(uTt)}}function hTt(e,t){return e.match(/NVIDIA/i)||t.match(/NVIDIA/i)?"NVIDIA":e.match(/INTEL/i)||t.match(/INTEL/i)?"INTEL":e.match(/AMD/i)||t.match(/AMD/i)||e.match(/ATI/i)||t.match(/ATI/i)?"AMD":"UNKNOWN GPU"}const E3={};function tD(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=Nx[t];if(wi(n,t),!oTt(r))return!0;if(t in E3)return E3[t];const i=n[0],o=r.behavior||"enable",a="#extension GL_".concat(i," : ").concat(o,`
void main(void) {}`),s=e.createShader(35633);e.shaderSource(s,a),e.compileShader(s);const l=e.getShaderParameter(s,35713);return e.deleteShader(s),E3[t]=l,l}function dTt(e,t){const r=Nx[t];wi(r,t);const n=cTt(e)&&r[1]||r[0],i=typeof n=="string"?Boolean(e.getExtension(n)):n;return wi(i===!1||i===!0),i}function Ym(e,t){return t=Array.isArray(t)?t:[t],t.every(r=>dTt(e,r))}function pTt(e){switch(fTt(e).gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function gTt(e,t,r){let n=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return Ym(e,Xu.GLSL_FRAG_DEPTH)&&(n+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),Ym(e,Xu.GLSL_DERIVATIVES)&&tD(e,Xu.GLSL_DERIVATIVES)&&(n+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),Ym(e,Xu.GLSL_FRAG_DATA)&&tD(e,Xu.GLSL_FRAG_DATA,{behavior:"require"})&&(n+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),Ym(e,Xu.GLSL_TEXTURE_LOD)&&(n+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),n}const vTt=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,mTt=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,yTt={[f0]:vTt,[Dx]:mTt},xy="__LUMA_INJECT_DECLARATIONS__",eD=/void\s+main\s*\([^)]*\)\s*\{\n?/,rD=/}\n?[^{}]*$/,C3=[];function nD(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=t===f0;for(const o in r){const a=r[o];a.sort((l,u)=>l.order-u.order),C3.length=a.length;for(let l=0,u=a.length;l<u;++l)C3[l]=a[l].injection;const s="".concat(C3.join(`
`),`
`);switch(o){case"vs:#decl":i&&(e=e.replace(xy,s));break;case"vs:#main-start":i&&(e=e.replace(eD,l=>l+s));break;case"vs:#main-end":i&&(e=e.replace(rD,l=>s+l));break;case"fs:#decl":i||(e=e.replace(xy,s));break;case"fs:#main-start":i||(e=e.replace(eD,l=>l+s));break;case"fs:#main-end":i||(e=e.replace(rD,l=>s+l));break;default:e=e.replace(o,l=>l+s)}}return e=e.replace(xy,""),n&&(e=e.replace(/\}\s*$/,o=>o+yTt[t])),e}function hE(e){const t={};return wi(Array.isArray(e)&&e.length>1),e.forEach(r=>{for(const n in r)t[n]=t[n]?"".concat(t[n],`
`).concat(r[n]):r[n]}),t}function qh(e){return new RegExp("\\b".concat(e,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const tG=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],_Tt=[...tG,[qh("attribute"),"in $1"],[qh("varying"),"out $1"]],bTt=[...tG,[qh("varying"),"in $1"]],eG=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],wTt=[...eG,[qh("in"),"attribute $1"],[qh("out"),"varying $1"]],STt=[...eG,[qh("in"),"varying $1"]],dE="gl_FragColor",pE=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,TTt=/void\s+main\s*\([^)]*\)\s*\{\n?/;function kTt(e,t,r){switch(t){case 300:return r?j_(e,_Tt):PTt(e);case 100:return r?j_(e,wTt):ETt(e);default:throw new Error("unknown GLSL version ".concat(t))}}function j_(e,t){for(const[r,n]of t)e=e.replace(r,n);return e}function PTt(e){e=j_(e,bTt);const t=e.match(pE);if(t){const r=t[1];e=e.replace(new RegExp("\\b".concat(dE,"\\b"),"g"),r)}else{const r="fragmentColor";e=e.replace(TTt,n=>"out vec4 ".concat(r,`;
`).concat(n)).replace(new RegExp("\\b".concat(dE,"\\b"),"g"),r)}return e}function ETt(e){e=j_(e,STt);const t=e.match(pE);if(t){const r=t[1];e=e.replace(pE,"").replace(new RegExp("\\b".concat(r,"\\b"),"g"),dE)}return e}const CTt=`

`.concat(xy,`

`),rG={[f0]:"vertex",[Dx]:"fragment"},ATt=`precision highp float;

`;function xTt(e,t){const{vs:r,fs:n}=t,i=nTt(t.modules||[]);return{gl:e,vs:iD(e,Object.assign({},t,{source:r,type:f0,modules:i})),fs:iD(e,Object.assign({},t,{source:n,type:Dx,modules:i})),getUniforms:MTt(i)}}function iD(e,t){let{id:r,source:n,type:i,modules:o,defines:a={},hookFunctions:s=[],inject:l={},transpileToGLSL100:u=!1,prologue:c=!0,log:f}=t;wi(typeof n=="string","shader source must be a string");const h=i===f0,d=n.split(`
`);let p=100,g="",m=n;d[0].indexOf("#version ")===0?(p=300,g=d[0],m=d.slice(1).join(`
`)):g="#version ".concat(p);const v={};o.forEach(k=>{Object.assign(v,k.getDefines())}),Object.assign(v,a);let y=c?"".concat(g,`
`).concat(LTt({id:r,source:n,type:i}),`
`).concat(ITt({type:i}),`
`).concat(pTt(e),`
`).concat(gTt(e),`
`).concat(OTt(v),`
`).concat(h?"":ATt,`
`):"".concat(g,`
`);const b=DTt(s),w={},T={},S={};for(const k in l){const E=typeof l[k]=="string"?{injection:l[k],order:0}:l[k],P=k.match(/^(v|f)s:(#)?([\w-]+)$/);if(P){const C=P[2],A=P[3];C?A==="decl"?T[k]=[E]:S[k]=[E]:w[k]=[E]}else S[k]=[E]}for(const k of o){f&&k.checkDeprecations(m,f),y+=k.getModuleSource(i,p);const P=k.injections[i];for(const C in P){const A=C.match(/^(v|f)s:#([\w-]+)$/);if(A){const R=A[2]==="decl"?T:S;R[C]=R[C]||[],R[C].push(P[C])}else w[C]=w[C]||[],w[C].push(P[C])}}return y+=CTt,y=nD(y,i,T),y+=RTt(b[i],w),y+=m,y=nD(y,i,S),y=kTt(y,u?100:p,h),y}function MTt(e){return function(r){const n={};for(const i of e){const o=i.getUniforms(r,n);Object.assign(n,o)}return n}}function ITt(e){let{type:t}=e;return`
#define SHADER_TYPE_`.concat(rG[t].toUpperCase(),`
`)}function LTt(e){let{id:t,source:r,type:n}=e;return t&&typeof t=="string"&&r.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME `.concat(t,"_").concat(rG[n],`

`):""}function OTt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=0,r="";for(const n in e){t===0&&(r+=`
// APPLICATION DEFINES
`),t++;const i=e[n];(i||Number.isFinite(i))&&(r+="#define ".concat(n.toUpperCase()," ").concat(e[n],`
`))}return t===0&&(r+=`
`),r}function RTt(e,t){let r="";for(const n in e){const i=e[n];if(r+="void ".concat(i.signature,` {
`),i.header&&(r+="  ".concat(i.header)),t[n]){const o=t[n];o.sort((a,s)=>a.order-s.order);for(const a of o)r+="  ".concat(a.injection,`
`)}i.footer&&(r+="  ".concat(i.footer)),r+=`}
`}return r}function DTt(e){const t={vs:{},fs:{}};return e.forEach(r=>{let n;typeof r!="string"?(n=r,r=n.hook):n={},r=r.trim();const[i,o]=r.split(":"),a=r.replace(/\(.+/,"");t[i][a]=Object.assign(n,{signature:o})}),t}const NTt="void main() {gl_FragColor = vec4(0);}",nG=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,FTt=`#version 300 es
`.concat(nG);function iG(e,t){t=Array.isArray(t)?t:[t];const r=e.replace(/^\s+/,"").split(/\s+/),[n,i,o]=r;if(!t.includes(n)||!i||!o)return null;const a=o.split(";")[0];return{qualifier:n,type:i,name:a}}function oG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{version:t=100,input:r,inputType:n,output:i}=e;if(!r)return t===300?FTt:t>300?"#version ".concat(t,`
`).concat(nG):NTt;const o=zTt(r,n);return t>=300?"#version ".concat(t," ").concat(t===300?"es":"",`
in `).concat(n," ").concat(r,`;
out vec4 `).concat(i,`;
void main() {
  `).concat(i," = ").concat(o,`;
}`):"varying ".concat(n," ").concat(r,`;
void main() {
  gl_FragColor = `).concat(o,`;
}`)}function $Tt(e){switch(e){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return wi(!1),null}}function BTt(e){switch(e){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return wi(!1),null}}function zTt(e,t){switch(t){case"float":return"vec4(".concat(e,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(e,", 0.0, 1.0)");case"vec3":return"vec4(".concat(e,", 1.0)");case"vec4":return e;default:return wi(!1),null}}const VTt=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,UTt={name:"fp32",vs:VTt,fs:null};function Av(e,t){if(!e)throw new Error("math.gl assertion ".concat(t))}const zn={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function WTt(e,{precision:t=zn.precision}={}){return e=jTt(e),"".concat(parseFloat(e.toPrecision(t)))}function Mc(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&!(e instanceof DataView)}function un(e,t,r){return HTt(e,n=>Math.max(t,Math.min(r,n)))}function gc(e,t,r){return Mc(e)?e.map((n,i)=>gc(n,t[i],r)):r*t+(1-r)*e}function Ea(e,t,r){const n=zn.EPSILON;r&&(zn.EPSILON=r);try{if(e===t)return!0;if(Mc(e)&&Mc(t)){if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(!Ea(e[i],t[i]))return!1;return!0}return e&&e.equals?e.equals(t):t&&t.equals?t.equals(e):typeof e=="number"&&typeof t=="number"?Math.abs(e-t)<=zn.EPSILON*Math.max(1,Math.abs(e),Math.abs(t)):!1}finally{zn.EPSILON=n}}function jTt(e){return Math.round(e/zn.EPSILON)*zn.EPSILON}function GTt(e){return e.clone?e.clone():new Array(e.length)}function HTt(e,t,r){if(Mc(e)){const n=e;r=r||GTt(n);for(let i=0;i<r.length&&i<n.length;++i)r[i]=t(e[i],i,r);return r}return t(e)}function XTt(e){function t(){var r=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(r,Object.getPrototypeOf(this)),r}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}class Fx extends XTt(Array){clone(){return new this.constructor().copy(this)}fromArray(t,r=0){for(let n=0;n<this.ELEMENTS;++n)this[n]=t[n+r];return this.check()}toArray(t=[],r=0){for(let n=0;n<this.ELEMENTS;++n)t[r+n]=this[n];return t}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}to(t){return t===this?this:Mc(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(zn)}formatString(t){let r="";for(let n=0;n<this.ELEMENTS;++n)r+=(n>0?", ":"")+WTt(this[n],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(r,"]")}equals(t){if(!t||this.length!==t.length)return!1;for(let r=0;r<this.ELEMENTS;++r)if(!Ea(this[r],t[r]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let r=0;r<this.ELEMENTS;++r)if(this[r]!==t[r])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,r,n){if(n===void 0)return this.lerp(this,t,r);for(let i=0;i<this.ELEMENTS;++i){const o=t[i];this[i]=o+n*(r[i]-o)}return this.check()}min(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(t[r],this[r]);return this.check()}max(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.max(t[r],this[r]);return this.check()}clamp(t,r){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t[n]),r[n]);return this.check()}add(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]+=r[n];return this.check()}subtract(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]-=r[n];return this.check()}scale(t){if(typeof t=="number")for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;else for(let r=0;r<this.ELEMENTS&&r<t.length;++r)this[r]*=t[r];return this.check()}multiplyByScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;return this.check()}check(){if(zn.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let t=this.length===this.ELEMENTS;for(let r=0;r<this.ELEMENTS;++r)t=t&&Number.isFinite(this[r]);return t}sub(t){return this.subtract(t)}setScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=t;return this.check()}addScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;return this.check()}divideScalar(t){return this.multiplyByScalar(1/t)}clampScalar(t,r){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t),r);return this.check()}get elements(){return this}}function YTt(e,t){if(e.length!==t)return!1;for(let r=0;r<e.length;++r)if(!Number.isFinite(e[r]))return!1;return!0}function Je(e){if(!Number.isFinite(e))throw new Error("Invalid number ".concat(e));return e}function Zg(e,t,r=""){if(zn.debug&&!YTt(e,t))throw new Error("math.gl: ".concat(r," some fields set to invalid numbers'"));return e}class aG extends Fx{get x(){return this[0]}set x(t){this[0]=Je(t)}get y(){return this[1]}set y(t){this[1]=Je(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let r=0;r<this.ELEMENTS;++r)t+=this[r]*this[r];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let r=0;for(let n=0;n<this.ELEMENTS;++n){const i=this[n]-t[n];r+=i*i}return Je(r)}dot(t){let r=0;for(let n=0;n<this.ELEMENTS;++n)r+=this[n]*t[n];return Je(r)}normalize(){const t=this.magnitude();if(t!==0)for(let r=0;r<this.ELEMENTS;++r)this[r]/=t;return this.check()}multiply(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]*=r[n];return this.check()}divide(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]/=r[n];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return Av(t>=0&&t<this.ELEMENTS,"index is out of range"),Je(this[t])}setComponent(t,r){return Av(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=r,this.check()}addVectors(t,r){return this.copy(t).add(r)}subVectors(t,r){return this.copy(t).subtract(r)}multiplyVectors(t,r){return this.copy(t).multiply(r)}addScaledVector(t,r){return this.add(new this.constructor(t).multiplyScalar(r))}}var qg=1e-6,Fo=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function KTt(){var e=new Fo(2);return Fo!=Float32Array&&(e[0]=0,e[1]=0),e}function G_(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function sG(e,t){return e[0]=-t[0],e[1]=-t[1],e}function lG(e,t,r,n){var i=t[0],o=t[1];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e}function ZTt(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[3]*i+r[6],e[1]=r[1]*n+r[4]*i+r[7],e}function qTt(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e}(function(){var e=KTt();return function(t,r,n,i,o,a){var s,l;for(r||(r=2),n||(n=0),i?l=Math.min(i*r+n,t.length):l=t.length,s=n;s<l;s+=r)e[0]=t[s],e[1]=t[s+1],o(e,e,a),t[s]=e[0],t[s+1]=e[1];return t}})();function JTt(e,t,r){const n=t[0],i=t[1],o=r[3]*n+r[7]*i||1;return e[0]=(r[0]*n+r[4]*i)/o,e[1]=(r[1]*n+r[5]*i)/o,e}function uG(e,t,r){const n=t[0],i=t[1],o=t[2],a=r[3]*n+r[7]*i+r[11]*o||1;return e[0]=(r[0]*n+r[4]*i+r[8]*o)/a,e[1]=(r[1]*n+r[5]*i+r[9]*o)/a,e[2]=(r[2]*n+r[6]*i+r[10]*o)/a,e}function QTt(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e[2]=t[2],e}function tkt(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e[2]=t[2],e[3]=t[3],e}function cG(e,t,r){const n=t[0],i=t[1],o=t[2];return e[0]=r[0]*n+r[3]*i+r[6]*o,e[1]=r[1]*n+r[4]*i+r[7]*o,e[2]=r[2]*n+r[5]*i+r[8]*o,e[3]=t[3],e}function fG(){var e=new Fo(3);return Fo!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function ekt(e){var t=e[0],r=e[1],n=e[2];return Math.hypot(t,r,n)}function oD(e,t,r){var n=new Fo(3);return n[0]=e,n[1]=t,n[2]=r,n}function rkt(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function nkt(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n}function ikt(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function okt(e,t){var r=t[0],n=t[1],i=t[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function hG(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function My(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0],s=r[1],l=r[2];return e[0]=i*l-o*s,e[1]=o*a-n*l,e[2]=n*s-i*a,e}function akt(e,t,r,n){var i=t[0],o=t[1],a=t[2];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e[2]=a+n*(r[2]-a),e}function $x(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[3]*n+r[7]*i+r[11]*o+r[15];return a=a||1,e[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/a,e[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/a,e[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/a,e}function dG(e,t,r){var n=t[0],i=t[1],o=t[2];return e[0]=n*r[0]+i*r[3]+o*r[6],e[1]=n*r[1]+i*r[4]+o*r[7],e[2]=n*r[2]+i*r[5]+o*r[8],e}function pG(e,t,r){var n=r[0],i=r[1],o=r[2],a=r[3],s=t[0],l=t[1],u=t[2],c=i*u-o*l,f=o*s-n*u,h=n*l-i*s,d=i*h-o*f,p=o*c-n*h,g=n*f-i*c,m=a*2;return c*=m,f*=m,h*=m,d*=2,p*=2,g*=2,e[0]=s+c+d,e[1]=l+f+p,e[2]=u+h+g,e}function skt(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function lkt(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function ukt(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function ckt(e,t){var r=e[0],n=e[1],i=e[2],o=t[0],a=t[1],s=t[2],l=Math.sqrt(r*r+n*n+i*i),u=Math.sqrt(o*o+a*a+s*s),c=l*u,f=c&&hG(e,t)/c;return Math.acos(Math.min(Math.max(f,-1),1))}var gG=rkt,vG=ekt,A3=nkt;(function(){var e=fG();return function(t,r,n,i,o,a){var s,l;for(r||(r=3),n||(n=0),i?l=Math.min(i*r+n,t.length):l=t.length,s=n;s<l;s+=r)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2];return t}})();const x3=[0,0,0];let Km;class Nt extends aG{static get ZERO(){return Km||(Km=new Nt(0,0,0),Object.freeze(Km)),Km}constructor(t=0,r=0,n=0){super(-0,-0,-0),arguments.length===1&&Mc(t)?this.copy(t):(zn.debug&&(Je(t),Je(r),Je(n)),this[0]=t,this[1]=r,this[2]=n)}set(t,r,n){return this[0]=t,this[1]=r,this[2]=n,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}fromObject(t){return zn.debug&&(Je(t.x),Je(t.y),Je(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}get ELEMENTS(){return 3}get z(){return this[2]}set z(t){this[2]=Je(t)}angle(t){return ckt(this,t)}cross(t){return My(this,this,t),this.check()}rotateX({radians:t,origin:r=x3}){return skt(this,this,r,t),this.check()}rotateY({radians:t,origin:r=x3}){return lkt(this,this,r,t),this.check()}rotateZ({radians:t,origin:r=x3}){return ukt(this,this,r,t),this.check()}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return $x(this,this,t),this.check()}transformAsVector(t){return uG(this,this,t),this.check()}transformByMatrix3(t){return dG(this,this,t),this.check()}transformByMatrix2(t){return QTt(this,this,t),this.check()}transformByQuaternion(t){return pG(this,this,t),this.check()}}let Zm;class Bx extends aG{static get ZERO(){return Zm||(Zm=new Bx(0,0,0,0),Object.freeze(Zm)),Zm}constructor(t=0,r=0,n=0,i=0){super(-0,-0,-0,-0),Mc(t)&&arguments.length===1?this.copy(t):(zn.debug&&(Je(t),Je(r),Je(n),Je(i)),this[0]=t,this[1]=r,this[2]=n,this[3]=i)}set(t,r,n,i){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}fromObject(t){return zn.debug&&(Je(t.x),Je(t.y),Je(t.z),Je(t.w)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t.w=this[3],t}get ELEMENTS(){return 4}get z(){return this[2]}set z(t){this[2]=Je(t)}get w(){return this[3]}set w(t){this[3]=Je(t)}transform(t){return $x(this,this,t),this.check()}transformByMatrix3(t){return cG(this,this,t),this.check()}transformByMatrix2(t){return tkt(this,this,t),this.check()}transformByQuaternion(t){return pG(this,this,t),this.check()}applyMatrix4(t){return t.transform(this,this),this}}class mG extends Fx{toString(){let t="[";if(zn.printRowMajor){t+="row-major:";for(let r=0;r<this.RANK;++r)for(let n=0;n<this.RANK;++n)t+=" ".concat(this[n*this.RANK+r])}else{t+="column-major:";for(let r=0;r<this.ELEMENTS;++r)t+=" ".concat(this[r])}return t+="]",t}getElementIndex(t,r){return r*this.RANK+t}getElement(t,r){return this[r*this.RANK+t]}setElement(t,r,n){return this[r*this.RANK+t]=Je(n),this}getColumn(t,r=new Array(this.RANK).fill(-0)){const n=t*this.RANK;for(let i=0;i<this.RANK;++i)r[i]=this[n+i];return r}setColumn(t,r){const n=t*this.RANK;for(let i=0;i<this.RANK;++i)this[n+i]=r[i];return this}}function fkt(){var e=new Fo(9);return Fo!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function hkt(e,t){if(e===t){var r=t[1],n=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=n,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function dkt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=c*a-s*u,h=-c*o+s*l,d=u*o-a*l,p=r*f+n*h+i*d;return p?(p=1/p,e[0]=f*p,e[1]=(-c*n+i*u)*p,e[2]=(s*n-i*a)*p,e[3]=h*p,e[4]=(c*r-i*l)*p,e[5]=(-s*r+i*o)*p,e[6]=d*p,e[7]=(-u*r+n*l)*p,e[8]=(a*r-n*o)*p,e):null}function pkt(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8];return t*(u*o-a*l)+r*(-u*i+a*s)+n*(l*i-o*s)}function aD(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=r[0],d=r[1],p=r[2],g=r[3],m=r[4],v=r[5],y=r[6],b=r[7],w=r[8];return e[0]=h*n+d*a+p*u,e[1]=h*i+d*s+p*c,e[2]=h*o+d*l+p*f,e[3]=g*n+m*a+v*u,e[4]=g*i+m*s+v*c,e[5]=g*o+m*l+v*f,e[6]=y*n+b*a+w*u,e[7]=y*i+b*s+w*c,e[8]=y*o+b*l+w*f,e}function gkt(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=r[0],d=r[1];return e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=h*n+d*a+u,e[7]=h*i+d*s+c,e[8]=h*o+d*l+f,e}function vkt(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=Math.sin(r),d=Math.cos(r);return e[0]=d*n+h*a,e[1]=d*i+h*s,e[2]=d*o+h*l,e[3]=d*a-h*n,e[4]=d*s-h*i,e[5]=d*l-h*o,e[6]=u,e[7]=c,e[8]=f,e}function sD(e,t,r){var n=r[0],i=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function mkt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r+r,s=n+n,l=i+i,u=r*a,c=n*a,f=n*s,h=i*a,d=i*s,p=i*l,g=o*a,m=o*s,v=o*l;return e[0]=1-f-p,e[3]=c-v,e[6]=h+m,e[1]=c+v,e[4]=1-u-p,e[7]=d-g,e[2]=h-m,e[5]=d+g,e[8]=1-u-f,e}var gE;(function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL1ROW0=3]="COL1ROW0",e[e.COL1ROW1=4]="COL1ROW1",e[e.COL1ROW2=5]="COL1ROW2",e[e.COL2ROW0=6]="COL2ROW0",e[e.COL2ROW1=7]="COL2ROW1",e[e.COL2ROW2=8]="COL2ROW2"})(gE||(gE={}));const ykt=Object.freeze([1,0,0,0,1,0,0,0,1]);class fn extends mG{static get IDENTITY(){return bkt()}static get ZERO(){return _kt()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return gE}constructor(t,...r){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(t)?this.copy(t):r.length>0?this.copy([t,...r]):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this.check()}identity(){return this.copy(ykt)}fromObject(t){return this.check()}fromQuaternion(t){return mkt(this,t),this.check()}set(t,r,n,i,o,a,s,l,u){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this[4]=o,this[5]=a,this[6]=s,this[7]=l,this[8]=u,this.check()}setRowMajor(t,r,n,i,o,a,s,l,u){return this[0]=t,this[1]=i,this[2]=s,this[3]=r,this[4]=o,this[5]=l,this[6]=n,this[7]=a,this[8]=u,this.check()}determinant(){return pkt(this)}transpose(){return hkt(this,this),this.check()}invert(){return dkt(this,this),this.check()}multiplyLeft(t){return aD(this,t,this),this.check()}multiplyRight(t){return aD(this,this,t),this.check()}rotate(t){return vkt(this,this,t),this.check()}scale(t){return Array.isArray(t)?sD(this,this,t):sD(this,this,[t,t]),this.check()}translate(t){return gkt(this,this,t),this.check()}transform(t,r){let n;switch(t.length){case 2:n=ZTt(r||[-0,-0],t,this);break;case 3:n=dG(r||[-0,-0,-0],t,this);break;case 4:n=cG(r||[-0,-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Zg(n,t.length),n}transformVector(t,r){return this.transform(t,r)}transformVector2(t,r){return this.transform(t,r)}transformVector3(t,r){return this.transform(t,r)}}let qm,Jm;function _kt(){return qm||(qm=new fn([0,0,0,0,0,0,0,0,0]),Object.freeze(qm)),qm}function bkt(){return Jm||(Jm=new fn,Object.freeze(Jm)),Jm}function wkt(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Skt(e,t){if(e===t){var r=t[1],n=t[2],i=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function vE(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],h=t[10],d=t[11],p=t[12],g=t[13],m=t[14],v=t[15],y=r*s-n*a,b=r*l-i*a,w=r*u-o*a,T=n*l-i*s,S=n*u-o*s,k=i*u-o*l,E=c*g-f*p,P=c*m-h*p,C=c*v-d*p,A=f*m-h*g,L=f*v-d*g,R=h*v-d*m,D=y*R-b*L+w*A+T*C-S*P+k*E;return D?(D=1/D,e[0]=(s*R-l*L+u*A)*D,e[1]=(i*L-n*R-o*A)*D,e[2]=(g*k-m*S+v*T)*D,e[3]=(h*S-f*k-d*T)*D,e[4]=(l*C-a*R-u*P)*D,e[5]=(r*R-i*C+o*P)*D,e[6]=(m*w-p*k-v*b)*D,e[7]=(c*k-h*w+d*b)*D,e[8]=(a*L-s*C+u*E)*D,e[9]=(n*C-r*L-o*E)*D,e[10]=(p*S-g*w+v*y)*D,e[11]=(f*w-c*S-d*y)*D,e[12]=(s*P-a*A-l*E)*D,e[13]=(r*A-n*P+i*E)*D,e[14]=(g*b-p*T-m*y)*D,e[15]=(c*T-f*b+h*y)*D,e):null}function Tkt(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],f=e[10],h=e[11],d=e[12],p=e[13],g=e[14],m=e[15],v=t*a-r*o,y=t*s-n*o,b=t*l-i*o,w=r*s-n*a,T=r*l-i*a,S=n*l-i*s,k=u*p-c*d,E=u*g-f*d,P=u*m-h*d,C=c*g-f*p,A=c*m-h*p,L=f*m-h*g;return v*L-y*A+b*C+w*P-T*E+S*k}function vc(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=t[9],d=t[10],p=t[11],g=t[12],m=t[13],v=t[14],y=t[15],b=r[0],w=r[1],T=r[2],S=r[3];return e[0]=b*n+w*s+T*f+S*g,e[1]=b*i+w*l+T*h+S*m,e[2]=b*o+w*u+T*d+S*v,e[3]=b*a+w*c+T*p+S*y,b=r[4],w=r[5],T=r[6],S=r[7],e[4]=b*n+w*s+T*f+S*g,e[5]=b*i+w*l+T*h+S*m,e[6]=b*o+w*u+T*d+S*v,e[7]=b*a+w*c+T*p+S*y,b=r[8],w=r[9],T=r[10],S=r[11],e[8]=b*n+w*s+T*f+S*g,e[9]=b*i+w*l+T*h+S*m,e[10]=b*o+w*u+T*d+S*v,e[11]=b*a+w*c+T*p+S*y,b=r[12],w=r[13],T=r[14],S=r[15],e[12]=b*n+w*s+T*f+S*g,e[13]=b*i+w*l+T*h+S*m,e[14]=b*o+w*u+T*d+S*v,e[15]=b*a+w*c+T*p+S*y,e}function H_(e,t,r){var n=r[0],i=r[1],o=r[2],a,s,l,u,c,f,h,d,p,g,m,v;return t===e?(e[12]=t[0]*n+t[4]*i+t[8]*o+t[12],e[13]=t[1]*n+t[5]*i+t[9]*o+t[13],e[14]=t[2]*n+t[6]*i+t[10]*o+t[14],e[15]=t[3]*n+t[7]*i+t[11]*o+t[15]):(a=t[0],s=t[1],l=t[2],u=t[3],c=t[4],f=t[5],h=t[6],d=t[7],p=t[8],g=t[9],m=t[10],v=t[11],e[0]=a,e[1]=s,e[2]=l,e[3]=u,e[4]=c,e[5]=f,e[6]=h,e[7]=d,e[8]=p,e[9]=g,e[10]=m,e[11]=v,e[12]=a*n+c*i+p*o+t[12],e[13]=s*n+f*i+g*o+t[13],e[14]=l*n+h*i+m*o+t[14],e[15]=u*n+d*i+v*o+t[15]),e}function zx(e,t,r){var n=r[0],i=r[1],o=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function kkt(e,t,r,n){var i=n[0],o=n[1],a=n[2],s=Math.hypot(i,o,a),l,u,c,f,h,d,p,g,m,v,y,b,w,T,S,k,E,P,C,A,L,R,D,F;return s<qg?null:(s=1/s,i*=s,o*=s,a*=s,l=Math.sin(r),u=Math.cos(r),c=1-u,f=t[0],h=t[1],d=t[2],p=t[3],g=t[4],m=t[5],v=t[6],y=t[7],b=t[8],w=t[9],T=t[10],S=t[11],k=i*i*c+u,E=o*i*c+a*l,P=a*i*c-o*l,C=i*o*c-a*l,A=o*o*c+u,L=a*o*c+i*l,R=i*a*c+o*l,D=o*a*c-i*l,F=a*a*c+u,e[0]=f*k+g*E+b*P,e[1]=h*k+m*E+w*P,e[2]=d*k+v*E+T*P,e[3]=p*k+y*E+S*P,e[4]=f*C+g*A+b*L,e[5]=h*C+m*A+w*L,e[6]=d*C+v*A+T*L,e[7]=p*C+y*A+S*L,e[8]=f*R+g*D+b*F,e[9]=h*R+m*D+w*F,e[10]=d*R+v*D+T*F,e[11]=p*R+y*D+S*F,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function yG(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],f=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+u*n,e[5]=a*i+c*n,e[6]=s*i+f*n,e[7]=l*i+h*n,e[8]=u*i-o*n,e[9]=c*i-a*n,e[10]=f*i-s*n,e[11]=h*i-l*n,e}function Pkt(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],l=t[3],u=t[8],c=t[9],f=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-u*n,e[1]=a*i-c*n,e[2]=s*i-f*n,e[3]=l*i-h*n,e[8]=o*n+u*i,e[9]=a*n+c*i,e[10]=s*n+f*i,e[11]=l*n+h*i,e}function _G(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5],f=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+u*n,e[1]=a*i+c*n,e[2]=s*i+f*n,e[3]=l*i+h*n,e[4]=u*i-o*n,e[5]=c*i-a*n,e[6]=f*i-s*n,e[7]=h*i-l*n,e}function Ekt(e,t){var r=t[0],n=t[1],i=t[2],o=t[4],a=t[5],s=t[6],l=t[8],u=t[9],c=t[10];return e[0]=Math.hypot(r,n,i),e[1]=Math.hypot(o,a,s),e[2]=Math.hypot(l,u,c),e}function Ckt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r+r,s=n+n,l=i+i,u=r*a,c=n*a,f=n*s,h=i*a,d=i*s,p=i*l,g=o*a,m=o*s,v=o*l;return e[0]=1-f-p,e[1]=c+v,e[2]=h-m,e[3]=0,e[4]=c-v,e[5]=1-u-p,e[6]=d+g,e[7]=0,e[8]=h+m,e[9]=d-g,e[10]=1-u-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Akt(e,t,r,n,i,o,a){var s=1/(r-t),l=1/(i-n),u=1/(o-a);return e[0]=o*2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o*2*l,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(i+n)*l,e[10]=(a+o)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*u,e[15]=0,e}function xkt(e,t,r,n,i){var o=1/Math.tan(t/2),a;return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0?(a=1/(n-i),e[10]=(i+n)*a,e[14]=2*i*n*a):(e[10]=-1,e[14]=-2*n),e}var Mkt=xkt;function Ikt(e,t,r,n,i,o,a){var s=1/(t-r),l=1/(n-i),u=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+r)*s,e[13]=(i+n)*l,e[14]=(a+o)*u,e[15]=1,e}var Lkt=Ikt;function Okt(e,t,r,n){var i,o,a,s,l,u,c,f,h,d,p=t[0],g=t[1],m=t[2],v=n[0],y=n[1],b=n[2],w=r[0],T=r[1],S=r[2];return Math.abs(p-w)<qg&&Math.abs(g-T)<qg&&Math.abs(m-S)<qg?wkt(e):(c=p-w,f=g-T,h=m-S,d=1/Math.hypot(c,f,h),c*=d,f*=d,h*=d,i=y*h-b*f,o=b*c-v*h,a=v*f-y*c,d=Math.hypot(i,o,a),d?(d=1/d,i*=d,o*=d,a*=d):(i=0,o=0,a=0),s=f*a-h*o,l=h*i-c*a,u=c*o-f*i,d=Math.hypot(s,l,u),d?(d=1/d,s*=d,l*=d,u*=d):(s=0,l=0,u=0),e[0]=i,e[1]=s,e[2]=c,e[3]=0,e[4]=o,e[5]=l,e[6]=f,e[7]=0,e[8]=a,e[9]=u,e[10]=h,e[11]=0,e[12]=-(i*p+o*g+a*m),e[13]=-(s*p+l*g+u*m),e[14]=-(c*p+f*g+h*m),e[15]=1,e)}function Rkt(){var e=new Fo(4);return Fo!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function Dkt(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function Vx(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function Nkt(e){var t=e[0],r=e[1],n=e[2],i=e[3];return Math.hypot(t,r,n,i)}function Fkt(e){var t=e[0],r=e[1],n=e[2],i=e[3];return t*t+r*r+n*n+i*i}function $kt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r*r+n*n+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),e[0]=r*a,e[1]=n*a,e[2]=i*a,e[3]=o*a,e}function Bkt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function zkt(e,t,r,n){var i=t[0],o=t[1],a=t[2],s=t[3];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e[2]=a+n*(r[2]-a),e[3]=s+n*(r[3]-s),e}function _d(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*a,e[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*a,e[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*a,e[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*a,e}function Vkt(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0],s=r[1],l=r[2],u=r[3],c=u*n+s*o-l*i,f=u*i+l*n-a*o,h=u*o+a*i-s*n,d=-a*n-s*i-l*o;return e[0]=c*u+d*-a+f*-l-h*-s,e[1]=f*u+d*-s+h*-a-c*-l,e[2]=h*u+d*-l+c*-s-f*-a,e[3]=t[3],e}(function(){var e=Rkt();return function(t,r,n,i,o,a){var s,l;for(r||(r=4),n||(n=0),i?l=Math.min(i*r+n,t.length):l=t.length,s=n;s<l;s+=r)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}})();var mE;(function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL0ROW3=3]="COL0ROW3",e[e.COL1ROW0=4]="COL1ROW0",e[e.COL1ROW1=5]="COL1ROW1",e[e.COL1ROW2=6]="COL1ROW2",e[e.COL1ROW3=7]="COL1ROW3",e[e.COL2ROW0=8]="COL2ROW0",e[e.COL2ROW1=9]="COL2ROW1",e[e.COL2ROW2=10]="COL2ROW2",e[e.COL2ROW3=11]="COL2ROW3",e[e.COL3ROW0=12]="COL3ROW0",e[e.COL3ROW1=13]="COL3ROW1",e[e.COL3ROW2=14]="COL3ROW2",e[e.COL3ROW3=15]="COL3ROW3"})(mE||(mE={}));const Ukt=45*Math.PI/180,Wkt=1,M3=.1,I3=500,jkt=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Mn extends mG{static get IDENTITY(){return Hkt()}static get ZERO(){return Gkt()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return mE}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,r,n,i,o,a,s,l,u,c,f,h,d,p,g,m){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this[4]=o,this[5]=a,this[6]=s,this[7]=l,this[8]=u,this[9]=c,this[10]=f,this[11]=h,this[12]=d,this[13]=p,this[14]=g,this[15]=m,this.check()}setRowMajor(t,r,n,i,o,a,s,l,u,c,f,h,d,p,g,m){return this[0]=t,this[1]=o,this[2]=u,this[3]=d,this[4]=r,this[5]=a,this[6]=c,this[7]=p,this[8]=n,this[9]=s,this[10]=f,this[11]=g,this[12]=i,this[13]=l,this[14]=h,this[15]=m,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(jkt)}fromObject(t){return this.check()}fromQuaternion(t){return Ckt(this,t),this.check()}frustum(t){const{left:r,right:n,bottom:i,top:o,near:a=M3,far:s=I3}=t;return s===1/0?Xkt(this,r,n,i,o,a):Akt(this,r,n,i,o,a,s),this.check()}lookAt(t){const{eye:r,center:n=[0,0,0],up:i=[0,1,0]}=t;return Okt(this,r,n,i),this.check()}ortho(t){const{left:r,right:n,bottom:i,top:o,near:a=M3,far:s=I3}=t;return Lkt(this,r,n,i,o,a,s),this.check()}orthographic(t){const{fovy:r=Ukt,aspect:n=Wkt,focalDistance:i=1,near:o=M3,far:a=I3}=t;lD(r);const s=r/2,l=i*Math.tan(s),u=l*n;return this.ortho({left:-u,right:u,bottom:-l,top:l,near:o,far:a})}perspective(t){const{fovy:r=45*Math.PI/180,aspect:n=1,near:i=.1,far:o=500}=t;return lD(r),Mkt(this,r,n,i,o),this.check()}determinant(){return Tkt(this)}getScale(t=[-0,-0,-0]){return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(t=[-0,-0,-0]){return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t,r){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],r=r||[-0,-0,-0];const n=this.getScale(r),i=1/n[0],o=1/n[1],a=1/n[2];return t[0]=this[0]*i,t[1]=this[1]*o,t[2]=this[2]*a,t[3]=0,t[4]=this[4]*i,t[5]=this[5]*o,t[6]=this[6]*a,t[7]=0,t[8]=this[8]*i,t[9]=this[9]*o,t[10]=this[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t,r){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0],r=r||[-0,-0,-0];const n=this.getScale(r),i=1/n[0],o=1/n[1],a=1/n[2];return t[0]=this[0]*i,t[1]=this[1]*o,t[2]=this[2]*a,t[3]=this[4]*i,t[4]=this[5]*o,t[5]=this[6]*a,t[6]=this[8]*i,t[7]=this[9]*o,t[8]=this[10]*a,t}transpose(){return Skt(this,this),this.check()}invert(){return vE(this,this),this.check()}multiplyLeft(t){return vc(this,t,this),this.check()}multiplyRight(t){return vc(this,this,t),this.check()}rotateX(t){return yG(this,this,t),this.check()}rotateY(t){return Pkt(this,this,t),this.check()}rotateZ(t){return _G(this,this,t),this.check()}rotateXYZ(t){return this.rotateX(t[0]).rotateY(t[1]).rotateZ(t[2])}rotateAxis(t,r){return kkt(this,this,t,r),this.check()}scale(t){return zx(this,this,Array.isArray(t)?t:[t,t,t]),this.check()}translate(t){return H_(this,this,t),this.check()}transform(t,r){return t.length===4?(r=_d(r||[-0,-0,-0,-0],t,this),Zg(r,4),r):this.transformAsPoint(t,r)}transformAsPoint(t,r){const{length:n}=t;let i;switch(n){case 2:i=qTt(r||[-0,-0],t,this);break;case 3:i=$x(r||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Zg(i,t.length),i}transformAsVector(t,r){let n;switch(t.length){case 2:n=JTt(r||[-0,-0],t,this);break;case 3:n=uG(r||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Zg(n,t.length),n}transformPoint(t,r){return this.transformAsPoint(t,r)}transformVector(t,r){return this.transformAsPoint(t,r)}transformDirection(t,r){return this.transformAsVector(t,r)}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,r,n){return this.identity().translate([t,r,n])}}let Qm,t1;function Gkt(){return Qm||(Qm=new Mn([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(Qm)),Qm}function Hkt(){return t1||(t1=new Mn,Object.freeze(t1)),t1}function lD(e){if(e>Math.PI*2)throw Error("expected radians")}function Xkt(e,t,r,n,i,o){const a=2*o/(r-t),s=2*o/(i-n),l=(r+t)/(r-t),u=(i+n)/(i-n),c=-1,f=-1,h=-2*o;return e[0]=a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=l,e[9]=u,e[10]=c,e[11]=f,e[12]=0,e[13]=0,e[14]=h,e[15]=0,e}function uD(){var e=new Fo(4);return Fo!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function Ykt(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function bG(e,t,r){r=r*.5;var n=Math.sin(r);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(r),e}function cD(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=r[0],l=r[1],u=r[2],c=r[3];return e[0]=n*c+a*s+i*u-o*l,e[1]=i*c+a*l+o*s-n*u,e[2]=o*c+a*u+n*l-i*s,e[3]=a*c-n*s-i*l-o*u,e}function Kkt(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l+a*s,e[1]=i*l+o*s,e[2]=o*l-i*s,e[3]=a*l-n*s,e}function Zkt(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l-o*s,e[1]=i*l+a*s,e[2]=o*l+n*s,e[3]=a*l-i*s,e}function qkt(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l+i*s,e[1]=i*l-n*s,e[2]=o*l+a*s,e[3]=a*l-o*s,e}function Jkt(e,t){var r=t[0],n=t[1],i=t[2];return e[0]=r,e[1]=n,e[2]=i,e[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),e}function Iy(e,t,r,n){var i=t[0],o=t[1],a=t[2],s=t[3],l=r[0],u=r[1],c=r[2],f=r[3],h,d,p,g,m;return d=i*l+o*u+a*c+s*f,d<0&&(d=-d,l=-l,u=-u,c=-c,f=-f),1-d>qg?(h=Math.acos(d),p=Math.sin(h),g=Math.sin((1-n)*h)/p,m=Math.sin(n*h)/p):(g=1-n,m=n),e[0]=g*i+m*l,e[1]=g*o+m*u,e[2]=g*a+m*c,e[3]=g*s+m*f,e}function Qkt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r*r+n*n+i*i+o*o,s=a?1/a:0;return e[0]=-r*s,e[1]=-n*s,e[2]=-i*s,e[3]=o*s,e}function tPt(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function wG(e,t){var r=t[0]+t[4]+t[8],n;if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[i*3+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(t[i*3+i]-t[o*3+o]-t[a*3+a]+1),e[i]=.5*n,n=.5/n,e[3]=(t[o*3+a]-t[a*3+o])*n,e[o]=(t[o*3+i]+t[i*3+o])*n,e[a]=(t[a*3+i]+t[i*3+a])*n}return e}var ePt=Dkt,rPt=Vx,nPt=Bkt,iPt=zkt,oPt=Nkt,aPt=Fkt,SG=$kt,sPt=function(){var e=fG(),t=oD(1,0,0),r=oD(0,1,0);return function(n,i,o){var a=hG(i,o);return a<-.999999?(My(e,t,i),vG(e)<1e-6&&My(e,r,i),okt(e,e),bG(n,e,Math.PI),n):a>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(My(e,i,o),n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=1+a,SG(n,n))}}();(function(){var e=uD(),t=uD();return function(r,n,i,o,a,s){return Iy(e,n,a,s),Iy(t,i,o,s),Iy(r,e,t,2*s*(1-s)),r}})();(function(){var e=fkt();return function(t,r,n,i){return e[0]=n[0],e[3]=n[1],e[6]=n[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-r[0],e[5]=-r[1],e[8]=-r[2],SG(t,wG(t,e))}})();const lPt=[0,0,0,1];class fD extends Fx{constructor(t=0,r=0,n=0,i=1){super(-0,-0,-0,-0),Array.isArray(t)&&arguments.length===1?this.copy(t):this.set(t,r,n,i)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}set(t,r,n,i){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this.check()}fromObject(t){return this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this.check()}fromMatrix3(t){return wG(this,t),this.check()}fromAxisRotation(t,r){return bG(this,t,r),this.check()}identity(){return Ykt(this),this.check()}setAxisAngle(t,r){return this.fromAxisRotation(t,r)}get ELEMENTS(){return 4}get x(){return this[0]}set x(t){this[0]=Je(t)}get y(){return this[1]}set y(t){this[1]=Je(t)}get z(){return this[2]}set z(t){this[2]=Je(t)}get w(){return this[3]}set w(t){this[3]=Je(t)}len(){return oPt(this)}lengthSquared(){return aPt(this)}dot(t){return nPt(this,t)}rotationTo(t,r){return sPt(this,t,r),this.check()}add(t){return ePt(this,this,t),this.check()}calculateW(){return Jkt(this,this),this.check()}conjugate(){return tPt(this,this),this.check()}invert(){return Qkt(this,this),this.check()}lerp(t,r,n){return n===void 0?this.lerp(this,t,r):(iPt(this,t,r,n),this.check())}multiplyRight(t){return cD(this,this,t),this.check()}multiplyLeft(t){return cD(this,t,this),this.check()}normalize(){const t=this.len(),r=t>0?1/t:0;return this[0]=this[0]*r,this[1]=this[1]*r,this[2]=this[2]*r,this[3]=this[3]*r,t===0&&(this[3]=1),this.check()}rotateX(t){return Kkt(this,this,t),this.check()}rotateY(t){return Zkt(this,this,t),this.check()}rotateZ(t){return qkt(this,this,t),this.check()}scale(t){return rPt(this,this,t),this.check()}slerp(t,r,n){let i,o,a;switch(arguments.length){case 1:({start:i=lPt,target:o,ratio:a}=t);break;case 2:i=this,o=t,a=r;break;default:i=t,o=r,a=n}return Iy(this,i,o,a),this.check()}transformVector4(t,r=new Bx){return Vkt(r,t,this),Zg(r,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(t,r){return this.setAxisAngle(t,r)}premultiply(t){return this.multiplyLeft(t)}multiply(t){return this.multiplyRight(t)}}const TG={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:Math.PI*2},hD=`#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))

struct AmbientLight {
 vec3 color;
};

struct PointLight {
 vec3 color;
 vec3 position;
 vec3 attenuation;
};

struct DirectionalLight {
  vec3 color;
  vec3 direction;
};

uniform AmbientLight lighting_uAmbientLight;
uniform PointLight lighting_uPointLight[MAX_LIGHTS];
uniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];
uniform int lighting_uPointLightCount;
uniform int lighting_uDirectionalLightCount;

uniform bool lighting_uEnabled;

float getPointLightAttenuation(PointLight pointLight, float distance) {
  return pointLight.attenuation.x
       + pointLight.attenuation.y * distance
       + pointLight.attenuation.z * distance * distance;
}

#endif
`,uPt={lightSources:{}};function L3(){let{color:e=[0,0,0],intensity:t=1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.map(r=>r*t/255)}function cPt(e){let{ambientLight:t,pointLights:r=[],directionalLights:n=[]}=e;const i={};return t?i["lighting_uAmbientLight.color"]=L3(t):i["lighting_uAmbientLight.color"]=[0,0,0],r.forEach((o,a)=>{i["lighting_uPointLight[".concat(a,"].color")]=L3(o),i["lighting_uPointLight[".concat(a,"].position")]=o.position,i["lighting_uPointLight[".concat(a,"].attenuation")]=o.attenuation||[1,0,0]}),i.lighting_uPointLightCount=r.length,n.forEach((o,a)=>{i["lighting_uDirectionalLight[".concat(a,"].color")]=L3(o),i["lighting_uDirectionalLight[".concat(a,"].direction")]=o.direction}),i.lighting_uDirectionalLightCount=n.length,i}function kG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:uPt;if("lightSources"in e){const{ambientLight:t,pointLights:r,directionalLights:n}=e.lightSources||{};return t||r&&r.length>0||n&&n.length>0?Object.assign({},cPt({ambientLight:t,pointLights:r,directionalLights:n}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in e){const t={pointLights:[],directionalLights:[]};for(const r of e.lights||[])switch(r.type){case"ambient":t.ambientLight=r;break;case"directional":t.directionalLights.push(r);break;case"point":t.pointLights.push(r);break}return kG({lightSources:t})}return{}}const fPt={name:"lights",vs:hD,fs:hD,getUniforms:kG,defines:{MAX_LIGHTS:3}},hPt=new Uint8Array([0,255,255,255]),dPt={pickingSelectedColor:null,pickingHighlightColor:hPt,pickingActive:!1,pickingAttribute:!1};function pPt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:dPt;const t={};if(e.pickingSelectedColor!==void 0)if(!e.pickingSelectedColor)t.picking_uSelectedColorValid=0;else{const r=e.pickingSelectedColor.slice(0,3);t.picking_uSelectedColorValid=1,t.picking_uSelectedColor=r}if(e.pickingHighlightColor){const r=Array.from(e.pickingHighlightColor,n=>n/255);Number.isFinite(r[3])||(r[3]=1),t.picking_uHighlightColor=r}return e.pickingActive!==void 0&&(t.picking_uActive=Boolean(e.pickingActive),t.picking_uAttribute=Boolean(e.pickingAttribute)),t}const gPt=`uniform bool picking_uActive;
uniform bool picking_uAttribute;
uniform vec3 picking_uSelectedColor;
uniform bool picking_uSelectedColorValid;

out vec4 picking_vRGBcolor_Avalid;

const float COLOR_SCALE = 1. / 255.;

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.001;
}

bool isVertexPicked(vec3 vertexColor) {
  return
    picking_uSelectedColorValid &&
    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));
}

void picking_setPickingColor(vec3 pickingColor) {
  if (picking_uActive) {
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!picking_uAttribute) {
      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;
    }
  } else {
    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.r = value;
  }
}
void picking_setPickingAttribute(vec2 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}
void picking_setPickingAttribute(vec3 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,vPt=`uniform bool picking_uActive;
uniform vec3 picking_uSelectedColor;
uniform vec4 picking_uHighlightColor;

in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
  if (picking_uActive) {
    return color;
  }
  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    float highLightAlpha = picking_uHighlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}
vec4 picking_filterPickingColor(vec4 color) {
  if (picking_uActive) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}
vec4 picking_filterColor(vec4 color) {
  vec4 highightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highightColor);
}

`,mPt={name:"picking",vs:gPt,fs:vPt,getUniforms:pPt},yPt=`
uniform float lighting_uAmbient;
uniform float lighting_uDiffuse;
uniform float lighting_uShininess;
uniform vec3  lighting_uSpecularColor;

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {
    vec3 halfway_direction = normalize(light_direction + view_direction);
    float lambertian = dot(light_direction, normal_worldspace);
    float specular = 0.0;
    if (lambertian > 0.0) {
      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);
      specular = pow(specular_angle, lighting_uShininess);
    }
    lambertian = max(lambertian, 0.0);
    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;
}

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = surfaceColor;

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);
    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}

vec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = vec3(0, 0, 0);
  vec3 surfaceColor = vec3(0, 0, 0);

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}
`,_Pt={};function bPt(e){const{ambient:t=.35,diffuse:r=.6,shininess:n=32,specularColor:i=[30,30,30]}=e;return{lighting_uAmbient:t,lighting_uDiffuse:r,lighting_uShininess:n,lighting_uSpecularColor:i.map(o=>o/255)}}function wPt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_Pt;if(!("material"in e))return{};const{material:t}=e;return t?bPt(t):{lighting_uEnabled:!1}}const SPt={name:"gouraud-lighting",dependencies:[fPt],vs:yPt,defines:{LIGHTING_VERTEX:1},getUniforms:wPt},TPt=`attribute float transform_elementID;
vec2 transform_getPixelSizeHalf(vec2 size) {
  return vec2(1.) / (2. * size);
}

vec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {
  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);
  float xIndex = transform_elementID - (yIndex * texSize[0]);
  return vec2(xIndex, yIndex);
}
vec2 transform_getTexCoord(vec2 size) {
  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);
  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);
  vec2 coord = indices / size + pixelSizeHalf;
  return coord;
}
vec2 transform_getPos(vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);
  return pos;
}
vec4 transform_getInput(sampler2D texSampler, vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec4 textureColor = texture2D(texSampler, texCoord);
  return textureColor;
}
`,kPt={name:"transform",vs:TPt,fs:null};class h0{static getDefaultProgramManager(t){return t.luma=t.luma||{},t.luma.defaultProgramManager=t.luma.defaultProgramManager||new h0(t),t.luma.defaultProgramManager}constructor(t){this.gl=t,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(t){this._defaultModules.find(r=>r.name===t.name)||this._defaultModules.push(t),this.stateHash++}removeDefaultModule(t){const r=typeof t=="string"?t:t.name;this._defaultModules=this._defaultModules.filter(n=>n.name!==r),this.stateHash++}addShaderHook(t,r){r&&(t=Object.assign(r,{hook:t})),this._hookFunctions.push(t),this.stateHash++}get(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{vs:r="",fs:n="",defines:i={},inject:o={},varyings:a=[],bufferMode:s=35981,transpileToGLSL100:l=!1}=t,u=this._getModuleList(t.modules),c=this._getHash(r),f=this._getHash(n),h=u.map(b=>this._getHash(b.name)).sort(),d=a.map(b=>this._getHash(b)),p=Object.keys(i).sort(),g=Object.keys(o).sort(),m=[],v=[];for(const b of p)m.push(this._getHash(b)),m.push(this._getHash(i[b]));for(const b of g)v.push(this._getHash(b)),v.push(this._getHash(o[b]));const y="".concat(c,"/").concat(f,"D").concat(m.join("/"),"M").concat(h.join("/"),"I").concat(v.join("/"),"V").concat(d.join("/"),"H").concat(this.stateHash,"B").concat(s).concat(l?"T":"");if(!this._programCache[y]){const b=xTt(this.gl,{vs:r,fs:n,modules:u,inject:o,defines:i,hookFunctions:this._hookFunctions,transpileToGLSL100:l});this._programCache[y]=new Zj(this.gl,{hash:y,vs:b.vs,fs:b.fs,varyings:a,bufferMode:s}),this._getUniforms[y]=b.getUniforms||(w=>{}),this._useCounts[y]=0}return this._useCounts[y]++,this._programCache[y]}getUniforms(t){return this._getUniforms[t.hash]||null}release(t){const r=t.hash;this._useCounts[r]--,this._useCounts[r]===0&&(this._programCache[r].delete(),delete this._programCache[r],delete this._getUniforms[r],delete this._useCounts[r])}_getHash(t){return this._hashes[t]===void 0&&(this._hashes[t]=this._hashCounter++),this._hashes[t]}_getModuleList(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const r=new Array(this._defaultModules.length+t.length),n={};let i=0;for(let o=0,a=this._defaultModules.length;o<a;++o){const s=this._defaultModules[o],l=s.name;r[i++]=s,n[l]=!0}for(let o=0,a=t.length;o<a;++o){const s=t[o],l=s.name;n[l]||(r[i++]=s,n[l]=!0)}return r.length=i,r}}const PPt={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function EPt(e,t,r){const n={};let i=t.indices;for(const o in t.attributes){const a=t.attributes[o],s=CPt(o,r);if(o==="indices")i=a;else if(a.constant)n[s]=a.value;else{const l=a.value,u={...a};delete u.value,n[s]=[new Ye(e,l),u],APt(o,u)}}if(i){const o=i.value||i;Lt(o instanceof Uint16Array||o instanceof Uint32Array,'attribute array for "indices" must be of integer type');const a={size:1,isIndexed:i.isIndexed===void 0?!0:i.isIndexed};n.indices=[new Ye(e,{data:o,target:34963}),a]}return n}function CPt(e,t){const{attributeMap:r=PPt}=t||{};return r&&r[e]||e}function APt(e,t){let r;switch(e){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":r="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":r="vectors";break}switch(r){case"vectors":t.size=t.size||3;break;case"uvs":t.size=t.size||2;break}Lt(Number.isFinite(t.size),"attribute ".concat(e," needs size"))}const $f=2,xPt=1e4,MPt="Model needs drawMode and vertexCount",dD=()=>{},IPt={};class Ss{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{id:n=Xl("model")}=r;Lt(c2(t)),this.id=n,this.gl=t,this.id=r.id||Xl("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(r)}initialize(t){this.props={},this.programManager=t.programManager||h0.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:r=null,vs:n,fs:i,modules:o,defines:a,inject:s,varyings:l,bufferMode:u,transpileToGLSL100:c}=t;this.programProps={program:r,vs:n,fs:i,modules:o,defines:a,inject:s,varyings:l,bufferMode:u,transpileToGLSL100:c},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(t.moduleSettings))),this.drawMode=t.drawMode!==void 0?t.drawMode:4,this.vertexCount=t.vertexCount||0,this.geometryBuffers={},this.isInstanced=t.isInstanced||t.instanced||t.instanceCount>0,this._setModelProps(t),this.geometry={},Lt(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),MPt)}setProps(t){this._setModelProps(t)}delete(){for(const t in this._attributes)this._attributes[t]!==this.attributes[t]&&this._attributes[t].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(t){const{program:r,vs:n,fs:i,modules:o,defines:a,inject:s,varyings:l,bufferMode:u,transpileToGLSL100:c}=t;this.programProps={program:r,vs:n,fs:i,modules:o,defines:a,inject:s,varyings:l,bufferMode:u,transpileToGLSL100:c},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(t){return this.drawMode=t,this}setVertexCount(t){return Lt(Number.isFinite(t)),this.vertexCount=t,this}setInstanceCount(t){return Lt(Number.isFinite(t)),this.instanceCount=t,this}setGeometry(t){return this.drawMode=t.drawMode,this.vertexCount=t.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=EPt(this.gl,t),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Zh(t))return this;const r={};for(const n in t){const i=t[n];r[n]=i.getValue?i.getValue():i}return this.vertexArray.setAttributes(r),this}setUniforms(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.assign(this.uniforms,t),this}getModuleUniforms(t){this._checkProgram();const r=this.programManager.getUniforms(this.program);return r?r(t):{}}updateModuleSettings(t){const r=this.getModuleUniforms(t||{});return this.setUniforms(r)}clear(t){return Lx(this.program.gl,t),this}draw(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._checkProgram();const{moduleSettings:r=null,framebuffer:n,uniforms:i={},attributes:o={},transformFeedback:a=this.transformFeedback,parameters:s={},vertexArray:l=this.vertexArray}=t;this.setAttributes(o),this.updateModuleSettings(r),this.setUniforms(i);let u;Xt.priority>=$f&&(u=this._logDrawCallStart($f));const c=this.vertexArray.getDrawParams(),{isIndexed:f=c.isIndexed,indexType:h=c.indexType,indexOffset:d=c.indexOffset,vertexArrayInstanced:p=c.isInstanced}=this.props;p&&!this.isInstanced&&Xt.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:g,instanceCount:m}=this,{onBeforeRender:v=dD,onAfterRender:y=dD}=this.props;v(),this.program.setUniforms(this.uniforms);const b=this.program.draw(Object.assign(IPt,t,{logPriority:u,uniforms:null,framebuffer:n,parameters:s,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:l,transformFeedback:a,isIndexed:f,indexType:h,isInstanced:g,instanceCount:m,offset:f?d:0}));return y(),Xt.priority>=$f&&this._logDrawCallEnd(u,l,n),b}transform(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{discard:r=!0,feedbackBuffers:n,unbindModels:i=[]}=t;let{parameters:o}=t;n&&this._setFeedbackBuffers(n),r&&(o=Object.assign({},o,{[35977]:r})),i.forEach(a=>a.vertexArray.unbindBuffers());try{this.draw(Object.assign({},t,{parameters:o}))}finally{i.forEach(a=>a.vertexArray.bindBuffers())}return this}render(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Xt.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(t).draw()}_setModelProps(t){Object.assign(this.props,t),"uniforms"in t&&this.setUniforms(t.uniforms),"pickable"in t&&(this.pickable=t.pickable),"instanceCount"in t&&(this.instanceCount=t.instanceCount),"geometry"in t&&this.setGeometry(t.geometry),"attributes"in t&&this.setAttributes(t.attributes),"_feedbackBuffers"in t&&this._setFeedbackBuffers(t._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:r}=this.programProps;if(r)this._managedProgram=!1;else{const{vs:n,fs:i,modules:o,inject:a,defines:s,varyings:l,bufferMode:u,transpileToGLSL100:c}=this.programProps;r=this.programManager.get({vs:n,fs:i,modules:o,inject:a,defines:s,varyings:l,bufferMode:u,transpileToGLSL100:c}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}Lt(r instanceof Zj,"Model needs a program"),this._programDirty=!1,r!==this.program&&(this.program=r,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new j3t(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const t in this.geometryBuffers){const r=this.geometryBuffers[t][0]||this.geometryBuffers[t];r instanceof Ye&&r.delete()}}_setAnimationProps(t){this.animated&&Lt(t,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Zh(t))return this;const{gl:r}=this.program;return this.transformFeedback=this.transformFeedback||new qj(r,{program:this.program}),this.transformFeedback.setBuffers(t),this}_logDrawCallStart(t){const r=t>3?0:xPt;if(!(Date.now()-this.lastLogTime<r))return this.lastLogTime=Date.now(),Xt.group($f,">>> DRAWING MODEL ".concat(this.id),{collapsed:Xt.level<=2})(),t}_logDrawCallEnd(t,r,n,i){if(t===void 0)return;const o=X3t({vertexArray:r,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:a,unusedTable:s,unusedCount:l}=YR({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),{table:u,count:c}=YR({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0});c>0&&Xt.log("MISSING UNIFORMS",Object.keys(u))(),l>0&&Xt.log("UNUSED UNIFORMS",Object.keys(s))();const f=K3t(this.vertexArray.configuration);Xt.table(t,o)(),Xt.table(t,a)(),Xt.table(t+1,f)(),i&&i.log({logLevel:$f,message:"Rendered to ".concat(i.id)}),Xt.groupEnd($f)()}}class LPt{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(r),Object.seal(this)}setupResources(t){for(const r of this.bindings)this._setupTransformFeedback(r,t)}updateModelProps(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyings:r}=this;return r.length>0&&(t=Object.assign({},t,{varyings:r})),t}getDrawOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this.bindings[this.currentIndex],{sourceBuffers:n,transformFeedback:i}=r;return{attributes:Object.assign({},n,t.attributes),transformFeedback:i}}swap(){return this.feedbackMap?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(t)}getBuffer(t){const{feedbackBuffers:r}=this.bindings[this.currentIndex],n=t?r[t]:null;return n?n instanceof Ye?n:n.buffer:null}getData(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyingName:r}=t,n=this.getBuffer(r);return n?n.getData():null}delete(){for(const t in this.resources)this.resources[t].delete()}_initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(t),this.varyings=t.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&Lt(Pe(this.gl))}_getFeedbackBuffers(t){const{sourceBuffers:r={}}=t,n={};if(this.bindings[this.currentIndex]&&Object.assign(n,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const i in this.feedbackMap){const o=this.feedbackMap[i];i in r&&(n[o]=i)}Object.assign(n,t.feedbackBuffers);for(const i in n){const o=n[i];if(typeof o=="string"){const a=r[o],{byteLength:s,usage:l,accessor:u}=a;n[i]=this._createNewBuffer(i,{byteLength:s,usage:l,accessor:u})}}return n}_setupBuffers(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:r=null}=t;Object.assign(this.feedbackMap,t.feedbackMap);const n=this._getFeedbackBuffers(t);this._updateBindings({sourceBuffers:r,feedbackBuffers:n})}_setupTransformFeedback(t,r){let{model:n}=r;const{program:i}=n;t.transformFeedback=new qj(this.gl,{program:i,buffers:t.feedbackBuffers})}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this.feedbackMap){const{sourceBuffers:r,feedbackBuffers:n}=this._swapBuffers(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:r,feedbackBuffers:n})}}_updateBinding(t,r){return t?(Object.assign(t.sourceBuffers,r.sourceBuffers),Object.assign(t.feedbackBuffers,r.feedbackBuffers),t.transformFeedback&&t.transformFeedback.setBuffers(t.feedbackBuffers),t):{sourceBuffers:Object.assign({},r.sourceBuffers),feedbackBuffers:Object.assign({},r.feedbackBuffers)}}_swapBuffers(t){if(!this.feedbackMap)return null;const r=Object.assign({},t.sourceBuffers),n=Object.assign({},t.feedbackBuffers);for(const i in this.feedbackMap){const o=this.feedbackMap[i];r[i]=t.feedbackBuffers[o],n[o]=t.sourceBuffers[i],Lt(n[o]instanceof Ye)}return{sourceBuffers:r,feedbackBuffers:n}}_createNewBuffer(t,r){const n=new Ye(this.gl,r);return this.resources[t]&&this.resources[t].delete(),this.resources[t]=n,n}_getNextIndex(){return(this.currentIndex+1)%2}}const OPt="transform_uSampler_",X_="transform_uSize_",pD="transform_position";function RPt(e){let{vs:t,sourceTextureMap:r,targetTextureVarying:n,targetTexture:i}=e,a=Object.keys(r).length,s=null;const l={};let u=t,c={};if(a>0||n){const f=u.split(`
`),h=f.slice();if(f.forEach((d,p,g)=>{if(a>0){const m=BPt(d,r);if(m){const{updatedLine:v,inject:y}=m;h[p]=v,c=hE([c,y]),Object.assign(l,m.samplerTextureMap),a--}}n&&!s&&(s=$Pt(d,n))}),n){Lt(i);const d="".concat(X_).concat(n),p="uniform vec2 ".concat(d,`;
`),g="     vec2 ".concat(pD," = transform_getPos(").concat(d,`);
     gl_Position = vec4(`).concat(pD,`, 0, 1.);
`);c=hE([c,{"vs:#decl":p,"vs:#main-start":g}])}u=h.join(`
`)}return{vs:u,targetTextureType:s,inject:c,samplerTextureMap:l}}function DPt(e){let{sourceTextureMap:t,targetTextureVarying:r,targetTexture:n}=e;const i={};let o,a;r&&({width:o,height:a}=n,i["".concat(X_).concat(r)]=[o,a]);for(const s in t)({width:o,height:a}=t[s]),i["".concat(X_).concat(s)]=[o,a];return i}function NPt(e){return iG(e,["attribute","in"])}function FPt(e){const t="".concat(OPt).concat(e),r="".concat(X_).concat(e),n="  uniform sampler2D ".concat(t,`;
  uniform vec2 `).concat(r,";");return{samplerName:t,sizeName:r,uniformDeclerations:n}}function $Pt(e,t){const r=iG(e,["varying","out"]);return r&&r.name===t?r.type:null}function BPt(e,t){const r={},n=NPt(e);if(!n)return null;const{type:i,name:o}=n;if(o&&t[o]){const a="// ".concat(e," => Replaced by Transform with a sampler"),{samplerName:s,sizeName:l,uniformDeclerations:u}=FPt(o),c=$Tt(i),f="  ".concat(i," ").concat(o," = transform_getInput(").concat(s,", ").concat(l,").").concat(c,`;
`);return r[s]=o,{updatedLine:a,inject:{"vs:#decl":u,"vs:#main-start":f},samplerTextureMap:r}}return null}const zPt={[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},VPt="transform_output";class UPt{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(r),Object.seal(this)}updateModelProps(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this._processVertexShader(t);return Object.assign({},t,r)}getDrawOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:r,sourceTextures:n,framebuffer:i,targetTexture:o}=this.bindings[this.currentIndex],a=Object.assign({},r,t.attributes),s=Object.assign({},t.uniforms),l=Object.assign({},t.parameters);let u=t.discard;if(this.hasSourceTextures||this.hasTargetTexture){a.transform_elementID=this.elementIDBuffer;for(const f in this.samplerTextureMap){const h=this.samplerTextureMap[f];s[f]=n[h]}this._setSourceTextureParameters();const c=DPt({sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:o});Object.assign(s,c)}return this.hasTargetTexture&&(u=!1,l.viewport=[0,0,i.width,i.height]),{attributes:a,framebuffer:i,uniforms:s,discard:u,parameters:l}}swap(){return this._swapTexture?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupTextures(t)}getTargetTexture(){const{targetTexture:t}=this.bindings[this.currentIndex];return t}getData(){let{packed:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{framebuffer:r}=this.bindings[this.currentIndex],n=h2(r);if(!t)return n;const i=n.constructor,o=BTt(this.targetTextureType),a=new i(n.length*o/4);let s=0;for(let l=0;l<n.length;l+=4)for(let u=0;u<o;u++)a[s++]=n[l+u];return a}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{_targetTextureVarying:r,_swapTexture:n}=t;this._swapTexture=n,this.targetTextureVarying=r,this.hasTargetTexture=r,this._setupTextures(t)}_createTargetTexture(t){const{sourceTextures:r,textureOrReference:n}=t;if(n instanceof oi)return n;const i=r[n];return i?(this._targetRefTexName=n,this._createNewTexture(i)):null}_setupTextures(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:r,_sourceTextures:n={},_targetTexture:i}=t,o=this._createTargetTexture({sourceTextures:n,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||n&&Object.keys(n).length>0,this._updateBindings({sourceBuffers:r,sourceTextures:n,targetTexture:o}),"elementCount"in t&&this._updateElementIDBuffer(t.elementCount)}_updateElementIDBuffer(t){if(typeof t!="number"||this.elementCount>=t)return;const r=new Float32Array(t);r.forEach((n,i,o)=>{o[i]=i}),this.elementIDBuffer?this.elementIDBuffer.setData({data:r}):this.elementIDBuffer=new Ye(this.gl,{data:r,accessor:{size:1}}),this.elementCount=t}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this._swapTexture){const{sourceTextures:r,targetTexture:n}=this._swapTextures(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:r,targetTexture:n})}}_updateBinding(t,r){const{sourceBuffers:n,sourceTextures:i,targetTexture:o}=r;if(t||(t={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(t.sourceTextures,i),Object.assign(t.sourceBuffers,n),o){t.targetTexture=o;const{width:a,height:s}=o,{framebuffer:l}=t;l?(l.update({attachments:{[36064]:o},resizeAttachments:!1}),l.resize({width:a,height:s})):t.framebuffer=new $r(this.gl,{id:"transform-framebuffer",width:a,height:s,attachments:{[36064]:o}})}return t}_setSourceTextureParameters(){const t=this.currentIndex,{sourceTextures:r}=this.bindings[t];for(const n in r)r[n].setParameters(zPt)}_swapTextures(t){if(!this._swapTexture)return null;const r=Object.assign({},t.sourceTextures);r[this._swapTexture]=t.targetTexture;const n=t.sourceTextures[this._swapTexture];return{sourceTextures:r,targetTexture:n}}_createNewTexture(t){const r=Hj(t,{parameters:{[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},pixelStore:{[37440]:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=r,r}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceTextures:r,targetTexture:n}=this.bindings[this.currentIndex],{vs:i,uniforms:o,targetTextureType:a,inject:s,samplerTextureMap:l}=RPt({vs:t.vs,sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:n}),u=hE([t.inject||{},s]);this.targetTextureType=a,this.samplerTextureMap=l;const c=t._fs||oG({version:Yj(i),input:this.targetTextureVarying,inputType:a,output:VPt}),f=this.hasSourceTextures||this.targetTextureVarying?[kPt].concat(t.modules||[]):t.modules;return{vs:i,fs:c,modules:f,uniforms:o,inject:u}}}class Ux{static isSupported(t){return Pe(t)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(r),Object.seal(this)}delete(){const{model:t,bufferTransform:r,textureTransform:n}=this;t&&t.delete(),r&&r.delete(),n&&n.delete()}run(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{clearRenderTarget:r=!0}=t,n=this._updateDrawOptions(t);r&&n.framebuffer&&n.framebuffer.clear({color:!0}),this.model.transform(n)}swap(){let t=!1;const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of r)t=t||n.swap();Lt(t,"Nothing to swap")}getBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(t)}getData(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of r){const i=n.getData(t);if(i)return i}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};"elementCount"in t&&this.model.setVertexCount(t.elementCount);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of r)n.update(t)}_initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{gl:r}=this;this._buildResourceTransforms(r,t),t=this._updateModelProps(t),this.model=new Ss(r,Object.assign({},t,{fs:t.fs||oG({version:Yj(t.vs)}),id:t.id||"transform-model",drawMode:t.drawMode||0,vertexCount:t.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(t){let r=Object.assign({},t);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)r=i.updateModelProps(r);return r}_buildResourceTransforms(t,r){WPt(r)&&(this.bufferTransform=new LPt(t,r)),jPt(r)&&(this.textureTransform=new UPt(t,r)),Lt(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(t){let r=Object.assign({},t);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)r=Object.assign(r,i.getDrawOptions(r));return r}}function WPt(e){return!!(!Zh(e.feedbackBuffers)||!Zh(e.feedbackMap)||e.varyings&&e.varyings.length>0)}function jPt(e){return!!(!Zh(e._sourceTextures)||e._targetTexture||e._targetTextureVarying)}const gD={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class tf{static get DRAW_MODE(){return gD}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:r=Xl("geometry"),drawMode:n=gD.TRIANGLES,attributes:i={},indices:o=null,vertexCount:a=null}=t;this.id=r,this.drawMode=n|0,this.attributes={},this.userData={},this._setAttributes(i,o),this.vertexCount=a||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(t){return"Geometry ".concat(this.id," attribute ").concat(t)}_setAttributes(t,r){r&&(this.indices=ArrayBuffer.isView(r)?{value:r,size:1}:r);for(const n in t){let i=t[n];i=ArrayBuffer.isView(i)?{value:i}:i,Lt(ArrayBuffer.isView(i.value),"".concat(this._print(n),": must be typed array or object with value as typed array")),(n==="POSITION"||n==="positions")&&!i.size&&(i.size=3),n==="indices"?(Lt(!this.indices),this.indices=i):this.attributes[n]=i}return this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(t,r){if(r)return r.value.length;let n=1/0;for(const i in t){const o=t[i],{value:a,size:s,constant:l}=o;!l&&a&&s>=1&&(n=Math.min(n,a.length/s))}return Lt(Number.isFinite(n)),n}}let GPt=1,HPt=1;class PG{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(t){const{delay:r=0,duration:n=Number.POSITIVE_INFINITY,rate:i=1,repeat:o=1}=t,a=GPt++,s={time:0,delay:r,duration:n,rate:i,repeat:o};return this._setChannelTime(s,this.time),this.channels.set(a,s),a}removeChannel(t){this.channels.delete(t);for(const[r,n]of this.animations)n.channel===t&&this.detachAnimation(r)}isFinished(t){const r=this.channels.get(t);return r===void 0?!1:this.time>=r.delay+r.duration*r.repeat}getTime(t){if(t===void 0)return this.time;const r=this.channels.get(t);return r===void 0?-1:r.time}setTime(t){this.time=Math.max(0,t);const r=this.channels.values();for(const i of r)this._setChannelTime(i,this.time);const n=this.animations.values();for(const i of n){const{animation:o,channel:a}=i;o.setTime(this.getTime(a))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(t,r){const n=HPt++;return this.animations.set(n,{animation:t,channel:r}),t.setTime(this.getTime(r)),n}detachAnimation(t){this.animations.delete(t)}update(t){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=t),this.setTime(this.time+(t-this.lastEngineTime)),this.lastEngineTime=t)}_setChannelTime(t,r){const n=r-t.delay,i=t.duration*t.repeat;n>=i?t.time=t.duration*t.rate:(t.time=Math.max(0,n)%t.duration,t.time*=t.rate)}}const EG="#define SMOOTH_EDGE_RADIUS 0.5",XPt=`
`.concat(EG,`

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`),YPt=`
`.concat(EG,`

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`),KPt={name:"geometry",vs:XPt,fs:YPt},xe={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(xe,"IDENTITY",{get:()=>(de.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const Co={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Yl={common:0,meters:1,pixels:2},vD={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},d0={DRAW:"draw",MASK:"mask"},ZPt=Object.keys(xe).map(e=>"const int COORDINATE_SYSTEM_".concat(e," = ").concat(xe[e],";")).join(""),qPt=Object.keys(Co).map(e=>"const int PROJECTION_MODE_".concat(e," = ").concat(Co[e],";")).join(""),JPt=Object.keys(Yl).map(e=>"const int UNIT_".concat(e.toUpperCase()," = ").concat(Yl[e],";")).join(""),QPt="".concat(ZPt,`
`).concat(qPt,`
`).concat(JPt,`

uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;

const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0; // meters
const float GLOBE_RADIUS = 256.0;

// returns an adjustment factor for uCommonUnitsPerMeter
float project_size() {
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
    project_uPseudoMeters == false) {

    // uCommonUnitsPerMeter in low-zoom Web Mercator is non-linear
    // Adjust by 1 / cos(latitude)
    // If geometry.position (vertex in common space) is populated, use it
    // Otherwise use geometry.worldPosition (anchor in world space)
    
    if (geometry.position.w == 0.0) {
      float y = clamp(geometry.worldPosition.y, -89.9, 89.9);
      return 1.0 / cos(radians(y));
    }

    // latitude from common y: 2.0 * (atan(exp(y / TILE_SIZE * 2.0 * PI - PI)) - PI / 4.0)
    // Taylor series of 1 / cos(latitude)
    // Max error < 0.003
  
    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    float y2 = y * y;
    float y4 = y2 * y2;
    float y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}
//
// Scaling offsets - scales meters to "world distance"
// Note the scalar version of project_size is for scaling the z component only
//
float project_size(float meters) {
  return meters * project_uCommonUnitsPerMeter.z * project_size();
}

vec2 project_size(vec2 meters) {
  return meters * project_uCommonUnitsPerMeter.xy * project_size();
}

vec3 project_size(vec3 meters) {
  return meters * project_uCommonUnitsPerMeter * project_size();
}

vec4 project_size(vec4 meters) {
  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}

// Get rotation matrix that aligns the z axis with the given up vector
// Find 3 unit vectors ux, uy, uz that are perpendicular to each other and uz == up
mat3 project_get_orientation_matrix(vec3 up) {
  vec3 uz = normalize(up);
  // Tangent on XY plane
  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
  vec3 uy = cross(uz, ux);
  return mat3(ux, uy, uz);
}

bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    transform = project_get_orientation_matrix(commonPosition);
    return true;
  }
  return false;
}

//
// Projecting normal - transform deltas from current coordinate system to
// normals in the worldspace
//
vec3 project_normal(vec3 vector) {
  // Apply model matrix
  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
  mat3 rotation;
  if (project_needs_rotation(geometry.position.xyz, rotation)) {
    n = rotation * n;
  }
  return n;
}

vec4 project_offset_(vec4 offset) {
  float dy = offset.y;
  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}

//
// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]
//
vec2 project_mercator_(vec2 lnglat) {
  float x = lnglat.x;
  if (project_uWrapLongitude) {
    x = mod(x + 180., 360.0) - 180.;
  }
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

vec3 project_globe_(vec3 lnglatz) {
  float lambda = radians(lnglatz.x);
  float phi = radians(lnglatz.y);
  float cosPhi = cos(phi);
  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;

  return vec3(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}

//
// Projects positions (defined by project_uCoordinateSystem) to common space (defined by project_uProjectionMode)
//
vec4 project_position(vec4 position, vec3 position64Low) {
  vec4 position_world = project_uModelMatrix * position;

  // Work around for a Mac+NVIDIA bug https://github.com/visgl/deck.gl/issues/4145
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_mercator_(position_world.xy),
        project_size(position_world.z),
        position_world.w
      );
    }
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world.xyz += project_uCoordinateOrigin;
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
        // Too far from the projection center for offset mode to be accurate
        // Only use high parts
        return vec4(
          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
          project_size(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    // Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.
    position_world.xyz -= project_uCoordinateOrigin;
  }

  // Translation is already added to the high parts
  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_LOW);
}

vec3 project_position(vec3 position, vec3 position64Low) {
  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
  return projected_position.xyz;
}

vec3 project_position(vec3 position) {
  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

vec2 project_position(vec2 position) {
  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  return viewProjectionMatrix * position + center;
}

//
// Projects from common space coordinates to clip space.
// Uses project_uViewProjectionMatrix
//
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}

// Returns a clip space offset that corresponds to a given number of screen pixels
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
  return offset * project_uFocalDistance;
}

float project_size_to_pixel(float meters) {
  return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
  if (unit == UNIT_METERS) return project_size_to_pixel(size);
  if (unit == UNIT_COMMON) return size * project_uScale;
  // UNIT_PIXELS
  return size;
}
float project_pixel_size(float pixels) {
  return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
  return pixels / project_uScale;
}
`);function tEt(e,t){if(e===t)return!0;if(Array.isArray(e)){const r=e.length;if(!t||t.length!==r)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}return!1}function p0(e){let t={},r;return n=>{for(const i in n)if(!tEt(n[i],t[i])){r=e(n),t=n;break}return r}}const mD=[0,0,0,0],eEt=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],CG=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],rEt=[0,0,0],AG=[0,0,0],nEt=p0(aEt);function xG(e,t,r=AG){r.length<3&&(r=[r[0],r[1],0]);let n=r,i,o=!0;switch(t===xe.LNGLAT_OFFSETS||t===xe.METER_OFFSETS?i=r:i=e.isGeospatial?[Math.fround(e.longitude),Math.fround(e.latitude),0]:null,e.projectionMode){case Co.WEB_MERCATOR:(t===xe.LNGLAT||t===xe.CARTESIAN)&&(i=[0,0,0],o=!1);break;case Co.WEB_MERCATOR_AUTO_OFFSET:t===xe.LNGLAT?n=i:t===xe.CARTESIAN&&(n=[Math.fround(e.center[0]),Math.fround(e.center[1]),0],i=e.unprojectPosition(n),n[0]-=r[0],n[1]-=r[1],n[2]-=r[2]);break;case Co.IDENTITY:n=e.position.map(Math.fround),n[2]=n[2]||0;break;case Co.GLOBE:o=!1,i=null;break;default:o=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:n,offsetMode:o}}function iEt(e,t,r){const{viewMatrixUncentered:n,projectionMatrix:i}=e;let{viewMatrix:o,viewProjectionMatrix:a}=e,s=mD,l=mD,u=e.cameraPosition;const{geospatialOrigin:c,shaderCoordinateOrigin:f,offsetMode:h}=xG(e,t,r);return h&&(l=e.projectPosition(c||f),u=[u[0]-l[0],u[1]-l[1],u[2]-l[2]],l[3]=1,s=_d([],l,a),o=n||o,a=vc([],i,o),a=vc([],a,eEt)),{viewMatrix:o,viewProjectionMatrix:a,projectionCenter:s,originCommon:l,cameraPosCommon:u,shaderCoordinateOrigin:f,geospatialOrigin:c}}function oEt({viewport:e,devicePixelRatio:t=1,modelMatrix:r=null,coordinateSystem:n=xe.DEFAULT,coordinateOrigin:i=AG,autoWrapLongitude:o=!1}){n===xe.DEFAULT&&(n=e.isGeospatial?xe.LNGLAT:xe.CARTESIAN);const a=nEt({viewport:e,devicePixelRatio:t,coordinateSystem:n,coordinateOrigin:i});return a.project_uWrapLongitude=o,a.project_uModelMatrix=r||CG,a}function aEt({viewport:e,devicePixelRatio:t,coordinateSystem:r,coordinateOrigin:n}){const{projectionCenter:i,viewProjectionMatrix:o,originCommon:a,cameraPosCommon:s,shaderCoordinateOrigin:l,geospatialOrigin:u}=iEt(e,r,n),c=e.getDistanceScales(),f=[e.width*t,e.height*t],h=_d([],[0,0,-e.focalDistance,1],e.projectionMatrix)[3]||1,d={project_uCoordinateSystem:r,project_uProjectionMode:e.projectionMode,project_uCoordinateOrigin:l,project_uCommonOrigin:a.slice(0,3),project_uCenter:i,project_uPseudoMeters:Boolean(e._pseudoMeters),project_uViewportSize:f,project_uDevicePixelRatio:t,project_uFocalDistance:h,project_uCommonUnitsPerMeter:c.unitsPerMeter,project_uCommonUnitsPerWorldUnit:c.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:rEt,project_uScale:e.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:o,project_uModelMatrix:CG,project_uCameraPosition:s};if(u){const p=e.getDistanceScales(u);switch(r){case xe.METER_OFFSETS:d.project_uCommonUnitsPerWorldUnit=p.unitsPerMeter,d.project_uCommonUnitsPerWorldUnit2=p.unitsPerMeter2;break;case xe.LNGLAT:case xe.LNGLAT_OFFSETS:e._pseudoMeters||(d.project_uCommonUnitsPerMeter=p.unitsPerMeter),d.project_uCommonUnitsPerWorldUnit=p.unitsPerDegree,d.project_uCommonUnitsPerWorldUnit2=p.unitsPerDegree2;break;case xe.CARTESIAN:d.project_uCommonUnitsPerWorldUnit=[1,1,p.unitsPerMeter[2]],d.project_uCommonUnitsPerWorldUnit2=[0,0,p.unitsPerMeter2[2]];break}}return d}const sEt={};function lEt(e=sEt){return"viewport"in e?oEt(e):{}}const Wx={name:"project",dependencies:[UTt,KPt],vs:QPt,getUniforms:lEt},uEt=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,ef={name:"project32",dependencies:[Wx],vs:uEt};function cEt(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Mh(e,t){const r=_d([],t,e);return Vx(r,r,1/r[3]),r}function yD(e,t){const r=e%t;return r<0?t+r:r}function yE(e,t,r){return e<t?t:e>r?r:e}function fEt(e){return Math.log(e)*Math.LOG2E}const jx=Math.log2||fEt;function Ts(e,t){if(!e)throw new Error(t||"@math.gl/web-mercator: assertion failed.")}const Ao=Math.PI,MG=Ao/4,Lo=Ao/180,_E=180/Ao,xv=512,bE=4003e4,e1=85.051129,hEt=1.5;function dEt(e){return jx(e)}function Kl(e){const[t,r]=e;Ts(Number.isFinite(t)),Ts(Number.isFinite(r)&&r>=-90&&r<=90,"invalid latitude");const n=t*Lo,i=r*Lo,o=xv*(n+Ao)/(2*Ao),a=xv*(Ao+Math.log(Math.tan(MG+i*.5)))/(2*Ao);return[o,a]}function Jh(e){const[t,r]=e,n=t/xv*(2*Ao)-Ao,i=2*(Math.atan(Math.exp(r/xv*(2*Ao)-Ao))-MG);return[n*_E,i*_E]}function pEt(e){const{latitude:t}=e;Ts(Number.isFinite(t));const r=Math.cos(t*Lo);return dEt(bE*r)-9}function wE(e){const{latitude:t,longitude:r,highPrecision:n=!1}=e;Ts(Number.isFinite(t)&&Number.isFinite(r));const i=xv,o=Math.cos(t*Lo),a=i/360,s=a/o,l=i/bE/o,u={unitsPerMeter:[l,l,l],metersPerUnit:[1/l,1/l,1/l],unitsPerDegree:[a,s,l],degreesPerUnit:[1/a,1/s,1/l]};if(n){const c=Lo*Math.tan(t*Lo)/o,f=a*c/2,h=i/bE*c,d=h/s*l;u.unitsPerDegree2=[0,f,h],u.unitsPerMeter2=[d,0,d]}return u}function IG(e,t){const[r,n,i]=e,[o,a,s]=t,{unitsPerMeter:l,unitsPerMeter2:u}=wE({longitude:r,latitude:n,highPrecision:!0}),c=Kl(e);c[0]+=o*(l[0]+u[0]*a),c[1]+=a*(l[1]+u[1]*a);const f=Jh(c),h=(i||0)+(s||0);return Number.isFinite(i)||Number.isFinite(s)?[f[0],f[1],h]:f}function gEt(e){const{height:t,pitch:r,bearing:n,altitude:i,scale:o,center:a}=e,s=cEt();H_(s,s,[0,0,-i]),yG(s,s,-r*Lo),_G(s,s,n*Lo);const l=o/t;return zx(s,s,[l,l,l]),a&&H_(s,s,ikt([],a)),s}function vEt(e){const{width:t,height:r,altitude:n,pitch:i=0,offset:o,center:a,scale:s,nearZMultiplier:l=1,farZMultiplier:u=1}=e;let{fovy:c=Y_(hEt)}=e;n!==void 0&&(c=Y_(n));const f=c*Lo,h=i*Lo,d=LG(c);let p=d;a&&(p+=a[2]*s/Math.cos(h)/r);const g=f*(.5+(o?o[1]:0)/r),m=Math.sin(g)*p/Math.sin(yE(Math.PI/2-h-g,.01,Math.PI-.01)),v=Math.sin(h)*m+p,y=p*10,b=Math.min(v*u,y);return{fov:f,aspect:t/r,focalDistance:d,near:l,far:b}}function Y_(e){return 2*Math.atan(.5/e)*_E}function LG(e){return .5/Math.tan(.5*e*Lo)}function OG(e,t){const[r,n,i=0]=e;return Ts(Number.isFinite(r)&&Number.isFinite(n)&&Number.isFinite(i)),Mh(t,[r,n,i,1])}function d2(e,t,r=0){const[n,i,o]=e;if(Ts(Number.isFinite(n)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(o))return Mh(t,[n,i,o,1]);const a=Mh(t,[n,i,0,1]),s=Mh(t,[n,i,1,1]),l=a[2],u=s[2],c=l===u?0:((r||0)-l)/(u-l);return lG([],a,s,c)}function RG(e){const{width:t,height:r,bounds:n,minExtent:i=0,maxZoom:o=24,offset:a=[0,0]}=e,[[s,l],[u,c]]=n,f=mEt(e.padding),h=Kl([s,yE(c,-e1,e1)]),d=Kl([u,yE(l,-e1,e1)]),p=[Math.max(Math.abs(d[0]-h[0]),i),Math.max(Math.abs(d[1]-h[1]),i)],g=[t-f.left-f.right-Math.abs(a[0])*2,r-f.top-f.bottom-Math.abs(a[1])*2];Ts(g[0]>0&&g[1]>0);const m=g[0]/p[0],v=g[1]/p[1],y=(f.right-f.left)/2/m,b=(f.top-f.bottom)/2/v,w=[(d[0]+h[0])/2+y,(d[1]+h[1])/2+b],T=Jh(w),S=Math.min(o,jx(Math.abs(Math.min(m,v))));return Ts(Number.isFinite(S)),{longitude:T[0],latitude:T[1],zoom:S}}function mEt(e=0){return typeof e=="number"?{top:e,bottom:e,left:e,right:e}:(Ts(Number.isFinite(e.top)&&Number.isFinite(e.bottom)&&Number.isFinite(e.left)&&Number.isFinite(e.right)),e)}const _D=Math.PI/180;function yEt(e,t=0){const{width:r,height:n,unproject:i}=e,o={targetZ:t},a=i([0,n],o),s=i([r,n],o);let l,u;const c=e.fovy?.5*e.fovy*_D:Math.atan(.5/e.altitude),f=(90-e.pitch)*_D;return c>f-.01?(l=bD(e,0,t),u=bD(e,r,t)):(l=i([0,0],o),u=i([r,0],o)),[a,s,u,l]}function bD(e,t,r){const{pixelUnprojectionMatrix:n}=e,i=Mh(n,[t,0,1,1]),o=Mh(n,[t,e.height,1,1]),s=(r*e.distanceScales.unitsPerMeter[2]-i[2])/(o[2]-i[2]),l=lG([],i,o,s),u=Jh(l);return u.push(r),u}const wD=512;function _Et(e){const{width:t,height:r,pitch:n=0}=e;let{longitude:i,latitude:o,zoom:a,bearing:s=0}=e;(i<-180||i>180)&&(i=yD(i+180,360)-180),(s<-180||s>180)&&(s=yD(s+180,360)-180);const l=jx(r/wD);if(a<=l)a=l,o=0;else{const u=r/2/Math.pow(2,a),c=Jh([0,u])[1];if(o<c)o=c;else{const f=Jh([0,wD-u])[1];o>f&&(o=f)}}return{width:t,height:r,longitude:i,latitude:o,zoom:a,pitch:n,bearing:s}}const bEt=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,wEt=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture2D(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,SEt=p0(CEt),TEt=p0(AEt),kEt=[0,0,0,1],PEt=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function EEt(e,t){const[r,n,i]=e,o=d2([r,n,i],t);return Number.isFinite(i)?o:[o[0],o[1],0]}function CEt({viewport:e,center:t}){return new Mn(e.viewProjectionMatrix).invert().transform(t)}function AEt({viewport:e,shadowMatrices:t}){const r=[],n=e.pixelUnprojectionMatrix,i=e.isGeospatial?void 0:1,o=[[0,0,i],[e.width,0,i],[0,e.height,i],[e.width,e.height,i],[0,0,-1],[e.width,0,-1],[0,e.height,-1],[e.width,e.height,-1]].map(a=>EEt(a,n));for(const a of t){const s=a.clone().translate(new Nt(e.center).negate()),l=o.map(c=>s.transform(c)),u=new Mn().ortho({left:Math.min(...l.map(c=>c[0])),right:Math.max(...l.map(c=>c[0])),bottom:Math.min(...l.map(c=>c[1])),top:Math.max(...l.map(c=>c[1])),near:Math.min(...l.map(c=>-c[2])),far:Math.max(...l.map(c=>-c[2]))});r.push(u.multiplyRight(a))}return r}function xEt(e,t){const{shadowEnabled:r=!0}=e;if(!r||!e.shadowMatrices||!e.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const n={shadow_uDrawShadowMap:Boolean(e.drawToShadowMap),shadow_uUseShadowMap:e.shadowMaps?e.shadowMaps.length>0:!1,shadow_uColor:e.shadowColor||kEt,shadow_uLightId:e.shadowLightId||0,shadow_uLightCount:e.shadowMatrices.length},i=SEt({viewport:e.viewport,center:t.project_uCenter}),o=[],a=TEt({shadowMatrices:e.shadowMatrices,viewport:e.viewport}).slice();for(let s=0;s<e.shadowMatrices.length;s++){const l=a[s],u=l.clone().translate(new Nt(e.viewport.center).negate());t.project_uCoordinateSystem===xe.LNGLAT&&t.project_uProjectionMode===Co.WEB_MERCATOR?(a[s]=u,o[s]=i):(a[s]=l.clone().multiplyRight(PEt),o[s]=u.transform(i))}for(let s=0;s<a.length;s++)n["shadow_uViewProjectionMatrices[".concat(s,"]")]=a[s],n["shadow_uProjectCenters[".concat(s,"]")]=o[s],e.shadowMaps&&e.shadowMaps.length>0?n["shadow_uShadowMap".concat(s)]=e.shadowMaps[s]:n["shadow_uShadowMap".concat(s)]=e.dummyShadowMap;return n}const O3={name:"shadow",dependencies:[Wx],vs:bEt,fs:wEt,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(e={},t={})=>"viewport"in e&&(e.drawToShadowMap||e.shadowMaps&&e.shadowMaps.length>0)?xEt(e,t):{}},rf={inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}},...mPt},MEt=[Wx],IEt=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function LEt(e){const t=h0.getDefaultProgramManager(e);for(const r of MEt)t.addDefaultModule(r);for(const r of IEt)t.addShaderHook(r);return t}const OEt=[255,255,255],REt=1;let DEt=0;class NEt{constructor(t={}){x(this,"id",void 0),x(this,"color",void 0),x(this,"intensity",void 0),x(this,"type","ambient");const{color:r=OEt}=t,{intensity:n=REt}=t;this.id=t.id||"ambient-".concat(DEt++),this.color=r,this.intensity=n}}const FEt=[255,255,255],$Et=1,BEt=[0,0,-1];let zEt=0;class SD{constructor(t={}){x(this,"id",void 0),x(this,"color",void 0),x(this,"intensity",void 0),x(this,"type","directional"),x(this,"direction",void 0),x(this,"shadow",void 0);const{color:r=FEt}=t,{intensity:n=$Et}=t,{direction:i=BEt}=t,{_shadow:o=!1}=t;this.id=t.id||"directional-".concat(zEt++),this.color=r,this.intensity=n,this.type="directional",this.direction=new Nt(i).normalize().toArray(),this.shadow=o}getProjectedLight(t){return this}}class VEt{constructor(t,r={id:"pass"}){x(this,"id",void 0),x(this,"gl",void 0),x(this,"props",void 0);const{id:n}=r;this.id=n,this.gl=t,this.props={...r}}setProps(t){Object.assign(this.props,t)}render(t){}cleanup(){}}class p2 extends VEt{constructor(...t){super(...t),x(this,"_lastRenderIndex",-1)}render(t){const r=this.gl;return ws(r,{framebuffer:t.target}),this._drawLayers(t)}_drawLayers(t){const{target:r,moduleParameters:n,viewports:i,views:o,onViewportActive:a,clearStack:s=!0,clearCanvas:l=!0}=t;t.pass=t.pass||"unknown";const u=this.gl;l&&WEt(u),s&&(this._lastRenderIndex=-1);const c=[];for(const f of i){const h=o&&o[f.id];a(f);const d=this._getDrawLayerParams(f,t),p=f.subViewports||[f];for(const g of p){const m=this._drawLayersInViewport(u,{target:r,moduleParameters:n,viewport:g,view:h,pass:t.pass,layers:t.layers},d);c.push(m)}}return c}_getDrawLayerParams(t,{layers:r,pass:n,layerFilter:i,cullRect:o,effects:a,moduleParameters:s}){const l=[],u=DG(this._lastRenderIndex+1),c={layer:r[0],viewport:t,isPicking:n.startsWith("picking"),renderPass:n,cullRect:o},f={};for(let h=0;h<r.length;h++){const d=r[h],p=this._shouldDrawLayer(d,c,i,f),g={shouldDrawLayer:p};p&&(g.layerRenderIndex=u(d,p),g.moduleParameters=this._getModuleParameters(d,a,n,s),g.layerParameters=this.getLayerParameters(d,h,t)),l[h]=g}return l}_drawLayersInViewport(t,{layers:r,moduleParameters:n,pass:i,target:o,viewport:a,view:s},l){const u=UEt(t,{moduleParameters:n,target:o,viewport:a});if(s&&s.props.clear){const f=s.props.clear===!0?{color:!0,depth:!0}:s.props.clear;Ji(t,{scissorTest:!0,scissor:u},()=>Lx(t,f))}const c={totalCount:r.length,visibleCount:0,compositeCount:0,pickableCount:0};ws(t,{viewport:u});for(let f=0;f<r.length;f++){const h=r[f],{shouldDrawLayer:d,layerRenderIndex:p,moduleParameters:g,layerParameters:m}=l[f];if(d&&h.props.pickable&&c.pickableCount++,h.isComposite)c.compositeCount++;else if(d){c.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,p),g.viewport=a;try{h._drawLayer({moduleParameters:g,uniforms:{layerIndex:p},parameters:m})}catch(v){h.raiseError(v,"drawing ".concat(h," to ").concat(i))}}}return c}shouldDrawLayer(t){return!0}getModuleParameters(t,r){return null}getLayerParameters(t,r,n){return t.props.parameters}_shouldDrawLayer(t,r,n,i){if(!(t.props.visible&&this.shouldDrawLayer(t)))return!1;r.layer=t;let a=t.parent;for(;a;){if(!a.props.visible||!a.filterSubLayer(r))return!1;r.layer=a,a=a.parent}if(n){const s=r.layer.id;if(s in i||(i[s]=n(r)),!i[s])return!1}return t.activateViewport(r.viewport),!0}_getModuleParameters(t,r,n,i){var o;const a=Object.assign(Object.create(((o=t.internalState)===null||o===void 0?void 0:o.propsInTransition)||t.props),{autoWrapLongitude:t.wrapLongitude,viewport:t.context.viewport,mousePosition:t.context.mousePosition,pickingActive:0,devicePixelRatio:Kh(this.gl)});if(r)for(const l of r){var s;Object.assign(a,(s=l.getModuleParameters)===null||s===void 0?void 0:s.call(l,t))}return Object.assign(a,this.getModuleParameters(t,r),i)}}function DG(e=0,t={}){const r={},n=(i,o)=>{const a=i.props._offset,s=i.id,l=i.parent&&i.parent.id;let u;if(l&&!(l in t)&&n(i.parent,!1),l in r){const c=r[l]=r[l]||DG(t[l],t);u=c(i,o),r[s]=c}else Number.isFinite(a)?(u=a+(t[l]||0),r[s]=null):u=e;return o&&u>=e&&(e=u+1),t[s]=u,u};return n}function UEt(e,{moduleParameters:t,target:r,viewport:n}){const i=r&&r.id!=="default-framebuffer",o=t&&t.devicePixelRatio||Kh(e),a=i?r.height:e.drawingBufferHeight,s=n;return[s.x*o,a-(s.y+s.height)*o,s.width*o,s.height*o]}function WEt(e){const t=e.drawingBufferWidth,r=e.drawingBufferHeight;ws(e,{viewport:[0,0,t,r]}),e.clear(16640)}class jEt extends p2{constructor(t,r){super(t,r),x(this,"shadowMap",void 0),x(this,"depthBuffer",void 0),x(this,"fbo",void 0),this.shadowMap=new oi(t,{width:1,height:1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.depthBuffer=new hh(t,{format:33189,width:1,height:1}),this.fbo=new $r(t,{id:"shadowmap",width:1,height:1,attachments:{[36064]:this.shadowMap,[36096]:this.depthBuffer}})}render(t){const r=this.fbo;Ji(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const n=t.viewports[0],i=Kh(this.gl),o=n.width*i,a=n.height*i;(o!==r.width||a!==r.height)&&r.resize({width:o,height:a}),super.render({...t,target:r,pass:"shadow"})})}shouldDrawLayer(t){return t.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const GEt={color:[255,255,255],intensity:1},TD=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],HEt=[0,0,0,200/255];class NG{constructor(t={}){x(this,"id","lighting-effect"),x(this,"props",null),x(this,"shadowColor",HEt),x(this,"shadow",void 0),x(this,"ambientLight",null),x(this,"directionalLights",[]),x(this,"pointLights",[]),x(this,"shadowPasses",[]),x(this,"shadowMaps",[]),x(this,"dummyShadowMap",null),x(this,"programManager",void 0),x(this,"shadowMatrices",void 0);for(const r in t){const n=t[r];switch(n.type){case"ambient":this.ambientLight=n;break;case"directional":this.directionalLights.push(n);break;case"point":this.pointLights.push(n);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(r=>r.shadow)}preRender(t,{layers:r,layerFilter:n,viewports:i,onViewportActive:o,views:a}){if(!!this.shadow){this.shadowMatrices=this._calculateMatrices(),this.shadowPasses.length===0&&this._createShadowPasses(t),this.programManager||(this.programManager=h0.getDefaultProgramManager(t),O3&&this.programManager.addDefaultModule(O3)),this.dummyShadowMap||(this.dummyShadowMap=new oi(t,{width:1,height:1}));for(let s=0;s<this.shadowPasses.length;s++)this.shadowPasses[s].render({layers:r,layerFilter:n,viewports:i,onViewportActive:o,views:a,moduleParameters:{shadowLightId:s,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(t){const r=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return r.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(n=>n.getProjectedLight({layer:t})),pointLights:this.pointLights.map(n=>n.getProjectedLight({layer:t}))},r}cleanup(){for(const t of this.shadowPasses)t.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(O3),this.programManager=null)}_calculateMatrices(){const t=[];for(const r of this.directionalLights){const n=new Mn().lookAt({eye:new Nt(r.direction).negate()});t.push(n)}return t}_createShadowPasses(t){for(let r=0;r<this.directionalLights.length;r++){const n=new jEt(t);this.shadowPasses[r]=n,this.shadowMaps[r]=n.shadowMap}}_applyDefaultLights(){const{ambientLight:t,pointLights:r,directionalLights:n}=this;!t&&r.length===0&&n.length===0&&(this.ambientLight=new NEt(GEt),this.directionalLights.push(new SD(TD[0]),new SD(TD[1])))}}class XEt{constructor(t={}){x(this,"_pool",[]),x(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(t)}setOptions(t){Object.assign(this.opts,t)}allocate(t,r,{size:n=1,type:i,padding:o=0,copy:a=!1,initialize:s=!1,maxCount:l}){const u=i||t&&t.constructor||Float32Array,c=r*n+o;if(ArrayBuffer.isView(t)){if(c<=t.length)return t;if(c*t.BYTES_PER_ELEMENT<=t.buffer.byteLength)return new u(t.buffer,0,c)}let f=1/0;l&&(f=l*n+o);const h=this._allocate(u,c,s,f);return t&&a?h.set(t):s||h.fill(0,0,4),this._release(t),h}release(t){this._release(t)}_allocate(t,r,n,i){let o=Math.max(Math.ceil(r*this.opts.overAlloc),1);o>i&&(o=i);const a=this._pool,s=t.BYTES_PER_ELEMENT*o,l=a.findIndex(u=>u.byteLength>=s);if(l>=0){const u=new t(a.splice(l,1)[0],0,o);return n&&u.fill(0),u}return new t(o)}_release(t){if(!ArrayBuffer.isView(t))return;const r=this._pool,{buffer:n}=t,{byteLength:i}=n,o=r.findIndex(a=>a.byteLength>=i);o<0?r.push(n):(o>0||r.length<this.opts.poolSize)&&r.splice(o,0,n),r.length>this.opts.poolSize&&r.shift()}}const Qh=new XEt;function ag(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function YEt(e,t){const r=e%t;return r<0?t+r:r}function KEt(e){return[e[12],e[13],e[14]]}function ZEt(e){return{left:Bf(e[3]+e[0],e[7]+e[4],e[11]+e[8],e[15]+e[12]),right:Bf(e[3]-e[0],e[7]-e[4],e[11]-e[8],e[15]-e[12]),bottom:Bf(e[3]+e[1],e[7]+e[5],e[11]+e[9],e[15]+e[13]),top:Bf(e[3]-e[1],e[7]-e[5],e[11]-e[9],e[15]-e[13]),near:Bf(e[3]+e[2],e[7]+e[6],e[11]+e[10],e[15]+e[14]),far:Bf(e[3]-e[2],e[7]-e[6],e[11]-e[10],e[15]-e[14])}}const kD=new Nt;function Bf(e,t,r,n){kD.set(e,t,r);const i=kD.len();return{distance:n/i,normal:new Nt(-e/i,-t/i,-r/i)}}function qEt(e){return e-Math.fround(e)}let bp;function R3(e,t){const{size:r=1,startIndex:n=0}=t,i=t.endIndex!==void 0?t.endIndex:e.length,o=(i-n)/r;bp=Qh.allocate(bp,o,{type:Float32Array,size:r*2});let a=n,s=0;for(;a<i;){for(let l=0;l<r;l++){const u=e[a++];bp[s+l]=u,bp[s+l+r]=qEt(u)}s+=r*2}return bp.subarray(0,o*r*2)}const JEt=Math.PI/180,QEt=ag(),PD=[0,0,0],tCt={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function eCt({width:e,height:t,orthographic:r,fovyRadians:n,focalDistance:i,padding:o,near:a,far:s}){const l=e/t,u=r?new Mn().orthographic({fovy:n,aspect:l,focalDistance:i,near:a,far:s}):new Mn().perspective({fovy:n,aspect:l,near:a,far:s});if(o){const{left:c=0,right:f=0,top:h=0,bottom:d=0}=o,p=un((c+e-f)/2,0,e)-e/2,g=un((h+t-d)/2,0,t)-t/2;u[8]-=p*2/e,u[9]+=g*2/t}return u}class ru{constructor(t={}){x(this,"id",void 0),x(this,"x",void 0),x(this,"y",void 0),x(this,"width",void 0),x(this,"height",void 0),x(this,"isGeospatial",void 0),x(this,"zoom",void 0),x(this,"focalDistance",void 0),x(this,"position",void 0),x(this,"modelMatrix",void 0),x(this,"distanceScales",void 0),x(this,"scale",void 0),x(this,"center",void 0),x(this,"cameraPosition",void 0),x(this,"projectionMatrix",void 0),x(this,"viewMatrix",void 0),x(this,"viewMatrixUncentered",void 0),x(this,"viewMatrixInverse",void 0),x(this,"viewProjectionMatrix",void 0),x(this,"pixelProjectionMatrix",void 0),x(this,"pixelUnprojectionMatrix",void 0),x(this,"resolution",void 0),x(this,"_frustumPlanes",{}),this.id=t.id||this.constructor.displayName||"viewport",this.x=t.x||0,this.y=t.y||0,this.width=t.width||1,this.height=t.height||1,this.zoom=t.zoom||0,this.distanceScales=t.distanceScales||tCt,this.focalDistance=t.focalDistance||1,this.position=t.position||PD,this.modelMatrix=t.modelMatrix||null;const{longitude:r,latitude:n}=t;this.isGeospatial=Number.isFinite(n)&&Number.isFinite(r),this._initProps(t),this._initMatrices(t),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Co.WEB_MERCATOR:Co.WEB_MERCATOR_AUTO_OFFSET:Co.IDENTITY}equals(t){return t instanceof ru?this===t?!0:t.width===this.width&&t.height===this.height&&t.scale===this.scale&&Ea(t.projectionMatrix,this.projectionMatrix)&&Ea(t.viewMatrix,this.viewMatrix):!1}project(t,{topLeft:r=!0}={}){const n=this.projectPosition(t),i=OG(n,this.pixelProjectionMatrix),[o,a]=i,s=r?a:this.height-a;return t.length===2?[o,s]:[o,s,i[2]]}unproject(t,{topLeft:r=!0,targetZ:n}={}){const[i,o,a]=t,s=r?o:this.height-o,l=n&&n*this.distanceScales.unitsPerMeter[2],u=d2([i,s,a],this.pixelUnprojectionMatrix,l),[c,f,h]=this.unprojectPosition(u);return Number.isFinite(a)?[c,f,h]:Number.isFinite(n)?[c,f,n]:[c,f]}projectPosition(t){const[r,n]=this.projectFlat(t),i=(t[2]||0)*this.distanceScales.unitsPerMeter[2];return[r,n,i]}unprojectPosition(t){const[r,n]=this.unprojectFlat(t),i=(t[2]||0)*this.distanceScales.metersPerUnit[2];return[r,n,i]}projectFlat(t){if(this.isGeospatial){const r=Kl(t);return r[1]=un(r[1],-318,830),r}return t}unprojectFlat(t){return this.isGeospatial?Jh(t):t}getBounds(t={}){const r={targetZ:t.z||0},n=this.unproject([0,0],r),i=this.unproject([this.width,0],r),o=this.unproject([0,this.height],r),a=this.unproject([this.width,this.height],r);return[Math.min(n[0],i[0],o[0],a[0]),Math.min(n[1],i[1],o[1],a[1]),Math.max(n[0],i[0],o[0],a[0]),Math.max(n[1],i[1],o[1],a[1])]}getDistanceScales(t){return t?wE({longitude:t[0],latitude:t[1],highPrecision:!0}):this.distanceScales}containsPixel({x:t,y:r,width:n=1,height:i=1}){return t<this.x+this.width&&this.x<t+n&&r<this.y+this.height&&this.y<r+i}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,ZEt(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(t,r){return null}_initProps(t){const r=t.longitude,n=t.latitude;this.isGeospatial&&(Number.isFinite(t.zoom)||(this.zoom=pEt({latitude:n})+Math.log2(this.focalDistance)),this.distanceScales=t.distanceScales||wE({latitude:n,longitude:r}));const i=Math.pow(2,this.zoom);this.scale=i;const{position:o,modelMatrix:a}=t;let s=PD;if(o&&(s=a?new Mn(a).transformAsVector(o,[]):o),this.isGeospatial){const l=this.projectPosition([r,n,0]);this.center=new Nt(s).scale(this.distanceScales.unitsPerMeter).add(l)}else this.center=this.projectPosition(s)}_initMatrices(t){const{viewMatrix:r=QEt,projectionMatrix:n=null,orthographic:i=!1,fovyRadians:o,fovy:a=75,near:s=.1,far:l=1e3,padding:u=null,focalDistance:c=1}=t;this.viewMatrixUncentered=r,this.viewMatrix=new Mn().multiplyRight(r).translate(new Nt(this.center).negate()),this.projectionMatrix=n||eCt({width:this.width,height:this.height,orthographic:i,fovyRadians:o||a*JEt,focalDistance:c,padding:u,near:s,far:l});const f=ag();vc(f,f,this.projectionMatrix),vc(f,f,this.viewMatrix),this.viewProjectionMatrix=f,this.viewMatrixInverse=vE([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=KEt(this.viewMatrixInverse);const h=ag(),d=ag();zx(h,h,[this.width/2,-this.height/2,1]),H_(h,h,[1,-1,0]),vc(d,h,this.viewProjectionMatrix),this.pixelProjectionMatrix=d,this.pixelUnprojectionMatrix=vE(ag(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||de.warn("Pixel project matrix not invertible")()}}x(ru,"displayName","Viewport");const rCt=512,nCt=4003e4,iCt=Math.PI/180;function ED(e){const t=Math.cos(e*iCt);return rCt/nCt/t}class La extends ru{constructor(t={}){const{latitude:r=0,longitude:n=0,zoom:i=0,pitch:o=0,bearing:a=0,nearZMultiplier:s=.1,farZMultiplier:l=1.01,orthographic:u=!1,projectionMatrix:c,repeat:f=!1,worldOffset:h=0,legacyMeterSizes:d=!1}=t;let{width:p,height:g,altitude:m=1.5}=t;const v=Math.pow(2,i);p=p||1,g=g||1;let y,b=null;c?(m=c[5]/2,y=Y_(m)):(t.fovy?(y=t.fovy,m=LG(y)):y=Y_(m),b=vEt({width:p,height:g,pitch:o,fovy:y,nearZMultiplier:s,farZMultiplier:l}));let w=gEt({height:g,pitch:o,bearing:a,scale:v,altitude:m});h&&(w=new Mn().translate([512*h,0,0]).multiplyLeft(w)),super({...t,width:p,height:g,viewMatrix:w,longitude:n,latitude:r,zoom:i,...b,fovy:y,focalDistance:m}),x(this,"longitude",void 0),x(this,"latitude",void 0),x(this,"pitch",void 0),x(this,"bearing",void 0),x(this,"altitude",void 0),x(this,"fovy",void 0),x(this,"orthographic",void 0),x(this,"_subViewports",void 0),x(this,"_pseudoMeters",void 0),this.latitude=r,this.longitude=n,this.zoom=i,this.pitch=o,this.bearing=a,this.altitude=m,this.fovy=y,this.orthographic=u,this._subViewports=f?[]:null,this._pseudoMeters=d,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const t=this.getBounds(),r=Math.floor((t[0]+180)/360),n=Math.ceil((t[2]-180)/360);for(let i=r;i<=n;i++){const o=i?new La({...this,worldOffset:i}):this;this._subViewports.push(o)}}return this._subViewports}projectPosition(t){if(this._pseudoMeters)return super.projectPosition(t);const[r,n]=this.projectFlat(t),i=(t[2]||0)*ED(t[1]);return[r,n,i]}unprojectPosition(t){if(this._pseudoMeters)return super.unprojectPosition(t);const[r,n]=this.unprojectFlat(t),i=(t[2]||0)/ED(n);return[r,n,i]}addMetersToLngLat(t,r){return IG(t,r)}panByPosition(t,r){const n=d2(r,this.pixelUnprojectionMatrix),i=this.projectFlat(t),o=G_([],i,sG([],n)),a=G_([],this.center,o),[s,l]=this.unprojectFlat(a);return{longitude:s,latitude:l}}getBounds(t={}){const r=yEt(this,t.z||0);return[Math.min(r[0][0],r[1][0],r[2][0],r[3][0]),Math.min(r[0][1],r[1][1],r[2][1],r[3][1]),Math.max(r[0][0],r[1][0],r[2][0],r[3][0]),Math.max(r[0][1],r[1][1],r[2][1],r[3][1])]}fitBounds(t,r={}){const{width:n,height:i}=this,{longitude:o,latitude:a,zoom:s}=RG({width:n,height:i,bounds:t,...r});return new La({width:n,height:i,longitude:o,latitude:a,zoom:s})}}x(La,"displayName","WebMercatorViewport");function D3(e,t,r=!1){const n=t.projectPosition(e);if(r&&t instanceof La){const[i,o,a=0]=e,s=t.getDistanceScales([i,o]);n[2]=a*s.unitsPerMeter[2]}return n}function oCt(e){const{viewport:t,modelMatrix:r,coordinateOrigin:n}=e;let{coordinateSystem:i,fromCoordinateSystem:o,fromCoordinateOrigin:a}=e;return i===xe.DEFAULT&&(i=t.isGeospatial?xe.LNGLAT:xe.CARTESIAN),o===void 0&&(o=i),a===void 0&&(a=n),{viewport:t,coordinateSystem:i,coordinateOrigin:n,modelMatrix:r,fromCoordinateSystem:o,fromCoordinateOrigin:a}}function FG(e,{viewport:t,modelMatrix:r,coordinateSystem:n,coordinateOrigin:i,offsetMode:o}){let[a,s,l=0]=e;switch(r&&([a,s,l]=_d([],[a,s,l,1],r)),n){case xe.LNGLAT:return D3([a,s,l],t,o);case xe.LNGLAT_OFFSETS:return D3([a+i[0],s+i[1],l+(i[2]||0)],t,o);case xe.METER_OFFSETS:return D3(IG(i,[a,s,l]),t,o);case xe.CARTESIAN:default:return t.isGeospatial?[a+i[0],s+i[1],l+i[2]]:t.projectPosition([a,s,l])}}function aCt(e,t){const{viewport:r,coordinateSystem:n,coordinateOrigin:i,modelMatrix:o,fromCoordinateSystem:a,fromCoordinateOrigin:s}=oCt(t),{geospatialOrigin:l,shaderCoordinateOrigin:u,offsetMode:c}=xG(r,n,i),f=FG(e,{viewport:r,modelMatrix:o,coordinateSystem:a,coordinateOrigin:s,offsetMode:c});if(c){const h=r.projectPosition(l||u);gG(f,f,h)}return f}const ih={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},K_=Symbol.for("component"),Ih=Symbol.for("asyncPropDefaults"),Ic=Symbol.for("asyncPropOriginal"),Pl=Symbol.for("asyncPropResolved");function g2(e,t=()=>!0){return Array.isArray(e)?$G(e,t,[]):t(e)?[e]:[]}function $G(e,t,r){let n=-1;for(;++n<e.length;){const i=e[n];Array.isArray(i)?$G(i,t,r):t(i)&&r.push(i)}return r}function sCt({target:e,source:t,start:r=0,count:n=1}){const i=t.length,o=n*i;let a=0;for(let s=r;a<i;a++)e[s++]=t[a];for(;a<o;)a<o-a?(e.copyWithin(r+a,r,r+a),a*=2):(e.copyWithin(r+a,r,r+o-a),a=o);return e}class lCt{constructor(t,r,n){x(this,"id",void 0),x(this,"context",void 0),x(this,"isLoaded",void 0),x(this,"persistent",void 0),x(this,"_loadCount",0),x(this,"_subscribers",new Set),x(this,"_data",void 0),x(this,"_loader",void 0),x(this,"_error",void 0),x(this,"_content",void 0),this.id=t,this.context=n,this.setData(r)}subscribe(t){this._subscribers.add(t)}unsubscribe(t){this._subscribers.delete(t)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(t,r){if(t===this._data&&!r)return;this._data=t;const n=++this._loadCount;let i=t;typeof t=="string"&&(i=U_(t)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(o=>{this._loadCount===n&&(this.isLoaded=!0,this._error=void 0,this._content=o)}).catch(o=>{this._loadCount===n&&(this.isLoaded=!0,this._error=o||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=t);for(const o of this._subscribers)o.onChange(this.getData())}}class uCt{constructor({gl:t,protocol:r}){x(this,"protocol",void 0),x(this,"_context",void 0),x(this,"_resources",void 0),x(this,"_consumers",void 0),x(this,"_pruneRequest",void 0),this.protocol=r||"resource://",this._context={gl:t,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(t){return t.startsWith(this.protocol)?!0:t in this._resources}add({resourceId:t,data:r,forceUpdate:n=!1,persistent:i=!0}){let o=this._resources[t];o?o.setData(r,n):(o=new lCt(t,r,this._context),this._resources[t]=o),o.persistent=i}remove(t){const r=this._resources[t];r&&(r.delete(),delete this._resources[t])}unsubscribe({consumerId:t}){const r=this._consumers[t];if(r){for(const n in r){const i=r[n],o=this._resources[i.resourceId];o&&o.unsubscribe(i)}delete this._consumers[t],this.prune()}}subscribe({resourceId:t,onChange:r,consumerId:n,requestId:i="default"}){const{_resources:o,protocol:a}=this;t.startsWith(a)&&(t=t.replace(a,""),o[t]||this.add({resourceId:t,data:null,persistent:!1}));const s=o[t];if(this._track(n,i,s,r),s)return s.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const t in this._resources)this._resources[t].delete()}_track(t,r,n,i){const o=this._consumers,a=o[t]=o[t]||{},s=a[r]||{},l=s.resourceId&&this._resources[s.resourceId];l&&(l.unsubscribe(s),this.prune()),n&&(a[r]=s,s.onChange=i,s.resourceId=n.id,n.subscribe(s))}_prune(){this._pruneRequest=null;for(const t of Object.keys(this._resources)){const r=this._resources[t];!r.persistent&&!r.inUse()&&(r.delete(),delete this._resources[t])}}}const cCt="layerManager.setLayers",fCt="layerManager.activateViewport";class hCt{constructor(t,{deck:r,stats:n,viewport:i,timeline:o}={}){x(this,"layers",void 0),x(this,"context",void 0),x(this,"resourceManager",void 0),x(this,"_lastRenderedLayers",[]),x(this,"_needsRedraw",!1),x(this,"_needsUpdate",!1),x(this,"_nextLayers",null),x(this,"_debug",!1),x(this,"activateViewport",a=>{Tn(fCt,this,a),a&&(this.context.viewport=a)}),this.layers=[],this.resourceManager=new uCt({gl:t,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:t,deck:r,programManager:t&&LEt(t),stats:n||new l2({id:"deck.gl"}),viewport:i||new ru({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:o||new PG,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const t of this.layers)this._finalizeLayer(t)}needsRedraw(t={clearRedrawFlags:!1}){let r=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);for(const n of this.layers){const i=n.getNeedsRedraw(t);r=r||i}return r}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(t){this._needsRedraw=this._needsRedraw||t}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t}getLayers({layerIds:t}={}){return t?this.layers.filter(r=>t.find(n=>r.id.indexOf(n)===0)):this.layers}setProps(t){"debug"in t&&(this._debug=t.debug),"userData"in t&&(this.context.userData=t.userData),"layers"in t&&(this._nextLayers=t.layers),"onError"in t&&(this.context.onError=t.onError)}setLayers(t,r){Tn(cCt,this,r,t),this._lastRenderedLayers=t;const n=g2(t,Boolean);for(const i of n)i.context=this.context;this._updateLayers(this.layers,n)}updateLayers(){const t=this.needsUpdate();t&&(this.setNeedsRedraw("updating layers: ".concat(t)),this.setLayers(this._nextLayers||this._lastRenderedLayers,t)),this._nextLayers=null}_handleError(t,r,n){n.raiseError(r,"".concat(t," of ").concat(n))}_updateLayers(t,r){const n={};for(const a of t)n[a.id]?de.warn("Multiple old layers with same id ".concat(a.id))():n[a.id]=a;const i=[];this._updateSublayersRecursively(r,n,i),this._finalizeOldLayers(n);let o=!1;for(const a of i)if(a.hasUniformTransition()){o="Uniform transition in ".concat(a);break}this._needsUpdate=o,this.layers=i}_updateSublayersRecursively(t,r,n){for(const i of t){i.context=this.context;const o=r[i.id];o===null&&de.warn("Multiple new layers with same id ".concat(i.id))(),r[i.id]=null;let a=null;try{this._debug&&o!==i&&i.validateProps(),o?(this._transferLayerState(o,i),this._updateLayer(i)):this._initializeLayer(i),n.push(i),a=i.isComposite?i.getSubLayers():null}catch(s){this._handleError("matching",s,i)}a&&this._updateSublayersRecursively(a,r,n)}}_finalizeOldLayers(t){for(const r in t){const n=t[r];n&&this._finalizeLayer(n)}}_initializeLayer(t){try{t._initialize(),t.lifecycle=ih.INITIALIZED}catch(r){this._handleError("initialization",r,t)}}_transferLayerState(t,r){r._transferState(t),r.lifecycle=ih.MATCHED,r!==t&&(t.lifecycle=ih.AWAITING_GC)}_updateLayer(t){try{t._update()}catch(r){this._handleError("update",r,t)}}_finalizeLayer(t){this._needsRedraw=this._needsRedraw||"finalized ".concat(t),t.lifecycle=ih.AWAITING_FINALIZATION;try{t._finalize(),t.lifecycle=ih.FINALIZED}catch(r){this._handleError("finalization",r,t)}}}function bd(e,t){if(e===t)return!0;if(!e||!t)return!1;for(const r in e){const n=e[r],i=t[r];if(!(n===i||Array.isArray(n)&&Array.isArray(i)&&bd(n,i)))return!1}return!0}class dCt{constructor(t){x(this,"width",void 0),x(this,"height",void 0),x(this,"views",void 0),x(this,"viewState",void 0),x(this,"controllers",void 0),x(this,"timeline",void 0),x(this,"_viewports",void 0),x(this,"_viewportMap",void 0),x(this,"_isUpdating",void 0),x(this,"_needsRedraw",void 0),x(this,"_needsUpdate",void 0),x(this,"_eventManager",void 0),x(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=t.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=t.eventManager,this._eventCallbacks={onViewStateChange:t.onViewStateChange,onInteractionStateChange:t.onInteractionStateChange},Object.seal(this),this.setProps(t)}finalize(){for(const t in this.controllers){const r=this.controllers[t];r&&r.finalize()}this.controllers={}}needsRedraw(t={clearRedrawFlags:!1}){const r=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),r}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t,this._needsRedraw=this._needsRedraw||t}updateViewStates(){for(const t in this.controllers){const r=this.controllers[t];r&&r.updateTransition()}}getViewports(t){return t?this._viewports.filter(r=>r.containsPixel(t)):this._viewports}getViews(){const t={};return this.views.forEach(r=>{t[r.id]=r}),t}getView(t){return this.views.find(r=>r.id===t)}getViewState(t){const r=typeof t=="string"?this.getView(t):t,n=r&&this.viewState[r.getViewStateId()]||this.viewState;return r?r.filterViewState(n):n}getViewport(t){return this._viewportMap[t]}unproject(t,r){const n=this.getViewports(),i={x:t[0],y:t[1]};for(let o=n.length-1;o>=0;--o){const a=n[o];if(a.containsPixel(i)){const s=t.slice();return s[0]-=a.x,s[1]-=a.y,a.unproject(s,r)}}return null}setProps(t){t.views&&this._setViews(t.views),t.viewState&&this._setViewState(t.viewState),("width"in t||"height"in t)&&this._setSize(t.width,t.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(t,r){(t!==this.width||r!==this.height)&&(this.width=t,this.height=r,this.setNeedsUpdate("Size changed"))}_setViews(t){t=g2(t,Boolean),this._diffViews(t,this.views)&&this.setNeedsUpdate("views changed"),this.views=t}_setViewState(t){t?(!bd(t,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=t):de.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(t,r){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...r,viewId:t})}_createController(t,r){const n=r.type;return new n({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,r.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:o=>t.makeViewport({viewState:o,width:this.width,height:this.height})})}_updateController(t,r,n,i){const o=t.controller;if(o){const a={...r,...o,id:t.id,x:n.x,y:n.y,width:n.width,height:n.height};return i||(i=this._createController(t,a)),i&&i.setProps(a),i}return null}_rebuildViewports(){const{views:t}=this,r=this.controllers;this._viewports=[],this.controllers={};let n=!1;for(let i=t.length;i--;){const o=t[i],a=this.getViewState(o),s=o.makeViewport({viewState:a,width:this.width,height:this.height});let l=r[o.id];const u=Boolean(o.controller);u&&!l&&(n=!0),(n||!u)&&l&&(l.finalize(),l=null),this.controllers[o.id]=this._updateController(o,a,s,l),this._viewports.unshift(s)}for(const i in r){const o=r[i];o&&!this.controllers[i]&&o.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(t=>{t.id&&(this._viewportMap[t.id]=this._viewportMap[t.id]||t)})}_diffViews(t,r){return t.length!==r.length?!0:t.some((n,i)=>!t[i].equals(r[i]))}}const pCt=/([0-9]+\.?[0-9]*)(%|px)/;function Zs(e){switch(typeof e){case"number":return{position:e,relative:!1};case"string":const t=pCt.exec(e);if(t&&t.length>=3){const r=t[2]==="%",n=parseFloat(t[1]);return{position:r?n/100:n,relative:r}}default:throw new Error("Could not parse position string ".concat(e))}}function qs(e,t){return e.relative?Math.round(e.position*t):e.position}function Zr(e,t){if(!e)throw new Error(t||"deck.gl: assertion failed.")}class BG{constructor(t){x(this,"id",void 0),x(this,"viewportInstance",void 0),x(this,"_x",void 0),x(this,"_y",void 0),x(this,"_width",void 0),x(this,"_height",void 0),x(this,"_padding",void 0),x(this,"props",void 0);const{id:r,x:n=0,y:i=0,width:o="100%",height:a="100%",padding:s=null,viewportInstance:l}=t||{};Zr(!l||l instanceof ru),this.viewportInstance=l,this.id=r||this.constructor.displayName||"view",this.props={...t,id:this.id},this._x=Zs(n),this._y=Zs(i),this._width=Zs(o),this._height=Zs(a),this._padding=s&&{left:Zs(s.left||0),right:Zs(s.right||0),top:Zs(s.top||0),bottom:Zs(s.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(t){return this===t?!0:this.viewportInstance?t.viewportInstance?this.viewportInstance.equals(t.viewportInstance):!1:this.ViewportType===t.ViewportType&&bd(this.props,t.props)}makeViewport({width:t,height:r,viewState:n}){if(this.viewportInstance)return this.viewportInstance;n=this.filterViewState(n);const i=this.getDimensions({width:t,height:r});return new this.ViewportType({...n,...this.props,...i})}getViewStateId(){const{viewState:t}=this.props;return typeof t=="string"?t:(t==null?void 0:t.id)||this.id}filterViewState(t){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const r={...t};for(const n in this.props.viewState)n!=="id"&&(r[n]=this.props.viewState[n]);return r}return t}getDimensions({width:t,height:r}){const n={x:qs(this._x,t),y:qs(this._y,r),width:qs(this._width,t),height:qs(this._height,r)};return this._padding&&(n.padding={left:qs(this._padding.left,t),top:qs(this._padding.top,r),right:qs(this._padding.right,t),bottom:qs(this._padding.bottom,r)}),n}get controller(){const t=this.props.controller;return t?t===!0?{type:this.ControllerType}:typeof t=="function"?{type:t}:{type:this.ControllerType,...t}:null}}class g0{constructor(t){x(this,"_inProgress",void 0),x(this,"_handle",void 0),x(this,"_timeline",void 0),x(this,"time",void 0),x(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=t,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(t){var r,n;this.cancel(),this.settings=t,this._inProgress=!0,(r=(n=this.settings).onStart)===null||r===void 0||r.call(n,this)}end(){if(this._inProgress){var t,r;this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(t=(r=this.settings).onEnd)===null||t===void 0||t.call(r,this)}}cancel(){if(this._inProgress){var t,r;(t=(r=this.settings).onInterrupt)===null||t===void 0||t.call(r,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1}}update(){var t,r;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:n,settings:i}=this;this._handle=n.addChannel({delay:n.getTime(),duration:i.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(t=(r=this.settings).onUpdate)===null||t===void 0||t.call(r,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const CD=()=>{},SE={BREAK:1,SNAP_TO_END:2,IGNORE:3},gCt=e=>e,vCt=SE.BREAK;class mCt{constructor(t){x(this,"getControllerState",void 0),x(this,"props",void 0),x(this,"propsInTransition",void 0),x(this,"transition",void 0),x(this,"onViewStateChange",void 0),x(this,"onStateChange",void 0),x(this,"_onTransitionUpdate",r=>{const{time:n,settings:{interpolator:i,startProps:o,endProps:a,duration:s,easing:l}}=r,u=l(n/s),c=i.interpolateProps(o,a,u);this.propsInTransition=this.getControllerState({...this.props,...c}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=t.getControllerState,this.propsInTransition=null,this.transition=new g0(t.timeline),this.onViewStateChange=t.onViewStateChange||CD,this.onStateChange=t.onStateChange||CD}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(t){let r=!1;const n=this.props;if(this.props=t,!n||this._shouldIgnoreViewportChange(n,t))return!1;if(this._isTransitionEnabled(t)){let i=n;if(this.transition.inProgress){const{interruption:o,endProps:a}=this.transition.settings;i={...n,...o===SE.SNAP_TO_END?a:this.propsInTransition||n}}this._triggerTransition(i,t),r=!0}else this.transition.cancel();return r}updateTransition(){this.transition.update()}_isTransitionEnabled(t){const{transitionDuration:r,transitionInterpolator:n}=t;return(r>0||r==="auto")&&Boolean(n)}_isUpdateDueToCurrentTransition(t){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(t,this.propsInTransition):!1}_shouldIgnoreViewportChange(t,r){return this.transition.inProgress?this.transition.settings.interruption===SE.IGNORE||this._isUpdateDueToCurrentTransition(r):this._isTransitionEnabled(r)?r.transitionInterpolator.arePropsEqual(t,r):!0}_triggerTransition(t,r){const n=this.getControllerState(t),i=this.getControllerState(r).shortestPathFrom(n),o=r.transitionInterpolator,a=o.getDuration?o.getDuration(t,r):r.transitionDuration;if(a===0)return;const s=o.initializeProps(t,i);this.propsInTransition={};const l={duration:a,easing:r.transitionEasing||gCt,interpolator:o,interruption:r.transitionInterruption||vCt,startProps:s.start,endProps:s.end,onStart:r.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(r.onTransitionInterrupt),onEnd:this._onTransitionEnd(r.onTransitionEnd)};this.transition.start(l),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(t){return r=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),t==null||t(r)}}}class yCt{constructor(t){x(this,"_propsToCompare",void 0),x(this,"_propsToExtract",void 0),x(this,"_requiredProps",void 0);const{compare:r,extract:n,required:i}=t;this._propsToCompare=r,this._propsToExtract=n||r,this._requiredProps=i}arePropsEqual(t,r){for(const n of this._propsToCompare)if(!(n in t)||!(n in r)||!Ea(t[n],r[n]))return!1;return!0}initializeProps(t,r){const n={},i={};for(const o of this._propsToExtract)(o in t||o in r)&&(n[o]=t[o],i[o]=r[o]);return this._checkRequiredProps(n),this._checkRequiredProps(i),{start:n,end:i}}getDuration(t,r){return r.transitionDuration}_checkRequiredProps(t){!this._requiredProps||this._requiredProps.forEach(r=>{const n=t[r];Zr(Number.isFinite(n)||Array.isArray(n),"".concat(r," is required for transition"))})}}const _Ct=["longitude","latitude","zoom","bearing","pitch"],bCt=["longitude","latitude","zoom"];class v2 extends yCt{constructor(t={}){const r=Array.isArray(t)?t:t.transitionProps,n=Array.isArray(t)?{}:t;n.transitionProps=Array.isArray(r)?{compare:r,required:r}:r||{compare:_Ct,required:bCt},super(n.transitionProps),x(this,"opts",void 0),this.opts=n}initializeProps(t,r){const n=super.initializeProps(t,r),{makeViewport:i,around:o}=this.opts;if(i&&o){const a=i(t),s=i(r),l=a.unproject(o);n.start.around=o,Object.assign(n.end,{around:s.project(l),aroundPosition:l,width:r.width,height:r.height})}return n}interpolateProps(t,r,n){const i={};for(const o of this._propsToExtract)i[o]=gc(t[o]||0,r[o]||0,n);if(r.aroundPosition&&this.opts.makeViewport){const o=this.opts.makeViewport({...r,...i});Object.assign(i,o.panByPosition(r.aroundPosition,gc(t.around,r.around,n)))}return i}}const Js={transitionDuration:0},wCt=300,r1=e=>1-(1-e)*(1-e),zf={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},Fu={};class zG{constructor(t){x(this,"props",void 0),x(this,"state",{}),x(this,"transitionManager",void 0),x(this,"eventManager",void 0),x(this,"onViewStateChange",void 0),x(this,"onStateChange",void 0),x(this,"makeViewport",void 0),x(this,"_controllerState",void 0),x(this,"_events",{}),x(this,"_interactionState",{isDragging:!1}),x(this,"_customEvents",[]),x(this,"_eventStartBlocked",null),x(this,"_panMove",!1),x(this,"invertPan",!1),x(this,"dragMode","rotate"),x(this,"inertia",0),x(this,"scrollZoom",!0),x(this,"dragPan",!0),x(this,"dragRotate",!0),x(this,"doubleClickZoom",!0),x(this,"touchZoom",!0),x(this,"touchRotate",!1),x(this,"keyboard",!0),this.transitionManager=new mCt({...t,getControllerState:r=>new this.ControllerState(r),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=t.eventManager,this.onViewStateChange=t.onViewStateChange||(()=>{}),this.onStateChange=t.onStateChange||(()=>{}),this.makeViewport=t.makeViewport}set events(t){this.toggleEvents(this._customEvents,!1),this.toggleEvents(t,!0),this._customEvents=t,this.props&&this.setProps(this.props)}finalize(){for(const r in this._events)if(this._events[r]){var t;(t=this.eventManager)===null||t===void 0||t.off(r,this.handleEvent)}this.transitionManager.finalize()}handleEvent(t){this._controllerState=void 0;const r=this._eventStartBlocked;switch(t.type){case"panstart":return r?!1:this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return r?!1:this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"tripanstart":return r?!1:this._onTriplePanStart(t);case"tripanmove":return this._onTriplePan(t);case"tripanend":return this._onTriplePanEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(t){const{x:r,y:n}=this.props,{offsetCenter:i}=t;return[i.x-r,i.y-n]}isPointInBounds(t,r){const{width:n,height:i}=this.props;if(r&&r.handled)return!1;const o=t[0]>=0&&t[0]<=n&&t[1]>=0&&t[1]<=i;return o&&r&&r.stopPropagation(),o}isFunctionKeyPressed(t){const{srcEvent:r}=t;return Boolean(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(t){const r=setTimeout(()=>{this._eventStartBlocked===r&&(this._eventStartBlocked=null)},t);this._eventStartBlocked=r}setProps(t){t.dragMode&&(this.dragMode=t.dragMode),this.props=t,"transitionInterpolator"in t||(t.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(t);const{inertia:r}=t;this.inertia=Number.isFinite(r)?r:r===!0?wCt:0;const{scrollZoom:n=!0,dragPan:i=!0,dragRotate:o=!0,doubleClickZoom:a=!0,touchZoom:s=!0,touchRotate:l=!1,keyboard:u=!0}=t,c=Boolean(this.onViewStateChange);this.toggleEvents(zf.WHEEL,c&&n),this.toggleEvents(zf.PAN,c&&(i||o)),this.toggleEvents(zf.PINCH,c&&(s||l)),this.toggleEvents(zf.TRIPLE_PAN,c&&l),this.toggleEvents(zf.DOUBLE_TAP,c&&a),this.toggleEvents(zf.KEYBOARD,c&&u),this.scrollZoom=n,this.dragPan=i,this.dragRotate=o,this.doubleClickZoom=a,this.touchZoom=s,this.touchRotate=l,this.keyboard=u}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(t,r){this.eventManager&&t.forEach(n=>{this._events[n]!==r&&(this._events[n]=r,r?this.eventManager.on(n,this.handleEvent):this.eventManager.off(n,this.handleEvent))})}updateViewport(t,r=null,n={}){const i={...t.getViewportProps(),...r},o=this.controllerState!==t;if(this.state=t.getState(),this._setInteractionState(n),o){const a=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:a})}}_onTransition(t){this.onViewStateChange({...t,interactionState:this._interactionState})}_setInteractionState(t){Object.assign(this._interactionState,t),this.onStateChange(this._interactionState)}_onPanStart(t){const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;let n=this.isFunctionKeyPressed(t)||t.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(n=!n);const i=this.controllerState[n?"panStart":"rotateStart"]({pos:r});return this._panMove=n,this.updateViewport(i,Js,{isDragging:!0}),!0}_onPan(t){return this.isDragging()?this._panMove?this._onPanMove(t):this._onPanRotate(t):!1}_onPanEnd(t){return this.isDragging()?this._panMove?this._onPanMoveEnd(t):this._onPanRotateEnd(t):!1}_onPanMove(t){if(!this.dragPan)return!1;const r=this.getCenter(t),n=this.controllerState.pan({pos:r});return this.updateViewport(n,Js,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(t){const{inertia:r}=this;if(this.dragPan&&r&&t.velocity){const n=this.getCenter(t),i=[n[0]+t.velocityX*r/2,n[1]+t.velocityY*r/2],o=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:r1},{isDragging:!1,isPanning:!0})}else{const n=this.controllerState.panEnd();this.updateViewport(n,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(t){if(!this.dragRotate)return!1;const r=this.getCenter(t),n=this.controllerState.rotate({pos:r});return this.updateViewport(n,Js,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(t){const{inertia:r}=this;if(this.dragRotate&&r&&t.velocity){const n=this.getCenter(t),i=[n[0]+t.velocityX*r/2,n[1]+t.velocityY*r/2],o=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:r1},{isDragging:!1,isRotating:!0})}else{const n=this.controllerState.rotateEnd();this.updateViewport(n,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(t){if(!this.scrollZoom)return!1;t.srcEvent.preventDefault();const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const{speed:n=.01,smooth:i=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:o}=t;let a=2/(1+Math.exp(-Math.abs(o*n)));o<0&&a!==0&&(a=1/a);const s=this.controllerState.zoom({pos:r,scale:a});return this.updateViewport(s,{...this._getTransitionProps({around:r}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(t){const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const n=this.controllerState.rotateStart({pos:r});return this.updateViewport(n,Js,{isDragging:!0}),!0}_onTriplePan(t){if(!this.touchRotate||!this.isDragging())return!1;const r=this.getCenter(t);r[0]-=t.deltaX;const n=this.controllerState.rotate({pos:r});return this.updateViewport(n,Js,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(t){if(!this.isDragging())return!1;const{inertia:r}=this;if(this.touchRotate&&r&&t.velocityY){const n=this.getCenter(t),i=[n[0],n[1]+=t.velocityY*r/2],o=this.controllerState.rotate({pos:i});this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:r1},{isDragging:!1,isRotating:!0}),this.blockEvents(r)}else{const n=this.controllerState.rotateEnd();this.updateViewport(n,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(t){const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const n=this.controllerState.zoomStart({pos:r}).rotateStart({pos:r});return Fu._startPinchRotation=t.rotation,Fu._lastPinchEvent=t,this.updateViewport(n,Js,{isDragging:!0}),!0}_onPinch(t){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let r=this.controllerState;if(this.touchZoom){const{scale:n}=t,i=this.getCenter(t);r=r.zoom({pos:i,scale:n})}if(this.touchRotate){const{rotation:n}=t;r=r.rotate({deltaAngleX:Fu._startPinchRotation-n})}return this.updateViewport(r,Js,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),Fu._lastPinchEvent=t,!0}_onPinchEnd(t){if(!this.isDragging())return!1;const{inertia:r}=this,{_lastPinchEvent:n}=Fu;if(this.touchZoom&&r&&n&&t.scale!==n.scale){const i=this.getCenter(t);let o=this.controllerState.rotateEnd();const a=Math.log2(t.scale),s=(a-Math.log2(n.scale))/(t.deltaTime-n.deltaTime),l=Math.pow(2,a+s*r/2);o=o.zoom({pos:i,scale:l}).zoomEnd(),this.updateViewport(o,{...this._getTransitionProps({around:i}),transitionDuration:r,transitionEasing:r1},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(r)}else{const i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return Fu._startPinchRotation=null,Fu._lastPinchEvent=null,!0}_onDoubleTap(t){if(!this.doubleClickZoom)return!1;const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const n=this.isFunctionKeyPressed(t),i=this.controllerState.zoom({pos:r,scale:n?.5:2});return this.updateViewport(i,this._getTransitionProps({around:r}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(t){if(!this.keyboard)return!1;const r=this.isFunctionKeyPressed(t),{zoomSpeed:n,moveSpeed:i,rotateSpeedX:o,rotateSpeedY:a}=this.keyboard===!0?{}:this.keyboard,{controllerState:s}=this;let l;const u={};switch(t.srcEvent.code){case"Minus":l=r?s.zoomOut(n).zoomOut(n):s.zoomOut(n),u.isZooming=!0;break;case"Equal":l=r?s.zoomIn(n).zoomIn(n):s.zoomIn(n),u.isZooming=!0;break;case"ArrowLeft":r?(l=s.rotateLeft(o),u.isRotating=!0):(l=s.moveLeft(i),u.isPanning=!0);break;case"ArrowRight":r?(l=s.rotateRight(o),u.isRotating=!0):(l=s.moveRight(i),u.isPanning=!0);break;case"ArrowUp":r?(l=s.rotateUp(a),u.isRotating=!0):(l=s.moveUp(i),u.isPanning=!0);break;case"ArrowDown":r?(l=s.rotateDown(a),u.isRotating=!0):(l=s.moveDown(i),u.isPanning=!0);break;default:return!1}return this.updateViewport(l,this._getTransitionProps(),u),!0}_getTransitionProps(t){const{transition:r}=this;return!r||!r.transitionInterpolator?Js:t?{...r,transitionInterpolator:new v2({...t,...r.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:r}}class VG{constructor(t,r){x(this,"_viewportProps",void 0),x(this,"_state",void 0),this._viewportProps=this.applyConstraints(t),this._state=r}getViewportProps(){return this._viewportProps}getState(){return this._state}}const AD=5,SCt=1.2;class TCt extends VG{constructor(t){const{width:r,height:n,latitude:i,longitude:o,zoom:a,bearing:s=0,pitch:l=0,altitude:u=1.5,position:c=[0,0,0],maxZoom:f=20,minZoom:h=0,maxPitch:d=60,minPitch:p=0,startPanLngLat:g,startZoomLngLat:m,startRotatePos:v,startBearing:y,startPitch:b,startZoom:w,normalize:T=!0}=t;Zr(Number.isFinite(o)),Zr(Number.isFinite(i)),Zr(Number.isFinite(a)),super({width:r,height:n,latitude:i,longitude:o,zoom:a,bearing:s,pitch:l,altitude:u,maxZoom:f,minZoom:h,maxPitch:d,minPitch:p,normalize:T,position:c},{startPanLngLat:g,startZoomLngLat:m,startRotatePos:v,startBearing:y,startPitch:b,startZoom:w}),x(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart({pos:t}){return this._getUpdatedState({startPanLngLat:this._unproject(t)})}pan({pos:t,startPos:r}){const n=this.getState().startPanLngLat||this._unproject(r);if(!n)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(n,t);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:t,deltaAngleX:r=0,deltaAngleY:n=0}){const{startRotatePos:i,startBearing:o,startPitch:a}=this.getState();if(!i||o===void 0||a===void 0)return this;let s;return t?s=this._getNewRotation(t,i,a,o):s={bearing:o+r,pitch:a+n},this._getUpdatedState(s)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:t}){return this._getUpdatedState({startZoomLngLat:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom({pos:t,startPos:r,scale:n}){let{startZoom:i,startZoomLngLat:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(r)||this._unproject(t)),!o)return this;const{maxZoom:a,minZoom:s}=this.getViewportProps();let l=i+Math.log2(n);l=un(l,s,a);const u=this.makeViewport({...this.getViewportProps(),zoom:l});return this._getUpdatedState({zoom:l,...u.panByPosition(o,t)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(t=2){return this._zoomFromCenter(t)}zoomOut(t=2){return this._zoomFromCenter(1/t)}moveLeft(t=100){return this._panFromCenter([t,0])}moveRight(t=100){return this._panFromCenter([-t,0])}moveUp(t=100){return this._panFromCenter([0,t])}moveDown(t=100){return this._panFromCenter([0,-t])}rotateLeft(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-t})}rotateRight(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+t})}rotateUp(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+t})}rotateDown(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-t})}shortestPathFrom(t){const r=t.getViewportProps(),n={...this.getViewportProps()},{bearing:i,longitude:o}=n;return Math.abs(i-r.bearing)>180&&(n.bearing=i<0?i+360:i-360),Math.abs(o-r.longitude)>180&&(n.longitude=o<0?o+360:o-360),n}applyConstraints(t){const{maxZoom:r,minZoom:n,zoom:i}=t;t.zoom=un(i,n,r);const{maxPitch:o,minPitch:a,pitch:s}=t;t.pitch=un(s,a,o);const{normalize:l=!0}=t;return l&&Object.assign(t,_Et(t)),t}_zoomFromCenter(t){const{width:r,height:n}=this.getViewportProps();return this.zoom({pos:[r/2,n/2],scale:t})}_panFromCenter(t){const{width:r,height:n}=this.getViewportProps();return this.pan({startPos:[r/2,n/2],pos:[r/2+t[0],n/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}_unproject(t){const r=this.makeViewport(this.getViewportProps());return t&&r.unproject(t)}_getNewRotation(t,r,n,i){const o=t[0]-r[0],a=t[1]-r[1],s=t[1],l=r[1],{width:u,height:c}=this.getViewportProps(),f=o/u;let h=0;a>0?Math.abs(c-l)>AD&&(h=a/(l-c)*SCt):a<0&&l>AD&&(h=1-s/l),h=un(h,-1,1);const{minPitch:d,maxPitch:p}=this.getViewportProps(),g=i+180*f;let m=n;return h>0?m=n+h*(p-n):h<0&&(m=n-h*(d-n)),{pitch:m,bearing:g}}}class kCt extends zG{constructor(...t){super(...t),x(this,"ControllerState",TCt),x(this,"transition",{transitionDuration:300,transitionInterpolator:new v2({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),x(this,"dragMode","pan")}setProps(t){t.position=t.position||[0,0,0];const r=this.props;super.setProps(t),(!r||r.height!==t.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...t,...this.state}))}}class UG extends BG{get ViewportType(){return La}get ControllerType(){return kCt}}x(UG,"displayName","MapView");class PCt extends p2{constructor(t,r){super(t,r),x(this,"maskMap",void 0),x(this,"fbo",void 0);const{mapSize:n=2048}=r;this.maskMap=new oi(t,{width:n,height:n,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.fbo=new $r(t,{id:"maskmap",width:n,height:n,attachments:{[36064]:this.maskMap}})}render(t){const r=this.gl,n=[!1,!1,!1,!1];return n[t.channel]=!0,Ji(r,{clearColor:[255,255,255,255],blend:!0,blendFunc:[0,1],blendEquation:32778,colorMask:n,depthTest:!1},()=>super.render({...t,target:this.fbo,pass:"mask"}))}shouldDrawLayer(t){return t.props.operation===d0.MASK}delete(){this.fbo.delete(),this.maskMap.delete()}}const ECt=new Mn().lookAt({eye:[0,0,1]});function CCt({width:e,height:t,near:r,far:n,padding:i}){let o=-e/2,a=e/2,s=-t/2,l=t/2;if(i){const{left:u=0,right:c=0,top:f=0,bottom:h=0}=i,d=un((u+e-c)/2,0,e)-e/2,p=un((f+t-h)/2,0,t)-t/2;o-=d,a-=d,s+=p,l+=p}return new Mn().ortho({left:o,right:a,bottom:s,top:l,near:r,far:n})}class ACt extends ru{constructor(t){const{width:r,height:n,near:i=.1,far:o=1e3,zoom:a=0,target:s=[0,0,0],padding:l=null,flipY:u=!0}=t,c=Array.isArray(a)?a[0]:a,f=Array.isArray(a)?a[1]:a,h=Math.min(c,f),d=Math.pow(2,h);let p;if(c!==f){const g=Math.pow(2,c),m=Math.pow(2,f);p={unitsPerMeter:[g/d,m/d,1],metersPerUnit:[d/g,d/m,1]}}super({...t,longitude:void 0,position:s,viewMatrix:ECt.clone().scale([d,d*(u?-1:1),d]),projectionMatrix:CCt({width:r||1,height:n||1,padding:l,near:i,far:o}),zoom:h,distanceScales:p})}projectFlat([t,r]){const{unitsPerMeter:n}=this.distanceScales;return[t*n[0],r*n[1]]}unprojectFlat([t,r]){const{metersPerUnit:n}=this.distanceScales;return[t*n[0],r*n[1]]}panByPosition(t,r){const n=d2(r,this.pixelUnprojectionMatrix),i=this.projectFlat(t),o=G_([],i,sG([],n)),a=G_([],this.center,o);return{target:this.unprojectFlat(a)}}}class xCt extends VG{constructor(t){const{width:r,height:n,rotationX:i=0,rotationOrbit:o=0,target:a=[0,0,0],zoom:s=0,minRotationX:l=-90,maxRotationX:u=90,minZoom:c=-1/0,maxZoom:f=1/0,startPanPosition:h,startRotatePos:d,startRotationX:p,startRotationOrbit:g,startZoomPosition:m,startZoom:v}=t;super({width:r,height:n,rotationX:i,rotationOrbit:o,target:a,zoom:s,minRotationX:l,maxRotationX:u,minZoom:c,maxZoom:f},{startPanPosition:h,startRotatePos:d,startRotationX:p,startRotationOrbit:g,startZoomPosition:m,startZoom:v}),x(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart({pos:t}){return this._getUpdatedState({startPanPosition:this._unproject(t)})}pan({pos:t,startPosition:r}){const n=this.getState().startPanPosition||r;if(!n)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(n,t);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:t,deltaAngleX:r=0,deltaAngleY:n=0}){const{startRotatePos:i,startRotationX:o,startRotationOrbit:a}=this.getState(),{width:s,height:l}=this.getViewportProps();if(!i||o===void 0||a===void 0)return this;let u;if(t){let c=(t[0]-i[0])/s;const f=(t[1]-i[1])/l;(o<-90||o>90)&&(c*=-1),u={rotationX:o+f*180,rotationOrbit:a+c*180}}else u={rotationX:o+n,rotationOrbit:a+r};return this._getUpdatedState(u)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(t){const r=t.getViewportProps(),n={...this.getViewportProps()},{rotationOrbit:i}=n;return Math.abs(i-r.rotationOrbit)>180&&(n.rotationOrbit=i<0?i+360:i-360),n}zoomStart({pos:t}){return this._getUpdatedState({startZoomPosition:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom({pos:t,startPos:r,scale:n}){let{startZoom:i,startZoomPosition:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(r)||this._unproject(t)),!o)return this;const a=this._calculateNewZoom({scale:n,startZoom:i}),s=this.makeViewport({...this.getViewportProps(),zoom:a});return this._getUpdatedState({zoom:a,...s.panByPosition(o,t)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(t=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:t})})}zoomOut(t=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/t})})}moveLeft(t=50){return this._panFromCenter([-t,0])}moveRight(t=50){return this._panFromCenter([t,0])}moveUp(t=50){return this._panFromCenter([0,-t])}moveDown(t=50){return this._panFromCenter([0,t])}rotateLeft(t=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-t})}rotateRight(t=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+t})}rotateUp(t=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-t})}rotateDown(t=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+t})}_unproject(t){const r=this.makeViewport(this.getViewportProps());return t&&r.unproject(t)}_calculateNewZoom({scale:t,startZoom:r}){const{maxZoom:n,minZoom:i}=this.getViewportProps();r===void 0&&(r=this.getViewportProps().zoom);const o=r+Math.log2(t);return un(o,i,n)}_panFromCenter(t){const{width:r,height:n,target:i}=this.getViewportProps();return this.pan({startPosition:i,pos:[r/2+t[0],n/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}applyConstraints(t){const{maxZoom:r,minZoom:n,zoom:i,maxRotationX:o,minRotationX:a,rotationOrbit:s}=t;return t.zoom=Array.isArray(i)?[un(i[0],n,r),un(i[1],n,r)]:un(i,n,r),t.rotationX=un(t.rotationX,a,o),(s<-180||s>180)&&(t.rotationOrbit=YEt(s+180,360)-180),t}}class MCt extends xCt{constructor(t){super(t),x(this,"zoomAxis",void 0),this.zoomAxis=t.zoomAxis||"all"}_calculateNewZoom({scale:t,startZoom:r}){const{maxZoom:n,minZoom:i}=this.getViewportProps();r===void 0&&(r=this.getViewportProps().zoom);let o=Math.log2(t);if(Array.isArray(r)){let[a,s]=r;switch(this.zoomAxis){case"X":a=un(a+o,i,n);break;case"Y":s=un(s+o,i,n);break;default:let l=Math.min(a+o,s+o);l<i&&(o+=i-l),l=Math.max(a+o,s+o),l>n&&(o+=n-l),a+=o,s+=o}return[a,s]}return un(r+o,i,n)}}class ICt extends zG{constructor(...t){super(...t),x(this,"ControllerState",MCt),x(this,"transition",{transitionDuration:300,transitionInterpolator:new v2(["target","zoom"])}),x(this,"dragMode","pan")}_onPanRotate(){return!1}}class m2 extends BG{get ViewportType(){return ACt}get ControllerType(){return ICt}}x(m2,"displayName","OrthographicView");function LCt({layers:e,viewport:t}){let r=null;for(const o of e){const a=o.getBounds();a&&(r?(r[0]=Math.min(r[0],a[0][0]),r[1]=Math.min(r[1],a[0][1]),r[2]=Math.max(r[2],a[1][0]),r[3]=Math.max(r[3],a[1][1])):r=[a[0][0],a[0][1],a[1][0],a[1][1]])}const n=t.getBounds();if(!r)return n;const i=RCt(n);return r[2]-r[0]<i[2]-i[0]||r[3]-r[1]<i[3]-i[1]||(r[0]=Math.max(r[0],i[0]),r[1]=Math.max(r[1],i[1]),r[2]=Math.min(r[2],i[2]),r[3]=Math.min(r[3],i[3])),r}function OCt({bounds:e,viewport:t,width:r,height:n}){if(e[2]<=e[0]||e[3]<=e[1])return null;const i=1;if(r-=i*2,n-=i*2,t instanceof La){const{longitude:s,latitude:l,zoom:u}=RG({width:r,height:n,bounds:[[e[0],e[1]],[e[2],e[3]]],maxZoom:20});return new La({longitude:s,latitude:l,zoom:u,x:i,y:i,width:r,height:n})}const o=[(e[0]+e[2])/2,(e[1]+e[3])/2,0],a=Math.min(20,r/(e[2]-e[0]),n/(e[3]-e[1]));return new m2({x:i,y:i}).makeViewport({width:r,height:n,viewState:{target:o,zoom:Math.log2(a)}})}function RCt(e){const t={x:e[2]-e[0],y:e[3]-e[1]},r={x:e[0]+.5*t.x,y:e[1]+.5*t.y};return[r.x-t.x,r.y-t.y,r.x+t.x,r.y+t.y]}class DCt{constructor(){x(this,"id","mask-effect"),x(this,"props",null),x(this,"useInPicking",!0),x(this,"dummyMaskMap",void 0),x(this,"channels",[]),x(this,"masks",null),x(this,"maskPass",void 0),x(this,"maskMap",void 0),x(this,"lastViewport",void 0)}preRender(t,{layers:r,layerFilter:n,viewports:i,onViewportActive:o,views:a}){this.dummyMaskMap||(this.dummyMaskMap=new oi(t,{width:1,height:1}));const s=r.filter(f=>f.props.visible&&f.props.operation===d0.MASK);if(s.length===0){this.masks=null,this.channels.length=0;return}this.masks={},this.maskPass||(this.maskPass=new PCt(t,{id:"default-mask"}),this.maskMap=this.maskPass.maskMap);const l=this._sortMaskChannels(s),u=i[0],c=!this.lastViewport||!this.lastViewport.equals(u);for(const f in l)this._renderChannel(l[f],{layerFilter:n,onViewportActive:o,views:a,viewport:u,viewportChanged:c})}_renderChannel(t,{layerFilter:r,onViewportActive:n,views:i,viewport:o,viewportChanged:a}){const s=this.channels[t.index];if(!s)return;const l=t===s||s.layers.length!==t.layers.length||t.layerBounds.some((u,c)=>u!==s.layerBounds[c]);if(t.bounds=s.bounds,t.maskBounds=s.maskBounds,this.channels[t.index]=t,(l||a)&&(this.lastViewport=o,t.bounds=LCt({layers:t.layers,viewport:o}),l||!Ea(t.bounds,s.bounds))){const{maskPass:u,maskMap:c}=this,f=OCt({bounds:t.bounds,viewport:o,width:c.width,height:c.height});t.maskBounds=f?f.getBounds():[0,0,1,1],u.render({pass:"mask",channel:t.index,layers:t.layers,layerFilter:r,viewports:f?[f]:[],onViewportActive:n,views:i,moduleParameters:{devicePixelRatio:1}})}this.masks[t.id]={index:t.index,bounds:t.maskBounds,coordinateOrigin:t.coordinateOrigin,coordinateSystem:t.coordinateSystem}}_sortMaskChannels(t){const r={};let n=0;for(const i of t){const{id:o}=i.root;let a=r[o];if(!a){if(++n>4){de.warn("Too many mask layers. The max supported is 4")();continue}a={id:o,index:this.channels.findIndex(s=>(s==null?void 0:s.id)===o),layers:[],layerBounds:[],coordinateOrigin:i.root.props.coordinateOrigin,coordinateSystem:i.root.props.coordinateSystem},r[o]=a}a.layers.push(i),a.layerBounds.push(i.getBounds())}for(let i=0;i<4;i++){const o=this.channels[i];(!o||!(o.id in r))&&(this.channels[i]=null)}for(const i in r){const o=r[i];o.index<0&&(o.index=this.channels.findIndex(a=>!a),this.channels[o.index]=o)}return r}getModuleParameters(){return{maskMap:this.masks?this.maskMap:this.dummyMaskMap,maskChannels:this.masks}}cleanup(){this.dummyMaskMap&&(this.dummyMaskMap.delete(),this.dummyMaskMap=void 0),this.maskPass&&(this.maskPass.delete(),this.maskPass=void 0,this.maskMap=void 0),this.lastViewport=void 0,this.masks=null,this.channels.length=0}}const NCt=new NG;class FCt{constructor(){x(this,"effects",void 0),x(this,"_internalEffects",void 0),x(this,"_needsRedraw",void 0),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(t){"effects"in t&&(t.effects.length!==this.effects.length||!bd(t.effects,this.effects))&&(this.setEffects(t.effects),this._needsRedraw="effects changed")}needsRedraw(t={clearRedrawFlags:!1}){const r=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),r}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(t=[]){this.cleanup(),this.effects=t,this._internalEffects=t.slice(),this._internalEffects.push(new DCt),t.some(r=>r instanceof NG)||this._internalEffects.push(NCt)}cleanup(){for(const t of this.effects)t.cleanup();for(const t of this._internalEffects)t.cleanup();this.effects.length=0,this._internalEffects.length=0}}class $Ct extends p2{shouldDrawLayer(t){return t.props.operation===d0.DRAW}}const xD={blendFunc:[1,0,32771,0],blendEquation:32774};class WG extends p2{constructor(...t){super(...t),x(this,"pickZ",void 0),x(this,"_colors",null)}render(t){return t.pickingFBO?this._drawPickingBuffer(t):super.render(t)}_drawPickingBuffer({layers:t,layerFilter:r,views:n,viewports:i,onViewportActive:o,pickingFBO:a,deviceRect:{x:s,y:l,width:u,height:c},cullRect:f,effects:h,pass:d="picking",pickZ:p}){const g=this.gl;this.pickZ=p;const m=p?null:{byLayer:new Map,byAlpha:[]};this._colors=m;const v=Ji(g,{scissorTest:!0,scissor:[s,l,u,c],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...xD,blend:!p},()=>super.render({target:a,layers:t,layerFilter:r,views:n,viewports:i,onViewportActive:o,cullRect:f,effects:h==null?void 0:h.filter(b=>b.useInPicking),pass:d}));return this._colors=null,{decodePickingColor:m&&zCt.bind(null,m),stats:v}}shouldDrawLayer(t){return t.props.pickable&&t.props.operation===d0.DRAW}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(t,r,n){const i={...t.props.parameters};return this._colors?(Object.assign(i,xD),i.blend=!0,i.blendColor=BCt(this._colors,t,n)):i.blend=!1,i}}function BCt(e,t,r){const{byLayer:n,byAlpha:i}=e;let o,a=n.get(t);return a?(a.viewports.push(r),o=a.a):(o=n.size+1,o<=255?(a={a:o,layer:t,viewports:[r]},n.set(t,a),i[o]=a):(de.warn("Too many pickable layers, only picking the first 255")(),o=0)),[0,0,0,o/255]}function zCt(e,t){const r=e.byAlpha[t[3]];return r&&{pickedLayer:r.layer,pickedViewports:r.viewports,pickedObjectIndex:r.layer.decodePickingColor(t)}}const VCt="deckRenderer.renderLayers";class UCt{constructor(t){this.gl=t,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new $Ct(t),this.pickLayersPass=new WG(t),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(t){"layerFilter"in t&&this.layerFilter!==t.layerFilter&&(this.layerFilter=t.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in t&&this.drawPickingColors!==t.drawPickingColors&&(this.drawPickingColors=t.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(t){const r=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;t.layerFilter=t.layerFilter||this.layerFilter,t.effects=t.effects||[],t.target=t.target||$r.getDefaultFramebuffer(this.gl),this._preRender(t.effects,t);const n=this.lastPostProcessEffect?this.renderBuffers[0]:t.target,i=r.render({...t,target:n});this._postRender(t.effects,t),this.renderCount++,Tn(VCt,this,i,t)}needsRedraw(t={clearRedrawFlags:!1}){const r=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),r}finalize(){const{renderBuffers:t}=this;for(const r of t)r.delete();t.length=0}_preRender(t,r){let n=null;for(const i of t)i.preRender(this.gl,r),i.postRender&&(n=i);n&&this._resizeRenderBuffers(),this.lastPostProcessEffect=n}_resizeRenderBuffers(){const{renderBuffers:t}=this;t.length===0&&t.push(new $r(this.gl),new $r(this.gl));for(const r of t)r.resize()}_postRender(t,r){const{renderBuffers:n}=this,i={inputBuffer:n[0],swapBuffer:n[1],target:null};for(const o of t)if(o.postRender){if(o===this.lastPostProcessEffect){i.target=r.target,o.postRender(this.gl,i);break}const a=o.postRender(this.gl,i);i.inputBuffer=a,i.swapBuffer=a===n[0]?n[1]:n[0]}}}const WCt={pickedColor:null,pickedObjectIndex:-1};function jCt({pickedColors:e,decodePickingColor:t,deviceX:r,deviceY:n,deviceRadius:i,deviceRect:o}){const{x:a,y:s,width:l,height:u}=o;let c=i*i,f=-1,h=0;for(let d=0;d<u;d++){const p=d+s-n,g=p*p;if(g>c)h+=4*l;else for(let m=0;m<l;m++){if(e[h+3]-1>=0){const y=m+a-r,b=y*y+g;b<=c&&(c=b,f=h)}h+=4}}if(f>=0){const d=e.slice(f,f+4),p=t(d);if(p){const g=Math.floor(f/4/l),m=f/4-g*l;return{...p,pickedColor:d,pickedX:a+m,pickedY:s+g}}de.error("Picked non-existent layer. Is picking buffer corrupt?")()}return WCt}function GCt({pickedColors:e,decodePickingColor:t}){const r=new Map;if(e){for(let n=0;n<e.length;n+=4)if(e[n+3]-1>=0){const o=e.slice(n,n+4),a=o.join(",");if(!r.has(a)){const s=t(o);s?r.set(a,{...s,color:o}):de.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(r.values())}function jG({pickInfo:e,viewports:t,pixelRatio:r,x:n,y:i,z:o}){let a=t[0];t.length>1&&(a=XCt((e==null?void 0:e.pickedViewports)||t,{x:n,y:i}));let s;if(a){const l=[n-a.x,i-a.y];o!==void 0&&(l[2]=o),s=a.unproject(l)}return{color:null,layer:null,viewport:a,index:-1,picked:!1,x:n,y:i,pixel:[n,i],coordinate:s,devicePixel:e&&"pickedX"in e?[e.pickedX,e.pickedY]:void 0,pixelRatio:r}}function HCt(e){const{pickInfo:t,lastPickedInfo:r,mode:n,layers:i}=e,{pickedColor:o,pickedLayer:a,pickedObjectIndex:s}=t,l=a?[a]:[];if(n==="hover"){const f=r.index,h=r.layerId,d=a?a.props.id:null;if(d!==h||s!==f){if(d!==h){const p=i.find(g=>g.props.id===h);p&&l.unshift(p)}r.layerId=d,r.index=s,r.info=null}}const u=jG(e),c=new Map;return c.set(null,u),l.forEach(f=>{let h={...u};f===a&&(h.color=o,h.index=s,h.picked=!0),h=GG({layer:f,info:h,mode:n});const d=h.layer;f===a&&n==="hover"&&(r.info=h),c.set(d.id,h),n==="hover"&&d.updateAutoHighlight(h)}),c}function GG({layer:e,info:t,mode:r}){for(;e&&t;){const n=t.layer||null;t.sourceLayer=n,t.layer=e,t=e.getPickingInfo({info:t,mode:r,sourceLayer:n}),e=e.parent}return t}function XCt(e,t){for(let r=e.length-1;r>=0;r--){const n=e[r];if(n.containsPixel(t))return n}return e[0]}class YCt{constructor(t){x(this,"gl",void 0),x(this,"pickingFBO",void 0),x(this,"depthFBO",void 0),x(this,"pickLayersPass",void 0),x(this,"layerFilter",void 0),x(this,"lastPickedInfo",void 0),x(this,"_pickable",!0),this.gl=t,this.pickLayersPass=new WG(t),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(t){"layerFilter"in t&&(this.layerFilter=t.layerFilter),"_pickable"in t&&(this._pickable=t._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(t){return this._pickClosestObject(t)}pickObjects(t){return this._pickVisibleObjects(t)}getLastPickedObject({x:t,y:r,layers:n,viewports:i},o=this.lastPickedInfo.info){const a=o&&o.layer&&o.layer.id,s=o&&o.viewport&&o.viewport.id,l=a?n.find(h=>h.id===a):null,u=s&&i.find(h=>h.id===s)||i[0],c=u&&u.unproject([t-u.x,r-u.y]);return{...o,...{x:t,y:r,viewport:u,coordinate:c,layer:l}}}_resizeBuffer(){var t,r;const{gl:n}=this;if(!this.pickingFBO&&(this.pickingFBO=new $r(n),$r.isSupported(n,{colorBufferFloat:!0}))){const i=new $r(n);i.attach({[36064]:new oi(n,{format:Pe(n)?34836:6408,type:5126})}),this.depthFBO=i}(t=this.pickingFBO)===null||t===void 0||t.resize({width:n.canvas.width,height:n.canvas.height}),(r=this.depthFBO)===null||r===void 0||r.resize({width:n.canvas.width,height:n.canvas.height})}_getPickable(t){if(this._pickable===!1)return null;const r=t.filter(n=>n.isPickable()&&!n.isComposite);return r.length?r:null}_pickClosestObject({layers:t,views:r,viewports:n,x:i,y:o,radius:a=0,depth:s=1,mode:l="query",unproject3D:u,onViewportActive:c,effects:f}){const h=this._getPickable(t),d=Kh(this.gl);if(!h)return{result:[],emptyInfo:jG({viewports:n,x:i,y:o,pixelRatio:d})};this._resizeBuffer();const p=_3(this.gl,[i,o],!0),g=[p.x+Math.floor(p.width/2),p.y+Math.floor(p.height/2)],m=Math.round(a*d),{width:v,height:y}=this.pickingFBO,b=this._getPickingRect({deviceX:g[0],deviceY:g[1],deviceRadius:m,deviceWidth:v,deviceHeight:y}),w={x:i-a,y:o-a,width:a*2+1,height:a*2+1};let T;const S=[],k=new Set;for(let E=0;E<s;E++){let P;if(b){const A=this._drawAndSample({layers:h,views:r,viewports:n,onViewportActive:c,deviceRect:b,cullRect:w,effects:f,pass:"picking:".concat(l)});P=jCt({...A,deviceX:g[0],deviceY:g[1],deviceRadius:m,deviceRect:b})}else P={pickedColor:null,pickedObjectIndex:-1};let C;P.pickedLayer&&u&&this.depthFBO&&(C=this._drawAndSample({layers:[P.pickedLayer],views:r,viewports:n,onViewportActive:c,deviceRect:{x:P.pickedX,y:P.pickedY,width:1,height:1},cullRect:w,effects:f,pass:"picking:".concat(l,":z")},!0).pickedColors[0]),P.pickedLayer&&E+1<s&&(k.add(P.pickedLayer),P.pickedLayer.disablePickingIndex(P.pickedObjectIndex)),T=HCt({pickInfo:P,lastPickedInfo:this.lastPickedInfo,mode:l,layers:h,viewports:n,x:i,y:o,z:C,pixelRatio:d});for(const A of T.values())A.layer&&S.push(A);if(!P.pickedColor)break}for(const E of k)E.restorePickingColors();return{result:S,emptyInfo:T.get(null)}}_pickVisibleObjects({layers:t,views:r,viewports:n,x:i,y:o,width:a=1,height:s=1,mode:l="query",maxObjects:u=null,onViewportActive:c,effects:f}){const h=this._getPickable(t);if(!h)return[];this._resizeBuffer();const d=Kh(this.gl),p=_3(this.gl,[i,o],!0),g=p.x,m=p.y+p.height,v=_3(this.gl,[i+a,o+s],!0),y=v.x+v.width,b=v.y,w={x:g,y:b,width:y-g,height:m-b},T=this._drawAndSample({layers:h,views:r,viewports:n,onViewportActive:c,deviceRect:w,cullRect:{x:i,y:o,width:a,height:s},effects:f,pass:"picking:".concat(l)}),S=GCt(T),k=new Map,E=Number.isFinite(u);for(let P=0;P<S.length&&!(E&&u&&k.size>=u);P++){const C=S[P];let A={color:C.pickedColor,layer:null,index:C.pickedObjectIndex,picked:!0,x:i,y:o,pixelRatio:d};A=GG({layer:C.pickedLayer,info:A,mode:l}),k.has(A.object)||k.set(A.object,A)}return Array.from(k.values())}_drawAndSample({layers:t,views:r,viewports:n,onViewportActive:i,deviceRect:o,cullRect:a,effects:s,pass:l},u=!1){const c=u?this.depthFBO:this.pickingFBO,{decodePickingColor:f}=this.pickLayersPass.render({layers:t,layerFilter:this.layerFilter,views:r,viewports:n,onViewportActive:i,pickingFBO:c,deviceRect:o,cullRect:a,effects:s,pass:l,pickZ:u}),{x:h,y:d,width:p,height:g}=o,m=new(u?Float32Array:Uint8Array)(p*g*4);return h2(c,{sourceX:h,sourceY:d,sourceWidth:p,sourceHeight:g,target:m}),{pickedColors:m,decodePickingColor:f}}_getPickingRect({deviceX:t,deviceY:r,deviceRadius:n,deviceWidth:i,deviceHeight:o}){const a=Math.max(0,t-n),s=Math.max(0,r-n),l=Math.min(i,t+n+1)-a,u=Math.min(o,r+n+1)-s;return l<=0||u<=0?null:{x:a,y:s,width:l,height:u}}}const KCt={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class ZCt{constructor(t){x(this,"el",null),x(this,"isVisible",!1);const r=t.parentElement;r&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,KCt),r.appendChild(this.el))}setTooltip(t,r,n){const i=this.el;if(!!i){if(typeof t=="string")i.innerText=t;else if(t)t.text&&(i.innerText=t.text),t.html&&(i.innerHTML=t.html),t.className&&(i.className=t.className),Object.assign(i.style,t.style);else{this.isVisible=!1,i.style.display="none";return}this.isVisible=!0,i.style.display="block",i.style.transform="translate(".concat(r,"px, ").concat(n,"px)")}}remove(){this.el&&(this.el.remove(),this.el=null)}}var wd={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(e){(function(t,r,n,i){var o=["","webkit","Moz","MS","ms","o"],a=r.createElement("div"),s="function",l=Math.round,u=Math.abs,c=Date.now;function f(N,B,G){return setTimeout(b(N,G),B)}function h(N,B,G){return Array.isArray(N)?(d(N,G[B],G),!0):!1}function d(N,B,G){var J;if(!!N)if(N.forEach)N.forEach(B,G);else if(N.length!==i)for(J=0;J<N.length;)B.call(G,N[J],J,N),J++;else for(J in N)N.hasOwnProperty(J)&&B.call(G,N[J],J,N)}function p(N,B,G){var J="DEPRECATED METHOD: "+B+`
`+G+` AT 
`;return function(){var ft=new Error("get-stack-trace"),Dt=ft&&ft.stack?ft.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",ye=t.console&&(t.console.warn||t.console.log);return ye&&ye.call(t.console,J,Dt),N.apply(this,arguments)}}var g;typeof Object.assign!="function"?g=function(B){if(B===i||B===null)throw new TypeError("Cannot convert undefined or null to object");for(var G=Object(B),J=1;J<arguments.length;J++){var ft=arguments[J];if(ft!==i&&ft!==null)for(var Dt in ft)ft.hasOwnProperty(Dt)&&(G[Dt]=ft[Dt])}return G}:g=Object.assign;var m=p(function(B,G,J){for(var ft=Object.keys(G),Dt=0;Dt<ft.length;)(!J||J&&B[ft[Dt]]===i)&&(B[ft[Dt]]=G[ft[Dt]]),Dt++;return B},"extend","Use `assign`."),v=p(function(B,G){return m(B,G,!0)},"merge","Use `assign`.");function y(N,B,G){var J=B.prototype,ft;ft=N.prototype=Object.create(J),ft.constructor=N,ft._super=J,G&&g(ft,G)}function b(N,B){return function(){return N.apply(B,arguments)}}function w(N,B){return typeof N==s?N.apply(B&&B[0]||i,B):N}function T(N,B){return N===i?B:N}function S(N,B,G){d(C(B),function(J){N.addEventListener(J,G,!1)})}function k(N,B,G){d(C(B),function(J){N.removeEventListener(J,G,!1)})}function E(N,B){for(;N;){if(N==B)return!0;N=N.parentNode}return!1}function P(N,B){return N.indexOf(B)>-1}function C(N){return N.trim().split(/\s+/g)}function A(N,B,G){if(N.indexOf&&!G)return N.indexOf(B);for(var J=0;J<N.length;){if(G&&N[J][G]==B||!G&&N[J]===B)return J;J++}return-1}function L(N){return Array.prototype.slice.call(N,0)}function R(N,B,G){for(var J=[],ft=[],Dt=0;Dt<N.length;){var ye=B?N[Dt][B]:N[Dt];A(ft,ye)<0&&J.push(N[Dt]),ft[Dt]=ye,Dt++}return G&&(B?J=J.sort(function(rn,On){return rn[B]>On[B]}):J=J.sort()),J}function D(N,B){for(var G,J,ft=B[0].toUpperCase()+B.slice(1),Dt=0;Dt<o.length;){if(G=o[Dt],J=G?G+ft:B,J in N)return J;Dt++}return i}var F=1;function z(){return F++}function Y(N){var B=N.ownerDocument||N;return B.defaultView||B.parentWindow||t}var K=/mobile|tablet|ip(ad|hone|od)|android/i,et="ontouchstart"in t,Tt=D(t,"PointerEvent")!==i,Ct=et&&K.test(navigator.userAgent),vt="touch",wt="pen",Kt="mouse",Z="kinect",it=25,tt=1,bt=2,kt=4,It=8,pt=1,mt=2,V=4,j=8,q=16,rt=mt|V,ot=j|q,yt=rt|ot,xt=["x","y"],ut=["clientX","clientY"];function ct(N,B){var G=this;this.manager=N,this.callback=B,this.element=N.element,this.target=N.options.inputTarget,this.domHandler=function(J){w(N.options.enable,[N])&&G.handler(J)},this.init()}ct.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(Y(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&k(this.element,this.evEl,this.domHandler),this.evTarget&&k(this.target,this.evTarget,this.domHandler),this.evWin&&k(Y(this.element),this.evWin,this.domHandler)}};function lt(N){var B,G=N.options.inputClass;return G?B=G:Tt?B=Hr:Ct?B=P0:et?B=Z2:B=qt,new B(N,Vt)}function Vt(N,B,G){var J=G.pointers.length,ft=G.changedPointers.length,Dt=B&tt&&J-ft===0,ye=B&(kt|It)&&J-ft===0;G.isFirst=!!Dt,G.isFinal=!!ye,Dt&&(N.session={}),G.eventType=B,Rt(N,G),N.emit("hammer.input",G),N.recognize(G),N.session.prevInput=G}function Rt(N,B){var G=N.session,J=B.pointers,ft=J.length;G.firstInput||(G.firstInput=ce(B)),ft>1&&!G.firstMultiple?G.firstMultiple=ce(B):ft===1&&(G.firstMultiple=!1);var Dt=G.firstInput,ye=G.firstMultiple,Xr=ye?ye.center:Dt.center,rn=B.center=we(J);B.timeStamp=c(),B.deltaTime=B.timeStamp-Dt.timeStamp,B.angle=st(Xr,rn),B.distance=Q(Xr,rn),Ut(G,B),B.offsetDirection=X(B.deltaX,B.deltaY);var On=H(B.deltaTime,B.deltaX,B.deltaY);B.overallVelocityX=On.x,B.overallVelocityY=On.y,B.overallVelocity=u(On.x)>u(On.y)?On.x:On.y,B.scale=ye?Zt(ye.pointers,J):1,B.rotation=ye?Ft(ye.pointers,J):0,B.maxPointers=G.prevInput?B.pointers.length>G.prevInput.maxPointers?B.pointers.length:G.prevInput.maxPointers:B.pointers.length,Jt(G,B);var Yo=N.element;E(B.srcEvent.target,Yo)&&(Yo=B.srcEvent.target),B.target=Yo}function Ut(N,B){var G=B.center,J=N.offsetDelta||{},ft=N.prevDelta||{},Dt=N.prevInput||{};(B.eventType===tt||Dt.eventType===kt)&&(ft=N.prevDelta={x:Dt.deltaX||0,y:Dt.deltaY||0},J=N.offsetDelta={x:G.x,y:G.y}),B.deltaX=ft.x+(G.x-J.x),B.deltaY=ft.y+(G.y-J.y)}function Jt(N,B){var G=N.lastInterval||B,J=B.timeStamp-G.timeStamp,ft,Dt,ye,Xr;if(B.eventType!=It&&(J>it||G.velocity===i)){var rn=B.deltaX-G.deltaX,On=B.deltaY-G.deltaY,Yo=H(J,rn,On);Dt=Yo.x,ye=Yo.y,ft=u(Yo.x)>u(Yo.y)?Yo.x:Yo.y,Xr=X(rn,On),N.lastInterval=B}else ft=G.velocity,Dt=G.velocityX,ye=G.velocityY,Xr=G.direction;B.velocity=ft,B.velocityX=Dt,B.velocityY=ye,B.direction=Xr}function ce(N){for(var B=[],G=0;G<N.pointers.length;)B[G]={clientX:l(N.pointers[G].clientX),clientY:l(N.pointers[G].clientY)},G++;return{timeStamp:c(),pointers:B,center:we(B),deltaX:N.deltaX,deltaY:N.deltaY}}function we(N){var B=N.length;if(B===1)return{x:l(N[0].clientX),y:l(N[0].clientY)};for(var G=0,J=0,ft=0;ft<B;)G+=N[ft].clientX,J+=N[ft].clientY,ft++;return{x:l(G/B),y:l(J/B)}}function H(N,B,G){return{x:B/N||0,y:G/N||0}}function X(N,B){return N===B?pt:u(N)>=u(B)?N<0?mt:V:B<0?j:q}function Q(N,B,G){G||(G=xt);var J=B[G[0]]-N[G[0]],ft=B[G[1]]-N[G[1]];return Math.sqrt(J*J+ft*ft)}function st(N,B,G){G||(G=xt);var J=B[G[0]]-N[G[0]],ft=B[G[1]]-N[G[1]];return Math.atan2(ft,J)*180/Math.PI}function Ft(N,B){return st(B[1],B[0],ut)+st(N[1],N[0],ut)}function Zt(N,B){return Q(B[0],B[1],ut)/Q(N[0],N[1],ut)}var ne={mousedown:tt,mousemove:bt,mouseup:kt},re="mousedown",Oe="mousemove mouseup";function qt(){this.evEl=re,this.evWin=Oe,this.pressed=!1,ct.apply(this,arguments)}y(qt,ct,{handler:function(B){var G=ne[B.type];G&tt&&B.button===0&&(this.pressed=!0),G&bt&&B.which!==1&&(G=kt),this.pressed&&(G&kt&&(this.pressed=!1),this.callback(this.manager,G,{pointers:[B],changedPointers:[B],pointerType:Kt,srcEvent:B}))}});var Wt={pointerdown:tt,pointermove:bt,pointerup:kt,pointercancel:It,pointerout:It},Qt={2:vt,3:wt,4:Kt,5:Z},ge="pointerdown",Se="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(ge="MSPointerDown",Se="MSPointerMove MSPointerUp MSPointerCancel");function Hr(){this.evEl=ge,this.evWin=Se,ct.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}y(Hr,ct,{handler:function(B){var G=this.store,J=!1,ft=B.type.toLowerCase().replace("ms",""),Dt=Wt[ft],ye=Qt[B.pointerType]||B.pointerType,Xr=ye==vt,rn=A(G,B.pointerId,"pointerId");Dt&tt&&(B.button===0||Xr)?rn<0&&(G.push(B),rn=G.length-1):Dt&(kt|It)&&(J=!0),!(rn<0)&&(G[rn]=B,this.callback(this.manager,Dt,{pointers:G,changedPointers:[B],pointerType:ye,srcEvent:B}),J&&G.splice(rn,1))}});var Fd={touchstart:tt,touchmove:bt,touchend:kt,touchcancel:It},K2="touchstart",cf="touchstart touchmove touchend touchcancel";function K4(){this.evTarget=K2,this.evWin=cf,this.started=!1,ct.apply(this,arguments)}y(K4,ct,{handler:function(B){var G=Fd[B.type];if(G===tt&&(this.started=!0),!!this.started){var J=jY.call(this,B,G);G&(kt|It)&&J[0].length-J[1].length===0&&(this.started=!1),this.callback(this.manager,G,{pointers:J[0],changedPointers:J[1],pointerType:vt,srcEvent:B})}}});function jY(N,B){var G=L(N.touches),J=L(N.changedTouches);return B&(kt|It)&&(G=R(G.concat(J),"identifier",!0)),[G,J]}var GY={touchstart:tt,touchmove:bt,touchend:kt,touchcancel:It},HY="touchstart touchmove touchend touchcancel";function P0(){this.evTarget=HY,this.targetIds={},ct.apply(this,arguments)}y(P0,ct,{handler:function(B){var G=GY[B.type],J=XY.call(this,B,G);!J||this.callback(this.manager,G,{pointers:J[0],changedPointers:J[1],pointerType:vt,srcEvent:B})}});function XY(N,B){var G=L(N.touches),J=this.targetIds;if(B&(tt|bt)&&G.length===1)return J[G[0].identifier]=!0,[G,G];var ft,Dt,ye=L(N.changedTouches),Xr=[],rn=this.target;if(Dt=G.filter(function(On){return E(On.target,rn)}),B===tt)for(ft=0;ft<Dt.length;)J[Dt[ft].identifier]=!0,ft++;for(ft=0;ft<ye.length;)J[ye[ft].identifier]&&Xr.push(ye[ft]),B&(kt|It)&&delete J[ye[ft].identifier],ft++;if(!!Xr.length)return[R(Dt.concat(Xr),"identifier",!0),Xr]}var YY=2500,Z4=25;function Z2(){ct.apply(this,arguments);var N=b(this.handler,this);this.touch=new P0(this.manager,N),this.mouse=new qt(this.manager,N),this.primaryTouch=null,this.lastTouches=[]}y(Z2,ct,{handler:function(B,G,J){var ft=J.pointerType==vt,Dt=J.pointerType==Kt;if(!(Dt&&J.sourceCapabilities&&J.sourceCapabilities.firesTouchEvents)){if(ft)KY.call(this,G,J);else if(Dt&&ZY.call(this,J))return;this.callback(B,G,J)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function KY(N,B){N&tt?(this.primaryTouch=B.changedPointers[0].identifier,q4.call(this,B)):N&(kt|It)&&q4.call(this,B)}function q4(N){var B=N.changedPointers[0];if(B.identifier===this.primaryTouch){var G={x:B.clientX,y:B.clientY};this.lastTouches.push(G);var J=this.lastTouches,ft=function(){var Dt=J.indexOf(G);Dt>-1&&J.splice(Dt,1)};setTimeout(ft,YY)}}function ZY(N){for(var B=N.srcEvent.clientX,G=N.srcEvent.clientY,J=0;J<this.lastTouches.length;J++){var ft=this.lastTouches[J],Dt=Math.abs(B-ft.x),ye=Math.abs(G-ft.y);if(Dt<=Z4&&ye<=Z4)return!0}return!1}var J4=D(a.style,"touchAction"),Q4=J4!==i,tM="compute",eM="auto",q2="manipulation",lu="none",$d="pan-x",Bd="pan-y",E0=JY();function J2(N,B){this.manager=N,this.set(B)}J2.prototype={set:function(N){N==tM&&(N=this.compute()),Q4&&this.manager.element.style&&E0[N]&&(this.manager.element.style[J4]=N),this.actions=N.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var N=[];return d(this.manager.recognizers,function(B){w(B.options.enable,[B])&&(N=N.concat(B.getTouchAction()))}),qY(N.join(" "))},preventDefaults:function(N){var B=N.srcEvent,G=N.offsetDirection;if(this.manager.session.prevented){B.preventDefault();return}var J=this.actions,ft=P(J,lu)&&!E0[lu],Dt=P(J,Bd)&&!E0[Bd],ye=P(J,$d)&&!E0[$d];if(ft){var Xr=N.pointers.length===1,rn=N.distance<2,On=N.deltaTime<250;if(Xr&&rn&&On)return}if(!(ye&&Dt)&&(ft||Dt&&G&rt||ye&&G&ot))return this.preventSrc(B)},preventSrc:function(N){this.manager.session.prevented=!0,N.preventDefault()}};function qY(N){if(P(N,lu))return lu;var B=P(N,$d),G=P(N,Bd);return B&&G?lu:B||G?B?$d:Bd:P(N,q2)?q2:eM}function JY(){if(!Q4)return!1;var N={},B=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(G){N[G]=B?t.CSS.supports("touch-action",G):!0}),N}var C0=1,Ci=2,ff=4,Ds=8,Ba=Ds,zd=16,Xo=32;function za(N){this.options=g({},this.defaults,N||{}),this.id=z(),this.manager=null,this.options.enable=T(this.options.enable,!0),this.state=C0,this.simultaneous={},this.requireFail=[]}za.prototype={defaults:{},set:function(N){return g(this.options,N),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(N){if(h(N,"recognizeWith",this))return this;var B=this.simultaneous;return N=A0(N,this),B[N.id]||(B[N.id]=N,N.recognizeWith(this)),this},dropRecognizeWith:function(N){return h(N,"dropRecognizeWith",this)?this:(N=A0(N,this),delete this.simultaneous[N.id],this)},requireFailure:function(N){if(h(N,"requireFailure",this))return this;var B=this.requireFail;return N=A0(N,this),A(B,N)===-1&&(B.push(N),N.requireFailure(this)),this},dropRequireFailure:function(N){if(h(N,"dropRequireFailure",this))return this;N=A0(N,this);var B=A(this.requireFail,N);return B>-1&&this.requireFail.splice(B,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(N){return!!this.simultaneous[N.id]},emit:function(N){var B=this,G=this.state;function J(ft){B.manager.emit(ft,N)}G<Ds&&J(B.options.event+rM(G)),J(B.options.event),N.additionalEvent&&J(N.additionalEvent),G>=Ds&&J(B.options.event+rM(G))},tryEmit:function(N){if(this.canEmit())return this.emit(N);this.state=Xo},canEmit:function(){for(var N=0;N<this.requireFail.length;){if(!(this.requireFail[N].state&(Xo|C0)))return!1;N++}return!0},recognize:function(N){var B=g({},N);if(!w(this.options.enable,[this,B])){this.reset(),this.state=Xo;return}this.state&(Ba|zd|Xo)&&(this.state=C0),this.state=this.process(B),this.state&(Ci|ff|Ds|zd)&&this.tryEmit(B)},process:function(N){},getTouchAction:function(){},reset:function(){}};function rM(N){return N&zd?"cancel":N&Ds?"end":N&ff?"move":N&Ci?"start":""}function nM(N){return N==q?"down":N==j?"up":N==mt?"left":N==V?"right":""}function A0(N,B){var G=B.manager;return G?G.get(N):N}function lo(){za.apply(this,arguments)}y(lo,za,{defaults:{pointers:1},attrTest:function(N){var B=this.options.pointers;return B===0||N.pointers.length===B},process:function(N){var B=this.state,G=N.eventType,J=B&(Ci|ff),ft=this.attrTest(N);return J&&(G&It||!ft)?B|zd:J||ft?G&kt?B|Ds:B&Ci?B|ff:Ci:Xo}});function x0(){lo.apply(this,arguments),this.pX=null,this.pY=null}y(x0,lo,{defaults:{event:"pan",threshold:10,pointers:1,direction:yt},getTouchAction:function(){var N=this.options.direction,B=[];return N&rt&&B.push(Bd),N&ot&&B.push($d),B},directionTest:function(N){var B=this.options,G=!0,J=N.distance,ft=N.direction,Dt=N.deltaX,ye=N.deltaY;return ft&B.direction||(B.direction&rt?(ft=Dt===0?pt:Dt<0?mt:V,G=Dt!=this.pX,J=Math.abs(N.deltaX)):(ft=ye===0?pt:ye<0?j:q,G=ye!=this.pY,J=Math.abs(N.deltaY))),N.direction=ft,G&&J>B.threshold&&ft&B.direction},attrTest:function(N){return lo.prototype.attrTest.call(this,N)&&(this.state&Ci||!(this.state&Ci)&&this.directionTest(N))},emit:function(N){this.pX=N.deltaX,this.pY=N.deltaY;var B=nM(N.direction);B&&(N.additionalEvent=this.options.event+B),this._super.emit.call(this,N)}});function Q2(){lo.apply(this,arguments)}y(Q2,lo,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[lu]},attrTest:function(N){return this._super.attrTest.call(this,N)&&(Math.abs(N.scale-1)>this.options.threshold||this.state&Ci)},emit:function(N){if(N.scale!==1){var B=N.scale<1?"in":"out";N.additionalEvent=this.options.event+B}this._super.emit.call(this,N)}});function tw(){za.apply(this,arguments),this._timer=null,this._input=null}y(tw,za,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[eM]},process:function(N){var B=this.options,G=N.pointers.length===B.pointers,J=N.distance<B.threshold,ft=N.deltaTime>B.time;if(this._input=N,!J||!G||N.eventType&(kt|It)&&!ft)this.reset();else if(N.eventType&tt)this.reset(),this._timer=f(function(){this.state=Ba,this.tryEmit()},B.time,this);else if(N.eventType&kt)return Ba;return Xo},reset:function(){clearTimeout(this._timer)},emit:function(N){this.state===Ba&&(N&&N.eventType&kt?this.manager.emit(this.options.event+"up",N):(this._input.timeStamp=c(),this.manager.emit(this.options.event,this._input)))}});function ew(){lo.apply(this,arguments)}y(ew,lo,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[lu]},attrTest:function(N){return this._super.attrTest.call(this,N)&&(Math.abs(N.rotation)>this.options.threshold||this.state&Ci)}});function rw(){lo.apply(this,arguments)}y(rw,lo,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:rt|ot,pointers:1},getTouchAction:function(){return x0.prototype.getTouchAction.call(this)},attrTest:function(N){var B=this.options.direction,G;return B&(rt|ot)?G=N.overallVelocity:B&rt?G=N.overallVelocityX:B&ot&&(G=N.overallVelocityY),this._super.attrTest.call(this,N)&&B&N.offsetDirection&&N.distance>this.options.threshold&&N.maxPointers==this.options.pointers&&u(G)>this.options.velocity&&N.eventType&kt},emit:function(N){var B=nM(N.offsetDirection);B&&this.manager.emit(this.options.event+B,N),this.manager.emit(this.options.event,N)}});function M0(){za.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}y(M0,za,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[q2]},process:function(N){var B=this.options,G=N.pointers.length===B.pointers,J=N.distance<B.threshold,ft=N.deltaTime<B.time;if(this.reset(),N.eventType&tt&&this.count===0)return this.failTimeout();if(J&&ft&&G){if(N.eventType!=kt)return this.failTimeout();var Dt=this.pTime?N.timeStamp-this.pTime<B.interval:!0,ye=!this.pCenter||Q(this.pCenter,N.center)<B.posThreshold;this.pTime=N.timeStamp,this.pCenter=N.center,!ye||!Dt?this.count=1:this.count+=1,this._input=N;var Xr=this.count%B.taps;if(Xr===0)return this.hasRequireFailures()?(this._timer=f(function(){this.state=Ba,this.tryEmit()},B.interval,this),Ci):Ba}return Xo},failTimeout:function(){return this._timer=f(function(){this.state=Xo},this.options.interval,this),Xo},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ba&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Va(N,B){return B=B||{},B.recognizers=T(B.recognizers,Va.defaults.preset),new nw(N,B)}Va.VERSION="2.0.7",Va.defaults={domEvents:!1,touchAction:tM,enable:!0,inputTarget:null,inputClass:null,preset:[[ew,{enable:!1}],[Q2,{enable:!1},["rotate"]],[rw,{direction:rt}],[x0,{direction:rt},["swipe"]],[M0],[M0,{event:"doubletap",taps:2},["tap"]],[tw]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var QY=1,iM=2;function nw(N,B){this.options=g({},Va.defaults,B||{}),this.options.inputTarget=this.options.inputTarget||N,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=N,this.input=lt(this),this.touchAction=new J2(this,this.options.touchAction),oM(this,!0),d(this.options.recognizers,function(G){var J=this.add(new G[0](G[1]));G[2]&&J.recognizeWith(G[2]),G[3]&&J.requireFailure(G[3])},this)}nw.prototype={set:function(N){return g(this.options,N),N.touchAction&&this.touchAction.update(),N.inputTarget&&(this.input.destroy(),this.input.target=N.inputTarget,this.input.init()),this},stop:function(N){this.session.stopped=N?iM:QY},recognize:function(N){var B=this.session;if(!B.stopped){this.touchAction.preventDefaults(N);var G,J=this.recognizers,ft=B.curRecognizer;(!ft||ft&&ft.state&Ba)&&(ft=B.curRecognizer=null);for(var Dt=0;Dt<J.length;)G=J[Dt],B.stopped!==iM&&(!ft||G==ft||G.canRecognizeWith(ft))?G.recognize(N):G.reset(),!ft&&G.state&(Ci|ff|Ds)&&(ft=B.curRecognizer=G),Dt++}},get:function(N){if(N instanceof za)return N;for(var B=this.recognizers,G=0;G<B.length;G++)if(B[G].options.event==N)return B[G];return null},add:function(N){if(h(N,"add",this))return this;var B=this.get(N.options.event);return B&&this.remove(B),this.recognizers.push(N),N.manager=this,this.touchAction.update(),N},remove:function(N){if(h(N,"remove",this))return this;if(N=this.get(N),N){var B=this.recognizers,G=A(B,N);G!==-1&&(B.splice(G,1),this.touchAction.update())}return this},on:function(N,B){if(N!==i&&B!==i){var G=this.handlers;return d(C(N),function(J){G[J]=G[J]||[],G[J].push(B)}),this}},off:function(N,B){if(N!==i){var G=this.handlers;return d(C(N),function(J){B?G[J]&&G[J].splice(A(G[J],B),1):delete G[J]}),this}},emit:function(N,B){this.options.domEvents&&tK(N,B);var G=this.handlers[N]&&this.handlers[N].slice();if(!(!G||!G.length)){B.type=N,B.preventDefault=function(){B.srcEvent.preventDefault()};for(var J=0;J<G.length;)G[J](B),J++}},destroy:function(){this.element&&oM(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function oM(N,B){var G=N.element;if(!!G.style){var J;d(N.options.cssProps,function(ft,Dt){J=D(G.style,Dt),B?(N.oldCssProps[J]=G.style[J],G.style[J]=ft):G.style[J]=N.oldCssProps[J]||""}),B||(N.oldCssProps={})}}function tK(N,B){var G=r.createEvent("Event");G.initEvent(N,!0,!0),G.gesture=B,B.target.dispatchEvent(G)}g(Va,{INPUT_START:tt,INPUT_MOVE:bt,INPUT_END:kt,INPUT_CANCEL:It,STATE_POSSIBLE:C0,STATE_BEGAN:Ci,STATE_CHANGED:ff,STATE_ENDED:Ds,STATE_RECOGNIZED:Ba,STATE_CANCELLED:zd,STATE_FAILED:Xo,DIRECTION_NONE:pt,DIRECTION_LEFT:mt,DIRECTION_RIGHT:V,DIRECTION_UP:j,DIRECTION_DOWN:q,DIRECTION_HORIZONTAL:rt,DIRECTION_VERTICAL:ot,DIRECTION_ALL:yt,Manager:nw,Input:ct,TouchAction:J2,TouchInput:P0,MouseInput:qt,PointerEventInput:Hr,TouchMouseInput:Z2,SingleTouchInput:K4,Recognizer:za,AttrRecognizer:lo,Tap:M0,Pan:x0,Swipe:rw,Pinch:Q2,Rotate:ew,Press:tw,on:S,off:k,each:d,merge:v,extend:m,assign:g,inherit:y,bindFn:b,prefixed:D});var eK=typeof t<"u"?t:typeof self<"u"?self:{};eK.Hammer=Va,typeof i=="function"&&i.amd?i(function(){return Va}):e.exports?e.exports=Va:t[n]=Va})(window,document,"Hammer")})(wd);const qCt=wd.exports,ea=rK({__proto__:null,default:qCt},[wd.exports]),HG=1,XG=2,TE=4,JCt={mousedown:HG,mousemove:XG,mouseup:TE};function QCt(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return!0;return!1}function tAt(e){const t=e.prototype.handler;e.prototype.handler=function(n){const i=this.store;n.button>0&&n.type==="pointerdown"&&(QCt(i,o=>o.pointerId===n.pointerId)||i.push(n)),t.call(this,n)}}function eAt(e){e.prototype.handler=function(r){let n=JCt[r.type];n&HG&&r.button>=0&&(this.pressed=!0),n&XG&&r.which===0&&(n=TE),this.pressed&&(n&TE&&(this.pressed=!1),this.callback(this.manager,n,{pointers:[r],changedPointers:[r],pointerType:"mouse",srcEvent:r}))}}tAt(wd.exports.PointerEventInput);eAt(wd.exports.MouseInput);const rAt=wd.exports.Manager;class y2{constructor(t,r,n){this.element=t,this.callback=r,this.options={enable:!0,...n}}}const nAt=ea?[[ea.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[ea.Rotate,{enable:!1}],[ea.Pinch,{enable:!1}],[ea.Swipe,{enable:!1}],[ea.Pan,{threshold:0,enable:!1}],[ea.Press,{enable:!1}],[ea.Tap,{event:"doubletap",taps:2,enable:!1}],[ea.Tap,{event:"anytap",enable:!1}],[ea.Tap,{enable:!1}]]:null,MD={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},iAt={doubletap:["tap"]},oAt={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},Gx={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},aAt={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},ID={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},sAt=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",dh=typeof window<"u"?window:global;let kE=!1;try{const e={get passive(){return kE=!0,!0}};dh.addEventListener("test",null,e),dh.removeEventListener("test",null)}catch{kE=!1}const lAt=sAt.indexOf("firefox")!==-1,{WHEEL_EVENTS:uAt}=Gx,LD="wheel",OD=4.000244140625,cAt=40,fAt=.25;class hAt extends y2{constructor(t,r,n){super(t,r,n),this.handleEvent=i=>{if(!this.options.enable)return;let o=i.deltaY;dh.WheelEvent&&(lAt&&i.deltaMode===dh.WheelEvent.DOM_DELTA_PIXEL&&(o/=dh.devicePixelRatio),i.deltaMode===dh.WheelEvent.DOM_DELTA_LINE&&(o*=cAt)),o!==0&&o%OD===0&&(o=Math.floor(o/OD)),i.shiftKey&&o&&(o=o*fAt),this.callback({type:LD,center:{x:i.clientX,y:i.clientY},delta:-o,srcEvent:i,pointerType:"mouse",target:i.target})},this.events=(this.options.events||[]).concat(uAt),this.events.forEach(i=>t.addEventListener(i,this.handleEvent,kE?{passive:!1}:!1))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,r){t===LD&&(this.options.enable=r)}}const{MOUSE_EVENTS:dAt}=Gx,RD="pointermove",DD="pointerover",ND="pointerout",FD="pointerenter",$D="pointerleave";class pAt extends y2{constructor(t,r,n){super(t,r,n),this.handleEvent=o=>{this.handleOverEvent(o),this.handleOutEvent(o),this.handleEnterEvent(o),this.handleLeaveEvent(o),this.handleMoveEvent(o)},this.pressed=!1;const{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,this.events=(this.options.events||[]).concat(dAt),this.events.forEach(o=>t.addEventListener(o,this.handleEvent))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,r){t===RD&&(this.enableMoveEvent=r),t===DD&&(this.enableOverEvent=r),t===ND&&(this.enableOutEvent=r),t===FD&&(this.enableEnterEvent=r),t===$D&&(this.enableLeaveEvent=r)}handleOverEvent(t){this.enableOverEvent&&t.type==="mouseover"&&this._emit(DD,t)}handleOutEvent(t){this.enableOutEvent&&t.type==="mouseout"&&this._emit(ND,t)}handleEnterEvent(t){this.enableEnterEvent&&t.type==="mouseenter"&&this._emit(FD,t)}handleLeaveEvent(t){this.enableLeaveEvent&&t.type==="mouseleave"&&this._emit($D,t)}handleMoveEvent(t){if(this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":t.which===0&&(this.pressed=!1),this.pressed||this._emit(RD,t);break;case"mouseup":this.pressed=!1;break}}_emit(t,r){this.callback({type:t,center:{x:r.clientX,y:r.clientY},srcEvent:r,pointerType:"mouse",target:r.target})}}const{KEY_EVENTS:gAt}=Gx,BD="keydown",zD="keyup";class vAt extends y2{constructor(t,r,n){super(t,r,n),this.handleEvent=i=>{const o=i.target||i.srcElement;o.tagName==="INPUT"&&o.type==="text"||o.tagName==="TEXTAREA"||(this.enableDownEvent&&i.type==="keydown"&&this.callback({type:BD,srcEvent:i,key:i.key,target:i.target}),this.enableUpEvent&&i.type==="keyup"&&this.callback({type:zD,srcEvent:i,key:i.key,target:i.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(gAt),t.tabIndex=this.options.tabIndex||0,t.style.outline="none",this.events.forEach(i=>t.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,r){t===BD&&(this.enableDownEvent=r),t===zD&&(this.enableUpEvent=r)}}const VD="contextmenu";class mAt extends y2{constructor(t,r,n){super(t,r,n),this.handleEvent=i=>{!this.options.enable||this.callback({type:VD,center:{x:i.clientX,y:i.clientY},srcEvent:i,pointerType:"mouse",target:i.target})},t.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(t,r){t===VD&&(this.options.enable=r)}}const PE=1,Z_=2,EE=4,yAt={pointerdown:PE,pointermove:Z_,pointerup:EE,mousedown:PE,mousemove:Z_,mouseup:EE},_At=1,bAt=2,wAt=3,SAt=0,TAt=1,kAt=2,PAt=1,EAt=2,CAt=4;function AAt(e){const t=yAt[e.srcEvent.type];if(!t)return null;const{buttons:r,button:n,which:i}=e.srcEvent;let o=!1,a=!1,s=!1;return t===EE||t===Z_&&!Number.isFinite(r)?(o=i===_At,a=i===bAt,s=i===wAt):t===Z_?(o=Boolean(r&PAt),a=Boolean(r&CAt),s=Boolean(r&EAt)):t===PE&&(o=n===SAt,a=n===TAt,s=n===kAt),{leftButton:o,middleButton:a,rightButton:s}}function xAt(e,t){const r=e.center;if(!r)return null;const n=t.getBoundingClientRect(),i=n.width/t.offsetWidth||1,o=n.height/t.offsetHeight||1,a={x:(r.x-n.left-t.clientLeft)/i,y:(r.y-n.top-t.clientTop)/o};return{center:r,offsetCenter:a}}const N3={srcElement:"root",priority:0};class MAt{constructor(t){this.handleEvent=r=>{if(this.isEmpty())return;const n=this._normalizeEvent(r);let i=r.srcEvent.target;for(;i&&i!==n.rootElement;){if(this._emit(n,i),n.handled)return;i=i.parentNode}this._emit(n,"root")},this.eventManager=t,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(t,r,n,i=!1,o=!1){const{handlers:a,handlersByElement:s}=this;let l=N3;typeof n=="string"||n&&n.addEventListener?l={...N3,srcElement:n}:n&&(l={...N3,...n});let u=s.get(l.srcElement);u||(u=[],s.set(l.srcElement,u));const c={type:t,handler:r,srcElement:l.srcElement,priority:l.priority};i&&(c.once=!0),o&&(c.passive=!0),a.push(c),this._active=this._active||!c.passive;let f=u.length-1;for(;f>=0&&!(u[f].priority>=c.priority);)f--;u.splice(f+1,0,c)}remove(t,r){const{handlers:n,handlersByElement:i}=this;for(let o=n.length-1;o>=0;o--){const a=n[o];if(a.type===t&&a.handler===r){n.splice(o,1);const s=i.get(a.srcElement);s.splice(s.indexOf(a),1),s.length===0&&i.delete(a.srcElement)}}this._active=n.some(o=>!o.passive)}_emit(t,r){const n=this.handlersByElement.get(r);if(n){let i=!1;const o=()=>{t.handled=!0},a=()=>{t.handled=!0,i=!0},s=[];for(let l=0;l<n.length;l++){const{type:u,handler:c,once:f}=n[l];if(c({...t,type:u,stopPropagation:o,stopImmediatePropagation:a}),f&&s.push(n[l]),i)break}for(let l=0;l<s.length;l++){const{type:u,handler:c}=s[l];this.remove(u,c)}}}_normalizeEvent(t){const r=this.eventManager.getElement();return{...t,...AAt(t),...xAt(t,r),preventDefault:()=>{t.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:r}}}const IAt={events:null,recognizers:null,recognizerOptions:{},Manager:rAt,touchAction:"none",tabIndex:0};class LAt{constructor(t=null,r){this._onBasicInput=i=>{const{srcEvent:o}=i,a=oAt[o.type];a&&this.manager.emit(a,i)},this._onOtherEvent=i=>{this.manager.emit(i.type,i)},this.options={...IAt,...r},this.events=new Map,this.setElement(t);const{events:n}=this.options;n&&this.on(n)}getElement(){return this.element}setElement(t){if(this.element&&this.destroy(),this.element=t,!t)return;const{options:r}=this,n=r.Manager;this.manager=new n(t,{touchAction:r.touchAction,recognizers:r.recognizers||nAt}).on("hammer.input",this._onBasicInput),r.recognizers||Object.keys(MD).forEach(i=>{const o=this.manager.get(i);o&&MD[i].forEach(a=>{o.recognizeWith(a)})});for(const i in r.recognizerOptions){const o=this.manager.get(i);if(o){const a=r.recognizerOptions[i];delete a.enable,o.set(a)}}this.wheelInput=new hAt(t,this._onOtherEvent,{enable:!1}),this.moveInput=new pAt(t,this._onOtherEvent,{enable:!1}),this.keyInput=new vAt(t,this._onOtherEvent,{enable:!1,tabIndex:r.tabIndex}),this.contextmenuInput=new mAt(t,this._onOtherEvent,{enable:!1});for(const[i,o]of this.events)o.isEmpty()||(this._toggleRecognizer(o.recognizerName,!0),this.manager.on(i,o.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(t,r,n){this._addEventHandler(t,r,n,!1)}once(t,r,n){this._addEventHandler(t,r,n,!0)}watch(t,r,n){this._addEventHandler(t,r,n,!1,!0)}off(t,r){this._removeEventHandler(t,r)}_toggleRecognizer(t,r){const{manager:n}=this;if(!n)return;const i=n.get(t);if(i&&i.options.enable!==r){i.set({enable:r});const o=iAt[t];o&&!this.options.recognizers&&o.forEach(a=>{const s=n.get(a);r?(s.requireFailure(t),i.dropRequireFailure(a)):s.dropRequireFailure(t)})}this.wheelInput.enableEventType(t,r),this.moveInput.enableEventType(t,r),this.keyInput.enableEventType(t,r),this.contextmenuInput.enableEventType(t,r)}_addEventHandler(t,r,n,i,o){if(typeof t!="string"){n=r;for(const c in t)this._addEventHandler(c,t[c],n,i,o);return}const{manager:a,events:s}=this,l=ID[t]||t;let u=s.get(l);u||(u=new MAt(this),s.set(l,u),u.recognizerName=aAt[l]||l,a&&a.on(l,u.handleEvent)),u.add(t,r,n,i,o),u.isEmpty()||this._toggleRecognizer(u.recognizerName,!0)}_removeEventHandler(t,r){if(typeof t!="string"){for(const a in t)this._removeEventHandler(a,t[a]);return}const{events:n}=this,i=ID[t]||t,o=n.get(i);if(!!o&&(o.remove(t,r),o.isEmpty())){const{recognizerName:a}=o;let s=!1;for(const l of n.values())if(l.recognizerName===a&&!l.isEmpty()){s=!0;break}s||this._toggleRecognizer(a,!1)}}}function $u(){}const OAt=({isDragging:e})=>e?"grabbing":"grab",YG={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:$u,onResize:$u,onViewStateChange:$u,onInteractionStateChange:$u,onBeforeRender:$u,onAfterRender:$u,onLoad:$u,onError:e=>de.error(e.message)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:OAt,getTooltip:null,debug:!1,drawPickingColors:!1};class _2{constructor(t){x(this,"props",void 0),x(this,"width",0),x(this,"height",0),x(this,"userData",{}),x(this,"canvas",null),x(this,"viewManager",null),x(this,"layerManager",null),x(this,"effectManager",null),x(this,"deckRenderer",null),x(this,"deckPicker",null),x(this,"eventManager",null),x(this,"tooltip",null),x(this,"metrics",void 0),x(this,"animationLoop",void 0),x(this,"stats",void 0),x(this,"viewState",void 0),x(this,"cursorState",void 0),x(this,"_needsRedraw",void 0),x(this,"_pickRequest",void 0),x(this,"_lastPointerDownInfo",null),x(this,"_metricsCounter",void 0),x(this,"_onPointerMove",r=>{const{_pickRequest:n}=this;if(r.type==="pointerleave")n.x=-1,n.y=-1,n.radius=0;else{if(r.leftButton||r.rightButton)return;{const i=r.offsetCenter;if(!i)return;n.x=i.x,n.y=i.y,n.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:n.x,y:n.y}),n.event=r}),x(this,"_onEvent",r=>{const n=vD[r.type],i=r.offsetCenter;if(!n||!i||!this.layerManager)return;const o=this.layerManager.getLayers(),a=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:o,viewports:this.getViewports(i)},this._lastPointerDownInfo),{layer:s}=a,l=s&&(s[n.handler]||s.props[n.handler]),u=this.props[n.handler];let c=!1;l&&(c=l.call(s,a,r)),!c&&u&&u(a,r)}),x(this,"_onPointerDown",r=>{const n=r.offsetCenter,i=this._pick("pickObject","pickObject Time",{x:n.x,y:n.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=i.result[0]||i.emptyInfo}),this.props={...YG,...t},t=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},t.viewState&&t.initialViewState&&de.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),gj()==="IE"&&de.warn("IE 11 is not supported")(),this.viewState=t.initialViewState,t.gl||typeof document<"u"&&(this.canvas=this._createCanvas(t)),this.animationLoop=this._createAnimationLoop(t),this.stats=new l2({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(t),t._typedArrayManagerProps&&Qh.setOptions(t._typedArrayManagerProps),this.animationLoop.start()}finalize(){var t,r,n,i,o,a,s;if(this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,(t=this.layerManager)===null||t===void 0||t.finalize(),this.layerManager=null,(r=this.viewManager)===null||r===void 0||r.finalize(),this.viewManager=null,(n=this.effectManager)===null||n===void 0||n.finalize(),this.effectManager=null,(i=this.deckRenderer)===null||i===void 0||i.finalize(),this.deckRenderer=null,(o=this.deckPicker)===null||o===void 0||o.finalize(),this.deckPicker=null,(a=this.eventManager)===null||a===void 0||a.destroy(),this.eventManager=null,(s=this.tooltip)===null||s===void 0||s.remove(),this.tooltip=null,!this.props.canvas&&!this.props.gl&&this.canvas){var l;(l=this.canvas.parentElement)===null||l===void 0||l.removeChild(this.canvas),this.canvas=null}}setProps(t){this.stats.get("setProps Time").timeStart(),"onLayerHover"in t&&de.removed("onLayerHover","onHover")(),"onLayerClick"in t&&de.removed("onLayerClick","onClick")(),t.initialViewState&&!bd(this.props.initialViewState,t.initialViewState)&&(this.viewState=t.initialViewState),Object.assign(this.props,t),this._setCanvasSize(this.props);const r=Object.create(this.props);Object.assign(r,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(r),this.layerManager&&(this.viewManager.setProps(r),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(r),this.effectManager.setProps(r),this.deckRenderer.setProps(r),this.deckPicker.setProps(r)),this.stats.get("setProps Time").timeEnd()}needsRedraw(t={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let r=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);const n=this.viewManager.needsRedraw(t),i=this.layerManager.needsRedraw(t),o=this.effectManager.needsRedraw(t),a=this.deckRenderer.needsRedraw(t);return r=r||n||i||o||a,r}redraw(t){if(!this.layerManager)return;let r=this.needsRedraw({clearRedrawFlags:!0});r=t||r,r&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(r):this._drawLayers(r))}get isInitialized(){return this.viewManager!==null}getViews(){return Zr(this.viewManager),this.viewManager.views}getViewports(t){return Zr(this.viewManager),this.viewManager.getViewports(t)}pickObject(t){const r=this._pick("pickObject","pickObject Time",t).result;return r.length?r[0]:null}pickMultipleObjects(t){return t.depth=t.depth||10,this._pick("pickObject","pickMultipleObjects Time",t).result}pickObjects(t){return this._pick("pickObjects","pickObjects Time",t)}_addResources(t,r=!1){for(const n in t)this.layerManager.resourceManager.add({resourceId:n,data:t[n],forceUpdate:r})}_removeResources(t){for(const r of t)this.layerManager.resourceManager.remove(r)}_pick(t,r,n){Zr(this.deckPicker);const{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(r).timeStart();const o=this.deckPicker[t]({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...n});return i.get(r).timeEnd(),o}_createCanvas(t){let r=t.canvas;return typeof r=="string"&&(r=document.getElementById(r),Zr(r)),r||(r=document.createElement("canvas"),r.id=t.id||"deckgl-overlay",(t.parent||document.body).appendChild(r)),Object.assign(r.style,t.style),r}_setCanvasSize(t){if(!this.canvas)return;const{width:r,height:n}=t;if(r||r===0){const o=Number.isFinite(r)?"".concat(r,"px"):r;this.canvas.style.width=o}if(n||n===0){var i;const o=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.position=((i=t.style)===null||i===void 0?void 0:i.position)||"absolute",this.canvas.style.height=o}}_updateCanvasSize(){const{canvas:t}=this;if(!t)return;const r=t.clientWidth||t.width,n=t.clientHeight||t.height;if(r!==this.width||n!==this.height){var i;this.width=r,this.height=n,(i=this.viewManager)===null||i===void 0||i.setProps({width:r,height:n}),this.props.onResize({width:r,height:n})}}_createAnimationLoop(t){const{width:r,height:n,gl:i,glOptions:o,debug:a,onError:s,onBeforeRender:l,onAfterRender:u,useDevicePixels:c}=t;return new q3t({width:r,height:n,useDevicePixels:c,autoResizeViewport:!1,gl:i,onCreateContext:f=>Dj({...o,...f,canvas:this.canvas,debug:a,onContextLost:()=>this._onContextLost()}),onInitialize:f=>this._setGLContext(f.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:l,onAfterRender:u,onError:s})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let t=this.props.views||[new UG({id:"default-view"})];return t=Array.isArray(t)?t:[t],t.length&&this.props.controller&&(t[0].props.controller=this.props.controller),t}_onContextLost(){const{onError:t}=this.props;this.animationLoop&&t&&t(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:t}=this;if(t.event){const{result:n,emptyInfo:i}=this._pick("pickObject","pickObject Time",t);this.cursorState.isHovering=n.length>0;let o=i,a=!1;for(const s of n){var r;o=s,a=((r=s.layer)===null||r===void 0?void 0:r.onHover(s,t.event))||a}if(!a&&this.props.onHover&&this.props.onHover(o,t.event),this.props.getTooltip&&this.tooltip){const s=this.props.getTooltip(o);this.tooltip.setTooltip(s,o.x,o.y)}t.event=null}}_updateCursor(){const t=this.props.parent||this.canvas;t&&(t.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(t){if(this.layerManager)return;this.canvas||(this.canvas=t.canvas,Mx(t,{enable:!0,copyState:!0})),this.tooltip=new ZCt(this.canvas),ws(t,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(t);const r=new PG;r.play(),this.animationLoop.attachTimeline(r),this.eventManager=new LAt(this.props.parent||t.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const i in vD)this.eventManager.on(i,this._onEvent);this.viewManager=new dCt({timeline:r,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const n=this.viewManager.getViewports()[0];this.layerManager=new hCt(t,{deck:this,stats:this.stats,viewport:n,timeline:r}),this.effectManager=new FCt,this.deckRenderer=new UCt(t),this.deckPicker=new YCt(t),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(t,r){const{gl:n}=this.layerManager.context;ws(n,this.props.parameters),this.props.onBeforeRender({gl:n}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:t,effects:this.effectManager.getEffects(),...r}),this.props.onAfterRender({gl:n})}_onRenderFrame(t){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),de.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(t){const r=this.props.onViewStateChange(t)||t.viewState;this.viewState&&(this.viewState={...this.viewState,[t.viewId]:r},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(t){this.cursorState.isDragging=t.isDragging||!1,this.props.onInteractionStateChange(t)}_getFrameStats(){const{stats:t}=this;t.get("frameRate").timeEnd(),t.get("frameRate").timeStart();const r=this.animationLoop.stats;t.get("GPU Time").addTime(r.get("GPU Time").lastTiming),t.get("CPU Time").addTime(r.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:t,stats:r}=this;t.fps=r.get("frameRate").getHz(),t.setPropsTime=r.get("setProps Time").time,t.updateAttributesTime=r.get("Update Attributes").time,t.framesRedrawn=r.get("Redraw Count").count,t.pickTime=r.get("pickObject Time").time+r.get("pickMultipleObjects Time").time+r.get("pickObjects Time").time,t.pickCount=r.get("Pick Count").count,t.gpuTime=r.get("GPU Time").time,t.cpuTime=r.get("CPU Time").time,t.gpuTimePerFrame=r.get("GPU Time").getAverageTime(),t.cpuTimePerFrame=r.get("CPU Time").getAverageTime();const n=rc.get("Memory Usage");t.bufferMemory=n.get("Buffer Memory").count,t.textureMemory=n.get("Texture Memory").count,t.renderbufferMemory=n.get("Renderbuffer Memory").count,t.gpuMemory=n.get("GPU Memory").count}}x(_2,"defaultProps",YG);x(_2,"VERSION",iwt.VERSION);class F3{constructor(t,r){x(this,"opts",void 0),x(this,"source",void 0),this.opts=r,this.source=t}get value(){return this.source.value}getValue(){const t=this.source.getBuffer(),r=this.getAccessor();if(t)return[t,r];const{value:n}=this.source,{size:i}=r;let o=n;if(n&&n.length!==i){o=new Float32Array(i);const a=r.elementOffset||0;for(let s=0;s<i;++s)o[s]=n[a+s]}return o}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function RAt(e){switch(e){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}function Ly(e){return e.stride||e.size*e.bytesPerElement}function KG(e,t){t.offset&&de.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const r=Ly(e),n=t.vertexOffset!==void 0?t.vertexOffset:e.vertexOffset||0,i=t.elementOffset||0,o=n*r+i*e.bytesPerElement+(e.offset||0);return{...t,offset:o,stride:r}}function DAt(e,t){const r=KG(e,t);return{high:r,low:{...r,offset:r.offset+e.size*4}}}class NAt{constructor(t,r,n){x(this,"gl",void 0),x(this,"id",void 0),x(this,"size",void 0),x(this,"settings",void 0),x(this,"value",void 0),x(this,"doublePrecision",void 0),x(this,"_buffer",void 0),x(this,"state",void 0),this.gl=t,this.id=r.id||"",this.size=r.size||1;const i=r.logicalType||r.type,o=i===5130;let{defaultValue:a}=r;a=Number.isFinite(a)?[a]:a||new Array(this.size).fill(0);let s;o?s=5126:!i&&r.isIndexed?s=t&&ASt(t,ur.ELEMENT_INDEX_UINT32)?5125:5123:s=i||5126;let l=RAt(i||s||5126);this.doublePrecision=o,o&&r.fp64===!1&&(l=Float32Array),this.value=null,this.settings={...r,defaultType:l,defaultValue:a,logicalType:i,type:s,size:this.size,bytesPerElement:l.BYTES_PER_ELEMENT},this.state={...n,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:t,type:r}=this.settings;this._buffer=new Ye(this.gl,{id:this.id,target:t?34963:34962,accessor:{type:r}})}return this._buffer}get byteOffset(){const t=this.getAccessor();return t.vertexOffset?t.vertexOffset*Ly(t):0}get numInstances(){return this.state.numInstances}set numInstances(t){this.state.numInstances=t}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),Qh.release(this.state.allocatedValue)}getShaderAttributes(t,r){if(this.doublePrecision){const n={},i=this.value instanceof Float64Array,o=DAt(this.getAccessor(),r||{});return n[t]=new F3(this,o.high),n["".concat(t,"64Low")]=i?new F3(this,o.low):new Float32Array(this.size),n}if(r){const n=KG(this.getAccessor(),r);return{[t]:new F3(this,n)}}return{[t]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let t=null;if(this.state.constant&&this.value){const r=Array.from(this.value);t=[r,r]}else{const{value:r,numInstances:n,size:i}=this,o=n*i;if(r&&o&&r.length>=o){const a=new Array(i).fill(1/0),s=new Array(i).fill(-1/0);for(let l=0;l<o;)for(let u=0;u<i;u++){const c=r[l++];c<a[u]&&(a[u]=c),c>s[u]&&(s[u]=c)}t=[a,s]}}return this.state.bounds=t,t}setData(t){const{state:r}=this;let n;ArrayBuffer.isView(t)?n={value:t}:t instanceof Ye?n={buffer:t}:n=t;const i={...this.settings,...n};if(r.bufferAccessor=i,r.bounds=null,n.constant){let o=n.value;if(o=this._normalizeValue(o,[],0),this.settings.normalized&&(o=this.normalizeConstant(o)),!(!r.constant||!this._areValuesEqual(o,this.value)))return!1;r.externalBuffer=null,r.constant=!0,this.value=o}else if(n.buffer){const o=n.buffer;r.externalBuffer=o,r.constant=!1,this.value=n.value||null;const a=n.value instanceof Float64Array;i.type=n.type||o.accessor.type,i.bytesPerElement=o.accessor.BYTES_PER_ELEMENT*(a?2:1),i.stride=Ly(i)}else if(n.value){this._checkExternalBuffer(n);let o=n.value;r.externalBuffer=null,r.constant=!1,this.value=o,i.bytesPerElement=o.BYTES_PER_ELEMENT,i.stride=Ly(i);const{buffer:a,byteOffset:s}=this;this.doublePrecision&&o instanceof Float64Array&&(o=R3(o,i));const l=o.byteLength+s+i.stride*2;a.byteLength<l&&a.reallocate(l),a.setAccessor(null),a.subData({data:o,offset:s}),i.type=n.type||a.accessor.type}return!0}updateSubBuffer(t={}){this.state.bounds=null;const r=this.value,{startOffset:n=0,endOffset:i}=t;this.buffer.subData({data:this.doublePrecision&&r instanceof Float64Array?R3(r,{size:this.size,startIndex:n,endIndex:i}):r.subarray(n,i),offset:n*r.BYTES_PER_ELEMENT+this.byteOffset})}allocate(t,r=!1){const{state:n}=this,i=n.allocatedValue,o=Qh.allocate(i,t+1,{size:this.size,type:this.settings.defaultType,copy:r});this.value=o;const{buffer:a,byteOffset:s}=this;return a.byteLength<o.byteLength+s&&(a.reallocate(o.byteLength+s),r&&i&&a.subData({data:i instanceof Float64Array?R3(i,this):i,offset:s})),n.allocatedValue=o,n.constant=!1,n.externalBuffer=null,n.bufferAccessor=this.settings,!0}_checkExternalBuffer(t){const{value:r}=t;if(!ArrayBuffer.isView(r))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const n=this.settings.defaultType;let i=!1;if(this.doublePrecision&&(i=r.BYTES_PER_ELEMENT<4),i)throw new Error("Attribute ".concat(this.id," does not support ").concat(r.constructor.name));!(r instanceof n)&&this.settings.normalized&&!("normalized"in t)&&de.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(t){switch(this.settings.type){case 5120:return new Float32Array(t).map(r=>(r+128)/255*2-1);case 5122:return new Float32Array(t).map(r=>(r+32768)/65535*2-1);case 5121:return new Float32Array(t).map(r=>r/255);case 5123:return new Float32Array(t).map(r=>r/65535);default:return t}}_normalizeValue(t,r,n){const{defaultValue:i,size:o}=this.settings;if(Number.isFinite(t))return r[n]=t,r;if(!t)return r[n]=i[0],r;switch(o){case 4:r[n+3]=Number.isFinite(t[3])?t[3]:i[3];case 3:r[n+2]=Number.isFinite(t[2])?t[2]:i[2];case 2:r[n+1]=Number.isFinite(t[1])?t[1]:i[1];case 1:r[n+0]=Number.isFinite(t[0])?t[0]:i[0];break;default:let a=o;for(;--a>=0;)r[n+a]=Number.isFinite(t[a])?t[a]:i[a]}return r}_areValuesEqual(t,r){if(!t||!r)return!1;const{size:n}=this;for(let i=0;i<n;i++)if(t[i]!==r[i])return!1;return!0}}const UD=[],WD=[];function b2(e,t=0,r=1/0){let n=UD;const i={index:-1,data:e,target:[]};return e?typeof e[Symbol.iterator]=="function"?n=e:e.length>0&&(WD.length=e.length,n=WD):n=UD,(t>0||Number.isFinite(r))&&(n=(Array.isArray(n)?n:Array.from(n)).slice(t,r),i.index=t-1),{iterable:n,objectInfo:i}}function ZG(e){return e&&e[Symbol.asyncIterator]}function qG(e,t){const{size:r,stride:n,offset:i,startIndices:o,nested:a}=t,s=e.BYTES_PER_ELEMENT,l=n?n/s:r,u=i?i/s:0,c=Math.floor((e.length-u)/l);return(f,{index:h,target:d})=>{if(!o){const v=h*l+u;for(let y=0;y<r;y++)d[y]=e[v+y];return d}const p=o[h],g=o[h+1]||c;let m;if(a){m=new Array(g-p);for(let v=p;v<g;v++){const y=v*l+u;d=new Array(r);for(let b=0;b<r;b++)d[b]=e[y+b];m[v-p]=d}}else if(l===r)m=e.subarray(p*r+u,g*r+u);else{m=new e.constructor((g-p)*r);let v=0;for(let y=p;y<g;y++){const b=y*l+u;for(let w=0;w<r;w++)m[v++]=e[b+w]}}return m}}const FAt=[],Oy=[[0,1/0]];function $At(e,t){if(e===Oy||(t[0]<0&&(t[0]=0),t[0]>=t[1]))return e;const r=[],n=e.length;let i=0;for(let o=0;o<n;o++){const a=e[o];a[1]<t[0]?(r.push(a),i=o+1):a[0]>t[1]?r.push(a):t=[Math.min(a[0],t[0]),Math.max(a[1],t[1])]}return r.splice(i,0,t),r}function $3(e){const{source:t,target:r,start:n=0,size:i,getData:o}=e,a=e.end||r.length,s=t.length,l=a-n;if(s>l){r.set(t.subarray(0,l),n);return}if(r.set(t,n),!o)return;let u=s;for(;u<l;){const c=o(u,t);for(let f=0;f<i;f++)r[n+u]=c[f]||0,u++}}function BAt({source:e,target:t,size:r,getData:n,sourceStartIndices:i,targetStartIndices:o}){if(!Array.isArray(o))return $3({source:e,target:t,size:r,getData:n}),t;let a=0,s=0;const l=n&&((c,f)=>n(c+s,f)),u=Math.min(i.length,o.length);for(let c=1;c<u;c++){const f=i[c]*r,h=o[c]*r;$3({source:e.subarray(a,f),target:t,start:s,end:h,size:r,getData:l}),a=f,s=h}return s<t.length&&$3({source:[],target:t,start:s,size:r,getData:l}),t}const zAt={interpolation:{duration:0,easing:e=>e},spring:{stiffness:.05,damping:.5}};function JG(e,t){if(!e)return null;Number.isFinite(e)&&(e={type:"interpolation",duration:e});const r=e.type||"interpolation";return{...zAt[r],...t,...e,type:r}}function QG(e,t){const r=t.getBuffer();return r?[r,{divisor:0,size:t.size,normalized:t.settings.normalized}]:t.value}function tH(e){switch(e){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(e,'"'))}}function eH(e){e.push(e.shift())}function Hx(e,t){const{doublePrecision:r,settings:n,value:i,size:o}=e,a=r&&i instanceof Float64Array?2:1;return(n.noAlloc?i.length:t*o)*a}function rH({buffer:e,numInstances:t,attribute:r,fromLength:n,fromStartIndices:i,getData:o=a=>a}){const a=r.doublePrecision&&r.value instanceof Float64Array?2:1,s=r.size*a,l=r.byteOffset,u=r.startIndices,c=i&&u,f=Hx(r,t),h=r.isConstant;if(!c&&n>=f)return;const d=h?r.value:r.getBuffer().getData({srcByteOffset:l});if(r.settings.normalized&&!h){const v=o;o=(y,b)=>r.normalizeConstant(v(y,b))}const p=h?(v,y)=>o(d,y):(v,y)=>o(d.subarray(v,v+s),y),g=e.getData({length:n}),m=new Float32Array(f);BAt({source:g,target:m,sourceStartIndices:i,targetStartIndices:u,size:s,getData:p}),e.byteLength<m.byteLength+l&&e.reallocate(m.byteLength+l),e.subData({data:m,offset:l})}class Xx extends NAt{constructor(t,r){super(t,r,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:Oy}),x(this,"constant",!1),this.settings.update=r.update||(r.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(t){this.state.startIndices=t}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:t=!1}={}){const r=this.state.needsRedraw;return this.state.needsRedraw=r&&!t,r}getUpdateTriggers(){const{accessor:t}=this.settings;return[this.id].concat(typeof t!="function"&&t||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(t){if(!t||!this.supportsTransition())return null;const{accessor:r}=this.settings,n=this.settings.transition,i=Array.isArray(r)?t[r.find(o=>t[o])]:t[r];return JG(i,n)}setNeedsUpdate(t=this.id,r){if(this.state.needsUpdate=this.state.needsUpdate||t,this.setNeedsRedraw(t),r){const{startRow:n=0,endRow:i=1/0}=r;this.state.updateRanges=$At(this.state.updateRanges,[n,i])}else this.state.updateRanges=Oy}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=FAt}setNeedsRedraw(t=this.id){this.state.needsRedraw=this.state.needsRedraw||t}allocate(t){const{state:r,settings:n}=this;return n.noAlloc?!1:n.update?(super.allocate(t,r.updateRanges!==Oy),!0):!1}updateBuffer({numInstances:t,data:r,props:n,context:i}){if(!this.needsUpdate())return!1;const{state:{updateRanges:o},settings:{update:a,noAlloc:s}}=this;let l=!0;if(a){for(const[u,c]of o)a.call(i,this,{data:r,startRow:u,endRow:c,props:n,numInstances:t});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[u,c]of o){const f=Number.isFinite(u)?this.getVertexOffset(u):0,h=Number.isFinite(c)?this.getVertexOffset(c):s||!Number.isFinite(t)?this.value.length:t*this.size;super.updateSubBuffer({startOffset:f,endOffset:h})}this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(t){return t===void 0||typeof t=="function"?!1:(this.setData({constant:!0,value:t})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(t){const{state:r}=this;return t?(this.clearNeedsUpdate(),r.lastExternalBuffer===t||(r.lastExternalBuffer=t,this.setNeedsRedraw(),this.setData(t)),!0):(r.lastExternalBuffer=null,!1)}setBinaryValue(t,r=null){const{state:n,settings:i}=this;if(!t)return n.binaryValue=null,n.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(n.binaryValue===t)return this.clearNeedsUpdate(),!0;if(n.binaryValue=t,this.setNeedsRedraw(),i.transform||r!==this.startIndices){ArrayBuffer.isView(t)&&(t={value:t});const a=t;Zr(ArrayBuffer.isView(a.value),"invalid ".concat(i.accessor));const s=Boolean(a.size)&&a.size!==this.size;return n.binaryAccessor=qG(a.value,{size:a.size||this.size,stride:a.stride,offset:a.offset,startIndices:r,nested:s}),!1}return this.clearNeedsUpdate(),this.setData(t),!0}getVertexOffset(t){const{startIndices:r}=this;return(r?r[t]:t)*this.size}getShaderAttributes(){const t=this.settings.shaderAttributes||{[this.id]:null},r={};for(const n in t)Object.assign(r,super.getShaderAttributes(n,t[n]));return r}_autoUpdater(t,{data:r,startRow:n,endRow:i,props:o,numInstances:a}){if(t.constant)return;const{settings:s,state:l,value:u,size:c,startIndices:f}=t,{accessor:h,transform:d}=s,p=l.binaryAccessor||(typeof h=="function"?h:o[h]);Zr(typeof p=="function",'accessor "'.concat(h,'" is not a function'));let g=t.getVertexOffset(n);const{iterable:m,objectInfo:v}=b2(r,n,i);for(const y of m){v.index++;let b=p(y,v);if(d&&(b=d.call(this,b)),f){const w=(v.index<f.length-1?f[v.index+1]:a)-f[v.index];if(b&&Array.isArray(b[0])){let T=g;for(const S of b)t._normalizeValue(S,u,T),T+=c}else b&&b.length>c?u.set(b,g):(t._normalizeValue(b,v.target,0),sCt({target:u,source:v.target,start:g,count:w}));g+=w*c}else t._normalizeValue(b,u,g),g+=c}}_validateAttributeUpdaters(){const{settings:t}=this;if(!(t.noAlloc||typeof t.update=="function"))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:t}=this,r=Math.min(4,this.size);if(t&&t.length>=r){let n=!0;switch(r){case 4:n=n&&Number.isFinite(t[3]);case 3:n=n&&Number.isFinite(t[2]);case 2:n=n&&Number.isFinite(t[1]);case 1:n=n&&Number.isFinite(t[0]);break;default:n=!1}if(!n)throw new Error("Illegal attribute generated for ".concat(this.id))}}}class VAt{constructor({gl:t,attribute:r,timeline:n}){x(this,"gl",void 0),x(this,"type","interpolation"),x(this,"attributeInTransition",void 0),x(this,"settings",void 0),x(this,"attribute",void 0),x(this,"transition",void 0),x(this,"currentStartIndices",void 0),x(this,"currentLength",void 0),x(this,"transform",void 0),x(this,"buffers",void 0),this.gl=t,this.transition=new g0(n),this.attribute=r,this.attributeInTransition=new Xx(t,r.settings),this.currentStartIndices=r.startIndices,this.currentLength=0,this.transform=WAt(t,r);const i={byteLength:0,usage:35050};this.buffers=[new Ye(t,i),new Ye(t,i)]}get inProgress(){return this.transition.inProgress}start(t,r){if(t.duration<=0){this.transition.cancel();return}this.settings=t;const{gl:n,buffers:i,attribute:o}=this;eH(i);const a={numInstances:r,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const s of i)rH({buffer:s,...a});this.currentStartIndices=o.startIndices,this.currentLength=Hx(o,r),this.attributeInTransition.setData({buffer:i[1],value:o.value}),this.transition.start(t),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aFrom:i[0],aTo:QG(n,o)},feedbackBuffers:{vCurrent:i[1]}})}update(){const t=this.transition.update();if(t){const{duration:r,easing:n}=this.settings,{time:i}=this.transition;let o=i/r;n&&(o=n(o)),this.transform.run({uniforms:{time:o}})}return t}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0}}const UAt=`
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
attribute ATTRIBUTE_TYPE aFrom;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`;function WAt(e,t){const r=tH(t.size);return new Ux(e,{vs:UAt,defines:{ATTRIBUTE_TYPE:r},varyings:["vCurrent"]})}class jAt{constructor({gl:t,attribute:r,timeline:n}){x(this,"gl",void 0),x(this,"type","spring"),x(this,"attributeInTransition",void 0),x(this,"settings",void 0),x(this,"attribute",void 0),x(this,"transition",void 0),x(this,"currentStartIndices",void 0),x(this,"currentLength",void 0),x(this,"texture",void 0),x(this,"framebuffer",void 0),x(this,"transform",void 0),x(this,"buffers",void 0),this.gl=t,this.type="spring",this.transition=new g0(n),this.attribute=r,this.attributeInTransition=new Xx(t,{...r.settings,normalized:!1}),this.currentStartIndices=r.startIndices,this.currentLength=0,this.texture=HAt(t),this.framebuffer=XAt(t,this.texture),this.transform=GAt(t,r,this.framebuffer);const i={byteLength:0,usage:35050};this.buffers=[new Ye(t,i),new Ye(t,i),new Ye(t,i)]}get inProgress(){return this.transition.inProgress}start(t,r){const{gl:n,buffers:i,attribute:o}=this,a={numInstances:r,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const s of i)rH({buffer:s,...a});this.settings=t,this.currentStartIndices=o.startIndices,this.currentLength=Hx(o,r),this.attributeInTransition.setData({buffer:i[1],value:o.value}),this.transition.start({...t,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aTo:QG(n,o)}})}update(){const{buffers:t,transform:r,framebuffer:n,transition:i}=this;if(!i.update())return!1;const a=this.settings;return r.update({sourceBuffers:{aPrev:t[0],aCur:t[1]},feedbackBuffers:{vNext:t[2]}}),r.run({framebuffer:n,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:a.stiffness,damping:a.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),eH(t),this.attributeInTransition.setData({buffer:t[1],value:this.attribute.value}),h2(n)[0]>0||i.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}function GAt(e,t,r){const n=tH(t.size);return new Ux(e,{framebuffer:r,vs:`
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
attribute ATTRIBUTE_TYPE aPrev;
attribute ATTRIBUTE_TYPE aCur;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vNext;
varying float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs:`
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

varying float vIsTransitioningFlag;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  gl_FragColor = vec4(1.0);
}`,defines:{ATTRIBUTE_TYPE:n},varyings:["vNext"]})}function HAt(e){return new oi(e,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function XAt(e,t){return new $r(e,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{[36064]:t}})}const YAt={interpolation:VAt,spring:jAt};class KAt{constructor(t,{id:r,timeline:n}){x(this,"id",void 0),x(this,"isSupported",void 0),x(this,"gl",void 0),x(this,"timeline",void 0),x(this,"transitions",void 0),x(this,"needsRedraw",void 0),x(this,"numInstances",void 0),this.id=r,this.gl=t,this.timeline=n,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=Ux.isSupported(t)}finalize(){for(const t in this.transitions)this._removeTransition(t)}update({attributes:t,transitions:r,numInstances:n}){this.numInstances=n||1;for(const i in t){const o=t[i],a=o.getTransitionSetting(r);!a||this._updateAttribute(i,o,a)}for(const i in this.transitions){const o=t[i];(!o||!o.getTransitionSetting(r))&&this._removeTransition(i)}}hasAttribute(t){const r=this.transitions[t];return r&&r.inProgress}getAttributes(){const t={};for(const r in this.transitions){const n=this.transitions[r];n.inProgress&&(t[r]=n.attributeInTransition)}return t}run(){if(!this.isSupported||this.numInstances===0)return!1;for(const r in this.transitions)this.transitions[r].update()&&(this.needsRedraw=!0);const t=this.needsRedraw;return this.needsRedraw=!1,t}_removeTransition(t){this.transitions[t].cancel(),delete this.transitions[t]}_updateAttribute(t,r,n){const i=this.transitions[t];let o=!i||i.type!==n.type;if(o){if(!this.isSupported){de.warn("WebGL2 not supported by this browser. Transition for ".concat(t," is disabled."))();return}i&&this._removeTransition(t);const a=YAt[n.type];a?this.transitions[t]=new a({attribute:r,timeline:this.timeline,gl:this.gl}):(de.error("unsupported transition type '".concat(n.type,"'"))(),o=!1)}(o||r.needsRedraw())&&(this.needsRedraw=!0,this.transitions[t].start(n,this.numInstances))}}const jD="attributeManager.invalidate",ZAt="attributeManager.updateStart",qAt="attributeManager.updateEnd",JAt="attribute.updateStart",QAt="attribute.allocate",txt="attribute.updateEnd";class ext{constructor(t,{id:r="attribute-manager",stats:n,timeline:i}={}){x(this,"id",void 0),x(this,"gl",void 0),x(this,"attributes",void 0),x(this,"updateTriggers",void 0),x(this,"needsRedraw",void 0),x(this,"userData",void 0),x(this,"stats",void 0),x(this,"attributeTransitionManager",void 0),this.id=r,this.gl=t,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=n,this.attributeTransitionManager=new KAt(t,{id:"".concat(r,"-transitions"),timeline:i}),Object.seal(this)}finalize(){for(const t in this.attributes)this.attributes[t].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(t={clearRedrawFlags:!1}){const r=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!t.clearRedrawFlags,r&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(t){this._add(t)}addInstanced(t){this._add(t,{instanced:1})}remove(t){for(const r of t)this.attributes[r]!==void 0&&(this.attributes[r].delete(),delete this.attributes[r])}invalidate(t,r){const n=this._invalidateTrigger(t,r);Tn(jD,this,t,n)}invalidateAll(t){for(const r in this.attributes)this.attributes[r].setNeedsUpdate(r,t);Tn(jD,this,"all")}update({data:t,numInstances:r,startIndices:n=null,transitions:i,props:o={},buffers:a={},context:s={}}){let l=!1;Tn(ZAt,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const u in this.attributes){const c=this.attributes[u],f=c.settings.accessor;c.startIndices=n,c.numInstances=r,o[u]&&de.removed("props.".concat(u),"data.attributes.".concat(u))(),c.setExternalBuffer(a[u])||c.setBinaryValue(typeof f=="string"?a[f]:void 0,t.startIndices)||typeof f=="string"&&!a[f]&&c.setConstantValue(o[f])||c.needsUpdate()&&(l=!0,this._updateAttribute({attribute:c,numInstances:r,data:t,props:o,context:s})),this.needsRedraw=this.needsRedraw||c.needsRedraw()}l&&Tn(qAt,this,r),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:r,transitions:i})}updateTransition(){const{attributeTransitionManager:t}=this,r=t.run();return this.needsRedraw=this.needsRedraw||r,r}getAttributes(){return this.attributes}getChangedAttributes(t={clearChangedFlags:!1}){const{attributes:r,attributeTransitionManager:n}=this,i={...n.getAttributes()};for(const o in r){const a=r[o];a.needsRedraw(t)&&!n.hasAttribute(o)&&(i[o]=a)}return i}getShaderAttributes(t,r={}){t||(t=this.getAttributes());const n={};for(const i in t)r[i]||Object.assign(n,t[i].getShaderAttributes());return n}_add(t,r={}){for(const n in t){const i=t[n];this.attributes[n]=this._createAttribute(n,i,r)}this._mapUpdateTriggersToAttributes()}_createAttribute(t,r,n){const i={...r,id:t,size:r.isIndexed&&1||r.size||1,divisor:n.instanced?1:r.divisor||0};return new Xx(this.gl,i)}_mapUpdateTriggersToAttributes(){const t={};for(const r in this.attributes)this.attributes[r].getUpdateTriggers().forEach(i=>{t[i]||(t[i]=[]),t[i].push(r)});this.updateTriggers=t}_invalidateTrigger(t,r){const{attributes:n,updateTriggers:i}=this,o=i[t];return o&&o.forEach(a=>{const s=n[a];s&&s.setNeedsUpdate(s.id,r)}),o}_updateAttribute(t){const{attribute:r,numInstances:n}=t;if(Tn(JAt,r),r.constant){r.setConstantValue(r.value);return}r.allocate(n)&&Tn(QAt,r,n),r.updateBuffer(t)&&(this.needsRedraw=!0,Tn(txt,r,n))}}class rxt extends g0{get value(){return this._value}_onUpdate(){const{time:t,settings:{fromValue:r,toValue:n,duration:i,easing:o}}=this,a=o(t/i);this._value=gc(r,n,a)}}const GD=1e-5;function HD(e,t,r,n,i){const o=t-e,s=(r-t)*i,l=-o*n;return s+l+o+t}function nxt(e,t,r,n,i){if(Array.isArray(r)){const o=[];for(let a=0;a<r.length;a++)o[a]=HD(e[a],t[a],r[a],n,i);return o}return HD(e,t,r,n,i)}function XD(e,t){if(Array.isArray(e)){let r=0;for(let n=0;n<e.length;n++){const i=e[n]-t[n];r+=i*i}return Math.sqrt(r)}return Math.abs(e-t)}class ixt extends g0{get value(){return this._currValue}_onUpdate(){const{fromValue:t,toValue:r,damping:n,stiffness:i}=this.settings,{_prevValue:o=t,_currValue:a=t}=this;let s=nxt(o,a,r,n,i);const l=XD(s,r),u=XD(s,a);l<GD&&u<GD&&(s=r,this.end()),this._prevValue=a,this._currValue=s}}const oxt={interpolation:rxt,spring:ixt};class axt{constructor(t){this.transitions=new Map,this.timeline=t}get active(){return this.transitions.size>0}add(t,r,n,i){const{transitions:o}=this;if(o.has(t)){const l=o.get(t),{value:u=l.settings.fromValue}=l;r=u,this.remove(t)}if(i=JG(i),!i)return;const a=oxt[i.type];if(!a){de.error("unsupported transition type '".concat(i.type,"'"))();return}const s=new a(this.timeline);s.start({...i,fromValue:r,toValue:n}),o.set(t,s)}remove(t){const{transitions:r}=this;r.has(t)&&(r.get(t).cancel(),r.delete(t))}update(){const t={};for(const[r,n]of this.transitions)n.update(),t[r]=n.value,n.inProgress||this.remove(r);return t}clear(){for(const t of this.transitions.keys())this.remove(t)}}function sxt(e){const t=Yx(e);for(const r in t){const n=t[r],{validate:i}=n;if(i&&!i(e[r],n))throw new Error("Invalid prop ".concat(r,": ").concat(e[r]))}}function lxt(e,t){const r=nH({newProps:e,oldProps:t,propTypes:Yx(e),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),n=cxt(e,t);let i=!1;return n||(i=fxt(e,t)),{dataChanged:n,propsChanged:r,updateTriggersChanged:i,extensionsChanged:hxt(e,t),transitionsChanged:uxt(e,t)}}function uxt(e,t){if(!e.transitions)return!1;const r={},n=Yx(e);let i=!1;for(const o in e.transitions){const a=n[o],s=a&&a.type;(s==="number"||s==="color"||s==="array")&&CE(e[o],t[o],a)&&(r[o]=!0,i=!0)}return i?r:!1}function nH({newProps:e,oldProps:t,ignoreProps:r={},propTypes:n={},triggerName:i="props"}){if(t===e)return!1;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return"".concat(i," changed shallowly");for(const o of Object.keys(e))if(!(o in r)){if(!(o in t))return"".concat(i,".").concat(o," added");const a=CE(e[o],t[o],n[o]);if(a)return"".concat(i,".").concat(o," ").concat(a)}for(const o of Object.keys(t))if(!(o in r)){if(!(o in e))return"".concat(i,".").concat(o," dropped");if(!Object.hasOwnProperty.call(e,o)){const a=CE(e[o],t[o],n[o]);if(a)return"".concat(i,".").concat(o," ").concat(a)}}return!1}function CE(e,t,r){let n=r&&r.equal;return n&&!n(e,t,r)||!n&&(n=e&&t&&e.equals,n&&!n.call(e,t))?"changed deeply":!n&&t!==e?"changed shallowly":null}function cxt(e,t){if(t===null)return"oldProps is null, initial diff";let r=!1;const{dataComparator:n,_dataDiff:i}=e;return n?n(e.data,t.data)||(r="Data comparator detected a change"):e.data!==t.data&&(r="A new data container was supplied"),r&&i&&(r=i(e.data,t.data)||r),r}function fxt(e,t){if(t===null)return{all:!0};if("all"in e.updateTriggers&&YD(e,t,"all"))return{all:!0};const r={};let n=!1;for(const i in e.updateTriggers)i!=="all"&&YD(e,t,i)&&(r[i]=!0,n=!0);return n?r:!1}function hxt(e,t){if(t===null)return!0;const r=t.extensions,{extensions:n}=e;if(n===r)return!1;if(!r||!n||n.length!==r.length)return!0;for(let i=0;i<n.length;i++)if(!n[i].equals(r[i]))return!0;return!1}function YD(e,t,r){let n=e.updateTriggers[r];n=n==null?{}:n;let i=t.updateTriggers[r];return i=i==null?{}:i,nH({oldProps:i,newProps:n,triggerName:r})}function Yx(e){const t=e[K_],r=t&&t.constructor;return r?r._propTypes:{}}const dxt="count(): argument not an object",pxt="count(): argument not a container";function gxt(e){if(!mxt(e))throw new Error(dxt);if(typeof e.count=="function")return e.count();if(Number.isFinite(e.size))return e.size;if(Number.isFinite(e.length))return e.length;if(vxt(e))return Object.keys(e).length;throw new Error(pxt)}function vxt(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function mxt(e){return e!==null&&typeof e=="object"}function yxt(e,t){if(!t)return e;const r={...e,...t};if("defines"in t&&(r.defines={...e.defines,...t.defines}),"modules"in t&&(r.modules=(e.modules||[]).concat(t.modules),t.modules.some(n=>n.name==="project64"))){const n=r.modules.findIndex(i=>i.name==="project32");n>=0&&r.modules.splice(n,1)}if("inject"in t)if(!e.inject)r.inject=t.inject;else{const n={...e.inject};for(const i in t.inject)n[i]=(n[i]||"")+t.inject[i];r.inject=n}return r}const _xt={[10241]:9987,[10240]:9729,[10242]:33071,[10243]:33071},AE={};function bxt(e,t){const r=e.context&&e.context.gl;if(!r||!t)return null;if(t instanceof oi)return t;t.constructor&&t.constructor.name!=="Object"&&(t={data:t});let n=null;t.compressed&&(n={[10241]:t.data.length>1?9985:9729});const i=new oi(r,{...t,parameters:{..._xt,...n,...e.props.textureParameters}});return AE[i.id]=!0,i}function wxt(e){!e||!(e instanceof oi)||AE[e.id]&&(e.delete(),delete AE[e.id])}const Sxt={boolean:{validate(e,t){return!0},equal(e,t,r){return Boolean(e)===Boolean(t)}},number:{validate(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},color:{validate(e,t){return t.optional&&!e||Mv(e)&&(e.length===3||e.length===4)},equal(e,t,r){return B3(e,t)}},accessor:{validate(e,t){const r=q_(e);return r==="function"||r===q_(t.value)},equal(e,t,r){return typeof t=="function"?!0:B3(e,t)}},array:{validate(e,t){return t.optional&&!e||Mv(e)},equal(e,t,r){return r.compare?B3(e,t):e===t}},object:{equal(e,t,r){return r.compare?bd(e,t):e===t}},function:{validate(e,t){return t.optional&&!e||typeof e=="function"},equal(e,t,r){return!r.compare||e===t}},data:{transform:(e,t,r)=>{const{dataTransform:n}=r.props;return n&&e?n(e):e}},image:{transform:(e,t,r)=>bxt(r,e),release:e=>{wxt(e)}}};function B3(e,t){if(e===t)return!0;if(!Mv(e)||!Mv(t))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Txt(e){const t={},r={},n={};for(const[i,o]of Object.entries(e)){const a=o==null?void 0:o.deprecatedFor;if(a)n[i]=Array.isArray(a)?a:[a];else{const s=kxt(i,o);t[i]=s,r[i]=s.value}}return{propTypes:t,defaultProps:r,deprecatedProps:n}}function kxt(e,t){switch(q_(t)){case"object":return wp(e,t);case"array":return wp(e,{type:"array",value:t,compare:!1});case"boolean":return wp(e,{type:"boolean",value:t});case"number":return wp(e,{type:"number",value:t});case"function":return wp(e,{type:"function",value:t,compare:!0});default:return{name:e,type:"unknown",value:t}}}function wp(e,t){return"type"in t?{name:e,...Sxt[t.type],...t}:"value"in t?{name:e,type:q_(t.value),...t}:{name:e,type:"object",value:t}}function Mv(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function q_(e){return Mv(e)?"array":e===null?"null":typeof e}function Pxt(e,t){const r=iH(e.constructor),n=Object.create(r);n[K_]=e,n[Ic]={},n[Pl]={};for(let i=0;i<t.length;++i){const o=t[i];for(const a in o)n[a]=o[a]}return Object.freeze(n),n}function iH(e){const t=J_(e,"_mergedDefaultProps");return t||(Ext(e),e._mergedDefaultProps)}function Ext(e){if(!e.prototype)return;const r=Object.getPrototypeOf(e),n=iH(r),i=J_(e,"defaultProps")||{},o=Txt(i),a=Cxt(o.defaultProps,n,e),s={...r._propTypes,...o.propTypes};xxt(a,s);const l={...r._deprecatedProps,...o.deprecatedProps};Axt(a,l),e._mergedDefaultProps=a,e._propTypes=s,e._deprecatedProps=l}function Cxt(e,t,r){const n=Object.create(null);Object.assign(n,t,e);const i=Ixt(r);return delete e.id,Object.defineProperties(n,{id:{writable:!0,value:i}}),n}function Axt(e,t){for(const r in t)Object.defineProperty(e,r,{enumerable:!1,set(n){const i="".concat(this.id,": ").concat(r);for(const o of t[r])oH(this,o)||(this[o]=n);de.deprecated(i,t[r].join("/"))()}})}function xxt(e,t){const r={},n={};for(const i in t){const o=t[i],{name:a,value:s}=o;o.async&&(r[a]=s,n[a]=Mxt(a))}e[Ih]=r,e[Ic]={},Object.defineProperties(e,n)}function Mxt(e){return{enumerable:!0,set(t){typeof t=="string"||t instanceof Promise||ZG(t)?this[Ic][e]=t:this[Pl][e]=t},get(){if(this[Pl]){if(e in this[Pl])return this[Pl][e]||this[Ih][e];if(e in this[Ic]){const t=this[K_]&&this[K_].internalState;if(t&&t.hasAsyncProp(e))return t.getAsyncProp(e)||this[Ih][e]}}return this[Ih][e]}}}function oH(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function J_(e,t){return oH(e,t)&&e[t]}function Ixt(e){const t=J_(e,"layerName")||J_(e,"componentName");return t||de.once(0,"".concat(e.name,".componentName not specified"))(),t||e.name}let Lxt=0;class Kx{constructor(...t){x(this,"id",void 0),x(this,"props",void 0),x(this,"count",void 0),this.props=Pxt(this,t),this.id=this.props.id,this.count=Lxt++}clone(t){const{props:r}=this,n={};for(const i in r[Ih])i in r[Pl]?n[i]=r[Pl][i]:i in r[Ic]&&(n[i]=r[Ic][i]);return new this.constructor({...r,...n,...t})}}x(Kx,"componentName","Component");x(Kx,"defaultProps",{});const Oxt=Object.freeze({});class Rxt{constructor(t){x(this,"component",void 0),x(this,"onAsyncPropUpdated",void 0),x(this,"asyncProps",void 0),x(this,"oldProps",void 0),x(this,"oldAsyncProps",void 0),this.component=t,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const t in this.asyncProps){const r=this.asyncProps[t];r&&r.type&&r.type.release&&r.type.release(r.resolvedValue,r.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps||Oxt}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}hasAsyncProp(t){return t in this.asyncProps}getAsyncProp(t){const r=this.asyncProps[t];return r&&r.resolvedValue}isAsyncPropLoading(t){if(t){const r=this.asyncProps[t];return Boolean(r&&r.pendingLoadCount>0&&r.pendingLoadCount!==r.resolvedLoadCount)}for(const r in this.asyncProps)if(this.isAsyncPropLoading(r))return!0;return!1}reloadAsyncProp(t,r){this._watchPromise(t,Promise.resolve(r))}setAsyncProps(t){const r=t[Pl]||{},n=t[Ic]||t,i=t[Ih]||{};for(const o in r){const a=r[o];this._createAsyncPropData(o,i[o]),this._updateAsyncProp(o,a),r[o]=this.getAsyncProp(o)}for(const o in n){const a=n[o];this._createAsyncPropData(o,i[o]),this._updateAsyncProp(o,a)}}_fetch(t,r){return null}_onResolve(t,r){}_onError(t,r){}_updateAsyncProp(t,r){if(!!this._didAsyncInputValueChange(t,r)){if(typeof r=="string"&&(r=this._fetch(t,r)),r instanceof Promise){this._watchPromise(t,r);return}if(ZG(r)){this._resolveAsyncIterable(t,r);return}this._setPropValue(t,r)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const t in this.asyncProps)Object.defineProperty(this.oldAsyncProps,t,{enumerable:!0,value:this.oldProps[t]})}}_didAsyncInputValueChange(t,r){const n=this.asyncProps[t];return r===n.resolvedValue||r===n.lastValue?!1:(n.lastValue=r,!0)}_setPropValue(t,r){this._freezeAsyncOldProps();const n=this.asyncProps[t];n&&(r=this._postProcessValue(n,r),n.resolvedValue=r,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount)}_setAsyncPropValue(t,r,n){const i=this.asyncProps[t];i&&n>=i.resolvedLoadCount&&r!==void 0&&(this._freezeAsyncOldProps(),i.resolvedValue=r,i.resolvedLoadCount=n,this.onAsyncPropUpdated(t,r))}_watchPromise(t,r){const n=this.asyncProps[t];if(n){n.pendingLoadCount++;const i=n.pendingLoadCount;r.then(o=>{o=this._postProcessValue(n,o),this._setAsyncPropValue(t,o,i),this._onResolve(t,o)}).catch(o=>{this._onError(t,o)})}}async _resolveAsyncIterable(t,r){if(t!=="data"){this._setPropValue(t,r);return}const n=this.asyncProps[t];if(!n)return;n.pendingLoadCount++;const i=n.pendingLoadCount;let o=[],a=0;for await(const s of r){const{dataTransform:l}=this.component.props;l?o=l(s,o):o=o.concat(s),Object.defineProperty(o,"__diff",{enumerable:!1,value:[{startRow:a,endRow:o.length}]}),a=o.length,this._setAsyncPropValue(t,o,i)}this._onResolve(t,o)}_postProcessValue(t,r){const n=t.type;return n&&(n.release&&n.release(t.resolvedValue,n,this.component),n.transform)?n.transform(r,n,this.component):r}_createAsyncPropData(t,r){if(!this.asyncProps[t]){const i=this.component&&this.component.constructor._propTypes;this.asyncProps[t]={type:i&&i[t],lastValue:null,resolvedValue:r,pendingLoadCount:0,resolvedLoadCount:0}}}}class Dxt extends Rxt{constructor({attributeManager:t,layer:r}){super(r),x(this,"attributeManager",void 0),x(this,"needsRedraw",void 0),x(this,"needsUpdate",void 0),x(this,"subLayers",void 0),x(this,"usesPickingColorCache",void 0),x(this,"changeFlags",void 0),x(this,"viewport",void 0),x(this,"uniformTransitions",void 0),x(this,"propsInTransition",void 0),this.attributeManager=t,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(t){this.component=t}_fetch(t,r){const n=this.component.props.fetch;return n?n(r,{propName:t,layer:this.layer}):super._fetch(t,r)}_onResolve(t,r){const n=this.component.props.onDataLoad;t==="data"&&n&&n(r,{propName:t,layer:this.layer})}_onError(t,r){this.layer.raiseError(r,"loading ".concat(t," of ").concat(this.layer))}}const Nxt="layer.changeFlag",Fxt="layer.initialize",$xt="layer.update",Bxt="layer.finalize",zxt="layer.matched",KD=2**24-1,Vxt=Object.freeze([]),Uxt=p0(({oldViewport:e,viewport:t})=>e.equals(t));let ra=new Uint8ClampedArray(0);const Wxt={data:{type:"data",value:Vxt,async:!0},dataComparator:{type:"function",value:null,compare:!1,optional:!0},_dataDiff:{type:"function",value:e=>e&&e.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(e,{propName:t,layer:r,loaders:n,loadOptions:i,signal:o})=>{const{resourceManager:a}=r.context;if(i=i||r.getLoadOptions(),n=n||r.props.loaders,o){var s;i={...i,fetch:{...(s=i)===null||s===void 0?void 0:s.fetch,signal:o}}}let l=a.contains(e);return!l&&!i&&(a.add({resourceId:e,data:U_(e,n),persistent:!1}),l=!0),l?a.subscribe({resourceId:e,onChange:u=>{var c;return(c=r.internalState)===null||c===void 0?void 0:c.reloadAsyncProp(t,u)},consumerId:r.id,requestId:t}):U_(e,n,i)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:d0.DRAW,onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:xe.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:e})=>[0,-e*100],compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Na extends Kx{constructor(...t){super(...t),x(this,"internalState",null),x(this,"lifecycle",ih.NO_STATE),x(this,"context",void 0),x(this,"state",void 0),x(this,"parent",null)}get root(){let t=this;for(;t.parent;)t=t.parent;return t}toString(){const t=this.constructor.layerName||this.constructor.name;return"".concat(t,"({id: '").concat(this.props.id,"'})")}project(t){Zr(this.internalState);const r=this.internalState.viewport||this.context.viewport,n=FG(t,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,o,a]=OG(n,r.pixelProjectionMatrix);return t.length===2?[i,o]:[i,o,a]}unproject(t){return Zr(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(t)}projectPosition(t,r){Zr(this.internalState);const n=this.internalState.viewport||this.context.viewport;return aCt(t,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...r})}get isComposite(){return!1}setState(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(t){for(const r of this.getModels())r.updateModuleSettings(t)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:t}=this.props;return t===xe.DEFAULT||t===xe.LNGLAT||t===xe.CARTESIAN}onHover(t,r){return this.props.onHover&&this.props.onHover(t,r)||!1}onClick(t,r){return this.props.onClick&&this.props.onClick(t,r)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(t,r=[]){return r[0]=t+1&255,r[1]=t+1>>8&255,r[2]=t+1>>8>>8&255,r}decodePickingColor(t){Zr(t instanceof Uint8Array);const[r,n,i]=t;return r+n*256+i*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:gxt(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var t;const r=this.getAttributeManager();if(!r)return null;const{positions:n,instancePositions:i}=r.attributes;return(t=n||i)===null||t===void 0?void 0:t.getBounds()}getShaders(t){for(const r of this.props.extensions)t=yxt(t,r.getShaders.call(this,r));return t}shouldUpdateState(t){return t.changeFlags.propsOrDataChanged}updateState(t){const r=this.getAttributeManager(),{dataChanged:n}=t.changeFlags;if(n&&r)if(Array.isArray(n))for(const l of n)r.invalidateAll(l);else r.invalidateAll();const{props:i,oldProps:o}=t,a=Number.isInteger(o.highlightedObjectIndex)||o.pickable,s=Number.isInteger(i.highlightedObjectIndex)||i.pickable;if(a!==s&&r){const{pickingColors:l,instancePickingColors:u}=r.attributes,c=l||u;c&&(s&&c.constant&&(c.constant=!1,r.invalidate(c.id)),!c.value&&!s&&(c.constant=!0,c.value=[0,0,0]))}}finalizeState(t){for(const n of this.getModels())n.delete();const r=this.getAttributeManager();r&&r.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(t){for(const r of this.getModels())r.draw(t)}getPickingInfo({info:t,mode:r,sourceLayer:n}){const{index:i}=t;return i>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[i]),t}raiseError(t,r){var n,i;if(r&&(t.message="".concat(r,": ").concat(t.message)),!((n=(i=this.props).onError)!==null&&n!==void 0&&n.call(i,t))){var o,a;(o=this.context)===null||o===void 0||(a=o.onError)===null||a===void 0||a.call(o,t,this)}}getNeedsRedraw(t={clearRedrawFlags:!1}){return this._getNeedsRedraw(t)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var t;return((t=this.internalState)===null||t===void 0?void 0:t.uniformTransitions.active)||!1}activateViewport(t){if(!this.internalState)return;const r=this.internalState.viewport;this.internalState.viewport=t,(!r||!Uxt({oldViewport:r,viewport:t}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(t="all"){const r=this.getAttributeManager();!r||(t==="all"?r.invalidateAll():r.invalidate(t))}updateAttributes(t){for(const r of this.getModels())this._setModelAttributes(r,t)}_updateAttributes(){const t=this.getAttributeManager();if(!t)return;const r=this.props,n=this.getNumInstances(),i=this.getStartIndices();t.update({data:r.data,numInstances:n,startIndices:i,props:r,transitions:r.transitions,buffers:r.data.attributes,context:this});const o=t.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(o)}_updateAttributeTransition(){const t=this.getAttributeManager();t&&t.updateTransition()}_updateUniformTransition(){const{uniformTransitions:t}=this.internalState;if(t.active){const r=t.update(),n=Object.create(this.props);for(const i in r)Object.defineProperty(n,i,{value:r[i]});return n}return this.props}calculateInstancePickingColors(t,{numInstances:r}){if(t.constant)return;const n=Math.floor(ra.length/3);if(this.internalState.usesPickingColorCache=!0,n<r){r>KD&&de.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),ra=Qh.allocate(ra,r,{size:3,copy:!0,maxCount:Math.max(r,KD)});const i=Math.floor(ra.length/3),o=[];for(let a=n;a<i;a++)this.encodePickingColor(a,o),ra[a*3+0]=o[0],ra[a*3+1]=o[1],ra[a*3+2]=o[2]}t.value=ra.subarray(0,r*3)}_setModelAttributes(t,r){const n=this.getAttributeManager(),i=t.userData.excludeAttributes||{},o=n.getShaderAttributes(r,i);t.setAttributes(o)}disablePickingIndex(t){this._disablePickingIndex(t)}_disablePickingIndex(t){const{pickingColors:r,instancePickingColors:n}=this.getAttributeManager().attributes,i=r||n;if(!i)return;const o=i.getVertexOffset(t),a=i.getVertexOffset(t+1);i.buffer.subData({data:new Uint8Array(a-o),offset:o})}restorePickingColors(){const{pickingColors:t,instancePickingColors:r}=this.getAttributeManager().attributes,n=t||r;!n||(this.internalState.usesPickingColorCache&&n.value.buffer!==ra.buffer&&(n.value=ra.subarray(0,n.value.length)),n.updateSubBuffer({startOffset:0}))}_initialize(){Zr(!this.internalState),Zr(Number.isFinite(this.props.coordinateSystem)),Tn(Fxt,this);const t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new Dxt({attributeManager:t,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(de.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),t)}),this.internalState.layer=this,this.internalState.uniformTransitions=new axt(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const r of this.props.extensions)r.initializeState.call(this,this.context,r);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(t){Tn(zxt,this,this===t);const{state:r,internalState:n}=t;this!==t&&(this.internalState=n,this.internalState.layer=this,this.state=r,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const t=this.needsUpdate();if(Tn($xt,this,t),!t)return;const r=this.props,n=this.context,i=this.internalState,o=n.viewport,a=this._updateUniformTransition();i.propsInTransition=a,n.viewport=i.viewport||o,this.props=a;try{const s=this._getUpdateParams(),l=this.getModels();if(n.gl)this.updateState(s);else try{this.updateState(s)}catch{}for(const c of this.props.extensions)c.updateState.call(this,s,c);const u=this.getModels()[0]!==l[0];this._postUpdate(s,u)}finally{n.viewport=o,this.props=r,this._clearChangeFlags(),i.needsUpdate=!1,i.resetOldProps()}}_finalize(){Tn(Bxt,this),this.finalizeState(this.context);for(const t of this.props.extensions)t.finalizeState.call(this,t)}_drawLayer({moduleParameters:t=null,uniforms:r={},parameters:n={}}){this._updateAttributeTransition();const i=this.props,o=this.context;this.props=this.internalState.propsInTransition||i;const a=this.props.opacity;r.opacity=Math.pow(a,1/2.2);try{t&&this.setModuleParameters(t);const{getPolygonOffset:s}=this.props,l=s&&s(r)||[0,0];ws(o.gl,{polygonOffset:l}),Ji(o.gl,n,()=>{const u={moduleParameters:t,uniforms:r,parameters:n,context:o};for(const c of this.props.extensions)c.draw.call(this,u,c);this.draw(u)})}finally{this.props=i}}getChangeFlags(){var t;return(t=this.internalState)===null||t===void 0?void 0:t.changeFlags}setChangeFlags(t){if(!this.internalState)return;const{changeFlags:r}=this.internalState;for(const i in t)if(t[i]){let o=!1;switch(i){case"dataChanged":const a=t[i],s=r[i];a&&Array.isArray(s)&&(r.dataChanged=Array.isArray(a)?s.concat(a):a,o=!0);default:r[i]||(r[i]=t[i],o=!0)}o&&Tn(Nxt,this,i,t)}const n=Boolean(r.dataChanged||r.updateTriggersChanged||r.propsChanged||r.extensionsChanged);r.propsOrDataChanged=n,r.somethingChanged=n||r.viewportChanged||r.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(t,r){const n=lxt(t,r);if(n.updateTriggersChanged)for(const o in n.updateTriggersChanged)n.updateTriggersChanged[o]&&this.invalidateAttribute(o);if(n.transitionsChanged)for(const o in n.transitionsChanged){var i;this.internalState.uniformTransitions.add(o,r[o],t[o],(i=t.transitions)===null||i===void 0?void 0:i[o])}return this.setChangeFlags(n)}validateProps(){sxt(this.props)}updateAutoHighlight(t){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(t)}_updateAutoHighlight(t){const r={pickingSelectedColor:t.picked?t.color:null},{highlightColor:n}=this.props;t.picked&&typeof n=="function"&&(r.pickingHighlightColor=n(t)),this.setModuleParameters(r),this.setNeedsRedraw()}_getAttributeManager(){const t=this.context;return new ext(t.gl,{id:this.props.id,stats:t.stats,timeline:t.timeline})}_postUpdate(t,r){const{props:n,oldProps:i}=t;this.setNeedsRedraw(),this._updateAttributes();const{model:o}=this.state;o==null||o.setInstanceCount(this.getNumInstances());const{autoHighlight:a,highlightedObjectIndex:s,highlightColor:l}=n;if(r||i.autoHighlight!==a||i.highlightedObjectIndex!==s||i.highlightColor!==l){const u={};a||(u.pickingSelectedColor=null),Array.isArray(l)&&(u.pickingHighlightColor=l),Number.isInteger(s)&&(u.pickingSelectedColor=Number.isFinite(s)&&s>=0?this.encodePickingColor(s):null),this.setModuleParameters(u)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(t){if(!this.internalState)return!1;let r=!1;r=r||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!t.clearRedrawFlags;const n=this.getAttributeManager(),i=n?n.getNeedsRedraw(t):!1;return r=r||i,r}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}x(Na,"defaultProps",Wxt);x(Na,"layerName","Layer");const jxt="compositeLayer.renderLayers";class w2 extends Na{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(t=>t.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(t){}setState(t){super.setState(t),this.setNeedsUpdate()}getPickingInfo({info:t}){const{object:r}=t;return r&&r.__source&&r.__source.parent&&r.__source.parent.id===this.id&&(t.object=r.__source.object,t.index=r.__source.index),t}filterSubLayer(t){return!0}shouldRenderSubLayer(t,r){return r&&r.length}getSubLayerClass(t,r){const{_subLayerProps:n}=this.props;return n&&n[t]&&n[t].type||r}getSubLayerRow(t,r,n){return t.__source={parent:this,object:r,index:n},t}getSubLayerAccessor(t){if(typeof t=="function"){const r={index:-1,data:this.props.data,target:[]};return(n,i)=>n&&n.__source?(r.index=n.__source.index,t(n.__source.object,r)):t(n,i)}return t}getSubLayerProps(t={}){var r;const{opacity:n,pickable:i,visible:o,parameters:a,getPolygonOffset:s,highlightedObjectIndex:l,autoHighlight:u,highlightColor:c,coordinateSystem:f,coordinateOrigin:h,wrapLongitude:d,positionFormat:p,modelMatrix:g,extensions:m,fetch:v,operation:y,_subLayerProps:b}=this.props,w={id:"",updateTriggers:{},opacity:n,pickable:i,visible:o,parameters:a,getPolygonOffset:s,highlightedObjectIndex:l,autoHighlight:u,highlightColor:c,coordinateSystem:f,coordinateOrigin:h,wrapLongitude:d,positionFormat:p,modelMatrix:g,extensions:m,fetch:v,operation:y},T=b&&t.id&&b[t.id],S=T&&T.updateTriggers,k=t.id||"sublayer";if(T){const E=this.constructor._propTypes,P=t.type?t.type._propTypes:{};for(const C in T){const A=P[C]||E[C];A&&A.type==="accessor"&&(T[C]=this.getSubLayerAccessor(T[C]))}}Object.assign(w,t,T),w.id="".concat(this.props.id,"-").concat(k),w.updateTriggers={all:(r=this.props.updateTriggers)===null||r===void 0?void 0:r.all,...t.updateTriggers,...S};for(const E of m){const P=E.getSubLayerProps.call(this,E);P&&Object.assign(w,P,{updateTriggers:Object.assign(w.updateTriggers,P.updateTriggers)})}return w}_updateAutoHighlight(t){for(const r of this.getSubLayers())r.updateAutoHighlight(t)}_getAttributeManager(){return null}_postUpdate(t,r){let n=this.internalState.subLayers;const i=!n||this.needsUpdate();if(i){const o=this.renderLayers();n=g2(o,Boolean),this.internalState.subLayers=n}Tn(jxt,this,i,n);for(const o of n)o.parent=this}}x(w2,"layerName","CompositeLayer");const n1=Math.PI/180,ZD=180/Math.PI,Ry=6370972,ph=256;function Gxt(){const e=ph/Ry,t=Math.PI/180*ph;return{unitsPerMeter:[e,e,e],unitsPerMeter2:[0,0,0],metersPerUnit:[1/e,1/e,1/e],unitsPerDegree:[t,t,e],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/t,1/t,1/e]}}class Hxt extends ru{constructor(t={}){const{latitude:r=0,longitude:n=0,zoom:i=0,nearZMultiplier:o=.1,farZMultiplier:a=2,resolution:s=10}=t;let{height:l,altitude:u=1.5}=t;l=l||1,u=Math.max(.75,u);const c=new Mn().lookAt({eye:[0,-u,0],up:[0,0,1]}),f=Math.pow(2,i);c.rotateX(r*n1),c.rotateZ(-n*n1),c.scale(f/l);const h=Math.atan(.5/u),d=ph*2*f/l;super({...t,height:l,viewMatrix:c,longitude:n,latitude:r,zoom:i,distanceScales:Gxt(),fovyRadians:h*2,focalDistance:u,near:o,far:Math.min(2,1/d+1)*u*a}),x(this,"longitude",void 0),x(this,"latitude",void 0),x(this,"resolution",void 0),this.latitude=r,this.longitude=n,this.resolution=s}get projectionMode(){return Co.GLOBE}getDistanceScales(){return this.distanceScales}getBounds(t={}){const r={targetZ:t.z||0},n=this.unproject([0,this.height/2],r),i=this.unproject([this.width/2,0],r),o=this.unproject([this.width,this.height/2],r),a=this.unproject([this.width/2,this.height],r);return o[0]<this.longitude&&(o[0]+=360),n[0]>this.longitude&&(n[0]-=360),[Math.min(n[0],o[0],i[0],a[0]),Math.min(n[1],o[1],i[1],a[1]),Math.max(n[0],o[0],i[0],a[0]),Math.max(n[1],o[1],i[1],a[1])]}unproject(t,{topLeft:r=!0,targetZ:n}={}){const[i,o,a]=t,s=r?o:this.height-o,{pixelUnprojectionMatrix:l}=this;let u;if(Number.isFinite(a))u=z3(l,[i,s,a,1]);else{const d=z3(l,[i,s,-1,1]),p=z3(l,[i,s,1,1]),g=((n||0)/Ry+1)*ph,m=A3(gG([],d,p)),v=A3(d),y=A3(p),b=(4*v*y-(m-v-y)**2)/16,w=4*b/m,T=Math.sqrt(v-w),S=Math.sqrt(Math.max(0,g*g-w)),k=(T-S)/Math.sqrt(m);u=akt([],d,p,k)}const[c,f,h]=this.unprojectPosition(u);return Number.isFinite(a)?[c,f,h]:Number.isFinite(n)?[c,f,n]:[c,f]}projectPosition(t){const[r,n,i=0]=t,o=r*n1,a=n*n1,s=Math.cos(a),l=(i/Ry+1)*ph;return[Math.sin(o)*s*l,-Math.cos(o)*s*l,Math.sin(a)*l]}unprojectPosition(t){const[r,n,i]=t,o=vG(t),a=Math.asin(i/o),l=Math.atan2(r,-n)*ZD,u=a*ZD,c=(o/ph-1)*Ry;return[l,u,c]}projectFlat(t){return t}unprojectFlat(t){return t}panByPosition(t,r){const n=this.unproject(r);return{longitude:t[0]-n[0]+this.longitude,latitude:t[1]-n[1]+this.latitude}}}function z3(e,t){const r=_d([],t,e);return Vx(r,r,1/r[3]),r}class aH{constructor(t){x(this,"opts",void 0),x(this,"typedArrayManager",void 0),x(this,"indexStarts",[0]),x(this,"vertexStarts",[0]),x(this,"vertexCount",0),x(this,"instanceCount",0),x(this,"attributes",void 0),x(this,"_attributeDefs",void 0),x(this,"data",void 0),x(this,"getGeometry",void 0),x(this,"geometryBuffer",void 0),x(this,"buffers",void 0),x(this,"positionSize",void 0),x(this,"normalize",void 0);const{attributes:r={}}=t;this.typedArrayManager=Qh,this.attributes={},this._attributeDefs=r,this.opts=t,this.updateGeometry(t)}updateGeometry(t){Object.assign(this.opts,t);const{data:r,buffers:n={},getGeometry:i,geometryBuffer:o,positionFormat:a,dataChanged:s,normalize:l=!0}=this.opts;if(this.data=r,this.getGeometry=i,this.positionSize=o&&o.size||(a==="XY"?2:3),this.buffers=n,this.normalize=l,o&&(Zr(r.startIndices),this.getGeometry=this.getGeometryFromBuffer(o),l||(n.positions=o)),this.geometryBuffer=n.positions,Array.isArray(s))for(const u of s)this._rebuildGeometry(u);else this._rebuildGeometry()}updatePartialGeometry({startRow:t,endRow:r}){this._rebuildGeometry({startRow:t,endRow:r})}getGeometryFromBuffer(t){const r=t.value||t;return ArrayBuffer.isView(r)?qG(r,{size:this.positionSize,offset:t.offset,stride:t.stride,startIndices:this.data.startIndices}):null}_allocate(t,r){const{attributes:n,buffers:i,_attributeDefs:o,typedArrayManager:a}=this;for(const s in o)if(s in i)a.release(n[s]),n[s]=null;else{const l=o[s];l.copy=r,n[s]=a.allocate(n[s],t,l)}}_forEachGeometry(t,r,n){const{data:i,getGeometry:o}=this,{iterable:a,objectInfo:s}=b2(i,r,n);for(const l of a){s.index++;const u=o?o(l,s):null;t(u,s.index)}}_rebuildGeometry(t){if(!this.data)return;let{indexStarts:r,vertexStarts:n,instanceCount:i}=this;const{data:o,geometryBuffer:a}=this,{startRow:s=0,endRow:l=1/0}=t||{},u={};if(t||(r=[0],n=[0]),this.normalize||!a)this._forEachGeometry((f,h)=>{const d=f&&this.normalizeGeometry(f);u[h]=d,n[h+1]=n[h]+(d?this.getGeometrySize(d):0)},s,l),i=n[n.length-1];else if(n=o.startIndices,i=n[o.length]||0,ArrayBuffer.isView(a))i=i||a.length/this.positionSize;else if(a instanceof Ye){const f=a.accessor.stride||this.positionSize*4;i=i||a.byteLength/f}else if(a.buffer){const f=a.stride||this.positionSize*4;i=i||a.buffer.byteLength/f}else if(a.value){const f=a.value,h=a.stride/f.BYTES_PER_ELEMENT||this.positionSize;i=i||f.length/h}this._allocate(i,Boolean(t)),this.indexStarts=r,this.vertexStarts=n,this.instanceCount=i;const c={};this._forEachGeometry((f,h)=>{const d=u[h]||f;c.vertexStart=n[h],c.indexStart=r[h];const p=h<n.length-1?n[h+1]:i;c.geometrySize=p-n[h],c.geometryIndex=h,this.updateGeometryAttributes(d,c)},s,l),this.vertexCount=r[r.length-1]}}const Xxt=new Uint16Array([0,2,1,0,3,2]),Yxt=new Float32Array([0,1,0,0,1,0,1,1]);function Kxt(e,t){if(!t)return Zxt(e);const r=Math.max(Math.abs(e[0][0]-e[3][0]),Math.abs(e[1][0]-e[2][0])),n=Math.max(Math.abs(e[1][1]-e[0][1]),Math.abs(e[2][1]-e[3][1])),i=Math.ceil(r/t)+1,o=Math.ceil(n/t)+1,a=(i-1)*(o-1)*6,s=new Uint32Array(a),l=new Float32Array(i*o*2),u=new Float64Array(i*o*3);let c=0,f=0;for(let h=0;h<i;h++){const d=h/(i-1);for(let p=0;p<o;p++){const g=p/(o-1),m=qxt(e,d,g);u[c*3+0]=m[0],u[c*3+1]=m[1],u[c*3+2]=m[2]||0,l[c*2+0]=d,l[c*2+1]=1-g,h>0&&p>0&&(s[f++]=c-o,s[f++]=c-o-1,s[f++]=c-1,s[f++]=c-o,s[f++]=c-1,s[f++]=c),c++}}return{vertexCount:a,positions:u,indices:s,texCoords:l}}function Zxt(e){const t=new Float64Array(12);for(let r=0;r<e.length;r++)t[r*3+0]=e[r][0],t[r*3+1]=e[r][1],t[r*3+2]=e[r][2]||0;return{vertexCount:6,positions:t,indices:Xxt,texCoords:Yxt}}function qxt(e,t,r){return gc(gc(e[0],e[1],r),gc(e[3],e[2],r),t)}const Jxt=`
#define SHADER_NAME bitmap-layer-vertex-shader

attribute vec2 texCoords;
attribute vec3 positions;
attribute vec3 positions64Low;

varying vec2 vTexCoord;
varying vec2 vTexPos;

uniform float coordinateConversion;

const vec3 pickingColor = vec3(1.0, 0.0, 0.0);

void main(void) {
  geometry.worldPosition = positions;
  geometry.uv = texCoords;
  geometry.pickingColor = pickingColor;

  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTexCoord = texCoords;

  if (coordinateConversion < -0.5) {
    vTexPos = geometry.position.xy + project_uCommonOrigin.xy;
  } else if (coordinateConversion > 0.5) {
    vTexPos = geometry.worldPosition.xy;
  }

  vec4 color = vec4(0.0);
  DECKGL_FILTER_COLOR(color, geometry);
}
`,Qxt=`
vec3 packUVsIntoRGB(vec2 uv) {
  // Extract the top 8 bits. We want values to be truncated down so we can add a fraction
  vec2 uv8bit = floor(uv * 256.);

  // Calculate the normalized remainders of u and v parts that do not fit into 8 bits
  // Scale and clamp to 0-1 range
  vec2 uvFraction = fract(uv * 256.);
  vec2 uvFraction4bit = floor(uvFraction * 16.);

  // Remainder can be encoded in blue channel, encode as 4 bits for pixel coordinates
  float fractions = uvFraction4bit.x + uvFraction4bit.y * 16.;

  return vec3(uv8bit, fractions) / 255.;
}
`,t4t=`
#define SHADER_NAME bitmap-layer-fragment-shader

#ifdef GL_ES
precision highp float;
#endif

uniform sampler2D bitmapTexture;

varying vec2 vTexCoord;
varying vec2 vTexPos;

uniform float desaturate;
uniform vec4 transparentColor;
uniform vec3 tintColor;
uniform float opacity;

uniform float coordinateConversion;
uniform vec4 bounds;

/* projection utils */
const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / PI / 2.0;

// from degrees to Web Mercator
vec2 lnglat_to_mercator(vec2 lnglat) {
  float x = lnglat.x;
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

// from Web Mercator to degrees
vec2 mercator_to_lnglat(vec2 xy) {
  xy /= WORLD_SCALE;
  return degrees(vec2(
    xy.x - PI,
    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5
  ));
}
/* End projection utils */

// apply desaturation
vec3 color_desaturate(vec3 color) {
  float luminance = (color.r + color.g + color.b) * 0.333333333;
  return mix(color, vec3(luminance), desaturate);
}

// apply tint
vec3 color_tint(vec3 color) {
  return color * tintColor;
}

// blend with background color
vec4 apply_opacity(vec3 color, float alpha) {
  return mix(transparentColor, vec4(color, 1.0), alpha);
}

vec2 getUV(vec2 pos) {
  return vec2(
    (pos.x - bounds[0]) / (bounds[2] - bounds[0]),
    (pos.y - bounds[3]) / (bounds[1] - bounds[3])
  );
}

`.concat(Qxt,`

void main(void) {
  vec2 uv = vTexCoord;
  if (coordinateConversion < -0.5) {
    vec2 lnglat = mercator_to_lnglat(vTexPos);
    uv = getUV(lnglat);
  } else if (coordinateConversion > 0.5) {
    vec2 commonPos = lnglat_to_mercator(vTexPos);
    uv = getUV(commonPos);
  }
  vec4 bitmapColor = texture2D(bitmapTexture, uv);

  gl_FragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * opacity);

  geometry.uv = uv;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);

  if (picking_uActive) {
    // Since instance information is not used, we can use picking color for pixel index
    gl_FragColor.rgb = packUVsIntoRGB(uv);
  }
}
`),e4t={image:{type:"image",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},_imageCoordinateSystem:xe.DEFAULT,desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]}};class S2 extends Na{constructor(...t){super(...t),x(this,"state",void 0)}getShaders(){return super.getShaders({vs:Jxt,fs:t4t,modules:[ef,rf]})}initializeState(){const t=this.getAttributeManager();t.remove(["instancePickingColors"]);const r=!0;t.add({indices:{size:1,isIndexed:!0,update:n=>n.value=this.state.mesh.indices,noAlloc:r},positions:{size:3,type:5130,fp64:this.use64bitPositions(),update:n=>n.value=this.state.mesh.positions,noAlloc:r},texCoords:{size:2,update:n=>n.value=this.state.mesh.texCoords,noAlloc:r}})}updateState({props:t,oldProps:r,changeFlags:n}){const i=this.getAttributeManager();if(n.extensionsChanged){var o;const{gl:a}=this.context;(o=this.state.model)===null||o===void 0||o.delete(),this.state.model=this._getModel(a),i.invalidateAll()}if(t.bounds!==r.bounds){const a=this.state.mesh,s=this._createMesh();this.state.model.setVertexCount(s.vertexCount);for(const l in s)a&&a[l]!==s[l]&&i.invalidate(l);this.setState({mesh:s,...this._getCoordinateUniforms()})}else t._imageCoordinateSystem!==r._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}getPickingInfo(t){const{image:r}=this.props,n=t.info;if(!n.color||!r)return n.bitmap=null,n;const{width:i,height:o}=r;n.index=0;const a=r4t(n.color),s=[Math.floor(a[0]*i),Math.floor(a[1]*o)];return n.bitmap={size:{width:i,height:o},uv:a,pixel:s},n}disablePickingIndex(){this.setState({disablePicking:!0})}restorePickingColors(){this.setState({disablePicking:!1})}_updateAutoHighlight(t){super._updateAutoHighlight({...t,color:this.encodePickingColor(0)})}_createMesh(){const{bounds:t}=this.props;let r=t;return qD(t)&&(r=[[t[0],t[1]],[t[0],t[3]],[t[2],t[3]],[t[2],t[1]]]),Kxt(r,this.context.viewport.resolution)}_getModel(t){return t?new Ss(t,{...this.getShaders(),id:this.props.id,geometry:new tf({drawMode:4,vertexCount:6}),isInstanced:!1}):null}draw(t){const{uniforms:r,moduleParameters:n}=t,{model:i,coordinateConversion:o,bounds:a,disablePicking:s}=this.state,{image:l,desaturate:u,transparentColor:c,tintColor:f}=this.props;n.pickingActive&&s||l&&i&&i.setUniforms(r).setUniforms({bitmapTexture:l,desaturate:u,transparentColor:c.map(h=>h/255),tintColor:f.slice(0,3).map(h=>h/255),coordinateConversion:o,bounds:a}).draw()}_getCoordinateUniforms(){const{LNGLAT:t,CARTESIAN:r,DEFAULT:n}=xe;let{_imageCoordinateSystem:i}=this.props;if(i!==n){const{bounds:o}=this.props;if(!qD(o))throw new Error("_imageCoordinateSystem only supports rectangular bounds");const a=this.context.viewport.resolution?t:r;if(i=i===t?t:r,i===t&&a===r)return{coordinateConversion:-1,bounds:o};if(i===r&&a===t){const s=Kl([o[0],o[1]]),l=Kl([o[2],o[3]]);return{coordinateConversion:1,bounds:[s[0],s[1],l[0],l[1]]}}}return{coordinateConversion:0,bounds:[0,0,0,0]}}}x(S2,"layerName","BitmapLayer");x(S2,"defaultProps",e4t);function r4t(e){const[t,r,n]=e,i=(n&240)/256,o=(n&15)/16;return[(t+o)/256,(r+i)/256]}function qD(e){return Number.isFinite(e[0])}const n4t=`#define SHADER_NAME icon-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute vec4 instanceIconFrames;
attribute float instanceColorModes;
attribute vec2 instanceOffsets;
attribute vec2 instancePixelOffset;

uniform float sizeScale;
uniform vec2 iconsTextureDim;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform bool billboard;
uniform int sizeUnits;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = angle * PI / 180.0;
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;

  vec2 iconSize = instanceIconFrames.zw;
  // convert size in meters to pixels, then scaled and clamp
 
  // project meters to pixels and clamp to limits 
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), 
    sizeMinPixels, sizeMaxPixels
  );

  // scale icon height to match instanceSize
  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;

  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace
  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
  pixelOffset += instancePixelOffset;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);

  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); 
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTextureCoords = mix(
    instanceIconFrames.xy,
    instanceIconFrames.xy + iconSize,
    (positions.xy + 1.0) / 2.0
  ) / iconsTextureDim;

  vColor = instanceColors;
  DECKGL_FILTER_COLOR(vColor, geometry);

  vColorMode = instanceColorModes;
}
`,i4t=`#define SHADER_NAME icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float alphaCutoff;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  vec4 texColor = texture2D(iconsTexture, vTextureCoords);

  // if colorMode == 0, use pixel color from the texture
  // if colorMode == 1 or rendering picking buffer, use texture as transparency mask
  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
  // Take the global opacity and the alpha from vColor into account for the alpha component
  float a = texColor.a * opacity * vColor.a;

  if (a < alphaCutoff) {
    discard;
  }

  gl_FragColor = vec4(color, a);
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,o4t=1024,a4t=4,JD=()=>{},s4t={[10241]:9987,[10240]:9729,[10242]:33071,[10243]:33071};function l4t(e){return Math.pow(2,Math.ceil(Math.log2(e)))}function u4t(e,t,r,n){return r===t.width&&n===t.height?t:(e.canvas.height=n,e.canvas.width=r,e.clearRect(0,0,e.canvas.width,e.canvas.height),e.drawImage(t,0,0,t.width,t.height,0,0,r,n),e.canvas)}function Iv(e){return e&&(e.id||e.url)}function c4t(e,t,r){const n=e.width,i=e.height,o=Hj(e,{width:t,height:r});return kSt(e,o,{targetY:0,width:n,height:i}),e.delete(),o}function QD(e,t,r){for(let n=0;n<t.length;n++){const{icon:i,xOffset:o}=t[n],a=Iv(i);e[a]={...i,x:o,y:r}}}function f4t({icons:e,buffer:t,mapping:r={},xOffset:n=0,yOffset:i=0,rowHeight:o=0,canvasWidth:a}){let s=[];for(let l=0;l<e.length;l++){const u=e[l],c=Iv(u);if(!r[c]){const{height:f,width:h}=u;n+h+t>a&&(QD(r,s,i),n=0,i=o+i+t,o=0,s=[]),s.push({icon:u,xOffset:n}),n=n+h+t,o=Math.max(o,f)}}return s.length>0&&QD(r,s,i),{mapping:r,rowHeight:o,xOffset:n,yOffset:i,canvasWidth:a,canvasHeight:l4t(o+i+t)}}function h4t(e,t,r){if(!e||!t)return null;r=r||{};const n={},{iterable:i,objectInfo:o}=b2(e);for(const a of i){o.index++;const s=t(a,o),l=Iv(s);if(!s)throw new Error("Icon is missing.");if(!s.url)throw new Error("Icon url is missing.");!n[l]&&(!r[l]||s.url!==r[l].url)&&(n[l]={...s,source:a,sourceIndex:o.index})}return n}class d4t{constructor(t,{onUpdate:r=JD,onError:n=JD}){x(this,"gl",void 0),x(this,"onUpdate",void 0),x(this,"onError",void 0),x(this,"_loadOptions",null),x(this,"_texture",null),x(this,"_externalTexture",null),x(this,"_mapping",{}),x(this,"_textureParameters",null),x(this,"_pendingCount",0),x(this,"_autoPacking",!1),x(this,"_xOffset",0),x(this,"_yOffset",0),x(this,"_rowHeight",0),x(this,"_buffer",a4t),x(this,"_canvasWidth",o4t),x(this,"_canvasHeight",0),x(this,"_canvas",null),this.gl=t,this.onUpdate=r,this.onError=n}finalize(){var t;(t=this._texture)===null||t===void 0||t.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(t){const r=this._autoPacking?Iv(t):t;return this._mapping[r]||{}}setProps({loadOptions:t,autoPacking:r,iconAtlas:n,iconMapping:i,textureParameters:o}){if(t&&(this._loadOptions=t),r!==void 0&&(this._autoPacking=r),i&&(this._mapping=i),n){var a;(a=this._texture)===null||a===void 0||a.delete(),this._texture=null,this._externalTexture=n}o&&(this._textureParameters=o)}get isLoaded(){return this._pendingCount===0}packIcons(t,r){if(!this._autoPacking||typeof document>"u")return;const n=Object.values(h4t(t,r,this._mapping)||{});if(n.length>0){const{mapping:i,xOffset:o,yOffset:a,rowHeight:s,canvasHeight:l}=f4t({icons:n,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=s,this._mapping=i,this._xOffset=o,this._yOffset=a,this._canvasHeight=l,this._texture||(this._texture=new oi(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||s4t})),this._texture.height!==this._canvasHeight&&(this._texture=c4t(this._texture,this._canvasWidth,this._canvasHeight)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(n)}}_loadIcons(t){const r=this._canvas.getContext("2d");for(const n of t)this._pendingCount++,U_(n.url,xj,this._loadOptions).then(i=>{const o=Iv(n),{x:a,y:s,width:l,height:u}=this._mapping[o],c=u4t(r,i,l,u);this._texture.setSubImageData({data:c,x:a,y:s,width:l,height:u}),this._texture.generateMipmap(),this.onUpdate()}).catch(i=>{this.onError({url:n.url,source:n.source,sourceIndex:n.sourceIndex,loadOptions:this._loadOptions,error:i})}).finally(()=>{this._pendingCount--})}}const sH=[0,0,0,255],p4t={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:e=>e.position},getIcon:{type:"accessor",value:e=>e.icon},getColor:{type:"accessor",value:sH},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}};class Lc extends Na{constructor(...t){super(...t),x(this,"state",void 0)}getShaders(){return super.getShaders({vs:n4t,fs:i4t,modules:[ef,rf]})}initializeState(){this.state={iconManager:new d4t(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:sH},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(t){super.updateState(t);const{props:r,oldProps:n,changeFlags:i}=t,o=this.getAttributeManager(),{iconAtlas:a,iconMapping:s,data:l,getIcon:u,textureParameters:c}=r,{iconManager:f}=this.state,h=a||this.internalState.isAsyncPropLoading("iconAtlas");if(f.setProps({loadOptions:r.loadOptions,autoPacking:!h,iconAtlas:a,iconMapping:h?s:null,textureParameters:c}),h?n.iconMapping!==r.iconMapping&&o.invalidate("getIcon"):(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getIcon))&&f.packIcons(l,u),i.extensionsChanged){var d;const{gl:p}=this.context;(d=this.state.model)===null||d===void 0||d.delete(),this.state.model=this._getModel(p),o.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(t){super.finalizeState(t),this.state.iconManager.finalize()}draw({uniforms:t}){const{sizeScale:r,sizeMinPixels:n,sizeMaxPixels:i,sizeUnits:o,billboard:a,alphaCutoff:s}=this.props,{iconManager:l}=this.state,u=l.getTexture();u&&this.state.model.setUniforms(t).setUniforms({iconsTexture:u,iconsTextureDim:[u.width,u.height],sizeUnits:Yl[o],sizeScale:r,sizeMinPixels:n,sizeMaxPixels:i,billboard:a,alphaCutoff:s}).draw()}_getModel(t){const r=[-1,-1,-1,1,1,1,1,-1];return new Ss(t,{...this.getShaders(),id:this.props.id,geometry:new tf({drawMode:6,attributes:{positions:{size:2,value:new Float32Array(r)}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(t){var r;const n=(r=this.getCurrentLayer())===null||r===void 0?void 0:r.props.onIconError;n?n(t):de.error(t.error.message)()}getInstanceOffset(t){const{width:r,height:n,anchorX:i=r/2,anchorY:o=n/2}=this.state.iconManager.getIconMapping(t);return[r/2-i,n/2-o]}getInstanceColorMode(t){return this.state.iconManager.getIconMapping(t).mask?1:0}getInstanceIconFrame(t){const{x:r,y:n,width:i,height:o}=this.state.iconManager.getIconMapping(t);return[r,n,i,o]}}x(Lc,"defaultProps",p4t);x(Lc,"layerName","IconLayer");const g4t=`#define SHADER_NAME line-layer-vertex-shader

attribute vec3 positions;
attribute vec3 instanceSourcePositions;
attribute vec3 instanceTargetPositions;
attribute vec3 instanceSourcePositions64Low;
attribute vec3 instanceTargetPositions64Low;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute float instanceWidths;

uniform float opacity;
uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float useShortestPath;
uniform int widthUnits;

varying vec4 vColor;
varying vec2 uv;

// offset vector by strokeWidth pixels
// offset_direction is -1 (left) or 1 (right)
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  return dir_screenspace * offset_direction * width / 2.0;
}

vec3 splitLine(vec3 a, vec3 b, float x) {
  float t = (x - a.x) / (b.x - a.x);
  return vec3(x, mix(a.yz, b.yz, t));
}

void main(void) {
  geometry.worldPosition = instanceSourcePositions;
  geometry.worldPositionAlt = instanceTargetPositions;

  vec3 source_world = instanceSourcePositions;
  vec3 target_world = instanceTargetPositions;
  vec3 source_world_64low = instanceSourcePositions64Low;
  vec3 target_world_64low = instanceTargetPositions64Low;

  if (useShortestPath > 0.5 || useShortestPath < -0.5) {
    source_world.x = mod(source_world.x + 180., 360.0) - 180.;
    target_world.x = mod(target_world.x + 180., 360.0) - 180.;
    float deltaLng = target_world.x - source_world.x;

    if (deltaLng * useShortestPath > 180.) {
      source_world.x += 360. * useShortestPath;
      source_world = splitLine(source_world, target_world, 180. * useShortestPath);
      source_world_64low = vec3(0.0);
    } else if (deltaLng * useShortestPath < -180.) {
      target_world.x += 360. * useShortestPath;
      target_world = splitLine(source_world, target_world, 180. * useShortestPath);
      target_world_64low = vec3(0.0);
    } else if (useShortestPath < 0.) {
      // Line is not split, abort
      gl_Position = vec4(0.);
      return;
    }
  }

  // Position
  vec4 source_commonspace;
  vec4 target_commonspace;
  vec4 source = project_position_to_clipspace(source_world, source_world_64low, vec3(0.), source_commonspace);
  vec4 target = project_position_to_clipspace(target_world, target_world_64low, vec3(0.), target_commonspace);
  
  // linear interpolation of source & target to pick right coord
  float segmentIndex = positions.x;
  vec4 p = mix(source, target, segmentIndex);
  geometry.position = mix(source_commonspace, target_commonspace, segmentIndex);
  uv = positions.xy;
  geometry.uv = uv;
  geometry.pickingColor = instancePickingColors;

  // Multiply out width and clamp to limits
  float widthPixels = clamp(
    project_size_to_pixel(instanceWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels
  );

  // extrude
  vec3 offset = vec3(
    getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels),
    0.0);
  DECKGL_FILTER_SIZE(offset, geometry);
  gl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Color
  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,v4t=`#define SHADER_NAME line-layer-fragment-shader

precision highp float;

varying vec4 vColor;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,m4t=[0,0,0,255],y4t={getSourcePosition:{type:"accessor",value:e=>e.sourcePosition},getTargetPosition:{type:"accessor",value:e=>e.targetPosition},getColor:{type:"accessor",value:m4t},getWidth:{type:"accessor",value:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}};class Zx extends Na{getShaders(){return super.getShaders({vs:g4t,fs:v4t,modules:[ef,rf]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1}})}updateState(t){if(super.updateState(t),t.changeFlags.extensionsChanged){var r;const{gl:n}=this.context;(r=this.state.model)===null||r===void 0||r.delete(),this.state.model=this._getModel(n),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{widthUnits:r,widthScale:n,widthMinPixels:i,widthMaxPixels:o,wrapLongitude:a}=this.props;this.state.model.setUniforms(t).setUniforms({widthUnits:Yl[r],widthScale:n,widthMinPixels:i,widthMaxPixels:o,useShortestPath:a?1:0}).draw(),a&&this.state.model.setUniforms({useShortestPath:-1}).draw()}_getModel(t){const r=[0,-1,0,0,1,0,1,-1,0,1,1,0];return new Ss(t,{...this.getShaders(),id:this.props.id,geometry:new tf({drawMode:5,attributes:{positions:new Float32Array(r)}}),isInstanced:!0})}}x(Zx,"layerName","LineLayer");x(Zx,"defaultProps",y4t);const _4t=`#define SHADER_NAME scatterplot-layer-vertex-shader

attribute vec3 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceRadius;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform float radiusScale;
uniform float radiusMinPixels;
uniform float radiusMaxPixels;
uniform float lineWidthScale;
uniform float lineWidthMinPixels;
uniform float lineWidthMaxPixels;
uniform float stroked;
uniform bool filled;
uniform bool antialiasing;
uniform bool billboard;
uniform int radiusUnits;
uniform int lineWidthUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;


void main(void) {
  geometry.worldPosition = instancePositions;

  // Multiply out radius and clamp to limits
  outerRadiusPixels = clamp(
    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),
    radiusMinPixels, radiusMaxPixels
  );
  
  // Multiply out line width and clamp to limits
  float lineWidthPixels = clamp(
    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),
    lineWidthMinPixels, lineWidthMaxPixels
  );

  // outer radius needs to offset by half stroke width
  outerRadiusPixels += stroked * lineWidthPixels / 2.0;

  // Expand geometry to accomodate edge smoothing
  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;

  // position on the containing square in [-1, 1] space
  unitPosition = edgePadding * positions.xy;
  geometry.uv = unitPosition;
  geometry.pickingColor = instancePickingColors;

  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;
  
  if (billboard) {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = edgePadding * positions * outerRadiusPixels;
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
  }

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Apply opacity to instance color, or return instance picking color
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,b4t=`#define SHADER_NAME scatterplot-layer-fragment-shader

precision highp float;

uniform bool filled;
uniform float stroked;
uniform bool antialiasing;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;

void main(void) {
  geometry.uv = unitPosition;

  float distToCenter = length(unitPosition) * outerRadiusPixels;
  float inCircle = antialiasing ? 
    smoothedge(distToCenter, outerRadiusPixels) : 
    step(distToCenter, outerRadiusPixels);

  if (inCircle == 0.0) {
    discard;
  }

  if (stroked > 0.5) {
    float isLine = antialiasing ? 
      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
      step(innerUnitRadius * outerRadiusPixels, distToCenter);

    if (filled) {
      gl_FragColor = mix(vFillColor, vLineColor, isLine);
    } else {
      if (isLine == 0.0) {
        discard;
      }
      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
    }
  } else if (filled) {
    gl_FragColor = vFillColor;
  } else {
    discard;
  }

  gl_FragColor.a *= inCircle;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,t8=[0,0,0,255],w4t={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:e=>e.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:t8},getLineColor:{type:"accessor",value:t8},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class qx extends Na{getShaders(){return super.getShaders({vs:_4t,fs:b4t,modules:[ef,rf]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){if(super.updateState(t),t.changeFlags.extensionsChanged){var r;const{gl:n}=this.context;(r=this.state.model)===null||r===void 0||r.delete(),this.state.model=this._getModel(n),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{radiusUnits:r,radiusScale:n,radiusMinPixels:i,radiusMaxPixels:o,stroked:a,filled:s,billboard:l,antialiasing:u,lineWidthUnits:c,lineWidthScale:f,lineWidthMinPixels:h,lineWidthMaxPixels:d}=this.props;this.state.model.setUniforms(t).setUniforms({stroked:a?1:0,filled:s,billboard:l,antialiasing:u,radiusUnits:Yl[r],radiusScale:n,radiusMinPixels:i,radiusMaxPixels:o,lineWidthUnits:Yl[c],lineWidthScale:f,lineWidthMinPixels:h,lineWidthMaxPixels:d}).draw()}_getModel(t){const r=[-1,-1,0,1,-1,0,1,1,0,-1,1,0];return new Ss(t,{...this.getShaders(),id:this.props.id,geometry:new tf({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array(r)}}}),isInstanced:!0})}}x(qx,"defaultProps",w4t);x(qx,"layerName","ScatterplotLayer");const lH={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function uH(e,t,r={}){return S4t(e,r)!==t?(k4t(e,r),!0):!1}function S4t(e,t={}){return Math.sign(T4t(e,t))}function T4t(e,t={}){const{start:r=0,end:n=e.length}=t,i=t.size||2;let o=0;for(let a=r,s=n-i;a<n;a+=i)o+=(e[a]-e[s])*(e[a+1]+e[s+1]),s=a;return o/2}function k4t(e,t){const{start:r=0,end:n=e.length,size:i=2}=t,o=(n-r)/i,a=Math.floor(o/2);for(let s=0;s<a;++s){const l=r+s*i,u=r+(o-1-s)*i;for(let c=0;c<i;++c){const f=e[l+c];e[l+c]=e[u+c],e[u+c]=f}}}function xo(e,t){const r=t.length,n=e.length;if(n>0){let i=!0;for(let o=0;o<r;o++)if(e[n-r+o]!==t[o]){i=!1;break}if(i)return!1}for(let i=0;i<r;i++)e[n+i]=t[i];return!0}function xE(e,t){const r=t.length;for(let n=0;n<r;n++)e[n]=t[n]}function Lv(e,t,r,n,i=[]){const o=n+t*r;for(let a=0;a<r;a++)i[a]=e[o+a];return i}function ME(e,t,r,n,i=[]){let o,a;if(r&8)o=(n[3]-e[1])/(t[1]-e[1]),a=3;else if(r&4)o=(n[1]-e[1])/(t[1]-e[1]),a=1;else if(r&2)o=(n[2]-e[0])/(t[0]-e[0]),a=2;else if(r&1)o=(n[0]-e[0])/(t[0]-e[0]),a=0;else return null;for(let s=0;s<e.length;s++)i[s]=(a&1)===s?n[a]:o*(t[s]-e[s])+e[s];return i}function Dy(e,t){let r=0;return e[0]<t[0]?r|=1:e[0]>t[2]&&(r|=2),e[1]<t[1]?r|=4:e[1]>t[3]&&(r|=8),r}function cH(e,t){const{size:r=2,broken:n=!1,gridResolution:i=10,gridOffset:o=[0,0],startIndex:a=0,endIndex:s=e.length}=t||{},l=(s-a)/r;let u=[];const c=[u],f=Lv(e,0,r,a);let h,d;const p=hH(f,i,o,[]),g=[];xo(u,f);for(let m=1;m<l;m++){for(h=Lv(e,m,r,a,h),d=Dy(h,p);d;){ME(f,h,d,p,g);const v=Dy(g,p);v&&(ME(f,g,v,p,g),d=v),xo(u,g),xE(f,g),E4t(p,i,d),n&&u.length>r&&(u=[],c.push(u),xo(u,f)),d=Dy(h,p)}xo(u,h),xE(f,h)}return n?c:c[0]}const e8=0,P4t=1;function i1(e,t){for(let r=0;r<t.length;r++)e.push(t[r]);return e}function fH(e,t=null,r){if(!e.length)return[];const{size:n=2,gridResolution:i=10,gridOffset:o=[0,0],edgeTypes:a=!1}=r||{},s=[],l=[{pos:e,types:a?new Array(e.length/n).fill(P4t):null,holes:t||[]}],u=[[],[]];let c=[];for(;l.length;){const{pos:f,types:h,holes:d}=l.shift();C4t(f,n,d[0]||f.length,u),c=hH(u[0],i,o,c);const p=Dy(u[1],c);if(p){let g=r8(f,h,n,0,d[0]||f.length,c,p);const m={pos:g[0].pos,types:g[0].types,holes:[]},v={pos:g[1].pos,types:g[1].types,holes:[]};l.push(m,v);for(let y=0;y<d.length;y++)g=r8(f,h,n,d[y],d[y+1]||f.length,c,p),g[0]&&(m.holes.push(m.pos.length),m.pos=i1(m.pos,g[0].pos),a&&(m.types=i1(m.types,g[0].types))),g[1]&&(v.holes.push(v.pos.length),v.pos=i1(v.pos,g[1].pos),a&&(v.types=i1(v.types,g[1].types)))}else{const g={positions:f};a&&(g.edgeTypes=h),d.length&&(g.holeIndices=d),s.push(g)}}return s}function r8(e,t,r,n,i,o,a){const s=(i-n)/r,l=[],u=[],c=[],f=[],h=[];let d,p,g;const m=Lv(e,s-1,r,n);let v=Math.sign(a&8?m[1]-o[3]:m[0]-o[2]),y=t&&t[s-1],b=0,w=0;for(let T=0;T<s;T++)d=Lv(e,T,r,n,d),p=Math.sign(a&8?d[1]-o[3]:d[0]-o[2]),g=t&&t[n/r+T],p&&v&&v!==p&&(ME(m,d,a,o,h),xo(l,h)&&c.push(y),xo(u,h)&&f.push(y)),p<=0?(xo(l,d)&&c.push(g),b-=p):c.length&&(c[c.length-1]=e8),p>=0?(xo(u,d)&&f.push(g),w+=p):f.length&&(f[f.length-1]=e8),xE(m,d),v=p,y=g;return[b?{pos:l,types:t&&c}:null,w?{pos:u,types:t&&f}:null]}function hH(e,t,r,n){const i=Math.floor((e[0]-r[0])/t)*t+r[0],o=Math.floor((e[1]-r[1])/t)*t+r[1];return n[0]=i,n[1]=o,n[2]=i+t,n[3]=o+t,n}function E4t(e,t,r){r&8?(e[1]+=t,e[3]+=t):r&4?(e[1]-=t,e[3]-=t):r&2?(e[0]+=t,e[2]+=t):r&1&&(e[0]-=t,e[2]-=t)}function C4t(e,t,r,n){let i=1/0,o=-1/0,a=1/0,s=-1/0;for(let l=0;l<r;l+=t){const u=e[l],c=e[l+1];i=u<i?u:i,o=u>o?u:o,a=c<a?c:a,s=c>s?c:s}return n[0][0]=i,n[0][1]=a,n[1][0]=o,n[1][1]=s,n}const A4t=85.051129;function x4t(e,t){const{size:r=2,startIndex:n=0,endIndex:i=e.length,normalize:o=!0}=t||{},a=e.slice(n,i);dH(a,r,0,i-n);const s=cH(a,{size:r,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(o)for(const l of s)pH(l,r);return s}function M4t(e,t=null,r){const{size:n=2,normalize:i=!0,edgeTypes:o=!1}=r||{};t=t||[];const a=[],s=[];let l=0,u=0;for(let f=0;f<=t.length;f++){const h=t[f]||e.length,d=u,p=I4t(e,n,l,h);for(let g=p;g<h;g++)a[u++]=e[g];for(let g=l;g<p;g++)a[u++]=e[g];dH(a,n,d,u),L4t(a,n,d,u,r==null?void 0:r.maxLatitude),l=h,s[f]=u}s.pop();const c=fH(a,s,{size:n,gridResolution:360,gridOffset:[-180,-180],edgeTypes:o});if(i)for(const f of c)pH(f.positions,n);return c}function I4t(e,t,r,n){let i=-1,o=-1;for(let a=r+1;a<n;a+=t){const s=Math.abs(e[a]);s>i&&(i=s,o=a-1)}return o}function L4t(e,t,r,n,i=A4t){const o=e[r],a=e[n-t];if(Math.abs(o-a)>180){const s=Lv(e,0,t,r);s[0]+=Math.round((a-o)/360)*360,xo(e,s),s[1]=Math.sign(s[1])*i,xo(e,s),s[0]=o,xo(e,s)}}function dH(e,t,r,n){let i=e[0],o;for(let a=r;a<n;a+=t){o=e[a];const s=o-i;(s>180||s<-180)&&(o-=Math.round(s/360)*360),e[a]=i=o}}function pH(e,t){let r;const n=e.length/t;for(let o=0;o<n&&(r=e[o*t],(r+180)%360===0);o++);const i=-Math.round(r/360)*360;if(i!==0)for(let o=0;o<n;o++)e[o*t]+=i}function O4t(e,t,r,n){let i;if(Array.isArray(e[0])){const o=e.length*t;i=new Array(o);for(let a=0;a<e.length;a++)for(let s=0;s<t;s++)i[a*t+s]=e[a][s]||0}else i=e;return r?cH(i,{size:t,gridResolution:r}):n?x4t(i,{size:t}):i}const R4t=1,D4t=2,V3=4;class N4t extends aH{constructor(t){super({...t,attributes:{positions:{size:3,padding:18,initialize:!0,type:t.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(t){return this.attributes[t]}getGeometryFromBuffer(t){return this.normalize?super.getGeometryFromBuffer(t):null}normalizeGeometry(t){return this.normalize?O4t(t,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):t}getGeometrySize(t){if(n8(t)){let n=0;for(const i of t)n+=this.getGeometrySize(i);return n}const r=this.getPathLength(t);return r<2?0:this.isClosed(t)?r<3?0:r+2:r}updateGeometryAttributes(t,r){if(r.geometrySize!==0)if(t&&n8(t))for(const n of t){const i=this.getGeometrySize(n);r.geometrySize=i,this.updateGeometryAttributes(n,r),r.vertexStart+=i}else this._updateSegmentTypes(t,r),this._updatePositions(t,r)}_updateSegmentTypes(t,r){const n=this.attributes.segmentTypes,i=t?this.isClosed(t):!1,{vertexStart:o,geometrySize:a}=r;n.fill(0,o,o+a),i?(n[o]=V3,n[o+a-2]=V3):(n[o]+=R4t,n[o+a-2]+=D4t),n[o+a-1]=V3}_updatePositions(t,r){const{positions:n}=this.attributes;if(!n||!t)return;const{vertexStart:i,geometrySize:o}=r,a=new Array(3);for(let s=i,l=0;l<o;s++,l++)this.getPointOnPath(t,l,a),n[s*3]=a[0],n[s*3+1]=a[1],n[s*3+2]=a[2]}getPathLength(t){return t.length/this.positionSize}getPointOnPath(t,r,n=[]){const{positionSize:i}=this;r*i>=t.length&&(r+=1-t.length/i);const o=r*i;return n[0]=t[o],n[1]=t[o+1],n[2]=i===3&&t[o+2]||0,n}isClosed(t){if(!this.normalize)return Boolean(this.opts.loop);const{positionSize:r}=this,n=t.length-r;return t[0]===t[n]&&t[1]===t[n+1]&&(r===2||t[2]===t[n+2])}}function n8(e){return Array.isArray(e[0])}const F4t=`#define SHADER_NAME path-layer-vertex-shader

attribute vec2 positions;

attribute float instanceTypes;
attribute vec3 instanceStartPositions;
attribute vec3 instanceEndPositions;
attribute vec3 instanceLeftPositions;
attribute vec3 instanceRightPositions;
attribute vec3 instanceLeftPositions64Low;
attribute vec3 instanceStartPositions64Low;
attribute vec3 instanceEndPositions64Low;
attribute vec3 instanceRightPositions64Low;
attribute float instanceStrokeWidths;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;

uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float jointType;
uniform float capType;
uniform float miterLimit;
uniform bool billboard;
uniform int widthUnits;

uniform float opacity;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

const float EPSILON = 0.001;
const vec3 ZERO_OFFSET = vec3(0.0);

float flipIfTrue(bool flag) {
  return -(float(flag) * 2. - 1.);
}

// calculate line join positions
vec3 lineJoin(
  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,
  vec2 width
) {
  bool isEnd = positions.x > 0.0;
  // side of the segment - -1: left, 0: center, 1: right
  float sideOfPath = positions.y;
  float isJoint = float(sideOfPath == 0.0);

  vec3 deltaA3 = (currPoint - prevPoint);
  vec3 deltaB3 = (nextPoint - currPoint);

  mat3 rotationMatrix;
  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);
  if (needsRotation) {
    deltaA3 = deltaA3 * rotationMatrix;
    deltaB3 = deltaB3 * rotationMatrix;
  }
  vec2 deltaA = deltaA3.xy / width;
  vec2 deltaB = deltaB3.xy / width;

  float lenA = length(deltaA);
  float lenB = length(deltaB);

  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);
  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);

  vec2 perpA = vec2(-dirA.y, dirA.x);
  vec2 perpB = vec2(-dirB.y, dirB.x);

  // tangent of the corner
  vec2 tangent = dirA + dirB;
  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;
  // direction of the corner
  vec2 miterVec = vec2(-tangent.y, tangent.x);
  // direction of the segment
  vec2 dir = isEnd ? dirA : dirB;
  // direction of the extrusion
  vec2 perp = isEnd ? perpA : perpB;
  // length of the segment
  float L = isEnd ? lenA : lenB;

  // A = angle of the corner
  float sinHalfA = abs(dot(miterVec, perp));
  float cosHalfA = abs(dot(dirA, miterVec));

  // -1: right, 1: left
  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);

  // relative position to the corner:
  // -1: inside (smaller side of the angle)
  // 0: center
  // 1: outside (bigger side of the angle)
  float cornerPosition = sideOfPath * turnDirection;

  float miterSize = 1.0 / max(sinHalfA, EPSILON);
  // trim if inside corner extends further than the line segment
  miterSize = mix(
    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),
    miterSize,
    step(0.0, cornerPosition)
  );

  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))
    * (sideOfPath + isJoint * turnDirection);

  // special treatment for start cap and end cap
  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));
  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));
  bool isCap = isStartCap || isEndCap;

  // extend out a triangle to envelope the round cap
  if (isCap) {
    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);
    vJointType = capType;
  } else {
    vJointType = jointType;
  }

  // Generate variables for fragment shader
  vPathLength = L;
  vCornerOffset = offsetVec;
  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);
  vMiterLength = isCap ? isJoint : vMiterLength;

  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);
  vPathPosition = vec2(
    dot(offsetFromStartOfPath, perp),
    dot(offsetFromStartOfPath, dir)
  );
  geometry.uv = vPathPosition;

  float isValid = step(instanceTypes, 3.5);
  vec3 offset = vec3(offsetVec * width * isValid, 0.0);

  if (needsRotation) {
    offset = rotationMatrix * offset;
  }
  return currPoint + offset;
}

// In clipspace extrusion, if a line extends behind the camera, clip it to avoid visual artifacts
void clipLine(inout vec4 position, vec4 refPosition) {
  if (position.w < EPSILON) {
    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);
    position = refPosition + (position - refPosition) * r;
  }
}

void main() {
  geometry.pickingColor = instancePickingColors;

  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);

  float isEnd = positions.x;

  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);
  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);

  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);
  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);

  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);
  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);

  geometry.worldPosition = currPosition;
  vec2 widthPixels = vec2(clamp(
    project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels) / 2.0);
  vec3 width;

  if (billboard) {
    // Extrude in clipspace
    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);
    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);
    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);

    clipLine(prevPositionScreen, currPositionScreen);
    clipLine(nextPositionScreen, currPositionScreen);
    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));

    width = vec3(widthPixels, 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec3 pos = lineJoin(
      prevPositionScreen.xyz / prevPositionScreen.w,
      currPositionScreen.xyz / currPositionScreen.w,
      nextPositionScreen.xyz / nextPositionScreen.w,
      project_pixel_size_to_clipspace(width.xy)
    );

    gl_Position = vec4(pos * currPositionScreen.w, currPositionScreen.w);
  } else {
    // Extrude in commonspace
    prevPosition = project_position(prevPosition, prevPosition64Low);
    currPosition = project_position(currPosition, currPosition64Low);
    nextPosition = project_position(nextPosition, nextPosition64Low);

    width = vec3(project_pixel_size(widthPixels), 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec4 pos = vec4(
      lineJoin(prevPosition, currPosition, nextPosition, width.xy),
      1.0);
    geometry.position = pos;
    gl_Position = project_common_position_to_clipspace(pos);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,$4t=`#define SHADER_NAME path-layer-fragment-shader

precision highp float;

uniform float miterLimit;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
/*
 * vPathPosition represents the relative coordinates of the current fragment on the path segment.
 * vPathPosition.x - position along the width of the path, between [-1, 1]. 0 is the center line.
 * vPathPosition.y - position along the length of the path, between [0, L / width].
 */
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

void main(void) {
  geometry.uv = vPathPosition;

  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {
    // if joint is rounded, test distance from the corner
    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {
      discard;
    }
    // trim miter
    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {
      discard;
    }
  }
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,gH=[0,0,0,255],B4t={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:e=>e.path},getColor:{type:"accessor",value:gH},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},U3={enter:(e,t)=>t.length?t.subarray(t.length-e.length):e};class Jx extends Na{constructor(...t){super(...t),x(this,"state",void 0)}getShaders(){return super.getShaders({vs:F4t,fs:$4t,modules:[ef,rf]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:U3,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:U3,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:U3,defaultValue:gH},instancePickingColors:{size:3,type:5121,accessor:(n,{index:i,target:o})=>this.encodePickingColor(n&&n.__source?n.__source.index:i,o)}}),this.setState({pathTesselator:new N4t({fp64:this.use64bitPositions()})})}updateState(t){super.updateState(t);const{props:r,changeFlags:n}=t,i=this.getAttributeManager();if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPath)){const{pathTesselator:s}=this.state,l=r.data.attributes||{};s.updateGeometry({data:r.data,geometryBuffer:l.getPath,buffers:l,normalize:!r._pathType,loop:r._pathType==="loop",getGeometry:r.getPath,positionFormat:r.positionFormat,wrapLongitude:r.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:n.dataChanged}),this.setState({numInstances:s.instanceCount,startIndices:s.vertexStarts}),n.dataChanged||i.invalidateAll()}if(n.extensionsChanged){var a;const{gl:s}=this.context;(a=this.state.model)===null||a===void 0||a.delete(),this.state.model=this._getModel(s),i.invalidateAll()}}getPickingInfo(t){const r=super.getPickingInfo(t),{index:n}=r,{data:i}=this.props;return i[0]&&i[0].__source&&(r.object=i.find(o=>o.__source.index===n)),r}disablePickingIndex(t){const{data:r}=this.props;if(r[0]&&r[0].__source)for(let n=0;n<r.length;n++)r[n].__source.index===t&&this._disablePickingIndex(n);else this._disablePickingIndex(t)}draw({uniforms:t}){const{jointRounded:r,capRounded:n,billboard:i,miterLimit:o,widthUnits:a,widthScale:s,widthMinPixels:l,widthMaxPixels:u}=this.props;this.state.model.setUniforms(t).setUniforms({jointType:Number(r),capType:Number(n),billboard:i,widthUnits:Yl[a],widthScale:s,miterLimit:o,widthMinPixels:l,widthMaxPixels:u}).draw()}_getModel(t){const r=[0,1,2,1,4,2,1,3,4,3,5,4],n=[0,0,0,-1,0,1,1,-1,1,1,1,0];return new Ss(t,{...this.getShaders(),id:this.props.id,geometry:new tf({drawMode:4,attributes:{indices:new Uint16Array(r),positions:{value:new Float32Array(n),size:2}}}),isInstanced:!0})}calculatePositions(t){const{pathTesselator:r}=this.state;t.startIndices=r.vertexStarts,t.value=r.get("positions")}calculateSegmentTypes(t){const{pathTesselator:r}=this.state;t.startIndices=r.vertexStarts,t.value=r.get("segmentTypes")}}x(Jx,"defaultProps",B4t);x(Jx,"layerName","PathLayer");var Qx={exports:{}};Qx.exports=T2;Qx.exports.default=T2;function T2(e,t,r){r=r||2;var n=t&&t.length,i=n?t[0]*r:e.length,o=vH(e,0,i,r,!0),a=[];if(!o||o.next===o.prev)return a;var s,l,u,c,f,h,d;if(n&&(o=j4t(e,t,o,r)),e.length>80*r){s=u=e[0],l=c=e[1];for(var p=r;p<i;p+=r)f=e[p],h=e[p+1],f<s&&(s=f),h<l&&(l=h),f>u&&(u=f),h>c&&(c=h);d=Math.max(u-s,c-l),d=d!==0?32767/d:0}return Ov(o,a,r,s,l,d,0),a}function vH(e,t,r,n,i){var o,a;if(i===OE(e,t,r,n)>0)for(o=t;o<r;o+=n)a=i8(o,e[o],e[o+1],a);else for(o=r-n;o>=t;o-=n)a=i8(o,e[o],e[o+1],a);return a&&k2(a,a.next)&&(Dv(a),a=a.next),a}function Oc(e,t){if(!e)return e;t||(t=e);var r=e,n;do if(n=!1,!r.steiner&&(k2(r,r.next)||_r(r.prev,r,r.next)===0)){if(Dv(r),r=t=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==t);return t}function Ov(e,t,r,n,i,o,a){if(!!e){!a&&o&&K4t(e,n,i,o);for(var s=e,l,u;e.prev!==e.next;){if(l=e.prev,u=e.next,o?V4t(e,n,i,o):z4t(e)){t.push(l.i/r|0),t.push(e.i/r|0),t.push(u.i/r|0),Dv(e),e=u.next,s=u.next;continue}if(e=u,e===s){a?a===1?(e=U4t(Oc(e),t,r),Ov(e,t,r,n,i,o,2)):a===2&&W4t(e,t,r,n,i,o):Ov(Oc(e),t,r,n,i,o,1);break}}}}function z4t(e){var t=e.prev,r=e,n=e.next;if(_r(t,r,n)>=0)return!1;for(var i=t.x,o=r.x,a=n.x,s=t.y,l=r.y,u=n.y,c=i<o?i<a?i:a:o<a?o:a,f=s<l?s<u?s:u:l<u?l:u,h=i>o?i>a?i:a:o>a?o:a,d=s>l?s>u?s:u:l>u?l:u,p=n.next;p!==t;){if(p.x>=c&&p.x<=h&&p.y>=f&&p.y<=d&&gh(i,s,o,l,a,u,p.x,p.y)&&_r(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function V4t(e,t,r,n){var i=e.prev,o=e,a=e.next;if(_r(i,o,a)>=0)return!1;for(var s=i.x,l=o.x,u=a.x,c=i.y,f=o.y,h=a.y,d=s<l?s<u?s:u:l<u?l:u,p=c<f?c<h?c:h:f<h?f:h,g=s>l?s>u?s:u:l>u?l:u,m=c>f?c>h?c:h:f>h?f:h,v=IE(d,p,t,r,n),y=IE(g,m,t,r,n),b=e.prevZ,w=e.nextZ;b&&b.z>=v&&w&&w.z<=y;){if(b.x>=d&&b.x<=g&&b.y>=p&&b.y<=m&&b!==i&&b!==a&&gh(s,c,l,f,u,h,b.x,b.y)&&_r(b.prev,b,b.next)>=0||(b=b.prevZ,w.x>=d&&w.x<=g&&w.y>=p&&w.y<=m&&w!==i&&w!==a&&gh(s,c,l,f,u,h,w.x,w.y)&&_r(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;b&&b.z>=v;){if(b.x>=d&&b.x<=g&&b.y>=p&&b.y<=m&&b!==i&&b!==a&&gh(s,c,l,f,u,h,b.x,b.y)&&_r(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;w&&w.z<=y;){if(w.x>=d&&w.x<=g&&w.y>=p&&w.y<=m&&w!==i&&w!==a&&gh(s,c,l,f,u,h,w.x,w.y)&&_r(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function U4t(e,t,r){var n=e;do{var i=n.prev,o=n.next.next;!k2(i,o)&&mH(i,n,n.next,o)&&Rv(i,o)&&Rv(o,i)&&(t.push(i.i/r|0),t.push(n.i/r|0),t.push(o.i/r|0),Dv(n),Dv(n.next),n=e=o),n=n.next}while(n!==e);return Oc(n)}function W4t(e,t,r,n,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&J4t(a,s)){var l=yH(a,s);a=Oc(a,a.next),l=Oc(l,l.next),Ov(a,t,r,n,i,o,0),Ov(l,t,r,n,i,o,0);return}s=s.next}a=a.next}while(a!==e)}function j4t(e,t,r,n){var i=[],o,a,s,l,u;for(o=0,a=t.length;o<a;o++)s=t[o]*n,l=o<a-1?t[o+1]*n:e.length,u=vH(e,s,l,n,!1),u===u.next&&(u.steiner=!0),i.push(q4t(u));for(i.sort(G4t),o=0;o<i.length;o++)r=H4t(i[o],r);return r}function G4t(e,t){return e.x-t.x}function H4t(e,t){var r=X4t(e,t);if(!r)return t;var n=yH(r,e);return Oc(n,n.next),Oc(r,r.next)}function X4t(e,t){var r=t,n=e.x,i=e.y,o=-1/0,a;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var s=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&s>o&&(o=s,a=r.x<r.next.x?r:r.next,s===n))return a}r=r.next}while(r!==t);if(!a)return null;var l=a,u=a.x,c=a.y,f=1/0,h;r=a;do n>=r.x&&r.x>=u&&n!==r.x&&gh(i<c?n:o,i,u,c,i<c?o:n,i,r.x,r.y)&&(h=Math.abs(i-r.y)/(n-r.x),Rv(r,e)&&(h<f||h===f&&(r.x>a.x||r.x===a.x&&Y4t(a,r)))&&(a=r,f=h)),r=r.next;while(r!==l);return a}function Y4t(e,t){return _r(e.prev,e,t.prev)<0&&_r(t.next,e,e.next)<0}function K4t(e,t,r,n){var i=e;do i.z===0&&(i.z=IE(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,Z4t(i)}function Z4t(e){var t,r,n,i,o,a,s,l,u=1;do{for(r=e,e=null,o=null,a=0;r;){for(a++,n=r,s=0,t=0;t<u&&(s++,n=n.nextZ,!!n);t++);for(l=u;s>0||l>0&&n;)s!==0&&(l===0||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,u*=2}while(a>1);return e}function IE(e,t,r,n,i){return e=(e-r)*i|0,t=(t-n)*i|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function q4t(e){var t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function gh(e,t,r,n,i,o,a,s){return(i-a)*(t-s)>=(e-a)*(o-s)&&(e-a)*(n-s)>=(r-a)*(t-s)&&(r-a)*(o-s)>=(i-a)*(n-s)}function J4t(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!Q4t(e,t)&&(Rv(e,t)&&Rv(t,e)&&tMt(e,t)&&(_r(e.prev,e,t.prev)||_r(e,t.prev,t))||k2(e,t)&&_r(e.prev,e,e.next)>0&&_r(t.prev,t,t.next)>0)}function _r(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function k2(e,t){return e.x===t.x&&e.y===t.y}function mH(e,t,r,n){var i=a1(_r(e,t,r)),o=a1(_r(e,t,n)),a=a1(_r(r,n,e)),s=a1(_r(r,n,t));return!!(i!==o&&a!==s||i===0&&o1(e,r,t)||o===0&&o1(e,n,t)||a===0&&o1(r,e,n)||s===0&&o1(r,t,n))}function o1(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function a1(e){return e>0?1:e<0?-1:0}function Q4t(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&mH(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function Rv(e,t){return _r(e.prev,e,e.next)<0?_r(e,t,e.next)>=0&&_r(e,e.prev,t)>=0:_r(e,t,e.prev)<0||_r(e,e.next,t)<0}function tMt(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==e);return n}function yH(e,t){var r=new LE(e.i,e.x,e.y),n=new LE(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function i8(e,t,r,n){var i=new LE(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Dv(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function LE(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}T2.deviation=function(e,t,r,n){var i=t&&t.length,o=i?t[0]*r:e.length,a=Math.abs(OE(e,0,o,r));if(i)for(var s=0,l=t.length;s<l;s++){var u=t[s]*r,c=s<l-1?t[s+1]*r:e.length;a-=Math.abs(OE(e,u,c,r))}var f=0;for(s=0;s<n.length;s+=3){var h=n[s]*r,d=n[s+1]*r,p=n[s+2]*r;f+=Math.abs((e[h]-e[p])*(e[d+1]-e[h+1])-(e[h]-e[d])*(e[p+1]-e[h+1]))}return a===0&&f===0?0:Math.abs((f-a)/a)};function OE(e,t,r,n){for(var i=0,o=t,a=r-n;o<r;o+=n)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}T2.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)r.vertices.push(e[i][o][a]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r};const s1=lH.CLOCKWISE,o8=lH.COUNTER_CLOCKWISE,El={isClosed:!0};function eMt(e){if(e=e&&e.positions||e,!Array.isArray(e)&&!ArrayBuffer.isView(e))throw new Error("invalid polygon")}function sg(e){return"positions"in e?e.positions:e}function Ny(e){return"holeIndices"in e?e.holeIndices:null}function rMt(e){return Array.isArray(e[0])}function nMt(e){return e.length>=1&&e[0].length>=2&&Number.isFinite(e[0][0])}function iMt(e){const t=e[0],r=e[e.length-1];return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]}function oMt(e,t,r,n){for(let i=0;i<t;i++)if(e[r+i]!==e[n-t+i])return!1;return!0}function a8(e,t,r,n,i){let o=t;const a=r.length;for(let s=0;s<a;s++)for(let l=0;l<n;l++)e[o++]=r[s][l]||0;if(!iMt(r))for(let s=0;s<n;s++)e[o++]=r[0][s]||0;return El.start=t,El.end=o,El.size=n,uH(e,i,El),o}function s8(e,t,r,n,i=0,o,a){o=o||r.length;const s=o-i;if(s<=0)return t;let l=t;for(let u=0;u<s;u++)e[l++]=r[i+u];if(!oMt(r,n,i,o))for(let u=0;u<n;u++)e[l++]=r[i+u];return El.start=t,El.end=l,El.size=n,uH(e,a,El),l}function aMt(e,t){eMt(e);const r=[],n=[];if("positions"in e){const{positions:i,holeIndices:o}=e;if(o){let a=0;for(let s=0;s<=o.length;s++)a=s8(r,a,i,t,o[s-1],o[s],s===0?s1:o8),n.push(a);return n.pop(),{positions:r,holeIndices:n}}e=i}if(!rMt(e))return s8(r,0,e,t,0,r.length,s1),r;if(!nMt(e)){let i=0;for(const[o,a]of e.entries())i=a8(r,i,a,t,o===0?s1:o8),n.push(i);return n.pop(),{positions:r,holeIndices:n}}return a8(r,0,e,t,s1),r}function sMt(e,t,r){let n=Ny(e);n&&(n=n.map(o=>o/t));let i=sg(e);if(r){const o=i.length;i=i.slice();const a=[];for(let s=0;s<o;s+=t){a[0]=i[s],a[1]=i[s+1];const l=r(a);i[s]=l[0],i[s+1]=l[1]}}return Qx.exports(i,n,t)}class lMt extends aH{constructor(t){const{fp64:r,IndexType:n=Uint32Array}=t;super({...t,attributes:{positions:{size:3,type:r?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:n,size:1}}})}get(t){const{attributes:r}=this;return t==="indices"?r.indices&&r.indices.subarray(0,this.vertexCount):r[t]}updateGeometry(t){super.updateGeometry(t);const r=this.buffers.indices;if(r)this.vertexCount=(r.value||r).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(t){if(this.normalize){const r=aMt(t,this.positionSize);return this.opts.resolution?fH(sg(r),Ny(r),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?M4t(sg(r),Ny(r),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):r}return t}getGeometrySize(t){if(l8(t)){let r=0;for(const n of t)r+=this.getGeometrySize(n);return r}return sg(t).length/this.positionSize}getGeometryFromBuffer(t){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(t):null}updateGeometryAttributes(t,r){if(t&&l8(t))for(const n of t){const i=this.getGeometrySize(n);r.geometrySize=i,this.updateGeometryAttributes(n,r),r.vertexStart+=i,r.indexStart=this.indexStarts[r.geometryIndex+1]}else this._updateIndices(t,r),this._updatePositions(t,r),this._updateVertexValid(t,r)}_updateIndices(t,{geometryIndex:r,vertexStart:n,indexStart:i}){const{attributes:o,indexStarts:a,typedArrayManager:s}=this;let l=o.indices;if(!l||!t)return;let u=i;const c=sMt(t,this.positionSize,this.opts.preproject);l=s.allocate(l,i+c.length,{copy:!0});for(let f=0;f<c.length;f++)l[u++]=c[f]+n;a[r+1]=i+c.length,o.indices=l}_updatePositions(t,{vertexStart:r,geometrySize:n}){const{attributes:{positions:i},positionSize:o}=this;if(!i||!t)return;const a=sg(t);for(let s=r,l=0;l<n;s++,l++){const u=a[l*o],c=a[l*o+1],f=o>2?a[l*o+2]:0;i[s*3]=u,i[s*3+1]=c,i[s*3+2]=f}}_updateVertexValid(t,{vertexStart:r,geometrySize:n}){const{positionSize:i}=this,o=this.attributes.vertexValid,a=t&&Ny(t);if(t&&t.edgeTypes?o.set(t.edgeTypes,r):o.fill(1,r,r+n),a)for(let s=0;s<a.length;s++)o[r+a[s]/i-1]=0;o[r+n-1]=0}}function l8(e){return Array.isArray(e)&&e.length>0&&!Number.isFinite(e[0])}const _H=`
attribute vec2 vertexPositions;
attribute float vertexValid;

uniform bool extruded;
uniform bool isWireframe;
uniform float elevationScale;
uniform float opacity;

varying vec4 vColor;

struct PolygonProps {
  vec4 fillColors;
  vec4 lineColors;
  vec3 positions;
  vec3 nextPositions;
  vec3 pickingColors;
  vec3 positions64Low;
  vec3 nextPositions64Low;
  float elevations;
};

vec3 project_offset_normal(vec3 vector) {
  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * project_uCommonUnitsPerWorldUnit);
  }
  return project_normal(vector);
}

void calculatePosition(PolygonProps props) {
#ifdef IS_SIDE_VERTEX
  if(vertexValid < 0.5){
    gl_Position = vec4(0.);
    return;
  }
#endif

  vec3 pos;
  vec3 pos64Low;
  vec3 normal;
  vec4 colors = isWireframe ? props.lineColors : props.fillColors;

  geometry.worldPosition = props.positions;
  geometry.worldPositionAlt = props.nextPositions;
  geometry.pickingColor = props.pickingColors;

#ifdef IS_SIDE_VERTEX
  pos = mix(props.positions, props.nextPositions, vertexPositions.x);
  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);
#else
  pos = props.positions;
  pos64Low = props.positions64Low;
#endif

  if (extruded) {
    pos.z += props.elevations * vertexPositions.y * elevationScale;
  }
  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  if (extruded) {
  #ifdef IS_SIDE_VERTEX
    normal = vec3(
      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),
      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),
      0.0);
    normal = project_offset_normal(normal);
  #else
    normal = project_normal(vec3(0.0, 0.0, 1.0));
  #endif
    geometry.normal = normal;
    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);
    vColor = vec4(lightColor, colors.a * opacity);
  } else {
    vColor = vec4(colors.rgb, colors.a * opacity);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,uMt=`#define SHADER_NAME solid-polygon-layer-vertex-shader

attribute vec3 positions;
attribute vec3 positions64Low;
attribute float elevations;
attribute vec4 fillColors;
attribute vec4 lineColors;
attribute vec3 pickingColors;

`.concat(_H,`

void main(void) {
  PolygonProps props;

  props.positions = positions;
  props.positions64Low = positions64Low;
  props.elevations = elevations;
  props.fillColors = fillColors;
  props.lineColors = lineColors;
  props.pickingColors = pickingColors;

  calculatePosition(props);
}
`),cMt=`#define SHADER_NAME solid-polygon-layer-vertex-shader-side
#define IS_SIDE_VERTEX


attribute vec3 instancePositions;
attribute vec3 nextPositions;
attribute vec3 instancePositions64Low;
attribute vec3 nextPositions64Low;
attribute float instanceElevations;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

`.concat(_H,`

void main(void) {
  PolygonProps props;

  #if RING_WINDING_ORDER_CW == 1
    props.positions = instancePositions;
    props.positions64Low = instancePositions64Low;
    props.nextPositions = nextPositions;
    props.nextPositions64Low = nextPositions64Low;
  #else
    props.positions = nextPositions;
    props.positions64Low = nextPositions64Low;
    props.nextPositions = instancePositions;
    props.nextPositions64Low = instancePositions64Low;
  #endif
  props.elevations = instanceElevations;
  props.fillColors = instanceFillColors;
  props.lineColors = instanceLineColors;
  props.pickingColors = instancePickingColors;

  calculatePosition(props);
}
`),fMt=`#define SHADER_NAME solid-polygon-layer-fragment-shader

precision highp float;

varying vec4 vColor;

void main(void) {
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,Q_=[0,0,0,255],hMt={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:e=>e.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:Q_},getLineColor:{type:"accessor",value:Q_},material:!0},l1={enter:(e,t)=>t.length?t.subarray(t.length-e.length):e};class t4 extends Na{constructor(...t){super(...t),x(this,"state",void 0)}getShaders(t){return super.getShaders({vs:t==="top"?uMt:cMt,fs:fMt,defines:{RING_WINDING_ORDER_CW:!this.props._normalize&&this.props._windingOrder==="CCW"?0:1},modules:[ef,SPt,rf]})}get wrapLongitude(){return!1}initializeState(){const{gl:t,viewport:r}=this.context;let{coordinateSystem:n}=this.props;r.isGeospatial&&n===xe.DEFAULT&&(n=xe.LNGLAT),this.setState({numInstances:0,polygonTesselator:new lMt({preproject:n===xe.LNGLAT&&r.projectFlat.bind(r),fp64:this.use64bitPositions(),IndexType:!t||Ox(t,ur.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});const i=this.getAttributeManager(),o=!0;i.remove(["instancePickingColors"]),i.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:o},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:l1,accessor:"getPolygon",update:this.calculatePositions,noAlloc:o,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:o},elevations:{size:1,transition:l1,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:l1,accessor:"getFillColor",defaultValue:Q_,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:l1,accessor:"getLineColor",defaultValue:Q_,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:(a,{index:s,target:l})=>this.encodePickingColor(a&&a.__source?a.__source.index:s,l),shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}getPickingInfo(t){const r=super.getPickingInfo(t),{index:n}=r,{data:i}=this.props;return i[0]&&i[0].__source&&(r.object=i.find(o=>o.__source.index===n)),r}disablePickingIndex(t){const{data:r}=this.props;if(r[0]&&r[0].__source)for(let n=0;n<r.length;n++)r[n].__source.index===t&&this._disablePickingIndex(n);else this._disablePickingIndex(t)}draw({uniforms:t}){const{extruded:r,filled:n,wireframe:i,elevationScale:o}=this.props,{topModel:a,sideModel:s,polygonTesselator:l}=this.state,u={...t,extruded:Boolean(r),elevationScale:o};s&&(s.setInstanceCount(l.instanceCount-1),s.setUniforms(u),i&&(s.setDrawMode(3),s.setUniforms({isWireframe:!0}).draw()),n&&(s.setDrawMode(6),s.setUniforms({isWireframe:!1}).draw())),a&&(a.setVertexCount(l.vertexCount),a.setUniforms(u).draw())}updateState(t){super.updateState(t),this.updateGeometry(t);const{props:r,oldProps:n,changeFlags:i}=t,o=this.getAttributeManager();if(i.extensionsChanged||r.filled!==n.filled||r.extruded!==n.extruded){var s;(s=this.state.models)===null||s===void 0||s.forEach(l=>l.delete()),this.setState(this._getModels(this.context.gl)),o.invalidateAll()}}updateGeometry({props:t,oldProps:r,changeFlags:n}){if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon)){const{polygonTesselator:o}=this.state,a=t.data.attributes||{};o.updateGeometry({data:t.data,normalize:t._normalize,geometryBuffer:a.getPolygon,buffers:a,getGeometry:t.getPolygon,positionFormat:t.positionFormat,wrapLongitude:t.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:n.dataChanged}),this.setState({numInstances:o.instanceCount,startIndices:o.vertexStarts}),n.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(t){const{id:r,filled:n,extruded:i}=this.props;let o,a;if(n){const s=this.getShaders("top");s.defines.NON_INSTANCED_MODEL=1,o=new Ss(t,{...s,id:"".concat(r,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0})}return i&&(a=new Ss(t,{...this.getShaders("side"),id:"".concat(r,"-side"),geometry:new tf({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}),a.userData.excludeAttributes={indices:!0}),{models:[a,o].filter(Boolean),topModel:o,sideModel:a}}calculateIndices(t){const{polygonTesselator:r}=this.state;t.startIndices=r.indexStarts,t.value=r.get("indices")}calculatePositions(t){const{polygonTesselator:r}=this.state;t.startIndices=r.vertexStarts,t.value=r.get("positions")}calculateVertexValid(t){t.value=this.state.polygonTesselator.get("vertexValid")}}x(t4,"defaultProps",hMt);x(t4,"layerName","SolidPolygonLayer");function dMt({data:e,getIndex:t,dataRange:r,replace:n}){const{startRow:i=0,endRow:o=1/0}=r,a=e.length;let s=a,l=a;for(let h=0;h<a;h++){const d=t(e[h]);if(s>h&&d>=i&&(s=h),d>=o){l=h;break}}let u=s;const f=l-s!==n.length?e.slice(l):void 0;for(let h=0;h<n.length;h++)e[u++]=n[h];if(f){for(let h=0;h<f.length;h++)e[u++]=f[h];e.length=u}return{startRow:s,endRow:s+n.length}}function pMt(e,t){if(!e)return null;const r="startIndices"in e?e.startIndices[t]:t,n=e.featureIds.value[r];return r!==-1?gMt(e,n,r):null}function gMt(e,t,r){const n={properties:{...e.properties[t]}};for(const i in e.numericProps)n.properties[i]=e.numericProps[i].value[r];return n}function vMt(e,t){const r={points:null,lines:null,polygons:null};for(const n in r){const i=e[n].globalFeatureIds.value;r[n]=new Uint8ClampedArray(i.length*3);const o=[];for(let a=0;a<i.length;a++)t(i[a],o),r[n][a*3+0]=o[0],r[n][a*3+1]=o[1],r[n][a*3+2]=o[2]}return r}const mMt=`#define SHADER_NAME multi-icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float gamma;
uniform bool sdf;
uniform float alphaCutoff;
uniform float buffer;
uniform float outlineBuffer;
uniform vec4 outlineColor;

varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  if (!picking_uActive) {
    float alpha = texture2D(iconsTexture, vTextureCoords).a;
    vec4 color = vColor;

    // if enable sdf (signed distance fields)
    if (sdf) {
      float distance = alpha;
      alpha = smoothstep(buffer - gamma, buffer + gamma, distance);

      if (outlineBuffer > 0.0) {
        float inFill = alpha;
        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);
        color = mix(outlineColor, vColor, inFill);
        alpha = inBorder;
      }
    }

    // Take the global opacity and the alpha from color into account for the alpha component
    float a = alpha * color.a;
    
    if (a < alphaCutoff) {
      discard;
    }

    gl_FragColor = vec4(color.rgb, a * opacity);
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,u8=192/256,c8=[],yMt={getIconOffsets:{type:"accessor",value:e=>e.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}};class e4 extends Lc{constructor(...t){super(...t),x(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:mMt}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(r,{index:n,target:i})=>this.encodePickingColor(n,i)}})}updateState(t){super.updateState(t);const{props:r,oldProps:n}=t;let{outlineColor:i}=r;i!==n.outlineColor&&(i=i.map(o=>o/255),i[3]=Number.isFinite(i[3])?i[3]:1,this.setState({outlineColor:i})),!r.sdf&&r.outlineWidth&&de.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(t){const{sdf:r,smoothing:n,outlineWidth:i}=this.props,{outlineColor:o}=this.state;t.uniforms={...t.uniforms,buffer:u8,outlineBuffer:i?Math.max(n,u8*(1-i)):-1,gamma:n,sdf:Boolean(r),outlineColor:o},super.draw(t)}getInstanceOffset(t){return t?Array.from(t).flatMap(r=>super.getInstanceOffset(r)):c8}getInstanceColorMode(t){return 1}getInstanceIconFrame(t){return t?Array.from(t).flatMap(r=>super.getInstanceIconFrame(r)):c8}}x(e4,"defaultProps",yMt);x(e4,"layerName","MultiIconLayer");var r4={exports:{}};r4.exports=v0;r4.exports.default=v0;var Lh=1e20;function v0(e,t,r,n,i,o){this.fontSize=e||24,this.buffer=t===void 0?3:t,this.cutoff=n||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=r||8;var a=this.size=this.fontSize+this.buffer*2,s=a+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function _Mt(e,t,r,n,i,o,a){o.fill(Lh,0,t*r),a.fill(0,0,t*r);for(var s=(t-n)/2,l=0;l<i;l++)for(var u=0;u<n;u++){var c=(l+s)*t+u+s,f=e.data[4*(l*n+u)+3]/255;if(f===1)o[c]=0,a[c]=Lh;else if(f===0)o[c]=Lh,a[c]=0;else{var h=Math.max(0,.5-f),d=Math.max(0,f-.5);o[c]=h*h,a[c]=d*d}}}function bMt(e,t,r,n,i,o,a){for(var s=0;s<t*r;s++){var l=Math.sqrt(n[s])-Math.sqrt(i[s]);e[s]=Math.round(255-255*(l/o+a))}}v0.prototype._draw=function(e,t){var r=this.ctx.measureText(e),n=r.width,i=2*this.buffer,o,a,s,l,u,c,f,h;t&&this.useMetrics?(u=Math.floor(r.actualBoundingBoxAscent),h=this.buffer+Math.ceil(r.actualBoundingBoxAscent),c=this.buffer,f=this.buffer,a=Math.min(this.size,Math.ceil(r.actualBoundingBoxRight-r.actualBoundingBoxLeft)),l=Math.min(this.size-c,Math.ceil(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)),o=a+i,s=l+i,this.ctx.textBaseline="alphabetic"):(o=a=this.size,s=l=this.size,u=19*this.fontSize/24,c=f=0,h=this.middle,this.ctx.textBaseline="middle");var d;a&&l&&(this.ctx.clearRect(f,c,a,l),this.ctx.fillText(e,this.buffer,h),d=this.ctx.getImageData(f,c,a,l));var p=new Uint8ClampedArray(o*s);return _Mt(d,o,s,a,l,this.gridOuter,this.gridInner),f8(this.gridOuter,o,s,this.f,this.v,this.z),f8(this.gridInner,o,s,this.f,this.v,this.z),bMt(p,o,s,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:p,metrics:{width:a,height:l,sdfWidth:o,sdfHeight:s,top:u,left:0,advance:n}}};v0.prototype.draw=function(e){return this._draw(e,!1).data};v0.prototype.drawWithMetrics=function(e){return this._draw(e,!0)};function f8(e,t,r,n,i,o){for(var a=0;a<t;a++)h8(e,a,t,r,n,i,o);for(var s=0;s<r;s++)h8(e,s*t,1,t,n,i,o)}function h8(e,t,r,n,i,o,a){var s,l,u,c;for(o[0]=0,a[0]=-Lh,a[1]=Lh,s=0;s<n;s++)i[s]=e[t+s*r];for(s=1,l=0,u=0;s<n;s++){do c=o[l],u=(i[s]-i[c]+s*s-c*c)/(s-c)/2;while(u<=a[l]&&--l>-1);l++,o[l]=s,a[l]=u,a[l+1]=Lh}for(s=0,l=0;s<n;s++){for(;a[l+1]<s;)l++;c=o[l],e[t+s*r]=i[c]+(s-c)*(s-c)}}const wMt=32,SMt=[];function TMt(e){return Math.pow(2,Math.ceil(Math.log2(e)))}function kMt({characterSet:e,getFontWidth:t,fontHeight:r,buffer:n,maxCanvasWidth:i,mapping:o={},xOffset:a=0,yOffset:s=0}){let l=0,u=a;for(const f of e)if(!o[f]){const h=t(f);u+h+n*2>i&&(u=0,l++),o[f]={x:u+n,y:s+l*(r+n*2)+n,width:h,height:r},u+=h+n*2}const c=r+n*2;return{mapping:o,xOffset:u,yOffset:s+l*c,canvasHeight:TMt(s+(l+1)*c)}}function bH(e,t,r,n){let i=0;for(let a=t;a<r;a++){var o;const s=e[a];i+=((o=n[s])===null||o===void 0?void 0:o.width)||0}return i}function wH(e,t,r,n,i,o){let a=t,s=0;for(let l=t;l<r;l++){const u=bH(e,l,l+1,i);s+u>n&&(a<l&&o.push(l),a=l,s=0),s+=u}return s}function PMt(e,t,r,n,i,o){let a=t,s=t,l=t,u=0;for(let c=t;c<r;c++)if((e[c]===" "||e[c+1]===" "||c+1===r)&&(l=c+1),l>s){let f=bH(e,s,l,i);u+f>n&&(a<s&&(o.push(s),a=s,u=0),f>n&&(f=wH(e,s,l,n,i,o),a=o[o.length-1])),s=l,u+=f}return u}function EMt(e,t,r,n,i=0,o){o===void 0&&(o=e.length);const a=[];return t==="break-all"?wH(e,i,o,r,n,a):PMt(e,i,o,r,n,a),a}function CMt(e,t,r,n,i,o){let a=0,s=0;for(let l=t;l<r;l++){const u=e[l],c=n[u];c?(s||(s=c.height),i[l]=a+c.width/2,a+=c.width):(de.warn("Missing character: ".concat(u," (").concat(u.codePointAt(0),")"))(),i[l]=a,a+=wMt)}o[0]=a,o[1]=s}function d8(e,t,r,n,i){const o=Array.from(e),a=o.length,s=new Array(a),l=new Array(a),u=new Array(a),c=(r==="break-word"||r==="break-all")&&isFinite(n)&&n>0,f=[0,0],h=[0,0];let d=0,p=0,g=0;for(let m=0;m<=a;m++){const v=o[m];if((v===`
`||m===a)&&(g=m),g>p){const y=c?EMt(o,r,n,i,p,g):SMt;for(let b=0;b<=y.length;b++){const w=b===0?p:y[b-1],T=b<y.length?y[b]:g;CMt(o,w,T,i,s,h);for(let S=w;S<T;S++)l[S]=d+h[1]/2,u[S]=h[0];d=d+h[1]*t,f[0]=Math.max(f[0],h[0])}p=g}v===`
`&&(s[p]=0,l[p]=0,u[p]=0,p++)}return f[1]=d,{x:s,y:l,rowWidth:u,size:f}}function AMt({value:e,length:t,stride:r,offset:n,startIndices:i,characterSet:o}){const a=e.BYTES_PER_ELEMENT,s=r?r/a:1,l=n?n/a:0,u=i[t]||Math.ceil((e.length-l)/s),c=o&&new Set,f=new Array(t);let h=e;if(s>1||l>0){const d=e.constructor;h=new d(u);for(let p=0;p<u;p++)h[p]=e[p*s+l]}for(let d=0;d<t;d++){const p=i[d],g=i[d+1]||u,m=h.subarray(p,g);f[d]=String.fromCodePoint.apply(null,m),c&&m.forEach(c.add,c)}if(c)for(const d of c)o.add(String.fromCodePoint(d));return{texts:f,characterCount:u}}class SH{constructor(t=5){x(this,"limit",void 0),x(this,"_cache",{}),x(this,"_order",[]),this.limit=t}get(t){const r=this._cache[t];return r&&(this._deleteOrder(t),this._appendOrder(t)),r}set(t,r){this._cache[t]?(this.delete(t),this._cache[t]=r,this._appendOrder(t)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[t]=r,this._appendOrder(t))}delete(t){this._cache[t]&&(delete this._cache[t],this._deleteOrder(t))}_deleteOrder(t){const r=this._order.indexOf(t);r>=0&&this._order.splice(r,1)}_appendOrder(t){this._order.push(t)}}function xMt(){const e=[];for(let t=32;t<128;t++)e.push(String.fromCharCode(t));return e}const Jg={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:xMt(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1},p8=1024,MMt=.9,g8=1.2,TH=3;let tb=new SH(TH);function IMt(e,t){let r;typeof t=="string"?r=new Set(Array.from(t)):r=new Set(t);const n=tb.get(e);if(!n)return r;for(const i in n.mapping)r.has(i)&&r.delete(i);return r}function LMt(e,t){for(let r=0;r<e.length;r++)t.data[4*r+3]=e[r]}function v8(e,t,r,n){e.font="".concat(n," ").concat(r,"px ").concat(t),e.fillStyle="#000",e.textBaseline="alphabetic",e.textAlign="left"}function OMt(e){de.assert(Number.isFinite(e)&&e>=TH,"Invalid cache limit"),tb=new SH(e)}class RMt{constructor(){x(this,"props",{...Jg}),x(this,"_key",void 0),x(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){return g8}setProps(t={}){Object.assign(this.props,t);const r=this._key;this._key=this._getKey();const n=IMt(this._key,this.props.characterSet),i=tb.get(this._key);if(i&&n.size===0){this._key!==r&&(this._atlas=i);return}const o=this._generateFontAtlas(this._key,n,i);this._atlas=o,tb.set(this._key,o)}_generateFontAtlas(t,r,n){const{fontFamily:i,fontWeight:o,fontSize:a,buffer:s,sdf:l,radius:u,cutoff:c}=this.props;let f=n&&n.data;f||(f=document.createElement("canvas"),f.width=p8);const h=f.getContext("2d");v8(h,i,a,o);const{mapping:d,canvasHeight:p,xOffset:g,yOffset:m}=kMt({getFontWidth:v=>h.measureText(v).width,fontHeight:a*g8,buffer:s,characterSet:r,maxCanvasWidth:p8,...n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset}});if(f.height!==p){const v=h.getImageData(0,0,f.width,f.height);f.height=p,h.putImageData(v,0,0)}if(v8(h,i,a,o),l){const v=new r4.exports(a,s,u,c,i,o),y=h.getImageData(0,0,v.size,v.size);for(const b of r)LMt(v.draw(b),y),h.putImageData(y,d[b].x-s,d[b].y+s)}else for(const v of r)h.fillText(v,d[v].x,d[v].y+a*MMt);return{xOffset:g,yOffset:m,mapping:d,data:f,width:f.width,height:f.height}}_getKey(){const{fontFamily:t,fontWeight:r,fontSize:n,buffer:i,sdf:o,radius:a,cutoff:s}=this.props;return o?"".concat(t," ").concat(r," ").concat(n," ").concat(i," ").concat(a," ").concat(s):"".concat(t," ").concat(r," ").concat(n," ").concat(i)}}const DMt=`#define SHADER_NAME text-background-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute vec4 instanceRects;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec2 instancePixelOffsets;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform bool billboard;
uniform float opacity;
uniform float sizeScale;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform vec4 padding;
uniform int sizeUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = radians(angle);
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;
  vLineWidth = instanceLineWidths;

  // convert size in meters to pixels, then scaled and clamp

  // project meters to pixels and clamp to limits
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),
    sizeMinPixels, sizeMaxPixels
  );

  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;

  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);
  pixelOffset += instancePixelOffsets;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Apply opacity to instance color, or return instance picking color
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,NMt=`#define SHADER_NAME text-background-layer-fragment-shader

precision highp float;

uniform bool stroked;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

void main(void) {
  geometry.uv = uv;

  vec2 pixelPosition = uv * dimensions;
  if (stroked) {
    float distToEdge = min(
      min(pixelPosition.x, dimensions.x - pixelPosition.x),
      min(pixelPosition.y, dimensions.y - pixelPosition.y)
    );
    float isBorder = smoothedge(distToEdge, vLineWidth);
    gl_FragColor = mix(vFillColor, vLineColor, isBorder);
  } else {
    gl_FragColor = vFillColor;
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,FMt={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:e=>e.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class n4 extends Na{constructor(...t){super(...t),x(this,"state",void 0)}getShaders(){return super.getShaders({vs:DMt,fs:NMt,modules:[ef,rf]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){super.updateState(t);const{changeFlags:r}=t;if(r.extensionsChanged){var n;const{gl:i}=this.context;(n=this.state.model)===null||n===void 0||n.delete(),this.state.model=this._getModel(i),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{billboard:r,sizeScale:n,sizeUnits:i,sizeMinPixels:o,sizeMaxPixels:a,getLineWidth:s}=this.props;let{padding:l}=this.props;l.length<4&&(l=[l[0],l[1],l[0],l[1]]),this.state.model.setUniforms(t).setUniforms({billboard:r,stroked:Boolean(s),padding:l,sizeUnits:Yl[i],sizeScale:n,sizeMinPixels:o,sizeMaxPixels:a}).draw()}_getModel(t){const r=[0,0,1,0,1,1,0,1];return new Ss(t,{...this.getShaders(),id:this.props.id,geometry:new tf({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array(r)}}}),isInstanced:!0})}}x(n4,"defaultProps",FMt);x(n4,"layerName","TextBackgroundLayer");const m8={start:1,middle:0,end:-1},y8={top:1,center:0,bottom:-1},W3=[0,0,0,255],$Mt=1,BMt={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:W3},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:Jg.characterSet},fontFamily:Jg.fontFamily,fontWeight:Jg.fontWeight,lineHeight:$Mt,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:W3},fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:e=>e.text},getPosition:{type:"accessor",value:e=>e.position},getColor:{type:"accessor",value:W3},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class i4 extends w2{constructor(...t){super(...t),x(this,"state",void 0),x(this,"getBoundingRect",(r,n)=>{const i=this.state.fontAtlasManager.mapping,o=this.state.getText,{wordBreak:a,maxWidth:s,lineHeight:l,getTextAnchor:u,getAlignmentBaseline:c}=this.props,f=o(r,n)||"",{size:[h,d]}=d8(f,l,a,s,i),p=m8[typeof u=="function"?u(r,n):u],g=y8[typeof c=="function"?c(r,n):c];return[(p-1)*h/2,(g-1)*d/2,h,d]}),x(this,"getIconOffsets",(r,n)=>{const i=this.state.fontAtlasManager.mapping,o=this.state.getText,{wordBreak:a,maxWidth:s,lineHeight:l,getTextAnchor:u,getAlignmentBaseline:c}=this.props,f=o(r,n)||"",{x:h,y:d,rowWidth:p,size:[g,m]}=d8(f,l,a,s,i),v=m8[typeof u=="function"?u(r,n):u],y=y8[typeof c=="function"?c(r,n):c],b=h.length,w=new Array(b*2);let T=0;for(let S=0;S<b;S++){const k=(1-v)*(g-p[S])/2;w[T++]=(v-1)*g/2+k+h[S],w[T++]=(y-1)*m/2+d[S]}return w})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new RMt}}updateState(t){const{props:r,oldProps:n,changeFlags:i}=t;(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||r.lineHeight!==n.lineHeight||r.wordBreak!==n.wordBreak||r.maxWidth!==n.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:t}){return t.object=t.index>=0?this.props.data[t.index]:null,t}_updateFontAtlas(){const{fontSettings:t,fontFamily:r,fontWeight:n}=this.props,{fontAtlasManager:i,characterSet:o}=this.state,a={...t,characterSet:o,fontFamily:r,fontWeight:n};if(!i.mapping)return i.setProps(a),!0;for(const s in a)if(a[s]!==i.props[s])return i.setProps(a),!0;return!1}_updateText(){var t;const{data:r,characterSet:n}=this.props,i=(t=r.attributes)===null||t===void 0?void 0:t.getText;let{getText:o}=this.props,a=r.startIndices,s;const l=n==="auto"&&new Set;if(i&&a){const{texts:u,characterCount:c}=AMt({...ArrayBuffer.isView(i)?{value:i}:i,length:r.length,startIndices:a,characterSet:l});s=c,o=(f,{index:h})=>u[h]}else{const{iterable:u,objectInfo:c}=b2(r);a=[0],s=0;for(const f of u){c.index++;const h=Array.from(o(f,c)||"");l&&h.forEach(l.add,l),s+=h.length,a.push(s)}}this.setState({getText:o,startIndices:a,numInstances:s,characterSet:l||n})}renderLayers(){const{startIndices:t,numInstances:r,getText:n,fontAtlasManager:{scale:i,texture:o,mapping:a},styleVersion:s}=this.state,{data:l,_dataDiff:u,getPosition:c,getColor:f,getSize:h,getAngle:d,getPixelOffset:p,getBackgroundColor:g,getBorderColor:m,getBorderWidth:v,backgroundPadding:y,background:b,billboard:w,fontSettings:T,outlineWidth:S,outlineColor:k,sizeScale:E,sizeUnits:P,sizeMinPixels:C,sizeMaxPixels:A,transitions:L,updateTriggers:R}=this.props,D=this.getSubLayerClass("characters",e4),F=this.getSubLayerClass("background",n4);return[b&&new F({getFillColor:g,getLineColor:m,getLineWidth:v,padding:y,getPosition:c,getSize:h,getAngle:d,getPixelOffset:p,billboard:w,sizeScale:E/this.state.fontAtlasManager.props.fontSize,sizeUnits:P,sizeMinPixels:C,sizeMaxPixels:A,transitions:L&&{getPosition:L.getPosition,getAngle:L.getAngle,getSize:L.getSize,getFillColor:L.getBackgroundColor,getLineColor:L.getBorderColor,getLineWidth:L.getBorderWidth,getPixelOffset:L.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:R.getPosition,getAngle:R.getAngle,getSize:R.getSize,getFillColor:R.getBackgroundColor,getLineColor:R.getBorderColor,getLineWidth:R.getBorderWidth,getPixelOffset:R.getPixelOffset,getBoundingRect:{getText:R.getText,getTextAnchor:R.getTextAnchor,getAlignmentBaseline:R.getAlignmentBaseline,styleVersion:s}}}),{data:l.attributes&&l.attributes.background?{length:l.length,attributes:l.attributes.background}:l,_dataDiff:u,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new D({sdf:T.sdf,smoothing:Number.isFinite(T.smoothing)?T.smoothing:Jg.smoothing,outlineWidth:S,outlineColor:k,iconAtlas:o,iconMapping:a,getPosition:c,getColor:f,getSize:h,getAngle:d,getPixelOffset:p,billboard:w,sizeScale:E*i,sizeUnits:P,sizeMinPixels:C*i,sizeMaxPixels:A*i,transitions:L&&{getPosition:L.getPosition,getAngle:L.getAngle,getColor:L.getColor,getSize:L.getSize,getPixelOffset:L.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:R.getText,getPosition:R.getPosition,getAngle:R.getAngle,getColor:R.getColor,getSize:R.getSize,getPixelOffset:R.getPixelOffset,getIconOffsets:{getText:R.getText,getTextAnchor:R.getTextAnchor,getAlignmentBaseline:R.getAlignmentBaseline,styleVersion:s}}}),{data:l,_dataDiff:u,startIndices:t,numInstances:r,getIconOffsets:this.getIconOffsets,getIcon:n})]}static set fontAtlasCacheLimit(t){OMt(t)}}x(i4,"defaultProps",BMt);x(i4,"layerName","TextLayer");const Fy={circle:{type:qx,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:Lc,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:i4,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},$y={type:Jx,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},RE={type:t4,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function Sp({type:e,props:t}){const r={};for(const n in t)r[n]=e.defaultProps[t[n]];return r}function j3(e,t){const{transitions:r,updateTriggers:n}=e.props,i={updateTriggers:{},transitions:r&&{getPosition:r.geometry}};for(const o in t){const a=t[o];let s=e.props[o];o.startsWith("get")&&(s=e.getSubLayerAccessor(s),i.updateTriggers[a]=n[o],r&&(i.transitions[a]=r[o])),i[a]=s}return i}function zMt(e){if(Array.isArray(e))return e;switch(de.assert(e.type,"GeoJSON does not have type"),e.type){case"Feature":return[e];case"FeatureCollection":return de.assert(Array.isArray(e.features),"GeoJSON does not have features array"),e.features;default:return[{geometry:e}]}}function _8(e,t,r={}){const n={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:i=0,endRow:o=e.length}=r;for(let a=i;a<o;a++){const s=e[a];de.assert(s&&s.geometry,"GeoJSON does not have geometry");const{geometry:l}=s;if(l.type==="GeometryCollection"){de.assert(Array.isArray(l.geometries),"GeoJSON does not have geometries array");const{geometries:u}=l;for(let c=0;c<u.length;c++){const f=u[c];b8(f,n,t,s,a)}}else b8(l,n,t,s,a)}return n}function b8(e,t,r,n,i){const{type:o,coordinates:a}=e,{pointFeatures:s,lineFeatures:l,polygonFeatures:u,polygonOutlineFeatures:c}=t;if(!UMt(o,a)){de.warn("".concat(o," coordinates are malformed"))();return}switch(o){case"Point":s.push(r({geometry:e},n,i));break;case"MultiPoint":a.forEach(f=>{s.push(r({geometry:{type:"Point",coordinates:f}},n,i))});break;case"LineString":l.push(r({geometry:e},n,i));break;case"MultiLineString":a.forEach(f=>{l.push(r({geometry:{type:"LineString",coordinates:f}},n,i))});break;case"Polygon":u.push(r({geometry:e},n,i)),a.forEach(f=>{c.push(r({geometry:{type:"LineString",coordinates:f}},n,i))});break;case"MultiPolygon":a.forEach(f=>{u.push(r({geometry:{type:"Polygon",coordinates:f}},n,i)),f.forEach(h=>{c.push(r({geometry:{type:"LineString",coordinates:h}},n,i))})});break}}const VMt={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function UMt(e,t){let r=VMt[e];for(de.assert(r,"Unknown GeoJSON type ".concat(e));t&&--r>0;)t=t[0];return t&&Number.isFinite(t[0])}function kH(){return{points:{},lines:{},polygons:{},polygonsOutline:{}}}function u1(e){return e.geometry.coordinates}function WMt(e,t){const r=kH(),{pointFeatures:n,lineFeatures:i,polygonFeatures:o,polygonOutlineFeatures:a}=e;return r.points.data=n,r.points._dataDiff=t.pointFeatures&&(()=>t.pointFeatures),r.points.getPosition=u1,r.lines.data=i,r.lines._dataDiff=t.lineFeatures&&(()=>t.lineFeatures),r.lines.getPath=u1,r.polygons.data=o,r.polygons._dataDiff=t.polygonFeatures&&(()=>t.polygonFeatures),r.polygons.getPolygon=u1,r.polygonsOutline.data=a,r.polygonsOutline._dataDiff=t.polygonOutlineFeatures&&(()=>t.polygonOutlineFeatures),r.polygonsOutline.getPath=u1,r}function jMt(e,t){const r=kH(),{points:n,lines:i,polygons:o}=e,a=vMt(e,t);return r.points.data={length:n.positions.value.length/n.positions.size,attributes:{...n.attributes,getPosition:n.positions,instancePickingColors:{size:3,value:a.points}},properties:n.properties,numericProps:n.numericProps,featureIds:n.featureIds},r.lines.data={length:i.pathIndices.value.length-1,startIndices:i.pathIndices.value,attributes:{...i.attributes,getPath:i.positions,instancePickingColors:{size:3,value:a.lines}},properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},r.lines._pathType="open",r.polygons.data={length:o.polygonIndices.value.length-1,startIndices:o.polygonIndices.value,attributes:{...o.attributes,getPolygon:o.positions,pickingColors:{size:3,value:a.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},r.polygons._normalize=!1,o.triangles&&(r.polygons.data.attributes.indices=o.triangles.value),r.polygonsOutline.data={length:o.primitivePolygonIndices.value.length-1,startIndices:o.primitivePolygonIndices.value,attributes:{...o.attributes,getPath:o.positions,instancePickingColors:{size:3,value:a.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},r.polygonsOutline._pathType="open",r}const GMt=["points","linestrings","polygons"],HMt={...Sp(Fy.circle),...Sp(Fy.icon),...Sp(Fy.text),...Sp($y),...Sp(RE),stroked:!0,filled:!0,extruded:!1,wireframe:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:e=>e.properties.icon},getText:{type:"accessor",value:e=>e.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class P2 extends w2{initializeState(){this.state={layerProps:{},features:{}}}updateState({props:t,changeFlags:r}){if(!r.dataChanged)return;const{data:n}=this.props,i=n&&"points"in n&&"polygons"in n&&"lines"in n;this.setState({binary:i}),i?this._updateStateBinary({props:t,changeFlags:r}):this._updateStateJSON({props:t,changeFlags:r})}_updateStateBinary({props:t,changeFlags:r}){const n=jMt(t.data,this.encodePickingColor);this.setState({layerProps:n})}_updateStateJSON({props:t,changeFlags:r}){const n=zMt(t.data),i=this.getSubLayerRow.bind(this);let o={};const a={};if(Array.isArray(r.dataChanged)){const l=this.state.features;for(const u in l)o[u]=l[u].slice(),a[u]=[];for(const u of r.dataChanged){const c=_8(n,i,u);for(const f in l)a[f].push(dMt({data:o[f],getIndex:h=>h.__source.index,dataRange:u,replace:c[f]}))}}else o=_8(n,i);const s=WMt(o,a);this.setState({features:o,featuresDiff:a,layerProps:s})}getPickingInfo(t){const r=super.getPickingInfo(t),{index:n,sourceLayer:i}=r;return r.featureType=GMt.find(o=>i.id.startsWith("".concat(this.id,"-").concat(o,"-"))),n>=0&&i.id.startsWith("".concat(this.id,"-points-text"))&&this.state.binary&&(r.index=this.props.data.points.globalFeatureIds.value[n]),r}_updateAutoHighlight(t){const r="".concat(this.id,"-points-"),n=t.featureType==="points";for(const i of this.getSubLayers())i.id.startsWith(r)===n&&i.updateAutoHighlight(t)}_renderPolygonLayer(){const{extruded:t,wireframe:r}=this.props,{layerProps:n}=this.state,i="polygons-fill",o=this.shouldRenderSubLayer(i,n.polygons.data)&&this.getSubLayerClass(i,RE.type);if(o){const a=j3(this,RE.props),s=t&&r;return s||delete a.getLineColor,a.updateTriggers.lineColors=s,new o(a,this.getSubLayerProps({id:i,updateTriggers:a.updateTriggers}),n.polygons)}return null}_renderLineLayers(){const{extruded:t,stroked:r}=this.props,{layerProps:n}=this.state,i="polygons-stroke",o="linestrings",a=!t&&r&&this.shouldRenderSubLayer(i,n.polygonsOutline.data)&&this.getSubLayerClass(i,$y.type),s=this.shouldRenderSubLayer(o,n.lines.data)&&this.getSubLayerClass(o,$y.type);if(a||s){const l=j3(this,$y.props);return[a&&new a(l,this.getSubLayerProps({id:i,updateTriggers:l.updateTriggers}),n.polygonsOutline),s&&new s(l,this.getSubLayerProps({id:o,updateTriggers:l.updateTriggers}),n.lines)]}return null}_renderPointLayers(){const{pointType:t}=this.props,{layerProps:r,binary:n}=this.state;let{highlightedObjectIndex:i}=this.props;!n&&Number.isFinite(i)&&(i=r.points.data.findIndex(s=>s.__source.index===i));const o=new Set(t.split("+")),a=[];for(const s of o){const l="points-".concat(s),u=Fy[s],c=u&&this.shouldRenderSubLayer(l,r.points.data)&&this.getSubLayerClass(l,u.type);if(c){const f=j3(this,u.props);let h=r.points;if(s==="text"&&n){const{instancePickingColors:d,...p}=h.data.attributes;h={...h,data:{...h.data,attributes:p}}}a.push(new c(f,this.getSubLayerProps({id:l,updateTriggers:f.updateTriggers,highlightedObjectIndex:i}),h))}}return a}renderLayers(){const{extruded:t}=this.props,r=this._renderPolygonLayer(),n=this._renderLineLayers(),i=this._renderPointLayers();return[!t&&r,n,i,t&&r]}getSubLayerAccessor(t){const{binary:r}=this.state;return!r||typeof t!="function"?super.getSubLayerAccessor(t):(n,i)=>{const{data:o,index:a}=i,s=pMt(o,a);return t(s,i)}}}x(P2,"layerName","GeoJsonLayer");x(P2,"defaultProps",HMt);class XMt{constructor(t){x(this,"index",void 0),x(this,"isVisible",void 0),x(this,"isSelected",void 0),x(this,"parent",void 0),x(this,"children",void 0),x(this,"content",void 0),x(this,"state",void 0),x(this,"layers",void 0),x(this,"id",void 0),x(this,"bbox",void 0),x(this,"zoom",void 0),x(this,"userData",void 0),x(this,"_abortController",void 0),x(this,"_loader",void 0),x(this,"_loaderId",void 0),x(this,"_isLoaded",void 0),x(this,"_isCancelled",void 0),x(this,"_needsReload",void 0),this.index=t,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._loader=void 0,this._abortController=null,this._loaderId=0,this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1}get data(){return this.isLoading&&this._loader?this._loader.then(()=>this.data):this.content}get isLoaded(){return this._isLoaded&&!this._needsReload}get isLoading(){return Boolean(this._loader)&&!this._isCancelled}get needsReload(){return this._needsReload||this._isCancelled}get byteLength(){const t=this.content?this.content.byteLength:0;return Number.isFinite(t)||de.error("byteLength not defined in tile data")(),t}async _loadData({getData:t,requestScheduler:r,onLoad:n,onError:i}){const{index:o,id:a,bbox:s,userData:l,zoom:u}=this,c=this._loaderId;this._abortController=new AbortController;const{signal:f}=this._abortController,h=await r.scheduleRequest(this,g=>g.isSelected?1:-1);if(!h){this._isCancelled=!0;return}if(this._isCancelled){h.done();return}let d=null,p;try{d=await t({index:o,id:a,bbox:s,userData:l,zoom:u,signal:f})}catch(g){p=g||!0}finally{h.done()}if(c===this._loaderId){if(this._loader=void 0,this.content=d,this._isCancelled&&!d){this._isLoaded=!1;return}this._isLoaded=!0,this._isCancelled=!1,p?i(p,this):n(this)}}loadData(t){return this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1,this._loaderId++,this._loader=this._loadData(t),this._loader}setNeedsReload(){this.isLoading&&(this.abort(),this._loader=void 0),this._needsReload=!0}abort(){var t;this.isLoaded||(this._isCancelled=!0,(t=this._abortController)===null||t===void 0||t.abort())}}const kn={OUTSIDE:-1,INTERSECTING:0,INSIDE:1},w8=new Nt,YMt=new Nt;class o4{constructor(t=[0,0,0],r=[0,0,0],n){x(this,"center",void 0),x(this,"halfDiagonal",void 0),x(this,"minimum",void 0),x(this,"maximum",void 0),n=n||w8.copy(t).add(r).scale(.5),this.center=new Nt(n),this.halfDiagonal=new Nt(r).subtract(this.center),this.minimum=new Nt(t),this.maximum=new Nt(r)}clone(){return new o4(this.minimum,this.maximum,this.center)}equals(t){return this===t||Boolean(t)&&this.minimum.equals(t.minimum)&&this.maximum.equals(t.maximum)}transform(t){return this.center.transformAsPoint(t),this.halfDiagonal.transform(t),this.minimum.transform(t),this.maximum.transform(t),this}intersectPlane(t){const{halfDiagonal:r}=this,n=YMt.from(t.normal),i=r.x*Math.abs(n.x)+r.y*Math.abs(n.y)+r.z*Math.abs(n.z),o=this.center.dot(n)+t.distance;return o-i>0?kn.INSIDE:o+i<0?kn.OUTSIDE:kn.INTERSECTING}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const r=w8.from(t).subtract(this.center),{halfDiagonal:n}=this;let i=0,o;return o=Math.abs(r.x)-n.x,o>0&&(i+=o*o),o=Math.abs(r.y)-n.y,o>0&&(i+=o*o),o=Math.abs(r.z)-n.z,o>0&&(i+=o*o),i}}const Tp=new Nt,S8=new Nt;class a4{constructor(t=[0,0,0],r=0){x(this,"center",void 0),x(this,"radius",void 0),this.radius=-0,this.center=new Nt,this.fromCenterRadius(t,r)}fromCenterRadius(t,r){return this.center.from(t),this.radius=r,this}fromCornerPoints(t,r){return r=Tp.from(r),this.center=new Nt().from(t).add(r).scale(.5),this.radius=this.center.distance(r),this}equals(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.radius===t.radius}clone(){return new a4(this.center,this.radius)}union(t){const r=this.center,n=this.radius,i=t.center,o=t.radius,a=Tp.copy(i).subtract(r),s=a.magnitude();if(n>=s+o)return this.clone();if(o>=s+n)return t.clone();const l=(n+s+o)*.5;return S8.copy(a).scale((-n+l)/s).add(r),this.center.copy(S8),this.radius=l,this}expand(t){const n=Tp.from(t).subtract(this.center).magnitude();return n>this.radius&&(this.radius=n),this}transform(t){this.center.transform(t);const r=Ekt(Tp,t);return this.radius=Math.max(r[0],Math.max(r[1],r[2]))*this.radius,this}distanceSquaredTo(t){const r=this.distanceTo(t);return r*r}distanceTo(t){const n=Tp.from(t).subtract(this.center);return Math.max(0,n.len()-this.radius)}intersectPlane(t){const r=this.center,n=this.radius,o=t.normal.dot(r)+t.distance;return o<-n?kn.OUTSIDE:o<n?kn.INTERSECTING:kn.INSIDE}}const KMt=new Nt,ZMt=new Nt,c1=new Nt,f1=new Nt,h1=new Nt,qMt=new Nt,JMt=new Nt,Xa={COLUMN0ROW0:0,COLUMN0ROW1:1,COLUMN0ROW2:2,COLUMN1ROW0:3,COLUMN1ROW1:4,COLUMN1ROW2:5,COLUMN2ROW0:6,COLUMN2ROW1:7,COLUMN2ROW2:8};class s4{constructor(t=[0,0,0],r=[0,0,0,0,0,0,0,0,0]){x(this,"center",void 0),x(this,"halfAxes",void 0),this.center=new Nt().from(t),this.halfAxes=new fn(r)}get halfSize(){const t=this.halfAxes.getColumn(0),r=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2);return[new Nt(t).len(),new Nt(r).len(),new Nt(n).len()]}get quaternion(){const t=this.halfAxes.getColumn(0),r=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2),i=new Nt(t).normalize(),o=new Nt(r).normalize(),a=new Nt(n).normalize();return new fD().fromMatrix3(new fn([...i,...o,...a]))}fromCenterHalfSizeQuaternion(t,r,n){const i=new fD(n),o=new fn().fromQuaternion(i);return o[0]=o[0]*r[0],o[1]=o[1]*r[0],o[2]=o[2]*r[0],o[3]=o[3]*r[1],o[4]=o[4]*r[1],o[5]=o[5]*r[1],o[6]=o[6]*r[2],o[7]=o[7]*r[2],o[8]=o[8]*r[2],this.center=new Nt().from(t),this.halfAxes=o,this}clone(){return new s4(this.center,this.halfAxes)}equals(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.halfAxes.equals(t.halfAxes)}getBoundingSphere(t=new a4){const r=this.halfAxes,n=r.getColumn(0,c1),i=r.getColumn(1,f1),o=r.getColumn(2,h1),a=KMt.copy(n).add(i).add(o);return t.center.copy(this.center),t.radius=a.magnitude(),t}intersectPlane(t){const r=this.center,n=t.normal,i=this.halfAxes,o=n.x,a=n.y,s=n.z,l=Math.abs(o*i[Xa.COLUMN0ROW0]+a*i[Xa.COLUMN0ROW1]+s*i[Xa.COLUMN0ROW2])+Math.abs(o*i[Xa.COLUMN1ROW0]+a*i[Xa.COLUMN1ROW1]+s*i[Xa.COLUMN1ROW2])+Math.abs(o*i[Xa.COLUMN2ROW0]+a*i[Xa.COLUMN2ROW1]+s*i[Xa.COLUMN2ROW2]),u=n.dot(r)+t.distance;return u<=-l?kn.OUTSIDE:u>=l?kn.INSIDE:kn.INTERSECTING}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const r=ZMt.from(t).subtract(this.center),n=this.halfAxes,i=n.getColumn(0,c1),o=n.getColumn(1,f1),a=n.getColumn(2,h1),s=i.magnitude(),l=o.magnitude(),u=a.magnitude();i.normalize(),o.normalize(),a.normalize();let c=0,f;return f=Math.abs(r.dot(i))-s,f>0&&(c+=f*f),f=Math.abs(r.dot(o))-l,f>0&&(c+=f*f),f=Math.abs(r.dot(a))-u,f>0&&(c+=f*f),c}computePlaneDistances(t,r,n=[-0,-0]){let i=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;const a=this.center,s=this.halfAxes,l=s.getColumn(0,c1),u=s.getColumn(1,f1),c=s.getColumn(2,h1),f=qMt.copy(l).add(u).add(c).add(a),h=JMt.copy(f).subtract(t);let d=r.dot(h);return i=Math.min(d,i),o=Math.max(d,o),f.copy(a).add(l).add(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),f.copy(a).add(l).subtract(u).add(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),f.copy(a).add(l).subtract(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),a.copy(f).subtract(l).add(u).add(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),a.copy(f).subtract(l).add(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),a.copy(f).subtract(l).subtract(u).add(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),a.copy(f).subtract(l).subtract(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),n[0]=i,n[1]=o,n}transform(t){this.center.transformAsPoint(t);const r=this.halfAxes.getColumn(0,c1);r.transformAsPoint(t);const n=this.halfAxes.getColumn(1,f1);n.transformAsPoint(t);const i=this.halfAxes.getColumn(2,h1);return i.transformAsPoint(t),this.halfAxes=new fn([...r,...n,...i]),this}getTransform(){throw new Error("not implemented")}}const T8=new Nt,k8=new Nt;class td{constructor(t=[0,0,1],r=0){x(this,"normal",void 0),x(this,"distance",void 0),this.normal=new Nt,this.distance=-0,this.fromNormalDistance(t,r)}fromNormalDistance(t,r){return Av(Number.isFinite(r)),this.normal.from(t).normalize(),this.distance=r,this}fromPointNormal(t,r){t=T8.from(t),this.normal.from(r).normalize();const n=-this.normal.dot(t);return this.distance=n,this}fromCoefficients(t,r,n,i){return this.normal.set(t,r,n),Av(Ea(this.normal.len(),1)),this.distance=i,this}clone(){return new td(this.normal,this.distance)}equals(t){return Ea(this.distance,t.distance)&&Ea(this.normal,t.normal)}getPointDistance(t){return this.normal.dot(t)+this.distance}transform(t){const r=k8.copy(this.normal).transformAsVector(t).normalize(),n=this.normal.scale(-this.distance).transform(t);return this.fromPointNormal(n,r)}projectPointOntoPlane(t,r=[0,0,0]){t=T8.from(t);const n=this.getPointDistance(t),i=k8.copy(this.normal).scale(n);return t.subtract(i).to(r)}}const P8=[new Nt([1,0,0]),new Nt([0,1,0]),new Nt([0,0,1])],E8=new Nt,QMt=new Nt;new td(new Nt(1,0,0),0);class us{constructor(t=[]){x(this,"planes",void 0),this.planes=t}fromBoundingSphere(t){this.planes.length=2*P8.length;const r=t.center,n=t.radius;let i=0;for(const o of P8){let a=this.planes[i],s=this.planes[i+1];a||(a=this.planes[i]=new td),s||(s=this.planes[i+1]=new td);const l=E8.copy(o).scale(-n).add(r);-o.dot(l),a.fromPointNormal(l,o);const u=E8.copy(o).scale(n).add(r),c=QMt.copy(o).negate();-c.dot(u),s.fromPointNormal(u,c),i+=2}return this}computeVisibility(t){let r=kn.INSIDE;for(const n of this.planes)switch(t.intersectPlane(n)){case kn.OUTSIDE:return kn.OUTSIDE;case kn.INTERSECTING:r=kn.INTERSECTING;break}return r}computeVisibilityWithPlaneMask(t,r){if(Av(Number.isFinite(r),"parentPlaneMask is required."),r===us.MASK_OUTSIDE||r===us.MASK_INSIDE)return r;let n=us.MASK_INSIDE;const i=this.planes;for(let o=0;o<this.planes.length;++o){const a=o<31?1<<o:0;if(o<31&&(r&a)===0)continue;const s=i[o],l=t.intersectPlane(s);if(l===kn.OUTSIDE)return us.MASK_OUTSIDE;l===kn.INTERSECTING&&(n|=a)}return n}}x(us,"MASK_OUTSIDE",4294967295);x(us,"MASK_INSIDE",0);x(us,"MASK_INDETERMINATE",2147483647);new Nt;new Nt;new Nt;new Nt;new Nt;new Nt;new Nt;new Nt;new Nt;new Nt;new Nt;new Nt;new Nt;new Nt;new Nt;new Nt;new Nt;const fa=new fn,tIt=new fn,eIt=new fn,d1=new fn,C8=new fn;function rIt(e,t={}){const r=TG.EPSILON20,n=10;let i=0,o=0;const a=tIt,s=eIt;a.identity(),s.copy(e);const l=r*nIt(s);for(;o<n&&iIt(s)>l;)oIt(s,d1),C8.copy(d1).transpose(),s.multiplyRight(d1),s.multiplyLeft(C8),a.multiplyRight(d1),++i>2&&(++o,i=0);return t.unitary=a.toTarget(t.unitary),t.diagonal=s.toTarget(t.diagonal),t}function nIt(e){let t=0;for(let r=0;r<9;++r){const n=e[r];t+=n*n}return Math.sqrt(t)}const DE=[1,0,0],NE=[2,2,1];function iIt(e){let t=0;for(let r=0;r<3;++r){const n=e[fa.getElementIndex(NE[r],DE[r])];t+=2*n*n}return Math.sqrt(t)}function oIt(e,t){const r=TG.EPSILON15;let n=0,i=1;for(let u=0;u<3;++u){const c=Math.abs(e[fa.getElementIndex(NE[u],DE[u])]);c>n&&(i=u,n=c)}const o=DE[i],a=NE[i];let s=1,l=0;if(Math.abs(e[fa.getElementIndex(a,o)])>r){const u=e[fa.getElementIndex(a,a)],c=e[fa.getElementIndex(o,o)],f=e[fa.getElementIndex(a,o)],h=(u-c)/2/f;let d;h<0?d=-1/(-h+Math.sqrt(1+h*h)):d=1/(h+Math.sqrt(1+h*h)),s=1/Math.sqrt(1+d*d),l=d*s}return fn.IDENTITY.to(t),t[fa.getElementIndex(o,o)]=t[fa.getElementIndex(a,a)]=s,t[fa.getElementIndex(a,o)]=l,t[fa.getElementIndex(o,a)]=-l,t}const Qs=new Nt,aIt=new Nt,sIt=new Nt,lIt=new Nt,uIt=new Nt,cIt=new fn,fIt={diagonal:new fn,unitary:new fn};function hIt(e,t=new s4){if(!e||e.length===0)return t.halfAxes=new fn([0,0,0,0,0,0,0,0,0]),t.center=new Nt,t;const r=e.length,n=new Nt(0,0,0);for(const P of e)n.add(P);const i=1/r;n.multiplyByScalar(i);let o=0,a=0,s=0,l=0,u=0,c=0;for(const P of e){const C=Qs.copy(P).subtract(n);o+=C.x*C.x,a+=C.x*C.y,s+=C.x*C.z,l+=C.y*C.y,u+=C.y*C.z,c+=C.z*C.z}o*=i,a*=i,s*=i,l*=i,u*=i,c*=i;const f=cIt;f[0]=o,f[1]=a,f[2]=s,f[3]=a,f[4]=l,f[5]=u,f[6]=s,f[7]=u,f[8]=c;const{unitary:h}=rIt(f,fIt),d=t.halfAxes.copy(h);let p=d.getColumn(0,sIt),g=d.getColumn(1,lIt),m=d.getColumn(2,uIt),v=-Number.MAX_VALUE,y=-Number.MAX_VALUE,b=-Number.MAX_VALUE,w=Number.MAX_VALUE,T=Number.MAX_VALUE,S=Number.MAX_VALUE;for(const P of e)Qs.copy(P),v=Math.max(Qs.dot(p),v),y=Math.max(Qs.dot(g),y),b=Math.max(Qs.dot(m),b),w=Math.min(Qs.dot(p),w),T=Math.min(Qs.dot(g),T),S=Math.min(Qs.dot(m),S);p=p.multiplyByScalar(.5*(w+v)),g=g.multiplyByScalar(.5*(T+y)),m=m.multiplyByScalar(.5*(S+b)),t.center.copy(p).add(g).add(m);const k=aIt.set(v-w,y-T,b-S).multiplyByScalar(.5),E=new fn([k[0],0,0,0,k[1],0,0,0,k[2]]);return t.halfAxes.multiplyRight(E),t}const vh=512,A8=3,PH=[[.5,.5],[0,0],[0,1],[1,0],[1,1]],EH=PH.concat([[0,.5],[.5,0],[1,.5],[.5,1]]),dIt=EH.concat([[.25,.5],[.75,.5]]);class mh{constructor(t,r,n){x(this,"x",void 0),x(this,"y",void 0),x(this,"z",void 0),x(this,"childVisible",void 0),x(this,"selected",void 0),x(this,"_children",void 0),this.x=t,this.y=r,this.z=n}get children(){if(!this._children){const t=this.x*2,r=this.y*2,n=this.z+1;this._children=[new mh(t,r,n),new mh(t,r+1,n),new mh(t+1,r,n),new mh(t+1,r+1,n)]}return this._children}update(t){const{viewport:r,cullingVolume:n,elevationBounds:i,minZ:o,maxZ:a,bounds:s,offset:l,project:u}=t,c=this.getBoundingVolume(i,l,u);if(s&&!this.insideBounds(s)||n.computeVisibility(c)<0)return!1;if(!this.childVisible){let{z:h}=this;if(h<a&&h>=o){const d=c.distanceTo(r.cameraPosition)*r.scale/r.height;h+=Math.floor(Math.log2(d))}if(h>=a)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;for(const h of this.children)h.update(t);return!0}getSelected(t=[]){if(this.selected&&t.push(this),this._children)for(const r of this._children)r.getSelected(t);return t}insideBounds([t,r,n,i]){const o=Math.pow(2,this.z),a=vh/o;return this.x*a<n&&this.y*a<i&&(this.x+1)*a>t&&(this.y+1)*a>r}getBoundingVolume(t,r,n){if(n){const l=this.z<1?dIt:this.z<2?EH:PH,u=[];for(const c of l){const f=FE(this.x+c[0],this.y+c[1],this.z);f[2]=t[0],u.push(n(f)),t[0]!==t[1]&&(f[2]=t[1],u.push(n(f)))}return hIt(u)}const i=Math.pow(2,this.z),o=vh/i,a=this.x*o+r*vh,s=vh-(this.y+1)*o;return new o4([a,s,t[0]],[a+o,s+o,t[1]])}}function pIt(e,t,r,n){const i=e instanceof Hxt&&e.resolution?e.projectPosition:null,o=Object.values(e.getFrustumPlanes()).map(({normal:d,distance:p})=>new td(d.clone().negate(),p)),a=new us(o),s=e.distanceScales.unitsPerMeter[2],l=r&&r[0]*s||0,u=r&&r[1]*s||0,c=e instanceof La&&e.pitch<=60?t:0;if(n){const[d,p,g,m]=n,v=Kl([d,m]),y=Kl([g,p]);n=[v[0],vh-v[1],y[0],vh-y[1]]}const f=new mh(0,0,0),h={viewport:e,project:i,cullingVolume:a,elevationBounds:[l,u],minZ:c,maxZ:t,bounds:n,offset:0};if(f.update(h),e instanceof La&&e.subViewports&&e.subViewports.length>1){for(h.offset=-1;f.update(h)&&!(--h.offset<-A8););for(h.offset=1;f.update(h)&&!(++h.offset>A8););}return f.getSelected()}const ks=512,gIt=[-1/0,-1/0,1/0,1/0],vIt={type:"url",value:null,validate:(e,t)=>t.optional&&e===null||typeof e=="string"||Array.isArray(e)&&e.every(r=>typeof r=="string"),equals:(e,t)=>{if(e===t)return!0;if(!Array.isArray(e)||!Array.isArray(t))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}};function CH(e,t){const r=[t.transformAsPoint([e[0],e[1]]),t.transformAsPoint([e[2],e[1]]),t.transformAsPoint([e[0],e[3]]),t.transformAsPoint([e[2],e[3]])];return[Math.min(...r.map(i=>i[0])),Math.min(...r.map(i=>i[1])),Math.max(...r.map(i=>i[0])),Math.max(...r.map(i=>i[1]))]}function mIt(e){return Math.abs(e.split("").reduce((t,r)=>(t<<5)-t+r.charCodeAt(0)|0,0))}function yIt(e,t){if(!e||!e.length)return null;const{index:r,id:n}=t;if(Array.isArray(e)){const o=mIt(n)%e.length;e=e[o]}let i=e;for(const o of Object.keys(r)){const a=new RegExp("{".concat(o,"}"),"g");i=i.replace(a,String(r[o]))}return Number.isInteger(r.y)&&Number.isInteger(r.z)&&(i=i.replace(/\{-y\}/g,String(Math.pow(2,r.z)-r.y-1))),i}function _It(e,t,r){let n;if(t&&t.length===2){const[i,o]=t,a=e.getBounds({z:i}),s=e.getBounds({z:o});n=[Math.min(a[0],s[0]),Math.min(a[1],s[1]),Math.max(a[2],s[2]),Math.max(a[3],s[3])]}else n=e.getBounds();return e.isGeospatial?[Math.max(n[0],r[0]),Math.max(n[1],r[1]),Math.min(n[2],r[2]),Math.min(n[3],r[3])]:[Math.max(Math.min(n[0],r[2]),r[0]),Math.max(Math.min(n[1],r[3]),r[1]),Math.min(Math.max(n[2],r[0]),r[2]),Math.min(Math.max(n[3],r[1]),r[3])]}function eb({viewport:e,z:t,cullRect:r}){const n=r.x-e.x,i=r.y-e.y,{width:o,height:a}=r;if(!Array.isArray(t)){const u={targetZ:t||0},c=e.unproject([n,i],u),f=e.unproject([n+o,i],u),h=e.unproject([n,i+a],u),d=e.unproject([n+o,i+a],u);return[Math.min(c[0],f[0],h[0],d[0]),Math.min(c[1],f[1],h[1],d[1]),Math.max(c[0],f[0],h[0],d[0]),Math.max(c[1],f[1],h[1],d[1])]}const s=eb({viewport:e,z:t[0],cullRect:r}),l=eb({viewport:e,z:t[1],cullRect:r});return[Math.min(s[0],l[0]),Math.min(s[1],l[1]),Math.max(s[2],l[2]),Math.max(s[3],l[3])]}function bIt(e,t,r){return r?CH(e,r).map(i=>i*t/ks):e.map(n=>n*t/ks)}function l4(e,t){return Math.pow(2,e)*ks/t}function FE(e,t,r){const n=l4(r,ks),i=e/n*360-180,o=Math.PI-2*Math.PI*t/n,a=180/Math.PI*Math.atan(.5*(Math.exp(o)-Math.exp(-o)));return[i,a]}function x8(e,t,r,n){const i=l4(r,n);return[e/i*ks,t/i*ks]}function wIt(e,t,r,n,i=ks){if(e.isGeospatial){const[u,c]=FE(t,r,n),[f,h]=FE(t+1,r+1,n);return{west:u,north:c,east:f,south:h}}const[o,a]=x8(t,r,n,i),[s,l]=x8(t+1,r+1,n,i);return{left:o,top:a,right:s,bottom:l}}function SIt(e,t,r,n,i){const o=_It(e,null,n),a=l4(t,r),[s,l,u,c]=bIt(o,a,i),f=[];for(let h=Math.floor(s);h<u;h++)for(let d=Math.floor(l);d<c;d++)f.push({x:h,y:d,z:t});return f}function TIt({viewport:e,maxZoom:t,minZoom:r,zRange:n,extent:i,tileSize:o=ks,modelMatrix:a,modelMatrixInverse:s,zoomOffset:l=0}){let u=e.isGeospatial?Math.round(e.zoom+Math.log2(ks/o))+l:Math.ceil(e.zoom)+l;if(typeof r=="number"&&Number.isFinite(r)&&u<r){if(!i)return[];u=r}typeof t=="number"&&Number.isFinite(t)&&u>t&&(u=t);let c=i;return a&&s&&i&&!e.isGeospatial&&(c=CH(i,a)),e.isGeospatial?pIt(e,u,n,i):SIt(e,u,o,c||gIt,s)}const M8=1,E2=2,kIt="never",PIt="no-overlap",u4="best-available",EIt=5,CIt={[u4]:xIt,[PIt]:MIt,[kIt]:()=>{}};class AIt{constructor(t){x(this,"opts",void 0),x(this,"_requestScheduler",void 0),x(this,"_cache",void 0),x(this,"_dirty",void 0),x(this,"_tiles",void 0),x(this,"_cacheByteSize",void 0),x(this,"_viewport",void 0),x(this,"_zRange",void 0),x(this,"_selectedTiles",void 0),x(this,"_frameNumber",void 0),x(this,"_modelMatrix",void 0),x(this,"_modelMatrixInverse",void 0),x(this,"_maxZoom",void 0),x(this,"_minZoom",void 0),x(this,"onTileLoad",void 0),x(this,"_getCullBounds",p0(eb)),this.opts=t,this.onTileLoad=r=>{this.opts.onTileLoad(r),this.opts.maxCacheByteSize&&(this._cacheByteSize+=r.byteLength,this._resizeCache())},this._requestScheduler=new ybt({maxRequests:t.maxRequests,throttleRequests:t.maxRequests>0}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._selectedTiles=null,this._frameNumber=0,this._modelMatrix=new Mn,this._modelMatrixInverse=new Mn,this.setOptions(t)}get tiles(){return this._tiles}get selectedTiles(){return this._selectedTiles}get isLoaded(){return this._selectedTiles!==null&&this._selectedTiles.every(t=>t.isLoaded)}get needsReload(){return this._selectedTiles!==null&&this._selectedTiles.some(t=>t.needsReload)}setOptions(t){Object.assign(this.opts,t),Number.isFinite(t.maxZoom)&&(this._maxZoom=Math.floor(t.maxZoom)),Number.isFinite(t.minZoom)&&(this._minZoom=Math.ceil(t.minZoom))}finalize(){for(const t of this._cache.values())t.isLoading&&t.abort();this._cache.clear(),this._tiles=[],this._selectedTiles=null}reloadAll(){for(const t of this._cache.keys()){const r=this._cache.get(t);!this._selectedTiles||!this._selectedTiles.includes(r)?this._cache.delete(t):r.setNeedsReload()}}update(t,{zRange:r,modelMatrix:n}={}){const i=new Mn(n),o=!i.equals(this._modelMatrix);if(!this._viewport||!t.equals(this._viewport)||!Ea(this._zRange,r)||o){o&&(this._modelMatrixInverse=i.clone().invert(),this._modelMatrix=i),this._viewport=t,this._zRange=r;const s=this.getTileIndices({viewport:t,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:r,modelMatrix:this._modelMatrix,modelMatrixInverse:this._modelMatrixInverse});this._selectedTiles=s.map(l=>this._getTile(l,!0)),this._dirty&&this._rebuildTree()}else this.needsReload&&(this._selectedTiles=this._selectedTiles.map(s=>this._getTile(s.index,!0)));const a=this.updateTileStates();return this._pruneRequests(),this._dirty&&this._resizeCache(),a&&this._frameNumber++,this._frameNumber}isTileVisible(t,r){if(!t.isVisible)return!1;if(r&&this._viewport){const[n,i,o,a]=eb({viewport:this._viewport,z:this._zRange,cullRect:r}),{bbox:s}=t;if("west"in s)return s.west<o&&s.east>n&&s.south<a&&s.north>i;const l=Math.min(s.top,s.bottom),u=Math.max(s.top,s.bottom);return s.left<o&&s.right>n&&l<a&&u>i}return!0}getTileIndices({viewport:t,maxZoom:r,minZoom:n,zRange:i,modelMatrix:o,modelMatrixInverse:a}){const{tileSize:s,extent:l,zoomOffset:u}=this.opts;return TIt({viewport:t,maxZoom:r,minZoom:n,zRange:i,tileSize:s,extent:l,modelMatrix:o,modelMatrixInverse:a,zoomOffset:u})}getTileId(t){return"".concat(t.x,"-").concat(t.y,"-").concat(t.z)}getTileZoom(t){return t.z}getTileMetadata(t){const{tileSize:r}=this.opts;return{bbox:wIt(this._viewport,t.x,t.y,t.z,r)}}getParentIndex(t){const r=Math.floor(t.x/2),n=Math.floor(t.y/2),i=t.z-1;return{x:r,y:n,z:i}}updateTileStates(){const t=this.opts.refinementStrategy||u4,r=new Array(this._cache.size);let n=0;for(const i of this._cache.values())r[n++]=i.isVisible,i.isSelected=!1,i.isVisible=!1;for(const i of this._selectedTiles)i.isSelected=!0,i.isVisible=!0;(typeof t=="function"?t:CIt[t])(Array.from(this._cache.values())),n=0;for(const i of this._cache.values())if(r[n++]!==i.isVisible)return!0;return!1}_pruneRequests(){const{maxRequests:t}=this.opts,r=[];let n=0;for(const i of this._cache.values())i.isLoading&&(n++,!i.isSelected&&!i.isVisible&&r.push(i));for(;t>0&&n>t&&r.length>0;)r.shift().abort(),n--}_rebuildTree(){const{_cache:t}=this;for(const r of t.values())r.parent=null,r.children&&(r.children.length=0);for(const r of t.values()){const n=this._getNearestAncestor(r);r.parent=n,n!=null&&n.children&&n.children.push(r)}}_resizeCache(){const{_cache:t,opts:r}=this,n=r.maxCacheSize||(r.maxCacheByteSize?1/0:EIt*this.selectedTiles.length),i=r.maxCacheByteSize||1/0;if(t.size>n||this._cacheByteSize>i){for(const[a,s]of t)if(s.isVisible||(this._cacheByteSize-=r.maxCacheByteSize?s.byteLength:0,t.delete(a),this.opts.onTileUnload(s)),t.size<=n&&this._cacheByteSize<=i)break;this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort((a,s)=>a.zoom-s.zoom),this._dirty=!1)}_getTile(t,r){const n=this.getTileId(t);let i=this._cache.get(n),o=!1;return!i&&r?(i=new XMt(t),Object.assign(i,this.getTileMetadata(i.index)),Object.assign(i,{id:n,zoom:this.getTileZoom(i.index)}),o=!0,this._cache.set(n,i),this._dirty=!0):i&&i.needsReload&&(o=!0),i&&o&&i.loadData({getData:this.opts.getTileData,requestScheduler:this._requestScheduler,onLoad:this.onTileLoad,onError:this.opts.onTileError}),i}_getNearestAncestor(t){const{_minZoom:r=0}=this;let n=t.index;for(;this.getTileZoom(n)>r;){n=this.getParentIndex(n);const i=this._getTile(n);if(i)return i}return null}}function xIt(e){for(const t of e)t.state=0;for(const t of e)t.isSelected&&!AH(t)&&c4(t);for(const t of e)t.isVisible=Boolean(t.state&E2)}function MIt(e){for(const r of e)r.state=0;for(const r of e)r.isSelected&&AH(r);const t=Array.from(e).sort((r,n)=>r.zoom-n.zoom);for(const r of t)if(r.isVisible=Boolean(r.state&E2),r.children&&(r.isVisible||r.state&M8))for(const n of r.children)n.state=M8;else r.isSelected&&c4(r)}function AH(e){let t=e;for(;t;){if(t.isLoaded||t.content)return t.state|=E2,!0;t=t.parent}return!1}function c4(e){for(const t of e.children)t.isLoaded||t.content?t.state|=E2:c4(t)}const IIt={TilesetClass:AIt,data:{type:"data",value:[]},dataComparator:vIt.equals,renderSubLayers:{type:"function",value:e=>new P2(e),compare:!1},getTileData:{type:"function",optional:!0,value:null,compare:!1},onViewportLoad:{type:"function",optional:!0,value:null,compare:!1},onTileLoad:{type:"function",value:e=>{},compare:!1},onTileUnload:{type:"function",value:e=>{},compare:!1},onTileError:{type:"function",value:e=>console.error(e),compare:!1},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:u4,zRange:null,maxRequests:6,zoomOffset:0};class C2 extends w2{initializeState(){this.state={tileset:null,isLoaded:!1}}finalizeState(){var t,r;(t=this.state)===null||t===void 0||(r=t.tileset)===null||r===void 0||r.finalize()}get isLoaded(){var t,r;return(t=this.state)===null||t===void 0||(r=t.tileset)===null||r===void 0?void 0:r.selectedTiles.every(n=>n.isLoaded&&n.layers&&n.layers.every(i=>i.isLoaded))}shouldUpdateState({changeFlags:t}){return t.somethingChanged}updateState({changeFlags:t}){let{tileset:r}=this.state;const n=t.propsOrDataChanged||t.updateTriggersChanged,i=t.dataChanged||t.updateTriggersChanged&&(t.updateTriggersChanged.all||t.updateTriggersChanged.getTileData);r?n&&(r.setOptions(this._getTilesetOptions()),i?r.reloadAll():this.state.tileset.tiles.forEach(o=>{o.layers=null})):(r=new this.props.TilesetClass(this._getTilesetOptions()),this.setState({tileset:r})),this._updateTileset()}_getTilesetOptions(){const{tileSize:t,maxCacheSize:r,maxCacheByteSize:n,refinementStrategy:i,extent:o,maxZoom:a,minZoom:s,maxRequests:l,zoomOffset:u}=this.props;return{maxCacheSize:r,maxCacheByteSize:n,maxZoom:a,minZoom:s,tileSize:t,refinementStrategy:i,extent:o,maxRequests:l,zoomOffset:u,getTileData:this.getTileData.bind(this),onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),onTileUnload:this._onTileUnload.bind(this)}}_updateTileset(){const{tileset:t}=this.state,{zRange:r,modelMatrix:n}=this.props,i=t.update(this.context.viewport,{zRange:r,modelMatrix:n}),{isLoaded:o}=t,a=this.state.isLoaded!==o,s=this.state.frameNumber!==i;o&&(a||s)&&this._onViewportLoad(),s&&this.setState({frameNumber:i}),this.state.isLoaded=o}_onViewportLoad(){const{tileset:t}=this.state,{onViewportLoad:r}=this.props;r&&r(t.selectedTiles)}_onTileLoad(t){this.props.onTileLoad(t),t.layers=null,this.setNeedsUpdate()}_onTileError(t,r){this.props.onTileError(t),r.layers=null,this.setNeedsUpdate()}_onTileUnload(t){this.props.onTileUnload(t)}getTileData(t){const{data:r,getTileData:n,fetch:i}=this.props,{signal:o}=t;return t.url=typeof r=="string"||Array.isArray(r)?yIt(r,t):null,n?n(t):i&&t.url?i(t.url,{propName:"data",layer:this,signal:o}):null}renderSubLayers(t){return this.props.renderSubLayers(t)}getSubLayerPropsByTile(t){return null}getPickingInfo({info:t,sourceLayer:r}){return t.tile=r.props.tile,t}_updateAutoHighlight(t){t.sourceLayer&&t.sourceLayer.updateAutoHighlight(t)}renderLayers(){return this.state.tileset.tiles.map(t=>{const r=this.getSubLayerPropsByTile(t);if(!(!t.isLoaded&&!t.content))if(t.layers)r&&t.layers[0]&&Object.keys(r).some(n=>t.layers[0].props[n]!==r[n])&&(t.layers=t.layers.map(n=>n.clone(r)));else{const n=this.renderSubLayers({...this.props,id:"".concat(this.id,"-").concat(t.id),data:t.content,_offset:0,tile:t});t.layers=g2(n,Boolean).map(i=>i.clone({tile:t,...r}))}return t.layers})}filterSubLayer({layer:t,cullRect:r}){const{tile:n}=t.props;return this.state.tileset.isTileVisible(n,r)}}x(C2,"defaultProps",IIt);x(C2,"layerName","TileLayer");const LIt={setup(){const e=At(),t=ee(),r=mr(),n=ii(),i=Kv();return t.$subscribe((o,a)=>{const s=Date.now();localStorage.setItem("user",JSON.stringify(a)),console.log("userStore subscription took",Date.now()-s,"ms")}),i.$subscribe((o,a)=>{localStorage.setItem("map",JSON.stringify(a))}),{gameStore:e,userStore:t,routingStore:r,marketStore:n,mapStore:i}},props:{clickedObj:Object,hoverInfo:Object,panToPzk:String,panPaPos:Object,panBbox:Object,highlightNodes:Set},emits:["update:hoverInfo","update:clickedObj","update:panToPzk","update:panPaPos","panAnywhere"],data:()=>({deck:null,tileLayer:null,iconData:[],iconPositions:{},iconLayer:null,highlightedIconLayer:null,lineData:[],lineLayer:null,clickedObject:null,pzkSelectedTown:{},initialViewState:{target:[0,0],zoom:-8,minZoom:-12,maxZoom:-5},mapStateSavedTimestamp:0,hiddenNodesCount:0}),created(){},async mounted(){function e(t){const r=n=>{t()?n():setTimeout(i=>r(n),100)};return new Promise(r)}if(console.log("NodeMap mounted, sleeping"),await e(t=>this.gameStore.ready==!0&&this.iconsCalc),console.log("resuming"),this.iconData=await(await fetch("data/deck_icons.json")).json(),this.iconPositions=await(await fetch("data/deck_icon_positions.json")).json(),this.lineData=await(await fetch("data/deck_links.json")).json(),this.panToPzk in this.gameStore.nodes){console.log("panning to node",this.panToPzk);const t=this.gameStore.nodes[this.panToPzk].pos;this.mapStore.target=[t.x,-t.z],this.mapStore.zoom=-7}this.initialViewState.target=[...this.mapStore.target],this.initialViewState.zoom=this.mapStore.zoom,this.deck=this.initializeDeck(),this.updateDeck()},watch:{"routingStore.routing.autotakenNodes"(e){this.updateLayers()},"userStore.mapHideInactive"(e){this.updateLayers()},linesCalc(e){this.updateLayers()},highlightNodes(e){},panPaPos(e){e&&this.deck&&this.panTo(e.x,e.z,-7)}},computed:{scores(){const e=Date.now(),t=this.gameStore.nodes,r=this.gameStore.links,n=0;r[n]=this.gameStore.townsWithLodging;let i=new Gp((l,u)=>o[l]-o[u]);i.push(n);let o={[n]:0},a={[n]:[]};for(var s;i.size();)s=i.pop(),r[s].forEach(l=>{if(!(l in t))return;const u=o[s]+t[l].CP;l in o?u<o[l]&&(o[l]=u,a[l]=[...a[s],l]):(i.push(l),o[l]=u,a[l]=[...a[s],l])});return console.log("scoreAll took",Date.now()-e,"ms"),{needTakes:a,pathCosts:o}},iconsCalc(){const e=[];if(this.hiddenNodesCount=0,!this.iconData)return e;const t=[];return this.iconData.forEach(([r,n])=>{if(r in this.gameStore.nodes){const i=this.routingStore.routing.autotakenNodes.has(r);this.userStore.mapHideInactive&&!i&&(this.hiddenNodesCount+=1);const o=this.highlightNodes&&this.highlightNodes.has(r),a={key:r,kind:n,pos:this.iconPositions[r],taken:i,isHighlighted:o,thisCpCost:this.gameStore.ready?this.gameStore.nodes[r].CP:0};e.push({...a,hidden:this.userStore.mapHideInactive&&!a.taken||o}),t.push({...a,hidden:!o})}}),console.log("iconsCalc",this.hiddenNodesCount,"hidden"),{normal:e,highlighted:t}},linesCalc(){const e=[172,172,172,255],t=[255,179,0,255],r=[255,109,0,255],n=[255,49,0,255];let i=[];this.lineData.forEach(([s,l])=>{let u=e;const c=`${s}-${l}`;c in this.routingStore.routing.linkColors&&(this.routingStore.routing.linkColors[c]=="grind"?u=r:this.routingStore.routing.linkColors[c]=="worker"?u=t:this.routingStore.routing.linkColors[c]=="wagon"&&(u=n)),i.push({start:this.iconPositions[s],end:this.iconPositions[l],color:u})});const o=[64,255,0,255],a=[34,222,168,255];if(this.clickedObject){if(this.clickedObject.key in this.routingStore.pzJobs){const s=this.routingStore.pzJobs[this.clickedObject.key];let l;for(const u of s.usedPath)l&&i.push({start:this.iconPositions[l],end:this.iconPositions[u],color:o}),l=u}if(this.gameStore.isLodgingTown(this.clickedObject.key)){const s=this.gameStore.tnk2tk(this.clickedObject.key);this.userStore.townWorkers(s).forEach(l=>{if(this.gameStore.jobIsPz(l.job)){const u=this.routingStore.pzJobs[l.job.pzk];let c;for(const f of u.usedPath)c&&i.push({start:this.iconPositions[c],end:this.iconPositions[f],color:o}),c=f}if(this.gameStore.jobIsWorkshop(l.job)){const u=this.routingStore.wsJobs.find(f=>f.worker.tnk==this.clickedObject.key&&f.hk==l.job.hk);let c;for(const f of u.usedPath)c&&i.push({start:this.iconPositions[c],end:this.iconPositions[f],color:a}),c=f}})}}return i}},methods:{makeIconImg:HQ,formatFixed:dt,onMoveEvent(e){const t=Date.now();t-this.mapStateSavedTimestamp>100&&(this.mapStore.target=[...e.viewState.target],this.mapStore.zoom=e.viewState.zoom,this.mapStateSavedTimestamp=t),this.$emit("panAnywhere")},makeIconsLayer(){return new Lc({data:this.iconsCalc.normal,onClick:(e,t)=>this.objectClicked(e.object),onHover:e=>this.$emit("update:hoverInfo",e),getPosition:e=>e.pos,getColor:e=>[66,66,66,e.hidden?0:255],getIcon:function(e){return{url:"data/icons/node/"+(e.isHighlighted?"highlighted/":"")+(e.taken?"":"gray/")+`${e.kind}.png`,width:256,height:256,anchorX:128,anchorY:128}},updateTriggers:{},transitions:{getColor:400},modelMatrix:[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],getSize:e=>this.userStore.mapIconSize*(e.isHighlighted?1.66:1),autoHighlight:!0,pickable:!0})},makeHighlightedIconsLayer(){return new Lc({id:"highlighted",data:this.iconsCalc.highlighted,onClick:(e,t)=>this.objectClicked(e.object),onHover:e=>this.$emit("update:hoverInfo",e),getPosition:e=>e.pos,getColor:e=>[66,66,66,e.hidden?0:255],getIcon:function(e){return{url:"data/icons/node/"+(e.isHighlighted?"highlighted/":"")+(e.taken?"":"gray/")+`${e.kind}.png`,width:256,height:256,anchorX:128,anchorY:128}},updateTriggers:{},transitions:{getColor:800},modelMatrix:[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],getSize:e=>this.userStore.mapIconSize*(e.isHighlighted?1.66:1),autoHighlight:!0,pickable:!0})},makeLineLayer(){return new Zx({data:this.linesCalc,getSourcePosition:e=>e.start,getTargetPosition:e=>e.end,getColor:e=>e.color,modelMatrix:[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1]})},initializeDeck(){return console.log("initializeDeck",this.initialViewState,this.mapStore.target),this.tileLayer=new C2({data:"https://shrddr.github.io/maptiles/{z}/{x}_{y}.webp",minZoom:0,maxZoom:7,tileSize:256*12800,zoomOffset:14,extent:[-67*2*12800,-71*2*12800,58*2*12800,35*2*12800],renderSubLayers:e=>{const{bbox:{left:t,bottom:r,right:n,top:i}}=e.tile;return new S2(e,{data:null,image:e.data,bounds:[t,r,n,i]})}}),this.lineLayer=this.makeLineLayer(),this.iconLayer=this.makeIconsLayer(),this.highlightedIconLayer=this.makeHighlightedIconsLayer(),new _2({canvas:"deck-canvas",mapbox:!1,onViewStateChange:this.onMoveEvent,initialViewState:this.initialViewState,layers:[this.tileLayer,this.lineLayer,this.iconLayer,this.highlightedIconLayer],controller:{doubleClickZoom:!1},views:[new m2({controller:!0})]})},updateLayers(){!this.deck||(console.log("updateLayers"),this.lineLayer=this.makeLineLayer(),this.highlightedIconLayer=this.makeHighlightedIconsLayer(),this.iconLayer=this.makeIconsLayer(),this.deck.setProps({layers:[this.tileLayer,this.lineLayer,this.iconLayer,this.highlightedIconLayer]}))},updateDeck(){!this.deck||(console.log("updateDeck"),this.lineLayer=this.makeLineLayer(),this.highlightedIconLayer=this.makeHighlightedIconsLayer(),this.iconLayer=this.makeIconsLayer(),this.deck.setProps({layers:[this.tileLayer,this.lineLayer,this.iconLayer,this.highlightedIconLayer],initialViewState:this.initialViewState}))},objectClicked(e){this.clickedObject=e,this.$emit("update:clickedObj",e)},move(e){this.initialViewState.target=[e,0],console.log("trying to move to",e),console.log(this.deck.viewState)},panToBbox(e,t,r,n){const i=(e+t)/2,o=(r+n)/2,a=t-e,s=n-r;if(a==0&&s==0){this.panTo(i,o,-9);return}let l=6;for(;l>=0;l--){const u=2**(l-14),c=a*u,f=s*u;if(c<this.deck.viewManager.width&&f<this.deck.viewManager.height)break}this.panTo(i,o,l-14)},panTo(e,t,r){const n={...this.initialViewState};n.target=[e,-t],n.zoom=r,n.transitionDuration=100,n.transitionInterpolator=new v2({transitionProps:["target","zoom"]}),this.deck.setProps({initialViewState:n})}}},OIt={id:"deck-canvas",ref:"canvas"},RIt={id:"hack"},DIt={key:0,id:"topcenter"},NIt=$(") ");function FIt(e,t,r,n,i,o){return I(),O(W,null,[_("canvas",OIt,null,512),_("div",RIt,M(o.iconsCalc.length)+" icons",1),n.userStore.mapHideInactive?(I(),O("div",DIt,[$(M(e.hiddenNodesCount)+" inactive nodes hidden (",1),_("a",{href:"#",onClick:t[0]||(t[0]=a=>n.userStore.mapHideInactive=!1)},"show"),NIt])):nt("",!0)],64)}const $It=le(LIt,[["render",FIt],["__scopeId","data-v-17f62f96"]]);const BIt={setup(){const e=At(),t=ee();return{gameStore:e,userStore:t}},props:{tk:Number},emits:["selectWorker","editWorker"],components:{},data:()=>({}),computed:{filteredHouses(){const e={};for(const[t,r]of Object.entries(this.userStore.userWorkshops)){const n=this.gameStore.houseInfo[t];if(!n)throw Error(`unknown house ${t}`);n.affTown==this.tk&&(r.industry in e?e[r.industry][t]=r:e[r.industry]={[t]:r})}return e},filteredWorkers(){return this.userStore.userWorkers.filter(e=>e.job&&this.gameStore.jobIsWorkshop(e.job)&&e.job.hk in this.gameStore.houseInfo&&this.gameStore.houseInfo[e.job.hk].affTown==this.tk)}},methods:{formatFixed:dt}},xH=e=>(er("data-v-c8ec0d1e"),e=e(),rr(),e),zIt={key:0},VIt=xH(()=>_("summary",null,"Workshops",-1)),UIt={class:"vscroll30"},WIt={class:"stickyhead"},jIt=xH(()=>_("thead",null,[_("tr",null,[_("th",null,"house"),_("th",null,"type"),_("th",null,"workload"),_("th",null,"$/cycle"),_("th",null,"CP"),_("th",{colspan:"3"},"worker")])],-1)),GIt=["onUpdate:modelValue"],HIt=["value"],XIt=["onUpdate:modelValue"],YIt=["onUpdate:modelValue"],KIt=["onUpdate:modelValue"],ZIt=["onClick"],qIt=["onClick"],JIt={key:0},QIt=["onClick"],t6t={key:1},e6t=["onClick"];function r6t(e,t,r,n,i,o){return Object.keys(o.filteredHouses).length?(I(),O("details",zIt,[VIt,_("div",UIt,[_("table",WIt,[jIt,_("tbody",null,[(I(!0),O(W,null,Pt(o.filteredHouses,(a,s)=>(I(),O(W,null,[(I(!0),O(W,null,Pt(a,(l,u)=>(I(),O("tr",null,[_("td",null,M(n.gameStore.uloc.char[u])+" "+M(l.label),1),_("td",null,[at(_("select",{"onUpdate:modelValue":c=>l.industry=c},[(I(!0),O(W,null,Pt(n.gameStore.industries,(c,f)=>(I(),O("option",{value:f},M(c),9,HIt))),256))],8,GIt),[[cr,l.industry]])]),_("td",null,[at(_("input",{type:"number",class:"w5em","onUpdate:modelValue":c=>l.manualWorkload=c},null,8,XIt),[[zt,l.manualWorkload,void 0,{number:!0}]])]),_("td",null,[at(_("input",{type:"number",class:"w5em","onUpdate:modelValue":c=>l.manualCycleIncome=c},null,8,YIt),[[zt,l.manualCycleIncome,void 0,{number:!0}]])]),_("td",null,[at(_("input",{type:"number",class:"float4","onUpdate:modelValue":c=>l.manualCp=c},null,8,KIt),[[zt,l.manualCp,void 0,{number:!0}]])]),_("td",null,[(I(!0),O(W,null,Pt(o.filteredWorkers.filter(c=>c.job.hk==u),c=>(I(),O("div",null,[_("button",{onClick:f=>this.$emit("editWorker",c)},"edit",8,ZIt),$(" "+M(n.userStore.workerLabel(c))+" @ ",1),n.userStore.displayProfitPerCp?(I(),O(W,{key:0},[$(M(o.formatFixed(n.userStore.workerIncomePerCp(c),2))+" M$/day/CP ",1)],64)):(I(),O(W,{key:1},[$(M(o.formatFixed(n.userStore.workerIncome(c),2))+" M$/day ",1)],64)),_("button",{onClick:f=>c.job=null},"stop",8,qIt)]))),256)),l.industry=="mass"?(I(),O("div",JIt,[_("button",{onClick:c=>this.$emit("selectWorker",Number(u))},"add",8,QIt)])):o.filteredWorkers.filter(c=>c.job.hk==u).length==0?(I(),O("div",t6t,[_("button",{onClick:c=>this.$emit("selectWorker",Number(u))},"send",8,e6t)])):nt("",!0)])]))),256))],64))),256))])])])])):nt("",!0)}const n6t=le(BIt,[["render",r6t],["__scopeId","data-v-c8ec0d1e"]]);const i6t={setup(){const e=ee(),t=mr(),r=At(),n=ii(),i=Kv();return i.$subscribe((o,a)=>{localStorage.setItem("map",JSON.stringify(a))}),e.$subscribe((o,a)=>{const s=Date.now();localStorage.setItem("user",JSON.stringify(a)),console.log("userStore subscription took",Date.now()-s,"ms")}),{marketStore:n,userStore:e,routingStore:t,gameStore:r,mapStore:i}},components:{Worker:qC,TownWorkers:bB,TownWorkshops:n6t,Plantzone:SB},props:{clickedNode:Object},emits:["selectLodging","selectHouses","hireWorker","editWorker","sendWorker","panToPaPos","showResourceDialog","setClickedNode","selectWorker"],data:()=>({}),methods:{formatFixed:dt,jobCashFlowPercent(e){return e.profit.priceDaily/this.routingStore.currentNodesCashflow[this.clickedNode.key]},selectLodging(e){this.$emit("selectLodging",e)},selectHouses(e){this.$emit("selectHouses",e)},hireWorker(e){this.$emit("hireWorker",e)},editWorker(e){this.$emit("editWorker",e)},sendWorker(e){this.$emit("sendWorker",e)},panToPaPos(e){this.$emit("panToPaPos",e)},showResourceDialog(e){this.$emit("showResourceDialog",e)},setClickedNode(e){this.$emit("setClickedNode",e)},selectWorker(e){this.$emit("selectWorker",e)}},computed:{activeNodeJobs_sorted(){const e=this.userStore.currentNodesJobs[this.clickedNode.key];return e.sort((t,r)=>this.jobCashFlowPercent(r)-this.jobCashFlowPercent(t)),e}}},MH=e=>(er("data-v-75679efa"),e=e(),rr(),e),o6t={key:0,id:"mapObjDetail"},a6t=MH(()=>_("div",null,"\u02C5",-1)),s6t=[a6t],l6t={key:0,id:"clickedTownInfo",class:"vscrollable"},u6t={class:"vscroll40"},c6t={class:"stickyhead"},f6t={key:1,id:"clickedTownInfo",class:"vscrollable"},h6t={key:2,id:"clickedNodeName"},d6t=$(),p6t=MH(()=>_("abbr",{class:"tooltip",title:"used for grind node"},"\u2139",-1)),g6t={key:0,class:"fsxs"},v6t=$(" shared by active nodejobs: "),m6t=["onClick"],y6t={key:1},_6t=["checked"],b6t=$(" grind node (invested for droprate) "),w6t={key:3,id:"clickedPlantzoneInfo"},S6t=["checked"],T6t=$(" grind node (invested for droprate) ");function k6t(e,t,r,n,i,o){const a=Gt("TownWorkers"),s=Gt("TownWorkshops"),l=Gt("Plantzone");return r.clickedNode?(I(),O("div",o6t,[_("div",{class:"rolldown",onClick:t[0]||(t[0]=u=>o.setClickedNode(null))},s6t),n.gameStore.isLodgingTown(r.clickedNode.key)?(I(),O("div",l6t,[_("div",u6t,[_("table",c6t,[ht(a,{o:n.gameStore.lodgingPerTown[n.gameStore.tnk2tk(r.clickedNode.key)],tk:n.gameStore.tnk2tk(r.clickedNode.key),onSelectLodging:o.selectLodging,onSelectHouses:o.selectHouses,onHireWorker:o.hireWorker,onEditWorker:o.editWorker,onSendWorker:o.sendWorker,onPanToPaPos:o.panToPaPos},null,8,["o","tk","onSelectLodging","onSelectHouses","onHireWorker","onEditWorker","onSendWorker","onPanToPaPos"])])]),n.userStore.userWorkshops?(I(),qr(s,{key:0,tk:n.gameStore.tnk2tk(r.clickedNode.key),onSelectWorker:o.selectWorker,onEditWorker:o.editWorker},null,8,["tk","onSelectWorker","onEditWorker"])):nt("",!0)])):n.gameStore.townsWithRentableStorageSet.has(r.clickedNode.key)?(I(),O("div",f6t,[_("button",{onClick:t[1]||(t[1]=u=>this.$emit("selectHouses",n.gameStore.tnk2tk(r.clickedNode.key))),class:Ur({unresolved:n.gameStore.ready&&n.userStore.townsInfra[n.gameStore.tnk2tk(r.clickedNode.key)].success==!1})}," config ",2)])):nt("",!0),n.gameStore.isConnectionNode(r.clickedNode.key)?(I(),O("div",h6t,[_("p",null,[$(M(n.gameStore.uloc.node[r.clickedNode.key])+" ",1),n.routingStore.routing.autotakenGrindNodes.has(r.clickedNode.key)?(I(),O(W,{key:0},[_("s",null,M(r.clickedNode.thisCpCost)+"CP",1),d6t,p6t],64)):(I(),O(W,{key:1},[$(M(r.clickedNode.thisCpCost)+"CP ",1)],64))]),r.clickedNode.key in n.userStore.currentNodesJobs?(I(),O("p",g6t,[v6t,(I(!0),O(W,null,Pt(o.activeNodeJobs_sorted,u=>(I(),O("p",null,[$(M(o.formatFixed(o.jobCashFlowPercent(u)*100))+"% - ",1),this.gameStore.jobIsPz(u.worker.job)?(I(),O("span",{key:0,onClick:c=>e.$emit("panToPaPos",this.gameStore.nodes[u.pzk].pos),class:"clickable"},M(n.gameStore.plantzoneName(u.pzk)),9,m6t)):(I(),O("span",y6t,M(n.gameStore.uloc.char[u.worker.job.hk])+" "+M(n.userStore.userWorkshops[u.worker.job.hk].label),1)),$(" @ "+M(o.formatFixed(u.profit.priceDaily,2))+" M$/day ",1)]))),256))])):nt("",!0),_("input",{type:"checkbox",onChange:t[2]||(t[2]=u=>n.userStore.modifyGrindTakens(u,r.clickedNode.key)),checked:n.userStore.grindTakenSet.has(r.clickedNode.key)},null,40,_6t),b6t])):nt("",!0),n.gameStore.isPlantzone(r.clickedNode.key)?(I(),O("div",w6t,[n.userStore.grindTakenSet.has(r.clickedNode.key)?(I(),O(W,{key:0},[_("input",{type:"checkbox",onChange:t[3]||(t[3]=u=>n.userStore.modifyGrindTakens(u,r.clickedNode.key)),checked:n.userStore.grindTakenSet.has(r.clickedNode.key)},null,40,S6t),T6t],64)):nt("",!0),ht(l,{pzk:r.clickedNode.key,onShowResourceDialog:o.showResourceDialog,onEditWorker:o.editWorker},null,8,["pzk","onShowResourceDialog","onEditWorker"])])):nt("",!0)])):nt("",!0)}const P6t=le(i6t,[["render",k6t],["__scopeId","data-v-75679efa"]]);const E6t={setup(){const e=ee(),t=mr(),r=At(),n=ii();return{gameStore:r,userStore:e,routingStore:t,marketStore:n}},emits:["panToPaPos"],components:{WorkerJobDescription:Mb,ItemIcon:no},data:()=>({activeTab:"daily",selectedRedirect:-1}),methods:{formatFixed:dt,strShortenLeft:qQ},computed:{untakenPlantzonesNearestCpTownProfit(){const e=Date.now(),t=ee(),r=At();let n=[];this.gameStore.townsWithLodging.forEach(o=>{const a=this.gameStore.dijDiscountedNearestPlantzones(o,12);n[o]=a});let i=[];for(const[o,a]of Object.entries(n))a.forEach(([s,l,u])=>{if(this.userStore.workedPlantzones.has(s.toString()))return;const c=r.profitPzTownArtisans(s,o,l);if(!c.connected)return;c.path=u;const f=r.tnk2tk(o),h=this.selectedRedirect<0?f:r.tnk2tk(this.selectedRedirect),d=this.selectedRedirect==-2?new Set:r.plantzones[s].itemkeys,p=t.townInfraAddCost(f,1,d,h);c.townCp=p.cost,c.townCpTooltip=p.tooltip,c.dailyPerCp=c.priceDaily/(c.cp+c.townCp),!isNaN(c.dailyPerCp)&&i.push(c)});return i.sort((o,a)=>a.dailyPerCp-o.dailyPerCp),console.log("cpt: untakenPlantzonesNearestCpTownProfit took",Date.now()-e,"ms"),i}}},dn=e=>(er("data-v-bbb21847"),e=e(),rr(),e),C6t={style:{"margin-top":"0.5rem","margin-bottom":"0.5rem"}},A6t={key:0},x6t={class:"stickyhead"},M6t=dn(()=>_("thead",null,[_("tr",null,[_("th",null,"Item"),_("th",null,"Qty"),_("th",null,"M$")])],-1)),I6t={class:"right"},L6t={class:"right"},O6t=$(" Cycles total:"),R6t=dn(()=>_("br",null,null,-1)),D6t=dn(()=>_("br",null,null,-1)),N6t=dn(()=>_("br",null,null,-1)),F6t=$(" \u{1F33B}farming: "),$6t=dn(()=>_("abbr",{class:"tooltip",title:"no idea, depends on weather"},"0",-1)),B6t=dn(()=>_("br",null,null,-1)),z6t=dn(()=>_("span",{class:"fsxs"}," Sorted by efficiency with your currently assigned worker. Might be the node is alright but is using a bad worker! ",-1)),V6t={class:"stickyhead"},U6t=dn(()=>_("thead",null,[_("tr",null,[_("th",{rowspan:"2"},"town"),_("th",{rowspan:"2"},"job"),_("th",{rowspan:"2"},"M$/day"),_("th",{colspan:"2"},"CP"),_("th",{rowspan:"2"},[$(" efficiency "),_("abbr",{class:"tooltip",title:"profit divided by CP"},"\u2139")])]),_("tr",null,[_("th",{class:"rowspanned colspanned"},[$(" \xA0job "),_("abbr",{class:"tooltip",title:"cost of the node (for plantzones) OR cost of the house (for workshops)"},"\u2139")]),_("th",{class:"colspanned"},[$(" town "),_("abbr",{class:"tooltip",title:"worker lodging + material storage"},"\u2139")])])],-1)),W6t=["onClick"],j6t={class:""},G6t={class:"hlim parent"},H6t=["onClick"],X6t={class:"hlim right"},Y6t={key:1,class:"hlim left"},K6t={class:"tac"},Z6t={class:"tac"},q6t={class:"tac"},J6t={class:"tac"},Q6t={class:"fsxs"},t5t=$(" Compares 12 nearest (by CP) untaken nodes of each town. Uses stats of median 40lvl artisans. Stash at: "),e5t=dn(()=>_("option",{value:"-2"},"ignore storage cost",-1)),r5t=dn(()=>_("option",{value:"-1"},"worker hometown",-1)),n5t=dn(()=>_("option",{value:"0"},"cheapest storage \u{1F9CA}",-1)),i5t=["value"],o5t={class:"stickyhead"},a5t=dn(()=>_("th",null,"\u{1F6CF}\uFE0Ftown",-1)),s5t=dn(()=>_("th",null,"job",-1)),l5t=dn(()=>_("th",null,"worker",-1)),u5t=dn(()=>_("th",null,"+M$/day",-1)),c5t=dn(()=>_("th",null,"+CP",-1)),f5t=dn(()=>_("th",null,"M$/day/CP",-1)),h5t=["onClick"],d5t={class:"hlim parent"},p5t=["onClick"],g5t={class:"hlim right"},v5t={class:"tac"},m5t=["title"],y5t={class:"tac"},_5t={class:"tac"},b5t=["title"],w5t=$("+"),S5t=["title"],T5t={class:"tac"};function k5t(e,t,r,n,i,o){const a=Gt("ItemIcon"),s=Gt("RouterLink"),l=Gt("WorkerJobDescription");return I(),O(W,null,[_("nav",C6t,[_("span",{onClick:t[0]||(t[0]=u=>e.activeTab="daily"),class:Ur({tab:1,green:e.activeTab!="daily"})},"Daily Yields",2),_("span",{onClick:t[1]||(t[1]=u=>e.activeTab="worst"),class:Ur({tab:1,green:e.activeTab!="worst"})},"Worst Taken",2),_("span",{onClick:t[2]||(t[2]=u=>e.activeTab="best"),class:Ur({tab:1,green:e.activeTab!="best"})},"Best Untaken",2)]),e.activeTab=="daily"?(I(),O("div",A6t,[_("table",x6t,[M6t,_("tbody",null,[(I(!0),O(W,null,Pt(n.userStore.jobsTally,(u,c)=>(I(),O("tr",null,[_("td",null,[ht(a,{ik:Number(c),with_name:!0},null,8,["ik"])]),_("td",I6t,M(o.formatFixed(u,u<1?2:u<10?1:0)),1),_("td",L6t,M(o.formatFixed(this.marketStore.priceBunch({[c]:u}).val/1e6,2)),1)]))),256))])]),O6t,R6t,$(" \u{1F5FA}\uFE0Fplantzones: "+M(o.formatFixed(n.userStore.cyclesTally.pz)),1),D6t,n.userStore.cyclesTally.workshop>0?(I(),O(W,{key:0},[$(" \u{1F3ED}workshops: "+M(o.formatFixed(n.userStore.cyclesTally.workshop)),1),N6t],64)):nt("",!0),F6t,$6t,B6t,$(" = "+M(o.formatFixed(n.userStore.cyclesTally.chicken))+" chicken/day ",1)])):nt("",!0),e.activeTab=="worst"?(I(),O(W,{key:1},[z6t,_("table",V6t,[U6t,_("tbody",null,[(I(!0),O(W,null,Pt(n.userStore.workersSortedByIncomePerCp,({w:u,i:c,ipc:f})=>(I(),O("tr",null,[_("td",null,[_("span",{onClick:h=>e.$emit("panToPaPos",this.gameStore.nodes[u.tnk].pos,-7),class:"clickable"},M(n.gameStore.uloc.town[n.gameStore.tnk2tk(u.tnk)]),9,W6t)]),_("td",j6t,[_("div",G6t,[this.gameStore.jobIsPz(u.job)?(I(),O(W,{key:0},[_("span",{class:"hlim left clickable",onClick:h=>e.$emit("panToPaPos",this.gameStore.nodes[u.job.pzk].pos)},M(n.gameStore.parentNodeName(u.job.pzk)),9,H6t),_("span",X6t,[(I(!0),O(W,null,Pt(n.gameStore.plantzones[u.job.pzk].itemkeys,h=>(I(),qr(s,{tag:"a",to:{path:"./settings",hash:"#item"+h}},{default:Fe(()=>[ht(a,{ik:Number(h)},null,8,["ik"])]),_:2},1032,["to"]))),256))])],64)):(I(),O("span",Y6t,[ht(l,{w:u},null,8,["w"])]))])]),_("td",K6t,M(o.formatFixed(c,2)),1),_("td",Z6t,M(o.formatFixed(n.userStore.workerSharedConnectionCP(u),2)),1),_("td",q6t,M(o.formatFixed(n.userStore.workerSharedLodgageCP(u).value,2)),1),_("td",J6t,M(o.formatFixed(f,2)),1)]))),256))])])],64)):nt("",!0),e.activeTab=="best"?(I(),O(W,{key:2},[_("span",Q6t,[t5t,at(_("select",{"onUpdate:modelValue":t[3]||(t[3]=u=>e.selectedRedirect=u),class:"fsxs"},[e5t,r5t,n5t,(I(!0),O(W,null,Pt(n.gameStore.townsWithRedirectableStorage,u=>(I(),O("option",{value:u},M(n.gameStore.uloc.node[u]),9,i5t))),256))],512),[[cr,e.selectedRedirect]])]),_("table",o5t,[_("thead",null,[_("tr",null,[a5t,s5t,l5t,u5t,c5t,f5t,nt("",!0)])]),_("tbody",null,[(I(!0),O(W,null,Pt(o.untakenPlantzonesNearestCpTownProfit,u=>(I(),O("tr",null,[_("td",null,[_("span",{onClick:c=>e.$emit("panToPaPos",this.gameStore.nodes[u.tnk].pos),class:"clickable"},M(n.gameStore.nodeName(u.tnk)),9,h5t)]),_("td",null,[_("div",d5t,[_("span",{onClick:c=>e.$emit("panToPaPos",this.gameStore.nodes[u.key].pos),class:"hlim left clickable"},M(n.gameStore.parentNodeName(u.key)),9,p5t),_("span",g5t,[(I(!0),O(W,null,Pt(u.itemkeys,c=>(I(),qr(s,{tag:"a",to:{path:"./settings",hash:"#item"+c}},{default:Fe(()=>[ht(a,{ik:Number(c)},null,8,["ik"])]),_:2},1032,["to"]))),256))])])]),_("td",v5t,[u.alt_workers?(I(),O("abbr",{key:0,class:"tooltip nound",title:u.alt_workers.map(c=>`${n.gameStore.uloc.char[c.charkey]}: ${o.formatFixed(c.priceDaily,2)} M$/day = ${o.formatFixed(100*c.priceDaily/u.priceDaily)}%`).join(`
`)},M({goblin:"\u{1F47A}",giant:"\u{1F422}",human:"\u{1F468}"}[u.kind]),9,m5t)):nt("",!0)]),_("td",y5t,M(o.formatFixed(u.priceDaily,2)),1),_("td",_5t,[_("abbr",{title:Array.from(u.path,c=>`${n.routingStore.routing.autotakenNodes.has(c)?0:n.gameStore.nodes[c].CP} ${n.gameStore.uloc.node[c]}`).join(`
`),class:"tooltip"},M(o.formatFixed(u.cp)),9,b5t),w5t,_("abbr",{title:u.townCpTooltip,class:"tooltip"},M(o.formatFixed(u.townCp)),9,S5t),$("="+M(o.formatFixed(u.cp+u.townCp)),1)]),_("td",T5t,M(o.formatFixed(u.dailyPerCp,2)),1),nt("",!0)]))),256))])])],64)):nt("",!0)],64)}const P5t=le(E6t,[["render",k5t],["__scopeId","data-v-bbb21847"]]);const E5t={setup(){const e=ee(),t=mr();return{gameStore:At(),userStore:e,routingStore:t}},props:{tk:Number,hk:Number,show:{type:Boolean,default:!1}},data:()=>({}),watch:{},methods:{formatFixed:dt,workshopNearestTownsFreeWorkersProfits(e){const t=this.gameStore.houseInfo[this.hk].affTown,r=this.gameStore.tk2tnk(t),n=this.userStore.userWorkshops[this.hk].manualCp,i=[];return this.gameStore.dijkstraNearestTowns(r,e,this.routingStore.routing.autotakenNodes,!0).forEach(([a,s,l])=>{const u=this.gameStore._tnk2tk[a];this.userStore.getFreeWorkers(u).forEach(f=>{i.push(this.gameStore.workshopSelectionEntry(this.hk,u,a,l,f,s,n))})}),i.sort((a,s)=>s.dailyPerCp-a.dailyPerCp),i},assign(e,t){this.userStore.assignWorker(e,{kind:"workshop",hk:Number(t),recipe:void 0}),this.$emit("update:show",!1)}},computed:{freeWorkers(){return this.workshopNearestTownsFreeWorkersProfits(99)},workshop(){return this.userStore.userWorkshops[this.hk]}}},IH=e=>(er("data-v-a956de16"),e=e(),rr(),e),C5t=IH(()=>_("abbr",{class:"tooltip",title:"see Settings > \u{1F3ED}Workshops"},"\u2139",-1)),A5t=$("): "),x5t=$(" None "),M5t={key:0},I5t=IH(()=>_("tr",null,[_("th",null,"town"),_("th",null,"worker"),_("th",null,"walk"),_("th",null,"cycles/day"),_("th",null,"+M$/day"),_("th",null,"+CP"),_("th",null,"M$/day/CP"),_("th",null,"action")],-1)),L5t={key:0},O5t={class:"fsxs"},R5t={class:"center"},D5t=["title"],N5t=$("+"),F5t={class:"tooltip",title:"see Settings > \u{1F3ED}Workshops"},$5t=$("+"),B5t=["title"],z5t={class:"center"},V5t=["onClick"];function U5t(e,t,r,n,i,o){return r.hk?(I(),O(W,{key:0},[_("div",null,[$("Nearest idle workers for "+M(n.gameStore.uloc.char[r.hk])+" "+M(o.workshop.label?'"'+o.workshop.label+'"':"")+" ("+M(o.workshop.manualWorkload)+" workload, "+M(o.workshop.manualCycleIncome)+" $/cycle, type: "+M(o.workshop.industry)+" ",1),C5t,A5t,o.freeWorkers.length==0?(I(),O(W,{key:0},[x5t],64)):nt("",!0)]),o.freeWorkers.length?(I(),O("table",M5t,[I5t,(I(!0),O(W,null,Pt(o.freeWorkers,a=>(I(),O(W,null,[a.profit.distance<1e6?(I(),O("tr",L5t,[_("td",null,M(n.gameStore.nodeName(a.tnk)),1),_("td",null,[$(M(a.w.label)+" ",1),_("span",O5t,M(o.formatFixed(a.profit.statsOnWs.wspd,2))+"\u{1F528} "+M(o.formatFixed(a.profit.statsOnWs.mspd,2))+"\u{1F9B6} "+M(o.formatFixed(a.profit.statsOnWs.luck,2))+"\u{1F340} ",1)]),_("td",null,M(o.formatFixed(a.profit.distance)),1),_("td",null,M(o.formatFixed(a.profit.cyclesDaily,1)),1),_("td",R5t,M(o.formatFixed(a.profit.priceDaily,2)),1),_("td",null,[_("abbr",{class:"tooltip",title:`connection cost:
`+Array.from(a.path,s=>`${n.routingStore.routing.autotakenNodes.has(s)?0:n.gameStore.nodes[s].CP} ${n.gameStore.uloc.node[s]}`).join(`
`)},M(a.mapCp),9,D5t),N5t,_("abbr",F5t,M(a.houseCp),1),$5t,_("abbr",{class:"tooltip",title:a.infraTooltip},M(a.townCp),9,B5t),$("="+M(a.cp),1)]),_("td",z5t,M(o.formatFixed(a.dailyPerCp,3)),1),_("td",null,[_("button",{onClick:s=>o.assign(a.w,r.hk)}," assign ",8,V5t)])])):nt("",!0)],64))),256))])):nt("",!0)],64)):nt("",!0)}const W5t=le(E5t,[["render",U5t],["__scopeId","data-v-a956de16"]]);const j5t={setup(){const e=ee();return{gameStore:At(),userStore:e}},props:{visible:Boolean},emits:["close","select"],components:{ItemIcon:no},data(){return{searchQuery:"",searchResults:[],emptySet:new Set([])}},computed:{itemNamesKeys(){const e={};return this.gameStore.ready&&Object.keys(this.gameStore.itemkeyPlantzones).forEach(t=>{const r=this.gameStore.uloc.item[t];e[r]=Number(t)}),e}},watch:{searchQuery(e){this.searchResults={};let t=0;for(const[r,n]of Object.entries(this.itemNamesKeys))if(r.toLowerCase().includes(e.toLowerCase())&&(this.searchResults[r]={hlSet:n in this.gameStore.itemkeyPlantzones?this.gameStore.itemkeyPlantzones[n]:new Set([]),type:"dropsItem",itemKey:n},t++,t>=10))break;t=0;for(const[r,n]of Object.entries(this.gameStore.uloc.node)){if(n.toLowerCase().includes(e.toLowerCase())&&(n in this.searchResults||(this.searchResults[n]={type:"name",hlSet:new Set([])}),this.searchResults[n].hlSet.add(Number(r)),t++,t>=10))break;const i=`${r}`;if(i.toLowerCase().includes(e.toLowerCase())&&(i in this.searchResults||(this.searchResults[i]={type:"key",hlSet:new Set([])}),this.searchResults[i].hlSet.add(Number(r)),t++,t>=10))break}}},methods:{onInput(){this.searchQuery===""&&(this.searchResults={})},selectItem(e){this.$emit("select",e),this.$emit("close")},focusInput(){var e;(e=this.$refs.searchInput)==null||e.focus()}}},G5t={key:0,class:"search-bar"},H5t={key:0},X5t=["onClick"];function Y5t(e,t,r,n,i,o){const a=Gt("ItemIcon");return r.visible?(I(),O("div",G5t,[at(_("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>i.searchQuery=s),onInput:t[1]||(t[1]=(...s)=>o.onInput&&o.onInput(...s)),ref:"searchInput",placeholder:"Search..."},null,544),[[zt,i.searchQuery]]),_("button",{onClick:t[2]||(t[2]=s=>o.selectItem(i.emptySet))},"reset"),i.searchResults?(I(),O("ul",H5t,[(I(!0),O(W,null,Pt(i.searchResults,(s,l)=>(I(),O("li",{onClick:u=>o.selectItem(s.hlSet)},[s.type=="dropsItem"?(I(),O(W,{key:0},[ht(a,{ik:s.itemKey},null,8,["ik"]),$(" "+M(l)+" ("+M(s.hlSet.size)+" nodes) ",1)],64)):s.type=="name"?(I(),O(W,{key:1},[$(" \u{1F5FA}\uFE0F "+M(l),1)],64)):s.type=="key"?(I(),O(W,{key:2},[$(" \u{1F5FA}\uFE0F "+M(l)+" - "+M(n.gameStore.uloc.node[l]),1)],64)):nt("",!0)],8,X5t))),256))])):nt("",!0)])):nt("",!0)}const K5t=le(j5t,[["render",Y5t]]);const Z5t={setup(){const e=At(),t=ee(),r=mr(),n=ii(),i=Kv();return{gameStore:e,userStore:t,routingStore:r,marketStore:n,mapStore:i}},components:{draggable:ret,ItemIcon:no,Worker:qC,TownWorkers:bB,Plantzone:SB,ModalDialog:QC,WorkerEdit:aj,WorkerSendSelection:Hyt,LodgingSelection:r_t,HousesSelection:X_t,NodeMap:$It,MapSelectedInfo:P6t,EmpireOverview:P5t,FloatingResourceEdit:Sx,WorkerSelection:W5t,SearchBar:K5t},data:()=>({workerEditing:null,workerEditingInitial:null,workerEditingInitialProfit:0,workerDialogVisible:!1,sendDialogWorker:null,sendDialogVisible:!1,lodgingDialogTown:"0",lodgingDialogData:null,lodgingDialogVisible:!1,housesDialogTown:0,housesDialogVisible:!1,importDialogVisible:!1,clickedNode:null,hoverInfo:null,resourceDialogWspd:150,resourceDialogRgroup:1,resourceDialogWkld:400,resourceDialogVisible:!1,panToPzk:null,panPaPos:null,selectWorkerDialogVisible:!1,selectWorkerHouseKey:0,importData:null,importSkipSections:{},prerelease_zerocost:!0,prerelease_colorGoblins:!1,showSearchBar:!1,highlightNodes:new Set([])}),created(){console.log("addEventListener"),window.addEventListener("keydown",this.onKeydown)},watch:{},computed:{},mounted(){},beforeUnmount(){window.removeEventListener("keydown",this.onKeydown)},methods:{formatFixed:dt,randBetween:_l,levelup:kg,onKeydown(e){e.ctrlKey&&e.code==="KeyF"&&(e.preventDefault(),this.showSearchBar=!0,vs(()=>this.$refs.searchBar.focusInput())),e.key==="Escape"&&(this.showSearchBar?this.showSearchBar=!1:this.handleSearchSelection(new Set([])))},handleSearchSelection(e){this.highlightNodes=e,vs(()=>{if(this.$refs.nodeMap.updateLayers(),e.size>0){let t=1e99,r=1e99,n=-1e99,i=-1e99;e.forEach(o=>{t=Math.min(t,this.gameStore.nodes[o].pos.x),r=Math.min(r,this.gameStore.nodes[o].pos.z),n=Math.max(n,this.gameStore.nodes[o].pos.x),i=Math.max(i,this.gameStore.nodes[o].pos.z)}),this.$refs.nodeMap.panToBbox(t,n,r,i)}}),this.showSearchBar=!1},hireWorker(e){const t=this.userStore.useDefaultWorker?{...this.userStore.defaultWorker,tnk:this.gameStore.tk2tnk(e)}:this.hireRandomArtGob(e);console.log("w",t),this.userStore.userWorkers.push(t)},hireRandomArtGob(e){const t=this.userStore.newWorkerName(e),r=7572;let n={tk:e,tnk:this.gameStore.tk2tnk(e),charkey:r,label:t,level:1,wspdSheet:this.gameStore.workerStatic[r].wspd/1e6,mspdSheet:this.gameStore.workerStatic[r].mspd/100,luckSheet:this.gameStore.workerStatic[r].luck/1e4,skills:[],job:null};return n.skills.push(this.gameStore.randomSkill(n.skills)),kg(this.gameStore,n,40),n.wspdSheet=Math.round(n.wspdSheet*100)/100,n.mspdSheet=Math.round(n.mspdSheet*100)/100,n.luckSheet=Math.round(n.luckSheet*100)/100,n},fireWorker(e){this.userStore.userWorkers=this.userStore.userWorkers.filter(t=>t!=e)},sendWorker(e){this.gameStore.workerStatsOnPlantzone(e),this.sendDialogWorker=e,this.sendDialogVisible=!0},unsendWorker(e){e.job=null},editWorker(e){this.workerEditing=e,this.workerEditingInitial=JSON.parse(JSON.stringify(e)),this.workerEditingInitialProfit=e&&e.job&&typeof e.job=="number"?this.routingStore.pzJobs[this.workerEditing.job].profit.priceDaily:0,this.workerDialogVisible=!0},hireAll(){for(const e of Object.keys(this.gameStore.lodgingPerTown)){const t=this.userStore.townFreeLodgingCount(e);for(let r=0;r<t;r++)this.hireWorker(e)}},fireAll(){this.userStore.userWorkers=[]},selectLodging(e){this.lodgingDialogTown=e,this.lodgingDialogData=this.gameStore.lodgingPerTown[e],this.lodgingDialogVisible=!0},selectHouses(e){this.housesDialogTown=e,this.housesDialogVisible=!0,console.log("housesDialogVisible")},selectWorker(e){this.selectWorkerHouseKey=e,this.selectWorkerDialogVisible=!0,console.log("selectWorkerDialogVisible")},fileImport(e){if(!e)return;const t=e.target[0].files;if(t.length<1)return;const r=t[0];console.log("fileImport",r);const n=new FileReader;n.onload=this.fileParse,n.readAsText(r)},fileParse(e){let t=e.target.result,r=JSON.parse(t);for(let n=r.userWorkers.length-1;n>=0;n--){const i=r.userWorkers[n].charkey;i in this.gameStore.workerStatic||(console.log(`unknown charkey ${i} - discarded`),r.userWorkers.splice(n,1))}r.userWorkers.forEach(n=>{delete n.tk;const i=this.gameStore.workerStatic[n.charkey];if("wspdLvlup"in n){const o=(i.wspd+n.wspdLvlup)/1e6;n.wspdSheet=Math.round(o*100)/100,delete n.wspdLvlup}if("mspdLvlup"in n){const o=i.mspd/100*(1+n.mspdLvlup/1e6);n.mspdSheet=Math.round(o*100)/100,delete n.mspdLvlup}if("mspdBase"in n&&delete n.mspdBase,"luckLvlup"in n){const o=(i.luck+n.luckLvlup)/1e4;n.luckSheet=Math.round(o*100)/100,delete n.luckLvlup}if(this.gameStore.jobIsWorkshop(n.job)&&(n.job.hk in this.userStore.userWorkshops||(this.userStore.userWorkshops[n.job.hk]={...this.userStore.defaultUserWorkshop},console.log(`userWorkshop #${n.job.hk} not set, using default`))),typeof n.job=="number"){const o=n.job;n.job={kind:"plantzone",pzk:o,storage:n.tnk}}this.gameStore.jobIsPz(n.job)&&!(n.job.pzk in this.gameStore.plantzones)&&(console.log(`removing plantzone job of worker ${n.label}: unknown pzk`,n.job),n.job=null),Array.isArray(n.job)&&(n.job={kind:"custom",profit:n.job[1],cp:n.job[2],label:n.job[3]})}),console.log("import parsed"),this.userStore.$patch(r),r.lodgingTaken&&Object.keys(r.lodgingTaken).length>0?(console.log("overwriting lodgingTaken"),this.userStore.lodgingTaken=r.lodgingTaken):console.log("keeping lodgingTaken"),r.lodgingP2W&&Object.keys(r.lodgingP2W).length>0?(console.log("overwriting lodgingP2W"),this.userStore.lodgingP2W=r.lodgingP2W):console.log("keeping lodgingP2W"),console.log("import done"),this.importDialogVisible=!1},fileExport(){var e=document.createElement("a");let t={activateAncado:this.userStore.activateAncado,lodgingP2W:this.userStore.lodgingP2W,lodgingTaken:this.userStore.lodgingTaken,userWorkers:this.userStore.userWorkers,farmingEnable:this.userStore.farmingEnable,farmingProfit:this.userStore.farmingProfit,farmingBareProfit:this.userStore.farmingBareProfit,grindTakenList:this.userStore.grindTakenList};const r=JSON.stringify(t);var n=new Blob([r],{type:"text/plain"});e.href=URL.createObjectURL(n),e.download="user.json",e.click()},log(e){console.log(e)},showResourceDialog(e){this.resourceDialogVisible=!0,this.resourceDialogRgroup=this.gameStore.plantzoneStatic[e].regiongroup,this.resourceDialogWkld=this.gameStore.plantzones[e].peg.time,this.resourceDialogWspd=this.userStore.workedPlantzones.has(String(e))?this.routingStore.pzJobs[e].worker.wspdSheet+this.gameStore.wspdBonus(this.routingStore.pzJobs[e].worker,"farm"):150},panToHash(){this.$route.hash&&(this.panToPzk=this.$route.hash.replace("#node",""))},panToPaPos(e){this.panPaPos=e},setClickedNode(e){this.clickedNode=e}},mounted(){this.panToHash()}},Be=e=>(er("data-v-f566e30e"),e=e(),rr(),e),q5t=Be(()=>_("button",null,"import",-1)),J5t=Be(()=>_("br",null,null,-1)),Q5t={style:{width:"24em"}},tLt=$("Test with workspeed: "),eLt={id:"canvas-limiter"},rLt={key:0},nLt={key:1},iLt=Be(()=>_("br",null,null,-1)),oLt=Be(()=>_("br",null,null,-1)),aLt={id:"topleft"},sLt=Be(()=>_("summary",null,"Empire",-1)),lLt={id:"leftside"},uLt={id:"rightside"},cLt={id:"totals"},fLt={class:"fsxs"},hLt=Be(()=>_("br",null,null,-1)),dLt={key:0,title:"CP not allocated for fences, enable Farming on Settings page",class:"tooltip"},pLt={key:1,title:"not all fences being worked, for best results either send 10 workers or none at all",class:"tooltip"},gLt=Be(()=>_("br",null,null,-1)),vLt=Be(()=>_("br",null,null,-1)),mLt=Be(()=>_("br",null,null,-1)),yLt={class:"fsxs"},_Lt={class:"draggable"},bLt=$(" invested for droprate: "),wLt=["title"],SLt=Be(()=>_("br",null,null,-1)),TLt=Be(()=>_("br",null,null,-1)),kLt=$(" wagon routes: "),PLt=["title"],ELt=Be(()=>_("br",null,null,-1)),CLt=Be(()=>_("br",null,null,-1)),ALt=Be(()=>_("br",null,null,-1)),xLt=Be(()=>_("br",null,null,-1)),MLt=Be(()=>_("br",null,null,-1)),ILt={class:"fsxs"},LLt=Be(()=>_("br",null,null,-1)),OLt=Be(()=>_("br",null,null,-1)),RLt=Be(()=>_("br",null,null,-1)),DLt=Be(()=>_("br",null,null,-1)),NLt=$(" (M$/day/CP) "),FLt={class:"fsxs"},$Lt=Be(()=>_("br",null,null,-1)),BLt=Be(()=>_("br",null,null,-1)),zLt=Be(()=>_("br",null,null,-1)),VLt=Be(()=>_("br",null,null,-1)),ULt=Be(()=>_("label",{for:"wr_cb"}," wasm routing",-1)),WLt=Be(()=>_("br",null,null,-1)),jLt=Be(()=>_("div",{style:{clear:"both"}},null,-1)),GLt={id:"workerlist"},HLt=Be(()=>_("summary",null,"All towns/workers list",-1)),XLt=$(" show: "),YLt={class:"switch mauto"},KLt=Be(()=>_("span",{class:"slider"},null,-1)),ZLt=$(" names "),qLt={class:"switch mauto"},JLt=["disabled"],QLt=Be(()=>_("span",{class:"slider"},null,-1)),tOt=$(" stat ranks "),eOt={class:"switch mauto"},rOt=["disabled"],nOt=Be(()=>_("span",{class:"slider"},null,-1)),iOt=$(" stats after skills "),oOt={class:"switch mauto"},aOt=Be(()=>_("span",{class:"slider"},null,-1)),sOt=$(" efficiency ");function lOt(e,t,r,n,i,o){const a=Gt("WorkerEdit"),s=Gt("ModalDialog"),l=Gt("WorkerSendSelection"),u=Gt("LodgingSelection"),c=Gt("HousesSelection"),f=Gt("WorkerSelection"),h=Gt("FloatingResourceEdit"),d=Gt("NodeMap"),p=Gt("ItemIcon"),g=Gt("EmpireOverview"),m=Gt("MapSelectedInfo"),v=Gt("search-bar"),y=Gt("draggable"),b=Gt("TownWorkers");return I(),O(W,null,[ht(s,{show:e.workerDialogVisible,"onUpdate:show":t[1]||(t[1]=w=>e.workerDialogVisible=w)},{default:Fe(()=>[ht(a,{workerEditing:e.workerEditing,workerInitial:e.workerEditingInitial,initialProfit:e.workerEditingInitialProfit,show:e.workerDialogVisible,"onUpdate:show":t[0]||(t[0]=w=>e.workerDialogVisible=w)},null,8,["workerEditing","workerInitial","initialProfit","show"])]),_:1},8,["show"]),ht(s,{show:e.sendDialogVisible,"onUpdate:show":t[3]||(t[3]=w=>e.sendDialogVisible=w)},{default:Fe(()=>[ht(l,{w:e.sendDialogWorker,show:e.sendDialogVisible,"onUpdate:show":t[2]||(t[2]=w=>e.sendDialogVisible=w)},null,8,["w","show"])]),_:1},8,["show"]),ht(s,{show:e.lodgingDialogVisible,"onUpdate:show":t[5]||(t[5]=w=>e.lodgingDialogVisible=w)},{default:Fe(()=>[ht(u,{tk:e.lodgingDialogTown,o:e.lodgingDialogData,show:e.lodgingDialogVisible,"onUpdate:show":t[4]||(t[4]=w=>e.lodgingDialogVisible=w)},null,8,["tk","o","show"])]),_:1},8,["show"]),ht(s,{show:e.housesDialogVisible,"onUpdate:show":t[7]||(t[7]=w=>e.housesDialogVisible=w)},{default:Fe(()=>[ht(c,{tk:e.housesDialogTown,show:e.housesDialogVisible,"onUpdate:show":t[6]||(t[6]=w=>e.housesDialogVisible=w)},null,8,["tk","show"])]),_:1},8,["show"]),ht(s,{show:e.selectWorkerDialogVisible,"onUpdate:show":t[9]||(t[9]=w=>e.selectWorkerDialogVisible=w)},{default:Fe(()=>[ht(f,{hk:e.selectWorkerHouseKey,show:e.selectWorkerDialogVisible,"onUpdate:show":t[8]||(t[8]=w=>e.selectWorkerDialogVisible=w)},null,8,["hk","show"])]),_:1},8,["show"]),ht(s,{show:e.importDialogVisible,"onUpdate:show":t[12]||(t[12]=w=>e.importDialogVisible=w)},{default:Fe(()=>[_("form",{onSubmit:t[11]||(t[11]=zh(w=>o.fileImport(w),["prevent"]))},[_("input",{type:"file",accept:".json",onClick:t[10]||(t[10]=w=>o.fileImport())}),q5t,J5t],32)]),_:1},8,["show"]),ht(s,{show:e.resourceDialogVisible,"onUpdate:show":t[15]||(t[15]=w=>e.resourceDialogVisible=w)},{default:Fe(()=>[ht(h,{rgk:e.resourceDialogRgroup,wspd:e.resourceDialogWspd,workload:e.resourceDialogWkld,show:e.resourceDialogVisible,"onUpdate:show":t[13]||(t[13]=w=>e.resourceDialogVisible=w)},null,8,["rgk","wspd","workload","show"]),_("div",Q5t,[tLt,at(_("input",{type:"range",class:"vmid","onUpdate:modelValue":t[14]||(t[14]=w=>e.resourceDialogWspd=w),min:"40",max:"200",step:"0.01"},null,512),[[zt,e.resourceDialogWspd,void 0,{number:!0}]]),$(" "+M(e.resourceDialogWspd),1)])]),_:1},8,["show"]),_("main",null,[_("div",eLt,[ht(d,{ref:"nodeMap",clickedObj:e.clickedNode,"onUpdate:clickedObj":t[16]||(t[16]=w=>e.clickedNode=w),hoverInfo:e.hoverInfo,"onUpdate:hoverInfo":t[17]||(t[17]=w=>e.hoverInfo=w),panToPzk:e.panToPzk,"onUpdate:panToPzk":t[18]||(t[18]=w=>e.panToPzk=w),panPaPos:e.panPaPos,"onUpdate:panPaPos":t[19]||(t[19]=w=>e.panPaPos=w),onPanAnywhere:t[20]||(t[20]=w=>e.panPaPos=null),highlightNodes:e.highlightNodes},null,8,["clickedObj","hoverInfo","panToPzk","panPaPos","highlightNodes"]),e.hoverInfo&&e.hoverInfo.object?(I(),O("div",{key:0,id:"tooltip",style:cs({left:e.hoverInfo.x+"px",top:e.hoverInfo.y+"px"})},[$(M(e.hoverInfo.object.key)+" "+M(n.gameStore.uloc.node[e.hoverInfo.object.key])+" "+M(e.hoverInfo.object.thisCpCost)+"CP ",1),e.hoverInfo.object.key in this.gameStore.plantzones?(I(),O("span",rLt,[(I(!0),O(W,null,Pt(this.gameStore.plantzones[e.hoverInfo.object.key].itemkeys,w=>(I(),qr(p,{ik:Number(w)},null,8,["ik"]))),256))])):nt("",!0),this.gameStore.townsConnectionRoots.has(e.hoverInfo.object.key)?(I(),O("span",nLt,[iLt,$("[town "+M(this.gameStore._tnk2tk[e.hoverInfo.object.key])+"] ",1)])):nt("",!0),oLt],4)):nt("",!0),_("div",aLt,[_("details",null,[sLt,ht(g,{onPanToPaPos:o.panToPaPos},null,8,["onPanToPaPos"])])]),_("div",lLt,[ht(m,{clickedNode:e.clickedNode,onSelectLodging:o.selectLodging,onSelectHouses:o.selectHouses,onHireWorker:o.hireWorker,onEditWorker:o.editWorker,onSendWorker:o.sendWorker,onPanToPaPos:o.panToPaPos,onShowResourceDialog:o.showResourceDialog,onSetClickedNode:o.setClickedNode,onSelectWorker:o.selectWorker},null,8,["clickedNode","onSelectLodging","onSelectHouses","onHireWorker","onEditWorker","onSendWorker","onPanToPaPos","onShowResourceDialog","onSetClickedNode","onSelectWorker"])]),_("div",uLt,[ht(v,{ref:"searchBar",visible:e.showSearchBar,onClose:t[21]||(t[21]=w=>e.showSearchBar=!1),onSelect:o.handleSearchSelection},null,8,["visible","onSelect"]),_("div",cLt,[_("details",null,[_("summary",null,"Total workers: "+M(n.userStore.countWorkers),1),_("p",fLt,[$(" nodes: "+M(n.userStore.workedPlantzones.size)+" ",1),hLt,n.userStore.workersFarmingCount?(I(),O(W,{key:0},[n.userStore.farmingEnable?n.userStore.workersFarmingCount&&n.userStore.workersFarmingCount<10?(I(),O("abbr",pLt,"\u26A0\uFE0F")):nt("",!0):(I(),O("abbr",dLt,"\u26A0\uFE0F")),$(" farming: "+M(n.userStore.workersFarmingCount)+" ",1),gLt],64)):nt("",!0),n.userStore.workersWorkshopCount?(I(),O(W,{key:1},[$(" workshops: "+M(n.userStore.workersWorkshopCount)+" ",1),vLt],64)):nt("",!0),n.userStore.workersCustomCount?(I(),O(W,{key:2},[$(" custom: "+M(n.userStore.workersCustomCount)+" ",1),mLt],64)):nt("",!0),n.userStore.workersIdleCount?(I(),O(W,{key:3},[$(" \u26A0\uFE0F idle: "+M(n.userStore.workersIdleCount),1)],64)):nt("",!0)])]),_("details",null,[_("summary",null,"Total CP: "+M(o.formatFixed(n.userStore.totalCP)),1),_("p",yLt,[ht(y,{modelValue:n.userStore.linkOrder,"onUpdate:modelValue":t[22]||(t[22]=w=>n.userStore.linkOrder=w),itemKey:"id"},{item:Fe(({element:w,index:T})=>[_("div",_Lt,[$(M(T+1)+". ",1),w.name=="grind"?(I(),O(W,{key:0},[bLt,_("abbr",{class:"tooltip",title:n.userStore.grindTakenDesc},M(n.routingStore.routing.autotakenGrindNodesCP),9,wLt),SLt],64)):w.name=="worker"?(I(),O(W,{key:1},[$(" nodes: "+M(n.routingStore.routing.autotakenWorkerNodesCP)+" ",1),TLt],64)):w.name=="wagon"?(I(),O(W,{key:2},[kLt,_("abbr",{class:"tooltip",title:[...n.userStore.wagonRoutes].reduce((S,k)=>S+`${n.gameStore.uloc.node[k.origin]} - ${n.gameStore.uloc.node[k.destination]}
`,"")},M(n.routingStore.routing.autotakenWagonNodesCP),9,PLt),ELt],64)):nt("",!0)])]),_:1},8,["modelValue"]),$(" lodging/storage: "+M(n.userStore.lodgage)+" ",1),CLt,n.userStore.farmingEnable?(I(),O(W,{key:0},[$(" farming: "+M(n.userStore.farmingCP)+" ",1),ALt],64)):nt("",!0),n.userStore.workersWorkshopCount?(I(),O(W,{key:1},[$(" workshops: "+M(o.formatFixed(n.userStore.workshopTotalCP))+" ",1),xLt],64)):nt("",!0),n.userStore.workersCustomCount?(I(),O(W,{key:2},[$(" custom: "+M(n.userStore.customTotalCP)+" ",1),MLt],64)):nt("",!0)])]),_("details",null,[_("summary",null,"Total M$/day: "+M(o.formatFixed(n.userStore.allJobsTotalDailyProfit,2)),1),_("p",ILt,[$(" nodes: "+M(o.formatFixed(n.userStore.pzJobsTotalDailyProfit,2))+" ",1),LLt,n.userStore.workersFarmingCount?(I(),O(W,{key:0},[$(" farming: "+M(o.formatFixed(n.userStore.farmingTotalProfit,2))+" ",1),OLt],64)):nt("",!0),n.userStore.workersWorkshopCount?(I(),O(W,{key:1},[$(" workshops: "+M(o.formatFixed(n.userStore.workshopTotalProfit,2))+" ",1),RLt],64)):nt("",!0),n.userStore.workersCustomCount?(I(),O(W,{key:2},[$(" custom: "+M(o.formatFixed(n.userStore.customTotalProfit,2))+" ",1),DLt],64)):nt("",!0)])]),_("details",null,[_("summary",null,"Total efficiency: "+M(o.formatFixed(n.userStore.allJobsDailyProfitPerCp,3)),1),NLt,_("p",FLt,[$(" nodes: "+M(o.formatFixed(n.userStore.pzJobsDailyProfitPerCp,3))+" ",1),$Lt,n.userStore.farmingEnable?(I(),O(W,{key:0},[$(" farming: "+M(o.formatFixed(n.userStore.farmingJobsDailyProfitPerCp,3))+" ",1),BLt],64)):nt("",!0),n.userStore.workersWorkshopCount?(I(),O(W,{key:1},[$(" workshops: "+M(o.formatFixed(n.userStore.workshopJobsDailyProfitPerCp,3))+" ",1),zLt],64)):nt("",!0),n.userStore.workersCustomCount?(I(),O(W,{key:2},[$(" custom: "+M(o.formatFixed(n.userStore.customJobsDailyProfitPerCp,3))+" ",1),VLt],64)):nt("",!0)])]),at(_("input",{type:"checkbox",id:"wr_cb","onUpdate:modelValue":t[23]||(t[23]=w=>n.userStore.wasmRouting=w)},null,512),[[Ge,n.userStore.wasmRouting]]),ULt,WLt]),jLt,_("div",GLt,[_("details",null,[HLt,XLt,_("label",YLt,[at(_("input",{type:"checkbox","onUpdate:modelValue":t[24]||(t[24]=w=>n.userStore.displayWorkerNames=w)},null,512),[[Ge,n.userStore.displayWorkerNames]]),KLt,ZLt]),_("label",qLt,[at(_("input",{type:"checkbox","onUpdate:modelValue":t[25]||(t[25]=w=>n.userStore.displayWorkerStatsRank=w),disabled:n.userStore.displayWorkerStatsForPz},null,8,JLt),[[Ge,n.userStore.displayWorkerStatsRank]]),QLt,tOt]),_("label",eOt,[at(_("input",{type:"checkbox","onUpdate:modelValue":t[26]||(t[26]=w=>n.userStore.displayWorkerStatsForPz=w),disabled:n.userStore.displayWorkerStatsRank},null,8,rOt),[[Ge,n.userStore.displayWorkerStatsForPz]]),nOt,iOt]),_("label",oOt,[at(_("input",{type:"checkbox","onUpdate:modelValue":t[27]||(t[27]=w=>n.userStore.displayProfitPerCp=w)},null,512),[[Ge,n.userStore.displayProfitPerCp]]),aOt,sOt]),_("button",{onClick:t[28]||(t[28]=w=>e.importDialogVisible=!0)},"import"),_("button",{onClick:t[29]||(t[29]=w=>o.fileExport())},"export"),nt("",!0),_("button",{onClick:t[31]||(t[31]=w=>o.fireAll())},"fire all"),_("table",null,[(I(!0),O(W,null,Pt(n.gameStore.lodgingPerTown,(w,T)=>(I(),qr(b,{o:w,tk:Number(T),onSelectLodging:o.selectLodging,onSelectHouses:o.selectHouses,onHireWorker:o.hireWorker,onEditWorker:o.editWorker,onSendWorker:o.sendWorker,onPanToPaPos:o.panToPaPos},null,8,["o","tk","onSelectLodging","onSelectHouses","onHireWorker","onEditWorker","onSendWorker","onPanToPaPos"]))),256))])])])])])])],64)}const uOt=le(Z5t,[["render",lOt],["__scopeId","data-v-f566e30e"]]);const cOt={setup(){const e=ee(),t=mr();return{gameStore:At(),userStore:e,routingStore:t}},props:{e:Object,showGiantValues:Boolean},components:{ItemIcon:no},methods:{formatFixed:dt,formatDropQty(e){return e<.1?dt(e,3):dt(e,2)}},computed:{actualWorker(){return this.routingStore.pzJobs[this.e.key].worker},takenInfo(){if(!this.userStore.workedPlantzones.has(this.e.key.toString()))return{icon:"\u274C",text:"not assigned"};if(this.actualWorker.tnk!=this.e.tnk){let t=`town used: ${this.gameStore.nodeName(this.actualWorker.tnk)}
suggested: ${this.gameStore.nodeName(this.e.tnk)}`;if(this.actualWorker.tnk in this.e.alt_towns_profits){const r=this.e.dailyPerCp/this.e.alt_towns_profits[this.actualWorker.tnk];t+=` (${dt(r*100-100)}% better)`}return{icon:"\u26A0\uFE0F",text:t}}if(this.actualWorker.charkey!=this.e.charkey){let t=`worker used: ${this.gameStore.uloc.char[this.actualWorker.charkey]}
suggested: ${this.gameStore.uloc.char[this.e.charkey]}`,r="\u26A0\uFE0F";if(this.actualWorker.charkey in this.e.alt_workers_profits){const n=this.e.priceDaily/this.e.alt_workers_profits[this.actualWorker.charkey];n<1.1&&(r="\u2714\uFE0F"),t+=` (${dt(n*100-100)}% better)`}return{icon:r,text:t}}return{icon:"\u2714\uFE0F",text:"all good"}}}},fOt={key:0,class:"fss"},hOt={class:"tac"},dOt={class:"tac"},pOt={key:0},gOt={class:"fss"},vOt={key:1},mOt={class:"tac"},yOt=["title"],_Ot={class:"tac"},bOt={class:"tac"},wOt={class:"tac"},SOt=["title"],TOt={class:"tac"},kOt={class:"tac"},POt={class:"tac"},EOt={class:"tac"},COt={class:"tac"},AOt={key:0,class:"tac"},xOt=["title"];function MOt(e,t,r,n,i,o){const a=Gt("RouterLink"),s=Gt("ItemIcon");return I(),O("tr",null,[_("td",null,[ht(a,{tag:"a",to:{path:"./",hash:"#node"+r.e.key}},{default:Fe(()=>[$(M(n.gameStore.plantzoneName(r.e.key)),1)]),_:1},8,["to"])]),_("td",null,[(I(!0),O(W,null,Pt(r.e.unlucky,(l,u)=>(I(),O("div",null,[ht(a,{tag:"a",to:{path:"./settings",hash:"#item"+u}},{default:Fe(()=>[_("span",null,[$(M(o.formatDropQty(l))+" ",1),ht(s,{ik:Number(u),with_name:!0},null,8,["ik"])])]),_:2},1032,["to"]),r.showGiantValues?(I(),O("span",fOt," ["+M(o.formatDropQty(r.e.unlucky_gi[u]))+"] ",1)):nt("",!0)]))),256))]),_("td",hOt,[(I(!0),O(W,null,Pt(r.e.lucky,(l,u)=>(I(),O("div",null,[ht(a,{tag:"a",to:{path:"./settings",hash:"#item"+u}},{default:Fe(()=>[$(M(o.formatDropQty(l))+"\xA0",1),ht(s,{ik:Number(u)},null,8,["ik"])]),_:2},1032,["to"])]))),256))]),_("td",dOt,[r.showGiantValues?(I(),O("div",pOt,[$(M(o.formatFixed(r.e.cycleValue_gob,0))+" ",1),_("span",gOt,"["+M(o.formatFixed(r.e.cycleValue_gi,0))+"]",1)])):(I(),O("div",vOt,M(o.formatFixed(r.e.cycleValue,0)),1))]),_("td",mOt,[_("abbr",{class:"tooltip nound",title:r.e.alt_towns.map(l=>`${n.gameStore.nodeName(l.tnk)}: ${o.formatFixed(l.dailyPerCp,2)} M$/day/CP \u2192 ${o.formatFixed(100*l.dailyPerCp/r.e.dailyPerCp)}%`).join(`
`)},M(n.gameStore.nodeName(r.e.tnk)),9,yOt)]),_("td",_Ot,M(o.formatFixed(r.e.dist,0)),1),_("td",bOt,M(r.e.cp),1),_("td",wOt,[_("abbr",{class:"tooltip nound",title:r.e.alt_workers.map(l=>`${n.gameStore.uloc.char[l.charkey]}: ${o.formatFixed(l.priceDaily,2)} M$/day \u2192 ${o.formatFixed(100*l.priceDaily/r.e.priceDaily)}%`).join(`
`)},M({goblin:"\u{1F47A}",giant:"\u{1F422}",human:"\u{1F468}"}[r.e.kind]),9,SOt)]),_("td",TOt,M(o.formatFixed(r.e.wspd+5,1)),1),_("td",kOt,[n.userStore.allowFloating&&n.userStore.useFloatingResources[r.e.regiongroup]?(I(),O(W,{key:0},[$(" ~"+M(o.formatFixed(n.userStore.medianWorkloads[r.e.key],2)),1)],64)):(I(),O(W,{key:1},[$(M(o.formatFixed(r.e.activeWorkload,2)),1)],64))]),_("td",POt,M(o.formatFixed(r.e.cyclesDaily,1)),1),_("td",EOt,M(o.formatFixed(r.e.priceDaily,2)),1),_("td",COt,M(o.formatFixed(r.e.dailyPerCp,3)),1),n.userStore.workedPlantzones.size?(I(),O("td",AOt,[_("abbr",{class:"tooltip nound",title:o.takenInfo.text},M(o.takenInfo.icon),9,xOt)])):nt("",!0)])}const IOt=le(cOt,[["render",MOt],["__scopeId","data-v-7444b3f1"]]);const LOt={setup(){const e=ee(),t=At(),r=ii(),n=Kv();return n.$subscribe((i,o)=>{localStorage.setItem("map",JSON.stringify(o))}),e.$subscribe((i,o)=>{const a=Date.now();localStorage.setItem("user",JSON.stringify(o)),console.log("userStore subscription took",Date.now()-a,"ms")}),{marketStore:r,userStore:e,gameStore:t,mapStore:n}},components:{PlantzonesRow:IOt},data:()=>({wspd:150,mspd:10,luck:10,showGiantValues:!1,mediahNodes:new Set([1210,1212,1215,1216,1219,1217,1213,1220,1205,1218]),towns:[-1],filterTown:-1,hideTaken:!1}),methods:{formatFixed:dt,highlightHash(){if(this.$route.hash){const e=document.querySelector(this.$route.hash);e&&(e.scrollIntoView(),e.classList.add("anim"))}},setMedianChar(e){if(!e)return;const t=this.gameStore.workerStatic[e];let r=t.wspd,n=0,i=t.luck;for(let a=2;a<=40;a++)r+=(t.wspd_lo+t.wspd_hi)/2,n+=(t.mspd_lo+t.mspd_hi)/2,i+=(t.luck_lo+t.luck_hi)/2;let o=t.mspd*(1+n/1e6);this.wspd=Math.round(r/1e6*100)/100,this.mspd=Math.round(o)/100,this.luck=Math.round(i/1e4*100)/100,this.isGiant=this.gameStore.isGiant(e)}},computed:{allPlantzonesNearestCpTownProfit(){const e=Date.now(),t=[];for(const r of Object.values(this.gameStore.plantzones)){const n=r.key,i=this.mediahNodes.has(n)?3:2;let o=this.gameStore.dijkstraNearestTowns(n,i,void 0,!0,void 0,!0);o.sort((u,c)=>u[1]-c[1]);let a={},s={};for(const u of Object.values(o)){const[c,f]=u,h=this.gameStore.profitPzTownArtisans(n,c,f);if(c!=1343&&h.connected){if(s[h.tnk]=h.dailyPerCp,!("priceDaily"in a)){a=h;continue}h.dailyPerCp>a.dailyPerCp&&(a=h)}}if(!("alt_workers"in a))throw console.log(a),new Error(`Failed to calc alt_workers for pzk=${n}`);const l=Object.entries(s).map(([u,c])=>({tnk:u,dailyPerCp:c}));l.sort((u,c)=>c.dailyPerCp-u.dailyPerCp),a.alt_towns_profits=s,a.alt_towns=l,t.push(a)}return console.log("cpt: plantzonesNearestCpTownProfit took",Date.now()-e,"ms"),t},allPlantzonesNearestCpTownProfit_sorted(){const e=this.allPlantzonesNearestCpTownProfit.filter(t=>!(this.filterTown!=-1&&t.tnk!=this.filterTown||this.hideTaken&&this.userStore.workedPlantzones.has(t.key.toString())));return e.sort((t,r)=>isFinite(r.dailyPerCp-t.dailyPerCp)?r.dailyPerCp-t.dailyPerCp:isFinite(t.dailyPerCp)?-1:1),e},townsFilter(){return this.gameStore.townsWithLodging.map(e=>e==1343?-1:e)}},mounted(){this.highlightHash()},updated(){this.$nextTick(()=>this.highlightHash())}},jo=e=>(er("data-v-1a05e86a"),e=e(),rr(),e),OOt={id:"toptext"},ROt=jo(()=>_("p",null," Profits here are calculated using average level 40 stats for artisan workers at corresponding town (papu/dokkebi/etc), with only one skill (+5\u{1F528}). Home page has more tiers, levels, and skills. ",-1)),DOt=jo(()=>_("p",null," Note that CP costs shown here are independent for each node. In practice however, multiple resource nodes can reuse the same town connection, resulting in higher combined $/CP. ",-1)),NOt=jo(()=>_("p",null," For example, taking both Shakatu Fig nodes should not be 3+3 but 3+1 CP. Use Home page instead of Plantzones to take into account connection reuse (and also lodging/storage costs). ",-1)),FOt=jo(()=>_("p",null," Don't forget to set up your server and prices on Settings page and maybe take a look at Resources as well. \u{1F47A}=goblin, \u{1F468}=human, \u{1F422}=giant, hover for more info ",-1)),$Ot=$(" Only show entries with best town = "),BOt=["value"],zOt=$(" hide taken "),VOt={class:"scroll"},UOt={class:"stickyhead"},WOt=jo(()=>_("th",{rowspan:"2"},"Node",-1)),jOt={colspan:"3"},GOt=$("cycle drops "),HOt={class:"fss"},XOt=$("["),YOt=$(" as giant]"),KOt=jo(()=>_("th",{colspan:"3"},"best town",-1)),ZOt=jo(()=>_("th",{colspan:"2"},"best worker",-1)),qOt=jo(()=>_("th",{rowspan:"2"},"workload",-1)),JOt=jo(()=>_("th",{colspan:"3"},"daily",-1)),QOt={key:0,rowspan:"2"},tRt=jo(()=>_("abbr",{class:"tooltip nound",title:`assigned on Home page?
  (hover for details)
  'X% better' does not consider:
  - worker stats
  - worker skills
  - connection reuse
  - lodging and storage`},"\u{1F3E0}",-1)),eRt=[tRt],rRt=jo(()=>_("tr",null,[_("th",{class:"rowspanned colspanned"},"unlucky"),_("th",{class:"colspanned"},[$(" lucky "),_("abbr",{title:`you always get unlucky items;
  these are ADDITIONAL, with
    chance equal to luck stat`,class:"tooltip"},"\u2139")]),_("th",{class:"colspanned"},"$ value"),_("th",{class:"colspanned"},"name"),_("th",{class:"colspanned"},"walk"),_("th",{class:"colspanned"},"CP"),_("th",{class:"colspanned"},"type"),_("th",{class:"colspanned"},"wspd"),_("th",{class:"colspanned"},"cycles"),_("th",{class:"colspanned"},"M$"),_("th",{class:"colspanned"},"M$/CP")],-1));function nRt(e,t,r,n,i,o){const a=Gt("PlantzonesRow");return I(),O("main",null,[_("div",OOt,[ROt,DOt,NOt,FOt,$Ot,at(_("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>e.filterTown=s)},[(I(!0),O(W,null,Pt(o.townsFilter,s=>(I(),O("option",{value:s},M(s>=0?n.gameStore.nodeName(s):"any"),9,BOt))),256))],512),[[cr,e.filterTown]]),zOt,at(_("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=s=>e.hideTaken=s)},null,512),[[Ge,e.hideTaken]])]),_("div",VOt,[_("table",UOt,[_("thead",null,[_("tr",null,[WOt,_("th",jOt,[GOt,_("span",HOt,[XOt,at(_("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=s=>e.showGiantValues=s)},null,512),[[Ge,e.showGiantValues]]),YOt])]),KOt,ZOt,qOt,JOt,n.userStore.workedPlantzones.size?(I(),O("th",QOt,eRt)):nt("",!0)]),rRt]),_("tbody",null,[(I(!0),O(W,null,Pt(o.allPlantzonesNearestCpTownProfit_sorted,s=>(I(),qr(a,{id:"drops"+s.key,e:s,showGiantValues:e.showGiantValues},null,8,["id","e","showGiantValues"]))),256))])])])])}const iRt=le(LOt,[["render",nRt],["__scopeId","data-v-1a05e86a"]]),oRt={setup(){const e=At(),t=ee(),r=ii();return t.$subscribe((n,i)=>{const o=Date.now();localStorage.setItem("user",JSON.stringify(i)),console.log("userStore subscription took",Date.now()-o,"ms")}),{gameStore:e,userStore:t,marketStore:r}},data:()=>({}),created(){},mounted(){},watch:{},methods:{}},aRt=_("br",null,null,-1),sRt=_("br",null,null,-1),lRt=_("tr",null,[_("th"),_("th",null,"Town / House"),_("th",null,"Lodging"),_("th",null,"CP")],-1),uRt=_("td",null,null,-1),cRt={class:"header"},fRt=$(" P2W: "),hRt=["onUpdate:modelValue"],dRt=["onUpdate:modelValue"],pRt=["href"];function gRt(e,t,r,n,i,o){return I(),O("main",null,[$(" Total lodging slots: "+M(n.userStore.haveLodging.slots.total),1),aRt,$(" Total CP spent: "+M(n.userStore.haveLodging.cp.total),1),sRt,_("table",null,[lRt,(I(!0),O(W,null,Pt(n.gameStore.lodgingPerTown,(a,s)=>(I(),O(W,null,[_("tr",null,[uRt,_("td",null,[_("span",cRt,M(n.gameStore.uloc.town[s]),1),fRt,at(_("input",{type:"number","onUpdate:modelValue":l=>n.userStore.lodgingP2W[s]=l,class:"short"},null,8,hRt),[[zt,n.userStore.lodgingP2W[s],void 0,{number:!0}]])]),_("td",null,M(n.userStore.haveLodging.slots.perTown[s]),1),_("td",null,M(n.userStore.haveLodging.cp.perTown[s]),1)]),(I(!0),O(W,null,Pt(a.houses,l=>(I(),O("tr",null,[_("td",null,[at(_("input",{type:"checkbox","onUpdate:modelValue":u=>n.userStore.lodgingTaken[l.key]=u},null,8,dRt),[[Ge,n.userStore.lodgingTaken[l.key]]])]),_("td",null,[_("a",{href:"https://bdocodex.com/us/npc/"+l.key},M(n.gameStore.uloc.char[l.key]),9,pRt)]),_("td",null,M(l.lodgingSpaces),1),_("td",null,M(l.CP),1)]))),256))],64))),256))])])}const vRt=le(oRt,[["render",gRt]]);const mRt={setup(){const e=At(),t=ee(),r=ii();return t.$subscribe((n,i)=>{const o=Date.now();localStorage.setItem("user",JSON.stringify(i)),console.log("userStore subscription took",Date.now()-o,"ms")}),{gameStore:e,userStore:t,marketStore:r}},components:{ModalDialog:QC,FloatingResourceEdit:Sx},data:()=>({floatingDialogWspd:150,floatingDialogRgroup:1,floatingDialogWkld:400,floatingDialogVisible:!1,importDialogVisible:!1}),watch:{"userStore.useFloatingResources":{handler(e,t){},deep:!0}},methods:{formatFixed:dt,fileParse(e){let t=e.target.result,r=JSON.parse(t);"regionModifiers"in r&&(r.regionResources=r.regionModifiers,delete r.regionModifiers),"regionModifiers2"in r&&(r.regionResources2=r.regionModifiers2,delete r.regionModifiers2),this.userStore.$patch(r),this.setAllFloating(!0),this.importDialogVisible=!1},fileImport(e){if(!e)return;const t=e.target[0].files;if(t.length<1)return;const r=t[0];console.log("fileImport",r);let n=new FileReader;n.onload=this.fileParse,n.readAsText(r)},showDialog(e){this.floatingDialogVisible=!0,this.floatingDialogRgroup=Number(e);for(let t of this.gameStore.regionGroups[e]){this.floatingDialogWkld=this.gameStore.plantzones[t].peg.time;break}},fileExport(){var e=document.createElement("a");const t={regionModifiers:this.userStore.regionResources,regionModifiers2:this.userStore.regionResources2},r=JSON.stringify(t);var n=new Blob([r],{type:"text/plain"});e.href=URL.createObjectURL(n),e.download="resources.json",e.click()},clear(){this.userStore.regionResources={},this.userStore.regionResources2={}},setAllFloating(e){const t={};for(const r of Object.keys(this.gameStore.regionGroups))t[r]=e;this.userStore.useFloatingResources=t}}},oo=e=>(er("data-v-6af04c00"),e=e(),rr(),e),yRt=oo(()=>_("button",null,"import",-1)),_Rt=oo(()=>_("br",null,null,-1)),bRt=$(" Test on node: "),wRt=["value"],SRt=oo(()=>_("br",null,null,-1)),TRt=$(" With workspeed: "),kRt={id:"toptext"},PRt=oo(()=>_("p",null,"These values are shown ingame as green bars at world map > resource view.",-1)),ERt=oo(()=>_("p",null,"However, some green bars are hidden/misplaced, for those you can check the current workload in worker assignment panel ingame.",-1)),CRt=oo(()=>_("p",null,"Low (exhausted) resource means workloads of relevant nodes are increased (up to 2x of base) so each job takes longer to complete.",-1)),ARt=oo(()=>_("p",null,"If unspecified here, 0% resource will be used (= max workload = longest cycle = min cycles per day = min profit)",-1)),xRt=oo(()=>_("summary",null,"Advanced",-1)),MRt=$("allow floating resources "),IRt={key:0},LRt={class:"stickyhead"},ORt=oo(()=>_("thead",null,[_("tr",null,[_("th",null,"RG"),_("th",null,"Resource %"),_("th",null,"Contains nodes with workload (base \u2192 current)")])],-1)),RRt={class:"tac"},DRt={class:"tac"},NRt={key:0,class:"switch mauto"},FRt=["onUpdate:modelValue"],$Rt=oo(()=>_("span",{class:"slider"},null,-1)),BRt=$(" floating"),zRt=oo(()=>_("br",null,null,-1)),VRt=["onClick"],URt=$(" constant"),WRt=oo(()=>_("br",null,null,-1)),jRt=["onUpdate:modelValue"];function GRt(e,t,r,n,i,o){const a=Gt("ModalDialog"),s=Gt("FloatingResourceEdit"),l=Gt("RouterLink");return I(),O(W,null,[ht(a,{show:e.importDialogVisible,"onUpdate:show":t[2]||(t[2]=u=>e.importDialogVisible=u)},{default:Fe(()=>[_("form",{onSubmit:t[1]||(t[1]=zh(u=>o.fileImport(u),["prevent"]))},[_("input",{type:"file",accept:".json",onClick:t[0]||(t[0]=u=>o.fileImport())}),yRt],32)]),_:1},8,["show"]),ht(a,{show:e.floatingDialogVisible,"onUpdate:show":t[6]||(t[6]=u=>e.floatingDialogVisible=u)},{default:Fe(()=>[ht(s,{rgk:e.floatingDialogRgroup,wspd:e.floatingDialogWspd,workload:e.floatingDialogWkld,show:e.floatingDialogVisible,"onUpdate:show":t[3]||(t[3]=u=>e.floatingDialogVisible=u)},null,8,["rgk","wspd","workload","show"]),_Rt,bRt,at(_("select",{"onUpdate:modelValue":t[4]||(t[4]=u=>e.floatingDialogWkld=u)},[(I(!0),O(W,null,Pt(n.gameStore.regionGroups[e.floatingDialogRgroup],u=>(I(),O("option",{value:n.gameStore.plantzones[u]&&n.gameStore.plantzones[u].peg.time},M(n.gameStore.plantzoneName(u))+" ("+M(n.gameStore.plantzones[u]&&n.gameStore.plantzones[u].peg.time)+" base) ",9,wRt))),256))],512),[[cr,e.floatingDialogWkld]]),SRt,TRt,at(_("input",{type:"range",class:"vmid","onUpdate:modelValue":t[5]||(t[5]=u=>e.floatingDialogWspd=u),min:"40",max:"200",step:"0.01"},null,512),[[zt,e.floatingDialogWspd,void 0,{number:!0}]]),$(" "+M(e.floatingDialogWspd),1)]),_:1},8,["show"]),_("div",kRt,[PRt,ERt,CRt,ARt,_("details",null,[xRt,_("button",{onClick:t[7]||(t[7]=u=>e.importDialogVisible=!0)},"import"),_("button",{onClick:t[8]||(t[8]=u=>o.fileExport())},"export"),_("button",{onClick:t[9]||(t[9]=u=>o.clear())},"clear"),_("label",null,[at(_("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=u=>n.userStore.allowFloating=u)},null,512),[[Ge,n.userStore.allowFloating]]),MRt]),n.userStore.allowFloating?(I(),O("span",IRt,[_("button",{onClick:t[11]||(t[11]=u=>o.setAllFloating(!0))},"all floating"),_("button",{onClick:t[12]||(t[12]=u=>o.setAllFloating(!1))},"all constant")])):nt("",!0)])]),_("table",LRt,[ORt,_("tbody",null,[(I(!0),O(W,null,Pt(n.gameStore.regionGroups,(u,c)=>(I(),O("tr",null,[_("td",RRt,M(c),1),_("td",DRt,[n.userStore.allowFloating?(I(),O("label",NRt,[at(_("input",{type:"checkbox","onUpdate:modelValue":f=>n.userStore.useFloatingResources[c]=f},null,8,FRt),[[Ge,n.userStore.useFloatingResources[c]]]),$Rt])):nt("",!0),n.userStore.allowFloating&&n.userStore.useFloatingResources[c]?(I(),O(W,{key:1},[BRt,zRt,$(" ~"+M(o.formatFixed(n.userStore.medianResources[c],2))+" ",1),_("button",{onClick:f=>o.showDialog(c)},"edit",8,VRt)],64)):(I(),O(W,{key:2},[URt,WRt,at(_("input",{type:"number","onUpdate:modelValue":f=>n.userStore.regionResources[c]=f,min:"0",max:"100",step:"0.01",class:"w42em"},null,8,jRt),[[zt,n.userStore.regionResources[c],void 0,{number:!0}]])],64))]),_("td",null,[(I(!0),O(W,null,Pt(u,f=>(I(),O("div",null,[ht(l,{tag:"a",to:{path:"./",hash:"#node"+f}},{default:Fe(()=>[$(M(n.gameStore.plantzoneName(f)),1)]),_:2},1032,["to"]),$(" "+M(n.gameStore.ready&&n.gameStore.plantzones[f].peg.time)+" ",1),n.userStore.allowFloating&&n.userStore.useFloatingResources[c]?(I(),O(W,{key:0},[$(" \u2933 "+M(o.formatFixed(n.userStore.medianWorkloads[f],2)),1)],64)):(I(),O(W,{key:1},[$(" \u2192 "+M(n.gameStore.ready?o.formatFixed(n.gameStore.plantzones[f].activeWorkload,2):""),1)],64))]))),256))])]))),256))])])],64)}const HRt=le(mRt,[["render",GRt],["__scopeId","data-v-6af04c00"]]);const XRt={setup(){const e=ee();return{gameStore:At(),userStore:e}},props:{show:{type:Boolean,default:!1}},created(){this.fetchData()},data:()=>({houses:{},towns:[-1],usages:[-1],levels:[-1],filterTown:-1,filterUsage:-1,filterLevel:-1,selectedHouse:-1}),computed:{filteredTowns(){const e=new Set([-1]);for(const[t,r]of Object.entries(this.houses))(this.filterUsage==-1||this.filterUsage in r.CraftList)&&(this.filterLevel==-1||this.filterLevel<=r.CraftList[this.filterUsage])&&r.affTown!=694&&e.add(r.affTown);return[...e].sort((t,r)=>t-r)},filteredUsages(){const e=new Set([-1]);for(const[t,r]of Object.entries(this.houses))if(this.filterTown==-1||r.affTown==this.filterTown)for(const[n,i]of Object.entries(r.CraftList))n>10&&e.add(n);return[...e].sort((t,r)=>t-r)},filteredLevels(){const e=new Set([-1]);if(this.filterUsage!=-1)for(const[t,r]of Object.entries(this.houses))(this.filterTown==-1||r.affTown==this.filterTown)&&this.filterUsage in r.CraftList&&e.add(r.CraftList[this.filterUsage]);return[...e].sort((t,r)=>t-r)},filteredHouses(){const e=[];for(const[t,r]of Object.entries(this.houses))(this.filterTown==-1||r.affTown==this.filterTown)&&(this.filterUsage==-1||this.filterUsage in r.CraftList)&&(this.filterLevel==-1||this.filterLevel<=r.CraftList[this.filterUsage])&&e.push(Number(t));return e}},methods:{formatFixed:dt,async fetchData(){this.houses=await(await fetch("data/houseinfo.json")).json();const e=new Set([-1]),t=new Set([-1]);for(const[r,n]of Object.entries(this.houses)){e.add(n.affTown);for(const[o,a]of Object.entries(n.CraftList))o>10&&t.add(o);this.houses[r].CPfull=this.houses[r].CP;let i=n.needHouseKey;for(;i;)this.houses[r].CPfull+=this.houses[i].CP,i=this.houses[i].needHouseKey}this.towns=e,this.usages=[...t].sort((r,n)=>r-n)},addWorkshop(e){this.userStore.userWorkshops[e]={...this.userStore.defaultUserWorkshop}},deleteWorkshop(e){delete this.userStore.userWorkshops[e]},deleteAll(){this.userStore.userWorkshops={}}}},nu=e=>(er("data-v-22a29fb5"),e=e(),rr(),e),YRt=nu(()=>_("h3",null,"\u{1F3ED}Workshops config",-1)),KRt={class:"sa"},ZRt=nu(()=>_("tr",null,[_("th",null,"House"),_("th",null,[$(" label "),_("abbr",{class:"tooltip",title:"for display only"},"\u2139")]),_("th",null,[$(" worktype "),_("abbr",{class:"tooltip",title:`used to factor in some worker skills.
also, only Mass Production can employ multiple workers at once.`},"\u2139")]),_("th",null," workload "),_("th",null,[$(" $/cycle "),_("abbr",{title:`use Sho's Workshop Profitability Calculator & gpw Trading/Crates Calculator to find out.
For crates, enter profit per 1 crate - if a worker with +1/+3 packing skill occupies this workshop it will be taken into account.`,class:"tooltip"},"\u2139")]),_("th",null,[$(" CP "),_("abbr",{title:`Full cost of operating the workshop, including:
1) the workshop itself;
2) house chain to connect the workshop (*after* autoassigned houses shown in Home > town config > Found cost spoiler);
3) storage for input/output mats, if not provided by (2).
The only thing to not include here is lodging for the worker who is going to occupy the workshop.
However, if your workshop house chain does provide lodging, reduce (2) accordingly. 
The house chain can potentially provide storage and lodging not only for this workshop, but for other workshops of this town. 
In this case, use average CP value (sum up all workshop-related CP costs and divide by active workshop count).`,class:"tooltip"},"\u2139")]),_("th",null,"action")],-1)),qRt=["onUpdate:modelValue"],JRt=["onUpdate:modelValue"],QRt=Xv('<option value="unk" data-v-22a29fb5>unknown</option><option value="jewelry" data-v-22a29fb5>jewelry</option><option value="mass" data-v-22a29fb5>mass</option><option value="weap" data-v-22a29fb5>weapon</option><option value="tool" data-v-22a29fb5>tool</option><option value="furn" data-v-22a29fb5>furniture</option><option value="costume" data-v-22a29fb5>costume</option><option value="refine" data-v-22a29fb5>refine</option><option value="siege" data-v-22a29fb5>siege</option><option value="mount" data-v-22a29fb5>mount</option><option value="exclus" data-v-22a29fb5>exclusive</option><option value="pack_produce" data-v-22a29fb5>pack_produce</option><option value="pack_herb" data-v-22a29fb5>pack_herb</option><option value="pack_mushr" data-v-22a29fb5>pack_mushr</option><option value="pack_fish" data-v-22a29fb5>pack_fish</option><option value="pack_timber" data-v-22a29fb5>pack_timber</option><option value="pack_ore" data-v-22a29fb5>pack_ore</option>',17),tDt=[QRt],eDt=["onUpdate:modelValue"],rDt=["onUpdate:modelValue"],nDt=["onUpdate:modelValue"],iDt=["onClick"],oDt={style:{float:"right"}},aDt=$(" new entry:"),sDt=nu(()=>_("br",null,null,-1)),lDt={class:"borderless"},uDt=nu(()=>_("td",null,"town",-1)),cDt=["value"],fDt=nu(()=>_("td",null,"usage",-1)),hDt=["value"],dDt=nu(()=>_("td",null,"level",-1)),pDt=["value"],gDt=nu(()=>_("td",null,"house",-1)),vDt=["value"],mDt={key:0,class:"fsxs"},yDt=["disabled"],_Dt=nu(()=>_("abbr",{class:"tooltip",title:`Note that assigning house as workshop does not prevent it from being used for autolodging/autostorage on Home page.
You need to manually work around this.`},"\u2139",-1));function bDt(e,t,r,n,i,o){return I(),O(W,null,[YRt,_("table",KRt,[ZRt,(I(!0),O(W,null,Pt(n.userStore.userWorkshops,(a,s)=>(I(),O("tr",null,[_("td",null,M(n.gameStore.uloc.char[s]),1),_("td",null,[at(_("input",{class:"w5em","onUpdate:modelValue":l=>a.label=l},null,8,qRt),[[zt,a.label,void 0,{number:!0}]])]),_("td",null,[at(_("select",{"onUpdate:modelValue":l=>a.industry=l},tDt,8,JRt),[[cr,a.industry]])]),_("td",null,[at(_("input",{type:"number",class:"w5em","onUpdate:modelValue":l=>a.manualWorkload=l},null,8,eDt),[[zt,a.manualWorkload,void 0,{number:!0}]])]),_("td",null,[at(_("input",{type:"number",class:"w7em","onUpdate:modelValue":l=>a.manualCycleIncome=l},null,8,rDt),[[zt,a.manualCycleIncome,void 0,{number:!0}]])]),_("td",null,[at(_("input",{type:"number",class:"w5em","onUpdate:modelValue":l=>a.manualCp=l},null,8,nDt),[[zt,a.manualCp,void 0,{number:!0}]])]),_("td",null,[_("button",{onClick:l=>o.deleteWorkshop(s)},"delete",8,iDt)])]))),256))]),_("div",oDt,[_("button",{onClick:t[0]||(t[0]=a=>o.deleteAll()),title:"except occupied"},"delete all")]),aDt,sDt,_("table",lDt,[_("tr",null,[uDt,_("td",null,[at(_("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>e.filterTown=a)},[(I(!0),O(W,null,Pt(o.filteredTowns,a=>(I(),O("option",{value:a},M(a>=0?n.gameStore.uloc.town[a]:"any"),9,cDt))),256))],512),[[cr,e.filterTown]])])]),_("tr",null,[fDt,_("td",null,[at(_("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>e.filterUsage=a)},[(I(!0),O(W,null,Pt(o.filteredUsages,a=>(I(),O("option",{value:a},M(a>=0?n.gameStore.uloc.housetype[a]+" "+a:"any"),9,hDt))),256))],512),[[cr,e.filterUsage]])])]),_("tr",null,[dDt,_("td",null,[at(_("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>e.filterLevel=a)},[(I(!0),O(W,null,Pt(o.filteredLevels,a=>(I(),O("option",{value:a},M(a>=0?a+"+":"any"),9,pDt))),256))],512),[[cr,e.filterLevel]])])]),_("tr",null,[gDt,_("td",null,[at(_("select",{"onUpdate:modelValue":t[4]||(t[4]=a=>e.selectedHouse=a)},[(I(!0),O(W,null,Pt(o.filteredHouses,a=>(I(),O("option",{value:a},M(a)+" "+M(n.gameStore.uloc.char[a])+" "+M(a in n.userStore.userWorkshops?"\u2714\uFE0F":""),9,vDt))),256))],512),[[cr,e.selectedHouse]]),e.selectedHouse in n.userStore.userWorkshops?(I(),O("span",mDt," already in list! ")):nt("",!0)])])]),_("button",{disabled:e.selectedHouse==-1||e.selectedHouse in n.userStore.userWorkshops,onClick:t[5]||(t[5]=a=>o.addWorkshop(e.selectedHouse))}," add to my workshops ",8,yDt),$(" "+M()+" ",1),_Dt],64)}const wDt=le(XRt,[["render",bDt],["__scopeId","data-v-22a29fb5"]]);const SDt={setup(){const e=ee(),t=mr(),r=At(),n=ii();return{gameStore:r,userStore:e,routingStore:t,marketStore:n}},props:{show:{type:Boolean,default:!1}},components:{ItemIcon:no},created(){},data:()=>({cpCost:.4,pcHours:16,repeatGroupMeanings:{0:"wspd",1:"wspd_jewelry",2:"wspd_mass",3:"wspd_weap",4:"wspd_tool",5:"wspd_furn",7:"wspd_costume",8:"wspd_refine",9:"wspd_siege",10:"wspd_mount",11:"wspd_farm",13:"wspd_exclus"}}),computed:{repeatGroupIds(){const e={};for(const[t,r]of Object.entries(this.repeatGroupMeanings))e[r]=Number(t);return e},perTownPerRecipePerThrifty(){const e={};for(const t of this.routingStore.wsJobs){const r=t.worker.tnk,n=t.worker.job.recipe,i=t.thriftyPercent;if(!(n in this.gameStore.craftInputs)){console.log("rcp",n,"not supported");continue}if(r in e||(e[r]={}),n in e[r]||(e[r][n]={}),!(i in e[r][n])){const f=this.gameStore.craftInfo[n].rp;e[r][n][i]={repeatGroup:f,workers:0,cyclesPerDay:0,completionsPerDay:0,workload:this.gameStore.craftInfo[n].wl}}e[r][n][i].workers+=1;const o=this.gameStore.craftInfo[n].rp,a=t.worker.job.hk,s=this.userStore.userWorkshops[a],l=this.gameStore.measureWorkshopWorker(a,s,t.worker).cyclesDaily;e[r][n][i].cyclesPerDay+=l;const u=this.gameStore.repeatsWorkshopWorker(t.worker,o),c=l*this.gameStore.craftInfo[n].aoc*u;e[r][n][i].completionsPerDay+=c}return e},usedInputItems(){const e=new Set([9492]);if(!this.gameStore.ready)return e;for(const t of Object.values(this.perTownPerRecipePerThrifty))for(const r of Object.keys(t)){const n=this.gameStore.craftInputs[r];for(const i of Object.keys(n))e.add(i)}return e},tradingLevelString(){const e=this.userStore.tradingLevel;return 90<e?`G${e-90}`:60<e?`M${e-60}`:`${e}`},townStat(){const e={},t=new Set;for(const[r,n]of Object.entries(this.perTownPerRecipePerThrifty)){t.add(r),e[r]={workers:0,completionsPerDay:0,completionsPerDayDoubleEnded:0,reverseConnection:!1};const i=this.userStore.tradeDestinations[r];t.has(i)&&this.userStore.tradeDestinations[i]==r&&(e[r].reverseConnection=!0);for(const o of Object.values(n))for(const a of Object.values(o))e[r].workers+=a.workers,e[r].completionsPerDay+=a.completionsPerDay;e[r].reverseConnection?(e[i].completionsPerDayDoubleEnded+=e[r].completionsPerDay,e[r].completionsPerDayDoubleEnded=e[i].completionsPerDayDoubleEnded):e[r].completionsPerDayDoubleEnded+=e[r].completionsPerDay}return e},rows(){const e={towns:{},transport:{},total:{silver:0,CP:0,transportUtilization:0}};if(!this.gameStore.ready)return e;for(const[t,r]of Object.entries(this.perTownPerRecipePerThrifty)){e.towns[t]=[];const n=this.userStore.tradeDestinations[t],i=this.townStat[t].reverseConnection?n:t,o=this.transportHours(t,n),a=Math.ceil(this.pcHours/o),s=Math.ceil(this.pcHours/o),l=5*s*3e4;t in this.userStore.tradeRouteCp||(this.userStore.tradeRouteCp[t]=0);const u=this.userStore.tradeRouteCp[i];t in this.userStore.tradeInfraCp||(this.userStore.tradeInfraCp[t]=0);const c=`${this.gameStore.uloc.node[t]} \u2192 ${this.gameStore.uloc.node[n]}`;if(!(c in e.transport)){const f=5*a;e.transport[c]={duration:fI(o),wagonRuns:a,haveWagons:f,needWagons:0,utilization:0}}for(const[f,h]of Object.entries(r))for(const[d,p]of Object.entries(h)){const g=this.recipeCost(f,Number(d)),m=p.completionsPerDay/p.cyclesPerDay,v=this.marketStore.prices[9492],y=v/3/m;g.val+=y,g.desc+=`${v} / 3 / ${dt(m,2)} = ${dt(y)}
`;const b=this.gameStore.craftInfo[f].aoc;b!=1&&(g.val/=b,g.desc+=`----------------------
`,g.desc+=`divided by ${b}
`);const w=this.tradeInfo(f,t,n);w.delta=w.sellPrice-g.val-w.transportFee,w.deltaDesc=`${dt(w.sellPrice)} - ${dt(g.val)} - ${dt(w.transportFee)}`,w.roi=w.delta/(g.val+w.transportFee),w.dailyProfit=w.delta*p.completionsPerDay/1e6,w.routeCp=this.userStore.tradeRouteAlwaysOn[i]?u*p.completionsPerDay/this.townStat[t].completionsPerDayDoubleEnded:u*p.completionsPerDay*w.crateWeight/l;const T=this.userStore.tradeRouteAlwaysOn[t]?`${u}CP * ${dt(p.completionsPerDay)} / ${dt(this.townStat[t].completionsPerDayDoubleEnded)} crates`:`${u}CP * ${dt(p.completionsPerDay*w.crateWeight/l*100,3)}% utilization`;w.cp=this.userStore.tradeInfraCp[t]/this.townStat[t].workers*p.workers+w.routeCp,w.cpDesc=`${this.userStore.tradeInfraCp[t]}CP / ${this.townStat[t].workers} x ${p.workers} workers + ${T}`,w.eff=w.dailyProfit/w.cp;const S=e.towns[t][e.towns[t].length-1],k=S&&f==S.rcp;e.towns[t].push({rcp:f,collapsed:k,rowspan:1,thriftyPercent:d,makeCost:g,perf:p,tradeInfo:w}),e.transport[c].needWagons+=p.completionsPerDay*w.crateWeight/3e4,e.total.silver+=p.completionsPerDay*w.delta,e.total.CP+=w.cp}}for(const t of Object.values(e.transport))t.utilization=t.needWagons/t.haveWagons,e.total.transportUtilization+=t.utilization;return e.total.eff=e.total.silver/1e6/e.total.CP,e},table(){const e=this.rows;let t;for(const[r,n]of Object.entries(e.towns))for(const i of n)i.collapsed?t.rowspan++:t=i;return this.rows}},methods:{formatFixed:dt,hoursToHMS:fI,recipeCost(e,t){if(!(e in this.gameStore.craftInputs)){const n=`recipe ${e} can't be priced`;return console.log(n),{val:NaN,desc:n}}const r=this.gameStore.craftInputs[e];if(t>0){const n={},i=Object.entries(r).length;for(const o of Object.keys(r))if(r[o]>=10){const a=Math.floor(r[o]/10),s=a*(1-t/i/100);n[o]=r[o]-a+s}else n[o]=r[o];return this.marketStore.priceBunch(n)}return this.marketStore.priceBunch(r)},distanceToTrader(e,t){if(!this.gameStore.ready)return NaN;if(!e)return NaN;if(!t)return NaN;const r=this.gameStore.nodes[e].pos,n=this.gameStore.traders[t],i=r.x-n[0],o=0,a=r.z-n[1];return Math.sqrt(i*i+o*o+a*a)},distancePriceBonus(e,t){const n=this.distanceToTrader(e,t)*68/1e8;return n>1.5?1.5:n},distance(e,t){if(!this.gameStore.ready)return NaN;if(!e)return NaN;if(!t)return NaN;const r=this.gameStore.nodes[e].pos,n=this.gameStore.nodes[t].pos,i=r.x-n.x,o=0,a=r.z-n.z;return Math.sqrt(i*i+o*o+a*a)},transportCostPerLt(e,t,r){const i=this.distance(e,t)*1.8/3e4;return r?i*4:i},transportHours(e,t){return this.distance(e,t)*2.6/1e6},tradeInfo(e,t,r){if(!this.gameStore.ready)return NaN;if(!(e in this.gameStore.craftOutputs))return NaN;const n=this.gameStore.craftOutputs[e][0];if(!(n in this.gameStore.itemInfo))return NaN;const i=this.gameStore.itemInfo[n].vendorPrice,o=this.distancePriceBonus(t,r),a=i*(1+o)*(1+this.userStore.bargainBonus),s=`${i} x ${1+o} x ${1+this.userStore.bargainBonus}`,l=this.gameStore.itemInfo[n].weight,u=this.transportCostPerLt(t,r),c=l*u;return{destination:r,distanceBonus:o,crateWeight:l,costPerLt:u,sellPrice:a,sellPriceDesc:s,transportFee:c}},routeSortedDestinations(e,t){const r=[];for(const n of Object.keys(this.gameStore.traders))r.push(this.tradeInfo(e,t,n));return r.sort((n,i)=>i.sellPrice-i.transportFee-(n.sellPrice-n.transportFee)),r},townSortedDestinations(e){const t=[];for(const n of Object.keys(this.gameStore.traders))t.push(this.tradeInfo(9212,e,n));return t.sort((n,i)=>i.sellPrice-i.transportFee-(n.sellPrice-n.transportFee)),t},copyToWorkshops(){for(const e of this.routingStore.wsJobs){const t=e.worker.tnk,r=e.worker.job.recipe,n=e.thriftyPercent,i=e.worker.job.hk,o=this.userStore.userWorkshops[i];if(t in this.table.towns)for(const a of this.table.towns[t])r==a.rcp&&n==a.thriftyPercent&&(o.industry=a.perf.repeatGroup,o.manualWorkload=a.perf.workload,o.manualCp=a.tradeInfo.cp/a.perf.workers,o.manualCycleIncome=Math.round(a.tradeInfo.delta))}}}},ao=e=>(er("data-v-0530754f"),e=e(),rr(),e),TDt=ao(()=>_("div",{class:"container"},null,-1)),kDt={class:"container"},PDt={class:"left"},EDt=ao(()=>_("h3",{style:{display:"inline"}},"Active recipes",-1)),CDt=ao(()=>_("thead",null,[_("tr",null,[_("th",null,"out"),_("th",null,"sell $"),_("th",null,[_("abbr",{class:"tooltip",title:"workers"}," w ")]),_("th",null,[_("abbr",{class:"tooltip",title:"crates/day"}," c/d ")]),_("th",null,[_("abbr",{class:"tooltip",title:"thrifty %"}," \u{1F9EA} ")]),_("th",null,"make $"),_("th",null,"wagon $"),_("th",null,"profit $"),_("th",null,[$(" ROI "),_("abbr",{class:"tooltip",title:"make $ / profit $"},"\u2139")]),_("th",null,"M$/day"),_("th",null,[$(" CP "),_("abbr",{class:"tooltip",title:"infra + connection"},"\u2139")]),_("th",null,"M$/day/CP")])],-1)),ADt={colspan:"2",class:"tac"},xDt={colspan:"4",class:"tac"},MDt=ao(()=>_("abbr",{class:"tooltip",title:`total town infrastructure 
(workshops, storage, house connections)
ON TOP of the houses autoassigned 
on Home page (lodging is autoassigned)`},"infra",-1)),IDt=["onUpdate:modelValue"],LDt=$(" CP "),ODt={colspan:"6"},RDt=["onUpdate:modelValue"],DDt=["value"],NDt=$(" cost "),FDt=["onUpdate:modelValue"],$Dt=$(" CP "),BDt=ao(()=>_("span",{class:"spacer"},null,-1)),zDt=["onUpdate:modelValue"],VDt=$(" always on "),UDt=$("(reusing)"),WDt=["rowspan"],jDt=["rowspan"],GDt=["title"],HDt={class:"tac"},XDt={class:"tac"},YDt={class:"tac"},KDt={class:"tar"},ZDt=["title"],qDt={class:"tar"},JDt={class:"tar"},QDt=["title"],t8t={class:"tar"},e8t={class:"tar"},r8t={class:"tar"},n8t=["title"],i8t={class:"tar"},o8t={class:"slider-container"},a8t=$(" Trading\xA0 "),s8t={style:{float:"right"}},l8t=ao(()=>_("br",null,null,-1)),u8t=ao(()=>_("summary",null,"Wagons",-1)),c8t=$(" Order issuing hours: "),f8t=ao(()=>_("br",null,null,-1)),h8t=ao(()=>_("thead",null,[_("tr",null,[_("th",null,"route"),_("th",null,"duration"),_("th",null,"needed"),_("th",null,"capacity"),_("th",null,"utilization")])],-1)),d8t={class:"tar"},p8t={class:"tar"},g8t={class:"tar"},v8t=ao(()=>_("td",{class:"tar",colspan:"4"},null,-1)),m8t={class:"tar"},y8t={class:"right"},_8t=ao(()=>_("h3",null,"Input prices",-1)),b8t=ao(()=>_("thead",null,[_("tr",null,[_("th",null,"item"),_("th",null,"custom"),_("th",null,"buy"),_("th",null,"eff")])],-1)),w8t=["onUpdate:modelValue"],S8t=["disabled","onUpdate:modelValue"];function T8t(e,t,r,n,i,o){const a=Gt("ItemIcon");return I(),O(W,null,[TDt,_("div",kDt,[_("div",PDt,[EDt,_("table",null,[CDt,_("tbody",null,[(I(!0),O(W,null,Pt(o.table.towns,(s,l)=>(I(),O(W,null,[_("tr",null,[_("td",ADt,M(n.gameStore.uloc.node[l]),1),_("td",xDt,[MDt,$(M()+" ",1),at(_("input",{type:"number",class:"w33em","onUpdate:modelValue":u=>n.userStore.tradeInfraCp[l]=u},null,8,IDt),[[zt,n.userStore.tradeInfraCp[l],void 0,{number:!0}]]),LDt]),_("td",ODt,[at(_("select",{"onUpdate:modelValue":u=>n.userStore.tradeDestinations[l]=u},[(I(!0),O(W,null,Pt(o.townSortedDestinations(l),u=>(I(),O("option",{key:u.destination,value:u.destination},M(n.gameStore.uloc.node[u.destination])+" "+M(o.formatFixed(u.distanceBonus*100,2))+"% "+M(o.formatFixed(30*u.costPerLt))+"$ ",9,DDt))),128))],8,RDt),[[cr,n.userStore.tradeDestinations[l]]]),o.townStat[l].reverseConnection==!1?(I(),O(W,{key:0},[NDt,at(_("input",{"onUpdate:modelValue":u=>n.userStore.tradeRouteCp[l]=u,type:"number",class:"w3em"},null,8,FDt),[[zt,n.userStore.tradeRouteCp[l],void 0,{number:!0}]]),$Dt,BDt,at(_("input",{type:"checkbox","onUpdate:modelValue":u=>n.userStore.tradeRouteAlwaysOn[l]=u},null,8,zDt),[[Ge,n.userStore.tradeRouteAlwaysOn[l]]]),VDt],64)):(I(),O(W,{key:1},[UDt],64))])]),(I(!0),O(W,null,Pt(s,u=>(I(),O("tr",{key:u.tnk+"/"+u.rcp},[u.collapsed?nt("",!0):(I(),O("td",{key:0,rowspan:u.rowspan},[u.rcp&&n.gameStore.craftOutputs[u.rcp]?(I(!0),O(W,{key:0},Pt(n.gameStore.craftOutputs[u.rcp],c=>(I(),O(W,null,[n.gameStore.craftInfo[u.rcp].aoc!=1?(I(),O(W,{key:0},[$(M(n.gameStore.craftInfo[u.rcp].aoc),1)],64)):nt("",!0),ht(a,{ik:c},null,8,["ik"])],64))),256)):(I(),O(W,{key:1},[$(M(e.rcp),1)],64))],8,WDt)),u.collapsed?nt("",!0):(I(),O("td",{key:1,class:"tar",rowspan:u.rowspan},[_("abbr",{class:"tooltip",title:u.tradeInfo.sellPriceDesc},M(o.formatFixed(u.tradeInfo.sellPrice)),9,GDt)],8,jDt)),_("td",HDt,M(u.perf.workers),1),_("td",XDt,M(o.formatFixed(u.perf.completionsPerDay)),1),_("td",YDt,M(u.thriftyPercent),1),_("td",KDt,[_("abbr",{class:"tooltip",title:u.makeCost.desc},M(o.formatFixed(u.makeCost.val)),9,ZDt)]),_("td",qDt,M(o.formatFixed(u.tradeInfo.transportFee)),1),_("td",JDt,[_("abbr",{class:"tooltip",title:u.tradeInfo.deltaDesc},M(o.formatFixed(u.tradeInfo.delta)),9,QDt)]),_("td",t8t,M(o.formatFixed(u.tradeInfo.roi*100))+"% ",1),_("td",e8t,M(o.formatFixed(u.tradeInfo.dailyProfit,2)),1),_("td",r8t,[_("abbr",{class:"tooltip",title:u.tradeInfo.cpDesc},M(o.formatFixed(u.tradeInfo.cp,2)),9,n8t)]),_("td",i8t,M(o.formatFixed(u.tradeInfo.eff,3)),1)]))),128))],64))),256))])]),_("div",o8t,[a8t,at(_("input",{type:"range","onUpdate:modelValue":t[0]||(t[0]=s=>n.userStore.tradingLevel=s),min:"1",max:"140",step:"1"},null,512),[[zt,n.userStore.tradingLevel,void 0,{number:!0}]]),$(" \xA0"+M(o.tradingLevelString)+" \u2192 "+M(o.formatFixed(n.userStore.bargainBonus*100,1))+"% bargain ",1)]),_("div",s8t,[_("button",{onClick:t[1]||(t[1]=s=>o.copyToWorkshops()),title:"industry, M$/day, CP"},"copy to workshops")]),l8t,$(" Total: "+M(o.formatFixed(o.table.total.silver/1e6,1))+" M$/day, "+M(o.formatFixed(o.table.total.CP,2))+" CP, "+M(o.formatFixed(o.table.total.eff,3))+" M$/day/CP ",1),_("details",null,[u8t,c8t,at(_("input",{type:"number",class:"w3em","onUpdate:modelValue":t[2]||(t[2]=s=>e.pcHours=s)},null,512),[[zt,e.pcHours,void 0,{number:!0}]]),f8t,_("table",null,[h8t,_("tbody",null,[(I(!0),O(W,null,Pt(o.table.transport,(s,l)=>(I(),O("tr",null,[_("td",null,M(l),1),_("td",null,M(s.duration),1),_("td",d8t,M(o.formatFixed(s.needWagons,2)),1),_("td",p8t,M(s.haveWagons),1),_("td",g8t,M(o.formatFixed(s.utilization*100,2))+"% ",1)]))),256)),_("tr",null,[v8t,_("td",m8t,M(o.formatFixed(o.table.total.transportUtilization*100,2))+"% ",1)])])])])]),_("div",y8t,[_8t,_("table",null,[b8t,_("tbody",null,[(I(!0),O(W,null,Pt(o.usedInputItems,s=>(I(),O("tr",null,[_("td",null,[ht(a,{ik:Number(s)},null,8,["ik"])]),_("td",null,[at(_("input",{type:"number",class:"w5em tar","onUpdate:modelValue":l=>n.userStore.customPrices[s]=l},null,8,w8t),[[zt,n.userStore.customPrices[s],void 0,{number:!0}]])]),_("td",null,[at(_("input",{type:"checkbox",disabled:s in n.gameStore.vendorPrices,"onUpdate:modelValue":l=>n.userStore.keepItems[s]=l},null,8,S8t),[[Ge,n.userStore.keepItems[s]]])]),_("td",null,M(o.formatFixed(n.marketStore.prices[s])),1)]))),256))])])])])],64)}const k8t=le(SDt,[["render",T8t],["__scopeId","data-v-0530754f"]]);const P8t={setup(){const e=At(),t=ee(),r=ii();return t.$subscribe((n,i)=>{const o=Date.now();localStorage.setItem("user",JSON.stringify(i)),console.log("userStore subscription took",Date.now()-o,"ms")}),{gameStore:e,userStore:t,marketStore:r}},components:{ItemIcon:no,ModalDialog:QC,WorkerEdit:aj,WorkshopsConfig:wDt,TradingConfig:k8t},data:()=>({workerDialogVisible:!1,workshopsConfigVisible:!1,tradingConfigVisible:!1,highlightPending:!1,importDialogVisible:!1}),watch:{"userStore.marketUrl":{handler(e,t){this.marketStore.fetchData()}}},methods:{formatFixed:dt,reload(){this.marketStore.ready=!1,this.marketStore.fetchData()},highlightHash(){if(!!this.highlightPending&&(console.log("highlighting",this.$route.hash,this.highlightPending),this.$route.hash)){const e=document.querySelector(this.$route.hash);e&&(this.highlightPending=!1,e.scrollIntoView(),e.classList.add("anim"))}},fileParse(e){let t=e.target.result,r=JSON.parse(t);"effectivePrices"in r&&delete r.effectivePrices,this.userStore.$patch(r),this.importDialogVisible=!1},fileImport(e){if(!e)return;const t=e.target[0].files;if(t.length<1)return;const r=t[0];console.log("fileImport",r);let n=new FileReader;n.onload=this.fileParse,n.readAsText(r)},fileExport(){var e=document.createElement("a");let t={customPrices:this.userStore.customPrices,keepItems:this.userStore.keepItems,effectivePrices:this.marketStore.prices};const r=JSON.stringify(t);var n=new Blob([r],{type:"text/plain"});e.href=URL.createObjectURL(n),e.download="custom_prices.json",e.click()},clearCustomPrices(){this.userStore.customPrices={},this.userStore.keepItems={}}},mounted(){this.highlightPending=!0,this.highlightHash()},updated(){this.$nextTick(()=>{this.highlightHash()})}},Gr=e=>(er("data-v-53f02e39"),e=e(),rr(),e),E8t=Gr(()=>_("button",null,"import",-1)),C8t={id:"toptext"},A8t={class:"settings-tiles"},x8t={class:"settings-tile"},M8t=$(" Server: "),I8t=Xv("<option data-v-53f02e39>NA</option><option data-v-53f02e39>EU</option><option data-v-53f02e39>RU</option><option data-v-53f02e39>KR</option><option data-v-53f02e39>JP</option><option data-v-53f02e39>TH</option><option data-v-53f02e39>TW</option><option data-v-53f02e39>SA</option><option data-v-53f02e39>SEA</option><option data-v-53f02e39>MENA</option><option data-v-53f02e39>CEU</option><option data-v-53f02e39>CNA</option>",12),L8t=[I8t],O8t=Gr(()=>_("br",null,null,-1)),R8t=Gr(()=>_("label",{for:"vp_t"},"VP always on",-1)),D8t=$(") "),N8t=$(" Tax: "),F8t=Xv('<option value="0.65" data-v-53f02e39>0.65 (0)</option><option value="0.65325" data-v-53f02e39>0.65325 (1000)</option><option value="0.6565" data-v-53f02e39>0.6565 (4000)</option><option value="0.65975" data-v-53f02e39>0.65975 (7000)</option><option value="0.65975" data-v-53f02e39>0.69225 (7000 + ring)</option><option value="0.845" data-v-53f02e39>0.845 (0 + VP)</option><option value="0.84825" data-v-53f02e39>0.84825 (1000 + VP)</option><option value="0.8515" data-v-53f02e39>0.8515 (4000 + VP)</option><option value="0.85475" data-v-53f02e39>0.85475 (7000 + VP)</option><option value="0.88725" data-v-53f02e39>0.88725 (7000 + ring + VP)</option><option value="1" data-v-53f02e39>1 (just hoarding)</option>',11),$8t=[F8t],B8t=$(" Language: "),z8t=Gr(()=>_("option",null,"en",-1)),V8t=Gr(()=>_("option",null,"ru",-1)),U8t=Gr(()=>_("option",null,"ko",-1)),W8t=Gr(()=>_("option",null,"jp",-1)),j8t=Gr(()=>_("option",null,"tw",-1)),G8t=[z8t,V8t,U8t,W8t,j8t],H8t={class:"settings-tile"},X8t=Gr(()=>_("div",null,"Default worker for hire:",-1)),Y8t=Gr(()=>_("label",{for:"dw_f"},"Random Artisan Goblin",-1)),K8t={for:"dw_t"},Z8t={class:"settings-tile"},q8t=$(" \u{1F33B}Farming "),J8t=Gr(()=>_("label",{for:"fe_t",style:{"margin-right":"0.4em"}},"enable",-1)),Q8t={key:0},tNt={class:"slider-container"},eNt=Gr(()=>_("span",null,"F2P",-1)),rNt=Gr(()=>_("span",null,"P2W",-1)),nNt={style:{display:"flex"}},iNt=$(" Total profit from 10 large fences (use "),oNt=Gr(()=>_("a",{href:"https://bit.ly/MagicalFarmingProfit"},"MFP",-1)),aNt=$(" to estimate):"),sNt=Gr(()=>_("br",null,null,-1)),lNt=$(" M$/day with 10 workers "),uNt=Gr(()=>_("br",null,null,-1)),cNt=$(" M$/day with 0 workers (half growth speed) "),fNt={class:"settings-tile"},hNt=$(" \u{1F3ED}Workshops "),dNt={class:"settings-tile"},pNt=$(" \u{1F5FA}\uFE0F Map "),gNt=$(" hide inactive "),vNt=$(" px icon size "),mNt=Gr(()=>_("div",{class:"spacer"},null,-1)),yNt=$(" Market API status: "),_Nt={key:0},bNt={key:1},wNt=$(" \xA0"),SNt=Gr(()=>_("p",null,"By default everything marketable is supposed to be sold on Central Market (with tax).",-1)),TNt=$("If the item is for self use, select Keep (=untax) and/or enter Custom price: "),kNt={class:"scrollable"},PNt={class:"stickyhead"},ENt=Gr(()=>_("thead",null,[_("tr",null,[_("th",null,"Item"),_("th",null,"Market"),_("th",null,"Custom"),_("th",null,"Keep"),_("th",null,"Effective")])],-1)),CNt=["id"],ANt=["href"],xNt=$(" "+M(" ")+" "),MNt={key:0},INt=["title"],LNt={class:"tar"},ONt=["href"],RNt=["onUpdate:modelValue"],DNt={class:"tac"},NNt=["disabled","onUpdate:modelValue"],FNt={class:"tar"};function $Nt(e,t,r,n,i,o){const a=Gt("ModalDialog"),s=Gt("WorkerEdit"),l=Gt("WorkshopsConfig"),u=Gt("TradingConfig"),c=Gt("ItemIcon");return I(),O(W,null,[ht(a,{show:e.importDialogVisible,"onUpdate:show":t[2]||(t[2]=f=>e.importDialogVisible=f)},{default:Fe(()=>[_("form",{onSubmit:t[1]||(t[1]=zh(f=>o.fileImport(f),["prevent"]))},[_("input",{type:"file",accept:".json",onClick:t[0]||(t[0]=f=>o.fileImport())}),E8t],32)]),_:1},8,["show"]),ht(a,{show:e.workerDialogVisible,"onUpdate:show":t[4]||(t[4]=f=>e.workerDialogVisible=f)},{default:Fe(()=>[ht(s,{workerEditing:n.userStore.defaultWorker,initialProfit:0,show:e.workerDialogVisible,"onUpdate:show":t[3]||(t[3]=f=>e.workerDialogVisible=f)},null,8,["workerEditing","show"])]),_:1},8,["show"]),ht(a,{show:e.workshopsConfigVisible,"onUpdate:show":t[5]||(t[5]=f=>e.workshopsConfigVisible=f)},{default:Fe(()=>[ht(l)]),_:1},8,["show"]),ht(a,{show:e.tradingConfigVisible,"onUpdate:show":t[6]||(t[6]=f=>e.tradingConfigVisible=f)},{default:Fe(()=>[ht(u)]),_:1},8,["show"]),_("main",null,[_("div",C8t,[_("div",A8t,[_("div",x8t,[_("div",null,[M8t,at(_("select",{"onUpdate:modelValue":t[7]||(t[7]=f=>n.userStore.selectedRegion=f),onChange:t[8]||(t[8]=(...f)=>e.fetchMarket&&e.fetchMarket(...f))},L8t,544),[[cr,n.userStore.selectedRegion]]),O8t,$(" \u2937 base storage: "+M(n.userStore.baseStorage)+" (",1),at(_("input",{type:"checkbox",id:"vp_t","onUpdate:modelValue":t[9]||(t[9]=f=>n.userStore.storageVP=f)},null,512),[[Ge,n.userStore.storageVP]]),R8t,D8t]),_("div",null,[N8t,at(_("select",{"onUpdate:modelValue":t[10]||(t[10]=f=>n.userStore.selectedTax=f)},$8t,512),[[cr,n.userStore.selectedTax]])]),_("div",null,[B8t,at(_("select",{"onUpdate:modelValue":t[11]||(t[11]=f=>n.userStore.selectedLang=f),onChange:t[12]||(t[12]=(...f)=>e.fetchMarket&&e.fetchMarket(...f))},G8t,544),[[cr,n.userStore.selectedLang]])])]),_("div",H8t,[X8t,_("div",null,[at(_("input",{type:"radio",name:"dw",id:"dw_f",value:!1,"onUpdate:modelValue":t[13]||(t[13]=f=>n.userStore.useDefaultWorker=f)},null,512),[[Ml,n.userStore.useDefaultWorker]]),Y8t]),_("div",null,[at(_("input",{type:"radio",name:"dw",id:"dw_t",value:!0,"onUpdate:modelValue":t[14]||(t[14]=f=>n.userStore.useDefaultWorker=f)},null,512),[[Ml,n.userStore.useDefaultWorker]]),_("label",K8t,[$("Custom ("+M(o.formatFixed(n.gameStore.workerStatsOnPlantzone(n.userStore.defaultWorker).wspd,2))+"\u{1F528} "+M(o.formatFixed(n.gameStore.workerStatsOnPlantzone(n.userStore.defaultWorker).mspd,2))+"\u{1F9B6} "+M(o.formatFixed(n.gameStore.workerStatsOnPlantzone(n.userStore.defaultWorker).luck,2))+"\u{1F340}) ",1),_("button",{onClick:t[15]||(t[15]=f=>e.workerDialogVisible=!0)},"edit")])])]),_("div",Z8t,[q8t,at(_("input",{type:"checkbox",id:"fe_t","onUpdate:modelValue":t[16]||(t[16]=f=>n.userStore.farmingEnable=f)},null,512),[[Ge,n.userStore.farmingEnable]]),J8t,n.userStore.farmingEnable?(I(),O("span",Q8t,[_("div",tNt,[eNt,at(_("input",{type:"range",style:{width:"4em"},"onUpdate:modelValue":t[17]||(t[17]=f=>n.userStore.farmingP2WShare=f),min:"0",max:"80",step:"10"},null,512),[[zt,n.userStore.farmingP2WShare,void 0,{number:!0}]]),rNt]),$(" (using "+M(80-n.userStore.farmingP2WShare)+"CP) ",1),_("div",nNt,[_("div",null,[iNt,oNt,aNt,sNt,at(_("input",{type:"number",class:"float4","onUpdate:modelValue":t[18]||(t[18]=f=>n.userStore.farmingProfit=f)},null,512),[[zt,n.userStore.farmingProfit,void 0,{number:!0}]]),lNt,uNt,at(_("input",{type:"number",class:"float4","onUpdate:modelValue":t[19]||(t[19]=f=>n.userStore.farmingBareProfit=f)},null,512),[[zt,n.userStore.farmingBareProfit,void 0,{number:!0}]]),cNt])])])):nt("",!0)]),_("div",fNt,[hNt,_("div",null,[_("button",{onClick:t[20]||(t[20]=f=>e.workshopsConfigVisible=!0)},"config"),_("button",{onClick:t[21]||(t[21]=f=>e.tradingConfigVisible=!0)},"tradecalc")])]),nt("",!0),_("div",dNt,[pNt,_("div",null,[at(_("input",{type:"checkbox",id:"vi_hie","onUpdate:modelValue":t[24]||(t[24]=f=>n.userStore.mapHideInactive=f)},null,512),[[Ge,n.userStore.mapHideInactive]]),gNt]),_("div",null,[at(_("input",{type:"number",class:"w3em",min:"20",max:"50","onUpdate:modelValue":t[25]||(t[25]=f=>n.userStore.mapIconSize=f)},null,512),[[zt,n.userStore.mapIconSize]]),vNt])])]),mNt,yNt,n.marketStore.apiAlive?(I(),O("span",_Nt,"\u2713")):(I(),O("span",bNt,"\u274C")),wNt,_("button",{onClick:t[26]||(t[26]=f=>o.reload())},"reload"),SNt,_("p",null,[TNt,_("button",{onClick:t[27]||(t[27]=f=>e.importDialogVisible=!0)},"import"),_("button",{onClick:t[28]||(t[28]=f=>o.fileExport())},"export"),_("button",{onClick:t[29]||(t[29]=f=>o.clearCustomPrices())},"clear")])]),_("div",kNt,[_("table",PNt,[ENt,_("tbody",null,[(I(!0),O(W,null,Pt(n.gameStore.itemKeys,f=>(I(),O("tr",{id:"item"+f},[_("td",null,[_("a",{href:this.userStore.itemUrl+f},[ht(c,{ik:f,with_name:!0},null,8,["ik"])],8,ANt),xNt,f in n.marketStore.calculatedPrices?(I(),O("span",MNt,[_("abbr",{class:"tooltip",title:`contains:
`+Object.entries(n.marketStore.calculatedPrices[f]).map(([h,d])=>o.formatFixed(d,3)+" "+n.gameStore.uloc.item[h]).join(`
`)},"\u2139",8,INt)])):nt("",!0)]),_("td",LNt,[f in n.marketStore.apiPrices?(I(),O("a",{key:0,href:this.marketStore.itemPriceUrl(f)},M(o.formatFixed(n.marketStore.apiPrices[f])),9,ONt)):(I(),O(W,{key:1},[$(M(o.formatFixed(n.gameStore.vendorPrices[f])),1)],64))]),_("td",null,[at(_("input",{type:"number",class:"price tar","onUpdate:modelValue":h=>n.userStore.customPrices[f]=h},null,8,RNt),[[zt,n.userStore.customPrices[f],void 0,{number:!0}]])]),_("td",DNt,[at(_("input",{type:"checkbox",disabled:f in n.gameStore.vendorPrices,"onUpdate:modelValue":h=>n.userStore.keepItems[f]=h},null,8,NNt),[[Ge,n.userStore.keepItems[f]]])]),_("td",FNt,M(o.formatFixed(n.marketStore.prices[f])),1)],8,CNt))),256))])])])])],64)}const BNt=le(P8t,[["render",$Nt],["__scopeId","data-v-53f02e39"]]);const zNt={setup(){const e=At(),t=ee(),r=ii();return{gameStore:e,userStore:t,marketStore:r}},data:()=>({}),watch:{},methods:{formatFixed:dt},computed:{plantzonesNearestCpTownsProfits150(){const e=Date.now();let t={};for(const r of Object.keys(this.gameStore.plantzones))t[r]=this.gameStore.plantzoneNearestCpTownsProfits150(r,3);return console.log("cpt: plantzonesNearestCpTownsProfits took",Date.now()-e,"ms"),t}}},VNt=_("div",{id:"toptext"},[_("p",null,"Using 150/10/10 worker")],-1),UNt=_("tr",null,[_("th",null,"Node/Town"),_("th",null,"connect"),_("th",null,"distance"),_("th",null,"M$/day"),_("th",null,"M$/day/CP")],-1),WNt={colspan:"5"};function jNt(e,t,r,n,i,o){return I(),O(W,null,[VNt,_("table",null,[UNt,(I(!0),O(W,null,Pt(n.gameStore.plantzones,(a,s)=>(I(),O(W,null,[_("tr",null,[_("td",WNt,[_("h3",null,M(s)+" "+M(a.name),1)])]),(I(!0),O(W,null,Pt(o.plantzonesNearestCpTownsProfits150[s],l=>(I(),O("tr",null,[_("td",null,M(n.gameStore.nodeName(l.tnk)),1),_("td",null,M(l.cp)+"CP ",1),_("td",null,M(o.formatFixed(l.dist,0)),1),_("td",null,M(o.formatFixed(l.priceDaily,2)),1),_("td",null,M(o.formatFixed(l.dailyPerCp,3)),1)]))),256))],64))),256))])],64)}const GNt=le(zNt,[["render",jNt]]),HNt={setup(){const e=At(),t=ee();return{gameStore:e,userStore:t}},components:{ItemIcon:no},data:()=>({houses:{},houseCrafts:{},towns:new Set([-1]),usages:[-1],filterTown:-1,filterUsage:-1}),created(){this.fetchData()},mounted(){},watch:{},methods:{async fetchData(){this.houseCrafts=await(await fetch("data/houseinforeceipe.json")).json(),this.houses=await(await fetch("data/houseinfo.json")).json();const e=new Set([-1]),t=new Set([-1]);for(const[r,n]of Object.entries(this.houses)){e.add(n.affTown);for(const[o,a]of Object.entries(n.CraftList))t.add(o);this.houses[r].CPfull=this.houses[r].CP;let i=n.needHouseKey;for(;i;)this.houses[r].CPfull+=this.houses[i].CP,i=this.houses[i].needHouseKey}this.towns=e,this.usages=[...t].sort((r,n)=>r-n)}},computed:{craftableCount(){let e=0;for(const t of Object.values(this.houseCrafts[this.filterUsage].groups))e+=t.length;return e},stackableCount(){let e=0;for(const t of Object.values(this.houseCrafts[this.filterUsage].groups))for(const r of t)r in this.gameStore.craftInputs&&(e+=1);return e}}},XNt={id:"toptext"},YNt=$(" Region: "),KNt=["value"],ZNt=$(" Usage: "),qNt=["value"],JNt={key:0},QNt=["href"],t9t=_("tr",null,[_("th",null,"town"),_("th",null,"node"),_("th",null,"name"),_("th",null,"CP (with chain)"),_("th",null,"usage/level")],-1),e9t={key:0},r9t=["href"],n9t=$(M(" "));function i9t(e,t,r,n,i,o){const a=Gt("ItemIcon");return I(),O("main",null,[_("div",XNt,[YNt,at(_("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>e.filterTown=s)},[(I(!0),O(W,null,Pt(e.towns,s=>(I(),O("option",{value:s},M(s>=0?n.gameStore.uloc.town[s]:"any"),9,KNt))),256))],512),[[cr,e.filterTown]]),ZNt,at(_("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>e.filterUsage=s)},[(I(!0),O(W,null,Pt(e.usages,s=>(I(),O("option",{value:s},M(s>=0?n.gameStore.uloc.housetype[s]+" "+s:"any"),9,qNt))),256))],512),[[cr,e.filterUsage]]),e.filterUsage!=-1?(I(),O("details",JNt,[_("summary",null,M(o.craftableCount)+" craftables, "+M(o.stackableCount)+" stackable",1),(I(!0),O(W,null,Pt(this.houseCrafts[e.filterUsage].groups,(s,l)=>(I(),O("div",null,[$(" level "+M(l+1)+": ",1),_("table",null,[(I(!0),O(W,null,Pt(s,u=>(I(),O("tr",null,[(I(!0),O(W,null,Pt(this.gameStore.craftOutputs[u],c=>(I(),O("a",{href:this.userStore.itemUrl+c},[ht(a,{ik:c,with_name:!0},null,8,["ik"])],8,QNt))),256))]))),256))])]))),256))])):nt("",!0)]),_("table",null,[t9t,(I(!0),O(W,null,Pt(e.houses,(s,l)=>(I(),O(W,null,[(e.filterTown==-1||s.affTown==e.filterTown)&&(e.filterUsage==-1||e.filterUsage in s.CraftList)?(I(),O("tr",e9t,[_("td",null,M(s.affTown),1),_("td",null,M(s.parentNode),1),_("td",null,[_("a",{href:"https://bdocodex.com/us/npc/"+s.key},M(n.gameStore.uloc.char[s.key]),9,r9t)]),_("td",null,M(s.CP)+" ("+M(s.CPfull)+")",1),_("td",null,[(I(!0),O(W,null,Pt(s.CraftList,(u,c)=>(I(),O("span",null,[$(M(n.gameStore.uloc.housetype[c]),1),_("sup",null,M(u),1),n9t]))),256))])])):nt("",!0)],64))),256))])])}const o9t=le(HNt,[["render",i9t]]);Qr([ql,Lpt,Ql,Jl,tu]);const a9t={setup(){const e=ee();return{gameStore:At(),userStore:e}},components:{VChart:eu},props:{show:{type:Boolean,default:!1}},data:()=>({tk:5,wantLodging:0,wantStorage:0}),computed:{townsWithHouses(){const e=[];if(!this.gameStore.ready)return e;for(const t of this.gameStore.townsWithLodging){const r=this.gameStore.tnk2tk(t);r in this.gameStore.uloc.town&&e.push(r)}return e},bestLookup(){return this.gameStore.lsLookup(this.tk,this.wantLodging,this.wantStorage)},sortedResult(){const e=[],t=this.bestLookup;if(t&&t.success){for(let r=0;r<t.indices.length;r++){const n=t.indices[r],i=this.gameStore.uloc.char[n],o=t.states[r];e.push({hk:n,name:i,state:o})}e.sort((r,n)=>(""+r.name).localeCompare(n.name))}return e},storageCost(){let e=0;for(const t of this.sortedResult)t.state==1&&(e+=this.gameStore.houseCost(t.hk));return e},lodgingCost(){let e=0;for(const t of this.sortedResult)t.state==2&&(e+=this.gameStore.houseCost(t.hk));return e},townChains(){const e={};for(const t of this.gameStore.housesPerTown[this.tk]){e[t]=[];let r=Number(t);for(;r!=0;)e[t].unshift(r),r=this.gameStore.houseInfo[r].needHouseKey}return e},townTree(){const e={name:"",value:this.gameStore.uloc.town[this.tk],children:[]};if(!this.gameStore.ready)return e;if(!this.bestLookup.success)return console.log("bestlookup failed for tk",this.tk),e;for(const t of this.gameStore.housesPerTown[this.tk]){let r=e;for(const n of this.townChains[t]){const i=r.children.findIndex(o=>o.name==n);if(i>=0)r=r.children[i];else{let o=0;if(this.bestLookup){const s=this.bestLookup.indices.indexOf(n);s!==-1&&(o=this.bestLookup.states[s])}const a={name:n,value:{label:this.gameStore.uloc.char[n],lodging:this.gameStore.houseLodging(n),storage:this.gameStore.houseStorage(n),cp:this.gameStore.houseCost(n)},lineStyle:r.name==0?{color:"transparent"}:o>0?o==2?{color:"#fe6"}:{color:"#a5f"}:{},itemStyle:o>0?o==2?{color:"#fe6"}:{color:"#a5f"}:{},children:[]};r.children.push(a),r=a}}}return this.tk==1553&&console.log("townTree",e),e},chartOption(){return{tooltip:{trigger:"item",triggerOn:"mousemove",formatter:function(e){const t=e.value;return e.name==0?t:`${e.name} ${t.label}<br/>${t.lodging}\u{1F6CF}\uFE0F ${t.storage}\u{1F4E6} ${t.cp}CP`}},series:[{type:"tree",layout:"radial",roam:!0,data:[this.townTree],top:"1%",left:"1%",bottom:"1%",right:"1%",symbolSize:6,initialTreeDepth:9,label:{fontSize:9,color:"gray",position:"top",formatter:function(e){const t=e.value;return e.name==0?"":`{r|${t.lodging}} {o|${t.storage}} ${t.cp}`},rich:{r:{fontSize:9},o:{fontSize:9}}},leaves:{label:{}},emphasis:{focus:"descendant"}}]}}},methods:{formatFixed:dt}},m0=e=>(er("data-v-265abb6b"),e=e(),rr(),e),s9t={class:"limit"},l9t={id:"controls"},u9t=m0(()=>_("p",null,[$("data from "),_("a",{href:"https://github.com/Thell/bdo-housecraft"},"Thell/bdo-housecraft")],-1)),c9t={id:"fluid"},f9t={id:"sliders"},h9t={key:0},d9t=m0(()=>_("tr",null,[_("th"),_("th",null,"wanted"),_("th",null,"found"),_("th",null,"cost"),_("th",null,"per CP")],-1)),p9t=m0(()=>_("th",{class:"lodging"},"lodging ",-1)),g9t=["max"],v9t=m0(()=>_("th",{class:"storage"},"storage",-1)),m9t=["max"],y9t={colspan:"3"},_9t=$(" town "),b9t=["value"],w9t={colspan:"2"},S9t=m0(()=>_("div",{style:{clear:"both"}},null,-1)),T9t={key:0,id:"houselist"};function k9t(e,t,r,n,i,o){const a=Gt("v-chart");return I(),O("main",null,[_("div",s9t,[_("div",l9t,[u9t,_("div",c9t,[_("div",f9t,[this.gameStore.ready?(I(),O("table",h9t,[d9t,_("tr",null,[p9t,_("th",null,[at(_("input",{type:"range",class:"wlong","onUpdate:modelValue":t[0]||(t[0]=s=>e.wantLodging=s),min:"0",max:Math.min(n.gameStore.ready?n.gameStore.townUpperLimits[e.tk].lodging:999,100)},null,8,g9t),[[zt,e.wantLodging,void 0,{number:!0}]]),$(M(e.wantLodging),1)]),_("th",null,M(o.bestLookup?o.bestLookup.lodging:"?"),1),_("th",null,M(o.lodgingCost)+" CP",1),_("th",null,M(o.bestLookup?o.formatFixed(o.bestLookup.lodging/o.lodgingCost,3):"?"),1)]),_("tr",null,[v9t,_("th",null,[at(_("input",{type:"range",class:"wlong","onUpdate:modelValue":t[1]||(t[1]=s=>e.wantStorage=s),min:"0",max:Math.min(n.gameStore.ready?n.gameStore.townUpperLimits[e.tk].storage:999,192-8)},null,8,m9t),[[zt,e.wantStorage,void 0,{number:!0}]]),$(M(e.wantStorage),1)]),_("th",null,M(o.bestLookup?o.bestLookup.storage:"?"),1),_("th",null,M(o.storageCost)+" CP",1),_("th",null,M(o.bestLookup?o.formatFixed(o.bestLookup.storage/o.storageCost,3):"?"),1)]),_("tr",null,[_("th",y9t,[_9t,at(_("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>e.tk=s)},[(I(!0),O(W,null,Pt(this.townsWithHouses,s=>(I(),O("option",{value:s},M(n.gameStore.uloc.town[s]),9,b9t))),256))],512),[[cr,e.tk]])]),_("th",w9t,M(o.bestLookup?o.bestLookup.cost:"?")+" CP total",1)])])):nt("",!0)])])]),S9t,o.bestLookup?(I(),O("div",T9t,[(I(!0),O(W,null,Pt(o.sortedResult,s=>(I(),O(W,null,[s.state>0?(I(),O("p",{key:0,class:Ur({storage:s.state==1,lodging:s.state==2})},M(s.name),3)):nt("",!0)],64))),256))])):nt("",!0),ht(a,{class:"chart",option:o.chartOption},null,8,["option"])])])}const P9t=le(a9t,[["render",k9t],["__scopeId","data-v-265abb6b"]]);/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var E9t=typeof Object.defineProperty=="function"?Object.defineProperty:null,C9t=E9t;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var A9t=C9t;function x9t(){try{return A9t({},"x",{}),!0}catch{return!1}}var M9t=x9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var I9t=Object.defineProperty,L9t=I9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Sd=Object.prototype,I8=Sd.toString,L8=Sd.__defineGetter__,O8=Sd.__defineSetter__,O9t=Sd.__lookupGetter__,R9t=Sd.__lookupSetter__;function D9t(e,t,r){var n,i,o,a;if(typeof e!="object"||e===null||I8.call(e)==="[object Array]")throw new TypeError("invalid argument. First argument must be an object. Value: `"+e+"`.");if(typeof r!="object"||r===null||I8.call(r)==="[object Array]")throw new TypeError("invalid argument. Property descriptor must be an object. Value: `"+r+"`.");if(i="value"in r,i&&(O9t.call(e,t)||R9t.call(e,t)?(n=e.__proto__,e.__proto__=Sd,delete e[t],e[t]=r.value,e.__proto__=n):e[t]=r.value),o="get"in r,a="set"in r,i&&(o||a))throw new Error("invalid argument. Cannot specify one or more accessors and a value or writable attribute in the property descriptor.");return o&&L8&&L8.call(e,t,r.get),a&&O8&&O8.call(e,t,r.set),e}var N9t=D9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var F9t=M9t,$9t=L9t,B9t=N9t,$E;F9t()?$E=$9t:$E=B9t;var LH=$E;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var z9t=LH;function V9t(e,t,r){z9t(e,t,{configurable:!1,enumerable:!0,writable:!1,value:r})}var U9t=V9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var W9t=U9t,j9t=W9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var G9t=LH;function H9t(e,t,r){G9t(e,t,{configurable:!1,enumerable:!1,writable:!1,value:r})}var X9t=H9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Y9t=X9t,tn=Y9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var K9t=Math.floor,Z9t=K9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var q9t=Z9t,Pi=q9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var J9t=Pi;function Q9t(e){return J9t(e)===e}var t7t=Q9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e7t=t7t,iu=e7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var r7t=4294967295>>>0,n7t=r7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var i7t=iu,o7t=n7t;function a7t(e){return e!=null&&typeof e!="function"&&typeof e.length=="number"&&i7t(e.length)&&e.length>=0&&e.length<=o7t}var s7t=a7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var l7t=s7t,u7t=l7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var c7t=u7t;function f7t(e){if(typeof e!="function")throw new TypeError("invalid argument. Must provide a function. Value: `"+e+"`.");return t;function t(r){var n,i;if(!c7t(r)||(n=r.length,n===0))return!1;for(i=0;i<n;i++)if(e(r[i])===!1)return!1;return!0}}var h7t=f7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var d7t=h7t,p7t=d7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function g7t(e){return typeof e=="number"}var OH=g7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function v7t(){return typeof Symbol=="function"&&typeof Symbol("foo")=="symbol"}var m7t=v7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var y7t=m7t,_7t=y7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var b7t=_7t,w7t=b7t();function S7t(){return w7t&&typeof Symbol.toStringTag=="symbol"}var T7t=S7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var k7t=T7t,A2=k7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var P7t=Object.prototype.toString,RH=P7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var E7t=RH;function C7t(e){return E7t.call(e)}var A7t=C7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var x7t=Object.prototype.hasOwnProperty;function M7t(e,t){return e==null?!1:x7t.call(e,t)}var I7t=M7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var L7t=I7t,x2=L7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var O7t=typeof Symbol=="function"?Symbol.toStringTag:"",R7t=O7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var D7t=x2,kp=R7t,G3=RH;function N7t(e){var t,r,n;if(e==null)return G3.call(e);r=e[kp],t=D7t(e,kp);try{e[kp]=void 0}catch{return G3.call(e)}return n=G3.call(e),t?e[kp]=r:delete e[kp],n}var F7t=N7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $7t=A2,B7t=A7t,z7t=F7t,BE;$7t()?BE=z7t:BE=B7t;var Go=BE;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var V7t=Number;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var U7t=V7t,f4=U7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var W7t=f4,j7t=W7t.prototype.toString,G7t=j7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var H7t=G7t;function X7t(e){try{return H7t.call(e),!0}catch{return!1}}var Y7t=X7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var K7t=A2,Z7t=Go,q7t=f4,J7t=Y7t,Q7t=K7t();function tFt(e){return typeof e=="object"?e instanceof q7t?!0:Q7t?J7t(e):Z7t(e)==="[object Number]":!1}var DH=tFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eFt=OH,rFt=DH;function nFt(e){return eFt(e)||rFt(e)}var iFt=nFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NH=tn,h4=iFt,oFt=OH,aFt=DH;NH(h4,"isPrimitive",oFt);NH(h4,"isObject",aFt);var Td=h4;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var FH=tn,d4=p7t,p4=Td,sFt=d4(p4.isPrimitive),lFt=d4(p4.isObject),g4=d4(p4);FH(g4,"primitives",sFt);FH(g4,"objects",lFt);var uFt=g4;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cFt=Number.POSITIVE_INFINITY,sr=cFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fFt=f4,hFt=fFt.NEGATIVE_INFINITY,pn=hFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dFt=sr,pFt=pn,gFt=iu;function vFt(e){return e<dFt&&e>pFt&&gFt(e)}var $H=vFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mFt=Td.isPrimitive,yFt=$H;function _Ft(e){return mFt(e)&&yFt(e)}var BH=_Ft;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bFt=Td.isObject,wFt=$H;function SFt(e){return bFt(e)&&wFt(e.valueOf())}var zH=SFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var TFt=BH,kFt=zH;function PFt(e){return TFt(e)||kFt(e)}var EFt=PFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var VH=tn,v4=EFt,CFt=BH,AFt=zH;VH(v4,"isPrimitive",CFt);VH(v4,"isObject",AFt);var M2=v4;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xFt=M2.isPrimitive;function MFt(e){return xFt(e)&&e>=0}var UH=MFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var IFt=M2.isObject;function LFt(e){return IFt(e)&&e.valueOf()>=0}var WH=LFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var OFt=UH,RFt=WH;function DFt(e){return OFt(e)||RFt(e)}var NFt=DFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jH=tn,m4=NFt,FFt=UH,$Ft=WH;jH(m4,"isPrimitive",FFt);jH(m4,"isObject",$Ft);var BFt=m4;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zFt(e){return e!==e}var VFt=zFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var UFt=VFt,be=UFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function WFt(e,t){var r,n;if(n=e.length,n<2||t===0)return n===0?0:e[0];for(n-=1,r=e[n]*t+e[n-1],n-=2;n>=0;)r=r*t+e[n],n-=1;return r}var GH=WFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jFt=GH;function GFt(e){var t,r,n,i;if(e.length>500)return o;if(t="return function evalpoly(x){",r=e.length,r===0)t+="return 0.0;";else if(r===1)t+="return "+e[0]+";";else{for(t+="if(x===0.0){return "+e[0]+";}",t+="return "+e[0],n=r-1,i=1;i<r;i++)t+="+x*",i<n&&(t+="("),t+=e[i];for(i=0;i<n-1;i++)t+=")";t+=";"}return t+="}",t+="//# sourceURL=evalpoly.factory.js",new Function(t)();function o(a){return jFt(e,a)}}var HFt=GFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XFt=tn,HH=GH,YFt=HFt;XFt(HH,"factory",YFt);var ou=HH;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var KFt=Go,ZFt=typeof Uint32Array=="function";function qFt(e){return ZFt&&e instanceof Uint32Array||KFt(e)==="[object Uint32Array]"}var JFt=qFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var QFt=JFt,t$t=QFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e$t=4294967295,r$t=e$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var n$t=typeof Uint32Array=="function"?Uint32Array:null,i$t=n$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var o$t=t$t,H3=r$t,R8=i$t;function a$t(){var e,t;if(typeof R8!="function")return!1;try{t=[1,3.14,-3.14,H3+1,H3+2],t=new R8(t),e=o$t(t)&&t[0]===1&&t[1]===3&&t[2]===H3-2&&t[3]===0&&t[4]===1}catch{e=!1}return e}var s$t=a$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var l$t=s$t,u$t=l$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var c$t=typeof Uint32Array=="function"?Uint32Array:void 0,f$t=c$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function h$t(){throw new Error("not implemented")}var d$t=h$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var p$t=u$t,g$t=f$t,v$t=d$t,zE;p$t()?zE=g$t:zE=v$t;var kd=zE;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var m$t=Go,y$t=typeof Float64Array=="function";function _$t(e){return y$t&&e instanceof Float64Array||m$t(e)==="[object Float64Array]"}var b$t=_$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var w$t=b$t,S$t=w$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var T$t=typeof Float64Array=="function"?Float64Array:null,k$t=T$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var P$t=S$t,D8=k$t;function E$t(){var e,t;if(typeof D8!="function")return!1;try{t=new D8([1,3.14,-3.14,NaN]),e=P$t(t)&&t[0]===1&&t[1]===3.14&&t[2]===-3.14&&t[3]!==t[3]}catch{e=!1}return e}var C$t=E$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var A$t=C$t,x$t=A$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var M$t=typeof Float64Array=="function"?Float64Array:void 0,I$t=M$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function L$t(){throw new Error("not implemented")}var O$t=L$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var R$t=x$t,D$t=I$t,N$t=O$t,VE;R$t()?VE=D$t:VE=N$t;var Pd=VE;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var F$t=Go,$$t=typeof Uint8Array=="function";function B$t(e){return $$t&&e instanceof Uint8Array||F$t(e)==="[object Uint8Array]"}var z$t=B$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var V$t=z$t,U$t=V$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var W$t=255,j$t=W$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var G$t=typeof Uint8Array=="function"?Uint8Array:null,H$t=G$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var X$t=U$t,X3=j$t,N8=H$t;function Y$t(){var e,t;if(typeof N8!="function")return!1;try{t=[1,3.14,-3.14,X3+1,X3+2],t=new N8(t),e=X$t(t)&&t[0]===1&&t[1]===3&&t[2]===X3-2&&t[3]===0&&t[4]===1}catch{e=!1}return e}var K$t=Y$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Z$t=K$t,q$t=Z$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var J$t=typeof Uint8Array=="function"?Uint8Array:void 0,Q$t=J$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tBt(){throw new Error("not implemented")}var eBt=tBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rBt=q$t,nBt=Q$t,iBt=eBt,UE;rBt()?UE=nBt:UE=iBt;var oBt=UE;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aBt=Go,sBt=typeof Uint16Array=="function";function lBt(e){return sBt&&e instanceof Uint16Array||aBt(e)==="[object Uint16Array]"}var uBt=lBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cBt=uBt,fBt=cBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hBt=65535,dBt=hBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pBt=typeof Uint16Array=="function"?Uint16Array:null,gBt=pBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vBt=fBt,Y3=dBt,F8=gBt;function mBt(){var e,t;if(typeof F8!="function")return!1;try{t=[1,3.14,-3.14,Y3+1,Y3+2],t=new F8(t),e=vBt(t)&&t[0]===1&&t[1]===3&&t[2]===Y3-2&&t[3]===0&&t[4]===1}catch{e=!1}return e}var yBt=mBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _Bt=yBt,bBt=_Bt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wBt=typeof Uint16Array=="function"?Uint16Array:void 0,SBt=wBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function TBt(){throw new Error("not implemented")}var kBt=TBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PBt=bBt,EBt=SBt,CBt=kBt,WE;PBt()?WE=EBt:WE=CBt;var ABt=WE;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xBt=oBt,MBt=ABt,IBt={uint16:MBt,uint8:xBt},LBt=IBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $8=LBt,XH;function OBt(){var e,t;return e=new $8.uint16(1),e[0]=4660,t=new $8.uint8(e.buffer),t[0]===52}XH=OBt();var RBt=XH;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var DBt=RBt,Ed=DBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NBt=Ed,jE;NBt===!0?jE=1:jE=0;var FBt=jE;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $Bt=kd,BBt=Pd,zBt=FBt,YH=new BBt(1),VBt=new $Bt(YH.buffer);function UBt(e){return YH[0]=e,VBt[zBt]}var WBt=UBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jBt=WBt,so=jBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GBt=Ed,GE;GBt===!0?GE=1:GE=0;var HBt=GE;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XBt=kd,YBt=Pd,KBt=HBt,HE=new YBt(1),ZBt=new XBt(HE.buffer);function qBt(e,t){return HE[0]=e,ZBt[KBt]=t>>>0,HE[0]}var JBt=qBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var QBt=JBt,y0=QBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tzt=1023,nf=tzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ezt=.34657359027997264,rzt=ezt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function nzt(e){return e===0?-.03333333333333313:-.03333333333333313+e*(.0015873015872548146+e*(-793650757867488e-19+e*(4008217827329362e-21+e*-20109921818362437e-23)))}var izt=nzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FDLIBM]{@link http://www.netlib.org/fdlibm/s_expm1.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var ozt=be,K3=so,p1=y0,B8=sr,azt=pn,szt=nf,lzt=rzt,uzt=izt,czt=709.782712893384,Z3=.6931471803691238,q3=19082149292705877e-26,z8=1.4426950408889634,fzt=38.816242111356935,hzt=1.0397207708399179;function dzt(e){var t,r,n,i,o,a,s,l,u,c,f,h;if(e===B8||ozt(e))return e;if(e===azt)return-1;if(e===0)return e;if(e<0?(r=!0,s=-e):(r=!1,s=e),s>=fzt){if(r)return-1;if(s>=czt)return B8}if(o=K3(s)|0,s>lzt)s<hzt?r?(n=e+Z3,i=-q3,h=-1):(n=e-Z3,i=q3,h=1):(r?h=z8*e-.5:h=z8*e+.5,h|=0,c=h,n=e-c*Z3,i=c*q3),e=n-i,u=n-e-i;else{if(o<1016070144)return e;h=0}return t=.5*e,l=e*t,a=1+l*uzt(l),c=3-a*t,f=l*((a-c)/(6-e*c)),h===0?e-(e*f-l):(f=e*(f-u)-u,f-=l,h===-1?.5*(e-f)-.5:h===1?e<-.25?-2*(f-(e+.5)):1+2*(e-f):h<=-2||h>56?(s=1-(f-e),n=K3(s)+(h<<20)|0,s=p1(s,n),s-1):(c=1,h<20?(n=1072693248-(2097152>>h)|0,c=p1(c,n),s=c-(f-e)):(n=szt-h<<20|0,c=p1(c,n),s=e-(f+c),s+=1),n=K3(s)+(h<<20)|0,p1(s,n)))}var pzt=dzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gzt=pzt,Cd=gzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function vzt(e){return e===0?.6666666666666735:.6666666666666735+e*(.3999999999940942+e*(.2857142874366239+e*(.22222198432149784+e*(.1818357216161805+e*(.15313837699209373+e*.14798198605116586)))))}var mzt=vzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FDLIBM]{@link http://www.netlib.org/fdlibm/s_log1p.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var yzt=be,V8=so,U8=y0,_zt=sr,bzt=pn,W8=nf,wzt=mzt,J3=.6931471803691238,Q3=19082149292705877e-26,Szt=.41421356237309503,Tzt=-.2928932188134525,kzt=1862645149230957e-24,Pzt=5551115123125783e-32,Ezt=9007199254740992,Czt=.6666666666666666;function Azt(e){var t,r,n,i,o,a,s,l,u,c;if(e<-1||yzt(e))return NaN;if(e===-1)return bzt;if(e===_zt||e===0)return e;if(e<0?n=-e:n=e,c=1,n<Szt){if(n<kzt)return n<Pzt?e:e-e*e*.5;e>Tzt&&(c=0,i=e,r=1)}return c!==0&&(n<Ezt?(u=1+e,r=V8(u),c=(r>>20)-W8,c>0?o=1-(u-e):o=e-(u-1),o/=u):(u=e,r=V8(u),c=(r>>20)-W8,o=0),r&=1048575,r<434334?u=U8(u,r|1072693248):(c+=1,u=U8(u,r|1071644672),r=1048576-r>>2),i=u-1),t=.5*i*i,r===0?i===0?(o+=c*Q3,c*J3+o):(l=t*(1-Czt*i),c*J3-(l-(c*Q3+o)-i)):(a=i/(2+i),s=a*a,l=s*wzt(s),c===0?i-(t-a*(t+l)):c*J3-(t-(a*(t+l)+(c*Q3+o))-i))}var xzt=Azt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Mzt=xzt,Ei=Mzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Izt=Math.sqrt,Lzt=Izt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ozt=Lzt,Rr=Ozt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Rzt=.7853981633974483,KH=Rzt;/**
* @license Apache-2.0
*
* Copyright (c) 2020 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Dzt(e){var t,r,n;return e===0?.16666666666666713:(e<0?t=-e:t=e,t<=1?(r=-8.198089802484825+e*(19.562619833175948+e*(-16.262479672107002+e*(5.444622390564711+e*(-.6019598008014124+e*.004253011369004428)))),n=-49.18853881490881+e*(139.51056146574857+e*(-147.1791292232726+e*(70.49610280856842+e*(-14.740913729888538+e*1))))):(e=1/e,r=.004253011369004428+e*(-.6019598008014124+e*(5.444622390564711+e*(-16.262479672107002+e*(19.562619833175948+e*-8.198089802484825)))),n=1+e*(-14.740913729888538+e*(70.49610280856842+e*(-147.1791292232726+e*(139.51056146574857+e*-49.18853881490881))))),r/n)}var Nzt=Dzt;/**
* @license Apache-2.0
*
* Copyright (c) 2020 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Fzt(e){var t,r,n;return e===0?.08333333333333809:(e<0?t=-e:t=e,t<=1?(r=28.536655482610616+e*(-25.56901049652825+e*(6.968710824104713+e*(-.5634242780008963+e*.002967721961301243))),n=342.43986579130785+e*(-383.8770957603691+e*(147.0656354026815+e*(-21.947795316429207+e*1)))):(e=1/e,r=.002967721961301243+e*(-.5634242780008963+e*(6.968710824104713+e*(-25.56901049652825+e*28.536655482610616))),n=1+e*(-21.947795316429207+e*(147.0656354026815+e*(-383.8770957603691+e*342.43986579130785)))),r/n)}var $zt=Fzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, long comment, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1995, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var Bzt=be,zzt=Rr,j8=KH,Vzt=Nzt,Uzt=$zt,Wzt=6123233995736766e-32;function jzt(e){var t,r,n,i,o;if(Bzt(e))return NaN;if(e>0?n=e:(t=!0,n=-e),n>1)return NaN;if(n>.625)r=1-n,i=r*Uzt(r),r=zzt(r+r),o=j8-r,r=r*i-Wzt,o-=r,o+=j8;else{if(n<1e-8)return e;r=n*n,o=r*Vzt(r),o=n*o+n}return t?-o:o}var Gzt=jzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Hzt=Gzt,y4=Hzt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Xzt(e){return Math.abs(e)}var Yzt=Xzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Kzt=Yzt,$e=Kzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Zzt=Math.ceil,qzt=Zzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Jzt=qzt,ZH=Jzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Qzt=Pi,tVt=ZH;function eVt(e){return e<0?tVt(e):Qzt(e)}var rVt=eVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nVt=rVt,_4=nVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iVt=1023,oVt=iVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aVt=-1023,sVt=aVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var lVt=-1074,uVt=lVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cVt=sr,fVt=pn;function hVt(e){return e===cVt||e===fVt}var dVt=hVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pVt=dVt,Ad=pVt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gVt=2147483648>>>0,vVt=gVt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mVt=2147483647>>>0,I2=mVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yVt=Ed,qH,XE,YE;yVt===!0?(XE=1,YE=0):(XE=0,YE=1);qH={HIGH:XE,LOW:YE};var _Vt=qH;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bVt=kd,wVt=Pd,JH=_Vt,QH=new wVt(1),G8=new bVt(QH.buffer),SVt=JH.HIGH,TVt=JH.LOW;function kVt(e,t,r,n){return QH[0]=e,t[n]=G8[SVt],t[n+r]=G8[TVt],t}var tX=kVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PVt=tX;function EVt(e){return PVt(e,[0>>>0,0>>>0],1,0)}var CVt=EVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var AVt=tn,eX=CVt,xVt=tX;AVt(eX,"assign",xVt);var b4=eX;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var MVt=Ed,rX,KE,ZE;MVt===!0?(KE=1,ZE=0):(KE=0,ZE=1);rX={HIGH:KE,LOW:ZE};var IVt=rX;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var LVt=kd,OVt=Pd,nX=IVt,iX=new OVt(1),H8=new LVt(iX.buffer),RVt=nX.HIGH,DVt=nX.LOW;function NVt(e,t){return H8[RVt]=e,H8[DVt]=t,iX[0]}var FVt=NVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $Vt=FVt,w4=$Vt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var BVt=vVt,zVt=I2,VVt=b4,UVt=so,WVt=w4,tT=[0,0];function jVt(e,t){var r,n;return VVt.assign(e,tT,1,0),r=tT[0],r&=zVt,n=UVt(t),n&=BVt,r|=n,WVt(r,tT[1])}var GVt=jVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var HVt=GVt,S4=HVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XVt=22250738585072014e-324,of=XVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var YVt=of,KVt=Ad,ZVt=be,qVt=$e,JVt=4503599627370496;function QVt(e,t,r,n){return ZVt(e)||KVt(e)?(t[n]=e,t[n+r]=0,t):e!==0&&qVt(e)<YVt?(t[n]=e*JVt,t[n+r]=-52,t):(t[n]=e,t[n+r]=0,t)}var oX=QVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tUt=oX;function eUt(e){return tUt(e,[0,0],1,0)}var rUt=eUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nUt=tn,aX=rUt,iUt=oX;nUt(aX,"assign",iUt);var oUt=aX;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aUt=2146435072,sUt=aUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var lUt=so,uUt=sUt,cUt=nf;function fUt(e){var t=lUt(e);return t=(t&uUt)>>>20,t-cUt|0}var hUt=fUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dUt=hUt,pUt=dUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gUt=sr,vUt=pn,mUt=nf,yUt=oVt,_Ut=sVt,bUt=uVt,wUt=be,SUt=Ad,TUt=S4,kUt=oUt.assign,PUt=pUt,EUt=b4,CUt=w4,AUt=2220446049250313e-31,xUt=2148532223>>>0,eT=[0,0],rT=[0,0];function MUt(e,t){var r,n;return t===0||e===0||wUt(e)||SUt(e)?e:(kUt(e,eT,1,0),e=eT[0],t+=eT[1],t+=PUt(e),t<bUt?TUt(0,e):t>yUt?e<0?vUt:gUt:(t<=_Ut?(t+=52,n=AUt):n=1,EUt.assign(e,rT,1,0),r=rT[0],r&=xUt,r|=t+mUt<<20,n*CUt(r,rT[1])))}var IUt=MUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var LUt=IUt,xd=LUt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function OUt(e){return e===0?.16666666666666602:.16666666666666602+e*(-.0027777777777015593+e*(6613756321437934e-20+e*(-16533902205465252e-22+e*41381367970572385e-24)))}var RUt=OUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_exp.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var DUt=xd,NUt=RUt;function FUt(e,t,r){var n,i,o,a;return n=e-t,i=n*n,o=n-i*NUt(i),a=1-(t-n*o/(2-o)-e),DUt(a,r)}var $Ut=FUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_exp.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var BUt=be,X8=_4,zUt=pn,Y8=sr,VUt=$Ut,UUt=.6931471803691238,WUt=19082149292705877e-26,K8=1.4426950408889634,jUt=709.782712893384,GUt=-745.1332191019411,sX=1/(1<<28),HUt=-sX;function XUt(e){var t,r,n;return BUt(e)||e===Y8?e:e===zUt?0:e>jUt?Y8:e<GUt?0:e>HUt&&e<sX?1+e:(e<0?n=X8(K8*e-.5):n=X8(K8*e+.5),t=e-n*UUt,r=n*WUt,VUt(t,r,n))}var YUt=XUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var KUt=YUt,gr=KUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZUt=iu;function qUt(e){return ZUt(e/2)}var JUt=qUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var QUt=JUt,tWt=QUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Z8=tWt;function eWt(e){return e>0?Z8(e-1):Z8(e+1)}var rWt=eWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nWt=rWt,T4=nWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iWt=Ed,qE;iWt===!0?qE=0:qE=1;var oWt=qE;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aWt=kd,sWt=Pd,lWt=oWt,JE=new sWt(1),uWt=new aWt(JE.buffer);function cWt(e,t){return JE[0]=e,uWt[lWt]=t>>>0,JE[0]}var fWt=cWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hWt=fWt,_0=hWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function dWt(e){return e|0}var pWt=dWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gWt=pWt,lX=gWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var q8=T4,vWt=S4,mWt=pn,g1=sr;function yWt(e,t){return t===mWt?g1:t===g1?0:t>0?q8(t)?e:0:q8(t)?vWt(g1,e):g1}var _Wt=yWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var bWt=I2,wWt=so,SWt=1072693247,v1=1e300,m1=1e-300;function TWt(e,t){var r,n;return n=wWt(e),r=n&bWt,r<=SWt?t<0?v1*v1:m1*m1:t>0?v1*v1:m1*m1}var kWt=TWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PWt=$e,J8=sr;function EWt(e,t){return e===-1?(e-e)/(e-e):e===1?1:PWt(e)<1==(t===J8)?0:J8}var CWt=EWt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function AWt(e){return e===0?.5999999999999946:.5999999999999946+e*(.4285714285785502+e*(.33333332981837743+e*(.272728123808534+e*(.23066074577556175+e*.20697501780033842))))}var xWt=AWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var MWt=so,y1=_0,Q8=y0,IWt=nf,LWt=xWt,OWt=1048575,tN=1048576,RWt=1072693248,DWt=536870912,NWt=524288,FWt=20,$Wt=9007199254740992,BWt=.9617966939259756,zWt=.9617967009544373,VWt=-7028461650952758e-24,UWt=[1,1.5],WWt=[0,.5849624872207642],jWt=[0,1350039202129749e-23];function GWt(e,t,r){var n,i,o,a,s,l,u,c,f,h,d,p,g,m,v,y,b,w,T,S,k,E;return S=0,r<tN&&(t*=$Wt,S-=53,r=MWt(t)),S+=(r>>FWt)-IWt|0,k=r&OWt|0,r=k|RWt|0,k<=235662?E=0:k<767610?E=1:(E=0,S+=1,r-=tN),t=Q8(t,r),c=UWt[E],w=t-c,T=1/(t+c),i=w*T,a=y1(i,0),n=(r>>1|DWt)+NWt,n+=E<<18,l=Q8(0,n),u=t-(l-c),s=T*(w-a*l-a*u),o=i*i,b=o*o*LWt(o),b+=s*(a+i),o=a*a,l=3+o+b,l=y1(l,0),u=b-(l-3-o),w=a*l,T=s*l+u*i,h=w+T,h=y1(h,0),d=T-(h-w),p=zWt*h,g=VWt*h+d*BWt+jWt[E],f=WWt[E],y=S,m=p+g+f+y,m=y1(m,0),v=g-(m-y-f-p),e[0]=m,e[1]=v,e}var HWt=GWt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function XWt(e){return e===0?.5:.5+e*(-.3333333333333333+e*.25)}var YWt=XWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var KWt=_0,ZWt=YWt,qWt=1.4426950408889634,JWt=1.4426950216293335,QWt=19259629911266175e-24;function tjt(e,t){var r,n,i,o,a,s;return i=t-1,o=i*i*ZWt(i),a=JWt*i,s=i*QWt-o*qWt,n=a+s,n=KWt(n,0),r=s-(n-a),e[0]=n,e[1]=r,e}var ejt=tjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rjt=.6931471805599453,njt=rjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ijt=1048575,ojt=ijt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ajt(e){return e===0?.16666666666666602:.16666666666666602+e*(-.0027777777777015593+e*(6613756321437934e-20+e*(-16533902205465252e-22+e*41381367970572385e-24)))}var sjt=ajt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var ljt=so,eN=y0,ujt=_0,cjt=lX,fjt=xd,hjt=njt,rN=nf,nN=I2,iN=ojt,djt=sjt,oN=1048576,pjt=1071644672,Pp=20,gjt=.6931471824645996,vjt=-1904654299957768e-24;function mjt(e,t,r){var n,i,o,a,s,l,u,c,f,h,d;return h=e&nN|0,d=(h>>Pp)-rN|0,f=0,h>pjt&&(f=e+(oN>>d+1)>>>0,d=((f&nN)>>Pp)-rN|0,n=(f&~(iN>>d))>>>0,o=eN(0,n),f=(f&iN|oN)>>Pp-d>>>0,e<0&&(f=-f),t-=o),o=r+t,o=ujt(o,0),s=o*gjt,l=(r-(o-t))*hjt+o*vjt,c=s+l,u=l-(c-s),o=c*c,i=c-o*djt(o),a=c*i/(i-2)-(u+c*u),c=1-(a-c),e=ljt(c),e=cjt(e),e+=f<<Pp>>>0,e>>Pp<=0?c=fjt(c,f):c=eN(c,e),c}var yjt=mjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var aN=be,sN=T4,lN=Ad,_jt=iu,uN=Rr,bjt=$e,nT=b4,wjt=_0,cN=lX,Sjt=pn,Tjt=sr,iT=I2,kjt=_Wt,Pjt=kWt,Ejt=CWt,Cjt=HWt,Ajt=ejt,xjt=yjt,Mjt=1072693247,Ijt=1105199104,Ljt=1139802112,fN=1083179008,Ojt=1072693248,Rjt=1083231232,Djt=3230714880>>>0,hN=31,tl=1e300,el=1e-300,Njt=8008566259537294e-32,Ya=[0,0],dN=[0,0];function uX(e,t){var r,n,i,o,a,s,l,u,c,f,h,d,p,g,m,v;if(aN(e)||aN(t))return NaN;if(nT.assign(t,Ya,1,0),s=Ya[0],l=Ya[1],l===0){if(t===0)return 1;if(t===1)return e;if(t===-1)return 1/e;if(t===.5)return uN(e);if(t===-.5)return 1/uN(e);if(t===2)return e*e;if(t===3)return e*e*e;if(t===4)return e*=e,e*e;if(lN(t))return Ejt(e,t)}if(nT.assign(e,Ya,1,0),o=Ya[0],a=Ya[1],a===0){if(o===0)return kjt(e,t);if(e===1)return 1;if(e===-1&&sN(t))return-1;if(lN(e))return e===Sjt?uX(-0,-t):t<0?0:Tjt}if(e<0&&_jt(t)===!1)return(e-e)/(e-e);if(i=bjt(e),r=o&iT|0,n=s&iT|0,u=o>>>hN|0,c=s>>>hN|0,u&&sN(t)?u=-1:u=1,n>Ijt){if(n>Ljt)return Pjt(e,t);if(r<Mjt)return c===1?u*tl*tl:u*el*el;if(r>Ojt)return c===0?u*tl*tl:u*el*el;p=Ajt(dN,i)}else p=Cjt(dN,i,r);if(f=wjt(t,0),d=(t-f)*p[0]+t*p[1],h=f*p[0],g=d+h,nT.assign(g,Ya,1,0),m=cN(Ya[0]),v=cN(Ya[1]),m>=fN){if((m-fN|v)!==0||d+Njt>g-h)return u*tl*tl}else if((m&iT)>=Rjt&&((m-Djt|v)!==0||d<=g-h))return u*el*el;return g=xjt(m,h,d),u*g}var Fjt=uX;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $jt=Fjt,Dr=$jt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Bjt=2.718281828459045,Md=Bjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zjt=2220446049250313e-31,Rs=zjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Vjt(e){var t,r,n;return e===0?1/0:(e<0?t=-e:t=e,t<=1?(r=709811.662581658+e*(679979.8474157227+e*(293136.7857211597+e*(74887.54032914672+e*(12555.290582413863+e*(1443.4299244417066+e*(115.24194596137347+e*(6.309239205732627+e*(.22668404630224365+e*(.004826466289237662+e*4624429436045379e-20))))))))),n=0+e*(362880+e*(1026576+e*(1172700+e*(723680+e*(269325+e*(63273+e*(9450+e*(870+e*(45+e*1)))))))))):(e=1/e,r=4624429436045379e-20+e*(.004826466289237662+e*(.22668404630224365+e*(6.309239205732627+e*(115.24194596137347+e*(1443.4299244417066+e*(12555.290582413863+e*(74887.54032914672+e*(293136.7857211597+e*(679979.8474157227+e*709811.662581658))))))))),n=1+e*(45+e*(870+e*(9450+e*(63273+e*(269325+e*(723680+e*(1172700+e*(1026576+e*(362880+e*0)))))))))),r/n)}var Ujt=Vjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var pN=be,Wjt=Ei,jjt=Rr,Gjt=$e,Hjt=gr,oT=Dr,Xjt=Md,aT=Rs,sT=Ujt,lT=10.900511;function Yjt(e,t){var r,n,i,o,a,s,l;return pN(e)||pN(t)?NaN:e<0||t<0?NaN:t===1?1/e:e===1?1/t:(l=e+t,l<aT?(a=l/e,a/=t,a):l===e&&t<aT?1/t:l===t&&e<aT?1/e:(e<t&&(s=t,t=e,e=s),n=e+lT-.5,i=t+lT-.5,o=l+lT-.5,a=sT(e)*(sT(t)/sT(l)),r=e-.5-t,Gjt(t*r)<o*100&&e>100?a*=Hjt(r*Wjt(-t/o)):a*=oT(n/o,r),o>1e10?a*=oT(n/o*(i/o),t):a*=oT(n*i/(o*o),t),a*=jjt(Xjt/i),a))}var Kjt=Yjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Zjt=Kjt,cX=Zjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qjt=sr;function Jjt(e){return e===0&&1/e===qjt}var Qjt=Jjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tGt=Qjt,eGt=tGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gN=eGt,uT=be,rGt=pn,_1=sr;function nGt(e,t){var r,n,i,o;if(r=arguments.length,r===2)return uT(e)||uT(t)?NaN:e===_1||t===_1?_1:e===t&&e===0?gN(e)?e:t:e>t?e:t;for(n=rGt,o=0;o<r;o++){if(i=arguments[o],uT(i)||i===_1)return i;(i>n||i===n&&i===0&&gN(i))&&(n=i)}return n}var iGt=nGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oGt=iGt,af=oGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aGt=pn;function sGt(e){return e===0&&1/e===aGt}var lGt=sGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uGt=lGt,fX=uGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vN=fX,cT=be,b1=pn,cGt=sr;function fGt(e,t){var r,n,i,o;if(r=arguments.length,r===2)return cT(e)||cT(t)?NaN:e===b1||t===b1?b1:e===t&&e===0?vN(e)?e:t:e<t?e:t;for(n=cGt,o=0;o<r;o++){if(i=arguments[o],cT(i)||i===b1)return i;(i<n||i===n&&i===0&&vN(i))&&(n=i)}return n}var hGt=fGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dGt=hGt,au=dGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pGt=17976931348623157e292,Id=pGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gGt=2147483647,vGt=gGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mGt=1.5707963267948966,k4=mGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yGt=3.141592653589793,su=yGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _Gt(e){return e===0?.0416666666666666:.0416666666666666+e*(-.001388888888887411+e*2480158728947673e-20)}var bGt=_Gt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function wGt(e){return e===0?-27557314351390663e-23:-27557314351390663e-23+e*(2087572321298175e-24+e*-11359647557788195e-27)}var SGt=wGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_cos.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var TGt=bGt,kGt=SGt;function PGt(e,t){var r,n,i,o;return o=e*e,i=o*o,n=o*TGt(o),n+=i*i*kGt(o),r=.5*o,i=1-r,i+(1-i-r+(o*n-e*t))}var EGt=PGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var CGt=EGt,hX=CGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_sin.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var mN=-.16666666666666632,AGt=.00833333333332249,xGt=-.0001984126982985795,MGt=27557313707070068e-22,IGt=-25050760253406863e-24,LGt=158969099521155e-24;function OGt(e,t){var r,n,i,o;return o=e*e,i=o*o,r=AGt+o*(xGt+o*MGt)+o*i*(IGt+o*LGt),n=o*e,t===0?e+n*(mN+o*r):e-(o*(.5*t-n*r)-t-n*mN)}var RGt=OGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var DGt=RGt,dX=DGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NGt=Ed,QE;NGt===!0?QE=0:QE=1;var FGt=QE;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $Gt=kd,BGt=Pd,zGt=FGt,pX=new BGt(1),VGt=new $Gt(pX.buffer);function UGt(e){return pX[0]=e,VGt[zGt]}var WGt=UGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jGt=WGt,GGt=jGt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function HGt(e,t){var r,n;for(r=[],n=0;n<t;n++)r.push(e);return r}var XGt=HGt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var YGt=XGt,KGt=YGt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZGt=KGt;function qGt(e){return ZGt(0,e)}var JGt=qGt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var QGt=JGt,tHt=QGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_rem_pio2.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var eHt=Pi,w1=xd,L2=tHt,gX=[10680707,7228996,1387004,2578385,16069853,12639074,9804092,4427841,16666979,11263675,12935607,2387514,4345298,14681673,3074569,13734428,16653803,1880361,10960616,8533493,3062596,8710556,7349940,6258241,3772886,3769171,3798172,8675211,12450088,3874808,9961438,366607,15675153,9132554,7151469,3571407,2607881,12013382,4155038,6285869,7677882,13102053,15825725,473591,9065106,15363067,6271263,9264392,5636912,4652155,7056368,13614112,10155062,1944035,9527646,15080200,6658437,6231200,6832269,16767104,5075751,3212806,1398474,7579849,6349435,12618859],rHt=[1.570796251296997,7549789415861596e-23,5390302529957765e-30,3282003415807913e-37,1270655753080676e-44,12293330898111133e-52,27337005381646456e-60,21674168387780482e-67],fT=16777216,hT=5960464477539063e-23,S1=L2(20),yN=L2(20),T1=L2(20),on=L2(20);function vX(e,t,r,n,i,o,a,s,l){var u,c,f,h,d,p,g,m,v;for(h=o,v=n[r],m=r,d=0;m>0;d++)c=hT*v|0,on[d]=v-fT*c|0,v=n[m-1]+c,m-=1;if(v=w1(v,i),v-=8*eHt(v*.125),g=v|0,v-=g,f=0,i>0?(d=on[r-1]>>24-i,g+=d,on[r-1]-=d<<24-i,f=on[r-1]>>23-i):i===0?f=on[r-1]>>23:v>=.5&&(f=2),f>0){for(g+=1,u=0,d=0;d<r;d++)m=on[d],u===0?m!==0&&(u=1,on[d]=16777216-m):on[d]=16777215-m;if(i>0)switch(i){case 1:on[r-1]&=8388607;break;case 2:on[r-1]&=4194303;break}f===2&&(v=1-v,u!==0&&(v-=w1(1,i)))}if(v===0){for(m=0,d=r-1;d>=o;d--)m|=on[d];if(m===0){for(p=1;on[o-p]===0;p++);for(d=r+1;d<=r+p;d++){for(l[s+d]=gX[a+d],c=0,m=0;m<=s;m++)c+=e[m]*l[s+(d-m)];n[d]=c}return r+=p,vX(e,t,r,n,i,o,a,s,l)}}if(v===0)for(r-=1,i-=24;on[r]===0;)r-=1,i-=24;else v=w1(v,-i),v>=fT?(c=hT*v|0,on[r]=v-fT*c|0,r+=1,i+=24,on[r]=c):on[r]=v|0;for(c=w1(1,i),d=r;d>=0;d--)n[d]=c*on[d],c*=hT;for(d=r;d>=0;d--){for(c=0,p=0;p<=h&&p<=r-d;p++)c+=rHt[p]*n[d+p];T1[r-d]=c}for(c=0,d=r;d>=0;d--)c+=T1[d];for(f===0?t[0]=c:t[0]=-c,c=T1[0]-c,d=1;d<=r;d++)c+=T1[d];return f===0?t[1]=c:t[1]=-c,g&7}function nHt(e,t,r,n){var i,o,a,s,l,u,c,f,h;for(o=4,s=n-1,a=(r-3)/24|0,a<0&&(a=0),u=r-24*(a+1),f=a-s,h=s+o,c=0;c<=h;c++)f<0?S1[c]=0:S1[c]=gX[f],f+=1;for(c=0;c<=o;c++){for(i=0,f=0;f<=s;f++)i+=e[f]*S1[s+(c-f)];yN[c]=i}return l=o,vX(e,t,l,yN,u,o,a,s,S1)}var iHt=nHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oHt=Math.round,aHt=oHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sHt=aHt,O2=sHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_rem_pio2.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var lHt=O2,_N=so,uHt=.6366197723675814,cHt=1.5707963267341256,fHt=6077100506506192e-26,hHt=6077100506303966e-26,dHt=20222662487959506e-37,pHt=20222662487111665e-37,gHt=84784276603689e-45,bN=2047;function vHt(e,t,r){var n,i,o,a,s,l,u;return i=lHt(e*uHt),a=e-i*cHt,s=i*fHt,u=t>>20|0,r[0]=a-s,n=_N(r[0]),l=u-(n>>20&bN),l>16&&(o=a,s=i*hHt,a=o-s,s=i*dHt-(o-a-s),r[0]=a-s,n=_N(r[0]),l=u-(n>>20&bN),l>49&&(o=a,s=i*pHt,a=o-s,s=i*gHt-(o-a-s),r[0]=a-s)),r[1]=a-r[0]-s,i}var mHt=vHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_rem_pio2.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
*
* Optimized by Bruce D. Evans.
* ```
*/var yHt=so,_Ht=GGt,bHt=w4,wHt=iHt,k1=mHt,SHt=0,THt=16777216,rl=1.5707963267341256,nc=6077100506506192e-26,P1=2*nc,E1=3*nc,C1=4*nc,kHt=2147483647,PHt=2146435072,EHt=1048575,CHt=598523,AHt=1072243195,xHt=1073928572,MHt=1074752122,IHt=1074977148,LHt=1075183036,OHt=1075388923,RHt=1075594811,DHt=1094263291,Ep=[0,0,0],Cp=[0,0];function NHt(e,t){var r,n,i,o,a,s,l,u;if(i=yHt(e),o=i&kHt|0,o<=AHt)return t[0]=e,t[1]=0,0;if(o<=MHt)return(o&EHt)===CHt?k1(e,o,t):o<=xHt?e>0?(u=e-rl,t[0]=u-nc,t[1]=u-t[0]-nc,1):(u=e+rl,t[0]=u+nc,t[1]=u-t[0]+nc,-1):e>0?(u=e-2*rl,t[0]=u-P1,t[1]=u-t[0]-P1,2):(u=e+2*rl,t[0]=u+P1,t[1]=u-t[0]+P1,-2);if(o<=RHt)return o<=LHt?o===IHt?k1(e,o,t):e>0?(u=e-3*rl,t[0]=u-E1,t[1]=u-t[0]-E1,3):(u=e+3*rl,t[0]=u+E1,t[1]=u-t[0]+E1,-3):o===OHt?k1(e,o,t):e>0?(u=e-4*rl,t[0]=u-C1,t[1]=u-t[0]-C1,4):(u=e+4*rl,t[0]=u+C1,t[1]=u-t[0]+C1,-4);if(o<DHt)return k1(e,o,t);if(o>=PHt)return t[0]=NaN,t[1]=NaN,0;for(r=_Ht(e),n=(o>>20)-1046,u=bHt(o-(n<<20|0),r),s=0;s<2;s++)Ep[s]=u|0,u=(u-Ep[s])*THt;for(Ep[2]=u,a=3;Ep[a-1]===SHt;)a-=1;return l=wHt(Ep,Cp,n,a),e<0?(t[0]=-Cp[0],t[1]=-Cp[1],-l):(t[0]=Cp[0],t[1]=Cp[1],l)}var FHt=NHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $Ht=FHt,mX=$Ht;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_sin.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var BHt=so,wN=hX,dT=dX,zHt=mX,VHt=2147483647,UHt=2146435072,WHt=1072243195,jHt=1045430272,Ka=[0,0];function GHt(e){var t,r;if(t=BHt(e),t&=VHt,t<=WHt)return t<jHt?e:dT(e,0);if(t>=UHt)return NaN;switch(r=zHt(e,Ka),r&3){case 0:return dT(Ka[0],Ka[1]);case 1:return wN(Ka[0],Ka[1]);case 2:return-dT(Ka[0],Ka[1]);default:return-wN(Ka[0],Ka[1])}}var HHt=GHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XHt=HHt,b0=XHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var YHt=2.5066282746310007,R2=YHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function KHt(e){return e===0?.08333333333334822:.08333333333334822+e*(.0034722222160545866+e*(-.0026813261780578124+e*(-.00022954996161337813+e*.0007873113957930937)))}var ZHt=KHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var qHt=R2,SN=Dr,JHt=gr,QHt=ZHt,tXt=143.01608;function eXt(e){var t,r,n;return t=1/e,t=1+t*QHt(t),r=JHt(e),e>tXt?(n=SN(e,.5*e-.25),r=n*(n/r)):r=SN(e,e-.5)/r,qHt*r*t}var rXt=eXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nXt=.5772156649015329,iXt=nXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var oXt=iXt;function aXt(e,t){return t/((1+oXt*e)*e)}var sXt=aXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function lXt(e){var t,r,n;return e===0?1:(e<0?t=-e:t=e,t<=1?(r=1+e*(.4942148268014971+e*(.20744822764843598+e*(.04763678004571372+e*(.010421379756176158+e*(.0011913514700658638+e*(.00016011952247675185+e*0)))))),n=1+e*(.0714304917030273+e*(-.23459179571824335+e*(.035823639860549865+e*(.011813978522206043+e*(-.004456419138517973+e*(.0005396055804933034+e*-23158187332412014e-21))))))):(e=1/e,r=0+e*(.00016011952247675185+e*(.0011913514700658638+e*(.010421379756176158+e*(.04763678004571372+e*(.20744822764843598+e*(.4942148268014971+e*1)))))),n=-23158187332412014e-21+e*(.0005396055804933034+e*(-.004456419138517973+e*(.011813978522206043+e*(.035823639860549865+e*(-.23459179571824335+e*(.0714304917030273+e*1))))))),r/n)}var uXt=lXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, long comment, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var cXt=be,fXt=iu,hXt=fX,TN=$e,dXt=Pi,pXt=b0,kN=sr,PN=pn,EN=su,CN=rXt,AN=sXt,gXt=uXt;function vXt(e){var t,r,n,i;if(fXt(e)&&e<0||e===PN||cXt(e))return NaN;if(e===0)return hXt(e)?PN:kN;if(e>171.61447887182297)return kN;if(e<-170.5674972726612)return 0;if(r=TN(e),r>33)return e>=0?CN(e):(n=dXt(r),(n&1)===0?t=-1:t=1,i=r-n,i>.5&&(n+=1,i=r-n),i=r*pXt(EN*i),t*EN/(TN(i)*CN(r)));for(i=1;e>=3;)e-=1,i*=e;for(;e<0;){if(e>-1e-9)return AN(e,i);i/=e,e+=1}for(;e<2;){if(e<1e-9)return AN(e,i);i/=e,e+=1}return e===2?i:(e-=2,i*gXt(e))}var mXt=vXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yXt=mXt,Fa=yXt;const _Xt=[1,1,2,6,24,120,720,5040,40320,362880,3628800,39916800,479001600,6227020800,87178291200,1307674368e3,20922789888e3,355687428096e3,6402373705728e3,121645100408832e3,243290200817664e4,5109094217170944e4,11240007277776077e5,2585201673888498e7,6204484017332394e8,15511210043330986e9,40329146112660565e10,10888869450418352e12,30488834461171387e13,8841761993739702e15,26525285981219107e16,8222838654177922e18,2631308369336935e20,8683317618811886e21,29523279903960416e22,10333147966386145e24,37199332678990125e25,13763753091226346e27,5230226174666011e29,20397882081197444e30,8159152832478977e32,3345252661316381e34,140500611775288e37,6041526306337383e37,2658271574788449e39,11962222086548019e40,5502622159812089e42,25862324151116818e43,12413915592536073e45,6082818640342675e47,30414093201713376e48,15511187532873822e50,8065817517094388e52,42748832840600255e53,2308436973392414e56,12696403353658276e57,7109985878048635e59,40526919504877214e60,23505613312828785e62,13868311854568984e64,832098711274139e67,5075802138772248e68,3146997326038794e70,198260831540444e73,12688693218588417e73,8247650592082472e75,5443449390774431e77,3647111091818868e79,24800355424368305e80,1711224524281413e83,11978571669969892e84,8504785885678623e86,61234458376886085e87,44701154615126844e89,3307885441519386e92,248091408113954e95,18854947016660504e95,14518309202828587e97,11324281178206297e99,8946182130782976e101,7156945704626381e103,5797126020747368e105,4753643337012842e107,3945523969720659e109,3314240134565353e111,281710411438055e114,24227095383672734e114,2107757298379528e117,18548264225739844e118,1650795516090846e121,14857159644817615e122,1352001527678403e125,12438414054641308e126,11567725070816416e128,1087366156656743e131,1032997848823906e133,9916779348709496e134,9619275968248212e136,9426890448883248e138,9332621544394415e140,9332621544394415e142,942594775983836e145,9614466715035127e146,990290071648618e149,10299016745145628e150,1081396758240291e153,11462805637347084e154,1226520203196138e157,1324641819451829e159,14438595832024937e160,1588245541522743e163,17629525510902446e164,1974506857221074e167,22311927486598138e168,25435597334721877e170,2925093693493016e173,3393108684451898e175,3969937160808721e177,4684525849754291e179,5574585761207606e181,6689502913449127e183,8094298525273444e185,9875044200833601e187,1214630436702533e190,1506141741511141e192,1882677176888926e194,2372173242880047e196,30126600184576594e197,3856204823625804e200,4974504222477287e202,6466855489220474e204,847158069087882e207,11182486511960043e208,14872707060906857e210,19929427461615188e212,26904727073180504e214,3659042881952549e217,5012888748274992e219,6917786472619489e221,9615723196941089e223,13462012475717526e225,1898143759076171e228,2695364137888163e230,3854370717180073e232,55502938327393044e233,8047926057471992e236,11749972043909107e238,1727245890454639e241,25563239178728654e242,380892263763057e246,5713383956445855e247,862720977423324e250,13113358856834524e251,20063439050956823e253,30897696138473508e255,4789142901463394e258,7471062926282894e260,11729568794264145e262,1853271869493735e265,29467022724950384e266,47147236359920616e268,7590705053947219e271,12296942187394494e273,20044015765453026e275,3287218585534296e278,5423910666131589e280,9003691705778438e282,1503616514864999e285,25260757449731984e286,4269068009004705e289,7257415615307999e291];/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bXt=be,wXt=iu,SXt=Fa,TXt=sr,kXt=_Xt,PXt=170;function EXt(e){return bXt(e)?NaN:wXt(e)?e<0?NaN:e<=PXt?kXt[e]:TXt:SXt(e+1)}var CXt=EXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var AXt=CXt,yX=AXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function xXt(e){var t,r,n;return e===0?1/0:(e<0?t=-e:t=e,t<=1?(r=3847467039331777e-5+e*(3685766504351951e-5+e*(1588920245372942e-5+e*(4059208354298835e-6+e*(6805476611834733e-7+e*(7823975500312005e-8+e*(6246580776401795e-9+e*(341986.3488721347+e*(12287.194511824551+e*(261.61404416416684+e*2.5066282746310007))))))))),n=0+e*(362880+e*(1026576+e*(1172700+e*(723680+e*(269325+e*(63273+e*(9450+e*(870+e*(45+e*1)))))))))):(e=1/e,r=2.5066282746310007+e*(261.61404416416684+e*(12287.194511824551+e*(341986.3488721347+e*(6246580776401795e-9+e*(7823975500312005e-8+e*(6805476611834733e-7+e*(4059208354298835e-6+e*(1588920245372942e-5+e*(3685766504351951e-5+e*3847467039331777e-5))))))))),n=1+e*(45+e*(870+e*(9450+e*(63273+e*(269325+e*(723680+e*(1172700+e*(1026576+e*(362880+e*0)))))))))),r/n)}var MXt=xXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/lanczos.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var IXt=MXt,LXt=IXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var OXt=LXt,RXt=OXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var DXt=10.900511,w0=DXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var xN=RXt,NXt=Fa,MN=Ei,IN=$e,LN=gr,ON=Dr,FXt=Rs,$Xt=Md,BXt=w0,RN=170,zXt=4269068009004705e289;function _X(e,t){var r,n,i;return e<FXt?t>RN?(n=_X(t,RN-t),n*=e,n*=zXt,1/n):1/(e*NXt(e+t)):(i=e+BXt-.5,e+t===e?IN(t)<10?r=LN((.5-e)*MN(t/i)):r=1:(IN(t)<10?r=LN((.5-e)*MN(t/i)):r=ON(i/(i+t),e-.5),r*=xN(e)/xN(e+t)),r*=ON($Xt/(i+t),t),r)}var VXt=_X;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var UXt=$e,DN=Pi,NN=Fa,FN=yX,WXt=VXt,$N=170;function jXt(e,t){var r,n,i;if(e<=0||e+t<=0)return NN(e)/NN(e+t);if(n=DN(t),n===t){if(i=DN(e),i===e&&e<=$N&&e+t<=$N)return FN(i-1)/FN(n+i-1);if(UXt(t)<20){if(t===0)return 1;if(t<0){for(e-=1,r=e,t+=1;t!==0;)e-=1,r*=e,t+=1;return r}for(r=1/e,t-=1;t!==0;)e+=1,r/=e,t-=1;return r}}return WXt(e,t)}var GXt=jXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var HXt=GXt,P4=HXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function XXt(e){return e===0?.3999999999940942:.3999999999940942+e*(.22222198432149784+e*.15313837699209373)}var YXt=XXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function KXt(e){return e===0?.6666666666666735:.6666666666666735+e*(.2857142874366239+e*(.1818357216161805+e*.14798198605116586))}var ZXt=KXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_log.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var BN=so,qXt=y0,JXt=be,QXt=nf,tYt=pn,eYt=YXt,rYt=ZXt,A1=.6931471803691238,x1=19082149292705877e-26,nYt=0x40000000000000,iYt=.3333333333333333,zN=1048575,oYt=2146435072,aYt=1048576,sYt=1072693248;function lYt(e){var t,r,n,i,o,a,s,l,u,c,f,h;return e===0?tYt:JXt(e)||e<0?NaN:(r=BN(e),o=0,r<aYt&&(o-=54,e*=nYt,r=BN(e)),r>=oYt?e+e:(o+=(r>>20)-QXt|0,r&=zN,l=r+614244&1048576|0,e=qXt(e,r|l^sYt),o+=l>>20|0,s=e-1,(zN&2+r)<3?s===0?o===0?0:o*A1+o*x1:(a=s*s*(.5-iYt*s),o===0?s-a:o*A1-(a-o*x1-s)):(c=s/(2+s),h=c*c,l=r-398458|0,f=h*h,u=440401-r|0,i=f*eYt(f),n=h*rYt(f),l|=u,a=n+i,l>0?(t=.5*s*s,o===0?s-(t-c*(t+a)):o*A1-(t-(c*(t+a)+o*x1)-s)):o===0?s-c*(s-a):o*A1-(c*(s-a)-o*x1-s))))}var uYt=lYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cYt=uYt,Xe=cYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_cos.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var fYt=so,pT=hX,VN=dX,hYt=mX,Za=[0,0],dYt=2147483647,pYt=1072243195,gYt=1044381696,vYt=2146435072;function mYt(e){var t,r;if(t=fYt(e),t&=dYt,t<=pYt)return t<gYt?1:pT(e,0);if(t>=vYt)return NaN;switch(r=hYt(e,Za),r&3){case 0:return pT(Za[0],Za[1]);case 1:return-VN(Za[0],Za[1]);case 2:return-pT(Za[0],Za[1]);default:return VN(Za[0],Za[1])}}var yYt=mYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _Yt=yYt,E4=_Yt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bYt=be,wYt=Ad,UN=E4,gT=b0,SYt=$e,Ap=S4,xp=su;function TYt(e){var t,r;return bYt(e)?NaN:wYt(e)?NaN:(r=e%2,t=SYt(r),t===0||t===1?Ap(0,r):t<.25?gT(xp*r):t<.75?(t=.5-t,Ap(UN(xp*t),r)):t<1.25?(r=Ap(1,r)-r,gT(xp*r)):t<1.75?(t-=1.5,-Ap(UN(xp*t),r)):(r-=Ap(2,r),gT(xp*r)))}var kYt=TYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PYt=kYt,EYt=PYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function CYt(e){return e===0?.06735230105312927:.06735230105312927+e*(.007385550860814029+e*(.0011927076318336207+e*(.00022086279071390839+e*25214456545125733e-21)))}var AYt=CYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function xYt(e){return e===0?.020580808432516733:.020580808432516733+e*(.0028905138367341563+e*(.0005100697921535113+e*(.00010801156724758394+e*44864094961891516e-21)))}var MYt=xYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function IYt(e){return e===0?1.3920053346762105:1.3920053346762105+e*(.7219355475671381+e*(.17193386563280308+e*(.01864591917156529+e*(.0007779424963818936+e*7326684307446256e-21))))}var LYt=IYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function OYt(e){return e===0?.21498241596060885:.21498241596060885+e*(.325778796408931+e*(.14635047265246445+e*(.02664227030336386+e*(.0018402845140733772+e*3194753265841009e-20))))}var RYt=OYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function DYt(e){return e===0?-.032788541075985965:-.032788541075985965+e*(.006100538702462913+e*(-.0014034646998923284+e*.00031563207090362595))}var NYt=DYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function FYt(e){return e===0?.01797067508118204:.01797067508118204+e*(-.0036845201678113826+e*(.000881081882437654+e*-.00031275416837512086))}var $Yt=FYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function BYt(e){return e===0?-.010314224129834144:-.010314224129834144+e*(.0022596478090061247+e*(-.0005385953053567405+e*.0003355291926355191))}var zYt=BYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function VYt(e){return e===0?.6328270640250934:.6328270640250934+e*(1.4549225013723477+e*(.9777175279633727+e*(.22896372806469245+e*.013381091853678766)))}var UYt=VYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function WYt(e){return e===0?2.4559779371304113:2.4559779371304113+e*(2.128489763798934+e*(.7692851504566728+e*(.10422264559336913+e*.003217092422824239)))}var jYt=WYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function GYt(e){return e===0?.08333333333333297:.08333333333333297+e*(-.0027777777772877554+e*(.0007936505586430196+e*(-.00059518755745034+e*(.0008363399189962821+e*-.0016309293409657527))))}var HYt=GYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_lgamma_r.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var XYt=be,YYt=Ad,KYt=$e,Vf=Xe,ZYt=_4,qYt=EYt,JYt=su,vT=sr,QYt=AYt,tKt=MYt,eKt=LYt,rKt=RYt,nKt=NYt,iKt=$Yt,oKt=zYt,aKt=UYt,sKt=jYt,lKt=HYt,uKt=.07721566490153287,cKt=.3224670334241136,fKt=1,hKt=-.07721566490153287,dKt=.48383612272381005,pKt=-.1475877229945939,gKt=.06462494023913339,vKt=-.07721566490153287,mKt=1,yKt=.4189385332046727,M1=1.4616321449683622,_Kt=4503599627370496,bKt=0x400000000000000,wKt=8470329472543003e-37,WN=1.4616321449683622,SKt=-.12148629053584961,TKt=-3638676997039505e-33;function kKt(e){var t,r,n,i,o,a,s,l,u,c,f,h,d;if(XYt(e)||YYt(e))return e;if(e===0)return vT;if(e<0?(t=!0,e=-e):t=!1,e<wKt)return-Vf(e);if(t){if(e>=_Kt||(u=qYt(e),u===0))return vT;r=Vf(JYt/KYt(u*e))}if(e===1||e===2)return 0;if(e<2)switch(e<=.9?(d=-Vf(e),e>=M1-1+.27?(f=1-e,n=0):e>=M1-1-.27?(f=e-(WN-1),n=1):(f=e,n=2)):(d=0,e>=M1+.27?(f=2-e,n=0):e>=M1-.27?(f=e-WN,n=1):(f=e-1,n=2)),n){case 0:h=f*f,a=uKt+h*QYt(h),o=h*(cKt+h*tKt(h)),s=f*a+o,d+=s-.5*f;break;case 1:h=f*f,c=h*f,a=dKt+c*nKt(c),o=pKt+c*iKt(c),i=gKt+c*oKt(c),s=h*a-(TKt-c*(o+f*i)),d+=SKt+s;break;case 2:a=f*(vKt+f*aKt(f)),o=mKt+f*sKt(f),d+=-.5*f+a/o;break}else if(e<8)switch(n=ZYt(e),f=e-n,s=f*(hKt+f*rKt(f)),l=fKt+f*eKt(f),d=.5*f+s/l,h=1,n){case 7:h*=f+6;case 6:h*=f+5;case 5:h*=f+4;case 4:h*=f+3;case 3:h*=f+2,d+=Vf(h)}else e<bKt?(u=Vf(e),h=1/e,f=h*h,c=yKt+h*lKt(f),d=(e-.5)*(u-1)+c):d=e*(Vf(e)-1);return t&&(d=r-d),d}var PKt=kKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var EKt=PKt,Ld=EKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var CKt=14901161193847656e-24,AKt=CKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xKt=709.782712893384,sf=xKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var MKt=gr;function IKt(e,t){var r,n,i,o;if(i=MKt(-t),n=i,n!==0)for(r=n,o=1;o<e;++o)r/=o,r*=t,n+=r;return n}var LKt=IKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function OKt(e){return e===0?-.3250421072470015:-.3250421072470015+e*(-.02848174957559851+e*(-.005770270296489442+e*-23763016656650163e-21))}var RKt=OKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function DKt(e){return e===0?.39791722395915535:.39791722395915535+e*(.0650222499887673+e*(.005081306281875766+e*(.00013249473800432164+e*-3960228278775368e-21)))}var NKt=DKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function FKt(e){return e===0?.41485611868374833:.41485611868374833+e*(-.3722078760357013+e*(.31834661990116175+e*(-.11089469428239668+e*(.035478304325618236+e*-.002166375594868791))))}var $Kt=FKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function BKt(e){return e===0?.10642088040084423:.10642088040084423+e*(.540397917702171+e*(.07182865441419627+e*(.12617121980876164+e*(.01363708391202905+e*.011984499846799107))))}var zKt=BKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function VKt(e){return e===0?-.6938585727071818:-.6938585727071818+e*(-10.558626225323291+e*(-62.375332450326006+e*(-162.39666946257347+e*(-184.60509290671104+e*(-81.2874355063066+e*-9.814329344169145)))))}var UKt=VKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function WKt(e){return e===0?19.651271667439257:19.651271667439257+e*(137.65775414351904+e*(434.56587747522923+e*(645.3872717332679+e*(429.00814002756783+e*(108.63500554177944+e*(6.570249770319282+e*-.0604244152148581))))))}var jKt=WKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function GKt(e){return e===0?-.799283237680523:-.799283237680523+e*(-17.757954917754752+e*(-160.63638485582192+e*(-637.5664433683896+e*(-1025.0951316110772+e*-483.5191916086514))))}var HKt=GKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function XKt(e){return e===0?30.33806074348246:30.33806074348246+e*(325.7925129965739+e*(1536.729586084437+e*(3199.8582195085955+e*(2553.0504064331644+e*(474.52854120695537+e*-22.44095244658582)))))}var YKt=XKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_erf.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var KKt=be,jN=gr,ZKt=_0,qKt=sr,JKt=pn,QKt=RKt,tZt=NKt,eZt=$Kt,rZt=zKt,nZt=UKt,iZt=jKt,oZt=HKt,aZt=YKt,I1=1e-300,sZt=13877787807814457e-33,GN=.8450629115104675,lZt=.12837916709551256,uZt=1,cZt=-.0023621185607526594,fZt=1,hZt=-.009864944034847148,dZt=1,pZt=-.0098649429247001,gZt=1;function vZt(e){var t,r,n,i,o,a,s,l;if(KKt(e))return NaN;if(e===qKt)return 0;if(e===JKt)return 2;if(e===0)return 1;if(e<0?(t=!0,r=-e):(t=!1,r=e),r<.84375)return r<sZt?1-e:(n=e*e,i=lZt+n*QKt(n),o=uZt+n*tZt(n),a=i/o,e<.25?1-(e+e*a):(i=e*a,i+=e-.5,.5-i));if(r<1.25)return o=r-1,s=cZt+o*eZt(o),l=fZt+o*rZt(o),t?1+GN+s/l:1-GN-s/l;if(r<28){if(o=1/(r*r),r<2.857142857142857)i=hZt+o*nZt(o),o=dZt+o*iZt(o);else{if(e<-6)return 2-I1;i=pZt+o*oZt(o),o=gZt+o*aZt(o)}return n=ZKt(r,0),i=jN(-(n*n)-.5625)*jN((n-r)*(n+r)+i/o),t?2-i/r:i/r}return t?2-I1:I1*I1}var mZt=vZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yZt=mZt,bX=yZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var _Zt=bX,HN=Rr,bZt=gr,wZt=su;function SZt(e,t){var r,n,i,o,a;if(o=_Zt(HN(t)),o!==0&&e>1){for(n=bZt(-t)/HN(wZt*t),n*=t,r=.5,n/=r,i=n,a=2;a<e;++a)n/=a-r,n*=t,i+=n;o+=i}return o}var TZt=SZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kZt=-708.3964185322641,Od=kZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Uf=gr,L1=Dr,PZt=Xe,XN=sf,YN=Od;function EZt(e,t){var r,n;return n=e*PZt(t),t>=1?n<XN&&-t>YN?r=L1(t,e)*Uf(-t):e>=1?r=L1(t/Uf(t/e),e):r=Uf(n-t):n>YN?r=L1(t,e)*Uf(-t):t/e<XN?r=L1(t/Uf(t/e),e):r=Uf(n-t),r}var CZt=EZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var AZt=6.283185307179586,wX=AZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function xZt(e){return e===0?-.3333333333333333:-.3333333333333333+e*(.08333333333333333+e*(-.014814814814814815+e*(.0011574074074074073+e*(.0003527336860670194+e*(-.0001787551440329218+e*(3919263178522438e-20+e*(-21854485106799924e-22+e*(-185406221071516e-20+e*(8296711340953087e-22+e*(-17665952736826078e-23+e*(6707853543401498e-24+e*(10261809784240309e-24+e*(-4382036018453353e-24+e*914769958223679e-24)))))))))))))}var MZt=xZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function IZt(e){return e===0?-.001851851851851852:-.001851851851851852+e*(-.003472222222222222+e*(.0026455026455026454+e*(-.0009902263374485596+e*(.00020576131687242798+e*(-4018775720164609e-22+e*(-18098550334489977e-21+e*(764916091608111e-20+e*(-16120900894563446e-22+e*(4647127802807434e-24+e*(1378633446915721e-22+e*(-5752545603517705e-23+e*11951628599778148e-24)))))))))))}var LZt=IZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function OZt(e){return e===0?.004133597883597883:.004133597883597883+e*(-.0026813271604938273+e*(.0007716049382716049+e*(20093878600823047e-22+e*(-.00010736653226365161+e*(52923448829120125e-21+e*(-12760635188618728e-21+e*(3423578734096138e-23+e*(13721957309062932e-22+e*(-6298992138380055e-22+e*14280614206064242e-23)))))))))}var RZt=OZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function DZt(e){return e===0?.0006494341563786008:.0006494341563786008+e*(.00022947209362139917+e*(-.0004691894943952557+e*(.00026772063206283885+e*(-7561801671883977e-20+e*(-2396505113867297e-22+e*(11082654115347302e-21+e*(-56749528269915965e-22+e*14230900732435883e-22)))))))}var NZt=DZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function FZt(e){return e===0?-.0008618882909167117:-.0008618882909167117+e*(.0007840392217200666+e*(-.0002990724803031902+e*(-14638452578843418e-22+e*(6641498215465122e-20+e*(-3968365047179435e-20+e*11375726970678419e-21)))))}var $Zt=FZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function BZt(e){return e===0?-.00033679855336635813:-.00033679855336635813+e*(-6972813758365858e-20+e*(.0002772753244959392+e*(-.00019932570516188847+e*(6797780477937208e-20+e*(1419062920643967e-22+e*(-13594048189768693e-21+e*(8018470256334202e-21+e*-2291481176508095e-21)))))))}var zZt=BZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function VZt(e){return e===0?.0005313079364639922:.0005313079364639922+e*(-.0005921664373536939+e*(.0002708782096718045+e*(7902353232660328e-22+e*(-8153969367561969e-20+e*(561168275310625e-19+e*-18329116582843375e-21)))))}var UZt=VZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function WZt(e){return e===0?.00034436760689237765:.00034436760689237765+e*(5171790908260592e-20+e*(-.00033493161081142234+e*(.0002812695154763237+e*-.00010976582244684731)))}var jZt=WZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function GZt(e){return e===0?-.0006526239185953094:-.0006526239185953094+e*(.0008394987206720873+e*-.000438297098541721)}var HZt=GZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var XZt=ou,YZt=bX,mT=Rr,KZt=gr,ZZt=Xe,qZt=wX,JZt=MZt,QZt=LZt,tqt=RZt,eqt=NZt,rqt=$Zt,nqt=zZt,iqt=UZt,oqt=jZt,aqt=HZt,po=[0,0,0,0,0,0,0,0,0,0];function sqt(e,t){var r,n,i,o,a;return n=(t-e)/e,i=-ZZt(1+n)+n,o=e*i,a=mT(2*i),t<e&&(a=-a),po[0]=JZt(a),po[1]=QZt(a),po[2]=tqt(a),po[3]=eqt(a),po[4]=rqt(a),po[5]=nqt(a),po[6]=iqt(a),po[7]=oqt(a),po[8]=aqt(a),po[9]=-.0005967612901927463,r=XZt(po,1/e),r*=KZt(-o)/mT(qZt*e),t<e&&(r=-r),r+=YZt(mT(o))/2,r}var lqt=sqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uqt=eval,cqt=uqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fqt=cqt;function hqt(){var e;try{fqt('"use strict"; (function* () {})'),e=!0}catch{e=!1}return e}var dqt=hqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pqt=dqt,SX=pqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var O1=$e,gqt=Rs,vqt=1e6;function mqt(e,t){var r,n,i,o,a,s;if(s={},arguments.length>1&&(s=t),n=s.tolerance||gqt,o=s.maxTerms||vqt,a=s.initialValue||0,r=typeof e.next=="function",r===!0){for(i of e)if(a+=i,O1(n*a)>=O1(i)||--o===0)break}else do i=e(),a+=i;while(O1(n*a)<O1(i)&&--o);return a}var yqt=mqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var KN=$e,_qt=Rs,bqt=1e6;function wqt(e,t){var r,n,i,o,a;a={},arguments.length>1&&(a=t),r=a.tolerance||_qt,i=a.maxTerms||bqt,o=a.initialValue||0;do n=e(),o+=n;while(KN(r*o)<KN(n)&&--i);return o}var Sqt=wqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Tqt=SX,kqt=yqt,Pqt=Sqt,tC;Tqt()?tC=kqt:tC=Pqt;var C4=tC;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function Eqt(e,t){var r=1,n=e,i=t;return o;function o(){var a=r;return n+=1,r*=i/n,a}}var Cqt=Eqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Aqt=C4,xqt=Cqt;function Mqt(e,t,r){var n,i;return r=r||0,i=xqt(e,t),n=Aqt(i,{initialValue:r}),n}var Iqt=Mqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Lqt(e){var t,r,n;return e===0?1/0:(e<0?t=-e:t=e,t<=1?(r=709811.662581658+e*(679979.8474157227+e*(293136.7857211597+e*(74887.54032914672+e*(12555.290582413863+e*(1443.4299244417066+e*(115.24194596137347+e*(6.309239205732627+e*(.22668404630224365+e*(.004826466289237662+e*4624429436045379e-20))))))))),n=0+e*(362880+e*(1026576+e*(1172700+e*(723680+e*(269325+e*(63273+e*(9450+e*(870+e*(45+e*1)))))))))):(e=1/e,r=4624429436045379e-20+e*(.004826466289237662+e*(.22668404630224365+e*(6.309239205732627+e*(115.24194596137347+e*(1443.4299244417066+e*(12555.290582413863+e*(74887.54032914672+e*(293136.7857211597+e*(679979.8474157227+e*709811.662581658))))))))),n=1+e*(45+e*(870+e*(9450+e*(63273+e*(269325+e*(723680+e*(1172700+e*(1026576+e*(362880+e*0)))))))))),r/n)}var Oqt=Lqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/lanczos.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Rqt=Oqt,Dqt=Rqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Nqt=Dqt,D2=Nqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Fqt=D2,$qt=Ld,Bqt=Fa,zqt=Ei,Vqt=Rr,Uqt=$e,nl=gr,Mp=Dr,yT=af,_T=au,ZN=Xe,R1=sf,Ip=Od,bT=w0,Wqt=Md;function jqt(e,t){var r,n,i,o,a,s,l;return i=e+bT-.5,l=(t-e-bT+.5)/i,e<1?t<=Ip?nl(e*ZN(t)-t-$qt(e)):Mp(t,e)*nl(-t)/Bqt(e):(Uqt(l*l*e)<=100&&e>150?(r=e*(zqt(l)-l)+t*(.5-bT)/i,r=nl(r)):(o=e*ZN(t/i),a=e-t,_T(o,a)<=Ip||yT(o,a)>=R1?(n=a/e,_T(o,a)/2>Ip&&yT(o,a)/2<R1?(s=Mp(t/i,e/2)*nl(a/2),r=s*s):_T(o,a)/4>Ip&&yT(o,a)/4<R1&&t>e?(s=Mp(t/i,e/4)*nl(a/4),r=s*s,r*=r):n>Ip&&n<R1?r=Mp(t*nl(n)/i,e):r=nl(o+a)):r=Mp(t/i,e)*nl(a)),r*=Vqt(i/Wqt)/Fqt(e),r)}var Gqt=jqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_60_0/boost/math/special_functions/powm1.hpp}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var qN=be,JN=$e,Hqt=Cd,Xqt=Xe,Yqt=Dr,Kqt=_4;function Zqt(e,t){var r;if(qN(e)||qN(t))return NaN;if(t===0)return 0;if(e===0)return-1;if(e<0&&t%2===0&&(e=-e),e>0){if((JN(t*(e-1))<.5||JN(t)<.2)&&(r=Xqt(e)*t,r<.5))return Hqt(r)}else if(Kqt(t)!==t)return NaN;return Yqt(e,t)-1}var qqt=Zqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Jqt=qqt,Qqt=Jqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tJt(e){var t,r,n;return e===0?-.01803556856784494:(e<0?t=-e:t=e,t<=1?(r=-.01803556856784494+e*(.02512664961998968+e*(.049410315156753225+e*(.0172491608709614+e*(-.0002594535632054381+e*(-.0005410098692152044+e*(-3245886498259485e-20+e*0)))))),n=1+e*(1.962029871977952+e*(1.4801966942423133+e*(.5413914320717209+e*(.09885042511280101+e*(.008213096746488934+e*(.00022493629192211576+e*-22335276320861708e-23))))))):(e=1/e,r=0+e*(-3245886498259485e-20+e*(-.0005410098692152044+e*(-.0002594535632054381+e*(.0172491608709614+e*(.049410315156753225+e*(.02512664961998968+e*-.01803556856784494)))))),n=-22335276320861708e-23+e*(.00022493629192211576+e*(.008213096746488934+e*(.09885042511280101+e*(.5413914320717209+e*(1.4801966942423133+e*(1.962029871977952+e*1))))))),r/n)}var eJt=tJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function rJt(e){var t,r,n;return e===0?.04906224540690395:(e<0?t=-e:t=e,t<=1?(r=.04906224540690395+e*(-.09691175301595212+e*(-.4149833583594954+e*(-.4065671242119384+e*(-.1584135863906922+e*(-.024014982064857155+e*-.0010034668769627955))))),n=1+e*(3.0234982984646304+e*(3.4873958536072385+e*(1.9141558827442668+e*(.5071377386143635+e*(.05770397226904519+e*.001957681026011072)))))):(e=1/e,r=-.0010034668769627955+e*(-.024014982064857155+e*(-.1584135863906922+e*(-.4065671242119384+e*(-.4149833583594954+e*(-.09691175301595212+e*.04906224540690395))))),n=.001957681026011072+e*(.05770397226904519+e*(.5071377386143635+e*(1.9141558827442668+e*(3.4873958536072385+e*(3.0234982984646304+e*1)))))),r/n)}var nJt=rJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function iJt(e){var t,r,n;return e===0?-.029232972183027003:(e<0?t=-e:t=e,t<=1?(r=-.029232972183027003+e*(.14421626775719232+e*(-.14244039073863127+e*(.05428096940550536+e*(-.008505359768683364+e*(.0004311713426792973+e*0))))),n=1+e*(-1.5016935605448505+e*(.846973248876495+e*(-.22009515181499575+e*(.02558279715597587+e*(-.0010066679553914337+e*-8271935218912905e-22)))))):(e=1/e,r=0+e*(.0004311713426792973+e*(-.008505359768683364+e*(.05428096940550536+e*(-.14244039073863127+e*(.14421626775719232+e*-.029232972183027003))))),n=-8271935218912905e-22+e*(-.0010066679553914337+e*(.02558279715597587+e*(-.22009515181499575+e*(.846973248876495+e*(-1.5016935605448505+e*1)))))),r/n)}var oJt=iJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/lgamma_small.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006-7, 2013-14.
* (C) Copyright Paul A. Bristow 2007, 2013-14.
* (C) Copyright Nikhar Agrawal 2013-14.
* (C) Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var wT=Xe,aJt=Rs,sJt=eJt,lJt=nJt,uJt=oJt,cJt=.15896368026733398,fJt=.5281534194946289,hJt=.45201730728149414;function dJt(e,t,r){var n,i,o,a;if(e<aJt)return-wT(e);if(t===0||r===0)return 0;if(i=0,e>2){if(e>=3){do e-=1,r-=1,i+=wT(e);while(e>=3);r=e-2}return o=r*(e+1),a=sJt(r),i+=o*cJt+o*a,i}return e<1&&(i+=-wT(e),r=t,t=e,e+=1),e<=1.5?(o=lJt(t),n=t*r,i+=n*fJt+n*o,i):(o=r*t,a=uJt(-r),i+=o*hJt+o*a,i)}var pJt=dJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006-7, 2013-14.
* (C) Copyright Paul A. Bristow 2007, 2013-14.
* (C) Copyright Nikhar Agrawal 2013-14.
* (C) Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var QN=Fa,t9=Cd,gJt=Ei,vJt=be,e9=pJt;function mJt(e){return vJt(e)?NaN:e<0?e<-.5?QN(1+e)-1:t9(-gJt(e)+e9(e+2,e+1,e)):e<2?t9(e9(e+1,e,e-1)):QN(1+e)-1}var yJt=mJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _Jt=yJt,bJt=_Jt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function wJt(e,t){var r,n,i,o;return r=-t,t=-t,n=e+1,i=1,a;function a(){return o=r/n,r*=t,i+=1,r/=i,n+=1,o}}var SJt=wJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var TJt=Qqt,kJt=C4,PJt=bJt,EJt=SJt;function CJt(e,t,r){var n,i,o,a,s;return i=PJt(e),o=(i+1)/e,a=TJt(t,e),i-=a,i/=e,s=EJt(e,t),a+=1,n=r?o:0,i=-a*kJt(s,{initialValue:(n-i)/a}),r&&(i=-i),[i,o]}var AJt=CJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xJt=11754943508222875e-54,N2=xJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rb=$e,va=N2,MJt=Rs,IJt=1e6;function LJt(e,t,r){var n,i,o,a,s,l,u;if(n=typeof e.next=="function",u=n?e.next().value:e(),a=u[1],o=u[0],a===0&&(a=va),s=a,l=0,n===!0)do u=e.next().value,u&&(l=u[1]+u[0]*l,l===0&&(l=va),s=u[1]+u[0]/s,s===0&&(s=va),l=1/l,i=s*l,a*=i);while(rb(i-1)>t&&--r);else do u=e(),u&&(l=u[1]+u[0]*l,l===0&&(l=va),s=u[1]+u[0]/s,s===0&&(s=va),l=1/l,i=s*l,a*=i);while(u&&rb(i-1)>t&&--r);return o/a}function OJt(e,t,r){var n,i,o,a,s,l;if(n=typeof e.next=="function",l=n?e.next().value:e(),o=l[1],o===0&&(o=va),a=o,s=0,n===!0)do l=e.next().value,l&&(s=l[1]+l[0]*s,s===0&&(s=va),a=l[1]+l[0]/a,a===0&&(a=va),s=1/s,i=a*s,o*=i);while(l&&rb(i-1)>t&&--r);else do l=e(),l&&(s=l[1]+l[0]*s,s===0&&(s=va),a=l[1]+l[0]/a,a===0&&(a=va),s=1/s,i=a*s,o*=i);while(l&&rb(i-1)>t&&--r);return o}function RJt(e,t){var r,n,i;return n={},arguments.length>1&&(n=t),r=n.maxIter||IJt,i=n.tolerance||MJt,n.keep?OJt(e,i,r):LJt(e,i,r)}var DJt=RJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var TX=$e,NJt=Rs,Oh=N2,FJt=1e6;function $Jt(e,t,r){var n,i,o,a,s,l;l=e(),s=l[1],i=l[0],s===0&&(s=Oh),o=s,a=0;do l=e(),l&&(a=l[1]+l[0]*a,a===0&&(a=Oh),o=l[1]+l[0]/o,o===0&&(o=Oh),a=1/a,n=o*a,s*=n);while(l&&TX(n-1)>t&&--r);return i/s}function BJt(e,t,r){var n,i,o,a,s;s=e(),a=s[1],a===0&&(a=Oh),i=a,o=0;do s=e(),s&&(o=s[1]+s[0]*o,o===0&&(o=Oh),i=s[1]+s[0]/i,i===0&&(i=Oh),o=1/o,n=i*o,a*=n);while(s&&TX(n-1)>t&&--r);return a}function zJt(e,t){var r,n,i;return n={},arguments.length>1&&(n=t),i=n.tolerance||NJt,r=n.maxIter||FJt,n.keep?BJt(e,i,r):$Jt(e,i,r)}var VJt=zJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var UJt=SX,WJt=DJt,jJt=VJt,eC;UJt()?eC=WJt:eC=jJt;var kX=eC;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function GJt(e,t){var r=t-e+1,n=e,i=0;return o;function o(){return i+=1,r+=2,[i*(n-i),r]}}var HJt=GJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var XJt=kX,YJt=HJt;function KJt(e,t){var r=YJt(e,t);return 1/(t-e+1+XJt(r))}var ZJt=KJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006-7, 2013-14.
* (C) Copyright Paul A. Bristow 2007, 2013-14.
* (C) Copyright Nikhar Agrawal 2013-14.
* (C) Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var qJt=Ld,JJt=Pi,Lp=Fa,r9=$e,QJt=gr,n9=Dr,go=Xe,tQt=AKt,i9=Id,eQt=R2,o9=sf,rQt=sr,nQt=LKt,iQt=TZt,a9=CZt,oQt=lqt,ST=Iqt,s9=Gqt,aQt=AJt,l9=ZJt,sQt=170;function PX(e,t,r,n){var i,o,a,s,l,u,c,f,h,d,p,g,m,v,y;if(e<0||t<=0)return NaN;if(o=r===void 0?!0:r,f=n,h=0,t>=sQt&&!o)return f&&t*4<e?(h=t*go(e)-e,h+=go(l9(t,e))):!f&&t>4*e?(h=t*go(e)-e,s=0,h+=go(ST(t,e,s)/t)):(h=PX(t,e,!0,f),h===0?f?(h=1+1/(12*t)+1/(288*t*t),h=go(h)-t+(t-.5)*go(t),h+=go(eQt)):(h=t*go(e)-e,s=0,h+=go(ST(t,e,s)/t)):h=go(h)+qJt(t)),h>o9?rQt:QJt(h);switch(c=t<30&&t<=e+1&&e<o9,c?(v=JJt(t),d=v===t,l=d?!1:r9(v-t)===.5):d=l=!1,d&&e>.6?(f=!f,a=0):l&&e>.2?(f=!f,a=1):e<tQt&&t>1?a=6:e<.5?-.4/go(e)<t?a=2:a=3:e<1.1?e*.75<t?a=2:a=3:(u=!1,o&&t>20&&(p=r9((e-t)/t),t>200?20/t>p*p&&(u=!0):p<.4&&(u=!0)),u?a=5:e-1/(3*e)<t?a=2:(a=4,f=!f)),a){case 0:h=nQt(t,e),o===!1&&(h*=Lp(t));break;case 1:h=iQt(t,e),o===!1&&(h*=Lp(t));break;case 2:h=o?s9(t,e):a9(t,e),h!==0&&(s=0,i=!1,f&&(s=o?1:Lp(t),o||h>=1||i9*h>s?(s/=h,o||t<1||i9/t>s?(s*=-t,i=!0):s=0):s=0)),h*=ST(t,e,s)/t,i&&(f=!1,h=-h);break;case 3:f=!f,m=aQt(t,e,f),h=m[0],y=m[1],f=!1,o&&(h/=y);break;case 4:h=o?s9(t,e):a9(t,e),h!==0&&(h*=l9(t,e));break;case 5:h=oQt(t,e),e>=t&&(f=!f);break;case 6:h=o?n9(e,t)/Lp(t+1):n9(e,t)/t,h*=1-t*e/(t+1);break}return o&&h>1&&(h=1),f&&(g=o?1:Lp(t),h=g-h),h}var lQt=PX;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uQt=lQt,EX=uQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Wf=gr,D1=Dr,cQt=Xe,u9=sf,c9=Od;function fQt(e,t){var r,n;return n=e*cQt(t),t>=1?n<u9&&-t>c9?r=D1(t,e)*Wf(-t):e>=1?r=D1(t/Wf(t/e),e):r=Wf(n-t):n>c9?r=D1(t,e)*Wf(-t):t/e<u9?r=D1(t/Wf(t/e),e):r=Wf(n-t),r}var hQt=fQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var dQt=D2,pQt=Ld,gQt=Fa,vQt=Ei,mQt=Rr,yQt=$e,il=gr,Op=Dr,TT=af,kT=au,f9=Xe,N1=sf,Rp=Od,PT=w0,_Qt=Md;function bQt(e,t){var r,n,i,o,a,s,l;return i=e+PT-.5,l=(t-e-PT+.5)/i,e<1?t<=Rp?il(e*f9(t)-t-pQt(e)):Op(t,e)*il(-t)/gQt(e):(yQt(l*l*e)<=100&&e>150?(r=e*(vQt(l)-l)+t*(.5-PT)/i,r=il(r)):(o=e*f9(t/i),a=e-t,kT(o,a)<=Rp||TT(o,a)>=N1?(n=a/e,kT(o,a)/2>Rp&&TT(o,a)/2<N1?(s=Op(t/i,e/2)*il(a/2),r=s*s):kT(o,a)/4>Rp&&TT(o,a)/4<N1&&t>e?(s=Op(t/i,e/4)*il(a/4),r=s*s,r*=r):n>Rp&&n<N1?r=Op(t*il(n)/i,e):r=il(o+a)):r=Op(t/i,e)*il(a)),r*=mQt(i/_Qt)/dQt(e),r)}var wQt=bQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var SQt=P4,h9=yX,TQt=EX,kQt=Ei,F1=$e,d9=Dr,PQt=Xe,EQt=of,p9=Rs,CQt=hQt,AQt=wQt,ol=new Array(30);function xQt(e,t,r,n,i,o,a){var s,l,u,c,f,h,d,p,g,m,v,y,b,w,T,S,k,E;if(h=t-1,k=e+h/2,n<.35?m=kQt(-n):m=PQt(r),E=-k*m,y=AQt(t,E),y<=EQt)return i;for(a?(s=y/SQt(e,t),s/=d9(k,t)):s=CQt(t,E)/d9(k,t),s*=o,ol[0]=1,b=TQt(E,t,!0,!0),b/=y,c=i+s*b,u=1,d=m/2,d*=d,p=1,v=4*k*k,f=t,T=1;T<ol.length;++T){for(u+=2,ol[T]=0,g=t-T,l=3,w=1;w<T;++w)g=w*t-T,ol[T]+=g*ol[T-w]/h9(l),l+=2;if(ol[T]/=T,ol[T]+=h/h9(u),b=(f*(f+1)*b+(E+f+1)*p)/v,p*=d,f+=2,S=s*ol[T]*b,c+=S,S>1){if(F1(S)<F1(p9*c))break}else if(F1(S/p9)<F1(c))break}return c}var MQt=xQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function IQt(e,t,r){var n,i;if(r===0)return 1;for(n=1,i=0;i<r;i++)n*=(e+i)/(t+i);return n}var LQt=IQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ET=$e,g9=af,OQt=sr;function RQt(e,t){var r,n,i;if(r=arguments.length,r===0)return OQt;if(r===2)return g9(ET(e),ET(t));for(n=[],i=0;i<r;i++)n.push(ET(arguments[i]));return g9.apply(null,n)}var DQt=RQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NQt=DQt,FQt=NQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var CT=$e,v9=au,$Qt=sr;function BQt(e,t){var r,n,i;if(r=arguments.length,r===0)return $Qt;if(r===2)return v9(CT(e),CT(t));for(n=[],i=0;i<r;i++)n.push(CT(arguments[i]));return v9.apply(null,n)}var zQt=BQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var VQt=zQt,UQt=VQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var AT=D2,WQt=FQt,jQt=UQt,m9=Cd,al=Ei,y9=Rr,$1=$e,na=gr,ia=Dr,GQt=au,Oi=Xe,oa=sf,jf=Od,xT=w0,HQt=Md;function XQt(e,t,r,n,i){var o,a,s,l,u,c,f,h,d,p,g,m,v,y;if(!i)return ia(r,e)*ia(n,t);if(v=e+t,l=e+xT-.5,u=t+xT-.5,c=v+xT-.5,o=AT(v),o/=AT(e)*AT(t),o*=y9(u/HQt),o*=y9(l/c),f=(r*t-n*l)/l,h=(n*e-r*u)/u,jQt(f,h)<.2)if(f*h>0||GQt(e,t)<1)$1(f)<.1?o*=na(e*al(f)):o*=ia(r*c/l,e),$1(h)<.1?o*=na(t*al(h)):o*=ia(n*c/u,t);else if(WQt(f,h)<.5)a=e<t,s=t/e,a&&s*h<.1||!a&&f/s>.1?(d=m9(s*al(h)),d=f+d+d*f,d=e*al(d),o*=na(d)):(d=m9(al(f)/s),d=h+d+d*h,d=t*al(d),o*=na(d));else if($1(f)<$1(h))if(y=e*al(f)+t*Oi(n*c/u),y<=jf||y>=oa){if(y+=Oi(o),y>=oa)return NaN;o=na(y)}else o*=na(y);else if(y=t*al(h)+e*Oi(r*c/l),y<=jf||y>=oa){if(y+=Oi(o),y>=oa)return NaN;o=na(y)}else o*=na(y);else if(g=r*c/l,m=n*c/u,f=e*Oi(g),h=t*Oi(m),f>=oa||f<=jf||h>=oa||h<=jf)if(e<t)if(p=ia(m,t/e),d=e*(Oi(g)+Oi(p)),d<oa&&d>jf)o*=ia(p*g,e);else{if(h+=f+Oi(o),h>=oa)return NaN;o=na(h)}else if(p=ia(g,e/t),d=(Oi(p)+Oi(m))*t,d<oa&&d>jf)o*=ia(p*m,t);else{if(h+=f+Oi(o),h>=oa)return NaN;o=na(h)}else o*=ia(g,e)*ia(m,t);return o}var A4=XQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var YQt=kX,KQt=A4,ZQt={keep:!0,maxIter:1e3};function qQt(e,t,r,n){var i=0;return o;function o(){var a,s,l;return s=(e+i-1)*(e+t+i-1)*i*(t-i)*r*r,a=e+2*i-1,s/=a*a,l=i,l+=i*(t-i)*r/(e+2*i-1),l+=(e+i)*(e*n-t*r+1+i*(2-r))/(e+2*i+1),i+=1,[s,l]}}function JQt(e,t,r,n,i,o){var a,s,l;return a=KQt(e,t,r,n,i),o&&(o[1]=a),a===0?a:(l=qQt(e,t,r,n),s=YQt(l,ZQt),a/s)}var QQt=JQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var MT=iu,_9=be,tte=T4,ete=O2;function CX(e,t){var r,n;if(_9(e)||_9(t))return NaN;if(!MT(e)||!MT(t))return NaN;if(t<0)return 0;if(e<0)return r=CX(-e+t-1,t),tte(t)&&(r=-r),r;if(t>e)return 0;if(t===0||t===e)return 1;if(t===1||t===e-1)return e;for(e-t<t&&(t=e-t),r=e,n=2;n<=t;n++)r*=(e-n+1)/n;return MT(r)?r:ete(r)}var rte=CX;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nte=rte,ite=nte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var b9=ite,Bu=Pi,Dp=Dr,ote=of;function ate(e,t,r,n){var i,o,a,s,l;if(o=Dp(r,e),o>ote)for(s=o,l=Bu(e-1);l>t;l--)s*=(l+1)*n/((e-l)*r),o+=s;else if(a=Bu(e*r),a<=t+1&&(a=Bu(t+2)),o=Dp(r,a)*Dp(n,e-a),o*=b9(Bu(e),Bu(a)),o===0)for(l=a-1;l>t;l--)o+=Dp(r,l)*Dp(n,e-l),o*=b9(Bu(e),Bu(l));else{for(s=o,i=o,l=a-1;l>t;l--)s*=(l+1)*n/((e-l)*r),o+=s;for(s=i,l=a+1;l<=e;l++)s*=(e-l+1)*r/(l*n),o+=s}return o}var ste=ate;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var lte=A4;function ute(e,t,r,n,i,o,a){var s,l,u,c;if(s=lte(e,t,r,n,o),a&&(a[1]=s),s/=e,s===0)return s;for(u=1,l=1,c=0;c<i-1;++c)l*=(e+t+c)*r/(e+c+1),u+=l;return s*=u,s}var cte=ute;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var IT=D2,fte=C4,hte=Ei,dte=Rr,LT=gr,B1=Dr,Np=Xe,pte=of,w9=sf,S9=Od,OT=w0,gte=Md,T9={maxTerms:100};function vte(e,t,r,n){var i=1-t,o=1;return a;function a(){var s=n/e;return e+=1,n*=i*r/o,o+=1,i+=1,s}}function mte(e,t,r,n,i,o,a){var s,l,u,c,f,h,d,p;return i?(d=e+t,l=e+OT-.5,u=t+OT-.5,c=d+OT-.5,s=IT(d)/(IT(e)*IT(t)),f=Np(c/u)*(t-.5),h=Np(r*c/l)*e,f>S9&&f<w9&&h>S9&&h<w9?(e*t<u*10?s*=LT((t-.5)*hte(e/u)):s*=B1(c/u,t-.5),s*=B1(r*c/l,e),s*=dte(l/gte),o&&(o[1]=s*B1(a,t))):(s=Np(s)+f+h+(Np(l)-1)/2,o&&(o[1]=LT(s+t*Np(a))),s=LT(s))):s=B1(r,e),s<pte?n:(p=vte(e,t,r,s),T9.initialValue=n,fte(p,T9))}var yte=mte,_te=be,bte=Cd,z1=Pi,k9=Ei,P9=y4,Ri=cX,RT=Rr,wte=gr,Fp=Dr,Ste=af,E9=au,V1=Id,C9=of,Tte=vGt,kte=k4,AX=su,sl=MQt,DT=LQt,Pte=A4,A9=QQt,Ete=ste,$p=cte,aa=yte,Cte=1/AX;function Ate(e,t,r,n,i,o,a,s){var l,u,c,f,h,d,p,g,m,v,y,b;if(b=1-e,p=s,g=s+a,o[g]=-1,_te(e)||e<0||e>1)return o[p]=NaN,o[g]=NaN,o;if(n){if(t<0||r<0)return o[p]=NaN,o[g]=NaN,o;if(t===0){if(r===0)return o[p]=NaN,o[g]=NaN,o;if(r>0)return o[p]=i?0:1,o}else if(r===0&&t>0)return o[p]=i?1:0,o}else if(t<=0||r<=0)return o[p]=NaN,o[g]=NaN,o;return e===0?(t===1?o[g]=1:o[g]=t<1?V1/2:C9*2,i?(o[p]=n?1:Ri(t,r),o):(o[p]=0,o)):e===1?(r===1?o[g]=1:o[g]=r<1?V1/2:C9*2,i?o[p]=0:o[p]=n?1:Ri(t,r),o):t===.5&&r===.5?(o[g]=Cte*RT(b*e),y=P9(RT(i?b:e)),y/=kte,n||(y*=AX),o[p]=y,o):(t===1&&(d=r,r=t,t=d,d=b,b=e,e=d,i=!i),r===1?t===1?(o[p]=i?b:e,o[g]=1,o):(o[g]=t*Fp(e,t-1),b<.5?y=i?-bte(t*k9(-b)):wte(t*k9(-b)):y=i?-(Fp(e,t)-1):Fp(e,t),n||(y/=t),o[p]=y,o):(E9(t,r)<=1?(e>.5&&(d=r,r=t,t=d,d=b,b=e,e=d,i=!i),Ste(t,r)<=1?t>=E9(.2,r)||Fp(e,t)<=.9?i?(c=-(n?1:Ri(t,r)),i=!1,c=-aa(t,r,e,c,n,o,b)):c=aa(t,r,e,0,n,o,b):(d=r,r=t,t=d,d=b,b=e,e=d,i=!i,b>=.3?i?(c=-(n?1:Ri(t,r)),i=!1,c=-aa(t,r,e,c,n,o,b)):c=aa(t,r,e,0,n,o,b):(n?u=1:u=DT(t+r,t,20),c=$p(t,r,e,b,20,n,o),i?(c-=n?1:Ri(t,r),i=!1,c=-sl(t+20,r,e,b,c,u,n)):c=sl(t+20,r,e,b,c,u,n))):r<=1||e<.1&&Fp(r*e,t)<=.7?i?(c=-(n?1:Ri(t,r)),i=!1,c=-aa(t,r,e,c,n,o,b)):c=aa(t,r,e,0,n,o,b):(d=r,r=t,t=d,d=b,b=e,e=d,i=!i,b>=.3?i?(c=-(n?1:Ri(t,r)),i=!1,c=-aa(t,r,e,c,n,o,b)):c=aa(t,r,e,0,n,o,b):t>=15?i?(c=-(n?1:Ri(t,r)),i=!1,c=-sl(t,r,e,b,c,1,n)):c=sl(t,r,e,b,0,1,n):(n?u=1:u=DT(t+r,t,20),c=$p(t,r,e,b,20,n,o),i?(c-=n?1:Ri(t,r),i=!1,c=-sl(t+20,r,e,b,c,u,n)):c=sl(t+20,r,e,b,c,u,n)))):(t<r?l=t-(t+r)*e:l=(t+r)*b-r,l<0&&(d=r,r=t,t=d,d=b,b=e,e=d,i=!i),r<40?z1(t)===t&&z1(r)===r&&t<Tte-100?(m=t-1,v=r+m,c=Ete(v,m,e,b),n||(c*=Ri(t,r))):r*e<=.7?i?(c=-(n?1:Ri(t,r)),i=!1,c=-aa(t,r,e,c,n,o,b)):c=aa(t,r,e,0,n,o,b):t>15?(v=z1(r),v===r&&(v-=1),f=r-v,n?u=1:u=DT(t+f,f,v),c=$p(f,t,b,e,v,n),c=sl(t,f,e,b,c,1,n),c/=u):n?(v=z1(r),f=r-v,f<=0&&(v-=1,f+=1),c=$p(f,t,b,e,v,n),c+=$p(t,f,e,b,20,n),i&&(c-=1),c=sl(t+20,f,e,b,c,1,n),i&&(c=-c,i=!1)):c=A9(t,r,e,b,n,o):c=A9(t,r,e,b,n,o)),o[g]<0&&(o[g]=Pte(t,r,e,b,!0)),h=b*e,o[g]!==0&&(V1*h<o[g]?o[g]=V1/2:o[g]/=h),o[p]=i?(n?1:Ri(t,r))-c:c,o))}var xX=Ate;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xte=xX;function Mte(e,t,r,n,i){return xte(e,t,r,n,i,[0,0],1,0)}var Ite=Mte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Lte=tn,MX=Ite,Ote=xX;Lte(MX,"assign",Ote);var IX=MX;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Rte=IX.assign;function Dte(e,t,r,n,i){var o=[0,0];return n=n!==!1,i=i===!0,Rte(e,t,r,n,i,o,1,0),o[0]}var Nte=Dte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Fte=Nte,x4=Fte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $te(e){var t,r,n;return e===0?-.0005087819496582806:(e<0?t=-e:t=e,t<=1?(r=-.0005087819496582806+e*(-.008368748197417368+e*(.03348066254097446+e*(-.012692614766297404+e*(-.03656379714117627+e*(.02198786811111689+e*(.008226878746769157+e*(-.005387729650712429+e*(0+e*0)))))))),n=1+e*(-.9700050433032906+e*(-1.5657455823417585+e*(1.5622155839842302+e*(.662328840472003+e*(-.7122890234154284+e*(-.05273963823400997+e*(.07952836873415717+e*(-.0023339375937419+e*.0008862163904564247))))))))):(e=1/e,r=0+e*(0+e*(-.005387729650712429+e*(.008226878746769157+e*(.02198786811111689+e*(-.03656379714117627+e*(-.012692614766297404+e*(.03348066254097446+e*(-.008368748197417368+e*-.0005087819496582806)))))))),n=.0008862163904564247+e*(-.0023339375937419+e*(.07952836873415717+e*(-.05273963823400997+e*(-.7122890234154284+e*(.662328840472003+e*(1.5622155839842302+e*(-1.5657455823417585+e*(-.9700050433032906+e*1))))))))),r/n)}var Bte=$te;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zte(e){var t,r,n;return e===0?-.20243350835593876:(e<0?t=-e:t=e,t<=1?(r=-.20243350835593876+e*(.10526468069939171+e*(8.3705032834312+e*(17.644729840837403+e*(-18.851064805871424+e*(-44.6382324441787+e*(17.445385985570866+e*(21.12946554483405+e*-3.6719225470772936))))))),n=1+e*(6.242641248542475+e*(3.971343795334387+e*(-28.66081804998+e*(-20.14326346804852+e*(48.560921310873994+e*(10.826866735546016+e*(-22.643693341313973+e*1.7211476576120028)))))))):(e=1/e,r=-3.6719225470772936+e*(21.12946554483405+e*(17.445385985570866+e*(-44.6382324441787+e*(-18.851064805871424+e*(17.644729840837403+e*(8.3705032834312+e*(.10526468069939171+e*-.20243350835593876))))))),n=1.7211476576120028+e*(-22.643693341313973+e*(10.826866735546016+e*(48.560921310873994+e*(-20.14326346804852+e*(-28.66081804998+e*(3.971343795334387+e*(6.242641248542475+e*1)))))))),r/n)}var Vte=zte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ute(e){var t,r,n;return e===0?-.1311027816799519:(e<0?t=-e:t=e,t<=1?(r=-.1311027816799519+e*(-.16379404719331705+e*(.11703015634199525+e*(.38707973897260434+e*(.3377855389120359+e*(.14286953440815717+e*(.029015791000532906+e*(.0021455899538880526+e*(-6794655751811263e-22+e*(28522533178221704e-24+e*-681149956853777e-24))))))))),n=1+e*(3.4662540724256723+e*(5.381683457070069+e*(4.778465929458438+e*(2.5930192162362027+e*(.848854343457902+e*(.15226433829533179+e*(.011059242293464892+e*(0+e*(0+e*0)))))))))):(e=1/e,r=-681149956853777e-24+e*(28522533178221704e-24+e*(-6794655751811263e-22+e*(.0021455899538880526+e*(.029015791000532906+e*(.14286953440815717+e*(.3377855389120359+e*(.38707973897260434+e*(.11703015634199525+e*(-.16379404719331705+e*-.1311027816799519))))))))),n=0+e*(0+e*(0+e*(.011059242293464892+e*(.15226433829533179+e*(.848854343457902+e*(2.5930192162362027+e*(4.778465929458438+e*(5.381683457070069+e*(3.4662540724256723+e*1)))))))))),r/n)}var Wte=Ute;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jte(e){var t,r,n;return e===0?-.0350353787183178:(e<0?t=-e:t=e,t<=1?(r=-.0350353787183178+e*(-.0022242652921344794+e*(.018557330651423107+e*(.009508047013259196+e*(.0018712349281955923+e*(.00015754461742496055+e*(460469890584318e-20+e*(-2304047769118826e-25+e*26633922742578204e-28))))))),n=1+e*(1.3653349817554064+e*(.7620591645536234+e*(.22009110576413124+e*(.03415891436709477+e*(.00263861676657016+e*(7646752923027944e-20+e*(0+e*0)))))))):(e=1/e,r=26633922742578204e-28+e*(-2304047769118826e-25+e*(460469890584318e-20+e*(.00015754461742496055+e*(.0018712349281955923+e*(.009508047013259196+e*(.018557330651423107+e*(-.0022242652921344794+e*-.0350353787183178))))))),n=0+e*(0+e*(7646752923027944e-20+e*(.00263861676657016+e*(.03415891436709477+e*(.22009110576413124+e*(.7620591645536234+e*(1.3653349817554064+e*1)))))))),r/n)}var Gte=jte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Hte(e){var t,r,n;return e===0?-.016743100507663373:(e<0?t=-e:t=e,t<=1?(r=-.016743100507663373+e*(-.0011295143874558028+e*(.001056288621524929+e*(.00020938631748758808+e*(14962478375834237e-21+e*(44969678992770644e-23+e*(4625961635228786e-24+e*(-2811287356288318e-29+e*9905570997331033e-32))))))),n=1+e*(.5914293448864175+e*(.1381518657490833+e*(.016074608709367652+e*(.0009640118070051656+e*(27533547476472603e-21+e*(282243172016108e-21+e*(0+e*0)))))))):(e=1/e,r=9905570997331033e-32+e*(-2811287356288318e-29+e*(4625961635228786e-24+e*(44969678992770644e-23+e*(14962478375834237e-21+e*(.00020938631748758808+e*(.001056288621524929+e*(-.0011295143874558028+e*-.016743100507663373))))))),n=0+e*(0+e*(282243172016108e-21+e*(27533547476472603e-21+e*(.0009640118070051656+e*(.016074608709367652+e*(.1381518657490833+e*(.5914293448864175+e*1)))))))),r/n)}var Xte=Hte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_48_0/boost/math/special_functions/detail/erf_inv.hpp}. This implementation follows the original, but has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Yte=be,x9=Rr,M9=Xe,Kte=sr,Zte=pn,qte=Bte,Jte=Vte,Qte=Wte,tee=Gte,eee=Xte,ree=.08913147449493408,nee=2.249481201171875,iee=.807220458984375,oee=.9399557113647461,aee=.9836282730102539;function see(e){var t,r,n,i,o;return Yte(e)?NaN:e===0?Kte:e===2?Zte:e===1?0:e>2||e<0?NaN:(e>1?(t=-1,n=2-e):(t=1,n=e),e=1-n,e<=.5?(i=e*(e+10),o=qte(e),t*(i*ree+i*o)):n>=.25?(i=x9(-2*M9(n)),n-=.25,o=Jte(n),t*(i/(nee+o))):(n=x9(-M9(n)),n<3?(r=n-1.125,o=Qte(r),t*(iee*n+o*n)):n<6?(r=n-3,o=tee(r),t*(oee*n+o*n)):(r=n-6,o=eee(r),t*(aee*n+o*n))))}var lee=see;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uee=lee,S0=uee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, long comment, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1995, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var cee=be,I9=y4,fee=Rr,L9=KH,hee=6123233995736766e-32;function dee(e){var t;return cee(e)?NaN:e<-1||e>1?NaN:e>.5?2*I9(fee(.5-.5*e)):(t=L9-I9(e),t+=hee,t+=L9,t)}var pee=dee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gee=pee,vee=gee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mee=1.4142135623730951,M4=mee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function yee(e){return e===0?.16666666666666666:.16666666666666666+e*.16666666666666666}var _ee=yee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function bee(e){return e===0?.058333333333333334:.058333333333333334+e*(.06666666666666667+e*.008333333333333333)}var wee=bee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function See(e){return e===0?.0251984126984127:.0251984126984127+e*(.026785714285714284+e*(.0017857142857142857+e*.0001984126984126984))}var Tee=See;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function kee(e){return e===0?.012039792768959435:.012039792768959435+e*(.010559964726631394+e*(-.0011078042328042327+e*(.0003747795414462081+e*27557319223985893e-22)))}var Pee=kee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Eee(e){return e===0?.003837005972422639:.003837005972422639+e*(.00610392115600449+e*(-.0016095979637646305+e*(.0005945867404200738+e*(-6270542728876062e-20+e*2505210838544172e-23))))}var Cee=Eee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Aee(e){return e===0?.0032177478835464946:.0032177478835464946+e*(.0010898206731540065+e*(-.0012579159844784845+e*(.0006908420797309686+e*(-.00016376804137220805+e*(154012654012654e-19+e*16059043836821613e-26)))))}var xee=Aee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Mee(e){return e===0?.001743826229834001:.001743826229834001+e*(3353097688001788e-20+e*(-.0007624513544032393+e*(.0006451304695145635+e*(-.000249472580470431+e*(49255746366361444e-21+e*(-39851014346715405e-22+e*7647163731819816e-28))))))}var Iee=Mee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Lee(e){return e===0?.0009647274732138864:.0009647274732138864+e*(-.0003110108632631878+e*(-.00036307660358786886+e*(.0005140660578834113+e*(-.00029133414466938067+e*(9086710793521991e-20+e*(-15303004486655377e-21+e*(10914179173496788e-22+e*28114572543455206e-31)))))))}var Oee=Lee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ree(e){return e===0?.0005422926281312969:.0005422926281312969+e*(-.0003694266780000966+e*(-.00010230378073700413+e*(.00035764655430568635+e*(-.00028690924218514614+e*(.00012645437628698076+e*(-33202652391372056e-21+e*(4890304529197534e-21+e*(-3123956959982987e-22+e*822063524662433e-32))))))))}var Dee=Ree;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Nee=P4,Fee=ou,$ee=Rr,Bee=su,zee=_ee,Vee=wee,Uee=Tee,Wee=Pee,jee=Cee,Gee=xee,Hee=Iee,Xee=Oee,Yee=Dee,Kee=0,sa=[1,0,0,0,0,0,0,0,0,0];function Zee(e,t){var r,n;return n=Nee(e/2,.5)*$ee(e*Bee)*(t-.5),r=1/e,sa[1]=zee(r),sa[2]=Vee(r),sa[3]=Uee(r),sa[4]=Wee(r),sa[5]=jee(r),sa[6]=Gee(r),sa[7]=Hee(r),sa[8]=Xee(r),sa[9]=Yee(r),Kee+n*Fee(sa,n*n)}var qee=Zee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Jee=P4,Qee=ou,O9=Rr,tre=Dr,ere=su,ll=[0,0,0,0,0,0,0];function rre(e,t){var r,n,i,o,a,s,l,u;return u=Jee(e/2,.5)*O9(e*ere)*t,o=e+2,a=e+4,s=e+6,ll[0]=1,ll[1]=-(e+1)/(2*o),o*=e+2,ll[2]=-e*(e+1)*(e+3)/(8*o*a),o*=e+2,ll[3]=-e*(e+1)*(e+5)*((3*e+7)*e-2)/(48*o*a*s),o*=e+2,a*=e+4,ll[4]=-e*(e+1)*(e+7)*(((((15*e+154)*e+465)*e+286)*e-336)*e+64)/(384*o*a*s*(e+8)),o*=e+2,ll[5]=-e*(e+1)*(e+3)*(e+9)*((((((35*e+452)*e+1573)*e+600)*e-2020)*e+928)*e-128)/(1280*o*a*s*(e+8)*(e+10)),o*=e+2,a*=e+4,s*=e+6,ll[6]=-e*(e+1)*(e+11)*(((((((((((945*e+31506)*e+425858)*e+2980236)*e+11266745)*e+20675018)*e+7747124)*e-22574632)*e-8565600)*e+18108416)*e-7099392)*e+884736)/(46080*o*a*s*(e+8)*(e+10)*(e+12)),l=O9(e),i=tre(l*u,1/e),n=i*i,r=Qee(ll,n),r*=l,r/=i,-r}var nre=rre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var R9=S0,ire=Cd,D9=Rr,ore=Dr,are=k4,N9=M4;function sre(e,t){var r,n,i,o,a,s,l;return e>1e20?-R9(2*t)*N9:(r=1/(e-.5),n=48/(r*r),i=((20700*r/n-98)*r-16)*r+96.36,o=((94.5/(n+i)-3)/n+1)*D9(r*are)*e,l=ore(o*2*t,2/e),l>.05+r?(s=-R9(2*t)*N9,l=s*s,e<5&&(i+=.3*(e-4.5)*(s+.6)),i+=(((.05*o*s-5)*s-7)*s-2)*s+n,l=(((((.4*l+6.3)*l+36)*l+94.5)/i-l-3)/n+1)*s,l=ire(r*l*l)):l=((1/(((e+6)/(e*l)-.089*o-.822)*(e+2)*3)+.5/(e+4))*l-1)*(e+1)/(e+2)+1/l,a=D9(e*l),-a)}var lre=sre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var F9=S0,$9=Pi,NT=xd,B9=O2,ure=vee,U1=Rr,cre=$e,z9=E4,fre=Dr,hre=b0,V9=M4,U9=su,W9=qee,W1=nre,FT=lre,j9=268435456,dre=1/3,pre=2*53/3,gre=.8549879733383485;function vre(e,t,r){var n,i,o,a,s,l,u,c,f,h,d,p,g,m,v,y;if(s=0,t>r?(u=r,r=t,t=u,a=!0):a=!1,$9(e)===e&&e<20)switch(i=NT(1,pre),$9(e)){case 1:t===.5?s=0:s=-z9(U9*t)/hre(U9*t);break;case 2:s=(2*t-1)/U1(2*t*r);break;case 4:l=4*t*r,o=U1(l),g=4*z9(ure(o)/3)/o,m=U1(g-4),s=t-.5<0?-m:m;break;case 6:if(t<1e-150)return(a?-1:1)*FT(e,t);v=4*(t-t*t),y=fre(v,dre),p=6*(1+gre*(1/y-1));do f=p*p,h=f*f,d=p*h,c=p,p=2*(8*v*d-270*f+2187)/(5*(4*v*h-216*p-243));while(cre((p-c)/p)>i);p=U1(p-e),s=t-.5<0?-p:p;break;default:e>j9?s=F9(2*t)*V9:e<3?(n=.2742-e*.0242143,t>n?s=W9(e,t):s=W1(e,t)):(n=NT(1,B9(e/-.654)),t>n?s=FT(e,t):s=W1(e,t))}else e>j9?s=-F9(2*t)*V9:e<3?(n=.2742-e*.0242143,t>n?s=W9(e,t):s=W1(e,t)):(n=NT(1,B9(e/-.654)),t>n?s=FT(e,t):s=W1(e,t));return a?-s:s}var mre=vre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var yre=mre;function _re(e,t,r){var n,i,o,a;return i=t/2,o=1-i,n=e*2,a=yre(n,i,o),r&&(r.value=a*a/(n+a*a)),n/(n+a*a)}var bre=_re;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var j1=ou,wre=S0,G9=Rr,Sre=gr,qa=M4,fr=[0,0,0,0,0,0,0],Bp=[0,0,0,0];function Tre(e,t,r){var n,i,o,a,s,l,u;return n=wre(2*r),n/=-G9(e/2),Bp[0]=n,l=t-e,a=l*l,s=a*l,fr[0]=-l*qa/2,fr[1]=(1-2*l)/8,fr[2]=-(l*qa/48),fr[3]=-1/192,fr[4]=-l*qa/3840,fr[5]=0,fr[6]=0,Bp[1]=j1(fr,n),fr[0]=l*qa*(3*l-2)/12,fr[1]=(20*a-12*l+1)/128,fr[2]=l*qa*(20*l-1)/960,fr[3]=(16*a+30*l-15)/4608,fr[4]=l*qa*(21*l+32)/53760,fr[5]=(-(32*a)+63)/368640,fr[6]=-l*qa*(120*l+17)/25804480,Bp[2]=j1(fr,n),fr[0]=l*qa*(-75*a+80*l-16)/480,fr[1]=(-1080*s+868*a-90*l-45)/9216,fr[2]=l*qa*(-1190*a+84*l+373)/53760,fr[3]=(-2240*s-2508*a+2100*l-165)/368640,fr[4]=0,fr[5]=0,fr[6]=0,Bp[3]=j1(fr,n),o=j1(Bp,1/e),i=o*o,u=-Sre(-i/2),i===0?.5:(1+o*G9((1+u)/i))/2}var kre=Tre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var H9=Xe,Pre=Id,G1=Pre/4;function Ere(e,t){return r;function r(n){var i,o,a;return a=1-n,a===0?[-G1,-G1]:n===0?[-G1,-G1]:(o=H9(n)+t*H9(a)+e,i=1/n-t/a,[o,i])}}var LX=Ere;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Cre=be;function Are(e){return e===0||Cre(e)?e:e<0?-1:1}var xre=Are;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Mre=xre,OX=Mre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/tools/roots.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var X9=OX,H1=$e,Ire=xd,$T=Id;function Lre(e,t,r,n,i,o){var a,s,l,u,c,f,h,d,p,g;p=0,a=0,c=t,u=Ire(1,1-i),h=$T,s=$T,l=$T,f=o;do{if(a=p,l=s,s=h,d=e(c),p=d[0],g=d[1],f-=1,p===0)break;if(g===0?(a===0&&(c===r?t=n:t=r,a=e(t),h=t-c),X9(a)*X9(p)<0?h<0?h=(c-r)/2:h=(c-n)/2:h<0?h=(c-n)/2:h=(c-r)/2):h=p/g,H1(h*2)>H1(l)&&(h=h>0?(c-r)/2:(c-n)/2),t=c,c-=h,c<=r){if(h=.5*(t-r),c=t-h,c===r||c===n)break}else if(c>=n&&(h=.5*(t-n),c=t-h,c===r||c===n))break;h>0?n=t:r=t}while(f&&H1(c*u)<H1(h));return c}var RX=Lre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ore(e){return e===0?-1:-1+e*(-5+e*5)}var Rre=Ore;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Dre(e){return e===0?1:1+e*(21+e*(-69+e*46))}var Nre=Dre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Fre(e){return e===0?7:7+e*(-2+e*(33+e*(-62+e*31)))}var $re=Fre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Bre(e){return e===0?25:25+e*(-52+e*(-17+e*(88+e*(-115+e*46))))}var zre=Bre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Vre(e){return e===0?7:7+e*(12+e*(-78+e*52))}var Ure=Vre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Wre(e){return e===0?-7:-7+e*(2+e*(183+e*(-370+e*185)))}var jre=Wre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Gre(e){return e===0?-533:-533+e*(776+e*(-1835+e*(10240+e*(-13525+e*5410))))}var Hre=Gre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Xre(e){return e===0?-1579:-1579+e*(3747+e*(-3372+e*(-15821+e*(45588+e*(-45213+e*15071)))))}var Yre=Xre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Kre(e){return e===0?449:449+e*(-1259+e*(-769+e*(6686+e*(-9260+e*3704))))}var Zre=Kre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qre(e){return e===0?63149:63149+e*(-151557+e*(140052+e*(-727469+e*(2239932+e*(-2251437+e*750479)))))}var Jre=qre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Qre(e){return e===0?29233:29233+e*(-78755+e*(105222+e*(146879+e*(-1602610+e*(3195183+e*(-2554139+e*729754))))))}var tne=Qre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ene(e){return e===0?1:1+e*(-13+e*13)}var rne=ene;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function nne(e){return e===0?1:1+e*(21+e*(-69+e*46))}var ine=nne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Gf=ou,one=S0,ane=$e,sne=gr,Y9=Xe,lne=Rr,une=b0,cne=E4,fne=LX,hne=RX,dne=Rre,pne=Nre,gne=$re,vne=zre,mne=Ure,yne=jre,_ne=Hre,bne=Yre,wne=Zre,Sne=Jre,Tne=tne,kne=rne,Pne=ine,Ce=[0,0,0,0,0,0],zp=[0,0,0,0];function Ene(e,t,r){var n,i,o,a,s,l,u,c,f,h,d,p,g,m,v,y,b,w,T,S;return s=one(2*e)/-lne(t/2),w=une(r),b=cne(r),zp[0]=s,v=w*w,y=b*b,g=w*b,p=g*g,d=p*g,h=p*p,f=p*d,c=d*d,u=h*d,Ce[0]=(2*v-1)/(3*g),Ce[1]=-dne(v)/(36*p),Ce[2]=pne(v)/(1620*d),Ce[3]=gne(v)/(6480*h),Ce[4]=vne(v)/(90720*f),Ce[5]=0,zp[1]=Gf(Ce,s),Ce[0]=-mne(v)/(405*d),Ce[1]=yne(v)/(2592*h),Ce[2]=-_ne(v)/(204120*f),Ce[3]=-bne(v)/(2099520*c),Ce[4]=0,Ce[5]=0,zp[2]=Gf(Ce,s),Ce[0]=wne(v)/(102060*f),Ce[1]=-Sne(v)/(20995200*c),Ce[2]=Tne(v)/(36741600*u),Ce[3]=0,Ce[4]=0,Ce[5]=0,zp[3]=Gf(Ce,s),l=Gf(zp,1/t),o=b/w,o*=o,m=-(l*l)/(2*v)+Y9(v)+y*Y9(y)/v,ane(l)<.7?(Ce[0]=v,Ce[1]=g,Ce[2]=(1-2*v)/3,Ce[3]=kne(v)/(36*g),Ce[4]=Pne(v)/(270*p),Ce[5]=0,S=Gf(Ce,l)):(T=sne(m),Ce[0]=T,Ce[1]=o,Ce[2]=0,Ce[3]=3*o*(3*o+1)/6,Ce[4]=4*o*(4*o+1)*(4*o+2)/24,Ce[5]=5*o*(5*o+1)*(5*o+2)*(5*o+3)/120,S=Gf(Ce,T),(S-v)*l<0&&(S=1-S)),l<0?(i=0,n=v):(i=v,n=1),(S<i||S>n)&&(S=(i+n)/2),a=fne(-m,o),S=hne(a,S,i,n,32,100),S}var Cne=Ene,nb={exports:{}},rC={exports:{}},Nv=1e3,Fv=Nv*60,$v=Fv*60,Bv=$v*24,Ane=Bv*365.25,xne=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return Mne(e);if(r==="number"&&isNaN(e)===!1)return t.long?Lne(e):Ine(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Mne(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!!t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Ane;case"days":case"day":case"d":return r*Bv;case"hours":case"hour":case"hrs":case"hr":case"h":return r*$v;case"minutes":case"minute":case"mins":case"min":case"m":return r*Fv;case"seconds":case"second":case"secs":case"sec":case"s":return r*Nv;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Ine(e){return e>=Bv?Math.round(e/Bv)+"d":e>=$v?Math.round(e/$v)+"h":e>=Fv?Math.round(e/Fv)+"m":e>=Nv?Math.round(e/Nv)+"s":e+"ms"}function Lne(e){return X1(e,Bv,"day")||X1(e,$v,"hour")||X1(e,Fv,"minute")||X1(e,Nv,"second")||e+" ms"}function X1(e,t,r){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}(function(e,t){t=e.exports=i.debug=i.default=i,t.coerce=l,t.disable=a,t.enable=o,t.enabled=s,t.humanize=xne,t.names=[],t.skips=[],t.formatters={};var r;function n(u){var c=0,f;for(f in u)c=(c<<5)-c+u.charCodeAt(f),c|=0;return t.colors[Math.abs(c)%t.colors.length]}function i(u){function c(){if(!!c.enabled){var f=c,h=+new Date,d=h-(r||h);f.diff=d,f.prev=r,f.curr=h,r=h;for(var p=new Array(arguments.length),g=0;g<p.length;g++)p[g]=arguments[g];p[0]=t.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");var m=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,function(y,b){if(y==="%%")return y;m++;var w=t.formatters[b];if(typeof w=="function"){var T=p[m];y=w.call(f,T),p.splice(m,1),m--}return y}),t.formatArgs.call(f,p);var v=c.log||t.log||console.log.bind(console);v.apply(f,p)}}return c.namespace=u,c.enabled=t.enabled(u),c.useColors=t.useColors(),c.color=n(u),typeof t.init=="function"&&t.init(c),c}function o(u){t.save(u),t.names=[],t.skips=[];for(var c=(typeof u=="string"?u:"").split(/[\s,]+/),f=c.length,h=0;h<f;h++)!c[h]||(u=c[h].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.substr(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function a(){t.enable("")}function s(u){var c,f;for(c=0,f=t.skips.length;c<f;c++)if(t.skips[c].test(u))return!1;for(c=0,f=t.names.length;c<f;c++)if(t.names[c].test(u))return!0;return!1}function l(u){return u instanceof Error?u.stack||u.message:u}})(rC,rC.exports);(function(e,t){t=e.exports=rC.exports,t.log=i,t.formatArgs=n,t.save=o,t.load=a,t.useColors=r,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:s(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function r(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(l){try{return JSON.stringify(l)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}};function n(l){var u=this.useColors;if(l[0]=(u?"%c":"")+this.namespace+(u?" %c":" ")+l[0]+(u?"%c ":" ")+"+"+t.humanize(this.diff),!!u){var c="color: "+this.color;l.splice(1,0,c,"color: inherit");var f=0,h=0;l[0].replace(/%[a-zA-Z%]/g,function(d){d!=="%%"&&(f++,d==="%c"&&(h=f))}),l.splice(h,0,c)}}function i(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(l){try{l==null?t.storage.removeItem("debug"):t.storage.debug=l}catch{}}function a(){var l;try{l=t.storage.debug}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=process.env.DEBUG),l}t.enable(a());function s(){try{return window.localStorage}catch{}}})(nb,nb.exports);/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var One=34028234663852886e22,F2=One;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Rne=nb.exports,K9=EX,Dne=$e,Nne=gr,Z9=Xe,Fne=F2,q9=Rne("gammaincinv:higher_newton");function $ne(e,t,r,n,i,o,a,s){var l,u,c,f,h,d,p,g,m,v,y,b,w,T;T=e,y=1,b=1,d=t*t,u=e;do{if(T=e,p=T*T,r===0){if(l=(1-t)*Z9(T)+T+o,l>Z9(Fne))return q9("Warning: overflow problems in one or more steps of the computation. The initial approximation to the root is returned."),u;w=Nne(l)}else w=-a*T;s?(g=K9(T,t,!0,!1),c=-w*(g-n)):(m=K9(T,t,!0,!0),c=w*(m-i)),w=c,n>1e-120||b>1?(f=.5*(T-t+1)/T,h=(2*p-4*T*t+4*T+2*d-3*t+1)/p,h/=6,e=T+w*(1+w*(f+w*h))):e=T+w,y=Dne(T/e-1),b+=1,T=e,T<0&&(T=u,b=100)}while(y>2e-14&&b<35);return(y>2e-14||b>99)&&q9("Warning: the number of iterations in the Newton method reached the upper limit N=35. The last value obtained for the root is given as output."),v=T||0,v}var Bne=$ne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zne(e){return e===0?0:0+e*(1+e*(1+e*(1.5+e*(2.6666666666666665+e*(5.208333333333333+e*10.8)))))}var Vne=zne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Une(e){return e===0?1:1+e*(1+e*(.3333333333333333+e*(.027777777777777776+e*(-.003703703703703704+e*(.0002314814814814815+e*5878894767783657e-20)))))}var Wne=Une;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jne=$e,Gne=gr,J9=Xe,Hne=ou,Xne=Vne,Yne=Wne,Kne=1e-8,Zne=.08333333333333333,qne=.008333333333333333,Hf=[1,0,0,0,0,0];function Jne(e){var t,r,n,i,o,a,s,l,u;if(u=e*e*.5,e===0?o=0:e<-1?(l=Gne(-1-u),o=Xne(l)):e<1?(l=e,o=Yne(l)):(l=11+u,a=J9(l),o=l+a,l=1/l,t=a*a,r=t*a,n=r*a,i=n*a,Hf[1]=(2-a)*.5,Hf[2]=(-9*a+6+2*t)/6,Hf[3]=-(3*r+36*a-22*t-12)*Zne,Hf[4]=(60+350*t-300*a-125*r+12*n)/60,Hf[5]=-(-120-274*n+900*a-1700*t+1125*r+20*i)*qne,o+=a*l*Hne(Hf,l)),l=1,e>-3.5&&e<-.03||e>.03&&e<40){l=1,s=o;do o=s*(u+J9(s))/(s-1),l=jne(s/o-1),s=o;while(l>Kne)}return o}var DX=Jne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Qne=.9189385332046728,NX=Qne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tie=[1.9963790515900766,-.0017971032528832887,13129285796384672e-21,-2340875228178749e-22,72291210671127e-22,-3280997607821e-22,19875070901e-21,-1509214183e-21,1375340084e-22,-145728923e-22,17532367e-22,-2351465e-22,346551e-22,-55471e-22,9548e-22,-1748e-22,332e-22,-58e-22];function eie(e,t){var r,n,i,o,a;n=0,i=0,r=t+t,a=e;do o=i,i=n,n=r*i-o+tie[a],a-=1;while(a>=0);return(n-o)/2}var rie=eie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function nie(e){return e===0?.025721014990011306:.025721014990011306+e*(.08247596616699963+e*(-.0025328157302663564+e*(.0006099292666946337+e*(-.00033543297638406+e*.000250505279903))))}var iie=nie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function oie(e){return e===0?.08333333333333333:.08333333333333333+e*(-.002777777777777778+e*(.0007936507936507937+e*-.0005952380952380953))}var aie=oie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var BT=Ld,Y1=Xe,zT=NX,sie=N2,lie=F2,uie=rie,cie=iie,fie=aie,hie=.30865217988013566;function die(e){var t;return e<sie?lie:e<1?BT(e+1)-(e+.5)*Y1(e)+e-zT:e<2?BT(e)-(e-.5)*Y1(e)+e-zT:e<3?BT(e-1)-(e-.5)*Y1(e)+e-zT+Y1(e-1):e<12?(t=18/(e*e)-1,uie(17,t)/(12*e)):(t=1/(e*e),e<1e3?cie(t)/(hie+t)/e:fie(t)/e)}var pie=die;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Q9=gr,gie=Fa,vie=Xe,mie=F2,yie=R2,_ie=pie;function bie(e){return e>=3?Q9(_ie(e)):e>0?gie(e)/(Q9(-e+(e-.5)*vie(e))*yie):mie}var wie=bie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Sie(e){var t,r,n;return e===0?-.3333333333438:(e<0?t=-e:t=e,t<=1?(r=-.3333333333438+e*(-.2070740359969+e*(-.05041806657154+e*(-.004923635739372+e*-4293658292782e-17))),n=1+e*(.7045554412463+e*(.2118190062224+e*(.03048648397436+e*.001605037988091)))):(e=1/e,r=-4293658292782e-17+e*(-.004923635739372+e*(-.05041806657154+e*(-.2070740359969+e*-.3333333333438))),n=.001605037988091+e*(.03048648397436+e*(.2118190062224+e*(.7045554412463+e*1)))),r/n)}var Tie=Sie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kie=$e,Pie=Xe,Eie=DX,Cie=Tie;function Aie(e){var t;return kie(e)<1?Cie(e):(t=Eie(e),Pie(e/(t-1))/e)}var xie=Aie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Mie(e){var t,r,n;return e===0?-.0172847633523:(e<0?t=-e:t=e,t<=1?(r=-.0172847633523+e*(-.0159372646475+e*(-.00464910887221+e*(-.00060683488776+e*-614830384279e-17))),n=1+e*(.764050615669+e*(.297143406325+e*(.0579490176079+e*.00574558524851)))):(e=1/e,r=-614830384279e-17+e*(-.00060683488776+e*(-.00464910887221+e*(-.0159372646475+e*-.0172847633523))),n=.00574558524851+e*(.0579490176079+e*(.297143406325+e*(.764050615669+e*1)))),r/n)}var Iie=Mie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Lie(e){var t,r,n;return e===0?-.0172839517431:(e<0?t=-e:t=e,t<=1?(r=-.0172839517431+e*(-.0146362417966+e*(-.00357406772616+e*(-.000391032032692+e*249634036069e-17))),n=1+e*(.690560400696+e*(.249962384741+e*(.0443843438769+e*.00424073217211)))):(e=1/e,r=249634036069e-17+e*(-.000391032032692+e*(-.00357406772616+e*(-.0146362417966+e*-.0172839517431))),n=.00424073217211+e*(.0443843438769+e*(.249962384741+e*(.690560400696+e*1)))),r/n)}var Oie=Lie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Rie(e){var t,r,n;return e===0?.99994466948:(e<0?t=-e:t=e,t<=1?(r=.99994466948+e*(104.649839762+e*(857.204033806+e*(731.901559577+e*45.5174411671))),n=1+e*(104.526456943+e*(823.313447808+e*(3119.93802124+e*3970.03311219)))):(e=1/e,r=45.5174411671+e*(731.901559577+e*(857.204033806+e*(104.649839762+e*.99994466948))),n=3970.03311219+e*(3119.93802124+e*(823.313447808+e*(104.526456943+e*1)))),r/n)}var Die=Rie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Nie=Xe,Fie=Iie,$ie=Oie,Bie=Die;function zie(e){var t,r;return e<-5?(r=e*e,t=Nie(-e),(12-r-6*(t*t))/(12*r*e)):e<-2?Fie(e):e<2?$ie(e):e<1e3?(r=1/e,Bie(e)/(-12*e)):-1/(12*e)}var Vie=zie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Uie(e){var t,r,n;return e===0?.0495346498136:(e<0?t=-e:t=e,t<=1?(r=.0495346498136+e*(.0299521337141+e*(.00688296911516+e*(.000512634846317+e*-201411722031e-16))),n=1+e*(.759803615283+e*(.261547111595+e*(.0464854522477+e*.00403751193496)))):(e=1/e,r=-201411722031e-16+e*(.000512634846317+e*(.00688296911516+e*(.0299521337141+e*.0495346498136))),n=.00403751193496+e*(.0464854522477+e*(.261547111595+e*(.759803615283+e*1)))),r/n)}var Wie=Uie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jie(e){var t,r,n;return e===0?.00452313583942:(e<0?t=-e:t=e,t<=1?(r=.00452313583942+e*(.00120744920113+e*(-789724156582e-16+e*(-504476066942e-16+e*-535770949796e-17))),n=1+e*(.912203410349+e*(.405368773071+e*(.0901638932349+e*.00948935714996)))):(e=1/e,r=-535770949796e-17+e*(-504476066942e-16+e*(-789724156582e-16+e*(.00120744920113+e*.00452313583942))),n=.00948935714996+e*(.0901638932349+e*(.405368773071+e*(.912203410349+e*1)))),r/n)}var Gie=jie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Hie(e){var t,r,n;return e===0?.00439937562904:(e<0?t=-e:t=e,t<=1?(r=.00439937562904+e*(.000487225670639+e*(-.000128470657374+e*(529110969589e-17+e*15716677175e-17))),n=1+e*(.794435257415+e*(.333094721709+e*(.0703527806143+e*.00806110846078)))):(e=1/e,r=15716677175e-17+e*(529110969589e-17+e*(-.000128470657374+e*(.000487225670639+e*.00439937562904))),n=.00806110846078+e*(.0703527806143+e*(.333094721709+e*(.794435257415+e*1)))),r/n)}var Xie=Hie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Yie(e){var t,r,n;return e===0?-.0011481191232:(e<0?t=-e:t=e,t<=1?(r=-.0011481191232+e*(-.112850923276+e*(1.51623048511+e*(-.218472031183+e*.0730002451555))),n=1+e*(14.2482206905+e*(69.7360396285+e*(218.938950816+e*277.067027185)))):(e=1/e,r=.0730002451555+e*(-.218472031183+e*(1.51623048511+e*(-.112850923276+e*-.0011481191232))),n=277.067027185+e*(218.938950816+e*(69.7360396285+e*(14.2482206905+e*1)))),r/n)}var Kie=Yie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Zie(e){var t,r,n;return e===0?-.000145727889667:(e<0?t=-e:t=e,t<=1?(r=-.000145727889667+e*(-.290806748131+e*(-13.308504545+e*(199.722374056+e*-11.4311378756))),n=1+e*(139.612587808+e*(2189.01116348+e*(7115.24019009+e*45574.6081453)))):(e=1/e,r=-11.4311378756+e*(199.722374056+e*(-13.308504545+e*(-.290806748131+e*-.000145727889667))),n=45574.6081453+e*(7115.24019009+e*(2189.01116348+e*(139.612587808+e*1)))),r/n)}var qie=Zie;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var t7=Xe,Jie=Wie,Qie=Gie,toe=Xie,eoe=Kie,roe=qie;function noe(e){var t,r;return e<-8?(t=e*e,r=t7(-e)/e,(-30+e*r*(6*t*r*r-12+t))/(12*e*t*t)):e<-4?Jie(e)/(e*e):e<-2?Qie(e):e<2?toe(e):e<10?(t=1/e,eoe(t)/(e*e)):e<100?(t=1/e,roe(t)/(e*e)):-t7(e)/(12*e*e*e)}var ioe=noe;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ooe=nb.exports,e7=ou,vo=Ld,aoe=S0,r7=Fa,K1=Rr,n7=$e,Xf=gr,soe=au,loe=Dr,Di=Xe,uoe=R2,coe=F2,foe=wX,hoe=Bne,i7=DX,o7=wie,doe=xie,poe=Vie,goe=ioe,voe=ooe("gammaincinv:compute"),ul=.5,VT=.3333333333333333,moe=.25,a7=.2,s7=.16666666666666666,yoe=.08333333333333333,_oe=.041666666666666664,Ni=[0,0,0,0,0];function boe(e,t,r){var n,i,o,a,s,l,u,c,f,h,d,p,g,m,v,y,b,w,T,S,k,E,P,C,A,L,R,D,F,z,Y,K,et,Tt,Ct,vt,wt,Kt,Z,it,tt,bt,kt,It;if(t<ul?(a=!0,s=t,bt=-1):(a=!1,s=r,bt=1),Z=0,n7(e-1)<1e-4&&(it=0,a?t<.001?(K=t*t,D=K*t,Y=D*t,S=Y*t,T=S*t,k=t+K*ul+D*VT+Y*moe+S*a7+T*s7):k=-Di(1-t):k=-Di(r),e===1?(Z=2,Tt=k):(o=vo(e),Z=1)),r<1e-30&&e<ul&&(it=0,k=-Di(r*r7(e))+(e-1)*Di(-Di(r*r7(e))),Z=1,o=vo(e)),e>1&&e<500&&t<1e-80){for(it=0,l=1/e,n=1/(e+1),k=(vo(e+1)+Di(t))*l,k=Xf(k),m=k,Kt=0;Kt<10;Kt++)k=m*Xf(k*l)*loe(1-k*n,l);Z=1,o=vo(e)}if(u=1/e*(Di(t)+vo(e+1)),u<Di(a7*(1+e))&&Z===0&&(tt=Xf(u),it=0,E=e*e,et=E*e,F=et*e,v=e+1,d=v*v,h=v*d,f=d*d,y=e+2,c=y*y,b=e+3,Ni[0]=1,Ni[1]=1/v,Ni[2]=ul*(3*e+5)/(d*y),Ni[3]=VT*(31+8*E+33*e)/(h*y*b),Ni[4]=_oe*(2888+1179*et+125*F+3971*E+5661*e)/(f*c*b*(e+4)),k=tt*e7(Ni,tt),o=vo(e),Z=1),e<10&&Z===0&&(p=K1(e)/(o7(e)*uoe),g=soe(.02,p),r<g&&(it=0,vt=1-e,L=vt*vt,R=L*vt,w=K1(-2/e*Di(r/p)),k=e*i7(w),wt=Di(k),k>5?(P=wt*wt,C=P*wt,A=C*wt,tt=1/k,Ni[0]=wt-1,Ni[1]=(3*vt-2*vt*wt+P-2*wt+2)*ul,Ni[2]=(24*vt*wt-11*L-24*vt-6*P+12*wt-12-9*vt*P+6*L*wt+2*C)*s7,Ni[3]=(-12*R*wt+8.04*vt*P-114*L*wt+(72+36*P)+(3*A-72*wt+162)*(vt-168*vt*wt)-(12*C+25*R)-(22*vt*C+36*L*P+120*L))*yoe,Ni[4]=0,k=k-wt+vt*tt*e7(Ni,tt)):(tt=1/k,P=wt*wt,Ct=wt-1,kt=wt-vt*tt*Ct,kt<k&&(k-=kt)),o=vo(e),Z=1)),n7(s-ul)<1e-5&&Z===0&&(it=0,l=1/e,k=e-VT+(.019753086419753086+.007211444248481286*l)*l,o=vo(e),Z=1),e<1&&Z===0&&(it=0,a?k=Xf(1/e*(Di(s)+vo(e+1))):k=Xf(1/e*(Di(1-s)+vo(e+1))),o=vo(e),Z=1),Z===0)if(it=1,l=1/e,tt=aoe(2*s),w=bt*tt/K1(e*ul),tt<coe)w+=(doe(w)+(poe(w)+goe(w)*l)*l)*l,k=e*i7(w),It=w,z=-K1(e/foe)*Xf(-ul*e*It*It)/o7(e),i=1/z;else return voe("Warning: Overflow problems in one or more steps of the computation."),NaN;return Z<2&&(Tt=hoe(k,e,it,t,r,o,i,a)),Tt}var woe=boe;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var l7=be,Soe=N2,u7=sr,c7=woe;function Toe(e,t,r){return l7(e)||l7(t)?NaN:t<Soe?NaN:e>1||e<0?NaN:r===!0?e===0?u7:e===1?0:c7(t,1-e,e):e===0?0:e===1?u7:c7(t,e,1-e)}var koe=Toe;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Poe=koe,Eoe=Poe;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Coe=5e-324,Aoe=Coe;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var f7=Eoe,h7=Xe,xoe=Rr,Moe=Aoe,Ioe=LX,Loe=RX;function Ooe(e,t,r,n){var i,o,a,s,l,u,c,f,h,d,p,g,m,v,y,b,w,T,S,k,E,P,C,A,L,R,D,F,z,Y;return r<n?l=f7(r,t,!0):l=f7(n,t,!1),l/=e,v=t/e,F=xoe(1+v),T=F*F,S=T*F,k=T*T,E=S*T,P=S*S,C=k*S,A=k*k,L=E*k,c=E*E,D=l-v,y=D*D,b=y*D,w=y*y,R=F+1,f=R*R,h=R*f,d=f*f,p=(F+2)*(F-1)/(3*F),p+=(S+9*T+21*F+5)*D/(36*T*R),p-=(k-13*S+69*T+167*F+46)*y/(1620*f*S),p-=(7*E+21*k+70*S+26*T-93*F-31)*b/(6480*h*k),p-=(75*P+202*E+188*k-888*S-1345*T+118*F+138)*w/(272160*d*E),g=(28*k+131*S+402*T+581*F+208)*(F-1)/(1620*R*S),g-=(35*P-154*E-623*k-1636*S-3983*T-3514*F-925)*D/(12960*f*k),g-=(2132*C+7915*P+16821*E+35066*k+87490*S+141183*T+95993*F+21640)*y/(816480*E*h),g-=(11053*A+53308*C+117010*P+163924*E+116188*k-258428*S-677042*T-481940*F-105497)*b/(14696640*d*P),m=-((3592*C+8375*P-1323*E-29198*k-89578*S-154413*T-116063*F-29632)*(F-1))/(816480*E*f),m-=(442043*L+2054169*A+3803094*C+3470754*P+2141568*E-2393568*k-19904934*S-34714674*T-23128299*F-5253353)*D/(146966400*P*h),m-=(116932*c+819281*L+2378172*A+4341330*C+6806004*P+10622748*E+18739500*k+30651894*S+30869976*T+15431867*F+2919016)*y/(146966400*d*C),u=l+p/e+g/(e*e)+m/(e*e*e),u<=0&&(u=Moe),z=u-v*h7(u)+(1+v)*h7(1+v)-v,i=1/(1+v),a=u<v?i:0,s=u<v?1:i,Y=(a+s)/2,o=Ioe(z,v),Loe(o,Y,a,s,32,100)}var Roe=Ooe;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/tools/roots.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Nr=$e,Doe=xd,UT=OX,Noe=af,WT=Id;function Foe(e,t,r,n,i,o){var a,s,l,u,c,f,h,d,p,g,m,v,y,b,w,T;b=0,s=!1,f=t,c=Doe(1,1-i),p=Noe(1e7*t,1e7),h=0,l=p,u=p,d=o;do{if(h=b,u=l,l=p,y=e(f),b=y[0],w=y[1],T=y[2],d-=1,b===0)break;if(w===0?(h===0&&(f===r?t=n:t=r,h=e(t),p=t-f),UT(h)*UT(b)<0?p<0?p=(f-r)/2:p=(f-n)/2:p<0?p=(f-n)/2:p=(f-r)/2):T===0?p=b/w:(g=2*b,v=2*w-b*(T/w),Nr(v)<1&&Nr(g)>=Nr(v)*WT?p=b/w:p=g/v,p*w/b<0&&(p=b/w,Nr(p)>2*Nr(t)&&(p=(p<0?-1:1)*2*Nr(t)))),a=Nr(p/u),a>.8&&a<2&&(p=p>0?(f-r)/2:(f-n)/2,Nr(p)>f&&(p=UT(p)*f),u=p*3),t=f,f-=p,f<r){if(Nr(r)<1&&Nr(f)>1&&WT/Nr(f)<Nr(r)?m=1e3:m=f/r,Nr(m)<1&&(m=1/m),!s&&m>0&&m<3)p=.99*(t-r),f=t-p,s=!0;else if(p=(t-r)/2,f=t-p,f===r||f===n)break}else if(f>n){if(Nr(n)<1&&Nr(f)>1&&WT/Nr(f)<Nr(n)?m=1e3:m=f/n,Nr(m)<1&&(m=1/m),!s&&m>0&&m<3)p=.99*(t-n),f=t-p,s=!0;else if(p=(t-n)/2,f=t-p,f===r||f===n)break}p>0?n=t:r=t}while(d&&Nr(f*c)<Nr(p));return f}var $oe=Foe;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Boe=IX.assign,zoe=$e,Voe=Id,jT=of;function Uoe(e,t,r,n){return i;function i(o){var a,s,l,u,c;return c=1-o,a=[0,0],Boe(o,e,t,!0,n,a,1,0),u=a[0]-r,s=a[1],n&&(s=-s),c===0&&(c=jT*64),o===0&&(o=jT*64),l=s*(-(c*e)+(t-2)*o+1),zoe(l)<c*o*Voe&&(l/=c*o),n&&(l=-l),s===0&&(s=(n?-1:1)*jT*64),[u,s,l]}}var Woe=Uoe,joe=ou,d7=x4,GT=Cd,p7=Ei,Goe=y4,Yf=cX,g7=Rr,Hoe=$e,v7=gr,la=Dr,m7=b0,Xoe=af,Yoe=au,y7=Xe,HT=of,_7=k4,b7=Rs,Koe=bre,Zoe=kre,qoe=Cne,Joe=Roe,Qoe=$oe,tae=Woe,eae=32,rae=1e3,zu=[0,0,0,0,0];function nae(e,t,r,n){var i,o,a,s,l,u,c,f,h,d,p,g,m,v,y,b,w,T,S,k,E,P,C,A,L,R,D,F,z;if(o=!1,n===0)return[1,0];if(r===0)return[0,1];if(e===1){if(t===1)return[r,1-r];g=t,t=e,e=g,g=n,n=r,r=g,o=!0}if(F=0,s=0,u=1,e===.5){if(t===.5)return F=m7(r*_7),F*=F,z=m7(n*_7),z*=z,[F,z];t>.5&&(g=t,t=e,e=g,g=n,n=r,r=g,o=!o)}if(t===.5&&e>=.5&&r!==1)E={},F=Koe(e,r,E),z=E.value;else{if(t===1)return r<n?e>1?(F=la(r,1/e),z=-GT(y7(r)/e)):(F=la(r,1/e),z=1-F):(F=v7(p7(-n)/e),z=-GT(p7(-n)/e)),o&&(g=z,z=F,F=g),[F,z];if(e+t>5)r>.5&&(g=t,t=e,e=g,g=n,n=r,r=g,o=!o),h=Yoe(e,t),f=Xoe(e,t),g7(h)>f-h&&h>5?(F=Zoe(e,t,r),z=1-F):(L=e+t,l=Goe(g7(e/L)),a=h/L,a>=.2&&a<=.8&&L>=10?(p=la(r,1/e),p<.0025&&e+t<200?F=p*la(e*Yf(e,t),1/e):F=qoe(r,L,l),z=1-F):(e<t&&(g=t,t=e,e=g,g=n,n=r,r=g,o=!o),d=0,t<2&&(d=Yf(e,t)),d===0?z=1:(z=la(t*n*d,1/t),F=1-z)),z>1e-5&&(F=Joe(e,t,r,n),z=1-F));else if(e<1&&t<1){if(k=(1-e)/(2-e-t),b=d7(k,e,t)-r,Hoe(b)/r<b7*3)return o?[1-k,k]:[k,1-k];b<0&&(g=t,t=e,e=g,g=n,n=r,r=g,o=!o,k=1-k),S=la(e*r*Yf(e,t),1/e),F=S/(1+S),z=1/(1+S),F>k&&(F=k),u=k}else e>1&&t>1?(k=(e-1)/(e+t-2),m=(t-1)/(e+t-2),T=d7(k,e,t)-r,T<0&&(g=t,t=e,e=g,g=n,n=r,r=g,g=m,m=k,k=g,o=!o),w=y7(r*e*Yf(e,t))/e,F=v7(w),z=F<.9?1-F:-GT(w),t<e&&F<.2&&(v=e-1,y=t-1,P=e*e,C=e*P,A=t*t,zu[0]=0,zu[1]=1,zu[2]=y/v,v*=v,zu[3]=y*(3*e*t+5*t+P-e-4)/(2*(e+2)*v),v*=e+1,zu[4]=y*(33*e*A+31*A+8*P*A-30*e*t-47*t+11*P*t+6*C*t+18+4*e-C+P*P-10*P),zu[4]/=3*(e+3)*(e+2)*v,F=joe(zu,F)),F>k&&(F=k),u=k):(t<e&&(g=t,t=e,e=g,g=n,n=r,r=g,o=!o),la(r,1/e)<.5?(F=la(r*e*Yf(e,t),1/e),F===0&&(F=HT),z=1-F):(z=la(1-la(r,t*Yf(e,t)),1/t),z===0&&(z=HT),F=1-z))}return F>.5&&(g=t,t=e,e=g,g=n,n=r,r=g,g=z,z=F,F=g,o=!o,R=1-u,D=1-s,s=R,u=D),s===0&&(o?(s=b7,F<s&&(F=s)):s=HT,F<s&&(F=s)),i=eae,F<1e-50&&(e<1||t<1)&&(i*=3,i/=2),c=tae(e,t,r<n?r:n,r>=n),F=Qoe(c,F,s,u,i,rae),F===s&&(F=0),o?[1-F,F]:[F,1-F]}var iae=nae;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oae=iae,aae=oae;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XT=be,w7=aae;function sae(e,t,r,n){return XT(e)||XT(t)||XT(r)?NaN:t<=0||r<=0?NaN:e<0||e>1?NaN:n?w7(t,r,1-e,e)[0]:w7(t,r,e,1-e)[0]}var lae=sae;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uae=lae,FX=uae;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cae=FX,YT=be;function fae(e,t,r){return YT(e)||YT(t)||YT(r)||t<=0||r<=0||e<0||e>1?NaN:cae(e,t,r)}var hae=fae;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function dae(e){return t;function t(){return e}}var pae=dae;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gae=pae,$2=gae;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vae=$2,mae=FX,KT=be;function yae(e,t){if(KT(e)||KT(t)||e<=0||t<=0)return vae(NaN);return r;function r(n){return KT(n)||n<0||n>1?NaN:mae(n,e,t)}}var _ae=yae;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bae=tn,$X=hae,wae=_ae;bae($X,"factory",wae);var Sae=$X;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Tae=Pi;function kae(e){return Tae(e)===e&&e>=0}var Pae=kae;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Eae=Pae,B2=Eae;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Cae=B2,Aae=x4,ZT=be,xae=Pi,Mae=sr;function Iae(e,t,r){return ZT(e)||ZT(t)||ZT(r)||r<0||r>1||!Cae(t)||t===Mae?NaN:e<0?0:e>=t?1:(e=xae(e+1e-7),Aae(r,e+1,t-e,!0,!0))}var Lae=Iae;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Oae=B2,Rae=$2,Dae=x4,qT=be,Nae=Pi,Fae=sr;function $ae(e,t){if(qT(e)||qT(t)||t<0||t>1||!Oae(e)||e===Fae)return Rae(NaN);return r;function r(n){return qT(n)?NaN:n<0?0:n>=e?1:(n=Nae(n+1e-7),Dae(t,n+1,e-n,!0,!0))}}var Bae=$ae;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zae=tn,BX=Lae,Vae=Bae;zae(BX,"factory",Vae);var Uae=BX;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The code is adapted from the Fortran routine from the FNLIB library of the [SLATEC Common Mathematical Library]{@link http://www.netlib.no/netlib/slatec/fnlib/}.
*
* The original code was developed by W. Fullerton of Los Alamos Scientific Laboratory, a governmental institution, and is therefore public domain.
*/var zX=[1276642195630063e-46,-3401102254316749e-45,1025680058010471e-43,-35475981581010704e-43,14292273559424982e-41,-6831888753985767e-39,39628370610464347e-38,-2868042435334643e-35,2683181998482699e-33,-3399615005417722e-31,6221098041892606e-29,-1809129475572494e-26,981082564692473e-23,-1384948176067564e-20,.16663894804518634],Wae=zX.length;function jae(e){var t,r,n,i,o;if(e<-1.1||e>1.1)return NaN;for(n=0,i=0,t=2*e,o=0;o<Wae;o++)r=n,n=i,i=t*n-r+zX[o];return(i-r)*.5}var Gae=jae;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The code is adapted from the Fortran routine from the FNLIB library of the [SLATEC Common Mathematical Library]{@link http://www.netlib.no/netlib/fn/d9lgmc.f}.
*
* The original code was developed by W. Fullerton of Los Alamos Scientific Laboratory, a governmental institution, and is therefore public domain.
*/var Hae=Dr,Xae=Gae,Yae=9490626562425156e-8,Kae=3745194030963158e291;function Zae(e){return e<10?NaN:e>=Kae?0:e<Yae?Xae(2*Hae(10/e,2)-1)/e:1/(e*12)}var qae=Zae;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The code is adapted from the Fortran routine from the FNLIB library of the [SLATEC Common Mathematical Library]{@link http://www.netlib.no/netlib/slatec/fnlib/albeta.f}.
*
* The original code was developed by W. Fullerton of Los Alamos Scientific Laboratory, a governmental institution, and is therefore public domain.
*/var Jae=Ld,S7=Ei,JT=Fa,Qae=af,tse=au,Z1=Xe,ese=NX,rse=pn,T7=sr,Vp=qae;function nse(e,t){var r,n,i;return n=tse(e,t),i=Qae(e,t),n<0?NaN:n===0?T7:i===T7?rse:n>=10?(r=Vp(n)+Vp(i)-Vp(n+i),-.5*Z1(i)+ese+r+(n-.5)*Z1(n/(n+i))+i*S7(-n/(n+i))):i>=10?(r=Vp(i)-Vp(n+i),Jae(n)+r+n-n*Z1(n+i)+(i-.5)*S7(-n/(n+i))):Z1(JT(n)*(JT(i)/JT(n+i)))}var ise=nse;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ose=ise,ase=ose;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var k7=iu,P7=be,sse=ase,lse=$e,E7=Xe,C7=pn;function nC(e,t){return P7(e)||P7(t)?NaN:!k7(e)||!k7(t)?NaN:e<0?nC(-e+t-1,t):t<0?C7:t===0?0:t===1?E7(lse(e)):e<t?C7:e-t<2?nC(e,e-t):-E7(e+1)-sse(e-t+1,t+1)}var use=nC;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cse=use,VX=cse;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var A7=B2,fse=VX,QT=be,hse=Ei,dse=gr,pse=Xe,gse=sr;function vse(e,t,r){var n;return QT(e)||QT(t)||QT(r)||r<0||r>1||!A7(t)||t===gse?NaN:A7(e)?e>t?0:r===0?e===0?1:0:r===1?e===t?1:0:(n=fse(t,e),n+=e*pse(r)+(t-e)*hse(-r),dse(n)):0}var mse=vse;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var x7=be;function yse(e,t){return x7(e)||x7(t)?NaN:e===t?1:0}var _se=yse;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bse=$2,M7=be;function wse(e){if(M7(e))return bse(NaN);return t;function t(r){return M7(r)?NaN:r===e?1:0}}var Sse=wse;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Tse=tn,UX=_se,kse=Sse;Tse(UX,"factory",kse);var Pse=UX;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var I7=B2,Ese=$2,Cse=VX,L7=Pse.factory,ek=be,Ase=Ei,xse=gr,Mse=Xe,Ise=sr;function Lse(e,t){if(ek(e)||ek(t)||!I7(e)||e===Ise||t<0||t>1)return Ese(NaN);if(t===0||e===0)return L7(0);if(t===1)return L7(e);return r;function r(n){var i;return ek(n)?NaN:I7(n)?n>e?0:(i=Cse(e,n),i+=n*Mse(t)+(e-n)*Ase(-t),xse(i)):0}}var Ose=Lse;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Rse=tn,WX=mse,Dse=Ose;Rse(WX,"factory",Dse);var Nse=WX;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Fse=Go,iC;function $se(e){return Fse(e)==="[object Array]"}Array.isArray?iC=Array.isArray:iC=$se;var Bse=iC;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zse=Bse,jX=zse;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Vse=jX;function Use(e){return typeof e=="object"&&e!==null&&!Vse(e)}var Wse=Use;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jse=Wse,Gse=jse;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Hse=/./,Xse=Hse;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Yse(e){return typeof e=="boolean"}var GX=Yse;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Kse=Boolean.prototype.toString,Zse=Kse;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qse=Zse;function Jse(e){try{return qse.call(e),!0}catch{return!1}}var Qse=Jse;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tle=A2,ele=Go,rle=Qse,nle=tle();function ile(e){return typeof e=="object"?e instanceof Boolean?!0:nle?rle(e):ele(e)==="[object Boolean]":!1}var HX=ile;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ole=GX,ale=HX;function sle(e){return ole(e)||ale(e)}var lle=sle;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XX=tn,I4=lle,ule=GX,cle=HX;XX(I4,"isPrimitive",ule);XX(I4,"isObject",cle);var YX=I4;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function fle(){return new Function("return this;")()}var hle=fle;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dle=typeof self=="object"?self:null,ple=dle;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gle=typeof window=="object"?window:null,vle=gle;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mle=typeof Qy=="object"?Qy:null,yle=mle;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _le=YX.isPrimitive,ble=hle,O7=ple,R7=vle,D7=yle;function wle(e){if(arguments.length){if(!_le(e))throw new TypeError("invalid argument. Must provide a boolean primitive. Value: `"+e+"`.");if(e)return ble()}if(O7)return O7;if(R7)return R7;if(D7)return D7;throw new Error("unexpected error. Unable to resolve global object.")}var Sle=wle;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Tle=Sle,kle=Tle;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ple=kle,N7=Ple(),Ele=N7.document&&N7.document.childNodes,Cle=Ele;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ale=Int8Array,xle=Ale;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Mle=Xse,Ile=Cle,Lle=xle;function Ole(){return typeof Mle=="function"||typeof Lle=="object"||typeof Ile=="function"}var Rle=Ole;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Dle(){return/^\s*function\s*([^(]*)/i}var KX=Dle;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Nle=KX,Fle=Nle(),$le=Fle;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ble=tn,ZX=KX,zle=$le;Ble(ZX,"REGEXP",zle);var Vle=ZX;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ule=jX;function Wle(e){if(typeof e!="function")throw new TypeError("invalid argument. Must provide a function. Value: `"+e+"`.");return t;function t(r){var n,i;if(!Ule(r)||(n=r.length,n===0))return!1;for(i=0;i<n;i++)if(e(r[i])===!1)return!1;return!0}}var jle=Wle;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Gle=jle,Hle=Gle;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Xle(e){return e!==null&&typeof e=="object"}var Yle=Xle;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Kle=tn,Zle=Hle,L4=Yle,qle=Zle(L4);Kle(L4,"isObjectLikeArray",qle);var Jle=L4;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Qle=Jle;function tue(e){return Qle(e)&&(e._isBuffer||e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e))}var eue=tue;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rue=eue,nue=rue;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iue=Go,oue=Vle.REGEXP,aue=nue;function sue(e){var t,r,n;if(r=iue(e).slice(8,-1),(r==="Object"||r==="Error")&&e.constructor){if(n=e.constructor,typeof n.name=="string")return n.name;if(t=oue.exec(n.toString()),t)return t[1]}return aue(e)?"Buffer":r}var lue=sue;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uue=lue,qX=uue;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cue=qX;function fue(e){var t;return e===null?"null":(t=typeof e,t==="object"?cue(e).toLowerCase():t)}var hue=fue;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var due=qX;function pue(e){return due(e).toLowerCase()}var gue=pue;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vue=Rle,mue=hue,yue=gue,_ue=vue()?yue:mue,bue=_ue;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wue=bue;function Sue(e){return wue(e)==="function"}var Tue=Sue;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kue=Tue,JX=kue;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Pue=Object.getPrototypeOf,Eue=Pue;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Cue(e){return e.__proto__}var Aue=Cue;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xue=Go,Mue=Aue;function Iue(e){var t=Mue(e);return t||t===null?t:xue(e.constructor)==="[object Function]"?e.constructor.prototype:e instanceof Object?Object.prototype:null}var Lue=Iue;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Oue=JX,Rue=Eue,Due=Lue,oC;Oue(Object.getPrototypeOf)?oC=Rue:oC=Due;var Nue=oC;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Fue=Nue;function $ue(e){return e==null?null:(e=Object(e),Fue(e))}var Bue=$ue;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zue=Bue,Vue=zue;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Uue=Gse,F7=JX,Wue=Vue,By=x2,jue=Go,Gue=Object.prototype;function Hue(e){var t;for(t in e)if(!By(e,t))return!1;return!0}function Xue(e){var t;return Uue(e)?(t=Wue(e),t?!By(e,"constructor")&&By(t,"constructor")&&F7(t.constructor)&&jue(t.constructor)==="[object Function]"&&By(t,"isPrototypeOf")&&F7(t.isPrototypeOf)&&(t===Gue||Hue(e)):!0):!1}var Yue=Xue;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Kue=Yue,QX=Kue;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Zue(e){return typeof e=="string"}var tY=Zue;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var que=String.prototype.valueOf,Jue=que;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Que=Jue;function tce(e){try{return Que.call(e),!0}catch{return!1}}var ece=tce;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rce=A2,nce=Go,ice=ece,oce=rce();function ace(e){return typeof e=="object"?e instanceof String?!0:oce?ice(e):nce(e)==="[object String]":!1}var eY=ace;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sce=tY,lce=eY;function uce(e){return sce(e)||lce(e)}var cce=uce;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rY=tn,O4=cce,fce=tY,hce=eY;rY(O4,"isPrimitive",fce);rY(O4,"isObject",hce);var dce=O4;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pce=Td.isPrimitive,gce=be;function vce(e){return pce(e)&&gce(e)}var nY=vce;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mce=Td.isObject,yce=be;function _ce(e){return mce(e)&&yce(e.valueOf())}var iY=_ce;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bce=nY,wce=iY;function Sce(e){return bce(e)||wce(e)}var Tce=Sce;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oY=tn,R4=Tce,kce=nY,Pce=iY;oY(R4,"isPrimitive",kce);oY(R4,"isObject",Pce);var Ece=R4;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $7=Td.isPrimitive,Cce=QX,Ace=dce.isPrimitive,B7=Ece,rk=x2;function xce(e,t){return Cce(t)?rk(t,"alpha")&&(e.alpha=t.alpha,!$7(e.alpha)||B7(e.alpha))?new TypeError("invalid option. `alpha` option must be a number primitive. Option: `"+e.alpha+"`."):rk(t,"alternative")&&(e.alternative=t.alternative,!Ace(e.alternative))?new TypeError("invalid option. `alternative` option must be a string primitive. Option: `"+e.alternative+"`."):rk(t,"p")&&(e.p=t.p,!$7(e.p)||B7(e.p))?new TypeError("invalid option. `p` option must be a number primitive. Option: `"+e.p+"`."):null:new TypeError("invalid argument. Options argument must be an object. Value: `"+t+"`.")}var Mce=xce;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ice=M2.isPrimitive;function Lce(e){return Ice(e)&&e>0}var aY=Lce;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Oce=M2.isObject;function Rce(e){return Oce(e)&&e.valueOf()>0}var sY=Rce;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Dce=aY,Nce=sY;function Fce(e){return Dce(e)||Nce(e)}var $ce=Fce;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var lY=tn,D4=$ce,Bce=aY,zce=sY;lY(D4,"isPrimitive",Bce);lY(D4,"isObject",zce);var Vce=D4;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Uce=9007199254740991,Wce=Uce;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jce=308,Gce=jce;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Hce=-308,Xce=Hce;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Yce=-324,Kce=Yce;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var z7=be,q1=Ad,V7=Dr,Zce=$e,U7=O2,qce=Wce,W7=Gce,Jce=Xce,Qce=Kce,tfe=qce+1,j7=1e308;function efe(e,t){var r,n;return z7(e)||z7(t)||q1(t)?NaN:q1(e)||e===0||t<Qce||Zce(e)>tfe&&t<=0?e:t>W7?0*e:t<Jce?(r=V7(10,-(t+W7)),n=e*j7*r,q1(n)?e:U7(n)/j7/r):(r=V7(10,-t),n=e*r,q1(n)?e:U7(n)/r)}var rfe=efe;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nfe=rfe,ife=nfe;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ofe=Vce,afe=QX,sfe=YX.isPrimitive,G7=x2,J1=ife;function lfe(e){var t,r,n;if(r=4,t=!0,arguments.length>0){if(!afe(e))throw new TypeError("invalid argument. First argument must be an options object. Value: `"+e+"`.");if(G7(e,"digits")){if(!ofe(e.digits))throw new TypeError("invalid option. `digits` option must be a positive integer. Option: `"+e.digits+"`.");r=e.digits}if(G7(e,"decision")){if(!sfe(e.decision))throw new TypeError("invalid option. `decision` option must be a boolean primitive. Option: `"+e.decision+"`.");t=e.decision}}switch(n="",n+=this.method,n+=`

`,n+="Alternative hypothesis: ",n+="True correlation coefficient is ",this.alternative){case"less":n+="less than ";break;case"greater":n+="greater than ";break;case"two-sided":default:n+="not equal to ";break}return n+=this.nullValue,n+=`

`,n+="    pValue: "+J1(this.pValue,-r)+`
`,n+="    statistic: "+J1(this.statistic,-r)+`
`,n+="    "+(1-this.alpha)*100+"% confidence interval: ["+J1(this.ci[0],-r)+","+J1(this.ci[1],-r)+"]",n+=`

`,t&&(n+="Test Decision: ",this.rejected?n+="Reject null in favor of alternative at "+this.alpha*100+"% significance level":n+="Fail to reject null in favor of alternative at "+this.alpha*100+"% significance level",n+=`
`),n}var ufe=lfe;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ja=j9t,cfe=uFt,H7=BFt,uY=Sae,ffe=Pi,hfe=ZH,Kf=Uae,nk=Nse,X7=Mce,dfe=ufe,Y7=1+1e-7;function K7(e,t,r){return e===0?0:uY(r,e,t-e+1)}function Z7(e,t,r){return e===t?1:uY(1-r,e+1,t-e)}function pfe(){var e,t,r,n,i,o,a,s,l,u,c,f,h,d,p;if(t={},cfe(arguments[0])){if(h=arguments[0],h.length!==2)throw new Error("invalid argument. If provided an array, it must have two elements. Value: `"+h+"`.");c=h[1]+h[0],h=h[0],arguments[1]&&(a=X7(t,arguments[1]))}else{if(h=arguments[0],c=arguments[1],!H7(h))throw new TypeError("invalid argument. Must provide a nonnegative integer or a two-element array. Value: `"+h+"`.");if(!H7(c))throw new TypeError("invalid argument. Must provide a nonnegative integer. Value: `"+c+"`.");if(h>c)throw new TypeError("invalid arguments. `x` cannot be larger than `n`. `x:"+h+", n:"+c+"`.");arguments[2]&&(a=X7(t,arguments[2]))}if(a)throw a;if(t.alpha===void 0?e=.05:e=t.alpha,e<0||e>1)throw new RangeError("invalid argument. Option `alpha` must be a number in the range 0 to 1. Value: `"+e+"`.");if(t.p===void 0?f=.5:f=t.p,f<0||f>1)throw new RangeError("invalid argument. Option `p` must be a probability. Value: `"+f+"`.");switch(o=t.alternative||"two-sided",i=h/c,o){case"less":n=Kf(h,c,f),r=[0,Z7(h,c,e)];break;case"greater":n=1-Kf(h-1,c,f),r=[K7(h,c,e),1];break;case"two-sided":if(l=nk(h,c,f),u=c*f,h===u)n=1;else if(h<u){for(d=0,p=hfe(u);p<=c;p++)nk(p,c,f)<=l*Y7&&(d+=1);n=Kf(h,c,f)+(1-Kf(c-d,c,f))}else{for(d=0,p=0;p<=ffe(u);p++)nk(p,c,f)<=l*Y7&&(d+=1);n=Kf(d-1,c,f)+(1-Kf(h-1,c,f))}r=[K7(h,c,e/2),Z7(h,c,e/2)];break;default:throw new Error("Invalid option. `alternative` must be either `two-sided`, `less` or `greater`. Value: `"+o+"`")}return s={},Ja(s,"rejected",n<=e),Ja(s,"alpha",e),Ja(s,"pValue",n),Ja(s,"statistic",i),Ja(s,"ci",r),Ja(s,"nullValue",f),Ja(s,"alternative",o),Ja(s,"method","Exact binomial test"),Ja(s,"print",dfe),s}var gfe=pfe;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vfe=gfe,N4=vfe;const mfe=od({id:"droprates",state:()=>({selected_pzk:"",selected_ik:"",selected_specie:"",selected_model:"a",usePooling:!1,plotChiSquared:!1})}),yfe=Array.prototype.concat,cY=Object.prototype.toString;function fY(e,t){var r=e>t?e:t;return Math.pow(10,17-~~(Math.log(r>0?r:-r)*Math.LOG10E))}const Oa=Array.isArray||function(t){return cY.call(t)==="[object Array]"};function zv(e){return cY.call(e)==="[object Function]"}function hn(e){return typeof e=="number"?e-e===0:!1}function _fe(e){return yfe.apply([],e)}const hY={calcRdx:fY,isArray:Oa,isFunction:zv,isNumber:hn,toVector:_fe};let ro=Math.random;function dY(e){if(typeof e!="function")throw new TypeError("fn is not a function");ro=e}function z2(e){return e.length||1}function pY(e){return e[0].length||1}function bfe(e){return{rows:z2(e),cols:pY(e)}}function F4(e,t){return Oa(t)?t.map(r=>F4(e,r)):e[t]}function gY(e,t){return F4(e,t)}function ib(e,t){if(Oa(t)){const n=tr(e.length).map(()=>new Array(t.length));return t.forEach(function(i,o){tr(e.length).forEach(function(a){n[a][o]=e[a][i]})}),n}const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=[e[n][t]];return r}function vY(e,t){return ib(e,t).map(r=>r[0])}function wfe(e){const t=z2(e),r=new Array(t);for(let n=0;n<t;n++)r[n]=[e[n][n]];return r}function Sfe(e){for(var t=z2(e)-1,r=new Array(t),n=0;t>=0;t--,n++)r[n]=[e[n][t]];return r}function Dl(e){var t=[],r,n,i,o,a;for(Oa(e[0])||(e=[e]),n=e.length,i=e[0].length,a=0;a<i;a++){for(r=new Array(n),o=0;o<n;o++)r[o]=e[o][a];t.push(r)}return t.length===1?t[0]:t}function Wn(e,t,r){var n,i,o,a,s;for(Oa(e[0])||(e=[e]),i=e.length,o=e[0].length,a=r?e:new Array(i),n=0;n<i;n++)for(a[n]||(a[n]=new Array(o)),s=0;s<o;s++)a[n][s]=t(e[n][s],n,s);return a.length===1?a[0]:a}function V2(e,t,r){var n,i,o,a,s;for(Oa(e[0])||(e=[e]),i=e.length,o=e[0].length,a=r?e:new Array(i),n=0;n<i;n++)for(a[n]||(a[n]=new Array(o)),o>0&&(a[n][0]=e[n][0]),s=1;s<o;s++)a[n][s]=t(a[n][s-1],e[n][s]);return a.length===1?a[0]:a}function $4(e,t){return Wn(e,t,!0)}function Rd(e,t,r){var n=new Array(e),i,o;for(zv(t)&&(r=t,t=e),i=0;i<e;i++)for(n[i]=new Array(t),o=0;o<t;o++)n[i][o]=r(i,o);return n}function mY(){return 0}function Tfe(){return 1}function kfe(e,t){return e===t?1:0}function $a(e,t){return hn(t)||(t=e),Rd(e,t,mY)}function Pfe(e,t){return hn(t)||(t=e),Rd(e,t,Tfe)}function Efe(e,t){return hn(t)||(t=e),Rd(e,t,ro)}function Rc(e,t){return hn(t)||(t=e),Rd(e,t,kfe)}function Cfe(e){var t=e.length,r,n;if(e.length!==e[0].length)return!1;for(r=0;r<t;r++)for(n=0;n<t;n++)if(e[n][r]!==e[r][n])return!1;return!0}function Afe(e){return $4(e,mY)}function yY(e,t,r,n){zv(n)||(n=!1);var i=[],o=fY(e,t),a=(t*o-e*o)/((r-1)*o),s=e,l;for(l=0;s<=t&&l<r;l++,s=(e*o+a*o*l)/o)i.push(n?n(s,l):s);return i}function tr(e,t,r){var n=[],i;if(r=r||1,t===void 0&&(t=e,e=0),e===t||r===0)return[];if(e<t&&r<0)return[];if(e>t&&r>0)return[];if(r>0)for(i=e;i<t;i+=r)n.push(i);else for(i=e;i>t;i+=r)n.push(i);return n}function rs(e,t){function r(l,u,c,f){var h,d=[],p=l.length;if(u===void 0&&c===void 0&&f===void 0)return U2(l);if(u=u||0,c=c||l.length,u=u>=0?u:p+u,c=c>=0?c:p+c,f=f||1,u===c||f===0)return[];if(u<c&&f<0)return[];if(u>c&&f>0)return[];if(f>0)for(h=u;h<c;h+=f)d.push(l[h]);else for(h=u;h>c;h+=f)d.push(l[h]);return d}var n,i;if(t=t||{},hn(t.row)){if(hn(t.col))return e[t.row][t.col];var o=gY(e,t.row);return n=t.col||{},r(o,n.start,n.end,n.step)}if(hn(t.col)){var a=vY(e,t.col);return i=t.row||{},r(a,i.start,i.end,i.step)}i=t.row||{},n=t.col||{};var s=r(e,i.start,i.end,i.step);return s.map(function(l){return r(l,n.start,n.end,n.step)})}function lg(e,t,r){var n,i;if(hn(t.row)){if(hn(t.col))return e[t.row][t.col]=r;t.col=t.col||{},t.col.start=t.col.start||0,t.col.end=t.col.end||e[0].length,t.col.step=t.col.step||1,n=tr(t.col.start,Math.min(e.length,t.col.end),t.col.step);var o=t.row;return n.forEach(function(s,l){e[o][s]=r[l]}),e}if(hn(t.col)){t.row=t.row||{},t.row.start=t.row.start||0,t.row.end=t.row.end||e.length,t.row.step=t.row.step||1,i=tr(t.row.start,Math.min(e[0].length,t.row.end),t.row.step);var a=t.col;return i.forEach(function(s,l){e[s][a]=r[l]}),e}return r[0].length===void 0&&(r=[r]),t.row.start=t.row.start||0,t.row.end=t.row.end||e.length,t.row.step=t.row.step||1,t.col.start=t.col.start||0,t.col.end=t.col.end||e[0].length,t.col.step=t.col.step||1,i=tr(t.row.start,Math.min(e.length,t.row.end),t.row.step),n=tr(t.col.start,Math.min(e[0].length,t.col.end),t.col.step),i.forEach(function(s,l){n.forEach(function(u,c){e[s][u]=r[l][c]})}),e}function xfe(e){var t=$a(e.length,e.length);return e.forEach(function(r,n){t[n][n]=r}),t}function U2(e){return e.map(function(t){return hn(t)?t:t.map(function(r){return r})})}const Mfe=Object.freeze(Object.defineProperty({__proto__:null,utils:hY,get random_fn(){return ro},setRandom:dY,rows:z2,cols:pY,dimensions:bfe,row:F4,rowa:gY,col:ib,cola:vY,diag:wfe,antidiag:Sfe,transpose:Dl,map:Wn,cumreduce:V2,alter:$4,create:Rd,zeros:$a,ones:Pfe,rand:Efe,identity:Rc,symmetric:Cfe,clear:Afe,seq:yY,arange:tr,slice:rs,sliceAssign:lg,diagonal:xfe,copy:U2},Symbol.toStringTag,{value:"Module"}));function Dd(e,t){return e-t}function q7(e,t,r){return Math.max(t,Math.min(e,r))}function jn(e){for(var t=0,r=e.length;--r>=0;)t+=e[r];return t}function Ife(e){for(var t=0,r=e.length;--r>=0;)t+=e[r]*e[r];return t}function W2(e){for(var t=Wr(e),r=0,n=e.length,i;--n>=0;)i=e[n]-t,r+=i*i;return r}function Lfe(e){for(var t=0,r=e.length;--r>=0;)t+=e[r];return t}function _Y(e){for(var t=1,r=e.length;--r>=0;)t*=e[r];return t}function B4(e){for(var t=e[0],r=0;++r<e.length;)e[r]<t&&(t=e[r]);return t}function z4(e){for(var t=e[0],r=0;++r<e.length;)e[r]>t&&(t=e[r]);return t}function Ofe(e){for(var t={},r=[],n=0;n<e.length;n++)t[e[n]]||(t[e[n]]=!0,r.push(e[n]));return r}function Wr(e){return jn(e)/e.length}function Rfe(e){return W2(e)/e.length}function Dfe(e){return Math.pow(_Y(e),1/e.length)}function aC(e){var t=e.length,r=e.slice().sort(Dd);return t&1?r[t/2|0]:(r[t/2-1]+r[t/2])/2}function Nfe(e){return V2(e,function(t,r){return t+r})}function Ffe(e){return V2(e,function(t,r){return t*r})}function $fe(e){var t=[],r=e.length,n;for(n=1;n<r;n++)t.push(e[n]-e[n-1]);return t}function sC(e){var t,r=[],n={};for(t=0;t<e.length;t++){var i=e[t];n[i]?n[i]++:(n[i]=1,r.push(i))}var o=r.sort(Dd),a={},s=1;for(t=0;t<o.length;t++){var i=o[t],l=n[i],u=s,c=s+l-1,f=(u+c)/2;a[i]=f,s+=l}return e.map(function(h){return a[h]})}function Bfe(e){var t=e.length,r=e.slice().sort(Dd),n=1,i=0,o=0,a=[],s;for(s=0;s<t;s++)r[s]===r[s+1]?n++:(n>i?(a=[r[s]],i=n,o=0):n===i&&(a.push(r[s]),o++),n=1);return o===0?a[0]:a}function zfe(e){return z4(e)-B4(e)}function bY(e,t){return W2(e)/(e.length-(t?1:0))}function wY(e){var t=e.reduce(function(n,i){return n+W2(i)},0),r=e.reduce(function(n,i){return n+i.length},0);return t/(r-e.length)}function Vfe(e){for(var t=Wr(e),r=e.length,n=new Array(r),i=0;i<r;i++)n[i]=e[i]-t;return n}function Ps(e,t){return Math.sqrt(bY(e,t))}function SY(e){return Math.sqrt(wY(e))}function Ufe(e){for(var t=Wr(e),r=[],n=e.length-1;n>=0;n--)r.push(Math.abs(e[n]-t));return Wr(r)}function Wfe(e){for(var t=aC(e),r=[],n=e.length-1;n>=0;n--)r.push(Math.abs(e[n]-t));return aC(r)}function jfe(e){return Ps(e)/Wr(e)}function Gfe(e){var t=e.length,r=e.slice().sort(Dd);return[r[Math.round(t/4)-1],r[Math.round(t/2)-1],r[Math.round(t*3/4)-1]]}function Hfe(e,t,r,n){var i=e.slice().sort(Dd),o=[t.length],a=e.length,s,l,u,c,f,h;for(typeof r>"u"&&(r=3/8),typeof n>"u"&&(n=3/8),s=0;s<t.length;s++)l=t[s],u=r+l*(1-r-n),c=a*l+u,f=Math.floor(q7(c,1,a-1)),h=q7(c-f,0,1),o[s]=(1-h)*i[f-1]+h*i[f];return o}function Xfe(e,t,r){var n=e.slice().sort(Dd),i=t*(n.length+(r?1:-1))+(r?0:1),o=parseInt(i),a=i-o;return o+1<n.length?n[o-1]+a*(n[o]-n[o-1]):n[o-1]}function Yfe(e,t,r){var n=0,i=e.length,o=!1,a,s;for(r==="strict"&&(o=!0),s=0;s<i;s++)a=e[s],(o&&a<t||!o&&a<=t)&&n++;return n/i}function Kfe(e,t){t=t||4;var r=B4(e),n=(z4(e)-r)/t,i=e.length,o=[],a;for(a=0;a<t;a++)o[a]=0;for(a=0;a<i;a++)o[Math.min(Math.floor((e[a]-r)/n),t-1)]+=1;return o}function TY(e,t){var r=Wr(e),n=Wr(t),i=e.length,o=new Array(i),a;for(a=0;a<i;a++)o[a]=(e[a]-r)*(t[a]-n);return jn(o)/(i-1)}function kY(e,t){return TY(e,t)/Ps(e,1)/Ps(t,1)}function Zfe(e,t){return e=sC(e),t=sC(t),kY(e,t)}function V4(e,t){for(var r=Wr(e),n=Ps(e),i=e.length,o=0,a=0;a<i;a++)o+=Math.pow((e[a]-r)/n,t);return o/e.length}function qfe(e){return V4(e,3)}function Jfe(e){return V4(e,4)-3}const Qfe=Object.freeze(Object.defineProperty({__proto__:null,sum:jn,sumsqrd:Ife,sumsqerr:W2,sumrow:Lfe,product:_Y,min:B4,max:z4,unique:Ofe,mean:Wr,meansqerr:Rfe,geomean:Dfe,median:aC,cumsum:Nfe,cumprod:Ffe,diff:$fe,rank:sC,mode:Bfe,range:zfe,variance:bY,pooledvariance:wY,deviation:Vfe,stdev:Ps,pooledstdev:SY,meandev:Ufe,meddev:Wfe,coeffvar:jfe,quartiles:Gfe,quantiles:Hfe,percentile:Xfe,percentileOfScore:Yfe,histogram:Kfe,covariance:TY,corrcoeff:kY,spearmancoeff:Zfe,stanMoment:V4,skewness:qfe,kurtosis:Jfe},Symbol.toStringTag,{value:"Module"}));function the(e,t,r){return e<t||e>r?0:1/(r-t)}function ehe(e,t,r){return e<t?0:e<r?(e-t)/(r-t):1}function rhe(e,t,r){return t+e*(r-t)}function nhe(e,t){return .5*(e+t)}function ihe(e,t){return Wr(e)}function ohe(){throw new Error("mode is not yet implemented")}function PY(e,t){return e/2+t/2+(t/2-e/2)*(2*ro()-1)}function ahe(e,t){return Math.pow(t-e,2)/12}const she=Object.freeze(Object.defineProperty({__proto__:null,pdf:the,cdf:ehe,inv:rhe,mean:nhe,median:ihe,mode:ohe,sample:PY,variance:ahe},Symbol.toStringTag,{value:"Module"}));function lhe(e,t,r){return r<=t?NaN:e<=t||e>=r?0:2/Math.PI*Math.pow(Math.pow(r-t,2)-Math.pow(2*e-t-r,2),-.5)}function uhe(e,t,r){return e<t?0:e<r?2/Math.PI*Math.asin(Math.sqrt((e-t)/(r-t))):1}function che(e,t,r){return t+(.5-.5*Math.cos(Math.PI*e))*(r-t)}function fhe(e,t){return t<=e?NaN:(e+t)/2}function hhe(e,t){return t<=e?NaN:(e+t)/2}function dhe(){throw new Error("mode is not yet implemented")}function phe(e,t){return(e+t)/2+(t-e)/2*Math.sin(2*Math.PI*PY(0,1))}function ghe(e,t){return t<=e?NaN:Math.pow(t-e,2)/8}const vhe=Object.freeze(Object.defineProperty({__proto__:null,pdf:lhe,cdf:uhe,inv:che,mean:fhe,median:hhe,mode:dhe,sample:phe,variance:ghe},Symbol.toStringTag,{value:"Module"}));function br(e){var t=0,r=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],n=1.000000000190015,i,o,a;for(a=(o=i=e)+5.5,a-=(i+.5)*Math.log(a);t<6;t++)n+=r[t]/++o;return Math.log(2.5066282746310007*n/i)-a}function EY(e){var t,r,n,i,o,a,s,l=[.08333333333333333,-.002777777777777778,.0007936507936507937,-.0005952380952380952,.0008417508417508418,-.001917526917526918,.00641025641025641,-.02955065359477124,.1796443723688307,-1.3924322169059];if(t=e,s=0,e==1||e==2)return 0;for(e<=7&&(s=Math.floor(7-e),t=e+s),r=1/(t*t),n=2*Math.PI,o=l[9],a=8;a>=0;a--)o*=r,o+=l[a];if(i=o/t+.5*Math.log(n)+(t-.5)*Math.log(t)-t,e<=7)for(a=1;a<=s;a++)i-=Math.log(t-1),t-=1;return i}function Oo(e){var t=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],r=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],n=!1,i=0,o=0,a=0,s=e,l,u,c,f;if(e>171.6243769536076)return 1/0;if(s<=0)if(f=s%1+36e-17,f)n=(s&1?-1:1)*Math.PI/Math.sin(Math.PI*f),s=1-s;else return 1/0;for(c=s,s<1?u=s++:u=(s-=i=(s|0)-1)-1,l=0;l<8;++l)a=(a+t[l])*u,o=o*u+r[l];if(f=a/o+1,c<s)f/=c;else if(c>s)for(l=0;l<i;++l)f*=s,s++;return n&&(f=n/f),f}function mhe(e,t){return Nd(e,t)*Oo(e)}function Nd(e,t){var r=br(e),n=e,i=1/e,o=i,a=t+1-e,s=1/1e-30,l=1/a,u=l,c=1,f=-~(Math.log(e>=1?e:1/e)*8.5+e*.4+17),h;if(t<0||e<=0)return NaN;if(t<e+1){for(;c<=f;c++)i+=o*=t/++n;return i*Math.exp(-t+e*Math.log(t)-r)}for(;c<=f;c++)h=-c*(c-e),a+=2,l=h*l+a,s=a+h/s,l=1/l,u*=l*s;return 1-u*Math.exp(-t+e*Math.log(t)-r)}function zy(e){return e<0?NaN:br(e+1)}function mc(e){return e<0?NaN:Oo(e+1)}function U4(e,t){return e>170||t>170?Math.exp(CY(e,t)):mc(e)/mc(t)/mc(e-t)}function CY(e,t){return zy(e)-zy(t)-zy(e-t)}function yhe(e,t){return mc(e)/mc(e-t)}function j2(e,t){if(!(e<=0||t<=0))return e+t>170?Math.exp(W4(e,t)):Oo(e)*Oo(t)/Oo(e+t)}function W4(e,t){return br(e)+br(t)-br(e+t)}function lC(e,t,r){var n=1e-30,i=1,o=t+r,a=t+1,s=t-1,l=1,u=1-o*e/a,c,f,h,d;for(Math.abs(u)<n&&(u=n),u=1/u,d=u;i<=100&&(c=2*i,f=i*(r-i)*e/((s+c)*(t+c)),u=1+f*u,Math.abs(u)<n&&(u=n),l=1+f/l,Math.abs(l)<n&&(l=n),u=1/u,d*=u*l,f=-(t+i)*(o+i)*e/((t+c)*(a+c)),u=1+f*u,Math.abs(u)<n&&(u=n),l=1+f/l,Math.abs(l)<n&&(l=n),u=1/u,h=u*l,d*=h,!(Math.abs(h-1)<3e-7));i++);return d}function G2(e,t){var r=0,n=t-1,i=1e-8,o=br(t),a,s,l,u,c,f,h;if(e>=1)return Math.max(100,t+100*Math.sqrt(t));if(e<=0)return 0;for(t>1?(f=Math.log(n),h=Math.exp(n*(f-1)-o),c=e<.5?e:1-e,l=Math.sqrt(-2*Math.log(c)),a=(2.30753+l*.27061)/(1+l*(.99229+l*.04481))-l,e<.5&&(a=-a),a=Math.max(.001,t*Math.pow(1-1/(9*t)-a/(3*Math.sqrt(t)),3))):(l=1-t*(.253+t*.12),e<l?a=Math.pow(e/l,1/t):a=1-Math.log(1-(e-l)/(1-l)));r<12;r++){if(a<=0)return 0;if(s=Nd(t,a)-e,t>1?l=h*Math.exp(-(a-n)+n*(Math.log(a)-f)):l=Math.exp(-a+n*Math.log(a)-o),u=s/l,a-=l=u/(1-.5*Math.min(1,u*((t-1)/a-1))),a<=0&&(a=.5*(a+l)),Math.abs(l)<i*a)break}return a}function H2(e){var t=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,15626441722e-18,-85238095915e-18,6529054439e-18,5059343495e-18,-991364156e-18,-227365122e-18,96467911e-18,2394038e-18,-6886027e-18,894487e-18,313092e-18,-112708e-18,381e-18,7106e-18,-1523e-18,-94e-18,121e-18,-28e-18],r=t.length-1,n=!1,i=0,o=0,a,s,l,u;for(e<0&&(e=-e,n=!0),a=2/(2+e),s=4*a-2;r>0;r--)l=i,i=s*i-o+t[r],o=l;return u=a*Math.exp(-e*e+.5*(t[0]+s*i)-o),n?u-1:1-u}function AY(e){return 1-H2(e)}function j4(e){var t=0,r,n,i,o;if(e>=2)return-100;if(e<=0)return 100;for(o=e<1?e:2-e,i=Math.sqrt(-2*Math.log(o/2)),r=-.70711*((2.30753+i*.27061)/(1+i*(.99229+i*.04481))-i);t<2;t++)n=AY(r)-o,r+=n/(1.1283791670955126*Math.exp(-r*r)-r*n);return e<1?r:-r}function T0(e,t,r){var n=1e-8,i=t-1,o=r-1,a=0,s,l,u,c,f,h,d,p,g,m,v;if(e<=0)return 0;if(e>=1)return 1;for(t>=1&&r>=1?(u=e<.5?e:1-e,c=Math.sqrt(-2*Math.log(u)),d=(2.30753+c*.27061)/(1+c*(.99229+c*.04481))-c,e<.5&&(d=-d),p=(d*d-3)/6,g=2/(1/(2*t-1)+1/(2*r-1)),m=d*Math.sqrt(p+g)/g-(1/(2*r-1)-1/(2*t-1))*(p+5/6-2/(3*g)),d=t/(t+r*Math.exp(2*m))):(s=Math.log(t/(t+r)),l=Math.log(r/(t+r)),c=Math.exp(t*s)/t,f=Math.exp(r*l)/r,m=c+f,e<c/m?d=Math.pow(t*m*e,1/t):d=1-Math.pow(r*m*(1-e),1/r)),v=-br(t)-br(r)+br(t+r);a<10;a++){if(d===0||d===1)return d;if(h=k0(d,t,r)-e,c=Math.exp(i*Math.log(d)+o*Math.log(1-d)+v),f=h/c,d-=c=f/(1-.5*Math.min(1,f*(i/d-o/(1-d)))),d<=0&&(d=.5*(d+c)),d>=1&&(d=.5*(d+c+1)),Math.abs(c)<n*d&&a>0)break}return d}function k0(e,t,r){var n=e===0||e===1?0:Math.exp(br(t+r)-br(t)-br(r)+t*Math.log(e)+r*Math.log(1-e));return e<0||e>1?!1:e<(t+1)/(t+r+2)?n*lC(e,t,r)/t:1-n*lC(1-e,r,t)/r}function lf(e,t){var r,n,i,o,a;if(t||(t=e),e)return Rd(e,t,function(){return lf()});do r=ro(),n=1.7156*(ro()-.5),i=r-.449871,o=Math.abs(n)+.386595,a=i*i+o*(.196*o-.25472*i);while(a>.27597&&(a>.27846||n*n>-4*Math.log(r)*r*r));return n/r}function Ra(e,t,r){var n=e,i,o,a,s,l,u;if(r||(r=t),e||(e=1),t)return u=$a(t,r),u.alter(function(){return Ra(e)}),u;e<1&&(e+=1),i=e-1/3,o=1/Math.sqrt(9*i);do{do l=lf(),s=1+o*l;while(s<=0);s=s*s*s,a=ro()}while(a>1-.331*Math.pow(l,4)&&Math.log(a)>.5*l*l+i*(1-s+Math.log(s)));if(e==n)return i*s;do a=ro();while(a===0);return Math.pow(a,1/n)*i*s}const _he=Object.freeze(Object.defineProperty({__proto__:null,gammaln:br,loggam:EY,gammafn:Oo,gammap:mhe,lowRegGamma:Nd,factorialln:zy,factorial:mc,combination:U4,combinationln:CY,permutation:yhe,betafn:j2,betaln:W4,betacf:lC,gammapinv:G2,erf:H2,erfc:AY,erfcinv:j4,ibetainv:T0,ibeta:k0,randn:lf,randg:Ra},Symbol.toStringTag,{value:"Module"}));function bhe(e,t,r){return e>1||e<0?0:t==1&&r==1?1:t<512&&r<512?Math.pow(e,t-1)*Math.pow(1-e,r-1)/j2(t,r):Math.exp((t-1)*Math.log(e)+(r-1)*Math.log(1-e)-W4(t,r))}function ob(e,t,r){return e>1||e<0?(e>1)*1:k0(e,t,r)}function whe(e,t,r){return T0(e,t,r)}function She(e,t){return e/(e+t)}function The(e,t){return T0(.5,e,t)}function khe(e,t){return(e-1)/(e+t-2)}function Phe(e,t){var r=Ra(e);return r/(r+Ra(t))}function Ehe(e,t){return e*t/(Math.pow(e+t,2)*(e+t+1))}const Che=Object.freeze(Object.defineProperty({__proto__:null,pdf:bhe,cdf:ob,inv:whe,mean:She,median:The,mode:khe,sample:Phe,variance:Ehe},Symbol.toStringTag,{value:"Module"}));function J7(e,t,r,n){for(var i=0,o=1,a=1,s=1,l=0,u=0,c;Math.abs((a-u)/a)>n;)u=a,c=-(t+l)*(t+r+l)*e/(t+2*l)/(t+2*l+1),i=a+c*i,o=s+c*o,l=l+1,c=l*(r-l)*e/(t+2*l-1)/(t+2*l),a=i+c*a,s=o+c*s,i=i/s,o=o/s,a=a/s,s=1;return a/t}function xY(e,t,r){return r===0||r===1?t*r===e?1:0:U4(t,e)*Math.pow(r,e)*Math.pow(1-r,t-e)}function Ahe(e,t,r){var n,i=1e-10;if(e<0)return 0;if(e>=t)return 1;if(r<0||r>1||t<=0)return NaN;e=Math.floor(e);var o=r,a=e+1,s=t-e,l=a+s,u=Math.exp(br(l)-br(s)-br(a)+a*Math.log(o)+s*Math.log(1-o));return o<(a+1)/(l+2)?n=u*J7(o,a,s,i):n=1-u*J7(1-o,s,a,i),Math.round((1-n)*(1/i))/(1/i)}const xhe=Object.freeze(Object.defineProperty({__proto__:null,pdf:xY,cdf:Ahe},Symbol.toStringTag,{value:"Module"}));function Mhe(e,t,r){return r<0?0:r/(Math.pow(e-t,2)+Math.pow(r,2))/Math.PI}function Ihe(e,t,r){return Math.atan((e-t)/r)/Math.PI+.5}function Lhe(e,t,r){return t+r*Math.tan(Math.PI*(e-.5))}function Ohe(e){return e}function Rhe(e){return e}function Dhe(e,t){return lf()*Math.sqrt(1/(2*randg(.5)))*t+e}const Nhe=Object.freeze(Object.defineProperty({__proto__:null,pdf:Mhe,cdf:Ihe,inv:Lhe,median:Ohe,mode:Rhe,sample:Dhe},Symbol.toStringTag,{value:"Module"}));function Fhe(e,t,r){var n,i,o;return e<0?0:t<=2?e===0&&t<2?1/0:e===0&&t===2?1:1/j2(t/2,r/2)*Math.pow(t/r,t/2)*Math.pow(e,t/2-1)*Math.pow(1+t/r*e,-(t+r)/2):(n=t*e/(r+e*t),i=r/(r+e*t),o=t*i/2,o*xY((t-2)/2,(t+r-2)/2,n))}function ab(e,t,r){return e<0?0:k0(t*e/(t*e+r),t/2,r/2)}function $he(e,t,r){return r/(t*(1/T0(e,t/2,r/2)-1))}function Bhe(e,t){return t>2?t/(t-2):void 0}function zhe(e,t){return e>2?t*(e-2)/(e*(t+2)):void 0}function Vhe(e,t){var r=Ra(e/2)*2,n=Ra(t/2)*2;return r/e/(n/t)}function Uhe(e,t){if(!(t<=4))return 2*t*t*(e+t-2)/(e*(t-2)*(t-2)*(t-4))}const Whe=Object.freeze(Object.defineProperty({__proto__:null,pdf:Fhe,cdf:ab,inv:$he,mean:Bhe,mode:zhe,sample:Vhe,variance:Uhe},Symbol.toStringTag,{value:"Module"}));function jhe(e,t){return e<0?0:e===0&&t===2?.5:Math.exp((t/2-1)*Math.log(e)-e/2-t/2*Math.log(2)-br(t/2))}function Ghe(e,t){return e<0?0:Nd(t/2,e/2)}function Hhe(e,t){return 2*G2(e,.5*t)}function Xhe(e){return e}function Yhe(e){return e*Math.pow(1-2/(9*e),3)}function Khe(e){return e-2>0?e-2:0}function Zhe(e){return Ra(e/2)*2}function qhe(e){return 2*e}const Jhe=Object.freeze(Object.defineProperty({__proto__:null,pdf:jhe,cdf:Ghe,inv:Hhe,mean:Xhe,median:Yhe,mode:Khe,sample:Zhe,variance:qhe},Symbol.toStringTag,{value:"Module"}));function Qhe(e,t){return e<0?0:t*Math.exp(-t*e)}function tde(e,t){return e<0?0:1-Math.exp(-t*e)}function ede(e,t){return-Math.log(1-e)/t}function rde(e){return 1/e}function nde(e){return 1/e*Math.log(2)}function ide(){return 0}function ode(e){return-1/e*Math.log(ro())}function ade(e){return Math.pow(e,-2)}const sde=Object.freeze(Object.defineProperty({__proto__:null,pdf:Qhe,cdf:tde,inv:ede,mean:rde,median:nde,mode:ide,sample:ode,variance:ade},Symbol.toStringTag,{value:"Module"}));function lde(e,t,r){return e<0?0:e===0&&t===1?1/r:Math.exp((t-1)*Math.log(e)-e/r-br(t)-t*Math.log(r))}function ude(e,t,r){return e<0?0:Nd(t,e/r)}function cde(e,t,r){return G2(e,t)*r}function fde(e,t){return e*t}function hde(e,t){if(e>1)return(e-1)*t}function dde(e,t){return Ra(e)*t}function pde(e,t){return e*t*t}const gde=Object.freeze(Object.defineProperty({__proto__:null,pdf:lde,cdf:ude,inv:cde,mean:fde,mode:hde,sample:dde,variance:pde},Symbol.toStringTag,{value:"Module"}));function ug(e,t,r,n){if(e!==e|0)return!1;if(e<0||e<r-(t-n))return 0;if(e>n||e>r)return 0;if(r*2>t)return n*2>t?ug(t-r-n+e,t,t-r,t-n):ug(n-e,t,t-r,n);if(n*2>t)return ug(r-e,t,r,t-n);if(r<n)return ug(e,t,n,r);for(var i=1,o=0,a=0;a<e;a++){for(;i>1&&o<n;)i*=1-r/(t-o),o++;i*=(n-a)*(r-a)/((a+1)*(t-r-n+a+1))}for(;o<n;o++)i*=1-r/(t-o);return Math.min(1,Math.max(0,i))}function cg(e,t,r,n){if(e<0||e<r-(t-n))return 0;if(e>=n||e>=r)return 1;if(r*2>t)return n*2>t?cg(t-r-n+e,t,t-r,t-n):1-cg(n-e-1,t,t-r,n);if(n*2>t)return 1-cg(r-e-1,t,r,t-n);if(r<n)return cg(e,t,n,r);for(var i=1,o=1,a=0,s=0;s<e;s++){for(;i>1&&a<n;){var l=1-r/(t-a);o*=l,i*=l,a++}o*=(n-s)*(r-s)/((s+1)*(t-r-n+s+1)),i+=o}for(;a<n;a++)i*=1-r/(t-a);return Math.min(1,Math.max(0,i))}const vde=Object.freeze(Object.defineProperty({__proto__:null,pdf:ug,cdf:cg},Symbol.toStringTag,{value:"Module"}));function mde(e,t,r){return e<=0?0:Math.exp(-(t+1)*Math.log(e)-r/e-br(t)+t*Math.log(r))}function yde(e,t,r){return e<=0?0:1-Nd(t,r/e)}function _de(e,t,r){return r/G2(1-e,t)}function bde(e,t){return e>1?t/(e-1):void 0}function wde(e,t){return t/(e+1)}function Sde(e,t){return t/Ra(e)}function Tde(e,t){if(!(e<=2))return t*t/((e-1)*(e-1)*(e-2))}const kde=Object.freeze(Object.defineProperty({__proto__:null,pdf:mde,cdf:yde,inv:_de,mean:bde,mode:wde,sample:Sde,variance:Tde},Symbol.toStringTag,{value:"Module"}));function Pde(e,t,r){return e===0&&t===1?r:e===1&&r===1?t:Math.exp(Math.log(t)+Math.log(r)+(t-1)*Math.log(e)+(r-1)*Math.log(1-Math.pow(e,t)))}function Ede(e,t,r){return e<0?0:e>1?1:1-Math.pow(1-Math.pow(e,t),r)}function Cde(e,t,r){return Math.pow(1-Math.pow(1-e,1/r),1/t)}function Ade(e,t){return t*Oo(1+1/e)*Oo(t)/Oo(1+1/e+t)}function xde(e,t){return Math.pow(1-Math.pow(2,-1/t),1/e)}function Mde(e,t){if(e>=1&&t>=1&&e!==1&&t!==1)return Math.pow((e-1)/(e*t-1),1/e)}function Ide(){throw new Error("variance not yet implemented")}const Lde=Object.freeze(Object.defineProperty({__proto__:null,pdf:Pde,cdf:Ede,inv:Cde,mean:Ade,median:xde,mode:Mde,variance:Ide},Symbol.toStringTag,{value:"Module"}));function Ode(e){return e/Math.abs(e)}function Rde(e,t,r){return r<=0?0:Math.exp(-Math.abs(e-t)/r)/(2*r)}function Dde(e,t,r){return r<=0?0:e<t?.5*Math.exp((e-t)/r):1-.5*Math.exp(-(e-t)/r)}function Nde(e){return e}function Fde(e){return e}function $de(e){return e}function Bde(e,t){return 2*t*t}function zde(e,t){var r=ro()-.5;return e-t*Ode(r)*Math.log(1-2*Math.abs(r))}const Vde=Object.freeze(Object.defineProperty({__proto__:null,pdf:Rde,cdf:Dde,mean:Nde,median:Fde,mode:$de,variance:Bde,sample:zde},Symbol.toStringTag,{value:"Module"}));function Ude(e,t,r){return e<=0?0:Math.exp(-Math.log(e)-.5*Math.log(2*Math.PI)-Math.log(r)-Math.pow(Math.log(e)-t,2)/(2*r*r))}function Wde(e,t,r){return e<0?0:.5+.5*H2((Math.log(e)-t)/Math.sqrt(2*r*r))}function jde(e,t,r){return Math.exp(-1.4142135623730951*r*j4(2*e)+t)}function Gde(e,t){return Math.exp(e+t*t/2)}function Hde(e){return Math.exp(e)}function Xde(e,t){return Math.exp(e-t*t)}function Yde(e,t){return Math.exp(lf()*t+e)}function Kde(e,t){return(Math.exp(t*t)-1)*Math.exp(2*e+t*t)}const Zde=Object.freeze(Object.defineProperty({__proto__:null,pdf:Ude,cdf:Wde,inv:jde,mean:Gde,median:Hde,mode:Xde,sample:Yde,variance:Kde},Symbol.toStringTag,{value:"Module"}));function MY(e,t,r){return e!==e>>>0?!1:e<0?0:U4(e+t-1,t-1)*Math.pow(1-r,e)*Math.pow(r,t)}function qde(e,t,r){var n=0,i=0;if(e<0)return 0;for(;i<=e;i++)n+=MY(i,t,r);return n}const Jde=Object.freeze(Object.defineProperty({__proto__:null,pdf:MY,cdf:qde},Symbol.toStringTag,{value:"Module"}));function IY(e,t){return t=t>1e100?1e100:t,1/(Math.sqrt(t)*j2(.5,t/2))*Math.pow(1+e*e/t,-((t+1)/2))}function ns(e,t){var r=t/2;return k0((e+Math.sqrt(e*e+t))/(2*Math.sqrt(e*e+t)),r,r)}function sb(e,t){var r=T0(2*Math.min(e,1-e),.5*t,.5);return r=Math.sqrt(t*(1-r)/r),e>.5?r:-r}function Qde(e){return e>1?0:void 0}function tpe(){return 0}function epe(){return 0}function rpe(e){return lf()*Math.sqrt(e/(2*Ra(e/2)))}function npe(e){return e>2?e/(e-2):e>1?1/0:void 0}const ipe=Object.freeze(Object.defineProperty({__proto__:null,pdf:IY,cdf:ns,inv:sb,mean:Qde,median:tpe,mode:epe,sample:rpe,variance:npe},Symbol.toStringTag,{value:"Module"}));function ope(e,t,r){return Math.exp(-.5*Math.log(2*Math.PI)-Math.log(r)-Math.pow(e-t,2)/(2*r*r))}function To(e,t,r){return .5*(1+H2((e-t)/Math.sqrt(2*r*r)))}function uC(e,t,r){return-1.4142135623730951*r*j4(2*e)+t}function ape(e){return e}function spe(e){return e}function lpe(e){return e}function upe(e,t){return lf()*t+e}function cpe(e,t){return t*t}const fpe=Object.freeze(Object.defineProperty({__proto__:null,pdf:ope,cdf:To,inv:uC,mean:ape,median:spe,mode:lpe,sample:upe,variance:cpe},Symbol.toStringTag,{value:"Module"}));function hpe(e,t,r){var n=1e-14;return Math.abs(r)<n?IY(e,t):Math.abs(e)<n?Math.exp(br((t+1)/2)-r*r/2-.5*Math.log(Math.PI*t)-br(t/2)):t/e*(cC(e*Math.sqrt(1+2/t),t+2,r)-cC(e,t,r))}function cC(e,t,r){var n=1e-14,i=200;if(Math.abs(r)<n)return ns(e,t);var o=!1;e<0&&(o=!0,r=-r);for(var a=To(-r,0,1),s=n+1,l=s,u=e*e/(e*e+t),c=0,f=Math.exp(-r*r/2),h=Math.exp(-r*r/2-.5*Math.log(2)-br(3/2))*r;c<i||l>n||s>n;)l=s,c>0&&(f*=r*r/(2*c),h*=r*r/(2*(c+1/2))),s=f*ob(u,c+.5,t/2)+h*ob(u,c+1,t/2),a+=.5*s,c++;return o?1-a:a}const dpe=Object.freeze(Object.defineProperty({__proto__:null,pdf:hpe,cdf:cC},Symbol.toStringTag,{value:"Module"}));function ppe(e,t,r){return e<t?0:r*Math.pow(t,r)/Math.pow(e,r+1)}function gpe(e,t,r){return e<t?0:1-Math.pow(t/e,r)}function vpe(e,t,r){return t/Math.pow(1-e,1/r)}function mpe(e,t){if(!(t<=1))return t*Math.pow(e,t)/(t-1)}function ype(e,t){return e*(t*Math.SQRT2)}function _pe(e){return e}function bpe(e,t){if(!(t<=2))return e*e*t/(Math.pow(t-1,2)*(t-2))}const wpe=Object.freeze(Object.defineProperty({__proto__:null,pdf:ppe,cdf:gpe,inv:vpe,mean:mpe,median:ype,mode:_pe,variance:bpe},Symbol.toStringTag,{value:"Module"}));function gt(...e){return new gt._init(...e)}gt._init=function(...e){if(Oa(e[0]))if(Oa(e[0][0])){zv(e[1])&&(e[0]=Wn(e[0],e[1]));for(let t=0;t<e[0].length;t++)this[t]=e[0][t];this.length=e[0].length}else this[0]=zv(e[1])?Wn(e[0],e[1]):e[0],this.length=1;else if(hn(e[0]))this[0]=yY.apply(null,e),this.length=1;else{if(e[0]instanceof gt)return gt(e[0].toArray());this[0]=[],this.length=1}return this};gt._init.prototype=gt.prototype;gt._init.constructor=gt;gt.setRandom=dY;const ai=gt.prototype;ai.length=0;ai.push=Array.prototype.push;ai.sort=Array.prototype.sort;ai.splice=Array.prototype.splice;ai.slice=Array.prototype.slice;ai.toArray=function(){return this.length>1?this.slice():this.slice()[0]};ai.map=function(e,t){return gt(Wn(this,e,t))};ai.cumreduce=function(e,t){return gt(V2(this,e,t))};ai.alter=function(e){return $4(this,e),this};"transpose clear symmetric rows cols dimensions diag antidiag".split(" ").forEach(e=>{ai[e]=function(t){if(t)return t.call(this,ai[e].call(this)),this;const r=gt[e](this);return Array.isArray(r)?gt(r):r}});"row col".split(" ").forEach(e=>{ai[e]=function(t,r){return r?(r.call(this,ai[e].call(this,t)),this):gt(gt[e](this,t))}});"create zeros ones rand identity".split(" ").forEach(e=>{ai[e]=function(...t){return gt(gt[e](...t))}});function LY(e,t){return t<0||e%1!==0||e<0?0:Math.pow(t,e)*Math.exp(-t)/mc(e)}function Spe(e,t){var r=[],n=0;if(e<0)return 0;for(;n<=e;n++)r.push(LY(n,t));return jn(r)}function Tpe(e){return e}function kpe(e){return e}function Ppe(e){var t=1,r=0,n=Math.exp(-e);do r++,t*=gt._random_fn();while(t>n);return r-1}function Epe(e){var t=e,r,n,i,o,a,s,l,u,c,f;for(o=Math.sqrt(t),a=Math.log(t),l=.931+2.53*o,s=-.059+.02483*l,u=1.1239+1.1328/(l-3.4),c=.9277-3.6224/(l-2);;){if(n=Math.random()-.5,i=Math.random(),f=.5-Math.abs(n),r=Math.floor((2*s/f+l)*n+t+.43),f>=.07&&i<=c)return r;if(!(r<0||f<.013&&i>f)&&Math.log(i)+Math.log(u)-Math.log(s/(f*f)+l)<=-t+r*a-EY(r+1))return r}}function Cpe(e){return e<10?Ppe(e):Epe(e)}const Ape=Object.freeze(Object.defineProperty({__proto__:null,pdf:LY,cdf:Spe,mean:Tpe,variance:kpe,sample:Cpe},Symbol.toStringTag,{value:"Module"}));function xpe(e,t,r,n){return r<=t||n<t||n>r?NaN:e<t||e>r?0:e<n?2*(e-t)/((r-t)*(n-t)):e===n?2/(r-t):2*(r-e)/((r-t)*(r-n))}function Mpe(e,t,r,n){return r<=t||n<t||n>r?NaN:e<=t?0:e>=r?1:e<=n?Math.pow(e-t,2)/((r-t)*(n-t)):1-Math.pow(r-e,2)/((r-t)*(r-n))}function Ipe(e,t,r,n){return r<=t||n<t||n>r?NaN:e<=(n-t)/(r-t)?t+(r-t)*Math.sqrt(e*((n-t)/(r-t))):t+(r-t)*(1-Math.sqrt((1-e)*(1-(n-t)/(r-t))))}function Lpe(e,t,r){return(e+t+r)/3}function Ope(e,t,r){if(r<=(e+t)/2)return t-Math.sqrt((t-e)*(t-r))/Math.sqrt(2);if(r>(e+t)/2)return e+Math.sqrt((t-e)*(r-e))/Math.sqrt(2)}function Rpe(e,t,r){return r}function Dpe(e,t,r){var n=ro();return n<(r-e)/(t-e)?e+Math.sqrt(n*(t-e)*(r-e)):t-Math.sqrt((1-n)*(t-e)*(t-r))}function Npe(e,t,r){return(e*e+t*t+r*r-e*t-e*r-t*r)/18}const Fpe=Object.freeze(Object.defineProperty({__proto__:null,pdf:xpe,cdf:Mpe,inv:Ipe,mean:Lpe,median:Ope,mode:Rpe,sample:Dpe,variance:Npe},Symbol.toStringTag,{value:"Module"}));function Q7(e,t,r){var n=12,i=6,o=-30,a=-50,s=60,l=8,u=3,c=2,f=3,h=[.9815606342467192,.9041172563704749,.7699026741943047,.5873179542866175,.3678314989981802,.1252334085114689],d=[.04717533638651183,.10693932599531843,.16007832854334622,.20316742672306592,.2334925365383548,.24914704581340277],p=e*.5;if(p>=l)return 1;var g=2*To(p,0,1)-1;g>=Math.exp(a/r)?g=Math.pow(g,r):g=0;var m;e>u?m=c:m=f;for(var v=p,y=(l-p)/m,b=v+y,w=0,T=r-1,S=1;S<=m;S++){for(var k=0,E=.5*(b+v),P=.5*(b-v),C=1;C<=n;C++){var A,L;i<C?(A=n-C+1,L=h[A-1]):(A=C,L=-h[A-1]);var R=P*L,D=E+R,F=D*D;if(F>s)break;var z=2*To(D,0,1),Y=2*To(D,e,1),K=z*.5-Y*.5;K>=Math.exp(o/T)&&(K=d[A-1]*Math.exp(-(.5*F))*Math.pow(K,T),k+=K)}k*=2*P*r/Math.sqrt(2*Math.PI),w+=k,v=b,b+=y}return g+=w,g<=Math.exp(o/t)?0:(g=Math.pow(g,t),g>=1?1:g)}function $pe(e,t,r){var n=.322232421088,i=.099348462606,o=-1,a=.588581570495,s=-.342242088547,l=.531103462366,u=-.204231210125,c=.10353775285,f=-453642210148e-16,h=.0038560700634,d=.8832,p=.2368,g=1.214,m=1.208,v=1.4142,y=120,b=.5-.5*e,w=Math.sqrt(Math.log(1/(b*b))),T=w+((((w*f+u)*w+s)*w+o)*w+n)/((((w*h+c)*w+l)*w+a)*w+i);r<y&&(T+=(T*T*T+T)/r/4);var S=d-p*T;return r<y&&(S+=-g/r+m*T/r),T*(S*Math.log(t-1)+v)}function Qg(e,t,r){var n=1,i=t,o=16,a=8,s=-30,l=1e-14,u=100,c=800,f=5e3,h=25e3,d=1,p=.5,g=.25,m=.125,v=[.9894009349916499,.9445750230732326,.8656312023878318,.755404408355003,.6178762444026438,.45801677765722737,.2816035507792589,.09501250983763744],y=[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685];if(e<=0)return 0;if(r<2||n<1||i<2)return NaN;if(!Number.isFinite(e))return 1;if(r>h)return Q7(e,n,i);var b=r*.5,w=b*Math.log(r)-r*Math.log(2)-br(b),T=b-1,S=r*.25,k;r<=u?k=d:r<=c?k=p:r<=f?k=g:k=m,w+=Math.log(k);for(var E=0,P=1;P<=50;P++){for(var C=0,A=(2*P-1)*k,L=1;L<=o;L++){var R,D;a<L?(R=L-a-1,D=w+T*Math.log(A+v[R]*k)-(v[R]*k+A)*S):(R=L-1,D=w+T*Math.log(A-v[R]*k)+(v[R]*k-A)*S);var F;if(D>=s){a<L?F=e*Math.sqrt((v[R]*k+A)*.5):F=e*Math.sqrt((-(v[R]*k)+A)*.5);var z=Q7(F,n,i),Y=z*y[R]*Math.exp(D);C+=Y}}if(P*k>=1&&C<=l)break;E+=C}if(C>l)throw new Error("tukey.cdf failed to converge");return E>1&&(E=1),E}function Bpe(e,t,r){var n=1,i=t,o=1e-4,a=50;if(r<2||n<1||i<2)return NaN;if(e<0||e>1)return NaN;if(e===0)return 0;if(e===1)return 1/0;var s=$pe(e,i,r),l=Qg(s,t,r)-e,u;l>0?u=Math.max(0,s-1):u=s+1;for(var c=Qg(u,t,r)-e,f,h=1;h<a;h++){f=u-c*(u-s)/(c-l),l=c,s=u,f<0&&(f=0,c=-e),c=Qg(f,t,r)-e,u=f;var d=Math.abs(u-s);if(d<o)return f}throw new Error("tukey.inv failed to converge")}const zpe=Object.freeze(Object.defineProperty({__proto__:null,cdf:Qg,inv:Bpe},Symbol.toStringTag,{value:"Module"}));function Vpe(e,t,r){return e<0||t<0||r<0?0:r/t*Math.pow(e/t,r-1)*Math.exp(-Math.pow(e/t,r))}function Upe(e,t,r){return e<0?0:1-Math.exp(-Math.pow(e/t,r))}function Wpe(e,t,r){return t*Math.pow(-Math.log(1-e),1/r)}function OY(e,t){return e*Oo(1+1/t)}function jpe(e,t){return e*Math.pow(Math.log(2),1/t)}function Gpe(e,t){return t<=1?0:e*Math.pow((t-1)/t,1/t)}function Hpe(e,t){return e*Math.pow(-Math.log(ro()),1/t)}function Xpe(e,t){return e*e*Oo(1+2/t)-Math.pow(OY(e,t),2)}const Ype=Object.freeze(Object.defineProperty({__proto__:null,pdf:Vpe,cdf:Upe,inv:Wpe,mean:OY,median:jpe,mode:Gpe,sample:Hpe,variance:Xpe},Symbol.toStringTag,{value:"Module"})),Kpe=Object.freeze(Object.defineProperty({__proto__:null,arcsine:vhe,beta:Che,binomial:xhe,cauchy:Nhe,centralF:Whe,chisquare:Jhe,exponential:sde,gamma:gde,hypgeom:vde,invgamma:kde,kumaraswamy:Lde,laplace:Vde,lognormal:Zde,negbin:Jde,noncentralt:dpe,normal:fpe,pareto:wpe,poisson:Ape,studentt:ipe,triangular:Fpe,tukey:zpe,uniform:she,weibull:Ype},Symbol.toStringTag,{value:"Module"}));function fC(){const e=[...arguments];return hn(e[1])?(e[0]-e[1])/e[2]:(e[0]-Wr(e[1]))/Ps(e[1],e[2])}function G4(){const e=[...arguments];let t;return Oa(e[1])?(t=fC(e[0],e[1],e[3]),e[2]===1?To(-Math.abs(t),0,1):To(-Math.abs(t),0,1)*2):e.length>2?(t=fC(e[0],e[1],e[2]),e[3]===1?To(-Math.abs(t),0,1):To(-Math.abs(t),0,1)*2):(t=e[0],e[1]===1?To(-Math.abs(t),0,1):To(-Math.abs(t),0,1)*2)}function hC(){const e=[...arguments];return e.length===4?(e[0]-e[1])/(e[2]/Math.sqrt(e[3])):(e[0]-Wr(e[1]))/(Ps(e[1],!0)/Math.sqrt(e[1].length))}function Zpe(){const e=[...arguments];let t;return e.length===5?(t=Math.abs(hC(e[0],e[1],e[2],e[3])),e[4]===1?ns(-t,e[3]-1):ns(-t,e[3]-1)*2):hn(e[1])?(t=Math.abs(e[0]),e[2]===1?ns(-t,e[1]-1):ns(-t,e[1]-1)*2):(t=Math.abs(hC(e[0],e[1])),e[2]===1?ns(-t,e[1].length-1):ns(-t,e[1].length-1)*2)}function qpe(){var e=[...arguments],t,r,n,i,o,a,s,l;if(e.length===1){for(o=new Array(e[0].length),s=0;s<e[0].length;s++)o[s]=e[0][s];e=o}for(r=[],s=0;s<e.length;s++)r=r.concat(e[s]);for(n=Wr(r),t=0,s=0;s<e.length;s++)t=t+e[s].length*Math.pow(Wr(e[s])-n,2);for(t/=e.length-1,a=0,s=0;s<e.length;s++)for(i=Wr(e[s]),l=0;l<e[s].length;l++)a+=Math.pow(e[s][l]-i,2);return a/=r.length-e.length,t/a}function Jpe(){var e=[...arguments],t,r,n,i;if(hn(e[0]))return 1-ab(e[0],e[1],e[2]);var o=o(e);for(t=e.length-1,n=0,i=0;i<e.length;i++)n=n+e[i].length;return r=n-t-1,1-ab(o,t,r)}function Qpe(e,t,r){return 1-ab(e,t,r)}function dC(){var e=[...arguments],t,r,n,i,o;return hn(e[0])?(t=e[0],r=e[1],n=e[2],i=e[3],o=e[4]):(t=Wr(e[0]),r=Wr(e[1]),n=e[0].length,i=e[1].length,o=e[2]),Math.abs(t-r)/(o*Math.sqrt((1/n+1/i)/2))}function RY(){var e=[...arguments],t;e.length===3?(t=e[0],e=e.slice(1)):e.length===7?(t=dC(e[0],e[1],e[2],e[3],e[4]),e=e.slice(5)):(t=dC(e[0],e[1],e[2]),e=e.slice(3));var r=e[0],n=e[1];return 1-Qg(t,n,r-n)}function tge(e){for(var t=SY(e),r=e.map(l=>Wr(l)),n=e.reduce((l,u)=>l+u.length,0),i=[],o=0;o<e.length;++o)for(var a=o+1;a<e.length;++a){var s=RY(r[o],r[a],e[o].length,e[a].length,t,n,e.length);i.push([[o,a],s])}return i}function ege(){const e=[...arguments],t=new Array(2);let r;return e.length===4?r=Math.abs(uC(e[1]/2,0,1)*e[2]/Math.sqrt(e[3])):r=Math.abs(uC(e[1]/2,0,1)*Ps(e[2])/Math.sqrt(e[2].length)),t[0]=e[0]-r,t[1]=e[0]+r,t}function rge(){const e=[...arguments],t=new Array(2);let r;return e.length===4?r=Math.abs(sb(e[1]/2,e[3]-1)*e[2]/Math.sqrt(e[3])):r=Math.abs(sb(e[1]/2,e[2].length-1)*Ps(e[2],!0)/Math.sqrt(e[2].length)),t[0]=e[0]-r,t[1]=e[0]+r,t}function nge(e,t){return e<t}function DY(e,t,r,n){if(e>1||r>1||e<=0||r<=0)throw new Error("Proportions should be greater than 0 and less than 1");var i=(e*t+r*n)/(t+n),o=Math.sqrt(i*(1-i)*(1/t+1/n));return(e-r)/o}function ige(e,t,r,n){const i=DY(e,t,r,n);return G4(i,1)}function oge(e,t,r,n){const i=DY(e,t,r,n);return G4(i,2)}const age=Object.freeze(Object.defineProperty({__proto__:null,zscore:fC,ztest:G4,tscore:hC,ttest:Zpe,anovafscore:qpe,anovaftest:Jpe,ftest:Qpe,qscore:dC,qtest:RY,tukeyhsd:tge,normalci:ege,tci:rge,significant:nge,oneSidedDifferenceOfProportions:ige,twoSidedDifferenceOfProportions:oge},Symbol.toStringTag,{value:"Module"}));function $o(e){return Oa(e)||e.constructor.name==="jStat"}function ei(e,t){return $o(t)?($o(t[0])||(t=[t]),Wn(e,function(r,n,i){return r+t[n][i]})):Wn(e,function(r){return r+t})}function Dc(e,t){return $o(t)?($o(t[0])||(t=[t]),Wn(e,function(r,n,i){return r-t[n][i]||0})):Wn(e,function(r){return r-t})}function pC(e,t){return $o(t)?($o(t[0])||(t=[t]),ke(e,Da(t))):Wn(e,function(r){return r/t})}function ke(e,t){let r,n;if(e.length===void 0&&t.length===void 0)return e*t;const i=e.length,o=e[0].length,a=$a(i,r=$o(t)?t[0].length:o);let s=0;if($o(t)){for(;s<r;s++)for(let l=0;l<i;l++){n=0;for(let u=0;u<o;u++)n+=e[l][u]*t[u][s];a[l][s]=n}return i===1&&s===1?a[0][0]:a}return Wn(e,function(l){return l*t})}function sge(e,t){return ke(e.map(r=>[r]),[t])}function lb(e,t){$o(e[0])||(e=[e]),$o(t[0])||(t=[t]);var r=e[0].length===1&&e.length!==1?Dl(e):e,n=t[0].length===1&&t.length!==1?Dl(t):t,i=[],o=r.length,a=r[0].length,s,l;for(let u=0;u<o;u++){for(i[u]=[],s=0,l=0;l<a;l++)s+=r[u][l]*n[u][l];i[u]=s}return i.length===1?i[0]:i}function gC(e,t){return Wn(e,r=>Math.pow(r,t))}function lge(e){return Wn(e,t=>Math.exp(t))}function uge(e){return Wn(e,t=>Math.log(t))}function cge(e){return Wn(e,t=>Math.abs(t))}function ed(e,t){var r=0,n=0;for(isNaN(t)&&(t=2),$o(e[0])&&(e=e[0]);n<e.length;n++)r+=Math.pow(Math.abs(e[n]),t);return Math.pow(r,1/t)}function fge(e,t){return Math.acos(lb(e,t)/(ed(e)*ed(t)))}function H4(e,t){var r=[],n;for(n=0;n<e.length;n++)r.push(e[n].slice());for(n=0;n<r.length;n++)Array.prototype.push.apply(r[n],t[n]);return r}function Da(e){for(var t=e.length,r=e[0].length,n=Rc(t,r),i=NY(e,n),o=[],a=0,s;a<t;a++)for(o[a]=[],s=r;s<i[0].length;s++)o[a][s-r]=i[a][s];return o}function hge(e){var t=e.length,r=t*2,n=new Array(r),i=t-1,o=r-1,a=i-t+1,s=o,l=0,u=0,c;if(t===2)return e[0][0]*e[1][1]-e[0][1]*e[1][0];for(;l<r;l++)n[l]=1;for(l=0;l<t;l++){for(c=0;c<t;c++)n[a<0?a+t:a]*=e[l][c],n[s<t?s+t:s]*=e[l][c],a++,s--;a=--i-t+1,s=--o}for(l=0;l<t;l++)u+=n[l];for(;l<r;l++)u-=n[l];return u}function dge(e,t){var r=0,n=0,i=e.length,o=e[0].length,a=1,s=0,l=[],u,c,f,h;for(e=H4(e,t),u=e[0].length,r=0;r<i;r++){for(c=e[r][r],n=r,h=r+1;h<o;h++)c<Math.abs(e[h][r])&&(c=e[h][r],n=h);if(n!=r)for(h=0;h<u;h++)f=e[r][h],e[r][h]=e[n][h],e[n][h]=f;for(n=r+1;n<i;n++)for(a=e[n][r]/e[r][r],h=r;h<u;h++)e[n][h]=e[n][h]-a*e[r][h]}for(r=i-1;r>=0;r--){for(s=0,n=r+1;n<=i-1;n++)s=s+l[n]*e[r][n];l[r]=(e[r][u-1]-s)/e[r][r]}return l}function NY(e,t){var r=H4(e,t),n=r.length,i=r[0].length,o=0,a,s,l;for(s=0;s<n;s++){var u=s;for(l=s+1;l<n;l++)Math.abs(r[l][s])>Math.abs(r[u][s])&&(u=l);var c=r[s];for(r[s]=r[u],r[u]=c,l=s+1;l<n;l++)for(o=r[l][s]/r[s][s],a=s;a<i;a++)r[l][a]-=r[s][a]*o}for(s=n-1;s>=0;s--){for(o=r[s][s],l=0;l<s;l++)for(a=i-1;a>s-1;a--)r[l][a]-=r[s][a]*r[l][s]/o;for(r[s][s]/=o,a=n;a<i;a++)r[s][a]/=o}return r}function pge(e,t){var r=e[0].length,n=$a(1,r)[0],i,o=!1;return t[0].length!=null&&(t=t.map(function(a){return a[0]}),o=!0),tr(r-1,-1,-1).forEach(function(a){i=tr(a+1,r).map(function(s){return n[s]*e[a][s]}),n[a]=(t[a]-jn(i))/e[a][a]}),o?n.map(function(a){return[a]}):n}function gge(e,t){var r=e[0].length,n=$a(1,r)[0],i,o=!1;return t[0].length!=null&&(t=t.map(function(a){return a[0]}),o=!0),tr(r).forEach(function(a){i=tr(a).map(function(s){return e[a][s]*n[s]}),n[a]=(t[a]-jn(i))/e[a][a]}),o?n.map(function(a){return[a]}):n}function vge(e){var t=e.length,r=Rc(t),n=$a(e.length,e[0].length),i;return tr(t).forEach(function(o){n[0][o]=e[0][o]}),tr(1,t).forEach(function(o){tr(o).forEach(function(a){i=tr(a).map(function(s){return r[o][s]*n[s][a]}),r[o][a]=(e[o][a]-jn(i))/n[a][a]}),tr(o,t).forEach(function(a){i=tr(o).map(function(s){return r[o][s]*n[s][a]}),n[o][a]=e[i.length][a]-jn(i)})}),[r,n]}function mge(e){var t=e.length,r=$a(e.length,e[0].length),n;return tr(t).forEach(function(i){n=tr(i).map(function(o){return Math.pow(r[i][o],2)}),r[i][i]=Math.sqrt(e[i][i]-jn(n)),tr(i+1,t).forEach(function(o){n=tr(i).map(function(a){return r[i][a]*r[o][a]}),r[o][i]=(e[i][o]-jn(n))/r[i][i]})}),r}function yge(e,t,r,n){for(var i=0,o=0,a=e.length,s=[],l=[],u=[],c,f,h,d;i<a;i++)for(s[i]=[],l[i]=[],u[i]=[],o=0;o<a;o++)i>o?(s[i][o]=e[i][o],l[i][o]=u[i][o]=0):i<o?(l[i][o]=e[i][o],s[i][o]=u[i][o]=0):(u[i][o]=e[i][o],s[i][o]=l[i][o]=0);for(h=ke(ke(Da(u),ei(s,l)),-1),f=ke(Da(u),t),c=r,d=ei(ke(h,r),f),i=2;Math.abs(ed(Dc(d,c)))>n;)c=d,d=ei(ke(h,c),f),i++;return d}function _ge(e,t,r,n){for(var i=0,o=e.length,a=[],s=[],l=[],u,c,f,h,d;i<o;i++)for(a[i]=[],s[i]=[],l[i]=[],u=0;u<o;u++)i>u?(a[i][u]=e[i][u],s[i][u]=l[i][u]=0):i<u?(s[i][u]=e[i][u],a[i][u]=l[i][u]=0):(l[i][u]=e[i][u],a[i][u]=s[i][u]=0);for(h=ke(ke(Da(ei(l,a)),s),-1),f=ke(Da(ei(l,a)),t),c=r,d=ei(ke(h,r),f),i=2;Math.abs(ed(Dc(d,c)))>n;)c=d,d=ei(ke(h,c),f),i=i+1;return d}function bge(e,t,r,n,i){for(var o=0,a=e.length,s=[],l=[],u=[],c,f,h,d,p;o<a;o++)for(s[o]=[],l[o]=[],u[o]=[],c=0;c<a;c++)o>c?(s[o][c]=e[o][c],l[o][c]=u[o][c]=0):o<c?(l[o][c]=e[o][c],s[o][c]=u[o][c]=0):(u[o][c]=e[o][c],s[o][c]=l[o][c]=0);for(d=ke(Da(ei(u,ke(s,i))),Dc(ke(u,1-i),ke(l,i))),h=ke(ke(Da(ei(u,ke(s,i))),t),i),f=r,p=ei(ke(d,r),h),o=2;Math.abs(ed(Dc(p,f)))>n;)f=p,p=ei(ke(d,f),h),o++;return p}function wge(e){for(var t=e.length,r=e[0].length,n=0,i=[],o=[],a,s,l,u,c;n<t-1;n++){for(a=0,u=n+1;u<r;u++)a+=e[u][n]*e[u][n];for(c=e[n+1][n]>0?-1:1,a=c*Math.sqrt(a),s=Math.sqrt((a*a-e[n+1][n]*a)/2),i=$a(t,1),i[n+1][0]=(e[n+1][n]-a)/(2*s),l=n+2;l<t;l++)i[l][0]=e[l][n]/(2*s);o=Dc(Rc(t,r),ke(ke(i,Dl(i)),2)),e=ke(o,ke(e,o))}return e}function FY(e){var t=e.length,r=e[0].length,n=$a(r,r);e=U2(e);var i,o,a;for(o=0;o<r;o++){for(n[o][o]=Math.sqrt(jn(tr(t).map(function(s){return e[s][o]*e[s][o]}))),i=0;i<t;i++)e[i][o]=e[i][o]/n[o][o];for(a=o+1;a<r;a++)for(n[o][a]=jn(tr(t).map(function(s){return e[s][o]*e[s][a]})),i=0;i<t;i++)e[i][a]=e[i][a]-e[i][o]*n[o][a]}return[e,n]}function Sge(e){e=U2(e);var t=e.length,r=Rc(t);return tr(t-1,-1,-1).forEach(function(n){lg(r,{row:n},pC(rs(r,{row:n}),e[n][n])),lg(e,{row:n},pC(rs(e,{row:n}),e[n][n])),tr(n).forEach(function(i){var o=ke(e[i][n],-1),a=rs(e,{row:i}),s=ke(rs(e,{row:n}),o);lg(e,{row:i},ei(a,s));var l=rs(r,{row:i}),u=ke(rs(r,{row:n}),o);lg(r,{row:i},ei(l,u))})}),r}function $Y(e,t){var r=!1;t[0].length===void 0&&(t=t.map(function(f){return[f]}),r=!0);var[n,i]=FY(e),o=e[0].length,a=rs(n,{col:{end:o}}),s=rs(i,{row:{end:o}}),l=Sge(s),u=Dl(a);u[0].length===void 0&&(u=[u]);var c=ke(ke(l,u),t);return c.length===void 0&&(c=[[c]]),r?c.map(function(f){return f[0]}):c}function BY(e){for(var t=1,r=e.length,n=Rc(r,r),i=[],o,a,s,l,u,c,f,h;t===1;){for(c=e[0][1],l=0,u=1,a=0;a<r;a++)for(s=0;s<r;s++)a!=s&&c<Math.abs(e[a][s])&&(c=Math.abs(e[a][s]),l=a,u=s);for(e[l][l]===e[u][u]?f=e[l][u]>0?Math.PI/4:-Math.PI/4:f=Math.atan(2*e[l][u]/(e[l][l]-e[u][u]))/2,h=Rc(r,r),h[l][l]=Math.cos(f),h[l][u]=-Math.sin(f),h[u][l]=Math.sin(f),h[u][u]=Math.cos(f),n=ke(n,h),o=ke(ke(Da(h),e),h),e=o,t=0,a=1;a<r;a++)for(s=1;s<r;s++)a!=s&&Math.abs(e[a][s])>.001&&(t=1)}for(a=0;a<r;a++)i.push(e[a][a]);return[n,i]}function Tge(e,t,r,n,i,o){var a,s,l,u,c;if(o===2)for(;n<=r;)a=t*e(n,i),s=t*e(n+t,i+a),l=i+(a+s)/2,i=l,n=n+t;if(o===4)for(;n<=r;)a=t*e(n,i),s=t*e(n+t/2,i+a/2),u=t*e(n+t/2,i+s/2),c=t*e(n+t,i+u),l=i+(a+2*s+2*u+c)/6,i=l,n=n+t;return i}function kge(e,t,r,n){for(var i=0,o=(r-t)/2,a=[],s=[],l=[],u,c,f,h,d;i<n/2;){for(d=e(t),f=t,h=0;f<=r;f=f+o,h++)a[h]=f;for(u=a.length,f=1;f<u-1;f++)d+=(f%2!==0?4:2)*e(a[f]);d=o/3*(d+e(r)),l[i]=d,o/=2,i++}for(c=l.length,u=1;c!==1;){for(f=0;f<c-1;f++)s[f]=(Math.pow(4,u)*l[f+1]-l[f])/(Math.pow(4,u)-1);c=s.length,l=s,s=[],u++}return l}function Pge(e,t,r,n){function i(p,g){for(var m=0,v=p.length,y;m<v;m++)p[m]===g&&(y=m);return y}for(var o=Math.abs(r-e[i(e,r)+1]),a=0,s=[],l=[],u,c,f,h,d;n>=o;)u=i(e,r+n),c=i(e,r),s[a]=(t[u]-2*t[c]+t[2*c-u])/(n*n),n/=2,a++;for(h=s.length,f=1;h!=1;){for(d=0;d<h-1;d++)l[d]=(Math.pow(4,f)*s[d+1]-s[d])/(Math.pow(4,f)-1);h=l.length,s=l,l=[],f++}return s}function Ege(e,t,r,n){for(var i=(r-t)/n,o=e(t),a=[],s=t,l=0,u=1,c;s<=r;s=s+i,l++)a[l]=s;for(c=a.length;u<c-1;u++)o+=(u%2!==0?4:2)*e(a[u]);return i/3*(o+e(r))}function Cge(e,t,r,n){for(var i=e.length,o=0,a=0,s=[],l=[],u=[],c=[],f;a<i;a++){for(s[a]=1,f=0;f<i;f++)a!=f&&(s[a]*=(n-e[f])/(e[a]-e[f]));for(l[a]=0,f=0;f<i;f++)a!=f&&(l[a]+=1/(e[a]-e[f]));u[a]=(1-2*(n-e[a])*l[a])*(s[a]*s[a]),c[a]=(n-e[a])*(s[a]*s[a]),o+=u[a]*t[a]+c[a]*r[a]}return o}function Age(e,t,r){for(var n=0,i=0,o,a,s=e.length;i<s;i++){for(a=t[i],o=0;o<s;o++)i!=o&&(a*=(r-e[o])/(e[i]-e[o]));n+=a}return n}function xge(e,t,r){for(var n=e.length,i=0,o,a=[],s=[],l=[],u=[],c=[],f=[],h=[];i<n-1;i++)c[i]=e[i+1]-e[i];for(l[0]=0,i=1;i<n-1;i++)l[i]=3/c[i]*(t[i+1]-t[i])-3/c[i-1]*(t[i]-t[i-1]);for(i=1;i<n-1;i++)a[i]=[],s[i]=[],a[i][i-1]=c[i-1],a[i][i]=2*(c[i-1]+c[i]),a[i][i+1]=c[i],s[i][0]=l[i];for(u=ke(Da(a),s),o=0;o<n-1;o++)f[o]=(t[o+1]-t[o])/c[o]-c[o]*(u[o+1][0]+2*u[o][0])/3,h[o]=(u[o+1][0]-u[o][0])/(3*c[o]);for(o=0;o<n&&!(e[o]>r);o++);return o-=1,t[o]+(r-e[o])*f[o]+gC(r-e[o],2)*u[o]+(r-e[o])*gC(r-e[o],2)*h[o]}function Mge(){throw new Error("gauss_quadrature not yet implemented")}function Ige(e){var t=e.length,r=e[0].length,n=0,i,o,a=[],s=[],l=[],u=[],c=[],f=[],h=[],d=[],p=[],g=[];for(n=0;n<t;n++)a[n]=jn(e[n])/r;for(n=0;n<r;n++)for(h[n]=[],i=0;i<t;i++)h[n][i]=e[i][n]-a[i];for(h=Dl(h),n=0;n<t;n++)for(d[n]=[],i=0;i<t;i++)d[n][i]=lb([h[n]],[h[i]])/(r-1);for(l=BY(d),p=l[0],s=l[1],g=Dl(p),n=0;n<s.length;n++)for(i=n;i<s.length;i++)s[n]<s[i]&&(o=s[n],s[n]=s[i],s[i]=o,u=g[n],g[n]=g[i],g[i]=u);for(f=Dl(h),n=0;n<t;n++)for(c[n]=[],i=0;i<f.length;i++)c[n][i]=lb([g[n]],[f[i]]);return[e,s,g,c]}const Lge=Object.freeze(Object.defineProperty({__proto__:null,add:ei,subtract:Dc,divide:pC,multiply:ke,outer:sge,dot:lb,pow:gC,exp:lge,log:uge,abs:cge,norm:ed,angle:fge,aug:H4,inv:Da,det:hge,gauss_elimination:dge,gauss_jordan:NY,triaUpSolve:pge,triaLowSolve:gge,lu:vge,cholesky:mge,gauss_jacobi:yge,gauss_seidel:_ge,SOR:bge,householder:wge,QR:FY,lstsq:$Y,jacobi:BY,rungekutta:Tge,romberg:kge,richardson:Pge,simpson:Ege,hermite:Cge,lagrange:Age,cubic_spline:xge,gauss_quadrature:Mge,PCA:Ige},Symbol.toStringTag,{value:"Module"}));function Oge(e){var t=e[0].length,r=tr(t).map(function(n){var i=tr(t).filter(function(o){return o!==n});return zY(ib(e,n).map(function(o){return o[0]}),ib(e,i))});return r}function zY(e,t){var r=e.length,n=t[0].length-1,i=r-n-1,o=$Y(t,e),a=ke(t,o.map(function(d){return[d]})).map(function(d){return d[0]}),s=Dc(e,a),l=Wr(e),u=jn(a.map(function(d){return Math.pow(d-l,2)})),c=jn(e.map(function(d,p){return Math.pow(d-a[p],2)})),f=u+c,h=u/f;return{exog:t,endog:e,nobs:r,df_model:n,df_resid:i,coef:o,predict:a,resid:s,ybar:l,SST:f,SSE:u,SSR:c,R2:h}}function Rge(e){var t=Oge(e.exog),r=Math.sqrt(e.SSR/e.df_resid),n=t.map(function(l){var u=l.SST,c=l.R2;return r/Math.sqrt(u*(1-c))}),i=e.coef.map(function(l,u){return(l-0)/n[u]}),o=i.map(function(l){var u=ns(l,e.df_resid);return(u>.5?1-u:u)*2}),a=sb(.975,e.df_resid),s=e.coef.map(function(l,u){var c=a*n[u];return[l-c,l+c]});return{se:n,t:i,p:o,sigmaHat:r,interval95:s}}function Dge(e){var t=e.R2/e.df_model/((1-e.R2)/e.df_resid),r=function(i,o,a){return ob(i/(a/o+i),o/2,a/2)},n=1-r(t,e.df_model,e.df_resid);return{F_statistic:t,pvalue:n}}function Nge(e,t){var r=zY(e,t),n=Rge(r),i=Dge(r),o=1-(1-r.R2)*((r.nobs-1)/r.df_resid);return r.t=n,r.f=i,r.adjust_R2=o,r}const Fge={ols:Nge},$ge=Object.freeze(Object.defineProperty({__proto__:null,models:Fge},Symbol.toStringTag,{value:"Module"}));Object.assign(gt,Mfe,Qfe,age,Lge,$ge,_he);for(const[e,t]of Object.entries(Kpe)){let r=function(...n){return this instanceof r?(this.givenArgs=n,this):new r(...n)};Object.assign(r,t),gt[e]=r,gt.prototype[e]=function(...n){const i=r(...n);return i.data=this,i},r.prototype.sample=function(n){const i=this.givenArgs;return n?gt.alter(n,()=>t.sample(...i)):t.sample(...i)},["pdf","cdf","inv"].forEach(n=>{r.prototype[n]=function(i){return!i&&i!==0&&(i=this.data),typeof i!="number"?gt.map(i,o=>t[n](o,...this.givenArgs)):t[n](i,...this.givenArgs)}}),["mean","median","mode","variance"].forEach(n=>{r.prototype[n]=function(){return t[n](...this.givenArgs)}})}"gammaln gammafn factorial factorialln".split(" ").forEach(function(e){gt.prototype[e]=function(){return gt(gt.map(this,function(t){return gt[e](t)}))}});gt.prototype.randn=function(){return gt(gt.randn.apply(null,arguments))};const X4=hY.isFunction;(function(e){for(var t=0;t<e.length;t++)(function(r){gt.prototype[r]=function(n,i){var o=[],a=0,s=this;if(X4(n)&&(i=n,n=!1),i)return setTimeout(function(){i.call(s,gt.prototype[r].call(s,n))}),this;if(this.length>1){for(s=n===!0?this:this.transpose();a<s.length;a++)o[a]=gt[r](s[a]);return o}return gt[r](this[0],n)}})(e[t])})("cumsum cumprod".split(" "));(function(e){for(var t=0;t<e.length;t++)(function(r){gt.prototype[r]=function(n,i){var o=[],a=0,s=this;if(X4(n)&&(i=n,n=!1),i)return setTimeout(function(){i.call(s,gt.prototype[r].call(s,n))}),this;if(this.length>1){for(r!=="sumrow"&&(s=n===!0?this:this.transpose());a<s.length;a++)o[a]=gt[r](s[a]);return n===!0?gt[r](gt.utils.toVector(o)):o}return gt[r](this[0],n)}})(e[t])})("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" "));(function(e){for(var t=0;t<e.length;t++)(function(r){gt.prototype[r]=function(){var n=[],i=0,o=this,a=Array.prototype.slice.call(arguments),s;if(X4(a[a.length-1])){s=a[a.length-1];var l=a.slice(0,a.length-1);return setTimeout(function(){s.call(o,gt.prototype[r].apply(o,l))}),this}else{s=void 0;var u=function(f){return gt[r].apply(o,[f].concat(a))}}if(this.length>1){for(o=o.transpose();i<o.length;i++)n[i]=u(o[i]);return n}return u(this[0])}})(e[t])})("quantiles percentileOfScore".split(" "));gt.prototype.zscore=function(t,r){return(t-this.mean())/this.stdev(r)};gt.prototype.ztest=function(t,r,n){const i=Math.abs(this.zscore(t,n));return r===1?gt.normal.cdf(-i,0,1):gt.normal.cdf(-i,0,1)*2};gt.prototype.tscore=function(t){return(t-this.mean())/(this.stdev(!0)/Math.sqrt(this.cols()))};gt.prototype.ttest=function(t,r){return r===1?1-gt.studentt.cdf(Math.abs(this.tscore(t)),this.cols()-1):gt.studentt.cdf(-Math.abs(this.tscore(t)),this.cols()-1)*2};gt.prototype.anovafscore=function(){return gt.anovafscore(this.toArray())};gt.prototype.anovaftes=function(){var t=0,r;for(r=0;r<this.length;r++)t=t+this[r].length;return gt.ftest(this.anovafscore(),this.length-1,t-this.length)};gt.prototype.oneSidedDifferenceOfProportions=function(){console.error("Please use jStat.oneSidedDifferenceOfProportions() instead")};gt.prototype.twoSidedDifferenceOfProportions=function(){console.error("Please use jStat.twoSidedDifferenceOfProportions() instead")};"add divide multiply subtract dot pow exp log abs norm angle".split(" ").forEach(e=>{gt.prototype[e]=function(t,r){const n=this;return r?(r.call(n,gt.prototype[e].call(n,t)),this):typeof gt[e](this,t)=="number"?gt[e](this,t):gt(gt[e](this,t))}});gt.jStat=gt;function Bge(e,t,r,n){let i=[];for(let a=0;a<=r;a++){const s=.5+a+0,u=gt.lognormal.pdf(s,e,n)*t;u<.01||i.push([a,u])}return i}function zge(e,t,r,n){let i=[];for(let a=0;a<=r;a++){const s=.5+a+0,u=gt.gamma.pdf(s,e,n)*t;u<.01||i.push([a,u])}return i}function Vge(e,t,r,n){let i=[];for(let o=0;o<=r;o++){const a=.5+o,l=gt.uniform.pdf(a,e-n/2,e+n/2)*t;l<.01||i.push([o,l])}return i}function Uge(e,t,r,n){let i=[];for(let o=0;o<=r;o++){const a=.5+o,l=gt.triangular.pdf(a,e-n,e+n,e)*t;l<.01||i.push([o,l])}return i}function Wge(e,t,r,n){let i=[];for(let o=0;o<=r;o++){const a=.5+o,l=gt.normal.pdf(a,e,n)*t;l<.01||i.push([o,l])}return i}function X2(e,t,r,n){if(n)return jge(e,t,r);const i=t;let o=[];for(let a=0;a<=r;a++){const s=gt.binomial.pdf(a,r,e/r);if(s<0)return null;const l=s*i;l<.01||o.push([a,l])}return o}function jge(e,t,r){const n=t;let i=[],o=0;for(let a=0;a<=r;a++){const s=gt.binomial.pdf(a,r,e/r);if(s<0)return null;const l=s*n;if(l<.01)continue;const u=Math.floor(a*1.684);if(o)for(let c=o;c<u;c++)i.push([c,0]);i.push([u,l]),o=u+1}return i}function Gge(e,t,r,n,i,o){let a=[],s=0;for(let p=0;p<=i;p++){const g=gt.binomial.pdf(p,i,e/i);if(g<0){a=null;break}const m=g*t;if(m<.01)continue;const v=Math.floor(p*1.684);if(s)for(let y=s;y<v;y++)a.push([y,0]);a.push([v,m]),s=v+1}const l=n/t,u={};for(let p=0;p<=i;p++){const g=gt.binomial.pdf(p,i,r/i);if(g<0)throw Error(`invalid arguments for Stat.binomial.pdf: ${p}, ${i}, ${r/i}`);if(g*n<.01)continue;const v=o?Math.floor(p*1.684):p;a.forEach(y=>{const[b,w]=y,T=b+v,S=w*g*l;T in u?u[T]+=S:u[T]=S})}let c=99,f=0;for(const[p,g]of Object.entries(u)){if(g<.01)continue;const m=parseInt(p);m<c&&(c=m),m>f&&(f=m)}const h=[];for(let p=c;p<=f;p++)if(p in u){const g=u[p];h.push([p,g])}else h.push([p,0]);return{bellU:a,bellL:h}}function VY(e,t){let r={};if(e)for(let[o,a]of e)r[o]=a;for(let[o,a]of t)o in r?r[o]+=a:r[o]=a;let n=Object.entries(r).sort((o,a)=>o[0]-a[0]),i=[];for(let[o,a]of n)i.push([o,a]);return i}function Y2(e,t,r,n,i){if(n)throw Error("not implemented");return Hge(e,t,r,i)}function Hge(e,t,r,n){let i,o,a;if(!Object.keys(e).length)return{mse:i,chisq:o,pval:a};i=0;for(const[p,[g,m]]of Object.entries(e)){const v=parseInt(g);if(n&&v==0)continue;const y=v in t?t[v]:0,b=m-y;i+=b*b}const s=3,l=r+2,u=Object.keys(e).sort((p,g)=>e[g][1]-e[p][1]);let c={},f=0;if(u.forEach(p=>{const g=e[p][0];if(n&&g=="0")return;const m=e[p][1],v=g in t?t[g]:0;(m>=s||v>=s||f<l)&&(c[g]={y_model:m,y_observed:v},f++)}),Object.keys(c).length==0)return console.log("can't compute chiSquared: only",c,"bins left after discard"),{mse:i,chisq:o,pval:a};let d=0;o=0;for(const[p,{y_model:g,y_observed:m}]of Object.entries(c)){const v=g-m;o+=v*v/g,d++}return d-1-r<1?(console.log("can't compute pval: bins",d,"variables",r),{mse:i,chisq:o,pval:a}):(isFinite(o)?a=1-gt.chisquare.cdf(o,d-1-r):a=0,{mse:i,chisq:o,pval:a,variables:r})}function UY(e){e.forEach(t=>{t[0]=Math.floor(t[0]*1.684)})}Qr([ql,dd,Yc,Kc,Ql,Jl,tu,Zc,vd,gd,pd,qc]);const Xge={data:()=>({selected_np:1,selected_n:10,isBinary:!1}),props:{stats:Object,histogram:Object,isGiant:Boolean},components:{VChart:eu},methods:{formatFixed:dt,isGoodVal:Gi,formatKMG:Ab,makeBinomialArray:X2,loss:Y2,applyGiantBonus:UY,makeModelA(e,t){let r={np:e,n:t};if(r.bell=this.makeBinomialArray(e,this.stats.len,t,this.isGiant),!r.bell)return null;if(r.loss=this.loss(r.bell,this.histogram.map,2),this.isBinary=0 in r.bell&&1 in r.bell&&Object.keys(r.bell).length==2&&0 in this.histogram.map&&1 in this.histogram.map&&Object.keys(this.histogram.map).length==2,this.isBinary){const n=this.stats.lucky.len,i=r.bell[1][1],o=this.histogram.map[1],a=i/n;o<=n&&0<a&&a<1?(r.loss.binomtest=N4(o,Math.round(n),{p:a}),r.loss.pval=r.loss.binomtest.pValue,console.log("binomtest:",r.bell,this.histogram.map,o,n,a,r.loss.binomtest)):(console.log("can't binomtest",r.bell,this.histogram.map,o,n,a),r.loss.binomtest=NaN)}return r},tuneModelA(e,t,r){let n=[t];t===void 0&&(n=[1,10,20,40,110,120,140,150],n=n.filter(o=>o>=e&&o<=this.stats.max*5),r&&n.push(r));let i={n:NaN,loss:{mse:NaN,chisq:NaN,pval:NaN}};return n.forEach(o=>{const a=this.makeModelA(e,o);if(!a)return;Gi(a.loss.mse)&&(!Gi(i.loss.mse)||a.loss.mse<i.loss.mse)&&(i=a)}),i},applySelectedNP(e){e<0||(e>this.selected_n&&(this.selected_n=Math.ceil(e)),this.selected_np=e)},applySelectedN(e){e<0||(e<this.selected_np&&(this.selected_np=e),this.selected_n=e)}},computed:{modelA(){return this.makeModelA(this.selected_np,this.selected_n)},modelAForChart(){const e=this.stats.len,t=this.stats.generalSigmas,r=[];return this.modelA.bell.forEach(([n,i])=>{const o=i/e,a=t*Math.sqrt(o*(1-o)/e),s=Math.max(0,o-a)*e,l=Math.min(1,o+a)*e;r.push([n,i,s,l])}),r},sweepRange(){const e={lo:Math.max(0,this.stats.meanLo),init:this.stats.mean,hi:this.stats.meanHi};return this.isGiant&&(e.init>60?(e.lo/=1.684,e.init/=1.684,e.hi/=1.684):e.init>50?(e.lo/=1.684,e.init/=1.684,e.hi/=1.64):e.init>20?(e.lo/=1.684,e.init/=1.684,e.hi/=1.6):e.init>10?(e.lo/=1.684,e.init/=1.684,e.hi/=1.5):e.init>5?(e.lo/=1.684,e.init/=1.684,e.hi/=1.3):e.init>1&&(e.lo/=1.684,e.init/=1.684,e.hi/=1)),e.range=e.hi-e.lo,e},modelASweep(){const e=this.tuneModelA(this.sweepRange.init,void 0);let t=10;const r=[.002,.005,.01,.02,.05,.1,.2,.5,1,2,5];for(const a of r)if(Math.floor(this.sweepRange.range/a)<20){t=a;break}const n=Math.ceil(this.sweepRange.lo/t)*t;let i=e;const o=[];for(let a=n;a<=this.sweepRange.hi;a+=t){let s=this.tuneModelA(a,void 0);a>this.sweepRange.init&&a<this.sweepRange.init+t&&o.push([this.sweepRange.init,s.n,e.loss.mse,e.loss.chisq,e.loss.pval]),o.push([a,s.n,s.loss.mse,s.loss.chisq,s.loss.pval]),s.loss.mse<i.loss.mse&&(i=s)}return isFinite(i.loss.mse)&&(this.selected_np=i.np,this.selected_n=i.n),{result:i,log:o}},makeChartHist(){return{legend:null,tooltip:{trigger:"axis"},dataset:[{source:this.histogram.arr},{source:this.modelAForChart}],xAxis:{axisLine:{onZero:!1},min:this.stats.min==0?-1:null,max:this.stats.max<3?this.stats.max+1:null},yAxis:{axisLine:{onZero:!1},axisLabel:{formatter:t=>this.formatKMG(t)}},grid:{left:35,top:8,right:10,bottom:20},series:[{type:"bar",name:"observed",datasetIndex:0,encode:{x:0,y:1},tooltip:{valueFormatter:t=>dt(t,0)}},{type:"line",name:"model",datasetIndex:1,encode:{x:0,y:1},tooltip:{valueFormatter:t=>dt(t,0)},showSymbol:!1},{type:"line",name:`-${this.stats.generalSigmas}\u03C3`,datasetIndex:1,encode:{x:0,y:2},tooltip:{valueFormatter:t=>dt(t,0)},showSymbol:!1,lineStyle:{opacity:.4}},{type:"line",name:`+${this.stats.generalSigmas}\u03C3`,datasetIndex:1,encode:{x:0,y:3},tooltip:{valueFormatter:t=>dt(t,0)},showSymbol:!1,lineStyle:{opacity:.4}}]}},makeChartASweep(){const e={legend:{},tooltip:{trigger:"axis",formatter:function(t){const r=t[0].data;return`np=${dt(r[0],2)}<br/>n=${dt(r[1],2)}<br/>MSE=${r[2].toLocaleString(void 0,{notation:"compact"})}<br/>\u03C7\xB2=${r[3].toLocaleString(void 0,{notation:"compact"})}<br/>p-val=${dt(r[4],2)}<br/>`}},title:{subtext:"",left:"center",textStyle:{fontSize:10}},dataset:[{source:this.modelASweep.log}],xAxis:{min:this.sweepRange.lo,max:this.sweepRange.hi,name:"np",nameLocation:"center",nameGap:20,axisLine:{onZero:!1},axisLabel:{showMinLabel:!1}},yAxis:[{position:"left",axisLabel:{formatter:t=>t.toLocaleString(void 0,{notation:"compact"})},splitLine:{show:!1}},{position:"right",axisLabel:{formatter:t=>t.toLocaleString(void 0,{notation:"compact"})}}],grid:{left:35,top:30,right:40,bottom:20},series:[{name:"MSE",type:"line",encode:{x:0,y:2},tooltip:{valueFormatter:t=>dt(t,2)}},{name:"p-val",type:"line",encode:{x:0,y:4},tooltip:{valueFormatter:t=>dt(t,4)},yAxisIndex:1}]};return console.log("makeChartASweep",e.dataset),e}}},gn=e=>(er("data-v-cd6f3e00"),e=e(),rr(),e),Yge=gn(()=>_("span",{class:"title"},"Model A",-1)),Kge=gn(()=>_("span",null,[$(": all points were taken from a single distribution with "),_("i",null,"np = M")],-1)),Zge=$(" with giant bonus"),qge={key:0},Jge={style:{float:"left"}},Qge=$(" Sweeping through "),tve=gn(()=>_("i",null,"np",-1)),eve={key:0,id:"chartSweep"},rve={key:1},nve={style:{padding:"1em"}},ive=gn(()=>_("th",null,null,-1)),ove=gn(()=>_("th",null,"np",-1)),ave=gn(()=>_("th",null,"n",-1)),sve=gn(()=>_("th",null,"MSE",-1)),lve=gn(()=>_("th",null,"p-val",-1)),uve=gn(()=>_("td",null,"Best fit:",-1)),cve=gn(()=>_("td",null,"Manual:",-1)),fve=$(" np: "),hve=["value","min","max","step"],dve=$(" n: "),pve=["value","min"],gve=gn(()=>_("br",null,null,-1)),vve={id:"chartHisto",style:{float:"left"}},mve=gn(()=>_("div",{style:{clear:"both"}},null,-1)),yve=gn(()=>_("br",null,null,-1)),_ve=gn(()=>_("p",{class:"fsxs"},[$("MSE: "),_("i",null,"\u03A3 (observed - model)\xB2"),$(", discard nothing \u2190 this is used for fitting")],-1)),bve={key:0,class:"fsxs"},wve=$("p-val: "),Sve=gn(()=>_("a",{href:"https://en.wikipedia.org/wiki/Binomial_test"},"exact",-1)),Tve=[wve,Sve],kve=gn(()=>_("p",{class:"fsxs"},[$("\u03C7\xB2: discard bins where model < 3, then "),_("i",null,"\u03A3 (observed - model)\xB2 / model")],-1)),Pve=gn(()=>_("p",{class:"fsxs"},[$("p-val: "),_("i",null,"1 - chisquare.cdf(\u03C7\xB2, bins - 1 - dof) \u2190 this depends too much on previous step discards")],-1));function Eve(e,t,r,n,i,o){const a=Gt("v-chart");return I(),O(W,null,[Yge,Kge,_("p",null,[at(_("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=s=>r.isGiant=s)},null,512),[[Ge,r.isGiant]]),Zge]),r.isGiant?(I(),O("p",qge,"This causes gaps in Unlucky distrubution because giantValue=floor(1.684*ordinaryValue);")):nt("",!0),_("div",null,[_("div",Jge,[Qge,tve,$(" values in "+M(o.formatFixed(this.sweepRange.lo,2))+"\u2026"+M(o.formatFixed(this.sweepRange.hi,2))+" range: ",1),o.modelASweep.result.np?(I(),O("div",eve,[ht(a,{option:o.makeChartASweep},null,8,["option"])])):(I(),O("div",rve," [failed] ")),_("div",nve,[_("table",null,[_("tr",null,[ive,ove,ave,sve,nt("",!0),lve]),o.modelASweep.result?(I(),O("tr",{key:0,class:Ur({strike:r.stats.aBad})},[uve,_("td",null,M(o.formatFixed(o.modelASweep.result.np,4)),1),_("td",null,M(o.formatFixed(o.modelASweep.result.n)),1),_("td",null,M(o.formatFixed(o.modelASweep.result.loss.mse,2)),1),nt("",!0),_("td",null,M(o.formatFixed(o.modelASweep.result.loss.pval,4)),1)],2)):nt("",!0),_("tr",null,[cve,_("td",null,M(o.formatFixed(e.selected_np,4)),1),_("td",null,M(e.selected_n),1),_("td",null,M(o.formatFixed(o.modelA.loss.mse,2)),1),nt("",!0),_("td",null,M(o.formatFixed(o.modelA.loss.pval,4)),1)])]),fve,_("input",{type:"range",onInput:t[1]||(t[1]=s=>o.applySelectedNP(Number(s.target.value))),value:e.selected_np,min:r.stats.min,max:r.stats.max,step:.01,class:"vmid"},null,40,hve),dve,_("input",{type:"range",onInput:t[2]||(t[2]=s=>o.applySelectedN(Number(s.target.value))),value:e.selected_n,min:r.stats.max,max:200,step:1,class:"vmid"},null,40,pve),gve])]),_("div",vve,[o.modelA.bell?(I(),qr(a,{key:0,option:o.makeChartHist},null,8,["option"])):(I(),O(W,{key:1},[$(" [failed to build the requested distribution np="+M(o.modelA.np)+" n="+M(o.modelA.n)+" ] ",1)],64))]),mve,yve,_ve,e.isBinary?(I(),O("p",bve,Tve)):(I(),O(W,{key:1},[kve,Pve],64))])],64)}const Cve=le(Xge,[["render",Eve],["__scopeId","data-v-cd6f3e00"]]);Qr([ql,dd,Yc,Kc,Dgt,Ql,Jl,tu,Zc,vd,gd,pd,qc]);const Ave={data:()=>({selected_np:1,selected_n:10,sweep_lo:0,sweep_hi:1}),props:{stats:Object,histogram:Object},components:{VChart:eu},methods:{isGoodVal:Gi,formatFixed:dt,formatKMG:Ab,makeBinomialArray:X2,loss:Y2,makeModelB(e,t){const r=this.makeBinomialArray(e,this.stats.lucky.len,t);if(!r)return null;const n={np:e,n:t,bell:r},i=this.histogram.map,o=this.histogramLuckOnly.err[0][1],a=this.histogramLuckOnly.err[0][2];if(r[0]<o){const l={...i};l[0]=o,n.loss=this.loss(n.bell,l,2,!1)}else if(r[0]>a){const l={...i};l[0]=a,n.loss=this.loss(n.bell,l,2,!1)}else{const l={...i};delete l[0],n.loss=this.loss(n.bell,l,2,!1,!0)}if(0 in r&&1 in r&&Object.keys(r).length==2&&0 in i&&1 in i&&Object.keys(i).length==2){const l=this.stats.lucky.len,u=r[1][1],c=i[1],f=u/l;c<=l&&0<f&&f<1?(n.loss.binomtest=N4(c,Math.round(l),{p:f}),n.loss.pval=n.loss.binomtest.pValue,console.log("binomtest:",r,i,c,l,f,n.loss.binomtest)):(console.log("can't binomtest",r,i,c,l,f),n.loss.binomtest=NaN)}return n},tuneModelB(e,t){let r=[t];t===void 0&&(r=[10,20,40,110,120,140,150],r.push(this.stats.max),r=r.filter(i=>i<=this.stats.max*5));let n={np:0,n:1,loss:{mse:void 0,chisq:void 0,pval:void 0}};if(!this.histogramLuckOnly){console.log("tuneModelB skip");return}return r.forEach(i=>{const o=this.makeModelB(e,i);if(!o)return;Gi(o.loss.mse)&&(!Gi(n.loss.mse)||o.loss.mse<n.loss.mse)&&(n=o)}),n&&n.np>0&&n.np<=n.n?n:(console.log(`tuneModelB np=${e} -> failed`),null)},applySelectedNp(e){e<0||(e>this.selected_n&&(this.selected_n=Math.ceil(e)),this.selected_np=e)},applySelectedN(e){e<0||(e<this.selected_np&&(this.selected_np=e),this.selected_n=e)}},computed:{histogramLuckOnly(){const e={...this.histogram.map};e[0]=this.histogram.map[0]-this.stats.unlucky.len;const t=[],r=[];for(const[n,i]of Object.entries(e)){if(n==0){const o=this.histogram.map[0]-(this.stats.len-this.stats.lucky.lenHi),a=this.histogram.map[0]-(this.stats.len-this.stats.lucky.lenLo);r.push([n,a,o])}t.push([n,i])}return{map:e,arr:t,err:r}},zeroBinRange(){return{min:this.histogramLuckOnly.err[0][1],max:this.histogramLuckOnly.err[0][2]}},npRangeForBinary(){if(Object.keys(this.histogram.map).length==2&&1 in this.histogram.map){const e=this.histogram.map[1];return{min:e/(this.zeroBinRange.max+e),max:e/(this.zeroBinRange.min+e)}}},modelB(){const e=this.makeModelB(this.selected_np,this.selected_n);return console.log("modelB",e),e},modelBForChart(){const e=this.stats.len,t=this.stats.generalSigmas,r=[];return this.modelB.bell.forEach(([n,i])=>{const o=i/e,a=t*Math.sqrt(o*(1-o)/e),s=Math.max(0,o-a)*e,l=Math.min(1,o+a)*e;r.push([n,i,s,l])}),r},modelBSweep(){const e=Math.max(this.stats.meanLo/this.stats.lucky.share,0);if(e>8888888)return console.log("modelBSweep skip - no input",this.stats.meanLo,this.stats.lucky.share,this.stats.lucky.std),!1;this.sweep_lo=e,this.sweep_hi=this.stats.meanHi/this.stats.lucky.share;const t=this.sweep_hi-e;let r=10;const n=[.002,.005,.01,.02,.05,.1,.2,.5,1,2,5];for(const s of n)if(Math.floor(t/s)<40){r=s;break}if(Math.floor(t/r)>1e3)return!1;const i=Math.ceil(e/r)*r;let o={np:void 0,n:void 0,loss:{mse:1/0,chisq:1/0,pval:0}};const a=[];for(let s=i;s<=this.sweep_hi;s+=r){const l=this.tuneModelB(s,void 0);if(!l)continue;a.push([s,l.n,l.loss.mse,l.loss.chisq,l.loss.pval]),Gi(l.loss.mse)&&(!Gi(o.loss.mse)||l.loss.mse<o.loss.mse)&&(console.log("new best model",s,l),o=l)}return this.selected_np=o.np,this.selected_n=o.n,{result:o,log:a}},makeChartBSweep(){const e={legend:{},tooltip:{trigger:"axis",formatter:function(t){const r=t[0].data;return`np=${dt(r[0],2)}<br/>n=${dt(r[1])}<br/>MSE=${r[2].toLocaleString(void 0,{notation:"compact"})}<br/>\u03C7\xB2=${r[3].toLocaleString(void 0,{notation:"compact"})}<br/>p-val=${dt(r[4],2)}<br/>`}},title:{subtext:"",left:"center",textStyle:{fontSize:10}},dataset:[{source:this.modelBSweep.log}],xAxis:{min:this.sweep_lo,max:this.sweep_hi,name:"np",nameLocation:"center",nameGap:20,axisLine:{onZero:!1},axisLabel:{showMinLabel:!1}},yAxis:[{position:"left",axisLabel:{formatter:t=>this.formatKMG(t)},splitLine:{show:!1}},{position:"right"}],grid:{left:35,top:30,right:40,bottom:20},series:[{name:"MSE",type:"line",encode:{x:0,y:2},tooltip:{valueFormatter:t=>dt(t,2)}},{name:"p-val",type:"line",encode:{x:0,y:4},tooltip:{valueFormatter:t=>dt(t,4)},yAxisIndex:1}]};return console.log("makeChartBSweep",e.dataset),e},makeChartBHist(){return{legend:null,tooltip:{trigger:"axis"},dataset:[{source:this.histogramLuckOnly.arr},{source:this.histogramLuckOnly.err},{source:this.modelBForChart}],xAxis:{axisLine:{onZero:!1},min:-1,max:this.stats.max+1},yAxis:{axisLine:{onZero:!1},axisLabel:{formatter:t=>this.formatKMG(t)}},grid:{left:35,top:8,right:10,bottom:20},series:[{type:"bar",name:"observed",datasetIndex:0,encode:{x:0,y:1},tooltip:{valueFormatter:t=>dt(t,0)}},{type:"line",name:"model",datasetIndex:2,encode:{x:0,y:1},tooltip:{valueFormatter:t=>dt(t,3)},showSymbol:!1},{type:"line",name:`-${this.stats.generalSigmas}\u03C3`,datasetIndex:2,encode:{x:0,y:2},tooltip:{valueFormatter:t=>dt(t,0)},showSymbol:!1,lineStyle:{opacity:.4}},{type:"line",name:`+${this.stats.generalSigmas}\u03C3`,datasetIndex:2,encode:{x:0,y:3},tooltip:{valueFormatter:t=>dt(t,0)},showSymbol:!1,lineStyle:{opacity:.4}},{type:"custom",name:"observed-error",datasetIndex:1,encode:{x:0,y:[1,2]},itemStyle:{borderWidth:1.5},renderItem:function(t,r){var n=r.value(0),i=r.coord([n,r.value(1)]),o=r.coord([n,r.value(2)]),a=r.size([1,0])[0]*.1,s=r.style({stroke:r.visual("color"),fill:void 0});return{type:"group",children:[{type:"line",transition:["shape"],shape:{x1:i[0]-a,y1:i[1],x2:i[0]+a,y2:i[1]},style:s},{type:"line",transition:["shape"],shape:{x1:i[0],y1:i[1],x2:o[0],y2:o[1]},style:s},{type:"line",transition:["shape"],shape:{x1:o[0]-a,y1:o[1],x2:o[0]+a,y2:o[1]},style:s}]}},tooltip:{show:!1},z:100}]}}}},en=e=>(er("data-v-7790bb48"),e=e(),rr(),e),xve=en(()=>_("span",{class:"title"},"Model B",-1)),Mve=en(()=>_("span",null,[$(": majority (1-\u03BB) of points are zero, but \u03BB points are from a binomial distribution with such "),_("i",null,"np"),$(", that \u03BB"),_("i",null,"np"),$(" = M")],-1)),Ive=$("Sweeping through "),Lve=en(()=>_("i",null,"np",-1)),Ove={style:{float:"left"}},Rve={key:0,id:"chartSweep"},Dve={style:{padding:"1em"}},Nve={style:{float:"left"}},Fve=en(()=>_("th",null,null,-1)),$ve=en(()=>_("th",null,"np",-1)),Bve=en(()=>_("th",null,"n",-1)),zve=en(()=>_("th",null,"MSE",-1)),Vve=en(()=>_("th",null,"p-val",-1)),Uve={key:0},Wve=en(()=>_("td",null,"Best fit:",-1)),jve=en(()=>_("td",null,"Manual:",-1)),Gve=$(" np\u1D38: "),Hve=["value","min","max","step"],Xve=$(" n\u1D38: "),Yve=["value"],Kve=en(()=>_("div",{style:{clear:"both"}},null,-1)),Zve={key:0,style:{float:"left"}},qve={id:"chartHisto"},Jve=en(()=>_("br",null,null,-1)),Qve={key:0},t0e=$(" Corresponding range for "),e0e=en(()=>_("i",null,"np",-1)),r0e={key:1},n0e=en(()=>_("div",{style:{clear:"both"}},null,-1)),i0e=en(()=>_("p",{class:"fsxs"},[$("MSE: "),_("i",null,"\u03A3 (observed - model)\xB2"),$(", discard nothing \u2190 this is used for fitting")],-1)),o0e={key:0,class:"fsxs"},a0e=$("p-val: "),s0e=en(()=>_("a",{href:"https://en.wikipedia.org/wiki/Binomial_test"},"exact",-1)),l0e=[a0e,s0e],u0e=en(()=>_("p",{class:"fsxs"},[$("\u03C7\xB2: discard bins where model < 3, then "),_("i",null,"\u03A3 (observed - model)\xB2 / model")],-1)),c0e=en(()=>_("p",{class:"fsxs"},[$("p-val: "),_("i",null,"1 - chisquare.cdf(\u03C7\xB2, bins - 1 - dof) \u2190 this depends too much on previous step discards")],-1));function f0e(e,t,r,n,i,o){const a=Gt("v-chart");return I(),O(W,null,[xve,Mve,o.modelB?(I(),O(W,{key:0},[_("p",null,[Ive,Lve,$(" values in "+M(o.formatFixed(this.sweep_lo,2))+"\u2026"+M(o.formatFixed(this.sweep_hi,2))+" range:",1)]),_("div",null,[_("div",Ove,[o.modelBSweep?(I(),O("div",Rve,[ht(a,{option:o.makeChartBSweep},null,8,["option"])])):nt("",!0),_("div",Dve,[_("div",Nve,[_("table",null,[_("tr",null,[Fve,$ve,Bve,zve,nt("",!0),Vve]),o.modelBSweep.result?(I(),O("tr",Uve,[Wve,_("td",null,M(o.formatFixed(o.modelBSweep.result.np,3)),1),_("td",null,M(o.modelBSweep.result.n),1),_("td",null,M(o.formatFixed(o.modelBSweep.result.loss.mse,2)),1),nt("",!0),_("td",null,M(o.formatFixed(o.modelBSweep.result.loss.pval,4)),1)])):nt("",!0),_("tr",null,[jve,_("td",null,M(o.formatFixed(e.selected_np,3)),1),_("td",null,M(e.selected_n),1),_("td",null,M(o.formatFixed(o.modelB.loss.mse,2)),1),nt("",!0),_("td",null,M(o.formatFixed(o.modelB.loss.pval,4)),1)])]),_("p",null,[Gve,_("input",{type:"range",onInput:t[0]||(t[0]=s=>o.applySelectedNp(Number(s.target.value))),value:e.selected_np,min:r.stats.min,max:e.sweep_hi*1.5,step:.01,class:"vmid"},null,40,Hve),Xve,_("input",{type:"range",onInput:t[1]||(t[1]=s=>o.applySelectedN(Number(s.target.value))),value:e.selected_n,min:1,max:200,step:1,class:"vmid"},null,40,Yve)])]),Kve])]),o.modelB.bell?(I(),O("div",Zve,[_("div",qve,[ht(a,{option:o.makeChartBHist},null,8,["option"])]),_("div",null,[$(" Bin 0 has 1-\u03BB \u2248 "+M(o.formatFixed(r.stats.unlucky.len))+" samples removed, "+M(o.formatFixed(o.histogramLuckOnly.arr[0][1]))+" remaining",1),Jve,$(" Depending on actual \u03BB could potentially be "+M(o.formatFixed(o.histogramLuckOnly.err[0][1]))+"\u2026"+M(o.formatFixed(o.histogramLuckOnly.err[0][2]))+" remaining ",1),o.npRangeForBinary?(I(),O("p",Qve,[t0e,e0e,$(": "+M(o.formatFixed(o.npRangeForBinary.min,3))+"\u2026"+M(o.formatFixed(o.npRangeForBinary.max,3)),1)])):nt("",!0)])])):(I(),O("div",r0e," bad parameters ")),n0e]),_("div",null,[i0e,o.npRangeForBinary?(I(),O("p",o0e,l0e)):(I(),O(W,{key:1},[u0e,c0e],64))])],64)):nt("",!0)],64)}const h0e=le(Ave,[["render",f0e],["__scopeId","data-v-7790bb48"]]);Qr([ql,dd,Yc,Kc,Ql,Jl,tu,Zc,vd,gd,pd,qc]);class d0e{constructor(){this.data={},this.xmin=999,this.xmax=-999,this.ymin=999,this.ymax=-999}put(t,r,n){this.data.hasOwnProperty(t)||(this.data[t]={}),this.data[t][r]=n,this.xmin=Math.min(this.xmin,r/1e4),this.xmax=Math.max(this.xmax,r/1e4),this.ymin=Math.min(this.ymin,t/1e4),this.ymax=Math.max(this.ymax,t/1e4)}get(t,r){return!this.data.hasOwnProperty(t)||!this.data[t].hasOwnProperty(r)?null:this.data[t][r]}aslist(){let t=[];for(let[r,n]of Object.entries(this.data).sort((i,o)=>i[0]-o[0]))for(let[i,o]of Object.entries(n).sort((a,s)=>a[0]-s[0]))t.push([r/1e4,i/1e4,o.n,o.loss.mse,o.loss.chisq,o.loss.pval]);return t}}const p0e={data:()=>({selected_npL:1,selected_npU:1,selected_n:10,isGiant_lucky:!1,forceMSE:!1,bestPval:0}),props:{stats:Object,histogram:Object,isGiant:Boolean},components:{VChart:eu},methods:{isGoodVal:Gi,formatFixed:dt,formatKMG:Ab,makeBinomialArray:X2,makeBinomialArraysForGiant:Gge,sumDistributions:VY,loss:Y2,applyGiantBonus:UY,ul2u(e,t,r){return r/(1-t)-t*e/(1-t)},l2u(e,t,r){return r-t*e},findPsStep(e,t,r,n,i){let a={il:0,iu:0,model:i};for(let s=-30;s<=30;s++)for(let l=-30;l<=30;l++){const u=t+l*n,c=r+s*n;if(u<0||c<0)continue;const f=this.isGiant?this.sweepRange.u_hi:this.l2u(c/1e4,this.stats.lucky.shareLo,this.sweepRange.u_hi);if(u/1e4>f)continue;const h=this.l2u(c/1e4,this.stats.lucky.shareHi,this.sweepRange.u_lo);if(u/1e4<h)continue;let d=e.get(u,c);d===null&&(d=this.makemodelC(c/1e4,void 0,u/1e4,void 0),this.bestPval=Math.max(this.bestPval,d.loss.pval),e.put(u,c,d)),d.loss.mse<a.model.loss.mse&&(a={il:s,iu:l,model:d})}return a},findPsRound(e,t,r,n,i,o){for(;t<=150;){let a=this.findPsStep(e,r,n,o,i);if(a.il==0&&a.iu==0)return console.log("no improvement on round",t),{round:t,curU:r,curL:n,model:a.model};if(r+=a.iu*o,n+=a.il*o,n/1e4>this.stats.max)return{round:t,curU:r,curL:n,model:a.model};t++}return{round:t,curU:r,curL:n,model:i}},makemodelC(e,t,r){let n=[t];t===void 0&&(n=[10,20,40,120],n=n.filter(o=>o>=e&&o>=r&&o>=this.stats.max));let i={n:void 0,loss:{mse:void 0,chisq:void 0,pval:void 0}};return this.stats.unlucky.len==0||(n.forEach(o=>{const a={npL:e,n:o,npU:r};if(this.isGiant){const l=this.makeBinomialArraysForGiant(r,this.stats.unlucky.len,e,this.stats.lucky.len,o,this.isGiant_lucky);a.bellU=l.bellU,a.bellL=l.bellL,a.bell=this.sumDistributions(a.bellL,a.bellU)}else a.bellU=this.makeBinomialArray(r,this.stats.unlucky.len,o),a.bellL=this.makeBinomialArray(r+e,this.stats.lucky.len,o),a.bell=this.sumDistributions(a.bellL,a.bellU);a.loss=this.loss(a.bell,this.histogram.map,3),Gi(a.loss.mse)&&(!Gi(i.loss.mse)||a.loss.mse<i.loss.mse)&&(i=a)}),i||console.log("makemodelC failed",e,r,t)),i},applySelectedNpL(e){e<0||(e>this.selected_nL&&(this.selected_nL=Math.ceil(e)),e>this.selected_n&&(this.selected_n=Math.ceil(e)),this.selected_npL=e)},applySelectedNpU(e){e<0||(e>this.selected_n&&(this.selected_n=Math.ceil(e)),this.selected_npU=e)},applySelectedNL(e){e<0||(e<this.selected_npL&&(this.selected_npL=e),this.selected_nL=e)},applySelectedNU(e){e<0||(e<this.selected_npU&&(this.selected_npU=e),this.selected_nU=e)},applySelectedN(e){e<0||(e<this.selected_npL&&(this.selected_npL=e),e<this.selected_npU&&(this.selected_npU=e),this.selected_n=e)},meanOfDistribution(e){let t=0,r=0;for(let[n,i]of e)t+=i,r+=n*i;return r/t}},computed:{modelC(){const e=this.makemodelC(this.selected_npL,this.selected_n,this.selected_npU);return console.log("modelC",e),e},sweepRange(){const e={u_lo:Math.max(0,this.stats.meanLo),u_init:this.stats.mean,u_hi:this.stats.meanHi,l_init:0};if(this.isGiant){const t=this.makeBinomialArray(e.u_init,this.stats.unlucky.len,100,!1),r=this.meanOfDistribution(t),n=this.makeBinomialArray(e.u_init,this.stats.unlucky.len,100,!0),o=this.meanOfDistribution(n)/r;console.log("init giant bonus",o),e.u_lo/=o,e.u_init/=o,e.u_hi/=o}return e},modelCSweep(){if(isNaN(this.stats.mean))return!1;this.bestPval=0;let e=1;const t=this.sweepRange.u_hi-this.sweepRange.u_lo;let r=1e4;t<3&&(r=5e3),t<1.5&&(r=2500),t<.6&&(r=1e3),t<.3&&(r=500),t<.12&&(r=200),t<.06&&(r=100),t<.03&&(r=50);let n=Math.round(this.sweepRange.u_init*1e4/r)*r,i=Math.round(this.sweepRange.l_init*1e4/r)*r;n<0&&(n=0),i<0&&(i=0);let o=this.makemodelC(i/1e4,void 0,n/1e4,void 0);this.stats.psGridPath=[[0,n/1e4,i/1e4,o.loss.chisq]];let a=new d0e;a.put(n,i,o),{round:e,curU:n,curL:i,model:o}=this.findPsRound(a,e,n,i,o,r);const s=a.aslist();return this.selected_npL=o.npL,this.selected_npU=o.npU,this.selected_n=o.n,console.log("modelCSweep",o,this.stats.lucky.mean),{result:o,psGridDotsMap:a,psGridDots:s}},makeChartCHist(){return{legend:{},tooltip:{trigger:"axis",valueFormatter:t=>dt(t,0)},dataset:[{source:this.histogram.arr},{source:this.modelC.bell},{source:this.modelC.bellL},{source:this.modelC.bellU}],xAxis:{min:this.stats.min==0?-1:null,max:this.stats.max<5?this.stats.max+1:null},yAxis:{axisLine:{onZero:!1},axisLabel:{formatter:t=>this.formatKMG(t)}},grid:{left:35,top:30,right:10,bottom:20},series:[{name:"observed",type:"bar",encode:{x:0,y:1},tooltip:{trigger:"axis",valueFormatter:t=>dt(t,0)}},{name:"model \u03A3",type:"line",datasetIndex:1,encode:{x:0,y:1},showSymbol:!1},{name:"model U",type:"line",datasetIndex:3,encode:{x:0,y:1},showSymbol:!1},{name:"model L",type:"line",datasetIndex:2,encode:{x:0,y:1},showSymbol:!1}]}},makeChartCGrid(){const e=2.272727272727273;let{xmin:t,xmax:r,ymin:n,ymax:i}=this.modelCSweep.psGridDotsMap;const o=(t+r)/2,a=(n+i)/2;let s=.2;this.stats.mean<2&&(s=.05);const l=1.2*(this.modelCSweep.psGridDotsMap.xmax-this.modelCSweep.psGridDotsMap.xmin)+s,u=1.2*(this.modelCSweep.psGridDotsMap.ymax-this.modelCSweep.psGridDotsMap.ymin)+s;if(l/u>e){const v=l,y=l/e;t=o-v/2,r=o+v/2,n=a-y/2,i=a+y/2}else{const v=u*e,y=u;t=o-v/2,r=o+v/2,n=a-y/2,i=a+y/2}const f={xmin:t,xmax:r,ymin:n,ymax:i},h=this.forceMSE||isNaN(this.modelCSweep.result.loss.pval);let d=h?["#282","#2c2","#cc2","#ccc"]:["#ccc","#cc2","#2c2","#282"];const p={inRange:{color:d},calculable:!0,precision:h?0:2,controller:{inRange:{color:d}},orient:"vertical",top:"center",right:10,align:"left",padding:0};let g=h?{min:this.modelCSweep.result.loss.mse,max:this.modelCSweep.result.loss.mse*2,dimension:3,text:["MSE",""]}:{min:0,max:this.bestPval,dimension:5,text:["p-val",""]};return{legend:{},tooltip:{trigger:"item",axisPointer:{type:"cross"},formatter:function(v){const y=v.data;return`np\u1D41=${dt(y[0],2)}<br/>np\u1D38=${dt(y[1],2)}<br/>n=${dt(y[2],2)}<br/>MSE=${y[3].toLocaleString(void 0,{notation:"compact"})}<br/>p-val=${dt(y[5],2)}<br/>`}},title:{},dataset:[{source:this.modelCSweep.psGridDots}],xAxis:{name:"np\u1D38",nameGap:5,min:f.xmin,max:f.xmax,axisLabel:{showMinLabel:!1,showMaxLabel:!1},axisLine:{onZero:!1}},yAxis:{name:"np\u1D41",nameGap:5,min:f.ymin,max:f.ymax,axisLabel:{showMinLabel:!1,showMaxLabel:!1},axisLine:{onZero:!1}},grid:{left:35,top:30,right:40,bottom:20},series:[{type:"scatter",encode:{x:1,y:0,tooltip:[1,0,3]},tooltip:{valueFormatter:v=>`${v[1]} \u2192 ${dt(v[2],4)}`},symbolSize:6,markArea:{silent:!0,data:[[{name:`M\xB1${this.stats.generalSigmas}\u03C3`,coord:[this.sweepRange.u_lo-this.sweepRange.u_init,this.sweepRange.u_lo]},{coord:[this.sweepRange.u_hi-this.sweepRange.u_init,this.sweepRange.u_hi]}]],label:{show:!0,position:"left"},itemStyle:{color:"rgba(0, 0, 200, 0)",borderWidth:1,borderType:"dashed"}},markLine:{silent:!0,symbol:"none",data:[this.isGiant?[{name:"low \u03BB, high M",label:{position:"insideMiddleTop"},coord:[this.sweepRange.u_hi-this.sweepRange.u_init,this.l2u(this.sweepRange.u_hi-this.sweepRange.u_init,this.stats.lucky.shareLo,this.sweepRange.u_hi)]},{coord:[this.modelCSweep.psGridDotsMap.xmax,this.l2u(this.sweepRange.u_hi-this.sweepRange.u_init,this.stats.lucky.shareLo,this.sweepRange.u_hi)]}]:[{name:"low \u03BB, high M",label:{position:"insideMiddleTop"},coord:[this.sweepRange.u_hi-this.sweepRange.u_init,this.l2u(this.sweepRange.u_hi-this.sweepRange.u_init,this.stats.lucky.shareLo,this.sweepRange.u_hi)]},{coord:[this.modelCSweep.psGridDotsMap.xmax,this.l2u(this.modelCSweep.psGridDotsMap.xmax,this.stats.lucky.shareLo,this.sweepRange.u_hi)]}],[{name:"high \u03BB, low M",label:{position:"insideMiddleBottom"},coord:[this.sweepRange.u_lo-this.sweepRange.u_init,this.l2u(this.sweepRange.u_lo-this.sweepRange.u_init,this.stats.lucky.shareHi,this.sweepRange.u_lo)]},{coord:[this.modelCSweep.psGridDotsMap.xmax,this.l2u(this.modelCSweep.psGridDotsMap.xmax,this.stats.lucky.shareHi,this.sweepRange.u_lo)]}]]}}],visualMap:{...p,...g}}}}},si=e=>(er("data-v-ada12390"),e=e(),rr(),e),g0e=si(()=>_("span",{class:"title"},"Model C",-1)),v0e=$(": some points were taken from a distribution L, and the rest from distribution U,"),m0e=si(()=>_("br",null,null,-1)),y0e=si(()=>_("br",null,null,-1)),_0e=$(" with giant bonus on Unlucky"),b0e=$(" with giant bonus on Lucky"),w0e={style:{float:"left"}},S0e={style:{width:"570px",height:"270px"}},T0e={key:1,class:"inner"},k0e={style:{padding:"1em"}},P0e={style:{float:"left"}},E0e=si(()=>_("tr",null,[_("th"),_("th",null,"np\u1D41"),_("th",null,"np\u1D38"),_("th",null,"n"),_("th",null,"MSE"),_("th",null,"p-val")],-1)),C0e=si(()=>_("td",null,"Best fit:",-1)),A0e=si(()=>_("td",null,"Manual:",-1)),x0e=["value","min","max","step"],M0e=$(" np\u1D41 "),I0e=si(()=>_("br",null,null,-1)),L0e=["value","max","step"],O0e=$(" np\u1D38 "),R0e=si(()=>_("br",null,null,-1)),D0e=["value"],N0e=$(" n "),F0e=si(()=>_("div",{style:{clear:"both"}},null,-1)),$0e={key:0,id:"chartHisto",style:{float:"left"}},B0e=si(()=>_("div",{style:{clear:"both"}},null,-1)),z0e=si(()=>_("br",null,null,-1)),V0e=si(()=>_("p",{class:"fsxs"},[$("MSE: "),_("i",null,"\u03A3 (observed - model)\xB2"),$(", discard nothing \u2190 this is used for fitting")],-1)),U0e=si(()=>_("p",{class:"fsxs"},[$("\u03C7\xB2: discard bins where model < 3, then "),_("i",null,"\u03A3 (observed - model)\xB2 / model")],-1)),W0e=si(()=>_("p",{class:"fsxs"},[$("p-val: "),_("i",null,"1 - chisquare.cdf(\u03C7\xB2, bins - 1 - dof) \u2190 this depends too much on previous step discards")],-1));function j0e(e,t,r,n,i,o){var s,l;const a=Gt("v-chart");return I(),O(W,null,[g0e,_("span",null,[v0e,m0e,$(" so (1 - \u03BB) np\u1D41 + \u03BB (np\u1D41 + np\u1D38) = M, where \u03BB \u2208 "+M(o.formatFixed(r.stats.lucky.shareLo*100,2))+"\u2026"+M(o.formatFixed(r.stats.lucky.shareHi*100,2))+"% and M \u2208 "+M(o.formatFixed(r.stats.mean-1.96*r.stats.meanErr,2))+"\u2026"+M(o.formatFixed(r.stats.mean+1.96*r.stats.meanErr,2)),1)]),y0e,_("p",null,[at(_("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=u=>r.isGiant=u)},null,512),[[Ge,r.isGiant]]),_0e]),_("p",null,[at(_("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=u=>e.isGiant_lucky=u)},null,512),[[Ge,e.isGiant_lucky]]),b0e]),_("div",w0e,[_("div",S0e,[((l=(s=o.modelCSweep)==null?void 0:s.result)==null?void 0:l.npU)&&e.bestPval?(I(),qr(a,{key:0,option:o.makeChartCGrid},null,8,["option"])):(I(),O("div",T0e," np\u1D41=0 or no bestPval "))]),_("div",k0e,[_("div",P0e,[_("table",null,[E0e,o.modelCSweep.result?(I(),O("tr",{key:0,class:Ur({strike:r.stats.dBad})},[C0e,_("td",null,M(o.formatFixed(o.modelCSweep.result.npU,2)),1),_("td",null,M(o.formatFixed(o.modelCSweep.result.npL,2)),1),_("td",null,M(o.modelCSweep.result.n),1),_("td",null,M(o.formatFixed(o.modelCSweep.result.loss.mse,2)),1),_("td",null,M(o.formatFixed(o.modelCSweep.result.loss.pval,4)),1)],2)):nt("",!0),_("tr",null,[A0e,_("td",null,M(o.formatFixed(e.selected_npU,2)),1),_("td",null,M(o.formatFixed(e.selected_npL,2)),1),_("td",null,M(e.selected_n),1),_("td",null,M(o.formatFixed(o.modelC.loss.mse,2)),1),_("td",null,M(o.formatFixed(o.modelC.loss.pval,4)),1)])]),_("p",null,[_("input",{type:"range",onInput:t[2]||(t[2]=u=>o.applySelectedNpU(Number(u.target.value))),value:e.selected_npU,min:r.stats.min,max:r.stats.max,step:.01,class:"vmid"},null,40,x0e),M0e,I0e,_("input",{type:"range",onInput:t[3]||(t[3]=u=>o.applySelectedNpL(Number(u.target.value))),value:e.selected_npL,min:0,max:r.stats.max,step:.01,class:"vmid"},null,40,L0e),O0e,R0e,_("input",{type:"range",onInput:t[4]||(t[4]=u=>o.applySelectedN(Number(u.target.value))),value:e.selected_n,min:1,max:200,step:1,class:"vmid"},null,40,D0e),N0e])]),F0e])]),o.modelC.bell?(I(),O("div",$0e,[ht(a,{option:o.makeChartCHist},null,8,["option"])])):nt("",!0),B0e,z0e,V0e,U0e,W0e],64)}const G0e=le(p0e,[["render",j0e],["__scopeId","data-v-ada12390"]]);Qr([ql,dd,Yc,Kc,Ql,Jl,tu,Zc,vd,gd,pd,qc]);const H0e={setup(){const e=At(),t=mfe(),r=localStorage.getItem("droprates");return t.$patch(JSON.parse(r)),t.$subscribe((n,i)=>{localStorage.setItem("droprates",JSON.stringify(i))}),{gameStore:e,dropratesStore:t}},components:{ItemIcon:no,VChart:eu,DRMA:Cve,DRMB:h0e,DRMC:G0e},provide(){return{[oj]:yr(()=>this.darkMode?"dark":"default")}},data(){const e=matchMedia("(prefers-color-scheme: dark)");return{alldata:{},generalSigmas:2,hide_buckets:{},darkModeQuery:e,darkMode:e.matches}},created(){this.fetchObservations()},mounted(){this.darkModeQuery.addEventListener("change",()=>{this.darkMode=this.darkModeQuery.matches})},watch:{},computed:{currentDataset(){const e={};if(this.dropratesStore.selected_pzk in this.alldata){const t=this.alldata[this.dropratesStore.selected_pzk];if(this.dropratesStore.selected_ik in t){const r=t[this.dropratesStore.selected_ik];if(this.dropratesStore.selected_specie in r){const n=r[this.dropratesStore.selected_specie];for(let[i,o]of Object.entries(n).sort((a,s)=>a[0]-s[0]))e[i]=o}}}return e},weightedDataset(){let e={};for(let[t,r]of Object.entries(this.currentDataset)){if(this.hide_buckets[t])continue;const n=r.length;let i=[];for(let o=0;o<n;o++){const a=gt.binomial.cdf(o,n,1-t/100);i.push(a)}e[t]={len:n,luckyLen:n*t/100,sorted:[...r].sort((o,a)=>o-a),weights:i}}return e},stats(){const e=this.currentDataset;let t=0,r=0;for(const[g,m]of Object.entries(e))t+=e[g].length,r+=e[g].length;const n=this.weightedDataset;for(let[g,m]of Object.entries(n))for(let v of m.weights)v>this.stats.generalConfidence/100,v>1-this.stats.generalConfidence/100;let i=[],o=[],a=0,s=100,l=0;for(const[g,m]of Object.entries(n)){s=Math.min(s,g),l=Math.max(l,g);let{len:v,luckyLen:y,sorted:b,weights:w}=m;a+=y,i.push(...b),o.push(...w)}const u={1.5:86.6385597,2:95.4499736,2.5:98.7580669,3:99.7300203,3.5:99.9534741841929,4:99.9936657516334},c={generalSigmas:this.generalSigmas,generalConfidence:u[this.generalSigmas],lenRaw:t,dataRaw:e,dataByLuck:n,minLuck:s,maxLuck:l,dataFlatSorted:i,weightsFlat:o,len:i.length,min:gt.min(i),max:gt.max(i),range:gt.range(i),sum:gt.sum(i),mean:gt.mean(i),meanErr:0,meanLo:0,meanHi:0,std:gt.stdev(i,!0),bell:[],histo:[]};if(c.meanErr=Math.sqrt(c.mean/c.max*(1-c.mean/c.max)*c.max/c.len),c.meanLo=c.mean-this.generalSigmas*c.meanErr,c.meanHi=c.mean+this.generalSigmas*c.meanErr,c.lucky={len:a,share:a/c.len,mean:0,std:0,lenHi:0,lenLo:0,shareHi:0,shareLo:0},isNaN(c.lucky.share))c.lucky.shareLo=NaN,c.lucky.shareHi=NaN,c.lucky.lenLo=NaN,c.lucky.lenHi=NaN;else{console.log("binomTest of lucky share%=",c.lucky.share,"with significance=",1-c.generalConfidence/100);const g=this.binomialTest(Math.round(c.lucky.len),c.len,{p:c.lucky.share,alpha:1-c.generalConfidence/100});c.lucky.shareLo=g.ci[0],c.lucky.shareHi=g.ci[1],c.lucky.lenLo=g.ci[0]*c.len,c.lucky.lenHi=g.ci[1]*c.len}c.unlucky={len:c.len-a,share:1-c.lucky.share,mean:0,std:0};let f=0,h=0;for(const[g,m]of Object.entries(n)){let{len:v,luckyLen:y,luckeyLen95:b,sorted:w,weights:T}=m;for(let S=0;S<v;S++){const k=w[S],E=T[S];f+=k*(1-E),h+=k*E}}c.unlucky.mean=f/c.unlucky.len,c.lucky.mean=h/c.lucky.len;let d=0,p=0;for(const[g,m]of Object.entries(n)){let{len:v,sorted:y,weights:b}=m;for(let w=0;w<v;w++){const T=b[w],S=y[w]-c.unlucky.mean;d+=S*S*(1-T);const k=y[w]-c.lucky.mean;p+=k*k*T}}return c.unlucky.std=Math.sqrt(d/c.unlucky.len),c.lucky.std=Math.sqrt(p/c.lucky.len),console.log("stats",c),c},histogram(){const e={arr:[],map:{}};if(this.stats.range>0){let t=[1];t=gt.histogram(this.stats.dataFlatSorted,this.stats.range+1);const n=Array.from(Array(this.stats.range+1).keys()).map(i=>[this.stats.min+i,t[i]]);e.arr=n;for(let i=0;i<t.length;i++)e.map[this.stats.min+i]=t[i]}else e.arr=[[this.stats.min,this.stats.len]],e.map[this.stats.min]=this.stats.len;return console.log("histogram",e),e}},methods:{formatFixed:dt,binomialTest:N4,async fetchObservations(){const e=Date.now();this.alldata=await(await fetch("data/manual/yields_observed_202505_202509.json")).json();const t=this.dropratesStore.selected_pzk;this.dropratesStore.selected_pzk=t&&this.alldata[t]?t:Object.keys(this.alldata)[0];const r=this.dropratesStore.selected_ik;this.dropratesStore.selected_ik=r&&this.alldata[t][r]?r:Object.keys(this.alldata[t])[0];const n=this.dropratesStore.selected_specie;this.dropratesStore.selected_specie=n&&this.alldata[t][r][n]?n:Object.keys(this.alldata[t][r])[0],console.log("fetchObservations took",Date.now()-e,"ms",this.dropratesStore.selected_pzk,this.dropratesStore.selected_ik,this.dropratesStore.selected_specie)},activate(e,t,r){this.dropratesStore.selected_pzk=e,this.dropratesStore.selected_ik=t,this.dropratesStore.selected_specie=r}}},Ho=e=>(er("data-v-cad86964"),e=e(),rr(),e),X0e={id:"menu"},Y0e={style:{display:"none"}},K0e=Ho(()=>_("p",{class:"fsxs"},"Left: droprate parameters currently used in workerman",-1)),Z0e=Ho(()=>_("p",{class:"fsxs"},"Right: observations used to find out current serverside parameters",-1)),q0e={key:1},J0e=Ho(()=>_("tr",null,[_("th",{class:"fsxs"},"n"),_("th",{class:"fsxs"},"np\u1D41"),_("th",{class:"fsxs"},"np\u1D38"),_("th",{class:"fsxs"},"item"),_("th",{class:"fsxs"},"normal"),_("th",{class:"fsxs"},"giant")],-1)),Q0e={class:"fsxs"},tme={class:"fsxs"},eme={class:"fsxs"},rme={class:"center"},nme=["title","onClick"],ime=["title"],ome={id:"content"},ame=Ho(()=>_("tr",null,[_("td",null,"mute"),_("td",null,"luck")],-1)),sme={class:"center"},lme=["onUpdate:modelValue"],ume=$(" Possible luck procs observed with "),cme=Xv('<option value="1.5" data-v-cad86964>\xB11.5\u03C3</option><option value="2" data-v-cad86964>\xB12\u03C3</option><option value="2.5" data-v-cad86964>\xB12.5\u03C3</option><option value="3" data-v-cad86964>\xB13\u03C3</option><option value="3.5" data-v-cad86964>\xB13.5\u03C3</option><option value="4" data-v-cad86964>\xB14\u03C3</option>',6),fme=[cme],hme=Ho(()=>_("tr",null,[_("th"),_("th",null,"min"),_("th",null,"max")],-1)),dme=Ho(()=>_("td",null,"count",-1)),pme=Ho(()=>_("td",null,"% of total",-1)),gme={id:"settings"},vme=$(" Use model:"),mme=Ho(()=>_("br",null,null,-1)),yme=Ho(()=>_("label",{for:"option1"},[$("A. Same item drop regardless of luck (plants, lumber, ores)"),_("br")],-1)),_me=Ho(()=>_("label",{for:"option2"},[$("B. Item only drops when luck procs (sacks, lumbering rares)"),_("br")],-1)),bme=Ho(()=>_("label",{for:"option3"},[$("C. Different drops when luck procs and when not (eggs, honey)"),_("br")],-1)),wme={key:0,id:"modelA",style:{float:"left"}},Sme={key:1},Tme={key:2};function kme(e,t,r,n,i,o){const a=Gt("RouterLink"),s=Gt("ItemIcon"),l=Gt("DRMA"),u=Gt("DRMB"),c=Gt("DRMC");return I(),O("main",null,[_("div",X0e,[_("div",Y0e,M(n.dropratesStore.selected_pzk)+" "+M(n.dropratesStore.selected_ik)+" "+M(n.dropratesStore.selected_specie),1),K0e,Z0e,(I(!0),O(W,null,Pt(i.alldata,(f,h)=>(I(),O(W,null,[h in n.gameStore.plantzoneStatic?(I(),qr(a,{key:0,tag:"a",to:{path:"./",hash:"#node"+h}},{default:Fe(()=>[$(M(h)+" "+M(n.gameStore.plantzoneName(h)),1)]),_:2},1032,["to"])):(I(),O("span",q0e,M(h),1)),_("table",null,[J0e,(I(!0),O(W,null,Pt(f,(d,p)=>(I(),O("tr",null,[_("td",Q0e,[n.gameStore.ready&&Number(h)in n.gameStore.plantzones?(I(),O(W,{key:0},[$(M(n.gameStore.plantzones[Number(h)].rolls),1)],64)):nt("",!0)]),_("td",tme,[n.gameStore.ready&&Number(h)in n.gameStore.plantzones&&p in n.gameStore.plantzones[Number(h)].unlucky?(I(),O(W,{key:0},[$(M(n.gameStore.plantzones[Number(h)].unlucky[p]),1)],64)):nt("",!0)]),_("td",eme,[n.gameStore.ready&&Number(h)in n.gameStore.plantzones&&p in n.gameStore.plantzones[Number(h)].lucky?(I(),O(W,{key:0},[$(M(n.gameStore.plantzones[Number(h)].lucky[p]),1)],64)):nt("",!0)]),_("td",null,[ht(a,{tag:"a",to:{path:"./settings",hash:"#item"+p}},{default:Fe(()=>[_("span",null,[ht(s,{ik:Number(p)},null,8,["ik"])])]),_:2},1032,["to"]),$(" "+M(n.gameStore.itemName(p)),1)]),(I(),O(W,null,Pt(["normal","giant"],g=>_("td",rme,[g in d?(I(),O(W,{key:0},[h!=n.dropratesStore.selected_pzk||p!=n.dropratesStore.selected_ik||g!=n.dropratesStore.selected_specie?(I(),O("button",{key:0,title:`item ${p} ${g}`,onClick:m=>o.activate(h,p,g)},M(Object.values(d[g]).flat().length),9,nme)):(I(),O("button",{key:1,title:`item ${p} ${g}`,class:"pressed"},M(Object.values(d[g]).flat().length),9,ime))],64)):nt("",!0)])),64))]))),256))])],64))),256))]),_("div",ome,[_("details",null,[_("summary",null,[$("Dataset: size N = "+M(o.stats.len)+", sum "+M(o.stats.sum)+", mean M = "+M(o.formatFixed(o.stats.mean,3))+"\xB1"+M(o.formatFixed(1.96*o.stats.meanErr,3))+", ",1),this.stats.minLuck==this.stats.maxLuck?(I(),O(W,{key:0},[$(M(this.stats.maxLuck),1)],64)):(I(),O(W,{key:1},[$(M(o.formatFixed(this.stats.minLuck,2))+"\u2026"+M(o.formatFixed(this.stats.maxLuck,2)),1)],64)),$("\u{1F340} \u2192 \u03BB \u2208 "+M(o.formatFixed(o.stats.lucky.shareLo*100,2))+"\u2026"+M(o.formatFixed(o.stats.lucky.shareHi*100,2))+"% cycles were lucky ",1)]),_("div",null,[_("table",null,[ame,(I(!0),O(W,null,Pt(o.stats.dataRaw,(f,h)=>(I(),O("tr",{class:Ur({strike:i.hide_buckets[h]})},[_("td",sme,[at(_("input",{"onUpdate:modelValue":d=>i.hide_buckets[h]=d,type:"checkbox"},null,8,lme),[[Ge,i.hide_buckets[h]]])]),_("td",null,M(h),1),(I(!0),O(W,null,Pt(f,d=>(I(),O("td",null,M(d),1))),256))],2))),256))])]),_("p",null,[ume,at(_("select",{"onUpdate:modelValue":t[0]||(t[0]=f=>i.generalSigmas=f)},fme,512),[[cr,i.generalSigmas]]),$(" ("+M(o.formatFixed(o.stats.generalConfidence,2))+"%) confidence: ",1),_("table",null,[hme,_("tr",null,[dme,_("td",null,M(o.formatFixed(o.stats.lucky.lenLo,2)),1),_("td",null,M(o.formatFixed(o.stats.lucky.lenHi,2)),1)]),_("tr",null,[pme,_("td",null,M(o.formatFixed(o.stats.lucky.shareLo*100,2)),1),_("td",null,M(o.formatFixed(o.stats.lucky.shareHi*100,2)),1)])])])]),_("div",gme,[vme,mme,at(_("input",{type:"radio",id:"option1",value:"a","onUpdate:modelValue":t[1]||(t[1]=f=>n.dropratesStore.selected_model=f)},null,512),[[Ml,n.dropratesStore.selected_model]]),yme,at(_("input",{type:"radio",id:"option2",value:"b","onUpdate:modelValue":t[2]||(t[2]=f=>n.dropratesStore.selected_model=f)},null,512),[[Ml,n.dropratesStore.selected_model]]),_me,at(_("input",{type:"radio",id:"option3",value:"c","onUpdate:modelValue":t[3]||(t[3]=f=>n.dropratesStore.selected_model=f)},null,512),[[Ml,n.dropratesStore.selected_model]]),bme]),n.dropratesStore.selected_model=="a"?(I(),O("div",wme,[ht(l,{stats:o.stats,histogram:o.histogram,isGiant:n.dropratesStore.selected_specie=="giant"},null,8,["stats","histogram","isGiant"])])):nt("",!0),n.dropratesStore.selected_model=="b"?(I(),O("div",Sme,[ht(u,{stats:o.stats,histogram:o.histogram},null,8,["stats","histogram"])])):nt("",!0),n.dropratesStore.selected_model=="c"?(I(),O("div",Tme,[ht(c,{stats:o.stats,histogram:o.histogram,isGiant:n.dropratesStore.selected_specie=="giant"},null,8,["stats","histogram","isGiant"])])):nt("",!0)])])}const Pme=le(H0e,[["render",kme],["__scopeId","data-v-cad86964"]]),Eme={data:()=>({}),props:{me:Object},components:{},methods:{},computed:{}},Cme=["step"],Ame=["max","step"];function xme(e,t,r,n,i,o){return I(),O(W,null,[_("td",null,[at(_("input",{type:"range","onUpdate:modelValue":t[0]||(t[0]=a=>r.me.mean=a),class:"vmid",min:0,max:2,step:.01},null,8,Cme),[[zt,r.me.mean]]),$(" \u03BC="+M(r.me.mean),1)]),_("td",null,[at(_("input",{type:"range","onUpdate:modelValue":t[1]||(t[1]=a=>r.me.sigma=a),class:"vmid",min:0,max:.7,step:.01},null,8,Ame),[[zt,r.me.sigma]]),$(" \u03C3="+M(r.me.sigma),1)])],64)}const Mme=le(Eme,[["render",xme]]),Ime={data:()=>({}),props:{me:Object},components:{},methods:{},computed:{}},Lme=["step"],Ome=["step"];function Rme(e,t,r,n,i,o){return I(),O(W,null,[_("td",null,[at(_("input",{type:"range","onUpdate:modelValue":t[0]||(t[0]=a=>r.me.center=a),class:"vmid",min:0,max:2,step:.01},null,8,Lme),[[zt,r.me.center]]),$(" c="+M(r.me.center),1)]),_("td",null,[at(_("input",{type:"range","onUpdate:modelValue":t[1]||(t[1]=a=>r.me.width=a),class:"vmid",min:0,max:2,step:.01},null,8,Ome),[[zt,r.me.width]]),$(" w="+M(r.me.width),1)])],64)}const Dme=le(Ime,[["render",Rme]]),Nme={data:()=>({}),props:{me:Object},components:{},methods:{},computed:{}},Fme=["step"],$me=["step"];function Bme(e,t,r,n,i,o){return I(),O(W,null,[_("td",null,[at(_("input",{type:"range","onUpdate:modelValue":t[0]||(t[0]=a=>r.me.center=a),class:"vmid",min:0,max:2,step:.01},null,8,Fme),[[zt,r.me.center]]),$(" c="+M(r.me.center),1)]),_("td",null,[at(_("input",{type:"range","onUpdate:modelValue":t[1]||(t[1]=a=>r.me.width=a),class:"vmid",min:0,max:2,step:.01},null,8,$me),[[zt,r.me.width]]),$(" w="+M(r.me.width),1)])],64)}const zme=le(Nme,[["render",Bme]]),Vme={data:()=>({}),props:{me:Object},components:{},methods:{},computed:{}},Ume=["min","step"],Wme=["min","max","step"];function jme(e,t,r,n,i,o){return I(),O(W,null,[_("td",null,[at(_("input",{type:"range","onUpdate:modelValue":t[0]||(t[0]=a=>r.me.at=a),class:"vmid",min:.1,max:2,step:.01},null,8,Ume),[[zt,r.me.at]]),$(" \u03B1\u03B8="+M(r.me.at),1)]),_("td",null,[at(_("input",{type:"range","onUpdate:modelValue":t[1]||(t[1]=a=>r.me.theta=a),class:"vmid",min:.01,max:.3,step:.001},null,8,Wme),[[zt,r.me.theta]]),$(" \u03B8="+M(r.me.theta),1)])],64)}const Gme=le(Vme,[["render",jme]]),Hme={data:()=>({}),props:{me:Object},components:{},methods:{},computed:{}},Xme=["min","step"],Yme=$(" e"),Kme=_("sup",null,"\u03BC",-1),Zme=["min","max","step"];function qme(e,t,r,n,i,o){return I(),O(W,null,[_("td",null,[at(_("input",{type:"range","onUpdate:modelValue":t[0]||(t[0]=a=>r.me.emu=a),class:"vmid",min:.1,max:2,step:.01},null,8,Xme),[[zt,r.me.emu]]),Yme,Kme,$("="+M(r.me.emu),1)]),_("td",null,[at(_("input",{type:"range","onUpdate:modelValue":t[1]||(t[1]=a=>r.me.sigma=a),class:"vmid",min:.1,max:.7,step:.01},null,8,Zme),[[zt,r.me.sigma]]),$(" \u03C3="+M(r.me.sigma),1)])],64)}const Jme=le(Hme,[["render",qme]]),Qme={data:()=>({}),props:{me:Object,isLast:Boolean},emits:["delete"],components:{FishCurveNormal:Mme,FishCurveLognormal:Jme,FishCurveUniform:Dme,FishCurveTriangular:zme,FishCurveGamma:Gme},methods:{formatFixed:dt,morph(e){const t=this.me.kind,r=e.target.value;let n=0,i=0;switch(t){case"Normal":n=this.me.mean,i=this.me.sigma;break;case"Triangular":n=this.me.center,i=this.me.width/2;break;case"Uniform":n=this.me.center,i=this.me.width/2;break;case"Gamma":n=this.me.at,i=Math.sqrt(this.me.at*this.me.theta);break;case"Lognormal":n=this.me.emu;const o=this.me.sigma*this.me.sigma;i=Math.sqrt((Math.exp(o)-1)*Math.exp(2*Math.log(this.me.emu)+o));break;default:throw Error(`unknown curve kind ${t}`)}switch(console.log(`${t} -> ${r} (${n}, ${i})`),r){case"Normal":this.me.mean=n,this.me.sigma=i,this.me.mean=Math.round(this.me.mean*100)/100,this.me.sigma=Math.round(this.me.sigma*100)/100;break;case"Triangular":this.me.center=n,this.me.width=i*2,this.me.center=Math.round(this.me.center*100)/100,this.me.width=Math.round(this.me.width*100)/100;break;case"Uniform":this.me.center=n,this.me.width=i*2,this.me.center=Math.round(this.me.center*100)/100,this.me.width=Math.round(this.me.width*100)/100;break;case"Gamma":this.me.at=n,this.me.theta=i*i/n,this.me.alpha=Math.round(this.me.alpha*100)/100,this.me.theta=Math.round(this.me.theta*1e3)/1e3;break;case"Lognormal":this.me.emu=n,this.me.sigma=Math.sqrt(Math.log(1+i*i/n/n)),this.me.mean=Math.round(this.me.mean*100)/100,this.me.sigma=Math.round(this.me.sigma*100)/100;break;default:throw Error(`unknown curve kind ${r}`)}this.me.kind=r}},computed:{componentName(){return"FishCurve"+this.me.kind}}},t1e=["disabled","step"],e1e=["value"],r1e=_("option",null,"Normal",-1),n1e=_("option",null,"Triangular",-1),i1e=_("option",null,"Uniform",-1),o1e=_("option",null,"Gamma",-1),a1e=_("option",null,"Lognormal",-1),s1e=[r1e,n1e,i1e,o1e,a1e];function l1e(e,t,r,n,i,o){return I(),O(W,null,[_("td",null,[at(_("input",{type:"range","onUpdate:modelValue":t[0]||(t[0]=a=>r.me.amount=a),disabled:r.isLast,class:"vmid",min:0,max:1,step:.01},null,8,t1e),[[zt,r.me.amount]]),$(" "+M(o.formatFixed(r.me.amount*100,1))+"% ",1)]),_("td",null,[_("select",{value:r.me.kind,onChange:t[1]||(t[1]=a=>o.morph(a))},s1e,40,e1e)]),(I(),qr(UF(o.componentName),{me:r.me,"onUpdate:me":t[2]||(t[2]=a=>r.me=a)},null,40,["me"])),_("td",null,[_("button",{onClick:t[3]||(t[3]=a=>e.$emit("delete"))},"delete")])],64)}const u1e=le(Qme,[["render",l1e]]);Qr([ql,dd,Yc,Kc,Ql,Jl,tu,Zc,vd,gd,pd,qc]);const c1e={data:()=>({curves:[],presets:[[{amount:1,kind:"Lognormal",emu:1.01,sigma:.41}],[{amount:1,kind:"Gamma",at:1.05,theta:.163}],[{amount:.81,kind:"Normal",mean:1.09,sigma:.38},{amount:1,kind:"Normal",mean:.7,sigma:.17}],[{amount:.49,kind:"Normal",mean:.74,sigma:.21},{amount:.75,kind:"Normal",mean:1.19,sigma:.21},{amount:1,kind:"Normal",mean:1.62,sigma:.21}],[{amount:.5,kind:"Triangular",center:1,width:.76},{amount:.32,kind:"Triangular",center:.69,width:.34},{amount:1,kind:"Normal",mean:1.25,sigma:.42}],[{amount:.24,kind:"Normal",mean:.62,sigma:.16},{amount:.36,kind:"Normal",mean:.87,sigma:.16},{amount:.49,kind:"Normal",mean:1.18,sigma:.18},{amount:1,kind:"Normal",mean:1.47,sigma:.28}]],forceMSE:!1,bestPval:0}),mounted(){this.loadPreset(0)},props:{stats:Object,histogram:Object,avg_size:Number,mode_relative:Boolean},components:{VChart:eu,FishCurve:u1e},methods:{isGoodVal:Gi,formatFixed:dt,formatKMG:Ab,makeBinomialArray:X2,makeNormalArray:Wge,makeLognormalArray:Bge,makeUniformArray:Vge,makeGammaArray:zge,makeTriangularArray:Uge,sumDistributions:VY,loss:Y2,removeCurve(e){this.curves.splice(e,1),this.curves[this.curves.length-1].amount=1},addCurve(){this.curves[this.curves.length-1].amount/=2,this.curves.push({amount:1,kind:"Normal",mean:1,sigma:.1})},loadPreset(e){const t=this.presets[e];this.curves=[];for(const r of t)this.curves.push({...r})},makeModel(){const e={bells:[],bell:[]};let t=-1,r=this.stats.len;for(const n of this.curves){let i=null;switch(t+=3,n.kind){case"Normal":n.amount=="rest"&&(n.amount=r),i=this.makeNormalArray(n.mean*this.avg_size,n.amount*r,this.stats.max,n.sigma*this.avg_size),r-=n.amount*r;break;case"Triangular":i=this.makeTriangularArray(n.center*this.avg_size,n.amount*r,this.stats.max,n.width*this.avg_size),r-=n.amount*r;break;case"Uniform":i=this.makeUniformArray(n.center*this.avg_size,n.amount*r,this.stats.max,n.width*this.avg_size),r-=n.amount*r;break;case"Gamma":i=this.makeGammaArray(n.at/n.theta,n.amount*r,this.stats.max,n.theta*this.avg_size),r-=n.amount*r;break;case"Lognormal":i=this.makeLognormalArray(Math.log(n.emu*this.avg_size),n.amount*r,this.stats.max,n.sigma),r-=n.amount*r;break;default:throw Error(`unknown curve kind ${n.kind}`)}e.bells.push(i),e.bell=this.sumDistributions(e.bell,i)}return e.loss=this.loss(e.bell,this.histogram.map,t),e||console.log("makeModel failed",npU,npL,stdDev),e}},computed:{modelC(){const e=this.makeModel();return console.log("model",e),e},makeHistogramOption(){const e={legend:{},title:{text:`MSE=${dt(this.modelC.loss.mse,2)}
p-val=${dt(this.modelC.loss.pval,4)}`,textStyle:{fontWeight:"normal",fontSize:11},right:"3%",top:"10%"},tooltip:{trigger:"axis",extraCssText:"background: var(--color-background);border-color: gray;color: var(--color-text);",valueFormatter:t=>dt(t,1),formatter:function(t){const r=t[0].axisValue;let n=`<div style="text-align:center;">[ ${r}...${r+1} )</div>`;return t.forEach(i=>{const o=i.seriesName=="observed"?i.data[1]:dt(i.data[1],1);n+=`<div>
                <div style="display:inline-block;">${i.marker} ${i.seriesName}</div>
                <div style="float:right;margin-left:10px;font-weight:600">${o}</div>
              </div>`}),n}},dataset:[{source:this.histogram.arr},{source:this.modelC.bell}],xAxis:{min:this.stats.min==0?-1:null,max:this.mode_relative?this.stats.max<5?this.stats.max+1:null:this.avg_size*3},yAxis:{axisLine:{onZero:!1},axisLabel:{formatter:t=>this.formatKMG(t)}},grid:{left:35,top:30,right:10,bottom:20},series:[{name:"observed",type:"bar",encode:{x:0,y:1},tooltip:{trigger:"axis",valueFormatter:t=>dt(t,0)}},{name:"curve \u03A3",type:"line",datasetIndex:1,encode:{x:0,y:1},showSymbol:!1,lineStyle:{opacity:1}}]};for(const[t,r]of this.modelC.bells.entries())e.dataset.push({source:r}),e.series.push({name:`curve ${t}`,type:"line",datasetIndex:2+t,encode:{x:0,y:1},showSymbol:!1,lineStyle:{opacity:1}});return e}}},f1e=e=>(er("data-v-95ac9cb8"),e=e(),rr(),e),h1e=["onClick"],d1e={key:0,id:"chartHisto",style:{float:"left"}},p1e=f1e(()=>_("div",{style:{clear:"both"}},null,-1));function g1e(e,t,r,n,i,o){const a=Gt("FishCurve"),s=Gt("v-chart");return I(),O(W,null,[_("div",null,[(I(!0),O(W,null,Pt(e.presets,(l,u)=>(I(),O("button",{onClick:c=>o.loadPreset(u)},"preset"+M(u),9,h1e))),256)),_("table",null,[(I(!0),O(W,null,Pt(e.curves,(l,u)=>(I(),O("tr",null,[_("td",null,M(u),1),(I(),qr(a,{key:u,isLast:u==e.curves.length-1,me:e.curves[u],"onUpdate:me":c=>e.curves[u]=c,onDelete:c=>o.removeCurve(u)},null,8,["isLast","me","onUpdate:me","onDelete"]))]))),256))]),_("button",{onClick:t[0]||(t[0]=(...l)=>o.addCurve&&o.addCurve(...l))},"add curve")]),o.modelC.bell?(I(),O("div",d1e,[ht(s,{option:o.makeHistogramOption,"update-options":{notMerge:!0},autoresize:""},null,8,["option"])])):nt("",!0),p1e],64)}const v1e=le(c1e,[["render",g1e],["__scopeId","data-v-95ac9cb8"]]);Qr([ql,dd,Yc,Kc,Ql,Jl,tu,Zc,vd,gd,pd,qc]);const m1e={setup(){},components:{VChart:eu,FishModel:v1e},provide(){return{[oj]:yr(()=>this.darkMode?"dark":"default")}},data(){const e=matchMedia("(prefers-color-scheme: dark)");return{mode_relative:!0,relative_base:100,alldata:{},selectedFish:"ALL",selectedLuck:68.3,generalSigmas:4,fish_info:{},hide_buckets:{},darkModeQuery:e,darkMode:e.matches}},created(){this.fetchObservations()},mounted(){this.darkModeQuery.addEventListener("change",()=>{this.darkMode=this.darkModeQuery.matches})},watch:{},computed:{currentDataset(){const e=[];if(this.selectedFish in this.alldata){const t=this.get_fish_info(this.selectedFish);for(const r of this.alldata[this.selectedFish])this.mode_relative?e.push(this.relative_base*r/t.avg_size):e.push(r)}return e},weightedDataset(){let e={};const t=this.currentDataset,r=t.length;let n=[];for(let i=0;i<r;i++){const o=gt.binomial.cdf(i,r,1-this.selectedLuck/100);n.push(o)}return e={len:r,luckyLen:r*this.selectedLuck/100,sorted:[...t].sort((i,o)=>i-o),weights:n},e.grouped=e.sorted.reduce((i,o)=>{const a=Math.floor(o);return i[a]||(i[a]=[]),i[a].push(o),i},{}),e},stats(){const e=this.currentDataset;let t=e.length;const r=this.weightedDataset;for(let p of r.weights)p>this.stats.generalConfidence/100,p>1-this.stats.generalConfidence/100;let n=[],i=[],o=100,a=0;o=Math.min(o,this.selectedLuck),a=Math.max(a,this.selectedLuck);let{len:s,luckyLen:l,sorted:u,weights:c,grouped:f}=r;n.push(...u),i.push(...c);const h={1.5:86.6385597,2:95.4499736,2.5:98.7580669,3:99.7300203,3.5:99.9534741841929,4:99.9936657516334},d={generalSigmas:this.generalSigmas,generalConfidence:h[this.generalSigmas],lenRaw:t,dataRaw:e,dataFlatSorted:n,weightsFlat:i,len:n.length,min:gt.min(n),max:gt.max(n),range:gt.range(n),sum:gt.sum(n),mean:gt.mean(n),meanErr:0,meanLo:0,meanHi:0,std:gt.stdev(n,!0),bell:[],histo:[]};return d.meanErr=Math.sqrt(d.mean/d.max*(1-d.mean/d.max)*d.max/d.len),d.meanLo=d.mean-this.generalSigmas*d.meanErr,d.meanHi=d.mean+this.generalSigmas*d.meanErr,console.log("stats",d),d},histogram(){const e={arr:[],map:{}};if(this.stats.len>0){const r=this.stats.dataFlatSorted[this.stats.len-1],n=Math.ceil(r/1);console.log("binCount",n);const i=Array(n).fill(0);for(const o of this.stats.dataFlatSorted){const a=Math.floor(o/1);i[a]++}for(let o=0;o<n;o++){const a=o*1;e.arr.push([a,i[o]]),e.map[a]=i[o]}}return this.stats.range>0||(e.arr=[[this.stats.min,this.stats.len]],e.map[this.stats.min]=this.stats.len),console.log("histogram",e),e}},methods:{formatFixed:dt,isNumber:XQ,async fetchObservations(){const e=Date.now();if(this.alldata=await(await fetch("data/manual/catches_by_fish.json")).json(),this.fish_info=await(await fetch("data/encyclopedia.json")).json(),this.mode_relative){console.log("filling group ALL");const o=[];for(const[a,s]of Object.entries(this.alldata)){const l=this.get_fish_info(a),u=(l.baseSize+l.varySize)/2;for(const c of s)o.push(this.relative_base*c/u)}this.alldata.ALL=o,this.fish_info.ALL={baseSize:"x",varySize:"x",avg_size:this.relative_base}}const t={},r={};for(const[o,a]of Object.entries(this.alldata)){const s=this.get_fish_info(o),l=`${s.baseSize}_${s.varySize}`,u=a.length;l in t||(t[l]={fishes:[],totalSamples:0}),t[l].fishes.push(o),t[l].totalSamples+=u}console.log("bs_group_sizes",t);for(const[o,a]of Object.entries(this.alldata)){const l=`${this.get_fish_info(o).avg_size}`,u=a.length;l in r||(r[l]={fishes:[],totalSamples:0}),r[l].fishes.push(o),r[l].totalSamples+=u}console.log("avg_group_sizes",r);const n={},i={};for(const[o,a]of Object.entries(this.alldata)){const s=this.get_fish_info(o),l=`${s.baseSize}_${s.varySize}`,u=t[l];if(u.fishes.length>1&&u.totalSamples>1500){const h=u.fishes.join("+");h in n||(n[h]={sizes:[],info:{baseSize:s.baseSize,varySize:s.varySize}});for(const d of a)n[h].sizes.push(d)}const c=`${s.avg_size}`,f=r[c];if(f.fishes.length>1&&f.totalSamples>1500){const h=f.fishes.join("+");if(h in n)continue;h in i||(i[h]={sizes:[],info:{baseSize:"x",varySize:"x",avg_size:s.avg_size}});for(const d of a)i[h].sizes.push(d)}}for(const[o,a]of Object.entries(n)){const s=`by BS/FVS (${o})`;this.alldata[s]=a.sizes,this.fish_info[s]=a.info}for(const[o,a]of Object.entries(i)){const s=`by AVG (${o})`;this.alldata[s]=a.sizes,this.fish_info[s]=a.info}console.log("fetchObservations took",Date.now()-e,"ms")},activate(e){this.selectedFish=e},get_fish_info(e){const t=e in this.fish_info?this.fish_info[e]:{baseSize:1,varySize:1};return"avg_size"in t||(t.avg_size=(t.baseSize+t.varySize)/2),t}}},WY=e=>(er("data-v-e49e7ec7"),e=e(),rr(),e),y1e={id:"menu"},_1e={style:{display:"none"}},b1e=$("relative sizes (scaled to Avg= "),w1e=$(" ) "),S1e=WY(()=>_("br",null,null,-1)),T1e=WY(()=>_("tr",null,[_("th",null,"ik"),_("th",null,"BS"),_("th",null,"FVS"),_("th",null,"Avg"),_("th",null,"data")],-1)),k1e={key:0},P1e=["title"],E1e=["onClick"],C1e={id:"content"};function A1e(e,t,r,n,i,o){const a=Gt("FishModel");return I(),O("main",null,[_("div",y1e,[_("div",_1e,M(i.selectedFish),1),at(_("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=s=>i.mode_relative=s)},null,512),[[Ge,i.mode_relative]]),b1e,at(_("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=s=>i.relative_base=s),step:"10",style:{width:"3.5em"}},null,512),[[zt,i.relative_base]]),w1e,S1e,_("table",null,[T1e,(I(!0),O(W,null,Pt(i.alldata,(s,l)=>(I(),O(W,null,[s.length>1e3?(I(),O("tr",k1e,[_("td",null,[l.startsWith("by")?(I(),O("abbr",{key:0,class:"tooltip",title:l},"group",8,P1e)):(I(),O(W,{key:1},[$(M(l),1)],64))]),_("td",null,M(o.get_fish_info(l).baseSize),1),_("td",null,M(o.get_fish_info(l).varySize),1),_("td",null,M(o.get_fish_info(l).avg_size),1),_("td",null,[_("button",{class:Ur({pressed:l===i.selectedFish}),onClick:u=>o.activate(l)},M(s.length),11,E1e)])])):nt("",!0)],64))),256))])]),_("div",C1e,[_("details",null,[_("summary",null,"Dataset: size N = "+M(o.stats.len)+", mean M = "+M(o.formatFixed(o.stats.mean,3))+"\xB1"+M(o.formatFixed(1.96*o.stats.meanErr,3))+", min = "+M(o.formatFixed(o.stats.min,3))+", max = "+M(o.formatFixed(o.stats.max,3)),1),_("div",null,[_("table",null,[(I(!0),O(W,null,Pt(o.weightedDataset.grouped,(s,l)=>(I(),O("tr",null,[(I(!0),O(W,null,Pt(s,u=>(I(),O("td",null,M(o.formatFixed(u,3)),1))),256))]))),256))])])]),_("div",null,[ht(a,{stats:o.stats,histogram:o.histogram,avg_size:i.mode_relative?i.relative_base:i.fish_info[i.selectedFish].avg_size},null,8,["stats","histogram","avg_size"])])])])}const x1e=le(m1e,[["render",A1e],["__scopeId","data-v-e49e7ec7"]]);const M1e={setup(){return{gameStore:At()}},components:{},data(){return{all_origins:[],all_destinations:[],predefined_cases:[{label:"ehwaz-pinto",expected:5,pairs:[[160,1],[136,1]]},{label:"glish-lynch_f/heidel-glish_r",expected:9,pairs:[[488,302],[480,301]]}],predefined_results:[],rtp_pair_count:10,rtp_results:[],real_pair_count:10,real_steps:10,real_results:[],retry_until_red:!1,green_retries:0,max_ms:5e3}},async mounted(){function e(r){const n=i=>{r()?i():setTimeout(o=>n(i),100)};return new Promise(n)}console.log("mounted, sleeping"),await e(r=>this.gameStore.ready==!0),console.log("resuming");const t=At();this.all_origins=t.townsWithLodging,this.all_destinations=[];for(const r of Object.keys(t.plantzones))this.all_destinations.push(Number(r))},computed:{},methods:{run_case(e){const t=At(),r=[];for(const a of e.pairs)r.push({source:a[0],target:a[1]});const n=t.routeOld([],r),i=t.routeWasm([],r);e.str="";for(const a of e.pairs)e.str+=`${a[1]},${a[0]} `;return{testcase:e,resultOld:n,resultWasm:i,red:i.autotakenNodesCP>n.autotakenNodesCP}},run_predefined(){this.predefined_results.length=0;for(const e of this.predefined_cases)this.predefined_results.push(this.run_case(e))},run_rtp(){const e=Date.now();for(;;){const t=new Set,r={label:`rtp${this.rtp_results.length}`,pairs:[]};for(let i=0;i<this.rtp_pair_count;i++){const o=this.all_origins[Math.floor(Math.random()*this.all_origins.length)],a=this.all_destinations.filter(l=>!t.has(l)),s=a[Math.floor(Math.random()*a.length)];t.add(s),r.pairs.push([o,s])}const n=this.run_case(r);if(this.retry_until_red&&!n.red&&this.green_retries++,!this.retry_until_red||n.red||Date.now()-e>this.max_ms){this.rtp_results.push(n);break}}},run_real(){const e=At(),t=Date.now();for(;;){const r=new Set,n={label:`real${this.real_results.length}`,pairs:[]};for(let o=0;o<this.real_pair_count;o++){const a=this.all_origins.filter(u=>!r.has(u));if(a.length==0)break;const s=a[Math.floor(Math.random()*a.length)];let l=s;for(let u=0;u<this.real_steps;u++){const f=e.links[l].filter(h=>!r.has(h));l=f[Math.floor(Math.random()*f.length)],l==s&&u--}r.add(l),n.pairs.push([s,l])}const i=this.run_case(n);if(this.retry_until_red&&!i.red&&this.green_retries++,!this.retry_until_red||i.red||Date.now()-t>this.max_ms){this.real_results.push(i);break}}}}},uf=e=>(er("data-v-5d4d64d0"),e=e(),rr(),e),I1e=$(" retry until first fail up to "),L1e=$("ms "),O1e={class:"column-container"},R1e={class:"column"},D1e=uf(()=>_("h3",null,[$(" Random town-plantzone pairs "),_("abbr",{class:"tooltip",title:"completely random, including on the other side of the map"},"\u2139")],-1)),N1e=$(" Pairs "),F1e=uf(()=>_("br",null,null,-1)),$1e=uf(()=>_("thead",null,[_("tr",null,[_("td",null,"old"),_("td",null,"wasm"),_("td",null,"\u2265"),_("td",null,"label")])],-1)),B1e={class:"column"},z1e=uf(()=>_("h3",null,[$(" Realistic "),_("abbr",{class:"tooltip",title:"plantzones tend to be near hometowns (~sqrt of steps)"},"\u2139")],-1)),V1e=$(" Pairs "),U1e=uf(()=>_("br",null,null,-1)),W1e=$(" Steps "),j1e=uf(()=>_("br",null,null,-1)),G1e=uf(()=>_("thead",null,[_("tr",null,[_("td",null,"old"),_("td",null,"wasm"),_("td",null,"\u2265"),_("td",null,"label")])],-1));function H1e(e,t,r,n,i,o){return I(),O("main",null,[at(_("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=a=>i.retry_until_red=a)},null,512),[[Ge,i.retry_until_red]]),I1e,at(_("input",{type:"number",class:"w5em","onUpdate:modelValue":t[1]||(t[1]=a=>i.max_ms=a)},null,512),[[zt,i.max_ms,void 0,{number:!0}]]),L1e,i.retry_until_red?(I(),O(W,{key:0},[$(" ("+M(i.green_retries)+"\u2714\uFE0F ignored) ",1)],64)):nt("",!0),_("div",O1e,[nt("",!0),_("div",R1e,[D1e,N1e,at(_("input",{type:"range","onUpdate:modelValue":t[3]||(t[3]=a=>i.rtp_pair_count=a),min:"1",max:"80"},null,512),[[zt,i.rtp_pair_count,void 0,{number:!0}]]),$(" "+M(i.rtp_pair_count),1),F1e,_("button",{onClick:t[4]||(t[4]=(...a)=>o.run_rtp&&o.run_rtp(...a))},"run"),_("table",null,[$1e,_("tbody",null,[(I(!0),O(W,null,Pt(i.rtp_results,a=>(I(),O("tr",null,[_("td",null,M(a.resultOld.totalCost),1),_("td",null,M(a.resultWasm.totalCost),1),_("td",null,M(a.red?"\u274C":"\u2714\uFE0F"),1),_("td",null,[_("details",null,[_("summary",null,M(a.testcase.label),1),_("pre",null,M(a.testcase.str),1)])])]))),256))])])]),_("div",B1e,[z1e,V1e,at(_("input",{type:"range","onUpdate:modelValue":t[5]||(t[5]=a=>i.real_pair_count=a),min:"1",max:"80"},null,512),[[zt,i.real_pair_count,void 0,{number:!0}]]),$(" "+M(i.real_pair_count),1),U1e,W1e,at(_("input",{type:"range","onUpdate:modelValue":t[6]||(t[6]=a=>i.real_steps=a),min:"1",max:"80"},null,512),[[zt,i.real_steps,void 0,{number:!0}]]),$(" "+M(i.real_steps),1),j1e,_("button",{onClick:t[7]||(t[7]=(...a)=>o.run_real&&o.run_real(...a))},"run"),_("table",null,[G1e,_("tbody",null,[(I(!0),O(W,null,Pt(i.real_results,a=>(I(),O("tr",null,[_("td",null,M(a.resultOld.totalCost),1),_("td",null,M(a.resultWasm.totalCost),1),_("td",null,M(a.red?"\u274C":"\u2714\uFE0F"),1),_("td",null,[_("details",null,[_("summary",null,M(a.testcase.label),1),_("pre",null,M(a.testcase.str),1)])])]))),256))])])])])])}const X1e=le(M1e,[["render",H1e],["__scopeId","data-v-5d4d64d0"]]);const Y1e={setup(){return{gameStore:At()}},components:{},data(){return{deck:null,tileLayer:null,geoLayer:null,iconLayer:null,initialViewState:{target:[0,0],zoom:-12,minZoom:-12,maxZoom:-5},hoverx:0,hovery:0,selectedZone:0,highlightedIcon:0}},computed:{},mounted(){this.deck=this.initializeDeck()},watch:{highlightedIcon(e){this.iconLayer=this.makeIconsLayer(),this.deck.setProps({layers:[this.tileLayer,this.geoLayer,this.iconLayer]})}},methods:{makeIconsLayer(){return new Lc({data:"data/deck_rg_graphs.json",getPosition:e=>[e.graphx,e.graphz],getColor:e=>[66,66,66,255],getIcon:function(e){return{url:"data/icons/target_percent.png",width:128,height:128,anchorX:64,anchorY:64}},modelMatrix:[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],getSize:e=>e.k==this.highlightedIcon?50:0,updateTriggers:{getSize:this.highlightedIcon}})},makeGeoLayer(){return new P2({id:"GeoJsonLayerCur",data:"data/rg_latest_1_5.geojson",stroked:!1,getLineWidth:50,lineWidthMinPixels:1,getLineColor:[255,255,255],getFillColor:e=>e.properties.c,pickable:!0,autoHighlight:!0,coordinateSystem:xe.CARTESIAN,modelMatrix:[301.1765,0,0,0,0,301.1765,0,0,0,0,1,0,-2048e3,-2048e3,0,1],opacity:.1,onHover:({object:e})=>{e&&e.properties&&(this.highlightedIcon=e.properties.rg)}})},initializeDeck(){return this.tileLayer=new C2({id:"TileLayer",data:"https://shrddr.github.io/maptiles/{z}/{x}_{y}.webp",minZoom:0,maxZoom:7,tileSize:256*12800,zoomOffset:14,extent:[-67*2*12800,-71*2*12800,58*2*12800,35*2*12800],renderSubLayers:t=>{const{bbox:{left:r,bottom:n,right:i,top:o}}=t.tile;return new S2(t,{data:null,image:t.data,bounds:[r,n,i,o]})}}),this.iconLayer=this.makeIconsLayer(),this.geoLayer=this.makeGeoLayer(),new _2({canvas:"deck-canvas",mapbox:!1,initialViewState:this.initialViewState,layers:[this.tileLayer,this.geoLayer,this.iconLayer],controller:{doubleClickZoom:!1},getTooltip:({object:t})=>{if(t&&t.properties&&t.properties.rg)return`RG${t.properties.rg}`},views:[new m2({controller:!0})],onHover:(t,r)=>{t.coordinate&&(this.hoverx=Math.round(t.coordinate[0]),this.hovery=Math.round(t.coordinate[1]))}})}}},K1e={id:"canvas-limiter"},Z1e={id:"deck-canvas",ref:"canvas"},q1e={id:"coords"};function J1e(e,t,r,n,i,o){return I(),O("main",null,[_("div",K1e,[_("canvas",Z1e,null,512),_("div",q1e," x: "+M(i.hoverx)+" y: "+M(-i.hovery),1)])])}const Q1e=le(Y1e,[["render",J1e],["__scopeId","data-v-b90b407e"]]),tye=WQ({history:aQ("/workerman/"),routes:[{path:"/",name:"home",component:uOt},{path:"/plantzones",component:iRt},{path:"/resources",component:HRt},{path:"/settings",component:BNt},{path:"/about",component:()=>mtt(()=>import("./AboutView.994d09c2.js"),[])},{path:"/othertowns",component:GNt},{path:"/workshops",component:o9t},{path:"/housecraft",component:P9t},{path:"/droprates",component:Pme},{path:"/routertests",component:X1e},{path:"/regionmap",component:Q1e},{path:"/fishsize",component:x1e},{path:"/lodging",component:vRt}]});const Y4=L$(ptt),eye=BJ();Y4.use(eye);Y4.use(tye);Y4.mount("#app");export{W as F,le as _,_ as a,$ as b,O as c,Gt as d,qr as e,ht as f,Xv as g,rr as h,I as o,er as p,WF as r,M as t,At as u,Fe as w};
