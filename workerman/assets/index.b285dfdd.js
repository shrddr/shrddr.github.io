function gj(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();function KT(e,t){const r=Object.create(null),n=e.split(",");for(let i=0;i<n.length;i++)r[n[i]]=!0;return t?i=>!!r[i.toLowerCase()]:i=>!!r[i]}const mj="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",_j=KT(mj);function p8(e){return!!e||e===""}function Nl(e){if(Bt(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],i=hr(n)?wj(n):Nl(n);if(i)for(const o in i)t[o]=i[o]}return t}else{if(hr(e))return e;if(Qe(e))return e}}const yj=/;(?![^(]*\))/g,bj=/:(.+)/;function wj(e){const t={};return e.split(yj).forEach(r=>{if(r){const n=r.split(bj);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function en(e){let t="";if(hr(e))t=e;else if(Bt(e))for(let r=0;r<e.length;r++){const n=en(e[r]);n&&(t+=n+" ")}else if(Qe(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}function Sj(e,t){if(e.length!==t.length)return!1;let r=!0;for(let n=0;r&&n<e.length;n++)r=Yl(e[n],t[n]);return r}function Yl(e,t){if(e===t)return!0;let r=$A(e),n=$A(t);if(r||n)return r&&n?e.getTime()===t.getTime():!1;if(r=Fd(e),n=Fd(t),r||n)return e===t;if(r=Bt(e),n=Bt(t),r||n)return r&&n?Sj(e,t):!1;if(r=Qe(e),n=Qe(t),r||n){if(!r||!n)return!1;const i=Object.keys(e).length,o=Object.keys(t).length;if(i!==o)return!1;for(const a in e){const s=e.hasOwnProperty(a),l=t.hasOwnProperty(a);if(s&&!l||!s&&l||!Yl(e[a],t[a]))return!1}}return String(e)===String(t)}function JT(e,t){return e.findIndex(r=>Yl(r,t))}const L=e=>hr(e)?e:e==null?"":Bt(e)||Qe(e)&&(e.toString===m8||!Gt(e.toString))?JSON.stringify(e,v8,2):String(e),v8=(e,t)=>t&&t.__v_isRef?v8(e,t.value):Lc(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[n,i])=>(r[`${n} =>`]=i,r),{})}:lf(t)?{[`Set(${t.size})`]:[...t.values()]}:Qe(t)&&!Bt(t)&&!_8(t)?String(t):t,Le={},xc=[],xi=()=>{},Tj=()=>!1,Pj=/^on[^a-z]/,k1=e=>Pj.test(e),QT=e=>e.startsWith("onUpdate:"),nn=Object.assign,tP=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},Ej=Object.prototype.hasOwnProperty,se=(e,t)=>Ej.call(e,t),Bt=Array.isArray,Lc=e=>A0(e)==="[object Map]",lf=e=>A0(e)==="[object Set]",$A=e=>A0(e)==="[object Date]",Gt=e=>typeof e=="function",hr=e=>typeof e=="string",Fd=e=>typeof e=="symbol",Qe=e=>e!==null&&typeof e=="object",g8=e=>Qe(e)&&Gt(e.then)&&Gt(e.catch),m8=Object.prototype.toString,A0=e=>m8.call(e),kj=e=>A0(e).slice(8,-1),_8=e=>A0(e)==="[object Object]",eP=e=>hr(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Eg=KT(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),A1=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},Aj=/-(\w)/g,Co=A1(e=>e.replace(Aj,(t,r)=>r?r.toUpperCase():"")),Cj=/\B([A-Z])/g,uf=A1(e=>e.replace(Cj,"-$1").toLowerCase()),C1=A1(e=>e.charAt(0).toUpperCase()+e.slice(1)),hy=A1(e=>e?`on${C1(e)}`:""),Bd=(e,t)=>!Object.is(e,t),kg=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},dm=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},pm=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let zA;const Mj=()=>zA||(zA=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let ho;class y8{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&ho&&(this.parent=ho,this.index=(ho.scopes||(ho.scopes=[])).push(this)-1)}run(t){if(this.active){const r=ho;try{return ho=this,t()}finally{ho=r}}}on(){ho=this}off(){ho=this.parent}stop(t){if(this.active){let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.scopes)for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);if(this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.active=!1}}}function b8(e){return new y8(e)}function xj(e,t=ho){t&&t.active&&t.effects.push(e)}const rP=e=>{const t=new Set(e);return t.w=0,t.n=0,t},w8=e=>(e.w&ks)>0,S8=e=>(e.n&ks)>0,Lj=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=ks},Ij=e=>{const{deps:t}=e;if(t.length){let r=0;for(let n=0;n<t.length;n++){const i=t[n];w8(i)&&!S8(i)?i.delete(e):t[r++]=i,i.w&=~ks,i.n&=~ks}t.length=r}},qw=new WeakMap;let Hh=0,ks=1;const Zw=30;let Si;const Fl=Symbol(""),Kw=Symbol("");class nP{constructor(t,r=null,n){this.fn=t,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,xj(this,n)}run(){if(!this.active)return this.fn();let t=Si,r=ys;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Si,Si=this,ys=!0,ks=1<<++Hh,Hh<=Zw?Lj(this):VA(this),this.fn()}finally{Hh<=Zw&&Ij(this),ks=1<<--Hh,Si=this.parent,ys=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Si===this?this.deferStop=!0:this.active&&(VA(this),this.onStop&&this.onStop(),this.active=!1)}}function VA(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}let ys=!0;const T8=[];function cf(){T8.push(ys),ys=!1}function ff(){const e=T8.pop();ys=e===void 0?!0:e}function Ln(e,t,r){if(ys&&Si){let n=qw.get(e);n||qw.set(e,n=new Map);let i=n.get(r);i||n.set(r,i=rP()),P8(i)}}function P8(e,t){let r=!1;Hh<=Zw?S8(e)||(e.n|=ks,r=!w8(e)):r=!e.has(Si),r&&(e.add(Si),Si.deps.push(e))}function pa(e,t,r,n,i,o){const a=qw.get(e);if(!a)return;let s=[];if(t==="clear")s=[...a.values()];else if(r==="length"&&Bt(e))a.forEach((l,u)=>{(u==="length"||u>=n)&&s.push(l)});else switch(r!==void 0&&s.push(a.get(r)),t){case"add":Bt(e)?eP(r)&&s.push(a.get("length")):(s.push(a.get(Fl)),Lc(e)&&s.push(a.get(Kw)));break;case"delete":Bt(e)||(s.push(a.get(Fl)),Lc(e)&&s.push(a.get(Kw)));break;case"set":Lc(e)&&s.push(a.get(Fl));break}if(s.length===1)s[0]&&Jw(s[0]);else{const l=[];for(const u of s)u&&l.push(...u);Jw(rP(l))}}function Jw(e,t){const r=Bt(e)?e:[...e];for(const n of r)n.computed&&UA(n);for(const n of r)n.computed||UA(n)}function UA(e,t){(e!==Si||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const Oj=KT("__proto__,__v_isRef,__isVue"),E8=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Fd)),Rj=iP(),Dj=iP(!1,!0),Nj=iP(!0),GA=Fj();function Fj(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const n=ce(this);for(let o=0,a=this.length;o<a;o++)Ln(n,"get",o+"");const i=n[t](...r);return i===-1||i===!1?n[t](...r.map(ce)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){cf();const n=ce(this)[t].apply(this,r);return ff(),n}}),e}function iP(e=!1,t=!1){return function(n,i,o){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&o===(e?t?Qj:x8:t?M8:C8).get(n))return n;const a=Bt(n);if(!e&&a&&se(GA,i))return Reflect.get(GA,i,o);const s=Reflect.get(n,i,o);return(Fd(i)?E8.has(i):Oj(i))||(e||Ln(n,"get",i),t)?s:He(s)?a&&eP(i)?s:s.value:Qe(s)?e?L8(s):hf(s):s}}const Bj=k8(),$j=k8(!0);function k8(e=!1){return function(r,n,i,o){let a=r[n];if($d(a)&&He(a)&&!He(i))return!1;if(!e&&!$d(i)&&(Qw(i)||(i=ce(i),a=ce(a)),!Bt(r)&&He(a)&&!He(i)))return a.value=i,!0;const s=Bt(r)&&eP(n)?Number(n)<r.length:se(r,n),l=Reflect.set(r,n,i,o);return r===ce(o)&&(s?Bd(i,a)&&pa(r,"set",n,i):pa(r,"add",n,i)),l}}function zj(e,t){const r=se(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&r&&pa(e,"delete",t,void 0),n}function Vj(e,t){const r=Reflect.has(e,t);return(!Fd(t)||!E8.has(t))&&Ln(e,"has",t),r}function Uj(e){return Ln(e,"iterate",Bt(e)?"length":Fl),Reflect.ownKeys(e)}const A8={get:Rj,set:Bj,deleteProperty:zj,has:Vj,ownKeys:Uj},Gj={get:Nj,set(e,t){return!0},deleteProperty(e,t){return!0}},jj=nn({},A8,{get:Dj,set:$j}),oP=e=>e,M1=e=>Reflect.getPrototypeOf(e);function vp(e,t,r=!1,n=!1){e=e.__v_raw;const i=ce(e),o=ce(t);r||(t!==o&&Ln(i,"get",t),Ln(i,"get",o));const{has:a}=M1(i),s=n?oP:r?lP:zd;if(a.call(i,t))return s(e.get(t));if(a.call(i,o))return s(e.get(o));e!==i&&e.get(t)}function gp(e,t=!1){const r=this.__v_raw,n=ce(r),i=ce(e);return t||(e!==i&&Ln(n,"has",e),Ln(n,"has",i)),e===i?r.has(e):r.has(e)||r.has(i)}function mp(e,t=!1){return e=e.__v_raw,!t&&Ln(ce(e),"iterate",Fl),Reflect.get(e,"size",e)}function jA(e){e=ce(e);const t=ce(this);return M1(t).has.call(t,e)||(t.add(e),pa(t,"add",e,e)),this}function WA(e,t){t=ce(t);const r=ce(this),{has:n,get:i}=M1(r);let o=n.call(r,e);o||(e=ce(e),o=n.call(r,e));const a=i.call(r,e);return r.set(e,t),o?Bd(t,a)&&pa(r,"set",e,t):pa(r,"add",e,t),this}function HA(e){const t=ce(this),{has:r,get:n}=M1(t);let i=r.call(t,e);i||(e=ce(e),i=r.call(t,e)),n&&n.call(t,e);const o=t.delete(e);return i&&pa(t,"delete",e,void 0),o}function XA(){const e=ce(this),t=e.size!==0,r=e.clear();return t&&pa(e,"clear",void 0,void 0),r}function _p(e,t){return function(n,i){const o=this,a=o.__v_raw,s=ce(a),l=t?oP:e?lP:zd;return!e&&Ln(s,"iterate",Fl),a.forEach((u,c)=>n.call(i,l(u),l(c),o))}}function yp(e,t,r){return function(...n){const i=this.__v_raw,o=ce(i),a=Lc(o),s=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,u=i[e](...n),c=r?oP:t?lP:zd;return!t&&Ln(o,"iterate",l?Kw:Fl),{next(){const{value:f,done:h}=u.next();return h?{value:f,done:h}:{value:s?[c(f[0]),c(f[1])]:c(f),done:h}},[Symbol.iterator](){return this}}}}function Ra(e){return function(...t){return e==="delete"?!1:this}}function Wj(){const e={get(o){return vp(this,o)},get size(){return mp(this)},has:gp,add:jA,set:WA,delete:HA,clear:XA,forEach:_p(!1,!1)},t={get(o){return vp(this,o,!1,!0)},get size(){return mp(this)},has:gp,add:jA,set:WA,delete:HA,clear:XA,forEach:_p(!1,!0)},r={get(o){return vp(this,o,!0)},get size(){return mp(this,!0)},has(o){return gp.call(this,o,!0)},add:Ra("add"),set:Ra("set"),delete:Ra("delete"),clear:Ra("clear"),forEach:_p(!0,!1)},n={get(o){return vp(this,o,!0,!0)},get size(){return mp(this,!0)},has(o){return gp.call(this,o,!0)},add:Ra("add"),set:Ra("set"),delete:Ra("delete"),clear:Ra("clear"),forEach:_p(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{e[o]=yp(o,!1,!1),r[o]=yp(o,!0,!1),t[o]=yp(o,!1,!0),n[o]=yp(o,!0,!0)}),[e,r,t,n]}const[Hj,Xj,Yj,qj]=Wj();function aP(e,t){const r=t?e?qj:Yj:e?Xj:Hj;return(n,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(se(r,i)&&i in n?r:n,i,o)}const Zj={get:aP(!1,!1)},Kj={get:aP(!1,!0)},Jj={get:aP(!0,!1)},C8=new WeakMap,M8=new WeakMap,x8=new WeakMap,Qj=new WeakMap;function tW(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function eW(e){return e.__v_skip||!Object.isExtensible(e)?0:tW(kj(e))}function hf(e){return $d(e)?e:sP(e,!1,A8,Zj,C8)}function rW(e){return sP(e,!1,jj,Kj,M8)}function L8(e){return sP(e,!0,Gj,Jj,x8)}function sP(e,t,r,n,i){if(!Qe(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=i.get(e);if(o)return o;const a=eW(e);if(a===0)return e;const s=new Proxy(e,a===2?n:r);return i.set(e,s),s}function ca(e){return $d(e)?ca(e.__v_raw):!!(e&&e.__v_isReactive)}function $d(e){return!!(e&&e.__v_isReadonly)}function Qw(e){return!!(e&&e.__v_isShallow)}function I8(e){return ca(e)||$d(e)}function ce(e){const t=e&&e.__v_raw;return t?ce(t):e}function bi(e){return dm(e,"__v_skip",!0),e}const zd=e=>Qe(e)?hf(e):e,lP=e=>Qe(e)?L8(e):e;function O8(e){ys&&Si&&(e=ce(e),P8(e.dep||(e.dep=rP())))}function R8(e,t){e=ce(e),e.dep&&Jw(e.dep)}function He(e){return!!(e&&e.__v_isRef===!0)}function x1(e){return D8(e,!1)}function Ag(e){return D8(e,!0)}function D8(e,t){return He(e)?e:new nW(e,t)}class nW{constructor(t,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?t:ce(t),this._value=r?t:zd(t)}get value(){return O8(this),this._value}set value(t){t=this.__v_isShallow?t:ce(t),Bd(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:zd(t),R8(this))}}function br(e){return He(e)?e.value:e}const iW={get:(e,t,r)=>br(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const i=e[t];return He(i)&&!He(r)?(i.value=r,!0):Reflect.set(e,t,r,n)}};function N8(e){return ca(e)?e:new Proxy(e,iW)}function tS(e){const t=Bt(e)?new Array(e.length):{};for(const r in e)t[r]=Cg(e,r);return t}class oW{constructor(t,r,n){this._object=t,this._key=r,this._defaultValue=n,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function Cg(e,t,r){const n=e[t];return He(n)?n:new oW(e,t,r)}class aW{constructor(t,r,n,i){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new nP(t,()=>{this._dirty||(this._dirty=!0,R8(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const t=ce(this);return O8(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function sW(e,t,r=!1){let n,i;const o=Gt(e);return o?(n=e,i=xi):(n=e.get,i=e.set),new aW(n,i,o||!i,r)}function bs(e,t,r,n){let i;try{i=n?e(...n):e()}catch(o){L1(o,t,r)}return i}function Li(e,t,r,n){if(Gt(e)){const o=bs(e,t,r,n);return o&&g8(o)&&o.catch(a=>{L1(a,t,r)}),o}const i=[];for(let o=0;o<e.length;o++)i.push(Li(e[o],t,r,n));return i}function L1(e,t,r,n=!0){const i=t?t.vnode:null;if(t){let o=t.parent;const a=t.proxy,s=r;for(;o;){const u=o.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](e,a,s)===!1)return}o=o.parent}const l=t.appContext.config.errorHandler;if(l){bs(l,null,10,[e,a,s]);return}}lW(e,r,i,n)}function lW(e,t,r,n=!0){console.error(e)}let vm=!1,eS=!1;const kn=[];let ia=0;const ld=[];let Xh=null,fc=0;const ud=[];let as=null,hc=0;const F8=Promise.resolve();let uP=null,rS=null;function Vd(e){const t=uP||F8;return e?t.then(this?e.bind(this):e):t}function uW(e){let t=ia+1,r=kn.length;for(;t<r;){const n=t+r>>>1;Ud(kn[n])<e?t=n+1:r=n}return t}function B8(e){(!kn.length||!kn.includes(e,vm&&e.allowRecurse?ia+1:ia))&&e!==rS&&(e.id==null?kn.push(e):kn.splice(uW(e.id),0,e),$8())}function $8(){!vm&&!eS&&(eS=!0,uP=F8.then(U8))}function cW(e){const t=kn.indexOf(e);t>ia&&kn.splice(t,1)}function z8(e,t,r,n){Bt(e)?r.push(...e):(!t||!t.includes(e,e.allowRecurse?n+1:n))&&r.push(e),$8()}function fW(e){z8(e,Xh,ld,fc)}function hW(e){z8(e,as,ud,hc)}function I1(e,t=null){if(ld.length){for(rS=t,Xh=[...new Set(ld)],ld.length=0,fc=0;fc<Xh.length;fc++)Xh[fc]();Xh=null,fc=0,rS=null,I1(e,t)}}function V8(e){if(I1(),ud.length){const t=[...new Set(ud)];if(ud.length=0,as){as.push(...t);return}for(as=t,as.sort((r,n)=>Ud(r)-Ud(n)),hc=0;hc<as.length;hc++)as[hc]();as=null,hc=0}}const Ud=e=>e.id==null?1/0:e.id;function U8(e){eS=!1,vm=!0,I1(e),kn.sort((r,n)=>Ud(r)-Ud(n));const t=xi;try{for(ia=0;ia<kn.length;ia++){const r=kn[ia];r&&r.active!==!1&&bs(r,null,14)}}finally{ia=0,kn.length=0,V8(),vm=!1,uP=null,(kn.length||ld.length||ud.length)&&U8(e)}}function dW(e,t,...r){if(e.isUnmounted)return;const n=e.vnode.props||Le;let i=r;const o=t.startsWith("update:"),a=o&&t.slice(7);if(a&&a in n){const c=`${a==="modelValue"?"model":a}Modifiers`,{number:f,trim:h}=n[c]||Le;h&&(i=r.map(d=>d.trim())),f&&(i=r.map(pm))}let s,l=n[s=hy(t)]||n[s=hy(Co(t))];!l&&o&&(l=n[s=hy(uf(t))]),l&&Li(l,e,6,i);const u=n[s+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,Li(u,e,6,i)}}function G8(e,t,r=!1){const n=t.emitsCache,i=n.get(e);if(i!==void 0)return i;const o=e.emits;let a={},s=!1;if(!Gt(e)){const l=u=>{const c=G8(u,t,!0);c&&(s=!0,nn(a,c))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!o&&!s?(n.set(e,null),null):(Bt(o)?o.forEach(l=>a[l]=null):nn(a,o),n.set(e,a),a)}function O1(e,t){return!e||!k1(t)?!1:(t=t.slice(2).replace(/Once$/,""),se(e,t[0].toLowerCase()+t.slice(1))||se(e,uf(t))||se(e,t))}let Ur=null,R1=null;function gm(e){const t=Ur;return Ur=e,R1=e&&e.type.__scopeId||null,t}function Ar(e){R1=e}function Cr(){R1=null}function Ee(e,t=Ur,r){if(!t||e._n)return e;const n=(...i)=>{n._d&&iC(-1);const o=gm(t),a=e(...i);return gm(o),n._d&&iC(1),a};return n._n=!0,n._c=!0,n._d=!0,n}function dy(e){const{type:t,vnode:r,proxy:n,withProxy:i,props:o,propsOptions:[a],slots:s,attrs:l,emit:u,render:c,renderCache:f,data:h,setupState:d,ctx:p,inheritAttrs:v}=e;let g,m;const _=gm(e);try{if(r.shapeFlag&4){const w=i||n;g=mo(c.call(w,w,f,o,d,h,p)),m=l}else{const w=t;g=mo(w.length>1?w(o,{attrs:l,slots:s,emit:u}):w(o,null)),m=t.props?l:pW(l)}}catch(w){fd.length=0,L1(w,e,1),g=xt(As)}let y=g;if(m&&v!==!1){const w=Object.keys(m),{shapeFlag:T}=y;w.length&&T&7&&(a&&w.some(QT)&&(m=vW(m,a)),y=jc(y,m))}return r.dirs&&(y=jc(y),y.dirs=y.dirs?y.dirs.concat(r.dirs):r.dirs),r.transition&&(y.transition=r.transition),g=y,gm(_),g}const pW=e=>{let t;for(const r in e)(r==="class"||r==="style"||k1(r))&&((t||(t={}))[r]=e[r]);return t},vW=(e,t)=>{const r={};for(const n in e)(!QT(n)||!(n.slice(9)in t))&&(r[n]=e[n]);return r};function gW(e,t,r){const{props:n,children:i,component:o}=e,{props:a,children:s,patchFlag:l}=t,u=o.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?YA(n,a,u):!!a;if(l&8){const c=t.dynamicProps;for(let f=0;f<c.length;f++){const h=c[f];if(a[h]!==n[h]&&!O1(u,h))return!0}}}else return(i||s)&&(!s||!s.$stable)?!0:n===a?!1:n?a?YA(n,a,u):!0:!!a;return!1}function YA(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const o=n[i];if(t[o]!==e[o]&&!O1(r,o))return!0}return!1}function mW({vnode:e,parent:t},r){for(;t&&t.subTree===e;)(e=t.vnode).el=r,t=t.parent}const _W=e=>e.__isSuspense;function yW(e,t){t&&t.pendingBranch?Bt(e)?t.effects.push(...e):t.effects.push(e):hW(e)}function Mg(e,t){if(fr){let r=fr.provides;const n=fr.parent&&fr.parent.provides;n===r&&(r=fr.provides=Object.create(n)),r[e]=t}}function Cn(e,t,r=!1){const n=fr||Ur;if(n){const i=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return r&&Gt(t)?t.call(n.proxy):t}}function qA(e,t){return cP(e,null,t)}const ZA={};function wo(e,t,r){return cP(e,t,r)}function cP(e,t,{immediate:r,deep:n,flush:i,onTrack:o,onTrigger:a}=Le){const s=fr;let l,u=!1,c=!1;if(He(e)?(l=()=>e.value,u=Qw(e)):ca(e)?(l=()=>e,n=!0):Bt(e)?(c=!0,u=e.some(m=>ca(m)||Qw(m)),l=()=>e.map(m=>{if(He(m))return m.value;if(ca(m))return Ml(m);if(Gt(m))return bs(m,s,2)})):Gt(e)?t?l=()=>bs(e,s,2):l=()=>{if(!(s&&s.isUnmounted))return f&&f(),Li(e,s,3,[h])}:l=xi,t&&n){const m=l;l=()=>Ml(m())}let f,h=m=>{f=g.onStop=()=>{bs(m,s,4)}};if(jd)return h=xi,t?r&&Li(t,s,3,[l(),c?[]:void 0,h]):l(),xi;let d=c?[]:ZA;const p=()=>{if(!!g.active)if(t){const m=g.run();(n||u||(c?m.some((_,y)=>Bd(_,d[y])):Bd(m,d)))&&(f&&f(),Li(t,s,3,[m,d===ZA?void 0:d,h]),d=m)}else g.run()};p.allowRecurse=!!t;let v;i==="sync"?v=p:i==="post"?v=()=>hn(p,s&&s.suspense):v=()=>fW(p);const g=new nP(l,v);return t?r?p():d=g.run():i==="post"?hn(g.run.bind(g),s&&s.suspense):g.run(),()=>{g.stop(),s&&s.scope&&tP(s.scope.effects,g)}}function bW(e,t,r){const n=this.proxy,i=hr(e)?e.includes(".")?j8(n,e):()=>n[e]:e.bind(n,n);let o;Gt(t)?o=t:(o=t.handler,r=t);const a=fr;Wc(this);const s=cP(i,o.bind(n),r);return a?Wc(a):Bl(),s}function j8(e,t){const r=t.split(".");return()=>{let n=e;for(let i=0;i<r.length&&n;i++)n=n[r[i]];return n}}function Ml(e,t){if(!Qe(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),He(e))Ml(e.value,t);else if(Bt(e))for(let r=0;r<e.length;r++)Ml(e[r],t);else if(lf(e)||Lc(e))e.forEach(r=>{Ml(r,t)});else if(_8(e))for(const r in e)Ml(e[r],t);return e}function fP(e){return Gt(e)?{setup:e,name:e.name}:e}const cd=e=>!!e.type.__asyncLoader,W8=e=>e.type.__isKeepAlive;function wW(e,t){H8(e,"a",t)}function SW(e,t){H8(e,"da",t)}function H8(e,t,r=fr){const n=e.__wdc||(e.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(D1(t,n,r),r){let i=r.parent;for(;i&&i.parent;)W8(i.parent.vnode)&&TW(n,t,r,i),i=i.parent}}function TW(e,t,r,n){const i=D1(t,e,n,!0);N1(()=>{tP(n[t],i)},r)}function D1(e,t,r=fr,n=!1){if(r){const i=r[e]||(r[e]=[]),o=t.__weh||(t.__weh=(...a)=>{if(r.isUnmounted)return;cf(),Wc(r);const s=Li(t,r,e,a);return Bl(),ff(),s});return n?i.unshift(o):i.push(o),o}}const Ea=e=>(t,r=fr)=>(!jd||e==="sp")&&D1(e,t,r),PW=Ea("bm"),X8=Ea("m"),EW=Ea("bu"),kW=Ea("u"),AW=Ea("bum"),N1=Ea("um"),CW=Ea("sp"),MW=Ea("rtg"),xW=Ea("rtc");function LW(e,t=fr){D1("ec",e,t)}function gt(e,t){const r=Ur;if(r===null)return e;const n=$1(r)||r.proxy,i=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[a,s,l,u=Le]=t[o];Gt(a)&&(a={mounted:a,updated:a}),a.deep&&Ml(s),i.push({dir:a,instance:n,value:s,oldValue:void 0,arg:l,modifiers:u})}return e}function Ws(e,t,r,n){const i=e.dirs,o=t&&t.dirs;for(let a=0;a<i.length;a++){const s=i[a];o&&(s.oldValue=o[a].value);let l=s.dir[n];l&&(cf(),Li(l,r,8,[e.el,s,e,t]),ff())}}const Y8="components";function pe(e,t){return OW(Y8,e,!0,t)||e}const IW=Symbol();function OW(e,t,r=!0,n=!1){const i=Ur||fr;if(i){const o=i.type;if(e===Y8){const s=uH(o,!1);if(s&&(s===t||s===Co(t)||s===C1(Co(t))))return o}const a=KA(i[e]||o[e],t)||KA(i.appContext[e],t);return!a&&n?o:a}}function KA(e,t){return e&&(e[t]||e[Co(t)]||e[C1(Co(t))])}function It(e,t,r,n){let i;const o=r&&r[n];if(Bt(e)||hr(e)){i=new Array(e.length);for(let a=0,s=e.length;a<s;a++)i[a]=t(e[a],a,void 0,o&&o[a])}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,o&&o[a])}else if(Qe(e))if(e[Symbol.iterator])i=Array.from(e,(a,s)=>t(a,s,void 0,o&&o[s]));else{const a=Object.keys(e);i=new Array(a.length);for(let s=0,l=a.length;s<l;s++){const u=a[s];i[s]=t(e[u],u,s,o&&o[s])}}else i=[];return r&&(r[n]=i),i}function RW(e,t,r={},n,i){if(Ur.isCE||Ur.parent&&cd(Ur.parent)&&Ur.parent.isCE)return xt("slot",t==="default"?null:{name:t},n&&n());let o=e[t];o&&o._c&&(o._d=!1),I();const a=o&&q8(o(r)),s=va(W,{key:r.key||`_${t}`},a||(n?n():[]),a&&e._===1?64:-2);return!i&&s.scopeId&&(s.slotScopeIds=[s.scopeId+"-s"]),o&&o._c&&(o._d=!0),s}function q8(e){return e.some(t=>ym(t)?!(t.type===As||t.type===W&&!q8(t.children)):!0)?e:null}const nS=e=>e?s7(e)?$1(e)||e.proxy:nS(e.parent):null,mm=nn(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>nS(e.parent),$root:e=>nS(e.root),$emit:e=>e.emit,$options:e=>K8(e),$forceUpdate:e=>e.f||(e.f=()=>B8(e.update)),$nextTick:e=>e.n||(e.n=Vd.bind(e.proxy)),$watch:e=>bW.bind(e)}),DW={get({_:e},t){const{ctx:r,setupState:n,data:i,props:o,accessCache:a,type:s,appContext:l}=e;let u;if(t[0]!=="$"){const d=a[t];if(d!==void 0)switch(d){case 1:return n[t];case 2:return i[t];case 4:return r[t];case 3:return o[t]}else{if(n!==Le&&se(n,t))return a[t]=1,n[t];if(i!==Le&&se(i,t))return a[t]=2,i[t];if((u=e.propsOptions[0])&&se(u,t))return a[t]=3,o[t];if(r!==Le&&se(r,t))return a[t]=4,r[t];iS&&(a[t]=0)}}const c=mm[t];let f,h;if(c)return t==="$attrs"&&Ln(e,"get",t),c(e);if((f=s.__cssModules)&&(f=f[t]))return f;if(r!==Le&&se(r,t))return a[t]=4,r[t];if(h=l.config.globalProperties,se(h,t))return h[t]},set({_:e},t,r){const{data:n,setupState:i,ctx:o}=e;return i!==Le&&se(i,t)?(i[t]=r,!0):n!==Le&&se(n,t)?(n[t]=r,!0):se(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:n,appContext:i,propsOptions:o}},a){let s;return!!r[a]||e!==Le&&se(e,a)||t!==Le&&se(t,a)||(s=o[0])&&se(s,a)||se(n,a)||se(mm,a)||se(i.config.globalProperties,a)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:se(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};let iS=!0;function NW(e){const t=K8(e),r=e.proxy,n=e.ctx;iS=!1,t.beforeCreate&&JA(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:a,watch:s,provide:l,inject:u,created:c,beforeMount:f,mounted:h,beforeUpdate:d,updated:p,activated:v,deactivated:g,beforeDestroy:m,beforeUnmount:_,destroyed:y,unmounted:w,render:T,renderTracked:S,renderTriggered:P,errorCaptured:A,serverPrefetch:k,expose:C,inheritAttrs:M,components:D,directives:B,filters:V}=t;if(u&&FW(u,n,null,e.appContext.config.unwrapInjectedRef),a)for(const Z in a){const q=a[Z];Gt(q)&&(n[Z]=q.bind(r))}if(i){const Z=i.call(r,r);Qe(Z)&&(e.data=hf(Z))}if(iS=!0,o)for(const Z in o){const q=o[Z],et=Gt(q)?q.bind(r,r):Gt(q.get)?q.get.bind(r,r):xi,Pt=!Gt(q)&&Gt(q.set)?q.set.bind(r):xi,Rt=Ye({get:et,set:Pt});Object.defineProperty(n,Z,{enumerable:!0,configurable:!0,get:()=>Rt.value,set:wt=>Rt.value=wt})}if(s)for(const Z in s)Z8(s[Z],n,r,Z);if(l){const Z=Gt(l)?l.call(r):l;Reflect.ownKeys(Z).forEach(q=>{Mg(q,Z[q])})}c&&JA(c,e,"c");function j(Z,q){Bt(q)?q.forEach(et=>Z(et.bind(r))):q&&Z(q.bind(r))}if(j(PW,f),j(X8,h),j(EW,d),j(kW,p),j(wW,v),j(SW,g),j(LW,A),j(xW,S),j(MW,P),j(AW,_),j(N1,w),j(CW,k),Bt(C))if(C.length){const Z=e.exposed||(e.exposed={});C.forEach(q=>{Object.defineProperty(Z,q,{get:()=>r[q],set:et=>r[q]=et})})}else e.exposed||(e.exposed={});T&&e.render===xi&&(e.render=T),M!=null&&(e.inheritAttrs=M),D&&(e.components=D),B&&(e.directives=B)}function FW(e,t,r=xi,n=!1){Bt(e)&&(e=oS(e));for(const i in e){const o=e[i];let a;Qe(o)?"default"in o?a=Cn(o.from||i,o.default,!0):a=Cn(o.from||i):a=Cn(o),He(a)&&n?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>a.value,set:s=>a.value=s}):t[i]=a}}function JA(e,t,r){Li(Bt(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,r)}function Z8(e,t,r,n){const i=n.includes(".")?j8(r,n):()=>r[n];if(hr(e)){const o=t[e];Gt(o)&&wo(i,o)}else if(Gt(e))wo(i,e.bind(r));else if(Qe(e))if(Bt(e))e.forEach(o=>Z8(o,t,r,n));else{const o=Gt(e.handler)?e.handler.bind(r):t[e.handler];Gt(o)&&wo(i,o,e)}}function K8(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:a}}=e.appContext,s=o.get(t);let l;return s?l=s:!i.length&&!r&&!n?l=t:(l={},i.length&&i.forEach(u=>_m(l,u,a,!0)),_m(l,t,a)),o.set(t,l),l}function _m(e,t,r,n=!1){const{mixins:i,extends:o}=t;o&&_m(e,o,r,!0),i&&i.forEach(a=>_m(e,a,r,!0));for(const a in t)if(!(n&&a==="expose")){const s=BW[a]||r&&r[a];e[a]=s?s(e[a],t[a]):t[a]}return e}const BW={data:QA,props:wl,emits:wl,methods:wl,computed:wl,beforeCreate:Zr,created:Zr,beforeMount:Zr,mounted:Zr,beforeUpdate:Zr,updated:Zr,beforeDestroy:Zr,beforeUnmount:Zr,destroyed:Zr,unmounted:Zr,activated:Zr,deactivated:Zr,errorCaptured:Zr,serverPrefetch:Zr,components:wl,directives:wl,watch:zW,provide:QA,inject:$W};function QA(e,t){return t?e?function(){return nn(Gt(e)?e.call(this,this):e,Gt(t)?t.call(this,this):t)}:t:e}function $W(e,t){return wl(oS(e),oS(t))}function oS(e){if(Bt(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function Zr(e,t){return e?[...new Set([].concat(e,t))]:t}function wl(e,t){return e?nn(nn(Object.create(null),e),t):t}function zW(e,t){if(!e)return t;if(!t)return e;const r=nn(Object.create(null),e);for(const n in t)r[n]=Zr(e[n],t[n]);return r}function VW(e,t,r,n=!1){const i={},o={};dm(o,F1,1),e.propsDefaults=Object.create(null),J8(e,t,i,o);for(const a in e.propsOptions[0])a in i||(i[a]=void 0);r?e.props=n?i:rW(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function UW(e,t,r,n){const{props:i,attrs:o,vnode:{patchFlag:a}}=e,s=ce(i),[l]=e.propsOptions;let u=!1;if((n||a>0)&&!(a&16)){if(a&8){const c=e.vnode.dynamicProps;for(let f=0;f<c.length;f++){let h=c[f];if(O1(e.emitsOptions,h))continue;const d=t[h];if(l)if(se(o,h))d!==o[h]&&(o[h]=d,u=!0);else{const p=Co(h);i[p]=aS(l,s,p,d,e,!1)}else d!==o[h]&&(o[h]=d,u=!0)}}}else{J8(e,t,i,o)&&(u=!0);let c;for(const f in s)(!t||!se(t,f)&&((c=uf(f))===f||!se(t,c)))&&(l?r&&(r[f]!==void 0||r[c]!==void 0)&&(i[f]=aS(l,s,f,void 0,e,!0)):delete i[f]);if(o!==s)for(const f in o)(!t||!se(t,f)&&!0)&&(delete o[f],u=!0)}u&&pa(e,"set","$attrs")}function J8(e,t,r,n){const[i,o]=e.propsOptions;let a=!1,s;if(t)for(let l in t){if(Eg(l))continue;const u=t[l];let c;i&&se(i,c=Co(l))?!o||!o.includes(c)?r[c]=u:(s||(s={}))[c]=u:O1(e.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,a=!0)}if(o){const l=ce(r),u=s||Le;for(let c=0;c<o.length;c++){const f=o[c];r[f]=aS(i,l,f,u[f],e,!se(u,f))}}return a}function aS(e,t,r,n,i,o){const a=e[r];if(a!=null){const s=se(a,"default");if(s&&n===void 0){const l=a.default;if(a.type!==Function&&Gt(l)){const{propsDefaults:u}=i;r in u?n=u[r]:(Wc(i),n=u[r]=l.call(null,t),Bl())}else n=l}a[0]&&(o&&!s?n=!1:a[1]&&(n===""||n===uf(r))&&(n=!0))}return n}function Q8(e,t,r=!1){const n=t.propsCache,i=n.get(e);if(i)return i;const o=e.props,a={},s=[];let l=!1;if(!Gt(e)){const c=f=>{l=!0;const[h,d]=Q8(f,t,!0);nn(a,h),d&&s.push(...d)};!r&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!o&&!l)return n.set(e,xc),xc;if(Bt(o))for(let c=0;c<o.length;c++){const f=Co(o[c]);tC(f)&&(a[f]=Le)}else if(o)for(const c in o){const f=Co(c);if(tC(f)){const h=o[c],d=a[f]=Bt(h)||Gt(h)?{type:h}:h;if(d){const p=nC(Boolean,d.type),v=nC(String,d.type);d[0]=p>-1,d[1]=v<0||p<v,(p>-1||se(d,"default"))&&s.push(f)}}}const u=[a,s];return n.set(e,u),u}function tC(e){return e[0]!=="$"}function eC(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function rC(e,t){return eC(e)===eC(t)}function nC(e,t){return Bt(t)?t.findIndex(r=>rC(r,e)):Gt(t)&&rC(t,e)?0:-1}const t7=e=>e[0]==="_"||e==="$stable",hP=e=>Bt(e)?e.map(mo):[mo(e)],GW=(e,t,r)=>{if(t._n)return t;const n=Ee((...i)=>hP(t(...i)),r);return n._c=!1,n},e7=(e,t,r)=>{const n=e._ctx;for(const i in e){if(t7(i))continue;const o=e[i];if(Gt(o))t[i]=GW(i,o,n);else if(o!=null){const a=hP(o);t[i]=()=>a}}},r7=(e,t)=>{const r=hP(t);e.slots.default=()=>r},jW=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=ce(t),dm(t,"_",r)):e7(t,e.slots={})}else e.slots={},t&&r7(e,t);dm(e.slots,F1,1)},WW=(e,t,r)=>{const{vnode:n,slots:i}=e;let o=!0,a=Le;if(n.shapeFlag&32){const s=t._;s?r&&s===1?o=!1:(nn(i,t),!r&&s===1&&delete i._):(o=!t.$stable,e7(t,i)),a=t}else t&&(r7(e,t),a={default:1});if(o)for(const s in i)!t7(s)&&!(s in a)&&delete i[s]};function n7(){return{app:null,config:{isNativeTag:Tj,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let HW=0;function XW(e,t){return function(n,i=null){Gt(n)||(n=Object.assign({},n)),i!=null&&!Qe(i)&&(i=null);const o=n7(),a=new Set;let s=!1;const l=o.app={_uid:HW++,_component:n,_props:i,_container:null,_context:o,_instance:null,version:fH,get config(){return o.config},set config(u){},use(u,...c){return a.has(u)||(u&&Gt(u.install)?(a.add(u),u.install(l,...c)):Gt(u)&&(a.add(u),u(l,...c))),l},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),l},component(u,c){return c?(o.components[u]=c,l):o.components[u]},directive(u,c){return c?(o.directives[u]=c,l):o.directives[u]},mount(u,c,f){if(!s){const h=xt(n,i);return h.appContext=o,c&&t?t(h,u):e(h,u,f),s=!0,l._container=u,u.__vue_app__=l,$1(h.component)||h.component.proxy}},unmount(){s&&(e(null,l._container),delete l._container.__vue_app__)},provide(u,c){return o.provides[u]=c,l}};return l}}function sS(e,t,r,n,i=!1){if(Bt(e)){e.forEach((h,d)=>sS(h,t&&(Bt(t)?t[d]:t),r,n,i));return}if(cd(n)&&!i)return;const o=n.shapeFlag&4?$1(n.component)||n.component.proxy:n.el,a=i?null:o,{i:s,r:l}=e,u=t&&t.r,c=s.refs===Le?s.refs={}:s.refs,f=s.setupState;if(u!=null&&u!==l&&(hr(u)?(c[u]=null,se(f,u)&&(f[u]=null)):He(u)&&(u.value=null)),Gt(l))bs(l,s,12,[a,c]);else{const h=hr(l),d=He(l);if(h||d){const p=()=>{if(e.f){const v=h?c[l]:l.value;i?Bt(v)&&tP(v,o):Bt(v)?v.includes(o)||v.push(o):h?(c[l]=[o],se(f,l)&&(f[l]=c[l])):(l.value=[o],e.k&&(c[e.k]=l.value))}else h?(c[l]=a,se(f,l)&&(f[l]=a)):d&&(l.value=a,e.k&&(c[e.k]=a))};a?(p.id=-1,hn(p,r)):p()}}}const hn=yW;function YW(e){return qW(e)}function qW(e,t){const r=Mj();r.__VUE__=!0;const{insert:n,remove:i,patchProp:o,createElement:a,createText:s,createComment:l,setText:u,setElementText:c,parentNode:f,nextSibling:h,setScopeId:d=xi,cloneNode:p,insertStaticContent:v}=e,g=($,G,X,J=null,Q=null,ut=null,vt=!1,st=null,ot=!!G.dynamicChildren)=>{if($===G)return;$&&!Yf($,G)&&(J=pt($),St($,Q,ut,!0),$=null),G.patchFlag===-2&&(ot=!1,G.dynamicChildren=null);const{type:nt,ref:Dt,shapeFlag:Mt}=G;switch(nt){case dP:m($,G,X,J);break;case As:_($,G,X,J);break;case xg:$==null&&y(G,X,J,vt);break;case W:B($,G,X,J,Q,ut,vt,st,ot);break;default:Mt&1?S($,G,X,J,Q,ut,vt,st,ot):Mt&6?V($,G,X,J,Q,ut,vt,st,ot):(Mt&64||Mt&128)&&nt.process($,G,X,J,Q,ut,vt,st,ot,kt)}Dt!=null&&Q&&sS(Dt,$&&$.ref,ut,G||$,!G)},m=($,G,X,J)=>{if($==null)n(G.el=s(G.children),X,J);else{const Q=G.el=$.el;G.children!==$.children&&u(Q,G.children)}},_=($,G,X,J)=>{$==null?n(G.el=l(G.children||""),X,J):G.el=$.el},y=($,G,X,J)=>{[$.el,$.anchor]=v($.children,G,X,J,$.el,$.anchor)},w=({el:$,anchor:G},X,J)=>{let Q;for(;$&&$!==G;)Q=h($),n($,X,J),$=Q;n(G,X,J)},T=({el:$,anchor:G})=>{let X;for(;$&&$!==G;)X=h($),i($),$=X;i(G)},S=($,G,X,J,Q,ut,vt,st,ot)=>{vt=vt||G.type==="svg",$==null?P(G,X,J,Q,ut,vt,st,ot):C($,G,Q,ut,vt,st,ot)},P=($,G,X,J,Q,ut,vt,st)=>{let ot,nt;const{type:Dt,props:Mt,shapeFlag:Nt,transition:$t,patchFlag:Kt,dirs:me}=$;if($.el&&p!==void 0&&Kt===-1)ot=$.el=p($.el);else{if(ot=$.el=a($.type,ut,Mt&&Mt.is,Mt),Nt&8?c(ot,$.children):Nt&16&&k($.children,ot,null,J,Q,ut&&Dt!=="foreignObject",vt,st),me&&Ws($,null,J,"created"),Mt){for(const Te in Mt)Te!=="value"&&!Eg(Te)&&o(ot,Te,null,Mt[Te],ut,$.children,J,Q,K);"value"in Mt&&o(ot,"value",null,Mt.value),(nt=Mt.onVnodeBeforeMount)&&Ji(nt,J,$)}A(ot,$,$.scopeId,vt,J)}me&&Ws($,null,J,"beforeMount");const _e=(!Q||Q&&!Q.pendingBranch)&&$t&&!$t.persisted;_e&&$t.beforeEnter(ot),n(ot,G,X),((nt=Mt&&Mt.onVnodeMounted)||_e||me)&&hn(()=>{nt&&Ji(nt,J,$),_e&&$t.enter(ot),me&&Ws($,null,J,"mounted")},Q)},A=($,G,X,J,Q)=>{if(X&&d($,X),J)for(let ut=0;ut<J.length;ut++)d($,J[ut]);if(Q){let ut=Q.subTree;if(G===ut){const vt=Q.vnode;A($,vt,vt.scopeId,vt.slotScopeIds,Q.parent)}}},k=($,G,X,J,Q,ut,vt,st,ot=0)=>{for(let nt=ot;nt<$.length;nt++){const Dt=$[nt]=st?us($[nt]):mo($[nt]);g(null,Dt,G,X,J,Q,ut,vt,st)}},C=($,G,X,J,Q,ut,vt)=>{const st=G.el=$.el;let{patchFlag:ot,dynamicChildren:nt,dirs:Dt}=G;ot|=$.patchFlag&16;const Mt=$.props||Le,Nt=G.props||Le;let $t;X&&Hs(X,!1),($t=Nt.onVnodeBeforeUpdate)&&Ji($t,X,G,$),Dt&&Ws(G,$,X,"beforeUpdate"),X&&Hs(X,!0);const Kt=Q&&G.type!=="foreignObject";if(nt?M($.dynamicChildren,nt,st,X,J,Kt,ut):vt||et($,G,st,null,X,J,Kt,ut,!1),ot>0){if(ot&16)D(st,G,Mt,Nt,X,J,Q);else if(ot&2&&Mt.class!==Nt.class&&o(st,"class",null,Nt.class,Q),ot&4&&o(st,"style",Mt.style,Nt.style,Q),ot&8){const me=G.dynamicProps;for(let _e=0;_e<me.length;_e++){const Te=me[_e],Ir=Mt[Te],qi=Nt[Te];(qi!==Ir||Te==="value")&&o(st,Te,Ir,qi,Q,$.children,X,J,K)}}ot&1&&$.children!==G.children&&c(st,G.children)}else!vt&&nt==null&&D(st,G,Mt,Nt,X,J,Q);(($t=Nt.onVnodeUpdated)||Dt)&&hn(()=>{$t&&Ji($t,X,G,$),Dt&&Ws(G,$,X,"updated")},J)},M=($,G,X,J,Q,ut,vt)=>{for(let st=0;st<G.length;st++){const ot=$[st],nt=G[st],Dt=ot.el&&(ot.type===W||!Yf(ot,nt)||ot.shapeFlag&70)?f(ot.el):X;g(ot,nt,Dt,null,J,Q,ut,vt,!0)}},D=($,G,X,J,Q,ut,vt)=>{if(X!==J){for(const st in J){if(Eg(st))continue;const ot=J[st],nt=X[st];ot!==nt&&st!=="value"&&o($,st,nt,ot,vt,G.children,Q,ut,K)}if(X!==Le)for(const st in X)!Eg(st)&&!(st in J)&&o($,st,X[st],null,vt,G.children,Q,ut,K);"value"in J&&o($,"value",X.value,J.value)}},B=($,G,X,J,Q,ut,vt,st,ot)=>{const nt=G.el=$?$.el:s(""),Dt=G.anchor=$?$.anchor:s("");let{patchFlag:Mt,dynamicChildren:Nt,slotScopeIds:$t}=G;$t&&(st=st?st.concat($t):$t),$==null?(n(nt,X,J),n(Dt,X,J),k(G.children,X,Dt,Q,ut,vt,st,ot)):Mt>0&&Mt&64&&Nt&&$.dynamicChildren?(M($.dynamicChildren,Nt,X,Q,ut,vt,st),(G.key!=null||Q&&G===Q.subTree)&&i7($,G,!0)):et($,G,X,Dt,Q,ut,vt,st,ot)},V=($,G,X,J,Q,ut,vt,st,ot)=>{G.slotScopeIds=st,$==null?G.shapeFlag&512?Q.ctx.activate(G,X,J,vt,ot):N(G,X,J,Q,ut,vt,ot):j($,G,ot)},N=($,G,X,J,Q,ut,vt)=>{const st=$.component=iH($,J,Q);if(W8($)&&(st.ctx.renderer=kt),oH(st),st.asyncDep){if(Q&&Q.registerDep(st,Z),!$.el){const ot=st.subTree=xt(As);_(null,ot,G,X)}return}Z(st,$,G,X,Q,ut,vt)},j=($,G,X)=>{const J=G.component=$.component;if(gW($,G,X))if(J.asyncDep&&!J.asyncResolved){q(J,G,X);return}else J.next=G,cW(J.update),J.update();else G.el=$.el,J.vnode=G},Z=($,G,X,J,Q,ut,vt)=>{const st=()=>{if($.isMounted){let{next:Dt,bu:Mt,u:Nt,parent:$t,vnode:Kt}=$,me=Dt,_e;Hs($,!1),Dt?(Dt.el=Kt.el,q($,Dt,vt)):Dt=Kt,Mt&&kg(Mt),(_e=Dt.props&&Dt.props.onVnodeBeforeUpdate)&&Ji(_e,$t,Dt,Kt),Hs($,!0);const Te=dy($),Ir=$.subTree;$.subTree=Te,g(Ir,Te,f(Ir.el),pt(Ir),$,Q,ut),Dt.el=Te.el,me===null&&mW($,Te.el),Nt&&hn(Nt,Q),(_e=Dt.props&&Dt.props.onVnodeUpdated)&&hn(()=>Ji(_e,$t,Dt,Kt),Q)}else{let Dt;const{el:Mt,props:Nt}=G,{bm:$t,m:Kt,parent:me}=$,_e=cd(G);if(Hs($,!1),$t&&kg($t),!_e&&(Dt=Nt&&Nt.onVnodeBeforeMount)&&Ji(Dt,me,G),Hs($,!0),Mt&&ft){const Te=()=>{$.subTree=dy($),ft(Mt,$.subTree,$,Q,null)};_e?G.type.__asyncLoader().then(()=>!$.isUnmounted&&Te()):Te()}else{const Te=$.subTree=dy($);g(null,Te,X,J,$,Q,ut),G.el=Te.el}if(Kt&&hn(Kt,Q),!_e&&(Dt=Nt&&Nt.onVnodeMounted)){const Te=G;hn(()=>Ji(Dt,me,Te),Q)}(G.shapeFlag&256||me&&cd(me.vnode)&&me.vnode.shapeFlag&256)&&$.a&&hn($.a,Q),$.isMounted=!0,G=X=J=null}},ot=$.effect=new nP(st,()=>B8(nt),$.scope),nt=$.update=()=>ot.run();nt.id=$.uid,Hs($,!0),nt()},q=($,G,X)=>{G.component=$;const J=$.vnode.props;$.vnode=G,$.next=null,UW($,G.props,J,X),WW($,G.children,X),cf(),I1(void 0,$.update),ff()},et=($,G,X,J,Q,ut,vt,st,ot=!1)=>{const nt=$&&$.children,Dt=$?$.shapeFlag:0,Mt=G.children,{patchFlag:Nt,shapeFlag:$t}=G;if(Nt>0){if(Nt&128){Rt(nt,Mt,X,J,Q,ut,vt,st,ot);return}else if(Nt&256){Pt(nt,Mt,X,J,Q,ut,vt,st,ot);return}}$t&8?(Dt&16&&K(nt,Q,ut),Mt!==nt&&c(X,Mt)):Dt&16?$t&16?Rt(nt,Mt,X,J,Q,ut,vt,st,ot):K(nt,Q,ut,!0):(Dt&8&&c(X,""),$t&16&&k(Mt,X,J,Q,ut,vt,st,ot))},Pt=($,G,X,J,Q,ut,vt,st,ot)=>{$=$||xc,G=G||xc;const nt=$.length,Dt=G.length,Mt=Math.min(nt,Dt);let Nt;for(Nt=0;Nt<Mt;Nt++){const $t=G[Nt]=ot?us(G[Nt]):mo(G[Nt]);g($[Nt],$t,X,null,Q,ut,vt,st,ot)}nt>Dt?K($,Q,ut,!0,!1,Mt):k(G,X,J,Q,ut,vt,st,ot,Mt)},Rt=($,G,X,J,Q,ut,vt,st,ot)=>{let nt=0;const Dt=G.length;let Mt=$.length-1,Nt=Dt-1;for(;nt<=Mt&&nt<=Nt;){const $t=$[nt],Kt=G[nt]=ot?us(G[nt]):mo(G[nt]);if(Yf($t,Kt))g($t,Kt,X,null,Q,ut,vt,st,ot);else break;nt++}for(;nt<=Mt&&nt<=Nt;){const $t=$[Mt],Kt=G[Nt]=ot?us(G[Nt]):mo(G[Nt]);if(Yf($t,Kt))g($t,Kt,X,null,Q,ut,vt,st,ot);else break;Mt--,Nt--}if(nt>Mt){if(nt<=Nt){const $t=Nt+1,Kt=$t<Dt?G[$t].el:J;for(;nt<=Nt;)g(null,G[nt]=ot?us(G[nt]):mo(G[nt]),X,Kt,Q,ut,vt,st,ot),nt++}}else if(nt>Nt)for(;nt<=Mt;)St($[nt],Q,ut,!0),nt++;else{const $t=nt,Kt=nt,me=new Map;for(nt=Kt;nt<=Nt;nt++){const Yr=G[nt]=ot?us(G[nt]):mo(G[nt]);Yr.key!=null&&me.set(Yr.key,nt)}let _e,Te=0;const Ir=Nt-Kt+1;let qi=!1,sp=0;const Us=new Array(Ir);for(nt=0;nt<Ir;nt++)Us[nt]=0;for(nt=$t;nt<=Mt;nt++){const Yr=$[nt];if(Te>=Ir){St(Yr,Q,ut,!0);continue}let Nn;if(Yr.key!=null)Nn=me.get(Yr.key);else for(_e=Kt;_e<=Nt;_e++)if(Us[_e-Kt]===0&&Yf(Yr,G[_e])){Nn=_e;break}Nn===void 0?St(Yr,Q,ut,!0):(Us[Nn-Kt]=nt+1,Nn>=sp?sp=Nn:qi=!0,g(Yr,G[Nn],X,null,Q,ut,vt,st,ot),Te++)}const lp=qi?ZW(Us):xc;for(_e=lp.length-1,nt=Ir-1;nt>=0;nt--){const Yr=Kt+nt,Nn=G[Yr],Gs=Yr+1<Dt?G[Yr+1].el:J;Us[nt]===0?g(null,Nn,X,Gs,Q,ut,vt,st,ot):qi&&(_e<0||nt!==lp[_e]?wt(Nn,X,Gs,2):_e--)}}},wt=($,G,X,J,Q=null)=>{const{el:ut,type:vt,transition:st,children:ot,shapeFlag:nt}=$;if(nt&6){wt($.component.subTree,G,X,J);return}if(nt&128){$.suspense.move(G,X,J);return}if(nt&64){vt.move($,G,X,kt);return}if(vt===W){n(ut,G,X);for(let Mt=0;Mt<ot.length;Mt++)wt(ot[Mt],G,X,J);n($.anchor,G,X);return}if(vt===xg){w($,G,X);return}if(J!==2&&nt&1&&st)if(J===0)st.beforeEnter(ut),n(ut,G,X),hn(()=>st.enter(ut),Q);else{const{leave:Mt,delayLeave:Nt,afterLeave:$t}=st,Kt=()=>n(ut,G,X),me=()=>{Mt(ut,()=>{Kt(),$t&&$t()})};Nt?Nt(ut,Kt,me):me()}else n(ut,G,X)},St=($,G,X,J=!1,Q=!1)=>{const{type:ut,props:vt,ref:st,children:ot,dynamicChildren:nt,shapeFlag:Dt,patchFlag:Mt,dirs:Nt}=$;if(st!=null&&sS(st,null,X,$,!0),Dt&256){G.ctx.deactivate($);return}const $t=Dt&1&&Nt,Kt=!cd($);let me;if(Kt&&(me=vt&&vt.onVnodeBeforeUnmount)&&Ji(me,G,$),Dt&6)it($.component,X,J);else{if(Dt&128){$.suspense.unmount(X,J);return}$t&&Ws($,null,G,"beforeUnmount"),Dt&64?$.type.remove($,G,X,Q,kt,J):nt&&(ut!==W||Mt>0&&Mt&64)?K(nt,G,X,!1,!0):(ut===W&&Mt&384||!Q&&Dt&16)&&K(ot,G,X),J&&Ht($)}(Kt&&(me=vt&&vt.onVnodeUnmounted)||$t)&&hn(()=>{me&&Ji(me,G,$),$t&&Ws($,null,G,"unmounted")},X)},Ht=$=>{const{type:G,el:X,anchor:J,transition:Q}=$;if(G===W){Y(X,J);return}if(G===xg){T($);return}const ut=()=>{i(X),Q&&!Q.persisted&&Q.afterLeave&&Q.afterLeave()};if($.shapeFlag&1&&Q&&!Q.persisted){const{leave:vt,delayLeave:st}=Q,ot=()=>vt(X,ut);st?st($.el,ut,ot):ot()}else ut()},Y=($,G)=>{let X;for(;$!==G;)X=h($),i($),$=X;i(G)},it=($,G,X)=>{const{bum:J,scope:Q,update:ut,subTree:vt,um:st}=$;J&&kg(J),Q.stop(),ut&&(ut.active=!1,St(vt,$,G,X)),st&&hn(st,G),hn(()=>{$.isUnmounted=!0},G),G&&G.pendingBranch&&!G.isUnmounted&&$.asyncDep&&!$.asyncResolved&&$.suspenseId===G.pendingId&&(G.deps--,G.deps===0&&G.resolve())},K=($,G,X,J=!1,Q=!1,ut=0)=>{for(let vt=ut;vt<$.length;vt++)St($[vt],G,X,J,Q)},pt=$=>$.shapeFlag&6?pt($.component.subTree):$.shapeFlag&128?$.suspense.next():h($.anchor||$.el),Tt=($,G,X)=>{$==null?G._vnode&&St(G._vnode,null,null,!0):g(G._vnode||null,$,G,null,null,null,X),V8(),G._vnode=$},kt={p:g,um:St,m:wt,r:Ht,mt:N,mc:k,pc:et,pbc:M,n:pt,o:e};let lt,ft;return t&&([lt,ft]=t(kt)),{render:Tt,hydrate:lt,createApp:XW(Tt,lt)}}function Hs({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function i7(e,t,r=!1){const n=e.children,i=t.children;if(Bt(n)&&Bt(i))for(let o=0;o<n.length;o++){const a=n[o];let s=i[o];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=i[o]=us(i[o]),s.el=a.el),r||i7(a,s))}}function ZW(e){const t=e.slice(),r=[0];let n,i,o,a,s;const l=e.length;for(n=0;n<l;n++){const u=e[n];if(u!==0){if(i=r[r.length-1],e[i]<u){t[n]=i,r.push(n);continue}for(o=0,a=r.length-1;o<a;)s=o+a>>1,e[r[s]]<u?o=s+1:a=s;u<e[r[o]]&&(o>0&&(t[n]=r[o-1]),r[o]=n)}}for(o=r.length,a=r[o-1];o-- >0;)r[o]=a,a=t[a];return r}const KW=e=>e.__isTeleport,W=Symbol(void 0),dP=Symbol(void 0),As=Symbol(void 0),xg=Symbol(void 0),fd=[];let Pi=null;function I(e=!1){fd.push(Pi=e?null:[])}function JW(){fd.pop(),Pi=fd[fd.length-1]||null}let Gd=1;function iC(e){Gd+=e}function o7(e){return e.dynamicChildren=Gd>0?Pi||xc:null,JW(),Gd>0&&Pi&&Pi.push(e),e}function R(e,t,r,n,i,o){return o7(b(e,t,r,n,i,o,!0))}function va(e,t,r,n,i){return o7(xt(e,t,r,n,i,!0))}function ym(e){return e?e.__v_isVNode===!0:!1}function Yf(e,t){return e.type===t.type&&e.key===t.key}const F1="__vInternal",a7=({key:e})=>e!=null?e:null,Lg=({ref:e,ref_key:t,ref_for:r})=>e!=null?hr(e)||He(e)||Gt(e)?{i:Ur,r:e,k:t,f:!!r}:e:null;function b(e,t=null,r=null,n=0,i=null,o=e===W?0:1,a=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&a7(t),ref:t&&Lg(t),scopeId:R1,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null};return s?(pP(l,r),o&128&&e.normalize(l)):r&&(l.shapeFlag|=hr(r)?8:16),Gd>0&&!a&&Pi&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&Pi.push(l),l}const xt=QW;function QW(e,t=null,r=null,n=0,i=null,o=!1){if((!e||e===IW)&&(e=As),ym(e)){const s=jc(e,t,!0);return r&&pP(s,r),Gd>0&&!o&&Pi&&(s.shapeFlag&6?Pi[Pi.indexOf(e)]=s:Pi.push(s)),s.patchFlag|=-2,s}if(cH(e)&&(e=e.__vccOpts),t){t=tH(t);let{class:s,style:l}=t;s&&!hr(s)&&(t.class=en(s)),Qe(l)&&(I8(l)&&!Bt(l)&&(l=nn({},l)),t.style=Nl(l))}const a=hr(e)?1:_W(e)?128:KW(e)?64:Qe(e)?4:Gt(e)?2:0;return b(e,t,r,n,i,a,o,!0)}function tH(e){return e?I8(e)||F1 in e?nn({},e):e:null}function jc(e,t,r=!1){const{props:n,ref:i,patchFlag:o,children:a}=e,s=t?eH(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:s,key:s&&a7(s),ref:t&&t.ref?r&&i?Bt(i)?i.concat(Lg(t)):[i,Lg(t)]:Lg(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==W?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&jc(e.ssContent),ssFallback:e.ssFallback&&jc(e.ssFallback),el:e.el,anchor:e.anchor}}function z(e=" ",t=0){return xt(dP,null,e,t)}function B1(e,t){const r=xt(xg,null,e);return r.staticCount=t,r}function tt(e="",t=!1){return t?(I(),va(As,null,e)):xt(As,null,e)}function mo(e){return e==null||typeof e=="boolean"?xt(As):Bt(e)?xt(W,null,e.slice()):typeof e=="object"?us(e):xt(dP,null,String(e))}function us(e){return e.el===null||e.memo?e:jc(e)}function pP(e,t){let r=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(Bt(t))r=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),pP(e,i()),i._c&&(i._d=!0));return}else{r=32;const i=t._;!i&&!(F1 in t)?t._ctx=Ur:i===3&&Ur&&(Ur.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Gt(t)?(t={default:t,_ctx:Ur},r=32):(t=String(t),n&64?(r=16,t=[z(t)]):r=8);e.children=t,e.shapeFlag|=r}function eH(...e){const t={};for(let r=0;r<e.length;r++){const n=e[r];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=en([t.class,n.class]));else if(i==="style")t.style=Nl([t.style,n.style]);else if(k1(i)){const o=t[i],a=n[i];a&&o!==a&&!(Bt(o)&&o.includes(a))&&(t[i]=o?[].concat(o,a):a)}else i!==""&&(t[i]=n[i])}return t}function Ji(e,t,r,n=null){Li(e,t,7,[r,n])}const rH=n7();let nH=0;function iH(e,t,r){const n=e.type,i=(t?t.appContext:e.appContext)||rH,o={uid:nH++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new y8(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Q8(n,i),emitsOptions:G8(n,i),emit:null,emitted:null,propsDefaults:Le,inheritAttrs:n.inheritAttrs,ctx:Le,data:Le,props:Le,attrs:Le,slots:Le,refs:Le,setupState:Le,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=dW.bind(null,o),e.ce&&e.ce(o),o}let fr=null;const vP=()=>fr||Ur,Wc=e=>{fr=e,e.scope.on()},Bl=()=>{fr&&fr.scope.off(),fr=null};function s7(e){return e.vnode.shapeFlag&4}let jd=!1;function oH(e,t=!1){jd=t;const{props:r,children:n}=e.vnode,i=s7(e);VW(e,r,i,t),jW(e,n);const o=i?aH(e,t):void 0;return jd=!1,o}function aH(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=bi(new Proxy(e.ctx,DW));const{setup:n}=r;if(n){const i=e.setupContext=n.length>1?lH(e):null;Wc(e),cf();const o=bs(n,e,0,[e.props,i]);if(ff(),Bl(),g8(o)){if(o.then(Bl,Bl),t)return o.then(a=>{oC(e,a,t)}).catch(a=>{L1(a,e,0)});e.asyncDep=o}else oC(e,o,t)}else l7(e,t)}function oC(e,t,r){Gt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Qe(t)&&(e.setupState=N8(t)),l7(e,r)}let aC;function l7(e,t,r){const n=e.type;if(!e.render){if(!t&&aC&&!n.render){const i=n.template;if(i){const{isCustomElement:o,compilerOptions:a}=e.appContext.config,{delimiters:s,compilerOptions:l}=n,u=nn(nn({isCustomElement:o,delimiters:s},a),l);n.render=aC(i,u)}}e.render=n.render||xi}Wc(e),cf(),NW(e),ff(),Bl()}function sH(e){return new Proxy(e.attrs,{get(t,r){return Ln(e,"get","$attrs"),t[r]}})}function lH(e){const t=n=>{e.exposed=n||{}};let r;return{get attrs(){return r||(r=sH(e))},slots:e.slots,emit:e.emit,expose:t}}function $1(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(N8(bi(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in mm)return mm[r](e)}}))}function uH(e,t=!0){return Gt(e)?e.displayName||e.name:e.name||t&&e.__name}function cH(e){return Gt(e)&&"__vccOpts"in e}const Ye=(e,t)=>sW(e,t,jd);function gP(e,t,r){const n=arguments.length;return n===2?Qe(t)&&!Bt(t)?ym(t)?xt(e,null,[t]):xt(e,t):xt(e,null,t):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&ym(r)&&(r=[r]),xt(e,t,r))}const fH="3.2.37",hH="http://www.w3.org/2000/svg",kl=typeof document<"u"?document:null,sC=kl&&kl.createElement("template"),dH={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const i=t?kl.createElementNS(hH,e):kl.createElement(e,r?{is:r}:void 0);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>kl.createTextNode(e),createComment:e=>kl.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>kl.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,r,n,i,o){const a=r?r.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),r),!(i===o||!(i=i.nextSibling)););else{sC.innerHTML=n?`<svg>${e}</svg>`:e;const s=sC.content;if(n){const l=s.firstChild;for(;l.firstChild;)s.appendChild(l.firstChild);s.removeChild(l)}t.insertBefore(s,r)}return[a?a.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}};function pH(e,t,r){const n=e._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}function vH(e,t,r){const n=e.style,i=hr(r);if(r&&!i){for(const o in r)lS(n,o,r[o]);if(t&&!hr(t))for(const o in t)r[o]==null&&lS(n,o,"")}else{const o=n.display;i?t!==r&&(n.cssText=r):t&&e.removeAttribute("style"),"_vod"in e&&(n.display=o)}}const lC=/\s*!important$/;function lS(e,t,r){if(Bt(r))r.forEach(n=>lS(e,t,n));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const n=gH(e,t);lC.test(r)?e.setProperty(uf(n),r.replace(lC,""),"important"):e[n]=r}}const uC=["Webkit","Moz","ms"],py={};function gH(e,t){const r=py[t];if(r)return r;let n=Co(t);if(n!=="filter"&&n in e)return py[t]=n;n=C1(n);for(let i=0;i<uC.length;i++){const o=uC[i]+n;if(o in e)return py[t]=o}return t}const cC="http://www.w3.org/1999/xlink";function mH(e,t,r,n,i){if(n&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(cC,t.slice(6,t.length)):e.setAttributeNS(cC,t,r);else{const o=_j(t);r==null||o&&!p8(r)?e.removeAttribute(t):e.setAttribute(t,o?"":r)}}function _H(e,t,r,n,i,o,a){if(t==="innerHTML"||t==="textContent"){n&&a(n,i,o),e[t]=r==null?"":r;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=r;const l=r==null?"":r;(e.value!==l||e.tagName==="OPTION")&&(e.value=l),r==null&&e.removeAttribute(t);return}let s=!1;if(r===""||r==null){const l=typeof e[t];l==="boolean"?r=p8(r):r==null&&l==="string"?(r="",s=!0):l==="number"&&(r=0,s=!0)}try{e[t]=r}catch{}s&&e.removeAttribute(t)}const[u7,yH]=(()=>{let e=Date.now,t=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const r=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(r&&Number(r[1])<=53)}return[e,t]})();let uS=0;const bH=Promise.resolve(),wH=()=>{uS=0},SH=()=>uS||(bH.then(wH),uS=u7());function oa(e,t,r,n){e.addEventListener(t,r,n)}function TH(e,t,r,n){e.removeEventListener(t,r,n)}function PH(e,t,r,n,i=null){const o=e._vei||(e._vei={}),a=o[t];if(n&&a)a.value=n;else{const[s,l]=EH(t);if(n){const u=o[t]=kH(n,i);oa(e,s,u,l)}else a&&(TH(e,s,a,l),o[t]=void 0)}}const fC=/(?:Once|Passive|Capture)$/;function EH(e){let t;if(fC.test(e)){t={};let r;for(;r=e.match(fC);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[uf(e.slice(2)),t]}function kH(e,t){const r=n=>{const i=n.timeStamp||u7();(yH||i>=r.attached-1)&&Li(AH(n,r.value),t,5,[n])};return r.value=e,r.attached=SH(),r}function AH(e,t){if(Bt(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const hC=/^on[a-z]/,CH=(e,t,r,n,i=!1,o,a,s,l)=>{t==="class"?pH(e,n,i):t==="style"?vH(e,r,n):k1(t)?QT(t)||PH(e,t,r,n,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):MH(e,t,n,i))?_H(e,t,n,o,a,s,l):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),mH(e,t,n,i))};function MH(e,t,r,n){return n?!!(t==="innerHTML"||t==="textContent"||t in e&&hC.test(t)&&Gt(r)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||hC.test(t)&&hr(r)?!1:t in e}const Cs=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Bt(t)?r=>kg(t,r):t};function xH(e){e.target.composing=!0}function dC(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const ve={created(e,{modifiers:{lazy:t,trim:r,number:n}},i){e._assign=Cs(i);const o=n||i.props&&i.props.type==="number";oa(e,t?"change":"input",a=>{if(a.target.composing)return;let s=e.value;r&&(s=s.trim()),o&&(s=pm(s)),e._assign(s)}),r&&oa(e,"change",()=>{e.value=e.value.trim()}),t||(oa(e,"compositionstart",xH),oa(e,"compositionend",dC),oa(e,"change",dC))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:r,trim:n,number:i}},o){if(e._assign=Cs(o),e.composing||document.activeElement===e&&e.type!=="range"&&(r||n&&e.value.trim()===t||(i||e.type==="number")&&pm(e.value)===t))return;const a=t==null?"":t;e.value!==a&&(e.value=a)}},ar={deep:!0,created(e,t,r){e._assign=Cs(r),oa(e,"change",()=>{const n=e._modelValue,i=Hc(e),o=e.checked,a=e._assign;if(Bt(n)){const s=JT(n,i),l=s!==-1;if(o&&!l)a(n.concat(i));else if(!o&&l){const u=[...n];u.splice(s,1),a(u)}}else if(lf(n)){const s=new Set(n);o?s.add(i):s.delete(i),a(s)}else a(c7(e,o))})},mounted:pC,beforeUpdate(e,t,r){e._assign=Cs(r),pC(e,t,r)}};function pC(e,{value:t,oldValue:r},n){e._modelValue=t,Bt(t)?e.checked=JT(t,n.props.value)>-1:lf(t)?e.checked=t.has(n.props.value):t!==r&&(e.checked=Yl(t,c7(e,!0)))}const hd={created(e,{value:t},r){e.checked=Yl(t,r.props.value),e._assign=Cs(r),oa(e,"change",()=>{e._assign(Hc(e))})},beforeUpdate(e,{value:t,oldValue:r},n){e._assign=Cs(n),t!==r&&(e.checked=Yl(t,n.props.value))}},Sr={deep:!0,created(e,{value:t,modifiers:{number:r}},n){const i=lf(t);oa(e,"change",()=>{const o=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>r?pm(Hc(a)):Hc(a));e._assign(e.multiple?i?new Set(o):o:o[0])}),e._assign=Cs(n)},mounted(e,{value:t}){vC(e,t)},beforeUpdate(e,t,r){e._assign=Cs(r)},updated(e,{value:t}){vC(e,t)}};function vC(e,t){const r=e.multiple;if(!(r&&!Bt(t)&&!lf(t))){for(let n=0,i=e.options.length;n<i;n++){const o=e.options[n],a=Hc(o);if(r)Bt(t)?o.selected=JT(t,a)>-1:o.selected=t.has(a);else if(Yl(Hc(o),t)){e.selectedIndex!==n&&(e.selectedIndex=n);return}}!r&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Hc(e){return"_value"in e?e._value:e.value}function c7(e,t){const r=t?"_trueValue":"_falseValue";return r in e?e[r]:t}const LH=["ctrl","shift","alt","meta"],IH={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>LH.some(r=>e[`${r}Key`]&&!t.includes(r))},bm=(e,t)=>(r,...n)=>{for(let i=0;i<t.length;i++){const o=IH[t[i]];if(o&&o(r,t))return}return e(r,...n)},OH={beforeMount(e,{value:t},{transition:r}){e._vod=e.style.display==="none"?"":e.style.display,r&&t?r.beforeEnter(e):qf(e,t)},mounted(e,{value:t},{transition:r}){r&&t&&r.enter(e)},updated(e,{value:t,oldValue:r},{transition:n}){!t!=!r&&(n?t?(n.beforeEnter(e),qf(e,!0),n.enter(e)):n.leave(e,()=>{qf(e,!1)}):qf(e,t))},beforeUnmount(e,{value:t}){qf(e,t)}};function qf(e,t){e.style.display=t?e._vod:"none"}const RH=nn({patchProp:CH},dH);let gC;function DH(){return gC||(gC=YW(RH))}const NH=(...e)=>{const t=DH().createApp(...e),{mount:r}=t;return t.mount=n=>{const i=FH(n);if(!i)return;const o=t._component;!Gt(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.innerHTML="";const a=r(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},t};function FH(e){return hr(e)?document.querySelector(e):e}var BH=!1;function bp(e,t,r){return Array.isArray(e)?(e.length=Math.max(e.length,t),e.splice(t,1,r),r):(e[t]=r,r)}function vy(e,t){if(Array.isArray(e)){e.splice(t,1);return}delete e[t]}function $H(){return f7().__VUE_DEVTOOLS_GLOBAL_HOOK__}function f7(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const zH=typeof Proxy=="function",VH="devtools-plugin:setup",UH="plugin:settings:set";let Lu,cS;function GH(){var e;return Lu!==void 0||(typeof window<"u"&&window.performance?(Lu=!0,cS=window.performance):typeof global<"u"&&((e=global.perf_hooks)===null||e===void 0?void 0:e.performance)?(Lu=!0,cS=global.perf_hooks.performance):Lu=!1),Lu}function jH(){return GH()?cS.now():Date.now()}class WH{constructor(t,r){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=r;const n={};if(t.settings)for(const a in t.settings){const s=t.settings[a];n[a]=s.defaultValue}const i=`__vue-devtools-plugin-settings__${t.id}`;let o=Object.assign({},n);try{const a=localStorage.getItem(i),s=JSON.parse(a);Object.assign(o,s)}catch{}this.fallbacks={getSettings(){return o},setSettings(a){try{localStorage.setItem(i,JSON.stringify(a))}catch{}o=a},now(){return jH()}},r&&r.on(UH,(a,s)=>{a===this.plugin.id&&this.fallbacks.setSettings(s)}),this.proxiedOn=new Proxy({},{get:(a,s)=>this.target?this.target.on[s]:(...l)=>{this.onQueue.push({method:s,args:l})}}),this.proxiedTarget=new Proxy({},{get:(a,s)=>this.target?this.target[s]:s==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(s)?(...l)=>(this.targetQueue.push({method:s,args:l,resolve:()=>{}}),this.fallbacks[s](...l)):(...l)=>new Promise(u=>{this.targetQueue.push({method:s,args:l,resolve:u})})})}async setRealTarget(t){this.target=t;for(const r of this.onQueue)this.target.on[r.method](...r.args);for(const r of this.targetQueue)r.resolve(await this.target[r.method](...r.args))}}function h7(e,t){const r=e,n=f7(),i=$H(),o=zH&&r.enableEarlyProxy;if(i&&(n.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!o))i.emit(VH,e,t);else{const a=o?new WH(r,i):null;(n.__VUE_DEVTOOLS_PLUGINS__=n.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:r,setupFn:t,proxy:a}),a&&t(a.proxiedTarget)}}/*!
  * pinia v2.0.18
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let fS;const Wd=e=>fS=e,d7=Symbol("pinia");function ql(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Eo;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Eo||(Eo={}));const fs=typeof window<"u",mC=(()=>typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:typeof globalThis=="object"?globalThis:{HTMLElement:null})();function HH(e,{autoBom:t=!1}={}){return t&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}function mP(e,t,r){const n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){g7(n.response,t,r)},n.onerror=function(){console.error("could not download file")},n.send()}function p7(e){const t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Ig(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{const r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(r)}}const Og=typeof navigator=="object"?navigator:{userAgent:""},v7=(()=>/Macintosh/.test(Og.userAgent)&&/AppleWebKit/.test(Og.userAgent)&&!/Safari/.test(Og.userAgent))(),g7=fs?typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype&&!v7?XH:"msSaveOrOpenBlob"in Og?YH:qH:()=>{};function XH(e,t="download",r){const n=document.createElement("a");n.download=t,n.rel="noopener",typeof e=="string"?(n.href=e,n.origin!==location.origin?p7(n.href)?mP(e,t,r):(n.target="_blank",Ig(n)):Ig(n)):(n.href=URL.createObjectURL(e),setTimeout(function(){URL.revokeObjectURL(n.href)},4e4),setTimeout(function(){Ig(n)},0))}function YH(e,t="download",r){if(typeof e=="string")if(p7(e))mP(e,t,r);else{const n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){Ig(n)})}else navigator.msSaveOrOpenBlob(HH(e,r),t)}function qH(e,t,r,n){if(n=n||open("","_blank"),n&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return mP(e,t,r);const i=e.type==="application/octet-stream",o=/constructor/i.test(String(mC.HTMLElement))||"safari"in mC,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&o||v7)&&typeof FileReader<"u"){const s=new FileReader;s.onloadend=function(){let l=s.result;if(typeof l!="string")throw n=null,new Error("Wrong reader.result type");l=a?l:l.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=l:location.assign(l),n=null},s.readAsDataURL(e)}else{const s=URL.createObjectURL(e);n?n.location.assign(s):location.href=s,n=null,setTimeout(function(){URL.revokeObjectURL(s)},4e4)}}function ur(e,t){const r="\u{1F34D} "+e;typeof __VUE_DEVTOOLS_TOAST__=="function"?__VUE_DEVTOOLS_TOAST__(r,t):t==="error"?console.error(r):t==="warn"?console.warn(r):console.log(r)}function _P(e){return"_a"in e&&"install"in e}function m7(){if(!("clipboard"in navigator))return ur("Your browser doesn't support the Clipboard API","error"),!0}function _7(e){return e instanceof Error&&e.message.toLowerCase().includes("document is not focused")?(ur('You need to activate the "Emulate a focused page" setting in the "Rendering" panel of devtools.',"warn"),!0):!1}async function ZH(e){if(!m7())try{await navigator.clipboard.writeText(JSON.stringify(e.state.value)),ur("Global state copied to clipboard.")}catch(t){if(_7(t))return;ur("Failed to serialize the state. Check the console for more details.","error"),console.error(t)}}async function KH(e){if(!m7())try{e.state.value=JSON.parse(await navigator.clipboard.readText()),ur("Global state pasted from clipboard.")}catch(t){if(_7(t))return;ur("Failed to deserialize the state from clipboard. Check the console for more details.","error"),console.error(t)}}async function JH(e){try{g7(new Blob([JSON.stringify(e.state.value)],{type:"text/plain;charset=utf-8"}),"pinia-state.json")}catch(t){ur("Failed to export the state as JSON. Check the console for more details.","error"),console.error(t)}}let Go;function QH(){Go||(Go=document.createElement("input"),Go.type="file",Go.accept=".json");function e(){return new Promise((t,r)=>{Go.onchange=async()=>{const n=Go.files;if(!n)return t(null);const i=n.item(0);return t(i?{text:await i.text(),file:i}:null)},Go.oncancel=()=>t(null),Go.onerror=r,Go.click()})}return e}async function tX(e){try{const r=await(await QH())();if(!r)return;const{text:n,file:i}=r;e.state.value=JSON.parse(n),ur(`Global state imported from "${i.name}".`)}catch(t){ur("Failed to export the state as JSON. Check the console for more details.","error"),console.error(t)}}function gi(e){return{_custom:{display:e}}}const y7="\u{1F34D} Pinia (root)",hS="_root";function eX(e){return _P(e)?{id:hS,label:y7}:{id:e.$id,label:e.$id}}function rX(e){if(_P(e)){const r=Array.from(e._s.keys()),n=e._s;return{state:r.map(o=>({editable:!0,key:o,value:e.state.value[o]})),getters:r.filter(o=>n.get(o)._getters).map(o=>{const a=n.get(o);return{editable:!1,key:o,value:a._getters.reduce((s,l)=>(s[l]=a[l],s),{})}})}}const t={state:Object.keys(e.$state).map(r=>({editable:!0,key:r,value:e.$state[r]}))};return e._getters&&e._getters.length&&(t.getters=e._getters.map(r=>({editable:!1,key:r,value:e[r]}))),e._customProperties.size&&(t.customProperties=Array.from(e._customProperties).map(r=>({editable:!0,key:r,value:e[r]}))),t}function nX(e){return e?Array.isArray(e)?e.reduce((t,r)=>(t.keys.push(r.key),t.operations.push(r.type),t.oldValue[r.key]=r.oldValue,t.newValue[r.key]=r.newValue,t),{oldValue:{},keys:[],operations:[],newValue:{}}):{operation:gi(e.type),key:gi(e.key),oldValue:e.oldValue,newValue:e.newValue}:{}}function iX(e){switch(e){case Eo.direct:return"mutation";case Eo.patchFunction:return"$patch";case Eo.patchObject:return"$patch";default:return"unknown"}}let _c=!0;const Rg=[],Sl="pinia:mutations",Nr="pinia",wm=e=>"\u{1F34D} "+e;function oX(e,t){h7({id:"dev.esm.pinia",label:"Pinia \u{1F34D}",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:Rg,app:e},r=>{typeof r.now!="function"&&ur("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),r.addTimelineLayer({id:Sl,label:"Pinia \u{1F34D}",color:15064968}),r.addInspector({id:Nr,label:"Pinia \u{1F34D}",icon:"storage",treeFilterPlaceholder:"Search stores",actions:[{icon:"content_copy",action:()=>{ZH(t)},tooltip:"Serialize and copy the state"},{icon:"content_paste",action:async()=>{await KH(t),r.sendInspectorTree(Nr),r.sendInspectorState(Nr)},tooltip:"Replace the state with the content of your clipboard"},{icon:"save",action:()=>{JH(t)},tooltip:"Save the state as a JSON file"},{icon:"folder_open",action:async()=>{await tX(t),r.sendInspectorTree(Nr),r.sendInspectorState(Nr)},tooltip:"Import the state from a JSON file"}],nodeActions:[{icon:"restore",tooltip:"Reset the state (option store only)",action:n=>{const i=t._s.get(n);i?i._isOptionsAPI?(i.$reset(),ur(`Store "${n}" reset.`)):ur(`Cannot reset "${n}" store because it's a setup store.`,"warn"):ur(`Cannot reset "${n}" store because it wasn't found.`,"warn")}}]}),r.on.inspectComponent((n,i)=>{const o=n.componentInstance&&n.componentInstance.proxy;if(o&&o._pStores){const a=n.componentInstance.proxy._pStores;Object.values(a).forEach(s=>{n.instanceData.state.push({type:wm(s.$id),key:"state",editable:!0,value:s._isOptionsAPI?{_custom:{value:ce(s.$state),actions:[{icon:"restore",tooltip:"Reset the state of this store",action:()=>s.$reset()}]}}:Object.keys(s.$state).reduce((l,u)=>(l[u]=s.$state[u],l),{})}),s._getters&&s._getters.length&&n.instanceData.state.push({type:wm(s.$id),key:"getters",editable:!1,value:s._getters.reduce((l,u)=>{try{l[u]=s[u]}catch(c){l[u]=c}return l},{})})})}}),r.on.getInspectorTree(n=>{if(n.app===e&&n.inspectorId===Nr){let i=[t];i=i.concat(Array.from(t._s.values())),n.rootNodes=(n.filter?i.filter(o=>"$id"in o?o.$id.toLowerCase().includes(n.filter.toLowerCase()):y7.toLowerCase().includes(n.filter.toLowerCase())):i).map(eX)}}),r.on.getInspectorState(n=>{if(n.app===e&&n.inspectorId===Nr){const i=n.nodeId===hS?t:t._s.get(n.nodeId);if(!i)return;i&&(n.state=rX(i))}}),r.on.editInspectorState((n,i)=>{if(n.app===e&&n.inspectorId===Nr){const o=n.nodeId===hS?t:t._s.get(n.nodeId);if(!o)return ur(`store "${n.nodeId}" not found`,"error");const{path:a}=n;_P(o)?a.unshift("state"):(a.length!==1||!o._customProperties.has(a[0])||a[0]in o.$state)&&a.unshift("$state"),_c=!1,n.set(o,a,n.state.value),_c=!0}}),r.on.editComponentState(n=>{if(n.type.startsWith("\u{1F34D}")){const i=n.type.replace(/^\s*/,""),o=t._s.get(i);if(!o)return ur(`store "${i}" not found`,"error");const{path:a}=n;if(a[0]!=="state")return ur(`Invalid path for store "${i}":
${a}
Only state can be modified.`);a[0]="$state",_c=!1,n.set(o,a,n.state.value),_c=!0}})})}function aX(e,t){Rg.includes(wm(t.$id))||Rg.push(wm(t.$id)),h7({id:"dev.esm.pinia",label:"Pinia \u{1F34D}",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:Rg,app:e,settings:{logStoreChanges:{label:"Notify about new/deleted stores",type:"boolean",defaultValue:!0}}},r=>{const n=typeof r.now=="function"?r.now.bind(r):Date.now;t.$onAction(({after:a,onError:s,name:l,args:u})=>{const c=b7++;r.addTimelineEvent({layerId:Sl,event:{time:n(),title:"\u{1F6EB} "+l,subtitle:"start",data:{store:gi(t.$id),action:gi(l),args:u},groupId:c}}),a(f=>{Al=void 0,r.addTimelineEvent({layerId:Sl,event:{time:n(),title:"\u{1F6EC} "+l,subtitle:"end",data:{store:gi(t.$id),action:gi(l),args:u,result:f},groupId:c}})}),s(f=>{Al=void 0,r.addTimelineEvent({layerId:Sl,event:{time:n(),logType:"error",title:"\u{1F4A5} "+l,subtitle:"end",data:{store:gi(t.$id),action:gi(l),args:u,error:f},groupId:c}})})},!0),t._customProperties.forEach(a=>{wo(()=>br(t[a]),(s,l)=>{r.notifyComponentUpdate(),r.sendInspectorState(Nr),_c&&r.addTimelineEvent({layerId:Sl,event:{time:n(),title:"Change",subtitle:a,data:{newValue:s,oldValue:l},groupId:Al}})},{deep:!0})}),t.$subscribe(({events:a,type:s},l)=>{if(r.notifyComponentUpdate(),r.sendInspectorState(Nr),!_c)return;const u={time:n(),title:iX(s),data:{store:gi(t.$id),...nX(a)},groupId:Al};Al=void 0,s===Eo.patchFunction?u.subtitle="\u2935\uFE0F":s===Eo.patchObject?u.subtitle="\u{1F9E9}":a&&!Array.isArray(a)&&(u.subtitle=a.type),a&&(u.data["rawEvent(s)"]={_custom:{display:"DebuggerEvent",type:"object",tooltip:"raw DebuggerEvent[]",value:a}}),r.addTimelineEvent({layerId:Sl,event:u})},{detached:!0,flush:"sync"});const i=t._hotUpdate;t._hotUpdate=bi(a=>{i(a),r.addTimelineEvent({layerId:Sl,event:{time:n(),title:"\u{1F525} "+t.$id,subtitle:"HMR update",data:{store:gi(t.$id),info:gi("HMR update")}}}),r.notifyComponentUpdate(),r.sendInspectorTree(Nr),r.sendInspectorState(Nr)});const{$dispose:o}=t;t.$dispose=()=>{o(),r.notifyComponentUpdate(),r.sendInspectorTree(Nr),r.sendInspectorState(Nr),r.getSettings().logStoreChanges&&ur(`Disposed "${t.$id}" store \u{1F5D1}`)},r.notifyComponentUpdate(),r.sendInspectorTree(Nr),r.sendInspectorState(Nr),r.getSettings().logStoreChanges&&ur(`"${t.$id}" store installed \u{1F195}`)})}let b7=0,Al;function _C(e,t){const r=t.reduce((n,i)=>(n[i]=ce(e)[i],n),{});for(const n in r)e[n]=function(){const i=b7,o=new Proxy(e,{get(...a){return Al=i,Reflect.get(...a)},set(...a){return Al=i,Reflect.set(...a)}});return r[n].apply(o,arguments)}}function sX({app:e,store:t,options:r}){if(!t.$id.startsWith("__hot:")){if(r.state&&(t._isOptionsAPI=!0),typeof r.state=="function"){_C(t,Object.keys(r.actions));const n=t._hotUpdate;ce(t)._hotUpdate=function(i){n.apply(this,arguments),_C(t,Object.keys(i._hmrPayload.actions))}}aX(e,t)}}function lX(){const e=b8(!0),t=e.run(()=>x1({}));let r=[],n=[];const i=bi({install(o){Wd(i),i._a=o,o.provide(d7,i),o.config.globalProperties.$pinia=i,fs&&oX(o,i),n.forEach(a=>r.push(a)),n=[]},use(o){return!this._a&&!BH?n.push(o):r.push(o),this},_p:r,_a:null,_e:e,_s:new Map,state:t});return fs&&!0&&typeof Proxy<"u"&&i.use(sX),i}function w7(e,t){for(const r in t){const n=t[r];if(!(r in e))continue;const i=e[r];ql(i)&&ql(n)&&!He(n)&&!ca(n)?e[r]=w7(i,n):e[r]=n}return e}const uX=()=>{};function yC(e,t,r,n=uX){e.push(t);const i=()=>{const o=e.indexOf(t);o>-1&&(e.splice(o,1),n())};return!r&&vP()&&N1(i),i}function Iu(e,...t){e.slice().forEach(r=>{r(...t)})}function dS(e,t){for(const r in t){if(!t.hasOwnProperty(r))continue;const n=t[r],i=e[r];ql(i)&&ql(n)&&e.hasOwnProperty(r)&&!He(n)&&!ca(n)?e[r]=dS(i,n):e[r]=n}return e}const cX=Symbol("pinia:skipHydration");function fX(e){return!ql(e)||!e.hasOwnProperty(cX)}const{assign:yi}=Object;function bC(e){return!!(He(e)&&e.effect)}function wC(e,t,r,n){const{state:i,actions:o,getters:a}=t,s=r.state.value[e];let l;function u(){!s&&!n&&(r.state.value[e]=i?i():{});const c=tS(n?x1(i?i():{}).value:r.state.value[e]);return yi(c,o,Object.keys(a||{}).reduce((f,h)=>(h in c&&console.warn(`[\u{1F34D}]: A getter cannot have the same name as another state property. Rename one of them. Found with "${h}" in store "${e}".`),f[h]=bi(Ye(()=>{Wd(r);const d=r._s.get(e);return a[h].call(d,d)})),f),{}))}return l=pS(e,u,t,r,n,!0),l.$reset=function(){const f=i?i():{};this.$patch(h=>{yi(h,f)})},l}function pS(e,t,r={},n,i,o){let a;const s=yi({actions:{}},r);if(!n._e.active)throw new Error("Pinia destroyed");const l={deep:!0};l.onTrigger=k=>{u?d=k:u==!1&&!P._hotUpdating&&(Array.isArray(d)?d.push(k):console.error("\u{1F34D} debuggerEvents should be an array. This is most likely an internal Pinia bug."))};let u,c,f=bi([]),h=bi([]),d;const p=n.state.value[e];!o&&!p&&!i&&(n.state.value[e]={});const v=x1({});let g;function m(k){let C;u=c=!1,d=[],typeof k=="function"?(k(n.state.value[e]),C={type:Eo.patchFunction,storeId:e,events:d}):(dS(n.state.value[e],k),C={type:Eo.patchObject,payload:k,storeId:e,events:d});const M=g=Symbol();Vd().then(()=>{g===M&&(u=!0)}),c=!0,Iu(f,C,n.state.value[e])}const _=()=>{throw new Error(`\u{1F34D}: Store "${e}" is built using the setup syntax and does not implement $reset().`)};function y(){a.stop(),f=[],h=[],n._s.delete(e)}function w(k,C){return function(){Wd(n);const M=Array.from(arguments),D=[],B=[];function V(Z){D.push(Z)}function N(Z){B.push(Z)}Iu(h,{args:M,name:k,store:P,after:V,onError:N});let j;try{j=C.apply(this&&this.$id===e?this:P,M)}catch(Z){throw Iu(B,Z),Z}return j instanceof Promise?j.then(Z=>(Iu(D,Z),Z)).catch(Z=>(Iu(B,Z),Promise.reject(Z))):(Iu(D,j),j)}}const T=bi({actions:{},getters:{},state:[],hotState:v}),S={_p:n,$id:e,$onAction:yC.bind(null,h),$patch:m,$reset:_,$subscribe(k,C={}){const M=yC(f,k,C.detached,()=>D()),D=a.run(()=>wo(()=>n.state.value[e],B=>{(C.flush==="sync"?c:u)&&k({storeId:e,type:Eo.direct,events:d},B)},yi({},l,C)));return M},$dispose:y},P=hf(yi(fs?{_customProperties:bi(new Set),_hmrPayload:T}:{},S));n._s.set(e,P);const A=n._e.run(()=>(a=b8(),a.run(()=>t())));for(const k in A){const C=A[k];if(He(C)&&!bC(C)||ca(C))i?bp(v.value,k,Cg(A,k)):o||(p&&fX(C)&&(He(C)?C.value=p[k]:dS(C,p[k])),n.state.value[e][k]=C),T.state.push(k);else if(typeof C=="function"){const M=i?C:w(k,C);A[k]=M,T.actions[k]=C,s.actions[k]=C}else bC(C)&&(T.getters[k]=o?r.getters[k]:C,fs&&(A._getters||(A._getters=bi([]))).push(k))}yi(P,A),yi(ce(P),A),Object.defineProperty(P,"$state",{get:()=>i?v.value:n.state.value[e],set:k=>{if(i)throw new Error("cannot set hotState");m(C=>{yi(C,k)})}});{P._hotUpdate=bi(C=>{P._hotUpdating=!0,C._hmrPayload.state.forEach(M=>{if(M in P.$state){const D=C.$state[M],B=P.$state[M];typeof D=="object"&&ql(D)&&ql(B)?w7(D,B):C.$state[M]=B}bp(P,M,Cg(C.$state,M))}),Object.keys(P.$state).forEach(M=>{M in C.$state||vy(P,M)}),u=!1,c=!1,n.state.value[e]=Cg(C._hmrPayload,"hotState"),c=!0,Vd().then(()=>{u=!0});for(const M in C._hmrPayload.actions){const D=C[M];bp(P,M,w(M,D))}for(const M in C._hmrPayload.getters){const D=C._hmrPayload.getters[M],B=o?Ye(()=>(Wd(n),D.call(P,P))):D;bp(P,M,B)}Object.keys(P._hmrPayload.getters).forEach(M=>{M in C._hmrPayload.getters||vy(P,M)}),Object.keys(P._hmrPayload.actions).forEach(M=>{M in C._hmrPayload.actions||vy(P,M)}),P._hmrPayload=C._hmrPayload,P._getters=C._getters,P._hotUpdating=!1});const k={writable:!0,configurable:!0,enumerable:!1};fs&&["_p","_hmrPayload","_getters","_customProperties"].forEach(C=>{Object.defineProperty(P,C,{value:P[C],...k})})}return n._p.forEach(k=>{if(fs){const C=a.run(()=>k({store:P,app:n._a,pinia:n,options:s}));Object.keys(C||{}).forEach(M=>P._customProperties.add(M)),yi(P,C)}else yi(P,a.run(()=>k({store:P,app:n._a,pinia:n,options:s})))}),P.$state&&typeof P.$state=="object"&&typeof P.$state.constructor=="function"&&!P.$state.constructor.toString().includes("[native code]")&&console.warn(`[\u{1F34D}]: The "state" must be a plain object. It cannot be
	state: () => new MyClass()
Found in store "${P.$id}".`),p&&o&&r.hydrate&&r.hydrate(P.$state,p),u=!0,c=!0,P}function C0(e,t,r){let n,i;const o=typeof t=="function";typeof e=="string"?(n=e,i=o?r:t):(i=e,n=e.id);function a(s,l){const u=vP();if(s=s||u&&Cn(d7),s&&Wd(s),!fS)throw new Error(`[\u{1F34D}]: getActivePinia was called with no active Pinia. Did you forget to install pinia?
	const pinia = createPinia()
	app.use(pinia)
This will fail in production.`);s=fS,s._s.has(n)||(o?pS(n,t,i,s):wC(n,i,s),a._pinia=s);const c=s._s.get(n);if(l){const f="__hot:"+n,h=o?pS(f,t,i,s,!0):wC(f,yi({},i),s,!0);l._hotUpdate(h),delete s.state.value[f],s._s.delete(f)}if(fs&&u&&u.proxy&&!l){const f=u.proxy,h="_pStores"in f?f._pStores:f._pStores={};h[n]=c}return c}return a.$id=n,a}/*!
  * vue-router v4.1.3
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const dc=typeof window<"u";function hX(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const Ae=Object.assign;function gy(e,t){const r={};for(const n in t){const i=t[n];r[n]=Di(i)?i.map(e):e(i)}return r}const dd=()=>{},Di=Array.isArray,dX=/\/$/,pX=e=>e.replace(dX,"");function my(e,t,r="/"){let n,i={},o="",a="";const s=t.indexOf("#");let l=t.indexOf("?");return s<l&&s>=0&&(l=-1),l>-1&&(n=t.slice(0,l),o=t.slice(l+1,s>-1?s:t.length),i=e(o)),s>-1&&(n=n||t.slice(0,s),a=t.slice(s,t.length)),n=_X(n!=null?n:t,r),{fullPath:n+(o&&"?")+o+a,path:n,query:i,hash:a}}function vX(e,t){const r=t.query?e(t.query):"";return t.path+(r&&"?")+r+(t.hash||"")}function SC(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function gX(e,t,r){const n=t.matched.length-1,i=r.matched.length-1;return n>-1&&n===i&&Xc(t.matched[n],r.matched[i])&&S7(t.params,r.params)&&e(t.query)===e(r.query)&&t.hash===r.hash}function Xc(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function S7(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!mX(e[r],t[r]))return!1;return!0}function mX(e,t){return Di(e)?TC(e,t):Di(t)?TC(t,e):e===t}function TC(e,t){return Di(t)?e.length===t.length&&e.every((r,n)=>r===t[n]):e.length===1&&e[0]===t}function _X(e,t){if(e.startsWith("/"))return e;if(!e)return t;const r=t.split("/"),n=e.split("/");let i=r.length-1,o,a;for(o=0;o<n.length;o++)if(a=n[o],a!==".")if(a==="..")i>1&&i--;else break;return r.slice(0,i).join("/")+"/"+n.slice(o-(o===n.length?1:0)).join("/")}var Hd;(function(e){e.pop="pop",e.push="push"})(Hd||(Hd={}));var pd;(function(e){e.back="back",e.forward="forward",e.unknown=""})(pd||(pd={}));function yX(e){if(!e)if(dc){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),pX(e)}const bX=/^[^#]+#/;function wX(e,t){return e.replace(bX,"#")+t}function SX(e,t){const r=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-r.left-(t.left||0),top:n.top-r.top-(t.top||0)}}const z1=()=>({left:window.pageXOffset,top:window.pageYOffset});function TX(e){let t;if("el"in e){const r=e.el,n=typeof r=="string"&&r.startsWith("#"),i=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!i)return;t=SX(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function PC(e,t){return(history.state?history.state.position-t:-1)+e}const vS=new Map;function PX(e,t){vS.set(e,t)}function EX(e){const t=vS.get(e);return vS.delete(e),t}let kX=()=>location.protocol+"//"+location.host;function T7(e,t){const{pathname:r,search:n,hash:i}=t,o=e.indexOf("#");if(o>-1){let s=i.includes(e.slice(o))?e.slice(o).length:1,l=i.slice(s);return l[0]!=="/"&&(l="/"+l),SC(l,"")}return SC(r,e)+n+i}function AX(e,t,r,n){let i=[],o=[],a=null;const s=({state:h})=>{const d=T7(e,location),p=r.value,v=t.value;let g=0;if(h){if(r.value=d,t.value=h,a&&a===p){a=null;return}g=v?h.position-v.position:0}else n(d);i.forEach(m=>{m(r.value,p,{delta:g,type:Hd.pop,direction:g?g>0?pd.forward:pd.back:pd.unknown})})};function l(){a=r.value}function u(h){i.push(h);const d=()=>{const p=i.indexOf(h);p>-1&&i.splice(p,1)};return o.push(d),d}function c(){const{history:h}=window;!h.state||h.replaceState(Ae({},h.state,{scroll:z1()}),"")}function f(){for(const h of o)h();o=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",c),{pauseListeners:l,listen:u,destroy:f}}function EC(e,t,r,n=!1,i=!1){return{back:e,current:t,forward:r,replaced:n,position:window.history.length,scroll:i?z1():null}}function CX(e){const{history:t,location:r}=window,n={value:T7(e,r)},i={value:t.state};i.value||o(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(l,u,c){const f=e.indexOf("#"),h=f>-1?(r.host&&document.querySelector("base")?e:e.slice(f))+l:kX()+e+l;try{t[c?"replaceState":"pushState"](u,"",h),i.value=u}catch(d){console.error(d),r[c?"replace":"assign"](h)}}function a(l,u){const c=Ae({},t.state,EC(i.value.back,l,i.value.forward,!0),u,{position:i.value.position});o(l,c,!0),n.value=l}function s(l,u){const c=Ae({},i.value,t.state,{forward:l,scroll:z1()});o(c.current,c,!0);const f=Ae({},EC(n.value,l,null),{position:c.position+1},u);o(l,f,!1),n.value=l}return{location:n,state:i,push:s,replace:a}}function MX(e){e=yX(e);const t=CX(e),r=AX(e,t.state,t.location,t.replace);function n(o,a=!0){a||r.pauseListeners(),history.go(o)}const i=Ae({location:"",base:e,go:n,createHref:wX.bind(null,e)},t,r);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function xX(e){return typeof e=="string"||e&&typeof e=="object"}function P7(e){return typeof e=="string"||typeof e=="symbol"}const Da={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},E7=Symbol("");var kC;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(kC||(kC={}));function Yc(e,t){return Ae(new Error,{type:e,[E7]:!0},t)}function jo(e,t){return e instanceof Error&&E7 in e&&(t==null||!!(e.type&t))}const AC="[^/]+?",LX={sensitive:!1,strict:!1,start:!0,end:!0},IX=/[.+*?^${}()[\]/\\]/g;function OX(e,t){const r=Ae({},LX,t),n=[];let i=r.start?"^":"";const o=[];for(const u of e){const c=u.length?[]:[90];r.strict&&!u.length&&(i+="/");for(let f=0;f<u.length;f++){const h=u[f];let d=40+(r.sensitive?.25:0);if(h.type===0)f||(i+="/"),i+=h.value.replace(IX,"\\$&"),d+=40;else if(h.type===1){const{value:p,repeatable:v,optional:g,regexp:m}=h;o.push({name:p,repeatable:v,optional:g});const _=m||AC;if(_!==AC){d+=10;try{new RegExp(`(${_})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${p}" (${_}): `+w.message)}}let y=v?`((?:${_})(?:/(?:${_}))*)`:`(${_})`;f||(y=g&&u.length<2?`(?:/${y})`:"/"+y),g&&(y+="?"),i+=y,d+=20,g&&(d+=-8),v&&(d+=-20),_===".*"&&(d+=-50)}c.push(d)}n.push(c)}if(r.strict&&r.end){const u=n.length-1;n[u][n[u].length-1]+=.7000000000000001}r.strict||(i+="/?"),r.end?i+="$":r.strict&&(i+="(?:/|$)");const a=new RegExp(i,r.sensitive?"":"i");function s(u){const c=u.match(a),f={};if(!c)return null;for(let h=1;h<c.length;h++){const d=c[h]||"",p=o[h-1];f[p.name]=d&&p.repeatable?d.split("/"):d}return f}function l(u){let c="",f=!1;for(const h of e){(!f||!c.endsWith("/"))&&(c+="/"),f=!1;for(const d of h)if(d.type===0)c+=d.value;else if(d.type===1){const{value:p,repeatable:v,optional:g}=d,m=p in u?u[p]:"";if(Di(m)&&!v)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const _=Di(m)?m.join("/"):m;if(!_)if(g)h.length<2&&(c.endsWith("/")?c=c.slice(0,-1):f=!0);else throw new Error(`Missing required param "${p}"`);c+=_}}return c||"/"}return{re:a,score:n,keys:o,parse:s,stringify:l}}function RX(e,t){let r=0;for(;r<e.length&&r<t.length;){const n=t[r]-e[r];if(n)return n;r++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function DX(e,t){let r=0;const n=e.score,i=t.score;for(;r<n.length&&r<i.length;){const o=RX(n[r],i[r]);if(o)return o;r++}if(Math.abs(i.length-n.length)===1){if(CC(n))return 1;if(CC(i))return-1}return i.length-n.length}function CC(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const NX={type:0,value:""},FX=/[a-zA-Z0-9_]/;function BX(e){if(!e)return[[]];if(e==="/")return[[NX]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(d){throw new Error(`ERR (${r})/"${u}": ${d}`)}let r=0,n=r;const i=[];let o;function a(){o&&i.push(o),o=[]}let s=0,l,u="",c="";function f(){!u||(r===0?o.push({type:0,value:u}):r===1||r===2||r===3?(o.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function h(){u+=l}for(;s<e.length;){if(l=e[s++],l==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:l==="/"?(u&&f(),a()):l===":"?(f(),r=1):h();break;case 4:h(),r=n;break;case 1:l==="("?r=2:FX.test(l)?h():(f(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&s--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:r=3:c+=l;break;case 3:f(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&s--,c="";break;default:t("Unknown state");break}}return r===2&&t(`Unfinished custom RegExp for param "${u}"`),f(),a(),i}function $X(e,t,r){const n=OX(BX(e.path),r),i=Ae(n,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function zX(e,t){const r=[],n=new Map;t=xC({strict:!1,end:!0,sensitive:!1},t);function i(c){return n.get(c)}function o(c,f,h){const d=!h,p=UX(c);p.aliasOf=h&&h.record;const v=xC(t,c),g=[p];if("alias"in c){const y=typeof c.alias=="string"?[c.alias]:c.alias;for(const w of y)g.push(Ae({},p,{components:h?h.record.components:p.components,path:w,aliasOf:h?h.record:p}))}let m,_;for(const y of g){const{path:w}=y;if(f&&w[0]!=="/"){const T=f.record.path,S=T[T.length-1]==="/"?"":"/";y.path=f.record.path+(w&&S+w)}if(m=$X(y,f,v),h?h.alias.push(m):(_=_||m,_!==m&&_.alias.push(m),d&&c.name&&!MC(m)&&a(c.name)),p.children){const T=p.children;for(let S=0;S<T.length;S++)o(T[S],m,h&&h.children[S])}h=h||m,l(m)}return _?()=>{a(_)}:dd}function a(c){if(P7(c)){const f=n.get(c);f&&(n.delete(c),r.splice(r.indexOf(f),1),f.children.forEach(a),f.alias.forEach(a))}else{const f=r.indexOf(c);f>-1&&(r.splice(f,1),c.record.name&&n.delete(c.record.name),c.children.forEach(a),c.alias.forEach(a))}}function s(){return r}function l(c){let f=0;for(;f<r.length&&DX(c,r[f])>=0&&(c.record.path!==r[f].record.path||!k7(c,r[f]));)f++;r.splice(f,0,c),c.record.name&&!MC(c)&&n.set(c.record.name,c)}function u(c,f){let h,d={},p,v;if("name"in c&&c.name){if(h=n.get(c.name),!h)throw Yc(1,{location:c});v=h.record.name,d=Ae(VX(f.params,h.keys.filter(_=>!_.optional).map(_=>_.name)),c.params),p=h.stringify(d)}else if("path"in c)p=c.path,h=r.find(_=>_.re.test(p)),h&&(d=h.parse(p),v=h.record.name);else{if(h=f.name?n.get(f.name):r.find(_=>_.re.test(f.path)),!h)throw Yc(1,{location:c,currentLocation:f});v=h.record.name,d=Ae({},f.params,c.params),p=h.stringify(d)}const g=[];let m=h;for(;m;)g.unshift(m.record),m=m.parent;return{name:v,path:p,params:d,matched:g,meta:jX(g)}}return e.forEach(c=>o(c)),{addRoute:o,resolve:u,removeRoute:a,getRoutes:s,getRecordMatcher:i}}function VX(e,t){const r={};for(const n of t)n in e&&(r[n]=e[n]);return r}function UX(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:GX(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function GX(e){const t={},r=e.props||!1;if("component"in e)t.default=r;else for(const n in e.components)t[n]=typeof r=="boolean"?r:r[n];return t}function MC(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function jX(e){return e.reduce((t,r)=>Ae(t,r.meta),{})}function xC(e,t){const r={};for(const n in e)r[n]=n in t?t[n]:e[n];return r}function k7(e,t){return t.children.some(r=>r===e||k7(e,r))}const A7=/#/g,WX=/&/g,HX=/\//g,XX=/=/g,YX=/\?/g,C7=/\+/g,qX=/%5B/g,ZX=/%5D/g,M7=/%5E/g,KX=/%60/g,x7=/%7B/g,JX=/%7C/g,L7=/%7D/g,QX=/%20/g;function yP(e){return encodeURI(""+e).replace(JX,"|").replace(qX,"[").replace(ZX,"]")}function tY(e){return yP(e).replace(x7,"{").replace(L7,"}").replace(M7,"^")}function gS(e){return yP(e).replace(C7,"%2B").replace(QX,"+").replace(A7,"%23").replace(WX,"%26").replace(KX,"`").replace(x7,"{").replace(L7,"}").replace(M7,"^")}function eY(e){return gS(e).replace(XX,"%3D")}function rY(e){return yP(e).replace(A7,"%23").replace(YX,"%3F")}function nY(e){return e==null?"":rY(e).replace(HX,"%2F")}function Sm(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function iY(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<n.length;++i){const o=n[i].replace(C7," "),a=o.indexOf("="),s=Sm(a<0?o:o.slice(0,a)),l=a<0?null:Sm(o.slice(a+1));if(s in t){let u=t[s];Di(u)||(u=t[s]=[u]),u.push(l)}else t[s]=l}return t}function LC(e){let t="";for(let r in e){const n=e[r];if(r=eY(r),n==null){n!==void 0&&(t+=(t.length?"&":"")+r);continue}(Di(n)?n.map(o=>o&&gS(o)):[n&&gS(n)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+r,o!=null&&(t+="="+o))})}return t}function oY(e){const t={};for(const r in e){const n=e[r];n!==void 0&&(t[r]=Di(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return t}const aY=Symbol(""),IC=Symbol(""),bP=Symbol(""),I7=Symbol(""),mS=Symbol("");function Zf(){let e=[];function t(n){return e.push(n),()=>{const i=e.indexOf(n);i>-1&&e.splice(i,1)}}function r(){e=[]}return{add:t,list:()=>e,reset:r}}function cs(e,t,r,n,i){const o=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((a,s)=>{const l=f=>{f===!1?s(Yc(4,{from:r,to:t})):f instanceof Error?s(f):xX(f)?s(Yc(2,{from:t,to:f})):(o&&n.enterCallbacks[i]===o&&typeof f=="function"&&o.push(f),a())},u=e.call(n&&n.instances[i],t,r,l);let c=Promise.resolve(u);e.length<3&&(c=c.then(l)),c.catch(f=>s(f))})}function _y(e,t,r,n){const i=[];for(const o of e)for(const a in o.components){let s=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(sY(s)){const u=(s.__vccOpts||s)[t];u&&i.push(cs(u,r,n,o,a))}else{let l=s();i.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const c=hX(u)?u.default:u;o.components[a]=c;const h=(c.__vccOpts||c)[t];return h&&cs(h,r,n,o,a)()}))}}return i}function sY(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function OC(e){const t=Cn(bP),r=Cn(I7),n=Ye(()=>t.resolve(br(e.to))),i=Ye(()=>{const{matched:l}=n.value,{length:u}=l,c=l[u-1],f=r.matched;if(!c||!f.length)return-1;const h=f.findIndex(Xc.bind(null,c));if(h>-1)return h;const d=RC(l[u-2]);return u>1&&RC(c)===d&&f[f.length-1].path!==d?f.findIndex(Xc.bind(null,l[u-2])):h}),o=Ye(()=>i.value>-1&&cY(r.params,n.value.params)),a=Ye(()=>i.value>-1&&i.value===r.matched.length-1&&S7(r.params,n.value.params));function s(l={}){return uY(l)?t[br(e.replace)?"replace":"push"](br(e.to)).catch(dd):Promise.resolve()}return{route:n,href:Ye(()=>n.value.href),isActive:o,isExactActive:a,navigate:s}}const lY=fP({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:OC,setup(e,{slots:t}){const r=hf(OC(e)),{options:n}=Cn(bP),i=Ye(()=>({[DC(e.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[DC(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const o=t.default&&t.default(r);return e.custom?o:gP("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:i.value},o)}}}),pc=lY;function uY(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function cY(e,t){for(const r in t){const n=t[r],i=e[r];if(typeof n=="string"){if(n!==i)return!1}else if(!Di(i)||i.length!==n.length||n.some((o,a)=>o!==i[a]))return!1}return!0}function RC(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const DC=(e,t,r)=>e!=null?e:t!=null?t:r,fY=fP({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:r}){const n=Cn(mS),i=Ye(()=>e.route||n.value),o=Cn(IC,0),a=Ye(()=>{let u=br(o);const{matched:c}=i.value;let f;for(;(f=c[u])&&!f.components;)u++;return u}),s=Ye(()=>i.value.matched[a.value]);Mg(IC,Ye(()=>a.value+1)),Mg(aY,s),Mg(mS,i);const l=x1();return wo(()=>[l.value,s.value,e.name],([u,c,f],[h,d,p])=>{c&&(c.instances[f]=u,d&&d!==c&&u&&u===h&&(c.leaveGuards.size||(c.leaveGuards=d.leaveGuards),c.updateGuards.size||(c.updateGuards=d.updateGuards))),u&&c&&(!d||!Xc(c,d)||!h)&&(c.enterCallbacks[f]||[]).forEach(v=>v(u))},{flush:"post"}),()=>{const u=i.value,c=e.name,f=s.value,h=f&&f.components[c];if(!h)return NC(r.default,{Component:h,route:u});const d=f.props[c],p=d?d===!0?u.params:typeof d=="function"?d(u):d:null,g=gP(h,Ae({},p,t,{onVnodeUnmounted:m=>{m.component.isUnmounted&&(f.instances[c]=null)},ref:l}));return NC(r.default,{Component:g,route:u})||g}}});function NC(e,t){if(!e)return null;const r=e(t);return r.length===1?r[0]:r}const O7=fY;function hY(e){const t=zX(e.routes,e),r=e.parseQuery||iY,n=e.stringifyQuery||LC,i=e.history,o=Zf(),a=Zf(),s=Zf(),l=Ag(Da);let u=Da;dc&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=gy.bind(null,Y=>""+Y),f=gy.bind(null,nY),h=gy.bind(null,Sm);function d(Y,it){let K,pt;return P7(Y)?(K=t.getRecordMatcher(Y),pt=it):pt=Y,t.addRoute(pt,K)}function p(Y){const it=t.getRecordMatcher(Y);it&&t.removeRoute(it)}function v(){return t.getRoutes().map(Y=>Y.record)}function g(Y){return!!t.getRecordMatcher(Y)}function m(Y,it){if(it=Ae({},it||l.value),typeof Y=="string"){const ft=my(r,Y,it.path),$=t.resolve({path:ft.path},it),G=i.createHref(ft.fullPath);return Ae(ft,$,{params:h($.params),hash:Sm(ft.hash),redirectedFrom:void 0,href:G})}let K;if("path"in Y)K=Ae({},Y,{path:my(r,Y.path,it.path).path});else{const ft=Ae({},Y.params);for(const $ in ft)ft[$]==null&&delete ft[$];K=Ae({},Y,{params:f(Y.params)}),it.params=f(it.params)}const pt=t.resolve(K,it),Tt=Y.hash||"";pt.params=c(h(pt.params));const kt=vX(n,Ae({},Y,{hash:tY(Tt),path:pt.path})),lt=i.createHref(kt);return Ae({fullPath:kt,hash:Tt,query:n===LC?oY(Y.query):Y.query||{}},pt,{redirectedFrom:void 0,href:lt})}function _(Y){return typeof Y=="string"?my(r,Y,l.value.path):Ae({},Y)}function y(Y,it){if(u!==Y)return Yc(8,{from:it,to:Y})}function w(Y){return P(Y)}function T(Y){return w(Ae(_(Y),{replace:!0}))}function S(Y){const it=Y.matched[Y.matched.length-1];if(it&&it.redirect){const{redirect:K}=it;let pt=typeof K=="function"?K(Y):K;return typeof pt=="string"&&(pt=pt.includes("?")||pt.includes("#")?pt=_(pt):{path:pt},pt.params={}),Ae({query:Y.query,hash:Y.hash,params:"path"in pt?{}:Y.params},pt)}}function P(Y,it){const K=u=m(Y),pt=l.value,Tt=Y.state,kt=Y.force,lt=Y.replace===!0,ft=S(K);if(ft)return P(Ae(_(ft),{state:Tt,force:kt,replace:lt}),it||K);const $=K;$.redirectedFrom=it;let G;return!kt&&gX(n,pt,K)&&(G=Yc(16,{to:$,from:pt}),Pt(pt,pt,!0,!1)),(G?Promise.resolve(G):k($,pt)).catch(X=>jo(X)?jo(X,2)?X:et(X):Z(X,$,pt)).then(X=>{if(X){if(jo(X,2))return P(Ae({replace:lt},_(X.to),{state:Tt,force:kt}),it||$)}else X=M($,pt,!0,lt,Tt);return C($,pt,X),X})}function A(Y,it){const K=y(Y,it);return K?Promise.reject(K):Promise.resolve()}function k(Y,it){let K;const[pt,Tt,kt]=dY(Y,it);K=_y(pt.reverse(),"beforeRouteLeave",Y,it);for(const ft of pt)ft.leaveGuards.forEach($=>{K.push(cs($,Y,it))});const lt=A.bind(null,Y,it);return K.push(lt),Ou(K).then(()=>{K=[];for(const ft of o.list())K.push(cs(ft,Y,it));return K.push(lt),Ou(K)}).then(()=>{K=_y(Tt,"beforeRouteUpdate",Y,it);for(const ft of Tt)ft.updateGuards.forEach($=>{K.push(cs($,Y,it))});return K.push(lt),Ou(K)}).then(()=>{K=[];for(const ft of Y.matched)if(ft.beforeEnter&&!it.matched.includes(ft))if(Di(ft.beforeEnter))for(const $ of ft.beforeEnter)K.push(cs($,Y,it));else K.push(cs(ft.beforeEnter,Y,it));return K.push(lt),Ou(K)}).then(()=>(Y.matched.forEach(ft=>ft.enterCallbacks={}),K=_y(kt,"beforeRouteEnter",Y,it),K.push(lt),Ou(K))).then(()=>{K=[];for(const ft of a.list())K.push(cs(ft,Y,it));return K.push(lt),Ou(K)}).catch(ft=>jo(ft,8)?ft:Promise.reject(ft))}function C(Y,it,K){for(const pt of s.list())pt(Y,it,K)}function M(Y,it,K,pt,Tt){const kt=y(Y,it);if(kt)return kt;const lt=it===Da,ft=dc?history.state:{};K&&(pt||lt?i.replace(Y.fullPath,Ae({scroll:lt&&ft&&ft.scroll},Tt)):i.push(Y.fullPath,Tt)),l.value=Y,Pt(Y,it,K,lt),et()}let D;function B(){D||(D=i.listen((Y,it,K)=>{if(!Ht.listening)return;const pt=m(Y),Tt=S(pt);if(Tt){P(Ae(Tt,{replace:!0}),pt).catch(dd);return}u=pt;const kt=l.value;dc&&PX(PC(kt.fullPath,K.delta),z1()),k(pt,kt).catch(lt=>jo(lt,12)?lt:jo(lt,2)?(P(lt.to,pt).then(ft=>{jo(ft,20)&&!K.delta&&K.type===Hd.pop&&i.go(-1,!1)}).catch(dd),Promise.reject()):(K.delta&&i.go(-K.delta,!1),Z(lt,pt,kt))).then(lt=>{lt=lt||M(pt,kt,!1),lt&&(K.delta&&!jo(lt,8)?i.go(-K.delta,!1):K.type===Hd.pop&&jo(lt,20)&&i.go(-1,!1)),C(pt,kt,lt)}).catch(dd)}))}let V=Zf(),N=Zf(),j;function Z(Y,it,K){et(Y);const pt=N.list();return pt.length?pt.forEach(Tt=>Tt(Y,it,K)):console.error(Y),Promise.reject(Y)}function q(){return j&&l.value!==Da?Promise.resolve():new Promise((Y,it)=>{V.add([Y,it])})}function et(Y){return j||(j=!Y,B(),V.list().forEach(([it,K])=>Y?K(Y):it()),V.reset()),Y}function Pt(Y,it,K,pt){const{scrollBehavior:Tt}=e;if(!dc||!Tt)return Promise.resolve();const kt=!K&&EX(PC(Y.fullPath,0))||(pt||!K)&&history.state&&history.state.scroll||null;return Vd().then(()=>Tt(Y,it,kt)).then(lt=>lt&&TX(lt)).catch(lt=>Z(lt,Y,it))}const Rt=Y=>i.go(Y);let wt;const St=new Set,Ht={currentRoute:l,listening:!0,addRoute:d,removeRoute:p,hasRoute:g,getRoutes:v,resolve:m,options:e,push:w,replace:T,go:Rt,back:()=>Rt(-1),forward:()=>Rt(1),beforeEach:o.add,beforeResolve:a.add,afterEach:s.add,onError:N.add,isReady:q,install(Y){const it=this;Y.component("RouterLink",pc),Y.component("RouterView",O7),Y.config.globalProperties.$router=it,Object.defineProperty(Y.config.globalProperties,"$route",{enumerable:!0,get:()=>br(l)}),dc&&!wt&&l.value===Da&&(wt=!0,w(i.location).catch(Tt=>{}));const K={};for(const Tt in Da)K[Tt]=Ye(()=>l.value[Tt]);Y.provide(bP,it),Y.provide(I7,hf(K)),Y.provide(mS,l);const pt=Y.unmount;St.add(Y),Y.unmount=function(){St.delete(Y),St.size<1&&(u=Da,D&&D(),D=null,l.value=Da,wt=!1,j=!1),pt()}}};return Ht}function Ou(e){return e.reduce((t,r)=>t.then(()=>r()),Promise.resolve())}function dY(e,t){const r=[],n=[],i=[],o=Math.max(t.matched.length,e.matched.length);for(let a=0;a<o;a++){const s=t.matched[a];s&&(e.matched.find(u=>Xc(u,s))?n.push(s):r.push(s));const l=e.matched[a];l&&(t.matched.find(u=>Xc(u,l))||i.push(l))}return[r,n,i]}function Vi(e){return`data/icons/item/${e}.webp`}function pY(e){return`<img src="${Vi(e)}" class="iconitem" />`}function Ft(e,t,r){if(!e&&e!==0)return"?";const n=parseFloat(e),i=n.toFixed(t);return r?n>=0?"+"+i:i:i=="Infinity"?"\u221E":i}function hs(e,t){return e+(t-e)*Math.random()}function Ti(e){return!isNaN(e)&&isFinite(e)}function vY(e,t){let r=0;if(t<e[r])return-1;let n=e.length-1;if(e[n]<t)return n+1;for(;r<=n;){let i=Math.floor((r+n)/2);if(e[i]<=t&&t<=e[i+1])return i;t<e[i]?n=i-1:r=i+1}return-1}function gY(e,t){let r=0,n=e.length-1,i=null;for(;r<=n;){let o=Math.floor((r+n)/2);t(e[o])?(i=e[o],n=o-1):r=o+1}return i}function mY(e,t,r,n=.5,i=120,o=0){var a=1,s=r-t;return s!=0&&(a=(e-t)/s),`hsla(${a*(i-o)+o}, 100%, 50%, ${n})`}function _Y(e,t){return e.length<=t?e:e.slice(0,t-1)+"\u2026"}function yY(e){const t=/\d+/g;return e.match(t).join("-")}function wP(e){if(e>=10**12)return e;if(e>=10**9)return e/10**9+"G";if(e>=10**6)return e/10**6+"M";if(e>=10**3)return e/10**3+"K";if(e>0){if(e<10**-1)return e/10**-3+"m";if(e<10**-4)return e/10**-6+"u";if(e<10**-7)return e/10**-9+"n";if(e<10**-10)return e}return e}function vd(e,t,r){if(r==t.level)return;const n=Math.min(r,40),i=e.workerStatic[t.charkey];let o=t.mspdSheet/(i.mspd/100)-1;for(let a=t.level+1;a<=n;a++)t.level=a,t.wspdSheet+=hs(i.wspd_lo,i.wspd_hi)/1e6,o+=hs(i.mspd_lo,i.mspd_hi)/1e6,t.luckSheet+=hs(i.luck_lo,i.luck_hi)/1e4,a%5==0&&t.skills.push(e.randomSkill(t.skills));t.mspdSheet=i.mspd/100*(1+o)}const re=C0({id:"user",state:()=>({selectedLang:"en",selectedRegion:"RU",selectedTax:.65,customPrices:{},keepItems:{},regionModifiers:{},allowFloating:!1,useFloatingModifiers:{},regionModifiers2:{},lodgingP2W:{},storageP2W:{},storageVP:!1,storagePersonal:{},lodgingTaken:{},activateAncado:!1,houseTaken:{},userWorkers:[],useDefaultWorker:!1,defaultWorker:{tnk:0,charkey:7572,label:"default",level:30,wspdSheet:140,mspdSheet:7.5,luckSheet:6,skills:["1012","1301","1302","1303","1601","1602","1603"],job:null},farmingEnable:!1,farmingBareProfit:0,farmingProfit:0,displayWorkerNames:!0,displayWorkerStatsRank:!1,displayWorkerStatsForPz:!0,displayProfitPerCp:!1,grindTakenList:[],userWorkshops:{},defaultUserWorkshop:{industry:"unknown",label:"",manualCycleIncome:0,manualWorkload:300,manualCp:0},prerelease_housesconfig:1}),actions:{migrate(e){if(!e)return;const t=JSON.parse(e);let r=!1;if("counter"in t&&(delete t.counter,r=!0),"connectionOrder"in t&&(delete t.connectionOrder,r=!0),"townSlotsP2W"in t&&(t.lodgingP2W=t.townSlotsP2W,delete t.townSlotsP2W,r=!0),"grindTaken"in t&&(t.grindTakenList=Object.entries(t.grindTaken).filter(([n,i])=>i===!0).map(([n,i])=>Number(n)),delete t.grindTaken,r=!0),"userWorkers"in t&&t.userWorkers.forEach(n=>{n.job==1049&&(n.job=null,r=!0)}),"grindTakenList"in t){const n=new Set([133,134,612,805,806,807,801,961,962,963,1643,1644]),i=t.grindTakenList.filter(o=>!n.has(o));t.grindTakenList.length>i.length&&(t.grindTakenList=i,r=!0)}"userWorkers"in t&&t.userWorkers.forEach(n=>{if(typeof n.job=="number"){const i=n.job;n.job={kind:"plantzone",pzk:i,storage:n.tnk},r=!0}}),r&&(localStorage.setItem("user",JSON.stringify(t)),console.log("userStore updated to new version")),this.$patch(t)},removeNodeTaken(e){const t=At(),r=new Set;return this.workingWorkers.forEach(n=>{t.dijTakenOnlyPath(tnk,n.job).forEach(o=>r.add(o))}),r.has(e)?(console.log("can't remove required node"),!1):(this.nodesTaken[e]=!1,console.log("removed"),!0)},assignWorker(e,t){var r=this.userWorkers.indexOf(e);console.log("fromIndex",r),this.userWorkers.splice(r,1),this.userWorkers.push(e),e.job=t,console.log("assigned",e.label,"to",e.job)},chanceAtModifier(e,t){if(t==0)return 100;if(!At().ready)return 0;if(this.modTimes[e].hasOwnProperty(t))return this.modTimes[e][t];this.modSorteds[e]===void 0&&console.log("undefined modifiers at rgk",e);const n=vY(this.modSorteds[e],t),i=n+1;if(n===-1)return 100;const o=this.modSorteds[e].length;if(n===o)return 0;const a=this.modSorteds[e][n],s=this.modTimes[e][a];if(n==i)return s;const l=this.modSorteds[e][i],u=this.modTimes[e][l],c=(t-a)/(l-a);return s+c*(u-s)},tierModifiers(e,t,r){const n=[];let i=0;const o=t,a=2*o,s=Math.ceil(o/r),l=Math.ceil(a/r);for(let u=s;u<=l;u++){const c=Math.max(2-r*u/o,0),f=Math.floor(o*(2-c)/100)*100,h=this.chanceAtModifier(e,c*100);h!=0&&(n.push({wld:f,mod:c,tier:u,time:h-i}),i=h)}return n},calcWalkMinutes(e,t){return 2*e/t/60},calcCyclesDaily(e,t,r,n,i){let o=0;const a=this.calcWalkMinutes(n,i);if(this.allowFloating&&this.useFloatingModifiers[t])for(const s of this.tierModifiers(t,e,r)){const l=Math.ceil(s.wld/r),u=10*l+a;o+=24*60*s.time/100/u}else{const s=e*(2-this.productivity(t)),l=Math.ceil(s/r),u=10*l+a;o=24*60/u}return o},modifyGrindTakens(e,t){e.target.checked?this.grindTakenSet.add(t):this.grindTakenSet.delete(t),this.grindTakenList=[...this.grindTakenSet]}},getters:{grindTakenSet(e){const t=new Set(e.grindTakenList);return console.log("grindTakenSet getter",t),t},marketUrl:e=>`https://apiv2.bdolytics.com/${e.selectedLang}/${e.selectedRegion}/market/central-market-data`,codexNodeUrl:e=>`https://bdolytics.com/${e.selectedLang}/${e.selectedRegion}/db/node/`,itemUrl:e=>`https://bdolytics.com/${e.selectedLang}/${e.selectedRegion}/db/item/`,floatingRegionGroups(){const e=At(),t=Object.keys(e.regionGroups).filter(r=>this.useFloatingModifiers.hasOwnProperty(r)&&this.useFloatingModifiers[r]);return console.log("floatingRegionGroups",t),t},modHists(){const e={},t=At();for(const r of Object.keys(t.regionGroups))if(this.allowFloating&&this.useFloatingModifiers.hasOwnProperty(r)&&this.useFloatingModifiers[r]){this.regionModifiers2.hasOwnProperty(r)||(this.regionModifiers2[r]=[0]);const n=this.regionModifiers2[r].map(Number).filter(i=>!isNaN(i)).sort((i,o)=>o-i);e[r]=n}else this.regionModifiers.hasOwnProperty(r)?e[r]=[this.regionModifiers[r]]:e[r]=[0];return e},medianModifiers(){const e={},t=At();for(const r of Object.keys(t.regionGroups)){let n=0;const i=this.modHists[r].length;if(i%2)n=this.modHists[r][(i-1)/2];else{const o=this.modHists[r][(i-1-1)/2],a=this.modHists[r][(i-1+1)/2];n=(o+a)/2}e[r]=n}return e},medianWorkloads(){const e={},t=At();for(const[r,n]of Object.entries(t.plantzones)){const i=n.regiongroup;e[r]=n.workload*(2-this.medianModifiers[i]/100)}return e},modTimes(){const e=n=>n.reduce((i,o)=>i+o,0)/n.length,t={},r=At();for(const n of Object.keys(r.regionGroups)){const i=this.modHists[n].length,o={},a=this.modHists[n][0],s=this.modHists[n][i-1];if(a==s)o[a]=(i-1)/2;else{const u={};for(let c=0;c<i;c++){const f=this.modHists[n][c];if(f==a){o[f]=100*c/(i-1);continue}if(f==s){o[f]=100*c/(i-1);break}f in u?u[f].push(c):u[f]=[c]}for(const[c,f]of Object.entries(u)){const h=e(f);o[c]=100*h/(i-1)}}t[n]=o}return t},modSorteds(){const e={},t=At();for(const r of Object.keys(t.regionGroups)){const n=Object.keys(this.modTimes[r]).map(Number).sort((i,o)=>i-o);e[r]=n}return e},productivity:e=>t=>(t in e.regionModifiers?e.regionModifiers[t]:0)/100,nodeCostInfinityUntaken:e=>t=>e.autotakenNodes.has(t)?0:1/0,haveLodging(e){const t=At();let r={slots:{perTown:{},total:0},cp:{perTown:{},total:0}};for(const[n,i]of Object.entries(t.lodgingPerTown)){if(r.slots.perTown[n]=1,r.cp.perTown[n]=0,n==619&&!e.activateAncado){r.slots.perTown[n]=0;continue}i.houses.forEach(o=>{e.lodgingTaken[o.key]&&(r.slots.perTown[n]+=o.lodgingSpaces,r.cp.perTown[n]+=o.CP)}),e.lodgingP2W[n]&&(r.slots.perTown[n]+=e.lodgingP2W[n]),r.slots.total+=r.slots.perTown[n],r.cp.total+=r.cp.perTown[n]}return console.log("haveLodging getter"),r},townFreeLodgingCount:e=>t=>{const r=At(),n=e.haveLodging.slots.perTown[t],i=e.userWorkers.filter(o=>r.tnk2tk(o.tnk)==t).length;return n-i},countWorkers(e){return e.userWorkers.length},workingWorkers(e){return e.userWorkers.filter(t=>t.job&&t.job!=null)},townWorkers:e=>t=>{const r=At();return e.userWorkers.filter(i=>r.tnk2tk(i.tnk)==t)},townWorkingWorkers:e=>t=>{const r=At();return e.workingWorkers.filter(i=>r.tnk2tk(i.tnk)==t)},getFreeWorkers:e=>t=>{const r=At();return e.userWorkers.filter(n=>r.tnk2tk(n.tnk)==t&&!n.job)},workerStatsForDisplay:e=>t=>{if(e.displayWorkerStatsRank){const n=At().workerStatRank(t);return{wspd:n.wspd_rank*100,mspd:n.mspd_rank*100,luck:n.luck_rank*100}}else return e.displayWorkerStatsForPz?At().workerStatsOnCurrentJob(t):{wspd:t.wspdSheet,mspd:t.mspdSheet,luck:t.luckSheet}},workersMinMaxStats(e){console.log("workersMinMaxStats");const t={wspd:{lo:142,hi:143},mspd:{lo:7.4,hi:7.6},luck:{lo:10,hi:11}};return e.userWorkers.forEach(r=>{if(r.charkey==7572){const n=e.workerStatsForDisplay(r);t.wspd.lo=Math.min(n.wspd,t.wspd.lo),t.mspd.lo=Math.min(n.mspd,t.mspd.lo),t.luck.lo=Math.min(n.luck,t.luck.lo),t.wspd.hi=Math.max(n.wspd,t.wspd.hi),t.mspd.hi=Math.max(n.mspd,t.mspd.hi),t.luck.hi=Math.max(n.luck,t.luck.hi)}}),t},grindTakenDesc(e){let t="";const r=At();return r.ready&&e.grindTakenList.forEach(n=>{t+=r.uloc.node[n]+`
`}),t},autotakenGrindNodes(e){const t=new Set,r=At();return r.ready&&e.grindTakenList.forEach(n=>{const o=r.dijkstraNearestTowns(Number(n),4,t,!0).sort((u,c)=>u[1]-c[1]),[a,s,l]=o[0];l.forEach(u=>t.add(u))}),console.log("autotakenGrindNodes getter",t),t},pzJobs(e){const t={},r=At(),n=new Set([...e.autotakenGrindNodes]);return this.workingWorkers.forEach(i=>{if(!i||!r.jobIsPz(i.job))return;const o=i.job.pzk;if(!o)return;const a=r.workerStatsOnPlantzone(i),s=r.profitPzTownStats(o,i.tnk,a.wspd,a.mspd,a.luck,r.isGiant(i.charkey));try{const[l,u]=r.dijkstraPath(o,i.tnk,n);l&&l.forEach(c=>n.add(c)),t[o]={pzk:o,worker:i,profit:s,usedPath:l,usedPathCost:u}}catch{console.log(`Failed to build path: ${i.tnk} - ${o}`)}}),t},currentNodesJobs(e){const t={};for(const[r,n]of Object.entries(e.pzJobs))n.usedPath&&n.usedPath.forEach(i=>i in t?t[i].push(r):t[i]=[r]);return t},currentNodesCashflow(e){const t={};for(const[r,n]of Object.entries(e.pzJobs))n.usedPath&&n.usedPath.forEach(i=>i in t?t[i]+=n.profit.priceDaily:t[i]=n.profit.priceDaily);return t},nodeSharing(e){const t={},r={};for(const[n,i]of Object.entries(e.pzJobs))i.usedPath&&i.usedPath.forEach(function(o){let a=0;o in nodesJobs?(r[o]+=i.profit.priceDaily,i.profit.priceDaily>a?nodesJobs[o].push(n):(a=i.profit.priceDaily,nodesJobs[o].unshift(n))):(r[o]=i.profit.priceDaily,nodesJobs[o]=[n])});return{jobs:t,cashFlows:r}},pzjobsSharedCP(e){const t={},r=At();for(const[n,i]of Object.entries(e.pzJobs))t[n]=0,i.usedPath&&i.usedPath.forEach(function(o){if(e.autotakenGrindNodes.has(o))return;const a=i.profit.priceDaily/e.currentNodesCashflow[o],s=r.nodes[o].CP*a;t[n]+=s});return t},pzjobsSharedEfficiency(e){const t={};for(const[r,n]of Object.entries(e.pzJobs))n.usedPath&&(t[r]=n.profit.priceDaily/e.pzjobsSharedCP[r]);return t},pzjobsSortedSharedEfficiency(e){return Object.entries(e.pzjobsSharedEfficiency).sort(([,t],[,r])=>r-t)},farmingProfitPerWorker(e){return(e.farmingProfit-e.farmingBareProfit)/10},workerBringsItemkeys:e=>t=>{const r=At();if(r.jobIsIdle(t.job))return[];if(r.jobIsPz(t.job))return r.plantzones[t.job].itemkeys;if(r.jobIsFarming(t.job))return[];if(r.jobIsCustom(t.job))return[];if(r.jobIsWorkshop(t.job))return[]},townsStoreItemkeys(e){const t={},r=At();if(!r.ready)return t;r.towns.forEach(n=>t[r.tnk2tk(n)]=new Set([]));for(const[n,i]of Object.entries(e.workingWorkers))if(r.jobIsPz(i.job)){const o=r.tnk2tk(i.job.storage);t[o]=new Set([...t[o],...r.plantzones[i.job.pzk].itemkeys])}return t},baseStorage(e){let t=16;return e.selectedRegion=="RU"&&(t=8),e.selectedRegion=="SEA"&&(t=8),e.selectedRegion=="MENA"&&(t=8),t+(e.storageVP?16:0)},townInfra:e=>(t,r,n)=>{const i=At();t in e.lodgingP2W||(e.lodgingP2W[t]=0),t in e.storageP2W||(e.storageP2W[t]=0),t in e.storagePersonal||(e.storagePersonal[t]=0);const o=r-e.lodgingP2W[t]-1,a=n+(n>0?2:0)+e.storagePersonal[t]-e.storageP2W[t]-e.baseStorage;return i.lsLookup(t,o,a)},townInfraAddCost:e=>(t,r,n)=>{const i=e.townsInfra[t],o=new Set([...e.townsStoreItemkeys[t],...n]).size,a=e.townInfra(t,e.townWorkingWorkers(t).length+r,o),l=At().uloc.town[t]+` housing:
old: ${Math.max(0,i.wantLodging)}\u{1F6CF}\uFE0F + ${Math.max(0,i.wantStorage)}\u{1F4E6} = ${Ft(i.cost)} CP
new: ${Math.max(0,a.wantLodging)}\u{1F6CF}\uFE0F + ${Math.max(0,a.wantStorage)}\u{1F4E6} = ${Ft(a.cost)} CP`;return{cost:a.cost-i.cost,tooltip:l}},townsInfra(e){const t={},r=At();return r.ready&&r.towns.forEach(n=>{const i=r.tnk2tk(n);t[i]=this.townInfra(i,e.townWorkingWorkers(i).length,e.townsStoreItemkeys[i]?e.townsStoreItemkeys[i].size:0)}),t},townsTopIncomeWorkers(e){const t={},r=At();if(!r.ready)return t;r.towns.forEach(n=>t[r.tnk2tk(n)]=[]);for(const[n,i]of Object.entries(e.workingWorkers)){const o=r.tnk2tk(i.tnk);t[o].push(i)}for(const[n,i]of Object.entries(t))i.sort((o,a)=>e.workerIncome(a)-e.workerIncome(o));return console.log("townsTopIncomeWorkers",t),t},townsSteppedInfra(e){const t=Date.now(),r={},n=At();if(!n.ready)return r;const i=[];n.towns.forEach(l=>{const u=n.tnk2tk(l);i[u]=[],r[u]=[]});for(const[l,u]of Object.entries(e.workingWorkers))i[n.tnk2tk(u.tnk)].push(u);for(const[l,u]of Object.entries(i)){let c=0,f=new Set([]),h=0;const d=e.townInfra(l,c,f.size),p=d.success?d.cost:NaN;for(;u.length>0;){let v=-1/0,g=null;var o,a,s;for(const m of u){const _=e.workerIncome(m),y=e.workerBringsItemkeys(m),w=new Set([...f,...y]),T=e.townInfra(l,c+1,w.size);if(!T.success)throw Error(`townsSteppedInfra: failed to provide infrastructure for ${l}, ${c+1}, ${w.size}`);const S=(h+_)/(T.cost-p);(S>v||!(S<v)&&_>a)&&(v=S,g=m,o=w,a=_,s=T.cost)}if(!g)throw Error("townsSteppedInfra: efficiency -Inf");c+=1,f=o,h+=a,r[l].push({w:g,curL:c,curS:f.size,addI:a,curI:h,cost:s,eff:v}),u.splice(u.indexOf(g),1)}for(let v=0;v<r[l].length;v++){const g=r[l][v];let m=v-1;for(;m>=0&&r[l][m].cost==g.cost;)m--;const _=m>=0?r[l][m]:{curI:0,cost:p};g.delta_eff=(g.curI-_.curI)/(g.cost-_.cost)}}return console.log("townsSteppedInfra took",Date.now()-t,"ms"),r},lodgage(e){return Object.values(this.townsInfra).reduce((t,r)=>t+r.cost,0)},workerIncome:e=>t=>{const r=At();if(r.jobIsIdle(t.job))return 0;if(r.jobIsPz(t.job)){if(e.pzJobs[t.job.pzk]==null)throw Error(`pzjob ${t.job.pzk} is undefined`);return e.pzJobs[t.job.pzk].profit.priceDaily}if(r.jobIsFarming(t.job))return e.farmingProfitPerWorker;if(r.jobIsCustom(t.job))return t.job[1];if(r.jobIsWorkshop(t.job)){const n=t.job.hk;n in e.userWorkshops||(e.userWorkshops[n]={...e.defaultUserWorkshop});const i=e.userWorkshops[n];return r.profitWorkshopWorker(n,i,t)}},workerSharedCp:e=>t=>{const r=At();if(r.jobIsPz(t.job))return e.pzjobsSharedCP[t.job.pzk];if(r.jobIsFarming(t.job))return 0;if(r.jobIsCustom(t.job))return t.job[2];if(r.jobIsWorkshop(t.job)){const n=e.workersWorkshop.filter(i=>i.job.hk==t.job.hk).length;return e.userWorkshops[t.job.hk].manualCp/n}},workerSharedLodgingCp:e=>t=>{const r=At();if(!r.ready)return;const n=e.workerIncome(t),i=r.tnk2tk(t.tnk),o=e.prerelease_housesconfig?e.townsInfra[i].cost:e.haveLodging.cp.perTown[i],a=e.townsTotalIncome[i].income;let s;if(a>0)s=n/a*o;else{const l=e.userWorkers.filter(u=>r.tnk2tk(u.tnk)==i).length;s=1/l*o}return s},workerIncomePerCp:e=>t=>{const r=e.workerIncome(t)/(e.workerSharedCp(t)+e.workerSharedLodgingCp(t));return isNaN(r)&&console.log("workerIncomePerCp ret NaN (NaN income / 0 cp?) for worker",t.label),r},workersSortedByIncomePerCp(e){const t=Date.now(),r=[];return e.workingWorkers.forEach(n=>{r.push({w:n,i:e.workerIncome(n),ipc:e.workerIncomePerCp(n)})}),r.sort((n,i)=>isNaN(n.ipc)?-1:isNaN(i.ipc)||!isFinite(n.ipc)?1:isFinite(i.ipc)?n.ipc-i.ipc:-1),console.log("workersSortedByIncomePerCp took",Date.now()-t,"ms"),r},townsTotalIncome(e){const t={},r=At();if(!r.ready)return t;r.towns.forEach(n=>t[r.tnk2tk(n)]={income:0,mapCp:0});for(const[n,i]of Object.entries(e.workingWorkers)){const o=r.tnk2tk(i.tnk);t[o].income+=e.workerIncome(i),t[o].mapCp+=e.workerSharedCp(i)}for(const[n,i]of Object.entries(t)){const o=e.prerelease_housesconfig?e.townsInfra[n].cost:e.haveLodging.cp.perTown[n];i.eff=i.income/(i.mapCp+o),i.income==0&&i.mapCp+o==0&&(i.eff=0)}return t},workedPlantzones(e){const t=Object.keys(e.pzJobs);return new Set(t)},autotakenNodes(e){const t=new Set([...e.autotakenGrindNodes]);for(const[n,i]of Object.entries(e.pzJobs))i.usedPath&&i.usedPath.forEach(o=>t.add(o));const r=At();if(r.ready&&e.activateAncado){const i=r.dijkstraNearestTowns(1343,4,t,!0).sort((l,u)=>l[1]-u[1]),[o,a,s]=i[0];s.forEach(l=>t.add(l))}return console.log("autotakenNodes getter",t),t},autotakenGrindNodesCP(e){const t=At(),r=[...e.autotakenGrindNodes].reduce((n,i)=>n+t.nodes[i].CP,0);return console.log("autotakenGrindNodesCP",r),r},autotakenNodesCP(e){const t=At();return[...e.autotakenNodes].reduce((n,i)=>n+t.nodes[i].CP,0)-e.autotakenGrindNodesCP},pzJobsTotalDailyProfit(e){let t=0;for(const[r,n]of Object.entries(e.pzJobs))t+=n.profit.priceDaily;return t},pzJobsTotalLodgingCost(e){let t=0;for(const[r,n]of Object.entries(e.pzJobs))t+=e.workerSharedLodgingCp(n.worker);return t},pzJobsDailyProfitPerCp(e){return this.pzJobsTotalDailyProfit/(e.autotakenNodesCP+e.pzJobsTotalLodgingCost)},workersFarming(e){return e.userWorkers.filter(t=>t.job=="farming")},workersFarmingCount(e){return e.workersFarming.length},farmingCP(e){return e.farmingEnable?80:0},farmingTotalProfit(e){return e.farmingEnable?e.farmingBareProfit+(e.farmingProfit-e.farmingBareProfit)/10*e.workersFarmingCount:0},farmingJobsTotalLodgingCost(e){let t=0;return e.workersFarming.forEach(r=>{t+=e.workerSharedLodgingCp(r)}),t},farmingJobsDailyProfitPerCp(e){return e.farmingTotalProfit/(80+e.farmingJobsTotalLodgingCost)},workersWorkshop(e){const t=At();return e.userWorkers.filter(r=>r.job&&t.jobIsWorkshop(r.job))},workersWorkshopCount(e){return e.workersWorkshop.length},workshopTotalProfit(e){let t=0;return e.workersWorkshop.forEach(r=>t+=e.workerIncome(r)),t},occupiedWorkshops(e){let t=new Set;return e.workersWorkshop.forEach(r=>t.add(r.job.hk)),console.log("occupiedWorkshops",t),t},workshopTotalCP(e){let t=0;return e.occupiedWorkshops.forEach(r=>t+=e.userWorkshops[r].manualCp),t},workshopJobsTotalLodgingCost(e){let t=0;return e.workersWorkshop.forEach(r=>{t+=e.workerSharedLodgingCp(r)}),t},workshopJobsDailyProfitPerCp(e){return e.workshopTotalProfit/(e.workshopTotalCP+e.workshopJobsTotalLodgingCost)},workersCustom(e){const t=At();return e.userWorkers.filter(r=>r.job&&t.jobIsCustom(r.job))},workersCustomCount(e){return e.workersCustom.length},customTotalProfit(e){let t=0;return e.workersCustom.forEach(r=>t+=r.job[1]),t},customTotalCP(e){let t=0;return e.workersCustom.forEach(r=>t+=r.job[2]),t},customJobsTotalLodgingCost(e){let t=0;return e.workersCustom.forEach(r=>{t+=e.workerSharedLodgingCp(r)}),t},customJobsDailyProfitPerCp(e){return e.customTotalProfit/(e.customTotalCP+e.customJobsTotalLodgingCost)},totalCP(e){return e.autotakenNodesCP+e.farmingCP+(e.prerelease_housesconfig?e.lodgage:e.haveLodging.cp.total)+e.workshopTotalCP+e.customTotalCP},workersIdleCount(e){return e.countWorkers-e.workedPlantzones.size-e.workersFarmingCount-e.workersWorkshopCount-e.workersCustomCount},allJobsTotalDailyProfit(e){return e.pzJobsTotalDailyProfit+e.farmingTotalProfit+e.workshopTotalProfit+e.customTotalProfit},allJobsDailyProfitPerCp(e){return this.allJobsTotalDailyProfit/e.totalCP},jobsUsingNodes:e=>t=>{const r=At(),n=t.filter(a=>!r.townSet.has(a)),i=new Set(n),o=[];for(const[a,s]of Object.entries(e.pzJobs))s.usedPath.filter(u=>i.has(u)).length&&o.push(s);return o},workerPzStats(e){const t=At(),r=[];return e.userWorkers.forEach(n=>{r.push(t.workerStatsOnPlantzone(n))}),console.log("workerPzStats"),r},pzProfitsBefore(e){const t=e.pzJobsTotalDailyProfit,r=e.autotakenNodesCP,n=e.pzJobsTotalLodgingCost,i=e.pzJobsDailyProfitPerCp;return{daily:t,cp:r,lodgingCp:n,dailyPerCp:i}},allJobsProfitsBefore(e){const t=e.allJobsTotalDailyProfit,r=e.totalCP,n=e.allJobsDailyProfitPerCp;return{daily:t,cp:r,dailyPerCp:n}},jobEfficiencyDelta:e=>(t,r)=>{const n=e.allJobsProfitsBefore;return(n.daily+t)/(n.cp+r)-n.dailyPerCp},jobsTally(e){const t={},r=At();if(!r.ready)return t;for(const[n,i]of Object.entries(e.pzJobs)){const o=r.plantzones[n],a=r.workerStatsOnPlantzone(i.worker).luck;if(o.lucky)for(const[l,u]of Object.entries(o.lucky))l in t||(t[l]=0),t[l]+=a/100*u*i.profit.cyclesDaily;if(r.isGiant(i.worker.charkey))for(const[l,u]of Object.entries(o.unlucky_gi))l in t||(t[l]=0),t[l]+=u*i.profit.cyclesDaily;else for(const[l,u]of Object.entries(o.unlucky))l in t||(t[l]=0),t[l]+=u*i.profit.cyclesDaily}return console.log("jobsTally getter"),t},lodgingCostsPerTownPerJobtype(e){const t={};e.userWorkers.filter(r=>gameStore.tnk2tk(r.tnk)==tk);for(const[r,n]of Object.entries(e.haveLodging.slots.perTown))e.haveLodging.cp.perTown[r],e.townWorkers(r);return t}}}),Ni=C0({id:"market",state:()=>({ready:!1,apiPrices:[],apiAlive:!1,calculatedPrices:{},apiDatetime:0}),actions:{async fetchData(){const e=Date.now(),t=re(),r=`https://apiv2.bdolytics.com/${t.selectedLang}/${t.selectedRegion}/market/central-market-data`,n=await(await fetch(r)).json(),i=At(),o=new Set(i.itemKeys);console.log("uset",o);const a={};n.data.forEach(s=>{o.has(s.item_id)&&(a[s.item_id]=s.price)});for(const s of Object.keys(i.vendorPrices))t.keepItems[s]=!0;this.calculatedPrices=await(await fetch("data/manual/calculated_prices.json")).json(),4001 in a&&(this.apiPrices=a,this.apiDatetime=Date.now(),this.apiAlive=!0,this.ready=!0,localStorage.setItem("market",JSON.stringify(this.$state))),console.log("fetchMarket took",Date.now()-e,"ms")},itemPriceUrl(e){return e in this.apiPrices?`https://bdolytics.com/market/central-market/item/${e}`:re().itemUrl+e},priceBunch(e){if(e===null||typeof e>"u")return null;let t=0;for(const[r,n]of Object.entries(e))t+=this.prices[r]*n;return t},pricePzd(e,t){const r=this.priceBunch(e.unlucky);if(e.lucky){const n=this.priceBunch(e.lucky);return t/100*n+(1-t/100)*r}return r},priceLerp(e,t,r){return e===null?t:r/100*e+(1-r/100)*t}},getters:{prices(){const e=Date.now(),t=re(),r=At();let n={};for(const[i,o]of Object.entries(this.apiPrices))n[i]=o;for(const[i,o]of Object.entries(r.vendorPrices))n[i]=o;for(const i of Object.keys(n))i in t.customPrices&&t.customPrices[i]!==""&&(n[i]=t.customPrices[i]),!(i in t.keepItems&&t.keepItems[i])&&(i in r.vendorPrices||(n[i]*=t.selectedTax));for(const[i,o]of Object.entries(this.calculatedPrices))if(!(i in t.customPrices&&t.customPrices[i]!=="")){n[i]=0;for(const[a,s]of Object.entries(o))n[i]+=n[a]*s}return console.log("prices getter took",Date.now()-e,"ms"),n}}});var _S=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bY(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var R7={exports:{}},D7={exports:{}};(function(e,t){(function(){var r,n,i,o,a,s,l,u,c,f,h,d,p,v,g;i=Math.floor,f=Math.min,n=function(m,_){return m<_?-1:m>_?1:0},c=function(m,_,y,w,T){var S;if(y==null&&(y=0),T==null&&(T=n),y<0)throw new Error("lo must be non-negative");for(w==null&&(w=m.length);y<w;)S=i((y+w)/2),T(_,m[S])<0?w=S:y=S+1;return[].splice.apply(m,[y,y-y].concat(_)),_},s=function(m,_,y){return y==null&&(y=n),m.push(_),v(m,0,m.length-1,y)},a=function(m,_){var y,w;return _==null&&(_=n),y=m.pop(),m.length?(w=m[0],m[0]=y,g(m,0,_)):w=y,w},u=function(m,_,y){var w;return y==null&&(y=n),w=m[0],m[0]=_,g(m,0,y),w},l=function(m,_,y){var w;return y==null&&(y=n),m.length&&y(m[0],_)<0&&(w=[m[0],_],_=w[0],m[0]=w[1],g(m,0,y)),_},o=function(m,_){var y,w,T,S,P,A;for(_==null&&(_=n),S=function(){A=[];for(var k=0,C=i(m.length/2);0<=C?k<C:k>C;0<=C?k++:k--)A.push(k);return A}.apply(this).reverse(),P=[],w=0,T=S.length;w<T;w++)y=S[w],P.push(g(m,y,_));return P},p=function(m,_,y){var w;if(y==null&&(y=n),w=m.indexOf(_),w!==-1)return v(m,0,w,y),g(m,w,y)},h=function(m,_,y){var w,T,S,P,A;if(y==null&&(y=n),T=m.slice(0,_),!T.length)return T;for(o(T,y),A=m.slice(_),S=0,P=A.length;S<P;S++)w=A[S],l(T,w,y);return T.sort(y).reverse()},d=function(m,_,y){var w,T,S,P,A,k,C,M,D;if(y==null&&(y=n),_*10<=m.length){if(S=m.slice(0,_).sort(y),!S.length)return S;for(T=S[S.length-1],C=m.slice(_),P=0,k=C.length;P<k;P++)w=C[P],y(w,T)<0&&(c(S,w,0,null,y),S.pop(),T=S[S.length-1]);return S}for(o(m,y),D=[],A=0,M=f(_,m.length);0<=M?A<M:A>M;0<=M?++A:--A)D.push(a(m,y));return D},v=function(m,_,y,w){var T,S,P;for(w==null&&(w=n),T=m[y];y>_;){if(P=y-1>>1,S=m[P],w(T,S)<0){m[y]=S,y=P;continue}break}return m[y]=T},g=function(m,_,y){var w,T,S,P,A;for(y==null&&(y=n),T=m.length,A=_,S=m[_],w=2*_+1;w<T;)P=w+1,P<T&&!(y(m[w],m[P])<0)&&(w=P),m[_]=m[w],_=w,w=2*_+1;return m[_]=S,v(m,A,_,y)},r=function(){m.push=s,m.pop=a,m.replace=u,m.pushpop=l,m.heapify=o,m.updateItem=p,m.nlargest=h,m.nsmallest=d;function m(_){this.cmp=_!=null?_:n,this.nodes=[]}return m.prototype.push=function(_){return s(this.nodes,_,this.cmp)},m.prototype.pop=function(){return a(this.nodes,this.cmp)},m.prototype.peek=function(){return this.nodes[0]},m.prototype.contains=function(_){return this.nodes.indexOf(_)!==-1},m.prototype.replace=function(_){return u(this.nodes,_,this.cmp)},m.prototype.pushpop=function(_){return l(this.nodes,_,this.cmp)},m.prototype.heapify=function(){return o(this.nodes,this.cmp)},m.prototype.updateItem=function(_){return p(this.nodes,_,this.cmp)},m.prototype.clear=function(){return this.nodes=[]},m.prototype.empty=function(){return this.nodes.length===0},m.prototype.size=function(){return this.nodes.length},m.prototype.clone=function(){var _;return _=new m,_.nodes=this.nodes.slice(0),_},m.prototype.toArray=function(){return this.nodes.slice(0)},m.prototype.insert=m.prototype.push,m.prototype.top=m.prototype.peek,m.prototype.front=m.prototype.peek,m.prototype.has=m.prototype.contains,m.prototype.copy=m.prototype.clone,m}(),function(m,_){return e.exports=_()}(this,function(){return r})}).call(_S)})(D7);(function(e){e.exports=D7.exports})(R7);const Dg=bY(R7.exports),At=C0({id:"game",state:()=>({ready:!1,plantzoneDrops:{},pzdSet:null,plantzoneStatic:{},itemKeys:[],nodes:{},distPerTown:{},distToTown:{},lodgingPerTown:{},houseInfo:{},towns:[],townNames:{},regionGroups:{},loc:{},links:{},icons:{},workerStatic:{},skillData:{},vendorPrices:{}}),actions:{availableSkillPool(e,t){const r=new Set(e);return t&&r.delete(t),this.skillKeys.filter(i=>this.skillData[i].tier!=4&&!r.has(i))},randomSkill(e){const t=this.availableSkillPool(e);return t[Math.floor(Math.random()*t.length)]},wspdBonusOnPlantzone(e){let t=0;return this.ready&&e.skills.forEach(r=>{const n=this.skillData[r];n!==void 0&&("wspd"in n&&(t+=n.wspd),"wspd_farm"in n&&(t+=n.wspd_farm))}),t},wspdBonus(e,t){let r=0;return this.ready&&e.skills.forEach(n=>{const i=this.skillData[n];i!==void 0&&("wspd"in i&&(r+=i.wspd),"wspd_"+t in i&&(r+=i["wspd_"+t]))}),r},mspdBonus(e){let t=0;return this.ready&&e.skills.forEach(r=>{const n=this.skillData[r];n!==void 0&&"mspd"in n&&(t+=n.mspd)}),t},luckBonus(e){let t=0;return this.ready&&e.skills.forEach(r=>{const n=this.skillData[r];n!==void 0&&"luck"in n&&(t+=n.luck)}),t},workerStatsOnPlantzone(e){return this.ready?{wspd:e.wspdSheet+this.wspdBonusOnPlantzone(e),mspd:this.workerStatic[e.charkey].mspd/100*(e.mspdSheet/(this.workerStatic[e.charkey].mspd/100)+this.mspdBonus(e)/100),luck:e.luckSheet+this.luckBonus(e)}:{wspd:0,mspd:0,luck:0}},workerStatsOnIndustry(e,t){return this.ready?{wspd:e.wspdSheet+this.wspdBonus(e,t),mspd:this.workerStatic[e.charkey].mspd/100*(e.mspdSheet/(this.workerStatic[e.charkey].mspd/100)+this.mspdBonus(e)/100),luck:e.luckSheet+this.luckBonus(e)}:{wspd:0,mspd:0,luck:0}},workerStatsOnCurrentJob(e){var t="farm";if(this.jobIsWorkshop(e.job)){const r=re(),n=e.job.hk;n in r.userWorkshops||(r.userWorkshops[n]={...r.defaultUserWorkshop}),t=r.userWorkshops[n].industry}return{wspd:e.wspdSheet+this.wspdBonus(e,t),mspd:this.workerStatic[e.charkey].mspd/100*(e.mspdSheet/(this.workerStatic[e.charkey].mspd/100)+this.mspdBonus(e)/100),luck:e.luckSheet+this.luckBonus(e)}},workerStatRank(e){const t=e.level-1,r=this.workerStatic[e.charkey],n=r.wspd_lo*t,o=r.wspd_hi*t-n,s=(e.wspdSheet*1e6-r.wspd-n)/o||0,l=r.mspd_lo*t,u=r.mspd_hi*t,f=((e.mspdSheet/(r.mspd/100)-1)*1e6-l)/(u-l)||0,h=r.luck_lo*t,d=r.luck_hi*t,v=(e.luckSheet*1e4-r.luck-h)/(d-h)||0;return{wspd_rank:s,mspd_rank:f,luck_rank:v}},houseLodging(e){var n;const t=(n=this.houseInfo[e].CraftList[1])!=null?n:0;return{0:0,1:1,2:2,3:4,4:6,5:8}[t]},houseStorage(e){var n;const t=(n=this.houseInfo[e].CraftList[2])!=null?n:0;return{0:0,1:3,2:5,3:8,4:12,5:16}[t]},houseCost(e){var r;return(r=this.houseInfo[e]&&this.houseInfo[e].CP)!=null?r:NaN},async fetchData(){const e=Date.now();this.plantzoneDrops=await(await fetch("data/manual/plantzone_drops.json")).json(),this.pzdSet=new Set(Object.keys(this.plantzoneDrops).map(n=>+n)),this.plantzoneStatic=await(await fetch("data/plantzone.json")).json(),this.itemInfo=await(await fetch("data/manual/item_info.json")).json(),this.itemKeys=await(await fetch("data/manual/plantzone_uniques.json")).json(),this.nodes=await(await fetch("data/exploration.json")).json(),this.tk2pzk=await(await fetch("data/distances_tk2pzk.json")).json(),this.pzk2tk=await(await fetch("data/distances_pzk2tk.json")).json(),this.hk2nk=await(await fetch("data/hk2nk.json")).json(),this.tk2nk=await(await fetch("data/distances_tk2nk.json")).json(),this.lodgingPerTown=await(await fetch("data/lodging_per_town.json")).json(),this.houseInfo=await(await fetch("data/houseinfo.json")).json(),this.towns=[1,301,302,601,61,602,604,608,1002,1101,1141,1301,1314,1319,1343,1380,1604,1623,1649,1691,1750,1781,1785,1795],this.vendorPrices=await(await fetch("data/manual/vendor_prices.json")).json(),this._tk2tnk={5:1,32:301,52:302,77:601,88:61,107:602,120:604,126:608,182:1002,202:1101,221:1141,229:1301,601:1314,605:1319,619:1343,693:1380,706:1604,735:1623,873:1649,955:1691,1124:1750,1210:1781,1219:1785,1246:1795};const t={};for(const[n,i]of Object.entries(this._tk2tnk))t[i]=n;this._tnk2tk=t;const r={};for(const[n,i]of Object.entries(this.plantzoneStatic))if(n in this.plantzoneDrops){const o=i.regiongroup;o in r?r[o].push(n):r[o]=[n]}this.regionGroups=r,this.skillData=await(await fetch("data/manual/skills.json")).json(),this.workerStatic=await(await fetch("data/worker_static.json")).json(),this.loc=await(await fetch("data/loc.json")).json(),this.links=await(await fetch("data/links.json")).json(),this.ls_lookup=await(await fetch("data/all_lodging_storage.json")).json(),this.ls_lodgings_sorted={};for(const[n,i]of Object.entries(this.ls_lookup))this.ls_lodgings_sorted[n]=Object.keys(i).sort((o,a)=>o-a);this.giantSpecies=new Set([2,4,8]),this.speciesIcons={0:"\u{1F47A}",1:"\u{1F468}",2:"\u{1F422}",3:"\u{1F47A}",4:"\u{1F422}",5:"\u{1F47A}",6:"\u{1F47A}",7:"\u{1F468}",8:"\u{1F422}"},this.ready=!0,console.log("fetchGame took",Date.now()-e,"ms")},isGiant(e){if(this.ready)return this.giantSpecies.has(this.workerStatic[e].species)},tk2tnk(e){if(this.ready){if(e in this._tk2tnk)return this._tk2tnk[e];console.log("unknown tk",e/0)}},tnk2tk(e){if(this.ready){if(e in this._tnk2tk)return this._tnk2tk[e];console.log("unknown tnk",e)}},dijDiscountedNearestPlantzones(e,t){if(!this.ready)return;const r=re();let n=new Set;const i={[e]:r.autotakenNodes.has(e)?0:this.nodes[e].CP},o={[e]:null},a=new Dg((u,c)=>i[u]-i[c]);a.push(e);for(var s;a.size()&&(s=a.pop(),!(this.pzdSet.has(s)&&!r.autotakenNodes.has(s)&&(n.add(s),n.size==t)));)this.links[s].forEach(u=>{const c=r.autotakenNodes.has(u)?0:this.nodes[u].CP,f=i[s]+c;u in i?f<i[u]&&(i[u]=f,o[u]=s):(i[u]=f,o[u]=s,a.push(u))});const l=[];return n.forEach(u=>{const c=[u];let f=u;for(;o[f]!==null;)c.push(o[f]),f=o[f];l.push([u,i[u],c.reverse()])}),l},dijkstraPath(e,t,r){if(!this.ready)return[null,0];const n={[e]:null},i={[e]:r&&r.has(e)?0:this.nodes[e].CP},o=new Dg((u,c)=>i[u]-i[c]);o.push(e);for(var a;o.size()&&(a=o.pop(),a!=t);)this.links[a].forEach(u=>{this.nodes[u]==null&&console.log("dijkstraPath: no exploration node",u);const c=r&&r.has(u)?0:this.nodes[u].CP,f=i[a]+c;u in i?f<i[u]&&(i[u]=f,n[u]=a):(i[u]=f,n[u]=a,o.push(u))});const s=[t];let l=t;for(;n[l]!==null;)s.push(n[l]),l=n[l];return[s.reverse(),i[t]]},dijkstraNearestTowns(e,t,r,n){if(!this.ready)return;let i=new Set;const o={[e]:null},a={[e]:r&&r.has(e)?0:this.nodes[e].CP},s=new Dg((c,f)=>a[c]-a[f]);s.push(e);for(var l;s.size()&&(l=s.pop(),!(this.townSet.has(l)&&(l!=1343||!n)&&(i.add(l),i.size==t)));)this.links[l].forEach(c=>{if(this.nodes[c]==null)throw Error(`dijkstraNearestTowns: no exploration node ${c}`);const f=r&&r.has(c)?0:this.nodes[c].CP,h=a[l]+f;c in a?h<a[c]&&(a[c]=h,o[c]=l):(a[c]=h,o[c]=l,s.push(c))});const u=[];return i.forEach(c=>{const f=[c];let h=c;for(;o[h]!==null;)f.push(o[h]),h=o[h];u.push([c,a[c],f])}),u},pzSelectionEntry(e,t,r,n,i,o,a){const s=re(),l=this.profitPzTownStats(e,r,a.wspd,a.mspd,a.luck,this.isGiant(o.charkey)),u=s.townInfraAddCost(t,1,this.plantzones[e].itemkeys),c={pz:this.plantzones[e],tnk:r,mapCp:n,path:i,townCp:u.cost,infraTooltip:u.tooltip,cp:n+u.cost,profit:l,w:o,statsOnPz:a};return c.dailyPerCp=c.profit.priceDaily/(n+u.cost),c.effDelta=s.jobEfficiencyDelta(c.profit.priceDaily,n+u.cost),c},addBedInfo(e){return re().townInfraAddCost(e,1,[])},farmSelectionEntry(e){const t=re(),r=this.addBedInfo(e),n=t.farmingProfitPerWorker;return{income:n,infraCp:r.cost,infraTooltip:r.tooltip,dailyPerCp:n/r.cost,effDelta:t.jobEfficiencyDelta(n,r.cost)}},profitPzTownStats(e,t,r,n,i,o){if(!(e in this.plantzones))return{cycleValue:0,cycleMinutes:NaN,cyclesDaily:NaN,priceDaily:0};const a=re(),s=Ni(),l=this.plantzones[e];let u={dist:this.pzDistance(t,e),cycleValue:s.priceLerp(o?l.luckyValue_gi:l.luckyValue,o?l.unluckyValue_gi:l.unluckyValue,i)};return u.cyclesDaily=a.calcCyclesDaily(l.workload,l.regiongroup,r,u.dist,n),u.priceDaily=u.cyclesDaily*u.cycleValue/1e6,u},profitPzTownArtisans(e,t,r){const n=this.plantzones[e];let i=this.medianGoblin(t),o=this.profitPzTownStats(e,t,i.wspd+5,i.mspd,i.luck,!1);if(o.dist>1e6)return{connected:!1};o.charkey=i.charkey,o.wspd=i.wspd;const a={...n,tnk:t,...o,cp:r,dailyPerCp:o.priceDaily/r,isGiant:!1,kind:"goblin"};i=this.medianGiant(t),o=this.profitPzTownStats(e,t,i.wspd+5,i.mspd,i.luck,!0),o.charkey=i.charkey,o.wspd=i.wspd;const s={...n,tnk:t,...o,cp:r,dailyPerCp:o.priceDaily/r,isGiant:!0,kind:"giant"},l=s&&s.dailyPerCp>a.dailyPerCp?s:a,u=this.medianHuman(t);o=this.profitPzTownStats(e,t,u.wspd+5,u.mspd,u.luck,!1),o.charkey=u.charkey,o.wspd=u.wspd;const c={...n,tnk:t,...o,cp:r,dailyPerCp:o.priceDaily/r,isGiant:!0,kind:"human"},f=c&&c.dailyPerCp>l.dailyPerCp?c:l,h={[s.charkey]:s.priceDaily,[c.charkey]:c.priceDaily,[a.charkey]:a.priceDaily},d=Object.entries(h).map(([p,v])=>({charkey:p,priceDaily:v}));return d.sort((p,v)=>p&&v&&v.priceDaily-p.priceDaily),f.alt_workers_dict=h,f.alt_workers=d,f.connected=!0,f},makeMedianChar(e){const t={},r=this.workerStatic[e];let n=r.wspd,i=0,o=r.luck;for(let s=2;s<=40;s++)n+=(r.wspd_lo+r.wspd_hi)/2,i+=(r.mspd_lo+r.mspd_hi)/2,o+=(r.luck_lo+r.luck_hi)/2;let a=r.mspd*(1+i/1e6);return t.wspd=Math.round(n/1e6*100)/100,t.mspd=Math.round(a)/100,t.luck=Math.round(o/1e4*100)/100,t.charkey=e,t.isGiant=this.isGiant(e),t},medianGoblin(e){return e==1623?this.makeMedianChar(8003):e==1604?this.makeMedianChar(8003):e==1691?this.makeMedianChar(8023):e==1750?this.makeMedianChar(8035):e==1781?this.makeMedianChar(8050):e==1785?this.makeMedianChar(8050):e==1795?this.makeMedianChar(8050):this.makeMedianChar(7572)},medianGiant(e){return e==1623?this.makeMedianChar(8006):e==1604?this.makeMedianChar(8006):e==1691?this.makeMedianChar(8027):e==1750?this.makeMedianChar(8039):e==1781?this.makeMedianChar(8058):e==1785?this.makeMedianChar(8058):e==1795?this.makeMedianChar(8058):this.makeMedianChar(7571)},medianHuman(e){return e==1623?this.makeMedianChar(8009):e==1604?this.makeMedianChar(8009):e==1691?this.makeMedianChar(8031):e==1750?this.makeMedianChar(8043):e==1781?this.makeMedianChar(8054):e==1785?this.makeMedianChar(8054):e==1795?this.makeMedianChar(8054):this.makeMedianChar(7573)},profitWorkshopWorker(e,t,r){const n=re(),i=this.workerStatsOnIndustry(r,t.industry),o=this.houseDistance(r.tnk,e),a=n.calcWalkMinutes(o,i.mspd),s=Math.ceil(t.manualWorkload/i.wspd),l=5*s+a;return 24*60/l*t.manualCycleIncome/1e6},itemName(e){if(!this.ready)return e;const t=re();return e in this.loc[t.selectedLang].item?this.loc[t.selectedLang].item[e]:e},nodeName(e){if(!this.ready)return e;const t=re();return this.loc[t.selectedLang].node[e]},parentNodeName(e){if(this.ready&&e in this.plantzoneStatic){const t=this.plantzoneStatic[e].parent;return this.nodeName(t)}else return e},plantzoneName(e){if(this.ready&&e in this.plantzoneStatic){const t=this.plantzoneStatic[e].node.key;return this.parentNodeName(e)+" "+this.nodeName(t)}else return""},pzDistance(e,t){const r=this.pzk2tk[t],n=this._tnk2tk[e];for(let i=0;i<r.length;i++)if(r[i][0]==n)return r[i][1];return NaN},houseDistance(e,t){if(!this.ready)return 0;const r=this.hk2nk[t],n=this._tnk2tk[e];return this.tk2nk[n][r]},isWorkable(e){return[4,6,7,8,9,14,15].some(r=>r==this.nodes[e].kind)},isTown(e){return[1,2].some(r=>r==this.nodes[e].kind)},jobIsIdle(e){return e===null},jobIsPz(e){return e&&typeof e=="object"&&"kind"in e&&e.kind=="plantzone"||typeof e=="number"},jobIsFarming(e){return e=="farming"},jobIsCustom(e){return Array.isArray(e)},jobIsWorkshop(e){return e&&typeof e=="object"&&"kind"in e&&e.kind=="workshop"},jobIcon(e){return this.jobIsFarming(e)?"\u{1F33B}":this.jobIsCustom(e)?"\u270D\uFE0F":this.jobIsWorkshop(e)?"\u{1F3ED}":""},workerJobDescription(e){const t=e.job;if(this.jobIsIdle(t))return"idle";if(this.jobIsPz(t))return this.uloc.node[t.pzk];if(this.jobIsFarming(t))return"["+this.jobIcon(t)+"]";if(this.jobIsCustom(t))return"["+this.jobIcon(t)+"] "+t[3];if(this.jobIsWorkshop(t)){const n=At().uloc.char[t.hk],i=yY(n);return"["+this.jobIcon(t)+"] "+i}return"UNKNOWN_JOBTYPE"},lsLookup(e,t,r){if(!this.ready)return null;const n=this.ls_lookup[e];let i={wantLodging:t,wantStorage:r,storage:NaN,cost:NaN,lodging:NaN,success:!1};for(let u in n){const c=Number(u);if(c>=t){const f=n[c],h=gY(f,d=>d.storage>=r);if(h){if(!i.success){i={wantLodging:t,wantStorage:r,...h,lodging:c,success:!0};continue}if(i.success&&h.cost<i.cost){i={wantLodging:t,wantStorage:r,...h,lodging:c,success:!0};break}}}}const o=t==this.townUpperLimits[e].lodging,a=t>this.townUpperLimits[e].lodging,s=r==this.townUpperLimits[e].storage,l=r>this.townUpperLimits[e].storage;return i={...i,warnL:o,errL:a,warnS:s,errS:l},i}},getters:{uloc(){const e=re();return this.ready?this.loc[e.selectedLang]:{town:{},housetype:{},char:{},item:{},node:{},skill:{},skilldesc:{}}},townSet(){return new Set(this.towns)},nearestTown:e=>t=>{const r=e.pzk2tk[t];return r&&r[0]?{tk:r[0][0],dist:r[0][1]}:{tk:0,dist:NaN}},skillKeys(){return Object.keys(this.skillData).map(Number)},housesPerTown(){const e={};for(const[t,r]of Object.entries(this.houseInfo)){const n=r.affTown;n in e||(e[n]=[]),e[n].push(Number(t))}return e},townUpperLimits(){const e={};for(const[t,r]of Object.entries(this.housesPerTown)){const n={cp:0,storage:0,lodging:0};for(const i of r)n.cp+=this.houseCost(i),n.storage+=this.houseStorage(i),n.lodging+=this.houseLodging(i);e[t]=n}return e},plantzones(){if(!this.ready)return{};const e=Date.now(),t=Ni(),r=re();let n={};for(const[i,o]of Object.entries(this.plantzoneDrops)){const a={...o,...this.plantzoneStatic[i]};a.name=this.plantzoneName(i);const s=t.priceBunch(a.lucky);a.unluckyValue=t.priceBunch(a.unlucky),a.luckyValue=a.unluckyValue+s,a.unluckyValue_gi=t.priceBunch(a.unlucky_gi),a.luckyValue_gi=a.unluckyValue_gi+s,a.activeWorkload=a.workload*(2-r.productivity(a.regiongroup)),a.itemkeys=new Set([...Object.keys(a.unlucky),...Object.keys(a.lucky)]),n[i]=a}return console.log("plantzones getter took",Date.now()-e,"ms"),n}}}),V1=C0({id:"map",state:()=>({target:[0,0],zoom:-8})}),wY=C0({id:"droprates",state:()=>({selected_pzk:"",selected_ik:"",selected_specie:"",selected_model:"a",usePooling:!1,plotChiSquared:!1})});const $e=(e,t)=>{const r=e.__vccOpts||e;for(const[n,i]of t)r[n]=i;return r},SY={class:"wrapper"},TY=z("Home"),PY=z("Plantzones"),EY=z("Modifiers"),kY=z("Settings"),AY=z("About"),CY={async beforeCreate(){At().fetchData();const t=re(),r=localStorage.getItem("user");t.migrate(r);const n=Ni(),i=localStorage.getItem("market");i&&n.$patch(JSON.parse(i));const o=3600*1e3;n.apiDatetime+o<Date.now()&&n.fetchData();const a=V1(),s=localStorage.getItem("map");a.$patch(JSON.parse(s))}},MY=Object.assign(CY,{__name:"App",setup(e){return(t,r)=>(I(),R(W,null,[b("header",null,[b("div",SY,[b("nav",null,[xt(br(pc),{to:"/"},{default:Ee(()=>[TY]),_:1}),xt(br(pc),{to:"/plantzones"},{default:Ee(()=>[PY]),_:1}),xt(br(pc),{to:"/modifiers"},{default:Ee(()=>[EY]),_:1}),xt(br(pc),{to:"/settings"},{default:Ee(()=>[kY]),_:1}),xt(br(pc),{to:"/about"},{default:Ee(()=>[AY]),_:1})])])]),xt(br(O7))],64))}}),xY=$e(MY,[["__scopeId","data-v-14b67078"]]),LY="modulepreload",IY=function(e){return"/workerman/"+e},FC={},OY=function(t,r,n){return!r||r.length===0?t():Promise.all(r.map(i=>{if(i=IY(i),i in FC)return;FC[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${a}`))return;const s=document.createElement("link");if(s.rel=o?"stylesheet":LY,o||(s.as="script",s.crossOrigin=""),s.href=i,document.head.appendChild(s),o)return new Promise((l,u)=>{s.addEventListener("load",l),s.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t())};const RY={setup(){const e=At(),t=re();return{gameStore:e,userStore:t}},props:{w:Object,homeless:Boolean,unsendable:Boolean},data:()=>({}),methods:{formatFixed:Ft,percentageToColor:mY}},DY={key:0,class:"fss"},NY={key:1},FY={key:0,class:"fss"},BY={key:1},$Y={key:0,class:"fss"},zY={key:1},VY={class:"center"},UY=z(" @ "),GY=z(" idle "),jY={class:"center"},WY=["disabled"];function HY(e,t,r,n,i,o){return I(),R("tr",null,[b("td",null,[b("button",{onClick:t[0]||(t[0]=a=>e.$emit("fire"))},"fire")]),b("td",null,L((this.userStore.displayWorkerNames?r.w.label:"")+this.gameStore.speciesIcons[this.gameStore.workerStatic[r.w.charkey].species]+r.w.level),1),b("td",{style:Nl(this.userStore.prerelease_colorGoblins&&r.w.charkey==7572&&{backgroundColor:o.percentageToColor(this.userStore.workerStatsForDisplay(r.w).wspd,this.userStore.workersMinMaxStats.wspd.lo,this.userStore.workersMinMaxStats.wspd.hi,.2)})},[this.userStore.displayWorkerStatsRank?(I(),R("span",DY,L(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).wspd,1))+"% ",1)):(I(),R("span",NY,L(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).wspd,2)),1))],4),b("td",{style:Nl(this.userStore.prerelease_colorGoblins&&r.w.charkey==7572&&{backgroundColor:o.percentageToColor(this.userStore.workerStatsForDisplay(r.w).mspd,this.userStore.workersMinMaxStats.mspd.lo,this.userStore.workersMinMaxStats.mspd.hi,.2)})},[this.userStore.displayWorkerStatsRank?(I(),R("span",FY,L(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).mspd,1))+"% ",1)):(I(),R("span",BY,L(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).mspd,2)),1))],4),b("td",{style:Nl(this.userStore.prerelease_colorGoblins&&r.w.charkey==7572&&{backgroundColor:o.percentageToColor(this.userStore.workerStatsForDisplay(r.w).luck,this.userStore.workersMinMaxStats.luck.lo,this.userStore.workersMinMaxStats.luck.hi,.2)})},[this.userStore.displayWorkerStatsRank?(I(),R("span",$Y,L(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).luck,1))+"% ",1)):(I(),R("span",zY,L(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).luck,2)),1))],4),b("td",VY,[b("button",{onClick:t[1]||(t[1]=a=>e.$emit("edit"))},"edit")]),b("td",null,[r.w.job?(I(),R(W,{key:0},[typeof r.w.job=="number"?(I(),R("span",{key:0,onClick:t[2]||(t[2]=a=>e.$emit("pan",this.gameStore.nodes[r.w.job].pos)),class:"clickable"},L(n.gameStore.workerJobDescription(r.w)),1)):(I(),R(W,{key:1},[z(L(n.gameStore.workerJobDescription(r.w)),1)],64)),UY,n.userStore.displayProfitPerCp?(I(),R(W,{key:2},[z(L(o.formatFixed(n.userStore.workerIncomePerCp(r.w),2))+" M$/day/CP ",1)],64)):(I(),R(W,{key:3},[z(L(o.formatFixed(n.userStore.workerIncome(r.w),2))+" M$/day ",1)],64))],64)):(I(),R(W,{key:1},[GY],64))]),b("td",jY,[r.w.job?(I(),R("button",{key:0,onClick:t[3]||(t[3]=a=>r.w.job=null)},"stop")):(I(),R("button",{key:1,onClick:t[4]||(t[4]=a=>e.$emit("send")),disabled:r.unsendable},"send",8,WY))])])}const N7=$e(RY,[["render",HY],["__scopeId","data-v-6b7a229f"]]);const XY={setup(){const e=At(),t=re();return{gameStore:e,userStore:t}},props:{o:Object,tk:String},emits:["selectLodging","selectHouses","hireWorker","editWorker","sendWorker","panToPaPos"],components:{Worker:N7},data:()=>({}),methods:{formatFixed:Ft,fireWorker(e){this.userStore.userWorkers=this.userStore.userWorkers.filter(t=>t!=e)}}},SP=e=>(Ar("data-v-e46c1bdb"),e=e(),Cr(),e),YY={colspan:"2"},qY=z(" worker "),ZY=SP(()=>b("td",{class:"center"},"\u{1F528}",-1)),KY=SP(()=>b("td",{class:"center"},"\u{1F9B6}",-1)),JY=SP(()=>b("td",{class:"center"},"\u{1F340}",-1)),QY=z(" \xA0 "),tq={colspan:"8"},eq=z(" empty slot ");function rq(e,t,r,n,i,o){const a=pe("Worker");return I(),R(W,null,[b("tr",null,[b("td",YY,[qY,n.userStore.prerelease_housesconfig?(I(),R("button",{key:0,onClick:t[0]||(t[0]=s=>this.$emit("hireWorker",r.tk))}," hire ")):tt("",!0)]),ZY,KY,JY,b("td",{colspan:"3",class:en({unresolved:n.gameStore.ready&&n.userStore.townsInfra[r.tk].success==!1})},[b("span",{onClick:t[1]||(t[1]=s=>e.$emit("panToPaPos",this.gameStore.nodes[this.gameStore.tk2tnk(r.tk)].pos)),class:"bold clickable"},L(n.gameStore.uloc.town[r.tk]),1),z(" "+L()+" ",1),n.userStore.displayProfitPerCp?(I(),R(W,{key:0},[z(L(o.formatFixed(n.userStore.townsTotalIncome[r.tk]&&n.userStore.townsTotalIncome[r.tk].eff,2))+" M$/day/CP ",1)],64)):(I(),R(W,{key:1},[z(L(o.formatFixed(n.userStore.townsTotalIncome[r.tk]&&n.userStore.townsTotalIncome[r.tk].income,1))+" M$/day ",1)],64)),QY,n.userStore.prerelease_housesconfig?(I(),R(W,{key:2},[z(L(n.userStore.townWorkingWorkers(r.tk).length)+" \u{1F6CF}\uFE0F ",1),b("span",null,L(n.userStore.townsStoreItemkeys[r.tk]&&n.userStore.townsStoreItemkeys[r.tk].size),1),z(" \u{1F4E6} "+L(n.gameStore.ready&&n.userStore.townsInfra[r.tk].cost)+" CP ",1),b("button",{onClick:t[2]||(t[2]=s=>this.$emit("selectHouses",r.tk))}," config ")],64)):(I(),R(W,{key:3},[z(L(n.userStore.haveLodging.slots.perTown[r.tk])+" \u{1F6CF}\uFE0F / "+L(n.userStore.haveLodging.cp.perTown[r.tk])+" CP ",1),b("button",{onClick:t[3]||(t[3]=s=>this.$emit("selectLodging",r.tk))}," lodging ")],64))],2)]),(I(!0),R(W,null,It(n.userStore.userWorkers.filter(s=>n.gameStore.tnk2tk(s.tnk)==r.tk),(s,l)=>(I(),va(a,{w:s,homeless:!0,class:en({homeless:!n.userStore.prerelease_housesconfig&&l>n.userStore.haveLodging.slots.perTown[r.tk]-1}),unsendable:r.tk==619&&!n.userStore.activateAncado,onFire:u=>o.fireWorker(s),onEdit:u=>this.$emit("editWorker",s),onSend:u=>this.$emit("sendWorker",s),onPan:t[4]||(t[4]=u=>this.$emit("panToPaPos",u))},null,8,["w","class","unsendable","onFire","onEdit","onSend"]))),256)),n.userStore.prerelease_housesconfig?tt("",!0):(I(),R(W,{key:0},[n.userStore.townFreeLodgingCount(r.tk)>0?(I(!0),R(W,{key:0},It(n.userStore.townFreeLodgingCount(r.tk),s=>(I(),R("tr",null,[b("td",tq,[eq,n.userStore.townFreeLodgingCount(r.tk)>0?(I(),R("button",{key:0,onClick:t[5]||(t[5]=l=>this.$emit("hireWorker",r.tk))}," hire ")):tt("",!0)])]))),256)):tt("",!0)],64))],64)}const nq=$e(XY,[["render",rq],["__scopeId","data-v-e46c1bdb"]]);const iq={setup(){const e=At(),t=re();return{gameStore:e,userStore:t}},props:{pzk:Number},emits:["showModifierDialog","editWorker"],components:{},data:()=>({selectedRedirect:0}),methods:{formatFixed:Ft,makeIconSrc:Vi,plantzoneNearestTownsFreeWorkersProfits(e,t){const r=[];return this.gameStore.dijkstraNearestTowns(e,t,this.userStore.autotakenNodes).forEach(([i,o,a])=>{const s=this.gameStore._tnk2tk[i],l=this.userStore.getFreeWorkers(s),u=this.selectedRedirect>0?this.gameStore._tnk2tk[this.selectedRedirect]:s;l.forEach(c=>{const f=this.gameStore.workerStatsOnPlantzone(c);r.push(this.gameStore.pzSelectionEntry(e,u,i,o,a,c,f))})}),r.sort((i,o)=>o.dailyPerCp-i.dailyPerCp),r}},computed:{freeWorkers(){return this.plantzoneNearestTownsFreeWorkersProfits(this.pzk,99).filter((r,n,i)=>n===i.findIndex(o=>o.tnk===r.tnk&&JSON.stringify(o.statsOnPz)===JSON.stringify(r.statsOnPz)))}}},cu=e=>(Ar("data-v-6fd5ad65"),e=e(),Cr(),e),oq={key:0},aq=["src"],sq=z(" workload: "),lq={id:"plantzoneWorkerInfo"},uq=cu(()=>b("br",null,null,-1)),cq=cu(()=>b("abbr",{class:"tooltip",title:"\u03A3 of connection nodes costs shared proportionally between all active jobs using them + full cost of this node"},"\u2139\uFE0F",-1)),fq=cu(()=>b("br",null,null,-1)),hq=["title"],dq=cu(()=>b("br",null,null,-1)),pq=["title"],vq=z(" worker: none "),gq={class:"spaced-columns"},mq=cu(()=>b("div",null,"Nearest towns with idle workers:",-1)),_q={style:{"margin-right":"6px"}},yq=z("stash: "),bq=cu(()=>b("option",{value:"0"},"worker hometown",-1)),wq=["value"],Sq={key:0},Tq=cu(()=>b("tr",null,[b("th",null,"town"),b("th",null,"walk"),b("th",null,[z("worker "),b("abbr",{title:"same town&stat workers are hidden in this view"},"\u2139\uFE0F")]),b("th",null,"+M$/day"),b("th",null,"+CP"),b("th",null,"M$/day/CP"),b("th",null,"action")],-1)),Pq={key:0},Eq={class:"fsxs"},kq={class:"center"},Aq=["title"],Cq=z("+"),Mq=["title"],xq={class:"center"},Lq=["onClick","disabled"],Iq=z(" None ");function Oq(e,t,r,n,i,o){const a=pe("RouterLink");return I(),R(W,null,[b("div",null,[xt(a,{tag:"a",to:{path:"./plantzones",hash:"#drops"+r.pzk}},{default:Ee(()=>[z(L(n.gameStore.plantzoneName(r.pzk)),1)]),_:1},8,["to"]),z(" "+L(this.gameStore.nodes[r.pzk].CP)+"CP ",1),r.pzk in this.gameStore.plantzones?(I(),R("span",oq,[(I(!0),R(W,null,It(this.gameStore.plantzones[r.pzk].itemkeys,s=>(I(),va(a,{tag:"a",to:{path:"./settings",hash:"#item"+s}},{default:Ee(()=>[b("img",{src:o.makeIconSrc(s),class:"iconitem"},null,8,aq)]),_:2},1032,["to"]))),256)),z(" [\u{1F340}"+L(o.formatFixed(this.gameStore.plantzones[r.pzk].lucky?this.gameStore.plantzones[r.pzk].luckyValue/this.gameStore.plantzones[r.pzk].unluckyValue:1,2))+"x] ",1)])):tt("",!0)]),b("div",null,[sq,n.gameStore.ready&&n.gameStore.plantzones[r.pzk].regiongroup&&n.userStore.allowFloating&&n.userStore.useFloatingModifiers[n.gameStore.plantzones[r.pzk].regiongroup]?(I(),R(W,{key:0},[z(" ~"+L(o.formatFixed(n.userStore.medianWorkloads[r.pzk],2))+" ",1),b("button",{onClick:t[0]||(t[0]=s=>e.$emit("showModifierDialog",r.pzk))},"review")],64)):(I(),R(W,{key:1},[z(L(o.formatFixed(n.gameStore.plantzones[r.pzk].activeWorkload,2))+" \u2190 modifier ",1),gt(b("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=s=>n.userStore.regionModifiers[n.gameStore.plantzones[r.pzk].regiongroup]=s),min:"0",max:"100",step:"1",class:"w42em"},null,512),[[ve,n.userStore.regionModifiers[n.gameStore.plantzones[r.pzk].regiongroup],void 0,{number:!0}]])],64))]),b("div",lq,[n.userStore.workedPlantzones.has(r.pzk.toString())?(I(),R(W,{key:0},[z(" worker: "+L(n.userStore.pzJobs[r.pzk].worker.label)+" @ "+L(o.formatFixed(n.userStore.pzJobs[r.pzk].profit.priceDaily,3))+" M$/day ",1),n.userStore.workedPlantzones.has(r.pzk.toString())?(I(),R(W,{key:0},[b("button",{onClick:t[2]||(t[2]=s=>e.$emit("editWorker",n.userStore.pzJobs[r.pzk].worker))}," edit "),b("button",{onClick:t[3]||(t[3]=s=>n.userStore.pzJobs[r.pzk].worker.job=null)}," stop ")],64)):tt("",!0),uq,z(" connection cost: "+L(o.formatFixed(n.userStore.pzjobsSharedCP[r.pzk],3))+" CP ",1),cq,fq,z(" "+L(n.userStore.prerelease_housesconfig?"lodgage":"lodging")+" cost: "+L(o.formatFixed(n.userStore.workerSharedLodgingCp(n.userStore.pzJobs[r.pzk].worker),3))+" CP ",1),b("abbr",{class:"tooltip",title:n.userStore.prerelease_housesconfig?"total lodgage costs of hometown shared proportionally between all active jobs from that town":"total lodging costs of hometown shared between all active jobs from that town"},"\u2139\uFE0F",8,hq),dq,z(" efficiency: "+L(o.formatFixed(n.userStore.workerIncomePerCp(n.userStore.pzJobs[r.pzk].worker),3))+" M$/day/CP ",1),b("abbr",{class:"tooltip",title:n.userStore.prerelease_housesconfig?"income / (connectionCost + lodgageCost)":"income / (connectionCost + lodgingCost)"},"\u2139\uFE0F",8,pq)],64)):(I(),R(W,{key:1},[vq],64))]),b("div",null,[b("div",gq,[mq,b("div",_q,[yq,gt(b("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>e.selectedRedirect=s)},[bq,(I(!0),R(W,null,It(n.gameStore.townSet,s=>(I(),R("option",{value:s},L(n.gameStore.uloc.node[s]),9,wq))),256))],512),[[Sr,e.selectedRedirect]])])]),o.freeWorkers.length?(I(),R("table",Sq,[Tq,(I(!0),R(W,null,It(o.freeWorkers,s=>(I(),R(W,null,[s.profit.dist<1e6?(I(),R("tr",Pq,[b("td",null,L(n.gameStore.nodeName(s.tnk)),1),b("td",null,L(o.formatFixed(s.profit.dist)),1),b("td",null,[z(L(s.w.label)+" ",1),b("span",Eq,L(o.formatFixed(s.statsOnPz.wspd,2))+"\u{1F528} "+L(o.formatFixed(s.statsOnPz.mspd,2))+"\u{1F9B6} "+L(o.formatFixed(s.statsOnPz.luck,2))+"\u{1F340} ",1)]),b("td",kq,L(o.formatFixed(s.profit.priceDaily,2)),1),b("td",null,[b("abbr",{class:"tooltip",title:Array.from(s.path,l=>`${n.userStore.autotakenNodes.has(l)?0:n.gameStore.nodes[l].CP} ${n.gameStore.uloc.node[l]}`).join(`
`)},L(s.mapCp),9,Aq),Cq,b("abbr",{class:"tooltip",title:s.infraTooltip},L(s.townCp),9,Mq),z("="+L(s.cp),1)]),b("td",xq,L(o.formatFixed(s.dailyPerCp,3)),1),b("td",null,[b("button",{onClick:l=>n.userStore.assignWorker(s.w,{kind:"plantzone",pzk:s.pz.key,storage:s.tnk}),disabled:n.userStore.workedPlantzones.has(r.pzk.toString())}," assign ",8,Lq)])])):tt("",!0)],64))),256))])):(I(),R(W,{key:1},[Iq],64))]),tt("",!0)],64)}const Rq=$e(iq,[["render",Oq],["__scopeId","data-v-6fd5ad65"]]);const Dq={name:"modalDialog",props:{show:{type:Boolean,default:!1}},methods:{}};function Nq(e,t,r,n,i,o){return gt((I(),R("div",{onClick:t[1]||(t[1]=bm(a=>this.$emit("update:show",!1),["stop"])),class:"dialog"},[b("div",{onClick:t[0]||(t[0]=bm(()=>{},["stop"])),class:"dialog_content"},[RW(e.$slots,"default",{},void 0,!0)])],512)),[[OH,r.show]])}const TP=$e(Dq,[["render",Nq],["__scopeId","data-v-dea74574"]]);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var yS=function(e,t){return yS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},yS(e,t)};function _t(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");yS(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Fq=function(){function e(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return e}(),Bq=function(){function e(){this.browser=new Fq,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return e}(),Tl=new Bq;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(Tl.wxa=!0,Tl.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?Tl.worker=!0:typeof navigator>"u"?(Tl.node=!0,Tl.svgSupported=!0):$q(navigator.userAgent,Tl);function $q(e,t){var r=t.browser,n=e.match(/Firefox\/([\d.]+)/),i=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/),o=e.match(/Edge?\/([\d.]+)/),a=/micromessenger/i.test(e);n&&(r.firefox=!0,r.version=n[1]),i&&(r.ie=!0,r.version=i[1]),o&&(r.edge=!0,r.version=o[1],r.newEdge=+o[1].split(".")[0]>18),a&&(r.weChat=!0),t.svgSupported=typeof SVGRect<"u",t.touchEventsSupported="ontouchstart"in window&&!r.ie&&!r.edge,t.pointerEventsSupported="onpointerdown"in window&&(r.edge||r.ie&&+r.version>=11),t.domSupported=typeof document<"u";var s=document.documentElement.style;t.transform3dSupported=(r.ie&&"transition"in s||r.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in s)&&!("OTransition"in s),t.transformSupported=t.transform3dSupported||r.ie&&+r.version>=9}const Xt=Tl;var PP=12,zq="sans-serif",Zl=PP+"px "+zq,Vq=20,Uq=100,Gq="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function jq(e){var t={};if(typeof JSON>"u")return t;for(var r=0;r<e.length;r++){var n=String.fromCharCode(r+32),i=(e.charCodeAt(r)-Vq)/Uq;t[n]=i}return t}var Wq=jq(Gq),fu={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var e,t;return function(r,n){if(!e){var i=fu.createCanvas();e=i&&i.getContext("2d")}if(e)return t!==n&&(t=e.font=n||Zl),e.measureText(r);r=r||"",n=n||Zl;var o=/^([0-9]*?)px$/.exec(n),a=+(o&&o[1])||PP,s=0;if(n.indexOf("mono")>=0)s=a*r.length;else for(var l=0;l<r.length;l++){var u=Wq[r[l]];s+=u==null?a:u*a}return{width:s}}}(),loadImage:function(e,t,r){var n=new Image;return n.onload=t,n.onerror=r,n.src=e,n}},F7=hu(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(e,t){return e["[object "+t+"]"]=!0,e},{}),B7=hu(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(e,t){return e["[object "+t+"Array]"]=!0,e},{}),df=Object.prototype.toString,U1=Array.prototype,Hq=U1.forEach,Xq=U1.filter,EP=U1.slice,Yq=U1.map,BC=function(){}.constructor,wp=BC?BC.prototype:null,kP="__proto__",qq=2311;function $7(){return qq++}function AP(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];typeof console<"u"&&console.error.apply(console,e)}function zt(e){if(e==null||typeof e!="object")return e;var t=e,r=df.call(e);if(r==="[object Array]"){if(!md(e)){t=[];for(var n=0,i=e.length;n<i;n++)t[n]=zt(e[n])}}else if(B7[r]){if(!md(e)){var o=e.constructor;if(o.from)t=o.from(e);else{t=new o(e.length);for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}}}else if(!F7[r]&&!md(e)&&!Tm(e)){t={};for(var a in e)e.hasOwnProperty(a)&&a!==kP&&(t[a]=zt(e[a]))}return t}function oe(e,t,r){if(!Ot(t)||!Ot(e))return r?zt(t):e;for(var n in t)if(t.hasOwnProperty(n)&&n!==kP){var i=e[n],o=t[n];Ot(o)&&Ot(i)&&!ct(o)&&!ct(i)&&!Tm(o)&&!Tm(i)&&!$C(o)&&!$C(i)&&!md(o)&&!md(i)?oe(i,o,r):(r||!(n in e))&&(e[n]=zt(t[n]))}return e}function Zq(e,t){for(var r=e[0],n=1,i=e.length;n<i;n++)r=oe(r,e[n],t);return r}function at(e,t){if(Object.assign)Object.assign(e,t);else for(var r in t)t.hasOwnProperty(r)&&r!==kP&&(e[r]=t[r]);return e}function te(e,t,r){for(var n=ge(t),i=0;i<n.length;i++){var o=n[i];(r?t[o]!=null:e[o]==null)&&(e[o]=t[o])}return e}fu.createCanvas;function ue(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r}return-1}function Kq(e,t){var r=e.prototype;function n(){}n.prototype=t.prototype,e.prototype=new n;for(var i in r)r.hasOwnProperty(i)&&(e.prototype[i]=r[i]);e.prototype.constructor=e,e.superClass=t}function Ui(e,t,r){if(e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames)for(var n=Object.getOwnPropertyNames(t),i=0;i<n.length;i++){var o=n[i];o!=="constructor"&&(r?t[o]!=null:e[o]==null)&&(e[o]=t[o])}else te(e,t,r)}function Wr(e){return!e||typeof e=="string"?!1:typeof e.length=="number"}function F(e,t,r){if(!!(e&&t))if(e.forEach&&e.forEach===Hq)e.forEach(t,r);else if(e.length===+e.length)for(var n=0,i=e.length;n<i;n++)t.call(r,e[n],n,e);else for(var o in e)e.hasOwnProperty(o)&&t.call(r,e[o],o,e)}function Ct(e,t,r){if(!e)return[];if(!t)return CP(e);if(e.map&&e.map===Yq)return e.map(t,r);for(var n=[],i=0,o=e.length;i<o;i++)n.push(t.call(r,e[i],i,e));return n}function hu(e,t,r,n){if(!!(e&&t)){for(var i=0,o=e.length;i<o;i++)r=t.call(n,r,e[i],i,e);return r}}function wr(e,t,r){if(!e)return[];if(!t)return CP(e);if(e.filter&&e.filter===Xq)return e.filter(t,r);for(var n=[],i=0,o=e.length;i<o;i++)t.call(r,e[i],i,e)&&n.push(e[i]);return n}function ge(e){if(!e)return[];if(Object.keys)return Object.keys(e);var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}function Jq(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return function(){return e.apply(t,r.concat(EP.call(arguments)))}}var Vt=wp&&Ut(wp.bind)?wp.call.bind(wp.bind):Jq;function be(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(){return e.apply(this,t.concat(EP.call(arguments)))}}function ct(e){return Array.isArray?Array.isArray(e):df.call(e)==="[object Array]"}function Ut(e){return typeof e=="function"}function Et(e){return typeof e=="string"}function bS(e){return df.call(e)==="[object String]"}function we(e){return typeof e=="number"}function Ot(e){var t=typeof e;return t==="function"||!!e&&t==="object"}function $C(e){return!!F7[df.call(e)]}function In(e){return!!B7[df.call(e)]}function Tm(e){return typeof e=="object"&&typeof e.nodeType=="number"&&typeof e.ownerDocument=="object"}function G1(e){return e.colorStops!=null}function Qq(e){return e.image!=null}function tZ(e){return df.call(e)==="[object RegExp]"}function Pm(e){return e!==e}function Ei(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0,n=e.length;r<n;r++)if(e[r]!=null)return e[r]}function qt(e,t){return e!=null?e:t}function gd(e,t,r){return e!=null?e:t!=null?t:r}function CP(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return EP.apply(e,t)}function z7(e){if(typeof e=="number")return[e,e,e,e];var t=e.length;return t===2?[e[0],e[1],e[0],e[1]]:t===3?[e[0],e[1],e[2],e[1]]:e}function Fi(e,t){if(!e)throw new Error(t)}function So(e){return e==null?null:typeof e.trim=="function"?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var V7="__ec_primitive__";function Em(e){e[V7]=!0}function md(e){return e[V7]}var eZ=function(){function e(t){this.data={};var r=ct(t);this.data={};var n=this;t instanceof e?t.each(i):t&&F(t,i);function i(o,a){r?n.set(o,a):n.set(a,o)}}return e.prototype.get=function(t){return this.data.hasOwnProperty(t)?this.data[t]:null},e.prototype.set=function(t,r){return this.data[t]=r},e.prototype.each=function(t,r){for(var n in this.data)this.data.hasOwnProperty(n)&&t.call(r,this.data[n],n)},e.prototype.keys=function(){return ge(this.data)},e.prototype.removeKey=function(t){delete this.data[t]},e}();function jt(e){return new eZ(e)}function U7(e,t){for(var r=new e.constructor(e.length+t.length),n=0;n<e.length;n++)r[n]=e[n];for(var i=e.length,n=0;n<t.length;n++)r[n+i]=t[n];return r}function j1(e,t){var r;if(Object.create)r=Object.create(e);else{var n=function(){};n.prototype=e,r=new n}return t&&at(r,t),r}function G7(e){var t=e.style;t.webkitUserSelect="none",t.userSelect="none",t.webkitTapHighlightColor="rgba(0,0,0,0)",t["-webkit-touch-callout"]="none"}function dt(e,t){return e.hasOwnProperty(t)}function Gr(){}var rZ=180/Math.PI;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var wS=function(e,t){return wS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},wS(e,t)};function ke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");wS(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function pf(e,t){return e==null&&(e=0),t==null&&(t=0),[e,t]}function nZ(e,t){return e[0]=t[0],e[1]=t[1],e}function iZ(e){return[e[0],e[1]]}function zC(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function j7(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function oZ(e){return Math.sqrt(aZ(e))}function aZ(e){return e[0]*e[0]+e[1]*e[1]}function yy(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function MP(e,t){var r=oZ(t);return r===0?(e[0]=0,e[1]=0):(e[0]=t[0]/r,e[1]=t[1]/r),e}function SS(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var sZ=SS;function lZ(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}var Ic=lZ;function rn(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i+r[4],e[1]=r[1]*n+r[3]*i+r[5],e}function yc(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function bc(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}var Ru=function(){function e(t,r){this.target=t,this.topTarget=r&&r.topTarget}return e}(),uZ=function(){function e(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return e.prototype._dragStart=function(t){for(var r=t.target;r&&!r.draggable;)r=r.parent||r.__hostTarget;r&&(this._draggingTarget=r,r.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new Ru(r,t),"dragstart",t.event))},e.prototype._drag=function(t){var r=this._draggingTarget;if(r){var n=t.offsetX,i=t.offsetY,o=n-this._x,a=i-this._y;this._x=n,this._y=i,r.drift(o,a,t),this.handler.dispatchToElement(new Ru(r,t),"drag",t.event);var s=this.handler.findHover(n,i,r).target,l=this._dropTarget;this._dropTarget=s,r!==s&&(l&&s!==l&&this.handler.dispatchToElement(new Ru(l,t),"dragleave",t.event),s&&s!==l&&this.handler.dispatchToElement(new Ru(s,t),"dragenter",t.event))}},e.prototype._dragEnd=function(t){var r=this._draggingTarget;r&&(r.dragging=!1),this.handler.dispatchToElement(new Ru(r,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new Ru(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},e}();const cZ=uZ;var fZ=function(){function e(t){t&&(this._$eventProcessor=t)}return e.prototype.on=function(t,r,n,i){this._$handlers||(this._$handlers={});var o=this._$handlers;if(typeof r=="function"&&(i=n,n=r,r=null),!n||!t)return this;var a=this._$eventProcessor;r!=null&&a&&a.normalizeQuery&&(r=a.normalizeQuery(r)),o[t]||(o[t]=[]);for(var s=0;s<o[t].length;s++)if(o[t][s].h===n)return this;var l={h:n,query:r,ctx:i||this,callAtLast:n.zrEventfulCallAtLast},u=o[t].length-1,c=o[t][u];return c&&c.callAtLast?o[t].splice(u,0,l):o[t].push(l),this},e.prototype.isSilent=function(t){var r=this._$handlers;return!r||!r[t]||!r[t].length},e.prototype.off=function(t,r){var n=this._$handlers;if(!n)return this;if(!t)return this._$handlers={},this;if(r){if(n[t]){for(var i=[],o=0,a=n[t].length;o<a;o++)n[t][o].h!==r&&i.push(n[t][o]);n[t]=i}n[t]&&n[t].length===0&&delete n[t]}else delete n[t];return this},e.prototype.trigger=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[t],o=this._$eventProcessor;if(i)for(var a=r.length,s=i.length,l=0;l<s;l++){var u=i[l];if(!(o&&o.filter&&u.query!=null&&!o.filter(t,u.query)))switch(a){case 0:u.h.call(u.ctx);break;case 1:u.h.call(u.ctx,r[0]);break;case 2:u.h.call(u.ctx,r[0],r[1]);break;default:u.h.apply(u.ctx,r);break}}return o&&o.afterTrigger&&o.afterTrigger(t),this},e.prototype.triggerWithContext=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[t],o=this._$eventProcessor;if(i)for(var a=r.length,s=r[a-1],l=i.length,u=0;u<l;u++){var c=i[u];if(!(o&&o.filter&&c.query!=null&&!o.filter(t,c.query)))switch(a){case 0:c.h.call(s);break;case 1:c.h.call(s,r[0]);break;case 2:c.h.call(s,r[0],r[1]);break;default:c.h.apply(s,r.slice(1,a-1));break}}return o&&o.afterTrigger&&o.afterTrigger(t),this},e}();const Gi=fZ;var hZ=Math.log(2);function TS(e,t,r,n,i,o){var a=n+"-"+i,s=e.length;if(o.hasOwnProperty(a))return o[a];if(t===1){var l=Math.round(Math.log((1<<s)-1&~i)/hZ);return e[r][l]}for(var u=n|1<<r,c=r+1;n&1<<c;)c++;for(var f=0,h=0,d=0;h<s;h++){var p=1<<h;p&i||(f+=(d%2?-1:1)*e[r][h]*TS(e,t-1,c,u,i|p,o),d++)}return o[a]=f,f}function VC(e,t){var r=[[e[0],e[1],1,0,0,0,-t[0]*e[0],-t[0]*e[1]],[0,0,0,e[0],e[1],1,-t[1]*e[0],-t[1]*e[1]],[e[2],e[3],1,0,0,0,-t[2]*e[2],-t[2]*e[3]],[0,0,0,e[2],e[3],1,-t[3]*e[2],-t[3]*e[3]],[e[4],e[5],1,0,0,0,-t[4]*e[4],-t[4]*e[5]],[0,0,0,e[4],e[5],1,-t[5]*e[4],-t[5]*e[5]],[e[6],e[7],1,0,0,0,-t[6]*e[6],-t[6]*e[7]],[0,0,0,e[6],e[7],1,-t[7]*e[6],-t[7]*e[7]]],n={},i=TS(r,8,0,0,0,n);if(i!==0){for(var o=[],a=0;a<8;a++)for(var s=0;s<8;s++)o[s]==null&&(o[s]=0),o[s]+=((a+s)%2?-1:1)*TS(r,7,a===0?1:0,1<<a,1<<s,n)/i*t[a];return function(l,u,c){var f=u*o[6]+c*o[7]+1;l[0]=(u*o[0]+c*o[1]+o[2])/f,l[1]=(u*o[3]+c*o[4]+o[5])/f}}}var UC="___zrEVENTSAVED",by=[];function dZ(e,t,r,n,i){return PS(by,t,n,i,!0)&&PS(e,r,by[0],by[1])}function PS(e,t,r,n,i){if(t.getBoundingClientRect&&Xt.domSupported&&!W7(t)){var o=t[UC]||(t[UC]={}),a=pZ(t,o),s=vZ(a,o,i);if(s)return s(e,r,n),!0}return!1}function pZ(e,t){var r=t.markers;if(r)return r;r=t.markers=[];for(var n=["left","right"],i=["top","bottom"],o=0;o<4;o++){var a=document.createElement("div"),s=a.style,l=o%2,u=(o>>1)%2;s.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",n[l]+":0",i[u]+":0",n[1-l]+":auto",i[1-u]+":auto",""].join("!important;"),e.appendChild(a),r.push(a)}return r}function vZ(e,t,r){for(var n=r?"invTrans":"trans",i=t[n],o=t.srcCoords,a=[],s=[],l=!0,u=0;u<4;u++){var c=e[u].getBoundingClientRect(),f=2*u,h=c.left,d=c.top;a.push(h,d),l=l&&o&&h===o[f]&&d===o[f+1],s.push(e[u].offsetLeft,e[u].offsetTop)}return l&&i?i:(t.srcCoords=a,t[n]=r?VC(s,a):VC(a,s))}function W7(e){return e.nodeName.toUpperCase()==="CANVAS"}var gZ=/([&<>"'])/g,mZ={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Zn(e){return e==null?"":(e+"").replace(gZ,function(t,r){return mZ[r]})}var _Z=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,wy=[],yZ=Xt.browser.firefox&&+Xt.browser.version.split(".")[0]<39;function ES(e,t,r,n){return r=r||{},n?GC(e,t,r):yZ&&t.layerX!=null&&t.layerX!==t.offsetX?(r.zrX=t.layerX,r.zrY=t.layerY):t.offsetX!=null?(r.zrX=t.offsetX,r.zrY=t.offsetY):GC(e,t,r),r}function GC(e,t,r){if(Xt.domSupported&&e.getBoundingClientRect){var n=t.clientX,i=t.clientY;if(W7(e)){var o=e.getBoundingClientRect();r.zrX=n-o.left,r.zrY=i-o.top;return}else if(PS(wy,e,n,i)){r.zrX=wy[0],r.zrY=wy[1];return}}r.zrX=r.zrY=0}function xP(e){return e||window.event}function Hn(e,t,r){if(t=xP(t),t.zrX!=null)return t;var n=t.type,i=n&&n.indexOf("touch")>=0;if(i){var a=n!=="touchend"?t.targetTouches[0]:t.changedTouches[0];a&&ES(e,a,t,r)}else{ES(e,t,t,r);var o=bZ(t);t.zrDelta=o?o/120:-(t.detail||0)/3}var s=t.button;return t.which==null&&s!==void 0&&_Z.test(t.type)&&(t.which=s&1?1:s&2?3:s&4?2:0),t}function bZ(e){var t=e.wheelDelta;if(t)return t;var r=e.deltaX,n=e.deltaY;if(r==null||n==null)return t;var i=Math.abs(n!==0?n:r),o=n>0?-1:n<0?1:r>0?-1:1;return 3*i*o}function wZ(e,t,r,n){e.addEventListener(t,r,n)}function SZ(e,t,r,n){e.removeEventListener(t,r,n)}var Kl=function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0};function jC(e){return e.which===2||e.which===3}var TZ=function(){function e(){this._track=[]}return e.prototype.recognize=function(t,r,n){return this._doTrack(t,r,n),this._recognize(t)},e.prototype.clear=function(){return this._track.length=0,this},e.prototype._doTrack=function(t,r,n){var i=t.touches;if(!!i){for(var o={points:[],touches:[],target:r,event:t},a=0,s=i.length;a<s;a++){var l=i[a],u=ES(n,l,{});o.points.push([u.zrX,u.zrY]),o.touches.push(l)}this._track.push(o)}},e.prototype._recognize=function(t){for(var r in Sy)if(Sy.hasOwnProperty(r)){var n=Sy[r](this._track,t);if(n)return n}},e}();function WC(e){var t=e[1][0]-e[0][0],r=e[1][1]-e[0][1];return Math.sqrt(t*t+r*r)}function PZ(e){return[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]}var Sy={pinch:function(e,t){var r=e.length;if(!!r){var n=(e[r-1]||{}).points,i=(e[r-2]||{}).points||n;if(i&&i.length>1&&n&&n.length>1){var o=WC(n)/WC(i);!isFinite(o)&&(o=1),t.pinchScale=o;var a=PZ(n);return t.pinchX=a[0],t.pinchY=a[1],{type:"pinch",target:e[0].target,event:t}}}}};function qc(){return[1,0,0,1,0,0]}function LP(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function H7(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Oc(e,t,r){var n=t[0]*r[0]+t[2]*r[1],i=t[1]*r[0]+t[3]*r[1],o=t[0]*r[2]+t[2]*r[3],a=t[1]*r[2]+t[3]*r[3],s=t[0]*r[4]+t[2]*r[5]+t[4],l=t[1]*r[4]+t[3]*r[5]+t[5];return e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e}function kS(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+r[0],e[5]=t[5]+r[1],e}function IP(e,t,r){var n=t[0],i=t[2],o=t[4],a=t[1],s=t[3],l=t[5],u=Math.sin(r),c=Math.cos(r);return e[0]=n*c+a*u,e[1]=-n*u+a*c,e[2]=i*c+s*u,e[3]=-i*u+c*s,e[4]=c*o+u*l,e[5]=c*l-u*o,e}function EZ(e,t,r){var n=r[0],i=r[1];return e[0]=t[0]*n,e[1]=t[1]*i,e[2]=t[2]*n,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*i,e}function W1(e,t){var r=t[0],n=t[2],i=t[4],o=t[1],a=t[3],s=t[5],l=r*a-o*n;return l?(l=1/l,e[0]=a*l,e[1]=-o*l,e[2]=-n*l,e[3]=r*l,e[4]=(n*s-a*i)*l,e[5]=(o*i-r*s)*l,e):null}var kZ=function(){function e(t,r){this.x=t||0,this.y=r||0}return e.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.set=function(t,r){return this.x=t,this.y=r,this},e.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},e.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},e.prototype.scale=function(t){this.x*=t,this.y*=t},e.prototype.scaleAndAdd=function(t,r){this.x+=t.x*r,this.y+=t.y*r},e.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},e.prototype.dot=function(t){return this.x*t.x+this.y*t.y},e.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},e.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},e.prototype.distance=function(t){var r=this.x-t.x,n=this.y-t.y;return Math.sqrt(r*r+n*n)},e.prototype.distanceSquare=function(t){var r=this.x-t.x,n=this.y-t.y;return r*r+n*n},e.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},e.prototype.transform=function(t){if(!!t){var r=this.x,n=this.y;return this.x=t[0]*r+t[2]*n+t[4],this.y=t[1]*r+t[3]*n+t[5],this}},e.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},e.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},e.set=function(t,r,n){t.x=r,t.y=n},e.copy=function(t,r){t.x=r.x,t.y=r.y},e.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},e.lenSquare=function(t){return t.x*t.x+t.y*t.y},e.dot=function(t,r){return t.x*r.x+t.y*r.y},e.add=function(t,r,n){t.x=r.x+n.x,t.y=r.y+n.y},e.sub=function(t,r,n){t.x=r.x-n.x,t.y=r.y-n.y},e.scale=function(t,r,n){t.x=r.x*n,t.y=r.y*n},e.scaleAndAdd=function(t,r,n,i){t.x=r.x+n.x*i,t.y=r.y+n.y*i},e.lerp=function(t,r,n,i){var o=1-i;t.x=o*r.x+i*n.x,t.y=o*r.y+i*n.y},e}();const xe=kZ;var Sp=Math.min,Tp=Math.max,Xs=new xe,Ys=new xe,qs=new xe,Zs=new xe,Kf=new xe,Jf=new xe,AZ=function(){function e(t,r,n,i){n<0&&(t=t+n,n=-n),i<0&&(r=r+i,i=-i),this.x=t,this.y=r,this.width=n,this.height=i}return e.prototype.union=function(t){var r=Sp(t.x,this.x),n=Sp(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=Tp(t.x+t.width,this.x+this.width)-r:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=Tp(t.y+t.height,this.y+this.height)-n:this.height=t.height,this.x=r,this.y=n},e.prototype.applyTransform=function(t){e.applyTransform(this,this,t)},e.prototype.calculateTransform=function(t){var r=this,n=t.width/r.width,i=t.height/r.height,o=qc();return kS(o,o,[-r.x,-r.y]),EZ(o,o,[n,i]),kS(o,o,[t.x,t.y]),o},e.prototype.intersect=function(t,r){if(!t)return!1;t instanceof e||(t=e.create(t));var n=this,i=n.x,o=n.x+n.width,a=n.y,s=n.y+n.height,l=t.x,u=t.x+t.width,c=t.y,f=t.y+t.height,h=!(o<l||u<i||s<c||f<a);if(r){var d=1/0,p=0,v=Math.abs(o-l),g=Math.abs(u-i),m=Math.abs(s-c),_=Math.abs(f-a),y=Math.min(v,g),w=Math.min(m,_);o<l||u<i?y>p&&(p=y,v<g?xe.set(Jf,-v,0):xe.set(Jf,g,0)):y<d&&(d=y,v<g?xe.set(Kf,v,0):xe.set(Kf,-g,0)),s<c||f<a?w>p&&(p=w,m<_?xe.set(Jf,0,-m):xe.set(Jf,0,_)):y<d&&(d=y,m<_?xe.set(Kf,0,m):xe.set(Kf,0,-_))}return r&&xe.copy(r,h?Kf:Jf),h},e.prototype.contain=function(t,r){var n=this;return t>=n.x&&t<=n.x+n.width&&r>=n.y&&r<=n.y+n.height},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copy=function(t){e.copy(this,t)},e.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},e.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},e.prototype.isZero=function(){return this.width===0||this.height===0},e.create=function(t){return new e(t.x,t.y,t.width,t.height)},e.copy=function(t,r){t.x=r.x,t.y=r.y,t.width=r.width,t.height=r.height},e.applyTransform=function(t,r,n){if(!n){t!==r&&e.copy(t,r);return}if(n[1]<1e-5&&n[1]>-1e-5&&n[2]<1e-5&&n[2]>-1e-5){var i=n[0],o=n[3],a=n[4],s=n[5];t.x=r.x*i+a,t.y=r.y*o+s,t.width=r.width*i,t.height=r.height*o,t.width<0&&(t.x+=t.width,t.width=-t.width),t.height<0&&(t.y+=t.height,t.height=-t.height);return}Xs.x=qs.x=r.x,Xs.y=Zs.y=r.y,Ys.x=Zs.x=r.x+r.width,Ys.y=qs.y=r.y+r.height,Xs.transform(n),Zs.transform(n),Ys.transform(n),qs.transform(n),t.x=Sp(Xs.x,Ys.x,qs.x,Zs.x),t.y=Sp(Xs.y,Ys.y,qs.y,Zs.y);var l=Tp(Xs.x,Ys.x,qs.x,Zs.x),u=Tp(Xs.y,Ys.y,qs.y,Zs.y);t.width=l-t.x,t.height=u-t.y},e}();const ae=AZ;var X7="silent";function CZ(e,t,r){return{type:e,event:r,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:r.zrX,offsetY:r.zrY,gestureEvent:r.gestureEvent,pinchX:r.pinchX,pinchY:r.pinchY,pinchScale:r.pinchScale,wheelDelta:r.zrDelta,zrByTouch:r.zrByTouch,which:r.which,stop:MZ}}function MZ(){Kl(this.event)}var xZ=function(e){ke(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.handler=null,r}return t.prototype.dispose=function(){},t.prototype.setCursor=function(){},t}(Gi),Qf=function(){function e(t,r){this.x=t,this.y=r}return e}(),LZ=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],Ty=new ae(0,0,0,0),Y7=function(e){ke(t,e);function t(r,n,i,o,a){var s=e.call(this)||this;return s._hovered=new Qf(0,0),s.storage=r,s.painter=n,s.painterRoot=o,s._pointerSize=a,i=i||new xZ,s.proxy=null,s.setHandlerProxy(i),s._draggingMgr=new cZ(s),s}return t.prototype.setHandlerProxy=function(r){this.proxy&&this.proxy.dispose(),r&&(F(LZ,function(n){r.on&&r.on(n,this[n],this)},this),r.handler=this),this.proxy=r},t.prototype.mousemove=function(r){var n=r.zrX,i=r.zrY,o=q7(this,n,i),a=this._hovered,s=a.target;s&&!s.__zr&&(a=this.findHover(a.x,a.y),s=a.target);var l=this._hovered=o?new Qf(n,i):this.findHover(n,i),u=l.target,c=this.proxy;c.setCursor&&c.setCursor(u?u.cursor:"default"),s&&u!==s&&this.dispatchToElement(a,"mouseout",r),this.dispatchToElement(l,"mousemove",r),u&&u!==s&&this.dispatchToElement(l,"mouseover",r)},t.prototype.mouseout=function(r){var n=r.zrEventControl;n!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",r),n!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:r})},t.prototype.resize=function(){this._hovered=new Qf(0,0)},t.prototype.dispatch=function(r,n){var i=this[r];i&&i.call(this,n)},t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},t.prototype.setCursorStyle=function(r){var n=this.proxy;n.setCursor&&n.setCursor(r)},t.prototype.dispatchToElement=function(r,n,i){r=r||{};var o=r.target;if(!(o&&o.silent)){for(var a="on"+n,s=CZ(n,r,i);o&&(o[a]&&(s.cancelBubble=!!o[a].call(o,s)),o.trigger(n,s),o=o.__hostTarget?o.__hostTarget:o.parent,!s.cancelBubble););s.cancelBubble||(this.trigger(n,s),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[a]=="function"&&l[a].call(l,s),l.trigger&&l.trigger(n,s)}))}},t.prototype.findHover=function(r,n,i){var o=this.storage.getDisplayList(),a=new Qf(r,n);if(HC(o,a,r,n,i),this._pointerSize&&!a.target){for(var s=[],l=this._pointerSize,u=l/2,c=new ae(r-u,n-u,l,l),f=o.length-1;f>=0;f--){var h=o[f];h!==i&&!h.ignore&&!h.ignoreCoarsePointer&&(!h.parent||!h.parent.ignoreCoarsePointer)&&(Ty.copy(h.getBoundingRect()),h.transform&&Ty.applyTransform(h.transform),Ty.intersect(c)&&s.push(h))}if(s.length)for(var d=4,p=Math.PI/12,v=Math.PI*2,g=0;g<u;g+=d)for(var m=0;m<v;m+=p){var _=r+g*Math.cos(m),y=n+g*Math.sin(m);if(HC(s,a,_,y,i),a.target)return a}}return a},t.prototype.processGesture=function(r,n){this._gestureMgr||(this._gestureMgr=new TZ);var i=this._gestureMgr;n==="start"&&i.clear();var o=i.recognize(r,this.findHover(r.zrX,r.zrY,null).target,this.proxy.dom);if(n==="end"&&i.clear(),o){var a=o.type;r.gestureEvent=a;var s=new Qf;s.target=o.target,this.dispatchToElement(s,a,o.event)}},t}(Gi);F(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){Y7.prototype[e]=function(t){var r=t.zrX,n=t.zrY,i=q7(this,r,n),o,a;if((e!=="mouseup"||!i)&&(o=this.findHover(r,n),a=o.target),e==="mousedown")this._downEl=a,this._downPoint=[t.zrX,t.zrY],this._upEl=a;else if(e==="mouseup")this._upEl=a;else if(e==="click"){if(this._downEl!==this._upEl||!this._downPoint||sZ(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(o,e,t)}});function IZ(e,t,r){if(e[e.rectHover?"rectContain":"contain"](t,r)){for(var n=e,i=void 0,o=!1;n;){if(n.ignoreClip&&(o=!0),!o){var a=n.getClipPath();if(a&&!a.contain(t,r))return!1;n.silent&&(i=!0)}var s=n.__hostTarget;n=s||n.parent}return i?X7:!0}return!1}function HC(e,t,r,n,i){for(var o=e.length-1;o>=0;o--){var a=e[o],s=void 0;if(a!==i&&!a.ignore&&(s=IZ(a,r,n))&&(!t.topTarget&&(t.topTarget=a),s!==X7)){t.target=a;break}}}function q7(e,t,r){var n=e.painter;return t<0||t>n.getWidth()||r<0||r>n.getHeight()}const OZ=Y7;var Z7=32,th=7;function RZ(e){for(var t=0;e>=Z7;)t|=e&1,e>>=1;return e+t}function XC(e,t,r,n){var i=t+1;if(i===r)return 1;if(n(e[i++],e[t])<0){for(;i<r&&n(e[i],e[i-1])<0;)i++;DZ(e,t,i)}else for(;i<r&&n(e[i],e[i-1])>=0;)i++;return i-t}function DZ(e,t,r){for(r--;t<r;){var n=e[t];e[t++]=e[r],e[r--]=n}}function YC(e,t,r,n,i){for(n===t&&n++;n<r;n++){for(var o=e[n],a=t,s=n,l;a<s;)l=a+s>>>1,i(o,e[l])<0?s=l:a=l+1;var u=n-a;switch(u){case 3:e[a+3]=e[a+2];case 2:e[a+2]=e[a+1];case 1:e[a+1]=e[a];break;default:for(;u>0;)e[a+u]=e[a+u-1],u--}e[a]=o}}function Py(e,t,r,n,i,o){var a=0,s=0,l=1;if(o(e,t[r+i])>0){for(s=n-i;l<s&&o(e,t[r+i+l])>0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),a+=i,l+=i}else{for(s=i+1;l<s&&o(e,t[r+i-l])<=0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var u=a;a=i-l,l=i-u}for(a++;a<l;){var c=a+(l-a>>>1);o(e,t[r+c])>0?a=c+1:l=c}return l}function Ey(e,t,r,n,i,o){var a=0,s=0,l=1;if(o(e,t[r+i])<0){for(s=i+1;l<s&&o(e,t[r+i-l])<0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var u=a;a=i-l,l=i-u}else{for(s=n-i;l<s&&o(e,t[r+i+l])>=0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),a+=i,l+=i}for(a++;a<l;){var c=a+(l-a>>>1);o(e,t[r+c])<0?l=c:a=c+1}return l}function NZ(e,t){var r=th,n,i,o=0;e.length;var a=[];n=[],i=[];function s(d,p){n[o]=d,i[o]=p,o+=1}function l(){for(;o>1;){var d=o-2;if(d>=1&&i[d-1]<=i[d]+i[d+1]||d>=2&&i[d-2]<=i[d]+i[d-1])i[d-1]<i[d+1]&&d--;else if(i[d]>i[d+1])break;c(d)}}function u(){for(;o>1;){var d=o-2;d>0&&i[d-1]<i[d+1]&&d--,c(d)}}function c(d){var p=n[d],v=i[d],g=n[d+1],m=i[d+1];i[d]=v+m,d===o-3&&(n[d+1]=n[d+2],i[d+1]=i[d+2]),o--;var _=Ey(e[g],e,p,v,0,t);p+=_,v-=_,v!==0&&(m=Py(e[p+v-1],e,g,m,m-1,t),m!==0&&(v<=m?f(p,v,g,m):h(p,v,g,m)))}function f(d,p,v,g){var m=0;for(m=0;m<p;m++)a[m]=e[d+m];var _=0,y=v,w=d;if(e[w++]=e[y++],--g===0){for(m=0;m<p;m++)e[w+m]=a[_+m];return}if(p===1){for(m=0;m<g;m++)e[w+m]=e[y+m];e[w+g]=a[_];return}for(var T=r,S,P,A;;){S=0,P=0,A=!1;do if(t(e[y],a[_])<0){if(e[w++]=e[y++],P++,S=0,--g===0){A=!0;break}}else if(e[w++]=a[_++],S++,P=0,--p===1){A=!0;break}while((S|P)<T);if(A)break;do{if(S=Ey(e[y],a,_,p,0,t),S!==0){for(m=0;m<S;m++)e[w+m]=a[_+m];if(w+=S,_+=S,p-=S,p<=1){A=!0;break}}if(e[w++]=e[y++],--g===0){A=!0;break}if(P=Py(a[_],e,y,g,0,t),P!==0){for(m=0;m<P;m++)e[w+m]=e[y+m];if(w+=P,y+=P,g-=P,g===0){A=!0;break}}if(e[w++]=a[_++],--p===1){A=!0;break}T--}while(S>=th||P>=th);if(A)break;T<0&&(T=0),T+=2}if(r=T,r<1&&(r=1),p===1){for(m=0;m<g;m++)e[w+m]=e[y+m];e[w+g]=a[_]}else{if(p===0)throw new Error;for(m=0;m<p;m++)e[w+m]=a[_+m]}}function h(d,p,v,g){var m=0;for(m=0;m<g;m++)a[m]=e[v+m];var _=d+p-1,y=g-1,w=v+g-1,T=0,S=0;if(e[w--]=e[_--],--p===0){for(T=w-(g-1),m=0;m<g;m++)e[T+m]=a[m];return}if(g===1){for(w-=p,_-=p,S=w+1,T=_+1,m=p-1;m>=0;m--)e[S+m]=e[T+m];e[w]=a[y];return}for(var P=r;;){var A=0,k=0,C=!1;do if(t(a[y],e[_])<0){if(e[w--]=e[_--],A++,k=0,--p===0){C=!0;break}}else if(e[w--]=a[y--],k++,A=0,--g===1){C=!0;break}while((A|k)<P);if(C)break;do{if(A=p-Ey(a[y],e,d,p,p-1,t),A!==0){for(w-=A,_-=A,p-=A,S=w+1,T=_+1,m=A-1;m>=0;m--)e[S+m]=e[T+m];if(p===0){C=!0;break}}if(e[w--]=a[y--],--g===1){C=!0;break}if(k=g-Py(e[_],a,0,g,g-1,t),k!==0){for(w-=k,y-=k,g-=k,S=w+1,T=y+1,m=0;m<k;m++)e[S+m]=a[T+m];if(g<=1){C=!0;break}}if(e[w--]=e[_--],--p===0){C=!0;break}P--}while(A>=th||k>=th);if(C)break;P<0&&(P=0),P+=2}if(r=P,r<1&&(r=1),g===1){for(w-=p,_-=p,S=w+1,T=_+1,m=p-1;m>=0;m--)e[S+m]=e[T+m];e[w]=a[y]}else{if(g===0)throw new Error;for(T=w-(g-1),m=0;m<g;m++)e[T+m]=a[m]}}return{mergeRuns:l,forceMergeRuns:u,pushRun:s}}function Ng(e,t,r,n){r||(r=0),n||(n=e.length);var i=n-r;if(!(i<2)){var o=0;if(i<Z7){o=XC(e,r,n,t),YC(e,r,n,r+o,t);return}var a=NZ(e,t),s=RZ(i);do{if(o=XC(e,r,n,t),o<s){var l=i;l>s&&(l=s),YC(e,r,r+l,r+o,t),o=l}a.pushRun(r,o),a.mergeRuns(),i-=o,r+=o}while(i!==0);a.forceMergeRuns()}}var An=1,Yh=2,vc=4,qC=!1;function ky(){qC||(qC=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function ZC(e,t){return e.zlevel===t.zlevel?e.z===t.z?e.z2-t.z2:e.z-t.z:e.zlevel-t.zlevel}var FZ=function(){function e(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=ZC}return e.prototype.traverse=function(t,r){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(t,r)},e.prototype.getDisplayList=function(t,r){r=r||!1;var n=this._displayList;return(t||!n.length)&&this.updateDisplayList(r),n},e.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var r=this._roots,n=this._displayList,i=0,o=r.length;i<o;i++)this._updateAndAddDisplayable(r[i],null,t);n.length=this._displayListLen,Ng(n,ZC)},e.prototype._updateAndAddDisplayable=function(t,r,n){if(!(t.ignore&&!n)){t.beforeUpdate(),t.update(),t.afterUpdate();var i=t.getClipPath();if(t.ignoreClip)r=null;else if(i){r?r=r.slice():r=[];for(var o=i,a=t;o;)o.parent=a,o.updateTransform(),r.push(o),a=o,o=o.getClipPath()}if(t.childrenRef){for(var s=t.childrenRef(),l=0;l<s.length;l++){var u=s[l];t.__dirty&&(u.__dirty|=An),this._updateAndAddDisplayable(u,r,n)}t.__dirty=0}else{var c=t;r&&r.length?c.__clipPaths=r:c.__clipPaths&&c.__clipPaths.length>0&&(c.__clipPaths=[]),isNaN(c.z)&&(ky(),c.z=0),isNaN(c.z2)&&(ky(),c.z2=0),isNaN(c.zlevel)&&(ky(),c.zlevel=0),this._displayList[this._displayListLen++]=c}var f=t.getDecalElement&&t.getDecalElement();f&&this._updateAndAddDisplayable(f,r,n);var h=t.getTextGuideLine();h&&this._updateAndAddDisplayable(h,r,n);var d=t.getTextContent();d&&this._updateAndAddDisplayable(d,r,n)}},e.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},e.prototype.delRoot=function(t){if(t instanceof Array){for(var r=0,n=t.length;r<n;r++)this.delRoot(t[r]);return}var i=ue(this._roots,t);i>=0&&this._roots.splice(i,1)},e.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},e.prototype.getRoots=function(){return this._roots},e.prototype.dispose=function(){this._displayList=null,this._roots=null},e}();const BZ=FZ;var K7;K7=Xt.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){return setTimeout(e,16)};const AS=K7;var Fg={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quarticIn:function(e){return e*e*e*e},quarticOut:function(e){return 1- --e*e*e*e},quarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quinticIn:function(e){return e*e*e*e*e},quinticOut:function(e){return--e*e*e*e*e+1},quinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return .5*(1-Math.cos(Math.PI*e))},exponentialIn:function(e){return e===0?0:Math.pow(1024,e-1)},exponentialOut:function(e){return e===1?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),-(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)))},elasticOut:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/n)+1)},elasticInOut:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),(e*=2)<1?-.5*(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)):r*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*.5+1)},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},backInOut:function(e){var t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)},bounceIn:function(e){return 1-Fg.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(e){return e<.5?Fg.bounceIn(e*2)*.5:Fg.bounceOut(e*2-1)*.5+.5}};const J7=Fg;var Pp=Math.pow,ws=Math.sqrt,km=1e-8,Q7=1e-4,KC=ws(3),Ep=1/3,_o=pf(),Kn=pf(),Rc=pf();function ds(e){return e>-km&&e<km}function t9(e){return e>km||e<-km}function or(e,t,r,n,i){var o=1-i;return o*o*(o*e+3*i*t)+i*i*(i*n+3*o*r)}function JC(e,t,r,n,i){var o=1-i;return 3*(((t-e)*o+2*(r-t)*i)*o+(n-r)*i*i)}function Am(e,t,r,n,i,o){var a=n+3*(t-r)-e,s=3*(r-t*2+e),l=3*(t-e),u=e-i,c=s*s-3*a*l,f=s*l-9*a*u,h=l*l-3*s*u,d=0;if(ds(c)&&ds(f))if(ds(s))o[0]=0;else{var p=-l/s;p>=0&&p<=1&&(o[d++]=p)}else{var v=f*f-4*c*h;if(ds(v)){var g=f/c,p=-s/a+g,m=-g/2;p>=0&&p<=1&&(o[d++]=p),m>=0&&m<=1&&(o[d++]=m)}else if(v>0){var _=ws(v),y=c*s+1.5*a*(-f+_),w=c*s+1.5*a*(-f-_);y<0?y=-Pp(-y,Ep):y=Pp(y,Ep),w<0?w=-Pp(-w,Ep):w=Pp(w,Ep);var p=(-s-(y+w))/(3*a);p>=0&&p<=1&&(o[d++]=p)}else{var T=(2*c*s-3*a*f)/(2*ws(c*c*c)),S=Math.acos(T)/3,P=ws(c),A=Math.cos(S),p=(-s-2*P*A)/(3*a),m=(-s+P*(A+KC*Math.sin(S)))/(3*a),k=(-s+P*(A-KC*Math.sin(S)))/(3*a);p>=0&&p<=1&&(o[d++]=p),m>=0&&m<=1&&(o[d++]=m),k>=0&&k<=1&&(o[d++]=k)}}return d}function e9(e,t,r,n,i){var o=6*r-12*t+6*e,a=9*t+3*n-3*e-9*r,s=3*t-3*e,l=0;if(ds(a)){if(t9(o)){var u=-s/o;u>=0&&u<=1&&(i[l++]=u)}}else{var c=o*o-4*a*s;if(ds(c))i[0]=-o/(2*a);else if(c>0){var f=ws(c),u=(-o+f)/(2*a),h=(-o-f)/(2*a);u>=0&&u<=1&&(i[l++]=u),h>=0&&h<=1&&(i[l++]=h)}}return l}function Cm(e,t,r,n,i,o){var a=(t-e)*i+e,s=(r-t)*i+t,l=(n-r)*i+r,u=(s-a)*i+a,c=(l-s)*i+s,f=(c-u)*i+u;o[0]=e,o[1]=a,o[2]=u,o[3]=f,o[4]=f,o[5]=c,o[6]=l,o[7]=n}function $Z(e,t,r,n,i,o,a,s,l,u,c){var f,h=.005,d=1/0,p,v,g,m;_o[0]=l,_o[1]=u;for(var _=0;_<1;_+=.05)Kn[0]=or(e,r,i,a,_),Kn[1]=or(t,n,o,s,_),g=Ic(_o,Kn),g<d&&(f=_,d=g);d=1/0;for(var y=0;y<32&&!(h<Q7);y++)p=f-h,v=f+h,Kn[0]=or(e,r,i,a,p),Kn[1]=or(t,n,o,s,p),g=Ic(Kn,_o),p>=0&&g<d?(f=p,d=g):(Rc[0]=or(e,r,i,a,v),Rc[1]=or(t,n,o,s,v),m=Ic(Rc,_o),v<=1&&m<d?(f=v,d=m):h*=.5);return c&&(c[0]=or(e,r,i,a,f),c[1]=or(t,n,o,s,f)),ws(d)}function zZ(e,t,r,n,i,o,a,s,l){for(var u=e,c=t,f=0,h=1/l,d=1;d<=l;d++){var p=d*h,v=or(e,r,i,a,p),g=or(t,n,o,s,p),m=v-u,_=g-c;f+=Math.sqrt(m*m+_*_),u=v,c=g}return f}function Fr(e,t,r,n){var i=1-n;return i*(i*e+2*n*t)+n*n*r}function QC(e,t,r,n){return 2*((1-n)*(t-e)+n*(r-t))}function VZ(e,t,r,n,i){var o=e-2*t+r,a=2*(t-e),s=e-n,l=0;if(ds(o)){if(t9(a)){var u=-s/a;u>=0&&u<=1&&(i[l++]=u)}}else{var c=a*a-4*o*s;if(ds(c)){var u=-a/(2*o);u>=0&&u<=1&&(i[l++]=u)}else if(c>0){var f=ws(c),u=(-a+f)/(2*o),h=(-a-f)/(2*o);u>=0&&u<=1&&(i[l++]=u),h>=0&&h<=1&&(i[l++]=h)}}return l}function r9(e,t,r){var n=e+r-2*t;return n===0?.5:(e-t)/n}function Mm(e,t,r,n,i){var o=(t-e)*n+e,a=(r-t)*n+t,s=(a-o)*n+o;i[0]=e,i[1]=o,i[2]=s,i[3]=s,i[4]=a,i[5]=r}function UZ(e,t,r,n,i,o,a,s,l){var u,c=.005,f=1/0;_o[0]=a,_o[1]=s;for(var h=0;h<1;h+=.05){Kn[0]=Fr(e,r,i,h),Kn[1]=Fr(t,n,o,h);var d=Ic(_o,Kn);d<f&&(u=h,f=d)}f=1/0;for(var p=0;p<32&&!(c<Q7);p++){var v=u-c,g=u+c;Kn[0]=Fr(e,r,i,v),Kn[1]=Fr(t,n,o,v);var d=Ic(Kn,_o);if(v>=0&&d<f)u=v,f=d;else{Rc[0]=Fr(e,r,i,g),Rc[1]=Fr(t,n,o,g);var m=Ic(Rc,_o);g<=1&&m<f?(u=g,f=m):c*=.5}}return l&&(l[0]=Fr(e,r,i,u),l[1]=Fr(t,n,o,u)),ws(f)}function GZ(e,t,r,n,i,o,a){for(var s=e,l=t,u=0,c=1/a,f=1;f<=a;f++){var h=f*c,d=Fr(e,r,i,h),p=Fr(t,n,o,h),v=d-s,g=p-l;u+=Math.sqrt(v*v+g*g),s=d,l=p}return u}var jZ=/cubic-bezier\(([0-9,\.e ]+)\)/;function n9(e){var t=e&&jZ.exec(e);if(t){var r=t[1].split(","),n=+So(r[0]),i=+So(r[1]),o=+So(r[2]),a=+So(r[3]);if(isNaN(n+i+o+a))return;var s=[];return function(l){return l<=0?0:l>=1?1:Am(0,n,o,1,l,s)&&or(0,i,a,1,s[0])}}}var WZ=function(){function e(t){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=t.loop||!1,this.onframe=t.onframe||Gr,this.ondestroy=t.ondestroy||Gr,this.onrestart=t.onrestart||Gr,t.easing&&this.setEasing(t.easing)}return e.prototype.step=function(t,r){if(this._inited||(this._startTime=t+this._delay,this._inited=!0),this._paused){this._pausedTime+=r;return}var n=this._life,i=t-this._startTime-this._pausedTime,o=i/n;o<0&&(o=0),o=Math.min(o,1);var a=this.easingFunc,s=a?a(o):o;if(this.onframe(s),o===1)if(this.loop){var l=i%n;this._startTime=t-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){this._paused=!1},e.prototype.setEasing=function(t){this.easing=t,this.easingFunc=Ut(t)?t:J7[t]||n9(t)},e}();const HZ=WZ;var i9=function(){function e(t){this.value=t}return e}(),XZ=function(){function e(){this._len=0}return e.prototype.insert=function(t){var r=new i9(t);return this.insertEntry(r),r},e.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},e.prototype.remove=function(t){var r=t.prev,n=t.next;r?r.next=n:this.head=n,n?n.prev=r:this.tail=r,t.next=t.prev=null,this._len--},e.prototype.len=function(){return this._len},e.prototype.clear=function(){this.head=this.tail=null,this._len=0},e}(),YZ=function(){function e(t){this._list=new XZ,this._maxSize=10,this._map={},this._maxSize=t}return e.prototype.put=function(t,r){var n=this._list,i=this._map,o=null;if(i[t]==null){var a=n.len(),s=this._lastRemovedEntry;if(a>=this._maxSize&&a>0){var l=n.head;n.remove(l),delete i[l.key],o=l.value,this._lastRemovedEntry=l}s?s.value=r:s=new i9(r),s.key=t,n.insertEntry(s),i[t]=s}return o},e.prototype.get=function(t){var r=this._map[t],n=this._list;if(r!=null)return r!==n.tail&&(n.remove(r),n.insertEntry(r)),r.value},e.prototype.clear=function(){this._list.clear(),this._map={}},e.prototype.len=function(){return this._list.len()},e}();const M0=YZ;var tM={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Ii(e){return e=Math.round(e),e<0?0:e>255?255:e}function qZ(e){return e=Math.round(e),e<0?0:e>360?360:e}function Xd(e){return e<0?0:e>1?1:e}function Ay(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?Ii(parseFloat(t)/100*255):Ii(parseInt(t,10))}function $l(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?Xd(parseFloat(t)/100):Xd(parseFloat(t))}function Cy(e,t,r){return r<0?r+=1:r>1&&(r-=1),r*6<1?e+(t-e)*r*6:r*2<1?t:r*3<2?e+(t-e)*(2/3-r)*6:e}function ps(e,t,r){return e+(t-e)*r}function Wn(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}function CS(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}var o9=new M0(20),kp=null;function Du(e,t){kp&&CS(kp,t),kp=o9.put(e,kp||t.slice())}function Qn(e,t){if(!!e){t=t||[];var r=o9.get(e);if(r)return CS(t,r);e=e+"";var n=e.replace(/ /g,"").toLowerCase();if(n in tM)return CS(t,tM[n]),Du(e,t),t;var i=n.length;if(n.charAt(0)==="#"){if(i===4||i===5){var o=parseInt(n.slice(1,4),16);if(!(o>=0&&o<=4095)){Wn(t,0,0,0,1);return}return Wn(t,(o&3840)>>4|(o&3840)>>8,o&240|(o&240)>>4,o&15|(o&15)<<4,i===5?parseInt(n.slice(4),16)/15:1),Du(e,t),t}else if(i===7||i===9){var o=parseInt(n.slice(1,7),16);if(!(o>=0&&o<=16777215)){Wn(t,0,0,0,1);return}return Wn(t,(o&16711680)>>16,(o&65280)>>8,o&255,i===9?parseInt(n.slice(7),16)/255:1),Du(e,t),t}return}var a=n.indexOf("("),s=n.indexOf(")");if(a!==-1&&s+1===i){var l=n.substr(0,a),u=n.substr(a+1,s-(a+1)).split(","),c=1;switch(l){case"rgba":if(u.length!==4)return u.length===3?Wn(t,+u[0],+u[1],+u[2],1):Wn(t,0,0,0,1);c=$l(u.pop());case"rgb":if(u.length>=3)return Wn(t,Ay(u[0]),Ay(u[1]),Ay(u[2]),u.length===3?c:$l(u[3])),Du(e,t),t;Wn(t,0,0,0,1);return;case"hsla":if(u.length!==4){Wn(t,0,0,0,1);return}return u[3]=$l(u[3]),MS(u,t),Du(e,t),t;case"hsl":if(u.length!==3){Wn(t,0,0,0,1);return}return MS(u,t),Du(e,t),t;default:return}}Wn(t,0,0,0,1)}}function MS(e,t){var r=(parseFloat(e[0])%360+360)%360/360,n=$l(e[1]),i=$l(e[2]),o=i<=.5?i*(n+1):i+n-i*n,a=i*2-o;return t=t||[],Wn(t,Ii(Cy(a,o,r+1/3)*255),Ii(Cy(a,o,r)*255),Ii(Cy(a,o,r-1/3)*255),1),e.length===4&&(t[3]=e[3]),t}function ZZ(e){if(!!e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.min(t,r,n),o=Math.max(t,r,n),a=o-i,s=(o+i)/2,l,u;if(a===0)l=0,u=0;else{s<.5?u=a/(o+i):u=a/(2-o-i);var c=((o-t)/6+a/2)/a,f=((o-r)/6+a/2)/a,h=((o-n)/6+a/2)/a;t===o?l=h-f:r===o?l=1/3+c-h:n===o&&(l=2/3+f-c),l<0&&(l+=1),l>1&&(l-=1)}var d=[l*360,u,s];return e[3]!=null&&d.push(e[3]),d}}function eM(e,t){var r=Qn(e);if(r){for(var n=0;n<3;n++)t<0?r[n]=r[n]*(1-t)|0:r[n]=(255-r[n])*t+r[n]|0,r[n]>255?r[n]=255:r[n]<0&&(r[n]=0);return fa(r,r.length===4?"rgba":"rgb")}}function My(e,t,r){if(!(!(t&&t.length)||!(e>=0&&e<=1))){r=r||[];var n=e*(t.length-1),i=Math.floor(n),o=Math.ceil(n),a=t[i],s=t[o],l=n-i;return r[0]=Ii(ps(a[0],s[0],l)),r[1]=Ii(ps(a[1],s[1],l)),r[2]=Ii(ps(a[2],s[2],l)),r[3]=Xd(ps(a[3],s[3],l)),r}}function KZ(e,t,r){if(!(!(t&&t.length)||!(e>=0&&e<=1))){var n=e*(t.length-1),i=Math.floor(n),o=Math.ceil(n),a=Qn(t[i]),s=Qn(t[o]),l=n-i,u=fa([Ii(ps(a[0],s[0],l)),Ii(ps(a[1],s[1],l)),Ii(ps(a[2],s[2],l)),Xd(ps(a[3],s[3],l))],"rgba");return r?{color:u,leftIndex:i,rightIndex:o,value:n}:u}}function xy(e,t,r,n){var i=Qn(e);if(e)return i=ZZ(i),t!=null&&(i[0]=qZ(t)),r!=null&&(i[1]=$l(r)),n!=null&&(i[2]=$l(n)),fa(MS(i),"rgba")}function xS(e,t){var r=Qn(e);if(r&&t!=null)return r[3]=Xd(t),fa(r,"rgba")}function fa(e,t){if(!(!e||!e.length)){var r=e[0]+","+e[1]+","+e[2];return(t==="rgba"||t==="hsva"||t==="hsla")&&(r+=","+e[3]),t+"("+r+")"}}function xm(e,t){var r=Qn(e);return r?(.299*r[0]+.587*r[1]+.114*r[2])*r[3]/255+(1-r[3])*t:0}function JZ(e){return e.type==="linear"}function QZ(e){return e.type==="radial"}(function(){return Xt.hasGlobalWindow&&Ut(window.btoa)?function(e){return window.btoa(unescape(e))}:typeof Buffer<"u"?function(e){return Buffer.from(e).toString("base64")}:function(e){return null}})();var LS=Array.prototype.slice;function ta(e,t,r){return(t-e)*r+e}function Ly(e,t,r,n){for(var i=t.length,o=0;o<i;o++)e[o]=ta(t[o],r[o],n);return e}function tK(e,t,r,n){for(var i=t.length,o=i&&t[0].length,a=0;a<i;a++){e[a]||(e[a]=[]);for(var s=0;s<o;s++)e[a][s]=ta(t[a][s],r[a][s],n)}return e}function Ap(e,t,r,n){for(var i=t.length,o=0;o<i;o++)e[o]=t[o]+r[o]*n;return e}function rM(e,t,r,n){for(var i=t.length,o=i&&t[0].length,a=0;a<i;a++){e[a]||(e[a]=[]);for(var s=0;s<o;s++)e[a][s]=t[a][s]+r[a][s]*n}return e}function eK(e,t){for(var r=e.length,n=t.length,i=r>n?t:e,o=Math.min(r,n),a=i[o-1]||{color:[0,0,0,0],offset:0},s=o;s<Math.max(r,n);s++)i.push({offset:a.offset,color:a.color.slice()})}function rK(e,t,r){var n=e,i=t;if(!(!n.push||!i.push)){var o=n.length,a=i.length;if(o!==a){var s=o>a;if(s)n.length=a;else for(var l=o;l<a;l++)n.push(r===1?i[l]:LS.call(i[l]))}for(var u=n[0]&&n[0].length,l=0;l<n.length;l++)if(r===1)isNaN(n[l])&&(n[l]=i[l]);else for(var c=0;c<u;c++)isNaN(n[l][c])&&(n[l][c]=i[l][c])}}function _d(e){if(Wr(e)){var t=e.length;if(Wr(e[0])){for(var r=[],n=0;n<t;n++)r.push(LS.call(e[n]));return r}return LS.call(e)}return e}function Bg(e){return e[0]=Math.floor(e[0])||0,e[1]=Math.floor(e[1])||0,e[2]=Math.floor(e[2])||0,e[3]=e[3]==null?1:e[3],"rgba("+e.join(",")+")"}function nK(e){return Wr(e&&e[0])?2:1}var Cp=0,$g=1,a9=2,qh=3,IS=4,OS=5,nM=6;function iM(e){return e===IS||e===OS}function Mp(e){return e===$g||e===a9}var eh=[0,0,0,0],iK=function(){function e(t){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=t}return e.prototype.isFinished=function(){return this._finished},e.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},e.prototype.needsAnimate=function(){return this.keyframes.length>=1},e.prototype.getAdditiveTrack=function(){return this._additiveTrack},e.prototype.addKeyframe=function(t,r,n){this._needsSort=!0;var i=this.keyframes,o=i.length,a=!1,s=nM,l=r;if(Wr(r)){var u=nK(r);s=u,(u===1&&!we(r[0])||u===2&&!we(r[0][0]))&&(a=!0)}else if(we(r)&&!Pm(r))s=Cp;else if(Et(r))if(!isNaN(+r))s=Cp;else{var c=Qn(r);c&&(l=c,s=qh)}else if(G1(r)){var f=at({},l);f.colorStops=Ct(r.colorStops,function(d){return{offset:d.offset,color:Qn(d.color)}}),JZ(r)?s=IS:QZ(r)&&(s=OS),l=f}o===0?this.valType=s:(s!==this.valType||s===nM)&&(a=!0),this.discrete=this.discrete||a;var h={time:t,value:l,rawValue:r,percent:0};return n&&(h.easing=n,h.easingFunc=Ut(n)?n:J7[n]||n9(n)),i.push(h),h},e.prototype.prepare=function(t,r){var n=this.keyframes;this._needsSort&&n.sort(function(v,g){return v.time-g.time});for(var i=this.valType,o=n.length,a=n[o-1],s=this.discrete,l=Mp(i),u=iM(i),c=0;c<o;c++){var f=n[c],h=f.value,d=a.value;f.percent=f.time/t,s||(l&&c!==o-1?rK(h,d,i):u&&eK(h.colorStops,d.colorStops))}if(!s&&i!==OS&&r&&this.needsAnimate()&&r.needsAnimate()&&i===r.valType&&!r._finished){this._additiveTrack=r;for(var p=n[0].value,c=0;c<o;c++)i===Cp?n[c].additiveValue=n[c].value-p:i===qh?n[c].additiveValue=Ap([],n[c].value,p,-1):Mp(i)&&(n[c].additiveValue=i===$g?Ap([],n[c].value,p,-1):rM([],n[c].value,p,-1))}},e.prototype.step=function(t,r){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var n=this._additiveTrack!=null,i=n?"additiveValue":"value",o=this.valType,a=this.keyframes,s=a.length,l=this.propName,u=o===qh,c,f=this._lastFr,h=Math.min,d,p;if(s===1)d=p=a[0];else{if(r<0)c=0;else if(r<this._lastFrP){var v=h(f+1,s-1);for(c=v;c>=0&&!(a[c].percent<=r);c--);c=h(c,s-2)}else{for(c=f;c<s&&!(a[c].percent>r);c++);c=h(c-1,s-2)}p=a[c+1],d=a[c]}if(!!(d&&p)){this._lastFr=c,this._lastFrP=r;var g=p.percent-d.percent,m=g===0?1:h((r-d.percent)/g,1);p.easingFunc&&(m=p.easingFunc(m));var _=n?this._additiveValue:u?eh:t[l];if((Mp(o)||u)&&!_&&(_=this._additiveValue=[]),this.discrete)t[l]=m<1?d.rawValue:p.rawValue;else if(Mp(o))o===$g?Ly(_,d[i],p[i],m):tK(_,d[i],p[i],m);else if(iM(o)){var y=d[i],w=p[i],T=o===IS;t[l]={type:T?"linear":"radial",x:ta(y.x,w.x,m),y:ta(y.y,w.y,m),colorStops:Ct(y.colorStops,function(P,A){var k=w.colorStops[A];return{offset:ta(P.offset,k.offset,m),color:Bg(Ly([],P.color,k.color,m))}}),global:w.global},T?(t[l].x2=ta(y.x2,w.x2,m),t[l].y2=ta(y.y2,w.y2,m)):t[l].r=ta(y.r,w.r,m)}else if(u)Ly(_,d[i],p[i],m),n||(t[l]=Bg(_));else{var S=ta(d[i],p[i],m);n?this._additiveValue=S:t[l]=S}n&&this._addToTarget(t)}}},e.prototype._addToTarget=function(t){var r=this.valType,n=this.propName,i=this._additiveValue;r===Cp?t[n]=t[n]+i:r===qh?(Qn(t[n],eh),Ap(eh,eh,i,1),t[n]=Bg(eh)):r===$g?Ap(t[n],t[n],i,1):r===a9&&rM(t[n],t[n],i,1)},e}(),oK=function(){function e(t,r,n,i){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=t,this._loop=r,r&&i){AP("Can' use additive animation on looped animation.");return}this._additiveAnimators=i,this._allowDiscrete=n}return e.prototype.getMaxTime=function(){return this._maxTime},e.prototype.getDelay=function(){return this._delay},e.prototype.getLoop=function(){return this._loop},e.prototype.getTarget=function(){return this._target},e.prototype.changeTarget=function(t){this._target=t},e.prototype.when=function(t,r,n){return this.whenWithKeys(t,r,ge(r),n)},e.prototype.whenWithKeys=function(t,r,n,i){for(var o=this._tracks,a=0;a<n.length;a++){var s=n[a],l=o[s];if(!l){l=o[s]=new iK(s);var u=void 0,c=this._getAdditiveTrack(s);if(c){var f=c.keyframes,h=f[f.length-1];u=h&&h.value,c.valType===qh&&u&&(u=Bg(u))}else u=this._target[s];if(u==null)continue;t>0&&l.addKeyframe(0,_d(u),i),this._trackKeys.push(s)}l.addKeyframe(t,_d(r[s]),i)}return this._maxTime=Math.max(this._maxTime,t),this},e.prototype.pause=function(){this._clip.pause(),this._paused=!0},e.prototype.resume=function(){this._clip.resume(),this._paused=!1},e.prototype.isPaused=function(){return!!this._paused},e.prototype.duration=function(t){return this._maxTime=t,this._force=!0,this},e.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var r=t.length,n=0;n<r;n++)t[n].call(this)},e.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,r=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,r)for(var n=0;n<r.length;n++)r[n].call(this)},e.prototype._setTracksFinished=function(){for(var t=this._tracks,r=this._trackKeys,n=0;n<r.length;n++)t[r[n]].setFinished()},e.prototype._getAdditiveTrack=function(t){var r,n=this._additiveAnimators;if(n)for(var i=0;i<n.length;i++){var o=n[i].getTrack(t);o&&(r=o)}return r},e.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var r=this,n=[],i=this._maxTime||0,o=0;o<this._trackKeys.length;o++){var a=this._trackKeys[o],s=this._tracks[a],l=this._getAdditiveTrack(a),u=s.keyframes,c=u.length;if(s.prepare(i,l),s.needsAnimate())if(!this._allowDiscrete&&s.discrete){var f=u[c-1];f&&(r._target[s.propName]=f.rawValue),s.setFinished()}else n.push(s)}if(n.length||this._force){var h=new HZ({life:i,loop:this._loop,delay:this._delay||0,onframe:function(d){r._started=2;var p=r._additiveAnimators;if(p){for(var v=!1,g=0;g<p.length;g++)if(p[g]._clip){v=!0;break}v||(r._additiveAnimators=null)}for(var g=0;g<n.length;g++)n[g].step(r._target,d);var m=r._onframeCbs;if(m)for(var g=0;g<m.length;g++)m[g](r._target,d)},ondestroy:function(){r._doneCallback()}});this._clip=h,this.animation&&this.animation.addClip(h),t&&h.setEasing(t)}else this._doneCallback();return this}},e.prototype.stop=function(t){if(!!this._clip){var r=this._clip;t&&r.onframe(1),this._abortedCallback()}},e.prototype.delay=function(t){return this._delay=t,this},e.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},e.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},e.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},e.prototype.getClip=function(){return this._clip},e.prototype.getTrack=function(t){return this._tracks[t]},e.prototype.getTracks=function(){var t=this;return Ct(this._trackKeys,function(r){return t._tracks[r]})},e.prototype.stopTracks=function(t,r){if(!t.length||!this._clip)return!0;for(var n=this._tracks,i=this._trackKeys,o=0;o<t.length;o++){var a=n[t[o]];a&&!a.isFinished()&&(r?a.step(this._target,1):this._started===1&&a.step(this._target,0),a.setFinished())}for(var s=!0,o=0;o<i.length;o++)if(!n[i[o]].isFinished()){s=!1;break}return s&&this._abortedCallback(),s},e.prototype.saveTo=function(t,r,n){if(!!t){r=r||this._trackKeys;for(var i=0;i<r.length;i++){var o=r[i],a=this._tracks[o];if(!(!a||a.isFinished())){var s=a.keyframes,l=s[n?0:s.length-1];l&&(t[o]=_d(l.rawValue))}}}},e.prototype.__changeFinalValue=function(t,r){r=r||ge(t);for(var n=0;n<r.length;n++){var i=r[n],o=this._tracks[i];if(!!o){var a=o.keyframes;if(a.length>1){var s=a.pop();o.addKeyframe(s.time,t[i]),o.prepare(this._maxTime,o.getAdditiveTrack())}}}},e}();const OP=oK;function wc(){return new Date().getTime()}var aK=function(e){ke(t,e);function t(r){var n=e.call(this)||this;return n._running=!1,n._time=0,n._pausedTime=0,n._pauseStart=0,n._paused=!1,r=r||{},n.stage=r.stage||{},n}return t.prototype.addClip=function(r){r.animation&&this.removeClip(r),this._head?(this._tail.next=r,r.prev=this._tail,r.next=null,this._tail=r):this._head=this._tail=r,r.animation=this},t.prototype.addAnimator=function(r){r.animation=this;var n=r.getClip();n&&this.addClip(n)},t.prototype.removeClip=function(r){if(!!r.animation){var n=r.prev,i=r.next;n?n.next=i:this._head=i,i?i.prev=n:this._tail=n,r.next=r.prev=r.animation=null}},t.prototype.removeAnimator=function(r){var n=r.getClip();n&&this.removeClip(n),r.animation=null},t.prototype.update=function(r){for(var n=wc()-this._pausedTime,i=n-this._time,o=this._head;o;){var a=o.next,s=o.step(n,i);s&&(o.ondestroy(),this.removeClip(o)),o=a}this._time=n,r||(this.trigger("frame",i),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var r=this;this._running=!0;function n(){r._running&&(AS(n),!r._paused&&r.update())}AS(n)},t.prototype.start=function(){this._running||(this._time=wc(),this._pausedTime=0,this._startLoop())},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){this._paused||(this._pauseStart=wc(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=wc()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var r=this._head;r;){var n=r.next;r.prev=r.next=r.animation=null,r=n}this._head=this._tail=null},t.prototype.isFinished=function(){return this._head==null},t.prototype.animate=function(r,n){n=n||{},this.start();var i=new OP(r,n.loop);return this.addAnimator(i),i},t}(Gi);const sK=aK;var lK=300,Iy=Xt.domSupported,Oy=function(){var e=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],t=["touchstart","touchend","touchmove"],r={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},n=Ct(e,function(i){var o=i.replace("mouse","pointer");return r.hasOwnProperty(o)?o:i});return{mouse:e,touch:t,pointer:n}}(),oM={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},aM=!1;function RS(e){var t=e.pointerType;return t==="pen"||t==="touch"}function uK(e){e.touching=!0,e.touchTimer!=null&&(clearTimeout(e.touchTimer),e.touchTimer=null),e.touchTimer=setTimeout(function(){e.touching=!1,e.touchTimer=null},700)}function Ry(e){e&&(e.zrByTouch=!0)}function cK(e,t){return Hn(e.dom,new fK(e,t),!0)}function s9(e,t){for(var r=t,n=!1;r&&r.nodeType!==9&&!(n=r.domBelongToZr||r!==t&&r===e.painterRoot);)r=r.parentNode;return n}var fK=function(){function e(t,r){this.stopPropagation=Gr,this.stopImmediatePropagation=Gr,this.preventDefault=Gr,this.type=r.type,this.target=this.currentTarget=t.dom,this.pointerType=r.pointerType,this.clientX=r.clientX,this.clientY=r.clientY}return e}(),mi={mousedown:function(e){e=Hn(this.dom,e),this.__mayPointerCapture=[e.zrX,e.zrY],this.trigger("mousedown",e)},mousemove:function(e){e=Hn(this.dom,e);var t=this.__mayPointerCapture;t&&(e.zrX!==t[0]||e.zrY!==t[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",e)},mouseup:function(e){e=Hn(this.dom,e),this.__togglePointerCapture(!1),this.trigger("mouseup",e)},mouseout:function(e){e=Hn(this.dom,e);var t=e.toElement||e.relatedTarget;s9(this,t)||(this.__pointerCapturing&&(e.zrEventControl="no_globalout"),this.trigger("mouseout",e))},wheel:function(e){aM=!0,e=Hn(this.dom,e),this.trigger("mousewheel",e)},mousewheel:function(e){aM||(e=Hn(this.dom,e),this.trigger("mousewheel",e))},touchstart:function(e){e=Hn(this.dom,e),Ry(e),this.__lastTouchMoment=new Date,this.handler.processGesture(e,"start"),mi.mousemove.call(this,e),mi.mousedown.call(this,e)},touchmove:function(e){e=Hn(this.dom,e),Ry(e),this.handler.processGesture(e,"change"),mi.mousemove.call(this,e)},touchend:function(e){e=Hn(this.dom,e),Ry(e),this.handler.processGesture(e,"end"),mi.mouseup.call(this,e),+new Date-+this.__lastTouchMoment<lK&&mi.click.call(this,e)},pointerdown:function(e){mi.mousedown.call(this,e)},pointermove:function(e){RS(e)||mi.mousemove.call(this,e)},pointerup:function(e){mi.mouseup.call(this,e)},pointerout:function(e){RS(e)||mi.mouseout.call(this,e)}};F(["click","dblclick","contextmenu"],function(e){mi[e]=function(t){t=Hn(this.dom,t),this.trigger(e,t)}});var DS={pointermove:function(e){RS(e)||DS.mousemove.call(this,e)},pointerup:function(e){DS.mouseup.call(this,e)},mousemove:function(e){this.trigger("mousemove",e)},mouseup:function(e){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",e),t&&(e.zrEventControl="only_globalout",this.trigger("mouseout",e))}};function hK(e,t){var r=t.domHandlers;Xt.pointerEventsSupported?F(Oy.pointer,function(n){zg(t,n,function(i){r[n].call(e,i)})}):(Xt.touchEventsSupported&&F(Oy.touch,function(n){zg(t,n,function(i){r[n].call(e,i),uK(t)})}),F(Oy.mouse,function(n){zg(t,n,function(i){i=xP(i),t.touching||r[n].call(e,i)})}))}function dK(e,t){Xt.pointerEventsSupported?F(oM.pointer,r):Xt.touchEventsSupported||F(oM.mouse,r);function r(n){function i(o){o=xP(o),s9(e,o.target)||(o=cK(e,o),t.domHandlers[n].call(e,o))}zg(t,n,i,{capture:!0})}}function zg(e,t,r,n){e.mounted[t]=r,e.listenerOpts[t]=n,wZ(e.domTarget,t,r,n)}function Dy(e){var t=e.mounted;for(var r in t)t.hasOwnProperty(r)&&SZ(e.domTarget,r,t[r],e.listenerOpts[r]);e.mounted={}}var sM=function(){function e(t,r){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=r}return e}(),pK=function(e){ke(t,e);function t(r,n){var i=e.call(this)||this;return i.__pointerCapturing=!1,i.dom=r,i.painterRoot=n,i._localHandlerScope=new sM(r,mi),Iy&&(i._globalHandlerScope=new sM(document,DS)),hK(i,i._localHandlerScope),i}return t.prototype.dispose=function(){Dy(this._localHandlerScope),Iy&&Dy(this._globalHandlerScope)},t.prototype.setCursor=function(r){this.dom.style&&(this.dom.style.cursor=r||"default")},t.prototype.__togglePointerCapture=function(r){if(this.__mayPointerCapture=null,Iy&&+this.__pointerCapturing^+r){this.__pointerCapturing=r;var n=this._globalHandlerScope;r?dK(this,n):Dy(n)}},t}(Gi);const vK=pK;var l9=1;Xt.hasGlobalWindow&&(l9=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var Lm=l9,NS=.4,FS="#333",BS="#ccc",gK="#eee",lM=LP,uM=5e-5;function Ks(e){return e>uM||e<-uM}var Js=[],Nu=[],Ny=qc(),Fy=Math.abs,xl=function(){function e(){}return e.prototype.getLocalTransform=function(t){return e.getLocalTransform(this,t)},e.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},e.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},e.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},e.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},e.prototype.needLocalTransform=function(){return Ks(this.rotation)||Ks(this.x)||Ks(this.y)||Ks(this.scaleX-1)||Ks(this.scaleY-1)||Ks(this.skewX)||Ks(this.skewY)},e.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,r=this.needLocalTransform(),n=this.transform;if(!(r||t)){n&&lM(n);return}n=n||qc(),r?this.getLocalTransform(n):lM(n),t&&(r?Oc(n,t,n):H7(n,t)),this.transform=n,this._resolveGlobalScaleRatio(n)},e.prototype._resolveGlobalScaleRatio=function(t){var r=this.globalScaleRatio;if(r!=null&&r!==1){this.getGlobalScale(Js);var n=Js[0]<0?-1:1,i=Js[1]<0?-1:1,o=((Js[0]-n)*r+n)/Js[0]||0,a=((Js[1]-i)*r+i)/Js[1]||0;t[0]*=o,t[1]*=o,t[2]*=a,t[3]*=a}this.invTransform=this.invTransform||qc(),W1(this.invTransform,t)},e.prototype.getComputedTransform=function(){for(var t=this,r=[];t;)r.push(t),t=t.parent;for(;t=r.pop();)t.updateTransform();return this.transform},e.prototype.setLocalTransform=function(t){if(!!t){var r=t[0]*t[0]+t[1]*t[1],n=t[2]*t[2]+t[3]*t[3],i=Math.atan2(t[1],t[0]),o=Math.PI/2+i-Math.atan2(t[3],t[2]);n=Math.sqrt(n)*Math.cos(o),r=Math.sqrt(r),this.skewX=o,this.skewY=0,this.rotation=-i,this.x=+t[4],this.y=+t[5],this.scaleX=r,this.scaleY=n,this.originX=0,this.originY=0}},e.prototype.decomposeTransform=function(){if(!!this.transform){var t=this.parent,r=this.transform;t&&t.transform&&(Oc(Nu,t.invTransform,r),r=Nu);var n=this.originX,i=this.originY;(n||i)&&(Ny[4]=n,Ny[5]=i,Oc(Nu,r,Ny),Nu[4]-=n,Nu[5]-=i,r=Nu),this.setLocalTransform(r)}},e.prototype.getGlobalScale=function(t){var r=this.transform;return t=t||[],r?(t[0]=Math.sqrt(r[0]*r[0]+r[1]*r[1]),t[1]=Math.sqrt(r[2]*r[2]+r[3]*r[3]),r[0]<0&&(t[0]=-t[0]),r[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},e.prototype.transformCoordToLocal=function(t,r){var n=[t,r],i=this.invTransform;return i&&rn(n,n,i),n},e.prototype.transformCoordToGlobal=function(t,r){var n=[t,r],i=this.transform;return i&&rn(n,n,i),n},e.prototype.getLineScale=function(){var t=this.transform;return t&&Fy(t[0]-1)>1e-10&&Fy(t[3]-1)>1e-10?Math.sqrt(Fy(t[0]*t[3]-t[2]*t[1])):1},e.prototype.copyTransform=function(t){mK(this,t)},e.getLocalTransform=function(t,r){r=r||[];var n=t.originX||0,i=t.originY||0,o=t.scaleX,a=t.scaleY,s=t.anchorX,l=t.anchorY,u=t.rotation||0,c=t.x,f=t.y,h=t.skewX?Math.tan(t.skewX):0,d=t.skewY?Math.tan(-t.skewY):0;if(n||i||s||l){var p=n+s,v=i+l;r[4]=-p*o-h*v*a,r[5]=-v*a-d*p*o}else r[4]=r[5]=0;return r[0]=o,r[3]=a,r[1]=d*o,r[2]=h*a,u&&IP(r,r,u),r[4]+=n+c,r[5]+=i+f,r},e.initDefaultProps=function(){var t=e.prototype;t.scaleX=t.scaleY=t.globalScaleRatio=1,t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0}(),e}(),Mo=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function mK(e,t){for(var r=0;r<Mo.length;r++){var n=Mo[r];e[n]=t[n]}}var cM={};function Mn(e,t){t=t||Zl;var r=cM[t];r||(r=cM[t]=new M0(500));var n=r.get(e);return n==null&&(n=fu.measureText(e,t).width,r.put(e,n)),n}function fM(e,t,r,n){var i=Mn(e,t),o=DP(t),a=Zh(0,i,r),s=gc(0,o,n),l=new ae(a,s,i,o);return l}function RP(e,t,r,n){var i=((e||"")+"").split(`
`),o=i.length;if(o===1)return fM(i[0],t,r,n);for(var a=new ae(0,0,0,0),s=0;s<i.length;s++){var l=fM(i[s],t,r,n);s===0?a.copy(l):a.union(l)}return a}function Zh(e,t,r){return r==="right"?e-=t:r==="center"&&(e-=t/2),e}function gc(e,t,r){return r==="middle"?e-=t/2:r==="bottom"&&(e-=t),e}function DP(e){return Mn("\u56FD",e)}function ga(e,t){return typeof e=="string"?e.lastIndexOf("%")>=0?parseFloat(e)/100*t:parseFloat(e):e}function Im(e,t,r){var n=t.position||"inside",i=t.distance!=null?t.distance:5,o=r.height,a=r.width,s=o/2,l=r.x,u=r.y,c="left",f="top";if(n instanceof Array)l+=ga(n[0],r.width),u+=ga(n[1],r.height),c=null,f=null;else switch(n){case"left":l-=i,u+=s,c="right",f="middle";break;case"right":l+=i+a,u+=s,f="middle";break;case"top":l+=a/2,u-=i,c="center",f="bottom";break;case"bottom":l+=a/2,u+=o+i,c="center";break;case"inside":l+=a/2,u+=s,c="center",f="middle";break;case"insideLeft":l+=i,u+=s,f="middle";break;case"insideRight":l+=a-i,u+=s,c="right",f="middle";break;case"insideTop":l+=a/2,u+=i,c="center";break;case"insideBottom":l+=a/2,u+=o-i,c="center",f="bottom";break;case"insideTopLeft":l+=i,u+=i;break;case"insideTopRight":l+=a-i,u+=i,c="right";break;case"insideBottomLeft":l+=i,u+=o-i,f="bottom";break;case"insideBottomRight":l+=a-i,u+=o-i,c="right",f="bottom";break}return e=e||{},e.x=l,e.y=u,e.align=c,e.verticalAlign=f,e}var By="__zr_normal__",$y=Mo.concat(["ignore"]),_K=hu(Mo,function(e,t){return e[t]=!0,e},{ignore:!1}),Fu={},yK=new ae(0,0,0,0),NP=function(){function e(t){this.id=$7(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return e.prototype._init=function(t){this.attr(t)},e.prototype.drift=function(t,r,n){switch(this.draggable){case"horizontal":r=0;break;case"vertical":t=0;break}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=t,i[5]+=r,this.decomposeTransform(),this.markRedraw()},e.prototype.beforeUpdate=function(){},e.prototype.afterUpdate=function(){},e.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},e.prototype.updateInnerText=function(t){var r=this._textContent;if(r&&(!r.ignore||t)){this.textConfig||(this.textConfig={});var n=this.textConfig,i=n.local,o=r.innerTransformable,a=void 0,s=void 0,l=!1;o.parent=i?this:null;var u=!1;if(o.copyTransform(r),n.position!=null){var c=yK;n.layoutRect?c.copy(n.layoutRect):c.copy(this.getBoundingRect()),i||c.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(Fu,n,c):Im(Fu,n,c),o.x=Fu.x,o.y=Fu.y,a=Fu.align,s=Fu.verticalAlign;var f=n.origin;if(f&&n.rotation!=null){var h=void 0,d=void 0;f==="center"?(h=c.width*.5,d=c.height*.5):(h=ga(f[0],c.width),d=ga(f[1],c.height)),u=!0,o.originX=-o.x+h+(i?0:c.x),o.originY=-o.y+d+(i?0:c.y)}}n.rotation!=null&&(o.rotation=n.rotation);var p=n.offset;p&&(o.x+=p[0],o.y+=p[1],u||(o.originX=-p[0],o.originY=-p[1]));var v=n.inside==null?typeof n.position=="string"&&n.position.indexOf("inside")>=0:n.inside,g=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),m=void 0,_=void 0,y=void 0;v&&this.canBeInsideText()?(m=n.insideFill,_=n.insideStroke,(m==null||m==="auto")&&(m=this.getInsideTextFill()),(_==null||_==="auto")&&(_=this.getInsideTextStroke(m),y=!0)):(m=n.outsideFill,_=n.outsideStroke,(m==null||m==="auto")&&(m=this.getOutsideFill()),(_==null||_==="auto")&&(_=this.getOutsideStroke(m),y=!0)),m=m||"#000",(m!==g.fill||_!==g.stroke||y!==g.autoStroke||a!==g.align||s!==g.verticalAlign)&&(l=!0,g.fill=m,g.stroke=_,g.autoStroke=y,g.align=a,g.verticalAlign=s,r.setDefaultTextStyle(g)),r.__dirty|=An,l&&r.dirtyStyle(!0)}},e.prototype.canBeInsideText=function(){return!0},e.prototype.getInsideTextFill=function(){return"#fff"},e.prototype.getInsideTextStroke=function(t){return"#000"},e.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?BS:FS},e.prototype.getOutsideStroke=function(t){var r=this.__zr&&this.__zr.getBackgroundColor(),n=typeof r=="string"&&Qn(r);n||(n=[255,255,255,1]);for(var i=n[3],o=this.__zr.isDarkMode(),a=0;a<3;a++)n[a]=n[a]*i+(o?0:255)*(1-i);return n[3]=1,fa(n,"rgba")},e.prototype.traverse=function(t,r){},e.prototype.attrKV=function(t,r){t==="textConfig"?this.setTextConfig(r):t==="textContent"?this.setTextContent(r):t==="clipPath"?this.setClipPath(r):t==="extra"?(this.extra=this.extra||{},at(this.extra,r)):this[t]=r},e.prototype.hide=function(){this.ignore=!0,this.markRedraw()},e.prototype.show=function(){this.ignore=!1,this.markRedraw()},e.prototype.attr=function(t,r){if(typeof t=="string")this.attrKV(t,r);else if(Ot(t))for(var n=t,i=ge(n),o=0;o<i.length;o++){var a=i[o];this.attrKV(a,t[a])}return this.markRedraw(),this},e.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var r=this._normalState,n=0;n<this.animators.length;n++){var i=this.animators[n],o=i.__fromStateTransition;if(!(i.getLoop()||o&&o!==By)){var a=i.targetName,s=a?r[a]:r;i.saveTo(s)}}},e.prototype._innerSaveToNormal=function(t){var r=this._normalState;r||(r=this._normalState={}),t.textConfig&&!r.textConfig&&(r.textConfig=this.textConfig),this._savePrimaryToNormal(t,r,$y)},e.prototype._savePrimaryToNormal=function(t,r,n){for(var i=0;i<n.length;i++){var o=n[i];t[o]!=null&&!(o in r)&&(r[o]=this[o])}},e.prototype.hasState=function(){return this.currentStates.length>0},e.prototype.getState=function(t){return this.states[t]},e.prototype.ensureState=function(t){var r=this.states;return r[t]||(r[t]={}),r[t]},e.prototype.clearStates=function(t){this.useState(By,!1,t)},e.prototype.useState=function(t,r,n,i){var o=t===By,a=this.hasState();if(!(!a&&o)){var s=this.currentStates,l=this.stateTransition;if(!(ue(s,t)>=0&&(r||s.length===1))){var u;if(this.stateProxy&&!o&&(u=this.stateProxy(t)),u||(u=this.states&&this.states[t]),!u&&!o){AP("State "+t+" not exists.");return}o||this.saveCurrentToNormalState(u);var c=!!(u&&u.hoverLayer||i);c&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,u,this._normalState,r,!n&&!this.__inHover&&l&&l.duration>0,l);var f=this._textContent,h=this._textGuide;return f&&f.useState(t,r,n,c),h&&h.useState(t,r,n,c),o?(this.currentStates=[],this._normalState={}):r?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!c&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~An),u}}},e.prototype.useStates=function(t,r,n){if(!t.length)this.clearStates();else{var i=[],o=this.currentStates,a=t.length,s=a===o.length;if(s){for(var l=0;l<a;l++)if(t[l]!==o[l]){s=!1;break}}if(s)return;for(var l=0;l<a;l++){var u=t[l],c=void 0;this.stateProxy&&(c=this.stateProxy(u,t)),c||(c=this.states[u]),c&&i.push(c)}var f=i[a-1],h=!!(f&&f.hoverLayer||n);h&&this._toggleHoverLayerFlag(!0);var d=this._mergeStates(i),p=this.stateTransition;this.saveCurrentToNormalState(d),this._applyStateObj(t.join(","),d,this._normalState,!1,!r&&!this.__inHover&&p&&p.duration>0,p);var v=this._textContent,g=this._textGuide;v&&v.useStates(t,r,h),g&&g.useStates(t,r,h),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!h&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~An)}},e.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var r=this.animators[t];r.targetName&&r.changeTarget(this[r.targetName])}},e.prototype.removeState=function(t){var r=ue(this.currentStates,t);if(r>=0){var n=this.currentStates.slice();n.splice(r,1),this.useStates(n)}},e.prototype.replaceState=function(t,r,n){var i=this.currentStates.slice(),o=ue(i,t),a=ue(i,r)>=0;o>=0?a?i.splice(o,1):i[o]=r:n&&!a&&i.push(r),this.useStates(i)},e.prototype.toggleState=function(t,r){r?this.useState(t,!0):this.removeState(t)},e.prototype._mergeStates=function(t){for(var r={},n,i=0;i<t.length;i++){var o=t[i];at(r,o),o.textConfig&&(n=n||{},at(n,o.textConfig))}return n&&(r.textConfig=n),r},e.prototype._applyStateObj=function(t,r,n,i,o,a){var s=!(r&&i);r&&r.textConfig?(this.textConfig=at({},i?this.textConfig:n.textConfig),at(this.textConfig,r.textConfig)):s&&n.textConfig&&(this.textConfig=n.textConfig);for(var l={},u=!1,c=0;c<$y.length;c++){var f=$y[c],h=o&&_K[f];r&&r[f]!=null?h?(u=!0,l[f]=r[f]):this[f]=r[f]:s&&n[f]!=null&&(h?(u=!0,l[f]=n[f]):this[f]=n[f])}if(!o)for(var c=0;c<this.animators.length;c++){var d=this.animators[c],p=d.targetName;d.getLoop()||d.__changeFinalValue(p?(r||n)[p]:r||n)}u&&this._transitionState(t,l,a)},e.prototype._attachComponent=function(t){if(!(t.__zr&&!t.__hostTarget)&&t!==this){var r=this.__zr;r&&t.addSelfToZr(r),t.__zr=r,t.__hostTarget=this}},e.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},e.prototype.getClipPath=function(){return this._clipPath},e.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},e.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},e.prototype.getTextContent=function(){return this._textContent},e.prototype.setTextContent=function(t){var r=this._textContent;r!==t&&(r&&r!==t&&this.removeTextContent(),t.innerTransformable=new xl,this._attachComponent(t),this._textContent=t,this.markRedraw())},e.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),at(this.textConfig,t),this.markRedraw()},e.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},e.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},e.prototype.getTextGuideLine=function(){return this._textGuide},e.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},e.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},e.prototype.markRedraw=function(){this.__dirty|=An;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},e.prototype.dirty=function(){this.markRedraw()},e.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var r=this._textContent,n=this._textGuide;r&&(r.__inHover=t),n&&(n.__inHover=t)},e.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var r=this.animators;if(r)for(var n=0;n<r.length;n++)t.animation.addAnimator(r[n]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){if(!!this.__zr){this.__zr=null;var r=this.animators;if(r)for(var n=0;n<r.length;n++)t.animation.removeAnimator(r[n]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},e.prototype.animate=function(t,r,n){var i=t?this[t]:this,o=new OP(i,r,n);return t&&(o.targetName=t),this.addAnimator(o,t),o},e.prototype.addAnimator=function(t,r){var n=this.__zr,i=this;t.during(function(){i.updateDuringAnimation(r)}).done(function(){var o=i.animators,a=ue(o,t);a>=0&&o.splice(a,1)}),this.animators.push(t),n&&n.animation.addAnimator(t),n&&n.wakeUp()},e.prototype.updateDuringAnimation=function(t){this.markRedraw()},e.prototype.stopAnimation=function(t,r){for(var n=this.animators,i=n.length,o=[],a=0;a<i;a++){var s=n[a];!t||t===s.scope?s.stop(r):o.push(s)}return this.animators=o,this},e.prototype.animateTo=function(t,r,n){zy(this,t,r,n)},e.prototype.animateFrom=function(t,r,n){zy(this,t,r,n,!0)},e.prototype._transitionState=function(t,r,n,i){for(var o=zy(this,r,n,i),a=0;a<o.length;a++)o[a].__fromStateTransition=t},e.prototype.getBoundingRect=function(){return null},e.prototype.getPaintRect=function(){return null},e.initDefaultProps=function(){var t=e.prototype;t.type="element",t.name="",t.ignore=t.silent=t.isGroup=t.draggable=t.dragging=t.ignoreClip=t.__inHover=!1,t.__dirty=An;function r(n,i,o,a){Object.defineProperty(t,n,{get:function(){if(!this[i]){var l=this[i]=[];s(this,l)}return this[i]},set:function(l){this[o]=l[0],this[a]=l[1],this[i]=l,s(this,l)}});function s(l,u){Object.defineProperty(u,0,{get:function(){return l[o]},set:function(c){l[o]=c}}),Object.defineProperty(u,1,{get:function(){return l[a]},set:function(c){l[a]=c}})}}Object.defineProperty&&(r("position","_legacyPos","x","y"),r("scale","_legacyScale","scaleX","scaleY"),r("origin","_legacyOrigin","originX","originY"))}(),e}();Ui(NP,Gi);Ui(NP,xl);function zy(e,t,r,n,i){r=r||{};var o=[];u9(e,"",e,t,r,n,o,i);var a=o.length,s=!1,l=r.done,u=r.aborted,c=function(){s=!0,a--,a<=0&&(s?l&&l():u&&u())},f=function(){a--,a<=0&&(s?l&&l():u&&u())};a||l&&l(),o.length>0&&r.during&&o[0].during(function(p,v){r.during(v)});for(var h=0;h<o.length;h++){var d=o[h];c&&d.done(c),f&&d.aborted(f),r.force&&d.duration(r.duration),d.start(r.easing)}return o}function Vy(e,t,r){for(var n=0;n<r;n++)e[n]=t[n]}function bK(e){return Wr(e[0])}function wK(e,t,r){if(Wr(t[r]))if(Wr(e[r])||(e[r]=[]),In(t[r])){var n=t[r].length;e[r].length!==n&&(e[r]=new t[r].constructor(n),Vy(e[r],t[r],n))}else{var i=t[r],o=e[r],a=i.length;if(bK(i))for(var s=i[0].length,l=0;l<a;l++)o[l]?Vy(o[l],i[l],s):o[l]=Array.prototype.slice.call(i[l]);else Vy(o,i,a);o.length=i.length}else e[r]=t[r]}function SK(e,t){return e===t||Wr(e)&&Wr(t)&&TK(e,t)}function TK(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function u9(e,t,r,n,i,o,a,s){for(var l=ge(n),u=i.duration,c=i.delay,f=i.additive,h=i.setToFinal,d=!Ot(o),p=e.animators,v=[],g=0;g<l.length;g++){var m=l[g],_=n[m];if(_!=null&&r[m]!=null&&(d||o[m]))if(Ot(_)&&!Wr(_)&&!G1(_)){if(t){s||(r[m]=_,e.updateDuringAnimation(t));continue}u9(e,m,r[m],_,i,o&&o[m],a,s)}else v.push(m);else s||(r[m]=_,e.updateDuringAnimation(t),v.push(m))}var y=v.length;if(!f&&y)for(var w=0;w<p.length;w++){var T=p[w];if(T.targetName===t){var S=T.stopTracks(v);if(S){var P=ue(p,T);p.splice(P,1)}}}if(i.force||(v=wr(v,function(M){return!SK(n[M],r[M])}),y=v.length),y>0||i.force&&!a.length){var A=void 0,k=void 0,C=void 0;if(s){k={},h&&(A={});for(var w=0;w<y;w++){var m=v[w];k[m]=r[m],h?A[m]=n[m]:r[m]=n[m]}}else if(h){C={};for(var w=0;w<y;w++){var m=v[w];C[m]=_d(r[m]),wK(r,n,m)}}var T=new OP(r,!1,!1,f?wr(p,function(D){return D.targetName===t}):null);T.targetName=t,i.scope&&(T.scope=i.scope),h&&A&&T.whenWithKeys(0,A,v),C&&T.whenWithKeys(0,C,v),T.whenWithKeys(u==null?500:u,s?k:n,v).delay(c||0),e.addAnimator(T,t),a.push(T)}}const c9=NP;var f9=function(e){ke(t,e);function t(r){var n=e.call(this)||this;return n.isGroup=!0,n._children=[],n.attr(r),n}return t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(r){return this._children[r]},t.prototype.childOfName=function(r){for(var n=this._children,i=0;i<n.length;i++)if(n[i].name===r)return n[i]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(r){return r&&r!==this&&r.parent!==this&&(this._children.push(r),this._doAdd(r)),this},t.prototype.addBefore=function(r,n){if(r&&r!==this&&r.parent!==this&&n&&n.parent===this){var i=this._children,o=i.indexOf(n);o>=0&&(i.splice(o,0,r),this._doAdd(r))}return this},t.prototype.replace=function(r,n){var i=ue(this._children,r);return i>=0&&this.replaceAt(n,i),this},t.prototype.replaceAt=function(r,n){var i=this._children,o=i[n];if(r&&r!==this&&r.parent!==this&&r!==o){i[n]=r,o.parent=null;var a=this.__zr;a&&o.removeSelfFromZr(a),this._doAdd(r)}return this},t.prototype._doAdd=function(r){r.parent&&r.parent.remove(r),r.parent=this;var n=this.__zr;n&&n!==r.__zr&&r.addSelfToZr(n),n&&n.refresh()},t.prototype.remove=function(r){var n=this.__zr,i=this._children,o=ue(i,r);return o<0?this:(i.splice(o,1),r.parent=null,n&&r.removeSelfFromZr(n),n&&n.refresh(),this)},t.prototype.removeAll=function(){for(var r=this._children,n=this.__zr,i=0;i<r.length;i++){var o=r[i];n&&o.removeSelfFromZr(n),o.parent=null}return r.length=0,this},t.prototype.eachChild=function(r,n){for(var i=this._children,o=0;o<i.length;o++){var a=i[o];r.call(n,a,o)}return this},t.prototype.traverse=function(r,n){for(var i=0;i<this._children.length;i++){var o=this._children[i],a=r.call(n,o);o.isGroup&&!a&&o.traverse(r,n)}return this},t.prototype.addSelfToZr=function(r){e.prototype.addSelfToZr.call(this,r);for(var n=0;n<this._children.length;n++){var i=this._children[n];i.addSelfToZr(r)}},t.prototype.removeSelfFromZr=function(r){e.prototype.removeSelfFromZr.call(this,r);for(var n=0;n<this._children.length;n++){var i=this._children[n];i.removeSelfFromZr(r)}},t.prototype.getBoundingRect=function(r){for(var n=new ae(0,0,0,0),i=r||this._children,o=[],a=null,s=0;s<i.length;s++){var l=i[s];if(!(l.ignore||l.invisible)){var u=l.getBoundingRect(),c=l.getLocalTransform(o);c?(ae.applyTransform(n,u,c),a=a||n.clone(),a.union(n)):(a=a||u.clone(),a.union(u))}}return a||n},t}(c9);f9.prototype.type="group";const De=f9;/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var Vg={},h9={};function PK(e){delete h9[e]}function EK(e){if(!e)return!1;if(typeof e=="string")return xm(e,1)<NS;if(e.colorStops){for(var t=e.colorStops,r=0,n=t.length,i=0;i<n;i++)r+=xm(t[i].color,1);return r/=n,r<NS}return!1}var kK=function(){function e(t,r,n){var i=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,n=n||{},this.dom=r,this.id=t;var o=new BZ,a=n.renderer||"canvas";Vg[a]||(a=ge(Vg)[0]),n.useDirtyRect=n.useDirtyRect==null?!1:n.useDirtyRect;var s=new Vg[a](r,o,n,t),l=n.ssr||s.ssrOnly;this.storage=o,this.painter=s;var u=!Xt.node&&!Xt.worker&&!l?new vK(s.getViewportRoot(),s.root):null,c=n.useCoarsePointer,f=c==null||c==="auto"?Xt.touchEventsSupported:!!c,h=44,d;f&&(d=qt(n.pointerSize,h)),this.handler=new OZ(o,s,u,s.root,d),this.animation=new sK({stage:{update:l?null:function(){return i._flush(!0)}}}),l||this.animation.start()}return e.prototype.add=function(t){!t||(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},e.prototype.remove=function(t){!t||(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},e.prototype.configLayer=function(t,r){this.painter.configLayer&&this.painter.configLayer(t,r),this.refresh()},e.prototype.setBackgroundColor=function(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=EK(t)},e.prototype.getBackgroundColor=function(){return this._backgroundColor},e.prototype.setDarkMode=function(t){this._darkMode=t},e.prototype.isDarkMode=function(){return this._darkMode},e.prototype.refreshImmediately=function(t){t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},e.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},e.prototype.flush=function(){this._flush(!1)},e.prototype._flush=function(t){var r,n=wc();this._needsRefresh&&(r=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(r=!0,this.refreshHoverImmediately());var i=wc();r?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:i-n})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},e.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},e.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},e.prototype.refreshHover=function(){this._needsRefreshHover=!0},e.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover()},e.prototype.resize=function(t){t=t||{},this.painter.resize(t.width,t.height),this.handler.resize()},e.prototype.clearAnimation=function(){this.animation.clear()},e.prototype.getWidth=function(){return this.painter.getWidth()},e.prototype.getHeight=function(){return this.painter.getHeight()},e.prototype.setCursorStyle=function(t){this.handler.setCursorStyle(t)},e.prototype.findHover=function(t,r){return this.handler.findHover(t,r)},e.prototype.on=function(t,r,n){return this.handler.on(t,r,n),this},e.prototype.off=function(t,r){this.handler.off(t,r)},e.prototype.trigger=function(t,r){this.handler.trigger(t,r)},e.prototype.clear=function(){for(var t=this.storage.getRoots(),r=0;r<t.length;r++)t[r]instanceof De&&t[r].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},e.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,PK(this.id)},e}();function hM(e,t){var r=new kK($7(),e,t);return h9[r.id]=r,r}function AK(e,t){Vg[e]=t}var dM=1e-4,d9=20;function CK(e){return e.replace(/^\s+|\s+$/g,"")}function ma(e,t,r,n){var i=t[0],o=t[1],a=r[0],s=r[1],l=o-i,u=s-a;if(l===0)return u===0?a:(a+s)/2;if(n)if(l>0){if(e<=i)return a;if(e>=o)return s}else{if(e>=i)return a;if(e<=o)return s}else{if(e===i)return a;if(e===o)return s}return(e-i)/l*u+a}function We(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%";break}return Et(e)?CK(e).match(/%$/)?parseFloat(e)/100*t:parseFloat(e):e==null?NaN:+e}function qe(e,t,r){return t==null&&(t=10),t=Math.min(Math.max(0,t),d9),e=(+e).toFixed(t),r?e:+e}function Om(e){return e.sort(function(t,r){return t-r}),e}function To(e){if(e=+e,isNaN(e))return 0;if(e>1e-14){for(var t=1,r=0;r<15;r++,t*=10)if(Math.round(e*t)/t===e)return r}return MK(e)}function MK(e){var t=e.toString().toLowerCase(),r=t.indexOf("e"),n=r>0?+t.slice(r+1):0,i=r>0?r:t.length,o=t.indexOf("."),a=o<0?0:i-1-o;return Math.max(0,a-n)}function xK(e,t){var r=Math.log,n=Math.LN10,i=Math.floor(r(e[1]-e[0])/n),o=Math.round(r(Math.abs(t[1]-t[0]))/n),a=Math.min(Math.max(-i+o,0),20);return isFinite(a)?a:20}function LK(e,t){var r=Math.max(To(e),To(t)),n=e+t;return r>d9?n:qe(n,r)}function p9(e){var t=Math.PI*2;return(e%t+t)%t}function Rm(e){return e>-dM&&e<dM}var IK=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function _a(e){if(e instanceof Date)return e;if(Et(e)){var t=IK.exec(e);if(!t)return new Date(NaN);if(t[8]){var r=+t[4]||0;return t[8].toUpperCase()!=="Z"&&(r-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,r,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0))}else return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0)}else if(e==null)return new Date(NaN);return new Date(Math.round(e))}function OK(e){return Math.pow(10,FP(e))}function FP(e){if(e===0)return 0;var t=Math.floor(Math.log(e)/Math.LN10);return e/Math.pow(10,t)>=10&&t++,t}function v9(e,t){var r=FP(e),n=Math.pow(10,r),i=e/n,o;return t?i<1.5?o=1:i<2.5?o=2:i<4?o=3:i<7?o=5:o=10:i<1?o=1:i<2?o=2:i<3?o=3:i<5?o=5:o=10,e=o*n,r>=-20?+e.toFixed(r<0?-r:0):e}function pM(e){e.sort(function(l,u){return s(l,u,0)?-1:1});for(var t=-1/0,r=1,n=0;n<e.length;){for(var i=e[n].interval,o=e[n].close,a=0;a<2;a++)i[a]<=t&&(i[a]=t,o[a]=a?1:1-r),t=i[a],r=o[a];i[0]===i[1]&&o[0]*o[1]!==1?e.splice(n,1):n++}return e;function s(l,u,c){return l.interval[c]<u.interval[c]||l.interval[c]===u.interval[c]&&(l.close[c]-u.close[c]===(c?-1:1)||!c&&s(l,u,1))}}function Ms(e){var t=parseFloat(e);return t==e&&(t!==0||!Et(e)||e.indexOf("x")<=0)?t:NaN}function RK(e){return!isNaN(Ms(e))}function g9(){return Math.round(Math.random()*9)}function m9(e,t){return t===0?e:m9(t,e%t)}function vM(e,t){return e==null?t:t==null?e:e*t/m9(e,t)}function ne(e){throw new Error(e)}function gM(e,t,r){return(t-e)*r+e}var _9="series\0",DK="\0_ec_\0";function Ze(e){return e instanceof Array?e:e==null?[]:[e]}function $S(e,t,r){if(e){e[t]=e[t]||{},e.emphasis=e.emphasis||{},e.emphasis[t]=e.emphasis[t]||{};for(var n=0,i=r.length;n<i;n++){var o=r[n];!e.emphasis[t].hasOwnProperty(o)&&e[t].hasOwnProperty(o)&&(e.emphasis[t][o]=e[t][o])}}}var mM=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function x0(e){return Ot(e)&&!ct(e)&&!(e instanceof Date)?e.value:e}function NK(e){return Ot(e)&&!(e instanceof Array)}function FK(e,t,r){var n=r==="normalMerge",i=r==="replaceMerge",o=r==="replaceAll";e=e||[],t=(t||[]).slice();var a=jt();F(t,function(l,u){if(!Ot(l)){t[u]=null;return}});var s=BK(e,a,r);return(n||i)&&$K(s,e,a,t),n&&zK(s,t),n||i?VK(s,t,i):o&&UK(s,t),GK(s),s}function BK(e,t,r){var n=[];if(r==="replaceAll")return n;for(var i=0;i<e.length;i++){var o=e[i];o&&o.id!=null&&t.set(o.id,i),n.push({existing:r==="replaceMerge"||Yd(o)?null:o,newOption:null,keyInfo:null,brandNew:null})}return n}function $K(e,t,r,n){F(n,function(i,o){if(!(!i||i.id==null)){var a=yd(i.id),s=r.get(a);if(s!=null){var l=e[s];Fi(!l.newOption,'Duplicated option on id "'+a+'".'),l.newOption=i,l.existing=t[s],n[o]=null}}})}function zK(e,t){F(t,function(r,n){if(!(!r||r.name==null))for(var i=0;i<e.length;i++){var o=e[i].existing;if(!e[i].newOption&&o&&(o.id==null||r.id==null)&&!Yd(r)&&!Yd(o)&&y9("name",o,r)){e[i].newOption=r,t[n]=null;return}}})}function VK(e,t,r){F(t,function(n){if(!!n){for(var i,o=0;(i=e[o])&&(i.newOption||Yd(i.existing)||i.existing&&n.id!=null&&!y9("id",n,i.existing));)o++;i?(i.newOption=n,i.brandNew=r):e.push({newOption:n,brandNew:r,existing:null,keyInfo:null}),o++}})}function UK(e,t){F(t,function(r){e.push({newOption:r,brandNew:!0,existing:null,keyInfo:null})})}function GK(e){var t=jt();F(e,function(r){var n=r.existing;n&&t.set(n.id,r)}),F(e,function(r){var n=r.newOption;Fi(!n||n.id==null||!t.get(n.id)||t.get(n.id)===r,"id duplicates: "+(n&&n.id)),n&&n.id!=null&&t.set(n.id,r),!r.keyInfo&&(r.keyInfo={})}),F(e,function(r,n){var i=r.existing,o=r.newOption,a=r.keyInfo;if(!!Ot(o)){if(a.name=o.name!=null?yd(o.name):i?i.name:_9+n,i)a.id=yd(i.id);else if(o.id!=null)a.id=yd(o.id);else{var s=0;do a.id="\0"+a.name+"\0"+s++;while(t.get(a.id))}t.set(a.id,r)}})}function y9(e,t,r){var n=ti(t[e],null),i=ti(r[e],null);return n!=null&&i!=null&&n===i}function yd(e){return ti(e,"")}function ti(e,t){return e==null?t:Et(e)?e:we(e)||bS(e)?e+"":t}function BP(e){var t=e.name;return!!(t&&t.indexOf(_9))}function Yd(e){return e&&e.id!=null&&yd(e.id).indexOf(DK)===0}function jK(e,t,r){F(e,function(n){var i=n.newOption;Ot(i)&&(n.keyInfo.mainType=t,n.keyInfo.subType=WK(t,i,n.existing,r))})}function WK(e,t,r,n){var i=t.type?t.type:r?r.subType:n.determineSubType(e,t);return i}function HK(e,t){var r={},n={};return i(e||[],r),i(t||[],n,r),[o(r),o(n)];function i(a,s,l){for(var u=0,c=a.length;u<c;u++){var f=ti(a[u].seriesId,null);if(f==null)return;for(var h=Ze(a[u].dataIndex),d=l&&l[f],p=0,v=h.length;p<v;p++){var g=h[p];d&&d[g]?d[g]=null:(s[f]||(s[f]={}))[g]=1}}}function o(a,s){var l=[];for(var u in a)if(a.hasOwnProperty(u)&&a[u]!=null)if(s)l.push(+u);else{var c=o(a[u],!0);c.length&&l.push({seriesId:u,dataIndex:c})}return l}}function Jl(e,t){if(t.dataIndexInside!=null)return t.dataIndexInside;if(t.dataIndex!=null)return ct(t.dataIndex)?Ct(t.dataIndex,function(r){return e.indexOfRawIndex(r)}):e.indexOfRawIndex(t.dataIndex);if(t.name!=null)return ct(t.name)?Ct(t.name,function(r){return e.indexOfName(r)}):e.indexOfName(t.name)}function Oe(){var e="__ec_inner_"+XK++;return function(t){return t[e]||(t[e]={})}}var XK=g9();function Uy(e,t,r){var n=$P(t,r),i=n.mainTypeSpecified,o=n.queryOptionMap,a=n.others,s=a,l=r?r.defaultMainType:null;return!i&&l&&o.set(l,{}),o.each(function(u,c){var f=L0(e,c,u,{useDefault:l===c,enableAll:r&&r.enableAll!=null?r.enableAll:!0,enableNone:r&&r.enableNone!=null?r.enableNone:!0});s[c+"Models"]=f.models,s[c+"Model"]=f.models[0]}),s}function $P(e,t){var r;if(Et(e)){var n={};n[e+"Index"]=0,r=n}else r=e;var i=jt(),o={},a=!1;return F(r,function(s,l){if(l==="dataIndex"||l==="dataIndexInside"){o[l]=s;return}var u=l.match(/^(\w+)(Index|Id|Name)$/)||[],c=u[1],f=(u[2]||"").toLowerCase();if(!(!c||!f||t&&t.includeMainTypes&&ue(t.includeMainTypes,c)<0)){a=a||!!c;var h=i.get(c)||i.set(c,{});h[f]=s}}),{mainTypeSpecified:a,queryOptionMap:i,others:o}}var ki={useDefault:!0,enableAll:!1,enableNone:!1};function L0(e,t,r,n){n=n||ki;var i=r.index,o=r.id,a=r.name,s={models:null,specified:i!=null||o!=null||a!=null};if(!s.specified){var l=void 0;return s.models=n.useDefault&&(l=e.getComponent(t))?[l]:[],s}return i==="none"||i===!1?(Fi(n.enableNone,'`"none"` or `false` is not a valid value on index option.'),s.models=[],s):(i==="all"&&(Fi(n.enableAll,'`"all"` is not a valid value on index option.'),i=o=a=null),s.models=e.queryComponents({mainType:t,index:i,id:o,name:a}),s)}function b9(e,t,r){e.setAttribute?e.setAttribute(t,r):e[t]=r}function YK(e,t){return e.getAttribute?e.getAttribute(t):e[t]}function qK(e){return e==="auto"?Xt.domSupported?"html":"richText":e||"html"}function ZK(e,t,r,n,i){var o=t==null||t==="auto";if(n==null)return n;if(we(n)){var a=gM(r||0,n,i);return qe(a,o?Math.max(To(r||0),To(n)):t)}else{if(Et(n))return i<1?r:n;for(var s=[],l=r,u=n,c=Math.max(l?l.length:0,u.length),f=0;f<c;++f){var h=e.getDimensionInfo(f);if(h&&h.type==="ordinal")s[f]=(i<1&&l?l:u)[f];else{var d=l&&l[f]?l[f]:0,p=u[f],a=gM(d,p,i);s[f]=qe(a,o?Math.max(To(d),To(p)):t)}}return s}}var KK=".",Qs="___EC__COMPONENT__CONTAINER___",w9="___EC__EXTENDED_CLASS___";function Po(e){var t={main:"",sub:""};if(e){var r=e.split(KK);t.main=r[0]||"",t.sub=r[1]||""}return t}function JK(e){Fi(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(e),'componentType "'+e+'" illegal')}function QK(e){return!!(e&&e[w9])}function zP(e,t){e.$constructor=e,e.extend=function(r){var n=this,i;return tJ(n)?i=function(o){_t(a,o);function a(){return o.apply(this,arguments)||this}return a}(n):(i=function(){(r.$constructor||n).apply(this,arguments)},Kq(i,this)),at(i.prototype,r),i[w9]=!0,i.extend=this.extend,i.superCall=nJ,i.superApply=iJ,i.superClass=n,i}}function tJ(e){return Ut(e)&&/^class\s/.test(Function.prototype.toString.call(e))}function S9(e,t){e.extend=t.extend}var eJ=Math.round(Math.random()*10);function rJ(e){var t=["__\0is_clz",eJ++].join("_");e.prototype[t]=!0,e.isInstance=function(r){return!!(r&&r[t])}}function nJ(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return this.superClass.prototype[t].apply(e,r)}function iJ(e,t,r){return this.superClass.prototype[t].apply(e,r)}function H1(e){var t={};e.registerClass=function(n){var i=n.type||n.prototype.type;if(i){JK(i),n.prototype.type=i;var o=Po(i);if(!o.sub)t[o.main]=n;else if(o.sub!==Qs){var a=r(o);a[o.sub]=n}}return n},e.getClass=function(n,i,o){var a=t[n];if(a&&a[Qs]&&(a=i?a[i]:null),o&&!a)throw new Error(i?"Component "+n+"."+(i||"")+" is used but not imported.":n+".type should be specified.");return a},e.getClassesByMainType=function(n){var i=Po(n),o=[],a=t[i.main];return a&&a[Qs]?F(a,function(s,l){l!==Qs&&o.push(s)}):o.push(a),o},e.hasClass=function(n){var i=Po(n);return!!t[i.main]},e.getAllClassMainTypes=function(){var n=[];return F(t,function(i,o){n.push(o)}),n},e.hasSubTypes=function(n){var i=Po(n),o=t[i.main];return o&&o[Qs]};function r(n){var i=t[n.main];return(!i||!i[Qs])&&(i=t[n.main]={},i[Qs]=!0),i}}function qd(e,t){for(var r=0;r<e.length;r++)e[r][1]||(e[r][1]=e[r][0]);return t=t||!1,function(n,i,o){for(var a={},s=0;s<e.length;s++){var l=e[s][1];if(!(i&&ue(i,l)>=0||o&&ue(o,l)<0)){var u=n.getShallow(l,t);u!=null&&(a[e[s][0]]=u)}}return a}}var oJ=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],aJ=qd(oJ),sJ=function(){function e(){}return e.prototype.getAreaStyle=function(t,r){return aJ(this,t,r)},e}(),zS=new M0(50);function lJ(e){if(typeof e=="string"){var t=zS.get(e);return t&&t.image}else return e}function T9(e,t,r,n,i){if(e)if(typeof e=="string"){if(t&&t.__zrImageSrc===e||!r)return t;var o=zS.get(e),a={hostEl:r,cb:n,cbPayload:i};return o?(t=o.image,!X1(t)&&o.pending.push(a)):(t=fu.loadImage(e,_M,_M),t.__zrImageSrc=e,zS.put(e,t.__cachedImgObj={image:t,pending:[a]})),t}else return e;else return t}function _M(){var e=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<e.pending.length;t++){var r=e.pending[t],n=r.cb;n&&n(this,r.cbPayload),r.hostEl.dirty()}e.pending.length=0}function X1(e){return e&&e.width&&e.height}var Gy=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function uJ(e,t,r,n,i){if(!t)return"";var o=(e+"").split(`
`);i=P9(t,r,n,i);for(var a=0,s=o.length;a<s;a++)o[a]=E9(o[a],i);return o.join(`
`)}function P9(e,t,r,n){n=n||{};var i=at({},n);i.font=t,r=qt(r,"..."),i.maxIterations=qt(n.maxIterations,2);var o=i.minChar=qt(n.minChar,0);i.cnCharWidth=Mn("\u56FD",t);var a=i.ascCharWidth=Mn("a",t);i.placeholder=qt(n.placeholder,"");for(var s=e=Math.max(0,e-1),l=0;l<o&&s>=a;l++)s-=a;var u=Mn(r,t);return u>s&&(r="",u=0),s=e-u,i.ellipsis=r,i.ellipsisWidth=u,i.contentWidth=s,i.containerWidth=e,i}function E9(e,t){var r=t.containerWidth,n=t.font,i=t.contentWidth;if(!r)return"";var o=Mn(e,n);if(o<=r)return e;for(var a=0;;a++){if(o<=i||a>=t.maxIterations){e+=t.ellipsis;break}var s=a===0?cJ(e,i,t.ascCharWidth,t.cnCharWidth):o>0?Math.floor(e.length*i/o):0;e=e.substr(0,s),o=Mn(e,n)}return e===""&&(e=t.placeholder),e}function cJ(e,t,r,n){for(var i=0,o=0,a=e.length;o<a&&i<t;o++){var s=e.charCodeAt(o);i+=0<=s&&s<=127?r:n}return o}function fJ(e,t){e!=null&&(e+="");var r=t.overflow,n=t.padding,i=t.font,o=r==="truncate",a=DP(i),s=qt(t.lineHeight,a),l=!!t.backgroundColor,u=t.lineOverflow==="truncate",c=t.width,f;c!=null&&(r==="break"||r==="breakAll")?f=e?k9(e,t.font,c,r==="breakAll",0).lines:[]:f=e?e.split(`
`):[];var h=f.length*s,d=qt(t.height,h);if(h>d&&u){var p=Math.floor(d/s);f=f.slice(0,p)}if(e&&o&&c!=null)for(var v=P9(c,i,t.ellipsis,{minChar:t.truncateMinChar,placeholder:t.placeholder}),g=0;g<f.length;g++)f[g]=E9(f[g],v);for(var m=d,_=0,g=0;g<f.length;g++)_=Math.max(Mn(f[g],i),_);c==null&&(c=_);var y=_;return n&&(m+=n[0]+n[2],y+=n[1]+n[3],c+=n[1]+n[3]),l&&(y=c),{lines:f,height:d,outerWidth:y,outerHeight:m,lineHeight:s,calculatedLineHeight:a,contentWidth:_,contentHeight:h,width:c}}var hJ=function(){function e(){}return e}(),yM=function(){function e(t){this.tokens=[],t&&(this.tokens=t)}return e}(),dJ=function(){function e(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return e}();function pJ(e,t){var r=new dJ;if(e!=null&&(e+=""),!e)return r;for(var n=t.width,i=t.height,o=t.overflow,a=(o==="break"||o==="breakAll")&&n!=null?{width:n,accumWidth:0,breakAll:o==="breakAll"}:null,s=Gy.lastIndex=0,l;(l=Gy.exec(e))!=null;){var u=l.index;u>s&&jy(r,e.substring(s,u),t,a),jy(r,l[2],t,a,l[1]),s=Gy.lastIndex}s<e.length&&jy(r,e.substring(s,e.length),t,a);var c=[],f=0,h=0,d=t.padding,p=o==="truncate",v=t.lineOverflow==="truncate";function g(q,et,Pt){q.width=et,q.lineHeight=Pt,f+=Pt,h=Math.max(h,et)}t:for(var m=0;m<r.lines.length;m++){for(var _=r.lines[m],y=0,w=0,T=0;T<_.tokens.length;T++){var S=_.tokens[T],P=S.styleName&&t.rich[S.styleName]||{},A=S.textPadding=P.padding,k=A?A[1]+A[3]:0,C=S.font=P.font||t.font;S.contentHeight=DP(C);var M=qt(P.height,S.contentHeight);if(S.innerHeight=M,A&&(M+=A[0]+A[2]),S.height=M,S.lineHeight=gd(P.lineHeight,t.lineHeight,M),S.align=P&&P.align||t.align,S.verticalAlign=P&&P.verticalAlign||"middle",v&&i!=null&&f+S.lineHeight>i){T>0?(_.tokens=_.tokens.slice(0,T),g(_,w,y),r.lines=r.lines.slice(0,m+1)):r.lines=r.lines.slice(0,m);break t}var D=P.width,B=D==null||D==="auto";if(typeof D=="string"&&D.charAt(D.length-1)==="%")S.percentWidth=D,c.push(S),S.contentWidth=Mn(S.text,C);else{if(B){var V=P.backgroundColor,N=V&&V.image;N&&(N=lJ(N),X1(N)&&(S.width=Math.max(S.width,N.width*M/N.height)))}var j=p&&n!=null?n-w:null;j!=null&&j<S.width?!B||j<k?(S.text="",S.width=S.contentWidth=0):(S.text=uJ(S.text,j-k,C,t.ellipsis,{minChar:t.truncateMinChar}),S.width=S.contentWidth=Mn(S.text,C)):S.contentWidth=Mn(S.text,C)}S.width+=k,w+=S.width,P&&(y=Math.max(y,S.lineHeight))}g(_,w,y)}r.outerWidth=r.width=qt(n,h),r.outerHeight=r.height=qt(i,f),r.contentHeight=f,r.contentWidth=h,d&&(r.outerWidth+=d[1]+d[3],r.outerHeight+=d[0]+d[2]);for(var m=0;m<c.length;m++){var S=c[m],Z=S.percentWidth;S.width=parseInt(Z,10)/100*r.width}return r}function jy(e,t,r,n,i){var o=t==="",a=i&&r.rich[i]||{},s=e.lines,l=a.font||r.font,u=!1,c,f;if(n){var h=a.padding,d=h?h[1]+h[3]:0;if(a.width!=null&&a.width!=="auto"){var p=ga(a.width,n.width)+d;s.length>0&&p+n.accumWidth>n.width&&(c=t.split(`
`),u=!0),n.accumWidth=p}else{var v=k9(t,l,n.width,n.breakAll,n.accumWidth);n.accumWidth=v.accumWidth+d,f=v.linesWidths,c=v.lines}}else c=t.split(`
`);for(var g=0;g<c.length;g++){var m=c[g],_=new hJ;if(_.styleName=i,_.text=m,_.isLineHolder=!m&&!o,typeof a.width=="number"?_.width=a.width:_.width=f?f[g]:Mn(m,l),!g&&!u){var y=(s[s.length-1]||(s[0]=new yM)).tokens,w=y.length;w===1&&y[0].isLineHolder?y[0]=_:(m||!w||o)&&y.push(_)}else s.push(new yM([_]))}}function vJ(e){var t=e.charCodeAt(0);return t>=33&&t<=383}var gJ=hu(",&?/;] ".split(""),function(e,t){return e[t]=!0,e},{});function mJ(e){return vJ(e)?!!gJ[e]:!0}function k9(e,t,r,n,i){for(var o=[],a=[],s="",l="",u=0,c=0,f=0;f<e.length;f++){var h=e.charAt(f);if(h===`
`){l&&(s+=l,c+=u),o.push(s),a.push(c),s="",l="",u=0,c=0;continue}var d=Mn(h,t),p=n?!1:!mJ(h);if(o.length?c+d>r:i+c+d>r){c?(s||l)&&(p?(s||(s=l,l="",u=0,c=u),o.push(s),a.push(c-u),l+=h,u+=d,s="",c=u):(l&&(s+=l,l="",u=0),o.push(s),a.push(c),s=h,c=d)):p?(o.push(l),a.push(u),l=h,u=d):(o.push(h),a.push(d));continue}c+=d,p?(l+=h,u+=d):(l&&(s+=l,l="",u=0),s+=h)}return!o.length&&!s&&(s=e,l="",u=0),l&&(s+=l),s&&(o.push(s),a.push(c)),o.length===1&&(c+=i),{accumWidth:c,lines:o,linesWidths:a}}var VS="__zr_style_"+Math.round(Math.random()*10),zl={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},Y1={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};zl[VS]=!0;var bM=["z","z2","invisible"],_J=["invisible"],yJ=function(e){ke(t,e);function t(r){return e.call(this,r)||this}return t.prototype._init=function(r){for(var n=ge(r),i=0;i<n.length;i++){var o=n[i];o==="style"?this.useStyle(r[o]):e.prototype.attrKV.call(this,o,r[o])}this.style||this.useStyle({})},t.prototype.beforeBrush=function(){},t.prototype.afterBrush=function(){},t.prototype.innerBeforeBrush=function(){},t.prototype.innerAfterBrush=function(){},t.prototype.shouldBePainted=function(r,n,i,o){var a=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&bJ(this,r,n)||a&&!a[0]&&!a[3])return!1;if(i&&this.__clipPaths){for(var s=0;s<this.__clipPaths.length;++s)if(this.__clipPaths[s].isZeroArea())return!1}if(o&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},t.prototype.contain=function(r,n){return this.rectContain(r,n)},t.prototype.traverse=function(r,n){r.call(n,this)},t.prototype.rectContain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect();return o.contain(i[0],i[1])},t.prototype.getPaintRect=function(){var r=this._paintRect;if(!this._paintRect||this.__dirty){var n=this.transform,i=this.getBoundingRect(),o=this.style,a=o.shadowBlur||0,s=o.shadowOffsetX||0,l=o.shadowOffsetY||0;r=this._paintRect||(this._paintRect=new ae(0,0,0,0)),n?ae.applyTransform(r,i,n):r.copy(i),(a||s||l)&&(r.width+=a*2+Math.abs(s),r.height+=a*2+Math.abs(l),r.x=Math.min(r.x,r.x+s-a),r.y=Math.min(r.y,r.y+l-a));var u=this.dirtyRectTolerance;r.isZero()||(r.x=Math.floor(r.x-u),r.y=Math.floor(r.y-u),r.width=Math.ceil(r.width+1+u*2),r.height=Math.ceil(r.height+1+u*2))}return r},t.prototype.setPrevPaintRect=function(r){r?(this._prevPaintRect=this._prevPaintRect||new ae(0,0,0,0),this._prevPaintRect.copy(r)):this._prevPaintRect=null},t.prototype.getPrevPaintRect=function(){return this._prevPaintRect},t.prototype.animateStyle=function(r){return this.animate("style",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():this.markRedraw()},t.prototype.attrKV=function(r,n){r!=="style"?e.prototype.attrKV.call(this,r,n):this.style?this.setStyle(n):this.useStyle(n)},t.prototype.setStyle=function(r,n){return typeof r=="string"?this.style[r]=n:at(this.style,r),this.dirtyStyle(),this},t.prototype.dirtyStyle=function(r){r||this.markRedraw(),this.__dirty|=Yh,this._rect&&(this._rect=null)},t.prototype.dirty=function(){this.dirtyStyle()},t.prototype.styleChanged=function(){return!!(this.__dirty&Yh)},t.prototype.styleUpdated=function(){this.__dirty&=~Yh},t.prototype.createStyle=function(r){return j1(zl,r)},t.prototype.useStyle=function(r){r[VS]||(r=this.createStyle(r)),this.__inHover?this.__hoverStyle=r:this.style=r,this.dirtyStyle()},t.prototype.isStyleObject=function(r){return r[VS]},t.prototype._innerSaveToNormal=function(r){e.prototype._innerSaveToNormal.call(this,r);var n=this._normalState;r.style&&!n.style&&(n.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(r,n,bM)},t.prototype._applyStateObj=function(r,n,i,o,a,s){e.prototype._applyStateObj.call(this,r,n,i,o,a,s);var l=!(n&&o),u;if(n&&n.style?a?o?u=n.style:(u=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(u,n.style)):(u=this._mergeStyle(this.createStyle(),o?this.style:i.style),this._mergeStyle(u,n.style)):l&&(u=i.style),u)if(a){var c=this.style;if(this.style=this.createStyle(l?{}:c),l)for(var f=ge(c),h=0;h<f.length;h++){var d=f[h];d in u&&(u[d]=u[d],this.style[d]=c[d])}for(var p=ge(u),h=0;h<p.length;h++){var d=p[h];this.style[d]=this.style[d]}this._transitionState(r,{style:u},s,this.getAnimationStyleProps())}else this.useStyle(u);for(var v=this.__inHover?_J:bM,h=0;h<v.length;h++){var d=v[h];n&&n[d]!=null?this[d]=n[d]:l&&i[d]!=null&&(this[d]=i[d])}},t.prototype._mergeStates=function(r){for(var n=e.prototype._mergeStates.call(this,r),i,o=0;o<r.length;o++){var a=r[o];a.style&&(i=i||{},this._mergeStyle(i,a.style))}return i&&(n.style=i),n},t.prototype._mergeStyle=function(r,n){return at(r,n),r},t.prototype.getAnimationStyleProps=function(){return Y1},t.initDefaultProps=function(){var r=t.prototype;r.type="displayable",r.invisible=!1,r.z=0,r.z2=0,r.zlevel=0,r.culling=!1,r.cursor="pointer",r.rectHover=!1,r.incremental=!1,r._rect=null,r.dirtyRectTolerance=0,r.__dirty=An|Yh}(),t}(c9),Wy=new ae(0,0,0,0),Hy=new ae(0,0,0,0);function bJ(e,t,r){return Wy.copy(e.getBoundingRect()),e.transform&&Wy.applyTransform(e.transform),Hy.width=t,Hy.height=r,!Wy.intersect(Hy)}const du=yJ;var dn=Math.min,pn=Math.max,Xy=Math.sin,Yy=Math.cos,tl=Math.PI*2,xp=pf(),Lp=pf(),Ip=pf();function wJ(e,t,r){if(e.length!==0){for(var n=e[0],i=n[0],o=n[0],a=n[1],s=n[1],l=1;l<e.length;l++)n=e[l],i=dn(i,n[0]),o=pn(o,n[0]),a=dn(a,n[1]),s=pn(s,n[1]);t[0]=i,t[1]=a,r[0]=o,r[1]=s}}function wM(e,t,r,n,i,o){i[0]=dn(e,r),i[1]=dn(t,n),o[0]=pn(e,r),o[1]=pn(t,n)}var SM=[],TM=[];function SJ(e,t,r,n,i,o,a,s,l,u){var c=e9,f=or,h=c(e,r,i,a,SM);l[0]=1/0,l[1]=1/0,u[0]=-1/0,u[1]=-1/0;for(var d=0;d<h;d++){var p=f(e,r,i,a,SM[d]);l[0]=dn(p,l[0]),u[0]=pn(p,u[0])}h=c(t,n,o,s,TM);for(var d=0;d<h;d++){var v=f(t,n,o,s,TM[d]);l[1]=dn(v,l[1]),u[1]=pn(v,u[1])}l[0]=dn(e,l[0]),u[0]=pn(e,u[0]),l[0]=dn(a,l[0]),u[0]=pn(a,u[0]),l[1]=dn(t,l[1]),u[1]=pn(t,u[1]),l[1]=dn(s,l[1]),u[1]=pn(s,u[1])}function TJ(e,t,r,n,i,o,a,s){var l=r9,u=Fr,c=pn(dn(l(e,r,i),1),0),f=pn(dn(l(t,n,o),1),0),h=u(e,r,i,c),d=u(t,n,o,f);a[0]=dn(e,i,h),a[1]=dn(t,o,d),s[0]=pn(e,i,h),s[1]=pn(t,o,d)}function PJ(e,t,r,n,i,o,a,s,l){var u=yc,c=bc,f=Math.abs(i-o);if(f%tl<1e-4&&f>1e-4){s[0]=e-r,s[1]=t-n,l[0]=e+r,l[1]=t+n;return}if(xp[0]=Yy(i)*r+e,xp[1]=Xy(i)*n+t,Lp[0]=Yy(o)*r+e,Lp[1]=Xy(o)*n+t,u(s,xp,Lp),c(l,xp,Lp),i=i%tl,i<0&&(i=i+tl),o=o%tl,o<0&&(o=o+tl),i>o&&!a?o+=tl:i<o&&a&&(i+=tl),a){var h=o;o=i,i=h}for(var d=0;d<o;d+=Math.PI/2)d>i&&(Ip[0]=Yy(d)*r+e,Ip[1]=Xy(d)*n+t,u(s,Ip,s),c(l,Ip,l))}var ye={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},el=[],rl=[],Qi=[],Na=[],to=[],eo=[],qy=Math.min,Zy=Math.max,nl=Math.cos,il=Math.sin,Wo=Math.abs,US=Math.PI,ss=US*2,Ky=typeof Float32Array<"u",rh=[];function Jy(e){var t=Math.round(e/US*1e8)/1e8;return t%2*US}function EJ(e,t){var r=Jy(e[0]);r<0&&(r+=ss);var n=r-e[0],i=e[1];i+=n,!t&&i-r>=ss?i=r+ss:t&&r-i>=ss?i=r-ss:!t&&r>i?i=r+(ss-Jy(r-i)):t&&r<i&&(i=r-(ss-Jy(i-r))),e[0]=r,e[1]=i}var kJ=function(){function e(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return e.prototype.increaseVersion=function(){this._version++},e.prototype.getVersion=function(){return this._version},e.prototype.setScale=function(t,r,n){n=n||0,n>0&&(this._ux=Wo(n/Lm/t)||0,this._uy=Wo(n/Lm/r)||0)},e.prototype.setDPR=function(t){this.dpr=t},e.prototype.setContext=function(t){this._ctx=t},e.prototype.getContext=function(){return this._ctx},e.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},e.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},e.prototype.moveTo=function(t,r){return this._drawPendingPt(),this.addData(ye.M,t,r),this._ctx&&this._ctx.moveTo(t,r),this._x0=t,this._y0=r,this._xi=t,this._yi=r,this},e.prototype.lineTo=function(t,r){var n=Wo(t-this._xi),i=Wo(r-this._yi),o=n>this._ux||i>this._uy;if(this.addData(ye.L,t,r),this._ctx&&o&&this._ctx.lineTo(t,r),o)this._xi=t,this._yi=r,this._pendingPtDist=0;else{var a=n*n+i*i;a>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=r,this._pendingPtDist=a)}return this},e.prototype.bezierCurveTo=function(t,r,n,i,o,a){return this._drawPendingPt(),this.addData(ye.C,t,r,n,i,o,a),this._ctx&&this._ctx.bezierCurveTo(t,r,n,i,o,a),this._xi=o,this._yi=a,this},e.prototype.quadraticCurveTo=function(t,r,n,i){return this._drawPendingPt(),this.addData(ye.Q,t,r,n,i),this._ctx&&this._ctx.quadraticCurveTo(t,r,n,i),this._xi=n,this._yi=i,this},e.prototype.arc=function(t,r,n,i,o,a){this._drawPendingPt(),rh[0]=i,rh[1]=o,EJ(rh,a),i=rh[0],o=rh[1];var s=o-i;return this.addData(ye.A,t,r,n,n,i,s,0,a?0:1),this._ctx&&this._ctx.arc(t,r,n,i,o,a),this._xi=nl(o)*n+t,this._yi=il(o)*n+r,this},e.prototype.arcTo=function(t,r,n,i,o){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,r,n,i,o),this},e.prototype.rect=function(t,r,n,i){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,r,n,i),this.addData(ye.R,t,r,n,i),this},e.prototype.closePath=function(){this._drawPendingPt(),this.addData(ye.Z);var t=this._ctx,r=this._x0,n=this._y0;return t&&t.closePath(),this._xi=r,this._yi=n,this},e.prototype.fill=function(t){t&&t.fill(),this.toStatic()},e.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},e.prototype.len=function(){return this._len},e.prototype.setData=function(t){var r=t.length;!(this.data&&this.data.length===r)&&Ky&&(this.data=new Float32Array(r));for(var n=0;n<r;n++)this.data[n]=t[n];this._len=r},e.prototype.appendPath=function(t){t instanceof Array||(t=[t]);for(var r=t.length,n=0,i=this._len,o=0;o<r;o++)n+=t[o].len();Ky&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+n));for(var o=0;o<r;o++)for(var a=t[o].data,s=0;s<a.length;s++)this.data[i++]=a[s];this._len=i},e.prototype.addData=function(t,r,n,i,o,a,s,l,u){if(!!this._saveData){var c=this.data;this._len+arguments.length>c.length&&(this._expandData(),c=this.data);for(var f=0;f<arguments.length;f++)c[this._len++]=arguments[f]}},e.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},e.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],r=0;r<this._len;r++)t[r]=this.data[r];this.data=t}},e.prototype.toStatic=function(){if(!!this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,Ky&&this._len>11&&(this.data=new Float32Array(t)))}},e.prototype.getBoundingRect=function(){Qi[0]=Qi[1]=to[0]=to[1]=Number.MAX_VALUE,Na[0]=Na[1]=eo[0]=eo[1]=-Number.MAX_VALUE;var t=this.data,r=0,n=0,i=0,o=0,a;for(a=0;a<this._len;){var s=t[a++],l=a===1;switch(l&&(r=t[a],n=t[a+1],i=r,o=n),s){case ye.M:r=i=t[a++],n=o=t[a++],to[0]=i,to[1]=o,eo[0]=i,eo[1]=o;break;case ye.L:wM(r,n,t[a],t[a+1],to,eo),r=t[a++],n=t[a++];break;case ye.C:SJ(r,n,t[a++],t[a++],t[a++],t[a++],t[a],t[a+1],to,eo),r=t[a++],n=t[a++];break;case ye.Q:TJ(r,n,t[a++],t[a++],t[a],t[a+1],to,eo),r=t[a++],n=t[a++];break;case ye.A:var u=t[a++],c=t[a++],f=t[a++],h=t[a++],d=t[a++],p=t[a++]+d;a+=1;var v=!t[a++];l&&(i=nl(d)*f+u,o=il(d)*h+c),PJ(u,c,f,h,d,p,v,to,eo),r=nl(p)*f+u,n=il(p)*h+c;break;case ye.R:i=r=t[a++],o=n=t[a++];var g=t[a++],m=t[a++];wM(i,o,i+g,o+m,to,eo);break;case ye.Z:r=i,n=o;break}yc(Qi,Qi,to),bc(Na,Na,eo)}return a===0&&(Qi[0]=Qi[1]=Na[0]=Na[1]=0),new ae(Qi[0],Qi[1],Na[0]-Qi[0],Na[1]-Qi[1])},e.prototype._calculateLength=function(){var t=this.data,r=this._len,n=this._ux,i=this._uy,o=0,a=0,s=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var u=this._pathSegLen,c=0,f=0,h=0;h<r;){var d=t[h++],p=h===1;p&&(o=t[h],a=t[h+1],s=o,l=a);var v=-1;switch(d){case ye.M:o=s=t[h++],a=l=t[h++];break;case ye.L:{var g=t[h++],m=t[h++],_=g-o,y=m-a;(Wo(_)>n||Wo(y)>i||h===r-1)&&(v=Math.sqrt(_*_+y*y),o=g,a=m);break}case ye.C:{var w=t[h++],T=t[h++],g=t[h++],m=t[h++],S=t[h++],P=t[h++];v=zZ(o,a,w,T,g,m,S,P,10),o=S,a=P;break}case ye.Q:{var w=t[h++],T=t[h++],g=t[h++],m=t[h++];v=GZ(o,a,w,T,g,m,10),o=g,a=m;break}case ye.A:var A=t[h++],k=t[h++],C=t[h++],M=t[h++],D=t[h++],B=t[h++],V=B+D;h+=1,t[h++],p&&(s=nl(D)*C+A,l=il(D)*M+k),v=Zy(C,M)*qy(ss,Math.abs(B)),o=nl(V)*C+A,a=il(V)*M+k;break;case ye.R:{s=o=t[h++],l=a=t[h++];var N=t[h++],j=t[h++];v=N*2+j*2;break}case ye.Z:{var _=s-o,y=l-a;v=Math.sqrt(_*_+y*y),o=s,a=l;break}}v>=0&&(u[f++]=v,c+=v)}return this._pathLen=c,c},e.prototype.rebuildPath=function(t,r){var n=this.data,i=this._ux,o=this._uy,a=this._len,s,l,u,c,f,h,d=r<1,p,v,g=0,m=0,_,y=0,w,T;if(d&&(this._pathSegLen||this._calculateLength(),p=this._pathSegLen,v=this._pathLen,_=r*v,!_))return;t:for(var S=0;S<a;){var P=n[S++],A=S===1;switch(A&&(u=n[S],c=n[S+1],s=u,l=c),P!==ye.L&&y>0&&(t.lineTo(w,T),y=0),P){case ye.M:s=u=n[S++],l=c=n[S++],t.moveTo(u,c);break;case ye.L:{f=n[S++],h=n[S++];var k=Wo(f-u),C=Wo(h-c);if(k>i||C>o){if(d){var M=p[m++];if(g+M>_){var D=(_-g)/M;t.lineTo(u*(1-D)+f*D,c*(1-D)+h*D);break t}g+=M}t.lineTo(f,h),u=f,c=h,y=0}else{var B=k*k+C*C;B>y&&(w=f,T=h,y=B)}break}case ye.C:{var V=n[S++],N=n[S++],j=n[S++],Z=n[S++],q=n[S++],et=n[S++];if(d){var M=p[m++];if(g+M>_){var D=(_-g)/M;Cm(u,V,j,q,D,el),Cm(c,N,Z,et,D,rl),t.bezierCurveTo(el[1],rl[1],el[2],rl[2],el[3],rl[3]);break t}g+=M}t.bezierCurveTo(V,N,j,Z,q,et),u=q,c=et;break}case ye.Q:{var V=n[S++],N=n[S++],j=n[S++],Z=n[S++];if(d){var M=p[m++];if(g+M>_){var D=(_-g)/M;Mm(u,V,j,D,el),Mm(c,N,Z,D,rl),t.quadraticCurveTo(el[1],rl[1],el[2],rl[2]);break t}g+=M}t.quadraticCurveTo(V,N,j,Z),u=j,c=Z;break}case ye.A:var Pt=n[S++],Rt=n[S++],wt=n[S++],St=n[S++],Ht=n[S++],Y=n[S++],it=n[S++],K=!n[S++],pt=wt>St?wt:St,Tt=Wo(wt-St)>.001,kt=Ht+Y,lt=!1;if(d){var M=p[m++];g+M>_&&(kt=Ht+Y*(_-g)/M,lt=!0),g+=M}if(Tt&&t.ellipse?t.ellipse(Pt,Rt,wt,St,it,Ht,kt,K):t.arc(Pt,Rt,pt,Ht,kt,K),lt)break t;A&&(s=nl(Ht)*wt+Pt,l=il(Ht)*St+Rt),u=nl(kt)*wt+Pt,c=il(kt)*St+Rt;break;case ye.R:s=u=n[S],l=c=n[S+1],f=n[S++],h=n[S++];var ft=n[S++],$=n[S++];if(d){var M=p[m++];if(g+M>_){var G=_-g;t.moveTo(f,h),t.lineTo(f+qy(G,ft),h),G-=ft,G>0&&t.lineTo(f+ft,h+qy(G,$)),G-=$,G>0&&t.lineTo(f+Zy(ft-G,0),h+$),G-=ft,G>0&&t.lineTo(f,h+Zy($-G,0));break t}g+=M}t.rect(f,h,ft,$);break;case ye.Z:if(d){var M=p[m++];if(g+M>_){var D=(_-g)/M;t.lineTo(u*(1-D)+s*D,c*(1-D)+l*D);break t}g+=M}t.closePath(),u=s,c=l}}},e.prototype.clone=function(){var t=new e,r=this.data;return t.data=r.slice?r.slice():Array.prototype.slice.call(r),t._len=this._len,t},e.CMD=ye,e.initDefaultProps=function(){var t=e.prototype;t._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,t._version=0}(),e}();const Ql=kJ;function Bu(e,t,r,n,i,o,a){if(i===0)return!1;var s=i,l=0,u=e;if(a>t+s&&a>n+s||a<t-s&&a<n-s||o>e+s&&o>r+s||o<e-s&&o<r-s)return!1;if(e!==r)l=(t-n)/(e-r),u=(e*n-r*t)/(e-r);else return Math.abs(o-e)<=s/2;var c=l*o-a+u,f=c*c/(l*l+1);return f<=s/2*s/2}function AJ(e,t,r,n,i,o,a,s,l,u,c){if(l===0)return!1;var f=l;if(c>t+f&&c>n+f&&c>o+f&&c>s+f||c<t-f&&c<n-f&&c<o-f&&c<s-f||u>e+f&&u>r+f&&u>i+f&&u>a+f||u<e-f&&u<r-f&&u<i-f&&u<a-f)return!1;var h=$Z(e,t,r,n,i,o,a,s,u,c,null);return h<=f/2}function CJ(e,t,r,n,i,o,a,s,l){if(a===0)return!1;var u=a;if(l>t+u&&l>n+u&&l>o+u||l<t-u&&l<n-u&&l<o-u||s>e+u&&s>r+u&&s>i+u||s<e-u&&s<r-u&&s<i-u)return!1;var c=UZ(e,t,r,n,i,o,s,l,null);return c<=u/2}var PM=Math.PI*2;function Op(e){return e%=PM,e<0&&(e+=PM),e}var nh=Math.PI*2;function MJ(e,t,r,n,i,o,a,s,l){if(a===0)return!1;var u=a;s-=e,l-=t;var c=Math.sqrt(s*s+l*l);if(c-u>r||c+u<r)return!1;if(Math.abs(n-i)%nh<1e-4)return!0;if(o){var f=n;n=Op(i),i=Op(f)}else n=Op(n),i=Op(i);n>i&&(i+=nh);var h=Math.atan2(l,s);return h<0&&(h+=nh),h>=n&&h<=i||h+nh>=n&&h+nh<=i}function ol(e,t,r,n,i,o){if(o>t&&o>n||o<t&&o<n||n===t)return 0;var a=(o-t)/(n-t),s=n<t?1:-1;(a===1||a===0)&&(s=n<t?.5:-.5);var l=a*(r-e)+e;return l===i?1/0:l>i?s:0}var Fa=Ql.CMD,al=Math.PI*2,xJ=1e-4;function LJ(e,t){return Math.abs(e-t)<xJ}var Jr=[-1,-1,-1],Yn=[-1,-1];function IJ(){var e=Yn[0];Yn[0]=Yn[1],Yn[1]=e}function OJ(e,t,r,n,i,o,a,s,l,u){if(u>t&&u>n&&u>o&&u>s||u<t&&u<n&&u<o&&u<s)return 0;var c=Am(t,n,o,s,u,Jr);if(c===0)return 0;for(var f=0,h=-1,d=void 0,p=void 0,v=0;v<c;v++){var g=Jr[v],m=g===0||g===1?.5:1,_=or(e,r,i,a,g);_<l||(h<0&&(h=e9(t,n,o,s,Yn),Yn[1]<Yn[0]&&h>1&&IJ(),d=or(t,n,o,s,Yn[0]),h>1&&(p=or(t,n,o,s,Yn[1]))),h===2?g<Yn[0]?f+=d<t?m:-m:g<Yn[1]?f+=p<d?m:-m:f+=s<p?m:-m:g<Yn[0]?f+=d<t?m:-m:f+=s<d?m:-m)}return f}function RJ(e,t,r,n,i,o,a,s){if(s>t&&s>n&&s>o||s<t&&s<n&&s<o)return 0;var l=VZ(t,n,o,s,Jr);if(l===0)return 0;var u=r9(t,n,o);if(u>=0&&u<=1){for(var c=0,f=Fr(t,n,o,u),h=0;h<l;h++){var d=Jr[h]===0||Jr[h]===1?.5:1,p=Fr(e,r,i,Jr[h]);p<a||(Jr[h]<u?c+=f<t?d:-d:c+=o<f?d:-d)}return c}else{var d=Jr[0]===0||Jr[0]===1?.5:1,p=Fr(e,r,i,Jr[0]);return p<a?0:o<t?d:-d}}function DJ(e,t,r,n,i,o,a,s){if(s-=t,s>r||s<-r)return 0;var l=Math.sqrt(r*r-s*s);Jr[0]=-l,Jr[1]=l;var u=Math.abs(n-i);if(u<1e-4)return 0;if(u>=al-1e-4){n=0,i=al;var c=o?1:-1;return a>=Jr[0]+e&&a<=Jr[1]+e?c:0}if(n>i){var f=n;n=i,i=f}n<0&&(n+=al,i+=al);for(var h=0,d=0;d<2;d++){var p=Jr[d];if(p+e>a){var v=Math.atan2(s,p),c=o?1:-1;v<0&&(v=al+v),(v>=n&&v<=i||v+al>=n&&v+al<=i)&&(v>Math.PI/2&&v<Math.PI*1.5&&(c=-c),h+=c)}}return h}function A9(e,t,r,n,i){for(var o=e.data,a=e.len(),s=0,l=0,u=0,c=0,f=0,h,d,p=0;p<a;){var v=o[p++],g=p===1;switch(v===Fa.M&&p>1&&(r||(s+=ol(l,u,c,f,n,i))),g&&(l=o[p],u=o[p+1],c=l,f=u),v){case Fa.M:c=o[p++],f=o[p++],l=c,u=f;break;case Fa.L:if(r){if(Bu(l,u,o[p],o[p+1],t,n,i))return!0}else s+=ol(l,u,o[p],o[p+1],n,i)||0;l=o[p++],u=o[p++];break;case Fa.C:if(r){if(AJ(l,u,o[p++],o[p++],o[p++],o[p++],o[p],o[p+1],t,n,i))return!0}else s+=OJ(l,u,o[p++],o[p++],o[p++],o[p++],o[p],o[p+1],n,i)||0;l=o[p++],u=o[p++];break;case Fa.Q:if(r){if(CJ(l,u,o[p++],o[p++],o[p],o[p+1],t,n,i))return!0}else s+=RJ(l,u,o[p++],o[p++],o[p],o[p+1],n,i)||0;l=o[p++],u=o[p++];break;case Fa.A:var m=o[p++],_=o[p++],y=o[p++],w=o[p++],T=o[p++],S=o[p++];p+=1;var P=!!(1-o[p++]);h=Math.cos(T)*y+m,d=Math.sin(T)*w+_,g?(c=h,f=d):s+=ol(l,u,h,d,n,i);var A=(n-m)*w/y+m;if(r){if(MJ(m,_,w,T,T+S,P,t,A,i))return!0}else s+=DJ(m,_,w,T,T+S,P,A,i);l=Math.cos(T+S)*y+m,u=Math.sin(T+S)*w+_;break;case Fa.R:c=l=o[p++],f=u=o[p++];var k=o[p++],C=o[p++];if(h=c+k,d=f+C,r){if(Bu(c,f,h,f,t,n,i)||Bu(h,f,h,d,t,n,i)||Bu(h,d,c,d,t,n,i)||Bu(c,d,c,f,t,n,i))return!0}else s+=ol(h,f,h,d,n,i),s+=ol(c,d,c,f,n,i);break;case Fa.Z:if(r){if(Bu(l,u,c,f,t,n,i))return!0}else s+=ol(l,u,c,f,n,i);l=c,u=f;break}}return!r&&!LJ(u,f)&&(s+=ol(l,u,c,f,n,i)||0),s!==0}function NJ(e,t,r){return A9(e,0,!1,t,r)}function FJ(e,t,r,n){return A9(e,t,!0,r,n)}var C9=te({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},zl),BJ={style:te({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},Y1.style)},Qy=Mo.concat(["invisible","culling","z","z2","zlevel","parent"]),$J=function(e){ke(t,e);function t(r){return e.call(this,r)||this}return t.prototype.update=function(){var r=this;e.prototype.update.call(this);var n=this.style;if(n.decal){var i=this._decalEl=this._decalEl||new t;i.buildPath===t.prototype.buildPath&&(i.buildPath=function(l){r.buildPath(l,r.shape)}),i.silent=!0;var o=i.style;for(var a in n)o[a]!==n[a]&&(o[a]=n[a]);o.fill=n.fill?n.decal:null,o.decal=null,o.shadowColor=null,n.strokeFirst&&(o.stroke=null);for(var s=0;s<Qy.length;++s)i[Qy[s]]=this[Qy[s]];i.__dirty|=An}else this._decalEl&&(this._decalEl=null)},t.prototype.getDecalElement=function(){return this._decalEl},t.prototype._init=function(r){var n=ge(r);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var o=0;o<n.length;o++){var a=n[o],s=r[a];a==="style"?this.style?at(this.style,s):this.useStyle(s):a==="shape"?at(this.shape,s):e.prototype.attrKV.call(this,a,s)}this.style||this.useStyle({})},t.prototype.getDefaultStyle=function(){return null},t.prototype.getDefaultShape=function(){return{}},t.prototype.canBeInsideText=function(){return this.hasFill()},t.prototype.getInsideTextFill=function(){var r=this.style.fill;if(r!=="none"){if(Et(r)){var n=xm(r,0);return n>.5?FS:n>.2?gK:BS}else if(r)return BS}return FS},t.prototype.getInsideTextStroke=function(r){var n=this.style.fill;if(Et(n)){var i=this.__zr,o=!!(i&&i.isDarkMode()),a=xm(r,0)<NS;if(o===a)return n}},t.prototype.buildPath=function(r,n,i){},t.prototype.pathUpdated=function(){this.__dirty&=~vc},t.prototype.getUpdatedPathProxy=function(r){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,r),this.path},t.prototype.createPathProxy=function(){this.path=new Ql(!1)},t.prototype.hasStroke=function(){var r=this.style,n=r.stroke;return!(n==null||n==="none"||!(r.lineWidth>0))},t.prototype.hasFill=function(){var r=this.style,n=r.fill;return n!=null&&n!=="none"},t.prototype.getBoundingRect=function(){var r=this._rect,n=this.style,i=!r;if(i){var o=!1;this.path||(o=!0,this.createPathProxy());var a=this.path;(o||this.__dirty&vc)&&(a.beginPath(),this.buildPath(a,this.shape,!1),this.pathUpdated()),r=a.getBoundingRect()}if(this._rect=r,this.hasStroke()&&this.path&&this.path.len()>0){var s=this._rectStroke||(this._rectStroke=r.clone());if(this.__dirty||i){s.copy(r);var l=n.strokeNoScale?this.getLineScale():1,u=n.lineWidth;if(!this.hasFill()){var c=this.strokeContainThreshold;u=Math.max(u,c==null?4:c)}l>1e-10&&(s.width+=u/l,s.height+=u/l,s.x-=u/l/2,s.y-=u/l/2)}return s}return r},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect(),a=this.style;if(r=i[0],n=i[1],o.contain(r,n)){var s=this.path;if(this.hasStroke()){var l=a.lineWidth,u=a.strokeNoScale?this.getLineScale():1;if(u>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),FJ(s,l/u,r,n)))return!0}if(this.hasFill())return NJ(s,r,n)}return!1},t.prototype.dirtyShape=function(){this.__dirty|=vc,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},t.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},t.prototype.animateShape=function(r){return this.animate("shape",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():r==="shape"?this.dirtyShape():this.markRedraw()},t.prototype.attrKV=function(r,n){r==="shape"?this.setShape(n):e.prototype.attrKV.call(this,r,n)},t.prototype.setShape=function(r,n){var i=this.shape;return i||(i=this.shape={}),typeof r=="string"?i[r]=n:at(i,r),this.dirtyShape(),this},t.prototype.shapeChanged=function(){return!!(this.__dirty&vc)},t.prototype.createStyle=function(r){return j1(C9,r)},t.prototype._innerSaveToNormal=function(r){e.prototype._innerSaveToNormal.call(this,r);var n=this._normalState;r.shape&&!n.shape&&(n.shape=at({},this.shape))},t.prototype._applyStateObj=function(r,n,i,o,a,s){e.prototype._applyStateObj.call(this,r,n,i,o,a,s);var l=!(n&&o),u;if(n&&n.shape?a?o?u=n.shape:(u=at({},i.shape),at(u,n.shape)):(u=at({},o?this.shape:i.shape),at(u,n.shape)):l&&(u=i.shape),u)if(a){this.shape=at({},this.shape);for(var c={},f=ge(u),h=0;h<f.length;h++){var d=f[h];typeof u[d]=="object"?this.shape[d]=u[d]:c[d]=u[d]}this._transitionState(r,{shape:c},s)}else this.shape=u,this.dirtyShape()},t.prototype._mergeStates=function(r){for(var n=e.prototype._mergeStates.call(this,r),i,o=0;o<r.length;o++){var a=r[o];a.shape&&(i=i||{},this._mergeStyle(i,a.shape))}return i&&(n.shape=i),n},t.prototype.getAnimationStyleProps=function(){return BJ},t.prototype.isZeroArea=function(){return!1},t.extend=function(r){var n=function(o){ke(a,o);function a(s){var l=o.call(this,s)||this;return r.init&&r.init.call(l,s),l}return a.prototype.getDefaultStyle=function(){return zt(r.style)},a.prototype.getDefaultShape=function(){return zt(r.shape)},a}(t);for(var i in r)typeof r[i]=="function"&&(n.prototype[i]=r[i]);return n},t.initDefaultProps=function(){var r=t.prototype;r.type="path",r.strokeContainThreshold=5,r.segmentIgnoreThreshold=0,r.subPixelOptimize=!1,r.autoBatch=!1,r.__dirty=An|Yh|vc}(),t}(du);const fe=$J;var zJ=te({strokeFirst:!0,font:Zl,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},C9),M9=function(e){ke(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.hasStroke=function(){var r=this.style,n=r.stroke;return n!=null&&n!=="none"&&r.lineWidth>0},t.prototype.hasFill=function(){var r=this.style,n=r.fill;return n!=null&&n!=="none"},t.prototype.createStyle=function(r){return j1(zJ,r)},t.prototype.setBoundingRect=function(r){this._rect=r},t.prototype.getBoundingRect=function(){var r=this.style;if(!this._rect){var n=r.text;n!=null?n+="":n="";var i=RP(n,r.font,r.textAlign,r.textBaseline);if(i.x+=r.x||0,i.y+=r.y||0,this.hasStroke()){var o=r.lineWidth;i.x-=o/2,i.y-=o/2,i.width+=o,i.height+=o}this._rect=i}return this._rect},t.initDefaultProps=function(){var r=t.prototype;r.dirtyRectTolerance=10}(),t}(du);M9.prototype.type="tspan";const GS=M9;var VJ=te({x:0,y:0},zl),UJ={style:te({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},Y1.style)};function GJ(e){return!!(e&&typeof e!="string"&&e.width&&e.height)}var x9=function(e){ke(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createStyle=function(r){return j1(VJ,r)},t.prototype._getSize=function(r){var n=this.style,i=n[r];if(i!=null)return i;var o=GJ(n.image)?n.image:this.__image;if(!o)return 0;var a=r==="width"?"height":"width",s=n[a];return s==null?o[r]:o[r]/o[a]*s},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return UJ},t.prototype.getBoundingRect=function(){var r=this.style;return this._rect||(this._rect=new ae(r.x||0,r.y||0,this.getWidth(),this.getHeight())),this._rect},t}(du);x9.prototype.type="image";const ka=x9;function jJ(e,t){var r=t.x,n=t.y,i=t.width,o=t.height,a=t.r,s,l,u,c;i<0&&(r=r+i,i=-i),o<0&&(n=n+o,o=-o),typeof a=="number"?s=l=u=c=a:a instanceof Array?a.length===1?s=l=u=c=a[0]:a.length===2?(s=u=a[0],l=c=a[1]):a.length===3?(s=a[0],l=c=a[1],u=a[2]):(s=a[0],l=a[1],u=a[2],c=a[3]):s=l=u=c=0;var f;s+l>i&&(f=s+l,s*=i/f,l*=i/f),u+c>i&&(f=u+c,u*=i/f,c*=i/f),l+u>o&&(f=l+u,l*=o/f,u*=o/f),s+c>o&&(f=s+c,s*=o/f,c*=o/f),e.moveTo(r+s,n),e.lineTo(r+i-l,n),l!==0&&e.arc(r+i-l,n+l,l,-Math.PI/2,0),e.lineTo(r+i,n+o-u),u!==0&&e.arc(r+i-u,n+o-u,u,0,Math.PI/2),e.lineTo(r+c,n+o),c!==0&&e.arc(r+c,n+o-c,c,Math.PI/2,Math.PI),e.lineTo(r,n+s),s!==0&&e.arc(r+s,n+s,s,Math.PI,Math.PI*1.5)}var Sc=Math.round;function L9(e,t,r){if(!!t){var n=t.x1,i=t.x2,o=t.y1,a=t.y2;e.x1=n,e.x2=i,e.y1=o,e.y2=a;var s=r&&r.lineWidth;return s&&(Sc(n*2)===Sc(i*2)&&(e.x1=e.x2=Ll(n,s,!0)),Sc(o*2)===Sc(a*2)&&(e.y1=e.y2=Ll(o,s,!0))),e}}function I9(e,t,r){if(!!t){var n=t.x,i=t.y,o=t.width,a=t.height;e.x=n,e.y=i,e.width=o,e.height=a;var s=r&&r.lineWidth;return s&&(e.x=Ll(n,s,!0),e.y=Ll(i,s,!0),e.width=Math.max(Ll(n+o,s,!1)-e.x,o===0?0:1),e.height=Math.max(Ll(i+a,s,!1)-e.y,a===0?0:1)),e}}function Ll(e,t,r){if(!t)return e;var n=Sc(e*2);return(n+Sc(t))%2===0?n/2:(n+(r?1:-1))/2}var WJ=function(){function e(){this.x=0,this.y=0,this.width=0,this.height=0}return e}(),HJ={},O9=function(e){ke(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new WJ},t.prototype.buildPath=function(r,n){var i,o,a,s;if(this.subPixelOptimize){var l=I9(HJ,n,this.style);i=l.x,o=l.y,a=l.width,s=l.height,l.r=n.r,n=l}else i=n.x,o=n.y,a=n.width,s=n.height;n.r?jJ(r,n):r.rect(i,o,a,s)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t}(fe);O9.prototype.type="rect";const Ke=O9;var EM={fill:"#000"},kM=2,XJ={style:te({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},Y1.style)},R9=function(e){ke(t,e);function t(r){var n=e.call(this)||this;return n.type="text",n._children=[],n._defaultStyle=EM,n.attr(r),n}return t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){e.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var r=0;r<this._children.length;r++){var n=this._children[r];n.zlevel=this.zlevel,n.z=this.z,n.z2=this.z2,n.culling=this.culling,n.cursor=this.cursor,n.invisible=this.invisible}},t.prototype.updateTransform=function(){var r=this.innerTransformable;r?(r.updateTransform(),r.transform&&(this.transform=r.transform)):e.prototype.updateTransform.call(this)},t.prototype.getLocalTransform=function(r){var n=this.innerTransformable;return n?n.getLocalTransform(r):e.prototype.getLocalTransform.call(this,r)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),e.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){this._childCursor=0,JJ(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(r){e.prototype.addSelfToZr.call(this,r);for(var n=0;n<this._children.length;n++)this._children[n].__zr=r},t.prototype.removeSelfFromZr=function(r){e.prototype.removeSelfFromZr.call(this,r);for(var n=0;n<this._children.length;n++)this._children[n].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var r=new ae(0,0,0,0),n=this._children,i=[],o=null,a=0;a<n.length;a++){var s=n[a],l=s.getBoundingRect(),u=s.getLocalTransform(i);u?(r.copy(l),r.applyTransform(u),o=o||r.clone(),o.union(r)):(o=o||l.clone(),o.union(l))}this._rect=o||r}return this._rect},t.prototype.setDefaultTextStyle=function(r){this._defaultStyle=r||EM},t.prototype.setTextContent=function(r){},t.prototype._mergeStyle=function(r,n){if(!n)return r;var i=n.rich,o=r.rich||i&&{};return at(r,n),i&&o?(this._mergeRich(o,i),r.rich=o):o&&(r.rich=o),r},t.prototype._mergeRich=function(r,n){for(var i=ge(n),o=0;o<i.length;o++){var a=i[o];r[a]=r[a]||{},at(r[a],n[a])}},t.prototype.getAnimationStyleProps=function(){return XJ},t.prototype._getOrCreateChild=function(r){var n=this._children[this._childCursor];return(!n||!(n instanceof r))&&(n=new r),this._children[this._childCursor++]=n,n.__zr=this.__zr,n.parent=this,n},t.prototype._updatePlainTexts=function(){var r=this.style,n=r.font||Zl,i=r.padding,o=OM(r),a=fJ(o,r),s=t2(r),l=!!r.backgroundColor,u=a.outerHeight,c=a.outerWidth,f=a.contentWidth,h=a.lines,d=a.lineHeight,p=this._defaultStyle,v=r.x||0,g=r.y||0,m=r.align||p.align||"left",_=r.verticalAlign||p.verticalAlign||"top",y=v,w=gc(g,a.contentHeight,_);if(s||i){var T=Zh(v,c,m),S=gc(g,u,_);s&&this._renderBackground(r,r,T,S,c,u)}w+=d/2,i&&(y=IM(v,m,i),_==="top"?w+=i[0]:_==="bottom"&&(w-=i[2]));for(var P=0,A=!1,k=LM("fill"in r?r.fill:(A=!0,p.fill)),C=xM("stroke"in r?r.stroke:!l&&(!p.autoStroke||A)?(P=kM,p.stroke):null),M=r.textShadowBlur>0,D=r.width!=null&&(r.overflow==="truncate"||r.overflow==="break"||r.overflow==="breakAll"),B=a.calculatedLineHeight,V=0;V<h.length;V++){var N=this._getOrCreateChild(GS),j=N.createStyle();N.useStyle(j),j.text=h[V],j.x=y,j.y=w,m&&(j.textAlign=m),j.textBaseline="middle",j.opacity=r.opacity,j.strokeFirst=!0,M&&(j.shadowBlur=r.textShadowBlur||0,j.shadowColor=r.textShadowColor||"transparent",j.shadowOffsetX=r.textShadowOffsetX||0,j.shadowOffsetY=r.textShadowOffsetY||0),j.stroke=C,j.fill=k,C&&(j.lineWidth=r.lineWidth||P,j.lineDash=r.lineDash,j.lineDashOffset=r.lineDashOffset||0),j.font=n,CM(j,r),w+=d,D&&N.setBoundingRect(new ae(Zh(j.x,r.width,j.textAlign),gc(j.y,B,j.textBaseline),f,B))}},t.prototype._updateRichTexts=function(){var r=this.style,n=OM(r),i=pJ(n,r),o=i.width,a=i.outerWidth,s=i.outerHeight,l=r.padding,u=r.x||0,c=r.y||0,f=this._defaultStyle,h=r.align||f.align,d=r.verticalAlign||f.verticalAlign,p=Zh(u,a,h),v=gc(c,s,d),g=p,m=v;l&&(g+=l[3],m+=l[0]);var _=g+o;t2(r)&&this._renderBackground(r,r,p,v,a,s);for(var y=!!r.backgroundColor,w=0;w<i.lines.length;w++){for(var T=i.lines[w],S=T.tokens,P=S.length,A=T.lineHeight,k=T.width,C=0,M=g,D=_,B=P-1,V=void 0;C<P&&(V=S[C],!V.align||V.align==="left");)this._placeToken(V,r,A,m,M,"left",y),k-=V.width,M+=V.width,C++;for(;B>=0&&(V=S[B],V.align==="right");)this._placeToken(V,r,A,m,D,"right",y),k-=V.width,D-=V.width,B--;for(M+=(o-(M-g)-(_-D)-k)/2;C<=B;)V=S[C],this._placeToken(V,r,A,m,M+V.width/2,"center",y),M+=V.width,C++;m+=A}},t.prototype._placeToken=function(r,n,i,o,a,s,l){var u=n.rich[r.styleName]||{};u.text=r.text;var c=r.verticalAlign,f=o+i/2;c==="top"?f=o+r.height/2:c==="bottom"&&(f=o+i-r.height/2);var h=!r.isLineHolder&&t2(u);h&&this._renderBackground(u,n,s==="right"?a-r.width:s==="center"?a-r.width/2:a,f-r.height/2,r.width,r.height);var d=!!u.backgroundColor,p=r.textPadding;p&&(a=IM(a,s,p),f-=r.height/2-p[0]-r.innerHeight/2);var v=this._getOrCreateChild(GS),g=v.createStyle();v.useStyle(g);var m=this._defaultStyle,_=!1,y=0,w=LM("fill"in u?u.fill:"fill"in n?n.fill:(_=!0,m.fill)),T=xM("stroke"in u?u.stroke:"stroke"in n?n.stroke:!d&&!l&&(!m.autoStroke||_)?(y=kM,m.stroke):null),S=u.textShadowBlur>0||n.textShadowBlur>0;g.text=r.text,g.x=a,g.y=f,S&&(g.shadowBlur=u.textShadowBlur||n.textShadowBlur||0,g.shadowColor=u.textShadowColor||n.textShadowColor||"transparent",g.shadowOffsetX=u.textShadowOffsetX||n.textShadowOffsetX||0,g.shadowOffsetY=u.textShadowOffsetY||n.textShadowOffsetY||0),g.textAlign=s,g.textBaseline="middle",g.font=r.font||Zl,g.opacity=gd(u.opacity,n.opacity,1),CM(g,u),T&&(g.lineWidth=gd(u.lineWidth,n.lineWidth,y),g.lineDash=qt(u.lineDash,n.lineDash),g.lineDashOffset=n.lineDashOffset||0,g.stroke=T),w&&(g.fill=w);var P=r.contentWidth,A=r.contentHeight;v.setBoundingRect(new ae(Zh(g.x,P,g.textAlign),gc(g.y,A,g.textBaseline),P,A))},t.prototype._renderBackground=function(r,n,i,o,a,s){var l=r.backgroundColor,u=r.borderWidth,c=r.borderColor,f=l&&l.image,h=l&&!f,d=r.borderRadius,p=this,v,g;if(h||r.lineHeight||u&&c){v=this._getOrCreateChild(Ke),v.useStyle(v.createStyle()),v.style.fill=null;var m=v.shape;m.x=i,m.y=o,m.width=a,m.height=s,m.r=d,v.dirtyShape()}if(h){var _=v.style;_.fill=l||null,_.fillOpacity=qt(r.fillOpacity,1)}else if(f){g=this._getOrCreateChild(ka),g.onload=function(){p.dirtyStyle()};var y=g.style;y.image=l.image,y.x=i,y.y=o,y.width=a,y.height=s}if(u&&c){var _=v.style;_.lineWidth=u,_.stroke=c,_.strokeOpacity=qt(r.strokeOpacity,1),_.lineDash=r.borderDash,_.lineDashOffset=r.borderDashOffset||0,v.strokeContainThreshold=0,v.hasFill()&&v.hasStroke()&&(_.strokeFirst=!0,_.lineWidth*=2)}var w=(v||g).style;w.shadowBlur=r.shadowBlur||0,w.shadowColor=r.shadowColor||"transparent",w.shadowOffsetX=r.shadowOffsetX||0,w.shadowOffsetY=r.shadowOffsetY||0,w.opacity=gd(r.opacity,n.opacity,1)},t.makeFont=function(r){var n="";return KJ(r)&&(n=[r.fontStyle,r.fontWeight,ZJ(r.fontSize),r.fontFamily||"sans-serif"].join(" ")),n&&So(n)||r.textFont||r.font},t}(du),YJ={left:!0,right:1,center:1},qJ={top:1,bottom:1,middle:1},AM=["fontStyle","fontWeight","fontSize","fontFamily"];function ZJ(e){return typeof e=="string"&&(e.indexOf("px")!==-1||e.indexOf("rem")!==-1||e.indexOf("em")!==-1)?e:isNaN(+e)?PP+"px":e+"px"}function CM(e,t){for(var r=0;r<AM.length;r++){var n=AM[r],i=t[n];i!=null&&(e[n]=i)}}function KJ(e){return e.fontSize!=null||e.fontFamily||e.fontWeight}function JJ(e){return MM(e),F(e.rich,MM),e}function MM(e){if(e){e.font=R9.makeFont(e);var t=e.align;t==="middle"&&(t="center"),e.align=t==null||YJ[t]?t:"left";var r=e.verticalAlign;r==="center"&&(r="middle"),e.verticalAlign=r==null||qJ[r]?r:"top";var n=e.padding;n&&(e.padding=z7(e.padding))}}function xM(e,t){return e==null||t<=0||e==="transparent"||e==="none"?null:e.image||e.colorStops?"#000":e}function LM(e){return e==null||e==="none"?null:e.image||e.colorStops?"#000":e}function IM(e,t,r){return t==="right"?e-r[1]:t==="center"?e+r[3]/2-r[1]/2:e+r[3]}function OM(e){var t=e.text;return t!=null&&(t+=""),t}function t2(e){return!!(e.backgroundColor||e.lineHeight||e.borderWidth&&e.borderColor)}const Je=R9;var ie=Oe(),QJ=function(e,t,r,n){if(n){var i=ie(n);i.dataIndex=r,i.dataType=t,i.seriesIndex=e,n.type==="group"&&n.traverse(function(o){var a=ie(o);a.seriesIndex=e,a.dataIndex=r,a.dataType=t})}},RM=1,DM={},D9=Oe(),VP=Oe(),UP=0,I0=1,q1=2,ii=["emphasis","blur","select"],NM=["normal","emphasis","blur","select"],tQ=10,eQ=9,Vl="highlight",Ug="downplay",bd="select",Gg="unselect",wd="toggleSelect";function $u(e){return e!=null&&e!=="none"}var FM=new M0(100);function BM(e){if(Et(e)){var t=FM.get(e);return t||(t=eM(e,-.1),FM.put(e,t)),t}else if(G1(e)){var r=at({},e);return r.colorStops=Ct(e.colorStops,function(n){return{offset:n.offset,color:eM(n.color,-.1)}}),r}return e}function Z1(e,t,r){e.onHoverStateChange&&(e.hoverState||0)!==r&&e.onHoverStateChange(t),e.hoverState=r}function N9(e){Z1(e,"emphasis",q1)}function F9(e){e.hoverState===q1&&Z1(e,"normal",UP)}function GP(e){Z1(e,"blur",I0)}function B9(e){e.hoverState===I0&&Z1(e,"normal",UP)}function rQ(e){e.selected=!0}function nQ(e){e.selected=!1}function $M(e,t,r){t(e,r)}function Aa(e,t,r){$M(e,t,r),e.isGroup&&e.traverse(function(n){$M(n,t,r)})}function jS(e,t){switch(t){case"emphasis":e.hoverState=q1;break;case"normal":e.hoverState=UP;break;case"blur":e.hoverState=I0;break;case"select":e.selected=!0}}function iQ(e,t,r,n){for(var i=e.style,o={},a=0;a<t.length;a++){var s=t[a],l=i[s];o[s]=l==null?n&&n[s]:l}for(var a=0;a<e.animators.length;a++){var u=e.animators[a];u.__fromStateTransition&&u.__fromStateTransition.indexOf(r)<0&&u.targetName==="style"&&u.saveTo(o,t)}return o}function oQ(e,t,r,n){var i=r&&ue(r,"select")>=0,o=!1;if(e instanceof fe){var a=D9(e),s=i&&a.selectFill||a.normalFill,l=i&&a.selectStroke||a.normalStroke;if($u(s)||$u(l)){n=n||{};var u=n.style||{};u.fill==="inherit"?(o=!0,n=at({},n),u=at({},u),u.fill=s):!$u(u.fill)&&$u(s)?(o=!0,n=at({},n),u=at({},u),u.fill=BM(s)):!$u(u.stroke)&&$u(l)&&(o||(n=at({},n),u=at({},u)),u.stroke=BM(l)),n.style=u}}if(n&&n.z2==null){o||(n=at({},n));var c=e.z2EmphasisLift;n.z2=e.z2+(c!=null?c:tQ)}return n}function aQ(e,t,r){if(r&&r.z2==null){r=at({},r);var n=e.z2SelectLift;r.z2=e.z2+(n!=null?n:eQ)}return r}function sQ(e,t,r){var n=ue(e.currentStates,t)>=0,i=e.style.opacity,o=n?null:iQ(e,["opacity"],t,{opacity:1});r=r||{};var a=r.style||{};return a.opacity==null&&(r=at({},r),a=at({opacity:n?i:o.opacity*.1},a),r.style=a),r}function e2(e,t){var r=this.states[e];if(this.style){if(e==="emphasis")return oQ(this,e,t,r);if(e==="blur")return sQ(this,e,r);if(e==="select")return aQ(this,e,r)}return r}function jP(e){e.stateProxy=e2;var t=e.getTextContent(),r=e.getTextGuideLine();t&&(t.stateProxy=e2),r&&(r.stateProxy=e2)}function zM(e,t){!U9(e,t)&&!e.__highByOuter&&Aa(e,N9)}function VM(e,t){!U9(e,t)&&!e.__highByOuter&&Aa(e,F9)}function Zd(e,t){e.__highByOuter|=1<<(t||0),Aa(e,N9)}function Kd(e,t){!(e.__highByOuter&=~(1<<(t||0)))&&Aa(e,F9)}function $9(e){Aa(e,GP)}function WP(e){Aa(e,B9)}function z9(e){Aa(e,rQ)}function V9(e){Aa(e,nQ)}function U9(e,t){return e.__highDownSilentOnTouch&&t.zrByTouch}function G9(e){var t=e.getModel(),r=[],n=[];t.eachComponent(function(i,o){var a=VP(o),s=i==="series",l=s?e.getViewOfSeriesModel(o):e.getViewOfComponentModel(o);!s&&n.push(l),a.isBlured&&(l.group.traverse(function(u){B9(u)}),s&&r.push(o)),a.isBlured=!1}),F(n,function(i){i&&i.toggleBlurSeries&&i.toggleBlurSeries(r,!1,t)})}function WS(e,t,r,n){var i=n.getModel();r=r||"coordinateSystem";function o(u,c){for(var f=0;f<c.length;f++){var h=u.getItemGraphicEl(c[f]);h&&WP(h)}}if(e!=null&&!(!t||t==="none")){var a=i.getSeriesByIndex(e),s=a.coordinateSystem;s&&s.master&&(s=s.master);var l=[];i.eachSeries(function(u){var c=a===u,f=u.coordinateSystem;f&&f.master&&(f=f.master);var h=f&&s?f===s:c;if(!(r==="series"&&!c||r==="coordinateSystem"&&!h||t==="series"&&c)){var d=n.getViewOfSeriesModel(u);if(d.group.traverse(function(g){GP(g)}),Wr(t))o(u.getData(),t);else if(Ot(t))for(var p=ge(t),v=0;v<p.length;v++)o(u.getData(p[v]),t[p[v]]);l.push(u),VP(u).isBlured=!0}}),i.eachComponent(function(u,c){if(u!=="series"){var f=n.getViewOfComponentModel(c);f&&f.toggleBlurSeries&&f.toggleBlurSeries(l,!0,i)}})}}function HS(e,t,r){if(!(e==null||t==null)){var n=r.getModel().getComponent(e,t);if(!!n){VP(n).isBlured=!0;var i=r.getViewOfComponentModel(n);!i||!i.focusBlurEnabled||i.group.traverse(function(o){GP(o)})}}}function lQ(e,t,r){var n=e.seriesIndex,i=e.getData(t.dataType);if(!!i){var o=Jl(i,t);o=(ct(o)?o[0]:o)||0;var a=i.getItemGraphicEl(o);if(!a)for(var s=i.count(),l=0;!a&&l<s;)a=i.getItemGraphicEl(l++);if(a){var u=ie(a);WS(n,u.focus,u.blurScope,r)}else{var c=e.get(["emphasis","focus"]),f=e.get(["emphasis","blurScope"]);c!=null&&WS(n,c,f,r)}}}function HP(e,t,r,n){var i={focusSelf:!1,dispatchers:null};if(e==null||e==="series"||t==null||r==null)return i;var o=n.getModel().getComponent(e,t);if(!o)return i;var a=n.getViewOfComponentModel(o);if(!a||!a.findHighDownDispatchers)return i;for(var s=a.findHighDownDispatchers(r),l,u=0;u<s.length;u++)if(ie(s[u]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:s}}function uQ(e,t,r){var n=ie(e),i=HP(n.componentMainType,n.componentIndex,n.componentHighDownName,r),o=i.dispatchers,a=i.focusSelf;o?(a&&HS(n.componentMainType,n.componentIndex,r),F(o,function(s){return zM(s,t)})):(WS(n.seriesIndex,n.focus,n.blurScope,r),n.focus==="self"&&HS(n.componentMainType,n.componentIndex,r),zM(e,t))}function cQ(e,t,r){G9(r);var n=ie(e),i=HP(n.componentMainType,n.componentIndex,n.componentHighDownName,r).dispatchers;i?F(i,function(o){return VM(o,t)}):VM(e,t)}function fQ(e,t,r){if(!!qS(t)){var n=t.dataType,i=e.getData(n),o=Jl(i,t);ct(o)||(o=[o]),e[t.type===wd?"toggleSelect":t.type===bd?"select":"unselect"](o,n)}}function UM(e){var t=e.getAllData();F(t,function(r){var n=r.data,i=r.type;n.eachItemGraphicEl(function(o,a){e.isSelected(a,i)?z9(o):V9(o)})})}function hQ(e){var t=[];return e.eachSeries(function(r){var n=r.getAllData();F(n,function(i){i.data;var o=i.type,a=r.getSelectedDataIndices();if(a.length>0){var s={dataIndex:a,seriesIndex:r.seriesIndex};o!=null&&(s.dataType=o),t.push(s)}})}),t}function XS(e,t,r){XP(e,!0),Aa(e,jP),pQ(e,t,r)}function dQ(e){XP(e,!1)}function tu(e,t,r,n){n?dQ(e):XS(e,t,r)}function pQ(e,t,r){var n=ie(e);t!=null?(n.focus=t,n.blurScope=r):n.focus&&(n.focus=null)}var GM=["emphasis","blur","select"],vQ={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function Jd(e,t,r,n){r=r||"itemStyle";for(var i=0;i<GM.length;i++){var o=GM[i],a=t.getModel([o,r]),s=e.ensureState(o);s.style=n?n(a):a[vQ[r]]()}}function XP(e,t){var r=t===!1,n=e;e.highDownSilentOnTouch&&(n.__highDownSilentOnTouch=e.highDownSilentOnTouch),(!r||n.__highDownDispatcher)&&(n.__highByOuter=n.__highByOuter||0,n.__highDownDispatcher=!r)}function YS(e){return!!(e&&e.__highDownDispatcher)}function gQ(e){var t=DM[e];return t==null&&RM<=32&&(t=DM[e]=RM++),t}function qS(e){var t=e.type;return t===bd||t===Gg||t===wd}function jM(e){var t=e.type;return t===Vl||t===Ug}function mQ(e){var t=D9(e);t.normalFill=e.style.fill,t.normalStroke=e.style.stroke;var r=e.states.select||{};t.selectFill=r.style&&r.style.fill||null,t.selectStroke=r.style&&r.style.stroke||null}var zu=Ql.CMD,_Q=[[],[],[]],WM=Math.sqrt,yQ=Math.atan2;function bQ(e,t){if(!!t){var r=e.data,n=e.len(),i,o,a,s,l,u,c=zu.M,f=zu.C,h=zu.L,d=zu.R,p=zu.A,v=zu.Q;for(a=0,s=0;a<n;){switch(i=r[a++],s=a,o=0,i){case c:o=1;break;case h:o=1;break;case f:o=3;break;case v:o=2;break;case p:var g=t[4],m=t[5],_=WM(t[0]*t[0]+t[1]*t[1]),y=WM(t[2]*t[2]+t[3]*t[3]),w=yQ(-t[1]/y,t[0]/_);r[a]*=_,r[a++]+=g,r[a]*=y,r[a++]+=m,r[a++]*=_,r[a++]*=y,r[a++]+=w,r[a++]+=w,a+=2,s=a;break;case d:u[0]=r[a++],u[1]=r[a++],rn(u,u,t),r[s++]=u[0],r[s++]=u[1],u[0]+=r[a++],u[1]+=r[a++],rn(u,u,t),r[s++]=u[0],r[s++]=u[1]}for(l=0;l<o;l++){var T=_Q[l];T[0]=r[a++],T[1]=r[a++],rn(T,T,t),r[s++]=T[0],r[s++]=T[1]}}e.increaseVersion()}}var r2=Math.sqrt,Rp=Math.sin,Dp=Math.cos,ih=Math.PI;function HM(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function ZS(e,t){return(e[0]*t[0]+e[1]*t[1])/(HM(e)*HM(t))}function XM(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(ZS(e,t))}function YM(e,t,r,n,i,o,a,s,l,u,c){var f=l*(ih/180),h=Dp(f)*(e-r)/2+Rp(f)*(t-n)/2,d=-1*Rp(f)*(e-r)/2+Dp(f)*(t-n)/2,p=h*h/(a*a)+d*d/(s*s);p>1&&(a*=r2(p),s*=r2(p));var v=(i===o?-1:1)*r2((a*a*(s*s)-a*a*(d*d)-s*s*(h*h))/(a*a*(d*d)+s*s*(h*h)))||0,g=v*a*d/s,m=v*-s*h/a,_=(e+r)/2+Dp(f)*g-Rp(f)*m,y=(t+n)/2+Rp(f)*g+Dp(f)*m,w=XM([1,0],[(h-g)/a,(d-m)/s]),T=[(h-g)/a,(d-m)/s],S=[(-1*h-g)/a,(-1*d-m)/s],P=XM(T,S);if(ZS(T,S)<=-1&&(P=ih),ZS(T,S)>=1&&(P=0),P<0){var A=Math.round(P/ih*1e6)/1e6;P=ih*2+A%2*ih}c.addData(u,_,y,a,s,w,P,f,o)}var wQ=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,SQ=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function TQ(e){var t=new Ql;if(!e)return t;var r=0,n=0,i=r,o=n,a,s=Ql.CMD,l=e.match(wQ);if(!l)return t;for(var u=0;u<l.length;u++){for(var c=l[u],f=c.charAt(0),h=void 0,d=c.match(SQ)||[],p=d.length,v=0;v<p;v++)d[v]=parseFloat(d[v]);for(var g=0;g<p;){var m=void 0,_=void 0,y=void 0,w=void 0,T=void 0,S=void 0,P=void 0,A=r,k=n,C=void 0,M=void 0;switch(f){case"l":r+=d[g++],n+=d[g++],h=s.L,t.addData(h,r,n);break;case"L":r=d[g++],n=d[g++],h=s.L,t.addData(h,r,n);break;case"m":r+=d[g++],n+=d[g++],h=s.M,t.addData(h,r,n),i=r,o=n,f="l";break;case"M":r=d[g++],n=d[g++],h=s.M,t.addData(h,r,n),i=r,o=n,f="L";break;case"h":r+=d[g++],h=s.L,t.addData(h,r,n);break;case"H":r=d[g++],h=s.L,t.addData(h,r,n);break;case"v":n+=d[g++],h=s.L,t.addData(h,r,n);break;case"V":n=d[g++],h=s.L,t.addData(h,r,n);break;case"C":h=s.C,t.addData(h,d[g++],d[g++],d[g++],d[g++],d[g++],d[g++]),r=d[g-2],n=d[g-1];break;case"c":h=s.C,t.addData(h,d[g++]+r,d[g++]+n,d[g++]+r,d[g++]+n,d[g++]+r,d[g++]+n),r+=d[g-2],n+=d[g-1];break;case"S":m=r,_=n,C=t.len(),M=t.data,a===s.C&&(m+=r-M[C-4],_+=n-M[C-3]),h=s.C,A=d[g++],k=d[g++],r=d[g++],n=d[g++],t.addData(h,m,_,A,k,r,n);break;case"s":m=r,_=n,C=t.len(),M=t.data,a===s.C&&(m+=r-M[C-4],_+=n-M[C-3]),h=s.C,A=r+d[g++],k=n+d[g++],r+=d[g++],n+=d[g++],t.addData(h,m,_,A,k,r,n);break;case"Q":A=d[g++],k=d[g++],r=d[g++],n=d[g++],h=s.Q,t.addData(h,A,k,r,n);break;case"q":A=d[g++]+r,k=d[g++]+n,r+=d[g++],n+=d[g++],h=s.Q,t.addData(h,A,k,r,n);break;case"T":m=r,_=n,C=t.len(),M=t.data,a===s.Q&&(m+=r-M[C-4],_+=n-M[C-3]),r=d[g++],n=d[g++],h=s.Q,t.addData(h,m,_,r,n);break;case"t":m=r,_=n,C=t.len(),M=t.data,a===s.Q&&(m+=r-M[C-4],_+=n-M[C-3]),r+=d[g++],n+=d[g++],h=s.Q,t.addData(h,m,_,r,n);break;case"A":y=d[g++],w=d[g++],T=d[g++],S=d[g++],P=d[g++],A=r,k=n,r=d[g++],n=d[g++],h=s.A,YM(A,k,r,n,S,P,y,w,T,h,t);break;case"a":y=d[g++],w=d[g++],T=d[g++],S=d[g++],P=d[g++],A=r,k=n,r+=d[g++],n+=d[g++],h=s.A,YM(A,k,r,n,S,P,y,w,T,h,t);break}}(f==="z"||f==="Z")&&(h=s.Z,t.addData(h),r=i,n=o),a=h}return t.toStatic(),t}var j9=function(e){ke(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.applyTransform=function(r){},t}(fe);function W9(e){return e.setData!=null}function H9(e,t){var r=TQ(e),n=at({},t);return n.buildPath=function(i){if(W9(i)){i.setData(r.data);var o=i.getContext();o&&i.rebuildPath(o,1)}else{var o=i;r.rebuildPath(o,1)}},n.applyTransform=function(i){bQ(r,i),this.dirtyShape()},n}function PQ(e,t){return new j9(H9(e,t))}function EQ(e,t){var r=H9(e,t),n=function(i){ke(o,i);function o(a){var s=i.call(this,a)||this;return s.applyTransform=r.applyTransform,s.buildPath=r.buildPath,s}return o}(j9);return n}function kQ(e,t){for(var r=[],n=e.length,i=0;i<n;i++){var o=e[i];r.push(o.getUpdatedPathProxy(!0))}var a=new fe(t);return a.createPathProxy(),a.buildPath=function(s){if(W9(s)){s.appendPath(r);var l=s.getContext();l&&s.rebuildPath(l,1)}},a}var AQ=function(){function e(){this.cx=0,this.cy=0,this.r=0}return e}(),X9=function(e){ke(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new AQ},t.prototype.buildPath=function(r,n){r.moveTo(n.cx+n.r,n.cy),r.arc(n.cx,n.cy,n.r,0,Math.PI*2)},t}(fe);X9.prototype.type="circle";const YP=X9;var CQ=function(){function e(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return e}(),Y9=function(e){ke(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new CQ},t.prototype.buildPath=function(r,n){var i=.5522848,o=n.cx,a=n.cy,s=n.rx,l=n.ry,u=s*i,c=l*i;r.moveTo(o-s,a),r.bezierCurveTo(o-s,a-c,o-u,a-l,o,a-l),r.bezierCurveTo(o+u,a-l,o+s,a-c,o+s,a),r.bezierCurveTo(o+s,a+c,o+u,a+l,o,a+l),r.bezierCurveTo(o-u,a+l,o-s,a+c,o-s,a),r.closePath()},t}(fe);Y9.prototype.type="ellipse";const q9=Y9;var Z9=Math.PI,n2=Z9*2,sl=Math.sin,Vu=Math.cos,MQ=Math.acos,Or=Math.atan2,qM=Math.abs,Sd=Math.sqrt,Kh=Math.max,ro=Math.min,vi=1e-4;function xQ(e,t,r,n,i,o,a,s){var l=r-e,u=n-t,c=a-i,f=s-o,h=f*l-c*u;if(!(h*h<vi))return h=(c*(t-o)-f*(e-i))/h,[e+h*l,t+h*u]}function Np(e,t,r,n,i,o,a){var s=e-r,l=t-n,u=(a?o:-o)/Sd(s*s+l*l),c=u*l,f=-u*s,h=e+c,d=t+f,p=r+c,v=n+f,g=(h+p)/2,m=(d+v)/2,_=p-h,y=v-d,w=_*_+y*y,T=i-o,S=h*v-p*d,P=(y<0?-1:1)*Sd(Kh(0,T*T*w-S*S)),A=(S*y-_*P)/w,k=(-S*_-y*P)/w,C=(S*y+_*P)/w,M=(-S*_+y*P)/w,D=A-g,B=k-m,V=C-g,N=M-m;return D*D+B*B>V*V+N*N&&(A=C,k=M),{cx:A,cy:k,x0:-c,y0:-f,x1:A*(i/T-1),y1:k*(i/T-1)}}function LQ(e){var t;if(ct(e)){var r=e.length;if(!r)return e;r===1?t=[e[0],e[0],0,0]:r===2?t=[e[0],e[0],e[1],e[1]]:r===3?t=e.concat(e[2]):t=e}else t=[e,e,e,e];return t}function IQ(e,t){var r,n=Kh(t.r,0),i=Kh(t.r0||0,0),o=n>0,a=i>0;if(!(!o&&!a)){if(o||(n=i,i=0),i>n){var s=n;n=i,i=s}var l=t.startAngle,u=t.endAngle;if(!(isNaN(l)||isNaN(u))){var c=t.cx,f=t.cy,h=!!t.clockwise,d=qM(u-l),p=d>n2&&d%n2;if(p>vi&&(d=p),!(n>vi))e.moveTo(c,f);else if(d>n2-vi)e.moveTo(c+n*Vu(l),f+n*sl(l)),e.arc(c,f,n,l,u,!h),i>vi&&(e.moveTo(c+i*Vu(u),f+i*sl(u)),e.arc(c,f,i,u,l,h));else{var v=void 0,g=void 0,m=void 0,_=void 0,y=void 0,w=void 0,T=void 0,S=void 0,P=void 0,A=void 0,k=void 0,C=void 0,M=void 0,D=void 0,B=void 0,V=void 0,N=n*Vu(l),j=n*sl(l),Z=i*Vu(u),q=i*sl(u),et=d>vi;if(et){var Pt=t.cornerRadius;Pt&&(r=LQ(Pt),v=r[0],g=r[1],m=r[2],_=r[3]);var Rt=qM(n-i)/2;if(y=ro(Rt,m),w=ro(Rt,_),T=ro(Rt,v),S=ro(Rt,g),k=P=Kh(y,w),C=A=Kh(T,S),(P>vi||A>vi)&&(M=n*Vu(u),D=n*sl(u),B=i*Vu(l),V=i*sl(l),d<Z9)){var wt=xQ(N,j,B,V,M,D,Z,q);if(wt){var St=N-wt[0],Ht=j-wt[1],Y=M-wt[0],it=D-wt[1],K=1/sl(MQ((St*Y+Ht*it)/(Sd(St*St+Ht*Ht)*Sd(Y*Y+it*it)))/2),pt=Sd(wt[0]*wt[0]+wt[1]*wt[1]);k=ro(P,(n-pt)/(K+1)),C=ro(A,(i-pt)/(K-1))}}}if(!et)e.moveTo(c+N,f+j);else if(k>vi){var Tt=ro(m,k),kt=ro(_,k),lt=Np(B,V,N,j,n,Tt,h),ft=Np(M,D,Z,q,n,kt,h);e.moveTo(c+lt.cx+lt.x0,f+lt.cy+lt.y0),k<P&&Tt===kt?e.arc(c+lt.cx,f+lt.cy,k,Or(lt.y0,lt.x0),Or(ft.y0,ft.x0),!h):(Tt>0&&e.arc(c+lt.cx,f+lt.cy,Tt,Or(lt.y0,lt.x0),Or(lt.y1,lt.x1),!h),e.arc(c,f,n,Or(lt.cy+lt.y1,lt.cx+lt.x1),Or(ft.cy+ft.y1,ft.cx+ft.x1),!h),kt>0&&e.arc(c+ft.cx,f+ft.cy,kt,Or(ft.y1,ft.x1),Or(ft.y0,ft.x0),!h))}else e.moveTo(c+N,f+j),e.arc(c,f,n,l,u,!h);if(!(i>vi)||!et)e.lineTo(c+Z,f+q);else if(C>vi){var Tt=ro(v,C),kt=ro(g,C),lt=Np(Z,q,M,D,i,-kt,h),ft=Np(N,j,B,V,i,-Tt,h);e.lineTo(c+lt.cx+lt.x0,f+lt.cy+lt.y0),C<A&&Tt===kt?e.arc(c+lt.cx,f+lt.cy,C,Or(lt.y0,lt.x0),Or(ft.y0,ft.x0),!h):(kt>0&&e.arc(c+lt.cx,f+lt.cy,kt,Or(lt.y0,lt.x0),Or(lt.y1,lt.x1),!h),e.arc(c,f,i,Or(lt.cy+lt.y1,lt.cx+lt.x1),Or(ft.cy+ft.y1,ft.cx+ft.x1),h),Tt>0&&e.arc(c+ft.cx,f+ft.cy,Tt,Or(ft.y1,ft.x1),Or(ft.y0,ft.x0),!h))}else e.lineTo(c+Z,f+q),e.arc(c,f,i,u,l,h)}e.closePath()}}}var OQ=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return e}(),K9=function(e){ke(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new OQ},t.prototype.buildPath=function(r,n){IQ(r,n)},t.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},t}(fe);K9.prototype.type="sector";const O0=K9;var RQ=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return e}(),J9=function(e){ke(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new RQ},t.prototype.buildPath=function(r,n){var i=n.cx,o=n.cy,a=Math.PI*2;r.moveTo(i+n.r,o),r.arc(i,o,n.r,0,a,!1),r.moveTo(i+n.r0,o),r.arc(i,o,n.r0,0,a,!0)},t}(fe);J9.prototype.type="ring";const Q9=J9;function DQ(e,t,r,n){var i=[],o=[],a=[],s=[],l,u,c,f;if(n){c=[1/0,1/0],f=[-1/0,-1/0];for(var h=0,d=e.length;h<d;h++)yc(c,c,e[h]),bc(f,f,e[h]);yc(c,c,n[0]),bc(f,f,n[1])}for(var h=0,d=e.length;h<d;h++){var p=e[h];if(r)l=e[h?h-1:d-1],u=e[(h+1)%d];else if(h===0||h===d-1){i.push(iZ(e[h]));continue}else l=e[h-1],u=e[h+1];j7(o,u,l),yy(o,o,t);var v=SS(p,l),g=SS(p,u),m=v+g;m!==0&&(v/=m,g/=m),yy(a,o,-v),yy(s,o,g);var _=zC([],p,a),y=zC([],p,s);n&&(bc(_,_,c),yc(_,_,f),bc(y,y,c),yc(y,y,f)),i.push(_),i.push(y)}return r&&i.push(i.shift()),i}function tN(e,t,r){var n=t.smooth,i=t.points;if(i&&i.length>=2){if(n){var o=DQ(i,n,r,t.smoothConstraint);e.moveTo(i[0][0],i[0][1]);for(var a=i.length,s=0;s<(r?a:a-1);s++){var l=o[s*2],u=o[s*2+1],c=i[(s+1)%a];e.bezierCurveTo(l[0],l[1],u[0],u[1],c[0],c[1])}}else{e.moveTo(i[0][0],i[0][1]);for(var s=1,f=i.length;s<f;s++)e.lineTo(i[s][0],i[s][1])}r&&e.closePath()}}var NQ=function(){function e(){this.points=null,this.smooth=0,this.smoothConstraint=null}return e}(),eN=function(e){ke(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new NQ},t.prototype.buildPath=function(r,n){tN(r,n,!0)},t}(fe);eN.prototype.type="polygon";const Qd=eN;var FQ=function(){function e(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return e}(),rN=function(e){ke(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new FQ},t.prototype.buildPath=function(r,n){tN(r,n,!1)},t}(fe);rN.prototype.type="polyline";const nN=rN;var BQ={},$Q=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}(),iN=function(e){ke(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new $Q},t.prototype.buildPath=function(r,n){var i,o,a,s;if(this.subPixelOptimize){var l=L9(BQ,n,this.style);i=l.x1,o=l.y1,a=l.x2,s=l.y2}else i=n.x1,o=n.y1,a=n.x2,s=n.y2;var u=n.percent;u!==0&&(r.moveTo(i,o),u<1&&(a=i*(1-u)+a*u,s=o*(1-u)+s*u),r.lineTo(a,s))},t.prototype.pointAt=function(r){var n=this.shape;return[n.x1*(1-r)+n.x2*r,n.y1*(1-r)+n.y2*r]},t}(fe);iN.prototype.type="line";const xs=iN;var cn=[],zQ=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return e}();function ZM(e,t,r){var n=e.cpx2,i=e.cpy2;return n!=null||i!=null?[(r?JC:or)(e.x1,e.cpx1,e.cpx2,e.x2,t),(r?JC:or)(e.y1,e.cpy1,e.cpy2,e.y2,t)]:[(r?QC:Fr)(e.x1,e.cpx1,e.x2,t),(r?QC:Fr)(e.y1,e.cpy1,e.y2,t)]}var oN=function(e){ke(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new zQ},t.prototype.buildPath=function(r,n){var i=n.x1,o=n.y1,a=n.x2,s=n.y2,l=n.cpx1,u=n.cpy1,c=n.cpx2,f=n.cpy2,h=n.percent;h!==0&&(r.moveTo(i,o),c==null||f==null?(h<1&&(Mm(i,l,a,h,cn),l=cn[1],a=cn[2],Mm(o,u,s,h,cn),u=cn[1],s=cn[2]),r.quadraticCurveTo(l,u,a,s)):(h<1&&(Cm(i,l,c,a,h,cn),l=cn[1],c=cn[2],a=cn[3],Cm(o,u,f,s,h,cn),u=cn[1],f=cn[2],s=cn[3]),r.bezierCurveTo(l,u,c,f,a,s)))},t.prototype.pointAt=function(r){return ZM(this.shape,r,!1)},t.prototype.tangentAt=function(r){var n=ZM(this.shape,r,!0);return MP(n,n)},t}(fe);oN.prototype.type="bezier-curve";const K1=oN;var VQ=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),aN=function(e){ke(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new VQ},t.prototype.buildPath=function(r,n){var i=n.cx,o=n.cy,a=Math.max(n.r,0),s=n.startAngle,l=n.endAngle,u=n.clockwise,c=Math.cos(s),f=Math.sin(s);r.moveTo(c*a+i,f*a+o),r.arc(i,o,a,s,l,!u)},t}(fe);aN.prototype.type="arc";const qP=aN;var UQ=function(e){ke(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="compound",r}return t.prototype._updatePathDirty=function(){for(var r=this.shape.paths,n=this.shapeChanged(),i=0;i<r.length;i++)n=n||r[i].shapeChanged();n&&this.dirtyShape()},t.prototype.beforeBrush=function(){this._updatePathDirty();for(var r=this.shape.paths||[],n=this.getGlobalScale(),i=0;i<r.length;i++)r[i].path||r[i].createPathProxy(),r[i].path.setScale(n[0],n[1],r[i].segmentIgnoreThreshold)},t.prototype.buildPath=function(r,n){for(var i=n.paths||[],o=0;o<i.length;o++)i[o].buildPath(r,i[o].shape,!0)},t.prototype.afterBrush=function(){for(var r=this.shape.paths||[],n=0;n<r.length;n++)r[n].pathUpdated()},t.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),fe.prototype.getBoundingRect.call(this)},t}(fe);const GQ=UQ;var jQ=function(){function e(t){this.colorStops=t||[]}return e.prototype.addColorStop=function(t,r){this.colorStops.push({offset:t,color:r})},e}();const sN=jQ;var WQ=function(e){ke(t,e);function t(r,n,i,o,a,s){var l=e.call(this,a)||this;return l.x=r==null?0:r,l.y=n==null?0:n,l.x2=i==null?1:i,l.y2=o==null?0:o,l.type="linear",l.global=s||!1,l}return t}(sN);const ZP=WQ;var HQ=function(e){ke(t,e);function t(r,n,i,o,a){var s=e.call(this,o)||this;return s.x=r==null?.5:r,s.y=n==null?.5:n,s.r=i==null?.5:i,s.type="radial",s.global=a||!1,s}return t}(sN);const XQ=HQ;var ll=[0,0],ul=[0,0],Fp=new xe,Bp=new xe,YQ=function(){function e(t,r){this._corners=[],this._axes=[],this._origin=[0,0];for(var n=0;n<4;n++)this._corners[n]=new xe;for(var n=0;n<2;n++)this._axes[n]=new xe;t&&this.fromBoundingRect(t,r)}return e.prototype.fromBoundingRect=function(t,r){var n=this._corners,i=this._axes,o=t.x,a=t.y,s=o+t.width,l=a+t.height;if(n[0].set(o,a),n[1].set(s,a),n[2].set(s,l),n[3].set(o,l),r)for(var u=0;u<4;u++)n[u].transform(r);xe.sub(i[0],n[1],n[0]),xe.sub(i[1],n[3],n[0]),i[0].normalize(),i[1].normalize();for(var u=0;u<2;u++)this._origin[u]=i[u].dot(n[0])},e.prototype.intersect=function(t,r){var n=!0,i=!r;return Fp.set(1/0,1/0),Bp.set(0,0),!this._intersectCheckOneSide(this,t,Fp,Bp,i,1)&&(n=!1,i)||!this._intersectCheckOneSide(t,this,Fp,Bp,i,-1)&&(n=!1,i)||i||xe.copy(r,n?Fp:Bp),n},e.prototype._intersectCheckOneSide=function(t,r,n,i,o,a){for(var s=!0,l=0;l<2;l++){var u=this._axes[l];if(this._getProjMinMaxOnAxis(l,t._corners,ll),this._getProjMinMaxOnAxis(l,r._corners,ul),ll[1]<ul[0]||ll[0]>ul[1]){if(s=!1,o)return s;var c=Math.abs(ul[0]-ll[1]),f=Math.abs(ll[0]-ul[1]);Math.min(c,f)>i.len()&&(c<f?xe.scale(i,u,-c*a):xe.scale(i,u,f*a))}else if(n){var c=Math.abs(ul[0]-ll[1]),f=Math.abs(ll[0]-ul[1]);Math.min(c,f)<n.len()&&(c<f?xe.scale(n,u,c*a):xe.scale(n,u,-f*a))}}return s},e.prototype._getProjMinMaxOnAxis=function(t,r,n){for(var i=this._axes[t],o=this._origin,a=r[0].dot(i)+o[t],s=a,l=a,u=1;u<r.length;u++){var c=r[u].dot(i)+o[t];s=Math.min(c,s),l=Math.max(c,l)}n[0]=s,n[1]=l},e}();const Dm=YQ;var qQ=[],ZQ=function(e){ke(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.notClear=!0,r.incremental=!0,r._displayables=[],r._temporaryDisplayables=[],r._cursor=0,r}return t.prototype.traverse=function(r,n){r.call(n,this)},t.prototype.useStyle=function(){this.style={}},t.prototype.getCursor=function(){return this._cursor},t.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},t.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},t.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},t.prototype.addDisplayable=function(r,n){n?this._temporaryDisplayables.push(r):this._displayables.push(r),this.markRedraw()},t.prototype.addDisplayables=function(r,n){n=n||!1;for(var i=0;i<r.length;i++)this.addDisplayable(r[i],n)},t.prototype.getDisplayables=function(){return this._displayables},t.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},t.prototype.eachPendingDisplayable=function(r){for(var n=this._cursor;n<this._displayables.length;n++)r&&r(this._displayables[n]);for(var n=0;n<this._temporaryDisplayables.length;n++)r&&r(this._temporaryDisplayables[n])},t.prototype.update=function(){this.updateTransform();for(var r=this._cursor;r<this._displayables.length;r++){var n=this._displayables[r];n.parent=this,n.update(),n.parent=null}for(var r=0;r<this._temporaryDisplayables.length;r++){var n=this._temporaryDisplayables[r];n.parent=this,n.update(),n.parent=null}},t.prototype.getBoundingRect=function(){if(!this._rect){for(var r=new ae(1/0,1/0,-1/0,-1/0),n=0;n<this._displayables.length;n++){var i=this._displayables[n],o=i.getBoundingRect().clone();i.needLocalTransform()&&o.applyTransform(i.getLocalTransform(qQ)),r.union(o)}this._rect=r}return this._rect},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect();if(o.contain(i[0],i[1]))for(var a=0;a<this._displayables.length;a++){var s=this._displayables[a];if(s.contain(r,n))return!0}return!1},t}(du);const KQ=ZQ;var JQ=Oe();function KP(e,t,r,n,i){var o;if(t&&t.ecModel){var a=t.ecModel.getUpdatePayload();o=a&&a.animation}var s=t&&t.isAnimationEnabled(),l=e==="update";if(s){var u=void 0,c=void 0,f=void 0;n?(u=qt(n.duration,200),c=qt(n.easing,"cubicOut"),f=0):(u=t.getShallow(l?"animationDurationUpdate":"animationDuration"),c=t.getShallow(l?"animationEasingUpdate":"animationEasing"),f=t.getShallow(l?"animationDelayUpdate":"animationDelay")),o&&(o.duration!=null&&(u=o.duration),o.easing!=null&&(c=o.easing),o.delay!=null&&(f=o.delay)),Ut(f)&&(f=f(r,i)),Ut(u)&&(u=u(r));var h={duration:u||0,delay:f,easing:c};return h}else return null}function JP(e,t,r,n,i,o,a){var s=!1,l;Ut(i)?(a=o,o=i,i=null):Ot(i)&&(o=i.cb,a=i.during,s=i.isFrom,l=i.removeOpt,i=i.dataIndex);var u=e==="leave";u||t.stopAnimation("leave");var c=KP(e,n,i,u?l||{}:null,n&&n.getAnimationDelayParams?n.getAnimationDelayParams(t,i):null);if(c&&c.duration>0){var f=c.duration,h=c.delay,d=c.easing,p={duration:f,delay:h||0,easing:d,done:o,force:!!o||!!a,setToFinal:!u,scope:e,during:a};s?t.animateFrom(r,p):t.animateTo(r,p)}else t.stopAnimation(),!s&&t.attr(r),a&&a(1),o&&o()}function dr(e,t,r,n,i,o){JP("update",e,t,r,n,i,o)}function xo(e,t,r,n,i,o){JP("enter",e,t,r,n,i,o)}function Td(e){if(!e.__zr)return!0;for(var t=0;t<e.animators.length;t++){var r=e.animators[t];if(r.scope==="leave")return!0}return!1}function eu(e,t,r,n,i,o){Td(e)||JP("leave",e,t,r,n,i,o)}function KM(e,t,r,n){e.removeTextContent(),e.removeTextGuideLine(),eu(e,{style:{opacity:0}},t,r,n)}function KS(e,t,r){function n(){e.parent&&e.parent.remove(e)}e.isGroup?e.traverse(function(i){i.isGroup||KM(i,t,r,n)}):KM(e,t,r,n)}function lN(e){JQ(e).oldStyle=e.style}var Nm=Math.max,Fm=Math.min,JS={};function QQ(e){return fe.extend(e)}var ttt=EQ;function ett(e,t){return ttt(e,t)}function ji(e,t){JS[e]=t}function uN(e){if(JS.hasOwnProperty(e))return JS[e]}function J1(e,t,r,n){var i=PQ(e,t);return r&&(n==="center"&&(r=fN(r,i.getBoundingRect())),hN(i,r)),i}function cN(e,t,r){var n=new ka({style:{image:e,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(i){if(r==="center"){var o={width:i.width,height:i.height};n.setStyle(fN(t,o))}}});return n}function fN(e,t){var r=t.width/t.height,n=e.height*r,i;n<=e.width?i=e.height:(n=e.width,i=n/r);var o=e.x+e.width/2,a=e.y+e.height/2;return{x:o-n/2,y:a-i/2,width:n,height:i}}var rtt=kQ;function hN(e,t){if(!!e.applyTransform){var r=e.getBoundingRect(),n=r.calculateTransform(t);e.applyTransform(n)}}function t0(e,t){return L9(e,e,{lineWidth:t}),e}function ntt(e){return I9(e.shape,e.shape,e.style),e}var itt=Ll;function jg(e,t){for(var r=LP([]);e&&e!==t;)Oc(r,e.getLocalTransform(),r),e=e.parent;return r}function Dc(e,t,r){return t&&!Wr(t)&&(t=xl.getLocalTransform(t)),r&&(t=W1([],t)),rn([],e,t)}function dN(e,t,r){var n=t[4]===0||t[5]===0||t[0]===0?1:Math.abs(2*t[4]/t[0]),i=t[4]===0||t[5]===0||t[2]===0?1:Math.abs(2*t[4]/t[2]),o=[e==="left"?-n:e==="right"?n:0,e==="top"?-i:e==="bottom"?i:0];return o=Dc(o,t,r),Math.abs(o[0])>Math.abs(o[1])?o[0]>0?"right":"left":o[1]>0?"bottom":"top"}function JM(e){return!e.isGroup}function ott(e){return e.shape!=null}function pN(e,t,r){if(!e||!t)return;function n(a){var s={};return a.traverse(function(l){JM(l)&&l.anid&&(s[l.anid]=l)}),s}function i(a){var s={x:a.x,y:a.y,rotation:a.rotation};return ott(a)&&(s.shape=at({},a.shape)),s}var o=n(e);t.traverse(function(a){if(JM(a)&&a.anid){var s=o[a.anid];if(s){var l=i(a);a.attr(i(s)),dr(a,l,r,ie(a).dataIndex)}}})}function att(e,t){return Ct(e,function(r){var n=r[0];n=Nm(n,t.x),n=Fm(n,t.x+t.width);var i=r[1];return i=Nm(i,t.y),i=Fm(i,t.y+t.height),[n,i]})}function stt(e,t){var r=Nm(e.x,t.x),n=Fm(e.x+e.width,t.x+t.width),i=Nm(e.y,t.y),o=Fm(e.y+e.height,t.y+t.height);if(n>=r&&o>=i)return{x:r,y:i,width:n-r,height:o-i}}function QP(e,t,r){var n=at({rectHover:!0},t),i=n.style={strokeNoScale:!0};if(r=r||{x:-1,y:-1,width:2,height:2},e)return e.indexOf("image://")===0?(i.image=e.slice(8),te(i,r),new ka(n)):J1(e.replace("path://",""),n,r,"center")}function ltt(e,t,r,n,i){for(var o=0,a=i[i.length-1];o<i.length;o++){var s=i[o];if(vN(e,t,r,n,s[0],s[1],a[0],a[1]))return!0;a=s}}function vN(e,t,r,n,i,o,a,s){var l=r-e,u=n-t,c=a-i,f=s-o,h=i2(c,f,l,u);if(utt(h))return!1;var d=e-i,p=t-o,v=i2(d,p,l,u)/h;if(v<0||v>1)return!1;var g=i2(d,p,c,f)/h;return!(g<0||g>1)}function i2(e,t,r,n){return e*n-r*t}function utt(e){return e<=1e-6&&e>=-1e-6}function tE(e){var t=e.itemTooltipOption,r=e.componentModel,n=e.itemName,i=Et(t)?{formatter:t}:t,o=r.mainType,a=r.componentIndex,s={componentType:o,name:n,$vars:["name"]};s[o+"Index"]=a;var l=e.formatterParamsExtra;l&&F(ge(l),function(c){dt(s,c)||(s[c]=l[c],s.$vars.push(c))});var u=ie(e.el);u.componentMainType=o,u.componentIndex=a,u.tooltipConfig={name:n,option:te({content:n,formatterParams:s},i)}}function QM(e,t){var r;e.isGroup&&(r=t(e)),r||e.traverse(t)}function vf(e,t){if(e)if(ct(e))for(var r=0;r<e.length;r++)QM(e[r],t);else QM(e,t)}ji("circle",YP);ji("ellipse",q9);ji("sector",O0);ji("ring",Q9);ji("polygon",Qd);ji("polyline",nN);ji("rect",Ke);ji("line",xs);ji("bezierCurve",K1);ji("arc",qP);const ctt=Object.freeze(Object.defineProperty({__proto__:null,updateProps:dr,initProps:xo,removeElement:eu,removeElementWithFadeOut:KS,isElementRemoved:Td,extendShape:QQ,extendPath:ett,registerShape:ji,getShapeClass:uN,makePath:J1,makeImage:cN,mergePath:rtt,resizePath:hN,subPixelOptimizeLine:t0,subPixelOptimizeRect:ntt,subPixelOptimize:itt,getTransform:jg,applyTransform:Dc,transformDirection:dN,groupTransition:pN,clipPointsByRect:att,clipRectByRect:stt,createIcon:QP,linePolygonIntersect:ltt,lineLineIntersect:vN,setTooltipConfig:tE,traverseElements:vf,Group:De,Image:ka,Text:Je,Circle:YP,Ellipse:q9,Sector:O0,Ring:Q9,Polygon:Qd,Polyline:nN,Rect:Ke,Line:xs,BezierCurve:K1,Arc:qP,IncrementalDisplayable:KQ,CompoundPath:GQ,LinearGradient:ZP,RadialGradient:XQ,BoundingRect:ae,OrientedBoundingRect:Dm,Point:xe,Path:fe},Symbol.toStringTag,{value:"Module"}));var Q1={};function ftt(e,t){for(var r=0;r<ii.length;r++){var n=ii[r],i=t[n],o=e.ensureState(n);o.style=o.style||{},o.style.text=i}var a=e.currentStates.slice();e.clearStates(!0),e.setStyle({text:t.normal}),e.useStates(a,!0)}function t4(e,t,r){var n=e.labelFetcher,i=e.labelDataIndex,o=e.labelDimIndex,a=t.normal,s;n&&(s=n.getFormattedLabel(i,"normal",null,o,a&&a.get("formatter"),r!=null?{interpolatedValue:r}:null)),s==null&&(s=Ut(e.defaultText)?e.defaultText(i,e,r):e.defaultText);for(var l={normal:s},u=0;u<ii.length;u++){var c=ii[u],f=t[c];l[c]=qt(n?n.getFormattedLabel(i,c,null,o,f&&f.get("formatter")):null,s)}return l}function gf(e,t,r,n){r=r||Q1;for(var i=e instanceof Je,o=!1,a=0;a<NM.length;a++){var s=t[NM[a]];if(s&&s.getShallow("show")){o=!0;break}}var l=i?e:e.getTextContent();if(o){i||(l||(l=new Je,e.setTextContent(l)),e.stateProxy&&(l.stateProxy=e.stateProxy));var u=t4(r,t),c=t.normal,f=!!c.getShallow("show"),h=mn(c,n&&n.normal,r,!1,!i);h.text=u.normal,i||e.setTextConfig(Bm(c,r,!1));for(var a=0;a<ii.length;a++){var d=ii[a],s=t[d];if(s){var p=l.ensureState(d),v=!!qt(s.getShallow("show"),f);if(v!==f&&(p.ignore=!v),p.style=mn(s,n&&n[d],r,!0,!i),p.style.text=u[d],!i){var g=e.ensureState(d);g.textConfig=Bm(s,r,!0)}}}l.silent=!!c.getShallow("silent"),l.style.x!=null&&(h.x=l.style.x),l.style.y!=null&&(h.y=l.style.y),l.ignore=!f,l.useStyle(h),l.dirty(),r.enableTextSetter&&(t_(l).setLabelText=function(m){var _=t4(r,t,m);ftt(l,_)})}else l&&(l.ignore=!0);e.dirty()}function pu(e,t){t=t||"label";for(var r={normal:e.getModel(t)},n=0;n<ii.length;n++){var i=ii[n];r[i]=e.getModel([i,t])}return r}function mn(e,t,r,n,i){var o={};return htt(o,e,r,n,i),t&&at(o,t),o}function Bm(e,t,r){t=t||{};var n={},i,o=e.getShallow("rotate"),a=qt(e.getShallow("distance"),r?null:5),s=e.getShallow("offset");return i=e.getShallow("position")||(r?null:"inside"),i==="outside"&&(i=t.defaultOutsidePosition||"top"),i!=null&&(n.position=i),s!=null&&(n.offset=s),o!=null&&(o*=Math.PI/180,n.rotation=o),a!=null&&(n.distance=a),n.outsideFill=e.get("color")==="inherit"?t.inheritColor||null:"auto",n}function htt(e,t,r,n,i){r=r||Q1;var o=t.ecModel,a=o&&o.option.textStyle,s=dtt(t),l;if(s){l={};for(var u in s)if(s.hasOwnProperty(u)){var c=t.getModel(["rich",u]);i4(l[u]={},c,a,r,n,i,!1,!0)}}l&&(e.rich=l);var f=t.get("overflow");f&&(e.overflow=f);var h=t.get("minMargin");h!=null&&(e.margin=h),i4(e,t,a,r,n,i,!0,!1)}function dtt(e){for(var t;e&&e!==e.ecModel;){var r=(e.option||Q1).rich;if(r){t=t||{};for(var n=ge(r),i=0;i<n.length;i++){var o=n[i];t[o]=1}}e=e.parentModel}return t}var e4=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],r4=["align","lineHeight","width","height","tag","verticalAlign"],n4=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function i4(e,t,r,n,i,o,a,s){r=!i&&r||Q1;var l=n&&n.inheritColor,u=t.getShallow("color"),c=t.getShallow("textBorderColor"),f=qt(t.getShallow("opacity"),r.opacity);(u==="inherit"||u==="auto")&&(l?u=l:u=null),(c==="inherit"||c==="auto")&&(l?c=l:c=null),o||(u=u||r.color,c=c||r.textBorderColor),u!=null&&(e.fill=u),c!=null&&(e.stroke=c);var h=qt(t.getShallow("textBorderWidth"),r.textBorderWidth);h!=null&&(e.lineWidth=h);var d=qt(t.getShallow("textBorderType"),r.textBorderType);d!=null&&(e.lineDash=d);var p=qt(t.getShallow("textBorderDashOffset"),r.textBorderDashOffset);p!=null&&(e.lineDashOffset=p),!i&&f==null&&!s&&(f=n&&n.defaultOpacity),f!=null&&(e.opacity=f),!i&&!o&&e.fill==null&&n.inheritColor&&(e.fill=n.inheritColor);for(var v=0;v<e4.length;v++){var g=e4[v],m=qt(t.getShallow(g),r[g]);m!=null&&(e[g]=m)}for(var v=0;v<r4.length;v++){var g=r4[v],m=t.getShallow(g);m!=null&&(e[g]=m)}if(e.verticalAlign==null){var _=t.getShallow("baseline");_!=null&&(e.verticalAlign=_)}if(!a||!n.disableBox){for(var v=0;v<n4.length;v++){var g=n4[v],m=t.getShallow(g);m!=null&&(e[g]=m)}var y=t.getShallow("borderType");y!=null&&(e.borderDash=y),(e.backgroundColor==="auto"||e.backgroundColor==="inherit")&&l&&(e.backgroundColor=l),(e.borderColor==="auto"||e.borderColor==="inherit")&&l&&(e.borderColor=l)}}function gN(e,t){var r=t&&t.getModel("textStyle");return So([e.fontStyle||r&&r.getShallow("fontStyle")||"",e.fontWeight||r&&r.getShallow("fontWeight")||"",(e.fontSize||r&&r.getShallow("fontSize")||12)+"px",e.fontFamily||r&&r.getShallow("fontFamily")||"sans-serif"].join(" "))}var t_=Oe();function ptt(e,t,r,n){if(!!e){var i=t_(e);i.prevValue=i.value,i.value=r;var o=t.normal;i.valueAnimation=o.get("valueAnimation"),i.valueAnimation&&(i.precision=o.get("precision"),i.defaultInterpolatedText=n,i.statesModels=t)}}var vtt=["textStyle","color"],o2=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],a2=new Je,gtt=function(){function e(){}return e.prototype.getTextColor=function(t){var r=this.ecModel;return this.getShallow("color")||(!t&&r?r.get(vtt):null)},e.prototype.getFont=function(){return gN({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},e.prototype.getTextRect=function(t){for(var r={text:t,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},n=0;n<o2.length;n++)r[o2[n]]=this.getShallow(o2[n]);return a2.useStyle(r),a2.update(),a2.getBoundingRect()},e}();const mtt=gtt;var mN=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],_tt=qd(mN),ytt=function(){function e(){}return e.prototype.getLineStyle=function(t){return _tt(this,t)},e}(),_N=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],btt=qd(_N),wtt=function(){function e(){}return e.prototype.getItemStyle=function(t,r){return btt(this,t,r)},e}(),vu=function(){function e(t,r,n){this.parentModel=r,this.ecModel=n,this.option=t}return e.prototype.init=function(t,r,n){},e.prototype.mergeOption=function(t,r){oe(this.option,t,!0)},e.prototype.get=function(t,r){return t==null?this.option:this._doGet(this.parsePath(t),!r&&this.parentModel)},e.prototype.getShallow=function(t,r){var n=this.option,i=n==null?n:n[t];if(i==null&&!r){var o=this.parentModel;o&&(i=o.getShallow(t))}return i},e.prototype.getModel=function(t,r){var n=t!=null,i=n?this.parsePath(t):null,o=n?this._doGet(i):this.option;return r=r||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(i)),new e(o,r,this.ecModel)},e.prototype.isEmpty=function(){return this.option==null},e.prototype.restoreData=function(){},e.prototype.clone=function(){var t=this.constructor;return new t(zt(this.option))},e.prototype.parsePath=function(t){return typeof t=="string"?t.split("."):t},e.prototype.resolveParentPath=function(t){return t},e.prototype.isAnimationEnabled=function(){if(!Xt.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},e.prototype._doGet=function(t,r){var n=this.option;if(!t)return n;for(var i=0;i<t.length&&!(!!t[i]&&(n=n&&typeof n=="object"?n[t[i]]:null,n==null));i++);return n==null&&r&&(n=r._doGet(this.resolveParentPath(t),r.parentModel)),n},e}();zP(vu);rJ(vu);Ui(vu,ytt);Ui(vu,wtt);Ui(vu,sJ);Ui(vu,mtt);const Pr=vu;var Stt=Math.round(Math.random()*10);function e_(e){return[e||"",Stt++].join("_")}function Ttt(e){var t={};e.registerSubTypeDefaulter=function(r,n){var i=Po(r);t[i.main]=n},e.determineSubType=function(r,n){var i=n.type;if(!i){var o=Po(r).main;e.hasSubTypes(r)&&t[o]&&(i=t[o](n))}return i}}function Ptt(e,t){e.topologicalTravel=function(o,a,s,l){if(!o.length)return;var u=r(a),c=u.graph,f=u.noEntryList,h={};for(F(o,function(_){h[_]=!0});f.length;){var d=f.pop(),p=c[d],v=!!h[d];v&&(s.call(l,d,p.originalDeps.slice()),delete h[d]),F(p.successor,v?m:g)}F(h,function(){var _="";throw new Error(_)});function g(_){c[_].entryCount--,c[_].entryCount===0&&f.push(_)}function m(_){h[_]=!0,g(_)}};function r(o){var a={},s=[];return F(o,function(l){var u=n(a,l),c=u.originalDeps=t(l),f=i(c,o);u.entryCount=f.length,u.entryCount===0&&s.push(l),F(f,function(h){ue(u.predecessor,h)<0&&u.predecessor.push(h);var d=n(a,h);ue(d.successor,h)<0&&d.successor.push(l)})}),{graph:a,noEntryList:s}}function n(o,a){return o[a]||(o[a]={predecessor:[],successor:[]}),o[a]}function i(o,a){var s=[];return F(o,function(l){ue(a,l)>=0&&s.push(l)}),s}}function r_(e,t){return oe(oe({},e,!0),t,!0)}const Ett={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},ktt={time:{month:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"],monthAbbr:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],dayOfWeek:["\u661F\u671F\u65E5","\u661F\u671F\u4E00","\u661F\u671F\u4E8C","\u661F\u671F\u4E09","\u661F\u671F\u56DB","\u661F\u671F\u4E94","\u661F\u671F\u516D"],dayOfWeekAbbr:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"]},legend:{selector:{all:"\u5168\u9009",inverse:"\u53CD\u9009"}},toolbox:{brush:{title:{rect:"\u77E9\u5F62\u9009\u62E9",polygon:"\u5708\u9009",lineX:"\u6A2A\u5411\u9009\u62E9",lineY:"\u7EB5\u5411\u9009\u62E9",keep:"\u4FDD\u6301\u9009\u62E9",clear:"\u6E05\u9664\u9009\u62E9"}},dataView:{title:"\u6570\u636E\u89C6\u56FE",lang:["\u6570\u636E\u89C6\u56FE","\u5173\u95ED","\u5237\u65B0"]},dataZoom:{title:{zoom:"\u533A\u57DF\u7F29\u653E",back:"\u533A\u57DF\u7F29\u653E\u8FD8\u539F"}},magicType:{title:{line:"\u5207\u6362\u4E3A\u6298\u7EBF\u56FE",bar:"\u5207\u6362\u4E3A\u67F1\u72B6\u56FE",stack:"\u5207\u6362\u4E3A\u5806\u53E0",tiled:"\u5207\u6362\u4E3A\u5E73\u94FA"}},restore:{title:"\u8FD8\u539F"},saveAsImage:{title:"\u4FDD\u5B58\u4E3A\u56FE\u7247",lang:["\u53F3\u952E\u53E6\u5B58\u4E3A\u56FE\u7247"]}},series:{typeNames:{pie:"\u997C\u56FE",bar:"\u67F1\u72B6\u56FE",line:"\u6298\u7EBF\u56FE",scatter:"\u6563\u70B9\u56FE",effectScatter:"\u6D9F\u6F2A\u6563\u70B9\u56FE",radar:"\u96F7\u8FBE\u56FE",tree:"\u6811\u56FE",treemap:"\u77E9\u5F62\u6811\u56FE",boxplot:"\u7BB1\u578B\u56FE",candlestick:"K\u7EBF\u56FE",k:"K\u7EBF\u56FE",heatmap:"\u70ED\u529B\u56FE",map:"\u5730\u56FE",parallel:"\u5E73\u884C\u5750\u6807\u56FE",lines:"\u7EBF\u56FE",graph:"\u5173\u7CFB\u56FE",sankey:"\u6851\u57FA\u56FE",funnel:"\u6F0F\u6597\u56FE",gauge:"\u4EEA\u8868\u76D8\u56FE",pictorialBar:"\u8C61\u5F62\u67F1\u56FE",themeRiver:"\u4E3B\u9898\u6CB3\u6D41\u56FE",sunburst:"\u65ED\u65E5\u56FE"}},aria:{general:{withTitle:"\u8FD9\u662F\u4E00\u4E2A\u5173\u4E8E\u201C{title}\u201D\u7684\u56FE\u8868\u3002",withoutTitle:"\u8FD9\u662F\u4E00\u4E2A\u56FE\u8868\uFF0C"},series:{single:{prefix:"",withName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\uFF0C\u8868\u793A{seriesName}\u3002",withoutName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\u3002"},multiple:{prefix:"\u5B83\u7531{seriesCount}\u4E2A\u56FE\u8868\u7CFB\u5217\u7EC4\u6210\u3002",withName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A\u8868\u793A{seriesName}\u7684{seriesType}\uFF0C",withoutName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A{seriesType}\uFF0C",separator:{middle:"\uFF1B",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636E\u662F\u2014\u2014",partialData:"\u5176\u4E2D\uFF0C\u524D{displayCnt}\u9879\u662F\u2014\u2014",withName:"{name}\u7684\u6570\u636E\u662F{value}",withoutName:"{value}",separator:{middle:"\uFF0C",end:""}}}};var $m="ZH",eE="EN",e0=eE,Wg={},rE={},yN=Xt.domSupported?function(){var e=(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase();return e.indexOf($m)>-1?$m:e0}():e0;function bN(e,t){e=e.toUpperCase(),rE[e]=new Pr(t),Wg[e]=t}function Att(e){if(Et(e)){var t=Wg[e.toUpperCase()]||{};return e===$m||e===eE?zt(t):oe(zt(t),zt(Wg[e0]),!1)}else return oe(zt(e),zt(Wg[e0]),!1)}function Ctt(e){return rE[e]}function Mtt(){return rE[e0]}bN(eE,Ett);bN($m,ktt);var nE=1e3,iE=nE*60,Pd=iE*60,Jn=Pd*24,o4=Jn*365,Jh={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},$p="{yyyy}-{MM}-{dd}",a4={year:"{yyyy}",month:"{yyyy}-{MM}",day:$p,hour:$p+" "+Jh.hour,minute:$p+" "+Jh.minute,second:$p+" "+Jh.second,millisecond:Jh.none},s2=["year","month","day","hour","minute","second","millisecond"],wN=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function cl(e,t){return e+="","0000".substr(0,t-e.length)+e}function Nc(e){switch(e){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return e}}function xtt(e){return e===Nc(e)}function Ltt(e){switch(e){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function n_(e,t,r,n){var i=_a(e),o=i[oE(r)](),a=i[Fc(r)]()+1,s=Math.floor((a-1)/3)+1,l=i[i_(r)](),u=i["get"+(r?"UTC":"")+"Day"](),c=i[r0(r)](),f=(c-1)%12+1,h=i[o_(r)](),d=i[a_(r)](),p=i[s_(r)](),v=n instanceof Pr?n:Ctt(n||yN)||Mtt(),g=v.getModel("time"),m=g.get("month"),_=g.get("monthAbbr"),y=g.get("dayOfWeek"),w=g.get("dayOfWeekAbbr");return(t||"").replace(/{yyyy}/g,o+"").replace(/{yy}/g,o%100+"").replace(/{Q}/g,s+"").replace(/{MMMM}/g,m[a-1]).replace(/{MMM}/g,_[a-1]).replace(/{MM}/g,cl(a,2)).replace(/{M}/g,a+"").replace(/{dd}/g,cl(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,y[u]).replace(/{ee}/g,w[u]).replace(/{e}/g,u+"").replace(/{HH}/g,cl(c,2)).replace(/{H}/g,c+"").replace(/{hh}/g,cl(f+"",2)).replace(/{h}/g,f+"").replace(/{mm}/g,cl(h,2)).replace(/{m}/g,h+"").replace(/{ss}/g,cl(d,2)).replace(/{s}/g,d+"").replace(/{SSS}/g,cl(p,3)).replace(/{S}/g,p+"")}function Itt(e,t,r,n,i){var o=null;if(Et(r))o=r;else if(Ut(r))o=r(e.value,t,{level:e.level});else{var a=at({},Jh);if(e.level>0)for(var s=0;s<s2.length;++s)a[s2[s]]="{primary|"+a[s2[s]]+"}";var l=r?r.inherit===!1?r:te(r,a):a,u=SN(e.value,i);if(l[u])o=l[u];else if(l.inherit){for(var c=wN.indexOf(u),s=c-1;s>=0;--s)if(l[u]){o=l[u];break}o=o||a.none}if(ct(o)){var f=e.level==null?0:e.level>=0?e.level:o.length+e.level;f=Math.min(f,o.length-1),o=o[f]}}return n_(new Date(e.value),o,i,n)}function SN(e,t){var r=_a(e),n=r[Fc(t)]()+1,i=r[i_(t)](),o=r[r0(t)](),a=r[o_(t)](),s=r[a_(t)](),l=r[s_(t)](),u=l===0,c=u&&s===0,f=c&&a===0,h=f&&o===0,d=h&&i===1,p=d&&n===1;return p?"year":d?"month":h?"day":f?"hour":c?"minute":u?"second":"millisecond"}function s4(e,t,r){var n=we(e)?_a(e):e;switch(t=t||SN(e,r),t){case"year":return n[oE(r)]();case"half-year":return n[Fc(r)]()>=6?1:0;case"quarter":return Math.floor((n[Fc(r)]()+1)/4);case"month":return n[Fc(r)]();case"day":return n[i_(r)]();case"half-day":return n[r0(r)]()/24;case"hour":return n[r0(r)]();case"minute":return n[o_(r)]();case"second":return n[a_(r)]();case"millisecond":return n[s_(r)]()}}function oE(e){return e?"getUTCFullYear":"getFullYear"}function Fc(e){return e?"getUTCMonth":"getMonth"}function i_(e){return e?"getUTCDate":"getDate"}function r0(e){return e?"getUTCHours":"getHours"}function o_(e){return e?"getUTCMinutes":"getMinutes"}function a_(e){return e?"getUTCSeconds":"getSeconds"}function s_(e){return e?"getUTCMilliseconds":"getMilliseconds"}function Ott(e){return e?"setUTCFullYear":"setFullYear"}function TN(e){return e?"setUTCMonth":"setMonth"}function PN(e){return e?"setUTCDate":"setDate"}function EN(e){return e?"setUTCHours":"setHours"}function kN(e){return e?"setUTCMinutes":"setMinutes"}function AN(e){return e?"setUTCSeconds":"setSeconds"}function CN(e){return e?"setUTCMilliseconds":"setMilliseconds"}function MN(e){if(!RK(e))return Et(e)?e:"-";var t=(e+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function xN(e,t){return e=(e||"").toLowerCase().replace(/-(.)/g,function(r,n){return n.toUpperCase()}),t&&e&&(e=e.charAt(0).toUpperCase()+e.slice(1)),e}var R0=z7;function QS(e,t,r){var n="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function i(c){return c&&So(c)?c:"-"}function o(c){return!!(c!=null&&!isNaN(c)&&isFinite(c))}var a=t==="time",s=e instanceof Date;if(a||s){var l=a?_a(e):e;if(isNaN(+l)){if(s)return"-"}else return n_(l,n,r)}if(t==="ordinal")return bS(e)?i(e):we(e)&&o(e)?e+"":"-";var u=Ms(e);return o(u)?MN(u):bS(e)?i(e):typeof e=="boolean"?e+"":"-"}var l4=["a","b","c","d","e","f","g"],l2=function(e,t){return"{"+e+(t==null?"":t)+"}"};function LN(e,t,r){ct(t)||(t=[t]);var n=t.length;if(!n)return"";for(var i=t[0].$vars||[],o=0;o<i.length;o++){var a=l4[o];e=e.replace(l2(a),l2(a,0))}for(var s=0;s<n;s++)for(var l=0;l<i.length;l++){var u=t[s][i[l]];e=e.replace(l2(l4[l],s),r?Zn(u):u)}return e}function Rtt(e,t){var r=Et(e)?{color:e,extraCssText:t}:e||{},n=r.color,i=r.type;t=r.extraCssText;var o=r.renderMode||"html";if(!n)return"";if(o==="html")return i==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Zn(n)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+Zn(n)+";"+(t||"")+'"></span>';var a=r.markerId||"markerX";return{renderMode:o,content:"{"+a+"|}  ",style:i==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:n}:{width:10,height:10,borderRadius:5,backgroundColor:n}}}function ru(e,t){return t=t||"transparent",Et(e)?e:Ot(e)&&e.colorStops&&(e.colorStops[0]||{}).color||t}function u4(e,t){if(t==="_blank"||t==="blank"){var r=window.open();r.opener=null,r.location.href=e}else window.open(e,t)}var Hg=F,Dtt=["left","right","top","bottom","width","height"],zp=[["width","left","right"],["height","top","bottom"]];function aE(e,t,r,n,i){var o=0,a=0;n==null&&(n=1/0),i==null&&(i=1/0);var s=0;t.eachChild(function(l,u){var c=l.getBoundingRect(),f=t.childAt(u+1),h=f&&f.getBoundingRect(),d,p;if(e==="horizontal"){var v=c.width+(h?-h.x+c.x:0);d=o+v,d>n||l.newline?(o=0,d=v,a+=s+r,s=c.height):s=Math.max(s,c.height)}else{var g=c.height+(h?-h.y+c.y:0);p=a+g,p>i||l.newline?(o+=s+r,a=0,p=g,s=c.width):s=Math.max(s,c.width)}l.newline||(l.x=o,l.y=a,l.markRedraw(),e==="horizontal"?o=d+r:a=p+r)})}var Bc=aE;be(aE,"vertical");be(aE,"horizontal");function Ls(e,t,r){r=R0(r||0);var n=t.width,i=t.height,o=We(e.left,n),a=We(e.top,i),s=We(e.right,n),l=We(e.bottom,i),u=We(e.width,n),c=We(e.height,i),f=r[2]+r[0],h=r[1]+r[3],d=e.aspect;switch(isNaN(u)&&(u=n-s-h-o),isNaN(c)&&(c=i-l-f-a),d!=null&&(isNaN(u)&&isNaN(c)&&(d>n/i?u=n*.8:c=i*.8),isNaN(u)&&(u=d*c),isNaN(c)&&(c=u/d)),isNaN(o)&&(o=n-s-u-h),isNaN(a)&&(a=i-l-c-f),e.left||e.right){case"center":o=n/2-u/2-r[3];break;case"right":o=n-u-h;break}switch(e.top||e.bottom){case"middle":case"center":a=i/2-c/2-r[0];break;case"bottom":a=i-c-f;break}o=o||0,a=a||0,isNaN(u)&&(u=n-h-o-(s||0)),isNaN(c)&&(c=i-f-a-(l||0));var p=new ae(o+r[3],a+r[0],u,c);return p.margin=r,p}function Ntt(e,t,r,n,i,o){var a=!i||!i.hv||i.hv[0],s=!i||!i.hv||i.hv[1],l=i&&i.boundingMode||"all";if(o=o||e,o.x=e.x,o.y=e.y,!a&&!s)return!1;var u;if(l==="raw")u=e.type==="group"?new ae(0,0,+t.width||0,+t.height||0):e.getBoundingRect();else if(u=e.getBoundingRect(),e.needLocalTransform()){var c=e.getLocalTransform();u=u.clone(),u.applyTransform(c)}var f=Ls(te({width:u.width,height:u.height},t),r,n),h=a?f.x-u.x:0,d=s?f.y-u.y:0;return l==="raw"?(o.x=h,o.y=d):(o.x+=h,o.y+=d),o===e&&e.markRedraw(),!0}function n0(e){var t=e.layoutMode||e.constructor.layoutMode;return Ot(t)?t:t?{type:t}:null}function Zc(e,t,r){var n=r&&r.ignoreSize;!ct(n)&&(n=[n,n]);var i=a(zp[0],0),o=a(zp[1],1);u(zp[0],e,i),u(zp[1],e,o);function a(c,f){var h={},d=0,p={},v=0,g=2;if(Hg(c,function(y){p[y]=e[y]}),Hg(c,function(y){s(t,y)&&(h[y]=p[y]=t[y]),l(h,y)&&d++,l(p,y)&&v++}),n[f])return l(t,c[1])?p[c[2]]=null:l(t,c[2])&&(p[c[1]]=null),p;if(v===g||!d)return p;if(d>=g)return h;for(var m=0;m<c.length;m++){var _=c[m];if(!s(h,_)&&s(e,_)){h[_]=e[_];break}}return h}function s(c,f){return c.hasOwnProperty(f)}function l(c,f){return c[f]!=null&&c[f]!=="auto"}function u(c,f,h){Hg(c,function(d){f[d]=h[d]})}}function l_(e){return Ftt({},e)}function Ftt(e,t){return t&&e&&Hg(Dtt,function(r){t.hasOwnProperty(r)&&(e[r]=t[r])}),e}var Btt=Oe(),mf=function(e){_t(t,e);function t(r,n,i){var o=e.call(this,r,n,i)||this;return o.uid=e_("ec_cpt_model"),o}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i)},t.prototype.mergeDefaultAndTheme=function(r,n){var i=n0(this),o=i?l_(r):{},a=n.getTheme();oe(r,a.get(this.mainType)),oe(r,this.getDefaultOption()),i&&Zc(r,o,i)},t.prototype.mergeOption=function(r,n){oe(this.option,r,!0);var i=n0(this);i&&Zc(this.option,r,i)},t.prototype.optionUpdated=function(r,n){},t.prototype.getDefaultOption=function(){var r=this.constructor;if(!QK(r))return r.defaultOption;var n=Btt(this);if(!n.defaultOption){for(var i=[],o=r;o;){var a=o.prototype.defaultOption;a&&i.push(a),o=o.superClass}for(var s={},l=i.length-1;l>=0;l--)s=oe(s,i[l],!0);n.defaultOption=s}return n.defaultOption},t.prototype.getReferringComponents=function(r,n){var i=r+"Index",o=r+"Id";return L0(this.ecModel,r,{index:this.get(i,!0),id:this.get(o,!0)},n)},t.prototype.getBoxLayoutParams=function(){var r=this;return{left:r.get("left"),top:r.get("top"),right:r.get("right"),bottom:r.get("bottom"),width:r.get("width"),height:r.get("height")}},t.prototype.getZLevelKey=function(){return""},t.prototype.setZLevel=function(r){this.option.zlevel=r},t.protoInitialize=function(){var r=t.prototype;r.type="component",r.id="",r.name="",r.mainType="",r.subType="",r.componentIndex=0}(),t}(Pr);S9(mf,Pr);H1(mf);Ttt(mf);Ptt(mf,$tt);function $tt(e){var t=[];return F(mf.getClassesByMainType(e),function(r){t=t.concat(r.dependencies||r.prototype.dependencies||[])}),t=Ct(t,function(r){return Po(r).main}),e!=="dataset"&&ue(t,"dataset")<=0&&t.unshift("dataset"),t}const Ce=mf;var IN="";typeof navigator<"u"&&(IN=navigator.platform||"");var Uu="rgba(0, 0, 0, 0.2)";const ztt={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:Uu,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:Uu,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:Uu,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:Uu,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:Uu,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:Uu,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:IN.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var ON=jt(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),si="original",on="arrayRows",Wi="objectRows",Ca="keyedColumns",Ss="typedArray",RN="unknown",ko="column",_f="row",Tn={Must:1,Might:2,Not:3},DN=Oe();function Vtt(e){DN(e).datasetMap=jt()}function Utt(e,t,r){var n={},i=NN(t);if(!i||!e)return n;var o=[],a=[],s=t.ecModel,l=DN(s).datasetMap,u=i.uid+"_"+r.seriesLayoutBy,c,f;e=e.slice(),F(e,function(v,g){var m=Ot(v)?v:e[g]={name:v};m.type==="ordinal"&&c==null&&(c=g,f=p(m)),n[m.name]=[]});var h=l.get(u)||l.set(u,{categoryWayDim:f,valueWayDim:0});F(e,function(v,g){var m=v.name,_=p(v);if(c==null){var y=h.valueWayDim;d(n[m],y,_),d(a,y,_),h.valueWayDim+=_}else if(c===g)d(n[m],0,_),d(o,0,_);else{var y=h.categoryWayDim;d(n[m],y,_),d(a,y,_),h.categoryWayDim+=_}});function d(v,g,m){for(var _=0;_<m;_++)v.push(g+_)}function p(v){var g=v.dimsDef;return g?g.length:1}return o.length&&(n.itemName=o),a.length&&(n.seriesName=a),n}function NN(e){var t=e.get("data",!0);if(!t)return L0(e.ecModel,"dataset",{index:e.get("datasetIndex",!0),id:e.get("datasetId",!0)},ki).models[0]}function Gtt(e){return!e.get("transform",!0)&&!e.get("fromTransformResult",!0)?[]:L0(e.ecModel,"dataset",{index:e.get("fromDatasetIndex",!0),id:e.get("fromDatasetId",!0)},ki).models}function FN(e,t){return jtt(e.data,e.sourceFormat,e.seriesLayoutBy,e.dimensionsDefine,e.startIndex,t)}function jtt(e,t,r,n,i,o){var a,s=5;if(In(e))return Tn.Not;var l,u;if(n){var c=n[o];Ot(c)?(l=c.name,u=c.type):Et(c)&&(l=c)}if(u!=null)return u==="ordinal"?Tn.Must:Tn.Not;if(t===on){var f=e;if(r===_f){for(var h=f[o],d=0;d<(h||[]).length&&d<s;d++)if((a=w(h[i+d]))!=null)return a}else for(var d=0;d<f.length&&d<s;d++){var p=f[i+d];if(p&&(a=w(p[o]))!=null)return a}}else if(t===Wi){var v=e;if(!l)return Tn.Not;for(var d=0;d<v.length&&d<s;d++){var g=v[d];if(g&&(a=w(g[l]))!=null)return a}}else if(t===Ca){var m=e;if(!l)return Tn.Not;var h=m[l];if(!h||In(h))return Tn.Not;for(var d=0;d<h.length&&d<s;d++)if((a=w(h[d]))!=null)return a}else if(t===si)for(var _=e,d=0;d<_.length&&d<s;d++){var g=_[d],y=x0(g);if(!ct(y))return Tn.Not;if((a=w(y[o]))!=null)return a}function w(T){var S=Et(T);if(T!=null&&isFinite(T)&&T!=="")return S?Tn.Might:Tn.Not;if(S&&T!=="-")return Tn.Must}return Tn.Not}var Wtt=jt();function Htt(e,t,r){var n=Wtt.get(t);if(!n)return r;var i=n(e);return i?r.concat(i):r}var c4=Oe();Oe();var sE=function(){function e(){}return e.prototype.getColorFromPalette=function(t,r,n){var i=Ze(this.get("color",!0)),o=this.get("colorLayer",!0);return Ytt(this,c4,i,o,t,r,n)},e.prototype.clearColorPalette=function(){qtt(this,c4)},e}();function Xtt(e,t){for(var r=e.length,n=0;n<r;n++)if(e[n].length>t)return e[n];return e[r-1]}function Ytt(e,t,r,n,i,o,a){o=o||e;var s=t(o),l=s.paletteIdx||0,u=s.paletteNameMap=s.paletteNameMap||{};if(u.hasOwnProperty(i))return u[i];var c=a==null||!n?r:Xtt(n,a);if(c=c||r,!(!c||!c.length)){var f=c[l];return i&&(u[i]=f),s.paletteIdx=(l+1)%c.length,f}}function qtt(e,t){t(e).paletteIdx=0,t(e).paletteNameMap={}}var Vp,oh,f4,h4="\0_ec_inner",Ztt=1,BN=function(e){_t(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(r,n,i,o,a,s){o=o||{},this.option=null,this._theme=new Pr(o),this._locale=new Pr(a),this._optionManager=s},t.prototype.setOption=function(r,n,i){var o=v4(n);this._optionManager.setOption(r,i,o),this._resetOption(null,o)},t.prototype.resetOption=function(r,n){return this._resetOption(r,v4(n))},t.prototype._resetOption=function(r,n){var i=!1,o=this._optionManager;if(!r||r==="recreate"){var a=o.mountOption(r==="recreate");!this.option||r==="recreate"?f4(this,a):(this.restoreData(),this._mergeOption(a,n)),i=!0}if((r==="timeline"||r==="media")&&this.restoreData(),!r||r==="recreate"||r==="timeline"){var s=o.getTimelineOption(this);s&&(i=!0,this._mergeOption(s,n))}if(!r||r==="recreate"||r==="media"){var l=o.getMediaOption(this);l.length&&F(l,function(u){i=!0,this._mergeOption(u,n)},this)}return i},t.prototype.mergeOption=function(r){this._mergeOption(r,null)},t.prototype._mergeOption=function(r,n){var i=this.option,o=this._componentsMap,a=this._componentsCount,s=[],l=jt(),u=n&&n.replaceMergeMainTypeMap;Vtt(this),F(r,function(f,h){f!=null&&(Ce.hasClass(h)?h&&(s.push(h),l.set(h,!0)):i[h]=i[h]==null?zt(f):oe(i[h],f,!0))}),u&&u.each(function(f,h){Ce.hasClass(h)&&!l.get(h)&&(s.push(h),l.set(h,!0))}),Ce.topologicalTravel(s,Ce.getAllClassMainTypes(),c,this);function c(f){var h=Htt(this,f,Ze(r[f])),d=o.get(f),p=d?u&&u.get(f)?"replaceMerge":"normalMerge":"replaceAll",v=FK(d,h,p);jK(v,f,Ce),i[f]=null,o.set(f,null),a.set(f,0);var g=[],m=[],_=0,y;F(v,function(w,T){var S=w.existing,P=w.newOption;if(!P)S&&(S.mergeOption({},this),S.optionUpdated({},!1));else{var A=f==="series",k=Ce.getClass(f,w.keyInfo.subType,!A);if(!k)return;if(f==="tooltip"){if(y)return;y=!0}if(S&&S.constructor===k)S.name=w.keyInfo.name,S.mergeOption(P,this),S.optionUpdated(P,!1);else{var C=at({componentIndex:T},w.keyInfo);S=new k(P,this,this,C),at(S,C),w.brandNew&&(S.__requireNewView=!0),S.init(P,this,this),S.optionUpdated(null,!0)}}S?(g.push(S.option),m.push(S),_++):(g.push(void 0),m.push(void 0))},this),i[f]=g,o.set(f,m),a.set(f,_),f==="series"&&Vp(this)}this._seriesIndices||Vp(this)},t.prototype.getOption=function(){var r=zt(this.option);return F(r,function(n,i){if(Ce.hasClass(i)){for(var o=Ze(n),a=o.length,s=!1,l=a-1;l>=0;l--)o[l]&&!Yd(o[l])?s=!0:(o[l]=null,!s&&a--);o.length=a,r[i]=o}}),delete r[h4],r},t.prototype.getTheme=function(){return this._theme},t.prototype.getLocaleModel=function(){return this._locale},t.prototype.setUpdatePayload=function(r){this._payload=r},t.prototype.getUpdatePayload=function(){return this._payload},t.prototype.getComponent=function(r,n){var i=this._componentsMap.get(r);if(i){var o=i[n||0];if(o)return o;if(n==null){for(var a=0;a<i.length;a++)if(i[a])return i[a]}}},t.prototype.queryComponents=function(r){var n=r.mainType;if(!n)return[];var i=r.index,o=r.id,a=r.name,s=this._componentsMap.get(n);if(!s||!s.length)return[];var l;return i!=null?(l=[],F(Ze(i),function(u){s[u]&&l.push(s[u])})):o!=null?l=d4("id",o,s):a!=null?l=d4("name",a,s):l=wr(s,function(u){return!!u}),p4(l,r)},t.prototype.findComponents=function(r){var n=r.query,i=r.mainType,o=s(n),a=o?this.queryComponents(o):wr(this._componentsMap.get(i),function(u){return!!u});return l(p4(a,r));function s(u){var c=i+"Index",f=i+"Id",h=i+"Name";return u&&(u[c]!=null||u[f]!=null||u[h]!=null)?{mainType:i,index:u[c],id:u[f],name:u[h]}:null}function l(u){return r.filter?wr(u,r.filter):u}},t.prototype.eachComponent=function(r,n,i){var o=this._componentsMap;if(Ut(r)){var a=n,s=r;o.each(function(f,h){for(var d=0;f&&d<f.length;d++){var p=f[d];p&&s.call(a,h,p,p.componentIndex)}})}else for(var l=Et(r)?o.get(r):Ot(r)?this.findComponents(r):null,u=0;l&&u<l.length;u++){var c=l[u];c&&n.call(i,c,c.componentIndex)}},t.prototype.getSeriesByName=function(r){var n=ti(r,null);return wr(this._componentsMap.get("series"),function(i){return!!i&&n!=null&&i.name===n})},t.prototype.getSeriesByIndex=function(r){return this._componentsMap.get("series")[r]},t.prototype.getSeriesByType=function(r){return wr(this._componentsMap.get("series"),function(n){return!!n&&n.subType===r})},t.prototype.getSeries=function(){return wr(this._componentsMap.get("series"),function(r){return!!r})},t.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},t.prototype.eachSeries=function(r,n){oh(this),F(this._seriesIndices,function(i){var o=this._componentsMap.get("series")[i];r.call(n,o,i)},this)},t.prototype.eachRawSeries=function(r,n){F(this._componentsMap.get("series"),function(i){i&&r.call(n,i,i.componentIndex)})},t.prototype.eachSeriesByType=function(r,n,i){oh(this),F(this._seriesIndices,function(o){var a=this._componentsMap.get("series")[o];a.subType===r&&n.call(i,a,o)},this)},t.prototype.eachRawSeriesByType=function(r,n,i){return F(this.getSeriesByType(r),n,i)},t.prototype.isSeriesFiltered=function(r){return oh(this),this._seriesIndicesMap.get(r.componentIndex)==null},t.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},t.prototype.filterSeries=function(r,n){oh(this);var i=[];F(this._seriesIndices,function(o){var a=this._componentsMap.get("series")[o];r.call(n,a,o)&&i.push(o)},this),this._seriesIndices=i,this._seriesIndicesMap=jt(i)},t.prototype.restoreData=function(r){Vp(this);var n=this._componentsMap,i=[];n.each(function(o,a){Ce.hasClass(a)&&i.push(a)}),Ce.topologicalTravel(i,Ce.getAllClassMainTypes(),function(o){F(n.get(o),function(a){a&&(o!=="series"||!Ktt(a,r))&&a.restoreData()})})},t.internalField=function(){Vp=function(r){var n=r._seriesIndices=[];F(r._componentsMap.get("series"),function(i){i&&n.push(i.componentIndex)}),r._seriesIndicesMap=jt(n)},oh=function(r){},f4=function(r,n){r.option={},r.option[h4]=Ztt,r._componentsMap=jt({series:[]}),r._componentsCount=jt();var i=n.aria;Ot(i)&&i.enabled==null&&(i.enabled=!0),Jtt(n,r._theme.option),oe(n,ztt,!1),r._mergeOption(n,null)}}(),t}(Pr);function Ktt(e,t){if(t){var r=t.seriesIndex,n=t.seriesId,i=t.seriesName;return r!=null&&e.componentIndex!==r||n!=null&&e.id!==n||i!=null&&e.name!==i}}function Jtt(e,t){var r=e.color&&!e.colorLayer;F(t,function(n,i){i==="colorLayer"&&r||Ce.hasClass(i)||(typeof n=="object"?e[i]=e[i]?oe(e[i],n,!1):zt(n):e[i]==null&&(e[i]=n))})}function d4(e,t,r){if(ct(t)){var n=jt();return F(t,function(o){if(o!=null){var a=ti(o,null);a!=null&&n.set(o,!0)}}),wr(r,function(o){return o&&n.get(o[e])})}else{var i=ti(t,null);return wr(r,function(o){return o&&i!=null&&o[e]===i})}}function p4(e,t){return t.hasOwnProperty("subType")?wr(e,function(r){return r&&r.subType===t.subType}):e}function v4(e){var t=jt();return e&&F(Ze(e.replaceMerge),function(r){t.set(r,!0)}),{replaceMergeMainTypeMap:t}}Ui(BN,sE);const $N=BN;var Qtt=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],tet=function(){function e(t){F(Qtt,function(r){this[r]=Vt(t[r],t)},this)}return e}();const zN=tet;var u2={},eet=function(){function e(){this._coordinateSystems=[]}return e.prototype.create=function(t,r){var n=[];F(u2,function(i,o){var a=i.create(t,r);n=n.concat(a||[])}),this._coordinateSystems=n},e.prototype.update=function(t,r){F(this._coordinateSystems,function(n){n.update&&n.update(t,r)})},e.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},e.register=function(t,r){u2[t]=r},e.get=function(t){return u2[t]},e}();const lE=eet;var ret=/^(min|max)?(.+)$/,net=function(){function e(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return e.prototype.setOption=function(t,r,n){t&&(F(Ze(t.series),function(a){a&&a.data&&In(a.data)&&Em(a.data)}),F(Ze(t.dataset),function(a){a&&a.source&&In(a.source)&&Em(a.source)})),t=zt(t);var i=this._optionBackup,o=iet(t,r,!i);this._newBaseOption=o.baseOption,i?(o.timelineOptions.length&&(i.timelineOptions=o.timelineOptions),o.mediaList.length&&(i.mediaList=o.mediaList),o.mediaDefault&&(i.mediaDefault=o.mediaDefault)):this._optionBackup=o},e.prototype.mountOption=function(t){var r=this._optionBackup;return this._timelineOptions=r.timelineOptions,this._mediaList=r.mediaList,this._mediaDefault=r.mediaDefault,this._currentMediaIndices=[],zt(t?r.baseOption:this._newBaseOption)},e.prototype.getTimelineOption=function(t){var r,n=this._timelineOptions;if(n.length){var i=t.getComponent("timeline");i&&(r=zt(n[i.getCurrentIndex()]))}return r},e.prototype.getMediaOption=function(t){var r=this._api.getWidth(),n=this._api.getHeight(),i=this._mediaList,o=this._mediaDefault,a=[],s=[];if(!i.length&&!o)return s;for(var l=0,u=i.length;l<u;l++)oet(i[l].query,r,n)&&a.push(l);return!a.length&&o&&(a=[-1]),a.length&&!set(a,this._currentMediaIndices)&&(s=Ct(a,function(c){return zt(c===-1?o.option:i[c].option)})),this._currentMediaIndices=a,s},e}();function iet(e,t,r){var n=[],i,o,a=e.baseOption,s=e.timeline,l=e.options,u=e.media,c=!!e.media,f=!!(l||s||a&&a.timeline);a?(o=a,o.timeline||(o.timeline=s)):((f||c)&&(e.options=e.media=null),o=e),c&&ct(u)&&F(u,function(d){d&&d.option&&(d.query?n.push(d):i||(i=d))}),h(o),F(l,function(d){return h(d)}),F(n,function(d){return h(d.option)});function h(d){F(t,function(p){p(d,r)})}return{baseOption:o,timelineOptions:l||[],mediaDefault:i,mediaList:n}}function oet(e,t,r){var n={width:t,height:r,aspectratio:t/r},i=!0;return F(e,function(o,a){var s=a.match(ret);if(!(!s||!s[1]||!s[2])){var l=s[1],u=s[2].toLowerCase();aet(n[u],o,l)||(i=!1)}}),i}function aet(e,t,r){return r==="min"?e>=t:r==="max"?e<=t:e===t}function set(e,t){return e.join(",")===t.join(",")}const uet=net;var ci=F,i0=Ot,g4=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function c2(e){var t=e&&e.itemStyle;if(!!t)for(var r=0,n=g4.length;r<n;r++){var i=g4[r],o=t.normal,a=t.emphasis;o&&o[i]&&(e[i]=e[i]||{},e[i].normal?oe(e[i].normal,o[i]):e[i].normal=o[i],o[i]=null),a&&a[i]&&(e[i]=e[i]||{},e[i].emphasis?oe(e[i].emphasis,a[i]):e[i].emphasis=a[i],a[i]=null)}}function Br(e,t,r){if(e&&e[t]&&(e[t].normal||e[t].emphasis)){var n=e[t].normal,i=e[t].emphasis;n&&(r?(e[t].normal=e[t].emphasis=null,te(e[t],n)):e[t]=n),i&&(e.emphasis=e.emphasis||{},e.emphasis[t]=i,i.focus&&(e.emphasis.focus=i.focus),i.blurScope&&(e.emphasis.blurScope=i.blurScope))}}function Qh(e){Br(e,"itemStyle"),Br(e,"lineStyle"),Br(e,"areaStyle"),Br(e,"label"),Br(e,"labelLine"),Br(e,"upperLabel"),Br(e,"edgeLabel")}function Xe(e,t){var r=i0(e)&&e[t],n=i0(r)&&r.textStyle;if(n)for(var i=0,o=mM.length;i<o;i++){var a=mM[i];n.hasOwnProperty(a)&&(r[a]=n[a])}}function Xn(e){e&&(Qh(e),Xe(e,"label"),e.emphasis&&Xe(e.emphasis,"label"))}function cet(e){if(!!i0(e)){c2(e),Qh(e),Xe(e,"label"),Xe(e,"upperLabel"),Xe(e,"edgeLabel"),e.emphasis&&(Xe(e.emphasis,"label"),Xe(e.emphasis,"upperLabel"),Xe(e.emphasis,"edgeLabel"));var t=e.markPoint;t&&(c2(t),Xn(t));var r=e.markLine;r&&(c2(r),Xn(r));var n=e.markArea;n&&Xn(n);var i=e.data;if(e.type==="graph"){i=i||e.nodes;var o=e.links||e.edges;if(o&&!In(o))for(var a=0;a<o.length;a++)Xn(o[a]);F(e.categories,function(u){Qh(u)})}if(i&&!In(i))for(var a=0;a<i.length;a++)Xn(i[a]);if(t=e.markPoint,t&&t.data)for(var s=t.data,a=0;a<s.length;a++)Xn(s[a]);if(r=e.markLine,r&&r.data)for(var l=r.data,a=0;a<l.length;a++)ct(l[a])?(Xn(l[a][0]),Xn(l[a][1])):Xn(l[a]);e.type==="gauge"?(Xe(e,"axisLabel"),Xe(e,"title"),Xe(e,"detail")):e.type==="treemap"?(Br(e.breadcrumb,"itemStyle"),F(e.levels,function(u){Qh(u)})):e.type==="tree"&&Qh(e.leaves)}}function Ho(e){return ct(e)?e:e?[e]:[]}function m4(e){return(ct(e)?e[0]:e)||{}}function fet(e,t){ci(Ho(e.series),function(n){i0(n)&&cet(n)});var r=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&r.push("valueAxis","categoryAxis","logAxis","timeAxis"),ci(r,function(n){ci(Ho(e[n]),function(i){i&&(Xe(i,"axisLabel"),Xe(i.axisPointer,"label"))})}),ci(Ho(e.parallel),function(n){var i=n&&n.parallelAxisDefault;Xe(i,"axisLabel"),Xe(i&&i.axisPointer,"label")}),ci(Ho(e.calendar),function(n){Br(n,"itemStyle"),Xe(n,"dayLabel"),Xe(n,"monthLabel"),Xe(n,"yearLabel")}),ci(Ho(e.radar),function(n){Xe(n,"name"),n.name&&n.axisName==null&&(n.axisName=n.name,delete n.name),n.nameGap!=null&&n.axisNameGap==null&&(n.axisNameGap=n.nameGap,delete n.nameGap)}),ci(Ho(e.geo),function(n){i0(n)&&(Xn(n),ci(Ho(n.regions),function(i){Xn(i)}))}),ci(Ho(e.timeline),function(n){Xn(n),Br(n,"label"),Br(n,"itemStyle"),Br(n,"controlStyle",!0);var i=n.data;ct(i)&&F(i,function(o){Ot(o)&&(Br(o,"label"),Br(o,"itemStyle"))})}),ci(Ho(e.toolbox),function(n){Br(n,"iconStyle"),ci(n.feature,function(i){Br(i,"iconStyle")})}),Xe(m4(e.axisPointer),"label"),Xe(m4(e.tooltip).axisPointer,"label")}function het(e,t){for(var r=t.split(","),n=e,i=0;i<r.length&&(n=n&&n[r[i]],n!=null);i++);return n}function det(e,t,r,n){for(var i=t.split(","),o=e,a,s=0;s<i.length-1;s++)a=i[s],o[a]==null&&(o[a]={}),o=o[a];(n||o[i[s]]==null)&&(o[i[s]]=r)}function _4(e){e&&F(pet,function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])})}var pet=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],vet=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],f2=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function ah(e){var t=e&&e.itemStyle;if(t)for(var r=0;r<f2.length;r++){var n=f2[r][1],i=f2[r][0];t[n]!=null&&(t[i]=t[n])}}function y4(e){!e||e.alignTo==="edge"&&e.margin!=null&&e.edgeDistance==null&&(e.edgeDistance=e.margin)}function b4(e){!e||e.downplay&&!e.blur&&(e.blur=e.downplay)}function get(e){!e||e.focusNodeAdjacency!=null&&(e.emphasis=e.emphasis||{},e.emphasis.focus==null&&(e.emphasis.focus="adjacency"))}function VN(e,t){if(e)for(var r=0;r<e.length;r++)t(e[r]),e[r]&&VN(e[r].children,t)}function UN(e,t){fet(e,t),e.series=Ze(e.series),F(e.series,function(r){if(!!Ot(r)){var n=r.type;if(n==="line")r.clipOverflow!=null&&(r.clip=r.clipOverflow);else if(n==="pie"||n==="gauge"){r.clockWise!=null&&(r.clockwise=r.clockWise),y4(r.label);var i=r.data;if(i&&!In(i))for(var o=0;o<i.length;o++)y4(i[o]);r.hoverOffset!=null&&(r.emphasis=r.emphasis||{},(r.emphasis.scaleSize=null)&&(r.emphasis.scaleSize=r.hoverOffset))}else if(n==="gauge"){var a=het(r,"pointer.color");a!=null&&det(r,"itemStyle.color",a)}else if(n==="bar"){ah(r),ah(r.backgroundStyle),ah(r.emphasis);var i=r.data;if(i&&!In(i))for(var o=0;o<i.length;o++)typeof i[o]=="object"&&(ah(i[o]),ah(i[o]&&i[o].emphasis))}else if(n==="sunburst"){var s=r.highlightPolicy;s&&(r.emphasis=r.emphasis||{},r.emphasis.focus||(r.emphasis.focus=s)),b4(r),VN(r.data,b4)}else n==="graph"||n==="sankey"?get(r):n==="map"&&(r.mapType&&!r.map&&(r.map=r.mapType),r.mapLocation&&te(r,r.mapLocation));r.hoverAnimation!=null&&(r.emphasis=r.emphasis||{},r.emphasis&&r.emphasis.scale==null&&(r.emphasis.scale=r.hoverAnimation)),_4(r)}}),e.dataRange&&(e.visualMap=e.dataRange),F(vet,function(r){var n=e[r];n&&(ct(n)||(n=[n]),F(n,function(i){_4(i)}))})}function met(e){var t=jt();e.eachSeries(function(r){var n=r.get("stack");if(n){var i=t.get(n)||t.set(n,[]),o=r.getData(),a={stackResultDimension:o.getCalculationInfo("stackResultDimension"),stackedOverDimension:o.getCalculationInfo("stackedOverDimension"),stackedDimension:o.getCalculationInfo("stackedDimension"),stackedByDimension:o.getCalculationInfo("stackedByDimension"),isStackedByIndex:o.getCalculationInfo("isStackedByIndex"),data:o,seriesModel:r};if(!a.stackedDimension||!(a.isStackedByIndex||a.stackedByDimension))return;i.length&&o.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(a)}}),t.each(_et)}function _et(e){F(e,function(t,r){var n=[],i=[NaN,NaN],o=[t.stackResultDimension,t.stackedOverDimension],a=t.data,s=t.isStackedByIndex,l=t.seriesModel.get("stackStrategy")||"samesign";a.modify(o,function(u,c,f){var h=a.get(t.stackedDimension,f);if(isNaN(h))return i;var d,p;s?p=a.getRawIndex(f):d=a.get(t.stackedByDimension,f);for(var v=NaN,g=r-1;g>=0;g--){var m=e[g];if(s||(p=m.data.rawIndexOf(m.stackedByDimension,d)),p>=0){var _=m.data.getByRawIndex(m.stackResultDimension,p);if(l==="all"||l==="positive"&&_>0||l==="negative"&&_<0||l==="samesign"&&h>=0&&_>0||l==="samesign"&&h<=0&&_<0){h=LK(h,_),v=_;break}}}return n[0]=h,n[1]=v,n})})}var u_=function(){function e(t){this.data=t.data||(t.sourceFormat===Ca?{}:[]),this.sourceFormat=t.sourceFormat||RN,this.seriesLayoutBy=t.seriesLayoutBy||ko,this.startIndex=t.startIndex||0,this.dimensionsDetectedCount=t.dimensionsDetectedCount,this.metaRawOption=t.metaRawOption;var r=this.dimensionsDefine=t.dimensionsDefine;if(r)for(var n=0;n<r.length;n++){var i=r[n];i.type==null&&FN(this,n)===Tn.Must&&(i.type="ordinal")}}return e}();function uE(e){return e instanceof u_}function t3(e,t,r){r=r||GN(e);var n=t.seriesLayoutBy,i=bet(e,r,n,t.sourceHeader,t.dimensions),o=new u_({data:e,sourceFormat:r,seriesLayoutBy:n,dimensionsDefine:i.dimensionsDefine,startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount,metaRawOption:zt(t)});return o}function cE(e){return new u_({data:e,sourceFormat:In(e)?Ss:si})}function yet(e){return new u_({data:e.data,sourceFormat:e.sourceFormat,seriesLayoutBy:e.seriesLayoutBy,dimensionsDefine:zt(e.dimensionsDefine),startIndex:e.startIndex,dimensionsDetectedCount:e.dimensionsDetectedCount})}function GN(e){var t=RN;if(In(e))t=Ss;else if(ct(e)){e.length===0&&(t=on);for(var r=0,n=e.length;r<n;r++){var i=e[r];if(i!=null){if(ct(i)){t=on;break}else if(Ot(i)){t=Wi;break}}}}else if(Ot(e)){for(var o in e)if(dt(e,o)&&Wr(e[o])){t=Ca;break}}return t}function bet(e,t,r,n,i){var o,a;if(!e)return{dimensionsDefine:w4(i),startIndex:a,dimensionsDetectedCount:o};if(t===on){var s=e;n==="auto"||n==null?S4(function(u){u!=null&&u!=="-"&&(Et(u)?a==null&&(a=1):a=0)},r,s,10):a=we(n)?n:n?1:0,!i&&a===1&&(i=[],S4(function(u,c){i[c]=u!=null?u+"":""},r,s,1/0)),o=i?i.length:r===_f?s.length:s[0]?s[0].length:null}else if(t===Wi)i||(i=wet(e));else if(t===Ca)i||(i=[],F(e,function(u,c){i.push(c)}));else if(t===si){var l=x0(e[0]);o=ct(l)&&l.length||1}return{startIndex:a,dimensionsDefine:w4(i),dimensionsDetectedCount:o}}function wet(e){for(var t=0,r;t<e.length&&!(r=e[t++]););if(r){var n=[];return F(r,function(i,o){n.push(o)}),n}}function w4(e){if(!!e){var t=jt();return Ct(e,function(r,n){r=Ot(r)?r:{name:r};var i={name:r.name,displayName:r.displayName,type:r.type};if(i.name==null)return i;i.name+="",i.displayName==null&&(i.displayName=i.name);var o=t.get(i.name);return o?i.name+="-"+o.count++:t.set(i.name,{count:1}),i})}}function S4(e,t,r,n){if(t===_f)for(var i=0;i<r.length&&i<n;i++)e(r[i]?r[i][0]:null,i);else for(var o=r[0]||[],i=0;i<o.length&&i<n;i++)e(o[i],i)}function jN(e){var t=e.sourceFormat;return t===Wi||t===Ca}var fl,hl,dl,T4,P4,WN=function(){function e(t,r){var n=uE(t)?t:cE(t);this._source=n;var i=this._data=n.data;n.sourceFormat===Ss&&(this._offset=0,this._dimSize=r,this._data=i),P4(this,i,n)}return e.prototype.getSource=function(){return this._source},e.prototype.count=function(){return 0},e.prototype.getItem=function(t,r){},e.prototype.appendData=function(t){},e.prototype.clean=function(){},e.protoInitialize=function(){var t=e.prototype;t.pure=!1,t.persistent=!0}(),e.internalField=function(){var t;P4=function(a,s,l){var u=l.sourceFormat,c=l.seriesLayoutBy,f=l.startIndex,h=l.dimensionsDefine,d=T4[fE(u,c)];if(at(a,d),u===Ss)a.getItem=r,a.count=i,a.fillStorage=n;else{var p=HN(u,c);a.getItem=Vt(p,null,s,f,h);var v=XN(u,c);a.count=Vt(v,null,s,f,h)}};var r=function(a,s){a=a-this._offset,s=s||[];for(var l=this._data,u=this._dimSize,c=u*a,f=0;f<u;f++)s[f]=l[c+f];return s},n=function(a,s,l,u){for(var c=this._data,f=this._dimSize,h=0;h<f;h++){for(var d=u[h],p=d[0]==null?1/0:d[0],v=d[1]==null?-1/0:d[1],g=s-a,m=l[h],_=0;_<g;_++){var y=c[_*f+h];m[a+_]=y,y<p&&(p=y),y>v&&(v=y)}d[0]=p,d[1]=v}},i=function(){return this._data?this._data.length/this._dimSize:0};T4=(t={},t[on+"_"+ko]={pure:!0,appendData:o},t[on+"_"+_f]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},t[Wi]={pure:!0,appendData:o},t[Ca]={pure:!0,appendData:function(a){var s=this._data;F(a,function(l,u){for(var c=s[u]||(s[u]=[]),f=0;f<(l||[]).length;f++)c.push(l[f])})}},t[si]={appendData:o},t[Ss]={persistent:!1,pure:!0,appendData:function(a){this._data=a},clean:function(){this._offset+=this.count(),this._data=null}},t);function o(a){for(var s=0;s<a.length;s++)this._data.push(a[s])}}(),e}(),E4=function(e,t,r,n){return e[n]},Tet=(fl={},fl[on+"_"+ko]=function(e,t,r,n){return e[n+t]},fl[on+"_"+_f]=function(e,t,r,n,i){n+=t;for(var o=i||[],a=e,s=0;s<a.length;s++){var l=a[s];o[s]=l?l[n]:null}return o},fl[Wi]=E4,fl[Ca]=function(e,t,r,n,i){for(var o=i||[],a=0;a<r.length;a++){var s=r[a].name,l=e[s];o[a]=l?l[n]:null}return o},fl[si]=E4,fl);function HN(e,t){var r=Tet[fE(e,t)];return r}var k4=function(e,t,r){return e.length},Pet=(hl={},hl[on+"_"+ko]=function(e,t,r){return Math.max(0,e.length-t)},hl[on+"_"+_f]=function(e,t,r){var n=e[0];return n?Math.max(0,n.length-t):0},hl[Wi]=k4,hl[Ca]=function(e,t,r){var n=r[0].name,i=e[n];return i?i.length:0},hl[si]=k4,hl);function XN(e,t){var r=Pet[fE(e,t)];return r}var h2=function(e,t,r){return e[t]},Eet=(dl={},dl[on]=h2,dl[Wi]=function(e,t,r){return e[r]},dl[Ca]=h2,dl[si]=function(e,t,r){var n=x0(e);return n instanceof Array?n[t]:n},dl[Ss]=h2,dl);function YN(e){var t=Eet[e];return t}function fE(e,t){return e===on?e+"_"+t:e}function Kc(e,t,r){if(!!e){var n=e.getRawDataItem(t);if(n!=null){var i=e.getStore(),o=i.getSource().sourceFormat;if(r!=null){var a=e.getDimensionIndex(r),s=i.getDimensionProperty(a);return YN(o)(n,a,s)}else{var l=n;return o===si&&(l=x0(n)),l}}}}var ket=/\{@(.+?)\}/g,qN=function(){function e(){}return e.prototype.getDataParams=function(t,r){var n=this.getData(r),i=this.getRawValue(t,r),o=n.getRawIndex(t),a=n.getName(t),s=n.getRawDataItem(t),l=n.getItemVisual(t,"style"),u=l&&l[n.getItemVisual(t,"drawType")||"fill"],c=l&&l.stroke,f=this.mainType,h=f==="series",d=n.userOutput&&n.userOutput.get();return{componentType:f,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:h?this.subType:null,seriesIndex:this.seriesIndex,seriesId:h?this.id:null,seriesName:h?this.name:null,name:a,dataIndex:o,data:s,dataType:r,value:i,color:u,borderColor:c,dimensionNames:d?d.fullDimensions:null,encode:d?d.encode:null,$vars:["seriesName","name","value"]}},e.prototype.getFormattedLabel=function(t,r,n,i,o,a){r=r||"normal";var s=this.getData(n),l=this.getDataParams(t,n);if(a&&(l.value=a.interpolatedValue),i!=null&&ct(l.value)&&(l.value=l.value[i]),!o){var u=s.getItemModel(t);o=u.get(r==="normal"?["label","formatter"]:[r,"label","formatter"])}if(Ut(o))return l.status=r,l.dimensionIndex=i,o(l);if(Et(o)){var c=LN(o,l);return c.replace(ket,function(f,h){var d=h.length,p=h;p.charAt(0)==="["&&p.charAt(d-1)==="]"&&(p=+p.slice(1,d-1));var v=Kc(s,t,p);if(a&&ct(a.interpolatedValue)){var g=s.getDimensionIndex(p);g>=0&&(v=a.interpolatedValue[g])}return v!=null?v+"":""})}},e.prototype.getRawValue=function(t,r){return Kc(this.getData(r),t)},e.prototype.formatTooltip=function(t,r,n){},e}();function A4(e){var t,r;return Ot(e)?e.type&&(r=e):t=e,{text:t,frag:r}}function Ed(e){return new Aet(e)}var Aet=function(){function e(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return e.prototype.perform=function(t){var r=this._upstream,n=t&&t.skip;if(this._dirty&&r){var i=this.context;i.data=i.outputData=r.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var o;this._plan&&!n&&(o=this._plan(this.context));var a=c(this._modBy),s=this._modDataCount||0,l=c(t&&t.modBy),u=t&&t.modDataCount||0;(a!==l||s!==u)&&(o="reset");function c(_){return!(_>=1)&&(_=1),_}var f;(this._dirty||o==="reset")&&(this._dirty=!1,f=this._doReset(n)),this._modBy=l,this._modDataCount=u;var h=t&&t.step;if(r?this._dueEnd=r._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var d=this._dueIndex,p=Math.min(h!=null?this._dueIndex+h:1/0,this._dueEnd);if(!n&&(f||d<p)){var v=this._progress;if(ct(v))for(var g=0;g<v.length;g++)this._doProgress(v[g],d,p,l,u);else this._doProgress(v,d,p,l,u)}this._dueIndex=p;var m=this._settedOutputEnd!=null?this._settedOutputEnd:p;this._outputDueEnd=m}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},e.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},e.prototype._doProgress=function(t,r,n,i,o){C4.reset(r,n,i,o),this._callingProgress=t,this._callingProgress({start:r,end:n,count:n-r,next:C4.next},this.context)},e.prototype._doReset=function(t){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var r,n;!t&&this._reset&&(r=this._reset(this.context),r&&r.progress&&(n=r.forceFirstProgress,r=r.progress),ct(r)&&!r.length&&(r=null)),this._progress=r,this._modBy=this._modDataCount=null;var i=this._downstream;return i&&i.dirty(),n},e.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},e.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},e.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},e.prototype.getUpstream=function(){return this._upstream},e.prototype.getDownstream=function(){return this._downstream},e.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},e}(),C4=function(){var e,t,r,n,i,o={reset:function(l,u,c,f){t=l,e=u,r=c,n=f,i=Math.ceil(n/r),o.next=r>1&&n>0?s:a}};return o;function a(){return t<e?t++:null}function s(){var l=t%i*r+Math.ceil(t/i),u=t>=e?null:l<n?l:t;return t++,u}}();function Ts(e,t){var r=t&&t.type;return r==="ordinal"?e:(r==="time"&&!we(e)&&e!=null&&e!=="-"&&(e=+_a(e)),e==null||e===""?NaN:+e)}var Cet=jt({number:function(e){return parseFloat(e)},time:function(e){return+_a(e)},trim:function(e){return Et(e)?So(e):e}});function ZN(e){return Cet.get(e)}var KN={lt:function(e,t){return e<t},lte:function(e,t){return e<=t},gt:function(e,t){return e>t},gte:function(e,t){return e>=t}},Met=function(){function e(t,r){if(!we(r)){var n="";ne(n)}this._opFn=KN[t],this._rvalFloat=Ms(r)}return e.prototype.evaluate=function(t){return we(t)?this._opFn(t,this._rvalFloat):this._opFn(Ms(t),this._rvalFloat)},e}(),JN=function(){function e(t,r){var n=t==="desc";this._resultLT=n?1:-1,r==null&&(r=n?"min":"max"),this._incomparable=r==="min"?-1/0:1/0}return e.prototype.evaluate=function(t,r){var n=we(t)?t:Ms(t),i=we(r)?r:Ms(r),o=isNaN(n),a=isNaN(i);if(o&&(n=this._incomparable),a&&(i=this._incomparable),o&&a){var s=Et(t),l=Et(r);s&&(n=l?t:0),l&&(i=s?r:0)}return n<i?this._resultLT:n>i?-this._resultLT:0},e}(),xet=function(){function e(t,r){this._rval=r,this._isEQ=t,this._rvalTypeof=typeof r,this._rvalFloat=Ms(r)}return e.prototype.evaluate=function(t){var r=t===this._rval;if(!r){var n=typeof t;n!==this._rvalTypeof&&(n==="number"||this._rvalTypeof==="number")&&(r=Ms(t)===this._rvalFloat)}return this._isEQ?r:!r},e}();function Let(e,t){return e==="eq"||e==="ne"?new xet(e==="eq",t):dt(KN,e)?new Met(e,t):null}var Iet=function(){function e(){}return e.prototype.getRawData=function(){throw new Error("not supported")},e.prototype.getRawDataItem=function(t){throw new Error("not supported")},e.prototype.cloneRawData=function(){},e.prototype.getDimensionInfo=function(t){},e.prototype.cloneAllDimensionInfo=function(){},e.prototype.count=function(){},e.prototype.retrieveValue=function(t,r){},e.prototype.retrieveValueFromItem=function(t,r){},e.prototype.convertValue=function(t,r){return Ts(t,r)},e}();function Oet(e,t){var r=new Iet,n=e.data,i=r.sourceFormat=e.sourceFormat,o=e.startIndex,a="";e.seriesLayoutBy!==ko&&ne(a);var s=[],l={},u=e.dimensionsDefine;if(u)F(u,function(v,g){var m=v.name,_={index:g,name:m,displayName:v.displayName};if(s.push(_),m!=null){var y="";dt(l,m)&&ne(y),l[m]=_}});else for(var c=0;c<e.dimensionsDetectedCount;c++)s.push({index:c});var f=HN(i,ko);t.__isBuiltIn&&(r.getRawDataItem=function(v){return f(n,o,s,v)},r.getRawData=Vt(Ret,null,e)),r.cloneRawData=Vt(Det,null,e);var h=XN(i,ko);r.count=Vt(h,null,n,o,s);var d=YN(i);r.retrieveValue=function(v,g){var m=f(n,o,s,v);return p(m,g)};var p=r.retrieveValueFromItem=function(v,g){if(v!=null){var m=s[g];if(m)return d(v,g,m.name)}};return r.getDimensionInfo=Vt(Net,null,s,l),r.cloneAllDimensionInfo=Vt(Fet,null,s),r}function Ret(e){var t=e.sourceFormat;if(!hE(t)){var r="";ne(r)}return e.data}function Det(e){var t=e.sourceFormat,r=e.data;if(!hE(t)){var n="";ne(n)}if(t===on){for(var i=[],o=0,a=r.length;o<a;o++)i.push(r[o].slice());return i}else if(t===Wi){for(var i=[],o=0,a=r.length;o<a;o++)i.push(at({},r[o]));return i}}function Net(e,t,r){if(r!=null){if(we(r)||!isNaN(r)&&!dt(t,r))return e[r];if(dt(t,r))return t[r]}}function Fet(e){return zt(e)}var QN=jt();function Bet(e){e=zt(e);var t=e.type,r="";t||ne(r);var n=t.split(":");n.length!==2&&ne(r);var i=!1;n[0]==="echarts"&&(t=n[1],i=!0),e.__isBuiltIn=i,QN.set(t,e)}function $et(e,t,r){var n=Ze(e),i=n.length,o="";i||ne(o);for(var a=0,s=i;a<s;a++){var l=n[a];t=zet(l,t),a!==s-1&&(t.length=Math.max(t.length,1))}return t}function zet(e,t,r,n){var i="";t.length||ne(i),Ot(e)||ne(i);var o=e.type,a=QN.get(o);a||ne(i);var s=Ct(t,function(u){return Oet(u,a)}),l=Ze(a.transform({upstream:s[0],upstreamList:s,config:zt(e.config)}));return Ct(l,function(u,c){var f="";Ot(u)||ne(f),u.data||ne(f);var h=GN(u.data);hE(h)||ne(f);var d,p=t[0];if(p&&c===0&&!u.dimensions){var v=p.startIndex;v&&(u.data=p.data.slice(0,v).concat(u.data)),d={seriesLayoutBy:ko,sourceHeader:v,dimensions:p.metaRawOption.dimensions}}else d={seriesLayoutBy:ko,sourceHeader:0,dimensions:u.dimensions};return t3(u.data,d,null)})}function hE(e){return e===on||e===Wi}var c_="undefined",Vet=typeof Uint32Array===c_?Array:Uint32Array,Uet=typeof Uint16Array===c_?Array:Uint16Array,tF=typeof Int32Array===c_?Array:Int32Array,M4=typeof Float64Array===c_?Array:Float64Array,eF={float:M4,int:tF,ordinal:Array,number:Array,time:M4},d2;function sh(e){return e>65535?Vet:Uet}function Gu(){return[1/0,-1/0]}function Get(e){var t=e.constructor;return t===Array?e.slice():new t(e)}function x4(e,t,r,n,i){var o=eF[r||"float"];if(i){var a=e[t],s=a&&a.length;if(s!==n){for(var l=new o(n),u=0;u<s;u++)l[u]=a[u];e[t]=l}}else e[t]=new o(n)}var jet=function(){function e(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=jt()}return e.prototype.initData=function(t,r,n){this._provider=t,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var i=t.getSource(),o=this.defaultDimValueGetter=d2[i.sourceFormat];this._dimValueGetter=n||o,this._rawExtent=[],jN(i),this._dimensions=Ct(r,function(a){return{type:a.type,property:a.property}}),this._initDataFromProvider(0,t.count())},e.prototype.getProvider=function(){return this._provider},e.prototype.getSource=function(){return this._provider.getSource()},e.prototype.ensureCalculationDimension=function(t,r){var n=this._calcDimNameToIdx,i=this._dimensions,o=n.get(t);if(o!=null){if(i[o].type===r)return o}else o=i.length;return i[o]={type:r},n.set(t,o),this._chunks[o]=new eF[r||"float"](this._rawCount),this._rawExtent[o]=Gu(),o},e.prototype.collectOrdinalMeta=function(t,r){var n=this._chunks[t],i=this._dimensions[t],o=this._rawExtent,a=i.ordinalOffset||0,s=n.length;a===0&&(o[t]=Gu());for(var l=o[t],u=a;u<s;u++){var c=n[u]=r.parseAndCollect(n[u]);isNaN(c)||(l[0]=Math.min(c,l[0]),l[1]=Math.max(c,l[1]))}i.ordinalMeta=r,i.ordinalOffset=s,i.type="ordinal"},e.prototype.getOrdinalMeta=function(t){var r=this._dimensions[t],n=r.ordinalMeta;return n},e.prototype.getDimensionProperty=function(t){var r=this._dimensions[t];return r&&r.property},e.prototype.appendData=function(t){var r=this._provider,n=this.count();r.appendData(t);var i=r.count();return r.persistent||(i+=n),n<i&&this._initDataFromProvider(n,i,!0),[n,i]},e.prototype.appendValues=function(t,r){for(var n=this._chunks,i=this._dimensions,o=i.length,a=this._rawExtent,s=this.count(),l=s+Math.max(t.length,r||0),u=0;u<o;u++){var c=i[u];x4(n,u,c.type,l,!0)}for(var f=[],h=s;h<l;h++)for(var d=h-s,p=0;p<o;p++){var c=i[p],v=d2.arrayRows.call(this,t[d]||f,c.property,d,p);n[p][h]=v;var g=a[p];v<g[0]&&(g[0]=v),v>g[1]&&(g[1]=v)}return this._rawCount=this._count=l,{start:s,end:l}},e.prototype._initDataFromProvider=function(t,r,n){for(var i=this._provider,o=this._chunks,a=this._dimensions,s=a.length,l=this._rawExtent,u=Ct(a,function(_){return _.property}),c=0;c<s;c++){var f=a[c];l[c]||(l[c]=Gu()),x4(o,c,f.type,r,n)}if(i.fillStorage)i.fillStorage(t,r,o,l);else for(var h=[],d=t;d<r;d++){h=i.getItem(d,h);for(var p=0;p<s;p++){var v=o[p],g=this._dimValueGetter(h,u[p],d,p);v[d]=g;var m=l[p];g<m[0]&&(m[0]=g),g>m[1]&&(m[1]=g)}}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=r,this._extent=[]},e.prototype.count=function(){return this._count},e.prototype.get=function(t,r){if(!(r>=0&&r<this._count))return NaN;var n=this._chunks[t];return n?n[this.getRawIndex(r)]:NaN},e.prototype.getValues=function(t,r){var n=[],i=[];if(r==null){r=t,t=[];for(var o=0;o<this._dimensions.length;o++)i.push(o)}else i=t;for(var o=0,a=i.length;o<a;o++)n.push(this.get(i[o],r));return n},e.prototype.getByRawIndex=function(t,r){if(!(r>=0&&r<this._rawCount))return NaN;var n=this._chunks[t];return n?n[r]:NaN},e.prototype.getSum=function(t){var r=this._chunks[t],n=0;if(r)for(var i=0,o=this.count();i<o;i++){var a=this.get(t,i);isNaN(a)||(n+=a)}return n},e.prototype.getMedian=function(t){var r=[];this.each([t],function(o){isNaN(o)||r.push(o)});var n=r.sort(function(o,a){return o-a}),i=this.count();return i===0?0:i%2===1?n[(i-1)/2]:(n[i/2]+n[i/2-1])/2},e.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var r=this._indices,n=r[t];if(n!=null&&n<this._count&&n===t)return t;for(var i=0,o=this._count-1;i<=o;){var a=(i+o)/2|0;if(r[a]<t)i=a+1;else if(r[a]>t)o=a-1;else return a}return-1},e.prototype.indicesOfNearest=function(t,r,n){var i=this._chunks,o=i[t],a=[];if(!o)return a;n==null&&(n=1/0);for(var s=1/0,l=-1,u=0,c=0,f=this.count();c<f;c++){var h=this.getRawIndex(c),d=r-o[h],p=Math.abs(d);p<=n&&((p<s||p===s&&d>=0&&l<0)&&(s=p,l=d,u=0),d===l&&(a[u++]=c))}return a.length=u,a},e.prototype.getIndices=function(){var t,r=this._indices;if(r){var n=r.constructor,i=this._count;if(n===Array){t=new n(i);for(var o=0;o<i;o++)t[o]=r[o]}else t=new n(r.buffer,0,i)}else{var n=sh(this._rawCount);t=new n(this.count());for(var o=0;o<t.length;o++)t[o]=o}return t},e.prototype.filter=function(t,r){if(!this._count)return this;for(var n=this.clone(),i=n.count(),o=sh(n._rawCount),a=new o(i),s=[],l=t.length,u=0,c=t[0],f=n._chunks,h=0;h<i;h++){var d=void 0,p=n.getRawIndex(h);if(l===0)d=r(h);else if(l===1){var v=f[c][p];d=r(v,h)}else{for(var g=0;g<l;g++)s[g]=f[t[g]][p];s[g]=h,d=r.apply(null,s)}d&&(a[u++]=p)}return u<i&&(n._indices=a),n._count=u,n._extent=[],n._updateGetRawIdx(),n},e.prototype.selectRange=function(t){var r=this.clone(),n=r._count;if(!n)return this;var i=ge(t),o=i.length;if(!o)return this;var a=r.count(),s=sh(r._rawCount),l=new s(a),u=0,c=i[0],f=t[c][0],h=t[c][1],d=r._chunks,p=!1;if(!r._indices){var v=0;if(o===1){for(var g=d[i[0]],m=0;m<n;m++){var _=g[m];(_>=f&&_<=h||isNaN(_))&&(l[u++]=v),v++}p=!0}else if(o===2){for(var g=d[i[0]],y=d[i[1]],w=t[i[1]][0],T=t[i[1]][1],m=0;m<n;m++){var _=g[m],S=y[m];(_>=f&&_<=h||isNaN(_))&&(S>=w&&S<=T||isNaN(S))&&(l[u++]=v),v++}p=!0}}if(!p)if(o===1)for(var m=0;m<a;m++){var P=r.getRawIndex(m),_=d[i[0]][P];(_>=f&&_<=h||isNaN(_))&&(l[u++]=P)}else for(var m=0;m<a;m++){for(var A=!0,P=r.getRawIndex(m),k=0;k<o;k++){var C=i[k],_=d[C][P];(_<t[C][0]||_>t[C][1])&&(A=!1)}A&&(l[u++]=r.getRawIndex(m))}return u<a&&(r._indices=l),r._count=u,r._extent=[],r._updateGetRawIdx(),r},e.prototype.map=function(t,r){var n=this.clone(t);return this._updateDims(n,t,r),n},e.prototype.modify=function(t,r){this._updateDims(this,t,r)},e.prototype._updateDims=function(t,r,n){for(var i=t._chunks,o=[],a=r.length,s=t.count(),l=[],u=t._rawExtent,c=0;c<r.length;c++)u[r[c]]=Gu();for(var f=0;f<s;f++){for(var h=t.getRawIndex(f),d=0;d<a;d++)l[d]=i[r[d]][h];l[a]=f;var p=n&&n.apply(null,l);if(p!=null){typeof p!="object"&&(o[0]=p,p=o);for(var c=0;c<p.length;c++){var v=r[c],g=p[c],m=u[v],_=i[v];_&&(_[h]=g),g<m[0]&&(m[0]=g),g>m[1]&&(m[1]=g)}}}},e.prototype.lttbDownSample=function(t,r){var n=this.clone([t],!0),i=n._chunks,o=i[t],a=this.count(),s=0,l=Math.floor(1/r),u=this.getRawIndex(0),c,f,h,d=new(sh(this._rawCount))(Math.min((Math.ceil(a/l)+2)*2,a));d[s++]=u;for(var p=1;p<a-1;p+=l){for(var v=Math.min(p+l,a-1),g=Math.min(p+l*2,a),m=(g+v)/2,_=0,y=v;y<g;y++){var w=this.getRawIndex(y),T=o[w];isNaN(T)||(_+=T)}_/=g-v;var S=p,P=Math.min(p+l,a),A=p-1,k=o[u];c=-1,h=S;for(var C=-1,M=0,y=S;y<P;y++){var w=this.getRawIndex(y),T=o[w];if(isNaN(T)){M++,C<0&&(C=w);continue}f=Math.abs((A-m)*(T-k)-(A-y)*(_-k)),f>c&&(c=f,h=w)}M>0&&M<P-S&&(d[s++]=Math.min(C,h),h=Math.max(C,h)),d[s++]=h,u=h}return d[s++]=this.getRawIndex(a-1),n._count=s,n._indices=d,n.getRawIndex=this._getRawIdx,n},e.prototype.downSample=function(t,r,n,i){for(var o=this.clone([t],!0),a=o._chunks,s=[],l=Math.floor(1/r),u=a[t],c=this.count(),f=o._rawExtent[t]=Gu(),h=new(sh(this._rawCount))(Math.ceil(c/l)),d=0,p=0;p<c;p+=l){l>c-p&&(l=c-p,s.length=l);for(var v=0;v<l;v++){var g=this.getRawIndex(p+v);s[v]=u[g]}var m=n(s),_=this.getRawIndex(Math.min(p+i(s,m)||0,c-1));u[_]=m,m<f[0]&&(f[0]=m),m>f[1]&&(f[1]=m),h[d++]=_}return o._count=d,o._indices=h,o._updateGetRawIdx(),o},e.prototype.each=function(t,r){if(!!this._count)for(var n=t.length,i=this._chunks,o=0,a=this.count();o<a;o++){var s=this.getRawIndex(o);switch(n){case 0:r(o);break;case 1:r(i[t[0]][s],o);break;case 2:r(i[t[0]][s],i[t[1]][s],o);break;default:for(var l=0,u=[];l<n;l++)u[l]=i[t[l]][s];u[l]=o,r.apply(null,u)}}},e.prototype.getDataExtent=function(t){var r=this._chunks[t],n=Gu();if(!r)return n;var i=this.count(),o=!this._indices,a;if(o)return this._rawExtent[t].slice();if(a=this._extent[t],a)return a.slice();a=n;for(var s=a[0],l=a[1],u=0;u<i;u++){var c=this.getRawIndex(u),f=r[c];f<s&&(s=f),f>l&&(l=f)}return a=[s,l],this._extent[t]=a,a},e.prototype.getRawDataItem=function(t){var r=this.getRawIndex(t);if(this._provider.persistent)return this._provider.getItem(r);for(var n=[],i=this._chunks,o=0;o<i.length;o++)n.push(i[o][r]);return n},e.prototype.clone=function(t,r){var n=new e,i=this._chunks,o=t&&hu(t,function(s,l){return s[l]=!0,s},{});if(o)for(var a=0;a<i.length;a++)n._chunks[a]=o[a]?Get(i[a]):i[a];else n._chunks=i;return this._copyCommonProps(n),r||(n._indices=this._cloneIndices()),n._updateGetRawIdx(),n},e.prototype._copyCommonProps=function(t){t._count=this._count,t._rawCount=this._rawCount,t._provider=this._provider,t._dimensions=this._dimensions,t._extent=zt(this._extent),t._rawExtent=zt(this._rawExtent)},e.prototype._cloneIndices=function(){if(this._indices){var t=this._indices.constructor,r=void 0;if(t===Array){var n=this._indices.length;r=new t(n);for(var i=0;i<n;i++)r[i]=this._indices[i]}else r=new t(this._indices);return r}return null},e.prototype._getRawIdxIdentity=function(t){return t},e.prototype._getRawIdx=function(t){return t<this._count&&t>=0?this._indices[t]:-1},e.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},e.internalField=function(){function t(r,n,i,o){return Ts(r[o],this._dimensions[o])}d2={arrayRows:t,objectRows:function(r,n,i,o){return Ts(r[n],this._dimensions[o])},keyedColumns:t,original:function(r,n,i,o){var a=r&&(r.value==null?r:r.value);return Ts(a instanceof Array?a[o]:a,this._dimensions[o])},typedArray:function(r,n,i,o){return r[o]}}}(),e}();const e3=jet;var rF=function(){function e(t){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=t}return e.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},e.prototype._setLocalSource=function(t,r){this._sourceList=t,this._upstreamSignList=r,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},e.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},e.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},e.prototype._createSource=function(){this._setLocalSource([],[]);var t=this._sourceHost,r=this._getUpstreamSourceManagers(),n=!!r.length,i,o;if(Up(t)){var a=t,s=void 0,l=void 0,u=void 0;if(n){var c=r[0];c.prepareSource(),u=c.getSource(),s=u.data,l=u.sourceFormat,o=[c._getVersionSign()]}else s=a.get("data",!0),l=In(s)?Ss:si,o=[];var f=this._getSourceMetaRawOption()||{},h=u&&u.metaRawOption||{},d=qt(f.seriesLayoutBy,h.seriesLayoutBy)||null,p=qt(f.sourceHeader,h.sourceHeader),v=qt(f.dimensions,h.dimensions),g=d!==h.seriesLayoutBy||!!p!=!!h.sourceHeader||v;i=g?[t3(s,{seriesLayoutBy:d,sourceHeader:p,dimensions:v},l)]:[]}else{var m=t;if(n){var _=this._applyTransform(r);i=_.sourceList,o=_.upstreamSignList}else{var y=m.get("source",!0);i=[t3(y,this._getSourceMetaRawOption(),null)],o=[]}}this._setLocalSource(i,o)},e.prototype._applyTransform=function(t){var r=this._sourceHost,n=r.get("transform",!0),i=r.get("fromTransformResult",!0);if(i!=null){var o="";t.length!==1&&I4(o)}var a,s=[],l=[];return F(t,function(u){u.prepareSource();var c=u.getSource(i||0),f="";i!=null&&!c&&I4(f),s.push(c),l.push(u._getVersionSign())}),n?a=$et(n,s,{datasetIndex:r.componentIndex}):i!=null&&(a=[yet(s[0])]),{sourceList:a,upstreamSignList:l}},e.prototype._isDirty=function(){if(this._dirty)return!0;for(var t=this._getUpstreamSourceManagers(),r=0;r<t.length;r++){var n=t[r];if(n._isDirty()||this._upstreamSignList[r]!==n._getVersionSign())return!0}},e.prototype.getSource=function(t){t=t||0;var r=this._sourceList[t];if(!r){var n=this._getUpstreamSourceManagers();return n[0]&&n[0].getSource(t)}return r},e.prototype.getSharedDataStore=function(t){var r=t.makeStoreSchema();return this._innerGetDataStore(r.dimensions,t.source,r.hash)},e.prototype._innerGetDataStore=function(t,r,n){var i=0,o=this._storeList,a=o[i];a||(a=o[i]={});var s=a[n];if(!s){var l=this._getUpstreamSourceManagers()[0];Up(this._sourceHost)&&l?s=l._innerGetDataStore(t,r,n):(s=new e3,s.initData(new WN(r,t.length),t)),a[n]=s}return s},e.prototype._getUpstreamSourceManagers=function(){var t=this._sourceHost;if(Up(t)){var r=NN(t);return r?[r.getSourceManager()]:[]}else return Ct(Gtt(t),function(n){return n.getSourceManager()})},e.prototype._getSourceMetaRawOption=function(){var t=this._sourceHost,r,n,i;if(Up(t))r=t.get("seriesLayoutBy",!0),n=t.get("sourceHeader",!0),i=t.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var o=t;r=o.get("seriesLayoutBy",!0),n=o.get("sourceHeader",!0),i=o.get("dimensions",!0)}return{seriesLayoutBy:r,sourceHeader:n,dimensions:i}},e}();function L4(e){var t=e.option.transform;t&&Em(e.option.transform)}function Up(e){return e.mainType==="series"}function I4(e){throw new Error(e)}var nF="line-height:1";function iF(e,t){var r=e.color||"#6e7079",n=e.fontSize||12,i=e.fontWeight||"400",o=e.color||"#464646",a=e.fontSize||14,s=e.fontWeight||"900";return t==="html"?{nameStyle:"font-size:"+Zn(n+"")+"px;color:"+Zn(r)+";font-weight:"+Zn(i+""),valueStyle:"font-size:"+Zn(a+"")+"px;color:"+Zn(o)+";font-weight:"+Zn(s+"")}:{nameStyle:{fontSize:n,fill:r,fontWeight:i},valueStyle:{fontSize:a,fill:o,fontWeight:s}}}var Wet=[0,10,20,30],Het=["",`
`,`

`,`


`];function Is(e,t){return t.type=e,t}function r3(e){return e.type==="section"}function oF(e){return r3(e)?Xet:Yet}function aF(e){if(r3(e)){var t=0,r=e.blocks.length,n=r>1||r>0&&!e.noHeader;return F(e.blocks,function(i){var o=aF(i);o>=t&&(t=o+ +(n&&(!o||r3(i)&&!i.noHeader)))}),t}return 0}function Xet(e,t,r,n){var i=t.noHeader,o=qet(aF(t)),a=[],s=t.blocks||[];Fi(!s||ct(s)),s=s||[];var l=e.orderMode;if(t.sortBlocks&&l){s=s.slice();var u={valueAsc:"asc",valueDesc:"desc"};if(dt(u,l)){var c=new JN(u[l],null);s.sort(function(p,v){return c.evaluate(p.sortParam,v.sortParam)})}else l==="seriesDesc"&&s.reverse()}F(s,function(p,v){var g=t.valueFormatter,m=oF(p)(g?at(at({},e),{valueFormatter:g}):e,p,v>0?o.html:0,n);m!=null&&a.push(m)});var f=e.renderMode==="richText"?a.join(o.richText):n3(a.join(""),i?r:o.html);if(i)return f;var h=QS(t.header,"ordinal",e.useUTC),d=iF(n,e.renderMode).nameStyle;return e.renderMode==="richText"?sF(e,h,d)+o.richText+f:n3('<div style="'+d+";"+nF+';">'+Zn(h)+"</div>"+f,r)}function Yet(e,t,r,n){var i=e.renderMode,o=t.noName,a=t.noValue,s=!t.markerType,l=t.name,u=e.useUTC,c=t.valueFormatter||e.valueFormatter||function(w){return w=ct(w)?w:[w],Ct(w,function(T,S){return QS(T,ct(d)?d[S]:d,u)})};if(!(o&&a)){var f=s?"":e.markupStyleCreator.makeTooltipMarker(t.markerType,t.markerColor||"#333",i),h=o?"":QS(l,"ordinal",u),d=t.valueType,p=a?[]:c(t.value),v=!s||!o,g=!s&&o,m=iF(n,i),_=m.nameStyle,y=m.valueStyle;return i==="richText"?(s?"":f)+(o?"":sF(e,h,_))+(a?"":Jet(e,p,v,g,y)):n3((s?"":f)+(o?"":Zet(h,!s,_))+(a?"":Ket(p,v,g,y)),r)}}function O4(e,t,r,n,i,o){if(!!e){var a=oF(e),s={useUTC:i,renderMode:r,orderMode:n,markupStyleCreator:t,valueFormatter:e.valueFormatter};return a(s,e,0,o)}}function qet(e){return{html:Wet[e],richText:Het[e]}}function n3(e,t){var r='<div style="clear:both"></div>',n="margin: "+t+"px 0 0";return'<div style="'+n+";"+nF+';">'+e+r+"</div>"}function Zet(e,t,r){var n=t?"margin-left:2px":"";return'<span style="'+r+";"+n+'">'+Zn(e)+"</span>"}function Ket(e,t,r,n){var i=r?"10px":"20px",o=t?"float:right;margin-left:"+i:"";return e=ct(e)?e:[e],'<span style="'+o+";"+n+'">'+Ct(e,function(a){return Zn(a)}).join("&nbsp;&nbsp;")+"</span>"}function sF(e,t,r){return e.markupStyleCreator.wrapRichTextStyle(t,r)}function Jet(e,t,r,n,i){var o=[i],a=n?10:20;return r&&o.push({padding:[0,0,0,a],align:"right"}),e.markupStyleCreator.wrapRichTextStyle(ct(t)?t.join("  "):t,o)}function Qet(e,t){var r=e.getData().getItemVisual(t,"style"),n=r[e.visualDrawType];return ru(n)}function lF(e,t){var r=e.get("padding");return r!=null?r:t==="richText"?[8,10]:10}var p2=function(){function e(){this.richTextStyles={},this._nextStyleNameId=g9()}return e.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},e.prototype.makeTooltipMarker=function(t,r,n){var i=n==="richText"?this._generateStyleName():null,o=Rtt({color:r,type:t,renderMode:n,markerId:i});return Et(o)?o:(this.richTextStyles[i]=o.style,o.content)},e.prototype.wrapRichTextStyle=function(t,r){var n={};ct(r)?F(r,function(o){return at(n,o)}):at(n,r);var i=this._generateStyleName();return this.richTextStyles[i]=n,"{"+i+"|"+t+"}"},e}();function trt(e){var t=e.series,r=e.dataIndex,n=e.multipleSeries,i=t.getData(),o=i.mapDimensionsAll("defaultedTooltip"),a=o.length,s=t.getRawValue(r),l=ct(s),u=Qet(t,r),c,f,h,d;if(a>1||l&&!a){var p=ert(s,t,r,o,u);c=p.inlineValues,f=p.inlineValueTypes,h=p.blocks,d=p.inlineValues[0]}else if(a){var v=i.getDimensionInfo(o[0]);d=c=Kc(i,r,o[0]),f=v.type}else d=c=l?s[0]:s;var g=BP(t),m=g&&t.name||"",_=i.getName(r),y=n?m:_;return Is("section",{header:m,noHeader:n||!g,sortParam:d,blocks:[Is("nameValue",{markerType:"item",markerColor:u,name:y,noName:!So(y),value:c,valueType:f})].concat(h||[])})}function ert(e,t,r,n,i){var o=t.getData(),a=hu(e,function(f,h,d){var p=o.getDimensionInfo(d);return f=f||p&&p.tooltip!==!1&&p.displayName!=null},!1),s=[],l=[],u=[];n.length?F(n,function(f){c(Kc(o,r,f),f)}):F(e,c);function c(f,h){var d=o.getDimensionInfo(h);!d||d.otherDims.tooltip===!1||(a?u.push(Is("nameValue",{markerType:"subItem",markerColor:i,name:d.displayName,value:f,valueType:d.type})):(s.push(f),l.push(d.type)))}return{inlineValues:s,inlineValueTypes:l,blocks:u}}var Ba=Oe();function Gp(e,t){return e.getName(t)||e.getId(t)}var rrt="__universalTransitionEnabled",f_=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._selectedDataIndicesMap={},r}return t.prototype.init=function(r,n,i){this.seriesIndex=this.componentIndex,this.dataTask=Ed({count:irt,reset:ort}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(r,i);var o=Ba(this).sourceManager=new rF(this);o.prepareSource();var a=this.getInitialData(r,i);D4(a,this),this.dataTask.context.data=a,Ba(this).dataBeforeProcessed=a,R4(this),this._initSelectedMapFromData(a)},t.prototype.mergeDefaultAndTheme=function(r,n){var i=n0(this),o=i?l_(r):{},a=this.subType;Ce.hasClass(a)&&(a+="Series"),oe(r,n.getTheme().get(this.subType)),oe(r,this.getDefaultOption()),$S(r,"label",["show"]),this.fillDataTextStyle(r.data),i&&Zc(r,o,i)},t.prototype.mergeOption=function(r,n){r=oe(this.option,r,!0),this.fillDataTextStyle(r.data);var i=n0(this);i&&Zc(this.option,r,i);var o=Ba(this).sourceManager;o.dirty(),o.prepareSource();var a=this.getInitialData(r,n);D4(a,this),this.dataTask.dirty(),this.dataTask.context.data=a,Ba(this).dataBeforeProcessed=a,R4(this),this._initSelectedMapFromData(a)},t.prototype.fillDataTextStyle=function(r){if(r&&!In(r))for(var n=["show"],i=0;i<r.length;i++)r[i]&&r[i].label&&$S(r[i],"label",n)},t.prototype.getInitialData=function(r,n){},t.prototype.appendData=function(r){var n=this.getRawData();n.appendData(r.data)},t.prototype.getData=function(r){var n=i3(this);if(n){var i=n.context.data;return r==null?i:i.getLinkedData(r)}else return Ba(this).data},t.prototype.getAllData=function(){var r=this.getData();return r&&r.getLinkedDataAll?r.getLinkedDataAll():[{data:r}]},t.prototype.setData=function(r){var n=i3(this);if(n){var i=n.context;i.outputData=r,n!==this.dataTask&&(i.data=r)}Ba(this).data=r},t.prototype.getEncode=function(){var r=this.get("encode",!0);if(r)return jt(r)},t.prototype.getSourceManager=function(){return Ba(this).sourceManager},t.prototype.getSource=function(){return this.getSourceManager().getSource()},t.prototype.getRawData=function(){return Ba(this).dataBeforeProcessed},t.prototype.getColorBy=function(){var r=this.get("colorBy");return r||"series"},t.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},t.prototype.getBaseAxis=function(){var r=this.coordinateSystem;return r&&r.getBaseAxis&&r.getBaseAxis()},t.prototype.formatTooltip=function(r,n,i){return trt({series:this,dataIndex:r,multipleSeries:n})},t.prototype.isAnimationEnabled=function(){var r=this.ecModel;if(Xt.node&&!(r&&r.ssr))return!1;var n=this.getShallow("animation");return n&&this.getData().count()>this.getShallow("animationThreshold")&&(n=!1),!!n},t.prototype.restoreData=function(){this.dataTask.dirty()},t.prototype.getColorFromPalette=function(r,n,i){var o=this.ecModel,a=sE.prototype.getColorFromPalette.call(this,r,n,i);return a||(a=o.getColorFromPalette(r,n,i)),a},t.prototype.coordDimToDataDim=function(r){return this.getRawData().mapDimensionsAll(r)},t.prototype.getProgressive=function(){return this.get("progressive")},t.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},t.prototype.select=function(r,n){this._innerSelect(this.getData(n),r)},t.prototype.unselect=function(r,n){var i=this.option.selectedMap;if(!!i){var o=this.option.selectedMode,a=this.getData(n);if(o==="series"||i==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var s=0;s<r.length;s++){var l=r[s],u=Gp(a,l);i[u]=!1,this._selectedDataIndicesMap[u]=-1}}},t.prototype.toggleSelect=function(r,n){for(var i=[],o=0;o<r.length;o++)i[0]=r[o],this.isSelected(r[o],n)?this.unselect(i,n):this.select(i,n)},t.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var r=this._selectedDataIndicesMap,n=ge(r),i=[],o=0;o<n.length;o++){var a=r[n[o]];a>=0&&i.push(a)}return i},t.prototype.isSelected=function(r,n){var i=this.option.selectedMap;if(!i)return!1;var o=this.getData(n);return(i==="all"||i[Gp(o,r)])&&!o.getItemModel(r).get(["select","disabled"])},t.prototype.isUniversalTransitionEnabled=function(){if(this[rrt])return!0;var r=this.option.universalTransition;return r?r===!0?!0:r&&r.enabled:!1},t.prototype._innerSelect=function(r,n){var i,o,a=this.option,s=a.selectedMode,l=n.length;if(!(!s||!l)){if(s==="series")a.selectedMap="all";else if(s==="multiple"){Ot(a.selectedMap)||(a.selectedMap={});for(var u=a.selectedMap,c=0;c<l;c++){var f=n[c],h=Gp(r,f);u[h]=!0,this._selectedDataIndicesMap[h]=r.getRawIndex(f)}}else if(s==="single"||s===!0){var d=n[l-1],h=Gp(r,d);a.selectedMap=(i={},i[h]=!0,i),this._selectedDataIndicesMap=(o={},o[h]=r.getRawIndex(d),o)}}},t.prototype._initSelectedMapFromData=function(r){if(!this.option.selectedMap){var n=[];r.hasItemOption&&r.each(function(i){var o=r.getRawDataItem(i);o&&o.selected&&n.push(i)}),n.length>0&&this._innerSelect(r,n)}},t.registerClass=function(r){return Ce.registerClass(r)},t.protoInitialize=function(){var r=t.prototype;r.type="series.__base__",r.seriesIndex=0,r.ignoreStyleOnData=!1,r.hasSymbolVisual=!1,r.defaultSymbol="circle",r.visualStyleAccessPath="itemStyle",r.visualDrawType="fill"}(),t}(Ce);Ui(f_,qN);Ui(f_,sE);S9(f_,Ce);function R4(e){var t=e.name;BP(e)||(e.name=nrt(e)||t)}function nrt(e){var t=e.getRawData(),r=t.mapDimensionsAll("seriesName"),n=[];return F(r,function(i){var o=t.getDimensionInfo(i);o.displayName&&n.push(o.displayName)}),n.join(" ")}function irt(e){return e.model.getRawData().count()}function ort(e){var t=e.model;return t.setData(t.getRawData().cloneShallow()),art}function art(e,t){t.outputData&&e.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function D4(e,t){F(U7(e.CHANGABLE_METHODS,e.DOWNSAMPLE_METHODS),function(r){e.wrapMethod(r,be(srt,t))})}function srt(e,t){var r=i3(e);return r&&r.setOutputEnd((t||this).count()),t}function i3(e){var t=(e.ecModel||{}).scheduler,r=t&&t.getPipeline(e.uid);if(r){var n=r.currentTask;if(n){var i=n.agentStubMap;i&&(n=i.get(e.uid))}return n}}const Lo=f_;var dE=function(){function e(){this.group=new De,this.uid=e_("viewComponent")}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,n,i){},e.prototype.dispose=function(t,r){},e.prototype.updateView=function(t,r,n,i){},e.prototype.updateLayout=function(t,r,n,i){},e.prototype.updateVisual=function(t,r,n,i){},e.prototype.toggleBlurSeries=function(t,r,n){},e.prototype.eachRendered=function(t){var r=this.group;r&&r.traverse(t)},e}();zP(dE);H1(dE);const oi=dE;function pE(){var e=Oe();return function(t){var r=e(t),n=t.pipelineContext,i=!!r.large,o=!!r.progressiveRender,a=r.large=!!(n&&n.large),s=r.progressiveRender=!!(n&&n.progressiveRender);return(i!==a||o!==s)&&"reset"}}var uF=Oe(),lrt=pE(),vE=function(){function e(){this.group=new De,this.uid=e_("viewChart"),this.renderTask=Ed({plan:urt,reset:crt}),this.renderTask.context={view:this}}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,n,i){},e.prototype.highlight=function(t,r,n,i){var o=t.getData(i&&i.dataType);!o||F4(o,i,"emphasis")},e.prototype.downplay=function(t,r,n,i){var o=t.getData(i&&i.dataType);!o||F4(o,i,"normal")},e.prototype.remove=function(t,r){this.group.removeAll()},e.prototype.dispose=function(t,r){},e.prototype.updateView=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.updateLayout=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.updateVisual=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.eachRendered=function(t){vf(this.group,t)},e.markUpdateMethod=function(t,r){uF(t).updateMethod=r},e.protoInitialize=function(){var t=e.prototype;t.type="chart"}(),e}();function N4(e,t,r){e&&YS(e)&&(t==="emphasis"?Zd:Kd)(e,r)}function F4(e,t,r){var n=Jl(e,t),i=t&&t.highlightKey!=null?gQ(t.highlightKey):null;n!=null?F(Ze(n),function(o){N4(e.getItemGraphicEl(o),r,i)}):e.eachItemGraphicEl(function(o){N4(o,r,i)})}zP(vE);H1(vE);function urt(e){return lrt(e.model)}function crt(e){var t=e.model,r=e.ecModel,n=e.api,i=e.payload,o=t.pipelineContext.progressiveRender,a=e.view,s=i&&uF(i).updateMethod,l=o?"incrementalPrepareRender":s&&a[s]?s:"render";return l!=="render"&&a[l](t,r,n,i),frt[l]}var frt={incrementalPrepareRender:{progress:function(e,t){t.view.incrementalRender(e,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(e,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}};const ei=vE;var zm="\0__throttleOriginMethod",B4="\0__throttleRate",$4="\0__throttleType";function h_(e,t,r){var n,i=0,o=0,a=null,s,l,u,c;t=t||0;function f(){o=new Date().getTime(),a=null,e.apply(l,u||[])}var h=function(){for(var d=[],p=0;p<arguments.length;p++)d[p]=arguments[p];n=new Date().getTime(),l=this,u=d;var v=c||t,g=c||r;c=null,s=n-(g?i:o)-v,clearTimeout(a),g?a=setTimeout(f,v):s>=0?f():a=setTimeout(f,-s),i=n};return h.clear=function(){a&&(clearTimeout(a),a=null)},h.debounceNextCall=function(d){c=d},h}function cF(e,t,r,n){var i=e[t];if(!!i){var o=i[zm]||i,a=i[$4],s=i[B4];if(s!==r||a!==n){if(r==null||!n)return e[t]=o;i=e[t]=h_(o,r,n==="debounce"),i[zm]=o,i[$4]=n,i[B4]=r}return i}}function o3(e,t){var r=e[t];r&&r[zm]&&(r.clear&&r.clear(),e[t]=r[zm])}var z4=Oe(),V4={itemStyle:qd(_N,!0),lineStyle:qd(mN,!0)},hrt={lineStyle:"stroke",itemStyle:"fill"};function fF(e,t){var r=e.visualStyleMapper||V4[t];return r||(console.warn("Unkown style type '"+t+"'."),V4.itemStyle)}function hF(e,t){var r=e.visualDrawType||hrt[t];return r||(console.warn("Unkown style type '"+t+"'."),"fill")}var drt={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData(),n=e.visualStyleAccessPath||"itemStyle",i=e.getModel(n),o=fF(e,n),a=o(i),s=i.getShallow("decal");s&&(r.setVisual("decal",s),s.dirty=!0);var l=hF(e,n),u=a[l],c=Ut(u)?u:null,f=a.fill==="auto"||a.stroke==="auto";if(!a[l]||c||f){var h=e.getColorFromPalette(e.name,null,t.getSeriesCount());a[l]||(a[l]=h,r.setVisual("colorFromPalette",!0)),a.fill=a.fill==="auto"||Ut(a.fill)?h:a.fill,a.stroke=a.stroke==="auto"||Ut(a.stroke)?h:a.stroke}if(r.setVisual("style",a),r.setVisual("drawType",l),!t.isSeriesFiltered(e)&&c)return r.setVisual("colorFromPalette",!1),{dataEach:function(d,p){var v=e.getDataParams(p),g=at({},a);g[l]=c(v),d.setItemVisual(p,"style",g)}}}},lh=new Pr,prt={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!(e.ignoreStyleOnData||t.isSeriesFiltered(e))){var r=e.getData(),n=e.visualStyleAccessPath||"itemStyle",i=fF(e,n),o=r.getVisual("drawType");return{dataEach:r.hasItemOption?function(a,s){var l=a.getRawDataItem(s);if(l&&l[n]){lh.option=l[n];var u=i(lh),c=a.ensureUniqueItemVisual(s,"style");at(c,u),lh.option.decal&&(a.setItemVisual(s,"decal",lh.option.decal),lh.option.decal.dirty=!0),o in u&&a.setItemVisual(s,"colorFromPalette",!1)}}:null}}}},vrt={performRawSeries:!0,overallReset:function(e){var t=jt();e.eachSeries(function(r){var n=r.getColorBy();if(!r.isColorBySeries()){var i=r.type+"-"+n,o=t.get(i);o||(o={},t.set(i,o)),z4(r).scope=o}}),e.eachSeries(function(r){if(!(r.isColorBySeries()||e.isSeriesFiltered(r))){var n=r.getRawData(),i={},o=r.getData(),a=z4(r).scope,s=r.visualStyleAccessPath||"itemStyle",l=hF(r,s);o.each(function(u){var c=o.getRawIndex(u);i[c]=u}),n.each(function(u){var c=i[u],f=o.getItemVisual(c,"colorFromPalette");if(f){var h=o.ensureUniqueItemVisual(c,"style"),d=n.getName(u)||u+"",p=n.count();h[l]=r.getColorFromPalette(d,a,p)}})}})}},jp=Math.PI;function grt(e,t){t=t||{},te(t,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var r=new De,n=new Ke({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});r.add(n);var i=new Je({style:{text:t.text,fill:t.textColor,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily},zlevel:t.zlevel,z:10001}),o=new Ke({style:{fill:"none"},textContent:i,textConfig:{position:"right",distance:10},zlevel:t.zlevel,z:10001});r.add(o);var a;return t.showSpinner&&(a=new qP({shape:{startAngle:-jp/2,endAngle:-jp/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001}),a.animateShape(!0).when(1e3,{endAngle:jp*3/2}).start("circularInOut"),a.animateShape(!0).when(1e3,{startAngle:jp*3/2}).delay(300).start("circularInOut"),r.add(a)),r.resize=function(){var s=i.getBoundingRect().width,l=t.showSpinner?t.spinnerRadius:0,u=(e.getWidth()-l*2-(t.showSpinner&&s?10:0)-s)/2-(t.showSpinner&&s?0:5+s/2)+(t.showSpinner?0:s/2)+(s?0:l),c=e.getHeight()/2;t.showSpinner&&a.setShape({cx:u,cy:c}),o.setShape({x:u-l,y:c-l,width:l*2,height:l*2}),n.setShape({x:0,y:0,width:e.getWidth(),height:e.getHeight()})},r.resize(),r}var mrt=function(){function e(t,r,n,i){this._stageTaskMap=jt(),this.ecInstance=t,this.api=r,n=this._dataProcessorHandlers=n.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=n.concat(i)}return e.prototype.restoreData=function(t,r){t.restoreData(r),this._stageTaskMap.each(function(n){var i=n.overallTask;i&&i.dirty()})},e.prototype.getPerformArgs=function(t,r){if(!!t.__pipeline){var n=this._pipelineMap.get(t.__pipeline.id),i=n.context,o=!r&&n.progressiveEnabled&&(!i||i.progressiveRender)&&t.__idxInPipeline>n.blockIndex,a=o?n.step:null,s=i&&i.modDataCount,l=s!=null?Math.ceil(s/a):null;return{step:a,modBy:l,modDataCount:s}}},e.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},e.prototype.updateStreamModes=function(t,r){var n=this._pipelineMap.get(t.uid),i=t.getData(),o=i.count(),a=n.progressiveEnabled&&r.incrementalPrepareRender&&o>=n.threshold,s=t.get("large")&&o>=t.get("largeThreshold"),l=t.get("progressiveChunkMode")==="mod"?o:null;t.pipelineContext=n.context={progressiveRender:a,modDataCount:l,large:s}},e.prototype.restorePipelines=function(t){var r=this,n=r._pipelineMap=jt();t.eachSeries(function(i){var o=i.getProgressive(),a=i.uid;n.set(a,{id:a,head:null,tail:null,threshold:i.getProgressiveThreshold(),progressiveEnabled:o&&!(i.preventIncremental&&i.preventIncremental()),blockIndex:-1,step:Math.round(o||700),count:0}),r._pipe(i,i.dataTask)})},e.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,r=this.api.getModel(),n=this.api;F(this._allHandlers,function(i){var o=t.get(i.uid)||t.set(i.uid,{}),a="";Fi(!(i.reset&&i.overallReset),a),i.reset&&this._createSeriesStageTask(i,o,r,n),i.overallReset&&this._createOverallStageTask(i,o,r,n)},this)},e.prototype.prepareView=function(t,r,n,i){var o=t.renderTask,a=o.context;a.model=r,a.ecModel=n,a.api=i,o.__block=!t.incrementalPrepareRender,this._pipe(r,o)},e.prototype.performDataProcessorTasks=function(t,r){this._performStageTasks(this._dataProcessorHandlers,t,r,{block:!0})},e.prototype.performVisualTasks=function(t,r,n){this._performStageTasks(this._visualHandlers,t,r,n)},e.prototype._performStageTasks=function(t,r,n,i){i=i||{};var o=!1,a=this;F(t,function(l,u){if(!(i.visualType&&i.visualType!==l.visualType)){var c=a._stageTaskMap.get(l.uid),f=c.seriesTaskMap,h=c.overallTask;if(h){var d,p=h.agentStubMap;p.each(function(g){s(i,g)&&(g.dirty(),d=!0)}),d&&h.dirty(),a.updatePayload(h,n);var v=a.getPerformArgs(h,i.block);p.each(function(g){g.perform(v)}),h.perform(v)&&(o=!0)}else f&&f.each(function(g,m){s(i,g)&&g.dirty();var _=a.getPerformArgs(g,i.block);_.skip=!l.performRawSeries&&r.isSeriesFiltered(g.context.model),a.updatePayload(g,n),g.perform(_)&&(o=!0)})}});function s(l,u){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(u.__pipeline.id))}this.unfinished=o||this.unfinished},e.prototype.performSeriesTasks=function(t){var r;t.eachSeries(function(n){r=n.dataTask.perform()||r}),this.unfinished=r||this.unfinished},e.prototype.plan=function(){this._pipelineMap.each(function(t){var r=t.tail;do{if(r.__block){t.blockIndex=r.__idxInPipeline;break}r=r.getUpstream()}while(r)})},e.prototype.updatePayload=function(t,r){r!=="remain"&&(t.context.payload=r)},e.prototype._createSeriesStageTask=function(t,r,n,i){var o=this,a=r.seriesTaskMap,s=r.seriesTaskMap=jt(),l=t.seriesType,u=t.getTargetSeries;t.createOnAllSeries?n.eachRawSeries(c):l?n.eachRawSeriesByType(l,c):u&&u(n,i).each(c);function c(f){var h=f.uid,d=s.set(h,a&&a.get(h)||Ed({plan:Srt,reset:Trt,count:Ert}));d.context={model:f,ecModel:n,api:i,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:o},o._pipe(f,d)}},e.prototype._createOverallStageTask=function(t,r,n,i){var o=this,a=r.overallTask=r.overallTask||Ed({reset:_rt});a.context={ecModel:n,api:i,overallReset:t.overallReset,scheduler:o};var s=a.agentStubMap,l=a.agentStubMap=jt(),u=t.seriesType,c=t.getTargetSeries,f=!0,h=!1,d="";Fi(!t.createOnAllSeries,d),u?n.eachRawSeriesByType(u,p):c?c(n,i).each(p):(f=!1,F(n.getSeries(),p));function p(v){var g=v.uid,m=l.set(g,s&&s.get(g)||(h=!0,Ed({reset:yrt,onDirty:wrt})));m.context={model:v,overallProgress:f},m.agent=a,m.__block=f,o._pipe(v,m)}h&&a.dirty()},e.prototype._pipe=function(t,r){var n=t.uid,i=this._pipelineMap.get(n);!i.head&&(i.head=r),i.tail&&i.tail.pipe(r),i.tail=r,r.__idxInPipeline=i.count++,r.__pipeline=i},e.wrapStageHandler=function(t,r){return Ut(t)&&(t={overallReset:t,seriesType:krt(t)}),t.uid=e_("stageHandler"),r&&(t.visualType=r),t},e}();function _rt(e){e.overallReset(e.ecModel,e.api,e.payload)}function yrt(e){return e.overallProgress&&brt}function brt(){this.agent.dirty(),this.getDownstream().dirty()}function wrt(){this.agent&&this.agent.dirty()}function Srt(e){return e.plan?e.plan(e.model,e.ecModel,e.api,e.payload):null}function Trt(e){e.useClearVisual&&e.data.clearAllVisual();var t=e.resetDefines=Ze(e.reset(e.model,e.ecModel,e.api,e.payload));return t.length>1?Ct(t,function(r,n){return dF(n)}):Prt}var Prt=dF(0);function dF(e){return function(t,r){var n=r.data,i=r.resetDefines[e];if(i&&i.dataEach)for(var o=t.start;o<t.end;o++)i.dataEach(n,o);else i&&i.progress&&i.progress(t,n)}}function Ert(e){return e.data.count()}function krt(e){Vm=null;try{e(o0,pF)}catch{}return Vm}var o0={},pF={},Vm;vF(o0,$N);vF(pF,zN);o0.eachSeriesByType=o0.eachRawSeriesByType=function(e){Vm=e};o0.eachComponent=function(e){e.mainType==="series"&&e.subType&&(Vm=e.subType)};function vF(e,t){for(var r in t.prototype)e[r]=Gr}const gF=mrt;var U4=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const Art={color:U4,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],U4]};var Kr="#B9B8CE",G4="#100C2A",Wp=function(){return{axisLine:{lineStyle:{color:Kr}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},j4=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],mF={darkMode:!0,color:j4,backgroundColor:G4,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:Kr}},textStyle:{color:Kr},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:Kr}},dataZoom:{borderColor:"#71708A",textStyle:{color:Kr},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:Kr}},timeline:{lineStyle:{color:Kr},label:{color:Kr},controlStyle:{color:Kr,borderColor:Kr}},calendar:{itemStyle:{color:G4},dayLabel:{color:Kr},monthLabel:{color:Kr},yearLabel:{color:Kr}},timeAxis:Wp(),logAxis:Wp(),valueAxis:Wp(),categoryAxis:Wp(),line:{symbol:"circle"},graph:{color:j4},gauge:{title:{color:Kr},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:Kr},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};mF.categoryAxis.splitLine.show=!1;const Crt=mF;var Mrt=function(){function e(){}return e.prototype.normalizeQuery=function(t){var r={},n={},i={};if(Et(t)){var o=Po(t);r.mainType=o.main||null,r.subType=o.sub||null}else{var a=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1};F(t,function(l,u){for(var c=!1,f=0;f<a.length;f++){var h=a[f],d=u.lastIndexOf(h);if(d>0&&d===u.length-h.length){var p=u.slice(0,d);p!=="data"&&(r.mainType=p,r[h.toLowerCase()]=l,c=!0)}}s.hasOwnProperty(u)&&(n[u]=l,c=!0),c||(i[u]=l)})}return{cptQuery:r,dataQuery:n,otherQuery:i}},e.prototype.filter=function(t,r){var n=this.eventInfo;if(!n)return!0;var i=n.targetEl,o=n.packedEvent,a=n.model,s=n.view;if(!a||!s)return!0;var l=r.cptQuery,u=r.dataQuery;return c(l,a,"mainType")&&c(l,a,"subType")&&c(l,a,"index","componentIndex")&&c(l,a,"name")&&c(l,a,"id")&&c(u,o,"name")&&c(u,o,"dataIndex")&&c(u,o,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(t,r.otherQuery,i,o));function c(f,h,d,p){return f[d]==null||h[p||d]===f[d]}},e.prototype.afterTrigger=function(){this.eventInfo=null},e}(),a3=["symbol","symbolSize","symbolRotate","symbolOffset"],W4=a3.concat(["symbolKeepAspect"]),xrt={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData();if(e.legendIcon&&r.setVisual("legendIcon",e.legendIcon),!e.hasSymbolVisual)return;for(var n={},i={},o=!1,a=0;a<a3.length;a++){var s=a3[a],l=e.get(s);Ut(l)?(o=!0,i[s]=l):n[s]=l}if(n.symbol=n.symbol||e.defaultSymbol,r.setVisual(at({legendIcon:e.legendIcon||n.symbol,symbolKeepAspect:e.get("symbolKeepAspect")},n)),t.isSeriesFiltered(e))return;var u=ge(i);function c(f,h){for(var d=e.getRawValue(h),p=e.getDataParams(h),v=0;v<u.length;v++){var g=u[v];f.setItemVisual(h,g,i[g](d,p))}}return{dataEach:o?c:null}}},Lrt={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!e.hasSymbolVisual||t.isSeriesFiltered(e))return;var r=e.getData();function n(i,o){for(var a=i.getItemModel(o),s=0;s<W4.length;s++){var l=W4[s],u=a.getShallow(l,!0);u!=null&&i.setItemVisual(o,l,u)}}return{dataEach:r.hasItemOption?n:null}}};function _F(e,t,r){switch(r){case"color":var n=e.getItemVisual(t,"style");return n[e.getVisual("drawType")];case"opacity":return e.getItemVisual(t,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getItemVisual(t,r)}}function d_(e,t){switch(t){case"color":var r=e.getVisual("style");return r[e.getVisual("drawType")];case"opacity":return e.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getVisual(t)}}function Irt(e,t,r,n){switch(r){case"color":var i=e.ensureUniqueItemVisual(t,"style");i[e.getVisual("drawType")]=n,e.setItemVisual(t,"colorFromPalette",!1);break;case"opacity":e.ensureUniqueItemVisual(t,"style").opacity=n;break;case"symbol":case"symbolSize":case"liftZ":e.setItemVisual(t,r,n);break}}function ju(e,t,r,n,i){var o=e+t;r.isSilent(o)||n.eachComponent({mainType:"series",subType:"pie"},function(a){for(var s=a.seriesIndex,l=a.option.selectedMap,u=i.selected,c=0;c<u.length;c++)if(u[c].seriesIndex===s){var f=a.getData(),h=Jl(f,i.fromActionPayload);r.trigger(o,{type:o,seriesId:a.id,name:ct(h)?f.getName(h[0]):f.getName(h),selected:Et(l)?l:at({},l)})}})}function Ort(e,t,r){e.on("selectchanged",function(n){var i=r.getModel();n.isFromClick?(ju("map","selectchanged",t,i,n),ju("pie","selectchanged",t,i,n)):n.fromAction==="select"?(ju("map","selected",t,i,n),ju("pie","selected",t,i,n)):n.fromAction==="unselect"&&(ju("map","unselected",t,i,n),ju("pie","unselected",t,i,n))})}function Tc(e,t,r){for(var n;e&&!(t(e)&&(n=e,r));)e=e.__hostTarget||e.parent;return n}var Rrt=Math.round(Math.random()*9),Drt=typeof Object.defineProperty=="function",Nrt=function(){function e(){this._id="__ec_inner_"+Rrt++}return e.prototype.get=function(t){return this._guard(t)[this._id]},e.prototype.set=function(t,r){var n=this._guard(t);return Drt?Object.defineProperty(n,this._id,{value:r,enumerable:!1,configurable:!0}):n[this._id]=r,this},e.prototype.delete=function(t){return this.has(t)?(delete this._guard(t)[this._id],!0):!1},e.prototype.has=function(t){return!!this._guard(t)[this._id]},e.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},e}();const Frt=Nrt;var Brt=fe.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,n=t.cy,i=t.width/2,o=t.height/2;e.moveTo(r,n-o),e.lineTo(r+i,n+o),e.lineTo(r-i,n+o),e.closePath()}}),$rt=fe.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,n=t.cy,i=t.width/2,o=t.height/2;e.moveTo(r,n-o),e.lineTo(r+i,n),e.lineTo(r,n+o),e.lineTo(r-i,n),e.closePath()}}),zrt=fe.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.x,n=t.y,i=t.width/5*3,o=Math.max(i,t.height),a=i/2,s=a*a/(o-a),l=n-o+a+s,u=Math.asin(s/a),c=Math.cos(u)*a,f=Math.sin(u),h=Math.cos(u),d=a*.6,p=a*.7;e.moveTo(r-c,l+s),e.arc(r,l,a,Math.PI-u,Math.PI*2+u),e.bezierCurveTo(r+c-f*d,l+s+h*d,r,n-p,r,n),e.bezierCurveTo(r,n-p,r-c+f*d,l+s+h*d,r-c,l+s),e.closePath()}}),Vrt=fe.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.height,n=t.width,i=t.x,o=t.y,a=n/3*2;e.moveTo(i,o),e.lineTo(i+a,o+r),e.lineTo(i,o+r/4*3),e.lineTo(i-a,o+r),e.lineTo(i,o),e.closePath()}}),Urt={line:xs,rect:Ke,roundRect:Ke,square:Ke,circle:YP,diamond:$rt,pin:zrt,arrow:Vrt,triangle:Brt},Grt={line:function(e,t,r,n,i){i.x1=e,i.y1=t+n/2,i.x2=e+r,i.y2=t+n/2},rect:function(e,t,r,n,i){i.x=e,i.y=t,i.width=r,i.height=n},roundRect:function(e,t,r,n,i){i.x=e,i.y=t,i.width=r,i.height=n,i.r=Math.min(r,n)/4},square:function(e,t,r,n,i){var o=Math.min(r,n);i.x=e,i.y=t,i.width=o,i.height=o},circle:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.r=Math.min(r,n)/2},diamond:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.width=r,i.height=n},pin:function(e,t,r,n,i){i.x=e+r/2,i.y=t+n/2,i.width=r,i.height=n},arrow:function(e,t,r,n,i){i.x=e+r/2,i.y=t+n/2,i.width=r,i.height=n},triangle:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.width=r,i.height=n}},s3={};F(Urt,function(e,t){s3[t]=new e});var jrt=fe.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(e,t,r){var n=Im(e,t,r),i=this.shape;return i&&i.symbolType==="pin"&&t.position==="inside"&&(n.y=r.y+r.height*.4),n},buildPath:function(e,t,r){var n=t.symbolType;if(n!=="none"){var i=s3[n];i||(n="rect",i=s3[n]),Grt[n](t.x,t.y,t.width,t.height,i.shape),i.buildPath(e,i.shape,r)}}});function Wrt(e,t){if(this.type!=="image"){var r=this.style;this.__isEmptyBrush?(r.stroke=e,r.fill=t||"#fff",r.lineWidth=2):this.shape.symbolType==="line"?r.stroke=e:r.fill=e,this.markRedraw()}}function Bi(e,t,r,n,i,o,a){var s=e.indexOf("empty")===0;s&&(e=e.substr(5,1).toLowerCase()+e.substr(6));var l;return e.indexOf("image://")===0?l=cN(e.slice(8),new ae(t,r,n,i),a?"center":"cover"):e.indexOf("path://")===0?l=J1(e.slice(7),{},new ae(t,r,n,i),a?"center":"cover"):l=new jrt({shape:{symbolType:e,x:t,y:r,width:n,height:i}}),l.__isEmptyBrush=s,l.setColor=Wrt,o&&l.setColor(o),l}function yF(e){return ct(e)||(e=[+e,+e]),[e[0]||0,e[1]||0]}function gE(e,t){if(e!=null)return ct(e)||(e=[e,e]),[We(e[0],t[0])||0,We(qt(e[1],e[0]),t[1])||0]}function Il(e){return isFinite(e)}function Hrt(e,t,r){var n=t.x==null?0:t.x,i=t.x2==null?1:t.x2,o=t.y==null?0:t.y,a=t.y2==null?0:t.y2;t.global||(n=n*r.width+r.x,i=i*r.width+r.x,o=o*r.height+r.y,a=a*r.height+r.y),n=Il(n)?n:0,i=Il(i)?i:1,o=Il(o)?o:0,a=Il(a)?a:0;var s=e.createLinearGradient(n,o,i,a);return s}function Xrt(e,t,r){var n=r.width,i=r.height,o=Math.min(n,i),a=t.x==null?.5:t.x,s=t.y==null?.5:t.y,l=t.r==null?.5:t.r;t.global||(a=a*n+r.x,s=s*i+r.y,l=l*o),a=Il(a)?a:.5,s=Il(s)?s:.5,l=l>=0&&Il(l)?l:.5;var u=e.createRadialGradient(a,s,0,a,s,l);return u}function l3(e,t,r){for(var n=t.type==="radial"?Xrt(e,t,r):Hrt(e,t,r),i=t.colorStops,o=0;o<i.length;o++)n.addColorStop(i[o].offset,i[o].color);return n}function Yrt(e,t){if(e===t||!e&&!t)return!1;if(!e||!t||e.length!==t.length)return!0;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!0;return!1}function Hp(e){return parseInt(e,10)}function Xp(e,t,r){var n=["width","height"][t],i=["clientWidth","clientHeight"][t],o=["paddingLeft","paddingTop"][t],a=["paddingRight","paddingBottom"][t];if(r[n]!=null&&r[n]!=="auto")return parseFloat(r[n]);var s=document.defaultView.getComputedStyle(e);return(e[i]||Hp(s[n])||Hp(e.style[n]))-(Hp(s[o])||0)-(Hp(s[a])||0)|0}function qrt(e,t){return!e||e==="solid"||!(t>0)?null:e==="dashed"?[4*t,2*t]:e==="dotted"?[t]:we(e)?[e]:ct(e)?e:null}function bF(e){var t=e.style,r=t.lineDash&&t.lineWidth>0&&qrt(t.lineDash,t.lineWidth),n=t.lineDashOffset;if(r){var i=t.strokeNoScale&&e.getLineScale?e.getLineScale():1;i&&i!==1&&(r=Ct(r,function(o){return o/i}),n/=i)}return[r,n]}var Zrt=new Ql(!0);function Um(e){var t=e.stroke;return!(t==null||t==="none"||!(e.lineWidth>0))}function H4(e){return typeof e=="string"&&e!=="none"}function Gm(e){var t=e.fill;return t!=null&&t!=="none"}function X4(e,t){if(t.fillOpacity!=null&&t.fillOpacity!==1){var r=e.globalAlpha;e.globalAlpha=t.fillOpacity*t.opacity,e.fill(),e.globalAlpha=r}else e.fill()}function Y4(e,t){if(t.strokeOpacity!=null&&t.strokeOpacity!==1){var r=e.globalAlpha;e.globalAlpha=t.strokeOpacity*t.opacity,e.stroke(),e.globalAlpha=r}else e.stroke()}function u3(e,t,r){var n=T9(t.image,t.__image,r);if(X1(n)){var i=e.createPattern(n,t.repeat||"repeat");if(typeof DOMMatrix=="function"&&i&&i.setTransform){var o=new DOMMatrix;o.translateSelf(t.x||0,t.y||0),o.rotateSelf(0,0,(t.rotation||0)*rZ),o.scaleSelf(t.scaleX||1,t.scaleY||1),i.setTransform(o)}return i}}function Krt(e,t,r,n){var i,o=Um(r),a=Gm(r),s=r.strokePercent,l=s<1,u=!t.path;(!t.silent||l)&&u&&t.createPathProxy();var c=t.path||Zrt,f=t.__dirty;if(!n){var h=r.fill,d=r.stroke,p=a&&!!h.colorStops,v=o&&!!d.colorStops,g=a&&!!h.image,m=o&&!!d.image,_=void 0,y=void 0,w=void 0,T=void 0,S=void 0;(p||v)&&(S=t.getBoundingRect()),p&&(_=f?l3(e,h,S):t.__canvasFillGradient,t.__canvasFillGradient=_),v&&(y=f?l3(e,d,S):t.__canvasStrokeGradient,t.__canvasStrokeGradient=y),g&&(w=f||!t.__canvasFillPattern?u3(e,h,t):t.__canvasFillPattern,t.__canvasFillPattern=w),m&&(T=f||!t.__canvasStrokePattern?u3(e,d,t):t.__canvasStrokePattern,t.__canvasStrokePattern=w),p?e.fillStyle=_:g&&(w?e.fillStyle=w:a=!1),v?e.strokeStyle=y:m&&(T?e.strokeStyle=T:o=!1)}var P=t.getGlobalScale();c.setScale(P[0],P[1],t.segmentIgnoreThreshold);var A,k;e.setLineDash&&r.lineDash&&(i=bF(t),A=i[0],k=i[1]);var C=!0;(u||f&vc)&&(c.setDPR(e.dpr),l?c.setContext(null):(c.setContext(e),C=!1),c.reset(),t.buildPath(c,t.shape,n),c.toStatic(),t.pathUpdated()),C&&c.rebuildPath(e,l?s:1),A&&(e.setLineDash(A),e.lineDashOffset=k),n||(r.strokeFirst?(o&&Y4(e,r),a&&X4(e,r)):(a&&X4(e,r),o&&Y4(e,r))),A&&e.setLineDash([])}function Jrt(e,t,r){var n=t.__image=T9(r.image,t.__image,t,t.onload);if(!(!n||!X1(n))){var i=r.x||0,o=r.y||0,a=t.getWidth(),s=t.getHeight(),l=n.width/n.height;if(a==null&&s!=null?a=s*l:s==null&&a!=null?s=a/l:a==null&&s==null&&(a=n.width,s=n.height),r.sWidth&&r.sHeight){var u=r.sx||0,c=r.sy||0;e.drawImage(n,u,c,r.sWidth,r.sHeight,i,o,a,s)}else if(r.sx&&r.sy){var u=r.sx,c=r.sy,f=a-u,h=s-c;e.drawImage(n,u,c,f,h,i,o,a,s)}else e.drawImage(n,i,o,a,s)}}function Qrt(e,t,r){var n,i=r.text;if(i!=null&&(i+=""),i){e.font=r.font||Zl,e.textAlign=r.textAlign,e.textBaseline=r.textBaseline;var o=void 0,a=void 0;e.setLineDash&&r.lineDash&&(n=bF(t),o=n[0],a=n[1]),o&&(e.setLineDash(o),e.lineDashOffset=a),r.strokeFirst?(Um(r)&&e.strokeText(i,r.x,r.y),Gm(r)&&e.fillText(i,r.x,r.y)):(Gm(r)&&e.fillText(i,r.x,r.y),Um(r)&&e.strokeText(i,r.x,r.y)),o&&e.setLineDash([])}}var q4=["shadowBlur","shadowOffsetX","shadowOffsetY"],Z4=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function wF(e,t,r,n,i){var o=!1;if(!n&&(r=r||{},t===r))return!1;if(n||t.opacity!==r.opacity){vn(e,i),o=!0;var a=Math.max(Math.min(t.opacity,1),0);e.globalAlpha=isNaN(a)?zl.opacity:a}(n||t.blend!==r.blend)&&(o||(vn(e,i),o=!0),e.globalCompositeOperation=t.blend||zl.blend);for(var s=0;s<q4.length;s++){var l=q4[s];(n||t[l]!==r[l])&&(o||(vn(e,i),o=!0),e[l]=e.dpr*(t[l]||0))}return(n||t.shadowColor!==r.shadowColor)&&(o||(vn(e,i),o=!0),e.shadowColor=t.shadowColor||zl.shadowColor),o}function K4(e,t,r,n,i){var o=a0(t,i.inHover),a=n?null:r&&a0(r,i.inHover)||{};if(o===a)return!1;var s=wF(e,o,a,n,i);if((n||o.fill!==a.fill)&&(s||(vn(e,i),s=!0),H4(o.fill)&&(e.fillStyle=o.fill)),(n||o.stroke!==a.stroke)&&(s||(vn(e,i),s=!0),H4(o.stroke)&&(e.strokeStyle=o.stroke)),(n||o.opacity!==a.opacity)&&(s||(vn(e,i),s=!0),e.globalAlpha=o.opacity==null?1:o.opacity),t.hasStroke()){var l=o.lineWidth,u=l/(o.strokeNoScale&&t.getLineScale?t.getLineScale():1);e.lineWidth!==u&&(s||(vn(e,i),s=!0),e.lineWidth=u)}for(var c=0;c<Z4.length;c++){var f=Z4[c],h=f[0];(n||o[h]!==a[h])&&(s||(vn(e,i),s=!0),e[h]=o[h]||f[1])}return s}function tnt(e,t,r,n,i){return wF(e,a0(t,i.inHover),r&&a0(r,i.inHover),n,i)}function SF(e,t){var r=t.transform,n=e.dpr||1;r?e.setTransform(n*r[0],n*r[1],n*r[2],n*r[3],n*r[4],n*r[5]):e.setTransform(n,0,0,n,0,0)}function ent(e,t,r){for(var n=!1,i=0;i<e.length;i++){var o=e[i];n=n||o.isZeroArea(),SF(t,o),t.beginPath(),o.buildPath(t,o.shape),t.clip()}r.allClipped=n}function rnt(e,t){return e&&t?e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||e[4]!==t[4]||e[5]!==t[5]:!(!e&&!t)}var J4=1,Q4=2,t6=3,e6=4;function nnt(e){var t=Gm(e),r=Um(e);return!(e.lineDash||!(+t^+r)||t&&typeof e.fill!="string"||r&&typeof e.stroke!="string"||e.strokePercent<1||e.strokeOpacity<1||e.fillOpacity<1)}function vn(e,t){t.batchFill&&e.fill(),t.batchStroke&&e.stroke(),t.batchFill="",t.batchStroke=""}function a0(e,t){return t&&e.__hoverStyle||e.style}function TF(e,t){Ol(e,t,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function Ol(e,t,r,n){var i=t.transform;if(!t.shouldBePainted(r.viewWidth,r.viewHeight,!1,!1)){t.__dirty&=~An,t.__isRendered=!1;return}var o=t.__clipPaths,a=r.prevElClipPaths,s=!1,l=!1;if((!a||Yrt(o,a))&&(a&&a.length&&(vn(e,r),e.restore(),l=s=!0,r.prevElClipPaths=null,r.allClipped=!1,r.prevEl=null),o&&o.length&&(vn(e,r),e.save(),ent(o,e,r),s=!0),r.prevElClipPaths=o),r.allClipped){t.__isRendered=!1;return}t.beforeBrush&&t.beforeBrush(),t.innerBeforeBrush();var u=r.prevEl;u||(l=s=!0);var c=t instanceof fe&&t.autoBatch&&nnt(t.style);s||rnt(i,u.transform)?(vn(e,r),SF(e,t)):c||vn(e,r);var f=a0(t,r.inHover);t instanceof fe?(r.lastDrawType!==J4&&(l=!0,r.lastDrawType=J4),K4(e,t,u,l,r),(!c||!r.batchFill&&!r.batchStroke)&&e.beginPath(),Krt(e,t,f,c),c&&(r.batchFill=f.fill||"",r.batchStroke=f.stroke||"")):t instanceof GS?(r.lastDrawType!==t6&&(l=!0,r.lastDrawType=t6),K4(e,t,u,l,r),Qrt(e,t,f)):t instanceof ka?(r.lastDrawType!==Q4&&(l=!0,r.lastDrawType=Q4),tnt(e,t,u,l,r),Jrt(e,t,f)):t.getTemporalDisplayables&&(r.lastDrawType!==e6&&(l=!0,r.lastDrawType=e6),int(e,t,r)),c&&n&&vn(e,r),t.innerAfterBrush(),t.afterBrush&&t.afterBrush(),r.prevEl=t,t.__dirty=0,t.__isRendered=!0}function int(e,t,r){var n=t.getDisplayables(),i=t.getTemporalDisplayables();e.save();var o={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:r.viewWidth,viewHeight:r.viewHeight,inHover:r.inHover},a,s;for(a=t.getCursor(),s=n.length;a<s;a++){var l=n[a];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),Ol(e,l,o,a===s-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),o.prevEl=l}for(var u=0,c=i.length;u<c;u++){var l=i[u];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),Ol(e,l,o,u===c-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),o.prevEl=l}t.clearTemporalDisplayables(),t.notClear=!0,e.restore()}var v2=new Frt,r6=new M0(100),n6=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function jm(e,t){if(e==="none")return null;var r=t.getDevicePixelRatio(),n=t.getZr(),i=n.painter.type==="svg";e.dirty&&v2.delete(e);var o=v2.get(e);if(o)return o;var a=te(e,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});a.backgroundColor==="none"&&(a.backgroundColor=null);var s={repeat:"repeat"};return l(s),s.rotation=a.rotation,s.scaleX=s.scaleY=i?1:1/r,v2.set(e,s),e.dirty=!1,s;function l(u){for(var c=[r],f=!0,h=0;h<n6.length;++h){var d=a[n6[h]];if(d!=null&&!ct(d)&&!Et(d)&&!we(d)&&typeof d!="boolean"){f=!1;break}c.push(d)}var p;if(f){p=c.join(",")+(i?"-svg":"");var v=r6.get(p);v&&(i?u.svgElement=v:u.image=v)}var g=EF(a.dashArrayX),m=ont(a.dashArrayY),_=PF(a.symbol),y=ant(g),w=kF(m),T=!i&&fu.createCanvas(),S=i&&{tag:"g",attrs:{},key:"dcl",children:[]},P=k(),A;T&&(T.width=P.width*r,T.height=P.height*r,A=T.getContext("2d")),C(),f&&r6.put(p,T||S),u.image=T,u.svgElement=S,u.svgWidth=P.width,u.svgHeight=P.height;function k(){for(var M=1,D=0,B=y.length;D<B;++D)M=vM(M,y[D]);for(var V=1,D=0,B=_.length;D<B;++D)V=vM(V,_[D].length);M*=V;var N=w*y.length*_.length;return{width:Math.max(1,Math.min(M,a.maxTileWidth)),height:Math.max(1,Math.min(N,a.maxTileHeight))}}function C(){A&&(A.clearRect(0,0,T.width,T.height),a.backgroundColor&&(A.fillStyle=a.backgroundColor,A.fillRect(0,0,T.width,T.height)));for(var M=0,D=0;D<m.length;++D)M+=m[D];if(M<=0)return;for(var B=-w,V=0,N=0,j=0;B<P.height;){if(V%2===0){for(var Z=N/2%_.length,q=0,et=0,Pt=0;q<P.width*2;){for(var Rt=0,D=0;D<g[j].length;++D)Rt+=g[j][D];if(Rt<=0)break;if(et%2===0){var wt=(1-a.symbolSize)*.5,St=q+g[j][et]*wt,Ht=B+m[V]*wt,Y=g[j][et]*a.symbolSize,it=m[V]*a.symbolSize,K=Pt/2%_[Z].length;pt(St,Ht,Y,it,_[Z][K])}q+=g[j][et],++Pt,++et,et===g[j].length&&(et=0)}++j,j===g.length&&(j=0)}B+=m[V],++N,++V,V===m.length&&(V=0)}function pt(Tt,kt,lt,ft,$){var G=i?1:r,X=Bi($,Tt*G,kt*G,lt*G,ft*G,a.color,a.symbolKeepAspect);if(i){var J=n.painter.renderOneToVNode(X);J&&S.children.push(J)}else TF(A,X)}}}}function PF(e){if(!e||e.length===0)return[["rect"]];if(Et(e))return[[e]];for(var t=!0,r=0;r<e.length;++r)if(!Et(e[r])){t=!1;break}if(t)return PF([e]);for(var n=[],r=0;r<e.length;++r)Et(e[r])?n.push([e[r]]):n.push(e[r]);return n}function EF(e){if(!e||e.length===0)return[[0,0]];if(we(e)){var t=Math.ceil(e);return[[t,t]]}for(var r=!0,n=0;n<e.length;++n)if(!we(e[n])){r=!1;break}if(r)return EF([e]);for(var i=[],n=0;n<e.length;++n)if(we(e[n])){var t=Math.ceil(e[n]);i.push([t,t])}else{var t=Ct(e[n],function(s){return Math.ceil(s)});t.length%2===1?i.push(t.concat(t)):i.push(t)}return i}function ont(e){if(!e||typeof e=="object"&&e.length===0)return[0,0];if(we(e)){var t=Math.ceil(e);return[t,t]}var r=Ct(e,function(n){return Math.ceil(n)});return e.length%2?r.concat(r):r}function ant(e){return Ct(e,function(t){return kF(t)})}function kF(e){for(var t=0,r=0;r<e.length;++r)t+=e[r];return e.length%2===1?t*2:t}function snt(e,t){e.eachRawSeries(function(r){if(!e.isSeriesFiltered(r)){var n=r.getData();n.hasItemVisual()&&n.each(function(a){var s=n.getItemVisual(a,"decal");if(s){var l=n.ensureUniqueItemVisual(a,"style");l.decal=jm(s,t)}});var i=n.getVisual("decal");if(i){var o=n.getVisual("style");o.decal=jm(i,t)}}})}var lnt=new Gi;const _i=lnt;var AF={};function unt(e,t){AF[e]=t}function cnt(e){return AF[e]}var fnt=typeof window<"u",hnt=1,dnt=800,pnt=900,vnt=1e3,gnt=2e3,mnt=5e3,CF=1e3,_nt=1100,mE=2e3,MF=3e3,ynt=4e3,p_=4500,bnt=4600,wnt=5e3,Snt=6e3,xF=7e3,Tnt={PROCESSOR:{FILTER:vnt,SERIES_FILTER:dnt,STATISTIC:mnt},VISUAL:{LAYOUT:CF,PROGRESSIVE_LAYOUT:_nt,GLOBAL:mE,CHART:MF,POST_CHART_LAYOUT:bnt,COMPONENT:ynt,BRUSH:wnt,CHART_ITEM:p_,ARIA:Snt,DECAL:xF}},Rr="__flagInMainProcess",fn="__pendingUpdate",g2="__needsUpdateStatus",i6=/^[a-zA-Z0-9_]+$/,m2="__connectUpdateStatus",o6=0,Pnt=1,Ent=2;function LF(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(this.isDisposed()){this.id;return}return OF(this,e,t)}}function IF(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return OF(this,e,t)}}function OF(e,t,r){return r[0]=r[0]&&r[0].toLowerCase(),Gi.prototype[t].apply(e,r)}var RF=function(e){_t(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Gi),DF=RF.prototype;DF.on=IF("on");DF.off=IF("off");var Wu,_2,Yp,$a,y2,b2,w2,uh,ch,a6,s6,S2,l6,qp,u6,NF,Bn,c6,FF=function(e){_t(t,e);function t(r,n,i){var o=e.call(this,new Mrt)||this;o._chartsViews=[],o._chartsMap={},o._componentsViews=[],o._componentsMap={},o._pendingActions=[],i=i||{},Et(n)&&(n=BF[n]),o._dom=r;var a="canvas",s="auto",l=!1,u=o._zr=hM(r,{renderer:i.renderer||a,devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height,ssr:i.ssr,useDirtyRect:qt(i.useDirtyRect,l),useCoarsePointer:qt(i.useCoarsePointer,s),pointerSize:i.pointerSize});o._ssr=i.ssr,o._throttledZrFlush=h_(Vt(u.flush,u),17),n=zt(n),n&&UN(n,!0),o._theme=n,o._locale=Att(i.locale||yN),o._coordSysMgr=new lE;var c=o._api=u6(o);function f(h,d){return h.__prio-d.__prio}return Ng(Hm,f),Ng(c3,f),o._scheduler=new gF(o,c,c3,Hm),o._messageCenter=new RF,o._initEvents(),o.resize=Vt(o.resize,o),u.animation.on("frame",o._onframe,o),a6(u,o),s6(u,o),Em(o),o}return t.prototype._onframe=function(){if(!this._disposed){c6(this);var r=this._scheduler;if(this[fn]){var n=this[fn].silent;this[Rr]=!0;try{Wu(this),$a.update.call(this,null,this[fn].updateParams)}catch(l){throw this[Rr]=!1,this[fn]=null,l}this._zr.flush(),this[Rr]=!1,this[fn]=null,uh.call(this,n),ch.call(this,n)}else if(r.unfinished){var i=hnt,o=this._model,a=this._api;r.unfinished=!1;do{var s=+new Date;r.performSeriesTasks(o),r.performDataProcessorTasks(o),b2(this,o),r.performVisualTasks(o),qp(this,this._model,a,"remain",{}),i-=+new Date-s}while(i>0&&r.unfinished);r.unfinished||this._zr.flush()}}},t.prototype.getDom=function(){return this._dom},t.prototype.getId=function(){return this.id},t.prototype.getZr=function(){return this._zr},t.prototype.isSSR=function(){return this._ssr},t.prototype.setOption=function(r,n,i){if(!this[Rr]){if(this._disposed){this.id;return}var o,a,s;if(Ot(n)&&(i=n.lazyUpdate,o=n.silent,a=n.replaceMerge,s=n.transition,n=n.notMerge),this[Rr]=!0,!this._model||n){var l=new uet(this._api),u=this._theme,c=this._model=new $N;c.scheduler=this._scheduler,c.ssr=this._ssr,c.init(null,null,null,u,this._locale,l)}this._model.setOption(r,{replaceMerge:a},f3);var f={seriesTransition:s,optionChanged:!0};if(i)this[fn]={silent:o,updateParams:f},this[Rr]=!1,this.getZr().wakeUp();else{try{Wu(this),$a.update.call(this,null,f)}catch(h){throw this[fn]=null,this[Rr]=!1,h}this._ssr||this._zr.flush(),this[fn]=null,this[Rr]=!1,uh.call(this,o),ch.call(this,o)}}},t.prototype.setTheme=function(){},t.prototype.getModel=function(){return this._model},t.prototype.getOption=function(){return this._model&&this._model.getOption()},t.prototype.getWidth=function(){return this._zr.getWidth()},t.prototype.getHeight=function(){return this._zr.getHeight()},t.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||fnt&&window.devicePixelRatio||1},t.prototype.getRenderedCanvas=function(r){return this.renderToCanvas(r)},t.prototype.renderToCanvas=function(r){r=r||{};var n=this._zr.painter;return n.getRenderedCanvas({backgroundColor:r.backgroundColor||this._model.get("backgroundColor"),pixelRatio:r.pixelRatio||this.getDevicePixelRatio()})},t.prototype.renderToSVGString=function(r){r=r||{};var n=this._zr.painter;return n.renderToString({useViewBox:r.useViewBox})},t.prototype.getSvgDataURL=function(){if(!!Xt.svgSupported){var r=this._zr,n=r.storage.getDisplayList();return F(n,function(i){i.stopAnimation(null,!0)}),r.painter.toDataURL()}},t.prototype.getDataURL=function(r){if(this._disposed){this.id;return}r=r||{};var n=r.excludeComponents,i=this._model,o=[],a=this;F(n,function(l){i.eachComponent({mainType:l},function(u){var c=a._componentsMap[u.__viewId];c.group.ignore||(o.push(c),c.group.ignore=!0)})});var s=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(r).toDataURL("image/"+(r&&r.type||"png"));return F(o,function(l){l.group.ignore=!1}),s},t.prototype.getConnectedDataURL=function(r){if(this._disposed){this.id;return}var n=r.type==="svg",i=this.group,o=Math.min,a=Math.max,s=1/0;if(f6[i]){var l=s,u=s,c=-s,f=-s,h=[],d=r&&r.pixelRatio||this.getDevicePixelRatio();F(Ad,function(y,w){if(y.group===i){var T=n?y.getZr().painter.getSvgDom().innerHTML:y.renderToCanvas(zt(r)),S=y.getDom().getBoundingClientRect();l=o(S.left,l),u=o(S.top,u),c=a(S.right,c),f=a(S.bottom,f),h.push({dom:T,left:S.left,top:S.top})}}),l*=d,u*=d,c*=d,f*=d;var p=c-l,v=f-u,g=fu.createCanvas(),m=hM(g,{renderer:n?"svg":"canvas"});if(m.resize({width:p,height:v}),n){var _="";return F(h,function(y){var w=y.left-l,T=y.top-u;_+='<g transform="translate('+w+","+T+')">'+y.dom+"</g>"}),m.painter.getSvgRoot().innerHTML=_,r.connectedBackgroundColor&&m.painter.setBackgroundColor(r.connectedBackgroundColor),m.refreshImmediately(),m.painter.toDataURL()}else return r.connectedBackgroundColor&&m.add(new Ke({shape:{x:0,y:0,width:p,height:v},style:{fill:r.connectedBackgroundColor}})),F(h,function(y){var w=new ka({style:{x:y.left*d-l,y:y.top*d-u,image:y.dom}});m.add(w)}),m.refreshImmediately(),g.toDataURL("image/"+(r&&r.type||"png"))}else return this.getDataURL(r)},t.prototype.convertToPixel=function(r,n){return y2(this,"convertToPixel",r,n)},t.prototype.convertFromPixel=function(r,n){return y2(this,"convertFromPixel",r,n)},t.prototype.containPixel=function(r,n){if(this._disposed){this.id;return}var i=this._model,o,a=Uy(i,r);return F(a,function(s,l){l.indexOf("Models")>=0&&F(s,function(u){var c=u.coordinateSystem;if(c&&c.containPoint)o=o||!!c.containPoint(n);else if(l==="seriesModels"){var f=this._chartsMap[u.__viewId];f&&f.containPoint&&(o=o||f.containPoint(n,u))}},this)},this),!!o},t.prototype.getVisual=function(r,n){var i=this._model,o=Uy(i,r,{defaultMainType:"series"}),a=o.seriesModel,s=a.getData(),l=o.hasOwnProperty("dataIndexInside")?o.dataIndexInside:o.hasOwnProperty("dataIndex")?s.indexOfRawIndex(o.dataIndex):null;return l!=null?_F(s,l,n):d_(s,n)},t.prototype.getViewOfComponentModel=function(r){return this._componentsMap[r.__viewId]},t.prototype.getViewOfSeriesModel=function(r){return this._chartsMap[r.__viewId]},t.prototype._initEvents=function(){var r=this;F(knt,function(n){var i=function(o){var a=r.getModel(),s=o.target,l,u=n==="globalout";if(u?l={}:s&&Tc(s,function(p){var v=ie(p);if(v&&v.dataIndex!=null){var g=v.dataModel||a.getSeriesByIndex(v.seriesIndex);return l=g&&g.getDataParams(v.dataIndex,v.dataType)||{},!0}else if(v.eventData)return l=at({},v.eventData),!0},!0),l){var c=l.componentType,f=l.componentIndex;(c==="markLine"||c==="markPoint"||c==="markArea")&&(c="series",f=l.seriesIndex);var h=c&&f!=null&&a.getComponent(c,f),d=h&&r[h.mainType==="series"?"_chartsMap":"_componentsMap"][h.__viewId];l.event=o,l.type=n,r._$eventProcessor.eventInfo={targetEl:s,packedEvent:l,model:h,view:d},r.trigger(n,l)}};i.zrEventfulCallAtLast=!0,r._zr.on(n,i,r)}),F(kd,function(n,i){r._messageCenter.on(i,function(o){this.trigger(i,o)},r)}),F(["selectchanged"],function(n){r._messageCenter.on(n,function(i){this.trigger(n,i)},r)}),Ort(this._messageCenter,this,this._api)},t.prototype.isDisposed=function(){return this._disposed},t.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},t.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var r=this.getDom();r&&b9(this.getDom(),yE,"");var n=this,i=n._api,o=n._model;F(n._componentsViews,function(a){a.dispose(o,i)}),F(n._chartsViews,function(a){a.dispose(o,i)}),n._zr.dispose(),n._dom=n._model=n._chartsMap=n._componentsMap=n._chartsViews=n._componentsViews=n._scheduler=n._api=n._zr=n._throttledZrFlush=n._theme=n._coordSysMgr=n._messageCenter=null,delete Ad[n.id]},t.prototype.resize=function(r){if(!this[Rr]){if(this._disposed){this.id;return}this._zr.resize(r);var n=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!n){var i=n.resetOption("media"),o=r&&r.silent;this[fn]&&(o==null&&(o=this[fn].silent),i=!0,this[fn]=null),this[Rr]=!0;try{i&&Wu(this),$a.update.call(this,{type:"resize",animation:at({duration:0},r&&r.animation)})}catch(a){throw this[Rr]=!1,a}this[Rr]=!1,uh.call(this,o),ch.call(this,o)}}},t.prototype.showLoading=function(r,n){if(this._disposed){this.id;return}if(Ot(r)&&(n=r,r=""),r=r||"default",this.hideLoading(),!!h3[r]){var i=h3[r](this._api,n),o=this._zr;this._loadingFX=i,o.add(i)}},t.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},t.prototype.makeActionFromEvent=function(r){var n=at({},r);return n.type=kd[r.type],n},t.prototype.dispatchAction=function(r,n){if(this._disposed){this.id;return}if(Ot(n)||(n={silent:!!n}),!!Wm[r.type]&&!!this._model){if(this[Rr]){this._pendingActions.push(r);return}var i=n.silent;w2.call(this,r,i);var o=n.flush;o?this._zr.flush():o!==!1&&Xt.browser.weChat&&this._throttledZrFlush(),uh.call(this,i),ch.call(this,i)}},t.prototype.updateLabelLayout=function(){_i.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},t.prototype.appendData=function(r){if(this._disposed){this.id;return}var n=r.seriesIndex,i=this.getModel(),o=i.getSeriesByIndex(n);o.appendData(r),this._scheduler.unfinished=!0,this.getZr().wakeUp()},t.internalField=function(){Wu=function(f){var h=f._scheduler;h.restorePipelines(f._model),h.prepareStageTasks(),_2(f,!0),_2(f,!1),h.plan()},_2=function(f,h){for(var d=f._model,p=f._scheduler,v=h?f._componentsViews:f._chartsViews,g=h?f._componentsMap:f._chartsMap,m=f._zr,_=f._api,y=0;y<v.length;y++)v[y].__alive=!1;h?d.eachComponent(function(S,P){S!=="series"&&w(P)}):d.eachSeries(w);function w(S){var P=S.__requireNewView;S.__requireNewView=!1;var A="_ec_"+S.id+"_"+S.type,k=!P&&g[A];if(!k){var C=Po(S.type),M=h?oi.getClass(C.main,C.sub):ei.getClass(C.sub);k=new M,k.init(d,_),g[A]=k,v.push(k),m.add(k.group)}S.__viewId=k.__id=A,k.__alive=!0,k.__model=S,k.group.__ecComponentInfo={mainType:S.mainType,index:S.componentIndex},!h&&p.prepareView(k,S,d,_)}for(var y=0;y<v.length;){var T=v[y];T.__alive?y++:(!h&&T.renderTask.dispose(),m.remove(T.group),T.dispose(d,_),v.splice(y,1),g[T.__id]===T&&delete g[T.__id],T.__id=T.group.__ecComponentInfo=null)}},Yp=function(f,h,d,p,v){var g=f._model;if(g.setUpdatePayload(d),!p){F([].concat(f._componentsViews).concat(f._chartsViews),T);return}var m={};m[p+"Id"]=d[p+"Id"],m[p+"Index"]=d[p+"Index"],m[p+"Name"]=d[p+"Name"];var _={mainType:p,query:m};v&&(_.subType=v);var y=d.excludeSeriesId,w;y!=null&&(w=jt(),F(Ze(y),function(S){var P=ti(S,null);P!=null&&w.set(P,!0)})),g&&g.eachComponent(_,function(S){var P=w&&w.get(S.id)!==null;if(!P)if(jM(d))if(S instanceof Lo)d.type===Vl&&!d.notBlur&&!S.get(["emphasis","disabled"])&&lQ(S,d,f._api);else{var A=HP(S.mainType,S.componentIndex,d.name,f._api),k=A.focusSelf,C=A.dispatchers;d.type===Vl&&k&&!d.notBlur&&HS(S.mainType,S.componentIndex,f._api),C&&F(C,function(M){d.type===Vl?Zd(M):Kd(M)})}else qS(d)&&S instanceof Lo&&(fQ(S,d,f._api),UM(S),Bn(f))},f),g&&g.eachComponent(_,function(S){var P=w&&w.get(S.id)!==null;P||T(f[p==="series"?"_chartsMap":"_componentsMap"][S.__viewId])},f);function T(S){S&&S.__alive&&S[h]&&S[h](S.__model,g,f._api,d)}},$a={prepareAndUpdate:function(f){Wu(this),$a.update.call(this,f,{optionChanged:f.newOption!=null})},update:function(f,h){var d=this._model,p=this._api,v=this._zr,g=this._coordSysMgr,m=this._scheduler;if(!!d){d.setUpdatePayload(f),m.restoreData(d,f),m.performSeriesTasks(d),g.create(d,p),m.performDataProcessorTasks(d,f),b2(this,d),g.update(d,p),r(d),m.performVisualTasks(d,f),S2(this,d,p,f,h);var _=d.get("backgroundColor")||"transparent",y=d.get("darkMode");v.setBackgroundColor(_),y!=null&&y!=="auto"&&v.setDarkMode(y),_i.trigger("afterupdate",d,p)}},updateTransform:function(f){var h=this,d=this._model,p=this._api;if(!!d){d.setUpdatePayload(f);var v=[];d.eachComponent(function(m,_){if(m!=="series"){var y=h.getViewOfComponentModel(_);if(y&&y.__alive)if(y.updateTransform){var w=y.updateTransform(_,d,p,f);w&&w.update&&v.push(y)}else v.push(y)}});var g=jt();d.eachSeries(function(m){var _=h._chartsMap[m.__viewId];if(_.updateTransform){var y=_.updateTransform(m,d,p,f);y&&y.update&&g.set(m.uid,1)}else g.set(m.uid,1)}),r(d),this._scheduler.performVisualTasks(d,f,{setDirty:!0,dirtyMap:g}),qp(this,d,p,f,{},g),_i.trigger("afterupdate",d,p)}},updateView:function(f){var h=this._model;!h||(h.setUpdatePayload(f),ei.markUpdateMethod(f,"updateView"),r(h),this._scheduler.performVisualTasks(h,f,{setDirty:!0}),S2(this,h,this._api,f,{}),_i.trigger("afterupdate",h,this._api))},updateVisual:function(f){var h=this,d=this._model;!d||(d.setUpdatePayload(f),d.eachSeries(function(p){p.getData().clearAllVisual()}),ei.markUpdateMethod(f,"updateVisual"),r(d),this._scheduler.performVisualTasks(d,f,{visualType:"visual",setDirty:!0}),d.eachComponent(function(p,v){if(p!=="series"){var g=h.getViewOfComponentModel(v);g&&g.__alive&&g.updateVisual(v,d,h._api,f)}}),d.eachSeries(function(p){var v=h._chartsMap[p.__viewId];v.updateVisual(p,d,h._api,f)}),_i.trigger("afterupdate",d,this._api))},updateLayout:function(f){$a.update.call(this,f)}},y2=function(f,h,d,p){if(f._disposed){f.id;return}for(var v=f._model,g=f._coordSysMgr.getCoordinateSystems(),m,_=Uy(v,d),y=0;y<g.length;y++){var w=g[y];if(w[h]&&(m=w[h](v,_,p))!=null)return m}},b2=function(f,h){var d=f._chartsMap,p=f._scheduler;h.eachSeries(function(v){p.updateStreamModes(v,d[v.__viewId])})},w2=function(f,h){var d=this,p=this.getModel(),v=f.type,g=f.escapeConnect,m=Wm[v],_=m.actionInfo,y=(_.update||"update").split(":"),w=y.pop(),T=y[0]!=null&&Po(y[0]);this[Rr]=!0;var S=[f],P=!1;f.batch&&(P=!0,S=Ct(f.batch,function(V){return V=te(at({},V),f),V.batch=null,V}));var A=[],k,C=qS(f),M=jM(f);if(M&&G9(this._api),F(S,function(V){if(k=m.action(V,d._model,d._api),k=k||at({},V),k.type=_.event||k.type,A.push(k),M){var N=$P(f),j=N.queryOptionMap,Z=N.mainTypeSpecified,q=Z?j.keys()[0]:"series";Yp(d,w,V,q),Bn(d)}else C?(Yp(d,w,V,"series"),Bn(d)):T&&Yp(d,w,V,T.main,T.sub)}),w!=="none"&&!M&&!C&&!T)try{this[fn]?(Wu(this),$a.update.call(this,f),this[fn]=null):$a[w].call(this,f)}catch(V){throw this[Rr]=!1,V}if(P?k={type:_.event||v,escapeConnect:g,batch:A}:k=A[0],this[Rr]=!1,!h){var D=this._messageCenter;if(D.trigger(k.type,k),C){var B={type:"selectchanged",escapeConnect:g,selected:hQ(p),isFromClick:f.isFromClick||!1,fromAction:f.type,fromActionPayload:f};D.trigger(B.type,B)}}},uh=function(f){for(var h=this._pendingActions;h.length;){var d=h.shift();w2.call(this,d,f)}},ch=function(f){!f&&this.trigger("updated")},a6=function(f,h){f.on("rendered",function(d){h.trigger("rendered",d),f.animation.isFinished()&&!h[fn]&&!h._scheduler.unfinished&&!h._pendingActions.length&&h.trigger("finished")})},s6=function(f,h){f.on("mouseover",function(d){var p=d.target,v=Tc(p,YS);v&&(uQ(v,d,h._api),Bn(h))}).on("mouseout",function(d){var p=d.target,v=Tc(p,YS);v&&(cQ(v,d,h._api),Bn(h))}).on("click",function(d){var p=d.target,v=Tc(p,function(_){return ie(_).dataIndex!=null},!0);if(v){var g=v.selected?"unselect":"select",m=ie(v);h._api.dispatchAction({type:g,dataType:m.dataType,dataIndexInside:m.dataIndex,seriesIndex:m.seriesIndex,isFromClick:!0})}})};function r(f){f.clearColorPalette(),f.eachSeries(function(h){h.clearColorPalette()})}function n(f){var h=[],d=[],p=!1;if(f.eachComponent(function(_,y){var w=y.get("zlevel")||0,T=y.get("z")||0,S=y.getZLevelKey();p=p||!!S,(_==="series"?d:h).push({zlevel:w,z:T,idx:y.componentIndex,type:_,key:S})}),p){var v=h.concat(d),g,m;Ng(v,function(_,y){return _.zlevel===y.zlevel?_.z-y.z:_.zlevel-y.zlevel}),F(v,function(_){var y=f.getComponent(_.type,_.idx),w=_.zlevel,T=_.key;g!=null&&(w=Math.max(g,w)),T?(w===g&&T!==m&&w++,m=T):m&&(w===g&&w++,m=""),g=w,y.setZLevel(w)})}}S2=function(f,h,d,p,v){n(h),l6(f,h,d,p,v),F(f._chartsViews,function(g){g.__alive=!1}),qp(f,h,d,p,v),F(f._chartsViews,function(g){g.__alive||g.remove(h,d)})},l6=function(f,h,d,p,v,g){F(g||f._componentsViews,function(m){var _=m.__model;u(_,m),m.render(_,h,d,p),s(_,m),c(_,m)})},qp=function(f,h,d,p,v,g){var m=f._scheduler;v=at(v||{},{updatedSeries:h.getSeries()}),_i.trigger("series:beforeupdate",h,d,v);var _=!1;h.eachSeries(function(y){var w=f._chartsMap[y.__viewId];w.__alive=!0;var T=w.renderTask;m.updatePayload(T,p),u(y,w),g&&g.get(y.uid)&&T.dirty(),T.perform(m.getPerformArgs(T))&&(_=!0),w.group.silent=!!y.get("silent"),a(y,w),UM(y)}),m.unfinished=_||m.unfinished,_i.trigger("series:layoutlabels",h,d,v),_i.trigger("series:transition",h,d,v),h.eachSeries(function(y){var w=f._chartsMap[y.__viewId];s(y,w),c(y,w)}),o(f,h),_i.trigger("series:afterupdate",h,d,v)},Bn=function(f){f[g2]=!0,f.getZr().wakeUp()},c6=function(f){!f[g2]||(f.getZr().storage.traverse(function(h){Td(h)||i(h)}),f[g2]=!1)};function i(f){for(var h=[],d=f.currentStates,p=0;p<d.length;p++){var v=d[p];v==="emphasis"||v==="blur"||v==="select"||h.push(v)}f.selected&&f.states.select&&h.push("select"),f.hoverState===q1&&f.states.emphasis?h.push("emphasis"):f.hoverState===I0&&f.states.blur&&h.push("blur"),f.useStates(h)}function o(f,h){var d=f._zr,p=d.storage,v=0;p.traverse(function(g){g.isGroup||v++}),v>h.get("hoverLayerThreshold")&&!Xt.node&&!Xt.worker&&h.eachSeries(function(g){if(!g.preventUsingHoverLayer){var m=f._chartsMap[g.__viewId];m.__alive&&m.eachRendered(function(_){_.states.emphasis&&(_.states.emphasis.hoverLayer=!0)})}})}function a(f,h){var d=f.get("blendMode")||null;h.eachRendered(function(p){p.isGroup||(p.style.blend=d)})}function s(f,h){if(!f.preventAutoZ){var d=f.get("z")||0,p=f.get("zlevel")||0;h.eachRendered(function(v){return l(v,d,p,-1/0),!0})}}function l(f,h,d,p){var v=f.getTextContent(),g=f.getTextGuideLine(),m=f.isGroup;if(m)for(var _=f.childrenRef(),y=0;y<_.length;y++)p=Math.max(l(_[y],h,d,p),p);else f.z=h,f.zlevel=d,p=Math.max(f.z2,p);if(v&&(v.z=h,v.zlevel=d,isFinite(p)&&(v.z2=p+2)),g){var w=f.textGuideLineConfig;g.z=h,g.zlevel=d,isFinite(p)&&(g.z2=p+(w&&w.showAbove?1:-1))}return p}function u(f,h){h.eachRendered(function(d){if(!Td(d)){var p=d.getTextContent(),v=d.getTextGuideLine();d.stateTransition&&(d.stateTransition=null),p&&p.stateTransition&&(p.stateTransition=null),v&&v.stateTransition&&(v.stateTransition=null),d.hasState()?(d.prevStates=d.currentStates,d.clearStates()):d.prevStates&&(d.prevStates=null)}})}function c(f,h){var d=f.getModel("stateAnimation"),p=f.isAnimationEnabled(),v=d.get("duration"),g=v>0?{duration:v,delay:d.get("delay"),easing:d.get("easing")}:null;h.eachRendered(function(m){if(m.states&&m.states.emphasis){if(Td(m))return;if(m instanceof fe&&mQ(m),m.__dirty){var _=m.prevStates;_&&m.useStates(_)}if(p){m.stateTransition=g;var y=m.getTextContent(),w=m.getTextGuideLine();y&&(y.stateTransition=g),w&&(w.stateTransition=g)}m.__dirty&&i(m)}})}u6=function(f){return new(function(h){_t(d,h);function d(){return h!==null&&h.apply(this,arguments)||this}return d.prototype.getCoordinateSystems=function(){return f._coordSysMgr.getCoordinateSystems()},d.prototype.getComponentByElement=function(p){for(;p;){var v=p.__ecComponentInfo;if(v!=null)return f._model.getComponent(v.mainType,v.index);p=p.parent}},d.prototype.enterEmphasis=function(p,v){Zd(p,v),Bn(f)},d.prototype.leaveEmphasis=function(p,v){Kd(p,v),Bn(f)},d.prototype.enterBlur=function(p){$9(p),Bn(f)},d.prototype.leaveBlur=function(p){WP(p),Bn(f)},d.prototype.enterSelect=function(p){z9(p),Bn(f)},d.prototype.leaveSelect=function(p){V9(p),Bn(f)},d.prototype.getModel=function(){return f.getModel()},d.prototype.getViewOfComponentModel=function(p){return f.getViewOfComponentModel(p)},d.prototype.getViewOfSeriesModel=function(p){return f.getViewOfSeriesModel(p)},d}(zN))(f)},NF=function(f){function h(d,p){for(var v=0;v<d.length;v++){var g=d[v];g[m2]=p}}F(kd,function(d,p){f._messageCenter.on(p,function(v){if(f6[f.group]&&f[m2]!==o6){if(v&&v.escapeConnect)return;var g=f.makeActionFromEvent(v),m=[];F(Ad,function(_){_!==f&&_.group===f.group&&m.push(_)}),h(m,o6),F(m,function(_){_[m2]!==Pnt&&_.dispatchAction(g)}),h(m,Ent)}})})}}(),t}(Gi),_E=FF.prototype;_E.on=LF("on");_E.off=LF("off");_E.one=function(e,t,r){var n=this;function i(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];t&&t.apply&&t.apply(this,o),n.off(e,i)}this.on.call(this,e,i,r)};var knt=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var Wm={},kd={},c3=[],f3=[],Hm=[],BF={},h3={},Ad={},f6={},Ant=+new Date-0,yE="_echarts_instance_";function Cnt(e,t,r){var n=!(r&&r.ssr);if(n){var i=Mnt(e);if(i)return i}var o=new FF(e,t,r);return o.id="ec_"+Ant++,Ad[o.id]=o,n&&b9(e,yE,o.id),NF(o),_i.trigger("afterinit",o),o}function Mnt(e){return Ad[YK(e,yE)]}function $F(e,t){BF[e]=t}function zF(e){ue(f3,e)<0&&f3.push(e)}function VF(e,t){wE(c3,e,t,gnt)}function xnt(e){bE("afterinit",e)}function Lnt(e){bE("afterupdate",e)}function bE(e,t){_i.on(e,t)}function gu(e,t,r){Ut(t)&&(r=t,t="");var n=Ot(e)?e.type:[e,e={event:t}][0];e.event=(e.event||n).toLowerCase(),t=e.event,!kd[t]&&(Fi(i6.test(n)&&i6.test(t)),Wm[n]||(Wm[n]={action:r,actionInfo:e}),kd[t]=n)}function Int(e,t){lE.register(e,t)}function Ont(e,t){wE(Hm,e,t,CF,"layout")}function mu(e,t){wE(Hm,e,t,MF,"visual")}var h6=[];function wE(e,t,r,n,i){if((Ut(t)||Ot(t))&&(r=t,t=n),!(ue(h6,r)>=0)){h6.push(r);var o=gF.wrapStageHandler(r,i);o.__prio=t,o.__raw=r,e.push(o)}}function UF(e,t){h3[e]=t}function Rnt(e,t,r){var n=cnt("registerMap");n&&n(e,t,r)}var Dnt=Bet;mu(mE,drt);mu(p_,prt);mu(p_,vrt);mu(mE,xrt);mu(p_,Lrt);mu(xF,snt);zF(UN);VF(pnt,met);UF("default",grt);gu({type:Vl,event:Vl,update:Vl},Gr);gu({type:Ug,event:Ug,update:Ug},Gr);gu({type:bd,event:bd,update:bd},Gr);gu({type:Gg,event:Gg,update:Gg},Gr);gu({type:wd,event:wd,update:wd},Gr);$F("light",Art);$F("dark",Crt);function fh(e){return e==null?0:e.length||1}function d6(e){return e}var Nnt=function(){function e(t,r,n,i,o,a){this._old=t,this._new=r,this._oldKeyGetter=n||d6,this._newKeyGetter=i||d6,this.context=o,this._diffModeMultiple=a==="multiple"}return e.prototype.add=function(t){return this._add=t,this},e.prototype.update=function(t){return this._update=t,this},e.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},e.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},e.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},e.prototype.remove=function(t){return this._remove=t,this},e.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},e.prototype._executeOneToOne=function(){var t=this._old,r=this._new,n={},i=new Array(t.length),o=new Array(r.length);this._initIndexMap(t,null,i,"_oldKeyGetter"),this._initIndexMap(r,n,o,"_newKeyGetter");for(var a=0;a<t.length;a++){var s=i[a],l=n[s],u=fh(l);if(u>1){var c=l.shift();l.length===1&&(n[s]=l[0]),this._update&&this._update(c,a)}else u===1?(n[s]=null,this._update&&this._update(l,a)):this._remove&&this._remove(a)}this._performRestAdd(o,n)},e.prototype._executeMultiple=function(){var t=this._old,r=this._new,n={},i={},o=[],a=[];this._initIndexMap(t,n,o,"_oldKeyGetter"),this._initIndexMap(r,i,a,"_newKeyGetter");for(var s=0;s<o.length;s++){var l=o[s],u=n[l],c=i[l],f=fh(u),h=fh(c);if(f>1&&h===1)this._updateManyToOne&&this._updateManyToOne(c,u),i[l]=null;else if(f===1&&h>1)this._updateOneToMany&&this._updateOneToMany(c,u),i[l]=null;else if(f===1&&h===1)this._update&&this._update(c,u),i[l]=null;else if(f>1&&h>1)this._updateManyToMany&&this._updateManyToMany(c,u),i[l]=null;else if(f>1)for(var d=0;d<f;d++)this._remove&&this._remove(u[d]);else this._remove&&this._remove(u)}this._performRestAdd(a,i)},e.prototype._performRestAdd=function(t,r){for(var n=0;n<t.length;n++){var i=t[n],o=r[i],a=fh(o);if(a>1)for(var s=0;s<a;s++)this._add&&this._add(o[s]);else a===1&&this._add&&this._add(o);r[i]=null}},e.prototype._initIndexMap=function(t,r,n,i){for(var o=this._diffModeMultiple,a=0;a<t.length;a++){var s="_ec_"+this[i](t[a],a);if(o||(n[a]=s),!!r){var l=r[s],u=fh(l);u===0?(r[s]=a,o&&n.push(s)):u===1?r[s]=[l,a]:l.push(a)}}},e}();const GF=Nnt;var Fnt=function(){function e(t,r){this._encode=t,this._schema=r}return e.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},e.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},e}();function Bnt(e,t){var r={},n=r.encode={},i=jt(),o=[],a=[],s={};F(e.dimensions,function(h){var d=e.getDimensionInfo(h),p=d.coordDim;if(p){var v=d.coordDimIndex;T2(n,p)[v]=h,d.isExtraCoord||(i.set(p,1),znt(d.type)&&(o[0]=h),T2(s,p)[v]=e.getDimensionIndex(d.name)),d.defaultTooltip&&a.push(h)}ON.each(function(g,m){var _=T2(n,m),y=d.otherDims[m];y!=null&&y!==!1&&(_[y]=d.name)})});var l=[],u={};i.each(function(h,d){var p=n[d];u[d]=p[0],l=l.concat(p)}),r.dataDimsOnCoord=l,r.dataDimIndicesOnCoord=Ct(l,function(h){return e.getDimensionInfo(h).storeDimIndex}),r.encodeFirstDimNotExtra=u;var c=n.label;c&&c.length&&(o=c.slice());var f=n.tooltip;return f&&f.length?a=f.slice():a.length||(a=o.slice()),n.defaultedLabel=o,n.defaultedTooltip=a,r.userOutput=new Fnt(s,t),r}function T2(e,t){return e.hasOwnProperty(t)||(e[t]=[]),e[t]}function $nt(e){return e==="category"?"ordinal":e==="time"?"time":"float"}function znt(e){return!(e==="ordinal"||e==="time")}var Vnt=function(){function e(t){this.otherDims={},t!=null&&at(this,t)}return e}();const Xg=Vnt;var Unt=Oe(),Gnt={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},jF=function(){function e(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return e.prototype.isDimensionOmitted=function(){return this._dimOmitted},e.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=XF(this.source)))},e.prototype.getSourceDimensionIndex=function(t){return qt(this._dimNameMap.get(t),-1)},e.prototype.getSourceDimension=function(t){var r=this.source.dimensionsDefine;if(r)return r[t]},e.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,r=jN(this.source),n=!YF(t),i="",o=[],a=0,s=0;a<t;a++){var l=void 0,u=void 0,c=void 0,f=this.dimensions[s];if(f&&f.storeDimIndex===a)l=r?f.name:null,u=f.type,c=f.ordinalMeta,s++;else{var h=this.getSourceDimension(a);h&&(l=r?h.name:null,u=h.type)}o.push({property:l,type:u,ordinalMeta:c}),r&&l!=null&&(!f||!f.isCalculationCoord)&&(i+=n?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),i+="$",i+=Gnt[u]||"f",c&&(i+=c.uid),i+="$"}var d=this.source,p=[d.seriesLayoutBy,d.startIndex,i].join("$$");return{dimensions:o,hash:p}},e.prototype.makeOutputDimensionNames=function(){for(var t=[],r=0,n=0;r<this._fullDimCount;r++){var i=void 0,o=this.dimensions[n];if(o&&o.storeDimIndex===r)o.isCalculationCoord||(i=o.name),n++;else{var a=this.getSourceDimension(r);a&&(i=a.name)}t.push(i)}return t},e.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},e}();function WF(e){return e instanceof jF}function HF(e){for(var t=jt(),r=0;r<(e||[]).length;r++){var n=e[r],i=Ot(n)?n.name:n;i!=null&&t.get(i)==null&&t.set(i,r)}return t}function XF(e){var t=Unt(e);return t.dimNameMap||(t.dimNameMap=HF(e.dimensionsDefine))}function YF(e){return e>30}var hh=Ot,za=Ct,jnt=typeof Int32Array>"u"?Array:Int32Array,Wnt="e\0\0",p6=-1,Hnt=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],Xnt=["_approximateExtent"],v6,Zp,dh,ph,P2,Kp,E2,Ynt=function(){function e(t,r){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var n,i=!1;WF(t)?(n=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(i=!0,n=t),n=n||["x","y"];for(var o={},a=[],s={},l=!1,u={},c=0;c<n.length;c++){var f=n[c],h=Et(f)?new Xg({name:f}):f instanceof Xg?f:new Xg(f),d=h.name;h.type=h.type||"float",h.coordDim||(h.coordDim=d,h.coordDimIndex=0);var p=h.otherDims=h.otherDims||{};a.push(d),o[d]=h,u[d]!=null&&(l=!0),h.createInvertedIndices&&(s[d]=[]),p.itemName===0&&(this._nameDimIdx=c),p.itemId===0&&(this._idDimIdx=c),i&&(h.storeDimIndex=c)}if(this.dimensions=a,this._dimInfos=o,this._initGetDimensionInfo(l),this.hostModel=r,this._invertedIndicesMap=s,this._dimOmitted){var v=this._dimIdxToName=jt();F(a,function(g){v.set(o[g].storeDimIndex,g)})}}return e.prototype.getDimension=function(t){var r=this._recognizeDimIndex(t);if(r==null)return t;if(r=t,!this._dimOmitted)return this.dimensions[r];var n=this._dimIdxToName.get(r);if(n!=null)return n;var i=this._schema.getSourceDimension(r);if(i)return i.name},e.prototype.getDimensionIndex=function(t){var r=this._recognizeDimIndex(t);if(r!=null)return r;if(t==null)return-1;var n=this._getDimInfo(t);return n?n.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},e.prototype._recognizeDimIndex=function(t){if(we(t)||t!=null&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},e.prototype._getStoreDimIndex=function(t){var r=this.getDimensionIndex(t);return r},e.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},e.prototype._initGetDimensionInfo=function(t){var r=this._dimInfos;this._getDimInfo=t?function(n){return r.hasOwnProperty(n)?r[n]:void 0}:function(n){return r[n]}},e.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},e.prototype.mapDimension=function(t,r){var n=this._dimSummary;if(r==null)return n.encodeFirstDimNotExtra[t];var i=n.encode[t];return i?i[r]:null},e.prototype.mapDimensionsAll=function(t){var r=this._dimSummary,n=r.encode[t];return(n||[]).slice()},e.prototype.getStore=function(){return this._store},e.prototype.initData=function(t,r,n){var i=this,o;if(t instanceof e3&&(o=t),!o){var a=this.dimensions,s=uE(t)||Wr(t)?new WN(t,a.length):t;o=new e3;var l=za(a,function(u){return{type:i._dimInfos[u].type,property:u}});o.initData(s,l,n)}this._store=o,this._nameList=(r||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,o.count()),this._dimSummary=Bnt(this,this._schema),this.userOutput=this._dimSummary.userOutput},e.prototype.appendData=function(t){var r=this._store.appendData(t);this._doInit(r[0],r[1])},e.prototype.appendValues=function(t,r){var n=this._store.appendValues(t,r.length),i=n.start,o=n.end,a=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),r)for(var s=i;s<o;s++){var l=s-i;this._nameList[s]=r[l],a&&E2(this,s)}},e.prototype._updateOrdinalMeta=function(){for(var t=this._store,r=this.dimensions,n=0;n<r.length;n++){var i=this._dimInfos[r[n]];i.ordinalMeta&&t.collectOrdinalMeta(i.storeDimIndex,i.ordinalMeta)}},e.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return this._idDimIdx==null&&t.getSource().sourceFormat!==Ss&&!t.fillStorage},e.prototype._doInit=function(t,r){if(!(t>=r)){var n=this._store,i=n.getProvider();this._updateOrdinalMeta();var o=this._nameList,a=this._idList,s=i.getSource().sourceFormat,l=s===si;if(l&&!i.pure)for(var u=[],c=t;c<r;c++){var f=i.getItem(c,u);if(!this.hasItemOption&&NK(f)&&(this.hasItemOption=!0),f){var h=f.name;o[c]==null&&h!=null&&(o[c]=ti(h,null));var d=f.id;a[c]==null&&d!=null&&(a[c]=ti(d,null))}}if(this._shouldMakeIdFromName())for(var c=t;c<r;c++)E2(this,c);v6(this)}},e.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.setApproximateExtent=function(t,r){r=this.getDimension(r),this._approximateExtent[r]=t.slice()},e.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},e.prototype.setCalculationInfo=function(t,r){hh(t)?at(this._calculationInfo,t):this._calculationInfo[t]=r},e.prototype.getName=function(t){var r=this.getRawIndex(t),n=this._nameList[r];return n==null&&this._nameDimIdx!=null&&(n=dh(this,this._nameDimIdx,r)),n==null&&(n=""),n},e.prototype._getCategory=function(t,r){var n=this._store.get(t,r),i=this._store.getOrdinalMeta(t);return i?i.categories[n]:n},e.prototype.getId=function(t){return Zp(this,this.getRawIndex(t))},e.prototype.count=function(){return this._store.count()},e.prototype.get=function(t,r){var n=this._store,i=this._dimInfos[t];if(i)return n.get(i.storeDimIndex,r)},e.prototype.getByRawIndex=function(t,r){var n=this._store,i=this._dimInfos[t];if(i)return n.getByRawIndex(i.storeDimIndex,r)},e.prototype.getIndices=function(){return this._store.getIndices()},e.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},e.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},e.prototype.getValues=function(t,r){var n=this,i=this._store;return ct(t)?i.getValues(za(t,function(o){return n._getStoreDimIndex(o)}),r):i.getValues(t)},e.prototype.hasValue=function(t){for(var r=this._dimSummary.dataDimIndicesOnCoord,n=0,i=r.length;n<i;n++)if(isNaN(this._store.get(r[n],t)))return!1;return!0},e.prototype.indexOfName=function(t){for(var r=0,n=this._store.count();r<n;r++)if(this.getName(r)===t)return r;return-1},e.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},e.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},e.prototype.rawIndexOf=function(t,r){var n=t&&this._invertedIndicesMap[t],i=n[r];return i==null||isNaN(i)?p6:i},e.prototype.indicesOfNearest=function(t,r,n){return this._store.indicesOfNearest(this._getStoreDimIndex(t),r,n)},e.prototype.each=function(t,r,n){Ut(t)&&(n=r,r=t,t=[]);var i=n||this,o=za(ph(t),this._getStoreDimIndex,this);this._store.each(o,i?Vt(r,i):r)},e.prototype.filterSelf=function(t,r,n){Ut(t)&&(n=r,r=t,t=[]);var i=n||this,o=za(ph(t),this._getStoreDimIndex,this);return this._store=this._store.filter(o,i?Vt(r,i):r),this},e.prototype.selectRange=function(t){var r=this,n={},i=ge(t);return F(i,function(o){var a=r._getStoreDimIndex(o);n[a]=t[o]}),this._store=this._store.selectRange(n),this},e.prototype.mapArray=function(t,r,n){Ut(t)&&(n=r,r=t,t=[]),n=n||this;var i=[];return this.each(t,function(){i.push(r&&r.apply(this,arguments))},n),i},e.prototype.map=function(t,r,n,i){var o=n||i||this,a=za(ph(t),this._getStoreDimIndex,this),s=Kp(this);return s._store=this._store.map(a,o?Vt(r,o):r),s},e.prototype.modify=function(t,r,n,i){var o=n||i||this,a=za(ph(t),this._getStoreDimIndex,this);this._store.modify(a,o?Vt(r,o):r)},e.prototype.downSample=function(t,r,n,i){var o=Kp(this);return o._store=this._store.downSample(this._getStoreDimIndex(t),r,n,i),o},e.prototype.lttbDownSample=function(t,r){var n=Kp(this);return n._store=this._store.lttbDownSample(this._getStoreDimIndex(t),r),n},e.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},e.prototype.getItemModel=function(t){var r=this.hostModel,n=this.getRawDataItem(t);return new Pr(n,r,r&&r.ecModel)},e.prototype.diff=function(t){var r=this;return new GF(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(n){return Zp(t,n)},function(n){return Zp(r,n)})},e.prototype.getVisual=function(t){var r=this._visual;return r&&r[t]},e.prototype.setVisual=function(t,r){this._visual=this._visual||{},hh(t)?at(this._visual,t):this._visual[t]=r},e.prototype.getItemVisual=function(t,r){var n=this._itemVisuals[t],i=n&&n[r];return i==null?this.getVisual(r):i},e.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},e.prototype.ensureUniqueItemVisual=function(t,r){var n=this._itemVisuals,i=n[t];i||(i=n[t]={});var o=i[r];return o==null&&(o=this.getVisual(r),ct(o)?o=o.slice():hh(o)&&(o=at({},o)),i[r]=o),o},e.prototype.setItemVisual=function(t,r,n){var i=this._itemVisuals[t]||{};this._itemVisuals[t]=i,hh(r)?at(i,r):i[r]=n},e.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},e.prototype.setLayout=function(t,r){hh(t)?at(this._layout,t):this._layout[t]=r},e.prototype.getLayout=function(t){return this._layout[t]},e.prototype.getItemLayout=function(t){return this._itemLayouts[t]},e.prototype.setItemLayout=function(t,r,n){this._itemLayouts[t]=n?at(this._itemLayouts[t]||{},r):r},e.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},e.prototype.setItemGraphicEl=function(t,r){var n=this.hostModel&&this.hostModel.seriesIndex;QJ(n,this.dataType,t,r),this._graphicEls[t]=r},e.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},e.prototype.eachItemGraphicEl=function(t,r){F(this._graphicEls,function(n,i){n&&t&&t.call(r,n,i)})},e.prototype.cloneShallow=function(t){return t||(t=new e(this._schema?this._schema:za(this.dimensions,this._getDimInfo,this),this.hostModel)),P2(t,this),t._store=this._store,t},e.prototype.wrapMethod=function(t,r){var n=this[t];!Ut(n)||(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var i=n.apply(this,arguments);return r.apply(this,[i].concat(CP(arguments)))})},e.internalField=function(){v6=function(t){var r=t._invertedIndicesMap;F(r,function(n,i){var o=t._dimInfos[i],a=o.ordinalMeta,s=t._store;if(a){n=r[i]=new jnt(a.categories.length);for(var l=0;l<n.length;l++)n[l]=p6;for(var l=0;l<s.count();l++)n[s.get(o.storeDimIndex,l)]=l}})},dh=function(t,r,n){return ti(t._getCategory(r,n),null)},Zp=function(t,r){var n=t._idList[r];return n==null&&t._idDimIdx!=null&&(n=dh(t,t._idDimIdx,r)),n==null&&(n=Wnt+r),n},ph=function(t){return ct(t)||(t=t!=null?[t]:[]),t},Kp=function(t){var r=new e(t._schema?t._schema:za(t.dimensions,t._getDimInfo,t),t.hostModel);return P2(r,t),r},P2=function(t,r){F(Hnt.concat(r.__wrappedMethods||[]),function(n){r.hasOwnProperty(n)&&(t[n]=r[n])}),t.__wrappedMethods=r.__wrappedMethods,F(Xnt,function(n){t[n]=zt(r[n])}),t._calculationInfo=at({},r._calculationInfo)},E2=function(t,r){var n=t._nameList,i=t._idList,o=t._nameDimIdx,a=t._idDimIdx,s=n[r],l=i[r];if(s==null&&o!=null&&(n[r]=s=dh(t,o,r)),l==null&&a!=null&&(i[r]=l=dh(t,a,r)),l==null&&s!=null){var u=t._nameRepeatCount,c=u[s]=(u[s]||0)+1;l=s,c>1&&(l+="__ec__"+c),i[r]=l}}}(),e}();const Ul=Ynt;function qF(e,t){uE(e)||(e=cE(e)),t=t||{};var r=t.coordDimensions||[],n=t.dimensionsDefine||e.dimensionsDefine||[],i=jt(),o=[],a=Znt(e,r,n,t.dimensionsCount),s=t.canOmitUnusedDimensions&&YF(a),l=n===e.dimensionsDefine,u=l?XF(e):HF(n),c=t.encodeDefine;!c&&t.encodeDefaulter&&(c=t.encodeDefaulter(e,a));for(var f=jt(c),h=new tF(a),d=0;d<h.length;d++)h[d]=-1;function p(k){var C=h[k];if(C<0){var M=n[k],D=Ot(M)?M:{name:M},B=new Xg,V=D.name;V!=null&&u.get(V)!=null&&(B.name=B.displayName=V),D.type!=null&&(B.type=D.type),D.displayName!=null&&(B.displayName=D.displayName);var N=o.length;return h[k]=N,B.storeDimIndex=k,o.push(B),B}return o[C]}if(!s)for(var d=0;d<a;d++)p(d);f.each(function(k,C){var M=Ze(k).slice();if(M.length===1&&!Et(M[0])&&M[0]<0){f.set(C,!1);return}var D=f.set(C,[]);F(M,function(B,V){var N=Et(B)?u.get(B):B;N!=null&&N<a&&(D[V]=N,g(p(N),C,V))})});var v=0;F(r,function(k){var C,M,D,B;if(Et(k))C=k,B={};else{B=k,C=B.name;var V=B.ordinalMeta;B.ordinalMeta=null,B=at({},B),B.ordinalMeta=V,M=B.dimsDef,D=B.otherDims,B.name=B.coordDim=B.coordDimIndex=B.dimsDef=B.otherDims=null}var N=f.get(C);if(N!==!1){if(N=Ze(N),!N.length)for(var j=0;j<(M&&M.length||1);j++){for(;v<a&&p(v).coordDim!=null;)v++;v<a&&N.push(v++)}F(N,function(Z,q){var et=p(Z);if(l&&B.type!=null&&(et.type=B.type),g(te(et,B),C,q),et.name==null&&M){var Pt=M[q];!Ot(Pt)&&(Pt={name:Pt}),et.name=et.displayName=Pt.name,et.defaultTooltip=Pt.defaultTooltip}D&&te(et.otherDims,D)})}});function g(k,C,M){ON.get(C)!=null?k.otherDims[C]=M:(k.coordDim=C,k.coordDimIndex=M,i.set(C,!0))}var m=t.generateCoord,_=t.generateCoordCount,y=_!=null;_=m?_||1:0;var w=m||"value";function T(k){k.name==null&&(k.name=k.coordDim)}if(s)F(o,function(k){T(k)}),o.sort(function(k,C){return k.storeDimIndex-C.storeDimIndex});else for(var S=0;S<a;S++){var P=p(S),A=P.coordDim;A==null&&(P.coordDim=Knt(w,i,y),P.coordDimIndex=0,(!m||_<=0)&&(P.isExtraCoord=!0),_--),T(P),P.type==null&&(FN(e,S)===Tn.Must||P.isExtraCoord&&(P.otherDims.itemName!=null||P.otherDims.seriesName!=null))&&(P.type="ordinal")}return qnt(o),new jF({source:e,dimensions:o,fullDimensionCount:a,dimensionOmitted:s})}function qnt(e){for(var t=jt(),r=0;r<e.length;r++){var n=e[r],i=n.name,o=t.get(i)||0;o>0&&(n.name=i+(o-1)),o++,t.set(i,o)}}function Znt(e,t,r,n){var i=Math.max(e.dimensionsDetectedCount||1,t.length,r.length,n||0);return F(t,function(o){var a;Ot(o)&&(a=o.dimsDef)&&(i=Math.max(i,a.length))}),i}function Knt(e,t,r){var n=t.data;if(r||n.hasOwnProperty(e)){for(var i=0;n.hasOwnProperty(e+i);)i++;e+=i}return t.set(e,!0),e}var Jnt=function(){function e(t){this.coordSysDims=[],this.axisMap=jt(),this.categoryAxisMap=jt(),this.coordSysName=t}return e}();function Qnt(e){var t=e.get("coordinateSystem"),r=new Jnt(t),n=tit[t];if(n)return n(e,r,r.axisMap,r.categoryAxisMap),r}var tit={cartesian2d:function(e,t,r,n){var i=e.getReferringComponents("xAxis",ki).models[0],o=e.getReferringComponents("yAxis",ki).models[0];t.coordSysDims=["x","y"],r.set("x",i),r.set("y",o),Hu(i)&&(n.set("x",i),t.firstCategoryDimIndex=0),Hu(o)&&(n.set("y",o),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},singleAxis:function(e,t,r,n){var i=e.getReferringComponents("singleAxis",ki).models[0];t.coordSysDims=["single"],r.set("single",i),Hu(i)&&(n.set("single",i),t.firstCategoryDimIndex=0)},polar:function(e,t,r,n){var i=e.getReferringComponents("polar",ki).models[0],o=i.findAxisModel("radiusAxis"),a=i.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],r.set("radius",o),r.set("angle",a),Hu(o)&&(n.set("radius",o),t.firstCategoryDimIndex=0),Hu(a)&&(n.set("angle",a),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},geo:function(e,t,r,n){t.coordSysDims=["lng","lat"]},parallel:function(e,t,r,n){var i=e.ecModel,o=i.getComponent("parallel",e.get("parallelIndex")),a=t.coordSysDims=o.dimensions.slice();F(o.parallelAxisIndex,function(s,l){var u=i.getComponent("parallelAxis",s),c=a[l];r.set(c,u),Hu(u)&&(n.set(c,u),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=l))})}};function Hu(e){return e.get("type")==="category"}function eit(e,t,r){r=r||{};var n=r.byIndex,i=r.stackedCoordDimension,o,a,s;rit(t)?o=t:(a=t.schema,o=a.dimensions,s=t.store);var l=!!(e&&e.get("stack")),u,c,f,h;if(F(o,function(_,y){Et(_)&&(o[y]=_={name:_}),l&&!_.isExtraCoord&&(!n&&!u&&_.ordinalMeta&&(u=_),!c&&_.type!=="ordinal"&&_.type!=="time"&&(!i||i===_.coordDim)&&(c=_))}),c&&!n&&!u&&(n=!0),c){f="__\0ecstackresult_"+e.id,h="__\0ecstackedover_"+e.id,u&&(u.createInvertedIndices=!0);var d=c.coordDim,p=c.type,v=0;F(o,function(_){_.coordDim===d&&v++});var g={name:f,coordDim:d,coordDimIndex:v,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:o.length},m={name:h,coordDim:h,coordDimIndex:v+1,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:o.length+1};a?(s&&(g.storeDimIndex=s.ensureCalculationDimension(h,p),m.storeDimIndex=s.ensureCalculationDimension(f,p)),a.appendCalculationDimension(g),a.appendCalculationDimension(m)):(o.push(g),o.push(m))}return{stackedDimension:c&&c.name,stackedByDimension:u&&u.name,isStackedByIndex:n,stackedOverDimension:h,stackResultDimension:f}}function rit(e){return!WF(e.schema)}function nu(e,t){return!!t&&t===e.getCalculationInfo("stackedDimension")}function ZF(e,t){return nu(e,t)?e.getCalculationInfo("stackResultDimension"):t}function nit(e,t){var r=e.get("coordinateSystem"),n=lE.get(r),i;return t&&t.coordSysDims&&(i=Ct(t.coordSysDims,function(o){var a={name:o},s=t.axisMap.get(o);if(s){var l=s.get("type");a.type=$nt(l)}return a})),i||(i=n&&(n.getDimensionsInfo?n.getDimensionsInfo():n.dimensions.slice())||["x","y"]),i}function iit(e,t,r){var n,i;return r&&F(e,function(o,a){var s=o.coordDim,l=r.categoryAxisMap.get(s);l&&(n==null&&(n=a),o.ordinalMeta=l.getOrdinalMeta(),t&&(o.createInvertedIndices=!0)),o.otherDims.itemName!=null&&(i=!0)}),!i&&n!=null&&(e[n].otherDims.itemName=0),n}function D0(e,t,r){r=r||{};var n=t.getSourceManager(),i,o=!1;e?(o=!0,i=cE(e)):(i=n.getSource(),o=i.sourceFormat===si);var a=Qnt(t),s=nit(t,a),l=r.useEncodeDefaulter,u=Ut(l)?l:l?be(Utt,s,t):null,c={coordDimensions:s,generateCoord:r.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:u,canOmitUnusedDimensions:!o},f=qF(i,c),h=iit(f.dimensions,r.createInvertedIndices,a),d=o?null:n.getSharedDataStore(f),p=eit(t,{schema:f,store:d}),v=new Ul(f,t);v.setCalculationInfo(p);var g=h!=null&&oit(i)?function(m,_,y,w){return w===h?y:this.defaultDimValueGetter(m,_,y,w)}:null;return v.hasItemOption=!1,v.initData(o?i:d,null,g),v}function oit(e){if(e.sourceFormat===si){var t=ait(e.data||[]);return!ct(x0(t))}}function ait(e){for(var t=0;t<e.length&&e[t]==null;)t++;return e[t]}var KF=function(){function e(t){this._setting=t||{},this._extent=[1/0,-1/0]}return e.prototype.getSetting=function(t){return this._setting[t]},e.prototype.unionExtent=function(t){var r=this._extent;t[0]<r[0]&&(r[0]=t[0]),t[1]>r[1]&&(r[1]=t[1])},e.prototype.unionExtentFromData=function(t,r){this.unionExtent(t.getApproximateExtent(r))},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.setExtent=function(t,r){var n=this._extent;isNaN(t)||(n[0]=t),isNaN(r)||(n[1]=r)},e.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},e.prototype.isBlank=function(){return this._isBlank},e.prototype.setBlank=function(t){this._isBlank=t},e}();H1(KF);const Ma=KF;var sit=0,lit=function(){function e(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++sit}return e.createByAxisModel=function(t){var r=t.option,n=r.data,i=n&&Ct(n,uit);return new e({categories:i,needCollect:!i,deduplication:r.dedplication!==!1})},e.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},e.prototype.parseAndCollect=function(t){var r,n=this._needCollect;if(!Et(t)&&!n)return t;if(n&&!this._deduplication)return r=this.categories.length,this.categories[r]=t,r;var i=this._getOrCreateMap();return r=i.get(t),r==null&&(n?(r=this.categories.length,this.categories[r]=t,i.set(t,r)):r=NaN),r},e.prototype._getOrCreateMap=function(){return this._map||(this._map=jt(this.categories))},e}();function uit(e){return Ot(e)&&e.value!=null?e.value:e+""}const d3=lit;function p3(e){return e.type==="interval"||e.type==="log"}function cit(e,t,r,n){var i={},o=e[1]-e[0],a=i.interval=v9(o/t,!0);r!=null&&a<r&&(a=i.interval=r),n!=null&&a>n&&(a=i.interval=n);var s=i.intervalPrecision=JF(a),l=i.niceTickExtent=[qe(Math.ceil(e[0]/a)*a,s),qe(Math.floor(e[1]/a)*a,s)];return fit(l,e),i}function k2(e){var t=Math.pow(10,FP(e)),r=e/t;return r?r===2?r=3:r===3?r=5:r*=2:r=1,qe(r*t)}function JF(e){return To(e)+2}function g6(e,t,r){e[t]=Math.max(Math.min(e[t],r[1]),r[0])}function fit(e,t){!isFinite(e[0])&&(e[0]=t[0]),!isFinite(e[1])&&(e[1]=t[1]),g6(e,0,t),g6(e,1,t),e[0]>e[1]&&(e[0]=e[1])}function v_(e,t){return e>=t[0]&&e<=t[1]}function g_(e,t){return t[1]===t[0]?.5:(e-t[0])/(t[1]-t[0])}function m_(e,t){return e*(t[1]-t[0])+t[0]}var QF=function(e){_t(t,e);function t(r){var n=e.call(this,r)||this;n.type="ordinal";var i=n.getSetting("ordinalMeta");return i||(i=new d3({})),ct(i)&&(i=new d3({categories:Ct(i,function(o){return Ot(o)?o.value:o})})),n._ordinalMeta=i,n._extent=n.getSetting("extent")||[0,i.categories.length-1],n}return t.prototype.parse=function(r){return r==null?NaN:Et(r)?this._ordinalMeta.getOrdinal(r):Math.round(r)},t.prototype.contain=function(r){return r=this.parse(r),v_(r,this._extent)&&this._ordinalMeta.categories[r]!=null},t.prototype.normalize=function(r){return r=this._getTickNumber(this.parse(r)),g_(r,this._extent)},t.prototype.scale=function(r){return r=Math.round(m_(r,this._extent)),this.getRawOrdinalNumber(r)},t.prototype.getTicks=function(){for(var r=[],n=this._extent,i=n[0];i<=n[1];)r.push({value:i}),i++;return r},t.prototype.getMinorTicks=function(r){},t.prototype.setSortInfo=function(r){if(r==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var n=r.ordinalNumbers,i=this._ordinalNumbersByTick=[],o=this._ticksByOrdinalNumber=[],a=0,s=this._ordinalMeta.categories.length,l=Math.min(s,n.length);a<l;++a){var u=n[a];i[a]=u,o[u]=a}for(var c=0;a<s;++a){for(;o[c]!=null;)c++;i.push(c),o[c]=a}},t.prototype._getTickNumber=function(r){var n=this._ticksByOrdinalNumber;return n&&r>=0&&r<n.length?n[r]:r},t.prototype.getRawOrdinalNumber=function(r){var n=this._ordinalNumbersByTick;return n&&r>=0&&r<n.length?n[r]:r},t.prototype.getLabel=function(r){if(!this.isBlank()){var n=this.getRawOrdinalNumber(r.value),i=this._ordinalMeta.categories[n];return i==null?"":i+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.unionExtentFromData=function(r,n){this.unionExtent(r.getApproximateExtent(n))},t.prototype.isInExtentRange=function(r){return r=this._getTickNumber(r),this._extent[0]<=r&&this._extent[1]>=r},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t}(Ma);Ma.registerClass(QF);const tB=QF;var pl=qe,eB=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="interval",r._interval=0,r._intervalPrecision=2,r}return t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return v_(r,this._extent)},t.prototype.normalize=function(r){return g_(r,this._extent)},t.prototype.scale=function(r){return m_(r,this._extent)},t.prototype.setExtent=function(r,n){var i=this._extent;isNaN(r)||(i[0]=parseFloat(r)),isNaN(n)||(i[1]=parseFloat(n))},t.prototype.unionExtent=function(r){var n=this._extent;r[0]<n[0]&&(n[0]=r[0]),r[1]>n[1]&&(n[1]=r[1]),this.setExtent(n[0],n[1])},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(r){this._interval=r,this._niceExtent=this._extent.slice(),this._intervalPrecision=JF(r)},t.prototype.getTicks=function(r){var n=this._interval,i=this._extent,o=this._niceExtent,a=this._intervalPrecision,s=[];if(!n)return s;var l=1e4;i[0]<o[0]&&(r?s.push({value:pl(o[0]-n,a)}):s.push({value:i[0]}));for(var u=o[0];u<=o[1]&&(s.push({value:u}),u=pl(u+n,a),u!==s[s.length-1].value);)if(s.length>l)return[];var c=s.length?s[s.length-1].value:o[1];return i[1]>c&&(r?s.push({value:pl(c+n,a)}):s.push({value:i[1]})),s},t.prototype.getMinorTicks=function(r){for(var n=this.getTicks(!0),i=[],o=this.getExtent(),a=1;a<n.length;a++){for(var s=n[a],l=n[a-1],u=0,c=[],f=s.value-l.value,h=f/r;u<r-1;){var d=pl(l.value+(u+1)*h);d>o[0]&&d<o[1]&&c.push(d),u++}i.push(c)}return i},t.prototype.getLabel=function(r,n){if(r==null)return"";var i=n&&n.precision;i==null?i=To(r.value)||0:i==="auto"&&(i=this._intervalPrecision);var o=pl(r.value,i,!0);return MN(o)},t.prototype.calcNiceTicks=function(r,n,i){r=r||5;var o=this._extent,a=o[1]-o[0];if(!!isFinite(a)){a<0&&(a=-a,o.reverse());var s=cit(o,r,n,i);this._intervalPrecision=s.intervalPrecision,this._interval=s.interval,this._niceExtent=s.niceTickExtent}},t.prototype.calcNiceExtent=function(r){var n=this._extent;if(n[0]===n[1])if(n[0]!==0){var i=Math.abs(n[0]);r.fixMax||(n[1]+=i/2),n[0]-=i/2}else n[1]=1;var o=n[1]-n[0];isFinite(o)||(n[0]=0,n[1]=1),this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval);var a=this._interval;r.fixMin||(n[0]=pl(Math.floor(n[0]/a)*a)),r.fixMax||(n[1]=pl(Math.ceil(n[1]/a)*a))},t.prototype.setNiceExtent=function(r,n){this._niceExtent=[r,n]},t.type="interval",t}(Ma);Ma.registerClass(eB);const N0=eB;var rB=typeof Float32Array<"u",hit=rB?Float32Array:Array;function sa(e){return ct(e)?rB?new Float32Array(e):e:new hit(e)}var v3="__ec_stack_";function SE(e){return e.get("stack")||v3+e.seriesIndex}function TE(e){return e.dim+e.index}function dit(e){var t=[],r=e.axis,n="axis0";if(r.type==="category"){for(var i=r.getBandWidth(),o=0;o<e.count;o++)t.push(te({bandWidth:i,axisKey:n,stackId:v3+o},e));for(var a=oB(t),s=[],o=0;o<e.count;o++){var l=a[n][v3+o];l.offsetCenter=l.offset+l.width/2,s.push(l)}return s}}function nB(e,t){var r=[];return t.eachSeriesByType(e,function(n){aB(n)&&r.push(n)}),r}function pit(e){var t={};F(e,function(l){var u=l.coordinateSystem,c=u.getBaseAxis();if(!(c.type!=="time"&&c.type!=="value"))for(var f=l.getData(),h=c.dim+"_"+c.index,d=f.getDimensionIndex(f.mapDimension(c.dim)),p=f.getStore(),v=0,g=p.count();v<g;++v){var m=p.get(d,v);t[h]?t[h].push(m):t[h]=[m]}});var r={};for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];if(i){i.sort(function(l,u){return l-u});for(var o=null,a=1;a<i.length;++a){var s=i[a]-i[a-1];s>0&&(o=o===null?s:Math.min(o,s))}r[n]=o}}return r}function iB(e){var t=pit(e),r=[];return F(e,function(n){var i=n.coordinateSystem,o=i.getBaseAxis(),a=o.getExtent(),s;if(o.type==="category")s=o.getBandWidth();else if(o.type==="value"||o.type==="time"){var l=o.dim+"_"+o.index,u=t[l],c=Math.abs(a[1]-a[0]),f=o.scale.getExtent(),h=Math.abs(f[1]-f[0]);s=u?c/h*u:c}else{var d=n.getData();s=Math.abs(a[1]-a[0])/d.count()}var p=We(n.get("barWidth"),s),v=We(n.get("barMaxWidth"),s),g=We(n.get("barMinWidth")||(sB(n)?.5:1),s),m=n.get("barGap"),_=n.get("barCategoryGap");r.push({bandWidth:s,barWidth:p,barMaxWidth:v,barMinWidth:g,barGap:m,barCategoryGap:_,axisKey:TE(o),stackId:SE(n)})}),oB(r)}function oB(e){var t={};F(e,function(n,i){var o=n.axisKey,a=n.bandWidth,s=t[o]||{bandWidth:a,remainedWidth:a,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},l=s.stacks;t[o]=s;var u=n.stackId;l[u]||s.autoWidthCount++,l[u]=l[u]||{width:0,maxWidth:0};var c=n.barWidth;c&&!l[u].width&&(l[u].width=c,c=Math.min(s.remainedWidth,c),s.remainedWidth-=c);var f=n.barMaxWidth;f&&(l[u].maxWidth=f);var h=n.barMinWidth;h&&(l[u].minWidth=h);var d=n.barGap;d!=null&&(s.gap=d);var p=n.barCategoryGap;p!=null&&(s.categoryGap=p)});var r={};return F(t,function(n,i){r[i]={};var o=n.stacks,a=n.bandWidth,s=n.categoryGap;if(s==null){var l=ge(o).length;s=Math.max(35-l*4,15)+"%"}var u=We(s,a),c=We(n.gap,1),f=n.remainedWidth,h=n.autoWidthCount,d=(f-u)/(h+(h-1)*c);d=Math.max(d,0),F(o,function(m){var _=m.maxWidth,y=m.minWidth;if(m.width){var w=m.width;_&&(w=Math.min(w,_)),y&&(w=Math.max(w,y)),m.width=w,f-=w+c*w,h--}else{var w=d;_&&_<w&&(w=Math.min(_,f)),y&&y>w&&(w=y),w!==d&&(m.width=w,f-=w+c*w,h--)}}),d=(f-u)/(h+(h-1)*c),d=Math.max(d,0);var p=0,v;F(o,function(m,_){m.width||(m.width=d),v=m,p+=m.width*(1+c)}),v&&(p-=v.width*c);var g=-p/2;F(o,function(m,_){r[i][_]=r[i][_]||{bandWidth:a,offset:g,width:m.width},g+=m.width*(1+c)})}),r}function vit(e,t,r){if(e&&t){var n=e[TE(t)];return n!=null&&r!=null?n[SE(r)]:n}}function git(e,t){var r=nB(e,t),n=iB(r);F(r,function(i){var o=i.getData(),a=i.coordinateSystem,s=a.getBaseAxis(),l=SE(i),u=n[TE(s)][l],c=u.offset,f=u.width;o.setLayout({bandWidth:u.bandWidth,offset:c,size:f})})}function mit(e){return{seriesType:e,plan:pE(),reset:function(t){if(!!aB(t)){var r=t.getData(),n=t.coordinateSystem,i=n.getBaseAxis(),o=n.getOtherAxis(i),a=r.getDimensionIndex(r.mapDimension(o.dim)),s=r.getDimensionIndex(r.mapDimension(i.dim)),l=t.get("showBackground",!0),u=r.mapDimension(o.dim),c=r.getCalculationInfo("stackResultDimension"),f=nu(r,u)&&!!r.getCalculationInfo("stackedOnSeries"),h=o.isHorizontal(),d=_it(i,o),p=sB(t),v=t.get("barMinHeight")||0,g=c&&r.getDimensionIndex(c),m=r.getLayout("size"),_=r.getLayout("offset");return{progress:function(y,w){for(var T=y.count,S=p&&sa(T*3),P=p&&l&&sa(T*3),A=p&&sa(T),k=n.master.getRect(),C=h?k.width:k.height,M,D=w.getStore(),B=0;(M=y.next())!=null;){var V=D.get(f?g:a,M),N=D.get(s,M),j=d,Z=void 0;f&&(Z=+V-D.get(a,M));var q=void 0,et=void 0,Pt=void 0,Rt=void 0;if(h){var wt=n.dataToPoint([V,N]);if(f){var St=n.dataToPoint([Z,N]);j=St[0]}q=j,et=wt[1]+_,Pt=wt[0]-j,Rt=m,Math.abs(Pt)<v&&(Pt=(Pt<0?-1:1)*v)}else{var wt=n.dataToPoint([N,V]);if(f){var St=n.dataToPoint([N,Z]);j=St[1]}q=wt[0]+_,et=j,Pt=m,Rt=wt[1]-j,Math.abs(Rt)<v&&(Rt=(Rt<=0?-1:1)*v)}p?(S[B]=q,S[B+1]=et,S[B+2]=h?Pt:Rt,P&&(P[B]=h?k.x:q,P[B+1]=h?et:k.y,P[B+2]=C),A[M]=M):w.setItemLayout(M,{x:q,y:et,width:Pt,height:Rt}),B+=3}p&&w.setLayout({largePoints:S,largeDataIndices:A,largeBackgroundPoints:P,valueAxisHorizontal:h})}}}}}}function aB(e){return e.coordinateSystem&&e.coordinateSystem.type==="cartesian2d"}function sB(e){return e.pipelineContext&&e.pipelineContext.large}function _it(e,t){return t.toGlobalCoord(t.dataToCoord(t.type==="log"?1:0))}var yit=function(e,t,r,n){for(;r<n;){var i=r+n>>>1;e[i][1]<t?r=i+1:n=i}return r},lB=function(e){_t(t,e);function t(r){var n=e.call(this,r)||this;return n.type="time",n}return t.prototype.getLabel=function(r){var n=this.getSetting("useUTC");return n_(r.value,a4[Ltt(Nc(this._minLevelUnit))]||a4.second,n,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(r,n,i){var o=this.getSetting("useUTC"),a=this.getSetting("locale");return Itt(r,n,i,a,o)},t.prototype.getTicks=function(){var r=this._interval,n=this._extent,i=[];if(!r)return i;i.push({value:n[0],level:0});var o=this.getSetting("useUTC"),a=kit(this._minLevelUnit,this._approxInterval,o,n);return i=i.concat(a),i.push({value:n[1],level:0}),i},t.prototype.calcNiceExtent=function(r){var n=this._extent;if(n[0]===n[1]&&(n[0]-=Jn,n[1]+=Jn),n[1]===-1/0&&n[0]===1/0){var i=new Date;n[1]=+new Date(i.getFullYear(),i.getMonth(),i.getDate()),n[0]=n[1]-Jn}this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval)},t.prototype.calcNiceTicks=function(r,n,i){r=r||10;var o=this._extent,a=o[1]-o[0];this._approxInterval=a/r,n!=null&&this._approxInterval<n&&(this._approxInterval=n),i!=null&&this._approxInterval>i&&(this._approxInterval=i);var s=Jp.length,l=Math.min(yit(Jp,this._approxInterval,0,s),s-1);this._interval=Jp[l][1],this._minLevelUnit=Jp[Math.max(l-1,0)][0]},t.prototype.parse=function(r){return we(r)?r:+_a(r)},t.prototype.contain=function(r){return v_(this.parse(r),this._extent)},t.prototype.normalize=function(r){return g_(this.parse(r),this._extent)},t.prototype.scale=function(r){return m_(r,this._extent)},t.type="time",t}(N0),Jp=[["second",nE],["minute",iE],["hour",Pd],["quarter-day",Pd*6],["half-day",Pd*12],["day",Jn*1.2],["half-week",Jn*3.5],["week",Jn*7],["month",Jn*31],["quarter",Jn*95],["half-year",o4/2],["year",o4]];function bit(e,t,r,n){var i=_a(t),o=_a(r),a=function(p){return s4(i,p,n)===s4(o,p,n)},s=function(){return a("year")},l=function(){return s()&&a("month")},u=function(){return l()&&a("day")},c=function(){return u()&&a("hour")},f=function(){return c()&&a("minute")},h=function(){return f()&&a("second")},d=function(){return h()&&a("millisecond")};switch(e){case"year":return s();case"month":return l();case"day":return u();case"hour":return c();case"minute":return f();case"second":return h();case"millisecond":return d()}}function wit(e,t){return e/=Jn,e>16?16:e>7.5?7:e>3.5?4:e>1.5?2:1}function Sit(e){var t=30*Jn;return e/=t,e>6?6:e>3?3:e>2?2:1}function Tit(e){return e/=Pd,e>12?12:e>6?6:e>3.5?4:e>2?2:1}function m6(e,t){return e/=t?iE:nE,e>30?30:e>20?20:e>15?15:e>10?10:e>5?5:e>2?2:1}function Pit(e){return v9(e,!0)}function Eit(e,t,r){var n=new Date(e);switch(Nc(t)){case"year":case"month":n[TN(r)](0);case"day":n[PN(r)](1);case"hour":n[EN(r)](0);case"minute":n[kN(r)](0);case"second":n[AN(r)](0),n[CN(r)](0)}return n.getTime()}function kit(e,t,r,n){var i=1e4,o=wN,a=0;function s(C,M,D,B,V,N,j){for(var Z=new Date(M),q=M,et=Z[B]();q<D&&q<=n[1];)j.push({value:q}),et+=C,Z[V](et),q=Z.getTime();j.push({value:q,notAdd:!0})}function l(C,M,D){var B=[],V=!M.length;if(!bit(Nc(C),n[0],n[1],r)){V&&(M=[{value:Eit(new Date(n[0]),C,r)},{value:n[1]}]);for(var N=0;N<M.length-1;N++){var j=M[N].value,Z=M[N+1].value;if(j!==Z){var q=void 0,et=void 0,Pt=void 0,Rt=!1;switch(C){case"year":q=Math.max(1,Math.round(t/Jn/365)),et=oE(r),Pt=Ott(r);break;case"half-year":case"quarter":case"month":q=Sit(t),et=Fc(r),Pt=TN(r);break;case"week":case"half-week":case"day":q=wit(t),et=i_(r),Pt=PN(r),Rt=!0;break;case"half-day":case"quarter-day":case"hour":q=Tit(t),et=r0(r),Pt=EN(r);break;case"minute":q=m6(t,!0),et=o_(r),Pt=kN(r);break;case"second":q=m6(t,!1),et=a_(r),Pt=AN(r);break;case"millisecond":q=Pit(t),et=s_(r),Pt=CN(r);break}s(q,j,Z,et,Pt,Rt,B),C==="year"&&D.length>1&&N===0&&D.unshift({value:D[0].value-q})}}for(var N=0;N<B.length;N++)D.push(B[N]);return B}}for(var u=[],c=[],f=0,h=0,d=0;d<o.length&&a++<i;++d){var p=Nc(o[d]);if(!!xtt(o[d])){l(o[d],u[u.length-1]||[],c);var v=o[d+1]?Nc(o[d+1]):null;if(p!==v){if(c.length){h=f,c.sort(function(C,M){return C.value-M.value});for(var g=[],m=0;m<c.length;++m){var _=c[m].value;(m===0||c[m-1].value!==_)&&(g.push(c[m]),_>=n[0]&&_<=n[1]&&f++)}var y=(n[1]-n[0])/t;if(f>y*1.5&&h>y/1.5||(u.push(g),f>y||e===o[d]))break}c=[]}}}for(var w=wr(Ct(u,function(C){return wr(C,function(M){return M.value>=n[0]&&M.value<=n[1]&&!M.notAdd})}),function(C){return C.length>0}),T=[],S=w.length-1,d=0;d<w.length;++d)for(var P=w[d],A=0;A<P.length;++A)T.push({value:P[A].value,level:S-d});T.sort(function(C,M){return C.value-M.value});for(var k=[],d=0;d<T.length;++d)(d===0||T[d].value!==T[d-1].value)&&k.push(T[d]);return k}Ma.registerClass(lB);const Ait=lB;var _6=Ma.prototype,Cd=N0.prototype,Cit=qe,Mit=Math.floor,xit=Math.ceil,Qp=Math.pow,fi=Math.log,PE=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="log",r.base=10,r._originalScale=new N0,r._interval=0,r}return t.prototype.getTicks=function(r){var n=this._originalScale,i=this._extent,o=n.getExtent(),a=Cd.getTicks.call(this,r);return Ct(a,function(s){var l=s.value,u=qe(Qp(this.base,l));return u=l===i[0]&&this._fixMin?tv(u,o[0]):u,u=l===i[1]&&this._fixMax?tv(u,o[1]):u,{value:u}},this)},t.prototype.setExtent=function(r,n){var i=fi(this.base);r=fi(Math.max(0,r))/i,n=fi(Math.max(0,n))/i,Cd.setExtent.call(this,r,n)},t.prototype.getExtent=function(){var r=this.base,n=_6.getExtent.call(this);n[0]=Qp(r,n[0]),n[1]=Qp(r,n[1]);var i=this._originalScale,o=i.getExtent();return this._fixMin&&(n[0]=tv(n[0],o[0])),this._fixMax&&(n[1]=tv(n[1],o[1])),n},t.prototype.unionExtent=function(r){this._originalScale.unionExtent(r);var n=this.base;r[0]=fi(r[0])/fi(n),r[1]=fi(r[1])/fi(n),_6.unionExtent.call(this,r)},t.prototype.unionExtentFromData=function(r,n){this.unionExtent(r.getApproximateExtent(n))},t.prototype.calcNiceTicks=function(r){r=r||10;var n=this._extent,i=n[1]-n[0];if(!(i===1/0||i<=0)){var o=OK(i),a=r/i*o;for(a<=.5&&(o*=10);!isNaN(o)&&Math.abs(o)<1&&Math.abs(o)>0;)o*=10;var s=[qe(xit(n[0]/o)*o),qe(Mit(n[1]/o)*o)];this._interval=o,this._niceExtent=s}},t.prototype.calcNiceExtent=function(r){Cd.calcNiceExtent.call(this,r),this._fixMin=r.fixMin,this._fixMax=r.fixMax},t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return r=fi(r)/fi(this.base),v_(r,this._extent)},t.prototype.normalize=function(r){return r=fi(r)/fi(this.base),g_(r,this._extent)},t.prototype.scale=function(r){return r=m_(r,this._extent),Qp(this.base,r)},t.type="log",t}(Ma),uB=PE.prototype;uB.getMinorTicks=Cd.getMinorTicks;uB.getLabel=Cd.getLabel;function tv(e,t){return Cit(e,To(t))}Ma.registerClass(PE);const Lit=PE;var Iit=function(){function e(t,r,n){this._prepareParams(t,r,n)}return e.prototype._prepareParams=function(t,r,n){n[1]<n[0]&&(n=[NaN,NaN]),this._dataMin=n[0],this._dataMax=n[1];var i=this._isOrdinal=t.type==="ordinal";this._needCrossZero=t.type==="interval"&&r.getNeedCrossZero&&r.getNeedCrossZero();var o=this._modelMinRaw=r.get("min",!0);Ut(o)?this._modelMinNum=ev(t,o({min:n[0],max:n[1]})):o!=="dataMin"&&(this._modelMinNum=ev(t,o));var a=this._modelMaxRaw=r.get("max",!0);if(Ut(a)?this._modelMaxNum=ev(t,a({min:n[0],max:n[1]})):a!=="dataMax"&&(this._modelMaxNum=ev(t,a)),i)this._axisDataLen=r.getCategories().length;else{var s=r.get("boundaryGap"),l=ct(s)?s:[s||0,s||0];typeof l[0]=="boolean"||typeof l[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[ga(l[0],1),ga(l[1],1)]}},e.prototype.calculate=function(){var t=this._isOrdinal,r=this._dataMin,n=this._dataMax,i=this._axisDataLen,o=this._boundaryGapInner,a=t?null:n-r||Math.abs(r),s=this._modelMinRaw==="dataMin"?r:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?n:this._modelMaxNum,u=s!=null,c=l!=null;s==null&&(s=t?i?0:NaN:r-o[0]*a),l==null&&(l=t?i?i-1:NaN:n+o[1]*a),(s==null||!isFinite(s))&&(s=NaN),(l==null||!isFinite(l))&&(l=NaN);var f=Pm(s)||Pm(l)||t&&!i;this._needCrossZero&&(s>0&&l>0&&!u&&(s=0),s<0&&l<0&&!c&&(l=0));var h=this._determinedMin,d=this._determinedMax;return h!=null&&(s=h,u=!0),d!=null&&(l=d,c=!0),{min:s,max:l,minFixed:u,maxFixed:c,isBlank:f}},e.prototype.modifyDataMinMax=function(t,r){this[Rit[t]]=r},e.prototype.setDeterminedMinMax=function(t,r){var n=Oit[t];this[n]=r},e.prototype.freeze=function(){this.frozen=!0},e}(),Oit={min:"_determinedMin",max:"_determinedMax"},Rit={min:"_dataMin",max:"_dataMax"};function Dit(e,t,r){var n=e.rawExtentInfo;return n||(n=new Iit(e,t,r),e.rawExtentInfo=n,n)}function ev(e,t){return t==null?null:Pm(t)?NaN:e.parse(t)}function cB(e,t){var r=e.type,n=Dit(e,t,e.getExtent()).calculate();e.setBlank(n.isBlank);var i=n.min,o=n.max,a=t.ecModel;if(a&&r==="time"){var s=nB("bar",a),l=!1;if(F(s,function(f){l=l||f.getBaseAxis()===t.axis}),l){var u=iB(s),c=Nit(i,o,t,u);i=c.min,o=c.max}}return{extent:[i,o],fixMin:n.minFixed,fixMax:n.maxFixed}}function Nit(e,t,r,n){var i=r.axis.getExtent(),o=i[1]-i[0],a=vit(n,r.axis);if(a===void 0)return{min:e,max:t};var s=1/0;F(a,function(d){s=Math.min(d.offset,s)});var l=-1/0;F(a,function(d){l=Math.max(d.offset+d.width,l)}),s=Math.abs(s),l=Math.abs(l);var u=s+l,c=t-e,f=1-(s+l)/o,h=c/f-c;return t+=h*(l/u),e-=h*(s/u),{min:e,max:t}}function y6(e,t){var r=t,n=cB(e,r),i=n.extent,o=r.get("splitNumber");e instanceof Lit&&(e.base=r.get("logBase"));var a=e.type,s=r.get("interval"),l=a==="interval"||a==="time";e.setExtent(i[0],i[1]),e.calcNiceExtent({splitNumber:o,fixMin:n.fixMin,fixMax:n.fixMax,minInterval:l?r.get("minInterval"):null,maxInterval:l?r.get("maxInterval"):null}),s!=null&&e.setInterval&&e.setInterval(s)}function Fit(e,t){if(t=t||e.get("type"),t)switch(t){case"category":return new tB({ordinalMeta:e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),extent:[1/0,-1/0]});case"time":return new Ait({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new(Ma.getClass(t)||N0)}}function Bit(e){var t=e.scale.getExtent(),r=t[0],n=t[1];return!(r>0&&n>0||r<0&&n<0)}function F0(e){var t=e.getLabelModel().get("formatter"),r=e.type==="category"?e.scale.getExtent()[0]:null;return e.scale.type==="time"?function(n){return function(i,o){return e.scale.getFormattedLabel(i,o,n)}}(t):Et(t)?function(n){return function(i){var o=e.scale.getLabel(i),a=n.replace("{value}",o!=null?o:"");return a}}(t):Ut(t)?function(n){return function(i,o){return r!=null&&(o=i.value-r),n(EE(e,i),o,i.level!=null?{level:i.level}:null)}}(t):function(n){return e.scale.getLabel(n)}}function EE(e,t){return e.type==="category"?e.scale.getLabel(t):t.value}function $it(e){var t=e.model,r=e.scale;if(!(!t.get(["axisLabel","show"])||r.isBlank())){var n,i,o=r.getExtent();r instanceof tB?i=r.count():(n=r.getTicks(),i=n.length);var a=e.getLabelModel(),s=F0(e),l,u=1;i>40&&(u=Math.ceil(i/40));for(var c=0;c<i;c+=u){var f=n?n[c]:{value:o[0]+c},h=s(f,c),d=a.getTextRect(h),p=zit(d,a.get("rotate")||0);l?l.union(p):l=p}return l}}function zit(e,t){var r=t*Math.PI/180,n=e.width,i=e.height,o=n*Math.abs(Math.cos(r))+Math.abs(i*Math.sin(r)),a=n*Math.abs(Math.sin(r))+Math.abs(i*Math.cos(r)),s=new ae(e.x,e.y,o,a);return s}function kE(e){var t=e.get("interval");return t==null?"auto":t}function fB(e){return e.type==="category"&&kE(e.getLabelModel())===0}function Vit(e,t){var r={};return F(e.mapDimensionsAll(t),function(n){r[ZF(e,n)]=!0}),ge(r)}var Uit=function(){function e(){}return e.prototype.getNeedCrossZero=function(){var t=this.option;return!t.scale},e.prototype.getCoordSysModel=function(){},e}(),b6=[],Git={registerPreprocessor:zF,registerProcessor:VF,registerPostInit:xnt,registerPostUpdate:Lnt,registerUpdateLifecycle:bE,registerAction:gu,registerCoordinateSystem:Int,registerLayout:Ont,registerVisual:mu,registerTransform:Dnt,registerLoading:UF,registerMap:Rnt,registerImpl:unt,PRIORITY:Tnt,ComponentModel:Ce,ComponentView:oi,SeriesModel:Lo,ChartView:ei,registerComponentModel:function(e){Ce.registerClass(e)},registerComponentView:function(e){oi.registerClass(e)},registerSeriesModel:function(e){Lo.registerClass(e)},registerChartView:function(e){ei.registerClass(e)},registerSubTypeDefaulter:function(e,t){Ce.registerSubTypeDefaulter(e,t)},registerPainter:function(e,t){AK(e,t)}};function Hr(e){if(ct(e)){F(e,function(t){Hr(t)});return}ue(b6,e)>=0||(b6.push(e),Ut(e)&&(e={install:e}),e.install(Git))}var s0=Oe();function jit(e){return e.type==="category"?Hit(e):Yit(e)}function Wit(e,t){return e.type==="category"?Xit(e,t):{ticks:Ct(e.scale.getTicks(),function(r){return r.value})}}function Hit(e){var t=e.getLabelModel(),r=hB(e,t);return!t.get("show")||e.scale.isBlank()?{labels:[],labelCategoryInterval:r.labelCategoryInterval}:r}function hB(e,t){var r=dB(e,"labels"),n=kE(t),i=pB(r,n);if(i)return i;var o,a;return Ut(n)?o=mB(e,n):(a=n==="auto"?qit(e):n,o=gB(e,a)),vB(r,n,{labels:o,labelCategoryInterval:a})}function Xit(e,t){var r=dB(e,"ticks"),n=kE(t),i=pB(r,n);if(i)return i;var o,a;if((!t.get("show")||e.scale.isBlank())&&(o=[]),Ut(n))o=mB(e,n,!0);else if(n==="auto"){var s=hB(e,e.getLabelModel());a=s.labelCategoryInterval,o=Ct(s.labels,function(l){return l.tickValue})}else a=n,o=gB(e,a,!0);return vB(r,n,{ticks:o,tickCategoryInterval:a})}function Yit(e){var t=e.scale.getTicks(),r=F0(e);return{labels:Ct(t,function(n,i){return{level:n.level,formattedLabel:r(n,i),rawLabel:e.scale.getLabel(n),tickValue:n.value}})}}function dB(e,t){return s0(e)[t]||(s0(e)[t]=[])}function pB(e,t){for(var r=0;r<e.length;r++)if(e[r].key===t)return e[r].value}function vB(e,t,r){return e.push({key:t,value:r}),r}function qit(e){var t=s0(e).autoInterval;return t!=null?t:s0(e).autoInterval=e.calculateCategoryInterval()}function Zit(e){var t=Kit(e),r=F0(e),n=(t.axisRotate-t.labelRotate)/180*Math.PI,i=e.scale,o=i.getExtent(),a=i.count();if(o[1]-o[0]<1)return 0;var s=1;a>40&&(s=Math.max(1,Math.floor(a/40)));for(var l=o[0],u=e.dataToCoord(l+1)-e.dataToCoord(l),c=Math.abs(u*Math.cos(n)),f=Math.abs(u*Math.sin(n)),h=0,d=0;l<=o[1];l+=s){var p=0,v=0,g=RP(r({value:l}),t.font,"center","top");p=g.width*1.3,v=g.height*1.3,h=Math.max(h,p,7),d=Math.max(d,v,7)}var m=h/c,_=d/f;isNaN(m)&&(m=1/0),isNaN(_)&&(_=1/0);var y=Math.max(0,Math.floor(Math.min(m,_))),w=s0(e.model),T=e.getExtent(),S=w.lastAutoInterval,P=w.lastTickCount;return S!=null&&P!=null&&Math.abs(S-y)<=1&&Math.abs(P-a)<=1&&S>y&&w.axisExtent0===T[0]&&w.axisExtent1===T[1]?y=S:(w.lastTickCount=a,w.lastAutoInterval=y,w.axisExtent0=T[0],w.axisExtent1=T[1]),y}function Kit(e){var t=e.getLabelModel();return{axisRotate:e.getRotate?e.getRotate():e.isHorizontal&&!e.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}function gB(e,t,r){var n=F0(e),i=e.scale,o=i.getExtent(),a=e.getLabelModel(),s=[],l=Math.max((t||0)+1,1),u=o[0],c=i.count();u!==0&&l>1&&c/l>2&&(u=Math.round(Math.ceil(u/l)*l));var f=fB(e),h=a.get("showMinLabel")||f,d=a.get("showMaxLabel")||f;h&&u!==o[0]&&v(o[0]);for(var p=u;p<=o[1];p+=l)v(p);d&&p-l!==o[1]&&v(o[1]);function v(g){var m={value:g};s.push(r?g:{formattedLabel:n(m),rawLabel:i.getLabel(m),tickValue:g})}return s}function mB(e,t,r){var n=e.scale,i=F0(e),o=[];return F(n.getTicks(),function(a){var s=n.getLabel(a),l=a.value;t(a.value,s)&&o.push(r?l:{formattedLabel:i(a),rawLabel:s,tickValue:l})}),o}var w6=[0,1],Jit=function(){function e(t,r,n){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=r,this._extent=n||[0,0]}return e.prototype.contain=function(t){var r=this._extent,n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return t>=n&&t<=i},e.prototype.containData=function(t){return this.scale.contain(t)},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.getPixelPrecision=function(t){return xK(t||this.scale.getExtent(),this._extent)},e.prototype.setExtent=function(t,r){var n=this._extent;n[0]=t,n[1]=r},e.prototype.dataToCoord=function(t,r){var n=this._extent,i=this.scale;return t=i.normalize(t),this.onBand&&i.type==="ordinal"&&(n=n.slice(),S6(n,i.count())),ma(t,w6,n,r)},e.prototype.coordToData=function(t,r){var n=this._extent,i=this.scale;this.onBand&&i.type==="ordinal"&&(n=n.slice(),S6(n,i.count()));var o=ma(t,n,w6,r);return this.scale.scale(o)},e.prototype.pointToData=function(t,r){},e.prototype.getTicksCoords=function(t){t=t||{};var r=t.tickModel||this.getTickModel(),n=Wit(this,r),i=n.ticks,o=Ct(i,function(s){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(s):s),tickValue:s}},this),a=r.get("alignWithLabel");return Qit(this,o,a,t.clamp),o},e.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var t=this.model.getModel("minorTick"),r=t.get("splitNumber");r>0&&r<100||(r=5);var n=this.scale.getMinorTicks(r),i=Ct(n,function(o){return Ct(o,function(a){return{coord:this.dataToCoord(a),tickValue:a}},this)},this);return i},e.prototype.getViewLabels=function(){return jit(this).labels},e.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},e.prototype.getTickModel=function(){return this.model.getModel("axisTick")},e.prototype.getBandWidth=function(){var t=this._extent,r=this.scale.getExtent(),n=r[1]-r[0]+(this.onBand?1:0);n===0&&(n=1);var i=Math.abs(t[1]-t[0]);return Math.abs(i)/n},e.prototype.calculateCategoryInterval=function(){return Zit(this)},e}();function S6(e,t){var r=e[1]-e[0],n=t,i=r/n/2;e[0]+=i,e[1]-=i}function Qit(e,t,r,n){var i=t.length;if(!e.onBand||r||!i)return;var o=e.getExtent(),a,s;if(i===1)t[0].coord=o[0],a=t[1]={coord:o[0]};else{var l=t[i-1].tickValue-t[0].tickValue,u=(t[i-1].coord-t[0].coord)/l;F(t,function(d){d.coord-=u/2});var c=e.scale.getExtent();s=1+c[1]-t[i-1].tickValue,a={coord:t[i-1].coord+u*s},t.push(a)}var f=o[0]>o[1];h(t[0].coord,o[0])&&(n?t[0].coord=o[0]:t.shift()),n&&h(o[0],t[0].coord)&&t.unshift({coord:o[0]}),h(o[1],a.coord)&&(n?a.coord=o[1]:t.pop()),n&&h(a.coord,o[1])&&t.push({coord:o[1]});function h(d,p){return d=qe(d),p=qe(p),f?d>p:d<p}}const tot=Jit;function eot(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(!n.defaultAttr.ignore){var i=n.label,o=i.getComputedTransform(),a=i.getBoundingRect(),s=!o||o[1]<1e-5&&o[2]<1e-5,l=i.style.margin||0,u=a.clone();u.applyTransform(o),u.x-=l/2,u.y-=l/2,u.width+=l,u.height+=l;var c=s?new Dm(a,o):null;t.push({label:i,labelLine:n.labelLine,rect:u,localRect:a,obb:c,priority:n.priority,defaultAttr:n.defaultAttr,layoutOption:n.computedLayoutOption,axisAligned:s,transform:o})}}return t}function rot(e){var t=[];e.sort(function(v,g){return g.priority-v.priority});var r=new ae(0,0,0,0);function n(v){if(!v.ignore){var g=v.ensureState("emphasis");g.ignore==null&&(g.ignore=!1)}v.ignore=!0}for(var i=0;i<e.length;i++){var o=e[i],a=o.axisAligned,s=o.localRect,l=o.transform,u=o.label,c=o.labelLine;r.copy(o.rect),r.width-=.1,r.height-=.1,r.x+=.05,r.y+=.05;for(var f=o.obb,h=!1,d=0;d<t.length;d++){var p=t[d];if(!!r.intersect(p.rect)){if(a&&p.axisAligned){h=!0;break}if(p.obb||(p.obb=new Dm(p.localRect,p.transform)),f||(f=new Dm(s,l)),f.intersect(p.obb)){h=!0;break}}}h?(n(u),c&&n(c)):(u.attr("ignore",o.defaultAttr.ignore),c&&c.attr("ignore",o.defaultAttr.labelGuideIgnore),t.push(o))}}function T6(e,t,r){var n=fu.createCanvas(),i=t.getWidth(),o=t.getHeight(),a=n.style;return a&&(a.position="absolute",a.left="0",a.top="0",a.width=i+"px",a.height=o+"px",n.setAttribute("data-zr-dom-id",e)),n.width=i*r,n.height=o*r,n}var not=function(e){ke(t,e);function t(r,n,i){var o=e.call(this)||this;o.motionBlur=!1,o.lastFrameAlpha=.7,o.dpr=1,o.virtual=!1,o.config={},o.incremental=!1,o.zlevel=0,o.maxRepaintRectCount=5,o.__dirty=!0,o.__firstTimePaint=!0,o.__used=!1,o.__drawIndex=0,o.__startIndex=0,o.__endIndex=0,o.__prevStartIndex=null,o.__prevEndIndex=null;var a;i=i||Lm,typeof r=="string"?a=T6(r,n,i):Ot(r)&&(a=r,r=a.id),o.id=r,o.dom=a;var s=a.style;return s&&(G7(a),a.onselectstart=function(){return!1},s.padding="0",s.margin="0",s.borderWidth="0"),o.painter=n,o.dpr=i,o}return t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var r=this.dpr;this.domBack=T6("back-"+this.id,this.painter,r),this.ctxBack=this.domBack.getContext("2d"),r!==1&&this.ctxBack.scale(r,r)},t.prototype.createRepaintRects=function(r,n,i,o){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var a=[],s=this.maxRepaintRectCount,l=!1,u=new ae(0,0,0,0);function c(_){if(!(!_.isFinite()||_.isZero()))if(a.length===0){var y=new ae(0,0,0,0);y.copy(_),a.push(y)}else{for(var w=!1,T=1/0,S=0,P=0;P<a.length;++P){var A=a[P];if(A.intersect(_)){var k=new ae(0,0,0,0);k.copy(A),k.union(_),a[P]=k,w=!0;break}else if(l){u.copy(_),u.union(A);var C=_.width*_.height,M=A.width*A.height,D=u.width*u.height,B=D-C-M;B<T&&(T=B,S=P)}}if(l&&(a[S].union(_),w=!0),!w){var y=new ae(0,0,0,0);y.copy(_),a.push(y)}l||(l=a.length>=s)}}for(var f=this.__startIndex;f<this.__endIndex;++f){var h=r[f];if(h){var d=h.shouldBePainted(i,o,!0,!0),p=h.__isRendered&&(h.__dirty&An||!d)?h.getPrevPaintRect():null;p&&c(p);var v=d&&(h.__dirty&An||!h.__isRendered)?h.getPaintRect():null;v&&c(v)}}for(var f=this.__prevStartIndex;f<this.__prevEndIndex;++f){var h=n[f],d=h.shouldBePainted(i,o,!0,!0);if(h&&(!d||!h.__zr)&&h.__isRendered){var p=h.getPrevPaintRect();p&&c(p)}}var g;do{g=!1;for(var f=0;f<a.length;){if(a[f].isZero()){a.splice(f,1);continue}for(var m=f+1;m<a.length;)a[f].intersect(a[m])?(g=!0,a[f].union(a[m]),a.splice(m,1)):m++;f++}}while(g);return this._paintRects=a,a},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(r,n){var i=this.dpr,o=this.dom,a=o.style,s=this.domBack;a&&(a.width=r+"px",a.height=n+"px"),o.width=r*i,o.height=n*i,s&&(s.width=r*i,s.height=n*i,i!==1&&this.ctxBack.scale(i,i))},t.prototype.clear=function(r,n,i){var o=this.dom,a=this.ctx,s=o.width,l=o.height;n=n||this.clearColor;var u=this.motionBlur&&!r,c=this.lastFrameAlpha,f=this.dpr,h=this;u&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(o,0,0,s/f,l/f));var d=this.domBack;function p(v,g,m,_){if(a.clearRect(v,g,m,_),n&&n!=="transparent"){var y=void 0;G1(n)?(y=n.__canvasGradient||l3(a,n,{x:0,y:0,width:m,height:_}),n.__canvasGradient=y):Qq(n)&&(n.scaleX=n.scaleX||f,n.scaleY=n.scaleY||f,y=u3(a,n,{dirty:function(){h.setUnpainted(),h.__painter.refresh()}})),a.save(),a.fillStyle=y||n,a.fillRect(v,g,m,_),a.restore()}u&&(a.save(),a.globalAlpha=c,a.drawImage(d,v,g,m,_),a.restore())}!i||u?p(0,0,s,l):i.length&&F(i,function(v){p(v.x*f,v.y*f,v.width*f,v.height*f)})},t}(Gi);const A2=not;var P6=1e5,vl=314159,rv=.01,iot=.001;function oot(e){return e?e.__builtin__?!0:!(typeof e.resize!="function"||typeof e.refresh!="function"):!1}function aot(e,t){var r=document.createElement("div");return r.style.cssText=["position:relative","width:"+e+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",r}var sot=function(){function e(t,r,n,i){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var o=!t.nodeName||t.nodeName.toUpperCase()==="CANVAS";this._opts=n=at({},n||{}),this.dpr=n.devicePixelRatio||Lm,this._singleCanvas=o,this.root=t;var a=t.style;a&&(G7(t),t.innerHTML=""),this.storage=r;var s=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(o){var c=t,f=c.width,h=c.height;n.width!=null&&(f=n.width),n.height!=null&&(h=n.height),this.dpr=n.devicePixelRatio||1,c.width=f*this.dpr,c.height=h*this.dpr,this._width=f,this._height=h;var d=new A2(c,this,this.dpr);d.__builtin__=!0,d.initContext(),l[vl]=d,d.zlevel=vl,s.push(vl),this._domRoot=t}else{this._width=Xp(t,0,n),this._height=Xp(t,1,n);var u=this._domRoot=aot(this._width,this._height);t.appendChild(u)}}return e.prototype.getType=function(){return"canvas"},e.prototype.isSingleCanvas=function(){return this._singleCanvas},e.prototype.getViewportRoot=function(){return this._domRoot},e.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},e.prototype.refresh=function(t){var r=this.storage.getDisplayList(!0),n=this._prevDisplayList,i=this._zlevelList;this._redrawId=Math.random(),this._paintList(r,n,t,this._redrawId);for(var o=0;o<i.length;o++){var a=i[o],s=this._layers[a];if(!s.__builtin__&&s.refresh){var l=o===0?this._backgroundColor:null;s.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=r.slice()),this},e.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},e.prototype._paintHoverList=function(t){var r=t.length,n=this._hoverlayer;if(n&&n.clear(),!!r){for(var i={inHover:!0,viewWidth:this._width,viewHeight:this._height},o,a=0;a<r;a++){var s=t[a];s.__inHover&&(n||(n=this._hoverlayer=this.getLayer(P6)),o||(o=n.ctx,o.save()),Ol(o,s,i,a===r-1))}o&&o.restore()}},e.prototype.getHoverLayer=function(){return this.getLayer(P6)},e.prototype.paintOne=function(t,r){TF(t,r)},e.prototype._paintList=function(t,r,n,i){if(this._redrawId===i){n=n||!1,this._updateLayerStatus(t);var o=this._doPaintList(t,r,n),a=o.finished,s=o.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),s&&this._paintHoverList(t),a)this.eachLayer(function(u){u.afterBrush&&u.afterBrush()});else{var l=this;AS(function(){l._paintList(t,r,n,i)})}}},e.prototype._compositeManually=function(){var t=this.getLayer(vl).ctx,r=this._domRoot.width,n=this._domRoot.height;t.clearRect(0,0,r,n),this.eachBuiltinLayer(function(i){i.virtual&&t.drawImage(i.dom,0,0,r,n)})},e.prototype._doPaintList=function(t,r,n){for(var i=this,o=[],a=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var l=this._zlevelList[s],u=this._layers[l];u.__builtin__&&u!==this._hoverlayer&&(u.__dirty||n)&&o.push(u)}for(var c=!0,f=!1,h=function(v){var g=o[v],m=g.ctx,_=a&&g.createRepaintRects(t,r,d._width,d._height),y=n?g.__startIndex:g.__drawIndex,w=!n&&g.incremental&&Date.now,T=w&&Date.now(),S=g.zlevel===d._zlevelList[0]?d._backgroundColor:null;if(g.__startIndex===g.__endIndex)g.clear(!1,S,_);else if(y===g.__startIndex){var P=t[y];(!P.incremental||!P.notClear||n)&&g.clear(!1,S,_)}y===-1&&(console.error("For some unknown reason. drawIndex is -1"),y=g.__startIndex);var A,k=function(B){var V={inHover:!1,allClipped:!1,prevEl:null,viewWidth:i._width,viewHeight:i._height};for(A=y;A<g.__endIndex;A++){var N=t[A];if(N.__inHover&&(f=!0),i._doPaintEl(N,g,a,B,V,A===g.__endIndex-1),w){var j=Date.now()-T;if(j>15)break}}V.prevElClipPaths&&m.restore()};if(_)if(_.length===0)A=g.__endIndex;else for(var C=d.dpr,M=0;M<_.length;++M){var D=_[M];m.save(),m.beginPath(),m.rect(D.x*C,D.y*C,D.width*C,D.height*C),m.clip(),k(D),m.restore()}else m.save(),k(),m.restore();g.__drawIndex=A,g.__drawIndex<g.__endIndex&&(c=!1)},d=this,p=0;p<o.length;p++)h(p);return Xt.wxa&&F(this._layers,function(v){v&&v.ctx&&v.ctx.draw&&v.ctx.draw()}),{finished:c,needsRefreshHover:f}},e.prototype._doPaintEl=function(t,r,n,i,o,a){var s=r.ctx;if(n){var l=t.getPaintRect();(!i||l&&l.intersect(i))&&(Ol(s,t,o,a),t.setPrevPaintRect(l))}else Ol(s,t,o,a)},e.prototype.getLayer=function(t,r){this._singleCanvas&&!this._needsManuallyCompositing&&(t=vl);var n=this._layers[t];return n||(n=new A2("zr_"+t,this,this.dpr),n.zlevel=t,n.__builtin__=!0,this._layerConfig[t]?oe(n,this._layerConfig[t],!0):this._layerConfig[t-rv]&&oe(n,this._layerConfig[t-rv],!0),r&&(n.virtual=r),this.insertLayer(t,n),n.initContext()),n},e.prototype.insertLayer=function(t,r){var n=this._layers,i=this._zlevelList,o=i.length,a=this._domRoot,s=null,l=-1;if(!n[t]&&!!oot(r)){if(o>0&&t>i[0]){for(l=0;l<o-1&&!(i[l]<t&&i[l+1]>t);l++);s=n[i[l]]}if(i.splice(l+1,0,t),n[t]=r,!r.virtual)if(s){var u=s.dom;u.nextSibling?a.insertBefore(r.dom,u.nextSibling):a.appendChild(r.dom)}else a.firstChild?a.insertBefore(r.dom,a.firstChild):a.appendChild(r.dom);r.__painter=this}},e.prototype.eachLayer=function(t,r){for(var n=this._zlevelList,i=0;i<n.length;i++){var o=n[i];t.call(r,this._layers[o],o)}},e.prototype.eachBuiltinLayer=function(t,r){for(var n=this._zlevelList,i=0;i<n.length;i++){var o=n[i],a=this._layers[o];a.__builtin__&&t.call(r,a,o)}},e.prototype.eachOtherLayer=function(t,r){for(var n=this._zlevelList,i=0;i<n.length;i++){var o=n[i],a=this._layers[o];a.__builtin__||t.call(r,a,o)}},e.prototype.getLayers=function(){return this._layers},e.prototype._updateLayerStatus=function(t){this.eachBuiltinLayer(function(f,h){f.__dirty=f.__used=!1});function r(f){o&&(o.__endIndex!==f&&(o.__dirty=!0),o.__endIndex=f)}if(this._singleCanvas)for(var n=1;n<t.length;n++){var i=t[n];if(i.zlevel!==t[n-1].zlevel||i.incremental){this._needsManuallyCompositing=!0;break}}var o=null,a=0,s,l;for(l=0;l<t.length;l++){var i=t[l],u=i.zlevel,c=void 0;s!==u&&(s=u,a=0),i.incremental?(c=this.getLayer(u+iot,this._needsManuallyCompositing),c.incremental=!0,a=1):c=this.getLayer(u+(a>0?rv:0),this._needsManuallyCompositing),c.__builtin__||AP("ZLevel "+u+" has been used by unkown layer "+c.id),c!==o&&(c.__used=!0,c.__startIndex!==l&&(c.__dirty=!0),c.__startIndex=l,c.incremental?c.__drawIndex=-1:c.__drawIndex=l,r(l),o=c),i.__dirty&An&&!i.__inHover&&(c.__dirty=!0,c.incremental&&c.__drawIndex<0&&(c.__drawIndex=l))}r(l),this.eachBuiltinLayer(function(f,h){!f.__used&&f.getElementCount()>0&&(f.__dirty=!0,f.__startIndex=f.__endIndex=f.__drawIndex=0),f.__dirty&&f.__drawIndex<0&&(f.__drawIndex=f.__startIndex)})},e.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},e.prototype._clearLayer=function(t){t.clear()},e.prototype.setBackgroundColor=function(t){this._backgroundColor=t,F(this._layers,function(r){r.setUnpainted()})},e.prototype.configLayer=function(t,r){if(r){var n=this._layerConfig;n[t]?oe(n[t],r,!0):n[t]=r;for(var i=0;i<this._zlevelList.length;i++){var o=this._zlevelList[i];if(o===t||o===t+rv){var a=this._layers[o];oe(a,n[t],!0)}}}},e.prototype.delLayer=function(t){var r=this._layers,n=this._zlevelList,i=r[t];!i||(i.dom.parentNode.removeChild(i.dom),delete r[t],n.splice(ue(n,t),1))},e.prototype.resize=function(t,r){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var i=this._opts,o=this.root;if(t!=null&&(i.width=t),r!=null&&(i.height=r),t=Xp(o,0,i),r=Xp(o,1,i),n.style.display="",this._width!==t||r!==this._height){n.style.width=t+"px",n.style.height=r+"px";for(var a in this._layers)this._layers.hasOwnProperty(a)&&this._layers[a].resize(t,r);this.refresh(!0)}this._width=t,this._height=r}else{if(t==null||r==null)return;this._width=t,this._height=r,this.getLayer(vl).resize(t,r)}return this},e.prototype.clearLayer=function(t){var r=this._layers[t];r&&r.clear()},e.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},e.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[vl].dom;var r=new A2("image",this,t.pixelRatio||this.dpr);r.initContext(),r.clear(!1,t.backgroundColor||this._backgroundColor);var n=r.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var i=r.dom.width,o=r.dom.height;this.eachLayer(function(f){f.__builtin__?n.drawImage(f.dom,0,0,i,o):f.renderToCanvas&&(n.save(),f.renderToCanvas(n),n.restore())})}else for(var a={inHover:!1,viewWidth:this._width,viewHeight:this._height},s=this.storage.getDisplayList(!0),l=0,u=s.length;l<u;l++){var c=s[l];Ol(n,c,a,l===u-1)}return r.dom},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e}();const lot=sot;function yf(e){e.registerPainter("canvas",lot)}var uot=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r){return D0(null,this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(r){var n=new De,i=Bi("line",0,r.itemHeight/2,r.itemWidth,0,r.lineStyle.stroke,!1);n.add(i),i.setStyle(r.lineStyle);var o=this.getData().getVisual("symbol"),a=this.getData().getVisual("symbolRotate"),s=o==="none"?"circle":o,l=r.itemHeight*.8,u=Bi(s,(r.itemWidth-l)/2,(r.itemHeight-l)/2,l,l,r.itemStyle.fill);n.add(u),u.setStyle(r.itemStyle);var c=r.iconRotate==="inherit"?a:r.iconRotate||0;return u.rotation=c*Math.PI/180,u.setOrigin([r.itemWidth/2,r.itemHeight/2]),s.indexOf("empty")>-1&&(u.style.stroke=u.style.fill,u.style.fill="#fff",u.style.lineWidth=2),n},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},t}(Lo);const cot=uot;function l0(e,t){var r=e.mapDimensionsAll("defaultedLabel"),n=r.length;if(n===1){var i=Kc(e,t,r[0]);return i!=null?i+"":null}else if(n){for(var o=[],a=0;a<r.length;a++)o.push(Kc(e,t,r[a]));return o.join(" ")}}function _B(e,t){var r=e.mapDimensionsAll("defaultedLabel");if(!ct(t))return t+"";for(var n=[],i=0;i<r.length;i++){var o=e.getDimensionIndex(r[i]);o>=0&&n.push(t[o])}return n.join(" ")}var fot=function(e){_t(t,e);function t(r,n,i,o){var a=e.call(this)||this;return a.updateData(r,n,i,o),a}return t.prototype._createSymbol=function(r,n,i,o,a){this.removeAll();var s=Bi(r,-1,-1,2,2,null,a);s.attr({z2:100,culling:!0,scaleX:o[0]/2,scaleY:o[1]/2}),s.drift=hot,this._symbolType=r,this.add(s)},t.prototype.stopSymbolAnimation=function(r){this.childAt(0).stopAnimation(null,r)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){Zd(this.childAt(0))},t.prototype.downplay=function(){Kd(this.childAt(0))},t.prototype.setZ=function(r,n){var i=this.childAt(0);i.zlevel=r,i.z=n},t.prototype.setDraggable=function(r,n){var i=this.childAt(0);i.draggable=r,i.cursor=!n&&r?"move":i.cursor},t.prototype.updateData=function(r,n,i,o){this.silent=!1;var a=r.getItemVisual(n,"symbol")||"circle",s=r.hostModel,l=t.getSymbolSize(r,n),u=a!==this._symbolType,c=o&&o.disableAnimation;if(u){var f=r.getItemVisual(n,"symbolKeepAspect");this._createSymbol(a,r,n,l,f)}else{var h=this.childAt(0);h.silent=!1;var d={scaleX:l[0]/2,scaleY:l[1]/2};c?h.attr(d):dr(h,d,s,n),lN(h)}if(this._updateCommon(r,n,l,i,o),u){var h=this.childAt(0);if(!c){var d={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:h.style.opacity}};h.scaleX=h.scaleY=0,h.style.opacity=0,xo(h,d,s,n)}}c&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(r,n,i,o,a){var s=this.childAt(0),l=r.hostModel,u,c,f,h,d,p,v,g,m;if(o&&(u=o.emphasisItemStyle,c=o.blurItemStyle,f=o.selectItemStyle,h=o.focus,d=o.blurScope,v=o.labelStatesModels,g=o.hoverScale,m=o.cursorStyle,p=o.emphasisDisabled),!o||r.hasItemOption){var _=o&&o.itemModel?o.itemModel:r.getItemModel(n),y=_.getModel("emphasis");u=y.getModel("itemStyle").getItemStyle(),f=_.getModel(["select","itemStyle"]).getItemStyle(),c=_.getModel(["blur","itemStyle"]).getItemStyle(),h=y.get("focus"),d=y.get("blurScope"),p=y.get("disabled"),v=pu(_),g=y.getShallow("scale"),m=_.getShallow("cursor")}var w=r.getItemVisual(n,"symbolRotate");s.attr("rotation",(w||0)*Math.PI/180||0);var T=gE(r.getItemVisual(n,"symbolOffset"),i);T&&(s.x=T[0],s.y=T[1]),m&&s.attr("cursor",m);var S=r.getItemVisual(n,"style"),P=S.fill;if(s instanceof ka){var A=s.style;s.useStyle(at({image:A.image,x:A.x,y:A.y,width:A.width,height:A.height},S))}else s.__isEmptyBrush?s.useStyle(at({},S)):s.useStyle(S),s.style.decal=null,s.setColor(P,a&&a.symbolInnerColor),s.style.strokeNoScale=!0;var k=r.getItemVisual(n,"liftZ"),C=this._z2;k!=null?C==null&&(this._z2=s.z2,s.z2+=k):C!=null&&(s.z2=C,this._z2=null);var M=a&&a.useNameLabel;gf(s,v,{labelFetcher:l,labelDataIndex:n,defaultText:D,inheritColor:P,defaultOpacity:S.opacity});function D(N){return M?r.getName(N):l0(r,N)}this._sizeX=i[0]/2,this._sizeY=i[1]/2;var B=s.ensureState("emphasis");B.style=u,s.ensureState("select").style=f,s.ensureState("blur").style=c;var V=g==null||g===!0?Math.max(1.1,3/this._sizeY):isFinite(g)&&g>0?+g:1;B.scaleX=this._sizeX*V,B.scaleY=this._sizeY*V,this.setSymbolScale(1),tu(this,h,d,p)},t.prototype.setSymbolScale=function(r){this.scaleX=this.scaleY=r},t.prototype.fadeOut=function(r,n,i){var o=this.childAt(0),a=ie(this).dataIndex,s=i&&i.animation;if(this.silent=o.silent=!0,i&&i.fadeLabel){var l=o.getTextContent();l&&eu(l,{style:{opacity:0}},n,{dataIndex:a,removeOpt:s,cb:function(){o.removeTextContent()}})}else o.removeTextContent();eu(o,{style:{opacity:0},scaleX:0,scaleY:0},n,{dataIndex:a,cb:r,removeOpt:s})},t.getSymbolSize=function(r,n){return yF(r.getItemVisual(n,"symbolSize"))},t}(De);function hot(e,t){this.parent.drift(e,t)}const __=fot;function C2(e,t,r,n){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(n.isIgnore&&n.isIgnore(r))&&!(n.clipShape&&!n.clipShape.contain(t[0],t[1]))&&e.getItemVisual(r,"symbol")!=="none"}function E6(e){return e!=null&&!Ot(e)&&(e={isIgnore:e}),e||{}}function k6(e){var t=e.hostModel,r=t.getModel("emphasis");return{emphasisItemStyle:r.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:r.get("focus"),blurScope:r.get("blurScope"),emphasisDisabled:r.get("disabled"),hoverScale:r.get("scale"),labelStatesModels:pu(t),cursorStyle:t.get("cursor")}}var dot=function(){function e(t){this.group=new De,this._SymbolCtor=t||__}return e.prototype.updateData=function(t,r){this._progressiveEls=null,r=E6(r);var n=this.group,i=t.hostModel,o=this._data,a=this._SymbolCtor,s=r.disableAnimation,l=k6(t),u={disableAnimation:s},c=r.getSymbolPoint||function(f){return t.getItemLayout(f)};o||n.removeAll(),t.diff(o).add(function(f){var h=c(f);if(C2(t,h,f,r)){var d=new a(t,f,l,u);d.setPosition(h),t.setItemGraphicEl(f,d),n.add(d)}}).update(function(f,h){var d=o.getItemGraphicEl(h),p=c(f);if(!C2(t,p,f,r)){n.remove(d);return}var v=t.getItemVisual(f,"symbol")||"circle",g=d&&d.getSymbolType&&d.getSymbolType();if(!d||g&&g!==v)n.remove(d),d=new a(t,f,l,u),d.setPosition(p);else{d.updateData(t,f,l,u);var m={x:p[0],y:p[1]};s?d.attr(m):dr(d,m,i)}n.add(d),t.setItemGraphicEl(f,d)}).remove(function(f){var h=o.getItemGraphicEl(f);h&&h.fadeOut(function(){n.remove(h)},i)}).execute(),this._getSymbolPoint=c,this._data=t},e.prototype.updateLayout=function(){var t=this,r=this._data;r&&r.eachItemGraphicEl(function(n,i){var o=t._getSymbolPoint(i);n.setPosition(o),n.markRedraw()})},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=k6(t),this._data=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,r,n){this._progressiveEls=[],n=E6(n);function i(l){l.isGroup||(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var o=t.start;o<t.end;o++){var a=r.getItemLayout(o);if(C2(r,a,o,n)){var s=new this._SymbolCtor(r,o,this._seriesScope);s.traverse(i),s.setPosition(a),this.group.add(s),r.setItemGraphicEl(o,s),this._progressiveEls.push(s)}}},e.prototype.eachRendered=function(t){vf(this._progressiveEls||this.group,t)},e.prototype.remove=function(t){var r=this.group,n=this._data;n&&t?n.eachItemGraphicEl(function(i){i.fadeOut(function(){r.remove(i)},n.hostModel)}):r.removeAll()},e}();const yB=dot;function bB(e,t,r){var n=e.getBaseAxis(),i=e.getOtherAxis(n),o=pot(i,r),a=n.dim,s=i.dim,l=t.mapDimension(s),u=t.mapDimension(a),c=s==="x"||s==="radius"?1:0,f=Ct(e.dimensions,function(p){return t.mapDimension(p)}),h=!1,d=t.getCalculationInfo("stackResultDimension");return nu(t,f[0])&&(h=!0,f[0]=d),nu(t,f[1])&&(h=!0,f[1]=d),{dataDimsForPoint:f,valueStart:o,valueAxisDim:s,baseAxisDim:a,stacked:!!h,valueDim:l,baseDim:u,baseDataOffset:c,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function pot(e,t){var r=0,n=e.scale.getExtent();return t==="start"?r=n[0]:t==="end"?r=n[1]:we(t)&&!isNaN(t)?r=t:n[0]>0?r=n[0]:n[1]<0&&(r=n[1]),r}function wB(e,t,r,n){var i=NaN;e.stacked&&(i=r.get(r.getCalculationInfo("stackedOverDimension"),n)),isNaN(i)&&(i=e.valueStart);var o=e.baseDataOffset,a=[];return a[o]=r.get(e.baseDim,n),a[1-o]=i,t.dataToPoint(a)}function vot(e,t){var r=[];return t.diff(e).add(function(n){r.push({cmd:"+",idx:n})}).update(function(n,i){r.push({cmd:"=",idx:i,idx1:n})}).remove(function(n){r.push({cmd:"-",idx:n})}).execute(),r}function got(e,t,r,n,i,o,a,s){for(var l=vot(e,t),u=[],c=[],f=[],h=[],d=[],p=[],v=[],g=bB(i,t,a),m=e.getLayout("points")||[],_=t.getLayout("points")||[],y=0;y<l.length;y++){var w=l[y],T=!0,S=void 0,P=void 0;switch(w.cmd){case"=":S=w.idx*2,P=w.idx1*2;var A=m[S],k=m[S+1],C=_[P],M=_[P+1];(isNaN(A)||isNaN(k))&&(A=C,k=M),u.push(A,k),c.push(C,M),f.push(r[S],r[S+1]),h.push(n[P],n[P+1]),v.push(t.getRawIndex(w.idx1));break;case"+":var D=w.idx,B=g.dataDimsForPoint,V=i.dataToPoint([t.get(B[0],D),t.get(B[1],D)]);P=D*2,u.push(V[0],V[1]),c.push(_[P],_[P+1]);var N=wB(g,i,t,D);f.push(N[0],N[1]),h.push(n[P],n[P+1]),v.push(t.getRawIndex(D));break;case"-":T=!1}T&&(d.push(w),p.push(p.length))}p.sort(function(Y,it){return v[Y]-v[it]});for(var j=u.length,Z=sa(j),q=sa(j),et=sa(j),Pt=sa(j),Rt=[],y=0;y<p.length;y++){var wt=p[y],St=y*2,Ht=wt*2;Z[St]=u[Ht],Z[St+1]=u[Ht+1],q[St]=c[Ht],q[St+1]=c[Ht+1],et[St]=f[Ht],et[St+1]=f[Ht+1],Pt[St]=h[Ht],Pt[St+1]=h[Ht+1],Rt[y]=d[wt]}return{current:Z,next:q,stackedOnCurrent:et,stackedOnNext:Pt,status:Rt}}var Va=Math.min,Ua=Math.max;function Gl(e,t){return isNaN(e)||isNaN(t)}function g3(e,t,r,n,i,o,a,s,l){for(var u,c,f,h,d,p,v=r,g=0;g<n;g++){var m=t[v*2],_=t[v*2+1];if(v>=i||v<0)break;if(Gl(m,_)){if(l){v+=o;continue}break}if(v===r)e[o>0?"moveTo":"lineTo"](m,_),f=m,h=_;else{var y=m-u,w=_-c;if(y*y+w*w<.5){v+=o;continue}if(a>0){for(var T=v+o,S=t[T*2],P=t[T*2+1];S===m&&P===_&&g<n;)g++,T+=o,v+=o,S=t[T*2],P=t[T*2+1],m=t[v*2],_=t[v*2+1],y=m-u,w=_-c;var A=g+1;if(l)for(;Gl(S,P)&&A<n;)A++,T+=o,S=t[T*2],P=t[T*2+1];var k=.5,C=0,M=0,D=void 0,B=void 0;if(A>=n||Gl(S,P))d=m,p=_;else{C=S-u,M=P-c;var V=m-u,N=S-m,j=_-c,Z=P-_,q=void 0,et=void 0;if(s==="x"){q=Math.abs(V),et=Math.abs(N);var Pt=C>0?1:-1;d=m-Pt*q*a,p=_,D=m+Pt*et*a,B=_}else if(s==="y"){q=Math.abs(j),et=Math.abs(Z);var Rt=M>0?1:-1;d=m,p=_-Rt*q*a,D=m,B=_+Rt*et*a}else q=Math.sqrt(V*V+j*j),et=Math.sqrt(N*N+Z*Z),k=et/(et+q),d=m-C*a*(1-k),p=_-M*a*(1-k),D=m+C*a*k,B=_+M*a*k,D=Va(D,Ua(S,m)),B=Va(B,Ua(P,_)),D=Ua(D,Va(S,m)),B=Ua(B,Va(P,_)),C=D-m,M=B-_,d=m-C*q/et,p=_-M*q/et,d=Va(d,Ua(u,m)),p=Va(p,Ua(c,_)),d=Ua(d,Va(u,m)),p=Ua(p,Va(c,_)),C=m-d,M=_-p,D=m+C*et/q,B=_+M*et/q}e.bezierCurveTo(f,h,d,p,m,_),f=D,h=B}else e.lineTo(m,_)}u=m,c=_,v+=o}return g}var SB=function(){function e(){this.smooth=0,this.smoothConstraint=!0}return e}(),mot=function(e){_t(t,e);function t(r){var n=e.call(this,r)||this;return n.type="ec-polyline",n}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new SB},t.prototype.buildPath=function(r,n){var i=n.points,o=0,a=i.length/2;if(n.connectNulls){for(;a>0&&Gl(i[a*2-2],i[a*2-1]);a--);for(;o<a&&Gl(i[o*2],i[o*2+1]);o++);}for(;o<a;)o+=g3(r,i,o,a,a,1,n.smooth,n.smoothMonotone,n.connectNulls)+1},t.prototype.getPointOn=function(r,n){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var i=this.path,o=i.data,a=Ql.CMD,s,l,u=n==="x",c=[],f=0;f<o.length;){var h=o[f++],d=void 0,p=void 0,v=void 0,g=void 0,m=void 0,_=void 0,y=void 0;switch(h){case a.M:s=o[f++],l=o[f++];break;case a.L:if(d=o[f++],p=o[f++],y=u?(r-s)/(d-s):(r-l)/(p-l),y<=1&&y>=0){var w=u?(p-l)*y+l:(d-s)*y+s;return u?[r,w]:[w,r]}s=d,l=p;break;case a.C:d=o[f++],p=o[f++],v=o[f++],g=o[f++],m=o[f++],_=o[f++];var T=u?Am(s,d,v,m,r,c):Am(l,p,g,_,r,c);if(T>0)for(var S=0;S<T;S++){var P=c[S];if(P<=1&&P>=0){var w=u?or(l,p,g,_,P):or(s,d,v,m,P);return u?[r,w]:[w,r]}}s=m,l=_;break}}},t}(fe),_ot=function(e){_t(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(SB),yot=function(e){_t(t,e);function t(r){var n=e.call(this,r)||this;return n.type="ec-polygon",n}return t.prototype.getDefaultShape=function(){return new _ot},t.prototype.buildPath=function(r,n){var i=n.points,o=n.stackedOnPoints,a=0,s=i.length/2,l=n.smoothMonotone;if(n.connectNulls){for(;s>0&&Gl(i[s*2-2],i[s*2-1]);s--);for(;a<s&&Gl(i[a*2],i[a*2+1]);a++);}for(;a<s;){var u=g3(r,i,a,s,s,1,n.smooth,l,n.connectNulls);g3(r,o,a+u-1,u,s,-1,n.stackedOnSmooth,l,n.connectNulls),a+=u+1,r.closePath()}},t}(fe);function TB(e,t,r,n,i){var o=e.getArea(),a=o.x,s=o.y,l=o.width,u=o.height,c=r.get(["lineStyle","width"])||2;a-=c/2,s-=c/2,l+=c,u+=c,a=Math.floor(a),l=Math.round(l);var f=new Ke({shape:{x:a,y:s,width:l,height:u}});if(t){var h=e.getBaseAxis(),d=h.isHorizontal(),p=h.inverse;d?(p&&(f.shape.x+=l),f.shape.width=0):(p||(f.shape.y+=u),f.shape.height=0);var v=Ut(i)?function(g){i(g,f)}:null;xo(f,{shape:{width:l,height:u,x:a,y:s}},r,null,n,v)}return f}function PB(e,t,r){var n=e.getArea(),i=qe(n.r0,1),o=qe(n.r,1),a=new O0({shape:{cx:qe(e.cx,1),cy:qe(e.cy,1),r0:i,r:o,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}});if(t){var s=e.getBaseAxis().dim==="angle";s?a.shape.endAngle=n.startAngle:a.shape.r=i,xo(a,{shape:{endAngle:n.endAngle,r:o}},r)}return a}function EB(e,t,r,n,i){if(e){if(e.type==="polar")return PB(e,t,r);if(e.type==="cartesian2d")return TB(e,t,r,n,i)}else return null;return null}function bf(e,t){return e.type===t}function A6(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return;return!0}}function C6(e){for(var t=1/0,r=1/0,n=-1/0,i=-1/0,o=0;o<e.length;){var a=e[o++],s=e[o++];isNaN(a)||(t=Math.min(a,t),n=Math.max(a,n)),isNaN(s)||(r=Math.min(s,r),i=Math.max(s,i))}return[[t,r],[n,i]]}function M6(e,t){var r=C6(e),n=r[0],i=r[1],o=C6(t),a=o[0],s=o[1];return Math.max(Math.abs(n[0]-a[0]),Math.abs(n[1]-a[1]),Math.abs(i[0]-s[0]),Math.abs(i[1]-s[1]))}function x6(e){return we(e)?e:e?.5:0}function bot(e,t,r){if(!r.valueDim)return[];for(var n=t.count(),i=sa(n*2),o=0;o<n;o++){var a=wB(r,e,t,o);i[o*2]=a[0],i[o*2+1]=a[1]}return i}function Ga(e,t,r,n){var i=t.getBaseAxis(),o=i.dim==="x"||i.dim==="radius"?0:1,a=[],s=0,l=[],u=[],c=[],f=[];if(n){for(s=0;s<e.length;s+=2)!isNaN(e[s])&&!isNaN(e[s+1])&&f.push(e[s],e[s+1]);e=f}for(s=0;s<e.length-2;s+=2)switch(c[0]=e[s+2],c[1]=e[s+3],u[0]=e[s],u[1]=e[s+1],a.push(u[0],u[1]),r){case"end":l[o]=c[o],l[1-o]=u[1-o],a.push(l[0],l[1]);break;case"middle":var h=(u[o]+c[o])/2,d=[];l[o]=d[o]=h,l[1-o]=u[1-o],d[1-o]=c[1-o],a.push(l[0],l[1]),a.push(d[0],d[1]);break;default:l[o]=u[o],l[1-o]=c[1-o],a.push(l[0],l[1])}return a.push(e[s++],e[s++]),a}function wot(e,t){var r=[],n=e.length,i,o;function a(c,f,h){var d=c.coord,p=(h-d)/(f.coord-d),v=KZ(p,[c.color,f.color]);return{coord:h,color:v}}for(var s=0;s<n;s++){var l=e[s],u=l.coord;if(u<0)i=l;else if(u>t){o?r.push(a(o,l,t)):i&&r.push(a(i,l,0),a(i,l,t));break}else i&&(r.push(a(i,l,0)),i=null),r.push(l),o=l}return r}function Sot(e,t,r){var n=e.getVisual("visualMeta");if(!(!n||!n.length||!e.count())&&t.type==="cartesian2d"){for(var i,o,a=n.length-1;a>=0;a--){var s=e.getDimensionInfo(n[a].dimension);if(i=s&&s.coordDim,i==="x"||i==="y"){o=n[a];break}}if(!!o){var l=t.getAxis(i),u=Ct(o.stops,function(y){return{coord:l.toGlobalCoord(l.dataToCoord(y.value)),color:y.color}}),c=u.length,f=o.outerColors.slice();c&&u[0].coord>u[c-1].coord&&(u.reverse(),f.reverse());var h=wot(u,i==="x"?r.getWidth():r.getHeight()),d=h.length;if(!d&&c)return u[0].coord<0?f[1]?f[1]:u[c-1].color:f[0]?f[0]:u[0].color;var p=10,v=h[0].coord-p,g=h[d-1].coord+p,m=g-v;if(m<.001)return"transparent";F(h,function(y){y.offset=(y.coord-v)/m}),h.push({offset:d?h[d-1].offset:.5,color:f[1]||"transparent"}),h.unshift({offset:d?h[0].offset:.5,color:f[0]||"transparent"});var _=new ZP(0,0,0,0,h,!0);return _[i]=v,_[i+"2"]=g,_}}}function Tot(e,t,r){var n=e.get("showAllSymbol"),i=n==="auto";if(!(n&&!i)){var o=r.getAxesByScale("ordinal")[0];if(!!o&&!(i&&Pot(o,t))){var a=t.mapDimension(o.dim),s={};return F(o.getViewLabels(),function(l){var u=o.scale.getRawOrdinalNumber(l.tickValue);s[u]=1}),function(l){return!s.hasOwnProperty(t.get(a,l))}}}}function Pot(e,t){var r=e.getExtent(),n=Math.abs(r[1]-r[0])/e.scale.count();isNaN(n)&&(n=0);for(var i=t.count(),o=Math.max(1,Math.round(i/5)),a=0;a<i;a+=o)if(__.getSymbolSize(t,a)[e.isHorizontal()?1:0]*1.5>n)return!1;return!0}function Eot(e,t){return isNaN(e)||isNaN(t)}function kot(e){for(var t=e.length/2;t>0&&Eot(e[t*2-2],e[t*2-1]);t--);return t-1}function L6(e,t){return[e[t*2],e[t*2+1]]}function Aot(e,t,r){for(var n=e.length/2,i=r==="x"?0:1,o,a,s=0,l=-1,u=0;u<n;u++)if(a=e[u*2+i],!(isNaN(a)||isNaN(e[u*2+1-i]))){if(u===0){o=a;continue}if(o<=t&&a>=t||o>=t&&a<=t){l=u;break}s=u,o=a}return{range:[s,l],t:(t-o)/(a-o)}}function kB(e){if(e.get(["endLabel","show"]))return!0;for(var t=0;t<ii.length;t++)if(e.get([ii[t],"endLabel","show"]))return!0;return!1}function M2(e,t,r,n){if(bf(t,"cartesian2d")){var i=n.getModel("endLabel"),o=i.get("valueAnimation"),a=n.getData(),s={lastFrameIndex:0},l=kB(n)?function(d,p){e._endLabelOnDuring(d,p,a,s,o,i,t)}:null,u=t.getBaseAxis().isHorizontal(),c=TB(t,r,n,function(){var d=e._endLabel;d&&r&&s.originalX!=null&&d.attr({x:s.originalX,y:s.originalY})},l);if(!n.get("clip",!0)){var f=c.shape,h=Math.max(f.width,f.height);u?(f.y-=h,f.height+=h*2):(f.x-=h,f.width+=h*2)}return l&&l(1,c),c}else return PB(t,r,n)}function Cot(e,t){var r=t.getBaseAxis(),n=r.isHorizontal(),i=r.inverse,o=n?i?"right":"left":"center",a=n?"middle":i?"top":"bottom";return{normal:{align:e.get("align")||o,verticalAlign:e.get("verticalAlign")||a}}}var Mot=function(e){_t(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(){var r=new De,n=new yB;this.group.add(n.group),this._symbolDraw=n,this._lineGroup=r},t.prototype.render=function(r,n,i){var o=this,a=r.coordinateSystem,s=this.group,l=r.getData(),u=r.getModel("lineStyle"),c=r.getModel("areaStyle"),f=l.getLayout("points")||[],h=a.type==="polar",d=this._coordSys,p=this._symbolDraw,v=this._polyline,g=this._polygon,m=this._lineGroup,_=r.get("animation"),y=!c.isEmpty(),w=c.get("origin"),T=bB(a,l,w),S=y&&bot(a,l,T),P=r.get("showSymbol"),A=r.get("connectNulls"),k=P&&!h&&Tot(r,l,a),C=this._data;C&&C.eachItemGraphicEl(function(it,K){it.__temp&&(s.remove(it),C.setItemGraphicEl(K,null))}),P||p.remove(),s.add(m);var M=h?!1:r.get("step"),D;a&&a.getArea&&r.get("clip",!0)&&(D=a.getArea(),D.width!=null?(D.x-=.1,D.y-=.1,D.width+=.2,D.height+=.2):D.r0&&(D.r0-=.5,D.r+=.5)),this._clipShapeForSymbol=D;var B=Sot(l,a,i)||l.getVisual("style")[l.getVisual("drawType")];if(!(v&&d.type===a.type&&M===this._step))P&&p.updateData(l,{isIgnore:k,clipShape:D,disableAnimation:!0,getSymbolPoint:function(it){return[f[it*2],f[it*2+1]]}}),_&&this._initSymbolLabelAnimation(l,a,D),M&&(f=Ga(f,a,M,A),S&&(S=Ga(S,a,M,A))),v=this._newPolyline(f),y?g=this._newPolygon(f,S):g&&(m.remove(g),g=this._polygon=null),h||this._initOrUpdateEndLabel(r,a,ru(B)),m.setClipPath(M2(this,a,!0,r));else{y&&!g?g=this._newPolygon(f,S):g&&!y&&(m.remove(g),g=this._polygon=null),h||this._initOrUpdateEndLabel(r,a,ru(B));var V=m.getClipPath();if(V){var N=M2(this,a,!1,r);xo(V,{shape:N.shape},r)}else m.setClipPath(M2(this,a,!0,r));P&&p.updateData(l,{isIgnore:k,clipShape:D,disableAnimation:!0,getSymbolPoint:function(it){return[f[it*2],f[it*2+1]]}}),(!A6(this._stackedOnPoints,S)||!A6(this._points,f))&&(_?this._doUpdateAnimation(l,S,a,i,M,w,A):(M&&(f=Ga(f,a,M,A),S&&(S=Ga(S,a,M,A))),v.setShape({points:f}),g&&g.setShape({points:f,stackedOnPoints:S})))}var j=r.getModel("emphasis"),Z=j.get("focus"),q=j.get("blurScope"),et=j.get("disabled");if(v.useStyle(te(u.getLineStyle(),{fill:"none",stroke:B,lineJoin:"bevel"})),Jd(v,r,"lineStyle"),v.style.lineWidth>0&&r.get(["emphasis","lineStyle","width"])==="bolder"){var Pt=v.getState("emphasis").style;Pt.lineWidth=+v.style.lineWidth+1}ie(v).seriesIndex=r.seriesIndex,tu(v,Z,q,et);var Rt=x6(r.get("smooth")),wt=r.get("smoothMonotone");if(v.setShape({smooth:Rt,smoothMonotone:wt,connectNulls:A}),g){var St=l.getCalculationInfo("stackedOnSeries"),Ht=0;g.useStyle(te(c.getAreaStyle(),{fill:B,opacity:.7,lineJoin:"bevel",decal:l.getVisual("style").decal})),St&&(Ht=x6(St.get("smooth"))),g.setShape({smooth:Rt,stackedOnSmooth:Ht,smoothMonotone:wt,connectNulls:A}),Jd(g,r,"areaStyle"),ie(g).seriesIndex=r.seriesIndex,tu(g,Z,q,et)}var Y=function(it){o._changePolyState(it)};l.eachItemGraphicEl(function(it){it&&(it.onHoverStateChange=Y)}),this._polyline.onHoverStateChange=Y,this._data=l,this._coordSys=a,this._stackedOnPoints=S,this._points=f,this._step=M,this._valueOrigin=w,r.get("triggerLineEvent")&&(this.packEventData(r,v),g&&this.packEventData(r,g))},t.prototype.packEventData=function(r,n){ie(n).eventData={componentType:"series",componentSubType:"line",componentIndex:r.componentIndex,seriesIndex:r.seriesIndex,seriesName:r.name,seriesType:"line"}},t.prototype.highlight=function(r,n,i,o){var a=r.getData(),s=Jl(a,o);if(this._changePolyState("emphasis"),!(s instanceof Array)&&s!=null&&s>=0){var l=a.getLayout("points"),u=a.getItemGraphicEl(s);if(!u){var c=l[s*2],f=l[s*2+1];if(isNaN(c)||isNaN(f)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(c,f))return;var h=r.get("zlevel")||0,d=r.get("z")||0;u=new __(a,s),u.x=c,u.y=f,u.setZ(h,d);var p=u.getSymbolPath().getTextContent();p&&(p.zlevel=h,p.z=d,p.z2=this._polyline.z2+1),u.__temp=!0,a.setItemGraphicEl(s,u),u.stopSymbolAnimation(!0),this.group.add(u)}u.highlight()}else ei.prototype.highlight.call(this,r,n,i,o)},t.prototype.downplay=function(r,n,i,o){var a=r.getData(),s=Jl(a,o);if(this._changePolyState("normal"),s!=null&&s>=0){var l=a.getItemGraphicEl(s);l&&(l.__temp?(a.setItemGraphicEl(s,null),this.group.remove(l)):l.downplay())}else ei.prototype.downplay.call(this,r,n,i,o)},t.prototype._changePolyState=function(r){var n=this._polygon;jS(this._polyline,r),n&&jS(n,r)},t.prototype._newPolyline=function(r){var n=this._polyline;return n&&this._lineGroup.remove(n),n=new mot({shape:{points:r},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(n),this._polyline=n,n},t.prototype._newPolygon=function(r,n){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new yot({shape:{points:r,stackedOnPoints:n},segmentIgnoreThreshold:2}),this._lineGroup.add(i),this._polygon=i,i},t.prototype._initSymbolLabelAnimation=function(r,n,i){var o,a,s=n.getBaseAxis(),l=s.inverse;n.type==="cartesian2d"?(o=s.isHorizontal(),a=!1):n.type==="polar"&&(o=s.dim==="angle",a=!0);var u=r.hostModel,c=u.get("animationDuration");Ut(c)&&(c=c(null));var f=u.get("animationDelay")||0,h=Ut(f)?f(null):f;r.eachItemGraphicEl(function(d,p){var v=d;if(v){var g=[d.x,d.y],m=void 0,_=void 0,y=void 0;if(i)if(a){var w=i,T=n.pointToCoord(g);o?(m=w.startAngle,_=w.endAngle,y=-T[1]/180*Math.PI):(m=w.r0,_=w.r,y=T[0])}else{var S=i;o?(m=S.x,_=S.x+S.width,y=d.x):(m=S.y+S.height,_=S.y,y=d.y)}var P=_===m?0:(y-m)/(_-m);l&&(P=1-P);var A=Ut(f)?f(p):c*P+h,k=v.getSymbolPath(),C=k.getTextContent();v.attr({scaleX:0,scaleY:0}),v.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:A}),C&&C.animateFrom({style:{opacity:0}},{duration:300,delay:A}),k.disableLabelAnimation=!0}})},t.prototype._initOrUpdateEndLabel=function(r,n,i){var o=r.getModel("endLabel");if(kB(r)){var a=r.getData(),s=this._polyline,l=a.getLayout("points");if(!l){s.removeTextContent(),this._endLabel=null;return}var u=this._endLabel;u||(u=this._endLabel=new Je({z2:200}),u.ignoreClip=!0,s.setTextContent(this._endLabel),s.disableLabelAnimation=!0);var c=kot(l);c>=0&&(gf(s,pu(r,"endLabel"),{inheritColor:i,labelFetcher:r,labelDataIndex:c,defaultText:function(f,h,d){return d!=null?_B(a,d):l0(a,f)},enableTextSetter:!0},Cot(o,n)),s.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(r,n,i,o,a,s,l){var u=this._endLabel,c=this._polyline;if(u){r<1&&o.originalX==null&&(o.originalX=u.x,o.originalY=u.y);var f=i.getLayout("points"),h=i.hostModel,d=h.get("connectNulls"),p=s.get("precision"),v=s.get("distance")||0,g=l.getBaseAxis(),m=g.isHorizontal(),_=g.inverse,y=n.shape,w=_?m?y.x:y.y+y.height:m?y.x+y.width:y.y,T=(m?v:0)*(_?-1:1),S=(m?0:-v)*(_?-1:1),P=m?"x":"y",A=Aot(f,w,P),k=A.range,C=k[1]-k[0],M=void 0;if(C>=1){if(C>1&&!d){var D=L6(f,k[0]);u.attr({x:D[0]+T,y:D[1]+S}),a&&(M=h.getRawValue(k[0]))}else{var D=c.getPointOn(w,P);D&&u.attr({x:D[0]+T,y:D[1]+S});var B=h.getRawValue(k[0]),V=h.getRawValue(k[1]);a&&(M=ZK(i,p,B,V,A.t))}o.lastFrameIndex=k[0]}else{var N=r===1||o.lastFrameIndex>0?k[0]:0,D=L6(f,N);a&&(M=h.getRawValue(N)),u.attr({x:D[0]+T,y:D[1]+S})}a&&t_(u).setLabelText(M)}},t.prototype._doUpdateAnimation=function(r,n,i,o,a,s,l){var u=this._polyline,c=this._polygon,f=r.hostModel,h=got(this._data,r,this._stackedOnPoints,n,this._coordSys,i,this._valueOrigin),d=h.current,p=h.stackedOnCurrent,v=h.next,g=h.stackedOnNext;if(a&&(d=Ga(h.current,i,a,l),p=Ga(h.stackedOnCurrent,i,a,l),v=Ga(h.next,i,a,l),g=Ga(h.stackedOnNext,i,a,l)),M6(d,v)>3e3||c&&M6(p,g)>3e3){u.stopAnimation(),u.setShape({points:v}),c&&(c.stopAnimation(),c.setShape({points:v,stackedOnPoints:g}));return}u.shape.__points=h.current,u.shape.points=d;var m={shape:{points:v}};h.current!==d&&(m.shape.__points=h.next),u.stopAnimation(),dr(u,m,f),c&&(c.setShape({points:d,stackedOnPoints:p}),c.stopAnimation(),dr(c,{shape:{stackedOnPoints:g}},f),u.shape.points!==c.shape.points&&(c.shape.points=u.shape.points));for(var _=[],y=h.status,w=0;w<y.length;w++){var T=y[w].cmd;if(T==="="){var S=r.getItemGraphicEl(y[w].idx1);S&&_.push({el:S,ptIdx:w})}}u.animators&&u.animators.length&&u.animators[0].during(function(){c&&c.dirtyShape();for(var P=u.shape.__points,A=0;A<_.length;A++){var k=_[A].el,C=_[A].ptIdx*2;k.x=P[C],k.y=P[C+1],k.markRedraw()}})},t.prototype.remove=function(r){var n=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl(function(o,a){o.__temp&&(n.remove(o),i.setItemGraphicEl(a,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t}(ei);const xot=Mot;function AE(e,t){return{seriesType:e,plan:pE(),reset:function(r){var n=r.getData(),i=r.coordinateSystem,o=r.pipelineContext,a=t||o.large;if(!!i){var s=Ct(i.dimensions,function(d){return n.mapDimension(d)}).slice(0,2),l=s.length,u=n.getCalculationInfo("stackResultDimension");nu(n,s[0])&&(s[0]=u),nu(n,s[1])&&(s[1]=u);var c=n.getStore(),f=n.getDimensionIndex(s[0]),h=n.getDimensionIndex(s[1]);return l&&{progress:function(d,p){for(var v=d.end-d.start,g=a&&sa(v*l),m=[],_=[],y=d.start,w=0;y<d.end;y++){var T=void 0;if(l===1){var S=c.get(f,y);T=i.dataToPoint(S,null,_)}else m[0]=c.get(f,y),m[1]=c.get(h,y),T=i.dataToPoint(m,null,_);a?(g[w++]=T[0],g[w++]=T[1]):p.setItemLayout(y,T.slice())}a&&p.setLayout("points",g)}}}}}}var Lot={average:function(e){for(var t=0,r=0,n=0;n<e.length;n++)isNaN(e[n])||(t+=e[n],r++);return r===0?NaN:t/r},sum:function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r]||0;return t},max:function(e){for(var t=-1/0,r=0;r<e.length;r++)e[r]>t&&(t=e[r]);return isFinite(t)?t:NaN},min:function(e){for(var t=1/0,r=0;r<e.length;r++)e[r]<t&&(t=e[r]);return isFinite(t)?t:NaN},nearest:function(e){return e[0]}},Iot=function(e){return Math.round(e.length/2)};function AB(e){return{seriesType:e,reset:function(t,r,n){var i=t.getData(),o=t.get("sampling"),a=t.coordinateSystem,s=i.count();if(s>10&&a.type==="cartesian2d"&&o){var l=a.getBaseAxis(),u=a.getOtherAxis(l),c=l.getExtent(),f=n.getDevicePixelRatio(),h=Math.abs(c[1]-c[0])*(f||1),d=Math.round(s/h);if(isFinite(d)&&d>1){o==="lttb"&&t.setData(i.lttbDownSample(i.mapDimension(u.dim),1/d));var p=void 0;Et(o)?p=Lot[o]:Ut(o)&&(p=o),p&&t.setData(i.downSample(i.mapDimension(u.dim),1/d,p,Iot))}}}}}function B0(e){e.registerChartView(xot),e.registerSeriesModel(cot),e.registerLayout(AE("line",!0)),e.registerVisual({seriesType:"line",reset:function(t){var r=t.getData(),n=t.getModel("lineStyle").getLineStyle();n&&!n.stroke&&(n.stroke=r.getVisual("style").fill),r.setVisual("legendLineStyle",n)}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,AB("line"))}var CB=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(r,n){return D0(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(r){var n=this.coordinateSystem;if(n&&n.clampData){var i=n.dataToPoint(n.clampData(r)),o=this.getData(),a=o.getLayout("offset"),s=o.getLayout("size"),l=n.getBaseAxis().isHorizontal()?0:1;return i[l]+=a+s/2,i}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(Lo);Lo.registerClass(CB);const I6=CB;var Oot=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(){return D0(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},t.prototype.getProgressiveThreshold=function(){var r=this.get("progressiveThreshold"),n=this.get("largeThreshold");return n>r&&(r=n),r},t.prototype.brushSelector=function(r,n,i){return i.rect(n.getItemLayout(r))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=r_(I6.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(I6);const Rot=Oot;var Dot=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),Not=function(e){_t(t,e);function t(r){var n=e.call(this,r)||this;return n.type="sausage",n}return t.prototype.getDefaultShape=function(){return new Dot},t.prototype.buildPath=function(r,n){var i=n.cx,o=n.cy,a=Math.max(n.r0||0,0),s=Math.max(n.r,0),l=(s-a)*.5,u=a+l,c=n.startAngle,f=n.endAngle,h=n.clockwise,d=Math.PI*2,p=h?f-c<d:c-f<d;p||(c=f-(h?d:-d));var v=Math.cos(c),g=Math.sin(c),m=Math.cos(f),_=Math.sin(f);p?(r.moveTo(v*a+i,g*a+o),r.arc(v*u+i,g*u+o,l,-Math.PI+c,c,!h)):r.moveTo(v*s+i,g*s+o),r.arc(i,o,s,c,f,!h),r.arc(m*u+i,_*u+o,l,f-Math.PI*2,f-Math.PI,!h),a!==0&&r.arc(i,o,a,f,c,h)},t}(fe);const O6=Not;function Fot(e,t){t=t||{};var r=t.isRoundCap;return function(n,i,o){var a=i.position;if(!a||a instanceof Array)return Im(n,i,o);var s=e(a),l=i.distance!=null?i.distance:5,u=this.shape,c=u.cx,f=u.cy,h=u.r,d=u.r0,p=(h+d)/2,v=u.startAngle,g=u.endAngle,m=(v+g)/2,_=r?Math.abs(h-d)/2:0,y=Math.cos,w=Math.sin,T=c+h*y(v),S=f+h*w(v),P="left",A="top";switch(s){case"startArc":T=c+(d-l)*y(m),S=f+(d-l)*w(m),P="center",A="top";break;case"insideStartArc":T=c+(d+l)*y(m),S=f+(d+l)*w(m),P="center",A="bottom";break;case"startAngle":T=c+p*y(v)+nv(v,l+_,!1),S=f+p*w(v)+iv(v,l+_,!1),P="right",A="middle";break;case"insideStartAngle":T=c+p*y(v)+nv(v,-l+_,!1),S=f+p*w(v)+iv(v,-l+_,!1),P="left",A="middle";break;case"middle":T=c+p*y(m),S=f+p*w(m),P="center",A="middle";break;case"endArc":T=c+(h+l)*y(m),S=f+(h+l)*w(m),P="center",A="bottom";break;case"insideEndArc":T=c+(h-l)*y(m),S=f+(h-l)*w(m),P="center",A="top";break;case"endAngle":T=c+p*y(g)+nv(g,l+_,!0),S=f+p*w(g)+iv(g,l+_,!0),P="left",A="middle";break;case"insideEndAngle":T=c+p*y(g)+nv(g,-l+_,!0),S=f+p*w(g)+iv(g,-l+_,!0),P="right",A="middle";break;default:return Im(n,i,o)}return n=n||{},n.x=T,n.y=S,n.align=P,n.verticalAlign=A,n}}function Bot(e,t,r,n){if(we(n)){e.setTextConfig({rotation:n});return}else if(ct(t)){e.setTextConfig({rotation:0});return}var i=e.shape,o=i.clockwise?i.startAngle:i.endAngle,a=i.clockwise?i.endAngle:i.startAngle,s=(o+a)/2,l,u=r(t);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=s;break;case"startAngle":case"insideStartAngle":l=o;break;case"endAngle":case"insideEndAngle":l=a;break;default:e.setTextConfig({rotation:0});return}var c=Math.PI*1.5-l;u==="middle"&&c>Math.PI/2&&c<Math.PI*1.5&&(c-=Math.PI),e.setTextConfig({rotation:c})}function nv(e,t,r){return t*Math.sin(e)*(r?-1:1)}function iv(e,t,r){return t*Math.cos(e)*(r?1:-1)}var x2=Math.max,L2=Math.min;function $ot(e,t){var r=e.getArea&&e.getArea();if(bf(e,"cartesian2d")){var n=e.getBaseAxis();if(n.type!=="category"||!n.onBand){var i=t.getLayout("bandWidth");n.isHorizontal()?(r.x-=i,r.width+=i*2):(r.y-=i,r.height+=i*2)}}return r}var zot=function(e){_t(t,e);function t(){var r=e.call(this)||this;return r.type=t.type,r._isFirstFrame=!0,r}return t.prototype.render=function(r,n,i,o){this._model=r,this._removeOnRenderedListener(i),this._updateDrawMode(r);var a=r.get("coordinateSystem");(a==="cartesian2d"||a==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(r,n,i):this._renderNormal(r,n,i,o))},t.prototype.incrementalPrepareRender=function(r){this._clear(),this._updateDrawMode(r),this._updateLargeClip(r)},t.prototype.incrementalRender=function(r,n){this._progressiveEls=[],this._incrementalRenderLarge(r,n)},t.prototype.eachRendered=function(r){vf(this._progressiveEls||this.group,r)},t.prototype._updateDrawMode=function(r){var n=r.pipelineContext.large;(this._isLargeDraw==null||n!==this._isLargeDraw)&&(this._isLargeDraw=n,this._clear())},t.prototype._renderNormal=function(r,n,i,o){var a=this.group,s=r.getData(),l=this._data,u=r.coordinateSystem,c=u.getBaseAxis(),f;u.type==="cartesian2d"?f=c.isHorizontal():u.type==="polar"&&(f=c.dim==="angle");var h=r.isAnimationEnabled()?r:null,d=Vot(r,u);d&&this._enableRealtimeSort(d,s,i);var p=r.get("clip",!0)||d,v=$ot(u,s);a.removeClipPath();var g=r.get("roundCap",!0),m=r.get("showBackground",!0),_=r.getModel("backgroundStyle"),y=_.get("borderRadius")||0,w=[],T=this._backgroundEls,S=o&&o.isInitSort,P=o&&o.type==="changeAxisOrder";function A(M){var D=ov[u.type](s,M),B=Yot(u,f,D);return B.useStyle(_.getItemStyle()),u.type==="cartesian2d"&&B.setShape("r",y),w[M]=B,B}s.diff(l).add(function(M){var D=s.getItemModel(M),B=ov[u.type](s,M,D);if(m&&A(M),!(!s.hasValue(M)||!B6[u.type](B))){var V=!1;p&&(V=R6[u.type](v,B));var N=D6[u.type](r,s,M,B,f,h,c.model,!1,g);d&&(N.forceLabelAnimation=!0),$6(N,s,M,D,B,r,f,u.type==="polar"),S?N.attr({shape:B}):d?N6(d,h,N,B,M,f,!1,!1):xo(N,{shape:B},r,M),s.setItemGraphicEl(M,N),a.add(N),N.ignore=V}}).update(function(M,D){var B=s.getItemModel(M),V=ov[u.type](s,M,B);if(m){var N=void 0;T.length===0?N=A(D):(N=T[D],N.useStyle(_.getItemStyle()),u.type==="cartesian2d"&&N.setShape("r",y),w[M]=N);var j=ov[u.type](s,M),Z=xB(f,j,u);dr(N,{shape:Z},h,M)}var q=l.getItemGraphicEl(D);if(!s.hasValue(M)||!B6[u.type](V)){a.remove(q);return}var et=!1;if(p&&(et=R6[u.type](v,V),et&&a.remove(q)),q?lN(q):q=D6[u.type](r,s,M,V,f,h,c.model,!!q,g),d&&(q.forceLabelAnimation=!0),P){var Pt=q.getTextContent();if(Pt){var Rt=t_(Pt);Rt.prevValue!=null&&(Rt.prevValue=Rt.value)}}else $6(q,s,M,B,V,r,f,u.type==="polar");S?q.attr({shape:V}):d?N6(d,h,q,V,M,f,!0,P):dr(q,{shape:V},r,M,null),s.setItemGraphicEl(M,q),q.ignore=et,a.add(q)}).remove(function(M){var D=l.getItemGraphicEl(M);D&&KS(D,r,M)}).execute();var k=this._backgroundGroup||(this._backgroundGroup=new De);k.removeAll();for(var C=0;C<w.length;++C)k.add(w[C]);a.add(k),this._backgroundEls=w,this._data=s},t.prototype._renderLarge=function(r,n,i){this._clear(),V6(r,this.group),this._updateLargeClip(r)},t.prototype._incrementalRenderLarge=function(r,n){this._removeBackground(),V6(n,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(r){var n=r.get("clip",!0)&&EB(r.coordinateSystem,!1,r),i=this.group;n?i.setClipPath(n):i.removeClipPath()},t.prototype._enableRealtimeSort=function(r,n,i){var o=this;if(!!n.count()){var a=r.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(n,r,i),this._isFirstFrame=!1;else{var s=function(l){var u=n.getItemGraphicEl(l),c=u&&u.shape;return c&&Math.abs(a.isHorizontal()?c.height:c.width)||0};this._onRendered=function(){o._updateSortWithinSameData(n,s,a,i)},i.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(r,n,i){var o=[];return r.each(r.mapDimension(n.dim),function(a,s){var l=i(s);l=l==null?NaN:l,o.push({dataIndex:s,mappedValue:l,ordinalNumber:a})}),o.sort(function(a,s){return s.mappedValue-a.mappedValue}),{ordinalNumbers:Ct(o,function(a){return a.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(r,n,i){for(var o=i.scale,a=r.mapDimension(i.dim),s=Number.MAX_VALUE,l=0,u=o.getOrdinalMeta().categories.length;l<u;++l){var c=r.rawIndexOf(a,o.getRawOrdinalNumber(l)),f=c<0?Number.MIN_VALUE:n(r.indexOfRawIndex(c));if(f>s)return!0;s=f}return!1},t.prototype._isOrderDifferentInView=function(r,n){for(var i=n.scale,o=i.getExtent(),a=Math.max(0,o[0]),s=Math.min(o[1],i.getOrdinalMeta().categories.length-1);a<=s;++a)if(r.ordinalNumbers[a]!==i.getRawOrdinalNumber(a))return!0},t.prototype._updateSortWithinSameData=function(r,n,i,o){if(!!this._isOrderChangedWithinSameData(r,n,i)){var a=this._dataSort(r,i,n);this._isOrderDifferentInView(a,i)&&(this._removeOnRenderedListener(o),o.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",axisId:i.index,sortInfo:a}))}},t.prototype._dispatchInitSort=function(r,n,i){var o=n.baseAxis,a=this._dataSort(r,o,function(s){return r.get(r.mapDimension(n.otherAxis.dim),s)});i.dispatchAction({type:"changeAxisOrder",componentType:o.dim+"Axis",isInitSort:!0,axisId:o.index,sortInfo:a})},t.prototype.remove=function(r,n){this._clear(this._model),this._removeOnRenderedListener(n)},t.prototype.dispose=function(r,n){this._removeOnRenderedListener(n)},t.prototype._removeOnRenderedListener=function(r){this._onRendered&&(r.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(r){var n=this.group,i=this._data;r&&r.isAnimationEnabled()&&i&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],i.eachItemGraphicEl(function(o){KS(o,r,ie(o).dataIndex)})):n.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(ei),R6={cartesian2d:function(e,t){var r=t.width<0?-1:1,n=t.height<0?-1:1;r<0&&(t.x+=t.width,t.width=-t.width),n<0&&(t.y+=t.height,t.height=-t.height);var i=e.x+e.width,o=e.y+e.height,a=x2(t.x,e.x),s=L2(t.x+t.width,i),l=x2(t.y,e.y),u=L2(t.y+t.height,o),c=s<a,f=u<l;return t.x=c&&a>i?s:a,t.y=f&&l>o?u:l,t.width=c?0:s-a,t.height=f?0:u-l,r<0&&(t.x+=t.width,t.width=-t.width),n<0&&(t.y+=t.height,t.height=-t.height),c||f},polar:function(e,t){var r=t.r0<=t.r?1:-1;if(r<0){var n=t.r;t.r=t.r0,t.r0=n}var i=L2(t.r,e.r),o=x2(t.r0,e.r0);t.r=i,t.r0=o;var a=i-o<0;if(r<0){var n=t.r;t.r=t.r0,t.r0=n}return a}},D6={cartesian2d:function(e,t,r,n,i,o,a,s,l){var u=new Ke({shape:at({},n),z2:1});if(u.__dataIndex=r,u.name="item",o){var c=u.shape,f=i?"height":"width";c[f]=0}return u},polar:function(e,t,r,n,i,o,a,s,l){var u=!i&&l?O6:O0,c=new u({shape:n,z2:1});c.name="item";var f=MB(i);if(c.calculateTextPosition=Fot(f,{isRoundCap:u===O6}),o){var h=c.shape,d=i?"r":"endAngle",p={};h[d]=i?0:n.startAngle,p[d]=n[d],(s?dr:xo)(c,{shape:p},o)}return c}};function Vot(e,t){var r=e.get("realtimeSort",!0),n=t.getBaseAxis();if(r&&n.type==="category"&&t.type==="cartesian2d")return{baseAxis:n,otherAxis:t.getOtherAxis(n)}}function N6(e,t,r,n,i,o,a,s){var l,u;o?(u={x:n.x,width:n.width},l={y:n.y,height:n.height}):(u={y:n.y,height:n.height},l={x:n.x,width:n.width}),s||(a?dr:xo)(r,{shape:l},t,i,null);var c=t?e.baseAxis.model:null;(a?dr:xo)(r,{shape:u},c,i)}function F6(e,t){for(var r=0;r<t.length;r++)if(!isFinite(e[t[r]]))return!0;return!1}var Uot=["x","y","width","height"],Got=["cx","cy","r","startAngle","endAngle"],B6={cartesian2d:function(e){return!F6(e,Uot)},polar:function(e){return!F6(e,Got)}},ov={cartesian2d:function(e,t,r){var n=e.getItemLayout(t),i=r?Wot(r,n):0,o=n.width>0?1:-1,a=n.height>0?1:-1;return{x:n.x+o*i/2,y:n.y+a*i/2,width:n.width-o*i,height:n.height-a*i}},polar:function(e,t,r){var n=e.getItemLayout(t);return{cx:n.cx,cy:n.cy,r0:n.r0,r:n.r,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}}};function jot(e){return e.startAngle!=null&&e.endAngle!=null&&e.startAngle===e.endAngle}function MB(e){return function(t){var r=t?"Arc":"Angle";return function(n){switch(n){case"start":case"insideStart":case"end":case"insideEnd":return n+r;default:return n}}}(e)}function $6(e,t,r,n,i,o,a,s){var l=t.getItemVisual(r,"style");s||e.setShape("r",n.get(["itemStyle","borderRadius"])||0),e.useStyle(l);var u=n.getShallow("cursor");u&&e.attr("cursor",u);var c=s?a?i.r>=i.r0?"endArc":"startArc":i.endAngle>=i.startAngle?"endAngle":"startAngle":a?i.height>=0?"bottom":"top":i.width>=0?"right":"left",f=pu(n);gf(e,f,{labelFetcher:o,labelDataIndex:r,defaultText:l0(o.getData(),r),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:c});var h=e.getTextContent();if(s&&h){var d=n.get(["label","position"]);e.textConfig.inside=d==="middle"?!0:null,Bot(e,d==="outside"?c:d,MB(a),n.get(["label","rotate"]))}ptt(h,f,o.getRawValue(r),function(v){return _B(t,v)});var p=n.getModel(["emphasis"]);tu(e,p.get("focus"),p.get("blurScope"),p.get("disabled")),Jd(e,n),jot(i)&&(e.style.fill="none",e.style.stroke="none",F(e.states,function(v){v.style&&(v.style.fill=v.style.stroke="none")}))}function Wot(e,t){var r=e.get(["itemStyle","borderColor"]);if(!r||r==="none")return 0;var n=e.get(["itemStyle","borderWidth"])||0,i=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),o=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(n,i,o)}var Hot=function(){function e(){}return e}(),z6=function(e){_t(t,e);function t(r){var n=e.call(this,r)||this;return n.type="largeBar",n}return t.prototype.getDefaultShape=function(){return new Hot},t.prototype.buildPath=function(r,n){for(var i=n.points,o=this.baseDimIdx,a=1-this.baseDimIdx,s=[],l=[],u=this.barWidth,c=0;c<i.length;c+=3)l[o]=u,l[a]=i[c+2],s[o]=i[c+o],s[a]=i[c+a],r.rect(s[0],s[1],l[0],l[1])},t}(fe);function V6(e,t,r,n){var i=e.getData(),o=i.getLayout("valueAxisHorizontal")?1:0,a=i.getLayout("largeDataIndices"),s=i.getLayout("size"),l=e.getModel("backgroundStyle"),u=i.getLayout("largeBackgroundPoints");if(u){var c=new z6({shape:{points:u},incremental:!!n,silent:!0,z2:0});c.baseDimIdx=o,c.largeDataIndices=a,c.barWidth=s,c.useStyle(l.getItemStyle()),t.add(c),r&&r.push(c)}var f=new z6({shape:{points:i.getLayout("largePoints")},incremental:!!n,ignoreCoarsePointer:!0,z2:1});f.baseDimIdx=o,f.largeDataIndices=a,f.barWidth=s,t.add(f),f.useStyle(i.getVisual("style")),ie(f).seriesIndex=e.seriesIndex,e.get("silent")||(f.on("mousedown",U6),f.on("mousemove",U6)),r&&r.push(f)}var U6=h_(function(e){var t=this,r=Xot(t,e.offsetX,e.offsetY);ie(t).dataIndex=r>=0?r:null},30,!1);function Xot(e,t,r){for(var n=e.baseDimIdx,i=1-n,o=e.shape.points,a=e.largeDataIndices,s=[],l=[],u=e.barWidth,c=0,f=o.length/3;c<f;c++){var h=c*3;if(l[n]=u,l[i]=o[h+2],s[n]=o[h+n],s[i]=o[h+i],l[i]<0&&(s[i]+=l[i],l[i]=-l[i]),t>=s[0]&&t<=s[0]+l[0]&&r>=s[1]&&r<=s[1]+l[1])return a[c]}return-1}function xB(e,t,r){if(bf(r,"cartesian2d")){var n=t,i=r.getArea();return{x:e?n.x:i.x,y:e?i.y:n.y,width:e?n.width:i.width,height:e?i.height:n.height}}else{var i=r.getArea(),o=t;return{cx:i.cx,cy:i.cy,r0:e?i.r0:o.r0,r:e?i.r:o.r,startAngle:e?o.startAngle:0,endAngle:e?o.endAngle:Math.PI*2}}}function Yot(e,t,r){var n=e.type==="polar"?O0:Ke;return new n({shape:xB(t,r,e),silent:!0,z2:0})}const qot=zot;function y_(e){e.registerChartView(qot),e.registerSeriesModel(Rot),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,be(git,"bar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,mit("bar")),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,AB("bar")),e.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,r){var n=t.componentType||"series";r.eachComponent({mainType:n,query:t},function(i){t.sortInfo&&i.axis.setCategorySortInfo(t.sortInfo)})})}var Zot=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r,n){return D0(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var r=this.option.progressive;return r==null?this.option.large?5e3:this.get("progressive"):r},t.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r==null?this.option.large?1e4:this.get("progressiveThreshold"):r},t.prototype.brushSelector=function(r,n,i){return i.point(n.getItemLayout(r))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(Lo);const Kot=Zot;var LB=4,Jot=function(){function e(){}return e}(),Qot=function(e){_t(t,e);function t(r){var n=e.call(this,r)||this;return n._off=0,n.hoverDataIdx=-1,n}return t.prototype.getDefaultShape=function(){return new Jot},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(r,n){var i=n.points,o=n.size,a=this.symbolProxy,s=a.shape,l=r.getContext?r.getContext():r,u=l&&o[0]<LB,c=this.softClipShape,f;if(u){this._ctx=l;return}for(this._ctx=null,f=this._off;f<i.length;){var h=i[f++],d=i[f++];isNaN(h)||isNaN(d)||c&&!c.contain(h,d)||(s.x=h-o[0]/2,s.y=d-o[1]/2,s.width=o[0],s.height=o[1],a.buildPath(r,s,!0))}this.incremental&&(this._off=f,this.notClear=!0)},t.prototype.afterBrush=function(){var r=this.shape,n=r.points,i=r.size,o=this._ctx,a=this.softClipShape,s;if(!!o){for(s=this._off;s<n.length;){var l=n[s++],u=n[s++];isNaN(l)||isNaN(u)||a&&!a.contain(l,u)||o.fillRect(l-i[0]/2,u-i[1]/2,i[0],i[1])}this.incremental&&(this._off=s,this.notClear=!0)}},t.prototype.findDataIndex=function(r,n){for(var i=this.shape,o=i.points,a=i.size,s=Math.max(a[0],4),l=Math.max(a[1],4),u=o.length/2-1;u>=0;u--){var c=u*2,f=o[c]-s/2,h=o[c+1]-l/2;if(r>=f&&n>=h&&r<=f+s&&n<=h+l)return u}return-1},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect();if(r=i[0],n=i[1],o.contain(r,n)){var a=this.hoverDataIdx=this.findDataIndex(r,n);return a>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var n=this.shape,i=n.points,o=n.size,a=o[0],s=o[1],l=1/0,u=1/0,c=-1/0,f=-1/0,h=0;h<i.length;){var d=i[h++],p=i[h++];l=Math.min(d,l),c=Math.max(d,c),u=Math.min(p,u),f=Math.max(p,f)}r=this._rect=new ae(l-a/2,u-s/2,c-l+a,f-u+s)}return r},t}(fe),tat=function(){function e(){this.group=new De}return e.prototype.updateData=function(t,r){this._clear();var n=this._create();n.setShape({points:t.getLayout("points")}),this._setCommon(n,t,r)},e.prototype.updateLayout=function(t){var r=t.getLayout("points");this.group.eachChild(function(n){if(n.startIndex!=null){var i=(n.endIndex-n.startIndex)*2,o=n.startIndex*4*2;r=new Float32Array(r.buffer,o,i)}n.setShape("points",r),n.reset()})},e.prototype.incrementalPrepareUpdate=function(t){this._clear()},e.prototype.incrementalUpdate=function(t,r,n){var i=this._newAdded[0],o=r.getLayout("points"),a=i&&i.shape.points;if(a&&a.length<2e4){var s=a.length,l=new Float32Array(s+o.length);l.set(a),l.set(o,s),i.endIndex=t.end,i.setShape({points:l})}else{this._newAdded=[];var u=this._create();u.startIndex=t.start,u.endIndex=t.end,u.incremental=!0,u.setShape({points:o}),this._setCommon(u,r,n)}},e.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},e.prototype._create=function(){var t=new Qot({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},e.prototype._setCommon=function(t,r,n){var i=r.hostModel;n=n||{};var o=r.getVisual("symbolSize");t.setShape("size",o instanceof Array?o:[o,o]),t.softClipShape=n.clipShape||null,t.symbolProxy=Bi(r.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var a=t.shape.size[0]<LB;t.useStyle(i.getModel("itemStyle").getItemStyle(a?["color","shadowBlur","shadowColor"]:["color"]));var s=r.getVisual("style"),l=s&&s.fill;l&&t.setColor(l);var u=ie(t);u.seriesIndex=i.seriesIndex,t.on("mousemove",function(c){u.dataIndex=null;var f=t.hoverDataIdx;f>=0&&(u.dataIndex=f+(t.startIndex||0))})},e.prototype.remove=function(){this._clear()},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}();const eat=tat;var rat=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){var o=r.getData(),a=this._updateSymbolDraw(o,r);a.updateData(o,{clipShape:this._getClipShape(r)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(r,n,i){var o=r.getData(),a=this._updateSymbolDraw(o,r);a.incrementalPrepareUpdate(o),this._finished=!1},t.prototype.incrementalRender=function(r,n,i){this._symbolDraw.incrementalUpdate(r,n.getData(),{clipShape:this._getClipShape(n)}),this._finished=r.end===n.getData().count()},t.prototype.updateTransform=function(r,n,i){var o=r.getData();if(this.group.dirty(),!this._finished||o.count()>1e4)return{update:!0};var a=AE("").reset(r,n,i);a.progress&&a.progress({start:0,end:o.count(),count:o.count()},o),this._symbolDraw.updateLayout(o)},t.prototype.eachRendered=function(r){this._symbolDraw&&this._symbolDraw.eachRendered(r)},t.prototype._getClipShape=function(r){var n=r.coordinateSystem,i=n&&n.getArea&&n.getArea();return r.get("clip",!0)?i:null},t.prototype._updateSymbolDraw=function(r,n){var i=this._symbolDraw,o=n.pipelineContext,a=o.large;return(!i||a!==this._isLargeDraw)&&(i&&i.remove(),i=this._symbolDraw=a?new eat:new yB,this._isLargeDraw=a,this.group.removeAll()),this.group.add(i.group),i},t.prototype.remove=function(r,n){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(ei);const nat=rat;var iat=function(e){_t(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t}(Ce);const oat=iat;var m3=function(e){_t(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",ki).models[0]},t.type="cartesian2dAxis",t}(Ce);Ui(m3,Uit);var IB={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},aat=oe({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},IB),CE=oe({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},IB),sat=oe({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},CE),lat=te({logBase:10},CE);const uat={category:aat,value:CE,time:sat,log:lat};var cat={value:1,category:1,time:1,log:1};function G6(e,t,r,n){F(cat,function(i,o){var a=oe(oe({},uat[o],!0),n,!0),s=function(l){_t(u,l);function u(){var c=l!==null&&l.apply(this,arguments)||this;return c.type=t+"Axis."+o,c}return u.prototype.mergeDefaultAndTheme=function(c,f){var h=n0(this),d=h?l_(c):{},p=f.getTheme();oe(c,p.get(o+"Axis")),oe(c,this.getDefaultOption()),c.type=j6(c),h&&Zc(c,d,h)},u.prototype.optionUpdated=function(){var c=this.option;c.type==="category"&&(this.__ordinalMeta=d3.createByAxisModel(this))},u.prototype.getCategories=function(c){var f=this.option;if(f.type==="category")return c?f.data:this.__ordinalMeta.categories},u.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},u.type=t+"Axis."+o,u.defaultOption=a,u}(r);e.registerComponentModel(s)}),e.registerSubTypeDefaulter(t+"Axis",j6)}function j6(e){return e.type||(e.data?"category":"value")}var fat=function(){function e(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return e.prototype.getAxis=function(t){return this._axes[t]},e.prototype.getAxes=function(){return Ct(this._dimList,function(t){return this._axes[t]},this)},e.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),wr(this.getAxes(),function(r){return r.scale.type===t})},e.prototype.addAxis=function(t){var r=t.dim;this._axes[r]=t,this._dimList.push(r)},e}();const hat=fat;var _3=["x","y"];function W6(e){return e.type==="interval"||e.type==="time"}var dat=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="cartesian2d",r.dimensions=_3,r}return t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var r=this.getAxis("x").scale,n=this.getAxis("y").scale;if(!(!W6(r)||!W6(n))){var i=r.getExtent(),o=n.getExtent(),a=this.dataToPoint([i[0],o[0]]),s=this.dataToPoint([i[1],o[1]]),l=i[1]-i[0],u=o[1]-o[0];if(!(!l||!u)){var c=(s[0]-a[0])/l,f=(s[1]-a[1])/u,h=a[0]-i[0]*c,d=a[1]-o[0]*f,p=this._transform=[c,0,0,f,h,d];this._invTransform=W1([],p)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(r){var n=this.getAxis("x"),i=this.getAxis("y");return n.contain(n.toLocalCoord(r[0]))&&i.contain(i.toLocalCoord(r[1]))},t.prototype.containData=function(r){return this.getAxis("x").containData(r[0])&&this.getAxis("y").containData(r[1])},t.prototype.containZone=function(r,n){var i=this.dataToPoint(r),o=this.dataToPoint(n),a=this.getArea(),s=new ae(i[0],i[1],o[0]-i[0],o[1]-i[1]);return a.intersect(s)},t.prototype.dataToPoint=function(r,n,i){i=i||[];var o=r[0],a=r[1];if(this._transform&&o!=null&&isFinite(o)&&a!=null&&isFinite(a))return rn(i,r,this._transform);var s=this.getAxis("x"),l=this.getAxis("y");return i[0]=s.toGlobalCoord(s.dataToCoord(o,n)),i[1]=l.toGlobalCoord(l.dataToCoord(a,n)),i},t.prototype.clampData=function(r,n){var i=this.getAxis("x").scale,o=this.getAxis("y").scale,a=i.getExtent(),s=o.getExtent(),l=i.parse(r[0]),u=o.parse(r[1]);return n=n||[],n[0]=Math.min(Math.max(Math.min(a[0],a[1]),l),Math.max(a[0],a[1])),n[1]=Math.min(Math.max(Math.min(s[0],s[1]),u),Math.max(s[0],s[1])),n},t.prototype.pointToData=function(r,n){var i=[];if(this._invTransform)return rn(i,r,this._invTransform);var o=this.getAxis("x"),a=this.getAxis("y");return i[0]=o.coordToData(o.toLocalCoord(r[0]),n),i[1]=a.coordToData(a.toLocalCoord(r[1]),n),i},t.prototype.getOtherAxis=function(r){return this.getAxis(r.dim==="x"?"y":"x")},t.prototype.getArea=function(){var r=this.getAxis("x").getGlobalExtent(),n=this.getAxis("y").getGlobalExtent(),i=Math.min(r[0],r[1]),o=Math.min(n[0],n[1]),a=Math.max(r[0],r[1])-i,s=Math.max(n[0],n[1])-o;return new ae(i,o,a,s)},t}(hat),pat=function(e){_t(t,e);function t(r,n,i,o,a){var s=e.call(this,r,n,i)||this;return s.index=0,s.type=o||"value",s.position=a||"bottom",s}return t.prototype.isHorizontal=function(){var r=this.position;return r==="top"||r==="bottom"},t.prototype.getGlobalExtent=function(r){var n=this.getExtent();return n[0]=this.toGlobalCoord(n[0]),n[1]=this.toGlobalCoord(n[1]),r&&n[0]>n[1]&&n.reverse(),n},t.prototype.pointToData=function(r,n){return this.coordToData(this.toLocalCoord(r[this.dim==="x"?0:1]),n)},t.prototype.setCategorySortInfo=function(r){if(this.type!=="category")return!1;this.model.option.categorySortInfo=r,this.scale.setSortInfo(r)},t}(tot);const vat=pat;function y3(e,t,r){r=r||{};var n=e.coordinateSystem,i=t.axis,o={},a=i.getAxesOnZeroOf()[0],s=i.position,l=a?"onZero":s,u=i.dim,c=n.getRect(),f=[c.x,c.x+c.width,c.y,c.y+c.height],h={left:0,right:1,top:0,bottom:1,onZero:2},d=t.get("offset")||0,p=u==="x"?[f[2]-d,f[3]+d]:[f[0]-d,f[1]+d];if(a){var v=a.toGlobalCoord(a.dataToCoord(0));p[h.onZero]=Math.max(Math.min(v,p[1]),p[0])}o.position=[u==="y"?p[h[l]]:f[0],u==="x"?p[h[l]]:f[3]],o.rotation=Math.PI/2*(u==="x"?0:1);var g={top:-1,bottom:1,left:-1,right:1};o.labelDirection=o.tickDirection=o.nameDirection=g[s],o.labelOffset=a?p[h[s]]-p[h.onZero]:0,t.get(["axisTick","inside"])&&(o.tickDirection=-o.tickDirection),Ei(r.labelInside,t.get(["axisLabel","inside"]))&&(o.labelDirection=-o.labelDirection);var m=t.get(["axisLabel","rotate"]);return o.labelRotate=l==="top"?-m:m,o.z2=1,o}function H6(e){return e.get("coordinateSystem")==="cartesian2d"}function X6(e){var t={xAxisModel:null,yAxisModel:null};return F(t,function(r,n){var i=n.replace(/Model$/,""),o=e.getReferringComponents(i,ki).models[0];t[n]=o}),t}var I2=Math.log;function gat(e,t,r){var n=N0.prototype,i=n.getTicks.call(r),o=n.getTicks.call(r,!0),a=i.length-1,s=n.getInterval.call(r),l=cB(e,t),u=l.extent,c=l.fixMin,f=l.fixMax;if(e.type==="log"){var h=I2(e.base);u=[I2(u[0])/h,I2(u[1])/h]}e.setExtent(u[0],u[1]),e.calcNiceExtent({splitNumber:a,fixMin:c,fixMax:f});var d=n.getExtent.call(e);c&&(u[0]=d[0]),f&&(u[1]=d[1]);var p=n.getInterval.call(e),v=u[0],g=u[1];if(c&&f)p=(g-v)/a;else if(c)for(g=u[0]+p*a;g<u[1]&&isFinite(g)&&isFinite(u[1]);)p=k2(p),g=u[0]+p*a;else if(f)for(v=u[1]-p*a;v>u[0]&&isFinite(v)&&isFinite(u[0]);)p=k2(p),v=u[1]-p*a;else{var m=e.getTicks().length-1;m>a&&(p=k2(p));var _=p*a;g=Math.ceil(u[1]/p)*p,v=qe(g-_),v<0&&u[0]>=0?(v=0,g=qe(_)):g>0&&u[1]<=0&&(g=0,v=-qe(_))}var y=(i[0].value-o[0].value)/s,w=(i[a].value-o[a].value)/s;n.setExtent.call(e,v+p*y,g+p*w),n.setInterval.call(e,p),(y||w)&&n.setNiceExtent.call(e,v+p,g-p)}var mat=function(){function e(t,r,n){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=_3,this._initCartesian(t,r,n),this.model=t}return e.prototype.getRect=function(){return this._rect},e.prototype.update=function(t,r){var n=this._axesMap;this._updateScale(t,this.model);function i(a){var s,l=ge(a),u=l.length;if(!!u){for(var c=[],f=u-1;f>=0;f--){var h=+l[f],d=a[h],p=d.model,v=d.scale;p3(v)&&p.get("alignTicks")&&p.get("interval")==null?c.push(d):(y6(v,p),p3(v)&&(s=d))}c.length&&(s||(s=c.pop(),y6(s.scale,s.model)),F(c,function(g){gat(g.scale,g.model,s.scale)}))}}i(n.x),i(n.y);var o={};F(n.x,function(a){Y6(n,"y",a,o)}),F(n.y,function(a){Y6(n,"x",a,o)}),this.resize(this.model,r)},e.prototype.resize=function(t,r,n){var i=t.getBoxLayoutParams(),o=!n&&t.get("containLabel"),a=Ls(i,{width:r.getWidth(),height:r.getHeight()});this._rect=a;var s=this._axesList;l(),o&&(F(s,function(u){if(!u.model.get(["axisLabel","inside"])){var c=$it(u);if(c){var f=u.isHorizontal()?"height":"width",h=u.model.get(["axisLabel","margin"]);a[f]-=c[f]+h,u.position==="top"?a.y+=c.height+h:u.position==="left"&&(a.x+=c.width+h)}}}),l()),F(this._coordsList,function(u){u.calcAffineTransform()});function l(){F(s,function(u){var c=u.isHorizontal(),f=c?[0,a.width]:[0,a.height],h=u.inverse?1:0;u.setExtent(f[h],f[1-h]),_at(u,c?a.x:a.y)})}},e.prototype.getAxis=function(t,r){var n=this._axesMap[t];if(n!=null)return n[r||0]},e.prototype.getAxes=function(){return this._axesList.slice()},e.prototype.getCartesian=function(t,r){if(t!=null&&r!=null){var n="x"+t+"y"+r;return this._coordsMap[n]}Ot(t)&&(r=t.yAxisIndex,t=t.xAxisIndex);for(var i=0,o=this._coordsList;i<o.length;i++)if(o[i].getAxis("x").index===t||o[i].getAxis("y").index===r)return o[i]},e.prototype.getCartesians=function(){return this._coordsList.slice()},e.prototype.convertToPixel=function(t,r,n){var i=this._findConvertTarget(r);return i.cartesian?i.cartesian.dataToPoint(n):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(n)):null},e.prototype.convertFromPixel=function(t,r,n){var i=this._findConvertTarget(r);return i.cartesian?i.cartesian.pointToData(n):i.axis?i.axis.coordToData(i.axis.toLocalCoord(n)):null},e.prototype._findConvertTarget=function(t){var r=t.seriesModel,n=t.xAxisModel||r&&r.getReferringComponents("xAxis",ki).models[0],i=t.yAxisModel||r&&r.getReferringComponents("yAxis",ki).models[0],o=t.gridModel,a=this._coordsList,s,l;if(r)s=r.coordinateSystem,ue(a,s)<0&&(s=null);else if(n&&i)s=this.getCartesian(n.componentIndex,i.componentIndex);else if(n)l=this.getAxis("x",n.componentIndex);else if(i)l=this.getAxis("y",i.componentIndex);else if(o){var u=o.coordinateSystem;u===this&&(s=this._coordsList[0])}return{cartesian:s,axis:l}},e.prototype.containPoint=function(t){var r=this._coordsList[0];if(r)return r.containPoint(t)},e.prototype._initCartesian=function(t,r,n){var i=this,o=this,a={left:!1,right:!1,top:!1,bottom:!1},s={x:{},y:{}},l={x:0,y:0};if(r.eachComponent("xAxis",u("x"),this),r.eachComponent("yAxis",u("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=s,F(s.x,function(c,f){F(s.y,function(h,d){var p="x"+f+"y"+d,v=new dat(p);v.master=i,v.model=t,i._coordsMap[p]=v,i._coordsList.push(v),v.addAxis(c),v.addAxis(h)})});function u(c){return function(f,h){if(!!O2(f,t)){var d=f.get("position");c==="x"?d!=="top"&&d!=="bottom"&&(d=a.bottom?"top":"bottom"):d!=="left"&&d!=="right"&&(d=a.left?"right":"left"),a[d]=!0;var p=new vat(c,Fit(f),[0,0],f.get("type"),d),v=p.type==="category";p.onBand=v&&f.get("boundaryGap"),p.inverse=f.get("inverse"),f.axis=p,p.model=f,p.grid=o,p.index=h,o._axesList.push(p),s[c][h]=p,l[c]++}}}},e.prototype._updateScale=function(t,r){F(this._axesList,function(i){if(i.scale.setExtent(1/0,-1/0),i.type==="category"){var o=i.model.get("categorySortInfo");i.scale.setSortInfo(o)}}),t.eachSeries(function(i){if(H6(i)){var o=X6(i),a=o.xAxisModel,s=o.yAxisModel;if(!O2(a,r)||!O2(s,r))return;var l=this.getCartesian(a.componentIndex,s.componentIndex),u=i.getData(),c=l.getAxis("x"),f=l.getAxis("y");n(u,c),n(u,f)}},this);function n(i,o){F(Vit(i,o.dim),function(a){o.scale.unionExtentFromData(i,a)})}},e.prototype.getTooltipAxes=function(t){var r=[],n=[];return F(this.getCartesians(),function(i){var o=t!=null&&t!=="auto"?i.getAxis(t):i.getBaseAxis(),a=i.getOtherAxis(o);ue(r,o)<0&&r.push(o),ue(n,a)<0&&n.push(a)}),{baseAxes:r,otherAxes:n}},e.create=function(t,r){var n=[];return t.eachComponent("grid",function(i,o){var a=new e(i,t,r);a.name="grid_"+o,a.resize(i,r,!0),i.coordinateSystem=a,n.push(a)}),t.eachSeries(function(i){if(!!H6(i)){var o=X6(i),a=o.xAxisModel,s=o.yAxisModel,l=a.getCoordSysModel(),u=l.coordinateSystem;i.coordinateSystem=u.getCartesian(a.componentIndex,s.componentIndex)}}),n},e.dimensions=_3,e}();function O2(e,t){return e.getCoordSysModel()===t}function Y6(e,t,r,n){r.getAxesOnZeroOf=function(){return o?[o]:[]};var i=e[t],o,a=r.model,s=a.get(["axisLine","onZero"]),l=a.get(["axisLine","onZeroAxisIndex"]);if(!s)return;if(l!=null)q6(i[l])&&(o=i[l]);else for(var u in i)if(i.hasOwnProperty(u)&&q6(i[u])&&!n[c(i[u])]){o=i[u];break}o&&(n[c(o)]=!0);function c(f){return f.dim+"_"+f.index}}function q6(e){return e&&e.type!=="category"&&e.type!=="time"&&Bit(e)}function _at(e,t){var r=e.getExtent(),n=r[0]+r[1];e.toGlobalCoord=e.dim==="x"?function(i){return i+t}:function(i){return n-i+t},e.toLocalCoord=e.dim==="x"?function(i){return i-t}:function(i){return n-i+t}}const yat=mat;var vs=Math.PI,jl=function(){function e(t,r){this.group=new De,this.opt=r,this.axisModel=t,te(r,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var n=new De({x:r.position[0],y:r.position[1],rotation:r.rotation});n.updateTransform(),this._transformGroup=n}return e.prototype.hasBuilder=function(t){return!!Z6[t]},e.prototype.add=function(t){Z6[t](this.opt,this.axisModel,this.group,this._transformGroup)},e.prototype.getGroup=function(){return this.group},e.innerTextLayout=function(t,r,n){var i=p9(r-t),o,a;return Rm(i)?(a=n>0?"top":"bottom",o="center"):Rm(i-vs)?(a=n>0?"bottom":"top",o="center"):(a="middle",i>0&&i<vs?o=n>0?"right":"left":o=n>0?"left":"right"),{rotation:i,textAlign:o,textVerticalAlign:a}},e.makeAxisEventDataBase=function(t){var r={componentType:t.mainType,componentIndex:t.componentIndex};return r[t.mainType+"Index"]=t.componentIndex,r},e.isLabelSilent=function(t){var r=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||r&&r.show)},e}(),Z6={axisLine:function(e,t,r,n){var i=t.get(["axisLine","show"]);if(i==="auto"&&e.handleAutoShown&&(i=e.handleAutoShown("axisLine")),!!i){var o=t.axis.getExtent(),a=n.transform,s=[o[0],0],l=[o[1],0],u=s[0]>l[0];a&&(rn(s,s,a),rn(l,l,a));var c=at({lineCap:"round"},t.getModel(["axisLine","lineStyle"]).getLineStyle()),f=new xs({shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:c,strokeContainThreshold:e.strokeContainThreshold||5,silent:!0,z2:1});t0(f.shape,f.style.lineWidth),f.anid="line",r.add(f);var h=t.get(["axisLine","symbol"]);if(h!=null){var d=t.get(["axisLine","symbolSize"]);Et(h)&&(h=[h,h]),(Et(d)||we(d))&&(d=[d,d]);var p=gE(t.get(["axisLine","symbolOffset"])||0,d),v=d[0],g=d[1];F([{rotate:e.rotation+Math.PI/2,offset:p[0],r:0},{rotate:e.rotation-Math.PI/2,offset:p[1],r:Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]))}],function(m,_){if(h[_]!=="none"&&h[_]!=null){var y=Bi(h[_],-v/2,-g/2,v,g,c.stroke,!0),w=m.r+m.offset,T=u?l:s;y.attr({rotation:m.rotate,x:T[0]+w*Math.cos(e.rotation),y:T[1]-w*Math.sin(e.rotation),silent:!0,z2:11}),r.add(y)}})}}},axisTickLabel:function(e,t,r,n){var i=Sat(r,n,t,e),o=Pat(r,n,t,e);if(wat(t,o,i),Tat(r,n,t,e.tickDirection),t.get(["axisLabel","hideOverlap"])){var a=eot(Ct(o,function(s){return{label:s,priority:s.z2,defaultAttr:{ignore:s.ignore}}}));rot(a)}},axisName:function(e,t,r,n){var i=Ei(e.axisName,t.get("name"));if(!!i){var o=t.get("nameLocation"),a=e.nameDirection,s=t.getModel("nameTextStyle"),l=t.get("nameGap")||0,u=t.axis.getExtent(),c=u[0]>u[1]?-1:1,f=[o==="start"?u[0]-c*l:o==="end"?u[1]+c*l:(u[0]+u[1])/2,J6(o)?e.labelOffset+a*l:0],h,d=t.get("nameRotate");d!=null&&(d=d*vs/180);var p;J6(o)?h=jl.innerTextLayout(e.rotation,d!=null?d:e.rotation,a):(h=bat(e.rotation,o,d||0,u),p=e.axisNameAvailableWidth,p!=null&&(p=Math.abs(p/Math.sin(h.rotation)),!isFinite(p)&&(p=null)));var v=s.getFont(),g=t.get("nameTruncate",!0)||{},m=g.ellipsis,_=Ei(e.nameTruncateMaxWidth,g.maxWidth,p),y=new Je({x:f[0],y:f[1],rotation:h.rotation,silent:jl.isLabelSilent(t),style:mn(s,{text:i,font:v,overflow:"truncate",width:_,ellipsis:m,fill:s.getTextColor()||t.get(["axisLine","lineStyle","color"]),align:s.get("align")||h.textAlign,verticalAlign:s.get("verticalAlign")||h.textVerticalAlign}),z2:1});if(tE({el:y,componentModel:t,itemName:i}),y.__fullText=i,y.anid="name",t.get("triggerEvent")){var w=jl.makeAxisEventDataBase(t);w.targetType="axisName",w.name=i,ie(y).eventData=w}n.add(y),y.updateTransform(),r.add(y),y.decomposeTransform()}}};function bat(e,t,r,n){var i=p9(r-e),o,a,s=n[0]>n[1],l=t==="start"&&!s||t!=="start"&&s;return Rm(i-vs/2)?(a=l?"bottom":"top",o="center"):Rm(i-vs*1.5)?(a=l?"top":"bottom",o="center"):(a="middle",i<vs*1.5&&i>vs/2?o=l?"left":"right":o=l?"right":"left"),{rotation:i,textAlign:o,textVerticalAlign:a}}function wat(e,t,r){if(!fB(e.axis)){var n=e.get(["axisLabel","showMinLabel"]),i=e.get(["axisLabel","showMaxLabel"]);t=t||[],r=r||[];var o=t[0],a=t[1],s=t[t.length-1],l=t[t.length-2],u=r[0],c=r[1],f=r[r.length-1],h=r[r.length-2];n===!1?($n(o),$n(u)):K6(o,a)&&(n?($n(a),$n(c)):($n(o),$n(u))),i===!1?($n(s),$n(f)):K6(l,s)&&(i?($n(l),$n(h)):($n(s),$n(f)))}}function $n(e){e&&(e.ignore=!0)}function K6(e,t){var r=e&&e.getBoundingRect().clone(),n=t&&t.getBoundingRect().clone();if(!(!r||!n)){var i=LP([]);return IP(i,i,-e.rotation),r.applyTransform(Oc([],i,e.getLocalTransform())),n.applyTransform(Oc([],i,t.getLocalTransform())),r.intersect(n)}}function J6(e){return e==="middle"||e==="center"}function OB(e,t,r,n,i){for(var o=[],a=[],s=[],l=0;l<e.length;l++){var u=e[l].coord;a[0]=u,a[1]=0,s[0]=u,s[1]=r,t&&(rn(a,a,t),rn(s,s,t));var c=new xs({shape:{x1:a[0],y1:a[1],x2:s[0],y2:s[1]},style:n,z2:2,autoBatch:!0,silent:!0});t0(c.shape,c.style.lineWidth),c.anid=i+"_"+e[l].tickValue,o.push(c)}return o}function Sat(e,t,r,n){var i=r.axis,o=r.getModel("axisTick"),a=o.get("show");if(a==="auto"&&n.handleAutoShown&&(a=n.handleAutoShown("axisTick")),!(!a||i.scale.isBlank())){for(var s=o.getModel("lineStyle"),l=n.tickDirection*o.get("length"),u=i.getTicksCoords(),c=OB(u,t.transform,l,te(s.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}),"ticks"),f=0;f<c.length;f++)e.add(c[f]);return c}}function Tat(e,t,r,n){var i=r.axis,o=r.getModel("minorTick");if(!(!o.get("show")||i.scale.isBlank())){var a=i.getMinorTicksCoords();if(!!a.length)for(var s=o.getModel("lineStyle"),l=n*o.get("length"),u=te(s.getLineStyle(),te(r.getModel("axisTick").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})),c=0;c<a.length;c++)for(var f=OB(a[c],t.transform,l,u,"minorticks_"+c),h=0;h<f.length;h++)e.add(f[h])}}function Pat(e,t,r,n){var i=r.axis,o=Ei(n.axisLabelShow,r.get(["axisLabel","show"]));if(!(!o||i.scale.isBlank())){var a=r.getModel("axisLabel"),s=a.get("margin"),l=i.getViewLabels(),u=(Ei(n.labelRotate,a.get("rotate"))||0)*vs/180,c=jl.innerTextLayout(n.rotation,u,n.labelDirection),f=r.getCategories&&r.getCategories(!0),h=[],d=jl.isLabelSilent(r),p=r.get("triggerEvent");return F(l,function(v,g){var m=i.scale.type==="ordinal"?i.scale.getRawOrdinalNumber(v.tickValue):v.tickValue,_=v.formattedLabel,y=v.rawLabel,w=a;if(f&&f[m]){var T=f[m];Ot(T)&&T.textStyle&&(w=new Pr(T.textStyle,a,r.ecModel))}var S=w.getTextColor()||r.get(["axisLine","lineStyle","color"]),P=i.dataToCoord(m),A=new Je({x:P,y:n.labelOffset+n.labelDirection*s,rotation:c.rotation,silent:d,z2:10+(v.level||0),style:mn(w,{text:_,align:w.getShallow("align",!0)||c.textAlign,verticalAlign:w.getShallow("verticalAlign",!0)||w.getShallow("baseline",!0)||c.textVerticalAlign,fill:Ut(S)?S(i.type==="category"?y:i.type==="value"?m+"":m,g):S})});if(A.anid="label_"+m,p){var k=jl.makeAxisEventDataBase(r);k.targetType="axisLabel",k.value=y,k.tickIndex=g,i.type==="category"&&(k.dataIndex=m),ie(A).eventData=k}t.add(A),A.updateTransform(),h.push(A),e.add(A),A.decomposeTransform()}),h}}const RB=jl;function Eat(e,t){var r={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return kat(r,e,t),r.seriesInvolved&&Cat(r,e),r}function kat(e,t,r){var n=t.getComponent("tooltip"),i=t.getComponent("axisPointer"),o=i.get("link",!0)||[],a=[];F(r.getCoordinateSystems(),function(s){if(!s.axisPointerEnabled)return;var l=u0(s.model),u=e.coordSysAxesInfo[l]={};e.coordSysMap[l]=s;var c=s.model,f=c.getModel("tooltip",n);if(F(s.getAxes(),be(v,!1,null)),s.getTooltipAxes&&n&&f.get("show")){var h=f.get("trigger")==="axis",d=f.get(["axisPointer","type"])==="cross",p=s.getTooltipAxes(f.get(["axisPointer","axis"]));(h||d)&&F(p.baseAxes,be(v,d?"cross":!0,h)),d&&F(p.otherAxes,be(v,"cross",!1))}function v(g,m,_){var y=_.model.getModel("axisPointer",i),w=y.get("show");if(!(!w||w==="auto"&&!g&&!b3(y))){m==null&&(m=y.get("triggerTooltip")),y=g?Aat(_,f,i,t,g,m):y;var T=y.get("snap"),S=u0(_.model),P=m||T||_.type==="category",A=e.axesInfo[S]={key:S,axis:_,coordSys:s,axisPointerModel:y,triggerTooltip:m,involveSeries:P,snap:T,useHandle:b3(y),seriesModels:[],linkGroup:null};u[S]=A,e.seriesInvolved=e.seriesInvolved||P;var k=Mat(o,_);if(k!=null){var C=a[k]||(a[k]={axesInfo:{}});C.axesInfo[S]=A,C.mapper=o[k].mapper,A.linkGroup=C}}}})}function Aat(e,t,r,n,i,o){var a=t.getModel("axisPointer"),s=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};F(s,function(h){l[h]=zt(a.get(h))}),l.snap=e.type!=="category"&&!!o,a.get("type")==="cross"&&(l.type="line");var u=l.label||(l.label={});if(u.show==null&&(u.show=!1),i==="cross"){var c=a.get(["label","show"]);if(u.show=c!=null?c:!0,!o){var f=l.lineStyle=a.get("crossStyle");f&&te(u,f.textStyle)}}return e.model.getModel("axisPointer",new Pr(l,r,n))}function Cat(e,t){t.eachSeries(function(r){var n=r.coordinateSystem,i=r.get(["tooltip","trigger"],!0),o=r.get(["tooltip","show"],!0);!n||i==="none"||i===!1||i==="item"||o===!1||r.get(["axisPointer","show"],!0)===!1||F(e.coordSysAxesInfo[u0(n.model)],function(a){var s=a.axis;n.getAxis(s.dim)===s&&(a.seriesModels.push(r),a.seriesDataCount==null&&(a.seriesDataCount=0),a.seriesDataCount+=r.getData().count())})})}function Mat(e,t){for(var r=t.model,n=t.dim,i=0;i<e.length;i++){var o=e[i]||{};if(R2(o[n+"AxisId"],r.id)||R2(o[n+"AxisIndex"],r.componentIndex)||R2(o[n+"AxisName"],r.name))return i}}function R2(e,t){return e==="all"||ct(e)&&ue(e,t)>=0||e===t}function xat(e){var t=ME(e);if(!!t){var r=t.axisPointerModel,n=t.axis.scale,i=r.option,o=r.get("status"),a=r.get("value");a!=null&&(a=n.parse(a));var s=b3(r);o==null&&(i.status=s?"show":"hide");var l=n.getExtent().slice();l[0]>l[1]&&l.reverse(),(a==null||a>l[1])&&(a=l[1]),a<l[0]&&(a=l[0]),i.value=a,s&&(i.status=t.axis.scale.isBlank()?"hide":"show")}}function ME(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[u0(e)]}function Lat(e){var t=ME(e);return t&&t.axisPointerModel}function b3(e){return!!e.get(["handle","show"])}function u0(e){return e.type+"||"+e.id}var Q6={},Iat=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i,o){this.axisPointerClass&&xat(r),e.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(r,i,!0)},t.prototype.updateAxisPointer=function(r,n,i,o){this._doUpdateAxisPointerClass(r,i,!1)},t.prototype.remove=function(r,n){var i=this._axisPointer;i&&i.remove(n)},t.prototype.dispose=function(r,n){this._disposeAxisPointer(n),e.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(r,n,i){var o=t.getAxisPointerClass(this.axisPointerClass);if(!!o){var a=Lat(r);a?(this._axisPointer||(this._axisPointer=new o)).render(r,a,n,i):this._disposeAxisPointer(n)}},t.prototype._disposeAxisPointer=function(r){this._axisPointer&&this._axisPointer.dispose(r),this._axisPointer=null},t.registerAxisPointerClass=function(r,n){Q6[r]=n},t.getAxisPointerClass=function(r){return r&&Q6[r]},t.type="axis",t}(oi);const DB=Iat;var w3=Oe();function Oat(e,t,r,n){var i=r.axis;if(!i.scale.isBlank()){var o=r.getModel("splitArea"),a=o.getModel("areaStyle"),s=a.get("color"),l=n.coordinateSystem.getRect(),u=i.getTicksCoords({tickModel:o,clamp:!0});if(!!u.length){var c=s.length,f=w3(e).splitAreaColors,h=jt(),d=0;if(f)for(var p=0;p<u.length;p++){var v=f.get(u[p].tickValue);if(v!=null){d=(v+(c-1)*p)%c;break}}var g=i.toGlobalCoord(u[0].coord),m=a.getAreaStyle();s=ct(s)?s:[s];for(var p=1;p<u.length;p++){var _=i.toGlobalCoord(u[p].coord),y=void 0,w=void 0,T=void 0,S=void 0;i.isHorizontal()?(y=g,w=l.y,T=_-y,S=l.height,g=y+T):(y=l.x,w=g,T=l.width,S=_-w,g=w+S);var P=u[p-1].tickValue;P!=null&&h.set(P,d),t.add(new Ke({anid:P!=null?"area_"+P:null,shape:{x:y,y:w,width:T,height:S},style:te({fill:s[d]},m),autoBatch:!0,silent:!0})),d=(d+1)%c}w3(e).splitAreaColors=h}}}function Rat(e){w3(e).splitAreaColors=null}var Dat=["axisLine","axisTickLabel","axisName"],Nat=["splitArea","splitLine","minorSplitLine"],NB=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="CartesianAxisPointer",r}return t.prototype.render=function(r,n,i,o){this.group.removeAll();var a=this._axisGroup;if(this._axisGroup=new De,this.group.add(this._axisGroup),!!r.get("show")){var s=r.getCoordSysModel(),l=y3(s,r),u=new RB(r,at({handleAutoShown:function(f){for(var h=s.coordinateSystem.getCartesians(),d=0;d<h.length;d++)if(p3(h[d].getOtherAxis(r.axis).scale))return!0;return!1}},l));F(Dat,u.add,u),this._axisGroup.add(u.getGroup()),F(Nat,function(f){r.get([f,"show"])&&Fat[f](this,this._axisGroup,r,s)},this);var c=o&&o.type==="changeAxisOrder"&&o.isInitSort;c||pN(a,this._axisGroup,r),e.prototype.render.call(this,r,n,i,o)}},t.prototype.remove=function(){Rat(this)},t.type="cartesianAxis",t}(DB),Fat={splitLine:function(e,t,r,n){var i=r.axis;if(!i.scale.isBlank()){var o=r.getModel("splitLine"),a=o.getModel("lineStyle"),s=a.get("color");s=ct(s)?s:[s];for(var l=n.coordinateSystem.getRect(),u=i.isHorizontal(),c=0,f=i.getTicksCoords({tickModel:o}),h=[],d=[],p=a.getLineStyle(),v=0;v<f.length;v++){var g=i.toGlobalCoord(f[v].coord);u?(h[0]=g,h[1]=l.y,d[0]=g,d[1]=l.y+l.height):(h[0]=l.x,h[1]=g,d[0]=l.x+l.width,d[1]=g);var m=c++%s.length,_=f[v].tickValue,y=new xs({anid:_!=null?"line_"+f[v].tickValue:null,autoBatch:!0,shape:{x1:h[0],y1:h[1],x2:d[0],y2:d[1]},style:te({stroke:s[m]},p),silent:!0});t0(y.shape,p.lineWidth),t.add(y)}}},minorSplitLine:function(e,t,r,n){var i=r.axis,o=r.getModel("minorSplitLine"),a=o.getModel("lineStyle"),s=n.coordinateSystem.getRect(),l=i.isHorizontal(),u=i.getMinorTicksCoords();if(!!u.length)for(var c=[],f=[],h=a.getLineStyle(),d=0;d<u.length;d++)for(var p=0;p<u[d].length;p++){var v=i.toGlobalCoord(u[d][p].coord);l?(c[0]=v,c[1]=s.y,f[0]=v,f[1]=s.y+s.height):(c[0]=s.x,c[1]=v,f[0]=s.x+s.width,f[1]=v);var g=new xs({anid:"minor_line_"+u[d][p].tickValue,autoBatch:!0,shape:{x1:c[0],y1:c[1],x2:f[0],y2:f[1]},style:h,silent:!0});t0(g.shape,h.lineWidth),t.add(g)}},splitArea:function(e,t,r,n){Oat(e,t,r,n)}},FB=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="xAxis",t}(NB),Bat=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=FB.type,r}return t.type="yAxis",t}(NB),$at=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="grid",r}return t.prototype.render=function(r,n){this.group.removeAll(),r.get("show")&&this.group.add(new Ke({shape:r.coordinateSystem.getRect(),style:te({fill:r.get("backgroundColor")},r.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(oi),t5={offset:0};function BB(e){e.registerComponentView($at),e.registerComponentModel(oat),e.registerCoordinateSystem("cartesian2d",yat),G6(e,"x",m3,t5),G6(e,"y",m3,t5),e.registerComponentView(FB),e.registerComponentView(Bat),e.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}function $0(e){Hr(BB),e.registerSeriesModel(Kot),e.registerChartView(nat),e.registerLayout(AE("scatter"))}var e5="\0_ec_interaction_mutex";function r5(e,t){return!!zat(e)[t]}function zat(e){return e[e5]||(e[e5]={})}gu({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},Gr);var Vat=function(e){_t(t,e);function t(r){var n=e.call(this)||this;n._zr=r;var i=Vt(n._mousedownHandler,n),o=Vt(n._mousemoveHandler,n),a=Vt(n._mouseupHandler,n),s=Vt(n._mousewheelHandler,n),l=Vt(n._pinchHandler,n);return n.enable=function(u,c){this.disable(),this._opt=te(zt(c)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),u==null&&(u=!0),(u===!0||u==="move"||u==="pan")&&(r.on("mousedown",i),r.on("mousemove",o),r.on("mouseup",a)),(u===!0||u==="scale"||u==="zoom")&&(r.on("mousewheel",s),r.on("pinch",l))},n.disable=function(){r.off("mousedown",i),r.off("mousemove",o),r.off("mouseup",a),r.off("mousewheel",s),r.off("pinch",l)},n}return t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(r){this.pointerChecker=r},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(r){if(!jC(r)){for(var n=r.target;n;){if(n.draggable)return;n=n.__hostTarget||n.parent}var i=r.offsetX,o=r.offsetY;this.pointerChecker&&this.pointerChecker(r,i,o)&&(this._x=i,this._y=o,this._dragging=!0)}},t.prototype._mousemoveHandler=function(r){if(!(!this._dragging||!Yg("moveOnMouseMove",r,this._opt)||r.gestureEvent==="pinch"||r5(this._zr,"globalPan"))){var n=r.offsetX,i=r.offsetY,o=this._x,a=this._y,s=n-o,l=i-a;this._x=n,this._y=i,this._opt.preventDefaultMouseMove&&Kl(r.event),$B(this,"pan","moveOnMouseMove",r,{dx:s,dy:l,oldX:o,oldY:a,newX:n,newY:i,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(r){jC(r)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(r){var n=Yg("zoomOnMouseWheel",r,this._opt),i=Yg("moveOnMouseWheel",r,this._opt),o=r.wheelDelta,a=Math.abs(o),s=r.offsetX,l=r.offsetY;if(!(o===0||!n&&!i)){if(n){var u=a>3?1.4:a>1?1.2:1.1,c=o>0?u:1/u;D2(this,"zoom","zoomOnMouseWheel",r,{scale:c,originX:s,originY:l,isAvailableBehavior:null})}if(i){var f=Math.abs(o),h=(o>0?1:-1)*(f>3?.4:f>1?.15:.05);D2(this,"scrollMove","moveOnMouseWheel",r,{scrollDelta:h,originX:s,originY:l,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(r){if(!r5(this._zr,"globalPan")){var n=r.pinchScale>1?1.1:1/1.1;D2(this,"zoom",null,r,{scale:n,originX:r.pinchX,originY:r.pinchY,isAvailableBehavior:null})}},t}(Gi);function D2(e,t,r,n,i){e.pointerChecker&&e.pointerChecker(n,i.originX,i.originY)&&(Kl(n.event),$B(e,t,r,n,i))}function $B(e,t,r,n,i){i.isAvailableBehavior=Vt(Yg,null,r,n),e.trigger(t,i)}function Yg(e,t,r){var n=r[e];return!e||n&&(!Et(n)||t.event[n+"Key"])}const Uat=Vat;function Gat(e,t,r){var n=e.target;n.x+=t,n.y+=r,n.dirty()}function jat(e,t,r,n){var i=e.target,o=e.zoomLimit,a=e.zoom=e.zoom||1;if(a*=t,o){var s=o.min||0,l=o.max||1/0;a=Math.max(Math.min(l,a),s)}var u=a/e.zoom;e.zoom=a,i.x-=(r-i.x)*(u-1),i.y-=(n-i.y)*(u-1),i.scaleX*=u,i.scaleY*=u,i.dirty()}var Wat={axisPointer:1,tooltip:1,brush:1};function Hat(e,t,r){var n=t.getComponentByElement(e.topTarget),i=n&&n.coordinateSystem;return n&&n!==r&&!Wat.hasOwnProperty(n.mainType)&&i&&i.model!==r}var n5=rn,Xat=function(e){_t(t,e);function t(r){var n=e.call(this)||this;return n.type="view",n.dimensions=["x","y"],n._roamTransformable=new xl,n._rawTransformable=new xl,n.name=r,n}return t.prototype.setBoundingRect=function(r,n,i,o){return this._rect=new ae(r,n,i,o),this._rect},t.prototype.getBoundingRect=function(){return this._rect},t.prototype.setViewRect=function(r,n,i,o){this._transformTo(r,n,i,o),this._viewRect=new ae(r,n,i,o)},t.prototype._transformTo=function(r,n,i,o){var a=this.getBoundingRect(),s=this._rawTransformable;s.transform=a.calculateTransform(new ae(r,n,i,o));var l=s.parent;s.parent=null,s.decomposeTransform(),s.parent=l,this._updateTransform()},t.prototype.setCenter=function(r,n){!r||(this._center=[We(r[0],n.getWidth()),We(r[1],n.getHeight())],this._updateCenterAndZoom())},t.prototype.setZoom=function(r){r=r||1;var n=this.zoomLimit;n&&(n.max!=null&&(r=Math.min(n.max,r)),n.min!=null&&(r=Math.max(n.min,r))),this._zoom=r,this._updateCenterAndZoom()},t.prototype.getDefaultCenter=function(){var r=this.getBoundingRect(),n=r.x+r.width/2,i=r.y+r.height/2;return[n,i]},t.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},t.prototype.getZoom=function(){return this._zoom||1},t.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},t.prototype._updateCenterAndZoom=function(){var r=this._rawTransformable.getLocalTransform(),n=this._roamTransformable,i=this.getDefaultCenter(),o=this.getCenter(),a=this.getZoom();o=rn([],o,r),i=rn([],i,r),n.originX=o[0],n.originY=o[1],n.x=i[0]-o[0],n.y=i[1]-o[1],n.scaleX=n.scaleY=a,this._updateTransform()},t.prototype._updateTransform=function(){var r=this._roamTransformable,n=this._rawTransformable;n.parent=r,r.updateTransform(),n.updateTransform(),H7(this.transform||(this.transform=[]),n.transform||qc()),this._rawTransform=n.getLocalTransform(),this.invTransform=this.invTransform||[],W1(this.invTransform,this.transform),this.decomposeTransform()},t.prototype.getTransformInfo=function(){var r=this._rawTransformable,n=this._roamTransformable,i=new xl;return i.transform=n.transform,i.decomposeTransform(),{roam:{x:i.x,y:i.y,scaleX:i.scaleX,scaleY:i.scaleY},raw:{x:r.x,y:r.y,scaleX:r.scaleX,scaleY:r.scaleY}}},t.prototype.getViewRect=function(){return this._viewRect},t.prototype.getViewRectAfterRoam=function(){var r=this.getBoundingRect().clone();return r.applyTransform(this.transform),r},t.prototype.dataToPoint=function(r,n,i){var o=n?this._rawTransform:this.transform;return i=i||[],o?n5(i,r,o):nZ(i,r)},t.prototype.pointToData=function(r){var n=this.invTransform;return n?n5([],r,n):[r[0],r[1]]},t.prototype.convertToPixel=function(r,n,i){var o=i5(n);return o===this?o.dataToPoint(i):null},t.prototype.convertFromPixel=function(r,n,i){var o=i5(n);return o===this?o.pointToData(i):null},t.prototype.containPoint=function(r){return this.getViewRectAfterRoam().contain(r[0],r[1])},t.dimensions=["x","y"],t}(xl);function i5(e){var t=e.seriesModel;return t?t.coordinateSystem:null}const Yat=Xat;function o5(e,t){return e.pointToProjected?e.pointToProjected(t):e.pointToData(t)}function qat(e,t,r,n){var i=e.getZoom(),o=e.getCenter(),a=t.zoom,s=e.projectedToPoint?e.projectedToPoint(o):e.dataToPoint(o);if(t.dx!=null&&t.dy!=null&&(s[0]-=t.dx,s[1]-=t.dy,e.setCenter(o5(e,s),n)),a!=null){if(r){var l=r.min||0,u=r.max||1/0;a=Math.max(Math.min(i*a,u),l)/i}e.scaleX*=a,e.scaleY*=a;var c=(t.originX-e.x)*(a-1),f=(t.originY-e.y)*(a-1);e.x-=c,e.y-=f,e.updateTransform(),e.setCenter(o5(e,s),n),e.setZoom(a*i)}return{center:e.getCenter(),zoom:e.getZoom()}}function Zat(e){var t=e;t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var r=[t],n,i;n=r.pop();)if(i=n.children,n.isExpand&&i.length)for(var o=i.length,a=o-1;a>=0;a--){var s=i[a];s.hierNode={defaultAncestor:null,ancestor:s,prelim:0,modifier:0,change:0,shift:0,i:a,thread:null},r.push(s)}}function Kat(e,t){var r=e.isExpand?e.children:[],n=e.parentNode.children,i=e.hierNode.i?n[e.hierNode.i-1]:null;if(r.length){tst(e);var o=(r[0].hierNode.prelim+r[r.length-1].hierNode.prelim)/2;i?(e.hierNode.prelim=i.hierNode.prelim+t(e,i),e.hierNode.modifier=e.hierNode.prelim-o):e.hierNode.prelim=o}else i&&(e.hierNode.prelim=i.hierNode.prelim+t(e,i));e.parentNode.hierNode.defaultAncestor=est(e,i,e.parentNode.hierNode.defaultAncestor||n[0],t)}function Jat(e){var t=e.hierNode.prelim+e.parentNode.hierNode.modifier;e.setLayout({x:t},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier}function a5(e){return arguments.length?e:ist}function td(e,t){return e-=Math.PI/2,{x:t*Math.cos(e),y:t*Math.sin(e)}}function Qat(e,t){return Ls(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function tst(e){for(var t=e.children,r=t.length,n=0,i=0;--r>=0;){var o=t[r];o.hierNode.prelim+=n,o.hierNode.modifier+=n,i+=o.hierNode.change,n+=o.hierNode.shift+i}}function est(e,t,r,n){if(t){for(var i=e,o=e,a=o.parentNode.children[0],s=t,l=i.hierNode.modifier,u=o.hierNode.modifier,c=a.hierNode.modifier,f=s.hierNode.modifier;s=N2(s),o=F2(o),s&&o;){i=N2(i),a=F2(a),i.hierNode.ancestor=e;var h=s.hierNode.prelim+f-o.hierNode.prelim-u+n(s,o);h>0&&(nst(rst(s,e,r),e,h),u+=h,l+=h),f+=s.hierNode.modifier,u+=o.hierNode.modifier,l+=i.hierNode.modifier,c+=a.hierNode.modifier}s&&!N2(i)&&(i.hierNode.thread=s,i.hierNode.modifier+=f-l),o&&!F2(a)&&(a.hierNode.thread=o,a.hierNode.modifier+=u-c,r=e)}return r}function N2(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function F2(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function rst(e,t,r){return e.hierNode.ancestor.parentNode===t.parentNode?e.hierNode.ancestor:r}function nst(e,t,r){var n=r/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=n,t.hierNode.shift+=r,t.hierNode.modifier+=r,t.hierNode.prelim+=r,e.hierNode.change+=n}function ist(e,t){return e.parentNode===t.parentNode?1:2}var ost=function(){function e(){this.parentPoint=[],this.childPoints=[]}return e}(),ast=function(e){_t(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new ost},t.prototype.buildPath=function(r,n){var i=n.childPoints,o=i.length,a=n.parentPoint,s=i[0],l=i[o-1];if(o===1){r.moveTo(a[0],a[1]),r.lineTo(s[0],s[1]);return}var u=n.orient,c=u==="TB"||u==="BT"?0:1,f=1-c,h=We(n.forkPosition,1),d=[];d[c]=a[c],d[f]=a[f]+(l[f]-a[f])*h,r.moveTo(a[0],a[1]),r.lineTo(d[0],d[1]),r.moveTo(s[0],s[1]),d[c]=s[c],r.lineTo(d[0],d[1]),d[c]=l[c],r.lineTo(d[0],d[1]),r.lineTo(l[0],l[1]);for(var p=1;p<o-1;p++){var v=i[p];r.moveTo(v[0],v[1]),d[c]=v[c],r.lineTo(d[0],d[1])}},t}(fe),sst=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._mainGroup=new De,r}return t.prototype.init=function(r,n){this._controller=new Uat(n.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(r,n,i){var o=r.getData(),a=r.layoutInfo,s=this._mainGroup,l=r.get("layout");l==="radial"?(s.x=a.x+a.width/2,s.y=a.y+a.height/2):(s.x=a.x,s.y=a.y),this._updateViewCoordSys(r,i),this._updateController(r,n,i);var u=this._data;o.diff(u).add(function(c){s5(o,c)&&l5(o,c,null,s,r)}).update(function(c,f){var h=u.getItemGraphicEl(f);if(!s5(o,c)){h&&c5(u,f,h,s,r);return}l5(o,c,h,s,r)}).remove(function(c){var f=u.getItemGraphicEl(c);f&&c5(u,c,f,s,r)}).execute(),this._nodeScaleRatio=r.get("nodeScaleRatio"),this._updateNodeAndLinkScale(r),r.get("expandAndCollapse")===!0&&o.eachItemGraphicEl(function(c,f){c.off("click").on("click",function(){i.dispatchAction({type:"treeExpandAndCollapse",seriesId:r.id,dataIndex:f})})}),this._data=o},t.prototype._updateViewCoordSys=function(r,n){var i=r.getData(),o=[];i.each(function(f){var h=i.getItemLayout(f);h&&!isNaN(h.x)&&!isNaN(h.y)&&o.push([+h.x,+h.y])});var a=[],s=[];wJ(o,a,s);var l=this._min,u=this._max;s[0]-a[0]===0&&(a[0]=l?l[0]:a[0]-1,s[0]=u?u[0]:s[0]+1),s[1]-a[1]===0&&(a[1]=l?l[1]:a[1]-1,s[1]=u?u[1]:s[1]+1);var c=r.coordinateSystem=new Yat;c.zoomLimit=r.get("scaleLimit"),c.setBoundingRect(a[0],a[1],s[0]-a[0],s[1]-a[1]),c.setCenter(r.get("center"),n),c.setZoom(r.get("zoom")),this.group.attr({x:c.x,y:c.y,scaleX:c.scaleX,scaleY:c.scaleY}),this._min=a,this._max=s},t.prototype._updateController=function(r,n,i){var o=this,a=this._controller,s=this._controllerHost,l=this.group;a.setPointerChecker(function(u,c,f){var h=l.getBoundingRect();return h.applyTransform(l.transform),h.contain(c,f)&&!Hat(u,i,r)}),a.enable(r.get("roam")),s.zoomLimit=r.get("scaleLimit"),s.zoom=r.coordinateSystem.getZoom(),a.off("pan").off("zoom").on("pan",function(u){Gat(s,u.dx,u.dy),i.dispatchAction({seriesId:r.id,type:"treeRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){jat(s,u.scale,u.originX,u.originY),i.dispatchAction({seriesId:r.id,type:"treeRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),o._updateNodeAndLinkScale(r),i.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(r){var n=r.getData(),i=this._getNodeGlobalScale(r);n.eachItemGraphicEl(function(o,a){o.setSymbolScale(i)})},t.prototype._getNodeGlobalScale=function(r){var n=r.coordinateSystem;if(n.type!=="view")return 1;var i=this._nodeScaleRatio,o=n.scaleX||1,a=n.getZoom(),s=(a-1)*i+1;return s/o},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t}(ei);function s5(e,t){var r=e.getItemLayout(t);return r&&!isNaN(r.x)&&!isNaN(r.y)}function l5(e,t,r,n,i){var o=!r,a=e.tree.getNodeByDataIndex(t),s=a.getModel(),l=a.getVisual("style").fill,u=a.isExpand===!1&&a.children.length!==0?l:"#fff",c=e.tree.root,f=a.parentNode===c?a:a.parentNode||a,h=e.getItemGraphicEl(f.dataIndex),d=f.getLayout(),p=h?{x:h.__oldX,y:h.__oldY,rawX:h.__radialOldRawX,rawY:h.__radialOldRawY}:d,v=a.getLayout();o?(r=new __(e,t,null,{symbolInnerColor:u,useNameLabel:!0}),r.x=p.x,r.y=p.y):r.updateData(e,t,null,{symbolInnerColor:u,useNameLabel:!0}),r.__radialOldRawX=r.__radialRawX,r.__radialOldRawY=r.__radialRawY,r.__radialRawX=v.rawX,r.__radialRawY=v.rawY,n.add(r),e.setItemGraphicEl(t,r),r.__oldX=r.x,r.__oldY=r.y,dr(r,{x:v.x,y:v.y},i);var g=r.getSymbolPath();if(i.get("layout")==="radial"){var m=c.children[0],_=m.getLayout(),y=m.children.length,w=void 0,T=void 0;if(v.x===_.x&&a.isExpand===!0&&m.children.length){var S={x:(m.children[0].getLayout().x+m.children[y-1].getLayout().x)/2,y:(m.children[0].getLayout().y+m.children[y-1].getLayout().y)/2};w=Math.atan2(S.y-_.y,S.x-_.x),w<0&&(w=Math.PI*2+w),T=S.x<_.x,T&&(w=w-Math.PI)}else w=Math.atan2(v.y-_.y,v.x-_.x),w<0&&(w=Math.PI*2+w),a.children.length===0||a.children.length!==0&&a.isExpand===!1?(T=v.x<_.x,T&&(w=w-Math.PI)):(T=v.x>_.x,T||(w=w-Math.PI));var P=T?"left":"right",A=s.getModel("label"),k=A.get("rotate"),C=k*(Math.PI/180),M=g.getTextContent();M&&(g.setTextConfig({position:A.get("position")||P,rotation:k==null?-w:C,origin:"center"}),M.setStyle("verticalAlign","middle"))}var D=s.get(["emphasis","focus"]),B=D==="relative"?U7(a.getAncestorsIndices(),a.getDescendantIndices()):D==="ancestor"?a.getAncestorsIndices():D==="descendant"?a.getDescendantIndices():null;B&&(ie(r).focus=B),lst(i,a,c,r,p,d,v,n),r.__edge&&(r.onHoverStateChange=function(V){if(V!=="blur"){var N=a.parentNode&&e.getItemGraphicEl(a.parentNode.dataIndex);N&&N.hoverState===I0||jS(r.__edge,V)}})}function lst(e,t,r,n,i,o,a,s){var l=t.getModel(),u=e.get("edgeShape"),c=e.get("layout"),f=e.getOrient(),h=e.get(["lineStyle","curveness"]),d=e.get("edgeForkPosition"),p=l.getModel("lineStyle").getLineStyle(),v=n.__edge;if(u==="curve")t.parentNode&&t.parentNode!==r&&(v||(v=n.__edge=new K1({shape:S3(c,f,h,i,i)})),dr(v,{shape:S3(c,f,h,o,a)},e));else if(u==="polyline"&&c==="orthogonal"&&t!==r&&t.children&&t.children.length!==0&&t.isExpand===!0){for(var g=t.children,m=[],_=0;_<g.length;_++){var y=g[_].getLayout();m.push([y.x,y.y])}v||(v=n.__edge=new ast({shape:{parentPoint:[a.x,a.y],childPoints:[[a.x,a.y]],orient:f,forkPosition:d}})),dr(v,{shape:{parentPoint:[a.x,a.y],childPoints:m}},e)}v&&!(u==="polyline"&&!t.isExpand)&&(v.useStyle(te({strokeNoScale:!0,fill:null},p)),Jd(v,l,"lineStyle"),jP(v),s.add(v))}function u5(e,t,r,n,i){var o=t.tree.root,a=zB(o,e),s=a.source,l=a.sourceLayout,u=t.getItemGraphicEl(e.dataIndex);if(!!u){var c=t.getItemGraphicEl(s.dataIndex),f=c.__edge,h=u.__edge||(s.isExpand===!1||s.children.length===1?f:void 0),d=n.get("edgeShape"),p=n.get("layout"),v=n.get("orient"),g=n.get(["lineStyle","curveness"]);h&&(d==="curve"?eu(h,{shape:S3(p,v,g,l,l),style:{opacity:0}},n,{cb:function(){r.remove(h)},removeOpt:i}):d==="polyline"&&n.get("layout")==="orthogonal"&&eu(h,{shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]]},style:{opacity:0}},n,{cb:function(){r.remove(h)},removeOpt:i}))}}function zB(e,t){for(var r=t.parentNode===e?t:t.parentNode||t,n;n=r.getLayout(),n==null;)r=r.parentNode===e?r:r.parentNode||r;return{source:r,sourceLayout:n}}function c5(e,t,r,n,i){var o=e.tree.getNodeByDataIndex(t),a=e.tree.root,s=zB(a,o).sourceLayout,l={duration:i.get("animationDurationUpdate"),easing:i.get("animationEasingUpdate")};eu(r,{x:s.x+1,y:s.y+1},i,{cb:function(){n.remove(r),e.setItemGraphicEl(t,null)},removeOpt:l}),r.fadeOut(null,e.hostModel,{fadeLabel:!0,animation:l}),o.children.forEach(function(u){u5(u,e,n,i,l)}),u5(o,e,n,i,l)}function S3(e,t,r,n,i){var o,a,s,l,u,c,f,h;if(e==="radial"){u=n.rawX,f=n.rawY,c=i.rawX,h=i.rawY;var d=td(u,f),p=td(u,f+(h-f)*r),v=td(c,h+(f-h)*r),g=td(c,h);return{x1:d.x||0,y1:d.y||0,x2:g.x||0,y2:g.y||0,cpx1:p.x||0,cpy1:p.y||0,cpx2:v.x||0,cpy2:v.y||0}}else u=n.x,f=n.y,c=i.x,h=i.y,(t==="LR"||t==="RL")&&(o=u+(c-u)*r,a=f,s=c+(u-c)*r,l=h),(t==="TB"||t==="BT")&&(o=u,a=f+(h-f)*r,s=c,l=h+(f-h)*r);return{x1:u,y1:f,x2:c,y2:h,cpx1:o,cpy1:a,cpx2:s,cpy2:l}}const ust=sst;var ri=Oe();function cst(e){var t=e.mainData,r=e.datas;r||(r={main:t},e.datasAttr={main:"data"}),e.datas=e.mainData=null,VB(t,r,e),F(r,function(n){F(t.TRANSFERABLE_METHODS,function(i){n.wrapMethod(i,be(fst,e))})}),t.wrapMethod("cloneShallow",be(dst,e)),F(t.CHANGABLE_METHODS,function(n){t.wrapMethod(n,be(hst,e))}),Fi(r[t.dataType]===t)}function fst(e,t){if(gst(this)){var r=at({},ri(this).datas);r[this.dataType]=t,VB(t,r,e)}else xE(t,this.dataType,ri(this).mainData,e);return t}function hst(e,t){return e.struct&&e.struct.update(),t}function dst(e,t){return F(ri(t).datas,function(r,n){r!==t&&xE(r.cloneShallow(),n,t,e)}),t}function pst(e){var t=ri(this).mainData;return e==null||t==null?t:ri(t).datas[e]}function vst(){var e=ri(this).mainData;return e==null?[{data:e}]:Ct(ge(ri(e).datas),function(t){return{type:t,data:ri(e).datas[t]}})}function gst(e){return ri(e).mainData===e}function VB(e,t,r){ri(e).datas={},F(t,function(n,i){xE(n,i,e,r)})}function xE(e,t,r,n){ri(r).datas[t]=e,ri(e).mainData=r,e.dataType=t,n.struct&&(e[n.structAttr]=n.struct,n.struct[n.datasAttr[t]]=e),e.getLinkedData=pst,e.getLinkedDataAll=vst}var mst=function(){function e(t,r){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=r}return e.prototype.isRemoved=function(){return this.dataIndex<0},e.prototype.eachNode=function(t,r,n){Ut(t)&&(n=r,r=t,t=null),t=t||{},Et(t)&&(t={order:t});var i=t.order||"preorder",o=this[t.attr||"children"],a;i==="preorder"&&(a=r.call(n,this));for(var s=0;!a&&s<o.length;s++)o[s].eachNode(t,r,n);i==="postorder"&&r.call(n,this)},e.prototype.updateDepthAndHeight=function(t){var r=0;this.depth=t;for(var n=0;n<this.children.length;n++){var i=this.children[n];i.updateDepthAndHeight(t+1),i.height>r&&(r=i.height)}this.height=r+1},e.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var r=0,n=this.children,i=n.length;r<i;r++){var o=n[r].getNodeById(t);if(o)return o}},e.prototype.contains=function(t){if(t===this)return!0;for(var r=0,n=this.children,i=n.length;r<i;r++){var o=n[r].contains(t);if(o)return o}},e.prototype.getAncestors=function(t){for(var r=[],n=t?this:this.parentNode;n;)r.push(n),n=n.parentNode;return r.reverse(),r},e.prototype.getAncestorsIndices=function(){for(var t=[],r=this;r;)t.push(r.dataIndex),r=r.parentNode;return t.reverse(),t},e.prototype.getDescendantIndices=function(){var t=[];return this.eachNode(function(r){t.push(r.dataIndex)}),t},e.prototype.getValue=function(t){var r=this.hostTree.data;return r.getStore().get(r.getDimensionIndex(t||"value"),this.dataIndex)},e.prototype.setLayout=function(t,r){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,r)},e.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},e.prototype.getModel=function(t){if(!(this.dataIndex<0)){var r=this.hostTree,n=r.data.getItemModel(this.dataIndex);return n.getModel(t)}},e.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},e.prototype.setVisual=function(t,r){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,r)},e.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},e.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},e.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},e.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,r=0;r<t.length;++r)if(t[r]===this)return r;return-1}return-1},e.prototype.isAncestorOf=function(t){for(var r=t.parentNode;r;){if(r===this)return!0;r=r.parentNode}return!1},e.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},e}(),_st=function(){function e(t){this.type="tree",this._nodes=[],this.hostModel=t}return e.prototype.eachNode=function(t,r,n){this.root.eachNode(t,r,n)},e.prototype.getNodeByDataIndex=function(t){var r=this.data.getRawIndex(t);return this._nodes[r]},e.prototype.getNodeById=function(t){return this.root.getNodeById(t)},e.prototype.update=function(){for(var t=this.data,r=this._nodes,n=0,i=r.length;n<i;n++)r[n].dataIndex=-1;for(var n=0,i=t.count();n<i;n++)r[t.getRawIndex(n)].dataIndex=n},e.prototype.clearLayouts=function(){this.data.clearItemLayouts()},e.createTree=function(t,r,n){var i=new e(r),o=[],a=1;s(t);function s(c,f){var h=c.value;a=Math.max(a,ct(h)?h.length:1),o.push(c);var d=new mst(ti(c.name,""),i);f?yst(d,f):i.root=d,i._nodes.push(d);var p=c.children;if(p)for(var v=0;v<p.length;v++)s(p[v],d)}i.root.updateDepthAndHeight(0);var l=qF(o,{coordDimensions:["value"],dimensionsCount:a}).dimensions,u=new Ul(l,r);return u.initData(o),n&&n(u),cst({mainData:u,struct:i,structAttr:"tree"}),i.update(),i},e}();function yst(e,t){var r=t.children;e.parentNode!==t&&(r.push(e),e.parentNode=t)}const bst=_st;function wst(e,t){for(var r=[];e;){var n=e.dataIndex;r.push({name:e.name,dataIndex:n,value:t.getRawValue(n)}),e=e.parentNode}return r.reverse(),r}var Sst=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.hasSymbolVisual=!0,r.ignoreStyleOnData=!0,r}return t.prototype.getInitialData=function(r){var n={name:r.name,children:r.data},i=r.leaves||{},o=new Pr(i,this,this.ecModel),a=bst.createTree(n,this,s);function s(f){f.wrapMethod("getItemModel",function(h,d){var p=a.getNodeByDataIndex(d);return p&&p.children.length&&p.isExpand||(h.parentModel=o),h})}var l=0;a.eachNode("preorder",function(f){f.depth>l&&(l=f.depth)});var u=r.expandAndCollapse,c=u&&r.initialTreeDepth>=0?r.initialTreeDepth:l;return a.root.eachNode("preorder",function(f){var h=f.hostTree.data.getRawDataItem(f.dataIndex);f.isExpand=h&&h.collapsed!=null?!h.collapsed:f.depth<=c}),a.data},t.prototype.getOrient=function(){var r=this.get("orient");return r==="horizontal"?r="LR":r==="vertical"&&(r="TB"),r},t.prototype.setZoom=function(r){this.option.zoom=r},t.prototype.setCenter=function(r){this.option.center=r},t.prototype.formatTooltip=function(r,n,i){for(var o=this.getData().tree,a=o.root.children[0],s=o.getNodeByDataIndex(r),l=s.getValue(),u=s.name;s&&s!==a;)u=s.parentNode.name+"."+u,s=s.parentNode;return Is("nameValue",{name:u,value:l,noValue:isNaN(l)||l==null})},t.prototype.getDataParams=function(r){var n=e.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(r);return n.treeAncestors=wst(i,this),n.collapsed=!i.isExpand,n},t.type="series.tree",t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t}(Lo);const Tst=Sst;function Pst(e,t,r){for(var n=[e],i=[],o;o=n.pop();)if(i.push(o),o.isExpand){var a=o.children;if(a.length)for(var s=0;s<a.length;s++)n.push(a[s])}for(;o=i.pop();)t(o,r)}function vh(e,t){for(var r=[e],n;n=r.pop();)if(t(n),n.isExpand){var i=n.children;if(i.length)for(var o=i.length-1;o>=0;o--)r.push(i[o])}}function Est(e,t){e.eachSeriesByType("tree",function(r){kst(r,t)})}function kst(e,t){var r=Qat(e,t);e.layoutInfo=r;var n=e.get("layout"),i=0,o=0,a=null;n==="radial"?(i=2*Math.PI,o=Math.min(r.height,r.width)/2,a=a5(function(y,w){return(y.parentNode===w.parentNode?1:2)/y.depth})):(i=r.width,o=r.height,a=a5());var s=e.getData().tree.root,l=s.children[0];if(l){Zat(s),Pst(l,Kat,a),s.hierNode.modifier=-l.hierNode.prelim,vh(l,Jat);var u=l,c=l,f=l;vh(l,function(y){var w=y.getLayout().x;w<u.getLayout().x&&(u=y),w>c.getLayout().x&&(c=y),y.depth>f.depth&&(f=y)});var h=u===c?1:a(u,c)/2,d=h-u.getLayout().x,p=0,v=0,g=0,m=0;if(n==="radial")p=i/(c.getLayout().x+h+d),v=o/(f.depth-1||1),vh(l,function(y){g=(y.getLayout().x+d)*p,m=(y.depth-1)*v;var w=td(g,m);y.setLayout({x:w.x,y:w.y,rawX:g,rawY:m},!0)});else{var _=e.getOrient();_==="RL"||_==="LR"?(v=o/(c.getLayout().x+h+d),p=i/(f.depth-1||1),vh(l,function(y){m=(y.getLayout().x+d)*v,g=_==="LR"?(y.depth-1)*p:i-(y.depth-1)*p,y.setLayout({x:g,y:m},!0)})):(_==="TB"||_==="BT")&&(p=i/(c.getLayout().x+h+d),v=o/(f.depth-1||1),vh(l,function(y){g=(y.getLayout().x+d)*p,m=_==="TB"?(y.depth-1)*v:o-(y.depth-1)*v,y.setLayout({x:g,y:m},!0)}))}}}function Ast(e){e.eachSeriesByType("tree",function(t){var r=t.getData(),n=r.tree;n.eachNode(function(i){var o=i.getModel(),a=o.getModel("itemStyle").getItemStyle(),s=r.ensureUniqueItemVisual(i.dataIndex,"style");at(s,a)})})}function Cst(e){e.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,r){r.eachComponent({mainType:"series",subType:"tree",query:t},function(n){var i=t.dataIndex,o=n.getData().tree,a=o.getNodeByDataIndex(i);a.isExpand=!a.isExpand})}),e.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(t,r,n){r.eachComponent({mainType:"series",subType:"tree",query:t},function(i){var o=i.coordinateSystem,a=qat(o,t,void 0,n);i.setCenter&&i.setCenter(a.center),i.setZoom&&i.setZoom(a.zoom)})})}function Mst(e){e.registerChartView(ust),e.registerSeriesModel(Tst),e.registerLayout(Est),e.registerVisual(Ast),Cst(e)}var c0=F,xst=Ot,Xm=-1,LE=function(){function e(t){var r=t.mappingMethod,n=t.type,i=this.option=zt(t);this.type=n,this.mappingMethod=r,this._normalizeData=Ost[r];var o=e.visualHandlers[n];this.applyVisual=o.applyVisual,this.getColorMapper=o.getColorMapper,this._normalizedToVisual=o._normalizedToVisual[r],r==="piecewise"?(B2(i),Lst(i)):r==="category"?i.categories?Ist(i):B2(i,!0):(Fi(r!=="linear"||i.dataExtent),B2(i))}return e.prototype.mapValueToVisual=function(t){var r=this._normalizeData(t);return this._normalizedToVisual(r,t)},e.prototype.getNormalizer=function(){return Vt(this._normalizeData,this)},e.listVisualTypes=function(){return ge(e.visualHandlers)},e.isValidType=function(t){return e.visualHandlers.hasOwnProperty(t)},e.eachVisual=function(t,r,n){Ot(t)?F(t,r,n):r.call(n,t)},e.mapVisual=function(t,r,n){var i,o=ct(t)?[]:Ot(t)?{}:(i=!0,null);return e.eachVisual(t,function(a,s){var l=r.call(n,a,s);i?o=l:o[s]=l}),o},e.retrieveVisuals=function(t){var r={},n;return t&&c0(e.visualHandlers,function(i,o){t.hasOwnProperty(o)&&(r[o]=t[o],n=!0)}),n?r:null},e.prepareVisualTypes=function(t){if(ct(t))t=t.slice();else if(xst(t)){var r=[];c0(t,function(n,i){r.push(i)}),t=r}else return[];return t.sort(function(n,i){return i==="color"&&n!=="color"&&n.indexOf("color")===0?1:-1}),t},e.dependsOn=function(t,r){return r==="color"?!!(t&&t.indexOf(r)===0):t===r},e.findPieceIndex=function(t,r,n){for(var i,o=1/0,a=0,s=r.length;a<s;a++){var l=r[a].value;if(l!=null){if(l===t||Et(l)&&l===t+"")return a;n&&h(l,a)}}for(var a=0,s=r.length;a<s;a++){var u=r[a],c=u.interval,f=u.close;if(c){if(c[0]===-1/0){if(sv(f[1],t,c[1]))return a}else if(c[1]===1/0){if(sv(f[0],c[0],t))return a}else if(sv(f[0],c[0],t)&&sv(f[1],t,c[1]))return a;n&&h(c[0],a),n&&h(c[1],a)}}if(n)return t===1/0?r.length-1:t===-1/0?0:i;function h(d,p){var v=Math.abs(d-t);v<o&&(o=v,i=p)}},e.visualHandlers={color:{applyVisual:gh("color"),getColorMapper:function(){var t=this.option;return Vt(t.mappingMethod==="category"?function(r,n){return!n&&(r=this._normalizeData(r)),ed.call(this,r)}:function(r,n,i){var o=!!i;return!n&&(r=this._normalizeData(r)),i=My(r,t.parsedVisual,i),o?i:fa(i,"rgba")},this)},_normalizedToVisual:{linear:function(t){return fa(My(t,this.option.parsedVisual),"rgba")},category:ed,piecewise:function(t,r){var n=P3.call(this,r);return n==null&&(n=fa(My(t,this.option.parsedVisual),"rgba")),n},fixed:Pl}},colorHue:av(function(t,r){return xy(t,r)}),colorSaturation:av(function(t,r){return xy(t,null,r)}),colorLightness:av(function(t,r){return xy(t,null,null,r)}),colorAlpha:av(function(t,r){return xS(t,r)}),decal:{applyVisual:gh("decal"),_normalizedToVisual:{linear:null,category:ed,piecewise:null,fixed:null}},opacity:{applyVisual:gh("opacity"),_normalizedToVisual:T3([0,1])},liftZ:{applyVisual:gh("liftZ"),_normalizedToVisual:{linear:Pl,category:Pl,piecewise:Pl,fixed:Pl}},symbol:{applyVisual:function(t,r,n){var i=this.mapValueToVisual(t);n("symbol",i)},_normalizedToVisual:{linear:f5,category:ed,piecewise:function(t,r){var n=P3.call(this,r);return n==null&&(n=f5.call(this,t)),n},fixed:Pl}},symbolSize:{applyVisual:gh("symbolSize"),_normalizedToVisual:T3([0,1])}},e}();function Lst(e){var t=e.pieceList;e.hasSpecialVisual=!1,F(t,function(r,n){r.originIndex=n,r.visual!=null&&(e.hasSpecialVisual=!0)})}function Ist(e){var t=e.categories,r=e.categoryMap={},n=e.visual;if(c0(t,function(a,s){r[a]=s}),!ct(n)){var i=[];Ot(n)?c0(n,function(a,s){var l=r[s];i[l!=null?l:Xm]=a}):i[Xm]=n,n=UB(e,i)}for(var o=t.length-1;o>=0;o--)n[o]==null&&(delete r[t[o]],t.pop())}function B2(e,t){var r=e.visual,n=[];Ot(r)?c0(r,function(o){n.push(o)}):r!=null&&n.push(r);var i={color:1,symbol:1};!t&&n.length===1&&!i.hasOwnProperty(e.type)&&(n[1]=n[0]),UB(e,n)}function av(e){return{applyVisual:function(t,r,n){var i=this.mapValueToVisual(t);n("color",e(r("color"),i))},_normalizedToVisual:T3([0,1])}}function f5(e){var t=this.option.visual;return t[Math.round(ma(e,[0,1],[0,t.length-1],!0))]||{}}function gh(e){return function(t,r,n){n(e,this.mapValueToVisual(t))}}function ed(e){var t=this.option.visual;return t[this.option.loop&&e!==Xm?e%t.length:e]}function Pl(){return this.option.visual[0]}function T3(e){return{linear:function(t){return ma(t,e,this.option.visual,!0)},category:ed,piecewise:function(t,r){var n=P3.call(this,r);return n==null&&(n=ma(t,e,this.option.visual,!0)),n},fixed:Pl}}function P3(e){var t=this.option,r=t.pieceList;if(t.hasSpecialVisual){var n=LE.findPieceIndex(e,r),i=r[n];if(i&&i.visual)return i.visual[this.type]}}function UB(e,t){return e.visual=t,e.type==="color"&&(e.parsedVisual=Ct(t,function(r){var n=Qn(r);return n||[0,0,0,1]})),t}var Ost={linear:function(e){return ma(e,this.option.dataExtent,[0,1],!0)},piecewise:function(e){var t=this.option.pieceList,r=LE.findPieceIndex(e,t,!0);if(r!=null)return ma(r,[0,t.length-1],[0,1],!0)},category:function(e){var t=this.option.categories?this.option.categoryMap[e]:e;return t==null?Xm:t},fixed:Gr};function sv(e,t,r){return e?t<=r:t<r}const _n=LE;var h5=xs.prototype,$2=K1.prototype,GB=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}();(function(e){_t(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(GB);function z2(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var Rst=function(e){_t(t,e);function t(r){var n=e.call(this,r)||this;return n.type="ec-line",n}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new GB},t.prototype.buildPath=function(r,n){z2(n)?h5.buildPath.call(this,r,n):$2.buildPath.call(this,r,n)},t.prototype.pointAt=function(r){return z2(this.shape)?h5.pointAt.call(this,r):$2.pointAt.call(this,r)},t.prototype.tangentAt=function(r){var n=this.shape,i=z2(n)?[n.x2-n.x1,n.y2-n.y1]:$2.tangentAt.call(this,r);return MP(i,i)},t}(fe);const Dst=Rst;var V2=["fromSymbol","toSymbol"];function d5(e){return"_"+e+"Type"}function p5(e,t,r){var n=t.getItemVisual(r,e);if(!(!n||n==="none")){var i=t.getItemVisual(r,e+"Size"),o=t.getItemVisual(r,e+"Rotate"),a=t.getItemVisual(r,e+"Offset"),s=t.getItemVisual(r,e+"KeepAspect"),l=yF(i),u=gE(a||0,l),c=Bi(n,-l[0]/2+u[0],-l[1]/2+u[1],l[0],l[1],null,s);return c.__specifiedRotation=o==null||isNaN(o)?void 0:+o*Math.PI/180||0,c.name=e,c}}function Nst(e){var t=new Dst({name:"line",subPixelOptimize:!0});return E3(t.shape,e),t}function E3(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var r=t[2];r?(e.cpx1=r[0],e.cpy1=r[1]):(e.cpx1=NaN,e.cpy1=NaN)}var Fst=function(e){_t(t,e);function t(r,n,i){var o=e.call(this)||this;return o._createLine(r,n,i),o}return t.prototype._createLine=function(r,n,i){var o=r.hostModel,a=r.getItemLayout(n),s=Nst(a);s.shape.percent=0,xo(s,{shape:{percent:1}},o,n),this.add(s),F(V2,function(l){var u=p5(l,r,n);this.add(u),this[d5(l)]=r.getItemVisual(n,l)},this),this._updateCommonStl(r,n,i)},t.prototype.updateData=function(r,n,i){var o=r.hostModel,a=this.childOfName("line"),s=r.getItemLayout(n),l={shape:{}};E3(l.shape,s),dr(a,l,o,n),F(V2,function(u){var c=r.getItemVisual(n,u),f=d5(u);if(this[f]!==c){this.remove(this.childOfName(u));var h=p5(u,r,n);this.add(h)}this[f]=c},this),this._updateCommonStl(r,n,i)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(r,n,i){var o=r.hostModel,a=this.childOfName("line"),s=i&&i.emphasisLineStyle,l=i&&i.blurLineStyle,u=i&&i.selectLineStyle,c=i&&i.labelStatesModels,f=i&&i.emphasisDisabled,h=i&&i.focus,d=i&&i.blurScope;if(!i||r.hasItemOption){var p=r.getItemModel(n),v=p.getModel("emphasis");s=v.getModel("lineStyle").getLineStyle(),l=p.getModel(["blur","lineStyle"]).getLineStyle(),u=p.getModel(["select","lineStyle"]).getLineStyle(),f=v.get("disabled"),h=v.get("focus"),d=v.get("blurScope"),c=pu(p)}var g=r.getItemVisual(n,"style"),m=g.stroke;a.useStyle(g),a.style.fill=null,a.style.strokeNoScale=!0,a.ensureState("emphasis").style=s,a.ensureState("blur").style=l,a.ensureState("select").style=u,F(V2,function(S){var P=this.childOfName(S);if(P){P.setColor(m),P.style.opacity=g.opacity;for(var A=0;A<ii.length;A++){var k=ii[A],C=a.getState(k);if(C){var M=C.style||{},D=P.ensureState(k),B=D.style||(D.style={});M.stroke!=null&&(B[P.__isEmptyBrush?"stroke":"fill"]=M.stroke),M.opacity!=null&&(B.opacity=M.opacity)}}P.markRedraw()}},this);var _=o.getRawValue(n);gf(this,c,{labelDataIndex:n,labelFetcher:{getFormattedLabel:function(S,P){return o.getFormattedLabel(S,P,r.dataType)}},inheritColor:m||"#000",defaultOpacity:g.opacity,defaultText:(_==null?r.getName(n):isFinite(_)?qe(_):_)+""});var y=this.getTextContent();if(y){var w=c.normal;y.__align=y.style.align,y.__verticalAlign=y.style.verticalAlign,y.__position=w.get("position")||"middle";var T=w.get("distance");ct(T)||(T=[T,T]),y.__labelDistance=T}this.setTextConfig({position:null,local:!0,inside:!1}),tu(this,h,d,f)},t.prototype.highlight=function(){Zd(this)},t.prototype.downplay=function(){Kd(this)},t.prototype.updateLayout=function(r,n){this.setLinePoints(r.getItemLayout(n))},t.prototype.setLinePoints=function(r){var n=this.childOfName("line");E3(n.shape,r),n.dirty()},t.prototype.beforeUpdate=function(){var r=this,n=r.childOfName("fromSymbol"),i=r.childOfName("toSymbol"),o=r.getTextContent();if(!n&&!i&&(!o||o.ignore))return;for(var a=1,s=this.parent;s;)s.scaleX&&(a/=s.scaleX),s=s.parent;var l=r.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var u=l.shape.percent,c=l.pointAt(0),f=l.pointAt(u),h=j7([],f,c);MP(h,h);function d(C,M){var D=C.__specifiedRotation;if(D==null){var B=l.tangentAt(M);C.attr("rotation",(M===1?-1:1)*Math.PI/2-Math.atan2(B[1],B[0]))}else C.attr("rotation",D)}if(n&&(n.setPosition(c),d(n,0),n.scaleX=n.scaleY=a*u,n.markRedraw()),i&&(i.setPosition(f),d(i,1),i.scaleX=i.scaleY=a*u,i.markRedraw()),o&&!o.ignore){o.x=o.y=0,o.originX=o.originY=0;var p=void 0,v=void 0,g=o.__labelDistance,m=g[0]*a,_=g[1]*a,y=u/2,w=l.tangentAt(y),T=[w[1],-w[0]],S=l.pointAt(y);T[1]>0&&(T[0]=-T[0],T[1]=-T[1]);var P=w[0]<0?-1:1;if(o.__position!=="start"&&o.__position!=="end"){var A=-Math.atan2(w[1],w[0]);f[0]<c[0]&&(A=Math.PI+A),o.rotation=A}var k=void 0;switch(o.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":k=-_,v="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":k=_,v="top";break;default:k=0,v="middle"}switch(o.__position){case"end":o.x=h[0]*m+f[0],o.y=h[1]*_+f[1],p=h[0]>.8?"left":h[0]<-.8?"right":"center",v=h[1]>.8?"top":h[1]<-.8?"bottom":"middle";break;case"start":o.x=-h[0]*m+c[0],o.y=-h[1]*_+c[1],p=h[0]>.8?"right":h[0]<-.8?"left":"center",v=h[1]>.8?"bottom":h[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":o.x=m*P+c[0],o.y=c[1]+k,p=w[0]<0?"right":"left",o.originX=-m*P,o.originY=-k;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":o.x=S[0],o.y=S[1]+k,p="center",o.originY=-k;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":o.x=-m*P+f[0],o.y=f[1]+k,p=w[0]>=0?"right":"left",o.originX=m*P,o.originY=-k;break}o.scaleX=o.scaleY=a,o.setStyle({verticalAlign:o.__verticalAlign||v,align:o.__align||p})}},t}(De);const Bst=Fst;var $st=function(){function e(t){this.group=new De,this._LineCtor=t||Bst}return e.prototype.updateData=function(t){var r=this;this._progressiveEls=null;var n=this,i=n.group,o=n._lineData;n._lineData=t,o||i.removeAll();var a=v5(t);t.diff(o).add(function(s){r._doAdd(t,s,a)}).update(function(s,l){r._doUpdate(o,t,l,s,a)}).remove(function(s){i.remove(o.getItemGraphicEl(s))}).execute()},e.prototype.updateLayout=function(){var t=this._lineData;!t||t.eachItemGraphicEl(function(r,n){r.updateLayout(t,n)},this)},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=v5(t),this._lineData=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,r){this._progressiveEls=[];function n(s){!s.isGroup&&!zst(s)&&(s.incremental=!0,s.ensureState("emphasis").hoverLayer=!0)}for(var i=t.start;i<t.end;i++){var o=r.getItemLayout(i);if(U2(o)){var a=new this._LineCtor(r,i,this._seriesScope);a.traverse(n),this.group.add(a),r.setItemGraphicEl(i,a),this._progressiveEls.push(a)}}},e.prototype.remove=function(){this.group.removeAll()},e.prototype.eachRendered=function(t){vf(this._progressiveEls||this.group,t)},e.prototype._doAdd=function(t,r,n){var i=t.getItemLayout(r);if(!!U2(i)){var o=new this._LineCtor(t,r,n);t.setItemGraphicEl(r,o),this.group.add(o)}},e.prototype._doUpdate=function(t,r,n,i,o){var a=t.getItemGraphicEl(n);if(!U2(r.getItemLayout(i))){this.group.remove(a);return}a?a.updateData(r,i,o):a=new this._LineCtor(r,i,o),r.setItemGraphicEl(i,a),this.group.add(a)},e}();function zst(e){return e.animators&&e.animators.length>0}function v5(e){var t=e.hostModel,r=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:r.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:r.get("disabled"),blurScope:r.get("blurScope"),focus:r.get("focus"),labelStatesModels:pu(t)}}function g5(e){return isNaN(e[0])||isNaN(e[1])}function U2(e){return e&&!g5(e[0])&&!g5(e[1])}const Vst=$st;function Ust(e,t,r,n,i,o){e=e||0;var a=r[1]-r[0];if(i!=null&&(i=Xu(i,[0,a])),o!=null&&(o=Math.max(o,i!=null?i:0)),n==="all"){var s=Math.abs(t[1]-t[0]);s=Xu(s,[0,a]),i=o=Xu(s,[i,o]),n=0}t[0]=Xu(t[0],r),t[1]=Xu(t[1],r);var l=G2(t,n);t[n]+=e;var u=i||0,c=r.slice();l.sign<0?c[0]+=u:c[1]-=u,t[n]=Xu(t[n],c);var f;return f=G2(t,n),i!=null&&(f.sign!==l.sign||f.span<i)&&(t[1-n]=t[n]+l.sign*i),f=G2(t,n),o!=null&&f.span>o&&(t[1-n]=t[n]+f.sign*o),t}function G2(e,t){var r=e[t]-e[1-t];return{span:Math.abs(r),sign:r>0?-1:r<0?1:t?-1:1}}function Xu(e,t){return Math.min(t[1]!=null?t[1]:1/0,Math.max(t[0]!=null?t[0]:-1/0,e))}var m5={color:"fill",borderColor:"stroke"},Gst={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},ha=Oe(),jst=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},t.prototype.getInitialData=function(r,n){return D0(null,this)},t.prototype.getDataParams=function(r,n,i){var o=e.prototype.getDataParams.call(this,r,n);return i&&(o.info=ha(i).info),o},t.type="series.custom",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},t}(Lo);const Wst=jst;function Hst(e,t){return t=t||[0,0],Ct(["x","y"],function(r,n){var i=this.getAxis(r),o=t[n],a=e[n]/2;return i.type==="category"?i.getBandWidth():Math.abs(i.dataToCoord(o-a)-i.dataToCoord(o+a))},this)}function Xst(e){var t=e.master.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(r){return e.dataToPoint(r)},size:Vt(Hst,e)}}}function Yst(e,t){return t=t||[0,0],Ct([0,1],function(r){var n=t[r],i=e[r]/2,o=[],a=[];return o[r]=n-i,a[r]=n+i,o[1-r]=a[1-r]=t[1-r],Math.abs(this.dataToPoint(o)[r]-this.dataToPoint(a)[r])},this)}function qst(e){var t=e.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:e.getZoom()},api:{coord:function(r){return e.dataToPoint(r)},size:Vt(Yst,e)}}}function Zst(e,t){var r=this.getAxis(),n=t instanceof Array?t[0]:t,i=(e instanceof Array?e[0]:e)/2;return r.type==="category"?r.getBandWidth():Math.abs(r.dataToCoord(n-i)-r.dataToCoord(n+i))}function Kst(e){var t=e.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(r){return e.dataToPoint(r)},size:Vt(Zst,e)}}}function Jst(e,t){return t=t||[0,0],Ct(["Radius","Angle"],function(r,n){var i="get"+r+"Axis",o=this[i](),a=t[n],s=e[n]/2,l=o.type==="category"?o.getBandWidth():Math.abs(o.dataToCoord(a-s)-o.dataToCoord(a+s));return r==="Angle"&&(l=l*Math.PI/180),l},this)}function Qst(e){var t=e.getRadiusAxis(),r=e.getAngleAxis(),n=t.getExtent();return n[0]>n[1]&&n.reverse(),{coordSys:{type:"polar",cx:e.cx,cy:e.cy,r:n[1],r0:n[0]},api:{coord:function(i){var o=t.dataToRadius(i[0]),a=r.dataToAngle(i[1]),s=e.coordToPoint([o,a]);return s.push(o,a*Math.PI/180),s},size:Vt(Jst,e)}}}function tlt(e){var t=e.getRect(),r=e.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:e.getCellWidth(),cellHeight:e.getCellHeight(),rangeInfo:{start:r.start,end:r.end,weeks:r.weeks,dayCount:r.allDay}},api:{coord:function(n,i){return e.dataToPoint(n,i)}}}}function elt(e,t,r,n){return e&&(e.legacy||e.legacy!==!1&&!r&&!n&&t!=="tspan"&&(t==="text"||dt(e,"text")))}function rlt(e,t,r){var n=e,i,o,a;if(t==="text")a=n;else{a={},dt(n,"text")&&(a.text=n.text),dt(n,"rich")&&(a.rich=n.rich),dt(n,"textFill")&&(a.fill=n.textFill),dt(n,"textStroke")&&(a.stroke=n.textStroke),dt(n,"fontFamily")&&(a.fontFamily=n.fontFamily),dt(n,"fontSize")&&(a.fontSize=n.fontSize),dt(n,"fontStyle")&&(a.fontStyle=n.fontStyle),dt(n,"fontWeight")&&(a.fontWeight=n.fontWeight),o={type:"text",style:a,silent:!0},i={};var s=dt(n,"textPosition");r?i.position=s?n.textPosition:"inside":s&&(i.position=n.textPosition),dt(n,"textPosition")&&(i.position=n.textPosition),dt(n,"textOffset")&&(i.offset=n.textOffset),dt(n,"textRotation")&&(i.rotation=n.textRotation),dt(n,"textDistance")&&(i.distance=n.textDistance)}return _5(a,e),F(a.rich,function(l){_5(l,l)}),{textConfig:i,textContent:o}}function _5(e,t){!t||(t.font=t.textFont||t.font,dt(t,"textStrokeWidth")&&(e.lineWidth=t.textStrokeWidth),dt(t,"textAlign")&&(e.align=t.textAlign),dt(t,"textVerticalAlign")&&(e.verticalAlign=t.textVerticalAlign),dt(t,"textLineHeight")&&(e.lineHeight=t.textLineHeight),dt(t,"textWidth")&&(e.width=t.textWidth),dt(t,"textHeight")&&(e.height=t.textHeight),dt(t,"textBackgroundColor")&&(e.backgroundColor=t.textBackgroundColor),dt(t,"textPadding")&&(e.padding=t.textPadding),dt(t,"textBorderColor")&&(e.borderColor=t.textBorderColor),dt(t,"textBorderWidth")&&(e.borderWidth=t.textBorderWidth),dt(t,"textBorderRadius")&&(e.borderRadius=t.textBorderRadius),dt(t,"textBoxShadowColor")&&(e.shadowColor=t.textBoxShadowColor),dt(t,"textBoxShadowBlur")&&(e.shadowBlur=t.textBoxShadowBlur),dt(t,"textBoxShadowOffsetX")&&(e.shadowOffsetX=t.textBoxShadowOffsetX),dt(t,"textBoxShadowOffsetY")&&(e.shadowOffsetY=t.textBoxShadowOffsetY))}function y5(e,t,r){var n=e;n.textPosition=n.textPosition||r.position||"inside",r.offset!=null&&(n.textOffset=r.offset),r.rotation!=null&&(n.textRotation=r.rotation),r.distance!=null&&(n.textDistance=r.distance);var i=n.textPosition.indexOf("inside")>=0,o=e.fill||"#000";b5(n,t);var a=n.textFill==null;return i?a&&(n.textFill=r.insideFill||"#fff",!n.textStroke&&r.insideStroke&&(n.textStroke=r.insideStroke),!n.textStroke&&(n.textStroke=o),n.textStrokeWidth==null&&(n.textStrokeWidth=2)):(a&&(n.textFill=e.fill||r.outsideFill||"#000"),!n.textStroke&&r.outsideStroke&&(n.textStroke=r.outsideStroke)),n.text=t.text,n.rich=t.rich,F(t.rich,function(s){b5(s,s)}),n}function b5(e,t){!t||(dt(t,"fill")&&(e.textFill=t.fill),dt(t,"stroke")&&(e.textStroke=t.fill),dt(t,"lineWidth")&&(e.textStrokeWidth=t.lineWidth),dt(t,"font")&&(e.font=t.font),dt(t,"fontStyle")&&(e.fontStyle=t.fontStyle),dt(t,"fontWeight")&&(e.fontWeight=t.fontWeight),dt(t,"fontSize")&&(e.fontSize=t.fontSize),dt(t,"fontFamily")&&(e.fontFamily=t.fontFamily),dt(t,"align")&&(e.textAlign=t.align),dt(t,"verticalAlign")&&(e.textVerticalAlign=t.verticalAlign),dt(t,"lineHeight")&&(e.textLineHeight=t.lineHeight),dt(t,"width")&&(e.textWidth=t.width),dt(t,"height")&&(e.textHeight=t.height),dt(t,"backgroundColor")&&(e.textBackgroundColor=t.backgroundColor),dt(t,"padding")&&(e.textPadding=t.padding),dt(t,"borderColor")&&(e.textBorderColor=t.borderColor),dt(t,"borderWidth")&&(e.textBorderWidth=t.borderWidth),dt(t,"borderRadius")&&(e.textBorderRadius=t.borderRadius),dt(t,"shadowColor")&&(e.textBoxShadowColor=t.shadowColor),dt(t,"shadowBlur")&&(e.textBoxShadowBlur=t.shadowBlur),dt(t,"shadowOffsetX")&&(e.textBoxShadowOffsetX=t.shadowOffsetX),dt(t,"shadowOffsetY")&&(e.textBoxShadowOffsetY=t.shadowOffsetY),dt(t,"textShadowColor")&&(e.textShadowColor=t.textShadowColor),dt(t,"textShadowBlur")&&(e.textShadowBlur=t.textShadowBlur),dt(t,"textShadowOffsetX")&&(e.textShadowOffsetX=t.textShadowOffsetX),dt(t,"textShadowOffsetY")&&(e.textShadowOffsetY=t.textShadowOffsetY))}var jB={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},w5=ge(jB);hu(Mo,function(e,t){return e[t]=1,e},{});Mo.join(", ");var Ym=["","style","shape","extra"],Jc=Oe();function IE(e,t,r,n,i){var o=e+"Animation",a=KP(e,n,i)||{},s=Jc(t).userDuring;return a.duration>0&&(a.during=s?Vt(ult,{el:t,userDuring:s}):null,a.setToFinal=!0,a.scope=e),at(a,r[o]),a}function nlt(e,t,r,n){n=n||{};var i=n.dataIndex,o=n.isInit,a=n.clearStyle,s=r.isAnimationEnabled(),l=Jc(e),u=t.style;l.userDuring=t.during;var c={},f={};if(flt(e,t,f),T5("shape",t,f),T5("extra",t,f),!o&&s&&(clt(e,t,c),S5("shape",e,t,c),S5("extra",e,t,c),hlt(e,t,u,c)),f.style=u,olt(e,f,a),slt(e,t),s)if(o){var h={};F(Ym,function(p){var v=p?t[p]:t;v&&v.enterFrom&&(p&&(h[p]=h[p]||{}),at(p?h[p]:h,v.enterFrom))});var d=IE("enter",e,t,r,i);d.duration>0&&e.animateFrom(h,d)}else alt(e,t,i||0,r,c);ilt(e,t),u?e.dirty():e.markRedraw()}function ilt(e,t){for(var r=Jc(e).leaveToProps,n=0;n<Ym.length;n++){var i=Ym[n],o=i?t[i]:t;o&&o.leaveTo&&(r||(r=Jc(e).leaveToProps={}),i&&(r[i]=r[i]||{}),at(i?r[i]:r,o.leaveTo))}}function OE(e,t,r,n){if(e){var i=e.parent,o=Jc(e).leaveToProps;if(o){var a=IE("update",e,t,r,0);a.done=function(){i.remove(e),n&&n()},e.animateTo(o,a)}else i.remove(e),n&&n()}}function $c(e){return e==="all"}function olt(e,t,r){var n=t.style;if(!e.isGroup&&n){if(r){e.useStyle({});for(var i=e.animators,o=0;o<i.length;o++){var a=i[o];a.targetName==="style"&&a.changeTarget(e.style)}}e.setStyle(n)}t&&(t.style=null,t&&e.attr(t),t.style=n)}function alt(e,t,r,n,i){if(i){var o=IE("update",e,t,n,r);o.duration>0&&e.animateFrom(i,o)}}function slt(e,t){dt(t,"silent")&&(e.silent=t.silent),dt(t,"ignore")&&(e.ignore=t.ignore),e instanceof du&&dt(t,"invisible")&&(e.invisible=t.invisible),e instanceof fe&&dt(t,"autoBatch")&&(e.autoBatch=t.autoBatch)}var po={},llt={setTransform:function(e,t){return po.el[e]=t,this},getTransform:function(e){return po.el[e]},setShape:function(e,t){var r=po.el,n=r.shape||(r.shape={});return n[e]=t,r.dirtyShape&&r.dirtyShape(),this},getShape:function(e){var t=po.el.shape;if(t)return t[e]},setStyle:function(e,t){var r=po.el,n=r.style;return n&&(n[e]=t,r.dirtyStyle&&r.dirtyStyle()),this},getStyle:function(e){var t=po.el.style;if(t)return t[e]},setExtra:function(e,t){var r=po.el.extra||(po.el.extra={});return r[e]=t,this},getExtra:function(e){var t=po.el.extra;if(t)return t[e]}};function ult(){var e=this,t=e.el;if(!!t){var r=Jc(t).userDuring,n=e.userDuring;if(r!==n){e.el=e.userDuring=null;return}po.el=t,n(llt)}}function S5(e,t,r,n){var i=r[e];if(!!i){var o=t[e],a;if(o){var s=r.transition,l=i.transition;if(l)if(!a&&(a=n[e]={}),$c(l))at(a,o);else for(var u=Ze(l),c=0;c<u.length;c++){var f=u[c],h=o[f];a[f]=h}else if($c(s)||ue(s,e)>=0){!a&&(a=n[e]={});for(var d=ge(o),c=0;c<d.length;c++){var f=d[c],h=o[f];dlt(i[f],h)&&(a[f]=h)}}}}}function T5(e,t,r){var n=t[e];if(!!n)for(var i=r[e]={},o=ge(n),a=0;a<o.length;a++){var s=o[a];i[s]=_d(n[s])}}function clt(e,t,r){for(var n=t.transition,i=$c(n)?Mo:Ze(n||[]),o=0;o<i.length;o++){var a=i[o];if(!(a==="style"||a==="shape"||a==="extra")){var s=e[a];r[a]=s}}}function flt(e,t,r){for(var n=0;n<w5.length;n++){var i=w5[n],o=jB[i],a=t[i];a&&(r[o[0]]=a[0],r[o[1]]=a[1])}for(var n=0;n<Mo.length;n++){var s=Mo[n];t[s]!=null&&(r[s]=t[s])}}function hlt(e,t,r,n){if(!!r){var i=e.style,o;if(i){var a=r.transition,s=t.transition;if(a&&!$c(a)){var l=Ze(a);!o&&(o=n.style={});for(var u=0;u<l.length;u++){var c=l[u],f=i[c];o[c]=f}}else if(e.getAnimationStyleProps&&($c(s)||$c(a)||ue(s,"style")>=0)){var h=e.getAnimationStyleProps(),d=h?h.style:null;if(d){!o&&(o=n.style={});for(var p=ge(r),u=0;u<p.length;u++){var c=p[u];if(d[c]){var f=i[c];o[c]=f}}}}}}}function dlt(e,t){return Wr(e)?e!==t:e!=null&&isFinite(e)}var WB=Oe(),plt=["percent","easing","shape","style","extra"];function vlt(e){e.stopAnimation("keyframe"),e.attr(WB(e))}function HB(e,t,r){if(!(!r.isAnimationEnabled()||!t)){if(ct(t)){F(t,function(s){HB(e,s,r)});return}var n=t.keyframes,i=t.duration;if(r&&i==null){var o=KP("enter",r,0);i=o&&o.duration}if(!(!n||!i)){var a=WB(e);F(Ym,function(s){if(!(s&&!e[s])){var l;n.sort(function(u,c){return u.percent-c.percent}),F(n,function(u){var c=e.animators,f=s?u[s]:u;if(!!f){var h=ge(f);if(s||(h=wr(h,function(v){return ue(plt,v)<0})),!!h.length){l||(l=e.animate(s,t.loop,!0),l.scope="keyframe");for(var d=0;d<c.length;d++)c[d]!==l&&c[d].targetName===l.targetName&&c[d].stopTracks(h);s&&(a[s]=a[s]||{});var p=s?a[s]:a;F(h,function(v){p[v]=((s?e[s]:e)||{})[v]}),l.whenWithKeys(i*u.percent,f,h,u.easing)}}}),l&&l.delay(t.delay||0).duration(i).start(t.easing)}})}}}var da="emphasis",gs="normal",RE="blur",DE="select",Os=[gs,da,RE,DE],j2={normal:["itemStyle"],emphasis:[da,"itemStyle"],blur:[RE,"itemStyle"],select:[DE,"itemStyle"]},W2={normal:["label"],emphasis:[da,"label"],blur:[RE,"label"],select:[DE,"label"]},glt=["x","y"],mlt="e\0\0",zn={normal:{},emphasis:{},blur:{},select:{}},_lt={cartesian2d:Xst,geo:qst,single:Kst,polar:Qst,calendar:tlt};function k3(e){return e instanceof fe}function A3(e){return e instanceof du}function ylt(e,t){t.copyTransform(e),A3(t)&&A3(e)&&(t.setStyle(e.style),t.z=e.z,t.z2=e.z2,t.zlevel=e.zlevel,t.invisible=e.invisible,t.ignore=e.ignore,k3(t)&&k3(e)&&t.setShape(e.shape))}var blt=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i,o){this._progressiveEls=null;var a=this._data,s=r.getData(),l=this.group,u=P5(r,s,n,i);a||l.removeAll(),s.diff(a).add(function(f){H2(i,null,f,u(f,o),r,l,s)}).remove(function(f){var h=a.getItemGraphicEl(f);h&&OE(h,ha(h).option,r)}).update(function(f,h){var d=a.getItemGraphicEl(h);H2(i,d,f,u(f,o),r,l,s)}).execute();var c=r.get("clip",!0)?EB(r.coordinateSystem,!1,r):null;c?l.setClipPath(c):l.removeClipPath(),this._data=s},t.prototype.incrementalPrepareRender=function(r,n,i){this.group.removeAll(),this._data=null},t.prototype.incrementalRender=function(r,n,i,o,a){var s=n.getData(),l=P5(n,s,i,o),u=this._progressiveEls=[];function c(d){d.isGroup||(d.incremental=!0,d.ensureState("emphasis").hoverLayer=!0)}for(var f=r.start;f<r.end;f++){var h=H2(null,null,f,l(f,a),n,this.group,s);h&&(h.traverse(c),u.push(h))}},t.prototype.eachRendered=function(r){vf(this._progressiveEls||this.group,r)},t.prototype.filterForExposedEvent=function(r,n,i,o){var a=n.element;if(a==null||i.name===a)return!0;for(;(i=i.__hostTarget||i.parent)&&i!==this.group;)if(i.name===a)return!0;return!1},t.type="custom",t}(ei);const wlt=blt;function NE(e){var t=e.type,r;if(t==="path"){var n=e.shape,i=n.width!=null&&n.height!=null?{x:n.x||0,y:n.y||0,width:n.width,height:n.height}:null,o=qB(n);r=J1(o,null,i,n.layout||"center"),ha(r).customPathData=o}else if(t==="image")r=new ka({}),ha(r).customImagePath=e.style.image;else if(t==="text")r=new Je({});else if(t==="group")r=new De;else{if(t==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var a=uN(t);if(!a){var s="";ne(s)}r=new a}return ha(r).customGraphicType=t,r.name=e.name,r.z2EmphasisLift=1,r.z2SelectLift=1,r}function FE(e,t,r,n,i,o,a){vlt(t);var s=i&&i.normal.cfg;s&&t.setTextConfig(s),n&&n.transition==null&&(n.transition=glt);var l=n&&n.style;if(l){if(t.type==="text"){var u=l;dt(u,"textFill")&&(u.fill=u.textFill),dt(u,"textStroke")&&(u.stroke=u.textStroke)}var c=void 0,f=k3(t)?l.decal:null;e&&f&&(f.dirty=!0,c=jm(f,e)),l.__decalPattern=c}if(A3(t)&&l){var c=l.__decalPattern;c&&(l.decal=c)}nlt(t,n,o,{dataIndex:r,isInit:a,clearStyle:!0}),HB(t,n.keyframeAnimation,o)}function XB(e,t,r,n,i){var o=t.isGroup?null:t,a=i&&i[e].cfg;if(o){var s=o.ensureState(e);if(n===!1){var l=o.getState(e);l&&(l.style=null)}else s.style=n||null;a&&(s.textConfig=a),jP(o)}}function Slt(e,t,r){if(!e.isGroup){var n=e,i=r.currentZ,o=r.currentZLevel;n.z=i,n.zlevel=o;var a=t.z2;a!=null&&(n.z2=a||0);for(var s=0;s<Os.length;s++)Tlt(n,t,Os[s])}}function Tlt(e,t,r){var n=r===gs,i=n?t:qm(t,r),o=i?i.z2:null,a;o!=null&&(a=n?e:e.ensureState(r),a.z2=o||0)}function P5(e,t,r,n){var i=e.get("renderItem"),o=e.coordinateSystem,a={};o&&(a=o.prepareCustoms?o.prepareCustoms(o):_lt[o.type](o));for(var s=te({getWidth:n.getWidth,getHeight:n.getHeight,getZr:n.getZr,getDevicePixelRatio:n.getDevicePixelRatio,value:w,style:S,ordinalRawValue:T,styleEmphasis:P,visual:C,barLayout:M,currentSeriesIndices:D,font:B},a.api||{}),l={context:{},seriesId:e.id,seriesName:e.name,seriesIndex:e.seriesIndex,coordSys:a.coordSys,dataInsideLength:t.count(),encode:Plt(e.getData())},u,c,f={},h={},d={},p={},v=0;v<Os.length;v++){var g=Os[v];d[g]=e.getModel(j2[g]),p[g]=e.getModel(W2[g])}function m(V){return V===u?c||(c=t.getItemModel(V)):t.getItemModel(V)}function _(V,N){return t.hasItemOption?V===u?f[N]||(f[N]=m(V).getModel(j2[N])):m(V).getModel(j2[N]):d[N]}function y(V,N){return t.hasItemOption?V===u?h[N]||(h[N]=m(V).getModel(W2[N])):m(V).getModel(W2[N]):p[N]}return function(V,N){return u=V,c=null,f={},h={},i&&i(te({dataIndexInside:V,dataIndex:t.getRawIndex(V),actionType:N?N.type:null},l),s)};function w(V,N){return N==null&&(N=u),t.getStore().get(t.getDimensionIndex(V||0),N)}function T(V,N){N==null&&(N=u),V=V||0;var j=t.getDimensionInfo(V);if(!j){var Z=t.getDimensionIndex(V);return Z>=0?t.getStore().get(Z,N):void 0}var q=t.get(j.name,N),et=j&&j.ordinalMeta;return et?et.categories[q]:q}function S(V,N){N==null&&(N=u);var j=t.getItemVisual(N,"style"),Z=j&&j.fill,q=j&&j.opacity,et=_(N,gs).getItemStyle();Z!=null&&(et.fill=Z),q!=null&&(et.opacity=q);var Pt={inheritColor:Et(Z)?Z:"#000"},Rt=y(N,gs),wt=mn(Rt,null,Pt,!1,!0);wt.text=Rt.getShallow("show")?qt(e.getFormattedLabel(N,gs),l0(t,N)):null;var St=Bm(Rt,Pt,!1);return k(V,et),et=y5(et,wt,St),V&&A(et,V),et.legacy=!0,et}function P(V,N){N==null&&(N=u);var j=_(N,da).getItemStyle(),Z=y(N,da),q=mn(Z,null,null,!0,!0);q.text=Z.getShallow("show")?gd(e.getFormattedLabel(N,da),e.getFormattedLabel(N,gs),l0(t,N)):null;var et=Bm(Z,null,!0);return k(V,j),j=y5(j,q,et),V&&A(j,V),j.legacy=!0,j}function A(V,N){for(var j in N)dt(N,j)&&(V[j]=N[j])}function k(V,N){V&&(V.textFill&&(N.textFill=V.textFill),V.textPosition&&(N.textPosition=V.textPosition))}function C(V,N){if(N==null&&(N=u),dt(m5,V)){var j=t.getItemVisual(N,"style");return j?j[m5[V]]:null}if(dt(Gst,V))return t.getItemVisual(N,V)}function M(V){if(o.type==="cartesian2d"){var N=o.getBaseAxis();return dit(te({axis:N},V))}}function D(){return r.getCurrentSeriesIndices()}function B(V){return gN(V,r)}}function Plt(e){var t={};return F(e.dimensions,function(r){var n=e.getDimensionInfo(r);if(!n.isExtraCoord){var i=n.coordDim,o=t[i]=t[i]||[];o[n.coordDimIndex]=e.getDimensionIndex(r)}}),t}function H2(e,t,r,n,i,o,a){if(!n){o.remove(t);return}var s=BE(e,t,r,n,i,o);return s&&a.setItemGraphicEl(r,s),s&&tu(s,n.focus,n.blurScope,n.emphasisDisabled),s}function BE(e,t,r,n,i,o){var a=-1,s=t;t&&YB(t,n,i)&&(a=ue(o.childrenRef(),t),t=null);var l=!t,u=t;u?u.clearStates():(u=NE(n),s&&ylt(s,u)),n.morph===!1?u.disableMorphing=!0:u.disableMorphing&&(u.disableMorphing=!1),zn.normal.cfg=zn.normal.conOpt=zn.emphasis.cfg=zn.emphasis.conOpt=zn.blur.cfg=zn.blur.conOpt=zn.select.cfg=zn.select.conOpt=null,zn.isLegacy=!1,klt(u,r,n,i,l,zn),Elt(u,r,n,i,l),FE(e,u,r,n,zn,i,l),dt(n,"info")&&(ha(u).info=n.info);for(var c=0;c<Os.length;c++){var f=Os[c];if(f!==gs){var h=qm(n,f),d=$E(n,h,f);XB(f,u,h,d,zn)}}return Slt(u,n,i),n.type==="group"&&Alt(e,u,r,n,i),a>=0?o.replaceAt(u,a):o.add(u),u}function YB(e,t,r){var n=ha(e),i=t.type,o=t.shape,a=t.style;return r.isUniversalTransitionEnabled()||i!=null&&i!==n.customGraphicType||i==="path"&&Llt(o)&&qB(o)!==n.customPathData||i==="image"&&dt(a,"image")&&a.image!==n.customImagePath}function Elt(e,t,r,n,i){var o=r.clipPath;if(o===!1)e&&e.getClipPath()&&e.removeClipPath();else if(o){var a=e.getClipPath();a&&YB(a,o,n)&&(a=null),a||(a=NE(o),e.setClipPath(a)),FE(null,a,t,o,null,n,i)}}function klt(e,t,r,n,i,o){if(!e.isGroup){E5(r,null,o),E5(r,da,o);var a=o.normal.conOpt,s=o.emphasis.conOpt,l=o.blur.conOpt,u=o.select.conOpt;if(a!=null||s!=null||u!=null||l!=null){var c=e.getTextContent();if(a===!1)c&&e.removeTextContent();else{a=o.normal.conOpt=a||{type:"text"},c?c.clearStates():(c=NE(a),e.setTextContent(c)),FE(null,c,t,a,null,n,i);for(var f=a&&a.style,h=0;h<Os.length;h++){var d=Os[h];if(d!==gs){var p=o[d].conOpt;XB(d,c,p,$E(a,p,d),null)}}f?c.dirty():c.markRedraw()}}}}function E5(e,t,r){var n=t?qm(e,t):e,i=t?$E(e,n,da):e.style,o=e.type,a=n?n.textConfig:null,s=e.textContent,l=s?t?qm(s,t):s:null;if(i&&(r.isLegacy||elt(i,o,!!a,!!l))){r.isLegacy=!0;var u=rlt(i,o,!t);!a&&u.textConfig&&(a=u.textConfig),!l&&u.textContent&&(l=u.textContent)}if(!t&&l){var c=l;!c.type&&(c.type="text")}var f=t?r[t]:r.normal;f.cfg=a,f.conOpt=l}function qm(e,t){return t?e?e[t]:null:e}function $E(e,t,r){var n=t&&t.style;return n==null&&r===da&&e&&(n=e.styleEmphasis),n}function Alt(e,t,r,n,i){var o=n.children,a=o?o.length:0,s=n.$mergeChildren,l=s==="byName"||n.diffChildrenByName,u=s===!1;if(!(!a&&!l&&!u)){if(l){Mlt({api:e,oldChildren:t.children()||[],newChildren:o||[],dataIndex:r,seriesModel:i,group:t});return}u&&t.removeAll();for(var c=0;c<a;c++){var f=o[c],h=t.childAt(c);f?(f.ignore==null&&(f.ignore=!1),BE(e,h,r,f,i,t)):h.ignore=!0}for(var d=t.childCount()-1;d>=c;d--){var p=t.childAt(d);Clt(t,p,i)}}}function Clt(e,t,r){t&&OE(t,ha(e).option,r)}function Mlt(e){new GF(e.oldChildren,e.newChildren,k5,k5,e).add(A5).update(A5).remove(xlt).execute()}function k5(e,t){var r=e&&e.name;return r!=null?r:mlt+t}function A5(e,t){var r=this.context,n=e!=null?r.newChildren[e]:null,i=t!=null?r.oldChildren[t]:null;BE(r.api,i,r.dataIndex,n,r.seriesModel,r.group)}function xlt(e){var t=this.context,r=t.oldChildren[e];r&&OE(r,ha(r).option,t.seriesModel)}function qB(e){return e&&(e.pathData||e.d)}function Llt(e){return e&&(dt(e,"pathData")||dt(e,"d"))}function Ilt(e){e.registerChartView(wlt),e.registerSeriesModel(Wst)}var Cl=Oe(),C5=zt,X2=Vt,Olt=function(){function e(){this._dragging=!1,this.animationThreshold=15}return e.prototype.render=function(t,r,n,i){var o=r.get("value"),a=r.get("status");if(this._axisModel=t,this._axisPointerModel=r,this._api=n,!(!i&&this._lastValue===o&&this._lastStatus===a)){this._lastValue=o,this._lastStatus=a;var s=this._group,l=this._handle;if(!a||a==="hide"){s&&s.hide(),l&&l.hide();return}s&&s.show(),l&&l.show();var u={};this.makeElOption(u,o,t,r,n);var c=u.graphicKey;c!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=c;var f=this._moveAnimation=this.determineAnimation(t,r);if(!s)s=this._group=new De,this.createPointerEl(s,u,t,r),this.createLabelEl(s,u,t,r),n.getZr().add(s);else{var h=be(M5,r,f);this.updatePointerEl(s,u,h),this.updateLabelEl(s,u,h,r)}L5(s,r,!0),this._renderHandle(o)}},e.prototype.remove=function(t){this.clear(t)},e.prototype.dispose=function(t){this.clear(t)},e.prototype.determineAnimation=function(t,r){var n=r.get("animation"),i=t.axis,o=i.type==="category",a=r.get("snap");if(!a&&!o)return!1;if(n==="auto"||n==null){var s=this.animationThreshold;if(o&&i.getBandWidth()>s)return!0;if(a){var l=ME(t).seriesDataCount,u=i.getExtent();return Math.abs(u[0]-u[1])/l>s}return!1}return n===!0},e.prototype.makeElOption=function(t,r,n,i,o){},e.prototype.createPointerEl=function(t,r,n,i){var o=r.pointer;if(o){var a=Cl(t).pointerEl=new ctt[o.type](C5(r.pointer));t.add(a)}},e.prototype.createLabelEl=function(t,r,n,i){if(r.label){var o=Cl(t).labelEl=new Je(C5(r.label));t.add(o),x5(o,i)}},e.prototype.updatePointerEl=function(t,r,n){var i=Cl(t).pointerEl;i&&r.pointer&&(i.setStyle(r.pointer.style),n(i,{shape:r.pointer.shape}))},e.prototype.updateLabelEl=function(t,r,n,i){var o=Cl(t).labelEl;o&&(o.setStyle(r.label.style),n(o,{x:r.label.x,y:r.label.y}),x5(o,i))},e.prototype._renderHandle=function(t){if(!(this._dragging||!this.updateHandleTransform)){var r=this._axisPointerModel,n=this._api.getZr(),i=this._handle,o=r.getModel("handle"),a=r.get("status");if(!o.get("show")||!a||a==="hide"){i&&n.remove(i),this._handle=null;return}var s;this._handle||(s=!0,i=this._handle=QP(o.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(u){Kl(u.event)},onmousedown:X2(this._onHandleDragMove,this,0,0),drift:X2(this._onHandleDragMove,this),ondragend:X2(this._onHandleDragEnd,this)}),n.add(i)),L5(i,r,!1),i.setStyle(o.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=o.get("size");ct(l)||(l=[l,l]),i.scaleX=l[0]/2,i.scaleY=l[1]/2,cF(this,"_doDispatchAxisPointer",o.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,s)}},e.prototype._moveHandleToValue=function(t,r){M5(this._axisPointerModel,!r&&this._moveAnimation,this._handle,Y2(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},e.prototype._onHandleDragMove=function(t,r){var n=this._handle;if(!!n){this._dragging=!0;var i=this.updateHandleTransform(Y2(n),[t,r],this._axisModel,this._axisPointerModel);this._payloadInfo=i,n.stopAnimation(),n.attr(Y2(i)),Cl(n).lastProp=null,this._doDispatchAxisPointer()}},e.prototype._doDispatchAxisPointer=function(){var t=this._handle;if(!!t){var r=this._payloadInfo,n=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:r.cursorPoint[0],y:r.cursorPoint[1],tooltipOption:r.tooltipOption,axesInfo:[{axisDim:n.axis.dim,axisIndex:n.componentIndex}]})}},e.prototype._onHandleDragEnd=function(){this._dragging=!1;var t=this._handle;if(!!t){var r=this._axisPointerModel.get("value");this._moveHandleToValue(r),this._api.dispatchAction({type:"hideTip"})}},e.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var r=t.getZr(),n=this._group,i=this._handle;r&&n&&(this._lastGraphicKey=null,n&&r.remove(n),i&&r.remove(i),this._group=null,this._handle=null,this._payloadInfo=null),o3(this,"_doDispatchAxisPointer")},e.prototype.doClear=function(){},e.prototype.buildLabel=function(t,r,n){return n=n||0,{x:t[n],y:t[1-n],width:r[n],height:r[1-n]}},e}();function M5(e,t,r,n){ZB(Cl(r).lastProp,n)||(Cl(r).lastProp=n,t?dr(r,n,e):(r.stopAnimation(),r.attr(n)))}function ZB(e,t){if(Ot(e)&&Ot(t)){var r=!0;return F(t,function(n,i){r=r&&ZB(e[i],n)}),!!r}else return e===t}function x5(e,t){e[t.get(["label","show"])?"show":"hide"]()}function Y2(e){return{x:e.x||0,y:e.y||0,rotation:e.rotation||0}}function L5(e,t,r){var n=t.get("z"),i=t.get("zlevel");e&&e.traverse(function(o){o.type!=="group"&&(n!=null&&(o.z=n),i!=null&&(o.zlevel=i),o.silent=r)})}const Rlt=Olt;function Dlt(e){var t=e.get("type"),r=e.getModel(t+"Style"),n;return t==="line"?(n=r.getLineStyle(),n.fill=null):t==="shadow"&&(n=r.getAreaStyle(),n.stroke=null),n}function Nlt(e,t,r,n,i){var o=r.get("value"),a=KB(o,t.axis,t.ecModel,r.get("seriesDataIndices"),{precision:r.get(["label","precision"]),formatter:r.get(["label","formatter"])}),s=r.getModel("label"),l=R0(s.get("padding")||0),u=s.getFont(),c=RP(a,u),f=i.position,h=c.width+l[1]+l[3],d=c.height+l[0]+l[2],p=i.align;p==="right"&&(f[0]-=h),p==="center"&&(f[0]-=h/2);var v=i.verticalAlign;v==="bottom"&&(f[1]-=d),v==="middle"&&(f[1]-=d/2),Flt(f,h,d,n);var g=s.get("backgroundColor");(!g||g==="auto")&&(g=t.get(["axisLine","lineStyle","color"])),e.label={x:f[0],y:f[1],style:mn(s,{text:a,font:u,fill:s.getTextColor(),padding:l,backgroundColor:g}),z2:10}}function Flt(e,t,r,n){var i=n.getWidth(),o=n.getHeight();e[0]=Math.min(e[0]+t,i)-t,e[1]=Math.min(e[1]+r,o)-r,e[0]=Math.max(e[0],0),e[1]=Math.max(e[1],0)}function KB(e,t,r,n,i){e=t.scale.parse(e);var o=t.scale.getLabel({value:e},{precision:i.precision}),a=i.formatter;if(a){var s={value:EE(t,{value:e}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};F(n,function(l){var u=r.getSeriesByIndex(l.seriesIndex),c=l.dataIndexInside,f=u&&u.getDataParams(c);f&&s.seriesData.push(f)}),Et(a)?o=a.replace("{value}",o):Ut(a)&&(o=a(s))}return o}function JB(e,t,r){var n=qc();return IP(n,n,r.rotation),kS(n,n,r.position),Dc([e.dataToCoord(t),(r.labelOffset||0)+(r.labelDirection||1)*(r.labelMargin||0)],n)}function Blt(e,t,r,n,i,o){var a=RB.innerTextLayout(r.rotation,0,r.labelDirection);r.labelMargin=i.get(["label","margin"]),Nlt(t,n,i,o,{position:JB(n.axis,e,r),align:a.textAlign,verticalAlign:a.textVerticalAlign})}function $lt(e,t,r){return r=r||0,{x1:e[r],y1:e[1-r],x2:t[r],y2:t[1-r]}}function zlt(e,t,r){return r=r||0,{x:e[r],y:e[1-r],width:t[r],height:t[1-r]}}var Vlt=function(e){_t(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeElOption=function(r,n,i,o,a){var s=i.axis,l=s.grid,u=o.get("type"),c=I5(l,s).getOtherAxis(s).getGlobalExtent(),f=s.toGlobalCoord(s.dataToCoord(n,!0));if(u&&u!=="none"){var h=Dlt(o),d=Ult[u](s,f,c);d.style=h,r.graphicKey=d.type,r.pointer=d}var p=y3(l.model,i);Blt(n,r,p,i,o,a)},t.prototype.getHandleTransform=function(r,n,i){var o=y3(n.axis.grid.model,n,{labelInside:!1});o.labelMargin=i.get(["handle","margin"]);var a=JB(n.axis,r,o);return{x:a[0],y:a[1],rotation:o.rotation+(o.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(r,n,i,o){var a=i.axis,s=a.grid,l=a.getGlobalExtent(!0),u=I5(s,a).getOtherAxis(a).getGlobalExtent(),c=a.dim==="x"?0:1,f=[r.x,r.y];f[c]+=n[c],f[c]=Math.min(l[1],f[c]),f[c]=Math.max(l[0],f[c]);var h=(u[1]+u[0])/2,d=[h,h];d[c]=f[c];var p=[{verticalAlign:"middle"},{align:"center"}];return{x:f[0],y:f[1],rotation:r.rotation,cursorPoint:d,tooltipOption:p[c]}},t}(Rlt);function I5(e,t){var r={};return r[t.dim+"AxisIndex"]=t.index,e.getCartesian(r)}var Ult={line:function(e,t,r){var n=$lt([t,r[0]],[t,r[1]],O5(e));return{type:"Line",subPixelOptimize:!0,shape:n}},shadow:function(e,t,r){var n=Math.max(1,e.getBandWidth()),i=r[1]-r[0];return{type:"Rect",shape:zlt([t-n/2,r[0]],[n,i],O5(e))}}};function O5(e){return e.dim==="x"?0:1}const Glt=Vlt;var jlt=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(Ce);const Wlt=jlt;var la=Oe(),Hlt=F;function QB(e,t,r){if(!Xt.node){var n=t.getZr();la(n).records||(la(n).records={}),Xlt(n,t);var i=la(n).records[e]||(la(n).records[e]={});i.handler=r}}function Xlt(e,t){if(la(e).initialized)return;la(e).initialized=!0,r("click",be(R5,"click")),r("mousemove",be(R5,"mousemove")),r("globalout",qlt);function r(n,i){e.on(n,function(o){var a=Zlt(t);Hlt(la(e).records,function(s){s&&i(s,o,a.dispatchAction)}),Ylt(a.pendings,t)})}}function Ylt(e,t){var r=e.showTip.length,n=e.hideTip.length,i;r?i=e.showTip[r-1]:n&&(i=e.hideTip[n-1]),i&&(i.dispatchAction=null,t.dispatchAction(i))}function qlt(e,t,r){e.handler("leave",null,r)}function R5(e,t,r,n){t.handler(e,r,n)}function Zlt(e){var t={showTip:[],hideTip:[]},r=function(n){var i=t[n.type];i?i.push(n):(n.dispatchAction=r,e.dispatchAction(n))};return{dispatchAction:r,pendings:t}}function C3(e,t){if(!Xt.node){var r=t.getZr(),n=(la(r).records||{})[e];n&&(la(r).records[e]=null)}}var Klt=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){var o=n.getComponent("tooltip"),a=r.get("triggerOn")||o&&o.get("triggerOn")||"mousemove|click";QB("axisPointer",i,function(s,l,u){a!=="none"&&(s==="leave"||a.indexOf(s)>=0)&&u({type:"updateAxisPointer",currTrigger:s,x:l&&l.offsetX,y:l&&l.offsetY})})},t.prototype.remove=function(r,n){C3("axisPointer",n)},t.prototype.dispose=function(r,n){C3("axisPointer",n)},t.type="axisPointer",t}(oi);const Jlt=Klt;function t$(e,t){var r=[],n=e.seriesIndex,i;if(n==null||!(i=t.getSeriesByIndex(n)))return{point:[]};var o=i.getData(),a=Jl(o,e);if(a==null||a<0||ct(a))return{point:[]};var s=o.getItemGraphicEl(a),l=i.coordinateSystem;if(i.getTooltipPosition)r=i.getTooltipPosition(a)||[];else if(l&&l.dataToPoint)if(e.isStacked){var u=l.getBaseAxis(),c=l.getOtherAxis(u),f=c.dim,h=u.dim,d=f==="x"||f==="radius"?1:0,p=o.mapDimension(h),v=[];v[d]=o.get(p,a),v[1-d]=o.get(o.getCalculationInfo("stackResultDimension"),a),r=l.dataToPoint(v)||[]}else r=l.dataToPoint(o.getValues(Ct(l.dimensions,function(m){return o.mapDimension(m)}),a))||[];else if(s){var g=s.getBoundingRect().clone();g.applyTransform(s.transform),r=[g.x+g.width/2,g.y+g.height/2]}return{point:r,el:s}}var D5=Oe();function Qlt(e,t,r){var n=e.currTrigger,i=[e.x,e.y],o=e,a=e.dispatchAction||Vt(r.dispatchAction,r),s=t.getComponent("axisPointer").coordSysAxesInfo;if(!!s){qg(i)&&(i=t$({seriesIndex:o.seriesIndex,dataIndex:o.dataIndex},t).point);var l=qg(i),u=o.axesInfo,c=s.axesInfo,f=n==="leave"||qg(i),h={},d={},p={list:[],map:{}},v={showPointer:be(eut,d),showTooltip:be(rut,p)};F(s.coordSysMap,function(m,_){var y=l||m.containPoint(i);F(s.coordSysAxesInfo[_],function(w,T){var S=w.axis,P=aut(u,w);if(!f&&y&&(!u||P)){var A=P&&P.value;A==null&&!l&&(A=S.pointToData(i)),A!=null&&N5(w,A,v,!1,h)}})});var g={};return F(c,function(m,_){var y=m.linkGroup;y&&!d[_]&&F(y.axesInfo,function(w,T){var S=d[T];if(w!==m&&S){var P=S.value;y.mapper&&(P=m.axis.scale.parse(y.mapper(P,F5(w),F5(m)))),g[m.key]=P}})}),F(g,function(m,_){N5(c[_],m,v,!0,h)}),nut(d,c,h),iut(p,i,e,a),out(c,a,r),h}}function N5(e,t,r,n,i){var o=e.axis;if(!(o.scale.isBlank()||!o.containData(t))){if(!e.involveSeries){r.showPointer(e,t);return}var a=tut(t,e),s=a.payloadBatch,l=a.snapToValue;s[0]&&i.seriesIndex==null&&at(i,s[0]),!n&&e.snap&&o.containData(l)&&l!=null&&(t=l),r.showPointer(e,t,s),r.showTooltip(e,a,l)}}function tut(e,t){var r=t.axis,n=r.dim,i=e,o=[],a=Number.MAX_VALUE,s=-1;return F(t.seriesModels,function(l,u){var c=l.getData().mapDimensionsAll(n),f,h;if(l.getAxisTooltipData){var d=l.getAxisTooltipData(c,e,r);h=d.dataIndices,f=d.nestestValue}else{if(h=l.getData().indicesOfNearest(c[0],e,r.type==="category"?.5:null),!h.length)return;f=l.getData().get(c[0],h[0])}if(!(f==null||!isFinite(f))){var p=e-f,v=Math.abs(p);v<=a&&((v<a||p>=0&&s<0)&&(a=v,s=p,i=f,o.length=0),F(h,function(g){o.push({seriesIndex:l.seriesIndex,dataIndexInside:g,dataIndex:l.getData().getRawIndex(g)})}))}}),{payloadBatch:o,snapToValue:i}}function eut(e,t,r,n){e[t.key]={value:r,payloadBatch:n}}function rut(e,t,r,n){var i=r.payloadBatch,o=t.axis,a=o.model,s=t.axisPointerModel;if(!(!t.triggerTooltip||!i.length)){var l=t.coordSys.model,u=u0(l),c=e.map[u];c||(c=e.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},e.list.push(c)),c.dataByAxis.push({axisDim:o.dim,axisIndex:a.componentIndex,axisType:a.type,axisId:a.id,value:n,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function nut(e,t,r){var n=r.axesInfo=[];F(t,function(i,o){var a=i.axisPointerModel.option,s=e[o];s?(!i.useHandle&&(a.status="show"),a.value=s.value,a.seriesDataIndices=(s.payloadBatch||[]).slice()):!i.useHandle&&(a.status="hide"),a.status==="show"&&n.push({axisDim:i.axis.dim,axisIndex:i.axis.model.componentIndex,value:a.value})})}function iut(e,t,r,n){if(qg(t)||!e.list.length){n({type:"hideTip"});return}var i=((e.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};n({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:r.tooltipOption,position:r.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:e.list})}function out(e,t,r){var n=r.getZr(),i="axisPointerLastHighlights",o=D5(n)[i]||{},a=D5(n)[i]={};F(e,function(u,c){var f=u.axisPointerModel.option;f.status==="show"&&F(f.seriesDataIndices,function(h){var d=h.seriesIndex+" | "+h.dataIndex;a[d]=h})});var s=[],l=[];F(o,function(u,c){!a[c]&&l.push(u)}),F(a,function(u,c){!o[c]&&s.push(u)}),l.length&&r.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),s.length&&r.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function aut(e,t){for(var r=0;r<(e||[]).length;r++){var n=e[r];if(t.axis.dim===n.axisDim&&t.axis.model.componentIndex===n.axisIndex)return n}}function F5(e){var t=e.axis.model,r={},n=r.axisDim=e.axis.dim;return r.axisIndex=r[n+"AxisIndex"]=t.componentIndex,r.axisName=r[n+"AxisName"]=t.name,r.axisId=r[n+"AxisId"]=t.id,r}function qg(e){return!e||e[0]==null||isNaN(e[0])||e[1]==null||isNaN(e[1])}function e$(e){DB.registerAxisPointerClass("CartesianAxisPointer",Glt),e.registerComponentModel(Wlt),e.registerComponentView(Jlt),e.registerPreprocessor(function(t){if(t){(!t.axisPointer||t.axisPointer.length===0)&&(t.axisPointer={});var r=t.axisPointer.link;r&&!ct(r)&&(t.axisPointer.link=[r])}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,function(t,r){t.getComponent("axisPointer").coordSysAxesInfo=Eat(t,r)}),e.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},Qlt)}function z0(e){Hr(BB),Hr(e$)}function sut(e,t){var r=R0(t.get("padding")),n=t.getItemStyle(["color","opacity"]);return n.fill=t.get("backgroundColor"),e=new Ke({shape:{x:e.x-r[3],y:e.y-r[0],width:e.width+r[1]+r[3],height:e.height+r[0]+r[2],r:t.get("borderRadius")},style:n,silent:!0,z2:-1}),e}var lut=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(Ce);const uut=lut;function r$(e){var t=e.get("confine");return t!=null?!!t:e.get("renderMode")==="richText"}function n$(e){if(!!Xt.domSupported){for(var t=document.documentElement.style,r=0,n=e.length;r<n;r++)if(e[r]in t)return e[r]}}var i$=n$(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),cut=n$(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function o$(e,t){if(!e)return t;t=xN(t,!0);var r=e.indexOf(t);return e=r===-1?t:"-"+e.slice(0,r)+"-"+t,e.toLowerCase()}function fut(e,t){var r=e.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(e);return r?t?r[t]:r:null}var hut=o$(cut,"transition"),zE=o$(i$,"transform"),dut="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(Xt.transform3dSupported?"will-change:transform;":"");function put(e){return e=e==="left"?"right":e==="right"?"left":e==="top"?"bottom":"top",e}function vut(e,t,r){if(!Et(r)||r==="inside")return"";var n=e.get("backgroundColor"),i=e.get("borderWidth");t=ru(t);var o=put(r),a=Math.max(Math.round(i)*1.5,6),s="",l=zE+":",u;ue(["left","right"],o)>-1?(s+="top:50%",l+="translateY(-50%) rotate("+(u=o==="left"?-225:-45)+"deg)"):(s+="left:50%",l+="translateX(-50%) rotate("+(u=o==="top"?225:45)+"deg)");var c=u*Math.PI/180,f=a+i,h=f*Math.abs(Math.cos(c))+f*Math.abs(Math.sin(c)),d=Math.round(((h-Math.SQRT2*i)/2+Math.SQRT2*i-(h-f)/2)*100)/100;s+=";"+o+":-"+d+"px";var p=t+" solid "+i+"px;",v=["position:absolute;width:"+a+"px;height:"+a+"px;",s+";"+l+";","border-bottom:"+p,"border-right:"+p,"background-color:"+n+";"];return'<div style="'+v.join("")+'"></div>'}function gut(e,t){var r="cubic-bezier(0.23,1,0.32,1)",n=" "+e/2+"s "+r,i="opacity"+n+",visibility"+n;return t||(n=" "+e+"s "+r,i+=Xt.transformSupported?","+zE+n:",left"+n+",top"+n),hut+":"+i}function B5(e,t,r){var n=e.toFixed(0)+"px",i=t.toFixed(0)+"px";if(!Xt.transformSupported)return r?"top:"+i+";left:"+n+";":[["top",i],["left",n]];var o=Xt.transform3dSupported,a="translate"+(o?"3d":"")+"("+n+","+i+(o?",0":"")+")";return r?"top:0;left:0;"+zE+":"+a+";":[["top",0],["left",0],[i$,a]]}function mut(e){var t=[],r=e.get("fontSize"),n=e.getTextColor();n&&t.push("color:"+n),t.push("font:"+e.getFont()),r&&t.push("line-height:"+Math.round(r*3/2)+"px");var i=e.get("textShadowColor"),o=e.get("textShadowBlur")||0,a=e.get("textShadowOffsetX")||0,s=e.get("textShadowOffsetY")||0;return i&&o&&t.push("text-shadow:"+a+"px "+s+"px "+o+"px "+i),F(["decoration","align"],function(l){var u=e.get(l);u&&t.push("text-"+l+":"+u)}),t.join(";")}function _ut(e,t,r){var n=[],i=e.get("transitionDuration"),o=e.get("backgroundColor"),a=e.get("shadowBlur"),s=e.get("shadowColor"),l=e.get("shadowOffsetX"),u=e.get("shadowOffsetY"),c=e.getModel("textStyle"),f=lF(e,"html"),h=l+"px "+u+"px "+a+"px "+s;return n.push("box-shadow:"+h),t&&i&&n.push(gut(i,r)),o&&n.push("background-color:"+o),F(["width","color","radius"],function(d){var p="border-"+d,v=xN(p),g=e.get(v);g!=null&&n.push(p+":"+g+(d==="color"?"":"px"))}),n.push(mut(c)),f!=null&&n.push("padding:"+R0(f).join("px ")+"px"),n.join(";")+";"}function $5(e,t,r,n,i){var o=t&&t.painter;if(r){var a=o&&o.getViewportRoot();a&&dZ(e,a,document.body,n,i)}else{e[0]=n,e[1]=i;var s=o&&o.getViewportRootOffset();s&&(e[0]+=s.offsetLeft,e[1]+=s.offsetTop)}e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var yut=function(){function e(t,r,n){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._firstShow=!0,this._longHide=!0,Xt.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var o=this._zr=r.getZr(),a=this._appendToBody=n&&n.appendToBody;$5(this._styleCoord,o,a,r.getWidth()/2,r.getHeight()/2),a?document.body.appendChild(i):t.appendChild(i),this._container=t;var s=this;i.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},i.onmousemove=function(l){if(l=l||window.event,!s._enterable){var u=o.handler,c=o.painter.getViewportRoot();Hn(c,l,!0),u.dispatch("mousemove",l)}},i.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return e.prototype.update=function(t){var r=this._container,n=fut(r,"position"),i=r.style;i.position!=="absolute"&&n!=="absolute"&&(i.position="relative");var o=t.get("alwaysShowContent");o&&this._moveIfResized(),this.el.className=t.get("className")||""},e.prototype.show=function(t,r){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el,i=n.style,o=this._styleCoord;n.innerHTML?i.cssText=dut+_ut(t,!this._firstShow,this._longHide)+B5(o[0],o[1],!0)+("border-color:"+ru(r)+";")+(t.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},e.prototype.setContent=function(t,r,n,i,o){var a=this.el;if(t==null){a.innerHTML="";return}var s="";if(Et(o)&&n.get("trigger")==="item"&&!r$(n)&&(s=vut(n,i,o)),Et(t))a.innerHTML=t+s;else if(t){a.innerHTML="",ct(t)||(t=[t]);for(var l=0;l<t.length;l++)Tm(t[l])&&t[l].parentNode!==a&&a.appendChild(t[l]);if(s&&a.childNodes.length){var u=document.createElement("div");u.innerHTML=s,a.appendChild(u)}}},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},e.prototype.moveTo=function(t,r){var n=this._styleCoord;if($5(n,this._zr,this._appendToBody,t,r),n[0]!=null&&n[1]!=null){var i=this.el.style,o=B5(n[0],n[1]);F(o,function(a){i[a[0]]=a[1]})}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},e.prototype.hide=function(){var t=this,r=this.el.style;r.visibility="hidden",r.opacity="0",Xt.transform3dSupported&&(r.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(Vt(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},e}();const but=yut;var wut=function(){function e(t){this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._zr=t.getZr(),V5(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return e.prototype.update=function(t){var r=t.get("alwaysShowContent");r&&this._moveIfResized()},e.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},e.prototype.setContent=function(t,r,n,i,o){var a=this;Ot(t)&&ne(""),this.el&&this._zr.remove(this.el);var s=n.getModel("textStyle");this.el=new Je({style:{rich:r.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:s.get("textShadowColor"),fill:n.get(["textStyle","color"]),padding:lF(n,"richText"),verticalAlign:"top",align:"left"},z:n.get("z")}),F(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(u){a.el.style[u]=n.get(u)}),F(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(u){a.el.style[u]=s.get(u)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el,r=this.el.getBoundingRect(),n=z5(t.style);return[r.width+n.left+n.right,r.height+n.top+n.bottom]},e.prototype.moveTo=function(t,r){var n=this.el;if(n){var i=this._styleCoord;V5(i,this._zr,t,r),t=i[0],r=i[1];var o=n.style,a=ls(o.borderWidth||0),s=z5(o);n.x=t+a+s.left,n.y=r+a+s.top,n.markRedraw()}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},e.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(Vt(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this._zr.remove(this.el)},e}();function ls(e){return Math.max(0,e)}function z5(e){var t=ls(e.shadowBlur||0),r=ls(e.shadowOffsetX||0),n=ls(e.shadowOffsetY||0);return{left:ls(t-r),right:ls(t+r),top:ls(t-n),bottom:ls(t+n)}}function V5(e,t,r,n){e[0]=r,e[1]=n,e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}const Sut=wut;var Tut=new Ke({shape:{x:-1,y:-1,width:2,height:2}}),Put=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,n){if(!(Xt.node||!n.getDom())){var i=r.getComponent("tooltip"),o=this._renderMode=qK(i.get("renderMode"));this._tooltipContent=o==="richText"?new Sut(n):new but(n.getDom(),n,{appendToBody:i.get("appendToBody",!0)})}},t.prototype.render=function(r,n,i){if(!(Xt.node||!i.getDom())){this.group.removeAll(),this._tooltipModel=r,this._ecModel=n,this._api=i,this._alwaysShowContent=r.get("alwaysShowContent");var o=this._tooltipContent;o.update(r),o.setEnterable(r.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&r.get("transitionDuration")?cF(this,"_updatePosition",50,"fixRate"):o3(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var r=this._tooltipModel,n=r.get("triggerOn");QB("itemTooltip",this._api,Vt(function(i,o,a){n!=="none"&&(n.indexOf(i)>=0?this._tryShow(o,a):i==="leave"&&this._hide(a))},this))},t.prototype._keepShow=function(){var r=this._tooltipModel,n=this._ecModel,i=this._api,o=r.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&o!=="none"&&o!=="click"){var a=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!i.isDisposed()&&a.manuallyShowTip(r,n,i,{x:a._lastX,y:a._lastY,dataByCoordSys:a._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(r,n,i,o){if(!(o.from===this.uid||Xt.node||!i.getDom())){var a=U5(o,i);this._ticket="";var s=o.dataByCoordSys,l=Cut(o,n,i);if(l){var u=l.el.getBoundingRect().clone();u.applyTransform(l.el.transform),this._tryShow({offsetX:u.x+u.width/2,offsetY:u.y+u.height/2,target:l.el,position:o.position,positionDefault:"bottom"},a)}else if(o.tooltip&&o.x!=null&&o.y!=null){var c=Tut;c.x=o.x,c.y=o.y,c.update(),ie(c).tooltipConfig={name:null,option:o.tooltip},this._tryShow({offsetX:o.x,offsetY:o.y,target:c},a)}else if(s)this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,dataByCoordSys:s,tooltipOption:o.tooltipOption},a);else if(o.seriesIndex!=null){if(this._manuallyAxisShowTip(r,n,i,o))return;var f=t$(o,n),h=f.point[0],d=f.point[1];h!=null&&d!=null&&this._tryShow({offsetX:h,offsetY:d,target:f.el,position:o.position,positionDefault:"bottom"},a)}else o.x!=null&&o.y!=null&&(i.dispatchAction({type:"updateAxisPointer",x:o.x,y:o.y}),this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,target:i.getZr().findHover(o.x,o.y).target},a))}},t.prototype.manuallyHideTip=function(r,n,i,o){var a=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&a.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,o.from!==this.uid&&this._hide(U5(o,i))},t.prototype._manuallyAxisShowTip=function(r,n,i,o){var a=o.seriesIndex,s=o.dataIndex,l=n.getComponent("axisPointer").coordSysAxesInfo;if(!(a==null||s==null||l==null)){var u=n.getSeriesByIndex(a);if(!!u){var c=u.getData(),f=mh([c.getItemModel(s),u,(u.coordinateSystem||{}).model],this._tooltipModel);if(f.get("trigger")==="axis")return i.dispatchAction({type:"updateAxisPointer",seriesIndex:a,dataIndex:s,position:o.position}),!0}}},t.prototype._tryShow=function(r,n){var i=r.target,o=this._tooltipModel;if(!!o){this._lastX=r.offsetX,this._lastY=r.offsetY;var a=r.dataByCoordSys;if(a&&a.length)this._showAxisTooltip(a,r);else if(i){this._lastDataByCoordSys=null;var s,l;Tc(i,function(u){if(ie(u).dataIndex!=null)return s=u,!0;if(ie(u).tooltipConfig!=null)return l=u,!0},!0),s?this._showSeriesItemTooltip(r,s,n):l?this._showComponentItemTooltip(r,l,n):this._hide(n)}else this._lastDataByCoordSys=null,this._hide(n)}},t.prototype._showOrMove=function(r,n){var i=r.get("showDelay");n=Vt(n,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(n,i):n()},t.prototype._showAxisTooltip=function(r,n){var i=this._ecModel,o=this._tooltipModel,a=[n.offsetX,n.offsetY],s=mh([n.tooltipOption],o),l=this._renderMode,u=[],c=Is("section",{blocks:[],noHeader:!0}),f=[],h=new p2;F(r,function(_){F(_.dataByAxis,function(y){var w=i.getComponent(y.axisDim+"Axis",y.axisIndex),T=y.value;if(!(!w||T==null)){var S=KB(T,w.axis,i,y.seriesDataIndices,y.valueLabelOpt),P=Is("section",{header:S,noHeader:!So(S),sortBlocks:!0,blocks:[]});c.blocks.push(P),F(y.seriesDataIndices,function(A){var k=i.getSeriesByIndex(A.seriesIndex),C=A.dataIndexInside,M=k.getDataParams(C);if(!(M.dataIndex<0)){M.axisDim=y.axisDim,M.axisIndex=y.axisIndex,M.axisType=y.axisType,M.axisId=y.axisId,M.axisValue=EE(w.axis,{value:T}),M.axisValueLabel=S,M.marker=h.makeTooltipMarker("item",ru(M.color),l);var D=A4(k.formatTooltip(C,!0,null)),B=D.frag;if(B){var V=mh([k],o).get("valueFormatter");P.blocks.push(V?at({valueFormatter:V},B):B)}D.text&&f.push(D.text),u.push(M)}})}})}),c.blocks.reverse(),f.reverse();var d=n.position,p=s.get("order"),v=O4(c,h,l,p,i.get("useUTC"),s.get("textStyle"));v&&f.unshift(v);var g=l==="richText"?`

`:"<br/>",m=f.join(g);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(r,u)?this._updatePosition(s,d,a[0],a[1],this._tooltipContent,u):this._showTooltipContent(s,m,u,Math.random()+"",a[0],a[1],d,null,h)})},t.prototype._showSeriesItemTooltip=function(r,n,i){var o=this._ecModel,a=ie(n),s=a.seriesIndex,l=o.getSeriesByIndex(s),u=a.dataModel||l,c=a.dataIndex,f=a.dataType,h=u.getData(f),d=this._renderMode,p=r.positionDefault,v=mh([h.getItemModel(c),u,l&&(l.coordinateSystem||{}).model],this._tooltipModel,p?{position:p}:null),g=v.get("trigger");if(!(g!=null&&g!=="item")){var m=u.getDataParams(c,f),_=new p2;m.marker=_.makeTooltipMarker("item",ru(m.color),d);var y=A4(u.formatTooltip(c,!1,f)),w=v.get("order"),T=v.get("valueFormatter"),S=y.frag,P=S?O4(T?at({valueFormatter:T},S):S,_,d,w,o.get("useUTC"),v.get("textStyle")):y.text,A="item_"+u.name+"_"+c;this._showOrMove(v,function(){this._showTooltipContent(v,P,m,A,r.offsetX,r.offsetY,r.position,r.target,_)}),i({type:"showTip",dataIndexInside:c,dataIndex:h.getRawIndex(c),seriesIndex:s,from:this.uid})}},t.prototype._showComponentItemTooltip=function(r,n,i){var o=ie(n),a=o.tooltipConfig,s=a.option||{};if(Et(s)){var l=s;s={content:l,formatter:l}}var u=[s],c=this._ecModel.getComponent(o.componentMainType,o.componentIndex);c&&u.push(c),u.push({formatter:s.content});var f=r.positionDefault,h=mh(u,this._tooltipModel,f?{position:f}:null),d=h.get("content"),p=Math.random()+"",v=new p2;this._showOrMove(h,function(){var g=zt(h.get("formatterParams")||{});this._showTooltipContent(h,d,g,p,r.offsetX,r.offsetY,r.position,n,v)}),i({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(r,n,i,o,a,s,l,u,c){if(this._ticket="",!(!r.get("showContent")||!r.get("show"))){var f=this._tooltipContent;f.setEnterable(r.get("enterable"));var h=r.get("formatter");l=l||r.get("position");var d=n,p=this._getNearestPoint([a,s],i,r.get("trigger"),r.get("borderColor")),v=p.color;if(h)if(Et(h)){var g=r.ecModel.get("useUTC"),m=ct(i)?i[0]:i,_=m&&m.axisType&&m.axisType.indexOf("time")>=0;d=h,_&&(d=n_(m.axisValue,d,g)),d=LN(d,i,!0)}else if(Ut(h)){var y=Vt(function(w,T){w===this._ticket&&(f.setContent(T,c,r,v,l),this._updatePosition(r,l,a,s,f,i,u))},this);this._ticket=o,d=h(i,o,y)}else d=h;f.setContent(d,c,r,v,l),f.show(r,v),this._updatePosition(r,l,a,s,f,i,u)}},t.prototype._getNearestPoint=function(r,n,i,o){if(i==="axis"||ct(n))return{color:o||(this._renderMode==="html"?"#fff":"none")};if(!ct(n))return{color:o||n.color||n.borderColor}},t.prototype._updatePosition=function(r,n,i,o,a,s,l){var u=this._api.getWidth(),c=this._api.getHeight();n=n||r.get("position");var f=a.getSize(),h=r.get("align"),d=r.get("verticalAlign"),p=l&&l.getBoundingRect().clone();if(l&&p.applyTransform(l.transform),Ut(n)&&(n=n([i,o],s,a.el,p,{viewSize:[u,c],contentSize:f.slice()})),ct(n))i=We(n[0],u),o=We(n[1],c);else if(Ot(n)){var v=n;v.width=f[0],v.height=f[1];var g=Ls(v,{width:u,height:c});i=g.x,o=g.y,h=null,d=null}else if(Et(n)&&l){var m=Aut(n,p,f,r.get("borderWidth"));i=m[0],o=m[1]}else{var m=Eut(i,o,a,u,c,h?null:20,d?null:20);i=m[0],o=m[1]}if(h&&(i-=G5(h)?f[0]/2:h==="right"?f[0]:0),d&&(o-=G5(d)?f[1]/2:d==="bottom"?f[1]:0),r$(r)){var m=kut(i,o,a,u,c);i=m[0],o=m[1]}a.moveTo(i,o)},t.prototype._updateContentNotChangedOnAxis=function(r,n){var i=this._lastDataByCoordSys,o=this._cbParamsList,a=!!i&&i.length===r.length;return a&&F(i,function(s,l){var u=s.dataByAxis||[],c=r[l]||{},f=c.dataByAxis||[];a=a&&u.length===f.length,a&&F(u,function(h,d){var p=f[d]||{},v=h.seriesDataIndices||[],g=p.seriesDataIndices||[];a=a&&h.value===p.value&&h.axisType===p.axisType&&h.axisId===p.axisId&&v.length===g.length,a&&F(v,function(m,_){var y=g[_];a=a&&m.seriesIndex===y.seriesIndex&&m.dataIndex===y.dataIndex}),o&&F(h.seriesDataIndices,function(m){var _=m.seriesIndex,y=n[_],w=o[_];y&&w&&w.data!==y.data&&(a=!1)})})}),this._lastDataByCoordSys=r,this._cbParamsList=n,!!a},t.prototype._hide=function(r){this._lastDataByCoordSys=null,r({type:"hideTip",from:this.uid})},t.prototype.dispose=function(r,n){Xt.node||!n.getDom()||(o3(this,"_updatePosition"),this._tooltipContent.dispose(),C3("itemTooltip",n))},t.type="tooltip",t}(oi);function mh(e,t,r){var n=t.ecModel,i;r?(i=new Pr(r,n,n),i=new Pr(t.option,i,n)):i=t;for(var o=e.length-1;o>=0;o--){var a=e[o];a&&(a instanceof Pr&&(a=a.get("tooltip",!0)),Et(a)&&(a={formatter:a}),a&&(i=new Pr(a,i,n)))}return i}function U5(e,t){return e.dispatchAction||Vt(t.dispatchAction,t)}function Eut(e,t,r,n,i,o,a){var s=r.getSize(),l=s[0],u=s[1];return o!=null&&(e+l+o+2>n?e-=l+o:e+=o),a!=null&&(t+u+a>i?t-=u+a:t+=a),[e,t]}function kut(e,t,r,n,i){var o=r.getSize(),a=o[0],s=o[1];return e=Math.min(e+a,n)-a,t=Math.min(t+s,i)-s,e=Math.max(e,0),t=Math.max(t,0),[e,t]}function Aut(e,t,r,n){var i=r[0],o=r[1],a=Math.ceil(Math.SQRT2*n)+8,s=0,l=0,u=t.width,c=t.height;switch(e){case"inside":s=t.x+u/2-i/2,l=t.y+c/2-o/2;break;case"top":s=t.x+u/2-i/2,l=t.y-o-a;break;case"bottom":s=t.x+u/2-i/2,l=t.y+c+a;break;case"left":s=t.x-i-a,l=t.y+c/2-o/2;break;case"right":s=t.x+u+a,l=t.y+c/2-o/2}return[s,l]}function G5(e){return e==="center"||e==="middle"}function Cut(e,t,r){var n=$P(e).queryOptionMap,i=n.keys()[0];if(!(!i||i==="series")){var o=L0(t,i,n.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),a=o.models[0];if(!!a){var s=r.getViewOfComponentModel(a),l;if(s.group.traverse(function(u){var c=ie(u).tooltipConfig;if(c&&c.name===e.name)return l=u,!0}),l)return{componentMainType:i,componentIndex:a.componentIndex,el:l}}}}const Mut=Put;function wf(e){Hr(e$),e.registerComponentModel(uut),e.registerComponentView(Mut),e.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},Gr),e.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},Gr)}var j5=F;function W5(e){if(e){for(var t in e)if(e.hasOwnProperty(t))return!0}}function H5(e,t,r){var n={};return j5(t,function(o){var a=n[o]=i();j5(e[o],function(s,l){if(!!_n.isValidType(l)){var u={type:l,visual:s};r&&r(u,o),a[l]=new _n(u),l==="opacity"&&(u=zt(u),u.type="colorAlpha",a.__hidden.__alphaForOpacity=new _n(u))}})}),n;function i(){var o=function(){};o.prototype.__hidden=o.prototype;var a=new o;return a}}function xut(e,t,r){var n;F(r,function(i){t.hasOwnProperty(i)&&W5(t[i])&&(n=!0)}),n&&F(r,function(i){t.hasOwnProperty(i)&&W5(t[i])?e[i]=zt(t[i]):delete e[i]})}function Lut(e,t,r,n){var i={};return F(e,function(o){var a=_n.prepareVisualTypes(t[o]);i[o]=a}),{progress:function(a,s){var l;n!=null&&(l=s.getDimensionIndex(n));function u(T){return _F(s,f,T)}function c(T,S){Irt(s,f,T,S)}for(var f,h=s.getStore();(f=a.next())!=null;){var d=s.getRawDataItem(f);if(!(d&&d.visualMap===!1))for(var p=n!=null?h.get(l,f):f,v=r(p),g=t[v],m=i[v],_=0,y=m.length;_<y;_++){var w=m[_];g[w]&&g[w].applyVisual(p,u,c)}}}}}var Iut=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(Ce),Out=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){if(this.group.removeAll(),!!r.get("show")){var o=this.group,a=r.getModel("textStyle"),s=r.getModel("subtextStyle"),l=r.get("textAlign"),u=qt(r.get("textBaseline"),r.get("textVerticalAlign")),c=new Je({style:mn(a,{text:r.get("text"),fill:a.getTextColor()},{disableBox:!0}),z2:10}),f=c.getBoundingRect(),h=r.get("subtext"),d=new Je({style:mn(s,{text:h,fill:s.getTextColor(),y:f.height+r.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),p=r.get("link"),v=r.get("sublink"),g=r.get("triggerEvent",!0);c.silent=!p&&!g,d.silent=!v&&!g,p&&c.on("click",function(){u4(p,"_"+r.get("target"))}),v&&d.on("click",function(){u4(v,"_"+r.get("subtarget"))}),ie(c).eventData=ie(d).eventData=g?{componentType:"title",componentIndex:r.componentIndex}:null,o.add(c),h&&o.add(d);var m=o.getBoundingRect(),_=r.getBoxLayoutParams();_.width=m.width,_.height=m.height;var y=Ls(_,{width:i.getWidth(),height:i.getHeight()},r.get("padding"));l||(l=r.get("left")||r.get("right"),l==="middle"&&(l="center"),l==="right"?y.x+=y.width:l==="center"&&(y.x+=y.width/2)),u||(u=r.get("top")||r.get("bottom"),u==="center"&&(u="middle"),u==="bottom"?y.y+=y.height:u==="middle"&&(y.y+=y.height/2),u=u||"top"),o.x=y.x,o.y=y.y,o.markRedraw();var w={align:l,verticalAlign:u};c.setStyle(w),d.setStyle(w),m=o.getBoundingRect();var T=y.margin,S=r.getItemStyle(["color","opacity"]);S.fill=r.get("backgroundColor");var P=new Ke({shape:{x:m.x-T[3],y:m.y-T[0],width:m.width+T[1]+T[3],height:m.height+T[0]+T[2],r:r.get("borderRadius")},style:S,subPixelOptimize:!0,silent:!0});o.add(P)}},t.type="title",t}(oi);function Sf(e){e.registerComponentModel(Iut),e.registerComponentView(Out)}function a$(e,t){if(!e)return!1;for(var r=ct(e)?e:[e],n=0;n<r.length;n++)if(r[n]&&r[n][t])return!0;return!1}function lv(e){$S(e,"label",["show"])}var uv=Oe(),s$=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.createdBySelf=!1,r}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i),this._mergeOption(r,i,!1,!0)},t.prototype.isAnimationEnabled=function(){if(Xt.node)return!1;var r=this.__hostSeries;return this.getShallow("animation")&&r&&r.isAnimationEnabled()},t.prototype.mergeOption=function(r,n){this._mergeOption(r,n,!1,!1)},t.prototype._mergeOption=function(r,n,i,o){var a=this.mainType;i||n.eachSeries(function(s){var l=s.get(this.mainType,!0),u=uv(s)[a];if(!l||!l.data){uv(s)[a]=null;return}u?u._mergeOption(l,n,!0):(o&&lv(l),F(l.data,function(c){c instanceof Array?(lv(c[0]),lv(c[1])):lv(c)}),u=this.createMarkerModelFromSeries(l,this,n),at(u,{mainType:this.mainType,seriesIndex:s.seriesIndex,name:s.name,createdBySelf:!0}),u.__hostSeries=s),uv(s)[a]=u},this)},t.prototype.formatTooltip=function(r,n,i){var o=this.getData(),a=this.getRawValue(r),s=o.getName(r);return Is("section",{header:this.name,blocks:[Is("nameValue",{name:s,value:a,noName:!s,noValue:a==null})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(r){this._data=r},t.getMarkerModelFromSeries=function(r,n){return uv(r)[n]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(Ce);Ui(s$,qN.prototype);const Qc=s$;function M3(e){return!(isNaN(parseFloat(e.x))&&isNaN(parseFloat(e.y)))}function Rut(e){return!isNaN(parseFloat(e.x))&&!isNaN(parseFloat(e.y))}function cv(e,t,r,n,i,o){var a=[],s=nu(t,n),l=s?t.getCalculationInfo("stackResultDimension"):n,u=VE(t,l,e),c=t.indicesOfNearest(l,u)[0];a[i]=t.get(r,c),a[o]=t.get(l,c);var f=t.get(n,c),h=To(t.get(n,c));return h=Math.min(h,20),h>=0&&(a[o]=+a[o].toFixed(h)),[a,f]}var q2={min:be(cv,"min"),max:be(cv,"max"),average:be(cv,"average"),median:be(cv,"median")};function Zm(e,t){var r=e.getData(),n=e.coordinateSystem;if(t&&!Rut(t)&&!ct(t.coord)&&n){var i=n.dimensions,o=l$(t,r,n,e);if(t=zt(t),t.type&&q2[t.type]&&o.baseAxis&&o.valueAxis){var a=ue(i,o.baseAxis.dim),s=ue(i,o.valueAxis.dim),l=q2[t.type](r,o.baseDataDim,o.valueDataDim,a,s);t.coord=l[0],t.value=l[1]}else{for(var u=[t.xAxis!=null?t.xAxis:t.radiusAxis,t.yAxis!=null?t.yAxis:t.angleAxis],c=0;c<2;c++)q2[u[c]]&&(u[c]=VE(r,r.mapDimension(i[c]),u[c]));t.coord=u}}return t}function l$(e,t,r,n){var i={};return e.valueIndex!=null||e.valueDim!=null?(i.valueDataDim=e.valueIndex!=null?t.getDimension(e.valueIndex):e.valueDim,i.valueAxis=r.getAxis(Dut(n,i.valueDataDim)),i.baseAxis=r.getOtherAxis(i.valueAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim)):(i.baseAxis=n.getBaseAxis(),i.valueAxis=r.getOtherAxis(i.baseAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim),i.valueDataDim=t.mapDimension(i.valueAxis.dim)),i}function Dut(e,t){var r=e.getData().getDimensionInfo(t);return r&&r.coordDim}function Km(e,t){return e&&e.containData&&t.coord&&!M3(t)?e.containData(t.coord):!0}function Nut(e,t,r){return e&&e.containZone&&t.coord&&r.coord&&!M3(t)&&!M3(r)?e.containZone(t.coord,r.coord):!0}function Fut(e,t){return e?function(r,n,i,o){var a=o<2?r.coord&&r.coord[o]:r.value;return Ts(a,t[o])}:function(r,n,i,o){return Ts(r.value,t[o])}}function VE(e,t,r){if(r==="average"){var n=0,i=0;return e.each(t,function(o,a){isNaN(o)||(n+=o,i++)}),n/i}else return r==="median"?e.getMedian(t):e.getDataExtent(t)[r==="max"?1:0]}var Z2=Oe(),But=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(){this.markerGroupMap=jt()},t.prototype.render=function(r,n,i){var o=this,a=this.markerGroupMap;a.each(function(s){Z2(s).keep=!1}),n.eachSeries(function(s){var l=Qc.getMarkerModelFromSeries(s,o.type);l&&o.renderSeries(s,l,n,i)}),a.each(function(s){!Z2(s).keep&&o.group.remove(s.group)})},t.prototype.markKeep=function(r){Z2(r).keep=!0},t.prototype.toggleBlurSeries=function(r,n){var i=this;F(r,function(o){var a=Qc.getMarkerModelFromSeries(o,i.type);if(a){var s=a.getData();s.eachItemGraphicEl(function(l){l&&(n?$9(l):WP(l))})}})},t.type="marker",t}(oi);const u$=But;var $ut=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,n,i){return new t(r,n,i)},t.type="markLine",t.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},t}(Qc);const zut=$ut;var fv=Oe(),Vut=function(e,t,r,n){var i=e.getData(),o;if(ct(n))o=n;else{var a=n.type;if(a==="min"||a==="max"||a==="average"||a==="median"||n.xAxis!=null||n.yAxis!=null){var s=void 0,l=void 0;if(n.yAxis!=null||n.xAxis!=null)s=t.getAxis(n.yAxis!=null?"y":"x"),l=Ei(n.yAxis,n.xAxis);else{var u=l$(n,i,t,e);s=u.valueAxis;var c=ZF(i,u.valueDataDim);l=VE(i,c,a)}var f=s.dim==="x"?0:1,h=1-f,d=zt(n),p={coord:[]};d.type=null,d.coord=[],d.coord[h]=-1/0,p.coord[h]=1/0;var v=r.get("precision");v>=0&&we(l)&&(l=+l.toFixed(Math.min(v,20))),d.coord[f]=p.coord[f]=l,o=[d,p,{type:a,valueIndex:n.valueIndex,value:l}]}else o=[]}var g=[Zm(e,o[0]),Zm(e,o[1]),at({},o[2])];return g[2].type=g[2].type||null,oe(g[2],g[0]),oe(g[2],g[1]),g};function Jm(e){return!isNaN(e)&&!isFinite(e)}function X5(e,t,r,n){var i=1-e,o=n.dimensions[e];return Jm(t[i])&&Jm(r[i])&&t[e]===r[e]&&n.getAxis(o).containData(t[e])}function Uut(e,t){if(e.type==="cartesian2d"){var r=t[0].coord,n=t[1].coord;if(r&&n&&(X5(1,r,n,e)||X5(0,r,n,e)))return!0}return Km(e,t[0])&&Km(e,t[1])}function K2(e,t,r,n,i){var o=n.coordinateSystem,a=e.getItemModel(t),s,l=We(a.get("x"),i.getWidth()),u=We(a.get("y"),i.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(n.getMarkerPosition)s=n.getMarkerPosition(e.getValues(e.dimensions,t));else{var c=o.dimensions,f=e.get(c[0],t),h=e.get(c[1],t);s=o.dataToPoint([f,h])}if(bf(o,"cartesian2d")){var d=o.getAxis("x"),p=o.getAxis("y"),c=o.dimensions;Jm(e.get(c[0],t))?s[0]=d.toGlobalCoord(d.getExtent()[r?0:1]):Jm(e.get(c[1],t))&&(s[1]=p.toGlobalCoord(p.getExtent()[r?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}e.setItemLayout(t,s)}var Gut=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,n,i){n.eachSeries(function(o){var a=Qc.getMarkerModelFromSeries(o,"markLine");if(a){var s=a.getData(),l=fv(a).from,u=fv(a).to;l.each(function(c){K2(l,c,!0,o,i),K2(u,c,!1,o,i)}),s.each(function(c){s.setItemLayout(c,[l.getItemLayout(c),u.getItemLayout(c)])}),this.markerGroupMap.get(o.id).updateLayout()}},this)},t.prototype.renderSeries=function(r,n,i,o){var a=r.coordinateSystem,s=r.id,l=r.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,new Vst);this.group.add(c.group);var f=jut(a,r,n),h=f.from,d=f.to,p=f.line;fv(n).from=h,fv(n).to=d,n.setData(p);var v=n.get("symbol"),g=n.get("symbolSize"),m=n.get("symbolRotate"),_=n.get("symbolOffset");ct(v)||(v=[v,v]),ct(g)||(g=[g,g]),ct(m)||(m=[m,m]),ct(_)||(_=[_,_]),f.from.each(function(w){y(h,w,!0),y(d,w,!1)}),p.each(function(w){var T=p.getItemModel(w).getModel("lineStyle").getLineStyle();p.setItemLayout(w,[h.getItemLayout(w),d.getItemLayout(w)]),T.stroke==null&&(T.stroke=h.getItemVisual(w,"style").fill),p.setItemVisual(w,{fromSymbolKeepAspect:h.getItemVisual(w,"symbolKeepAspect"),fromSymbolOffset:h.getItemVisual(w,"symbolOffset"),fromSymbolRotate:h.getItemVisual(w,"symbolRotate"),fromSymbolSize:h.getItemVisual(w,"symbolSize"),fromSymbol:h.getItemVisual(w,"symbol"),toSymbolKeepAspect:d.getItemVisual(w,"symbolKeepAspect"),toSymbolOffset:d.getItemVisual(w,"symbolOffset"),toSymbolRotate:d.getItemVisual(w,"symbolRotate"),toSymbolSize:d.getItemVisual(w,"symbolSize"),toSymbol:d.getItemVisual(w,"symbol"),style:T})}),c.updateData(p),f.line.eachItemGraphicEl(function(w){ie(w).dataModel=n,w.traverse(function(T){ie(T).dataModel=n})});function y(w,T,S){var P=w.getItemModel(T);K2(w,T,S,r,o);var A=P.getModel("itemStyle").getItemStyle();A.fill==null&&(A.fill=d_(l,"color")),w.setItemVisual(T,{symbolKeepAspect:P.get("symbolKeepAspect"),symbolOffset:qt(P.get("symbolOffset",!0),_[S?0:1]),symbolRotate:qt(P.get("symbolRotate",!0),m[S?0:1]),symbolSize:qt(P.get("symbolSize"),g[S?0:1]),symbol:qt(P.get("symbol",!0),v[S?0:1]),style:A})}this.markKeep(c),c.group.silent=n.get("silent")||r.get("silent")},t.type="markLine",t}(u$);function jut(e,t,r){var n;e?n=Ct(e&&e.dimensions,function(u){var c=t.getData().getDimensionInfo(t.getData().mapDimension(u))||{};return at(at({},c),{name:u,ordinalMeta:null})}):n=[{name:"value",type:"float"}];var i=new Ul(n,r),o=new Ul(n,r),a=new Ul([],r),s=Ct(r.get("data"),be(Vut,t,e,r));e&&(s=wr(s,be(Uut,e)));var l=Fut(!!e,n);return i.initData(Ct(s,function(u){return u[0]}),null,l),o.initData(Ct(s,function(u){return u[1]}),null,l),a.initData(Ct(s,function(u){return u[2]})),a.hasItemOption=!0,{from:i,to:o,line:a}}const Wut=Gut;function b_(e){e.registerComponentModel(zut),e.registerComponentView(Wut),e.registerPreprocessor(function(t){a$(t.series,"markLine")&&(t.markLine=t.markLine||{})})}var Hut=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,n,i){return new t(r,n,i)},t.type="markArea",t.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},t}(Qc);const Xut=Hut;var hv=Oe(),Yut=function(e,t,r,n){var i=Zm(e,n[0]),o=Zm(e,n[1]),a=i.coord,s=o.coord;a[0]=Ei(a[0],-1/0),a[1]=Ei(a[1],-1/0),s[0]=Ei(s[0],1/0),s[1]=Ei(s[1],1/0);var l=Zq([{},i,o]);return l.coord=[i.coord,o.coord],l.x0=i.x,l.y0=i.y,l.x1=o.x,l.y1=o.y,l};function Qm(e){return!isNaN(e)&&!isFinite(e)}function Y5(e,t,r,n){var i=1-e;return Qm(t[i])&&Qm(r[i])}function qut(e,t){var r=t.coord[0],n=t.coord[1],i={coord:r,x:t.x0,y:t.y0},o={coord:n,x:t.x1,y:t.y1};return bf(e,"cartesian2d")?r&&n&&(Y5(1,r,n)||Y5(0,r,n))?!0:Nut(e,i,o):Km(e,i)||Km(e,o)}function q5(e,t,r,n,i){var o=n.coordinateSystem,a=e.getItemModel(t),s,l=We(a.get(r[0]),i.getWidth()),u=We(a.get(r[1]),i.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(n.getMarkerPosition)s=n.getMarkerPosition(e.getValues(r,t));else{var c=e.get(r[0],t),f=e.get(r[1],t),h=[c,f];o.clampData&&o.clampData(h,h),s=o.dataToPoint(h,!0)}if(bf(o,"cartesian2d")){var d=o.getAxis("x"),p=o.getAxis("y"),c=e.get(r[0],t),f=e.get(r[1],t);Qm(c)?s[0]=d.toGlobalCoord(d.getExtent()[r[0]==="x0"?0:1]):Qm(f)&&(s[1]=p.toGlobalCoord(p.getExtent()[r[1]==="y0"?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}return s}var Z5=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],Zut=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,n,i){n.eachSeries(function(o){var a=Qc.getMarkerModelFromSeries(o,"markArea");if(a){var s=a.getData();s.each(function(l){var u=Ct(Z5,function(f){return q5(s,l,f,o,i)});s.setItemLayout(l,u);var c=s.getItemGraphicEl(l);c.setShape("points",u)})}},this)},t.prototype.renderSeries=function(r,n,i,o){var a=r.coordinateSystem,s=r.id,l=r.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,{group:new De});this.group.add(c.group),this.markKeep(c);var f=Kut(a,r,n);n.setData(f),f.each(function(h){var d=Ct(Z5,function(A){return q5(f,h,A,r,o)}),p=a.getAxis("x").scale,v=a.getAxis("y").scale,g=p.getExtent(),m=v.getExtent(),_=[p.parse(f.get("x0",h)),p.parse(f.get("x1",h))],y=[v.parse(f.get("y0",h)),v.parse(f.get("y1",h))];Om(_),Om(y);var w=!(g[0]>_[1]||g[1]<_[0]||m[0]>y[1]||m[1]<y[0]),T=!w;f.setItemLayout(h,{points:d,allClipped:T});var S=f.getItemModel(h).getModel("itemStyle").getItemStyle(),P=d_(l,"color");S.fill||(S.fill=P,Et(S.fill)&&(S.fill=xS(S.fill,.4))),S.stroke||(S.stroke=P),f.setItemVisual(h,"style",S)}),f.diff(hv(c).data).add(function(h){var d=f.getItemLayout(h);if(!d.allClipped){var p=new Qd({shape:{points:d.points}});f.setItemGraphicEl(h,p),c.group.add(p)}}).update(function(h,d){var p=hv(c).data.getItemGraphicEl(d),v=f.getItemLayout(h);v.allClipped?p&&c.group.remove(p):(p?dr(p,{shape:{points:v.points}},n,h):p=new Qd({shape:{points:v.points}}),f.setItemGraphicEl(h,p),c.group.add(p))}).remove(function(h){var d=hv(c).data.getItemGraphicEl(h);c.group.remove(d)}).execute(),f.eachItemGraphicEl(function(h,d){var p=f.getItemModel(d),v=f.getItemVisual(d,"style");h.useStyle(f.getItemVisual(d,"style")),gf(h,pu(p),{labelFetcher:n,labelDataIndex:d,defaultText:f.getName(d)||"",inheritColor:Et(v.fill)?xS(v.fill,1):"#000"}),Jd(h,p),tu(h,null,null,p.get(["emphasis","disabled"])),ie(h).dataModel=n}),hv(c).data=f,c.group.silent=n.get("silent")||r.get("silent")},t.type="markArea",t}(u$);function Kut(e,t,r){var n,i,o=["x0","y0","x1","y1"];if(e){var a=Ct(e&&e.dimensions,function(u){var c=t.getData(),f=c.getDimensionInfo(c.mapDimension(u))||{};return at(at({},f),{name:u,ordinalMeta:null})});i=Ct(o,function(u,c){return{name:u,type:a[c%2].type}}),n=new Ul(i,r)}else i=[{name:"value",type:"float"}],n=new Ul(i,r);var s=Ct(r.get("data"),be(Yut,t,e,r));e&&(s=wr(s,be(qut,e)));var l=e?function(u,c,f,h){var d=u.coord[Math.floor(h/2)][h%2];return Ts(d,i[h])}:function(u,c,f,h){return Ts(u.value,i[h])};return n.initData(s,null,l),n.hasItemOption=!0,n}const Jut=Zut;function V0(e){e.registerComponentModel(Xut),e.registerComponentView(Jut),e.registerPreprocessor(function(t){a$(t.series,"markArea")&&(t.markArea=t.markArea||{})})}var Qut=function(e,t){if(t==="all")return{type:"all",title:e.getLocaleModel().get(["legend","selector","all"])};if(t==="inverse")return{type:"inverse",title:e.getLocaleModel().get(["legend","selector","inverse"])}},tct=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i),r.selected=r.selected||{},this._updateSelector(r)},t.prototype.mergeOption=function(r,n){e.prototype.mergeOption.call(this,r,n),this._updateSelector(r)},t.prototype._updateSelector=function(r){var n=r.selector,i=this.ecModel;n===!0&&(n=r.selector=["all","inverse"]),ct(n)&&F(n,function(o,a){Et(o)&&(o={type:o}),n[a]=oe(o,Qut(i,o.type))})},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var r=this._data;if(r[0]&&this.get("selectedMode")==="single"){for(var n=!1,i=0;i<r.length;i++){var o=r[i].get("name");if(this.isSelected(o)){this.select(o),n=!0;break}}!n&&this.select(r[0].get("name"))}},t.prototype._updateData=function(r){var n=[],i=[];r.eachRawSeries(function(s){var l=s.name;i.push(l);var u;if(s.legendVisualProvider){var c=s.legendVisualProvider,f=c.getAllNames();r.isSeriesFiltered(s)||(i=i.concat(f)),f.length?n=n.concat(f):u=!0}else u=!0;u&&BP(s)&&n.push(s.name)}),this._availableNames=i;var o=this.get("data")||n,a=Ct(o,function(s){return(Et(s)||we(s))&&(s={name:s}),new Pr(s,this,this.ecModel)},this);this._data=a},t.prototype.getData=function(){return this._data},t.prototype.select=function(r){var n=this.option.selected,i=this.get("selectedMode");if(i==="single"){var o=this._data;F(o,function(a){n[a.get("name")]=!1})}n[r]=!0},t.prototype.unSelect=function(r){this.get("selectedMode")!=="single"&&(this.option.selected[r]=!1)},t.prototype.toggleSelected=function(r){var n=this.option.selected;n.hasOwnProperty(r)||(n[r]=!0),this[n[r]?"unSelect":"select"](r)},t.prototype.allSelect=function(){var r=this._data,n=this.option.selected;F(r,function(i){n[i.get("name",!0)]=!0})},t.prototype.inverseSelect=function(){var r=this._data,n=this.option.selected;F(r,function(i){var o=i.get("name",!0);n.hasOwnProperty(o)||(n[o]=!0),n[o]=!n[o]})},t.prototype.isSelected=function(r){var n=this.option.selected;return!(n.hasOwnProperty(r)&&!n[r])&&ue(this._availableNames,r)>=0},t.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(Ce);const x3=tct;var Yu=be,L3=F,dv=De,ect=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.newlineDisabled=!1,r}return t.prototype.init=function(){this.group.add(this._contentGroup=new dv),this.group.add(this._selectorGroup=new dv),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(r,n,i){var o=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!r.get("show",!0)){var a=r.get("align"),s=r.get("orient");(!a||a==="auto")&&(a=r.get("left")==="right"&&s==="vertical"?"right":"left");var l=r.get("selector",!0),u=r.get("selectorPosition",!0);l&&(!u||u==="auto")&&(u=s==="horizontal"?"end":"start"),this.renderInner(a,r,n,i,l,s,u);var c=r.getBoxLayoutParams(),f={width:i.getWidth(),height:i.getHeight()},h=r.get("padding"),d=Ls(c,f,h),p=this.layoutInner(r,a,d,o,l,u),v=Ls(te({width:p.width,height:p.height},c),f,h);this.group.x=v.x-p.x,this.group.y=v.y-p.y,this.group.markRedraw(),this.group.add(this._backgroundEl=sut(p,r))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(r,n,i,o,a,s,l){var u=this.getContentGroup(),c=jt(),f=n.get("selectedMode"),h=[];i.eachRawSeries(function(d){!d.get("legendHoverLink")&&h.push(d.id)}),L3(n.getData(),function(d,p){var v=d.get("name");if(!this.newlineDisabled&&(v===""||v===`
`)){var g=new dv;g.newline=!0,u.add(g);return}var m=i.getSeriesByName(v)[0];if(!c.get(v))if(m){var _=m.getData(),y=_.getVisual("legendLineStyle")||{},w=_.getVisual("legendIcon"),T=_.getVisual("style"),S=this._createItem(m,v,p,d,n,r,y,T,w,f,o);S.on("click",Yu(K5,v,null,o,h)).on("mouseover",Yu(I3,m.name,null,o,h)).on("mouseout",Yu(O3,m.name,null,o,h)),c.set(v,!0)}else i.eachRawSeries(function(P){if(!c.get(v)&&P.legendVisualProvider){var A=P.legendVisualProvider;if(!A.containName(v))return;var k=A.indexOfName(v),C=A.getItemVisual(k,"style"),M=A.getItemVisual(k,"legendIcon"),D=Qn(C.fill);D&&D[3]===0&&(D[3]=.2,C=at(at({},C),{fill:fa(D,"rgba")}));var B=this._createItem(P,v,p,d,n,r,{},C,M,f,o);B.on("click",Yu(K5,null,v,o,h)).on("mouseover",Yu(I3,null,v,o,h)).on("mouseout",Yu(O3,null,v,o,h)),c.set(v,!0)}},this)},this),a&&this._createSelector(a,n,o,s,l)},t.prototype._createSelector=function(r,n,i,o,a){var s=this.getSelectorGroup();L3(r,function(u){var c=u.type,f=new Je({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:c==="all"?"legendAllSelect":"legendInverseSelect"})}});s.add(f);var h=n.getModel("selectorLabel"),d=n.getModel(["emphasis","selectorLabel"]);gf(f,{normal:h,emphasis:d},{defaultText:u.title}),XS(f)})},t.prototype._createItem=function(r,n,i,o,a,s,l,u,c,f,h){var d=r.visualDrawType,p=a.get("itemWidth"),v=a.get("itemHeight"),g=a.isSelected(n),m=o.get("symbolRotate"),_=o.get("symbolKeepAspect"),y=o.get("icon");c=y||c||"roundRect";var w=rct(c,o,l,u,d,g,h),T=new dv,S=o.getModel("textStyle");if(Ut(r.getLegendIcon)&&(!y||y==="inherit"))T.add(r.getLegendIcon({itemWidth:p,itemHeight:v,icon:c,iconRotate:m,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:_}));else{var P=y==="inherit"&&r.getData().getVisual("symbol")?m==="inherit"?r.getData().getVisual("symbolRotate"):m:0;T.add(nct({itemWidth:p,itemHeight:v,icon:c,iconRotate:P,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:_}))}var A=s==="left"?p+5:-5,k=s,C=a.get("formatter"),M=n;Et(C)&&C?M=C.replace("{name}",n!=null?n:""):Ut(C)&&(M=C(n));var D=o.get("inactiveColor");T.add(new Je({style:mn(S,{text:M,x:A,y:v/2,fill:g?S.getTextColor():D,align:k,verticalAlign:"middle"})}));var B=new Ke({shape:T.getBoundingRect(),invisible:!0}),V=o.getModel("tooltip");return V.get("show")&&tE({el:B,componentModel:a,itemName:n,itemTooltipOption:V.option}),T.add(B),T.eachChild(function(N){N.silent=!0}),B.silent=!f,this.getContentGroup().add(T),XS(T),T.__legendDataIndex=i,T},t.prototype.layoutInner=function(r,n,i,o,a,s){var l=this.getContentGroup(),u=this.getSelectorGroup();Bc(r.get("orient"),l,r.get("itemGap"),i.width,i.height);var c=l.getBoundingRect(),f=[-c.x,-c.y];if(u.markRedraw(),l.markRedraw(),a){Bc("horizontal",u,r.get("selectorItemGap",!0));var h=u.getBoundingRect(),d=[-h.x,-h.y],p=r.get("selectorButtonGap",!0),v=r.getOrient().index,g=v===0?"width":"height",m=v===0?"height":"width",_=v===0?"y":"x";s==="end"?d[v]+=c[g]+p:f[v]+=h[g]+p,d[1-v]+=c[m]/2-h[m]/2,u.x=d[0],u.y=d[1],l.x=f[0],l.y=f[1];var y={x:0,y:0};return y[g]=c[g]+p+h[g],y[m]=Math.max(c[m],h[m]),y[_]=Math.min(0,h[_]+d[1-v]),y}else return l.x=f[0],l.y=f[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(oi);function rct(e,t,r,n,i,o,a){function s(g,m){g.lineWidth==="auto"&&(g.lineWidth=m.lineWidth>0?2:0),L3(g,function(_,y){g[y]==="inherit"&&(g[y]=m[y])})}var l=t.getModel("itemStyle"),u=l.getItemStyle(),c=e.lastIndexOf("empty",0)===0?"fill":"stroke",f=l.getShallow("decal");u.decal=!f||f==="inherit"?n.decal:jm(f,a),u.fill==="inherit"&&(u.fill=n[i]),u.stroke==="inherit"&&(u.stroke=n[c]),u.opacity==="inherit"&&(u.opacity=(i==="fill"?n:r).opacity),s(u,n);var h=t.getModel("lineStyle"),d=h.getLineStyle();if(s(d,r),u.fill==="auto"&&(u.fill=n.fill),u.stroke==="auto"&&(u.stroke=n.fill),d.stroke==="auto"&&(d.stroke=n.fill),!o){var p=t.get("inactiveBorderWidth"),v=u[c];u.lineWidth=p==="auto"?n.lineWidth>0&&v?2:0:u.lineWidth,u.fill=t.get("inactiveColor"),u.stroke=t.get("inactiveBorderColor"),d.stroke=h.get("inactiveColor"),d.lineWidth=h.get("inactiveWidth")}return{itemStyle:u,lineStyle:d}}function nct(e){var t=e.icon||"roundRect",r=Bi(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill,e.symbolKeepAspect);return r.setStyle(e.itemStyle),r.rotation=(e.iconRotate||0)*Math.PI/180,r.setOrigin([e.itemWidth/2,e.itemHeight/2]),t.indexOf("empty")>-1&&(r.style.stroke=r.style.fill,r.style.fill="#fff",r.style.lineWidth=2),r}function K5(e,t,r,n){O3(e,t,r,n),r.dispatchAction({type:"legendToggleSelect",name:e!=null?e:t}),I3(e,t,r,n)}function c$(e){for(var t=e.getZr().storage.getDisplayList(),r,n=0,i=t.length;n<i&&!(r=t[n].states.emphasis);)n++;return r&&r.hoverLayer}function I3(e,t,r,n){c$(r)||r.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:n})}function O3(e,t,r,n){c$(r)||r.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:n})}const f$=ect;function ict(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries(function(r){for(var n=0;n<t.length;n++)if(!t[n].isSelected(r.name))return!1;return!0})}function _h(e,t,r){var n={},i=e==="toggleSelected",o;return r.eachComponent("legend",function(a){i&&o!=null?a[o?"select":"unSelect"](t.name):e==="allSelect"||e==="inverseSelect"?a[e]():(a[e](t.name),o=a.isSelected(t.name));var s=a.getData();F(s,function(l){var u=l.get("name");if(!(u===`
`||u==="")){var c=a.isSelected(u);n.hasOwnProperty(u)?n[u]=n[u]&&c:n[u]=c}})}),e==="allSelect"||e==="inverseSelect"?{selected:n}:{name:t.name,selected:n}}function oct(e){e.registerAction("legendToggleSelect","legendselectchanged",be(_h,"toggleSelected")),e.registerAction("legendAllSelect","legendselectall",be(_h,"allSelect")),e.registerAction("legendInverseSelect","legendinverseselect",be(_h,"inverseSelect")),e.registerAction("legendSelect","legendselected",be(_h,"select")),e.registerAction("legendUnSelect","legendunselected",be(_h,"unSelect"))}function h$(e){e.registerComponentModel(x3),e.registerComponentView(f$),e.registerProcessor(e.PRIORITY.PROCESSOR.SERIES_FILTER,ict),e.registerSubTypeDefaulter("legend",function(){return"plain"}),oct(e)}var act=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.setScrollDataIndex=function(r){this.option.scrollDataIndex=r},t.prototype.init=function(r,n,i){var o=l_(r);e.prototype.init.call(this,r,n,i),J5(this,r,o)},t.prototype.mergeOption=function(r,n){e.prototype.mergeOption.call(this,r,n),J5(this,this.option,r)},t.type="legend.scroll",t.defaultOption=r_(x3.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}(x3);function J5(e,t,r){var n=e.getOrient(),i=[1,1];i[n.index]=0,Zc(t,r,{type:"box",ignoreSize:!!i})}const sct=act;var Q5=De,J2=["width","height"],Q2=["x","y"],lct=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.newlineDisabled=!0,r._currentIndex=0,r}return t.prototype.init=function(){e.prototype.init.call(this),this.group.add(this._containerGroup=new Q5),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Q5)},t.prototype.resetInner=function(){e.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(r,n,i,o,a,s,l){var u=this;e.prototype.renderInner.call(this,r,n,i,o,a,s,l);var c=this._controllerGroup,f=n.get("pageIconSize",!0),h=ct(f)?f:[f,f];p("pagePrev",0);var d=n.getModel("pageTextStyle");c.add(new Je({name:"pageText",style:{text:"xx/xx",fill:d.getTextColor(),font:d.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1);function p(v,g){var m=v+"DataIndex",_=QP(n.get("pageIcons",!0)[n.getOrient().name][g],{onclick:Vt(u._pageGo,u,m,n,o)},{x:-h[0]/2,y:-h[1]/2,width:h[0],height:h[1]});_.name=v,c.add(_)}},t.prototype.layoutInner=function(r,n,i,o,a,s){var l=this.getSelectorGroup(),u=r.getOrient().index,c=J2[u],f=Q2[u],h=J2[1-u],d=Q2[1-u];a&&Bc("horizontal",l,r.get("selectorItemGap",!0));var p=r.get("selectorButtonGap",!0),v=l.getBoundingRect(),g=[-v.x,-v.y],m=zt(i);a&&(m[c]=i[c]-v[c]-p);var _=this._layoutContentAndController(r,o,m,u,c,h,d,f);if(a){if(s==="end")g[u]+=_[c]+p;else{var y=v[c]+p;g[u]-=y,_[f]-=y}_[c]+=v[c]+p,g[1-u]+=_[d]+_[h]/2-v[h]/2,_[h]=Math.max(_[h],v[h]),_[d]=Math.min(_[d],v[d]+g[1-u]),l.x=g[0],l.y=g[1],l.markRedraw()}return _},t.prototype._layoutContentAndController=function(r,n,i,o,a,s,l,u){var c=this.getContentGroup(),f=this._containerGroup,h=this._controllerGroup;Bc(r.get("orient"),c,r.get("itemGap"),o?i.width:null,o?null:i.height),Bc("horizontal",h,r.get("pageButtonItemGap",!0));var d=c.getBoundingRect(),p=h.getBoundingRect(),v=this._showController=d[a]>i[a],g=[-d.x,-d.y];n||(g[o]=c[u]);var m=[0,0],_=[-p.x,-p.y],y=qt(r.get("pageButtonGap",!0),r.get("itemGap",!0));if(v){var w=r.get("pageButtonPosition",!0);w==="end"?_[o]+=i[a]-p[a]:m[o]+=p[a]+y}_[1-o]+=d[s]/2-p[s]/2,c.setPosition(g),f.setPosition(m),h.setPosition(_);var T={x:0,y:0};if(T[a]=v?i[a]:d[a],T[s]=Math.max(d[s],p[s]),T[l]=Math.min(0,p[l]+_[1-o]),f.__rectSize=i[a],v){var S={x:0,y:0};S[a]=Math.max(i[a]-p[a]-y,0),S[s]=T[s],f.setClipPath(new Ke({shape:S})),f.__rectSize=S[a]}else h.eachChild(function(A){A.attr({invisible:!0,silent:!0})});var P=this._getPageInfo(r);return P.pageIndex!=null&&dr(c,{x:P.contentPosition[0],y:P.contentPosition[1]},v?r:null),this._updatePageInfoView(r,P),T},t.prototype._pageGo=function(r,n,i){var o=this._getPageInfo(n)[r];o!=null&&i.dispatchAction({type:"legendScroll",scrollDataIndex:o,legendId:n.id})},t.prototype._updatePageInfoView=function(r,n){var i=this._controllerGroup;F(["pagePrev","pageNext"],function(c){var f=c+"DataIndex",h=n[f]!=null,d=i.childOfName(c);d&&(d.setStyle("fill",h?r.get("pageIconColor",!0):r.get("pageIconInactiveColor",!0)),d.cursor=h?"pointer":"default")});var o=i.childOfName("pageText"),a=r.get("pageFormatter"),s=n.pageIndex,l=s!=null?s+1:0,u=n.pageCount;o&&a&&o.setStyle("text",Et(a)?a.replace("{current}",l==null?"":l+"").replace("{total}",u==null?"":u+""):a({current:l,total:u}))},t.prototype._getPageInfo=function(r){var n=r.get("scrollDataIndex",!0),i=this.getContentGroup(),o=this._containerGroup.__rectSize,a=r.getOrient().index,s=J2[a],l=Q2[a],u=this._findTargetItemIndex(n),c=i.children(),f=c[u],h=c.length,d=h?1:0,p={contentPosition:[i.x,i.y],pageCount:d,pageIndex:d-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!f)return p;var v=w(f);p.contentPosition[a]=-v.s;for(var g=u+1,m=v,_=v,y=null;g<=h;++g)y=w(c[g]),(!y&&_.e>m.s+o||y&&!T(y,m.s))&&(_.i>m.i?m=_:m=y,m&&(p.pageNextDataIndex==null&&(p.pageNextDataIndex=m.i),++p.pageCount)),_=y;for(var g=u-1,m=v,_=v,y=null;g>=-1;--g)y=w(c[g]),(!y||!T(_,y.s))&&m.i<_.i&&(_=m,p.pagePrevDataIndex==null&&(p.pagePrevDataIndex=m.i),++p.pageCount,++p.pageIndex),m=y;return p;function w(S){if(S){var P=S.getBoundingRect(),A=P[l]+S[l];return{s:A,e:A+P[s],i:S.__legendDataIndex}}}function T(S,P){return S.e>=P&&S.s<=P+o}},t.prototype._findTargetItemIndex=function(r){if(!this._showController)return 0;var n,i=this.getContentGroup(),o;return i.eachChild(function(a,s){var l=a.__legendDataIndex;o==null&&l!=null&&(o=s),l===r&&(n=s)}),n!=null?n:o},t.type="legend.scroll",t}(f$);const uct=lct;function cct(e){e.registerAction("legendScroll","legendscroll",function(t,r){var n=t.scrollDataIndex;n!=null&&r.eachComponent({mainType:"legend",subType:"scroll",query:t},function(i){i.setScrollDataIndex(n)})})}function fct(e){Hr(h$),e.registerComponentModel(sct),e.registerComponentView(uct),cct(e)}function Tf(e){Hr(h$),Hr(fct)}var hct={get:function(e,t,r){var n=zt((dct[e]||{})[t]);return r&&ct(n)?n[n.length-1]:n}},dct={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}};const d$=hct;var tx=_n.mapVisual,pct=_n.eachVisual,vct=ct,ex=F,gct=Om,mct=ma,_ct=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.stateList=["inRange","outOfRange"],r.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],r.layoutMode={type:"box",ignoreSize:!0},r.dataBound=[-1/0,1/0],r.targetVisuals={},r.controllerVisuals={},r}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i)},t.prototype.optionUpdated=function(r,n){var i=this.option;!n&&xut(i,r,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},t.prototype.resetVisual=function(r){var n=this.stateList;r=Vt(r,this),this.controllerVisuals=H5(this.option.controller,n,r),this.targetVisuals=H5(this.option.target,n,r)},t.prototype.getItemSymbol=function(){return null},t.prototype.getTargetSeriesIndices=function(){var r=this.option.seriesIndex,n=[];return r==null||r==="all"?this.ecModel.eachSeries(function(i,o){n.push(o)}):n=Ze(r),n},t.prototype.eachTargetSeries=function(r,n){F(this.getTargetSeriesIndices(),function(i){var o=this.ecModel.getSeriesByIndex(i);o&&r.call(n,o)},this)},t.prototype.isTargetSeries=function(r){var n=!1;return this.eachTargetSeries(function(i){i===r&&(n=!0)}),n},t.prototype.formatValueText=function(r,n,i){var o=this.option,a=o.precision,s=this.dataBound,l=o.formatter,u;i=i||["<",">"],ct(r)&&(r=r.slice(),u=!0);var c=n?r:u?[f(r[0]),f(r[1])]:f(r);if(Et(l))return l.replace("{value}",u?c[0]:c).replace("{value2}",u?c[1]:c);if(Ut(l))return u?l(r[0],r[1]):l(r);if(u)return r[0]===s[0]?i[0]+" "+c[1]:r[1]===s[1]?i[1]+" "+c[0]:c[0]+" - "+c[1];return c;function f(h){return h===s[0]?"min":h===s[1]?"max":(+h).toFixed(Math.min(a,20))}},t.prototype.resetExtent=function(){var r=this.option,n=gct([r.min,r.max]);this._dataExtent=n},t.prototype.getDataDimensionIndex=function(r){var n=this.option.dimension;if(n!=null)return r.getDimensionIndex(n);for(var i=r.dimensions,o=i.length-1;o>=0;o--){var a=i[o],s=r.getDimensionInfo(a);if(!s.isCalculationCoord)return s.storeDimIndex}},t.prototype.getExtent=function(){return this._dataExtent.slice()},t.prototype.completeVisualOption=function(){var r=this.ecModel,n=this.option,i={inRange:n.inRange,outOfRange:n.outOfRange},o=n.target||(n.target={}),a=n.controller||(n.controller={});oe(o,i),oe(a,i);var s=this.isCategory();l.call(this,o),l.call(this,a),u.call(this,o,"inRange","outOfRange"),c.call(this,a);function l(f){vct(n.color)&&!f.inRange&&(f.inRange={color:n.color.slice().reverse()}),f.inRange=f.inRange||{color:r.get("gradientColor")}}function u(f,h,d){var p=f[h],v=f[d];p&&!v&&(v=f[d]={},ex(p,function(g,m){if(!!_n.isValidType(m)){var _=d$.get(m,"inactive",s);_!=null&&(v[m]=_,m==="color"&&!v.hasOwnProperty("opacity")&&!v.hasOwnProperty("colorAlpha")&&(v.opacity=[0,0]))}}))}function c(f){var h=(f.inRange||{}).symbol||(f.outOfRange||{}).symbol,d=(f.inRange||{}).symbolSize||(f.outOfRange||{}).symbolSize,p=this.get("inactiveColor"),v=this.getItemSymbol(),g=v||"roundRect";ex(this.stateList,function(m){var _=this.itemSize,y=f[m];y||(y=f[m]={color:s?p:[p]}),y.symbol==null&&(y.symbol=h&&zt(h)||(s?g:[g])),y.symbolSize==null&&(y.symbolSize=d&&zt(d)||(s?_[0]:[_[0],_[0]])),y.symbol=tx(y.symbol,function(S){return S==="none"?g:S});var w=y.symbolSize;if(w!=null){var T=-1/0;pct(w,function(S){S>T&&(T=S)}),y.symbolSize=tx(w,function(S){return mct(S,[0,T],[0,_[0]],!0)})}},this)}},t.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},t.prototype.isCategory=function(){return!!this.option.categories},t.prototype.setSelected=function(r){},t.prototype.getSelected=function(){return null},t.prototype.getValueState=function(r){return null},t.prototype.getVisualMeta=function(r){return null},t.type="visualMap",t.dependencies=["series"],t.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},t}(Ce);const t1=_ct;var rx=[20,140],yct=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(r,n){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(i){i.mappingMethod="linear",i.dataExtent=this.getExtent()}),this._resetRange()},t.prototype.resetItemSize=function(){e.prototype.resetItemSize.apply(this,arguments);var r=this.itemSize;(r[0]==null||isNaN(r[0]))&&(r[0]=rx[0]),(r[1]==null||isNaN(r[1]))&&(r[1]=rx[1])},t.prototype._resetRange=function(){var r=this.getExtent(),n=this.option.range;!n||n.auto?(r.auto=1,this.option.range=r):ct(n)&&(n[0]>n[1]&&n.reverse(),n[0]=Math.max(n[0],r[0]),n[1]=Math.min(n[1],r[1]))},t.prototype.completeVisualOption=function(){e.prototype.completeVisualOption.apply(this,arguments),F(this.stateList,function(r){var n=this.option.controller[r].symbolSize;n&&n[0]!==n[1]&&(n[0]=n[1]/3)},this)},t.prototype.setSelected=function(r){this.option.range=r.slice(),this._resetRange()},t.prototype.getSelected=function(){var r=this.getExtent(),n=Om((this.get("range")||[]).slice());return n[0]>r[1]&&(n[0]=r[1]),n[1]>r[1]&&(n[1]=r[1]),n[0]<r[0]&&(n[0]=r[0]),n[1]<r[0]&&(n[1]=r[0]),n},t.prototype.getValueState=function(r){var n=this.option.range,i=this.getExtent();return(n[0]<=i[0]||n[0]<=r)&&(n[1]>=i[1]||r<=n[1])?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(r){var n=[];return this.eachTargetSeries(function(i){var o=[],a=i.getData();a.each(this.getDataDimensionIndex(a),function(s,l){r[0]<=s&&s<=r[1]&&o.push(l)},this),n.push({seriesId:i.id,dataIndex:o})},this),n},t.prototype.getVisualMeta=function(r){var n=nx(this,"outOfRange",this.getExtent()),i=nx(this,"inRange",this.option.range.slice()),o=[];function a(d,p){o.push({value:d,color:r(d,p)})}for(var s=0,l=0,u=i.length,c=n.length;l<c&&(!i.length||n[l]<=i[0]);l++)n[l]<i[s]&&a(n[l],"outOfRange");for(var f=1;s<u;s++,f=0)f&&o.length&&a(i[s],"outOfRange"),a(i[s],"inRange");for(var f=1;l<c;l++)(!i.length||i[i.length-1]<n[l])&&(f&&(o.length&&a(o[o.length-1].value,"outOfRange"),f=0),a(n[l],"outOfRange"));var h=o.length;return{stops:o,outerColors:[h?o[0].color:"transparent",h?o[h-1].color:"transparent"]}},t.type="visualMap.continuous",t.defaultOption=r_(t1.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),t}(t1);function nx(e,t,r){if(r[0]===r[1])return r.slice();for(var n=200,i=(r[1]-r[0])/n,o=r[0],a=[],s=0;s<=n&&o<r[1];s++)a.push(o),o+=i;return a.push(r[1]),a}const bct=yct;var wct=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.autoPositionValues={left:1,right:1,top:1,bottom:1},r}return t.prototype.init=function(r,n){this.ecModel=r,this.api=n},t.prototype.render=function(r,n,i,o){if(this.visualMapModel=r,r.get("show")===!1){this.group.removeAll();return}this.doRender(r,n,i,o)},t.prototype.renderBackground=function(r){var n=this.visualMapModel,i=R0(n.get("padding")||0),o=r.getBoundingRect();r.add(new Ke({z2:-1,silent:!0,shape:{x:o.x-i[3],y:o.y-i[0],width:o.width+i[3]+i[1],height:o.height+i[0]+i[2]},style:{fill:n.get("backgroundColor"),stroke:n.get("borderColor"),lineWidth:n.get("borderWidth")}}))},t.prototype.getControllerVisual=function(r,n,i){i=i||{};var o=i.forceState,a=this.visualMapModel,s={};if(n==="color"){var l=a.get("contentColor");s.color=l}function u(d){return s[d]}function c(d,p){s[d]=p}var f=a.controllerVisuals[o||a.getValueState(r)],h=_n.prepareVisualTypes(f);return F(h,function(d){var p=f[d];i.convertOpacityToAlpha&&d==="opacity"&&(d="colorAlpha",p=f.__alphaForOpacity),_n.dependsOn(d,n)&&p&&p.applyVisual(r,u,c)}),s[n]},t.prototype.positionGroup=function(r){var n=this.visualMapModel,i=this.api;Ntt(r,n.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()})},t.prototype.doRender=function(r,n,i,o){},t.type="visualMap",t}(oi);const p$=wct;var ix=[["left","right","width"],["top","bottom","height"]];function v$(e,t,r){var n=e.option,i=n.align;if(i!=null&&i!=="auto")return i;for(var o={width:t.getWidth(),height:t.getHeight()},a=n.orient==="horizontal"?1:0,s=ix[a],l=[0,null,10],u={},c=0;c<3;c++)u[ix[1-a][c]]=l[c],u[s[c]]=c===2?r[0]:n[s[c]];var f=[["x","width",3],["y","height",0]][a],h=Ls(u,o,n.padding);return s[(h.margin[f[2]]||0)+h[f[0]]+h[f[1]]*.5<o[f[1]]*.5?0:1]}function Zg(e,t){return F(e||[],function(r){r.dataIndex!=null&&(r.dataIndexInside=r.dataIndex,r.dataIndex=null),r.highlightKey="visualMap"+(t?t.componentIndex:"")}),e}var vo=ma,Sct=F,ox=Math.min,tb=Math.max,Tct=12,Pct=6,Ect=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._shapes={},r._dataInterval=[],r._handleEnds=[],r._hoverLinkDataIndices=[],r}return t.prototype.doRender=function(r,n,i,o){this._api=i,(!o||o.type!=="selectDataRange"||o.from!==this.uid)&&this._buildView()},t.prototype._buildView=function(){this.group.removeAll();var r=this.visualMapModel,n=this.group;this._orient=r.get("orient"),this._useHandle=r.get("calculable"),this._resetInterval(),this._renderBar(n);var i=r.get("text");this._renderEndsText(n,i,0),this._renderEndsText(n,i,1),this._updateView(!0),this.renderBackground(n),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(n)},t.prototype._renderEndsText=function(r,n,i){if(!!n){var o=n[1-i];o=o!=null?o+"":"";var a=this.visualMapModel,s=a.get("textGap"),l=a.itemSize,u=this._shapes.mainGroup,c=this._applyTransform([l[0]/2,i===0?-s:l[1]+s],u),f=this._applyTransform(i===0?"bottom":"top",u),h=this._orient,d=this.visualMapModel.textStyleModel;this.group.add(new Je({style:mn(d,{x:c[0],y:c[1],verticalAlign:h==="horizontal"?"middle":f,align:h==="horizontal"?f:"center",text:o})}))}},t.prototype._renderBar=function(r){var n=this.visualMapModel,i=this._shapes,o=n.itemSize,a=this._orient,s=this._useHandle,l=v$(n,this.api,o),u=i.mainGroup=this._createBarGroup(l),c=new De;u.add(c),c.add(i.outOfRange=ax()),c.add(i.inRange=ax(null,s?lx(this._orient):null,Vt(this._dragHandle,this,"all",!1),Vt(this._dragHandle,this,"all",!0))),c.setClipPath(new Ke({shape:{x:0,y:0,width:o[0],height:o[1],r:3}}));var f=n.textStyleModel.getTextRect("\u56FD"),h=tb(f.width,f.height);s&&(i.handleThumbs=[],i.handleLabels=[],i.handleLabelPoints=[],this._createHandle(n,u,0,o,h,a),this._createHandle(n,u,1,o,h,a)),this._createIndicator(n,u,o,h,a),r.add(u)},t.prototype._createHandle=function(r,n,i,o,a,s){var l=Vt(this._dragHandle,this,i,!1),u=Vt(this._dragHandle,this,i,!0),c=ga(r.get("handleSize"),o[0]),f=Bi(r.get("handleIcon"),-c/2,-c/2,c,c,null,!0),h=lx(this._orient);f.attr({cursor:h,draggable:!0,drift:l,ondragend:u,onmousemove:function(m){Kl(m.event)}}),f.x=o[0]/2,f.useStyle(r.getModel("handleStyle").getItemStyle()),f.setStyle({strokeNoScale:!0,strokeFirst:!0}),f.style.lineWidth*=2,f.ensureState("emphasis").style=r.getModel(["emphasis","handleStyle"]).getItemStyle(),XP(f,!0),n.add(f);var d=this.visualMapModel.textStyleModel,p=new Je({cursor:h,draggable:!0,drift:l,onmousemove:function(m){Kl(m.event)},ondragend:u,style:mn(d,{x:0,y:0,text:""})});p.ensureState("blur").style={opacity:.1},p.stateTransition={duration:200},this.group.add(p);var v=[c,0],g=this._shapes;g.handleThumbs[i]=f,g.handleLabelPoints[i]=v,g.handleLabels[i]=p},t.prototype._createIndicator=function(r,n,i,o,a){var s=ga(r.get("indicatorSize"),i[0]),l=Bi(r.get("indicatorIcon"),-s/2,-s/2,s,s,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:i[0]/2});var u=r.getModel("indicatorStyle").getItemStyle();if(l instanceof ka){var c=l.style;l.useStyle(at({image:c.image,x:c.x,y:c.y,width:c.width,height:c.height},u))}else l.useStyle(u);n.add(l);var f=this.visualMapModel.textStyleModel,h=new Je({silent:!0,invisible:!0,style:mn(f,{x:0,y:0,text:""})});this.group.add(h);var d=[(a==="horizontal"?o/2:Pct)+i[0]/2,0],p=this._shapes;p.indicator=l,p.indicatorLabel=h,p.indicatorLabelPoint=d,this._firstShowIndicator=!0},t.prototype._dragHandle=function(r,n,i,o){if(!!this._useHandle){if(this._dragging=!n,!n){var a=this._applyTransform([i,o],this._shapes.mainGroup,!0);this._updateInterval(r,a[1]),this._hideIndicator(),this._updateView()}n===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),n?!this._hovering&&this._clearHoverLinkToSeries():sx(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[r],!1)}},t.prototype._resetInterval=function(){var r=this.visualMapModel,n=this._dataInterval=r.getSelected(),i=r.getExtent(),o=[0,r.itemSize[1]];this._handleEnds=[vo(n[0],i,o,!0),vo(n[1],i,o,!0)]},t.prototype._updateInterval=function(r,n){n=n||0;var i=this.visualMapModel,o=this._handleEnds,a=[0,i.itemSize[1]];Ust(n,o,a,r,0);var s=i.getExtent();this._dataInterval=[vo(o[0],a,s,!0),vo(o[1],a,s,!0)]},t.prototype._updateView=function(r){var n=this.visualMapModel,i=n.getExtent(),o=this._shapes,a=[0,n.itemSize[1]],s=r?a:this._handleEnds,l=this._createBarVisual(this._dataInterval,i,s,"inRange"),u=this._createBarVisual(i,i,a,"outOfRange");o.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),o.outOfRange.setStyle({fill:u.barColor}).setShape("points",u.barPoints),this._updateHandle(s,l)},t.prototype._createBarVisual=function(r,n,i,o){var a={forceState:o,convertOpacityToAlpha:!0},s=this._makeColorGradient(r,a),l=[this.getControllerVisual(r[0],"symbolSize",a),this.getControllerVisual(r[1],"symbolSize",a)],u=this._createBarPoints(i,l);return{barColor:new ZP(0,0,0,1,s),barPoints:u,handlesColor:[s[0].color,s[s.length-1].color]}},t.prototype._makeColorGradient=function(r,n){var i=100,o=[],a=(r[1]-r[0])/i;o.push({color:this.getControllerVisual(r[0],"color",n),offset:0});for(var s=1;s<i;s++){var l=r[0]+a*s;if(l>r[1])break;o.push({color:this.getControllerVisual(l,"color",n),offset:s/i})}return o.push({color:this.getControllerVisual(r[1],"color",n),offset:1}),o},t.prototype._createBarPoints=function(r,n){var i=this.visualMapModel.itemSize;return[[i[0]-n[0],r[0]],[i[0],r[0]],[i[0],r[1]],[i[0]-n[1],r[1]]]},t.prototype._createBarGroup=function(r){var n=this._orient,i=this.visualMapModel.get("inverse");return new De(n==="horizontal"&&!i?{scaleX:r==="bottom"?1:-1,rotation:Math.PI/2}:n==="horizontal"&&i?{scaleX:r==="bottom"?-1:1,rotation:-Math.PI/2}:n==="vertical"&&!i?{scaleX:r==="left"?1:-1,scaleY:-1}:{scaleX:r==="left"?1:-1})},t.prototype._updateHandle=function(r,n){if(!!this._useHandle){var i=this._shapes,o=this.visualMapModel,a=i.handleThumbs,s=i.handleLabels,l=o.itemSize,u=o.getExtent();Sct([0,1],function(c){var f=a[c];f.setStyle("fill",n.handlesColor[c]),f.y=r[c];var h=vo(r[c],[0,l[1]],u,!0),d=this.getControllerVisual(h,"symbolSize");f.scaleX=f.scaleY=d/l[0],f.x=l[0]-d/2;var p=Dc(i.handleLabelPoints[c],jg(f,this.group));s[c].setStyle({x:p[0],y:p[1],text:o.formatValueText(this._dataInterval[c]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",i.mainGroup):"center"})},this)}},t.prototype._showIndicator=function(r,n,i,o){var a=this.visualMapModel,s=a.getExtent(),l=a.itemSize,u=[0,l[1]],c=this._shapes,f=c.indicator;if(!!f){f.attr("invisible",!1);var h={convertOpacityToAlpha:!0},d=this.getControllerVisual(r,"color",h),p=this.getControllerVisual(r,"symbolSize"),v=vo(r,s,u,!0),g=l[0]-p/2,m={x:f.x,y:f.y};f.y=v,f.x=g;var _=Dc(c.indicatorLabelPoint,jg(f,this.group)),y=c.indicatorLabel;y.attr("invisible",!1);var w=this._applyTransform("left",c.mainGroup),T=this._orient,S=T==="horizontal";y.setStyle({text:(i||"")+a.formatValueText(n),verticalAlign:S?w:"middle",align:S?"center":w});var P={x:g,y:v,style:{fill:d}},A={style:{x:_[0],y:_[1]}};if(a.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var k={duration:100,easing:"cubicInOut",additive:!0};f.x=m.x,f.y=m.y,f.animateTo(P,k),y.animateTo(A,k)}else f.attr(P),y.attr(A);this._firstShowIndicator=!1;var C=this._shapes.handleLabels;if(C)for(var M=0;M<C.length;M++)this._api.enterBlur(C[M])}},t.prototype._enableHoverLinkToSeries=function(){var r=this;this._shapes.mainGroup.on("mousemove",function(n){if(r._hovering=!0,!r._dragging){var i=r.visualMapModel.itemSize,o=r._applyTransform([n.offsetX,n.offsetY],r._shapes.mainGroup,!0,!0);o[1]=ox(tb(0,o[1]),i[1]),r._doHoverLinkToSeries(o[1],0<=o[0]&&o[0]<=i[0])}}).on("mouseout",function(){r._hovering=!1,!r._dragging&&r._clearHoverLinkToSeries()})},t.prototype._enableHoverLinkFromSeries=function(){var r=this.api.getZr();this.visualMapModel.option.hoverLink?(r.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),r.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},t.prototype._doHoverLinkToSeries=function(r,n){var i=this.visualMapModel,o=i.itemSize;if(!!i.option.hoverLink){var a=[0,o[1]],s=i.getExtent();r=ox(tb(a[0],r),a[1]);var l=kct(i,s,a),u=[r-l,r+l],c=vo(r,a,s,!0),f=[vo(u[0],a,s,!0),vo(u[1],a,s,!0)];u[0]<a[0]&&(f[0]=-1/0),u[1]>a[1]&&(f[1]=1/0),n&&(f[0]===-1/0?this._showIndicator(c,f[1],"< ",l):f[1]===1/0?this._showIndicator(c,f[0],"> ",l):this._showIndicator(c,c,"\u2248 ",l));var h=this._hoverLinkDataIndices,d=[];(n||sx(i))&&(d=this._hoverLinkDataIndices=i.findTargetDataIndices(f));var p=HK(h,d);this._dispatchHighDown("downplay",Zg(p[0],i)),this._dispatchHighDown("highlight",Zg(p[1],i))}},t.prototype._hoverLinkFromSeriesMouseOver=function(r){var n;if(Tc(r.target,function(l){var u=ie(l);if(u.dataIndex!=null)return n=u,!0},!0),!!n){var i=this.ecModel.getSeriesByIndex(n.seriesIndex),o=this.visualMapModel;if(!!o.isTargetSeries(i)){var a=i.getData(n.dataType),s=a.getStore().get(o.getDataDimensionIndex(a),n.dataIndex);isNaN(s)||this._showIndicator(s,s)}}},t.prototype._hideIndicator=function(){var r=this._shapes;r.indicator&&r.indicator.attr("invisible",!0),r.indicatorLabel&&r.indicatorLabel.attr("invisible",!0);var n=this._shapes.handleLabels;if(n)for(var i=0;i<n.length;i++)this._api.leaveBlur(n[i])},t.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var r=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",Zg(r,this.visualMapModel)),r.length=0},t.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var r=this.api.getZr();r.off("mouseover",this._hoverLinkFromSeriesMouseOver),r.off("mouseout",this._hideIndicator)},t.prototype._applyTransform=function(r,n,i,o){var a=jg(n,o?null:this.group);return ct(r)?Dc(r,a,i):dN(r,a,i)},t.prototype._dispatchHighDown=function(r,n){n&&n.length&&this.api.dispatchAction({type:r,batch:n})},t.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.prototype.remove=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.type="visualMap.continuous",t}(p$);function ax(e,t,r,n){return new Qd({shape:{points:e},draggable:!!r,cursor:t,drift:r,onmousemove:function(i){Kl(i.event)},ondragend:n})}function kct(e,t,r){var n=Tct/2,i=e.get("hoverLinkDataSize");return i&&(n=vo(i,t,r,!0)/2),n}function sx(e){var t=e.get("hoverLinkOnHandle");return!!(t==null?e.get("realtime"):t)}function lx(e){return e==="vertical"?"ns-resize":"ew-resize"}const Act=Ect;var Cct={type:"selectDataRange",event:"dataRangeSelected",update:"update"},Mct=function(e,t){t.eachComponent({mainType:"visualMap",query:e},function(r){r.setSelected(e.selected)})},xct=[{createOnAllSeries:!0,reset:function(e,t){var r=[];return t.eachComponent("visualMap",function(n){var i=e.pipelineContext;!n.isTargetSeries(e)||i&&i.large||r.push(Lut(n.stateList,n.targetVisuals,Vt(n.getValueState,n),n.getDataDimensionIndex(e.getData())))}),r}},{createOnAllSeries:!0,reset:function(e,t){var r=e.getData(),n=[];t.eachComponent("visualMap",function(i){if(i.isTargetSeries(e)){var o=i.getVisualMeta(Vt(Lct,null,e,i))||{stops:[],outerColors:[]},a=i.getDataDimensionIndex(r);a>=0&&(o.dimension=a,n.push(o))}}),e.getData().setVisual("visualMeta",n)}}];function Lct(e,t,r,n){for(var i=t.targetVisuals[n],o=_n.prepareVisualTypes(i),a={color:d_(e.getData(),"color")},s=0,l=o.length;s<l;s++){var u=o[s],c=i[u==="opacity"?"__alphaForOpacity":u];c&&c.applyVisual(r,f,h)}return a.color;function f(d){return a[d]}function h(d,p){a[d]=p}}var ux=F;function Ict(e){var t=e&&e.visualMap;ct(t)||(t=t?[t]:[]),ux(t,function(r){if(!!r){qu(r,"splitList")&&!qu(r,"pieces")&&(r.pieces=r.splitList,delete r.splitList);var n=r.pieces;n&&ct(n)&&ux(n,function(i){Ot(i)&&(qu(i,"start")&&!qu(i,"min")&&(i.min=i.start),qu(i,"end")&&!qu(i,"max")&&(i.max=i.end))})}})}function qu(e,t){return e&&e.hasOwnProperty&&e.hasOwnProperty(t)}var cx=!1;function g$(e){cx||(cx=!0,e.registerSubTypeDefaulter("visualMap",function(t){return!t.categories&&(!(t.pieces?t.pieces.length>0:t.splitNumber>0)||t.calculable)?"continuous":"piecewise"}),e.registerAction(Cct,Mct),F(xct,function(t){e.registerVisual(e.PRIORITY.VISUAL.COMPONENT,t)}),e.registerPreprocessor(Ict))}function Oct(e){e.registerComponentModel(bct),e.registerComponentView(Act),g$(e)}var Rct=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._pieceList=[],r}return t.prototype.optionUpdated=function(r,n){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var i=this._mode=this._determineMode();this._pieceList=[],Dct[this._mode].call(this,this._pieceList),this._resetSelected(r,n);var o=this.option.categories;this.resetVisual(function(a,s){i==="categories"?(a.mappingMethod="category",a.categories=zt(o)):(a.dataExtent=this.getExtent(),a.mappingMethod="piecewise",a.pieceList=Ct(this._pieceList,function(l){return l=zt(l),s!=="inRange"&&(l.visual=null),l}))})},t.prototype.completeVisualOption=function(){var r=this.option,n={},i=_n.listVisualTypes(),o=this.isCategory();F(r.pieces,function(s){F(i,function(l){s.hasOwnProperty(l)&&(n[l]=1)})}),F(n,function(s,l){var u=!1;F(this.stateList,function(c){u=u||a(r,c,l)||a(r.target,c,l)},this),!u&&F(this.stateList,function(c){(r[c]||(r[c]={}))[l]=d$.get(l,c==="inRange"?"active":"inactive",o)})},this);function a(s,l,u){return s&&s[l]&&s[l].hasOwnProperty(u)}e.prototype.completeVisualOption.apply(this,arguments)},t.prototype._resetSelected=function(r,n){var i=this.option,o=this._pieceList,a=(n?i:r).selected||{};if(i.selected=a,F(o,function(l,u){var c=this.getSelectedMapKey(l);a.hasOwnProperty(c)||(a[c]=!0)},this),i.selectedMode==="single"){var s=!1;F(o,function(l,u){var c=this.getSelectedMapKey(l);a[c]&&(s?a[c]=!1:s=!0)},this)}},t.prototype.getItemSymbol=function(){return this.get("itemSymbol")},t.prototype.getSelectedMapKey=function(r){return this._mode==="categories"?r.value+"":r.index+""},t.prototype.getPieceList=function(){return this._pieceList},t.prototype._determineMode=function(){var r=this.option;return r.pieces&&r.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},t.prototype.setSelected=function(r){this.option.selected=zt(r)},t.prototype.getValueState=function(r){var n=_n.findPieceIndex(r,this._pieceList);return n!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[n])]?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(r){var n=[],i=this._pieceList;return this.eachTargetSeries(function(o){var a=[],s=o.getData();s.each(this.getDataDimensionIndex(s),function(l,u){var c=_n.findPieceIndex(l,i);c===r&&a.push(u)},this),n.push({seriesId:o.id,dataIndex:a})},this),n},t.prototype.getRepresentValue=function(r){var n;if(this.isCategory())n=r.value;else if(r.value!=null)n=r.value;else{var i=r.interval||[];n=i[0]===-1/0&&i[1]===1/0?0:(i[0]+i[1])/2}return n},t.prototype.getVisualMeta=function(r){if(this.isCategory())return;var n=[],i=["",""],o=this;function a(c,f){var h=o.getRepresentValue({interval:c});f||(f=o.getValueState(h));var d=r(h,f);c[0]===-1/0?i[0]=d:c[1]===1/0?i[1]=d:n.push({value:c[0],color:d},{value:c[1],color:d})}var s=this._pieceList.slice();if(!s.length)s.push({interval:[-1/0,1/0]});else{var l=s[0].interval[0];l!==-1/0&&s.unshift({interval:[-1/0,l]}),l=s[s.length-1].interval[1],l!==1/0&&s.push({interval:[l,1/0]})}var u=-1/0;return F(s,function(c){var f=c.interval;f&&(f[0]>u&&a([u,f[0]],"outOfRange"),a(f.slice()),u=f[1])},this),{stops:n,outerColors:i}},t.type="visualMap.piecewise",t.defaultOption=r_(t1.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),t}(t1),Dct={splitNumber:function(e){var t=this.option,r=Math.min(t.precision,20),n=this.getExtent(),i=t.splitNumber;i=Math.max(parseInt(i,10),1),t.splitNumber=i;for(var o=(n[1]-n[0])/i;+o.toFixed(r)!==o&&r<5;)r++;t.precision=r,o=+o.toFixed(r),t.minOpen&&e.push({interval:[-1/0,n[0]],close:[0,0]});for(var a=0,s=n[0];a<i;s+=o,a++){var l=a===i-1?n[1]:s+o;e.push({interval:[s,l],close:[1,1]})}t.maxOpen&&e.push({interval:[n[1],1/0],close:[0,0]}),pM(e),F(e,function(u,c){u.index=c,u.text=this.formatValueText(u.interval)},this)},categories:function(e){var t=this.option;F(t.categories,function(r){e.push({text:this.formatValueText(r,!0),value:r})},this),fx(t,e)},pieces:function(e){var t=this.option;F(t.pieces,function(r,n){Ot(r)||(r={value:r});var i={text:"",index:n};if(r.label!=null&&(i.text=r.label),r.hasOwnProperty("value")){var o=i.value=r.value;i.interval=[o,o],i.close=[1,1]}else{for(var a=i.interval=[],s=i.close=[0,0],l=[1,0,1],u=[-1/0,1/0],c=[],f=0;f<2;f++){for(var h=[["gte","gt","min"],["lte","lt","max"]][f],d=0;d<3&&a[f]==null;d++)a[f]=r[h[d]],s[f]=l[d],c[f]=d===2;a[f]==null&&(a[f]=u[f])}c[0]&&a[1]===1/0&&(s[0]=0),c[1]&&a[0]===-1/0&&(s[1]=0),a[0]===a[1]&&s[0]&&s[1]&&(i.value=a[0])}i.visual=_n.retrieveVisuals(r),e.push(i)},this),fx(t,e),pM(e),F(e,function(r){var n=r.close,i=[["<","\u2264"][n[1]],[">","\u2265"][n[0]]];r.text=r.text||this.formatValueText(r.value!=null?r.value:r.interval,!1,i)},this)}};function fx(e,t){var r=e.inverse;(e.orient==="vertical"?!r:r)&&t.reverse()}const Nct=Rct;var Fct=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.doRender=function(){var r=this.group;r.removeAll();var n=this.visualMapModel,i=n.get("textGap"),o=n.textStyleModel,a=o.getFont(),s=o.getTextColor(),l=this._getItemAlign(),u=n.itemSize,c=this._getViewData(),f=c.endsText,h=Ei(n.get("showLabel",!0),!f);f&&this._renderEndsText(r,f[0],u,h,l),F(c.viewPieceList,function(d){var p=d.piece,v=new De;v.onclick=Vt(this._onItemClick,this,p),this._enableHoverLink(v,d.indexInModelPieceList);var g=n.getRepresentValue(p);if(this._createItemSymbol(v,g,[0,0,u[0],u[1]]),h){var m=this.visualMapModel.getValueState(g);v.add(new Je({style:{x:l==="right"?-i:u[0]+i,y:u[1]/2,text:p.text,verticalAlign:"middle",align:l,font:a,fill:s,opacity:m==="outOfRange"?.5:1}}))}r.add(v)},this),f&&this._renderEndsText(r,f[1],u,h,l),Bc(n.get("orient"),r,n.get("itemGap")),this.renderBackground(r),this.positionGroup(r)},t.prototype._enableHoverLink=function(r,n){var i=this;r.on("mouseover",function(){return o("highlight")}).on("mouseout",function(){return o("downplay")});var o=function(a){var s=i.visualMapModel;s.option.hoverLink&&i.api.dispatchAction({type:a,batch:Zg(s.findTargetDataIndices(n),s)})}},t.prototype._getItemAlign=function(){var r=this.visualMapModel,n=r.option;if(n.orient==="vertical")return v$(r,this.api,r.itemSize);var i=n.align;return(!i||i==="auto")&&(i="left"),i},t.prototype._renderEndsText=function(r,n,i,o,a){if(!!n){var s=new De,l=this.visualMapModel.textStyleModel;s.add(new Je({style:mn(l,{x:o?a==="right"?i[0]:0:i[0]/2,y:i[1]/2,verticalAlign:"middle",align:o?a:"center",text:n})})),r.add(s)}},t.prototype._getViewData=function(){var r=this.visualMapModel,n=Ct(r.getPieceList(),function(s,l){return{piece:s,indexInModelPieceList:l}}),i=r.get("text"),o=r.get("orient"),a=r.get("inverse");return(o==="horizontal"?a:!a)?n.reverse():i&&(i=i.slice().reverse()),{viewPieceList:n,endsText:i}},t.prototype._createItemSymbol=function(r,n,i){r.add(Bi(this.getControllerVisual(n,"symbol"),i[0],i[1],i[2],i[3],this.getControllerVisual(n,"color")))},t.prototype._onItemClick=function(r){var n=this.visualMapModel,i=n.option,o=i.selectedMode;if(!!o){var a=zt(i.selected),s=n.getSelectedMapKey(r);o==="single"||o===!0?(a[s]=!0,F(a,function(l,u){a[u]=u===s})):a[s]=!a[s],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:a})}},t.type="visualMap.piecewise",t}(p$);const Bct=Fct;function $ct(e){e.registerComponentModel(Nct),e.registerComponentView(Bct),g$(e)}function zct(e){Hr(Oct),Hr($ct)}var hx={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},Vct=function(){function e(t){var r=this._condVal=Et(t)?new RegExp(t):tZ(t)?t:null;if(r==null){var n="";ne(n)}}return e.prototype.evaluate=function(t){var r=typeof t;return Et(r)?this._condVal.test(t):we(r)?this._condVal.test(t+""):!1},e}(),Uct=function(){function e(){}return e.prototype.evaluate=function(){return this.value},e}(),Gct=function(){function e(){}return e.prototype.evaluate=function(){for(var t=this.children,r=0;r<t.length;r++)if(!t[r].evaluate())return!1;return!0},e}(),jct=function(){function e(){}return e.prototype.evaluate=function(){for(var t=this.children,r=0;r<t.length;r++)if(t[r].evaluate())return!0;return!1},e}(),Wct=function(){function e(){}return e.prototype.evaluate=function(){return!this.child.evaluate()},e}(),Hct=function(){function e(){}return e.prototype.evaluate=function(){for(var t=!!this.valueParser,r=this.getValue,n=r(this.valueGetterParam),i=t?this.valueParser(n):null,o=0;o<this.subCondList.length;o++)if(!this.subCondList[o].evaluate(t?i:n))return!1;return!0},e}();function UE(e,t){if(e===!0||e===!1){var r=new Uct;return r.value=e,r}var n="";return m$(e)||ne(n),e.and?dx("and",e,t):e.or?dx("or",e,t):e.not?Xct(e,t):Yct(e,t)}function dx(e,t,r){var n=t[e],i="";ct(n)||ne(i),n.length||ne(i);var o=e==="and"?new Gct:new jct;return o.children=Ct(n,function(a){return UE(a,r)}),o.children.length||ne(i),o}function Xct(e,t){var r=e.not,n="";m$(r)||ne(n);var i=new Wct;return i.child=UE(r,t),i.child||ne(n),i}function Yct(e,t){for(var r="",n=t.prepareGetValue(e),i=[],o=ge(e),a=e.parser,s=a?ZN(a):null,l=0;l<o.length;l++){var u=o[l];if(!(u==="parser"||t.valueGetterAttrMap.get(u))){var c=dt(hx,u)?hx[u]:u,f=e[u],h=s?s(f):f,d=Let(c,h)||c==="reg"&&new Vct(h);d||ne(r),i.push(d)}}i.length||ne(r);var p=new Hct;return p.valueGetterParam=n,p.valueParser=s,p.getValue=t.getValue,p.subCondList=i,p}function m$(e){return Ot(e)&&!Wr(e)}var qct=function(){function e(t,r){this._cond=UE(t,r)}return e.prototype.evaluate=function(){return this._cond.evaluate()},e}();function Zct(e,t){return new qct(e,t)}var Kct={type:"echarts:filter",transform:function(e){for(var t=e.upstream,r,n=Zct(e.config,{valueGetterAttrMap:jt({dimension:!0}),prepareGetValue:function(s){var l="",u=s.dimension;dt(s,"dimension")||ne(l);var c=t.getDimensionInfo(u);return c||ne(l),{dimIdx:c.index}},getValue:function(s){return t.retrieveValueFromItem(r,s.dimIdx)}}),i=[],o=0,a=t.count();o<a;o++)r=t.getRawDataItem(o),n.evaluate()&&i.push(r);return{data:i}}},Jct={type:"echarts:sort",transform:function(e){var t=e.upstream,r=e.config,n="",i=Ze(r);i.length||ne(n);var o=[];F(i,function(c){var f=c.dimension,h=c.order,d=c.parser,p=c.incomparable;if(f==null&&ne(n),h!=="asc"&&h!=="desc"&&ne(n),p&&p!=="min"&&p!=="max"){var v="";ne(v)}if(h!=="asc"&&h!=="desc"){var g="";ne(g)}var m=t.getDimensionInfo(f);m||ne(n);var _=d?ZN(d):null;d&&!_&&ne(n),o.push({dimIdx:m.index,parser:_,comparator:new JN(h,p)})});var a=t.sourceFormat;a!==on&&a!==Wi&&ne(n);for(var s=[],l=0,u=t.count();l<u;l++)s.push(t.getRawDataItem(l));return s.sort(function(c,f){for(var h=0;h<o.length;h++){var d=o[h],p=t.retrieveValueFromItem(c,d.dimIdx),v=t.retrieveValueFromItem(f,d.dimIdx);d.parser&&(p=d.parser(p),v=d.parser(v));var g=d.comparator.evaluate(p,v);if(g!==0)return g}return 0}),{data:s}}};function w_(e){e.registerTransform(Kct),e.registerTransform(Jct)}var Qct=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="dataset",r}return t.prototype.init=function(r,n,i){e.prototype.init.call(this,r,n,i),this._sourceManager=new rF(this),L4(this)},t.prototype.mergeOption=function(r,n){e.prototype.mergeOption.call(this,r,n),L4(this)},t.prototype.optionUpdated=function(){this._sourceManager.dirty()},t.prototype.getSourceManager=function(){return this._sourceManager},t.type="dataset",t.defaultOption={seriesLayoutBy:ko},t}(Ce),tft=function(e){_t(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="dataset",r}return t.type="dataset",t}(oi);function S_(e){e.registerComponentModel(Qct),e.registerComponentView(tft)}var eb=null;function eft(e){return eb||(eb=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){return setTimeout(t,16)}).bind(window)),eb(e)}var rb=null;function rft(e){rb||(rb=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){clearTimeout(t)}).bind(window)),rb(e)}function nft(e){var t=document.createElement("style");return t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),(document.querySelector("head")||document.body).appendChild(t),t}function pv(e,t){t===void 0&&(t={});var r=document.createElement(e);return Object.keys(t).forEach(function(n){r[n]=t[n]}),r}function _$(e,t,r){var n=window.getComputedStyle(e,r||null)||{display:"none"};return n[t]}function R3(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};for(var t=e;t!==document;){if(_$(t,"display")==="none")return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}var ift='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',D3=0,Kg=null;function oft(e,t){e.__resize_mutation_handler__||(e.__resize_mutation_handler__=lft.bind(e));var r=e.__resize_listeners__;if(!r){if(e.__resize_listeners__=[],window.ResizeObserver){var n=e.offsetWidth,i=e.offsetHeight,o=new ResizeObserver(function(){!e.__resize_observer_triggered__&&(e.__resize_observer_triggered__=!0,e.offsetWidth===n&&e.offsetHeight===i)||e1(e)}),a=R3(e),s=a.detached,l=a.rendered;e.__resize_observer_triggered__=s===!1&&l===!1,e.__resize_observer__=o,o.observe(e)}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){e1(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if(D3||(Kg=nft(ift)),uft(e),e.__resize_rendered__=R3(e).rendered,window.MutationObserver){var u=new MutationObserver(e.__resize_mutation_handler__);u.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=u}}e.__resize_listeners__.push(t),D3++}function aft(e,t){var r=e.__resize_listeners__;if(!!r){if(t&&r.splice(r.indexOf(t),1),!r.length||!t){if(e.detachEvent&&e.removeEventListener){e.detachEvent("onresize",e.__resize_legacy_resize_handler__),document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);return}e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__.disconnect(),e.__resize_observer__=null):(e.__resize_mutation_observer__&&(e.__resize_mutation_observer__.disconnect(),e.__resize_mutation_observer__=null),e.removeEventListener("scroll",GE),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null),e.__resize_listeners__=null}!--D3&&Kg&&Kg.parentNode.removeChild(Kg)}}function sft(e){var t=e.__resize_last__,r=t.width,n=t.height,i=e.offsetWidth,o=e.offsetHeight;return i!==r||o!==n?{width:i,height:o}:null}function lft(){var e=R3(this),t=e.rendered,r=e.detached;t!==this.__resize_rendered__&&(!r&&this.__resize_triggers__&&(jE(this),this.addEventListener("scroll",GE,!0)),this.__resize_rendered__=t,e1(this))}function GE(){var e=this;jE(this),this.__resize_raf__&&rft(this.__resize_raf__),this.__resize_raf__=eft(function(){var t=sft(e);t&&(e.__resize_last__=t,e1(e))})}function e1(e){!e||!e.__resize_listeners__||e.__resize_listeners__.forEach(function(t){t.call(e,e)})}function uft(e){var t=_$(e,"position");(!t||t==="static")&&(e.style.position="relative"),e.__resize_old_position__=t,e.__resize_last__={};var r=pv("div",{className:"resize-triggers"}),n=pv("div",{className:"resize-expand-trigger"}),i=pv("div"),o=pv("div",{className:"resize-contract-trigger"});n.appendChild(i),r.appendChild(n),r.appendChild(o),e.appendChild(r),e.__resize_triggers__={triggers:r,expand:n,expandChild:i,contract:o},jE(e),e.addEventListener("scroll",GE,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}function jE(e){var t=e.__resize_triggers__,r=t.expand,n=t.expandChild,i=t.contract,o=i.scrollWidth,a=i.scrollHeight,s=r.offsetWidth,l=r.offsetHeight,u=r.scrollWidth,c=r.scrollHeight;i.scrollLeft=o,i.scrollTop=a,n.style.width=s+1+"px",n.style.height=l+1+"px",r.scrollLeft=u,r.scrollTop=c}var ea=function(){return ea=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ea.apply(this,arguments)},cft=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function fft(e){return t=Object.create(null),cft.forEach(function(r){t[r]=function(n){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(!e.value)throw new Error("ECharts is not initialized yet.");return e.value[n].apply(e.value,i)}}(r)}),t;var t}var hft={autoresize:Boolean},dft={loading:Boolean,loadingOptions:Object},pft=/^on[^a-z]/,vft=function(e){return pft.test(e)},px=[],yh=[];(function(e,t){if(e&&typeof document<"u"){var r,n=t.prepend===!0?"prepend":"append",i=t.singleTag===!0,o=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var a=px.indexOf(o);a===-1&&(a=px.push(o)-1,yh[a]={}),r=yh[a]&&yh[a][n]?yh[a][n]:yh[a][n]=s()}else r=s();e.charCodeAt(0)===65279&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function s(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),t.attributes)for(var u=Object.keys(t.attributes),c=0;c<u.length;c++)l.setAttribute(u[c],t.attributes[u[c]]);var f=n==="prepend"?"afterbegin":"beforeend";return o.insertAdjacentElement(f,l),l}})("x-vue-echarts{display:block;width:100%;height:100%}",{});var gft="ecTheme",Pf=fP({name:"echarts",props:ea(ea({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},hft),dft),inheritAttrs:!1,setup:function(e,t){var r=t.attrs,n=Ag(),i=Ag(),o=Ag(),a=Cn("ecTheme",null),s=Cn("ecInitOptions",null),l=Cn("ecUpdateOptions",null),u=tS(e),c=u.autoresize,f=u.manualUpdate,h=u.loading,d=u.loadingOptions,p=Ye(function(){return o.value||e.option||null}),v=Ye(function(){return e.theme||br(a)||{}}),g=Ye(function(){return e.initOptions||br(s)||{}}),m=Ye(function(){return e.updateOptions||br(l)||{}}),_=Ye(function(){return function(A){var k={};for(var C in A)vft(C)||(k[C]=A[C]);return k}(r)}),y=vP().proxy.$listeners;function w(A){if(n.value){var k=i.value=Cnt(n.value,v.value,g.value);e.group&&(k.group=e.group);var C=y;C||(C={},Object.keys(r).filter(function(D){return D.indexOf("on")===0&&D.length>2}).forEach(function(D){var B=D.charAt(2).toLowerCase()+D.slice(3);B.substring(B.length-4)==="Once"&&(B="~".concat(B.substring(0,B.length-4))),C[B]=r[D]})),Object.keys(C).forEach(function(D){var B=C[D];if(B){var V=D.toLowerCase();V.charAt(0)==="~"&&(V=V.substring(1),B.__once__=!0);var N=k;if(V.indexOf("zr:")===0&&(N=k.getZr(),V=V.substring(3)),B.__once__){delete B.__once__;var j=B;B=function(){for(var Z=[],q=0;q<arguments.length;q++)Z[q]=arguments[q];j.apply(void 0,Z),N.off(V,B)}}N.on(V,B)}}),c.value?Vd(function(){k&&!k.isDisposed()&&k.resize(),M()}):M()}function M(){var D=A||p.value;D&&k.setOption(D,m.value)}}function T(){i.value&&(i.value.dispose(),i.value=void 0)}var S=null;wo(f,function(A){typeof S=="function"&&(S(),S=null),A||(S=wo(function(){return e.option},function(k,C){k&&(i.value?i.value.setOption(k,ea({notMerge:k.value!==(C==null?void 0:C.value)},m.value)):w())},{deep:!0}))},{immediate:!0}),wo([v,g],function(){T(),w()},{deep:!0}),qA(function(){e.group&&i.value&&(i.value.group=e.group)});var P=fft(i);return function(A,k,C){var M=Cn("ecLoadingOptions",{}),D=Ye(function(){return ea(ea({},br(M)),C==null?void 0:C.value)});qA(function(){var B=A.value;B&&(k.value?B.showLoading(D.value):B.hideLoading())})}(i,h,d),function(A,k,C){var M=null;wo([C,A,k],function(D,B,V){var N=D[0],j=D[1],Z=D[2];N&&j&&Z&&(M=h_(function(){j.resize()},100),oft(N,M)),V(function(){M&&N&&aft(N,M)})})}(i,c,n),X8(function(){w()}),N1(T),ea({chart:i,root:n,setOption:function(A,k){e.manualUpdate&&(o.value=A),i.value?i.value.setOption(A,k||{}):w(A)},nonEventAttrs:_},P)},render:function(){var e=ea({},this.nonEventAttrs);return e.ref="root",e.class=e.class?["echarts"].concat(e.class):"echarts",gP("x-vue-echarts",e)}});Hr([yf,B0,$0,Sf,wf,Tf,z0,zct,V0]);const mft={setup(){const e=re();return{gameStore:At(),userStore:e}},components:{VChart:Pf},props:{rgk:Number,workload:Number,wspd:Number,show:{type:Boolean,default:!1}},data:()=>({}),computed:{modHist(){return this.userStore.regionModifiers2.hasOwnProperty(this.rgk)||(this.userStore.regionModifiers2[this.rgk]=[0]),this.userStore.regionModifiers2[this.rgk].map(Number).filter(t=>!isNaN(t)).sort((t,r)=>r-t)},modTimes(){const e=this.modHist.length,t={};for(let r=0;r<this.modHist.length;r++){const n=this.modHist[r];t[n]=100*(r+1)/e}return t},modSorted(){return Object.keys(this.modTimes).map(Number).sort((t,r)=>t-r)},medianModifier(){let e=0;const t=this.modHist.length;if(t%2)e=modHist[(t-1)/2];else{const r=this.modHist[(t-1-1)/2],n=this.modHist[(t-1+1)/2];e=(r+n)/2}return console.log("medianModifier",t,e),this.workload*(2-e/100)},tierModifiers(){const e=[];let t=0;const r=this.workload,n=2*r,i=Math.ceil(r/this.wspd),o=Math.ceil(n/this.wspd);for(let a=i;a<=o;a++){const s=Math.max(2-this.wspd*a/r,0),l=r*(2-s),u=this.userStore.chanceAtModifier(this.rgk,s*100),c=u-t;e.push({wld:l,mod:s,tier:a,time:c}),t=u}return e},chartDataLine(){const e=[];for(let t=0;t<1001;t++){const r=t/10,n=this.workload*(2-r/100),i=this.userStore.chanceAtModifier(this.rgk,r),o=n/this.wspd;e.push([r,n,i,o])}return e},chartDataPoints(){const e=[];if(this.userStore.modHists[this.rgk]==null)return e;const t=this.userStore.modHists[this.rgk].length;for(let r=0;r<t;r++){const n=this.userStore.modHists[this.rgk][r],i=100*r/(t-1);e.push([i,n])}return e},chartColorRanges(){const e=[];let t=100;for(const r of this.tierModifiers){const n=r.mod*100;e.push({lte:t,gt:n}),t=n}return e},chartColorRangesWorkload(){const e=[];let t=this.workload;for(const r of this.tierModifiers){const n=r.wld;e.push({gt:t,lte:n}),t=n}return e},chartBands(){const e=[];let t=100;for(const r of this.tierModifiers){const n=r.mod*100;e.push([{name:r.tier,xAxis:t},{xAxis:n}]),t=n}return console.log("chartBands",e),e},chartOption(){return{grid:{left:30,top:30,right:30,bottom:40},xAxis:[{name:"workload",nameGap:22,min:"dataMin",max:"dataMax",nameLocation:"center",splitLine:{show:!1},boundaryGap:["10%","10%"]}],yAxis:{name:"chance",nameGap:10,type:"value",axisLine:{onZero:!1},axisLabel:{},splitLine:{show:!1},axisPointer:{snap:!0}},legend:{show:!0},series:[{data:this.chartDataLine,encode:{y:2,x:0,tooltip:[0,1,2]},type:"line",showSymbol:!1},{data:this.chartDataPoints,encode:{y:0,x:1},type:"scatter",symbolSize:5,color:"gray"}],visualMap:{show:!1,seriesIndex:0,dimension:0,pieces:this.chartColorRanges,color:["#cc3","#c22"]},tooltip:{trigger:"axis",axisPointer:{},formatter:function(e){const t=e[0].value[0],r=e[0].value[1],n=e[0].value[2];return`${e[0].value[3]*10} minute tier<br/>workload \u2264 ${r.toFixed(1)}<br/>modifier \u2265 ${t.toFixed(1)}<br/>chance ${n.toFixed(1)}%`}},legend:{show:!1}}},chartOption2(){return{grid:{left:30,top:30,right:30,bottom:40},xAxis:{name:"chance %",nameLocation:"center",nameGap:22,type:"value",min:0,max:100,axisLine:{onZero:!1},axisLabel:{},splitLine:{show:!1},axisPointer:{snap:!0}},yAxis:[{name:"modifier",nameGap:10,min:"dataMin",max:"dataMax",splitLine:{show:!1}}],legend:{},series:[{data:this.chartDataLine,encode:{x:2,y:0,tooltip:[0,1,2]},type:"line",showSymbol:!1},{data:this.chartDataPoints,encode:{x:0,y:1},type:"scatter",symbolSize:5,color:"gray"}],visualMap:{show:!1,seriesIndex:0,dimension:0,pieces:this.chartColorRanges,color:["#cc3","#c22"]},tooltip:{trigger:"axis",axisPointer:{axis:"y"},formatter:function(e){const t=e[0].value[0],r=e[0].value[1],n=e[0].value[2],i=e[0].value[3];return`${n.toFixed(1)}% chance to get<br/>${t.toFixed(1)} or more modifier<br/>${r.toFixed(1)} or less workload<br/>${Ft(i*10,1)} \u2192 ${Math.ceil(i)*10} minute cycle`},textStyle:{fontSize:11}},legend:{show:!1}}}},methods:{formatFixed:Ft,updStore(e){this.userStore.regionModifiers2[this.rgk]=e.split(",")},spaceSep(e,t){return Ft(e*1e6,0,t).replace(/\B(?=(\d{3})+(?!\d))/g," ")}}},_u=e=>(Ar("data-v-04376293"),e=e(),Cr(),e),_ft=z(" Observations: "),yft=_u(()=>b("abbr",{class:"tooltip",title:"Enter comma-separated modifier values (0..100 range) observed evenly across all worker-active time. The order does not matter, but repeat occurence of same value does. You can sneak in newlines and comments like 'evening,0,0.1,2,morning,3,22,0' - text will be stored, but ignored in calculations."},"\u2139\uFE0F",-1)),bft=_u(()=>b("br",null,null,-1)),wft=["value"],Sft=_u(()=>b("span",{style:{"line-height":"200%"}},"Breakpoints:",-1)),Tft={class:"fsxs tar"},Pft=_u(()=>b("th",null,"work time",-1)),Eft=_u(()=>b("th",null,"workload \u2264",-1)),kft=_u(()=>b("th",null,"modifier \u2265",-1)),Aft=_u(()=>b("th",null,"chance",-1));function Cft(e,t,r,n,i,o){const a=pe("v-chart");return I(),R(W,null,[_ft,yft,bft,b("textarea",{value:this.userStore.regionModifiers2[this.rgk],onInput:t[0]||(t[0]=s=>o.updStore(s.target.value)),class:"multiline"},`
  `,40,wft),b("div",null,[xt(a,{class:"chart hmid",option:o.chartOption2},null,8,["option"])]),Sft,b("table",Tft,[b("tr",null,[Pft,(I(!0),R(W,null,It(o.tierModifiers.filter(s=>s.time),s=>(I(),R("td",null,L(10*s.tier)+" min",1))),256))]),b("tr",null,[Eft,(I(!0),R(W,null,It(o.tierModifiers.filter(s=>s.time),s=>(I(),R("td",null,L(o.formatFixed(s.wld,2)),1))),256))]),b("tr",null,[kft,(I(!0),R(W,null,It(o.tierModifiers.filter(s=>s.time),s=>(I(),R("td",null,L(o.formatFixed(100*s.mod,2)),1))),256))]),b("tr",null,[Aft,(I(!0),R(W,null,It(o.tierModifiers.filter(s=>s.time),s=>(I(),R("td",null,L(o.formatFixed(s.time,2))+"%",1))),256))])])],64)}const WE=$e(mft,[["render",Cft],["__scopeId","data-v-04376293"]]);const Mft={setup(){const e=re();return{gameStore:At(),userStore:e}},components:{FloatingModifierEdit:WE},props:{workerEditing:Object,workerInitial:Object,show:{type:Boolean,default:!1}},computed:{newProfit(){return this.profit(this.workerEditing),this.profit(this.workerEditing)},initialProfit(){return this.profit(this.workerInitial)},currentWspdBonus(){var e="farm";if(this.gameStore.jobIsWorkshop(this.workerEditing.job)){const r=this.workerEditing.job.hk;e=this.userStore.userWorkshops[r].industry}return this.gameStore.wspdBonus(this.workerEditing,e)},statRank(){return this.gameStore.workerStatRank(this.workerEditing)}},data:()=>({wasChanged:!1,showChartPane:!1,prerelease_charkind:!0,prerelease_skillicon:!1}),watch:{workerEditing:{handler(e,t){this.wasChanged=JSON.stringify(e)!==JSON.stringify(this.workerInitial)},deep:!0},workerInitial:{handler(e,t){this.wasChanged=JSON.stringify(e)!==JSON.stringify(this.workerEditing)},deep:!0}},methods:{makeIconSrc:Vi,formatFixed:Ft,randBetween:hs,levelup:vd,spaceSep(e,t){return Ft(e*1e6,0,t).replace(/\B(?=(\d{3})+(?!\d))/g," ")},revert(){for(const[e,t]of Object.entries(this.workerInitial))typeof t=="object"?this.workerEditing[e]=JSON.parse(JSON.stringify(t)):this.workerEditing[e]=t},profit(e){if(this.gameStore.jobIsPz(e.job)){const t=this.gameStore.workerStatsOnPlantzone(e);return this.gameStore.profitPzTownStats(e.job.pzk,e.tnk,t.wspd,t.mspd,t.luck,this.gameStore.isGiant(e.charkey)).priceDaily}if(this.gameStore.jobIsWorkshop(e.job)){const t=e.job.hk,r=this.userStore.userWorkshops[t];return this.gameStore.profitWorkshopWorker(t,r,e)}},maxSkillsAtLevel(e){return 1+Math.floor(e/5)},suggestBestSkills(e,t){const r=this.maxSkillsAtLevel(e),n={0:{skills:[]}},i=["wspd"];t&&i.push("wspd_farm");const o=[];for(const[c,f]of Object.entries(this.gameStore.skillData))i.some(h=>f.hasOwnProperty(h)&&o.push({key:c,amount:f[h],mspd:f.hasOwnProperty("mspd")?f.mspd:0}));o.sort(function(c,f){return f.amount!=c.amount?f.amount-c.amount:f.mspd-c.mspd});for(let c=1;c<=r;c++){const f=o.slice(0,c).map(({key:d})=>d),h=this.profit({...this.workerEditing,skills:f});if(n[c]={skills:f,profit:h},f.every(d=>!this.gameStore.skillData[d].hasOwnProperty("mspd"))){const d=[...f],p=o.filter(v=>v.mspd>0);if(p.length>0){d[d.length-1]=p[0];const v=this.profit({...this.workerEditing,skills:d});v>h&&(n[c]={skills:d,profit:v},console.log("using wmSkill"))}}}console.log("wBonuses",n);const a=["mspd","luck"],s=new Set;for(const[c,f]of Object.entries(this.gameStore.skillData))a.some(d=>f.hasOwnProperty(d))&&s.add(c);console.log("mlSkills",s);const l=[n[r]],u=[];for(let c=1;c<=r;c++){const f=[...n[r-c].skills,...u],h=[];for(const d of s){if(n[r-c].skills.some(g=>g==d))continue;const p=[...f,d],v=this.profit({...this.workerEditing,skills:p});h.push({sk:d,profit:v})}if(h.length>0){h.sort((v,g)=>g.profit-v.profit);const d=h[0].sk,p=[...f,d];l[c]={skills:p,profit:h[0].profit},u.push(d),s.delete(d)}else u.push(0)}if(l.sort((c,f)=>f.profit-c.profit),l.length>0){const c=new Set(l[0].skills);console.log(c);const f=new Array(c.size);for(let d=0;d<r;d++){const p=String(this.workerEditing.skills[d]);c.has(p)&&(f[d]=Number(p),c.delete(p))}console.log(this.workerEditing.skills,c);const h=[...c];for(let d=0;d<r;d++)f[d]==null&&(f[d]=Number(h.shift()),document.querySelector("#skill"+d).classList.add("anim"),setTimeout(()=>{document.querySelector("#skill"+d).classList.remove("anim")},500));this.workerEditing.skills=f}else console.log("worker skills optimization failed")},recalcStats(e,t){if(this.workerEditing.level>1){const r=t-1,n=this.gameStore.workerStatic[this.workerEditing.charkey],i=this.gameStore.workerStatic[e],o=this.workerEditing.wspdSheet*1e6-n.wspd,a=i.wspd_lo*r,s=i.wspd_hi*r,l=a+(s-a)*this.statRank.wspd_rank,u=i.mspd_lo*r,c=i.mspd_hi*r,f=u+(c-u)*this.statRank.mspd_rank,h=this.workerEditing.luckSheet*1e4-n.luck,d=i.luck_lo*r,p=i.luck_hi*r,v=d+(p-d)*this.statRank.luck_rank;console.log(`recalculating levelups: 
        ${i.wspd/1e6}+${r}*[${i.wspd_lo/1e6}\u2026${i.wspd_hi/1e6}]*${Math.round(this.statRank.wspd_rank*1e3)/10}%\u{1F528} 
        ${i.mspd/100}+${r}*[${i.mspd_lo/1e6}\u2026${i.mspd_hi/1e6}]*${Math.round(this.statRank.wspd_rank*1e3)/10}%\u{1F9B6} 
        ${i.luck/1e4}+${r}*[${i.luck_lo/1e4}\u2026${i.luck_hi/1e4}]*${Math.round(this.statRank.luck_rank*1e3)/10}%\u{1F340}`),this.workerEditing.wspdSheet+=(i.wspd-n.wspd+l-o)/1e6,this.workerEditing.mspdSheet=i.mspd/100*(1+f/1e6),this.workerEditing.luckSheet+=(i.luck-n.luck+v-h)/1e4}else this.workerEditing.wspdSheet+=(stat_new.wspd-stat_old.wspd)/1e6,this.workerEditing.mspdSheet=stat_new.mspd*(this.workerEditing.mspdSheet/stat_old.mspd),this.workerEditing.luckSheet+=(stat_new.luck-stat_old.luck)/1e4,vd(this.gameStore,this.workerEditing,t);this.workerEditing.wspdSheet=Math.round(this.workerEditing.wspdSheet*100)/100,this.workerEditing.mspdSheet=Math.round(this.workerEditing.mspdSheet*100)/100,this.workerEditing.luckSheet=Math.round(this.workerEditing.luckSheet*100)/100,this.workerEditing.charkey=e,this.workerEditing.level=t,this.limitSkillCount()},limitSkillCount(){const e=1+Math.floor(this.workerEditing.level/5);this.workerEditing.skills.length>e&&this.workerEditing.skills.splice(e)},levelupMe(e){this.limitSkillCount(),vd(this.gameStore,this.workerEditing,e),this.workerEditing.wspdSheet=Math.floor(this.workerEditing.wspdSheet*100)/100,this.workerEditing.mspdSheet=Math.floor(this.workerEditing.mspdSheet*100)/100,this.workerEditing.luckSheet=Math.floor(this.workerEditing.luckSheet*100)/100},setStatsRandom(){const e=this.workerEditing,t=this.gameStore.workerStatic[e.charkey];let r=t.wspd,n=0,i=t.luck;for(let a=2;a<=e.level;a++)r+=hs(t.wspd_lo,t.wspd_hi),n+=hs(t.mspd_lo,t.mspd_hi),i+=hs(t.luck_lo,t.luck_hi);let o=t.mspd*(1+n/1e6);e.wspdSheet=Math.round(r/1e6*100)/100,e.mspdSheet=Math.round(o)/100,e.luckSheet=Math.round(i/1e4*100)/100},setStatsMedian(){const e=this.workerEditing,t=this.gameStore.workerStatic[e.charkey];let r=t.wspd,n=0,i=t.luck;for(let a=2;a<=e.level;a++)r+=(t.wspd_lo+t.wspd_hi)/2,n+=(t.mspd_lo+t.mspd_hi)/2,i+=(t.luck_lo+t.luck_hi)/2;let o=t.mspd*(1+n/1e6);e.wspdSheet=Math.round(r/1e6*100)/100,e.mspdSheet=Math.round(o)/100,e.luckSheet=Math.round(i/1e4*100)/100}}},Mr=e=>(Ar("data-v-ef2d33b7"),e=e(),Cr(),e),xft={key:0,id:"columns"},Lft={id:"worker"},Ift={class:"borderless"},Oft=Mr(()=>b("td",null,"name:",-1)),Rft={style:{float:"right"}},Dft=Mr(()=>b("td",null,"type:",-1)),Nft=["value"],Fft=["value"],Bft={key:0},$ft=Mr(()=>b("td",null,"stash:",-1)),zft=["value"],Vft=Mr(()=>b("td",null,"job:",-1)),Uft=z(" idle "),Gft={key:0},jft={key:1},Wft=z(" \u270D\uFE0F "),Hft=z(" @ "),Xft=z("M$/day "),Yft=z("CP "),qft=z(" [\u{1F33B}] "),Zft={class:"fsxs"},Kft=z(" \u270D\uFE0F "),Jft=z(" @ "),Qft=z("M$/day "),tht=z("CP "),eht=z(" UNKNOWN_JOBTYPE "),rht={key:1},nht=Mr(()=>b("td",null,"$/day:",-1)),iht={key:0},oht={key:0},aht={colspan:"2"},sht={key:0,class:"borderless"},lht=Mr(()=>b("tr",null,[b("th",null,"stats:"),b("th",{class:"fsxs"},"rank"),b("th",null,"sheet"),b("th",null,"+"),b("th",null,"skill"),b("th",null,"="),b("th",null,"final"),b("th")],-1)),uht={class:"center"},cht={rowspan:"3"},fht=Mr(()=>b("br",null,null,-1)),hht={class:"fsxs"},dht=Mr(()=>b("td",null,null,-1)),pht=Mr(()=>b("td",null,null,-1)),vht=Mr(()=>b("td",null,"\u{1F528}",-1)),ght={class:"center"},mht={class:"fsxs"},_ht=Mr(()=>b("td",null,null,-1)),yht=Mr(()=>b("td",null,null,-1)),bht=Mr(()=>b("td",null,"\u{1F9B6}",-1)),wht={class:"center"},Sht={class:"fsxs"},Tht=Mr(()=>b("td",null,null,-1)),Pht=Mr(()=>b("td",null,null,-1)),Eht=Mr(()=>b("td",null,"\u{1F340}",-1)),kht={class:"center"},Aht=Mr(()=>b("td",null,"skills:",-1)),Cht={style:{float:"right"}},Mht=["disabled"],xht={colspan:"2",s:""},Lht=["id","onUpdate:modelValue"],Iht=["value"],Oht=["src"],Rht=z(" use floating modifier for this regionGroup "),Dht={key:0,id:"chartPane"};function Nht(e,t,r,n,i,o){const a=pe("FloatingModifierEdit");return r.workerEditing?(I(),R("div",xft,[b("div",Lft,[b("table",Ift,[b("tr",null,[Oft,b("td",null,[gt(b("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>r.workerEditing.label=s),style:{width:"10em"}},null,512),[[ve,r.workerEditing.label]]),z(" lvl."+L(r.workerEditing.level)+" ",1),b("button",{onClick:t[1]||(t[1]=s=>o.levelupMe(r.workerEditing.level+1))},"\u{1F815}"),b("button",{onClick:t[2]||(t[2]=s=>o.recalcStats(r.workerEditing.charkey,r.workerEditing.level-1))},"\u{1F817}"),tt("",!0),b("div",Rft,[e.wasChanged&&r.workerInitial?(I(),R("button",{key:0,onClick:t[4]||(t[4]=s=>o.revert())},"revert")):tt("",!0)])])]),b("tr",null,[Dft,b("td",null,[e.prerelease_charkind?(I(),R("select",{key:0,onChange:t[5]||(t[5]=s=>o.recalcStats(s.target.value,r.workerEditing.level)),value:r.workerEditing.charkey},[(I(!0),R(W,null,It(n.gameStore.workerStatic,(s,l)=>(I(),R("option",{value:l},L(l)+" "+L(n.gameStore.uloc.char[l])+" "+L(s.wspd/1e6)+" / "+L(s.mspd/100)+" / "+L(s.luck/1e4),9,Fft))),256))],40,Nft)):(I(),R(W,{key:1},[z(L(n.gameStore.uloc.char[r.workerEditing.charkey]),1)],64))])]),r.workerEditing.job&&n.gameStore.jobIsPz(r.workerEditing.job)?(I(),R("tr",Bft,[$ft,b("td",null,[gt(b("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>r.workerEditing.job.storage=s)},[(I(!0),R(W,null,It(n.gameStore.townSet,s=>(I(),R("option",{value:s},L(n.gameStore.uloc.node[s]),9,zft))),256))],512),[[Sr,r.workerEditing.job.storage]])])])):tt("",!0),b("tr",null,[Vft,b("td",null,[n.gameStore.jobIsIdle(r.workerEditing.job)?(I(),R(W,{key:0},[Uft],64)):n.gameStore.jobIsPz(r.workerEditing.job)?(I(),R(W,{key:1},[z(L(n.gameStore.plantzoneName(r.workerEditing.job.pzk))+" / ",1),n.gameStore.ready&&r.workerEditing.job&&r.workerEditing.job.pzk&&n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup&&n.userStore.allowFloating&&n.userStore.useFloatingModifiers[n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup]?(I(),R("span",Gft,[z(" ~"+L(o.formatFixed(n.userStore.medianWorkloads[r.workerEditing.job.pzk],2))+" ",1),b("span",{onClick:t[7]||(t[7]=s=>e.showChartPane=!e.showChartPane)},L(e.showChartPane?"\u25C0":"\u25B6"),1)])):(I(),R("span",jft,L(o.formatFixed(n.gameStore.plantzones[r.workerEditing.job.pzk].activeWorkload,2)),1))],64)):n.gameStore.jobIsCustom(r.workerEditing.job)?(I(),R(W,{key:2},[Wft,gt(b("input",{class:"workshop-label-input","onUpdate:modelValue":t[8]||(t[8]=s=>r.workerEditing.job[3]=s)},null,512),[[ve,r.workerEditing.job[3]]]),Hft,gt(b("input",{type:"number",class:"float4",step:"0.1","onUpdate:modelValue":t[9]||(t[9]=s=>r.workerEditing.job[1]=s)},null,512),[[ve,r.workerEditing.job[1],void 0,{number:!0}]]),Xft,gt(b("input",{type:"number",class:"float4","onUpdate:modelValue":t[10]||(t[10]=s=>r.workerEditing.job[2]=s)},null,512),[[ve,r.workerEditing.job[2],void 0,{number:!0}]]),Yft],64)):n.gameStore.jobIsFarming(r.workerEditing.job)?(I(),R(W,{key:3},[qft],64)):n.gameStore.jobIsWorkshop(r.workerEditing.job)?(I(),R(W,{key:4},[z(L(n.gameStore.workerJobDescription(r.workerEditing))+" ",1),n.userStore.userWorkshops[r.workerEditing.job.hk].label?(I(),R(W,{key:0},[z(' "'+L(n.userStore.userWorkshops[r.workerEditing.job.hk].label)+'" ',1)],64)):tt("",!0),z(" "+L(n.userStore.userWorkshops[r.workerEditing.job.hk].manualWorkload)+" workload ",1),b("span",Zft," ["+L(n.userStore.userWorkshops[r.workerEditing.job.hk].industry)+"] ",1)],64)):n.gameStore.jobIsCustom(r.workerEditing.job)?(I(),R(W,{key:5},[Kft,gt(b("input",{class:"workshop-label-input","onUpdate:modelValue":t[11]||(t[11]=s=>r.workerEditing.job[3]=s)},null,512),[[ve,r.workerEditing.job[3]]]),Jft,gt(b("input",{type:"number",class:"float4",step:"0.1","onUpdate:modelValue":t[12]||(t[12]=s=>r.workerEditing.job[1]=s)},null,512),[[ve,r.workerEditing.job[1],void 0,{number:!0}]]),Qft,gt(b("input",{type:"number",class:"float4","onUpdate:modelValue":t[13]||(t[13]=s=>r.workerEditing.job[2]=s)},null,512),[[ve,r.workerEditing.job[2],void 0,{number:!0}]]),tht],64)):(I(),R(W,{key:6},[eht],64))])]),r.workerEditing.job?(I(),R("tr",rht,[nht,b("td",null,[n.gameStore.jobIsPz(r.workerEditing.job)?(I(),R(W,{key:0},[z(L(o.spaceSep(o.initialProfit))+" ",1),o.newProfit!=o.initialProfit?(I(),R("span",iht,[z(" \u2192 "+L(o.spaceSep(o.newProfit))+" ",1),b("span",{class:en({greenText:o.newProfit>o.initialProfit,redText:o.newProfit<o.initialProfit,fsxs:1})},L(o.formatFixed(100*(o.newProfit-o.initialProfit)/o.initialProfit,2,!0))+"% ",3)])):tt("",!0)],64)):n.gameStore.jobIsFarming(r.workerEditing.job)?(I(),R(W,{key:1},[z(L(o.spaceSep(n.userStore.workerIncome(r.workerEditing))),1)],64)):n.gameStore.jobIsWorkshop(r.workerEditing.job)?(I(),R(W,{key:2},[z(L(o.spaceSep(o.initialProfit))+" ",1),o.newProfit!=o.initialProfit?(I(),R("span",oht,[z(" \u2192 "+L(o.spaceSep(o.newProfit))+" ",1),b("span",{class:en({greenText:o.newProfit>o.initialProfit,redText:o.newProfit<o.initialProfit,fsxs:1})},L(o.formatFixed(100*(o.newProfit-o.initialProfit)/o.initialProfit,2,!0))+"% ",3)])):tt("",!0)],64)):tt("",!0)])])):tt("",!0),b("tr",null,[b("td",aht,[n.gameStore.ready?(I(),R("table",sht,[lht,b("tr",uht,[b("td",cht,[b("button",{onClick:t[14]||(t[14]=s=>o.setStatsMedian()),class:"fsxxs"},"median"),fht,b("button",{onClick:t[15]||(t[15]=s=>o.setStatsRandom()),class:"fsxxs"},"random")]),b("td",hht,L(o.formatFixed(o.statRank.wspd_rank*100,1))+"% ",1),b("td",null,[gt(b("input",{type:"number","onUpdate:modelValue":t[16]||(t[16]=s=>r.workerEditing.wspdSheet=s),step:"0.01",class:"w5em right"},null,512),[[ve,r.workerEditing.wspdSheet]])]),dht,b("td",null,L(o.formatFixed(o.currentWspdBonus,2)),1),pht,b("td",null,L(o.formatFixed(r.workerEditing.wspdSheet+o.currentWspdBonus,2)),1),vht]),b("tr",ght,[b("td",mht,L(o.formatFixed(o.statRank.mspd_rank*100,1))+"% ",1),b("td",null,[gt(b("input",{type:"number","onUpdate:modelValue":t[17]||(t[17]=s=>r.workerEditing.mspdSheet=s),step:"0.01",class:"w5em right"},null,512),[[ve,r.workerEditing.mspdSheet]])]),_ht,b("td",null,L(o.formatFixed(n.gameStore.mspdBonus(r.workerEditing),1))+"%",1),yht,b("td",null,L(o.formatFixed(n.gameStore.workerStatic[r.workerEditing.charkey].mspd/100*(r.workerEditing.mspdSheet/(n.gameStore.workerStatic[r.workerEditing.charkey].mspd/100)+n.gameStore.mspdBonus(r.workerEditing)/100),2)),1),bht]),b("tr",wht,[b("td",Sht,L(o.formatFixed(o.statRank.luck_rank*100,1))+"% ",1),b("td",null,[gt(b("input",{type:"number","onUpdate:modelValue":t[18]||(t[18]=s=>r.workerEditing.luckSheet=s),step:"0.01",class:"w5em right"},null,512),[[ve,r.workerEditing.luckSheet]])]),Tht,b("td",null,L(o.formatFixed(n.gameStore.luckBonus(r.workerEditing),2)),1),Pht,b("td",null,L(o.formatFixed(r.workerEditing.luckSheet+n.gameStore.luckBonus(r.workerEditing),2)),1),Eht])])):tt("",!0)])]),b("tr",kht,[Aht,b("td",null,[b("div",Cht,[b("button",{disabled:!(r.workerEditing.job&&r.workerEditing.job.pzk in n.userStore.pzJobs),onClick:t[19]||(t[19]=s=>o.suggestBestSkills(r.workerEditing.level,!0))}," optimize ",8,Mht)])])]),(I(),R(W,null,It(9,s=>b("tr",null,[b("td",xht,[gt(b("select",{id:"skill"+(s-1),"onUpdate:modelValue":l=>r.workerEditing.skills[s-1]=l,class:"w30em animable",style:{width:"30em"}},[(I(!0),R(W,null,It(n.gameStore.availableSkillPool(r.workerEditing.skills,r.workerEditing.skills[s-1]),l=>(I(),R("option",{value:l},L(n.gameStore.uloc.skill[l]+" / "+n.gameStore.uloc.skilldesc[l]),9,Iht))),256))],8,Lht),[[Sr,r.workerEditing.skills[s-1]]]),e.prerelease_skillicon?(I(),R("img",{key:0,src:`data/icons/skill/${r.workerEditing.skills[s-1]}.png`,width:"22",height:"22"},null,8,Oht)):tt("",!0)])])),64))]),n.gameStore.ready&&r.workerEditing.job&&n.gameStore.jobIsPz(r.workerEditing.job)&&r.workerEditing.job.pzk in n.gameStore.plantzones&&n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup&&n.userStore.allowFloating?(I(),R(W,{key:0},[gt(b("input",{type:"checkbox","onUpdate:modelValue":t[20]||(t[20]=s=>n.userStore.useFloatingModifiers[n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup]=s)},null,512),[[ar,n.userStore.useFloatingModifiers[n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup]]]),Rht],64)):tt("",!0)]),e.showChartPane&&n.gameStore.ready&&r.workerEditing.job&&r.workerEditing.job.pzk&&r.workerEditing.job.pzk in n.gameStore.plantzones&&n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup&&n.userStore.useFloatingModifiers[n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup]?(I(),R("div",Dht,[xt(a,{rgk:n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup,wspd:r.workerEditing.wspdSheet+o.currentWspdBonus,workload:n.gameStore.plantzones[r.workerEditing.job.pzk].workload,show:!0},null,8,["rgk","wspd","workload"])])):tt("",!0)])):tt("",!0)}const y$=$e(Mft,[["render",Nht],["__scopeId","data-v-ef2d33b7"]]);const Fht={setup(){const e=re();return{gameStore:At(),userStore:e}},props:{w:Object,defaultRedirect:Number,show:{type:Boolean,default:!1}},data:()=>({customProfit:0,customCP:0,customLabel:"",selectedRedirect:1}),watch:{show:function(e){e&&(this.selectedRedirect=this.w.tnk)}},methods:{makeIconSrc:Vi,formatFixed:Ft,assignWorkerPz(e,t){console.log("assigning to",this.selectedRedirect),this.userStore.assignWorker(e,{kind:"plantzone",pzk:t,storage:this.selectedRedirect}),this.$emit("update:show",!1)},assignWorkerFm(e){this.userStore.assignWorker(e,"farming"),this.$emit("update:show",!1)},assignWorkerCustom(e){this.userStore.assignWorker(e,["workshop",this.customProfit,this.customCP,this.customLabel]),this.$emit("update:show",!1)},assignWorkerWorkshop(e,t){this.userStore.assignWorker(e,{kind:"workshop",hk:t,recipe:void 0}),this.$emit("update:show",!1)},workshopBusy(e){return this.userStore.userWorkers.some(t=>t.job&&t.job.kind=="workshop"&&t.job.hk==e)},workshopEntry(e,t){const r=this.addBedHereInfo,n=this.userStore.occupiedWorkshops.has(Number(e))?0:t.manualCp,i=n+r.cost,o=this.gameStore.profitWorkshopWorker(e,t,this.w);return{income:o,workshopCp:n,infraCp:r.cost,infraTooltip:r.tooltip,totalCp:i,dailyPerCp:o/i,effDelta:this.userStore.jobEfficiencyDelta(o,i)}}},computed:{thisFarmSelectionEntry(){return this.gameStore.farmSelectionEntry(this.gameStore.tnk2tk(this.w.tnk))},addBedHereInfo(){return this.gameStore.addBedInfo(this.gameStore.tnk2tk(this.w.tnk))},workerNearestCpPlantzonesProfit(){const e=[];if(!this.w)return e;const t=Date.now(),r=16,n=this.gameStore.workerStatsOnPlantzone(this.w),i=this.gameStore.tnk2tk(this.selectedRedirect);return this.gameStore.dijDiscountedNearestPlantzones(this.w.tnk,80).forEach(([a,s,l])=>{if(this.userStore.workedPlantzones.has(a.toString()))return;const u=this.gameStore.pzSelectionEntry(a,i,this.w.tnk,s,l,this.w,n);u.profit.dist>1e6||e.push(u)}),e.sort((a,s)=>s.dailyPerCp-a.dailyPerCp),console.log("cpt: workerNearestCpPlantzonesProfit took",Date.now()-t,"ms"),e.slice(0,r)}}},ln=e=>(Ar("data-v-8447e8cb"),e=e(),Cr(),e),Bht={class:"spaced-columns"},$ht=z(" stash: "),zht=["value"],Vht=ln(()=>b("th",null,"node",-1)),Uht=ln(()=>b("th",null,"workload",-1)),Ght=ln(()=>b("th",null,"walk",-1)),jht=ln(()=>b("th",null,"+M$/day",-1)),Wht=ln(()=>b("th",null,"+CP",-1)),Hht=ln(()=>b("th",null,"M$/day/CP",-1)),Xht=ln(()=>b("th",null,"action",-1)),Yht=["href"],qht=z(L(" ")+" "),Zht=["src"],Kht={class:"tac"},Jht={class:"tac"},Qht={class:"tac"},tdt={class:"tac"},edt=["title"],rdt=z("+"),ndt=["title"],idt={class:"tac"},odt=["onClick"],adt=ln(()=>b("tr",null,[b("td",{colspan:"7",class:"center"},"Special jobs (not node based)")],-1)),sdt={key:0},ldt=ln(()=>b("td",null,[z(" \u{1F33B} Farm "),b("abbr",{title:"see Settings page: singleWorkerProfit = (fullWorkersProfit - noWorkersProfit) / 10",class:"tooltip"},"\u2139\uFE0F")],-1)),udt=ln(()=>b("td",{class:"tac"},"x",-1)),cdt=ln(()=>b("td",{class:"tac"},"x",-1)),fdt={class:"tac"},hdt={class:"tac"},ddt=["title"],pdt={class:"tac"},vdt=ln(()=>b("abbr",{title:"see Settings > Workshops config",class:"tooltip"},"\u2139\uFE0F",-1)),gdt={class:"tac"},mdt={class:"tac"},_dt={class:"tac"},ydt={class:"tac"},bdt={class:"tooltip",title:"cost of operating the workshop"},wdt=z("+"),Sdt=["title"],Tdt={class:"tac"},Pdt=["onClick"],Edt=z(" \u270D\uFE0F Custom job "),kdt=ln(()=>b("abbr",{title:"enter daily profit and CP cost for this specific job. these are per worker - so for Mass Production, divide by worker count manually",class:"tooltip"},"\u2139\uFE0F",-1)),Adt={style:{float:"right"}},Cdt=z(" \xA0label: "),Mdt=ln(()=>b("td",{class:"tac"},"x",-1)),xdt=ln(()=>b("td",{class:"tac"},"x",-1)),Ldt={class:"tac"},Idt={class:"tac"},Odt=z("+"),Rdt=["title"],Ddt={class:"tac"};function Ndt(e,t,r,n,i,o){const a=pe("RouterLink");return r.w?(I(),R(W,{key:0},[b("div",Bht,[b("div",null,[z(" Send "+L(r.w.label)+" ( ",1),n.userStore.displayWorkerStatsForPz?(I(),R(W,{key:0},[z(L(o.formatFixed(n.gameStore.workerStatsOnPlantzone(r.w).wspd,2))+"\u{1F528} "+L(o.formatFixed(n.gameStore.workerStatsOnPlantzone(r.w).mspd,2))+"\u{1F9B6} "+L(o.formatFixed(n.gameStore.workerStatsOnPlantzone(r.w).luck,2))+"\u{1F340} ",1)],64)):(I(),R(W,{key:1},[z(L(o.formatFixed(r.w.wspdSheet,2))+"\u{1F528} "+L(o.formatFixed(r.w.mspdSheet,2))+"\u{1F9B6} "+L(o.formatFixed(r.w.luckSheet,2))+"\u{1F340} ",1)],64)),z(" ) where? "+L(o.workerNearestCpPlantzonesProfit.length)+" top untaken nodes near "+L(n.gameStore.uloc.node[r.w.tnk])+": ",1)]),b("div",null,[$ht,gt(b("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>e.selectedRedirect=s)},[(I(!0),R(W,null,It(n.gameStore.townSet,s=>(I(),R("option",{value:s},L(n.gameStore.uloc.node[s]),9,zht))),256))],512),[[Sr,e.selectedRedirect]])])]),b("table",null,[b("tr",null,[Vht,Uht,Ght,jht,Wht,Hht,tt("",!0),Xht]),(I(!0),R(W,null,It(o.workerNearestCpPlantzonesProfit,s=>(I(),R("tr",null,[b("td",null,[b("a",{href:this.userStore.codexNodeUrl+s.pz.key},L(s.pz.name),9,Yht),(I(!0),R(W,null,It(this.gameStore.plantzones[s.pz.key].itemkeys,l=>(I(),R(W,null,[qht,xt(a,{tag:"a",to:{path:"./settings",hash:"#item"+l}},{default:Ee(()=>[b("img",{src:o.makeIconSrc(l),class:"iconitem"},null,8,Zht)]),_:2},1032,["to"])],64))),256))]),b("td",Kht,L(n.userStore.useFloatingModifiers[s.pz.regiongroup]?"~":"")+L(o.formatFixed(n.userStore.medianWorkloads[s.pz.key],2)),1),b("td",Jht,L(o.formatFixed(s.profit.dist,0)),1),b("td",Qht,L(o.formatFixed(s.profit.priceDaily,2)),1),b("td",tdt,[b("abbr",{title:Array.from(s.path,l=>`${n.userStore.autotakenNodes.has(l)?0:n.gameStore.nodes[l].CP} ${n.gameStore.uloc.node[l]}`).join(`
`),class:"tooltip"},L(s.mapCp),9,edt),rdt,b("abbr",{title:s.infraTooltip,class:"tooltip"},L(o.formatFixed(s.townCp)),9,ndt),z("="+L(o.formatFixed(s.cp)),1)]),b("td",idt,L(o.formatFixed(s.dailyPerCp,2)),1),tt("",!0),b("td",null,[b("button",{onClick:l=>o.assignWorkerPz(r.w,s.pz.key)},"assign",8,odt)])]))),256)),adt,n.userStore.farmingEnable&&n.userStore.workersFarmingCount<10?(I(),R("tr",sdt,[ldt,udt,cdt,b("td",fdt,L(o.formatFixed(o.thisFarmSelectionEntry.income,2)),1),b("td",hdt,[b("abbr",{title:o.thisFarmSelectionEntry.infraTooltip,class:"tooltip"},L(o.formatFixed(o.thisFarmSelectionEntry.infraCp)),9,ddt)]),b("td",pdt,L(o.formatFixed(o.thisFarmSelectionEntry.dailyPerCp,2)),1),tt("",!0),b("td",null,[b("button",{onClick:t[1]||(t[1]=s=>o.assignWorkerFm(r.w))},"assign")])])):tt("",!0),(I(!0),R(W,null,It(n.userStore.userWorkshops,(s,l)=>(I(),R("tr",null,[(!o.workshopBusy(l)||s.industry=="mass")&&n.gameStore.houseDistance(r.w.tnk,l)<1e6?(I(),R(W,{key:0},[b("td",null,[z(" \u{1F3ED} "+L(n.gameStore.uloc.char[l])+" "+L(s.label)+" ",1),vdt]),b("td",gdt,L(s.manualWorkload),1),b("td",mdt,L(o.formatFixed(n.gameStore.houseDistance(r.w.tnk,l),0)),1),b("td",_dt,L(o.formatFixed(n.gameStore.profitWorkshopWorker(l,s,r.w),2)),1),b("td",ydt,[b("abbr",bdt,L(o.workshopEntry(l,s).workshopCp),1),wdt,b("abbr",{title:o.workshopEntry(l,s).infraTooltip,class:"tooltip"},L(o.workshopEntry(l,s).infraCp),9,Sdt),z("="+L(o.workshopEntry(l,s).totalCp),1)]),b("td",Tdt,L(o.formatFixed(o.workshopEntry(l,s).dailyPerCp,2)),1),tt("",!0),b("td",null,[b("button",{onClick:u=>o.assignWorkerWorkshop(r.w,l)},"assign",8,Pdt)])],64)):tt("",!0)]))),256)),b("tr",null,[b("td",null,[Edt,kdt,b("div",Adt,[Cdt,gt(b("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>e.customLabel=s),class:"workshop-label-input"},null,512),[[ve,e.customLabel]])])]),Mdt,xdt,b("td",Ldt,[gt(b("input",{type:"number",class:"float4",step:"0.1","onUpdate:modelValue":t[3]||(t[3]=s=>e.customProfit=s)},null,512),[[ve,e.customProfit,void 0,{number:!0}]])]),b("td",Idt,[gt(b("input",{type:"number",class:"float3","onUpdate:modelValue":t[4]||(t[4]=s=>e.customCP=s)},null,512),[[ve,e.customCP,void 0,{number:!0}]]),Odt,b("abbr",{title:o.addBedHereInfo.tooltip,class:"tooltip"},L(o.addBedHereInfo.cost),9,Rdt),z("="+L(e.customCP+o.addBedHereInfo.cost),1)]),b("td",Ddt,L(o.formatFixed(e.customProfit/(e.customCP+o.addBedHereInfo.cost),2)),1),tt("",!0),b("td",null,[b("button",{onClick:t[5]||(t[5]=s=>o.assignWorkerCustom(r.w))},"assign")])])])],64)):tt("",!0)}const Fdt=$e(Fht,[["render",Ndt],["__scopeId","data-v-8447e8cb"]]),Bdt={setup(){const e=re();return{gameStore:At(),userStore:e}},props:{tk:String,o:Object,show:{type:Boolean,default:!1}},methods:{formatFixed:Ft}},$dt=z(" Connect to nearest town "),zdt=b("tr",null,[b("th",null,"House"),b("th",null,"\u{1F6CF}\uFE0F"),b("th",null,"CP")],-1),Vdt=["disabled","onUpdate:modelValue"],Udt=z(" "+L(" ")+" "),Gdt=["href"],jdt=["disabled"],Wdt=z(" P2W slots \u2192 Total: ");function Hdt(e,t,r,n,i,o){return r.o?(I(),R(W,{key:0},[b("h3",null,L(n.gameStore.uloc.town[r.tk])+" lodging config",1),r.tk==619?(I(),R(W,{key:0},[gt(b("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=a=>n.userStore.activateAncado=a)},null,512),[[ar,n.userStore.activateAncado]]),$dt],64)):tt("",!0),b("table",null,[zdt,(I(!0),R(W,null,It(r.o.houses,a=>(I(),R("tr",null,[b("td",null,[gt(b("input",{type:"checkbox",disabled:r.tk==619&&!n.userStore.activateAncado,"onUpdate:modelValue":s=>n.userStore.lodgingTaken[a.key]=s},null,8,Vdt),[[ar,n.userStore.lodgingTaken[a.key]]]),Udt,b("a",{href:"https://bdocodex.com/us/npc/"+a.key},L(n.gameStore.uloc.char[a.key]),9,Gdt)]),b("td",null,L(a.lodgingSpaces),1),b("td",null,L(a.CP),1)]))),256)),b("tr",null,[b("td",null,[gt(b("input",{type:"number",disabled:r.tk==619&&!n.userStore.activateAncado,"onUpdate:modelValue":t[1]||(t[1]=a=>n.userStore.lodgingP2W[r.tk]=a),class:"short"},null,8,jdt),[[ve,n.userStore.lodgingP2W[r.tk],void 0,{number:!0}]]),Wdt]),b("td",null,L(n.userStore.haveLodging.slots.perTown[r.tk]),1),b("td",null,L(n.userStore.haveLodging.cp.perTown[r.tk]),1)])])],64)):tt("",!0)}const Xdt=$e(Bdt,[["render",Hdt]]);const Ydt={setup(){const e=re();return{gameStore:At(),userStore:e}},props:{tk:String,o:Object,show:{type:Boolean,default:!1}},data:()=>({}),computed:{wantLodging(){this.tk in this.userStore.lodgingP2W||(this.userStore.lodgingP2W[this.tk]=0);const e=this.userStore.townWorkers(this.tk).length-this.userStore.lodgingP2W[this.tk]-1;return e>0?e:0},wantStorage(){if(!this.userStore.townsStoreItemkeys[this.tk].size)return 0;this.tk in this.userStore.storageP2W||(this.userStore.storageP2W[this.tk]=0),this.tk in this.userStore.storagePersonal||(this.userStore.storagePersonal[this.tk]=0);const e=this.userStore.townsStoreItemkeys[this.tk].size+this.userStore.storagePersonal[this.tk]-this.userStore.storageP2W[this.tk]-this.userStore.baseStorage;return e>0?e:0},bestLookup(){return this.gameStore.lsLookup(this.tk,this.wantLodging,this.wantStorage)},storageViewCount(){const e=this.userStore.baseStorage+this.userStore.storageP2W[this.tk]+this.userStore.townsInfra[this.tk].storage;return isNaN(e)?0:e},ingameSortedItems(){const e=[...this.userStore.townsStoreItemkeys[this.tk]];e.length&&e.push(1022),e.sort((n,i)=>{var o=this.gameStore.itemInfo[i].typePriority-this.gameStore.itemInfo[n].typePriority;if(o)return o;var o=this.gameStore.itemInfo[i].grade-this.gameStore.itemInfo[n].grade;return o||i-n});const t=Array(this.userStore.storagePersonal[this.tk]).fill("P"),r=e.concat(t);return e.length&&r.push("F"),r}},methods:{formatFixed:Ft,makeIconSrc:Vi,houseCraftPickedTooltip(e){const t=[];return this.userStore.townsInfra[e].indices.forEach((r,n)=>{if(this.userStore.townsInfra[e].states[n]==0)return;const i=this.userStore.townsInfra[e].states[n]==1?"\u{1F4E6}":"\u{1F6CF}\uFE0F";t.push(i+this.gameStore.uloc.char[r])}),t.join(`
`)}}},Xr=e=>(Ar("data-v-3a020ae7"),e=e(),Cr(),e),qdt={style:{"font-size":"x-large"}},Zdt=z(" housing config"),Kdt=z(" Connect to nearest town "),Jdt={class:"section"},Qdt=Xr(()=>b("h3",null,"\u{1F6CF}\uFE0F lodging",-1)),t0t=Xr(()=>b("br",null,null,-1)),e0t=z(" - 1 initial"),r0t=Xr(()=>b("br",null,null,-1)),n0t=z(" - "),i0t=["disabled"],o0t=z(" from P2W"),a0t=Xr(()=>b("br",null,null,-1)),s0t={key:0},l0t={key:1,class:"red"},u0t=Xr(()=>b("br",null,null,-1)),c0t={class:"section"},f0t={id:"storageParent"},h0t={id:"storageLeft"},d0t=Xr(()=>b("h3",null,"\u{1F4E6} storage",-1)),p0t=Xr(()=>b("br",null,null,-1)),v0t=z(" + 1 Seal + 1 Free slot"),g0t=Xr(()=>b("br",null,null,-1)),m0t=z(" + "),_0t=z(" Personal items"),y0t=Xr(()=>b("br",null,null,-1)),b0t=Xr(()=>b("span",{class:"markInnate underline"},"initial",-1)),w0t=Xr(()=>b("br",null,null,-1)),S0t=z(" - "),T0t=z(" "+L(" ")),P0t=Xr(()=>b("span",{class:"markP2W underline"},"from P2W",-1)),E0t=Xr(()=>b("br",null,null,-1)),k0t=Xr(()=>b("span",{class:"markProvided underline"},"required",-1)),A0t={key:1},C0t={key:2,class:"red"},M0t=Xr(()=>b("br",null,null,-1)),x0t=Xr(()=>b("span",{class:"markExtra underline"},"extra",-1)),L0t={id:"storageItemList"},I0t={key:0},O0t={key:0,class:"textItem"},R0t={key:1,class:"textItem"},D0t=["title"],N0t=["src"],F0t={class:"fsxs"};function B0t(e,t,r,n,i,o){return r.tk>0?(I(),R(W,{key:0},[tt("",!0),b("p",null,[b("span",qdt,L(n.gameStore.uloc.town[r.tk]),1),Zdt]),r.tk==619?(I(),R(W,{key:1},[gt(b("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=a=>n.userStore.activateAncado=a)},null,512),[[ar,n.userStore.activateAncado]]),Kdt],64)):tt("",!0),b("div",Jdt,[Qdt,z(" "+L(n.userStore.townWorkingWorkers(r.tk).length)+" used by workers",1),t0t,e0t,r0t,n0t,gt(b("input",{type:"number",class:"w3em",min:"0",max:"20",disabled:r.tk==619&&!n.userStore.activateAncado,"onUpdate:modelValue":t[1]||(t[1]=a=>n.userStore.lodgingP2W[r.tk]=a)},null,8,i0t),[[ve,n.userStore.lodgingP2W[r.tk],void 0,{number:!0}]]),o0t,a0t,z(" = "+L(n.userStore.townsInfra[r.tk].wantLodging)+" required ",1),n.userStore.townsInfra[r.tk].warnL?(I(),R("span",s0t,"\u2190 max possible")):tt("",!0),n.userStore.townsInfra[r.tk].errL?(I(),R("span",l0t,"\u2190 too much!")):tt("",!0),u0t,b("strong",null,L(n.userStore.townsInfra[r.tk].lodging)+" found ",1)]),b("div",c0t,[b("div",f0t,[b("div",h0t,[d0t,z(" "+L(n.userStore.townsStoreItemkeys[r.tk]&&n.userStore.townsStoreItemkeys[r.tk].size)+" worker items",1),p0t,n.userStore.townsStoreItemkeys[r.tk]&&n.userStore.townsStoreItemkeys[r.tk].size>0?(I(),R(W,{key:0},[v0t,g0t],64)):tt("",!0),m0t,gt(b("input",{type:"number",class:"w42em",min:"0",max:"192","onUpdate:modelValue":t[2]||(t[2]=a=>n.userStore.storagePersonal[r.tk]=a)},null,512),[[ve,n.userStore.storagePersonal[r.tk],void 0,{number:!0}]]),_0t,y0t,z(" - "+L(n.userStore.baseStorage)+" ",1),b0t,w0t,S0t,gt(b("input",{type:"number",class:"w42em",min:"0",max:"192","onUpdate:modelValue":t[3]||(t[3]=a=>n.userStore.storageP2W[r.tk]=a)},null,512),[[ve,n.userStore.storageP2W[r.tk],void 0,{number:!0}]]),T0t,P0t,E0t,z(" = "+L(n.userStore.townsInfra[r.tk].wantStorage)+" ",1),k0t,n.userStore.townsInfra[r.tk].warnS?(I(),R("span",A0t,"\u2190 max possible")):tt("",!0),n.userStore.townsInfra[r.tk].errS?(I(),R("span",C0t,"\u2190 too much!")):tt("",!0),M0t,b("strong",null,L(n.userStore.townsInfra[r.tk].storage)+" found",1),z(" \u2192 "+L(n.userStore.townsInfra[r.tk].storage-n.userStore.townsInfra[r.tk].wantStorage)+" ",1),x0t]),b("div",L0t,[(I(!0),R(W,null,It(o.storageViewCount,a=>(I(),R(W,null,[a>1&&(a-1)%9==0?(I(),R("br",I0t)):tt("",!0),b("div",{class:en(["storageCell",{markInnate:0<=a&&a<=n.userStore.baseStorage,markP2W:n.userStore.baseStorage<a&&a<=n.userStore.baseStorage+n.userStore.storageP2W[r.tk],markProvided:n.userStore.baseStorage+n.userStore.storageP2W[r.tk]<a&&a<=n.userStore.baseStorage+n.userStore.storageP2W[r.tk]+n.userStore.townsInfra[r.tk].wantStorage,markExtra:n.userStore.baseStorage+n.userStore.storageP2W[r.tk]+n.userStore.townsInfra[r.tk].wantStorage<a&&a<=n.userStore.baseStorage+n.userStore.storageP2W[r.tk]+n.userStore.townsInfra[r.tk].storage}])},[a-1>o.ingameSortedItems.length?(I(),R("span",O0t)):isNaN(o.ingameSortedItems[a-1])?(I(),R("span",R0t,L(o.ingameSortedItems[a-1]),1)):(I(),R("abbr",{key:2,title:o.ingameSortedItems[a-1]+" "+n.gameStore.uloc.item[o.ingameSortedItems[a-1]]},[b("img",{src:o.makeIconSrc(o.ingameSortedItems[a-1]),class:"iconitem"},null,8,N0t)],8,D0t))],2)],64))),256))])])]),b("details",null,[b("summary",null,"Found cost: "+L(n.userStore.townsInfra[r.tk].cost)+" CP",1),b("pre",F0t,L(n.userStore.townsInfra[r.tk].success?o.houseCraftPickedTooltip(r.tk):"FAILED"),1)])],64)):tt("",!0)}const $0t=$e(Ydt,[["render",B0t],["__scopeId","data-v-3a020ae7"]]);function r1(e,t){if(!e)throw new Error(t||"loader assertion failed.")}const HE=Boolean(typeof process!="object"||String(process)!=="[object process]"||process.browser),vx=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);vx&&parseFloat(vx[1]);const z0t="3.2.7";function ya(e,t){if(!e)throw new Error(t||"loaders.gl assertion failed.")}const N3=typeof process!="object"||String(process)!=="[object process]"||process.browser,V0t=typeof window<"u"&&typeof window.orientation<"u",gx=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);gx&&parseFloat(gx[1]);function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class U0t{constructor(t,r){E(this,"name",void 0),E(this,"workerThread",void 0),E(this,"isRunning",!0),E(this,"result",void 0),E(this,"_resolve",()=>{}),E(this,"_reject",()=>{}),this.name=t,this.workerThread=r,this.result=new Promise((n,i)=>{this._resolve=n,this._reject=i})}postMessage(t,r){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:r})}done(t){ya(this.isRunning),this.isRunning=!1,this._resolve(t)}error(t){ya(this.isRunning),this.isRunning=!1,this._reject(t)}}class nb{}const ib=new Map;function G0t(e){ya(e.source&&!e.url||!e.source&&e.url);let t=ib.get(e.source||e.url);return t||(e.url&&(t=j0t(e.url),ib.set(e.url,t)),e.source&&(t=b$(e.source),ib.set(e.source,t))),ya(t),t}function j0t(e){if(!e.startsWith("http"))return e;const t=W0t(e);return b$(t)}function b$(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function W0t(e){return`try {
  importScripts('`.concat(e,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}function w$(e,t=!0,r){const n=r||new Set;if(e){if(mx(e))n.add(e);else if(mx(e.buffer))n.add(e.buffer);else if(!ArrayBuffer.isView(e)){if(t&&typeof e=="object")for(const i in e)w$(e[i],t,n)}}return r===void 0?Array.from(n):[]}function mx(e){return e?e instanceof ArrayBuffer||typeof MessagePort<"u"&&e instanceof MessagePort||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas:!1}const ob=()=>{};class F3{static isSupported(){return typeof Worker<"u"&&N3||typeof nb!==void 0}constructor(t){E(this,"name",void 0),E(this,"source",void 0),E(this,"url",void 0),E(this,"terminated",!1),E(this,"worker",void 0),E(this,"onMessage",void 0),E(this,"onError",void 0),E(this,"_loadableURL","");const{name:r,source:n,url:i}=t;ya(n||i),this.name=r,this.source=n,this.url=i,this.onMessage=ob,this.onError=o=>console.log(o),this.worker=N3?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=ob,this.onError=ob,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(t,r){r=r||w$(t),this.worker.postMessage(t,r)}_getErrorFromErrorEvent(t){let r="Failed to load ";return r+="worker ".concat(this.name," from ").concat(this.url,". "),t.message&&(r+="".concat(t.message," in ")),t.lineno&&(r+=":".concat(t.lineno,":").concat(t.colno)),new Error(r)}_createBrowserWorker(){this._loadableURL=G0t({source:this.source,url:this.url});const t=new Worker(this._loadableURL,{name:this.name});return t.onmessage=r=>{r.data?this.onMessage(r.data):this.onError(new Error("No data received"))},t.onerror=r=>{this.onError(this._getErrorFromErrorEvent(r)),this.terminated=!0},t.onmessageerror=r=>console.error(r),t}_createNodeWorker(){let t;if(this.url){const n=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);t=new nb(n,{eval:!1})}else if(this.source)t=new nb(this.source,{eval:!0});else throw new Error("no worker");return t.on("message",r=>{this.onMessage(r)}),t.on("error",r=>{this.onError(r)}),t.on("exit",r=>{}),t}}class H0t{static isSupported(){return F3.isSupported()}constructor(t){E(this,"name","unnamed"),E(this,"source",void 0),E(this,"url",void 0),E(this,"maxConcurrency",1),E(this,"maxMobileConcurrency",1),E(this,"onDebug",()=>{}),E(this,"reuseWorkers",!0),E(this,"props",{}),E(this,"jobQueue",[]),E(this,"idleQueue",[]),E(this,"count",0),E(this,"isDestroyed",!1),this.source=t.source,this.url=t.url,this.setProps(t)}destroy(){this.idleQueue.forEach(t=>t.destroy()),this.isDestroyed=!0}setProps(t){this.props={...this.props,...t},t.name!==void 0&&(this.name=t.name),t.maxConcurrency!==void 0&&(this.maxConcurrency=t.maxConcurrency),t.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=t.maxMobileConcurrency),t.reuseWorkers!==void 0&&(this.reuseWorkers=t.reuseWorkers),t.onDebug!==void 0&&(this.onDebug=t.onDebug)}async startJob(t,r=(i,o,a)=>i.done(a),n=(i,o)=>i.error(o)){const i=new Promise(o=>(this.jobQueue.push({name:t,onMessage:r,onError:n,onStart:o}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const t=this._getAvailableWorker();if(!t)return;const r=this.jobQueue.shift();if(r){this.onDebug({message:"Starting job",name:r.name,workerThread:t,backlog:this.jobQueue.length});const n=new U0t(r.name,t);t.onMessage=i=>r.onMessage(n,i.type,i.payload),t.onError=i=>r.onError(n,i),r.onStart(n);try{await n.result}finally{this.returnWorkerToQueue(t)}}}returnWorkerToQueue(t){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const t="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new F3({name:t,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return V0t?this.maxMobileConcurrency:this.maxConcurrency}}const X0t={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class aa{static isSupported(){return F3.isSupported()}static getWorkerFarm(t={}){return aa._workerFarm=aa._workerFarm||new aa({}),aa._workerFarm.setProps(t),aa._workerFarm}constructor(t){E(this,"props",void 0),E(this,"workerPools",new Map),this.props={...X0t},this.setProps(t),this.workerPools=new Map}destroy(){for(const t of this.workerPools.values())t.destroy();this.workerPools=new Map}setProps(t){this.props={...this.props,...t};for(const r of this.workerPools.values())r.setProps(this._getWorkerPoolProps())}getWorkerPool(t){const{name:r,source:n,url:i}=t;let o=this.workerPools.get(r);return o||(o=new H0t({name:r,source:n,url:i}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(r,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}E(aa,"_workerFarm",void 0);const Y0t="latest";function q0t(e,t={}){const r=t[e.id]||{},n="".concat(e.id,"-worker.js");let i=r.workerUrl;if(!i&&e.id==="compression"&&(i=t.workerUrl),t._workerType==="test"&&(i="modules/".concat(e.module,"/dist/").concat(n)),!i){let o=e.version;o==="latest"&&(o=Y0t);const a=o?"@".concat(o):"";i="https://unpkg.com/@loaders.gl/".concat(e.module).concat(a,"/dist/").concat(n)}return ya(i),i}function Z0t(e,t=z0t){ya(e,"no worker provided");const r=e.version;return!(!t||!r)}function K0t(e,t){return!aa.isSupported()||!N3&&!(t!=null&&t._nodeWorkers)?!1:e.worker&&(t==null?void 0:t.worker)}async function J0t(e,t,r,n,i){const o=e.id,a=q0t(e,r),l=aa.getWorkerFarm(r).getWorkerPool({name:o,url:a});r=JSON.parse(JSON.stringify(r)),n=JSON.parse(JSON.stringify(n||{}));const u=await l.startJob("process-on-worker",Q0t.bind(null,i));return u.postMessage("process",{input:t,options:r,context:n}),await(await u.result).result}async function Q0t(e,t,r,n){switch(r){case"done":t.done(n);break;case"error":t.error(new Error(n.error));break;case"process":const{id:i,input:o,options:a}=n;try{const s=await e(o,a);t.postMessage("done",{id:i,result:s})}catch(s){const l=s instanceof Error?s.message:"unknown error";t.postMessage("error",{id:i,error:l})}break;default:console.warn("parse-with-worker unknown message ".concat(r))}}function S$(e){return e&&typeof e=="object"&&e.isBuffer}function tpt(e){return S$(e)?new Uint8Array(e.buffer,e.byteOffset,e.length).slice().buffer:e}function T$(e){if(S$(e))return tpt(e);if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if(typeof e=="string"){const t=e;return new TextEncoder().encode(t).buffer}if(e&&typeof e=="object"&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")}function ept(e,t,r){if(r=r||e.byteLength,e.byteLength<r||t.byteLength<r)return!1;const n=new Uint8Array(e),i=new Uint8Array(t);for(let o=0;o<n.length;++o)if(n[o]!==i[o])return!1;return!0}function rpt(...e){const t=e.map(o=>o instanceof ArrayBuffer?new Uint8Array(o):o),r=t.reduce((o,a)=>o+a.byteLength,0),n=new Uint8Array(r);let i=0;for(const o of t)n.set(o,i),i+=o.byteLength;return n.buffer}async function npt(e){const t=[];for await(const r of e)t.push(r);return rpt(...t)}function _x(){let e;if(typeof window<"u"&&window.performance)e=window.performance.now();else if(typeof process<"u"&&process.hrtime){const t=process.hrtime();e=t[0]*1e3+t[1]/1e6}else e=Date.now();return e}class yx{constructor(t,r){E(this,"name",void 0),E(this,"type",void 0),E(this,"sampleSize",1),E(this,"time",void 0),E(this,"count",void 0),E(this,"samples",void 0),E(this,"lastTiming",void 0),E(this,"lastSampleTime",void 0),E(this,"lastSampleCount",void 0),E(this,"_count",0),E(this,"_time",0),E(this,"_samples",0),E(this,"_startTime",0),E(this,"_timerPending",!1),this.name=t,this.type=r,this.reset()}setSampleSize(t){return this.sampleSize=t,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(t){return this._count+=t,this._samples++,this._checkSampling(),this}subtractCount(t){return this._count-=t,this._samples++,this._checkSampling(),this}addTime(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=_x(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(_x()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class T_{constructor(t){E(this,"id",void 0),E(this,"stats",{}),this.id=t.id,this.stats={},this._initializeStats(t.stats),Object.seal(this)}get(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:t,type:r})}get size(){return Object.keys(this.stats).length}reset(){for(const t in this.stats)this.stats[t].reset();return this}forEach(t){for(const r in this.stats)t(this.stats[r])}getTable(){const t={};return this.forEach(r=>{t[r.name]={time:r.time||0,count:r.count||0,average:r.getAverageTime()||0,hz:r.getHz()||0}}),t}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(r=>this._getOrCreate(r))}_getOrCreate(t){if(!t||!t.name)return null;const{name:r,type:n}=t;return this.stats[r]||(t instanceof yx?this.stats[r]=t:this.stats[r]=new yx(r,n)),this.stats[r]}}const ipt="Queued Requests",opt="Active Requests",apt="Cancelled Requests",spt="Queued Requests Ever",lpt="Active Requests Ever",upt={id:"request-scheduler",throttleRequests:!0,maxRequests:6};class cpt{constructor(t={}){E(this,"props",void 0),E(this,"stats",void 0),E(this,"activeRequestCount",0),E(this,"requestQueue",[]),E(this,"requestMap",new Map),E(this,"deferredUpdate",null),this.props={...upt,...t},this.stats=new T_({id:this.props.id}),this.stats.get(ipt),this.stats.get(opt),this.stats.get(apt),this.stats.get(spt),this.stats.get(lpt)}scheduleRequest(t,r=()=>0){if(!this.props.throttleRequests)return Promise.resolve({done:()=>{}});if(this.requestMap.has(t))return this.requestMap.get(t);const n={handle:t,priority:0,getPriority:r},i=new Promise(o=>(n.resolve=o,n));return this.requestQueue.push(n),this.requestMap.set(t,i),this._issueNewRequests(),i}_issueRequest(t){const{handle:r,resolve:n}=t;let i=!1;const o=()=>{i||(i=!0,this.requestMap.delete(r),this.activeRequestCount--,this._issueNewRequests())};return this.activeRequestCount++,n?n({done:o}):Promise.resolve({done:o})}_issueNewRequests(){this.deferredUpdate||(this.deferredUpdate=setTimeout(()=>this._issueNewRequestsAsync(),0))}_issueNewRequestsAsync(){this.deferredUpdate=null;const t=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(t!==0){this._updateAllRequests();for(let r=0;r<t;++r){const n=this.requestQueue.shift();n&&this._issueRequest(n)}}}_updateAllRequests(){const t=this.requestQueue;for(let r=0;r<t.length;++r){const n=t[r];this._updateRequest(n)||(t.splice(r,1),this.requestMap.delete(n.handle),r--)}t.sort((r,n)=>r.priority-n.priority)}_updateRequest(t){return t.priority=t.getPriority(t.handle),t.priority<0?(t.resolve(null),!1):!0}}let fpt="";const bx={};function hpt(e){for(const t in bx)if(e.startsWith(t)){const r=bx[t];e=e.replace(t,r)}return!e.startsWith("http://")&&!e.startsWith("https://")&&(e="".concat(fpt).concat(e)),e}function dpt(e){const t=e&&e.lastIndexOf("/");return t>=0?e.substr(t+1):""}const ppt=e=>typeof e=="boolean",Md=e=>typeof e=="function",U0=e=>e!==null&&typeof e=="object",Sx=e=>U0(e)&&e.constructor==={}.constructor,vpt=e=>e&&typeof e[Symbol.iterator]=="function",gpt=e=>e&&typeof e[Symbol.asyncIterator]=="function",Ef=e=>typeof Response<"u"&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json,kf=e=>typeof Blob<"u"&&e instanceof Blob,mpt=e=>e&&typeof e=="object"&&e.isBuffer,_pt=e=>typeof ReadableStream<"u"&&e instanceof ReadableStream||U0(e)&&Md(e.tee)&&Md(e.cancel)&&Md(e.getReader),ypt=e=>U0(e)&&Md(e.read)&&Md(e.pipe)&&ppt(e.readable),P$=e=>_pt(e)||ypt(e),bpt=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,wpt=/^([-\w.]+\/[-\w.+]+)/;function Spt(e){const t=wpt.exec(e);return t?t[1]:e}function Tx(e){const t=bpt.exec(e);return t?t[1]:""}const Tpt=/\?.*/;function P_(e){if(Ef(e)){const t=ab(e.url||""),r=e.headers.get("content-type")||"";return{url:t,type:Spt(r)||Tx(t)}}return kf(e)?{url:ab(e.name||""),type:e.type||""}:typeof e=="string"?{url:ab(e),type:Tx(e)}:{url:"",type:""}}function Ppt(e){return Ef(e)?e.headers["content-length"]||-1:kf(e)?e.size:typeof e=="string"?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}function ab(e){return e.replace(Tpt,"")}async function E$(e){if(Ef(e))return e;const t={},r=Ppt(e);r>=0&&(t["content-length"]=String(r));const{url:n,type:i}=P_(e);i&&(t["content-type"]=i);const o=await Apt(e);o&&(t["x-first-bytes"]=o),typeof e=="string"&&(e=new TextEncoder().encode(e));const a=new Response(e,{headers:t});return Object.defineProperty(a,"url",{value:n}),a}async function Ept(e){if(!e.ok){const t=await kpt(e);throw new Error(t)}}async function kpt(e){let t="Failed to fetch resource ".concat(e.url," (").concat(e.status,"): ");try{const r=e.headers.get("Content-Type");let n=e.statusText;r.includes("application/json")&&(n+=" ".concat(await e.text())),t+=n,t=t.length>60?"".concat(t.slice(0,60),"..."):t}catch{}return t}async function Apt(e){if(typeof e=="string")return"data:,".concat(e.slice(0,5));if(e instanceof Blob){const r=e.slice(0,5);return await new Promise(n=>{const i=new FileReader;i.onload=o=>{var a;return n(o==null||(a=o.target)===null||a===void 0?void 0:a.result)},i.readAsDataURL(r)})}if(e instanceof ArrayBuffer){const r=e.slice(0,5),n=Cpt(r);return"data:base64,".concat(n)}return null}function Cpt(e){let t="";const r=new Uint8Array(e);for(let n=0;n<r.byteLength;n++)t+=String.fromCharCode(r[n]);return btoa(t)}async function Px(e,t){if(typeof e=="string"){e=hpt(e);let r=t;return t!=null&&t.fetch&&typeof(t==null?void 0:t.fetch)!="function"&&(r=t.fetch),await fetch(e,r)}return await E$(e)}function k$(e){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&Boolean(process.versions.electron))return!0;const t=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,r=e||t;return!!(r&&r.indexOf("Electron")>=0)}function xa(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||k$()}const Jg={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:typeof process=="object"&&process},vv=Jg.window||Jg.self||Jg.global,bh=Jg.process||{},A$=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";xa();const sb=globalThis;function C$(e){if(!e&&!xa())return"Node";if(k$(e))return"Electron";const r=e||(typeof navigator<"u"?navigator:{}).userAgent||"";if(r.indexOf("Edge")>-1)return"Edge";const n=r.indexOf("MSIE ")!==-1,i=r.indexOf("Trident/")!==-1;return n||i?"IE":sb.chrome?"Chrome":sb.safari?"Safari":sb.mozInnerScreenX?"Firefox":"Unknown"}function Mpt(e){try{const t=window[e],r="__storage_test__";return t.setItem(r,r),t.removeItem(r),t}catch{return null}}class xpt{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";E(this,"storage",void 0),E(this,"id",void 0),E(this,"config",{}),this.storage=Mpt(n),this.id=t,this.config={},Object.assign(this.config,r),this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){return this.config={},this.updateConfiguration(t)}updateConfiguration(t){if(Object.assign(this.config,t),this.storage){const r=JSON.stringify(this.config);this.storage.setItem(this.id,r)}return this}_loadConfiguration(){let t={};if(this.storage){const r=this.storage.getItem(this.id);t=r?JSON.parse(r):{}}return Object.assign(this.config,t),this}}function Lpt(e){let t;return e<10?t="".concat(e.toFixed(2),"ms"):e<100?t="".concat(e.toFixed(1),"ms"):e<1e3?t="".concat(e.toFixed(0),"ms"):t="".concat((e/1e3).toFixed(2),"s"),t}function Ipt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const r=Math.max(t-e.length,0);return"".concat(" ".repeat(r)).concat(e)}function lb(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=e.src.replace(/\(/g,"%28").replace(/\)/g,"%29");e.width>n&&(r=Math.min(r,n/e.width));const o=e.width*r,a=e.height*r,s=["font-size:1px;","padding:".concat(Math.floor(a/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(a,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(a,"px;"),"color:transparent;"].join("");return["".concat(t," %c+"),s]}let n1;(function(e){e[e.BLACK=30]="BLACK",e[e.RED=31]="RED",e[e.GREEN=32]="GREEN",e[e.YELLOW=33]="YELLOW",e[e.BLUE=34]="BLUE",e[e.MAGENTA=35]="MAGENTA",e[e.CYAN=36]="CYAN",e[e.WHITE=37]="WHITE",e[e.BRIGHT_BLACK=90]="BRIGHT_BLACK",e[e.BRIGHT_RED=91]="BRIGHT_RED",e[e.BRIGHT_GREEN=92]="BRIGHT_GREEN",e[e.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",e[e.BRIGHT_BLUE=94]="BRIGHT_BLUE",e[e.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",e[e.BRIGHT_CYAN=96]="BRIGHT_CYAN",e[e.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(n1||(n1={}));function Ex(e){return typeof e=="string"?n1[e.toUpperCase()]||n1.WHITE:e}function Opt(e,t,r){return!xa&&typeof e=="string"&&(t&&(t=Ex(t),e="\x1B[".concat(t,"m").concat(e,"\x1B[39m")),r&&(t=Ex(r),e="\x1B[".concat(r+10,"m").concat(e,"\x1B[49m"))),e}function Rpt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const r=Object.getPrototypeOf(e),n=Object.getOwnPropertyNames(r);for(const i of n)typeof e[i]=="function"&&(t.find(o=>i===o)||(e[i]=e[i].bind(e)))}function i1(e,t){if(!e)throw new Error(t||"Assertion failed")}function Zu(){let e;if(xa&&"performance"in vv){var t,r;e=vv==null||(t=vv.performance)===null||t===void 0||(r=t.now)===null||r===void 0?void 0:r.call(t)}else if("hrtime"in bh){var n;const i=bh==null||(n=bh.hrtime)===null||n===void 0?void 0:n.call(bh);e=i[0]*1e3+i[1]/1e6}else e=Date.now();return e}const Ku={debug:xa&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Dpt={enabled:!0,level:0};function qn(){}const kx={},Ax={once:!0};class G0{constructor(){let{id:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};E(this,"id",void 0),E(this,"VERSION",A$),E(this,"_startTs",Zu()),E(this,"_deltaTs",Zu()),E(this,"_storage",void 0),E(this,"userData",{}),E(this,"LOG_THROTTLE_TIMEOUT",0),this.id=t,this._storage=new xpt("__probe-".concat(this.id,"__"),Dpt),this.userData={},this.timeStamp("".concat(this.id," started")),Rpt(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Zu()-this._startTs).toPrecision(10))}getDelta(){return Number((Zu()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.updateConfiguration({enabled:t}),this}setLevel(t){return this._storage.updateConfiguration({level:t}),this}get(t){return this._storage.config[t]}set(t,r){this._storage.updateConfiguration({[t]:r})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(t,r){i1(t,r)}warn(t){return this._getLogFunction(0,t,Ku.warn,arguments,Ax)}error(t){return this._getLogFunction(0,t,Ku.error,arguments)}deprecated(t,r){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(r,"` instead"))}removed(t,r){return this.error("`".concat(t,"` has been removed. Use `").concat(r,"` instead"))}probe(t,r){return this._getLogFunction(t,r,Ku.log,arguments,{time:!0,once:!0})}log(t,r){return this._getLogFunction(t,r,Ku.debug,arguments)}info(t,r){return this._getLogFunction(t,r,console.info,arguments)}once(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];return this._getLogFunction(t,r,Ku.debug||Ku.info,arguments,Ax)}table(t,r,n){return r?this._getLogFunction(t,r,console.table||qn,n&&[n],{tag:$pt(r)}):qn}image(t){let{logLevel:r,priority:n,image:i,message:o="",scale:a=1}=t;return this._shouldLog(r||n)?xa?Bpt({image:i,message:o,scale:a}):Fpt({image:i,message:o,scale:a}):qn}time(t,r){return this._getLogFunction(t,r,console.time?console.time:console.info)}timeEnd(t,r){return this._getLogFunction(t,r,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,r){return this._getLogFunction(t,r,console.timeStamp||qn)}group(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=Cx({logLevel:t,message:r,opts:n}),{collapsed:o}=n;return i.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(t,r,Object.assign({},n,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||qn)}withGroup(t,r,n){this.group(t,r)();try{n()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=M$(t)}_getLogFunction(t,r,n,i,o){if(this._shouldLog(t)){o=Cx({logLevel:t,message:r,args:i,opts:o}),n=n||o.method,i1(n),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=Zu();const a=o.tag||o.message;if(o.once)if(!kx[a])kx[a]=Zu();else return qn;return r=Npt(this.id,o.message,o),n.bind(console,r,...o.args)}return qn}}E(G0,"VERSION",A$);function M$(e){if(!e)return 0;let t;switch(typeof e){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return i1(Number.isFinite(t)&&t>=0),t}function Cx(e){const{logLevel:t,message:r}=e;e.logLevel=M$(t);const n=e.args?Array.from(e.args):[];for(;n.length&&n.shift()!==r;);switch(typeof t){case"string":case"function":r!==void 0&&n.unshift(r),e.message=t;break;case"object":Object.assign(e,t);break}typeof e.message=="function"&&(e.message=e.message());const i=typeof e.message;return i1(i==="string"||i==="object"),Object.assign(e,{args:n},e.opts)}function Npt(e,t,r){if(typeof t=="string"){const n=r.time?Ipt(Lpt(r.total)):"";t=r.time?"".concat(e,": ").concat(n,"  ").concat(t):"".concat(e,": ").concat(t),t=Opt(t,r.color,r.background)}return t}function Fpt(e){let{image:t,message:r="",scale:n=1}=e;return(void 0)({image:t,message:r,scale:n}),qn}function Bpt(e){let{image:t,message:r="",scale:n=1}=e;if(typeof t=="string"){const o=new Image;return o.onload=()=>{const a=lb(o,r,n);console.log(...a)},o.src=t,qn}const i=t.nodeName||"";if(i.toLowerCase()==="img")return console.log(...lb(t,r,n)),qn;if(i.toLowerCase()==="canvas"){const o=new Image;return o.onload=()=>console.log(...lb(o,r,n)),o.src=t.toDataURL(),qn}return qn}function $pt(e){for(const t in e)for(const r in e[t])return r||"untitled";return"empty"}const Mx=new G0({id:"loaders.gl"});class zpt{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class Vpt{constructor(){E(this,"console",void 0),this.console=console}log(...t){return this.console.log.bind(this.console,...t)}info(...t){return this.console.info.bind(this.console,...t)}warn(...t){return this.console.warn.bind(this.console,...t)}error(...t){return this.console.error.bind(this.console,...t)}}const x$={fetch:null,mimeType:void 0,nothrow:!1,log:new Vpt,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:HE,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},Upt={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function L$(){globalThis.loaders=globalThis.loaders||{};const{loaders:e}=globalThis;return e._state=e._state||{},e._state}const I$=()=>{const e=L$();return e.globalOptions=e.globalOptions||{...x$},e.globalOptions};function Gpt(e,t,r,n){return r=r||[],r=Array.isArray(r)?r:[r],jpt(e,r),Hpt(t,e,n)}function O$(e,t){const r=I$(),n=e||r;return typeof n.fetch=="function"?n.fetch:U0(n.fetch)?i=>Px(i,n):t!=null&&t.fetch?t==null?void 0:t.fetch:Px}function jpt(e,t){xx(e,null,x$,Upt,t);for(const r of t){const n=e&&e[r.id]||{},i=r.options&&r.options[r.id]||{},o=r.deprecatedOptions&&r.deprecatedOptions[r.id]||{};xx(n,r.id,i,o,t)}}function xx(e,t,r,n,i){const o=t||"Top level",a=t?"".concat(t,"."):"";for(const s in e){const l=!t&&U0(e[s]),u=s==="baseUri"&&!t,c=s==="workerUrl"&&t;if(!(s in r)&&!u&&!c){if(s in n)Mx.warn("".concat(o," loader option '").concat(a).concat(s,"' no longer supported, use '").concat(n[s],"'"))();else if(!l){const f=Wpt(s,i);Mx.warn("".concat(o," loader option '").concat(a).concat(s,"' not recognized. ").concat(f))()}}}}function Wpt(e,t){const r=e.toLowerCase();let n="";for(const i of t)for(const o in i.options){if(e===o)return"Did you mean '".concat(i.id,".").concat(o,"'?");const a=o.toLowerCase();(r.startsWith(a)||a.startsWith(r))&&(n=n||"Did you mean '".concat(i.id,".").concat(o,"'?"))}return n}function Hpt(e,t,r){const i={...e.options||{}};return Xpt(i,r),i.log===null&&(i.log=new zpt),Lx(i,I$()),Lx(i,t),i}function Lx(e,t){for(const r in t)if(r in t){const n=t[r];Sx(n)&&Sx(e[r])?e[r]={...e[r],...t[r]}:e[r]=t[r]}}function Xpt(e,t){t&&!("baseUri"in e)&&(e.baseUri=t)}function XE(e){var t;return e?(Array.isArray(e)&&(e=e[0]),Array.isArray((t=e)===null||t===void 0?void 0:t.extensions)):!1}function YE(e){var t,r;r1(e,"null loader"),r1(XE(e),"invalid loader");let n;return Array.isArray(e)&&(n=e[1],e=e[0],e={...e,options:{...e.options,...n}}),((t=e)!==null&&t!==void 0&&t.parseTextSync||(r=e)!==null&&r!==void 0&&r.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}const R$=()=>{const e=L$();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};function Ypt(e){const t=R$();e=Array.isArray(e)?e:[e];for(const r of e){const n=YE(r);t.find(i=>n===i)||t.unshift(n)}}function qpt(){return R$()}const Zpt=new G0({id:"loaders.gl"}),Kpt=/\.([^.]+)$/;async function Jpt(e,t=[],r,n){if(!D$(e))return null;let i=Ix(e,t,{...r,nothrow:!0},n);if(i)return i;if(kf(e)&&(e=await e.slice(0,10).arrayBuffer(),i=Ix(e,t,r,n)),!i&&!(r!=null&&r.nothrow))throw new Error(N$(e));return i}function Ix(e,t=[],r,n){if(!D$(e))return null;if(t&&!Array.isArray(t))return YE(t);let i=[];t&&(i=i.concat(t)),r!=null&&r.ignoreRegisteredLoaders||i.push(...qpt()),tvt(i);const o=Qpt(e,i,r,n);if(!o&&!(r!=null&&r.nothrow))throw new Error(N$(e));return o}function Qpt(e,t,r,n){const{url:i,type:o}=P_(e),a=i||(n==null?void 0:n.url);let s=null,l="";if(r!=null&&r.mimeType&&(s=ub(t,r==null?void 0:r.mimeType),l="match forced by supplied MIME type ".concat(r==null?void 0:r.mimeType)),s=s||evt(t,a),l=l||(s?"matched url ".concat(a):""),s=s||ub(t,o),l=l||(s?"matched MIME type ".concat(o):""),s=s||nvt(t,e),l=l||(s?"matched initial data ".concat(F$(e)):""),s=s||ub(t,r==null?void 0:r.fallbackMimeType),l=l||(s?"matched fallback MIME type ".concat(o):""),l){var u;Zpt.log(1,"selectLoader selected ".concat((u=s)===null||u===void 0?void 0:u.name,": ").concat(l,"."))}return s}function D$(e){return!(e instanceof Response&&e.status===204)}function N$(e){const{url:t,type:r}=P_(e);let n="No valid loader found (";n+=t?"".concat(dpt(t),", "):"no url provided, ",n+="MIME type: ".concat(r?'"'.concat(r,'"'):"not provided",", ");const i=e?F$(e):"";return n+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",n+=")",n}function tvt(e){for(const t of e)YE(t)}function evt(e,t){const r=t&&Kpt.exec(t),n=r&&r[1];return n?rvt(e,n):null}function rvt(e,t){t=t.toLowerCase();for(const r of e)for(const n of r.extensions)if(n.toLowerCase()===t)return r;return null}function ub(e,t){for(const r of e)if(r.mimeTypes&&r.mimeTypes.includes(t)||t==="application/x.".concat(r.id))return r;return null}function nvt(e,t){if(!t)return null;for(const r of e)if(typeof t=="string"){if(ivt(t,r))return r}else if(ArrayBuffer.isView(t)){if(Ox(t.buffer,t.byteOffset,r))return r}else if(t instanceof ArrayBuffer&&Ox(t,0,r))return r;return null}function ivt(e,t){return t.testText?t.testText(e):(Array.isArray(t.tests)?t.tests:[t.tests]).some(n=>e.startsWith(n))}function Ox(e,t,r){return(Array.isArray(r.tests)?r.tests:[r.tests]).some(i=>ovt(e,t,r,i))}function ovt(e,t,r,n){if(n instanceof ArrayBuffer)return ept(n,e,n.byteLength);switch(typeof n){case"function":return n(e,r);case"string":const i=B3(e,t,n.length);return n===i;default:return!1}}function F$(e,t=5){return typeof e=="string"?e.slice(0,t):ArrayBuffer.isView(e)?B3(e.buffer,e.byteOffset,t):e instanceof ArrayBuffer?B3(e,0,t):""}function B3(e,t,r){if(e.byteLength<t+r)return"";const n=new DataView(e);let i="";for(let o=0;o<r;o++)i+=String.fromCharCode(n.getUint8(t+o));return i}const avt=256*1024;function*svt(e,t){const r=(t==null?void 0:t.chunkSize)||avt;let n=0;const i=new TextEncoder;for(;n<e.length;){const o=Math.min(e.length-n,r),a=e.slice(n,n+o);n+=o,yield i.encode(a)}}const lvt=256*1024;function*uvt(e,t={}){const{chunkSize:r=lvt}=t;let n=0;for(;n<e.byteLength;){const i=Math.min(e.byteLength-n,r),o=new ArrayBuffer(i),a=new Uint8Array(e,n,i);new Uint8Array(o).set(a),n+=i,yield o}}const cvt=1024*1024;async function*fvt(e,t){const r=(t==null?void 0:t.chunkSize)||cvt;let n=0;for(;n<e.size;){const i=n+r,o=await e.slice(n,i).arrayBuffer();n=i,yield o}}function Rx(e,t){return HE?hvt(e,t):dvt(e)}async function*hvt(e,t){const r=e.getReader();let n;try{for(;;){const i=n||r.read();t!=null&&t._streamReadAhead&&(n=r.read());const{done:o,value:a}=await i;if(o)return;yield T$(a)}}catch{r.releaseLock()}}async function*dvt(e,t){for await(const r of e)yield T$(r)}function pvt(e,t){if(typeof e=="string")return svt(e,t);if(e instanceof ArrayBuffer)return uvt(e,t);if(kf(e))return fvt(e,t);if(P$(e))return Rx(e,t);if(Ef(e))return Rx(e.body,t);throw new Error("makeIterator")}const B$="Cannot convert supplied data type";function vvt(e,t,r){if(t.text&&typeof e=="string")return e;if(mpt(e)&&(e=e.buffer),e instanceof ArrayBuffer){const n=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(e)){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);let n=e.buffer;const i=e.byteLength||e.length;return(e.byteOffset!==0||i!==n.byteLength)&&(n=n.slice(e.byteOffset,e.byteOffset+i)),n}throw new Error(B$)}async function gvt(e,t,r){const n=e instanceof ArrayBuffer||ArrayBuffer.isView(e);if(typeof e=="string"||n)return vvt(e,t);if(kf(e)&&(e=await E$(e)),Ef(e)){const i=e;return await Ept(i),t.binary?await i.arrayBuffer():await i.text()}if(P$(e)&&(e=pvt(e,r)),vpt(e)||gpt(e))return npt(e);throw new Error(B$)}function mvt(e,t,r=null){if(r)return r;const n={fetch:O$(t,e),...e};return Array.isArray(n.loaders)||(n.loaders=null),n}function _vt(e,t){if(!t&&e&&!Array.isArray(e))return e;let r;if(e&&(r=Array.isArray(e)?e:[e]),t&&t.loaders){const n=Array.isArray(t.loaders)?t.loaders:[t.loaders];r=r?[...r,...n]:n}return r&&r.length?r:null}async function qE(e,t,r,n){ya(!n||typeof n=="object"),t&&!Array.isArray(t)&&!XE(t)&&(n=void 0,r=t,t=void 0),e=await e,r=r||{};const{url:i}=P_(e),a=_vt(t,n),s=await Jpt(e,a,r);return s?(r=Gpt(r,s,a,i),n=mvt({url:i,parse:qE,loaders:a},r,n),await yvt(s,e,r,n)):null}async function yvt(e,t,r,n){if(Z0t(e),Ef(t)){const i=t,{ok:o,redirected:a,status:s,statusText:l,type:u,url:c}=i,f=Object.fromEntries(i.headers.entries());n.response={headers:f,ok:o,redirected:a,status:s,statusText:l,type:u,url:c}}if(t=await gvt(t,e,r),e.parseTextSync&&typeof t=="string")return r.dataType="text",e.parseTextSync(t,r,n,e);if(K0t(e,r))return await J0t(e,t,r,n,qE);if(e.parseText&&typeof t=="string")return await e.parseText(t,r,n,e);if(e.parse)return await e.parse(t,r,n,e);throw ya(!e.parseSync),new Error("".concat(e.id," loader - no parser found and worker is disabled"))}async function o1(e,t,r,n){!Array.isArray(t)&&!XE(t)&&(r=t,t=void 0);const i=O$(r);let o=e;return typeof e=="string"&&(o=await i(e)),kf(e)&&(o=await i(e)),await qE(o,t,r)}const bvt="3.2.7",{_parseImageNode:wvt}=globalThis,$3=typeof Image<"u",z3=typeof ImageBitmap<"u",Svt=Boolean(wvt),V3=HE?!0:Svt;function Tvt(e){switch(e){case"auto":return z3||$3||V3;case"imagebitmap":return z3;case"image":return $3;case"data":return V3;default:throw new Error("@loaders.gl/images: image ".concat(e," not supported in this environment"))}}function Pvt(){if(z3)return"imagebitmap";if($3)return"image";if(V3)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function Evt(e){const t=Avt(e);if(!t)throw new Error("Not an image");return t}function kvt(e){switch(Evt(e)){case"data":return e;case"image":case"imagebitmap":const t=document.createElement("canvas"),r=t.getContext("2d");if(!r)throw new Error("getImageData");return t.width=e.width,t.height=e.height,r.drawImage(e,0,0),r.getImageData(0,0,e.width,e.height);default:throw new Error("getImageData")}}function Avt(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&e instanceof Image?"image":e&&typeof e=="object"&&e.data&&e.width&&e.height?"data":null}const Cvt=/^data:image\/svg\+xml/,Mvt=/\.svg((\?|#).*)?$/;function ZE(e){return e&&(Cvt.test(e)||Mvt.test(e))}function xvt(e,t){if(ZE(t)){let n=new TextDecoder().decode(e);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(n=unescape(encodeURIComponent(n)))}catch(o){throw new Error(o.message)}return"data:image/svg+xml;base64,".concat(btoa(n))}return $$(e,t)}function $$(e,t){if(ZE(t))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(e)])}async function z$(e,t,r){const n=xvt(e,r),i=self.URL||self.webkitURL,o=typeof n!="string"&&i.createObjectURL(n);try{return await Lvt(o||n,t)}finally{o&&i.revokeObjectURL(o)}}async function Lvt(e,t){const r=new Image;return r.src=e,t.image&&t.image.decode&&r.decode?(await r.decode(),r):await new Promise((n,i)=>{try{r.onload=()=>n(r),r.onerror=o=>i(new Error("Could not load image ".concat(e,": ").concat(o)))}catch(o){i(o)}})}const Ivt={};let Dx=!0;async function Ovt(e,t,r){let n;ZE(r)?n=await z$(e,t,r):n=$$(e,r);const i=t&&t.imagebitmap;return await Rvt(n,i)}async function Rvt(e,t=null){if((Dvt(t)||!Dx)&&(t=null),t)try{return await createImageBitmap(e,t)}catch(r){console.warn(r),Dx=!1}return await createImageBitmap(e)}function Dvt(e){for(const t in e||Ivt)return!1;return!0}const yo=!1,xd=!0;function V$(e){const t=j0(e);return Nvt(t)||$vt(t)||Fvt(t)||Bvt(t)}function Nvt(e){const t=j0(e);return t.byteLength>=24&&t.getUint32(0,yo)===2303741511?{mimeType:"image/png",width:t.getUint32(16,yo),height:t.getUint32(20,yo)}:null}function Fvt(e){const t=j0(e);return t.byteLength>=10&&t.getUint32(0,yo)===1195984440?{mimeType:"image/gif",width:t.getUint16(6,xd),height:t.getUint16(8,xd)}:null}function Bvt(e){const t=j0(e);return t.byteLength>=14&&t.getUint16(0,yo)===16973&&t.getUint32(2,xd)===t.byteLength?{mimeType:"image/bmp",width:t.getUint32(18,xd),height:t.getUint32(22,xd)}:null}function $vt(e){const t=j0(e);if(!(t.byteLength>=3&&t.getUint16(0,yo)===65496&&t.getUint8(2)===255))return null;const{tableMarkers:n,sofMarkers:i}=zvt();let o=2;for(;o+9<t.byteLength;){const a=t.getUint16(o,yo);if(i.has(a))return{mimeType:"image/jpeg",height:t.getUint16(o+5,yo),width:t.getUint16(o+7,yo)};if(!n.has(a))return null;o+=2,o+=t.getUint16(o,yo)}return null}function zvt(){const e=new Set([65499,65476,65484,65501,65534]);for(let r=65504;r<65520;++r)e.add(r);return{tableMarkers:e,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function j0(e){if(e instanceof DataView)return e;if(ArrayBuffer.isView(e))return new DataView(e.buffer);if(e instanceof ArrayBuffer)return new DataView(e);throw new Error("toDataView")}async function Vvt(e,t){const{mimeType:r}=V$(e)||{},n=globalThis._parseImageNode;return r1(n),await n(e,r)}async function Uvt(e,t,r){t=t||{};const i=(t.image||{}).type||"auto",{url:o}=r||{},a=Gvt(i);let s;switch(a){case"imagebitmap":s=await Ovt(e,t,o);break;case"image":s=await z$(e,t,o);break;case"data":s=await Vvt(e);break;default:r1(!1)}return i==="data"&&(s=kvt(s)),s}function Gvt(e){switch(e){case"auto":case"data":return Pvt();default:return Tvt(e),e}}const jvt=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],Wvt=["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],Hvt={image:{type:"auto",decode:!0}},U$={id:"image",module:"images",name:"Images",version:bvt,mimeTypes:Wvt,extensions:jvt,parse:Uvt,tests:[e=>Boolean(V$(new DataView(e)))],options:Hvt},Wt=new G0({id:"deck"});let U3={};function Xvt(e){U3=e}function $r(e,t,r,n){Wt.level>0&&U3[e]&&U3[e].call(null,t,r,n)}function Yvt(e){const t=e[0],r=e[e.length-1];return t==="{"&&r==="}"||t==="["&&r==="]"}const qvt={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:Yvt,parseTextSync:JSON.parse},Ld="8.8.8",Qg=globalThis.deck&&globalThis.deck.VERSION;if(Qg&&Qg!==Ld)throw new Error("deck.gl - multiple versions detected: ".concat(Qg," vs ").concat(Ld));Qg||(Wt.log(1,"deck.gl ".concat(Ld))(),globalThis.deck={...globalThis.deck,VERSION:Ld,version:Ld,log:Wt,_registerLoggers:Xvt},Ypt([qvt,[U$,{imagebitmap:{premultiplyAlpha:"none"}}]]));const Zvt=globalThis.deck,Lt=new G0({id:"luma.gl"});function Qr(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}const Kvt="Invalid WebGLRenderingContext",Jvt="Requires WebGL2";function E_(e){return typeof WebGLRenderingContext<"u"&&e instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:Boolean(e&&Number.isFinite(e._version))}function Qt(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:Boolean(e&&e._version===2)}function Qvt(e){return Qt(e)?e:null}function k_(e){return Qr(E_(e),Kvt),e}function Vr(e){return Qr(Qt(e),Jvt),e}const rd={};function tgt(e){globalThis.console&&globalThis.console.error&&globalThis.console.error(e)}function egt(e){globalThis.console&&globalThis.console.log&&globalThis.console.log(e)}function rgt(e,t){rd[e]=!0,t!==void 0&&tgt(t)}function ngt(e){const t=e.getError;e.getError=function(){let n;do n=t.apply(e),n!==0&&(rd[n]=!0);while(n!==0);for(n in rd)if(rd[n])return delete rd[n],parseInt(n,10);return 0}}const W0=function e(t){const r=t.gl;this.ext=t,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(t.maxVertexAttribs);for(let n=0;n<this.attribs.length;n++){const i=new e.VertexAttrib(r);this.attribs[n]=i}this.maxAttrib=0};W0.VertexAttrib=function(t){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};W0.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const yu=function(t){const r=this;this.gl=t,ngt(t);const n=this.original={getParameter:t.getParameter,enableVertexAttribArray:t.enableVertexAttribArray,disableVertexAttribArray:t.disableVertexAttribArray,bindBuffer:t.bindBuffer,getVertexAttrib:t.getVertexAttrib,vertexAttribPointer:t.vertexAttribPointer};t.getParameter=function(o){return o===r.VERTEX_ARRAY_BINDING_OES?r.currentVertexArrayObject===r.defaultVertexArrayObject?null:r.currentVertexArrayObject:n.getParameter.apply(this,arguments)},t.enableVertexAttribArray=function(o){const a=r.currentVertexArrayObject;a.maxAttrib=Math.max(a.maxAttrib,o);const s=a.attribs[o];return s.enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},t.disableVertexAttribArray=function(o){const a=r.currentVertexArrayObject;a.maxAttrib=Math.max(a.maxAttrib,o);const s=a.attribs[o];return s.enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},t.bindBuffer=function(o,a){switch(o){case 34962:r.currentArrayBuffer=a;break;case 34963:r.currentVertexArrayObject.elementArrayBuffer=a;break}return n.bindBuffer.apply(this,arguments)},t.getVertexAttrib=function(o,a){const l=r.currentVertexArrayObject.attribs[o];switch(a){case 34975:return l.buffer;case 34338:return l.enabled;case 34339:return l.size;case 34340:return l.stride;case 34341:return l.type;case 34922:return l.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},t.vertexAttribPointer=function(o,a,s,l,u,c){const f=r.currentVertexArrayObject;f.maxAttrib=Math.max(f.maxAttrib,o);const h=f.attribs[o];return h.buffer=r.currentArrayBuffer,h.size=a,h.type=s,h.normalized=l,h.stride=u,h.offset=c,h.recache(),n.vertexAttribPointer.apply(this,arguments)},t.instrumentExtension&&t.instrumentExtension(this,"OES_vertex_array_object"),t.canvas&&t.canvas.addEventListener("webglcontextrestored",()=>{egt("OESVertexArrayObject emulation library context restored"),r.reset_()},!0),this.reset_()};yu.prototype.VERTEX_ARRAY_BINDING_OES=34229;yu.prototype.reset_=function(){if(this.vertexArrayObjects!==void 0)for(let n=0;n<this.vertexArrayObjects.length;++n)this.vertexArrayObjects.isAlive=!1;const r=this.gl;this.maxVertexAttribs=r.getParameter(34921),this.defaultVertexArrayObject=new W0(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};yu.prototype.createVertexArrayOES=function(){const t=new W0(this);return this.vertexArrayObjects.push(t),t};yu.prototype.deleteVertexArrayOES=function(t){t.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(t),1),this.currentVertexArrayObject===t&&this.bindVertexArrayOES(null)};yu.prototype.isVertexArrayOES=function(t){return!!(t&&t instanceof W0&&t.hasBeenBound&&t.ext===this)};yu.prototype.bindVertexArrayOES=function(t){const r=this.gl;if(t&&!t.isAlive){rgt(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}const n=this.original,i=this.currentVertexArrayObject;this.currentVertexArrayObject=t||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const o=this.currentVertexArrayObject;if(i===o)return;(!i||o.elementArrayBuffer!==i.elementArrayBuffer)&&n.bindBuffer.call(r,34963,o.elementArrayBuffer);let a=this.currentArrayBuffer;const s=Math.max(i?i.maxAttrib:0,o.maxAttrib);for(let l=0;l<=s;l++){const u=o.attribs[l],c=i?i.attribs[l]:null;if((!i||u.enabled!==c.enabled)&&(u.enabled?n.enableVertexAttribArray.call(r,l):n.disableVertexAttribArray.call(r,l)),u.enabled){let f=!1;(!i||u.buffer!==c.buffer)&&(a!==u.buffer&&(n.bindBuffer.call(r,34962,u.buffer),a=u.buffer),f=!0),(f||u.cached!==c.cached)&&n.vertexAttribPointer.call(r,l,u.size,u.type,u.normalized,u.stride,u.offset)}}this.currentArrayBuffer!==a&&n.bindBuffer.call(r,34962,this.currentArrayBuffer)};function igt(e){if(typeof e.createVertexArray=="function")return;const t=e.getSupportedExtensions;e.getSupportedExtensions=function(){const i=t.call(this)||[];return i.indexOf("OES_vertex_array_object")<0&&i.push("OES_vertex_array_object"),i};const r=e.getExtension;e.getExtension=function(i){const o=r.call(this,i);return o||(i!=="OES_vertex_array_object"?null:(e.__OESVertexArrayObject||(this.__OESVertexArrayObject=new yu(this)),this.__OESVertexArrayObject))}}const Nx="OES_element_index",Fx="WEBGL_draw_buffers",ogt="EXT_disjoint_timer_query",agt="EXT_disjoint_timer_query_webgl2",sgt="EXT_texture_filter_anisotropic",Bx="WEBGL_debug_renderer_info",lgt=35723,ugt=4352,cgt=36795,fgt=34047,hgt=37445,dgt=37446,Re=e=>Qt(e)?void 0:0,pgt={[3074]:e=>Qt(e)?void 0:36064,[lgt]:e=>Qt(e)?void 0:ugt,[35977]:Re,[32937]:Re,[cgt]:(e,t)=>{const r=Qt(e)?e.getExtension(agt):e.getExtension(ogt);return r&&r.GPU_DISJOINT_EXT?t(r.GPU_DISJOINT_EXT):0},[hgt]:(e,t)=>{const r=e.getExtension(Bx);return t(r&&r.UNMASKED_VENDOR_WEBGL||7936)},[dgt]:(e,t)=>{const r=e.getExtension(Bx);return t(r&&r.UNMASKED_RENDERER_WEBGL||7937)},[fgt]:(e,t)=>{const r=e.luma.extensions[sgt];return r?t(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},[32883]:Re,[35071]:Re,[37447]:Re,[36063]:(e,t)=>{if(!Qt(e)){const r=e.getExtension(Fx);return r?t(r.MAX_COLOR_ATTACHMENTS_WEBGL):0}},[35379]:Re,[35374]:Re,[35377]:Re,[34852]:e=>{if(!Qt(e)){const t=e.getExtension(Fx);return t?t.MAX_DRAW_BUFFERS_WEBGL:0}},[36203]:e=>e.getExtension(Nx)?2147483647:65535,[33001]:e=>e.getExtension(Nx)?16777216:65535,[33e3]:e=>16777216,[37157]:Re,[35373]:Re,[35657]:Re,[36183]:Re,[37137]:Re,[34045]:Re,[35978]:Re,[35979]:Re,[35968]:Re,[35376]:Re,[35375]:Re,[35659]:Re,[37154]:Re,[35371]:Re,[35658]:Re,[35076]:Re,[35077]:Re,[35380]:Re};function vgt(e,t,r){const n=pgt[r],i=typeof n=="function"?n(e,t,r):n;return i!==void 0?i:t(r)}const ggt="OES_vertex_array_object",G$="ANGLE_instanced_arrays",mgt="WEBGL_draw_buffers",_gt="EXT_disjoint_timer_query",ygt="EXT_texture_filter_anisotropic",bgt="VertexArray requires WebGL2 or OES_vertex_array_object extension";function wgt(e,t){return{webgl2:Qt(e),ext:e.getExtension(t)}}const j$={[ggt]:{meta:{suffix:"OES"},createVertexArray:()=>{Qr(!1,bgt)},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[G$]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(e,t){Qr(t===0,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[mgt]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{Qr(!1)}},[_gt]:{meta:{suffix:"EXT"},createQuery:()=>{Qr(!1)},deleteQuery:()=>{Qr(!1)},beginQuery:()=>{Qr(!1)},endQuery:()=>{},getQuery(e,t){return this.getQueryObject(e,t)},getQueryParameter(e,t){return this.getQueryObject(e,t)},getQueryObject:()=>{}}},cb={readBuffer:(e,t,r)=>{Qt(e)&&t(r)},getVertexAttrib:(e,t,r,n)=>{const{webgl2:i,ext:o}=wgt(e,G$);let a;switch(n){case 35069:a=i?void 0:!1;break;case 35070:a=!i&&!o?0:void 0;break}return a!==void 0?a:t(r,n)},getProgramParameter:(e,t,r,n)=>{if(!Qt(e))switch(n){case 35967:return 35981;case 35971:return 0;case 35382:return 0}return t(r,n)},getInternalformatParameter:(e,t,r,n,i)=>{if(!Qt(e))switch(i){case 32937:return new Int32Array([0])}return e.getInternalformatParameter(r,n,i)},getTexParameter(e,t,r,n){switch(n){case 34046:const{extensions:i}=e.luma,o=i[ygt];n=o&&o.TEXTURE_MAX_ANISOTROPY_EXT||34046;break}return t(r,n)},getParameter:vgt,hint(e,t,r,n){return t(r,n)}};function Sgt(e){e.luma=e.luma||{};const{luma:t}=e;return t.polyfilled||(igt(e),Tgt(e),Egt(e,j$),Pgt(e,{target:t,target2:e}),t.polyfilled=!0),e}globalThis.polyfillContext=Sgt;function Tgt(e){e.luma.extensions={};const t=e.getSupportedExtensions()||[];for(const r of t)e.luma[r]=e.getExtension(r)}function Pgt(e,t){let{target:r,target2:n}=t;Object.keys(cb).forEach(i=>{if(typeof cb[i]=="function"){const o=e[i]?e[i].bind(e):()=>{},a=cb[i].bind(null,e,o);r[i]=a,n[i]=a}})}function Egt(e,t){for(const r of Object.getOwnPropertyNames(t))r!=="overrides"&&kgt(e,{extension:r,target:e.luma,target2:e})}function kgt(e,t){let{extension:r,target:n,target2:i}=t;const o=j$[r];Qr(o);const{meta:a={}}=o,{suffix:s=""}=a,l=e.getExtension(r);for(const u of Object.keys(o)){const c="".concat(u).concat(s);let f=null;u==="meta"||typeof e[u]=="function"||(l&&typeof l[c]=="function"?f=function(){return l[c](...arguments)}:typeof o[u]=="function"&&(f=o[u].bind(n))),f&&(n[u]=f,i[u]=f)}}const KE={[3042]:!1,[32773]:new Float32Array([0,0,0,0]),[32777]:32774,[34877]:32774,[32969]:1,[32968]:0,[32971]:1,[32970]:0,[3106]:new Float32Array([0,0,0,0]),[3107]:[!0,!0,!0,!0],[2884]:!1,[2885]:1029,[2929]:!1,[2931]:1,[2932]:513,[2928]:new Float32Array([0,1]),[2930]:!0,[3024]:!0,[36006]:null,[2886]:2305,[33170]:4352,[2849]:1,[32823]:!1,[32824]:0,[10752]:0,[32938]:1,[32939]:!1,[3089]:!1,[3088]:new Int32Array([0,0,1024,1024]),[2960]:!1,[2961]:0,[2968]:4294967295,[36005]:4294967295,[2962]:519,[2967]:0,[2963]:4294967295,[34816]:519,[36003]:0,[36004]:4294967295,[2964]:7680,[2965]:7680,[2966]:7680,[34817]:7680,[34818]:7680,[34819]:7680,[2978]:[0,0,1024,1024],[3333]:4,[3317]:4,[37440]:!1,[37441]:!1,[37443]:37444,[35723]:4352,[36010]:null,[35977]:!1,[3330]:0,[3332]:0,[3331]:0,[3314]:0,[32878]:0,[3316]:0,[3315]:0,[32877]:0},ja=(e,t,r)=>t?e.enable(r):e.disable(r),$x=(e,t,r)=>e.hint(r,t),wn=(e,t,r)=>e.pixelStorei(r,t),Agt=(e,t)=>{const r=Qt(e)?36009:36160;return e.bindFramebuffer(r,t)},Cgt=(e,t)=>e.bindFramebuffer(36008,t);function wh(e){return Array.isArray(e)||ArrayBuffer.isView(e)}const Mgt={[3042]:ja,[32773]:(e,t)=>e.blendColor(...t),[32777]:"blendEquation",[34877]:"blendEquation",[32969]:"blendFunc",[32968]:"blendFunc",[32971]:"blendFunc",[32970]:"blendFunc",[3106]:(e,t)=>e.clearColor(...t),[3107]:(e,t)=>e.colorMask(...t),[2884]:ja,[2885]:(e,t)=>e.cullFace(t),[2929]:ja,[2931]:(e,t)=>e.clearDepth(t),[2932]:(e,t)=>e.depthFunc(t),[2928]:(e,t)=>e.depthRange(...t),[2930]:(e,t)=>e.depthMask(t),[3024]:ja,[35723]:$x,[36006]:Agt,[2886]:(e,t)=>e.frontFace(t),[33170]:$x,[2849]:(e,t)=>e.lineWidth(t),[32823]:ja,[32824]:"polygonOffset",[10752]:"polygonOffset",[35977]:ja,[32938]:"sampleCoverage",[32939]:"sampleCoverage",[3089]:ja,[3088]:(e,t)=>e.scissor(...t),[2960]:ja,[2961]:(e,t)=>e.clearStencil(t),[2968]:(e,t)=>e.stencilMaskSeparate(1028,t),[36005]:(e,t)=>e.stencilMaskSeparate(1029,t),[2962]:"stencilFuncFront",[2967]:"stencilFuncFront",[2963]:"stencilFuncFront",[34816]:"stencilFuncBack",[36003]:"stencilFuncBack",[36004]:"stencilFuncBack",[2964]:"stencilOpFront",[2965]:"stencilOpFront",[2966]:"stencilOpFront",[34817]:"stencilOpBack",[34818]:"stencilOpBack",[34819]:"stencilOpBack",[2978]:(e,t)=>e.viewport(...t),[3333]:wn,[3317]:wn,[37440]:wn,[37441]:wn,[37443]:wn,[3330]:wn,[3332]:wn,[3331]:wn,[36010]:Cgt,[3314]:wn,[32878]:wn,[3316]:wn,[3315]:wn,[32877]:wn,framebuffer:(e,t)=>{const r=t&&"handle"in t?t.handle:t;return e.bindFramebuffer(36160,r)},blend:(e,t)=>t?e.enable(3042):e.disable(3042),blendColor:(e,t)=>e.blendColor(...t),blendEquation:(e,t)=>{t=wh(t)?t:[t,t],e.blendEquationSeparate(...t)},blendFunc:(e,t)=>{t=wh(t)&&t.length===2?[...t,...t]:t,e.blendFuncSeparate(...t)},clearColor:(e,t)=>e.clearColor(...t),clearDepth:(e,t)=>e.clearDepth(t),clearStencil:(e,t)=>e.clearStencil(t),colorMask:(e,t)=>e.colorMask(...t),cull:(e,t)=>t?e.enable(2884):e.disable(2884),cullFace:(e,t)=>e.cullFace(t),depthTest:(e,t)=>t?e.enable(2929):e.disable(2929),depthFunc:(e,t)=>e.depthFunc(t),depthMask:(e,t)=>e.depthMask(t),depthRange:(e,t)=>e.depthRange(...t),dither:(e,t)=>t?e.enable(3024):e.disable(3024),derivativeHint:(e,t)=>{e.hint(35723,t)},frontFace:(e,t)=>e.frontFace(t),mipmapHint:(e,t)=>e.hint(33170,t),lineWidth:(e,t)=>e.lineWidth(t),polygonOffsetFill:(e,t)=>t?e.enable(32823):e.disable(32823),polygonOffset:(e,t)=>e.polygonOffset(...t),sampleCoverage:(e,t)=>e.sampleCoverage(...t),scissorTest:(e,t)=>t?e.enable(3089):e.disable(3089),scissor:(e,t)=>e.scissor(...t),stencilTest:(e,t)=>t?e.enable(2960):e.disable(2960),stencilMask:(e,t)=>{t=wh(t)?t:[t,t];const[r,n]=t;e.stencilMaskSeparate(1028,r),e.stencilMaskSeparate(1029,n)},stencilFunc:(e,t)=>{t=wh(t)&&t.length===3?[...t,...t]:t;const[r,n,i,o,a,s]=t;e.stencilFuncSeparate(1028,r,n,i),e.stencilFuncSeparate(1029,o,a,s)},stencilOp:(e,t)=>{t=wh(t)&&t.length===3?[...t,...t]:t;const[r,n,i,o,a,s]=t;e.stencilOpSeparate(1028,r,n,i),e.stencilOpSeparate(1029,o,a,s)},viewport:(e,t)=>e.viewport(...t)};function je(e,t,r){return t[e]!==void 0?t[e]:r[e]}const xgt={blendEquation:(e,t,r)=>e.blendEquationSeparate(je(32777,t,r),je(34877,t,r)),blendFunc:(e,t,r)=>e.blendFuncSeparate(je(32969,t,r),je(32968,t,r),je(32971,t,r),je(32970,t,r)),polygonOffset:(e,t,r)=>e.polygonOffset(je(32824,t,r),je(10752,t,r)),sampleCoverage:(e,t,r)=>e.sampleCoverage(je(32938,t,r),je(32939,t,r)),stencilFuncFront:(e,t,r)=>e.stencilFuncSeparate(1028,je(2962,t,r),je(2967,t,r),je(2963,t,r)),stencilFuncBack:(e,t,r)=>e.stencilFuncSeparate(1029,je(34816,t,r),je(36003,t,r),je(36004,t,r)),stencilOpFront:(e,t,r)=>e.stencilOpSeparate(1028,je(2964,t,r),je(2965,t,r),je(2966,t,r)),stencilOpBack:(e,t,r)=>e.stencilOpSeparate(1029,je(34817,t,r),je(34818,t,r),je(34819,t,r))},zx={enable:(e,t)=>e({[t]:!0}),disable:(e,t)=>e({[t]:!1}),pixelStorei:(e,t,r)=>e({[t]:r}),hint:(e,t,r)=>e({[t]:r}),bindFramebuffer:(e,t,r)=>{switch(t){case 36160:return e({[36006]:r,[36010]:r});case 36009:return e({[36006]:r});case 36008:return e({[36010]:r});default:return null}},blendColor:(e,t,r,n,i)=>e({[32773]:new Float32Array([t,r,n,i])}),blendEquation:(e,t)=>e({[32777]:t,[34877]:t}),blendEquationSeparate:(e,t,r)=>e({[32777]:t,[34877]:r}),blendFunc:(e,t,r)=>e({[32969]:t,[32968]:r,[32971]:t,[32970]:r}),blendFuncSeparate:(e,t,r,n,i)=>e({[32969]:t,[32968]:r,[32971]:n,[32970]:i}),clearColor:(e,t,r,n,i)=>e({[3106]:new Float32Array([t,r,n,i])}),clearDepth:(e,t)=>e({[2931]:t}),clearStencil:(e,t)=>e({[2961]:t}),colorMask:(e,t,r,n,i)=>e({[3107]:[t,r,n,i]}),cullFace:(e,t)=>e({[2885]:t}),depthFunc:(e,t)=>e({[2932]:t}),depthRange:(e,t,r)=>e({[2928]:new Float32Array([t,r])}),depthMask:(e,t)=>e({[2930]:t}),frontFace:(e,t)=>e({[2886]:t}),lineWidth:(e,t)=>e({[2849]:t}),polygonOffset:(e,t,r)=>e({[32824]:t,[10752]:r}),sampleCoverage:(e,t,r)=>e({[32938]:t,[32939]:r}),scissor:(e,t,r,n,i)=>e({[3088]:new Int32Array([t,r,n,i])}),stencilMask:(e,t)=>e({[2968]:t,[36005]:t}),stencilMaskSeparate:(e,t,r)=>e({[t===1028?2968:36005]:r}),stencilFunc:(e,t,r,n)=>e({[2962]:t,[2967]:r,[2963]:n,[34816]:t,[36003]:r,[36004]:n}),stencilFuncSeparate:(e,t,r,n,i)=>e({[t===1028?2962:34816]:r,[t===1028?2967:36003]:n,[t===1028?2963:36004]:i}),stencilOp:(e,t,r,n)=>e({[2964]:t,[2965]:r,[2966]:n,[34817]:t,[34818]:r,[34819]:n}),stencilOpSeparate:(e,t,r,n,i)=>e({[t===1028?2964:34817]:r,[t===1028?2965:34818]:n,[t===1028?2966:34819]:i}),viewport:(e,t,r,n,i)=>e({[2978]:[t,r,n,i]})},no=(e,t)=>e.isEnabled(t),Vx={[3042]:no,[2884]:no,[2929]:no,[3024]:no,[32823]:no,[32926]:no,[32928]:no,[3089]:no,[2960]:no,[35977]:no};function W$(e){for(const t in e)return!1;return!0}function Lgt(e,t){if(e===t)return!0;const r=Array.isArray(e)||ArrayBuffer.isView(e),n=Array.isArray(t)||ArrayBuffer.isView(t);if(r&&n&&e.length===t.length){for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}return!1}function Ux(e,t){const r=e[t].bind(e);e[t]=function(){const i=arguments.length<=0?void 0:arguments[0];return i in e.state.cache?e.state.enable?e.state.cache[i]:r(...arguments):r(...arguments)},Object.defineProperty(e[t],"name",{value:"".concat(t,"-from-cache"),configurable:!1})}function Igt(e,t,r){const n=e[t].bind(e);e[t]=function(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];const{valueChanged:l,oldValue:u}=r(e.state._updateCache,...a);return l&&n(...a),u},Object.defineProperty(e[t],"name",{value:"".concat(t,"-to-cache"),configurable:!1})}function Ogt(e){const t=e.useProgram.bind(e);e.useProgram=function(n){e.state.program!==n&&(t(n),e.state.program=n)}}class Rgt{constructor(t){let{copyState:r=!1,log:n=()=>{}}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.program=null,this.stateStack=[],this.enable=!0,this.cache=r?Ngt(t):Object.assign({},KE),this.log=n,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){Qr(this.stateStack.length>0);const t=this.stateStack[this.stateStack.length-1];ba(this.gl,t),this.stateStack.pop()}_updateCache(t){let r=!1,n;const i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const o in t){Qr(o!==void 0);const a=t[o],s=this.cache[o];Lgt(a,s)||(r=!0,n=s,i&&!(o in i)&&(i[o]=s),this.cache[o]=a)}return{valueChanged:r,oldValue:n}}}function H$(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{enable:r=!0,copyState:n}=t;if(Qr(n!==void 0),!e.state){const{polyfillContext:i}=globalThis;i&&i(e),e.state=new Rgt(e,{copyState:n}),Ogt(e);for(const o in zx){const a=zx[o];Igt(e,o,a)}Ux(e,"getParameter"),Ux(e,"isEnabled")}return e.state.enable=r,e}function Dgt(e){e.state||H$(e,{copyState:!1}),e.state.push()}function Gx(e){Qr(e.state),e.state.pop()}function ba(e,t){if(Qr(E_(e),"setParameters requires a WebGL context"),W$(t))return;const r={};for(const i in t){const o=Number(i),a=Mgt[i];a&&(typeof a=="string"?r[a]=!0:a(e,t[i],o))}const n=e.state&&e.state.cache;if(n)for(const i in r){const o=xgt[i];o(e,t,n)}}function Ngt(e,t){if(t=t||KE,typeof t=="number"){const i=t,o=Vx[i];return o?o(e,i):e.getParameter(i)}const r=Array.isArray(t)?t:Object.keys(t),n={};for(const i of r){const o=Vx[i];n[i]=o?o(e,Number(i)):e.getParameter(Number(i))}return n}function Fgt(e){ba(e,KE)}function ni(e,t,r){if(W$(t))return r(e);const{nocatch:n=!0}=t;Dgt(e),ba(e,t);let i;if(n)i=r(e),Gx(e);else try{i=r(e)}finally{Gx(e)}return i}function tf(e){const{luma:t}=e;if(e.canvas&&t){const{clientWidth:r}=t.canvasSizeInfo;return r?e.drawingBufferWidth/r:1}return 1}function fb(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const n=tf(e),i=e.drawingBufferWidth,o=e.drawingBufferHeight;return $gt(t,n,i,o,r)}function Bgt(e){const t=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(e)?e<=0?1:e:e?t:1}function $gt(e,t,r,n,i){const o=jx(e[0],t,r);let a=Wx(e[1],t,n,i),s=jx(e[0]+1,t,r);const l=s===r-1?s:s-1;s=Wx(e[1]+1,t,n,i);let u;return i?(s=s===0?s:s+1,u=a,a=s):u=s===n-1?s:s-1,{x:o,y:a,width:Math.max(l-o+1,1),height:Math.max(u-a+1,1)}}function jx(e,t,r){return Math.min(Math.round(e*t),r-1)}function Wx(e,t,r,n){return n?Math.max(0,r-1-Math.round(e*t)):Math.min(Math.round(e*t),r-1)}const JE=xa(),zgt=JE&&typeof document<"u",X$={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function Y$(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Qr(JE,`createGLContext only available in the browser.
Create your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils`),e=Object.assign({},X$,e);const{width:t,height:r}=e;function n(s){if(e.throwOnError)throw new Error(s);return console.error(s),null}e.onError=n;let i;const{canvas:o}=e,a=jgt({canvas:o,width:t,height:r,onError:n});return i=Ggt(a,e),i?(i=QE(i,e),Wgt(i),i):null}function QE(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e||e._instrumented)return e;e._version=e._version||Hgt(e),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{},t=Object.assign({},X$,t);const{manageState:r,debug:n}=t;return r&&H$(e,{copyState:!1,log:function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return Lt.log(1,...o)()}}),JE&&n&&(globalThis.makeDebugContext?(e=globalThis.makeDebugContext(e,t),Lt.level=Math.max(Lt.level,1)):Lt.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),e._instrumented=!0,e}function Vgt(e){const t=e.getParameter(7936),r=e.getParameter(7937),n=e.getExtension("WEBGL_debug_renderer_info"),i=n&&e.getParameter(n.UNMASKED_VENDOR_WEBGL||7936),o=n&&e.getParameter(n.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||t,renderer:o||r,vendorMasked:t,rendererMasked:r,version:e.getParameter(7938),shadingLanguageVersion:e.getParameter(35724)}}function Ugt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e.canvas){const n=Bgt(t.useDevicePixels);Xgt(e,n,t);return}const r=e.getExtension("STACKGL_resize_drawingbuffer");r&&"width"in t&&"height"in t&&r.resize(t.width,t.height)}function Ggt(e,t){const{onError:r}=t;let n=null;const i=l=>n=l.statusMessage||n;e.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:o=!0,webgl2:a=!0}=t;let s=null;return a&&(s=s||e.getContext("webgl2",t),s=s||e.getContext("experimental-webgl2",t)),o&&(s=s||e.getContext("webgl",t),s=s||e.getContext("experimental-webgl",t)),e.removeEventListener("webglcontextcreationerror",i,!1),s?(t.onContextLost&&e.addEventListener("webglcontextlost",t.onContextLost,!1),t.onContextRestored&&e.addEventListener("webglcontextrestored",t.onContextRestored,!1),s):r("Failed to create ".concat(a&&!o?"WebGL2":"WebGL"," context: ").concat(n||"Unknown error"))}function jgt(e){let{canvas:t,width:r=800,height:n=600,onError:i}=e,o;return typeof t=="string"?(zgt&&document.readyState==="complete"||i("createGLContext called on canvas '".concat(t,"' before page was loaded")),o=document.getElementById(t)):t?o=t:(o=document.createElement("canvas"),o.id="lumagl-canvas",o.style.width=Number.isFinite(r)?"".concat(r,"px"):"100%",o.style.height=Number.isFinite(n)?"".concat(n,"px"):"100%",document.body.insertBefore(o,document.body.firstChild)),o}function Wgt(e){const t=Qt(e)?"WebGL2":"WebGL1",r=Vgt(e),n=r?"(".concat(r.vendor,",").concat(r.renderer,")"):"",i=e.debug?" debug":"";Lt.info(1,"".concat(t).concat(i," context ").concat(n))()}function Hgt(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?2:1}function Xgt(e,t,r){let n="width"in r?r.width:e.canvas.clientWidth,i="height"in r?r.height:e.canvas.clientHeight;(!n||!i)&&(Lt.log(1,"Canvas clientWidth/clientHeight is 0")(),t=1,n=e.canvas.width||1,i=e.canvas.height||1),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{};const o=e.luma.canvasSizeInfo;if(o.clientWidth!==n||o.clientHeight!==i||o.devicePixelRatio!==t){let a=t;const s=Math.floor(n*a),l=Math.floor(i*a);e.canvas.width=s,e.canvas.height=l,(e.drawingBufferWidth!==s||e.drawingBufferHeight!==l)&&(Lt.warn("Device pixel ratio clamped")(),a=Math.min(e.drawingBufferWidth/n,e.drawingBufferHeight/i),e.canvas.width=Math.floor(n*a),e.canvas.height=Math.floor(i*a)),Object.assign(e.luma.canvasSizeInfo,{clientWidth:n,clientHeight:i,devicePixelRatio:t})}}const Id="8.5.16",Ygt="set luma.log.level=1 (or higher) to trace rendering";class q${constructor(){this.stats=new Map}get(t){return this.stats.has(t)||this.stats.set(t,new T_({id:t})),this.stats.get(t)}}const Rl=new q$;if(globalThis.luma&&globalThis.luma.VERSION!==Id)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(Id));globalThis.luma||(xa()&&Lt.log(1,"luma.gl ".concat(Id," - ").concat(Ygt))(),globalThis.luma=globalThis.luma||{VERSION:Id,version:Id,log:Lt,stats:Rl,globals:{modules:{},nodeIO:{}}});function qgt(e){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60)}function Zgt(e){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e)}function mt(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}function hb(e,t){if(typeof t!="string")return t;const r=Number(t);if(!isNaN(r))return r;t=t.replace(/^.*\./,"");const n=e[t];return mt(n!==void 0,"Accessing undefined constant GL.".concat(t)),n}function Ps(e,t){t=Number(t);for(const r in e)if(e[r]===t)return"GL.".concat(r);return String(t)}const db={};function Rs(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"id";db[e]=db[e]||1;const t=db[e]++;return"".concat(e,"-").concat(t)}function Hx(e){return mt(typeof e=="number","Input must be a number"),e&&(e&e-1)===0}function ef(e){let t=!0;for(const r in e){t=!1;break}return t}function Z$(e,t,r,n){const i="See luma.gl ".concat(r," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(e);n.forEach(a=>{o.methodName||(o[a]=()=>{throw Lt.removed("Calling removed method ".concat(t,".").concat(a,": "),i)(),new Error(a)})})}const Ju="Resource subclass must define virtual methods";class La{get[Symbol.toStringTag](){return"Resource"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};k_(t);const{id:n,userData:i={}}=r;this.gl=t,this.gl2=t,this.id=n||Rs(this[Symbol.toStringTag]),this.userData=i,this._bound=!1,this._handle=r.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._initStats(),this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,r&&t&&r.filter(Boolean).forEach(n=>n.delete()),this}bind(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.handle;if(typeof t!="function")return this._bindHandle(t),this;let r;return this._bound?r=t():(this._bindHandle(this.handle),this._bound=!0,r=t(),this._bound=!1,this._bindHandle(null)),r}unbind(){this.bind(null)}getParameter(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t=hb(this.gl,t),mt(t);const i=(this.constructor.PARAMETERS||{})[t];if(i){const o=Qt(this.gl);if(!((!("webgl2"in i)||o)&&(!("extension"in i)||this.gl.getExtension(i.extension)))){const s=i.webgl1,l="webgl2"in i?i.webgl2:i.webgl1;return o?l:s}}return this._getParameter(t,r)}getParameters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{parameters:r,keys:n}=t,i=this.constructor.PARAMETERS||{},o=Qt(this.gl),a={},s=r||Object.keys(i);for(const l of s){const u=i[l];if(u&&(!("webgl2"in u)||o)&&(!("extension"in u)||this.gl.getExtension(u.extension))){const f=n?Ps(this.gl,l):l;a[f]=this.getParameter(l,t),n&&u.type==="GLenum"&&(a[f]=Ps(this.gl,a[f]))}}return a}setParameter(t,r){t=hb(this.gl,t),mt(t);const i=(this.constructor.PARAMETERS||{})[t];if(i){const o=Qt(this.gl);if(!((!("webgl2"in i)||o)&&(!("extension"in i)||this.gl.getExtension(i.extension))))throw new Error("Parameter not available on this platform");i.type==="GLenum"&&(r=hb(r))}return this._setParameter(t,r),this}setParameters(t){for(const r in t)this.setParameter(r,t[r]);return this}stubRemovedMethods(t,r,n){return Z$(this,t,r,n)}initialize(t){}_createHandle(){throw new Error(Ju)}_deleteHandle(){throw new Error(Ju)}_bindHandle(t){throw new Error(Ju)}_getOptsFromHandle(){throw new Error(Ju)}_getParameter(t,r){throw new Error(Ju)}_setParameter(t,r){throw new Error(Ju)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_initStats(){this.gl.stats=this.gl.stats||new q$}_addStats(){const t=this[Symbol.toStringTag],r=Rl.get("Resource Counts");r.get("Resources Created").incrementCount(),r.get("".concat(t,"s Created")).incrementCount(),r.get("".concat(t,"s Active")).incrementCount()}_removeStats(){const t=this[Symbol.toStringTag];Rl.get("Resource Counts").get("".concat(t,"s Active")).decrementCount()}_trackAllocatedMemory(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag];this._doTrackAllocatedMemory(t,r),this._doTrackAllocatedMemory(t,r,this.gl.stats.get("Memory Usage"))}_doTrackAllocatedMemory(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Rl.get("Memory Usage");n.get("GPU Memory").addCount(t),n.get("".concat(r," Memory")).addCount(t),this.byteLength=t}_trackDeallocatedMemory(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag];this._doTrackDeallocatedMemory(t),this._doTrackDeallocatedMemory(t,this.gl.stats.get("Memory Usage"))}_doTrackDeallocatedMemory(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Rl.get("Memory Usage");r.get("GPU Memory").subtractCount(this.byteLength),r.get("".concat(t," Memory")).subtractCount(this.byteLength),this.byteLength=0}}const Kgt="Failed to deduce GL constant from typed array";function G3(e){switch(ArrayBuffer.isView(e)?e.constructor:e){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(Kgt)}}function f0(e){let{clamped:t=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(e){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return t?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function Jgt(e){let{data:t,width:r,height:n,bytesPerPixel:i=4,temp:o}=e;const a=r*i;o=o||new Uint8Array(a);for(let s=0;s<n/2;++s){const l=s*a,u=(n-s-1)*a;o.set(t.subarray(l,l+a)),t.copyWithin(l,u,u+a),t.set(o,u)}}function Qgt(e){let{data:t,width:r,height:n}=e;const i=Math.round(r/2),o=Math.round(n/2),a=new Uint8Array(i*o*4);for(let s=0;s<o;s++)for(let l=0;l<i;l++)for(let u=0;u<4;u++)a[(s*i+l)*4+u]=t[(s*2*r+l*2)*4+u];return{data:a,width:i,height:o}}function j3(e,t,r){const{removedProps:n={},deprecatedProps:i={},replacedProps:o={}}=r;for(const s in n)if(s in t){const u=n[s]?"".concat(e,".").concat(n[s]):"N/A";Lt.removed("".concat(e,".").concat(s),u)()}for(const s in i)if(s in t){const l=i[s];Lt.deprecated("".concat(e,".").concat(s),"".concat(e,".").concat(l))()}let a=null;for(const s in o)if(s in t){const l=o[s];Lt.deprecated("".concat(e,".").concat(s),"".concat(e,".").concat(l))(),a=a||Object.assign({},t),a[l]=t[s],delete a[s]}return a||t}const tmt={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},emt={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class En{static getBytesPerElement(t){return f0(t.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(t){return mt(t.size),f0(t.type||5126).BYTES_PER_ELEMENT*t.size}static resolve(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return new En(tmt,...r)}constructor(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];r.forEach(i=>this._assign(i)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return En.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return En.getBytesPerVertex(this)}_assign(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t=j3("Accessor",t,emt),t.type!==void 0&&(this.type=t.type,(t.type===5124||t.type===5125)&&(this.integer=!0)),t.size!==void 0&&(this.size=t.size),t.offset!==void 0&&(this.offset=t.offset),t.stride!==void 0&&(this.stride=t.stride),t.normalized!==void 0&&(this.normalized=t.normalized),t.integer!==void 0&&(this.integer=t.integer),t.divisor!==void 0&&(this.divisor=t.divisor),t.buffer!==void 0&&(this.buffer=t.buffer),t.index!==void 0&&(typeof t.index=="boolean"?this.index=t.index?1:0:this.index=t.index),t.instanced!==void 0&&(this.divisor=t.instanced?1:0),t.isInstanced!==void 0&&(this.divisor=t.isInstanced?1:0),this}}const Xx=10,K$={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},rmt={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:K$},nmt={removedProps:K$};class Pe extends La{get[Symbol.toStringTag](){return"Buffer"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=r.target||(this.gl.webgl2?36662:34962),this.initialize(r),Object.seal(this)}getElementCount(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/En.getBytesPerElement(t))}getVertexCount(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/En.getBytesPerVertex(t))}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ArrayBuffer.isView(t)&&(t={data:t}),Number.isFinite(t)&&(t={byteLength:t}),t=j3("Buffer",t,rmt),this.usage=t.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},t,t.accessor)),t.data?this._setData(t.data,t.offset,t.byteLength):this._setByteLength(t.byteLength||0),this}setProps(t){return t=j3("Buffer",t,nmt),"accessor"in t&&this.setAccessor(t.accessor),this}setAccessor(t){return t=Object.assign({},t),delete t.buffer,this.accessor=new En(t),this}reallocate(t){return t>this.byteLength?(this._setByteLength(t),!0):(this.bytesUsed=t,!1)}setData(t){return this.initialize(t)}subData(t){ArrayBuffer.isView(t)&&(t={data:t});const{data:r,offset:n=0,srcOffset:i=0}=t,o=t.byteLength||t.length;mt(r);const a=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(a,this.handle),i!==0||o!==void 0?(Vr(this.gl),this.gl.bufferSubData(this.target,n,r,i,o)):this.gl.bufferSubData(a,n,r),this.gl.bindBuffer(a,null),this.debugData=null,this._inferType(r),this}copyData(t){let{sourceBuffer:r,readOffset:n=0,writeOffset:i=0,size:o}=t;const{gl:a}=this;return Vr(a),a.bindBuffer(36662,r.handle),a.bindBuffer(36663,this.handle),a.copyBufferSubData(36662,36663,n,i,o),a.bindBuffer(36662,null),a.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:t=null,srcByteOffset:r=0,dstOffset:n=0,length:i=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Vr(this.gl);const o=f0(this.accessor.type||5126,{clamped:!1}),a=this._getAvailableElementCount(r),s=n;let l,u;t?(u=t.length,l=u-s):(l=Math.min(a,i||a),u=s+l);const c=Math.min(a,l);return i=i||c,mt(i<=c),t=t||new o(u),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,r,t,n,i),this.gl.bindBuffer(36662,null),t}bind(){let{target:t=this.target,index:r=this.accessor&&this.accessor.index,offset:n=0,size:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t===35345||t===35982?i!==void 0?this.gl.bindBufferRange(t,r,this.handle,n,i):(mt(n===0),this.gl.bindBufferBase(t,r,this.handle)):this.gl.bindBuffer(t,this.handle),this}unbind(){let{target:t=this.target,index:r=this.accessor&&this.accessor.index}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t===35345||t===35982?this.gl.bindBufferBase(t,r,null):this.gl.bindBuffer(t,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(Xx,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.byteLength+r;mt(ArrayBuffer.isView(t)),this._trackDeallocatedMemory();const i=this._getTarget();this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,n,this.usage),this.gl.bufferSubData(i,r,t),this.gl.bindBuffer(i,null),this.debugData=t.slice(0,Xx),this.bytesUsed=n,this._trackAllocatedMemory(n);const o=G3(t);return mt(o),this.setAccessor(new En(this.accessor,{type:o})),this}_setByteLength(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.usage;mt(t>=0),this._trackDeallocatedMemory();let n=t;t===0&&(n=new Float32Array(0));const i=this._getTarget();return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,n,r),this.gl.bindBuffer(i,null),this.usage=r,this.debugData=null,this.bytesUsed=t,this._trackAllocatedMemory(t),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(t){const r=f0(this.accessor.type||5126,{clamped:!1}),n=t/r.BYTES_PER_ELEMENT;return this.getElementCount()-n}_inferType(t){this.accessor.type||this.setAccessor(new En(this.accessor,{type:G3(t)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(t){this.gl.bindBuffer(this.target,this.handle);const r=this.gl.getBufferParameter(this.target,t);return this.gl.bindBuffer(this.target,null),r}get type(){return Lt.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return Lt.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(t){return Lt.deprecated("setByteLength","reallocate")(),this.reallocate(t)}updateAccessor(t){return Lt.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new En(this.accessor,t),this}}const ek={[6407]:{dataFormat:6407,types:[5121,33635]},[6408]:{dataFormat:6408,types:[5121,32819,32820]},[6406]:{dataFormat:6406,types:[5121]},[6409]:{dataFormat:6409,types:[5121]},[6410]:{dataFormat:6410,types:[5121]},[33326]:{dataFormat:6403,types:[5126],gl2:!0},[33328]:{dataFormat:33319,types:[5126],gl2:!0},[34837]:{dataFormat:6407,types:[5126],gl2:!0},[34836]:{dataFormat:6408,types:[5126],gl2:!0}},J$={[6403]:1,[36244]:1,[33319]:2,[33320]:2,[6407]:3,[36248]:3,[6408]:4,[36249]:4,[6402]:1,[34041]:1,[6406]:1,[6409]:1,[6410]:2},Q$={[5126]:4,[5125]:4,[5124]:4,[5123]:2,[5122]:2,[5131]:2,[5120]:1,[5121]:1};function imt(e,t){const r=ek[t];if(!r)return!1;if(r.gl1===void 0&&r.gl2===void 0)return!0;const n=Qt(e)&&r.gl2||r.gl1;return typeof n=="string"?e.getExtension(n):n}function omt(e,t){const r=ek[t];switch(r&&r.types[0]){case 5126:return e.getExtension("OES_texture_float_linear");case 5131:return e.getExtension("OES_texture_half_float_linear");default:return!0}}const amt=[9729,9728],Yx=globalThis.WebGLBuffer||function(){};class iu extends La{get[Symbol.toStringTag](){return"Texture"}static isSupported(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{format:n,linearFiltering:i}=r;let o=!0;return n&&(o=o&&imt(t,n),o=o&&(!i||omt(t,n))),o}constructor(t,r){const{id:n=Rs("texture"),handle:i,target:o}=r;super(t,{id:n,handle:i}),this.target=o,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.data;if(r instanceof Promise)return r.then(_=>this.initialize(Object.assign({},t,{pixels:_,data:_}))),this;const n=typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement;if(n&&r.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,r.addEventListener("loadeddata",()=>this.initialize(t)),this;const{pixels:i=null,format:o=6408,border:a=0,recreate:s=!1,parameters:l={},pixelStore:u={},textureUnit:c=void 0}=t;r||(r=i);let{width:f,height:h,dataFormat:d,type:p,compressed:v=!1,mipmaps:g=!0}=t;const{depth:m=0}=t;return{width:f,height:h,compressed:v,dataFormat:d,type:p}=this._deduceParameters({format:o,type:p,dataFormat:d,compressed:v,data:r,width:f,height:h}),this.width=f,this.height=h,this.depth=m,this.format=o,this.type=p,this.dataFormat=d,this.border=a,this.textureUnit=c,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),g&&this._isNPOT()&&(Lt.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),g=!1,this._updateForNPOT(l)),this.mipmaps=g,this.setImageData({data:r,width:f,height:h,depth:m,format:o,type:p,dataFormat:d,border:a,mipmaps:g,parameters:u,compressed:v}),g&&this.generateMipmap(),this.setParameters(l),s&&(this.data=r),n&&(this._video={video:r,parameters:l,lastTime:r.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?r.currentTime:-1}),this}update(){if(this._video){const{video:t,parameters:r,lastTime:n}=this._video;if(n===t.currentTime||t.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:t,parameters:r}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=t.currentTime}}resize(t){let{height:r,width:n,mipmaps:i=!1}=t;return n!==this.width||r!==this.height?this.initialize({width:n,height:r,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}generateMipmap(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isNPOT()?(Lt.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),ni(this.gl,t,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(t){this._trackDeallocatedMemory("Texture");const{target:r=this.target,pixels:n=null,level:i=0,format:o=this.format,border:a=this.border,offset:s=0,parameters:l={}}=t;let{data:u=null,type:c=this.type,width:f=this.width,height:h=this.height,dataFormat:d=this.dataFormat,compressed:p=!1}=t;u||(u=n),{type:c,dataFormat:d,compressed:p,width:f,height:h}=this._deduceParameters({format:o,type:c,dataFormat:d,compressed:p,data:u,width:f,height:h});const{gl:v}=this;v.bindTexture(this.target,this.handle);let g=null;({data:u,dataType:g}=this._getDataType({data:u,compressed:p}));let m,_=0;if(ni(this.gl,l,()=>{switch(g){case"null":v.texImage2D(r,i,o,f,h,a,d,c,u);break;case"typed-array":v.texImage2D(r,i,o,f,h,a,d,c,u,s);break;case"buffer":m=Vr(v),m.bindBuffer(35052,u.handle||u),m.texImage2D(r,i,o,f,h,a,d,c,s),m.bindBuffer(35052,null);break;case"browser-object":Qt(v)?v.texImage2D(r,i,o,f,h,a,d,c,u):v.texImage2D(r,i,o,d,c,u);break;case"compressed":for(const[y,w]of u.entries())v.compressedTexImage2D(r,y,w.format,w.width,w.height,a,w.data),_+=w.levelSize;break;default:mt(!1,"Unknown image data type")}}),g==="compressed")this._trackAllocatedMemory(_,"Texture");else if(u&&u.byteLength)this._trackAllocatedMemory(u.byteLength,"Texture");else{const y=J$[this.dataFormat]||4,w=Q$[this.type]||1;this._trackAllocatedMemory(this.width*this.height*y*w,"Texture")}return this.loaded=!0,this}setSubImageData(t){let{target:r=this.target,pixels:n=null,data:i=null,x:o=0,y:a=0,width:s=this.width,height:l=this.height,level:u=0,format:c=this.format,type:f=this.type,dataFormat:h=this.dataFormat,compressed:d=!1,offset:p=0,border:v=this.border,parameters:g={}}=t;if({type:f,dataFormat:h,compressed:d,width:s,height:l}=this._deduceParameters({format:c,type:f,dataFormat:h,compressed:d,data:i,width:s,height:l}),mt(this.depth===0,"texSubImage not supported for 3D textures"),i||(i=n),i&&i.data){const m=i;i=m.data,s=m.shape[0],l=m.shape[1]}i instanceof Pe&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),ni(this.gl,g,()=>{if(d)this.gl.compressedTexSubImage2D(r,u,o,a,s,l,c,i);else if(i===null)this.gl.texSubImage2D(r,u,o,a,s,l,h,f,null);else if(ArrayBuffer.isView(i))this.gl.texSubImage2D(r,u,o,a,s,l,h,f,i,p);else if(i instanceof Yx){const m=Vr(this.gl);m.bindBuffer(35052,i),m.texSubImage2D(r,u,o,a,s,l,h,f,p),m.bindBuffer(35052,null)}else Qt(this.gl)?Vr(this.gl).texSubImage2D(r,u,o,a,s,l,h,f,i):this.gl.texSubImage2D(r,u,o,a,h,f,i)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return Lt.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:r}=this;return t!==void 0&&(this.textureUnit=t,r.activeTexture(33984+t)),r.bindTexture(this.target,this.handle),t}unbind(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:r}=this;return t!==void 0&&(this.textureUnit=t,r.activeTexture(33984+t)),r.bindTexture(this.target,null),t}_getDataType(t){let{data:r,compressed:n=!1}=t;return n?{data:r,dataType:"compressed"}:r===null?{data:r,dataType:"null"}:ArrayBuffer.isView(r)?{data:r,dataType:"typed-array"}:r instanceof Pe?{data:r.handle,dataType:"buffer"}:r instanceof Yx?{data:r,dataType:"buffer"}:{data:r,dataType:"browser-object"}}_deduceParameters(t){const{format:r,data:n}=t;let{width:i,height:o,dataFormat:a,type:s,compressed:l}=t;const u=ek[r];return a=a||u&&u.dataFormat,s=s||u&&u.types[0],l=l||u&&u.compressed,{width:i,height:o}=this._deduceImageSize(n,i,o),{dataFormat:a,type:s,compressed:l,width:i,height:o,format:r,data:n}}_deduceImageSize(t,r,n){let i;return typeof ImageData<"u"&&t instanceof ImageData?i={width:t.width,height:t.height}:typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement?i={width:t.naturalWidth,height:t.naturalHeight}:typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement?i={width:t.width,height:t.height}:typeof ImageBitmap<"u"&&t instanceof ImageBitmap?i={width:t.width,height:t.height}:typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?i={width:t.videoWidth,height:t.videoHeight}:t?i={width:r,height:n}:i={width:r>=0?r:1,height:n>=0?n:1},mt(i,"Could not deduced texture size"),mt(r===void 0||i.width===r,"Deduced texture width does not match supplied width"),mt(n===void 0||i.height===n,"Deduced texture height does not match supplied height"),i}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(t){switch(t){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const r=this.gl.getTexParameter(this.target,t);return this.gl.bindTexture(this.target,null),r}}_setParameter(t,r){switch(this.gl.bindTexture(this.target,this.handle),r=this._getNPOTParam(t,r),t){case 33082:case 33083:this.gl.texParameterf(this.handle,t,r);break;case 4096:case 4097:mt(!1);break;default:this.gl.texParameteri(this.target,t,r);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return Qt(this.gl)||!this.width||!this.height?!1:!Hx(this.width)||!Hx(this.height)}_updateForNPOT(t){t[this.gl.TEXTURE_MIN_FILTER]===void 0&&(t[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),t[this.gl.TEXTURE_WRAP_S]===void 0&&(t[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),t[this.gl.TEXTURE_WRAP_T]===void 0&&(t[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(t,r){if(this._isNPOT())switch(t){case 10241:amt.indexOf(r)===-1&&(r=9729);break;case 10242:case 10243:r!==33071&&(r=33071);break}return r}}let smt="";function lmt(e,t){return mt(typeof e=="string"),e=smt+e,new Promise((r,n)=>{try{const i=new Image;i.onload=()=>r(i),i.onerror=()=>n(new Error("Could not load image ".concat(e,"."))),i.crossOrigin=t&&t.crossOrigin||"anonymous",i.src=e}catch(i){n(i)}})}class yn extends iu{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(t,r){return iu.isSupported(t,r)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};k_(t),(r instanceof Promise||typeof r=="string")&&(r={data:r}),typeof r.data=="string"&&(r=Object.assign({},r,{data:lmt(r.data)})),super(t,Object.assign({},r,{target:3553})),this.initialize(r),Object.seal(this)}}const W3=[34069,34070,34071,34072,34073,34074];class tz extends iu{get[Symbol.toStringTag](){return"TextureCube"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};k_(t),super(t,Object.assign({},r,{target:34067})),this.initialize(r),Object.seal(this)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{mipmaps:r=!0,parameters:n={}}=t;return this.opts=t,this.setCubeMapImageData(t).then(()=>{this.loaded=!0,r&&this.generateMipmap(t),this.setParameters(n)}),this}subImage(t){let{face:r,data:n,x:i=0,y:o=0,mipmapLevel:a=0}=t;return this._subImage({target:r,data:n,x:i,y:o,mipmapLevel:a})}async setCubeMapImageData(t){let{width:r,height:n,pixels:i,data:o,border:a=0,format:s=6408,type:l=5121}=t;const{gl:u}=this,c=i||o,f=await Promise.all(W3.map(h=>{const d=c[h];return Promise.all(Array.isArray(d)?d:[d])}));this.bind(),W3.forEach((h,d)=>{f[d].length>1&&this.opts.mipmaps!==!1&&Lt.warn("".concat(this.id," has mipmap and multiple LODs."))(),f[d].forEach((p,v)=>{r&&n?u.texImage2D(h,v,s,r,n,a,s,l,p):u.texImage2D(h,v,s,s,l,p)})}),this.unbind()}setImageDataForFace(t){const{face:r,width:n,height:i,pixels:o,data:a,border:s=0,format:l=6408,type:u=5121}=t,{gl:c}=this,f=o||a;return this.bind(),f instanceof Promise?f.then(h=>this.setImageDataForFace(Object.assign({},t,{face:r,data:h,pixels:h}))):this.width||this.height?c.texImage2D(r,0,l,n,i,s,l,u,f):c.texImage2D(r,0,l,l,u,f),this}}tz.FACES=W3;class umt extends iu{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(t){return Qt(t)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Vr(t),r=Object.assign({depth:1},r,{target:32879,unpackFlipY:!1}),super(t,r),this.initialize(r),Object.seal(this)}setImageData(t){let{level:r=0,dataFormat:n=6408,width:i,height:o,depth:a=1,border:s=0,format:l,type:u=5121,offset:c=0,data:f,parameters:h={}}=t;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),ni(this.gl,h,()=>{ArrayBuffer.isView(f)&&this.gl.texImage3D(this.target,r,n,i,o,a,s,l,u,f),f instanceof Pe&&(this.gl.bindBuffer(35052,f.handle),this.gl.texImage3D(this.target,r,n,i,o,a,s,l,u,c))}),f&&f.byteLength)this._trackAllocatedMemory(f.byteLength,"Texture");else{const d=J$[this.dataFormat]||4,p=Q$[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*d*p,"Texture")}return this.loaded=!0,this}}const gl="EXT_color_buffer_float",qx={[33189]:{bpp:2},[33190]:{gl2:!0,bpp:3},[36012]:{gl2:!0,bpp:4},[36168]:{bpp:1},[34041]:{bpp:4},[35056]:{gl2:!0,bpp:4},[36013]:{gl2:!0,bpp:5},[32854]:{bpp:2},[36194]:{bpp:2},[32855]:{bpp:2},[33321]:{gl2:!0,bpp:1},[33330]:{gl2:!0,bpp:1},[33329]:{gl2:!0,bpp:1},[33332]:{gl2:!0,bpp:2},[33331]:{gl2:!0,bpp:2},[33334]:{gl2:!0,bpp:4},[33333]:{gl2:!0,bpp:4},[33323]:{gl2:!0,bpp:2},[33336]:{gl2:!0,bpp:2},[33335]:{gl2:!0,bpp:2},[33338]:{gl2:!0,bpp:4},[33337]:{gl2:!0,bpp:4},[33340]:{gl2:!0,bpp:8},[33339]:{gl2:!0,bpp:8},[32849]:{gl2:!0,bpp:3},[32856]:{gl2:!0,bpp:4},[32857]:{gl2:!0,bpp:4},[36220]:{gl2:!0,bpp:4},[36238]:{gl2:!0,bpp:4},[36975]:{gl2:!0,bpp:4},[36214]:{gl2:!0,bpp:8},[36232]:{gl2:!0,bpp:8},[36226]:{gl2:!0,bpp:16},[36208]:{gl2:!0,bpp:16},[33325]:{gl2:gl,bpp:2},[33327]:{gl2:gl,bpp:4},[34842]:{gl2:gl,bpp:8},[33326]:{gl2:gl,bpp:4},[33328]:{gl2:gl,bpp:8},[34836]:{gl2:gl,bpp:16},[35898]:{gl2:gl,bpp:4}};function cmt(e,t,r){const n=r[t];if(!n)return!1;const i=Qt(e)&&n.gl2||n.gl1;return typeof i=="string"?e.getExtension(i):i}class Pc extends La{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(t){let{format:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{format:null};return!r||cmt(t,r,qx)}static getSamplesForFormat(t,r){let{format:n}=r;return t.getInternalformatParameter(36161,n,32937)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.initialize(r),Object.seal(this)}initialize(t){let{format:r,width:n=1,height:i=1,samples:o=0}=t;return mt(r,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),o!==0&&Qt(this.gl)?this.gl.renderbufferStorageMultisample(36161,o,r,n,i):this.gl.renderbufferStorage(36161,r,n,i),this.format=r,this.width=n,this.height=i,this.samples=o,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*qx[this.format].bpp),this}resize(t){let{width:r,height:n}=t;return r!==this.width||n!==this.height?this.initialize({width:r,height:n,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(t){this.gl.bindRenderbuffer(36161,t)}_syncHandle(t){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(t){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,t)}}const fmt=256,hmt=1024,dmt=16384,Zx=6144,Kx=6145,Jx=6146,Qx=34041,ez="clear: bad arguments";function rk(e){let{framebuffer:t=null,color:r=null,depth:n=null,stencil:i=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o={};t&&(o.framebuffer=t);let a=0;r&&(a|=dmt,r!==!0&&(o.clearColor=r)),n&&(a|=fmt,n!==!0&&(o.clearDepth=n)),i&&(a|=hmt,n!==!0&&(o.clearStencil=n)),mt(a!==0,ez),ni(e,o,()=>{e.clear(a)})}function pmt(e){let{framebuffer:t=null,buffer:r=Zx,drawBuffer:n=0,value:i=[0,0,0,0]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Vr(e),ni(e,{framebuffer:t},()=>{switch(r){case Zx:switch(i.constructor){case Int32Array:e.clearBufferiv(r,n,i);break;case Uint32Array:e.clearBufferuiv(r,n,i);break;case Float32Array:default:e.clearBufferfv(r,n,i)}break;case Kx:e.clearBufferfv(Kx,0,[i]);break;case Jx:e.clearBufferiv(Jx,0,[i]);break;case Qx:const[o,a]=i;e.clearBufferfi(Qx,0,o,a);break;default:mt(!1,ez)}})}function vmt(e){switch(e){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return mt(!1),0}}function A_(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{sourceX:r=0,sourceY:n=0,sourceFormat:i=6408}=t;let{sourceAttachment:o=36064,target:a=null,sourceWidth:s,sourceHeight:l,sourceType:u}=t;const{framebuffer:c,deleteFramebuffer:f}=rz(e);mt(c);const{gl:h,handle:d,attachments:p}=c;s=s||c.width,l=l||c.height,o===36064&&d===null&&(o=1028),mt(p[o]),u=u||p[o].type,a=mmt(a,u,i,s,l),u=u||G3(a);const v=h.bindFramebuffer(36160,d);return h.readPixels(r,n,s,l,i,u,a),h.bindFramebuffer(36160,v||null),f&&c.delete(),a}function tL(e){let{sourceAttachment:t=36064,targetMaxHeight:r=Number.MAX_SAFE_INTEGER}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=A_(e,{sourceAttachment:t}),{width:i,height:o}=e;for(;o>r;)({data:n,width:i,height:o}=Qgt({data:n,width:i,height:o}));Jgt({data:n,width:i,height:o});const a=document.createElement("canvas");a.width=i,a.height=o;const s=a.getContext("2d"),l=s.createImageData(i,o);return l.data.set(n),s.putImageData(l,0,0),a.toDataURL()}function gmt(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{sourceX:n=0,sourceY:i=0,targetMipmaplevel:o=0,targetInternalFormat:a=6408}=r;let{targetX:s,targetY:l,targetZ:u,width:c,height:f}=r;const{framebuffer:h,deleteFramebuffer:d}=rz(e);mt(h);const{gl:p,handle:v}=h,g=typeof s<"u"||typeof l<"u"||typeof u<"u";s=s||0,l=l||0,u=u||0;const m=p.bindFramebuffer(36160,v);mt(t);let _=null;if(t instanceof iu&&(_=t,c=Number.isFinite(c)?c:_.width,f=Number.isFinite(f)?f:_.height,_.bind(0),t=_.target),!g)p.copyTexImage2D(t,o,a,n,i,c,f,0);else switch(t){case 3553:case 34067:p.copyTexSubImage2D(t,o,s,l,n,i,c,f);break;case 35866:case 32879:Vr(p).copyTexSubImage3D(t,o,s,l,u,n,i,c,f);break}return _&&_.unbind(),p.bindFramebuffer(36160,m||null),d&&h.delete(),_}function rz(e){return e instanceof nr?{framebuffer:e,deleteFramebuffer:!1}:{framebuffer:kmt(e),deleteFramebuffer:!0}}function mmt(e,t,r,n,i){if(e)return e;t=t||5121;const o=f0(t,{clamped:!1}),a=vmt(r);return new o(n*i*a)}const Be={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function _mt(e){const t=new yn(e,{format:6408,type:5126,dataFormat:6408}),r=new nr(e,{id:"test-framebuffer",check:!1,attachments:{[36064]:t}}),n=r.getStatus();return t.delete(),r.delete(),n===36053}const nz={[Be.WEBGL2]:[!1,!0],[Be.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[Be.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[Be.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[Be.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[Be.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[Be.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[Be.FLOAT_BLEND]:["EXT_float_blend"],[Be.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[Be.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[Be.TEXTURE_FLOAT]:["OES_texture_float",!0],[Be.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[Be.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[Be.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[Be.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[Be.COLOR_ATTACHMENT_RGBA32F]:[_mt,"EXT_color_buffer_float"],[Be.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[Be.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[Be.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[Be.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[Be.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[Be.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]},ymt=2;function bmt(e,t){return nk(e,t)}function nk(e,t){return t=Array.isArray(t)?t:[t],t.every(r=>iz(e,r))}function wmt(e){e.luma=e.luma||{},e.luma.caps=e.luma.caps||{};for(const t in nz)e.luma.caps[t]===void 0&&(e.luma.caps[t]=iz(e,t));return e.luma.caps}function iz(e,t){return e.luma=e.luma||{},e.luma.caps=e.luma.caps||{},e.luma.caps[t]===void 0&&(e.luma.caps[t]=Smt(e,t)),e.luma.caps[t]||Lt.log(ymt,"Feature: ".concat(t," not supported"))(),e.luma.caps[t]}function Smt(e,t){const r=nz[t];mt(r,t);let n;const i=Qt(e)&&r[1]||r[0];if(typeof i=="function")n=i(e);else if(Array.isArray(i)){n=!0;for(const o of i)n=n&&Boolean(e.getExtension(o))}else typeof i=="string"?n=Boolean(e.getExtension(i)):typeof i=="boolean"?n=i:mt(!1);return n}const eL="Multiple render targets not supported";class nr extends La{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{colorBufferFloat:n,colorBufferHalfFloat:i}=r;let o=!0;return n&&(o=Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("WEBGL_color_buffer_float")||t.getExtension("OES_texture_float"))),i&&(o=o&&Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("EXT_color_buffer_half_float"))),o}static getDefaultFramebuffer(t){return t.luma=t.luma||{},t.luma.defaultFramebuffer=t.luma.defaultFramebuffer||new nr(t,{id:"default-framebuffer",handle:null,attachments:{}}),t.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const t=Vr(this.gl);return t.getParameter(t.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const t=Vr(this.gl);return t.getParameter(t.MAX_DRAW_BUFFERS)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(r),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(t){let{width:r=1,height:n=1,attachments:i=null,color:o=!0,depth:a=!0,stencil:s=!1,check:l=!0,readBuffer:u=void 0,drawBuffers:c=void 0}=t;if(mt(r>=0&&n>=0,"Width and height need to be integers"),this.width=r,this.height=n,i)for(const f in i){const h=i[f];(Array.isArray(h)?h[0]:h).resize({width:r,height:n})}else i=this._createDefaultAttachments(o,a,s,r,n);this.update({clearAttachments:!0,attachments:i,readBuffer:u,drawBuffers:c}),i&&l&&this.checkStatus()}delete(){for(const t of this.ownResources)t.delete();return super.delete(),this}update(t){let{attachments:r={},readBuffer:n,drawBuffers:i,clearAttachments:o=!1,resizeAttachments:a=!0}=t;this.attach(r,{clearAttachments:o,resizeAttachments:a});const{gl:s}=this,l=s.bindFramebuffer(36160,this.handle);return n&&this._setReadBuffer(n),i&&this._setDrawBuffers(i),s.bindFramebuffer(36160,l||null),this}resize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{width:r,height:n}=t;if(this.handle===null)return mt(r===void 0&&n===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;r===void 0&&(r=this.gl.drawingBufferWidth),n===void 0&&(n=this.gl.drawingBufferHeight),r!==this.width&&n!==this.height&&Lt.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(r,"x").concat(n))();for(const i in this.attachments)this.attachments[i].resize({width:r,height:n});return this.width=r,this.height=n,this}attach(t){let{clearAttachments:r=!1,resizeAttachments:n=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i={};r&&Object.keys(this.attachments).forEach(a=>{i[a]=null}),Object.assign(i,t);const o=this.gl.bindFramebuffer(36160,this.handle);for(const a in i){mt(a!==void 0,"Misspelled framebuffer binding point?");const s=Number(a),l=i[s];let u=l;if(!u)this._unattach(s);else if(u instanceof Pc)this._attachRenderbuffer({attachment:s,renderbuffer:u});else if(Array.isArray(l)){const[c,f=0,h=0]=l;u=c,this._attachTexture({attachment:s,texture:c,layer:f,level:h})}else this._attachTexture({attachment:s,texture:u,layer:0,level:0});n&&u&&u.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,o||null),Object.assign(this.attachments,t),Object.keys(this.attachments).filter(a=>!this.attachments[a]).forEach(a=>{delete this.attachments[a]})}checkStatus(){const t=this.getStatus();if(t!==36053)throw new Error(Pmt(t));return this}getStatus(){const{gl:t}=this,r=t.bindFramebuffer(36160,this.handle),n=t.checkFramebufferStatus(36160);return t.bindFramebuffer(36160,r||null),n}clear(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{color:r,depth:n,stencil:i,drawBuffers:o=[]}=t,a=this.gl.bindFramebuffer(36160,this.handle);return(r||n||i)&&rk(this.gl,{color:r,depth:n,stencil:i}),o.forEach((s,l)=>{pmt(this.gl,{drawBuffer:l,value:s})}),this.gl.bindFramebuffer(36160,a||null),this}readPixels(){return Lt.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return Lt.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return Lt.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return Lt.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return Lt.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return Lt.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(t){let{attachments:r=[],x:n=0,y:i=0,width:o,height:a}=t;const s=Vr(this.gl),l=s.bindFramebuffer(36008,this.handle);return n===0&&i===0&&o===void 0&&a===void 0?s.invalidateFramebuffer(36008,r):s.invalidateFramebuffer(36008,r,n,i,o,a),s.bindFramebuffer(36008,l),this}getAttachmentParameter(t,r,n){let i=this._getAttachmentParameterFallback(r);return i===null&&(this.gl.bindFramebuffer(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,t,r),this.gl.bindFramebuffer(36160,null)),n&&i>1e3&&(i=Ps(this.gl,i)),i}getAttachmentParameters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:36064,r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const i={};for(const o of n){const a=r?Ps(this.gl,o):o;i[a]=this.getAttachmentParameter(t,o,r)}return i}getParameters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const r=Object.keys(this.attachments),n={};for(const i of r){const o=Number(i),a=t?Ps(this.gl,o):o;n[a]=this.getAttachmentParameters(o,t)}return n}show(){return typeof window<"u"&&window.open(tL(this),"luma-debug-texture"),this}log(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(t>Lt.level||typeof window>"u")return this;r=r||"Framebuffer ".concat(this.id);const n=tL(this,{targetMaxHeight:100});return Lt.image({logLevel:t,message:r,image:n},r)(),this}bind(){let{target:t=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(t,this.handle),this}unbind(){let{target:t=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(t,null),this}_createDefaultAttachments(t,r,n,i,o){let a=null;return t&&(a=a||{},a[36064]=new yn(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:i,height:o,mipmaps:!1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.ownResources.push(a[36064])),r&&n?(a=a||{},a[33306]=new Pc(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:i,height:111}),this.ownResources.push(a[33306])):r?(a=a||{},a[36096]=new Pc(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:i,height:o}),this.ownResources.push(a[36096])):n&&mt(!1),a}_unattach(t){const r=this.attachments[t];!r||(r instanceof Pc?this.gl.framebufferRenderbuffer(36160,t,36161,null):this.gl.framebufferTexture2D(36160,t,3553,null,0),delete this.attachments[t])}_attachRenderbuffer(t){let{attachment:r=36064,renderbuffer:n}=t;const{gl:i}=this;i.framebufferRenderbuffer(36160,r,36161,n.handle),this.attachments[r]=n}_attachTexture(t){let{attachment:r=36064,texture:n,layer:i,level:o}=t;const{gl:a}=this;switch(a.bindTexture(n.target,n.handle),n.target){case 35866:case 32879:Vr(a).framebufferTextureLayer(36160,r,n.target,o,i);break;case 34067:const l=Tmt(i);a.framebufferTexture2D(36160,r,l,n.handle,o);break;case 3553:a.framebufferTexture2D(36160,r,3553,n.handle,o);break;default:mt(!1,"Illegal texture type")}a.bindTexture(n.target,null),this.attachments[r]=n}_setReadBuffer(t){const r=Qvt(this.gl);r?r.readBuffer(t):mt(t===36064||t===1029,eL),this.readBuffer=t}_setDrawBuffers(t){const{gl:r}=this,n=Vr(r);if(n)n.drawBuffers(t);else{const i=r.getExtension("WEBGL_draw_buffers");i?i.drawBuffersWEBGL(t):mt(t.length===1&&(t[0]===36064||t[0]===1029),eL)}this.drawBuffers=t}_getAttachmentParameterFallback(t){const r=wmt(this.gl);switch(t){case 36052:return r.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return r.WEBGL2?null:8;case 33297:return r.WEBGL2?null:5125;case 33296:return!r.WEBGL2&&!r.EXT_sRGB?9729:null;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(t){return this.gl.bindFramebuffer(36160,t)}}function Tmt(e){return e<34069?e+34069:e}function Pmt(e){return(nr.STATUS||{})[e]||"Framebuffer error ".concat(e)}const Emt=[36049,36048,33296,33298,33299,33300,33301,33302,33303];nr.ATTACHMENT_PARAMETERS=Emt;function oz(e,t){mt(e instanceof yn||e instanceof tz||e instanceof umt);const r=e.constructor,{gl:n,width:i,height:o,format:a,type:s,dataFormat:l,border:u,mipmaps:c}=e,f=Object.assign({width:i,height:o,format:a,type:s,dataFormat:l,border:u,mipmaps:c},t);return new r(n,f)}function kmt(e,t){const{gl:r,width:n,height:i,id:o}=e;return new nr(r,Object.assign({},t,{id:"framebuffer-for-".concat(o),width:n,height:i,attachments:{[36064]:e}}))}function tm(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"unnamed";const r=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,n=e.match(r);return n?n[1]:t}const Amt=35632,Cmt=35633;function Mmt(e){switch(e){case Amt:return"fragment";case Cmt:return"vertex";default:return"unknown type"}}function xmt(e,t,r,n){const i=e.split(/\r?\n/),o={},a={},s=n||tm(t)||"(unnamed)",l="".concat(Mmt(r)," shader ").concat(s);for(let c=0;c<i.length;c++){const f=i[c];if(f.length<=1)continue;const h=f.split(":"),d=h[0],p=parseInt(h[2],10);if(isNaN(p))throw new Error("GLSL compilation error in ".concat(l,": ").concat(e));d!=="WARNING"?o[p]=f:a[p]=f}const u=Lmt(t);return{shaderName:l,errors:rL(o,u),warnings:rL(a,u)}}function rL(e,t){let r="";for(let n=0;n<t.length;n++){const i=t[n];if(!(!e[n+3]&&!e[n+2]&&!e[n+1])&&(r+="".concat(i,`
`),e[n+1])){const o=e[n+1],a=o.split(":",3),s=a[0],l=parseInt(a[1],10)||0,u=o.substring(a.join(":").length+1).trim();r+=az("^^^ ".concat(s,": ").concat(u,`

`),l)}}return r}function Lmt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:": ";const n=e.split(/\r?\n/),i=String(n.length+t-1).length;return n.map((o,a)=>{const s=String(a+t),l=s.length;return az(s,i-l)+r+o})}function az(e,t){let r="";for(let n=0;n<t;++n)r+=" ";return"".concat(r).concat(e)}function sz(e){let t=100;const r=e.match(/[^\s]+/g);if(r.length>=2&&r[0]==="#version"){const n=parseInt(r[1],10);Number.isFinite(n)&&(t=n)}return t}const Imt="Shader: GLSL source code must be a JavaScript string";class h0 extends La{get[Symbol.toStringTag](){return"Shader"}static getTypeName(t){switch(t){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return mt(!1),"unknown"}}constructor(t,r){k_(t),mt(typeof r.source=="string",Imt);const n=tm(r.source,null)||r.id||Rs("unnamed ".concat(h0.getTypeName(r.shaderType)));super(t,{id:n}),this.shaderType=r.shaderType,this.source=r.source,this.initialize(r)}initialize(t){let{source:r}=t;const n=tm(r,null);n&&(this.id=Rs(n)),this._compile(r)}getParameter(t){return this.gl.getShaderParameter(this.handle,t)}toString(){return"".concat(h0.getTypeName(this.shaderType),":").concat(this.id)}getName(){return tm(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const t=this.gl.getExtension("WEBGL_debug_shaders");return t?t.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.source;if(t.startsWith("#version ")||(t=`#version 100
`.concat(t)),this.source=t,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const n=this.gl.getShaderInfoLog(this.handle),{shaderName:i,errors:o,warnings:a}=xmt(n,this.source,this.shaderType,this.id);throw Lt.error("GLSL compilation errors in ".concat(i,`
`).concat(o))(),Lt.warn("GLSL compilation warnings in ".concat(i,`
`).concat(a))(),new Error("GLSL compilation errors in ".concat(i))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class pb extends h0{get[Symbol.toStringTag](){return"VertexShader"}constructor(t,r){typeof r=="string"&&(r={source:r}),super(t,Object.assign({},r,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class vb extends h0{get[Symbol.toStringTag](){return"FragmentShader"}constructor(t,r){typeof r=="string"&&(r={source:r}),super(t,Object.assign({},r,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const Omt={[5126]:Fe.bind(null,"uniform1fv",Sn,1,Dr),[35664]:Fe.bind(null,"uniform2fv",Sn,2,Dr),[35665]:Fe.bind(null,"uniform3fv",Sn,3,Dr),[35666]:Fe.bind(null,"uniform4fv",Sn,4,Dr),[5124]:Fe.bind(null,"uniform1iv",Wa,1,Dr),[35667]:Fe.bind(null,"uniform2iv",Wa,2,Dr),[35668]:Fe.bind(null,"uniform3iv",Wa,3,Dr),[35669]:Fe.bind(null,"uniform4iv",Wa,4,Dr),[35670]:Fe.bind(null,"uniform1iv",Wa,1,Dr),[35671]:Fe.bind(null,"uniform2iv",Wa,2,Dr),[35672]:Fe.bind(null,"uniform3iv",Wa,3,Dr),[35673]:Fe.bind(null,"uniform4iv",Wa,4,Dr),[35674]:Fe.bind(null,"uniformMatrix2fv",Sn,4,Xo),[35675]:Fe.bind(null,"uniformMatrix3fv",Sn,9,Xo),[35676]:Fe.bind(null,"uniformMatrix4fv",Sn,16,Xo),[35678]:_r,[35680]:_r,[5125]:Fe.bind(null,"uniform1uiv",gv,1,Dr),[36294]:Fe.bind(null,"uniform2uiv",gv,2,Dr),[36295]:Fe.bind(null,"uniform3uiv",gv,3,Dr),[36296]:Fe.bind(null,"uniform4uiv",gv,4,Dr),[35685]:Fe.bind(null,"uniformMatrix2x3fv",Sn,6,Xo),[35686]:Fe.bind(null,"uniformMatrix2x4fv",Sn,8,Xo),[35687]:Fe.bind(null,"uniformMatrix3x2fv",Sn,6,Xo),[35688]:Fe.bind(null,"uniformMatrix3x4fv",Sn,12,Xo),[35689]:Fe.bind(null,"uniformMatrix4x2fv",Sn,8,Xo),[35690]:Fe.bind(null,"uniformMatrix4x3fv",Sn,12,Xo),[35678]:_r,[35680]:_r,[35679]:_r,[35682]:_r,[36289]:_r,[36292]:_r,[36293]:_r,[36298]:_r,[36299]:_r,[36300]:_r,[36303]:_r,[36306]:_r,[36307]:_r,[36308]:_r,[36311]:_r},Rmt={},Dmt={},Nmt={},nL=[0];function ik(e,t,r,n){t===1&&typeof e=="boolean"&&(e=e?1:0),Number.isFinite(e)&&(nL[0]=e,e=nL);const i=e.length;if(i%t&&Lt.warn("Uniform size should be multiples of ".concat(t),e)(),e instanceof r)return e;let o=n[i];o||(o=new r(i),n[i]=o);for(let a=0;a<i;a++)o[a]=e[a];return o}function Sn(e,t){return ik(e,t,Float32Array,Rmt)}function Wa(e,t){return ik(e,t,Int32Array,Dmt)}function gv(e,t){return ik(e,t,Uint32Array,Nmt)}function iL(e,t,r){const n=Omt[r.type];if(!n)throw new Error("Unknown GLSL uniform type ".concat(r.type));return n().bind(null,e,t)}function Fmt(e){if(e[e.length-1]!=="]")return{name:e,length:1,isArray:!1};const t=/([^[]*)(\[[0-9]+\])?/,r=e.match(t);if(!r||r.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(e));return{name:r[1],length:r[2]||1,isArray:Boolean(r[2])}}function Bmt(e,t,r){for(const n in e){const i=e[n];if((!r||Boolean(r[n]))&&!$mt(i))throw t=t?"".concat(t," "):"",console.error("".concat(t," Bad uniform ").concat(n),i),new Error("".concat(t," Bad uniform ").concat(n))}return!0}function $mt(e){return Array.isArray(e)||ArrayBuffer.isView(e)?Vmt(e):isFinite(e)||e===!0||e===!1||e instanceof iu||e instanceof Pc?!0:e instanceof nr?Boolean(e.texture):!1}function zmt(e,t,r){if(Array.isArray(r)||ArrayBuffer.isView(r))if(e[t]){const n=e[t];for(let i=0,o=r.length;i<o;++i)n[i]=r[i]}else e[t]=r.slice();else e[t]=r}function Vmt(e){if(e.length===0)return!1;const t=Math.min(e.length,16);for(let r=0;r<t;++r)if(!Number.isFinite(e[r]))return!1;return!0}function _r(){let e=null;return(t,r,n)=>{const i=e!==n;return i&&(t.uniform1i(r,n),e=n),i}}function Fe(e,t,r,n){let i=null,o=null;return(a,s,l)=>{const u=t(l,r),c=u.length;let f=!1;if(i===null)i=new Float32Array(c),o=c,f=!0;else{mt(o===c,"Uniform length cannot change.");for(let h=0;h<c;++h)if(u[h]!==i[h]){f=!0;break}}return f&&(n(a,e,s,u),i.set(u)),f}}function Dr(e,t,r,n){e[t](r,n)}function Xo(e,t,r,n){e[t](r,!1,n)}const Umt=5120,Gmt=5121,jmt=5122,Wmt=5123,oL=0,mv=1,Hmt=2,Xmt=3,_v=4,Ymt=5,qmt=6,ir=5126,Zmt=35664,Kmt=35665,Jmt=35666,Sh=5124,Qmt=35667,t1t=35668,e1t=35669,Th=5125,r1t=36294,n1t=36295,i1t=36296,o1t=35670,a1t=35671,s1t=35672,l1t=35673,u1t=35674,c1t=35675,f1t=35676,h1t=35685,d1t=35686,p1t=35687,v1t=35688,g1t=35689,m1t=35690,H3={[ir]:[ir,1,"float"],[Zmt]:[ir,2,"vec2"],[Kmt]:[ir,3,"vec3"],[Jmt]:[ir,4,"vec4"],[Sh]:[Sh,1,"int"],[Qmt]:[Sh,2,"ivec2"],[t1t]:[Sh,3,"ivec3"],[e1t]:[Sh,4,"ivec4"],[Th]:[Th,1,"uint"],[r1t]:[Th,2,"uvec2"],[n1t]:[Th,3,"uvec3"],[i1t]:[Th,4,"uvec4"],[o1t]:[ir,1,"bool"],[a1t]:[ir,2,"bvec2"],[s1t]:[ir,3,"bvec3"],[l1t]:[ir,4,"bvec4"],[u1t]:[ir,8,"mat2"],[h1t]:[ir,8,"mat2x3"],[d1t]:[ir,8,"mat2x4"],[c1t]:[ir,12,"mat3"],[p1t]:[ir,12,"mat3x2"],[v1t]:[ir,12,"mat3x4"],[f1t]:[ir,16,"mat4"],[g1t]:[ir,16,"mat4x2"],[m1t]:[ir,16,"mat4x3"]};function _1t(e){switch(e){case oL:return oL;case mv:return mv;case Xmt:return mv;case Hmt:return mv;case _v:return _v;case Ymt:return _v;case qmt:return _v;default:return mt(!1),0}}function aL(e){const t=H3[e];if(!t)return null;const[r,n]=t;return{type:r,components:n}}function lz(e,t){switch(e){case Umt:case Gmt:case jmt:case Wmt:e=ir;break}for(const r in H3){const[n,i,o]=H3[r];if(n===e&&i===t)return{glType:r,name:o}}return null}class y1t{constructor(t){this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}getAttributeInfo(t){const r=Number(t);return Number.isFinite(r)?this.attributeInfosByLocation[r]:this.attributeInfosByName[t]||null}getAttributeLocation(t){const r=this.getAttributeInfo(t);return r?r.location:-1}getAttributeAccessor(t){const r=this.getAttributeInfo(t);return r?r.accessor:null}getVaryingInfo(t){const r=Number(t);return Number.isFinite(r)?this.varyingInfos[r]:this.varyingInfosByName[t]||null}getVaryingIndex(t){const r=this.getVaryingInfo();return r?r.location:-1}getVaryingAccessor(t){const r=this.getVaryingInfo();return r?r.accessor:null}_readAttributesFromProgram(t){const{gl:r}=t,n=r.getProgramParameter(t.handle,35721);for(let i=0;i<n;i++){const{name:o,type:a,size:s}=r.getActiveAttrib(t.handle,i),l=r.getAttribLocation(t.handle,o);l>=0&&this._addAttribute(l,o,a,s)}this.attributeInfos.sort((i,o)=>i.location-o.location)}_readVaryingsFromProgram(t){const{gl:r}=t;if(!Qt(r))return;const n=r.getProgramParameter(t.handle,35971);for(let i=0;i<n;i++){const{name:o,type:a,size:s}=r.getTransformFeedbackVarying(t.handle,i);this._addVarying(i,o,a,s)}this.varyingInfos.sort((i,o)=>i.location-o.location)}_addAttribute(t,r,n,i){const{type:o,components:a}=aL(n),s={type:o,size:i*a};this._inferProperties(t,r,s);const l={location:t,name:r,accessor:new En(s)};this.attributeInfos.push(l),this.attributeInfosByLocation[t]=l,this.attributeInfosByName[l.name]=l}_inferProperties(t,r,n){/instance/i.test(r)&&(n.divisor=1)}_addVarying(t,r,n,i){const{type:o,components:a}=aL(n),s=new En({type:o,size:i*a}),l={location:t,name:r,accessor:s};this.varyingInfos.push(l),this.varyingInfosByName[l.name]=l}}const sL=4,b1t=35981,w1t=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class uz extends La{get[Symbol.toStringTag](){return"Program"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.stubRemovedMethods("Program","v6.0",w1t),this._isCached=!1,this.initialize(r),Object.seal(this),this._setId(r.id)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{hash:r,vs:n,fs:i,varyings:o,bufferMode:a=b1t}=t;return this.hash=r||"",this.vs=typeof n=="string"?new pb(this.gl,{id:"".concat(t.id,"-vs"),source:n}):n,this.fs=typeof i=="string"?new vb(this.gl,{id:"".concat(t.id,"-fs"),source:i}):i,mt(this.vs instanceof pb),mt(this.fs instanceof vb),this.uniforms={},this._textureUniforms={},o&&o.length>0&&(Vr(this.gl),this.varyings=o,this.gl2.transformFeedbackVaryings(this.handle,o,a)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new y1t(this),this.setProps(t)}delete(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isCached?this:super.delete(t)}setProps(t){return"uniforms"in t&&this.setUniforms(t.uniforms),this}draw(t){let{logPriority:r,drawMode:n=4,vertexCount:i,offset:o=0,start:a,end:s,isIndexed:l=!1,indexType:u=5123,instanceCount:c=0,isInstanced:f=c>0,vertexArray:h=null,transformFeedback:d,framebuffer:p,parameters:v={},uniforms:g,samplers:m}=t;if((g||m)&&(Lt.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(g||{})),Lt.priority>=r){const _=p?p.id:"default",y="mode=".concat(Ps(this.gl,n)," verts=").concat(i," ")+"instances=".concat(c," indexType=").concat(Ps(this.gl,u)," ")+"isInstanced=".concat(f," isIndexed=").concat(l," ")+"Framebuffer=".concat(_);Lt.log(r,y)()}return mt(h),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||i===0||f&&c===0?!1:(h.bindForDraw(i,c,()=>{if(p!==void 0&&(v=Object.assign({},v,{framebuffer:p})),d){const _=_1t(n);d.begin(_)}this._bindTextures(),ni(this.gl,v,()=>{l&&f?this.gl2.drawElementsInstanced(n,i,u,o,c):l&&Qt(this.gl)&&!isNaN(a)&&!isNaN(s)?this.gl2.drawRangeElements(n,a,s,i,u,o):l?this.gl.drawElements(n,i,u,o):f?this.gl2.drawArraysInstanced(n,o,i,c):this.gl.drawArrays(n,o,i)}),d&&d.end()}),!0)}setUniforms(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Lt.priority>=2&&Bmt(t,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const r in t){const n=t[r],i=this._uniformSetters[r];if(i){let o=n,a=!1;if(o instanceof nr&&(o=o.texture),o instanceof iu)if(a=this.uniforms[r]!==n,a){i.textureIndex===void 0&&(i.textureIndex=this._textureIndexCounter++);const s=o,{textureIndex:l}=i;s.bind(l),o=l,this._textureUniforms[r]=s}else o=i.textureIndex;else this._textureUniforms[r]&&delete this._textureUniforms[r];(i(o)||a)&&zmt(this.uniforms,r,n)}}return this}_areTexturesRenderable(){let t=!0;for(const r in this._textureUniforms){const n=this._textureUniforms[r];n.update(),t=t&&n.loaded}return t}_bindTextures(){for(const t in this._textureUniforms){const r=this._uniformSetters[t].textureIndex;this._textureUniforms[t].bind(r)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(t){const r=this.gl.getAttachedShaders(t),n={};for(const i of r)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new pb({handle:i});break;case 35632:n.fs=new vb({handle:i});break}return n}_getParameter(t){return this.gl.getProgramParameter(this.handle,t)}_setId(t){if(!t){const r=this._getName();this.id=Rs(r)}}_getName(){let t=this.vs.getName()||this.fs.getName();return t=t.replace(/shader/i,""),t=t?"".concat(t,"-program"):"program",t}_compileAndLink(){const{gl:t}=this;if(t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),Lt.time(sL,"linkProgram for ".concat(this._getName()))(),t.linkProgram(this.handle),Lt.timeEnd(sL,"linkProgram for ".concat(this._getName()))(),t.debug||Lt.level>0){if(!t.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(t.getProgramInfoLog(this.handle)));if(t.validateProgram(this.handle),!t.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(t.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:t}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let r=0;r<this._uniformCount;r++){const n=this.gl.getActiveUniform(this.handle,r),{name:i}=Fmt(n.name);let o=t.getUniformLocation(this.handle,i);if(this._uniformSetters[i]=iL(t,o,n),n.size>1)for(let a=0;a<n.size;a++)o=t.getUniformLocation(this.handle,"".concat(i,"[").concat(a,"]")),this._uniformSetters["".concat(i,"[").concat(a,"]")]=iL(t,o,n)}this._textureIndexCounter=0}getActiveUniforms(t,r){return this.gl2.getActiveUniforms(this.handle,t,r)}getUniformBlockIndex(t){return this.gl2.getUniformBlockIndex(this.handle,t)}getActiveUniformBlockParameter(t,r){return this.gl2.getActiveUniformBlockParameter(this.handle,t,r)}uniformBlockBinding(t,r){this.gl2.uniformBlockBinding(this.handle,t,r)}}const S1t=34918,T1t=34919,P1t=35007,E1t=36795,k1t=35976,A1t=35887,C1t=36202;class a1 extends La{get[Symbol.toStringTag](){return"Query"}static isSupported(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const n=Qt(t),i=nk(t,Be.TIMER_QUERY);let o=n||i;for(const a of r)switch(a){case"queries":o=o&&n;break;case"timers":o=o&&i;break;default:mt(!1)}return o}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(P1t)}beginOcclusionQuery(){let{conservative:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.begin(t?C1t:A1t)}beginTransformFeedbackQuery(){return this.begin(k1t)}begin(t){return this._queryPending?this:(this.target=t,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;const t=this.gl2.getQueryParameter(this.handle,T1t);return t&&(this._queryPending=!1),t}isTimerDisjoint(){return this.gl2.getParameter(E1t)}getResult(){return this.gl2.getQueryParameter(this.handle,S1t)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let r=0;return this._pollingPromise=new Promise((n,i)=>{const o=()=>{this.isResultAvailable()?(n(this.getResult()),this._pollingPromise=null):r++>t?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(o)};requestAnimationFrame(o)}),this._pollingPromise}_createHandle(){return a1.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}class cz extends La{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(t){return Qt(t)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Vr(t),super(t,r),this.initialize(r),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,ef(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(t),this}setProps(t){"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"bindOnUse"in t&&(t=t.bindOnUse),"buffers"in t&&this.setBuffers(t.buffers)}setBuffers(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.bind(()=>{for(const r in t)this.setBuffer(r,t[r])}),this}setBuffer(t,r){const n=this._getVaryingIndex(t),{buffer:i,byteSize:o,byteOffset:a}=this._getBufferParams(r);return n<0?(this.unused[t]=i,Lt.warn("".concat(this.id," unused varying buffer ").concat(t))(),this):(this.buffers[n]=r,this.bindOnUse||this._bindBuffer(n,i,a,o),this)}begin(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(t),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(t){let r,n,i;return t instanceof Pe?i=t:(i=t.buffer,n=t.byteSize,r=t.byteOffset),(r!==void 0||n!==void 0)&&(r=r||0,n=n||i.byteLength-r),{buffer:i,byteOffset:r,byteSize:n}}_getVaryingInfo(t){return this.configuration&&this.configuration.getVaryingInfo(t)}_getVaryingIndex(t){if(this.configuration)return this.configuration.getVaryingInfo(t).location;const r=Number(t);return Number.isFinite(r)?r:-1}_bindBuffers(){if(this.bindOnUse)for(const t in this.buffers){const{buffer:r,byteSize:n,byteOffset:i}=this._getBufferParams(this.buffers[t]);this._bindBuffer(t,r,i,n)}}_unbindBuffers(){if(this.bindOnUse)for(const t in this.buffers)this._bindBuffer(t,null)}_bindBuffer(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;const o=r&&r.handle;return!o||i===void 0?this.gl.bindBufferBase(35982,t,o):this.gl.bindBufferRange(35982,t,o,n,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(t){this.gl.bindTransformFeedback(36386,this.handle)}}let yv=null;function M1t(e){return(!yv||yv.byteLength<e)&&(yv=new ArrayBuffer(e)),yv}function x1t(e,t){const r=M1t(e.BYTES_PER_ELEMENT*t);return new e(r,0,t)}function L1t(e){let{target:t,source:r,start:n=0,count:i=1}=e;const o=r.length,a=i*o;let s=0;for(let l=n;s<o;s++)t[l++]=r[s];for(;s<a;)s<a-s?(t.copyWithin(n+s,n,n+s),s*=2):(t.copyWithin(n+s,n,n+a-s),s=a);return t}const I1t="elements must be GL.ELEMENT_ARRAY_BUFFER";class Pn extends La{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(t){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).constantAttributeZero?Qt(t)||C$()==="Chrome":!0}static getDefaultArray(t){return t.luma=t.luma||{},t.luma.defaultVertexArray||(t.luma.defaultVertexArray=new Pn(t,{handle:null,isDefaultArray:!0})),t.luma.defaultVertexArray}static getMaxAttributes(t){return Pn.MAX_ATTRIBUTES=Pn.MAX_ATTRIBUTES||t.getParameter(34921),Pn.MAX_ATTRIBUTES}static setConstant(t,r,n){switch(n.constructor){case Float32Array:Pn._setConstantFloatArray(t,r,n);break;case Int32Array:Pn._setConstantIntArray(t,r,n);break;case Uint32Array:Pn._setConstantUintArray(t,r,n);break;default:mt(!1)}}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=r.id||r.program&&r.program.id;super(t,Object.assign({},r,{id:n})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=r.isDefaultArray||!1,this.gl2=t,this.initialize(r),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return Pn.getMaxAttributes(this.gl)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.setProps(t)}setProps(t){return this}setElementBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return mt(!t||t.target===34963,I1t),this.bind(()=>{this.gl.bindBuffer(34963,t?t.handle:null)}),this}setBuffer(t,r,n){if(r.target===34963)return this.setElementBuffer(r,n);const{size:i,type:o,stride:a,offset:s,normalized:l,integer:u,divisor:c}=n,{gl:f,gl2:h}=this;return t=Number(t),this.bind(()=>{f.bindBuffer(34962,r.handle),u?(mt(Qt(f)),h.vertexAttribIPointer(t,i,o,a,s)):f.vertexAttribPointer(t,i,o,l,a,s),f.enableVertexAttribArray(t),h.vertexAttribDivisor(t,c||0)}),this}enable(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return!r&&t===0&&!Pn.isSupported(this.gl,{constantAttributeZero:!0})||(t=Number(t),this.bind(()=>r?this.gl.enableVertexAttribArray(t):this.gl.disableVertexAttribArray(t))),this}getConstantBuffer(t,r){const n=this._normalizeConstantArrayValue(r),i=n.byteLength*t,o=n.length*t;let a=!this.buffer;if(this.buffer=this.buffer||new Pe(this.gl,i),a=a||this.buffer.reallocate(i),a=a||!this._compareConstantArrayValues(n,this.bufferValue),a){const s=x1t(r.constructor,o);L1t({target:s,source:n,start:0,count:o}),this.buffer.subData(s),this.bufferValue=r}return this.buffer}_normalizeConstantArrayValue(t){return Array.isArray(t)?new Float32Array(t):t}_compareConstantArrayValues(t,r){if(!t||!r||t.length!==r.length||t.constructor!==r.constructor)return!1;for(let n=0;n<t.length;++n)if(t[n]!==r[n])return!1;return!0}static _setConstantFloatArray(t,r,n){switch(n.length){case 1:t.vertexAttrib1fv(r,n);break;case 2:t.vertexAttrib2fv(r,n);break;case 3:t.vertexAttrib3fv(r,n);break;case 4:t.vertexAttrib4fv(r,n);break;default:mt(!1)}}static _setConstantIntArray(t,r,n){switch(mt(Qt(t)),n.length){case 1:t.vertexAttribI1iv(r,n);break;case 2:t.vertexAttribI2iv(r,n);break;case 3:t.vertexAttribI3iv(r,n);break;case 4:t.vertexAttribI4iv(r,n);break;default:mt(!1)}}static _setConstantUintArray(t,r,n){switch(mt(Qt(t)),n.length){case 1:t.vertexAttribI1uiv(r,n);break;case 2:t.vertexAttribI2uiv(r,n);break;case 3:t.vertexAttribI3uiv(r,n);break;case 4:t.vertexAttribI4uiv(r,n);break;default:mt(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(t){return this.gl2.deleteVertexArray(t),[this.elements]}_bindHandle(t){this.gl2.bindVertexArray(t)}_getParameter(t,r){let{location:n}=r;return mt(Number.isFinite(n)),this.bind(()=>{switch(t){case 34373:return this.gl.getVertexAttribOffset(n,t);default:return this.gl.getVertexAttrib(n,t)}})}}const O1t="VertexArray: attributes must be Buffers or constants (i.e. typed array)",R1t=/^(.+)__LOCATION_([0-9]+)$/,D1t=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class N1t{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=r.id||r.program&&r.program.id;this.id=n,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new Pn(t),Z$(this,"VertexArray","v6.0",D1t),this.initialize(r),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(t)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:t}=this.vertexArrayObject;return this.values=new Array(t).fill(null),this.accessors=new Array(t).fill(null),this.unused={},this.drawParams=null,this}setProps(t){return"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"attributes"in t&&this.setAttributes(t.attributes),"elements"in t&&this.setElementBuffer(t.elements),"bindOnUse"in t&&(t=t.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(t){return Object.assign(this.attributes,t),this.vertexArrayObject.bind(()=>{for(const r in t){const n=t[r];this._setAttribute(r,n)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.elements=t,this.elementsAccessor=r,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(t,r),this}setBuffer(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(r.target===34963)return this.setElementBuffer(r,n);const{location:i,accessor:o}=this._resolveLocationAndAccessor(t,r,r.accessor,n);return i>=0&&(this.values[i]=r,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,r,o)),this}setConstant(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{location:i,accessor:o}=this._resolveLocationAndAccessor(t,r,Object.assign({size:r.length},n));return i>=0&&(r=this.vertexArrayObject._normalizeConstantArrayValue(r),this.values[i]=r,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Pe(this.gl,{accessor:{size:4}});for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this.values[t]instanceof Pe&&(this.gl.disableVertexAttribArray(t),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(t,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++){const r=this.values[t];r instanceof Pe&&this.setBuffer(t,r)}}),this}bindForDraw(t,r,n){let i;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(t,r),i=n()}),i}_resolveLocationAndAccessor(t,r,n,i){const o={location:-1,accessor:null},{location:a,name:s}=this._getAttributeIndex(t);if(!Number.isFinite(a)||a<0)return this.unused[t]=r,Lt.once(3,()=>"unused value ".concat(t," in ").concat(this.id))(),o;const l=this._getAttributeInfo(s||a);if(!l)return o;const u=this.accessors[a]||{},c=En.resolve(l.accessor,u,n,i),{size:f,type:h}=c;return mt(Number.isFinite(f)&&Number.isFinite(h)),{location:a,accessor:c}}_getAttributeInfo(t){return this.configuration&&this.configuration.getAttributeInfo(t)}_getAttributeIndex(t){const r=Number(t);if(Number.isFinite(r))return{location:r};const n=R1t.exec(t),i=n?n[1]:t,o=n?Number(n[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(i)+o,name:i}:{location:-1}}_setAttribute(t,r){if(r instanceof Pe)this.setBuffer(t,r);else if(Array.isArray(r)&&r.length&&r[0]instanceof Pe){const n=r[0],i=r[1];this.setBuffer(t,n,i)}else if(ArrayBuffer.isView(r)||Array.isArray(r)){const n=r;this.setConstant(t,n)}else if(r.buffer instanceof Pe){const n=r;this.setBuffer(t,n.buffer,n)}else throw new Error(O1t)}_setConstantAttributes(t,r){const n=Math.max(t|0,r|0);let i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,n);for(let o=1;o<this.vertexArrayObject.MAX_ATTRIBUTES;o++)i=this.values[o],ArrayBuffer.isView(i)&&this._setConstantAttribute(o,i)}_setConstantAttributeZero(t,r){if(Pn.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,t);return}const n=this.vertexArrayObject.getConstantBuffer(r,t);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}_setConstantAttribute(t,r){Pn.setConstant(this.gl,t,r)}_updateDrawParams(){const t={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let r=0;r<this.vertexArrayObject.MAX_ATTRIBUTES;r++)this._updateDrawParamsForLocation(t,r);return this.elements&&(t.elementCount=this.elements.getElementCount(this.elements.accessor),t.isIndexed=!0,t.indexType=this.elementsAccessor.type||this.elements.accessor.type,t.indexOffset=this.elementsAccessor.offset||0),t.indexCount===1/0&&(t.indexCount=0),t.vertexCount===1/0&&(t.vertexCount=0),t.instanceCount===1/0&&(t.instanceCount=0),t}_updateDrawParamsForLocation(t,r){const n=this.values[r],i=this.accessors[r];if(!n)return;const{divisor:o}=i,a=o>0;if(t.isInstanced=t.isInstanced||a,n instanceof Pe){const s=n;if(a){const l=s.getVertexCount(i);t.instanceCount=Math.min(t.instanceCount,l)}else{const l=s.getVertexCount(i);t.vertexCount=Math.min(t.vertexCount,l)}}}setElements(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Lt.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(t,r)}}function F1t(e,t){const{maxElts:r=16,size:n=1}=t;let i="[";for(let a=0;a<e.length&&a<r;++a)a>0&&(i+=",".concat(a%n===0?" ":"")),i+=d0(e[a],t);const o=e.length>r?"...":"]";return"".concat(i).concat(o)}function d0(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=1e-16,{isInteger:n=!1}=t;if(Array.isArray(e)||ArrayBuffer.isView(e))return F1t(e,t);if(!Number.isFinite(e))return String(e);if(Math.abs(e)<r)return n?"0":"0.";if(n||Math.abs(e)>100&&Math.abs(e)<1e4)return e.toFixed(0);const i=e.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function lL(e){let{header:t="Uniforms",program:r,uniforms:n,undefinedOnly:i=!1}=e;mt(r);const o=".*_.*",a=".*Matrix",s=r._uniformSetters,l={},u=Object.keys(s).sort();let c=0;for(const d of u)!d.match(o)&&!d.match(a)&&gb({table:l,header:t,uniforms:n,uniformName:d,undefinedOnly:i})&&c++;for(const d of u)d.match(a)&&gb({table:l,header:t,uniforms:n,uniformName:d,undefinedOnly:i})&&c++;for(const d of u)l[d]||gb({table:l,header:t,uniforms:n,uniformName:d,undefinedOnly:i})&&c++;let f=0;const h={};if(!i)for(const d in n){const p=n[d];l[d]||(f++,h[d]={Type:"NOT USED: ".concat(p),[t]:d0(p)})}return{table:l,count:c,unusedTable:h,unusedCount:f}}function gb(e){let{table:t,header:r,uniforms:n,uniformName:i,undefinedOnly:o}=e;const a=n[i],s=B1t(a);return!o||!s?(t[i]={[r]:s?d0(a):"N/A","Uniform Type":s?a:"NOT PROVIDED"},!0):!1}function B1t(e){return e!=null}function $1t(e){let{vertexArray:t,header:r="Attributes"}=e;if(!t.configuration)return{};const n={};t.elements&&(n.ELEMENT_ARRAY_BUFFER=uL(t,t.elements,null,r));const i=t.values;for(const o in i){const a=t._getAttributeInfo(o);if(a){let s="".concat(o,": ").concat(a.name);const l=t.accessors[a.location];l&&(s="".concat(o,": ").concat(z1t(a.name,l))),n[s]=uL(t,i[o],l,r)}}return n}function uL(e,t,r,n){const{gl:i}=e;if(!t)return{[n]:"null","Format ":"N/A"};let o="NOT PROVIDED",a=1,s=0,l=0,u,c,f;if(r&&(o=r.type,a=r.size,o=String(o).replace("Array",""),u=o.indexOf("nt")!==-1),t instanceof Pe){const h=t,{data:d,changed:p}=h.getDebugData();c=p?"*":"",f=d,l=h.byteLength,s=l/d.BYTES_PER_ELEMENT/a;let v;if(r){const g=r.divisor>0;v="".concat(g?"I ":"P "," ").concat(s," (x").concat(a,"=").concat(l," bytes ").concat(Ps(i,o),")")}else u=!0,v="".concat(l," bytes");return{[n]:"".concat(c).concat(d0(f,{size:a,isInteger:u})),"Format ":v}}return f=t,a=t.length,o=String(t.constructor.name).replace("Array",""),u=o.indexOf("nt")!==-1,{[n]:"".concat(d0(f,{size:a,isInteger:u})," (constant)"),"Format ":"".concat(a,"x").concat(o," (constant)")}}function z1t(e,t){const{type:r,size:n}=t,i=lz(r,n);return i?"".concat(e," (").concat(i.name,")"):e}function V1t(e){const t={},r="Accessors for ".concat(e.id);for(const n of e.attributeInfos)if(n){const i=cL(n);t["in ".concat(i)]={[r]:JSON.stringify(n.accessor)}}for(const n of e.varyingInfos)if(n){const i=cL(n);t["out ".concat(i)]={[r]:JSON.stringify(n.accessor)}}return t}function cL(e){const{type:t,size:r}=e.accessor,n=lz(t,r);return n?"".concat(n.name," ").concat(e.name):e.name}const fL=xa()&&typeof document<"u";let U1t=0;class G1t{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{onCreateContext:r=g=>Y$(g),onAddHTML:n=null,onInitialize:i=()=>{},onRender:o=()=>{},onFinalize:a=()=>{},onError:s,gl:l=null,glOptions:u={},debug:c=!1,createFramebuffer:f=!1,autoResizeViewport:h=!0,autoResizeDrawingBuffer:d=!0,stats:p=Rl.get("animation-loop-".concat(U1t++))}=t;let{useDevicePixels:v=!0}=t;"useDevicePixelRatio"in t&&(Lt.deprecated("useDevicePixelRatio","useDevicePixels")(),v=t.useDevicePixelRatio),this.props={onCreateContext:r,onAddHTML:n,onInitialize:i,onRender:o,onFinalize:a,onError:s,gl:l,glOptions:u,debug:c,createFramebuffer:f},this.gl=l,this.needsRedraw=null,this.timeline=null,this.stats=p,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:h,autoResizeDrawingBuffer:d,useDevicePixels:v}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(t){return mt(typeof t=="string"),this.needsRedraw=this.needsRedraw||t,this}setProps(t){return"autoResizeViewport"in t&&(this.autoResizeViewport=t.autoResizeViewport),"autoResizeDrawingBuffer"in t&&(this.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer),"useDevicePixels"in t&&(this.useDevicePixels=t.useDevicePixels),this}start(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._running)return this;this._running=!0;const r=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(t),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=a1.isSupported(this.gl,["timers"])?new a1(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(n=>{this._running&&(this._addCallbackData(n||{}),n!==!1&&this._startLoop())});return this.props.onError&&r.catch(this.props.onError),this}redraw(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(t){return this.timeline=t,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(t=>{this._resolveNextFrame=t})),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const n=document.getElementById(t);return n?Number(n.value):r}setViewParameters(){return Lt.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const t=()=>{!this._running||(this.redraw(),this._animationFrameId=this._requestAnimationFrame(t))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(t)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=fL?new Promise((t,r)=>{if(fL&&document.readyState==="complete"){t(document);return}window.addEventListener("load",()=>{t(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(t){this.display&&(this.display.delete(),this.display.animationLoop=null),t&&(t.animationLoop=this),this.display=t}_cancelAnimationFrame(t){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(t):Zgt(t)}_requestAnimationFrame(t){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(t):qgt(t)}_renderFrame(){if(this.display){this.display._renderFrame(...arguments);return}this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:t,height:r,aspect:n}=this._getSizeAndAspect();(t!==this.animationProps.width||r!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=r,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(t){typeof t=="object"&&t!==null&&(this.animationProps=Object.assign({},this.animationProps,t))}_createWebGLContext(t){if(this.offScreen=t.canvas&&typeof OffscreenCanvas<"u"&&t.canvas instanceof OffscreenCanvas,t=Object.assign({},t,this.props.glOptions),this.gl=this.props.gl?QE(this.props.gl,t):this.onCreateContext(t),!E_(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");Fgt(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const t=document.createElement("div");document.body.appendChild(t),t.style.position="relative";const r=document.createElement("div");r.style.position="absolute",r.style.left="10px",r.style.bottom="10px",r.style.width="300px",r.style.background="white",t.appendChild(this.gl.canvas),t.appendChild(r);const n=this.props.onAddHTML(r);n&&(r.innerHTML=n)}}_getSizeAndAspect(){const t=this.gl.drawingBufferWidth,r=this.gl.drawingBufferHeight;let n=1;const{canvas:i}=this.gl;return i&&i.clientHeight?n=i.clientWidth/i.clientHeight:t>0&&r>0&&(n=t/r),{width:t,height:r,aspect:n}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&Ugt(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new nr(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:t}=this.gl;t&&(t.addEventListener("mousemove",this._onMousemove),t.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(t){this.animationProps._mousePosition=[t.offsetX,t.offsetY]}_onMouseleave(t){this.animationProps._mousePosition=null}}const H0="vs",ok="fs";function xn(e,t){if(!e)throw new Error(t||"shadertools: assertion failed.")}const mb={number:{validate(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},array:{validate(e,t){return Array.isArray(e)||ArrayBuffer.isView(e)}}};function j1t(e){const t={};for(const r in e){const n=e[r],i=W1t(n);t[r]=i}return t}function W1t(e){let t=hL(e);return t==="object"?e?"type"in e?Object.assign({},e,mb[e.type]):"value"in e?(t=hL(e.value),Object.assign({type:t},e,mb[t])):{type:"object",value:e}:{type:"object",value:null}:Object.assign({type:t,value:e},mb[t])}function hL(e){return Array.isArray(e)||ArrayBuffer.isView(e)?"array":typeof e}const H1t="vs",X1t="fs";class dL{constructor(t){let{name:r,vs:n,fs:i,dependencies:o=[],uniforms:a,getUniforms:s,deprecations:l=[],defines:u={},inject:c={},vertexShader:f,fragmentShader:h}=t;xn(typeof r=="string"),this.name=r,this.vs=n||f,this.fs=i||h,this.getModuleUniforms=s,this.dependencies=o,this.deprecations=this._parseDeprecationDefinitions(l),this.defines=u,this.injections=Y1t(c),a&&(this.uniforms=j1t(a))}getModuleSource(t){let r;switch(t){case H1t:r=this.vs||"";break;case X1t:r=this.fs||"";break;default:xn(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),`
`).concat(r,"// END MODULE_").concat(this.name,`

`)}getUniforms(t,r){return this.getModuleUniforms?this.getModuleUniforms(t,r):this.uniforms?this._defaultGetUniforms(t):{}}getDefines(){return this.defines}checkDeprecations(t,r){this.deprecations.forEach(n=>{n.regex.test(t)&&(n.deprecated?r.deprecated(n.old,n.new)():r.removed(n.old,n.new)())})}_parseDeprecationDefinitions(t){return t.forEach(r=>{switch(r.type){case"function":r.regex=new RegExp("\\b".concat(r.old,"\\("));break;default:r.regex=new RegExp("".concat(r.type," ").concat(r.old,";"))}}),t}_defaultGetUniforms(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r={},n=this.uniforms;for(const i in n){const o=n[i];i in t&&!o.private?(o.validate&&xn(o.validate(t[i],o),"".concat(this.name,": invalid ").concat(i)),r[i]=t[i]):r[i]=o.value}return r}}function Y1t(e){const t={vs:{},fs:{}};for(const r in e){let n=e[r];const i=r.slice(0,2);typeof n=="string"&&(n={order:0,injection:n}),t[i][r]=n}return t}function q1t(e){return Z1t(hz(e))}function Z1t(e){const t={},r={};return fz({modules:e,level:0,moduleMap:t,moduleDepth:r}),Object.keys(r).sort((n,i)=>r[i]-r[n]).map(n=>t[n])}function fz(e){let{modules:t,level:r,moduleMap:n,moduleDepth:i}=e;if(r>=5)throw new Error("Possible loop in shader dependency graph");for(const o of t)n[o.name]=o,(i[o.name]===void 0||i[o.name]<r)&&(i[o.name]=r);for(const o of t)o.dependencies&&fz({modules:o.dependencies,level:r+1,moduleMap:n,moduleDepth:i})}function hz(e,t){return e.map(r=>(r instanceof dL||(xn(typeof r!="string","Shader module use by name is deprecated. Import shader module '".concat(r,"' and use it directly.")),xn(r.name,"shader module has no name"),r=new dL(r),r.dependencies=hz(r.dependencies)),r))}function K1t(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=typeof window<"u"?window.navigator||{}:{},r=e.userAgent||t.userAgent||"",n=r.indexOf("MSIE ")!==-1,i=r.indexOf("Trident/")!==-1;return n||i}const J1t=7936,Q1t=7937,t_t=7938,e_t=35724,ak={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},El={};Object.keys(ak).forEach(e=>{El[e]=e});function r_t(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:Boolean(e&&e._version===2)}function n_t(e){const t=e.getExtension("WEBGL_debug_renderer_info"),r=e.getParameter(t&&t.UNMASKED_VENDOR_WEBGL||J1t),n=e.getParameter(t&&t.UNMASKED_RENDERER_WEBGL||Q1t);return{gpuVendor:i_t(r,n),vendor:r,renderer:n,version:e.getParameter(t_t),shadingLanguageVersion:e.getParameter(e_t)}}function i_t(e,t){return e.match(/NVIDIA/i)||t.match(/NVIDIA/i)?"NVIDIA":e.match(/INTEL/i)||t.match(/INTEL/i)?"INTEL":e.match(/AMD/i)||t.match(/AMD/i)||e.match(/ATI/i)||t.match(/ATI/i)?"AMD":"UNKNOWN GPU"}const _b={};function pL(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=ak[t];if(xn(n,t),!K1t(r))return!0;if(t in _b)return _b[t];const i=n[0],o=r.behavior||"enable",a="#extension GL_".concat(i," : ").concat(o,`
void main(void) {}`),s=e.createShader(35633);e.shaderSource(s,a),e.compileShader(s);const l=e.getShaderParameter(s,35713);return e.deleteShader(s),_b[t]=l,l}function o_t(e,t){const r=ak[t];xn(r,t);const n=r_t(e)&&r[1]||r[0],i=typeof n=="string"?Boolean(e.getExtension(n)):n;return xn(i===!1||i===!0),i}function bv(e,t){return t=Array.isArray(t)?t:[t],t.every(r=>o_t(e,r))}function a_t(e){switch(n_t(e).gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function s_t(e,t,r){let n=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return bv(e,El.GLSL_FRAG_DEPTH)&&(n+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),bv(e,El.GLSL_DERIVATIVES)&&pL(e,El.GLSL_DERIVATIVES)&&(n+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),bv(e,El.GLSL_FRAG_DATA)&&pL(e,El.GLSL_FRAG_DATA,{behavior:"require"})&&(n+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),bv(e,El.GLSL_TEXTURE_LOD)&&(n+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),n}const l_t=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,u_t=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,c_t={[H0]:l_t,[ok]:u_t},em="__LUMA_INJECT_DECLARATIONS__",vL=/void\s+main\s*\([^)]*\)\s*\{\n?/,gL=/}\n?[^{}]*$/,yb=[];function mL(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=t===H0;for(const o in r){const a=r[o];a.sort((l,u)=>l.order-u.order),yb.length=a.length;for(let l=0,u=a.length;l<u;++l)yb[l]=a[l].injection;const s="".concat(yb.join(`
`),`
`);switch(o){case"vs:#decl":i&&(e=e.replace(em,s));break;case"vs:#main-start":i&&(e=e.replace(vL,l=>l+s));break;case"vs:#main-end":i&&(e=e.replace(gL,l=>s+l));break;case"fs:#decl":i||(e=e.replace(em,s));break;case"fs:#main-start":i||(e=e.replace(vL,l=>l+s));break;case"fs:#main-end":i||(e=e.replace(gL,l=>s+l));break;default:e=e.replace(o,l=>l+s)}}return e=e.replace(em,""),n&&(e=e.replace(/\}\s*$/,o=>o+c_t[t])),e}function X3(e){const t={};return xn(Array.isArray(e)&&e.length>1),e.forEach(r=>{for(const n in r)t[n]=t[n]?"".concat(t[n],`
`).concat(r[n]):r[n]}),t}function rf(e){return new RegExp("\\b".concat(e,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const dz=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],f_t=[...dz,[rf("attribute"),"in $1"],[rf("varying"),"out $1"]],h_t=[...dz,[rf("varying"),"in $1"]],pz=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],d_t=[...pz,[rf("in"),"attribute $1"],[rf("out"),"varying $1"]],p_t=[...pz,[rf("in"),"varying $1"]],Y3="gl_FragColor",q3=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,v_t=/void\s+main\s*\([^)]*\)\s*\{\n?/;function g_t(e,t,r){switch(t){case 300:return r?s1(e,f_t):m_t(e);case 100:return r?s1(e,d_t):__t(e);default:throw new Error("unknown GLSL version ".concat(t))}}function s1(e,t){for(const[r,n]of t)e=e.replace(r,n);return e}function m_t(e){e=s1(e,h_t);const t=e.match(q3);if(t){const r=t[1];e=e.replace(new RegExp("\\b".concat(Y3,"\\b"),"g"),r)}else{const r="fragmentColor";e=e.replace(v_t,n=>"out vec4 ".concat(r,`;
`).concat(n)).replace(new RegExp("\\b".concat(Y3,"\\b"),"g"),r)}return e}function __t(e){e=s1(e,p_t);const t=e.match(q3);if(t){const r=t[1];e=e.replace(q3,"").replace(new RegExp("\\b".concat(r,"\\b"),"g"),Y3)}return e}const y_t=`

`.concat(em,`

`),vz={[H0]:"vertex",[ok]:"fragment"},b_t=`precision highp float;

`;function w_t(e,t){const{vs:r,fs:n}=t,i=q1t(t.modules||[]);return{gl:e,vs:_L(e,Object.assign({},t,{source:r,type:H0,modules:i})),fs:_L(e,Object.assign({},t,{source:n,type:ok,modules:i})),getUniforms:S_t(i)}}function _L(e,t){let{id:r,source:n,type:i,modules:o,defines:a={},hookFunctions:s=[],inject:l={},transpileToGLSL100:u=!1,prologue:c=!0,log:f}=t;xn(typeof n=="string","shader source must be a string");const h=i===H0,d=n.split(`
`);let p=100,v="",g=n;d[0].indexOf("#version ")===0?(p=300,v=d[0],g=d.slice(1).join(`
`)):v="#version ".concat(p);const m={};o.forEach(P=>{Object.assign(m,P.getDefines())}),Object.assign(m,a);let _=c?"".concat(v,`
`).concat(P_t({id:r,source:n,type:i}),`
`).concat(T_t({type:i}),`
`).concat(a_t(e),`
`).concat(s_t(e),`
`).concat(E_t(m),`
`).concat(h?"":b_t,`
`):"".concat(v,`
`);const y=A_t(s),w={},T={},S={};for(const P in l){const A=typeof l[P]=="string"?{injection:l[P],order:0}:l[P],k=P.match(/^(v|f)s:(#)?([\w-]+)$/);if(k){const C=k[2],M=k[3];C?M==="decl"?T[P]=[A]:S[P]=[A]:w[P]=[A]}else S[P]=[A]}for(const P of o){f&&P.checkDeprecations(g,f),_+=P.getModuleSource(i,p);const k=P.injections[i];for(const C in k){const M=C.match(/^(v|f)s:#([\w-]+)$/);if(M){const B=M[2]==="decl"?T:S;B[C]=B[C]||[],B[C].push(k[C])}else w[C]=w[C]||[],w[C].push(k[C])}}return _+=y_t,_=mL(_,i,T),_+=k_t(y[i],w),_+=g,_=mL(_,i,S),_=g_t(_,u?100:p,h),_}function S_t(e){return function(r){const n={};for(const i of e){const o=i.getUniforms(r,n);Object.assign(n,o)}return n}}function T_t(e){let{type:t}=e;return`
#define SHADER_TYPE_`.concat(vz[t].toUpperCase(),`
`)}function P_t(e){let{id:t,source:r,type:n}=e;return t&&typeof t=="string"&&r.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME `.concat(t,"_").concat(vz[n],`

`):""}function E_t(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=0,r="";for(const n in e){t===0&&(r+=`
// APPLICATION DEFINES
`),t++;const i=e[n];(i||Number.isFinite(i))&&(r+="#define ".concat(n.toUpperCase()," ").concat(e[n],`
`))}return t===0&&(r+=`
`),r}function k_t(e,t){let r="";for(const n in e){const i=e[n];if(r+="void ".concat(i.signature,` {
`),i.header&&(r+="  ".concat(i.header)),t[n]){const o=t[n];o.sort((a,s)=>a.order-s.order);for(const a of o)r+="  ".concat(a.injection,`
`)}i.footer&&(r+="  ".concat(i.footer)),r+=`}
`}return r}function A_t(e){const t={vs:{},fs:{}};return e.forEach(r=>{let n;typeof r!="string"?(n=r,r=n.hook):n={},r=r.trim();const[i,o]=r.split(":"),a=r.replace(/\(.+/,"");t[i][a]=Object.assign(n,{signature:o})}),t}const C_t="void main() {gl_FragColor = vec4(0);}",gz=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,M_t=`#version 300 es
`.concat(gz);function mz(e,t){t=Array.isArray(t)?t:[t];const r=e.replace(/^\s+/,"").split(/\s+/),[n,i,o]=r;if(!t.includes(n)||!i||!o)return null;const a=o.split(";")[0];return{qualifier:n,type:i,name:a}}function _z(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{version:t=100,input:r,inputType:n,output:i}=e;if(!r)return t===300?M_t:t>300?"#version ".concat(t,`
`).concat(gz):C_t;const o=I_t(r,n);return t>=300?"#version ".concat(t," ").concat(t===300?"es":"",`
in `).concat(n," ").concat(r,`;
out vec4 `).concat(i,`;
void main() {
  `).concat(i," = ").concat(o,`;
}`):"varying ".concat(n," ").concat(r,`;
void main() {
  gl_FragColor = `).concat(o,`;
}`)}function x_t(e){switch(e){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return xn(!1),null}}function L_t(e){switch(e){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return xn(!1),null}}function I_t(e,t){switch(t){case"float":return"vec4(".concat(e,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(e,", 0.0, 1.0)");case"vec3":return"vec4(".concat(e,", 1.0)");case"vec4":return e;default:return xn(!1),null}}const O_t=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,R_t={name:"fp32",vs:O_t,fs:null};function p0(e,t){if(!e)throw new Error("math.gl assertion ".concat(t))}const tn={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function D_t(e,{precision:t=tn.precision}={}){return e=N_t(e),"".concat(parseFloat(e.toPrecision(t)))}function ou(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Tr(e,t,r){return B_t(e,n=>Math.max(t,Math.min(r,n)))}function Wl(e,t,r){return ou(e)?e.map((n,i)=>Wl(n,t[i],r)):r*t+(1-r)*e}function Ao(e,t,r){const n=tn.EPSILON;r&&(tn.EPSILON=r);try{if(e===t)return!0;if(ou(e)&&ou(t)){if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(!Ao(e[i],t[i]))return!1;return!0}return e&&e.equals?e.equals(t):t&&t.equals?t.equals(e):typeof e=="number"&&typeof t=="number"?Math.abs(e-t)<=tn.EPSILON*Math.max(1,Math.abs(e),Math.abs(t)):!1}finally{tn.EPSILON=n}}function N_t(e){return Math.round(e/tn.EPSILON)*tn.EPSILON}function F_t(e){return e.clone?e.clone():new Array(e.length)}function B_t(e,t,r){if(ou(e)){const n=e;r=r||F_t(n);for(let i=0;i<r.length&&i<n.length;++i)r[i]=t(e[i],i,r);return r}return t(e)}function $_t(e){function t(){var r=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(r,Object.getPrototypeOf(this)),r}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}class sk extends $_t(Array){clone(){return new this.constructor().copy(this)}fromArray(t,r=0){for(let n=0;n<this.ELEMENTS;++n)this[n]=t[n+r];return this.check()}toArray(t=[],r=0){for(let n=0;n<this.ELEMENTS;++n)t[r+n]=this[n];return t}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}to(t){return t===this?this:ou(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(tn)}formatString(t){let r="";for(let n=0;n<this.ELEMENTS;++n)r+=(n>0?", ":"")+D_t(this[n],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(r,"]")}equals(t){if(!t||this.length!==t.length)return!1;for(let r=0;r<this.ELEMENTS;++r)if(!Ao(this[r],t[r]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let r=0;r<this.ELEMENTS;++r)if(this[r]!==t[r])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,r,n){if(n===void 0)return this.lerp(this,t,r);for(let i=0;i<this.ELEMENTS;++i){const o=t[i];this[i]=o+n*(r[i]-o)}return this.check()}min(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(t[r],this[r]);return this.check()}max(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.max(t[r],this[r]);return this.check()}clamp(t,r){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t[n]),r[n]);return this.check()}add(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]+=r[n];return this.check()}subtract(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]-=r[n];return this.check()}scale(t){if(typeof t=="number")for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;else for(let r=0;r<this.ELEMENTS&&r<t.length;++r)this[r]*=t[r];return this.check()}multiplyByScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;return this.check()}check(){if(tn.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let t=this.length===this.ELEMENTS;for(let r=0;r<this.ELEMENTS;++r)t=t&&Number.isFinite(this[r]);return t}sub(t){return this.subtract(t)}setScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=t;return this.check()}addScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;return this.check()}divideScalar(t){return this.multiplyByScalar(1/t)}clampScalar(t,r){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t),r);return this.check()}get elements(){return this}}function z_t(e,t){if(e.length!==t)return!1;for(let r=0;r<e.length;++r)if(!Number.isFinite(e[r]))return!1;return!0}function Me(e){if(!Number.isFinite(e))throw new Error("Invalid number ".concat(e));return e}function Od(e,t,r=""){if(tn.debug&&!z_t(e,t))throw new Error("math.gl: ".concat(r," some fields set to invalid numbers'"));return e}class yz extends sk{get x(){return this[0]}set x(t){this[0]=Me(t)}get y(){return this[1]}set y(t){this[1]=Me(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let r=0;r<this.ELEMENTS;++r)t+=this[r]*this[r];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let r=0;for(let n=0;n<this.ELEMENTS;++n){const i=this[n]-t[n];r+=i*i}return Me(r)}dot(t){let r=0;for(let n=0;n<this.ELEMENTS;++n)r+=this[n]*t[n];return Me(r)}normalize(){const t=this.magnitude();if(t!==0)for(let r=0;r<this.ELEMENTS;++r)this[r]/=t;return this.check()}multiply(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]*=r[n];return this.check()}divide(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]/=r[n];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return p0(t>=0&&t<this.ELEMENTS,"index is out of range"),Me(this[t])}setComponent(t,r){return p0(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=r,this.check()}addVectors(t,r){return this.copy(t).add(r)}subVectors(t,r){return this.copy(t).subtract(r)}multiplyVectors(t,r){return this.copy(t).multiply(r)}addScaledVector(t,r){return this.add(new this.constructor(t).multiplyScalar(r))}}var Rd=1e-6,$i=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function V_t(){var e=new $i(2);return $i!=Float32Array&&(e[0]=0,e[1]=0),e}function l1(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function bz(e,t){return e[0]=-t[0],e[1]=-t[1],e}function wz(e,t,r,n){var i=t[0],o=t[1];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e}function U_t(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[3]*i+r[6],e[1]=r[1]*n+r[4]*i+r[7],e}function G_t(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e}(function(){var e=V_t();return function(t,r,n,i,o,a){var s,l;for(r||(r=2),n||(n=0),i?l=Math.min(i*r+n,t.length):l=t.length,s=n;s<l;s+=r)e[0]=t[s],e[1]=t[s+1],o(e,e,a),t[s]=e[0],t[s+1]=e[1];return t}})();function j_t(e,t,r){const n=t[0],i=t[1],o=r[3]*n+r[7]*i||1;return e[0]=(r[0]*n+r[4]*i)/o,e[1]=(r[1]*n+r[5]*i)/o,e}function Sz(e,t,r){const n=t[0],i=t[1],o=t[2],a=r[3]*n+r[7]*i+r[11]*o||1;return e[0]=(r[0]*n+r[4]*i+r[8]*o)/a,e[1]=(r[1]*n+r[5]*i+r[9]*o)/a,e[2]=(r[2]*n+r[6]*i+r[10]*o)/a,e}function W_t(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e[2]=t[2],e}function H_t(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e[2]=t[2],e[3]=t[3],e}function Tz(e,t,r){const n=t[0],i=t[1],o=t[2];return e[0]=r[0]*n+r[3]*i+r[6]*o,e[1]=r[1]*n+r[4]*i+r[7]*o,e[2]=r[2]*n+r[5]*i+r[8]*o,e[3]=t[3],e}function Pz(){var e=new $i(3);return $i!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function X_t(e){var t=e[0],r=e[1],n=e[2];return Math.hypot(t,r,n)}function yL(e,t,r){var n=new $i(3);return n[0]=e,n[1]=t,n[2]=r,n}function Y_t(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function q_t(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n}function Z_t(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function K_t(e,t){var r=t[0],n=t[1],i=t[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function Ez(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function rm(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0],s=r[1],l=r[2];return e[0]=i*l-o*s,e[1]=o*a-n*l,e[2]=n*s-i*a,e}function J_t(e,t,r,n){var i=t[0],o=t[1],a=t[2];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e[2]=a+n*(r[2]-a),e}function lk(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[3]*n+r[7]*i+r[11]*o+r[15];return a=a||1,e[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/a,e[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/a,e[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/a,e}function kz(e,t,r){var n=t[0],i=t[1],o=t[2];return e[0]=n*r[0]+i*r[3]+o*r[6],e[1]=n*r[1]+i*r[4]+o*r[7],e[2]=n*r[2]+i*r[5]+o*r[8],e}function Az(e,t,r){var n=r[0],i=r[1],o=r[2],a=r[3],s=t[0],l=t[1],u=t[2],c=i*u-o*l,f=o*s-n*u,h=n*l-i*s,d=i*h-o*f,p=o*c-n*h,v=n*f-i*c,g=a*2;return c*=g,f*=g,h*=g,d*=2,p*=2,v*=2,e[0]=s+c+d,e[1]=l+f+p,e[2]=u+h+v,e}function Q_t(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function tyt(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function eyt(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function ryt(e,t){var r=e[0],n=e[1],i=e[2],o=t[0],a=t[1],s=t[2],l=Math.sqrt(r*r+n*n+i*i),u=Math.sqrt(o*o+a*a+s*s),c=l*u,f=c&&Ez(e,t)/c;return Math.acos(Math.min(Math.max(f,-1),1))}var Cz=Y_t,Mz=X_t,bb=q_t;(function(){var e=Pz();return function(t,r,n,i,o,a){var s,l;for(r||(r=3),n||(n=0),i?l=Math.min(i*r+n,t.length):l=t.length,s=n;s<l;s+=r)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2];return t}})();const wb=[0,0,0];let wv;class bt extends yz{static get ZERO(){return wv||(wv=new bt(0,0,0),Object.freeze(wv)),wv}constructor(t=0,r=0,n=0){super(-0,-0,-0),arguments.length===1&&ou(t)?this.copy(t):(tn.debug&&(Me(t),Me(r),Me(n)),this[0]=t,this[1]=r,this[2]=n)}set(t,r,n){return this[0]=t,this[1]=r,this[2]=n,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}fromObject(t){return tn.debug&&(Me(t.x),Me(t.y),Me(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}get ELEMENTS(){return 3}get z(){return this[2]}set z(t){this[2]=Me(t)}angle(t){return ryt(this,t)}cross(t){return rm(this,this,t),this.check()}rotateX({radians:t,origin:r=wb}){return Q_t(this,this,r,t),this.check()}rotateY({radians:t,origin:r=wb}){return tyt(this,this,r,t),this.check()}rotateZ({radians:t,origin:r=wb}){return eyt(this,this,r,t),this.check()}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return lk(this,this,t),this.check()}transformAsVector(t){return Sz(this,this,t),this.check()}transformByMatrix3(t){return kz(this,this,t),this.check()}transformByMatrix2(t){return W_t(this,this,t),this.check()}transformByQuaternion(t){return Az(this,this,t),this.check()}}let Sv;class uk extends yz{static get ZERO(){return Sv||(Sv=new uk(0,0,0,0),Object.freeze(Sv)),Sv}constructor(t=0,r=0,n=0,i=0){super(-0,-0,-0,-0),ou(t)&&arguments.length===1?this.copy(t):(tn.debug&&(Me(t),Me(r),Me(n),Me(i)),this[0]=t,this[1]=r,this[2]=n,this[3]=i)}set(t,r,n,i){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}fromObject(t){return tn.debug&&(Me(t.x),Me(t.y),Me(t.z),Me(t.w)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t.w=this[3],t}get ELEMENTS(){return 4}get z(){return this[2]}set z(t){this[2]=Me(t)}get w(){return this[3]}set w(t){this[3]=Me(t)}transform(t){return lk(this,this,t),this.check()}transformByMatrix3(t){return Tz(this,this,t),this.check()}transformByMatrix2(t){return H_t(this,this,t),this.check()}transformByQuaternion(t){return Az(this,this,t),this.check()}applyMatrix4(t){return t.transform(this,this),this}}class xz extends sk{toString(){let t="[";if(tn.printRowMajor){t+="row-major:";for(let r=0;r<this.RANK;++r)for(let n=0;n<this.RANK;++n)t+=" ".concat(this[n*this.RANK+r])}else{t+="column-major:";for(let r=0;r<this.ELEMENTS;++r)t+=" ".concat(this[r])}return t+="]",t}getElementIndex(t,r){return r*this.RANK+t}getElement(t,r){return this[r*this.RANK+t]}setElement(t,r,n){return this[r*this.RANK+t]=Me(n),this}getColumn(t,r=new Array(this.RANK).fill(-0)){const n=t*this.RANK;for(let i=0;i<this.RANK;++i)r[i]=this[n+i];return r}setColumn(t,r){const n=t*this.RANK;for(let i=0;i<this.RANK;++i)this[n+i]=r[i];return this}}function nyt(){var e=new $i(9);return $i!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function iyt(e,t){if(e===t){var r=t[1],n=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=n,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function oyt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=c*a-s*u,h=-c*o+s*l,d=u*o-a*l,p=r*f+n*h+i*d;return p?(p=1/p,e[0]=f*p,e[1]=(-c*n+i*u)*p,e[2]=(s*n-i*a)*p,e[3]=h*p,e[4]=(c*r-i*l)*p,e[5]=(-s*r+i*o)*p,e[6]=d*p,e[7]=(-u*r+n*l)*p,e[8]=(a*r-n*o)*p,e):null}function ayt(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8];return t*(u*o-a*l)+r*(-u*i+a*s)+n*(l*i-o*s)}function bL(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=r[0],d=r[1],p=r[2],v=r[3],g=r[4],m=r[5],_=r[6],y=r[7],w=r[8];return e[0]=h*n+d*a+p*u,e[1]=h*i+d*s+p*c,e[2]=h*o+d*l+p*f,e[3]=v*n+g*a+m*u,e[4]=v*i+g*s+m*c,e[5]=v*o+g*l+m*f,e[6]=_*n+y*a+w*u,e[7]=_*i+y*s+w*c,e[8]=_*o+y*l+w*f,e}function syt(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=r[0],d=r[1];return e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=h*n+d*a+u,e[7]=h*i+d*s+c,e[8]=h*o+d*l+f,e}function lyt(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=Math.sin(r),d=Math.cos(r);return e[0]=d*n+h*a,e[1]=d*i+h*s,e[2]=d*o+h*l,e[3]=d*a-h*n,e[4]=d*s-h*i,e[5]=d*l-h*o,e[6]=u,e[7]=c,e[8]=f,e}function wL(e,t,r){var n=r[0],i=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function uyt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r+r,s=n+n,l=i+i,u=r*a,c=n*a,f=n*s,h=i*a,d=i*s,p=i*l,v=o*a,g=o*s,m=o*l;return e[0]=1-f-p,e[3]=c-m,e[6]=h+g,e[1]=c+m,e[4]=1-u-p,e[7]=d-v,e[2]=h-g,e[5]=d+v,e[8]=1-u-f,e}var Z3;(function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL1ROW0=3]="COL1ROW0",e[e.COL1ROW1=4]="COL1ROW1",e[e.COL1ROW2=5]="COL1ROW2",e[e.COL2ROW0=6]="COL2ROW0",e[e.COL2ROW1=7]="COL2ROW1",e[e.COL2ROW2=8]="COL2ROW2"})(Z3||(Z3={}));const cyt=Object.freeze([1,0,0,0,1,0,0,0,1]);class Er extends xz{static get IDENTITY(){return hyt()}static get ZERO(){return fyt()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return Z3}constructor(t,...r){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(t)?this.copy(t):r.length>0?this.copy([t,...r]):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this.check()}identity(){return this.copy(cyt)}fromObject(t){return this.check()}fromQuaternion(t){return uyt(this,t),this.check()}set(t,r,n,i,o,a,s,l,u){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this[4]=o,this[5]=a,this[6]=s,this[7]=l,this[8]=u,this.check()}setRowMajor(t,r,n,i,o,a,s,l,u){return this[0]=t,this[1]=i,this[2]=s,this[3]=r,this[4]=o,this[5]=l,this[6]=n,this[7]=a,this[8]=u,this.check()}determinant(){return ayt(this)}transpose(){return iyt(this,this),this.check()}invert(){return oyt(this,this),this.check()}multiplyLeft(t){return bL(this,t,this),this.check()}multiplyRight(t){return bL(this,this,t),this.check()}rotate(t){return lyt(this,this,t),this.check()}scale(t){return Array.isArray(t)?wL(this,this,t):wL(this,this,[t,t]),this.check()}translate(t){return syt(this,this,t),this.check()}transform(t,r){let n;switch(t.length){case 2:n=U_t(r||[-0,-0],t,this);break;case 3:n=kz(r||[-0,-0,-0],t,this);break;case 4:n=Tz(r||[-0,-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Od(n,t.length),n}transformVector(t,r){return this.transform(t,r)}transformVector2(t,r){return this.transform(t,r)}transformVector3(t,r){return this.transform(t,r)}}let Tv,Pv;function fyt(){return Tv||(Tv=new Er([0,0,0,0,0,0,0,0,0]),Object.freeze(Tv)),Tv}function hyt(){return Pv||(Pv=new Er,Object.freeze(Pv)),Pv}function dyt(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function pyt(e,t){if(e===t){var r=t[1],n=t[2],i=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function K3(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],h=t[10],d=t[11],p=t[12],v=t[13],g=t[14],m=t[15],_=r*s-n*a,y=r*l-i*a,w=r*u-o*a,T=n*l-i*s,S=n*u-o*s,P=i*u-o*l,A=c*v-f*p,k=c*g-h*p,C=c*m-d*p,M=f*g-h*v,D=f*m-d*v,B=h*m-d*g,V=_*B-y*D+w*M+T*C-S*k+P*A;return V?(V=1/V,e[0]=(s*B-l*D+u*M)*V,e[1]=(i*D-n*B-o*M)*V,e[2]=(v*P-g*S+m*T)*V,e[3]=(h*S-f*P-d*T)*V,e[4]=(l*C-a*B-u*k)*V,e[5]=(r*B-i*C+o*k)*V,e[6]=(g*w-p*P-m*y)*V,e[7]=(c*P-h*w+d*y)*V,e[8]=(a*D-s*C+u*A)*V,e[9]=(n*C-r*D-o*A)*V,e[10]=(p*S-v*w+m*_)*V,e[11]=(f*w-c*S-d*_)*V,e[12]=(s*k-a*M-l*A)*V,e[13]=(r*M-n*k+i*A)*V,e[14]=(v*y-p*T-g*_)*V,e[15]=(c*T-f*y+h*_)*V,e):null}function vyt(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],f=e[10],h=e[11],d=e[12],p=e[13],v=e[14],g=e[15],m=t*a-r*o,_=t*s-n*o,y=t*l-i*o,w=r*s-n*a,T=r*l-i*a,S=n*l-i*s,P=u*p-c*d,A=u*v-f*d,k=u*g-h*d,C=c*v-f*p,M=c*g-h*p,D=f*g-h*v;return m*D-_*M+y*C+w*k-T*A+S*P}function Hl(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=t[9],d=t[10],p=t[11],v=t[12],g=t[13],m=t[14],_=t[15],y=r[0],w=r[1],T=r[2],S=r[3];return e[0]=y*n+w*s+T*f+S*v,e[1]=y*i+w*l+T*h+S*g,e[2]=y*o+w*u+T*d+S*m,e[3]=y*a+w*c+T*p+S*_,y=r[4],w=r[5],T=r[6],S=r[7],e[4]=y*n+w*s+T*f+S*v,e[5]=y*i+w*l+T*h+S*g,e[6]=y*o+w*u+T*d+S*m,e[7]=y*a+w*c+T*p+S*_,y=r[8],w=r[9],T=r[10],S=r[11],e[8]=y*n+w*s+T*f+S*v,e[9]=y*i+w*l+T*h+S*g,e[10]=y*o+w*u+T*d+S*m,e[11]=y*a+w*c+T*p+S*_,y=r[12],w=r[13],T=r[14],S=r[15],e[12]=y*n+w*s+T*f+S*v,e[13]=y*i+w*l+T*h+S*g,e[14]=y*o+w*u+T*d+S*m,e[15]=y*a+w*c+T*p+S*_,e}function u1(e,t,r){var n=r[0],i=r[1],o=r[2],a,s,l,u,c,f,h,d,p,v,g,m;return t===e?(e[12]=t[0]*n+t[4]*i+t[8]*o+t[12],e[13]=t[1]*n+t[5]*i+t[9]*o+t[13],e[14]=t[2]*n+t[6]*i+t[10]*o+t[14],e[15]=t[3]*n+t[7]*i+t[11]*o+t[15]):(a=t[0],s=t[1],l=t[2],u=t[3],c=t[4],f=t[5],h=t[6],d=t[7],p=t[8],v=t[9],g=t[10],m=t[11],e[0]=a,e[1]=s,e[2]=l,e[3]=u,e[4]=c,e[5]=f,e[6]=h,e[7]=d,e[8]=p,e[9]=v,e[10]=g,e[11]=m,e[12]=a*n+c*i+p*o+t[12],e[13]=s*n+f*i+v*o+t[13],e[14]=l*n+h*i+g*o+t[14],e[15]=u*n+d*i+m*o+t[15]),e}function ck(e,t,r){var n=r[0],i=r[1],o=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function gyt(e,t,r,n){var i=n[0],o=n[1],a=n[2],s=Math.hypot(i,o,a),l,u,c,f,h,d,p,v,g,m,_,y,w,T,S,P,A,k,C,M,D,B,V,N;return s<Rd?null:(s=1/s,i*=s,o*=s,a*=s,l=Math.sin(r),u=Math.cos(r),c=1-u,f=t[0],h=t[1],d=t[2],p=t[3],v=t[4],g=t[5],m=t[6],_=t[7],y=t[8],w=t[9],T=t[10],S=t[11],P=i*i*c+u,A=o*i*c+a*l,k=a*i*c-o*l,C=i*o*c-a*l,M=o*o*c+u,D=a*o*c+i*l,B=i*a*c+o*l,V=o*a*c-i*l,N=a*a*c+u,e[0]=f*P+v*A+y*k,e[1]=h*P+g*A+w*k,e[2]=d*P+m*A+T*k,e[3]=p*P+_*A+S*k,e[4]=f*C+v*M+y*D,e[5]=h*C+g*M+w*D,e[6]=d*C+m*M+T*D,e[7]=p*C+_*M+S*D,e[8]=f*B+v*V+y*N,e[9]=h*B+g*V+w*N,e[10]=d*B+m*V+T*N,e[11]=p*B+_*V+S*N,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function Lz(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],f=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+u*n,e[5]=a*i+c*n,e[6]=s*i+f*n,e[7]=l*i+h*n,e[8]=u*i-o*n,e[9]=c*i-a*n,e[10]=f*i-s*n,e[11]=h*i-l*n,e}function myt(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],l=t[3],u=t[8],c=t[9],f=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-u*n,e[1]=a*i-c*n,e[2]=s*i-f*n,e[3]=l*i-h*n,e[8]=o*n+u*i,e[9]=a*n+c*i,e[10]=s*n+f*i,e[11]=l*n+h*i,e}function Iz(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5],f=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+u*n,e[1]=a*i+c*n,e[2]=s*i+f*n,e[3]=l*i+h*n,e[4]=u*i-o*n,e[5]=c*i-a*n,e[6]=f*i-s*n,e[7]=h*i-l*n,e}function _yt(e,t){var r=t[0],n=t[1],i=t[2],o=t[4],a=t[5],s=t[6],l=t[8],u=t[9],c=t[10];return e[0]=Math.hypot(r,n,i),e[1]=Math.hypot(o,a,s),e[2]=Math.hypot(l,u,c),e}function yyt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r+r,s=n+n,l=i+i,u=r*a,c=n*a,f=n*s,h=i*a,d=i*s,p=i*l,v=o*a,g=o*s,m=o*l;return e[0]=1-f-p,e[1]=c+m,e[2]=h-g,e[3]=0,e[4]=c-m,e[5]=1-u-p,e[6]=d+v,e[7]=0,e[8]=h+g,e[9]=d-v,e[10]=1-u-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function byt(e,t,r,n,i,o,a){var s=1/(r-t),l=1/(i-n),u=1/(o-a);return e[0]=o*2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o*2*l,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(i+n)*l,e[10]=(a+o)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*u,e[15]=0,e}function wyt(e,t,r,n,i){var o=1/Math.tan(t/2),a;return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0?(a=1/(n-i),e[10]=(i+n)*a,e[14]=2*i*n*a):(e[10]=-1,e[14]=-2*n),e}var Syt=wyt;function Tyt(e,t,r,n,i,o,a){var s=1/(t-r),l=1/(n-i),u=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+r)*s,e[13]=(i+n)*l,e[14]=(a+o)*u,e[15]=1,e}var Pyt=Tyt;function Eyt(e,t,r,n){var i,o,a,s,l,u,c,f,h,d,p=t[0],v=t[1],g=t[2],m=n[0],_=n[1],y=n[2],w=r[0],T=r[1],S=r[2];return Math.abs(p-w)<Rd&&Math.abs(v-T)<Rd&&Math.abs(g-S)<Rd?dyt(e):(c=p-w,f=v-T,h=g-S,d=1/Math.hypot(c,f,h),c*=d,f*=d,h*=d,i=_*h-y*f,o=y*c-m*h,a=m*f-_*c,d=Math.hypot(i,o,a),d?(d=1/d,i*=d,o*=d,a*=d):(i=0,o=0,a=0),s=f*a-h*o,l=h*i-c*a,u=c*o-f*i,d=Math.hypot(s,l,u),d?(d=1/d,s*=d,l*=d,u*=d):(s=0,l=0,u=0),e[0]=i,e[1]=s,e[2]=c,e[3]=0,e[4]=o,e[5]=l,e[6]=f,e[7]=0,e[8]=a,e[9]=u,e[10]=h,e[11]=0,e[12]=-(i*p+o*v+a*g),e[13]=-(s*p+l*v+u*g),e[14]=-(c*p+f*v+h*g),e[15]=1,e)}function kyt(){var e=new $i(4);return $i!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function Ayt(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function fk(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function Cyt(e){var t=e[0],r=e[1],n=e[2],i=e[3];return Math.hypot(t,r,n,i)}function Myt(e){var t=e[0],r=e[1],n=e[2],i=e[3];return t*t+r*r+n*n+i*i}function xyt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r*r+n*n+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),e[0]=r*a,e[1]=n*a,e[2]=i*a,e[3]=o*a,e}function Lyt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Iyt(e,t,r,n){var i=t[0],o=t[1],a=t[2],s=t[3];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e[2]=a+n*(r[2]-a),e[3]=s+n*(r[3]-s),e}function Af(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*a,e[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*a,e[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*a,e[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*a,e}function Oyt(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0],s=r[1],l=r[2],u=r[3],c=u*n+s*o-l*i,f=u*i+l*n-a*o,h=u*o+a*i-s*n,d=-a*n-s*i-l*o;return e[0]=c*u+d*-a+f*-l-h*-s,e[1]=f*u+d*-s+h*-a-c*-l,e[2]=h*u+d*-l+c*-s-f*-a,e[3]=t[3],e}(function(){var e=kyt();return function(t,r,n,i,o,a){var s,l;for(r||(r=4),n||(n=0),i?l=Math.min(i*r+n,t.length):l=t.length,s=n;s<l;s+=r)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}})();var J3;(function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL0ROW3=3]="COL0ROW3",e[e.COL1ROW0=4]="COL1ROW0",e[e.COL1ROW1=5]="COL1ROW1",e[e.COL1ROW2=6]="COL1ROW2",e[e.COL1ROW3=7]="COL1ROW3",e[e.COL2ROW0=8]="COL2ROW0",e[e.COL2ROW1=9]="COL2ROW1",e[e.COL2ROW2=10]="COL2ROW2",e[e.COL2ROW3=11]="COL2ROW3",e[e.COL3ROW0=12]="COL3ROW0",e[e.COL3ROW1=13]="COL3ROW1",e[e.COL3ROW2=14]="COL3ROW2",e[e.COL3ROW3=15]="COL3ROW3"})(J3||(J3={}));const Ryt=45*Math.PI/180,Dyt=1,Sb=.1,Tb=500,Nyt=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class jr extends xz{static get IDENTITY(){return Byt()}static get ZERO(){return Fyt()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return J3}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,r,n,i,o,a,s,l,u,c,f,h,d,p,v,g){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this[4]=o,this[5]=a,this[6]=s,this[7]=l,this[8]=u,this[9]=c,this[10]=f,this[11]=h,this[12]=d,this[13]=p,this[14]=v,this[15]=g,this.check()}setRowMajor(t,r,n,i,o,a,s,l,u,c,f,h,d,p,v,g){return this[0]=t,this[1]=o,this[2]=u,this[3]=d,this[4]=r,this[5]=a,this[6]=c,this[7]=p,this[8]=n,this[9]=s,this[10]=f,this[11]=v,this[12]=i,this[13]=l,this[14]=h,this[15]=g,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(Nyt)}fromObject(t){return this.check()}fromQuaternion(t){return yyt(this,t),this.check()}frustum(t){const{left:r,right:n,bottom:i,top:o,near:a=Sb,far:s=Tb}=t;return s===1/0?$yt(this,r,n,i,o,a):byt(this,r,n,i,o,a,s),this.check()}lookAt(t){const{eye:r,center:n=[0,0,0],up:i=[0,1,0]}=t;return Eyt(this,r,n,i),this.check()}ortho(t){const{left:r,right:n,bottom:i,top:o,near:a=Sb,far:s=Tb}=t;return Pyt(this,r,n,i,o,a,s),this.check()}orthographic(t){const{fovy:r=Ryt,aspect:n=Dyt,focalDistance:i=1,near:o=Sb,far:a=Tb}=t;SL(r);const s=r/2,l=i*Math.tan(s),u=l*n;return this.ortho({left:-u,right:u,bottom:-l,top:l,near:o,far:a})}perspective(t){const{fovy:r=45*Math.PI/180,aspect:n=1,near:i=.1,far:o=500}=t;return SL(r),Syt(this,r,n,i,o),this.check()}determinant(){return vyt(this)}getScale(t=[-0,-0,-0]){return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(t=[-0,-0,-0]){return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t,r){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],r=r||[-0,-0,-0];const n=this.getScale(r),i=1/n[0],o=1/n[1],a=1/n[2];return t[0]=this[0]*i,t[1]=this[1]*o,t[2]=this[2]*a,t[3]=0,t[4]=this[4]*i,t[5]=this[5]*o,t[6]=this[6]*a,t[7]=0,t[8]=this[8]*i,t[9]=this[9]*o,t[10]=this[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t,r){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0],r=r||[-0,-0,-0];const n=this.getScale(r),i=1/n[0],o=1/n[1],a=1/n[2];return t[0]=this[0]*i,t[1]=this[1]*o,t[2]=this[2]*a,t[3]=this[4]*i,t[4]=this[5]*o,t[5]=this[6]*a,t[6]=this[8]*i,t[7]=this[9]*o,t[8]=this[10]*a,t}transpose(){return pyt(this,this),this.check()}invert(){return K3(this,this),this.check()}multiplyLeft(t){return Hl(this,t,this),this.check()}multiplyRight(t){return Hl(this,this,t),this.check()}rotateX(t){return Lz(this,this,t),this.check()}rotateY(t){return myt(this,this,t),this.check()}rotateZ(t){return Iz(this,this,t),this.check()}rotateXYZ(t){return this.rotateX(t[0]).rotateY(t[1]).rotateZ(t[2])}rotateAxis(t,r){return gyt(this,this,t,r),this.check()}scale(t){return ck(this,this,Array.isArray(t)?t:[t,t,t]),this.check()}translate(t){return u1(this,this,t),this.check()}transform(t,r){return t.length===4?(r=Af(r||[-0,-0,-0,-0],t,this),Od(r,4),r):this.transformAsPoint(t,r)}transformAsPoint(t,r){const{length:n}=t;let i;switch(n){case 2:i=G_t(r||[-0,-0],t,this);break;case 3:i=lk(r||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Od(i,t.length),i}transformAsVector(t,r){let n;switch(t.length){case 2:n=j_t(r||[-0,-0],t,this);break;case 3:n=Sz(r||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Od(n,t.length),n}transformPoint(t,r){return this.transformAsPoint(t,r)}transformVector(t,r){return this.transformAsPoint(t,r)}transformDirection(t,r){return this.transformAsVector(t,r)}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,r,n){return this.identity().translate([t,r,n])}}let Ev,kv;function Fyt(){return Ev||(Ev=new jr([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(Ev)),Ev}function Byt(){return kv||(kv=new jr,Object.freeze(kv)),kv}function SL(e){if(e>Math.PI*2)throw Error("expected radians")}function $yt(e,t,r,n,i,o){const a=2*o/(r-t),s=2*o/(i-n),l=(r+t)/(r-t),u=(i+n)/(i-n),c=-1,f=-1,h=-2*o;return e[0]=a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=l,e[9]=u,e[10]=c,e[11]=f,e[12]=0,e[13]=0,e[14]=h,e[15]=0,e}function TL(){var e=new $i(4);return $i!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function zyt(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Oz(e,t,r){r=r*.5;var n=Math.sin(r);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(r),e}function PL(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=r[0],l=r[1],u=r[2],c=r[3];return e[0]=n*c+a*s+i*u-o*l,e[1]=i*c+a*l+o*s-n*u,e[2]=o*c+a*u+n*l-i*s,e[3]=a*c-n*s-i*l-o*u,e}function Vyt(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l+a*s,e[1]=i*l+o*s,e[2]=o*l-i*s,e[3]=a*l-n*s,e}function Uyt(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l-o*s,e[1]=i*l+a*s,e[2]=o*l+n*s,e[3]=a*l-i*s,e}function Gyt(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l+i*s,e[1]=i*l-n*s,e[2]=o*l+a*s,e[3]=a*l-o*s,e}function jyt(e,t){var r=t[0],n=t[1],i=t[2];return e[0]=r,e[1]=n,e[2]=i,e[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),e}function nm(e,t,r,n){var i=t[0],o=t[1],a=t[2],s=t[3],l=r[0],u=r[1],c=r[2],f=r[3],h,d,p,v,g;return d=i*l+o*u+a*c+s*f,d<0&&(d=-d,l=-l,u=-u,c=-c,f=-f),1-d>Rd?(h=Math.acos(d),p=Math.sin(h),v=Math.sin((1-n)*h)/p,g=Math.sin(n*h)/p):(v=1-n,g=n),e[0]=v*i+g*l,e[1]=v*o+g*u,e[2]=v*a+g*c,e[3]=v*s+g*f,e}function Wyt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r*r+n*n+i*i+o*o,s=a?1/a:0;return e[0]=-r*s,e[1]=-n*s,e[2]=-i*s,e[3]=o*s,e}function Hyt(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function Rz(e,t){var r=t[0]+t[4]+t[8],n;if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[i*3+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(t[i*3+i]-t[o*3+o]-t[a*3+a]+1),e[i]=.5*n,n=.5/n,e[3]=(t[o*3+a]-t[a*3+o])*n,e[o]=(t[o*3+i]+t[i*3+o])*n,e[a]=(t[a*3+i]+t[i*3+a])*n}return e}var Xyt=Ayt,Yyt=fk,qyt=Lyt,Zyt=Iyt,Kyt=Cyt,Jyt=Myt,Dz=xyt,Qyt=function(){var e=Pz(),t=yL(1,0,0),r=yL(0,1,0);return function(n,i,o){var a=Ez(i,o);return a<-.999999?(rm(e,t,i),Mz(e)<1e-6&&rm(e,r,i),K_t(e,e),Oz(n,e,Math.PI),n):a>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(rm(e,i,o),n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=1+a,Dz(n,n))}}();(function(){var e=TL(),t=TL();return function(r,n,i,o,a,s){return nm(e,n,a,s),nm(t,i,o,s),nm(r,e,t,2*s*(1-s)),r}})();(function(){var e=nyt();return function(t,r,n,i){return e[0]=n[0],e[3]=n[1],e[6]=n[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-r[0],e[5]=-r[1],e[8]=-r[2],Dz(t,Rz(t,e))}})();const t2t=[0,0,0,1];class EL extends sk{constructor(t=0,r=0,n=0,i=1){super(-0,-0,-0,-0),Array.isArray(t)&&arguments.length===1?this.copy(t):this.set(t,r,n,i)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}set(t,r,n,i){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this.check()}fromObject(t){return this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this.check()}fromMatrix3(t){return Rz(this,t),this.check()}fromAxisRotation(t,r){return Oz(this,t,r),this.check()}identity(){return zyt(this),this.check()}setAxisAngle(t,r){return this.fromAxisRotation(t,r)}get ELEMENTS(){return 4}get x(){return this[0]}set x(t){this[0]=Me(t)}get y(){return this[1]}set y(t){this[1]=Me(t)}get z(){return this[2]}set z(t){this[2]=Me(t)}get w(){return this[3]}set w(t){this[3]=Me(t)}len(){return Kyt(this)}lengthSquared(){return Jyt(this)}dot(t){return qyt(this,t)}rotationTo(t,r){return Qyt(this,t,r),this.check()}add(t){return Xyt(this,this,t),this.check()}calculateW(){return jyt(this,this),this.check()}conjugate(){return Hyt(this,this),this.check()}invert(){return Wyt(this,this),this.check()}lerp(t,r,n){return n===void 0?this.lerp(this,t,r):(Zyt(this,t,r,n),this.check())}multiplyRight(t){return PL(this,this,t),this.check()}multiplyLeft(t){return PL(this,t,this),this.check()}normalize(){const t=this.len(),r=t>0?1/t:0;return this[0]=this[0]*r,this[1]=this[1]*r,this[2]=this[2]*r,this[3]=this[3]*r,t===0&&(this[3]=1),this.check()}rotateX(t){return Vyt(this,this,t),this.check()}rotateY(t){return Uyt(this,this,t),this.check()}rotateZ(t){return Gyt(this,this,t),this.check()}scale(t){return Yyt(this,this,t),this.check()}slerp(t,r,n){let i,o,a;switch(arguments.length){case 1:({start:i=t2t,target:o,ratio:a}=t);break;case 2:i=this,o=t,a=r;break;default:i=t,o=r,a=n}return nm(this,i,o,a),this.check()}transformVector4(t,r=new uk){return Oyt(r,t,this),Od(r,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(t,r){return this.setAxisAngle(t,r)}premultiply(t){return this.multiplyLeft(t)}multiply(t){return this.multiplyRight(t)}}const Nz={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:Math.PI*2},kL=`#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))

struct AmbientLight {
 vec3 color;
};

struct PointLight {
 vec3 color;
 vec3 position;
 vec3 attenuation;
};

struct DirectionalLight {
  vec3 color;
  vec3 direction;
};

uniform AmbientLight lighting_uAmbientLight;
uniform PointLight lighting_uPointLight[MAX_LIGHTS];
uniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];
uniform int lighting_uPointLightCount;
uniform int lighting_uDirectionalLightCount;

uniform bool lighting_uEnabled;

float getPointLightAttenuation(PointLight pointLight, float distance) {
  return pointLight.attenuation.x
       + pointLight.attenuation.y * distance
       + pointLight.attenuation.z * distance * distance;
}

#endif
`,e2t={lightSources:{}};function Pb(){let{color:e=[0,0,0],intensity:t=1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.map(r=>r*t/255)}function r2t(e){let{ambientLight:t,pointLights:r=[],directionalLights:n=[]}=e;const i={};return t?i["lighting_uAmbientLight.color"]=Pb(t):i["lighting_uAmbientLight.color"]=[0,0,0],r.forEach((o,a)=>{i["lighting_uPointLight[".concat(a,"].color")]=Pb(o),i["lighting_uPointLight[".concat(a,"].position")]=o.position,i["lighting_uPointLight[".concat(a,"].attenuation")]=o.attenuation||[1,0,0]}),i.lighting_uPointLightCount=r.length,n.forEach((o,a)=>{i["lighting_uDirectionalLight[".concat(a,"].color")]=Pb(o),i["lighting_uDirectionalLight[".concat(a,"].direction")]=o.direction}),i.lighting_uDirectionalLightCount=n.length,i}function Fz(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e2t;if("lightSources"in e){const{ambientLight:t,pointLights:r,directionalLights:n}=e.lightSources||{};return t||r&&r.length>0||n&&n.length>0?Object.assign({},r2t({ambientLight:t,pointLights:r,directionalLights:n}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in e){const t={pointLights:[],directionalLights:[]};for(const r of e.lights||[])switch(r.type){case"ambient":t.ambientLight=r;break;case"directional":t.directionalLights.push(r);break;case"point":t.pointLights.push(r);break}return Fz({lightSources:t})}return{}}const n2t={name:"lights",vs:kL,fs:kL,getUniforms:Fz,defines:{MAX_LIGHTS:3}},i2t=new Uint8Array([0,255,255,255]),o2t={pickingSelectedColor:null,pickingHighlightColor:i2t,pickingActive:!1,pickingAttribute:!1};function a2t(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o2t;const t={};if(e.pickingSelectedColor!==void 0)if(!e.pickingSelectedColor)t.picking_uSelectedColorValid=0;else{const r=e.pickingSelectedColor.slice(0,3);t.picking_uSelectedColorValid=1,t.picking_uSelectedColor=r}if(e.pickingHighlightColor){const r=Array.from(e.pickingHighlightColor,n=>n/255);Number.isFinite(r[3])||(r[3]=1),t.picking_uHighlightColor=r}return e.pickingActive!==void 0&&(t.picking_uActive=Boolean(e.pickingActive),t.picking_uAttribute=Boolean(e.pickingAttribute)),t}const s2t=`uniform bool picking_uActive;
uniform bool picking_uAttribute;
uniform vec3 picking_uSelectedColor;
uniform bool picking_uSelectedColorValid;

out vec4 picking_vRGBcolor_Avalid;

const float COLOR_SCALE = 1. / 255.;

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.001;
}

bool isVertexPicked(vec3 vertexColor) {
  return
    picking_uSelectedColorValid &&
    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));
}

void picking_setPickingColor(vec3 pickingColor) {
  if (picking_uActive) {
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!picking_uAttribute) {
      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;
    }
  } else {
    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.r = value;
  }
}
void picking_setPickingAttribute(vec2 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}
void picking_setPickingAttribute(vec3 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,l2t=`uniform bool picking_uActive;
uniform vec3 picking_uSelectedColor;
uniform vec4 picking_uHighlightColor;

in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
  if (picking_uActive) {
    return color;
  }
  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    float highLightAlpha = picking_uHighlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}
vec4 picking_filterPickingColor(vec4 color) {
  if (picking_uActive) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}
vec4 picking_filterColor(vec4 color) {
  vec4 highightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highightColor);
}

`,u2t={name:"picking",vs:s2t,fs:l2t,getUniforms:a2t},c2t=`
uniform float lighting_uAmbient;
uniform float lighting_uDiffuse;
uniform float lighting_uShininess;
uniform vec3  lighting_uSpecularColor;

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {
    vec3 halfway_direction = normalize(light_direction + view_direction);
    float lambertian = dot(light_direction, normal_worldspace);
    float specular = 0.0;
    if (lambertian > 0.0) {
      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);
      specular = pow(specular_angle, lighting_uShininess);
    }
    lambertian = max(lambertian, 0.0);
    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;
}

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = surfaceColor;

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);
    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}

vec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = vec3(0, 0, 0);
  vec3 surfaceColor = vec3(0, 0, 0);

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}
`,f2t={};function h2t(e){const{ambient:t=.35,diffuse:r=.6,shininess:n=32,specularColor:i=[30,30,30]}=e;return{lighting_uAmbient:t,lighting_uDiffuse:r,lighting_uShininess:n,lighting_uSpecularColor:i.map(o=>o/255)}}function d2t(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:f2t;if(!("material"in e))return{};const{material:t}=e;return t?h2t(t):{lighting_uEnabled:!1}}const p2t={name:"gouraud-lighting",dependencies:[n2t],vs:c2t,defines:{LIGHTING_VERTEX:1},getUniforms:d2t},v2t=`attribute float transform_elementID;
vec2 transform_getPixelSizeHalf(vec2 size) {
  return vec2(1.) / (2. * size);
}

vec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {
  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);
  float xIndex = transform_elementID - (yIndex * texSize[0]);
  return vec2(xIndex, yIndex);
}
vec2 transform_getTexCoord(vec2 size) {
  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);
  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);
  vec2 coord = indices / size + pixelSizeHalf;
  return coord;
}
vec2 transform_getPos(vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);
  return pos;
}
vec4 transform_getInput(sampler2D texSampler, vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec4 textureColor = texture2D(texSampler, texCoord);
  return textureColor;
}
`,g2t={name:"transform",vs:v2t,fs:null};class X0{static getDefaultProgramManager(t){return t.luma=t.luma||{},t.luma.defaultProgramManager=t.luma.defaultProgramManager||new X0(t),t.luma.defaultProgramManager}constructor(t){this.gl=t,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(t){this._defaultModules.find(r=>r.name===t.name)||this._defaultModules.push(t),this.stateHash++}removeDefaultModule(t){const r=typeof t=="string"?t:t.name;this._defaultModules=this._defaultModules.filter(n=>n.name!==r),this.stateHash++}addShaderHook(t,r){r&&(t=Object.assign(r,{hook:t})),this._hookFunctions.push(t),this.stateHash++}get(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{vs:r="",fs:n="",defines:i={},inject:o={},varyings:a=[],bufferMode:s=35981,transpileToGLSL100:l=!1}=t,u=this._getModuleList(t.modules),c=this._getHash(r),f=this._getHash(n),h=u.map(y=>this._getHash(y.name)).sort(),d=a.map(y=>this._getHash(y)),p=Object.keys(i).sort(),v=Object.keys(o).sort(),g=[],m=[];for(const y of p)g.push(this._getHash(y)),g.push(this._getHash(i[y]));for(const y of v)m.push(this._getHash(y)),m.push(this._getHash(o[y]));const _="".concat(c,"/").concat(f,"D").concat(g.join("/"),"M").concat(h.join("/"),"I").concat(m.join("/"),"V").concat(d.join("/"),"H").concat(this.stateHash,"B").concat(s).concat(l?"T":"");if(!this._programCache[_]){const y=w_t(this.gl,{vs:r,fs:n,modules:u,inject:o,defines:i,hookFunctions:this._hookFunctions,transpileToGLSL100:l});this._programCache[_]=new uz(this.gl,{hash:_,vs:y.vs,fs:y.fs,varyings:a,bufferMode:s}),this._getUniforms[_]=y.getUniforms||(w=>{}),this._useCounts[_]=0}return this._useCounts[_]++,this._programCache[_]}getUniforms(t){return this._getUniforms[t.hash]||null}release(t){const r=t.hash;this._useCounts[r]--,this._useCounts[r]===0&&(this._programCache[r].delete(),delete this._programCache[r],delete this._getUniforms[r],delete this._useCounts[r])}_getHash(t){return this._hashes[t]===void 0&&(this._hashes[t]=this._hashCounter++),this._hashes[t]}_getModuleList(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const r=new Array(this._defaultModules.length+t.length),n={};let i=0;for(let o=0,a=this._defaultModules.length;o<a;++o){const s=this._defaultModules[o],l=s.name;r[i++]=s,n[l]=!0}for(let o=0,a=t.length;o<a;++o){const s=t[o],l=s.name;n[l]||(r[i++]=s,n[l]=!0)}return r.length=i,r}}const m2t={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function _2t(e,t,r){const n={};let i=t.indices;for(const o in t.attributes){const a=t.attributes[o],s=y2t(o,r);if(o==="indices")i=a;else if(a.constant)n[s]=a.value;else{const l=a.value,u={...a};delete u.value,n[s]=[new Pe(e,l),u],b2t(o,u)}}if(i){const o=i.value||i;mt(o instanceof Uint16Array||o instanceof Uint32Array,'attribute array for "indices" must be of integer type');const a={size:1,isIndexed:i.isIndexed===void 0?!0:i.isIndexed};n.indices=[new Pe(e,{data:o,target:34963}),a]}return n}function y2t(e,t){const{attributeMap:r=m2t}=t||{};return r&&r[e]||e}function b2t(e,t){let r;switch(e){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":r="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":r="vectors";break}switch(r){case"vectors":t.size=t.size||3;break;case"uvs":t.size=t.size||2;break}mt(Number.isFinite(t.size),"attribute ".concat(e," needs size"))}const Qu=2,w2t=1e4,S2t="Model needs drawMode and vertexCount",AL=()=>{},T2t={};class wa{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{id:n=Rs("model")}=r;mt(E_(t)),this.id=n,this.gl=t,this.id=r.id||Rs("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(r)}initialize(t){this.props={},this.programManager=t.programManager||X0.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:r=null,vs:n,fs:i,modules:o,defines:a,inject:s,varyings:l,bufferMode:u,transpileToGLSL100:c}=t;this.programProps={program:r,vs:n,fs:i,modules:o,defines:a,inject:s,varyings:l,bufferMode:u,transpileToGLSL100:c},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(t.moduleSettings))),this.drawMode=t.drawMode!==void 0?t.drawMode:4,this.vertexCount=t.vertexCount||0,this.geometryBuffers={},this.isInstanced=t.isInstanced||t.instanced||t.instanceCount>0,this._setModelProps(t),this.geometry={},mt(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),S2t)}setProps(t){this._setModelProps(t)}delete(){for(const t in this._attributes)this._attributes[t]!==this.attributes[t]&&this._attributes[t].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(t){const{program:r,vs:n,fs:i,modules:o,defines:a,inject:s,varyings:l,bufferMode:u,transpileToGLSL100:c}=t;this.programProps={program:r,vs:n,fs:i,modules:o,defines:a,inject:s,varyings:l,bufferMode:u,transpileToGLSL100:c},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(t){return this.drawMode=t,this}setVertexCount(t){return mt(Number.isFinite(t)),this.vertexCount=t,this}setInstanceCount(t){return mt(Number.isFinite(t)),this.instanceCount=t,this}setGeometry(t){return this.drawMode=t.drawMode,this.vertexCount=t.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=_2t(this.gl,t),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(ef(t))return this;const r={};for(const n in t){const i=t[n];r[n]=i.getValue?i.getValue():i}return this.vertexArray.setAttributes(r),this}setUniforms(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.assign(this.uniforms,t),this}getModuleUniforms(t){this._checkProgram();const r=this.programManager.getUniforms(this.program);return r?r(t):{}}updateModuleSettings(t){const r=this.getModuleUniforms(t||{});return this.setUniforms(r)}clear(t){return rk(this.program.gl,t),this}draw(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._checkProgram();const{moduleSettings:r=null,framebuffer:n,uniforms:i={},attributes:o={},transformFeedback:a=this.transformFeedback,parameters:s={},vertexArray:l=this.vertexArray}=t;this.setAttributes(o),this.updateModuleSettings(r),this.setUniforms(i);let u;Lt.priority>=Qu&&(u=this._logDrawCallStart(Qu));const c=this.vertexArray.getDrawParams(),{isIndexed:f=c.isIndexed,indexType:h=c.indexType,indexOffset:d=c.indexOffset,vertexArrayInstanced:p=c.isInstanced}=this.props;p&&!this.isInstanced&&Lt.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:v,instanceCount:g}=this,{onBeforeRender:m=AL,onAfterRender:_=AL}=this.props;m(),this.program.setUniforms(this.uniforms);const y=this.program.draw(Object.assign(T2t,t,{logPriority:u,uniforms:null,framebuffer:n,parameters:s,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:l,transformFeedback:a,isIndexed:f,indexType:h,isInstanced:v,instanceCount:g,offset:f?d:0}));return _(),Lt.priority>=Qu&&this._logDrawCallEnd(u,l,n),y}transform(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{discard:r=!0,feedbackBuffers:n,unbindModels:i=[]}=t;let{parameters:o}=t;n&&this._setFeedbackBuffers(n),r&&(o=Object.assign({},o,{[35977]:r})),i.forEach(a=>a.vertexArray.unbindBuffers());try{this.draw(Object.assign({},t,{parameters:o}))}finally{i.forEach(a=>a.vertexArray.bindBuffers())}return this}render(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Lt.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(t).draw()}_setModelProps(t){Object.assign(this.props,t),"uniforms"in t&&this.setUniforms(t.uniforms),"pickable"in t&&(this.pickable=t.pickable),"instanceCount"in t&&(this.instanceCount=t.instanceCount),"geometry"in t&&this.setGeometry(t.geometry),"attributes"in t&&this.setAttributes(t.attributes),"_feedbackBuffers"in t&&this._setFeedbackBuffers(t._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:r}=this.programProps;if(r)this._managedProgram=!1;else{const{vs:n,fs:i,modules:o,inject:a,defines:s,varyings:l,bufferMode:u,transpileToGLSL100:c}=this.programProps;r=this.programManager.get({vs:n,fs:i,modules:o,inject:a,defines:s,varyings:l,bufferMode:u,transpileToGLSL100:c}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}mt(r instanceof uz,"Model needs a program"),this._programDirty=!1,r!==this.program&&(this.program=r,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new N1t(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const t in this.geometryBuffers){const r=this.geometryBuffers[t][0]||this.geometryBuffers[t];r instanceof Pe&&r.delete()}}_setAnimationProps(t){this.animated&&mt(t,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(ef(t))return this;const{gl:r}=this.program;return this.transformFeedback=this.transformFeedback||new cz(r,{program:this.program}),this.transformFeedback.setBuffers(t),this}_logDrawCallStart(t){const r=t>3?0:w2t;if(!(Date.now()-this.lastLogTime<r))return this.lastLogTime=Date.now(),Lt.group(Qu,">>> DRAWING MODEL ".concat(this.id),{collapsed:Lt.level<=2})(),t}_logDrawCallEnd(t,r,n,i){if(t===void 0)return;const o=$1t({vertexArray:r,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:a,unusedTable:s,unusedCount:l}=lL({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),{table:u,count:c}=lL({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0});c>0&&Lt.log("MISSING UNIFORMS",Object.keys(u))(),l>0&&Lt.log("UNUSED UNIFORMS",Object.keys(s))();const f=V1t(this.vertexArray.configuration);Lt.table(t,o)(),Lt.table(t,a)(),Lt.table(t+1,f)(),i&&i.log({logLevel:Qu,message:"Rendered to ".concat(i.id)}),Lt.groupEnd(Qu)()}}class P2t{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(r),Object.seal(this)}setupResources(t){for(const r of this.bindings)this._setupTransformFeedback(r,t)}updateModelProps(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyings:r}=this;return r.length>0&&(t=Object.assign({},t,{varyings:r})),t}getDrawOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this.bindings[this.currentIndex],{sourceBuffers:n,transformFeedback:i}=r;return{attributes:Object.assign({},n,t.attributes),transformFeedback:i}}swap(){return this.feedbackMap?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(t)}getBuffer(t){const{feedbackBuffers:r}=this.bindings[this.currentIndex],n=t?r[t]:null;return n?n instanceof Pe?n:n.buffer:null}getData(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyingName:r}=t,n=this.getBuffer(r);return n?n.getData():null}delete(){for(const t in this.resources)this.resources[t].delete()}_initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(t),this.varyings=t.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&mt(Qt(this.gl))}_getFeedbackBuffers(t){const{sourceBuffers:r={}}=t,n={};if(this.bindings[this.currentIndex]&&Object.assign(n,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const i in this.feedbackMap){const o=this.feedbackMap[i];i in r&&(n[o]=i)}Object.assign(n,t.feedbackBuffers);for(const i in n){const o=n[i];if(typeof o=="string"){const a=r[o],{byteLength:s,usage:l,accessor:u}=a;n[i]=this._createNewBuffer(i,{byteLength:s,usage:l,accessor:u})}}return n}_setupBuffers(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:r=null}=t;Object.assign(this.feedbackMap,t.feedbackMap);const n=this._getFeedbackBuffers(t);this._updateBindings({sourceBuffers:r,feedbackBuffers:n})}_setupTransformFeedback(t,r){let{model:n}=r;const{program:i}=n;t.transformFeedback=new cz(this.gl,{program:i,buffers:t.feedbackBuffers})}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this.feedbackMap){const{sourceBuffers:r,feedbackBuffers:n}=this._swapBuffers(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:r,feedbackBuffers:n})}}_updateBinding(t,r){return t?(Object.assign(t.sourceBuffers,r.sourceBuffers),Object.assign(t.feedbackBuffers,r.feedbackBuffers),t.transformFeedback&&t.transformFeedback.setBuffers(t.feedbackBuffers),t):{sourceBuffers:Object.assign({},r.sourceBuffers),feedbackBuffers:Object.assign({},r.feedbackBuffers)}}_swapBuffers(t){if(!this.feedbackMap)return null;const r=Object.assign({},t.sourceBuffers),n=Object.assign({},t.feedbackBuffers);for(const i in this.feedbackMap){const o=this.feedbackMap[i];r[i]=t.feedbackBuffers[o],n[o]=t.sourceBuffers[i],mt(n[o]instanceof Pe)}return{sourceBuffers:r,feedbackBuffers:n}}_createNewBuffer(t,r){const n=new Pe(this.gl,r);return this.resources[t]&&this.resources[t].delete(),this.resources[t]=n,n}_getNextIndex(){return(this.currentIndex+1)%2}}const E2t="transform_uSampler_",c1="transform_uSize_",CL="transform_position";function k2t(e){let{vs:t,sourceTextureMap:r,targetTextureVarying:n,targetTexture:i}=e,a=Object.keys(r).length,s=null;const l={};let u=t,c={};if(a>0||n){const f=u.split(`
`),h=f.slice();if(f.forEach((d,p,v)=>{if(a>0){const g=L2t(d,r);if(g){const{updatedLine:m,inject:_}=g;h[p]=m,c=X3([c,_]),Object.assign(l,g.samplerTextureMap),a--}}n&&!s&&(s=x2t(d,n))}),n){mt(i);const d="".concat(c1).concat(n),p="uniform vec2 ".concat(d,`;
`),v="     vec2 ".concat(CL," = transform_getPos(").concat(d,`);
     gl_Position = vec4(`).concat(CL,`, 0, 1.);
`);c=X3([c,{"vs:#decl":p,"vs:#main-start":v}])}u=h.join(`
`)}return{vs:u,targetTextureType:s,inject:c,samplerTextureMap:l}}function A2t(e){let{sourceTextureMap:t,targetTextureVarying:r,targetTexture:n}=e;const i={};let o,a;r&&({width:o,height:a}=n,i["".concat(c1).concat(r)]=[o,a]);for(const s in t)({width:o,height:a}=t[s]),i["".concat(c1).concat(s)]=[o,a];return i}function C2t(e){return mz(e,["attribute","in"])}function M2t(e){const t="".concat(E2t).concat(e),r="".concat(c1).concat(e),n="  uniform sampler2D ".concat(t,`;
  uniform vec2 `).concat(r,";");return{samplerName:t,sizeName:r,uniformDeclerations:n}}function x2t(e,t){const r=mz(e,["varying","out"]);return r&&r.name===t?r.type:null}function L2t(e,t){const r={},n=C2t(e);if(!n)return null;const{type:i,name:o}=n;if(o&&t[o]){const a="// ".concat(e," => Replaced by Transform with a sampler"),{samplerName:s,sizeName:l,uniformDeclerations:u}=M2t(o),c=x_t(i),f="  ".concat(i," ").concat(o," = transform_getInput(").concat(s,", ").concat(l,").").concat(c,`;
`);return r[s]=o,{updatedLine:a,inject:{"vs:#decl":u,"vs:#main-start":f},samplerTextureMap:r}}return null}const I2t={[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},O2t="transform_output";class R2t{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(r),Object.seal(this)}updateModelProps(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this._processVertexShader(t);return Object.assign({},t,r)}getDrawOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:r,sourceTextures:n,framebuffer:i,targetTexture:o}=this.bindings[this.currentIndex],a=Object.assign({},r,t.attributes),s=Object.assign({},t.uniforms),l=Object.assign({},t.parameters);let u=t.discard;if(this.hasSourceTextures||this.hasTargetTexture){a.transform_elementID=this.elementIDBuffer;for(const f in this.samplerTextureMap){const h=this.samplerTextureMap[f];s[f]=n[h]}this._setSourceTextureParameters();const c=A2t({sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:o});Object.assign(s,c)}return this.hasTargetTexture&&(u=!1,l.viewport=[0,0,i.width,i.height]),{attributes:a,framebuffer:i,uniforms:s,discard:u,parameters:l}}swap(){return this._swapTexture?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupTextures(t)}getTargetTexture(){const{targetTexture:t}=this.bindings[this.currentIndex];return t}getData(){let{packed:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{framebuffer:r}=this.bindings[this.currentIndex],n=A_(r);if(!t)return n;const i=n.constructor,o=L_t(this.targetTextureType),a=new i(n.length*o/4);let s=0;for(let l=0;l<n.length;l+=4)for(let u=0;u<o;u++)a[s++]=n[l+u];return a}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{_targetTextureVarying:r,_swapTexture:n}=t;this._swapTexture=n,this.targetTextureVarying=r,this.hasTargetTexture=r,this._setupTextures(t)}_createTargetTexture(t){const{sourceTextures:r,textureOrReference:n}=t;if(n instanceof yn)return n;const i=r[n];return i?(this._targetRefTexName=n,this._createNewTexture(i)):null}_setupTextures(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:r,_sourceTextures:n={},_targetTexture:i}=t,o=this._createTargetTexture({sourceTextures:n,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||n&&Object.keys(n).length>0,this._updateBindings({sourceBuffers:r,sourceTextures:n,targetTexture:o}),"elementCount"in t&&this._updateElementIDBuffer(t.elementCount)}_updateElementIDBuffer(t){if(typeof t!="number"||this.elementCount>=t)return;const r=new Float32Array(t);r.forEach((n,i,o)=>{o[i]=i}),this.elementIDBuffer?this.elementIDBuffer.setData({data:r}):this.elementIDBuffer=new Pe(this.gl,{data:r,accessor:{size:1}}),this.elementCount=t}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this._swapTexture){const{sourceTextures:r,targetTexture:n}=this._swapTextures(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:r,targetTexture:n})}}_updateBinding(t,r){const{sourceBuffers:n,sourceTextures:i,targetTexture:o}=r;if(t||(t={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(t.sourceTextures,i),Object.assign(t.sourceBuffers,n),o){t.targetTexture=o;const{width:a,height:s}=o,{framebuffer:l}=t;l?(l.update({attachments:{[36064]:o},resizeAttachments:!1}),l.resize({width:a,height:s})):t.framebuffer=new nr(this.gl,{id:"transform-framebuffer",width:a,height:s,attachments:{[36064]:o}})}return t}_setSourceTextureParameters(){const t=this.currentIndex,{sourceTextures:r}=this.bindings[t];for(const n in r)r[n].setParameters(I2t)}_swapTextures(t){if(!this._swapTexture)return null;const r=Object.assign({},t.sourceTextures);r[this._swapTexture]=t.targetTexture;const n=t.sourceTextures[this._swapTexture];return{sourceTextures:r,targetTexture:n}}_createNewTexture(t){const r=oz(t,{parameters:{[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},pixelStore:{[37440]:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=r,r}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceTextures:r,targetTexture:n}=this.bindings[this.currentIndex],{vs:i,uniforms:o,targetTextureType:a,inject:s,samplerTextureMap:l}=k2t({vs:t.vs,sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:n}),u=X3([t.inject||{},s]);this.targetTextureType=a,this.samplerTextureMap=l;const c=t._fs||_z({version:sz(i),input:this.targetTextureVarying,inputType:a,output:O2t}),f=this.hasSourceTextures||this.targetTextureVarying?[g2t].concat(t.modules||[]):t.modules;return{vs:i,fs:c,modules:f,uniforms:o,inject:u}}}class hk{static isSupported(t){return Qt(t)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(r),Object.seal(this)}delete(){const{model:t,bufferTransform:r,textureTransform:n}=this;t&&t.delete(),r&&r.delete(),n&&n.delete()}run(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{clearRenderTarget:r=!0}=t,n=this._updateDrawOptions(t);r&&n.framebuffer&&n.framebuffer.clear({color:!0}),this.model.transform(n)}swap(){let t=!1;const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of r)t=t||n.swap();mt(t,"Nothing to swap")}getBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(t)}getData(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of r){const i=n.getData(t);if(i)return i}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};"elementCount"in t&&this.model.setVertexCount(t.elementCount);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of r)n.update(t)}_initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{gl:r}=this;this._buildResourceTransforms(r,t),t=this._updateModelProps(t),this.model=new wa(r,Object.assign({},t,{fs:t.fs||_z({version:sz(t.vs)}),id:t.id||"transform-model",drawMode:t.drawMode||0,vertexCount:t.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(t){let r=Object.assign({},t);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)r=i.updateModelProps(r);return r}_buildResourceTransforms(t,r){D2t(r)&&(this.bufferTransform=new P2t(t,r)),N2t(r)&&(this.textureTransform=new R2t(t,r)),mt(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(t){let r=Object.assign({},t);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)r=Object.assign(r,i.getDrawOptions(r));return r}}function D2t(e){return!!(!ef(e.feedbackBuffers)||!ef(e.feedbackMap)||e.varyings&&e.varyings.length>0)}function N2t(e){return!!(!ef(e._sourceTextures)||e._targetTexture||e._targetTextureVarying)}const ML={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class bu{static get DRAW_MODE(){return ML}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:r=Rs("geometry"),drawMode:n=ML.TRIANGLES,attributes:i={},indices:o=null,vertexCount:a=null}=t;this.id=r,this.drawMode=n|0,this.attributes={},this.userData={},this._setAttributes(i,o),this.vertexCount=a||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(t){return"Geometry ".concat(this.id," attribute ").concat(t)}_setAttributes(t,r){r&&(this.indices=ArrayBuffer.isView(r)?{value:r,size:1}:r);for(const n in t){let i=t[n];i=ArrayBuffer.isView(i)?{value:i}:i,mt(ArrayBuffer.isView(i.value),"".concat(this._print(n),": must be typed array or object with value as typed array")),(n==="POSITION"||n==="positions")&&!i.size&&(i.size=3),n==="indices"?(mt(!this.indices),this.indices=i):this.attributes[n]=i}return this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(t,r){if(r)return r.value.length;let n=1/0;for(const i in t){const o=t[i],{value:a,size:s,constant:l}=o;!l&&a&&s>=1&&(n=Math.min(n,a.length/s))}return mt(Number.isFinite(n)),n}}let F2t=1,B2t=1;class Bz{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(t){const{delay:r=0,duration:n=Number.POSITIVE_INFINITY,rate:i=1,repeat:o=1}=t,a=F2t++,s={time:0,delay:r,duration:n,rate:i,repeat:o};return this._setChannelTime(s,this.time),this.channels.set(a,s),a}removeChannel(t){this.channels.delete(t);for(const[r,n]of this.animations)n.channel===t&&this.detachAnimation(r)}isFinished(t){const r=this.channels.get(t);return r===void 0?!1:this.time>=r.delay+r.duration*r.repeat}getTime(t){if(t===void 0)return this.time;const r=this.channels.get(t);return r===void 0?-1:r.time}setTime(t){this.time=Math.max(0,t);const r=this.channels.values();for(const i of r)this._setChannelTime(i,this.time);const n=this.animations.values();for(const i of n){const{animation:o,channel:a}=i;o.setTime(this.getTime(a))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(t,r){const n=B2t++;return this.animations.set(n,{animation:t,channel:r}),t.setTime(this.getTime(r)),n}detachAnimation(t){this.animations.delete(t)}update(t){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=t),this.setTime(this.time+(t-this.lastEngineTime)),this.lastEngineTime=t)}_setChannelTime(t,r){const n=r-t.delay,i=t.duration*t.repeat;n>=i?t.time=t.duration*t.rate:(t.time=Math.max(0,n)%t.duration,t.time*=t.rate)}}const $z="#define SMOOTH_EDGE_RADIUS 0.5",$2t=`
`.concat($z,`

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`),z2t=`
`.concat($z,`

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`),V2t={name:"geometry",vs:$2t,fs:z2t},le={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(le,"IDENTITY",{get:()=>(Wt.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const Ai={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Ds={common:0,meters:1,pixels:2},xL={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},Y0={DRAW:"draw",MASK:"mask"},U2t=Object.keys(le).map(e=>"const int COORDINATE_SYSTEM_".concat(e," = ").concat(le[e],";")).join(""),G2t=Object.keys(Ai).map(e=>"const int PROJECTION_MODE_".concat(e," = ").concat(Ai[e],";")).join(""),j2t=Object.keys(Ds).map(e=>"const int UNIT_".concat(e.toUpperCase()," = ").concat(Ds[e],";")).join(""),W2t="".concat(U2t,`
`).concat(G2t,`
`).concat(j2t,`

uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;

const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0; // meters
const float GLOBE_RADIUS = 256.0;

// returns an adjustment factor for uCommonUnitsPerMeter
float project_size() {
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
    project_uPseudoMeters == false) {

    // uCommonUnitsPerMeter in low-zoom Web Mercator is non-linear
    // Adjust by 1 / cos(latitude)
    // If geometry.position (vertex in common space) is populated, use it
    // Otherwise use geometry.worldPosition (anchor in world space)
    
    if (geometry.position.w == 0.0) {
      float y = clamp(geometry.worldPosition.y, -89.9, 89.9);
      return 1.0 / cos(radians(y));
    }

    // latitude from common y: 2.0 * (atan(exp(y / TILE_SIZE * 2.0 * PI - PI)) - PI / 4.0)
    // Taylor series of 1 / cos(latitude)
    // Max error < 0.003
  
    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    float y2 = y * y;
    float y4 = y2 * y2;
    float y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}
//
// Scaling offsets - scales meters to "world distance"
// Note the scalar version of project_size is for scaling the z component only
//
float project_size(float meters) {
  return meters * project_uCommonUnitsPerMeter.z * project_size();
}

vec2 project_size(vec2 meters) {
  return meters * project_uCommonUnitsPerMeter.xy * project_size();
}

vec3 project_size(vec3 meters) {
  return meters * project_uCommonUnitsPerMeter * project_size();
}

vec4 project_size(vec4 meters) {
  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}

// Get rotation matrix that aligns the z axis with the given up vector
// Find 3 unit vectors ux, uy, uz that are perpendicular to each other and uz == up
mat3 project_get_orientation_matrix(vec3 up) {
  vec3 uz = normalize(up);
  // Tangent on XY plane
  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
  vec3 uy = cross(uz, ux);
  return mat3(ux, uy, uz);
}

bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    transform = project_get_orientation_matrix(commonPosition);
    return true;
  }
  return false;
}

//
// Projecting normal - transform deltas from current coordinate system to
// normals in the worldspace
//
vec3 project_normal(vec3 vector) {
  // Apply model matrix
  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
  mat3 rotation;
  if (project_needs_rotation(geometry.position.xyz, rotation)) {
    n = rotation * n;
  }
  return n;
}

vec4 project_offset_(vec4 offset) {
  float dy = offset.y;
  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}

//
// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]
//
vec2 project_mercator_(vec2 lnglat) {
  float x = lnglat.x;
  if (project_uWrapLongitude) {
    x = mod(x + 180., 360.0) - 180.;
  }
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

vec3 project_globe_(vec3 lnglatz) {
  float lambda = radians(lnglatz.x);
  float phi = radians(lnglatz.y);
  float cosPhi = cos(phi);
  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;

  return vec3(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}

//
// Projects positions (defined by project_uCoordinateSystem) to common space (defined by project_uProjectionMode)
//
vec4 project_position(vec4 position, vec3 position64Low) {
  vec4 position_world = project_uModelMatrix * position;

  // Work around for a Mac+NVIDIA bug https://github.com/visgl/deck.gl/issues/4145
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_mercator_(position_world.xy),
        project_size(position_world.z),
        position_world.w
      );
    }
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world.xyz += project_uCoordinateOrigin;
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
        // Too far from the projection center for offset mode to be accurate
        // Only use high parts
        return vec4(
          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
          project_size(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    // Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.
    position_world.xyz -= project_uCoordinateOrigin;
  }

  // Translation is already added to the high parts
  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_LOW);
}

vec3 project_position(vec3 position, vec3 position64Low) {
  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
  return projected_position.xyz;
}

vec3 project_position(vec3 position) {
  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

vec2 project_position(vec2 position) {
  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  return viewProjectionMatrix * position + center;
}

//
// Projects from common space coordinates to clip space.
// Uses project_uViewProjectionMatrix
//
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}

// Returns a clip space offset that corresponds to a given number of screen pixels
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
  return offset * project_uFocalDistance;
}

float project_size_to_pixel(float meters) {
  return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
  if (unit == UNIT_METERS) return project_size_to_pixel(size);
  if (unit == UNIT_COMMON) return size * project_uScale;
  // UNIT_PIXELS
  return size;
}
float project_pixel_size(float pixels) {
  return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
  return pixels / project_uScale;
}
`);function H2t(e,t){if(e===t)return!0;if(Array.isArray(e)){const r=e.length;if(!t||t.length!==r)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}return!1}function q0(e){let t={},r;return n=>{for(const i in n)if(!H2t(n[i],t[i])){r=e(n),t=n;break}return r}}const LL=[0,0,0,0],X2t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],zz=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Y2t=[0,0,0],Vz=[0,0,0],q2t=q0(J2t);function Uz(e,t,r=Vz){r.length<3&&(r=[r[0],r[1],0]);let n=r,i,o=!0;switch(t===le.LNGLAT_OFFSETS||t===le.METER_OFFSETS?i=r:i=e.isGeospatial?[Math.fround(e.longitude),Math.fround(e.latitude),0]:null,e.projectionMode){case Ai.WEB_MERCATOR:(t===le.LNGLAT||t===le.CARTESIAN)&&(i=[0,0,0],o=!1);break;case Ai.WEB_MERCATOR_AUTO_OFFSET:t===le.LNGLAT?n=i:t===le.CARTESIAN&&(n=[Math.fround(e.center[0]),Math.fround(e.center[1]),0],i=e.unprojectPosition(n),n[0]-=r[0],n[1]-=r[1],n[2]-=r[2]);break;case Ai.IDENTITY:n=e.position.map(Math.fround),n[2]=n[2]||0;break;case Ai.GLOBE:o=!1,i=null;break;default:o=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:n,offsetMode:o}}function Z2t(e,t,r){const{viewMatrixUncentered:n,projectionMatrix:i}=e;let{viewMatrix:o,viewProjectionMatrix:a}=e,s=LL,l=LL,u=e.cameraPosition;const{geospatialOrigin:c,shaderCoordinateOrigin:f,offsetMode:h}=Uz(e,t,r);return h&&(l=e.projectPosition(c||f),u=[u[0]-l[0],u[1]-l[1],u[2]-l[2]],l[3]=1,s=Af([],l,a),o=n||o,a=Hl([],i,o),a=Hl([],a,X2t)),{viewMatrix:o,viewProjectionMatrix:a,projectionCenter:s,originCommon:l,cameraPosCommon:u,shaderCoordinateOrigin:f,geospatialOrigin:c}}function K2t({viewport:e,devicePixelRatio:t=1,modelMatrix:r=null,coordinateSystem:n=le.DEFAULT,coordinateOrigin:i=Vz,autoWrapLongitude:o=!1}){n===le.DEFAULT&&(n=e.isGeospatial?le.LNGLAT:le.CARTESIAN);const a=q2t({viewport:e,devicePixelRatio:t,coordinateSystem:n,coordinateOrigin:i});return a.project_uWrapLongitude=o,a.project_uModelMatrix=r||zz,a}function J2t({viewport:e,devicePixelRatio:t,coordinateSystem:r,coordinateOrigin:n}){const{projectionCenter:i,viewProjectionMatrix:o,originCommon:a,cameraPosCommon:s,shaderCoordinateOrigin:l,geospatialOrigin:u}=Z2t(e,r,n),c=e.getDistanceScales(),f=[e.width*t,e.height*t],h=Af([],[0,0,-e.focalDistance,1],e.projectionMatrix)[3]||1,d={project_uCoordinateSystem:r,project_uProjectionMode:e.projectionMode,project_uCoordinateOrigin:l,project_uCommonOrigin:a.slice(0,3),project_uCenter:i,project_uPseudoMeters:Boolean(e._pseudoMeters),project_uViewportSize:f,project_uDevicePixelRatio:t,project_uFocalDistance:h,project_uCommonUnitsPerMeter:c.unitsPerMeter,project_uCommonUnitsPerWorldUnit:c.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:Y2t,project_uScale:e.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:o,project_uModelMatrix:zz,project_uCameraPosition:s};if(u){const p=e.getDistanceScales(u);switch(r){case le.METER_OFFSETS:d.project_uCommonUnitsPerWorldUnit=p.unitsPerMeter,d.project_uCommonUnitsPerWorldUnit2=p.unitsPerMeter2;break;case le.LNGLAT:case le.LNGLAT_OFFSETS:e._pseudoMeters||(d.project_uCommonUnitsPerMeter=p.unitsPerMeter),d.project_uCommonUnitsPerWorldUnit=p.unitsPerDegree,d.project_uCommonUnitsPerWorldUnit2=p.unitsPerDegree2;break;case le.CARTESIAN:d.project_uCommonUnitsPerWorldUnit=[1,1,p.unitsPerMeter[2]],d.project_uCommonUnitsPerWorldUnit2=[0,0,p.unitsPerMeter2[2]];break}}return d}const Q2t={};function tbt(e=Q2t){return"viewport"in e?K2t(e):{}}const dk={name:"project",dependencies:[R_t,V2t],vs:W2t,getUniforms:tbt},ebt=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,wu={name:"project32",dependencies:[dk],vs:ebt};function rbt(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function zc(e,t){const r=Af([],t,e);return fk(r,r,1/r[3]),r}function IL(e,t){const r=e%t;return r<0?t+r:r}function Q3(e,t,r){return e<t?t:e>r?r:e}function nbt(e){return Math.log(e)*Math.LOG2E}const pk=Math.log2||nbt;function Sa(e,t){if(!e)throw new Error(t||"@math.gl/web-mercator: assertion failed.")}const Ci=Math.PI,Gz=Ci/4,Oi=Ci/180,tT=180/Ci,v0=512,eT=4003e4,Av=85.051129,ibt=1.5;function obt(e){return pk(e)}function Ns(e){const[t,r]=e;Sa(Number.isFinite(t)),Sa(Number.isFinite(r)&&r>=-90&&r<=90,"invalid latitude");const n=t*Oi,i=r*Oi,o=v0*(n+Ci)/(2*Ci),a=v0*(Ci+Math.log(Math.tan(Gz+i*.5)))/(2*Ci);return[o,a]}function nf(e){const[t,r]=e,n=t/v0*(2*Ci)-Ci,i=2*(Math.atan(Math.exp(r/v0*(2*Ci)-Ci))-Gz);return[n*tT,i*tT]}function abt(e){const{latitude:t}=e;Sa(Number.isFinite(t));const r=Math.cos(t*Oi);return obt(eT*r)-9}function rT(e){const{latitude:t,longitude:r,highPrecision:n=!1}=e;Sa(Number.isFinite(t)&&Number.isFinite(r));const i=v0,o=Math.cos(t*Oi),a=i/360,s=a/o,l=i/eT/o,u={unitsPerMeter:[l,l,l],metersPerUnit:[1/l,1/l,1/l],unitsPerDegree:[a,s,l],degreesPerUnit:[1/a,1/s,1/l]};if(n){const c=Oi*Math.tan(t*Oi)/o,f=a*c/2,h=i/eT*c,d=h/s*l;u.unitsPerDegree2=[0,f,h],u.unitsPerMeter2=[d,0,d]}return u}function jz(e,t){const[r,n,i]=e,[o,a,s]=t,{unitsPerMeter:l,unitsPerMeter2:u}=rT({longitude:r,latitude:n,highPrecision:!0}),c=Ns(e);c[0]+=o*(l[0]+u[0]*a),c[1]+=a*(l[1]+u[1]*a);const f=nf(c),h=(i||0)+(s||0);return Number.isFinite(i)||Number.isFinite(s)?[f[0],f[1],h]:f}function sbt(e){const{height:t,pitch:r,bearing:n,altitude:i,scale:o,center:a}=e,s=rbt();u1(s,s,[0,0,-i]),Lz(s,s,-r*Oi),Iz(s,s,n*Oi);const l=o/t;return ck(s,s,[l,l,l]),a&&u1(s,s,Z_t([],a)),s}function lbt(e){const{width:t,height:r,altitude:n,pitch:i=0,offset:o,center:a,scale:s,nearZMultiplier:l=1,farZMultiplier:u=1}=e;let{fovy:c=f1(ibt)}=e;n!==void 0&&(c=f1(n));const f=c*Oi,h=i*Oi,d=Wz(c);let p=d;a&&(p+=a[2]*s/Math.cos(h)/r);const v=f*(.5+(o?o[1]:0)/r),g=Math.sin(v)*p/Math.sin(Q3(Math.PI/2-h-v,.01,Math.PI-.01)),m=Math.sin(h)*g+p,_=p*10,y=Math.min(m*u,_);return{fov:f,aspect:t/r,focalDistance:d,near:l,far:y}}function f1(e){return 2*Math.atan(.5/e)*tT}function Wz(e){return .5/Math.tan(.5*e*Oi)}function Hz(e,t){const[r,n,i=0]=e;return Sa(Number.isFinite(r)&&Number.isFinite(n)&&Number.isFinite(i)),zc(t,[r,n,i,1])}function C_(e,t,r=0){const[n,i,o]=e;if(Sa(Number.isFinite(n)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(o))return zc(t,[n,i,o,1]);const a=zc(t,[n,i,0,1]),s=zc(t,[n,i,1,1]),l=a[2],u=s[2],c=l===u?0:((r||0)-l)/(u-l);return wz([],a,s,c)}function Xz(e){const{width:t,height:r,bounds:n,minExtent:i=0,maxZoom:o=24,offset:a=[0,0]}=e,[[s,l],[u,c]]=n,f=ubt(e.padding),h=Ns([s,Q3(c,-Av,Av)]),d=Ns([u,Q3(l,-Av,Av)]),p=[Math.max(Math.abs(d[0]-h[0]),i),Math.max(Math.abs(d[1]-h[1]),i)],v=[t-f.left-f.right-Math.abs(a[0])*2,r-f.top-f.bottom-Math.abs(a[1])*2];Sa(v[0]>0&&v[1]>0);const g=v[0]/p[0],m=v[1]/p[1],_=(f.right-f.left)/2/g,y=(f.top-f.bottom)/2/m,w=[(d[0]+h[0])/2+_,(d[1]+h[1])/2+y],T=nf(w),S=Math.min(o,pk(Math.abs(Math.min(g,m))));return Sa(Number.isFinite(S)),{longitude:T[0],latitude:T[1],zoom:S}}function ubt(e=0){return typeof e=="number"?{top:e,bottom:e,left:e,right:e}:(Sa(Number.isFinite(e.top)&&Number.isFinite(e.bottom)&&Number.isFinite(e.left)&&Number.isFinite(e.right)),e)}const OL=Math.PI/180;function cbt(e,t=0){const{width:r,height:n,unproject:i}=e,o={targetZ:t},a=i([0,n],o),s=i([r,n],o);let l,u;const c=e.fovy?.5*e.fovy*OL:Math.atan(.5/e.altitude),f=(90-e.pitch)*OL;return c>f-.01?(l=RL(e,0,t),u=RL(e,r,t)):(l=i([0,0],o),u=i([r,0],o)),[a,s,u,l]}function RL(e,t,r){const{pixelUnprojectionMatrix:n}=e,i=zc(n,[t,0,1,1]),o=zc(n,[t,e.height,1,1]),s=(r*e.distanceScales.unitsPerMeter[2]-i[2])/(o[2]-i[2]),l=wz([],i,o,s),u=nf(l);return u.push(r),u}const DL=512;function fbt(e){const{width:t,height:r,pitch:n=0}=e;let{longitude:i,latitude:o,zoom:a,bearing:s=0}=e;(i<-180||i>180)&&(i=IL(i+180,360)-180),(s<-180||s>180)&&(s=IL(s+180,360)-180);const l=pk(r/DL);if(a<=l)a=l,o=0;else{const u=r/2/Math.pow(2,a),c=nf([0,u])[1];if(o<c)o=c;else{const f=nf([0,DL-u])[1];o>f&&(o=f)}}return{width:t,height:r,longitude:i,latitude:o,zoom:a,pitch:n,bearing:s}}const hbt=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,dbt=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture2D(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,pbt=q0(ybt),vbt=q0(bbt),gbt=[0,0,0,1],mbt=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function _bt(e,t){const[r,n,i]=e,o=C_([r,n,i],t);return Number.isFinite(i)?o:[o[0],o[1],0]}function ybt({viewport:e,center:t}){return new jr(e.viewProjectionMatrix).invert().transform(t)}function bbt({viewport:e,shadowMatrices:t}){const r=[],n=e.pixelUnprojectionMatrix,i=e.isGeospatial?void 0:1,o=[[0,0,i],[e.width,0,i],[0,e.height,i],[e.width,e.height,i],[0,0,-1],[e.width,0,-1],[0,e.height,-1],[e.width,e.height,-1]].map(a=>_bt(a,n));for(const a of t){const s=a.clone().translate(new bt(e.center).negate()),l=o.map(c=>s.transform(c)),u=new jr().ortho({left:Math.min(...l.map(c=>c[0])),right:Math.max(...l.map(c=>c[0])),bottom:Math.min(...l.map(c=>c[1])),top:Math.max(...l.map(c=>c[1])),near:Math.min(...l.map(c=>-c[2])),far:Math.max(...l.map(c=>-c[2]))});r.push(u.multiplyRight(a))}return r}function wbt(e,t){const{shadowEnabled:r=!0}=e;if(!r||!e.shadowMatrices||!e.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const n={shadow_uDrawShadowMap:Boolean(e.drawToShadowMap),shadow_uUseShadowMap:e.shadowMaps?e.shadowMaps.length>0:!1,shadow_uColor:e.shadowColor||gbt,shadow_uLightId:e.shadowLightId||0,shadow_uLightCount:e.shadowMatrices.length},i=pbt({viewport:e.viewport,center:t.project_uCenter}),o=[],a=vbt({shadowMatrices:e.shadowMatrices,viewport:e.viewport}).slice();for(let s=0;s<e.shadowMatrices.length;s++){const l=a[s],u=l.clone().translate(new bt(e.viewport.center).negate());t.project_uCoordinateSystem===le.LNGLAT&&t.project_uProjectionMode===Ai.WEB_MERCATOR?(a[s]=u,o[s]=i):(a[s]=l.clone().multiplyRight(mbt),o[s]=u.transform(i))}for(let s=0;s<a.length;s++)n["shadow_uViewProjectionMatrices[".concat(s,"]")]=a[s],n["shadow_uProjectCenters[".concat(s,"]")]=o[s],e.shadowMaps&&e.shadowMaps.length>0?n["shadow_uShadowMap".concat(s)]=e.shadowMaps[s]:n["shadow_uShadowMap".concat(s)]=e.dummyShadowMap;return n}const Eb={name:"shadow",dependencies:[dk],vs:hbt,fs:dbt,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(e={},t={})=>"viewport"in e&&(e.drawToShadowMap||e.shadowMaps&&e.shadowMaps.length>0)?wbt(e,t):{}},Su={inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}},...u2t},Sbt=[dk],Tbt=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function Pbt(e){const t=X0.getDefaultProgramManager(e);for(const r of Sbt)t.addDefaultModule(r);for(const r of Tbt)t.addShaderHook(r);return t}const Ebt=[255,255,255],kbt=1;let Abt=0;class Cbt{constructor(t={}){E(this,"id",void 0),E(this,"color",void 0),E(this,"intensity",void 0),E(this,"type","ambient");const{color:r=Ebt}=t,{intensity:n=kbt}=t;this.id=t.id||"ambient-".concat(Abt++),this.color=r,this.intensity=n}}const Mbt=[255,255,255],xbt=1,Lbt=[0,0,-1];let Ibt=0;class NL{constructor(t={}){E(this,"id",void 0),E(this,"color",void 0),E(this,"intensity",void 0),E(this,"type","directional"),E(this,"direction",void 0),E(this,"shadow",void 0);const{color:r=Mbt}=t,{intensity:n=xbt}=t,{direction:i=Lbt}=t,{_shadow:o=!1}=t;this.id=t.id||"directional-".concat(Ibt++),this.color=r,this.intensity=n,this.type="directional",this.direction=new bt(i).normalize().toArray(),this.shadow=o}getProjectedLight(t){return this}}class Obt{constructor(t,r={id:"pass"}){E(this,"id",void 0),E(this,"gl",void 0),E(this,"props",void 0);const{id:n}=r;this.id=n,this.gl=t,this.props={...r}}setProps(t){Object.assign(this.props,t)}render(t){}cleanup(){}}class M_ extends Obt{constructor(...t){super(...t),E(this,"_lastRenderIndex",-1)}render(t){const r=this.gl;return ba(r,{framebuffer:t.target}),this._drawLayers(t)}_drawLayers(t){const{target:r,moduleParameters:n,viewports:i,views:o,onViewportActive:a,clearStack:s=!0,clearCanvas:l=!0}=t;t.pass=t.pass||"unknown";const u=this.gl;l&&Dbt(u),s&&(this._lastRenderIndex=-1);const c=[];for(const f of i){const h=o&&o[f.id];a(f);const d=this._getDrawLayerParams(f,t),p=f.subViewports||[f];for(const v of p){const g=this._drawLayersInViewport(u,{target:r,moduleParameters:n,viewport:v,view:h,pass:t.pass,layers:t.layers},d);c.push(g)}}return c}_getDrawLayerParams(t,{layers:r,pass:n,layerFilter:i,cullRect:o,effects:a,moduleParameters:s}){const l=[],u=Yz(this._lastRenderIndex+1),c={layer:r[0],viewport:t,isPicking:n.startsWith("picking"),renderPass:n,cullRect:o},f={};for(let h=0;h<r.length;h++){const d=r[h],p=this._shouldDrawLayer(d,c,i,f),v={shouldDrawLayer:p};p&&(v.layerRenderIndex=u(d,p),v.moduleParameters=this._getModuleParameters(d,a,n,s),v.layerParameters=this.getLayerParameters(d,h,t)),l[h]=v}return l}_drawLayersInViewport(t,{layers:r,moduleParameters:n,pass:i,target:o,viewport:a,view:s},l){const u=Rbt(t,{moduleParameters:n,target:o,viewport:a});if(s&&s.props.clear){const f=s.props.clear===!0?{color:!0,depth:!0}:s.props.clear;ni(t,{scissorTest:!0,scissor:u},()=>rk(t,f))}const c={totalCount:r.length,visibleCount:0,compositeCount:0,pickableCount:0};ba(t,{viewport:u});for(let f=0;f<r.length;f++){const h=r[f],{shouldDrawLayer:d,layerRenderIndex:p,moduleParameters:v,layerParameters:g}=l[f];if(d&&h.props.pickable&&c.pickableCount++,h.isComposite)c.compositeCount++;else if(d){c.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,p),v.viewport=a;try{h._drawLayer({moduleParameters:v,uniforms:{layerIndex:p},parameters:g})}catch(m){h.raiseError(m,"drawing ".concat(h," to ").concat(i))}}}return c}shouldDrawLayer(t){return!0}getModuleParameters(t,r){return null}getLayerParameters(t,r,n){return t.props.parameters}_shouldDrawLayer(t,r,n,i){if(!(t.props.visible&&this.shouldDrawLayer(t)))return!1;r.layer=t;let a=t.parent;for(;a;){if(!a.props.visible||!a.filterSubLayer(r))return!1;r.layer=a,a=a.parent}if(n){const s=r.layer.id;if(s in i||(i[s]=n(r)),!i[s])return!1}return t.activateViewport(r.viewport),!0}_getModuleParameters(t,r,n,i){var o;const a=Object.assign(Object.create(((o=t.internalState)===null||o===void 0?void 0:o.propsInTransition)||t.props),{autoWrapLongitude:t.wrapLongitude,viewport:t.context.viewport,mousePosition:t.context.mousePosition,pickingActive:0,devicePixelRatio:tf(this.gl)});if(r)for(const l of r){var s;Object.assign(a,(s=l.getModuleParameters)===null||s===void 0?void 0:s.call(l,t))}return Object.assign(a,this.getModuleParameters(t,r),i)}}function Yz(e=0,t={}){const r={},n=(i,o)=>{const a=i.props._offset,s=i.id,l=i.parent&&i.parent.id;let u;if(l&&!(l in t)&&n(i.parent,!1),l in r){const c=r[l]=r[l]||Yz(t[l],t);u=c(i,o),r[s]=c}else Number.isFinite(a)?(u=a+(t[l]||0),r[s]=null):u=e;return o&&u>=e&&(e=u+1),t[s]=u,u};return n}function Rbt(e,{moduleParameters:t,target:r,viewport:n}){const i=r&&r.id!=="default-framebuffer",o=t&&t.devicePixelRatio||tf(e),a=i?r.height:e.drawingBufferHeight,s=n;return[s.x*o,a-(s.y+s.height)*o,s.width*o,s.height*o]}function Dbt(e){const t=e.drawingBufferWidth,r=e.drawingBufferHeight;ba(e,{viewport:[0,0,t,r]}),e.clear(16640)}class Nbt extends M_{constructor(t,r){super(t,r),E(this,"shadowMap",void 0),E(this,"depthBuffer",void 0),E(this,"fbo",void 0),this.shadowMap=new yn(t,{width:1,height:1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.depthBuffer=new Pc(t,{format:33189,width:1,height:1}),this.fbo=new nr(t,{id:"shadowmap",width:1,height:1,attachments:{[36064]:this.shadowMap,[36096]:this.depthBuffer}})}render(t){const r=this.fbo;ni(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const n=t.viewports[0],i=tf(this.gl),o=n.width*i,a=n.height*i;(o!==r.width||a!==r.height)&&r.resize({width:o,height:a}),super.render({...t,target:r,pass:"shadow"})})}shouldDrawLayer(t){return t.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const Fbt={color:[255,255,255],intensity:1},FL=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],Bbt=[0,0,0,200/255];class qz{constructor(t={}){E(this,"id","lighting-effect"),E(this,"props",null),E(this,"shadowColor",Bbt),E(this,"shadow",void 0),E(this,"ambientLight",null),E(this,"directionalLights",[]),E(this,"pointLights",[]),E(this,"shadowPasses",[]),E(this,"shadowMaps",[]),E(this,"dummyShadowMap",null),E(this,"programManager",void 0),E(this,"shadowMatrices",void 0);for(const r in t){const n=t[r];switch(n.type){case"ambient":this.ambientLight=n;break;case"directional":this.directionalLights.push(n);break;case"point":this.pointLights.push(n);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(r=>r.shadow)}preRender(t,{layers:r,layerFilter:n,viewports:i,onViewportActive:o,views:a}){if(!!this.shadow){this.shadowMatrices=this._calculateMatrices(),this.shadowPasses.length===0&&this._createShadowPasses(t),this.programManager||(this.programManager=X0.getDefaultProgramManager(t),Eb&&this.programManager.addDefaultModule(Eb)),this.dummyShadowMap||(this.dummyShadowMap=new yn(t,{width:1,height:1}));for(let s=0;s<this.shadowPasses.length;s++)this.shadowPasses[s].render({layers:r,layerFilter:n,viewports:i,onViewportActive:o,views:a,moduleParameters:{shadowLightId:s,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(t){const r=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return r.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(n=>n.getProjectedLight({layer:t})),pointLights:this.pointLights.map(n=>n.getProjectedLight({layer:t}))},r}cleanup(){for(const t of this.shadowPasses)t.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(Eb),this.programManager=null)}_calculateMatrices(){const t=[];for(const r of this.directionalLights){const n=new jr().lookAt({eye:new bt(r.direction).negate()});t.push(n)}return t}_createShadowPasses(t){for(let r=0;r<this.directionalLights.length;r++){const n=new Nbt(t);this.shadowPasses[r]=n,this.shadowMaps[r]=n.shadowMap}}_applyDefaultLights(){const{ambientLight:t,pointLights:r,directionalLights:n}=this;!t&&r.length===0&&n.length===0&&(this.ambientLight=new Cbt(Fbt),this.directionalLights.push(new NL(FL[0]),new NL(FL[1])))}}class $bt{constructor(t={}){E(this,"_pool",[]),E(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(t)}setOptions(t){Object.assign(this.opts,t)}allocate(t,r,{size:n=1,type:i,padding:o=0,copy:a=!1,initialize:s=!1,maxCount:l}){const u=i||t&&t.constructor||Float32Array,c=r*n+o;if(ArrayBuffer.isView(t)){if(c<=t.length)return t;if(c*t.BYTES_PER_ELEMENT<=t.buffer.byteLength)return new u(t.buffer,0,c)}let f=1/0;l&&(f=l*n+o);const h=this._allocate(u,c,s,f);return t&&a?h.set(t):s||h.fill(0,0,4),this._release(t),h}release(t){this._release(t)}_allocate(t,r,n,i){let o=Math.max(Math.ceil(r*this.opts.overAlloc),1);o>i&&(o=i);const a=this._pool,s=t.BYTES_PER_ELEMENT*o,l=a.findIndex(u=>u.byteLength>=s);if(l>=0){const u=new t(a.splice(l,1)[0],0,o);return n&&u.fill(0),u}return new t(o)}_release(t){if(!ArrayBuffer.isView(t))return;const r=this._pool,{buffer:n}=t,{byteLength:i}=n,o=r.findIndex(a=>a.byteLength>=i);o<0?r.push(n):(o>0||r.length<this.opts.poolSize)&&r.splice(o,0,n),r.length>this.opts.poolSize&&r.shift()}}const of=new $bt;function nd(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function zbt(e,t){const r=e%t;return r<0?t+r:r}function Vbt(e){return[e[12],e[13],e[14]]}function Ubt(e){return{left:tc(e[3]+e[0],e[7]+e[4],e[11]+e[8],e[15]+e[12]),right:tc(e[3]-e[0],e[7]-e[4],e[11]-e[8],e[15]-e[12]),bottom:tc(e[3]+e[1],e[7]+e[5],e[11]+e[9],e[15]+e[13]),top:tc(e[3]-e[1],e[7]-e[5],e[11]-e[9],e[15]-e[13]),near:tc(e[3]+e[2],e[7]+e[6],e[11]+e[10],e[15]+e[14]),far:tc(e[3]-e[2],e[7]-e[6],e[11]-e[10],e[15]-e[14])}}const BL=new bt;function tc(e,t,r,n){BL.set(e,t,r);const i=BL.len();return{distance:n/i,normal:new bt(-e/i,-t/i,-r/i)}}function Gbt(e){return e-Math.fround(e)}let Ph;function kb(e,t){const{size:r=1,startIndex:n=0}=t,i=t.endIndex!==void 0?t.endIndex:e.length,o=(i-n)/r;Ph=of.allocate(Ph,o,{type:Float32Array,size:r*2});let a=n,s=0;for(;a<i;){for(let l=0;l<r;l++){const u=e[a++];Ph[s+l]=u,Ph[s+l+r]=Gbt(u)}s+=r*2}return Ph.subarray(0,o*r*2)}const jbt=Math.PI/180,Wbt=nd(),$L=[0,0,0],Hbt={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function Xbt({width:e,height:t,orthographic:r,fovyRadians:n,focalDistance:i,padding:o,near:a,far:s}){const l=e/t,u=r?new jr().orthographic({fovy:n,aspect:l,focalDistance:i,near:a,far:s}):new jr().perspective({fovy:n,aspect:l,near:a,far:s});if(o){const{left:c=0,right:f=0,top:h=0,bottom:d=0}=o,p=Tr((c+e-f)/2,0,e)-e/2,v=Tr((h+t-d)/2,0,t)-t/2;u[8]-=p*2/e,u[9]+=v*2/t}return u}class Fs{constructor(t={}){E(this,"id",void 0),E(this,"x",void 0),E(this,"y",void 0),E(this,"width",void 0),E(this,"height",void 0),E(this,"isGeospatial",void 0),E(this,"zoom",void 0),E(this,"focalDistance",void 0),E(this,"position",void 0),E(this,"modelMatrix",void 0),E(this,"distanceScales",void 0),E(this,"scale",void 0),E(this,"center",void 0),E(this,"cameraPosition",void 0),E(this,"projectionMatrix",void 0),E(this,"viewMatrix",void 0),E(this,"viewMatrixUncentered",void 0),E(this,"viewMatrixInverse",void 0),E(this,"viewProjectionMatrix",void 0),E(this,"pixelProjectionMatrix",void 0),E(this,"pixelUnprojectionMatrix",void 0),E(this,"resolution",void 0),E(this,"_frustumPlanes",{}),this.id=t.id||this.constructor.displayName||"viewport",this.x=t.x||0,this.y=t.y||0,this.width=t.width||1,this.height=t.height||1,this.zoom=t.zoom||0,this.distanceScales=t.distanceScales||Hbt,this.focalDistance=t.focalDistance||1,this.position=t.position||$L,this.modelMatrix=t.modelMatrix||null;const{longitude:r,latitude:n}=t;this.isGeospatial=Number.isFinite(n)&&Number.isFinite(r),this._initProps(t),this._initMatrices(t),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Ai.WEB_MERCATOR:Ai.WEB_MERCATOR_AUTO_OFFSET:Ai.IDENTITY}equals(t){return t instanceof Fs?this===t?!0:t.width===this.width&&t.height===this.height&&t.scale===this.scale&&Ao(t.projectionMatrix,this.projectionMatrix)&&Ao(t.viewMatrix,this.viewMatrix):!1}project(t,{topLeft:r=!0}={}){const n=this.projectPosition(t),i=Hz(n,this.pixelProjectionMatrix),[o,a]=i,s=r?a:this.height-a;return t.length===2?[o,s]:[o,s,i[2]]}unproject(t,{topLeft:r=!0,targetZ:n}={}){const[i,o,a]=t,s=r?o:this.height-o,l=n&&n*this.distanceScales.unitsPerMeter[2],u=C_([i,s,a],this.pixelUnprojectionMatrix,l),[c,f,h]=this.unprojectPosition(u);return Number.isFinite(a)?[c,f,h]:Number.isFinite(n)?[c,f,n]:[c,f]}projectPosition(t){const[r,n]=this.projectFlat(t),i=(t[2]||0)*this.distanceScales.unitsPerMeter[2];return[r,n,i]}unprojectPosition(t){const[r,n]=this.unprojectFlat(t),i=(t[2]||0)*this.distanceScales.metersPerUnit[2];return[r,n,i]}projectFlat(t){if(this.isGeospatial){const r=Ns(t);return r[1]=Tr(r[1],-318,830),r}return t}unprojectFlat(t){return this.isGeospatial?nf(t):t}getBounds(t={}){const r={targetZ:t.z||0},n=this.unproject([0,0],r),i=this.unproject([this.width,0],r),o=this.unproject([0,this.height],r),a=this.unproject([this.width,this.height],r);return[Math.min(n[0],i[0],o[0],a[0]),Math.min(n[1],i[1],o[1],a[1]),Math.max(n[0],i[0],o[0],a[0]),Math.max(n[1],i[1],o[1],a[1])]}getDistanceScales(t){return t?rT({longitude:t[0],latitude:t[1],highPrecision:!0}):this.distanceScales}containsPixel({x:t,y:r,width:n=1,height:i=1}){return t<this.x+this.width&&this.x<t+n&&r<this.y+this.height&&this.y<r+i}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,Ubt(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(t,r){return null}_initProps(t){const r=t.longitude,n=t.latitude;this.isGeospatial&&(Number.isFinite(t.zoom)||(this.zoom=abt({latitude:n})+Math.log2(this.focalDistance)),this.distanceScales=t.distanceScales||rT({latitude:n,longitude:r}));const i=Math.pow(2,this.zoom);this.scale=i;const{position:o,modelMatrix:a}=t;let s=$L;if(o&&(s=a?new jr(a).transformAsVector(o,[]):o),this.isGeospatial){const l=this.projectPosition([r,n,0]);this.center=new bt(s).scale(this.distanceScales.unitsPerMeter).add(l)}else this.center=this.projectPosition(s)}_initMatrices(t){const{viewMatrix:r=Wbt,projectionMatrix:n=null,orthographic:i=!1,fovyRadians:o,fovy:a=75,near:s=.1,far:l=1e3,padding:u=null,focalDistance:c=1}=t;this.viewMatrixUncentered=r,this.viewMatrix=new jr().multiplyRight(r).translate(new bt(this.center).negate()),this.projectionMatrix=n||Xbt({width:this.width,height:this.height,orthographic:i,fovyRadians:o||a*jbt,focalDistance:c,padding:u,near:s,far:l});const f=nd();Hl(f,f,this.projectionMatrix),Hl(f,f,this.viewMatrix),this.viewProjectionMatrix=f,this.viewMatrixInverse=K3([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=Vbt(this.viewMatrixInverse);const h=nd(),d=nd();ck(h,h,[this.width/2,-this.height/2,1]),u1(h,h,[1,-1,0]),Hl(d,h,this.viewProjectionMatrix),this.pixelProjectionMatrix=d,this.pixelUnprojectionMatrix=K3(nd(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||Wt.warn("Pixel project matrix not invertible")()}}E(Fs,"displayName","Viewport");const Ybt=512,qbt=4003e4,Zbt=Math.PI/180;function zL(e){const t=Math.cos(e*Zbt);return Ybt/qbt/t}class Io extends Fs{constructor(t={}){const{latitude:r=0,longitude:n=0,zoom:i=0,pitch:o=0,bearing:a=0,nearZMultiplier:s=.1,farZMultiplier:l=1.01,orthographic:u=!1,projectionMatrix:c,repeat:f=!1,worldOffset:h=0,legacyMeterSizes:d=!1}=t;let{width:p,height:v,altitude:g=1.5}=t;const m=Math.pow(2,i);p=p||1,v=v||1;let _,y=null;c?(g=c[5]/2,_=f1(g)):(t.fovy?(_=t.fovy,g=Wz(_)):_=f1(g),y=lbt({width:p,height:v,pitch:o,fovy:_,nearZMultiplier:s,farZMultiplier:l}));let w=sbt({height:v,pitch:o,bearing:a,scale:m,altitude:g});h&&(w=new jr().translate([512*h,0,0]).multiplyLeft(w)),super({...t,width:p,height:v,viewMatrix:w,longitude:n,latitude:r,zoom:i,...y,fovy:_,focalDistance:g}),E(this,"longitude",void 0),E(this,"latitude",void 0),E(this,"pitch",void 0),E(this,"bearing",void 0),E(this,"altitude",void 0),E(this,"fovy",void 0),E(this,"orthographic",void 0),E(this,"_subViewports",void 0),E(this,"_pseudoMeters",void 0),this.latitude=r,this.longitude=n,this.zoom=i,this.pitch=o,this.bearing=a,this.altitude=g,this.fovy=_,this.orthographic=u,this._subViewports=f?[]:null,this._pseudoMeters=d,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const t=this.getBounds(),r=Math.floor((t[0]+180)/360),n=Math.ceil((t[2]-180)/360);for(let i=r;i<=n;i++){const o=i?new Io({...this,worldOffset:i}):this;this._subViewports.push(o)}}return this._subViewports}projectPosition(t){if(this._pseudoMeters)return super.projectPosition(t);const[r,n]=this.projectFlat(t),i=(t[2]||0)*zL(t[1]);return[r,n,i]}unprojectPosition(t){if(this._pseudoMeters)return super.unprojectPosition(t);const[r,n]=this.unprojectFlat(t),i=(t[2]||0)/zL(n);return[r,n,i]}addMetersToLngLat(t,r){return jz(t,r)}panByPosition(t,r){const n=C_(r,this.pixelUnprojectionMatrix),i=this.projectFlat(t),o=l1([],i,bz([],n)),a=l1([],this.center,o),[s,l]=this.unprojectFlat(a);return{longitude:s,latitude:l}}getBounds(t={}){const r=cbt(this,t.z||0);return[Math.min(r[0][0],r[1][0],r[2][0],r[3][0]),Math.min(r[0][1],r[1][1],r[2][1],r[3][1]),Math.max(r[0][0],r[1][0],r[2][0],r[3][0]),Math.max(r[0][1],r[1][1],r[2][1],r[3][1])]}fitBounds(t,r={}){const{width:n,height:i}=this,{longitude:o,latitude:a,zoom:s}=Xz({width:n,height:i,bounds:t,...r});return new Io({width:n,height:i,longitude:o,latitude:a,zoom:s})}}E(Io,"displayName","WebMercatorViewport");function Ab(e,t,r=!1){const n=t.projectPosition(e);if(r&&t instanceof Io){const[i,o,a=0]=e,s=t.getDistanceScales([i,o]);n[2]=a*s.unitsPerMeter[2]}return n}function Kbt(e){const{viewport:t,modelMatrix:r,coordinateOrigin:n}=e;let{coordinateSystem:i,fromCoordinateSystem:o,fromCoordinateOrigin:a}=e;return i===le.DEFAULT&&(i=t.isGeospatial?le.LNGLAT:le.CARTESIAN),o===void 0&&(o=i),a===void 0&&(a=n),{viewport:t,coordinateSystem:i,coordinateOrigin:n,modelMatrix:r,fromCoordinateSystem:o,fromCoordinateOrigin:a}}function Zz(e,{viewport:t,modelMatrix:r,coordinateSystem:n,coordinateOrigin:i,offsetMode:o}){let[a,s,l=0]=e;switch(r&&([a,s,l]=Af([],[a,s,l,1],r)),n){case le.LNGLAT:return Ab([a,s,l],t,o);case le.LNGLAT_OFFSETS:return Ab([a+i[0],s+i[1],l+(i[2]||0)],t,o);case le.METER_OFFSETS:return Ab(jz(i,[a,s,l]),t,o);case le.CARTESIAN:default:return t.isGeospatial?[a+i[0],s+i[1],l+i[2]]:t.projectPosition([a,s,l])}}function Jbt(e,t){const{viewport:r,coordinateSystem:n,coordinateOrigin:i,modelMatrix:o,fromCoordinateSystem:a,fromCoordinateOrigin:s}=Kbt(t),{geospatialOrigin:l,shaderCoordinateOrigin:u,offsetMode:c}=Uz(r,n,i),f=Zz(e,{viewport:r,modelMatrix:o,coordinateSystem:a,coordinateOrigin:s,offsetMode:c});if(c){const h=r.projectPosition(l||u);Cz(f,f,h)}return f}const mc={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},h1=Symbol.for("component"),Vc=Symbol.for("asyncPropDefaults"),au=Symbol.for("asyncPropOriginal"),ms=Symbol.for("asyncPropResolved");function x_(e,t=()=>!0){return Array.isArray(e)?Kz(e,t,[]):t(e)?[e]:[]}function Kz(e,t,r){let n=-1;for(;++n<e.length;){const i=e[n];Array.isArray(i)?Kz(i,t,r):t(i)&&r.push(i)}return r}function Qbt({target:e,source:t,start:r=0,count:n=1}){const i=t.length,o=n*i;let a=0;for(let s=r;a<i;a++)e[s++]=t[a];for(;a<o;)a<o-a?(e.copyWithin(r+a,r,r+a),a*=2):(e.copyWithin(r+a,r,r+o-a),a=o);return e}class twt{constructor(t,r,n){E(this,"id",void 0),E(this,"context",void 0),E(this,"isLoaded",void 0),E(this,"persistent",void 0),E(this,"_loadCount",0),E(this,"_subscribers",new Set),E(this,"_data",void 0),E(this,"_loader",void 0),E(this,"_error",void 0),E(this,"_content",void 0),this.id=t,this.context=n,this.setData(r)}subscribe(t){this._subscribers.add(t)}unsubscribe(t){this._subscribers.delete(t)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(t,r){if(t===this._data&&!r)return;this._data=t;const n=++this._loadCount;let i=t;typeof t=="string"&&(i=o1(t)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(o=>{this._loadCount===n&&(this.isLoaded=!0,this._error=void 0,this._content=o)}).catch(o=>{this._loadCount===n&&(this.isLoaded=!0,this._error=o||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=t);for(const o of this._subscribers)o.onChange(this.getData())}}class ewt{constructor({gl:t,protocol:r}){E(this,"protocol",void 0),E(this,"_context",void 0),E(this,"_resources",void 0),E(this,"_consumers",void 0),E(this,"_pruneRequest",void 0),this.protocol=r||"resource://",this._context={gl:t,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(t){return t.startsWith(this.protocol)?!0:t in this._resources}add({resourceId:t,data:r,forceUpdate:n=!1,persistent:i=!0}){let o=this._resources[t];o?o.setData(r,n):(o=new twt(t,r,this._context),this._resources[t]=o),o.persistent=i}remove(t){const r=this._resources[t];r&&(r.delete(),delete this._resources[t])}unsubscribe({consumerId:t}){const r=this._consumers[t];if(r){for(const n in r){const i=r[n],o=this._resources[i.resourceId];o&&o.unsubscribe(i)}delete this._consumers[t],this.prune()}}subscribe({resourceId:t,onChange:r,consumerId:n,requestId:i="default"}){const{_resources:o,protocol:a}=this;t.startsWith(a)&&(t=t.replace(a,""),o[t]||this.add({resourceId:t,data:null,persistent:!1}));const s=o[t];if(this._track(n,i,s,r),s)return s.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const t in this._resources)this._resources[t].delete()}_track(t,r,n,i){const o=this._consumers,a=o[t]=o[t]||{},s=a[r]||{},l=s.resourceId&&this._resources[s.resourceId];l&&(l.unsubscribe(s),this.prune()),n&&(a[r]=s,s.onChange=i,s.resourceId=n.id,n.subscribe(s))}_prune(){this._pruneRequest=null;for(const t of Object.keys(this._resources)){const r=this._resources[t];!r.persistent&&!r.inUse()&&(r.delete(),delete this._resources[t])}}}const rwt="layerManager.setLayers",nwt="layerManager.activateViewport";class iwt{constructor(t,{deck:r,stats:n,viewport:i,timeline:o}={}){E(this,"layers",void 0),E(this,"context",void 0),E(this,"resourceManager",void 0),E(this,"_lastRenderedLayers",[]),E(this,"_needsRedraw",!1),E(this,"_needsUpdate",!1),E(this,"_nextLayers",null),E(this,"_debug",!1),E(this,"activateViewport",a=>{$r(nwt,this,a),a&&(this.context.viewport=a)}),this.layers=[],this.resourceManager=new ewt({gl:t,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:t,deck:r,programManager:t&&Pbt(t),stats:n||new T_({id:"deck.gl"}),viewport:i||new Fs({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:o||new Bz,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const t of this.layers)this._finalizeLayer(t)}needsRedraw(t={clearRedrawFlags:!1}){let r=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);for(const n of this.layers){const i=n.getNeedsRedraw(t);r=r||i}return r}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(t){this._needsRedraw=this._needsRedraw||t}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t}getLayers({layerIds:t}={}){return t?this.layers.filter(r=>t.find(n=>r.id.indexOf(n)===0)):this.layers}setProps(t){"debug"in t&&(this._debug=t.debug),"userData"in t&&(this.context.userData=t.userData),"layers"in t&&(this._nextLayers=t.layers),"onError"in t&&(this.context.onError=t.onError)}setLayers(t,r){$r(rwt,this,r,t),this._lastRenderedLayers=t;const n=x_(t,Boolean);for(const i of n)i.context=this.context;this._updateLayers(this.layers,n)}updateLayers(){const t=this.needsUpdate();t&&(this.setNeedsRedraw("updating layers: ".concat(t)),this.setLayers(this._nextLayers||this._lastRenderedLayers,t)),this._nextLayers=null}_handleError(t,r,n){n.raiseError(r,"".concat(t," of ").concat(n))}_updateLayers(t,r){const n={};for(const a of t)n[a.id]?Wt.warn("Multiple old layers with same id ".concat(a.id))():n[a.id]=a;const i=[];this._updateSublayersRecursively(r,n,i),this._finalizeOldLayers(n);let o=!1;for(const a of i)if(a.hasUniformTransition()){o="Uniform transition in ".concat(a);break}this._needsUpdate=o,this.layers=i}_updateSublayersRecursively(t,r,n){for(const i of t){i.context=this.context;const o=r[i.id];o===null&&Wt.warn("Multiple new layers with same id ".concat(i.id))(),r[i.id]=null;let a=null;try{this._debug&&o!==i&&i.validateProps(),o?(this._transferLayerState(o,i),this._updateLayer(i)):this._initializeLayer(i),n.push(i),a=i.isComposite?i.getSubLayers():null}catch(s){this._handleError("matching",s,i)}a&&this._updateSublayersRecursively(a,r,n)}}_finalizeOldLayers(t){for(const r in t){const n=t[r];n&&this._finalizeLayer(n)}}_initializeLayer(t){try{t._initialize(),t.lifecycle=mc.INITIALIZED}catch(r){this._handleError("initialization",r,t)}}_transferLayerState(t,r){r._transferState(t),r.lifecycle=mc.MATCHED,r!==t&&(t.lifecycle=mc.AWAITING_GC)}_updateLayer(t){try{t._update()}catch(r){this._handleError("update",r,t)}}_finalizeLayer(t){this._needsRedraw=this._needsRedraw||"finalized ".concat(t),t.lifecycle=mc.AWAITING_FINALIZATION;try{t._finalize(),t.lifecycle=mc.FINALIZED}catch(r){this._handleError("finalization",r,t)}}}function Cf(e,t){if(e===t)return!0;if(!e||!t)return!1;for(const r in e){const n=e[r],i=t[r];if(!(n===i||Array.isArray(n)&&Array.isArray(i)&&Cf(n,i)))return!1}return!0}class owt{constructor(t){E(this,"width",void 0),E(this,"height",void 0),E(this,"views",void 0),E(this,"viewState",void 0),E(this,"controllers",void 0),E(this,"timeline",void 0),E(this,"_viewports",void 0),E(this,"_viewportMap",void 0),E(this,"_isUpdating",void 0),E(this,"_needsRedraw",void 0),E(this,"_needsUpdate",void 0),E(this,"_eventManager",void 0),E(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=t.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=t.eventManager,this._eventCallbacks={onViewStateChange:t.onViewStateChange,onInteractionStateChange:t.onInteractionStateChange},Object.seal(this),this.setProps(t)}finalize(){for(const t in this.controllers){const r=this.controllers[t];r&&r.finalize()}this.controllers={}}needsRedraw(t={clearRedrawFlags:!1}){const r=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),r}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t,this._needsRedraw=this._needsRedraw||t}updateViewStates(){for(const t in this.controllers){const r=this.controllers[t];r&&r.updateTransition()}}getViewports(t){return t?this._viewports.filter(r=>r.containsPixel(t)):this._viewports}getViews(){const t={};return this.views.forEach(r=>{t[r.id]=r}),t}getView(t){return this.views.find(r=>r.id===t)}getViewState(t){const r=typeof t=="string"?this.getView(t):t,n=r&&this.viewState[r.getViewStateId()]||this.viewState;return r?r.filterViewState(n):n}getViewport(t){return this._viewportMap[t]}unproject(t,r){const n=this.getViewports(),i={x:t[0],y:t[1]};for(let o=n.length-1;o>=0;--o){const a=n[o];if(a.containsPixel(i)){const s=t.slice();return s[0]-=a.x,s[1]-=a.y,a.unproject(s,r)}}return null}setProps(t){t.views&&this._setViews(t.views),t.viewState&&this._setViewState(t.viewState),("width"in t||"height"in t)&&this._setSize(t.width,t.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(t,r){(t!==this.width||r!==this.height)&&(this.width=t,this.height=r,this.setNeedsUpdate("Size changed"))}_setViews(t){t=x_(t,Boolean),this._diffViews(t,this.views)&&this.setNeedsUpdate("views changed"),this.views=t}_setViewState(t){t?(!Cf(t,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=t):Wt.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(t,r){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...r,viewId:t})}_createController(t,r){const n=r.type;return new n({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,r.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:o=>t.makeViewport({viewState:o,width:this.width,height:this.height})})}_updateController(t,r,n,i){const o=t.controller;if(o){const a={...r,...o,id:t.id,x:n.x,y:n.y,width:n.width,height:n.height};return i||(i=this._createController(t,a)),i&&i.setProps(a),i}return null}_rebuildViewports(){const{views:t}=this,r=this.controllers;this._viewports=[],this.controllers={};let n=!1;for(let i=t.length;i--;){const o=t[i],a=this.getViewState(o),s=o.makeViewport({viewState:a,width:this.width,height:this.height});let l=r[o.id];const u=Boolean(o.controller);u&&!l&&(n=!0),(n||!u)&&l&&(l.finalize(),l=null),this.controllers[o.id]=this._updateController(o,a,s,l),this._viewports.unshift(s)}for(const i in r){const o=r[i];o&&!this.controllers[i]&&o.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(t=>{t.id&&(this._viewportMap[t.id]=this._viewportMap[t.id]||t)})}_diffViews(t,r){return t.length!==r.length?!0:t.some((n,i)=>!t[i].equals(r[i]))}}const awt=/([0-9]+\.?[0-9]*)(%|px)/;function Ha(e){switch(typeof e){case"number":return{position:e,relative:!1};case"string":const t=awt.exec(e);if(t&&t.length>=3){const r=t[2]==="%",n=parseFloat(t[1]);return{position:r?n/100:n,relative:r}}default:throw new Error("Could not parse position string ".concat(e))}}function Xa(e,t){return e.relative?Math.round(e.position*t):e.position}function cr(e,t){if(!e)throw new Error(t||"deck.gl: assertion failed.")}class Jz{constructor(t){E(this,"id",void 0),E(this,"viewportInstance",void 0),E(this,"_x",void 0),E(this,"_y",void 0),E(this,"_width",void 0),E(this,"_height",void 0),E(this,"_padding",void 0),E(this,"props",void 0);const{id:r,x:n=0,y:i=0,width:o="100%",height:a="100%",padding:s=null,viewportInstance:l}=t||{};cr(!l||l instanceof Fs),this.viewportInstance=l,this.id=r||this.constructor.displayName||"view",this.props={...t,id:this.id},this._x=Ha(n),this._y=Ha(i),this._width=Ha(o),this._height=Ha(a),this._padding=s&&{left:Ha(s.left||0),right:Ha(s.right||0),top:Ha(s.top||0),bottom:Ha(s.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(t){return this===t?!0:this.viewportInstance?t.viewportInstance?this.viewportInstance.equals(t.viewportInstance):!1:this.ViewportType===t.ViewportType&&Cf(this.props,t.props)}makeViewport({width:t,height:r,viewState:n}){if(this.viewportInstance)return this.viewportInstance;n=this.filterViewState(n);const i=this.getDimensions({width:t,height:r});return new this.ViewportType({...n,...this.props,...i})}getViewStateId(){const{viewState:t}=this.props;return typeof t=="string"?t:(t==null?void 0:t.id)||this.id}filterViewState(t){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const r={...t};for(const n in this.props.viewState)n!=="id"&&(r[n]=this.props.viewState[n]);return r}return t}getDimensions({width:t,height:r}){const n={x:Xa(this._x,t),y:Xa(this._y,r),width:Xa(this._width,t),height:Xa(this._height,r)};return this._padding&&(n.padding={left:Xa(this._padding.left,t),top:Xa(this._padding.top,r),right:Xa(this._padding.right,t),bottom:Xa(this._padding.bottom,r)}),n}get controller(){const t=this.props.controller;return t?t===!0?{type:this.ControllerType}:typeof t=="function"?{type:t}:{type:this.ControllerType,...t}:null}}class Z0{constructor(t){E(this,"_inProgress",void 0),E(this,"_handle",void 0),E(this,"_timeline",void 0),E(this,"time",void 0),E(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=t,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(t){var r,n;this.cancel(),this.settings=t,this._inProgress=!0,(r=(n=this.settings).onStart)===null||r===void 0||r.call(n,this)}end(){if(this._inProgress){var t,r;this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(t=(r=this.settings).onEnd)===null||t===void 0||t.call(r,this)}}cancel(){if(this._inProgress){var t,r;(t=(r=this.settings).onInterrupt)===null||t===void 0||t.call(r,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1}}update(){var t,r;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:n,settings:i}=this;this._handle=n.addChannel({delay:n.getTime(),duration:i.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(t=(r=this.settings).onUpdate)===null||t===void 0||t.call(r,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const VL=()=>{},nT={BREAK:1,SNAP_TO_END:2,IGNORE:3},swt=e=>e,lwt=nT.BREAK;class uwt{constructor(t){E(this,"getControllerState",void 0),E(this,"props",void 0),E(this,"propsInTransition",void 0),E(this,"transition",void 0),E(this,"onViewStateChange",void 0),E(this,"onStateChange",void 0),E(this,"_onTransitionUpdate",r=>{const{time:n,settings:{interpolator:i,startProps:o,endProps:a,duration:s,easing:l}}=r,u=l(n/s),c=i.interpolateProps(o,a,u);this.propsInTransition=this.getControllerState({...this.props,...c}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=t.getControllerState,this.propsInTransition=null,this.transition=new Z0(t.timeline),this.onViewStateChange=t.onViewStateChange||VL,this.onStateChange=t.onStateChange||VL}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(t){let r=!1;const n=this.props;if(this.props=t,!n||this._shouldIgnoreViewportChange(n,t))return!1;if(this._isTransitionEnabled(t)){let i=n;if(this.transition.inProgress){const{interruption:o,endProps:a}=this.transition.settings;i={...n,...o===nT.SNAP_TO_END?a:this.propsInTransition||n}}this._triggerTransition(i,t),r=!0}else this.transition.cancel();return r}updateTransition(){this.transition.update()}_isTransitionEnabled(t){const{transitionDuration:r,transitionInterpolator:n}=t;return(r>0||r==="auto")&&Boolean(n)}_isUpdateDueToCurrentTransition(t){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(t,this.propsInTransition):!1}_shouldIgnoreViewportChange(t,r){return this.transition.inProgress?this.transition.settings.interruption===nT.IGNORE||this._isUpdateDueToCurrentTransition(r):this._isTransitionEnabled(r)?r.transitionInterpolator.arePropsEqual(t,r):!0}_triggerTransition(t,r){const n=this.getControllerState(t),i=this.getControllerState(r).shortestPathFrom(n),o=r.transitionInterpolator,a=o.getDuration?o.getDuration(t,r):r.transitionDuration;if(a===0)return;const s=o.initializeProps(t,i);this.propsInTransition={};const l={duration:a,easing:r.transitionEasing||swt,interpolator:o,interruption:r.transitionInterruption||lwt,startProps:s.start,endProps:s.end,onStart:r.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(r.onTransitionInterrupt),onEnd:this._onTransitionEnd(r.onTransitionEnd)};this.transition.start(l),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(t){return r=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),t==null||t(r)}}}class cwt{constructor(t){E(this,"_propsToCompare",void 0),E(this,"_propsToExtract",void 0),E(this,"_requiredProps",void 0);const{compare:r,extract:n,required:i}=t;this._propsToCompare=r,this._propsToExtract=n||r,this._requiredProps=i}arePropsEqual(t,r){for(const n of this._propsToCompare)if(!(n in t)||!(n in r)||!Ao(t[n],r[n]))return!1;return!0}initializeProps(t,r){const n={},i={};for(const o of this._propsToExtract)(o in t||o in r)&&(n[o]=t[o],i[o]=r[o]);return this._checkRequiredProps(n),this._checkRequiredProps(i),{start:n,end:i}}getDuration(t,r){return r.transitionDuration}_checkRequiredProps(t){!this._requiredProps||this._requiredProps.forEach(r=>{const n=t[r];cr(Number.isFinite(n)||Array.isArray(n),"".concat(r," is required for transition"))})}}const fwt=["longitude","latitude","zoom","bearing","pitch"],hwt=["longitude","latitude","zoom"];class L_ extends cwt{constructor(t={}){const r=Array.isArray(t)?t:t.transitionProps,n=Array.isArray(t)?{}:t;n.transitionProps=Array.isArray(r)?{compare:r,required:r}:r||{compare:fwt,required:hwt},super(n.transitionProps),E(this,"opts",void 0),this.opts=n}initializeProps(t,r){const n=super.initializeProps(t,r),{makeViewport:i,around:o}=this.opts;if(i&&o){const a=i(t),s=i(r),l=a.unproject(o);n.start.around=o,Object.assign(n.end,{around:s.project(l),aroundPosition:l,width:r.width,height:r.height})}return n}interpolateProps(t,r,n){const i={};for(const o of this._propsToExtract)i[o]=Wl(t[o]||0,r[o]||0,n);if(r.aroundPosition&&this.opts.makeViewport){const o=this.opts.makeViewport({...r,...i});Object.assign(i,o.panByPosition(r.aroundPosition,Wl(t.around,r.around,n)))}return i}}const Ya={transitionDuration:0},dwt=300,Cv=e=>1-(1-e)*(1-e),ec={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},ml={};class Qz{constructor(t){E(this,"props",void 0),E(this,"state",{}),E(this,"transitionManager",void 0),E(this,"eventManager",void 0),E(this,"onViewStateChange",void 0),E(this,"onStateChange",void 0),E(this,"makeViewport",void 0),E(this,"_controllerState",void 0),E(this,"_events",{}),E(this,"_interactionState",{isDragging:!1}),E(this,"_customEvents",[]),E(this,"_eventStartBlocked",null),E(this,"_panMove",!1),E(this,"invertPan",!1),E(this,"dragMode","rotate"),E(this,"inertia",0),E(this,"scrollZoom",!0),E(this,"dragPan",!0),E(this,"dragRotate",!0),E(this,"doubleClickZoom",!0),E(this,"touchZoom",!0),E(this,"touchRotate",!1),E(this,"keyboard",!0),this.transitionManager=new uwt({...t,getControllerState:r=>new this.ControllerState(r),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=t.eventManager,this.onViewStateChange=t.onViewStateChange||(()=>{}),this.onStateChange=t.onStateChange||(()=>{}),this.makeViewport=t.makeViewport}set events(t){this.toggleEvents(this._customEvents,!1),this.toggleEvents(t,!0),this._customEvents=t,this.props&&this.setProps(this.props)}finalize(){for(const r in this._events)if(this._events[r]){var t;(t=this.eventManager)===null||t===void 0||t.off(r,this.handleEvent)}this.transitionManager.finalize()}handleEvent(t){this._controllerState=void 0;const r=this._eventStartBlocked;switch(t.type){case"panstart":return r?!1:this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return r?!1:this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"tripanstart":return r?!1:this._onTriplePanStart(t);case"tripanmove":return this._onTriplePan(t);case"tripanend":return this._onTriplePanEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(t){const{x:r,y:n}=this.props,{offsetCenter:i}=t;return[i.x-r,i.y-n]}isPointInBounds(t,r){const{width:n,height:i}=this.props;if(r&&r.handled)return!1;const o=t[0]>=0&&t[0]<=n&&t[1]>=0&&t[1]<=i;return o&&r&&r.stopPropagation(),o}isFunctionKeyPressed(t){const{srcEvent:r}=t;return Boolean(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(t){const r=setTimeout(()=>{this._eventStartBlocked===r&&(this._eventStartBlocked=null)},t);this._eventStartBlocked=r}setProps(t){t.dragMode&&(this.dragMode=t.dragMode),this.props=t,"transitionInterpolator"in t||(t.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(t);const{inertia:r}=t;this.inertia=Number.isFinite(r)?r:r===!0?dwt:0;const{scrollZoom:n=!0,dragPan:i=!0,dragRotate:o=!0,doubleClickZoom:a=!0,touchZoom:s=!0,touchRotate:l=!1,keyboard:u=!0}=t,c=Boolean(this.onViewStateChange);this.toggleEvents(ec.WHEEL,c&&n),this.toggleEvents(ec.PAN,c&&(i||o)),this.toggleEvents(ec.PINCH,c&&(s||l)),this.toggleEvents(ec.TRIPLE_PAN,c&&l),this.toggleEvents(ec.DOUBLE_TAP,c&&a),this.toggleEvents(ec.KEYBOARD,c&&u),this.scrollZoom=n,this.dragPan=i,this.dragRotate=o,this.doubleClickZoom=a,this.touchZoom=s,this.touchRotate=l,this.keyboard=u}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(t,r){this.eventManager&&t.forEach(n=>{this._events[n]!==r&&(this._events[n]=r,r?this.eventManager.on(n,this.handleEvent):this.eventManager.off(n,this.handleEvent))})}updateViewport(t,r=null,n={}){const i={...t.getViewportProps(),...r},o=this.controllerState!==t;if(this.state=t.getState(),this._setInteractionState(n),o){const a=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:a})}}_onTransition(t){this.onViewStateChange({...t,interactionState:this._interactionState})}_setInteractionState(t){Object.assign(this._interactionState,t),this.onStateChange(this._interactionState)}_onPanStart(t){const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;let n=this.isFunctionKeyPressed(t)||t.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(n=!n);const i=this.controllerState[n?"panStart":"rotateStart"]({pos:r});return this._panMove=n,this.updateViewport(i,Ya,{isDragging:!0}),!0}_onPan(t){return this.isDragging()?this._panMove?this._onPanMove(t):this._onPanRotate(t):!1}_onPanEnd(t){return this.isDragging()?this._panMove?this._onPanMoveEnd(t):this._onPanRotateEnd(t):!1}_onPanMove(t){if(!this.dragPan)return!1;const r=this.getCenter(t),n=this.controllerState.pan({pos:r});return this.updateViewport(n,Ya,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(t){const{inertia:r}=this;if(this.dragPan&&r&&t.velocity){const n=this.getCenter(t),i=[n[0]+t.velocityX*r/2,n[1]+t.velocityY*r/2],o=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Cv},{isDragging:!1,isPanning:!0})}else{const n=this.controllerState.panEnd();this.updateViewport(n,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(t){if(!this.dragRotate)return!1;const r=this.getCenter(t),n=this.controllerState.rotate({pos:r});return this.updateViewport(n,Ya,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(t){const{inertia:r}=this;if(this.dragRotate&&r&&t.velocity){const n=this.getCenter(t),i=[n[0]+t.velocityX*r/2,n[1]+t.velocityY*r/2],o=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Cv},{isDragging:!1,isRotating:!0})}else{const n=this.controllerState.rotateEnd();this.updateViewport(n,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(t){if(!this.scrollZoom)return!1;t.srcEvent.preventDefault();const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const{speed:n=.01,smooth:i=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:o}=t;let a=2/(1+Math.exp(-Math.abs(o*n)));o<0&&a!==0&&(a=1/a);const s=this.controllerState.zoom({pos:r,scale:a});return this.updateViewport(s,{...this._getTransitionProps({around:r}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(t){const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const n=this.controllerState.rotateStart({pos:r});return this.updateViewport(n,Ya,{isDragging:!0}),!0}_onTriplePan(t){if(!this.touchRotate||!this.isDragging())return!1;const r=this.getCenter(t);r[0]-=t.deltaX;const n=this.controllerState.rotate({pos:r});return this.updateViewport(n,Ya,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(t){if(!this.isDragging())return!1;const{inertia:r}=this;if(this.touchRotate&&r&&t.velocityY){const n=this.getCenter(t),i=[n[0],n[1]+=t.velocityY*r/2],o=this.controllerState.rotate({pos:i});this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Cv},{isDragging:!1,isRotating:!0}),this.blockEvents(r)}else{const n=this.controllerState.rotateEnd();this.updateViewport(n,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(t){const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const n=this.controllerState.zoomStart({pos:r}).rotateStart({pos:r});return ml._startPinchRotation=t.rotation,ml._lastPinchEvent=t,this.updateViewport(n,Ya,{isDragging:!0}),!0}_onPinch(t){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let r=this.controllerState;if(this.touchZoom){const{scale:n}=t,i=this.getCenter(t);r=r.zoom({pos:i,scale:n})}if(this.touchRotate){const{rotation:n}=t;r=r.rotate({deltaAngleX:ml._startPinchRotation-n})}return this.updateViewport(r,Ya,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),ml._lastPinchEvent=t,!0}_onPinchEnd(t){if(!this.isDragging())return!1;const{inertia:r}=this,{_lastPinchEvent:n}=ml;if(this.touchZoom&&r&&n&&t.scale!==n.scale){const i=this.getCenter(t);let o=this.controllerState.rotateEnd();const a=Math.log2(t.scale),s=(a-Math.log2(n.scale))/(t.deltaTime-n.deltaTime),l=Math.pow(2,a+s*r/2);o=o.zoom({pos:i,scale:l}).zoomEnd(),this.updateViewport(o,{...this._getTransitionProps({around:i}),transitionDuration:r,transitionEasing:Cv},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(r)}else{const i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return ml._startPinchRotation=null,ml._lastPinchEvent=null,!0}_onDoubleTap(t){if(!this.doubleClickZoom)return!1;const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const n=this.isFunctionKeyPressed(t),i=this.controllerState.zoom({pos:r,scale:n?.5:2});return this.updateViewport(i,this._getTransitionProps({around:r}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(t){if(!this.keyboard)return!1;const r=this.isFunctionKeyPressed(t),{zoomSpeed:n,moveSpeed:i,rotateSpeedX:o,rotateSpeedY:a}=this.keyboard===!0?{}:this.keyboard,{controllerState:s}=this;let l;const u={};switch(t.srcEvent.code){case"Minus":l=r?s.zoomOut(n).zoomOut(n):s.zoomOut(n),u.isZooming=!0;break;case"Equal":l=r?s.zoomIn(n).zoomIn(n):s.zoomIn(n),u.isZooming=!0;break;case"ArrowLeft":r?(l=s.rotateLeft(o),u.isRotating=!0):(l=s.moveLeft(i),u.isPanning=!0);break;case"ArrowRight":r?(l=s.rotateRight(o),u.isRotating=!0):(l=s.moveRight(i),u.isPanning=!0);break;case"ArrowUp":r?(l=s.rotateUp(a),u.isRotating=!0):(l=s.moveUp(i),u.isPanning=!0);break;case"ArrowDown":r?(l=s.rotateDown(a),u.isRotating=!0):(l=s.moveDown(i),u.isPanning=!0);break;default:return!1}return this.updateViewport(l,this._getTransitionProps(),u),!0}_getTransitionProps(t){const{transition:r}=this;return!r||!r.transitionInterpolator?Ya:t?{...r,transitionInterpolator:new L_({...t,...r.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:r}}class tV{constructor(t,r){E(this,"_viewportProps",void 0),E(this,"_state",void 0),this._viewportProps=this.applyConstraints(t),this._state=r}getViewportProps(){return this._viewportProps}getState(){return this._state}}const UL=5,pwt=1.2;class vwt extends tV{constructor(t){const{width:r,height:n,latitude:i,longitude:o,zoom:a,bearing:s=0,pitch:l=0,altitude:u=1.5,position:c=[0,0,0],maxZoom:f=20,minZoom:h=0,maxPitch:d=60,minPitch:p=0,startPanLngLat:v,startZoomLngLat:g,startRotatePos:m,startBearing:_,startPitch:y,startZoom:w,normalize:T=!0}=t;cr(Number.isFinite(o)),cr(Number.isFinite(i)),cr(Number.isFinite(a)),super({width:r,height:n,latitude:i,longitude:o,zoom:a,bearing:s,pitch:l,altitude:u,maxZoom:f,minZoom:h,maxPitch:d,minPitch:p,normalize:T,position:c},{startPanLngLat:v,startZoomLngLat:g,startRotatePos:m,startBearing:_,startPitch:y,startZoom:w}),E(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart({pos:t}){return this._getUpdatedState({startPanLngLat:this._unproject(t)})}pan({pos:t,startPos:r}){const n=this.getState().startPanLngLat||this._unproject(r);if(!n)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(n,t);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:t,deltaAngleX:r=0,deltaAngleY:n=0}){const{startRotatePos:i,startBearing:o,startPitch:a}=this.getState();if(!i||o===void 0||a===void 0)return this;let s;return t?s=this._getNewRotation(t,i,a,o):s={bearing:o+r,pitch:a+n},this._getUpdatedState(s)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:t}){return this._getUpdatedState({startZoomLngLat:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom({pos:t,startPos:r,scale:n}){let{startZoom:i,startZoomLngLat:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(r)||this._unproject(t)),!o)return this;const{maxZoom:a,minZoom:s}=this.getViewportProps();let l=i+Math.log2(n);l=Tr(l,s,a);const u=this.makeViewport({...this.getViewportProps(),zoom:l});return this._getUpdatedState({zoom:l,...u.panByPosition(o,t)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(t=2){return this._zoomFromCenter(t)}zoomOut(t=2){return this._zoomFromCenter(1/t)}moveLeft(t=100){return this._panFromCenter([t,0])}moveRight(t=100){return this._panFromCenter([-t,0])}moveUp(t=100){return this._panFromCenter([0,t])}moveDown(t=100){return this._panFromCenter([0,-t])}rotateLeft(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-t})}rotateRight(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+t})}rotateUp(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+t})}rotateDown(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-t})}shortestPathFrom(t){const r=t.getViewportProps(),n={...this.getViewportProps()},{bearing:i,longitude:o}=n;return Math.abs(i-r.bearing)>180&&(n.bearing=i<0?i+360:i-360),Math.abs(o-r.longitude)>180&&(n.longitude=o<0?o+360:o-360),n}applyConstraints(t){const{maxZoom:r,minZoom:n,zoom:i}=t;t.zoom=Tr(i,n,r);const{maxPitch:o,minPitch:a,pitch:s}=t;t.pitch=Tr(s,a,o);const{normalize:l=!0}=t;return l&&Object.assign(t,fbt(t)),t}_zoomFromCenter(t){const{width:r,height:n}=this.getViewportProps();return this.zoom({pos:[r/2,n/2],scale:t})}_panFromCenter(t){const{width:r,height:n}=this.getViewportProps();return this.pan({startPos:[r/2,n/2],pos:[r/2+t[0],n/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}_unproject(t){const r=this.makeViewport(this.getViewportProps());return t&&r.unproject(t)}_getNewRotation(t,r,n,i){const o=t[0]-r[0],a=t[1]-r[1],s=t[1],l=r[1],{width:u,height:c}=this.getViewportProps(),f=o/u;let h=0;a>0?Math.abs(c-l)>UL&&(h=a/(l-c)*pwt):a<0&&l>UL&&(h=1-s/l),h=Tr(h,-1,1);const{minPitch:d,maxPitch:p}=this.getViewportProps(),v=i+180*f;let g=n;return h>0?g=n+h*(p-n):h<0&&(g=n-h*(d-n)),{pitch:g,bearing:v}}}class gwt extends Qz{constructor(...t){super(...t),E(this,"ControllerState",vwt),E(this,"transition",{transitionDuration:300,transitionInterpolator:new L_({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),E(this,"dragMode","pan")}setProps(t){t.position=t.position||[0,0,0];const r=this.props;super.setProps(t),(!r||r.height!==t.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...t,...this.state}))}}class eV extends Jz{get ViewportType(){return Io}get ControllerType(){return gwt}}E(eV,"displayName","MapView");class mwt extends M_{constructor(t,r){super(t,r),E(this,"maskMap",void 0),E(this,"fbo",void 0);const{mapSize:n=2048}=r;this.maskMap=new yn(t,{width:n,height:n,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.fbo=new nr(t,{id:"maskmap",width:n,height:n,attachments:{[36064]:this.maskMap}})}render(t){const r=this.gl,n=[!1,!1,!1,!1];return n[t.channel]=!0,ni(r,{clearColor:[255,255,255,255],blend:!0,blendFunc:[0,1],blendEquation:32778,colorMask:n,depthTest:!1},()=>super.render({...t,target:this.fbo,pass:"mask"}))}shouldDrawLayer(t){return t.props.operation===Y0.MASK}delete(){this.fbo.delete(),this.maskMap.delete()}}const _wt=new jr().lookAt({eye:[0,0,1]});function ywt({width:e,height:t,near:r,far:n,padding:i}){let o=-e/2,a=e/2,s=-t/2,l=t/2;if(i){const{left:u=0,right:c=0,top:f=0,bottom:h=0}=i,d=Tr((u+e-c)/2,0,e)-e/2,p=Tr((f+t-h)/2,0,t)-t/2;o-=d,a-=d,s+=p,l+=p}return new jr().ortho({left:o,right:a,bottom:s,top:l,near:r,far:n})}class bwt extends Fs{constructor(t){const{width:r,height:n,near:i=.1,far:o=1e3,zoom:a=0,target:s=[0,0,0],padding:l=null,flipY:u=!0}=t,c=Array.isArray(a)?a[0]:a,f=Array.isArray(a)?a[1]:a,h=Math.min(c,f),d=Math.pow(2,h);let p;if(c!==f){const v=Math.pow(2,c),g=Math.pow(2,f);p={unitsPerMeter:[v/d,g/d,1],metersPerUnit:[d/v,d/g,1]}}super({...t,longitude:void 0,position:s,viewMatrix:_wt.clone().scale([d,d*(u?-1:1),d]),projectionMatrix:ywt({width:r||1,height:n||1,padding:l,near:i,far:o}),zoom:h,distanceScales:p})}projectFlat([t,r]){const{unitsPerMeter:n}=this.distanceScales;return[t*n[0],r*n[1]]}unprojectFlat([t,r]){const{metersPerUnit:n}=this.distanceScales;return[t*n[0],r*n[1]]}panByPosition(t,r){const n=C_(r,this.pixelUnprojectionMatrix),i=this.projectFlat(t),o=l1([],i,bz([],n)),a=l1([],this.center,o);return{target:this.unprojectFlat(a)}}}class wwt extends tV{constructor(t){const{width:r,height:n,rotationX:i=0,rotationOrbit:o=0,target:a=[0,0,0],zoom:s=0,minRotationX:l=-90,maxRotationX:u=90,minZoom:c=-1/0,maxZoom:f=1/0,startPanPosition:h,startRotatePos:d,startRotationX:p,startRotationOrbit:v,startZoomPosition:g,startZoom:m}=t;super({width:r,height:n,rotationX:i,rotationOrbit:o,target:a,zoom:s,minRotationX:l,maxRotationX:u,minZoom:c,maxZoom:f},{startPanPosition:h,startRotatePos:d,startRotationX:p,startRotationOrbit:v,startZoomPosition:g,startZoom:m}),E(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart({pos:t}){return this._getUpdatedState({startPanPosition:this._unproject(t)})}pan({pos:t,startPosition:r}){const n=this.getState().startPanPosition||r;if(!n)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(n,t);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:t,deltaAngleX:r=0,deltaAngleY:n=0}){const{startRotatePos:i,startRotationX:o,startRotationOrbit:a}=this.getState(),{width:s,height:l}=this.getViewportProps();if(!i||o===void 0||a===void 0)return this;let u;if(t){let c=(t[0]-i[0])/s;const f=(t[1]-i[1])/l;(o<-90||o>90)&&(c*=-1),u={rotationX:o+f*180,rotationOrbit:a+c*180}}else u={rotationX:o+n,rotationOrbit:a+r};return this._getUpdatedState(u)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(t){const r=t.getViewportProps(),n={...this.getViewportProps()},{rotationOrbit:i}=n;return Math.abs(i-r.rotationOrbit)>180&&(n.rotationOrbit=i<0?i+360:i-360),n}zoomStart({pos:t}){return this._getUpdatedState({startZoomPosition:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom({pos:t,startPos:r,scale:n}){let{startZoom:i,startZoomPosition:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(r)||this._unproject(t)),!o)return this;const a=this._calculateNewZoom({scale:n,startZoom:i}),s=this.makeViewport({...this.getViewportProps(),zoom:a});return this._getUpdatedState({zoom:a,...s.panByPosition(o,t)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(t=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:t})})}zoomOut(t=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/t})})}moveLeft(t=50){return this._panFromCenter([-t,0])}moveRight(t=50){return this._panFromCenter([t,0])}moveUp(t=50){return this._panFromCenter([0,-t])}moveDown(t=50){return this._panFromCenter([0,t])}rotateLeft(t=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-t})}rotateRight(t=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+t})}rotateUp(t=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-t})}rotateDown(t=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+t})}_unproject(t){const r=this.makeViewport(this.getViewportProps());return t&&r.unproject(t)}_calculateNewZoom({scale:t,startZoom:r}){const{maxZoom:n,minZoom:i}=this.getViewportProps();r===void 0&&(r=this.getViewportProps().zoom);const o=r+Math.log2(t);return Tr(o,i,n)}_panFromCenter(t){const{width:r,height:n,target:i}=this.getViewportProps();return this.pan({startPosition:i,pos:[r/2+t[0],n/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}applyConstraints(t){const{maxZoom:r,minZoom:n,zoom:i,maxRotationX:o,minRotationX:a,rotationOrbit:s}=t;return t.zoom=Array.isArray(i)?[Tr(i[0],n,r),Tr(i[1],n,r)]:Tr(i,n,r),t.rotationX=Tr(t.rotationX,a,o),(s<-180||s>180)&&(t.rotationOrbit=zbt(s+180,360)-180),t}}class Swt extends wwt{constructor(t){super(t),E(this,"zoomAxis",void 0),this.zoomAxis=t.zoomAxis||"all"}_calculateNewZoom({scale:t,startZoom:r}){const{maxZoom:n,minZoom:i}=this.getViewportProps();r===void 0&&(r=this.getViewportProps().zoom);let o=Math.log2(t);if(Array.isArray(r)){let[a,s]=r;switch(this.zoomAxis){case"X":a=Tr(a+o,i,n);break;case"Y":s=Tr(s+o,i,n);break;default:let l=Math.min(a+o,s+o);l<i&&(o+=i-l),l=Math.max(a+o,s+o),l>n&&(o+=n-l),a+=o,s+=o}return[a,s]}return Tr(r+o,i,n)}}class Twt extends Qz{constructor(...t){super(...t),E(this,"ControllerState",Swt),E(this,"transition",{transitionDuration:300,transitionInterpolator:new L_(["target","zoom"])}),E(this,"dragMode","pan")}_onPanRotate(){return!1}}class vk extends Jz{get ViewportType(){return bwt}get ControllerType(){return Twt}}E(vk,"displayName","OrthographicView");function Pwt({layers:e,viewport:t}){let r=null;for(const o of e){const a=o.getBounds();a&&(r?(r[0]=Math.min(r[0],a[0][0]),r[1]=Math.min(r[1],a[0][1]),r[2]=Math.max(r[2],a[1][0]),r[3]=Math.max(r[3],a[1][1])):r=[a[0][0],a[0][1],a[1][0],a[1][1]])}const n=t.getBounds();if(!r)return n;const i=kwt(n);return r[2]-r[0]<i[2]-i[0]||r[3]-r[1]<i[3]-i[1]||(r[0]=Math.max(r[0],i[0]),r[1]=Math.max(r[1],i[1]),r[2]=Math.min(r[2],i[2]),r[3]=Math.min(r[3],i[3])),r}function Ewt({bounds:e,viewport:t,width:r,height:n}){if(e[2]<=e[0]||e[3]<=e[1])return null;const i=1;if(r-=i*2,n-=i*2,t instanceof Io){const{longitude:s,latitude:l,zoom:u}=Xz({width:r,height:n,bounds:[[e[0],e[1]],[e[2],e[3]]],maxZoom:20});return new Io({longitude:s,latitude:l,zoom:u,x:i,y:i,width:r,height:n})}const o=[(e[0]+e[2])/2,(e[1]+e[3])/2,0],a=Math.min(20,r/(e[2]-e[0]),n/(e[3]-e[1]));return new vk({x:i,y:i}).makeViewport({width:r,height:n,viewState:{target:o,zoom:Math.log2(a)}})}function kwt(e){const t={x:e[2]-e[0],y:e[3]-e[1]},r={x:e[0]+.5*t.x,y:e[1]+.5*t.y};return[r.x-t.x,r.y-t.y,r.x+t.x,r.y+t.y]}class Awt{constructor(){E(this,"id","mask-effect"),E(this,"props",null),E(this,"useInPicking",!0),E(this,"dummyMaskMap",void 0),E(this,"channels",[]),E(this,"masks",null),E(this,"maskPass",void 0),E(this,"maskMap",void 0),E(this,"lastViewport",void 0)}preRender(t,{layers:r,layerFilter:n,viewports:i,onViewportActive:o,views:a}){this.dummyMaskMap||(this.dummyMaskMap=new yn(t,{width:1,height:1}));const s=r.filter(f=>f.props.visible&&f.props.operation===Y0.MASK);if(s.length===0){this.masks=null,this.channels.length=0;return}this.masks={},this.maskPass||(this.maskPass=new mwt(t,{id:"default-mask"}),this.maskMap=this.maskPass.maskMap);const l=this._sortMaskChannels(s),u=i[0],c=!this.lastViewport||!this.lastViewport.equals(u);for(const f in l)this._renderChannel(l[f],{layerFilter:n,onViewportActive:o,views:a,viewport:u,viewportChanged:c})}_renderChannel(t,{layerFilter:r,onViewportActive:n,views:i,viewport:o,viewportChanged:a}){const s=this.channels[t.index];if(!s)return;const l=t===s||s.layers.length!==t.layers.length||t.layerBounds.some((u,c)=>u!==s.layerBounds[c]);if(t.bounds=s.bounds,t.maskBounds=s.maskBounds,this.channels[t.index]=t,(l||a)&&(this.lastViewport=o,t.bounds=Pwt({layers:t.layers,viewport:o}),l||!Ao(t.bounds,s.bounds))){const{maskPass:u,maskMap:c}=this,f=Ewt({bounds:t.bounds,viewport:o,width:c.width,height:c.height});t.maskBounds=f?f.getBounds():[0,0,1,1],u.render({pass:"mask",channel:t.index,layers:t.layers,layerFilter:r,viewports:f?[f]:[],onViewportActive:n,views:i,moduleParameters:{devicePixelRatio:1}})}this.masks[t.id]={index:t.index,bounds:t.maskBounds,coordinateOrigin:t.coordinateOrigin,coordinateSystem:t.coordinateSystem}}_sortMaskChannels(t){const r={};let n=0;for(const i of t){const{id:o}=i.root;let a=r[o];if(!a){if(++n>4){Wt.warn("Too many mask layers. The max supported is 4")();continue}a={id:o,index:this.channels.findIndex(s=>(s==null?void 0:s.id)===o),layers:[],layerBounds:[],coordinateOrigin:i.root.props.coordinateOrigin,coordinateSystem:i.root.props.coordinateSystem},r[o]=a}a.layers.push(i),a.layerBounds.push(i.getBounds())}for(let i=0;i<4;i++){const o=this.channels[i];(!o||!(o.id in r))&&(this.channels[i]=null)}for(const i in r){const o=r[i];o.index<0&&(o.index=this.channels.findIndex(a=>!a),this.channels[o.index]=o)}return r}getModuleParameters(){return{maskMap:this.masks?this.maskMap:this.dummyMaskMap,maskChannels:this.masks}}cleanup(){this.dummyMaskMap&&(this.dummyMaskMap.delete(),this.dummyMaskMap=void 0),this.maskPass&&(this.maskPass.delete(),this.maskPass=void 0,this.maskMap=void 0),this.lastViewport=void 0,this.masks=null,this.channels.length=0}}const Cwt=new qz;class Mwt{constructor(){E(this,"effects",void 0),E(this,"_internalEffects",void 0),E(this,"_needsRedraw",void 0),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(t){"effects"in t&&(t.effects.length!==this.effects.length||!Cf(t.effects,this.effects))&&(this.setEffects(t.effects),this._needsRedraw="effects changed")}needsRedraw(t={clearRedrawFlags:!1}){const r=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),r}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(t=[]){this.cleanup(),this.effects=t,this._internalEffects=t.slice(),this._internalEffects.push(new Awt),t.some(r=>r instanceof qz)||this._internalEffects.push(Cwt)}cleanup(){for(const t of this.effects)t.cleanup();for(const t of this._internalEffects)t.cleanup();this.effects.length=0,this._internalEffects.length=0}}class xwt extends M_{shouldDrawLayer(t){return t.props.operation===Y0.DRAW}}const GL={blendFunc:[1,0,32771,0],blendEquation:32774};class rV extends M_{constructor(...t){super(...t),E(this,"pickZ",void 0),E(this,"_colors",null)}render(t){return t.pickingFBO?this._drawPickingBuffer(t):super.render(t)}_drawPickingBuffer({layers:t,layerFilter:r,views:n,viewports:i,onViewportActive:o,pickingFBO:a,deviceRect:{x:s,y:l,width:u,height:c},cullRect:f,effects:h,pass:d="picking",pickZ:p}){const v=this.gl;this.pickZ=p;const g=p?null:{byLayer:new Map,byAlpha:[]};this._colors=g;const m=ni(v,{scissorTest:!0,scissor:[s,l,u,c],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...GL,blend:!p},()=>super.render({target:a,layers:t,layerFilter:r,views:n,viewports:i,onViewportActive:o,cullRect:f,effects:h==null?void 0:h.filter(y=>y.useInPicking),pass:d}));return this._colors=null,{decodePickingColor:g&&Iwt.bind(null,g),stats:m}}shouldDrawLayer(t){return t.props.pickable&&t.props.operation===Y0.DRAW}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(t,r,n){const i={...t.props.parameters};return this._colors?(Object.assign(i,GL),i.blend=!0,i.blendColor=Lwt(this._colors,t,n)):i.blend=!1,i}}function Lwt(e,t,r){const{byLayer:n,byAlpha:i}=e;let o,a=n.get(t);return a?(a.viewports.push(r),o=a.a):(o=n.size+1,o<=255?(a={a:o,layer:t,viewports:[r]},n.set(t,a),i[o]=a):(Wt.warn("Too many pickable layers, only picking the first 255")(),o=0)),[0,0,0,o/255]}function Iwt(e,t){const r=e.byAlpha[t[3]];return r&&{pickedLayer:r.layer,pickedViewports:r.viewports,pickedObjectIndex:r.layer.decodePickingColor(t)}}const Owt="deckRenderer.renderLayers";class Rwt{constructor(t){this.gl=t,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new xwt(t),this.pickLayersPass=new rV(t),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(t){"layerFilter"in t&&this.layerFilter!==t.layerFilter&&(this.layerFilter=t.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in t&&this.drawPickingColors!==t.drawPickingColors&&(this.drawPickingColors=t.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(t){const r=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;t.layerFilter=t.layerFilter||this.layerFilter,t.effects=t.effects||[],t.target=t.target||nr.getDefaultFramebuffer(this.gl),this._preRender(t.effects,t);const n=this.lastPostProcessEffect?this.renderBuffers[0]:t.target,i=r.render({...t,target:n});this._postRender(t.effects,t),this.renderCount++,$r(Owt,this,i,t)}needsRedraw(t={clearRedrawFlags:!1}){const r=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),r}finalize(){const{renderBuffers:t}=this;for(const r of t)r.delete();t.length=0}_preRender(t,r){let n=null;for(const i of t)i.preRender(this.gl,r),i.postRender&&(n=i);n&&this._resizeRenderBuffers(),this.lastPostProcessEffect=n}_resizeRenderBuffers(){const{renderBuffers:t}=this;t.length===0&&t.push(new nr(this.gl),new nr(this.gl));for(const r of t)r.resize()}_postRender(t,r){const{renderBuffers:n}=this,i={inputBuffer:n[0],swapBuffer:n[1],target:null};for(const o of t)if(o.postRender){if(o===this.lastPostProcessEffect){i.target=r.target,o.postRender(this.gl,i);break}const a=o.postRender(this.gl,i);i.inputBuffer=a,i.swapBuffer=a===n[0]?n[1]:n[0]}}}const Dwt={pickedColor:null,pickedObjectIndex:-1};function Nwt({pickedColors:e,decodePickingColor:t,deviceX:r,deviceY:n,deviceRadius:i,deviceRect:o}){const{x:a,y:s,width:l,height:u}=o;let c=i*i,f=-1,h=0;for(let d=0;d<u;d++){const p=d+s-n,v=p*p;if(v>c)h+=4*l;else for(let g=0;g<l;g++){if(e[h+3]-1>=0){const _=g+a-r,y=_*_+v;y<=c&&(c=y,f=h)}h+=4}}if(f>=0){const d=e.slice(f,f+4),p=t(d);if(p){const v=Math.floor(f/4/l),g=f/4-v*l;return{...p,pickedColor:d,pickedX:a+g,pickedY:s+v}}Wt.error("Picked non-existent layer. Is picking buffer corrupt?")()}return Dwt}function Fwt({pickedColors:e,decodePickingColor:t}){const r=new Map;if(e){for(let n=0;n<e.length;n+=4)if(e[n+3]-1>=0){const o=e.slice(n,n+4),a=o.join(",");if(!r.has(a)){const s=t(o);s?r.set(a,{...s,color:o}):Wt.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(r.values())}function nV({pickInfo:e,viewports:t,pixelRatio:r,x:n,y:i,z:o}){let a=t[0];t.length>1&&(a=$wt((e==null?void 0:e.pickedViewports)||t,{x:n,y:i}));let s;if(a){const l=[n-a.x,i-a.y];o!==void 0&&(l[2]=o),s=a.unproject(l)}return{color:null,layer:null,viewport:a,index:-1,picked:!1,x:n,y:i,pixel:[n,i],coordinate:s,devicePixel:e&&"pickedX"in e?[e.pickedX,e.pickedY]:void 0,pixelRatio:r}}function Bwt(e){const{pickInfo:t,lastPickedInfo:r,mode:n,layers:i}=e,{pickedColor:o,pickedLayer:a,pickedObjectIndex:s}=t,l=a?[a]:[];if(n==="hover"){const f=r.index,h=r.layerId,d=a?a.props.id:null;if(d!==h||s!==f){if(d!==h){const p=i.find(v=>v.props.id===h);p&&l.unshift(p)}r.layerId=d,r.index=s,r.info=null}}const u=nV(e),c=new Map;return c.set(null,u),l.forEach(f=>{let h={...u};f===a&&(h.color=o,h.index=s,h.picked=!0),h=iV({layer:f,info:h,mode:n});const d=h.layer;f===a&&n==="hover"&&(r.info=h),c.set(d.id,h),n==="hover"&&d.updateAutoHighlight(h)}),c}function iV({layer:e,info:t,mode:r}){for(;e&&t;){const n=t.layer||null;t.sourceLayer=n,t.layer=e,t=e.getPickingInfo({info:t,mode:r,sourceLayer:n}),e=e.parent}return t}function $wt(e,t){for(let r=e.length-1;r>=0;r--){const n=e[r];if(n.containsPixel(t))return n}return e[0]}class zwt{constructor(t){E(this,"gl",void 0),E(this,"pickingFBO",void 0),E(this,"depthFBO",void 0),E(this,"pickLayersPass",void 0),E(this,"layerFilter",void 0),E(this,"lastPickedInfo",void 0),E(this,"_pickable",!0),this.gl=t,this.pickLayersPass=new rV(t),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(t){"layerFilter"in t&&(this.layerFilter=t.layerFilter),"_pickable"in t&&(this._pickable=t._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(t){return this._pickClosestObject(t)}pickObjects(t){return this._pickVisibleObjects(t)}getLastPickedObject({x:t,y:r,layers:n,viewports:i},o=this.lastPickedInfo.info){const a=o&&o.layer&&o.layer.id,s=o&&o.viewport&&o.viewport.id,l=a?n.find(h=>h.id===a):null,u=s&&i.find(h=>h.id===s)||i[0],c=u&&u.unproject([t-u.x,r-u.y]);return{...o,...{x:t,y:r,viewport:u,coordinate:c,layer:l}}}_resizeBuffer(){var t,r;const{gl:n}=this;if(!this.pickingFBO&&(this.pickingFBO=new nr(n),nr.isSupported(n,{colorBufferFloat:!0}))){const i=new nr(n);i.attach({[36064]:new yn(n,{format:Qt(n)?34836:6408,type:5126})}),this.depthFBO=i}(t=this.pickingFBO)===null||t===void 0||t.resize({width:n.canvas.width,height:n.canvas.height}),(r=this.depthFBO)===null||r===void 0||r.resize({width:n.canvas.width,height:n.canvas.height})}_getPickable(t){if(this._pickable===!1)return null;const r=t.filter(n=>n.isPickable()&&!n.isComposite);return r.length?r:null}_pickClosestObject({layers:t,views:r,viewports:n,x:i,y:o,radius:a=0,depth:s=1,mode:l="query",unproject3D:u,onViewportActive:c,effects:f}){const h=this._getPickable(t),d=tf(this.gl);if(!h)return{result:[],emptyInfo:nV({viewports:n,x:i,y:o,pixelRatio:d})};this._resizeBuffer();const p=fb(this.gl,[i,o],!0),v=[p.x+Math.floor(p.width/2),p.y+Math.floor(p.height/2)],g=Math.round(a*d),{width:m,height:_}=this.pickingFBO,y=this._getPickingRect({deviceX:v[0],deviceY:v[1],deviceRadius:g,deviceWidth:m,deviceHeight:_}),w={x:i-a,y:o-a,width:a*2+1,height:a*2+1};let T;const S=[],P=new Set;for(let A=0;A<s;A++){let k;if(y){const M=this._drawAndSample({layers:h,views:r,viewports:n,onViewportActive:c,deviceRect:y,cullRect:w,effects:f,pass:"picking:".concat(l)});k=Nwt({...M,deviceX:v[0],deviceY:v[1],deviceRadius:g,deviceRect:y})}else k={pickedColor:null,pickedObjectIndex:-1};let C;k.pickedLayer&&u&&this.depthFBO&&(C=this._drawAndSample({layers:[k.pickedLayer],views:r,viewports:n,onViewportActive:c,deviceRect:{x:k.pickedX,y:k.pickedY,width:1,height:1},cullRect:w,effects:f,pass:"picking:".concat(l,":z")},!0).pickedColors[0]),k.pickedLayer&&A+1<s&&(P.add(k.pickedLayer),k.pickedLayer.disablePickingIndex(k.pickedObjectIndex)),T=Bwt({pickInfo:k,lastPickedInfo:this.lastPickedInfo,mode:l,layers:h,viewports:n,x:i,y:o,z:C,pixelRatio:d});for(const M of T.values())M.layer&&S.push(M);if(!k.pickedColor)break}for(const A of P)A.restorePickingColors();return{result:S,emptyInfo:T.get(null)}}_pickVisibleObjects({layers:t,views:r,viewports:n,x:i,y:o,width:a=1,height:s=1,mode:l="query",maxObjects:u=null,onViewportActive:c,effects:f}){const h=this._getPickable(t);if(!h)return[];this._resizeBuffer();const d=tf(this.gl),p=fb(this.gl,[i,o],!0),v=p.x,g=p.y+p.height,m=fb(this.gl,[i+a,o+s],!0),_=m.x+m.width,y=m.y,w={x:v,y,width:_-v,height:g-y},T=this._drawAndSample({layers:h,views:r,viewports:n,onViewportActive:c,deviceRect:w,cullRect:{x:i,y:o,width:a,height:s},effects:f,pass:"picking:".concat(l)}),S=Fwt(T),P=new Map,A=Number.isFinite(u);for(let k=0;k<S.length&&!(A&&u&&P.size>=u);k++){const C=S[k];let M={color:C.pickedColor,layer:null,index:C.pickedObjectIndex,picked:!0,x:i,y:o,pixelRatio:d};M=iV({layer:C.pickedLayer,info:M,mode:l}),P.has(M.object)||P.set(M.object,M)}return Array.from(P.values())}_drawAndSample({layers:t,views:r,viewports:n,onViewportActive:i,deviceRect:o,cullRect:a,effects:s,pass:l},u=!1){const c=u?this.depthFBO:this.pickingFBO,{decodePickingColor:f}=this.pickLayersPass.render({layers:t,layerFilter:this.layerFilter,views:r,viewports:n,onViewportActive:i,pickingFBO:c,deviceRect:o,cullRect:a,effects:s,pass:l,pickZ:u}),{x:h,y:d,width:p,height:v}=o,g=new(u?Float32Array:Uint8Array)(p*v*4);return A_(c,{sourceX:h,sourceY:d,sourceWidth:p,sourceHeight:v,target:g}),{pickedColors:g,decodePickingColor:f}}_getPickingRect({deviceX:t,deviceY:r,deviceRadius:n,deviceWidth:i,deviceHeight:o}){const a=Math.max(0,t-n),s=Math.max(0,r-n),l=Math.min(i,t+n+1)-a,u=Math.min(o,r+n+1)-s;return l<=0||u<=0?null:{x:a,y:s,width:l,height:u}}}const Vwt={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class Uwt{constructor(t){E(this,"el",null),E(this,"isVisible",!1);const r=t.parentElement;r&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,Vwt),r.appendChild(this.el))}setTooltip(t,r,n){const i=this.el;if(!!i){if(typeof t=="string")i.innerText=t;else if(t)t.text&&(i.innerText=t.text),t.html&&(i.innerHTML=t.html),t.className&&(i.className=t.className),Object.assign(i.style,t.style);else{this.isVisible=!1,i.style.display="none";return}this.isVisible=!0,i.style.display="block",i.style.transform="translate(".concat(r,"px, ").concat(n,"px)")}}remove(){this.el&&(this.el.remove(),this.el=null)}}var Mf={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(e){(function(t,r,n,i){var o=["","webkit","Moz","MS","ms","o"],a=r.createElement("div"),s="function",l=Math.round,u=Math.abs,c=Date.now;function f(x,O,U){return setTimeout(y(x,U),O)}function h(x,O,U){return Array.isArray(x)?(d(x,U[O],U),!0):!1}function d(x,O,U){var H;if(!!x)if(x.forEach)x.forEach(O,U);else if(x.length!==i)for(H=0;H<x.length;)O.call(U,x[H],H,x),H++;else for(H in x)x.hasOwnProperty(H)&&O.call(U,x[H],H,x)}function p(x,O,U){var H="DEPRECATED METHOD: "+O+`
`+U+` AT 
`;return function(){var rt=new Error("get-stack-trace"),yt=rt&&rt.stack?rt.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Yt=t.console&&(t.console.warn||t.console.log);return Yt&&Yt.call(t.console,H,yt),x.apply(this,arguments)}}var v;typeof Object.assign!="function"?v=function(O){if(O===i||O===null)throw new TypeError("Cannot convert undefined or null to object");for(var U=Object(O),H=1;H<arguments.length;H++){var rt=arguments[H];if(rt!==i&&rt!==null)for(var yt in rt)rt.hasOwnProperty(yt)&&(U[yt]=rt[yt])}return U}:v=Object.assign;var g=p(function(O,U,H){for(var rt=Object.keys(U),yt=0;yt<rt.length;)(!H||H&&O[rt[yt]]===i)&&(O[rt[yt]]=U[rt[yt]]),yt++;return O},"extend","Use `assign`."),m=p(function(O,U){return g(O,U,!0)},"merge","Use `assign`.");function _(x,O,U){var H=O.prototype,rt;rt=x.prototype=Object.create(H),rt.constructor=x,rt._super=H,U&&v(rt,U)}function y(x,O){return function(){return x.apply(O,arguments)}}function w(x,O){return typeof x==s?x.apply(O&&O[0]||i,O):x}function T(x,O){return x===i?O:x}function S(x,O,U){d(C(O),function(H){x.addEventListener(H,U,!1)})}function P(x,O,U){d(C(O),function(H){x.removeEventListener(H,U,!1)})}function A(x,O){for(;x;){if(x==O)return!0;x=x.parentNode}return!1}function k(x,O){return x.indexOf(O)>-1}function C(x){return x.trim().split(/\s+/g)}function M(x,O,U){if(x.indexOf&&!U)return x.indexOf(O);for(var H=0;H<x.length;){if(U&&x[H][U]==O||!U&&x[H]===O)return H;H++}return-1}function D(x){return Array.prototype.slice.call(x,0)}function B(x,O,U){for(var H=[],rt=[],yt=0;yt<x.length;){var Yt=O?x[yt][O]:x[yt];M(rt,Yt)<0&&H.push(x[yt]),rt[yt]=Yt,yt++}return U&&(O?H=H.sort(function(mr,qr){return mr[O]>qr[O]}):H=H.sort()),H}function V(x,O){for(var U,H,rt=O[0].toUpperCase()+O.slice(1),yt=0;yt<o.length;){if(U=o[yt],H=U?U+rt:O,H in x)return H;yt++}return i}var N=1;function j(){return N++}function Z(x){var O=x.ownerDocument||x;return O.defaultView||O.parentWindow||t}var q=/mobile|tablet|ip(ad|hone|od)|android/i,et="ontouchstart"in t,Pt=V(t,"PointerEvent")!==i,Rt=et&&q.test(navigator.userAgent),wt="touch",St="pen",Ht="mouse",Y="kinect",it=25,K=1,pt=2,Tt=4,kt=8,lt=1,ft=2,$=4,G=8,X=16,J=ft|$,Q=G|X,ut=J|Q,vt=["x","y"],st=["clientX","clientY"];function ot(x,O){var U=this;this.manager=x,this.callback=O,this.element=x.element,this.target=x.options.inputTarget,this.domHandler=function(H){w(x.options.enable,[x])&&U.handler(H)},this.init()}ot.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(Z(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&P(this.element,this.evEl,this.domHandler),this.evTarget&&P(this.target,this.evTarget,this.domHandler),this.evWin&&P(Z(this.element),this.evWin,this.domHandler)}};function nt(x){var O,U=x.options.inputClass;return U?O=U:Pt?O=ny:Rt?O=up:et?O=iy:O=Gs,new O(x,Dt)}function Dt(x,O,U){var H=U.pointers.length,rt=U.changedPointers.length,yt=O&K&&H-rt===0,Yt=O&(Tt|kt)&&H-rt===0;U.isFirst=!!yt,U.isFinal=!!Yt,yt&&(x.session={}),U.eventType=O,Mt(x,U),x.emit("hammer.input",U),x.recognize(U),x.session.prevInput=U}function Mt(x,O){var U=x.session,H=O.pointers,rt=H.length;U.firstInput||(U.firstInput=Kt(O)),rt>1&&!U.firstMultiple?U.firstMultiple=Kt(O):rt===1&&(U.firstMultiple=!1);var yt=U.firstInput,Yt=U.firstMultiple,lr=Yt?Yt.center:yt.center,mr=O.center=me(H);O.timeStamp=c(),O.deltaTime=O.timeStamp-yt.timeStamp,O.angle=qi(lr,mr),O.distance=Ir(lr,mr),Nt(U,O),O.offsetDirection=Te(O.deltaX,O.deltaY);var qr=_e(O.deltaTime,O.deltaX,O.deltaY);O.overallVelocityX=qr.x,O.overallVelocityY=qr.y,O.overallVelocity=u(qr.x)>u(qr.y)?qr.x:qr.y,O.scale=Yt?Us(Yt.pointers,H):1,O.rotation=Yt?sp(Yt.pointers,H):0,O.maxPointers=U.prevInput?O.pointers.length>U.prevInput.maxPointers?O.pointers.length:U.prevInput.maxPointers:O.pointers.length,$t(U,O);var Ki=x.element;A(O.srcEvent.target,Ki)&&(Ki=O.srcEvent.target),O.target=Ki}function Nt(x,O){var U=O.center,H=x.offsetDelta||{},rt=x.prevDelta||{},yt=x.prevInput||{};(O.eventType===K||yt.eventType===Tt)&&(rt=x.prevDelta={x:yt.deltaX||0,y:yt.deltaY||0},H=x.offsetDelta={x:U.x,y:U.y}),O.deltaX=rt.x+(U.x-H.x),O.deltaY=rt.y+(U.y-H.y)}function $t(x,O){var U=x.lastInterval||O,H=O.timeStamp-U.timeStamp,rt,yt,Yt,lr;if(O.eventType!=kt&&(H>it||U.velocity===i)){var mr=O.deltaX-U.deltaX,qr=O.deltaY-U.deltaY,Ki=_e(H,mr,qr);yt=Ki.x,Yt=Ki.y,rt=u(Ki.x)>u(Ki.y)?Ki.x:Ki.y,lr=Te(mr,qr),x.lastInterval=O}else rt=U.velocity,yt=U.velocityX,Yt=U.velocityY,lr=U.direction;O.velocity=rt,O.velocityX=yt,O.velocityY=Yt,O.direction=lr}function Kt(x){for(var O=[],U=0;U<x.pointers.length;)O[U]={clientX:l(x.pointers[U].clientX),clientY:l(x.pointers[U].clientY)},U++;return{timeStamp:c(),pointers:O,center:me(O),deltaX:x.deltaX,deltaY:x.deltaY}}function me(x){var O=x.length;if(O===1)return{x:l(x[0].clientX),y:l(x[0].clientY)};for(var U=0,H=0,rt=0;rt<O;)U+=x[rt].clientX,H+=x[rt].clientY,rt++;return{x:l(U/O),y:l(H/O)}}function _e(x,O,U){return{x:O/x||0,y:U/x||0}}function Te(x,O){return x===O?lt:u(x)>=u(O)?x<0?ft:$:O<0?G:X}function Ir(x,O,U){U||(U=vt);var H=O[U[0]]-x[U[0]],rt=O[U[1]]-x[U[1]];return Math.sqrt(H*H+rt*rt)}function qi(x,O,U){U||(U=vt);var H=O[U[0]]-x[U[0]],rt=O[U[1]]-x[U[1]];return Math.atan2(rt,H)*180/Math.PI}function sp(x,O){return qi(O[1],O[0],st)+qi(x[1],x[0],st)}function Us(x,O){return Ir(O[0],O[1],st)/Ir(x[0],x[1],st)}var lp={mousedown:K,mousemove:pt,mouseup:Tt},Yr="mousedown",Nn="mousemove mouseup";function Gs(){this.evEl=Yr,this.evWin=Nn,this.pressed=!1,ot.apply(this,arguments)}_(Gs,ot,{handler:function(O){var U=lp[O.type];U&K&&O.button===0&&(this.pressed=!0),U&pt&&O.which!==1&&(U=Tt),this.pressed&&(U&Tt&&(this.pressed=!1),this.callback(this.manager,U,{pointers:[O],changedPointers:[O],pointerType:Ht,srcEvent:O}))}});var QG={pointerdown:K,pointermove:pt,pointerup:Tt,pointercancel:kt,pointerout:kt},tj={2:wt,3:St,4:Ht,5:Y},kA="pointerdown",AA="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(kA="MSPointerDown",AA="MSPointerMove MSPointerUp MSPointerCancel");function ny(){this.evEl=kA,this.evWin=AA,ot.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}_(ny,ot,{handler:function(O){var U=this.store,H=!1,rt=O.type.toLowerCase().replace("ms",""),yt=QG[rt],Yt=tj[O.pointerType]||O.pointerType,lr=Yt==wt,mr=M(U,O.pointerId,"pointerId");yt&K&&(O.button===0||lr)?mr<0&&(U.push(O),mr=U.length-1):yt&(Tt|kt)&&(H=!0),!(mr<0)&&(U[mr]=O,this.callback(this.manager,yt,{pointers:U,changedPointers:[O],pointerType:Yt,srcEvent:O}),H&&U.splice(mr,1))}});var ej={touchstart:K,touchmove:pt,touchend:Tt,touchcancel:kt},rj="touchstart",nj="touchstart touchmove touchend touchcancel";function CA(){this.evTarget=rj,this.evWin=nj,this.started=!1,ot.apply(this,arguments)}_(CA,ot,{handler:function(O){var U=ej[O.type];if(U===K&&(this.started=!0),!!this.started){var H=ij.call(this,O,U);U&(Tt|kt)&&H[0].length-H[1].length===0&&(this.started=!1),this.callback(this.manager,U,{pointers:H[0],changedPointers:H[1],pointerType:wt,srcEvent:O})}}});function ij(x,O){var U=D(x.touches),H=D(x.changedTouches);return O&(Tt|kt)&&(U=B(U.concat(H),"identifier",!0)),[U,H]}var oj={touchstart:K,touchmove:pt,touchend:Tt,touchcancel:kt},aj="touchstart touchmove touchend touchcancel";function up(){this.evTarget=aj,this.targetIds={},ot.apply(this,arguments)}_(up,ot,{handler:function(O){var U=oj[O.type],H=sj.call(this,O,U);!H||this.callback(this.manager,U,{pointers:H[0],changedPointers:H[1],pointerType:wt,srcEvent:O})}});function sj(x,O){var U=D(x.touches),H=this.targetIds;if(O&(K|pt)&&U.length===1)return H[U[0].identifier]=!0,[U,U];var rt,yt,Yt=D(x.changedTouches),lr=[],mr=this.target;if(yt=U.filter(function(qr){return A(qr.target,mr)}),O===K)for(rt=0;rt<yt.length;)H[yt[rt].identifier]=!0,rt++;for(rt=0;rt<Yt.length;)H[Yt[rt].identifier]&&lr.push(Yt[rt]),O&(Tt|kt)&&delete H[Yt[rt].identifier],rt++;if(!!lr.length)return[B(yt.concat(lr),"identifier",!0),lr]}var lj=2500,MA=25;function iy(){ot.apply(this,arguments);var x=y(this.handler,this);this.touch=new up(this.manager,x),this.mouse=new Gs(this.manager,x),this.primaryTouch=null,this.lastTouches=[]}_(iy,ot,{handler:function(O,U,H){var rt=H.pointerType==wt,yt=H.pointerType==Ht;if(!(yt&&H.sourceCapabilities&&H.sourceCapabilities.firesTouchEvents)){if(rt)uj.call(this,U,H);else if(yt&&cj.call(this,H))return;this.callback(O,U,H)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function uj(x,O){x&K?(this.primaryTouch=O.changedPointers[0].identifier,xA.call(this,O)):x&(Tt|kt)&&xA.call(this,O)}function xA(x){var O=x.changedPointers[0];if(O.identifier===this.primaryTouch){var U={x:O.clientX,y:O.clientY};this.lastTouches.push(U);var H=this.lastTouches,rt=function(){var yt=H.indexOf(U);yt>-1&&H.splice(yt,1)};setTimeout(rt,lj)}}function cj(x){for(var O=x.srcEvent.clientX,U=x.srcEvent.clientY,H=0;H<this.lastTouches.length;H++){var rt=this.lastTouches[H],yt=Math.abs(O-rt.x),Yt=Math.abs(U-rt.y);if(yt<=MA&&Yt<=MA)return!0}return!1}var LA=V(a.style,"touchAction"),IA=LA!==i,OA="compute",RA="auto",oy="manipulation",js="none",Wf="pan-x",Hf="pan-y",cp=hj();function ay(x,O){this.manager=x,this.set(O)}ay.prototype={set:function(x){x==OA&&(x=this.compute()),IA&&this.manager.element.style&&cp[x]&&(this.manager.element.style[LA]=x),this.actions=x.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var x=[];return d(this.manager.recognizers,function(O){w(O.options.enable,[O])&&(x=x.concat(O.getTouchAction()))}),fj(x.join(" "))},preventDefaults:function(x){var O=x.srcEvent,U=x.offsetDirection;if(this.manager.session.prevented){O.preventDefault();return}var H=this.actions,rt=k(H,js)&&!cp[js],yt=k(H,Hf)&&!cp[Hf],Yt=k(H,Wf)&&!cp[Wf];if(rt){var lr=x.pointers.length===1,mr=x.distance<2,qr=x.deltaTime<250;if(lr&&mr&&qr)return}if(!(Yt&&yt)&&(rt||yt&&U&J||Yt&&U&Q))return this.preventSrc(O)},preventSrc:function(x){this.manager.session.prevented=!0,x.preventDefault()}};function fj(x){if(k(x,js))return js;var O=k(x,Wf),U=k(x,Hf);return O&&U?js:O||U?O?Wf:Hf:k(x,oy)?oy:RA}function hj(){if(!IA)return!1;var x={},O=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(U){x[U]=O?t.CSS.supports("touch-action",U):!0}),x}var fp=1,Fn=2,xu=4,Oa=8,zo=Oa,Xf=16,Zi=32;function Vo(x){this.options=v({},this.defaults,x||{}),this.id=j(),this.manager=null,this.options.enable=T(this.options.enable,!0),this.state=fp,this.simultaneous={},this.requireFail=[]}Vo.prototype={defaults:{},set:function(x){return v(this.options,x),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(x){if(h(x,"recognizeWith",this))return this;var O=this.simultaneous;return x=hp(x,this),O[x.id]||(O[x.id]=x,x.recognizeWith(this)),this},dropRecognizeWith:function(x){return h(x,"dropRecognizeWith",this)?this:(x=hp(x,this),delete this.simultaneous[x.id],this)},requireFailure:function(x){if(h(x,"requireFailure",this))return this;var O=this.requireFail;return x=hp(x,this),M(O,x)===-1&&(O.push(x),x.requireFailure(this)),this},dropRequireFailure:function(x){if(h(x,"dropRequireFailure",this))return this;x=hp(x,this);var O=M(this.requireFail,x);return O>-1&&this.requireFail.splice(O,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(x){return!!this.simultaneous[x.id]},emit:function(x){var O=this,U=this.state;function H(rt){O.manager.emit(rt,x)}U<Oa&&H(O.options.event+DA(U)),H(O.options.event),x.additionalEvent&&H(x.additionalEvent),U>=Oa&&H(O.options.event+DA(U))},tryEmit:function(x){if(this.canEmit())return this.emit(x);this.state=Zi},canEmit:function(){for(var x=0;x<this.requireFail.length;){if(!(this.requireFail[x].state&(Zi|fp)))return!1;x++}return!0},recognize:function(x){var O=v({},x);if(!w(this.options.enable,[this,O])){this.reset(),this.state=Zi;return}this.state&(zo|Xf|Zi)&&(this.state=fp),this.state=this.process(O),this.state&(Fn|xu|Oa|Xf)&&this.tryEmit(O)},process:function(x){},getTouchAction:function(){},reset:function(){}};function DA(x){return x&Xf?"cancel":x&Oa?"end":x&xu?"move":x&Fn?"start":""}function NA(x){return x==X?"down":x==G?"up":x==ft?"left":x==$?"right":""}function hp(x,O){var U=O.manager;return U?U.get(x):x}function ui(){Vo.apply(this,arguments)}_(ui,Vo,{defaults:{pointers:1},attrTest:function(x){var O=this.options.pointers;return O===0||x.pointers.length===O},process:function(x){var O=this.state,U=x.eventType,H=O&(Fn|xu),rt=this.attrTest(x);return H&&(U&kt||!rt)?O|Xf:H||rt?U&Tt?O|Oa:O&Fn?O|xu:Fn:Zi}});function dp(){ui.apply(this,arguments),this.pX=null,this.pY=null}_(dp,ui,{defaults:{event:"pan",threshold:10,pointers:1,direction:ut},getTouchAction:function(){var x=this.options.direction,O=[];return x&J&&O.push(Hf),x&Q&&O.push(Wf),O},directionTest:function(x){var O=this.options,U=!0,H=x.distance,rt=x.direction,yt=x.deltaX,Yt=x.deltaY;return rt&O.direction||(O.direction&J?(rt=yt===0?lt:yt<0?ft:$,U=yt!=this.pX,H=Math.abs(x.deltaX)):(rt=Yt===0?lt:Yt<0?G:X,U=Yt!=this.pY,H=Math.abs(x.deltaY))),x.direction=rt,U&&H>O.threshold&&rt&O.direction},attrTest:function(x){return ui.prototype.attrTest.call(this,x)&&(this.state&Fn||!(this.state&Fn)&&this.directionTest(x))},emit:function(x){this.pX=x.deltaX,this.pY=x.deltaY;var O=NA(x.direction);O&&(x.additionalEvent=this.options.event+O),this._super.emit.call(this,x)}});function sy(){ui.apply(this,arguments)}_(sy,ui,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[js]},attrTest:function(x){return this._super.attrTest.call(this,x)&&(Math.abs(x.scale-1)>this.options.threshold||this.state&Fn)},emit:function(x){if(x.scale!==1){var O=x.scale<1?"in":"out";x.additionalEvent=this.options.event+O}this._super.emit.call(this,x)}});function ly(){Vo.apply(this,arguments),this._timer=null,this._input=null}_(ly,Vo,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[RA]},process:function(x){var O=this.options,U=x.pointers.length===O.pointers,H=x.distance<O.threshold,rt=x.deltaTime>O.time;if(this._input=x,!H||!U||x.eventType&(Tt|kt)&&!rt)this.reset();else if(x.eventType&K)this.reset(),this._timer=f(function(){this.state=zo,this.tryEmit()},O.time,this);else if(x.eventType&Tt)return zo;return Zi},reset:function(){clearTimeout(this._timer)},emit:function(x){this.state===zo&&(x&&x.eventType&Tt?this.manager.emit(this.options.event+"up",x):(this._input.timeStamp=c(),this.manager.emit(this.options.event,this._input)))}});function uy(){ui.apply(this,arguments)}_(uy,ui,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[js]},attrTest:function(x){return this._super.attrTest.call(this,x)&&(Math.abs(x.rotation)>this.options.threshold||this.state&Fn)}});function cy(){ui.apply(this,arguments)}_(cy,ui,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:J|Q,pointers:1},getTouchAction:function(){return dp.prototype.getTouchAction.call(this)},attrTest:function(x){var O=this.options.direction,U;return O&(J|Q)?U=x.overallVelocity:O&J?U=x.overallVelocityX:O&Q&&(U=x.overallVelocityY),this._super.attrTest.call(this,x)&&O&x.offsetDirection&&x.distance>this.options.threshold&&x.maxPointers==this.options.pointers&&u(U)>this.options.velocity&&x.eventType&Tt},emit:function(x){var O=NA(x.offsetDirection);O&&this.manager.emit(this.options.event+O,x),this.manager.emit(this.options.event,x)}});function pp(){Vo.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}_(pp,Vo,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[oy]},process:function(x){var O=this.options,U=x.pointers.length===O.pointers,H=x.distance<O.threshold,rt=x.deltaTime<O.time;if(this.reset(),x.eventType&K&&this.count===0)return this.failTimeout();if(H&&rt&&U){if(x.eventType!=Tt)return this.failTimeout();var yt=this.pTime?x.timeStamp-this.pTime<O.interval:!0,Yt=!this.pCenter||Ir(this.pCenter,x.center)<O.posThreshold;this.pTime=x.timeStamp,this.pCenter=x.center,!Yt||!yt?this.count=1:this.count+=1,this._input=x;var lr=this.count%O.taps;if(lr===0)return this.hasRequireFailures()?(this._timer=f(function(){this.state=zo,this.tryEmit()},O.interval,this),Fn):zo}return Zi},failTimeout:function(){return this._timer=f(function(){this.state=Zi},this.options.interval,this),Zi},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==zo&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Uo(x,O){return O=O||{},O.recognizers=T(O.recognizers,Uo.defaults.preset),new fy(x,O)}Uo.VERSION="2.0.7",Uo.defaults={domEvents:!1,touchAction:OA,enable:!0,inputTarget:null,inputClass:null,preset:[[uy,{enable:!1}],[sy,{enable:!1},["rotate"]],[cy,{direction:J}],[dp,{direction:J},["swipe"]],[pp],[pp,{event:"doubletap",taps:2},["tap"]],[ly]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var dj=1,FA=2;function fy(x,O){this.options=v({},Uo.defaults,O||{}),this.options.inputTarget=this.options.inputTarget||x,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=x,this.input=nt(this),this.touchAction=new ay(this,this.options.touchAction),BA(this,!0),d(this.options.recognizers,function(U){var H=this.add(new U[0](U[1]));U[2]&&H.recognizeWith(U[2]),U[3]&&H.requireFailure(U[3])},this)}fy.prototype={set:function(x){return v(this.options,x),x.touchAction&&this.touchAction.update(),x.inputTarget&&(this.input.destroy(),this.input.target=x.inputTarget,this.input.init()),this},stop:function(x){this.session.stopped=x?FA:dj},recognize:function(x){var O=this.session;if(!O.stopped){this.touchAction.preventDefaults(x);var U,H=this.recognizers,rt=O.curRecognizer;(!rt||rt&&rt.state&zo)&&(rt=O.curRecognizer=null);for(var yt=0;yt<H.length;)U=H[yt],O.stopped!==FA&&(!rt||U==rt||U.canRecognizeWith(rt))?U.recognize(x):U.reset(),!rt&&U.state&(Fn|xu|Oa)&&(rt=O.curRecognizer=U),yt++}},get:function(x){if(x instanceof Vo)return x;for(var O=this.recognizers,U=0;U<O.length;U++)if(O[U].options.event==x)return O[U];return null},add:function(x){if(h(x,"add",this))return this;var O=this.get(x.options.event);return O&&this.remove(O),this.recognizers.push(x),x.manager=this,this.touchAction.update(),x},remove:function(x){if(h(x,"remove",this))return this;if(x=this.get(x),x){var O=this.recognizers,U=M(O,x);U!==-1&&(O.splice(U,1),this.touchAction.update())}return this},on:function(x,O){if(x!==i&&O!==i){var U=this.handlers;return d(C(x),function(H){U[H]=U[H]||[],U[H].push(O)}),this}},off:function(x,O){if(x!==i){var U=this.handlers;return d(C(x),function(H){O?U[H]&&U[H].splice(M(U[H],O),1):delete U[H]}),this}},emit:function(x,O){this.options.domEvents&&pj(x,O);var U=this.handlers[x]&&this.handlers[x].slice();if(!(!U||!U.length)){O.type=x,O.preventDefault=function(){O.srcEvent.preventDefault()};for(var H=0;H<U.length;)U[H](O),H++}},destroy:function(){this.element&&BA(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function BA(x,O){var U=x.element;if(!!U.style){var H;d(x.options.cssProps,function(rt,yt){H=V(U.style,yt),O?(x.oldCssProps[H]=U.style[H],U.style[H]=rt):U.style[H]=x.oldCssProps[H]||""}),O||(x.oldCssProps={})}}function pj(x,O){var U=r.createEvent("Event");U.initEvent(x,!0,!0),U.gesture=O,O.target.dispatchEvent(U)}v(Uo,{INPUT_START:K,INPUT_MOVE:pt,INPUT_END:Tt,INPUT_CANCEL:kt,STATE_POSSIBLE:fp,STATE_BEGAN:Fn,STATE_CHANGED:xu,STATE_ENDED:Oa,STATE_RECOGNIZED:zo,STATE_CANCELLED:Xf,STATE_FAILED:Zi,DIRECTION_NONE:lt,DIRECTION_LEFT:ft,DIRECTION_RIGHT:$,DIRECTION_UP:G,DIRECTION_DOWN:X,DIRECTION_HORIZONTAL:J,DIRECTION_VERTICAL:Q,DIRECTION_ALL:ut,Manager:fy,Input:ot,TouchAction:ay,TouchInput:up,MouseInput:Gs,PointerEventInput:ny,TouchMouseInput:iy,SingleTouchInput:CA,Recognizer:Vo,AttrRecognizer:ui,Tap:pp,Pan:dp,Swipe:cy,Pinch:sy,Rotate:uy,Press:ly,on:S,off:P,each:d,merge:m,extend:g,assign:v,inherit:_,bindFn:y,prefixed:V});var vj=typeof t<"u"?t:typeof self<"u"?self:{};vj.Hammer=Uo,typeof i=="function"&&i.amd?i(function(){return Uo}):e.exports?e.exports=Uo:t[n]=Uo})(window,document,"Hammer")})(Mf);const Gwt=Mf.exports,io=gj({__proto__:null,default:Gwt},[Mf.exports]),oV=1,aV=2,iT=4,jwt={mousedown:oV,mousemove:aV,mouseup:iT};function Wwt(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return!0;return!1}function Hwt(e){const t=e.prototype.handler;e.prototype.handler=function(n){const i=this.store;n.button>0&&n.type==="pointerdown"&&(Wwt(i,o=>o.pointerId===n.pointerId)||i.push(n)),t.call(this,n)}}function Xwt(e){e.prototype.handler=function(r){let n=jwt[r.type];n&oV&&r.button>=0&&(this.pressed=!0),n&aV&&r.which===0&&(n=iT),this.pressed&&(n&iT&&(this.pressed=!1),this.callback(this.manager,n,{pointers:[r],changedPointers:[r],pointerType:"mouse",srcEvent:r}))}}Hwt(Mf.exports.PointerEventInput);Xwt(Mf.exports.MouseInput);const Ywt=Mf.exports.Manager;class I_{constructor(t,r,n){this.element=t,this.callback=r,this.options={enable:!0,...n}}}const qwt=io?[[io.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[io.Rotate,{enable:!1}],[io.Pinch,{enable:!1}],[io.Swipe,{enable:!1}],[io.Pan,{threshold:0,enable:!1}],[io.Press,{enable:!1}],[io.Tap,{event:"doubletap",taps:2,enable:!1}],[io.Tap,{event:"anytap",enable:!1}],[io.Tap,{enable:!1}]]:null,jL={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},Zwt={doubletap:["tap"]},Kwt={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},gk={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},Jwt={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},WL={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},Qwt=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",Ec=typeof window<"u"?window:global;let oT=!1;try{const e={get passive(){return oT=!0,!0}};Ec.addEventListener("test",null,e),Ec.removeEventListener("test",null)}catch{oT=!1}const tSt=Qwt.indexOf("firefox")!==-1,{WHEEL_EVENTS:eSt}=gk,HL="wheel",XL=4.000244140625,rSt=40,nSt=.25;class iSt extends I_{constructor(t,r,n){super(t,r,n),this.handleEvent=i=>{if(!this.options.enable)return;let o=i.deltaY;Ec.WheelEvent&&(tSt&&i.deltaMode===Ec.WheelEvent.DOM_DELTA_PIXEL&&(o/=Ec.devicePixelRatio),i.deltaMode===Ec.WheelEvent.DOM_DELTA_LINE&&(o*=rSt)),o!==0&&o%XL===0&&(o=Math.floor(o/XL)),i.shiftKey&&o&&(o=o*nSt),this.callback({type:HL,center:{x:i.clientX,y:i.clientY},delta:-o,srcEvent:i,pointerType:"mouse",target:i.target})},this.events=(this.options.events||[]).concat(eSt),this.events.forEach(i=>t.addEventListener(i,this.handleEvent,oT?{passive:!1}:!1))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,r){t===HL&&(this.options.enable=r)}}const{MOUSE_EVENTS:oSt}=gk,YL="pointermove",qL="pointerover",ZL="pointerout",KL="pointerenter",JL="pointerleave";class aSt extends I_{constructor(t,r,n){super(t,r,n),this.handleEvent=o=>{this.handleOverEvent(o),this.handleOutEvent(o),this.handleEnterEvent(o),this.handleLeaveEvent(o),this.handleMoveEvent(o)},this.pressed=!1;const{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,this.events=(this.options.events||[]).concat(oSt),this.events.forEach(o=>t.addEventListener(o,this.handleEvent))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,r){t===YL&&(this.enableMoveEvent=r),t===qL&&(this.enableOverEvent=r),t===ZL&&(this.enableOutEvent=r),t===KL&&(this.enableEnterEvent=r),t===JL&&(this.enableLeaveEvent=r)}handleOverEvent(t){this.enableOverEvent&&t.type==="mouseover"&&this._emit(qL,t)}handleOutEvent(t){this.enableOutEvent&&t.type==="mouseout"&&this._emit(ZL,t)}handleEnterEvent(t){this.enableEnterEvent&&t.type==="mouseenter"&&this._emit(KL,t)}handleLeaveEvent(t){this.enableLeaveEvent&&t.type==="mouseleave"&&this._emit(JL,t)}handleMoveEvent(t){if(this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":t.which===0&&(this.pressed=!1),this.pressed||this._emit(YL,t);break;case"mouseup":this.pressed=!1;break}}_emit(t,r){this.callback({type:t,center:{x:r.clientX,y:r.clientY},srcEvent:r,pointerType:"mouse",target:r.target})}}const{KEY_EVENTS:sSt}=gk,QL="keydown",tI="keyup";class lSt extends I_{constructor(t,r,n){super(t,r,n),this.handleEvent=i=>{const o=i.target||i.srcElement;o.tagName==="INPUT"&&o.type==="text"||o.tagName==="TEXTAREA"||(this.enableDownEvent&&i.type==="keydown"&&this.callback({type:QL,srcEvent:i,key:i.key,target:i.target}),this.enableUpEvent&&i.type==="keyup"&&this.callback({type:tI,srcEvent:i,key:i.key,target:i.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(sSt),t.tabIndex=this.options.tabIndex||0,t.style.outline="none",this.events.forEach(i=>t.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,r){t===QL&&(this.enableDownEvent=r),t===tI&&(this.enableUpEvent=r)}}const eI="contextmenu";class uSt extends I_{constructor(t,r,n){super(t,r,n),this.handleEvent=i=>{!this.options.enable||this.callback({type:eI,center:{x:i.clientX,y:i.clientY},srcEvent:i,pointerType:"mouse",target:i.target})},t.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(t,r){t===eI&&(this.options.enable=r)}}const aT=1,d1=2,sT=4,cSt={pointerdown:aT,pointermove:d1,pointerup:sT,mousedown:aT,mousemove:d1,mouseup:sT},fSt=1,hSt=2,dSt=3,pSt=0,vSt=1,gSt=2,mSt=1,_St=2,ySt=4;function bSt(e){const t=cSt[e.srcEvent.type];if(!t)return null;const{buttons:r,button:n,which:i}=e.srcEvent;let o=!1,a=!1,s=!1;return t===sT||t===d1&&!Number.isFinite(r)?(o=i===fSt,a=i===hSt,s=i===dSt):t===d1?(o=Boolean(r&mSt),a=Boolean(r&ySt),s=Boolean(r&_St)):t===aT&&(o=n===pSt,a=n===vSt,s=n===gSt),{leftButton:o,middleButton:a,rightButton:s}}function wSt(e,t){const r=e.center;if(!r)return null;const n=t.getBoundingClientRect(),i=n.width/t.offsetWidth||1,o=n.height/t.offsetHeight||1,a={x:(r.x-n.left-t.clientLeft)/i,y:(r.y-n.top-t.clientTop)/o};return{center:r,offsetCenter:a}}const Cb={srcElement:"root",priority:0};class SSt{constructor(t){this.handleEvent=r=>{if(this.isEmpty())return;const n=this._normalizeEvent(r);let i=r.srcEvent.target;for(;i&&i!==n.rootElement;){if(this._emit(n,i),n.handled)return;i=i.parentNode}this._emit(n,"root")},this.eventManager=t,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(t,r,n,i=!1,o=!1){const{handlers:a,handlersByElement:s}=this;let l=Cb;typeof n=="string"||n&&n.addEventListener?l={...Cb,srcElement:n}:n&&(l={...Cb,...n});let u=s.get(l.srcElement);u||(u=[],s.set(l.srcElement,u));const c={type:t,handler:r,srcElement:l.srcElement,priority:l.priority};i&&(c.once=!0),o&&(c.passive=!0),a.push(c),this._active=this._active||!c.passive;let f=u.length-1;for(;f>=0&&!(u[f].priority>=c.priority);)f--;u.splice(f+1,0,c)}remove(t,r){const{handlers:n,handlersByElement:i}=this;for(let o=n.length-1;o>=0;o--){const a=n[o];if(a.type===t&&a.handler===r){n.splice(o,1);const s=i.get(a.srcElement);s.splice(s.indexOf(a),1),s.length===0&&i.delete(a.srcElement)}}this._active=n.some(o=>!o.passive)}_emit(t,r){const n=this.handlersByElement.get(r);if(n){let i=!1;const o=()=>{t.handled=!0},a=()=>{t.handled=!0,i=!0},s=[];for(let l=0;l<n.length;l++){const{type:u,handler:c,once:f}=n[l];if(c({...t,type:u,stopPropagation:o,stopImmediatePropagation:a}),f&&s.push(n[l]),i)break}for(let l=0;l<s.length;l++){const{type:u,handler:c}=s[l];this.remove(u,c)}}}_normalizeEvent(t){const r=this.eventManager.getElement();return{...t,...bSt(t),...wSt(t,r),preventDefault:()=>{t.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:r}}}const TSt={events:null,recognizers:null,recognizerOptions:{},Manager:Ywt,touchAction:"none",tabIndex:0};class PSt{constructor(t=null,r){this._onBasicInput=i=>{const{srcEvent:o}=i,a=Kwt[o.type];a&&this.manager.emit(a,i)},this._onOtherEvent=i=>{this.manager.emit(i.type,i)},this.options={...TSt,...r},this.events=new Map,this.setElement(t);const{events:n}=this.options;n&&this.on(n)}getElement(){return this.element}setElement(t){if(this.element&&this.destroy(),this.element=t,!t)return;const{options:r}=this,n=r.Manager;this.manager=new n(t,{touchAction:r.touchAction,recognizers:r.recognizers||qwt}).on("hammer.input",this._onBasicInput),r.recognizers||Object.keys(jL).forEach(i=>{const o=this.manager.get(i);o&&jL[i].forEach(a=>{o.recognizeWith(a)})});for(const i in r.recognizerOptions){const o=this.manager.get(i);if(o){const a=r.recognizerOptions[i];delete a.enable,o.set(a)}}this.wheelInput=new iSt(t,this._onOtherEvent,{enable:!1}),this.moveInput=new aSt(t,this._onOtherEvent,{enable:!1}),this.keyInput=new lSt(t,this._onOtherEvent,{enable:!1,tabIndex:r.tabIndex}),this.contextmenuInput=new uSt(t,this._onOtherEvent,{enable:!1});for(const[i,o]of this.events)o.isEmpty()||(this._toggleRecognizer(o.recognizerName,!0),this.manager.on(i,o.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(t,r,n){this._addEventHandler(t,r,n,!1)}once(t,r,n){this._addEventHandler(t,r,n,!0)}watch(t,r,n){this._addEventHandler(t,r,n,!1,!0)}off(t,r){this._removeEventHandler(t,r)}_toggleRecognizer(t,r){const{manager:n}=this;if(!n)return;const i=n.get(t);if(i&&i.options.enable!==r){i.set({enable:r});const o=Zwt[t];o&&!this.options.recognizers&&o.forEach(a=>{const s=n.get(a);r?(s.requireFailure(t),i.dropRequireFailure(a)):s.dropRequireFailure(t)})}this.wheelInput.enableEventType(t,r),this.moveInput.enableEventType(t,r),this.keyInput.enableEventType(t,r),this.contextmenuInput.enableEventType(t,r)}_addEventHandler(t,r,n,i,o){if(typeof t!="string"){n=r;for(const c in t)this._addEventHandler(c,t[c],n,i,o);return}const{manager:a,events:s}=this,l=WL[t]||t;let u=s.get(l);u||(u=new SSt(this),s.set(l,u),u.recognizerName=Jwt[l]||l,a&&a.on(l,u.handleEvent)),u.add(t,r,n,i,o),u.isEmpty()||this._toggleRecognizer(u.recognizerName,!0)}_removeEventHandler(t,r){if(typeof t!="string"){for(const a in t)this._removeEventHandler(a,t[a]);return}const{events:n}=this,i=WL[t]||t,o=n.get(i);if(!!o&&(o.remove(t,r),o.isEmpty())){const{recognizerName:a}=o;let s=!1;for(const l of n.values())if(l.recognizerName===a&&!l.isEmpty()){s=!0;break}s||this._toggleRecognizer(a,!1)}}}function _l(){}const ESt=({isDragging:e})=>e?"grabbing":"grab",sV={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:_l,onResize:_l,onViewStateChange:_l,onInteractionStateChange:_l,onBeforeRender:_l,onAfterRender:_l,onLoad:_l,onError:e=>Wt.error(e.message)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:ESt,getTooltip:null,debug:!1,drawPickingColors:!1};class mk{constructor(t){E(this,"props",void 0),E(this,"width",0),E(this,"height",0),E(this,"userData",{}),E(this,"canvas",null),E(this,"viewManager",null),E(this,"layerManager",null),E(this,"effectManager",null),E(this,"deckRenderer",null),E(this,"deckPicker",null),E(this,"eventManager",null),E(this,"tooltip",null),E(this,"metrics",void 0),E(this,"animationLoop",void 0),E(this,"stats",void 0),E(this,"viewState",void 0),E(this,"cursorState",void 0),E(this,"_needsRedraw",void 0),E(this,"_pickRequest",void 0),E(this,"_lastPointerDownInfo",null),E(this,"_metricsCounter",void 0),E(this,"_onPointerMove",r=>{const{_pickRequest:n}=this;if(r.type==="pointerleave")n.x=-1,n.y=-1,n.radius=0;else{if(r.leftButton||r.rightButton)return;{const i=r.offsetCenter;if(!i)return;n.x=i.x,n.y=i.y,n.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:n.x,y:n.y}),n.event=r}),E(this,"_onEvent",r=>{const n=xL[r.type],i=r.offsetCenter;if(!n||!i||!this.layerManager)return;const o=this.layerManager.getLayers(),a=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:o,viewports:this.getViewports(i)},this._lastPointerDownInfo),{layer:s}=a,l=s&&(s[n.handler]||s.props[n.handler]),u=this.props[n.handler];let c=!1;l&&(c=l.call(s,a,r)),!c&&u&&u(a,r)}),E(this,"_onPointerDown",r=>{const n=r.offsetCenter,i=this._pick("pickObject","pickObject Time",{x:n.x,y:n.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=i.result[0]||i.emptyInfo}),this.props={...sV,...t},t=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},t.viewState&&t.initialViewState&&Wt.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),C$()==="IE"&&Wt.warn("IE 11 is not supported")(),this.viewState=t.initialViewState,t.gl||typeof document<"u"&&(this.canvas=this._createCanvas(t)),this.animationLoop=this._createAnimationLoop(t),this.stats=new T_({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(t),t._typedArrayManagerProps&&of.setOptions(t._typedArrayManagerProps),this.animationLoop.start()}finalize(){var t,r,n,i,o,a,s;if(this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,(t=this.layerManager)===null||t===void 0||t.finalize(),this.layerManager=null,(r=this.viewManager)===null||r===void 0||r.finalize(),this.viewManager=null,(n=this.effectManager)===null||n===void 0||n.finalize(),this.effectManager=null,(i=this.deckRenderer)===null||i===void 0||i.finalize(),this.deckRenderer=null,(o=this.deckPicker)===null||o===void 0||o.finalize(),this.deckPicker=null,(a=this.eventManager)===null||a===void 0||a.destroy(),this.eventManager=null,(s=this.tooltip)===null||s===void 0||s.remove(),this.tooltip=null,!this.props.canvas&&!this.props.gl&&this.canvas){var l;(l=this.canvas.parentElement)===null||l===void 0||l.removeChild(this.canvas),this.canvas=null}}setProps(t){this.stats.get("setProps Time").timeStart(),"onLayerHover"in t&&Wt.removed("onLayerHover","onHover")(),"onLayerClick"in t&&Wt.removed("onLayerClick","onClick")(),t.initialViewState&&!Cf(this.props.initialViewState,t.initialViewState)&&(this.viewState=t.initialViewState),Object.assign(this.props,t),this._setCanvasSize(this.props);const r=Object.create(this.props);Object.assign(r,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(r),this.layerManager&&(this.viewManager.setProps(r),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(r),this.effectManager.setProps(r),this.deckRenderer.setProps(r),this.deckPicker.setProps(r)),this.stats.get("setProps Time").timeEnd()}needsRedraw(t={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let r=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);const n=this.viewManager.needsRedraw(t),i=this.layerManager.needsRedraw(t),o=this.effectManager.needsRedraw(t),a=this.deckRenderer.needsRedraw(t);return r=r||n||i||o||a,r}redraw(t){if(!this.layerManager)return;let r=this.needsRedraw({clearRedrawFlags:!0});r=t||r,r&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(r):this._drawLayers(r))}get isInitialized(){return this.viewManager!==null}getViews(){return cr(this.viewManager),this.viewManager.views}getViewports(t){return cr(this.viewManager),this.viewManager.getViewports(t)}pickObject(t){const r=this._pick("pickObject","pickObject Time",t).result;return r.length?r[0]:null}pickMultipleObjects(t){return t.depth=t.depth||10,this._pick("pickObject","pickMultipleObjects Time",t).result}pickObjects(t){return this._pick("pickObjects","pickObjects Time",t)}_addResources(t,r=!1){for(const n in t)this.layerManager.resourceManager.add({resourceId:n,data:t[n],forceUpdate:r})}_removeResources(t){for(const r of t)this.layerManager.resourceManager.remove(r)}_pick(t,r,n){cr(this.deckPicker);const{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(r).timeStart();const o=this.deckPicker[t]({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...n});return i.get(r).timeEnd(),o}_createCanvas(t){let r=t.canvas;return typeof r=="string"&&(r=document.getElementById(r),cr(r)),r||(r=document.createElement("canvas"),r.id=t.id||"deckgl-overlay",(t.parent||document.body).appendChild(r)),Object.assign(r.style,t.style),r}_setCanvasSize(t){if(!this.canvas)return;const{width:r,height:n}=t;if(r||r===0){const o=Number.isFinite(r)?"".concat(r,"px"):r;this.canvas.style.width=o}if(n||n===0){var i;const o=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.position=((i=t.style)===null||i===void 0?void 0:i.position)||"absolute",this.canvas.style.height=o}}_updateCanvasSize(){const{canvas:t}=this;if(!t)return;const r=t.clientWidth||t.width,n=t.clientHeight||t.height;if(r!==this.width||n!==this.height){var i;this.width=r,this.height=n,(i=this.viewManager)===null||i===void 0||i.setProps({width:r,height:n}),this.props.onResize({width:r,height:n})}}_createAnimationLoop(t){const{width:r,height:n,gl:i,glOptions:o,debug:a,onError:s,onBeforeRender:l,onAfterRender:u,useDevicePixels:c}=t;return new G1t({width:r,height:n,useDevicePixels:c,autoResizeViewport:!1,gl:i,onCreateContext:f=>Y$({...o,...f,canvas:this.canvas,debug:a,onContextLost:()=>this._onContextLost()}),onInitialize:f=>this._setGLContext(f.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:l,onAfterRender:u,onError:s})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let t=this.props.views||[new eV({id:"default-view"})];return t=Array.isArray(t)?t:[t],t.length&&this.props.controller&&(t[0].props.controller=this.props.controller),t}_onContextLost(){const{onError:t}=this.props;this.animationLoop&&t&&t(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:t}=this;if(t.event){const{result:n,emptyInfo:i}=this._pick("pickObject","pickObject Time",t);this.cursorState.isHovering=n.length>0;let o=i,a=!1;for(const s of n){var r;o=s,a=((r=s.layer)===null||r===void 0?void 0:r.onHover(s,t.event))||a}if(!a&&this.props.onHover&&this.props.onHover(o,t.event),this.props.getTooltip&&this.tooltip){const s=this.props.getTooltip(o);this.tooltip.setTooltip(s,o.x,o.y)}t.event=null}}_updateCursor(){const t=this.props.parent||this.canvas;t&&(t.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(t){if(this.layerManager)return;this.canvas||(this.canvas=t.canvas,QE(t,{enable:!0,copyState:!0})),this.tooltip=new Uwt(this.canvas),ba(t,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(t);const r=new Bz;r.play(),this.animationLoop.attachTimeline(r),this.eventManager=new PSt(this.props.parent||t.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const i in xL)this.eventManager.on(i,this._onEvent);this.viewManager=new owt({timeline:r,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const n=this.viewManager.getViewports()[0];this.layerManager=new iwt(t,{deck:this,stats:this.stats,viewport:n,timeline:r}),this.effectManager=new Mwt,this.deckRenderer=new Rwt(t),this.deckPicker=new zwt(t),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(t,r){const{gl:n}=this.layerManager.context;ba(n,this.props.parameters),this.props.onBeforeRender({gl:n}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:t,effects:this.effectManager.getEffects(),...r}),this.props.onAfterRender({gl:n})}_onRenderFrame(t){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),Wt.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(t){const r=this.props.onViewStateChange(t)||t.viewState;this.viewState&&(this.viewState={...this.viewState,[t.viewId]:r},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(t){this.cursorState.isDragging=t.isDragging||!1,this.props.onInteractionStateChange(t)}_getFrameStats(){const{stats:t}=this;t.get("frameRate").timeEnd(),t.get("frameRate").timeStart();const r=this.animationLoop.stats;t.get("GPU Time").addTime(r.get("GPU Time").lastTiming),t.get("CPU Time").addTime(r.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:t,stats:r}=this;t.fps=r.get("frameRate").getHz(),t.setPropsTime=r.get("setProps Time").time,t.updateAttributesTime=r.get("Update Attributes").time,t.framesRedrawn=r.get("Redraw Count").count,t.pickTime=r.get("pickObject Time").time+r.get("pickMultipleObjects Time").time+r.get("pickObjects Time").time,t.pickCount=r.get("Pick Count").count,t.gpuTime=r.get("GPU Time").time,t.cpuTime=r.get("CPU Time").time,t.gpuTimePerFrame=r.get("GPU Time").getAverageTime(),t.cpuTimePerFrame=r.get("CPU Time").getAverageTime();const n=Rl.get("Memory Usage");t.bufferMemory=n.get("Buffer Memory").count,t.textureMemory=n.get("Texture Memory").count,t.renderbufferMemory=n.get("Renderbuffer Memory").count,t.gpuMemory=n.get("GPU Memory").count}}E(mk,"defaultProps",sV);E(mk,"VERSION",Zvt.VERSION);class Mb{constructor(t,r){E(this,"opts",void 0),E(this,"source",void 0),this.opts=r,this.source=t}get value(){return this.source.value}getValue(){const t=this.source.getBuffer(),r=this.getAccessor();if(t)return[t,r];const{value:n}=this.source,{size:i}=r;let o=n;if(n&&n.length!==i){o=new Float32Array(i);const a=r.elementOffset||0;for(let s=0;s<i;++s)o[s]=n[a+s]}return o}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function kSt(e){switch(e){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}function im(e){return e.stride||e.size*e.bytesPerElement}function lV(e,t){t.offset&&Wt.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const r=im(e),n=t.vertexOffset!==void 0?t.vertexOffset:e.vertexOffset||0,i=t.elementOffset||0,o=n*r+i*e.bytesPerElement+(e.offset||0);return{...t,offset:o,stride:r}}function ASt(e,t){const r=lV(e,t);return{high:r,low:{...r,offset:r.offset+e.size*4}}}class CSt{constructor(t,r,n){E(this,"gl",void 0),E(this,"id",void 0),E(this,"size",void 0),E(this,"settings",void 0),E(this,"value",void 0),E(this,"doublePrecision",void 0),E(this,"_buffer",void 0),E(this,"state",void 0),this.gl=t,this.id=r.id||"",this.size=r.size||1;const i=r.logicalType||r.type,o=i===5130;let{defaultValue:a}=r;a=Number.isFinite(a)?[a]:a||new Array(this.size).fill(0);let s;o?s=5126:!i&&r.isIndexed?s=t&&bmt(t,Be.ELEMENT_INDEX_UINT32)?5125:5123:s=i||5126;let l=kSt(i||s||5126);this.doublePrecision=o,o&&r.fp64===!1&&(l=Float32Array),this.value=null,this.settings={...r,defaultType:l,defaultValue:a,logicalType:i,type:s,size:this.size,bytesPerElement:l.BYTES_PER_ELEMENT},this.state={...n,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:t,type:r}=this.settings;this._buffer=new Pe(this.gl,{id:this.id,target:t?34963:34962,accessor:{type:r}})}return this._buffer}get byteOffset(){const t=this.getAccessor();return t.vertexOffset?t.vertexOffset*im(t):0}get numInstances(){return this.state.numInstances}set numInstances(t){this.state.numInstances=t}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),of.release(this.state.allocatedValue)}getShaderAttributes(t,r){if(this.doublePrecision){const n={},i=this.value instanceof Float64Array,o=ASt(this.getAccessor(),r||{});return n[t]=new Mb(this,o.high),n["".concat(t,"64Low")]=i?new Mb(this,o.low):new Float32Array(this.size),n}if(r){const n=lV(this.getAccessor(),r);return{[t]:new Mb(this,n)}}return{[t]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let t=null;if(this.state.constant&&this.value){const r=Array.from(this.value);t=[r,r]}else{const{value:r,numInstances:n,size:i}=this,o=n*i;if(r&&o&&r.length>=o){const a=new Array(i).fill(1/0),s=new Array(i).fill(-1/0);for(let l=0;l<o;)for(let u=0;u<i;u++){const c=r[l++];c<a[u]&&(a[u]=c),c>s[u]&&(s[u]=c)}t=[a,s]}}return this.state.bounds=t,t}setData(t){const{state:r}=this;let n;ArrayBuffer.isView(t)?n={value:t}:t instanceof Pe?n={buffer:t}:n=t;const i={...this.settings,...n};if(r.bufferAccessor=i,r.bounds=null,n.constant){let o=n.value;if(o=this._normalizeValue(o,[],0),this.settings.normalized&&(o=this.normalizeConstant(o)),!(!r.constant||!this._areValuesEqual(o,this.value)))return!1;r.externalBuffer=null,r.constant=!0,this.value=o}else if(n.buffer){const o=n.buffer;r.externalBuffer=o,r.constant=!1,this.value=n.value||null;const a=n.value instanceof Float64Array;i.type=n.type||o.accessor.type,i.bytesPerElement=o.accessor.BYTES_PER_ELEMENT*(a?2:1),i.stride=im(i)}else if(n.value){this._checkExternalBuffer(n);let o=n.value;r.externalBuffer=null,r.constant=!1,this.value=o,i.bytesPerElement=o.BYTES_PER_ELEMENT,i.stride=im(i);const{buffer:a,byteOffset:s}=this;this.doublePrecision&&o instanceof Float64Array&&(o=kb(o,i));const l=o.byteLength+s+i.stride*2;a.byteLength<l&&a.reallocate(l),a.setAccessor(null),a.subData({data:o,offset:s}),i.type=n.type||a.accessor.type}return!0}updateSubBuffer(t={}){this.state.bounds=null;const r=this.value,{startOffset:n=0,endOffset:i}=t;this.buffer.subData({data:this.doublePrecision&&r instanceof Float64Array?kb(r,{size:this.size,startIndex:n,endIndex:i}):r.subarray(n,i),offset:n*r.BYTES_PER_ELEMENT+this.byteOffset})}allocate(t,r=!1){const{state:n}=this,i=n.allocatedValue,o=of.allocate(i,t+1,{size:this.size,type:this.settings.defaultType,copy:r});this.value=o;const{buffer:a,byteOffset:s}=this;return a.byteLength<o.byteLength+s&&(a.reallocate(o.byteLength+s),r&&i&&a.subData({data:i instanceof Float64Array?kb(i,this):i,offset:s})),n.allocatedValue=o,n.constant=!1,n.externalBuffer=null,n.bufferAccessor=this.settings,!0}_checkExternalBuffer(t){const{value:r}=t;if(!ArrayBuffer.isView(r))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const n=this.settings.defaultType;let i=!1;if(this.doublePrecision&&(i=r.BYTES_PER_ELEMENT<4),i)throw new Error("Attribute ".concat(this.id," does not support ").concat(r.constructor.name));!(r instanceof n)&&this.settings.normalized&&!("normalized"in t)&&Wt.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(t){switch(this.settings.type){case 5120:return new Float32Array(t).map(r=>(r+128)/255*2-1);case 5122:return new Float32Array(t).map(r=>(r+32768)/65535*2-1);case 5121:return new Float32Array(t).map(r=>r/255);case 5123:return new Float32Array(t).map(r=>r/65535);default:return t}}_normalizeValue(t,r,n){const{defaultValue:i,size:o}=this.settings;if(Number.isFinite(t))return r[n]=t,r;if(!t)return r[n]=i[0],r;switch(o){case 4:r[n+3]=Number.isFinite(t[3])?t[3]:i[3];case 3:r[n+2]=Number.isFinite(t[2])?t[2]:i[2];case 2:r[n+1]=Number.isFinite(t[1])?t[1]:i[1];case 1:r[n+0]=Number.isFinite(t[0])?t[0]:i[0];break;default:let a=o;for(;--a>=0;)r[n+a]=Number.isFinite(t[a])?t[a]:i[a]}return r}_areValuesEqual(t,r){if(!t||!r)return!1;const{size:n}=this;for(let i=0;i<n;i++)if(t[i]!==r[i])return!1;return!0}}const rI=[],nI=[];function O_(e,t=0,r=1/0){let n=rI;const i={index:-1,data:e,target:[]};return e?typeof e[Symbol.iterator]=="function"?n=e:e.length>0&&(nI.length=e.length,n=nI):n=rI,(t>0||Number.isFinite(r))&&(n=(Array.isArray(n)?n:Array.from(n)).slice(t,r),i.index=t-1),{iterable:n,objectInfo:i}}function uV(e){return e&&e[Symbol.asyncIterator]}function cV(e,t){const{size:r,stride:n,offset:i,startIndices:o,nested:a}=t,s=e.BYTES_PER_ELEMENT,l=n?n/s:r,u=i?i/s:0,c=Math.floor((e.length-u)/l);return(f,{index:h,target:d})=>{if(!o){const m=h*l+u;for(let _=0;_<r;_++)d[_]=e[m+_];return d}const p=o[h],v=o[h+1]||c;let g;if(a){g=new Array(v-p);for(let m=p;m<v;m++){const _=m*l+u;d=new Array(r);for(let y=0;y<r;y++)d[y]=e[_+y];g[m-p]=d}}else if(l===r)g=e.subarray(p*r+u,v*r+u);else{g=new e.constructor((v-p)*r);let m=0;for(let _=p;_<v;_++){const y=_*l+u;for(let w=0;w<r;w++)g[m++]=e[y+w]}}return g}}const MSt=[],om=[[0,1/0]];function xSt(e,t){if(e===om||(t[0]<0&&(t[0]=0),t[0]>=t[1]))return e;const r=[],n=e.length;let i=0;for(let o=0;o<n;o++){const a=e[o];a[1]<t[0]?(r.push(a),i=o+1):a[0]>t[1]?r.push(a):t=[Math.min(a[0],t[0]),Math.max(a[1],t[1])]}return r.splice(i,0,t),r}function xb(e){const{source:t,target:r,start:n=0,size:i,getData:o}=e,a=e.end||r.length,s=t.length,l=a-n;if(s>l){r.set(t.subarray(0,l),n);return}if(r.set(t,n),!o)return;let u=s;for(;u<l;){const c=o(u,t);for(let f=0;f<i;f++)r[n+u]=c[f]||0,u++}}function LSt({source:e,target:t,size:r,getData:n,sourceStartIndices:i,targetStartIndices:o}){if(!Array.isArray(o))return xb({source:e,target:t,size:r,getData:n}),t;let a=0,s=0;const l=n&&((c,f)=>n(c+s,f)),u=Math.min(i.length,o.length);for(let c=1;c<u;c++){const f=i[c]*r,h=o[c]*r;xb({source:e.subarray(a,f),target:t,start:s,end:h,size:r,getData:l}),a=f,s=h}return s<t.length&&xb({source:[],target:t,start:s,size:r,getData:l}),t}const ISt={interpolation:{duration:0,easing:e=>e},spring:{stiffness:.05,damping:.5}};function fV(e,t){if(!e)return null;Number.isFinite(e)&&(e={type:"interpolation",duration:e});const r=e.type||"interpolation";return{...ISt[r],...t,...e,type:r}}function hV(e,t){const r=t.getBuffer();return r?[r,{divisor:0,size:t.size,normalized:t.settings.normalized}]:t.value}function dV(e){switch(e){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(e,'"'))}}function pV(e){e.push(e.shift())}function _k(e,t){const{doublePrecision:r,settings:n,value:i,size:o}=e,a=r&&i instanceof Float64Array?2:1;return(n.noAlloc?i.length:t*o)*a}function vV({buffer:e,numInstances:t,attribute:r,fromLength:n,fromStartIndices:i,getData:o=a=>a}){const a=r.doublePrecision&&r.value instanceof Float64Array?2:1,s=r.size*a,l=r.byteOffset,u=r.startIndices,c=i&&u,f=_k(r,t),h=r.isConstant;if(!c&&n>=f)return;const d=h?r.value:r.getBuffer().getData({srcByteOffset:l});if(r.settings.normalized&&!h){const m=o;o=(_,y)=>r.normalizeConstant(m(_,y))}const p=h?(m,_)=>o(d,_):(m,_)=>o(d.subarray(m,m+s),_),v=e.getData({length:n}),g=new Float32Array(f);LSt({source:v,target:g,sourceStartIndices:i,targetStartIndices:u,size:s,getData:p}),e.byteLength<g.byteLength+l&&e.reallocate(g.byteLength+l),e.subData({data:g,offset:l})}class yk extends CSt{constructor(t,r){super(t,r,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:om}),E(this,"constant",!1),this.settings.update=r.update||(r.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(t){this.state.startIndices=t}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:t=!1}={}){const r=this.state.needsRedraw;return this.state.needsRedraw=r&&!t,r}getUpdateTriggers(){const{accessor:t}=this.settings;return[this.id].concat(typeof t!="function"&&t||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(t){if(!t||!this.supportsTransition())return null;const{accessor:r}=this.settings,n=this.settings.transition,i=Array.isArray(r)?t[r.find(o=>t[o])]:t[r];return fV(i,n)}setNeedsUpdate(t=this.id,r){if(this.state.needsUpdate=this.state.needsUpdate||t,this.setNeedsRedraw(t),r){const{startRow:n=0,endRow:i=1/0}=r;this.state.updateRanges=xSt(this.state.updateRanges,[n,i])}else this.state.updateRanges=om}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=MSt}setNeedsRedraw(t=this.id){this.state.needsRedraw=this.state.needsRedraw||t}allocate(t){const{state:r,settings:n}=this;return n.noAlloc?!1:n.update?(super.allocate(t,r.updateRanges!==om),!0):!1}updateBuffer({numInstances:t,data:r,props:n,context:i}){if(!this.needsUpdate())return!1;const{state:{updateRanges:o},settings:{update:a,noAlloc:s}}=this;let l=!0;if(a){for(const[u,c]of o)a.call(i,this,{data:r,startRow:u,endRow:c,props:n,numInstances:t});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[u,c]of o){const f=Number.isFinite(u)?this.getVertexOffset(u):0,h=Number.isFinite(c)?this.getVertexOffset(c):s||!Number.isFinite(t)?this.value.length:t*this.size;super.updateSubBuffer({startOffset:f,endOffset:h})}this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(t){return t===void 0||typeof t=="function"?!1:(this.setData({constant:!0,value:t})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(t){const{state:r}=this;return t?(this.clearNeedsUpdate(),r.lastExternalBuffer===t||(r.lastExternalBuffer=t,this.setNeedsRedraw(),this.setData(t)),!0):(r.lastExternalBuffer=null,!1)}setBinaryValue(t,r=null){const{state:n,settings:i}=this;if(!t)return n.binaryValue=null,n.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(n.binaryValue===t)return this.clearNeedsUpdate(),!0;if(n.binaryValue=t,this.setNeedsRedraw(),i.transform||r!==this.startIndices){ArrayBuffer.isView(t)&&(t={value:t});const a=t;cr(ArrayBuffer.isView(a.value),"invalid ".concat(i.accessor));const s=Boolean(a.size)&&a.size!==this.size;return n.binaryAccessor=cV(a.value,{size:a.size||this.size,stride:a.stride,offset:a.offset,startIndices:r,nested:s}),!1}return this.clearNeedsUpdate(),this.setData(t),!0}getVertexOffset(t){const{startIndices:r}=this;return(r?r[t]:t)*this.size}getShaderAttributes(){const t=this.settings.shaderAttributes||{[this.id]:null},r={};for(const n in t)Object.assign(r,super.getShaderAttributes(n,t[n]));return r}_autoUpdater(t,{data:r,startRow:n,endRow:i,props:o,numInstances:a}){if(t.constant)return;const{settings:s,state:l,value:u,size:c,startIndices:f}=t,{accessor:h,transform:d}=s,p=l.binaryAccessor||(typeof h=="function"?h:o[h]);cr(typeof p=="function",'accessor "'.concat(h,'" is not a function'));let v=t.getVertexOffset(n);const{iterable:g,objectInfo:m}=O_(r,n,i);for(const _ of g){m.index++;let y=p(_,m);if(d&&(y=d.call(this,y)),f){const w=(m.index<f.length-1?f[m.index+1]:a)-f[m.index];if(y&&Array.isArray(y[0])){let T=v;for(const S of y)t._normalizeValue(S,u,T),T+=c}else y&&y.length>c?u.set(y,v):(t._normalizeValue(y,m.target,0),Qbt({target:u,source:m.target,start:v,count:w}));v+=w*c}else t._normalizeValue(y,u,v),v+=c}}_validateAttributeUpdaters(){const{settings:t}=this;if(!(t.noAlloc||typeof t.update=="function"))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:t}=this,r=Math.min(4,this.size);if(t&&t.length>=r){let n=!0;switch(r){case 4:n=n&&Number.isFinite(t[3]);case 3:n=n&&Number.isFinite(t[2]);case 2:n=n&&Number.isFinite(t[1]);case 1:n=n&&Number.isFinite(t[0]);break;default:n=!1}if(!n)throw new Error("Illegal attribute generated for ".concat(this.id))}}}class OSt{constructor({gl:t,attribute:r,timeline:n}){E(this,"gl",void 0),E(this,"type","interpolation"),E(this,"attributeInTransition",void 0),E(this,"settings",void 0),E(this,"attribute",void 0),E(this,"transition",void 0),E(this,"currentStartIndices",void 0),E(this,"currentLength",void 0),E(this,"transform",void 0),E(this,"buffers",void 0),this.gl=t,this.transition=new Z0(n),this.attribute=r,this.attributeInTransition=new yk(t,r.settings),this.currentStartIndices=r.startIndices,this.currentLength=0,this.transform=DSt(t,r);const i={byteLength:0,usage:35050};this.buffers=[new Pe(t,i),new Pe(t,i)]}get inProgress(){return this.transition.inProgress}start(t,r){if(t.duration<=0){this.transition.cancel();return}this.settings=t;const{gl:n,buffers:i,attribute:o}=this;pV(i);const a={numInstances:r,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const s of i)vV({buffer:s,...a});this.currentStartIndices=o.startIndices,this.currentLength=_k(o,r),this.attributeInTransition.setData({buffer:i[1],value:o.value}),this.transition.start(t),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aFrom:i[0],aTo:hV(n,o)},feedbackBuffers:{vCurrent:i[1]}})}update(){const t=this.transition.update();if(t){const{duration:r,easing:n}=this.settings,{time:i}=this.transition;let o=i/r;n&&(o=n(o)),this.transform.run({uniforms:{time:o}})}return t}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0}}const RSt=`
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
attribute ATTRIBUTE_TYPE aFrom;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`;function DSt(e,t){const r=dV(t.size);return new hk(e,{vs:RSt,defines:{ATTRIBUTE_TYPE:r},varyings:["vCurrent"]})}class NSt{constructor({gl:t,attribute:r,timeline:n}){E(this,"gl",void 0),E(this,"type","spring"),E(this,"attributeInTransition",void 0),E(this,"settings",void 0),E(this,"attribute",void 0),E(this,"transition",void 0),E(this,"currentStartIndices",void 0),E(this,"currentLength",void 0),E(this,"texture",void 0),E(this,"framebuffer",void 0),E(this,"transform",void 0),E(this,"buffers",void 0),this.gl=t,this.type="spring",this.transition=new Z0(n),this.attribute=r,this.attributeInTransition=new yk(t,{...r.settings,normalized:!1}),this.currentStartIndices=r.startIndices,this.currentLength=0,this.texture=BSt(t),this.framebuffer=$St(t,this.texture),this.transform=FSt(t,r,this.framebuffer);const i={byteLength:0,usage:35050};this.buffers=[new Pe(t,i),new Pe(t,i),new Pe(t,i)]}get inProgress(){return this.transition.inProgress}start(t,r){const{gl:n,buffers:i,attribute:o}=this,a={numInstances:r,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const s of i)vV({buffer:s,...a});this.settings=t,this.currentStartIndices=o.startIndices,this.currentLength=_k(o,r),this.attributeInTransition.setData({buffer:i[1],value:o.value}),this.transition.start({...t,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aTo:hV(n,o)}})}update(){const{buffers:t,transform:r,framebuffer:n,transition:i}=this;if(!i.update())return!1;const a=this.settings;return r.update({sourceBuffers:{aPrev:t[0],aCur:t[1]},feedbackBuffers:{vNext:t[2]}}),r.run({framebuffer:n,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:a.stiffness,damping:a.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),pV(t),this.attributeInTransition.setData({buffer:t[1],value:this.attribute.value}),A_(n)[0]>0||i.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}function FSt(e,t,r){const n=dV(t.size);return new hk(e,{framebuffer:r,vs:`
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
attribute ATTRIBUTE_TYPE aPrev;
attribute ATTRIBUTE_TYPE aCur;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vNext;
varying float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs:`
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

varying float vIsTransitioningFlag;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  gl_FragColor = vec4(1.0);
}`,defines:{ATTRIBUTE_TYPE:n},varyings:["vNext"]})}function BSt(e){return new yn(e,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function $St(e,t){return new nr(e,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{[36064]:t}})}const zSt={interpolation:OSt,spring:NSt};class VSt{constructor(t,{id:r,timeline:n}){E(this,"id",void 0),E(this,"isSupported",void 0),E(this,"gl",void 0),E(this,"timeline",void 0),E(this,"transitions",void 0),E(this,"needsRedraw",void 0),E(this,"numInstances",void 0),this.id=r,this.gl=t,this.timeline=n,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=hk.isSupported(t)}finalize(){for(const t in this.transitions)this._removeTransition(t)}update({attributes:t,transitions:r,numInstances:n}){this.numInstances=n||1;for(const i in t){const o=t[i],a=o.getTransitionSetting(r);!a||this._updateAttribute(i,o,a)}for(const i in this.transitions){const o=t[i];(!o||!o.getTransitionSetting(r))&&this._removeTransition(i)}}hasAttribute(t){const r=this.transitions[t];return r&&r.inProgress}getAttributes(){const t={};for(const r in this.transitions){const n=this.transitions[r];n.inProgress&&(t[r]=n.attributeInTransition)}return t}run(){if(!this.isSupported||this.numInstances===0)return!1;for(const r in this.transitions)this.transitions[r].update()&&(this.needsRedraw=!0);const t=this.needsRedraw;return this.needsRedraw=!1,t}_removeTransition(t){this.transitions[t].cancel(),delete this.transitions[t]}_updateAttribute(t,r,n){const i=this.transitions[t];let o=!i||i.type!==n.type;if(o){if(!this.isSupported){Wt.warn("WebGL2 not supported by this browser. Transition for ".concat(t," is disabled."))();return}i&&this._removeTransition(t);const a=zSt[n.type];a?this.transitions[t]=new a({attribute:r,timeline:this.timeline,gl:this.gl}):(Wt.error("unsupported transition type '".concat(n.type,"'"))(),o=!1)}(o||r.needsRedraw())&&(this.needsRedraw=!0,this.transitions[t].start(n,this.numInstances))}}const iI="attributeManager.invalidate",USt="attributeManager.updateStart",GSt="attributeManager.updateEnd",jSt="attribute.updateStart",WSt="attribute.allocate",HSt="attribute.updateEnd";class XSt{constructor(t,{id:r="attribute-manager",stats:n,timeline:i}={}){E(this,"id",void 0),E(this,"gl",void 0),E(this,"attributes",void 0),E(this,"updateTriggers",void 0),E(this,"needsRedraw",void 0),E(this,"userData",void 0),E(this,"stats",void 0),E(this,"attributeTransitionManager",void 0),this.id=r,this.gl=t,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=n,this.attributeTransitionManager=new VSt(t,{id:"".concat(r,"-transitions"),timeline:i}),Object.seal(this)}finalize(){for(const t in this.attributes)this.attributes[t].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(t={clearRedrawFlags:!1}){const r=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!t.clearRedrawFlags,r&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(t){this._add(t)}addInstanced(t){this._add(t,{instanced:1})}remove(t){for(const r of t)this.attributes[r]!==void 0&&(this.attributes[r].delete(),delete this.attributes[r])}invalidate(t,r){const n=this._invalidateTrigger(t,r);$r(iI,this,t,n)}invalidateAll(t){for(const r in this.attributes)this.attributes[r].setNeedsUpdate(r,t);$r(iI,this,"all")}update({data:t,numInstances:r,startIndices:n=null,transitions:i,props:o={},buffers:a={},context:s={}}){let l=!1;$r(USt,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const u in this.attributes){const c=this.attributes[u],f=c.settings.accessor;c.startIndices=n,c.numInstances=r,o[u]&&Wt.removed("props.".concat(u),"data.attributes.".concat(u))(),c.setExternalBuffer(a[u])||c.setBinaryValue(typeof f=="string"?a[f]:void 0,t.startIndices)||typeof f=="string"&&!a[f]&&c.setConstantValue(o[f])||c.needsUpdate()&&(l=!0,this._updateAttribute({attribute:c,numInstances:r,data:t,props:o,context:s})),this.needsRedraw=this.needsRedraw||c.needsRedraw()}l&&$r(GSt,this,r),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:r,transitions:i})}updateTransition(){const{attributeTransitionManager:t}=this,r=t.run();return this.needsRedraw=this.needsRedraw||r,r}getAttributes(){return this.attributes}getChangedAttributes(t={clearChangedFlags:!1}){const{attributes:r,attributeTransitionManager:n}=this,i={...n.getAttributes()};for(const o in r){const a=r[o];a.needsRedraw(t)&&!n.hasAttribute(o)&&(i[o]=a)}return i}getShaderAttributes(t,r={}){t||(t=this.getAttributes());const n={};for(const i in t)r[i]||Object.assign(n,t[i].getShaderAttributes());return n}_add(t,r={}){for(const n in t){const i=t[n];this.attributes[n]=this._createAttribute(n,i,r)}this._mapUpdateTriggersToAttributes()}_createAttribute(t,r,n){const i={...r,id:t,size:r.isIndexed&&1||r.size||1,divisor:n.instanced?1:r.divisor||0};return new yk(this.gl,i)}_mapUpdateTriggersToAttributes(){const t={};for(const r in this.attributes)this.attributes[r].getUpdateTriggers().forEach(i=>{t[i]||(t[i]=[]),t[i].push(r)});this.updateTriggers=t}_invalidateTrigger(t,r){const{attributes:n,updateTriggers:i}=this,o=i[t];return o&&o.forEach(a=>{const s=n[a];s&&s.setNeedsUpdate(s.id,r)}),o}_updateAttribute(t){const{attribute:r,numInstances:n}=t;if($r(jSt,r),r.constant){r.setConstantValue(r.value);return}r.allocate(n)&&$r(WSt,r,n),r.updateBuffer(t)&&(this.needsRedraw=!0,$r(HSt,r,n))}}class YSt extends Z0{get value(){return this._value}_onUpdate(){const{time:t,settings:{fromValue:r,toValue:n,duration:i,easing:o}}=this,a=o(t/i);this._value=Wl(r,n,a)}}const oI=1e-5;function aI(e,t,r,n,i){const o=t-e,s=(r-t)*i,l=-o*n;return s+l+o+t}function qSt(e,t,r,n,i){if(Array.isArray(r)){const o=[];for(let a=0;a<r.length;a++)o[a]=aI(e[a],t[a],r[a],n,i);return o}return aI(e,t,r,n,i)}function sI(e,t){if(Array.isArray(e)){let r=0;for(let n=0;n<e.length;n++){const i=e[n]-t[n];r+=i*i}return Math.sqrt(r)}return Math.abs(e-t)}class ZSt extends Z0{get value(){return this._currValue}_onUpdate(){const{fromValue:t,toValue:r,damping:n,stiffness:i}=this.settings,{_prevValue:o=t,_currValue:a=t}=this;let s=qSt(o,a,r,n,i);const l=sI(s,r),u=sI(s,a);l<oI&&u<oI&&(s=r,this.end()),this._prevValue=a,this._currValue=s}}const KSt={interpolation:YSt,spring:ZSt};class JSt{constructor(t){this.transitions=new Map,this.timeline=t}get active(){return this.transitions.size>0}add(t,r,n,i){const{transitions:o}=this;if(o.has(t)){const l=o.get(t),{value:u=l.settings.fromValue}=l;r=u,this.remove(t)}if(i=fV(i),!i)return;const a=KSt[i.type];if(!a){Wt.error("unsupported transition type '".concat(i.type,"'"))();return}const s=new a(this.timeline);s.start({...i,fromValue:r,toValue:n}),o.set(t,s)}remove(t){const{transitions:r}=this;r.has(t)&&(r.get(t).cancel(),r.delete(t))}update(){const t={};for(const[r,n]of this.transitions)n.update(),t[r]=n.value,n.inProgress||this.remove(r);return t}clear(){for(const t of this.transitions.keys())this.remove(t)}}function QSt(e){const t=bk(e);for(const r in t){const n=t[r],{validate:i}=n;if(i&&!i(e[r],n))throw new Error("Invalid prop ".concat(r,": ").concat(e[r]))}}function t3t(e,t){const r=gV({newProps:e,oldProps:t,propTypes:bk(e),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),n=r3t(e,t);let i=!1;return n||(i=n3t(e,t)),{dataChanged:n,propsChanged:r,updateTriggersChanged:i,extensionsChanged:i3t(e,t),transitionsChanged:e3t(e,t)}}function e3t(e,t){if(!e.transitions)return!1;const r={},n=bk(e);let i=!1;for(const o in e.transitions){const a=n[o],s=a&&a.type;(s==="number"||s==="color"||s==="array")&&lT(e[o],t[o],a)&&(r[o]=!0,i=!0)}return i?r:!1}function gV({newProps:e,oldProps:t,ignoreProps:r={},propTypes:n={},triggerName:i="props"}){if(t===e)return!1;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return"".concat(i," changed shallowly");for(const o of Object.keys(e))if(!(o in r)){if(!(o in t))return"".concat(i,".").concat(o," added");const a=lT(e[o],t[o],n[o]);if(a)return"".concat(i,".").concat(o," ").concat(a)}for(const o of Object.keys(t))if(!(o in r)){if(!(o in e))return"".concat(i,".").concat(o," dropped");if(!Object.hasOwnProperty.call(e,o)){const a=lT(e[o],t[o],n[o]);if(a)return"".concat(i,".").concat(o," ").concat(a)}}return!1}function lT(e,t,r){let n=r&&r.equal;return n&&!n(e,t,r)||!n&&(n=e&&t&&e.equals,n&&!n.call(e,t))?"changed deeply":!n&&t!==e?"changed shallowly":null}function r3t(e,t){if(t===null)return"oldProps is null, initial diff";let r=!1;const{dataComparator:n,_dataDiff:i}=e;return n?n(e.data,t.data)||(r="Data comparator detected a change"):e.data!==t.data&&(r="A new data container was supplied"),r&&i&&(r=i(e.data,t.data)||r),r}function n3t(e,t){if(t===null)return{all:!0};if("all"in e.updateTriggers&&lI(e,t,"all"))return{all:!0};const r={};let n=!1;for(const i in e.updateTriggers)i!=="all"&&lI(e,t,i)&&(r[i]=!0,n=!0);return n?r:!1}function i3t(e,t){if(t===null)return!0;const r=t.extensions,{extensions:n}=e;if(n===r)return!1;if(!r||!n||n.length!==r.length)return!0;for(let i=0;i<n.length;i++)if(!n[i].equals(r[i]))return!0;return!1}function lI(e,t,r){let n=e.updateTriggers[r];n=n==null?{}:n;let i=t.updateTriggers[r];return i=i==null?{}:i,gV({oldProps:i,newProps:n,triggerName:r})}function bk(e){const t=e[h1],r=t&&t.constructor;return r?r._propTypes:{}}const o3t="count(): argument not an object",a3t="count(): argument not a container";function s3t(e){if(!u3t(e))throw new Error(o3t);if(typeof e.count=="function")return e.count();if(Number.isFinite(e.size))return e.size;if(Number.isFinite(e.length))return e.length;if(l3t(e))return Object.keys(e).length;throw new Error(a3t)}function l3t(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function u3t(e){return e!==null&&typeof e=="object"}function c3t(e,t){if(!t)return e;const r={...e,...t};if("defines"in t&&(r.defines={...e.defines,...t.defines}),"modules"in t&&(r.modules=(e.modules||[]).concat(t.modules),t.modules.some(n=>n.name==="project64"))){const n=r.modules.findIndex(i=>i.name==="project32");n>=0&&r.modules.splice(n,1)}if("inject"in t)if(!e.inject)r.inject=t.inject;else{const n={...e.inject};for(const i in t.inject)n[i]=(n[i]||"")+t.inject[i];r.inject=n}return r}const f3t={[10241]:9987,[10240]:9729,[10242]:33071,[10243]:33071},uT={};function h3t(e,t){const r=e.context&&e.context.gl;if(!r||!t)return null;if(t instanceof yn)return t;t.constructor&&t.constructor.name!=="Object"&&(t={data:t});let n=null;t.compressed&&(n={[10241]:t.data.length>1?9985:9729});const i=new yn(r,{...t,parameters:{...f3t,...n,...e.props.textureParameters}});return uT[i.id]=!0,i}function d3t(e){!e||!(e instanceof yn)||uT[e.id]&&(e.delete(),delete uT[e.id])}const p3t={boolean:{validate(e,t){return!0},equal(e,t,r){return Boolean(e)===Boolean(t)}},number:{validate(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},color:{validate(e,t){return t.optional&&!e||g0(e)&&(e.length===3||e.length===4)},equal(e,t,r){return Lb(e,t)}},accessor:{validate(e,t){const r=p1(e);return r==="function"||r===p1(t.value)},equal(e,t,r){return typeof t=="function"?!0:Lb(e,t)}},array:{validate(e,t){return t.optional&&!e||g0(e)},equal(e,t,r){return r.compare?Lb(e,t):e===t}},object:{equal(e,t,r){return r.compare?Cf(e,t):e===t}},function:{validate(e,t){return t.optional&&!e||typeof e=="function"},equal(e,t,r){return!r.compare||e===t}},data:{transform:(e,t,r)=>{const{dataTransform:n}=r.props;return n&&e?n(e):e}},image:{transform:(e,t,r)=>h3t(r,e),release:e=>{d3t(e)}}};function Lb(e,t){if(e===t)return!0;if(!g0(e)||!g0(t))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function v3t(e){const t={},r={},n={};for(const[i,o]of Object.entries(e)){const a=o==null?void 0:o.deprecatedFor;if(a)n[i]=Array.isArray(a)?a:[a];else{const s=g3t(i,o);t[i]=s,r[i]=s.value}}return{propTypes:t,defaultProps:r,deprecatedProps:n}}function g3t(e,t){switch(p1(t)){case"object":return Eh(e,t);case"array":return Eh(e,{type:"array",value:t,compare:!1});case"boolean":return Eh(e,{type:"boolean",value:t});case"number":return Eh(e,{type:"number",value:t});case"function":return Eh(e,{type:"function",value:t,compare:!0});default:return{name:e,type:"unknown",value:t}}}function Eh(e,t){return"type"in t?{name:e,...p3t[t.type],...t}:"value"in t?{name:e,type:p1(t.value),...t}:{name:e,type:"object",value:t}}function g0(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function p1(e){return g0(e)?"array":e===null?"null":typeof e}function m3t(e,t){const r=mV(e.constructor),n=Object.create(r);n[h1]=e,n[au]={},n[ms]={};for(let i=0;i<t.length;++i){const o=t[i];for(const a in o)n[a]=o[a]}return Object.freeze(n),n}function mV(e){const t=v1(e,"_mergedDefaultProps");return t||(_3t(e),e._mergedDefaultProps)}function _3t(e){if(!e.prototype)return;const r=Object.getPrototypeOf(e),n=mV(r),i=v1(e,"defaultProps")||{},o=v3t(i),a=y3t(o.defaultProps,n,e),s={...r._propTypes,...o.propTypes};w3t(a,s);const l={...r._deprecatedProps,...o.deprecatedProps};b3t(a,l),e._mergedDefaultProps=a,e._propTypes=s,e._deprecatedProps=l}function y3t(e,t,r){const n=Object.create(null);Object.assign(n,t,e);const i=T3t(r);return delete e.id,Object.defineProperties(n,{id:{writable:!0,value:i}}),n}function b3t(e,t){for(const r in t)Object.defineProperty(e,r,{enumerable:!1,set(n){const i="".concat(this.id,": ").concat(r);for(const o of t[r])_V(this,o)||(this[o]=n);Wt.deprecated(i,t[r].join("/"))()}})}function w3t(e,t){const r={},n={};for(const i in t){const o=t[i],{name:a,value:s}=o;o.async&&(r[a]=s,n[a]=S3t(a))}e[Vc]=r,e[au]={},Object.defineProperties(e,n)}function S3t(e){return{enumerable:!0,set(t){typeof t=="string"||t instanceof Promise||uV(t)?this[au][e]=t:this[ms][e]=t},get(){if(this[ms]){if(e in this[ms])return this[ms][e]||this[Vc][e];if(e in this[au]){const t=this[h1]&&this[h1].internalState;if(t&&t.hasAsyncProp(e))return t.getAsyncProp(e)||this[Vc][e]}}return this[Vc][e]}}}function _V(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function v1(e,t){return _V(e,t)&&e[t]}function T3t(e){const t=v1(e,"layerName")||v1(e,"componentName");return t||Wt.once(0,"".concat(e.name,".componentName not specified"))(),t||e.name}let P3t=0;class wk{constructor(...t){E(this,"id",void 0),E(this,"props",void 0),E(this,"count",void 0),this.props=m3t(this,t),this.id=this.props.id,this.count=P3t++}clone(t){const{props:r}=this,n={};for(const i in r[Vc])i in r[ms]?n[i]=r[ms][i]:i in r[au]&&(n[i]=r[au][i]);return new this.constructor({...r,...n,...t})}}E(wk,"componentName","Component");E(wk,"defaultProps",{});const E3t=Object.freeze({});class k3t{constructor(t){E(this,"component",void 0),E(this,"onAsyncPropUpdated",void 0),E(this,"asyncProps",void 0),E(this,"oldProps",void 0),E(this,"oldAsyncProps",void 0),this.component=t,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const t in this.asyncProps){const r=this.asyncProps[t];r&&r.type&&r.type.release&&r.type.release(r.resolvedValue,r.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps||E3t}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}hasAsyncProp(t){return t in this.asyncProps}getAsyncProp(t){const r=this.asyncProps[t];return r&&r.resolvedValue}isAsyncPropLoading(t){if(t){const r=this.asyncProps[t];return Boolean(r&&r.pendingLoadCount>0&&r.pendingLoadCount!==r.resolvedLoadCount)}for(const r in this.asyncProps)if(this.isAsyncPropLoading(r))return!0;return!1}reloadAsyncProp(t,r){this._watchPromise(t,Promise.resolve(r))}setAsyncProps(t){const r=t[ms]||{},n=t[au]||t,i=t[Vc]||{};for(const o in r){const a=r[o];this._createAsyncPropData(o,i[o]),this._updateAsyncProp(o,a),r[o]=this.getAsyncProp(o)}for(const o in n){const a=n[o];this._createAsyncPropData(o,i[o]),this._updateAsyncProp(o,a)}}_fetch(t,r){return null}_onResolve(t,r){}_onError(t,r){}_updateAsyncProp(t,r){if(!!this._didAsyncInputValueChange(t,r)){if(typeof r=="string"&&(r=this._fetch(t,r)),r instanceof Promise){this._watchPromise(t,r);return}if(uV(r)){this._resolveAsyncIterable(t,r);return}this._setPropValue(t,r)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const t in this.asyncProps)Object.defineProperty(this.oldAsyncProps,t,{enumerable:!0,value:this.oldProps[t]})}}_didAsyncInputValueChange(t,r){const n=this.asyncProps[t];return r===n.resolvedValue||r===n.lastValue?!1:(n.lastValue=r,!0)}_setPropValue(t,r){this._freezeAsyncOldProps();const n=this.asyncProps[t];n&&(r=this._postProcessValue(n,r),n.resolvedValue=r,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount)}_setAsyncPropValue(t,r,n){const i=this.asyncProps[t];i&&n>=i.resolvedLoadCount&&r!==void 0&&(this._freezeAsyncOldProps(),i.resolvedValue=r,i.resolvedLoadCount=n,this.onAsyncPropUpdated(t,r))}_watchPromise(t,r){const n=this.asyncProps[t];if(n){n.pendingLoadCount++;const i=n.pendingLoadCount;r.then(o=>{o=this._postProcessValue(n,o),this._setAsyncPropValue(t,o,i),this._onResolve(t,o)}).catch(o=>{this._onError(t,o)})}}async _resolveAsyncIterable(t,r){if(t!=="data"){this._setPropValue(t,r);return}const n=this.asyncProps[t];if(!n)return;n.pendingLoadCount++;const i=n.pendingLoadCount;let o=[],a=0;for await(const s of r){const{dataTransform:l}=this.component.props;l?o=l(s,o):o=o.concat(s),Object.defineProperty(o,"__diff",{enumerable:!1,value:[{startRow:a,endRow:o.length}]}),a=o.length,this._setAsyncPropValue(t,o,i)}this._onResolve(t,o)}_postProcessValue(t,r){const n=t.type;return n&&(n.release&&n.release(t.resolvedValue,n,this.component),n.transform)?n.transform(r,n,this.component):r}_createAsyncPropData(t,r){if(!this.asyncProps[t]){const i=this.component&&this.component.constructor._propTypes;this.asyncProps[t]={type:i&&i[t],lastValue:null,resolvedValue:r,pendingLoadCount:0,resolvedLoadCount:0}}}}class A3t extends k3t{constructor({attributeManager:t,layer:r}){super(r),E(this,"attributeManager",void 0),E(this,"needsRedraw",void 0),E(this,"needsUpdate",void 0),E(this,"subLayers",void 0),E(this,"usesPickingColorCache",void 0),E(this,"changeFlags",void 0),E(this,"viewport",void 0),E(this,"uniformTransitions",void 0),E(this,"propsInTransition",void 0),this.attributeManager=t,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(t){this.component=t}_fetch(t,r){const n=this.component.props.fetch;return n?n(r,{propName:t,layer:this.layer}):super._fetch(t,r)}_onResolve(t,r){const n=this.component.props.onDataLoad;t==="data"&&n&&n(r,{propName:t,layer:this.layer})}_onError(t,r){this.layer.raiseError(r,"loading ".concat(t," of ").concat(this.layer))}}const C3t="layer.changeFlag",M3t="layer.initialize",x3t="layer.update",L3t="layer.finalize",I3t="layer.matched",uI=2**24-1,O3t=Object.freeze([]),R3t=q0(({oldViewport:e,viewport:t})=>e.equals(t));let oo=new Uint8ClampedArray(0);const D3t={data:{type:"data",value:O3t,async:!0},dataComparator:{type:"function",value:null,compare:!1,optional:!0},_dataDiff:{type:"function",value:e=>e&&e.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(e,{propName:t,layer:r,loaders:n,loadOptions:i,signal:o})=>{const{resourceManager:a}=r.context;if(i=i||r.getLoadOptions(),n=n||r.props.loaders,o){var s;i={...i,fetch:{...(s=i)===null||s===void 0?void 0:s.fetch,signal:o}}}let l=a.contains(e);return!l&&!i&&(a.add({resourceId:e,data:o1(e,n),persistent:!1}),l=!0),l?a.subscribe({resourceId:e,onChange:u=>{var c;return(c=r.internalState)===null||c===void 0?void 0:c.reloadAsyncProp(t,u)},consumerId:r.id,requestId:t}):o1(e,n,i)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:Y0.DRAW,onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:le.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:e})=>[0,-e*100],compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class No extends wk{constructor(...t){super(...t),E(this,"internalState",null),E(this,"lifecycle",mc.NO_STATE),E(this,"context",void 0),E(this,"state",void 0),E(this,"parent",null)}get root(){let t=this;for(;t.parent;)t=t.parent;return t}toString(){const t=this.constructor.layerName||this.constructor.name;return"".concat(t,"({id: '").concat(this.props.id,"'})")}project(t){cr(this.internalState);const r=this.internalState.viewport||this.context.viewport,n=Zz(t,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,o,a]=Hz(n,r.pixelProjectionMatrix);return t.length===2?[i,o]:[i,o,a]}unproject(t){return cr(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(t)}projectPosition(t,r){cr(this.internalState);const n=this.internalState.viewport||this.context.viewport;return Jbt(t,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...r})}get isComposite(){return!1}setState(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(t){for(const r of this.getModels())r.updateModuleSettings(t)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:t}=this.props;return t===le.DEFAULT||t===le.LNGLAT||t===le.CARTESIAN}onHover(t,r){return this.props.onHover&&this.props.onHover(t,r)||!1}onClick(t,r){return this.props.onClick&&this.props.onClick(t,r)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(t,r=[]){return r[0]=t+1&255,r[1]=t+1>>8&255,r[2]=t+1>>8>>8&255,r}decodePickingColor(t){cr(t instanceof Uint8Array);const[r,n,i]=t;return r+n*256+i*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:s3t(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var t;const r=this.getAttributeManager();if(!r)return null;const{positions:n,instancePositions:i}=r.attributes;return(t=n||i)===null||t===void 0?void 0:t.getBounds()}getShaders(t){for(const r of this.props.extensions)t=c3t(t,r.getShaders.call(this,r));return t}shouldUpdateState(t){return t.changeFlags.propsOrDataChanged}updateState(t){const r=this.getAttributeManager(),{dataChanged:n}=t.changeFlags;if(n&&r)if(Array.isArray(n))for(const l of n)r.invalidateAll(l);else r.invalidateAll();const{props:i,oldProps:o}=t,a=Number.isInteger(o.highlightedObjectIndex)||o.pickable,s=Number.isInteger(i.highlightedObjectIndex)||i.pickable;if(a!==s&&r){const{pickingColors:l,instancePickingColors:u}=r.attributes,c=l||u;c&&(s&&c.constant&&(c.constant=!1,r.invalidate(c.id)),!c.value&&!s&&(c.constant=!0,c.value=[0,0,0]))}}finalizeState(t){for(const n of this.getModels())n.delete();const r=this.getAttributeManager();r&&r.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(t){for(const r of this.getModels())r.draw(t)}getPickingInfo({info:t,mode:r,sourceLayer:n}){const{index:i}=t;return i>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[i]),t}raiseError(t,r){var n,i;if(r&&(t.message="".concat(r,": ").concat(t.message)),!((n=(i=this.props).onError)!==null&&n!==void 0&&n.call(i,t))){var o,a;(o=this.context)===null||o===void 0||(a=o.onError)===null||a===void 0||a.call(o,t,this)}}getNeedsRedraw(t={clearRedrawFlags:!1}){return this._getNeedsRedraw(t)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var t;return((t=this.internalState)===null||t===void 0?void 0:t.uniformTransitions.active)||!1}activateViewport(t){if(!this.internalState)return;const r=this.internalState.viewport;this.internalState.viewport=t,(!r||!R3t({oldViewport:r,viewport:t}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(t="all"){const r=this.getAttributeManager();!r||(t==="all"?r.invalidateAll():r.invalidate(t))}updateAttributes(t){for(const r of this.getModels())this._setModelAttributes(r,t)}_updateAttributes(){const t=this.getAttributeManager();if(!t)return;const r=this.props,n=this.getNumInstances(),i=this.getStartIndices();t.update({data:r.data,numInstances:n,startIndices:i,props:r,transitions:r.transitions,buffers:r.data.attributes,context:this});const o=t.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(o)}_updateAttributeTransition(){const t=this.getAttributeManager();t&&t.updateTransition()}_updateUniformTransition(){const{uniformTransitions:t}=this.internalState;if(t.active){const r=t.update(),n=Object.create(this.props);for(const i in r)Object.defineProperty(n,i,{value:r[i]});return n}return this.props}calculateInstancePickingColors(t,{numInstances:r}){if(t.constant)return;const n=Math.floor(oo.length/3);if(this.internalState.usesPickingColorCache=!0,n<r){r>uI&&Wt.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),oo=of.allocate(oo,r,{size:3,copy:!0,maxCount:Math.max(r,uI)});const i=Math.floor(oo.length/3),o=[];for(let a=n;a<i;a++)this.encodePickingColor(a,o),oo[a*3+0]=o[0],oo[a*3+1]=o[1],oo[a*3+2]=o[2]}t.value=oo.subarray(0,r*3)}_setModelAttributes(t,r){const n=this.getAttributeManager(),i=t.userData.excludeAttributes||{},o=n.getShaderAttributes(r,i);t.setAttributes(o)}disablePickingIndex(t){this._disablePickingIndex(t)}_disablePickingIndex(t){const{pickingColors:r,instancePickingColors:n}=this.getAttributeManager().attributes,i=r||n;if(!i)return;const o=i.getVertexOffset(t),a=i.getVertexOffset(t+1);i.buffer.subData({data:new Uint8Array(a-o),offset:o})}restorePickingColors(){const{pickingColors:t,instancePickingColors:r}=this.getAttributeManager().attributes,n=t||r;!n||(this.internalState.usesPickingColorCache&&n.value.buffer!==oo.buffer&&(n.value=oo.subarray(0,n.value.length)),n.updateSubBuffer({startOffset:0}))}_initialize(){cr(!this.internalState),cr(Number.isFinite(this.props.coordinateSystem)),$r(M3t,this);const t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new A3t({attributeManager:t,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(Wt.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),t)}),this.internalState.layer=this,this.internalState.uniformTransitions=new JSt(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const r of this.props.extensions)r.initializeState.call(this,this.context,r);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(t){$r(I3t,this,this===t);const{state:r,internalState:n}=t;this!==t&&(this.internalState=n,this.internalState.layer=this,this.state=r,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const t=this.needsUpdate();if($r(x3t,this,t),!t)return;const r=this.props,n=this.context,i=this.internalState,o=n.viewport,a=this._updateUniformTransition();i.propsInTransition=a,n.viewport=i.viewport||o,this.props=a;try{const s=this._getUpdateParams(),l=this.getModels();if(n.gl)this.updateState(s);else try{this.updateState(s)}catch{}for(const c of this.props.extensions)c.updateState.call(this,s,c);const u=this.getModels()[0]!==l[0];this._postUpdate(s,u)}finally{n.viewport=o,this.props=r,this._clearChangeFlags(),i.needsUpdate=!1,i.resetOldProps()}}_finalize(){$r(L3t,this),this.finalizeState(this.context);for(const t of this.props.extensions)t.finalizeState.call(this,t)}_drawLayer({moduleParameters:t=null,uniforms:r={},parameters:n={}}){this._updateAttributeTransition();const i=this.props,o=this.context;this.props=this.internalState.propsInTransition||i;const a=this.props.opacity;r.opacity=Math.pow(a,1/2.2);try{t&&this.setModuleParameters(t);const{getPolygonOffset:s}=this.props,l=s&&s(r)||[0,0];ba(o.gl,{polygonOffset:l}),ni(o.gl,n,()=>{const u={moduleParameters:t,uniforms:r,parameters:n,context:o};for(const c of this.props.extensions)c.draw.call(this,u,c);this.draw(u)})}finally{this.props=i}}getChangeFlags(){var t;return(t=this.internalState)===null||t===void 0?void 0:t.changeFlags}setChangeFlags(t){if(!this.internalState)return;const{changeFlags:r}=this.internalState;for(const i in t)if(t[i]){let o=!1;switch(i){case"dataChanged":const a=t[i],s=r[i];a&&Array.isArray(s)&&(r.dataChanged=Array.isArray(a)?s.concat(a):a,o=!0);default:r[i]||(r[i]=t[i],o=!0)}o&&$r(C3t,this,i,t)}const n=Boolean(r.dataChanged||r.updateTriggersChanged||r.propsChanged||r.extensionsChanged);r.propsOrDataChanged=n,r.somethingChanged=n||r.viewportChanged||r.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(t,r){const n=t3t(t,r);if(n.updateTriggersChanged)for(const o in n.updateTriggersChanged)n.updateTriggersChanged[o]&&this.invalidateAttribute(o);if(n.transitionsChanged)for(const o in n.transitionsChanged){var i;this.internalState.uniformTransitions.add(o,r[o],t[o],(i=t.transitions)===null||i===void 0?void 0:i[o])}return this.setChangeFlags(n)}validateProps(){QSt(this.props)}updateAutoHighlight(t){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(t)}_updateAutoHighlight(t){const r={pickingSelectedColor:t.picked?t.color:null},{highlightColor:n}=this.props;t.picked&&typeof n=="function"&&(r.pickingHighlightColor=n(t)),this.setModuleParameters(r),this.setNeedsRedraw()}_getAttributeManager(){const t=this.context;return new XSt(t.gl,{id:this.props.id,stats:t.stats,timeline:t.timeline})}_postUpdate(t,r){const{props:n,oldProps:i}=t;this.setNeedsRedraw(),this._updateAttributes();const{model:o}=this.state;o==null||o.setInstanceCount(this.getNumInstances());const{autoHighlight:a,highlightedObjectIndex:s,highlightColor:l}=n;if(r||i.autoHighlight!==a||i.highlightedObjectIndex!==s||i.highlightColor!==l){const u={};a||(u.pickingSelectedColor=null),Array.isArray(l)&&(u.pickingHighlightColor=l),Number.isInteger(s)&&(u.pickingSelectedColor=Number.isFinite(s)&&s>=0?this.encodePickingColor(s):null),this.setModuleParameters(u)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(t){if(!this.internalState)return!1;let r=!1;r=r||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!t.clearRedrawFlags;const n=this.getAttributeManager(),i=n?n.getNeedsRedraw(t):!1;return r=r||i,r}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}E(No,"defaultProps",D3t);E(No,"layerName","Layer");const N3t="compositeLayer.renderLayers";class R_ extends No{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(t=>t.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(t){}setState(t){super.setState(t),this.setNeedsUpdate()}getPickingInfo({info:t}){const{object:r}=t;return r&&r.__source&&r.__source.parent&&r.__source.parent.id===this.id&&(t.object=r.__source.object,t.index=r.__source.index),t}filterSubLayer(t){return!0}shouldRenderSubLayer(t,r){return r&&r.length}getSubLayerClass(t,r){const{_subLayerProps:n}=this.props;return n&&n[t]&&n[t].type||r}getSubLayerRow(t,r,n){return t.__source={parent:this,object:r,index:n},t}getSubLayerAccessor(t){if(typeof t=="function"){const r={index:-1,data:this.props.data,target:[]};return(n,i)=>n&&n.__source?(r.index=n.__source.index,t(n.__source.object,r)):t(n,i)}return t}getSubLayerProps(t={}){var r;const{opacity:n,pickable:i,visible:o,parameters:a,getPolygonOffset:s,highlightedObjectIndex:l,autoHighlight:u,highlightColor:c,coordinateSystem:f,coordinateOrigin:h,wrapLongitude:d,positionFormat:p,modelMatrix:v,extensions:g,fetch:m,operation:_,_subLayerProps:y}=this.props,w={id:"",updateTriggers:{},opacity:n,pickable:i,visible:o,parameters:a,getPolygonOffset:s,highlightedObjectIndex:l,autoHighlight:u,highlightColor:c,coordinateSystem:f,coordinateOrigin:h,wrapLongitude:d,positionFormat:p,modelMatrix:v,extensions:g,fetch:m,operation:_},T=y&&t.id&&y[t.id],S=T&&T.updateTriggers,P=t.id||"sublayer";if(T){const A=this.constructor._propTypes,k=t.type?t.type._propTypes:{};for(const C in T){const M=k[C]||A[C];M&&M.type==="accessor"&&(T[C]=this.getSubLayerAccessor(T[C]))}}Object.assign(w,t,T),w.id="".concat(this.props.id,"-").concat(P),w.updateTriggers={all:(r=this.props.updateTriggers)===null||r===void 0?void 0:r.all,...t.updateTriggers,...S};for(const A of g){const k=A.getSubLayerProps.call(this,A);k&&Object.assign(w,k,{updateTriggers:Object.assign(w.updateTriggers,k.updateTriggers)})}return w}_updateAutoHighlight(t){for(const r of this.getSubLayers())r.updateAutoHighlight(t)}_getAttributeManager(){return null}_postUpdate(t,r){let n=this.internalState.subLayers;const i=!n||this.needsUpdate();if(i){const o=this.renderLayers();n=x_(o,Boolean),this.internalState.subLayers=n}$r(N3t,this,i,n);for(const o of n)o.parent=this}}E(R_,"layerName","CompositeLayer");const Mv=Math.PI/180,cI=180/Math.PI,am=6370972,kc=256;function F3t(){const e=kc/am,t=Math.PI/180*kc;return{unitsPerMeter:[e,e,e],unitsPerMeter2:[0,0,0],metersPerUnit:[1/e,1/e,1/e],unitsPerDegree:[t,t,e],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/t,1/t,1/e]}}class B3t extends Fs{constructor(t={}){const{latitude:r=0,longitude:n=0,zoom:i=0,nearZMultiplier:o=.1,farZMultiplier:a=2,resolution:s=10}=t;let{height:l,altitude:u=1.5}=t;l=l||1,u=Math.max(.75,u);const c=new jr().lookAt({eye:[0,-u,0],up:[0,0,1]}),f=Math.pow(2,i);c.rotateX(r*Mv),c.rotateZ(-n*Mv),c.scale(f/l);const h=Math.atan(.5/u),d=kc*2*f/l;super({...t,height:l,viewMatrix:c,longitude:n,latitude:r,zoom:i,distanceScales:F3t(),fovyRadians:h*2,focalDistance:u,near:o,far:Math.min(2,1/d+1)*u*a}),E(this,"longitude",void 0),E(this,"latitude",void 0),E(this,"resolution",void 0),this.latitude=r,this.longitude=n,this.resolution=s}get projectionMode(){return Ai.GLOBE}getDistanceScales(){return this.distanceScales}getBounds(t={}){const r={targetZ:t.z||0},n=this.unproject([0,this.height/2],r),i=this.unproject([this.width/2,0],r),o=this.unproject([this.width,this.height/2],r),a=this.unproject([this.width/2,this.height],r);return o[0]<this.longitude&&(o[0]+=360),n[0]>this.longitude&&(n[0]-=360),[Math.min(n[0],o[0],i[0],a[0]),Math.min(n[1],o[1],i[1],a[1]),Math.max(n[0],o[0],i[0],a[0]),Math.max(n[1],o[1],i[1],a[1])]}unproject(t,{topLeft:r=!0,targetZ:n}={}){const[i,o,a]=t,s=r?o:this.height-o,{pixelUnprojectionMatrix:l}=this;let u;if(Number.isFinite(a))u=Ib(l,[i,s,a,1]);else{const d=Ib(l,[i,s,-1,1]),p=Ib(l,[i,s,1,1]),v=((n||0)/am+1)*kc,g=bb(Cz([],d,p)),m=bb(d),_=bb(p),y=(4*m*_-(g-m-_)**2)/16,w=4*y/g,T=Math.sqrt(m-w),S=Math.sqrt(Math.max(0,v*v-w)),P=(T-S)/Math.sqrt(g);u=J_t([],d,p,P)}const[c,f,h]=this.unprojectPosition(u);return Number.isFinite(a)?[c,f,h]:Number.isFinite(n)?[c,f,n]:[c,f]}projectPosition(t){const[r,n,i=0]=t,o=r*Mv,a=n*Mv,s=Math.cos(a),l=(i/am+1)*kc;return[Math.sin(o)*s*l,-Math.cos(o)*s*l,Math.sin(a)*l]}unprojectPosition(t){const[r,n,i]=t,o=Mz(t),a=Math.asin(i/o),l=Math.atan2(r,-n)*cI,u=a*cI,c=(o/kc-1)*am;return[l,u,c]}projectFlat(t){return t}unprojectFlat(t){return t}panByPosition(t,r){const n=this.unproject(r);return{longitude:t[0]-n[0]+this.longitude,latitude:t[1]-n[1]+this.latitude}}}function Ib(e,t){const r=Af([],t,e);return fk(r,r,1/r[3]),r}class yV{constructor(t){E(this,"opts",void 0),E(this,"typedArrayManager",void 0),E(this,"indexStarts",[0]),E(this,"vertexStarts",[0]),E(this,"vertexCount",0),E(this,"instanceCount",0),E(this,"attributes",void 0),E(this,"_attributeDefs",void 0),E(this,"data",void 0),E(this,"getGeometry",void 0),E(this,"geometryBuffer",void 0),E(this,"buffers",void 0),E(this,"positionSize",void 0),E(this,"normalize",void 0);const{attributes:r={}}=t;this.typedArrayManager=of,this.attributes={},this._attributeDefs=r,this.opts=t,this.updateGeometry(t)}updateGeometry(t){Object.assign(this.opts,t);const{data:r,buffers:n={},getGeometry:i,geometryBuffer:o,positionFormat:a,dataChanged:s,normalize:l=!0}=this.opts;if(this.data=r,this.getGeometry=i,this.positionSize=o&&o.size||(a==="XY"?2:3),this.buffers=n,this.normalize=l,o&&(cr(r.startIndices),this.getGeometry=this.getGeometryFromBuffer(o),l||(n.positions=o)),this.geometryBuffer=n.positions,Array.isArray(s))for(const u of s)this._rebuildGeometry(u);else this._rebuildGeometry()}updatePartialGeometry({startRow:t,endRow:r}){this._rebuildGeometry({startRow:t,endRow:r})}getGeometryFromBuffer(t){const r=t.value||t;return ArrayBuffer.isView(r)?cV(r,{size:this.positionSize,offset:t.offset,stride:t.stride,startIndices:this.data.startIndices}):null}_allocate(t,r){const{attributes:n,buffers:i,_attributeDefs:o,typedArrayManager:a}=this;for(const s in o)if(s in i)a.release(n[s]),n[s]=null;else{const l=o[s];l.copy=r,n[s]=a.allocate(n[s],t,l)}}_forEachGeometry(t,r,n){const{data:i,getGeometry:o}=this,{iterable:a,objectInfo:s}=O_(i,r,n);for(const l of a){s.index++;const u=o?o(l,s):null;t(u,s.index)}}_rebuildGeometry(t){if(!this.data)return;let{indexStarts:r,vertexStarts:n,instanceCount:i}=this;const{data:o,geometryBuffer:a}=this,{startRow:s=0,endRow:l=1/0}=t||{},u={};if(t||(r=[0],n=[0]),this.normalize||!a)this._forEachGeometry((f,h)=>{const d=f&&this.normalizeGeometry(f);u[h]=d,n[h+1]=n[h]+(d?this.getGeometrySize(d):0)},s,l),i=n[n.length-1];else if(n=o.startIndices,i=n[o.length]||0,ArrayBuffer.isView(a))i=i||a.length/this.positionSize;else if(a instanceof Pe){const f=a.accessor.stride||this.positionSize*4;i=i||a.byteLength/f}else if(a.buffer){const f=a.stride||this.positionSize*4;i=i||a.buffer.byteLength/f}else if(a.value){const f=a.value,h=a.stride/f.BYTES_PER_ELEMENT||this.positionSize;i=i||f.length/h}this._allocate(i,Boolean(t)),this.indexStarts=r,this.vertexStarts=n,this.instanceCount=i;const c={};this._forEachGeometry((f,h)=>{const d=u[h]||f;c.vertexStart=n[h],c.indexStart=r[h];const p=h<n.length-1?n[h+1]:i;c.geometrySize=p-n[h],c.geometryIndex=h,this.updateGeometryAttributes(d,c)},s,l),this.vertexCount=r[r.length-1]}}const $3t=new Uint16Array([0,2,1,0,3,2]),z3t=new Float32Array([0,1,0,0,1,0,1,1]);function V3t(e,t){if(!t)return U3t(e);const r=Math.max(Math.abs(e[0][0]-e[3][0]),Math.abs(e[1][0]-e[2][0])),n=Math.max(Math.abs(e[1][1]-e[0][1]),Math.abs(e[2][1]-e[3][1])),i=Math.ceil(r/t)+1,o=Math.ceil(n/t)+1,a=(i-1)*(o-1)*6,s=new Uint32Array(a),l=new Float32Array(i*o*2),u=new Float64Array(i*o*3);let c=0,f=0;for(let h=0;h<i;h++){const d=h/(i-1);for(let p=0;p<o;p++){const v=p/(o-1),g=G3t(e,d,v);u[c*3+0]=g[0],u[c*3+1]=g[1],u[c*3+2]=g[2]||0,l[c*2+0]=d,l[c*2+1]=1-v,h>0&&p>0&&(s[f++]=c-o,s[f++]=c-o-1,s[f++]=c-1,s[f++]=c-o,s[f++]=c-1,s[f++]=c),c++}}return{vertexCount:a,positions:u,indices:s,texCoords:l}}function U3t(e){const t=new Float64Array(12);for(let r=0;r<e.length;r++)t[r*3+0]=e[r][0],t[r*3+1]=e[r][1],t[r*3+2]=e[r][2]||0;return{vertexCount:6,positions:t,indices:$3t,texCoords:z3t}}function G3t(e,t,r){return Wl(Wl(e[0],e[1],r),Wl(e[3],e[2],r),t)}const j3t=`
#define SHADER_NAME bitmap-layer-vertex-shader

attribute vec2 texCoords;
attribute vec3 positions;
attribute vec3 positions64Low;

varying vec2 vTexCoord;
varying vec2 vTexPos;

uniform float coordinateConversion;

const vec3 pickingColor = vec3(1.0, 0.0, 0.0);

void main(void) {
  geometry.worldPosition = positions;
  geometry.uv = texCoords;
  geometry.pickingColor = pickingColor;

  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTexCoord = texCoords;

  if (coordinateConversion < -0.5) {
    vTexPos = geometry.position.xy + project_uCommonOrigin.xy;
  } else if (coordinateConversion > 0.5) {
    vTexPos = geometry.worldPosition.xy;
  }

  vec4 color = vec4(0.0);
  DECKGL_FILTER_COLOR(color, geometry);
}
`,W3t=`
vec3 packUVsIntoRGB(vec2 uv) {
  // Extract the top 8 bits. We want values to be truncated down so we can add a fraction
  vec2 uv8bit = floor(uv * 256.);

  // Calculate the normalized remainders of u and v parts that do not fit into 8 bits
  // Scale and clamp to 0-1 range
  vec2 uvFraction = fract(uv * 256.);
  vec2 uvFraction4bit = floor(uvFraction * 16.);

  // Remainder can be encoded in blue channel, encode as 4 bits for pixel coordinates
  float fractions = uvFraction4bit.x + uvFraction4bit.y * 16.;

  return vec3(uv8bit, fractions) / 255.;
}
`,H3t=`
#define SHADER_NAME bitmap-layer-fragment-shader

#ifdef GL_ES
precision highp float;
#endif

uniform sampler2D bitmapTexture;

varying vec2 vTexCoord;
varying vec2 vTexPos;

uniform float desaturate;
uniform vec4 transparentColor;
uniform vec3 tintColor;
uniform float opacity;

uniform float coordinateConversion;
uniform vec4 bounds;

/* projection utils */
const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / PI / 2.0;

// from degrees to Web Mercator
vec2 lnglat_to_mercator(vec2 lnglat) {
  float x = lnglat.x;
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

// from Web Mercator to degrees
vec2 mercator_to_lnglat(vec2 xy) {
  xy /= WORLD_SCALE;
  return degrees(vec2(
    xy.x - PI,
    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5
  ));
}
/* End projection utils */

// apply desaturation
vec3 color_desaturate(vec3 color) {
  float luminance = (color.r + color.g + color.b) * 0.333333333;
  return mix(color, vec3(luminance), desaturate);
}

// apply tint
vec3 color_tint(vec3 color) {
  return color * tintColor;
}

// blend with background color
vec4 apply_opacity(vec3 color, float alpha) {
  return mix(transparentColor, vec4(color, 1.0), alpha);
}

vec2 getUV(vec2 pos) {
  return vec2(
    (pos.x - bounds[0]) / (bounds[2] - bounds[0]),
    (pos.y - bounds[3]) / (bounds[1] - bounds[3])
  );
}

`.concat(W3t,`

void main(void) {
  vec2 uv = vTexCoord;
  if (coordinateConversion < -0.5) {
    vec2 lnglat = mercator_to_lnglat(vTexPos);
    uv = getUV(lnglat);
  } else if (coordinateConversion > 0.5) {
    vec2 commonPos = lnglat_to_mercator(vTexPos);
    uv = getUV(commonPos);
  }
  vec4 bitmapColor = texture2D(bitmapTexture, uv);

  gl_FragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * opacity);

  geometry.uv = uv;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);

  if (picking_uActive) {
    // Since instance information is not used, we can use picking color for pixel index
    gl_FragColor.rgb = packUVsIntoRGB(uv);
  }
}
`),X3t={image:{type:"image",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},_imageCoordinateSystem:le.DEFAULT,desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]}};class Sk extends No{constructor(...t){super(...t),E(this,"state",void 0)}getShaders(){return super.getShaders({vs:j3t,fs:H3t,modules:[wu,Su]})}initializeState(){const t=this.getAttributeManager();t.remove(["instancePickingColors"]);const r=!0;t.add({indices:{size:1,isIndexed:!0,update:n=>n.value=this.state.mesh.indices,noAlloc:r},positions:{size:3,type:5130,fp64:this.use64bitPositions(),update:n=>n.value=this.state.mesh.positions,noAlloc:r},texCoords:{size:2,update:n=>n.value=this.state.mesh.texCoords,noAlloc:r}})}updateState({props:t,oldProps:r,changeFlags:n}){const i=this.getAttributeManager();if(n.extensionsChanged){var o;const{gl:a}=this.context;(o=this.state.model)===null||o===void 0||o.delete(),this.state.model=this._getModel(a),i.invalidateAll()}if(t.bounds!==r.bounds){const a=this.state.mesh,s=this._createMesh();this.state.model.setVertexCount(s.vertexCount);for(const l in s)a&&a[l]!==s[l]&&i.invalidate(l);this.setState({mesh:s,...this._getCoordinateUniforms()})}else t._imageCoordinateSystem!==r._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}getPickingInfo(t){const{image:r}=this.props,n=t.info;if(!n.color||!r)return n.bitmap=null,n;const{width:i,height:o}=r;n.index=0;const a=Y3t(n.color),s=[Math.floor(a[0]*i),Math.floor(a[1]*o)];return n.bitmap={size:{width:i,height:o},uv:a,pixel:s},n}disablePickingIndex(){this.setState({disablePicking:!0})}restorePickingColors(){this.setState({disablePicking:!1})}_updateAutoHighlight(t){super._updateAutoHighlight({...t,color:this.encodePickingColor(0)})}_createMesh(){const{bounds:t}=this.props;let r=t;return fI(t)&&(r=[[t[0],t[1]],[t[0],t[3]],[t[2],t[3]],[t[2],t[1]]]),V3t(r,this.context.viewport.resolution)}_getModel(t){return t?new wa(t,{...this.getShaders(),id:this.props.id,geometry:new bu({drawMode:4,vertexCount:6}),isInstanced:!1}):null}draw(t){const{uniforms:r,moduleParameters:n}=t,{model:i,coordinateConversion:o,bounds:a,disablePicking:s}=this.state,{image:l,desaturate:u,transparentColor:c,tintColor:f}=this.props;n.pickingActive&&s||l&&i&&i.setUniforms(r).setUniforms({bitmapTexture:l,desaturate:u,transparentColor:c.map(h=>h/255),tintColor:f.slice(0,3).map(h=>h/255),coordinateConversion:o,bounds:a}).draw()}_getCoordinateUniforms(){const{LNGLAT:t,CARTESIAN:r,DEFAULT:n}=le;let{_imageCoordinateSystem:i}=this.props;if(i!==n){const{bounds:o}=this.props;if(!fI(o))throw new Error("_imageCoordinateSystem only supports rectangular bounds");const a=this.context.viewport.resolution?t:r;if(i=i===t?t:r,i===t&&a===r)return{coordinateConversion:-1,bounds:o};if(i===r&&a===t){const s=Ns([o[0],o[1]]),l=Ns([o[2],o[3]]);return{coordinateConversion:1,bounds:[s[0],s[1],l[0],l[1]]}}}return{coordinateConversion:0,bounds:[0,0,0,0]}}}E(Sk,"layerName","BitmapLayer");E(Sk,"defaultProps",X3t);function Y3t(e){const[t,r,n]=e,i=(n&240)/256,o=(n&15)/16;return[(t+o)/256,(r+i)/256]}function fI(e){return Number.isFinite(e[0])}const q3t=`#define SHADER_NAME icon-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute vec4 instanceIconFrames;
attribute float instanceColorModes;
attribute vec2 instanceOffsets;
attribute vec2 instancePixelOffset;

uniform float sizeScale;
uniform vec2 iconsTextureDim;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform bool billboard;
uniform int sizeUnits;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = angle * PI / 180.0;
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;

  vec2 iconSize = instanceIconFrames.zw;
  // convert size in meters to pixels, then scaled and clamp
 
  // project meters to pixels and clamp to limits 
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), 
    sizeMinPixels, sizeMaxPixels
  );

  // scale icon height to match instanceSize
  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;

  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace
  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
  pixelOffset += instancePixelOffset;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);

  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); 
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTextureCoords = mix(
    instanceIconFrames.xy,
    instanceIconFrames.xy + iconSize,
    (positions.xy + 1.0) / 2.0
  ) / iconsTextureDim;

  vColor = instanceColors;
  DECKGL_FILTER_COLOR(vColor, geometry);

  vColorMode = instanceColorModes;
}
`,Z3t=`#define SHADER_NAME icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float alphaCutoff;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  vec4 texColor = texture2D(iconsTexture, vTextureCoords);

  // if colorMode == 0, use pixel color from the texture
  // if colorMode == 1 or rendering picking buffer, use texture as transparency mask
  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
  // Take the global opacity and the alpha from vColor into account for the alpha component
  float a = texColor.a * opacity * vColor.a;

  if (a < alphaCutoff) {
    discard;
  }

  gl_FragColor = vec4(color, a);
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,K3t=1024,J3t=4,hI=()=>{},Q3t={[10241]:9987,[10240]:9729,[10242]:33071,[10243]:33071};function tTt(e){return Math.pow(2,Math.ceil(Math.log2(e)))}function eTt(e,t,r,n){return r===t.width&&n===t.height?t:(e.canvas.height=n,e.canvas.width=r,e.clearRect(0,0,e.canvas.width,e.canvas.height),e.drawImage(t,0,0,t.width,t.height,0,0,r,n),e.canvas)}function m0(e){return e&&(e.id||e.url)}function rTt(e,t,r){const n=e.width,i=e.height,o=oz(e,{width:t,height:r});return gmt(e,o,{targetY:0,width:n,height:i}),e.delete(),o}function dI(e,t,r){for(let n=0;n<t.length;n++){const{icon:i,xOffset:o}=t[n],a=m0(i);e[a]={...i,x:o,y:r}}}function nTt({icons:e,buffer:t,mapping:r={},xOffset:n=0,yOffset:i=0,rowHeight:o=0,canvasWidth:a}){let s=[];for(let l=0;l<e.length;l++){const u=e[l],c=m0(u);if(!r[c]){const{height:f,width:h}=u;n+h+t>a&&(dI(r,s,i),n=0,i=o+i+t,o=0,s=[]),s.push({icon:u,xOffset:n}),n=n+h+t,o=Math.max(o,f)}}return s.length>0&&dI(r,s,i),{mapping:r,rowHeight:o,xOffset:n,yOffset:i,canvasWidth:a,canvasHeight:tTt(o+i+t)}}function iTt(e,t,r){if(!e||!t)return null;r=r||{};const n={},{iterable:i,objectInfo:o}=O_(e);for(const a of i){o.index++;const s=t(a,o),l=m0(s);if(!s)throw new Error("Icon is missing.");if(!s.url)throw new Error("Icon url is missing.");!n[l]&&(!r[l]||s.url!==r[l].url)&&(n[l]={...s,source:a,sourceIndex:o.index})}return n}class oTt{constructor(t,{onUpdate:r=hI,onError:n=hI}){E(this,"gl",void 0),E(this,"onUpdate",void 0),E(this,"onError",void 0),E(this,"_loadOptions",null),E(this,"_texture",null),E(this,"_externalTexture",null),E(this,"_mapping",{}),E(this,"_textureParameters",null),E(this,"_pendingCount",0),E(this,"_autoPacking",!1),E(this,"_xOffset",0),E(this,"_yOffset",0),E(this,"_rowHeight",0),E(this,"_buffer",J3t),E(this,"_canvasWidth",K3t),E(this,"_canvasHeight",0),E(this,"_canvas",null),this.gl=t,this.onUpdate=r,this.onError=n}finalize(){var t;(t=this._texture)===null||t===void 0||t.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(t){const r=this._autoPacking?m0(t):t;return this._mapping[r]||{}}setProps({loadOptions:t,autoPacking:r,iconAtlas:n,iconMapping:i,textureParameters:o}){if(t&&(this._loadOptions=t),r!==void 0&&(this._autoPacking=r),i&&(this._mapping=i),n){var a;(a=this._texture)===null||a===void 0||a.delete(),this._texture=null,this._externalTexture=n}o&&(this._textureParameters=o)}get isLoaded(){return this._pendingCount===0}packIcons(t,r){if(!this._autoPacking||typeof document>"u")return;const n=Object.values(iTt(t,r,this._mapping)||{});if(n.length>0){const{mapping:i,xOffset:o,yOffset:a,rowHeight:s,canvasHeight:l}=nTt({icons:n,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=s,this._mapping=i,this._xOffset=o,this._yOffset=a,this._canvasHeight=l,this._texture||(this._texture=new yn(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||Q3t})),this._texture.height!==this._canvasHeight&&(this._texture=rTt(this._texture,this._canvasWidth,this._canvasHeight)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(n)}}_loadIcons(t){const r=this._canvas.getContext("2d");for(const n of t)this._pendingCount++,o1(n.url,U$,this._loadOptions).then(i=>{const o=m0(n),{x:a,y:s,width:l,height:u}=this._mapping[o],c=eTt(r,i,l,u);this._texture.setSubImageData({data:c,x:a,y:s,width:l,height:u}),this._texture.generateMipmap(),this.onUpdate()}).catch(i=>{this.onError({url:n.url,source:n.source,sourceIndex:n.sourceIndex,loadOptions:this._loadOptions,error:i})}).finally(()=>{this._pendingCount--})}}const bV=[0,0,0,255],aTt={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:e=>e.position},getIcon:{type:"accessor",value:e=>e.icon},getColor:{type:"accessor",value:bV},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}};class K0 extends No{constructor(...t){super(...t),E(this,"state",void 0)}getShaders(){return super.getShaders({vs:q3t,fs:Z3t,modules:[wu,Su]})}initializeState(){this.state={iconManager:new oTt(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:bV},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(t){super.updateState(t);const{props:r,oldProps:n,changeFlags:i}=t,o=this.getAttributeManager(),{iconAtlas:a,iconMapping:s,data:l,getIcon:u,textureParameters:c}=r,{iconManager:f}=this.state,h=a||this.internalState.isAsyncPropLoading("iconAtlas");if(f.setProps({loadOptions:r.loadOptions,autoPacking:!h,iconAtlas:a,iconMapping:h?s:null,textureParameters:c}),h?n.iconMapping!==r.iconMapping&&o.invalidate("getIcon"):(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getIcon))&&f.packIcons(l,u),i.extensionsChanged){var d;const{gl:p}=this.context;(d=this.state.model)===null||d===void 0||d.delete(),this.state.model=this._getModel(p),o.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(t){super.finalizeState(t),this.state.iconManager.finalize()}draw({uniforms:t}){const{sizeScale:r,sizeMinPixels:n,sizeMaxPixels:i,sizeUnits:o,billboard:a,alphaCutoff:s}=this.props,{iconManager:l}=this.state,u=l.getTexture();u&&this.state.model.setUniforms(t).setUniforms({iconsTexture:u,iconsTextureDim:[u.width,u.height],sizeUnits:Ds[o],sizeScale:r,sizeMinPixels:n,sizeMaxPixels:i,billboard:a,alphaCutoff:s}).draw()}_getModel(t){const r=[-1,-1,-1,1,1,1,1,-1];return new wa(t,{...this.getShaders(),id:this.props.id,geometry:new bu({drawMode:6,attributes:{positions:{size:2,value:new Float32Array(r)}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(t){var r;const n=(r=this.getCurrentLayer())===null||r===void 0?void 0:r.props.onIconError;n?n(t):Wt.error(t.error.message)()}getInstanceOffset(t){const{width:r,height:n,anchorX:i=r/2,anchorY:o=n/2}=this.state.iconManager.getIconMapping(t);return[r/2-i,n/2-o]}getInstanceColorMode(t){return this.state.iconManager.getIconMapping(t).mask?1:0}getInstanceIconFrame(t){const{x:r,y:n,width:i,height:o}=this.state.iconManager.getIconMapping(t);return[r,n,i,o]}}E(K0,"defaultProps",aTt);E(K0,"layerName","IconLayer");const sTt=`#define SHADER_NAME line-layer-vertex-shader

attribute vec3 positions;
attribute vec3 instanceSourcePositions;
attribute vec3 instanceTargetPositions;
attribute vec3 instanceSourcePositions64Low;
attribute vec3 instanceTargetPositions64Low;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute float instanceWidths;

uniform float opacity;
uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float useShortestPath;
uniform int widthUnits;

varying vec4 vColor;
varying vec2 uv;

// offset vector by strokeWidth pixels
// offset_direction is -1 (left) or 1 (right)
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  return dir_screenspace * offset_direction * width / 2.0;
}

vec3 splitLine(vec3 a, vec3 b, float x) {
  float t = (x - a.x) / (b.x - a.x);
  return vec3(x, mix(a.yz, b.yz, t));
}

void main(void) {
  geometry.worldPosition = instanceSourcePositions;
  geometry.worldPositionAlt = instanceTargetPositions;

  vec3 source_world = instanceSourcePositions;
  vec3 target_world = instanceTargetPositions;
  vec3 source_world_64low = instanceSourcePositions64Low;
  vec3 target_world_64low = instanceTargetPositions64Low;

  if (useShortestPath > 0.5 || useShortestPath < -0.5) {
    source_world.x = mod(source_world.x + 180., 360.0) - 180.;
    target_world.x = mod(target_world.x + 180., 360.0) - 180.;
    float deltaLng = target_world.x - source_world.x;

    if (deltaLng * useShortestPath > 180.) {
      source_world.x += 360. * useShortestPath;
      source_world = splitLine(source_world, target_world, 180. * useShortestPath);
      source_world_64low = vec3(0.0);
    } else if (deltaLng * useShortestPath < -180.) {
      target_world.x += 360. * useShortestPath;
      target_world = splitLine(source_world, target_world, 180. * useShortestPath);
      target_world_64low = vec3(0.0);
    } else if (useShortestPath < 0.) {
      // Line is not split, abort
      gl_Position = vec4(0.);
      return;
    }
  }

  // Position
  vec4 source_commonspace;
  vec4 target_commonspace;
  vec4 source = project_position_to_clipspace(source_world, source_world_64low, vec3(0.), source_commonspace);
  vec4 target = project_position_to_clipspace(target_world, target_world_64low, vec3(0.), target_commonspace);
  
  // linear interpolation of source & target to pick right coord
  float segmentIndex = positions.x;
  vec4 p = mix(source, target, segmentIndex);
  geometry.position = mix(source_commonspace, target_commonspace, segmentIndex);
  uv = positions.xy;
  geometry.uv = uv;
  geometry.pickingColor = instancePickingColors;

  // Multiply out width and clamp to limits
  float widthPixels = clamp(
    project_size_to_pixel(instanceWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels
  );

  // extrude
  vec3 offset = vec3(
    getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels),
    0.0);
  DECKGL_FILTER_SIZE(offset, geometry);
  gl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Color
  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,lTt=`#define SHADER_NAME line-layer-fragment-shader

precision highp float;

varying vec4 vColor;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,uTt=[0,0,0,255],cTt={getSourcePosition:{type:"accessor",value:e=>e.sourcePosition},getTargetPosition:{type:"accessor",value:e=>e.targetPosition},getColor:{type:"accessor",value:uTt},getWidth:{type:"accessor",value:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}};class Tk extends No{getShaders(){return super.getShaders({vs:sTt,fs:lTt,modules:[wu,Su]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1}})}updateState(t){if(super.updateState(t),t.changeFlags.extensionsChanged){var r;const{gl:n}=this.context;(r=this.state.model)===null||r===void 0||r.delete(),this.state.model=this._getModel(n),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{widthUnits:r,widthScale:n,widthMinPixels:i,widthMaxPixels:o,wrapLongitude:a}=this.props;this.state.model.setUniforms(t).setUniforms({widthUnits:Ds[r],widthScale:n,widthMinPixels:i,widthMaxPixels:o,useShortestPath:a?1:0}).draw(),a&&this.state.model.setUniforms({useShortestPath:-1}).draw()}_getModel(t){const r=[0,-1,0,0,1,0,1,-1,0,1,1,0];return new wa(t,{...this.getShaders(),id:this.props.id,geometry:new bu({drawMode:5,attributes:{positions:new Float32Array(r)}}),isInstanced:!0})}}E(Tk,"layerName","LineLayer");E(Tk,"defaultProps",cTt);const fTt=`#define SHADER_NAME scatterplot-layer-vertex-shader

attribute vec3 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceRadius;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform float radiusScale;
uniform float radiusMinPixels;
uniform float radiusMaxPixels;
uniform float lineWidthScale;
uniform float lineWidthMinPixels;
uniform float lineWidthMaxPixels;
uniform float stroked;
uniform bool filled;
uniform bool antialiasing;
uniform bool billboard;
uniform int radiusUnits;
uniform int lineWidthUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;


void main(void) {
  geometry.worldPosition = instancePositions;

  // Multiply out radius and clamp to limits
  outerRadiusPixels = clamp(
    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),
    radiusMinPixels, radiusMaxPixels
  );
  
  // Multiply out line width and clamp to limits
  float lineWidthPixels = clamp(
    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),
    lineWidthMinPixels, lineWidthMaxPixels
  );

  // outer radius needs to offset by half stroke width
  outerRadiusPixels += stroked * lineWidthPixels / 2.0;

  // Expand geometry to accomodate edge smoothing
  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;

  // position on the containing square in [-1, 1] space
  unitPosition = edgePadding * positions.xy;
  geometry.uv = unitPosition;
  geometry.pickingColor = instancePickingColors;

  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;
  
  if (billboard) {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = edgePadding * positions * outerRadiusPixels;
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
  }

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Apply opacity to instance color, or return instance picking color
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,hTt=`#define SHADER_NAME scatterplot-layer-fragment-shader

precision highp float;

uniform bool filled;
uniform float stroked;
uniform bool antialiasing;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;

void main(void) {
  geometry.uv = unitPosition;

  float distToCenter = length(unitPosition) * outerRadiusPixels;
  float inCircle = antialiasing ? 
    smoothedge(distToCenter, outerRadiusPixels) : 
    step(distToCenter, outerRadiusPixels);

  if (inCircle == 0.0) {
    discard;
  }

  if (stroked > 0.5) {
    float isLine = antialiasing ? 
      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
      step(innerUnitRadius * outerRadiusPixels, distToCenter);

    if (filled) {
      gl_FragColor = mix(vFillColor, vLineColor, isLine);
    } else {
      if (isLine == 0.0) {
        discard;
      }
      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
    }
  } else if (filled) {
    gl_FragColor = vFillColor;
  } else {
    discard;
  }

  gl_FragColor.a *= inCircle;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,pI=[0,0,0,255],dTt={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:e=>e.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:pI},getLineColor:{type:"accessor",value:pI},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class Pk extends No{getShaders(){return super.getShaders({vs:fTt,fs:hTt,modules:[wu,Su]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){if(super.updateState(t),t.changeFlags.extensionsChanged){var r;const{gl:n}=this.context;(r=this.state.model)===null||r===void 0||r.delete(),this.state.model=this._getModel(n),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{radiusUnits:r,radiusScale:n,radiusMinPixels:i,radiusMaxPixels:o,stroked:a,filled:s,billboard:l,antialiasing:u,lineWidthUnits:c,lineWidthScale:f,lineWidthMinPixels:h,lineWidthMaxPixels:d}=this.props;this.state.model.setUniforms(t).setUniforms({stroked:a?1:0,filled:s,billboard:l,antialiasing:u,radiusUnits:Ds[r],radiusScale:n,radiusMinPixels:i,radiusMaxPixels:o,lineWidthUnits:Ds[c],lineWidthScale:f,lineWidthMinPixels:h,lineWidthMaxPixels:d}).draw()}_getModel(t){const r=[-1,-1,0,1,-1,0,1,1,0,-1,1,0];return new wa(t,{...this.getShaders(),id:this.props.id,geometry:new bu({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array(r)}}}),isInstanced:!0})}}E(Pk,"defaultProps",dTt);E(Pk,"layerName","ScatterplotLayer");const wV={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function SV(e,t,r={}){return pTt(e,r)!==t?(gTt(e,r),!0):!1}function pTt(e,t={}){return Math.sign(vTt(e,t))}function vTt(e,t={}){const{start:r=0,end:n=e.length}=t,i=t.size||2;let o=0;for(let a=r,s=n-i;a<n;a+=i)o+=(e[a]-e[s])*(e[a+1]+e[s+1]),s=a;return o/2}function gTt(e,t){const{start:r=0,end:n=e.length,size:i=2}=t,o=(n-r)/i,a=Math.floor(o/2);for(let s=0;s<a;++s){const l=r+s*i,u=r+(o-1-s)*i;for(let c=0;c<i;++c){const f=e[l+c];e[l+c]=e[u+c],e[u+c]=f}}}function Mi(e,t){const r=t.length,n=e.length;if(n>0){let i=!0;for(let o=0;o<r;o++)if(e[n-r+o]!==t[o]){i=!1;break}if(i)return!1}for(let i=0;i<r;i++)e[n+i]=t[i];return!0}function cT(e,t){const r=t.length;for(let n=0;n<r;n++)e[n]=t[n]}function _0(e,t,r,n,i=[]){const o=n+t*r;for(let a=0;a<r;a++)i[a]=e[o+a];return i}function fT(e,t,r,n,i=[]){let o,a;if(r&8)o=(n[3]-e[1])/(t[1]-e[1]),a=3;else if(r&4)o=(n[1]-e[1])/(t[1]-e[1]),a=1;else if(r&2)o=(n[2]-e[0])/(t[0]-e[0]),a=2;else if(r&1)o=(n[0]-e[0])/(t[0]-e[0]),a=0;else return null;for(let s=0;s<e.length;s++)i[s]=(a&1)===s?n[a]:o*(t[s]-e[s])+e[s];return i}function sm(e,t){let r=0;return e[0]<t[0]?r|=1:e[0]>t[2]&&(r|=2),e[1]<t[1]?r|=4:e[1]>t[3]&&(r|=8),r}function TV(e,t){const{size:r=2,broken:n=!1,gridResolution:i=10,gridOffset:o=[0,0],startIndex:a=0,endIndex:s=e.length}=t||{},l=(s-a)/r;let u=[];const c=[u],f=_0(e,0,r,a);let h,d;const p=EV(f,i,o,[]),v=[];Mi(u,f);for(let g=1;g<l;g++){for(h=_0(e,g,r,a,h),d=sm(h,p);d;){fT(f,h,d,p,v);const m=sm(v,p);m&&(fT(f,v,m,p,v),d=m),Mi(u,v),cT(f,v),_Tt(p,i,d),n&&u.length>r&&(u=[],c.push(u),Mi(u,f)),d=sm(h,p)}Mi(u,h),cT(f,h)}return n?c:c[0]}const vI=0,mTt=1;function xv(e,t){for(let r=0;r<t.length;r++)e.push(t[r]);return e}function PV(e,t=null,r){if(!e.length)return[];const{size:n=2,gridResolution:i=10,gridOffset:o=[0,0],edgeTypes:a=!1}=r||{},s=[],l=[{pos:e,types:a?new Array(e.length/n).fill(mTt):null,holes:t||[]}],u=[[],[]];let c=[];for(;l.length;){const{pos:f,types:h,holes:d}=l.shift();yTt(f,n,d[0]||f.length,u),c=EV(u[0],i,o,c);const p=sm(u[1],c);if(p){let v=gI(f,h,n,0,d[0]||f.length,c,p);const g={pos:v[0].pos,types:v[0].types,holes:[]},m={pos:v[1].pos,types:v[1].types,holes:[]};l.push(g,m);for(let _=0;_<d.length;_++)v=gI(f,h,n,d[_],d[_+1]||f.length,c,p),v[0]&&(g.holes.push(g.pos.length),g.pos=xv(g.pos,v[0].pos),a&&(g.types=xv(g.types,v[0].types))),v[1]&&(m.holes.push(m.pos.length),m.pos=xv(m.pos,v[1].pos),a&&(m.types=xv(m.types,v[1].types)))}else{const v={positions:f};a&&(v.edgeTypes=h),d.length&&(v.holeIndices=d),s.push(v)}}return s}function gI(e,t,r,n,i,o,a){const s=(i-n)/r,l=[],u=[],c=[],f=[],h=[];let d,p,v;const g=_0(e,s-1,r,n);let m=Math.sign(a&8?g[1]-o[3]:g[0]-o[2]),_=t&&t[s-1],y=0,w=0;for(let T=0;T<s;T++)d=_0(e,T,r,n,d),p=Math.sign(a&8?d[1]-o[3]:d[0]-o[2]),v=t&&t[n/r+T],p&&m&&m!==p&&(fT(g,d,a,o,h),Mi(l,h)&&c.push(_),Mi(u,h)&&f.push(_)),p<=0?(Mi(l,d)&&c.push(v),y-=p):c.length&&(c[c.length-1]=vI),p>=0?(Mi(u,d)&&f.push(v),w+=p):f.length&&(f[f.length-1]=vI),cT(g,d),m=p,_=v;return[y?{pos:l,types:t&&c}:null,w?{pos:u,types:t&&f}:null]}function EV(e,t,r,n){const i=Math.floor((e[0]-r[0])/t)*t+r[0],o=Math.floor((e[1]-r[1])/t)*t+r[1];return n[0]=i,n[1]=o,n[2]=i+t,n[3]=o+t,n}function _Tt(e,t,r){r&8?(e[1]+=t,e[3]+=t):r&4?(e[1]-=t,e[3]-=t):r&2?(e[0]+=t,e[2]+=t):r&1&&(e[0]-=t,e[2]-=t)}function yTt(e,t,r,n){let i=1/0,o=-1/0,a=1/0,s=-1/0;for(let l=0;l<r;l+=t){const u=e[l],c=e[l+1];i=u<i?u:i,o=u>o?u:o,a=c<a?c:a,s=c>s?c:s}return n[0][0]=i,n[0][1]=a,n[1][0]=o,n[1][1]=s,n}const bTt=85.051129;function wTt(e,t){const{size:r=2,startIndex:n=0,endIndex:i=e.length,normalize:o=!0}=t||{},a=e.slice(n,i);kV(a,r,0,i-n);const s=TV(a,{size:r,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(o)for(const l of s)AV(l,r);return s}function STt(e,t=null,r){const{size:n=2,normalize:i=!0,edgeTypes:o=!1}=r||{};t=t||[];const a=[],s=[];let l=0,u=0;for(let f=0;f<=t.length;f++){const h=t[f]||e.length,d=u,p=TTt(e,n,l,h);for(let v=p;v<h;v++)a[u++]=e[v];for(let v=l;v<p;v++)a[u++]=e[v];kV(a,n,d,u),PTt(a,n,d,u,r==null?void 0:r.maxLatitude),l=h,s[f]=u}s.pop();const c=PV(a,s,{size:n,gridResolution:360,gridOffset:[-180,-180],edgeTypes:o});if(i)for(const f of c)AV(f.positions,n);return c}function TTt(e,t,r,n){let i=-1,o=-1;for(let a=r+1;a<n;a+=t){const s=Math.abs(e[a]);s>i&&(i=s,o=a-1)}return o}function PTt(e,t,r,n,i=bTt){const o=e[r],a=e[n-t];if(Math.abs(o-a)>180){const s=_0(e,0,t,r);s[0]+=Math.round((a-o)/360)*360,Mi(e,s),s[1]=Math.sign(s[1])*i,Mi(e,s),s[0]=o,Mi(e,s)}}function kV(e,t,r,n){let i=e[0],o;for(let a=r;a<n;a+=t){o=e[a];const s=o-i;(s>180||s<-180)&&(o-=Math.round(s/360)*360),e[a]=i=o}}function AV(e,t){let r;const n=e.length/t;for(let o=0;o<n&&(r=e[o*t],(r+180)%360===0);o++);const i=-Math.round(r/360)*360;if(i!==0)for(let o=0;o<n;o++)e[o*t]+=i}function ETt(e,t,r,n){let i;if(Array.isArray(e[0])){const o=e.length*t;i=new Array(o);for(let a=0;a<e.length;a++)for(let s=0;s<t;s++)i[a*t+s]=e[a][s]||0}else i=e;return r?TV(i,{size:t,gridResolution:r}):n?wTt(i,{size:t}):i}const kTt=1,ATt=2,Ob=4;class CTt extends yV{constructor(t){super({...t,attributes:{positions:{size:3,padding:18,initialize:!0,type:t.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(t){return this.attributes[t]}getGeometryFromBuffer(t){return this.normalize?super.getGeometryFromBuffer(t):null}normalizeGeometry(t){return this.normalize?ETt(t,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):t}getGeometrySize(t){if(mI(t)){let n=0;for(const i of t)n+=this.getGeometrySize(i);return n}const r=this.getPathLength(t);return r<2?0:this.isClosed(t)?r<3?0:r+2:r}updateGeometryAttributes(t,r){if(r.geometrySize!==0)if(t&&mI(t))for(const n of t){const i=this.getGeometrySize(n);r.geometrySize=i,this.updateGeometryAttributes(n,r),r.vertexStart+=i}else this._updateSegmentTypes(t,r),this._updatePositions(t,r)}_updateSegmentTypes(t,r){const n=this.attributes.segmentTypes,i=t?this.isClosed(t):!1,{vertexStart:o,geometrySize:a}=r;n.fill(0,o,o+a),i?(n[o]=Ob,n[o+a-2]=Ob):(n[o]+=kTt,n[o+a-2]+=ATt),n[o+a-1]=Ob}_updatePositions(t,r){const{positions:n}=this.attributes;if(!n||!t)return;const{vertexStart:i,geometrySize:o}=r,a=new Array(3);for(let s=i,l=0;l<o;s++,l++)this.getPointOnPath(t,l,a),n[s*3]=a[0],n[s*3+1]=a[1],n[s*3+2]=a[2]}getPathLength(t){return t.length/this.positionSize}getPointOnPath(t,r,n=[]){const{positionSize:i}=this;r*i>=t.length&&(r+=1-t.length/i);const o=r*i;return n[0]=t[o],n[1]=t[o+1],n[2]=i===3&&t[o+2]||0,n}isClosed(t){if(!this.normalize)return Boolean(this.opts.loop);const{positionSize:r}=this,n=t.length-r;return t[0]===t[n]&&t[1]===t[n+1]&&(r===2||t[2]===t[n+2])}}function mI(e){return Array.isArray(e[0])}const MTt=`#define SHADER_NAME path-layer-vertex-shader

attribute vec2 positions;

attribute float instanceTypes;
attribute vec3 instanceStartPositions;
attribute vec3 instanceEndPositions;
attribute vec3 instanceLeftPositions;
attribute vec3 instanceRightPositions;
attribute vec3 instanceLeftPositions64Low;
attribute vec3 instanceStartPositions64Low;
attribute vec3 instanceEndPositions64Low;
attribute vec3 instanceRightPositions64Low;
attribute float instanceStrokeWidths;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;

uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float jointType;
uniform float capType;
uniform float miterLimit;
uniform bool billboard;
uniform int widthUnits;

uniform float opacity;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

const float EPSILON = 0.001;
const vec3 ZERO_OFFSET = vec3(0.0);

float flipIfTrue(bool flag) {
  return -(float(flag) * 2. - 1.);
}

// calculate line join positions
vec3 lineJoin(
  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,
  vec2 width
) {
  bool isEnd = positions.x > 0.0;
  // side of the segment - -1: left, 0: center, 1: right
  float sideOfPath = positions.y;
  float isJoint = float(sideOfPath == 0.0);

  vec3 deltaA3 = (currPoint - prevPoint);
  vec3 deltaB3 = (nextPoint - currPoint);

  mat3 rotationMatrix;
  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);
  if (needsRotation) {
    deltaA3 = deltaA3 * rotationMatrix;
    deltaB3 = deltaB3 * rotationMatrix;
  }
  vec2 deltaA = deltaA3.xy / width;
  vec2 deltaB = deltaB3.xy / width;

  float lenA = length(deltaA);
  float lenB = length(deltaB);

  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);
  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);

  vec2 perpA = vec2(-dirA.y, dirA.x);
  vec2 perpB = vec2(-dirB.y, dirB.x);

  // tangent of the corner
  vec2 tangent = dirA + dirB;
  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;
  // direction of the corner
  vec2 miterVec = vec2(-tangent.y, tangent.x);
  // direction of the segment
  vec2 dir = isEnd ? dirA : dirB;
  // direction of the extrusion
  vec2 perp = isEnd ? perpA : perpB;
  // length of the segment
  float L = isEnd ? lenA : lenB;

  // A = angle of the corner
  float sinHalfA = abs(dot(miterVec, perp));
  float cosHalfA = abs(dot(dirA, miterVec));

  // -1: right, 1: left
  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);

  // relative position to the corner:
  // -1: inside (smaller side of the angle)
  // 0: center
  // 1: outside (bigger side of the angle)
  float cornerPosition = sideOfPath * turnDirection;

  float miterSize = 1.0 / max(sinHalfA, EPSILON);
  // trim if inside corner extends further than the line segment
  miterSize = mix(
    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),
    miterSize,
    step(0.0, cornerPosition)
  );

  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))
    * (sideOfPath + isJoint * turnDirection);

  // special treatment for start cap and end cap
  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));
  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));
  bool isCap = isStartCap || isEndCap;

  // extend out a triangle to envelope the round cap
  if (isCap) {
    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);
    vJointType = capType;
  } else {
    vJointType = jointType;
  }

  // Generate variables for fragment shader
  vPathLength = L;
  vCornerOffset = offsetVec;
  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);
  vMiterLength = isCap ? isJoint : vMiterLength;

  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);
  vPathPosition = vec2(
    dot(offsetFromStartOfPath, perp),
    dot(offsetFromStartOfPath, dir)
  );
  geometry.uv = vPathPosition;

  float isValid = step(instanceTypes, 3.5);
  vec3 offset = vec3(offsetVec * width * isValid, 0.0);

  if (needsRotation) {
    offset = rotationMatrix * offset;
  }
  return currPoint + offset;
}

// In clipspace extrusion, if a line extends behind the camera, clip it to avoid visual artifacts
void clipLine(inout vec4 position, vec4 refPosition) {
  if (position.w < EPSILON) {
    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);
    position = refPosition + (position - refPosition) * r;
  }
}

void main() {
  geometry.pickingColor = instancePickingColors;

  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);

  float isEnd = positions.x;

  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);
  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);

  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);
  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);

  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);
  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);

  geometry.worldPosition = currPosition;
  vec2 widthPixels = vec2(clamp(
    project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels) / 2.0);
  vec3 width;

  if (billboard) {
    // Extrude in clipspace
    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);
    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);
    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);

    clipLine(prevPositionScreen, currPositionScreen);
    clipLine(nextPositionScreen, currPositionScreen);
    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));

    width = vec3(widthPixels, 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec3 pos = lineJoin(
      prevPositionScreen.xyz / prevPositionScreen.w,
      currPositionScreen.xyz / currPositionScreen.w,
      nextPositionScreen.xyz / nextPositionScreen.w,
      project_pixel_size_to_clipspace(width.xy)
    );

    gl_Position = vec4(pos * currPositionScreen.w, currPositionScreen.w);
  } else {
    // Extrude in commonspace
    prevPosition = project_position(prevPosition, prevPosition64Low);
    currPosition = project_position(currPosition, currPosition64Low);
    nextPosition = project_position(nextPosition, nextPosition64Low);

    width = vec3(project_pixel_size(widthPixels), 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec4 pos = vec4(
      lineJoin(prevPosition, currPosition, nextPosition, width.xy),
      1.0);
    geometry.position = pos;
    gl_Position = project_common_position_to_clipspace(pos);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,xTt=`#define SHADER_NAME path-layer-fragment-shader

precision highp float;

uniform float miterLimit;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
/*
 * vPathPosition represents the relative coordinates of the current fragment on the path segment.
 * vPathPosition.x - position along the width of the path, between [-1, 1]. 0 is the center line.
 * vPathPosition.y - position along the length of the path, between [0, L / width].
 */
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

void main(void) {
  geometry.uv = vPathPosition;

  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {
    // if joint is rounded, test distance from the corner
    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {
      discard;
    }
    // trim miter
    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {
      discard;
    }
  }
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,CV=[0,0,0,255],LTt={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:e=>e.path},getColor:{type:"accessor",value:CV},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},Rb={enter:(e,t)=>t.length?t.subarray(t.length-e.length):e};class Ek extends No{constructor(...t){super(...t),E(this,"state",void 0)}getShaders(){return super.getShaders({vs:MTt,fs:xTt,modules:[wu,Su]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:Rb,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:Rb,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:Rb,defaultValue:CV},instancePickingColors:{size:3,type:5121,accessor:(n,{index:i,target:o})=>this.encodePickingColor(n&&n.__source?n.__source.index:i,o)}}),this.setState({pathTesselator:new CTt({fp64:this.use64bitPositions()})})}updateState(t){super.updateState(t);const{props:r,changeFlags:n}=t,i=this.getAttributeManager();if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPath)){const{pathTesselator:s}=this.state,l=r.data.attributes||{};s.updateGeometry({data:r.data,geometryBuffer:l.getPath,buffers:l,normalize:!r._pathType,loop:r._pathType==="loop",getGeometry:r.getPath,positionFormat:r.positionFormat,wrapLongitude:r.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:n.dataChanged}),this.setState({numInstances:s.instanceCount,startIndices:s.vertexStarts}),n.dataChanged||i.invalidateAll()}if(n.extensionsChanged){var a;const{gl:s}=this.context;(a=this.state.model)===null||a===void 0||a.delete(),this.state.model=this._getModel(s),i.invalidateAll()}}getPickingInfo(t){const r=super.getPickingInfo(t),{index:n}=r,{data:i}=this.props;return i[0]&&i[0].__source&&(r.object=i.find(o=>o.__source.index===n)),r}disablePickingIndex(t){const{data:r}=this.props;if(r[0]&&r[0].__source)for(let n=0;n<r.length;n++)r[n].__source.index===t&&this._disablePickingIndex(n);else this._disablePickingIndex(t)}draw({uniforms:t}){const{jointRounded:r,capRounded:n,billboard:i,miterLimit:o,widthUnits:a,widthScale:s,widthMinPixels:l,widthMaxPixels:u}=this.props;this.state.model.setUniforms(t).setUniforms({jointType:Number(r),capType:Number(n),billboard:i,widthUnits:Ds[a],widthScale:s,miterLimit:o,widthMinPixels:l,widthMaxPixels:u}).draw()}_getModel(t){const r=[0,1,2,1,4,2,1,3,4,3,5,4],n=[0,0,0,-1,0,1,1,-1,1,1,1,0];return new wa(t,{...this.getShaders(),id:this.props.id,geometry:new bu({drawMode:4,attributes:{indices:new Uint16Array(r),positions:{value:new Float32Array(n),size:2}}}),isInstanced:!0})}calculatePositions(t){const{pathTesselator:r}=this.state;t.startIndices=r.vertexStarts,t.value=r.get("positions")}calculateSegmentTypes(t){const{pathTesselator:r}=this.state;t.startIndices=r.vertexStarts,t.value=r.get("segmentTypes")}}E(Ek,"defaultProps",LTt);E(Ek,"layerName","PathLayer");var kk={exports:{}};kk.exports=D_;kk.exports.default=D_;function D_(e,t,r){r=r||2;var n=t&&t.length,i=n?t[0]*r:e.length,o=MV(e,0,i,r,!0),a=[];if(!o||o.next===o.prev)return a;var s,l,u,c,f,h,d;if(n&&(o=NTt(e,t,o,r)),e.length>80*r){s=u=e[0],l=c=e[1];for(var p=r;p<i;p+=r)f=e[p],h=e[p+1],f<s&&(s=f),h<l&&(l=h),f>u&&(u=f),h>c&&(c=h);d=Math.max(u-s,c-l),d=d!==0?32767/d:0}return y0(o,a,r,s,l,d,0),a}function MV(e,t,r,n,i){var o,a;if(i===pT(e,t,r,n)>0)for(o=t;o<r;o+=n)a=_I(o,e[o],e[o+1],a);else for(o=r-n;o>=t;o-=n)a=_I(o,e[o],e[o+1],a);return a&&N_(a,a.next)&&(w0(a),a=a.next),a}function su(e,t){if(!e)return e;t||(t=e);var r=e,n;do if(n=!1,!r.steiner&&(N_(r,r.next)||Ue(r.prev,r,r.next)===0)){if(w0(r),r=t=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==t);return t}function y0(e,t,r,n,i,o,a){if(!!e){!a&&o&&VTt(e,n,i,o);for(var s=e,l,u;e.prev!==e.next;){if(l=e.prev,u=e.next,o?OTt(e,n,i,o):ITt(e)){t.push(l.i/r|0),t.push(e.i/r|0),t.push(u.i/r|0),w0(e),e=u.next,s=u.next;continue}if(e=u,e===s){a?a===1?(e=RTt(su(e),t,r),y0(e,t,r,n,i,o,2)):a===2&&DTt(e,t,r,n,i,o):y0(su(e),t,r,n,i,o,1);break}}}}function ITt(e){var t=e.prev,r=e,n=e.next;if(Ue(t,r,n)>=0)return!1;for(var i=t.x,o=r.x,a=n.x,s=t.y,l=r.y,u=n.y,c=i<o?i<a?i:a:o<a?o:a,f=s<l?s<u?s:u:l<u?l:u,h=i>o?i>a?i:a:o>a?o:a,d=s>l?s>u?s:u:l>u?l:u,p=n.next;p!==t;){if(p.x>=c&&p.x<=h&&p.y>=f&&p.y<=d&&Ac(i,s,o,l,a,u,p.x,p.y)&&Ue(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function OTt(e,t,r,n){var i=e.prev,o=e,a=e.next;if(Ue(i,o,a)>=0)return!1;for(var s=i.x,l=o.x,u=a.x,c=i.y,f=o.y,h=a.y,d=s<l?s<u?s:u:l<u?l:u,p=c<f?c<h?c:h:f<h?f:h,v=s>l?s>u?s:u:l>u?l:u,g=c>f?c>h?c:h:f>h?f:h,m=hT(d,p,t,r,n),_=hT(v,g,t,r,n),y=e.prevZ,w=e.nextZ;y&&y.z>=m&&w&&w.z<=_;){if(y.x>=d&&y.x<=v&&y.y>=p&&y.y<=g&&y!==i&&y!==a&&Ac(s,c,l,f,u,h,y.x,y.y)&&Ue(y.prev,y,y.next)>=0||(y=y.prevZ,w.x>=d&&w.x<=v&&w.y>=p&&w.y<=g&&w!==i&&w!==a&&Ac(s,c,l,f,u,h,w.x,w.y)&&Ue(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;y&&y.z>=m;){if(y.x>=d&&y.x<=v&&y.y>=p&&y.y<=g&&y!==i&&y!==a&&Ac(s,c,l,f,u,h,y.x,y.y)&&Ue(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;w&&w.z<=_;){if(w.x>=d&&w.x<=v&&w.y>=p&&w.y<=g&&w!==i&&w!==a&&Ac(s,c,l,f,u,h,w.x,w.y)&&Ue(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function RTt(e,t,r){var n=e;do{var i=n.prev,o=n.next.next;!N_(i,o)&&xV(i,n,n.next,o)&&b0(i,o)&&b0(o,i)&&(t.push(i.i/r|0),t.push(n.i/r|0),t.push(o.i/r|0),w0(n),w0(n.next),n=e=o),n=n.next}while(n!==e);return su(n)}function DTt(e,t,r,n,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&jTt(a,s)){var l=LV(a,s);a=su(a,a.next),l=su(l,l.next),y0(a,t,r,n,i,o,0),y0(l,t,r,n,i,o,0);return}s=s.next}a=a.next}while(a!==e)}function NTt(e,t,r,n){var i=[],o,a,s,l,u;for(o=0,a=t.length;o<a;o++)s=t[o]*n,l=o<a-1?t[o+1]*n:e.length,u=MV(e,s,l,n,!1),u===u.next&&(u.steiner=!0),i.push(GTt(u));for(i.sort(FTt),o=0;o<i.length;o++)r=BTt(i[o],r);return r}function FTt(e,t){return e.x-t.x}function BTt(e,t){var r=$Tt(e,t);if(!r)return t;var n=LV(r,e);return su(n,n.next),su(r,r.next)}function $Tt(e,t){var r=t,n=e.x,i=e.y,o=-1/0,a;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var s=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&s>o&&(o=s,a=r.x<r.next.x?r:r.next,s===n))return a}r=r.next}while(r!==t);if(!a)return null;var l=a,u=a.x,c=a.y,f=1/0,h;r=a;do n>=r.x&&r.x>=u&&n!==r.x&&Ac(i<c?n:o,i,u,c,i<c?o:n,i,r.x,r.y)&&(h=Math.abs(i-r.y)/(n-r.x),b0(r,e)&&(h<f||h===f&&(r.x>a.x||r.x===a.x&&zTt(a,r)))&&(a=r,f=h)),r=r.next;while(r!==l);return a}function zTt(e,t){return Ue(e.prev,e,t.prev)<0&&Ue(t.next,e,e.next)<0}function VTt(e,t,r,n){var i=e;do i.z===0&&(i.z=hT(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,UTt(i)}function UTt(e){var t,r,n,i,o,a,s,l,u=1;do{for(r=e,e=null,o=null,a=0;r;){for(a++,n=r,s=0,t=0;t<u&&(s++,n=n.nextZ,!!n);t++);for(l=u;s>0||l>0&&n;)s!==0&&(l===0||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,u*=2}while(a>1);return e}function hT(e,t,r,n,i){return e=(e-r)*i|0,t=(t-n)*i|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function GTt(e){var t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function Ac(e,t,r,n,i,o,a,s){return(i-a)*(t-s)>=(e-a)*(o-s)&&(e-a)*(n-s)>=(r-a)*(t-s)&&(r-a)*(o-s)>=(i-a)*(n-s)}function jTt(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!WTt(e,t)&&(b0(e,t)&&b0(t,e)&&HTt(e,t)&&(Ue(e.prev,e,t.prev)||Ue(e,t.prev,t))||N_(e,t)&&Ue(e.prev,e,e.next)>0&&Ue(t.prev,t,t.next)>0)}function Ue(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function N_(e,t){return e.x===t.x&&e.y===t.y}function xV(e,t,r,n){var i=Iv(Ue(e,t,r)),o=Iv(Ue(e,t,n)),a=Iv(Ue(r,n,e)),s=Iv(Ue(r,n,t));return!!(i!==o&&a!==s||i===0&&Lv(e,r,t)||o===0&&Lv(e,n,t)||a===0&&Lv(r,e,n)||s===0&&Lv(r,t,n))}function Lv(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function Iv(e){return e>0?1:e<0?-1:0}function WTt(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&xV(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function b0(e,t){return Ue(e.prev,e,e.next)<0?Ue(e,t,e.next)>=0&&Ue(e,e.prev,t)>=0:Ue(e,t,e.prev)<0||Ue(e,e.next,t)<0}function HTt(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==e);return n}function LV(e,t){var r=new dT(e.i,e.x,e.y),n=new dT(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function _I(e,t,r,n){var i=new dT(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function w0(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function dT(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}D_.deviation=function(e,t,r,n){var i=t&&t.length,o=i?t[0]*r:e.length,a=Math.abs(pT(e,0,o,r));if(i)for(var s=0,l=t.length;s<l;s++){var u=t[s]*r,c=s<l-1?t[s+1]*r:e.length;a-=Math.abs(pT(e,u,c,r))}var f=0;for(s=0;s<n.length;s+=3){var h=n[s]*r,d=n[s+1]*r,p=n[s+2]*r;f+=Math.abs((e[h]-e[p])*(e[d+1]-e[h+1])-(e[h]-e[d])*(e[p+1]-e[h+1]))}return a===0&&f===0?0:Math.abs((f-a)/a)};function pT(e,t,r,n){for(var i=0,o=t,a=r-n;o<r;o+=n)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}D_.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)r.vertices.push(e[i][o][a]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r};const Ov=wV.CLOCKWISE,yI=wV.COUNTER_CLOCKWISE,_s={isClosed:!0};function XTt(e){if(e=e&&e.positions||e,!Array.isArray(e)&&!ArrayBuffer.isView(e))throw new Error("invalid polygon")}function id(e){return"positions"in e?e.positions:e}function lm(e){return"holeIndices"in e?e.holeIndices:null}function YTt(e){return Array.isArray(e[0])}function qTt(e){return e.length>=1&&e[0].length>=2&&Number.isFinite(e[0][0])}function ZTt(e){const t=e[0],r=e[e.length-1];return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]}function KTt(e,t,r,n){for(let i=0;i<t;i++)if(e[r+i]!==e[n-t+i])return!1;return!0}function bI(e,t,r,n,i){let o=t;const a=r.length;for(let s=0;s<a;s++)for(let l=0;l<n;l++)e[o++]=r[s][l]||0;if(!ZTt(r))for(let s=0;s<n;s++)e[o++]=r[0][s]||0;return _s.start=t,_s.end=o,_s.size=n,SV(e,i,_s),o}function wI(e,t,r,n,i=0,o,a){o=o||r.length;const s=o-i;if(s<=0)return t;let l=t;for(let u=0;u<s;u++)e[l++]=r[i+u];if(!KTt(r,n,i,o))for(let u=0;u<n;u++)e[l++]=r[i+u];return _s.start=t,_s.end=l,_s.size=n,SV(e,a,_s),l}function JTt(e,t){XTt(e);const r=[],n=[];if("positions"in e){const{positions:i,holeIndices:o}=e;if(o){let a=0;for(let s=0;s<=o.length;s++)a=wI(r,a,i,t,o[s-1],o[s],s===0?Ov:yI),n.push(a);return n.pop(),{positions:r,holeIndices:n}}e=i}if(!YTt(e))return wI(r,0,e,t,0,r.length,Ov),r;if(!qTt(e)){let i=0;for(const[o,a]of e.entries())i=bI(r,i,a,t,o===0?Ov:yI),n.push(i);return n.pop(),{positions:r,holeIndices:n}}return bI(r,0,e,t,Ov),r}function QTt(e,t,r){let n=lm(e);n&&(n=n.map(o=>o/t));let i=id(e);if(r){const o=i.length;i=i.slice();const a=[];for(let s=0;s<o;s+=t){a[0]=i[s],a[1]=i[s+1];const l=r(a);i[s]=l[0],i[s+1]=l[1]}}return kk.exports(i,n,t)}class tPt extends yV{constructor(t){const{fp64:r,IndexType:n=Uint32Array}=t;super({...t,attributes:{positions:{size:3,type:r?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:n,size:1}}})}get(t){const{attributes:r}=this;return t==="indices"?r.indices&&r.indices.subarray(0,this.vertexCount):r[t]}updateGeometry(t){super.updateGeometry(t);const r=this.buffers.indices;if(r)this.vertexCount=(r.value||r).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(t){if(this.normalize){const r=JTt(t,this.positionSize);return this.opts.resolution?PV(id(r),lm(r),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?STt(id(r),lm(r),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):r}return t}getGeometrySize(t){if(SI(t)){let r=0;for(const n of t)r+=this.getGeometrySize(n);return r}return id(t).length/this.positionSize}getGeometryFromBuffer(t){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(t):null}updateGeometryAttributes(t,r){if(t&&SI(t))for(const n of t){const i=this.getGeometrySize(n);r.geometrySize=i,this.updateGeometryAttributes(n,r),r.vertexStart+=i,r.indexStart=this.indexStarts[r.geometryIndex+1]}else this._updateIndices(t,r),this._updatePositions(t,r),this._updateVertexValid(t,r)}_updateIndices(t,{geometryIndex:r,vertexStart:n,indexStart:i}){const{attributes:o,indexStarts:a,typedArrayManager:s}=this;let l=o.indices;if(!l||!t)return;let u=i;const c=QTt(t,this.positionSize,this.opts.preproject);l=s.allocate(l,i+c.length,{copy:!0});for(let f=0;f<c.length;f++)l[u++]=c[f]+n;a[r+1]=i+c.length,o.indices=l}_updatePositions(t,{vertexStart:r,geometrySize:n}){const{attributes:{positions:i},positionSize:o}=this;if(!i||!t)return;const a=id(t);for(let s=r,l=0;l<n;s++,l++){const u=a[l*o],c=a[l*o+1],f=o>2?a[l*o+2]:0;i[s*3]=u,i[s*3+1]=c,i[s*3+2]=f}}_updateVertexValid(t,{vertexStart:r,geometrySize:n}){const{positionSize:i}=this,o=this.attributes.vertexValid,a=t&&lm(t);if(t&&t.edgeTypes?o.set(t.edgeTypes,r):o.fill(1,r,r+n),a)for(let s=0;s<a.length;s++)o[r+a[s]/i-1]=0;o[r+n-1]=0}}function SI(e){return Array.isArray(e)&&e.length>0&&!Number.isFinite(e[0])}const IV=`
attribute vec2 vertexPositions;
attribute float vertexValid;

uniform bool extruded;
uniform bool isWireframe;
uniform float elevationScale;
uniform float opacity;

varying vec4 vColor;

struct PolygonProps {
  vec4 fillColors;
  vec4 lineColors;
  vec3 positions;
  vec3 nextPositions;
  vec3 pickingColors;
  vec3 positions64Low;
  vec3 nextPositions64Low;
  float elevations;
};

vec3 project_offset_normal(vec3 vector) {
  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * project_uCommonUnitsPerWorldUnit);
  }
  return project_normal(vector);
}

void calculatePosition(PolygonProps props) {
#ifdef IS_SIDE_VERTEX
  if(vertexValid < 0.5){
    gl_Position = vec4(0.);
    return;
  }
#endif

  vec3 pos;
  vec3 pos64Low;
  vec3 normal;
  vec4 colors = isWireframe ? props.lineColors : props.fillColors;

  geometry.worldPosition = props.positions;
  geometry.worldPositionAlt = props.nextPositions;
  geometry.pickingColor = props.pickingColors;

#ifdef IS_SIDE_VERTEX
  pos = mix(props.positions, props.nextPositions, vertexPositions.x);
  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);
#else
  pos = props.positions;
  pos64Low = props.positions64Low;
#endif

  if (extruded) {
    pos.z += props.elevations * vertexPositions.y * elevationScale;
  }
  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  if (extruded) {
  #ifdef IS_SIDE_VERTEX
    normal = vec3(
      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),
      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),
      0.0);
    normal = project_offset_normal(normal);
  #else
    normal = project_normal(vec3(0.0, 0.0, 1.0));
  #endif
    geometry.normal = normal;
    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);
    vColor = vec4(lightColor, colors.a * opacity);
  } else {
    vColor = vec4(colors.rgb, colors.a * opacity);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,ePt=`#define SHADER_NAME solid-polygon-layer-vertex-shader

attribute vec3 positions;
attribute vec3 positions64Low;
attribute float elevations;
attribute vec4 fillColors;
attribute vec4 lineColors;
attribute vec3 pickingColors;

`.concat(IV,`

void main(void) {
  PolygonProps props;

  props.positions = positions;
  props.positions64Low = positions64Low;
  props.elevations = elevations;
  props.fillColors = fillColors;
  props.lineColors = lineColors;
  props.pickingColors = pickingColors;

  calculatePosition(props);
}
`),rPt=`#define SHADER_NAME solid-polygon-layer-vertex-shader-side
#define IS_SIDE_VERTEX


attribute vec3 instancePositions;
attribute vec3 nextPositions;
attribute vec3 instancePositions64Low;
attribute vec3 nextPositions64Low;
attribute float instanceElevations;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

`.concat(IV,`

void main(void) {
  PolygonProps props;

  #if RING_WINDING_ORDER_CW == 1
    props.positions = instancePositions;
    props.positions64Low = instancePositions64Low;
    props.nextPositions = nextPositions;
    props.nextPositions64Low = nextPositions64Low;
  #else
    props.positions = nextPositions;
    props.positions64Low = nextPositions64Low;
    props.nextPositions = instancePositions;
    props.nextPositions64Low = instancePositions64Low;
  #endif
  props.elevations = instanceElevations;
  props.fillColors = instanceFillColors;
  props.lineColors = instanceLineColors;
  props.pickingColors = instancePickingColors;

  calculatePosition(props);
}
`),nPt=`#define SHADER_NAME solid-polygon-layer-fragment-shader

precision highp float;

varying vec4 vColor;

void main(void) {
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,g1=[0,0,0,255],iPt={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:e=>e.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:g1},getLineColor:{type:"accessor",value:g1},material:!0},Rv={enter:(e,t)=>t.length?t.subarray(t.length-e.length):e};class Ak extends No{constructor(...t){super(...t),E(this,"state",void 0)}getShaders(t){return super.getShaders({vs:t==="top"?ePt:rPt,fs:nPt,defines:{RING_WINDING_ORDER_CW:!this.props._normalize&&this.props._windingOrder==="CCW"?0:1},modules:[wu,p2t,Su]})}get wrapLongitude(){return!1}initializeState(){const{gl:t,viewport:r}=this.context;let{coordinateSystem:n}=this.props;r.isGeospatial&&n===le.DEFAULT&&(n=le.LNGLAT),this.setState({numInstances:0,polygonTesselator:new tPt({preproject:n===le.LNGLAT&&r.projectFlat.bind(r),fp64:this.use64bitPositions(),IndexType:!t||nk(t,Be.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});const i=this.getAttributeManager(),o=!0;i.remove(["instancePickingColors"]),i.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:o},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:Rv,accessor:"getPolygon",update:this.calculatePositions,noAlloc:o,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:o},elevations:{size:1,transition:Rv,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:Rv,accessor:"getFillColor",defaultValue:g1,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:Rv,accessor:"getLineColor",defaultValue:g1,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:(a,{index:s,target:l})=>this.encodePickingColor(a&&a.__source?a.__source.index:s,l),shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}getPickingInfo(t){const r=super.getPickingInfo(t),{index:n}=r,{data:i}=this.props;return i[0]&&i[0].__source&&(r.object=i.find(o=>o.__source.index===n)),r}disablePickingIndex(t){const{data:r}=this.props;if(r[0]&&r[0].__source)for(let n=0;n<r.length;n++)r[n].__source.index===t&&this._disablePickingIndex(n);else this._disablePickingIndex(t)}draw({uniforms:t}){const{extruded:r,filled:n,wireframe:i,elevationScale:o}=this.props,{topModel:a,sideModel:s,polygonTesselator:l}=this.state,u={...t,extruded:Boolean(r),elevationScale:o};s&&(s.setInstanceCount(l.instanceCount-1),s.setUniforms(u),i&&(s.setDrawMode(3),s.setUniforms({isWireframe:!0}).draw()),n&&(s.setDrawMode(6),s.setUniforms({isWireframe:!1}).draw())),a&&(a.setVertexCount(l.vertexCount),a.setUniforms(u).draw())}updateState(t){super.updateState(t),this.updateGeometry(t);const{props:r,oldProps:n,changeFlags:i}=t,o=this.getAttributeManager();if(i.extensionsChanged||r.filled!==n.filled||r.extruded!==n.extruded){var s;(s=this.state.models)===null||s===void 0||s.forEach(l=>l.delete()),this.setState(this._getModels(this.context.gl)),o.invalidateAll()}}updateGeometry({props:t,oldProps:r,changeFlags:n}){if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon)){const{polygonTesselator:o}=this.state,a=t.data.attributes||{};o.updateGeometry({data:t.data,normalize:t._normalize,geometryBuffer:a.getPolygon,buffers:a,getGeometry:t.getPolygon,positionFormat:t.positionFormat,wrapLongitude:t.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:n.dataChanged}),this.setState({numInstances:o.instanceCount,startIndices:o.vertexStarts}),n.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(t){const{id:r,filled:n,extruded:i}=this.props;let o,a;if(n){const s=this.getShaders("top");s.defines.NON_INSTANCED_MODEL=1,o=new wa(t,{...s,id:"".concat(r,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0})}return i&&(a=new wa(t,{...this.getShaders("side"),id:"".concat(r,"-side"),geometry:new bu({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}),a.userData.excludeAttributes={indices:!0}),{models:[a,o].filter(Boolean),topModel:o,sideModel:a}}calculateIndices(t){const{polygonTesselator:r}=this.state;t.startIndices=r.indexStarts,t.value=r.get("indices")}calculatePositions(t){const{polygonTesselator:r}=this.state;t.startIndices=r.vertexStarts,t.value=r.get("positions")}calculateVertexValid(t){t.value=this.state.polygonTesselator.get("vertexValid")}}E(Ak,"defaultProps",iPt);E(Ak,"layerName","SolidPolygonLayer");function oPt({data:e,getIndex:t,dataRange:r,replace:n}){const{startRow:i=0,endRow:o=1/0}=r,a=e.length;let s=a,l=a;for(let h=0;h<a;h++){const d=t(e[h]);if(s>h&&d>=i&&(s=h),d>=o){l=h;break}}let u=s;const f=l-s!==n.length?e.slice(l):void 0;for(let h=0;h<n.length;h++)e[u++]=n[h];if(f){for(let h=0;h<f.length;h++)e[u++]=f[h];e.length=u}return{startRow:s,endRow:s+n.length}}function aPt(e,t){if(!e)return null;const r="startIndices"in e?e.startIndices[t]:t,n=e.featureIds.value[r];return r!==-1?sPt(e,n,r):null}function sPt(e,t,r){const n={properties:{...e.properties[t]}};for(const i in e.numericProps)n.properties[i]=e.numericProps[i].value[r];return n}function lPt(e,t){const r={points:null,lines:null,polygons:null};for(const n in r){const i=e[n].globalFeatureIds.value;r[n]=new Uint8ClampedArray(i.length*3);const o=[];for(let a=0;a<i.length;a++)t(i[a],o),r[n][a*3+0]=o[0],r[n][a*3+1]=o[1],r[n][a*3+2]=o[2]}return r}const uPt=`#define SHADER_NAME multi-icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float gamma;
uniform bool sdf;
uniform float alphaCutoff;
uniform float buffer;
uniform float outlineBuffer;
uniform vec4 outlineColor;

varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  if (!picking_uActive) {
    float alpha = texture2D(iconsTexture, vTextureCoords).a;
    vec4 color = vColor;

    // if enable sdf (signed distance fields)
    if (sdf) {
      float distance = alpha;
      alpha = smoothstep(buffer - gamma, buffer + gamma, distance);

      if (outlineBuffer > 0.0) {
        float inFill = alpha;
        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);
        color = mix(outlineColor, vColor, inFill);
        alpha = inBorder;
      }
    }

    // Take the global opacity and the alpha from color into account for the alpha component
    float a = alpha * color.a;
    
    if (a < alphaCutoff) {
      discard;
    }

    gl_FragColor = vec4(color.rgb, a * opacity);
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,TI=192/256,PI=[],cPt={getIconOffsets:{type:"accessor",value:e=>e.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}};class Ck extends K0{constructor(...t){super(...t),E(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:uPt}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(r,{index:n,target:i})=>this.encodePickingColor(n,i)}})}updateState(t){super.updateState(t);const{props:r,oldProps:n}=t;let{outlineColor:i}=r;i!==n.outlineColor&&(i=i.map(o=>o/255),i[3]=Number.isFinite(i[3])?i[3]:1,this.setState({outlineColor:i})),!r.sdf&&r.outlineWidth&&Wt.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(t){const{sdf:r,smoothing:n,outlineWidth:i}=this.props,{outlineColor:o}=this.state;t.uniforms={...t.uniforms,buffer:TI,outlineBuffer:i?Math.max(n,TI*(1-i)):-1,gamma:n,sdf:Boolean(r),outlineColor:o},super.draw(t)}getInstanceOffset(t){return t?Array.from(t).flatMap(r=>super.getInstanceOffset(r)):PI}getInstanceColorMode(t){return 1}getInstanceIconFrame(t){return t?Array.from(t).flatMap(r=>super.getInstanceIconFrame(r)):PI}}E(Ck,"defaultProps",cPt);E(Ck,"layerName","MultiIconLayer");var Mk={exports:{}};Mk.exports=J0;Mk.exports.default=J0;var Uc=1e20;function J0(e,t,r,n,i,o){this.fontSize=e||24,this.buffer=t===void 0?3:t,this.cutoff=n||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=r||8;var a=this.size=this.fontSize+this.buffer*2,s=a+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function fPt(e,t,r,n,i,o,a){o.fill(Uc,0,t*r),a.fill(0,0,t*r);for(var s=(t-n)/2,l=0;l<i;l++)for(var u=0;u<n;u++){var c=(l+s)*t+u+s,f=e.data[4*(l*n+u)+3]/255;if(f===1)o[c]=0,a[c]=Uc;else if(f===0)o[c]=Uc,a[c]=0;else{var h=Math.max(0,.5-f),d=Math.max(0,f-.5);o[c]=h*h,a[c]=d*d}}}function hPt(e,t,r,n,i,o,a){for(var s=0;s<t*r;s++){var l=Math.sqrt(n[s])-Math.sqrt(i[s]);e[s]=Math.round(255-255*(l/o+a))}}J0.prototype._draw=function(e,t){var r=this.ctx.measureText(e),n=r.width,i=2*this.buffer,o,a,s,l,u,c,f,h;t&&this.useMetrics?(u=Math.floor(r.actualBoundingBoxAscent),h=this.buffer+Math.ceil(r.actualBoundingBoxAscent),c=this.buffer,f=this.buffer,a=Math.min(this.size,Math.ceil(r.actualBoundingBoxRight-r.actualBoundingBoxLeft)),l=Math.min(this.size-c,Math.ceil(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)),o=a+i,s=l+i,this.ctx.textBaseline="alphabetic"):(o=a=this.size,s=l=this.size,u=19*this.fontSize/24,c=f=0,h=this.middle,this.ctx.textBaseline="middle");var d;a&&l&&(this.ctx.clearRect(f,c,a,l),this.ctx.fillText(e,this.buffer,h),d=this.ctx.getImageData(f,c,a,l));var p=new Uint8ClampedArray(o*s);return fPt(d,o,s,a,l,this.gridOuter,this.gridInner),EI(this.gridOuter,o,s,this.f,this.v,this.z),EI(this.gridInner,o,s,this.f,this.v,this.z),hPt(p,o,s,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:p,metrics:{width:a,height:l,sdfWidth:o,sdfHeight:s,top:u,left:0,advance:n}}};J0.prototype.draw=function(e){return this._draw(e,!1).data};J0.prototype.drawWithMetrics=function(e){return this._draw(e,!0)};function EI(e,t,r,n,i,o){for(var a=0;a<t;a++)kI(e,a,t,r,n,i,o);for(var s=0;s<r;s++)kI(e,s*t,1,t,n,i,o)}function kI(e,t,r,n,i,o,a){var s,l,u,c;for(o[0]=0,a[0]=-Uc,a[1]=Uc,s=0;s<n;s++)i[s]=e[t+s*r];for(s=1,l=0,u=0;s<n;s++){do c=o[l],u=(i[s]-i[c]+s*s-c*c)/(s-c)/2;while(u<=a[l]&&--l>-1);l++,o[l]=s,a[l]=u,a[l+1]=Uc}for(s=0,l=0;s<n;s++){for(;a[l+1]<s;)l++;c=o[l],e[t+s*r]=i[c]+(s-c)*(s-c)}}const dPt=32,pPt=[];function vPt(e){return Math.pow(2,Math.ceil(Math.log2(e)))}function gPt({characterSet:e,getFontWidth:t,fontHeight:r,buffer:n,maxCanvasWidth:i,mapping:o={},xOffset:a=0,yOffset:s=0}){let l=0,u=a;for(const f of e)if(!o[f]){const h=t(f);u+h+n*2>i&&(u=0,l++),o[f]={x:u+n,y:s+l*(r+n*2)+n,width:h,height:r},u+=h+n*2}const c=r+n*2;return{mapping:o,xOffset:u,yOffset:s+l*c,canvasHeight:vPt(s+(l+1)*c)}}function OV(e,t,r,n){let i=0;for(let a=t;a<r;a++){var o;const s=e[a];i+=((o=n[s])===null||o===void 0?void 0:o.width)||0}return i}function RV(e,t,r,n,i,o){let a=t,s=0;for(let l=t;l<r;l++){const u=OV(e,l,l+1,i);s+u>n&&(a<l&&o.push(l),a=l,s=0),s+=u}return s}function mPt(e,t,r,n,i,o){let a=t,s=t,l=t,u=0;for(let c=t;c<r;c++)if((e[c]===" "||e[c+1]===" "||c+1===r)&&(l=c+1),l>s){let f=OV(e,s,l,i);u+f>n&&(a<s&&(o.push(s),a=s,u=0),f>n&&(f=RV(e,s,l,n,i,o),a=o[o.length-1])),s=l,u+=f}return u}function _Pt(e,t,r,n,i=0,o){o===void 0&&(o=e.length);const a=[];return t==="break-all"?RV(e,i,o,r,n,a):mPt(e,i,o,r,n,a),a}function yPt(e,t,r,n,i,o){let a=0,s=0;for(let l=t;l<r;l++){const u=e[l],c=n[u];c?(s||(s=c.height),i[l]=a+c.width/2,a+=c.width):(Wt.warn("Missing character: ".concat(u," (").concat(u.codePointAt(0),")"))(),i[l]=a,a+=dPt)}o[0]=a,o[1]=s}function AI(e,t,r,n,i){const o=Array.from(e),a=o.length,s=new Array(a),l=new Array(a),u=new Array(a),c=(r==="break-word"||r==="break-all")&&isFinite(n)&&n>0,f=[0,0],h=[0,0];let d=0,p=0,v=0;for(let g=0;g<=a;g++){const m=o[g];if((m===`
`||g===a)&&(v=g),v>p){const _=c?_Pt(o,r,n,i,p,v):pPt;for(let y=0;y<=_.length;y++){const w=y===0?p:_[y-1],T=y<_.length?_[y]:v;yPt(o,w,T,i,s,h);for(let S=w;S<T;S++)l[S]=d+h[1]/2,u[S]=h[0];d=d+h[1]*t,f[0]=Math.max(f[0],h[0])}p=v}m===`
`&&(s[p]=0,l[p]=0,u[p]=0,p++)}return f[1]=d,{x:s,y:l,rowWidth:u,size:f}}function bPt({value:e,length:t,stride:r,offset:n,startIndices:i,characterSet:o}){const a=e.BYTES_PER_ELEMENT,s=r?r/a:1,l=n?n/a:0,u=i[t]||Math.ceil((e.length-l)/s),c=o&&new Set,f=new Array(t);let h=e;if(s>1||l>0){const d=e.constructor;h=new d(u);for(let p=0;p<u;p++)h[p]=e[p*s+l]}for(let d=0;d<t;d++){const p=i[d],v=i[d+1]||u,g=h.subarray(p,v);f[d]=String.fromCodePoint.apply(null,g),c&&g.forEach(c.add,c)}if(c)for(const d of c)o.add(String.fromCodePoint(d));return{texts:f,characterCount:u}}class DV{constructor(t=5){E(this,"limit",void 0),E(this,"_cache",{}),E(this,"_order",[]),this.limit=t}get(t){const r=this._cache[t];return r&&(this._deleteOrder(t),this._appendOrder(t)),r}set(t,r){this._cache[t]?(this.delete(t),this._cache[t]=r,this._appendOrder(t)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[t]=r,this._appendOrder(t))}delete(t){this._cache[t]&&(delete this._cache[t],this._deleteOrder(t))}_deleteOrder(t){const r=this._order.indexOf(t);r>=0&&this._order.splice(r,1)}_appendOrder(t){this._order.push(t)}}function wPt(){const e=[];for(let t=32;t<128;t++)e.push(String.fromCharCode(t));return e}const Dd={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:wPt(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1},CI=1024,SPt=.9,MI=1.2,NV=3;let m1=new DV(NV);function TPt(e,t){let r;typeof t=="string"?r=new Set(Array.from(t)):r=new Set(t);const n=m1.get(e);if(!n)return r;for(const i in n.mapping)r.has(i)&&r.delete(i);return r}function PPt(e,t){for(let r=0;r<e.length;r++)t.data[4*r+3]=e[r]}function xI(e,t,r,n){e.font="".concat(n," ").concat(r,"px ").concat(t),e.fillStyle="#000",e.textBaseline="alphabetic",e.textAlign="left"}function EPt(e){Wt.assert(Number.isFinite(e)&&e>=NV,"Invalid cache limit"),m1=new DV(e)}class kPt{constructor(){E(this,"props",{...Dd}),E(this,"_key",void 0),E(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){return MI}setProps(t={}){Object.assign(this.props,t);const r=this._key;this._key=this._getKey();const n=TPt(this._key,this.props.characterSet),i=m1.get(this._key);if(i&&n.size===0){this._key!==r&&(this._atlas=i);return}const o=this._generateFontAtlas(this._key,n,i);this._atlas=o,m1.set(this._key,o)}_generateFontAtlas(t,r,n){const{fontFamily:i,fontWeight:o,fontSize:a,buffer:s,sdf:l,radius:u,cutoff:c}=this.props;let f=n&&n.data;f||(f=document.createElement("canvas"),f.width=CI);const h=f.getContext("2d");xI(h,i,a,o);const{mapping:d,canvasHeight:p,xOffset:v,yOffset:g}=gPt({getFontWidth:m=>h.measureText(m).width,fontHeight:a*MI,buffer:s,characterSet:r,maxCanvasWidth:CI,...n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset}});if(f.height!==p){const m=h.getImageData(0,0,f.width,f.height);f.height=p,h.putImageData(m,0,0)}if(xI(h,i,a,o),l){const m=new Mk.exports(a,s,u,c,i,o),_=h.getImageData(0,0,m.size,m.size);for(const y of r)PPt(m.draw(y),_),h.putImageData(_,d[y].x-s,d[y].y+s)}else for(const m of r)h.fillText(m,d[m].x,d[m].y+a*SPt);return{xOffset:v,yOffset:g,mapping:d,data:f,width:f.width,height:f.height}}_getKey(){const{fontFamily:t,fontWeight:r,fontSize:n,buffer:i,sdf:o,radius:a,cutoff:s}=this.props;return o?"".concat(t," ").concat(r," ").concat(n," ").concat(i," ").concat(a," ").concat(s):"".concat(t," ").concat(r," ").concat(n," ").concat(i)}}const APt=`#define SHADER_NAME text-background-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute vec4 instanceRects;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec2 instancePixelOffsets;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform bool billboard;
uniform float opacity;
uniform float sizeScale;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform vec4 padding;
uniform int sizeUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = radians(angle);
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;
  vLineWidth = instanceLineWidths;

  // convert size in meters to pixels, then scaled and clamp

  // project meters to pixels and clamp to limits
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),
    sizeMinPixels, sizeMaxPixels
  );

  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;

  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);
  pixelOffset += instancePixelOffsets;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Apply opacity to instance color, or return instance picking color
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,CPt=`#define SHADER_NAME text-background-layer-fragment-shader

precision highp float;

uniform bool stroked;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

void main(void) {
  geometry.uv = uv;

  vec2 pixelPosition = uv * dimensions;
  if (stroked) {
    float distToEdge = min(
      min(pixelPosition.x, dimensions.x - pixelPosition.x),
      min(pixelPosition.y, dimensions.y - pixelPosition.y)
    );
    float isBorder = smoothedge(distToEdge, vLineWidth);
    gl_FragColor = mix(vFillColor, vLineColor, isBorder);
  } else {
    gl_FragColor = vFillColor;
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,MPt={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:e=>e.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class xk extends No{constructor(...t){super(...t),E(this,"state",void 0)}getShaders(){return super.getShaders({vs:APt,fs:CPt,modules:[wu,Su]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){super.updateState(t);const{changeFlags:r}=t;if(r.extensionsChanged){var n;const{gl:i}=this.context;(n=this.state.model)===null||n===void 0||n.delete(),this.state.model=this._getModel(i),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{billboard:r,sizeScale:n,sizeUnits:i,sizeMinPixels:o,sizeMaxPixels:a,getLineWidth:s}=this.props;let{padding:l}=this.props;l.length<4&&(l=[l[0],l[1],l[0],l[1]]),this.state.model.setUniforms(t).setUniforms({billboard:r,stroked:Boolean(s),padding:l,sizeUnits:Ds[i],sizeScale:n,sizeMinPixels:o,sizeMaxPixels:a}).draw()}_getModel(t){const r=[0,0,1,0,1,1,0,1];return new wa(t,{...this.getShaders(),id:this.props.id,geometry:new bu({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array(r)}}}),isInstanced:!0})}}E(xk,"defaultProps",MPt);E(xk,"layerName","TextBackgroundLayer");const LI={start:1,middle:0,end:-1},II={top:1,center:0,bottom:-1},Db=[0,0,0,255],xPt=1,LPt={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:Db},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:Dd.characterSet},fontFamily:Dd.fontFamily,fontWeight:Dd.fontWeight,lineHeight:xPt,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:Db},fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:e=>e.text},getPosition:{type:"accessor",value:e=>e.position},getColor:{type:"accessor",value:Db},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class Lk extends R_{constructor(...t){super(...t),E(this,"state",void 0),E(this,"getBoundingRect",(r,n)=>{const i=this.state.fontAtlasManager.mapping,o=this.state.getText,{wordBreak:a,maxWidth:s,lineHeight:l,getTextAnchor:u,getAlignmentBaseline:c}=this.props,f=o(r,n)||"",{size:[h,d]}=AI(f,l,a,s,i),p=LI[typeof u=="function"?u(r,n):u],v=II[typeof c=="function"?c(r,n):c];return[(p-1)*h/2,(v-1)*d/2,h,d]}),E(this,"getIconOffsets",(r,n)=>{const i=this.state.fontAtlasManager.mapping,o=this.state.getText,{wordBreak:a,maxWidth:s,lineHeight:l,getTextAnchor:u,getAlignmentBaseline:c}=this.props,f=o(r,n)||"",{x:h,y:d,rowWidth:p,size:[v,g]}=AI(f,l,a,s,i),m=LI[typeof u=="function"?u(r,n):u],_=II[typeof c=="function"?c(r,n):c],y=h.length,w=new Array(y*2);let T=0;for(let S=0;S<y;S++){const P=(1-m)*(v-p[S])/2;w[T++]=(m-1)*v/2+P+h[S],w[T++]=(_-1)*g/2+d[S]}return w})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new kPt}}updateState(t){const{props:r,oldProps:n,changeFlags:i}=t;(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||r.lineHeight!==n.lineHeight||r.wordBreak!==n.wordBreak||r.maxWidth!==n.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:t}){return t.object=t.index>=0?this.props.data[t.index]:null,t}_updateFontAtlas(){const{fontSettings:t,fontFamily:r,fontWeight:n}=this.props,{fontAtlasManager:i,characterSet:o}=this.state,a={...t,characterSet:o,fontFamily:r,fontWeight:n};if(!i.mapping)return i.setProps(a),!0;for(const s in a)if(a[s]!==i.props[s])return i.setProps(a),!0;return!1}_updateText(){var t;const{data:r,characterSet:n}=this.props,i=(t=r.attributes)===null||t===void 0?void 0:t.getText;let{getText:o}=this.props,a=r.startIndices,s;const l=n==="auto"&&new Set;if(i&&a){const{texts:u,characterCount:c}=bPt({...ArrayBuffer.isView(i)?{value:i}:i,length:r.length,startIndices:a,characterSet:l});s=c,o=(f,{index:h})=>u[h]}else{const{iterable:u,objectInfo:c}=O_(r);a=[0],s=0;for(const f of u){c.index++;const h=Array.from(o(f,c)||"");l&&h.forEach(l.add,l),s+=h.length,a.push(s)}}this.setState({getText:o,startIndices:a,numInstances:s,characterSet:l||n})}renderLayers(){const{startIndices:t,numInstances:r,getText:n,fontAtlasManager:{scale:i,texture:o,mapping:a},styleVersion:s}=this.state,{data:l,_dataDiff:u,getPosition:c,getColor:f,getSize:h,getAngle:d,getPixelOffset:p,getBackgroundColor:v,getBorderColor:g,getBorderWidth:m,backgroundPadding:_,background:y,billboard:w,fontSettings:T,outlineWidth:S,outlineColor:P,sizeScale:A,sizeUnits:k,sizeMinPixels:C,sizeMaxPixels:M,transitions:D,updateTriggers:B}=this.props,V=this.getSubLayerClass("characters",Ck),N=this.getSubLayerClass("background",xk);return[y&&new N({getFillColor:v,getLineColor:g,getLineWidth:m,padding:_,getPosition:c,getSize:h,getAngle:d,getPixelOffset:p,billboard:w,sizeScale:A/this.state.fontAtlasManager.props.fontSize,sizeUnits:k,sizeMinPixels:C,sizeMaxPixels:M,transitions:D&&{getPosition:D.getPosition,getAngle:D.getAngle,getSize:D.getSize,getFillColor:D.getBackgroundColor,getLineColor:D.getBorderColor,getLineWidth:D.getBorderWidth,getPixelOffset:D.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:B.getPosition,getAngle:B.getAngle,getSize:B.getSize,getFillColor:B.getBackgroundColor,getLineColor:B.getBorderColor,getLineWidth:B.getBorderWidth,getPixelOffset:B.getPixelOffset,getBoundingRect:{getText:B.getText,getTextAnchor:B.getTextAnchor,getAlignmentBaseline:B.getAlignmentBaseline,styleVersion:s}}}),{data:l.attributes&&l.attributes.background?{length:l.length,attributes:l.attributes.background}:l,_dataDiff:u,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new V({sdf:T.sdf,smoothing:Number.isFinite(T.smoothing)?T.smoothing:Dd.smoothing,outlineWidth:S,outlineColor:P,iconAtlas:o,iconMapping:a,getPosition:c,getColor:f,getSize:h,getAngle:d,getPixelOffset:p,billboard:w,sizeScale:A*i,sizeUnits:k,sizeMinPixels:C*i,sizeMaxPixels:M*i,transitions:D&&{getPosition:D.getPosition,getAngle:D.getAngle,getColor:D.getColor,getSize:D.getSize,getPixelOffset:D.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:B.getText,getPosition:B.getPosition,getAngle:B.getAngle,getColor:B.getColor,getSize:B.getSize,getPixelOffset:B.getPixelOffset,getIconOffsets:{getText:B.getText,getTextAnchor:B.getTextAnchor,getAlignmentBaseline:B.getAlignmentBaseline,styleVersion:s}}}),{data:l,_dataDiff:u,startIndices:t,numInstances:r,getIconOffsets:this.getIconOffsets,getIcon:n})]}static set fontAtlasCacheLimit(t){EPt(t)}}E(Lk,"defaultProps",LPt);E(Lk,"layerName","TextLayer");const um={circle:{type:Pk,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:K0,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:Lk,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},cm={type:Ek,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},vT={type:Ak,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function kh({type:e,props:t}){const r={};for(const n in t)r[n]=e.defaultProps[t[n]];return r}function Nb(e,t){const{transitions:r,updateTriggers:n}=e.props,i={updateTriggers:{},transitions:r&&{getPosition:r.geometry}};for(const o in t){const a=t[o];let s=e.props[o];o.startsWith("get")&&(s=e.getSubLayerAccessor(s),i.updateTriggers[a]=n[o],r&&(i.transitions[a]=r[o])),i[a]=s}return i}function IPt(e){if(Array.isArray(e))return e;switch(Wt.assert(e.type,"GeoJSON does not have type"),e.type){case"Feature":return[e];case"FeatureCollection":return Wt.assert(Array.isArray(e.features),"GeoJSON does not have features array"),e.features;default:return[{geometry:e}]}}function OI(e,t,r={}){const n={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:i=0,endRow:o=e.length}=r;for(let a=i;a<o;a++){const s=e[a];Wt.assert(s&&s.geometry,"GeoJSON does not have geometry");const{geometry:l}=s;if(l.type==="GeometryCollection"){Wt.assert(Array.isArray(l.geometries),"GeoJSON does not have geometries array");const{geometries:u}=l;for(let c=0;c<u.length;c++){const f=u[c];RI(f,n,t,s,a)}}else RI(l,n,t,s,a)}return n}function RI(e,t,r,n,i){const{type:o,coordinates:a}=e,{pointFeatures:s,lineFeatures:l,polygonFeatures:u,polygonOutlineFeatures:c}=t;if(!RPt(o,a)){Wt.warn("".concat(o," coordinates are malformed"))();return}switch(o){case"Point":s.push(r({geometry:e},n,i));break;case"MultiPoint":a.forEach(f=>{s.push(r({geometry:{type:"Point",coordinates:f}},n,i))});break;case"LineString":l.push(r({geometry:e},n,i));break;case"MultiLineString":a.forEach(f=>{l.push(r({geometry:{type:"LineString",coordinates:f}},n,i))});break;case"Polygon":u.push(r({geometry:e},n,i)),a.forEach(f=>{c.push(r({geometry:{type:"LineString",coordinates:f}},n,i))});break;case"MultiPolygon":a.forEach(f=>{u.push(r({geometry:{type:"Polygon",coordinates:f}},n,i)),f.forEach(h=>{c.push(r({geometry:{type:"LineString",coordinates:h}},n,i))})});break}}const OPt={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function RPt(e,t){let r=OPt[e];for(Wt.assert(r,"Unknown GeoJSON type ".concat(e));t&&--r>0;)t=t[0];return t&&Number.isFinite(t[0])}function FV(){return{points:{},lines:{},polygons:{},polygonsOutline:{}}}function Dv(e){return e.geometry.coordinates}function DPt(e,t){const r=FV(),{pointFeatures:n,lineFeatures:i,polygonFeatures:o,polygonOutlineFeatures:a}=e;return r.points.data=n,r.points._dataDiff=t.pointFeatures&&(()=>t.pointFeatures),r.points.getPosition=Dv,r.lines.data=i,r.lines._dataDiff=t.lineFeatures&&(()=>t.lineFeatures),r.lines.getPath=Dv,r.polygons.data=o,r.polygons._dataDiff=t.polygonFeatures&&(()=>t.polygonFeatures),r.polygons.getPolygon=Dv,r.polygonsOutline.data=a,r.polygonsOutline._dataDiff=t.polygonOutlineFeatures&&(()=>t.polygonOutlineFeatures),r.polygonsOutline.getPath=Dv,r}function NPt(e,t){const r=FV(),{points:n,lines:i,polygons:o}=e,a=lPt(e,t);return r.points.data={length:n.positions.value.length/n.positions.size,attributes:{...n.attributes,getPosition:n.positions,instancePickingColors:{size:3,value:a.points}},properties:n.properties,numericProps:n.numericProps,featureIds:n.featureIds},r.lines.data={length:i.pathIndices.value.length-1,startIndices:i.pathIndices.value,attributes:{...i.attributes,getPath:i.positions,instancePickingColors:{size:3,value:a.lines}},properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},r.lines._pathType="open",r.polygons.data={length:o.polygonIndices.value.length-1,startIndices:o.polygonIndices.value,attributes:{...o.attributes,getPolygon:o.positions,pickingColors:{size:3,value:a.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},r.polygons._normalize=!1,o.triangles&&(r.polygons.data.attributes.indices=o.triangles.value),r.polygonsOutline.data={length:o.primitivePolygonIndices.value.length-1,startIndices:o.primitivePolygonIndices.value,attributes:{...o.attributes,getPath:o.positions,instancePickingColors:{size:3,value:a.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},r.polygonsOutline._pathType="open",r}const FPt=["points","linestrings","polygons"],BPt={...kh(um.circle),...kh(um.icon),...kh(um.text),...kh(cm),...kh(vT),stroked:!0,filled:!0,extruded:!1,wireframe:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:e=>e.properties.icon},getText:{type:"accessor",value:e=>e.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class Ik extends R_{initializeState(){this.state={layerProps:{},features:{}}}updateState({props:t,changeFlags:r}){if(!r.dataChanged)return;const{data:n}=this.props,i=n&&"points"in n&&"polygons"in n&&"lines"in n;this.setState({binary:i}),i?this._updateStateBinary({props:t,changeFlags:r}):this._updateStateJSON({props:t,changeFlags:r})}_updateStateBinary({props:t,changeFlags:r}){const n=NPt(t.data,this.encodePickingColor);this.setState({layerProps:n})}_updateStateJSON({props:t,changeFlags:r}){const n=IPt(t.data),i=this.getSubLayerRow.bind(this);let o={};const a={};if(Array.isArray(r.dataChanged)){const l=this.state.features;for(const u in l)o[u]=l[u].slice(),a[u]=[];for(const u of r.dataChanged){const c=OI(n,i,u);for(const f in l)a[f].push(oPt({data:o[f],getIndex:h=>h.__source.index,dataRange:u,replace:c[f]}))}}else o=OI(n,i);const s=DPt(o,a);this.setState({features:o,featuresDiff:a,layerProps:s})}getPickingInfo(t){const r=super.getPickingInfo(t),{index:n,sourceLayer:i}=r;return r.featureType=FPt.find(o=>i.id.startsWith("".concat(this.id,"-").concat(o,"-"))),n>=0&&i.id.startsWith("".concat(this.id,"-points-text"))&&this.state.binary&&(r.index=this.props.data.points.globalFeatureIds.value[n]),r}_updateAutoHighlight(t){const r="".concat(this.id,"-points-"),n=t.featureType==="points";for(const i of this.getSubLayers())i.id.startsWith(r)===n&&i.updateAutoHighlight(t)}_renderPolygonLayer(){const{extruded:t,wireframe:r}=this.props,{layerProps:n}=this.state,i="polygons-fill",o=this.shouldRenderSubLayer(i,n.polygons.data)&&this.getSubLayerClass(i,vT.type);if(o){const a=Nb(this,vT.props),s=t&&r;return s||delete a.getLineColor,a.updateTriggers.lineColors=s,new o(a,this.getSubLayerProps({id:i,updateTriggers:a.updateTriggers}),n.polygons)}return null}_renderLineLayers(){const{extruded:t,stroked:r}=this.props,{layerProps:n}=this.state,i="polygons-stroke",o="linestrings",a=!t&&r&&this.shouldRenderSubLayer(i,n.polygonsOutline.data)&&this.getSubLayerClass(i,cm.type),s=this.shouldRenderSubLayer(o,n.lines.data)&&this.getSubLayerClass(o,cm.type);if(a||s){const l=Nb(this,cm.props);return[a&&new a(l,this.getSubLayerProps({id:i,updateTriggers:l.updateTriggers}),n.polygonsOutline),s&&new s(l,this.getSubLayerProps({id:o,updateTriggers:l.updateTriggers}),n.lines)]}return null}_renderPointLayers(){const{pointType:t}=this.props,{layerProps:r,binary:n}=this.state;let{highlightedObjectIndex:i}=this.props;!n&&Number.isFinite(i)&&(i=r.points.data.findIndex(s=>s.__source.index===i));const o=new Set(t.split("+")),a=[];for(const s of o){const l="points-".concat(s),u=um[s],c=u&&this.shouldRenderSubLayer(l,r.points.data)&&this.getSubLayerClass(l,u.type);if(c){const f=Nb(this,u.props);let h=r.points;if(s==="text"&&n){const{instancePickingColors:d,...p}=h.data.attributes;h={...h,data:{...h.data,attributes:p}}}a.push(new c(f,this.getSubLayerProps({id:l,updateTriggers:f.updateTriggers,highlightedObjectIndex:i}),h))}}return a}renderLayers(){const{extruded:t}=this.props,r=this._renderPolygonLayer(),n=this._renderLineLayers(),i=this._renderPointLayers();return[!t&&r,n,i,t&&r]}getSubLayerAccessor(t){const{binary:r}=this.state;return!r||typeof t!="function"?super.getSubLayerAccessor(t):(n,i)=>{const{data:o,index:a}=i,s=aPt(o,a);return t(s,i)}}}E(Ik,"layerName","GeoJsonLayer");E(Ik,"defaultProps",BPt);class $Pt{constructor(t){E(this,"index",void 0),E(this,"isVisible",void 0),E(this,"isSelected",void 0),E(this,"parent",void 0),E(this,"children",void 0),E(this,"content",void 0),E(this,"state",void 0),E(this,"layers",void 0),E(this,"id",void 0),E(this,"bbox",void 0),E(this,"zoom",void 0),E(this,"userData",void 0),E(this,"_abortController",void 0),E(this,"_loader",void 0),E(this,"_loaderId",void 0),E(this,"_isLoaded",void 0),E(this,"_isCancelled",void 0),E(this,"_needsReload",void 0),this.index=t,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._loader=void 0,this._abortController=null,this._loaderId=0,this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1}get data(){return this.isLoading&&this._loader?this._loader.then(()=>this.data):this.content}get isLoaded(){return this._isLoaded&&!this._needsReload}get isLoading(){return Boolean(this._loader)&&!this._isCancelled}get needsReload(){return this._needsReload||this._isCancelled}get byteLength(){const t=this.content?this.content.byteLength:0;return Number.isFinite(t)||Wt.error("byteLength not defined in tile data")(),t}async _loadData({getData:t,requestScheduler:r,onLoad:n,onError:i}){const{index:o,id:a,bbox:s,userData:l,zoom:u}=this,c=this._loaderId;this._abortController=new AbortController;const{signal:f}=this._abortController,h=await r.scheduleRequest(this,v=>v.isSelected?1:-1);if(!h){this._isCancelled=!0;return}if(this._isCancelled){h.done();return}let d=null,p;try{d=await t({index:o,id:a,bbox:s,userData:l,zoom:u,signal:f})}catch(v){p=v||!0}finally{h.done()}if(c===this._loaderId){if(this._loader=void 0,this.content=d,this._isCancelled&&!d){this._isLoaded=!1;return}this._isLoaded=!0,this._isCancelled=!1,p?i(p,this):n(this)}}loadData(t){return this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1,this._loaderId++,this._loader=this._loadData(t),this._loader}setNeedsReload(){this.isLoading&&(this.abort(),this._loader=void 0),this._needsReload=!0}abort(){var t;this.isLoaded||(this._isCancelled=!0,(t=this._abortController)===null||t===void 0||t.abort())}}const zr={OUTSIDE:-1,INTERSECTING:0,INSIDE:1},DI=new bt,zPt=new bt;class Ok{constructor(t=[0,0,0],r=[0,0,0],n){E(this,"center",void 0),E(this,"halfDiagonal",void 0),E(this,"minimum",void 0),E(this,"maximum",void 0),n=n||DI.copy(t).add(r).scale(.5),this.center=new bt(n),this.halfDiagonal=new bt(r).subtract(this.center),this.minimum=new bt(t),this.maximum=new bt(r)}clone(){return new Ok(this.minimum,this.maximum,this.center)}equals(t){return this===t||Boolean(t)&&this.minimum.equals(t.minimum)&&this.maximum.equals(t.maximum)}transform(t){return this.center.transformAsPoint(t),this.halfDiagonal.transform(t),this.minimum.transform(t),this.maximum.transform(t),this}intersectPlane(t){const{halfDiagonal:r}=this,n=zPt.from(t.normal),i=r.x*Math.abs(n.x)+r.y*Math.abs(n.y)+r.z*Math.abs(n.z),o=this.center.dot(n)+t.distance;return o-i>0?zr.INSIDE:o+i<0?zr.OUTSIDE:zr.INTERSECTING}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const r=DI.from(t).subtract(this.center),{halfDiagonal:n}=this;let i=0,o;return o=Math.abs(r.x)-n.x,o>0&&(i+=o*o),o=Math.abs(r.y)-n.y,o>0&&(i+=o*o),o=Math.abs(r.z)-n.z,o>0&&(i+=o*o),i}}const Ah=new bt,NI=new bt;class Rk{constructor(t=[0,0,0],r=0){E(this,"center",void 0),E(this,"radius",void 0),this.radius=-0,this.center=new bt,this.fromCenterRadius(t,r)}fromCenterRadius(t,r){return this.center.from(t),this.radius=r,this}fromCornerPoints(t,r){return r=Ah.from(r),this.center=new bt().from(t).add(r).scale(.5),this.radius=this.center.distance(r),this}equals(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.radius===t.radius}clone(){return new Rk(this.center,this.radius)}union(t){const r=this.center,n=this.radius,i=t.center,o=t.radius,a=Ah.copy(i).subtract(r),s=a.magnitude();if(n>=s+o)return this.clone();if(o>=s+n)return t.clone();const l=(n+s+o)*.5;return NI.copy(a).scale((-n+l)/s).add(r),this.center.copy(NI),this.radius=l,this}expand(t){const n=Ah.from(t).subtract(this.center).magnitude();return n>this.radius&&(this.radius=n),this}transform(t){this.center.transform(t);const r=_yt(Ah,t);return this.radius=Math.max(r[0],Math.max(r[1],r[2]))*this.radius,this}distanceSquaredTo(t){const r=this.distanceTo(t);return r*r}distanceTo(t){const n=Ah.from(t).subtract(this.center);return Math.max(0,n.len()-this.radius)}intersectPlane(t){const r=this.center,n=this.radius,o=t.normal.dot(r)+t.distance;return o<-n?zr.OUTSIDE:o<n?zr.INTERSECTING:zr.INSIDE}}const VPt=new bt,UPt=new bt,Nv=new bt,Fv=new bt,Bv=new bt,GPt=new bt,jPt=new bt,Yo={COLUMN0ROW0:0,COLUMN0ROW1:1,COLUMN0ROW2:2,COLUMN1ROW0:3,COLUMN1ROW1:4,COLUMN1ROW2:5,COLUMN2ROW0:6,COLUMN2ROW1:7,COLUMN2ROW2:8};class Dk{constructor(t=[0,0,0],r=[0,0,0,0,0,0,0,0,0]){E(this,"center",void 0),E(this,"halfAxes",void 0),this.center=new bt().from(t),this.halfAxes=new Er(r)}get halfSize(){const t=this.halfAxes.getColumn(0),r=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2);return[new bt(t).len(),new bt(r).len(),new bt(n).len()]}get quaternion(){const t=this.halfAxes.getColumn(0),r=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2),i=new bt(t).normalize(),o=new bt(r).normalize(),a=new bt(n).normalize();return new EL().fromMatrix3(new Er([...i,...o,...a]))}fromCenterHalfSizeQuaternion(t,r,n){const i=new EL(n),o=new Er().fromQuaternion(i);return o[0]=o[0]*r[0],o[1]=o[1]*r[0],o[2]=o[2]*r[0],o[3]=o[3]*r[1],o[4]=o[4]*r[1],o[5]=o[5]*r[1],o[6]=o[6]*r[2],o[7]=o[7]*r[2],o[8]=o[8]*r[2],this.center=new bt().from(t),this.halfAxes=o,this}clone(){return new Dk(this.center,this.halfAxes)}equals(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.halfAxes.equals(t.halfAxes)}getBoundingSphere(t=new Rk){const r=this.halfAxes,n=r.getColumn(0,Nv),i=r.getColumn(1,Fv),o=r.getColumn(2,Bv),a=VPt.copy(n).add(i).add(o);return t.center.copy(this.center),t.radius=a.magnitude(),t}intersectPlane(t){const r=this.center,n=t.normal,i=this.halfAxes,o=n.x,a=n.y,s=n.z,l=Math.abs(o*i[Yo.COLUMN0ROW0]+a*i[Yo.COLUMN0ROW1]+s*i[Yo.COLUMN0ROW2])+Math.abs(o*i[Yo.COLUMN1ROW0]+a*i[Yo.COLUMN1ROW1]+s*i[Yo.COLUMN1ROW2])+Math.abs(o*i[Yo.COLUMN2ROW0]+a*i[Yo.COLUMN2ROW1]+s*i[Yo.COLUMN2ROW2]),u=n.dot(r)+t.distance;return u<=-l?zr.OUTSIDE:u>=l?zr.INSIDE:zr.INTERSECTING}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const r=UPt.from(t).subtract(this.center),n=this.halfAxes,i=n.getColumn(0,Nv),o=n.getColumn(1,Fv),a=n.getColumn(2,Bv),s=i.magnitude(),l=o.magnitude(),u=a.magnitude();i.normalize(),o.normalize(),a.normalize();let c=0,f;return f=Math.abs(r.dot(i))-s,f>0&&(c+=f*f),f=Math.abs(r.dot(o))-l,f>0&&(c+=f*f),f=Math.abs(r.dot(a))-u,f>0&&(c+=f*f),c}computePlaneDistances(t,r,n=[-0,-0]){let i=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;const a=this.center,s=this.halfAxes,l=s.getColumn(0,Nv),u=s.getColumn(1,Fv),c=s.getColumn(2,Bv),f=GPt.copy(l).add(u).add(c).add(a),h=jPt.copy(f).subtract(t);let d=r.dot(h);return i=Math.min(d,i),o=Math.max(d,o),f.copy(a).add(l).add(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),f.copy(a).add(l).subtract(u).add(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),f.copy(a).add(l).subtract(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),a.copy(f).subtract(l).add(u).add(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),a.copy(f).subtract(l).add(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),a.copy(f).subtract(l).subtract(u).add(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),a.copy(f).subtract(l).subtract(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),n[0]=i,n[1]=o,n}transform(t){this.center.transformAsPoint(t);const r=this.halfAxes.getColumn(0,Nv);r.transformAsPoint(t);const n=this.halfAxes.getColumn(1,Fv);n.transformAsPoint(t);const i=this.halfAxes.getColumn(2,Bv);return i.transformAsPoint(t),this.halfAxes=new Er([...r,...n,...i]),this}getTransform(){throw new Error("not implemented")}}const FI=new bt,BI=new bt;class af{constructor(t=[0,0,1],r=0){E(this,"normal",void 0),E(this,"distance",void 0),this.normal=new bt,this.distance=-0,this.fromNormalDistance(t,r)}fromNormalDistance(t,r){return p0(Number.isFinite(r)),this.normal.from(t).normalize(),this.distance=r,this}fromPointNormal(t,r){t=FI.from(t),this.normal.from(r).normalize();const n=-this.normal.dot(t);return this.distance=n,this}fromCoefficients(t,r,n,i){return this.normal.set(t,r,n),p0(Ao(this.normal.len(),1)),this.distance=i,this}clone(){return new af(this.normal,this.distance)}equals(t){return Ao(this.distance,t.distance)&&Ao(this.normal,t.normal)}getPointDistance(t){return this.normal.dot(t)+this.distance}transform(t){const r=BI.copy(this.normal).transformAsVector(t).normalize(),n=this.normal.scale(-this.distance).transform(t);return this.fromPointNormal(n,r)}projectPointOntoPlane(t,r=[0,0,0]){t=FI.from(t);const n=this.getPointDistance(t),i=BI.copy(this.normal).scale(n);return t.subtract(i).to(r)}}const $I=[new bt([1,0,0]),new bt([0,1,0]),new bt([0,0,1])],zI=new bt,WPt=new bt;new af(new bt(1,0,0),0);class ua{constructor(t=[]){E(this,"planes",void 0),this.planes=t}fromBoundingSphere(t){this.planes.length=2*$I.length;const r=t.center,n=t.radius;let i=0;for(const o of $I){let a=this.planes[i],s=this.planes[i+1];a||(a=this.planes[i]=new af),s||(s=this.planes[i+1]=new af);const l=zI.copy(o).scale(-n).add(r);-o.dot(l),a.fromPointNormal(l,o);const u=zI.copy(o).scale(n).add(r),c=WPt.copy(o).negate();-c.dot(u),s.fromPointNormal(u,c),i+=2}return this}computeVisibility(t){let r=zr.INSIDE;for(const n of this.planes)switch(t.intersectPlane(n)){case zr.OUTSIDE:return zr.OUTSIDE;case zr.INTERSECTING:r=zr.INTERSECTING;break}return r}computeVisibilityWithPlaneMask(t,r){if(p0(Number.isFinite(r),"parentPlaneMask is required."),r===ua.MASK_OUTSIDE||r===ua.MASK_INSIDE)return r;let n=ua.MASK_INSIDE;const i=this.planes;for(let o=0;o<this.planes.length;++o){const a=o<31?1<<o:0;if(o<31&&(r&a)===0)continue;const s=i[o],l=t.intersectPlane(s);if(l===zr.OUTSIDE)return ua.MASK_OUTSIDE;l===zr.INTERSECTING&&(n|=a)}return n}}E(ua,"MASK_OUTSIDE",4294967295);E(ua,"MASK_INSIDE",0);E(ua,"MASK_INDETERMINATE",2147483647);new bt;new bt;new bt;new bt;new bt;new bt;new bt;new bt;new bt;new bt;new bt;new bt;new bt;new bt;new bt;new bt;new bt;const go=new Er,HPt=new Er,XPt=new Er,$v=new Er,VI=new Er;function YPt(e,t={}){const r=Nz.EPSILON20,n=10;let i=0,o=0;const a=HPt,s=XPt;a.identity(),s.copy(e);const l=r*qPt(s);for(;o<n&&ZPt(s)>l;)KPt(s,$v),VI.copy($v).transpose(),s.multiplyRight($v),s.multiplyLeft(VI),a.multiplyRight($v),++i>2&&(++o,i=0);return t.unitary=a.toTarget(t.unitary),t.diagonal=s.toTarget(t.diagonal),t}function qPt(e){let t=0;for(let r=0;r<9;++r){const n=e[r];t+=n*n}return Math.sqrt(t)}const gT=[1,0,0],mT=[2,2,1];function ZPt(e){let t=0;for(let r=0;r<3;++r){const n=e[go.getElementIndex(mT[r],gT[r])];t+=2*n*n}return Math.sqrt(t)}function KPt(e,t){const r=Nz.EPSILON15;let n=0,i=1;for(let u=0;u<3;++u){const c=Math.abs(e[go.getElementIndex(mT[u],gT[u])]);c>n&&(i=u,n=c)}const o=gT[i],a=mT[i];let s=1,l=0;if(Math.abs(e[go.getElementIndex(a,o)])>r){const u=e[go.getElementIndex(a,a)],c=e[go.getElementIndex(o,o)],f=e[go.getElementIndex(a,o)],h=(u-c)/2/f;let d;h<0?d=-1/(-h+Math.sqrt(1+h*h)):d=1/(h+Math.sqrt(1+h*h)),s=1/Math.sqrt(1+d*d),l=d*s}return Er.IDENTITY.to(t),t[go.getElementIndex(o,o)]=t[go.getElementIndex(a,a)]=s,t[go.getElementIndex(a,o)]=l,t[go.getElementIndex(o,a)]=-l,t}const qa=new bt,JPt=new bt,QPt=new bt,tEt=new bt,eEt=new bt,rEt=new Er,nEt={diagonal:new Er,unitary:new Er};function iEt(e,t=new Dk){if(!e||e.length===0)return t.halfAxes=new Er([0,0,0,0,0,0,0,0,0]),t.center=new bt,t;const r=e.length,n=new bt(0,0,0);for(const k of e)n.add(k);const i=1/r;n.multiplyByScalar(i);let o=0,a=0,s=0,l=0,u=0,c=0;for(const k of e){const C=qa.copy(k).subtract(n);o+=C.x*C.x,a+=C.x*C.y,s+=C.x*C.z,l+=C.y*C.y,u+=C.y*C.z,c+=C.z*C.z}o*=i,a*=i,s*=i,l*=i,u*=i,c*=i;const f=rEt;f[0]=o,f[1]=a,f[2]=s,f[3]=a,f[4]=l,f[5]=u,f[6]=s,f[7]=u,f[8]=c;const{unitary:h}=YPt(f,nEt),d=t.halfAxes.copy(h);let p=d.getColumn(0,QPt),v=d.getColumn(1,tEt),g=d.getColumn(2,eEt),m=-Number.MAX_VALUE,_=-Number.MAX_VALUE,y=-Number.MAX_VALUE,w=Number.MAX_VALUE,T=Number.MAX_VALUE,S=Number.MAX_VALUE;for(const k of e)qa.copy(k),m=Math.max(qa.dot(p),m),_=Math.max(qa.dot(v),_),y=Math.max(qa.dot(g),y),w=Math.min(qa.dot(p),w),T=Math.min(qa.dot(v),T),S=Math.min(qa.dot(g),S);p=p.multiplyByScalar(.5*(w+m)),v=v.multiplyByScalar(.5*(T+_)),g=g.multiplyByScalar(.5*(S+y)),t.center.copy(p).add(v).add(g);const P=JPt.set(m-w,_-T,y-S).multiplyByScalar(.5),A=new Er([P[0],0,0,0,P[1],0,0,0,P[2]]);return t.halfAxes.multiplyRight(A),t}const Cc=512,UI=3,BV=[[.5,.5],[0,0],[0,1],[1,0],[1,1]],$V=BV.concat([[0,.5],[.5,0],[1,.5],[.5,1]]),oEt=$V.concat([[.25,.5],[.75,.5]]);class Mc{constructor(t,r,n){E(this,"x",void 0),E(this,"y",void 0),E(this,"z",void 0),E(this,"childVisible",void 0),E(this,"selected",void 0),E(this,"_children",void 0),this.x=t,this.y=r,this.z=n}get children(){if(!this._children){const t=this.x*2,r=this.y*2,n=this.z+1;this._children=[new Mc(t,r,n),new Mc(t,r+1,n),new Mc(t+1,r,n),new Mc(t+1,r+1,n)]}return this._children}update(t){const{viewport:r,cullingVolume:n,elevationBounds:i,minZ:o,maxZ:a,bounds:s,offset:l,project:u}=t,c=this.getBoundingVolume(i,l,u);if(s&&!this.insideBounds(s)||n.computeVisibility(c)<0)return!1;if(!this.childVisible){let{z:h}=this;if(h<a&&h>=o){const d=c.distanceTo(r.cameraPosition)*r.scale/r.height;h+=Math.floor(Math.log2(d))}if(h>=a)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;for(const h of this.children)h.update(t);return!0}getSelected(t=[]){if(this.selected&&t.push(this),this._children)for(const r of this._children)r.getSelected(t);return t}insideBounds([t,r,n,i]){const o=Math.pow(2,this.z),a=Cc/o;return this.x*a<n&&this.y*a<i&&(this.x+1)*a>t&&(this.y+1)*a>r}getBoundingVolume(t,r,n){if(n){const l=this.z<1?oEt:this.z<2?$V:BV,u=[];for(const c of l){const f=_T(this.x+c[0],this.y+c[1],this.z);f[2]=t[0],u.push(n(f)),t[0]!==t[1]&&(f[2]=t[1],u.push(n(f)))}return iEt(u)}const i=Math.pow(2,this.z),o=Cc/i,a=this.x*o+r*Cc,s=Cc-(this.y+1)*o;return new Ok([a,s,t[0]],[a+o,s+o,t[1]])}}function aEt(e,t,r,n){const i=e instanceof B3t&&e.resolution?e.projectPosition:null,o=Object.values(e.getFrustumPlanes()).map(({normal:d,distance:p})=>new af(d.clone().negate(),p)),a=new ua(o),s=e.distanceScales.unitsPerMeter[2],l=r&&r[0]*s||0,u=r&&r[1]*s||0,c=e instanceof Io&&e.pitch<=60?t:0;if(n){const[d,p,v,g]=n,m=Ns([d,g]),_=Ns([v,p]);n=[m[0],Cc-m[1],_[0],Cc-_[1]]}const f=new Mc(0,0,0),h={viewport:e,project:i,cullingVolume:a,elevationBounds:[l,u],minZ:c,maxZ:t,bounds:n,offset:0};if(f.update(h),e instanceof Io&&e.subViewports&&e.subViewports.length>1){for(h.offset=-1;f.update(h)&&!(--h.offset<-UI););for(h.offset=1;f.update(h)&&!(++h.offset>UI););}return f.getSelected()}const Ta=512,sEt=[-1/0,-1/0,1/0,1/0],lEt={type:"url",value:null,validate:(e,t)=>t.optional&&e===null||typeof e=="string"||Array.isArray(e)&&e.every(r=>typeof r=="string"),equals:(e,t)=>{if(e===t)return!0;if(!Array.isArray(e)||!Array.isArray(t))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}};function zV(e,t){const r=[t.transformAsPoint([e[0],e[1]]),t.transformAsPoint([e[2],e[1]]),t.transformAsPoint([e[0],e[3]]),t.transformAsPoint([e[2],e[3]])];return[Math.min(...r.map(i=>i[0])),Math.min(...r.map(i=>i[1])),Math.max(...r.map(i=>i[0])),Math.max(...r.map(i=>i[1]))]}function uEt(e){return Math.abs(e.split("").reduce((t,r)=>(t<<5)-t+r.charCodeAt(0)|0,0))}function cEt(e,t){if(!e||!e.length)return null;const{index:r,id:n}=t;if(Array.isArray(e)){const o=uEt(n)%e.length;e=e[o]}let i=e;for(const o of Object.keys(r)){const a=new RegExp("{".concat(o,"}"),"g");i=i.replace(a,String(r[o]))}return Number.isInteger(r.y)&&Number.isInteger(r.z)&&(i=i.replace(/\{-y\}/g,String(Math.pow(2,r.z)-r.y-1))),i}function fEt(e,t,r){let n;if(t&&t.length===2){const[i,o]=t,a=e.getBounds({z:i}),s=e.getBounds({z:o});n=[Math.min(a[0],s[0]),Math.min(a[1],s[1]),Math.max(a[2],s[2]),Math.max(a[3],s[3])]}else n=e.getBounds();return e.isGeospatial?[Math.max(n[0],r[0]),Math.max(n[1],r[1]),Math.min(n[2],r[2]),Math.min(n[3],r[3])]:[Math.max(Math.min(n[0],r[2]),r[0]),Math.max(Math.min(n[1],r[3]),r[1]),Math.min(Math.max(n[2],r[0]),r[2]),Math.min(Math.max(n[3],r[1]),r[3])]}function _1({viewport:e,z:t,cullRect:r}){const n=r.x-e.x,i=r.y-e.y,{width:o,height:a}=r;if(!Array.isArray(t)){const u={targetZ:t||0},c=e.unproject([n,i],u),f=e.unproject([n+o,i],u),h=e.unproject([n,i+a],u),d=e.unproject([n+o,i+a],u);return[Math.min(c[0],f[0],h[0],d[0]),Math.min(c[1],f[1],h[1],d[1]),Math.max(c[0],f[0],h[0],d[0]),Math.max(c[1],f[1],h[1],d[1])]}const s=_1({viewport:e,z:t[0],cullRect:r}),l=_1({viewport:e,z:t[1],cullRect:r});return[Math.min(s[0],l[0]),Math.min(s[1],l[1]),Math.max(s[2],l[2]),Math.max(s[3],l[3])]}function hEt(e,t,r){return r?zV(e,r).map(i=>i*t/Ta):e.map(n=>n*t/Ta)}function Nk(e,t){return Math.pow(2,e)*Ta/t}function _T(e,t,r){const n=Nk(r,Ta),i=e/n*360-180,o=Math.PI-2*Math.PI*t/n,a=180/Math.PI*Math.atan(.5*(Math.exp(o)-Math.exp(-o)));return[i,a]}function GI(e,t,r,n){const i=Nk(r,n);return[e/i*Ta,t/i*Ta]}function dEt(e,t,r,n,i=Ta){if(e.isGeospatial){const[u,c]=_T(t,r,n),[f,h]=_T(t+1,r+1,n);return{west:u,north:c,east:f,south:h}}const[o,a]=GI(t,r,n,i),[s,l]=GI(t+1,r+1,n,i);return{left:o,top:a,right:s,bottom:l}}function pEt(e,t,r,n,i){const o=fEt(e,null,n),a=Nk(t,r),[s,l,u,c]=hEt(o,a,i),f=[];for(let h=Math.floor(s);h<u;h++)for(let d=Math.floor(l);d<c;d++)f.push({x:h,y:d,z:t});return f}function vEt({viewport:e,maxZoom:t,minZoom:r,zRange:n,extent:i,tileSize:o=Ta,modelMatrix:a,modelMatrixInverse:s,zoomOffset:l=0}){let u=e.isGeospatial?Math.round(e.zoom+Math.log2(Ta/o))+l:Math.ceil(e.zoom)+l;if(typeof r=="number"&&Number.isFinite(r)&&u<r){if(!i)return[];u=r}typeof t=="number"&&Number.isFinite(t)&&u>t&&(u=t);let c=i;return a&&s&&i&&!e.isGeospatial&&(c=zV(i,a)),e.isGeospatial?aEt(e,u,n,i):pEt(e,u,o,c||sEt,s)}const jI=1,F_=2,gEt="never",mEt="no-overlap",Fk="best-available",_Et=5,yEt={[Fk]:wEt,[mEt]:SEt,[gEt]:()=>{}};class bEt{constructor(t){E(this,"opts",void 0),E(this,"_requestScheduler",void 0),E(this,"_cache",void 0),E(this,"_dirty",void 0),E(this,"_tiles",void 0),E(this,"_cacheByteSize",void 0),E(this,"_viewport",void 0),E(this,"_zRange",void 0),E(this,"_selectedTiles",void 0),E(this,"_frameNumber",void 0),E(this,"_modelMatrix",void 0),E(this,"_modelMatrixInverse",void 0),E(this,"_maxZoom",void 0),E(this,"_minZoom",void 0),E(this,"onTileLoad",void 0),E(this,"_getCullBounds",q0(_1)),this.opts=t,this.onTileLoad=r=>{this.opts.onTileLoad(r),this.opts.maxCacheByteSize&&(this._cacheByteSize+=r.byteLength,this._resizeCache())},this._requestScheduler=new cpt({maxRequests:t.maxRequests,throttleRequests:t.maxRequests>0}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._selectedTiles=null,this._frameNumber=0,this._modelMatrix=new jr,this._modelMatrixInverse=new jr,this.setOptions(t)}get tiles(){return this._tiles}get selectedTiles(){return this._selectedTiles}get isLoaded(){return this._selectedTiles!==null&&this._selectedTiles.every(t=>t.isLoaded)}get needsReload(){return this._selectedTiles!==null&&this._selectedTiles.some(t=>t.needsReload)}setOptions(t){Object.assign(this.opts,t),Number.isFinite(t.maxZoom)&&(this._maxZoom=Math.floor(t.maxZoom)),Number.isFinite(t.minZoom)&&(this._minZoom=Math.ceil(t.minZoom))}finalize(){for(const t of this._cache.values())t.isLoading&&t.abort();this._cache.clear(),this._tiles=[],this._selectedTiles=null}reloadAll(){for(const t of this._cache.keys()){const r=this._cache.get(t);!this._selectedTiles||!this._selectedTiles.includes(r)?this._cache.delete(t):r.setNeedsReload()}}update(t,{zRange:r,modelMatrix:n}={}){const i=new jr(n),o=!i.equals(this._modelMatrix);if(!this._viewport||!t.equals(this._viewport)||!Ao(this._zRange,r)||o){o&&(this._modelMatrixInverse=i.clone().invert(),this._modelMatrix=i),this._viewport=t,this._zRange=r;const s=this.getTileIndices({viewport:t,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:r,modelMatrix:this._modelMatrix,modelMatrixInverse:this._modelMatrixInverse});this._selectedTiles=s.map(l=>this._getTile(l,!0)),this._dirty&&this._rebuildTree()}else this.needsReload&&(this._selectedTiles=this._selectedTiles.map(s=>this._getTile(s.index,!0)));const a=this.updateTileStates();return this._pruneRequests(),this._dirty&&this._resizeCache(),a&&this._frameNumber++,this._frameNumber}isTileVisible(t,r){if(!t.isVisible)return!1;if(r&&this._viewport){const[n,i,o,a]=_1({viewport:this._viewport,z:this._zRange,cullRect:r}),{bbox:s}=t;if("west"in s)return s.west<o&&s.east>n&&s.south<a&&s.north>i;const l=Math.min(s.top,s.bottom),u=Math.max(s.top,s.bottom);return s.left<o&&s.right>n&&l<a&&u>i}return!0}getTileIndices({viewport:t,maxZoom:r,minZoom:n,zRange:i,modelMatrix:o,modelMatrixInverse:a}){const{tileSize:s,extent:l,zoomOffset:u}=this.opts;return vEt({viewport:t,maxZoom:r,minZoom:n,zRange:i,tileSize:s,extent:l,modelMatrix:o,modelMatrixInverse:a,zoomOffset:u})}getTileId(t){return"".concat(t.x,"-").concat(t.y,"-").concat(t.z)}getTileZoom(t){return t.z}getTileMetadata(t){const{tileSize:r}=this.opts;return{bbox:dEt(this._viewport,t.x,t.y,t.z,r)}}getParentIndex(t){const r=Math.floor(t.x/2),n=Math.floor(t.y/2),i=t.z-1;return{x:r,y:n,z:i}}updateTileStates(){const t=this.opts.refinementStrategy||Fk,r=new Array(this._cache.size);let n=0;for(const i of this._cache.values())r[n++]=i.isVisible,i.isSelected=!1,i.isVisible=!1;for(const i of this._selectedTiles)i.isSelected=!0,i.isVisible=!0;(typeof t=="function"?t:yEt[t])(Array.from(this._cache.values())),n=0;for(const i of this._cache.values())if(r[n++]!==i.isVisible)return!0;return!1}_pruneRequests(){const{maxRequests:t}=this.opts,r=[];let n=0;for(const i of this._cache.values())i.isLoading&&(n++,!i.isSelected&&!i.isVisible&&r.push(i));for(;t>0&&n>t&&r.length>0;)r.shift().abort(),n--}_rebuildTree(){const{_cache:t}=this;for(const r of t.values())r.parent=null,r.children&&(r.children.length=0);for(const r of t.values()){const n=this._getNearestAncestor(r);r.parent=n,n!=null&&n.children&&n.children.push(r)}}_resizeCache(){const{_cache:t,opts:r}=this,n=r.maxCacheSize||(r.maxCacheByteSize?1/0:_Et*this.selectedTiles.length),i=r.maxCacheByteSize||1/0;if(t.size>n||this._cacheByteSize>i){for(const[a,s]of t)if(s.isVisible||(this._cacheByteSize-=r.maxCacheByteSize?s.byteLength:0,t.delete(a),this.opts.onTileUnload(s)),t.size<=n&&this._cacheByteSize<=i)break;this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort((a,s)=>a.zoom-s.zoom),this._dirty=!1)}_getTile(t,r){const n=this.getTileId(t);let i=this._cache.get(n),o=!1;return!i&&r?(i=new $Pt(t),Object.assign(i,this.getTileMetadata(i.index)),Object.assign(i,{id:n,zoom:this.getTileZoom(i.index)}),o=!0,this._cache.set(n,i),this._dirty=!0):i&&i.needsReload&&(o=!0),i&&o&&i.loadData({getData:this.opts.getTileData,requestScheduler:this._requestScheduler,onLoad:this.onTileLoad,onError:this.opts.onTileError}),i}_getNearestAncestor(t){const{_minZoom:r=0}=this;let n=t.index;for(;this.getTileZoom(n)>r;){n=this.getParentIndex(n);const i=this._getTile(n);if(i)return i}return null}}function wEt(e){for(const t of e)t.state=0;for(const t of e)t.isSelected&&!VV(t)&&Bk(t);for(const t of e)t.isVisible=Boolean(t.state&F_)}function SEt(e){for(const r of e)r.state=0;for(const r of e)r.isSelected&&VV(r);const t=Array.from(e).sort((r,n)=>r.zoom-n.zoom);for(const r of t)if(r.isVisible=Boolean(r.state&F_),r.children&&(r.isVisible||r.state&jI))for(const n of r.children)n.state=jI;else r.isSelected&&Bk(r)}function VV(e){let t=e;for(;t;){if(t.isLoaded||t.content)return t.state|=F_,!0;t=t.parent}return!1}function Bk(e){for(const t of e.children)t.isLoaded||t.content?t.state|=F_:Bk(t)}const TEt={TilesetClass:bEt,data:{type:"data",value:[]},dataComparator:lEt.equals,renderSubLayers:{type:"function",value:e=>new Ik(e),compare:!1},getTileData:{type:"function",optional:!0,value:null,compare:!1},onViewportLoad:{type:"function",optional:!0,value:null,compare:!1},onTileLoad:{type:"function",value:e=>{},compare:!1},onTileUnload:{type:"function",value:e=>{},compare:!1},onTileError:{type:"function",value:e=>console.error(e),compare:!1},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:Fk,zRange:null,maxRequests:6,zoomOffset:0};class $k extends R_{initializeState(){this.state={tileset:null,isLoaded:!1}}finalizeState(){var t,r;(t=this.state)===null||t===void 0||(r=t.tileset)===null||r===void 0||r.finalize()}get isLoaded(){var t,r;return(t=this.state)===null||t===void 0||(r=t.tileset)===null||r===void 0?void 0:r.selectedTiles.every(n=>n.isLoaded&&n.layers&&n.layers.every(i=>i.isLoaded))}shouldUpdateState({changeFlags:t}){return t.somethingChanged}updateState({changeFlags:t}){let{tileset:r}=this.state;const n=t.propsOrDataChanged||t.updateTriggersChanged,i=t.dataChanged||t.updateTriggersChanged&&(t.updateTriggersChanged.all||t.updateTriggersChanged.getTileData);r?n&&(r.setOptions(this._getTilesetOptions()),i?r.reloadAll():this.state.tileset.tiles.forEach(o=>{o.layers=null})):(r=new this.props.TilesetClass(this._getTilesetOptions()),this.setState({tileset:r})),this._updateTileset()}_getTilesetOptions(){const{tileSize:t,maxCacheSize:r,maxCacheByteSize:n,refinementStrategy:i,extent:o,maxZoom:a,minZoom:s,maxRequests:l,zoomOffset:u}=this.props;return{maxCacheSize:r,maxCacheByteSize:n,maxZoom:a,minZoom:s,tileSize:t,refinementStrategy:i,extent:o,maxRequests:l,zoomOffset:u,getTileData:this.getTileData.bind(this),onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),onTileUnload:this._onTileUnload.bind(this)}}_updateTileset(){const{tileset:t}=this.state,{zRange:r,modelMatrix:n}=this.props,i=t.update(this.context.viewport,{zRange:r,modelMatrix:n}),{isLoaded:o}=t,a=this.state.isLoaded!==o,s=this.state.frameNumber!==i;o&&(a||s)&&this._onViewportLoad(),s&&this.setState({frameNumber:i}),this.state.isLoaded=o}_onViewportLoad(){const{tileset:t}=this.state,{onViewportLoad:r}=this.props;r&&r(t.selectedTiles)}_onTileLoad(t){this.props.onTileLoad(t),t.layers=null,this.setNeedsUpdate()}_onTileError(t,r){this.props.onTileError(t),r.layers=null,this.setNeedsUpdate()}_onTileUnload(t){this.props.onTileUnload(t)}getTileData(t){const{data:r,getTileData:n,fetch:i}=this.props,{signal:o}=t;return t.url=typeof r=="string"||Array.isArray(r)?cEt(r,t):null,n?n(t):i&&t.url?i(t.url,{propName:"data",layer:this,signal:o}):null}renderSubLayers(t){return this.props.renderSubLayers(t)}getSubLayerPropsByTile(t){return null}getPickingInfo({info:t,sourceLayer:r}){return t.tile=r.props.tile,t}_updateAutoHighlight(t){t.sourceLayer&&t.sourceLayer.updateAutoHighlight(t)}renderLayers(){return this.state.tileset.tiles.map(t=>{const r=this.getSubLayerPropsByTile(t);if(!(!t.isLoaded&&!t.content))if(t.layers)r&&t.layers[0]&&Object.keys(r).some(n=>t.layers[0].props[n]!==r[n])&&(t.layers=t.layers.map(n=>n.clone(r)));else{const n=this.renderSubLayers({...this.props,id:"".concat(this.id,"-").concat(t.id),data:t.content,_offset:0,tile:t});t.layers=x_(n,Boolean).map(i=>i.clone({tile:t,...r}))}return t.layers})}filterSubLayer({layer:t,cullRect:r}){const{tile:n}=t.props;return this.state.tileset.isTileVisible(n,r)}}E($k,"defaultProps",TEt);E($k,"layerName","TileLayer");var Tu={};Object.defineProperty(Tu,"__esModule",{value:!0});Tu.calcRdx=kEt;Tu.isFunction=CEt;var PEt=Tu.isNumber=MEt;Tu.toVector=xEt;Tu.isArray=void 0;var EEt=Array.prototype.concat,UV=Object.prototype.toString;function kEt(e,t){var r=e>t?e:t;return Math.pow(10,17-~~(Math.log(r>0?r:-r)*Math.LOG10E))}var AEt=Array.isArray||function(t){return UV.call(t)==="[object Array]"};Tu.isArray=AEt;function CEt(e){return UV.call(e)==="[object Function]"}function MEt(e){return typeof e=="number"?e-e===0:!1}function xEt(e){return EEt.apply([],e)}const LEt={setup(){const e=At(),t=re(),r=Ni(),n=V1();return t.$subscribe((i,o)=>{const a=Date.now();localStorage.setItem("user",JSON.stringify(o)),console.log("userStore subscription took",Date.now()-a,"ms")}),n.$subscribe((i,o)=>{localStorage.setItem("map",JSON.stringify(o))}),{gameStore:e,userStore:t,marketStore:r,mapStore:n}},props:{clickedObj:Object,hoverInfo:Object,panToPzk:String,panToPaPos:Object},emits:["update:hoverInfo","update:clickedObj","update:panToPzk","update:panToPaPos","panAnywhere"],data:()=>({deck:null,tileLayer:null,iconData:[],iconPositions:{},iconLayer:null,lineData:[],lineLayer:null,clickedObject:null,scores:{needTakes:{},pathCosts:{}},pzkSelectedTown:{},initialViewState:{target:[0,0],zoom:-8,minZoom:-12,maxZoom:-5},mapStateSavedTimestamp:0}),created(){},async mounted(){function e(t){const r=n=>{t()?n():setTimeout(i=>r(n),100)};return new Promise(r)}if(console.log("NodeMap mounted, sleeping"),await e(t=>this.gameStore.ready==!0&&this.iconsCalc),console.log("resuming"),this.iconData=await(await fetch("data/deck_icons.json")).json(),this.iconPositions=await(await fetch("data/deck_icon_positions.json")).json(),this.lineData=await(await fetch("data/deck_links.json")).json(),this.panToPzk in this.gameStore.nodes){console.log("panning to node",this.panToPzk);const t=this.gameStore.nodes[this.panToPzk].pos;this.mapStore.target=[t.x,-t.z],this.mapStore.zoom=-7}this.initialViewState.target=[...this.mapStore.target],this.initialViewState.zoom=this.mapStore.zoom,this.deck=this.initializeDeck(),this.scores=this.dijkstraScoreAll(),this.updateDeck()},watch:{"userStore.autotakenNodes"(e){this.updateLayers()},linesCalc(e){this.updateLayers()},panToPaPos(e){if(e){const t={...this.initialViewState};t.target=[e.x,-e.z],t.zoom=-7,t.transitionDuration=100,t.transitionInterpolator=new L_({transitionProps:["target","zoom"]}),this.deck.setProps({initialViewState:t})}}},computed:{iconsCalc(){console.log("iconsCalc");let e=[];return this.iconData&&this.iconData.forEach(([t,r])=>{t in this.scores.pathCosts&&e.push({key:t,kind:r,pos:this.iconPositions[t],taken:this.userStore.autotakenNodes.has(t),thisCpCost:this.gameStore.nodes[t].CP,fromTown:this.scores.needTakes[t][0],fromTownCpCost:this.scores.pathCosts[t],fromTownPath:this.scores.needTakes[t]})}),e},linesCalc(){let e=[];if(this.lineData.forEach(([t,r])=>{const n=this.userStore.autotakenNodes.has(t)&&this.userStore.autotakenNodes.has(r),i=this.userStore.autotakenGrindNodes.has(t)&&this.userStore.autotakenGrindNodes.has(r);e.push({start:this.iconPositions[t],end:this.iconPositions[r],color:n?i?[255,109,0,255]:[255,179,0,255]:[172,172,172,255]})}),this.clickedObject){if(this.clickedObject.key in this.userStore.pzJobs){const t=this.userStore.pzJobs[this.clickedObject.key];let r;for(const n of t.usedPath)r&&e.push({start:this.iconPositions[r],end:this.iconPositions[n],color:[64,255,0,255]}),r=n}if(this.clickedObject.key in this.gameStore._tnk2tk){const t=this.gameStore.tnk2tk(this.clickedObject.key);this.userStore.townWorkers(t).forEach(r=>{if(!PEt(r.job))return;const n=this.userStore.pzJobs[r.job];let i;for(const o of n.usedPath)i&&e.push({start:this.iconPositions[i],end:this.iconPositions[o],color:[64,255,0,255]}),i=o})}}return e}},methods:{makeIconImg:pY,formatFixed:Ft,onMoveEvent(e){const t=Date.now();t-this.mapStateSavedTimestamp>100&&(this.mapStore.target=[...e.viewState.target],this.mapStateSavedTimestamp=t),this.$emit("panAnywhere")},dijkstraScoreAll(){const e=Date.now(),t=this.gameStore.nodes,r=this.gameStore.links,n=0;r[n]=this.gameStore.towns;let i=new Dg((l,u)=>o[l]-o[u]);i.push(n);let o={[n]:0},a={[n]:[]};for(var s;i.size();)s=i.pop(),r[s].forEach(l=>{if(!(l in t))return;const u=o[s]+t[l].CP;l in o?u<o[l]&&(o[l]=u,a[l]=[...a[s],l]):(i.push(l),o[l]=u,a[l]=[...a[s],l])});return console.log("scoreAll took",Date.now()-e,"ms"),{needTakes:a,pathCosts:o}},dijkstraScoreAllProfitPerCp(){const e=Date.now(),t=this.gameStore.nodes,r=this.gameStore.links,n=0;r[n]=[1,301,302,601,61,602,604,608,1002,1101,1141,1301,1314,1319,1343,1380,1623,1649,1691,1750];let i=new Set(Object.keys(t)),o={0:[]},a={0:0},s={0:0};for(const u of Object.keys(t))a[u]=1/0,s[u]=0,o[u]=[];let l=n;for(;r[l].forEach(f=>{const h=a[l]+t[f].CP,d=this.gameStore.profitData(f,o[l][0],150,10,10),p=h==0?0:-d.priceDaily/h;console.log(l,f,h,d.priceDaily,p),p<s[f]&&(a[f]=h,s[f]=p,o[f]=[...o[l],f])}),i.delete(l),i.length!=0;){let u=[];i.forEach(f=>{u.push([f,a[f]])}),u.sort((f,h)=>f[1]-h[1]);let c=-1;if([l,c]=u[0],c==1/0)break}return console.log("scoreAll took",Date.now()-e,"ms"),{needTakes:o,pathCosts:a}},makeIconsLayer(){return new K0({data:this.iconsCalc,pickable:!0,onClick:(e,t)=>this.objectClicked(e.object),onHover:e=>this.$emit("update:hoverInfo",e),getPosition:e=>e.pos,getColor:e=>e.taken?[0,0,0,255]:[0,0,0,255],getIcon:function(e){return{url:e.taken?`data/icons/node/${e.kind}.png`:`data/icons/node/gray/${e.kind}.png`,width:256,height:256,anchorX:128,anchorY:128}},updateTriggers:{getColor:this.userStore.countNodesTaken},transitions:{getColor:100},modelMatrix:[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],getSize:30,autoHighlight:!0})},makeLineLayer(){return new Tk({data:this.linesCalc,getSourcePosition:e=>e.start,getTargetPosition:e=>e.end,getColor:e=>e.color,modelMatrix:[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1]})},initializeDeck(){return console.log("initializeDeck",this.initialViewState),console.log("initializeDeck",this.mapStore.target),this.tileLayer=new $k({data:"data/maptiles/{z}/{x}_{y}.webp",minZoom:0,maxZoom:7,tileSize:256*12800,zoomOffset:14,extent:[-67*2*12800,-71*2*12800,58*2*12800,35*2*12800],renderSubLayers:e=>{const{bbox:{left:t,bottom:r,right:n,top:i}}=e.tile;return new Sk(e,{data:null,image:e.data,bounds:[t,r,n,i]})}}),this.lineLayer=this.makeLineLayer(),this.iconLayer=this.makeIconsLayer(),new mk({canvas:"deck-canvas",mapbox:!1,onViewStateChange:this.onMoveEvent,initialViewState:this.initialViewState,layers:[this.tileLayer,this.lineLayer,this.iconLayer],controller:{doubleClickZoom:!1},views:[new vk({controller:!0})]})},updateLayers(){!this.deck||(console.log("updateLayers"),this.lineLayer=this.makeLineLayer(),this.iconLayer=this.makeIconsLayer(),this.deck.setProps({layers:[this.tileLayer,this.lineLayer,this.iconLayer]}))},updateDeck(){!this.deck||(console.log("updateDeck"),this.lineLayer=this.makeLineLayer(),this.iconLayer=this.makeIconsLayer(),this.deck.setProps({layers:[this.tileLayer,this.lineLayer,this.iconLayer],initialViewState:this.initialViewState}))},objectClicked(e){this.clickedObject=e,this.$emit("update:clickedObj",e)},move(e){this.initialViewState.target=[e,0],console.log("trying to move to",e),console.log(this.deck.viewState)}}},IEt={id:"deck-canvas",ref:"canvas"},OEt={id:"hack"};function REt(e,t,r,n,i,o){return I(),R(W,null,[b("canvas",IEt,null,512),b("div",OEt,L(o.iconsCalc.length)+" icons",1)],64)}const DEt=$e(LEt,[["render",REt],["__scopeId","data-v-a056ba81"]]);const NEt={setup(){const e=re(),t=At(),r=Ni();return{gameStore:t,userStore:e,marketStore:r}},emits:["panToPaPos"],data:()=>({activeTab:"daily"}),methods:{makeIconSrc:Vi,formatFixed:Ft,strShortenLeft:_Y},computed:{untakenPlantzonesNearestCpTownProfit(){const e=Date.now(),t=re(),r=At();let n=[];this.gameStore.towns.forEach(o=>{const a=this.gameStore.dijDiscountedNearestPlantzones(o,10);n[o]=a});let i=[];for(const[o,a]of Object.entries(n))a.forEach(([s,l,u])=>{if(this.userStore.workedPlantzones.has(s.toString()))return;const c=r.profitPzTownArtisans(s,o,l);if(!c.connected)return;c.path=u;const f=r.tnk2tk(o),h=t.townInfraAddCost(f,1,r.plantzones[s].itemkeys);c.townCp=h.cost,c.townCpTooltip=h.tooltip,c.dailyPerCp=c.priceDaily/(c.cp+c.townCp),!isNaN(c.dailyPerCp)&&i.push(c)});return i.sort((o,a)=>a.dailyPerCp-o.dailyPerCp),console.log("cpt: untakenPlantzonesNearestCpTownProfit took",Date.now()-e,"ms"),i}}},Fo=e=>(Ar("data-v-fa61fc65"),e=e(),Cr(),e),FEt={style:{"margin-top":"0.5rem","margin-bottom":"0.5rem"}},BEt={key:0},$Et=Fo(()=>b("tr",null,[b("th",null,"Item"),b("th",null,"Qty"),b("th",null,"M$")],-1)),zEt=["href"],VEt=["src","data-key"],UEt={class:"right"},GEt={class:"right"},jEt={key:1},WEt=Fo(()=>b("tr",null,[b("th",{rowspan:"2"},"town"),b("th",{rowspan:"2"},"job"),b("th",{rowspan:"2"},"M$/day"),b("th",{colspan:"2"},"CP"),b("th",{rowspan:"2"},"M$/day/CP")],-1)),HEt=Fo(()=>b("tr",null,[b("th",null,"\xA0job\xA0"),b("th",null,"town")],-1)),XEt=["onClick"],YEt={class:""},qEt={class:"hlim parent"},ZEt=["onClick"],KEt={class:"hlim right"},JEt=["src"],QEt={key:1,class:"hlim left"},tkt={class:"tac"},ekt={class:"tac"},rkt={class:"tac"},nkt={class:"tac"},ikt=Fo(()=>b("span",{class:"fsxs"},"Compares 10 nearest (by CP) untaken nodes of each town. Uses stats of median 40lvl artisans.",-1)),okt=Fo(()=>b("th",null,"town",-1)),akt=Fo(()=>b("th",null,"job",-1)),skt=Fo(()=>b("th",null,"worker",-1)),lkt=Fo(()=>b("th",null,"+M$/day",-1)),ukt=Fo(()=>b("th",null,"+CP",-1)),ckt=Fo(()=>b("th",null,"M$/day/CP",-1)),fkt=["onClick"],hkt={class:"hlim parent"},dkt=["onClick"],pkt={class:"hlim right"},vkt=["src"],gkt={class:"tac"},mkt=["title"],_kt={class:"tac"},ykt={class:"tac"},bkt=["title"],wkt=z("+"),Skt=["title"],Tkt={class:"tac"};function Pkt(e,t,r,n,i,o){const a=pe("RouterLink");return I(),R(W,null,[b("nav",FEt,[b("span",{onClick:t[0]||(t[0]=s=>e.activeTab="daily"),class:en({tab:1,green:e.activeTab!="daily"})},"Daily Yields",2),b("span",{onClick:t[1]||(t[1]=s=>e.activeTab="worst"),class:en({tab:1,green:e.activeTab!="worst"})},"Worst Taken",2),b("span",{onClick:t[2]||(t[2]=s=>e.activeTab="best"),class:en({tab:1,green:e.activeTab!="best"})},"Best Untaken",2)]),e.activeTab=="daily"?(I(),R("div",BEt,[b("table",null,[$Et,(I(!0),R(W,null,It(n.userStore.jobsTally,(s,l)=>(I(),R("tr",null,[b("td",null,[b("a",{href:this.userStore.itemUrl+l},[b("img",{src:o.makeIconSrc(l),class:"iconitem","data-key":l},null,8,VEt),z(" "+L(n.gameStore.uloc.item[l]),1)],8,zEt)]),b("td",UEt,L(o.formatFixed(s,s<1?2:s<10?1:0)),1),b("td",GEt,L(o.formatFixed(this.marketStore.priceBunch({[l]:s})/1e6,2)),1)]))),256))])])):tt("",!0),e.activeTab=="worst"?(I(),R("table",jEt,[WEt,HEt,(I(!0),R(W,null,It(n.userStore.workersSortedByIncomePerCp,({w:s,i:l,ipc:u})=>(I(),R("tr",null,[b("td",null,[b("span",{onClick:c=>e.$emit("panToPaPos",this.gameStore.nodes[s.tnk].pos),class:"clickable"},L(n.gameStore.uloc.town[n.gameStore.tnk2tk(s.tnk)]),9,XEt)]),b("td",YEt,[b("div",qEt,[s.job in n.userStore.pzJobs?(I(),R(W,{key:0},[b("span",{class:"hlim left clickable",onClick:c=>e.$emit("panToPaPos",this.gameStore.nodes[s.job].pos)},L(n.gameStore.parentNodeName(s.job)),9,ZEt),b("span",KEt,[(I(!0),R(W,null,It(n.gameStore.plantzones[s.job].itemkeys,c=>(I(),va(a,{tag:"a",to:{path:"./settings",hash:"#item"+c}},{default:Ee(()=>[b("img",{src:o.makeIconSrc(c),class:"iconitem"},null,8,JEt)]),_:2},1032,["to"]))),256))])],64)):(I(),R("span",QEt,L(n.gameStore.workerJobDescription(s)),1))])]),b("td",tkt,L(o.formatFixed(l,2)),1),b("td",ekt,L(o.formatFixed(n.userStore.workerSharedCp(s),2)),1),b("td",rkt,L(o.formatFixed(n.userStore.workerSharedLodgingCp(s),2)),1),b("td",nkt,L(o.formatFixed(u,2)),1)]))),256))])):tt("",!0),e.activeTab=="best"?(I(),R(W,{key:2},[ikt,b("table",null,[b("tr",null,[okt,akt,skt,lkt,ukt,ckt,tt("",!0)]),(I(!0),R(W,null,It(o.untakenPlantzonesNearestCpTownProfit,s=>(I(),R("tr",null,[b("td",null,[b("span",{onClick:l=>e.$emit("panToPaPos",this.gameStore.nodes[s.tnk].pos),class:"clickable"},L(n.gameStore.nodeName(s.tnk)),9,fkt)]),b("td",null,[b("div",hkt,[b("span",{onClick:l=>e.$emit("panToPaPos",this.gameStore.nodes[s.key].pos),class:"hlim left clickable"},L(n.gameStore.parentNodeName(s.key)),9,dkt),b("span",pkt,[(I(!0),R(W,null,It(s.itemkeys,l=>(I(),va(a,{tag:"a",to:{path:"./settings",hash:"#item"+l}},{default:Ee(()=>[b("img",{src:o.makeIconSrc(l),class:"iconitem"},null,8,vkt)]),_:2},1032,["to"]))),256))])])]),b("td",gkt,[s.alt_workers?(I(),R("abbr",{key:0,class:"tooltip nound",title:s.alt_workers.map(l=>`${n.gameStore.uloc.char[l.charkey]}: ${o.formatFixed(l.priceDaily,2)} M$/day = ${o.formatFixed(100*l.priceDaily/s.priceDaily)}%`).join(`
`)},L({goblin:"\u{1F47A}",giant:"\u{1F422}",human:"\u{1F468}"}[s.kind]),9,mkt)):tt("",!0)]),b("td",_kt,L(o.formatFixed(s.priceDaily,2)),1),b("td",ykt,[b("abbr",{title:Array.from(s.path,l=>`${n.userStore.autotakenNodes.has(l)?0:n.gameStore.nodes[l].CP} ${n.gameStore.uloc.node[l]}`).join(`
`),class:"tooltip"},L(o.formatFixed(s.cp)),9,bkt),wkt,b("abbr",{title:s.townCpTooltip,class:"tooltip"},L(o.formatFixed(s.townCp)),9,Skt),z("="+L(o.formatFixed(s.cp+s.townCp)),1)]),b("td",Tkt,L(o.formatFixed(s.dailyPerCp,2)),1),tt("",!0)]))),256))])],64)):tt("",!0)],64)}const Ekt=$e(NEt,[["render",Pkt],["__scopeId","data-v-fa61fc65"]]);const kkt={setup(){const e=At(),t=re(),r=Ni(),n=V1();return{gameStore:e,userStore:t,marketStore:r,mapStore:n}},components:{Worker:N7,Town:nq,Plantzone:Rq,ModalDialog:TP,WorkerEdit:y$,WorkerSendSelection:Fdt,LodgingSelection:Xdt,HousesSelection:$0t,NodeMap:DEt,EmpireOverview:Ekt,FloatingModifierEdit:WE},data:()=>({workerEditing:null,workerEditingInitial:null,workerEditingInitialProfit:0,workerDialogVisible:!1,sendDialogWorker:null,sendDialogVisible:!1,lodgingDialogTown:"0",lodgingDialogData:null,lodgingDialogVisible:!1,housesDialogTown:"0",housesDialogVisible:!1,importDialogVisible:!1,clickedNode:null,hoverInfo:null,modifierDialogWspd:150,modifierDialogRgroup:1,modifierDialogWkld:400,modifierDialogVisible:!1,panToPzk:null,panToPaPos:null,importData:null,importSkipSections:{},prerelease_zerocost:!0,prerelease_colorGoblins:!1}),created(){},watch:{},computed:{},methods:{makeIconSrc:Vi,formatFixed:Ft,randBetween:hs,levelup:vd,hireWorker(e){const t=this.userStore.useDefaultWorker?{...this.userStore.defaultWorker,tnk:this.gameStore.tk2tnk(e)}:this.hireRandomArtGob(e);console.log("w",t),this.userStore.userWorkers.push(t)},hireRandomArtGob(e){const t=this.gameStore.uloc.town[e].replace("\u0413\u043E\u0440\u043E\u0434 ","").replace("\u0414\u0435\u0440\u0435\u0432\u043D\u044F ","").substring(0,3),r=this.userStore.townWorkers(e).length+1,n=7572;let i={tk:e,tnk:this.gameStore.tk2tnk(e),charkey:n,label:t+r,level:1,wspdSheet:this.gameStore.workerStatic[n].wspd/1e6,mspdSheet:this.gameStore.workerStatic[n].mspd/100,luckSheet:this.gameStore.workerStatic[n].luck/1e4,skills:[],job:null};return i.skills.push(this.gameStore.randomSkill(i.skills)),vd(this.gameStore,i,40),i.wspdSheet=Math.round(i.wspdSheet*100)/100,i.mspdSheet=Math.round(i.mspdSheet*100)/100,i.luckSheet=Math.round(i.luckSheet*100)/100,i},fireWorker(e){this.userStore.userWorkers=this.userStore.userWorkers.filter(t=>t!=e)},sendWorker(e){this.gameStore.workerStatsOnPlantzone(e),this.sendDialogWorker=e,this.sendDialogVisible=!0},unsendWorker(e){e.job=null},editWorker(e){this.workerEditing=e,this.workerEditingInitial=JSON.parse(JSON.stringify(e)),this.workerEditingInitialProfit=e&&e.job&&typeof e.job=="number"?this.userStore.pzJobs[this.workerEditing.job].profit.priceDaily:0,this.workerDialogVisible=!0},hireAll(){for(const e of Object.keys(this.gameStore.lodgingPerTown)){const t=this.userStore.townFreeLodgingCount(e);for(let r=0;r<t;r++)this.hireWorker(e)}},fireAll(){this.userStore.userWorkers=[]},selectLodging(e){this.lodgingDialogTown=e,this.lodgingDialogData=this.gameStore.lodgingPerTown[e],this.lodgingDialogVisible=!0},selectHouses(e){this.housesDialogTown=e,this.housesDialogVisible=!0,console.log("housesDialogVisible")},fileImport(e){if(!e)return;const t=e.target[0].files;if(t.length<1)return;const r=t[0];console.log("fileImport",r);const n=new FileReader;n.onload=this.fileParse,n.readAsText(r)},fileParse(e){let t=e.target.result,r=JSON.parse(t);r.userWorkers.forEach(n=>{delete n.tk;const i=this.gameStore.workerStatic[n.charkey];if(!i)throw Error(`unknown charkey ${n.charkey}`);if("wspdLvlup"in n){const o=(i.wspd+n.wspdLvlup)/1e6;n.wspdSheet=Math.round(o*100)/100,delete n.wspdLvlup}if("mspdLvlup"in n){const o=i.mspd/100*(1+n.mspdLvlup/1e6);n.mspdSheet=Math.round(o*100)/100,delete n.mspdLvlup}if("mspdBase"in n&&delete n.mspdBase,"luckLvlup"in n){const o=(i.luck+n.luckLvlup)/1e4;n.luckSheet=Math.round(o*100)/100,delete n.luckLvlup}if(this.gameStore.jobIsWorkshop(n.job)&&(n.job.hk in this.userStore.userWorkshops||(this.userStore.userWorkshops[n.job.hk]={...this.userStore.defaultUserWorkshop},console.log(`userWorkshop #${n.job.hk} not set, using default`))),typeof n.job=="number"){const o=n.job;n.job={kind:"plantzone",pzk:o,storage:n.tnk}}this.gameStore.jobIsPz(n.job)&&!(n.job.pzk in this.gameStore.plantzones)&&(console.log(`removing plantzone job of worker ${n.label}: unknown pzk ${n.job}`),n.job=null)}),console.log("import parsed"),this.userStore.$patch(r),r.lodgingTaken&&Object.keys(r.lodgingTaken).length>0?(console.log("overwriting lodgingTaken"),this.userStore.lodgingTaken=r.lodgingTaken):console.log("keeping lodgingTaken"),r.lodgingP2W&&Object.keys(r.lodgingP2W).length>0?(console.log("overwriting lodgingP2W"),this.userStore.lodgingP2W=r.lodgingP2W):console.log("keeping lodgingP2W"),console.log("import done"),this.importDialogVisible=!1},fileExport(){var e=document.createElement("a");let t={activateAncado:this.userStore.activateAncado,lodgingP2W:this.userStore.lodgingP2W,lodgingTaken:this.userStore.lodgingTaken,userWorkers:this.userStore.userWorkers,farmingEnable:this.userStore.farmingEnable,farmingProfit:this.userStore.farmingProfit,farmingBareProfit:this.userStore.farmingBareProfit,grindTakenList:this.userStore.grindTakenList};const r=JSON.stringify(t);var n=new Blob([r],{type:"text/plain"});e.href=URL.createObjectURL(n),e.download="user.json",e.click()},log(e){console.log(e)},showModifierDialog(e){this.modifierDialogVisible=!0,this.modifierDialogRgroup=this.gameStore.plantzoneStatic[e].regiongroup,this.modifierDialogWkld=this.gameStore.plantzones[e].peg.time,this.modifierDialogWspd=this.userStore.workedPlantzones.has(String(e))?this.userStore.pzJobs[e].worker.wspdSheet+this.gameStore.wspdBonus(this.userStore.pzJobs[e].worker,"farm"):150},panToHash(){this.$route.hash&&(this.panToPzk=this.$route.hash.replace("#node",""))}},mounted(){this.panToHash()}},de=e=>(Ar("data-v-8fab3202"),e=e(),Cr(),e),Akt=de(()=>b("button",null,"import",-1)),Ckt=de(()=>b("br",null,null,-1)),Mkt={style:{width:"24em"}},xkt=z("Test with workspeed: "),Lkt={id:"canvas-limiter"},Ikt={key:0},Okt=["src"],Rkt={key:1},Dkt=de(()=>b("br",null,null,-1)),Nkt=de(()=>b("br",null,null,-1)),Fkt={id:"topleft"},Bkt=de(()=>b("summary",null,"Empire",-1)),$kt={id:"leftside"},zkt={key:0,id:"mapObjDetail"},Vkt=de(()=>b("div",null,"\u02C5",-1)),Ukt=[Vkt],Gkt={id:"clickedTownInfo",class:"vscrollable"},jkt={key:0},Wkt={key:0,id:"clickedNodeInfo"},Hkt=z(),Xkt=de(()=>b("abbr",{title:"is involved in a zero-cost path"},"\u2139\uFE0F",-1)),Ykt={key:0,class:"fsxs"},qkt=z(" shared by active nodejobs: "),Zkt=["checked"],Kkt=z(" zero-cost connection to nearest town (invested for droprate) "),Jkt={key:1,id:"clickedPlantzoneInfo"},Qkt={id:"rightside"},tAt={id:"totals"},eAt={class:"fsxs"},rAt=de(()=>b("br",null,null,-1)),nAt={key:0,title:"CP not allocated for fences, enable Farming on Settings page"},iAt={key:1,title:"not all fences being worked, for best results either send 10 workers or none at all"},oAt=de(()=>b("br",null,null,-1)),aAt=de(()=>b("br",null,null,-1)),sAt=de(()=>b("br",null,null,-1)),lAt={class:"fsxs"},uAt=z(" invested for droprate: "),cAt=["title"],fAt=de(()=>b("br",null,null,-1)),hAt=de(()=>b("br",null,null,-1)),dAt=de(()=>b("br",null,null,-1)),pAt=de(()=>b("br",null,null,-1)),vAt=de(()=>b("br",null,null,-1)),gAt=de(()=>b("br",null,null,-1)),mAt=de(()=>b("br",null,null,-1)),_At={class:"fsxs"},yAt=de(()=>b("br",null,null,-1)),bAt=de(()=>b("br",null,null,-1)),wAt=de(()=>b("br",null,null,-1)),SAt=de(()=>b("br",null,null,-1)),TAt=z(" (M$/day/CP) "),PAt={class:"fsxs"},EAt=de(()=>b("br",null,null,-1)),kAt=de(()=>b("br",null,null,-1)),AAt=de(()=>b("br",null,null,-1)),CAt=de(()=>b("br",null,null,-1)),MAt=de(()=>b("div",{style:{clear:"both"}},null,-1)),xAt={id:"workerlist"},LAt=de(()=>b("summary",null,"All towns/workers list",-1)),IAt=z(" show: "),OAt={class:"switch mauto"},RAt=de(()=>b("span",{class:"slider"},null,-1)),DAt=z(" names "),NAt={class:"switch mauto"},FAt=["disabled"],BAt=de(()=>b("span",{class:"slider"},null,-1)),$At=z(" stat ranks "),zAt={class:"switch mauto"},VAt=["disabled"],UAt=de(()=>b("span",{class:"slider"},null,-1)),GAt=z(" stats after skills "),jAt={class:"switch mauto"},WAt=de(()=>b("span",{class:"slider"},null,-1)),HAt=z(" efficiency ");function XAt(e,t,r,n,i,o){const a=pe("WorkerEdit"),s=pe("ModalDialog"),l=pe("WorkerSendSelection"),u=pe("LodgingSelection"),c=pe("HousesSelection"),f=pe("FloatingModifierEdit"),h=pe("NodeMap"),d=pe("EmpireOverview"),p=pe("Town"),v=pe("Plantzone");return I(),R(W,null,[xt(s,{show:e.workerDialogVisible,"onUpdate:show":t[1]||(t[1]=g=>e.workerDialogVisible=g)},{default:Ee(()=>[xt(a,{workerEditing:e.workerEditing,workerInitial:e.workerEditingInitial,initialProfit:e.workerEditingInitialProfit,show:e.workerDialogVisible,"onUpdate:show":t[0]||(t[0]=g=>e.workerDialogVisible=g)},null,8,["workerEditing","workerInitial","initialProfit","show"])]),_:1},8,["show"]),xt(s,{show:e.sendDialogVisible,"onUpdate:show":t[3]||(t[3]=g=>e.sendDialogVisible=g)},{default:Ee(()=>[xt(l,{w:e.sendDialogWorker,show:e.sendDialogVisible,"onUpdate:show":t[2]||(t[2]=g=>e.sendDialogVisible=g)},null,8,["w","show"])]),_:1},8,["show"]),xt(s,{show:e.lodgingDialogVisible,"onUpdate:show":t[5]||(t[5]=g=>e.lodgingDialogVisible=g)},{default:Ee(()=>[xt(u,{tk:e.lodgingDialogTown,o:e.lodgingDialogData,show:e.lodgingDialogVisible,"onUpdate:show":t[4]||(t[4]=g=>e.lodgingDialogVisible=g)},null,8,["tk","o","show"])]),_:1},8,["show"]),xt(s,{show:e.housesDialogVisible,"onUpdate:show":t[7]||(t[7]=g=>e.housesDialogVisible=g)},{default:Ee(()=>[xt(c,{tk:e.housesDialogTown,show:e.housesDialogVisible,"onUpdate:show":t[6]||(t[6]=g=>e.housesDialogVisible=g)},null,8,["tk","show"])]),_:1},8,["show"]),xt(s,{show:e.importDialogVisible,"onUpdate:show":t[10]||(t[10]=g=>e.importDialogVisible=g)},{default:Ee(()=>[b("form",{onSubmit:t[9]||(t[9]=bm(g=>o.fileImport(g),["prevent"]))},[b("input",{type:"file",accept:".json",onClick:t[8]||(t[8]=g=>o.fileImport())}),Akt,Ckt],32)]),_:1},8,["show"]),xt(s,{show:e.modifierDialogVisible,"onUpdate:show":t[13]||(t[13]=g=>e.modifierDialogVisible=g)},{default:Ee(()=>[xt(f,{rgk:e.modifierDialogRgroup,wspd:e.modifierDialogWspd,workload:e.modifierDialogWkld,show:e.modifierDialogVisible,"onUpdate:show":t[11]||(t[11]=g=>e.modifierDialogVisible=g)},null,8,["rgk","wspd","workload","show"]),b("div",Mkt,[xkt,gt(b("input",{type:"range",class:"vmid","onUpdate:modelValue":t[12]||(t[12]=g=>e.modifierDialogWspd=g),min:"40",max:"200",step:"0.01"},null,512),[[ve,e.modifierDialogWspd,void 0,{number:!0}]]),z(" "+L(e.modifierDialogWspd),1)])]),_:1},8,["show"]),b("main",null,[b("div",Lkt,[xt(h,{clickedObj:e.clickedNode,"onUpdate:clickedObj":t[14]||(t[14]=g=>e.clickedNode=g),hoverInfo:e.hoverInfo,"onUpdate:hoverInfo":t[15]||(t[15]=g=>e.hoverInfo=g),panToPzk:e.panToPzk,"onUpdate:panToPzk":t[16]||(t[16]=g=>e.panToPzk=g),panToPaPos:e.panToPaPos,"onUpdate:panToPaPos":t[17]||(t[17]=g=>e.panToPaPos=g),onPanAnywhere:t[18]||(t[18]=g=>e.panToPaPos=null)},null,8,["clickedObj","hoverInfo","panToPzk","panToPaPos"]),e.hoverInfo&&e.hoverInfo.object?(I(),R("div",{key:0,id:"tooltip",style:Nl({left:e.hoverInfo.x+"px",top:e.hoverInfo.y+"px"})},[z(L(e.hoverInfo.object.key)+" "+L(n.gameStore.uloc.node[e.hoverInfo.object.key])+" "+L(e.hoverInfo.object.thisCpCost)+"CP ",1),e.hoverInfo.object.key in this.gameStore.plantzones?(I(),R("span",Ikt,[(I(!0),R(W,null,It(this.gameStore.plantzones[e.hoverInfo.object.key].itemkeys,g=>(I(),R("img",{src:o.makeIconSrc(g),class:"iconitem"},null,8,Okt))),256))])):tt("",!0),e.hoverInfo.object.key in this.gameStore._tnk2tk?(I(),R("span",Rkt,[Dkt,z("[town "+L(this.gameStore._tnk2tk[e.hoverInfo.object.key])+"] ",1)])):tt("",!0),Nkt],4)):tt("",!0),b("div",Fkt,[b("details",null,[Bkt,xt(d,{onPanToPaPos:t[19]||(t[19]=g=>e.panToPaPos=g)})])]),b("div",$kt,[e.clickedNode?(I(),R("div",zkt,[b("div",{class:"rolldown",onClick:t[20]||(t[20]=g=>e.clickedNode=null)},Ukt),b("div",Gkt,[e.clickedNode.key in n.gameStore._tnk2tk&&n.gameStore.tnk2tk(e.clickedNode.key)in n.gameStore.lodgingPerTown?(I(),R("table",jkt,[xt(p,{o:n.gameStore.lodgingPerTown[n.gameStore.tnk2tk(e.clickedNode.key)],tk:n.gameStore.tnk2tk(e.clickedNode.key),onSelectLodging:o.selectLodging,onSelectHouses:o.selectHouses,onHireWorker:o.hireWorker,onEditWorker:o.editWorker,onSendWorker:o.sendWorker,onPanToPaPos:t[21]||(t[21]=g=>e.panToPaPos=g)},null,8,["o","tk","onSelectLodging","onSelectHouses","onHireWorker","onEditWorker","onSendWorker"])])):tt("",!0)]),!(n.gameStore.tnk2tk[e.clickedNode.key]in n.gameStore.lodgingPerTown)&&!(e.clickedNode.key in n.gameStore.plantzoneDrops)?(I(),R("div",Wkt,[b("p",null,[z(L(n.gameStore.uloc.node[e.clickedNode.key])+" ",1),n.userStore.autotakenGrindNodes.has(e.clickedNode.key)?(I(),R(W,{key:0},[b("s",null,L(e.clickedNode.thisCpCost)+"CP",1),Hkt,Xkt],64)):(I(),R(W,{key:1},[z(L(e.clickedNode.thisCpCost)+"CP ",1)],64))]),e.clickedNode.key in n.userStore.currentNodesJobs?(I(),R("p",Ykt,[qkt,(I(!0),R(W,null,It(n.userStore.currentNodesJobs[e.clickedNode.key],g=>(I(),R("p",null,L(o.formatFixed(100*n.userStore.pzJobs[g].profit.priceDaily/n.userStore.currentNodesCashflow[e.clickedNode.key]))+"% - "+L(n.gameStore.plantzoneName(g))+" @ "+L(o.formatFixed(n.userStore.pzJobs[g].profit.priceDaily,2))+" M$/day ",1))),256))])):tt("",!0),e.prerelease_zerocost?(I(),R(W,{key:1},[b("input",{type:"checkbox",onChange:t[22]||(t[22]=g=>n.userStore.modifyGrindTakens(g,e.clickedNode.key)),checked:n.userStore.grindTakenSet.has(e.clickedNode.key)},null,40,Zkt),Kkt],64)):tt("",!0)])):tt("",!0),e.clickedNode.key in n.gameStore.plantzoneDrops?(I(),R("div",Jkt,[xt(v,{pzk:e.clickedNode.key,onShowModifierDialog:o.showModifierDialog,onEditWorker:o.editWorker},null,8,["pzk","onShowModifierDialog","onEditWorker"])])):tt("",!0)])):tt("",!0)]),b("div",Qkt,[b("div",tAt,[b("details",null,[b("summary",null,"Total workers: "+L(n.userStore.countWorkers),1),b("p",eAt,[z(" nodes: "+L(n.userStore.workedPlantzones.size)+" ",1),rAt,n.userStore.workersFarmingCount?(I(),R(W,{key:0},[n.userStore.farmingEnable?n.userStore.workersFarmingCount&&n.userStore.workersFarmingCount<10?(I(),R("abbr",iAt,"\u26A0\uFE0F")):tt("",!0):(I(),R("abbr",nAt,"\u26A0\uFE0F")),z(" farming: "+L(n.userStore.workersFarmingCount)+" ",1),oAt],64)):tt("",!0),n.userStore.workersWorkshopCount?(I(),R(W,{key:1},[z(" workshop: "+L(n.userStore.workersWorkshopCount)+" ",1),aAt],64)):tt("",!0),n.userStore.workersCustomCount?(I(),R(W,{key:2},[z(" custom: "+L(n.userStore.workersCustomCount)+" ",1),sAt],64)):tt("",!0),n.userStore.workersIdleCount?(I(),R(W,{key:3},[z(" \u26A0\uFE0F idle: "+L(n.userStore.workersIdleCount),1)],64)):tt("",!0)])]),b("details",null,[b("summary",null,"Total CP: "+L(o.formatFixed(n.userStore.totalCP+n.userStore.autotakenGrindNodesCP)),1),b("p",lAt,[n.userStore.autotakenGrindNodesCP?(I(),R(W,{key:0},[uAt,b("abbr",{class:"tooltip",title:n.userStore.grindTakenDesc},L(n.userStore.autotakenGrindNodesCP),9,cAt),fAt],64)):tt("",!0),z(" nodes: "+L(n.userStore.autotakenNodesCP)+" ",1),hAt,n.userStore.farmingEnable?(I(),R(W,{key:1},[z(" farming: "+L(n.userStore.farmingCP)+" ",1),dAt],64)):tt("",!0),n.userStore.workersWorkshopCount?(I(),R(W,{key:2},[z(" workshops: "+L(o.formatFixed(n.userStore.workshopTotalCP))+" ",1),pAt],64)):tt("",!0),n.userStore.workersCustomCount?(I(),R(W,{key:3},[z(" custom: "+L(o.formatFixed(n.userStore.customTotalCP))+" ",1),vAt],64)):tt("",!0),n.userStore.prerelease_housesconfig?(I(),R(W,{key:4},[z(" lodgage: "+L(n.userStore.lodgage)+" ",1),gAt],64)):(I(),R(W,{key:5},[z(" lodging: "+L(n.userStore.haveLodging.cp.total)+" ",1),mAt],64))])]),b("details",null,[b("summary",null,"Total M$/day: "+L(o.formatFixed(n.userStore.allJobsTotalDailyProfit,2)),1),b("p",_At,[z(" nodes: "+L(o.formatFixed(n.userStore.pzJobsTotalDailyProfit,2))+" ",1),yAt,n.userStore.workersFarmingCount?(I(),R(W,{key:0},[z(" farming: "+L(o.formatFixed(n.userStore.farmingTotalProfit,2))+" ",1),bAt],64)):tt("",!0),n.userStore.workersWorkshopCount?(I(),R(W,{key:1},[z(" workshops: "+L(o.formatFixed(n.userStore.workshopTotalProfit,2))+" ",1),wAt],64)):tt("",!0),n.userStore.workersCustomCount?(I(),R(W,{key:2},[z(" custom: "+L(o.formatFixed(n.userStore.customTotalProfit,2))+" ",1),SAt],64)):tt("",!0)])]),b("details",null,[b("summary",null,"Total efficiency: "+L(o.formatFixed(n.userStore.allJobsDailyProfitPerCp,3)),1),TAt,b("p",PAt,[z(" nodes: "+L(o.formatFixed(n.userStore.pzJobsDailyProfitPerCp,3))+" ",1),EAt,n.userStore.farmingEnable?(I(),R(W,{key:0},[z(" farming: "+L(o.formatFixed(n.userStore.farmingJobsDailyProfitPerCp,3))+" ",1),kAt],64)):tt("",!0),n.userStore.workersWorkshopCount?(I(),R(W,{key:1},[z(" workshop: "+L(o.formatFixed(n.userStore.workshopJobsDailyProfitPerCp,3))+" ",1),AAt],64)):tt("",!0),n.userStore.workersCustomCount?(I(),R(W,{key:2},[z(" custom: "+L(o.formatFixed(n.userStore.customJobsDailyProfitPerCp,3))+" ",1),CAt],64)):tt("",!0)])])]),MAt,b("div",xAt,[b("details",null,[LAt,IAt,b("label",OAt,[gt(b("input",{type:"checkbox","onUpdate:modelValue":t[23]||(t[23]=g=>n.userStore.displayWorkerNames=g)},null,512),[[ar,n.userStore.displayWorkerNames]]),RAt,DAt]),b("label",NAt,[gt(b("input",{type:"checkbox","onUpdate:modelValue":t[24]||(t[24]=g=>n.userStore.displayWorkerStatsRank=g),disabled:n.userStore.displayWorkerStatsForPz},null,8,FAt),[[ar,n.userStore.displayWorkerStatsRank]]),BAt,$At]),b("label",zAt,[gt(b("input",{type:"checkbox","onUpdate:modelValue":t[25]||(t[25]=g=>n.userStore.displayWorkerStatsForPz=g),disabled:n.userStore.displayWorkerStatsRank},null,8,VAt),[[ar,n.userStore.displayWorkerStatsForPz]]),UAt,GAt]),b("label",jAt,[gt(b("input",{type:"checkbox","onUpdate:modelValue":t[26]||(t[26]=g=>n.userStore.displayProfitPerCp=g)},null,512),[[ar,n.userStore.displayProfitPerCp]]),WAt,HAt]),b("button",{onClick:t[27]||(t[27]=g=>e.importDialogVisible=!0)},"import"),b("button",{onClick:t[28]||(t[28]=g=>o.fileExport())},"export"),tt("",!0),b("button",{onClick:t[30]||(t[30]=g=>o.fireAll())},"fire all"),b("table",null,[(I(!0),R(W,null,It(n.gameStore.lodgingPerTown,(g,m)=>(I(),va(p,{o:g,tk:m,onSelectLodging:o.selectLodging,onSelectHouses:o.selectHouses,onHireWorker:o.hireWorker,onEditWorker:o.editWorker,onSendWorker:o.sendWorker,onPanToPaPos:t[31]||(t[31]=_=>e.panToPaPos=_)},null,8,["o","tk","onSelectLodging","onSelectHouses","onHireWorker","onEditWorker","onSendWorker"]))),256))])])])])])])],64)}const YAt=$e(kkt,[["render",XAt],["__scopeId","data-v-8fab3202"]]);const qAt={setup(){const e=re(),t=At(),r=Ni(),n=V1();return n.$subscribe((i,o)=>{localStorage.setItem("map",JSON.stringify(o))}),e.$subscribe((i,o)=>{const a=Date.now();localStorage.setItem("user",JSON.stringify(o)),console.log("userStore subscription took",Date.now()-a,"ms")}),{marketStore:r,userStore:e,gameStore:t,mapStore:n}},data:()=>({wspd:150,mspd:10,luck:10,isGiant:!1,mediahNodes:new Set([1210,1212,1215,1216,1219,1217,1213,1220,1205,1218])}),methods:{makeIconSrc:Vi,formatFixed:Ft,highlightHash(){if(this.$route.hash){const e=document.querySelector(this.$route.hash);e&&(e.scrollIntoView(),e.classList.add("anim"))}},setMedianChar(e){if(!e)return;const t=this.gameStore.workerStatic[e];let r=t.wspd,n=0,i=t.luck;for(let a=2;a<=40;a++)r+=(t.wspd_lo+t.wspd_hi)/2,n+=(t.mspd_lo+t.mspd_hi)/2,i+=(t.luck_lo+t.luck_hi)/2;let o=t.mspd*(1+n/1e6);this.wspd=Math.round(r/1e6*100)/100,this.mspd=Math.round(o)/100,this.luck=Math.round(i/1e4*100)/100,this.isGiant=this.gameStore.isGiant(e)}},computed:{allPlantzonesNearestCpTownProfit(){const e=Date.now(),t=[];for(const r of Object.values(this.gameStore.plantzones)){const n=r.key,i=this.mediahNodes.has(n)?3:2;let o=this.gameStore.dijkstraNearestTowns(n,i);o.sort((u,c)=>u[1]-c[1]);let a={},s={};for(let u=0;u<o.length;u++){const[c,f]=o[u],h=this.gameStore.profitPzTownArtisans(n,c,f);if(c!=1343&&h.connected){if(s[h.tnk]=h.dailyPerCp,!("priceDaily"in a)){a=h;continue}h.dailyPerCp>a.dailyPerCp&&(a=h)}}if(!("alt_workers"in a))throw new Error(`Failed to calc alt_workers for pzk=${n}`);const l=Object.entries(s).map(([u,c])=>({tnk:u,dailyPerCp:c}));l.sort((u,c)=>c.dailyPerCp-u.dailyPerCp),a.alt_towns_dict=s,a.alt_towns=l,t.push(a)}return console.log("cpt: plantzonesNearestCpTownProfit took",Date.now()-e,"ms"),t},allPlantzonesNearestCpTownProfit_sorted(){const e=this.allPlantzonesNearestCpTownProfit;return e.sort((t,r)=>isFinite(r.dailyPerCp-t.dailyPerCp)?r.dailyPerCp-t.dailyPerCp:isFinite(t.dailyPerCp)?-1:1),e}},mounted(){this.highlightHash()},updated(){this.$nextTick(()=>this.highlightHash())}},pr=e=>(Ar("data-v-9c560f38"),e=e(),Cr(),e),ZAt=pr(()=>b("div",{id:"toptext"},[b("p",null," Profits here are calculated using average level 40 stats for artisan workers at corresponding town (papu/dokkebi/etc), with Farm Knowledge skill. Home page has more tiers, levels, and skills. "),b("p",null," Note that CP costs shown here are independent for each node. In practice however, multiple resource nodes can reuse the same town connection, resulting in higher combined $/CP. "),b("p",null," For example, taking both Shakatu Fig nodes is not 3+3 but 3+1 CP. Use worker management on Home page to take this (and also lodging/storage costs) into account. "),b("p",null," Don't forget to set up your server and prices on Settings page and maybe take a look at Modifiers as well. ")],-1)),KAt={class:"scroll"},JAt=pr(()=>b("th",{rowspan:"2"},"Node",-1)),QAt=pr(()=>b("th",{colspan:"3"},"cycle drops",-1)),tCt=pr(()=>b("th",{colspan:"3"},"best town",-1)),eCt=pr(()=>b("th",{colspan:"2"},"best worker",-1)),rCt=pr(()=>b("th",{rowspan:"2"},"workload",-1)),nCt=pr(()=>b("th",{colspan:"3"},"daily",-1)),iCt={key:0,rowspan:"2"},oCt=pr(()=>b("abbr",{class:"tooltip nound",title:"assigned on Home page?"},"\u{1F3E0}",-1)),aCt=[oCt],sCt=z("unlucky ("),lCt=z(" with giant bonus)"),uCt=pr(()=>b("th",null,"lucky",-1)),cCt=pr(()=>b("th",null,"$ value",-1)),fCt=pr(()=>b("th",null,"name",-1)),hCt=pr(()=>b("th",null,"walk",-1)),dCt=pr(()=>b("th",null,"CP",-1)),pCt=pr(()=>b("th",null,"type",-1)),vCt=pr(()=>b("th",null,"wspd",-1)),gCt=pr(()=>b("th",null,"cycles",-1)),mCt=pr(()=>b("th",null,"M$",-1)),_Ct=pr(()=>b("th",null,"M$/CP",-1)),yCt=["id"],bCt=["src"],wCt=["src"],SCt={class:"tac"},TCt=["src"],PCt={class:"tac"},ECt={class:"tac"},kCt=["title"],ACt={class:"tac"},CCt={class:"tac"},MCt={class:"tac"},xCt=["title"],LCt={class:"tac"},ICt={class:"tac"},OCt={class:"tac"},RCt={class:"tac"},DCt={class:"tac"},NCt={key:0,class:"tac"},FCt={key:0,class:"tooltip nound",title:"all good"},BCt=["title"],$Ct=z(" \u26A0\uFE0F "),zCt=z(" \u2714\uFE0F "),VCt=["title"],UCt={key:1,class:"tooltip nound",title:"not assigned"};function GCt(e,t,r,n,i,o){const a=pe("RouterLink");return I(),R("main",null,[ZAt,b("div",KAt,[b("table",null,[b("tr",null,[JAt,QAt,tCt,eCt,rCt,nCt,n.userStore.workedPlantzones.size?(I(),R("th",iCt,aCt)):tt("",!0)]),b("tr",null,[b("th",null,[sCt,gt(b("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=s=>e.isGiant=s)},null,512),[[ar,e.isGiant]]),lCt]),uCt,cCt,fCt,hCt,dCt,pCt,vCt,gCt,mCt,_Ct]),(I(!0),R(W,null,It(o.allPlantzonesNearestCpTownProfit_sorted,s=>(I(),R("tr",{id:"drops"+s.key},[b("td",null,[xt(a,{tag:"a",to:{path:"./",hash:"#node"+s.key}},{default:Ee(()=>[z(L(n.gameStore.plantzoneName(s.key)),1)]),_:2},1032,["to"])]),b("td",null,[e.isGiant?(I(!0),R(W,{key:0},It(s.unlucky_gi,(l,u)=>(I(),R("div",null,[xt(a,{tag:"a",to:{path:"./settings",hash:"#item"+u}},{default:Ee(()=>[b("span",null,[z(L(o.formatFixed(l,2))+" ",1),b("img",{src:o.makeIconSrc(u),class:"iconitem"},null,8,bCt),z(" "+L(n.gameStore.uloc.item[u]),1)])]),_:2},1032,["to"])]))),256)):(I(!0),R(W,{key:1},It(s.unlucky,(l,u)=>(I(),R("div",null,[xt(a,{tag:"a",to:{path:"./settings",hash:"#item"+u}},{default:Ee(()=>[b("span",null,[z(L(o.formatFixed(l,2))+" ",1),b("img",{src:o.makeIconSrc(u),class:"iconitem"},null,8,wCt),z(" "+L(n.gameStore.uloc.item[u]),1)])]),_:2},1032,["to"])]))),256))]),b("td",SCt,[(I(!0),R(W,null,It(s.lucky,(l,u)=>(I(),R("div",null,[xt(a,{tag:"a",to:{path:"./settings",hash:"#item"+u}},{default:Ee(()=>[z(L(o.formatFixed(l,2))+"\xA0",1),b("img",{src:o.makeIconSrc(u),class:"iconitem"},null,8,TCt)]),_:2},1032,["to"])]))),256))]),b("td",PCt,L(o.formatFixed(s.cycleValue,0)),1),b("td",ECt,[b("abbr",{class:"tooltip nound",title:s.alt_towns.map(l=>`${n.gameStore.nodeName(l.tnk)}: ${o.formatFixed(l.dailyPerCp,2)} M$/day/CP \u2192 ${o.formatFixed(100*l.dailyPerCp/s.dailyPerCp)}%`).join(`
`)},L(n.gameStore.nodeName(s.tnk)),9,kCt)]),b("td",ACt,L(o.formatFixed(s.dist,0)),1),b("td",CCt,L(s.cp),1),b("td",MCt,[b("abbr",{class:"tooltip nound",title:s.alt_workers.map(l=>`${n.gameStore.uloc.char[l.charkey]}: ${o.formatFixed(l.priceDaily,2)} M$/day \u2192 ${o.formatFixed(100*l.priceDaily/s.priceDaily)}%`).join(`
`)},L({goblin:"\u{1F47A}",giant:"\u{1F422}",human:"\u{1F468}"}[s.kind]),9,xCt)]),b("td",LCt,L(o.formatFixed(s.wspd+5,1)),1),b("td",ICt,[n.userStore.allowFloating&&n.userStore.useFloatingModifiers[s.regiongroup]?(I(),R(W,{key:0},[z(" ~"+L(o.formatFixed(n.userStore.medianWorkloads[s.key],2)),1)],64)):(I(),R(W,{key:1},[z(L(o.formatFixed(s.activeWorkload,2)),1)],64))]),b("td",OCt,L(o.formatFixed(s.cyclesDaily,1)),1),b("td",RCt,L(o.formatFixed(s.priceDaily,2)),1),b("td",DCt,L(o.formatFixed(s.dailyPerCp,3)),1),n.userStore.workedPlantzones.size?(I(),R("td",NCt,[n.userStore.workedPlantzones.has(s.key.toString())?(I(),R(W,{key:0},[n.userStore.pzJobs[s.key].worker.tnk==s.tnk?(I(),R(W,{key:0},[n.userStore.pzJobs[s.key].worker.charkey==s.charkey?(I(),R("abbr",FCt,"\u2714\uFE0F")):(I(),R("abbr",{key:1,class:"tooltip nound",title:`worker used: ${n.gameStore.uloc.char[n.userStore.pzJobs[s.key].worker.charkey]}
suggested: ${n.gameStore.uloc.char[s.charkey]}`+(n.userStore.pzJobs[s.key].worker.charkey in s.alt_workers_dict?` (${o.formatFixed(s.priceDaily/s.alt_workers_dict[n.userStore.pzJobs[s.key].worker.charkey]*100-100)}% better)`:"")},[n.userStore.pzJobs[s.key].worker.charkey in s.alt_workers_dict&&s.priceDaily/s.alt_workers_dict[n.userStore.pzJobs[s.key].worker.charkey]>1.1?(I(),R(W,{key:0},[$Ct],64)):(I(),R(W,{key:1},[zCt],64))],8,BCt))],64)):(I(),R("abbr",{key:1,class:"tooltip nound",title:`town used: ${n.gameStore.nodeName(n.userStore.pzJobs[s.key].worker.tnk)}
suggested: ${n.gameStore.nodeName(s.tnk)}`+(n.userStore.pzJobs[s.key].worker.tnk in s.alt_towns_dict?` (${o.formatFixed(s.dailyPerCp/s.alt_towns_dict[n.userStore.pzJobs[s.key].worker.tnk]*100-100)}% better)`:"")}," \u26A0\uFE0F ",8,VCt))],64)):(I(),R("abbr",UCt,"\u274C"))])):tt("",!0)],8,yCt))),256))])])])}const jCt=$e(qAt,[["render",GCt],["__scopeId","data-v-9c560f38"]]),WCt={setup(){const e=At(),t=re(),r=Ni();return t.$subscribe((n,i)=>{const o=Date.now();localStorage.setItem("user",JSON.stringify(i)),console.log("userStore subscription took",Date.now()-o,"ms")}),{gameStore:e,userStore:t,marketStore:r}},data:()=>({}),created(){},mounted(){},watch:{},methods:{}},HCt=b("br",null,null,-1),XCt=b("br",null,null,-1),YCt=b("tr",null,[b("th"),b("th",null,"Town / House"),b("th",null,"Lodging"),b("th",null,"CP")],-1),qCt=b("td",null,null,-1),ZCt={class:"header"},KCt=z(" P2W: "),JCt=["onUpdate:modelValue"],QCt=["onUpdate:modelValue"],tMt=["href"];function eMt(e,t,r,n,i,o){return I(),R("main",null,[z(" Total lodging slots: "+L(n.userStore.haveLodging.slots.total),1),HCt,z(" Total CP spent: "+L(n.userStore.haveLodging.cp.total),1),XCt,b("table",null,[YCt,(I(!0),R(W,null,It(n.gameStore.lodgingPerTown,(a,s)=>(I(),R(W,null,[b("tr",null,[qCt,b("td",null,[b("span",ZCt,L(n.gameStore.uloc.town[s]),1),KCt,gt(b("input",{type:"number","onUpdate:modelValue":l=>n.userStore.lodgingP2W[s]=l,class:"short"},null,8,JCt),[[ve,n.userStore.lodgingP2W[s],void 0,{number:!0}]])]),b("td",null,L(n.userStore.haveLodging.slots.perTown[s]),1),b("td",null,L(n.userStore.haveLodging.cp.perTown[s]),1)]),(I(!0),R(W,null,It(a.houses,l=>(I(),R("tr",null,[b("td",null,[gt(b("input",{type:"checkbox","onUpdate:modelValue":u=>n.userStore.lodgingTaken[l.key]=u},null,8,QCt),[[ar,n.userStore.lodgingTaken[l.key]]])]),b("td",null,[b("a",{href:"https://bdocodex.com/us/npc/"+l.key},L(n.gameStore.uloc.char[l.key]),9,tMt)]),b("td",null,L(l.lodgingSpaces),1),b("td",null,L(l.CP),1)]))),256))],64))),256))])])}const rMt=$e(WCt,[["render",eMt]]);const nMt={setup(){const e=At(),t=re(),r=Ni();return t.$subscribe((n,i)=>{const o=Date.now();localStorage.setItem("user",JSON.stringify(i)),console.log("userStore subscription took",Date.now()-o,"ms")}),{gameStore:e,userStore:t,marketStore:r}},components:{ModalDialog:TP,FloatingModifierEdit:WE},data:()=>({floatingDialogWspd:150,floatingDialogRgroup:1,floatingDialogWkld:400,floatingDialogVisible:!1,importDialogVisible:!1}),watch:{"userStore.marketUrl":{handler(e,t){this.marketStore.fetchData()}}},methods:{formatFixed:Ft,fileParse(e){let t=e.target.result,r=JSON.parse(t);this.userStore.$patch(r),this.importDialogVisible=!1},fileImport(e){if(!e)return;const t=e.target[0].files;if(t.length<1)return;const r=t[0];console.log("fileImport",r);let n=new FileReader;n.onload=this.fileParse,n.readAsText(r)},showDialog(e){this.floatingDialogVisible=!0,this.floatingDialogRgroup=Number(e);for(let t of this.gameStore.regionGroups[e]){this.floatingDialogWkld=this.gameStore.plantzones[t].peg.time;break}},fileExport(){var e=document.createElement("a");let t={regionModifiers:this.userStore.regionModifiers,regionModifiers2:this.userStore.regionModifiers2};const r=JSON.stringify(t);var n=new Blob([r],{type:"text/plain"});e.href=URL.createObjectURL(n),e.download="modifiers.json",e.click()},clear(){this.userStore.regionModifiers={},this.userStore.regionModifiers2={}}}},Hi=e=>(Ar("data-v-399865a4"),e=e(),Cr(),e),iMt=Hi(()=>b("button",null,"import",-1)),oMt=Hi(()=>b("br",null,null,-1)),aMt=z(" Test on node: "),sMt=["value"],lMt=Hi(()=>b("br",null,null,-1)),uMt=z(" With workspeed: "),cMt={id:"toptext"},fMt=Hi(()=>b("p",null,"Productivity modifiers are shown ingame as green bars at world map > resource view. Some green bars are hidden though, for those you can see the current worload in ingame worker assignment panel and calculate the modifier off that.",-1)),hMt=Hi(()=>b("p",null,"Low modifier means lots of players are working in the area and workloads are increased (up to 2x of base).",-1)),dMt=Hi(()=>b("p",null,"If unspecified, 0% modifier will be used (= max workload = longest cycle = min cycles per day = min profit)",-1)),pMt=Hi(()=>b("summary",null,"Advanced",-1)),vMt=z("allow floating modifiers "),gMt=Hi(()=>b("tr",null,[b("th",null,"#"),b("th",null,"Modifier%"),b("th",null,"Contains nodes")],-1)),mMt={class:"center"},_Mt={class:"center"},yMt={key:0,class:"switch mauto"},bMt=["onUpdate:modelValue"],wMt=Hi(()=>b("span",{class:"slider"},null,-1)),SMt=z(" floating"),TMt=Hi(()=>b("br",null,null,-1)),PMt=["onClick"],EMt=z(" constant"),kMt=Hi(()=>b("br",null,null,-1)),AMt=["onUpdate:modelValue"];function CMt(e,t,r,n,i,o){const a=pe("ModalDialog"),s=pe("FloatingModifierEdit"),l=pe("RouterLink");return I(),R(W,null,[xt(a,{show:e.importDialogVisible,"onUpdate:show":t[2]||(t[2]=u=>e.importDialogVisible=u)},{default:Ee(()=>[b("form",{onSubmit:t[1]||(t[1]=bm(u=>o.fileImport(u),["prevent"]))},[b("input",{type:"file",accept:".json",onClick:t[0]||(t[0]=u=>o.fileImport())}),iMt],32)]),_:1},8,["show"]),xt(a,{show:e.floatingDialogVisible,"onUpdate:show":t[6]||(t[6]=u=>e.floatingDialogVisible=u)},{default:Ee(()=>[xt(s,{rgk:e.floatingDialogRgroup,wspd:e.floatingDialogWspd,workload:e.floatingDialogWkld,show:e.floatingDialogVisible,"onUpdate:show":t[3]||(t[3]=u=>e.floatingDialogVisible=u)},null,8,["rgk","wspd","workload","show"]),oMt,aMt,gt(b("select",{"onUpdate:modelValue":t[4]||(t[4]=u=>e.floatingDialogWkld=u)},[(I(!0),R(W,null,It(n.gameStore.regionGroups[e.floatingDialogRgroup],u=>(I(),R("option",{value:n.gameStore.plantzones[u]&&n.gameStore.plantzones[u].peg.time},L(n.gameStore.plantzoneName(u))+" - "+L(n.gameStore.plantzones[u]&&n.gameStore.plantzones[u].peg.time)+" base ",9,sMt))),256))],512),[[Sr,e.floatingDialogWkld]]),lMt,uMt,gt(b("input",{type:"range",class:"vmid","onUpdate:modelValue":t[5]||(t[5]=u=>e.floatingDialogWspd=u),min:"40",max:"200",step:"0.01"},null,512),[[ve,e.floatingDialogWspd,void 0,{number:!0}]]),z(" "+L(e.floatingDialogWspd),1)]),_:1},8,["show"]),b("div",cMt,[fMt,hMt,dMt,b("details",null,[pMt,b("button",{onClick:t[7]||(t[7]=u=>e.importDialogVisible=!0)},"import"),b("button",{onClick:t[8]||(t[8]=u=>o.fileExport())},"export"),b("button",{onClick:t[9]||(t[9]=u=>o.clear())},"clear"),b("label",null,[gt(b("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=u=>n.userStore.allowFloating=u)},null,512),[[ar,n.userStore.allowFloating]]),vMt])])]),b("table",null,[gMt,(I(!0),R(W,null,It(n.gameStore.regionGroups,(u,c)=>(I(),R("tr",null,[b("td",mMt,L(c),1),b("td",_Mt,[n.userStore.allowFloating?(I(),R("label",yMt,[gt(b("input",{type:"checkbox","onUpdate:modelValue":f=>n.userStore.useFloatingModifiers[c]=f},null,8,bMt),[[ar,n.userStore.useFloatingModifiers[c]]]),wMt])):tt("",!0),n.userStore.allowFloating&&n.userStore.useFloatingModifiers[c]?(I(),R(W,{key:1},[SMt,TMt,z(" ~"+L(o.formatFixed(n.userStore.medianModifiers[c],2))+" ",1),b("button",{onClick:f=>o.showDialog(c)},"edit",8,PMt)],64)):(I(),R(W,{key:2},[EMt,kMt,gt(b("input",{type:"number","onUpdate:modelValue":f=>n.userStore.regionModifiers[c]=f,min:"0",max:"100",step:"0.01",class:"w42em"},null,8,AMt),[[ve,n.userStore.regionModifiers[c],void 0,{number:!0}]])],64))]),b("td",null,[(I(!0),R(W,null,It(u,f=>(I(),R("div",null,[xt(l,{tag:"a",to:{path:"./",hash:"#node"+f}},{default:Ee(()=>[z(L(n.gameStore.plantzoneName(f)),1)]),_:2},1032,["to"]),z(" "+L(n.gameStore.ready&&n.gameStore.plantzones[f].peg.time)+" ",1),n.userStore.allowFloating&&n.userStore.useFloatingModifiers[c]?(I(),R(W,{key:0},[z(" \u2933 "+L(o.formatFixed(n.userStore.medianWorkloads[f],2)),1)],64)):(I(),R(W,{key:1},[z(" \u2192 "+L(n.gameStore.ready?o.formatFixed(n.gameStore.plantzones[f].activeWorkload,2):""),1)],64))]))),256))])]))),256))])],64)}const MMt=$e(nMt,[["render",CMt],["__scopeId","data-v-399865a4"]]);const xMt={setup(){const e=re();return{gameStore:At(),userStore:e}},props:{show:{type:Boolean,default:!1}},created(){this.fetchData()},data:()=>({houses:{},towns:[-1],usages:[-1],levels:[-1],filterTown:-1,filterUsage:-1,filterLevel:-1,selectedHouse:-1}),computed:{filteredTowns(){const e=new Set([-1]);for(const[t,r]of Object.entries(this.houses))(this.filterUsage==-1||this.filterUsage in r.CraftList)&&(this.filterLevel==-1||this.filterLevel<=r.CraftList[this.filterUsage])&&r.affTown!=694&&e.add(r.affTown);return[...e].sort((t,r)=>t-r)},filteredUsages(){const e=new Set([-1]);for(const[t,r]of Object.entries(this.houses))if(this.filterTown==-1||r.affTown==this.filterTown)for(const[n,i]of Object.entries(r.CraftList))n>10&&e.add(n);return[...e].sort((t,r)=>t-r)},filteredLevels(){const e=new Set([-1]);if(this.filterUsage!=-1)for(const[t,r]of Object.entries(this.houses))(this.filterTown==-1||r.affTown==this.filterTown)&&this.filterUsage in r.CraftList&&e.add(r.CraftList[this.filterUsage]);return[...e].sort((t,r)=>t-r)},filteredHouses(){const e=[];for(const[t,r]of Object.entries(this.houses))(this.filterTown==-1||r.affTown==this.filterTown)&&(this.filterUsage==-1||this.filterUsage in r.CraftList)&&(this.filterLevel==-1||this.filterLevel<=r.CraftList[this.filterUsage])&&e.push(Number(t));return e}},methods:{formatFixed:Ft,async fetchData(){this.houses=await(await fetch("data/houseinfo.json")).json();const e=new Set([-1]),t=new Set([-1]);for(const[r,n]of Object.entries(this.houses)){e.add(n.affTown);for(const[o,a]of Object.entries(n.CraftList))o>10&&t.add(o);this.houses[r].CPfull=this.houses[r].CP;let i=n.needHouseKey;for(;i;)this.houses[r].CPfull+=this.houses[i].CP,i=this.houses[i].needHouseKey}this.towns=e,this.usages=[...t].sort((r,n)=>r-n)},addWorkshop(e){this.userStore.userWorkshops[e]={...this.userStore.defaultUserWorkshop}},deleteWorkshop(e){delete this.userStore.userWorkshops[e]}}},Pu=e=>(Ar("data-v-f0b2630c"),e=e(),Cr(),e),LMt=Pu(()=>b("h3",null,"\u{1F3ED}Workshops config",-1)),IMt={class:"sa"},OMt=Pu(()=>b("tr",null,[b("th",null,"House"),b("th",null,"label"),b("th",null,"worktype"),b("th",null,"workload"),b("th",null,[z("$/cycle "),b("abbr",{title:"use Sho's Workshop Profitability Calculator & gpw Trading/Crates Calculator",class:"tooltip"},"\u2139\uFE0F")]),b("th",null,[z("CP "),b("abbr",{title:"full cost of operating the workshop (including storage for mats, PLUS connection cost - which MAY also produce storage but at suboptimal cost)",class:"tooltip"},"\u2139\uFE0F")]),b("th",null,"action")],-1)),RMt=["onUpdate:modelValue"],DMt=["onUpdate:modelValue"],NMt=B1('<option value="unk" data-v-f0b2630c>unknown</option><option value="jewelry" data-v-f0b2630c>jewelry</option><option value="mass" data-v-f0b2630c>mass</option><option value="weap" data-v-f0b2630c>weapon</option><option value="tool" data-v-f0b2630c>tool</option><option value="furn" data-v-f0b2630c>furniture</option><option value="costume" data-v-f0b2630c>costume</option><option value="refine" data-v-f0b2630c>refine</option><option value="siege" data-v-f0b2630c>siege</option><option value="mount" data-v-f0b2630c>mount</option><option value="exclus" data-v-f0b2630c>exclusive</option><option value="pack_produce" data-v-f0b2630c>pack_produce</option><option value="pack_herb" data-v-f0b2630c>pack_herb</option><option value="pack_mushr" data-v-f0b2630c>pack_mushr</option><option value="pack_fish" data-v-f0b2630c>pack_fish</option><option value="pack_timber" data-v-f0b2630c>pack_timber</option><option value="pack_ore" data-v-f0b2630c>pack_ore</option>',17),FMt=[NMt],BMt=["onUpdate:modelValue"],$Mt=["onUpdate:modelValue"],zMt=["onUpdate:modelValue"],VMt=["onClick"],UMt=z(" new entry:"),GMt=Pu(()=>b("br",null,null,-1)),jMt={class:"borderless"},WMt=Pu(()=>b("td",null,"town",-1)),HMt=["value"],XMt=Pu(()=>b("td",null,"usage",-1)),YMt=["value"],qMt=Pu(()=>b("td",null,"level",-1)),ZMt=["value"],KMt=Pu(()=>b("td",null,"house",-1)),JMt=["value"],QMt=["disabled"],t4t={key:0,class:"fsxs"};function e4t(e,t,r,n,i,o){return I(),R(W,null,[LMt,b("table",IMt,[OMt,(I(!0),R(W,null,It(n.userStore.userWorkshops,(a,s)=>(I(),R("tr",null,[b("td",null,L(n.gameStore.uloc.char[s]),1),b("td",null,[gt(b("input",{class:"w5em","onUpdate:modelValue":l=>a.label=l},null,8,RMt),[[ve,a.label,void 0,{number:!0}]])]),b("td",null,[gt(b("select",{"onUpdate:modelValue":l=>a.industry=l},FMt,8,DMt),[[Sr,a.industry]])]),b("td",null,[gt(b("input",{type:"number",class:"w5em","onUpdate:modelValue":l=>a.manualWorkload=l},null,8,BMt),[[ve,a.manualWorkload,void 0,{number:!0}]])]),b("td",null,[gt(b("input",{type:"number",class:"w5em","onUpdate:modelValue":l=>a.manualCycleIncome=l},null,8,$Mt),[[ve,a.manualCycleIncome,void 0,{number:!0}]])]),b("td",null,[gt(b("input",{type:"number",class:"float4","onUpdate:modelValue":l=>a.manualCp=l},null,8,zMt),[[ve,a.manualCp,void 0,{number:!0}]])]),b("td",null,[b("button",{onClick:l=>o.deleteWorkshop(s)},"delete",8,VMt)])]))),256))]),UMt,GMt,b("table",jMt,[b("tr",null,[WMt,b("td",null,[gt(b("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>e.filterTown=a)},[(I(!0),R(W,null,It(o.filteredTowns,a=>(I(),R("option",{value:a},L(a>=0?n.gameStore.uloc.town[a]:"any"),9,HMt))),256))],512),[[Sr,e.filterTown]])])]),b("tr",null,[XMt,b("td",null,[gt(b("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>e.filterUsage=a)},[(I(!0),R(W,null,It(o.filteredUsages,a=>(I(),R("option",{value:a},L(a>=0?n.gameStore.uloc.housetype[a]+" "+a:"any"),9,YMt))),256))],512),[[Sr,e.filterUsage]])])]),b("tr",null,[qMt,b("td",null,[gt(b("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>e.filterLevel=a)},[(I(!0),R(W,null,It(o.filteredLevels,a=>(I(),R("option",{value:a},L(a>=0?a+"+":"any"),9,ZMt))),256))],512),[[Sr,e.filterLevel]])])]),b("tr",null,[KMt,b("td",null,[gt(b("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>e.selectedHouse=a)},[(I(!0),R(W,null,It(o.filteredHouses,a=>(I(),R("option",{value:a},L(a)+" "+L(n.gameStore.uloc.char[a])+" "+L(a in n.userStore.userWorkshops?"\u{1F451}":""),9,JMt))),256))],512),[[Sr,e.selectedHouse]])])])]),b("button",{disabled:e.selectedHouse==-1||e.selectedHouse in n.userStore.userWorkshops,onClick:t[4]||(t[4]=a=>o.addWorkshop(e.selectedHouse))},"add",8,QMt),e.selectedHouse in n.userStore.userWorkshops?(I(),R("span",t4t," already in list! ")):tt("",!0)],64)}const r4t=$e(xMt,[["render",e4t],["__scopeId","data-v-f0b2630c"]]);const n4t={setup(){const e=At(),t=re(),r=Ni();return t.$subscribe((n,i)=>{const o=Date.now();localStorage.setItem("user",JSON.stringify(i)),console.log("userStore subscription took",Date.now()-o,"ms")}),{gameStore:e,userStore:t,marketStore:r}},components:{ModalDialog:TP,WorkerEdit:y$,WorkshopsConfig:r4t},data:()=>({workerDialogVisible:!1,workshopsConfigVisible:!1,highlightPending:!1}),watch:{"userStore.marketUrl":{handler(e,t){this.marketStore.fetchData()}}},methods:{makeIconSrc:Vi,formatFixed:Ft,reload(){this.marketStore.ready=!1,this.marketStore.fetchData()},highlightHash(){if(!!this.highlightPending&&(console.log("highlighting",this.$route.hash,this.highlightPending),this.$route.hash)){const e=document.querySelector(this.$route.hash);e&&(this.highlightPending=!1,e.scrollIntoView(),e.classList.add("anim"))}}},mounted(){this.highlightPending=!0,this.highlightHash()},updated(){this.$nextTick(()=>{this.highlightHash()})}},un=e=>(Ar("data-v-a40cd435"),e=e(),Cr(),e),i4t={id:"toptext"},o4t=z(" Enable \u{1F33B}Farming (reserve 80 CP for 10 large fences) "),a4t=un(()=>b("br",null,null,-1)),s4t=z(" Total profit:"),l4t=un(()=>b("br",null,null,-1)),u4t=z(" 10 workers: "),c4t=z(" M$/day (use "),f4t=un(()=>b("a",{href:"https://bit.ly/MagicalFarmingProfit"},"MFP",-1)),h4t=z(" to estimate) "),d4t=un(()=>b("br",null,null,-1)),p4t=z(" 0 workers: "),v4t=z(" M$/day (half growth speed) "),g4t=un(()=>b("div",{class:"spacer"},null,-1)),m4t={class:"sa"},_4t=z(" Default worker for hire: "),y4t=z(" "+L(" ")+" "),b4t=un(()=>b("label",{for:"f"},"Random Artisan Goblin",-1)),w4t=z(" "+L(" ")+" "),S4t=z(" "+L(" ")+" "),T4t=un(()=>b("label",{for:"t"},"Custom",-1)),P4t=un(()=>b("br",null,null,-1)),E4t=z(" Tax: "),k4t=B1('<option value="0.65" data-v-a40cd435>0.65 (0)</option><option value="0.65325" data-v-a40cd435>0.65325 (1000)</option><option value="0.6565" data-v-a40cd435>0.6565 (4000)</option><option value="0.65975" data-v-a40cd435>0.65975 (7000)</option><option value="0.65975" data-v-a40cd435>0.69225 (7000 + ring)</option><option value="0.845" data-v-a40cd435>0.845 (0 + VP)</option><option value="0.84825" data-v-a40cd435>0.84825 (1000 + VP)</option><option value="0.8515" data-v-a40cd435>0.8515 (4000 + VP)</option><option value="0.85475" data-v-a40cd435>0.85475 (7000 + VP)</option><option value="0.88725" data-v-a40cd435>0.88725 (7000 + ring + VP)</option><option value="1" data-v-a40cd435>1 (ironman)</option>',11),A4t=[k4t],C4t=z(" Language: "),M4t=un(()=>b("option",null,"en",-1)),x4t=un(()=>b("option",null,"ru",-1)),L4t=un(()=>b("option",null,"ko",-1)),I4t=[M4t,x4t,L4t],O4t=z(" Server: "),R4t=B1("<option data-v-a40cd435>NA</option><option data-v-a40cd435>EU</option><option data-v-a40cd435>RU</option><option data-v-a40cd435>KR</option><option data-v-a40cd435>JP</option><option data-v-a40cd435>TH</option><option data-v-a40cd435>TW</option><option data-v-a40cd435>SA</option><option data-v-a40cd435>SEA</option><option data-v-a40cd435>MENA</option><option data-v-a40cd435>CEU</option><option data-v-a40cd435>CNA</option>",12),D4t=[R4t],N4t=z(") "),F4t=un(()=>b("div",{class:"spacer"},null,-1)),B4t=z(" Market API status: "),$4t={key:1},z4t={key:2},V4t=z(" \xA0"),U4t=un(()=>b("p",null,"By default everything marketable is supposed to be sold on Central Market (with tax).",-1)),G4t=un(()=>b("p",null,"If the item is for self use, select Keep (=untax) and/or enter Custom price:",-1)),j4t={class:"scrollable"},W4t=un(()=>b("tr",null,[b("th",null,"Item"),b("th",null,"Market"),b("th",null,"Custom"),b("th",null,"Keep"),b("th",null,"Value")],-1)),H4t=["id"],X4t=["href"],Y4t=["src","data-key"],q4t=z(" "+L(" ")+" "),Z4t={key:0},K4t=["title"],J4t={class:"right"},Q4t=["href"],t6t=["onUpdate:modelValue"],e6t={class:"center"},r6t=["disabled","onUpdate:modelValue"],n6t={class:"right"};function i6t(e,t,r,n,i,o){const a=pe("WorkerEdit"),s=pe("ModalDialog"),l=pe("WorkshopsConfig");return I(),R(W,null,[xt(s,{show:e.workerDialogVisible,"onUpdate:show":t[1]||(t[1]=u=>e.workerDialogVisible=u)},{default:Ee(()=>[xt(a,{workerEditing:n.userStore.defaultWorker,initialProfit:0,show:e.workerDialogVisible,"onUpdate:show":t[0]||(t[0]=u=>e.workerDialogVisible=u)},null,8,["workerEditing","show"])]),_:1},8,["show"]),xt(s,{show:e.workshopsConfigVisible,"onUpdate:show":t[2]||(t[2]=u=>e.workshopsConfigVisible=u)},{default:Ee(()=>[xt(l)]),_:1},8,["show"]),b("main",null,[b("div",i4t,[gt(b("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=u=>n.userStore.farmingEnable=u)},null,512),[[ar,n.userStore.farmingEnable]]),o4t,n.userStore.farmingEnable?(I(),R(W,{key:0},[a4t,s4t,l4t,u4t,gt(b("input",{type:"number",class:"float4","onUpdate:modelValue":t[4]||(t[4]=u=>n.userStore.farmingProfit=u)},null,512),[[ve,n.userStore.farmingProfit,void 0,{number:!0}]]),c4t,f4t,h4t,d4t,p4t,gt(b("input",{type:"number",class:"float4","onUpdate:modelValue":t[5]||(t[5]=u=>n.userStore.farmingBareProfit=u)},null,512),[[ve,n.userStore.farmingBareProfit,void 0,{number:!0}]]),v4t],64)):tt("",!0),g4t,b("p",m4t,[b("button",{onClick:t[6]||(t[6]=u=>e.workshopsConfigVisible=!0)},"\u{1F3ED}Workshops config")]),_4t,gt(b("input",{type:"radio",name:"dw",id:"f",value:!1,"onUpdate:modelValue":t[7]||(t[7]=u=>n.userStore.useDefaultWorker=u)},null,512),[[hd,n.userStore.useDefaultWorker]]),y4t,b4t,w4t,gt(b("input",{type:"radio",name:"dw",id:"t",value:!0,"onUpdate:modelValue":t[8]||(t[8]=u=>n.userStore.useDefaultWorker=u)},null,512),[[hd,n.userStore.useDefaultWorker]]),S4t,T4t,z(" ("+L(o.formatFixed(n.gameStore.workerStatsOnPlantzone(n.userStore.defaultWorker).wspd,2))+"\u{1F528} "+L(o.formatFixed(n.gameStore.workerStatsOnPlantzone(n.userStore.defaultWorker).mspd,2))+"\u{1F9B6} "+L(o.formatFixed(n.gameStore.workerStatsOnPlantzone(n.userStore.defaultWorker).luck,2))+"\u{1F340}) ",1),b("button",{onClick:t[9]||(t[9]=u=>e.workerDialogVisible=!0)},"edit"),P4t,E4t,gt(b("select",{"onUpdate:modelValue":t[10]||(t[10]=u=>n.userStore.selectedTax=u)},A4t,512),[[Sr,n.userStore.selectedTax]]),C4t,gt(b("select",{"onUpdate:modelValue":t[11]||(t[11]=u=>n.userStore.selectedLang=u),onChange:t[12]||(t[12]=(...u)=>e.fetchMarket&&e.fetchMarket(...u))},I4t,544),[[Sr,n.userStore.selectedLang]]),O4t,gt(b("select",{"onUpdate:modelValue":t[13]||(t[13]=u=>n.userStore.selectedRegion=u),onChange:t[14]||(t[14]=(...u)=>e.fetchMarket&&e.fetchMarket(...u))},D4t,544),[[Sr,n.userStore.selectedRegion]]),z(" \u2192 base storage: "+L(n.userStore.baseStorage)+" (VP always on ",1),gt(b("input",{type:"checkbox","onUpdate:modelValue":t[15]||(t[15]=u=>n.userStore.storageVP=u)},null,512),[[ar,n.userStore.storageVP]]),N4t,F4t,B4t,n.marketStore.apiAlive?(I(),R("span",$4t,"\u2713")):(I(),R("span",z4t,"\u274C")),V4t,b("button",{onClick:t[16]||(t[16]=u=>o.reload())},"reload"),U4t,G4t]),b("div",j4t,[b("table",null,[W4t,(I(!0),R(W,null,It(n.gameStore.itemKeys,u=>(I(),R("tr",{id:"item"+u},[b("td",null,[b("a",{href:this.userStore.itemUrl+u},[b("img",{src:o.makeIconSrc(u),class:"iconitem","data-key":u},null,8,Y4t),z(" "+L(n.gameStore.uloc.item[u]),1)],8,X4t),q4t,u in n.marketStore.calculatedPrices?(I(),R("span",Z4t,[b("abbr",{class:"tooltip",title:`contains:
`+Object.entries(n.marketStore.calculatedPrices[u]).map(([c,f])=>o.formatFixed(f,3)+" "+n.gameStore.uloc.item[c]).join(`
`)},"\u2139\uFE0F",8,K4t)])):tt("",!0)]),b("td",J4t,[u in n.marketStore.apiPrices?(I(),R("a",{key:0,href:this.marketStore.itemPriceUrl(u)},L(o.formatFixed(n.marketStore.apiPrices[u])),9,Q4t)):(I(),R(W,{key:1},[z(L(o.formatFixed(n.gameStore.vendorPrices[u])),1)],64))]),b("td",null,[gt(b("input",{type:"number",class:"mid right","onUpdate:modelValue":c=>n.userStore.customPrices[u]=c},null,8,t6t),[[ve,n.userStore.customPrices[u],void 0,{number:!0}]])]),b("td",e6t,[gt(b("input",{type:"checkbox",disabled:u in n.gameStore.vendorPrices,"onUpdate:modelValue":c=>n.userStore.keepItems[u]=c},null,8,r6t),[[ar,n.userStore.keepItems[u]]])]),b("td",n6t,L(o.formatFixed(n.marketStore.prices[u])),1)],8,H4t))),256))])])])],64)}const o6t=$e(n4t,[["render",i6t],["__scopeId","data-v-a40cd435"]]);const a6t={setup(){const e=At(),t=re(),r=Ni();return{gameStore:e,userStore:t,marketStore:r}},data:()=>({}),watch:{},methods:{formatFixed:Ft},computed:{plantzonesNearestCpTownsProfits150(){const e=Date.now();let t={};for(const r of Object.keys(this.gameStore.plantzones))t[r]=this.gameStore.plantzoneNearestCpTownsProfits150(r,3);return console.log("cpt: plantzonesNearestCpTownsProfits took",Date.now()-e,"ms"),t}}},s6t=b("div",{id:"toptext"},[b("p",null,"Using 150/10/10 worker")],-1),l6t=b("tr",null,[b("th",null,"Node/Town"),b("th",null,"connect"),b("th",null,"distance"),b("th",null,"M$/day"),b("th",null,"M$/day/CP")],-1),u6t={colspan:"5"};function c6t(e,t,r,n,i,o){return I(),R(W,null,[s6t,b("table",null,[l6t,(I(!0),R(W,null,It(n.gameStore.plantzones,(a,s)=>(I(),R(W,null,[b("tr",null,[b("td",u6t,[b("h3",null,L(s)+" "+L(a.name),1)])]),(I(!0),R(W,null,It(o.plantzonesNearestCpTownsProfits150[s],l=>(I(),R("tr",null,[b("td",null,L(n.gameStore.nodeName(l.tnk)),1),b("td",null,L(l.cp)+"CP ",1),b("td",null,L(o.formatFixed(l.dist,0)),1),b("td",null,L(o.formatFixed(l.priceDaily,2)),1),b("td",null,L(o.formatFixed(l.dailyPerCp,3)),1)]))),256))],64))),256))])],64)}const f6t=$e(a6t,[["render",c6t]]),h6t={setup(){const e=At(),t=re();return{gameStore:e,userStore:t}},data:()=>({houses:{},houseCrafts:{},towns:[-1],usages:[-1],filterTown:-1,filterUsage:-1}),created(){this.fetchData()},mounted(){},watch:{},methods:{makeIconSrc:Vi,async fetchData(){this.houseCrafts=await(await fetch("data/houseinforeceipe.json")).json(),this.craftItems=await(await fetch("data/house_craft_outputs.json")).json(),this.houses=await(await fetch("data/houseinfo.json")).json();const e=new Set([-1]),t=new Set([-1]);for(const[r,n]of Object.entries(this.houses)){e.add(n.affTown);for(const[o,a]of Object.entries(n.CraftList))t.add(o);this.houses[r].CPfull=this.houses[r].CP;let i=n.needHouseKey;for(;i;)this.houses[r].CPfull+=this.houses[i].CP,i=this.houses[i].needHouseKey}this.towns=e,this.usages=[...t].sort((r,n)=>r-n)}}},d6t={id:"toptext"},p6t=z(" Town: "),v6t=["value"],g6t=z(" Usage: "),m6t=["value"],_6t={key:0},y6t=b("summary",null,"Craftables",-1),b6t=["href"],w6t=["src","data-key"],S6t=b("tr",null,[b("th",null,"town"),b("th",null,"node"),b("th",null,"name"),b("th",null,"CP"),b("th",null,"usage/level")],-1),T6t={key:0},P6t=["href"],E6t=z(L(" "));function k6t(e,t,r,n,i,o){return I(),R("main",null,[b("div",d6t,[p6t,gt(b("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>e.filterTown=a)},[(I(!0),R(W,null,It(e.towns,a=>(I(),R("option",{value:a},L(a>=0?n.gameStore.uloc.town[a]:"any"),9,v6t))),256))],512),[[Sr,e.filterTown]]),g6t,gt(b("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>e.filterUsage=a)},[(I(!0),R(W,null,It(e.usages,a=>(I(),R("option",{value:a},L(a>=0?n.gameStore.uloc.housetype[a]+" "+a:"any"),9,m6t))),256))],512),[[Sr,e.filterUsage]]),e.filterUsage!=-1?(I(),R("details",_6t,[y6t,(I(!0),R(W,null,It(this.houseCrafts[e.filterUsage].groups,(a,s)=>(I(),R("div",null,[z(" level "+L(s+1)+": ",1),b("table",null,[(I(!0),R(W,null,It(a,l=>(I(),R("tr",null,[(I(!0),R(W,null,It(this.craftItems[l],u=>(I(),R("a",{href:this.userStore.itemUrl+u},[b("img",{src:o.makeIconSrc(u),class:"iconitem","data-key":u},null,8,w6t),z(" "+L(n.gameStore.uloc.item[u]),1)],8,b6t))),256))]))),256))])]))),256))])):tt("",!0)]),b("table",null,[S6t,(I(!0),R(W,null,It(e.houses,(a,s)=>(I(),R(W,null,[(e.filterTown==-1||a.affTown==e.filterTown)&&(e.filterUsage==-1||e.filterUsage in a.CraftList)?(I(),R("tr",T6t,[b("td",null,L(a.affTown),1),b("td",null,L(a.parentNode),1),b("td",null,[b("a",{href:"https://bdocodex.com/us/npc/"+a.key},L(n.gameStore.uloc.char[a.key]),9,P6t)]),b("td",null,L(a.CP)+" ("+L(a.CPfull)+")",1),b("td",null,[(I(!0),R(W,null,It(a.CraftList,(l,u)=>(I(),R("span",null,[z(L(n.gameStore.uloc.housetype[u]),1),b("sup",null,L(l),1),E6t]))),256))])])):tt("",!0)],64))),256))])])}const A6t=$e(h6t,[["render",k6t]]);Hr([yf,Mst,Sf,wf,Tf]);const C6t={setup(){const e=re();return{gameStore:At(),userStore:e}},components:{VChart:Pf},props:{show:{type:Boolean,default:!1}},data:()=>({tk:5,wantLodging:0,wantStorage:0}),computed:{bestLookup(){return this.gameStore.lsLookup(this.tk,this.wantLodging,this.wantStorage)},sortedResult(){const e=[],t=this.bestLookup;if(t&&t.success){for(let r=0;r<t.indices.length;r++){const n=t.indices[r],i=this.gameStore.uloc.char[n],o=t.states[r];e.push({hk:n,name:i,state:o})}e.sort((r,n)=>r.hk-n.hk)}return e},storageCost(){let e=0;for(const t of this.sortedResult)t.state==1&&(e+=this.gameStore.houseCost(t.hk));return e},lodgingCost(){let e=0;for(const t of this.sortedResult)t.state==2&&(e+=this.gameStore.houseCost(t.hk));return e},townChains(){const e={};for(const t of this.gameStore.housesPerTown[this.tk]){e[t]=[];let r=Number(t);for(;r!=0;)e[t].unshift(r),r=this.gameStore.houseInfo[r].needHouseKey}return e},townTree(){const e={name:"",value:this.gameStore.uloc.town[this.tk],children:[]};if(!this.gameStore.ready||!this.bestLookup.success)return e;for(const t of this.gameStore.housesPerTown[this.tk]){let r=e;for(const n of this.townChains[t]){const i=r.children.findIndex(o=>o.name==n);if(i>=0)r=r.children[i];else{let o=0;if(this.bestLookup){const s=this.bestLookup.indices.indexOf(n);s!==-1&&(o=this.bestLookup.states[s])}const a={name:n,value:{label:this.gameStore.uloc.char[n],lodging:this.gameStore.houseLodging(n),storage:this.gameStore.houseStorage(n),cp:this.gameStore.houseCost(n)},lineStyle:r.name==0?{color:"transparent"}:o>0?o==2?{color:"#fe6"}:{color:"#a5f"}:{},itemStyle:o>0?o==2?{color:"#fe6"}:{color:"#a5f"}:{},children:[]};r.children.push(a),r=a}}}return e},chartOption(){return{tooltip:{trigger:"item",triggerOn:"mousemove",formatter:function(e){const t=e.value;return e.name==0?t:`${e.name} ${t.label}<br/>${t.lodging}\u{1F6CF}\uFE0F ${t.storage}\u{1F4E6} ${t.cp}CP`}},series:[{type:"tree",layout:"radial",roam:!0,data:[this.townTree],top:"1%",left:"1%",bottom:"1%",right:"1%",symbolSize:6,initialTreeDepth:9,label:{fontSize:9,color:"gray",position:"top",formatter:function(e){const t=e.value;return e.name==0?"":`{r|${t.lodging}} {o|${t.storage}} ${t.cp}`},rich:{r:{fontSize:9},o:{fontSize:9}}},leaves:{label:{}},emphasis:{focus:"descendant"}}]}}},methods:{formatFixed:Ft}},Q0=e=>(Ar("data-v-11d057ef"),e=e(),Cr(),e),M6t={class:"limit"},x6t={id:"controls"},L6t=Q0(()=>b("p",null,[z("data from "),b("a",{href:"https://github.com/Thell/bdo-housecraft"},"Thell/bdo-housecraft")],-1)),I6t={id:"fluid"},O6t={id:"sliders"},R6t={key:0},D6t=Q0(()=>b("tr",null,[b("th"),b("th",null,"wanted"),b("th",null,"found"),b("th",null,"cost"),b("th",null,"per CP")],-1)),N6t=Q0(()=>b("th",{class:"lodging"},"lodging ",-1)),F6t=["max"],B6t=Q0(()=>b("th",{class:"storage"},"storage",-1)),$6t=["max"],z6t={colspan:"3"},V6t=z(" town "),U6t=["value"],G6t={colspan:"2"},j6t=Q0(()=>b("div",{style:{clear:"both"}},null,-1)),W6t={key:0,id:"houselist"};function H6t(e,t,r,n,i,o){const a=pe("v-chart");return I(),R("main",null,[b("div",M6t,[b("div",x6t,[L6t,b("div",I6t,[b("div",O6t,[this.gameStore.ready?(I(),R("table",R6t,[D6t,b("tr",null,[N6t,b("th",null,[gt(b("input",{type:"range",class:"wlong","onUpdate:modelValue":t[0]||(t[0]=s=>e.wantLodging=s),min:"0",max:Math.min(n.gameStore.ready?n.gameStore.townUpperLimits[e.tk].lodging:999,100)},null,8,F6t),[[ve,e.wantLodging,void 0,{number:!0}]]),z(L(e.wantLodging),1)]),b("th",null,L(o.bestLookup?o.bestLookup.lodging:"?"),1),b("th",null,L(o.lodgingCost)+" CP",1),b("th",null,L(o.bestLookup?o.formatFixed(o.bestLookup.lodging/o.lodgingCost,3):"?"),1)]),b("tr",null,[B6t,b("th",null,[gt(b("input",{type:"range",class:"wlong","onUpdate:modelValue":t[1]||(t[1]=s=>e.wantStorage=s),min:"0",max:Math.min(n.gameStore.ready?n.gameStore.townUpperLimits[e.tk].storage:999,192-8)},null,8,$6t),[[ve,e.wantStorage,void 0,{number:!0}]]),z(L(e.wantStorage),1)]),b("th",null,L(o.bestLookup?o.bestLookup.storage:"?"),1),b("th",null,L(o.storageCost)+" CP",1),b("th",null,L(o.bestLookup?o.formatFixed(o.bestLookup.storage/o.storageCost,3):"?"),1)]),b("tr",null,[b("th",z6t,[V6t,gt(b("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>e.tk=s)},[(I(!0),R(W,null,It(this.gameStore._tk2tnk,(s,l)=>(I(),R("option",{value:l},L(n.gameStore.uloc.town[l]),9,U6t))),256))],512),[[Sr,e.tk]])]),b("th",G6t,L(o.bestLookup?o.bestLookup.cost:"?")+" CP total",1)])])):tt("",!0)])])]),j6t,o.bestLookup?(I(),R("div",W6t,[(I(!0),R(W,null,It(o.sortedResult,s=>(I(),R(W,null,[s.state>0?(I(),R("p",{key:0,class:en({storage:s.state==1,lodging:s.state==2})},L(s.name),3)):tt("",!0)],64))),256))])):tt("",!0),xt(a,{class:"chart",option:o.chartOption},null,8,["option"])])])}const X6t=$e(C6t,[["render",H6t],["__scopeId","data-v-11d057ef"]]);/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Y6t=typeof Object.defineProperty=="function"?Object.defineProperty:null,q6t=Y6t;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Z6t=q6t;function K6t(){try{return Z6t({},"x",{}),!0}catch{return!1}}var J6t=K6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Q6t=Object.defineProperty,t5t=Q6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xf=Object.prototype,WI=xf.toString,HI=xf.__defineGetter__,XI=xf.__defineSetter__,e5t=xf.__lookupGetter__,r5t=xf.__lookupSetter__;function n5t(e,t,r){var n,i,o,a;if(typeof e!="object"||e===null||WI.call(e)==="[object Array]")throw new TypeError("invalid argument. First argument must be an object. Value: `"+e+"`.");if(typeof r!="object"||r===null||WI.call(r)==="[object Array]")throw new TypeError("invalid argument. Property descriptor must be an object. Value: `"+r+"`.");if(i="value"in r,i&&(e5t.call(e,t)||r5t.call(e,t)?(n=e.__proto__,e.__proto__=xf,delete e[t],e[t]=r.value,e.__proto__=n):e[t]=r.value),o="get"in r,a="set"in r,i&&(o||a))throw new Error("invalid argument. Cannot specify one or more accessors and a value or writable attribute in the property descriptor.");return o&&HI&&HI.call(e,t,r.get),a&&XI&&XI.call(e,t,r.set),e}var i5t=n5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var o5t=J6t,a5t=t5t,s5t=i5t,yT;o5t()?yT=a5t:yT=s5t;var GV=yT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var l5t=GV;function u5t(e,t,r){l5t(e,t,{configurable:!1,enumerable:!0,writable:!1,value:r})}var c5t=u5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var f5t=c5t,h5t=f5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var d5t=GV;function p5t(e,t,r){d5t(e,t,{configurable:!1,enumerable:!1,writable:!1,value:r})}var v5t=p5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var g5t=v5t,vr=g5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var m5t=Math.floor,_5t=m5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var y5t=_5t,On=y5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var b5t=On;function w5t(e){return b5t(e)===e}var S5t=w5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var T5t=S5t,Bs=T5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var P5t=4294967295>>>0,E5t=P5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var k5t=Bs,A5t=E5t;function C5t(e){return e!=null&&typeof e!="function"&&typeof e.length=="number"&&k5t(e.length)&&e.length>=0&&e.length<=A5t}var M5t=C5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var x5t=M5t,L5t=x5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var I5t=L5t;function O5t(e){if(typeof e!="function")throw new TypeError("invalid argument. Must provide a function. Value: `"+e+"`.");return t;function t(r){var n,i;if(!I5t(r)||(n=r.length,n===0))return!1;for(i=0;i<n;i++)if(e(r[i])===!1)return!1;return!0}}var R5t=O5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var D5t=R5t,N5t=D5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function F5t(e){return typeof e=="number"}var jV=F5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function B5t(){return typeof Symbol=="function"&&typeof Symbol("foo")=="symbol"}var $5t=B5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var z5t=$5t,V5t=z5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var U5t=V5t,G5t=U5t();function j5t(){return G5t&&typeof Symbol.toStringTag=="symbol"}var W5t=j5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var H5t=W5t,B_=H5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var X5t=Object.prototype.toString,WV=X5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Y5t=WV;function q5t(e){return Y5t.call(e)}var Z5t=q5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var K5t=Object.prototype.hasOwnProperty;function J5t(e,t){return e==null?!1:K5t.call(e,t)}var Q5t=J5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var txt=Q5t,$_=txt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ext=typeof Symbol=="function"?Symbol.toStringTag:"",rxt=ext;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nxt=$_,Ch=rxt,Fb=WV;function ixt(e){var t,r,n;if(e==null)return Fb.call(e);r=e[Ch],t=nxt(e,Ch);try{e[Ch]=void 0}catch{return Fb.call(e)}return n=Fb.call(e),t?e[Ch]=r:delete e[Ch],n}var oxt=ixt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var axt=B_,sxt=Z5t,lxt=oxt,bT;axt()?bT=lxt:bT=sxt;var Xi=bT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uxt=Number;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cxt=uxt,zk=cxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fxt=zk,hxt=fxt.prototype.toString,dxt=hxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pxt=dxt;function vxt(e){try{return pxt.call(e),!0}catch{return!1}}var gxt=vxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mxt=B_,_xt=Xi,yxt=zk,bxt=gxt,wxt=mxt();function Sxt(e){return typeof e=="object"?e instanceof yxt?!0:wxt?bxt(e):_xt(e)==="[object Number]":!1}var HV=Sxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Txt=jV,Pxt=HV;function Ext(e){return Txt(e)||Pxt(e)}var kxt=Ext;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XV=vr,Vk=kxt,Axt=jV,Cxt=HV;XV(Vk,"isPrimitive",Axt);XV(Vk,"isObject",Cxt);var Lf=Vk;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var YV=vr,Uk=N5t,Gk=Lf,Mxt=Uk(Gk.isPrimitive),xxt=Uk(Gk.isObject),jk=Uk(Gk);YV(jk,"primitives",Mxt);YV(jk,"objects",xxt);var Lxt=jk;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ixt=Number.POSITIVE_INFINITY,Ne=Ixt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Oxt=zk,Rxt=Oxt.NEGATIVE_INFINITY,xr=Rxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Dxt=Ne,Nxt=xr,Fxt=Bs;function Bxt(e){return e<Dxt&&e>Nxt&&Fxt(e)}var qV=Bxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $xt=Lf.isPrimitive,zxt=qV;function Vxt(e){return $xt(e)&&zxt(e)}var ZV=Vxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Uxt=Lf.isObject,Gxt=qV;function jxt(e){return Uxt(e)&&Gxt(e.valueOf())}var KV=jxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Wxt=ZV,Hxt=KV;function Xxt(e){return Wxt(e)||Hxt(e)}var Yxt=Xxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var JV=vr,Wk=Yxt,qxt=ZV,Zxt=KV;JV(Wk,"isPrimitive",qxt);JV(Wk,"isObject",Zxt);var z_=Wk;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Kxt=z_.isPrimitive;function Jxt(e){return Kxt(e)&&e>=0}var QV=Jxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Qxt=z_.isObject;function tLt(e){return Qxt(e)&&e.valueOf()>=0}var tU=tLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eLt=QV,rLt=tU;function nLt(e){return eLt(e)||rLt(e)}var iLt=nLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eU=vr,Hk=iLt,oLt=QV,aLt=tU;eU(Hk,"isPrimitive",oLt);eU(Hk,"isObject",aLt);var sLt=Hk;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function lLt(e){return e!==e}var uLt=lLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cLt=uLt,Zt=cLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function fLt(e,t){var r,n;if(n=e.length,n<2||t===0)return n===0?0:e[0];for(n-=1,r=e[n]*t+e[n-1],n-=2;n>=0;)r=r*t+e[n],n-=1;return r}var rU=fLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hLt=rU;function dLt(e){var t,r,n,i;if(e.length>500)return o;if(t="return function evalpoly(x){",r=e.length,r===0)t+="return 0.0;";else if(r===1)t+="return "+e[0]+";";else{for(t+="if(x===0.0){return "+e[0]+";}",t+="return "+e[0],n=r-1,i=1;i<r;i++)t+="+x*",i<n&&(t+="("),t+=e[i];for(i=0;i<n-1;i++)t+=")";t+=";"}return t+="}",t+="//# sourceURL=evalpoly.factory.js",new Function(t)();function o(a){return hLt(e,a)}}var pLt=dLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vLt=vr,nU=rU,gLt=pLt;vLt(nU,"factory",gLt);var $s=nU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mLt=Xi,_Lt=typeof Uint32Array=="function";function yLt(e){return _Lt&&e instanceof Uint32Array||mLt(e)==="[object Uint32Array]"}var bLt=yLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wLt=bLt,SLt=wLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var TLt=4294967295,PLt=TLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ELt=typeof Uint32Array=="function"?Uint32Array:null,kLt=ELt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ALt=SLt,Bb=PLt,YI=kLt;function CLt(){var e,t;if(typeof YI!="function")return!1;try{t=[1,3.14,-3.14,Bb+1,Bb+2],t=new YI(t),e=ALt(t)&&t[0]===1&&t[1]===3&&t[2]===Bb-2&&t[3]===0&&t[4]===1}catch{e=!1}return e}var MLt=CLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xLt=MLt,LLt=xLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ILt=typeof Uint32Array=="function"?Uint32Array:void 0,OLt=ILt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function RLt(){throw new Error("not implemented")}var DLt=RLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NLt=LLt,FLt=OLt,BLt=DLt,wT;NLt()?wT=FLt:wT=BLt;var If=wT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $Lt=Xi,zLt=typeof Float64Array=="function";function VLt(e){return zLt&&e instanceof Float64Array||$Lt(e)==="[object Float64Array]"}var ULt=VLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GLt=ULt,jLt=GLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var WLt=typeof Float64Array=="function"?Float64Array:null,HLt=WLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XLt=jLt,qI=HLt;function YLt(){var e,t;if(typeof qI!="function")return!1;try{t=new qI([1,3.14,-3.14,NaN]),e=XLt(t)&&t[0]===1&&t[1]===3.14&&t[2]===-3.14&&t[3]!==t[3]}catch{e=!1}return e}var qLt=YLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZLt=qLt,KLt=ZLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var JLt=typeof Float64Array=="function"?Float64Array:void 0,QLt=JLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tIt(){throw new Error("not implemented")}var eIt=tIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rIt=KLt,nIt=QLt,iIt=eIt,ST;rIt()?ST=nIt:ST=iIt;var Of=ST;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oIt=Xi,aIt=typeof Uint8Array=="function";function sIt(e){return aIt&&e instanceof Uint8Array||oIt(e)==="[object Uint8Array]"}var lIt=sIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uIt=lIt,cIt=uIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fIt=255,hIt=fIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dIt=typeof Uint8Array=="function"?Uint8Array:null,pIt=dIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vIt=cIt,$b=hIt,ZI=pIt;function gIt(){var e,t;if(typeof ZI!="function")return!1;try{t=[1,3.14,-3.14,$b+1,$b+2],t=new ZI(t),e=vIt(t)&&t[0]===1&&t[1]===3&&t[2]===$b-2&&t[3]===0&&t[4]===1}catch{e=!1}return e}var mIt=gIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _It=mIt,yIt=_It;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bIt=typeof Uint8Array=="function"?Uint8Array:void 0,wIt=bIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function SIt(){throw new Error("not implemented")}var TIt=SIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PIt=yIt,EIt=wIt,kIt=TIt,TT;PIt()?TT=EIt:TT=kIt;var AIt=TT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var CIt=Xi,MIt=typeof Uint16Array=="function";function xIt(e){return MIt&&e instanceof Uint16Array||CIt(e)==="[object Uint16Array]"}var LIt=xIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var IIt=LIt,OIt=IIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var RIt=65535,DIt=RIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NIt=typeof Uint16Array=="function"?Uint16Array:null,FIt=NIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var BIt=OIt,zb=DIt,KI=FIt;function $It(){var e,t;if(typeof KI!="function")return!1;try{t=[1,3.14,-3.14,zb+1,zb+2],t=new KI(t),e=BIt(t)&&t[0]===1&&t[1]===3&&t[2]===zb-2&&t[3]===0&&t[4]===1}catch{e=!1}return e}var zIt=$It;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var VIt=zIt,UIt=VIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GIt=typeof Uint16Array=="function"?Uint16Array:void 0,jIt=GIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function WIt(){throw new Error("not implemented")}var HIt=WIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XIt=UIt,YIt=jIt,qIt=HIt,PT;XIt()?PT=YIt:PT=qIt;var ZIt=PT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var KIt=AIt,JIt=ZIt,QIt={uint16:JIt,uint8:KIt},tOt=QIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var JI=tOt,iU;function eOt(){var e,t;return e=new JI.uint16(1),e[0]=4660,t=new JI.uint8(e.buffer),t[0]===52}iU=eOt();var rOt=iU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nOt=rOt,Rf=nOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iOt=Rf,ET;iOt===!0?ET=1:ET=0;var oOt=ET;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aOt=If,sOt=Of,lOt=oOt,oU=new sOt(1),uOt=new aOt(oU.buffer);function cOt(e){return oU[0]=e,uOt[lOt]}var fOt=cOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hOt=fOt,li=hOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dOt=Rf,kT;dOt===!0?kT=1:kT=0;var pOt=kT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vOt=If,gOt=Of,mOt=pOt,AT=new gOt(1),_Ot=new vOt(AT.buffer);function yOt(e,t){return AT[0]=e,_Ot[mOt]=t>>>0,AT[0]}var bOt=yOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wOt=bOt,tp=wOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SOt=1023,Eu=SOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var TOt=.34657359027997264,POt=TOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function EOt(e){return e===0?-.03333333333333313:-.03333333333333313+e*(.0015873015872548146+e*(-793650757867488e-19+e*(4008217827329362e-21+e*-20109921818362437e-23)))}var kOt=EOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FDLIBM]{@link http://www.netlib.org/fdlibm/s_expm1.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var AOt=Zt,Vb=li,zv=tp,QI=Ne,COt=xr,MOt=Eu,xOt=POt,LOt=kOt,IOt=709.782712893384,Ub=.6931471803691238,Gb=19082149292705877e-26,tO=1.4426950408889634,OOt=38.816242111356935,ROt=1.0397207708399179;function DOt(e){var t,r,n,i,o,a,s,l,u,c,f,h;if(e===QI||AOt(e))return e;if(e===COt)return-1;if(e===0)return e;if(e<0?(r=!0,s=-e):(r=!1,s=e),s>=OOt){if(r)return-1;if(s>=IOt)return QI}if(o=Vb(s)|0,s>xOt)s<ROt?r?(n=e+Ub,i=-Gb,h=-1):(n=e-Ub,i=Gb,h=1):(r?h=tO*e-.5:h=tO*e+.5,h|=0,c=h,n=e-c*Ub,i=c*Gb),e=n-i,u=n-e-i;else{if(o<1016070144)return e;h=0}return t=.5*e,l=e*t,a=1+l*LOt(l),c=3-a*t,f=l*((a-c)/(6-e*c)),h===0?e-(e*f-l):(f=e*(f-u)-u,f-=l,h===-1?.5*(e-f)-.5:h===1?e<-.25?-2*(f-(e+.5)):1+2*(e-f):h<=-2||h>56?(s=1-(f-e),n=Vb(s)+(h<<20)|0,s=zv(s,n),s-1):(c=1,h<20?(n=1072693248-(2097152>>h)|0,c=zv(c,n),s=c-(f-e)):(n=MOt-h<<20|0,c=zv(c,n),s=e-(f+c),s+=1),n=Vb(s)+(h<<20)|0,zv(s,n)))}var NOt=DOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var FOt=NOt,Df=FOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function BOt(e){return e===0?.6666666666666735:.6666666666666735+e*(.3999999999940942+e*(.2857142874366239+e*(.22222198432149784+e*(.1818357216161805+e*(.15313837699209373+e*.14798198605116586)))))}var $Ot=BOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FDLIBM]{@link http://www.netlib.org/fdlibm/s_log1p.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var zOt=Zt,eO=li,rO=tp,VOt=Ne,UOt=xr,nO=Eu,GOt=$Ot,jb=.6931471803691238,Wb=19082149292705877e-26,jOt=.41421356237309503,WOt=-.2928932188134525,HOt=1862645149230957e-24,XOt=5551115123125783e-32,YOt=9007199254740992,qOt=.6666666666666666;function ZOt(e){var t,r,n,i,o,a,s,l,u,c;if(e<-1||zOt(e))return NaN;if(e===-1)return UOt;if(e===VOt||e===0)return e;if(e<0?n=-e:n=e,c=1,n<jOt){if(n<HOt)return n<XOt?e:e-e*e*.5;e>WOt&&(c=0,i=e,r=1)}return c!==0&&(n<YOt?(u=1+e,r=eO(u),c=(r>>20)-nO,c>0?o=1-(u-e):o=e-(u-1),o/=u):(u=e,r=eO(u),c=(r>>20)-nO,o=0),r&=1048575,r<434334?u=rO(u,r|1072693248):(c+=1,u=rO(u,r|1071644672),r=1048576-r>>2),i=u-1),t=.5*i*i,r===0?i===0?(o+=c*Wb,c*jb+o):(l=t*(1-qOt*i),c*jb-(l-(c*Wb+o)-i)):(a=i/(2+i),s=a*a,l=s*GOt(s),c===0?i-(t-a*(t+l)):c*jb-(t-(a*(t+l)+(c*Wb+o))-i))}var KOt=ZOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var JOt=KOt,Rn=JOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var QOt=Math.sqrt,tRt=QOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eRt=tRt,tr=eRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rRt=.7853981633974483,aU=rRt;/**
* @license Apache-2.0
*
* Copyright (c) 2020 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function nRt(e){var t,r,n;return e===0?.16666666666666713:(e<0?t=-e:t=e,t<=1?(r=-8.198089802484825+e*(19.562619833175948+e*(-16.262479672107002+e*(5.444622390564711+e*(-.6019598008014124+e*.004253011369004428)))),n=-49.18853881490881+e*(139.51056146574857+e*(-147.1791292232726+e*(70.49610280856842+e*(-14.740913729888538+e*1))))):(e=1/e,r=.004253011369004428+e*(-.6019598008014124+e*(5.444622390564711+e*(-16.262479672107002+e*(19.562619833175948+e*-8.198089802484825)))),n=1+e*(-14.740913729888538+e*(70.49610280856842+e*(-147.1791292232726+e*(139.51056146574857+e*-49.18853881490881))))),r/n)}var iRt=nRt;/**
* @license Apache-2.0
*
* Copyright (c) 2020 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function oRt(e){var t,r,n;return e===0?.08333333333333809:(e<0?t=-e:t=e,t<=1?(r=28.536655482610616+e*(-25.56901049652825+e*(6.968710824104713+e*(-.5634242780008963+e*.002967721961301243))),n=342.43986579130785+e*(-383.8770957603691+e*(147.0656354026815+e*(-21.947795316429207+e*1)))):(e=1/e,r=.002967721961301243+e*(-.5634242780008963+e*(6.968710824104713+e*(-25.56901049652825+e*28.536655482610616))),n=1+e*(-21.947795316429207+e*(147.0656354026815+e*(-383.8770957603691+e*342.43986579130785)))),r/n)}var aRt=oRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, long comment, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1995, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var sRt=Zt,lRt=tr,iO=aU,uRt=iRt,cRt=aRt,fRt=6123233995736766e-32;function hRt(e){var t,r,n,i,o;if(sRt(e))return NaN;if(e>0?n=e:(t=!0,n=-e),n>1)return NaN;if(n>.625)r=1-n,i=r*cRt(r),r=lRt(r+r),o=iO-r,r=r*i-fRt,o-=r,o+=iO;else{if(n<1e-8)return e;r=n*n,o=r*uRt(r),o=n*o+n}return t?-o:o}var dRt=hRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pRt=dRt,Xk=pRt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function vRt(e){return Math.abs(e)}var gRt=vRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mRt=gRt,he=mRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _Rt=Math.ceil,yRt=_Rt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bRt=yRt,sU=bRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wRt=On,SRt=sU;function TRt(e){return e<0?SRt(e):wRt(e)}var PRt=TRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ERt=PRt,Yk=ERt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kRt=1023,ARt=kRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var CRt=-1023,MRt=CRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xRt=-1074,LRt=xRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var IRt=Ne,ORt=xr;function RRt(e){return e===IRt||e===ORt}var DRt=RRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NRt=DRt,Nf=NRt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var FRt=2147483648>>>0,BRt=FRt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $Rt=2147483647>>>0,V_=$Rt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zRt=Rf,lU,CT,MT;zRt===!0?(CT=1,MT=0):(CT=0,MT=1);lU={HIGH:CT,LOW:MT};var VRt=lU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var URt=If,GRt=Of,uU=VRt,cU=new GRt(1),oO=new URt(cU.buffer),jRt=uU.HIGH,WRt=uU.LOW;function HRt(e,t,r,n){return cU[0]=e,t[n]=oO[jRt],t[n+r]=oO[WRt],t}var fU=HRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XRt=fU;function YRt(e){return XRt(e,[0>>>0,0>>>0],1,0)}var qRt=YRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZRt=vr,hU=qRt,KRt=fU;ZRt(hU,"assign",KRt);var qk=hU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var JRt=Rf,dU,xT,LT;JRt===!0?(xT=1,LT=0):(xT=0,LT=1);dU={HIGH:xT,LOW:LT};var QRt=dU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tDt=If,eDt=Of,pU=QRt,vU=new eDt(1),aO=new tDt(vU.buffer),rDt=pU.HIGH,nDt=pU.LOW;function iDt(e,t){return aO[rDt]=e,aO[nDt]=t,vU[0]}var oDt=iDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aDt=oDt,Zk=aDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sDt=BRt,lDt=V_,uDt=qk,cDt=li,fDt=Zk,Hb=[0,0];function hDt(e,t){var r,n;return uDt.assign(e,Hb,1,0),r=Hb[0],r&=lDt,n=cDt(t),n&=sDt,r|=n,fDt(r,Hb[1])}var dDt=hDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pDt=dDt,Kk=pDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vDt=22250738585072014e-324,ku=vDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gDt=ku,mDt=Nf,_Dt=Zt,yDt=he,bDt=4503599627370496;function wDt(e,t,r,n){return _Dt(e)||mDt(e)?(t[n]=e,t[n+r]=0,t):e!==0&&yDt(e)<gDt?(t[n]=e*bDt,t[n+r]=-52,t):(t[n]=e,t[n+r]=0,t)}var gU=wDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SDt=gU;function TDt(e){return SDt(e,[0,0],1,0)}var PDt=TDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var EDt=vr,mU=PDt,kDt=gU;EDt(mU,"assign",kDt);var ADt=mU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var CDt=2146435072,MDt=CDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xDt=li,LDt=MDt,IDt=Eu;function ODt(e){var t=xDt(e);return t=(t&LDt)>>>20,t-IDt|0}var RDt=ODt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var DDt=RDt,NDt=DDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var FDt=Ne,BDt=xr,$Dt=Eu,zDt=ARt,VDt=MRt,UDt=LRt,GDt=Zt,jDt=Nf,WDt=Kk,HDt=ADt.assign,XDt=NDt,YDt=qk,qDt=Zk,ZDt=2220446049250313e-31,KDt=2148532223>>>0,Xb=[0,0],Yb=[0,0];function JDt(e,t){var r,n;return t===0||e===0||GDt(e)||jDt(e)?e:(HDt(e,Xb,1,0),e=Xb[0],t+=Xb[1],t+=XDt(e),t<UDt?WDt(0,e):t>zDt?e<0?BDt:FDt:(t<=VDt?(t+=52,n=ZDt):n=1,YDt.assign(e,Yb,1,0),r=Yb[0],r&=KDt,r|=t+$Dt<<20,n*qDt(r,Yb[1])))}var QDt=JDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var t8t=QDt,Ff=t8t;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function e8t(e){return e===0?.16666666666666602:.16666666666666602+e*(-.0027777777777015593+e*(6613756321437934e-20+e*(-16533902205465252e-22+e*41381367970572385e-24)))}var r8t=e8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_exp.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var n8t=Ff,i8t=r8t;function o8t(e,t,r){var n,i,o,a;return n=e-t,i=n*n,o=n-i*i8t(i),a=1-(t-n*o/(2-o)-e),n8t(a,r)}var a8t=o8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_exp.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var s8t=Zt,sO=Yk,l8t=xr,lO=Ne,u8t=a8t,c8t=.6931471803691238,f8t=19082149292705877e-26,uO=1.4426950408889634,h8t=709.782712893384,d8t=-745.1332191019411,_U=1/(1<<28),p8t=-_U;function v8t(e){var t,r,n;return s8t(e)||e===lO?e:e===l8t?0:e>h8t?lO:e<d8t?0:e>p8t&&e<_U?1+e:(e<0?n=sO(uO*e-.5):n=sO(uO*e+.5),t=e-n*c8t,r=n*f8t,u8t(t,r,n))}var g8t=v8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var m8t=g8t,Ve=m8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _8t=Bs;function y8t(e){return _8t(e/2)}var b8t=y8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var w8t=b8t,S8t=w8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cO=S8t;function T8t(e){return e>0?cO(e-1):cO(e+1)}var P8t=T8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var E8t=P8t,Jk=E8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var k8t=Rf,IT;k8t===!0?IT=0:IT=1;var A8t=IT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var C8t=If,M8t=Of,x8t=A8t,OT=new M8t(1),L8t=new C8t(OT.buffer);function I8t(e,t){return OT[0]=e,L8t[x8t]=t>>>0,OT[0]}var O8t=I8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var R8t=O8t,ep=R8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function D8t(e){return e|0}var N8t=D8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var F8t=N8t,yU=F8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var fO=Jk,B8t=Kk,$8t=xr,Vv=Ne;function z8t(e,t){return t===$8t?Vv:t===Vv?0:t>0?fO(t)?e:0:fO(t)?B8t(Vv,e):Vv}var V8t=z8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var U8t=V_,G8t=li,j8t=1072693247,Uv=1e300,Gv=1e-300;function W8t(e,t){var r,n;return n=G8t(e),r=n&U8t,r<=j8t?t<0?Uv*Uv:Gv*Gv:t>0?Uv*Uv:Gv*Gv}var H8t=W8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var X8t=he,hO=Ne;function Y8t(e,t){return e===-1?(e-e)/(e-e):e===1?1:X8t(e)<1==(t===hO)?0:hO}var q8t=Y8t;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Z8t(e){return e===0?.5999999999999946:.5999999999999946+e*(.4285714285785502+e*(.33333332981837743+e*(.272728123808534+e*(.23066074577556175+e*.20697501780033842))))}var K8t=Z8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var J8t=li,jv=ep,dO=tp,Q8t=Eu,t7t=K8t,e7t=1048575,pO=1048576,r7t=1072693248,n7t=536870912,i7t=524288,o7t=20,a7t=9007199254740992,s7t=.9617966939259756,l7t=.9617967009544373,u7t=-7028461650952758e-24,c7t=[1,1.5],f7t=[0,.5849624872207642],h7t=[0,1350039202129749e-23];function d7t(e,t,r){var n,i,o,a,s,l,u,c,f,h,d,p,v,g,m,_,y,w,T,S,P,A;return S=0,r<pO&&(t*=a7t,S-=53,r=J8t(t)),S+=(r>>o7t)-Q8t|0,P=r&e7t|0,r=P|r7t|0,P<=235662?A=0:P<767610?A=1:(A=0,S+=1,r-=pO),t=dO(t,r),c=c7t[A],w=t-c,T=1/(t+c),i=w*T,a=jv(i,0),n=(r>>1|n7t)+i7t,n+=A<<18,l=dO(0,n),u=t-(l-c),s=T*(w-a*l-a*u),o=i*i,y=o*o*t7t(o),y+=s*(a+i),o=a*a,l=3+o+y,l=jv(l,0),u=y-(l-3-o),w=a*l,T=s*l+u*i,h=w+T,h=jv(h,0),d=T-(h-w),p=l7t*h,v=u7t*h+d*s7t+h7t[A],f=f7t[A],_=S,g=p+v+f+_,g=jv(g,0),m=v-(g-_-f-p),e[0]=g,e[1]=m,e}var p7t=d7t;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function v7t(e){return e===0?.5:.5+e*(-.3333333333333333+e*.25)}var g7t=v7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var m7t=ep,_7t=g7t,y7t=1.4426950408889634,b7t=1.4426950216293335,w7t=19259629911266175e-24;function S7t(e,t){var r,n,i,o,a,s;return i=t-1,o=i*i*_7t(i),a=b7t*i,s=i*w7t-o*y7t,n=a+s,n=m7t(n,0),r=s-(n-a),e[0]=n,e[1]=r,e}var T7t=S7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var P7t=.6931471805599453,E7t=P7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var k7t=1048575,A7t=k7t;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function C7t(e){return e===0?.16666666666666602:.16666666666666602+e*(-.0027777777777015593+e*(6613756321437934e-20+e*(-16533902205465252e-22+e*41381367970572385e-24)))}var M7t=C7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var x7t=li,vO=tp,L7t=ep,I7t=yU,O7t=Ff,R7t=E7t,gO=Eu,mO=V_,_O=A7t,D7t=M7t,yO=1048576,N7t=1071644672,Mh=20,F7t=.6931471824645996,B7t=-1904654299957768e-24;function $7t(e,t,r){var n,i,o,a,s,l,u,c,f,h,d;return h=e&mO|0,d=(h>>Mh)-gO|0,f=0,h>N7t&&(f=e+(yO>>d+1)>>>0,d=((f&mO)>>Mh)-gO|0,n=(f&~(_O>>d))>>>0,o=vO(0,n),f=(f&_O|yO)>>Mh-d>>>0,e<0&&(f=-f),t-=o),o=r+t,o=L7t(o,0),s=o*F7t,l=(r-(o-t))*R7t+o*B7t,c=s+l,u=l-(c-s),o=c*c,i=c-o*D7t(o),a=c*i/(i-2)-(u+c*u),c=1-(a-c),e=x7t(c),e=I7t(e),e+=f<<Mh>>>0,e>>Mh<=0?c=O7t(c,f):c=vO(c,e),c}var z7t=$7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var bO=Zt,wO=Jk,SO=Nf,V7t=Bs,TO=tr,U7t=he,qb=qk,G7t=ep,PO=yU,j7t=xr,W7t=Ne,Zb=V_,H7t=V8t,X7t=H8t,Y7t=q8t,q7t=p7t,Z7t=T7t,K7t=z7t,J7t=1072693247,Q7t=1105199104,t9t=1139802112,EO=1083179008,e9t=1072693248,r9t=1083231232,n9t=3230714880>>>0,kO=31,Za=1e300,Ka=1e-300,i9t=8008566259537294e-32,qo=[0,0],AO=[0,0];function bU(e,t){var r,n,i,o,a,s,l,u,c,f,h,d,p,v,g,m;if(bO(e)||bO(t))return NaN;if(qb.assign(t,qo,1,0),s=qo[0],l=qo[1],l===0){if(t===0)return 1;if(t===1)return e;if(t===-1)return 1/e;if(t===.5)return TO(e);if(t===-.5)return 1/TO(e);if(t===2)return e*e;if(t===3)return e*e*e;if(t===4)return e*=e,e*e;if(SO(t))return Y7t(e,t)}if(qb.assign(e,qo,1,0),o=qo[0],a=qo[1],a===0){if(o===0)return H7t(e,t);if(e===1)return 1;if(e===-1&&wO(t))return-1;if(SO(e))return e===j7t?bU(-0,-t):t<0?0:W7t}if(e<0&&V7t(t)===!1)return(e-e)/(e-e);if(i=U7t(e),r=o&Zb|0,n=s&Zb|0,u=o>>>kO|0,c=s>>>kO|0,u&&wO(t)?u=-1:u=1,n>Q7t){if(n>t9t)return X7t(e,t);if(r<J7t)return c===1?u*Za*Za:u*Ka*Ka;if(r>e9t)return c===0?u*Za*Za:u*Ka*Ka;p=Z7t(AO,i)}else p=q7t(AO,i,r);if(f=G7t(t,0),d=(t-f)*p[0]+t*p[1],h=f*p[0],v=d+h,qb.assign(v,qo,1,0),g=PO(qo[0]),m=PO(qo[1]),g>=EO){if((g-EO|m)!==0||d+i9t>v-h)return u*Za*Za}else if((g&Zb)>=r9t&&((g-n9t|m)!==0||d<=v-h))return u*Ka*Ka;return v=K7t(g,h,d),u*v}var o9t=bU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var a9t=o9t,er=a9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var s9t=2.718281828459045,Bf=s9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var l9t=2220446049250313e-31,Ia=l9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function u9t(e){var t,r,n;return e===0?1/0:(e<0?t=-e:t=e,t<=1?(r=709811.662581658+e*(679979.8474157227+e*(293136.7857211597+e*(74887.54032914672+e*(12555.290582413863+e*(1443.4299244417066+e*(115.24194596137347+e*(6.309239205732627+e*(.22668404630224365+e*(.004826466289237662+e*4624429436045379e-20))))))))),n=0+e*(362880+e*(1026576+e*(1172700+e*(723680+e*(269325+e*(63273+e*(9450+e*(870+e*(45+e*1)))))))))):(e=1/e,r=4624429436045379e-20+e*(.004826466289237662+e*(.22668404630224365+e*(6.309239205732627+e*(115.24194596137347+e*(1443.4299244417066+e*(12555.290582413863+e*(74887.54032914672+e*(293136.7857211597+e*(679979.8474157227+e*709811.662581658))))))))),n=1+e*(45+e*(870+e*(9450+e*(63273+e*(269325+e*(723680+e*(1172700+e*(1026576+e*(362880+e*0)))))))))),r/n)}var c9t=u9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var CO=Zt,f9t=Rn,h9t=tr,d9t=he,p9t=Ve,Kb=er,v9t=Bf,Jb=Ia,Qb=c9t,tw=10.900511;function g9t(e,t){var r,n,i,o,a,s,l;return CO(e)||CO(t)?NaN:e<0||t<0?NaN:t===1?1/e:e===1?1/t:(l=e+t,l<Jb?(a=l/e,a/=t,a):l===e&&t<Jb?1/t:l===t&&e<Jb?1/e:(e<t&&(s=t,t=e,e=s),n=e+tw-.5,i=t+tw-.5,o=l+tw-.5,a=Qb(e)*(Qb(t)/Qb(l)),r=e-.5-t,d9t(t*r)<o*100&&e>100?a*=p9t(r*f9t(-t/o)):a*=Kb(n/o,r),o>1e10?a*=Kb(n/o*(i/o),t):a*=Kb(n*i/(o*o),t),a*=h9t(v9t/i),a))}var m9t=g9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _9t=m9t,wU=_9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var y9t=Ne;function b9t(e){return e===0&&1/e===y9t}var w9t=b9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var S9t=w9t,T9t=S9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var MO=T9t,ew=Zt,P9t=xr,Wv=Ne;function E9t(e,t){var r,n,i,o;if(r=arguments.length,r===2)return ew(e)||ew(t)?NaN:e===Wv||t===Wv?Wv:e===t&&e===0?MO(e)?e:t:e>t?e:t;for(n=P9t,o=0;o<r;o++){if(i=arguments[o],ew(i)||i===Wv)return i;(i>n||i===n&&i===0&&MO(i))&&(n=i)}return n}var k9t=E9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var A9t=k9t,Au=A9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var C9t=xr;function M9t(e){return e===0&&1/e===C9t}var x9t=M9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var L9t=x9t,SU=L9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xO=SU,rw=Zt,Hv=xr,I9t=Ne;function O9t(e,t){var r,n,i,o;if(r=arguments.length,r===2)return rw(e)||rw(t)?NaN:e===Hv||t===Hv?Hv:e===t&&e===0?xO(e)?e:t:e<t?e:t;for(n=I9t,o=0;o<r;o++){if(i=arguments[o],rw(i)||i===Hv)return i;(i<n||i===n&&i===0&&xO(i))&&(n=i)}return n}var R9t=O9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var D9t=R9t,zs=D9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var N9t=17976931348623157e292,$f=N9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var F9t=2147483647,B9t=F9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $9t=1.5707963267948966,Qk=$9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var z9t=3.141592653589793,Vs=z9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function V9t(e){return e===0?.0416666666666666:.0416666666666666+e*(-.001388888888887411+e*2480158728947673e-20)}var U9t=V9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function G9t(e){return e===0?-27557314351390663e-23:-27557314351390663e-23+e*(2087572321298175e-24+e*-11359647557788195e-27)}var j9t=G9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_cos.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var W9t=U9t,H9t=j9t;function X9t(e,t){var r,n,i,o;return o=e*e,i=o*o,n=o*W9t(o),n+=i*i*H9t(o),r=.5*o,i=1-r,i+(1-i-r+(o*n-e*t))}var Y9t=X9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var q9t=Y9t,TU=q9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_sin.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var LO=-.16666666666666632,Z9t=.00833333333332249,K9t=-.0001984126982985795,J9t=27557313707070068e-22,Q9t=-25050760253406863e-24,tNt=158969099521155e-24;function eNt(e,t){var r,n,i,o;return o=e*e,i=o*o,r=Z9t+o*(K9t+o*J9t)+o*i*(Q9t+o*tNt),n=o*e,t===0?e+n*(LO+o*r):e-(o*(.5*t-n*r)-t-n*LO)}var rNt=eNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nNt=rNt,PU=nNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iNt=Rf,RT;iNt===!0?RT=0:RT=1;var oNt=RT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aNt=If,sNt=Of,lNt=oNt,EU=new sNt(1),uNt=new aNt(EU.buffer);function cNt(e){return EU[0]=e,uNt[lNt]}var fNt=cNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hNt=fNt,dNt=hNt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function pNt(e,t){var r,n;for(r=[],n=0;n<t;n++)r.push(e);return r}var vNt=pNt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gNt=vNt,mNt=gNt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _Nt=mNt;function yNt(e){return _Nt(0,e)}var bNt=yNt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wNt=bNt,SNt=wNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_rem_pio2.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var TNt=On,Xv=Ff,U_=SNt,kU=[10680707,7228996,1387004,2578385,16069853,12639074,9804092,4427841,16666979,11263675,12935607,2387514,4345298,14681673,3074569,13734428,16653803,1880361,10960616,8533493,3062596,8710556,7349940,6258241,3772886,3769171,3798172,8675211,12450088,3874808,9961438,366607,15675153,9132554,7151469,3571407,2607881,12013382,4155038,6285869,7677882,13102053,15825725,473591,9065106,15363067,6271263,9264392,5636912,4652155,7056368,13614112,10155062,1944035,9527646,15080200,6658437,6231200,6832269,16767104,5075751,3212806,1398474,7579849,6349435,12618859],PNt=[1.570796251296997,7549789415861596e-23,5390302529957765e-30,3282003415807913e-37,1270655753080676e-44,12293330898111133e-52,27337005381646456e-60,21674168387780482e-67],nw=16777216,iw=5960464477539063e-23,Yv=U_(20),IO=U_(20),qv=U_(20),yr=U_(20);function AU(e,t,r,n,i,o,a,s,l){var u,c,f,h,d,p,v,g,m;for(h=o,m=n[r],g=r,d=0;g>0;d++)c=iw*m|0,yr[d]=m-nw*c|0,m=n[g-1]+c,g-=1;if(m=Xv(m,i),m-=8*TNt(m*.125),v=m|0,m-=v,f=0,i>0?(d=yr[r-1]>>24-i,v+=d,yr[r-1]-=d<<24-i,f=yr[r-1]>>23-i):i===0?f=yr[r-1]>>23:m>=.5&&(f=2),f>0){for(v+=1,u=0,d=0;d<r;d++)g=yr[d],u===0?g!==0&&(u=1,yr[d]=16777216-g):yr[d]=16777215-g;if(i>0)switch(i){case 1:yr[r-1]&=8388607;break;case 2:yr[r-1]&=4194303;break}f===2&&(m=1-m,u!==0&&(m-=Xv(1,i)))}if(m===0){for(g=0,d=r-1;d>=o;d--)g|=yr[d];if(g===0){for(p=1;yr[o-p]===0;p++);for(d=r+1;d<=r+p;d++){for(l[s+d]=kU[a+d],c=0,g=0;g<=s;g++)c+=e[g]*l[s+(d-g)];n[d]=c}return r+=p,AU(e,t,r,n,i,o,a,s,l)}}if(m===0)for(r-=1,i-=24;yr[r]===0;)r-=1,i-=24;else m=Xv(m,-i),m>=nw?(c=iw*m|0,yr[r]=m-nw*c|0,r+=1,i+=24,yr[r]=c):yr[r]=m|0;for(c=Xv(1,i),d=r;d>=0;d--)n[d]=c*yr[d],c*=iw;for(d=r;d>=0;d--){for(c=0,p=0;p<=h&&p<=r-d;p++)c+=PNt[p]*n[d+p];qv[r-d]=c}for(c=0,d=r;d>=0;d--)c+=qv[d];for(f===0?t[0]=c:t[0]=-c,c=qv[0]-c,d=1;d<=r;d++)c+=qv[d];return f===0?t[1]=c:t[1]=-c,v&7}function ENt(e,t,r,n){var i,o,a,s,l,u,c,f,h;for(o=4,s=n-1,a=(r-3)/24|0,a<0&&(a=0),u=r-24*(a+1),f=a-s,h=s+o,c=0;c<=h;c++)f<0?Yv[c]=0:Yv[c]=kU[f],f+=1;for(c=0;c<=o;c++){for(i=0,f=0;f<=s;f++)i+=e[f]*Yv[s+(c-f)];IO[c]=i}return l=o,AU(e,t,l,IO,u,o,a,s,Yv)}var kNt=ENt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ANt=Math.round,CNt=ANt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var MNt=CNt,G_=MNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_rem_pio2.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var xNt=G_,OO=li,LNt=.6366197723675814,INt=1.5707963267341256,ONt=6077100506506192e-26,RNt=6077100506303966e-26,DNt=20222662487959506e-37,NNt=20222662487111665e-37,FNt=84784276603689e-45,RO=2047;function BNt(e,t,r){var n,i,o,a,s,l,u;return i=xNt(e*LNt),a=e-i*INt,s=i*ONt,u=t>>20|0,r[0]=a-s,n=OO(r[0]),l=u-(n>>20&RO),l>16&&(o=a,s=i*RNt,a=o-s,s=i*DNt-(o-a-s),r[0]=a-s,n=OO(r[0]),l=u-(n>>20&RO),l>49&&(o=a,s=i*NNt,a=o-s,s=i*FNt-(o-a-s),r[0]=a-s)),r[1]=a-r[0]-s,i}var $Nt=BNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_rem_pio2.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
*
* Optimized by Bruce D. Evans.
* ```
*/var zNt=li,VNt=dNt,UNt=Zk,GNt=kNt,Zv=$Nt,jNt=0,WNt=16777216,Ja=1.5707963267341256,Dl=6077100506506192e-26,Kv=2*Dl,Jv=3*Dl,Qv=4*Dl,HNt=2147483647,XNt=2146435072,YNt=1048575,qNt=598523,ZNt=1072243195,KNt=1073928572,JNt=1074752122,QNt=1074977148,tFt=1075183036,eFt=1075388923,rFt=1075594811,nFt=1094263291,xh=[0,0,0],Lh=[0,0];function iFt(e,t){var r,n,i,o,a,s,l,u;if(i=zNt(e),o=i&HNt|0,o<=ZNt)return t[0]=e,t[1]=0,0;if(o<=JNt)return(o&YNt)===qNt?Zv(e,o,t):o<=KNt?e>0?(u=e-Ja,t[0]=u-Dl,t[1]=u-t[0]-Dl,1):(u=e+Ja,t[0]=u+Dl,t[1]=u-t[0]+Dl,-1):e>0?(u=e-2*Ja,t[0]=u-Kv,t[1]=u-t[0]-Kv,2):(u=e+2*Ja,t[0]=u+Kv,t[1]=u-t[0]+Kv,-2);if(o<=rFt)return o<=tFt?o===QNt?Zv(e,o,t):e>0?(u=e-3*Ja,t[0]=u-Jv,t[1]=u-t[0]-Jv,3):(u=e+3*Ja,t[0]=u+Jv,t[1]=u-t[0]+Jv,-3):o===eFt?Zv(e,o,t):e>0?(u=e-4*Ja,t[0]=u-Qv,t[1]=u-t[0]-Qv,4):(u=e+4*Ja,t[0]=u+Qv,t[1]=u-t[0]+Qv,-4);if(o<nFt)return Zv(e,o,t);if(o>=XNt)return t[0]=NaN,t[1]=NaN,0;for(r=VNt(e),n=(o>>20)-1046,u=UNt(o-(n<<20|0),r),s=0;s<2;s++)xh[s]=u|0,u=(u-xh[s])*WNt;for(xh[2]=u,a=3;xh[a-1]===jNt;)a-=1;return l=GNt(xh,Lh,n,a),e<0?(t[0]=-Lh[0],t[1]=-Lh[1],-l):(t[0]=Lh[0],t[1]=Lh[1],l)}var oFt=iFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aFt=oFt,CU=aFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_sin.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var sFt=li,DO=TU,ow=PU,lFt=CU,uFt=2147483647,cFt=2146435072,fFt=1072243195,hFt=1045430272,Zo=[0,0];function dFt(e){var t,r;if(t=sFt(e),t&=uFt,t<=fFt)return t<hFt?e:ow(e,0);if(t>=cFt)return NaN;switch(r=lFt(e,Zo),r&3){case 0:return ow(Zo[0],Zo[1]);case 1:return DO(Zo[0],Zo[1]);case 2:return-ow(Zo[0],Zo[1]);default:return-DO(Zo[0],Zo[1])}}var pFt=dFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vFt=pFt,rp=vFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gFt=2.5066282746310007,j_=gFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function mFt(e){return e===0?.08333333333334822:.08333333333334822+e*(.0034722222160545866+e*(-.0026813261780578124+e*(-.00022954996161337813+e*.0007873113957930937)))}var _Ft=mFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var yFt=j_,NO=er,bFt=Ve,wFt=_Ft,SFt=143.01608;function TFt(e){var t,r,n;return t=1/e,t=1+t*wFt(t),r=bFt(e),e>SFt?(n=NO(e,.5*e-.25),r=n*(n/r)):r=NO(e,e-.5)/r,yFt*r*t}var PFt=TFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var EFt=.5772156649015329,kFt=EFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var AFt=kFt;function CFt(e,t){return t/((1+AFt*e)*e)}var MFt=CFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function xFt(e){var t,r,n;return e===0?1:(e<0?t=-e:t=e,t<=1?(r=1+e*(.4942148268014971+e*(.20744822764843598+e*(.04763678004571372+e*(.010421379756176158+e*(.0011913514700658638+e*(.00016011952247675185+e*0)))))),n=1+e*(.0714304917030273+e*(-.23459179571824335+e*(.035823639860549865+e*(.011813978522206043+e*(-.004456419138517973+e*(.0005396055804933034+e*-23158187332412014e-21))))))):(e=1/e,r=0+e*(.00016011952247675185+e*(.0011913514700658638+e*(.010421379756176158+e*(.04763678004571372+e*(.20744822764843598+e*(.4942148268014971+e*1)))))),n=-23158187332412014e-21+e*(.0005396055804933034+e*(-.004456419138517973+e*(.011813978522206043+e*(.035823639860549865+e*(-.23459179571824335+e*(.0714304917030273+e*1))))))),r/n)}var LFt=xFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, long comment, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var IFt=Zt,OFt=Bs,RFt=SU,FO=he,DFt=On,NFt=rp,BO=Ne,$O=xr,zO=Vs,VO=PFt,UO=MFt,FFt=LFt;function BFt(e){var t,r,n,i;if(OFt(e)&&e<0||e===$O||IFt(e))return NaN;if(e===0)return RFt(e)?$O:BO;if(e>171.61447887182297)return BO;if(e<-170.5674972726612)return 0;if(r=FO(e),r>33)return e>=0?VO(e):(n=DFt(r),(n&1)===0?t=-1:t=1,i=r-n,i>.5&&(n+=1,i=r-n),i=r*NFt(zO*i),t*zO/(FO(i)*VO(r)));for(i=1;e>=3;)e-=1,i*=e;for(;e<0;){if(e>-1e-9)return UO(e,i);i/=e,e+=1}for(;e<2;){if(e<1e-9)return UO(e,i);i/=e,e+=1}return e===2?i:(e-=2,i*FFt(e))}var $Ft=BFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zFt=$Ft,Bo=zFt;const VFt=[1,1,2,6,24,120,720,5040,40320,362880,3628800,39916800,479001600,6227020800,87178291200,1307674368e3,20922789888e3,355687428096e3,6402373705728e3,121645100408832e3,243290200817664e4,5109094217170944e4,11240007277776077e5,2585201673888498e7,6204484017332394e8,15511210043330986e9,40329146112660565e10,10888869450418352e12,30488834461171387e13,8841761993739702e15,26525285981219107e16,8222838654177922e18,2631308369336935e20,8683317618811886e21,29523279903960416e22,10333147966386145e24,37199332678990125e25,13763753091226346e27,5230226174666011e29,20397882081197444e30,8159152832478977e32,3345252661316381e34,140500611775288e37,6041526306337383e37,2658271574788449e39,11962222086548019e40,5502622159812089e42,25862324151116818e43,12413915592536073e45,6082818640342675e47,30414093201713376e48,15511187532873822e50,8065817517094388e52,42748832840600255e53,2308436973392414e56,12696403353658276e57,7109985878048635e59,40526919504877214e60,23505613312828785e62,13868311854568984e64,832098711274139e67,5075802138772248e68,3146997326038794e70,198260831540444e73,12688693218588417e73,8247650592082472e75,5443449390774431e77,3647111091818868e79,24800355424368305e80,1711224524281413e83,11978571669969892e84,8504785885678623e86,61234458376886085e87,44701154615126844e89,3307885441519386e92,248091408113954e95,18854947016660504e95,14518309202828587e97,11324281178206297e99,8946182130782976e101,7156945704626381e103,5797126020747368e105,4753643337012842e107,3945523969720659e109,3314240134565353e111,281710411438055e114,24227095383672734e114,2107757298379528e117,18548264225739844e118,1650795516090846e121,14857159644817615e122,1352001527678403e125,12438414054641308e126,11567725070816416e128,1087366156656743e131,1032997848823906e133,9916779348709496e134,9619275968248212e136,9426890448883248e138,9332621544394415e140,9332621544394415e142,942594775983836e145,9614466715035127e146,990290071648618e149,10299016745145628e150,1081396758240291e153,11462805637347084e154,1226520203196138e157,1324641819451829e159,14438595832024937e160,1588245541522743e163,17629525510902446e164,1974506857221074e167,22311927486598138e168,25435597334721877e170,2925093693493016e173,3393108684451898e175,3969937160808721e177,4684525849754291e179,5574585761207606e181,6689502913449127e183,8094298525273444e185,9875044200833601e187,1214630436702533e190,1506141741511141e192,1882677176888926e194,2372173242880047e196,30126600184576594e197,3856204823625804e200,4974504222477287e202,6466855489220474e204,847158069087882e207,11182486511960043e208,14872707060906857e210,19929427461615188e212,26904727073180504e214,3659042881952549e217,5012888748274992e219,6917786472619489e221,9615723196941089e223,13462012475717526e225,1898143759076171e228,2695364137888163e230,3854370717180073e232,55502938327393044e233,8047926057471992e236,11749972043909107e238,1727245890454639e241,25563239178728654e242,380892263763057e246,5713383956445855e247,862720977423324e250,13113358856834524e251,20063439050956823e253,30897696138473508e255,4789142901463394e258,7471062926282894e260,11729568794264145e262,1853271869493735e265,29467022724950384e266,47147236359920616e268,7590705053947219e271,12296942187394494e273,20044015765453026e275,3287218585534296e278,5423910666131589e280,9003691705778438e282,1503616514864999e285,25260757449731984e286,4269068009004705e289,7257415615307999e291];/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var UFt=Zt,GFt=Bs,jFt=Bo,WFt=Ne,HFt=VFt,XFt=170;function YFt(e){return UFt(e)?NaN:GFt(e)?e<0?NaN:e<=XFt?HFt[e]:WFt:jFt(e+1)}var qFt=YFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZFt=qFt,MU=ZFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function KFt(e){var t,r,n;return e===0?1/0:(e<0?t=-e:t=e,t<=1?(r=3847467039331777e-5+e*(3685766504351951e-5+e*(1588920245372942e-5+e*(4059208354298835e-6+e*(6805476611834733e-7+e*(7823975500312005e-8+e*(6246580776401795e-9+e*(341986.3488721347+e*(12287.194511824551+e*(261.61404416416684+e*2.5066282746310007))))))))),n=0+e*(362880+e*(1026576+e*(1172700+e*(723680+e*(269325+e*(63273+e*(9450+e*(870+e*(45+e*1)))))))))):(e=1/e,r=2.5066282746310007+e*(261.61404416416684+e*(12287.194511824551+e*(341986.3488721347+e*(6246580776401795e-9+e*(7823975500312005e-8+e*(6805476611834733e-7+e*(4059208354298835e-6+e*(1588920245372942e-5+e*(3685766504351951e-5+e*3847467039331777e-5))))))))),n=1+e*(45+e*(870+e*(9450+e*(63273+e*(269325+e*(723680+e*(1172700+e*(1026576+e*(362880+e*0)))))))))),r/n)}var JFt=KFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/lanczos.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var QFt=JFt,tBt=QFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eBt=tBt,rBt=eBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nBt=10.900511,np=nBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var GO=rBt,iBt=Bo,jO=Rn,WO=he,HO=Ve,XO=er,oBt=Ia,aBt=Bf,sBt=np,YO=170,lBt=4269068009004705e289;function xU(e,t){var r,n,i;return e<oBt?t>YO?(n=xU(t,YO-t),n*=e,n*=lBt,1/n):1/(e*iBt(e+t)):(i=e+sBt-.5,e+t===e?WO(t)<10?r=HO((.5-e)*jO(t/i)):r=1:(WO(t)<10?r=HO((.5-e)*jO(t/i)):r=XO(i/(i+t),e-.5),r*=GO(e)/GO(e+t)),r*=XO(aBt/(i+t),t),r)}var uBt=xU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var cBt=he,qO=On,ZO=Bo,KO=MU,fBt=uBt,JO=170;function hBt(e,t){var r,n,i;if(e<=0||e+t<=0)return ZO(e)/ZO(e+t);if(n=qO(t),n===t){if(i=qO(e),i===e&&e<=JO&&e+t<=JO)return KO(i-1)/KO(n+i-1);if(cBt(t)<20){if(t===0)return 1;if(t<0){for(e-=1,r=e,t+=1;t!==0;)e-=1,r*=e,t+=1;return r}for(r=1/e,t-=1;t!==0;)e+=1,r/=e,t-=1;return r}}return fBt(e,t)}var dBt=hBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pBt=dBt,tA=pBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function vBt(e){return e===0?.3999999999940942:.3999999999940942+e*(.22222198432149784+e*.15313837699209373)}var gBt=vBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function mBt(e){return e===0?.6666666666666735:.6666666666666735+e*(.2857142874366239+e*(.1818357216161805+e*.14798198605116586))}var _Bt=mBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_log.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var QO=li,yBt=tp,bBt=Zt,wBt=Eu,SBt=xr,TBt=gBt,PBt=_Bt,tg=.6931471803691238,eg=19082149292705877e-26,EBt=0x40000000000000,kBt=.3333333333333333,tR=1048575,ABt=2146435072,CBt=1048576,MBt=1072693248;function xBt(e){var t,r,n,i,o,a,s,l,u,c,f,h;return e===0?SBt:bBt(e)||e<0?NaN:(r=QO(e),o=0,r<CBt&&(o-=54,e*=EBt,r=QO(e)),r>=ABt?e+e:(o+=(r>>20)-wBt|0,r&=tR,l=r+614244&1048576|0,e=yBt(e,r|l^MBt),o+=l>>20|0,s=e-1,(tR&2+r)<3?s===0?o===0?0:o*tg+o*eg:(a=s*s*(.5-kBt*s),o===0?s-a:o*tg-(a-o*eg-s)):(c=s/(2+s),h=c*c,l=r-398458|0,f=h*h,u=440401-r|0,i=f*TBt(f),n=h*PBt(f),l|=u,a=n+i,l>0?(t=.5*s*s,o===0?s-(t-c*(t+a)):o*tg-(t-(c*(t+a)+o*eg)-s)):o===0?s-c*(s-a):o*tg-(c*(s-a)-o*eg-s))))}var LBt=xBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var IBt=LBt,Se=IBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_cos.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var OBt=li,aw=TU,eR=PU,RBt=CU,Ko=[0,0],DBt=2147483647,NBt=1072243195,FBt=1044381696,BBt=2146435072;function $Bt(e){var t,r;if(t=OBt(e),t&=DBt,t<=NBt)return t<FBt?1:aw(e,0);if(t>=BBt)return NaN;switch(r=RBt(e,Ko),r&3){case 0:return aw(Ko[0],Ko[1]);case 1:return-eR(Ko[0],Ko[1]);case 2:return-aw(Ko[0],Ko[1]);default:return eR(Ko[0],Ko[1])}}var zBt=$Bt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var VBt=zBt,eA=VBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var UBt=Zt,GBt=Nf,rR=eA,sw=rp,jBt=he,Ih=Kk,Oh=Vs;function WBt(e){var t,r;return UBt(e)?NaN:GBt(e)?NaN:(r=e%2,t=jBt(r),t===0||t===1?Ih(0,r):t<.25?sw(Oh*r):t<.75?(t=.5-t,Ih(rR(Oh*t),r)):t<1.25?(r=Ih(1,r)-r,sw(Oh*r)):t<1.75?(t-=1.5,-Ih(rR(Oh*t),r)):(r-=Ih(2,r),sw(Oh*r)))}var HBt=WBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XBt=HBt,YBt=XBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qBt(e){return e===0?.06735230105312927:.06735230105312927+e*(.007385550860814029+e*(.0011927076318336207+e*(.00022086279071390839+e*25214456545125733e-21)))}var ZBt=qBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function KBt(e){return e===0?.020580808432516733:.020580808432516733+e*(.0028905138367341563+e*(.0005100697921535113+e*(.00010801156724758394+e*44864094961891516e-21)))}var JBt=KBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function QBt(e){return e===0?1.3920053346762105:1.3920053346762105+e*(.7219355475671381+e*(.17193386563280308+e*(.01864591917156529+e*(.0007779424963818936+e*7326684307446256e-21))))}var t$t=QBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function e$t(e){return e===0?.21498241596060885:.21498241596060885+e*(.325778796408931+e*(.14635047265246445+e*(.02664227030336386+e*(.0018402845140733772+e*3194753265841009e-20))))}var r$t=e$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function n$t(e){return e===0?-.032788541075985965:-.032788541075985965+e*(.006100538702462913+e*(-.0014034646998923284+e*.00031563207090362595))}var i$t=n$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function o$t(e){return e===0?.01797067508118204:.01797067508118204+e*(-.0036845201678113826+e*(.000881081882437654+e*-.00031275416837512086))}var a$t=o$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function s$t(e){return e===0?-.010314224129834144:-.010314224129834144+e*(.0022596478090061247+e*(-.0005385953053567405+e*.0003355291926355191))}var l$t=s$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function u$t(e){return e===0?.6328270640250934:.6328270640250934+e*(1.4549225013723477+e*(.9777175279633727+e*(.22896372806469245+e*.013381091853678766)))}var c$t=u$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function f$t(e){return e===0?2.4559779371304113:2.4559779371304113+e*(2.128489763798934+e*(.7692851504566728+e*(.10422264559336913+e*.003217092422824239)))}var h$t=f$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function d$t(e){return e===0?.08333333333333297:.08333333333333297+e*(-.0027777777772877554+e*(.0007936505586430196+e*(-.00059518755745034+e*(.0008363399189962821+e*-.0016309293409657527))))}var p$t=d$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_lgamma_r.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var v$t=Zt,g$t=Nf,m$t=he,rc=Se,_$t=Yk,y$t=YBt,b$t=Vs,lw=Ne,w$t=ZBt,S$t=JBt,T$t=t$t,P$t=r$t,E$t=i$t,k$t=a$t,A$t=l$t,C$t=c$t,M$t=h$t,x$t=p$t,L$t=.07721566490153287,I$t=.3224670334241136,O$t=1,R$t=-.07721566490153287,D$t=.48383612272381005,N$t=-.1475877229945939,F$t=.06462494023913339,B$t=-.07721566490153287,$$t=1,z$t=.4189385332046727,rg=1.4616321449683622,V$t=4503599627370496,U$t=0x400000000000000,G$t=8470329472543003e-37,nR=1.4616321449683622,j$t=-.12148629053584961,W$t=-3638676997039505e-33;function H$t(e){var t,r,n,i,o,a,s,l,u,c,f,h,d;if(v$t(e)||g$t(e))return e;if(e===0)return lw;if(e<0?(t=!0,e=-e):t=!1,e<G$t)return-rc(e);if(t){if(e>=V$t||(u=y$t(e),u===0))return lw;r=rc(b$t/m$t(u*e))}if(e===1||e===2)return 0;if(e<2)switch(e<=.9?(d=-rc(e),e>=rg-1+.27?(f=1-e,n=0):e>=rg-1-.27?(f=e-(nR-1),n=1):(f=e,n=2)):(d=0,e>=rg+.27?(f=2-e,n=0):e>=rg-.27?(f=e-nR,n=1):(f=e-1,n=2)),n){case 0:h=f*f,a=L$t+h*w$t(h),o=h*(I$t+h*S$t(h)),s=f*a+o,d+=s-.5*f;break;case 1:h=f*f,c=h*f,a=D$t+c*E$t(c),o=N$t+c*k$t(c),i=F$t+c*A$t(c),s=h*a-(W$t-c*(o+f*i)),d+=j$t+s;break;case 2:a=f*(B$t+f*C$t(f)),o=$$t+f*M$t(f),d+=-.5*f+a/o;break}else if(e<8)switch(n=_$t(e),f=e-n,s=f*(R$t+f*P$t(f)),l=O$t+f*T$t(f),d=.5*f+s/l,h=1,n){case 7:h*=f+6;case 6:h*=f+5;case 5:h*=f+4;case 4:h*=f+3;case 3:h*=f+2,d+=rc(h)}else e<U$t?(u=rc(e),h=1/e,f=h*h,c=z$t+h*x$t(f),d=(e-.5)*(u-1)+c):d=e*(rc(e)-1);return t&&(d=r-d),d}var X$t=H$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Y$t=X$t,zf=Y$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var q$t=14901161193847656e-24,Z$t=q$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var K$t=709.782712893384,Cu=K$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var J$t=Ve;function Q$t(e,t){var r,n,i,o;if(i=J$t(-t),n=i,n!==0)for(r=n,o=1;o<e;++o)r/=o,r*=t,n+=r;return n}var tzt=Q$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ezt(e){return e===0?-.3250421072470015:-.3250421072470015+e*(-.02848174957559851+e*(-.005770270296489442+e*-23763016656650163e-21))}var rzt=ezt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function nzt(e){return e===0?.39791722395915535:.39791722395915535+e*(.0650222499887673+e*(.005081306281875766+e*(.00013249473800432164+e*-3960228278775368e-21)))}var izt=nzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ozt(e){return e===0?.41485611868374833:.41485611868374833+e*(-.3722078760357013+e*(.31834661990116175+e*(-.11089469428239668+e*(.035478304325618236+e*-.002166375594868791))))}var azt=ozt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function szt(e){return e===0?.10642088040084423:.10642088040084423+e*(.540397917702171+e*(.07182865441419627+e*(.12617121980876164+e*(.01363708391202905+e*.011984499846799107))))}var lzt=szt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function uzt(e){return e===0?-.6938585727071818:-.6938585727071818+e*(-10.558626225323291+e*(-62.375332450326006+e*(-162.39666946257347+e*(-184.60509290671104+e*(-81.2874355063066+e*-9.814329344169145)))))}var czt=uzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function fzt(e){return e===0?19.651271667439257:19.651271667439257+e*(137.65775414351904+e*(434.56587747522923+e*(645.3872717332679+e*(429.00814002756783+e*(108.63500554177944+e*(6.570249770319282+e*-.0604244152148581))))))}var hzt=fzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function dzt(e){return e===0?-.799283237680523:-.799283237680523+e*(-17.757954917754752+e*(-160.63638485582192+e*(-637.5664433683896+e*(-1025.0951316110772+e*-483.5191916086514))))}var pzt=dzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function vzt(e){return e===0?30.33806074348246:30.33806074348246+e*(325.7925129965739+e*(1536.729586084437+e*(3199.8582195085955+e*(2553.0504064331644+e*(474.52854120695537+e*-22.44095244658582)))))}var gzt=vzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_erf.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var mzt=Zt,iR=Ve,_zt=ep,yzt=Ne,bzt=xr,wzt=rzt,Szt=izt,Tzt=azt,Pzt=lzt,Ezt=czt,kzt=hzt,Azt=pzt,Czt=gzt,ng=1e-300,Mzt=13877787807814457e-33,oR=.8450629115104675,xzt=.12837916709551256,Lzt=1,Izt=-.0023621185607526594,Ozt=1,Rzt=-.009864944034847148,Dzt=1,Nzt=-.0098649429247001,Fzt=1;function Bzt(e){var t,r,n,i,o,a,s,l;if(mzt(e))return NaN;if(e===yzt)return 0;if(e===bzt)return 2;if(e===0)return 1;if(e<0?(t=!0,r=-e):(t=!1,r=e),r<.84375)return r<Mzt?1-e:(n=e*e,i=xzt+n*wzt(n),o=Lzt+n*Szt(n),a=i/o,e<.25?1-(e+e*a):(i=e*a,i+=e-.5,.5-i));if(r<1.25)return o=r-1,s=Izt+o*Tzt(o),l=Ozt+o*Pzt(o),t?1+oR+s/l:1-oR-s/l;if(r<28){if(o=1/(r*r),r<2.857142857142857)i=Rzt+o*Ezt(o),o=Dzt+o*kzt(o);else{if(e<-6)return 2-ng;i=Nzt+o*Azt(o),o=Fzt+o*Czt(o)}return n=_zt(r,0),i=iR(-(n*n)-.5625)*iR((n-r)*(n+r)+i/o),t?2-i/r:i/r}return t?2-ng:ng*ng}var $zt=Bzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zzt=$zt,LU=zzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Vzt=LU,aR=tr,Uzt=Ve,Gzt=Vs;function jzt(e,t){var r,n,i,o,a;if(o=Vzt(aR(t)),o!==0&&e>1){for(n=Uzt(-t)/aR(Gzt*t),n*=t,r=.5,n/=r,i=n,a=2;a<e;++a)n/=a-r,n*=t,i+=n;o+=i}return o}var Wzt=jzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Hzt=-708.3964185322641,Vf=Hzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var nc=Ve,ig=er,Xzt=Se,sR=Cu,lR=Vf;function Yzt(e,t){var r,n;return n=e*Xzt(t),t>=1?n<sR&&-t>lR?r=ig(t,e)*nc(-t):e>=1?r=ig(t/nc(t/e),e):r=nc(n-t):n>lR?r=ig(t,e)*nc(-t):t/e<sR?r=ig(t/nc(t/e),e):r=nc(n-t),r}var qzt=Yzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Zzt=6.283185307179586,IU=Zzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Kzt(e){return e===0?-.3333333333333333:-.3333333333333333+e*(.08333333333333333+e*(-.014814814814814815+e*(.0011574074074074073+e*(.0003527336860670194+e*(-.0001787551440329218+e*(3919263178522438e-20+e*(-21854485106799924e-22+e*(-185406221071516e-20+e*(8296711340953087e-22+e*(-17665952736826078e-23+e*(6707853543401498e-24+e*(10261809784240309e-24+e*(-4382036018453353e-24+e*914769958223679e-24)))))))))))))}var Jzt=Kzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Qzt(e){return e===0?-.001851851851851852:-.001851851851851852+e*(-.003472222222222222+e*(.0026455026455026454+e*(-.0009902263374485596+e*(.00020576131687242798+e*(-4018775720164609e-22+e*(-18098550334489977e-21+e*(764916091608111e-20+e*(-16120900894563446e-22+e*(4647127802807434e-24+e*(1378633446915721e-22+e*(-5752545603517705e-23+e*11951628599778148e-24)))))))))))}var tVt=Qzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function eVt(e){return e===0?.004133597883597883:.004133597883597883+e*(-.0026813271604938273+e*(.0007716049382716049+e*(20093878600823047e-22+e*(-.00010736653226365161+e*(52923448829120125e-21+e*(-12760635188618728e-21+e*(3423578734096138e-23+e*(13721957309062932e-22+e*(-6298992138380055e-22+e*14280614206064242e-23)))))))))}var rVt=eVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function nVt(e){return e===0?.0006494341563786008:.0006494341563786008+e*(.00022947209362139917+e*(-.0004691894943952557+e*(.00026772063206283885+e*(-7561801671883977e-20+e*(-2396505113867297e-22+e*(11082654115347302e-21+e*(-56749528269915965e-22+e*14230900732435883e-22)))))))}var iVt=nVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function oVt(e){return e===0?-.0008618882909167117:-.0008618882909167117+e*(.0007840392217200666+e*(-.0002990724803031902+e*(-14638452578843418e-22+e*(6641498215465122e-20+e*(-3968365047179435e-20+e*11375726970678419e-21)))))}var aVt=oVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function sVt(e){return e===0?-.00033679855336635813:-.00033679855336635813+e*(-6972813758365858e-20+e*(.0002772753244959392+e*(-.00019932570516188847+e*(6797780477937208e-20+e*(1419062920643967e-22+e*(-13594048189768693e-21+e*(8018470256334202e-21+e*-2291481176508095e-21)))))))}var lVt=sVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function uVt(e){return e===0?.0005313079364639922:.0005313079364639922+e*(-.0005921664373536939+e*(.0002708782096718045+e*(7902353232660328e-22+e*(-8153969367561969e-20+e*(561168275310625e-19+e*-18329116582843375e-21)))))}var cVt=uVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function fVt(e){return e===0?.00034436760689237765:.00034436760689237765+e*(5171790908260592e-20+e*(-.00033493161081142234+e*(.0002812695154763237+e*-.00010976582244684731)))}var hVt=fVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function dVt(e){return e===0?-.0006526239185953094:-.0006526239185953094+e*(.0008394987206720873+e*-.000438297098541721)}var pVt=dVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var vVt=$s,gVt=LU,uw=tr,mVt=Ve,_Vt=Se,yVt=IU,bVt=Jzt,wVt=tVt,SVt=rVt,TVt=iVt,PVt=aVt,EVt=lVt,kVt=cVt,AVt=hVt,CVt=pVt,hi=[0,0,0,0,0,0,0,0,0,0];function MVt(e,t){var r,n,i,o,a;return n=(t-e)/e,i=-_Vt(1+n)+n,o=e*i,a=uw(2*i),t<e&&(a=-a),hi[0]=bVt(a),hi[1]=wVt(a),hi[2]=SVt(a),hi[3]=TVt(a),hi[4]=PVt(a),hi[5]=EVt(a),hi[6]=kVt(a),hi[7]=AVt(a),hi[8]=CVt(a),hi[9]=-.0005967612901927463,r=vVt(hi,1/e),r*=mVt(-o)/uw(yVt*e),t<e&&(r=-r),r+=gVt(uw(o))/2,r}var xVt=MVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var LVt=eval,IVt=LVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var OVt=IVt;function RVt(){var e;try{OVt('"use strict"; (function* () {})'),e=!0}catch{e=!1}return e}var DVt=RVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NVt=DVt,OU=NVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var og=he,FVt=Ia,BVt=1e6;function $Vt(e,t){var r,n,i,o,a,s;if(s={},arguments.length>1&&(s=t),n=s.tolerance||FVt,o=s.maxTerms||BVt,a=s.initialValue||0,r=typeof e.next=="function",r===!0){for(i of e)if(a+=i,og(n*a)>=og(i)||--o===0)break}else do i=e(),a+=i;while(og(n*a)<og(i)&&--o);return a}var zVt=$Vt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uR=he,VVt=Ia,UVt=1e6;function GVt(e,t){var r,n,i,o,a;a={},arguments.length>1&&(a=t),r=a.tolerance||VVt,i=a.maxTerms||UVt,o=a.initialValue||0;do n=e(),o+=n;while(uR(r*o)<uR(n)&&--i);return o}var jVt=GVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var WVt=OU,HVt=zVt,XVt=jVt,DT;WVt()?DT=HVt:DT=XVt;var rA=DT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function YVt(e,t){var r=1,n=e,i=t;return o;function o(){var a=r;return n+=1,r*=i/n,a}}var qVt=YVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var ZVt=rA,KVt=qVt;function JVt(e,t,r){var n,i;return r=r||0,i=KVt(e,t),n=ZVt(i,{initialValue:r}),n}var QVt=JVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tUt(e){var t,r,n;return e===0?1/0:(e<0?t=-e:t=e,t<=1?(r=709811.662581658+e*(679979.8474157227+e*(293136.7857211597+e*(74887.54032914672+e*(12555.290582413863+e*(1443.4299244417066+e*(115.24194596137347+e*(6.309239205732627+e*(.22668404630224365+e*(.004826466289237662+e*4624429436045379e-20))))))))),n=0+e*(362880+e*(1026576+e*(1172700+e*(723680+e*(269325+e*(63273+e*(9450+e*(870+e*(45+e*1)))))))))):(e=1/e,r=4624429436045379e-20+e*(.004826466289237662+e*(.22668404630224365+e*(6.309239205732627+e*(115.24194596137347+e*(1443.4299244417066+e*(12555.290582413863+e*(74887.54032914672+e*(293136.7857211597+e*(679979.8474157227+e*709811.662581658))))))))),n=1+e*(45+e*(870+e*(9450+e*(63273+e*(269325+e*(723680+e*(1172700+e*(1026576+e*(362880+e*0)))))))))),r/n)}var eUt=tUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/lanczos.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var rUt=eUt,nUt=rUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iUt=nUt,W_=iUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var oUt=W_,aUt=zf,sUt=Bo,lUt=Rn,uUt=tr,cUt=he,Qa=Ve,Rh=er,cw=Au,fw=zs,cR=Se,ag=Cu,Dh=Vf,hw=np,fUt=Bf;function hUt(e,t){var r,n,i,o,a,s,l;return i=e+hw-.5,l=(t-e-hw+.5)/i,e<1?t<=Dh?Qa(e*cR(t)-t-aUt(e)):Rh(t,e)*Qa(-t)/sUt(e):(cUt(l*l*e)<=100&&e>150?(r=e*(lUt(l)-l)+t*(.5-hw)/i,r=Qa(r)):(o=e*cR(t/i),a=e-t,fw(o,a)<=Dh||cw(o,a)>=ag?(n=a/e,fw(o,a)/2>Dh&&cw(o,a)/2<ag?(s=Rh(t/i,e/2)*Qa(a/2),r=s*s):fw(o,a)/4>Dh&&cw(o,a)/4<ag&&t>e?(s=Rh(t/i,e/4)*Qa(a/4),r=s*s,r*=r):n>Dh&&n<ag?r=Rh(t*Qa(n)/i,e):r=Qa(o+a)):r=Rh(t/i,e)*Qa(a)),r*=uUt(i/fUt)/oUt(e),r)}var dUt=hUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_60_0/boost/math/special_functions/powm1.hpp}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var fR=Zt,hR=he,pUt=Df,vUt=Se,gUt=er,mUt=Yk;function _Ut(e,t){var r;if(fR(e)||fR(t))return NaN;if(t===0)return 0;if(e===0)return-1;if(e<0&&t%2===0&&(e=-e),e>0){if((hR(t*(e-1))<.5||hR(t)<.2)&&(r=vUt(e)*t,r<.5))return pUt(r)}else if(mUt(t)!==t)return NaN;return gUt(e,t)-1}var yUt=_Ut;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bUt=yUt,wUt=bUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function SUt(e){var t,r,n;return e===0?-.01803556856784494:(e<0?t=-e:t=e,t<=1?(r=-.01803556856784494+e*(.02512664961998968+e*(.049410315156753225+e*(.0172491608709614+e*(-.0002594535632054381+e*(-.0005410098692152044+e*(-3245886498259485e-20+e*0)))))),n=1+e*(1.962029871977952+e*(1.4801966942423133+e*(.5413914320717209+e*(.09885042511280101+e*(.008213096746488934+e*(.00022493629192211576+e*-22335276320861708e-23))))))):(e=1/e,r=0+e*(-3245886498259485e-20+e*(-.0005410098692152044+e*(-.0002594535632054381+e*(.0172491608709614+e*(.049410315156753225+e*(.02512664961998968+e*-.01803556856784494)))))),n=-22335276320861708e-23+e*(.00022493629192211576+e*(.008213096746488934+e*(.09885042511280101+e*(.5413914320717209+e*(1.4801966942423133+e*(1.962029871977952+e*1))))))),r/n)}var TUt=SUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function PUt(e){var t,r,n;return e===0?.04906224540690395:(e<0?t=-e:t=e,t<=1?(r=.04906224540690395+e*(-.09691175301595212+e*(-.4149833583594954+e*(-.4065671242119384+e*(-.1584135863906922+e*(-.024014982064857155+e*-.0010034668769627955))))),n=1+e*(3.0234982984646304+e*(3.4873958536072385+e*(1.9141558827442668+e*(.5071377386143635+e*(.05770397226904519+e*.001957681026011072)))))):(e=1/e,r=-.0010034668769627955+e*(-.024014982064857155+e*(-.1584135863906922+e*(-.4065671242119384+e*(-.4149833583594954+e*(-.09691175301595212+e*.04906224540690395))))),n=.001957681026011072+e*(.05770397226904519+e*(.5071377386143635+e*(1.9141558827442668+e*(3.4873958536072385+e*(3.0234982984646304+e*1)))))),r/n)}var EUt=PUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function kUt(e){var t,r,n;return e===0?-.029232972183027003:(e<0?t=-e:t=e,t<=1?(r=-.029232972183027003+e*(.14421626775719232+e*(-.14244039073863127+e*(.05428096940550536+e*(-.008505359768683364+e*(.0004311713426792973+e*0))))),n=1+e*(-1.5016935605448505+e*(.846973248876495+e*(-.22009515181499575+e*(.02558279715597587+e*(-.0010066679553914337+e*-8271935218912905e-22)))))):(e=1/e,r=0+e*(.0004311713426792973+e*(-.008505359768683364+e*(.05428096940550536+e*(-.14244039073863127+e*(.14421626775719232+e*-.029232972183027003))))),n=-8271935218912905e-22+e*(-.0010066679553914337+e*(.02558279715597587+e*(-.22009515181499575+e*(.846973248876495+e*(-1.5016935605448505+e*1)))))),r/n)}var AUt=kUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/lgamma_small.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006-7, 2013-14.
* (C) Copyright Paul A. Bristow 2007, 2013-14.
* (C) Copyright Nikhar Agrawal 2013-14.
* (C) Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var dw=Se,CUt=Ia,MUt=TUt,xUt=EUt,LUt=AUt,IUt=.15896368026733398,OUt=.5281534194946289,RUt=.45201730728149414;function DUt(e,t,r){var n,i,o,a;if(e<CUt)return-dw(e);if(t===0||r===0)return 0;if(i=0,e>2){if(e>=3){do e-=1,r-=1,i+=dw(e);while(e>=3);r=e-2}return o=r*(e+1),a=MUt(r),i+=o*IUt+o*a,i}return e<1&&(i+=-dw(e),r=t,t=e,e+=1),e<=1.5?(o=xUt(t),n=t*r,i+=n*OUt+n*o,i):(o=r*t,a=LUt(-r),i+=o*RUt+o*a,i)}var NUt=DUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006-7, 2013-14.
* (C) Copyright Paul A. Bristow 2007, 2013-14.
* (C) Copyright Nikhar Agrawal 2013-14.
* (C) Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var dR=Bo,pR=Df,FUt=Rn,BUt=Zt,vR=NUt;function $Ut(e){return BUt(e)?NaN:e<0?e<-.5?dR(1+e)-1:pR(-FUt(e)+vR(e+2,e+1,e)):e<2?pR(vR(e+1,e,e-1)):dR(1+e)-1}var zUt=$Ut;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var VUt=zUt,UUt=VUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function GUt(e,t){var r,n,i,o;return r=-t,t=-t,n=e+1,i=1,a;function a(){return o=r/n,r*=t,i+=1,r/=i,n+=1,o}}var jUt=GUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var WUt=wUt,HUt=rA,XUt=UUt,YUt=jUt;function qUt(e,t,r){var n,i,o,a,s;return i=XUt(e),o=(i+1)/e,a=WUt(t,e),i-=a,i/=e,s=YUt(e,t),a+=1,n=r?o:0,i=-a*HUt(s,{initialValue:(n-i)/a}),r&&(i=-i),[i,o]}var ZUt=qUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var KUt=11754943508222875e-54,H_=KUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var y1=he,bo=H_,JUt=Ia,QUt=1e6;function tGt(e,t,r){var n,i,o,a,s,l,u;if(n=typeof e.next=="function",u=n?e.next().value:e(),a=u[1],o=u[0],a===0&&(a=bo),s=a,l=0,n===!0)do u=e.next().value,u&&(l=u[1]+u[0]*l,l===0&&(l=bo),s=u[1]+u[0]/s,s===0&&(s=bo),l=1/l,i=s*l,a*=i);while(y1(i-1)>t&&--r);else do u=e(),u&&(l=u[1]+u[0]*l,l===0&&(l=bo),s=u[1]+u[0]/s,s===0&&(s=bo),l=1/l,i=s*l,a*=i);while(u&&y1(i-1)>t&&--r);return o/a}function eGt(e,t,r){var n,i,o,a,s,l;if(n=typeof e.next=="function",l=n?e.next().value:e(),o=l[1],o===0&&(o=bo),a=o,s=0,n===!0)do l=e.next().value,l&&(s=l[1]+l[0]*s,s===0&&(s=bo),a=l[1]+l[0]/a,a===0&&(a=bo),s=1/s,i=a*s,o*=i);while(l&&y1(i-1)>t&&--r);else do l=e(),l&&(s=l[1]+l[0]*s,s===0&&(s=bo),a=l[1]+l[0]/a,a===0&&(a=bo),s=1/s,i=a*s,o*=i);while(l&&y1(i-1)>t&&--r);return o}function rGt(e,t){var r,n,i;return n={},arguments.length>1&&(n=t),r=n.maxIter||QUt,i=n.tolerance||JUt,n.keep?eGt(e,i,r):tGt(e,i,r)}var nGt=rGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var RU=he,iGt=Ia,Gc=H_,oGt=1e6;function aGt(e,t,r){var n,i,o,a,s,l;l=e(),s=l[1],i=l[0],s===0&&(s=Gc),o=s,a=0;do l=e(),l&&(a=l[1]+l[0]*a,a===0&&(a=Gc),o=l[1]+l[0]/o,o===0&&(o=Gc),a=1/a,n=o*a,s*=n);while(l&&RU(n-1)>t&&--r);return i/s}function sGt(e,t,r){var n,i,o,a,s;s=e(),a=s[1],a===0&&(a=Gc),i=a,o=0;do s=e(),s&&(o=s[1]+s[0]*o,o===0&&(o=Gc),i=s[1]+s[0]/i,i===0&&(i=Gc),o=1/o,n=i*o,a*=n);while(s&&RU(n-1)>t&&--r);return a}function lGt(e,t){var r,n,i;return n={},arguments.length>1&&(n=t),i=n.tolerance||iGt,r=n.maxIter||oGt,n.keep?sGt(e,i,r):aGt(e,i,r)}var uGt=lGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cGt=OU,fGt=nGt,hGt=uGt,NT;cGt()?NT=fGt:NT=hGt;var DU=NT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function dGt(e,t){var r=t-e+1,n=e,i=0;return o;function o(){return i+=1,r+=2,[i*(n-i),r]}}var pGt=dGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var vGt=DU,gGt=pGt;function mGt(e,t){var r=gGt(e,t);return 1/(t-e+1+vGt(r))}var _Gt=mGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006-7, 2013-14.
* (C) Copyright Paul A. Bristow 2007, 2013-14.
* (C) Copyright Nikhar Agrawal 2013-14.
* (C) Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var yGt=zf,bGt=On,Nh=Bo,gR=he,wGt=Ve,mR=er,di=Se,SGt=Z$t,_R=$f,TGt=j_,yR=Cu,PGt=Ne,EGt=tzt,kGt=Wzt,bR=qzt,AGt=xVt,pw=QVt,wR=dUt,CGt=ZUt,SR=_Gt,MGt=170;function NU(e,t,r,n){var i,o,a,s,l,u,c,f,h,d,p,v,g,m,_;if(e<0||t<=0)return NaN;if(o=r===void 0?!0:r,f=n,h=0,t>=MGt&&!o)return f&&t*4<e?(h=t*di(e)-e,h+=di(SR(t,e))):!f&&t>4*e?(h=t*di(e)-e,s=0,h+=di(pw(t,e,s)/t)):(h=NU(t,e,!0,f),h===0?f?(h=1+1/(12*t)+1/(288*t*t),h=di(h)-t+(t-.5)*di(t),h+=di(TGt)):(h=t*di(e)-e,s=0,h+=di(pw(t,e,s)/t)):h=di(h)+yGt(t)),h>yR?PGt:wGt(h);switch(c=t<30&&t<=e+1&&e<yR,c?(m=bGt(t),d=m===t,l=d?!1:gR(m-t)===.5):d=l=!1,d&&e>.6?(f=!f,a=0):l&&e>.2?(f=!f,a=1):e<SGt&&t>1?a=6:e<.5?-.4/di(e)<t?a=2:a=3:e<1.1?e*.75<t?a=2:a=3:(u=!1,o&&t>20&&(p=gR((e-t)/t),t>200?20/t>p*p&&(u=!0):p<.4&&(u=!0)),u?a=5:e-1/(3*e)<t?a=2:(a=4,f=!f)),a){case 0:h=EGt(t,e),o===!1&&(h*=Nh(t));break;case 1:h=kGt(t,e),o===!1&&(h*=Nh(t));break;case 2:h=o?wR(t,e):bR(t,e),h!==0&&(s=0,i=!1,f&&(s=o?1:Nh(t),o||h>=1||_R*h>s?(s/=h,o||t<1||_R/t>s?(s*=-t,i=!0):s=0):s=0)),h*=pw(t,e,s)/t,i&&(f=!1,h=-h);break;case 3:f=!f,g=CGt(t,e,f),h=g[0],_=g[1],f=!1,o&&(h/=_);break;case 4:h=o?wR(t,e):bR(t,e),h!==0&&(h*=SR(t,e));break;case 5:h=AGt(t,e),e>=t&&(f=!f);break;case 6:h=o?mR(e,t)/Nh(t+1):mR(e,t)/t,h*=1-t*e/(t+1);break}return o&&h>1&&(h=1),f&&(v=o?1:Nh(t),h=v-h),h}var xGt=NU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var LGt=xGt,FU=LGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var ic=Ve,sg=er,IGt=Se,TR=Cu,PR=Vf;function OGt(e,t){var r,n;return n=e*IGt(t),t>=1?n<TR&&-t>PR?r=sg(t,e)*ic(-t):e>=1?r=sg(t/ic(t/e),e):r=ic(n-t):n>PR?r=sg(t,e)*ic(-t):t/e<TR?r=sg(t/ic(t/e),e):r=ic(n-t),r}var RGt=OGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var DGt=W_,NGt=zf,FGt=Bo,BGt=Rn,$Gt=tr,zGt=he,ts=Ve,Fh=er,vw=Au,gw=zs,ER=Se,lg=Cu,Bh=Vf,mw=np,VGt=Bf;function UGt(e,t){var r,n,i,o,a,s,l;return i=e+mw-.5,l=(t-e-mw+.5)/i,e<1?t<=Bh?ts(e*ER(t)-t-NGt(e)):Fh(t,e)*ts(-t)/FGt(e):(zGt(l*l*e)<=100&&e>150?(r=e*(BGt(l)-l)+t*(.5-mw)/i,r=ts(r)):(o=e*ER(t/i),a=e-t,gw(o,a)<=Bh||vw(o,a)>=lg?(n=a/e,gw(o,a)/2>Bh&&vw(o,a)/2<lg?(s=Fh(t/i,e/2)*ts(a/2),r=s*s):gw(o,a)/4>Bh&&vw(o,a)/4<lg&&t>e?(s=Fh(t/i,e/4)*ts(a/4),r=s*s,r*=r):n>Bh&&n<lg?r=Fh(t*ts(n)/i,e):r=ts(o+a)):r=Fh(t/i,e)*ts(a)),r*=$Gt(i/VGt)/DGt(e),r)}var GGt=UGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var jGt=tA,kR=MU,WGt=FU,HGt=Rn,ug=he,AR=er,XGt=Se,YGt=ku,CR=Ia,qGt=RGt,ZGt=GGt,es=new Array(30);function KGt(e,t,r,n,i,o,a){var s,l,u,c,f,h,d,p,v,g,m,_,y,w,T,S,P,A;if(h=t-1,P=e+h/2,n<.35?g=HGt(-n):g=XGt(r),A=-P*g,_=ZGt(t,A),_<=YGt)return i;for(a?(s=_/jGt(e,t),s/=AR(P,t)):s=qGt(t,A)/AR(P,t),s*=o,es[0]=1,y=WGt(A,t,!0,!0),y/=_,c=i+s*y,u=1,d=g/2,d*=d,p=1,m=4*P*P,f=t,T=1;T<es.length;++T){for(u+=2,es[T]=0,v=t-T,l=3,w=1;w<T;++w)v=w*t-T,es[T]+=v*es[T-w]/kR(l),l+=2;if(es[T]/=T,es[T]+=h/kR(u),y=(f*(f+1)*y+(A+f+1)*p)/m,p*=d,f+=2,S=s*es[T]*y,c+=S,S>1){if(ug(S)<ug(CR*c))break}else if(ug(S/CR)<ug(c))break}return c}var JGt=KGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function QGt(e,t,r){var n,i;if(r===0)return 1;for(n=1,i=0;i<r;i++)n*=(e+i)/(t+i);return n}var tjt=QGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _w=he,MR=Au,ejt=Ne;function rjt(e,t){var r,n,i;if(r=arguments.length,r===0)return ejt;if(r===2)return MR(_w(e),_w(t));for(n=[],i=0;i<r;i++)n.push(_w(arguments[i]));return MR.apply(null,n)}var njt=rjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ijt=njt,ojt=ijt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yw=he,xR=zs,ajt=Ne;function sjt(e,t){var r,n,i;if(r=arguments.length,r===0)return ajt;if(r===2)return xR(yw(e),yw(t));for(n=[],i=0;i<r;i++)n.push(yw(arguments[i]));return xR.apply(null,n)}var ljt=sjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ujt=ljt,cjt=ujt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var bw=W_,fjt=ojt,hjt=cjt,LR=Df,rs=Rn,IR=tr,cg=he,ao=Ve,so=er,djt=zs,Vn=Se,lo=Cu,oc=Vf,ww=np,pjt=Bf;function vjt(e,t,r,n,i){var o,a,s,l,u,c,f,h,d,p,v,g,m,_;if(!i)return so(r,e)*so(n,t);if(m=e+t,l=e+ww-.5,u=t+ww-.5,c=m+ww-.5,o=bw(m),o/=bw(e)*bw(t),o*=IR(u/pjt),o*=IR(l/c),f=(r*t-n*l)/l,h=(n*e-r*u)/u,hjt(f,h)<.2)if(f*h>0||djt(e,t)<1)cg(f)<.1?o*=ao(e*rs(f)):o*=so(r*c/l,e),cg(h)<.1?o*=ao(t*rs(h)):o*=so(n*c/u,t);else if(fjt(f,h)<.5)a=e<t,s=t/e,a&&s*h<.1||!a&&f/s>.1?(d=LR(s*rs(h)),d=f+d+d*f,d=e*rs(d),o*=ao(d)):(d=LR(rs(f)/s),d=h+d+d*h,d=t*rs(d),o*=ao(d));else if(cg(f)<cg(h))if(_=e*rs(f)+t*Vn(n*c/u),_<=oc||_>=lo){if(_+=Vn(o),_>=lo)return NaN;o=ao(_)}else o*=ao(_);else if(_=t*rs(h)+e*Vn(r*c/l),_<=oc||_>=lo){if(_+=Vn(o),_>=lo)return NaN;o=ao(_)}else o*=ao(_);else if(v=r*c/l,g=n*c/u,f=e*Vn(v),h=t*Vn(g),f>=lo||f<=oc||h>=lo||h<=oc)if(e<t)if(p=so(g,t/e),d=e*(Vn(v)+Vn(p)),d<lo&&d>oc)o*=so(p*v,e);else{if(h+=f+Vn(o),h>=lo)return NaN;o=ao(h)}else if(p=so(v,e/t),d=(Vn(p)+Vn(g))*t,d<lo&&d>oc)o*=so(p*g,t);else{if(h+=f+Vn(o),h>=lo)return NaN;o=ao(h)}else o*=so(v,e)*so(g,t);return o}var nA=vjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var gjt=DU,mjt=nA,_jt={keep:!0,maxIter:1e3};function yjt(e,t,r,n){var i=0;return o;function o(){var a,s,l;return s=(e+i-1)*(e+t+i-1)*i*(t-i)*r*r,a=e+2*i-1,s/=a*a,l=i,l+=i*(t-i)*r/(e+2*i-1),l+=(e+i)*(e*n-t*r+1+i*(2-r))/(e+2*i+1),i+=1,[s,l]}}function bjt(e,t,r,n,i,o){var a,s,l;return a=mjt(e,t,r,n,i),o&&(o[1]=a),a===0?a:(l=yjt(e,t,r,n),s=gjt(l,_jt),a/s)}var wjt=bjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Sw=Bs,OR=Zt,Sjt=Jk,Tjt=G_;function BU(e,t){var r,n;if(OR(e)||OR(t))return NaN;if(!Sw(e)||!Sw(t))return NaN;if(t<0)return 0;if(e<0)return r=BU(-e+t-1,t),Sjt(t)&&(r=-r),r;if(t>e)return 0;if(t===0||t===e)return 1;if(t===1||t===e-1)return e;for(e-t<t&&(t=e-t),r=e,n=2;n<=t;n++)r*=(e-n+1)/n;return Sw(r)?r:Tjt(r)}var Pjt=BU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ejt=Pjt,kjt=Ejt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var RR=kjt,yl=On,$h=er,Ajt=ku;function Cjt(e,t,r,n){var i,o,a,s,l;if(o=$h(r,e),o>Ajt)for(s=o,l=yl(e-1);l>t;l--)s*=(l+1)*n/((e-l)*r),o+=s;else if(a=yl(e*r),a<=t+1&&(a=yl(t+2)),o=$h(r,a)*$h(n,e-a),o*=RR(yl(e),yl(a)),o===0)for(l=a-1;l>t;l--)o+=$h(r,l)*$h(n,e-l),o*=RR(yl(e),yl(l));else{for(s=o,i=o,l=a-1;l>t;l--)s*=(l+1)*n/((e-l)*r),o+=s;for(s=i,l=a+1;l<=e;l++)s*=(e-l+1)*r/(l*n),o+=s}return o}var Mjt=Cjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var xjt=nA;function Ljt(e,t,r,n,i,o,a){var s,l,u,c;if(s=xjt(e,t,r,n,o),a&&(a[1]=s),s/=e,s===0)return s;for(u=1,l=1,c=0;c<i-1;++c)l*=(e+t+c)*r/(e+c+1),u+=l;return s*=u,s}var Ijt=Ljt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Tw=W_,Ojt=rA,Rjt=Rn,Djt=tr,Pw=Ve,fg=er,zh=Se,Njt=ku,DR=Cu,NR=Vf,Ew=np,Fjt=Bf,FR={maxTerms:100};function Bjt(e,t,r,n){var i=1-t,o=1;return a;function a(){var s=n/e;return e+=1,n*=i*r/o,o+=1,i+=1,s}}function $jt(e,t,r,n,i,o,a){var s,l,u,c,f,h,d,p;return i?(d=e+t,l=e+Ew-.5,u=t+Ew-.5,c=d+Ew-.5,s=Tw(d)/(Tw(e)*Tw(t)),f=zh(c/u)*(t-.5),h=zh(r*c/l)*e,f>NR&&f<DR&&h>NR&&h<DR?(e*t<u*10?s*=Pw((t-.5)*Rjt(e/u)):s*=fg(c/u,t-.5),s*=fg(r*c/l,e),s*=Djt(l/Fjt),o&&(o[1]=s*fg(a,t))):(s=zh(s)+f+h+(zh(l)-1)/2,o&&(o[1]=Pw(s+t*zh(a))),s=Pw(s))):s=fg(r,e),s<Njt?n:(p=Bjt(e,t,r,s),FR.initialValue=n,Ojt(p,FR))}var zjt=$jt,Vjt=Zt,Ujt=Df,hg=On,BR=Rn,$R=Xk,Un=wU,kw=tr,Gjt=Ve,Vh=er,jjt=Au,zR=zs,dg=$f,VR=ku,Wjt=B9t,Hjt=Qk,$U=Vs,ns=JGt,Aw=tjt,Xjt=nA,UR=wjt,Yjt=Mjt,Uh=Ijt,uo=zjt,qjt=1/$U;function Zjt(e,t,r,n,i,o,a,s){var l,u,c,f,h,d,p,v,g,m,_,y;if(y=1-e,p=s,v=s+a,o[v]=-1,Vjt(e)||e<0||e>1)return o[p]=NaN,o[v]=NaN,o;if(n){if(t<0||r<0)return o[p]=NaN,o[v]=NaN,o;if(t===0){if(r===0)return o[p]=NaN,o[v]=NaN,o;if(r>0)return o[p]=i?0:1,o}else if(r===0&&t>0)return o[p]=i?1:0,o}else if(t<=0||r<=0)return o[p]=NaN,o[v]=NaN,o;return e===0?(t===1?o[v]=1:o[v]=t<1?dg/2:VR*2,i?(o[p]=n?1:Un(t,r),o):(o[p]=0,o)):e===1?(r===1?o[v]=1:o[v]=r<1?dg/2:VR*2,i?o[p]=0:o[p]=n?1:Un(t,r),o):t===.5&&r===.5?(o[v]=qjt*kw(y*e),_=$R(kw(i?y:e)),_/=Hjt,n||(_*=$U),o[p]=_,o):(t===1&&(d=r,r=t,t=d,d=y,y=e,e=d,i=!i),r===1?t===1?(o[p]=i?y:e,o[v]=1,o):(o[v]=t*Vh(e,t-1),y<.5?_=i?-Ujt(t*BR(-y)):Gjt(t*BR(-y)):_=i?-(Vh(e,t)-1):Vh(e,t),n||(_/=t),o[p]=_,o):(zR(t,r)<=1?(e>.5&&(d=r,r=t,t=d,d=y,y=e,e=d,i=!i),jjt(t,r)<=1?t>=zR(.2,r)||Vh(e,t)<=.9?i?(c=-(n?1:Un(t,r)),i=!1,c=-uo(t,r,e,c,n,o,y)):c=uo(t,r,e,0,n,o,y):(d=r,r=t,t=d,d=y,y=e,e=d,i=!i,y>=.3?i?(c=-(n?1:Un(t,r)),i=!1,c=-uo(t,r,e,c,n,o,y)):c=uo(t,r,e,0,n,o,y):(n?u=1:u=Aw(t+r,t,20),c=Uh(t,r,e,y,20,n,o),i?(c-=n?1:Un(t,r),i=!1,c=-ns(t+20,r,e,y,c,u,n)):c=ns(t+20,r,e,y,c,u,n))):r<=1||e<.1&&Vh(r*e,t)<=.7?i?(c=-(n?1:Un(t,r)),i=!1,c=-uo(t,r,e,c,n,o,y)):c=uo(t,r,e,0,n,o,y):(d=r,r=t,t=d,d=y,y=e,e=d,i=!i,y>=.3?i?(c=-(n?1:Un(t,r)),i=!1,c=-uo(t,r,e,c,n,o,y)):c=uo(t,r,e,0,n,o,y):t>=15?i?(c=-(n?1:Un(t,r)),i=!1,c=-ns(t,r,e,y,c,1,n)):c=ns(t,r,e,y,0,1,n):(n?u=1:u=Aw(t+r,t,20),c=Uh(t,r,e,y,20,n,o),i?(c-=n?1:Un(t,r),i=!1,c=-ns(t+20,r,e,y,c,u,n)):c=ns(t+20,r,e,y,c,u,n)))):(t<r?l=t-(t+r)*e:l=(t+r)*y-r,l<0&&(d=r,r=t,t=d,d=y,y=e,e=d,i=!i),r<40?hg(t)===t&&hg(r)===r&&t<Wjt-100?(g=t-1,m=r+g,c=Yjt(m,g,e,y),n||(c*=Un(t,r))):r*e<=.7?i?(c=-(n?1:Un(t,r)),i=!1,c=-uo(t,r,e,c,n,o,y)):c=uo(t,r,e,0,n,o,y):t>15?(m=hg(r),m===r&&(m-=1),f=r-m,n?u=1:u=Aw(t+f,f,m),c=Uh(f,t,y,e,m,n),c=ns(t,f,e,y,c,1,n),c/=u):n?(m=hg(r),f=r-m,f<=0&&(m-=1,f+=1),c=Uh(f,t,y,e,m,n),c+=Uh(t,f,e,y,20,n),i&&(c-=1),c=ns(t+20,f,e,y,c,1,n),i&&(c=-c,i=!1)):c=UR(t,r,e,y,n,o):c=UR(t,r,e,y,n,o)),o[v]<0&&(o[v]=Xjt(t,r,e,y,!0)),h=y*e,o[v]!==0&&(dg*h<o[v]?o[v]=dg/2:o[v]/=h),o[p]=i?(n?1:Un(t,r))-c:c,o))}var zU=Zjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Kjt=zU;function Jjt(e,t,r,n,i){return Kjt(e,t,r,n,i,[0,0],1,0)}var Qjt=Jjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tWt=vr,VU=Qjt,eWt=zU;tWt(VU,"assign",eWt);var UU=VU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rWt=UU.assign;function nWt(e,t,r,n,i){var o=[0,0];return n=n!==!1,i=i===!0,rWt(e,t,r,n,i,o,1,0),o[0]}var iWt=nWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oWt=iWt,iA=oWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function aWt(e){var t,r,n;return e===0?-.0005087819496582806:(e<0?t=-e:t=e,t<=1?(r=-.0005087819496582806+e*(-.008368748197417368+e*(.03348066254097446+e*(-.012692614766297404+e*(-.03656379714117627+e*(.02198786811111689+e*(.008226878746769157+e*(-.005387729650712429+e*(0+e*0)))))))),n=1+e*(-.9700050433032906+e*(-1.5657455823417585+e*(1.5622155839842302+e*(.662328840472003+e*(-.7122890234154284+e*(-.05273963823400997+e*(.07952836873415717+e*(-.0023339375937419+e*.0008862163904564247))))))))):(e=1/e,r=0+e*(0+e*(-.005387729650712429+e*(.008226878746769157+e*(.02198786811111689+e*(-.03656379714117627+e*(-.012692614766297404+e*(.03348066254097446+e*(-.008368748197417368+e*-.0005087819496582806)))))))),n=.0008862163904564247+e*(-.0023339375937419+e*(.07952836873415717+e*(-.05273963823400997+e*(-.7122890234154284+e*(.662328840472003+e*(1.5622155839842302+e*(-1.5657455823417585+e*(-.9700050433032906+e*1))))))))),r/n)}var sWt=aWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function lWt(e){var t,r,n;return e===0?-.20243350835593876:(e<0?t=-e:t=e,t<=1?(r=-.20243350835593876+e*(.10526468069939171+e*(8.3705032834312+e*(17.644729840837403+e*(-18.851064805871424+e*(-44.6382324441787+e*(17.445385985570866+e*(21.12946554483405+e*-3.6719225470772936))))))),n=1+e*(6.242641248542475+e*(3.971343795334387+e*(-28.66081804998+e*(-20.14326346804852+e*(48.560921310873994+e*(10.826866735546016+e*(-22.643693341313973+e*1.7211476576120028)))))))):(e=1/e,r=-3.6719225470772936+e*(21.12946554483405+e*(17.445385985570866+e*(-44.6382324441787+e*(-18.851064805871424+e*(17.644729840837403+e*(8.3705032834312+e*(.10526468069939171+e*-.20243350835593876))))))),n=1.7211476576120028+e*(-22.643693341313973+e*(10.826866735546016+e*(48.560921310873994+e*(-20.14326346804852+e*(-28.66081804998+e*(3.971343795334387+e*(6.242641248542475+e*1)))))))),r/n)}var uWt=lWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function cWt(e){var t,r,n;return e===0?-.1311027816799519:(e<0?t=-e:t=e,t<=1?(r=-.1311027816799519+e*(-.16379404719331705+e*(.11703015634199525+e*(.38707973897260434+e*(.3377855389120359+e*(.14286953440815717+e*(.029015791000532906+e*(.0021455899538880526+e*(-6794655751811263e-22+e*(28522533178221704e-24+e*-681149956853777e-24))))))))),n=1+e*(3.4662540724256723+e*(5.381683457070069+e*(4.778465929458438+e*(2.5930192162362027+e*(.848854343457902+e*(.15226433829533179+e*(.011059242293464892+e*(0+e*(0+e*0)))))))))):(e=1/e,r=-681149956853777e-24+e*(28522533178221704e-24+e*(-6794655751811263e-22+e*(.0021455899538880526+e*(.029015791000532906+e*(.14286953440815717+e*(.3377855389120359+e*(.38707973897260434+e*(.11703015634199525+e*(-.16379404719331705+e*-.1311027816799519))))))))),n=0+e*(0+e*(0+e*(.011059242293464892+e*(.15226433829533179+e*(.848854343457902+e*(2.5930192162362027+e*(4.778465929458438+e*(5.381683457070069+e*(3.4662540724256723+e*1)))))))))),r/n)}var fWt=cWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function hWt(e){var t,r,n;return e===0?-.0350353787183178:(e<0?t=-e:t=e,t<=1?(r=-.0350353787183178+e*(-.0022242652921344794+e*(.018557330651423107+e*(.009508047013259196+e*(.0018712349281955923+e*(.00015754461742496055+e*(460469890584318e-20+e*(-2304047769118826e-25+e*26633922742578204e-28))))))),n=1+e*(1.3653349817554064+e*(.7620591645536234+e*(.22009110576413124+e*(.03415891436709477+e*(.00263861676657016+e*(7646752923027944e-20+e*(0+e*0)))))))):(e=1/e,r=26633922742578204e-28+e*(-2304047769118826e-25+e*(460469890584318e-20+e*(.00015754461742496055+e*(.0018712349281955923+e*(.009508047013259196+e*(.018557330651423107+e*(-.0022242652921344794+e*-.0350353787183178))))))),n=0+e*(0+e*(7646752923027944e-20+e*(.00263861676657016+e*(.03415891436709477+e*(.22009110576413124+e*(.7620591645536234+e*(1.3653349817554064+e*1)))))))),r/n)}var dWt=hWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function pWt(e){var t,r,n;return e===0?-.016743100507663373:(e<0?t=-e:t=e,t<=1?(r=-.016743100507663373+e*(-.0011295143874558028+e*(.001056288621524929+e*(.00020938631748758808+e*(14962478375834237e-21+e*(44969678992770644e-23+e*(4625961635228786e-24+e*(-2811287356288318e-29+e*9905570997331033e-32))))))),n=1+e*(.5914293448864175+e*(.1381518657490833+e*(.016074608709367652+e*(.0009640118070051656+e*(27533547476472603e-21+e*(282243172016108e-21+e*(0+e*0)))))))):(e=1/e,r=9905570997331033e-32+e*(-2811287356288318e-29+e*(4625961635228786e-24+e*(44969678992770644e-23+e*(14962478375834237e-21+e*(.00020938631748758808+e*(.001056288621524929+e*(-.0011295143874558028+e*-.016743100507663373))))))),n=0+e*(0+e*(282243172016108e-21+e*(27533547476472603e-21+e*(.0009640118070051656+e*(.016074608709367652+e*(.1381518657490833+e*(.5914293448864175+e*1)))))))),r/n)}var vWt=pWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_48_0/boost/math/special_functions/detail/erf_inv.hpp}. This implementation follows the original, but has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var gWt=Zt,GR=tr,jR=Se,mWt=Ne,_Wt=xr,yWt=sWt,bWt=uWt,wWt=fWt,SWt=dWt,TWt=vWt,PWt=.08913147449493408,EWt=2.249481201171875,kWt=.807220458984375,AWt=.9399557113647461,CWt=.9836282730102539;function MWt(e){var t,r,n,i,o;return gWt(e)?NaN:e===0?mWt:e===2?_Wt:e===1?0:e>2||e<0?NaN:(e>1?(t=-1,n=2-e):(t=1,n=e),e=1-n,e<=.5?(i=e*(e+10),o=yWt(e),t*(i*PWt+i*o)):n>=.25?(i=GR(-2*jR(n)),n-=.25,o=bWt(n),t*(i/(EWt+o))):(n=GR(-jR(n)),n<3?(r=n-1.125,o=wWt(r),t*(kWt*n+o*n)):n<6?(r=n-3,o=SWt(r),t*(AWt*n+o*n)):(r=n-6,o=TWt(r),t*(CWt*n+o*n))))}var xWt=MWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var LWt=xWt,ip=LWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, long comment, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1995, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var IWt=Zt,WR=Xk,OWt=tr,HR=aU,RWt=6123233995736766e-32;function DWt(e){var t;return IWt(e)?NaN:e<-1||e>1?NaN:e>.5?2*WR(OWt(.5-.5*e)):(t=HR-WR(e),t+=RWt,t+=HR,t)}var NWt=DWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var FWt=NWt,BWt=FWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $Wt=1.4142135623730951,oA=$Wt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zWt(e){return e===0?.16666666666666666:.16666666666666666+e*.16666666666666666}var VWt=zWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function UWt(e){return e===0?.058333333333333334:.058333333333333334+e*(.06666666666666667+e*.008333333333333333)}var GWt=UWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jWt(e){return e===0?.0251984126984127:.0251984126984127+e*(.026785714285714284+e*(.0017857142857142857+e*.0001984126984126984))}var WWt=jWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function HWt(e){return e===0?.012039792768959435:.012039792768959435+e*(.010559964726631394+e*(-.0011078042328042327+e*(.0003747795414462081+e*27557319223985893e-22)))}var XWt=HWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function YWt(e){return e===0?.003837005972422639:.003837005972422639+e*(.00610392115600449+e*(-.0016095979637646305+e*(.0005945867404200738+e*(-6270542728876062e-20+e*2505210838544172e-23))))}var qWt=YWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ZWt(e){return e===0?.0032177478835464946:.0032177478835464946+e*(.0010898206731540065+e*(-.0012579159844784845+e*(.0006908420797309686+e*(-.00016376804137220805+e*(154012654012654e-19+e*16059043836821613e-26)))))}var KWt=ZWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function JWt(e){return e===0?.001743826229834001:.001743826229834001+e*(3353097688001788e-20+e*(-.0007624513544032393+e*(.0006451304695145635+e*(-.000249472580470431+e*(49255746366361444e-21+e*(-39851014346715405e-22+e*7647163731819816e-28))))))}var QWt=JWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tHt(e){return e===0?.0009647274732138864:.0009647274732138864+e*(-.0003110108632631878+e*(-.00036307660358786886+e*(.0005140660578834113+e*(-.00029133414466938067+e*(9086710793521991e-20+e*(-15303004486655377e-21+e*(10914179173496788e-22+e*28114572543455206e-31)))))))}var eHt=tHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function rHt(e){return e===0?.0005422926281312969:.0005422926281312969+e*(-.0003694266780000966+e*(-.00010230378073700413+e*(.00035764655430568635+e*(-.00028690924218514614+e*(.00012645437628698076+e*(-33202652391372056e-21+e*(4890304529197534e-21+e*(-3123956959982987e-22+e*822063524662433e-32))))))))}var nHt=rHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var iHt=tA,oHt=$s,aHt=tr,sHt=Vs,lHt=VWt,uHt=GWt,cHt=WWt,fHt=XWt,hHt=qWt,dHt=KWt,pHt=QWt,vHt=eHt,gHt=nHt,mHt=0,co=[1,0,0,0,0,0,0,0,0,0];function _Ht(e,t){var r,n;return n=iHt(e/2,.5)*aHt(e*sHt)*(t-.5),r=1/e,co[1]=lHt(r),co[2]=uHt(r),co[3]=cHt(r),co[4]=fHt(r),co[5]=hHt(r),co[6]=dHt(r),co[7]=pHt(r),co[8]=vHt(r),co[9]=gHt(r),mHt+n*oHt(co,n*n)}var yHt=_Ht;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var bHt=tA,wHt=$s,XR=tr,SHt=er,THt=Vs,is=[0,0,0,0,0,0,0];function PHt(e,t){var r,n,i,o,a,s,l,u;return u=bHt(e/2,.5)*XR(e*THt)*t,o=e+2,a=e+4,s=e+6,is[0]=1,is[1]=-(e+1)/(2*o),o*=e+2,is[2]=-e*(e+1)*(e+3)/(8*o*a),o*=e+2,is[3]=-e*(e+1)*(e+5)*((3*e+7)*e-2)/(48*o*a*s),o*=e+2,a*=e+4,is[4]=-e*(e+1)*(e+7)*(((((15*e+154)*e+465)*e+286)*e-336)*e+64)/(384*o*a*s*(e+8)),o*=e+2,is[5]=-e*(e+1)*(e+3)*(e+9)*((((((35*e+452)*e+1573)*e+600)*e-2020)*e+928)*e-128)/(1280*o*a*s*(e+8)*(e+10)),o*=e+2,a*=e+4,s*=e+6,is[6]=-e*(e+1)*(e+11)*(((((((((((945*e+31506)*e+425858)*e+2980236)*e+11266745)*e+20675018)*e+7747124)*e-22574632)*e-8565600)*e+18108416)*e-7099392)*e+884736)/(46080*o*a*s*(e+8)*(e+10)*(e+12)),l=XR(e),i=SHt(l*u,1/e),n=i*i,r=wHt(is,n),r*=l,r/=i,-r}var EHt=PHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var YR=ip,kHt=Df,qR=tr,AHt=er,CHt=Qk,ZR=oA;function MHt(e,t){var r,n,i,o,a,s,l;return e>1e20?-YR(2*t)*ZR:(r=1/(e-.5),n=48/(r*r),i=((20700*r/n-98)*r-16)*r+96.36,o=((94.5/(n+i)-3)/n+1)*qR(r*CHt)*e,l=AHt(o*2*t,2/e),l>.05+r?(s=-YR(2*t)*ZR,l=s*s,e<5&&(i+=.3*(e-4.5)*(s+.6)),i+=(((.05*o*s-5)*s-7)*s-2)*s+n,l=(((((.4*l+6.3)*l+36)*l+94.5)/i-l-3)/n+1)*s,l=kHt(r*l*l)):l=((1/(((e+6)/(e*l)-.089*o-.822)*(e+2)*3)+.5/(e+4))*l-1)*(e+1)/(e+2)+1/l,a=qR(e*l),-a)}var xHt=MHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var KR=ip,JR=On,Cw=Ff,QR=G_,LHt=BWt,pg=tr,IHt=he,tD=eA,OHt=er,RHt=rp,eD=oA,rD=Vs,nD=yHt,vg=EHt,Mw=xHt,iD=268435456,DHt=1/3,NHt=2*53/3,FHt=.8549879733383485;function BHt(e,t,r){var n,i,o,a,s,l,u,c,f,h,d,p,v,g,m,_;if(s=0,t>r?(u=r,r=t,t=u,a=!0):a=!1,JR(e)===e&&e<20)switch(i=Cw(1,NHt),JR(e)){case 1:t===.5?s=0:s=-tD(rD*t)/RHt(rD*t);break;case 2:s=(2*t-1)/pg(2*t*r);break;case 4:l=4*t*r,o=pg(l),v=4*tD(LHt(o)/3)/o,g=pg(v-4),s=t-.5<0?-g:g;break;case 6:if(t<1e-150)return(a?-1:1)*Mw(e,t);m=4*(t-t*t),_=OHt(m,DHt),p=6*(1+FHt*(1/_-1));do f=p*p,h=f*f,d=p*h,c=p,p=2*(8*m*d-270*f+2187)/(5*(4*m*h-216*p-243));while(IHt((p-c)/p)>i);p=pg(p-e),s=t-.5<0?-p:p;break;default:e>iD?s=KR(2*t)*eD:e<3?(n=.2742-e*.0242143,t>n?s=nD(e,t):s=vg(e,t)):(n=Cw(1,QR(e/-.654)),t>n?s=Mw(e,t):s=vg(e,t))}else e>iD?s=-KR(2*t)*eD:e<3?(n=.2742-e*.0242143,t>n?s=nD(e,t):s=vg(e,t)):(n=Cw(1,QR(e/-.654)),t>n?s=Mw(e,t):s=vg(e,t));return a?-s:s}var $Ht=BHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var zHt=$Ht;function VHt(e,t,r){var n,i,o,a;return i=t/2,o=1-i,n=e*2,a=zHt(n,i,o),r&&(r.value=a*a/(n+a*a)),n/(n+a*a)}var UHt=VHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var gg=$s,GHt=ip,oD=tr,jHt=Ve,Jo=oA,ze=[0,0,0,0,0,0,0],Gh=[0,0,0,0];function WHt(e,t,r){var n,i,o,a,s,l,u;return n=GHt(2*r),n/=-oD(e/2),Gh[0]=n,l=t-e,a=l*l,s=a*l,ze[0]=-l*Jo/2,ze[1]=(1-2*l)/8,ze[2]=-(l*Jo/48),ze[3]=-1/192,ze[4]=-l*Jo/3840,ze[5]=0,ze[6]=0,Gh[1]=gg(ze,n),ze[0]=l*Jo*(3*l-2)/12,ze[1]=(20*a-12*l+1)/128,ze[2]=l*Jo*(20*l-1)/960,ze[3]=(16*a+30*l-15)/4608,ze[4]=l*Jo*(21*l+32)/53760,ze[5]=(-(32*a)+63)/368640,ze[6]=-l*Jo*(120*l+17)/25804480,Gh[2]=gg(ze,n),ze[0]=l*Jo*(-75*a+80*l-16)/480,ze[1]=(-1080*s+868*a-90*l-45)/9216,ze[2]=l*Jo*(-1190*a+84*l+373)/53760,ze[3]=(-2240*s-2508*a+2100*l-165)/368640,ze[4]=0,ze[5]=0,ze[6]=0,Gh[3]=gg(ze,n),o=gg(Gh,1/e),i=o*o,u=-jHt(-i/2),i===0?.5:(1+o*oD((1+u)/i))/2}var HHt=WHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var aD=Se,XHt=$f,mg=XHt/4;function YHt(e,t){return r;function r(n){var i,o,a;return a=1-n,a===0?[-mg,-mg]:n===0?[-mg,-mg]:(o=aD(n)+t*aD(a)+e,i=1/n-t/a,[o,i])}}var GU=YHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qHt=Zt;function ZHt(e){return e===0||qHt(e)?e:e<0?-1:1}var KHt=ZHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var JHt=KHt,jU=JHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/tools/roots.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var sD=jU,_g=he,QHt=Ff,xw=$f;function tXt(e,t,r,n,i,o){var a,s,l,u,c,f,h,d,p,v;p=0,a=0,c=t,u=QHt(1,1-i),h=xw,s=xw,l=xw,f=o;do{if(a=p,l=s,s=h,d=e(c),p=d[0],v=d[1],f-=1,p===0)break;if(v===0?(a===0&&(c===r?t=n:t=r,a=e(t),h=t-c),sD(a)*sD(p)<0?h<0?h=(c-r)/2:h=(c-n)/2:h<0?h=(c-n)/2:h=(c-r)/2):h=p/v,_g(h*2)>_g(l)&&(h=h>0?(c-r)/2:(c-n)/2),t=c,c-=h,c<=r){if(h=.5*(t-r),c=t-h,c===r||c===n)break}else if(c>=n&&(h=.5*(t-n),c=t-h,c===r||c===n))break;h>0?n=t:r=t}while(f&&_g(c*u)<_g(h));return c}var WU=tXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function eXt(e){return e===0?-1:-1+e*(-5+e*5)}var rXt=eXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function nXt(e){return e===0?1:1+e*(21+e*(-69+e*46))}var iXt=nXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function oXt(e){return e===0?7:7+e*(-2+e*(33+e*(-62+e*31)))}var aXt=oXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function sXt(e){return e===0?25:25+e*(-52+e*(-17+e*(88+e*(-115+e*46))))}var lXt=sXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function uXt(e){return e===0?7:7+e*(12+e*(-78+e*52))}var cXt=uXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function fXt(e){return e===0?-7:-7+e*(2+e*(183+e*(-370+e*185)))}var hXt=fXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function dXt(e){return e===0?-533:-533+e*(776+e*(-1835+e*(10240+e*(-13525+e*5410))))}var pXt=dXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function vXt(e){return e===0?-1579:-1579+e*(3747+e*(-3372+e*(-15821+e*(45588+e*(-45213+e*15071)))))}var gXt=vXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function mXt(e){return e===0?449:449+e*(-1259+e*(-769+e*(6686+e*(-9260+e*3704))))}var _Xt=mXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function yXt(e){return e===0?63149:63149+e*(-151557+e*(140052+e*(-727469+e*(2239932+e*(-2251437+e*750479)))))}var bXt=yXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function wXt(e){return e===0?29233:29233+e*(-78755+e*(105222+e*(146879+e*(-1602610+e*(3195183+e*(-2554139+e*729754))))))}var SXt=wXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function TXt(e){return e===0?1:1+e*(-13+e*13)}var PXt=TXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function EXt(e){return e===0?1:1+e*(21+e*(-69+e*46))}var kXt=EXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var ac=$s,AXt=ip,CXt=he,MXt=Ve,lD=Se,xXt=tr,LXt=rp,IXt=eA,OXt=GU,RXt=WU,DXt=rXt,NXt=iXt,FXt=aXt,BXt=lXt,$Xt=cXt,zXt=hXt,VXt=pXt,UXt=gXt,GXt=_Xt,jXt=bXt,WXt=SXt,HXt=PXt,XXt=kXt,ee=[0,0,0,0,0,0],jh=[0,0,0,0];function YXt(e,t,r){var n,i,o,a,s,l,u,c,f,h,d,p,v,g,m,_,y,w,T,S;return s=AXt(2*e)/-xXt(t/2),w=LXt(r),y=IXt(r),jh[0]=s,m=w*w,_=y*y,v=w*y,p=v*v,d=p*v,h=p*p,f=p*d,c=d*d,u=h*d,ee[0]=(2*m-1)/(3*v),ee[1]=-DXt(m)/(36*p),ee[2]=NXt(m)/(1620*d),ee[3]=FXt(m)/(6480*h),ee[4]=BXt(m)/(90720*f),ee[5]=0,jh[1]=ac(ee,s),ee[0]=-$Xt(m)/(405*d),ee[1]=zXt(m)/(2592*h),ee[2]=-VXt(m)/(204120*f),ee[3]=-UXt(m)/(2099520*c),ee[4]=0,ee[5]=0,jh[2]=ac(ee,s),ee[0]=GXt(m)/(102060*f),ee[1]=-jXt(m)/(20995200*c),ee[2]=WXt(m)/(36741600*u),ee[3]=0,ee[4]=0,ee[5]=0,jh[3]=ac(ee,s),l=ac(jh,1/t),o=y/w,o*=o,g=-(l*l)/(2*m)+lD(m)+_*lD(_)/m,CXt(l)<.7?(ee[0]=m,ee[1]=v,ee[2]=(1-2*m)/3,ee[3]=HXt(m)/(36*v),ee[4]=XXt(m)/(270*p),ee[5]=0,S=ac(ee,l)):(T=MXt(g),ee[0]=T,ee[1]=o,ee[2]=0,ee[3]=3*o*(3*o+1)/6,ee[4]=4*o*(4*o+1)*(4*o+2)/24,ee[5]=5*o*(5*o+1)*(5*o+2)*(5*o+3)/120,S=ac(ee,T),(S-m)*l<0&&(S=1-S)),l<0?(i=0,n=m):(i=m,n=1),(S<i||S>n)&&(S=(i+n)/2),a=OXt(-g,o),S=RXt(a,S,i,n,32,100),S}var qXt=YXt,b1={exports:{}},FT={exports:{}},S0=1e3,T0=S0*60,P0=T0*60,E0=P0*24,ZXt=E0*365.25,KXt=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return JXt(e);if(r==="number"&&isNaN(e)===!1)return t.long?tYt(e):QXt(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function JXt(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!!t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*ZXt;case"days":case"day":case"d":return r*E0;case"hours":case"hour":case"hrs":case"hr":case"h":return r*P0;case"minutes":case"minute":case"mins":case"min":case"m":return r*T0;case"seconds":case"second":case"secs":case"sec":case"s":return r*S0;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function QXt(e){return e>=E0?Math.round(e/E0)+"d":e>=P0?Math.round(e/P0)+"h":e>=T0?Math.round(e/T0)+"m":e>=S0?Math.round(e/S0)+"s":e+"ms"}function tYt(e){return yg(e,E0,"day")||yg(e,P0,"hour")||yg(e,T0,"minute")||yg(e,S0,"second")||e+" ms"}function yg(e,t,r){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}(function(e,t){t=e.exports=i.debug=i.default=i,t.coerce=l,t.disable=a,t.enable=o,t.enabled=s,t.humanize=KXt,t.names=[],t.skips=[],t.formatters={};var r;function n(u){var c=0,f;for(f in u)c=(c<<5)-c+u.charCodeAt(f),c|=0;return t.colors[Math.abs(c)%t.colors.length]}function i(u){function c(){if(!!c.enabled){var f=c,h=+new Date,d=h-(r||h);f.diff=d,f.prev=r,f.curr=h,r=h;for(var p=new Array(arguments.length),v=0;v<p.length;v++)p[v]=arguments[v];p[0]=t.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");var g=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,function(_,y){if(_==="%%")return _;g++;var w=t.formatters[y];if(typeof w=="function"){var T=p[g];_=w.call(f,T),p.splice(g,1),g--}return _}),t.formatArgs.call(f,p);var m=c.log||t.log||console.log.bind(console);m.apply(f,p)}}return c.namespace=u,c.enabled=t.enabled(u),c.useColors=t.useColors(),c.color=n(u),typeof t.init=="function"&&t.init(c),c}function o(u){t.save(u),t.names=[],t.skips=[];for(var c=(typeof u=="string"?u:"").split(/[\s,]+/),f=c.length,h=0;h<f;h++)!c[h]||(u=c[h].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.substr(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function a(){t.enable("")}function s(u){var c,f;for(c=0,f=t.skips.length;c<f;c++)if(t.skips[c].test(u))return!1;for(c=0,f=t.names.length;c<f;c++)if(t.names[c].test(u))return!0;return!1}function l(u){return u instanceof Error?u.stack||u.message:u}})(FT,FT.exports);(function(e,t){t=e.exports=FT.exports,t.log=i,t.formatArgs=n,t.save=o,t.load=a,t.useColors=r,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:s(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function r(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(l){try{return JSON.stringify(l)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}};function n(l){var u=this.useColors;if(l[0]=(u?"%c":"")+this.namespace+(u?" %c":" ")+l[0]+(u?"%c ":" ")+"+"+t.humanize(this.diff),!!u){var c="color: "+this.color;l.splice(1,0,c,"color: inherit");var f=0,h=0;l[0].replace(/%[a-zA-Z%]/g,function(d){d!=="%%"&&(f++,d==="%c"&&(h=f))}),l.splice(h,0,c)}}function i(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(l){try{l==null?t.storage.removeItem("debug"):t.storage.debug=l}catch{}}function a(){var l;try{l=t.storage.debug}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=process.env.DEBUG),l}t.enable(a());function s(){try{return window.localStorage}catch{}}})(b1,b1.exports);/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eYt=34028234663852886e22,X_=eYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rYt=b1.exports,uD=FU,nYt=he,iYt=Ve,cD=Se,oYt=X_,fD=rYt("gammaincinv:higher_newton");function aYt(e,t,r,n,i,o,a,s){var l,u,c,f,h,d,p,v,g,m,_,y,w,T;T=e,_=1,y=1,d=t*t,u=e;do{if(T=e,p=T*T,r===0){if(l=(1-t)*cD(T)+T+o,l>cD(oYt))return fD("Warning: overflow problems in one or more steps of the computation. The initial approximation to the root is returned."),u;w=iYt(l)}else w=-a*T;s?(v=uD(T,t,!0,!1),c=-w*(v-n)):(g=uD(T,t,!0,!0),c=w*(g-i)),w=c,n>1e-120||y>1?(f=.5*(T-t+1)/T,h=(2*p-4*T*t+4*T+2*d-3*t+1)/p,h/=6,e=T+w*(1+w*(f+w*h))):e=T+w,_=nYt(T/e-1),y+=1,T=e,T<0&&(T=u,y=100)}while(_>2e-14&&y<35);return(_>2e-14||y>99)&&fD("Warning: the number of iterations in the Newton method reached the upper limit N=35. The last value obtained for the root is given as output."),m=T||0,m}var sYt=aYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function lYt(e){return e===0?0:0+e*(1+e*(1+e*(1.5+e*(2.6666666666666665+e*(5.208333333333333+e*10.8)))))}var uYt=lYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function cYt(e){return e===0?1:1+e*(1+e*(.3333333333333333+e*(.027777777777777776+e*(-.003703703703703704+e*(.0002314814814814815+e*5878894767783657e-20)))))}var fYt=cYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hYt=he,dYt=Ve,hD=Se,pYt=$s,vYt=uYt,gYt=fYt,mYt=1e-8,_Yt=.08333333333333333,yYt=.008333333333333333,sc=[1,0,0,0,0,0];function bYt(e){var t,r,n,i,o,a,s,l,u;if(u=e*e*.5,e===0?o=0:e<-1?(l=dYt(-1-u),o=vYt(l)):e<1?(l=e,o=gYt(l)):(l=11+u,a=hD(l),o=l+a,l=1/l,t=a*a,r=t*a,n=r*a,i=n*a,sc[1]=(2-a)*.5,sc[2]=(-9*a+6+2*t)/6,sc[3]=-(3*r+36*a-22*t-12)*_Yt,sc[4]=(60+350*t-300*a-125*r+12*n)/60,sc[5]=-(-120-274*n+900*a-1700*t+1125*r+20*i)*yYt,o+=a*l*pYt(sc,l)),l=1,e>-3.5&&e<-.03||e>.03&&e<40){l=1,s=o;do o=s*(u+hD(s))/(s-1),l=hYt(s/o-1),s=o;while(l>mYt)}return o}var HU=bYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wYt=.9189385332046728,XU=wYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SYt=[1.9963790515900766,-.0017971032528832887,13129285796384672e-21,-2340875228178749e-22,72291210671127e-22,-3280997607821e-22,19875070901e-21,-1509214183e-21,1375340084e-22,-145728923e-22,17532367e-22,-2351465e-22,346551e-22,-55471e-22,9548e-22,-1748e-22,332e-22,-58e-22];function TYt(e,t){var r,n,i,o,a;n=0,i=0,r=t+t,a=e;do o=i,i=n,n=r*i-o+SYt[a],a-=1;while(a>=0);return(n-o)/2}var PYt=TYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function EYt(e){return e===0?.025721014990011306:.025721014990011306+e*(.08247596616699963+e*(-.0025328157302663564+e*(.0006099292666946337+e*(-.00033543297638406+e*.000250505279903))))}var kYt=EYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function AYt(e){return e===0?.08333333333333333:.08333333333333333+e*(-.002777777777777778+e*(.0007936507936507937+e*-.0005952380952380953))}var CYt=AYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Lw=zf,bg=Se,Iw=XU,MYt=H_,xYt=X_,LYt=PYt,IYt=kYt,OYt=CYt,RYt=.30865217988013566;function DYt(e){var t;return e<MYt?xYt:e<1?Lw(e+1)-(e+.5)*bg(e)+e-Iw:e<2?Lw(e)-(e-.5)*bg(e)+e-Iw:e<3?Lw(e-1)-(e-.5)*bg(e)+e-Iw+bg(e-1):e<12?(t=18/(e*e)-1,LYt(17,t)/(12*e)):(t=1/(e*e),e<1e3?IYt(t)/(RYt+t)/e:OYt(t)/e)}var NYt=DYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dD=Ve,FYt=Bo,BYt=Se,$Yt=X_,zYt=j_,VYt=NYt;function UYt(e){return e>=3?dD(VYt(e)):e>0?FYt(e)/(dD(-e+(e-.5)*BYt(e))*zYt):$Yt}var GYt=UYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jYt(e){var t,r,n;return e===0?-.3333333333438:(e<0?t=-e:t=e,t<=1?(r=-.3333333333438+e*(-.2070740359969+e*(-.05041806657154+e*(-.004923635739372+e*-4293658292782e-17))),n=1+e*(.7045554412463+e*(.2118190062224+e*(.03048648397436+e*.001605037988091)))):(e=1/e,r=-4293658292782e-17+e*(-.004923635739372+e*(-.05041806657154+e*(-.2070740359969+e*-.3333333333438))),n=.001605037988091+e*(.03048648397436+e*(.2118190062224+e*(.7045554412463+e*1)))),r/n)}var WYt=jYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var HYt=he,XYt=Se,YYt=HU,qYt=WYt;function ZYt(e){var t;return HYt(e)<1?qYt(e):(t=YYt(e),XYt(e/(t-1))/e)}var KYt=ZYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function JYt(e){var t,r,n;return e===0?-.0172847633523:(e<0?t=-e:t=e,t<=1?(r=-.0172847633523+e*(-.0159372646475+e*(-.00464910887221+e*(-.00060683488776+e*-614830384279e-17))),n=1+e*(.764050615669+e*(.297143406325+e*(.0579490176079+e*.00574558524851)))):(e=1/e,r=-614830384279e-17+e*(-.00060683488776+e*(-.00464910887221+e*(-.0159372646475+e*-.0172847633523))),n=.00574558524851+e*(.0579490176079+e*(.297143406325+e*(.764050615669+e*1)))),r/n)}var QYt=JYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tqt(e){var t,r,n;return e===0?-.0172839517431:(e<0?t=-e:t=e,t<=1?(r=-.0172839517431+e*(-.0146362417966+e*(-.00357406772616+e*(-.000391032032692+e*249634036069e-17))),n=1+e*(.690560400696+e*(.249962384741+e*(.0443843438769+e*.00424073217211)))):(e=1/e,r=249634036069e-17+e*(-.000391032032692+e*(-.00357406772616+e*(-.0146362417966+e*-.0172839517431))),n=.00424073217211+e*(.0443843438769+e*(.249962384741+e*(.690560400696+e*1)))),r/n)}var eqt=tqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function rqt(e){var t,r,n;return e===0?.99994466948:(e<0?t=-e:t=e,t<=1?(r=.99994466948+e*(104.649839762+e*(857.204033806+e*(731.901559577+e*45.5174411671))),n=1+e*(104.526456943+e*(823.313447808+e*(3119.93802124+e*3970.03311219)))):(e=1/e,r=45.5174411671+e*(731.901559577+e*(857.204033806+e*(104.649839762+e*.99994466948))),n=3970.03311219+e*(3119.93802124+e*(823.313447808+e*(104.526456943+e*1)))),r/n)}var nqt=rqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iqt=Se,oqt=QYt,aqt=eqt,sqt=nqt;function lqt(e){var t,r;return e<-5?(r=e*e,t=iqt(-e),(12-r-6*(t*t))/(12*r*e)):e<-2?oqt(e):e<2?aqt(e):e<1e3?(r=1/e,sqt(e)/(-12*e)):-1/(12*e)}var uqt=lqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function cqt(e){var t,r,n;return e===0?.0495346498136:(e<0?t=-e:t=e,t<=1?(r=.0495346498136+e*(.0299521337141+e*(.00688296911516+e*(.000512634846317+e*-201411722031e-16))),n=1+e*(.759803615283+e*(.261547111595+e*(.0464854522477+e*.00403751193496)))):(e=1/e,r=-201411722031e-16+e*(.000512634846317+e*(.00688296911516+e*(.0299521337141+e*.0495346498136))),n=.00403751193496+e*(.0464854522477+e*(.261547111595+e*(.759803615283+e*1)))),r/n)}var fqt=cqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function hqt(e){var t,r,n;return e===0?.00452313583942:(e<0?t=-e:t=e,t<=1?(r=.00452313583942+e*(.00120744920113+e*(-789724156582e-16+e*(-504476066942e-16+e*-535770949796e-17))),n=1+e*(.912203410349+e*(.405368773071+e*(.0901638932349+e*.00948935714996)))):(e=1/e,r=-535770949796e-17+e*(-504476066942e-16+e*(-789724156582e-16+e*(.00120744920113+e*.00452313583942))),n=.00948935714996+e*(.0901638932349+e*(.405368773071+e*(.912203410349+e*1)))),r/n)}var dqt=hqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function pqt(e){var t,r,n;return e===0?.00439937562904:(e<0?t=-e:t=e,t<=1?(r=.00439937562904+e*(.000487225670639+e*(-.000128470657374+e*(529110969589e-17+e*15716677175e-17))),n=1+e*(.794435257415+e*(.333094721709+e*(.0703527806143+e*.00806110846078)))):(e=1/e,r=15716677175e-17+e*(529110969589e-17+e*(-.000128470657374+e*(.000487225670639+e*.00439937562904))),n=.00806110846078+e*(.0703527806143+e*(.333094721709+e*(.794435257415+e*1)))),r/n)}var vqt=pqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function gqt(e){var t,r,n;return e===0?-.0011481191232:(e<0?t=-e:t=e,t<=1?(r=-.0011481191232+e*(-.112850923276+e*(1.51623048511+e*(-.218472031183+e*.0730002451555))),n=1+e*(14.2482206905+e*(69.7360396285+e*(218.938950816+e*277.067027185)))):(e=1/e,r=.0730002451555+e*(-.218472031183+e*(1.51623048511+e*(-.112850923276+e*-.0011481191232))),n=277.067027185+e*(218.938950816+e*(69.7360396285+e*(14.2482206905+e*1)))),r/n)}var mqt=gqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _qt(e){var t,r,n;return e===0?-.000145727889667:(e<0?t=-e:t=e,t<=1?(r=-.000145727889667+e*(-.290806748131+e*(-13.308504545+e*(199.722374056+e*-11.4311378756))),n=1+e*(139.612587808+e*(2189.01116348+e*(7115.24019009+e*45574.6081453)))):(e=1/e,r=-11.4311378756+e*(199.722374056+e*(-13.308504545+e*(-.290806748131+e*-.000145727889667))),n=45574.6081453+e*(7115.24019009+e*(2189.01116348+e*(139.612587808+e*1)))),r/n)}var yqt=_qt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pD=Se,bqt=fqt,wqt=dqt,Sqt=vqt,Tqt=mqt,Pqt=yqt;function Eqt(e){var t,r;return e<-8?(t=e*e,r=pD(-e)/e,(-30+e*r*(6*t*r*r-12+t))/(12*e*t*t)):e<-4?bqt(e)/(e*e):e<-2?wqt(e):e<2?Sqt(e):e<10?(t=1/e,Tqt(t)/(e*e)):e<100?(t=1/e,Pqt(t)/(e*e)):-pD(e)/(12*e*e*e)}var kqt=Eqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Aqt=b1.exports,vD=$s,pi=zf,Cqt=ip,gD=Bo,wg=tr,mD=he,lc=Ve,Mqt=zs,xqt=er,Gn=Se,Lqt=j_,Iqt=X_,Oqt=IU,Rqt=sYt,_D=HU,yD=GYt,Dqt=KYt,Nqt=uqt,Fqt=kqt,Bqt=Aqt("gammaincinv:compute"),os=.5,Ow=.3333333333333333,$qt=.25,bD=.2,wD=.16666666666666666,zqt=.08333333333333333,Vqt=.041666666666666664,jn=[0,0,0,0,0];function Uqt(e,t,r){var n,i,o,a,s,l,u,c,f,h,d,p,v,g,m,_,y,w,T,S,P,A,k,C,M,D,B,V,N,j,Z,q,et,Pt,Rt,wt,St,Ht,Y,it,K,pt,Tt,kt;if(t<os?(a=!0,s=t,pt=-1):(a=!1,s=r,pt=1),Y=0,mD(e-1)<1e-4&&(it=0,a?t<.001?(q=t*t,V=q*t,Z=V*t,S=Z*t,T=S*t,P=t+q*os+V*Ow+Z*$qt+S*bD+T*wD):P=-Gn(1-t):P=-Gn(r),e===1?(Y=2,Pt=P):(o=pi(e),Y=1)),r<1e-30&&e<os&&(it=0,P=-Gn(r*gD(e))+(e-1)*Gn(-Gn(r*gD(e))),Y=1,o=pi(e)),e>1&&e<500&&t<1e-80){for(it=0,l=1/e,n=1/(e+1),P=(pi(e+1)+Gn(t))*l,P=lc(P),g=P,Ht=0;Ht<10;Ht++)P=g*lc(P*l)*xqt(1-P*n,l);Y=1,o=pi(e)}if(u=1/e*(Gn(t)+pi(e+1)),u<Gn(bD*(1+e))&&Y===0&&(K=lc(u),it=0,A=e*e,et=A*e,N=et*e,m=e+1,d=m*m,h=m*d,f=d*d,_=e+2,c=_*_,y=e+3,jn[0]=1,jn[1]=1/m,jn[2]=os*(3*e+5)/(d*_),jn[3]=Ow*(31+8*A+33*e)/(h*_*y),jn[4]=Vqt*(2888+1179*et+125*N+3971*A+5661*e)/(f*c*y*(e+4)),P=K*vD(jn,K),o=pi(e),Y=1),e<10&&Y===0&&(p=wg(e)/(yD(e)*Lqt),v=Mqt(.02,p),r<v&&(it=0,wt=1-e,D=wt*wt,B=D*wt,w=wg(-2/e*Gn(r/p)),P=e*_D(w),St=Gn(P),P>5?(k=St*St,C=k*St,M=C*St,K=1/P,jn[0]=St-1,jn[1]=(3*wt-2*wt*St+k-2*St+2)*os,jn[2]=(24*wt*St-11*D-24*wt-6*k+12*St-12-9*wt*k+6*D*St+2*C)*wD,jn[3]=(-12*B*St+8.04*wt*k-114*D*St+(72+36*k)+(3*M-72*St+162)*(wt-168*wt*St)-(12*C+25*B)-(22*wt*C+36*D*k+120*D))*zqt,jn[4]=0,P=P-St+wt*K*vD(jn,K)):(K=1/P,k=St*St,Rt=St-1,Tt=St-wt*K*Rt,Tt<P&&(P-=Tt)),o=pi(e),Y=1)),mD(s-os)<1e-5&&Y===0&&(it=0,l=1/e,P=e-Ow+(.019753086419753086+.007211444248481286*l)*l,o=pi(e),Y=1),e<1&&Y===0&&(it=0,a?P=lc(1/e*(Gn(s)+pi(e+1))):P=lc(1/e*(Gn(1-s)+pi(e+1))),o=pi(e),Y=1),Y===0)if(it=1,l=1/e,K=Cqt(2*s),w=pt*K/wg(e*os),K<Iqt)w+=(Dqt(w)+(Nqt(w)+Fqt(w)*l)*l)*l,P=e*_D(w),kt=w,j=-wg(e/Oqt)*lc(-os*e*kt*kt)/yD(e),i=1/j;else return Bqt("Warning: Overflow problems in one or more steps of the computation."),NaN;return Y<2&&(Pt=Rqt(P,e,it,t,r,o,i,a)),Pt}var Gqt=Uqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SD=Zt,jqt=H_,TD=Ne,PD=Gqt;function Wqt(e,t,r){return SD(e)||SD(t)?NaN:t<jqt?NaN:e>1||e<0?NaN:r===!0?e===0?TD:e===1?0:PD(t,1-e,e):e===0?0:e===1?TD:PD(t,e,1-e)}var Hqt=Wqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Xqt=Hqt,Yqt=Xqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qqt=5e-324,Zqt=qqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var ED=Yqt,kD=Se,Kqt=tr,Jqt=Zqt,Qqt=GU,tZt=WU;function eZt(e,t,r,n){var i,o,a,s,l,u,c,f,h,d,p,v,g,m,_,y,w,T,S,P,A,k,C,M,D,B,V,N,j,Z;return r<n?l=ED(r,t,!0):l=ED(n,t,!1),l/=e,m=t/e,N=Kqt(1+m),T=N*N,S=T*N,P=T*T,A=S*T,k=S*S,C=P*S,M=P*P,D=A*P,c=A*A,V=l-m,_=V*V,y=_*V,w=_*_,B=N+1,f=B*B,h=B*f,d=f*f,p=(N+2)*(N-1)/(3*N),p+=(S+9*T+21*N+5)*V/(36*T*B),p-=(P-13*S+69*T+167*N+46)*_/(1620*f*S),p-=(7*A+21*P+70*S+26*T-93*N-31)*y/(6480*h*P),p-=(75*k+202*A+188*P-888*S-1345*T+118*N+138)*w/(272160*d*A),v=(28*P+131*S+402*T+581*N+208)*(N-1)/(1620*B*S),v-=(35*k-154*A-623*P-1636*S-3983*T-3514*N-925)*V/(12960*f*P),v-=(2132*C+7915*k+16821*A+35066*P+87490*S+141183*T+95993*N+21640)*_/(816480*A*h),v-=(11053*M+53308*C+117010*k+163924*A+116188*P-258428*S-677042*T-481940*N-105497)*y/(14696640*d*k),g=-((3592*C+8375*k-1323*A-29198*P-89578*S-154413*T-116063*N-29632)*(N-1))/(816480*A*f),g-=(442043*D+2054169*M+3803094*C+3470754*k+2141568*A-2393568*P-19904934*S-34714674*T-23128299*N-5253353)*V/(146966400*k*h),g-=(116932*c+819281*D+2378172*M+4341330*C+6806004*k+10622748*A+18739500*P+30651894*S+30869976*T+15431867*N+2919016)*_/(146966400*d*C),u=l+p/e+v/(e*e)+g/(e*e*e),u<=0&&(u=Jqt),j=u-m*kD(u)+(1+m)*kD(1+m)-m,i=1/(1+m),a=u<m?i:0,s=u<m?1:i,Z=(a+s)/2,o=Qqt(j,m),tZt(o,Z,a,s,32,100)}var rZt=eZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/tools/roots.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var rr=he,nZt=Ff,Rw=jU,iZt=Au,Dw=$f;function oZt(e,t,r,n,i,o){var a,s,l,u,c,f,h,d,p,v,g,m,_,y,w,T;y=0,s=!1,f=t,c=nZt(1,1-i),p=iZt(1e7*t,1e7),h=0,l=p,u=p,d=o;do{if(h=y,u=l,l=p,_=e(f),y=_[0],w=_[1],T=_[2],d-=1,y===0)break;if(w===0?(h===0&&(f===r?t=n:t=r,h=e(t),p=t-f),Rw(h)*Rw(y)<0?p<0?p=(f-r)/2:p=(f-n)/2:p<0?p=(f-n)/2:p=(f-r)/2):T===0?p=y/w:(v=2*y,m=2*w-y*(T/w),rr(m)<1&&rr(v)>=rr(m)*Dw?p=y/w:p=v/m,p*w/y<0&&(p=y/w,rr(p)>2*rr(t)&&(p=(p<0?-1:1)*2*rr(t)))),a=rr(p/u),a>.8&&a<2&&(p=p>0?(f-r)/2:(f-n)/2,rr(p)>f&&(p=Rw(p)*f),u=p*3),t=f,f-=p,f<r){if(rr(r)<1&&rr(f)>1&&Dw/rr(f)<rr(r)?g=1e3:g=f/r,rr(g)<1&&(g=1/g),!s&&g>0&&g<3)p=.99*(t-r),f=t-p,s=!0;else if(p=(t-r)/2,f=t-p,f===r||f===n)break}else if(f>n){if(rr(n)<1&&rr(f)>1&&Dw/rr(f)<rr(n)?g=1e3:g=f/n,rr(g)<1&&(g=1/g),!s&&g>0&&g<3)p=.99*(t-n),f=t-p,s=!0;else if(p=(t-n)/2,f=t-p,f===r||f===n)break}p>0?n=t:r=t}while(d&&rr(f*c)<rr(p));return f}var aZt=oZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var sZt=UU.assign,lZt=he,uZt=$f,Nw=ku;function cZt(e,t,r,n){return i;function i(o){var a,s,l,u,c;return c=1-o,a=[0,0],sZt(o,e,t,!0,n,a,1,0),u=a[0]-r,s=a[1],n&&(s=-s),c===0&&(c=Nw*64),o===0&&(o=Nw*64),l=s*(-(c*e)+(t-2)*o+1),lZt(l)<c*o*uZt&&(l/=c*o),n&&(l=-l),s===0&&(s=(n?-1:1)*Nw*64),[u,s,l]}}var fZt=cZt,hZt=$s,AD=iA,Fw=Df,CD=Rn,dZt=Xk,uc=wU,MD=tr,pZt=he,xD=Ve,fo=er,LD=rp,vZt=Au,gZt=zs,ID=Se,Bw=ku,OD=Qk,RD=Ia,mZt=UHt,_Zt=HHt,yZt=qXt,bZt=rZt,wZt=aZt,SZt=fZt,TZt=32,PZt=1e3,bl=[0,0,0,0,0];function EZt(e,t,r,n){var i,o,a,s,l,u,c,f,h,d,p,v,g,m,_,y,w,T,S,P,A,k,C,M,D,B,V,N,j;if(o=!1,n===0)return[1,0];if(r===0)return[0,1];if(e===1){if(t===1)return[r,1-r];v=t,t=e,e=v,v=n,n=r,r=v,o=!0}if(N=0,s=0,u=1,e===.5){if(t===.5)return N=LD(r*OD),N*=N,j=LD(n*OD),j*=j,[N,j];t>.5&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o)}if(t===.5&&e>=.5&&r!==1)A={},N=mZt(e,r,A),j=A.value;else{if(t===1)return r<n?e>1?(N=fo(r,1/e),j=-Fw(ID(r)/e)):(N=fo(r,1/e),j=1-N):(N=xD(CD(-n)/e),j=-Fw(CD(-n)/e)),o&&(v=j,j=N,N=v),[N,j];if(e+t>5)r>.5&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o),h=gZt(e,t),f=vZt(e,t),MD(h)>f-h&&h>5?(N=_Zt(e,t,r),j=1-N):(D=e+t,l=dZt(MD(e/D)),a=h/D,a>=.2&&a<=.8&&D>=10?(p=fo(r,1/e),p<.0025&&e+t<200?N=p*fo(e*uc(e,t),1/e):N=yZt(r,D,l),j=1-N):(e<t&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o),d=0,t<2&&(d=uc(e,t)),d===0?j=1:(j=fo(t*n*d,1/t),N=1-j)),j>1e-5&&(N=bZt(e,t,r,n),j=1-N));else if(e<1&&t<1){if(P=(1-e)/(2-e-t),y=AD(P,e,t)-r,pZt(y)/r<RD*3)return o?[1-P,P]:[P,1-P];y<0&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o,P=1-P),S=fo(e*r*uc(e,t),1/e),N=S/(1+S),j=1/(1+S),N>P&&(N=P),u=P}else e>1&&t>1?(P=(e-1)/(e+t-2),g=(t-1)/(e+t-2),T=AD(P,e,t)-r,T<0&&(v=t,t=e,e=v,v=n,n=r,r=v,v=g,g=P,P=v,o=!o),w=ID(r*e*uc(e,t))/e,N=xD(w),j=N<.9?1-N:-Fw(w),t<e&&N<.2&&(m=e-1,_=t-1,k=e*e,C=e*k,M=t*t,bl[0]=0,bl[1]=1,bl[2]=_/m,m*=m,bl[3]=_*(3*e*t+5*t+k-e-4)/(2*(e+2)*m),m*=e+1,bl[4]=_*(33*e*M+31*M+8*k*M-30*e*t-47*t+11*k*t+6*C*t+18+4*e-C+k*k-10*k),bl[4]/=3*(e+3)*(e+2)*m,N=hZt(bl,N)),N>P&&(N=P),u=P):(t<e&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o),fo(r,1/e)<.5?(N=fo(r*e*uc(e,t),1/e),N===0&&(N=Bw),j=1-N):(j=fo(1-fo(r,t*uc(e,t)),1/t),j===0&&(j=Bw),N=1-j))}return N>.5&&(v=t,t=e,e=v,v=n,n=r,r=v,v=j,j=N,N=v,o=!o,B=1-u,V=1-s,s=B,u=V),s===0&&(o?(s=RD,N<s&&(N=s)):s=Bw,N<s&&(N=s)),i=TZt,N<1e-50&&(e<1||t<1)&&(i*=3,i/=2),c=SZt(e,t,r<n?r:n,r>=n),N=wZt(c,N,s,u,i,PZt),N===s&&(N=0),o?[1-N,N]:[N,1-N]}var kZt=EZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var AZt=kZt,CZt=AZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $w=Zt,DD=CZt;function MZt(e,t,r,n){return $w(e)||$w(t)||$w(r)?NaN:t<=0||r<=0?NaN:e<0||e>1?NaN:n?DD(t,r,1-e,e)[0]:DD(t,r,e,1-e)[0]}var xZt=MZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var LZt=xZt,YU=LZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var IZt=YU,zw=Zt;function OZt(e,t,r){return zw(e)||zw(t)||zw(r)||t<=0||r<=0||e<0||e>1?NaN:IZt(e,t,r)}var RZt=OZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function DZt(e){return t;function t(){return e}}var NZt=DZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var FZt=NZt,Y_=FZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var BZt=Y_,$Zt=YU,Vw=Zt;function zZt(e,t){if(Vw(e)||Vw(t)||e<=0||t<=0)return BZt(NaN);return r;function r(n){return Vw(n)||n<0||n>1?NaN:$Zt(n,e,t)}}var VZt=zZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var UZt=vr,qU=RZt,GZt=VZt;UZt(qU,"factory",GZt);var jZt=qU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var WZt=On;function HZt(e){return WZt(e)===e&&e>=0}var XZt=HZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var YZt=XZt,q_=YZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qZt=q_,ZZt=iA,Uw=Zt,KZt=On,JZt=Ne;function QZt(e,t,r){return Uw(e)||Uw(t)||Uw(r)||r<0||r>1||!qZt(t)||t===JZt?NaN:e<0?0:e>=t?1:(e=KZt(e+1e-7),ZZt(r,e+1,t-e,!0,!0))}var tKt=QZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eKt=q_,rKt=Y_,nKt=iA,Gw=Zt,iKt=On,oKt=Ne;function aKt(e,t){if(Gw(e)||Gw(t)||t<0||t>1||!eKt(e)||e===oKt)return rKt(NaN);return r;function r(n){return Gw(n)?NaN:n<0?0:n>=e?1:(n=iKt(n+1e-7),nKt(t,n+1,e-n,!0,!0))}}var sKt=aKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var lKt=vr,ZU=tKt,uKt=sKt;lKt(ZU,"factory",uKt);var cKt=ZU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The code is adapted from the Fortran routine from the FNLIB library of the [SLATEC Common Mathematical Library]{@link http://www.netlib.no/netlib/slatec/fnlib/}.
*
* The original code was developed by W. Fullerton of Los Alamos Scientific Laboratory, a governmental institution, and is therefore public domain.
*/var KU=[1276642195630063e-46,-3401102254316749e-45,1025680058010471e-43,-35475981581010704e-43,14292273559424982e-41,-6831888753985767e-39,39628370610464347e-38,-2868042435334643e-35,2683181998482699e-33,-3399615005417722e-31,6221098041892606e-29,-1809129475572494e-26,981082564692473e-23,-1384948176067564e-20,.16663894804518634],fKt=KU.length;function hKt(e){var t,r,n,i,o;if(e<-1.1||e>1.1)return NaN;for(n=0,i=0,t=2*e,o=0;o<fKt;o++)r=n,n=i,i=t*n-r+KU[o];return(i-r)*.5}var dKt=hKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The code is adapted from the Fortran routine from the FNLIB library of the [SLATEC Common Mathematical Library]{@link http://www.netlib.no/netlib/fn/d9lgmc.f}.
*
* The original code was developed by W. Fullerton of Los Alamos Scientific Laboratory, a governmental institution, and is therefore public domain.
*/var pKt=er,vKt=dKt,gKt=9490626562425156e-8,mKt=3745194030963158e291;function _Kt(e){return e<10?NaN:e>=mKt?0:e<gKt?vKt(2*pKt(10/e,2)-1)/e:1/(e*12)}var yKt=_Kt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The code is adapted from the Fortran routine from the FNLIB library of the [SLATEC Common Mathematical Library]{@link http://www.netlib.no/netlib/slatec/fnlib/albeta.f}.
*
* The original code was developed by W. Fullerton of Los Alamos Scientific Laboratory, a governmental institution, and is therefore public domain.
*/var bKt=zf,ND=Rn,jw=Bo,wKt=Au,SKt=zs,Sg=Se,TKt=XU,PKt=xr,FD=Ne,Wh=yKt;function EKt(e,t){var r,n,i;return n=SKt(e,t),i=wKt(e,t),n<0?NaN:n===0?FD:i===FD?PKt:n>=10?(r=Wh(n)+Wh(i)-Wh(n+i),-.5*Sg(i)+TKt+r+(n-.5)*Sg(n/(n+i))+i*ND(-n/(n+i))):i>=10?(r=Wh(i)-Wh(n+i),bKt(n)+r+n-n*Sg(n+i)+(i-.5)*ND(-n/(n+i))):Sg(jw(n)*(jw(i)/jw(n+i)))}var kKt=EKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var AKt=kKt,CKt=AKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var BD=Bs,$D=Zt,MKt=CKt,xKt=he,zD=Se,VD=xr;function BT(e,t){return $D(e)||$D(t)?NaN:!BD(e)||!BD(t)?NaN:e<0?BT(-e+t-1,t):t<0?VD:t===0?0:t===1?zD(xKt(e)):e<t?VD:e-t<2?BT(e,e-t):-zD(e+1)-MKt(e-t+1,t+1)}var LKt=BT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var IKt=LKt,JU=IKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var UD=q_,OKt=JU,Ww=Zt,RKt=Rn,DKt=Ve,NKt=Se,FKt=Ne;function BKt(e,t,r){var n;return Ww(e)||Ww(t)||Ww(r)||r<0||r>1||!UD(t)||t===FKt?NaN:UD(e)?e>t?0:r===0?e===0?1:0:r===1?e===t?1:0:(n=OKt(t,e),n+=e*NKt(r)+(t-e)*RKt(-r),DKt(n)):0}var $Kt=BKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GD=Zt;function zKt(e,t){return GD(e)||GD(t)?NaN:e===t?1:0}var VKt=zKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var UKt=Y_,jD=Zt;function GKt(e){if(jD(e))return UKt(NaN);return t;function t(r){return jD(r)?NaN:r===e?1:0}}var jKt=GKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var WKt=vr,QU=VKt,HKt=jKt;WKt(QU,"factory",HKt);var XKt=QU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var WD=q_,YKt=Y_,qKt=JU,HD=XKt.factory,Hw=Zt,ZKt=Rn,KKt=Ve,JKt=Se,QKt=Ne;function tJt(e,t){if(Hw(e)||Hw(t)||!WD(e)||e===QKt||t<0||t>1)return YKt(NaN);if(t===0||e===0)return HD(0);if(t===1)return HD(e);return r;function r(n){var i;return Hw(n)?NaN:WD(n)?n>e?0:(i=qKt(e,n),i+=n*JKt(t)+(e-n)*ZKt(-t),KKt(i)):0}}var eJt=tJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rJt=vr,tG=$Kt,nJt=eJt;rJt(tG,"factory",nJt);var iJt=tG;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oJt=Xi,$T;function aJt(e){return oJt(e)==="[object Array]"}Array.isArray?$T=Array.isArray:$T=aJt;var sJt=$T;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var lJt=sJt,eG=lJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uJt=eG;function cJt(e){return typeof e=="object"&&e!==null&&!uJt(e)}var fJt=cJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hJt=fJt,dJt=hJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pJt=/./,vJt=pJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function gJt(e){return typeof e=="boolean"}var rG=gJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mJt=Boolean.prototype.toString,_Jt=mJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yJt=_Jt;function bJt(e){try{return yJt.call(e),!0}catch{return!1}}var wJt=bJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SJt=B_,TJt=Xi,PJt=wJt,EJt=SJt();function kJt(e){return typeof e=="object"?e instanceof Boolean?!0:EJt?PJt(e):TJt(e)==="[object Boolean]":!1}var nG=kJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var AJt=rG,CJt=nG;function MJt(e){return AJt(e)||CJt(e)}var xJt=MJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iG=vr,aA=xJt,LJt=rG,IJt=nG;iG(aA,"isPrimitive",LJt);iG(aA,"isObject",IJt);var oG=aA;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function OJt(){return new Function("return this;")()}var RJt=OJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var DJt=typeof self=="object"?self:null,NJt=DJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var FJt=typeof window=="object"?window:null,BJt=FJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $Jt=typeof _S=="object"?_S:null,zJt=$Jt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var VJt=oG.isPrimitive,UJt=RJt,XD=NJt,YD=BJt,qD=zJt;function GJt(e){if(arguments.length){if(!VJt(e))throw new TypeError("invalid argument. Must provide a boolean primitive. Value: `"+e+"`.");if(e)return UJt()}if(XD)return XD;if(YD)return YD;if(qD)return qD;throw new Error("unexpected error. Unable to resolve global object.")}var jJt=GJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var WJt=jJt,HJt=WJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XJt=HJt,ZD=XJt(),YJt=ZD.document&&ZD.document.childNodes,qJt=YJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZJt=Int8Array,KJt=ZJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var JJt=vJt,QJt=qJt,tQt=KJt;function eQt(){return typeof JJt=="function"||typeof tQt=="object"||typeof QJt=="function"}var rQt=eQt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function nQt(){return/^\s*function\s*([^(]*)/i}var aG=nQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iQt=aG,oQt=iQt(),aQt=oQt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sQt=vr,sG=aG,lQt=aQt;sQt(sG,"REGEXP",lQt);var uQt=sG;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cQt=eG;function fQt(e){if(typeof e!="function")throw new TypeError("invalid argument. Must provide a function. Value: `"+e+"`.");return t;function t(r){var n,i;if(!cQt(r)||(n=r.length,n===0))return!1;for(i=0;i<n;i++)if(e(r[i])===!1)return!1;return!0}}var hQt=fQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dQt=hQt,pQt=dQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function vQt(e){return e!==null&&typeof e=="object"}var gQt=vQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mQt=vr,_Qt=pQt,sA=gQt,yQt=_Qt(sA);mQt(sA,"isObjectLikeArray",yQt);var bQt=sA;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wQt=bQt;function SQt(e){return wQt(e)&&(e._isBuffer||e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e))}var TQt=SQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PQt=TQt,EQt=PQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kQt=Xi,AQt=uQt.REGEXP,CQt=EQt;function MQt(e){var t,r,n;if(r=kQt(e).slice(8,-1),(r==="Object"||r==="Error")&&e.constructor){if(n=e.constructor,typeof n.name=="string")return n.name;if(t=AQt.exec(n.toString()),t)return t[1]}return CQt(e)?"Buffer":r}var xQt=MQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var LQt=xQt,lG=LQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var IQt=lG;function OQt(e){var t;return e===null?"null":(t=typeof e,t==="object"?IQt(e).toLowerCase():t)}var RQt=OQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var DQt=lG;function NQt(e){return DQt(e).toLowerCase()}var FQt=NQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var BQt=rQt,$Qt=RQt,zQt=FQt,VQt=BQt()?zQt:$Qt,UQt=VQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GQt=UQt;function jQt(e){return GQt(e)==="function"}var WQt=jQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var HQt=WQt,uG=HQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XQt=Object.getPrototypeOf,YQt=XQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qQt(e){return e.__proto__}var ZQt=qQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var KQt=Xi,JQt=ZQt;function QQt(e){var t=JQt(e);return t||t===null?t:KQt(e.constructor)==="[object Function]"?e.constructor.prototype:e instanceof Object?Object.prototype:null}var tte=QQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ete=uG,rte=YQt,nte=tte,zT;ete(Object.getPrototypeOf)?zT=rte:zT=nte;var ite=zT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ote=ite;function ate(e){return e==null?null:(e=Object(e),ote(e))}var ste=ate;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var lte=ste,ute=lte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cte=dJt,KD=uG,fte=ute,fm=$_,hte=Xi,dte=Object.prototype;function pte(e){var t;for(t in e)if(!fm(e,t))return!1;return!0}function vte(e){var t;return cte(e)?(t=fte(e),t?!fm(e,"constructor")&&fm(t,"constructor")&&KD(t.constructor)&&hte(t.constructor)==="[object Function]"&&fm(t,"isPrototypeOf")&&KD(t.isPrototypeOf)&&(t===dte||pte(e)):!0):!1}var gte=vte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mte=gte,cG=mte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _te(e){return typeof e=="string"}var fG=_te;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yte=String.prototype.valueOf,bte=yte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wte=bte;function Ste(e){try{return wte.call(e),!0}catch{return!1}}var Tte=Ste;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Pte=B_,Ete=Xi,kte=Tte,Ate=Pte();function Cte(e){return typeof e=="object"?e instanceof String?!0:Ate?kte(e):Ete(e)==="[object String]":!1}var hG=Cte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Mte=fG,xte=hG;function Lte(e){return Mte(e)||xte(e)}var Ite=Lte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dG=vr,lA=Ite,Ote=fG,Rte=hG;dG(lA,"isPrimitive",Ote);dG(lA,"isObject",Rte);var Dte=lA;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Nte=Lf.isPrimitive,Fte=Zt;function Bte(e){return Nte(e)&&Fte(e)}var pG=Bte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $te=Lf.isObject,zte=Zt;function Vte(e){return $te(e)&&zte(e.valueOf())}var vG=Vte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ute=pG,Gte=vG;function jte(e){return Ute(e)||Gte(e)}var Wte=jte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gG=vr,uA=Wte,Hte=pG,Xte=vG;gG(uA,"isPrimitive",Hte);gG(uA,"isObject",Xte);var Yte=uA;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var JD=Lf.isPrimitive,qte=cG,Zte=Dte.isPrimitive,QD=Yte,Xw=$_;function Kte(e,t){return qte(t)?Xw(t,"alpha")&&(e.alpha=t.alpha,!JD(e.alpha)||QD(e.alpha))?new TypeError("invalid option. `alpha` option must be a number primitive. Option: `"+e.alpha+"`."):Xw(t,"alternative")&&(e.alternative=t.alternative,!Zte(e.alternative))?new TypeError("invalid option. `alternative` option must be a string primitive. Option: `"+e.alternative+"`."):Xw(t,"p")&&(e.p=t.p,!JD(e.p)||QD(e.p))?new TypeError("invalid option. `p` option must be a number primitive. Option: `"+e.p+"`."):null:new TypeError("invalid argument. Options argument must be an object. Value: `"+t+"`.")}var Jte=Kte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Qte=z_.isPrimitive;function tee(e){return Qte(e)&&e>0}var mG=tee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eee=z_.isObject;function ree(e){return eee(e)&&e.valueOf()>0}var _G=ree;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nee=mG,iee=_G;function oee(e){return nee(e)||iee(e)}var aee=oee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yG=vr,cA=aee,see=mG,lee=_G;yG(cA,"isPrimitive",see);yG(cA,"isObject",lee);var uee=cA;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cee=9007199254740991,fee=cee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hee=308,dee=hee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pee=-308,vee=pee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gee=-324,mee=gee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var t8=Zt,Tg=Nf,e8=er,_ee=he,r8=G_,yee=fee,n8=dee,bee=vee,wee=mee,See=yee+1,i8=1e308;function Tee(e,t){var r,n;return t8(e)||t8(t)||Tg(t)?NaN:Tg(e)||e===0||t<wee||_ee(e)>See&&t<=0?e:t>n8?0*e:t<bee?(r=e8(10,-(t+n8)),n=e*i8*r,Tg(n)?e:r8(n)/i8/r):(r=e8(10,-t),n=e*r,Tg(n)?e:r8(n)/r)}var Pee=Tee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Eee=Pee,kee=Eee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Aee=uee,Cee=cG,Mee=oG.isPrimitive,o8=$_,Pg=kee;function xee(e){var t,r,n;if(r=4,t=!0,arguments.length>0){if(!Cee(e))throw new TypeError("invalid argument. First argument must be an options object. Value: `"+e+"`.");if(o8(e,"digits")){if(!Aee(e.digits))throw new TypeError("invalid option. `digits` option must be a positive integer. Option: `"+e.digits+"`.");r=e.digits}if(o8(e,"decision")){if(!Mee(e.decision))throw new TypeError("invalid option. `decision` option must be a boolean primitive. Option: `"+e.decision+"`.");t=e.decision}}switch(n="",n+=this.method,n+=`

`,n+="Alternative hypothesis: ",n+="True correlation coefficient is ",this.alternative){case"less":n+="less than ";break;case"greater":n+="greater than ";break;case"two-sided":default:n+="not equal to ";break}return n+=this.nullValue,n+=`

`,n+="    pValue: "+Pg(this.pValue,-r)+`
`,n+="    statistic: "+Pg(this.statistic,-r)+`
`,n+="    "+(1-this.alpha)*100+"% confidence interval: ["+Pg(this.ci[0],-r)+","+Pg(this.ci[1],-r)+"]",n+=`

`,t&&(n+="Test Decision: ",this.rejected?n+="Reject null in favor of alternative at "+this.alpha*100+"% significance level":n+="Fail to reject null in favor of alternative at "+this.alpha*100+"% significance level",n+=`
`),n}var Lee=xee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Qo=h5t,Iee=Lxt,a8=sLt,bG=jZt,Oee=On,Ree=sU,cc=cKt,Yw=iJt,s8=Jte,Dee=Lee,l8=1+1e-7;function u8(e,t,r){return e===0?0:bG(r,e,t-e+1)}function c8(e,t,r){return e===t?1:bG(1-r,e+1,t-e)}function Nee(){var e,t,r,n,i,o,a,s,l,u,c,f,h,d,p;if(t={},Iee(arguments[0])){if(h=arguments[0],h.length!==2)throw new Error("invalid argument. If provided an array, it must have two elements. Value: `"+h+"`.");c=h[1]+h[0],h=h[0],arguments[1]&&(a=s8(t,arguments[1]))}else{if(h=arguments[0],c=arguments[1],!a8(h))throw new TypeError("invalid argument. Must provide a nonnegative integer or a two-element array. Value: `"+h+"`.");if(!a8(c))throw new TypeError("invalid argument. Must provide a nonnegative integer. Value: `"+c+"`.");if(h>c)throw new TypeError("invalid arguments. `x` cannot be larger than `n`. `x:"+h+", n:"+c+"`.");arguments[2]&&(a=s8(t,arguments[2]))}if(a)throw a;if(t.alpha===void 0?e=.05:e=t.alpha,e<0||e>1)throw new RangeError("invalid argument. Option `alpha` must be a number in the range 0 to 1. Value: `"+e+"`.");if(t.p===void 0?f=.5:f=t.p,f<0||f>1)throw new RangeError("invalid argument. Option `p` must be a probability. Value: `"+f+"`.");switch(o=t.alternative||"two-sided",i=h/c,o){case"less":n=cc(h,c,f),r=[0,c8(h,c,e)];break;case"greater":n=1-cc(h-1,c,f),r=[u8(h,c,e),1];break;case"two-sided":if(l=Yw(h,c,f),u=c*f,h===u)n=1;else if(h<u){for(d=0,p=Ree(u);p<=c;p++)Yw(p,c,f)<=l*l8&&(d+=1);n=cc(h,c,f)+(1-cc(c-d,c,f))}else{for(d=0,p=0;p<=Oee(u);p++)Yw(p,c,f)<=l*l8&&(d+=1);n=cc(d-1,c,f)+(1-cc(h-1,c,f))}r=[u8(h,c,e/2),c8(h,c,e/2)];break;default:throw new Error("Invalid option. `alternative` must be either `two-sided`, `less` or `greater`. Value: `"+o+"`")}return s={},Qo(s,"rejected",n<=e),Qo(s,"alpha",e),Qo(s,"pValue",n),Qo(s,"statistic",i),Qo(s,"ci",r),Qo(s,"nullValue",f),Qo(s,"alternative",o),Qo(s,"method","Exact binomial test"),Qo(s,"print",Dee),s}var Fee=Nee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Bee=Fee,fA=Bee;const $ee=Array.prototype.concat,wG=Object.prototype.toString;function SG(e,t){var r=e>t?e:t;return Math.pow(10,17-~~(Math.log(r>0?r:-r)*Math.LOG10E))}const Oo=Array.isArray||function(t){return wG.call(t)==="[object Array]"};function k0(e){return wG.call(e)==="[object Function]"}function kr(e){return typeof e=="number"?e-e===0:!1}function zee(e){return $ee.apply([],e)}const TG={calcRdx:SG,isArray:Oo,isFunction:k0,isNumber:kr,toVector:zee};let ai=Math.random;function PG(e){if(typeof e!="function")throw new TypeError("fn is not a function");ai=e}function Z_(e){return e.length||1}function EG(e){return e[0].length||1}function Vee(e){return{rows:Z_(e),cols:EG(e)}}function hA(e,t){return Oo(t)?t.map(r=>hA(e,r)):e[t]}function kG(e,t){return hA(e,t)}function w1(e,t){if(Oo(t)){const n=Ie(e.length).map(()=>new Array(t.length));return t.forEach(function(i,o){Ie(e.length).forEach(function(a){n[a][o]=e[a][i]})}),n}const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=[e[n][t]];return r}function AG(e,t){return w1(e,t).map(r=>r[0])}function Uee(e){const t=Z_(e),r=new Array(t);for(let n=0;n<t;n++)r[n]=[e[n][n]];return r}function Gee(e){for(var t=Z_(e)-1,r=new Array(t),n=0;t>=0;t--,n++)r[n]=[e[n][t]];return r}function Es(e){var t=[],r,n,i,o,a;for(Oo(e[0])||(e=[e]),n=e.length,i=e[0].length,a=0;a<i;a++){for(r=new Array(n),o=0;o<n;o++)r[o]=e[o][a];t.push(r)}return t.length===1?t[0]:t}function an(e,t,r){var n,i,o,a,s;for(Oo(e[0])||(e=[e]),i=e.length,o=e[0].length,a=r?e:new Array(i),n=0;n<i;n++)for(a[n]||(a[n]=new Array(o)),s=0;s<o;s++)a[n][s]=t(e[n][s],n,s);return a.length===1?a[0]:a}function K_(e,t,r){var n,i,o,a,s;for(Oo(e[0])||(e=[e]),i=e.length,o=e[0].length,a=r?e:new Array(i),n=0;n<i;n++)for(a[n]||(a[n]=new Array(o)),o>0&&(a[n][0]=e[n][0]),s=1;s<o;s++)a[n][s]=t(a[n][s-1],e[n][s]);return a.length===1?a[0]:a}function dA(e,t){return an(e,t,!0)}function Uf(e,t,r){var n=new Array(e),i,o;for(k0(t)&&(r=t,t=e),i=0;i<e;i++)for(n[i]=new Array(t),o=0;o<t;o++)n[i][o]=r(i,o);return n}function CG(){return 0}function jee(){return 1}function Wee(e,t){return e===t?1:0}function $o(e,t){return kr(t)||(t=e),Uf(e,t,CG)}function Hee(e,t){return kr(t)||(t=e),Uf(e,t,jee)}function Xee(e,t){return kr(t)||(t=e),Uf(e,t,ai)}function lu(e,t){return kr(t)||(t=e),Uf(e,t,Wee)}function Yee(e){var t=e.length,r,n;if(e.length!==e[0].length)return!1;for(r=0;r<t;r++)for(n=0;n<t;n++)if(e[n][r]!==e[r][n])return!1;return!0}function qee(e){return dA(e,CG)}function MG(e,t,r,n){k0(n)||(n=!1);var i=[],o=SG(e,t),a=(t*o-e*o)/((r-1)*o),s=e,l;for(l=0;s<=t&&l<r;l++,s=(e*o+a*o*l)/o)i.push(n?n(s,l):s);return i}function Ie(e,t,r){var n=[],i;if(r=r||1,t===void 0&&(t=e,e=0),e===t||r===0)return[];if(e<t&&r<0)return[];if(e>t&&r>0)return[];if(r>0)for(i=e;i<t;i+=r)n.push(i);else for(i=e;i>t;i+=r)n.push(i);return n}function ra(e,t){function r(l,u,c,f){var h,d=[],p=l.length;if(u===void 0&&c===void 0&&f===void 0)return J_(l);if(u=u||0,c=c||l.length,u=u>=0?u:p+u,c=c>=0?c:p+c,f=f||1,u===c||f===0)return[];if(u<c&&f<0)return[];if(u>c&&f>0)return[];if(f>0)for(h=u;h<c;h+=f)d.push(l[h]);else for(h=u;h>c;h+=f)d.push(l[h]);return d}var n,i;if(t=t||{},kr(t.row)){if(kr(t.col))return e[t.row][t.col];var o=kG(e,t.row);return n=t.col||{},r(o,n.start,n.end,n.step)}if(kr(t.col)){var a=AG(e,t.col);return i=t.row||{},r(a,i.start,i.end,i.step)}i=t.row||{},n=t.col||{};var s=r(e,i.start,i.end,i.step);return s.map(function(l){return r(l,n.start,n.end,n.step)})}function od(e,t,r){var n,i;if(kr(t.row)){if(kr(t.col))return e[t.row][t.col]=r;t.col=t.col||{},t.col.start=t.col.start||0,t.col.end=t.col.end||e[0].length,t.col.step=t.col.step||1,n=Ie(t.col.start,Math.min(e.length,t.col.end),t.col.step);var o=t.row;return n.forEach(function(s,l){e[o][s]=r[l]}),e}if(kr(t.col)){t.row=t.row||{},t.row.start=t.row.start||0,t.row.end=t.row.end||e.length,t.row.step=t.row.step||1,i=Ie(t.row.start,Math.min(e[0].length,t.row.end),t.row.step);var a=t.col;return i.forEach(function(s,l){e[s][a]=r[l]}),e}return r[0].length===void 0&&(r=[r]),t.row.start=t.row.start||0,t.row.end=t.row.end||e.length,t.row.step=t.row.step||1,t.col.start=t.col.start||0,t.col.end=t.col.end||e[0].length,t.col.step=t.col.step||1,i=Ie(t.row.start,Math.min(e.length,t.row.end),t.row.step),n=Ie(t.col.start,Math.min(e[0].length,t.col.end),t.col.step),i.forEach(function(s,l){n.forEach(function(u,c){e[s][u]=r[l][c]})}),e}function Zee(e){var t=$o(e.length,e.length);return e.forEach(function(r,n){t[n][n]=r}),t}function J_(e){return e.map(function(t){return kr(t)?t:t.map(function(r){return r})})}const Kee=Object.freeze(Object.defineProperty({__proto__:null,utils:TG,get random_fn(){return ai},setRandom:PG,rows:Z_,cols:EG,dimensions:Vee,row:hA,rowa:kG,col:w1,cola:AG,diag:Uee,antidiag:Gee,transpose:Es,map:an,cumreduce:K_,alter:dA,create:Uf,zeros:$o,ones:Hee,rand:Xee,identity:lu,symmetric:Yee,clear:qee,seq:MG,arange:Ie,slice:ra,sliceAssign:od,diagonal:Zee,copy:J_},Symbol.toStringTag,{value:"Module"}));function Gf(e,t){return e-t}function f8(e,t,r){return Math.max(t,Math.min(e,r))}function sn(e){for(var t=0,r=e.length;--r>=0;)t+=e[r];return t}function Jee(e){for(var t=0,r=e.length;--r>=0;)t+=e[r]*e[r];return t}function Q_(e){for(var t=sr(e),r=0,n=e.length,i;--n>=0;)i=e[n]-t,r+=i*i;return r}function Qee(e){for(var t=0,r=e.length;--r>=0;)t+=e[r];return t}function xG(e){for(var t=1,r=e.length;--r>=0;)t*=e[r];return t}function pA(e){for(var t=e[0],r=0;++r<e.length;)e[r]<t&&(t=e[r]);return t}function vA(e){for(var t=e[0],r=0;++r<e.length;)e[r]>t&&(t=e[r]);return t}function tre(e){for(var t={},r=[],n=0;n<e.length;n++)t[e[n]]||(t[e[n]]=!0,r.push(e[n]));return r}function sr(e){return sn(e)/e.length}function ere(e){return Q_(e)/e.length}function rre(e){return Math.pow(xG(e),1/e.length)}function VT(e){var t=e.length,r=e.slice().sort(Gf);return t&1?r[t/2|0]:(r[t/2-1]+r[t/2])/2}function nre(e){return K_(e,function(t,r){return t+r})}function ire(e){return K_(e,function(t,r){return t*r})}function ore(e){var t=[],r=e.length,n;for(n=1;n<r;n++)t.push(e[n]-e[n-1]);return t}function UT(e){var t,r=[],n={};for(t=0;t<e.length;t++){var i=e[t];n[i]?n[i]++:(n[i]=1,r.push(i))}var o=r.sort(Gf),a={},s=1;for(t=0;t<o.length;t++){var i=o[t],l=n[i],u=s,c=s+l-1,f=(u+c)/2;a[i]=f,s+=l}return e.map(function(h){return a[h]})}function are(e){var t=e.length,r=e.slice().sort(Gf),n=1,i=0,o=0,a=[],s;for(s=0;s<t;s++)r[s]===r[s+1]?n++:(n>i?(a=[r[s]],i=n,o=0):n===i&&(a.push(r[s]),o++),n=1);return o===0?a[0]:a}function sre(e){return vA(e)-pA(e)}function LG(e,t){return Q_(e)/(e.length-(t?1:0))}function IG(e){var t=e.reduce(function(n,i){return n+Q_(i)},0),r=e.reduce(function(n,i){return n+i.length},0);return t/(r-e.length)}function lre(e){for(var t=sr(e),r=e.length,n=new Array(r),i=0;i<r;i++)n[i]=e[i]-t;return n}function Pa(e,t){return Math.sqrt(LG(e,t))}function OG(e){return Math.sqrt(IG(e))}function ure(e){for(var t=sr(e),r=[],n=e.length-1;n>=0;n--)r.push(Math.abs(e[n]-t));return sr(r)}function cre(e){for(var t=VT(e),r=[],n=e.length-1;n>=0;n--)r.push(Math.abs(e[n]-t));return VT(r)}function fre(e){return Pa(e)/sr(e)}function hre(e){var t=e.length,r=e.slice().sort(Gf);return[r[Math.round(t/4)-1],r[Math.round(t/2)-1],r[Math.round(t*3/4)-1]]}function dre(e,t,r,n){var i=e.slice().sort(Gf),o=[t.length],a=e.length,s,l,u,c,f,h;for(typeof r>"u"&&(r=3/8),typeof n>"u"&&(n=3/8),s=0;s<t.length;s++)l=t[s],u=r+l*(1-r-n),c=a*l+u,f=Math.floor(f8(c,1,a-1)),h=f8(c-f,0,1),o[s]=(1-h)*i[f-1]+h*i[f];return o}function pre(e,t,r){var n=e.slice().sort(Gf),i=t*(n.length+(r?1:-1))+(r?0:1),o=parseInt(i),a=i-o;return o+1<n.length?n[o-1]+a*(n[o]-n[o-1]):n[o-1]}function vre(e,t,r){var n=0,i=e.length,o=!1,a,s;for(r==="strict"&&(o=!0),s=0;s<i;s++)a=e[s],(o&&a<t||!o&&a<=t)&&n++;return n/i}function gre(e,t){t=t||4;var r=pA(e),n=(vA(e)-r)/t,i=e.length,o=[],a;for(a=0;a<t;a++)o[a]=0;for(a=0;a<i;a++)o[Math.min(Math.floor((e[a]-r)/n),t-1)]+=1;return o}function RG(e,t){var r=sr(e),n=sr(t),i=e.length,o=new Array(i),a;for(a=0;a<i;a++)o[a]=(e[a]-r)*(t[a]-n);return sn(o)/(i-1)}function DG(e,t){return RG(e,t)/Pa(e,1)/Pa(t,1)}function mre(e,t){return e=UT(e),t=UT(t),DG(e,t)}function gA(e,t){for(var r=sr(e),n=Pa(e),i=e.length,o=0,a=0;a<i;a++)o+=Math.pow((e[a]-r)/n,t);return o/e.length}function _re(e){return gA(e,3)}function yre(e){return gA(e,4)-3}const bre=Object.freeze(Object.defineProperty({__proto__:null,sum:sn,sumsqrd:Jee,sumsqerr:Q_,sumrow:Qee,product:xG,min:pA,max:vA,unique:tre,mean:sr,meansqerr:ere,geomean:rre,median:VT,cumsum:nre,cumprod:ire,diff:ore,rank:UT,mode:are,range:sre,variance:LG,pooledvariance:IG,deviation:lre,stdev:Pa,pooledstdev:OG,meandev:ure,meddev:cre,coeffvar:fre,quartiles:hre,quantiles:dre,percentile:pre,percentileOfScore:vre,histogram:gre,covariance:RG,corrcoeff:DG,spearmancoeff:mre,stanMoment:gA,skewness:_re,kurtosis:yre},Symbol.toStringTag,{value:"Module"}));function wre(e,t,r){return e<t||e>r?0:1/(r-t)}function Sre(e,t,r){return e<t?0:e<r?(e-t)/(r-t):1}function Tre(e,t,r){return t+e*(r-t)}function Pre(e,t){return .5*(e+t)}function Ere(e,t){return sr(e)}function kre(){throw new Error("mode is not yet implemented")}function NG(e,t){return e/2+t/2+(t/2-e/2)*(2*ai()-1)}function Are(e,t){return Math.pow(t-e,2)/12}const Cre=Object.freeze(Object.defineProperty({__proto__:null,pdf:wre,cdf:Sre,inv:Tre,mean:Pre,median:Ere,mode:kre,sample:NG,variance:Are},Symbol.toStringTag,{value:"Module"}));function Mre(e,t,r){return r<=t?NaN:e<=t||e>=r?0:2/Math.PI*Math.pow(Math.pow(r-t,2)-Math.pow(2*e-t-r,2),-.5)}function xre(e,t,r){return e<t?0:e<r?2/Math.PI*Math.asin(Math.sqrt((e-t)/(r-t))):1}function Lre(e,t,r){return t+(.5-.5*Math.cos(Math.PI*e))*(r-t)}function Ire(e,t){return t<=e?NaN:(e+t)/2}function Ore(e,t){return t<=e?NaN:(e+t)/2}function Rre(){throw new Error("mode is not yet implemented")}function Dre(e,t){return(e+t)/2+(t-e)/2*Math.sin(2*Math.PI*NG(0,1))}function Nre(e,t){return t<=e?NaN:Math.pow(t-e,2)/8}const Fre=Object.freeze(Object.defineProperty({__proto__:null,pdf:Mre,cdf:xre,inv:Lre,mean:Ire,median:Ore,mode:Rre,sample:Dre,variance:Nre},Symbol.toStringTag,{value:"Module"}));function Ge(e){var t=0,r=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],n=1.000000000190015,i,o,a;for(a=(o=i=e)+5.5,a-=(i+.5)*Math.log(a);t<6;t++)n+=r[t]/++o;return Math.log(2.5066282746310007*n/i)-a}function FG(e){var t,r,n,i,o,a,s,l=[.08333333333333333,-.002777777777777778,.0007936507936507937,-.0005952380952380952,.0008417508417508418,-.001917526917526918,.00641025641025641,-.02955065359477124,.1796443723688307,-1.3924322169059];if(t=e,s=0,e==1||e==2)return 0;for(e<=7&&(s=Math.floor(7-e),t=e+s),r=1/(t*t),n=2*Math.PI,o=l[9],a=8;a>=0;a--)o*=r,o+=l[a];if(i=o/t+.5*Math.log(n)+(t-.5)*Math.log(t)-t,e<=7)for(a=1;a<=s;a++)i-=Math.log(t-1),t-=1;return i}function Ri(e){var t=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],r=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],n=!1,i=0,o=0,a=0,s=e,l,u,c,f;if(e>171.6243769536076)return 1/0;if(s<=0)if(f=s%1+36e-17,f)n=(s&1?-1:1)*Math.PI/Math.sin(Math.PI*f),s=1-s;else return 1/0;for(c=s,s<1?u=s++:u=(s-=i=(s|0)-1)-1,l=0;l<8;++l)a=(a+t[l])*u,o=o*u+r[l];if(f=a/o+1,c<s)f/=c;else if(c>s)for(l=0;l<i;++l)f*=s,s++;return n&&(f=n/f),f}function Bre(e,t){return jf(e,t)*Ri(e)}function jf(e,t){var r=Ge(e),n=e,i=1/e,o=i,a=t+1-e,s=1/1e-30,l=1/a,u=l,c=1,f=-~(Math.log(e>=1?e:1/e)*8.5+e*.4+17),h;if(t<0||e<=0)return NaN;if(t<e+1){for(;c<=f;c++)i+=o*=t/++n;return i*Math.exp(-t+e*Math.log(t)-r)}for(;c<=f;c++)h=-c*(c-e),a+=2,l=h*l+a,s=a+h/s,l=1/l,u*=l*s;return 1-u*Math.exp(-t+e*Math.log(t)-r)}function hm(e){return e<0?NaN:Ge(e+1)}function Xl(e){return e<0?NaN:Ri(e+1)}function mA(e,t){return e>170||t>170?Math.exp(BG(e,t)):Xl(e)/Xl(t)/Xl(e-t)}function BG(e,t){return hm(e)-hm(t)-hm(e-t)}function $re(e,t){return Xl(e)/Xl(e-t)}function ty(e,t){if(!(e<=0||t<=0))return e+t>170?Math.exp(_A(e,t)):Ri(e)*Ri(t)/Ri(e+t)}function _A(e,t){return Ge(e)+Ge(t)-Ge(e+t)}function GT(e,t,r){var n=1e-30,i=1,o=t+r,a=t+1,s=t-1,l=1,u=1-o*e/a,c,f,h,d;for(Math.abs(u)<n&&(u=n),u=1/u,d=u;i<=100&&(c=2*i,f=i*(r-i)*e/((s+c)*(t+c)),u=1+f*u,Math.abs(u)<n&&(u=n),l=1+f/l,Math.abs(l)<n&&(l=n),u=1/u,d*=u*l,f=-(t+i)*(o+i)*e/((t+c)*(a+c)),u=1+f*u,Math.abs(u)<n&&(u=n),l=1+f/l,Math.abs(l)<n&&(l=n),u=1/u,h=u*l,d*=h,!(Math.abs(h-1)<3e-7));i++);return d}function ey(e,t){var r=0,n=t-1,i=1e-8,o=Ge(t),a,s,l,u,c,f,h;if(e>=1)return Math.max(100,t+100*Math.sqrt(t));if(e<=0)return 0;for(t>1?(f=Math.log(n),h=Math.exp(n*(f-1)-o),c=e<.5?e:1-e,l=Math.sqrt(-2*Math.log(c)),a=(2.30753+l*.27061)/(1+l*(.99229+l*.04481))-l,e<.5&&(a=-a),a=Math.max(.001,t*Math.pow(1-1/(9*t)-a/(3*Math.sqrt(t)),3))):(l=1-t*(.253+t*.12),e<l?a=Math.pow(e/l,1/t):a=1-Math.log(1-(e-l)/(1-l)));r<12;r++){if(a<=0)return 0;if(s=jf(t,a)-e,t>1?l=h*Math.exp(-(a-n)+n*(Math.log(a)-f)):l=Math.exp(-a+n*Math.log(a)-o),u=s/l,a-=l=u/(1-.5*Math.min(1,u*((t-1)/a-1))),a<=0&&(a=.5*(a+l)),Math.abs(l)<i*a)break}return a}function ry(e){var t=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,15626441722e-18,-85238095915e-18,6529054439e-18,5059343495e-18,-991364156e-18,-227365122e-18,96467911e-18,2394038e-18,-6886027e-18,894487e-18,313092e-18,-112708e-18,381e-18,7106e-18,-1523e-18,-94e-18,121e-18,-28e-18],r=t.length-1,n=!1,i=0,o=0,a,s,l,u;for(e<0&&(e=-e,n=!0),a=2/(2+e),s=4*a-2;r>0;r--)l=i,i=s*i-o+t[r],o=l;return u=a*Math.exp(-e*e+.5*(t[0]+s*i)-o),n?u-1:1-u}function $G(e){return 1-ry(e)}function yA(e){var t=0,r,n,i,o;if(e>=2)return-100;if(e<=0)return 100;for(o=e<1?e:2-e,i=Math.sqrt(-2*Math.log(o/2)),r=-.70711*((2.30753+i*.27061)/(1+i*(.99229+i*.04481))-i);t<2;t++)n=$G(r)-o,r+=n/(1.1283791670955126*Math.exp(-r*r)-r*n);return e<1?r:-r}function op(e,t,r){var n=1e-8,i=t-1,o=r-1,a=0,s,l,u,c,f,h,d,p,v,g,m;if(e<=0)return 0;if(e>=1)return 1;for(t>=1&&r>=1?(u=e<.5?e:1-e,c=Math.sqrt(-2*Math.log(u)),d=(2.30753+c*.27061)/(1+c*(.99229+c*.04481))-c,e<.5&&(d=-d),p=(d*d-3)/6,v=2/(1/(2*t-1)+1/(2*r-1)),g=d*Math.sqrt(p+v)/v-(1/(2*r-1)-1/(2*t-1))*(p+5/6-2/(3*v)),d=t/(t+r*Math.exp(2*g))):(s=Math.log(t/(t+r)),l=Math.log(r/(t+r)),c=Math.exp(t*s)/t,f=Math.exp(r*l)/r,g=c+f,e<c/g?d=Math.pow(t*g*e,1/t):d=1-Math.pow(r*g*(1-e),1/r)),m=-Ge(t)-Ge(r)+Ge(t+r);a<10;a++){if(d===0||d===1)return d;if(h=ap(d,t,r)-e,c=Math.exp(i*Math.log(d)+o*Math.log(1-d)+m),f=h/c,d-=c=f/(1-.5*Math.min(1,f*(i/d-o/(1-d)))),d<=0&&(d=.5*(d+c)),d>=1&&(d=.5*(d+c+1)),Math.abs(c)<n*d&&a>0)break}return d}function ap(e,t,r){var n=e===0||e===1?0:Math.exp(Ge(t+r)-Ge(t)-Ge(r)+t*Math.log(e)+r*Math.log(1-e));return e<0||e>1?!1:e<(t+1)/(t+r+2)?n*GT(e,t,r)/t:1-n*GT(1-e,r,t)/r}function Mu(e,t){var r,n,i,o,a;if(t||(t=e),e)return Uf(e,t,function(){return Mu()});do r=ai(),n=1.7156*(ai()-.5),i=r-.449871,o=Math.abs(n)+.386595,a=i*i+o*(.196*o-.25472*i);while(a>.27597&&(a>.27846||n*n>-4*Math.log(r)*r*r));return n/r}function Ro(e,t,r){var n=e,i,o,a,s,l,u;if(r||(r=t),e||(e=1),t)return u=$o(t,r),u.alter(function(){return Ro(e)}),u;e<1&&(e+=1),i=e-1/3,o=1/Math.sqrt(9*i);do{do l=Mu(),s=1+o*l;while(s<=0);s=s*s*s,a=ai()}while(a>1-.331*Math.pow(l,4)&&Math.log(a)>.5*l*l+i*(1-s+Math.log(s)));if(e==n)return i*s;do a=ai();while(a===0);return Math.pow(a,1/n)*i*s}const zre=Object.freeze(Object.defineProperty({__proto__:null,gammaln:Ge,loggam:FG,gammafn:Ri,gammap:Bre,lowRegGamma:jf,factorialln:hm,factorial:Xl,combination:mA,combinationln:BG,permutation:$re,betafn:ty,betaln:_A,betacf:GT,gammapinv:ey,erf:ry,erfc:$G,erfcinv:yA,ibetainv:op,ibeta:ap,randn:Mu,randg:Ro},Symbol.toStringTag,{value:"Module"}));function Vre(e,t,r){return e>1||e<0?0:t==1&&r==1?1:t<512&&r<512?Math.pow(e,t-1)*Math.pow(1-e,r-1)/ty(t,r):Math.exp((t-1)*Math.log(e)+(r-1)*Math.log(1-e)-_A(t,r))}function S1(e,t,r){return e>1||e<0?(e>1)*1:ap(e,t,r)}function Ure(e,t,r){return op(e,t,r)}function Gre(e,t){return e/(e+t)}function jre(e,t){return op(.5,e,t)}function Wre(e,t){return(e-1)/(e+t-2)}function Hre(e,t){var r=Ro(e);return r/(r+Ro(t))}function Xre(e,t){return e*t/(Math.pow(e+t,2)*(e+t+1))}const Yre=Object.freeze(Object.defineProperty({__proto__:null,pdf:Vre,cdf:S1,inv:Ure,mean:Gre,median:jre,mode:Wre,sample:Hre,variance:Xre},Symbol.toStringTag,{value:"Module"}));function h8(e,t,r,n){for(var i=0,o=1,a=1,s=1,l=0,u=0,c;Math.abs((a-u)/a)>n;)u=a,c=-(t+l)*(t+r+l)*e/(t+2*l)/(t+2*l+1),i=a+c*i,o=s+c*o,l=l+1,c=l*(r-l)*e/(t+2*l-1)/(t+2*l),a=i+c*a,s=o+c*s,i=i/s,o=o/s,a=a/s,s=1;return a/t}function zG(e,t,r){return r===0||r===1?t*r===e?1:0:mA(t,e)*Math.pow(r,e)*Math.pow(1-r,t-e)}function qre(e,t,r){var n,i=1e-10;if(e<0)return 0;if(e>=t)return 1;if(r<0||r>1||t<=0)return NaN;e=Math.floor(e);var o=r,a=e+1,s=t-e,l=a+s,u=Math.exp(Ge(l)-Ge(s)-Ge(a)+a*Math.log(o)+s*Math.log(1-o));return o<(a+1)/(l+2)?n=u*h8(o,a,s,i):n=1-u*h8(1-o,s,a,i),Math.round((1-n)*(1/i))/(1/i)}const Zre=Object.freeze(Object.defineProperty({__proto__:null,pdf:zG,cdf:qre},Symbol.toStringTag,{value:"Module"}));function Kre(e,t,r){return r<0?0:r/(Math.pow(e-t,2)+Math.pow(r,2))/Math.PI}function Jre(e,t,r){return Math.atan((e-t)/r)/Math.PI+.5}function Qre(e,t,r){return t+r*Math.tan(Math.PI*(e-.5))}function tne(e){return e}function ene(e){return e}function rne(e,t){return Mu()*Math.sqrt(1/(2*randg(.5)))*t+e}const nne=Object.freeze(Object.defineProperty({__proto__:null,pdf:Kre,cdf:Jre,inv:Qre,median:tne,mode:ene,sample:rne},Symbol.toStringTag,{value:"Module"}));function ine(e,t,r){var n,i,o;return e<0?0:t<=2?e===0&&t<2?1/0:e===0&&t===2?1:1/ty(t/2,r/2)*Math.pow(t/r,t/2)*Math.pow(e,t/2-1)*Math.pow(1+t/r*e,-(t+r)/2):(n=t*e/(r+e*t),i=r/(r+e*t),o=t*i/2,o*zG((t-2)/2,(t+r-2)/2,n))}function T1(e,t,r){return e<0?0:ap(t*e/(t*e+r),t/2,r/2)}function one(e,t,r){return r/(t*(1/op(e,t/2,r/2)-1))}function ane(e,t){return t>2?t/(t-2):void 0}function sne(e,t){return e>2?t*(e-2)/(e*(t+2)):void 0}function lne(e,t){var r=Ro(e/2)*2,n=Ro(t/2)*2;return r/e/(n/t)}function une(e,t){if(!(t<=4))return 2*t*t*(e+t-2)/(e*(t-2)*(t-2)*(t-4))}const cne=Object.freeze(Object.defineProperty({__proto__:null,pdf:ine,cdf:T1,inv:one,mean:ane,mode:sne,sample:lne,variance:une},Symbol.toStringTag,{value:"Module"}));function fne(e,t){return e<0?0:e===0&&t===2?.5:Math.exp((t/2-1)*Math.log(e)-e/2-t/2*Math.log(2)-Ge(t/2))}function hne(e,t){return e<0?0:jf(t/2,e/2)}function dne(e,t){return 2*ey(e,.5*t)}function pne(e){return e}function vne(e){return e*Math.pow(1-2/(9*e),3)}function gne(e){return e-2>0?e-2:0}function mne(e){return Ro(e/2)*2}function _ne(e){return 2*e}const yne=Object.freeze(Object.defineProperty({__proto__:null,pdf:fne,cdf:hne,inv:dne,mean:pne,median:vne,mode:gne,sample:mne,variance:_ne},Symbol.toStringTag,{value:"Module"}));function bne(e,t){return e<0?0:t*Math.exp(-t*e)}function wne(e,t){return e<0?0:1-Math.exp(-t*e)}function Sne(e,t){return-Math.log(1-e)/t}function Tne(e){return 1/e}function Pne(e){return 1/e*Math.log(2)}function Ene(){return 0}function kne(e){return-1/e*Math.log(ai())}function Ane(e){return Math.pow(e,-2)}const Cne=Object.freeze(Object.defineProperty({__proto__:null,pdf:bne,cdf:wne,inv:Sne,mean:Tne,median:Pne,mode:Ene,sample:kne,variance:Ane},Symbol.toStringTag,{value:"Module"}));function Mne(e,t,r){return e<0?0:e===0&&t===1?1/r:Math.exp((t-1)*Math.log(e)-e/r-Ge(t)-t*Math.log(r))}function xne(e,t,r){return e<0?0:jf(t,e/r)}function Lne(e,t,r){return ey(e,t)*r}function Ine(e,t){return e*t}function One(e,t){if(e>1)return(e-1)*t}function Rne(e,t){return Ro(e)*t}function Dne(e,t){return e*t*t}const Nne=Object.freeze(Object.defineProperty({__proto__:null,pdf:Mne,cdf:xne,inv:Lne,mean:Ine,mode:One,sample:Rne,variance:Dne},Symbol.toStringTag,{value:"Module"}));function ad(e,t,r,n){if(e!==e|0)return!1;if(e<0||e<r-(t-n))return 0;if(e>n||e>r)return 0;if(r*2>t)return n*2>t?ad(t-r-n+e,t,t-r,t-n):ad(n-e,t,t-r,n);if(n*2>t)return ad(r-e,t,r,t-n);if(r<n)return ad(e,t,n,r);for(var i=1,o=0,a=0;a<e;a++){for(;i>1&&o<n;)i*=1-r/(t-o),o++;i*=(n-a)*(r-a)/((a+1)*(t-r-n+a+1))}for(;o<n;o++)i*=1-r/(t-o);return Math.min(1,Math.max(0,i))}function sd(e,t,r,n){if(e<0||e<r-(t-n))return 0;if(e>=n||e>=r)return 1;if(r*2>t)return n*2>t?sd(t-r-n+e,t,t-r,t-n):1-sd(n-e-1,t,t-r,n);if(n*2>t)return 1-sd(r-e-1,t,r,t-n);if(r<n)return sd(e,t,n,r);for(var i=1,o=1,a=0,s=0;s<e;s++){for(;i>1&&a<n;){var l=1-r/(t-a);o*=l,i*=l,a++}o*=(n-s)*(r-s)/((s+1)*(t-r-n+s+1)),i+=o}for(;a<n;a++)i*=1-r/(t-a);return Math.min(1,Math.max(0,i))}const Fne=Object.freeze(Object.defineProperty({__proto__:null,pdf:ad,cdf:sd},Symbol.toStringTag,{value:"Module"}));function Bne(e,t,r){return e<=0?0:Math.exp(-(t+1)*Math.log(e)-r/e-Ge(t)+t*Math.log(r))}function $ne(e,t,r){return e<=0?0:1-jf(t,r/e)}function zne(e,t,r){return r/ey(1-e,t)}function Vne(e,t){return e>1?t/(e-1):void 0}function Une(e,t){return t/(e+1)}function Gne(e,t){return t/Ro(e)}function jne(e,t){if(!(e<=2))return t*t/((e-1)*(e-1)*(e-2))}const Wne=Object.freeze(Object.defineProperty({__proto__:null,pdf:Bne,cdf:$ne,inv:zne,mean:Vne,mode:Une,sample:Gne,variance:jne},Symbol.toStringTag,{value:"Module"}));function Hne(e,t,r){return e===0&&t===1?r:e===1&&r===1?t:Math.exp(Math.log(t)+Math.log(r)+(t-1)*Math.log(e)+(r-1)*Math.log(1-Math.pow(e,t)))}function Xne(e,t,r){return e<0?0:e>1?1:1-Math.pow(1-Math.pow(e,t),r)}function Yne(e,t,r){return Math.pow(1-Math.pow(1-e,1/r),1/t)}function qne(e,t){return t*Ri(1+1/e)*Ri(t)/Ri(1+1/e+t)}function Zne(e,t){return Math.pow(1-Math.pow(2,-1/t),1/e)}function Kne(e,t){if(e>=1&&t>=1&&e!==1&&t!==1)return Math.pow((e-1)/(e*t-1),1/e)}function Jne(){throw new Error("variance not yet implemented")}const Qne=Object.freeze(Object.defineProperty({__proto__:null,pdf:Hne,cdf:Xne,inv:Yne,mean:qne,median:Zne,mode:Kne,variance:Jne},Symbol.toStringTag,{value:"Module"}));function tie(e){return e/Math.abs(e)}function eie(e,t,r){return r<=0?0:Math.exp(-Math.abs(e-t)/r)/(2*r)}function rie(e,t,r){return r<=0?0:e<t?.5*Math.exp((e-t)/r):1-.5*Math.exp(-(e-t)/r)}function nie(e){return e}function iie(e){return e}function oie(e){return e}function aie(e,t){return 2*t*t}function sie(e,t){var r=ai()-.5;return e-t*tie(r)*Math.log(1-2*Math.abs(r))}const lie=Object.freeze(Object.defineProperty({__proto__:null,pdf:eie,cdf:rie,mean:nie,median:iie,mode:oie,variance:aie,sample:sie},Symbol.toStringTag,{value:"Module"}));function uie(e,t,r){return e<=0?0:Math.exp(-Math.log(e)-.5*Math.log(2*Math.PI)-Math.log(r)-Math.pow(Math.log(e)-t,2)/(2*r*r))}function cie(e,t,r){return e<0?0:.5+.5*ry((Math.log(e)-t)/Math.sqrt(2*r*r))}function fie(e,t,r){return Math.exp(-1.4142135623730951*r*yA(2*e)+t)}function hie(e,t){return Math.exp(e+t*t/2)}function die(e){return Math.exp(e)}function pie(e,t){return Math.exp(e-t*t)}function vie(e,t){return Math.exp(Mu()*t+e)}function gie(e,t){return(Math.exp(t*t)-1)*Math.exp(2*e+t*t)}const mie=Object.freeze(Object.defineProperty({__proto__:null,pdf:uie,cdf:cie,inv:fie,mean:hie,median:die,mode:pie,sample:vie,variance:gie},Symbol.toStringTag,{value:"Module"}));function VG(e,t,r){return e!==e>>>0?!1:e<0?0:mA(e+t-1,t-1)*Math.pow(1-r,e)*Math.pow(r,t)}function _ie(e,t,r){var n=0,i=0;if(e<0)return 0;for(;i<=e;i++)n+=VG(i,t,r);return n}const yie=Object.freeze(Object.defineProperty({__proto__:null,pdf:VG,cdf:_ie},Symbol.toStringTag,{value:"Module"}));function UG(e,t){return t=t>1e100?1e100:t,1/(Math.sqrt(t)*ty(.5,t/2))*Math.pow(1+e*e/t,-((t+1)/2))}function na(e,t){var r=t/2;return ap((e+Math.sqrt(e*e+t))/(2*Math.sqrt(e*e+t)),r,r)}function P1(e,t){var r=op(2*Math.min(e,1-e),.5*t,.5);return r=Math.sqrt(t*(1-r)/r),e>.5?r:-r}function bie(e){return e>1?0:void 0}function wie(){return 0}function Sie(){return 0}function Tie(e){return Mu()*Math.sqrt(e/(2*Ro(e/2)))}function Pie(e){return e>2?e/(e-2):e>1?1/0:void 0}const Eie=Object.freeze(Object.defineProperty({__proto__:null,pdf:UG,cdf:na,inv:P1,mean:bie,median:wie,mode:Sie,sample:Tie,variance:Pie},Symbol.toStringTag,{value:"Module"}));function kie(e,t,r){return Math.exp(-.5*Math.log(2*Math.PI)-Math.log(r)-Math.pow(e-t,2)/(2*r*r))}function wi(e,t,r){return .5*(1+ry((e-t)/Math.sqrt(2*r*r)))}function jT(e,t,r){return-1.4142135623730951*r*yA(2*e)+t}function Aie(e){return e}function Cie(e){return e}function Mie(e){return e}function xie(e,t){return Mu()*t+e}function Lie(e,t){return t*t}const Iie=Object.freeze(Object.defineProperty({__proto__:null,pdf:kie,cdf:wi,inv:jT,mean:Aie,median:Cie,mode:Mie,sample:xie,variance:Lie},Symbol.toStringTag,{value:"Module"}));function Oie(e,t,r){var n=1e-14;return Math.abs(r)<n?UG(e,t):Math.abs(e)<n?Math.exp(Ge((t+1)/2)-r*r/2-.5*Math.log(Math.PI*t)-Ge(t/2)):t/e*(WT(e*Math.sqrt(1+2/t),t+2,r)-WT(e,t,r))}function WT(e,t,r){var n=1e-14,i=200;if(Math.abs(r)<n)return na(e,t);var o=!1;e<0&&(o=!0,r=-r);for(var a=wi(-r,0,1),s=n+1,l=s,u=e*e/(e*e+t),c=0,f=Math.exp(-r*r/2),h=Math.exp(-r*r/2-.5*Math.log(2)-Ge(3/2))*r;c<i||l>n||s>n;)l=s,c>0&&(f*=r*r/(2*c),h*=r*r/(2*(c+1/2))),s=f*S1(u,c+.5,t/2)+h*S1(u,c+1,t/2),a+=.5*s,c++;return o?1-a:a}const Rie=Object.freeze(Object.defineProperty({__proto__:null,pdf:Oie,cdf:WT},Symbol.toStringTag,{value:"Module"}));function Die(e,t,r){return e<t?0:r*Math.pow(t,r)/Math.pow(e,r+1)}function Nie(e,t,r){return e<t?0:1-Math.pow(t/e,r)}function Fie(e,t,r){return t/Math.pow(1-e,1/r)}function Bie(e,t){if(!(t<=1))return t*Math.pow(e,t)/(t-1)}function $ie(e,t){return e*(t*Math.SQRT2)}function zie(e){return e}function Vie(e,t){if(!(t<=2))return e*e*t/(Math.pow(t-1,2)*(t-2))}const Uie=Object.freeze(Object.defineProperty({__proto__:null,pdf:Die,cdf:Nie,inv:Fie,mean:Bie,median:$ie,mode:zie,variance:Vie},Symbol.toStringTag,{value:"Module"}));function ht(...e){return new ht._init(...e)}ht._init=function(...e){if(Oo(e[0]))if(Oo(e[0][0])){k0(e[1])&&(e[0]=an(e[0],e[1]));for(let t=0;t<e[0].length;t++)this[t]=e[0][t];this.length=e[0].length}else this[0]=k0(e[1])?an(e[0],e[1]):e[0],this.length=1;else if(kr(e[0]))this[0]=MG.apply(null,e),this.length=1;else{if(e[0]instanceof ht)return ht(e[0].toArray());this[0]=[],this.length=1}return this};ht._init.prototype=ht.prototype;ht._init.constructor=ht;ht.setRandom=PG;const bn=ht.prototype;bn.length=0;bn.push=Array.prototype.push;bn.sort=Array.prototype.sort;bn.splice=Array.prototype.splice;bn.slice=Array.prototype.slice;bn.toArray=function(){return this.length>1?this.slice():this.slice()[0]};bn.map=function(e,t){return ht(an(this,e,t))};bn.cumreduce=function(e,t){return ht(K_(this,e,t))};bn.alter=function(e){return dA(this,e),this};"transpose clear symmetric rows cols dimensions diag antidiag".split(" ").forEach(e=>{bn[e]=function(t){if(t)return t.call(this,bn[e].call(this)),this;const r=ht[e](this);return Array.isArray(r)?ht(r):r}});"row col".split(" ").forEach(e=>{bn[e]=function(t,r){return r?(r.call(this,bn[e].call(this,t)),this):ht(ht[e](this,t))}});"create zeros ones rand identity".split(" ").forEach(e=>{bn[e]=function(...t){return ht(ht[e](...t))}});function GG(e,t){return t<0||e%1!==0||e<0?0:Math.pow(t,e)*Math.exp(-t)/Xl(e)}function Gie(e,t){var r=[],n=0;if(e<0)return 0;for(;n<=e;n++)r.push(GG(n,t));return sn(r)}function jie(e){return e}function Wie(e){return e}function Hie(e){var t=1,r=0,n=Math.exp(-e);do r++,t*=ht._random_fn();while(t>n);return r-1}function Xie(e){var t=e,r,n,i,o,a,s,l,u,c,f;for(o=Math.sqrt(t),a=Math.log(t),l=.931+2.53*o,s=-.059+.02483*l,u=1.1239+1.1328/(l-3.4),c=.9277-3.6224/(l-2);;){if(n=Math.random()-.5,i=Math.random(),f=.5-Math.abs(n),r=Math.floor((2*s/f+l)*n+t+.43),f>=.07&&i<=c)return r;if(!(r<0||f<.013&&i>f)&&Math.log(i)+Math.log(u)-Math.log(s/(f*f)+l)<=-t+r*a-FG(r+1))return r}}function Yie(e){return e<10?Hie(e):Xie(e)}const qie=Object.freeze(Object.defineProperty({__proto__:null,pdf:GG,cdf:Gie,mean:jie,variance:Wie,sample:Yie},Symbol.toStringTag,{value:"Module"}));function Zie(e,t,r,n){return r<=t||n<t||n>r?NaN:e<t||e>r?0:e<n?2*(e-t)/((r-t)*(n-t)):e===n?2/(r-t):2*(r-e)/((r-t)*(r-n))}function Kie(e,t,r,n){return r<=t||n<t||n>r?NaN:e<=t?0:e>=r?1:e<=n?Math.pow(e-t,2)/((r-t)*(n-t)):1-Math.pow(r-e,2)/((r-t)*(r-n))}function Jie(e,t,r,n){return r<=t||n<t||n>r?NaN:e<=(n-t)/(r-t)?t+(r-t)*Math.sqrt(e*((n-t)/(r-t))):t+(r-t)*(1-Math.sqrt((1-e)*(1-(n-t)/(r-t))))}function Qie(e,t,r){return(e+t+r)/3}function toe(e,t,r){if(r<=(e+t)/2)return t-Math.sqrt((t-e)*(t-r))/Math.sqrt(2);if(r>(e+t)/2)return e+Math.sqrt((t-e)*(r-e))/Math.sqrt(2)}function eoe(e,t,r){return r}function roe(e,t,r){var n=ai();return n<(r-e)/(t-e)?e+Math.sqrt(n*(t-e)*(r-e)):t-Math.sqrt((1-n)*(t-e)*(t-r))}function noe(e,t,r){return(e*e+t*t+r*r-e*t-e*r-t*r)/18}const ioe=Object.freeze(Object.defineProperty({__proto__:null,pdf:Zie,cdf:Kie,inv:Jie,mean:Qie,median:toe,mode:eoe,sample:roe,variance:noe},Symbol.toStringTag,{value:"Module"}));function d8(e,t,r){var n=12,i=6,o=-30,a=-50,s=60,l=8,u=3,c=2,f=3,h=[.9815606342467192,.9041172563704749,.7699026741943047,.5873179542866175,.3678314989981802,.1252334085114689],d=[.04717533638651183,.10693932599531843,.16007832854334622,.20316742672306592,.2334925365383548,.24914704581340277],p=e*.5;if(p>=l)return 1;var v=2*wi(p,0,1)-1;v>=Math.exp(a/r)?v=Math.pow(v,r):v=0;var g;e>u?g=c:g=f;for(var m=p,_=(l-p)/g,y=m+_,w=0,T=r-1,S=1;S<=g;S++){for(var P=0,A=.5*(y+m),k=.5*(y-m),C=1;C<=n;C++){var M,D;i<C?(M=n-C+1,D=h[M-1]):(M=C,D=-h[M-1]);var B=k*D,V=A+B,N=V*V;if(N>s)break;var j=2*wi(V,0,1),Z=2*wi(V,e,1),q=j*.5-Z*.5;q>=Math.exp(o/T)&&(q=d[M-1]*Math.exp(-(.5*N))*Math.pow(q,T),P+=q)}P*=2*k*r/Math.sqrt(2*Math.PI),w+=P,m=y,y+=_}return v+=w,v<=Math.exp(o/t)?0:(v=Math.pow(v,t),v>=1?1:v)}function ooe(e,t,r){var n=.322232421088,i=.099348462606,o=-1,a=.588581570495,s=-.342242088547,l=.531103462366,u=-.204231210125,c=.10353775285,f=-453642210148e-16,h=.0038560700634,d=.8832,p=.2368,v=1.214,g=1.208,m=1.4142,_=120,y=.5-.5*e,w=Math.sqrt(Math.log(1/(y*y))),T=w+((((w*f+u)*w+s)*w+o)*w+n)/((((w*h+c)*w+l)*w+a)*w+i);r<_&&(T+=(T*T*T+T)/r/4);var S=d-p*T;return r<_&&(S+=-v/r+g*T/r),T*(S*Math.log(t-1)+m)}function Nd(e,t,r){var n=1,i=t,o=16,a=8,s=-30,l=1e-14,u=100,c=800,f=5e3,h=25e3,d=1,p=.5,v=.25,g=.125,m=[.9894009349916499,.9445750230732326,.8656312023878318,.755404408355003,.6178762444026438,.45801677765722737,.2816035507792589,.09501250983763744],_=[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685];if(e<=0)return 0;if(r<2||n<1||i<2)return NaN;if(!Number.isFinite(e))return 1;if(r>h)return d8(e,n,i);var y=r*.5,w=y*Math.log(r)-r*Math.log(2)-Ge(y),T=y-1,S=r*.25,P;r<=u?P=d:r<=c?P=p:r<=f?P=v:P=g,w+=Math.log(P);for(var A=0,k=1;k<=50;k++){for(var C=0,M=(2*k-1)*P,D=1;D<=o;D++){var B,V;a<D?(B=D-a-1,V=w+T*Math.log(M+m[B]*P)-(m[B]*P+M)*S):(B=D-1,V=w+T*Math.log(M-m[B]*P)+(m[B]*P-M)*S);var N;if(V>=s){a<D?N=e*Math.sqrt((m[B]*P+M)*.5):N=e*Math.sqrt((-(m[B]*P)+M)*.5);var j=d8(N,n,i),Z=j*_[B]*Math.exp(V);C+=Z}}if(k*P>=1&&C<=l)break;A+=C}if(C>l)throw new Error("tukey.cdf failed to converge");return A>1&&(A=1),A}function aoe(e,t,r){var n=1,i=t,o=1e-4,a=50;if(r<2||n<1||i<2)return NaN;if(e<0||e>1)return NaN;if(e===0)return 0;if(e===1)return 1/0;var s=ooe(e,i,r),l=Nd(s,t,r)-e,u;l>0?u=Math.max(0,s-1):u=s+1;for(var c=Nd(u,t,r)-e,f,h=1;h<a;h++){f=u-c*(u-s)/(c-l),l=c,s=u,f<0&&(f=0,c=-e),c=Nd(f,t,r)-e,u=f;var d=Math.abs(u-s);if(d<o)return f}throw new Error("tukey.inv failed to converge")}const soe=Object.freeze(Object.defineProperty({__proto__:null,cdf:Nd,inv:aoe},Symbol.toStringTag,{value:"Module"}));function loe(e,t,r){return e<0||t<0||r<0?0:r/t*Math.pow(e/t,r-1)*Math.exp(-Math.pow(e/t,r))}function uoe(e,t,r){return e<0?0:1-Math.exp(-Math.pow(e/t,r))}function coe(e,t,r){return t*Math.pow(-Math.log(1-e),1/r)}function jG(e,t){return e*Ri(1+1/t)}function foe(e,t){return e*Math.pow(Math.log(2),1/t)}function hoe(e,t){return t<=1?0:e*Math.pow((t-1)/t,1/t)}function doe(e,t){return e*Math.pow(-Math.log(ai()),1/t)}function poe(e,t){return e*e*Ri(1+2/t)-Math.pow(jG(e,t),2)}const voe=Object.freeze(Object.defineProperty({__proto__:null,pdf:loe,cdf:uoe,inv:coe,mean:jG,median:foe,mode:hoe,sample:doe,variance:poe},Symbol.toStringTag,{value:"Module"})),goe=Object.freeze(Object.defineProperty({__proto__:null,arcsine:Fre,beta:Yre,binomial:Zre,cauchy:nne,centralF:cne,chisquare:yne,exponential:Cne,gamma:Nne,hypgeom:Fne,invgamma:Wne,kumaraswamy:Qne,laplace:lie,lognormal:mie,negbin:yie,noncentralt:Rie,normal:Iie,pareto:Uie,poisson:qie,studentt:Eie,triangular:ioe,tukey:soe,uniform:Cre,weibull:voe},Symbol.toStringTag,{value:"Module"}));function HT(){const e=[...arguments];return kr(e[1])?(e[0]-e[1])/e[2]:(e[0]-sr(e[1]))/Pa(e[1],e[2])}function bA(){const e=[...arguments];let t;return Oo(e[1])?(t=HT(e[0],e[1],e[3]),e[2]===1?wi(-Math.abs(t),0,1):wi(-Math.abs(t),0,1)*2):e.length>2?(t=HT(e[0],e[1],e[2]),e[3]===1?wi(-Math.abs(t),0,1):wi(-Math.abs(t),0,1)*2):(t=e[0],e[1]===1?wi(-Math.abs(t),0,1):wi(-Math.abs(t),0,1)*2)}function XT(){const e=[...arguments];return e.length===4?(e[0]-e[1])/(e[2]/Math.sqrt(e[3])):(e[0]-sr(e[1]))/(Pa(e[1],!0)/Math.sqrt(e[1].length))}function moe(){const e=[...arguments];let t;return e.length===5?(t=Math.abs(XT(e[0],e[1],e[2],e[3])),e[4]===1?na(-t,e[3]-1):na(-t,e[3]-1)*2):kr(e[1])?(t=Math.abs(e[0]),e[2]===1?na(-t,e[1]-1):na(-t,e[1]-1)*2):(t=Math.abs(XT(e[0],e[1])),e[2]===1?na(-t,e[1].length-1):na(-t,e[1].length-1)*2)}function _oe(){var e=[...arguments],t,r,n,i,o,a,s,l;if(e.length===1){for(o=new Array(e[0].length),s=0;s<e[0].length;s++)o[s]=e[0][s];e=o}for(r=[],s=0;s<e.length;s++)r=r.concat(e[s]);for(n=sr(r),t=0,s=0;s<e.length;s++)t=t+e[s].length*Math.pow(sr(e[s])-n,2);for(t/=e.length-1,a=0,s=0;s<e.length;s++)for(i=sr(e[s]),l=0;l<e[s].length;l++)a+=Math.pow(e[s][l]-i,2);return a/=r.length-e.length,t/a}function yoe(){var e=[...arguments],t,r,n,i;if(kr(e[0]))return 1-T1(e[0],e[1],e[2]);var o=o(e);for(t=e.length-1,n=0,i=0;i<e.length;i++)n=n+e[i].length;return r=n-t-1,1-T1(o,t,r)}function boe(e,t,r){return 1-T1(e,t,r)}function YT(){var e=[...arguments],t,r,n,i,o;return kr(e[0])?(t=e[0],r=e[1],n=e[2],i=e[3],o=e[4]):(t=sr(e[0]),r=sr(e[1]),n=e[0].length,i=e[1].length,o=e[2]),Math.abs(t-r)/(o*Math.sqrt((1/n+1/i)/2))}function WG(){var e=[...arguments],t;e.length===3?(t=e[0],e=e.slice(1)):e.length===7?(t=YT(e[0],e[1],e[2],e[3],e[4]),e=e.slice(5)):(t=YT(e[0],e[1],e[2]),e=e.slice(3));var r=e[0],n=e[1];return 1-Nd(t,n,r-n)}function woe(e){for(var t=OG(e),r=e.map(l=>sr(l)),n=e.reduce((l,u)=>l+u.length,0),i=[],o=0;o<e.length;++o)for(var a=o+1;a<e.length;++a){var s=WG(r[o],r[a],e[o].length,e[a].length,t,n,e.length);i.push([[o,a],s])}return i}function Soe(){const e=[...arguments],t=new Array(2);let r;return e.length===4?r=Math.abs(jT(e[1]/2,0,1)*e[2]/Math.sqrt(e[3])):r=Math.abs(jT(e[1]/2,0,1)*Pa(e[2])/Math.sqrt(e[2].length)),t[0]=e[0]-r,t[1]=e[0]+r,t}function Toe(){const e=[...arguments],t=new Array(2);let r;return e.length===4?r=Math.abs(P1(e[1]/2,e[3]-1)*e[2]/Math.sqrt(e[3])):r=Math.abs(P1(e[1]/2,e[2].length-1)*Pa(e[2],!0)/Math.sqrt(e[2].length)),t[0]=e[0]-r,t[1]=e[0]+r,t}function Poe(e,t){return e<t}function HG(e,t,r,n){if(e>1||r>1||e<=0||r<=0)throw new Error("Proportions should be greater than 0 and less than 1");var i=(e*t+r*n)/(t+n),o=Math.sqrt(i*(1-i)*(1/t+1/n));return(e-r)/o}function Eoe(e,t,r,n){const i=HG(e,t,r,n);return bA(i,1)}function koe(e,t,r,n){const i=HG(e,t,r,n);return bA(i,2)}const Aoe=Object.freeze(Object.defineProperty({__proto__:null,zscore:HT,ztest:bA,tscore:XT,ttest:moe,anovafscore:_oe,anovaftest:yoe,ftest:boe,qscore:YT,qtest:WG,tukeyhsd:woe,normalci:Soe,tci:Toe,significant:Poe,oneSidedDifferenceOfProportions:Eoe,twoSidedDifferenceOfProportions:koe},Symbol.toStringTag,{value:"Module"}));function zi(e){return Oo(e)||e.constructor.name==="jStat"}function gn(e,t){return zi(t)?(zi(t[0])||(t=[t]),an(e,function(r,n,i){return r+t[n][i]})):an(e,function(r){return r+t})}function uu(e,t){return zi(t)?(zi(t[0])||(t=[t]),an(e,function(r,n,i){return r-t[n][i]||0})):an(e,function(r){return r-t})}function qT(e,t){return zi(t)?(zi(t[0])||(t=[t]),Jt(e,Do(t))):an(e,function(r){return r/t})}function Jt(e,t){let r,n;if(e.length===void 0&&t.length===void 0)return e*t;const i=e.length,o=e[0].length,a=$o(i,r=zi(t)?t[0].length:o);let s=0;if(zi(t)){for(;s<r;s++)for(let l=0;l<i;l++){n=0;for(let u=0;u<o;u++)n+=e[l][u]*t[u][s];a[l][s]=n}return i===1&&s===1?a[0][0]:a}return an(e,function(l){return l*t})}function Coe(e,t){return Jt(e.map(r=>[r]),[t])}function E1(e,t){zi(e[0])||(e=[e]),zi(t[0])||(t=[t]);var r=e[0].length===1&&e.length!==1?Es(e):e,n=t[0].length===1&&t.length!==1?Es(t):t,i=[],o=r.length,a=r[0].length,s,l;for(let u=0;u<o;u++){for(i[u]=[],s=0,l=0;l<a;l++)s+=r[u][l]*n[u][l];i[u]=s}return i.length===1?i[0]:i}function ZT(e,t){return an(e,r=>Math.pow(r,t))}function Moe(e){return an(e,t=>Math.exp(t))}function xoe(e){return an(e,t=>Math.log(t))}function Loe(e){return an(e,t=>Math.abs(t))}function sf(e,t){var r=0,n=0;for(isNaN(t)&&(t=2),zi(e[0])&&(e=e[0]);n<e.length;n++)r+=Math.pow(Math.abs(e[n]),t);return Math.pow(r,1/t)}function Ioe(e,t){return Math.acos(E1(e,t)/(sf(e)*sf(t)))}function wA(e,t){var r=[],n;for(n=0;n<e.length;n++)r.push(e[n].slice());for(n=0;n<r.length;n++)Array.prototype.push.apply(r[n],t[n]);return r}function Do(e){for(var t=e.length,r=e[0].length,n=lu(t,r),i=XG(e,n),o=[],a=0,s;a<t;a++)for(o[a]=[],s=r;s<i[0].length;s++)o[a][s-r]=i[a][s];return o}function Ooe(e){var t=e.length,r=t*2,n=new Array(r),i=t-1,o=r-1,a=i-t+1,s=o,l=0,u=0,c;if(t===2)return e[0][0]*e[1][1]-e[0][1]*e[1][0];for(;l<r;l++)n[l]=1;for(l=0;l<t;l++){for(c=0;c<t;c++)n[a<0?a+t:a]*=e[l][c],n[s<t?s+t:s]*=e[l][c],a++,s--;a=--i-t+1,s=--o}for(l=0;l<t;l++)u+=n[l];for(;l<r;l++)u-=n[l];return u}function Roe(e,t){var r=0,n=0,i=e.length,o=e[0].length,a=1,s=0,l=[],u,c,f,h;for(e=wA(e,t),u=e[0].length,r=0;r<i;r++){for(c=e[r][r],n=r,h=r+1;h<o;h++)c<Math.abs(e[h][r])&&(c=e[h][r],n=h);if(n!=r)for(h=0;h<u;h++)f=e[r][h],e[r][h]=e[n][h],e[n][h]=f;for(n=r+1;n<i;n++)for(a=e[n][r]/e[r][r],h=r;h<u;h++)e[n][h]=e[n][h]-a*e[r][h]}for(r=i-1;r>=0;r--){for(s=0,n=r+1;n<=i-1;n++)s=s+l[n]*e[r][n];l[r]=(e[r][u-1]-s)/e[r][r]}return l}function XG(e,t){var r=wA(e,t),n=r.length,i=r[0].length,o=0,a,s,l;for(s=0;s<n;s++){var u=s;for(l=s+1;l<n;l++)Math.abs(r[l][s])>Math.abs(r[u][s])&&(u=l);var c=r[s];for(r[s]=r[u],r[u]=c,l=s+1;l<n;l++)for(o=r[l][s]/r[s][s],a=s;a<i;a++)r[l][a]-=r[s][a]*o}for(s=n-1;s>=0;s--){for(o=r[s][s],l=0;l<s;l++)for(a=i-1;a>s-1;a--)r[l][a]-=r[s][a]*r[l][s]/o;for(r[s][s]/=o,a=n;a<i;a++)r[s][a]/=o}return r}function Doe(e,t){var r=e[0].length,n=$o(1,r)[0],i,o=!1;return t[0].length!=null&&(t=t.map(function(a){return a[0]}),o=!0),Ie(r-1,-1,-1).forEach(function(a){i=Ie(a+1,r).map(function(s){return n[s]*e[a][s]}),n[a]=(t[a]-sn(i))/e[a][a]}),o?n.map(function(a){return[a]}):n}function Noe(e,t){var r=e[0].length,n=$o(1,r)[0],i,o=!1;return t[0].length!=null&&(t=t.map(function(a){return a[0]}),o=!0),Ie(r).forEach(function(a){i=Ie(a).map(function(s){return e[a][s]*n[s]}),n[a]=(t[a]-sn(i))/e[a][a]}),o?n.map(function(a){return[a]}):n}function Foe(e){var t=e.length,r=lu(t),n=$o(e.length,e[0].length),i;return Ie(t).forEach(function(o){n[0][o]=e[0][o]}),Ie(1,t).forEach(function(o){Ie(o).forEach(function(a){i=Ie(a).map(function(s){return r[o][s]*n[s][a]}),r[o][a]=(e[o][a]-sn(i))/n[a][a]}),Ie(o,t).forEach(function(a){i=Ie(o).map(function(s){return r[o][s]*n[s][a]}),n[o][a]=e[i.length][a]-sn(i)})}),[r,n]}function Boe(e){var t=e.length,r=$o(e.length,e[0].length),n;return Ie(t).forEach(function(i){n=Ie(i).map(function(o){return Math.pow(r[i][o],2)}),r[i][i]=Math.sqrt(e[i][i]-sn(n)),Ie(i+1,t).forEach(function(o){n=Ie(i).map(function(a){return r[i][a]*r[o][a]}),r[o][i]=(e[i][o]-sn(n))/r[i][i]})}),r}function $oe(e,t,r,n){for(var i=0,o=0,a=e.length,s=[],l=[],u=[],c,f,h,d;i<a;i++)for(s[i]=[],l[i]=[],u[i]=[],o=0;o<a;o++)i>o?(s[i][o]=e[i][o],l[i][o]=u[i][o]=0):i<o?(l[i][o]=e[i][o],s[i][o]=u[i][o]=0):(u[i][o]=e[i][o],s[i][o]=l[i][o]=0);for(h=Jt(Jt(Do(u),gn(s,l)),-1),f=Jt(Do(u),t),c=r,d=gn(Jt(h,r),f),i=2;Math.abs(sf(uu(d,c)))>n;)c=d,d=gn(Jt(h,c),f),i++;return d}function zoe(e,t,r,n){for(var i=0,o=e.length,a=[],s=[],l=[],u,c,f,h,d;i<o;i++)for(a[i]=[],s[i]=[],l[i]=[],u=0;u<o;u++)i>u?(a[i][u]=e[i][u],s[i][u]=l[i][u]=0):i<u?(s[i][u]=e[i][u],a[i][u]=l[i][u]=0):(l[i][u]=e[i][u],a[i][u]=s[i][u]=0);for(h=Jt(Jt(Do(gn(l,a)),s),-1),f=Jt(Do(gn(l,a)),t),c=r,d=gn(Jt(h,r),f),i=2;Math.abs(sf(uu(d,c)))>n;)c=d,d=gn(Jt(h,c),f),i=i+1;return d}function Voe(e,t,r,n,i){for(var o=0,a=e.length,s=[],l=[],u=[],c,f,h,d,p;o<a;o++)for(s[o]=[],l[o]=[],u[o]=[],c=0;c<a;c++)o>c?(s[o][c]=e[o][c],l[o][c]=u[o][c]=0):o<c?(l[o][c]=e[o][c],s[o][c]=u[o][c]=0):(u[o][c]=e[o][c],s[o][c]=l[o][c]=0);for(d=Jt(Do(gn(u,Jt(s,i))),uu(Jt(u,1-i),Jt(l,i))),h=Jt(Jt(Do(gn(u,Jt(s,i))),t),i),f=r,p=gn(Jt(d,r),h),o=2;Math.abs(sf(uu(p,f)))>n;)f=p,p=gn(Jt(d,f),h),o++;return p}function Uoe(e){for(var t=e.length,r=e[0].length,n=0,i=[],o=[],a,s,l,u,c;n<t-1;n++){for(a=0,u=n+1;u<r;u++)a+=e[u][n]*e[u][n];for(c=e[n+1][n]>0?-1:1,a=c*Math.sqrt(a),s=Math.sqrt((a*a-e[n+1][n]*a)/2),i=$o(t,1),i[n+1][0]=(e[n+1][n]-a)/(2*s),l=n+2;l<t;l++)i[l][0]=e[l][n]/(2*s);o=uu(lu(t,r),Jt(Jt(i,Es(i)),2)),e=Jt(o,Jt(e,o))}return e}function YG(e){var t=e.length,r=e[0].length,n=$o(r,r);e=J_(e);var i,o,a;for(o=0;o<r;o++){for(n[o][o]=Math.sqrt(sn(Ie(t).map(function(s){return e[s][o]*e[s][o]}))),i=0;i<t;i++)e[i][o]=e[i][o]/n[o][o];for(a=o+1;a<r;a++)for(n[o][a]=sn(Ie(t).map(function(s){return e[s][o]*e[s][a]})),i=0;i<t;i++)e[i][a]=e[i][a]-e[i][o]*n[o][a]}return[e,n]}function Goe(e){e=J_(e);var t=e.length,r=lu(t);return Ie(t-1,-1,-1).forEach(function(n){od(r,{row:n},qT(ra(r,{row:n}),e[n][n])),od(e,{row:n},qT(ra(e,{row:n}),e[n][n])),Ie(n).forEach(function(i){var o=Jt(e[i][n],-1),a=ra(e,{row:i}),s=Jt(ra(e,{row:n}),o);od(e,{row:i},gn(a,s));var l=ra(r,{row:i}),u=Jt(ra(r,{row:n}),o);od(r,{row:i},gn(l,u))})}),r}function qG(e,t){var r=!1;t[0].length===void 0&&(t=t.map(function(f){return[f]}),r=!0);var[n,i]=YG(e),o=e[0].length,a=ra(n,{col:{end:o}}),s=ra(i,{row:{end:o}}),l=Goe(s),u=Es(a);u[0].length===void 0&&(u=[u]);var c=Jt(Jt(l,u),t);return c.length===void 0&&(c=[[c]]),r?c.map(function(f){return f[0]}):c}function ZG(e){for(var t=1,r=e.length,n=lu(r,r),i=[],o,a,s,l,u,c,f,h;t===1;){for(c=e[0][1],l=0,u=1,a=0;a<r;a++)for(s=0;s<r;s++)a!=s&&c<Math.abs(e[a][s])&&(c=Math.abs(e[a][s]),l=a,u=s);for(e[l][l]===e[u][u]?f=e[l][u]>0?Math.PI/4:-Math.PI/4:f=Math.atan(2*e[l][u]/(e[l][l]-e[u][u]))/2,h=lu(r,r),h[l][l]=Math.cos(f),h[l][u]=-Math.sin(f),h[u][l]=Math.sin(f),h[u][u]=Math.cos(f),n=Jt(n,h),o=Jt(Jt(Do(h),e),h),e=o,t=0,a=1;a<r;a++)for(s=1;s<r;s++)a!=s&&Math.abs(e[a][s])>.001&&(t=1)}for(a=0;a<r;a++)i.push(e[a][a]);return[n,i]}function joe(e,t,r,n,i,o){var a,s,l,u,c;if(o===2)for(;n<=r;)a=t*e(n,i),s=t*e(n+t,i+a),l=i+(a+s)/2,i=l,n=n+t;if(o===4)for(;n<=r;)a=t*e(n,i),s=t*e(n+t/2,i+a/2),u=t*e(n+t/2,i+s/2),c=t*e(n+t,i+u),l=i+(a+2*s+2*u+c)/6,i=l,n=n+t;return i}function Woe(e,t,r,n){for(var i=0,o=(r-t)/2,a=[],s=[],l=[],u,c,f,h,d;i<n/2;){for(d=e(t),f=t,h=0;f<=r;f=f+o,h++)a[h]=f;for(u=a.length,f=1;f<u-1;f++)d+=(f%2!==0?4:2)*e(a[f]);d=o/3*(d+e(r)),l[i]=d,o/=2,i++}for(c=l.length,u=1;c!==1;){for(f=0;f<c-1;f++)s[f]=(Math.pow(4,u)*l[f+1]-l[f])/(Math.pow(4,u)-1);c=s.length,l=s,s=[],u++}return l}function Hoe(e,t,r,n){function i(p,v){for(var g=0,m=p.length,_;g<m;g++)p[g]===v&&(_=g);return _}for(var o=Math.abs(r-e[i(e,r)+1]),a=0,s=[],l=[],u,c,f,h,d;n>=o;)u=i(e,r+n),c=i(e,r),s[a]=(t[u]-2*t[c]+t[2*c-u])/(n*n),n/=2,a++;for(h=s.length,f=1;h!=1;){for(d=0;d<h-1;d++)l[d]=(Math.pow(4,f)*s[d+1]-s[d])/(Math.pow(4,f)-1);h=l.length,s=l,l=[],f++}return s}function Xoe(e,t,r,n){for(var i=(r-t)/n,o=e(t),a=[],s=t,l=0,u=1,c;s<=r;s=s+i,l++)a[l]=s;for(c=a.length;u<c-1;u++)o+=(u%2!==0?4:2)*e(a[u]);return i/3*(o+e(r))}function Yoe(e,t,r,n){for(var i=e.length,o=0,a=0,s=[],l=[],u=[],c=[],f;a<i;a++){for(s[a]=1,f=0;f<i;f++)a!=f&&(s[a]*=(n-e[f])/(e[a]-e[f]));for(l[a]=0,f=0;f<i;f++)a!=f&&(l[a]+=1/(e[a]-e[f]));u[a]=(1-2*(n-e[a])*l[a])*(s[a]*s[a]),c[a]=(n-e[a])*(s[a]*s[a]),o+=u[a]*t[a]+c[a]*r[a]}return o}function qoe(e,t,r){for(var n=0,i=0,o,a,s=e.length;i<s;i++){for(a=t[i],o=0;o<s;o++)i!=o&&(a*=(r-e[o])/(e[i]-e[o]));n+=a}return n}function Zoe(e,t,r){for(var n=e.length,i=0,o,a=[],s=[],l=[],u=[],c=[],f=[],h=[];i<n-1;i++)c[i]=e[i+1]-e[i];for(l[0]=0,i=1;i<n-1;i++)l[i]=3/c[i]*(t[i+1]-t[i])-3/c[i-1]*(t[i]-t[i-1]);for(i=1;i<n-1;i++)a[i]=[],s[i]=[],a[i][i-1]=c[i-1],a[i][i]=2*(c[i-1]+c[i]),a[i][i+1]=c[i],s[i][0]=l[i];for(u=Jt(Do(a),s),o=0;o<n-1;o++)f[o]=(t[o+1]-t[o])/c[o]-c[o]*(u[o+1][0]+2*u[o][0])/3,h[o]=(u[o+1][0]-u[o][0])/(3*c[o]);for(o=0;o<n&&!(e[o]>r);o++);return o-=1,t[o]+(r-e[o])*f[o]+ZT(r-e[o],2)*u[o]+(r-e[o])*ZT(r-e[o],2)*h[o]}function Koe(){throw new Error("gauss_quadrature not yet implemented")}function Joe(e){var t=e.length,r=e[0].length,n=0,i,o,a=[],s=[],l=[],u=[],c=[],f=[],h=[],d=[],p=[],v=[];for(n=0;n<t;n++)a[n]=sn(e[n])/r;for(n=0;n<r;n++)for(h[n]=[],i=0;i<t;i++)h[n][i]=e[i][n]-a[i];for(h=Es(h),n=0;n<t;n++)for(d[n]=[],i=0;i<t;i++)d[n][i]=E1([h[n]],[h[i]])/(r-1);for(l=ZG(d),p=l[0],s=l[1],v=Es(p),n=0;n<s.length;n++)for(i=n;i<s.length;i++)s[n]<s[i]&&(o=s[n],s[n]=s[i],s[i]=o,u=v[n],v[n]=v[i],v[i]=u);for(f=Es(h),n=0;n<t;n++)for(c[n]=[],i=0;i<f.length;i++)c[n][i]=E1([v[n]],[f[i]]);return[e,s,v,c]}const Qoe=Object.freeze(Object.defineProperty({__proto__:null,add:gn,subtract:uu,divide:qT,multiply:Jt,outer:Coe,dot:E1,pow:ZT,exp:Moe,log:xoe,abs:Loe,norm:sf,angle:Ioe,aug:wA,inv:Do,det:Ooe,gauss_elimination:Roe,gauss_jordan:XG,triaUpSolve:Doe,triaLowSolve:Noe,lu:Foe,cholesky:Boe,gauss_jacobi:$oe,gauss_seidel:zoe,SOR:Voe,householder:Uoe,QR:YG,lstsq:qG,jacobi:ZG,rungekutta:joe,romberg:Woe,richardson:Hoe,simpson:Xoe,hermite:Yoe,lagrange:qoe,cubic_spline:Zoe,gauss_quadrature:Koe,PCA:Joe},Symbol.toStringTag,{value:"Module"}));function tae(e){var t=e[0].length,r=Ie(t).map(function(n){var i=Ie(t).filter(function(o){return o!==n});return KG(w1(e,n).map(function(o){return o[0]}),w1(e,i))});return r}function KG(e,t){var r=e.length,n=t[0].length-1,i=r-n-1,o=qG(t,e),a=Jt(t,o.map(function(d){return[d]})).map(function(d){return d[0]}),s=uu(e,a),l=sr(e),u=sn(a.map(function(d){return Math.pow(d-l,2)})),c=sn(e.map(function(d,p){return Math.pow(d-a[p],2)})),f=u+c,h=u/f;return{exog:t,endog:e,nobs:r,df_model:n,df_resid:i,coef:o,predict:a,resid:s,ybar:l,SST:f,SSE:u,SSR:c,R2:h}}function eae(e){var t=tae(e.exog),r=Math.sqrt(e.SSR/e.df_resid),n=t.map(function(l){var u=l.SST,c=l.R2;return r/Math.sqrt(u*(1-c))}),i=e.coef.map(function(l,u){return(l-0)/n[u]}),o=i.map(function(l){var u=na(l,e.df_resid);return(u>.5?1-u:u)*2}),a=P1(.975,e.df_resid),s=e.coef.map(function(l,u){var c=a*n[u];return[l-c,l+c]});return{se:n,t:i,p:o,sigmaHat:r,interval95:s}}function rae(e){var t=e.R2/e.df_model/((1-e.R2)/e.df_resid),r=function(i,o,a){return S1(i/(a/o+i),o/2,a/2)},n=1-r(t,e.df_model,e.df_resid);return{F_statistic:t,pvalue:n}}function nae(e,t){var r=KG(e,t),n=eae(r),i=rae(r),o=1-(1-r.R2)*((r.nobs-1)/r.df_resid);return r.t=n,r.f=i,r.adjust_R2=o,r}const iae={ols:nae},oae=Object.freeze(Object.defineProperty({__proto__:null,models:iae},Symbol.toStringTag,{value:"Module"}));Object.assign(ht,Kee,bre,Aoe,Qoe,oae,zre);for(const[e,t]of Object.entries(goe)){let r=function(...n){return this instanceof r?(this.givenArgs=n,this):new r(...n)};Object.assign(r,t),ht[e]=r,ht.prototype[e]=function(...n){const i=r(...n);return i.data=this,i},r.prototype.sample=function(n){const i=this.givenArgs;return n?ht.alter(n,()=>t.sample(...i)):t.sample(...i)},["pdf","cdf","inv"].forEach(n=>{r.prototype[n]=function(i){return!i&&i!==0&&(i=this.data),typeof i!="number"?ht.map(i,o=>t[n](o,...this.givenArgs)):t[n](i,...this.givenArgs)}}),["mean","median","mode","variance"].forEach(n=>{r.prototype[n]=function(){return t[n](...this.givenArgs)}})}"gammaln gammafn factorial factorialln".split(" ").forEach(function(e){ht.prototype[e]=function(){return ht(ht.map(this,function(t){return ht[e](t)}))}});ht.prototype.randn=function(){return ht(ht.randn.apply(null,arguments))};const SA=TG.isFunction;(function(e){for(var t=0;t<e.length;t++)(function(r){ht.prototype[r]=function(n,i){var o=[],a=0,s=this;if(SA(n)&&(i=n,n=!1),i)return setTimeout(function(){i.call(s,ht.prototype[r].call(s,n))}),this;if(this.length>1){for(s=n===!0?this:this.transpose();a<s.length;a++)o[a]=ht[r](s[a]);return o}return ht[r](this[0],n)}})(e[t])})("cumsum cumprod".split(" "));(function(e){for(var t=0;t<e.length;t++)(function(r){ht.prototype[r]=function(n,i){var o=[],a=0,s=this;if(SA(n)&&(i=n,n=!1),i)return setTimeout(function(){i.call(s,ht.prototype[r].call(s,n))}),this;if(this.length>1){for(r!=="sumrow"&&(s=n===!0?this:this.transpose());a<s.length;a++)o[a]=ht[r](s[a]);return n===!0?ht[r](ht.utils.toVector(o)):o}return ht[r](this[0],n)}})(e[t])})("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" "));(function(e){for(var t=0;t<e.length;t++)(function(r){ht.prototype[r]=function(){var n=[],i=0,o=this,a=Array.prototype.slice.call(arguments),s;if(SA(a[a.length-1])){s=a[a.length-1];var l=a.slice(0,a.length-1);return setTimeout(function(){s.call(o,ht.prototype[r].apply(o,l))}),this}else{s=void 0;var u=function(f){return ht[r].apply(o,[f].concat(a))}}if(this.length>1){for(o=o.transpose();i<o.length;i++)n[i]=u(o[i]);return n}return u(this[0])}})(e[t])})("quantiles percentileOfScore".split(" "));ht.prototype.zscore=function(t,r){return(t-this.mean())/this.stdev(r)};ht.prototype.ztest=function(t,r,n){const i=Math.abs(this.zscore(t,n));return r===1?ht.normal.cdf(-i,0,1):ht.normal.cdf(-i,0,1)*2};ht.prototype.tscore=function(t){return(t-this.mean())/(this.stdev(!0)/Math.sqrt(this.cols()))};ht.prototype.ttest=function(t,r){return r===1?1-ht.studentt.cdf(Math.abs(this.tscore(t)),this.cols()-1):ht.studentt.cdf(-Math.abs(this.tscore(t)),this.cols()-1)*2};ht.prototype.anovafscore=function(){return ht.anovafscore(this.toArray())};ht.prototype.anovaftes=function(){var t=0,r;for(r=0;r<this.length;r++)t=t+this[r].length;return ht.ftest(this.anovafscore(),this.length-1,t-this.length)};ht.prototype.oneSidedDifferenceOfProportions=function(){console.error("Please use jStat.oneSidedDifferenceOfProportions() instead")};ht.prototype.twoSidedDifferenceOfProportions=function(){console.error("Please use jStat.twoSidedDifferenceOfProportions() instead")};"add divide multiply subtract dot pow exp log abs norm angle".split(" ").forEach(e=>{ht.prototype[e]=function(t,r){const n=this;return r?(r.call(n,ht.prototype[e].call(n,t)),this):typeof ht[e](this,t)=="number"?ht[e](this,t):ht(ht[e](this,t))}});ht.jStat=ht;function TA(e,t,r,n){if(n)return aae(e,t,r);const i=t;let o=[];for(let a=0;a<=r;a++){const s=ht.binomial.pdf(a,r,e/r);if(s<0)return null;const l=s*i;l<.01||o.push([a,l])}return o}function aae(e,t,r){const n=t;let i=[],o=0;for(let a=0;a<=r;a++){const s=ht.binomial.pdf(a,r,e/r);if(s<0)return null;const l=s*n;if(l<.01)continue;const u=Math.floor(a*1.684);if(o)for(let c=o;c<u;c++)i.push([c,0]);i.push([u,l]),o=u+1}return i}function sae(e,t,r,n,i,o){let a=[],s=0;for(let p=0;p<=i;p++){const v=ht.binomial.pdf(p,i,e/i);if(v<0){a=null;break}const g=v*t;if(g<.01)continue;const m=Math.floor(p*1.684);if(s)for(let _=s;_<m;_++)a.push([_,0]);a.push([m,g]),s=m+1}const l=n/t,u={};for(let p=0;p<=i;p++){const v=ht.binomial.pdf(p,i,r/i);if(v<0)throw Error(`invalid arguments for Stat.binomial.pdf: ${p}, ${i}, ${r/i}`);if(v*n<.01)continue;const m=o?Math.floor(p*1.684):p;a.forEach(_=>{const[y,w]=_,T=y+m,S=w*v*l;T in u?u[T]+=S:u[T]=S})}let c=99,f=0;for(const[p,v]of Object.entries(u)){if(v<.01)continue;const g=parseInt(p);g<c&&(c=g),g>f&&(f=g)}const h=[];for(let p=c;p<=f;p++)if(p in u){const v=u[p];h.push([p,v])}else h.push([p,0]);return{bellU:a,bellL:h}}function lae(e,t){let r={};if(e)for(let[o,a]of e)r[o]=a;for(let[o,a]of t)o in r?r[o]+=a:r[o]=a;let n=Object.entries(r).sort((o,a)=>o[0]-a[0]),i=[];for(let[o,a]of n)i.push([o,a]);return i}function PA(e,t,r,n,i){if(n)throw Error("not implemented");return uae(e,t,r,i)}function uae(e,t,r,n){let i,o,a;if(!Object.keys(e).length)return{mse:i,chisq:o,pval:a};i=0;for(const[p,[v,g]]of Object.entries(e)){const m=parseInt(v);if(n&&m==0)continue;const _=m in t?t[m]:0,y=g-_;i+=y*y}const s=3,l=r+2,u=Object.keys(e).sort((p,v)=>e[v][1]-e[p][1]);let c={},f=0;if(u.forEach(p=>{const v=e[p][0];if(n&&v=="0")return;const g=e[p][1],m=v in t?t[v]:0;(g>=s||m>=s||f<l)&&(c[v]={y_model:g,y_observed:m},f++)}),Object.keys(c).length==0)return console.log("can't compute chiSquared: only",c,"bins left after discard"),{mse:i,chisq:o,pval:a};let d=0;o=0;for(const[p,{y_model:v,y_observed:g}]of Object.entries(c)){const m=v-g;o+=m*m/v,d++}return d-1-r<1?(console.log("can't compute pval: bins",d,"variables",r),{mse:i,chisq:o,pval:a}):(isFinite(o)?a=1-ht.chisquare.cdf(o,d-1-r):a=0,{mse:i,chisq:o,pval:a})}function JG(e){e.forEach(t=>{t[0]=Math.floor(t[0]*1.684)})}Hr([yf,y_,B0,$0,Sf,wf,Tf,z0,S_,w_,b_,V0]);const cae={data:()=>({selected_np:1,selected_n:10,isBinary:!1}),props:{stats:Object,histogram:Object,isGiant:Boolean},components:{VChart:Pf},methods:{formatFixed:Ft,isGoodVal:Ti,formatKMG:wP,makeBinomialArray:TA,loss:PA,applyGiantBonus:JG,makeModelA(e,t){let r={np:e,n:t};if(r.bell=this.makeBinomialArray(e,this.stats.len,t,this.isGiant),!r.bell)return null;if(r.loss=this.loss(r.bell,this.histogram.map,2),this.isBinary=0 in r.bell&&1 in r.bell&&Object.keys(r.bell).length==2&&0 in this.histogram.map&&1 in this.histogram.map&&Object.keys(this.histogram.map).length==2,this.isBinary){const n=this.stats.lucky.len,i=r.bell[1][1],o=this.histogram.map[1],a=i/n;o<=n&&0<a&&a<1?(r.loss.binomtest=fA(o,Math.round(n),{p:a}),r.loss.pval=r.loss.binomtest.pValue,console.log("binomtest:",r.bell,this.histogram.map,o,n,a,r.loss.binomtest)):(console.log("can't binomtest",r.bell,this.histogram.map,o,n,a),r.loss.binomtest=NaN)}return r},tuneModelA(e,t){let r=[t];t===void 0&&(r=[1,10,20,40,110,120,140,150],r=r.filter(i=>i>=e&&i<=this.stats.max*5));let n={n:NaN,loss:{mse:NaN,chisq:NaN,pval:NaN}};return r.forEach(i=>{const o=this.makeModelA(e,i);if(!o)return;Ti(o.loss.mse)&&(!Ti(n.loss.mse)||o.loss.mse<n.loss.mse)&&(n=o)}),n},applySelectedNP(e){e<0||(e>this.selected_n&&(this.selected_n=Math.ceil(e)),this.selected_np=e)},applySelectedN(e){e<0||(e<this.selected_np&&(this.selected_np=e),this.selected_n=e)}},computed:{modelA(){return this.makeModelA(this.selected_np,this.selected_n)},modelAForChart(){const e=this.stats.len,t=this.stats.generalSigmas,r=[];return this.modelA.bell.forEach(([n,i])=>{const o=i/e,a=t*Math.sqrt(o*(1-o)/e),s=Math.max(0,o-a)*e,l=Math.min(1,o+a)*e;r.push([n,i,s,l])}),r},sweepRange(){const e={lo:Math.max(0,this.stats.meanLo),init:this.stats.mean,hi:this.stats.meanHi};return this.isGiant&&(e.init>40?(e.lo/=1.684,e.init/=1.684,e.hi/=1.684):e.init>20?(e.lo/=1.684,e.init/=1.684,e.hi/=1.6):e.init>10?(e.lo/=1.684,e.init/=1.684,e.hi/=1.5):e.init>5?(e.lo/=1.684,e.init/=1.684,e.hi/=1.3):e.init>1&&(e.lo/=1.684,e.init/=1.684,e.hi/=1)),e.range=e.hi-e.lo,e},modelASweep(){const e=this.tuneModelA(this.sweepRange.init,void 0);let t=10;const r=[.002,.005,.01,.02,.05,.1,.2,.5,1,2,5];for(const a of r)if(Math.floor(this.sweepRange.range/a)<20){t=a;break}const n=Math.ceil(this.sweepRange.lo/t)*t;let i=e;const o=[];for(let a=n;a<=this.sweepRange.hi;a+=t){let s=this.tuneModelA(a,void 0);a>this.sweepRange.init&&a<this.sweepRange.init+t&&o.push([this.sweepRange.init,s.n,e.loss.mse,e.loss.chisq,e.loss.pval]),o.push([a,s.n,s.loss.mse,s.loss.chisq,s.loss.pval]),s.loss.mse<i.loss.mse&&(i=s)}return isFinite(i.loss.mse)&&(this.selected_np=i.np,this.selected_n=i.n),{result:i,log:o}},makeChartHist(){return{legend:null,tooltip:{trigger:"axis"},dataset:[{source:this.histogram.arr},{source:this.modelAForChart}],xAxis:{axisLine:{onZero:!1},min:this.stats.min==0?-1:null,max:this.stats.max<3?this.stats.max+1:null},yAxis:{axisLine:{onZero:!1},axisLabel:{formatter:t=>this.formatKMG(t)}},grid:{left:35,top:8,right:10,bottom:20},series:[{type:"bar",name:"observed",datasetIndex:0,encode:{x:0,y:1},tooltip:{valueFormatter:t=>Ft(t,0)}},{type:"line",name:"model",datasetIndex:1,encode:{x:0,y:1},tooltip:{valueFormatter:t=>Ft(t,0)},showSymbol:!1},{type:"line",name:`-${this.stats.generalSigmas}\u03C3`,datasetIndex:1,encode:{x:0,y:2},tooltip:{valueFormatter:t=>Ft(t,0)},showSymbol:!1,lineStyle:{opacity:.4}},{type:"line",name:`+${this.stats.generalSigmas}\u03C3`,datasetIndex:1,encode:{x:0,y:3},tooltip:{valueFormatter:t=>Ft(t,0)},showSymbol:!1,lineStyle:{opacity:.4}}]}},makeChartASweep(){const e={legend:{},tooltip:{trigger:"axis",formatter:function(t){const r=t[0].data;return`np=${Ft(r[0],2)}<br/>n=${Ft(r[1],2)}<br/>MSE=${r[2].toLocaleString(void 0,{notation:"compact"})}<br/>\u03C7\xB2=${r[3].toLocaleString(void 0,{notation:"compact"})}<br/>p-val=${Ft(r[4],2)}<br/>`}},title:{subtext:"",left:"center",textStyle:{fontSize:10}},dataset:[{source:this.modelASweep.log}],xAxis:{min:this.sweepRange.lo,max:this.sweepRange.hi,name:"np",nameLocation:"center",nameGap:20,axisLine:{onZero:!1},axisLabel:{showMinLabel:!1}},yAxis:[{position:"left",axisLabel:{formatter:t=>t.toLocaleString(void 0,{notation:"compact"})},splitLine:{show:!1}},{position:"right",axisLabel:{formatter:t=>t.toLocaleString(void 0,{notation:"compact"})}}],grid:{left:35,top:30,right:40,bottom:20},series:[{name:"MSE",type:"line",encode:{x:0,y:2},tooltip:{valueFormatter:t=>Ft(t,2)}},{name:"p-val",type:"line",encode:{x:0,y:4},tooltip:{valueFormatter:t=>Ft(t,4)},yAxisIndex:1}]};return console.log("makeChartASweep",e.dataset),e}}},Lr=e=>(Ar("data-v-f49098bd"),e=e(),Cr(),e),fae=Lr(()=>b("span",{class:"title"},"Model A",-1)),hae=Lr(()=>b("span",null,[z(": all points were taken from a single distribution with "),b("i",null,"np = M")],-1)),dae=z(" with giant bonus"),pae={key:0},vae={style:{float:"left"}},gae=z(" Sweeping through "),mae=Lr(()=>b("i",null,"np",-1)),_ae={key:0,id:"chartSweep"},yae={key:1},bae={style:{padding:"1em"}},wae=Lr(()=>b("th",null,null,-1)),Sae=Lr(()=>b("th",null,"np",-1)),Tae=Lr(()=>b("th",null,"n",-1)),Pae=Lr(()=>b("th",null,"MSE",-1)),Eae=Lr(()=>b("th",null,"p-val",-1)),kae=Lr(()=>b("td",null,"Best fit:",-1)),Aae=Lr(()=>b("td",null,"Manual:",-1)),Cae=z(" np: "),Mae=["value","min","max","step"],xae=z(" n: "),Lae=["value","min"],Iae=Lr(()=>b("br",null,null,-1)),Oae={id:"chartHisto",style:{float:"left"}},Rae=Lr(()=>b("div",{style:{clear:"both"}},null,-1)),Dae=Lr(()=>b("br",null,null,-1)),Nae=Lr(()=>b("p",{class:"fsxs"},[z("MSE: "),b("i",null,"\u03A3 (observed - model)\xB2"),z(", discard nothing \u2190 this is used for fitting")],-1)),Fae={key:0,class:"fsxs"},Bae=z("p-val: "),$ae=Lr(()=>b("a",{href:"https://en.wikipedia.org/wiki/Binomial_test"},"exact",-1)),zae=[Bae,$ae],Vae=Lr(()=>b("p",{class:"fsxs"},[z("\u03C7\xB2: discard bins where model < 3, then "),b("i",null,"\u03A3 (observed - model)\xB2 / model")],-1)),Uae=Lr(()=>b("p",{class:"fsxs"},[z("p-val: "),b("i",null,"1 - chisquare.cdf(\u03C7\xB2, bins - 1 - dof) \u2190 this depends too much on previous step discards")],-1));function Gae(e,t,r,n,i,o){const a=pe("v-chart");return I(),R(W,null,[fae,hae,b("p",null,[gt(b("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=s=>r.isGiant=s)},null,512),[[ar,r.isGiant]]),dae]),r.isGiant?(I(),R("p",pae,"This causes gaps in Unlucky distrubution because giantValue=floor(1.684*ordinaryValue);")):tt("",!0),b("div",null,[b("div",vae,[gae,mae,z(" values in "+L(o.formatFixed(this.sweepRange.lo,2))+"\u2026"+L(o.formatFixed(this.sweepRange.hi,2))+" range: ",1),o.modelASweep.result.np?(I(),R("div",_ae,[xt(a,{option:o.makeChartASweep},null,8,["option"])])):(I(),R("div",yae," [failed] ")),b("div",bae,[b("table",null,[b("tr",null,[wae,Sae,Tae,Pae,tt("",!0),Eae]),o.modelASweep.result?(I(),R("tr",{key:0,class:en({strike:r.stats.aBad})},[kae,b("td",null,L(o.formatFixed(o.modelASweep.result.np,4)),1),b("td",null,L(o.formatFixed(o.modelASweep.result.n)),1),b("td",null,L(o.formatFixed(o.modelASweep.result.loss.mse,2)),1),tt("",!0),b("td",null,L(o.formatFixed(o.modelASweep.result.loss.pval,4)),1)],2)):tt("",!0),b("tr",null,[Aae,b("td",null,L(o.formatFixed(e.selected_np,4)),1),b("td",null,L(e.selected_n),1),b("td",null,L(o.formatFixed(o.modelA.loss.mse,2)),1),tt("",!0),b("td",null,L(o.formatFixed(o.modelA.loss.pval,4)),1)])]),Cae,b("input",{type:"range",onInput:t[1]||(t[1]=s=>o.applySelectedNP(Number(s.target.value))),value:e.selected_np,min:r.stats.min,max:r.stats.max,step:.01,class:"vmid"},null,40,Mae),xae,b("input",{type:"range",onInput:t[2]||(t[2]=s=>o.applySelectedN(Number(s.target.value))),value:e.selected_n,min:r.stats.max,max:200,step:1,class:"vmid"},null,40,Lae),Iae])]),b("div",Oae,[o.modelA.bell?(I(),va(a,{key:0,option:o.makeChartHist},null,8,["option"])):(I(),R(W,{key:1},[z(" [failed to build the requested distribution np="+L(o.modelA.np)+" n="+L(o.modelA.n)+" ] ",1)],64))]),Rae,Dae,Nae,e.isBinary?(I(),R("p",Fae,zae)):(I(),R(W,{key:1},[Vae,Uae],64))])],64)}const jae=$e(cae,[["render",Gae],["__scopeId","data-v-f49098bd"]]);Hr([yf,y_,B0,$0,Ilt,Sf,wf,Tf,z0,S_,w_,b_,V0]);const Wae={data:()=>({selected_np:1,selected_n:10,sweep_lo:0,sweep_hi:1}),props:{stats:Object,histogram:Object},components:{VChart:Pf},methods:{isGoodVal:Ti,formatFixed:Ft,formatKMG:wP,makeBinomialArray:TA,loss:PA,makeModelB(e,t){const r=this.makeBinomialArray(e,this.stats.lucky.len,t);if(!r)return null;const n={np:e,n:t,bell:r},i=this.histogram.map,o=this.histogramLuckOnly.err[0][1],a=this.histogramLuckOnly.err[0][2];if(r[0]<o){const l={...i};l[0]=o,n.loss=this.loss(n.bell,l,2,!1)}else if(r[0]>a){const l={...i};l[0]=a,n.loss=this.loss(n.bell,l,2,!1)}else{const l={...i};delete l[0],n.loss=this.loss(n.bell,l,2,!1,!0)}if(0 in r&&1 in r&&Object.keys(r).length==2&&0 in i&&1 in i&&Object.keys(i).length==2){const l=this.stats.lucky.len,u=r[1][1],c=i[1],f=u/l;c<=l&&0<f&&f<1?(n.loss.binomtest=fA(c,Math.round(l),{p:f}),n.loss.pval=n.loss.binomtest.pValue,console.log("binomtest:",r,i,c,l,f,n.loss.binomtest)):(console.log("can't binomtest",r,i,c,l,f),n.loss.binomtest=NaN)}return n},tuneModelB(e,t){let r=[t];t===void 0&&(r=[10,20,40,110,120,140,150],r.push(this.stats.max),r=r.filter(i=>i<=this.stats.max*5));let n={np:0,n:1,loss:{mse:void 0,chisq:void 0,pval:void 0}};if(!this.histogramLuckOnly){console.log("tuneModelB skip");return}return r.forEach(i=>{const o=this.makeModelB(e,i);if(!o)return;Ti(o.loss.mse)&&(!Ti(n.loss.mse)||o.loss.mse<n.loss.mse)&&(n=o)}),n&&n.np>0&&n.np<=n.n?n:(console.log(`tuneModelB np=${e} -> failed`),null)},applySelectedNp(e){e<0||(e>this.selected_n&&(this.selected_n=Math.ceil(e)),this.selected_np=e)},applySelectedN(e){e<0||(e<this.selected_np&&(this.selected_np=e),this.selected_n=e)}},computed:{histogramLuckOnly(){const e={...this.histogram.map};e[0]=this.histogram.map[0]-this.stats.unlucky.len;const t=[],r=[];for(const[n,i]of Object.entries(e)){if(n==0){const o=this.histogram.map[0]-(this.stats.len-this.stats.lucky.lenHi),a=this.histogram.map[0]-(this.stats.len-this.stats.lucky.lenLo);r.push([n,a,o])}t.push([n,i])}return{map:e,arr:t,err:r}},zeroBinRange(){return{min:this.histogramLuckOnly.err[0][1],max:this.histogramLuckOnly.err[0][2]}},npRangeForBinary(){if(Object.keys(this.histogram.map).length==2&&1 in this.histogram.map){const e=this.histogram.map[1];return{min:e/(this.zeroBinRange.max+e),max:e/(this.zeroBinRange.min+e)}}},modelB(){const e=this.makeModelB(this.selected_np,this.selected_n);return console.log("modelB",e),e},modelBForChart(){const e=this.stats.len,t=this.stats.generalSigmas,r=[];return this.modelB.bell.forEach(([n,i])=>{const o=i/e,a=t*Math.sqrt(o*(1-o)/e),s=Math.max(0,o-a)*e,l=Math.min(1,o+a)*e;r.push([n,i,s,l])}),r},modelBSweep(){const e=Math.max(this.stats.meanLo/this.stats.lucky.share,0);if(e>8888888)return console.log("modelBSweep skip - no input",this.stats.meanLo,this.stats.lucky.share,this.stats.lucky.std),!1;this.sweep_lo=e,this.sweep_hi=this.stats.meanHi/this.stats.lucky.share;const t=this.sweep_hi-e;let r=10;const n=[.002,.005,.01,.02,.05,.1,.2,.5,1,2,5];for(const s of n)if(Math.floor(t/s)<40){r=s;break}if(Math.floor(t/r)>1e3)return!1;const i=Math.ceil(e/r)*r;let o={np:void 0,n:void 0,loss:{mse:1/0,chisq:1/0,pval:0}};const a=[];for(let s=i;s<=this.sweep_hi;s+=r){const l=this.tuneModelB(s,void 0);if(!l)continue;a.push([s,l.n,l.loss.mse,l.loss.chisq,l.loss.pval]),Ti(l.loss.mse)&&(!Ti(o.loss.mse)||l.loss.mse<o.loss.mse)&&(console.log("new best model",s,l),o=l)}return this.selected_np=o.np,this.selected_n=o.n,{result:o,log:a}},makeChartBSweep(){const e={legend:{},tooltip:{trigger:"axis",formatter:function(t){const r=t[0].data;return`np=${Ft(r[0],2)}<br/>n=${Ft(r[1])}<br/>MSE=${r[2].toLocaleString(void 0,{notation:"compact"})}<br/>\u03C7\xB2=${r[3].toLocaleString(void 0,{notation:"compact"})}<br/>p-val=${Ft(r[4],2)}<br/>`}},title:{subtext:"",left:"center",textStyle:{fontSize:10}},dataset:[{source:this.modelBSweep.log}],xAxis:{min:this.sweep_lo,max:this.sweep_hi,name:"np",nameLocation:"center",nameGap:20,axisLine:{onZero:!1},axisLabel:{showMinLabel:!1}},yAxis:[{position:"left",axisLabel:{formatter:t=>this.formatKMG(t)},splitLine:{show:!1}},{position:"right"}],grid:{left:35,top:30,right:40,bottom:20},series:[{name:"MSE",type:"line",encode:{x:0,y:2},tooltip:{valueFormatter:t=>Ft(t,2)}},{name:"p-val",type:"line",encode:{x:0,y:4},tooltip:{valueFormatter:t=>Ft(t,4)},yAxisIndex:1}]};return console.log("makeChartBSweep",e.dataset),e},makeChartBHist(){return{legend:null,tooltip:{trigger:"axis"},dataset:[{source:this.histogramLuckOnly.arr},{source:this.histogramLuckOnly.err},{source:this.modelBForChart}],xAxis:{axisLine:{onZero:!1},min:-1,max:this.stats.max+1},yAxis:{axisLine:{onZero:!1},axisLabel:{formatter:t=>this.formatKMG(t)}},grid:{left:35,top:8,right:10,bottom:20},series:[{type:"bar",name:"observed",datasetIndex:0,encode:{x:0,y:1},tooltip:{valueFormatter:t=>Ft(t,0)}},{type:"line",name:"model",datasetIndex:2,encode:{x:0,y:1},tooltip:{valueFormatter:t=>Ft(t,3)},showSymbol:!1},{type:"line",name:`-${this.stats.generalSigmas}\u03C3`,datasetIndex:2,encode:{x:0,y:2},tooltip:{valueFormatter:t=>Ft(t,0)},showSymbol:!1,lineStyle:{opacity:.4}},{type:"line",name:`+${this.stats.generalSigmas}\u03C3`,datasetIndex:2,encode:{x:0,y:3},tooltip:{valueFormatter:t=>Ft(t,0)},showSymbol:!1,lineStyle:{opacity:.4}},{type:"custom",name:"observed-error",datasetIndex:1,encode:{x:0,y:[1,2]},itemStyle:{borderWidth:1.5},renderItem:function(t,r){var n=r.value(0),i=r.coord([n,r.value(1)]),o=r.coord([n,r.value(2)]),a=r.size([1,0])[0]*.1,s=r.style({stroke:r.visual("color"),fill:void 0});return{type:"group",children:[{type:"line",transition:["shape"],shape:{x1:i[0]-a,y1:i[1],x2:i[0]+a,y2:i[1]},style:s},{type:"line",transition:["shape"],shape:{x1:i[0],y1:i[1],x2:o[0],y2:o[1]},style:s},{type:"line",transition:["shape"],shape:{x1:o[0]-a,y1:o[1],x2:o[0]+a,y2:o[1]},style:s}]}},tooltip:{show:!1},z:100}]}}}},gr=e=>(Ar("data-v-7790bb48"),e=e(),Cr(),e),Hae=gr(()=>b("span",{class:"title"},"Model B",-1)),Xae=gr(()=>b("span",null,[z(": majority (1-\u03BB) of points are zero, but \u03BB points are from a binomial distribution with such "),b("i",null,"np"),z(", that \u03BB"),b("i",null,"np"),z(" = M")],-1)),Yae=z("Sweeping through "),qae=gr(()=>b("i",null,"np",-1)),Zae={style:{float:"left"}},Kae={key:0,id:"chartSweep"},Jae={style:{padding:"1em"}},Qae={style:{float:"left"}},tse=gr(()=>b("th",null,null,-1)),ese=gr(()=>b("th",null,"np",-1)),rse=gr(()=>b("th",null,"n",-1)),nse=gr(()=>b("th",null,"MSE",-1)),ise=gr(()=>b("th",null,"p-val",-1)),ose={key:0},ase=gr(()=>b("td",null,"Best fit:",-1)),sse=gr(()=>b("td",null,"Manual:",-1)),lse=z(" np\u1D38: "),use=["value","min","max","step"],cse=z(" n\u1D38: "),fse=["value"],hse=gr(()=>b("div",{style:{clear:"both"}},null,-1)),dse={key:0,style:{float:"left"}},pse={id:"chartHisto"},vse=gr(()=>b("br",null,null,-1)),gse={key:0},mse=z(" Corresponding range for "),_se=gr(()=>b("i",null,"np",-1)),yse={key:1},bse=gr(()=>b("div",{style:{clear:"both"}},null,-1)),wse=gr(()=>b("p",{class:"fsxs"},[z("MSE: "),b("i",null,"\u03A3 (observed - model)\xB2"),z(", discard nothing \u2190 this is used for fitting")],-1)),Sse={key:0,class:"fsxs"},Tse=z("p-val: "),Pse=gr(()=>b("a",{href:"https://en.wikipedia.org/wiki/Binomial_test"},"exact",-1)),Ese=[Tse,Pse],kse=gr(()=>b("p",{class:"fsxs"},[z("\u03C7\xB2: discard bins where model < 3, then "),b("i",null,"\u03A3 (observed - model)\xB2 / model")],-1)),Ase=gr(()=>b("p",{class:"fsxs"},[z("p-val: "),b("i",null,"1 - chisquare.cdf(\u03C7\xB2, bins - 1 - dof) \u2190 this depends too much on previous step discards")],-1));function Cse(e,t,r,n,i,o){const a=pe("v-chart");return I(),R(W,null,[Hae,Xae,o.modelB?(I(),R(W,{key:0},[b("p",null,[Yae,qae,z(" values in "+L(o.formatFixed(this.sweep_lo,2))+"\u2026"+L(o.formatFixed(this.sweep_hi,2))+" range:",1)]),b("div",null,[b("div",Zae,[o.modelBSweep?(I(),R("div",Kae,[xt(a,{option:o.makeChartBSweep},null,8,["option"])])):tt("",!0),b("div",Jae,[b("div",Qae,[b("table",null,[b("tr",null,[tse,ese,rse,nse,tt("",!0),ise]),o.modelBSweep.result?(I(),R("tr",ose,[ase,b("td",null,L(o.formatFixed(o.modelBSweep.result.np,3)),1),b("td",null,L(o.modelBSweep.result.n),1),b("td",null,L(o.formatFixed(o.modelBSweep.result.loss.mse,2)),1),tt("",!0),b("td",null,L(o.formatFixed(o.modelBSweep.result.loss.pval,4)),1)])):tt("",!0),b("tr",null,[sse,b("td",null,L(o.formatFixed(e.selected_np,3)),1),b("td",null,L(e.selected_n),1),b("td",null,L(o.formatFixed(o.modelB.loss.mse,2)),1),tt("",!0),b("td",null,L(o.formatFixed(o.modelB.loss.pval,4)),1)])]),b("p",null,[lse,b("input",{type:"range",onInput:t[0]||(t[0]=s=>o.applySelectedNp(Number(s.target.value))),value:e.selected_np,min:r.stats.min,max:e.sweep_hi*1.5,step:.01,class:"vmid"},null,40,use),cse,b("input",{type:"range",onInput:t[1]||(t[1]=s=>o.applySelectedN(Number(s.target.value))),value:e.selected_n,min:1,max:200,step:1,class:"vmid"},null,40,fse)])]),hse])]),o.modelB.bell?(I(),R("div",dse,[b("div",pse,[xt(a,{option:o.makeChartBHist},null,8,["option"])]),b("div",null,[z(" Bin 0 has 1-\u03BB \u2248 "+L(o.formatFixed(r.stats.unlucky.len))+" samples removed, "+L(o.formatFixed(o.histogramLuckOnly.arr[0][1]))+" remaining",1),vse,z(" Depending on actual \u03BB could potentially be "+L(o.formatFixed(o.histogramLuckOnly.err[0][1]))+"\u2026"+L(o.formatFixed(o.histogramLuckOnly.err[0][2]))+" remaining ",1),o.npRangeForBinary?(I(),R("p",gse,[mse,_se,z(": "+L(o.formatFixed(o.npRangeForBinary.min,3))+"\u2026"+L(o.formatFixed(o.npRangeForBinary.max,3)),1)])):tt("",!0)])])):(I(),R("div",yse," bad parameters ")),bse]),b("div",null,[wse,o.npRangeForBinary?(I(),R("p",Sse,Ese)):(I(),R(W,{key:1},[kse,Ase],64))])],64)):tt("",!0)],64)}const Mse=$e(Wae,[["render",Cse],["__scopeId","data-v-7790bb48"]]);Hr([yf,y_,B0,$0,Sf,wf,Tf,z0,S_,w_,b_,V0]);class xse{constructor(){this.data={},this.xmin=999,this.xmax=-999,this.ymin=999,this.ymax=-999}put(t,r,n){this.data.hasOwnProperty(t)||(this.data[t]={}),this.data[t][r]=n,this.xmin=Math.min(this.xmin,r/1e4),this.xmax=Math.max(this.xmax,r/1e4),this.ymin=Math.min(this.ymin,t/1e4),this.ymax=Math.max(this.ymax,t/1e4)}get(t,r){return!this.data.hasOwnProperty(t)||!this.data[t].hasOwnProperty(r)?null:this.data[t][r]}aslist(){let t=[];for(let[r,n]of Object.entries(this.data).sort((i,o)=>i[0]-o[0]))for(let[i,o]of Object.entries(n).sort((a,s)=>a[0]-s[0]))t.push([r/1e4,i/1e4,o.n,o.loss.mse,o.loss.chisq,o.loss.pval]);return t}}const Lse={data:()=>({selected_npL:1,selected_npU:1,selected_n:10,isGiant_lucky:!1,forceMSE:!1,bestPval:0}),props:{stats:Object,histogram:Object,isGiant:Boolean},components:{VChart:Pf},methods:{isGoodVal:Ti,formatFixed:Ft,formatKMG:wP,makeBinomialArray:TA,makeBinomialArraysForGiant:sae,sumDistributions:lae,loss:PA,applyGiantBonus:JG,ul2u(e,t,r){return r/(1-t)-t*e/(1-t)},l2u(e,t,r){return r-t*e},findPsStep(e,t,r,n,i){let a={il:0,iu:0,model:i};for(let s=-30;s<=30;s++)for(let l=-30;l<=30;l++){const u=t+l*n,c=r+s*n;if(u<0||c<0)continue;const f=this.isGiant?this.sweepRange.u_hi:this.l2u(c/1e4,this.stats.lucky.shareLo,this.sweepRange.u_hi);if(u/1e4>f)continue;const h=this.l2u(c/1e4,this.stats.lucky.shareHi,this.sweepRange.u_lo);if(u/1e4<h)continue;let d=e.get(u,c);d===null&&(d=this.makemodelC(c/1e4,void 0,u/1e4,void 0),this.bestPval=Math.max(this.bestPval,d.loss.pval),e.put(u,c,d)),d.loss.mse<a.model.loss.mse&&(a={il:s,iu:l,model:d})}return a},findPsRound(e,t,r,n,i,o){for(;t<=150;){let a=this.findPsStep(e,r,n,o,i);if(a.il==0&&a.iu==0)return console.log("no improvement on round",t),{round:t,curU:r,curL:n,model:a.model};if(r+=a.iu*o,n+=a.il*o,n/1e4>this.stats.max)return{round:t,curU:r,curL:n,model:a.model};t++}return{round:t,curU:r,curL:n,model:i}},makemodelC(e,t,r){let n=[t];t===void 0&&(n=[10,20,40,120],n=n.filter(o=>o>=e&&o>=r&&o>=this.stats.max));let i={n:void 0,loss:{mse:void 0,chisq:void 0,pval:void 0}};return this.stats.unlucky.len==0||(n.forEach(o=>{const a={npL:e,n:o,npU:r};if(this.isGiant){const l=this.makeBinomialArraysForGiant(r,this.stats.unlucky.len,e,this.stats.lucky.len,o,this.isGiant_lucky);a.bellU=l.bellU,a.bellL=l.bellL,a.bell=this.sumDistributions(a.bellL,a.bellU)}else a.bellU=this.makeBinomialArray(r,this.stats.unlucky.len,o),a.bellL=this.makeBinomialArray(r+e,this.stats.lucky.len,o),a.bell=this.sumDistributions(a.bellL,a.bellU);a.loss=this.loss(a.bell,this.histogram.map,3),Ti(a.loss.mse)&&(!Ti(i.loss.mse)||a.loss.mse<i.loss.mse)&&(i=a)}),i||console.log("makemodelC failed",e,r,t)),i},applySelectedNpL(e){e<0||(e>this.selected_nL&&(this.selected_nL=Math.ceil(e)),e>this.selected_n&&(this.selected_n=Math.ceil(e)),this.selected_npL=e)},applySelectedNpU(e){e<0||(e>this.selected_n&&(this.selected_n=Math.ceil(e)),this.selected_npU=e)},applySelectedNL(e){e<0||(e<this.selected_npL&&(this.selected_npL=e),this.selected_nL=e)},applySelectedNU(e){e<0||(e<this.selected_npU&&(this.selected_npU=e),this.selected_nU=e)},applySelectedN(e){e<0||(e<this.selected_npL&&(this.selected_npL=e),e<this.selected_npU&&(this.selected_npU=e),this.selected_n=e)},meanOfDistribution(e){let t=0,r=0;for(let[n,i]of e)t+=i,r+=n*i;return r/t}},computed:{modelC(){const e=this.makemodelC(this.selected_npL,this.selected_n,this.selected_npU);return console.log("modelC",e),e},sweepRange(){const e={u_lo:Math.max(0,this.stats.meanLo),u_init:this.stats.mean,u_hi:this.stats.meanHi,l_init:0};if(this.isGiant){const t=this.makeBinomialArray(e.u_init,this.stats.unlucky.len,100,!1),r=this.meanOfDistribution(t),n=this.makeBinomialArray(e.u_init,this.stats.unlucky.len,100,!0),o=this.meanOfDistribution(n)/r;console.log("init giant bonus",o),e.u_lo/=o,e.u_init/=o,e.u_hi/=o}return e},modelCSweep(){if(isNaN(this.stats.mean))return!1;this.bestPval=0;let e=1;const t=this.sweepRange.u_hi-this.sweepRange.u_lo;let r=1e4;t<3&&(r=5e3),t<1.5&&(r=2500),t<.6&&(r=1e3),t<.3&&(r=500),t<.12&&(r=200),t<.06&&(r=100),t<.03&&(r=50);let n=Math.round(this.sweepRange.u_init*1e4/r)*r,i=Math.round(this.sweepRange.l_init*1e4/r)*r;n<0&&(n=0),i<0&&(i=0);let o=this.makemodelC(i/1e4,void 0,n/1e4,void 0);this.stats.psGridPath=[[0,n/1e4,i/1e4,o.loss.chisq]];let a=new xse;a.put(n,i,o),{round:e,curU:n,curL:i,model:o}=this.findPsRound(a,e,n,i,o,r);const s=a.aslist();return this.selected_npL=o.npL,this.selected_npU=o.npU,this.selected_n=o.n,console.log("modelCSweep",o,this.stats.lucky.mean),{result:o,psGridDotsMap:a,psGridDots:s}},makeChartCHist(){return{legend:{},tooltip:{trigger:"axis",valueFormatter:t=>Ft(t,0)},dataset:[{source:this.histogram.arr},{source:this.modelC.bell},{source:this.modelC.bellL},{source:this.modelC.bellU}],xAxis:{min:this.stats.min==0?-1:null,max:this.stats.max<5?this.stats.max+1:null},yAxis:{axisLine:{onZero:!1},axisLabel:{formatter:t=>this.formatKMG(t)}},grid:{left:35,top:30,right:10,bottom:20},series:[{name:"observed",type:"bar",encode:{x:0,y:1},tooltip:{trigger:"axis",valueFormatter:t=>Ft(t,0)}},{name:"model \u03A3",type:"line",datasetIndex:1,encode:{x:0,y:1},showSymbol:!1},{name:"model U",type:"line",datasetIndex:3,encode:{x:0,y:1},showSymbol:!1},{name:"model L",type:"line",datasetIndex:2,encode:{x:0,y:1},showSymbol:!1}]}},makeChartCGrid(){const e=2.272727272727273;let{xmin:t,xmax:r,ymin:n,ymax:i}=this.modelCSweep.psGridDotsMap;const o=(t+r)/2,a=(n+i)/2;let s=.2;this.stats.mean<2&&(s=.05);const l=1.2*(this.modelCSweep.psGridDotsMap.xmax-this.modelCSweep.psGridDotsMap.xmin)+s,u=1.2*(this.modelCSweep.psGridDotsMap.ymax-this.modelCSweep.psGridDotsMap.ymin)+s;if(l/u>e){const m=l,_=l/e;t=o-m/2,r=o+m/2,n=a-_/2,i=a+_/2}else{const m=u*e,_=u;t=o-m/2,r=o+m/2,n=a-_/2,i=a+_/2}const f={xmin:t,xmax:r,ymin:n,ymax:i},h=this.forceMSE||isNaN(this.modelCSweep.result.loss.pval);let d=h?["#282","#2c2","#cc2","#ccc"]:["#ccc","#cc2","#2c2","#282"];const p={inRange:{color:d},calculable:!0,precision:h?0:2,controller:{inRange:{color:d}},orient:"vertical",top:"center",right:10,align:"left",padding:0};let v=h?{min:this.modelCSweep.result.loss.mse,max:this.modelCSweep.result.loss.mse*2,dimension:3,text:["MSE",""]}:{min:0,max:this.bestPval,dimension:5,text:["p-val",""]};return{legend:{},tooltip:{trigger:"item",axisPointer:{type:"cross"},formatter:function(m){const _=m.data;return`np\u1D41=${Ft(_[0],2)}<br/>np\u1D38=${Ft(_[1],2)}<br/>n=${Ft(_[2],2)}<br/>MSE=${_[3].toLocaleString(void 0,{notation:"compact"})}<br/>p-val=${Ft(_[5],2)}<br/>`}},title:{},dataset:[{source:this.modelCSweep.psGridDots}],xAxis:{name:"np\u1D38",nameGap:5,min:f.xmin,max:f.xmax,axisLabel:{showMinLabel:!1,showMaxLabel:!1},axisLine:{onZero:!1}},yAxis:{name:"np\u1D41",nameGap:5,min:f.ymin,max:f.ymax,axisLabel:{showMinLabel:!1,showMaxLabel:!1},axisLine:{onZero:!1}},grid:{left:35,top:30,right:40,bottom:20},series:[{type:"scatter",encode:{x:1,y:0,tooltip:[1,0,3]},tooltip:{valueFormatter:m=>`${m[1]} \u2192 ${Ft(m[2],4)}`},symbolSize:6,markArea:{silent:!0,data:[[{name:`M\xB1${this.stats.generalSigmas}\u03C3`,coord:[this.sweepRange.u_lo-this.sweepRange.u_init,this.sweepRange.u_lo]},{coord:[this.sweepRange.u_hi-this.sweepRange.u_init,this.sweepRange.u_hi]}]],label:{show:!0,position:"left"},itemStyle:{color:"rgba(0, 0, 200, 0)",borderWidth:1,borderType:"dashed"}},markLine:{silent:!0,symbol:"none",data:[this.isGiant?[{name:"low \u03BB, high M",label:{position:"insideMiddleTop"},coord:[this.sweepRange.u_hi-this.sweepRange.u_init,this.l2u(this.sweepRange.u_hi-this.sweepRange.u_init,this.stats.lucky.shareLo,this.sweepRange.u_hi)]},{coord:[this.modelCSweep.psGridDotsMap.xmax,this.l2u(this.sweepRange.u_hi-this.sweepRange.u_init,this.stats.lucky.shareLo,this.sweepRange.u_hi)]}]:[{name:"low \u03BB, high M",label:{position:"insideMiddleTop"},coord:[this.sweepRange.u_hi-this.sweepRange.u_init,this.l2u(this.sweepRange.u_hi-this.sweepRange.u_init,this.stats.lucky.shareLo,this.sweepRange.u_hi)]},{coord:[this.modelCSweep.psGridDotsMap.xmax,this.l2u(this.modelCSweep.psGridDotsMap.xmax,this.stats.lucky.shareLo,this.sweepRange.u_hi)]}],[{name:"high \u03BB, low M",label:{position:"insideMiddleBottom"},coord:[this.sweepRange.u_lo-this.sweepRange.u_init,this.l2u(this.sweepRange.u_lo-this.sweepRange.u_init,this.stats.lucky.shareHi,this.sweepRange.u_lo)]},{coord:[this.modelCSweep.psGridDotsMap.xmax,this.l2u(this.modelCSweep.psGridDotsMap.xmax,this.stats.lucky.shareHi,this.sweepRange.u_lo)]}]]}}],visualMap:{...p,...v}}}}},Dn=e=>(Ar("data-v-453a4690"),e=e(),Cr(),e),Ise=Dn(()=>b("span",{class:"title"},"Model C",-1)),Ose=Dn(()=>b("br",null,null,-1)),Rse=z(" with giant bonus on Unlucky"),Dse=z(" with giant bonus on Lucky"),Nse={style:{float:"left"}},Fse={key:0,style:{width:"570px",height:"270px"}},Bse={style:{padding:"1em"}},$se={style:{float:"left"}},zse=Dn(()=>b("tr",null,[b("th"),b("th",null,"np\u1D41"),b("th",null,"np\u1D38"),b("th",null,"n"),b("th",null,"MSE"),b("th",null,"p-val")],-1)),Vse=Dn(()=>b("td",null,"Best fit:",-1)),Use=Dn(()=>b("td",null,"Manual:",-1)),Gse=["value","min","max","step"],jse=z(" np\u1D41 "),Wse=Dn(()=>b("br",null,null,-1)),Hse=["value","max","step"],Xse=z(" np\u1D38 "),Yse=Dn(()=>b("br",null,null,-1)),qse=["value"],Zse=z(" n "),Kse=Dn(()=>b("div",{style:{clear:"both"}},null,-1)),Jse={key:0,id:"chartHisto",style:{float:"left"}},Qse=Dn(()=>b("div",{style:{clear:"both"}},null,-1)),tle=Dn(()=>b("br",null,null,-1)),ele=Dn(()=>b("p",{class:"fsxs"},[z("MSE: "),b("i",null,"\u03A3 (observed - model)\xB2"),z(", discard nothing \u2190 this is used for fitting")],-1)),rle=Dn(()=>b("p",{class:"fsxs"},[z("\u03C7\xB2: discard bins where model < 3, then "),b("i",null,"\u03A3 (observed - model)\xB2 / model")],-1)),nle=Dn(()=>b("p",{class:"fsxs"},[z("p-val: "),b("i",null,"1 - chisquare.cdf(\u03C7\xB2, bins - 1 - dof) \u2190 this depends too much on previous step discards")],-1));function ile(e,t,r,n,i,o){const a=pe("v-chart");return I(),R(W,null,[Ise,b("span",null,": some points were taken from a distribution L, and the rest from distribution U, so (1 - \u03BB) np\u1D41 + \u03BB (np\u1D41 + np\u1D38) = M, where \u03BB \u2208 "+L(o.formatFixed(r.stats.lucky.shareLo*100,2))+"\u2026"+L(o.formatFixed(r.stats.lucky.shareHi*100,2))+"% and M \u2208 "+L(o.formatFixed(r.stats.mean-1.96*r.stats.meanErr,2))+"\u2026"+L(o.formatFixed(r.stats.mean+1.96*r.stats.meanErr,2)),1),Ose,b("p",null,[gt(b("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=s=>r.isGiant=s)},null,512),[[ar,r.isGiant]]),Rse]),b("p",null,[gt(b("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=s=>e.isGiant_lucky=s)},null,512),[[ar,e.isGiant_lucky]]),Dse]),b("div",Nse,[o.modelCSweep?(I(),R("div",Fse,[xt(a,{option:o.makeChartCGrid},null,8,["option"])])):tt("",!0),b("div",Bse,[b("div",$se,[b("table",null,[zse,o.modelCSweep.result?(I(),R("tr",{key:0,class:en({strike:r.stats.dBad})},[Vse,b("td",null,L(o.formatFixed(o.modelCSweep.result.npU,2)),1),b("td",null,L(o.formatFixed(o.modelCSweep.result.npL,2)),1),b("td",null,L(o.modelCSweep.result.n),1),b("td",null,L(o.formatFixed(o.modelCSweep.result.loss.mse,2)),1),b("td",null,L(o.formatFixed(o.modelCSweep.result.loss.pval,4)),1)],2)):tt("",!0),b("tr",null,[Use,b("td",null,L(o.formatFixed(e.selected_npU,2)),1),b("td",null,L(o.formatFixed(e.selected_npL,2)),1),b("td",null,L(e.selected_n),1),b("td",null,L(o.formatFixed(o.modelC.loss.mse,2)),1),b("td",null,L(o.formatFixed(o.modelC.loss.pval,4)),1)])]),b("p",null,[b("input",{type:"range",onInput:t[2]||(t[2]=s=>o.applySelectedNpU(Number(s.target.value))),value:e.selected_npU,min:r.stats.min,max:r.stats.max,step:.01,class:"vmid"},null,40,Gse),jse,Wse,b("input",{type:"range",onInput:t[3]||(t[3]=s=>o.applySelectedNpL(Number(s.target.value))),value:e.selected_npL,min:0,max:r.stats.max,step:.01,class:"vmid"},null,40,Hse),Xse,Yse,b("input",{type:"range",onInput:t[4]||(t[4]=s=>o.applySelectedN(Number(s.target.value))),value:e.selected_n,min:1,max:200,step:1,class:"vmid"},null,40,qse),Zse])]),Kse])]),o.modelC.bell?(I(),R("div",Jse,[xt(a,{option:o.makeChartCHist},null,8,["option"])])):tt("",!0),Qse,tle,ele,rle,nle],64)}const ole=$e(Lse,[["render",ile],["__scopeId","data-v-453a4690"]]);Hr([yf,y_,B0,$0,Sf,wf,Tf,z0,S_,w_,b_,V0]);const ale={setup(){const e=At(),t=wY(),r=localStorage.getItem("droprates");return t.$patch(JSON.parse(r)),t.$subscribe((n,i)=>{localStorage.setItem("droprates",JSON.stringify(i))}),{gameStore:e,dropratesStore:t}},components:{VChart:Pf,DRMA:jae,DRMB:Mse,DRMC:ole},provide(){return{[gft]:Ye(()=>this.darkMode?"dark":"default")}},data(){const e=matchMedia("(prefers-color-scheme: dark)");return{alldata:{},generalSigmas:2,hide_buckets:{},darkModeQuery:e,darkMode:e.matches}},created(){this.fetchObservations()},mounted(){this.darkModeQuery.addEventListener("change",()=>{this.darkMode=this.darkModeQuery.matches})},watch:{},computed:{currentDataset(){const e={};if(this.dropratesStore.selected_pzk in this.alldata){const t=this.alldata[this.dropratesStore.selected_pzk];if(this.dropratesStore.selected_ik in t){const r=t[this.dropratesStore.selected_ik];if(this.dropratesStore.selected_specie in r){const n=r[this.dropratesStore.selected_specie];for(let[i,o]of Object.entries(n).sort((a,s)=>a[0]-s[0]))e[i]=o}}}return e},weightedDataset(){let e={};for(let[t,r]of Object.entries(this.currentDataset)){if(this.hide_buckets[t])continue;const n=r.length;let i=[];for(let o=0;o<n;o++){const a=ht.binomial.cdf(o,n,1-t/100);i.push(a)}e[t]={len:n,luckyLen:n*t/100,sorted:[...r].sort((o,a)=>o-a),weights:i}}return e},stats(){const e=this.currentDataset;let t=0,r=0;for(const[v,g]of Object.entries(e))t+=e[v].length,r+=e[v].length;const n=this.weightedDataset;for(let[v,g]of Object.entries(n))for(let m of g.weights)m>this.stats.generalConfidence/100,m>1-this.stats.generalConfidence/100;let i=[],o=[],a=0,s=100,l=0;for(const[v,g]of Object.entries(n)){s=Math.min(s,v),l=Math.max(l,v);let{len:m,luckyLen:_,sorted:y,weights:w}=g;a+=_,i.push(...y),o.push(...w)}const u={1.5:86.6385597,2:95.4499736,2.5:98.7580669,3:99.7300203,3.5:99.9534741841929,4:99.9936657516334},c={generalSigmas:this.generalSigmas,generalConfidence:u[this.generalSigmas],lenRaw:t,dataRaw:e,dataByLuck:n,minLuck:s,maxLuck:l,dataFlatSorted:i,weightsFlat:o,len:i.length,min:ht.min(i),max:ht.max(i),range:ht.range(i),sum:ht.sum(i),mean:ht.mean(i),meanErr:0,meanLo:0,meanHi:0,std:ht.stdev(i,!0),bell:[],histo:[]};if(c.meanErr=Math.sqrt(c.mean/c.max*(1-c.mean/c.max)*c.max/c.len),c.meanLo=c.mean-this.generalSigmas*c.meanErr,c.meanHi=c.mean+this.generalSigmas*c.meanErr,c.lucky={len:a,share:a/c.len,mean:0,std:0,lenHi:0,lenLo:0,shareHi:0,shareLo:0},isNaN(c.lucky.share))c.lucky.shareLo=NaN,c.lucky.shareHi=NaN,c.lucky.lenLo=NaN,c.lucky.lenHi=NaN;else{console.log("binomTest of lucky share%=",c.lucky.share,"with significance=",1-c.generalConfidence/100);const v=this.binomialTest(Math.round(c.lucky.len),c.len,{p:c.lucky.share,alpha:1-c.generalConfidence/100});c.lucky.shareLo=v.ci[0],c.lucky.shareHi=v.ci[1],c.lucky.lenLo=v.ci[0]*c.len,c.lucky.lenHi=v.ci[1]*c.len}c.unlucky={len:c.len-a,share:1-c.lucky.share,mean:0,std:0};let f=0,h=0;for(const[v,g]of Object.entries(n)){let{len:m,luckyLen:_,luckeyLen95:y,sorted:w,weights:T}=g;for(let S=0;S<m;S++){const P=w[S],A=T[S];f+=P*(1-A),h+=P*A}}c.unlucky.mean=f/c.unlucky.len,c.lucky.mean=h/c.lucky.len;let d=0,p=0;for(const[v,g]of Object.entries(n)){let{len:m,sorted:_,weights:y}=g;for(let w=0;w<m;w++){const T=y[w],S=_[w]-c.unlucky.mean;d+=S*S*(1-T);const P=_[w]-c.lucky.mean;p+=P*P*T}}return c.unlucky.std=Math.sqrt(d/c.unlucky.len),c.lucky.std=Math.sqrt(p/c.lucky.len),console.log("stats",c),c},histogram(){const e={arr:[],map:{}};if(this.stats.range>0){let t=[1];t=ht.histogram(this.stats.dataFlatSorted,this.stats.range+1);const n=Array.from(Array(this.stats.range+1).keys()).map(i=>[this.stats.min+i,t[i]]);e.arr=n;for(let i=0;i<t.length;i++)e.map[this.stats.min+i]=t[i]}else e.arr=[[this.stats.min,this.stats.len]],e.map[this.stats.min]=this.stats.len;return console.log("histogram",e),e}},methods:{formatFixed:Ft,makeIconSrc:Vi,binomialTest:fA,async fetchObservations(){const e=Date.now();this.alldata=await(await fetch("data/manual/yields_observed.json")).json();const t=this.dropratesStore.selected_pzk;this.dropratesStore.selected_pzk=t&&this.alldata[t]?t:Object.keys(this.alldata)[0];const r=this.dropratesStore.selected_ik;this.dropratesStore.selected_ik=r&&this.alldata[t][r]?r:Object.keys(this.alldata[t])[0];const n=this.dropratesStore.selected_specie;this.dropratesStore.selected_specie=n&&this.alldata[t][r][n]?n:Object.keys(this.alldata[t][r])[0],console.log("fetchObservations took",Date.now()-e,"ms",this.dropratesStore.selected_pzk,this.dropratesStore.selected_ik,this.dropratesStore.selected_specie)},activate(e,t,r){this.dropratesStore.selected_pzk=e,this.dropratesStore.selected_ik=t,this.dropratesStore.selected_specie=r}}},Yi=e=>(Ar("data-v-60e89c6f"),e=e(),Cr(),e),sle={id:"menu"},lle={style:{display:"none"}},ule=Yi(()=>b("p",{class:"fsxs"},"Left: droprate parameters currently used in workerman",-1)),cle=Yi(()=>b("p",{class:"fsxs"},"Right: observations used to find out current serverside parameters",-1)),fle={key:1},hle=Yi(()=>b("tr",null,[b("th",{class:"fsxs"},"n"),b("th",{class:"fsxs"},"np\u1D41"),b("th",{class:"fsxs"},"np\u1D38"),b("th",{class:"fsxs"},"item"),b("th",{class:"fsxs"},"normal"),b("th",{class:"fsxs"},"giant")],-1)),dle={class:"fsxs"},ple={class:"fsxs"},vle={class:"fsxs"},gle=["src"],mle={class:"center"},_le=["title","onClick"],yle=["title"],ble={id:"content"},wle=Yi(()=>b("tr",null,[b("td",null,"mute"),b("td",null,"luck")],-1)),Sle={class:"center"},Tle=["onUpdate:modelValue"],Ple=z(" Possible luck procs observed with "),Ele=B1('<option value="1.5" data-v-60e89c6f>\xB11.5\u03C3</option><option value="2" data-v-60e89c6f>\xB12\u03C3</option><option value="2.5" data-v-60e89c6f>\xB12.5\u03C3</option><option value="3" data-v-60e89c6f>\xB13\u03C3</option><option value="3.5" data-v-60e89c6f>\xB13.5\u03C3</option><option value="4" data-v-60e89c6f>\xB14\u03C3</option>',6),kle=[Ele],Ale=Yi(()=>b("tr",null,[b("th"),b("th",null,"min"),b("th",null,"max")],-1)),Cle=Yi(()=>b("td",null,"count",-1)),Mle=Yi(()=>b("td",null,"% of total",-1)),xle={id:"settings"},Lle=z(" Use model:"),Ile=Yi(()=>b("br",null,null,-1)),Ole=Yi(()=>b("label",{for:"option1"},[z("A. Same item drop regardless of luck (plants, lumber, ores)"),b("br")],-1)),Rle=Yi(()=>b("label",{for:"option2"},[z("B. Item only drops when luck procs (sacks, lumbering rares)"),b("br")],-1)),Dle=Yi(()=>b("label",{for:"option3"},[z("C. Different drops when luck procs and when not (eggs, honey)"),b("br")],-1)),Nle={key:0,id:"modelA",style:{float:"left"}},Fle={key:1},Ble={key:2};function $le(e,t,r,n,i,o){const a=pe("RouterLink"),s=pe("DRMA"),l=pe("DRMB"),u=pe("DRMC");return I(),R("main",null,[b("div",sle,[b("div",lle,L(n.dropratesStore.selected_pzk)+" "+L(n.dropratesStore.selected_ik)+" "+L(n.dropratesStore.selected_specie),1),ule,cle,(I(!0),R(W,null,It(i.alldata,(c,f)=>(I(),R(W,null,[f in n.gameStore.plantzoneStatic?(I(),va(a,{key:0,tag:"a",to:{path:"./",hash:"#node"+f}},{default:Ee(()=>[z(L(f)+" "+L(n.gameStore.plantzoneName(f)),1)]),_:2},1032,["to"])):(I(),R("span",fle,L(f),1)),b("table",null,[hle,(I(!0),R(W,null,It(c,(h,d)=>(I(),R("tr",null,[b("td",dle,[n.gameStore.ready&&Number(f)in n.gameStore.plantzones?(I(),R(W,{key:0},[z(L(n.gameStore.plantzones[Number(f)].rolls),1)],64)):tt("",!0)]),b("td",ple,[n.gameStore.ready&&Number(f)in n.gameStore.plantzones&&d in n.gameStore.plantzones[Number(f)].unlucky?(I(),R(W,{key:0},[z(L(n.gameStore.plantzones[Number(f)].unlucky[d]),1)],64)):tt("",!0)]),b("td",vle,[n.gameStore.ready&&Number(f)in n.gameStore.plantzones&&d in n.gameStore.plantzones[Number(f)].lucky?(I(),R(W,{key:0},[z(L(n.gameStore.plantzones[Number(f)].lucky[d]),1)],64)):tt("",!0)]),b("td",null,[xt(a,{tag:"a",to:{path:"./settings",hash:"#item"+d}},{default:Ee(()=>[b("span",null,[b("img",{src:o.makeIconSrc(d),class:"iconitem"},null,8,gle)])]),_:2},1032,["to"]),z(" "+L(n.gameStore.itemName(d)),1)]),(I(),R(W,null,It(["normal","giant"],p=>b("td",mle,[p in h?(I(),R(W,{key:0},[f!=n.dropratesStore.selected_pzk||d!=n.dropratesStore.selected_ik||p!=n.dropratesStore.selected_specie?(I(),R("button",{key:0,title:"item "+d,onClick:v=>o.activate(f,d,p)},L(Object.values(h[p]).flat().length),9,_le)):(I(),R("button",{key:1,title:"item "+d,class:"pressed"},L(Object.values(h[p]).flat().length),9,yle))],64)):tt("",!0)])),64))]))),256))])],64))),256))]),b("div",ble,[b("details",null,[b("summary",null,[z("Dataset: size N = "+L(o.stats.len)+", sum "+L(o.stats.sum)+", mean M = "+L(o.formatFixed(o.stats.mean,3))+"\xB1"+L(o.formatFixed(1.96*o.stats.meanErr,3))+", ",1),this.stats.minLuck==this.stats.maxLuck?(I(),R(W,{key:0},[z(L(this.stats.maxLuck),1)],64)):(I(),R(W,{key:1},[z(L(o.formatFixed(this.stats.minLuck,2))+"\u2026"+L(o.formatFixed(this.stats.maxLuck,2)),1)],64)),z("\u{1F340} \u2192 \u03BB \u2208 "+L(o.formatFixed(o.stats.lucky.shareLo*100,2))+"\u2026"+L(o.formatFixed(o.stats.lucky.shareHi*100,2))+"% cycles were lucky ",1)]),b("div",null,[b("table",null,[wle,(I(!0),R(W,null,It(o.stats.dataRaw,(c,f)=>(I(),R("tr",{class:en({strike:i.hide_buckets[f]})},[b("td",Sle,[gt(b("input",{"onUpdate:modelValue":h=>i.hide_buckets[f]=h,type:"checkbox"},null,8,Tle),[[ar,i.hide_buckets[f]]])]),b("td",null,L(f),1),(I(!0),R(W,null,It(c,h=>(I(),R("td",null,L(h),1))),256))],2))),256))])]),b("p",null,[Ple,gt(b("select",{"onUpdate:modelValue":t[0]||(t[0]=c=>i.generalSigmas=c)},kle,512),[[Sr,i.generalSigmas]]),z(" ("+L(o.formatFixed(o.stats.generalConfidence,2))+"%) confidence: ",1),b("table",null,[Ale,b("tr",null,[Cle,b("td",null,L(o.formatFixed(o.stats.lucky.lenLo,2)),1),b("td",null,L(o.formatFixed(o.stats.lucky.lenHi,2)),1)]),b("tr",null,[Mle,b("td",null,L(o.formatFixed(o.stats.lucky.shareLo*100,2)),1),b("td",null,L(o.formatFixed(o.stats.lucky.shareHi*100,2)),1)])])])]),b("div",xle,[Lle,Ile,gt(b("input",{type:"radio",id:"option1",value:"a","onUpdate:modelValue":t[1]||(t[1]=c=>n.dropratesStore.selected_model=c)},null,512),[[hd,n.dropratesStore.selected_model]]),Ole,gt(b("input",{type:"radio",id:"option2",value:"b","onUpdate:modelValue":t[2]||(t[2]=c=>n.dropratesStore.selected_model=c)},null,512),[[hd,n.dropratesStore.selected_model]]),Rle,gt(b("input",{type:"radio",id:"option3",value:"c","onUpdate:modelValue":t[3]||(t[3]=c=>n.dropratesStore.selected_model=c)},null,512),[[hd,n.dropratesStore.selected_model]]),Dle]),n.dropratesStore.selected_model=="a"?(I(),R("div",Nle,[xt(s,{stats:o.stats,histogram:o.histogram,isGiant:n.dropratesStore.selected_specie=="giant"},null,8,["stats","histogram","isGiant"])])):tt("",!0),n.dropratesStore.selected_model=="b"?(I(),R("div",Fle,[xt(l,{stats:o.stats,histogram:o.histogram},null,8,["stats","histogram"])])):tt("",!0),n.dropratesStore.selected_model=="c"?(I(),R("div",Ble,[xt(u,{stats:o.stats,histogram:o.histogram,isGiant:n.dropratesStore.selected_specie=="giant"},null,8,["stats","histogram","isGiant"])])):tt("",!0)])])}const zle=$e(ale,[["render",$le],["__scopeId","data-v-60e89c6f"]]),Vle=hY({history:MX("/workerman/"),routes:[{path:"/",name:"home",component:YAt},{path:"/plantzones",component:jCt},{path:"/modifiers",component:MMt},{path:"/settings",component:o6t},{path:"/about",component:()=>OY(()=>import("./AboutView.47ef6fe3.js"),[])},{path:"/othertowns",component:f6t},{path:"/workshops",component:A6t},{path:"/housecraft",component:X6t},{path:"/droprates",component:zle},{path:"/lodging",component:rMt}]});const EA=NH(xY),Ule=lX();EA.use(Ule);EA.use(Vle);EA.mount("#app");export{W as F,$e as _,b as a,z as b,R as c,xt as d,B1 as e,pe as f,Cr as g,I as o,Ar as p,RW as r,Ee as w};
